<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöí üçµ üìÆ R√©tro√©clairage adaptatif pour t√©l√©viseur Raspberry Pi - Ambilight Analog üë®üèª‚Äçüíª üí¶ üçñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il s'agit d'un t√©l√©viseur de 50 pouces avec 37 points RVB de r√©tro√©clairage adaptatif en haut et sur les c√¥t√©s de l'√©cran. Comment cr√©er un r√©tro-√©cla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>R√©tro√©clairage adaptatif pour t√©l√©viseur Raspberry Pi - Ambilight Analog</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486106/"><img src="https://habrastorage.org/webt/4j/nf/9b/4jnf9b-q6d5nf1a1pf-0-svy-ss.jpeg" alt="image"><br><br>  Il s'agit d'un t√©l√©viseur de 50 pouces avec 37 points RVB de r√©tro√©clairage adaptatif en haut et sur les c√¥t√©s de l'√©cran.  Comment cr√©er un r√©tro-√©clairage adaptatif similaire pour n'importe quel √©cran ou t√©l√©viseur est un sujet galvaud√©, mais tout √† fait pertinent pour un certain nombre de raisons. <br><br>  Tout d'abord, tout change.  Il y a quelques ann√©es, aucun projet ne fonctionnait sans b√©quilles logicielles ou mat√©rielles.  En tout cas, je n'ai pas vu de telles publications.  Ceux qui sont d√©crits sur Internet perdent leur pertinence en raison de l'obsolescence des plates-formes logicielles ou mat√©rielles, ou ne mettent en ≈ìuvre cette technologie que pour les moniteurs connect√©s √† un PC. <br><br>  Deuxi√®mement, il n'y a pas et il n'y aura pas de t√©l√©viseurs Samsung, Sony, Elge et autres prenant en charge cette technologie sur le march√©, car elle a √©t√© brevet√©e par Philips pendant de nombreuses ann√©es √† venir.  Et enfin, toutes les solutions ¬´pr√™tes √† l'emploi¬ª disponibles sur Ali et d'autres comme lui ont un certain nombre de limitations dans la flexibilit√© des param√®tres et l'adaptation √† la taille d'image du contenu vid√©o, les r√©glages de la gamme de couleurs, etc., n'√©tant qu'une b√©quille mat√©rielle analysant un signal externe et travailler uniquement sur la formation du r√©tro-√©clairage. <br><a name="habracut"></a><br><h4>  Option de capture de trame "Mat√©riel" </h4><br>  Si vous ne parlez pas des options th√©oriques de raffinement et de modernisation du r√©cepteur de t√©l√©vision lui-m√™me, vous devez accepter le fait que dans tous les cas, vous devrez traiter le signal HDMI - c'est-√†-dire  Il sera utilis√© pour l'analyse de trame et le r√©tro-√©clairage.  Ici, seules deux options de mise en ≈ìuvre se sugg√®rent: avec le traitement du signal de n'importe quelle source (comme les lightpacks avec ali) et avec la mise en ≈ìuvre de la source elle-m√™me sous la forme d'un d√©codeur TV avec r√©tro-√©clairage adaptatif. <br><br>  Dans le premier cas, nous obtenons une sorte de polyvalence - vous pouvez connecter une console de jeu ou une sorte de joueur √† l'appareil.  Dans le second - nous collectons ce m√™me "une sorte de joueur" avec une fonction de r√©tro-√©clairage int√©gr√©e.  En exp√©rimentant, j'ai impl√©ment√© les deux options, mais ici je ne me concentrerai que sur la seconde, et voici pourquoi: <br><br><img src="https://habrastorage.org/webt/ke/9o/pk/ke9opk8wfmxy-breiickrsaoqsa.jpeg" alt="image"><br><br>  Dans le sch√©ma fonctionnel donn√© de la premi√®re variante, le signal HDMI de n'importe quelle source arrive au r√©partiteur, o√π il est divis√© en deux sorties.  D√®s le premier, le contenu est lu sur n'importe quel r√©cepteur ou moniteur TV.  √Ä partir de la seconde, le signal entre simultan√©ment dans le scaler mat√©riel, o√π il est converti en un signal analogique avec des trames basse r√©solution - 320x480.  Le signal analogique est envoy√© √† un grabber USB mat√©riel, qui prend des ¬´captures d'√©cran¬ª de chaque trame et les transmet via le port USB √† l'entr√©e d'un mini PC monocarte - Raspberry Pi 3 B +.  Le logiciel sur les framboises analyse les trames √† l'aide du programme Hyperion et, via l'une des sorties GPIO, fournit des s√©quences de contr√¥le √† l'entr√©e d'une bande d'adresse comme WS2812B ou APA102.  Tout cela a bien fonctionn√©, mais il pr√©sente quelques inconv√©nients sous la forme d'un tas de fer avec des connexions et un petit retard dans l'√©mission d'un signal de r√©tro-√©clairage.  Le retard n'√©tait perceptible que sur les vid√©os de test avec un changement brusque de couleurs dans la plupart des images.  Sinon, rien √† redire, sauf pour le co√ªt de tout le fer dans cette mise en ≈ìuvre: <br><br>  Raspberry Pi 3 B + - environ 55 $. <br>  Bo√Ætier de radiateur - 14 $. <br>  Splitter HDMI 1080P actif pour 2 sorties - 15 $. <br>  HDMI 1080P vers AV Scaler - 15 $. <br>  Pince USB EasyCap - 18 $. <br>  Alimentation - environ 10 $. <br>  Carte microSD de 32 Go - 10 $. <br>  C√¢bles de connexion et autres petites choses - environ 10 $. <br>  Total, sans compter la bande d'adresse - pr√®s de 150 $. <br><br>  Ce n'est pas qu'une telle option va imm√©diatement au four - elle peut bien √™tre utile pour organiser le r√©tro-√©clairage sur certains grands √©crans pr√©fabriqu√©s dans la publicit√© ou les pr√©sentations, et le prix n'est pas le pire pour le r√©sultat - mais pour un usage domestique, j'ai opt√© pour la deuxi√®me option - dans Surtout des "logiciels".  Il est sorti plus facile, moins cher, plus compact et plus rapide.  Pour un usage commercial, il peut √©galement √™tre tout √† fait appropri√© - un Raspberry Pi avec un lecteur peut √™tre utilis√© avec succ√®s dans des projets o√π vous devez lire automatiquement de mani√®re cyclique et transparente du contenu √† partir du moment o√π vous l'allumez, √©teignez le lecteur, √† nouveau automatiquement - selon le calendrier √† la fin de la journ√©e.  Apr√®s avoir √©crit un petit script, nous aurons un appareil publicitaire avec la fonction de r√©tro-√©clairage adaptatif de tous les √©crans, d'au moins dix m√®tres de haut.  Mais revenons √† un usage domestique ... <br><br><h4>  Cadres de capture de l'option "Logiciel" </h4><br>  Les fonctions du Media Center et du contr√¥le du r√©tro-√©clairage resteront derri√®re le m√™me Raspberry Pi 3 B +, et toutes les connexions seront d√©sormais r√©duites √† la connexion de plusieurs connecteurs - alimentation, Internet, r√©tro-√©clairage et HDMI au t√©l√©viseur.  Pas plus que tout autre d√©codeur: <br><br><img src="https://habrastorage.org/webt/kv/oi/fn/kvoifnkm8v3zyluhrtwicjwi2dy.jpeg" alt="image"><br><br>  Pour l'avenir, je tiens √† noter que le Raspberry Pi 3 B + s'est av√©r√© √™tre un centre multim√©dia de d√©codeur TV compl√®tement universel avec toutes les capacit√©s n√©cessaires d'un tel appareil, ainsi qu'un r√©tro-√©clairage adaptatif personnalisable pour tout t√©l√©viseur moderne (et pas si) dot√© d'une entr√©e HDMI. <br><br>  La base du logiciel est l'OS Libreelec ouvert, sp√©cialement affin√© pour le lecteur Kodi.  <a href="https://www.ixbt.com/live/redirect/aHR0cHM6Ly9saWJyZWVsZWMudHYv">Le site du projet</a> contient toutes les informations n√©cessaires. <br><br>  √Ä propos des capacit√©s de l'une des plates-formes les plus puissantes et flexibles pour lire du contenu vid√©o-audio, IPTV, etc.  peut √™tre lu en notant dans n'importe quel moteur de recherche "description kodi des opportunit√©s".  Il y a beaucoup d'informations en russe sur ce sujet.  J'utilise peut-√™tre 1/10 de toutes les fonctionnalit√©s de la plate-forme et cela me suffit.  La plateforme est activement prise en charge, dispose d'une communaut√© r√©active.  Par cons√©quent, nous lisons, nous √©tudions - sur le wiki de ces projets et sur les forums, il y a presque toutes les informations n√©cessaires et les r√©ponses aux questions.  Nous prenons le kit de distribution et les instructions d'installation et de configuration sur le site web du projet Libreelec.  Puisque l'OS est multi-plateforme, n'oubliez pas que notre projet est construit sur Raspberry. <br><br>  Violant une tradition √©trange mais bien √©tablie de commencer de telles publications avec une description des types de bandes d'adresse et comment les coller maladroitement sur les murs arri√®re des t√©l√©viseurs √† domicile, je commencerai par installer et configurer un logiciel √† carte unique.  Malheureusement, faire des instructions √©tape par √©tape pour la configuration est presque impossible - cela prendrait une demi-centaine de pages de texte sans captures d'√©cran.  De plus, la plate-forme du joueur se d√©veloppe activement, les versions OS et Kodi changent, les informations actuelles - elles cessent bient√¥t de l'√™tre.  Par cons√©quent, voici seulement les points principaux ainsi que des liens vers des sources d'informations utiles. <br><br>  Pour configurer la partie logicielle du r√©tro√©clairage, contr√¥ler la t√©l√©commande infrarouge et le lecteur lui-m√™me, vous devez avoir une premi√®re id√©e de la disposition des r√©pertoires Libreelec, du fonctionnement du r√©seau local, de la console, de l'utilisation de la ligne de commande, etc., car nous ferons certaines choses dans le processus. √† la main.  Gr√¢ce aux installateurs sur la carte microSD, seuls le syst√®me d'exploitation Libreelec et le compl√©ment de mise en √©vidence - Hyperion, seront install√©s. <br><br>  √âtant donn√© que le Raspberry Pi ne dispose pas d'une horloge en temps r√©el, d'un BIOS et d'une alimentation de sauvegarde int√©gr√©s, tout ce qui est n√©cessaire pour fonctionner se trouve sur la carte microSD.  Pour installer le syst√®me d'exploitation sur la carte, vous devez t√©l√©charger le package <a href="https://www.ixbt.com/live/redirect/aHR0cHM6Ly93d3cucmFzcGJlcnJ5cGkub3JnL2Rvd25sb2Fkcy9ub29icy8%3D">NOOBS √†</a> partir du site Web du projet Raspberry (au moment de l'installation, j'ai utilis√© la version de construction 3.2.1) ou un outil sp√©cial - <a href="https://www.ixbt.com/live/redirect/aHR0cHM6Ly9saWJyZWVsZWMudHYvZG93bmxvYWRzX25ldy8%3D">¬´LibreELEC USB-SD Creator¬ª</a> . <br><br>  La carte m√©moire doit avoir de bonnes vitesses de lecture et d'√©criture, c'est-√†-dire √™tre au moins de niveau 10.  En termes de volume, le syst√®me d'exploitation Libreelec prend peu de place, des cartes de 16 Go suffiront pour le travail, si vous ne souhaitez pas acheter une plus grande quantit√©.  Il peut √™tre utilis√© pour stocker n'importe quel contenu. <br><br>  Dans le cas de NOOBS, le contenu de l'archive zip est d√©compress√© √† la racine d'une carte microSD format√©e en FAT32, la carte est ins√©r√©e dans l'emplacement libre de framboise, l'alimentation est allum√©e, puis, en choisissant le syst√®me d'exploitation n√©cessaire dans le programme d'installation et en suivant les instructions, d√©ployez Libreelec.  Cependant, les d√©veloppeurs de la plate-forme recommandent l'installation √† l'aide de LibreELEC USB-SD Creator, qui t√©l√©charge et √©crit lui-m√™me le package de distribution sur la carte, puis la carte est √©galement ins√©r√©e dans l'emplacement de framboise, o√π le programme d'installation d√©ploie le syst√®me d'exploitation apr√®s avoir mis sous tension.  Dans ce cas, les sections de la carte sont reformat√©es, apr√®s quoi sous Windows, vous ne verrez pas tout le volume r√©el du support.  Si, pour une raison quelconque, vous devez restaurer les partitions √† leur √©tat initial, vous devrez d'abord nettoyer la carte avec l'utilitaire Windows standard - DiskPart, puis dans la section "Gestion des disques" cr√©er une nouvelle partition sur l'espace libre du support et la formater. <br><br>  Pour simplifier l'installation et la configuration de l'OS, j'ai temporairement connect√© un moniteur et un clavier s√©par√©s avec une souris aux framboises. <br><br>  De plus, pour configurer et configurer le logiciel framboise, vous aurez besoin de sa connexion avec un PC et un acc√®s Internet, de pr√©f√©rence c√¢bl√©.  Le logiciel install√© sur le PC pour la connexion via SSH - PuTTY et WinSCP, ainsi que la machine virtuelle Java (jre-8u231-windows-x64) et le configurateur de d√©mon Hyperion - HyperCon (HyperCon.jar).  Vous pouvez utiliser un autre gestionnaire de fichiers pratique avec des panneaux, par exemple - Total Commander.  O√π t√©l√©charger et configurer - beaucoup d'informations sur des sites sp√©cialis√©s, il suffit de rechercher des informations avec la requ√™te de recherche "travailler avec PUttY et WinSCP".  Le projet <a href="https://www.ixbt.com/live/redirect/aHR0cHM6Ly9oeXBlcmlvbi1wcm9qZWN0Lm9yZy8%3D">Hyperion</a> poss√®de √©galement son propre forum et wiki. <br>  Dans cette capture d'√©cran, il existe trois fa√ßons de connecter des framboises √† un PC sous Win via SSH - via la console Putty, le gestionnaire de fichiers WinSCP et Total Commander: <br><br><img src="https://habrastorage.org/webt/zf/1z/tr/zf1ztr1lhtkmv2zk7puaho32j70.jpeg" alt="image"><br><br>  Le compte administrateur de Librelec a un nom d'utilisateur et un mot de passe root @ libreelec par d√©faut, qui sont mieux modifi√©s pour des raisons de s√©curit√©.  Apr√®s une installation r√©ussie dans les param√®tres syst√®me, nous effectuons des actions simples - activer SSH, SMB, attribuer une IP statique, d√©sactiver les mises √† jour: <br><br><img src="https://habrastorage.org/webt/20/t4/mb/20t4mbajewvx41ryqyhpr0qbur0.jpeg" alt="image"><br><br>  Il est suppos√© que les framboises sont connect√©es √† votre r√©seau domestique et vous pouvez trouver l'adresse IP des appareils qui y sont connect√©s sur votre PC domestique.  J'ai d√©sactiv√© les mises √† jour afin que le syst√®me de r√©tro√©clairage adaptatif une fois r√©gl√© ne se bloque pas si le d√©veloppeur modifie les composants qui lui sont li√©s dans Libreelec. <br><br>  Dans les param√®tres syst√®me des services dont vous avez besoin pour activer SSH et activer l'authentification par mot de passe, d√©finissez √©galement la version minimale du protocole SMB2, la valeur maximale - SMB3.  Vous aurez besoin de SMB pour voir les r√©pertoires du Raspberry Pi et les lecteurs flash qui y sont connect√©s depuis le PC: <br><br><img src="https://habrastorage.org/webt/i_/pw/uv/i_pwuvdqiel5pcmrd0ghzegbwj8.jpeg" alt="image"><br><br>  Sous Windows 10, sur le PC dans les param√®tres, vous devrez trouver et activer le support SMB, car il est d√©sactiv√© par d√©faut: <br><br><img src="https://habrastorage.org/webt/1x/ag/ba/1xagbapzp3y9_sgc7pev46llrwi.jpeg" alt="image"><br><br>  Nous recherchons et ajoutons √©galement la disposition du clavier russe dans les param√®tres.  Il ne se passera rien au clavier physique - il n'y aura de saisie qu'en anglais, mais dans le clavier virtuel √† l'√©cran, il sera possible de saisir du texte en russe.  Pour un acc√®s pratique aux r√©pertoires de la carte microSD et des lecteurs flash connect√©s aux framboises, vous pouvez cr√©er et placer un raccourci avec l'adresse du r√©pertoire distant sur la barre d'outils de Total Commander: <br><br><img src="https://habrastorage.org/webt/hb/9d/gi/hb9dgixgtpsa8ojxy7yo4wmfzno.jpeg" alt="image"><br><br>  Les fichiers sur le r√©seau local seront transf√©r√©s √† une vitesse limit√©e par la bande passante de votre routeur domestique, et beaucoup plus rapide qu'en acc√®s via SSH.  Dans tous les cas, la copie d'un film ou d'une musique de cette mani√®re sera plus pratique que le transport d'une cl√© USB d'un d√©codeur vers un PC.  Vous verrez la structure du r√©pertoire interne dans / stockage sur la carte framboise et les lecteurs connect√©s aux ports USB.  Avec une connexion filaire, j'ai 100 Mbps.  via le routeur, la vitesse de t√©l√©chargement maximale des fichiers d'un PC vers une cl√© USB en framboises √©tait d'environ 12 Mo / s, ce qui correspond √† peu pr√®s √† la bande passante de ma connexion filaire. <br><br>  Si n√©cessaire, √† l'avenir, vous pouvez d√©ployer sur votre PC n'importe quel serveur multim√©dia domestique (UPnP, DLNA) pour diffuser du contenu directement depuis votre PC. <br><br>  Apr√®s avoir install√© et configur√© l'acc√®s aux framboises √† partir d'un PC via SSH √† l'aide des programmes PUttY et WinSCP, vous pouvez proc√©der √† l'installation et √† la configuration du d√©mon Hyperion.  Il doit y avoir une machine virtuelle Java sur le PC. <br><br>  Tout fonctionnera comme ceci - au d√©but de Raspberry, un programme sp√©cial, Hyperion, sera lanc√© en arri√®re-plan avec Kodi en arri√®re-plan.  Elle analysera toutes les images vid√©o et, en fonction des param√®tres enregistr√©s dans le fichier de configuration, g√©rera la bande d'adresse via l'une des sorties GPIO de la framboise.  Autrement dit, apr√®s les param√®tres, tout fonctionnera de mani√®re autonome, aucune communication ou interaction avec le PC n'est requise.  Mais pour cr√©er rapidement un fichier de configuration et installer Hyperion sur des framboises, il existe un configurateur pratique qui s'ex√©cute sur un PC.  Ce programme vous aidera √† cr√©er rapidement un fichier de configuration pour que le d√©mon fonctionne, √† le t√©l√©charger et √† l'installer dans Raspberry et √† v√©rifier les fonctionnalit√©s du syst√®me √† l'aide d'une interface graphique pratique. <br><br><h4>  Hypercon </h4><br>  Le configurateur s'appelle HyperCon, il ne n√©cessite pas d'installation, il suffit d'ex√©cuter le fichier ex√©cutable HyperCon.jar sur le PC et de voir cette fen√™tre: <br><br><img src="https://habrastorage.org/webt/v0/qi/zx/v0qizxsds5ngp1pbclq8tf8waeq.jpeg" alt="image"><br><br>  Sur le c√¥t√© droit, il y a un √©cran virtuel pour lequel le r√©tro-√©clairage sera configur√© - zones de capture des couleurs, leur num√©rotation (commence √† 0), direction, emplacement, indentation, chevauchement et profondeur.  Dans la partie gauche, il y a cinq onglets avec des param√®tres. <br><br>  <b>Bri√®vement sur les onglets du configurateur:</b> <br><br>  <b>Quincaillerie (fer)</b> <br><br><ul><li>  p√©riph√©rique -&gt; Nom de la configuration - tout nom pratique pour la configuration actuelle </li><li>  p√©riph√©rique -&gt; Type - type de puce de la bande d'adresse, du module ou de quelque chose d'autre </li><li>  p√©riph√©rique -&gt; Quantit√© de LED - nombre de pixels adressables (combien de LED sont dans la bande) </li><li>  p√©riph√©rique -&gt; Ordre des octets RVB - couleurs suivantes dans le protocole utilis√© </li></ul><br>  <b>Construction (disposition des sources lumineuses)</b> <br><br><ul><li>  cases √† cocher -&gt; (led en haut √† gauche, etc.) - la pr√©sence d'une source de lumi√®re dans les coins de la structure </li><li>  LED horizontales -&gt; Nombre de pixels en haut de la structure </li><li>  LED gauche-&gt; pixels gauches </li><li>  LED √† droite -&gt; Le nombre de pixels sur le bord droit de la conception </li><li>  √âcart inf√©rieur -&gt; Le nombre de zones saut√©es le long du bas de la structure (pour contourner le pied du t√©l√©viseur ou toute la zone inf√©rieure) </li><li>  1 er d√©calage LED -&gt; Correction du d√©calage pixel pour d√©finir le premier dans un coin pratique. </li></ul><br>  <b>Processus d'image</b> <br><br><ul><li>  Processus d'image -&gt; Profondeur horizontale - profondeur de la zone horizontale,% </li><li>  Processus d'image -&gt; Profondeur verticale - profondeur de la zone verticale,% </li><li>  Processus d'image -&gt; Espace horizontal - indentation horizontale des zones √† partir du bord,% </li><li>  Processus d'image -&gt; Espace vertical - indentation verticale des zones √† partir du bord,% </li><li>  Processus d'image -&gt; Chevauchement - chevauchement des zones voisines,% </li></ul><br>  D√©tection Blackborder - Sensibilit√© et mode de traitement.  Cela fonctionne en th√©orie comme ceci - le d√©mon analyse les bords de l'√©cran au niveau sp√©cifi√© et calcule la largeur des bords sombres √† exclure des zones trait√©es.  C'est pour les cas o√π une image grand √©cran est lue. <br><br>  <b>Processus (traitement de trame)</b> <br><br><ul><li>  Lissage -&gt; Activ√© (case √† cocher pour activer l'anticr√©nelage) </li><li>  Lissage -&gt; Type </li><li>  Lissage -&gt; Temps </li><li>  Lissage -&gt; Mettre √† jour la fr√©quence (taux de rafra√Æchissement) </li><li>  Lissage -&gt; D√©lai de mise √† jour (d√©lai avant la mise √† jour de la trame) </li><li>  √âtalonnage des couleurs - √©l√©ments intuitifs qui vous permettent de d√©finir le niveau d'√©clat minimum et maximum, la saturation, la temp√©rature, le niveau d'√©clat d'arri√®re-plan sans signal, s√©par√©ment pour chacune des 3 couleurs primaires. </li></ul><br>  La case coch√©e Envoyer en continu vous permet de voir les changements dans le processus de configuration d√©j√† sur la structure assembl√©e. <br><br>  <b>Grabber (Grabber - frame grabber, l'onglet le plus int√©ressant)</b> <br><br><ul><li>  Capteur de trame interne (logiciel de saisie) </li><li>  Capteur de cadre interne-&gt; activ√© </li><li>  Accroche-cadre interne-&gt; Largeur </li><li>  Capteur de cadre interne-&gt; Hauteur (hauteur de zone) </li><li>  Capteur de cadre interne-&gt; Intervalle </li><li>  Capture d'image interne -&gt; Canal prioritaire (priorit√© de ce canal) </li></ul><br>  Quelques clarifications sont n√©cessaires ici.  L'astuce est que nous cr√©ons un lecteur multim√©dia bas√© sur le Raspberry Pi, qui jouera lui-m√™me le contenu d'un r√©seau local, d'un lecteur flash ou d'une t√©l√©vision IP sur la plate-forme LibreElec.  √âtant donn√© que le contenu tourne d√©j√† avec le lecteur de framboise, la capture se fera par programme, sans grabber EasyCap externe, et le d√©mon traitera les images lui-m√™me, car dans ce cas, la source du signal sera la sortie HDMI du Raspberry Pi lui-m√™me.  Il est possible d'utiliser le m√™me grabber externe pour une autre source sans d√©connecter les priorit√©s internes √† un canal qui sont pr√©vues pour cela, c'est le dernier √©l√©ment pour configurer le grabber logiciel.  Plus le nombre est √©lev√©, plus la priorit√© de la cha√Æne est faible. <br><br>  Exactement, il n'y a pas d'erreur. <br><br><ul><li>  Grabber V4L2 (Param√®tres du pilote du mat√©riel Grabber)) </li><li>  Grabber V4L -&gt; P√©riph√©rique (p√©riph√©rique USB √† partir duquel la capture est effectu√©e - / dev / video0 par d√©faut) </li><li>  Grabber V4L -&gt; Input (L'entr√©e utilis√©e est 0 par d√©faut) </li><li>  Grabber V4L -&gt; Largeur (largeur de zone - -1 par d√©faut) </li><li>  Grabber V4L -&gt; Heigth (hauteur de zone - -1 par d√©faut) </li><li>  Grabber V4L -&gt; D√©cimation du cadre </li><li>  Grabber V4L -&gt; D√©cimation de la taille (taux de compression) </li><li>  Grabber V4L -&gt; Canal prioritaire (priorit√© de ce canal) </li><li>  Grabber V4L -&gt; mode 3D (s√©lection du mode 2D / 3D) </li><li>  Grabber V4L -&gt; Recadrer √† gauche (recadrer √† gauche) </li><li>  Grabber V4L -&gt; Crop Right (recadrer vers la droite) </li><li>  Grabber V4L -&gt; Crop Top (crop top) </li><li>  Grabber V4L -&gt; Crop Bottom (recadrer le cadre inf√©rieur) </li><li>  Grabber V4L -&gt; les trois derniers points (seuil de commutation des canaux par couleur) </li></ul><br>  <b>Externe</b> <br><br><ul><li>  Externe -&gt; Kodi Checker (Param√®tres du lecteur Kodi, s'il est utilis√© en tant que lecteur. Les cases √† cocher s√©lectionn√©es d√©sactiveront le r√©tro√©clairage lors de l'ex√©cution des fonctions sp√©cifi√©es du lecteur. Vous pouvez configurer le r√©tro√©clairage pour qu'il fonctionne uniquement lors de la lecture de contenu et s'√©teindre dans tous les autres cas ) </li><li>  Externe -&gt; Json / Proto / Boblight Server (param√®tres de port du serveur, laissez comme sur l'√©cran) </li><li>  Externe -&gt; Booteffect / Couleur statique (Param√®tres d'effet de d√©monstration au d√©marrage du d√©mon) </li><li>  Externe -&gt; Json / Proto Forvard (param√®tres du port de sortie, laisser comme √† l'√©cran) </li></ul><br>  <b>SSH (Param√®tres de connexion PC avec Raspberry Pi)</b> <br><ul><li>  SSH - Connexion -&gt; Syst√®me (Choix du syst√®me d'exploitation install√© sur le Raspberry Pi) </li><li>  SSH - Connexion -&gt; IP cible (adresse IP du Raspberry Pi) </li><li>  SSH - Connexion -&gt; Port (comme dans la capture d'√©cran - (22)) </li><li>  SSH - Connexion -&gt; Nom d'utilisateur / mot de passe (nom - mot de passe d√©fini sur le Raspberry Pi) </li><li>  SSH - Connexion -&gt; Connecter / D√©connecter (bouton de connexion-d√©connexion avec Raspberry Pi) </li><li>  SSH - Connexion -&gt; Afficher le trafic (bouton pour appeler la console avec sortie d'informations) </li><li>  SSH - G√©rer Hyperion depuis HyperCon -&gt; Inst / Upd.  Hyperion (bouton pour installer le d√©mon sur le Raspberry Pi ou mettre √† jour le d√©mon via le r√©seau. Pas de sudo get-install, connectez-vous au Raspberry Pi, piquez et attendez la sortie vers la console HyperCon) </li><li>  SSH - G√©rer Hyperion depuis HyperCon -&gt; Supprimer Hyperion (bouton de d√©sinstallation du d√©mon) </li><li>  SSH - G√©rer Hyperion depuis HyperCon -&gt; D√©marrer / Arr√™ter (boutons stop-start du d√©mon) </li><li>  SSH - G√©rer Hyperion depuis HyperCon -&gt; Obtenir le journal (sortie vers les journaux de la console du d√©mon, pratique pour </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> recherche d'aucune station d'accueil et lecture de codes d'erreur) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SSH - Envoyer la configuration Hyperion -&gt; Chemin de configuration local (Envoyer le fichier de configuration √† l'emplacement local sp√©cifi√© sur le PC) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SSH - Envoyer la configuration Hyperion -&gt; Envoyer la configuration (Envoyer le fichier de configuration via SSH vers Raspberry Pi) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SSH - Colorpicker (testeur de palette intuitif - vous pouvez v√©rifier la sortie de toutes les couleurs. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Les boutons sous les onglets enregistrent-chargent les param√®tres d'HyperCon (pas le fichier de configuration du d√©mon lui-m√™me !!) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L'aide est compr√©hensible, et Cr√©er une configuration Hyperion vous permet d'enregistrer localement le fichier de configuration du d√©mon pour Raspberry Pi lui-m√™me - hyperion.config.json </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme vous pouvez le voir dans la liste ci-dessus, il existe de nombreuses options de personnalisation, ce qui rend l'outil tr√®s flexible pour toute liste de souhaits et t√¢ches. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä titre d'exemple, ma configuration d'onglets:</font></font></b> <br><br><img src="https://habrastorage.org/webt/-z/qg/7g/-zqg7gpc15imlq10asidggqma9q.jpeg" alt="image"><br><br><img src="https://habrastorage.org/webt/9a/xv/i6/9axvi6bpicrucblyzxu8b-qhntm.jpeg" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le premier onglet, nous organisons les zones de la m√™me mani√®re que les pixels de r√©tro√©clairage √† l'arri√®re du t√©l√©viseur seront physiquement situ√©s. Vous pouvez remplir tout le p√©rim√®tre ou une partie de celui-ci, d√©finir la direction, le d√©but, etc. Le type de bande que j'ai utilis√© est WS2812B, donc dans la capture d'√©cran, le champ correspondant est s√©lectionn√© comme WS281x. Le nombre de pixels que j'ai d√©termin√© la densit√© des LED sur la bande disponible et la diagonale de l'√©cran. Les onglets restants sont tels que d√©crits ci-dessus, et dans le plus r√©cent, nous s√©lectionnons notre syst√®me d'exploitation sur le Raspberry Pi, configurons la communication via SSH et installons le d√©mon Hyperion sur une seule carte. Ensuite, nous enregistrons la configuration HyperCon, cr√©ons un nouveau fichier de configuration Hyperion, envoyons la configuration cr√©√©e au Raspberry Pi, d√©marrons et essayons ColorPicker pour v√©rifier si les couleurs correspondent √† la palette. Si tout correspond,tout contenu jou√© par le lecteur Kodi contr√¥lera le r√©tro-√©clairage. Sortie de signal GPIO - 18 (broche physique du peigne - 12).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les d√©tails de toutes les connexions seront d√©crits ci-dessous, apr√®s une description de tous les param√®tres du programme. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je n'ai pas configur√© le d√©marrage, le d√©mon d√©marre en m√™me temps que le lecteur d√©marre. Cependant, c'√©tait pour que le r√©tro-√©clairage ne s'allume toujours pas. Ensuite, nous essayons de v√©rifier si le d√©marrage automatique du d√©mon est enregistr√© dans "/storage/.config/ autostart.sh" et essayons de r√©installer le d√©mon pour envoyer √† nouveau sa configuration au Raspberry Pi. Le programme lui-m√™me envoie la configuration au r√©pertoire </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"/storage/.config/ hyperion.config.json". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez √©galement v√©rifier le fonctionnement du d√©mon en envoyant une couleur sur l'onglet SSH HyperCon, en cochant la case ¬´Mise √† jour automatique¬ª et en appuyant sur le bouton stop-start pour le red√©marrer. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si le d√©mon ne d√©marre pas apr√®s le red√©marrage du Raspberry Pi, essayez de changer le d√©marrage automatique dans le fichier</font></font><br><br><pre><code class="plaintext hljs">/storage/.config/autostart.sh //--------------------------------------------------------------------------------------------------------------- #!/bin/sh sleep 5 /storage/hyperion/bin/hyperiond.sh /storage/.config/hyperion.config.json &gt; /storage/logfiles/hyperion.log 2&gt;&amp;1 //---------------------------------------------------------------------------------------------------------------</code> </pre> <br>  retardant ainsi l'ex√©cution du d√©mon. <br><br><h4>  T√©l√©commande par n'importe quelle t√©l√©commande infrarouge </h4><br>  Comme en plus du r√©tro-√©clairage, le pr√©fixe sera un centre multim√©dia √† part enti√®re - vous devez y attacher et configurer la t√©l√©commande.  Si votre t√©l√©viseur prend en charge la technologie CEC (Consumer Electronics Control, c'est-√†-dire le protocole de contr√¥le via HDMI), Kodi peut configurer et utiliser la t√©l√©commande du t√©l√©viseur qui est d√©j√† disponible avec le t√©l√©viseur pour contr√¥ler le d√©codeur. √âtant donn√© que tous les fabricants appellent ce protocole diff√©remment sur leurs t√©l√©viseurs , (par exemple, LG - SimpLink, Samsung -Anynet, Sony - BRAVIA Sync), regardez dans les param√®tres de votre t√©l√©viseur pour la prise en charge de cette fonction. Je n'ai pas une tr√®s bonne t√©l√©commande pour la t√©l√©vision, alors je suis all√© dans l'autre sens - j'ai pris celle qui √©tait avec l'ancien D√©codeur TV sur Android (alors que d'autres t√©l√©commandes command√©es pour ce projet viennent de Chine): <br><br><img src="https://habrastorage.org/webt/ss/ey/-r/ssey-rwucyrk5mpufui4mhnq4uo.jpeg" alt="image"><br><br>  Sur le peigne Raspberry, vous aurez besoin de broches + 5V, de la masse et du signal sur GPIO23 (broche physique - 16), car GPIO18 (broche physique - 12), qui est configur√© pour les p√©riph√©riques IR par d√©faut - est d√©j√† occup√© √† √©mettre des paquets vers le r√©tro-√©clairage. <br><br>  <b>Processus:</b> <br><br>  Pour connecter le pilote du r√©cepteur IR, √©ditez le fichier /flash/config.txt, √† la fin duquel nous √©crivons la ligne (ici et ci-dessous sans guillemets): <br>  "Dtoverlay = gpio-ir, gpio_pin = 23" <br><br>  Apr√®s avoir connect√© le r√©cepteur IR aux framboises, vous devez obtenir les codes de num√©risation pour les boutons de la t√©l√©commande dont nous avons besoin et leur lier les commandes.  Apr√®s avoir d√©termin√© le type de protocole dans la console avec la commande ir-keytable, nous attachons les codes de scan aux commandes re√ßues dans la console en utilisant <br>  ¬´Irrecord -l |  grep ^ KEY ", faites manuellement les mappages et cr√©ez un tableau de ce type: <br>  table ireltex, tapez: NEC <br><br><pre> <code class="plaintext hljs">0x8f64d KEY_0 0x8f642 KEY_1 0x8f641 KEY_2 0x8f640 KEY_3 0x8f646 KEY_4</code> </pre> <br>  Et donc - tous les boutons et commandes dont nous avons besoin.  J'ai eu 34 lignes d'allumettes.  La premi√®re ligne est le nom de la table et le protocole de contr√¥le √† distance.  Les lignes suivantes repr√©sentent le code de balayage des boutons √† gauche.  √Ä droite, s√©par√© par un espace, se trouve la commande de contr√¥le Kodi.  Et ainsi de suite, dans l'ordre. <br><br>  La table doit √™tre conserv√©e.  Pour ce faire, un fichier est cr√©√© (je l'ai appel√© ireltex) √† partir duquel ces liaisons seront lues.  Le fichier doit √™tre plac√© dans le dossier ¬´/storage/.config/rc_keymaps/ireltex¬ª, puis cr√©er le fichier <br>  "/Storage/.config/rc_maps.cfg", nous y √©crivons la ligne: <br>  "* * Ireltex" (ess-mais tous sans guillemets). <br><br>  Via la console Putty, chargez la table r√©sultante dans le pilote: <br>  "Ir-keytable -c -w /storage/.config/rc_keymaps/ireltex", red√©marrez le Raspberry Pi et modifiez la derni√®re ligne du fichier <br>  "/Flash/config.txt" <br>  Maintenant, cela ressemble √† ceci: <br>  "Dtoverlay = gpio-ir, gpio_pin = 23, rc-map-name = ireltex" <br>  Pour d√©poser <br>  "/Storage/.config/autostart.sh" vous devez ajouter le chargement automatique du protocole de t√©l√©commande pour que l'enregistrement ressemble √† ceci (pour ma t√©l√©commande et son protocole): <br><br><pre> <code class="plaintext hljs">#!/bin/sh ( sleep 5 ir-keytable -p nec )&amp; sleep 5 /storage/hyperion/bin/hyperiond.sh /storage/.config/hyperion.config.json &gt; /storage/logfiles/hyperion.log 2&gt;&amp;1 &amp;</code> </pre> <br>  Je red√©marre √† nouveau le Raspberry Pi et maintenant Kodi r√©pond aux commandes de la t√©l√©commande. <br>  Le processus d'installation complet avec des exemples dans l'original est d√©crit plus en d√©tail <a href="https://libreelec.wiki/infrared_remotes">ici</a> . <br><br>  Vous pouvez √©galement taper dans le moteur de recherche la requ√™te "LibreElec + IR Remote" et obtenir plusieurs articles sur ce sujet en russe. <br><br>  Si vous suspendez √©galement la sortie du r√©cepteur IR, sauf GPIO 23 √† l'entr√©e GPIO3 - le Raspberry Pi s'allumera par commande √† partir de la t√©l√©commande.  L'inconv√©nient de cette m√©thode de contr√¥le est que le signal d'allumage sera re√ßu par n'importe qui √† partir de n'importe quelle t√©l√©commande IR, mais je n'ai pas trouv√© d'autres moyens d'activer √† distance les framboises.  Vous devez donc cr√©er un d√©tecteur suppl√©mentaire qui prend une commande et transmet uniquement ce signal √† l'entr√©e GPIO3 Raspberry Pi. <br><br>  Afin d'√©viter les miracles avec un scintillement al√©atoire spontan√© des pixels, la masse de la bande, en plus de la broche GND GPIO, doit √™tre connect√©e directement √† la borne n√©gative de l'alimentation externe avec un fil correspondant √† la section actuelle et le fil de signal D-IN doit √™tre d'une longueur minimale. <br><br>  Il ne faut pas oublier que diff√©rents r√©cepteurs IR peuvent avoir des tensions d'alimentation (3,3 ou 5 V) et des affectations de broches diff√©rentes.  Afin de ne pas endommager le r√©cepteur ou les ports du Raspberry Pi, la connexion doit √™tre effectu√©e conform√©ment √† la documentation du r√©cepteur utilis√©! <br>  <b>En cons√©quence, jusqu'√† pr√©sent, toutes les connexions sur les broches GPIO Raspberry Pi ressemblent √† ceci:</b> <br><br><img src="https://habrastorage.org/webt/kp/za/pg/kpzapg9cddh4qk2uyl_eut2qiqe.jpeg" alt="image"><br><br><h4>  Inclusion correcte du Raspberry Pi avec t√©l√©commande IR </h4><br>  Maintenant, vous devez faire exactement l'inclusion ¬´correcte¬ª du Raspberry Pi √† partir du bouton attribu√© sur la t√©l√©commande IR.  Maintenant, l'appareil d√©marre lorsqu'un signal arrive sur la broche GPIO3 (cinqui√®me broche physique), et comme le r√©cepteur ne se soucie pas de ce qu'il doit recevoir dans cette plage infrarouge, le t√©l√©chargement provient d'un signal provenant de n'importe quelle t√©l√©commande, parfois m√™me lorsque les lumi√®res sont allum√©es dans la pi√®ce, ce qui n'est pas pratique .  Pour r√©soudre ce probl√®me, entre le GPIO3 et la broche de signal du r√©cepteur IR, vous avez besoin d'un interm√©diaire qui d√©codera le signal, et uniquement si la commande correspond √† celle pr√©c√©demment attribu√©e, allumez le Raspberry Pi.  De plus, vous devez pouvoir utiliser diff√©rentes t√©l√©commandes ou les boutons d'une seule t√©l√©commande.  Bien s√ªr, vous pouvez √©crire le firmware pour n'importe quel ATiny d'une valeur d'un demi-dollar et tout fonctionnera bien, mais comme nous parlons d'un constructeur r√©p√©table et simple, il est beaucoup plus facile d'utiliser le contr√¥leur relativement bon march√© et compact - Arduino Nano.  La carte fonctionnera en permanence en mode veille, surveillant tous les signaux entrants provenant de n'importe quelle source infrarouge.  Et seulement lors du d√©codage de l'un des signaux pr√©d√©finis - donnez une commande pour allumer le Raspberry Pi.  Le contr√¥leur fournira √©galement un simple clignotement si vous devez changer la t√©l√©commande du Raspberry Pi. <br><br>  L'Arduino Nano sera aliment√© pas tout √† fait standard - de la broche + 5V GPIO RPi - √† la broche + 5V Arduino.  Il n'y a rien de mal √† une telle mise en marche - du c√¥t√© USB, la carte Arduino aura une entr√©e de stabilisateur interne, du c√¥t√© de la broche Vin, la cathode √† diode Schottky.  Aucune charge autre que le r√©cepteur IR ne sera connect√©e aux nano broches Arduino. <br><br>  La table de connexion Arduino-Raspberry sera comme ceci - Sortie physique Raspberri Pi 3 B + / Sortie physique Arduino Nano <br>  4 (+ 5v) / + 5V <br>  6 (GND) / GND <br>  5 (GPIO3) / D8 <br>  De plus, le r√©cepteur IR se connectera aux broches d'alimentation de la carte Arduino - (GND, + 5V ou 3,3V), et le signal de sortie via les r√©sistances 100R √† la broche Arduino D7 et via 510R √† la broche 16 (GPIO23) du Raspberry Pi.  Ainsi, le r√©cepteur IR transmettra directement toutes les commandes √† l'entr√©e GPIO23, et une ou deux impulsions courtes n'appara√Ætront sur le GPIO3 qu'√† la r√©ception des commandes pr√©d√©finies dans le croquis. <br><br>  <b>Sch√©ma de connexion du r√©cepteur IR, de l'Arduino nano et de la bande d'adresse au Raspberry Pi:</b> <br><br><img src="https://habrastorage.org/webt/vp/5s/pw/vp5spwaetjtos-vxrzn3qjvxqhg.jpeg" alt="image"><br><br>  Le cavalier sup√©rieur ¬´5V externe¬ª permet √† l'Arduino et √† la framboise d'√™tre aliment√©s par une source d'alimentation externe, ainsi que le r√©tro-√©clairage du connecteur ¬´Power¬ª XS1, si, par exemple, le nombre de pixels est petit et ne cr√©e pas une charge importante.  Par le cavalier inf√©rieur selon le sch√©ma, la tension du r√©cepteur IR peut √™tre s√©lectionn√©e - 3,3 ou 5V.  L'appareil sera con√ßu comme un blindage externe connect√© au connecteur GPIO, dans lequel la carte Arduino nano, le r√©cepteur IR et tous les connecteurs sont connect√©s. <br><br>  Pour v√©rifier, il suffit de lire et d'entrer dans l'esquisse les codes de n'importe quel bouton, par exemple "OK" ou "ENTER", √† partir de n'importe quelle t√©l√©commande.  Vous pouvez √©galement cr√©er un tableau de commandes pour lancer la console en appuyant sur un groupe sp√©cifique de boutons ou une s√©quence de touches.  Le croquis utilise la biblioth√®que iarduino_IR-master, dont une archive peut √™tre facilement trouv√©e sur Internet.  Il y a des exemples d'esquisse dans les archives de la biblioth√®que, en utilisant l'un d'eux, par exemple receiver_GetProtokolAll, vous pouvez obtenir des codes de commande pour tous les boutons de la t√©l√©commande.  Par la suite, ces codes doivent √™tre √©crits dans le croquis vers√© sur l'Arduino Nano: <br><br><pre> <code class="plaintext hljs">//******************************************************************************* #include &lt;iarduino_IR_RX.h&gt; //      - iarduino_IR_RX IR(7); //   IR,       - const int Out_GPOI_3 = 8; //     GPIO RPi uint32_t Code_001 = 0xFF708F; // RX code    uint32_t Code_002 = 0x106FA857; void setup() { pinMode(Out_GPOI_3, OUTPUT); //        9600 / Serial.begin(9600); IR.begin(); //    - } void loop() { if(IR.check()) //         { //     ,   if(IR.data == Code_001 or IR.data == Code_002) { digitalWrite(Out_GPOI_3, HIGH); //    RPi delay(5); digitalWrite(Out_GPOI_3, LOW); //      delay(5); digitalWrite(Out_GPOI_3, HIGH); //    RPi delay(5); digitalWrite(Out_GPOI_3, LOW); //      delay(5); } } } //*******************************************************************************</code> </pre><br>  √âtant donn√© que la biblioth√®que iarduino_IR-master utilise le m√™me temporisateur que certaines fonctions de ¬´c√¢blage¬ª standard de l'environnement Arduino, vous ne pouvez pas utiliser micros (), millis (), tone () et √©ventuellement d'autres dans cette esquisse, sinon une tentative de compilation entra√Ænera une erreur indistincte.  Malgr√© cette approche des auteurs pour √©crire du code, la biblioth√®que remplit r√©guli√®rement ses fonctions et d√©finit clairement les messages IR, leurs temporisations, la structure et les protocoles utilis√©s, et la possibilit√© de lire rapidement les codes de commandes de n'importe quelle console r√©duit sa configuration √† un simple remplacement de variables dans l'esquisse. <br><br>  L'ensemble de la superstructure a √©t√© con√ßu comme un bouclier, pour lequel les panneaux d'usine suivants ont √©t√© dessin√©s et command√©s en Chine: <br><br><img src="https://habrastorage.org/webt/14/t2/no/14t2noezfi1ifwtddtytirdv4_q.jpeg" alt="image"><br><br>  Ce blindage connecte une carte Arduino nano, un connecteur pour une alimentation commune de 5 V, un connecteur de r√©tro-√©clairage TV et le blindage lui-m√™me est inclus dans le peigne GPIO Raspberry Pi.  Apr√®s avoir install√© tous les composants, cela ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/ei/g_/jg/eig_jgo2k6pfzip-9zqljflkh4y.jpeg" alt="image"><br><br><img src="https://habrastorage.org/webt/ot/xq/qm/otxqqmw_e6ldd9gfir1s-oua9go.jpeg" alt="image"><br><br>  Il avait pr√©vu de placer un couvercle translucide en coin en acrylique sur les trous pr√©vus pour fixer les racks - mais ses mains n‚Äôont pas atteint, et le d√©codeur n‚Äôest toujours pas visible ... <br><br>  Beaucoup de choses ont √©t√© √©crites partout sur la s√©lection et le collage de la bande d'adresse, cependant, j'ai aussi quelques commentaires sur ce sujet et l'installation. <br><br>  D'abord sur les mythes. <br><br>  <i>"WS2812 n'est pas adapt√© au r√©tro-√©clairage adaptatif, vous devez utiliser SK9822 ou m√™me APA102"</i> <br><br>  Ils justifient cela par le fait que la fr√©quence de transfert de donn√©es des analogues APA102 est beaucoup plus √©lev√©e en raison de la pr√©sence d'une ligne d'horloge, et les LED elles-m√™mes ont une gamme de couleurs plus large et sont plus fiables. <br><br>  Tout cela est vrai, mais si nous divisons la fr√©quence de fonctionnement du WS2812B par le nombre de pixels et 32 ‚Äã‚Äãbits d'informations pour chacun d'eux, nous obtenons une fr√©quence de mise √† jour de pr√®s de 300 Hz pour mes 91 LED.  Ceci est plusieurs fois sup√©rieur au seuil requis.  Et tous les cas de ¬´scintillement¬ª et de ¬´repos¬ª sont √† 146% en raison de la courbe du c√¢blage de la terre et du fil de signal. <br><br>  Le sch√©ma de couleurs est similaire - Hyperion g√©n√®re des packages 8 bits pour chaque couleur dans chaque pixel.  Dans tous les cas, ce n'est que 256 gradations de luminosit√© de chacune des trois couleurs sur n'importe quelle bande.  La diff√©rence de couleurs ne sera perceptible que dans la calculatrice sur l'√©cran d'un bon moniteur, mais la diff√©rence de l'√©clat r√©el de ¬± une ou m√™me plusieurs gradations que nos yeux ne verront en aucun cas - c'est l'anatomie de notre vision et nous ne pouvons rien y faire.  De plus, le configurateur dispose d'outils pour ajuster la gamme de couleurs - si vous le souhaitez, vous pouvez obtenir une couleur blanche presque parfaite avec une luminosit√© proche de la luminosit√© maximale.  Mais m√™me ces gestes ne sont probablement pas n√©cessaires - le r√©tro√©clairage cr√©e uniquement l'arri√®re-plan sur le mur derri√®re le t√©l√©viseur, et non l'image sur l'√©cran ... Lors de l'analyse des zones de capture - Hyperion et Philips ne prennent pas un point sp√©cifique, mais la couleur moyenne de toute la zone sp√©cifi√©e, donc les nuances seront toujours quelque chose de diff√©rent de ceux qui sont reproduits en dynamique sur les bords de l'√©cran.  Compte tenu de tout cela, il est inutile de tirer √† partir d'un canon sur des moineaux, ce qui confirme en fait la conception du r√©tro-√©clairage des t√©l√©viseurs Phillips d'origine, o√π seuls 37 points sont affich√©s sur la diagonale de 50 pouces et la largeur des zones est de 5-6 cm <br><br>  Un autre mythe - <i>"WS2812B est de courte dur√©e, un mois plus tard, les pixels ont commenc√© √† √©chouer."</i> <br><br>  Naturellement, ils commenceront.  Et sur n'importe quelle bande.  Chaque couleur de chaque LED 2812B √† pleine luminosit√© consomme 18-20 mA.  Par exemple, j'ai 91 LED.  91X3X20 = ‚Äã‚Äã5,5A.  L'efficacit√© est d'environ 30 √† 40%, ce qui signifie que plus de trois amp√®res entrent en chaleur.  Le seul moyen efficace d'√©liminer la chaleur des substrats des cristaux est les traces de cuivre du ruban, qui sont coll√©es sur une certaine surface.  Connect√© √† l'alimentation, mais le ruban non lumineux est √©galement sensiblement chaud - les puces elles-m√™mes en statique ont une certaine consommation de courant.  Le couvercle en plastique arri√®re du t√©l√©viseur n'est pas le meilleur dissipateur thermique pour un fonctionnement √† long terme de la bande, il est donc pr√©f√©rable et plus correct d'utiliser un profil√© m√©tallique sp√©cial.  De plus, il est livr√© avec un diffuseur de diff√©rentes profondeurs, largeurs et formes.  Vous ne verrez pas de reflets sous forme de points color√©s sur les surfaces brillantes de l'int√©rieur de la pi√®ce, ce qui est √©galement parfois important. <br><br><img src="https://habrastorage.org/webt/qz/oi/yz/qzoiyz8dnluqtmxs1mluj3drfgs.jpeg" alt="image"><br><br><img src="https://habrastorage.org/webt/tj/yu/ah/tjyuahucfrbsijm6atc2v8nlroe.jpeg" alt="image"><br><br>  Lorsque tout est mont√©, connect√© et v√©rifi√© - il reste √† configurer le lecteur KODI √† votre go√ªt et votre couleur - installez tous les add-ons n√©cessaires, IPTV avec des programmes et partagez le contenu de votre PC domestique. <br><br>  Si l'on compare le r√©tro-√©clairage avec la version hardware - la r√©action au traitement des images me semble plus claire - il n'y a pas de sensation de l√©ger retard en une fraction de seconde.  L'impl√©mentation elle-m√™me me semble tout √† fait viable - elle s'est av√©r√©e √™tre un simple constructeur reproductible assembl√© sur la base du plug-in.  Si vous prenez soin d'assembler le bouclier de commutation et d'enregistrer le syst√®me configur√© en tant qu'image, il ne faudra pas plus de temps pour lancer un autre d√©codeur de ce type que pour n'importe quel bo√Ætier TV "en bo√Æte" sur Android.  Si vous fabriquez le r√©cepteur infrarouge √† distance - l'appareil peut √™tre cach√© derri√®re un t√©l√©viseur avec une option de montage mural.  Si vous avez un syst√®me d'exploitation configur√© ou son image, le syst√®me fonctionnera en mode complet la premi√®re fois que vous l'allumerez. <br><br>  Pour ceux qui regardent les cha√Ænes de t√©l√©vision, vous devrez bricoler leurs listes de lecture IPTV payantes et de haute qualit√© ou gratuites et non fonctionnelles, les programmes t√©l√©vis√©s pour les cha√Ænes, les modules compl√©mentaires et les param√®tres du lecteur, qui, soit dit en passant, ont la possibilit√© de changer de skins, dont il existe actuellement un grand nombre pour tous le go√ªt.  Tout est pris en charge - affichage de la m√©t√©o, de l'heure, des √©conomiseurs d'√©cran, des centaines de modules compl√©mentaires et d'applications diff√©rents.  Par exemple, je voulais me d√©barrasser du menu OSD non r√©tractable, appel√© pour rembobiner ou mettre en pause.  Pour cela, l'addon - Hide Video OSD - √©tait g√©nial.  T√©l√©chargez l'archive zip, placez-la dans un endroit pratique pour les framboises, s√©lectionnez l'installation √† partir de l'archive dans l'interface du module compl√©mentaire, d√©finissez-la, activez le module compl√©mentaire dans les param√®tres, d√©finissez le temps en secondes, apr√®s quoi l'OSD sera automatiquement supprim√© de l'√©cran. <br><br>  En plus d'autres puces, Kodi poss√®de une interface Web √† part enti√®re √† travers laquelle vous pouvez configurer les param√®tres, contr√¥ler le lecteur et la biblioth√®que multim√©dia √† partir de votre PC √† la maison. <br><br>  Des publications sur toutes les fonctionnalit√©s du lecteur et comment, par exemple, √©lever un serveur multim√©dia sur un PC pour Kodi, sont facilement disponibles dans RuNet.  Pour des param√®tres pratiques, omnivores et autres, je mettrais ce lecteur sur un pied d'√©galit√© avec des projets tels que WinAmp et MPC-HC. <br><br>  <b>Une petite d√©mo tourn√©e sur des chaussons:</b> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/geosx4zqNRk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr486106/">https://habr.com/ru/post/fr486106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr486070/index.html">Les commutateurs ACL en d√©tail</a></li>
<li><a href="../fr486080/index.html">Permettez-moi de vous pr√©senter: Veeam Availability Suite v10</a></li>
<li><a href="../fr486084/index.html">Remplacement de disques plus petits par des disques plus grands sous Linux</a></li>
<li><a href="../fr486094/index.html">Un d√©mocrate se bat contre la Silicon Valley</a></li>
<li><a href="../fr486104/index.html">MVCC dans PostgreSQL-7. Autovacuum</a></li>
<li><a href="../fr486114/index.html">Des scientifiques de premier plan dans le domaine des neurosciences se r√©uniront lors du congr√®s annuel du Neuronet Industry Union</a></li>
<li><a href="../fr486116/index.html">Tests de simplicit√© de Fermat et Miller-Rabin</a></li>
<li><a href="../fr486120/index.html">Normalisation de la d√©viance. Comment les mauvaises pratiques deviennent la norme dans notre industrie</a></li>
<li><a href="../fr486122/index.html">Child ReactJS avec 135 lignes de code</a></li>
<li><a href="../fr486128/index.html">Architecte de solution de test: qui est-ce et quand est-il n√©cessaire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>