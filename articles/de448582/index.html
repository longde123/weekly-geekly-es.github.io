<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>➡️ 👩🏼‍🤝‍👩🏻 🍡 Erstellen eines Trinkgeldrechners auf Kotlin: Wie funktioniert das? 🐺 🧕🏻 🚼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir zeigen Ihnen, wie Sie eine einfache Kotlin-Tipprechneranwendung erstellen. Insbesondere Kotlin 1.3.21, Android 4, Android Studio 3. Der Artikel wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen eines Trinkgeldrechners auf Kotlin: Wie funktioniert das?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/448582/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/775/c60/399/775c60399ffbcc7824f19acc01c5ddcc.png"></div><br>  Wir zeigen Ihnen, wie Sie eine einfache Kotlin-Tipprechneranwendung erstellen.  Insbesondere Kotlin 1.3.21, Android 4, Android Studio 3. Der Artikel wird vor allem für diejenigen interessant sein, die ihre Reise in die Entwicklung von Android-Anwendungen beginnen.  Sie können verstehen, was und wie es in der Anwendung funktioniert. <br><br>  Ein solcher Taschenrechner ist nützlich, wenn Sie die Anzahl der Trinkgelder eines Unternehmens berechnen müssen, das sich entschlossen hat, Zeit in einem Restaurant oder Café zu verbringen.  Natürlich nicht alle und nicht immer den Kellnern zum Tee überlassen, dies ist eher eine westliche Tradition, aber der Entwicklungsprozess einer solchen Anwendung ist auf jeden Fall interessant. <br><a name="habracut"></a><br><blockquote>  <b>Wir erinnern Sie daran:</b> <i>Für alle Leser von „Habr“ - ein Rabatt von 10.000 Rubel bei der Anmeldung für einen Skillbox-Kurs mit dem Promo-Code „Habr“.</i> <br><br>  <b>Skillbox empfiehlt:</b> Praktikum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„Mobile Developer PRO</a> . <br></blockquote>  So sieht die Anwendung dabei aus: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/377/25b/a5d/37725ba5d3b43432a2f6f245612bf9b0.gif"><br><br>  Sie geben den gewünschten Prozentsatz des Gesamtbetrags und die Anzahl der Teilnehmer an der Besprechung ein und erhalten das Ergebnis - die Anzahl der Tipps, die noch übrig sein sollten. <br><br><h3>  Erste Schritte </h3><br>  Die vollständige Anwendungsoberfläche lautet wie folgt: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dba/d96/944/dbad969440ad0dc32e80107e4aa85f7b.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb8/5c5/cb2/bb85c5cb2407a65e73744d53c405abf7.png"><br><br>  Die erste Aktion besteht darin, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Projektgrundlagen herunterzuladen</a> .  Öffnen Sie es in Android Studio 3.0 oder höher.  Wir erstellen und starten das Projekt und sehen einen weißen Bildschirm.  Alles ist in Ordnung, es sollte so sein. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4d1/70b/9e9/4d170b9e9fa171588c5450ede082fe4e.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/243/99e/21d/24399e21da463ba4b867dee479e04a27.png"><br><br>  Benutzeraktionen werden im Projekt in chronologischer Reihenfolge angegeben, damit alles klar ist.  Öffnen Sie zum Anzeigen Ansicht -&gt; Tool Windows -&gt; TODO. <br><br>  Wir studieren das Projekt und öffnen die Datei colours.xml, um die Farbpalette zu bewerten.  Textdaten (Signaturen) werden in der Datei strings.xml abgelegt, und in styles.xml befinden sich mehrere Schriftartenvorlagen. <br><br><h3>  Entwicklung des Kostenbereichs </h3><br>  Öffnen Sie activity_main.xml und fügen Sie den folgenden Code in LinearLayout (# 1) hinzu: <br><br><pre><code class="kotlin hljs">&lt;TextView android:id=<span class="hljs-string"><span class="hljs-string">"@+id/expensePerPersonTextView"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:paddingTop=<span class="hljs-string"><span class="hljs-string">"30dp"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@style/h1Bold"</span></span> android:textColor=<span class="hljs-string"><span class="hljs-string">"@color/colorAccent"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"0"</span></span>/&gt; &lt;TextView android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:paddingBottom=<span class="hljs-string"><span class="hljs-string">"25dp"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@style/h2"</span></span> android:textColor=<span class="hljs-string"><span class="hljs-string">"@color/colorAccent"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"@string/perPersonStaticText"</span></span>/&gt;</code> </pre> <br>  Jetzt können Sie den Werteverzeichnisstil anpassen oder mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Werkzeug material.io</a> mit Farben spielen. <br><br>  Jetzt sieht das Projekt so aus: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c09/a61/b03/c09a61b03dcb6e026636d8e3103c2c88.png"><br>  <i>Wie Sie sehen können, erfolgt die Berechnung der Kosten anhand der vom Benutzer vorgenommenen Daten.</i> <br><br><h3>  Entwicklung des Kontobereichs </h3><br>  Fügen Sie den folgenden Code in LinearLayout nach dem Ausgabenabschnitt (# 2) hinzu: <br><br><pre> <code class="kotlin hljs">&lt;LinearLayout android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:orientation=<span class="hljs-string"><span class="hljs-string">"vertical"</span></span> android:background=<span class="hljs-string"><span class="hljs-string">"@color/colorAccent"</span></span>&gt; &lt;! — TODO #<span class="hljs-number"><span class="hljs-number">3</span></span>: Build Bill Section → … &lt;/LinearLayout&gt;</code> </pre> <br>  Schließen Sie LinearLayout nach der Liste der Aufgaben, fügen Sie einen neuen Code hinzu und platzieren Sie ihn in LinearLayout (# 3): <br><br><pre> <code class="kotlin hljs">&lt;TextView android:layout_margin=<span class="hljs-string"><span class="hljs-string">"15dp"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:textColor=<span class="hljs-string"><span class="hljs-string">"@color/colorWhite"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@style/h4"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"@string/billStaticText"</span></span>/&gt; &lt;EditText android:id=<span class="hljs-string"><span class="hljs-string">"@+id/billEditText"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:textColor=<span class="hljs-string"><span class="hljs-string">"@color/colorWhite"</span></span> android:inputType=<span class="hljs-string"><span class="hljs-string">"numberDecimal"</span></span> android:maxLines=<span class="hljs-string"><span class="hljs-string">"1"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@style/h2Bold"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"0"</span></span>/&gt;</code> </pre> <br>  Da die Hauptaufgabe der Anwendung darin besteht, die individuellen Kosten für jeden Teilnehmer von Versammlungen im Restaurant zu berechnen, wird der Hauptwert von costPerPersonTextView gespielt. <br><br>  EditText beschränkt die Eingabe auf eine Zeile. Dieser Parameter muss einen NumberDecimal inputType-Wert haben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b16/ce5/2ec/b16ce52ecd384a86d069eae700959889.png"><br>  <i>Wir starten das Projekt für den Test und geben die Parameter des Gesamtschadens ein (zerbrochene Tassen, Teller usw.).</i> <br><br><h3>  Entwicklung des Abschnitts "Menschen und Tipps" </h3><br>  Fügen Sie den folgenden Code in den neuen LinearLayout-Abschnitt (Nr. 4) ein, um die Auswahl des Spitzenvolumens hinzuzufügen: <br><br><pre> <code class="kotlin hljs">&lt;TextView android:layout_margin=<span class="hljs-string"><span class="hljs-string">"15dp"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:textColor=<span class="hljs-string"><span class="hljs-string">"@color/colorWhite"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@style/h4"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"@string/tipStaticText"</span></span>/&gt; &lt;LinearLayout android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:orientation=<span class="hljs-string"><span class="hljs-string">"horizontal"</span></span>&gt; &lt;ImageButton android:id=<span class="hljs-string"><span class="hljs-string">"@+id/subtractTipButton"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@style/operationButton"</span></span> android:layout_marginLeft=<span class="hljs-string"><span class="hljs-string">"20dp"</span></span> android:layout_marginStart=<span class="hljs-string"><span class="hljs-string">"20dp"</span></span> android:src=<span class="hljs-string"><span class="hljs-string">"@drawable/subtract"</span></span>/&gt; &lt;TextView android:id=<span class="hljs-string"><span class="hljs-string">"@+id/tipTextView"</span></span> android:layout_margin=<span class="hljs-string"><span class="hljs-string">"15dp"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"0dp"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:textColor=<span class="hljs-string"><span class="hljs-string">"@color/colorWhite"</span></span> android:layout_weight=<span class="hljs-string"><span class="hljs-string">"1"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@style/h2Bold"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"20%"</span></span>/&gt; &lt;ImageButton android:id=<span class="hljs-string"><span class="hljs-string">"@+id/addTipButton"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@style/operationButton"</span></span> android:layout_marginEnd=<span class="hljs-string"><span class="hljs-string">"20dp"</span></span> android:layout_marginRight=<span class="hljs-string"><span class="hljs-string">"20dp"</span></span> android:src=<span class="hljs-string"><span class="hljs-string">"@drawable/add"</span></span>/&gt; &lt;/LinearLayout&gt;</code> </pre> <br>  Dieser Codeabschnitt ist für die genaue Berechnung des Spitzenbetrags erforderlich.  Der Standardwert des Texts ist 20. ImageButtons werden mit Symbolen im Ordner mit Schreibberechtigungen versehen. <br><br>  Wir kopieren den Abschnitt vollständig und fügen Folgendes hinzu (# 5): <br><br><ul><li>  ImageButton-IDs (subtractPeopleButton, addPeopleButton) </li><li>  TextView-IDs (numberOfPeopleStaticText, numberOfPeopleTextView) </li><li>  DefaultText für numberOfPeopleTextView (muss 4 sein). </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/bb8/5c5/cb2/bb85c5cb2407a65e73744d53c405abf7.png"><br><br>  Wenn Sie jetzt die Anwendung starten, ist es möglich, den Rechnungsbetrag hinzuzufügen. Die Schaltflächen "Hinzufügen / Subtrahieren" funktionieren ebenfalls, aber bisher ist nichts passiert. <br><br><h3>  Ansichten hinzufügen </h3><br>  Öffnen Sie MainActivity.kt und fügen Sie dies der Funktion initViews (# 6) hinzu: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { expensePerPersonTextView = findViewById(R.id.expensePerPersonTextView) billEditText = findViewById(R.id.billEditText) addTipButton = findViewById(R.id.addTipButton) tipTextView = findViewById(R.id.tipTextView) subtractTipButton = findViewById(R.id.subtractTipButton) addPeopleButton = findViewById(R.id.addPeopleButton) numberOfPeopleTextView = findViewById(R.id.numberOfPeopleTextView) subtractPeopleButton = findViewById(R.id.subtractPeopleButton) <span class="hljs-comment"><span class="hljs-comment">//TODO #8: Bind Buttons to Listener //TODO #16: Bind EditText to TextWatcher }</span></span></code> </pre> <br><h3>  Beenden Sie die Schaltflächen </h3><br>  Um die Unterstützung für das Klicken auf Schaltflächen hinzuzufügen, implementieren wir den View.OnClickListener (# 7) auf Klassenebene: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppCompatActivity</span></span></span></span>(), View.OnClickListener {</code> </pre> <br>  Das Kompilieren des Projekts funktioniert jetzt nicht. Sie müssen noch einige Schritte ausführen (# 8): <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">View</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (v?.id) { R.id.addTipButton -&gt; incrementTip() R.id.subtractTipButton -&gt; decrementTip() R.id.addPeopleButton -&gt; incrementPeople() R.id.subtractPeopleButton -&gt; decrementPeople() } }</code> </pre> <br>  In Bezug auf Tasten und Schalter bei Kotlin ist alles sehr cool organisiert!  Fügen Sie den folgenden Code zu allen Inkrementierungs- und Dekrementierungsfunktionen hinzu <br><br>  (# 9 - # 12): <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">incrementTip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tipPercent != MAX_TIP) { tipPercent += TIP_INCREMENT_PERCENT tipTextView.text = String.format(<span class="hljs-string"><span class="hljs-string">"%d%%"</span></span>, tipPercent) } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decrementTip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tipPercent != MIN_TIP) { tipPercent -= TIP_INCREMENT_PERCENT tipTextView.text = String.format(<span class="hljs-string"><span class="hljs-string">"%d%%"</span></span>, tipPercent) } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">incrementPeople</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (numberOfPeople != MAX_PEOPLE) { numberOfPeople += PEOPLE_INCREMENT_VALUE numberOfPeopleTextView.text = numberOfPeople.toString() } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decrementPeople</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (numberOfPeople != MIN_PEOPLE) { numberOfPeople -= PEOPLE_INCREMENT_VALUE numberOfPeopleTextView.text = numberOfPeople.toString() } }</code> </pre> <br>  Hier schützt der Code die Inkrementfunktionen mit den Maximalwerten (MAX_TIP &amp; MAX_PEOPLE).  Zusätzlich schützt der Code Dekrementierungsfunktionen mit Mindestwerten (MIN_TIP &amp; MIN_PEOPLE). <br><br>  Binden Sie nun die Schaltflächen in der initViews-Funktion (# 13) an die Listener: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ... addTipButton.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) subtractTipButton.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) addPeopleButton.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) subtractPeopleButton.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-comment"><span class="hljs-comment">//TODO #15: Bind EditText to TextWatcher }</span></span></code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/d63/496/07b/d6349607bff6afada315fee2481dcbf6.gif"><br><br>  Jetzt können Sie den Gesamtschaden, die Tipps und die Anzahl der Teilnehmer an der Besprechung hinzufügen.  Nun, jetzt das Wichtigste ... <br><br><h3>  Kalkulationsbereich </h3><br>  Dieser Code berechnet die Kosten (Nr. 14): <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateExpense</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> totalBill = billEditText.text.toString().toDouble() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> totalExpense = ((HUNDRED_PERCENT + tipPercent) / HUNDRED_PERCENT) * totalBill <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> individualExpense = totalExpense / numberOfPeople expensePerPersonTextView.text = String.format(<span class="hljs-string"><span class="hljs-string">"$%.2f"</span></span>, individualExpense) }</code> </pre> <br>  Nun, hier wird eine Funktion aufgerufen, die es ermöglicht, die Anzahl der Personen im Unternehmen zu berücksichtigen und das Trinkgeld zu berechnen (# 15): <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">incrementTip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { … } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decrementTip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { … } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">incrementPeople</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { … } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decrementPeople</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { … }</code> </pre> <br>  Wir starten die Anwendung.  Es sieht gut aus und funktioniert gut.  Aber es könnte besser sein. <br><br>  Wenn Sie versuchen, den Rechnungsbetrag zu löschen und dann die Anzahl der Tipps oder Freunde zu erhöhen, stürzt die Anwendung ab, da noch keine Überprüfung der Nullkosten erfolgt.  Wenn Sie versuchen, den Rechnungsbetrag zu ändern, werden die Kosten nicht aktualisiert. <br><br><h3>  Letzte Schritte </h3><br>  TextWatcher hinzufügen (# 16): <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppCompatActivity</span></span></span></span>(), View.OnClickListener, TextWatcher {</code> </pre> <br>  Dann binden wir den billEditText-Listener (# 17) ein: <br><br><pre> <code class="kotlin hljs">billEditText.addTextChangedListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre> <br>  Fügen Sie außerdem den Code hinzu, um TextWatcher (# 18) auszuführen: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTextChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CharSequence</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, start: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, before: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, count: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!billEditText.text.isEmpty()) { calculateExpense() } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">afterTextChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Editable</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> {} <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">beforeTextChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CharSequence</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, start: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, count: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, after: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> {}</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/014/081/0eb/0140810eb741e3a9565f8611e97c4307.png"><br><br>  Nun, jetzt funktioniert absolut alles!  Herzlichen Glückwunsch, Sie haben Ihren eigenen Trinkgeldrechner für Kotlin geschrieben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f13/b8e/f21/f13b8ef21e4f6a28e695dbc9b1207666.gif"><br><blockquote>  <b>Skillbox empfiehlt:</b> <br><br><ul><li>  Zweijähriger Praktikumskurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„Ich bin PRO Web Developer“</a> . </li><li>  Online-Kurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"C # -Entwickler"</a> . </li><li>  Praktischer Jahreskurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"PHP-Entwickler von 0 bis PRO"</a> . <br></li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de448582/">https://habr.com/ru/post/de448582/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de448570/index.html">Wir schätzen den Durchsatz des MIMO-Kanals (der Wassergießalgorithmus ist enthalten)</a></li>
<li><a href="../de448572/index.html">Menschliche Kommunikation wird zum Luxusgut</a></li>
<li><a href="../de448574/index.html">Eine Aufgabe aus der SEO-Routine: 3-Schritt-Lösung</a></li>
<li><a href="../de448576/index.html">Transistorgeschichte Teil 2: Aus dem Schmelztiegel des Krieges</a></li>
<li><a href="../de448580/index.html">CQ CQ CQ Frohe Feiertage, Radio Amateur! #WorldAmateurRadioDay</a></li>
<li><a href="../de448584/index.html">7 häufige Fehler bei der Verwendung von Präpositionen in Englisch und wie man sie vermeidet</a></li>
<li><a href="../de448588/index.html">Die Architektur des Netzwerklastenausgleichs in Yandex.Cloud</a></li>
<li><a href="../de448590/index.html">Bekannte Fremde oder noch einmal über die Verwendung von Designmustern</a></li>
<li><a href="../de448594/index.html">Kostenlose Antiviren- und Firewalls (UTM, NGFW) von Sophos</a></li>
<li><a href="../de448596/index.html">Tablet-Halter auf dem Laufband oder suchen Sie nach freien Schritten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>