<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥧 🧕🏼 ⚾️ Migrasi sertifikat otoritas (CA) gagal dari Windows 2008R ke Windows 2012 R2 🚞 👩🏾‍🤝‍👩🏻 🎛️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selamat siang, pembaca yang budiman! 

 Saya akan memberi tahu Anda tentang mimpi buruk yang saya alami saat memigrasi CA dari Windows 2008R2 ke Windo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Migrasi sertifikat otoritas (CA) gagal dari Windows 2008R ke Windows 2012 R2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448402/">  Selamat siang, pembaca yang budiman! <br><br>  Saya akan memberi tahu Anda tentang mimpi buruk yang saya alami saat memigrasi CA dari Windows 2008R2 ke Windows 2012 R2.  Ada banyak artikel tentang hal ini di internet dan seharusnya tidak ada masalah. <br><br>  Sayangnya, saya bukan Admin Windows, saya lebih dari admin * nix, tetapi tugas migrasi CA telah diatur - itu harus dilakukan. <br><br>  Di bawah potongan, saya akan memberi tahu Anda bagaimana saya menjalani proses ini dan akhirnya tidak menerima HappyEnd. <br><a name="habracut"></a><br>  Jadi ayo pergi ... <br><br>  <b>Sumber data:</b> <br>  <b>Sumber</b> - Windows 2008 R2 dengan Root CA <br>  <b>Target</b> - Windows 2012R2 <br><br>  Server Windows 2012R2 sudah diinstal dan dikonfigurasi secara minimal. <br><br>  <b>Awalnya, rencana tindakan adalah sebagai berikut (tindakan singkat):</b> <br><br><ol><li>  Kami membuat Backup CA + Private Key dan menyalinnya ke ruang yang sama untuk kedua komputer </li><li>  Kami menampilkan target dari domain dan mengubah IP </li><li>  Membuat snapshot server </li><li>  Ubah IP pada sumbernya </li><li>  Kami pergi ke server Windows 2012R2 baru di bawah administrator - masukkan ke domain dengan nama yang sama dan tetapkan IP lama </li><li>  Masukkan peran Layanan Sertifikat Direktori Aktif (CA, Pendaftaran Web CA, NDES, Responden Online) </li><li>  Kami mengindikasikan bahwa ini adalah Enterprise CA </li><li>  Mengembalikan CA + Kunci Pribadi dari cadangan </li><li>  Selamat berakhir </li></ol><br>  Setuju baik, tidak ada yang rumit.  Dan saya mulai implementasi.  Bahkan, tidak ada masalah dan semuanya berjalan seperti jarum jam ... Layanan dimulai, Template Sertifikat muncul dan sertifikat itu sendiri muncul.  Secara umum, semuanya OK.  Jadi saya pergi tidur.  Di pagi hari, tidak ada keluhan tentang pekerjaan CA, jadi saya pikir semuanya bekerja, dan mulai mengerjakan tugas-tugas lain.  Dalam proses penyelesaiannya, saya membutuhkan sertifikat.  Saya membuat .csr dan mengklik tautan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">vm_ca / certsvc</a> untuk menandatangani dan menerima sertifikat, dan di sinilah kesalahan terjadi.  Sayangnya, saya tidak mengambil tangkapan layar, tetapi berbicara tentang ketidakcocokan informasi pengguna dan beberapa kesalahan lainnya.  Yah, mereka berlayar - saya pikir.  Saya mulai menggunakan google, tetapi sayangnya saya tidak menemukan sesuatu yang dapat dimengerti. <br><br>  Di malam hari, kami memutuskan untuk menghapus CA Windows 2012R2 dan menginstal semuanya lagi dan membuat kesalahan, alih-alih Enterprise CA saya memilih opsi Standalone CA (Saya sudah mempelajari kesalahan saya nanti).  Saya melakukan semua operasi lagi ... semuanya berjalan tanpa kesalahan - tetapi ketika saya memilih folder Template Sertifikat, saya mendapatkan Elemen tidak ditemukan, walaupun jika saya memilih Kelola, maka template sudah ada. <br><br>  Saya berpikir bahwa tidak ada hak yang cukup untuk CN ini = Templat Sertifikat, jadi menggunakan ADSI Edit saya memberi Baca untuk vm_ca $.  CertSvc dan ... hasil yang dimulai kembali: Elemen tidak ditemukan. <br><br>  Kemudian saya sedih selama 2 jam di malam hari ... dan CA tidak bekerja.  Matikan CA Windows 2012R2 dan pulihkan VM CA Windows 2008R2 dari snapshot.  Saya mengembalikan server ke AD (karena ketika saya mencoba masuk di bawah akun domain, terjadi kesalahan dalam hubungan antara server dan AD). <br><br>  Yah, saya pikir ... semuanya sekarang akan baik-baik saja, tapi sayangnya ... masih Template Sertifikat - Saya mendapatkan Elemen tidak ditemukan.  Saya akan meninggalkan semuanya sampai pagi - untuk pagi lebih bijaksana daripada malam. <br><br>  Di pagi hari saya mencari di Google, setelah membaca semua jenis artikel - saya memutuskan untuk menginstal ulang CA sudah di server lama dengan harapan menyelesaikan masalah Elemen Tidak Ditemukan dan mengeluarkan sertifikat melalui Web. <br><br>  <b>Prosesnya cukup sederhana:</b> <br><br><ol><li>  Kami merayakan peran CA </li><li>  Kami kelebihan beban </li><li>  Kami sedang menunggu proses penghapusan selesai. </li><li>  Tambahkan peran CA (sebutkan CA, Pendaftaran Web CA, NDES, Responder Online) </li><li>  Kami menunjukkan bahwa saya memiliki Enterprise CA dan saya memiliki kunci pribadi </li><li>  Kami menunggu instalasi untuk menyelesaikan dan mengembalikan semuanya dari cadangan yang kami lakukan di awal. </li><li>  Seperti biasa, semuanya berjalan lancar - tidak ada kesalahan dan layanan dimulai </li></ol><br>  Dengan hati yang tenggelam, saya mengklik Template Sertifikat - dan ... Saya diberi daftar - ini sudah merupakan kemenangan kecil.  Tetap memverifikasi operasi mengeluarkan sertifikat melalui Web.  Saya mengikuti tautan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">vm_ca / certsvc</a> dan klik pada Permintaan Sertifikat dan kemudian permintaan sertifikat lanjutan ... Saya menentukan permintaan .csr dan saya mendapatkan sertifikat siap.  Saya berikan ... Ternyata mengembalikan CA. <br><br>  <b>Kesimpulan:</b> <br><br><ol><li>  Pastikan untuk mencadangkan dan memotret </li><li>  Dokumentasikan tindakan Anda - ini akan membantu untuk mendapatkan semuanya kembali atau menemukan kesalahan lebih cepat </li></ol><br>  PS Saya masih harus mencoba lagi migrasi CA dari Windows 2008R ke Windows 2012R2. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448402/">https://habr.com/ru/post/id448402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448390/index.html">Cara membuat arloji untuk Ilona Mask</a></li>
<li><a href="../id448392/index.html">Dua Pendekatan untuk Menyusun Bagan Kegiatan</a></li>
<li><a href="../id448394/index.html">Peluncuran Versi 12 Hari Ini! (Dan Ini Lompatan Besar untuk Bahasa Wolfram dan Mathematica)</a></li>
<li><a href="../id448396/index.html">Bersiap-siap untuk Layanan Runtime dan Notaris Hardened di macOS Mojave</a></li>
<li><a href="../id448400/index.html">Netplan dan cara memasaknya dengan benar</a></li>
<li><a href="../id448404/index.html">Cara mempercepat kerja dengan R-language API menggunakan komputasi paralel, menggunakan contoh Yandex.Direct API (Bagian 2)</a></li>
<li><a href="../id448408/index.html">DCIM - Kunci Pengelolaan Pusat Data</a></li>
<li><a href="../id448410/index.html">Pelacak dari Google dibangun ke sejumlah sumber daya elektronik resmi Rusia</a></li>
<li><a href="../id448414/index.html">Laboratorium rumah untuk kontrol diri, atau apa yang harus dibeli dalam kit geek</a></li>
<li><a href="../id448416/index.html">Cara termudah untuk mengobrol di aplikasi iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>