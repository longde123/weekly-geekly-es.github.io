<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤚 📗 ☂️ Xcode 11 et XCFrameworks: un nouveau format de packaging de framework 👨🏼‍🔬 🐶 🤜🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la vie de nombreuses entreprises qui ont et développent leur propre pile de bibliothèques et de composants, il arrive un moment où le volume de c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Xcode 11 et XCFrameworks: un nouveau format de packaging de framework</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/475816/"><p><img src="https://habrastorage.org/webt/nd/9g/nt/nd9gntw7zmcbecyibkxwc8aheno.png"></p><br><p>  Dans la vie de nombreuses entreprises qui ont et développent leur propre pile de bibliothèques et de composants, il arrive un moment où le volume de cette pile devient difficile à maintenir. </p><br><p>  Dans le cas du développement pour la plate-forme iOS, et en général, l'écosystème Apple, il existe deux options pour connecter des bibliothèques en tant que dépendances: </p><br><ol><li>  Collectez-les chaque fois que vous créez l'application. </li><li>  Collectez-les à l'avance en utilisant les dépendances déjà collectées. </li></ol><br><p>  Lors du choix de la deuxième approche, il devient logique d'utiliser des systèmes CI / CD pour assembler des bibliothèques en artefacts prêts à l'emploi. </p><br><p>  Cependant, la nécessité de créer des bibliothèques pour plusieurs plates-formes ou architectures de processeur dans l'écosystème Apple, nécessite souvent des opérations pas toujours triviales, à la fois lors de la création de la bibliothèque et du produit final qui l'utilise. </p><br><p>  Dans ce contexte, il était difficile de ne pas remarquer et extrêmement intéressant d'étudier, l'une des innovations d'Apple, présentée à la WWDC 2019 dans le cadre de la présentation des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cadres binaires dans Swift</a> - le format d'emballage des cadres est XCFramework. </p><br><p>  XCFramework présente plusieurs avantages par rapport aux approches établies: </p><br><ol><li>  Empaquetage de dépendance pour toutes les plates-formes et architectures cibles dans un seul paquet prêt à l'emploi. </li><li>  Ensemble de connexion au format XCFramework, en tant que dépendance unique pour toutes les plates-formes et architectures cibles. </li><li>  Pas besoin de construire un cadre gras / universel. </li><li>  Il n'est pas nécessaire de se débarrasser de la tranche x86_64 avant de charger les applications finales dans l'AppStore. </li></ol><br><p>  Dans cet article, nous expliquerons pourquoi ce nouveau format a été introduit, ce qu'il est et aussi ce qu'il donne au développeur. </p><a name="habracut"></a><br><h1 id="kak-poyavilsya-novyy-format">  Comment le nouveau format est apparu </h1><br><p>  Apple avait précédemment publié le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gestionnaire de</a> dépendances <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Swift Package Manager</a> . <br>  L'essentiel est que Swift PM vous permet de fournir des bibliothèques sous forme de code open source avec une description des dépendances. </p><br><p>  Du point de vue du développeur fournissant la bibliothèque, je voudrais souligner deux aspects de Swift PM. </p><br><ul><li>  L'inconvénient évident est que, pour une raison ou une autre, tous les fournisseurs de bibliothèques ne souhaitent pas ouvrir leur code source aux consommateurs. </li><li>  Un avantage évident - lors de la compilation de dépendances à partir de sources, nous nous débarrassons de la nécessité d'observer la compatibilité binaire des bibliothèques. </li></ul><br><p>  XCFramework Apple propose un nouveau format binaire pour les bibliothèques de packaging, le considérant comme une alternative aux packages Swift. </p><br><p>  Ce format, ainsi que la possibilité de connecter la bibliothèque assemblée dans XCFramework, est disponible à partir de Xcode 11 et ses versions bêta. </p><br><h1 id="chto-izsebya-predstavlyaet-xcframework">  Qu'est-ce que XCFramework </h1><br><p>  À la base, XCFramework est une nouvelle façon de conditionner et de livrer des bibliothèques, dans leurs différentes versions. </p><br><p>  Entre autres choses, le nouveau format permet également de regrouper des bibliothèques statiques avec leurs fichiers d'en-tête, y compris ceux écrits en C / Objective-C. </p><br><p>  Considérez le format plus en détail. </p><br><ol><li><p>  <strong>Empaquetage de dépendance pour toutes les plates-formes et architectures cibles dans un seul paquet prêt à l'emploi</strong> </p><br><p> Tous les assemblys de bibliothèques pour chacune des plates-formes et architectures cibles peuvent désormais être regroupés dans un seul ensemble avec l'extension .xcframework. <br>  Cependant, pour cela, à ce stade, vous devez utiliser des scripts pour appeler la <code>xcodebuild</code> avec le nouveau <code>-create-xcframework</code> pour Xcode 11. </p><br><p>  Le processus d'assemblage et d'emballage sera examiné plus en détail. </p><br></li><li><p>  <strong>Ensemble de connexion au format XCFramework, en tant que dépendance unique pour toutes les plates-formes et architectures cibles</strong> </p><br><p>  Étant donné que le bundle .xcframework contient toutes les options d'assemblage de dépendances nécessaires, nous n'avons pas à nous soucier de son architecture et de sa plateforme cible. </p><br><p>  Dans Xcode 11, une bibliothèque conditionnée en .xcframework est connectée comme un .framework normal. <br>  Plus précisément, cela peut être réalisé de la manière suivante dans les paramètres cibles: </p><br><ul><li>  ajout de .xcframework à la section «Frameworks And Libraries» de l'onglet «General» </li><li>  ajout de .xcframework à «Lier le binaire aux bibliothèques» sur l'onglet «Phases de construction» </li></ul><br></li><li><p>  <strong>Pas besoin de construire un cadre gras / universel</strong> </p><br><p>  Auparavant, afin de prendre en charge plusieurs bibliothèques et plusieurs architectures dans une bibliothèque de plug-ins, il était nécessaire de préparer les frameworks dits gras ou universels. <br>  Cela a été fait en utilisant la <code>lipo</code> pour coudre toutes les options du cadre assemblé en un seul binaire épais. </p><br><p>  Vous trouverez plus de détails à ce sujet, par exemple, dans les articles suivants: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment créer votre propre framework iOS</a> (habr.ru) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Écriture d'un cadre universel personnalisé dans Xcode 10.2 et iOS 12</a> (medium.com) </li></ul><br></li><li><p>  <strong>Il n'est pas nécessaire de se débarrasser de la tranche x86_64 avant de charger les applications finales dans l'AppStore</strong> </p><br><p>  En règle générale, une telle tranche est utilisée pour fournir des bibliothèques dans le simulateur iOS. <br>  Lorsque vous essayez de télécharger une application avec des dépendances contenant une tranche x86_64 dans l'AppStore, vous pouvez rencontrer l'erreur bien connue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ITMS-90087</a> . </p><br></li></ol><br><h1 id="sozdanie-iupakovka-xcframework-teoriya">  Créer et empaqueter XCFramework: théorie </h1><br><p>  Dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">présentation</a> mentionnée précédemment, plusieurs étapes sont nécessaires pour assembler et empaqueter la bibliothèque au format XCFramework: </p><br><ol><li><p>  <strong>Préparation du projet</strong> </p><br><p>  Pour commencer, dans toutes les cibles du projet responsables de la création de la bibliothèque pour les plates-formes cibles, vous devez activer le nouveau paramètre Créer des bibliothèques pour la distribution pour Xcode 11. </p><br><p><img src="https://habrastorage.org/webt/wl/vs/ak/wlvsakcfadbfihsrebpvtey6uec.png"></p><br></li><li><p>  <strong>Assemblage de projets pour plates-formes et architectures cibles</strong> </p><br><p>  Ensuite, nous devons collecter toutes les cibles pour les plates-formes et architectures cibles. <br>  Prenons des exemples d'appels de commandes à l'aide de l'exemple d'une configuration de projet spécifique. </p><br><p>  Disons que dans le projet, nous avons deux schémas «XCFrameworkExample-iOS» et «XCFramework-macOS». </p><br><p><img src="https://habrastorage.org/webt/on/ug/s8/onugs8ismapkgs0hngnvdixne9m.png"></p><br><p>  Le projet contient également deux cibles qui collectent la bibliothèque pour iOS et macOS. </p><br><p><img src="https://habrastorage.org/webt/m8/li/dj/m8lidjpvlt6svz9nc052imlcnik.png"></p><br><p>  Pour créer toutes les configurations de bibliothèque requises, nous devons collecter les deux cibles à l'aide des schémas correspondants. <br>  Cependant, pour iOS, nous avons besoin de deux assemblys: l'un pour les terminaux (ARM) et l'autre pour le simulateur (x86_64). </p><br><p>  Au total, nous devons collecter 3 cadres. </p><br><p>  Pour ce faire, vous pouvez utiliser la commande <code>xcodebuild</code> : </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO</span></span></code> </pre> <br><p>  En conséquence, nous avons obtenu 3 cadres assemblés, que nous emballerons plus loin dans le conteneur .xcframework. </p><br></li><li><p>  <strong>Emballage assemblé .framework en .xcframework</strong> </p><br><p>  Vous pouvez le faire avec la commande suivante: </p><br><pre> <code class="bash hljs">xcodebuild -create-xcframework \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -output <span class="hljs-string"><span class="hljs-string">"./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><p>  Il peut y avoir de nombreuses <code>-framework</code> paramètre <code>-framework</code> qui pointent vers tous les assemblys .framework que vous souhaitez attacher au conteneur .xcframework. </p><br></li></ol><br><h1 id="podgotovka-proekta-biblioteki-dlya-buduschey-sborki-iupakovki-xcframework">  Préparation d'un projet de bibliothèque pour l'assemblage et le conditionnement futurs de XCFramework </h1><br><p>  <strong>TL; DR: le projet terminé peut être téléchargé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">depuis le référentiel sur Github</a> .</strong> </p><br><p>  À titre d'exemple, nous mettons en œuvre une bibliothèque qui sera disponible pour deux plates-formes: iOS et macOS. <br>  Nous utiliserons la configuration de projet mentionnée dans la section précédente de l'article: deux schémas et deux cibles Framework correspondantes pour les plateformes iOS et macOS. </p><br><p>  La bibliothèque elle-même nous fournira-t-elle une extension simple pour <code>String?</code>  ( <code>Optional where Wrapped == String</code> ), avec une seule propriété. </p><br><p>  Nous appelons cette propriété <code>isNilOrEmpty</code> et, comme son nom l'indique, nous fera-t-elle savoir quand à l'intérieur de <code>String?</code>  valeur manquante ou la chaîne stockée à l'intérieur est vide. </p><br><p>  Le code peut être implémenté comme suit: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Optional</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapped</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isNilOrEmpty: <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> .some(string) = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> string.isEmpty } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><p>  Nous procédons directement à la création et à la configuration du projet. </p><br><ol><li><p>  <strong>Pour commencer, nous devons créer un projet de type «Framework» pour l'une des deux plateformes cibles de votre choix: iOS ou macOS.</strong> </p><br><p>  Vous pouvez le faire dans Xcode via l'élément de menu "Fichier" =&gt; "Nouveau" =&gt; "Projet", ou en utilisant le raccourci clavier <strong>⇧ +  + N</strong> (par défaut). </p><br><p>  Ensuite, en haut de la boîte de dialogue, sélectionnez la plate-forme souhaitée (iOS ou macOS), sélectionnez le type de projet Framework et passez au bouton «Suivant». </p><br><p>  Sur l'écran suivant, nous devons définir le nom du projet dans le champ "Nom du produit". </p><br><p>  Alternativement, vous pouvez utiliser le nom "de base" du projet, dans la configuration mentionnée précédemment c'est "XCFrameworkExample". </p><br><p>  À l'avenir, lors de la configuration du projet, nous ajouterons des suffixes indiquant les plates-formes au nom de base utilisé dans le nom de la cible. </p><br></li><li><p>  <strong>Après cela, vous devez créer une autre cible de type «Framework» dans le projet pour une autre des plates-formes répertoriées (à l'exception de celle pour laquelle le projet a été créé à l'origine).</strong> </p><br><p>  Pour ce faire, utilisez l'élément de menu "Fichier" =&gt; "Nouveau" =&gt; "Cible". </p><br><p>  Ensuite, nous sélectionnons dans le dialogue une autre (par rapport à celle sélectionnée au paragraphe 1) des deux plates-formes, après quoi nous sélectionnons à nouveau le type de projet «Framework». </p><br><p>  Pour le champ «Product Name», nous pouvons immédiatement utiliser le nom avec le suffixe de la plateforme, pour lequel nous ajoutons target dans ce paragraphe.  Donc, si la plate-forme est macOS, le nom pourrait être «XCFrameworkExample-macOS» (% base_name% -% platform%). </p><br></li><li><p>  <strong>Nous allons définir des cibles et des graphiques pour les rendre plus faciles à distinguer.</strong> </p><br><p>  Tout d'abord, renommez nos schémas et les cibles qui leur sont attachées afin que leurs noms reflètent les plates-formes, par exemple comme ceci: </p><br><ul><li>  "XCFrameworkExample-iOS" </li><li>  "XCFrameworkExample-macOS" </li></ul><br></li><li><p>  <strong>Ensuite, ajoutez le fichier avec le code de notre extension pour <code>String?</code> au projet .swift <code>String?</code></strong> </p><br><p>  Ajoutez un nouveau fichier .swift au projet avec le nom "Optional.swift". <br>  Et dans le fichier lui-même, nous avons mis l'extension mentionnée précédemment pour <code>Optional</code> . </p><br><p>  Il est important de ne pas oublier d'ajouter le fichier de code aux deux cibles. </p><br><p><img src="https://habrastorage.org/webt/qp/eh/qs/qpehqsezf7pb-pg4pc8wao7l4cs.png"></p><br></li></ol><br><p>  Nous avons maintenant un projet que nous pouvons assembler dans XCFramework en utilisant les commandes de l'étape précédente. </p><br><h1 id="process-sborki-iupakovki-biblioteki-vformat-xcframework">  Processus d'assemblage et de conditionnement de la bibliothèque au format .xcframework </h1><br><p>  À ce stade, vous pouvez utiliser le script bash dans un fichier séparé pour créer la bibliothèque et la conditionner au format .xcframework.  De plus, cela permettra à l'avenir d'utiliser ces développements pour intégrer la solution dans le système CI / CD. </p><br><p>  Le script semble très simple et, en fait, rassemble les commandes d'assemblage mentionnées précédemment: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # ---------------------------------- # BUILD PLATFORM SPECIFIC FRAMEWORKS # ---------------------------------- # iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO # ------------------- # PACKAGE XCFRAMEWORK # ------------------- xcodebuild -create-xcframework \ -framework "./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -output "./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><h1 id="soderzhimoe-xcframework">  Contenu .Xcframework </h1><br><p>  À la suite du script d'assemblage du paragraphe précédent de l'article, nous obtenons le très convoité bundle .xcframework, qui peut être ajouté au projet. </p><br><p>  Si nous regardons à l'intérieur de ce bundle, qui, comme .framework, est essentiellement un simple dossier, nous verrons la structure suivante: </p><br><p><img src="https://habrastorage.org/webt/pg/sr/g6/pgsrg6uc4prxhairmnoy57p9wus.png"></p><br><p>  Nous voyons ici qu'à l'intérieur de .xcframework se trouvent des assemblages au format .framework, ventilés par plate-forme et architecture.  Aussi pour décrire le contenu du bundle .xcframework, à l'intérieur il y a un fichier Info.plist. </p><br><div class="spoiler">  <b class="spoiler_title">Le fichier Info.plist a le contenu suivant</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>AvailableLibraries<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-x86_64-simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatformVariant<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos-x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundlePackageType<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XFWK<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkFormatVersion<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Vous pouvez remarquer que pour la clé "CFBundlePackageType", contrairement au format .framework, la nouvelle valeur "XFWK" est utilisée, pas "FMWK". </p><br><h1 id="itogi">  Résumé </h1><br><p>  Ainsi, le format d'empaquetage des bibliothèques dans XCFramework n'est rien de plus qu'un conteneur normal pour les bibliothèques compilées au format .framework. </p><br><p>  Cependant, ce format vous permet de stocker séparément et d'utiliser indépendamment chacune des architectures et plates-formes présentées à l'intérieur.  Cela élimine un certain nombre de problèmes inhérents à l'approche répandue de la construction de cadres universels / universels. </p><br><p>  Quoi qu'il en soit, il existe actuellement une nuance importante concernant la question de l'utilisation de XCFramework dans des projets réels - la gestion des dépendances, qu'Apple n'a pas implémentée au format XCFramework. </p><br><p>  À ces fins, Swift PM, Carthage, CocoaPods et d'autres systèmes de gestion des dépendances et leurs assemblages sont habituellement utilisés.  Il n'est donc pas surprenant que le soutien au nouveau format soit déjà en cours précisément dans les projets <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CocoaPods</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Carthage</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475816/">https://habr.com/ru/post/fr475816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475802/index.html">Comment faire en sorte que Daily / Stand-up ne ressemble pas à une réunion de statut?</a></li>
<li><a href="../fr475804/index.html">Importez des rapports d'appels planifiés de CoMagic vers BigQuery selon un calendrier à l'aide de Google Cloud Functions</a></li>
<li><a href="../fr475808/index.html">GitHub a créé un référentiel millénaire dans lequel il enregistrera les référentiels Open Source pour la postérité</a></li>
<li><a href="../fr475812/index.html">Comment rester fou dans l'Open Space: créer un nouveau bureau à partir de zéro</a></li>
<li><a href="../fr475814/index.html">Transformation de Docker: vendre Docker Enterprise à Mirantis et un chemin mis à jour</a></li>
<li><a href="../fr475826/index.html">Pourquoi les classements Amazon (et autres) ne sont pas fiables</a></li>
<li><a href="../fr475830/index.html">Console rétro portable à faire soi-même</a></li>
<li><a href="../fr475832/index.html">Les expressions multimédias CSS ont une largeur supérieure à la largeur maximale</a></li>
<li><a href="../fr475834/index.html">Scrum ne vous aidera pas. Nous comprenons pourquoi</a></li>
<li><a href="../fr475838/index.html">CHANGER les gens. Ou ... changer les gens. Comment «décoller» le projet de transformation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>