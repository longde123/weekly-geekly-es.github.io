<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€ğŸ‘©â€ğŸ‘¦ ğŸ”… ğŸŒš Unity3Dä¸­åŸºäºå£°éŸ³å’ŒéŸ³ä¹çš„ç¯å¢ƒç”Ÿæˆã€‚ ç¬¬2éƒ¨åˆ†ã€‚ä»éŸ³ä¹åˆ›å»º2Dè½¨é“ ğŸ§‘ğŸ»â€ğŸ¤â€ğŸ§‘ğŸ» ğŸ•ï¸ ğŸš´ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ³¨è§£ 


 å¤§å®¶å¥½ ç›¸å¯¹æœ€è¿‘ï¼Œæˆ‘å†™äº†ä¸€ç¯‡æ–‡ç« ï¼Œåœ¨Unity3Dä¸­åŸºäºå£°éŸ³å’ŒéŸ³ä¹ç”Ÿæˆç¯å¢ƒ ï¼Œå…¶ä¸­ç»™å‡ºäº†ä¸€äº›æ¸¸æˆç¤ºä¾‹ï¼Œè¿™äº›ç¤ºä¾‹ä½¿ç”¨äº†åŸºäºéŸ³ä¹ç”Ÿæˆå†…å®¹çš„æœºåˆ¶ï¼Œè¿˜è°ˆåˆ°äº†æ­¤ç±»æ¸¸æˆçš„åŸºæœ¬æ–¹é¢ã€‚ æ–‡ç« ä¸­å‡ ä¹æ²¡æœ‰ä»£ç ï¼Œæˆ‘ä¿è¯ä¼šæœ‰ç»­é›†ã€‚ åœ¨è¿™é‡Œï¼Œå°±åœ¨æ‚¨çš„é¢å‰ã€‚ è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†å°è¯•æ ¹æ®æ‚¨çš„éŸ³ä¹ï¼Œä»¥Hill Climbçš„...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unity3Dä¸­åŸºäºå£°éŸ³å’ŒéŸ³ä¹çš„ç¯å¢ƒç”Ÿæˆã€‚ ç¬¬2éƒ¨åˆ†ã€‚ä»éŸ³ä¹åˆ›å»º2Dè½¨é“</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digital-ecosystems/blog/432134/"><h2 id="annotaciya"> æ³¨è§£ </h2><br><p> å¤§å®¶å¥½ ç›¸å¯¹æœ€è¿‘ï¼Œæˆ‘å†™äº†ä¸€ç¯‡æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼Œåœ¨Unity3Dä¸­åŸºäºå£°éŸ³å’ŒéŸ³ä¹ç”Ÿæˆç¯å¢ƒ</a> ï¼Œå…¶ä¸­ç»™å‡ºäº†ä¸€äº›æ¸¸æˆç¤ºä¾‹ï¼Œè¿™äº›ç¤ºä¾‹ä½¿ç”¨äº†åŸºäºéŸ³ä¹ç”Ÿæˆå†…å®¹çš„æœºåˆ¶ï¼Œè¿˜è°ˆåˆ°äº†æ­¤ç±»æ¸¸æˆçš„åŸºæœ¬æ–¹é¢ã€‚ æ–‡ç« ä¸­å‡ ä¹æ²¡æœ‰ä»£ç ï¼Œæˆ‘ä¿è¯ä¼šæœ‰ç»­é›†ã€‚ åœ¨è¿™é‡Œï¼Œå°±åœ¨æ‚¨çš„é¢å‰ã€‚ è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†å°è¯•æ ¹æ®æ‚¨çš„éŸ³ä¹ï¼Œä»¥Hill Climbçš„é£æ ¼åˆ›å»º2Dç«èµ›çš„éŸ³è½¨ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬å¾—åˆ°äº†.. </p><br><p><img src="https://habrastorage.org/webt/wp/6y/jk/wp6yjkpyoal7a3bzsg0ugeiuyvs.png"></p><a name="habracut"></a><br><h2 id="vvedenie"> å¼•è¨€ </h2><br><p> æˆ‘æé†’æ‚¨ï¼Œæœ¬ç³»åˆ—æ–‡ç« æ˜¯ä¸ºåˆå­¦è€…å’Œåˆšå¼€å§‹ä½¿ç”¨å£°éŸ³çš„å¼€å‘äººå‘˜è®¾è®¡çš„ã€‚ å¦‚æœæ‚¨åœ¨è„‘æµ·ä¸­è¿›è¡Œå¿«é€Ÿçš„å‚…ç«‹å¶å˜æ¢ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ä¼šæ„Ÿåˆ°æ— èŠã€‚ </p><br><p> è¿™æ˜¯æˆ‘ä»¬ä»Šå¤©çš„è·¯çº¿å›¾ï¼š </p><br><ol><li> è€ƒè™‘ä»€ä¹ˆæ˜¯ç¦»æ•£åŒ–ã€‚ </li><li> æ‰¾å‡ºæˆ‘ä»¬å¯ä»¥ä»Audio Clip Unityè·å¾—çš„æ•°æ® </li><li> äº†è§£å¦‚ä½•å¤„ç†è¿™äº›æ•°æ®ã€‚ </li><li> æ‰¾å‡ºæˆ‘ä»¬å¯ä»¥ä»è¿™äº›æ•°æ®ä¸­ç”Ÿæˆä»€ä¹ˆã€‚ </li><li> äº†è§£å¦‚ä½•åˆ©ç”¨æ‰€æœ‰è¿™äº›ï¼ˆæˆ–è€…ç±»ä¼¼æ¸¸æˆçš„ä¸œè¥¿ï¼‰åˆ¶ä½œæ¸¸æˆ </li></ol><br><p> æ‰€ä»¥èµ°å§ï¼ </p><br><h2 id="diskretizaciya-analogovogo-singala"> æ¨¡æ‹Ÿåƒ§ä¼½ç½—è¯­çš„ç¦»æ•£åŒ– </h2><br><p> ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸ºäº†åœ¨æ•°å­—ç³»ç»Ÿä¸­ä½¿ç”¨ä¿¡å·ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚ è½¬æ¢æ­¥éª¤ä¹‹ä¸€æ˜¯å¯¹ä¿¡å·è¿›è¡Œé‡‡æ ·ï¼Œå…¶ä¸­å°†æ¨¡æ‹Ÿä¿¡å·åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼ˆä¸´æ—¶æŠ¥å‘Šï¼‰ï¼Œç„¶åä¸ºæ¯ä¸ªæŠ¥å‘Šåˆ†é…é€‰å®šæ—¶åˆ»çš„æŒ¯å¹…å€¼ã€‚ <br><img src="https://habrastorage.org/webt/k-/r4/_0/k-r4_0pvvu8sxhcdxaybjnpsn0q.png"></p><br><p> å­—æ¯Tè¡¨ç¤ºé‡‡æ ·å‘¨æœŸã€‚ å‘¨æœŸè¶ŠçŸ­ï¼Œä¿¡å·è½¬æ¢å°†è¶Šå‡†ç¡®ã€‚ ä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä»–ä»¬è°ˆè®ºçš„æ˜¯ç›¸åçš„æƒ…å†µï¼šé‡‡æ ·ç‡ï¼ˆè¿™æ˜¯F = 1 / Tæ˜¯åˆä¹é€»è¾‘çš„ï¼‰ã€‚  8,000 Hzè¶³ä»¥ç”¨äºç”µè¯ä¿¡å·ï¼Œä¾‹å¦‚ï¼ŒDVDéŸ³é¢‘æ ¼å¼çš„é€‰é¡¹ä¹‹ä¸€éœ€è¦192,000 Hzçš„é‡‡æ ·é¢‘ç‡ã€‚ æ•°å­—å½•éŸ³ï¼ˆåœ¨æ¸¸æˆç¼–è¾‘å™¨ï¼ŒéŸ³ä¹ç¼–è¾‘å™¨ä¸­ï¼‰çš„æ ‡å‡†æ˜¯44 100 Hz-è¿™æ˜¯CDéŸ³é¢‘çš„é¢‘ç‡ã€‚ </p><br><p> æŒ¯å¹…çš„æ•°å€¼å­˜å‚¨åœ¨æ‰€è°“çš„æ ·æœ¬ä¸­ï¼Œæˆ‘ä»¬å°†ä¸å®ƒä»¬ä¸€èµ·å·¥ä½œã€‚ æ ·æœ¬çš„å€¼æ˜¯floatï¼Œå¯ä»¥æ˜¯-1åˆ°1ã€‚ç»è¿‡ç®€åŒ–ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ã€‚ </p><br><p><img src="https://habrastorage.org/webt/sj/rg/r7/sjrgr7njjj7iwmyi6nebdtpfxze.png"></p><br><h2 id="otrisovka-zvukovoy-volny-statichno"> å£°æ³¢æ¸²æŸ“ï¼ˆé™æ€ï¼‰ </h2><br><h3 id="bazovaya-informaciya"> åŸºæœ¬èµ„æ–™ </h3><br><p> æ³¢å½¢ï¼ˆæˆ–éŸ³é¢‘å½¢å¼ï¼Œåœ¨æ™®é€šäººä¸­ä¸ºâ€œé±¼â€ï¼‰æ˜¯å£°éŸ³ä¿¡å·éšæ—¶é—´å˜åŒ–çš„è§†è§‰è¡¨ç¤ºã€‚ è¯¥æ³¢å½¢å¯ä»¥å‘æˆ‘ä»¬æ˜¾ç¤ºå£°éŸ³åœ¨å“ªä¸ªç‚¹ä¸Šå‘ç”Ÿäº†æœ‰æºç›¸ä½ï¼Œä»¥åŠåœ¨å“ªé‡Œè¡°å‡ã€‚ é€šå¸¸ï¼Œæ¯ä¸ªé€šé“çš„æ³¢å½¢åˆ†åˆ«æ˜¾ç¤ºï¼Œä¾‹å¦‚ï¼š </p><br><p><img src="https://habrastorage.org/webt/hj/xr/vm/hjxrvm-bdrgt-myieappnmqxgb0.png"></p><br><p> æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªAudioSourceå’Œä¸€ä¸ªå¯ä»¥åœ¨å…¶ä¸­å·¥ä½œçš„è„šæœ¬ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹Unityå¯ä»¥ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆã€‚ </p><br><pre><code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  AudioSource    AudioSource myAudio = gameObject.GetComponent&lt;AudioSource&gt;(); //     .     44100. int freq = myAudio.clip.frequency;</span></span></code> </pre> <br><h3 id="vybor-kol-va-otchetov"> é€‰æ‹©æŠ¥å‘Šæ•° </h3><br><p> åœ¨ç»§ç»­ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è°ˆè°ˆå£°éŸ³çš„æ¸²æŸ“æ·±åº¦ã€‚ ä»¥æ¯ç§’44100 Hzçš„é‡‡æ ·é¢‘ç‡ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¤„ç†44100ä¸ªæŠ¥å‘Šã€‚ å‡è®¾æˆ‘ä»¬éœ€è¦æ¸²æŸ“10ç§’é•¿çš„è½¨é“ã€‚ æˆ‘ä»¬å°†ç”¨åƒç´ å®½åº¦çš„çº¿æ¡ç»˜åˆ¶æ¯ä¸ªæŠ¥å‘Šã€‚ äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬çš„æ³¢å½¢é•¿ä¸º441,000åƒç´ ã€‚ æ‚¨ä¼šå¾—åˆ°ä¸€ä¸ªå¾ˆé•¿ï¼Œå¾ˆç»†ä¸”å‡ ä¹æ— æ³•ç†è§£çš„å£°æ³¢ã€‚ ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­çœ‹åˆ°æ¯ä¸ªç‰¹å®šçš„æŠ¥å‘Šï¼ æ— è®ºæ‚¨å¦‚ä½•ç»˜åˆ¶ï¼Œéƒ½å°†æå¤§åœ°åŠ è½½ç³»ç»Ÿã€‚ </p><br><p><img src="https://habrastorage.org/webt/qr/yf/j6/qryfj6qyv0v5mrbzjfqz6qcws_y.png"></p><br><p> å¦‚æœæ‚¨ä¸åˆ¶ä½œä¸“ä¸šéŸ³é¢‘è½¯ä»¶ï¼Œåˆ™ä¸éœ€è¦è¿™ç§å‡†ç¡®æ€§ã€‚ å¯¹äºä¸€èˆ¬çš„éŸ³é¢‘å›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰é‡‡æ ·åˆ†æˆæ›´å¤§çš„å‘¨æœŸï¼Œä¾‹å¦‚ï¼Œå–æ¯100ä¸ªé‡‡æ ·çš„å¹³å‡å€¼ã€‚ ç„¶åæˆ‘ä»¬çš„waveå°†å…·æœ‰éå¸¸ç‹¬ç‰¹çš„å½¢å¼ï¼š </p><br><p><img src="https://habrastorage.org/webt/2v/yk/kz/2vykkzw2wtewvjzcwsfsz_h1zvq.png"></p><br><p> å½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯å®Œå…¨å‡†ç¡®çš„ï¼Œå› ä¸ºæ‚¨å¯ä»¥è·³è¿‡å¯èƒ½éœ€è¦çš„ä½“ç§¯å³°å€¼ï¼Œå› æ­¤æ‚¨å¯ä»¥å°è¯•çš„ä¸æ˜¯å¹³å‡å€¼ï¼Œè€Œæ˜¯è¯¥åˆ†æ®µçš„æœ€å¤§å€¼ã€‚ è¿™å°†äº§ç”Ÿç¨å¾®ä¸åŒçš„å›¾åƒï¼Œä½†æ˜¯æ‚¨çš„å³°å€¼ä¸ä¼šæ¶ˆå¤±ã€‚ </p><br><h3 id="podgotovka-k-polucheniyu-audiodannyh"> å‡†å¤‡æ¥æ”¶éŸ³é¢‘ </h3><br><p> è®©æˆ‘ä»¬å°†æ ·æœ¬çš„å‡†ç¡®æ€§å®šä¹‰ä¸ºè´¨é‡ï¼Œå°†æœ€ç»ˆæŠ¥å‘Šçš„æ•°ç›®å®šä¹‰ä¸ºsampleCountã€‚ </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> quality = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sampleCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; sampleCount = freq / quality;</code> </pre> <br><p> ä¸‹é¢æ˜¯è®¡ç®—æ‰€æœ‰æ•°å­—çš„ç¤ºä¾‹ã€‚ </p><br><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±è·å–æ ·æœ¬ã€‚ å¯ä»¥ä½¿ç”¨<strong>GetData</strong>æ–¹æ³•ä»éŸ³é¢‘å‰ªè¾‘ä¸­å®Œæˆæ­¤æ“ä½œã€‚ </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offsetSamples</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p> æ­¤æ–¹æ³•å°†ä¸€ä¸ªæ•°ç»„å†™å…¥ç¤ºä¾‹ã€‚  offsetSamples-è´Ÿè´£è¯»å–æ•°æ®æ•°ç»„çš„èµ·ç‚¹çš„å‚æ•°ã€‚ å¦‚æœä»å¤´å¼€å§‹è¯»å–æ•°ç»„ï¼Œåˆ™åº”è¯¥ä¸ºé›¶ã€‚ </p><br><p> è¦è®°å½•æ ·æœ¬ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå®ƒä»¬å‡†å¤‡ä¸€ä¸ªæ•°ç»„ã€‚ ä¾‹å¦‚ï¼Œåƒè¿™æ ·ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] samples; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] waveFormArray; <span class="hljs-comment"><span class="hljs-comment">//      samples = new float[myAudio.clip.samples * myAudio.clip.channels];</span></span></code> </pre> <br><p> ä¸ºä»€ä¹ˆæˆ‘ä»¬å°†é•¿åº¦ä¹˜ä»¥é€šé“æ•°ï¼Ÿ ç°åœ¨æˆ‘å‘Šè¯‰... </p><br><h3 id="informaciya-ob-audiokanalah-v-unity">  UnityéŸ³é¢‘é¢‘é“ä¿¡æ¯ </h3><br><p> è®¸å¤šäººéƒ½çŸ¥é“ï¼Œåœ¨å£°éŸ³ä¸Šï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä¸¤ä¸ªå£°é“ï¼šå·¦å£°é“å’Œå³å£°é“ã€‚ æœ‰äººçŸ¥é“æœ‰2.1ç³»ç»Ÿä»¥åŠ5.1å’Œ7.1ï¼Œå…¶ä¸­å£°æºä»å››é¢å…«æ–¹ç¯ç»•ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wikiä¸Šå¯¹</a>é¢‘é“çš„ä¸»é¢˜è¿›è¡Œäº†å¾ˆå¥½çš„æè¿°ã€‚ è¿™åœ¨Unityä¸­å¦‚ä½•å·¥ä½œï¼Ÿ </p><br><p> ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œæ‰“å¼€å‰ªè¾‘æ—¶ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹å›¾åƒï¼š </p><br><p><img src="https://habrastorage.org/webt/us/hy/tu/ushytu2q3jhyyl8sbx9tclnaf9i.png"></p><br><p> æ­¤å¤„ä»…æ˜¾ç¤ºäº†æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¸ é“ï¼Œæ‚¨ç”šè‡³å¯ä»¥æ³¨æ„åˆ°å®ƒä»¬å½¼æ­¤ä¸åŒã€‚  Unityä¾æ¬¡è®°å½•è¿™äº›é€šé“çš„æ ·æœ¬ã€‚ åŸæ¥è¿™å¼ å›¾ï¼š <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><msub><mi>L</mi><mn>1</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>R</mi><mn>1</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>L</mi><mn>2</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>R</mi><mn>2</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>L</mi><mn>3</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>R</mi><mn>3</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>L</mi><mn>4</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>R</mi><mn>4</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>L</mi><mn>5</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>R</mi><mn>5</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>L</mi><mn>6</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>R</mi><mn>6</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>L</mi><mn>7</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>R</mi><mn>7</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>L</mi><mn>8</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>R</mi><mn>8</mn></msub><mo>.</mo><mo>.</mo><mo>.</mo><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="76.954ex" height="2.66ex" viewBox="0 -832 33132.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-31" x="963" y="-213"></use></g><g transform="translate(1413,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(2243,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-31" x="1074" y="-213"></use></g><g transform="translate(3457,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(4287,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-32" x="963" y="-213"></use></g><g transform="translate(5422,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(6252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-32" x="1074" y="-213"></use></g><g transform="translate(7466,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(8296,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-33" x="963" y="-213"></use></g><g transform="translate(9431,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(10261,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-33" x="1074" y="-213"></use></g><g transform="translate(11474,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(12304,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-34" x="963" y="-213"></use></g><g transform="translate(13440,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(14270,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-34" x="1074" y="-213"></use></g><g transform="translate(15483,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(16313,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-35" x="963" y="-213"></use></g><g transform="translate(17449,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(18279,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-35" x="1074" y="-213"></use></g><g transform="translate(19492,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(20322,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-36" x="963" y="-213"></use></g><g transform="translate(21457,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(22287,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-36" x="1074" y="-213"></use></g><g transform="translate(23501,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(24331,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-37" x="963" y="-213"></use></g><g transform="translate(25466,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(26296,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-37" x="1074" y="-213"></use></g><g transform="translate(27509,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(28339,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-38" x="963" y="-213"></use></g><g transform="translate(29475,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼Œ</text></g><g transform="translate(30305,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-38" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-2E" x="31518" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-2E" x="31963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-2E" x="32409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/digital-ecosystems/blog/432134/&amp;usg=ALkJrhgYnMQgdSpcPdJA0CYsXpv-6X-m8A#MJMAIN-5D" x="32854" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><msub><mi>L</mi><mn>1</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>R</mi><mn>1</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>L</mi><mn>2</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>R</mi><mn>2</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>L</mi><mn>3</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>R</mi><mn>3</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>L</mi><mn>4</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>R</mi><mn>4</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>L</mi><mn>5</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>R</mi><mn>5</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>L</mi><mn>6</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>R</mi><mn>6</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>L</mi><mn>7</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>R</mi><mn>7</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>L</mi><mn>8</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼Œ</mo></mrow><msub><mi>R</mi><mn>8</mn></msub><mo>.</mo><mo>.</mo><mo>.</mo><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> [L_1ï¼ŒR_1ï¼ŒL_2ï¼ŒR_2ï¼ŒL_3ï¼ŒR_3ï¼ŒL_4ï¼ŒR_4ï¼ŒL_5ï¼ŒR_5ï¼ŒL_6ï¼ŒR_6ï¼ŒL_7ï¼ŒR_7ï¼ŒL_8ï¼ŒR_8 ...] </script></p><br><p> è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨æ•°ç»„ä¸­éœ€è¦çš„ç©ºé—´æ¯”ä»…æ˜¯æ ·æœ¬æ•°å¤§ä¸¤å€çš„åŸå› ã€‚ </p><br><p> å¦‚æœé€‰æ‹©â€œå¼ºåˆ¶åˆ°å•å£°é“â€å‰ªè¾‘é€‰é¡¹ï¼Œåˆ™å£°é“å°†ä¸ºä¸€ä¸ªï¼Œæ‰€æœ‰å£°éŸ³å°†ä½äºä¸­å¤®ã€‚ æ‚¨çš„waveçš„é¢„è§ˆå°†ç«‹å³æ›´æ”¹ã€‚ </p><br><p><img src="https://habrastorage.org/webt/fx/pk/-f/fxpk-fvqtdsvhfvfyyvl1mjrjla.png"></p><br><p><img src="https://habrastorage.org/webt/po/62/s8/po62s86xpcbainozvupbpekwdig.png"></p><br><h3 id="poluchenie-audiodannyh"> æ¥æ”¶éŸ³é¢‘æ•°æ® </h3><br><p> è¿™æ˜¯æˆ‘ä»¬å¾—åˆ°çš„ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> quality = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sampleCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] waveFormArray; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] samples; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioSource myAudio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { myAudio = gameObject.GetComponent&lt;AudioSource&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> freq = myAudio.clip.frequency; sampleCount = freq / quality; samples = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[myAudio.clip.samples * myAudio.clip.channels]; myAudio.clip.GetData(samples,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  ,    .       waveFormArray = new float[(samples.Length / sampleCount)]; //             for (int i = 0; i &lt; waveFormArray.Length; i++) { waveFormArray[i] = 0; for (int j = 0; j &lt; sampleCount; j++) { //Abs     ""    . .  waveFormArray[i] += Mathf.Abs(samples[(i * sampleCount) + j]); } waveFormArray[i] /= sampleCount; } }</span></span></code> </pre> <br><p> æ€»è®¡ï¼Œå¦‚æœéŸ³è½¨èµ°äº†10ç§’å¹¶ä¸”æ˜¯ä¸¤ä¸ªé€šé“ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š </p><br><ul><li> å‰ªè¾‘ä¸­çš„æ ·æœ¬æ•°ï¼ˆmyAudio.clip.sampleï¼‰= 44100 * 10 = 441000 </li><li> ä¸¤ä¸ªé€šé“çš„æ ·æœ¬æ•°ç»„å¾ˆé•¿ï¼ˆsamples.Lengthï¼‰= 441000 * 2 = 882000 </li><li> æŠ¥å‘Šæ•°é‡ï¼ˆsampleCountï¼‰= 44100/100 = 441 </li><li> æœ€ç»ˆæ•°ç»„çš„é•¿åº¦= samples.Length / sampleCount = 2000 </li></ul><br><p> ç»“æœï¼Œæˆ‘ä»¬å°†ä½¿ç”¨2000ç‚¹ï¼Œè¿™è¶³ä»¥å¸å¼•æˆ‘ä»¬ã€‚ ç°åœ¨ï¼Œæ‚¨éœ€è¦å‘æŒ¥æƒ³è±¡åŠ›ï¼Œå¹¶è€ƒè™‘å¦‚ä½•ä½¿ç”¨è¿™äº›æ•°æ®ã€‚ </p><br><h3 id="otrisovka-audioinformacii"> æ¸²æŸ“éŸ³é¢‘ä¿¡æ¯ </h3><br><h4 id="sozdanie-prostoy-audiodorozhki-s-pomoschyu-debug-sredstv"> ä½¿ç”¨è°ƒè¯•å·¥å…·åˆ›å»ºç®€å•çš„éŸ³è½¨ </h4><br><p> ä¼—æ‰€å‘¨çŸ¥ï¼ŒUnityå…·æœ‰æ˜¾ç¤ºå„ç§Debugä¿¡æ¯çš„ä¾¿æ·æ–¹å¼ã€‚ åŸºäºè¿™äº›å·¥å…·çš„èªæ˜å¼€å‘äººå‘˜å¯ä»¥ä¸ºç¼–è¾‘å™¨è¿›è¡Œéå¸¸å¼ºå¤§çš„æ‰©å±•ã€‚ æˆ‘ä»¬çš„æ¡ˆä¾‹æ˜¾ç¤ºäº†Debugæ–¹æ³•çš„éå…¸å‹ç”¨æ³•ã€‚ </p><br><p> ä¸ºäº†ç»˜åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ¡çº¿ã€‚ æˆ‘ä»¬å¯ä»¥å€ŸåŠ©å°†æ ¹æ®æ•°ç»„å€¼åˆ›å»ºçš„å‘é‡æ¥å®Œæˆæ­¤æ“ä½œã€‚ è¯·æ³¨æ„ï¼Œè¦åˆ¶ä½œç²¾ç¾çš„é•œåƒéŸ³é¢‘å½¢å¼ï¼Œæˆ‘ä»¬éœ€è¦â€œç²˜åˆâ€å¯è§†åŒ–çš„ä¸¤ä¸ªéƒ¨åˆ†ã€‚ </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; waveFormArray.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>; i++) { <span class="hljs-comment"><span class="hljs-comment">//      Vector3 upLine = new Vector3(i * .01f, waveFormArray[i] * 10, 0); //      Vector3 downLine = new Vector3(i * .01f, -waveFormArray[i] * 10, 0); }</span></span></code> </pre> <br><p> æ¥ä¸‹æ¥ï¼Œåªéœ€ä½¿ç”¨Debug.DrawLineç»˜åˆ¶çŸ¢é‡å³å¯ã€‚ ä»»ä½•é¢œè‰²éƒ½å¯ä»¥é€‰æ‹©ã€‚ æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½å¿…é¡»åœ¨Updateä¸­è°ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬å°†åœ¨æ¯ä¸€å¸§æ›´æ–°ä¿¡æ¯ã€‚ </p><br><pre> <code class="cs hljs">Debug.DrawLine(upLine, downLine, Color.green);</code> </pre> <br><p> å¦‚æœéœ€è¦ï¼Œå¯ä»¥æ·»åŠ â€œæ»‘å—â€ï¼Œä»¥æ˜¾ç¤ºæ­£åœ¨æ’­æ”¾çš„æ›²ç›®çš„å½“å‰ä½ç½®ã€‚ è¯¥ä¿¡æ¯å¯ä»¥ä»â€œ AudioSource.timeSamplesâ€å­—æ®µè·å¾—ã€‚ </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> debugLineWidth = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ""  .       int currentPosition = (myAudio.timeSamples / quality) * 2; Vector3 drawVector = new Vector3(currentPosition * 0.01f, 0, 0); Debug.DrawLine(drawVector - Vector3.up * debugLineWidth, drawVector + Vector3.up * debugLineWidth, Color.white);</span></span></code> </pre> <br><p> æ€»è®¡ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„è„šæœ¬ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WaveFormDebug</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> quality = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sampleCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> freq; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> debugLineWidth = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] waveFormArray; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] samples; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioSource myAudio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { myAudio = gameObject.GetComponent&lt;AudioSource&gt;(); <span class="hljs-comment"><span class="hljs-comment">//  freq = myAudio.clip.frequency; sampleCount = freq / quality; //  samples = new float[myAudio.clip.samples * myAudio.clip.channels]; myAudio.clip.GetData(samples, 0); //       waveFormArray = new float[(samples.Length / sampleCount)]; for (int i = 0; i &lt; waveFormArray.Length; i++) { waveFormArray[i] = 0; for (int j = 0; j &lt; sampleCount; j++) { waveFormArray[i] += Mathf.Abs(samples[(i * sampleCount) + j]); } waveFormArray[i] /= sampleCount; } } private void Update() { for (int i = 0; i &lt; waveFormArray.Length - 1; i++) { //      Vector3 upLine = new Vector3(i * 0.01f, waveFormArray[i] * 10, 0); //      Vector3 downLine = new Vector3(i * 0.01f, -waveFormArray[i] * 10, 0); // Debug  Debug.DrawLine(upLine, downLine, Color.green); } // ""  .       int currentPosition = (myAudio.timeSamples / quality) * 2; Vector3 drawVector = new Vector3(currentPosition * 0.01f, 0, 0); Debug.DrawLine(drawVector - Vector3.up * debugLineWidth, drawVector + Vector3.up * debugLineWidth, Color.white); } }</span></span></code> </pre> <br><p> ç»“æœå¦‚ä¸‹ï¼š </p><br><p><img src="https://habrastorage.org/webt/gq/ij/fd/gqijfdc9d3b6t1nemd-wqsxqn70.png"></p><br><h4 id="sozdanie-plavnogo-zvukovogo-landshafta-s-pomoschyu-polygoncollider2d"> ä½¿ç”¨PolygonCollider2Dåˆ›å»ºå¹³æ»‘çš„éŸ³æ™¯ </h4><br><p> åœ¨ç»§ç»­æœ¬èŠ‚ä¹‹å‰ï¼Œæˆ‘è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼šå½“ç„¶ï¼Œæ²¿ç€ç”±éŸ³ä¹ç”Ÿæˆçš„è½¨é“è¡Œé©¶å¾ˆæœ‰è¶£ï¼Œä½†æ˜¯ä»æ¸¸æˆæ€§çš„è§’åº¦æ¥çœ‹ï¼Œè¿™å®é™…ä¸Šæ˜¯æ²¡æœ‰ç”¨çš„ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼š </p><br><ol><li> ä¸ºäº†ä½¿è½¨é“å¯ä»¥é€šè¿‡ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¹³æ»‘å¤„ç†ã€‚ æ‰€æœ‰çš„é«˜å³°éƒ½æ¶ˆå¤±äº†ï¼Œæ‚¨å‡ ä¹åœæ­¢äº†â€œæ„Ÿè§‰éŸ³ä¹â€ </li><li> é€šå¸¸ï¼ŒéŸ³ä¹æ›²ç›®æ˜¯é«˜åº¦å‹ç¼©çš„ï¼Œå¹¶ä¸”ä»£è¡¨ä¸€ä¸ªéŸ³ç –ï¼Œä¸é€‚åˆ2Dæ¸¸æˆã€‚ </li><li> æˆ‘ä»¬çš„è¿è¾“é€Ÿåº¦å°šæœªè§£å†³çš„é—®é¢˜ï¼Œåº”è¯¥é€‚åˆäºè½¨é“çš„é€Ÿåº¦ã€‚ æˆ‘æƒ³åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚ </li></ol><br><p> å› æ­¤ï¼Œä½œä¸ºå®éªŒï¼Œè¿™ç§ç±»å‹çš„ç”Ÿæˆéå¸¸æœ‰è¶£ï¼Œä½†æ˜¯å¾ˆéš¾åŸºäºæ­¤ç”ŸæˆçœŸå®çš„æ¸¸æˆåŠŸèƒ½ã€‚ æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬ç»§ç»­ã€‚ </p><br><p> å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æˆ‘ä»¬çš„æ•°æ®åˆ¶ä½œPolygonCollider2Dã€‚ è¿™å¾ˆå®¹æ˜“åšåˆ°ã€‚  PolygonCollider2Dæœ‰ä¸€ä¸ªæ¥å—Vector2 []çš„å…¬å…±ç‚¹å­—æ®µã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†ç‚¹è½¬ç§»åˆ°æ‰€éœ€ç±»å‹çš„å‘é‡ä¸Šã€‚ è®©æˆ‘ä»¬åšä¸€ä¸ªå‡½æ•°ï¼Œå°†æ ·æœ¬æ•°ç»„è½¬æ¢ä¸ºå‘é‡æ•°ç»„ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Vector2[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreatePath</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] src</span></span></span><span class="hljs-function">)</span></span> { Vector2[] result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2[src.Length]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; size; i++) { result[i] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(i * <span class="hljs-number"><span class="hljs-number">0.01f</span></span>, Mathf.Abs(src[i] * lineScale)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p> ä¹‹åï¼Œåªéœ€å°†æˆ‘ä»¬å¾—åˆ°çš„å‘é‡æ•°ç»„ä¼ é€’ç»™å¯¹æ’æœºï¼š </p><br><pre> <code class="cs hljs">path = CreatePath(waveFormArray); poly.points = path;</code> </pre> <br><p> æˆ‘ä»¬çœ‹ä¸€ä¸‹ç»“æœã€‚ è¿™æ˜¯æˆ‘ä»¬æ—…ç¨‹çš„å¼€å§‹â€¦â€¦å—¯â€¦â€¦çœ‹èµ·æ¥ä¸å¤ªé¡ºåˆ©ï¼ˆæš‚æ—¶ä¸è¦è€ƒè™‘å¯è§†åŒ–ï¼Œä»¥åå†å‘è¡¨è¯„è®ºï¼‰ã€‚ </p><br><p><img src="https://habrastorage.org/webt/e-/3e/ry/e-3eryzi385zy3f4r-hvnsi0iwc.png"></p><br><p> æˆ‘ä»¬çš„éŸ³é¢‘å½¢å¼è¿‡äºæ¸…æ™°ï¼Œå› æ­¤éŸ³è½¨æ˜¾å¾—å¾ˆå¥‡æ€ªã€‚ éœ€è¦ä½¿å…¶å¹³æ»‘ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ç§»åŠ¨å¹³å‡ç®—æ³•ã€‚ æ‚¨å¯ä»¥åœ¨æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ã€Šç§»åŠ¨å¹³å‡ç®—æ³•ï¼ˆç®€å•ç§»åŠ¨å¹³å‡ï¼‰ã€‹ä¸­</a>äº†è§£æœ‰å…³Habrçš„æ›´å¤šä¿¡æ¯ã€‚ </p><br><p> åœ¨Unityä¸­ï¼Œè¯¥ç®—æ³•çš„å®ç°æ–¹å¼å¦‚ä¸‹ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MovingAverage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> frameSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] avgPoints = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[data.Length - frameSize + <span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; counter &lt;= data.Length - frameSize; counter++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> innerLoopCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = counter; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (innerLoopCounter &lt; frameSize) { sum = sum + data[index]; innerLoopCounter += <span class="hljs-number"><span class="hljs-number">1</span></span>; index += <span class="hljs-number"><span class="hljs-number">1</span></span>; } avgPoints[counter] = sum / frameSize; sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> avgPoints; }</code> </pre> <br><p> æˆ‘ä»¬ä¿®æ”¹è·¯å¾„åˆ›å»ºï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] avgArray = MovingAverage(frameSize, waveFormArray); path = CreatePath(avgArray); poly.points = path;</code> </pre> <br><p> æ­£åœ¨æ£€æŸ¥... </p><br><p><img src="https://habrastorage.org/webt/m5/rk/sb/m5rksbekvjfd45482gbgprvnmn0.png"></p><br><p> ç°åœ¨æˆ‘ä»¬çš„è½¨è¿¹çœ‹èµ·æ¥å¾ˆæ­£å¸¸ã€‚ æˆ‘ä½¿ç”¨çš„çª—å£å®½åº¦ä¸º10ã€‚æ‚¨å¯ä»¥ä¿®æ”¹æ­¤å‚æ•°ä»¥é€‰æ‹©æ‰€éœ€çš„å¹³æ»‘åº¦ã€‚ </p><br><p> è¿™æ˜¯æ­¤éƒ¨åˆ†çš„å®Œæ•´è„šæœ¬ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WaveFormTest</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> frameSize = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> size = <span class="hljs-number"><span class="hljs-number">2048</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PolygonCollider2D poly; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lineScale = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> quality = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sampleCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] waveFormArray; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] samples; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2[] path; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioSource myAudio; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { myAudio = gameObject.GetComponent&lt;AudioSource&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> freq = myAudio.clip.frequency; sampleCount = freq / quality; samples = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[myAudio.clip.samples * myAudio.clip.channels]; myAudio.clip.GetData(samples, <span class="hljs-number"><span class="hljs-number">0</span></span>); waveFormArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[(samples.Length / sampleCount)]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; waveFormArray.Length; i++) { waveFormArray[i] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; sampleCount; j++) { waveFormArray[i] += Mathf.Abs(samples[(i * sampleCount) + j]); } waveFormArray[i] /= sampleCount * <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//  ,    frameSize float[] avgArray = MovingAverage(frameSize, waveFormArray); path = CreatePath(avgArray); poly.points = path; } private Vector2[] CreatePath(float[] src) { Vector2[] result = new Vector2[src.Length]; for (int i = 0; i &lt; size; i++) { result[i] = new Vector2(i * 0.01f, Mathf.Abs(src[i] * lineScale)); } return result; } private float[] MovingAverage(int frameSize, float[] data) { float sum = 0; float[] avgPoints = new float[data.Length - frameSize + 1]; for (int counter = 0; counter &lt;= data.Length - frameSize; counter++) { int innerLoopCounter = 0; int index = counter; while (innerLoopCounter &lt; frameSize) { sum = sum + data[index]; innerLoopCounter += 1; index += 1; } avgPoints[counter] = sum / frameSize; sum = 0; } return avgPoints; } }</span></span></code> </pre> <br><p> æ­£å¦‚æˆ‘åœ¨æœ¬èŠ‚å¼€å¤´æ‰€è¯´çš„é‚£æ ·ï¼Œé€šè¿‡è¿™ç§å¹³æ»‘å¤„ç†ï¼Œæˆ‘â€‹â€‹ä»¬ä¸å†æ„Ÿè§‰åˆ°éŸ³è½¨ï¼Œæ­¤å¤–ï¼Œæœºå™¨çš„é€Ÿåº¦ä¸éŸ³ä¹é€Ÿåº¦ï¼ˆBPMï¼‰æ— å…³ã€‚ æˆ‘ä»¬å°†åœ¨æœ¬ç³»åˆ—æ–‡ç« çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­åˆ†ææ­¤é—®é¢˜ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬å°†åœ¨æ­¤è®¨è®ºç‰¹æ®Šä¸»é¢˜ã€‚ èŠ‚æ‹ä¸‹çš„æ•ˆæœã€‚ é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘ä»è¿™ç¬”<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…è´¹èµ„äº§ä¸­</a>æ‹¿äº†ä¸€å°æ‰“å­—æœºã€‚ </p><br><p> ä¹Ÿè®¸å¾ˆå¤šäººåœ¨çœ‹å±å¹•æˆªå›¾æ—¶éƒ½æƒ³çŸ¥é“æˆ‘æ˜¯å¦‚ä½•ç»˜åˆ¶æ›²ç›®çš„ï¼Ÿ æ¯•ç«Ÿï¼Œå¯¹æ’æœºæ˜¯ä¸å¯è§çš„ã€‚ </p><br><p> æˆ‘åˆ©ç”¨Internetçš„æ™ºæ…§ï¼Œæ‰¾åˆ°äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥å°†å¤šè¾¹å½¢å¯¹æ’æœºå˜æˆå¯ä»¥åˆ†é…ä»»ä½•æè´¨çš„ç½‘æ ¼ï¼Œå¹¶ä¸”çº¿æ¡æ¸²æŸ“å™¨å°†ç»˜åˆ¶å‡ºæ—¶å°šçš„è½®å»“ã€‚ æ­¤æ–¹æ³•åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>è¯¦ç»†ä»‹ç»ã€‚ æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Unity Community</a>ä¸Šä½¿ç”¨Triangulatorã€‚ </p><br><h2 id="zavershenie"> å®Œæˆæ—¶é—´ </h2><br><p> æˆ‘ä»¬ä»æœ¬æ–‡ä¸­å­¦åˆ°çš„å†…å®¹æ˜¯éŸ³ä¹æ¸¸æˆçš„åŸºæœ¬è‰å›¾ã€‚ æ˜¯çš„ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™ç§å½¢å¼æœ‰ç‚¹éš¾çœ‹ï¼Œä½†æ˜¯æ‚¨å¯ä»¥æ”¾å¿ƒåœ°è¯´ï¼šâ€œä¼™è®¡ä»¬ï¼Œæˆ‘è®©æœºå™¨æ²¿ç€éŸ³è½¨èµ°äº†ï¼â€ã€‚ ä¸ºäº†ä½¿å®ƒæˆä¸ºä¸€ä¸ªçœŸæ­£çš„æ¸¸æˆï¼Œæ‚¨éœ€è¦ä»˜å‡ºå¾ˆå¤šåŠªåŠ›ã€‚ ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æ­¤å¤„æ‰§è¡Œçš„æ“ä½œçš„åˆ—è¡¨ï¼š </p><br><ol><li> å°†æœºå™¨çš„é€Ÿåº¦ç»‘å®šåˆ°BPMè½¨é“ã€‚ æ’­æ”¾å™¨åªèƒ½æ§åˆ¶æ±½è½¦çš„å€¾æ–œåº¦ï¼Œè€Œä¸èƒ½æ§åˆ¶é€Ÿåº¦ã€‚ ç„¶ååœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼ŒéŸ³ä¹ä¼šå˜å¾—æ›´åŠ å¼ºçƒˆã€‚ </li><li> åšä¸€ä¸ªä½æ£€æµ‹å™¨ï¼Œå¹¶æ·»åŠ ç‰¹ä»·ã€‚ åœ¨èŠ‚æ‹ä¸‹å°†èµ·ä½œç”¨çš„æ•ˆæœã€‚ æ­¤å¤–ï¼Œæ‚¨å¯ä»¥å‘æ±½è½¦è½¦èº«æ·»åŠ åŠ¨ç”»ï¼ŒåŠ¨ç”»å°†éšç€æ‹å­çš„è·³åŠ¨è€Œåå¼¹ã€‚ è¿™å®Œå…¨å–å†³äºæ‚¨çš„æƒ³è±¡åŠ›ã€‚ </li><li> è€Œä¸æ˜¯ç§»åŠ¨å¹³å‡çº¿ï¼Œæ‚¨éœ€è¦æ›´ç†Ÿç»ƒåœ°å¤„ç†è½¨è¿¹å¹¶è·å–æ•°æ®æ•°ç»„ï¼Œä»¥ä½¿å³°ä¸ä¼šæ¶ˆå¤±ï¼Œä½†æ˜¯åˆ›å»ºè½¨è¿¹å¾ˆå®¹æ˜“ã€‚ </li><li> å¥½å§ï¼Œå½“ç„¶ï¼Œæ‚¨éœ€è¦ä½¿æ¸¸æˆç©æ³•æœ‰è¶£ã€‚ æ‚¨å¯ä»¥åœ¨æ¯æ¬¡å‡»ä¸­æ”¾ç½®ç¡¬å¸ä½ï¼Œæ·»åŠ å±é™©åŒºåŸŸç­‰ã€‚ </li></ol><br><p> æˆ‘ä»¬å°†åœ¨æœ¬ç³»åˆ—æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†ä¸­ç ”ç©¶æ‰€æœ‰è¿™äº›ä»¥åŠæ›´å¤šå†…å®¹ã€‚ è°¢è°¢å¤§å®¶çš„é˜…è¯»ï¼ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN432134/">https://habr.com/ru/post/zh-CN432134/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN432120/index.html">è”æƒ³å°†å› å®‰è£…Superfishæ¶æ„è½¯ä»¶å‘ç¬”è®°æœ¬ç”µè„‘æ‰€æœ‰è€…æ”¯ä»˜830ä¸‡ç¾å…ƒèµ”å¿</a></li>
<li><a href="../zh-CN432122/index.html">LLDBä¸­çš„Xcodeå’Œé«˜çº§è°ƒè¯•ï¼šç¬¬2éƒ¨åˆ†</a></li>
<li><a href="../zh-CN432128/index.html">æ‹æ–ï¼Œçº³å°¼äºšè¯­ï¼Œå¿è€…ä¹‹æ—…ï¼šåˆåˆ›ä¼ä¸šçš„ä¸‰ä¸ªè’‚å§†åˆ©å¾·ç—›è‹¦</a></li>
<li><a href="../zh-CN432130/index.html">åœ¨Tutu.ruåŠå…¬å®¤è¿›è¡Œç§»åŠ¨å¼€å‘çš„ç§‹å­£æŠ€å·§</a></li>
<li><a href="../zh-CN432132/index.html">èå£«æ¯”äºšï¼ˆWilliam Shakespeareï¼‰ï¼šå°†åå››è¡Œè¯—ç¿»è¯‘æˆä¿„è¯­å¾ˆå›°éš¾</a></li>
<li><a href="../zh-CN432136/index.html">å†·å´æ•°æ®ä¸­å¿ƒä¸­çš„CPU-3Dæ¿€å…‰æ‰“å°å°†æœ‰å¸®åŠ©</a></li>
<li><a href="../zh-CN432138/index.html">è®©æˆ‘ä»¬è°ˆè°ˆæŒ‡æ ‡ï¼Œä½œä¸ºè¯„ä¼°ç¨‹åºå‘˜å·¥ä½œçš„ä¸€ç§æ–¹å¼</a></li>
<li><a href="../zh-CN432142/index.html">èœ‚ç®±ç›‘æ§å’Œå¼€æ”¾é¡¹ç›®</a></li>
<li><a href="../zh-CN432144/index.html">æˆ‘ä»¬å¦‚ä½•é€šè¿‡1Cåœ¨æ¬§æ´²çš„SAPå•†åº—ä¸åœ¨ä¿„ç½—æ–¯çš„æ”¶é“¶å°è¿›è¡Œé›†æˆ</a></li>
<li><a href="../zh-CN432146/index.html">Zimbraåä½œå¥—ä»¶å¯ä½œä¸ºMicrosoft Exchangeçš„æœ‰ä»·å€¼çš„æ›¿ä»£å“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>