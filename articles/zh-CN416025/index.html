<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤛🏾 🈶 🏛️ 使用导航架构组件在Android应用程序中实现导航 🤴🏾 🍛 🛬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="来自翻译 


 你好，哈伯昌。 这是针对Android开发人员的新导航技术的文档文章的翻译。 该技术目前正在开发中，但已经可以使用，甚至可以在Android Studio 3.2及更高版本的预览版中使用。 我已经在行动中尝试过了，可以说她给我留下了深刻的印象。 最后，切换屏幕已不再是一件复杂的事情...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用导航架构组件在Android应用程序中实现导航</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416025/"><p><img src="https://habrastorage.org/getpro/habr/post_images/8ec/c41/70b/8ecc4170bfd6552b7968c13c329ce53d.png" alt="图片"></p><br><h2 id="ot-perevodchika"> 来自翻译 </h2><br><p> 你好，哈伯昌。 这是针对Android开发人员的新导航技术<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的文档文章</a>的翻译。 该技术目前正在开发中，但已经可以使用，甚至可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Android Studio 3.2</a>及更高版本的预览版中使用。 我已经在行动中尝试过了，可以说她给我留下了深刻的印象。 最后，切换屏幕已不再是一件复杂的事情，特别是如果使用了从一个屏幕到另一个屏幕的数据传输。 实际上，我正在做翻译，以便让更多说俄语的开发人员关注该技术，并简化其研究。 <br> 如果发现重大错误或不正确，请在评论中报告。 </p><a name="habracut"></a><br><h2 id="arhitekturnyy-komponent"> 建筑组成 </h2><br><p> 导航体系结构组件使在应用程序中的<em>目标</em>之间轻松实现导航成为可能。 默认情况下，导航支持将片段和活动作为目标屏幕，但是您也可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">添加对新型目标屏幕的支持</a> 。 目标屏幕集称为应用程序的<em>导航图</em> 。 </p><br><p> 除了导航图上的目标屏幕外，它们之间还有称为<em>action的</em>连接。 图1展示了导航图的直观表示，该图简单地应用了由五个动作连接的六个目标屏幕。 </p><br><p><img src="https://habrastorage.org/webt/lw/h9/j3/lwh9j3ga7cbk_w9cx1k4bc6pa5w.png"><br>  <strong>图1.</strong>导航图 </p><br><p> 导航的体系结构组件是根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">导航原理</a>来实现的。 </p><br><blockquote> 如果要在Android Studio中使用导航的体系结构组件，则需要<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Android Studio 3.2 Canary 14</a>或更高版本。 </blockquote><br><h2 id="nastroyka-proekta-s-podderzhkoy-navigation"> 使用导航支持设置项目 </h2><br><p> 在创建导航图之前，您需要为项目配置导航。 为此，请按照下列步骤操作。 </p><br><ol><li><p> 在build.gradle文件中添加导航支持（模块：app- <em>Translator Note</em> ）。 有关更多信息，请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">将组件添加到您的项目</a> 。 <br>  <em>注意事项</em>  <em>译者：最好不要偷懒并遵循上面的链接，因为该项目正在积极开发中，并且依赖关系肯定会发生变化：</em> </p><br><pre><code class="hljs perl">dependencies { def nav_version = <span class="hljs-string"><span class="hljs-string">"1.0.0-alpha05"</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> -ktx <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Kotlin implementation <span class="hljs-string"><span class="hljs-string">"android.arch.navigation:navigation-fragment:$nav_version"</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> -ktx <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Kotlin implementation <span class="hljs-string"><span class="hljs-string">"android.arch.navigation:navigation-ui:$nav_version"</span></span> // optional - Test helpers // <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> -ktx <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Kotlin androidTestImplementation <span class="hljs-string"><span class="hljs-string">"android.arch.navigation:navigation-testing:$nav_version"</span></span> }</code> </pre> <br></li><li> 在项目窗口中，右键单击<strong>res</strong>文件夹，然后选择“ <strong>新建”&gt;“ Android资源文件”</strong> 。 <br> 将打开“ <strong>新资源”</strong>对话框。 </li><li> 输入文件名，例如“ <strong>nav_graph</strong> ”。 </li><li> 从<strong>资源类型</strong>下拉列表中选择<strong>导航</strong> 。 </li><li> 单击<strong>确定</strong> 。 将会发生以下情况： <br><ul><li>  <strong>导航</strong>子目录出现在<strong>res</strong>目录中。 </li><li>  <strong>nav_graph.xml</strong>文件出现在导航目录中。 </li><li>  <strong>nav_graph.xml</strong>文件在导航编辑器中打开。 该文件包含您的导航图。 </li></ul></li><li> 选择编辑模式<strong>文本</strong> 。 空的导航图的XML文件如下所示： <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li><li> 选择<strong>设计</strong>编辑模式以返回到导航编辑器。 <br>  <em>注意事项</em>  <em>转换器：如果导航编辑器未显示图形，请检查以黄色突出显示的下一个段落的开头。</em> </li></ol><br><h2 id="obzor-navigation-editor"> 导航编辑器概述 </h2><br><blockquote> 默认情况下，导航编辑器仅在Android Studio的Canary版本中可用。 要在Beta版本，候选版本或稳定版本中使用导航编辑器，请转到<strong>文件&gt;设置</strong> （对于Mac， <strong>Android Studio&gt;首选项</strong> ），选择<strong>实验</strong>类别，选中<strong>启用导航编辑器</strong>复选框，然后重新启动Android Studio。 <br>  <em>注意事项</em>  <em>译者：我建议无论装配如何，都要检查此复选框是否值得。</em> </blockquote><p> 在导航编辑器中，您可以快速创建导航图，而不必编写XML。 如图2所示，导航编辑器包含三个部分： </p><br><p><img src="https://habrastorage.org/webt/s-/by/2b/s-by2b8djd4opzxc1oe-1ljtssa.png"><br>  <strong>图2.</strong>导航编辑器 </p><br><p> 章节说明： </p><br><ol><li> 目标屏幕列表-显示添加到图形的所有目标屏幕 </li><li> 图形编辑器-包含图形的直观表示 </li><li> 属性编辑器-包含目标屏幕的属性和操作。 </li></ol><br><h2 id="opredelenie-ekranov-naznacheniya"> 定义目标屏幕 </h2><br><p> 创建导航图的第一步是为应用程序定义目标屏幕。 您可以创建一个空白的分配屏幕，也可以使用当前项目中的片段和活动。 </p><br><blockquote>  Navigation的体系结构组件是为具有一个主要活动（Main Activity- <em>Translator's Note</em> ）的应用程序设计的，该活动具有许多用作目标屏幕的片段。 主要活动是导航图的“主机”。 在具有许多活动的应用程序中，每个活动都是不同导航图的宿主。 在文档的后面<strong>部分</strong>将介绍如何<strong>将活动转换为导航图的主机</strong> 。 </blockquote><p> 若要确定您的应用程序的目标屏幕，请按照下列步骤。 </p><br><ol><li> 在图形编辑器中，单击“ <strong>新建目标”</strong> <img src="https://habrastorage.org/webt/st/pa/rm/stparmwuvr9w4wtmf_qt_veidjq.png">  。 将打开“ <strong>新目标”</strong>对话框。 </li><li> 单击<strong>创建空白目标</strong>或选择现有的片段或活动。 将打开“ <strong>Android组件”</strong>对话框。 </li><li> 在“ <strong>片段名称”</strong>字段中输入<strong>名称</strong> 。 它必须与该片段的类名匹配。 </li><li> 在“ <strong>片段布局名称”</strong>字段中输入<strong>名称</strong> 。 该名称将分配给布局片段文件。 </li><li> 点击<em>完成</em> 。 在目标屏幕列表中会出现一条带有新目标屏幕名称的行，并且目标屏幕本身会出现在图形编辑器中。 更详细地： <br><ul><li> 图形编辑器显示目标屏幕的预览。 如果创建了空白目标屏幕，则新片段将包含题词“ Hello blank fragment”，并且在图形编辑器中将看到相同的题词。 如果选择现有片段或活动，则图形将显示其微型版本。 </li><li> 如果创建了空白的目标屏幕，则会为其生成一个类。 类名将与步骤3中指定的名称匹配。 </li><li> 如果创建了空白的目标屏幕，将为其生成一个布局文件。 文件名将与步骤4中指定的名称匹配。 <br> 图3显示了空白的现有目标屏幕。 <br><img src="https://habrastorage.org/webt/q_/c-/bb/q_c-bbcbogtwe5l9upgbzhh-tzi.png"><br>  <strong>图3.</strong>新的和现有的目标屏幕。 </li></ul></li><li> 单击新创建的目标屏幕以将其选中。 属性面板包含以下属性： <br><ul><li> 可以将“类型”字段设置为“片段”或“活动”，以显示如何在源代码中实现目标屏幕：作为片段还是作为活动。 </li><li> 标签字段包含目标屏幕文件的XML名称。 </li><li>  ID字段包含目标屏幕的ID（作为独立实体- <em>译者注</em> ），用于在源代码中引用它（通过R.id-译者<em>注</em> ）。 </li><li>  “类别”字段包含目标屏幕的类别名称（带有所有软件包的指示- <em>注意翻译器</em> ）。 </li></ul></li><li> 切换到<strong>文本</strong>编辑模式以切换到查看XML。  XML现在包含属性id，名称（类名），标签和布局，这些属性显示现有类和布局文件的名称： </li></ol><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:startDestination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/blankFragment"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/blankFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.BlankFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Blank"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_blank"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><blockquote>  XML包含<strong>startDestination</strong>属性，该属性包含空目标屏幕的ID（ <strong>应用程序：startDestination =“ @ + id / fragment”</strong> ）。 有关目标启动屏幕的更多信息，请参阅“目标<strong>启动屏幕”</strong>部分。 </blockquote><br><h2 id="soedinenie-ekranov-naznacheniya"> 连接目标画面 </h2><br><p> 您的应用程序必须具有多个目标屏幕才能连接它们。 下面介绍带有两个空白目标屏幕的导航图的XML： </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:startDestination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/blankFragment"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/blankFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.BlankFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_blank"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_blank"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/blankFragment2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.BlankFragment2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Blank2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_blank_fragment2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> 使用操作连接目标屏幕。 要连接两个目标屏幕，您需要： </p><br><ol><li> 在图形编辑器中，将鼠标悬停在要从其进行过渡的目标屏幕上。 一个圆圈将出现在其上。 <br><img src="https://habrastorage.org/webt/68/jp/38/68jp38geimu5izfasgm_ssdhc_a.png"><br>  <strong>图4.</strong>动作连接圈 </li><li> 单击圆圈并按住鼠标按钮。 将光标移动到要转换到的目标屏幕。 放手 两个目标屏幕之间会出现一个箭头，指示它们之间的转换。 <br><img src="https://habrastorage.org/webt/pa/hs/kt/pahsktf-tyg6kswwwt751zzql7o.png"><br>  <strong>图5.</strong>连接的目标屏幕 </li><li> 单击箭头以突出显示操作。 在属性面板中显示以下内容： <br><ul><li> 类型字段包含“操作”。 </li><li>  ID字段包含自动生成的操作ID。 </li><li>  Destination字段包含过渡到的目标屏幕的ID。 </li></ul></li><li> 切换到<strong>文本</strong>编辑模式以查看XML。 动作标签已添加到父目标屏幕。 该操作具有生成的ID和包含下一个目标屏幕的ID的属性。 </li></ol><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:startDestination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/blankFragment"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/blankFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.BlankFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_blank"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_blank"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/action_blankFragment_to_blankFragment2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:destination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/blankFragment2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/blankFragment2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.BlankFragment2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_blank_fragment2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_blank_fragment2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2 id="oboznachenie-ekrana-naznacheniya-v-kachestve-startovogo"> 将目标屏幕指定为开始屏幕 </h2><br><p> 图形编辑器显示房屋图标 <img src="https://habrastorage.org/webt/-d/vs/mh/-dvsmhne8qiq6ey3-b_ruiluiia.png"> 在第一个目标屏幕的名称之后。 此图标表示目标屏幕是导航图中的开始屏幕。 您可以按照以下步骤选择其他目标屏幕作为开始屏幕： </p><br><ul><li> 在图形编辑器中突出显示所需的目标屏幕。 </li><li> 单击属性栏上的“ <strong>设置开始目标</strong> ”。 现在，此目标屏幕是开始屏幕。  <em>注意事项</em>  <em>转换器：您也可以在所需的目标屏幕上单击人民币，然后在打开的菜单中选择一个类似的项目。</em> </li></ul><br><h2 id="prevraschenie-aktivnosti-v-host-dlya-navigacionnogo-grafa"> 将活动变成导航图的主机 </h2><br><p> 由于将空<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavHost</a>元素添加到活动布局，因此活动成为导航图的主机。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavHost</a>是一个元素，该元素的存在允许您按应用程序用户所需的顺序更改目标屏幕。 </p><br><p> 导航中的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavHost</a>默认情况下实现<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavHostFragment</a> 。 </p><br><p> 添加NavHost之后，必须使用<strong>app：navGraph属性</strong>将其映射到导航图。 这段代码演示了如何在布局中包括NavHostFragment并将其连接到导航图： </p><br><pre> <code class="xml hljs">?xml version="1.0" encoding="utf-8"?&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.constraint.ConstraintLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".MainActivity"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/my_nav_host_fragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"androidx.navigation.fragment.NavHostFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:navGraph</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@navigation/nav_graph"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:defaultNavHost</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.constraint.ConstraintLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> 此示例包含<strong>app</strong>属性<strong>：defaultNavHost =“ true”</strong> 。 他负责拦截系统按钮“后退”（ <em>注意翻译：系统按钮“后退”和应用程序顶部面板上的“向上”箭头的工作方式相同</em> ）。 您还可以覆盖<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AppCompatActivity.onSupportNavigateUp（）</a>并调用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavController.navigateUp（）</a> ，如下所示： </p><br><div class="spoiler">  <b class="spoiler_title">爪哇</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSupportNavigateUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Navigation.findNavController(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, R.id.nav_host_fragment).navigateUp(); }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">科特林</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSupportNavigateUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = findNavController(R.id.nav_host_fragment).navigateUp()</code> </pre> </div></div><br><h2 id="privyazka-deystviy-k-vidzhetam"> 将动作绑定到小部件 </h2><br><p> 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavController</a>转到目标屏幕。 可以使用重载的静态findNavController（）方法获得它： </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavHostFragment.findNavController（片段）</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Navigation.findNavController（活动，@ IdRes int viewId）</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Navigation.findNavController（查看）</a> </li></ul><br><p> 收到NavController后，使用其navigation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">（）</a>方法转到目标屏幕。  navigation（）方法接受资源ID。 这可以是您要转到的目标屏幕的ID，也可以是操作ID。 使用操作ID代替目标屏幕ID，可以自定义屏幕之间的过渡动​​画。 有关更多信息，请参见<strong>在目标屏幕之间创建动画过渡</strong> 。 </p><br><p> 此代码演示了如何将操作绑定到按钮： </p><br><div class="spoiler">  <b class="spoiler_title">爪哇</b> <div class="spoiler_text"><pre> <code class="java hljs">viewTransactionsButton.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ Navigation.findNavController(view).navigate(R.id.viewTransactionsAction); } });</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">科特林</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">viewTransactionsButton.setOnClickListener { <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.findNavController().navigate(R.id.viewTransactionsAction) }</code> </pre> </div></div><br><p>  Android支持可存储最后打开的目标屏幕的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">后向堆栈</a> 。 用户启动应用程序时，第一个目标屏幕被推入堆栈。 每次对navigation（）方法的调用都会将一个新的目标屏幕推送到堆栈上。 按下Back或Up按钮将调用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavController.navigateUp（）</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavController.popBackStack（）</a>方法，以从堆栈中提取目标屏幕。 </p><br><p> 对于按钮，还可以使用便捷的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Navigation.createNavigateOnClickListener（）</a>方法： </p><br><div class="spoiler">  <b class="spoiler_title">爪哇</b> <div class="spoiler_text"><pre> <code class="java hljs">button.setOnClickListener(Navigation.createNavigateOnClickListener(R.id.next_fragment, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>));</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">科特林</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">button</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setOnClickListener</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Navigation</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.createNavigateOnClickListener</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">R</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.id</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.next_fragment</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">null</span></span>))</code> </pre> </div></div><br><h2 id="privyazka-deystviy-k-menyu-navigation-drawer"> 将动作绑定到导航抽屉菜单 </h2><br><p> 您可以使用目标屏幕的<strong>ID</strong>作为菜单项（项目）的<strong>ID</strong>将导航操作与“导航抽屉”相关联。 以下代码显示了目标屏幕的示例，其<strong>ID</strong>设置为<strong>details_page_fragment</strong> ： </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/details_page_fragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/details"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.android.myapp.DetailsFragment"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p> 使用与目标屏幕和菜单项相同的<strong>ID</strong> ，将自动链接菜单项和目标屏幕。 此代码演示如何将目标屏幕与菜单项关联（例如，这是<em>menu_nav_drawer.xml</em>文件）： </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/details_page_fragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/ic_details"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/details"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p> 或者这是带有类别（例如<em>menu_overflow.xml</em> ）的菜单的示例： </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/details_page_fragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/ic_details"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/details"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:menuCategory:</span></span></span><span class="hljs-tag">"</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">secondary</span></span></span><span class="hljs-tag">" /&gt;</span></span></code> </pre> <br><p> 另外，导航架构组件包括<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavigationUI</a>类。 此类具有几种静态方法，可用于将菜单项与目标屏幕关联。 例如，此代码显示如何使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">setupWithNavController（）</a>方法将菜单项连接到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavigationView</a> ： </p><br><div class="spoiler">  <b class="spoiler_title">爪哇</b> <div class="spoiler_text"><pre> <code class="java hljs">NavigationView navigationView = (NavigationView) findViewById(R.id.nav_view); NavigationUI.setupWithNavController(navigationView, navController);</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">科特林</b> <div class="spoiler_text"><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> navigationView = findViewById&lt;<span class="hljs-type"><span class="hljs-type">NavigationView</span></span>&gt;(<span class="hljs-type"><span class="hljs-type">R</span></span>.id.nav_view) navigationView.setupWithNavController(navController)</code> </pre> </div></div><br><p> 您需要使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavigationUI</a>方法配置菜单的导航组件，以使它们的状态与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NavController中</a>的更改保持同步。 </p><br><h2 id="peredacha-dannyh-mezhdu-ekranami-naznacheniya"> 在目标屏幕之间传输数据 </h2><br><p> 您可以通过两种方式在目标屏幕之间传输数据：使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Bundle</a>对象或使用safeargs Gradle插件的类型安全方法。 请按照以下步骤使用Bundle对象传输数据。 如果使用的是Gradle，请参阅<strong>以类型安全的方式在目标屏幕之间传输数据</strong>一节。 </p><br><ol><li> 在图形编辑器中，选择应接收数据的目标屏幕。 </li><li> 单击属性面板的“参数”部分中的“ <strong>添加”</strong> （ <strong>+</strong> ）。 将出现一个带有空字段名称（名称），类型（类型）和默认值（默认值）的参数。 </li><li> 输入参数名称。 </li><li> 输入默认值。 </li><li> 突出显示指向目标屏幕的操作（箭头）。 参数默认值部分应包含刚创建的参数。 </li><li> 切换到<strong>文本</strong>编辑模式以查看XML。 参数标签已添加到目标屏幕，其中包含name和defaultValues属性。 </li><li> 在源代码中，创建一个捆绑包，然后使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">navigation（）</a>方法将其传递到目标屏幕： </li></ol><br><div class="spoiler">  <b class="spoiler_title">爪哇</b> <div class="spoiler_text"><pre> <code class="java hljs">Bundle bundle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bundle(); bundle.putString(<span class="hljs-string"><span class="hljs-string">"amount"</span></span>, amount); Navigation.findNavController(view).navigate(R.id.confirmationAction, bundle);</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">科特林</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">var bundle = bundleOf("amount" <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> amount) <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.findNavController().navigate(R.id.confirmationAction, bundle)</code> </pre> </div></div><br><p> 在数据传输到的目标屏幕中，使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">getArguments（）</a>方法获取捆绑包并使用其内容： </p><br><div class="spoiler">  <b class="spoiler_title">爪哇</b> <div class="spoiler_text"><pre> <code class="java hljs">TextView tv = view.findViewById(R.id.textViewAmount); tv.setText(getArguments().getString(<span class="hljs-string"><span class="hljs-string">"amount"</span></span>));</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">科特林</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">val tv = <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.findViewById(R.id.textViewAmount) tv.text = arguments.getString("amount")</code> </pre> </div></div><br><h2 id="peredacha-dannyh-mezhdu-ekranami-naznacheniya-type-safe-sposobom"> 以类型安全的方式在目标屏幕之间传输数据 </h2><br><p> 导航体系结构组件具有一个称为<strong>safeargs</strong>的Gradle插件。 它生成最简单的类，以便对目标屏幕和操作屏幕的参数进行类型安全的访问。  safeargs方法是基于Bundle的使用，但是需要一些额外的代码以提高示例安全性。 要添加此插件，请在<em>build.gradle</em>中插入<em>androidx.navigation.safeargs</em>行（在Module：app- <em>Translator</em> comment中）。 例如，像这样： </p><br><pre> <code class="xml hljs">apply plugin: 'com.android.application' apply plugin: 'androidx.navigation.safeargs' android { //... }</code> </pre> <br><p>  <em>注意事项</em>  <em>转换器：另外，将依赖项类路径“ android.arch.navigation：navigation-safe-args-gradle-plugin：1.0.0-alpha02”添加到build.gradle（项目：ProjectName）：</em> </p><br><pre> <code class="xml hljs">buildscript { repositories { google() } dependencies { classpath "android.arch.navigation:navigation-safe-args-gradle-plugin:1.0.0-alpha02" } }</code> </pre> <br><p> 安装插件后，请按照以下步骤使用类型安全的数据传输： </p><br><ol><li> 在图形编辑器中，突出显示要将数据传输到的目标屏幕。 </li><li> 在属性面板的“参数”部分中单击+。 属性显示为空字段。 </li><li> 输入参数名称。 </li><li> 选择一个参数类型。 </li><li> 输入默认值。 </li><li> 突出显示目标屏幕之前的操作。 参数默认值部分应包含刚创建的参数。 </li><li> 单击文本进入XML编辑模式。 </li></ol><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/confirmationFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.buybuddy.buybuddy.ConfirmationFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_confirmation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_confirmation"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amount"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:defaultValue</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"integer"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> 在safeargs插件生成代码之后（ <em>即，在创建类型</em>为-Translator <em>'s Note的参数之后</em> ），还为发送屏幕和接收屏幕生成了类。 <br>  <em>注意事项</em>  <em>转换器：创建自变量后，我必须单击“与Gradle文件同步项目”按钮，以便生成类。</em> </p><br><ul><li><p> 发送者屏幕类别与原始名称相同，在末尾添加了单词Directions。 <br> 也就是说，如果您具有FirstFragment目标屏幕，则生成的类称为FirstFragmentDirections。 此类有一个方法（！），其名称与传递该参数的操作的ID匹配。 也就是说，如果您的FirstFragment屏幕将参数传递给SecondFragment屏幕，并且如果将连接它们的动作称为action_first_to_second，则这是所需的FirstFragmentDirections.action_first_to_second（）方法。 </p><br></li><li><p>  sender类还包含一个子类，该子类是上述方法的返回类型。 也就是说，在我们的情况下，action_first_to_second（）方法的返回类型将为Action_first_to_second。 </p><br></li><li><p> 收件人类的名称与原始名称相同，并在末尾添加了Args一词。 对于我们的示例，SecondFragment是主机，因此将为其生成SecondFragmentArgs类。 此类具有fromBundle（）方法来获取参数。 </p><br></li></ul><br><p>  <em>注意事项</em>  <em>译者：现在一切都会变得更加清晰。</em>  <em>与原始代码相比，我对代码进行了一些修改。</em>  <em>所做的更改仅涉及名称，每个名称可以是单独的。</em>  <em>这是为了易于理解。</em>  <em>在这里，名称myArgument用作参数名称，其类型为String。</em> </p><br><p> 这段代码演示了如何使用safeargs通过navigation（）方法传递参数： </p><br><div class="spoiler">  <b class="spoiler_title">爪哇</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ FirstFragmentDirections.Action_first_to_second action = FirstFragmentDirections.action_first_to_second(); action.setMyArgument(<span class="hljs-string"><span class="hljs-string">"My argument value"</span></span>); Navigation.findNavController(view).navigate(action); }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">科特林</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">View</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> action = FirstFragmentDirections.action_first_to_second action.myArgument = <span class="hljs-string"><span class="hljs-string">"My argument value"</span></span> v.findNavController().navigate(action) }</code> </pre> </div></div><br><p> 这段代码演示了如何使用safeargs提取参数： </p><br><div class="spoiler">  <b class="spoiler_title">爪哇</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onViewCreated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view, @Nullable Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ String myArgument = SecondFragmentArgs.fromBundle(getArguments()).getMyArgument(); }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">科特林</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onViewCreated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(view: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">View</span></span></span></span><span class="hljs-function"><span class="hljs-params">, savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myArgument = SecondFragmentArgs.fromBundle(arguments).myArgument }</code> </pre> </div></div><br><p>  <em>注意事项</em>  <em>译者：我个人真的很喜欢这种传递参数的方法。</em>  <em>不再有私有的静态最终字符串MY_ARGUMENT_KEY =“ MY_ARGUMENT”。</em>  <em>现在设置和检索参数，使用其单独的（！）Getter和setter方法非常方便。</em> </p><br><h2 id="gruppirovka-ekranov-naznacheniya-vo-vlozhennyy-graf"> 将目标屏幕分组为嵌套图 </h2><br><p> 可以将目标屏幕的序列分组为一个子图。 子图称为<strong>“嵌套图”（nested graph）</strong> ，而父<strong>图则称为“根图”（root graph）（root graph）</strong> 。 嵌套图可用于组织应用程序用户界面各部分的重用，例如授权分支（屏幕顺序）。 </p><br><p> 除了根，嵌套图还必须具有开始屏幕。 嵌套图封装了其目标屏幕。 嵌套图外部的屏幕（例如，根图的屏幕）只能访问嵌套图的开始屏幕。 图6显示了一个简单的汇款应用程序的导航图。 该图有两个分支：用于转移资金和查看余额。 </p><br><p><img src="https://habrastorage.org/webt/5d/qz/qh/5dqzqh2likfwx77uxbxewkxffq4.png"><br>  <strong>图6.</strong>汇款应用程序的导航图 </p><br><p> 将目标屏幕分组为嵌套图： </p><br><ol><li> 在图形编辑器中，按住<strong>shift键</strong> ，然后单击要包括在嵌套图形中的屏幕。 每个屏幕都应突出显示。 </li><li> 右键单击其中之一，然后从上下文菜单中选择“ <strong>移至嵌套图”&gt;“新建图</strong> ”。 选定的屏幕变成一个嵌套图。 图7显示了图编辑器中的嵌套图。 <br><img src="https://habrastorage.org/webt/9i/sq/yk/9isqykps5hreveqqnzl6tj8qrqs.png"><br>  <strong>图7.</strong>图形编辑器中的嵌套图形 </li><li> 单击嵌套图以将其选中。 以下属性应出现在属性面板中： <br><ul><li> 类型字段包含一个“嵌套图”。 </li><li>  ID字段包含为嵌套图生成的ID。 </li></ul></li><li> 双击嵌套图。 出现嵌套图的屏幕。 </li><li> 在屏幕列表（左）中，单击“ <strong>根”</strong>以返回到根图。 </li><li>     <strong>Text</strong>   XML.       .        <em>navigation</em> .        <strong>ID</strong>   <em>sendMoneyGraph</em>   <strong>startDestination</strong>   <em>chooseRecipient</em> : <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:startDestination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/mainFragment"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/mainFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.MainFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_main"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_main"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/action_mainFragment_to_ sendMoneyGraph"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:destination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/sendMoneyGraph"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/action_mainFragment_to_viewBalanceFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:destination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/viewBalanceFragment"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/viewBalanceFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.ViewBalanceFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_view_balance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_view_balance"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/sendMoneyGraph"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:startDestination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/chooseRecipient"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/chooseRecipient"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.ChooseRecipient"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_choose_recipient"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_choose_recipient"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/action_chooseRecipient_to_chooseAmountFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:destination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/chooseAmountFragment"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/chooseAmountFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.cashdog.cashdog.ChooseAmountFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_choose_amount"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_choose_amount"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li><li>     ID ,     ,   navigate()      : </li></ol><br><div class="spoiler"> <b class="spoiler_title">Java</b> <div class="spoiler_text"><pre> <code class="java hljs">Navigation.findNavController(view).navigate(R.id.action_mainFragment_to_sendMoneyGraph);</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title">Kotlin</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">view</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.findNavController</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">view</span></span>)<span class="hljs-selector-class"><span class="hljs-selector-class">.navigate</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">R</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.id</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.action_mainFragment_to_sendMoneyGraph</span></span>)</code> </pre> </div></div><br><h2 id="diplinki">  </h2><br><p>  Android,  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">deep link</a> )  URI (,   – <em>. </em> ),    -  .  URI        -  ,       . </p><br><h2 id="sozdanie-diplinka-dlya-ekrana-naznacheniya">      </h2><br><ol><li>        . </li><li>  <strong>+</strong>   Depp Links   .   <strong>Add Deep Link</strong> . </li><li>  URI   URI.  "www.cashdog.com/sendmoney"         ( www.cashdog.com      ,     ). <br>   URI: <br><ul><li>   URI   ,     http  https.  www.cashdog.com   <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://www.cashdog.com</a></em>  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.cashdog.com</a></em> . </li><li>  (placeholders)   {placeholder_name}     .  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://www.example.com/users/{id</a> }</em>  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://www.example.com/users/4</a></em> . </li><li>  . <em>   </em>   0   . </li></ul></li><li>   <strong>Auto Verify</strong>    Google ,   URI  .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> Android App Links</a> . </li><li>  <strong>Add</strong> .   <img src="https://habrastorage.org/webt/iu/tt/cg/iuttcg5meceq3wbgcaxshmt637s.png">      . </li><li>     <strong>Text</strong> .        : <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">deepLink</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:uri</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cashdog.com/sendmoney"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> </li></ol><br><p>     Back,    ,       .  ,     ,             . </p><br><h2 id="razreshenie-ispolzovaniya-diplinkov">    </h2><br><p>      <em>manifest.xml</em>      : </p><br><ul><li>  Android Studio 3.0  3.1,     intent-filter.    ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   </a> . </li><li>  Android Studio 3.2+,      <em>nav-graph</em>  : <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".MainActivity"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav-graph</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@navigation/main_nav"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li></ul><br><p>   ,       . </p><br><h2 id="sozdanie-perehoda-mezhdu-ekranami">     </h2><br><p>   Navigation       ,   " "  " ". <br>  : </p><br><ol><li>   . Navigation  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Property Animation</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">View Animation</a> .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Animation Resources</a> . </li><li>     ,     . </li><li>   Transitions  ,     Enter.     . </li><li>  ,      . </li><li>   Transitions  ,     Exit.     . </li><li>  ,      . </li><li>     <strong>Text</strong> . XML        action.       ,     .    <em>specifyAmountFragment</em> ,    ,      : <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/specifyAmountFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.buybuddy.buybuddy.SpecifyAmountFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fragment_specify_amount"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/fragment_specify_amount"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/confirmationAction"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:destination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/confirmationFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:enterAnim</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@anim/slide_in_right"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:exitAnim</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@anim/slide_out_left"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:popEnterAnim</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@anim/slide_in_left"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:popExitAnim</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@anim/slide_out_right"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li></ol><br><p>    ,      ( <em>enterAnim</em>  <em>exitAnim</em> )     ( <em>popEnterAnim</em>  <em>popExitAnim</em> ). </p><br><h2 id="soobschayte-o-problemah">    </h2><br><p>     -    Navigation Editor,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a> .  ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Report a bug</a> . </p><br><h2 id="chitayte-takzhe"> 另请阅读 </h2><br><p>        Navigation   .       : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Migrate to the Navigation Architecture Component</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Add support for new destination types</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Implement conditional navigation</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Identify a common destination for several UI elements</a> </li></ul><br><h2 id="zaklyuchenie-perevodchika">   </h2><br><p>  ,        ,              ,   .       -       .  ,               .        !        ,      -     (    Android) –   . </p><br><p> UPD:       : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/PrincessYork/android_navigation</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN416025/">https://habr.com/ru/post/zh-CN416025/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN416013/index.html">如何开始投资并节省资金：道琼斯专家指出新手交易者的五个主要错误</a></li>
<li><a href="../zh-CN416017/index.html">我们以Excel为例收集同类群组分析/流量分析</a></li>
<li><a href="../zh-CN416019/index.html">R的开源生态系统解决业务问题的能力如何？</a></li>
<li><a href="../zh-CN416021/index.html">开发您自己的框架和JS程序员的专业成长</a></li>
<li><a href="../zh-CN416023/index.html">正如iOS的昵称Telegram机器人在Swift上写道</a></li>
<li><a href="../zh-CN416027/index.html">苏联HI-FI及其创建者：Hale激情-电子产品150AC-001</a></li>
<li><a href="../zh-CN416029/index.html">液体计算机：捕获石墨烯中的离子</a></li>
<li><a href="../zh-CN416035/index.html">牙科3D扫描仪通过3Dtool闪亮3D自动扫描DS EX（拆箱）</a></li>
<li><a href="../zh-CN416037/index.html">当天启动（2018年4月至6月）</a></li>
<li><a href="../zh-CN416043/index.html">发展中国家越来越多地探索外层空间。</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>