<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛁 😪 👩🏽‍🏭 Grundlagen der C ++ - Vorlage: Funktionsvorlagen 🕍 🙌🏿 🤥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Haftungsausschluss: Der Artikel wurde bereits im Februar gestartet, aber aus von mir abhängigen Gründen nicht fertiggestellt. Das Thema ist sehr umfan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grundlagen der C ++ - Vorlage: Funktionsvorlagen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436880/"><blockquote>  <b>Haftungsausschluss: Der</b> Artikel wurde bereits im Februar gestartet, aber aus von mir abhängigen Gründen nicht fertiggestellt.  Das Thema ist sehr umfangreich und wird daher in abgeschnittener Form veröffentlicht.  Was nicht passte, wird später berücksichtigt. </blockquote><br><img src="https://habrastorage.org/webt/lq/uv/ke/lquvkeaoqxhs8shsvgyfjpkihjw.png"><br><br>  Es ist unmöglich, modernes C ++ zu verstehen, ohne zu wissen, was Programmiermuster sind.  Diese Eigenschaft der Sprache eröffnet vielfältige Möglichkeiten zur Optimierung und Wiederverwendung von Code.  In diesem Artikel werden wir versuchen herauszufinden, was es ist und wie alles funktioniert. <br><br>  Der Mechanismus von Vorlagen in C ++ ermöglicht es uns, das Problem der Vereinheitlichung des Algorithmus für verschiedene Typen zu lösen: Es müssen keine unterschiedlichen Funktionen für Ganzzahl-, Real- oder Benutzertypen geschrieben werden. Es reicht aus, einen verallgemeinerten Algorithmus zu kompilieren, der nicht vom Datentyp abhängig ist und nur auf gemeinsamen Eigenschaften basiert.  Beispielsweise kann der Sortieralgorithmus sowohl mit Ganzzahlen als auch mit Objekten vom Typ "Auto" arbeiten. <br><a name="habracut"></a><br>  Es gibt Funktionsvorlagen und Klassenvorlagen. <br><br>  <i><b>Funktionsvorlagen</b> sind eine allgemeine Beschreibung des Verhaltens von Funktionen, die für Objekte unterschiedlichen Typs aufgerufen werden können.</i>  Mit anderen Worten, eine Funktionsvorlage (Vorlagenfunktion, verallgemeinerte Funktion) ist eine Familie verschiedener Funktionen (oder eine Algorithmusbeschreibung).  In der Beschreibung ähnelt die Funktionsvorlage einer regulären Funktion: Der Unterschied besteht darin, dass einige Elemente nicht definiert sind (Typen, Konstanten) und parametrisiert sind. <br><br>  <i><b>Klassenvorlagen</b> - eine allgemeine Beschreibung eines Benutzertyps, in dem Attribute und Typoperationen parametrisiert werden können.</i>  Sie sind Konstruktionen, mit denen reale Klassen generiert werden können, indem konkrete Argumente anstelle von Parametern eingesetzt werden. <br><br>  Betrachten wir Funktionsvorlagen genauer. <br><br><h3>  Funktionsvorlagen </h3><br><h4>  Wie schreibe ich die erste Vorlagenfunktion? </h4><br>  Betrachten Sie den Fall der Bestimmung des minimalen Elements von zwei.  Bei ganzen Zahlen und reellen Zahlen müssen Sie 2 Funktionen schreiben. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _min(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( a &lt; b){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; } <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> _min(<span class="hljs-keyword"><span class="hljs-keyword">double</span></span> a, <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> b){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( a &lt; b){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; }</code> </pre> <br><blockquote>  Sie können natürlich nur eine Funktion mit gültigen Parametern implementieren, aber zum Verständnis der Muster ist dies schädlich. </blockquote>  Was passiert, wenn die Anwendung kompiliert wird?  Beide Implementierungen der Funktion fallen in den Binärcode der Anwendung, auch wenn sie nicht verwendet werden (da die Compiler jetzt jedoch sehr intelligent sind, können sie nicht verwendeten Code ausschneiden).  Und wenn Sie eine Funktion hinzufügen müssen, die das Minimum von 2 Zeilen definiert (es ist schwer vorstellbar, ohne anzugeben, dass es eine minimale Zeile gibt) ?! <br><br>  In diesem Fall können Sie eine Funktionsvorlage definieren, wenn der Algorithmus für die Typen, mit denen Sie arbeiten müssen, gleich ist.  Das Prinzip wird im allgemeinen Fall wie folgt sein: <br><br><ol><li>  Für einen Typ wird eine Funktionsimplementierung durchgeführt. </li><li>  Die Header-Vorlage &lt;Klassentyp&gt; (oder Vorlage &lt;Typname-Typ&gt;) wird zugewiesen. Dies bedeutet, dass der Algorithmus eine Art abstrakten Typtyp verwendet. </li><li>  Bei der Implementierung der Funktion wird der Typname durch Typ ersetzt. </li></ol><br>  Für die min-Funktion erhalten wir Folgendes: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">min</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">b</span></span></span><span class="hljs-class">){</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( a &lt; b){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; }</code> </pre> <br>  Das Interessanteste ist die Tatsache, dass die min-Funktion beim Kompilieren zwar nicht aufgerufen wird, jedoch nicht im Binärcode erstellt (nicht <i>instanziiert</i> ) wird.  Wenn Sie eine Gruppe von Funktionsaufrufen mit Variablen verschiedener Typen deklarieren, erstellt jeder Compiler basierend auf der Vorlage eine eigene Implementierung. <br><br>  Das Aufrufen einer Vorlagenfunktion entspricht im Allgemeinen dem Aufrufen einer normalen Funktion.  In diesem Fall bestimmt der Compiler anhand des Typs der tatsächlichen Parameter, welcher Typ anstelle von Type verwendet werden soll.  Wenn sich jedoch herausstellt, dass die ersetzten Parameter unterschiedlichen Typs sind, kann der Compiler die Implementierung der Vorlage nicht ausgeben (die Vorlage instanziieren).  Im folgenden Code stolpert der Compiler also beim dritten Aufruf, da er nicht bestimmen kann, um welchen Typ es sich handelt (überlegen Sie, warum?): <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; template&lt;class Type&gt; Type _min(Type a, Type b) { if (a &lt; b) { return a; } return b; } int main(int argc, char** argv) { std::cout &lt;&lt; _min(1, 2) &lt;&lt; std::endl; std::cout &lt;&lt; _min(3.1, 1.2) &lt;&lt; std::endl; std::cout &lt;&lt; _min(5, 2.1) &lt;&lt; std::endl; // oops! return 0; }</span></span></span></span></code> </pre> <br>  Dieses Problem wird gelöst, indem beim Aufrufen der Funktion ein bestimmter Typ angegeben wird. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; template&lt;class Type&gt; Type _min(Type a, Type b) { if (a &lt; b) { return a; } return b; } int main(int argc, char** argv) { std::cout &lt;&lt; _min&lt;double&gt;(5, 2.1) &lt;&lt; std::endl; return 0; }</span></span></span></span></code> </pre> <br><h4>  Wann funktioniert die Vorlagenfunktion (nicht)? </h4><br>  Im Prinzip können Sie verstehen, dass der Compiler einfach den gewünschten Typ in der Vorlage ersetzt.  Aber wird die resultierende Funktion immer funktionsfähig sein?  Offensichtlich nicht.  Jeder Algorithmus kann unabhängig vom Datentyp definiert werden, verwendet jedoch unbedingt die Eigenschaften dieser Daten.  Bei der Vorlagenfunktion _min ist dies eine Voraussetzung, um einen Bestelloperator (Operator &lt;) zu definieren. <br><br>  <i>Jede Funktionsvorlage setzt abhängig von der Implementierung das Vorhandensein bestimmter Eigenschaften eines parametrisierten Typs voraus (z. B. einen Kopieroperator, einen Vergleichsoperator, das Vorhandensein einer bestimmten Methode usw.).</i>  <i>Im erwarteten C ++ - Sprachstandard sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konzepte</a> dafür verantwortlich.</i> <br><br><h4>  Überlastung der Funktionsvorlage </h4><br>  Funktionsvorlagen können auch überladen werden.  Normalerweise wird diese Überlastung ausgeführt, wenn <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class">* _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">min</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">b</span></span></span><span class="hljs-class">){</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(*a &lt; *b){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; }</code> </pre> <br><h4>  Sonderfälle </h4><br>  In einigen Fällen ist die Funktionsvorlage für einen bestimmten Typ unwirksam oder falsch.  In diesem Fall können Sie <i>die</i> Vorlage <i>spezialisieren</i> , dh eine Implementierung für diesen Typ schreiben.  Im Fall von Zeichenfolgen möchten Sie möglicherweise, dass die Funktion nur die Anzahl der Zeichen vergleicht.  Bei einer Spezialisierung der Funktionsvorlage wird im Parameter nicht der Typ angegeben, für den die Vorlage angegeben ist.  Das Folgende ist ein Beispiel für diese Spezialisierung. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> _min(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> a, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> b){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a.size() &lt; b.size()){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; }</code> </pre> <br>  Die Spezialisierung der Vorlage auf bestimmte Typen erfolgt aus wirtschaftlichen Gründen erneut: Wenn diese Version der Funktionsvorlage nicht im Code verwendet wird, wird sie nicht in den Binärcode aufgenommen. <br><blockquote>  Für die Zukunft bleiben mehrere und ganzzahlige Parameter erhalten.  Eine natürliche Erweiterung sind die Klassenvorlagen, die Grundlagen der generativen Programmierung und das Design der C ++ - Standardbibliothek.  Und ein paar Beispiele! </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436880/">https://habr.com/ru/post/de436880/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436868/index.html">Betten Sie statische Analysen in den Prozess ein und suchen Sie nicht nach Fehlern</a></li>
<li><a href="../de436872/index.html">PGConf.Russia 2019 kommt bald</a></li>
<li><a href="../de436874/index.html">Neujahrstänze rund um den FC-Adapter oder eine Geschichte darüber, wie weit die Ursachen des Problems von den Symptomen entfernt sind</a></li>
<li><a href="../de436876/index.html">[SAP] SAPUI5 für Dummies Teil 1: Eine vollständige Schritt-für-Schritt-Übung</a></li>
<li><a href="../de436878/index.html">BERT ist ein hochmodernes Sprachmodell für 104 Sprachen. Tutorial zum lokalen Starten von BERT und in Google Colab</a></li>
<li><a href="../de436884/index.html">Wir beherrschen Async / Warten auf ein echtes Beispiel</a></li>
<li><a href="../de436886/index.html">Verwenden von Babel und Webpack zum Einrichten eines React-Projekts von Grund auf neu</a></li>
<li><a href="../de436888/index.html">Geschichte zum Entwerfen einer API</a></li>
<li><a href="../de436890/index.html">React Tutorial Teil 10: Workshop zum Arbeiten mit Komponenteneigenschaften und zum Styling</a></li>
<li><a href="../de436892/index.html">React Tutorial Teil 11: Dynamische Markup-Bildung und die Map-Array-Methode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>