<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ò¶Ô∏è üßòüèΩ üßõüèº S'amuser avec z-index ‚èÆÔ∏è üï¥üèæ üö∞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les √©l√©ments des pages Web sont principalement situ√©s c√¥te √† c√¥te ou les uns sous les autres. Mais parfois, la conception n√©cessite des √©l√©ments qui s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>S'amuser avec z-index</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459374/"><img src="https://habrastorage.org/webt/gw/hr/gr/gwhrgrkb83dfpny3pil--unlo3s.gif" align="left">  Les √©l√©ments des pages Web sont principalement situ√©s c√¥te √† c√¥te ou les uns sous les autres.  Mais parfois, la conception n√©cessite des √©l√©ments qui se chevauchent.  Par exemple, un menu de navigation d√©roulant, des panneaux d'aper√ßu en survol, des banni√®res de cookies inutiles et, bien s√ªr, d'innombrables fen√™tres contextuelles n√©cessitant votre attention imm√©diate. <br><br>  Dans ces situations, le navigateur doit en quelque sorte d√©cider quels √©l√©ments afficher "d'en haut" et quels √©l√©ments conserver en arri√®re-plan, compl√®tement ou partiellement ferm√©s.  Un ensemble relativement complexe de r√®gles dans la norme CSS d√©finit l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ordre de fusion</a> par d√©faut pour chaque √©l√©ment de page (probablement tout dans le monde peut √™tre appel√© ¬´relativement complexe¬ª, mais il est imm√©diatement inqui√©tant que la norme soit livr√©e avec une application sp√©ciale intitul√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Description d√©taill√©e des contextes de fusion¬ª</a> ). <br><br>  Si l'ordre par d√©faut ne convient pas, les d√©veloppeurs ont recours √† la propri√©t√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>z-index</code></a> : elle donne le contr√¥le sur l'axe z virtuel (profondeur), qui traverse conceptuellement la page.  Ainsi, un √©l√©ment avec un <code>z-index</code> sup√©rieur <code>z-index</code> affich√© ¬´plus pr√®s¬ª de l'utilisateur, c'est-√†-dire qu'il est dessin√© au-dessus des √©l√©ments avec des indices inf√©rieurs. <br><a name="habracut"></a><br>  Une propri√©t√© int√©ressante de l'axe <code>z</code> est qu'il n'a pas de fronti√®res naturelles.  Les axes horizontal et vertical sont g√©n√©ralement limit√©s par la taille attendue de l'affichage.  Nous ne nous attendons pas √† ce que des √©l√©ments soient pouss√©s √† ¬´1 000 000 pixels √† gauche¬ª ou ¬´-3 000em en haut¬ª: ils deviendront soit invisibles, soit provoqueront un d√©filement d√©sagr√©able.  (√Ä moins que vous ne lisiez cet article √† une √©poque o√π les √©crans font des millions de pixels de large. Si c'est le cas, je vous invite √† arr√™ter de lire et √† d√©marrer un projet de page Web de plusieurs milliards de dollars). <br><br>  Mais les valeurs de l' <code>z-index</code> sont sans dimension et n'ont d'importance qu'en termes relatifs: une page avec deux √©l√©ments sera identique si les indices <code>z</code> sont <code>1</code> et <code>2</code> ou <code>‚àí10</code> et <code>999</code> .  Combin√© avec le fait que les pages sont souvent assembl√©es √† partir de composants con√ßus isol√©ment, cela conduit √† l'art curieux de s√©lectionner les z-index appropri√©s. <br><br>  Comment vous assurer que votre pop-up ennuyeux appara√Æt exactement au-dessus de tous les √©l√©ments de la page si vous ne savez pas combien il y en a, qui les a √©crits et combien <i>ils</i> voulaient √™tre au sommet?  C'est alors que vous mettez votre z-index √† 100, ou peut-√™tre 999, ou peut-√™tre juste au cas o√π, √† 99999 pour vous assurer que le v√¥tre gagnera d√©finitivement. <br><br>  C'est du moins ainsi que j'√©cris mon CSS.  Dans le reste de cet article, nous examinerons des millions d'indices z et verrons ce que font les autres d√©veloppeurs Web. <br><br><h1>  R√©cup√©ration de donn√©es </h1><br>  La premi√®re √©tape a √©t√© de collecter un grand ensemble de valeurs d'index z √† partir des pages Web existantes.  Pour ce faire, je me suis tourn√© vers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Common Crawl</a> , un r√©f√©rentiel public, tr√®s grand et merveilleux de pages Internet.  Les donn√©es sont h√©berg√©es sur S3, vous pouvez donc les demander assez efficacement √† partir d'un cluster AWS.  Heureusement, il existe plusieurs didacticiels sur Internet qui montrent comment proc√©der. <br><br>  Mon extracteur d'index z sophistiqu√© implique de rechercher sur chaque page toutes les correspondances de l'expression r√©guli√®re suivante: <br><br><pre> <code class="plaintext hljs">re.compile(b'z-index *: *(-?[0-9]+|auto|inherit|initial|unset)')</code> </pre> <br>  Une fois les valeurs d√©termin√©es, la t√¢che de r√©duction de carte standard reste pour le nombre d'occurrences.  Heureusement, je ne suis pas le premier √† vouloir compter les occurrences de toutes sortes de choses dans l'√©chantillon, et cela a suffi pour adapter l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un des nombreux exemples</a> .  (Presque tout mon code personnel est une expression r√©guli√®re en haut). <br><br>  Gr√¢ce √† un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article de blog tr√®s d√©taill√©,</a> j'ai pu d√©ployer le code sur le cluster <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Elastic Map Reduce</a> , et j'ai commenc√© √† scanner l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archive de page pour mars 2019</a> .  Cette archive particuli√®re est divis√©e en 56 000 parties, dont j'ai s√©lectionn√© au hasard 2 500, soit environ 4,4%.  Ce nombre n'a rien de sp√©cial, sauf qu'il se traduit en gros par le prix que j'√©tais pr√™t √† investir dans cette exp√©rience.  Apr√®s une nuit terrible dans l'espoir de ne pas avoir fait les pr√©visions correctement, j'ai obtenu des r√©sultats extraits de 112,7 millions de pages.  (Je dois souligner que ce sont toutes des pages HTML. Je ne me suis pas trop pench√© sur cette question, mais Common Crawl ne semble pas indexer les feuilles de style externes, et par cons√©quent, j'extraye uniquement les valeurs de CSS en ligne. Je vais le laisser comme un exercice pour le lecteur de d√©terminer si la distribution r√©sultante correspond √† ce que vous obtenez des feuilles de style externes). <br><br><h1>  Les valeurs les plus courantes </h1><br>  Mon analyse a donn√© un total d'environ 176,5 millions de valeurs d'index z, dont 36,2 mille sont uniques. <br><br>  Quels sont donc les plus courants? <br><br>  La figure montre les 50 premiers.  Notez que l'axe <i>y</i> est logarithmique et montre les fr√©quences relatives.  Par exemple, la valeur la plus courante de 1 correspond √† 14,6% de toutes les occurrences trouv√©es dans l'√©chantillon.  En g√©n√©ral, le top 50 repr√©sente environ 80% des valeurs collect√©es. <br><br><img src="https://habrastorage.org/webt/ql/zx/is/qlzxisrudeqtkxjdpm7opfq5fxe.png"><br><br>  La premi√®re observation est que les valeurs positives dominent.  Le seul √©l√©ment n√©gatif dans le top 50 est <code>‚àí1</code> (le deuxi√®me <code>‚àí2</code> le plus courant prend la 70e place).  Cela nous dit peut-√™tre que les gens sont g√©n√©ralement plus int√©ress√©s √† prendre les choses √† l'√©tage qu'√† les cacher en arri√®re-plan. <br><br>  En r√®gle g√©n√©rale, la plupart des valeurs sup√©rieures ont l'une des propri√©t√©s suivantes: <br><br><ul><li>  Ils sont petits: par exemple, tous les nombres de 0 √† 12 sont dans le top 50. <br></li><li>  Ce sont des degr√©s de dix ou des nombres multiples: 10, 100, 1000, 2000, ... <br></li><li>  Ils sont ¬´proches¬ª de la puissance de dix: 1001, 999, 10001, ... </li></ul><br>  Ces mod√®les sont coh√©rents avec le fait que les gens choisissent de grandes valeurs "famili√®res" (degr√©s de dix), puis, peut-√™tre, pour ajuster la profondeur relative √† l'int√©rieur du composant - les valeurs sont l√©g√®rement sup√©rieures ou inf√©rieures. <br><br>  Il est √©galement int√©ressant de regarder les valeurs les plus courantes qui ne correspondent √† aucun de ces mod√®les: <br><br>  √Ä la 36√®me place, nous voyons 2147483647. De nombreux programmeurs reconnaissent imm√©diatement ce nombre comme <code>INT_MAX</code> , soit 2 <sup>31</sup> -1.  Les gens argumentent probablement comme ceci: puisque c'est la plus grande valeur pour un entier (sign√©), aucun z-index ne sera plus √©lev√©, donc mon √©l√©ment avec l'index INT_MAX sera toujours au sommet.  Cependant, MDN dit ce qui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">suit</a> sur les entiers en CSS: <br><br><blockquote>  Il n'y a pas de plage officielle de valeurs de type <code>&lt;integer&gt;</code> .  Opera 12.1 prend en charge des valeurs allant jusqu'√† 2 <sup>15</sup> -1, IE - jusqu'√† 2 <sup>20</sup> -1, et d'autres navigateurs sont encore plus √©lev√©s.  Tout au long de l'existence des valeurs CSS3, plusieurs discussions ont eu lieu sur l'√©tablissement d'une fourchette minimum support√©e: la derni√®re d√©cision a √©t√© prise en avril 2012 lors de la phase LC, puis la fourchette a √©t√© adopt√©e [-2 <sup>27</sup> -1;  2 <sup>27</sup> -1], mais d'autres valeurs ont √©t√© sugg√©r√©es, telles que 2 <sup>24</sup> -1 et 2 <sup>30</sup> -1.  Cependant, la derni√®re sp√©cification pour le moment n'indique plus la port√©e de ce type de donn√©es. </blockquote><br>  Ainsi, non seulement il n'y a pas de valeur maximale convenue, mais <code>INT_MAX</code> fait hors de port√©e dans chaque sp√©cification ou clause standard document√©e. <br><br>  √Ä la 39e place, nous avons 8675309, dans lequel je n'ai personnellement rien vu de remarquable.  Mais pour plus d'un demi-million de d√©veloppeurs, cela a √©videmment du sens.  Je soup√ßonne que vous reconnaissez instantan√©ment ce nombre ou que vous ne comprenez pas du tout sa signification, selon l'endroit et le moment o√π vous avez grandi.  Je ne donnerai pas de spoilers, la r√©ponse est cach√©e derri√®re une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">seule recherche</a> . <br><br>  Les deux derniers chiffres qui semblaient un peu inappropri√©s sont 1030 et 1050, respectivement aux 42e et 45e places.  Un autre coup d'≈ìil rapide a r√©v√©l√© que ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sont les valeurs</a> par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©faut de l'index z</a> pour les <code>navbar-fixed</code> et <code>modal</code> dans Bootstrap. <br><br><h1>  Distribution des valeurs </h1><br>  Bien que la grande majorit√© de toutes les valeurs d' <code>z-index</code> proviennent d'un petit nombre d'options, il peut √™tre int√©ressant d'examiner la distribution plus large de l'ensemble compil√©.  Par exemple, la figure 2 montre la fr√©quence de toutes les valeurs comprises entre -120 et 260. <br><br><img src="https://habrastorage.org/webt/hs/_k/dc/hs_kdcbfrpc9pv7a4mhgdq0hfm8.png"><br><br>  En plus de la dominance des nombres ronds, nous constatons une qualit√© presque fractale des motifs √† plusieurs niveaux.  Par exemple, le milieu entre deux maxima locaux est souvent lui-m√™me un maximum local (plus petit): il est de 5 entre 1 et 10, 15 entre 10 et 20, 50 entre 1 et 100, etc. <br><br>  Nous pouvons confirmer cet effet sur une plage plus large: la figure suivante montre les fr√©quences de toutes les valeurs de -1200 √† 2600, avec un arrondi √† un module plus petit jusqu'√† dix, c'est-√†-dire que des nombres comme 356 et 359 ont √©t√© compt√©s comme 350. Le graphique est tr√®s similaire au pr√©c√©dent.  Comme vous pouvez le voir, la structure est principalement pr√©serv√©e lorsque l'on consid√®re des valeurs d'un ordre de grandeur plus grand. <br><br><img src="https://habrastorage.org/webt/ab/-k/y0/ab-ky0_xjy1l_onxvw7fonxnaas.png"><br><br>  Enfin, dans la derni√®re illustration, toutes les valeurs d' <code>z-index</code> positives de 1 √† 9999999999 sont regroup√©es par le premier chiffre (axe horizontal) et le nombre de chiffres (axe vertical). <br><br><img src="https://habrastorage.org/webt/tp/yk/q3/tpykq3iqyoitqj-iauuovwwysry.png"><br>  <i><font color="gray">Valeurs d' <code>z-index</code> positives regroup√©es par premier chiffre et nombre de chiffres.</font></i>  <i><font color="gray">Les dimensions sont proportionnelles √† la fr√©quence globale du groupe.</font></i>  <i><font color="gray"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cliquez sur un groupe</a> pour plus d'informations.</font></i> <br><br>  Nous pouvons intuitivement pr√©senter chaque groupe comme un mod√®le de valeurs, par exemple, <code>3xxx</code> pour toutes les valeurs √† quatre chiffres commen√ßant par 3. Chaque groupe est affich√© sous forme de rectangle, dont la taille est proportionnelle √† la fr√©quence du motif.  La figure montre, par exemple, que pour chaque ordre de grandeur, c'est-√†-dire un certain nombre de groupes, les fr√©quences suivent une tendance similaire, et les valeurs √† partir de 1 sont les plus courantes, puis 9, puis 5. <br><br>  La teinte de chaque groupe est √©tablie en fonction de son entropie.  Les groupes jaunes ont l'entropie la plus √©lev√©e, tandis que les groupes bleus ont la plus faible.  Cela aide √† mettre en √©vidence les mod√®les o√π les d√©veloppeurs ont tendance √† choisir les m√™mes valeurs, ou ceux o√π les valeurs sont distribu√©es de mani√®re plus uniforme (notez que l'entropie de l'ensemble de nos donn√©es est de 6,51 bits). <br><br><h1>  Conclusion </h1><br>  Bien qu'il ait √©t√© vraiment int√©ressant de collecter et de rechercher cet ensemble de donn√©es, je suis s√ªr qu'il existe de meilleures statistiques, visualisations et explications en attente de production et de pr√©sentation.  Si vous voulez essayer, n'h√©sitez pas √† t√©l√©charger et √† distribuer le <a href="">fichier z-index-data.csv</a> . <br><br>  Peut-√™tre que vous r√©ussirez l√† o√π j'ai √©chou√© et que vous trouverez un moyen d'inclure dans le graphique la valeur d' <code>z-index</code> la plus √©lev√©e que j'ai trouv√©e, √† savoir 10 <sup>1242</sup> -1. <br><br>  Oui, le nombre 9 est r√©p√©t√© 1242 fois.  J'esp√®re vraiment qu'ils ont enfin pu montrer leur &lt;div&gt; en haut. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459374/">https://habr.com/ru/post/fr459374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459354/index.html">Quelle est la diff√©rence entre un chercheur de donn√©es et un statisticien?</a></li>
<li><a href="../fr459360/index.html">"Les r√©sultats empiriques sont pour la publication seulement, les vrais motifs du travail sont esth√©tiques." Grande interview avec Michael Scott</a></li>
<li><a href="../fr459364/index.html">Comment pr√©dire le comportement des utilisateurs dans l'application</a></li>
<li><a href="../fr459368/index.html">CPaaS intelligent: nouvelles de l'industrie et ce que l'IA / ML lui a donn√©</a></li>
<li><a href="../fr459370/index.html">Arr√™tez d'utiliser RSA</a></li>
<li><a href="../fr459378/index.html">√âcriture d'une API pour les composants React, partie 2: donner des noms au comportement, pas √† l'interaction</a></li>
<li><a href="../fr459380/index.html">√âcriture d'une API pour les composants React, partie 3: l'ordre des accessoires est important</a></li>
<li><a href="../fr459384/index.html">A la question des pleurs diff√©rents ou autres de Yaroslavna</a></li>
<li><a href="../fr459388/index.html">Star Wars: Chevaliers de l'ancienne R√©publique</a></li>
<li><a href="../fr459392/index.html">Repenser le processus d'entrevue √† la division de d√©veloppement de Microsoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>