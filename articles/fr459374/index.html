<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☦️ 🧘🏽 🧛🏼 S'amuser avec z-index ⏮️ 🕴🏾 🚰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les éléments des pages Web sont principalement situés côte à côte ou les uns sous les autres. Mais parfois, la conception nécessite des éléments qui s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>S'amuser avec z-index</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459374/"><img src="https://habrastorage.org/webt/gw/hr/gr/gwhrgrkb83dfpny3pil--unlo3s.gif" align="left">  Les éléments des pages Web sont principalement situés côte à côte ou les uns sous les autres.  Mais parfois, la conception nécessite des éléments qui se chevauchent.  Par exemple, un menu de navigation déroulant, des panneaux d'aperçu en survol, des bannières de cookies inutiles et, bien sûr, d'innombrables fenêtres contextuelles nécessitant votre attention immédiate. <br><br>  Dans ces situations, le navigateur doit en quelque sorte décider quels éléments afficher "d'en haut" et quels éléments conserver en arrière-plan, complètement ou partiellement fermés.  Un ensemble relativement complexe de règles dans la norme CSS définit l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ordre de fusion</a> par défaut pour chaque élément de page (probablement tout dans le monde peut être appelé «relativement complexe», mais il est immédiatement inquiétant que la norme soit livrée avec une application spéciale intitulée <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Description détaillée des contextes de fusion»</a> ). <br><br>  Si l'ordre par défaut ne convient pas, les développeurs ont recours à la propriété <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>z-index</code></a> : elle donne le contrôle sur l'axe z virtuel (profondeur), qui traverse conceptuellement la page.  Ainsi, un élément avec un <code>z-index</code> supérieur <code>z-index</code> affiché «plus près» de l'utilisateur, c'est-à-dire qu'il est dessiné au-dessus des éléments avec des indices inférieurs. <br><a name="habracut"></a><br>  Une propriété intéressante de l'axe <code>z</code> est qu'il n'a pas de frontières naturelles.  Les axes horizontal et vertical sont généralement limités par la taille attendue de l'affichage.  Nous ne nous attendons pas à ce que des éléments soient poussés à «1 000 000 pixels à gauche» ou «-3 000em en haut»: ils deviendront soit invisibles, soit provoqueront un défilement désagréable.  (À moins que vous ne lisiez cet article à une époque où les écrans font des millions de pixels de large. Si c'est le cas, je vous invite à arrêter de lire et à démarrer un projet de page Web de plusieurs milliards de dollars). <br><br>  Mais les valeurs de l' <code>z-index</code> sont sans dimension et n'ont d'importance qu'en termes relatifs: une page avec deux éléments sera identique si les indices <code>z</code> sont <code>1</code> et <code>2</code> ou <code>−10</code> et <code>999</code> .  Combiné avec le fait que les pages sont souvent assemblées à partir de composants conçus isolément, cela conduit à l'art curieux de sélectionner les z-index appropriés. <br><br>  Comment vous assurer que votre pop-up ennuyeux apparaît exactement au-dessus de tous les éléments de la page si vous ne savez pas combien il y en a, qui les a écrits et combien <i>ils</i> voulaient être au sommet?  C'est alors que vous mettez votre z-index à 100, ou peut-être 999, ou peut-être juste au cas où, à 99999 pour vous assurer que le vôtre gagnera définitivement. <br><br>  C'est du moins ainsi que j'écris mon CSS.  Dans le reste de cet article, nous examinerons des millions d'indices z et verrons ce que font les autres développeurs Web. <br><br><h1>  Récupération de données </h1><br>  La première étape a été de collecter un grand ensemble de valeurs d'index z à partir des pages Web existantes.  Pour ce faire, je me suis tourné vers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Common Crawl</a> , un référentiel public, très grand et merveilleux de pages Internet.  Les données sont hébergées sur S3, vous pouvez donc les demander assez efficacement à partir d'un cluster AWS.  Heureusement, il existe plusieurs didacticiels sur Internet qui montrent comment procéder. <br><br>  Mon extracteur d'index z sophistiqué implique de rechercher sur chaque page toutes les correspondances de l'expression régulière suivante: <br><br><pre> <code class="plaintext hljs">re.compile(b'z-index *: *(-?[0-9]+|auto|inherit|initial|unset)')</code> </pre> <br>  Une fois les valeurs déterminées, la tâche de réduction de carte standard reste pour le nombre d'occurrences.  Heureusement, je ne suis pas le premier à vouloir compter les occurrences de toutes sortes de choses dans l'échantillon, et cela a suffi pour adapter l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un des nombreux exemples</a> .  (Presque tout mon code personnel est une expression régulière en haut). <br><br>  Grâce à un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article de blog très détaillé,</a> j'ai pu déployer le code sur le cluster <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Elastic Map Reduce</a> , et j'ai commencé à scanner l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archive de page pour mars 2019</a> .  Cette archive particulière est divisée en 56 000 parties, dont j'ai sélectionné au hasard 2 500, soit environ 4,4%.  Ce nombre n'a rien de spécial, sauf qu'il se traduit en gros par le prix que j'étais prêt à investir dans cette expérience.  Après une nuit terrible dans l'espoir de ne pas avoir fait les prévisions correctement, j'ai obtenu des résultats extraits de 112,7 millions de pages.  (Je dois souligner que ce sont toutes des pages HTML. Je ne me suis pas trop penché sur cette question, mais Common Crawl ne semble pas indexer les feuilles de style externes, et par conséquent, j'extraye uniquement les valeurs de CSS en ligne. Je vais le laisser comme un exercice pour le lecteur de déterminer si la distribution résultante correspond à ce que vous obtenez des feuilles de style externes). <br><br><h1>  Les valeurs les plus courantes </h1><br>  Mon analyse a donné un total d'environ 176,5 millions de valeurs d'index z, dont 36,2 mille sont uniques. <br><br>  Quels sont donc les plus courants? <br><br>  La figure montre les 50 premiers.  Notez que l'axe <i>y</i> est logarithmique et montre les fréquences relatives.  Par exemple, la valeur la plus courante de 1 correspond à 14,6% de toutes les occurrences trouvées dans l'échantillon.  En général, le top 50 représente environ 80% des valeurs collectées. <br><br><img src="https://habrastorage.org/webt/ql/zx/is/qlzxisrudeqtkxjdpm7opfq5fxe.png"><br><br>  La première observation est que les valeurs positives dominent.  Le seul élément négatif dans le top 50 est <code>−1</code> (le deuxième <code>−2</code> le plus courant prend la 70e place).  Cela nous dit peut-être que les gens sont généralement plus intéressés à prendre les choses à l'étage qu'à les cacher en arrière-plan. <br><br>  En règle générale, la plupart des valeurs supérieures ont l'une des propriétés suivantes: <br><br><ul><li>  Ils sont petits: par exemple, tous les nombres de 0 à 12 sont dans le top 50. <br></li><li>  Ce sont des degrés de dix ou des nombres multiples: 10, 100, 1000, 2000, ... <br></li><li>  Ils sont «proches» de la puissance de dix: 1001, 999, 10001, ... </li></ul><br>  Ces modèles sont cohérents avec le fait que les gens choisissent de grandes valeurs "familières" (degrés de dix), puis, peut-être, pour ajuster la profondeur relative à l'intérieur du composant - les valeurs sont légèrement supérieures ou inférieures. <br><br>  Il est également intéressant de regarder les valeurs les plus courantes qui ne correspondent à aucun de ces modèles: <br><br>  À la 36ème place, nous voyons 2147483647. De nombreux programmeurs reconnaissent immédiatement ce nombre comme <code>INT_MAX</code> , soit 2 <sup>31</sup> -1.  Les gens argumentent probablement comme ceci: puisque c'est la plus grande valeur pour un entier (signé), aucun z-index ne sera plus élevé, donc mon élément avec l'index INT_MAX sera toujours au sommet.  Cependant, MDN dit ce qui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">suit</a> sur les entiers en CSS: <br><br><blockquote>  Il n'y a pas de plage officielle de valeurs de type <code>&lt;integer&gt;</code> .  Opera 12.1 prend en charge des valeurs allant jusqu'à 2 <sup>15</sup> -1, IE - jusqu'à 2 <sup>20</sup> -1, et d'autres navigateurs sont encore plus élevés.  Tout au long de l'existence des valeurs CSS3, plusieurs discussions ont eu lieu sur l'établissement d'une fourchette minimum supportée: la dernière décision a été prise en avril 2012 lors de la phase LC, puis la fourchette a été adoptée [-2 <sup>27</sup> -1;  2 <sup>27</sup> -1], mais d'autres valeurs ont été suggérées, telles que 2 <sup>24</sup> -1 et 2 <sup>30</sup> -1.  Cependant, la dernière spécification pour le moment n'indique plus la portée de ce type de données. </blockquote><br>  Ainsi, non seulement il n'y a pas de valeur maximale convenue, mais <code>INT_MAX</code> fait hors de portée dans chaque spécification ou clause standard documentée. <br><br>  À la 39e place, nous avons 8675309, dans lequel je n'ai personnellement rien vu de remarquable.  Mais pour plus d'un demi-million de développeurs, cela a évidemment du sens.  Je soupçonne que vous reconnaissez instantanément ce nombre ou que vous ne comprenez pas du tout sa signification, selon l'endroit et le moment où vous avez grandi.  Je ne donnerai pas de spoilers, la réponse est cachée derrière une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">seule recherche</a> . <br><br>  Les deux derniers chiffres qui semblaient un peu inappropriés sont 1030 et 1050, respectivement aux 42e et 45e places.  Un autre coup d'œil rapide a révélé que ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sont les valeurs</a> par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">défaut de l'index z</a> pour les <code>navbar-fixed</code> et <code>modal</code> dans Bootstrap. <br><br><h1>  Distribution des valeurs </h1><br>  Bien que la grande majorité de toutes les valeurs d' <code>z-index</code> proviennent d'un petit nombre d'options, il peut être intéressant d'examiner la distribution plus large de l'ensemble compilé.  Par exemple, la figure 2 montre la fréquence de toutes les valeurs comprises entre -120 et 260. <br><br><img src="https://habrastorage.org/webt/hs/_k/dc/hs_kdcbfrpc9pv7a4mhgdq0hfm8.png"><br><br>  En plus de la dominance des nombres ronds, nous constatons une qualité presque fractale des motifs à plusieurs niveaux.  Par exemple, le milieu entre deux maxima locaux est souvent lui-même un maximum local (plus petit): il est de 5 entre 1 et 10, 15 entre 10 et 20, 50 entre 1 et 100, etc. <br><br>  Nous pouvons confirmer cet effet sur une plage plus large: la figure suivante montre les fréquences de toutes les valeurs de -1200 à 2600, avec un arrondi à un module plus petit jusqu'à dix, c'est-à-dire que des nombres comme 356 et 359 ont été comptés comme 350. Le graphique est très similaire au précédent.  Comme vous pouvez le voir, la structure est principalement préservée lorsque l'on considère des valeurs d'un ordre de grandeur plus grand. <br><br><img src="https://habrastorage.org/webt/ab/-k/y0/ab-ky0_xjy1l_onxvw7fonxnaas.png"><br><br>  Enfin, dans la dernière illustration, toutes les valeurs d' <code>z-index</code> positives de 1 à 9999999999 sont regroupées par le premier chiffre (axe horizontal) et le nombre de chiffres (axe vertical). <br><br><img src="https://habrastorage.org/webt/tp/yk/q3/tpykq3iqyoitqj-iauuovwwysry.png"><br>  <i><font color="gray">Valeurs d' <code>z-index</code> positives regroupées par premier chiffre et nombre de chiffres.</font></i>  <i><font color="gray">Les dimensions sont proportionnelles à la fréquence globale du groupe.</font></i>  <i><font color="gray"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cliquez sur un groupe</a> pour plus d'informations.</font></i> <br><br>  Nous pouvons intuitivement présenter chaque groupe comme un modèle de valeurs, par exemple, <code>3xxx</code> pour toutes les valeurs à quatre chiffres commençant par 3. Chaque groupe est affiché sous forme de rectangle, dont la taille est proportionnelle à la fréquence du motif.  La figure montre, par exemple, que pour chaque ordre de grandeur, c'est-à-dire un certain nombre de groupes, les fréquences suivent une tendance similaire, et les valeurs à partir de 1 sont les plus courantes, puis 9, puis 5. <br><br>  La teinte de chaque groupe est établie en fonction de son entropie.  Les groupes jaunes ont l'entropie la plus élevée, tandis que les groupes bleus ont la plus faible.  Cela aide à mettre en évidence les modèles où les développeurs ont tendance à choisir les mêmes valeurs, ou ceux où les valeurs sont distribuées de manière plus uniforme (notez que l'entropie de l'ensemble de nos données est de 6,51 bits). <br><br><h1>  Conclusion </h1><br>  Bien qu'il ait été vraiment intéressant de collecter et de rechercher cet ensemble de données, je suis sûr qu'il existe de meilleures statistiques, visualisations et explications en attente de production et de présentation.  Si vous voulez essayer, n'hésitez pas à télécharger et à distribuer le <a href="">fichier z-index-data.csv</a> . <br><br>  Peut-être que vous réussirez là où j'ai échoué et que vous trouverez un moyen d'inclure dans le graphique la valeur d' <code>z-index</code> la plus élevée que j'ai trouvée, à savoir 10 <sup>1242</sup> -1. <br><br>  Oui, le nombre 9 est répété 1242 fois.  J'espère vraiment qu'ils ont enfin pu montrer leur &lt;div&gt; en haut. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459374/">https://habr.com/ru/post/fr459374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459354/index.html">Quelle est la différence entre un chercheur de données et un statisticien?</a></li>
<li><a href="../fr459360/index.html">"Les résultats empiriques sont pour la publication seulement, les vrais motifs du travail sont esthétiques." Grande interview avec Michael Scott</a></li>
<li><a href="../fr459364/index.html">Comment prédire le comportement des utilisateurs dans l'application</a></li>
<li><a href="../fr459368/index.html">CPaaS intelligent: nouvelles de l'industrie et ce que l'IA / ML lui a donné</a></li>
<li><a href="../fr459370/index.html">Arrêtez d'utiliser RSA</a></li>
<li><a href="../fr459378/index.html">Écriture d'une API pour les composants React, partie 2: donner des noms au comportement, pas à l'interaction</a></li>
<li><a href="../fr459380/index.html">Écriture d'une API pour les composants React, partie 3: l'ordre des accessoires est important</a></li>
<li><a href="../fr459384/index.html">A la question des pleurs différents ou autres de Yaroslavna</a></li>
<li><a href="../fr459388/index.html">Star Wars: Chevaliers de l'ancienne République</a></li>
<li><a href="../fr459392/index.html">Repenser le processus d'entrevue à la division de développement de Microsoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>