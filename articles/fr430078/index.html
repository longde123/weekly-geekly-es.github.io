<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛶 🤳🏽 🤷🏻 Comment contrôler les appareils électriques, les modèles radiocommandés, les poussettes motorisées en un coup d'œil 👨‍👩‍👧‍👧 💊 🙏🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans mes articles précédents, j'ai expliqué comment aider les personnes paralysées à communiquer avec le monde extérieur: communiquer leurs désirs, éc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment contrôler les appareils électriques, les modèles radiocommandés, les poussettes motorisées en un coup d'œil</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430078/"><img src="https://habrastorage.org/webt/0c/pu/lz/0cpulz3okxsy9r7qjjbrkoufiww.jpeg"><br><br>  Dans mes articles précédents, j'ai expliqué comment aider les personnes paralysées à communiquer avec le monde extérieur: communiquer leurs désirs, écrire des lettres, surfer sur Internet en utilisant uniquement leurs yeux et un appareil qui suit votre regard (eye tracker).  Dans ce cas, physiquement, une personne reste limitée par le monde de l'ordinateur et du lit. <br><br>  Ici, je vais parler des moyens les plus simples (à mon avis) de changer moi-même quelque chose dans le monde extérieur: allumer la lumière ou une guirlande sur un arbre du Nouvel An, contrôler un véhicule tout-terrain sur une radiocommande, faire avancer un chariot motorisé dans la bonne direction. <br><a name="habracut"></a><br><h3>  Table des matières </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Présentation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Composants requis</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Connectez Arduino à un ordinateur</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Schéma de contrôle de la prise de courant</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Circuit de commande du moteur</a> <br><br><a name="p0"></a><h2>  Présentation </h2><br>  En plus du dispositif de suivi du regard et du logiciel gratuit pour celui-ci, décrit ici dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> article, nous avons besoin de quelque chose qui relie l'ordinateur à des objets externes. <br><br>  Malgré la vente de divers appareils pouvant être contrôlés à partir d'un ordinateur, l'option la plus simple et la moins chère pour moi était d'utiliser deux parties: une carte Arduino et une carte multi-relais. <br><br>  Si vous n'avez jamais rencontré Arduino, n'abandonnez toujours pas la lecture, à l'avenir, vous verrez que dans ce contexte, il est assez simple de travailler avec lui, ce n'est pas pour rien qu'il existe de nombreux designers pour enfants basés sur Arduino à vendre. <br><br>  Dans le même temps, si vous n'êtes pas familier avec la sécurité électrique et n'avez jamais fait de câblage électrique dans la maison, n'essayez pas de répéter les circuits qui utilisent la connexion aux prises! <br><br>  Tout ce que vous devez savoir sur l'Arduino: il s'agit d'un petit appareil qui peut être branché sur le port USB de l'ordinateur, après quoi il peut activer / désactiver les signaux électriques sur ses contacts selon les instructions reçues. <br><br>  Les signaux sont plutôt de faible puissance, par conséquent, pour contrôler quelque chose de plus puissant (ampoules électriques, par exemple), nous avons mis une unité de relais qui, en réponse au signal de l'Arduino, ferme et ouvre les contacts de contrôle des appareils externes.  De plus, les relais isolent les circuits électriques de l'ordinateur Arduino + des circuits électriques de l'appareil géré. <br>  Ainsi, la base des circuits de commande des prises électriques et des moteurs, qui sera décrite plus loin, est la suivante: deux parties reliées par des fils entre elles, reliées par un câble USB à un ordinateur et des fils à ce que nous voulons contrôler: <br><br><img src="https://habrastorage.org/webt/xo/hp/8j/xohp8jg5wedmd0x2v98jdlhatvy.png"><br><br>  Dans le monde réel, cela pourrait ressembler à ceci: <br><br><img src="https://habrastorage.org/webt/bq/5r/yk/bq5ryknx1noe_wserikpat_8d1c.jpeg"><br><br>  Nous envoyons une commande à partir d'un ordinateur, Arduino l'un de ses contacts active / désactive le relais, qui est l'interrupteur de n'importe quel appareil ou un bouton distinct sur l'appareil. <br><br><a name="p1"></a><h2>  Composants requis </h2><br>  Nous en aurons besoin (entre parenthèses sont les prix de 2018 dans un magasin local. Ceux qui peuvent acheter en Chine peuvent économiser beaucoup d'argent, mais perdre du temps): <br><br>  1) Carte Arduino UNO avec un câble USB (c'est possible après-vente, avec CH340 pas cher au lieu de FTDI cher) (450 roubles) <br><br>  2) Une carte à quatre relais fonctionnant sur une tension de 5 volts et capable de contrôler des appareils avec une tension de 220 volts.  (450 roubles).  Il y a encore des cartes fonctionnant sur 12 Volts, ne les mélangez pas! <br><br>  3) Un tas de fils pour connecter deux cartes.  Dans mon cas, des fils avec une prise d'un côté et une broche de l'autre étaient nécessaires, car le bloc de relais a des contacts à broches et Arduino a des prises.  Regardez les connecteurs sur vos cartes lors de l'achat de fils (150 roubles). <br><br><img src="https://habrastorage.org/webt/2a/ma/kf/2amakfyji4k_hbtvozjophg_5hu.jpeg"><br><br><a name="p2"></a><h2>  Connectez Arduino à un ordinateur </h2><br>  Tout d'abord, installez le logiciel de programmation Arduino à partir de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.arduino.cc</a> : <br><br>  Sur la page <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.arduino.cc/en/Main/Software,</a> cliquez sur «Windows Installer»: <br><br><img src="https://habrastorage.org/webt/vj/nw/vc/vjnwvcfu76izpyiarxlymwfftpe.png"><br><br>  Cliquez sur «Télécharger simplement»: <br><br><img src="https://habrastorage.org/webt/wu/3q/aj/wu3qajjogz-8xyrpv2rankehjeq.png"><br><br>  Téléchargez et exécutez le programme d'installation: <br><br><img src="https://habrastorage.org/webt/db/_d/lx/db_dlxuein4fw7aofwgu-8syzio.png"><br><br>  Nous sommes d'accord sur tout: <br><br><img src="https://habrastorage.org/webt/xq/nr/n6/xqnrn6hcxu9_1h0zzf2eda0kkm8.png"><br><br><img src="https://habrastorage.org/webt/p7/7h/-d/p77h-dqmssaisjxucixrqdoebvk.png"><br><br><img src="https://habrastorage.org/webt/05/lh/q4/05lhq4bozxrk4jm5rvj1xxzgh6k.png"><br><br><img src="https://habrastorage.org/webt/sl/mu/57/slmu57e2qjf9oemniy3rqsugm5c.png"><br><br>  Une fois le programme installé, connectez la carte Arduino et l'ordinateur avec un câble USB. <br><br>  Les voyants de la carte Arduino s'allument et dans le gestionnaire de périphériques, vous verrez qu'un nouveau port est apparu et qu'un certain nombre lui a été attribué, par exemple COM3: <br><br><img src="https://habrastorage.org/webt/fv/yf/fu/fvyffux9p-o-_kx6cjtqgejgv38.png"><br><br>  Modifions son numéro en COM9, car à l'avenir, tout sera lié spécifiquement à COM9.  Pour ce faire, faites un clic droit dessus, appelez le menu contextuel et sélectionnez-y «propriétés»: <br><br><img src="https://habrastorage.org/webt/wx/2v/ce/wx2vceqt65nzglwuevp0rwh3tja.png"><br><br>  Dans l'onglet "paramètres du port", cliquez sur le bouton "avancé": <br><br><img src="https://habrastorage.org/webt/yw/d_/6-/ywd_6-uh4-83w2kcx4ng_i1rijw.png"><br><br>  Et enfin, sélectionnez "COM9" comme numéro de port COM. <br><br><img src="https://habrastorage.org/webt/5n/tw/bg/5ntwbgktedghwn61bkqtkhbjf5e.png"><br><br>  Fermez toutes les fenêtres ouvertes avec le bouton «OK», puis retirez et insérez le câble USB pour vérifier qu'Arduino continuera à se connecter via le port COM9 s'il est inséré dans le même port USB de l'ordinateur: <br><br><img src="https://habrastorage.org/webt/fo/cg/jj/focgjjlfl9e1cvk1goluncdtqb8.png"><br><br>  Maintenant, appelez et configurez le programme Arduino récemment installé à partir du site: <br><br><img src="https://habrastorage.org/webt/zd/xa/yy/zdxayy6epjys_elzlitystsu4mm.png"><br><br>  Dans le menu "Outils", réglez la carte "Arduino UNO" et le port "COM9": <br><br><img src="https://habrastorage.org/webt/u5/kn/jq/u5knjq5m5ctlnevdrp-cnsewopy.png"><br><br>  Maintenant, tout est prêt à collecter les schémas et à leur donner vie. <br><br><a name="p3"></a><h2>  Schéma de contrôle de la prise de courant </h2><br>  <strong>Si vous n'êtes pas familier avec la sécurité électrique et n'avez jamais fait de câblage dans la maison, n'essayez pas de répéter ce schéma!</strong>  <strong>Le circuit utilise une tension mortelle!</strong> <br><br>  Encore une fois, contrôlez les questions: <br><br><ul><li>  Savez-vous comment distinguer un fil avec une phase d'un fil avec un zéro dans une prise? </li><li>  Savez-vous comment faire sonner les fils et assurez-vous qu'il n'y a pas de court-circuit après le branchement? </li></ul><br>  Si vous ne répondez pas avec certitude à ces questions, demandez à une personne plus expérimentée de monter le circuit. <br><br>  Maintenant au point. <br><br>  Cela fonctionne comme ceci: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/cG7eZB9ynrg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Le schéma de connexion de socket ressemble à ceci: <br><br><img src="https://habrastorage.org/webt/au/la/h8/aulah8yv5nvdhv7pktidilna2hs.png"><br><br>  Nous fournissons zéro directement aux prises et la phase à travers le relais.  Si vous faites le contraire, cela fonctionnera, mais il y aura un risque de choc électrique des appareils OFF MALFUNCTIONAL.  Autrement dit, prenez le téléviseur défectueux éteint et cela vous choquera. <br><br>  Si la maison a une terre de protection, utilisez une prise de terre. <br><br>  Vient ensuite ma conception de référence.  Dans ce document, j'ai fait une erreur avec la couleur des fils: la couleur du fil neutre est devenue brune et les phases bleues.  Faites attention à cela. <br><br>  Nous prenons un morceau de la carte de la taille appropriée pour l'adapter (de gauche à droite): Arduino, bloc relais, quatre prises, un support pour presser le fil sur la carte. <br><br><img src="https://habrastorage.org/webt/4n/ad/yj/4nadyjfwr_9zqsjfqirzp5kmcjg.jpeg"><br><br>  Nous coupons l'excédent et utilisons un ciseau pour faire une rainure pour les fils afin qu'ils s'insèrent librement sous les prises. <br><br><img src="https://habrastorage.org/webt/c1/cn/4k/c1cn4krbvgwhyerhsjgdf1blh2k.jpeg"><br><br>  Nous visons les cartes Arduino et le bloc relais avec des vis sur la carte, en posant des rondelles en plastique. <br><br><img src="https://habrastorage.org/webt/xl/ss/xt/xlssxtywewk_wiqbg8xbq-sjbxe.jpeg"><br><br>  Si les rondelles n'étaient pas à portée de main, vous pouvez couper les chevilles: <br><br><img src="https://habrastorage.org/webt/j8/nu/4c/j8nu4c3dgliutidvgzey80c3qiq.jpeg"><br><br>  Préparez les fils: coupez à la longueur désirée et retirez-les de l'isolant.  Il est conseillé de les étamer avec un fer à souder aux endroits de contact avec les prises et relais. <br><br><img src="https://habrastorage.org/webt/7g/u-/js/7gu-jsezhlrrzxq-tqy37bi__py.jpeg"><br><br>  Appuyez le fil sur la carte avec un support afin qu'il ne puisse pas être retiré. <br><br><img src="https://habrastorage.org/webt/xt/mb/hm/xtmbhmcglfylqsh4txocs50bn9k.jpeg"><br><br>  On connecte les fils et on visse les douilles.  Nous appelons la chaîne. <br><br><img src="https://habrastorage.org/webt/h_/_b/hl/h__bhl0ovpuzpdp9m9zwi0xwrsy.jpeg"><br><br><img src="https://habrastorage.org/webt/gd/6c/ga/gd6cgayr0-nalqayyxt8lsiquli.jpeg"><br><br>  Nous connectons la carte Arduino à l'unité de relais avec un faisceau de fils conformément au schéma ci-dessus. <br><br><img src="https://habrastorage.org/webt/bq/5r/yk/bq5ryknx1noe_wserikpat_8d1c.jpeg"><br><br>  Nous couvrons les panneaux avec un boîtier de protection en matériau non conducteur.  <strong>Cela doit être fait ici, car la tension mortelle convient au bloc de relais!</strong>  Dans un cas extrême, enveloppez au moins les contacts électriques du relais. <br><br>  J'ai utilisé un conteneur pour les produits en plastique dur comme boîtier, en le fixant avec des vis: <br><br><img src="https://habrastorage.org/webt/dh/mj/4j/dhmj4j30zlicmjwgjrkylk5g7km.jpeg"><br><br>  N'oubliez pas de faire un trou pour le câble USB. <br><br><img src="https://habrastorage.org/webt/mg/yb/5h/mgyb5hkbsv4zws5b0zbpdixbrq8.jpeg"><br><br>  Connectez l'appareil à l'ordinateur, mais <strong>ne le branchez pas sur une prise de courant</strong> . <br><br>  Nous lançons le programme «Arduino» et y copions ce texte du programme: <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     2,3,4,5 int Relay1=2, Relay2=3, Relay3=4, Relay4=5; void setup() { pinMode(Relay1,OUTPUT); pinMode(Relay2,OUTPUT); pinMode(Relay3,OUTPUT); pinMode(Relay4,OUTPUT); Serial.begin(9600); } void loop() { delay (200); // 1.     while(Serial.available()) { switch(Serial.read()) { case '0': //    digitalWrite(Relay1,0); break; case '1': //    digitalWrite(Relay1,1); break; case '2': //    digitalWrite(Relay2,0); break; case '3': //    digitalWrite(Relay2,1); break; case '4': //    digitalWrite(Relay3,0); break; case '5': //    digitalWrite(Relay3,1); break; case '6': //    digitalWrite(Relay4,0); break; case '7': //    digitalWrite(Relay4,1); break; } // switch } // while }</span></span></code> </pre> <br>  Cliquez ensuite sur le bouton de téléchargement du programme en Arduino (voir la figure ci-dessous).  Si tout s'est déroulé sans erreur, nous voyons l'inscription «Téléchargement terminé». <br><br><img src="https://habrastorage.org/webt/sa/lq/ps/salqpsq3wdq3kpsylezoakvmn1i.png"><br><br>  Vérifiez que notre appareil exécute les commandes.  Pour ce faire, appelez le moniteur de port: <br><br><img src="https://habrastorage.org/webt/68/wq/mw/68wqmw6ebryw_wohhhew71h9mx0.png"><br><br>  Maintenant, nous allons saisir le chiffre <strong>1</strong> et appuyer sur Entrée ou sur le bouton "Soumettre": <br><br><img src="https://habrastorage.org/webt/u3/iq/6t/u3iq6tjtyiw16d9rq_maya-mqgu.png"><br><br>  Un déclic caractéristique du relais se fera entendre et le contact dans la première prise se connectera au fil de phase.  Vérifiez cela avec un testeur.  Composez ensuite le numéro 0 et le relais déconnectera le contact. <br><br>  En regardant le texte du programme, vous pouvez voir ce qui se passera si nous tapons d'autres chiffres: <br><br>  3.2 - allumer, éteindre la deuxième prise <br><br>  5,4 - allumer, éteindre la troisième prise <br><br>  7.6 - allumer, éteindre la quatrième prise <br><br>  Vérifiez avec un testeur la connexion de ces prises.  Après vérification, vous pouvez connecter le fil à la tension du réseau et commencer à allumer / éteindre de vrais appareils. <br><br>  Notre prochaine tâche consiste à allumer et éteindre les appareils d'un coup d'œil.  Pour ce faire, nous configurons le programme <strong>bkb</strong> décrit ici dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> article <strong>(LA DERNIÈRE VERSION DU PROGRAMME EST NÉCESSAIRE !!!)</strong> . <br><br>  Supposons que nous voulions allumer et éteindre une lampe et une guirlande d'arbre de Noël. <br>  Dans le programme Paint standard, nous dessinons quatre dessins 200x200 au format <strong>BMP</strong> : <br><br><img src="https://habrastorage.org/webt/ns/ly/ri/nslyribneenospzbhf8dxftucic.png"><br><br>  Nous allons également créer quatre fichiers batch: <strong>c.cmd, d.cmd, e.cmd, f.cmd</strong> <br><br>  Ils contiendront des commandes pour envoyer les caractères 1,0,3,2 au port COM9.  Et nous nous souvenons qu'ils allument et éteignent les première et deuxième prises.  Il est important qu'il n'y ait pas de lignes vides entre les deux lignes dans ces fichiers! <br><br>  c.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 1 &gt; com9:</code> </pre><br>  d.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 0 &gt; com9:</code> </pre><br>  e.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 3 &gt; com9:</code> </pre><br>  f.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 2 &gt; com9:</code> </pre><br>  Nous <strong>remplaçons les</strong> fichiers <strong>.bmp</strong> et <strong>.cmd</strong> créés dans le répertoire <strong>grid</strong> du programme <strong>bkb</strong> . <br><br>  Après avoir démarré le programme <strong>bkb</strong> en mode tableau, une nouvelle cinquième ligne avec nos images apparaîtra: <br><br><img src="https://habrastorage.org/webt/cn/jz/aq/cnjzaqskmsg3wwqe2odhwijsk4g.jpeg"><br><br>  Lorsque nous regardons l'image, l'action correspondante est lancée. <br><br>  <strong>ATTENTION!</strong>  La première fois après le démarrage du programme, l'action ne fonctionne pas.  Toutes les fois suivantes - cela fonctionne.  Cela est dû au fait que lors de la première initialisation du port, le signal sur la ligne DTR change, ce qui provoque le redémarrage de l'Arduino, qui dure environ trois secondes. <br><br>  Ils disent que cela peut être résolu avec un fer à souder, mais je n'ai pas osé me lancer dans de tels bijoux.  Donc, pour l'instant, n'oubliez pas que la première fois que vous devez allumer deux fois. <br><br>  <u>Remarque</u> <br><br>  Vous avez probablement déjà compris que dans les fichiers .cmd, vous pouvez appeler n'importe quel programme externe.  Si vous avez un périphérique qui peut être contrôlé à partir de la ligne de commande, vous pouvez vous-même exécuter ces commandes en attribuant les actions nécessaires à toutes les images du tableau. <br><br><a name="p4"></a><h2>  Circuit de commande du moteur </h2><br>  Mon ami a amélioré le scooter gyroscopique et l'a remplacé par l'essieu arrière de la poussette.  La gestion a été effectuée par des télécommandes via la carte Arduino. <br><br><img src="https://habrastorage.org/webt/6g/gi/ef/6ggiefa4rwsv9n7bkjpz9hdenzi.jpeg"><br><br>  Nous avons décidé d'essayer de donner à l'enfant la possibilité de contrôler la poussette par ses propres yeux.  Pour ce faire, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le</a> mode de commande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du <strong>fauteuil roulant a</strong></a> été ajouté au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">programme <strong>bkb</strong></a> . <br><br><img src="https://habrastorage.org/webt/k_/vw/4c/k_vw4cp32if1tiyx_tld9x8js6w.png"><br><br>  Après avoir démarré dans ce mode, des flèches apparaissent à l'écran, ce qui amène le programme à envoyer des caractères de contrôle au port COM9, qui sont ensuite interprétés par la poussette pour avancer / reculer, tourner et s'arrêter à gauche / à droite. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2QgKxeQeUAQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Pendant que la poussette est en cours de finalisation, j'ai décidé d'utiliser le même programme pour contrôler à distance le modèle de réservoir à chenilles.  C'est aussi une chose assez utile.  Premièrement, l'enfant reçoit des compétences utiles pour contrôler la poussette.  Deuxièmement, ce n'est qu'un jeu passionnant. <br><br><img src="https://habrastorage.org/webt/hg/gp/ov/hggpovliv-swlqqzlziurfgag2o.jpeg"><br><br>  Chacune des chenilles du char est contrôlée par un levier qui peut être déplacé vers l'avant ou vers l'arrière.  Lorsqu'il déplace le levier vers l'avant, il appuie sur le bouton, forçant le moteur à tourner vers l'avant.  En reculant le levier, il appuie sur le bouton, ce qui fait tourner le moteur dans le sens opposé.  Il n'est pas possible d'appuyer sur deux boutons en même temps - en avant et en arrière est impossible. <br>  L'unité de relais a été connectée aux boutons de la télécommande selon le schéma ci-dessous.  Le circuit ne permet pas d'activer simultanément les boutons «moteur avant» et «moteur arrière».  Un relais allume / éteint le moteur et le second sélectionne la direction avant ou arrière. <br><br>  Trouvez sur la carte du panneau de commande où les boutons sont connectés et connectez-vous à eux, selon le schéma ci-dessus. <br><br>  Veuillez noter que contrairement au circuit précédent, Arduino contrôle le bloc de relais avec les broches 6 à 9. <br><br><img src="https://habrastorage.org/webt/te/ch/ag/techagksw5fgfqfnumnz0oywovg.png"><br><br>  J'ai connecté le bloc de relais à la télécommande via le connecteur afin que la télécommande puisse être facilement déconnectée et utilisée séparément: <br><br><img src="https://habrastorage.org/webt/_y/5z/z-/_y5zz-xbgdn7b8lwz-k9n5aignk.jpeg"><br><br>  Le programme que Arduino doit télécharger reçoit les mêmes commandes de l'ordinateur qui sont utilisées pour contrôler la poussette motorisée: <br><br>  F-avant <br>  B-back <br>  L-gauche <br>  R-droit <br>  S-stop <br><br>  Le texte du programme est donné ci-dessous. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     6,7,8,9 int Relay1=6, Relay2=7, Relay3=8, Relay4=9; int heartbeat=0; //     void setup() { pinMode(Relay1,OUTPUT); pinMode(Relay2,OUTPUT); pinMode(Relay3,OUTPUT); pinMode(Relay4,OUTPUT); Serial.begin(9600); } void RCStop() { digitalWrite(Relay1,0); digitalWrite(Relay2,0); digitalWrite(Relay3,0); digitalWrite(Relay4,0); } void RCForward() { digitalWrite(Relay1,1); digitalWrite(Relay2,1); digitalWrite(Relay3,1); digitalWrite(Relay4,1); } void RCBack() { digitalWrite(Relay1,1); digitalWrite(Relay2,0); digitalWrite(Relay3,1); digitalWrite(Relay4,0); } void RCLeft() { digitalWrite(Relay1,1); digitalWrite(Relay2,0); digitalWrite(Relay3,1); digitalWrite(Relay4,1); } void RCRight() { digitalWrite(Relay1,1); digitalWrite(Relay2,1); digitalWrite(Relay3,1); digitalWrite(Relay4,0); } void loop() { // 1.     while(Serial.available()) { switch(Serial.read()) { case 'S': //  ! RCStop(); heartbeat=0; break; case 'F': //  ! RCForward(); heartbeat=0; break; case 'B': //  ! RCBack(); heartbeat=0; break; case 'L': //  ! RCLeft(); heartbeat=0; break; case 'R': //  ! RCRight(); heartbeat=0; break; } // switch } // while // 2.    //       -   delay(10); heartbeat++; if(heartbeat&gt;30) { heartbeat=30; //    ! RCStop(); //   -   } }</span></span></code> </pre><br>  Si la connexion avec l'ordinateur est interrompue (aucun caractère n'arrive dans les 0,3 secondes, alors l'Arduino éteint les moteurs).  Cette situation peut être modélisée en fermant les yeux tout en contrôlant vos yeux.  Aitreker ne pourra pas déterminer la direction de la vue et aucun signal ne sera envoyé.  Les moteurs s'arrêteront. <br><br>  J'ai équipé le modèle de réservoir d'une caméra vidéo, généralement appelée taux de change, ou FPV (First Person View), qui transmet un signal analogique à une fréquence d'environ 5,8 GHz.  J'ai pris l'une des caméras les moins chères, également équipée d'un émetteur et d'une antenne: AKK BA-3.  Cela m'a coûté 1050 roubles.  La caméra avec l'émetteur est si petite qu'elle tient dans les mains de la figurine Lego: <br><br><img src="https://habrastorage.org/webt/ch/0q/mq/ch0qmqoqvfhexoxoeofqqvasmr8.jpeg"><br><br>  Tout ce qui doit être fait pour que la caméra fonctionne est de la connecter à l'alimentation (de 3,2 à 5,5 volts).  Ensuite, avec un seul bouton, sélectionnez la gamme, la fréquence et la puissance de l'émetteur. <br><br>  La caméra chauffe considérablement, je recommande donc de régler la puissance minimale (25 milliwatts).  De plus, je l'ai connecté à la batterie du réservoir avec une tension de 6 volts, ce qui dépasse les valeurs autorisées.  Par conséquent, je ne sais pas combien de temps cela durera.  Je vous recommande d'utiliser un stabilisateur de tension pour alimenter l'appareil photo. <br><br>  Lors de la fixation de la caméra, j'ai collé un élément du constructeur Lego au réservoir, et les éléments restants y étaient déjà attachés avec une simple connexion.  Cela facilite le retrait et le rangement de l'appareil photo.  De plus, lorsque vous vous heurtez à un obstacle, l'appareil photo peut simplement se replier, ce qui le sauvera des dommages. <br><br><img src="https://habrastorage.org/webt/j0/4n/1z/j04n1zkr_zt7dl1itjgxfv8tr5c.jpeg"><br><br>  Pour recevoir le signal vidéo de la caméra, j'ai utilisé le récepteur Eachine ROTG01.  Il n'a pas pris de nouveau pour 1800 roubles.  Ce n'est qu'une boîte avec une antenne qui se connecte au port USB de l'ordinateur et est visible comme une caméra USB.  Autrement dit, nous lançons l'application Appareil photo sous Windows et voyons ce que le récepteur accepte.  Même au début, vous devez maintenir enfoncé le seul bouton du récepteur pour qu'il scanne l'éther et trouve la fréquence à laquelle notre caméra transmet un signal. <br><br>  En général, nous avons besoin de trois ports USB dans l'ordinateur: <br><br>  - pour un tracker informatique <br>  - pour Arduino, contrôler le panneau de commande du réservoir <br>  - pour récepteur vidéo <br><br><img src="https://habrastorage.org/webt/ya/6l/9j/ya6l9jsx4gh3xrvgtcwilaqfvci.jpeg"><br><br>  Nous commençons la sortie d'image de la caméra, par exemple, le programme "Camera".  Nous lançons le programme <strong>bkb</strong> et sélectionnons le mode de contrôle de la poussette motorisée. <br><br>  Ce qui peut arriver ensuite est montré dans la vidéo: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vWreZ72HPvM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  On voit que la vitesse de déplacement, et surtout la vitesse des virages, est trop grande.  Donc, si vous choisissez un modèle radiocommandé, choisissez le plus lent.  Une pelle ou quelque chose. <br><br><h3>  Et pourquoi ne pas prendre le «robot espion» fini? </h3><br>  Je suis tombé entre les mains d'un tel, HappyCow 777-325. <br><br><img src="https://habrastorage.org/webt/se/u_/ep/seu_eptbnfyu4lqwiekwmqttqbk.jpeg"><br><br>  J'étais ravi: il a tout, et la télécommande, et la transmission vidéo, et roule assez lentement.  Il y a cependant une fonctionnalité - elle est contrôlée uniquement via une application Android ou iOS.  Eh bien, nous allons résoudre ce problème grâce à la télécommande d'Android, par exemple, en utilisant <strong>scrcpy</strong> . <br><br>  Mais il s'est avéré qu'en plus des défauts corrigibles (angle de vision étroit de la caméra), la machine en possède un incorrigible.  La vidéo transmise via Wi-Fi a un terrible retard. <br>  Autrement dit, ce robot s'est écrasé sur quelque chose depuis longtemps, et vous appuyez tous sur le gaz, pensant qu'il n'a pas encore atteint d'obstacle. <br><br>  Pour un enfant qui apprend à contrôler une machine à distance, cela, à mon avis, est inacceptable. <br><br>  Le robot obtient donc une démission.  Bien que je lui emprunterais le châssis. <br><br><h2>  Conclusion </h2><br>  Je vous souhaite à tous de réussir à répéter et à développer les solutions techniques décrites. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430078/">https://habr.com/ru/post/fr430078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430068/index.html">Ordre de la chrysalide</a></li>
<li><a href="../fr430070/index.html">La pile et la file d'attente sont deux mauvais paradigmes et ce qui peut être fait à ce sujet</a></li>
<li><a href="../fr430072/index.html">Swift côté serveur sous-estimé: entretien avec Paul Hudson</a></li>
<li><a href="../fr430074/index.html">Comment j'ai failli attraper un virus en essayant de vendre des bottes</a></li>
<li><a href="../fr430076/index.html">Diffusion gratuite de DotNext 2018 Moscou</a></li>
<li><a href="../fr430080/index.html">Déplacement vers un cluster exécutant 1C-Bitrix: environnement Web</a></li>
<li><a href="../fr430082/index.html">Travinibay: Habr et RUVDS - Loups de mer russes IT</a></li>
<li><a href="../fr430084/index.html">Oracle JDK devra payer. Quelles sont les options maintenant?</a></li>
<li><a href="../fr430086/index.html">Nouveautés d'Android 9 Pie pour les smartphones Sony Xperia</a></li>
<li><a href="../fr430092/index.html">Le Credit Suisse et les banques UBS ont accusé Apple Pay et Samsung Pay de boycotter coordonné</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>