<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ∂ ü§≥üèΩ ü§∑üèª Comment contr√¥ler les appareils √©lectriques, les mod√®les radiocommand√©s, les poussettes motoris√©es en un coup d'≈ìil üë®‚Äçüë©‚Äçüëß‚Äçüëß üíä üôèüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans mes articles pr√©c√©dents, j'ai expliqu√© comment aider les personnes paralys√©es √† communiquer avec le monde ext√©rieur: communiquer leurs d√©sirs, √©c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment contr√¥ler les appareils √©lectriques, les mod√®les radiocommand√©s, les poussettes motoris√©es en un coup d'≈ìil</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430078/"><img src="https://habrastorage.org/webt/0c/pu/lz/0cpulz3okxsy9r7qjjbrkoufiww.jpeg"><br><br>  Dans mes articles pr√©c√©dents, j'ai expliqu√© comment aider les personnes paralys√©es √† communiquer avec le monde ext√©rieur: communiquer leurs d√©sirs, √©crire des lettres, surfer sur Internet en utilisant uniquement leurs yeux et un appareil qui suit votre regard (eye tracker).  Dans ce cas, physiquement, une personne reste limit√©e par le monde de l'ordinateur et du lit. <br><br>  Ici, je vais parler des moyens les plus simples (√† mon avis) de changer moi-m√™me quelque chose dans le monde ext√©rieur: allumer la lumi√®re ou une guirlande sur un arbre du Nouvel An, contr√¥ler un v√©hicule tout-terrain sur une radiocommande, faire avancer un chariot motoris√© dans la bonne direction. <br><a name="habracut"></a><br><h3>  Table des mati√®res </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pr√©sentation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Composants requis</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Connectez Arduino √† un ordinateur</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sch√©ma de contr√¥le de la prise de courant</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Circuit de commande du moteur</a> <br><br><a name="p0"></a><h2>  Pr√©sentation </h2><br>  En plus du dispositif de suivi du regard et du logiciel gratuit pour celui-ci, d√©crit ici dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> article, nous avons besoin de quelque chose qui relie l'ordinateur √† des objets externes. <br><br>  Malgr√© la vente de divers appareils pouvant √™tre contr√¥l√©s √† partir d'un ordinateur, l'option la plus simple et la moins ch√®re pour moi √©tait d'utiliser deux parties: une carte Arduino et une carte multi-relais. <br><br>  Si vous n'avez jamais rencontr√© Arduino, n'abandonnez toujours pas la lecture, √† l'avenir, vous verrez que dans ce contexte, il est assez simple de travailler avec lui, ce n'est pas pour rien qu'il existe de nombreux designers pour enfants bas√©s sur Arduino √† vendre. <br><br>  Dans le m√™me temps, si vous n'√™tes pas familier avec la s√©curit√© √©lectrique et n'avez jamais fait de c√¢blage √©lectrique dans la maison, n'essayez pas de r√©p√©ter les circuits qui utilisent la connexion aux prises! <br><br>  Tout ce que vous devez savoir sur l'Arduino: il s'agit d'un petit appareil qui peut √™tre branch√© sur le port USB de l'ordinateur, apr√®s quoi il peut activer / d√©sactiver les signaux √©lectriques sur ses contacts selon les instructions re√ßues. <br><br>  Les signaux sont plut√¥t de faible puissance, par cons√©quent, pour contr√¥ler quelque chose de plus puissant (ampoules √©lectriques, par exemple), nous avons mis une unit√© de relais qui, en r√©ponse au signal de l'Arduino, ferme et ouvre les contacts de contr√¥le des appareils externes.  De plus, les relais isolent les circuits √©lectriques de l'ordinateur Arduino + des circuits √©lectriques de l'appareil g√©r√©. <br>  Ainsi, la base des circuits de commande des prises √©lectriques et des moteurs, qui sera d√©crite plus loin, est la suivante: deux parties reli√©es par des fils entre elles, reli√©es par un c√¢ble USB √† un ordinateur et des fils √† ce que nous voulons contr√¥ler: <br><br><img src="https://habrastorage.org/webt/xo/hp/8j/xohp8jg5wedmd0x2v98jdlhatvy.png"><br><br>  Dans le monde r√©el, cela pourrait ressembler √† ceci: <br><br><img src="https://habrastorage.org/webt/bq/5r/yk/bq5ryknx1noe_wserikpat_8d1c.jpeg"><br><br>  Nous envoyons une commande √† partir d'un ordinateur, Arduino l'un de ses contacts active / d√©sactive le relais, qui est l'interrupteur de n'importe quel appareil ou un bouton distinct sur l'appareil. <br><br><a name="p1"></a><h2>  Composants requis </h2><br>  Nous en aurons besoin (entre parenth√®ses sont les prix de 2018 dans un magasin local. Ceux qui peuvent acheter en Chine peuvent √©conomiser beaucoup d'argent, mais perdre du temps): <br><br>  1) Carte Arduino UNO avec un c√¢ble USB (c'est possible apr√®s-vente, avec CH340 pas cher au lieu de FTDI cher) (450 roubles) <br><br>  2) Une carte √† quatre relais fonctionnant sur une tension de 5 volts et capable de contr√¥ler des appareils avec une tension de 220 volts.  (450 roubles).  Il y a encore des cartes fonctionnant sur 12 Volts, ne les m√©langez pas! <br><br>  3) Un tas de fils pour connecter deux cartes.  Dans mon cas, des fils avec une prise d'un c√¥t√© et une broche de l'autre √©taient n√©cessaires, car le bloc de relais a des contacts √† broches et Arduino a des prises.  Regardez les connecteurs sur vos cartes lors de l'achat de fils (150 roubles). <br><br><img src="https://habrastorage.org/webt/2a/ma/kf/2amakfyji4k_hbtvozjophg_5hu.jpeg"><br><br><a name="p2"></a><h2>  Connectez Arduino √† un ordinateur </h2><br>  Tout d'abord, installez le logiciel de programmation Arduino √† partir de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.arduino.cc</a> : <br><br>  Sur la page <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.arduino.cc/en/Main/Software,</a> cliquez sur ¬´Windows Installer¬ª: <br><br><img src="https://habrastorage.org/webt/vj/nw/vc/vjnwvcfu76izpyiarxlymwfftpe.png"><br><br>  Cliquez sur ¬´T√©l√©charger simplement¬ª: <br><br><img src="https://habrastorage.org/webt/wu/3q/aj/wu3qajjogz-8xyrpv2rankehjeq.png"><br><br>  T√©l√©chargez et ex√©cutez le programme d'installation: <br><br><img src="https://habrastorage.org/webt/db/_d/lx/db_dlxuein4fw7aofwgu-8syzio.png"><br><br>  Nous sommes d'accord sur tout: <br><br><img src="https://habrastorage.org/webt/xq/nr/n6/xqnrn6hcxu9_1h0zzf2eda0kkm8.png"><br><br><img src="https://habrastorage.org/webt/p7/7h/-d/p77h-dqmssaisjxucixrqdoebvk.png"><br><br><img src="https://habrastorage.org/webt/05/lh/q4/05lhq4bozxrk4jm5rvj1xxzgh6k.png"><br><br><img src="https://habrastorage.org/webt/sl/mu/57/slmu57e2qjf9oemniy3rqsugm5c.png"><br><br>  Une fois le programme install√©, connectez la carte Arduino et l'ordinateur avec un c√¢ble USB. <br><br>  Les voyants de la carte Arduino s'allument et dans le gestionnaire de p√©riph√©riques, vous verrez qu'un nouveau port est apparu et qu'un certain nombre lui a √©t√© attribu√©, par exemple COM3: <br><br><img src="https://habrastorage.org/webt/fv/yf/fu/fvyffux9p-o-_kx6cjtqgejgv38.png"><br><br>  Modifions son num√©ro en COM9, car √† l'avenir, tout sera li√© sp√©cifiquement √† COM9.  Pour ce faire, faites un clic droit dessus, appelez le menu contextuel et s√©lectionnez-y ¬´propri√©t√©s¬ª: <br><br><img src="https://habrastorage.org/webt/wx/2v/ce/wx2vceqt65nzglwuevp0rwh3tja.png"><br><br>  Dans l'onglet "param√®tres du port", cliquez sur le bouton "avanc√©": <br><br><img src="https://habrastorage.org/webt/yw/d_/6-/ywd_6-uh4-83w2kcx4ng_i1rijw.png"><br><br>  Et enfin, s√©lectionnez "COM9" comme num√©ro de port COM. <br><br><img src="https://habrastorage.org/webt/5n/tw/bg/5ntwbgktedghwn61bkqtkhbjf5e.png"><br><br>  Fermez toutes les fen√™tres ouvertes avec le bouton ¬´OK¬ª, puis retirez et ins√©rez le c√¢ble USB pour v√©rifier qu'Arduino continuera √† se connecter via le port COM9 s'il est ins√©r√© dans le m√™me port USB de l'ordinateur: <br><br><img src="https://habrastorage.org/webt/fo/cg/jj/focgjjlfl9e1cvk1goluncdtqb8.png"><br><br>  Maintenant, appelez et configurez le programme Arduino r√©cemment install√© √† partir du site: <br><br><img src="https://habrastorage.org/webt/zd/xa/yy/zdxayy6epjys_elzlitystsu4mm.png"><br><br>  Dans le menu "Outils", r√©glez la carte "Arduino UNO" et le port "COM9": <br><br><img src="https://habrastorage.org/webt/u5/kn/jq/u5knjq5m5ctlnevdrp-cnsewopy.png"><br><br>  Maintenant, tout est pr√™t √† collecter les sch√©mas et √† leur donner vie. <br><br><a name="p3"></a><h2>  Sch√©ma de contr√¥le de la prise de courant </h2><br>  <strong>Si vous n'√™tes pas familier avec la s√©curit√© √©lectrique et n'avez jamais fait de c√¢blage dans la maison, n'essayez pas de r√©p√©ter ce sch√©ma!</strong>  <strong>Le circuit utilise une tension mortelle!</strong> <br><br>  Encore une fois, contr√¥lez les questions: <br><br><ul><li>  Savez-vous comment distinguer un fil avec une phase d'un fil avec un z√©ro dans une prise? </li><li>  Savez-vous comment faire sonner les fils et assurez-vous qu'il n'y a pas de court-circuit apr√®s le branchement? </li></ul><br>  Si vous ne r√©pondez pas avec certitude √† ces questions, demandez √† une personne plus exp√©riment√©e de monter le circuit. <br><br>  Maintenant au point. <br><br>  Cela fonctionne comme ceci: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/cG7eZB9ynrg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Le sch√©ma de connexion de socket ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/au/la/h8/aulah8yv5nvdhv7pktidilna2hs.png"><br><br>  Nous fournissons z√©ro directement aux prises et la phase √† travers le relais.  Si vous faites le contraire, cela fonctionnera, mais il y aura un risque de choc √©lectrique des appareils OFF MALFUNCTIONAL.  Autrement dit, prenez le t√©l√©viseur d√©fectueux √©teint et cela vous choquera. <br><br>  Si la maison a une terre de protection, utilisez une prise de terre. <br><br>  Vient ensuite ma conception de r√©f√©rence.  Dans ce document, j'ai fait une erreur avec la couleur des fils: la couleur du fil neutre est devenue brune et les phases bleues.  Faites attention √† cela. <br><br>  Nous prenons un morceau de la carte de la taille appropri√©e pour l'adapter (de gauche √† droite): Arduino, bloc relais, quatre prises, un support pour presser le fil sur la carte. <br><br><img src="https://habrastorage.org/webt/4n/ad/yj/4nadyjfwr_9zqsjfqirzp5kmcjg.jpeg"><br><br>  Nous coupons l'exc√©dent et utilisons un ciseau pour faire une rainure pour les fils afin qu'ils s'ins√®rent librement sous les prises. <br><br><img src="https://habrastorage.org/webt/c1/cn/4k/c1cn4krbvgwhyerhsjgdf1blh2k.jpeg"><br><br>  Nous visons les cartes Arduino et le bloc relais avec des vis sur la carte, en posant des rondelles en plastique. <br><br><img src="https://habrastorage.org/webt/xl/ss/xt/xlssxtywewk_wiqbg8xbq-sjbxe.jpeg"><br><br>  Si les rondelles n'√©taient pas √† port√©e de main, vous pouvez couper les chevilles: <br><br><img src="https://habrastorage.org/webt/j8/nu/4c/j8nu4c3dgliutidvgzey80c3qiq.jpeg"><br><br>  Pr√©parez les fils: coupez √† la longueur d√©sir√©e et retirez-les de l'isolant.  Il est conseill√© de les √©tamer avec un fer √† souder aux endroits de contact avec les prises et relais. <br><br><img src="https://habrastorage.org/webt/7g/u-/js/7gu-jsezhlrrzxq-tqy37bi__py.jpeg"><br><br>  Appuyez le fil sur la carte avec un support afin qu'il ne puisse pas √™tre retir√©. <br><br><img src="https://habrastorage.org/webt/xt/mb/hm/xtmbhmcglfylqsh4txocs50bn9k.jpeg"><br><br>  On connecte les fils et on visse les douilles.  Nous appelons la cha√Æne. <br><br><img src="https://habrastorage.org/webt/h_/_b/hl/h__bhl0ovpuzpdp9m9zwi0xwrsy.jpeg"><br><br><img src="https://habrastorage.org/webt/gd/6c/ga/gd6cgayr0-nalqayyxt8lsiquli.jpeg"><br><br>  Nous connectons la carte Arduino √† l'unit√© de relais avec un faisceau de fils conform√©ment au sch√©ma ci-dessus. <br><br><img src="https://habrastorage.org/webt/bq/5r/yk/bq5ryknx1noe_wserikpat_8d1c.jpeg"><br><br>  Nous couvrons les panneaux avec un bo√Ætier de protection en mat√©riau non conducteur.  <strong>Cela doit √™tre fait ici, car la tension mortelle convient au bloc de relais!</strong>  Dans un cas extr√™me, enveloppez au moins les contacts √©lectriques du relais. <br><br>  J'ai utilis√© un conteneur pour les produits en plastique dur comme bo√Ætier, en le fixant avec des vis: <br><br><img src="https://habrastorage.org/webt/dh/mj/4j/dhmj4j30zlicmjwgjrkylk5g7km.jpeg"><br><br>  N'oubliez pas de faire un trou pour le c√¢ble USB. <br><br><img src="https://habrastorage.org/webt/mg/yb/5h/mgyb5hkbsv4zws5b0zbpdixbrq8.jpeg"><br><br>  Connectez l'appareil √† l'ordinateur, mais <strong>ne le branchez pas sur une prise de courant</strong> . <br><br>  Nous lan√ßons le programme ¬´Arduino¬ª et y copions ce texte du programme: <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     2,3,4,5 int Relay1=2, Relay2=3, Relay3=4, Relay4=5; void setup() { pinMode(Relay1,OUTPUT); pinMode(Relay2,OUTPUT); pinMode(Relay3,OUTPUT); pinMode(Relay4,OUTPUT); Serial.begin(9600); } void loop() { delay (200); // 1.     while(Serial.available()) { switch(Serial.read()) { case '0': //    digitalWrite(Relay1,0); break; case '1': //    digitalWrite(Relay1,1); break; case '2': //    digitalWrite(Relay2,0); break; case '3': //    digitalWrite(Relay2,1); break; case '4': //    digitalWrite(Relay3,0); break; case '5': //    digitalWrite(Relay3,1); break; case '6': //    digitalWrite(Relay4,0); break; case '7': //    digitalWrite(Relay4,1); break; } // switch } // while }</span></span></code> </pre> <br>  Cliquez ensuite sur le bouton de t√©l√©chargement du programme en Arduino (voir la figure ci-dessous).  Si tout s'est d√©roul√© sans erreur, nous voyons l'inscription ¬´T√©l√©chargement termin√©¬ª. <br><br><img src="https://habrastorage.org/webt/sa/lq/ps/salqpsq3wdq3kpsylezoakvmn1i.png"><br><br>  V√©rifiez que notre appareil ex√©cute les commandes.  Pour ce faire, appelez le moniteur de port: <br><br><img src="https://habrastorage.org/webt/68/wq/mw/68wqmw6ebryw_wohhhew71h9mx0.png"><br><br>  Maintenant, nous allons saisir le chiffre <strong>1</strong> et appuyer sur Entr√©e ou sur le bouton "Soumettre": <br><br><img src="https://habrastorage.org/webt/u3/iq/6t/u3iq6tjtyiw16d9rq_maya-mqgu.png"><br><br>  Un d√©clic caract√©ristique du relais se fera entendre et le contact dans la premi√®re prise se connectera au fil de phase.  V√©rifiez cela avec un testeur.  Composez ensuite le num√©ro 0 et le relais d√©connectera le contact. <br><br>  En regardant le texte du programme, vous pouvez voir ce qui se passera si nous tapons d'autres chiffres: <br><br>  3.2 - allumer, √©teindre la deuxi√®me prise <br><br>  5,4 - allumer, √©teindre la troisi√®me prise <br><br>  7.6 - allumer, √©teindre la quatri√®me prise <br><br>  V√©rifiez avec un testeur la connexion de ces prises.  Apr√®s v√©rification, vous pouvez connecter le fil √† la tension du r√©seau et commencer √† allumer / √©teindre de vrais appareils. <br><br>  Notre prochaine t√¢che consiste √† allumer et √©teindre les appareils d'un coup d'≈ìil.  Pour ce faire, nous configurons le programme <strong>bkb</strong> d√©crit ici dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> article <strong>(LA DERNI√àRE VERSION DU PROGRAMME EST N√âCESSAIRE !!!)</strong> . <br><br>  Supposons que nous voulions allumer et √©teindre une lampe et une guirlande d'arbre de No√´l. <br>  Dans le programme Paint standard, nous dessinons quatre dessins 200x200 au format <strong>BMP</strong> : <br><br><img src="https://habrastorage.org/webt/ns/ly/ri/nslyribneenospzbhf8dxftucic.png"><br><br>  Nous allons √©galement cr√©er quatre fichiers batch: <strong>c.cmd, d.cmd, e.cmd, f.cmd</strong> <br><br>  Ils contiendront des commandes pour envoyer les caract√®res 1,0,3,2 au port COM9.  Et nous nous souvenons qu'ils allument et √©teignent les premi√®re et deuxi√®me prises.  Il est important qu'il n'y ait pas de lignes vides entre les deux lignes dans ces fichiers! <br><br>  c.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 1 &gt; com9:</code> </pre><br>  d.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 0 &gt; com9:</code> </pre><br>  e.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 3 &gt; com9:</code> </pre><br>  f.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 2 &gt; com9:</code> </pre><br>  Nous <strong>rempla√ßons les</strong> fichiers <strong>.bmp</strong> et <strong>.cmd</strong> cr√©√©s dans le r√©pertoire <strong>grid</strong> du programme <strong>bkb</strong> . <br><br>  Apr√®s avoir d√©marr√© le programme <strong>bkb</strong> en mode tableau, une nouvelle cinqui√®me ligne avec nos images appara√Ætra: <br><br><img src="https://habrastorage.org/webt/cn/jz/aq/cnjzaqskmsg3wwqe2odhwijsk4g.jpeg"><br><br>  Lorsque nous regardons l'image, l'action correspondante est lanc√©e. <br><br>  <strong>ATTENTION!</strong>  La premi√®re fois apr√®s le d√©marrage du programme, l'action ne fonctionne pas.  Toutes les fois suivantes - cela fonctionne.  Cela est d√ª au fait que lors de la premi√®re initialisation du port, le signal sur la ligne DTR change, ce qui provoque le red√©marrage de l'Arduino, qui dure environ trois secondes. <br><br>  Ils disent que cela peut √™tre r√©solu avec un fer √† souder, mais je n'ai pas os√© me lancer dans de tels bijoux.  Donc, pour l'instant, n'oubliez pas que la premi√®re fois que vous devez allumer deux fois. <br><br>  <u>Remarque</u> <br><br>  Vous avez probablement d√©j√† compris que dans les fichiers .cmd, vous pouvez appeler n'importe quel programme externe.  Si vous avez un p√©riph√©rique qui peut √™tre contr√¥l√© √† partir de la ligne de commande, vous pouvez vous-m√™me ex√©cuter ces commandes en attribuant les actions n√©cessaires √† toutes les images du tableau. <br><br><a name="p4"></a><h2>  Circuit de commande du moteur </h2><br>  Mon ami a am√©lior√© le scooter gyroscopique et l'a remplac√© par l'essieu arri√®re de la poussette.  La gestion a √©t√© effectu√©e par des t√©l√©commandes via la carte Arduino. <br><br><img src="https://habrastorage.org/webt/6g/gi/ef/6ggiefa4rwsv9n7bkjpz9hdenzi.jpeg"><br><br>  Nous avons d√©cid√© d'essayer de donner √† l'enfant la possibilit√© de contr√¥ler la poussette par ses propres yeux.  Pour ce faire, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le</a> mode de commande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du <strong>fauteuil roulant a</strong></a> √©t√© ajout√© au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">programme <strong>bkb</strong></a> . <br><br><img src="https://habrastorage.org/webt/k_/vw/4c/k_vw4cp32if1tiyx_tld9x8js6w.png"><br><br>  Apr√®s avoir d√©marr√© dans ce mode, des fl√®ches apparaissent √† l'√©cran, ce qui am√®ne le programme √† envoyer des caract√®res de contr√¥le au port COM9, qui sont ensuite interpr√©t√©s par la poussette pour avancer / reculer, tourner et s'arr√™ter √† gauche / √† droite. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2QgKxeQeUAQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Pendant que la poussette est en cours de finalisation, j'ai d√©cid√© d'utiliser le m√™me programme pour contr√¥ler √† distance le mod√®le de r√©servoir √† chenilles.  C'est aussi une chose assez utile.  Premi√®rement, l'enfant re√ßoit des comp√©tences utiles pour contr√¥ler la poussette.  Deuxi√®mement, ce n'est qu'un jeu passionnant. <br><br><img src="https://habrastorage.org/webt/hg/gp/ov/hggpovliv-swlqqzlziurfgag2o.jpeg"><br><br>  Chacune des chenilles du char est contr√¥l√©e par un levier qui peut √™tre d√©plac√© vers l'avant ou vers l'arri√®re.  Lorsqu'il d√©place le levier vers l'avant, il appuie sur le bouton, for√ßant le moteur √† tourner vers l'avant.  En reculant le levier, il appuie sur le bouton, ce qui fait tourner le moteur dans le sens oppos√©.  Il n'est pas possible d'appuyer sur deux boutons en m√™me temps - en avant et en arri√®re est impossible. <br>  L'unit√© de relais a √©t√© connect√©e aux boutons de la t√©l√©commande selon le sch√©ma ci-dessous.  Le circuit ne permet pas d'activer simultan√©ment les boutons ¬´moteur avant¬ª et ¬´moteur arri√®re¬ª.  Un relais allume / √©teint le moteur et le second s√©lectionne la direction avant ou arri√®re. <br><br>  Trouvez sur la carte du panneau de commande o√π les boutons sont connect√©s et connectez-vous √† eux, selon le sch√©ma ci-dessus. <br><br>  Veuillez noter que contrairement au circuit pr√©c√©dent, Arduino contr√¥le le bloc de relais avec les broches 6 √† 9. <br><br><img src="https://habrastorage.org/webt/te/ch/ag/techagksw5fgfqfnumnz0oywovg.png"><br><br>  J'ai connect√© le bloc de relais √† la t√©l√©commande via le connecteur afin que la t√©l√©commande puisse √™tre facilement d√©connect√©e et utilis√©e s√©par√©ment: <br><br><img src="https://habrastorage.org/webt/_y/5z/z-/_y5zz-xbgdn7b8lwz-k9n5aignk.jpeg"><br><br>  Le programme que Arduino doit t√©l√©charger re√ßoit les m√™mes commandes de l'ordinateur qui sont utilis√©es pour contr√¥ler la poussette motoris√©e: <br><br>  F-avant <br>  B-back <br>  L-gauche <br>  R-droit <br>  S-stop <br><br>  Le texte du programme est donn√© ci-dessous. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     6,7,8,9 int Relay1=6, Relay2=7, Relay3=8, Relay4=9; int heartbeat=0; //     void setup() { pinMode(Relay1,OUTPUT); pinMode(Relay2,OUTPUT); pinMode(Relay3,OUTPUT); pinMode(Relay4,OUTPUT); Serial.begin(9600); } void RCStop() { digitalWrite(Relay1,0); digitalWrite(Relay2,0); digitalWrite(Relay3,0); digitalWrite(Relay4,0); } void RCForward() { digitalWrite(Relay1,1); digitalWrite(Relay2,1); digitalWrite(Relay3,1); digitalWrite(Relay4,1); } void RCBack() { digitalWrite(Relay1,1); digitalWrite(Relay2,0); digitalWrite(Relay3,1); digitalWrite(Relay4,0); } void RCLeft() { digitalWrite(Relay1,1); digitalWrite(Relay2,0); digitalWrite(Relay3,1); digitalWrite(Relay4,1); } void RCRight() { digitalWrite(Relay1,1); digitalWrite(Relay2,1); digitalWrite(Relay3,1); digitalWrite(Relay4,0); } void loop() { // 1.     while(Serial.available()) { switch(Serial.read()) { case 'S': //  ! RCStop(); heartbeat=0; break; case 'F': //  ! RCForward(); heartbeat=0; break; case 'B': //  ! RCBack(); heartbeat=0; break; case 'L': //  ! RCLeft(); heartbeat=0; break; case 'R': //  ! RCRight(); heartbeat=0; break; } // switch } // while // 2.    //       -   delay(10); heartbeat++; if(heartbeat&gt;30) { heartbeat=30; //    ! RCStop(); //   -   } }</span></span></code> </pre><br>  Si la connexion avec l'ordinateur est interrompue (aucun caract√®re n'arrive dans les 0,3 secondes, alors l'Arduino √©teint les moteurs).  Cette situation peut √™tre mod√©lis√©e en fermant les yeux tout en contr√¥lant vos yeux.  Aitreker ne pourra pas d√©terminer la direction de la vue et aucun signal ne sera envoy√©.  Les moteurs s'arr√™teront. <br><br>  J'ai √©quip√© le mod√®le de r√©servoir d'une cam√©ra vid√©o, g√©n√©ralement appel√©e taux de change, ou FPV (First Person View), qui transmet un signal analogique √† une fr√©quence d'environ 5,8 GHz.  J'ai pris l'une des cam√©ras les moins ch√®res, √©galement √©quip√©e d'un √©metteur et d'une antenne: AKK BA-3.  Cela m'a co√ªt√© 1050 roubles.  La cam√©ra avec l'√©metteur est si petite qu'elle tient dans les mains de la figurine Lego: <br><br><img src="https://habrastorage.org/webt/ch/0q/mq/ch0qmqoqvfhexoxoeofqqvasmr8.jpeg"><br><br>  Tout ce qui doit √™tre fait pour que la cam√©ra fonctionne est de la connecter √† l'alimentation (de 3,2 √† 5,5 volts).  Ensuite, avec un seul bouton, s√©lectionnez la gamme, la fr√©quence et la puissance de l'√©metteur. <br><br>  La cam√©ra chauffe consid√©rablement, je recommande donc de r√©gler la puissance minimale (25 milliwatts).  De plus, je l'ai connect√© √† la batterie du r√©servoir avec une tension de 6 volts, ce qui d√©passe les valeurs autoris√©es.  Par cons√©quent, je ne sais pas combien de temps cela durera.  Je vous recommande d'utiliser un stabilisateur de tension pour alimenter l'appareil photo. <br><br>  Lors de la fixation de la cam√©ra, j'ai coll√© un √©l√©ment du constructeur Lego au r√©servoir, et les √©l√©ments restants y √©taient d√©j√† attach√©s avec une simple connexion.  Cela facilite le retrait et le rangement de l'appareil photo.  De plus, lorsque vous vous heurtez √† un obstacle, l'appareil photo peut simplement se replier, ce qui le sauvera des dommages. <br><br><img src="https://habrastorage.org/webt/j0/4n/1z/j04n1zkr_zt7dl1itjgxfv8tr5c.jpeg"><br><br>  Pour recevoir le signal vid√©o de la cam√©ra, j'ai utilis√© le r√©cepteur Eachine ROTG01.  Il n'a pas pris de nouveau pour 1800 roubles.  Ce n'est qu'une bo√Æte avec une antenne qui se connecte au port USB de l'ordinateur et est visible comme une cam√©ra USB.  Autrement dit, nous lan√ßons l'application Appareil photo sous Windows et voyons ce que le r√©cepteur accepte.  M√™me au d√©but, vous devez maintenir enfonc√© le seul bouton du r√©cepteur pour qu'il scanne l'√©ther et trouve la fr√©quence √† laquelle notre cam√©ra transmet un signal. <br><br>  En g√©n√©ral, nous avons besoin de trois ports USB dans l'ordinateur: <br><br>  - pour un tracker informatique <br>  - pour Arduino, contr√¥ler le panneau de commande du r√©servoir <br>  - pour r√©cepteur vid√©o <br><br><img src="https://habrastorage.org/webt/ya/6l/9j/ya6l9jsx4gh3xrvgtcwilaqfvci.jpeg"><br><br>  Nous commen√ßons la sortie d'image de la cam√©ra, par exemple, le programme "Camera".  Nous lan√ßons le programme <strong>bkb</strong> et s√©lectionnons le mode de contr√¥le de la poussette motoris√©e. <br><br>  Ce qui peut arriver ensuite est montr√© dans la vid√©o: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vWreZ72HPvM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  On voit que la vitesse de d√©placement, et surtout la vitesse des virages, est trop grande.  Donc, si vous choisissez un mod√®le radiocommand√©, choisissez le plus lent.  Une pelle ou quelque chose. <br><br><h3>  Et pourquoi ne pas prendre le ¬´robot espion¬ª fini? </h3><br>  Je suis tomb√© entre les mains d'un tel, HappyCow 777-325. <br><br><img src="https://habrastorage.org/webt/se/u_/ep/seu_eptbnfyu4lqwiekwmqttqbk.jpeg"><br><br>  J'√©tais ravi: il a tout, et la t√©l√©commande, et la transmission vid√©o, et roule assez lentement.  Il y a cependant une fonctionnalit√© - elle est contr√¥l√©e uniquement via une application Android ou iOS.  Eh bien, nous allons r√©soudre ce probl√®me gr√¢ce √† la t√©l√©commande d'Android, par exemple, en utilisant <strong>scrcpy</strong> . <br><br>  Mais il s'est av√©r√© qu'en plus des d√©fauts corrigibles (angle de vision √©troit de la cam√©ra), la machine en poss√®de un incorrigible.  La vid√©o transmise via Wi-Fi a un terrible retard. <br>  Autrement dit, ce robot s'est √©cras√© sur quelque chose depuis longtemps, et vous appuyez tous sur le gaz, pensant qu'il n'a pas encore atteint d'obstacle. <br><br>  Pour un enfant qui apprend √† contr√¥ler une machine √† distance, cela, √† mon avis, est inacceptable. <br><br>  Le robot obtient donc une d√©mission.  Bien que je lui emprunterais le ch√¢ssis. <br><br><h2>  Conclusion </h2><br>  Je vous souhaite √† tous de r√©ussir √† r√©p√©ter et √† d√©velopper les solutions techniques d√©crites. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430078/">https://habr.com/ru/post/fr430078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430068/index.html">Ordre de la chrysalide</a></li>
<li><a href="../fr430070/index.html">La pile et la file d'attente sont deux mauvais paradigmes et ce qui peut √™tre fait √† ce sujet</a></li>
<li><a href="../fr430072/index.html">Swift c√¥t√© serveur sous-estim√©: entretien avec Paul Hudson</a></li>
<li><a href="../fr430074/index.html">Comment j'ai failli attraper un virus en essayant de vendre des bottes</a></li>
<li><a href="../fr430076/index.html">Diffusion gratuite de DotNext 2018 Moscou</a></li>
<li><a href="../fr430080/index.html">D√©placement vers un cluster ex√©cutant 1C-Bitrix: environnement Web</a></li>
<li><a href="../fr430082/index.html">Travinibay: Habr et RUVDS - Loups de mer russes IT</a></li>
<li><a href="../fr430084/index.html">Oracle JDK devra payer. Quelles sont les options maintenant?</a></li>
<li><a href="../fr430086/index.html">Nouveaut√©s d'Android 9 Pie pour les smartphones Sony Xperia</a></li>
<li><a href="../fr430092/index.html">Le Credit Suisse et les banques UBS ont accus√© Apple Pay et Samsung Pay de boycotter coordonn√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>