<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥂 🧔 🤱🏻 هل ستكون Node.js دائمًا أبطأ من Golang؟ 🚰 🙎🏾 💠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="هناك شعور بأنه حرفيًا كل أسبوع يظهر "إطار عمل ويب" جديد لـ Node.js ، والذي يسمى شيئًا يعمل بشكل أسرع من كل ما سبقه. يعلم الجميع أن Express بطيء ، ولكن...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>هل ستكون Node.js دائمًا أبطأ من Golang؟</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/439976/" style=";text-align:right;direction:rtl">  هناك شعور بأنه حرفيًا كل أسبوع يظهر "إطار عمل ويب" جديد لـ Node.js ، والذي يسمى شيئًا يعمل بشكل أسرع من كل ما سبقه.  يعلم الجميع أن Express بطيء ، ولكن هل الإطار التالي قادر على تحسين أداء النظام الفرعي I / O Node.js؟  الشيء الوحيد الذي يمكنها فعله هو التخلص من الحمل الزائد على النظام الذي أنشأته Express.  لا يوجد حديث عن تحسين شيء أساسي.  في الواقع ، من أجل تحسين الوضع بشكل جذري ، تحتاج إلى العمل على مستوى أعمق ، وعدم إضافة تجريدات جديدة على رأس Node.js. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/ca9/67d/fb9/ca967dfb9d2f8e6128460295b5245e65.jpg" alt="الصورة"></a> <br><br>  ما الذي يتطلبه الأمر لإنشاء تطبيقات خادم على النظام الأساسي Node.js التي تعمل بشكل أسرع بكثير من كل ما هو اليوم؟ <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">تحليل الموقف</font> </h2><br>  يعد Express أحد أقدم أطر الويب لـ Node.js.  يعتمد على الإمكانيات القياسية لهذا النظام الأساسي ، مما يوفر للمطورين واجهة مريحة مبنية حول مفهوم التطبيق ، ويسمح لك بإدارة طرق عناوين URL والمعلمات والأساليب وما شابه ذلك. <br><br>  Express بسيط ؛ فهو يساعد المبرمجين على تطوير التطبيقات بسرعة.  الشيء الوحيد الذي يفتقر إليه هو الأداء.  تسعى المشاريع التي تظهر باستمرار ، مثل Fastify ، إلى منح المطورين نفس إمكانيات Express ، لكن مع خسارة أقل في الأداء.  لكنهم هم أنفسهم الذين يخلقون عبء إضافي على النظام ويؤثرون بشكل سيء على الأداء.  إنها محدودة بشدة بما يمكن أن توفره منصة Node.js.  ويمكن أن تعطي ، بالمقارنة مع المنافسين ، وليس ذلك بكثير. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/748/266/c8a/748266c8a017e8c15fb882d06c2100fd.png"></div><br>  <i><font color="#999999">عدد طلبات HTTP التي تتم معالجتها بواسطة خوادم مختلفة في الثانية</font></i> <br><br>  انتبه إلى الخط الأحمر.  هذا هو أقصى منصة Node.js.  بالنسبة لها ، بغض النظر عما إذا كانت أسمائها تحتوي على كلمة "سريع" أم لا ، فإنها غير قادرة على عبور هذا الخط.  يعد هذا في الواقع حدًا منخفضًا جدًا للأداء عند مقارنة نظام Node.js بالبدائل الشائعة مثل Golang. <br><br>  لحسن الحظ ، يدعم Node.js الوظائف الإضافية لـ C ++ ، ومجلدات Google V8 ، والتي تتيح لك ربط JavaScript و C ++ ، وتسمح لك بالاتصال بأي آليات من JavaScript ، حتى لو توفرت هذه الآليات بواسطة شيء آخر غير النظام الأساسي Node.js. <br><br>  هذا يجعل من الممكن توسيع وتحسين قدرات تطبيقات JavaScript ، مما يتيح لك الوصول إلى مستويات جديدة من الأداء.  يسمح هذا لبرامج JavaScript بالضغط على كل شيء ممكن من محرك Google V8 ، وليس مقصوراً على ما وجده مطورو Node.js كافيين. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">حول ebWebSockets.js</font> </h2><br>  في وقت سابق من هذا الشهر ، قمت بإصدار مشروع جديد - <a href="">µWebSockets.js</a> .  يستخدم GitHub كمضيف لرمزه ، وليس npm ، ولكن يمكنك تثبيته على Node.js باستخدام npm مثل هذا: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">npm install uNetworking/uWebSockets.js#v15.0.0</code> </pre> <br>  للعمل مع ebWebSockets.js ، لا تحتاج إلى برنامج التحويل البرمجي.  يتم دعم Linux و macOS و Windows.  الإصدار الأولي للنظام هو 15.0.0 ، ويتم ترقيم الإصدار وفقًا لقواعد الإصدار الدلالية. <br><br>  µWebSockets.js هو خادم ويب بديل للتطبيقات الخلفية المكتوبة في JS.  يتكون من حوالي 6 آلاف سطر من كود C و C ++ ويتفوق بشكل كبير على أفضل الحلول المكتوبة بلغة Golang.  لذلك ، قام موقع bitfinex.com بتحويل كل من واجهات برمجة التطبيقات التجارية (REST و WebSocket) إلى µWebSockets.js ويقوم بإدخالها تدريجياً في الإنتاج.  يلاحظ باولو Ardoino من Bitfinex أن هذا مشروع رائع.  أود أن أقول إن حقيقة أنني أتيحت لي الفرصة لإصدار µWebSockets.js تعود بالكامل إلى الدعم الذي قدمته لي BitMEX و Bitfinex و Coinbase. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ميزات ebWebSockets.js</font> </h2><br>  µWebSockets.js هو مشروع جديد تم إصداره بموجب ترخيص Apache 2.0 ، وهو استمرار لما يُعرف باسم "uws".  هذا المشروع عبارة عن مكدس كامل لـ Google V8 ، بدءًا من مستوى kernel في نظام التشغيل ، واستبدالًا تامًا للميزات القياسية لـ Node.js ويمثل نظام دخل / إخراج مستقر وآمن ومتوافق مع المعايير وسريع وخفيف الوزن لـ Node.js.  إليك ما يشبه تفاعل تطبيق JS مع نظام التشغيل باستخدام µWebSockets.js. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4ef/b7e/416/4efb7e416344ba928f85143ad1dbba62.png"></div><br>  <i><font color="#999999">تفاعل تطبيق JS مع نظام التشغيل باستخدام µWebSockets.js</font></i> <br><br>  كما ترون ، يتكون المشروع من عدة طبقات.  كل طبقة تعتمد فقط على الطبقة السابقة.  تعمل هذه البنية على تبسيط عملية تحديد الأخطاء وتصحيحها ، بالإضافة إلى تنفيذ العمل لتوسيع الحل نظرًا لتطبيق ميزات جديدة فيه. <br><br>  تجدر الإشارة إلى أن طبقة " <code>µSockets</code> نفسها تتكون من ثلاثة طبقات فرعية ، وهي آليات للعمل مع الأحداث ومع الشبكة ، وكذلك أدوات لحماية البيانات.  يسمح هذا ، إذا لزم الأمر ، باستبدال أجزاء من الحل ، بإضافة تطبيقات بديلة لبعض الميزات إلى النظام ، دون مواجهة الحاجة إلى تغيير الكود على مستوى أعلى. <br><br>  على سبيل المثال ، إذا كنت بحاجة إلى استبدال OpenSSL بشيء ما ، <code>ssl.c</code> سوى تغيير ملف <code>ssl.c</code> الستمائة من التعليمات البرمجية إلى ما تحتاج إليه.  ومع ذلك ، لا تعرف طبقات النظام الأخرى حتى SSL.  هذا النهج ، بالإضافة إلى راحة استبدال بعض أجزاء النظام بأخرى ، يؤدي أيضًا إلى تبسيط عملية اكتشاف الأخطاء. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/719/113/b42/719113b4261fee20a799f8412e332f53.png"></div><br>  <i><font color="#999999">ockets مآخذ الطبقات الفرعية الداخلية</font></i> <br><br>  يختلف الهيكل المقدم هنا اختلافًا كبيرًا عن البنية المتجانسة المستخدمة في Node.js ، حيث يمكنك في نفس ملف التعليمات البرمجية المصدر العثور على مكالمات إلى libuv وأوامر للعمل مع النظام ومكالمات إلى OpenSSL و V8.  في Node.js ، كل هذا مختلط ، لم يشرع أحد في عزل الأجزاء الفردية من هذه المنصة.  هذا يعقد عملية إجراء تغييرات كبيرة على Node.js. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">حول تطوير µWebSockets.js</font> </h2><br>  فيما يلي مثال مبسط ومختصر للغاية للعمل مع µWebSockets.js ، وتتمثل مهمتها الرئيسية في إظهار القدرات الأساسية للنظام. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* SSL-   */</span></span> uWS.SSLApp({   <span class="hljs-attr"><span class="hljs-attr">key_file_name</span></span>: <span class="hljs-string"><span class="hljs-string">'misc/key.pem'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">cert_file_name</span></span>: <span class="hljs-string"><span class="hljs-string">'misc/cert.pem'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">passphrase</span></span>: <span class="hljs-string"><span class="hljs-string">'1234'</span></span> }).get(<span class="hljs-string"><span class="hljs-string">'/hello'</span></span>, (res, req) =&gt; {   <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span>   res.end(<span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>); }).ws(<span class="hljs-string"><span class="hljs-string">'/*'</span></span>, {   <span class="hljs-attr"><span class="hljs-attr">open</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ws, req</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'A WebSocket connected via URL: '</span></span> + req.getUrl() + <span class="hljs-string"><span class="hljs-string">'!'</span></span>);   },   <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ws, message, isBinary</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-comment"><span class="hljs-comment">/* OK   false          *     */</span></span>       <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ok = ws.send(message, isBinary);   },   <span class="hljs-attr"><span class="hljs-attr">drain</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ws</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'WebSocket backpressure: '</span></span> + ws.getBufferedAmount());   },   <span class="hljs-attr"><span class="hljs-attr">close</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ws, code, message</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'WebSocket closed'</span></span>);   } }).listen(port, (token) =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (token) {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Listening to port '</span></span> + port);   } });</code> </pre> <br>  بمعنى ما ، يمكننا القول أن µWebSockets.js باستخدام طبقة المقابس الآمنة (SSL) يمكنها تجاوز Gorilla WebSocket ، وهو تطبيق لبروتوكول WebSocket على الذهاب ، بدون طبقة المقابس الآمنة.  بمعنى ، اتضح أن كود JS يمكنه تبادل الرسائل باستخدام طبقة المقابس الآمنة بشكل أسرع من الشفرة المكتوبة في Go بدون طبقة مآخذ توصيل آمنة (SSL) في ظروف معينة.  أعتقد أن هذه نتيجة ممتازة. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">تنفيذ بروتوكول WebSocket سريع</font> </h2><br>  Socket.IO ، في نواح كثيرة ، يمكن اعتبار مكافئ Express في الوقت الحقيقي.  ظهر كلا المشروعين منذ فترة طويلة ، من السهل العمل معهم ، إنهما مشهوران.  لكنها ، من بين أمور أخرى ، بطيئة أيضا. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7eb/459/06d/7eb45906d3bb8f8867ed5f689223d441.png"></div><br>  <i><font color="#999999">تطبيقات WebSocket المختلفة</font></i> <br><br>  يتم تقليل المهام التي يساعد مطور Socket.IO في حلها إلى تنفيذ وظيفة نشر الرسائل والاشتراك فيها ، إلى القدرة على إرسال واستقبال الرسائل. <br><br>  في الوقت نفسه ، تجدر الإشارة إلى استخدام بعض آليات الغيار للعمل مع بروتوكول WebSocket ، لأن المتصفحات تدعم هذه التكنولوجيا لفترة طويلة.  لا يمكن تفسير حركة مرور طبقة المقابس الآمنة بواسطة وكلاء الشركة ، فهي تمر عبرها بنفس الطريقة مثل أي حركة مرور HTTP ، ونتيجة لذلك ، فإن استخدام بروتوكول WebSocket عبر طبقة المقابس الآمنة لا يحظر حركة المرور المقابلة.  يمكن توفير آليات احتياطية لدعم WebSocket ، لكن لا فائدة من استخدامها.  إنها تزيد فقط من تعقيد القرارات. <br><br>  أحد أهداف µWebSockets.js هو إعطاء ميزات للمطورين مماثلة لتلك الموجودة في Socket.IO بحيث يمكن لـ µWebSockets.js استبدال Socket.IO بالكامل دون الحاجة إلى أي مغلفات ذات مستوى أعلى .  يكون ذلك ممكنًا إذا لم يتم استخدام بروتوكول خاص غير قياسي. <br><br>  تواجه العديد من الشركات مشاكل في النشر والاشتراك في الرسائل أثناء العمل مع WebSocket.  تجدر الإشارة إلى أنه في الإصدار الموصوف من ebWebSockets.js لم يتم إيلاء الكثير من الاهتمام لهذه الميزات ، ولكن الآن يجري العمل الجاد بشأنها.  ستكون النتيجة سريعة جدًا (توضح الاختبارات أن µWebSockets.js أسرع بالفعل من Redis).  لذلك ترقبوا. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ملخص</font> </h2><br>  حاليًا µWebSockets.js قيد التطوير ، تتم إضافة ميزات جديدة إلى المشروع ، ويتم إصلاح الأخطاء.  سوف يستغرق الأمر بعض الوقت للتخلص من تلك العيوب البسيطة التي تميز الإصدارات الأولى من البرامج الجديدة.  ضع في اعتبارك أن هذا مشروع كبير يتكون من عدة آلاف من سطور التعليمات البرمجية المكتوبة في C و C ++ ، والتي يتم تخزينها في ثلاثة مستودعات.  <a href="">هنا</a> يكمن برنامج التفاف JavaScript - uWebSockets.js.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هنا</a> خادم ويب مكتوب في C ++ - uWebSockets.  وها هي المكتبة الأساسية المكتوبة بلغة سي. <br><br>  يتم استخدام المشروع المعني من قبل الشركات ، والبرامج المستخدمة من خلالها تخلق عبءًا كبيرًا على الأنظمة الفرعية للإدخال / الإخراج.  في هذه الشركات ، يعد الاستقرار والأمن ، وهو أمر طبيعي وواضح تمامًا ، أهم خصائص البرنامج الذي يستخدمونه. <br><br>  <b>أعزائي القراء!</b>  هل تخطط لاستخدام ebWebSockets.js في مشاريعك؟ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar439976/">https://habr.com/ru/post/ar439976/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar439966/index.html">محلل بسيط للعمليات الحسابية</a></li>
<li><a href="../ar439968/index.html">مساحة الجيل وفرصة الفرص</a></li>
<li><a href="../ar439970/index.html">تقرير عن المشاكل وإمكانية الوصول إلى الإنترنت في 2018-2019</a></li>
<li><a href="../ar439972/index.html">io_submit: بديل لل epoll لم تسمع به من قبل</a></li>
<li><a href="../ar439974/index.html">التحول رشيقة الشخصية: رحلة مرنة إلى الإنتاجية</a></li>
<li><a href="../ar439978/index.html">عامل إرساء التعلم ، الجزء 2: الشروط والمفاهيم</a></li>
<li><a href="../ar439980/index.html">تعلم عامل الميناء ، الجزء 3: ملفات Dockerfile</a></li>
<li><a href="../ar439982/index.html">رد فعل تعليمي ، الجزء 16: المرحلة الرابعة من العمل على تطبيق TODO ، معالجة الأحداث</a></li>
<li><a href="../ar439984/index.html">رد فعل تعليمي ، الجزء 17: المرحلة الخامسة من العمل على تطبيق TODO ، وتعديل حالة المكونات</a></li>
<li><a href="../ar439986/index.html">رقائق VS التهديدات لتكنولوجيا الحاويات</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>