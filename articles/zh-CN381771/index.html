<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏨 ✍🏻 🤹🏽 防止UPSNS-KO“定位器”背部入睡和控制姿势的装置 👩‍👩‍👧 👨🏾‍⚖️ 🤹🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="有一天，我发现那些正在怀孕的女士们在怀孕后期或多或少会有背睡的危险。问题在于，在这种情况下，血管在胎儿的重量之下被挤压，这威胁到非常严重的后果，甚至更多。
 
 因此，我认为对我来说做某种可能阻止它进入这种潜在危险情况的事情可能并不困难。当然，经过很短的时间后，我的眼睛睁开了一个事实，那就是聪明的女...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>防止UPSNS-KO“定位器”背部入睡和控制姿势的装置</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/381771/"><img src="https://habrastorage.org/files/572/fa4/209/572fa42091a344f3bc9fd22c980f9644.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有一天，我发现那些正在怀孕的女士们在怀孕后期或多或少会有背睡的危险。问题在于，在这种情况下，血管在胎儿的重量之下被挤压，这威胁到非常严重的后果，甚至更多。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，我认为对我来说做某种可能阻止它进入这种潜在危险情况的事情可能并不困难。当然，经过很短的时间后，我的眼睛睁开了一个事实，那就是聪明的女人会以一种完全自然的方式规避风险-他们在这些很晚的日子里根本不舒服地仰卧。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，不要扔掉已经购买的微控制器，加速度计和让头脑slav恼的出色创意，对吗？</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一下，还有其他动机。</font><font style="vertical-align: inherit;">从核心选项开始：</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/rfrNtlc7ur0%3Ffeature%3Doembed&amp;usg=ALkJrhhRlKcT6dU1zLsNvwM4Kayjwn1yvw" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后是一个完全迷人的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">姿势校正器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，说实话，我学到的知识比自己的见解晚。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，起初我想要简单而没有多余的装饰，像普通的Occam和普通的剃须刀一样。</font><font style="vertical-align: inherit;">也就是说，设备应该简单地固定位置，如果在给定时间内没有变化，则应通过振动将该宝贵信息传递给其所有者。</font><font style="vertical-align: inherit;">选择这样的通知对我来说很自然，因为第二年我一直戴着带有振动警报器的计步器手镯，这是一个奇迹。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，我们都知道振动信号并不适合所有人。</font><font style="vertical-align: inherit;">但是我对通用设备没有任何抱怨-您知道，到处都必须保持合理的平衡。</font><font style="vertical-align: inherit;">顺便说一句，这就是为什么在最终设计中已经有了我们最喜欢的Arduino环境，许多野蛮的解决方案，甚至是传奇的蓝色（确实是蓝色，水管工带来的）电工胶带。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，当我开始磨削未来闹钟的轮廓时，Occam的剃须刀坏了。</font><font style="vertical-align: inherit;">突然发现了其他潜在的才能，即：姿势控制和警告[办公室浮游生物]行动时间过长。</font><font style="vertical-align: inherit;">扩展功能的原因很普遍-很遗憾看到即使是最强大但仍然很严重的微控制器的资源也将消失。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">怎么运行的</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如您所知，定位器具有三种操作模式：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1）防止背部的睡眠（无论是在其他姿势还是其他姿势，对他来说都无所谓）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）姿势控制</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3）行动不便的警告</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
而且，您仍然不知道，只有一个按钮，它执行复位微控制器的功能。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，要选择所需的模式，只需执行以下两项操作即可：按下按钮并将定位器保持在三个位置中的一个（如果有象征意义的话），即位于背面，侧面或站立位置。为了将事物简单地置于待机模式（关闭模拟），您根本不需要做任何事情。也就是说，他们按下了一个按钮，将其放下-定位器进入睡眠状态。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
诀窍是什么？选择模式后或安乐死期间，定位器需要保持静止不动，因为在第一种情况下，定位器需要时间来记忆位置，而在第二种情况下，则需要理解到该睡觉了。主要有两个时间间隔：开机后的前五秒用于选择模式，接下来的十秒用于接收位置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一下，与此同时，十秒是有条件的概念，因为定位器仅在指定时间内相对位置不变时才记住“坐标”。这样，您就可以选择操作模式并从容地紧贴设备，而不必担心此操作会超时。但是，一上钩，就冻结了10秒钟，以便定位器了解到该开始做生意了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
换句话说，专心的读者已经猜到加速度计的读数是用来选择模式的，而我仍然在树上蔓延。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，您可以看到它在面包板上的原型示例中如何工作：</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/-VrpC1u-kQQ%3Ffeature%3Doembed&amp;usg=ALkJrhg44g2gNo9LF1sADQM6rAfYyNuW0A" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如您所见，一切都很简单。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在或多或少的最终版本中，警报的工作原理如下：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1）为防止背部出现睡眠，定位器将在约一分钟后触发并通过一系列8个信号唤醒，在任何情况下都不会中断，除了电池放电外。为了让他停止这样做，您应该以不同的方式躺下，等待一系列信号的结束。否则，将重复一系列信号。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）在姿势控制模式下，定位器可确保从5分钟间隔开始，在大约60％的时间内保持正确的姿势。否则，它会开始振动，直到您恢复正确的姿势。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3）在低移动性警告模式下，定位器确保从30分钟间隔开始至少有8％的时间用于移动。如果不是这样，它将一次产生一系列的10个信号，这些信号不会被中断，而是开始倒数新的间隔。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，可以通过按重置按钮来中断任何模式下的警报。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
至于间隔和通知可能看起来很奇怪，我从以下内容着手。在我看来，背面的一分钟足够长，并且8个信号没有中断（并且有可能反复接收相同量的信号）似乎足以唤醒。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一方面，姿势控制不是很关键，因此，首先，不需要100％的控制，其次，梦境中不太可能发生姿势控制，因此，当您返回所需位置时停止的信号就足够了。好吧，一直坐着，好像他已经吞下了阿信一样-有点愚蠢，不太可能。因此，控制间隔是可调的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最终，当我搜寻必要的最小运动量时，我提到每三小时15-20分钟或多或少就足够了。定位器设置考虑了该信息，但是如果需要，可以在“刷新”微控制器的阶段对其进行修改。同样，没有必要动摇一个人直到失去知觉，因为走或不走是自愿的。因此，只有十个振动信号形式的精致提示。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，所有这些间隔都不是教条，可以轻松更改。这将是一种愿望。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定位器由CR2032锂电池供电。睡眠模式（定位器的某些第四伪模式，而不是控制器）的电流消耗为4μA，出于拒绝专用电源开关的考虑，我认为这足以简化设计。在开始时以及直接确定位置时，功耗可能会在不到一秒的时间内超过2 mA，但除信号操作时刻外，功耗通常在1 mA以内。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在两次位置确定之间的间隔中，控制器处于掉电模式，该功耗类似于定位器的睡眠模式-4μA。控制器大约每8秒通过计时器唤醒一次-这是最大程度的节省电池的时间，并且对于所有模式的正确操作或多或少都是可以接受的。</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/s79nrV3qBKY%3Ffeature%3Doembed&amp;usg=ALkJrhj_K0OEbNw-ycZ3LAK4MH45c9Z8mA" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不幸的是，我无法计算出完全的自治权，因为我不知道如何做。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是怎么做的</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，一切都超出了我的头脑，其次，即兴演奏，其次是业余活动，因为对我来说，关闭这个姿势比将它提高到绝对程度更有趣。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，在将来，我们将牢记我们在谈论一种非常具体且单一的实现。</font><font style="vertical-align: inherit;">您需要为此：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1）ATtiny85微控制器（例如，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此类</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）组装加速度计ADXL335（例如，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此类</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或立即用3.3V电源供电）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3）手机振动电机（我需要大量维修才能修理）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4）按钮（我拿了从分解遥控器）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5）2.2千欧姆电阻器</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6）键入1N4007二极管（I有类似KD522</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7）NPN晶体管，例如2N2222（我从破损的DVD中取出东西）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8）电池（CR2032）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
9）一个合适的情况</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该方案如下：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">在一个非常有趣的ELSE项目中，</font></a></font><br>
<br>
<img src="https://habrastorage.org/files/b83/f21/404/b83f214045f543828bedf9fdaf7e370a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
我诚实地</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">窃取了</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关电动机连接</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">的</font></a><font style="vertical-align: inherit;">部分</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一句，我强烈推荐</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sparkfun提供的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如此精美的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">图片，以至于不能不</font></a><font style="vertical-align: inherit;">引用它：</font></font><br>
<br>
<img src="https://habrastorage.org/files/958/d70/af8/958d70af8e4443758ac6d9f089d20cba.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
还有另外一个技巧。最重要的是，至少有两个带有ADXL335加速度计的电路板版本：3.3V和最高5V。实际上，加速度计的工作电压范围为1.8V至3.6V，因此第二个版本与第一个版本的区别在于存在稳压器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。这是一个带有稳定器的（加速度计左侧的三足蟑螂）。照片</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tinydeal</font></font></a><br>
<img src="https://habrastorage.org/files/541/339/d75/541339d75e2f4f64ab3ab39011254d62.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
。而且这没有稳定剂摄影：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hobby Electronics</font></font></a><br>
<img src="https://habrastorage.org/files/1d8/7ce/a57/1d87cea5756d466598e2d885e5934620.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
。还有一个混合选项-您可以从3.3V单独供电（过去通过稳定器，而在5V时通过稳定器）。照片由</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adafruit的</font></font></a><br>
<img src="https://habrastorage.org/files/f4c/079/674/f4c079674251407995820c2b3327b342.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
我现在已经与从5V两种工作的稳定，这是不奇怪的董事会，并从3.3V（我检查）。但是由于我没有理由加热稳定器并因此浪费了电池，因此在设备的最终版本中，我绕过了稳定器，直接将加速度计电源直接连接到了它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。要绕过稳定器，您可以在开发板和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADXL335数据表上浏览</font></font></a><br>
<img src="https://habrastorage.org/files/fc7/61e/382/fc761e3826d84a6ea4433ed37f2dd095.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
谈论ATtiny85微控制器也不同的事实可能仍然有意义。带有ATtiny85-20类型标记的芯片在商店中最常见且更便宜，而ATtiny85-10则越来越便宜。从制造定位器的角度来看（根据</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据表</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），最重要的区别是ATtiny85-20的工作电压范围为2.7V-5.5V，ATtiny85-10的工作电压范围为1.8V-5.5V。那些。从最充分地利用电池容量的角度来看，第二个更为可取。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二个差异是20 MHz与10 MHz的时钟频率。尽管对于定位器来说，这通常并不重要：它在1 MHz下工作，并且不会抱怨寿命。但是由于我刚拿到了第一件便宜的东西，所以我只有ATtiny85-20。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后，如果对某个人还是个谜，我将加速度计连接到了控制器，原因是最容易在定位器的睡眠模式下将其关闭（加速度计）。否则，我们将不断漏出高达350μA的电流（根据ADXL335数据手册）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他用壁挂式安装装置组装了所有组件，并用搪瓷的0.1毫米漆包线（标有跳线）将元件连接起来，其中一对线圈是好中国人给我的，还有一个焊接站。而我已经一年不知道去哪里了。理想的结果是：用300C烙铁和传统松香将导线完全撕开，并且足够方便地焊接ATtiny85和SOT23封装中的晶体管。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这导致了相当实用的景观：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。什么组件-和设置。一次在B＆D精品店中购买一件非常无利可图</font></font><br>
<img src="https://habrastorage.org/files/e5c/f46/690/e5cf46690c5849f1a061bc5b174013e4.jpg"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">算法和代码</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定位器工作的基本算法如下：</font></font><br>
<br>
<img src="https://habrastorage.org/files/b9c/3bc/6db/b9c3bc6dbebc42cfa7ccf22fb1cf1bd9.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作为编程环境，我完全选择Arduino作为替代方案，因为现在至少让它做得不好，但我只熟悉它。</font><font style="vertical-align: inherit;">好吧，我在一开始就提到了格式塔-这也解释了为什么我不学习C ++来制作定位器这一事实。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
至于代码，我应该给出一些评论。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基于设备的使用模型（开机并忘记提示，直到忘记），非常需要忘记每天更换电池。</font><font style="vertical-align: inherit;">为此，您需要认真节省能源，这是非常有可能的，因为ATtiny85数据表中提到的最低消耗量是微安规的十分之一。</font><font style="vertical-align: inherit;">我必须马上说-我没有上升（或没有下降？）到这样的高度。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，我再次选择了最简单的方法。即-谷歌搜索需要什么。第一个是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过看门狗定时器唤醒使ATtiny85进入最深睡眠模式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">代码</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同时，以毫安为单位的电流消耗下降到数百微安。它已经很漂亮了，但还不够漂亮。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我不得不进一步看。然后事实证明，睡眠是一场梦，需要手动关闭外围设备。同时，即使在睡眠模式下，大部分的能量也会被ADC消耗掉。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里写</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在睡眠期间关闭ADC后，定位器的电源变得和我能用谷歌搜索到的一样和谐。也就是说，正如我在上面所写，在测量过程中唤醒时的最小功耗为4μA-数十或数百微安，而在振动电机运行时，其功耗可能超过2 mA。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以通过以下事实来估计这种代码混合的可行性：CR2032在定位器中以测试模式工作了一周的时间远没有第一次新鲜。当然，大多数时间是在待机模式下，但活动时间是不错的。简而言之，它接近实际使用模型。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关于使用加速度计的工作。事实是，据我所知，我从绝对值中抽象出来。有几个原因。首先，可以以这种方式更改加速度计，而无需考虑特定硬件的工作原理。其次，对于重言式，我没有铁保证，如果在电池放电过程中不可避免的电压下降，与微控制器中ADC处理相关的加速度计读数不会“浮动”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后，将设置放置在变量声明部分中。我就是这么称赞自己的-因为对定位器进行微调，您不必查找所有代码并在搜索需要替换值的所有片段时用不好的话记住我。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据通用说明，代码已通过Arduino Mega上传到ATtiny85。</font><font style="vertical-align: inherit;">那些。</font><font style="vertical-align: inherit;">首先</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载了针对其Arduino环境版本的ATtiny支持</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，像往常一样，他将档案文件的内容（包含所有内容的小目录）解压缩到他的Arduino目录的硬件文件夹中：</font></font><br>
<br>
<img src="https://habrastorage.org/files/4f5/377/097/4f53770976714f03926e48ecff490afc.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后我进入该目录，并根据说明制作了boards.txt文件，从现有文件中复制了Prospective Boards.txt我需要的-即 </font><font style="vertical-align: inherit;">ATtiny 1 MHz的描述，以防万一，为8 MHz。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是boards.txt</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">attiny85at8.name=ATtiny85 @ <span class="hljs-number">8</span> MHz  (internal oscillator; BOD disabled)<font></font>
<font></font>
# The following <span class="hljs-keyword">do</span> NOT work...<font></font>
# attiny85at8.upload.<span class="hljs-keyword">using</span>=avrispv2<font></font>
# attiny85at8.upload.<span class="hljs-keyword">using</span>=Pololu USB AVR Programmer<font></font>
<font></font>
# The following DO work (pick one)...<font></font>
attiny85at8.upload.<span class="hljs-keyword">using</span>=arduino:arduinoisp<font></font>
# attiny85at8.upload.protocol=avrispv2<font></font>
# attiny85at8.upload.<span class="hljs-keyword">using</span>=pololu<font></font>
<font></font>
attiny85at8.upload.maximum_size=<span class="hljs-number">8192</span><font></font>
<font></font>
# Default clock (slowly rising power; <span class="hljs-keyword">long</span> delay to clock; <span class="hljs-number">8</span> MHz internal)<font></font>
# Int. RC Osc. <span class="hljs-number">8</span> MHz; Start-up time PWRDWN/RESET: <span class="hljs-number">6</span> CK/<span class="hljs-number">14</span> CK + <span class="hljs-number">64</span> ms; [CKSEL=<span class="hljs-number">0010</span> SUT=<span class="hljs-number">10</span>]; <span class="hljs-keyword">default</span> value<font></font>
# Brown-out detection disabled; [BODLEVEL=<span class="hljs-number">111</span>]<font></font>
# Preserve EEPROM memory through the Chip Erase cycle; [EESAVE=<span class="hljs-number">0</span>]<font></font>
<font></font>
attiny85at8.bootloader.low_fuses=<span class="hljs-number">0xE2</span><font></font>
attiny85at8.bootloader.high_fuses=<span class="hljs-number">0xD7</span><font></font>
attiny85at8.bootloader.extended_fuses=<span class="hljs-number">0xFF</span><font></font>
attiny85at8.bootloader.path=empty<font></font>
attiny85at8.bootloader.file=empty85at8.hex<font></font>
<font></font>
attiny85at8.build.mcu=attiny85<font></font>
attiny85at8.build.f_cpu=<span class="hljs-number">8000000L</span><font></font>
attiny85at8.build.core=tiny<font></font>
 <font></font>
###########################################################################<font></font>
###########################################################################<font></font>
<font></font>
attiny85at1.name=ATtiny85 @ <span class="hljs-number">1</span> MHz  (internal oscillator; BOD disabled)<font></font>
<font></font>
# The following <span class="hljs-keyword">do</span> NOT work...<font></font>
# attiny85at1.upload.<span class="hljs-keyword">using</span>=avrispv2<font></font>
# attiny85at1.upload.<span class="hljs-keyword">using</span>=Pololu USB AVR Programmer<font></font>
<font></font>
# The following DO work (pick one)...<font></font>
attiny85at1.upload.<span class="hljs-keyword">using</span>=arduino:arduinoisp<font></font>
# attiny85at1.upload.protocol=avrispv2<font></font>
# attiny85at1.upload.<span class="hljs-keyword">using</span>=pololu<font></font>
<font></font>
attiny85at1.upload.maximum_size=<span class="hljs-number">8192</span><font></font>
<font></font>
# Default clock (slowly rising power; <span class="hljs-keyword">long</span> delay to clock; <span class="hljs-number">8</span> MHz internal; divide clock by <span class="hljs-number">8</span>)<font></font>
# Int. RC Osc. <span class="hljs-number">8</span> MHz; Start-up time PWRDWN/RESET: <span class="hljs-number">6</span> CK/<span class="hljs-number">14</span> CK + <span class="hljs-number">64</span> ms; [CKSEL=<span class="hljs-number">0010</span> SUT=<span class="hljs-number">10</span>]; <span class="hljs-keyword">default</span> value<font></font>
# Divide clock by <span class="hljs-number">8</span> internally; [CKDIV8=<span class="hljs-number">0</span>]<font></font>
# Brown-out detection disabled; [BODLEVEL=<span class="hljs-number">111</span>]<font></font>
# Preserve EEPROM memory through the Chip Erase cycle; [EESAVE=<span class="hljs-number">0</span>]<font></font>
<font></font>
attiny85at1.bootloader.low_fuses=<span class="hljs-number">0x62</span><font></font>
attiny85at1.bootloader.high_fuses=<span class="hljs-number">0xD7</span><font></font>
attiny85at1.bootloader.extended_fuses=<span class="hljs-number">0xFF</span><font></font>
attiny85at1.bootloader.path=empty<font></font>
attiny85at1.bootloader.file=empty85at1.hex<font></font>
<font></font>
attiny85at1.build.mcu=attiny85<font></font>
attiny85at1.build.f_cpu=<span class="hljs-number">1000000L</span><font></font>
attiny85at1.build.core=tiny<font></font>
 <font></font>
###########################################################################<font></font>
###########################################################################<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，我启动了Arduino，确保必要的ATtiny出现在“服务-板”菜单中：我</font></font><br>
<br>
<img src="https://habrastorage.org/files/346/c76/a70/346c76a700674f67b9038df11721c9d0.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
连接了（当然，选择了正确的板）Arduino Mega 2560，并从示例中将Arduino ISP草图写入其中：</font></font><br>
<br>
<img src="https://habrastorage.org/files/6ad/bc0/943/6adbc0943925489696abc7499b4a0e86.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，我根据</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mega 2560引脚</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接将ATtiny连接到Mega </font><font style="vertical-align: inherit;">和Arduino ISP草图中的说明：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// pin name:    not-mega:         mega(1280 and 2560)</span><font></font>
<span class="hljs-comment">// slave reset: 10:               53 </span><font></font>
<span class="hljs-comment">// MOSI:        11:               51 </span><font></font>
<span class="hljs-comment">// MISO:        12:               50 </span><font></font>
<span class="hljs-comment">// SCK:         13:               52 </span><font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，我将ATtiny连接到电源和地面，在我的情况下，两条线都与程序员共享，即 </font><font style="vertical-align: inherit;">Mega 2560，尽管我们都知道总数的必要最小值是SPI，复位和接地线。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当一切准备就绪后，首先（不要忘记选择ATtiny85板），引导程序写道：</font></font><br>
<br>
<img src="https://habrastorage.org/files/2d5/fe3/ef1/2d5fe3ef134944ea921ad53bada88675.jpg"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在他之后-实际上是草图</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment">// </span><font></font>
<span class="hljs-comment">// http://donalmorrissey.blogspot.ru/2010/04/sleeping-arduino-part-5-wake-up-via.html</span><font></font>
<span class="hljs-comment">// http://www.technoblogy.com/show?KX0</span><font></font>
<font></font>
<span class="hljs-comment">/* </span><font></font><span class="hljs-comment">
 . 			</span><font></font><span class="hljs-comment">
 - . 		</span><font></font><span class="hljs-comment">
 - ..		</span><font></font><span class="hljs-comment">
 - ...		</span><font></font><span class="hljs-comment">
 - 			    </span><font></font><span class="hljs-comment">
 ...			 </span><font></font><span class="hljs-comment">
 --			, </span><font></font><span class="hljs-comment">
 .......... 	</span><font></font><span class="hljs-comment">
 */</span><font></font>
<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;avr/sleep.h&gt;</span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;avr/power.h&gt;</span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;avr/wdt.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> f_wdt=<span class="hljs-number">1</span>;<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> xPin A1 <span class="hljs-comment">//   X</span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> yPin A2 <span class="hljs-comment">//   Y</span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> zPin A3 <span class="hljs-comment">//   Z</span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> alPin 0 <span class="hljs-comment">//   </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> posPowPin 1 <span class="hljs-comment">//   </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> timeLimit 10000 <span class="hljs-comment">//    </span></span><font></font>
 <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> posCountSleep 9 <span class="hljs-comment">//      (*8 ) 8</span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> posCountMove 231 <span class="hljs-comment">//      (*8 ) 230</span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> posCountBack 41 <span class="hljs-comment">//      40</span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> tresholdSleep 25 <span class="hljs-comment">//     </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> tresholdMove 25 <span class="hljs-comment">//    </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> tresholdBack 20 <span class="hljs-comment">//     </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> movPercentMove 92 <span class="hljs-comment">//   ( %)   </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> movPercentBack 40 <span class="hljs-comment">//    ( %)   </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> startTimeOut 5000<span class="hljs-comment">//         </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> motionTimeOut 1500<span class="hljs-comment">//        </span></span><font></font>
<font></font>
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> timeOut; <span class="hljs-comment">//    </span><font></font>
byte treshold = <span class="hljs-number">15</span>; <span class="hljs-comment">//    </span><font></font>
<span class="hljs-keyword">int</span> posCounter = <span class="hljs-number">1</span>; <span class="hljs-comment">//    </span><font></font>
byte posMode = <span class="hljs-number">0</span>; <span class="hljs-comment">//   (  -  = 0;    - 1;  - 2;  - 3)</span><font></font>
<span class="hljs-keyword">int</span> posTolerance = <span class="hljs-number">0</span>; <span class="hljs-comment">//         ( 009b).</span><font></font>
<span class="hljs-keyword">int</span> x, y, z, x1, y1, z1; <span class="hljs-comment">// </span><font></font>
<span class="hljs-keyword">int</span> relX, relY, relZ; <span class="hljs-comment">//    </span><font></font>
<span class="hljs-keyword">int</span> posCount; <span class="hljs-comment">//     </span><font></font>
boolean alarmRaised = <span class="hljs-literal">false</span>; <span class="hljs-comment">//  </span><font></font>
boolean standBy = <span class="hljs-literal">false</span>; <span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-comment">// http://www.technoblogy.com/show?KX0</span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> adc_disable() (ADCSRA &amp;= ~(1&lt;&lt;ADEN)) <span class="hljs-comment">// disable ADC (before power-off) </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> adc_enable()  (ADCSRA |=  (1&lt;&lt;ADEN)) <span class="hljs-comment">// re-enable ADC</span></span><font></font>
<font></font>
ISR(WDT_vect)<font></font>
{<font></font>
  <span class="hljs-keyword">if</span>(f_wdt == <span class="hljs-number">0</span>)<font></font>
  {<font></font>
    f_wdt=<span class="hljs-number">1</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">enterSleep</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><font></font><span class="hljs-function">
</span>{<font></font>
  pinMode(alPin, INPUT);<font></font>
  pinMode(posPowPin, INPUT);<font></font>
<font></font>
  adc_disable();<font></font>
  set_sleep_mode(SLEEP_MODE_PWR_DOWN);  <font></font>
<font></font>
  sleep_enable();<font></font>
<font></font>
  sleep_mode();<font></font>
<font></font>
  sleep_disable(); <font></font>
<font></font>
  power_all_enable();<font></font>
  adc_enable();<font></font>
<font></font>
  pinMode(alPin, OUTPUT);<font></font>
  digitalWrite(alPin, LOW);<font></font>
<font></font>
  pinMode(posPowPin, OUTPUT);<font></font>
  digitalWrite(posPowPin, LOW);<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">/*** Setup the WDT ***/</span><font></font>
<font></font>
  <span class="hljs-comment">/* Clear the reset flag. */</span><font></font>
  MCUSR &amp;= ~(<span class="hljs-number">1</span>&lt;&lt;WDRF);<font></font>
<font></font>
  <span class="hljs-comment">/* In order to change WDE or the prescaler, we need to</span><font></font><span class="hljs-comment">
   * set WDCE (This will allow updates for 4 clock cycles).</span><font></font><span class="hljs-comment">
   */</span><font></font>
  WDTCR |= (<span class="hljs-number">1</span>&lt;&lt;WDCE) | (<span class="hljs-number">1</span>&lt;&lt;WDE);<font></font>
<font></font>
  <span class="hljs-comment">/* set new watchdog timeout prescaler value */</span><font></font>
  WDTCR = <span class="hljs-number">1</span>&lt;&lt;WDP0 | <span class="hljs-number">1</span>&lt;&lt;WDP3; <span class="hljs-comment">/* 8.0 seconds */</span><font></font>
<font></font>
  <span class="hljs-comment">/* Enable the WD interrupt (note no reset). */</span><font></font>
  WDTCR |= _BV(WDIE);<font></font>
<font></font>
  <span class="hljs-comment">//   </span><font></font>
  pinMode(alPin, OUTPUT);<font></font>
  digitalWrite(alPin, LOW);<font></font>
<font></font>
  <span class="hljs-comment">//   </span><font></font>
  pinMode(posPowPin, OUTPUT);<font></font>
  digitalWrite(posPowPin, LOW);<font></font>
<font></font>
  pinMode(xPin, INPUT);<font></font>
  pinMode(yPin, INPUT);<font></font>
  pinMode(zPin, INPUT);<font></font>
<font></font>
  delay(<span class="hljs-number">1000</span>); <span class="hljs-comment">// -</span><font></font>
  blinker(<span class="hljs-number">500</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">//   </span><font></font>
<font></font>
  <span class="hljs-keyword">if</span> (motionDetect(startTimeOut) == <span class="hljs-literal">true</span>) {<font></font>
<font></font>
    getPos(); <span class="hljs-comment">//  	</span><font></font>
<font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(x1-y1) &gt; <span class="hljs-built_in">abs</span>(x1-z1)) {<font></font>
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(x1-z1) &gt; <span class="hljs-built_in">abs</span>(y1-z1)) {<font></font>
        selectX(); <span class="hljs-comment">// x</span><font></font>
      } <font></font>
      <span class="hljs-keyword">else</span> {<font></font>
        posMode = <span class="hljs-number">2</span>; <span class="hljs-comment">// y</span><font></font>
        posCount = posCountMove; <span class="hljs-comment">//   </span><font></font>
        treshold = tresholdMove;		<font></font>
        blinker(<span class="hljs-number">1000</span>, <span class="hljs-number">1</span>);<font></font>
        blinker(<span class="hljs-number">500</span>, <span class="hljs-number">2</span>);  <font></font>
      }<font></font>
    } <font></font>
    <span class="hljs-keyword">else</span> {<font></font>
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(x1-y1) &gt; <span class="hljs-built_in">abs</span>(z1-y1)) {<font></font>
        selectX(); <span class="hljs-comment">//x</span><font></font>
      } <font></font>
      <span class="hljs-keyword">else</span> {<font></font>
        posMode = <span class="hljs-number">1</span>; <span class="hljs-comment">// z</span><font></font>
        posCount = posCountSleep; <span class="hljs-comment">//    		</span><font></font>
        treshold = tresholdSleep;<font></font>
        blinker(<span class="hljs-number">1000</span>, <span class="hljs-number">1</span>);<font></font>
        blinker(<span class="hljs-number">500</span>, <span class="hljs-number">1</span>);    <font></font>
      }<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (posMode &gt; <span class="hljs-number">0</span>) {<font></font>
<font></font>
    getPos(); <span class="hljs-comment">//  </span><font></font>
    x = x1; <span class="hljs-comment">//  </span><font></font>
    y = y1;<font></font>
    z = z1;<font></font>
    timeOut = millis();	<font></font>
<font></font>
    <span class="hljs-keyword">while</span> ((millis() - timeOut) &lt; timeLimit) {<font></font>
      getPos();<font></font>
      <span class="hljs-keyword">if</span> (comparePos(x, y, z, x1, y1, z1) == <span class="hljs-literal">false</span>) { <span class="hljs-comment">//    -  </span><font></font>
        blinker(<span class="hljs-number">1000</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">//    </span><font></font>
        x = x1; <font></font>
        y = y1; <font></font>
        z = z1;<font></font>
        timeOut = millis();<font></font>
      }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//       </span><font></font>
    standBy = <span class="hljs-literal">true</span>;<font></font>
    blinker(<span class="hljs-number">500</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">//   </span><font></font>
  }<font></font>
  <span class="hljs-keyword">else</span> {<font></font>
    blinker(<span class="hljs-number">1500</span>, <span class="hljs-number">2</span>);<font></font>
  }	<font></font>
<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(f_wdt == <span class="hljs-number">1</span>) {<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (posMode == <span class="hljs-number">0</span>) {<font></font>
      <span class="hljs-comment">/* Don't forget to clear the flag. */</span><font></font>
      f_wdt = <span class="hljs-number">0</span>;<font></font>
<font></font>
      <span class="hljs-comment">/* Re-enter sleep mode. */</span><font></font>
      enterSleep();<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span> {<font></font>
<font></font>
      getPos();<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (posCounter &lt;= posCount &amp;&amp; alarmRaised == <span class="hljs-literal">false</span>) { <span class="hljs-comment">//          </span><font></font>
      <font></font>
      <span class="hljs-keyword">if</span> (posMode == <span class="hljs-number">2</span>) { <span class="hljs-comment">//    </span><font></font>
        <span class="hljs-keyword">if</span> (motionDetect(motionTimeOut) == <span class="hljs-literal">true</span>) { <span class="hljs-comment">//      </span><font></font>
          posTolerance = posTolerance++; <span class="hljs-comment">//   </span><font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> ((posCounter - posTolerance) &gt; (posCount*movPercentMove)/<span class="hljs-number">100</span>) { <span class="hljs-comment">//      %   </span><font></font>
          alarmRaised = <span class="hljs-literal">true</span>; <span class="hljs-comment">//   </span><font></font>
        } <font></font>
<font></font>
      } <span class="hljs-keyword">else</span> { <span class="hljs-comment">//   </span><font></font>
          <span class="hljs-keyword">if</span> (comparePos(x, y, z, x1, y1, z1) == <span class="hljs-literal">true</span>) { <span class="hljs-comment">//    </span><font></font>
            posTolerance = posTolerance++; <span class="hljs-comment">//   ""  (       )</span><font></font>
          }<font></font>
        }<font></font>
      <font></font>
        <font></font>
        <span class="hljs-keyword">if</span> (posMode == <span class="hljs-number">1</span>) { <span class="hljs-comment">//   </span><font></font>
          <span class="hljs-keyword">if</span> (posTolerance &gt;= (posCount - <span class="hljs-number">1</span>)) { <span class="hljs-comment">//     </span><font></font>
            alarmRaised = <span class="hljs-literal">true</span>; <span class="hljs-comment">//   </span><font></font>
          } <font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (posMode == <span class="hljs-number">3</span>) { <span class="hljs-comment">//    </span><font></font>
          <span class="hljs-keyword">if</span> ((posCounter - posTolerance) &gt; (posCount*movPercentBack)/<span class="hljs-number">100</span>) { <span class="hljs-comment">//       %   </span><font></font>
            alarmRaised = <span class="hljs-literal">true</span>; <span class="hljs-comment">//   </span><font></font>
          } <font></font>
        }<font></font>
<font></font>
       posCounter++;<font></font>
<font></font>
      } <font></font>
      <span class="hljs-keyword">else</span> { <span class="hljs-comment">//    </span><font></font>
<font></font>
       posCounter = <span class="hljs-number">1</span>; <span class="hljs-comment">//   </span><font></font>
       posTolerance = <span class="hljs-number">0</span>;<font></font>
       <font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (alarmRaised == <span class="hljs-literal">true</span>) { <span class="hljs-comment">//   </span><font></font>
<font></font>
        <span class="hljs-keyword">if</span> (posMode == <span class="hljs-number">1</span>) { <span class="hljs-comment">//   </span><font></font>
          blinker(<span class="hljs-number">500</span>, <span class="hljs-number">8</span>); <span class="hljs-comment">// 8  ...</span><font></font>
          getPos(); <font></font>
          <span class="hljs-keyword">if</span> (comparePos(x, y, z, x1, y1, z1) == <span class="hljs-literal">false</span>) { <span class="hljs-comment">// ... </span><font></font>
            alarmRaised = <span class="hljs-literal">false</span>; <span class="hljs-comment">//  </span><font></font>
            posCounter = <span class="hljs-number">0</span>;<font></font>
          }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (posMode == <span class="hljs-number">2</span>) { <span class="hljs-comment">//   </span><font></font>
          blinker(<span class="hljs-number">500</span>, <span class="hljs-number">10</span>); <span class="hljs-comment">// 10 </span><font></font>
          alarmRaised = <span class="hljs-literal">false</span>; <span class="hljs-comment">//   </span><font></font>
          posCounter = <span class="hljs-number">0</span>;<font></font>
        } <font></font>
<font></font>
        <span class="hljs-keyword">if</span> (posMode == <span class="hljs-number">3</span>) { <span class="hljs-comment">//   </span><font></font>
          blinker(<span class="hljs-number">500</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">//    ...</span><font></font>
          getPos();<font></font>
          <span class="hljs-keyword">if</span> (comparePos(x, y, z, x1, y1, z1) == <span class="hljs-literal">true</span>) { <span class="hljs-comment">// ...  </span><font></font>
            alarmRaised = <span class="hljs-literal">false</span>; <span class="hljs-comment">//   </span><font></font>
            posCounter = <span class="hljs-number">0</span>;<font></font>
          }<font></font>
        }<font></font>
        <font></font>
        posTolerance = <span class="hljs-number">0</span>; <span class="hljs-comment">//    </span><font></font>
      } <font></font>
      <span class="hljs-keyword">else</span> {<font></font>
        <span class="hljs-comment">/* Don't forget to clear the flag. */</span><font></font>
        f_wdt = <span class="hljs-number">0</span>;<font></font>
<font></font>
        <span class="hljs-comment">/* Re-enter sleep mode. */</span><font></font>
        enterSleep();<font></font>
      }<font></font>
    } <span class="hljs-comment">// posMode == 0</span><font></font>
  } <span class="hljs-comment">// wdt</span><font></font>
} <span class="hljs-comment">// loop</span><font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">blinker</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> impulse, byte times)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">for</span> (byte ttimes = <span class="hljs-number">0</span>; ttimes &lt; times; ttimes++) {<font></font>
<font></font>
    digitalWrite(alPin, HIGH);<font></font>
    delay(impulse);<font></font>
    digitalWrite(alPin, LOW);<font></font>
    delay(impulse);<font></font>
<font></font>
  }<font></font>
<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">//     </span><font></font>
<span class="hljs-function">boolean <span class="hljs-title">comparePos</span><span class="hljs-params">(<span class="hljs-keyword">int</span> xOne, <span class="hljs-keyword">int</span> yOne, <span class="hljs-keyword">int</span> zOne, <span class="hljs-keyword">int</span> xTwo, <span class="hljs-keyword">int</span> yTwo, <span class="hljs-keyword">int</span> zTwo)</span> </span>{<font></font>
<font></font>
  boolean compareRes = <span class="hljs-literal">false</span>;<font></font>
<font></font>
  relX = xOne - xTwo;<font></font>
  relY = yOne - yTwo;<font></font>
  relZ = zOne - zTwo;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(relX) &lt; treshold &amp;&amp; <span class="hljs-built_in">abs</span>(relY) &lt; treshold &amp;&amp; <span class="hljs-built_in">abs</span>(relZ) &lt; treshold) {<font></font>
    compareRes = <span class="hljs-literal">true</span>; <span class="hljs-comment">//      </span><font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> compareRes;<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function">boolean <span class="hljs-title">motionDetect</span><span class="hljs-params">(<span class="hljs-keyword">int</span> detectTimeOut)</span> </span>{<font></font>
 <font></font>
  boolean motionDetected = <span class="hljs-literal">false</span>;<font></font>
  <font></font>
  getPos();<font></font>
  x = x1; y = y1; z = z1; <span class="hljs-comment">//   ,       ,    </span><font></font>
  timeOut = millis();<font></font>
  <font></font>
  <span class="hljs-keyword">while</span> (((millis() - timeOut) &lt; detectTimeOut)) { <span class="hljs-comment">//    detectTimeOut ,       </span><font></font>
   <span class="hljs-keyword">if</span> (motionDetected == <span class="hljs-literal">false</span>) { <span class="hljs-comment">//    </span><font></font>
    <span class="hljs-keyword">if</span> (comparePos(x, y, z, x1, y1, z1) == <span class="hljs-literal">false</span>) { <span class="hljs-comment">//     </span><font></font>
      motionDetected = <span class="hljs-literal">true</span>; <span class="hljs-comment">//   </span><font></font>
    } <font></font>
    <span class="hljs-keyword">else</span> {<font></font>
      getPos();<font></font>
    }<font></font>
   }<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">return</span> motionDetected;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPos</span><span class="hljs-params">()</span></span>{<font></font>
<font></font>
  digitalWrite(posPowPin, HIGH);<font></font>
  delay(<span class="hljs-number">10</span>);<font></font>
<font></font>
  byte i;<font></font>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> posX = <span class="hljs-number">0</span>;<font></font>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> posY = <span class="hljs-number">0</span>;<font></font>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> posZ = <span class="hljs-number">0</span>;<font></font>
<font></font>
  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {<font></font>
    posX = posX + analogRead(xPin);<font></font>
    posY = posY + analogRead(yPin);<font></font>
    posZ = posZ + analogRead(zPin);<font></font>
  }<font></font>
<font></font>
  x1 = posX/<span class="hljs-number">100</span>;<font></font>
  y1 = posY/<span class="hljs-number">100</span>;<font></font>
  z1 = posZ/<span class="hljs-number">100</span>;<font></font>
<font></font>
  digitalWrite(posPowPin, LOW); <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">selectX</span><span class="hljs-params">()</span> </span>{<font></font>
  posMode = <span class="hljs-number">3</span>;<font></font>
  posCount = posCountBack; <span class="hljs-comment">//   		</span><font></font>
  treshold = tresholdBack;<font></font>
  blinker(<span class="hljs-number">1000</span>, <span class="hljs-number">1</span>);<font></font>
  blinker(<span class="hljs-number">500</span>, <span class="hljs-number">3</span>);<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
</code></pre><br>
</div></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">住房</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从一开始，我就没有幻想过必须从头开始从头完成此案。我很快拒绝的第一个想法是要得到一个装有几块胶合聚苯乙烯板的盒子。由于材料的足够高的强度和刚度，这将是可悲的-就像瑞士手表的排版表壳一样-并且非常可靠。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，我从指定的聚苯乙烯（仅1.5毫米厚）上</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切下</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了第二种</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">Eulampia</font></a><font style="vertical-align: inherit;">的盖子后，我的热情消失了一点</font><font style="vertical-align: inherit;">。事实证明这很困难-仅用一把地毯刀将聚苯乙烯切掉。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，当另一种照明发生时，我感到非常高兴-您需要取容易形成所需形状的聚合物黏土，然后烘烤直至固体。更准确地说，在我看来是这样，因为我没有考虑到一个重要的细节：我知道环氧树脂没有硬化，聚合物粘土没有特别好地硬化。但这是歌词。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我以最紧凑的方式分解了组件，估算了车身的尺寸，并制作了相应形式的纸板模板，并用聚合物粘土填充了它。然后，他在仍然较软的物体上切出必要的孔，并按照说明进行烘烤。然后持续相同的时间，因为粘土不想硬化。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一句，电池开一个直径稍大的孔是合乎逻辑的，因此，在研究俄罗斯银行网站后，我发现10卢布硬币很适合这种作用，由于直径为22毫米，自2010年以来就铸造了。仅有一点余量，CR2032才能正常落入电池盒中，我很早就从弹簧上装有一个触点，该触点早已从其他电池盒中取出。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，我也借用了电池仓的设计，因为我几乎无法想出更好的东西，这消除了倒车时的头痛。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。这样的事情在过程中</font></font><br>
<img src="https://habrastorage.org/files/b0c/675/008/b0c6750080304ae4848f9cd3cb16f04f.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。所以在我不得不拆开已经粘着的身体之后</font></font><br>
<img src="https://habrastorage.org/files/e80/366/d05/e80366d05c5f4e428c206ec9e03b834c.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
就是说，一切都非常简单：我连接了组件，将其轻轻按下，然后将其删除-沿轮廓将其切出。好吧，再加上发布的广告位和渠道。有什么好处：定位器上放了一块很小的粘土。自然，我买了最小的一包57包，但我仍然有50克这种有价值的原料。这是第一个。第二：为了不影响静止塑料布局的几何形状，您可以烘烤它而不必将其从纸板上移开，因为所需的温度是100C-110C，即远离纸火。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在箱子的框架以某种方式烘烤后，用刀将其边缘稍微修剪一下。在尝试了这些成分之后，我发现这种＃$％＆*＃粘土不仅没有像应有的那样硬化，而且在烘烤过程中也被“油炸”了。因此，我不得不小心地扩大切口。幸运的是，所得材料不是石头。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上壁和下壁的问题借助于塑料卡的碎片得以解决，该塑料卡与半毫米的聚苯乙烯不同，可以用简单的剪刀完美地切割。我立即固定了底壁（顶部也是如此，但徒劳），但最后我的行为与顶部不同。即：将其放在框架上并小心地将所得结构包装到热缩管中。这种方法的优点是，如有必要，可以轻松拆卸所有零件以进行防水密封，并且同样易于重新组装。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。令人心碎的眼镜</font></font><br>
<img src="https://habrastorage.org/files/85f/3cf/9f9/85f3cf9f9e5a4629a8589e3b69e8c742.jpg"><br>
<br>
<img src="https://habrastorage.org/files/655/9d0/2b3/6559d02b321c4745a488fe3111badbee.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，看-他怎么了？无论如何，我将要为定位器制作一个纺织箱，因为这对于该装置是最合理的，理论上是可以睡觉的。这种情况只会改善外观和触感。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一句，如果您遵循我的脚步，我不建议您使用白色收缩：虽然很优雅，但是会很快变脏。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为什么不在3D打印机上打印？</font><font style="vertical-align: inherit;">首先，我没有它。</font><font style="vertical-align: inherit;">和业主不知道。</font><font style="vertical-align: inherit;">其次，我不知道如何绘制模型。</font><font style="vertical-align: inherit;">第三，由于我首先计划了30x70毫米的框架，所以我将不得不打印很多东西，在此过程中，它变成了宽度小于30毫米，长度约为65毫米的框架。</font><font style="vertical-align: inherit;">此外，在还没有时间掌握的黏土中，我设法切开了按钮的凹口，这是我最初忘记的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
并每次重新上胶。</font><font style="vertical-align: inherit;">尽管我没有争论，但它比我的Redneck 3D建模版本要酷得多。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免责声明</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，我想说的是，定位器不仅与医疗设备没有丝毫关系，甚至与月亮有关的膳食补充剂也没有任何关系。这是一个实验。这是对懒惰和无聊的一种逃避。这是尝试用自己的双手发明并执行类似操作的尝试。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，当然不能将其视为救生员或类似的东西。有趣的同伴，助手-是的。而且，当然可以故意欺骗它，但是有可能-不是故意欺骗。特别是如果选择固定位置是错误的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，为防止背部出现睡眠，定位器应作好准备，固定在身体其余部分刚打开的那部分身体上。而且，在控制移动性时，最好将定位器放在身体最易移动的部位，尽管我检查过他是否能很好地适应牛仔裤时口袋中的当前设置。好吧，如果要摆姿势，则需要固定定位器，以便如果您弯曲了，那么他就在这个弯曲的部分。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
否则，无济于事。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我同意可以使用另一个控制器和另一个加速度计，也可以拥有更多的C ++，并且更多的是用我自己的大脑……所以我不禁止-尝试一下。我相信你会比我更好。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实际上，这就是为什么我写Geek而不是Habré的原因。</font><font style="vertical-align: inherit;">可以这么说，为了妥协，后者实际上是第一个。</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN381771/">https://habr.com/ru/post/zh-CN381771/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN381755/index.html">15卢布的导电胶</a></li>
<li><a href="../zh-CN381759/index.html">MusicMachine 3：《星球大战》粉丝的音乐盒</a></li>
<li><a href="../zh-CN381761/index.html">曼卡拉-是时候扔石头了</a></li>
<li><a href="../zh-CN381763/index.html">Молодому учёному из Краснодара грозит 11 лет строгого режима</a></li>
<li><a href="../zh-CN381765/index.html">第三代人体工学小姐-Logitech MX Master评论</a></li>
<li><a href="../zh-CN381773/index.html">交警网站持续欣喜</a></li>
<li><a href="../zh-CN381775/index.html">创建一个Roborace竞赛机器人</a></li>
<li><a href="../zh-CN381777/index.html">电影《公民四：斯诺登的真相》的创作者，获得奥斯卡奖，在美国机场被拘留了50次</a></li>
<li><a href="../zh-CN381779/index.html">在星系碰撞中，大星系击败小星系。</a></li>
<li><a href="../zh-CN381781/index.html">动作相机AMK5000s概述及其在无人机上的飞行和坠落</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>