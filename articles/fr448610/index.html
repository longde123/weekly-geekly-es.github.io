<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍🏫 🦔 🕎 DIY: Comment nous avons créé un programme en direct pour Codefest X 🐆 🤖 🐟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fin mars à Novossibirsk, le 10e anniversaire du CodeFest est décédé . Comme toute conférence, probablement, CodeFestX a laissé aux participants un tas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DIY: Comment nous avons créé un programme en direct pour Codefest X</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wrike/blog/448610/">  Fin mars à Novossibirsk, le 10e anniversaire du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CodeFest est décédé</a> .  Comme toute conférence, probablement, CodeFestX a laissé aux participants un tas d'impressions différentes de «mes jambes ne seront plus là» à «comment acheter un abonnement à vie?».  Je ne décrirai pas comment c'était, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">il y a déjà des</a> critiques et, je pense, apparaitra toujours.  Je veux partager l'histoire de la façon dont nous avons lancé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une version alternative pour le programme Codefest</a> ( <i>mieux regarder depuis un</i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">téléphone mobile</a> ): de l'idée au résultat. <br><br><img src="https://habrastorage.org/webt/a9/i-/fr/a9i-frbjx1pwd_-idvj21kuwahe.jpeg"><br><a name="habracut"></a><br><h2>  Idée </h2><br>  Je participe à Codefest depuis 2010 et cette année était ma 9e conférence.  Pour moi, Codefest est une tradition, et cette fois je voulais faire quelque chose d'utile.  Avant l'événement, en lisant le chat de la conférence, je me suis rendu compte que le calendrier pouvait certainement être amélioré.  Codefest est un événement mouvementé dont tout le monde aimerait tirer le meilleur parti, j'ai donc décidé d'aider à créer un autre calendrier personnalisé. <br><br>  Les objectifs étaient les suivants: <br><br><ul><li>  <b>Pour les visiteurs</b> - pour donner la possibilité d'obtenir des informations plus pertinentes sur les événements actuels et de créer leur propre flux d'intérêts.  De plus, tous les visiteurs de la conférence ont eu l'occasion de venir sur notre stand et de classer toute fonctionnalité manquante ou de corriger un bug; </li><li>  <b>Pour Codefest</b> , il s'agit d'un canal supplémentaire pour la distribution d'un programme «populaire»; </li><li>  <b>Pour nous, en tant qu'entreprise</b> , il s'agit bien sûr d'un atout supplémentaire dans la marque Employeur. </li></ul><br><br><img src="https://habrastorage.org/webt/rx/s9/pz/rxs9pzzpvpsnzfsdanwyrbo5alw.jpeg"><br><br>  Le concept d'un calendrier «pompé» est venu aux organisateurs de Codefest.  J'ai partagé l'idée chez Wrike et j'ai rapidement trouvé des personnes partageant les mêmes idées et désireuses de se connecter.  Nous avons commencé par la recherche, examiné les sites de conférence et les applications mobiles.  En général, nous avons lancé le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">processus d'épicerie</a> habituel chez Wrike. <br><br>  À la suite de l'élaboration de l'arriéré, nous avons déterminé que les fonctionnalités nécessaires étaient nécessaires comme ceci: <br><br><ul><li>  Le calendrier principal de la conférence avec la possibilité de filtrer les rapports et la recherche; </li><li>  Favoris et notifications sur l'approche des événements sélectionnés; </li><li>  Un programme populaire avec les mêmes fonctionnalités que le principal, ainsi que la possibilité pour les partenaires et les militants d'ajouter des événements à ce programme. </li></ul><br>  Il y avait des tâches moins prioritaires: <br><br><ul><li>  Discussions sur le rapport afin que les utilisateurs autorisés puissent échanger des opinions et discuter; </li><li>  Aime et rapports d'évaluation populaires; </li><li>  Carte, as  CodeFest est génial et la navigation est très importante. </li></ul><br>  Il y avait encore des tâches avec la troisième priorité, où nous avons encore un tas de vaisseaux spatiaux enterrés, mais je crois que leur temps viendra. <br><br><h2>  Implémentation </h2><br>  Nous avons décidé de prendre ce que nous utilisons dans le développement de notre produit comme une pile pour le projet, pour donner l'occasion de voir comment le frontend est construit dans Wrike.  Nous écrivons sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dart</a> ( <i>et déjà expliqué pourquoi: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a></i> ) et pour l'instant pour les grands projets web comme le nôtre, il n'y a que Angular ( <i>voici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">5 minutes d'inspiration</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">bunopus</a></i> ).  Le référentiel de notre projet se trouve ici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/wrike/codefestx</a> . <br><br>  Dans notre application Angular, nous avons ajouté <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux</a> .  Il existe plusieurs implémentations pour Dart: nous avons pris <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux.dart</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux Epics</a> pour les effets.  Dans notre projet, le code lié à Redux se trouve ici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/wrike/codefestx/tree/master/lib/src/redux</a> . <br><br>  Pour travailler avec un <i>état immuable,</i> nous avons pris les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">packages built_value</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">built_collection</a> , ce qui simplifie bien le travail.  Par exemple, nous créons une classe pour l'état de notre application - <a href="">CodefestState</a> , et les packages génèrent un <a href="">générateur</a> . <br>  Une astuce simple est utilisée pour communiquer Angular et Redux ( <i>dans le composant principal - <a href="">github.com/wrike/codefestx/blob/master/lib/app_component.dart</a></i> ): <br><br><ul><li>  ChangeDetectorRef - mécanisme de mise à jour de l'affichage angulaire standard ( <i>documentation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a></i> ) </li><li>  Redux Store standard ( <i>documentation <a href="">ici</a></i> ) </li><li>  Notre répartiteur simple est <a href="">github.com/wrike/codefestx/blob/master/lib/src/redux/services/dispatcher.dart</a> </li></ul><br>  Et nous les lions ensemble à travers un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">flux de</a> gart standard: <br><br> <code>_dispatcher.onAction.listen((action) =&gt; _store.dispatch(action)), <br> _store.onChange.listen((_) =&gt; _zone.run(_cdr.markForCheck)), <br></code> <br>  Autrement dit, lorsque vous créez une action dans le gestionnaire ( <i>elles sont toutes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a></i> ), elle entre dans le référentiel Redux.  Il est en cours de traitement et l'état change, ce qui provoque un cycle de détection de changement angulaire. <br>  Nous avons fait 2 mécanismes pour envoyer des notifications: pour les notifications de l'occurrence d'événements, car  c'est important, intégré à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PushWoosh</a> et reçu un push système ( <i>malheureusement sans support pour les navigateurs sur iOS</i> ).  Pour les événements moins critiques, par exemple, la sortie d'une nouvelle version, un socket a été <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">déclenché</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">socket_io_client a été</a> utilisé sur le client. <br><br><img src="https://habrastorage.org/webt/lu/lm/lh/lulmlhwogwbghjqewm8y6onvxec.gif"><br><br>  En général, la structure de l'application est simple et, à mon avis, compréhensible.  Si vous avez des questions, nous pouvons discuter de solutions spécifiques dans les commentaires ou sur github. <br><br><h2>  L'infrastructure </h2><br>  Dans le monde moderne, pour télécharger un fichier JS pour un usage général, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">k8s</a> est indispensable.  Mais sérieusement, l'une des caractéristiques de notre service est sa révision dès la conférence elle-même ( <i>dont plusieurs Dartiziens ont profité parmi les visiteurs et non, ils ne sont pas de Wrike :)</i> ). <br><br><img src="https://habrastorage.org/webt/1n/b0/xb/1nb0xbs7ur95vrppmx1i0gkd55i.jpeg"><br><br>  Par conséquent, nous avons décidé de faire un CI honnête.  Nous avons examiné les possibilités d'intégration de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> et y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avons</a> trouvé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Cloud Build</a> : puisque nous utilisons des produits Google, nous ne devons pas quitter cette piste.  L'intégration fonctionne comme ceci: toute validation dans le référentiel appelle l'assembly <a href="">cloudbuild.yaml</a> .  Nous avons suivi le chemin de l'assemblage d'un conteneur Docker avec une application prête à l'emploi ( <i>il existe un modèle de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">concentrateur</a> pour le dart - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hub.docker.com/r/google/dart</a></i> ), puis nous le lançons dans k8s afin de pouvoir annuler les versions, mettre à l'échelle et prévoir d'autres hypothèses. la situation.  D'après ce qui n'était pas suffisant, c'était la possibilité de faire un comportement différent en fonction de la branche où nous nous engageons, c'est-à-dire que le maître construisait et se déployait pour la bataille, et pour les branches restantes, des étapes minimales devaient être effectuées sans k8.  Il y a une discussion active sur ce sujet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , et nous avons profité de la solution de cette discussion.  CI a parfaitement fonctionné et n'a jamais échoué. <br><br><h2>  Voler dans la pommade </h2><br>  En plus de nos succès, bien sûr, il y a quelque chose qui pourrait être fait différemment.  Par exemple, n'obligez pas les gens à se connecter lorsqu'ils votent pour des rapports - certains n'aiment pas cela (en <i>particulier dans les services à court terme</i> ).  En conséquence, nous n'avons pas obtenu beaucoup de «j'aime» pour les rapports, mais nous avons néanmoins félicité les conférenciers champions. <br><br><img src="https://habrastorage.org/webt/xe/0t/q4/xe0tq4-g1dpk5w764k2kkp7rgvo.jpeg"><br><br>  Nous avons également, dans le courage du développement Web, oublié les limites strictes d'iOS et qu'il n'y a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">aucun moyen de faire pression pour le Web</a> .  Il s'est avéré que près de la moitié des utilisateurs de notre service étaient avec l'iPhone.  Malheureusement, nous n'avons pas pu leur envoyer d'avis. <br>  Et quoi d'autre a bouleversé l'équipe, comme je l'ai déjà mentionné, - nous n'avons pas réussi à faire tous nos plans.  Certaines fonctionnalités ont été déployées lors de la conférence, et certaines vivent toujours dans l'arriéré. <br><br><h2>  Résultats </h2><br>  Merci aux organisateurs que le lien vers le programme ait été ajouté à la note du participant à la conférence.  Pendant la conférence, plus de 1100 utilisateurs ont utilisé le service.  Au programme principal de ~ 120 événements, nous avons ajouté un autre ~ 50 "folk".  Environ 75% des sessions se sont déroulées sur des appareils mobiles, nous avons envoyé plus de 500 notifications push, publié 3 communiqués au cours de la conférence elle-même et reçu beaucoup de plaisir du processus et du résultat. <br><br><img src="https://habrastorage.org/webt/ax/7h/6j/ax7h6jbwkhnsve1quyod0g82e6w.jpeg"><br><br>  Ce fut une grande expérience, et nous continuerons à développer le projet, au moins pour les événements internes et les conférences Wrike.  Si vous avez visité Codefest et utilisé notre calendrier, nous apprécions vos commentaires dans les commentaires. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr448610/">https://habr.com/ru/post/fr448610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr448596/index.html">Porte-tablette sur tapis roulant ou recherchez des étapes gratuites</a></li>
<li><a href="../fr448600/index.html">Comment Windows 10 Explore une vulnérabilité critique DHCP détecte deux autres erreurs de sécurité</a></li>
<li><a href="../fr448602/index.html">La surveillance est-elle morte? - Surveillance longue durée</a></li>
<li><a href="../fr448606/index.html">Sidorin: KnowledgeConf est sur la façon de maintenir les connaissances avec une durée moyenne de travail en un seul endroit en 2-3 ans</a></li>
<li><a href="../fr448608/index.html">Comment faire les premiers pas en robotique?</a></li>
<li><a href="../fr448612/index.html">Ce qui a été gelé au gel des fonctionnalités 2019. Partie I. JSONPath</a></li>
<li><a href="../fr448618/index.html">Algorithme Douglas-Pecker</a></li>
<li><a href="../fr448622/index.html">PHP GR8: JIT améliorera-t-il les performances de PHP 8</a></li>
<li><a href="../fr448624/index.html">Voir les données? Non. Donc je ne vois pas, mais ils le sont. Nous détruisons les données sur les disques SSD et restaurons même la vitesse</a></li>
<li><a href="../fr448626/index.html">DDoS pour aider: comment nous menons le stress et les tests de stress</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>