<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßìüèΩ üë®üèº‚Äçüíº üçá Wir verwenden AMP als Allzweckbibliothek, um schnelle dynamische Sites zu erstellen üì© ‚ôëÔ∏è üë®‚Äçüç≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√Ñndern Sie den ersten Eindruck ist sehr schwierig. Und ich spreche nicht nur √ºber Menschen. Technologien werden auch oft zu Geiseln des ersten Eindruc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir verwenden AMP als Allzweckbibliothek, um schnelle dynamische Sites zu erstellen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/google/blog/419589/"><p>  √Ñndern Sie den ersten Eindruck ist sehr schwierig.  Und ich spreche nicht nur √ºber Menschen.  Technologien werden auch oft zu Geiseln des ersten Eindrucks - ihrer ersten Version.  Und dann bleibt die Technologie trotz jahrelanger Entwicklung, neuer M√∂glichkeiten und der Beseitigung alter M√§ngel im Massenbewusstsein diese sehr unvollkommene, ihre erste Version.  Diejenigen, die nicht versuchen, mit dieser Art von kognitiver Voreingenommenheit umzugehen, k√∂nnen die Erfolge von Wettbewerbern, die vertraute Technologien einsetzen, nur in neuen Szenarien mit einer dummen Frage betrachten: ‚ÄûWas h√§tte passieren k√∂nnen!?‚Äú. </p><br><p><img src="https://habrastorage.org/webt/e_/vr/6w/e_vr6w51_va8sq7tshdt8ue6dha.jpeg"></p><br><p>  Das auff√§lligste Beispiel f√ºr eine Technologie, die meiner Meinung nach im Vergleich zu den Anf√§ngen weit voraus ist, ist AMP - Accelerated Mobile Pages.  Viele Entwickler betrachten AMP als eine M√∂glichkeit, den statischen Inhalt ihrer Website (Artikel, Nachrichten, Notizen usw.) in den Google-Cache zu stellen, sodass dieser Inhalt beim √ñffnen √ºber die Suche sofort geladen wird (das Blitzsymbol in den Suchergebnissen zeigt eine hohe Ladegeschwindigkeit von AMP-Seiten an: )).  Wenn Sie genau ein solches Ergebnis erzielen m√∂chten, ist dies mit AMP nat√ºrlich sehr einfach.  AMP ist jedoch viel mehr als nur eine Technologie f√ºr die Arbeit mit statischen Inhalten oder dem Google-Cache.  AMP wird seit langem als Allzweckbibliothek verwendet, die auf Webkomponenten basiert, um schnelle dynamische Seiten und sogar ganze Websites zu erstellen, die Benutzer sowohl aus Such- als auch aus anderen Quellen erhalten, einschlie√ülich direkter Besuche.  Unter diesem Gesichtspunkt kann AMP mit Polymer, React oder Angular gleichgesetzt werden.  Mit Blick auf die Tatsache, dass AMP f√ºr einfache (was auch immer es bedeutet) Websites konzipiert ist, bei denen der Schwerpunkt auf Inhalten liegt und die dynamische Komponente begrenzt ist. </p><br><p><img src="https://habrastorage.org/webt/id/l2/sr/idl2srdzomaaloufat7nsnsinbu.gif"></p><a name="habracut"></a><br><p>  Ich m√∂chte auch darauf hinweisen, dass AMP trotz des Namens Accelerated Mobile Pages zum Erstellen beliebiger Websites verwendet werden kann, sowohl auf dem Desktop als auch auf dem Handy.  Die Projektwebsite - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ampproject.org</a> ist ein gro√üartiges Beispiel daf√ºr, was AMP f√ºr den Desktop tun kann. </p><br><p>  In diesem Artikel werden wir die AMP-Technologie selbst betrachten, √ºber ihre Funktionen und Einschr√§nkungen sprechen und AMP f√ºr einen Online-Shop landen lassen, der das Laden, Anzeigen, Filtern und Suchen von Produkten unterst√ºtzt.  Dieses Beispiel wurde nicht zuf√§llig ausgew√§hlt, da E-Commerce nach Nachrichtenseiten, auf denen AMP am aktivsten genutzt wird, der zweitbeliebteste Bereich ist. </p><br><p>  Sie k√∂nnen die fertige Landing Page im GIF oben sehen. </p><br><p> AMP widmet sich vielen Artikeln, unter denen Sie sehr kritisch finden k√∂nnen.  Die meisten dieser Artikel konzentrieren sich auf eine Seite der AMP-Technologie, n√§mlich den Cache.  Wenn die Seite der Site zwischengespeichert wird und sie dann beim Klicken aus einer Suche nicht direkt ge√∂ffnet werden, f√ºhrt dies zwangsl√§ufig zu Einschr√§nkungen.  Benutzer scheinen sich auf Ihrer Website zu bewegen.  Es stellt sich eine sakramentale Frage: Wer profitiert davon?  Es kann rentabler sein, Inhalte immer direkt zu geben?  Gemessen an der Tatsache, dass AMP von Content-Publishern aktiv genutzt wird, sind die meisten von ihnen definitiv profitabel, wenn sie den Cache verwenden - ihre Suchseiten werden sofort ge√∂ffnet.  Das Hauptproblem mit dem Cache besteht darin, dass der Benutzer in der Adressleiste des Browsers nicht die Adresse der Site selbst sieht, auf der AMP-Seiten <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gehostet werden</a></em> , z. B. <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.vedomosti.ru</a></em> , sondern die Adresse im Cache. In diesem Fall <em><a href="">lautet</a></em> sie wie <em><a href="">folgt</a></em> : <em><a href="">www.google.com/ amp / s / www.vedomosti.ru</a></em> . </p><br><p>  Dieses Verhalten ist keine b√∂swillige Methode, um Benutzer von Ihrer Website zu entfernen.  Es ist eher ein technisches Problem, das auf andere Weise nicht gel√∂st werden konnte.  AMP-Entwickler arbeiten aktiv an einer L√∂sung f√ºr dieses Problem.  Der neue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Web Packaging-</a> Standard wird helfen.  Dank dessen werden die Daten beim Laden in den Cache vom Zertifikat der Quelldom√§ne signiert. Wenn AMP-Seiten aus dem Cache angezeigt werden, wird daher die urspr√ºngliche Dom√§ne und nicht die Adresse im Cache in der Adressleiste angezeigt. </p><br><p>  Andererseits betrifft das Cache-Problem, falls relevant, haupts√§chlich Inhaltsverleger.  Wenn der Hauptbestandteil Artikel oder Nachrichten sind, ist es f√ºr jeden Verlag wichtig, wie und wem sie angezeigt werden.  Und die Tatsache, dass die Verlage AMP anfangs misstrauisch gegen√ºberstanden, ist verst√§ndlich.  Daher viele Kontroversen zu diesem Thema.  Auf der anderen Seite ist E-Commerce ein v√∂llig anderes Szenario.  F√ºr den Besitzer eines Online-Shops, eine Website f√ºr den Verkauf von Tickets f√ºr Konzerte, eine Bank, die Kreditkartenantr√§ge akzeptiert, oder einen Sch√∂nheitssalon, in dem Kunden erfasst werden, ist es in erster Linie wichtig, dass Kunden kommen und kaufen.  Konvertierung ist wichtig.  Und wenn es eine Technologie gibt, die dazu beitr√§gt, Websites schneller zu machen und dadurch die Conversion zu steigern, ist die Verwendung dieser Technologie nat√ºrlich von Vorteil. </p><br><h1>  Amp </h1><br><p>  Was macht Websites schnell?  Sie machen sie schnell, Entwickler!  Es gibt keine Magie, schnelle Websites sind schnell, weil ihre Entwickler sich um die Leistung k√ºmmern und daran arbeiten, um Websites besser zu machen.  Es gibt eine Reihe von Best Practices und Tricks, um Websites zu erstellen, die schnell geladen werden und schnell funktionieren.  Zum Beispiel ist es besser, schwere Bilder nur in dem Moment zu laden, in dem der Benutzer zu ihnen bl√§ttert, und nicht sofort, wenn die Seite ge√∂ffnet wird.  Es lohnt sich auch, die Gesamtzahl der heruntergeladenen Ressourcen mithilfe von asynchronen Skripten usw. zu begrenzen.  Das einzige Problem ist, dass all diese Praktiken in Erinnerung bleiben und ihre Anwendung st√§ndig √ºberwachen m√ºssen.  Das ist schwer.  Es besteht immer die Versuchung, etwas zu tun, das nicht den Best Practices entspricht, aber einfacher zu implementieren ist. </p><br><p>  AMP ist eine Technologie, mit der es einfach ist, das Richtige zu tun (und letztendlich eine schnelle Website zu erhalten).  Und es ist schwierig, eine Site mit AMP langsam zu machen.  Dies wird durch eine Reihe von Einschr√§nkungen sowie durch einen Validator erreicht, der diese Einschr√§nkungen √ºberpr√ºft.  Wenn die Seite validiert ist, kann sie zwischengespeichert werden.  Das hei√üt, AMP schr√§nkt Sie absichtlich ein - und dies ist die Hauptidee dieser Technologie, aber im Gegenzug gewinnen Sie das Vertrauen, dass Sie die Best Practices verwenden.  Sie m√ºssen kein Experte f√ºr Optimierung sein, um mit AMP ein gutes Ergebnis zu erzielen.  Standardm√§√üig werden Best Practices verwendet, und das Fehlerpotential wird minimiert. </p><br><p>  Gleichzeitig ist AMP keine andere Art von HTML, sondern eine gew√∂hnliche Bibliothek, in der es nichts gibt, auf das die Ersteller anderer Bibliotheken nicht zugreifen k√∂nnen.  Mit AMP verwenden Sie regul√§res HTML-Markup sowie CSS-Stile.  Sie k√∂nnen eine ganze Site auf AMP erstellen, wenn dies einfach genug ist (ein typisches Beispiel sind alle Arten von Zielseiten). Wenn die AMP-Funktionen nicht mehr ausreichen, k√∂nnen Sie jederzeit Nicht-AMP-Seiten hinzuf√ºgen. </p><br><p>  Auf der anderen Seite k√∂nnen die in AMP verwendeten Optimierungen ohne AMP durchgef√ºhrt werden, dies erfordert jedoch viel Aufwand und Zeit.  Selbst wenn Sie sich aus irgendeinem Grund gegen AMP entscheiden, ist es auf jeden Fall sinnvoll, zumindest zu untersuchen, wie diese Bibliothek funktioniert und wie diese Ans√§tze auf Ihre Websites angewendet werden.  Es scheint, dass die Werbung f√ºr AMP die Werbung f√ºr eine bestimmte Bibliothek ist und nicht die Leistung von Websites als solche.  Dies ist jedoch nicht der Fall: Eine produktive Website ist viel wichtiger als die Verwendung der einen oder anderen Bibliothek oder des Frameworks. </p><br><p>  Ich m√∂chte noch einmal darauf hinweisen, dass alle von AMP auferlegten Beschr√§nkungen nicht ideologischer Natur sind, sondern auf utilitaristischen √úberlegungen beruhen - sie erm√∂glichen es Ihnen, schnelle Websites zu erstellen.  Der Punkt.  Wenn es in Zukunft eine M√∂glichkeit gibt, ohne Leistungseinbu√üen die eine oder andere Einschr√§nkung zu beseitigen, wird sie nat√ºrlich aufgehoben. </p><br><p>  Was sind die Einschr√§nkungen von AMP?  Die wichtigste Einschr√§nkung ist, dass Seiten keinen beliebigen JavaScript-Code enthalten d√ºrfen.  Das einzige, wof√ºr Sie eingeschr√§nktes JavaScript verwenden k√∂nnen, ist die Datenbindung.  Sie k√∂nnen auch keine externen JavaScript- und CSS-Dateien verbinden.  Es gibt Ausnahmen: Dies ist die AMP-Bibliothek selbst sowie eine Liste der genehmigten Komponenten (Sie k√∂nnen an der Entwicklung von AMP teilnehmen und Ihre eigenen Komponenten erstellen).  Alle CSS sollten sich auf der Seite selbst befinden und das Volumen ist auf 50 Kilobyte begrenzt.  Dar√ºber hinaus k√∂nnen Sie keinen Teil der HTML-Tags verwenden, z. B. &lt;img /&gt;. Stattdessen werden die im AMP-Paket enthaltenen Webkomponenten verwendet.  Beispielsweise wird anstelle von &lt;img /&gt; die Komponente &lt;amp-img /&gt; verwendet.  Dies ist erforderlich, damit AMP das Laden von Ressourcen steuern kann.  Es gibt auch geringf√ºgige CSS-Einschr√§nkungen, die durch Leistungsaspekte verursacht werden (Sie k√∂nnen den Modifikator! Important und nicht GPU-beschleunigte Animationen nicht verwenden).  Eigentlich ist das alles.  AMP bietet eine Vielzahl von Komponenten, wodurch die Unf√§higkeit, beliebigen JavaScript-Code zu schreiben, teilweise beseitigt wird.  Zu den Komponenten geh√∂ren beispielsweise <strong>Amp-Date-Picker</strong> , <strong>Amp-Sidebar</strong> , <strong>Amp-User-Benachrichtigung</strong> , <strong>Amp-Facebook-like</strong> , <strong>Amp-Access</strong> , mit denen Sie Authentifizierungsunterst√ºtzung implementieren k√∂nnen, und viele, viele andere.  Und in sehr extremen F√§llen, wenn es keinen anderen Ausweg gibt, k√∂nnen Sie iframes mit Nicht-AMP-Inhalten verwenden. </p><br><p>  Bevor Sie mit AMP arbeiten, empfehle ich Ihnen, die Dokumentation auf der Projektwebsite - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ampproject.org</a> - zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lesen</a> .  Dar√ºber hinaus ist es n√ºtzlich, sich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ampbyexample.com anzusehen</a> , das hervorragende Beispiele enth√§lt, von denen die meisten praktisch ohne √Ñnderungen in realen Projekten verwendet werden k√∂nnen.  Wenn Sie vorgefertigte Vorlagen ben√∂tigen, sind diese auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ampstart.com</a> verf√ºgbar. </p><br><p><img src="https://habrastorage.org/webt/lv/cp/n3/lvcpn3hhaqefftseopfyp3ko90m.jpeg"></p><br><h1>  AMP-Landung erstellen </h1><br><p>  Erstellen wir eine Landingpage f√ºr einen Online-Fahrradladen mit einer Liste von Produkten, Filtern und Suchen.  Unsere Produkte werden dynamisch geladen.  F√ºr Schulungszwecke werden wir keine vorgefertigten Vorlagen verwenden, aber wir werden alles von Grund auf neu machen.  Der Projektcode ist auf GitHub zu finden: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/spugachev/amp-article</a> </p><br><p>  Das Repository enth√§lt ein Backend auf Node.js sowie AMP-Seiten im √∂ffentlichen Ordner.  Um das Projekt zu starten, m√ºssen Sie das Repository klonen und die folgenden Befehle im Projektordner ausf√ºhren (Node.js muss installiert sein). </p><br><pre><code class="bash hljs">&gt;&gt; npm install &gt;&gt; npm start</code> </pre> <br><h2>  Seitenvorlage </h2><br><p>  Erstellen Sie eine minimale AMP-Seite.  Der Code ist unten dargestellt.  In dem Projekt, das Sie von GitHub heruntergeladen haben, wird die Hauptseite public / index.html absichtlich leer gelassen, und wir werden sie zum Schreiben von Code verwenden. </p><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">amp</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"canonical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://amp-bike-shop.com/index.html"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width,minimum-scale=1,initial-scale=1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">amp-boilerplate</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-webkit-animation</span></span></span><span class="css">:-amp-start </span><span class="hljs-number"><span class="css"><span class="hljs-number">8s</span></span></span><span class="css"> </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">steps</span></span></span><span class="css">(1,end) </span><span class="hljs-number"><span class="css"><span class="hljs-number">0s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css"> normal both;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-moz-animation</span></span></span><span class="css">:-amp-start </span><span class="hljs-number"><span class="css"><span class="hljs-number">8s</span></span></span><span class="css"> </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">steps</span></span></span><span class="css">(1,end) </span><span class="hljs-number"><span class="css"><span class="hljs-number">0s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css"> normal both;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-ms-animation</span></span></span><span class="css">:-amp-start </span><span class="hljs-number"><span class="css"><span class="hljs-number">8s</span></span></span><span class="css"> </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">steps</span></span></span><span class="css">(1,end) </span><span class="hljs-number"><span class="css"><span class="hljs-number">0s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css"> normal both;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">animation</span></span></span><span class="css">:-amp-start </span><span class="hljs-number"><span class="css"><span class="hljs-number">8s</span></span></span><span class="css"> </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">steps</span></span></span><span class="css">(1,end) </span><span class="hljs-number"><span class="css"><span class="hljs-number">0s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css"> normal both}@-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">webkit</span></span></span><span class="css">-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}@-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">moz</span></span></span><span class="css">-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}@-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">ms</span></span></span><span class="css">-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}@-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">o</span></span></span><span class="css">-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}@</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">amp-boilerplate</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-webkit-animation</span></span></span><span class="css">:none;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-moz-animation</span></span></span><span class="css">:none;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-ms-animation</span></span></span><span class="css">:none;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">animation</span></span></span><span class="css">:none}</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">amp-custom</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/*     */</span></span></span><span class="css"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>   AMP  !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Das erste, was im obigen Beispiel auff√§llt - HTML-Markup enth√§lt einen expliziten Hinweis darauf, dass es sich um eine AMP-Seite handelt.  Dies wird entweder durch Hinzuf√ºgen eines Blitzsymbols zum HTML-Tag (leider schneidet das Habr-Symbol ein Blitzsymbol) oder durch Hinzuf√ºgen des Wortes "amp" dort erreicht.  Ohne eine solche Angabe wird die Seite nicht validiert und w√§hrend der Indizierung nicht zum Google-Cache hinzugef√ºgt. </p><br><p>  Als N√§chstes m√ºssen Sie die AMP-JavaScript-Bibliothek verbinden: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Sie m√ºssen auch die kanonische Adresse der Seite angeben.  Wenn es eine Nicht-AMP-Version der Seite gibt, wird deren Adresse angegeben.  Andernfalls wird die Adresse der AMP-Seite selbst angegeben. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"canonical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://amp-bike-shop.com/index.html"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Dar√ºber hinaus m√ºssen Sie ein Meta-Tag f√ºr die Skalierung sowie CSS-Vorlagenstile hinzuf√ºgen.  Diese Stile k√∂nnen nicht ge√§ndert werden.  Sie werden ben√∂tigt, damit beim Laden der Seite, jedoch vor dem Laden der JavaScript AMP-Bibliothek, nicht stilisierter Inhalt nicht auf dem Bildschirm blinkt.  Wenn die Bibliothek aus irgendeinem Grund nicht geladen wird, wird der Inhalt in jedem Fall nach acht Sekunden angezeigt. </p><br><p>  Platzieren Sie das Bild mit der Amp-Image-Komponente oben auf der Seite.  Wenn Sie layout = "responsive" setzen, wird das Bild auf die gesamte Breite des Containers gestreckt. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero-img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img/hero.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"320"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"213"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"responsive"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Im Folgenden werde ich keine CSS-Stile angeben, die im Projekt-Repository auf GitHub zu finden sind.  Also ... </p><br><p>  F√ºhren Sie das Projekt aus und √∂ffnen Sie die Hauptseite in einem Browser.  Wenn der Seitenadresse der Parameter # development = 1 hinzugef√ºgt wird, wird die Seite automatisch validiert und Informationen dazu werden in der Browserkonsole angezeigt.  F√ºr den gleichen Zweck k√∂nnen Sie die Chrome-Erweiterung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AMP Validator verwenden</a> . </p><br><p>  Wenn beispielsweise anstelle von &lt;amp-img /&gt; ein regul√§res &lt;img /&gt; -Tag verwendet w√ºrde, w√ºrde eine solche Seite die Validierung nicht bestehen, was durch eine entsprechende Nachricht angezeigt w√ºrde. </p><br><p><img src="https://habrastorage.org/webt/zo/zx/hb/zozxhbb-dfjujwhqpkg2gbhmkb8.jpeg"></p><br><h2>  Laden und Anzeigen von Daten </h2><br><p>  Jetzt haben wir eine einfache AMP-Seite mit einem Bild, um die Aufmerksamkeit und den Namen des Gesch√§fts zu erregen.  Jetzt ist es Zeit, die Produktliste vom Server herunterzuladen und auf der Seite anzuzeigen.  Das Backed-Projekt enth√§lt bereits einen Service, der eine Liste von Waren (in diesem Fall Fahrr√§der) im JSON-Format zur√ºckgibt. </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/bikes [ { "id":<span class="hljs-number"><span class="hljs-number">1</span></span>, "img":"img/01.jpg", "title":" ", "price":"28500", "available":<span class="hljs-keyword"><span class="hljs-keyword">false</span></span> }, { "id":<span class="hljs-number"><span class="hljs-number">2</span></span>, "img":"img/02.jpg", "title":" ", "price":"14750", "available":<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, { "id":<span class="hljs-number"><span class="hljs-number">3</span></span>, "img":"img/03.jpg", "title":" ", "price":"31200", "available":<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, ‚Ä¶ ]</code> </pre> <br><p>  Da Sie mit AMP keinen beliebigen JavaScript-Code schreiben k√∂nnen, werden alle Aktionen, einschlie√ülich des Ladens von Daten, in einem deklarativen Stil festgelegt.  Wir m√ºssen mehrere Komponenten mit der Seite verbinden, die Daten laden und anzeigen, und uns auch die Verwendung von Vorlagen erm√∂glichen.  Da dies Standard-AMP-Komponenten sind, d√ºrfen wir sie anschlie√üen.  Wir werden die Komponenten brauchen: </p><br><ul><li>  <strong>amp-bind</strong> zur Unterst√ºtzung der Datenbindung, </li><li>  <strong>Amp-Moustache</strong> f√ºr die Arbeit mit Vorlagen im Schnurrbartformat </li><li>  sowie eine <strong>Amp-Liste</strong> zum Arbeiten mit einer Liste, die Daten l√§dt und anzeigt. <br>  Verbinden Sie die erforderlichen Dateien im Seitenkopf: </li></ul><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-element</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-bind"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-bind-0.1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-mustache"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-mustache-0.2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-element</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-list"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-list-0.1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  F√ºgen Sie der Seite die Listenkomponente hinzu: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"offers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"3720"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">items</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fallback</span></span></span><span class="hljs-tag">&gt;</span></span>  .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-mustache"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"card"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"height: 340px;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{img}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{title}}-{{price}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> {{#available}}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{/available}} {{^available}}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{/available}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{price}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Die src-Eigenschaft wird f√ºr die Komponente festgelegt, die bestimmt, woher die Daten stammen (in unserem Fall wird eine GET-Anforderung unter ‚Äû// localhost: 3000 / api / Bikes‚Äú ausgef√ºhrt)) sowie f√ºr die Eigenschaft items, mit der Sie nach einem Array von Elementen f√ºr die Liste in der JSON-Antwort suchen k√∂nnen vom Server.  Da die Antwort selbst ein Array ist, gibt der Wert der Eigenschaft items den Stamm der Antwort an. </p><br><p>  Als n√§chstes definieren wir einen Stub, der beim Laden der Daten angezeigt wird, sowie einen Stub im Fehlerfall.  Am interessantesten ist nat√ºrlich die Listenelementvorlage.  Das Format der Vorlage ist sehr einfach. Ich denke, die Syntax von Schnurrbartvorlagen erfordert keine zus√§tzliche Erkl√§rung. </p><br><p>  F√ºgen Sie den obigen Code hinzu, aktualisieren Sie die Seite und sehen Sie sich die Liste der auf der Seite angezeigten Produkte an.  Mit einfachem Markup und ohne JavaScript-Code zu schreiben, haben wir die Daten geladen und die Daten auf der Seite angezeigt (unter Verwendung einer Liste und einer Vorlage). </p><br><h2>  Datenfilterung </h2><br><p>  Jede AMP-Seite hat einen Status.  Es kann als Objekt mit einer Hierarchie von Eigenschaften betrachtet werden.  Der Seitenstatus kann in Ereignishandlern mit der Funktion AMP.setState ge√§ndert werden. </p><br><p>  F√ºgen Sie einen Filter hinzu, mit dem Sie nur die verf√ºgbaren Fahrr√§der anzeigen k√∂nnen.  Dazu platzieren wir ein Kontrollk√§stchen auf der Seite. Durch Klicken auf dieses Kontrollk√§stchen √§ndern wir den Status der Seite, indem wir der Variablen onlyAvailable den Wert zuweisen (je nachdem, ob das Kontrollk√§stchen aktiviert ist oder nicht).  Der Name der Variablen ist beliebig, er kann beliebig genannt werden.  Bitte beachten Sie, dass AMP seine eigene Art der Behandlung von Ereignissen implementiert.  Sie k√∂nnen mehrere Ereignisse gleichzeitig bearbeiten und f√ºr jedes Ereignis mehrere Aktionen ausf√ºhren. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checkbox"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"change:AMP.setState({ onlyAvailable: event.checked })"</span></span></span><span class="hljs-tag">/&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Mit dem Datenbindungsmechanismus k√∂nnen Sie Seitenstatusvariablen mit Eigenschaftswerten im HTML-Markup binden.  Damit die AMP-Bibliothek eine solche Bindung herstellen kann, muss der Name der Eigenschaft, die den Wert erhalten soll, in eckigen Klammern angegeben werden - [].  Zum Beispiel werden wir die CSS-Klasse 'active' hinzuf√ºgen oder entfernen (dies ist eine nicht standardm√§√üige Klasse und wird von uns festgelegt), abh√§ngig vom Wert der onlyAvailable-Variablen. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onlyAvailable? 'active' : ''"</span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre> <br><p>  Im Entwicklungsmodus (# development = 1) kann der Status der Seite mit der Funktion AMP.printState () auf der Browserkonsole angezeigt werden. </p><br><p><img src="https://habrastorage.org/webt/mz/2_/4u/mz2_4uea5ywl0uixwmu3fz669sa.jpeg"></p><br><p>  F√ºgen Sie nun die Liste der Produkte zum Seitenstatus hinzu.  Dazu verwenden wir eine separate <strong>Amp-State-</strong> Komponente.  Die Komponente l√§dt Daten von derselben Quelle wie die <strong>Amp-Liste</strong> herunter, l√§dt sie jedoch nicht neu, da AMP das Laden von Daten steuert und unn√∂tige Anforderungen vermeidet.  Au√üerdem f√ºgen wir ein Makro hinzu, das beim √Ñndern des Werts der Variablen onlyAvailable die Liste der Produkte filtert. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-bind-macro</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filteredBikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">expression</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes.filter(bike =&gt; onlyAvailable ? bike.available : true)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-bind-macro</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Jetzt verwenden wir die gefilterte Liste als Datenquelle f√ºr die <strong>Amp-List-</strong> Komponente.  Dazu ordnen wir die Eigenschaft src der Komponente dem Makro filteredBikes zu.  Verbinden Sie auch die Eigenschaft der H√∂he des Bauteils mit der Anzahl der Elemente.  Dies ist erforderlich, da die H√∂he der <strong>Amp-List-</strong> Komponente nicht automatisch an die Anzahl der Elemente angepasst wird.  In diesem Beispiel ist die Zahl 340 die H√∂he der Produktkarte und 16 die Einr√ºckung oben und unten. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"offers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"3720"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filteredBikes()"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(340 + (16*2)) * filteredBikes().length"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">items</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Bitte beachten Sie, dass das explizite Laden von Daten durch Festlegen der Eigenschaft src = "// localhost: 3000 / api / Fahrrad" erhalten bleibt.  Sie k√∂nnen es nicht entfernen.  Beim Laden einer AMP-Seite aus Leistungsgr√ºnden wird die Datenbindung nicht automatisch durchgef√ºhrt.  Es wird erst nach Benutzeraktionen ausgef√ºhrt, z. B. durch Klicken auf das Kontrollk√§stchen. </p><br><p>  √ñffnen Sie die resultierende Seite und √ºberpr√ºfen Sie, ob die Filterung ordnungsgem√§√ü funktioniert. </p><br><h2>  Suche </h2><br><p>  Die Suchimplementierung √§hnelt der Filterimplementierung.  F√ºgen Sie ein Textfeld hinzu, und bei der Eingabe des Tests weisen wir dem variablen Abfragestatus der Seite den in das Feld eingegebenen Wert zu. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"query"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autocomplete</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"input-debounced: AMP.setState({ query: event.value })"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Das Backend in unserem Projekt unterst√ºtzt die Suche.  Um nach Produkten zu suchen, m√ºssen Sie der bereits bekannten GET-Anforderung den Parameter "q" hinzuf√ºgen.  Wir werden uns nicht mit der Implementierung der Serverseite befassen, sondern sehen, wie eine neue Anforderung an den Server ausgef√ºhrt wird, wenn sich der Seitenstatus √§ndert. </p><br><p>  Wir f√ºhren eine Datenbindung f√ºr den src-Parameter der <strong>Amp-State-</strong> Komponente durch, mit der wir bereits die Anfangsdaten f√ºr die Filterung erhalten haben.  Wenn Sie den Seitenstatus der Abfragevariablen √§ndern, wird eine neue Suchabfrage ausgef√ºhrt. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"query ? '//localhost:3000/api/bikes?q=' + query : '//localhost:3000/api/bikes'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Das war's, jetzt funktioniert die Suche auf der Seite.  Dar√ºber hinaus ist eine neue Suchabfrage eine Datenquelle zum Filtern, die auch weiterhin ordnungsgem√§√ü funktioniert.  Der vollst√§ndige Code der Seite ist unten dargestellt. </p><br><p><img src="https://habrastorage.org/webt/-d/hd/5u/-dhd5usb9dywdquq83yoaxctpgq.jpeg"></p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero-img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img/hero.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"320"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"213"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"responsive"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>   AMP  !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">]= </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"query ? '//localhost:3000/api/bikes?q=' + query : '//localhost:3000/api/bikes'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-bind-macro</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filteredBikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">expression</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes.filter(bike =&gt; onlyAvailable ? bike.available : true)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-bind-macro</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"query"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autocomplete</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"input-debounced: AMP.setState({ query: event.value })"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onlyAvailable? 'active' : ''"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checkbox"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"change:AMP.setState({ onlyAvailable: event.checked })"</span></span></span><span class="hljs-tag"> /&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"offers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"3720"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filteredBikes()"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(340 + (16*2)) * filteredBikes().length"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">items</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fallback</span></span></span><span class="hljs-tag">&gt;</span></span>  .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-mustache"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"card"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{img}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{title}}-{{price}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> {{#available}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{/available}} {{^available}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{/available}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{price}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Fazit: Wir haben eine interaktive AMP-Seite mit Unterst√ºtzung f√ºr das Laden und Verkn√ºpfen von Daten erstellt.  Wir haben die Installation abgeschlossen und den Status der Seite ge√§ndert, das Arbeiten mit Vorlagen gelernt und auch auf Benutzereingaben reagiert.  Wie Sie sehen, erleichtert AMP die Entwicklung interaktiver dynamischer Seiten trotz der schwerwiegenden Einschr√§nkungen bei der Verwendung von JavaScript.  Versuchen Sie jetzt zu sagen, dass AMP f√ºr die Statik ist;).  Wir wissen, dass AMP noch viel mehr kann! </p><br><h1>  AMP Toolbox </h1><br><p>  Beim Laden von AMP-Seiten in den Cache und beim Senden aus dem Cache f√ºhrt Google viele Optimierungen durch.  Wenn Sie AMP-Seiten direkt von Ihrer Site verschenken, werden nat√ºrlich keine zus√§tzlichen Optimierungen durchgef√ºhrt.  Wenn Sie die direkte R√ºckgabe von AMP-Seiten beschleunigen m√∂chten, verwenden Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AMP Toolbox-</a> Bibliothek.  Es bietet Middleware f√ºr Express, daher ist die Verwendung der AMP Toolbox mit Node.js normalerweise eine Frage des Hinzuf√ºgens einiger Codezeilen.  Gleichzeitig erh√∂ht sich die Seitenladegeschwindigkeit! </p><br><h1>  Weitere Schritte </h1><br><h2>  Analytik </h2><br><p>  Wenn Sie keine Statistiken √ºber die Nutzung Ihrer Website sammeln, ist es nicht sinnvoll, √Ñnderungen vorzunehmen. Sie haben kein klares Bild davon, ob die √Ñnderungen positiv, negativ oder neutral waren.  Wie k√∂nnen Sie feststellen, ob sich die Benutzererfahrung mit der Implementierung von AMP verbessert hat, wenn Sie keine Informationen zur Benutzererfahrung haben?  Daher ist die Einf√ºhrung von Analysen von entscheidender Bedeutung. </p><br><p>  AMP unterst√ºtzt zwei Hauptkomponenten f√ºr die Datenerfassung: <strong>Amp-Pixel</strong> zum Festlegen eines einfachen Pixels und <strong>Amp-Analytics</strong> f√ºr komplexere Analysel√∂sungen.  Mit der <strong>Amp-Experiment-</strong> Komponente k√∂nnen Sie auch A / B-Tests auf AMP-Seiten durchf√ºhren. </p><br><p>  Mithilfe von <strong>Amp-Analytics k√∂nnen</strong> Sie Google Analytics, Yandex Metrics und andere Anbieter (z. B. Baidu Analytics) verbinden. </p><br><p>  Das Hinzuf√ºgen von Analysen zu einer Seite ist sehr einfach.  Zuerst m√ºssen Sie die entsprechende Bibliothek mit der <strong>Amp-Analytics-</strong> Komponente verbinden. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-element</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-analytics"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-analytics-0.1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Platzieren Sie dann die Komponente auf der Seite und konfigurieren Sie die Einstellungen.  F√ºr Google Analytics sieht es so aus. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-analytics</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"googleanalytics"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/json"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"vars"</span></span></span><span class="actionscript">: { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"account"</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"UA-XXXXX-Y"</span></span></span><span class="actionscript"> }, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"triggers"</span></span></span><span class="actionscript">: { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"trackPageview"</span></span></span><span class="actionscript">: { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"on"</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"visible"</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"request"</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"pageview"</span></span></span><span class="actionscript"> } } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-analytics</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  F√ºr Yandex Metrics ist der Code sehr √§hnlich. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-analytics</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"metrika"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/json"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"vars"</span></span></span><span class="actionscript">: { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"counterId"</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"XXXXXX"</span></span></span><span class="actionscript"> } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-analytics</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Dies sind nat√ºrlich die minimalsten Einstellungen.  F√ºr jede analytische L√∂sung m√ºssen Sie in den Einstellungen angeben, welche Daten Sie erfassen m√∂chten. </p><br><p>  Bei Verwendung der <strong>Amp-Analytics-</strong> Komponente tritt ein Problem beim Verfolgen von Benutzern auf AMP- und Nicht-AMP-Seiten auf.  Ich m√∂chte, dass die Benutzer-ID √ºberall gleich ist.  Ein Nutzer, der Ihre Seite aus dem Google-Cache herunterl√§dt und dann aus analytischer Sicht direkt auf Links zu Ihrer Website klickt, gilt als derselbe Nutzer.  Verwenden Sie dazu die Client-ID-API.  Weitere Informationen zu den Einstellungen, die Sie vornehmen m√ºssen, finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Google Analytics-Hilfe</a> . </p><br><h2>  Servicemitarbeiter und PWAs (Progressive Web Apps) </h2><br><p>  Bei recht komplexen Sites sowie bei vorhandenen Sites wird es schwierig sein, alles auf AMP zu schreiben oder sogar neu zu schreiben.  Daher erstellen normalerweise die Seiten, die Benutzer aus externen Quellen (Anmeldeseiten) erhalten, AMP-Seiten.  Sie werden schnell sowohl aus dem Cache als auch direkt ge√∂ffnet.  Wenn der Benutzer dann auf den Link auf der AMP-Seite klickt, wird er zu Ihrer Hauptseite weitergeleitet.  Und hier ist es wichtig, dass die Hauptseite beim Laden von der AMP-Seite sofort geladen wird.  Dies wird durch den Service Workers-Mechanismus erreicht.  Wenn Sie die AMP-Seite √∂ffnen, sollte der Worker-Service f√ºr die Hauptwebsite installiert werden, und der Worker-Service l√§dt die erforderlichen Dateien herunter und speichert sie zwischen.  Dank dessen werden Links zur AMP-Seite sofort ge√∂ffnet, da sich alle oder fast alles, was zum √ñffnen der folgenden Seiten ben√∂tigt wird, bereits im Cache befindet. </p><br><p>  Verwenden Sie zum <strong>Installieren des</strong> Servicemitarbeiters die Komponente <strong>amp-install-</strong> serviceworker.  Es wird auf die gleiche Weise wie alle anderen AMP-Komponenten verbunden. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-element</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-install-serviceworker"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Ein Beispiel f√ºr seine Verwendung ist unten dargestellt. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-install-serviceworker</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/sw.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-iframe-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://mydomain.com/sw.html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nodisplay"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-install-serviceworker</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Wenn ein Benutzer Ihre Site direkt besucht, installiert die Komponente den durch den Parameter src angegebenen Service Worker.  Im Falle des Ladens der AMP-Seite aus dem Cache ist dies jedoch nicht m√∂glich, da die Installation von Servicemitarbeitern f√ºr andere Dom√§nen verboten ist.  Daher m√ºssen Sie auf der Site eine Seite erstellen, auf der sich der Installationscode des Service Workers befindet.  Beim Laden aus dem Cache <strong>√∂ffnet amp-install-serviceworker</strong> die Seite in einem Iframe und der Service Worker wird installiert. </p><br><p>  PWA (Progressive Web Apps) ist ein Ansatz zum Erstellen moderner Webanwendungen, die sich basierend auf der Benutzererfahrung an native Anwendungen wenden.  Das Herz der PWA sind Servicemitarbeiter.  Man kann auf die Meinung sto√üen, dass AMP und PWA in gewissem Ma√üe Konkurrenten sind.  Tats√§chlich erg√§nzen sie sich.  PWA konzentriert sich auf langfristige und wann immer m√∂glich regelm√§√üige Interaktionen mit Benutzern.  Gleichzeitig konzentriert sich AMP auf die erste Interaktion, wenn der Benutzer von au√üen kommt.  PWA verbessert nicht genau diesen Aspekt - die erste Interaktion.  Daher verwenden viele Projekte AMP als Einstiegspunkt, der den Benutzer an PWA √ºbertr√§gt.  Und das ist sehr vern√ºnftig.  Wenn Sie keine regelm√§√üigen, langen oder komplexen Benutzerinteraktionen haben sollen, k√∂nnen Sie mit einem AMP auskommen. </p><br><h1>  Fazit </h1><br><p>  In diesem Artikel haben wir uns eine Anwendung von AMP angesehen, obwohl es tats√§chlich viele weitere interessante Szenarien gibt.  AMPHTML-Anzeigen sind beispielsweise eine hervorragende M√∂glichkeit, Anzeigen zu erstellen, die schnell geladen werden.  Wenn langsam ladende Banner auf AMP-Seiten platziert werden, die sofort ge√∂ffnet werden, werden Nutzer solche Anzeigen h√∂chstwahrscheinlich einfach nicht sehen.  Ja, und auf normalen Seiten - langsam ladende Anzeigen nerven die Nutzer.  Daher ist es logisch, die Werbung selbst (Werbekreative) mit AMP zu machen. </p><br><p>  Benutzer verwenden Inhalte auf Desktop- und Mobilger√§ten unterschiedlich.  Wenn Sie beispielsweise von einem Telefon aus lesen, beenden Benutzer das Lesen eines langen Artikels viel fr√ºher als beim Lesen vom Desktop (und haben Sie bis zu diesem Punkt gelesen? :)).  Das Format von Geschichten (Geschichten) ist in letzter Zeit auf Mobilger√§ten immer beliebter geworden, und AMP-Geschichten sind genau der richtige Weg, um solche Geschichten schnell und ohne zus√§tzlichen Aufwand zu erstellen. </p><br><p>  Dar√ºber hinaus wird eine Version von AMP f√ºr E-Mail (AMPHTML f√ºr E-Mail) entwickelt, mit der Sie mit AMP wundersch√∂ne interaktive E-Mails erstellen k√∂nnen. </p><br><p>  Vergessen Sie auch nicht, dass AMP einfach als Format zum Einf√ºgen von Inhalten auf Ihrer Website verwendet werden kann.  Wenn Sie beispielsweise Nachrichten, Artikel oder Produktkarten in einer React- oder Angular-Anwendung anzeigen m√ºssen, k√∂nnen Sie diese im AMP-Format speichern, vorab laden und dann sofort in einer Webanwendung (oder sogar in einer nativen Anwendung) anzeigen.  Sie m√ºssen AMP nicht f√ºr die gesamte Seite verwenden - AMP-Inhalte k√∂nnen auch kleine Inhalte sein. </p><br><p>  Mit AMP k√∂nnen Sie ganze Websites sowie einzelne Seiten, Banner und Geschichten erstellen und AMP als schnelles und kompaktes Format zum Einf√ºgen von Inhalten verwenden. </p><br><p>  Sergey Pugachev, Google Entwickler-Experte <br>  <em>PS.</em>  <em>Der Artikel ist ein pers√∂nlicher Blick auf AMP und stimmt m√∂glicherweise nicht mit der Meinung von Google oder dem Arbeitgeber des Autors √ºberein;)</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419589/">https://habr.com/ru/post/de419589/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419579/index.html">Implementierung des Operators in in C ++</a></li>
<li><a href="../de419581/index.html">Welche gemeinn√ºtzigen Projekte sind f√ºr Y Combinator interessant?</a></li>
<li><a href="../de419583/index.html">Wie Russland die Bl√ºtezeit der DVD verpasste, aber mit dem Aufkommen des Breitband-Internets den Westen einholte</a></li>
<li><a href="../de419585/index.html">PWA ist einfach. Hallo habr</a></li>
<li><a href="../de419587/index.html">Wettbewerbe, die die Welt ver√§ndern. 1567 - 2035</a></li>
<li><a href="../de419591/index.html">Wie man E-Mails macht und nicht durcheinander bringt: praktische Tipps</a></li>
<li><a href="../de419593/index.html">Farbenblinde Brille: Wie es funktioniert und welche Schwierigkeiten bei der Auswahl bestehen</a></li>
<li><a href="../de419599/index.html">Java REST an der HeadHunter School of Programmers</a></li>
<li><a href="../de419601/index.html">Ein Beispiel f√ºr das Entwerfen eines digitalen Ger√§ts "an den Fingern"</a></li>
<li><a href="../de419603/index.html">Hintergrund: Unternehmen, die Robomobile herstellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>