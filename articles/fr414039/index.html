<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ô£Ô∏è ü§üüèª üòñ Contes de nuages üò¨ üßùüèª üòÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je dois vous avertir tout de suite: ce ne sont pas les histoires o√π le rat a √©t√© mis √† la poubelle . Juste diff√©rentes petites histoires "comment les ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Contes de nuages</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croccloudteam/blog/414039/"><img src="https://habrastorage.org/webt/6i/gt/dm/6igtdmw5nfinicggcocqtucnw6e.jpeg"><br><br>  Je dois vous avertir tout de suite: ce ne sont pas les histoires <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">o√π le rat a √©t√© mis √† la poubelle</a> .  Juste diff√©rentes petites histoires "comment les gens font" qui peuvent √™tre utiles aux administrateurs.  Et ils ne le sont peut-√™tre pas.  Nous avons de nombreux clients assez importants et, par cons√©quent, ils ont des administrateurs comp√©tents.  Par exp√©rience, je dirai: c'est souvent plus exp√©riment√© l√† o√π il y a des restrictions budg√©taires strictes. <br><br>  Nous avons un client qui revend notre cloud (il s'est av√©r√©), il y a un contr√¥le sur la cuisson du pain √† partir du cloud, il y a m√™me un CTF d√©ploy√© pour former les pirates.  Mais commen√ßons par les travers√©es, y compris celles qui sont survenues √† cause des routes excav√©es de Moscou excav√©es par des excavateurs. <br><a name="habracut"></a><br><h3>  D√©bit de donn√©es le plus √©lev√© </h3><br>  Passer du centre de donn√©es de la r√©gion √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notre cloud</a> .  Puisqu'il y a beaucoup de donn√©es, le client a d√©cid√© de simplement charger les disques dans un camion ordinaire.  Comme tout ne s'est pas bien pass√© avec le camion, il a donc conduit dans un compartiment du train.  J'imagine directement: j'ai tout achet√© dans le compartiment, je l'ai forc√© dans des bo√Ætes avec du fer, je me suis enferm√© et parano√Øaque.  En cons√©quence, j'ai √©tabli notre record de vitesse de transfert de donn√©es, comme dans la vieille blague sur un camion avec des disques. <br><br><h3>  Mouvements de masse </h3><br>  Lorsque Moscou a commenc√© √† √™tre d√©terr√©e, toute une vague de demandes de d√©m√©nagement nous a √©t√© adress√©e.  Quelqu'un a coup√© le c√¢ble d'alimentation, et pendant qu'il √©tait r√©par√©, les gens se sont rendus dans le cloud (puisque nous migrons rapidement sous garantie vers le contrat).  Regard√© de plus pr√®s, est rest√©, transf√©rant lentement les applications de leur serveur vers nous alors que le mat√©riel est retir√© de la garantie. <br><br>  L'histoire la plus int√©ressante a √©t√© celle d'une petite salle de serveurs √† Khimki.  L√†, le directeur financier n'a pas donn√© d'argent pour la modernisation en principe, ils ont exploit√© le fer en cycles de 5-6 ans. <br><br>  La cons√©quence logique de cette approche est qu'√† la fin du cycle tout respirait dans l'air et qu'il y avait des probl√®mes m√™me avec les disques de la base de donn√©es de combat.  Chaque semaine, quelque chose en sortait, ils examinaient les applications les moins critiques et les coupaient.  En cons√©quence, les fouilles effectu√©es par les excavateurs de Khimki ont donn√© aux administrateurs une chance rare d'accepter n√©anmoins de passer au cloud. <br><br>  Une histoire similaire s'est produite lors de la reconstruction de l'autoroute Kaluga, mais l√†, la soci√©t√© a imm√©diatement d√©plac√© le bureau dans le cadre de cette entreprise et a d√©cid√© de ne pas cr√©er un n≈ìud de serveur dans un nouvel endroit, mais d'aller directement √† notre centre de donn√©es. <br><br><h3>  D√©placement urgent </h3><br>  Si vous devez vous d√©placer de toute urgence, vous pouvez simplement apporter un stockage physique.  Il y a de telles histoires, et non sans curiosit√©s.  L'administrateur du client nous a donn√© le fer √† repasser, dit: "Surcharge".  "Qu'est-ce que c'est?"  - nous demandons.  ¬´Toutes sortes de documents importants¬ª, r√©pond-il.  Les fichiers ont commenc√© √† √™tre tra√Æn√©s - l'administrateur lit simplement leurs noms et rampe le long du mur en riant.  Sur le partage de fichiers avec des documents importants, qui, en fait, pr√®s de 9 To ont √©t√© collect√©s, se trouve la s√©rie ¬´House MD¬ª.  Naturellement, ils ont ensuite nettoy√© que le client n'avait pas supprim√© √† la h√¢te. <br><br><h3>  Lecteur flash oubli√© </h3><br>  Nous avons d√©ploy√© un nouvel environnement apr√®s avoir d√©m√©nag√© comme pr√©vu.  Nous r√©cup√©rons les candidatures avec les administrateurs du client, puis on se claque sur le front.  Il dit: "Ils ont oubli√© le lecteur flash."  Eh bien, j'ai oubli√© et oubli√©, puis apportez.  Affaires quelque chose.  Il s'av√®re que ce n'est pas seulement un lecteur flash, mais une cl√© d'autorisation pour une application critique pour l'entreprise.  J'ai d√ª me pr√©cipiter dans l'ancien centre de donn√©es la nuit, trouver un lecteur flash dans l'un des serveurs, l'arracher et venir chez nous.  Nous l'avons ins√©r√© dans un concentrateur USB standard pour le cloud, pr√©sent√© √† la machine virtuelle comme s'il √©tait coinc√© dans un port physique, tout s'est pass√©. <br><br><h3>  Surveillez dans le cloud </h3><br>  Appel: "Avez-vous un moniteur dans le cloud?"  Nous: "QUOI?"  Client: "Eh bien, je prends le serveur ici, l'acc√®s √† distance n'est pas configur√© dessus.  Besoin d'un moniteur dans le cloud. "  Comme il s'est av√©r√© plus tard, ils ont achet√© un nouvel ordinateur de bureau (√† propos du niveau de jeu) et y ont d√©ploy√© des services.  La configuration est presque comme un serveur, ils l'ont remplie de m√©moire presque √† la limite.  Il a donc √©t√© amen√© dans le cloud, coinc√© dans un vilan avec ses machines virtuelles et parti.  Quand il tombe en panne, ils s'en d√©barrassent, mais pour l'instant c'est juste maladroit dans le rack et rivalise avec les serveurs en vitesse.  Nous avions un moniteur, nous l'avons donc install√©. <br><br><h3>  Mise √† l'√©chelle automatique </h3><br>  L'un des principaux clients de d√©tail a une mise √† l'√©chelle automatique, c'est-√†-dire la consommation de ressources selon les besoins.  Ils ont un syst√®me de surveillance Zabbix, des d√©clencheurs pour charger chaque service y sont configur√©s.  Disons les n≈ìuds Web.  Lorsque la moyenne de charge atteint 0,8, Zabbix extrait le script Terraform externe et cr√©e une nouvelle machine virtuelle via l'API.  Il se glissera dans l'utilisation d'Ansible, les paquets sont rassembl√©s, une version est en cours.  L'√©quilibreur le re√ßoit et met √† jour la configuration.  Le d√©ploiement prend 5 √† 10 minutes.  Lorsque la charge totale chute √† un certain niveau, c'est ce n≈ìud qui est supprim√©. <br><br>  Leur base de donn√©es est configur√©e comme ma√Ætre-ma√Ætre, elle est donc √©galement facilement √©volutive.  Soit dit en passant, les performances des disques avec nous sont g√©n√©ralement correctement mises √† l'√©chelle par une demande √† l'API, eux et un certain nombre d'autres clients l'utilisent activement. <br><br>  Au final, comme une b√©quille, mais magnifique.  √âconomies d'environ 25 √† 30% une fois enti√®rement pr√©par√© pour les pics. <br><br><h3>  Mise √† l'√©chelle automatique pour Legacy </h3><br>  La soci√©t√© d'√âtat a proc√©d√© √† une nouvelle mise √† l'√©chelle.  Ils ont une architecture h√©rit√©e (lire: quelque chose fonctionne sur Fortran, quelque chose sur le demi-axe, √† certains endroits, vous devez ex√©cuter l'ancien hyperviseur dans le nouvel hyperviseur pour des raisons de compatibilit√©).  Ils ne peuvent pas coller ensemble sur les voitures horizontalement.  Mais ils √©teignent leurs machines virtuelles la nuit et les red√©marrent avec un type de ressources simple.  Dans l'apr√®s-midi - les machines cloud les plus puissantes, √† 12 nuits, elles s'arr√™tent partiellement et d√©marrent √† la place de la m√™me mani√®re, mais beaucoup moins cher, avec un acc√®s plus lent aux disques et avec des quotas diff√©rents pour les c≈ìurs.  Il jette sa t√™te sur Exapark - notre syst√®me qui pend de l'ext√©rieur.  √Ä 6 h 7, tout se r√©p√®te dans l'ordre inverse.  Cette fonctionnalit√© est disponible pour tous les clients du cloud, mais c'est ici que les administrateurs savaient directement exactement ce qu'ils voulaient et comment.  Le r√©sultat est une bonne √©conomie, car le paiement des ressources cloud est horaire. <br><br><h3>  Type d'acc√®s inhabituel </h3><br>  Nous avons un stockage d'objets compatible AWS.  En r√®gle g√©n√©rale, il est g√©n√©ralement utilis√© comme S3.  Mais l'un des clients postule directement via une application mobile sans red√©ploiements interm√©diaires.  Une application pour les applications iOS et Android, des milliers de marchandiseurs y travaillent.  Ils y t√©l√©chargent toutes les photos et les rapports.  Directement des t√©l√©phones portables au stockage d'objets.  Soit dit en passant, les applications sont √©crites √† l'aide du kit SDK AWS, uniquement d'autres points de terminaison. <br><br><h3>  Nous tirons l'interrupteur dans un mois </h3><br>  Il existe une entreprise qui ach√®te des entreprises pr√™tes √† mourir et prolonge leur vie.  Il y avait une entreprise fran√ßaise qui, en raison de sanctions, √©tait sur le point de quitter la Russie.  Nos clients surench√©rissent sur l'entreprise.  L'ensemble de l'infrastructure fran√ßaise se trouvait √† Moscou dans un bureau ordinaire, un rack de serveurs tr√®s dense.  Pendant un mois, il a fallu tout transf√©rer en une seule fois dans le cloud.  Si vous n'avez pas le temps - coupez simplement la lumi√®re et c'est tout.  Et il y a des exp√©ditions depuis des entrep√¥ts, des voitures attendent.  Et certaines choses ne pouvaient toujours pas √™tre v√©rifi√©es tant que l'ancienne infrastructure n'√©tait pas compl√®tement √©teinte.  Naturellement, nous ne voulions pas rester sans envois le premier jour, nous avons donc convenu avec les administrateurs que dimanche avant la fin du mois, ils ont √©teint le n≈ìud du serveur de bureau, nous regardons comment tout se d√©roule.  A augment√©.  Une autre difficult√© r√©sidait dans le fait que la soci√©t√© m√®re ne donnait pas acc√®s aux moyens natifs de transfert de la base de donn√©es, elle en souffrait √©galement. <br><br><h3>  En partant, √©teignez la VM </h3><br>  L'un de nos clients - l'agr√©gateur - est presque enti√®rement compos√© de d√©veloppeurs.  Ils sont tr√®s rapides et tr√®s bien faits.  Nous avons principalement conduit dans le cloud pour des environnements de test.  Auparavant, ils avaient des probl√®mes avec le fait que de nombreuses √©quipes de d√©veloppement diff√©rentes sont venues voir l'administrateur et ont lanc√©: ¬´Donnez des ressources¬ª.  On ne savait pas combien cela valait: il n'y avait pas de division budg√©taire, elle √©tait consid√©r√©e manuellement.  Ils se sont d√©plac√©s vers notre cloud, ont tout couvert avec des scripts d'automatisation et se sont promen√©s.  Apr√®s le premier jour, ils n'avaient pas une seule entr√©e dans l'interface graphique et seulement quelques entr√©es dans la console - ils font tout dans une infrastructure tr√®s automatis√©e.  Leurs outils d'automatisation peuvent d√©ployer ce qu'ils veulent √† tout moment.  Maintenant la claque des financiers - ils demandent, "en partant, d'√©teindre la voiture".  Pour qu'apr√®s les tests, tout le monde se nettoie apr√®s lui-m√™me.  √âtant donn√© qu'ils √©crivent leur infrastructure enti√®rement sous forme de code (IaaC), je pense qu'ils automatisent √©galement cela.  Si ce n'est pas encore fait. <br><br>  Un autre d√©veloppeur avait une image similaire - ils ont utilis√© nos fonctionnalit√©s standard pour la comptabilit√© des projets.  Ce sont des r√¥les distincts pour chaque groupe d'administrateurs: il est clair combien d'argent est d√©pens√© pour quel type d'activit√©.  La comptabilit√© de projet est un r√¥le gr√¢ce auquel vous pouvez essentiellement cr√©er des clouds priv√©s et y d√©ployer des ressources.  Les droits et acc√®s sont coup√©s √† votre guise, il y a des limites sup√©rieures, il y a une facturation s√©par√©e. <br><br><h3>  Utilisation amusante </h3><br>  Nous ne savons g√©n√©ralement pas comment les clients utilisent notre cloud.  Mais parfois, les administrateurs eux-m√™mes disent et montrent.  Donc, notre n≈ìud de cha√Æne de blocs a √©t√© sci√©, il y a CTF d'une entreprise de s√©curit√© - c'est un simulateur direct du r√©seau d'entreprise de l'entreprise, vous devez vous y connecter et tout casser.  Utilis√© pour la formation des employ√©s et des clients finaux.  Un autre client coordonne le nettoyage √† travers le cloud, il y a une gestion de la boulangerie (ACS TP), il y a un service m√©dical avec des consultations vid√©o avec les patients (ils ont une histoire tr√®s compliqu√©e avec des donn√©es personnelles, il y a un segment d√©di√© et sp√©cialement prot√©g√©).  Il y a encore quelques clients - certains vendent le service et le deuxi√®me logiciel d'√©criture en premier.  De diff√©rents pays.  Et les deux se tiennent c√¥te √† c√¥te dans le nuage.  Une autre entreprise de vente au d√©tail ne nous accompagne que pour faire face aux pillards - ils ont √©t√© coup√©s une fois par mois de la lumi√®re sur le n≈ìud du serveur.  Il y avait des demandes comme un service pour les spammeurs: ¬´Nous voulons √™tre situ√©s en Russie.  Envoyer plusieurs millions de lettres par heure.  C'est n√©cessaire dans la F√©d√©ration de Russie.  Et le logiciel est russe. "  Dernier refus.  Le contr√¥leur d'√©clairage de l'un des bureaux (√©clairage dynamique des intemp√©ries et pr√©sence de personnes dans les bureaux) est transmis directement au cloud pour que le prestataire puisse s'y rendre.  Il s'agit de notre premier IoT dans le cloud. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414039/">https://habr.com/ru/post/fr414039/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414025/index.html">Les employeurs suivent les ordinateurs, les voyages aux toilettes et maintenant aussi les √©motions; Votre patron vous suit-il?</a></li>
<li><a href="../fr414027/index.html">Mes amis peuvent-ils √™tre consid√©r√©s comme de vrais amis?</a></li>
<li><a href="../fr414029/index.html">Une lumi√®re myst√©rieuse autour d'une √©toile nouvellement form√©e et ce qu'en pensent les astronomes</a></li>
<li><a href="../fr414031/index.html">Suite √† la rencontre "Nouvelles fonctionnalit√©s de PostgreSQL 11"</a></li>
<li><a href="../fr414037/index.html">Une fois dans une entreprise HFT ...</a></li>
<li><a href="../fr414043/index.html">Analyse des tables de routage, ou pourquoi un ing√©nieur r√©seau Python</a></li>
<li><a href="../fr414047/index.html">Comment fabriquer une √©chelle Jacob puissante √† partir d'un transformateur micro-ondes de vos propres mains</a></li>
<li><a href="../fr414049/index.html">Les principaux jeux de l'E3 2018: Fallout 76, Metro Exodus, Doom Eternal et autres</a></li>
<li><a href="../fr414053/index.html">5 id√©es fausses sur le RGPD</a></li>
<li><a href="../fr414055/index.html">Trans-PRK: l'une des normes de correction de la vision</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>