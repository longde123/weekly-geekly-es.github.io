<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî¶ ‚úãüèΩ üë®‚Äçüéì Mystery Shopper von CityMobile üë©üèª‚Äçüíª üÖ±Ô∏è üíà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo! Mein Name ist Narek Markosyan und ich bin Backend-Entwickler bei Citimobil. Ich m√∂chte Ihnen von unserem geschlossenen Telegramm-Bot "Mystery S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mystery Shopper von CityMobile</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/citymobil/blog/484728/">  Hallo!  Mein Name ist Narek Markosyan und ich bin Backend-Entwickler bei Citimobil.  Ich m√∂chte Ihnen von unserem geschlossenen <b>Telegramm-Bot "Mystery Shopper"</b> erz√§hlen. <br><br><h2>  Prolog </h2><br>  Niemand tr√§gt eine pinkfarbene Brille in CityMobile. Wir wissen, dass unser Service nicht perfekt ist. Deshalb arbeiten wir st√§ndig daran, ihn zu verbessern.  Kundenprobleme k√∂nnen mit der Anwendung, mit der Berechnung des Preises, aber meistens mit dem Fahrer verbunden sein. <br><br>  Wir lieben unsere Fahrer und bem√ºhen uns, ihre Arbeit unterhaltsamer und rentabler zu gestalten. Aufgrund eines skrupellosen Fahrers k√∂nnen wir jedoch mehrere Kunden verlieren und damit Fahrern die ihre Arbeit aufrichtig erledigen, den Garaus machen. <br><br>  Aus diesem Grund haben wir uns entschlossen, ein Tool zu entwickeln, um schnell auf Beschwerden im Zusammenhang mit Fahrern reagieren zu k√∂nnen. <br><a name="habracut"></a><br><h2>  Warum brauchen wir einen Bot? </h2><br>  Absolut alle Beschwerden unserer Kunden werden von den Mitarbeitern der Supportabteilung ber√ºcksichtigt, aber wir k√∂nnen uns aus mehreren Gr√ºnden nicht vollst√§ndig auf die von Kunden erhaltenen Statistiken verlassen: <br><br><ul><li>  <b>Nicht alle Kunden</b> hinterlassen Feedback, wenn etwas schief gelaufen ist. </li><li>  Wir k√∂nnen uns der <b>Objektivit√§t der</b> Kunden nicht immer sicher sein. </li><li>  Wir wollen und k√∂nnen unseren Kunden keine Reihe von <b>Kl√§rungsfragen stellen</b> , um ein vollst√§ndiges Bild zu erhalten. </li></ul><br>  Also, was ist zu tun?  Bitten Sie unsere Kollegen um Hilfe! <br><br><ul><li>  Die Mitarbeiter werden h√∂chstwahrscheinlich <b>nicht vergessen</b> , ein Problem zu melden. </li><li>  Die Mitarbeiter sind <b>objektiver</b> .  Nicht bis zum Ende, aber trotzdem :) </li><li>  Sie k√∂nnen zu einem Kollegen gehen und alle notwendigen Details herausfinden. </li></ul><br>  Nat√ºrlich k√∂nnen Sie bei Problemen jederzeit den Versandraum anrufen und auf Zwischenh√§ndler verzichten, aber der Bot hilft Ihnen bei der Ausf√ºhrung zweier wichtiger Aufgaben: Er <b>erinnert</b> Sie an das, worauf Sie achten m√ºssen, und erm√∂glicht es Ihnen, ein Problem per <b>Knopfdruck</b> zu melden. <br><br><h2>  Wie funktioniert der Bot? </h2><br><img src="https://drive.google.com/uc?export=view&amp;id=1FkPW2NhEdc8Mi1c_n-Oxcjf2a7I46QEL" alt="Bild"><br><br>  Der Mystery Shopper ist sehr einfach.  Es besteht nur aus zwei Handlern: <br><br>  Der erste Handler nimmt von unseren API-Reisen, die k√ºrzlich abgeschlossen wurden oder sich im Status "In Transit" befinden, und sendet die erste Reisefrage an den Chat. <br><br>  Der zweite Handler greift auf die Telegramm-API zu und nimmt ungelesene Nachrichten auf, durchl√§uft nacheinander jede Nachricht und sendet eine Antwort auf den Chat. <br><br>  Nat√ºrlich war es m√∂glich, dass unser Server automatisch Nachrichten an den Bot der Reise sendet und die Benutzerantworten aus dem Telegramm nicht stapelweise eingehen, sondern zum Zeitpunkt des Sendens, aber nach Diskussionen haben wir uns entschlossen, den oben beschriebenen Mechanismus durchzuf√ºhren.  Daf√ºr gab es mehrere Gr√ºnde: <br><br><ul><li>  Mit dieser Implementierung ist der Dienst f√ºr eingehende Anfragen an allen Ports <b>vollst√§ndig geschlossen</b> , wodurch wir keine Angst vor Hacking-Versuchen oder DDOS-Angriffen haben k√∂nnen. </li><li>  Wenn viele Nachrichten gleichzeitig von Benutzern eingehen, <b>bombardiert uns</b> Telegram nicht <b>mit Anfragen</b> . </li><li>  Wenn der Bot langweilig wird, hat dies <b>keine Auswirkungen auf</b> unseren Hauptserver und auf die Gesch√§ftsprozesse. </li></ul><br>  Wir haben MySQL als Basis f√ºr den Bot gew√§hlt.  Jede Datenbank w√§re f√ºr uns geeignet, auch noSQL. Wir haben uns jedoch f√ºr MySQL entschieden, um der Analytics-Abteilung die Verarbeitung der erforderlichen Daten zu erleichtern. <br><br>  Als Sprache haben wir hier zwischen PHP und GoLang gew√§hlt.  Wir haben bei PHP angehalten, weil "warum nicht".  Mit der Implementierung, die wir haben, w√ºrden wir nicht die Hauptvorteile von Go nutzen, sondern die weitere Entwicklung erschweren - nicht alle unsere Entwickler schreiben auf Go.  Wenn Sie eine Idee haben, was in dieser Implementierung von Go besser w√§re als PHP, w√ºrde ich mich freuen, diese in den Kommentaren zu lesen. <br><br><h2>  Verbesserungen </h2><br>  Seit der ersten Version wurden nicht viele Verbesserungen vorgenommen.  Nach dem offiziellen Start haben wir begonnen, Feedback zu sammeln, und dabei nur zwei Probleme festgestellt. <br><br>  <b>Das erste Problem ist das kurze Ged√§chtnis</b> .  In der ersten Implementierung begann der Bot, den Mitarbeiter 5 Minuten nach der Reise zu befragen.  Es stellte sich heraus, dass der Passagier in dieser Zeit einige Details vergessen konnte, zum Beispiel die Zulassungsnummer des Autos.  Nach der Verfeinerung begann der Bot eine Minute, nachdem der Passagier in das Auto gestiegen war, mit der Vermessung.  Der Bot stellte Fragen, deren Antwort bereits bekannt ist (Sauberkeit des Autos, ob das Auto die richtigen Nummern hat, etc.).  Nach der Reise kehrte der Bot mit einem weiteren Fragenb√ºndel zur√ºck, dessen Antworten erst w√§hrend der Reise deutlich werden. <br><br>  <b>Das zweite Problem ist, dass bei uns fast immer alles in Ordnung ist</b> .  Egal wie seltsam es auch klingen mag, aus der Sicht des Bots ist dies zu einem Problem geworden.  Unsere Kollegen sind nach jeder Reise zehnmal m√ºde und antworten: "Alles ist in Ordnung."  Wir haben dieses Problem durch Gruppieren von Fragen gel√∂st: Wir haben alle Fragen, die w√§hrend der Reise gestellt wurden, und alle Fragen, die danach gestellt wurden, zu zwei identischen Fragen zusammengefasst: ‚ÄûIst alles in Ordnung?‚Äú Mit einer anderen Reihe von Antworten. <br><br><img src="https://drive.google.com/uc?export=view&amp;id=1qi1ZO7J0HmygCH_lFMaBR_zKCfdSd-0q" alt="Bild"><br><br>  In naher Zukunft planen wir, die Anzahl der vertrauensw√ºrdigen Kunden zu erh√∂hen und damit den Bot effizienter zu machen.  Dazu m√ºssen Sie die Autorisierung wiederholen und kritische Ereignisse √ºberwachen.  Wenn es interessante √Ñnderungen gibt, schreibe ich einen separaten Artikel dar√ºber ... </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de484728/">https://habr.com/ru/post/de484728/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de484716/index.html">H√∂r auf, alles KI zu nennen</a></li>
<li><a href="../de484718/index.html">Moderne HP Drucker arbeiten nicht ohne Tintenabonnement</a></li>
<li><a href="../de484720/index.html">Konzert f√ºr eine Stadt mit Orchester: Wer und warum zeichnet die Kl√§nge des Alltags auf?</a></li>
<li><a href="../de484722/index.html">Welche Ruby on Rails-Entwicklungstools passen zu Ihrem Projekt: Top Ruby on Rails Gems f√ºr 2020</a></li>
<li><a href="../de484724/index.html">Neuigkeiten aus der Welt von OpenStreetMap Nr. 494 (21.12.2019-06.01.2020)</a></li>
<li><a href="../de484730/index.html">Dell Inspiron 7490: Leichtmetall-Laptop f√ºr jeden Tag mit hervorragender Autonomie</a></li>
<li><a href="../de484732/index.html">Was ist VMware und warum ist die Kompatibilit√§t mit SSDs wichtig?</a></li>
<li><a href="../de484734/index.html">Was auf der CES im 19. und 20. Jahrhundert h√§tte pr√§sentiert werden k√∂nnen</a></li>
<li><a href="../de484736/index.html">Linux: Entfernen des Sperrpools / dev / random</a></li>
<li><a href="../de484738/index.html">Exemplarische Vorgehensweise f√ºr die kontinuierliche Integration von Laravel 6 in Google Cloud Run</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>