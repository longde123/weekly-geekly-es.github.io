<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∂üèø üë©üèº‚Äçüéì ü•Ä Tutoriel JavaFX: FXML et SceneBuilder ü§Æ üíõ üë©üèº‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Traduction du tutoriel JavaFX: article FXML et SceneBuilder par Vojtech Ruzicka. 

 Comment cr√©er une interface graphique avec JavaFX en utilisant le ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tutoriel JavaFX: FXML et SceneBuilder</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474982/">  Traduction du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tutoriel JavaFX: article FXML et SceneBuilder</a> par Vojtech Ruzicka. <br><br>  Comment cr√©er une interface graphique avec JavaFX en utilisant le balisage FXML et SceneBuilder. <br><br>  Tous les articles de la s√©rie JavaFX: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tutoriel JavaFX: Prise en main</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tutoriel JavaFX: Bonjour tout le monde!</a> </li><li>  Tutoriel JavaFX: FXML et SceneBuilder </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tutoriel JavaFX: dispositions de base</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tutoriel JavaFX: dispositions avanc√©es</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tutoriel JavaFX: style CSS</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaFX Weaver: int√©gration des applications JavaFX et Spring Boot</a> </li></ol><a name="habracut"></a><br><h3>  Mani√®re traditionnelle </h3><br>  Dans l'article pr√©c√©dent, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nous avons cr√©√© une simple application Hello World</a> . <br><br>  Juste un rappel - le code ressemblait √† ceci: <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Stage primaryStage)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ primaryStage.setTitle(<span class="hljs-string"><span class="hljs-string">"Hello world Application"</span></span>); primaryStage.setWidth(<span class="hljs-number"><span class="hljs-number">300</span></span>); primaryStage.setHeight(<span class="hljs-number"><span class="hljs-number">200</span></span>); InputStream iconStream = getClass().getResourceAsStream(<span class="hljs-string"><span class="hljs-string">"/icon.png"</span></span>); Image image = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Image(iconStream); primaryStage.getIcons().add(image); Label helloWorldLabel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Label(<span class="hljs-string"><span class="hljs-string">"Hello world!"</span></span>); helloWorldLabel.setAlignment(Pos.CENTER); Scene primaryScene = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scene(helloWorldLabel); primaryStage.setScene(primaryScene); primaryStage.show(); }</code> </pre> <br>  Comme vous pouvez le voir, toute l'interface utilisateur est cr√©√©e en code Java. <br><br>  Il s'agit d'un exemple tr√®s simple, mais √† mesure que votre application devient plus complexe, lorsque vous devez entrer plusieurs niveaux de dispositions imbriqu√©es et de nombreux composants, le code r√©sultant peut devenir tr√®s difficile √† comprendre.  Cependant, ce n'est pas tout - dans la m√™me classe, il y a du code qui est responsable de la structure, des effets visuels et du comportement en m√™me temps. <br><br>  La classe n'a clairement aucune responsabilit√©.  Comparez cela, par exemple, avec l'interface Web, o√π chaque page a des t√¢ches clairement s√©par√©es: <br><br><ul><li>  HTML est une structure </li><li>  CSS est des effets visuels </li><li>  JavaScript est un comportement </li></ul><br><h3>  Pr√©sentation de FXML </h3><br>  √âvidemment, avoir tout le code en un seul endroit n'est pas une bonne id√©e.  Vous devez le structurer d'une mani√®re ou d'une autre afin qu'il soit plus facile √† comprendre et √† rendre plus facile √† g√©rer. <br><br>  En r√©alit√©, il existe de nombreux mod√®les de conception pour cela.  En r√®gle g√©n√©rale, vous vous retrouvez avec une option ¬´Model-View-Whats¬ª - c'est quelque chose comme ¬´Model View Controller¬ª, ¬´Model View Presenter¬ª ou ¬´Model View ViewModel¬ª. <br><br>  Vous pouvez passer des heures √† discuter des avantages et des inconv√©nients des diff√©rentes options - ne le faisons pas ici.  Plus important encore, avec JavaFx, vous pouvez utiliser n'importe lequel d'entre eux. <br><br>  Cela est possible car en plus de la conception proc√©durale de votre interface utilisateur, vous pouvez utiliser un balisage XML d√©claratif. <br><br>  Il s'av√®re que la structure hi√©rarchique XML est un excellent moyen de d√©crire la hi√©rarchie des composants dans l'interface utilisateur.  Le HTML fonctionne plut√¥t bien, non? <br><br>  Le format XML sp√©cifique √† JavaFX est appel√© FXML.  Dans celui-ci, vous pouvez d√©finir tous les composants d'application et leurs propri√©t√©s, ainsi que les associer au contr√¥leur, qui est responsable de la gestion des interactions. <br><br><h3>  T√©l√©charger des fichiers FXML </h3><br>  Alors, comment pouvons-nous changer notre m√©thode de lancement pour travailler avec FXML? <br><br><pre> <code class="java hljs">FXMLLoader loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FXMLLoader(); URL xmlUrl = getClass().getResource(<span class="hljs-string"><span class="hljs-string">"/mainScene.fxml"</span></span>); loader.setLocation(xmlUrl); Parent root = loader.load(); primaryStage.setScene(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scene(root)); primaryStage.show();</code> </pre> <br>  Ici, <i>root</i> repr√©sente le composant racine de votre interface utilisateur, d'autres composants y sont imbriqu√©s. <br><br>  La m√©thode de <i>chargement</i> a une valeur de retour g√©n√©rique, vous pouvez donc sp√©cifier un type sp√©cifique, pas <i>Parent</i> .  Ensuite, vous avez acc√®s √† des m√©thodes orient√©es composants.  Cependant, cela rend votre code plus fragile.  Si vous modifiez le type de composant racine dans votre FXML, l'application peut cesser de fonctionner au moment de l'ex√©cution, mais il n'y aura aucune erreur lors de la compilation.  En effet, il existe maintenant une incompatibilit√© du type d√©clar√© dans votre FXML et dans le chargeur Java FXML. <br><br><h3>  Cr√©er un fichier FXML </h3><br>  Nous savons maintenant comment charger le fichier FXML, mais nous devons encore le cr√©er.  Le fichier doit avoir l'extension .fxml.  Dans un projet Maven, vous pouvez placer ce fichier dans le dossier des ressources ou FXMLLoader peut le t√©l√©charger √† partir d'une URL externe. <br><br>  Apr√®s avoir cr√©√© le fichier, entrez la d√©claration XML dans sa premi√®re ligne: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span></code> </pre> <br><h3>  Importer </h3><br>  Avant d'ajouter des composants individuels √† un fichier, vous devez vous assurer qu'ils sont correctement reconnus.  Pour ce faire, ajoutez des instructions d'importation.  Ceci est tr√®s similaire √† l'importation dans les classes Java.  Vous pouvez importer des classes individuelles ou utiliser des caract√®res g√©n√©riques comme d'habitude.  Regardons un exemple de section d'importation: <br><pre> <code class="xml hljs"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import java.lang.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import java.util.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.control.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.layout.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br>  La bonne nouvelle est qu'au lieu d'ajouter toutes les instructions d'importation manuellement, votre IDE devrait vous aider √† ajouter l'importation comme √† les ajouter aux classes Java. <br><br><h3>  Ajout de composants </h3><br>  Il est maintenant temps d'ajouter quelques composants.  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article pr√©c√©dent,</a> nous avons appris que chaque sc√®ne ne peut avoir qu'un seul composant enfant.  Pour commencer, ajoutons une simple √©tiquette: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.control.Label</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag">&gt;</span></span>Hello World!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Bien s√ªr, l'√©tiquetage en tant que composant racine n'est pas un exemple tr√®s r√©aliste.  Il est g√©n√©ralement pr√©f√©rable d'utiliser une sorte de disposition (layout), qui est un conteneur pour plusieurs composants et organise leur disposition.  Nous couvrirons les dispositions plus tard dans cette s√©rie, mais pour l'instant, utilisons simplement une VBox simple qui place ses enfants verticalement les uns sur les autres. <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.control.Label</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.layout.VBox</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.control.Button</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hello world!"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"This is a simple demo application."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click me!"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3>  Espace de noms FX </h3><br>  Il existe quelques √©l√©ments et attributs FXML qui ne sont pas disponibles par d√©faut.  Vous devez ajouter un espace de noms FXML pour les rendre disponibles.  Il doit √™tre ajout√© au composant racine: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/javafx"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:fx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/fxml"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Vous pouvez maintenant utiliser les nouveaux √©l√©ments de l'espace de noms fx.  Essayons d'ajouter des identifiants uniques √† nos composants: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainTitle"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hello world!"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  L'attribut <i>fx: id</i> est un identifiant unique pour un composant qui peut √™tre utilis√© pour faire r√©f√©rence √† un composant provenant d'autres parties de notre FXML et m√™me de notre contr√¥leur. <br><br><h3>  Scripts </h3><br>  Notre application est toujours statique.  Il y a plusieurs √©tiquettes et un bouton, mais l'application ne fait rien de dynamique. <br><br>  R√©pondons au clic de notre bouton et changeons le titre de ¬´Click me!¬ª En ¬´Click me again!¬ª. <br><br>  La premi√®re chose √† faire est d'ajouter un gestionnaire d'√©v√©nements onAction pour notre bouton. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click me!"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onAction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"buttonClicked()"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Faites attention √† fx: id, c'est l'identifiant qui sera utilis√© plus tard pour faire r√©f√©rence au bouton. <br><br>  Vous devez maintenant fournir une fonction qui sera appel√©e pour g√©rer l'√©v√©nement.  Il peut √™tre d√©fini √† l'int√©rieur de la balise fx: script.  L'important est que vous puissiez utiliser diff√©rents langages pour √©crire un script, JavaScript, Groovy ou Clojure.  Regardons un exemple en JavaScript: <br><br><img src="https://habrastorage.org/webt/al/jy/a7/aljya7vcinsitfft9asobkkvfta.png"><br><br>  Notez que nous nous r√©f√©rons √† notre composant Button en utilisant l'identifiant mainButton, qui a √©t√© d√©clar√© comme ceci: <br><br><pre> <code class="xml hljs">fx:id = "mainButton"</code> </pre> <br>  Vous devez √©galement indiquer le langage de script que vous utilisez dans le fichier FXML: <br><br><pre> <code class="xml hljs"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">language javascript</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> <br>  Regardons le texte int√©gral de l'exemple: <br><br><img src="https://habrastorage.org/webt/kz/ta/nl/kztanlf-j7bz07gxtp5eagcmemk.png"><br><br><h3>  Dois-je l'utiliser? </h3><br>  L'exemple ci-dessus montre comment r√©f√©rencer des composants √† l'aide de <i>fx: id</i> et comment ajouter un comportement simple √† l'aide d'un script JavaScript.  Est-ce vraiment ce que vous devriez faire? <br><br>  Dans la plupart des cas, la r√©ponse est non.  Il y a plusieurs probl√®mes avec cette approche.  La raison pour laquelle FXML a √©t√© introduit √©tait une s√©paration des int√©r√™ts - pour s√©parer la structure et le comportement de l'interface utilisateur.  Dans ce script, le comportement fusionn√© avec la structure de l'interface utilisateur est √† nouveau renvoy√©.  De plus, comme nous ne travaillons plus avec le code Java, mais avec XML, toutes les v√©rifications de code au moment de la compilation et la s√©curit√© des types ont √©t√© perdues.  D√©sormais, tous les probl√®mes de l'application seront d√©tect√©s au moment de l'ex√©cution et non au moment de la compilation.  L'application est devenue tr√®s fragile et sujette aux erreurs. <br><br><h3>  Ajout d'un contr√¥leur </h3><br>  Alors, que peut-on faire pour obtenir une s√©paration claire des int√©r√™ts?  Vous pouvez lier le contr√¥leur √† notre fichier FXML.  Un contr√¥leur est une classe Java charg√©e de g√©rer le comportement et l'interaction utilisateur dans une application.  De cette fa√ßon, vous pouvez renvoyer des v√©rifications de s√©curit√© de type et de compilation. <br><br>  Le contr√¥leur est un POJO, il ne doit ni √©tendre ni impl√©menter quoi que ce soit, ni avoir d'annotations sp√©ciales. <br><br>  Comment puis-je associer une classe de contr√¥leur √† notre FXML?  Il existe essentiellement deux options. <br><br><h3>  En Java </h3><br>  Vous pouvez cr√©er vous-m√™me une instance du contr√¥leur ou utiliser toute autre m√©thode de cr√©ation d'une instance, telle qu'une injection de d√©pendance.  Ensuite, t√©l√©chargez simplement votre <i>FXMLLoader</i> . <br><br><pre> <code class="java hljs">FXMLLoader loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FXMLLoader(); loader.setController(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainSceneController());</code> </pre> <br><h3>  Dans FXML </h3><br>  Vous pouvez sp√©cifier la classe de votre contr√¥leur en tant qu'attribut <i>fx: controller</i> , qui doit se trouver dans le composant racine. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/javafx"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:fx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/fxml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:controller</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.vojtechruzicka.MainSceneController"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Si vous d√©clarez votre classe Controller dans FXML, elle est automatiquement cr√©√©e pour vous.  Cette approche a une limitation - dans le contr√¥leur, vous devez cr√©er un constructeur sans arguments pour faciliter la cr√©ation d'une nouvelle instance de la classe Controller. <br><br>  Pour acc√©der √† une instance d'un contr√¥leur cr√©√© automatiquement, vous pouvez utiliser le chargeur FXML: <br><br><pre> <code class="java hljs">FXMLLoader loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FXMLLoader(); loader.setLocation(getClass().getResource(<span class="hljs-string"><span class="hljs-string">"/mainScene.fxml"</span></span>)); MainSceneController controller = loader.getController();</code> </pre> <br><h3>  Appel des m√©thodes du contr√¥leur </h3><br>  Maintenant que vous avez un contr√¥leur, vous pouvez supprimer le script et impl√©menter la logique pour appuyer sur les boutons directement dans le contr√¥leur: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSceneController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Button clicked!"</span></span>); } }</code> </pre> <br>  L'√©tape suivante consiste √† enregistrer l'appel de cette m√©thode en tant que <i>gestionnaire d'</i> √©v√©nement <i>onAction de</i> notre bouton.  Pour faire r√©f√©rence aux m√©thodes de notre contr√¥leur, nous devons utiliser le signe <i>#</i> devant le nom de la m√©thode: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/javafx"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:fx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/fxml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:controller</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.vojtechruzicka.MainSceneController"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainTitle"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hello world!"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"subTitle"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"This is a simple demo application."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click me!"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onAction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#buttonClicked"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Lorsqu'un bouton est cliqu√©, il appelle la m√©thode <i>MainSceneController.buttonClicked ()</i> .  Gardez √† l'esprit que cela ne fonctionne que si la m√©thode est d√©clar√©e publique.  Si le modificateur d'acc√®s est plus strict, vous devez annoter la m√©thode avec l'annotation <i>@FXML</i> . <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@FXML</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Button clicked!"</span></span>); }</code> </pre><br><h3>  Incorporation de composants dans un contr√¥leur </h3><br>  Jusqu'√† pr√©sent, nous imprimons simplement sur la console.  Que se passe-t-il si nous voulons changer √† nouveau le texte de notre bouton en ¬´ <i>Cliquez-moi √† nouveau</i> ¬ª?  Comment pouvons-nous obtenir des liens vers des composants dans notre contr√¥leur? <br><br>  Heureusement, c'est facile.  Rappelez-vous ces attributs <i>fx: id</i> ? <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click me!"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onAction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#buttonClicked"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  JavaFX essaie de faire correspondre automatiquement les composants avec <i>fx: id</i> avec les champs d√©finis dans votre contr√¥leur avec le m√™me nom. <br><br>  Supposons que nous ayons un bouton d√©crit ci-dessus avec <br><br><pre> <code class="xml hljs">fx:id="mainButton"</code> </pre> <br>  JavaFX essaie d'injecter l'objet bouton dans votre contr√¥leur dans un champ appel√© <i>mainButton</i> : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSceneController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    fx:id = "mainButton" @FXML private Button mainButton; }</span></span></code> </pre> <br>  Comme dans les m√©thodes pr√©c√©dentes, vos champs doivent √™tre <i>publics</i> ou annot√©s <i>@FXML</i> . <br><br>  Maintenant que nous avons un lien vers notre bouton, nous pouvons facilement changer son texte: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSceneController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FXML</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Button mainButton; <span class="hljs-meta"><span class="hljs-meta">@FXML</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ mainButton.setText(<span class="hljs-string"><span class="hljs-string">"Click me again!"</span></span>); } }</code> </pre> <br><h3>  Constructeur de sc√®ne </h3><br>  L'√©criture de votre structure GUI en XML peut √™tre plus naturelle qu'en Java (surtout si vous √™tes familier avec HTML).  Cependant, ce n'est toujours pas tr√®s pratique.  La bonne nouvelle est qu'il existe un outil officiel appel√© Scene Builder qui vous aidera √† cr√©er l'interface utilisateur.  En bref, il s'agit d'un √©diteur graphique pour votre interface graphique. <br><br><img src="https://habrastorage.org/webt/vu/qy/0p/vuqy0pzwgyblbskqijeygkfxixu.png"><br><br>  L'√©diteur a trois domaines principaux: <br><br><ol><li>  La partie gauche affiche les composants disponibles qui peuvent √™tre gliss√©s vers la partie centrale.  Il contient √©galement une hi√©rarchie de tous les composants de votre interface utilisateur, afin que vous puissiez facilement y naviguer. </li><li>  La partie centrale est votre application affich√©e en fonction de votre fichier FXML. </li><li>  √Ä droite, l'inspecteur de composants actuel.  Ici, vous pouvez modifier diverses propri√©t√©s du composant actuel s√©lectionn√©.  Tout composant s√©lectionn√© au milieu de la hi√©rarchie est affich√© dans l'inspecteur. </li></ol><br><h3>  Autonome </h3><br>  Scene Builder peut √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©charg√© en</a> tant qu'application autonome pouvant √™tre utilis√©e pour modifier des fichiers FXML. <br><br><h3>  Int√©gration avec IntelliJ IDEA </h3><br>  Alternativement, Scene Builder offre une int√©gration avec l'IDE. <br><br>  Dans IntelliJ IDEA, vous pouvez cliquer avec le bouton droit sur n'importe quel fichier FXML, puis s√©lectionner l'option de menu Ouvrir dans SceneBuilder. <br><br>  Alternativement, IntelliJ IDEA int√®gre SceneBuilder directement dans l'IDE.  Si vous ouvrez le fichier FXML dans IDEA, deux onglets appara√Ætront en bas de l'√©cran <br><br><ul><li>  Texte </li><li>  Sc√©nographe </li></ul><br>  Pour chaque fichier FXML, vous pouvez facilement basculer entre l'√©dition du fichier FXML directement ou via SceneBuilder. <br><br><img src="https://habrastorage.org/webt/z0/cz/va/z0czvaalmf393mck_k0nnmjx4ji.png"><br><br>  Dans IntelliJ IDEA, vous pouvez configurer l'emplacement de l'ex√©cutable SceneBuilder: <br><br> <code>Settings ‚Üí Languages &amp; Frameworks ‚Üí JavaFX ‚Üí Path to SceneBuilder</code> <br> <br><h3>  Et ensuite </h3><br>  Dans le prochain article de notre s√©rie, nous aborderons quelques dispositions de base qui peuvent √™tre utilis√©es pour organiser les composants d'une application GUI dans JavaFX. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr474982/">https://habr.com/ru/post/fr474982/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr474966/index.html">Comment √©crire un contrat Python intelligent sur le r√©seau Ontology. Partie 1: Blockchain & Block API</a></li>
<li><a href="../fr474968/index.html">RxDart pour les plus petits ... projets</a></li>
<li><a href="../fr474970/index.html">Comment √©crire un contrat intelligent avec Python sur l'ontologie? Partie 5: API native</a></li>
<li><a href="../fr474976/index.html">Boating City: comment Venise existe sans voitures</a></li>
<li><a href="../fr474978/index.html">IBM Watson Visual Recognition: la reconnaissance d'objets d√©sormais disponible dans IBM Cloud</a></li>
<li><a href="../fr474984/index.html">RabbitMQ contre Kafka: basculement et haute disponibilit√©</a></li>
<li><a href="../fr474988/index.html">Bienvenue chez Mitap: Carri√®res chez Data Science pour d√©butants</a></li>
<li><a href="../fr474990/index.html">Pratique: comment cr√©er un r√©seau Wi-Fi dans un parc de la ville</a></li>
<li><a href="../fr474992/index.html">Analyse des batteries d'ordinateurs portables d√©fectueuses. Notes de motard √©lectrique</a></li>
<li><a href="../fr474994/index.html">Comment couper un monolithe en services et maintenir les performances des caches en m√©moire sans perdre en coh√©rence</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>