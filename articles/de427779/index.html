<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🤝‍👨🏽 🤱🏻 🧜 MIT-Kurs "Computer Systems Security". Vorlesung 13: Netzwerkprotokolle, Teil 3 🤴🏼 🎢 👨‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Vorlesung # 6.858. "Sicherheit von Computersystemen." Nikolai Zeldovich, James Mickens. 2014 Jahr 
 Computer Sy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIT-Kurs "Computer Systems Security". Vorlesung 13: Netzwerkprotokolle, Teil 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/427779/"><h3>  Massachusetts Institute of Technology.  Vorlesung # 6.858.  "Sicherheit von Computersystemen."  Nikolai Zeldovich, James Mickens.  2014 Jahr </h3><br>  Computer Systems Security ist ein Kurs zur Entwicklung und Implementierung sicherer Computersysteme.  Die Vorträge behandeln Bedrohungsmodelle, Angriffe, die die Sicherheit gefährden, und Sicherheitstechniken, die auf jüngsten wissenschaftlichen Arbeiten basieren.  Zu den Themen gehören Betriebssystemsicherheit, Funktionen, Informationsflussmanagement, Sprachsicherheit, Netzwerkprotokolle, Hardwaresicherheit und Sicherheit von Webanwendungen. <br><br>  Vorlesung 1: „Einführung: Bedrohungsmodelle“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 2: „Kontrolle von Hackerangriffen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 3: „Pufferüberläufe: Exploits und Schutz“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 4: „Trennung von Privilegien“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 5: „Woher kommen Sicherheitssysteme?“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  Vorlesung 6: „Chancen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 7: „Native Client Sandbox“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 8: „Netzwerksicherheitsmodell“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 9: „Sicherheit von Webanwendungen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 10: „Symbolische Ausführung“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 11: „Ur / Web-Programmiersprache“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 12: Netzwerksicherheit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 13: „Netzwerkprotokolle“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <a name="habracut"></a><br><br>  Angenommen, ein Client gibt eine Anfrage zum Empfang einer bestimmten Nachricht aus, z. B. "Geben Sie mir die Nachricht Nr. 7", und verschlüsseln Sie diese Sache mit dem Schlüssel Kc, mail.  Alles scheint wunderbar zu sein. <br>  Der Mailserver verfügt über einen gemeinsam genutzten Schlüssel, der diese Nachricht entschlüsselt. Anschließend sendet der Server den Text dieser E-Mail-Nachricht, die ebenfalls mit Kc-Mail verschlüsselt ist, an den Client zurück.  Betrachtet jemand dies als Problem?  Warum kann das schlecht sein? <br><br><img src="https://habrastorage.org/webt/zg/se/x8/zgsex8vs0-rw-ek8lnahdh6zi3c.jpeg"><br><br>  <b>Student:</b> Es besteht die Möglichkeit, dass ein Hacker eine Nachricht ersetzen oder fälschen kann. <br><br>  <b>Professor:</b> Ja, das ist beunruhigend, weil ich Ihnen jede gewünschte E-Mail senden kann.  Angenommen, ich möchte eine Nachricht in Ihrem Posteingang löschen, weil ich nicht möchte, dass Sie sie lesen.  Angenommen, dieser Brief befindet sich unter Nummer 23. <br><br>  Deshalb werde ich Ihnen einen Brief schicken, in dem steht: "Nr. 23 löschen", und Sie werden ihn lesen.  Sie werden es erhalten, und die Antwort vom Mailserver mit dem Befehl "Löschen Nr. 23" wird mit diesem Schlüssel Kc, mail verschlüsselt.  Und bisher wurde es nicht an den Mailserver gesendet. <br><br>  Wenn ich das Netzwerk jedoch zum richtigen Zeitpunkt scanne und dieses Paket festschreibe, kann ich es an den Mailserver zurücksenden.  Es sieht aus wie die Meldung "Nr. 23 löschen", die mit dem Schlüssel verschlüsselt wurde.  In diesem Fall sagt der Mailserver: "Oh ja, natürlich möchten Sie diese Nachricht löschen, und ich werde es tun!" <br><br>  Hier liegt also ein Problem vor, da wir dem Gegner erlauben, den Mailserver zu verwirren, ob unsere Nachricht von ihm generiert oder überhaupt an ihn gesendet wurde. <br><br>  Dies wird in Kryptografie- und Protokollbeschreibungen häufig als „Reflexionsangriff“ bezeichnet.  Haben Sie Vorschläge, wie Sie dieses Problem vermeiden können? <br><br>  <b>Student: Ist</b> es möglich, einfach eine Nachrichtenüberschrift einzufügen, die von ihrem Ursprung spricht? <br><br>  <b>Professor:</b> Ja, in der Regel möchten Sie eine eindeutige Möglichkeit haben, festzustellen, was passiert.  Eine Möglichkeit besteht darin, in jeder Nachricht einen Header zu haben, der besagt: "von Client zu Server" oder "von Server zu Client".  In der Praxis ist es sogar noch besser, zwei separate Schlüssel zu verwenden. <br><br>  Möglicherweise möchten Sie einen langen Datenstrom haben, der möglicherweise keinen Platz für Header-Bits bietet.  Daher handelt Kerberos 5 jedes Mal, wenn Sie eine Verbindung mit einem Dienst herstellen, die Verwendung von zwei Schlüsseln anstelle von einem aus.  Der erste Schlüssel wird zum Verschlüsseln von Daten vom Client zum Server und der zweite zum Verschlüsseln von Daten vom Server zurück zum Client verwendet.  Dies ist die optimalste Schutzmethode für den praktischen Gebrauch. <br><br>  Lassen Sie uns jetzt darüber sprechen, was mit KDC passiert.  Der Kerberos-Server ist für das System sehr wichtig. Was passiert jedoch, wenn dieses KDC abstürzt?  Wie schlimm ist das für unser System?  Wie wird sich der „Fall“ von KDC auf Ihr Leben auswirken, wenn Sie Athena verwenden? <br><br>  <b>Student: Sie können sich</b> wahrscheinlich nicht anmelden? <br><br>  <b>Professor:</b> Ja, das ist es.  Zweitens können Sie auch keine Tickets für neue Anfragen erhalten.  Aber das Coole ist, dass KDC so ziemlich außerhalb des kritischen Pfades für eine bestehende Verbindung liegt.  Daher werden keine Daten durch das KDC geleitet.  Und wenn Sie bereits ein Ticket für etwas haben, können Sie es weiterhin verwenden und den Zugang zu einigen Netzwerkdiensten behalten.  Dies ist eigentlich ziemlich gut zwischengespeichert.  Ich denke, das zweite gute, was sich die Entwickler vorgestellt haben, ist das Potenzial, KDC zu replizieren.  Daher verfügt das System über einen Kerberos-Hauptserver, auf dem die erste Kopie der gesamten Datenbank gespeichert ist.  Auf diese Weise können Sie nur Replikate lesen, die eine Kopie der ursprünglichen Datenbank enthalten.  Es sind keine Aktualisierungen wie Benutzerregistrierung oder Schlüsselaktualisierungen zulässig, Sie können jedoch auf Anmelde- und TGS-Anforderungen antworten. <br><br>  Mit dem "Klon" -Datensatz der Kerberos-Datenbank können Sie sich weiterhin anmelden und mit Diensten kommunizieren, auch wenn KDC fehlschlägt, bis er entfernt und seine volle Funktionalität wiederhergestellt wird. <br><br>  <b>Student:</b> Wie schwierig ist es, den KDC-Server und das gesamte System zu gefährden? <br><br>  <b>Professor:</b> KDC ist das Rückgrat jedes Systems, auf dem Kerberos ausgeführt wird.  Wenn dieser Dienst gefährdet ist, erhält der Angreifer die vollständige Kontrolle über das System.  Er kann Tickets für jeden gewünschten Service bekommen und gibt vor, der richtige Kunde zu sein, also ist es ziemlich schlecht.  Wir wollen KDC wirklich schützen, aber es ist schwer.  Obwohl ich keinen einzigen Fall kenne, in dem das KDC MIT seit etwa 20 Jahren wirklich kompromittiert worden wäre.  Aber was es wirklich wert ist, sich Sorgen zu machen, ist die Software-Implementierung der Sicherheit der Dinge, die diese beiden Dienste austauschen, Kerberos und TGS.  Denn wenn in ihnen ein Pufferüberlauf auftritt oder eine andere ähnliche Sicherheitsanfälligkeit auftritt, ist dies wirklich schlimm. <br><br><img src="https://habrastorage.org/webt/pg/e4/8_/pge48_xze8liwroytuzamq7p-7k.jpeg"><br><br>  Wenn beispielsweise ein SSH-Server unter KDC Kerberos ausgeführt wird und jemand das Root-Passwort dieses SSH-Servers errät, meldet er sich einfach an und kopiert die Datenbank.  Ich denke also, dass Sie die Angriffsfläche hier wirklich minimieren möchten. Seien Sie also sehr vorsichtig, wenn Sie KDC-Code schreiben.  Lassen Sie niemanden direkt auf diesen Dienst zugreifen.  Natürlich gibt es einige Orte, für die Sie in Bezug auf Sicherheit als paranoid gelten sollten, aber dies ist für Server nicht so wichtig.  Natürlich speichern sie Daten, aber wenn jemand in einen Mailserver oder Druckserver einbricht, können sie wiederhergestellt werden. <br><br>  Hier ist eine interessante Frage.  Angenommen, jemand hat einen Mailserver gehackt.  Was sollten Sie tun, um sich von diesem Angriff zu erholen?  Wenn zum Beispiel jemand Ihre Mail gestohlen hat, ist dies schlecht.  Aber was sollte getan werden, um zu verhindern, dass ein Angreifer in Zukunft Zugriff auf Ihre E-Mails erhält? <br><br>  Kerberos verfügt nicht über einen Abbruchvorgang. Sie können jedoch einen neuen Schlüssel für den Mailserver generieren und in die KDC-Datenbank einfügen.  Dann installieren Sie einen neuen Mailserver, geben ihm einen neuen Schlüssel, und ein Angreifer, der einen alten Schlüssel vom Mailserver hat, kann ihn in keiner Weise beeinflussen. <br><br>  Angenommen, Sie ändern den Schlüssel des Mailservers Kmail nicht.  Was wird es führen? <br><br><img src="https://habrastorage.org/webt/gk/vs/sk/gkvssk_j0lemoi7eajculgbyrmo.jpeg"><br><br>  <b>Student: Der</b> Schlüssel passt nicht auf den neuen Server. <br><br>  <b>Professor:</b> Angenommen, Sie installieren einen neuen Mailserver, um den vom Hacker verwendeten Fehler zu beheben.  Aber er hat immer noch einen Kmail-Schlüssel.  Möglicherweise dauerte die Serverwiederherstellung einen ganzen Tag, sodass alle Tickets abgelaufen waren.  Kann dieser Hacker etwas Interessantes mit dem System machen?  Wenn Sie dem neuen Mailserver altes Kmail zur Verfügung stellen - ist das schlecht? <br><br>  <b>Student:</b> Ein Angreifer kann einen Mailserver infiltrieren, weil er das erste Ticket entschlüsseln kann. <br><br>  <b>Professor:</b> Natürlich ist Kmail deshalb sehr wichtig.  Sie sagen, dass Sie alles entschlüsseln können, was auf dem Mailserver passiert.  Angenommen, der Client stellt nach dem Reparieren eine Verbindung zum Mailserver her, aber der Angreifer kennt Kmail weiterhin, das seit dem letzten Hacken des Systems erhalten geblieben ist.  Daher kann er dieses Kmail-Ticket entschlüsseln, in das Ticket schauen und einen Sitzungsschlüssel erhalten.  Damit kann er alle von Ihnen gesendeten Nachrichten, alle erhaltenen Antworten usw. entschlüsseln.  Daher ist es nach dem Wiederherstellen des Mailservers sehr wichtig, dieses Kmail zu ändern. <br><br>  In vielerlei Hinsicht ist dies sogar noch schlimmer als nur das Verfolgen des Datenverkehrs. Wenn ein Angreifer diesen Kmail-Schlüssel kennt, kann er neue Tickets für den Mailserver synthetisieren, ohne KDC zu kontaktieren.  Angenommen, ich kenne Kmail und möchte E-Mails von einem Mailserver lesen.  Ich werde nur dieses Ticket ausstellen, alle fünf Felder in der richtigen Reihenfolge sammeln, einen neuen Schlüssel generieren und ihn mit Kmail verschlüsseln.  Es wird wie die reale Sache aussehen, die von KDC erzeugt wird. <br><br>  Daher stelle ich nur eine Verbindung zum Mailserver her, der die Nachricht korrekt entschlüsselt und denkt, dass es sich um einen bestimmten Benutzer handelt, sodass Sie ihm E-Mails bereitstellen, einen freigegebenen Schlüssel für ihn freigeben können usw.  Daher ist es wichtig, dass niemand den geheimen Schlüssel dieses Dienstes erkennt, da Sie sonst den Datenverkehr nicht nur entschlüsselbar und sichtbar machen, sondern auch jeden in diesem Dienst nachahmen können. <br><br>  <b>Student:</b> Wenn der Mailserver nach einem Fehler wiederhergestellt wird, müssen Sie wahrscheinlich seinen Schlüssel in der Datenbank ändern? <br><br>  <b>Professor:</b> Ja, nachdem Sie den Mailserver nach dem Fehler wiederhergestellt haben, müssen Sie den Mitarbeiter anrufen, der mit diesem KDC arbeitet, und sagen: "Unser Mailserver wurde gehackt. Löschen Sie also seinen alten Ks-Schlüssel aus der Datenbank und fügen Sie einen neuen ein!"  Sie möchten also wahrscheinlich einen Mechanismus außerhalb der Datenbank haben, um zu beweisen, dass Sie wirklich ein Mailserver sind. <br><br>  Denn wir werden gleich sehen, wie Sie Schlüssel ändern, beispielsweise mithilfe des Kennwortänderungsprotokolls.  Sie können Kennwörter im Kerberos-Protokoll verwenden. Wenn Sie das alte Kennwort kennen, können Sie das Benutzerkennwort in KDC in das neue Kennwort ändern.  Da der Hacker das per E-Mail gesendete Passwort abfangen kann, müssen Sie sich wahrscheinlich an das Kontoregistrierungsbüro wenden und ihn bitten, Ihr Passwort für den Mailserver zu ändern.  Sie generieren einen neuen Schlüssel und geben ihn Ihnen, damit der Hacker ihn nicht erkennen kann. <br><br><img src="https://habrastorage.org/webt/qu/hc/g7/quhcg7c1wxo9vslewqzvam_qkl0.jpeg"><br><br>  Wenn der Angreifer diesen Kmail-Schlüssel kennt, kann der Mailserver den Angreifer nicht vom richtigen Client unterscheiden.  In Wirklichkeit hat der Angreifer wahrscheinlich den Schlüssel geändert, sodass er jetzt die neuen Parameter kennt und Sie nicht da sind, als wären Sie nicht mehr auf dem Mailserver.  Sie benötigen also externe Protokolle für die Grundsätze der Erstregistrierung in der Datenbank und zum Ändern von Schlüsseln, wenn Sie Ihr Passwort vergessen haben oder jemand Ihr Passwort geändert hat, sodass Sie den Zugriff verloren haben. <br><br>  Daher gibt es am MIT eine Gruppe von Personen, die Benutzern helfen, Konten zu registrieren und ihre Passwörter zu ändern.  Dazu legen Sie ihnen Ihre MIT-ID vor, und egal was passiert, sie können den Schlüssel für Sie ändern. <br><br>  Daher ist es sehr wichtig, es richtig zu machen.  Denn wenn die Person, mit der Sie das Passwort zurücksetzen können, beim Überprüfen Ihrer MIT-ID einen Fehler macht, können Sie das System gefährden, oder?  Diese Mitarbeiter bei Kerberos sind also Teil einer vertrauenswürdigen Computerbasis. <br><br>  Schauen wir uns eine weitere interessante Verwendung von Kerberos an.  Mit Kerberos können Sie sich über SSH bei einem Remotecomputer anmelden.  Die Funktionsweise ist der Arbeit mit einem Mailserver sehr ähnlich.  Sie erhalten ein Ticket für den SSH-Server und senden das Ticket zusammen mit Ihrer SSH-Verbindung.  Aber was ist, wenn Sie eine Verbindung zu Athena.dial-up herstellen und keinen Kerberos-Client auf Ihrem Computer haben?  Sie möchten sich nur mit Ihrem regulären Passwort bei Athena.dial-up anmelden. <br><br>  Wie authentifiziert Sie die Athena-Einwahl, wenn Sie nur mit einem Kennwort eine Verbindung zu diesem Computer herstellen?  Sie haben kein Passwort für Athena.dial-up, es ist ein Passwort für den Kerberos-Server.  Was sollte ein DFÜ-Computer tun, wenn Sie sich mit einem Kennwort anmelden? <br><br>  Einwahl Die Einwahl funktioniert mit demselben Protokoll wie die Anmeldung.  Also wird er eine Anfrage vom Client an den Kerberos-Server senden, mit der Bitte, ein Ticket zu geben, zum Beispiel an den Benutzernamen "Alice".  Und zurück erhält der Client eine Antwort, die mit Alices Passwort verschlüsselt ist.  Dann wird er versuchen, das Passwort anzuwenden und zu sehen, ob er richtig entschlüsselt.  Wenn es korrekt entschlüsselt wird, können Sie sich beim System anmelden. <br><br>  <b>Student:</b> Sie müssen Ihren Schlüssel nicht einmal an den SSH-Server senden, da in dieser Verbindung der KDS-Server den Kc-Benutzer über die SSH-Verbindung zurücksenden kann. <br><br>  <b>Professor:</b> Es ist möglich, dass ja, aber es erfordert eine gewisse Vorstellungskraft des SSH-Clients, was möglicherweise nicht der Fall ist.  Aber im Prinzip ist das wahr.  Wenn Sie dies korrekt ausführen möchten, möchten Sie wahrscheinlich einen Kerberos-Client auf Ihrem Computer haben und selbst ein Ticket erhalten oder einen SSH-Server für die Weiterleitung verwenden, ohne dass der SSH-Server über Ihren Schlüssel verfügt. <br><br>  Dies ist wahrscheinlich ein guter Plan.  Es stellt sich jedoch heraus, dass dies eine ziemlich gefährliche Sache ist, die es jedem ermöglicht, sich beim SSH-Server anzumelden.  Früher haben wir über einen Client gesprochen, der versucht, sich anzumelden.  Dieser Client wusste, dass er durch die Angabe eines legalen Passworts eine Antwort vom richtigen Kerberos-Server erhalten hat. Wenn er die Antwort entschlüsseln kann, funktioniert das Passwort wahrscheinlich korrekt. <br><br>  Dieses Protokoll enthält jedoch nichts, was die Tatsache bestätigt, dass diese Antwort vom richtigen Kerberos-Server stammt.  Wenn ich versuche, mich einfach durch Eingabe eines Kennworts am Computer anzumelden, sendet der Computer diese Anforderung an den Server.  Anschließend wird die Antwort auf diese Anforderung zurückgegeben, die mit dem von mir eingegebenen Kennwort verschlüsselt zu sein scheint. Diese Antwort stammt jedoch möglicherweise auch nicht vom Kerberos-Server. <br><br>  Angenommen, ich habe einen Computer, mit dem ich mich anmelden möchte.  Ich gebe das Passwort X ein und dann sendet der Computer diese Anfrage von, s an den Kerberos-Server. <br><br><img src="https://habrastorage.org/webt/me/2k/z5/me2kz5r_ewynn9cu1vjdubcx6yo.jpeg"><br><br>  Bevor der Kerberos-Server die echte Antwort an den Client sendet, sende ich meine eigene Antwort, die wie die echte Antwort aussieht und mit meinem X-Passwort verschlüsselt ist. Anschließend versucht die Workstation, bei der ich mich anmelden möchte, oder der SSH-Server, diese Antwort mit meinem falschen Passwort zu entschlüsseln.  Dies wird gut aussehen, da diese Antwort von mir anstelle des echten Kerberos-Servers generiert wurde.  Daher kann ich mich anstelle von Ihnen anmelden.  Warum passiert das? <br><br>  <b>Student:</b> weil keine Authentifizierung vom Kerberos-Server erfolgt. <br><br>  <b>Professor:</b> Ja, hier gibt es nichts, was dies mit einem echten Kerberos-Server verbinden könnte.  Kerberos korrigiert diese Unannehmlichkeit für Remotecomputer wie Athena.dial-up, indem DFÜ-Computer selbst über eine Art geheimen Schlüssel verfügen, den sie mit KDC teilen.  Um die Einwahl oder eine Workstation zu betreten, bei der es wirklich darum geht, zu überprüfen, ob Sie wirklich der richtige Benutzer sind, werden zwei Dinge getan. <br><br>  Die erste Anmeldung bei Kerberos erfolgt wie in der Abbildung gezeigt.  Aber er wird niemandem vertrauen, nur weil diese Antwort richtig entschlüsselt ist.  Er wird versuchen, mit TGS ein Serviceticket für sich selbst zu bekommen, da dieser DFÜ-Computer über einen eigenen geheimen Schlüssel verfügt.  In der ersten Phase registriert er Sie einfach und wendet sich dann an TGS. Er sagt: "Bitte geben Sie mir ein Serviceticket nach meinem eigenen Prinzip auf der Grundlage der Einwahl für diesen Kunden." <br><br>  Dann erhält er eine Antwort und prüft, ob er sie korrekt entschlüsseln kann, da er den Einwahlschlüssel für diesen Ks kennt.  Wenn es entschlüsselt wird, bedeutet dies, dass der Computer mit dem richtigen Kerberos-Server gesprochen hat.  Weil nur der richtige Kerberos-Server in der zweiten Stufe mir ein Ticket senden kann, das mit meinem geheimen Kdial-up-Schlüssel verschlüsselt ist. <br><br>  Das ist also eigentlich sehr wichtig.  In der Regel führen Athena-Workstations diesen zusätzlichen Schritt nicht aus, da Athena-Workstations keinen geheimen Schlüssel haben, der auf ihnen gespeichert und mit KDC geteilt wird.  Warum wird es für Athena-Workstations als normal angesehen, Ihnen die Möglichkeit zu geben, sich in der ersten Phase anzumelden, aber keine solche Möglichkeit zur Einwahl zu geben? <br><br>  <b>Student:</b> Dies ist normal, wenn Sie keinen Zugriff auf Dienste haben, da der Angreifer kein Ticket fälschen konnte. <br><br>  <b>Professor:</b> Ja, das stimmt, denn an der DFÜ-Workstation selbst ist nichts Interessantes.  Selbst wenn Sie Root-Zugriff haben oder eine Workstation mit einem falschen Passwort eingeben, stört dies niemanden.  Es ist nicht so, als könnten sie etwas anderes außerhalb ihrer Workstation tun.  Bei der Einwahl ist alles viel interessanter.  Möglicherweise haben Sie andere Prozesse, die von anderen Sitzungen auf der DFÜ-Workstation ausgeführt werden, und die Tatsache, dass Sie mit einer Unix-spezifischen UID angemeldet sind und wirklich sicherstellen möchten, dass Sie die richtige Entität sind, sind dort wichtig. .  Aus diesem Grund führen sie einen solchen zweistufigen Prozess durch, um in die Maschine zu gelangen, die gleichzeitig von mehreren Benutzern verwendet wird. <br><br>  Das Letzte, worüber ich sprechen möchte, ist, wie wir Schlüssel ersetzen.  Wir haben die Idee vertreten, dass Sie den Mailserverschlüssel gefährden können.  Aber als Benutzer möchten Sie wahrscheinlich auch das Passwort ändern.  Sie dachten beispielsweise, Ihr Passwort sei nicht sicher genug, Sie haben es auf ein Blatt Papier geschrieben, und jemand hat es möglicherweise ausspioniert. Jetzt möchten Sie es ändern. <br><br>  In gewisser Hinsicht ist es ganz einfach.  Zusätzlich zu den Kerberos- und TGS-Diensten verfügt die Kerberos-Serverschnittstelle über einen zusätzlichen Dienst namens Kpassword, mit dem Sie Ihr Kennwort ändern können. <br><br><img src="https://habrastorage.org/webt/zj/y8/gx/zjy8gx7oozfj50360gne0ofsgvm.jpeg"><br><br>  Sie erhalten ein Ticket für die Nutzung dieses Dienstes wie ein Ticket für einen Mailserver oder einen anderen Server.  Danach senden Sie Ihr neues Passwort an diesen Kpassword-Dienst, verschlüsselt mit Ihrem Sitzungsschlüssel.  Wenn dann alle Prüfungen bestanden sind, wird Ihr Schlüssel in der Datenbank mit einem neuen Schlüssel aktualisiert. <br><br>  Wenn Sie sich erinnern, hatten wir ein Ziel: Wenn jemand Ihr Ticket stiehlt, sollte er nicht gut genug sein, um die Möglichkeit zu geben, Ihr Konto vollständig zu erfassen.  Aus diesem Grund akzeptiert der Kpassword-Dienst kein Ticket, sondern nur das Ticket, das Sie ursprünglich vom Kerberos-Dienst mit Ihrem Kc-Schlüssel erhalten.      :   ,     ,   ,   ,      – Kerberos  TGS –    .  :       Kerberos,   ,       TGS,    . <br>  Kpassword,  ,       ,     : «,      Kerberos,   .       TGS,  , , ,   - ,       .        ». <br><br>  , Kpassword ,     ,        ,       Kerberos.  ,     Kpassword  ,         Kerberos  Kpassword. <br><br>      Kpassword,     - . ,     ,          Kerberos.       Kerberos,     ID    ,      Kpassword. <br><br><img src="https://habrastorage.org/webt/x4/c7/h8/x4c7h8z8eixciai6bewebqiw6dk.jpeg"><br><br>    Kerberos   ,          Kpassword,   Kpass,     Kc,kpass     Kpassword,    Kc. <br><br>    ,         –     Kpassword,      Tc,kpass,     Kpass,  ,      new pass       Kc,pass,    . <br><br> ,      ,  , ,   .    -     Athena,      ,      ,  ,      .       , ,  Gmail,     ,    . ,        Kerberos   TGS   ,   -   ,          . <br><br> ,  -    Athena  ,     ,     ,   .  ,               .     ,   .     Tc,kpass,      Kpassword,       TGS,    .        ,        Kerberos   Kc. <br><br> <b>:</b>  ,      ? <br><br> <b>:</b>    K   .  Kerberos     ,     .     ,       K.  -  K,      . <br><br> <b>:</b>   ,      ? <br><br> <b>:</b> ,      -  ,          ,        .        . <br><br>   ,      ,    ,     ,    ,        ,     . <br><br> <b>:</b> ,      ,       . <br><br> <b>:</b> ,   ,     .  , , Kerberos      ,   ,       .          ,    .          .     ,   ,        . <br><br> <b>:</b>          K,     ? <br><br> <b>:</b>   ,  K –  56-  DES,       , ,  56 , , 7 ,         .           . <br><br>    ,     ,    . ,    ,  ,     ,       .     Kerberos? <br><br><img src="https://habrastorage.org/webt/39/at/mk/39atmkdgs6dxvozlcbkbpjhmpjy.jpeg"><br><br> <b>:</b>      … <br><br> <b>:</b> , ,  ,      , ,   ,       .         ? <br><br> <b>:</b>     . <br><br> <b>:</b> ,       . <br><br> <b>:</b>  -   ,  , ,    ,      … <br><br> <b>:</b> ,   ,    Kerberos ,          ,   ,      .      . ,  ,    ,     «»  -  ,    !    : „,       Kc,pass,        K.      Kc,pass  ,        Kpassword».     ,    ,     KDC.        ,           . <br>  ,         ,    -    ,  -               .       . <br><br> <b>:</b> ,    Kerberos    ? <br><br> <b>:</b> , .      « -»,    ,   ,   .         ,       . <br><br> ,         Kerberos 5.   ,         ,    ,         .     ,      . ,      X,   Kpassword  -    Y.  ,     ,     .  ,    g   X  ,      g   Y. <br><br><img src="https://habrastorage.org/webt/5n/au/u6/5nauu6bp5aruxtrgbzdxxidyyz0.jpeg"><br><br>     gy      X,     gxy,     gx      Y       gxy.        gxy     ,   .  ,      ,   gxy.    ,      ,  -     gxy,    .  ,     . <br><br> <b>:</b>   -       G. <br><br> <b>:</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ja natürlich. </font><font style="vertical-align: inherit;">G ist ein Parameter, den Sie zu Beginn des Protokolls oder im Voraus senden können, um ihn in Kerberos zu platzieren. Dies ist nicht allzu wichtig. </font><font style="vertical-align: inherit;">Wenn Sie das Diffie-Hellman-Austauschverschlüsselungsprotokoll verwenden, macht Kerberos 5 es auf jeden Fall richtig. </font><font style="vertical-align: inherit;">Sie müssen jedoch über die Existenz dieses Protokolls Bescheid wissen, wenn Sie ein eigenes neues Protokoll entwickeln. </font><font style="vertical-align: inherit;">Das ist alles, was ich über Kerberos sprechen wollte, und am Montag wollen wir über SSL sprechen.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/QOtA76ga_fY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Vollversion des Kurses finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Vielen Dank für Ihren Aufenthalt bei uns.  Gefällt dir unser Artikel?  Möchten Sie weitere interessante Materialien sehen?  Unterstützen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% für Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir für Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit über VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verfügbar). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s bis Dezember kostenlos,</b> wenn Sie für einen Zeitraum von sechs Monaten bezahlen, können Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> bestellen. <br><br>  <b>Dell R730xd 2 mal günstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgebäudes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern für 9.000 Euro für einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427779/">https://habr.com/ru/post/de427779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427763/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 13: Netzwerkprotokolle, Teil 1</a></li>
<li><a href="../de427767/index.html">Situation: In Kanada wurde vorgeschlagen, eine Steuer auf Streaming einzuführen - wir diskutieren das Problem</a></li>
<li><a href="../de427771/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 13: Netzwerkprotokolle, Teil 2</a></li>
<li><a href="../de427773/index.html">Ich habe eine browserübergreifende Erweiterung für Registerkarten geschrieben, aber das tun Sie nicht</a></li>
<li><a href="../de427775/index.html">Ein als Programmierer getarnter Bot korrigiert Codefehler</a></li>
<li><a href="../de427781/index.html">Warum Kreditorganisationen Data Science</a></li>
<li><a href="../de427783/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 14: „SSL und HTTPS“, Teil 1</a></li>
<li><a href="../de427785/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 14: „SSL und HTTPS“, Teil 2</a></li>
<li><a href="../de427787/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 14: „SSL und HTTPS“, Teil 3</a></li>
<li><a href="../de427789/index.html">Exxon Mobil wird beschuldigt, die Umweltverträglichkeitsdaten des Unternehmens manipuliert zu haben, um Investoren auszutricksen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>