<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîª üë©üèΩ‚Äçüé® üåñ C√≥mo hacer que el pago sea m√°s conveniente: la experiencia de un proveedor de IaaS üåÅ üë©üèæ‚Äçüöí ‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una de las cuestiones importantes cuando se trabaja con los servicios de un proveedor de IaaS es la conveniencia del pago. Desde el primer d√≠a del ini...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo hacer que el pago sea m√°s conveniente: la experiencia de un proveedor de IaaS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/1cloud/blog/433948/">  Una de las cuestiones importantes cuando se trabaja con los servicios de un proveedor de IaaS es la conveniencia del pago.  Desde el primer d√≠a del inicio de nuestro proyecto, tratamos de simplificar el proceso de realizar pagos con tarjetas bancarias y continuar mejorando este mecanismo.  Hoy decidimos hablar sobre d√≥nde comenzamos y compartir nuestra experiencia. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/iy/6k/pv/iy6kpvrzewuk4mudc9nkfwiadu8.jpeg"></a> <a name="habracut"></a><br>  <font color="#A9A9A9"><i>/ Flickr / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Muhammad Ashiq</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CC BY-SA</a></i></font> <br><br><h2>  Antecedentes </h2><br>  Hemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estado</a> proporcionando servicios de IaaS en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">1cloud</a> desde 2012.  Durante este tiempo, logramos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">trabajar</a> con una gran cantidad de pasarelas de pago.  Uno de los primeros fue Money Online.  Trabajamos con √©l durante dos a√±os y luego comenzamos a conectar servicios alternativos en caso de posibles dificultades t√©cnicas. <br><br>  Como alternativa, se consideraron PayPal y Robocassa.  Como resultado, ambas plataformas estaban conectadas, aunque <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hubo algunas dificultades</a> con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esto</a> .  En el primer caso, para importar la identificaci√≥n del cliente en el formulario de pago, tuvimos que ajustar las reglas CSS y modificar los elementos est√°ndar en la p√°gina web.  En la situaci√≥n con Robocassa, varias solicitudes en la API no coincid√≠an con su descripci√≥n, pero con la ayuda del soporte t√©cnico, la situaci√≥n tambi√©n se resolvi√≥.  No nos detuvimos en estas decisiones y consideramos otras opciones que los socios potenciales nos ofrec√≠an. <br><br>  Entonces, comenzamos a trabajar con el sistema de pago PayMaster (reemplaz√≥ a ‚ÄúMoney Online‚Äù), que nos ofreci√≥ condiciones favorables en comisi√≥n y una API conveniente.  Durante mucho tiempo, esta pasarela de pago actu√≥ como la principal.  Sin embargo, recientemente decidimos redise√±ar la usabilidad de nuestro servicio y simplificar el proceso de pago de servicios con tarjeta bancaria para particulares.  Para que UX cumpla con nuestros requisitos, hemos integrado otra pasarela de pago: CloudPayments. <br><br><h2>  ¬øC√≥mo puedo mejorar el proceso de pago UX? </h2><br>  Estamos trabajando en el modelo de prepago.  El cliente repone su cuenta en su cuenta personal y luego los fondos se debitan de esta cuenta a medida que se consumen los servicios de IaaS (se cargan cada diez minutos). <br><br>  Para reponer el saldo con una tarjeta de cr√©dito, en el caso de PayMaster, el cliente tuvo que pasar por un proceso de cuatro pasos: <br><br><ol><li>  Ingrese el monto del pago en el formulario en el panel de control, haga clic en el bot√≥n "Pagar" y vaya a la p√°gina de pasarela de pago. </li><li>  Indique el tel√©fono o la direcci√≥n de correo electr√≥nico para recibir el cheque y haga clic en Continuar. </li><li>  Ingrese los detalles de la tarjeta y presione nuevamente el bot√≥n "Pagar". </li><li>  Indique el c√≥digo de confirmaci√≥n de transacci√≥n que el banco envi√≥ como parte del procedimiento 3D Secure. </li></ol><blockquote>  <i><b>Descargo de responsabilidad:</b> el algoritmo descrito anteriormente se aplica a los pagos con tarjeta bancaria realizados por particulares.</i>  <i>Las personas jur√≠dicas pagan los servicios del proveedor de IaaS en las facturas.</i>  <i>Mientras mejoramos la usabilidad, finalizamos los mecanismos para la facturaci√≥n autom√°tica de dichas facturas, pero no las consideraremos en el marco de este material, ya que las entidades legales no interact√∫an con una pasarela de pago.</i> </blockquote><br>  Decidimos simplificar el proceso de pago para los usuarios y, en general, mejorar la apariencia y la usabilidad de los formularios para completar los datos de la tarjeta bancaria.  Para esto, hemos identificado dos tareas para nosotros mismos, que discutiremos a continuaci√≥n. <br><br><h5>  Tarea 1: excluir el pasaje a la p√°gina de pasarela de pago </h5><br>  Como se√±alamos anteriormente, cuando un usuario paga por nuestros servicios, para completar los detalles de la tarjeta, se ve obligado a ir al sitio de la pasarela de pago.  Por lo tanto, una persona ten√≠a que presionar muchos botones de confirmaci√≥n y esperar a que se cargaran p√°ginas con informaci√≥n sobre el reabastecimiento de la cuenta. <br><br>  En este caso, surgi√≥ otro problema: despu√©s de que el usuario deposit√≥ dinero en la cuenta, permaneci√≥ en la p√°gina de la pasarela de pago hasta que hizo clic en un enlace especial para volver a 1cloud.ru.  Esto dificultaba trabajar con nuestro panel de control, por ejemplo, si, despu√©s del pago, el usuario deseaba agregar capacidad a su infraestructura de TI. <br><br><blockquote>  <i>"Seg√∫n los an√°lisis, solo unos pocos clientes siguieron el enlace y regresaron a nuestro sitio web", dijo <b>Sergey Belkin</b> , jefe de desarrollo de 1cloud.ru.</i>  <i>- Esto se debi√≥ en parte al hecho de que el cliente tuvo que hacer clic en el enlace "Volver a la tienda en l√≠nea".</i>  <i>Esto a pesar del hecho de que nuestro servicio no es una tienda en l√≠nea ".</i> </blockquote><br>  Adem√°s, quer√≠amos reducir al m√≠nimo el n√∫mero de campos rellenados por el usuario, dejando solo aquellos que sean realmente necesarios para la operaci√≥n.  Para llevar a cabo esta tarea, elegimos la pasarela de pago de CloudPayments, cuyos empleados inicialmente atrajeron nuestra atenci√≥n con respuestas de soporte t√©cnico r√°pidas y completas. <br><br>  Adem√°s, esta pasarela de pago ten√≠a una oficina de representaci√≥n en Kazajst√°n.  Esto permiti√≥ implementar un nuevo m√©todo de pago para nuestro servicio de alojamiento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">oblako.kz</a> .  De lo contrario, todas nuestras transferencias de Kazajst√°n a Rusia (o viceversa) estar√≠an sujetas a una comisi√≥n adicional. <br><br>  CloudPayments sugiri√≥ usar un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">script de chekout</a> especial.  Le permite implementar el formulario de pago directamente en nuestro panel de control y transferir los datos completados a la pasarela de pago sin guardarlos de nuestro lado. <br><br>  Para implementar el script, tuvimos que pasar por un an√°lisis de seguridad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PCI DSS</a> en una de las organizaciones acreditadas, ese era un requisito de CloudPayments.  El escaneo es necesario para confirmar el cumplimiento t√©cnico de la norma y para excluir la posibilidad de robo de datos del usuario al completar formularios en el sitio. <br><br>  La auditor√≠a de cumplimiento de PCI DSS fue realizada por ARinteg.  Les enviamos una solicitud en la que indicamos el deseo de someternos a una auditor√≠a, completamos un cuestionario y fijamos una fecha para la verificaci√≥n.  En el lado de ARinteg, la preparaci√≥n para el escaneo demora aproximadamente medio d√≠a (es decir, puede escanear casi de inmediato), pero nos tom√≥ entre cuatro y cinco d√≠as adicionales para preparar cuidadosamente nuestra infraestructura. <br><br>  La exploraci√≥n dur√≥ aproximadamente 15 horas, aunque sucede que la exploraci√≥n lleva varios d√≠as.  Los especialistas de ARinteg verificaron SSL y la protecci√≥n contra solicitudes de inyecci√≥n y otras vulnerabilidades en nuestro sitio web. <br><br>  No aprobamos la prueba inicial y nos dieron una lista de problemas que deb√≠an solucionarse.  Todos ellos eran insignificantes, por ejemplo, hab√≠a un m√©todo posterior que se utilizaba cuando el usuario evaluaba nuestras instrucciones paso a paso en el sitio.  Eliminamos todos los comentarios y el segundo intento de auditor√≠a fue exitoso.  A continuaci√≥n, podr√≠amos pasar a la implementaci√≥n del script chekout. <br><br>  El script est√° registrado en nuestro sitio web, recopila datos de la tarjeta del formulario especificado y compone un criptograma a partir de ellos para el pago a trav√©s de la API de CloudPayments.  Se ve as√≠: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.createCryptogram = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = checkout.createCryptogramPacket(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.success) { <span class="hljs-comment"><span class="hljs-comment">//   alert(result.packet); } else { //     ,  `result.messages` : // { name: "      ", cardNumber: "  " } //  `name`, `cardNumber`    `&lt;input ... data-cp="cardNumber"&gt;` for (var msgName in result.messages) { alert(result.messages[msgName]); } } }; $(function () { /*  checkout */ checkout = new cp.Checkout( // public id    "test_api_00000000000000000000001", // ,     document.getElementById("paymentFormSample")); });</span></span></code> </pre> <br>  El formulario para ingresar los datos de la tarjeta bancaria se ve as√≠: <br><br><img src="https://habrastorage.org/webt/yi/vl/yt/yivlyttyhrz8mgmikdhnr9_8mys.png"><br><br>  Durante la implementaci√≥n de la secuencia de comandos y el formulario, pudimos reducir al m√≠nimo el n√∫mero de campos rellenados por el usuario.  Dejaron solo los que son realmente necesarios para la operaci√≥n.  Por ejemplo, se eliminaron los campos "Nombre" y "Apellido".  Como nos explicaron los representantes de la pasarela de pago, los bancos no verifican estos datos (solo el n√∫mero de tarjeta, la fecha y el CVV son importantes), por lo que decidimos omitirlos y simplificar todo el proceso. <br><br>  Adem√°s, dejamos m√°s clara la informaci√≥n sobre nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">programa de descuentos</a> : con una reposici√≥n de la cuenta por √∫nica vez por un monto de 5 mil rublos, el 10% se acredita en forma de bonos, de 10 000 rublos - 20%, m√°s de 100 000 rublos - 25%.  Tambi√©n agregamos la capacidad de guardar datos de mapas para los usuarios.  Toda esta informaci√≥n se almacena en el lado de la pasarela de pago de CloudPayments en forma cifrada. <br><br><h5>  Tarea 2: realizar el pago autom√°tico </h5><br>  Este es un pago que ocurre autom√°ticamente bajo alguna condici√≥n.  Muy a menudo esta caracter√≠stica es utilizada por los servicios de suscripci√≥n.  Sin embargo, la mayor√≠a de las pasarelas de pago ofrecen solo la opci√≥n cuando se produce un reabastecimiento autom√°tico en un horario (en una fecha determinada).  Es importante para nosotros que la oportunidad de reponer la cuenta est√© disponible autom√°ticamente en cualquier momento cuando el cliente se quede sin fondos en la cuenta (ya que trabajamos en prepago).  Por lo tanto, para implementar el pago autom√°tico, utilizamos el m√©todo que se utiliza al pagar desde una tarjeta "recordada" (utilizando un token temporal). <br><br>  Funciona de la siguiente manera: despu√©s del primer pago exitoso realizado por el usuario, la puerta de enlace genera su token para el par de tarjetas de servicio y lo env√≠a en una respuesta de devoluci√≥n.  Este token se guarda y, tras el pago repetido, ya se transfiere, y no los datos de la tarjeta.  Resulta que enviamos una solicitud a la puerta de enlace, en la que indicamos nuestra clave API (identificador de que la solicitud proviene de 1cloud), token y cantidad.  La puerta de enlace comprueba si se cre√≥ tal token y, si todo est√° en orden, procesa el pago por el importe especificado. <br><br>  La fecha en que es necesario realizar un pago autom√°tico, la calculamos din√°micamente en funci√≥n del consumo actual de servicios por parte del usuario y el saldo en la cuenta.  Supongamos que un cliente tiene mil rublos en el balance general y consumi√≥ dos rublos en el √∫ltimo intervalo de diez minutos.  Est√° claro que la fecha aproximada de puesta a cero vendr√° en quinientos intervalos de diez minutos, esto es aproximadamente 34 d√≠as.  Por lo tanto, podemos hacer un pago autom√°tico unos d√≠as antes del final de los fondos.  El cliente elige el tama√±o del pago autom√°tico de forma independiente. <br><br><h2>  Que sigue </h2><br>  Ahora estamos probando estas soluciones y evaluando los resultados de la implementaci√≥n.  Seg√∫n una votaci√≥n entre los clientes, la mayor√≠a son bastante cambiantes.  Estudiaremos m√°s profundamente los comentarios sobre el sistema, analizaremos los datos y, si es necesario, realizaremos ajustes. <br><br><h5>  PD Materiales frescos de nuestro blog corporativo: </h5><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DevOps en un servicio en la nube usando 1cloud.ru como ejemplo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lo que necesitas saber sobre la firma digital</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Minimizaci√≥n de riesgos: c√≥mo no perder sus datos</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es433948/">https://habr.com/ru/post/es433948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es433936/index.html">¬øBusca un regalo de alta tecnolog√≠a para un ni√±o? Piensa en un patio de recreo, no en un corralito</a></li>
<li><a href="../es433938/index.html">C√≥mo Yandex y Google resumen el a√±o</a></li>
<li><a href="../es433940/index.html">¬øCu√°nto cuesta la revisi√≥n en la AppStore?</a></li>
<li><a href="../es433944/index.html">Excepciones devastadoras</a></li>
<li><a href="../es433946/index.html">Hoja de trucos para la inteligencia artificial: deseche el exceso, ense√±e lo principal. T√©cnica de procesamiento de secuencia de entrenamiento</a></li>
<li><a href="../es433952/index.html">10 razones para elegir una soluci√≥n para SAP HANA de HPE. Parte 2</a></li>
<li><a href="../es433954/index.html">Ocho tecnolog√≠as de audio y dispositivos de audio que ingresar√°n al Sal√≥n de la Fama de TECnology en 2019</a></li>
<li><a href="../es433956/index.html">Los modders han usado IA para mejorar la textura en los juegos.</a></li>
<li><a href="../es433958/index.html">Aplicaciones TDD en Spring Boot: trabajando con una base de datos</a></li>
<li><a href="../es433964/index.html">M√≥dulos ECMAScript en Node.js: un nuevo plan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>