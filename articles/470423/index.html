<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Redefinici贸n basada en la edici贸n. Parte 2   ★</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Como se prometi贸 en una publicaci贸n anterior sobre la redefinici贸n basada en la edici贸n, esta es la segunda parte. 

  

 Entonces, 驴con qu茅 esta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Redefinici贸n basada en la edici贸n. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sportmaster_lab/blog/470423/">  Hola  Como se prometi贸 en una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicaci贸n anterior</a> sobre la redefinici贸n basada en la edici贸n, esta es la segunda parte. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/fw/cn/5m/fwcn5mwqouhgqal64ozpfwavw1w.png" width="800"></a> <br><br>  Entonces, 驴con qu茅 estamos trabajando?  Nuestro servidor de producci贸n principal es Oracle 12C, Enterprise Edition.  Y, lo que es importante tener en cuenta, varias docenas de aplicaciones se ejecutan simult谩neamente.  驴Por qu茅 nos estamos centrando en esto?  La tecnolog铆a es relativamente nueva, no est谩 muy bien implementada.  Y ser铆a il贸gico transferirle algunos sistemas cr铆ticos de inmediato.  Por lo tanto, decidimos por nosotros mismos que nos moveremos lentamente de los sistemas menos cr铆ticos a los m谩s cr铆ticos.  En consecuencia, el siguiente problema que ten铆amos que entender: c贸mo trabajar con la tecnolog铆a EBR y c贸mo organizar la integraci贸n en la situaci贸n cuando tenemos una versi贸n versionada y la otra no.  En la versi贸n 12 de Oracle, como result贸, puede crear objetos no versionados, paquetes no versionados, representaciones no versionadas en un esquema versionado para organizar la integraci贸n. <br><a name="habracut"></a><br>  Por supuesto, podemos crear una API no versionada y d谩rsela al esquema no versionado para su uso.  Pero, 驴qu茅 pasa si esta API que no es de versi贸n (o parte de ella) se usa dentro de nuestra aplicaci贸n y necesitamos versionarla dentro de nosotros mismos y dejar de lado los objetos que no sean de versi贸n?  Este es solo el siguiente problema con el que luchamos.  Hemos usado la API muchas veces, pero, como recordar谩n, existe una limitaci贸n de que los objetos versionados no pueden usarse sin versi贸n.  Naturalmente, siempre que se estuvieran ejecutando varias aplicaciones en el servidor, era necesario comprender c贸mo cambiar铆amos una aplicaci贸n a la nueva Edici贸n y mantener la capacidad de utilizar la API de este esquema con otros esquemas de bases de datos. <br><br>  Hay varias opciones para instalar Edition: <br><br><ul><li>  establecer el valor de edici贸n predeterminado para toda la base de datos </li><li> instale el entorno nuevamente en la base de datos completa. </li></ul><br>  Estas opciones se descartan inmediatamente porque al menos algunas aplicaciones no cambiar谩n al uso de EBR. <br><br>  Tambi茅n es posible crear un servicio para determinar la versi贸n, o determinar la versi贸n cuando se conecta la aplicaci贸n al circuito.  Esto es conveniente si nos conectamos a la base de datos a trav茅s de alguna aplicaci贸n de terceros. <br><br>  驴Y si necesitamos trabajos para ejecutar seg煤n lo programado y trabajar en alguna edici贸n espec铆fica?  En consecuencia, hay otra opci贸n para cambiar a una nueva versi贸n: <b>orientar la sesi贸n actual a una versi贸n espec铆fica</b> . <br><br>  En realidad, elegimos esto para nosotros como soluci贸n.  Puede adjuntar un disparador despu茅s del inicio de sesi贸n al esquema versionado, lo que dir谩 que la sesi贸n actual en este esquema funcionar谩 en esta edici贸n. <br><br><img src="https://habrastorage.org/webt/pu/rf/qy/purfqyxkj-ya3rxtm9xbtem561q.png" width="800"><br><br>  Volviendo a la integraci贸n y duplicaci贸n de la l贸gica.  Hay tareas: quiero versionar alg煤n tipo de l贸gica de aplicaci贸n dentro de mi esquema, y tambi茅n necesito exponerlo a un usuario que no sea de versi贸n.  Al principio, parec铆a que esto no pod铆a implementarse, pero despu茅s de profundizar en la pregunta, observamos que el paquete dbms_sql habitual, que en principio est谩 destinado a realizar alg煤n tipo de consultas din谩micas, puede ayudar a resolver este problema.  Como?  Muy simple: al procesar una solicitud o llamar a cualquier bloque an贸nimo, podemos arrojar el nombre de la condici贸n como un par谩metro, lo que indica la versi贸n en la que se analizar谩 y ejecutar谩 este c贸digo.  Si necesitamos usar alg煤n procedimiento dentro de nosotros mismos y darle el mismo procedimiento a un esquema de terceros, simplemente lo envolvemos con una llamada en el procedimiento dbms_sql.parse, creando as铆 un contenedor que se puede colocar en un objeto que no sea de versi贸n y, por favor, podemos usar nuestro objeto versionado usuario no versionado. <br><br>  驴A qu茅 te enfrentas aqu铆?  Por alguna raz贸n, al especificar la condici贸n, los par谩metros de salida no se emiten en los procedimientos.  Por qu茅: no est谩 claro, pero en los esquemas en los que trabajamos, esto no se usa con frecuencia.  Tal vez volveremos a hacer la l贸gica de alguna manera, o buscaremos otras soluciones. <br><br><img src="https://habrastorage.org/webt/q9/m-/cv/q9m-cvm7psxxryvi_e_bpgkilug.png" width="800"><br><br>  Los siguientes problemas son errores o caracter铆sticas del EBR que encontramos.  El primero es un problema con los tipos construidos y las funciones canalizadas.  驴Qu茅 tiene que ver Pipeline con esto?  Adem谩s del hecho de que tenemos realmente ciertos algoritmos que funcionan sobre la base de funciones canalizadas, Pipeline es una cierta soluci贸n para dejar a un lado la vista versionada.  Heredamos las vistas, que contienen una l贸gica bastante complicada para el preprocesamiento de datos, y los esquemas de terceros tambi茅n usan estas vistas.  En consecuencia, era necesario comprender c贸mo configurar nuestras vistas de versiones a un circuito de consumo de datos sin versi贸n, siempre que el conjunto de columnas de salida no cambie.  Como una soluci贸n de este tipo, estaba claro que pod铆a envolver todas estas vistas con dbms_sql en la funci贸n Pipeline y finalmente ponerlas a la vista del consumidor, s铆, esto requiere muchos recursos para el servidor, pero esto no requerir铆a ninguna modificaci贸n por parte del sistema receptor. <br><br>  Entonces, volviendo al uso de las funciones de canalizaci贸n, result贸 que si el tipo que se est谩 construyendo no se crea en el paquete de versi贸n que se est谩 creando y se est谩 construyendo por primera vez, el paquete simplemente no se compila y se desmorona.  Inmediatamente no lleg贸 una soluci贸n, fue a buscar lo que fue sugerido por otros programadores?  Alguien dijo que es necesario crear este tipo en la versi贸n cero del paquete, o crear un paquete con el tipo correspondiente en la versi贸n cero de la base de datos.  No estaba claro por qu茅 hacer esto.  Encontraron una soluci贸n de que estos tipos, que se crean impl铆citamente cuando se compil贸 el paquete, podr铆an simplemente colocarse en un tipo separado como un objeto de base de datos.  De este modo, se resuelve el problema con las funciones del transportador. <br>  La siguiente caracter铆stica con la que nos topamos es el comportamiento no est谩ndar de las vistas versionadas. <br><br>  驴Recuerdas que habl茅 sobre el hecho de que los objetos se heredan y actualizan?  Entonces, result贸 que si usted y yo creamos una vista versionada en una edici贸n condicionalmente cero, en la quinta edici贸n notamos que ten铆amos inexactitudes en los comentarios.  Por ejemplo, me doy cuenta de que en un comentario en una columna puedo intercambiar dos letras en lugares.  隆No dejes tanta imperfecci贸n! <br><br>  Entonces, el comando habitual de comentarios lleva al hecho de que nuestra vista versionada se actualiza en la versi贸n actual.  Debido a esto, todos los paquetes dependientes se desmoronan y 驴c贸mo lidiar con ellos?  Para hacer esto, escribieron un cierto script que, al crear una nueva edici贸n, actualizar谩 la vista de versiones cada vez que se lance la pr贸xima versi贸n.  Esto no conlleva una gran carga en el diccionario de la base de datos, pero si es necesario, realice correcciones menores o, por ejemplo, emita nuevas subvenciones, no necesitamos crear una nueva edici贸n <br><br>  Bueno, el 煤ltimo error o caracter铆stica de este tipo ... No est谩 claro por qu茅, cuando el cambio no es nulo, las restricciones en la columna de vistas versionadas se desmoronaron.  Es decir, tan pronto como decimos que nuestra columna de la tabla base ahora no deber铆a tener restricciones nulas, la vista se desmorona incluso cuando se utiliza la redifinition dbms.  No podr铆amos derrotar esto de ninguna manera, tal vez los lectores se hayan dado cuenta de esto, ser谩 interesante saber si se ha encontrado una soluci贸n. <br><br><img src="https://habrastorage.org/webt/ns/99/i3/ns99i3pxy6azxgaokdjnnvo7fea.png" width="800"><br><br>  驴Qu茅 me gustar铆a decir en conclusi贸n?  La redefinici贸n basada en la edici贸n es una tecnolog铆a efectiva para una oportunidad real de lanzar un lanzamiento o revisi贸n en l铆nea, en modo de usuario.  Tocamos, sentimos, nos dimos cuenta de que organizar la integraci贸n en un servidor, cuando no todos los esquemas se mover谩n para usar esta tecnolog铆a, es real, sin mencionar que el esquema versionado puede funcionar en un servidor dedicado o en una base de datos de contenedor separada. <br><br>  Y como una aplicaci贸n, y una respuesta a la pregunta clave, "驴es posible en la producci贸n?" ... Esperamos que la Redefinici贸n basada en la edici贸n se traslade tarde o temprano a todos nuestros proyectos, y tal vez esta sea la 煤ltima parada de nuestras aplicaciones y garantice una calma. suspensi贸n del desarrollador responsable de instalar la nueva versi贸n. <br><br>  En realidad, eso es todo.  Gracias por su atencion </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/470423/">https://habr.com/ru/post/470423/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../470411/index.html">10 caracter铆sticas poco conocidas de las Herramientas para desarrolladores de Chrome</a></li>
<li><a href="../470413/index.html">驴Qu茅 es mejor elegir en 2020: React or Vue?</a></li>
<li><a href="../470415/index.html">FAQ.Net - un cuaderno o programa de notas para Windows gratis</a></li>
<li><a href="../470417/index.html">Industria 4.0: Ideas empresariales aut贸nomas de SAP y KUKA</a></li>
<li><a href="../470421/index.html">Ataques y seguridad de los sistemas modernos de Windows</a></li>
<li><a href="../470429/index.html">ERP no desarrollado en producci贸n: en cuidados intensivos o en una morgue? (continuaci贸n)</a></li>
<li><a href="../470437/index.html">Avance digital: Finales del Hackathon m谩s grande del mundo</a></li>
<li><a href="../470441/index.html">Tama帽os de diferentes tipos de objetos Java</a></li>
<li><a href="../470443/index.html">Perfilado continuo en Go</a></li>
<li><a href="../470445/index.html">El primer prototipo de una computadora cu谩ntica en Rusia se lanz贸 en NUST "MISiS"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>