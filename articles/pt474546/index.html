<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÖüèº üë©üèø‚Äçüî¨ üèéÔ∏è Mudou de Terraform para CloudFormation - e lamentou üòù üôÖ üìΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apresentar a infraestrutura como c√≥digo em formato de texto repetitivo √© uma pr√°tica recomendada simples para sistemas que voc√™ n√£o precisa carregar. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mudou de Terraform para CloudFormation - e lamentou</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/474546/"><p>  Apresentar a infraestrutura como c√≥digo em formato de texto repetitivo √© uma pr√°tica recomendada simples para sistemas que voc√™ n√£o precisa carregar.  Essa pr√°tica tem um nome - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Infraestrutura como c√≥digo</a> , e at√© agora existem duas ferramentas populares para sua implementa√ß√£o, especialmente na AWS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Terraform</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CloudFormation</a> . </p><br><p><img src="https://habrastorage.org/webt/ff/f_/rw/fff_rw-n0dk_n_l6qxrxkp_-h9i.png"><br>  <em>Compare a experi√™ncia com Terraform e CloudFormation</em> </p><br><p>  Antes de ingressar no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Twitch</a> (tamb√©m conhecido como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Amazon Jr.</a> ), trabalhei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em uma startup</a> e usei o Terraform por tr√™s anos.  Em um novo local, tamb√©m usei o Terraform com poder e principal e, em seguida, a empresa empurrou a transi√ß√£o para tudo na Amaz√¥nia, incluindo o CloudFormation.  Trabalhei duro para desenvolver as melhores pr√°ticas para ambos e usei as duas ferramentas em fluxos de trabalho muito complexos em toda a organiza√ß√£o.  Mais tarde, depois de considerar cuidadosamente as consequ√™ncias da mudan√ßa do Terraform para o CloudFormation, fiquei convencido de que o Terraform era provavelmente a melhor escolha para a organiza√ß√£o. </p><a name="habracut"></a><br><h2 id="terraform-uzhasnyy">  Terraform Horrible </h2><br><h3 id="beta-versiya-po">  Beta Software </h3><br><p> O Terraform nem sequer lan√ßou a vers√£o 1.0, e este √© um bom motivo para n√£o us√°-lo.  Desde que eu o testei pela primeira vez, ele mudou muito, mas o <code>terraform apply</code> frequ√™ncia interrompido ap√≥s v√°rias atualiza√ß√µes ou logo ap√≥s alguns anos de opera√ß√£o.  Eu diria que "agora tudo est√° diferente", mas ... ent√£o todo mundo parece dizer n√£o?  Existem altera√ß√µes incompat√≠veis com as vers√µes anteriores, embora sejam apropriadas, e at√© a sensa√ß√£o √© de que a sintaxe e as abstra√ß√µes dos armazenamentos de recursos agora s√£o o que voc√™ precisa.  A ferramenta parecia estar melhor, mas ...: -0 </p><br><p>  A AWS, por outro lado, fez um bom trabalho em manter a compatibilidade com vers√µes anteriores.  Tudo, provavelmente, porque seus servi√ßos costumam ser bem testados dentro da organiza√ß√£o e somente ent√£o, renomeados, publicados.  Ent√£o, "se esfor√ßou" ainda √© fracamente dito.  Manter a compatibilidade com vers√µes anteriores da API para um sistema t√£o multivariado e complexo como o AWS √© incrivelmente dif√≠cil.  Qualquer pessoa que tenha suportado APIs publicamente dispon√≠veis e usadas com a mesma amplitude deve entender o qu√£o dif√≠cil tem sido por tantos anos.  Mas o comportamento do CloudFormation em minha mem√≥ria nunca mudou ao longo dos anos. </p><br><h3 id="znakomsya-noga-eto-pulya">  Conhe√ßa a perna ... √© uma bala </h3><br><p>  Tanto quanto eu sei, n√£o √© poss√≠vel remover um recurso de pilha CloudFormation de terceiros da minha pilha CF.  A situa√ß√£o √© semelhante com o Terraform.  Permite importar recursos existentes para sua pilha.  Pode-se dizer que a fun√ß√£o √© impressionante, mas com grande poder vem uma grande responsabilidade.  √â necess√°rio apenas colocar o recurso na pilha e, enquanto voc√™ trabalha com a pilha, n√£o √© poss√≠vel excluir ou alterar esse recurso.  Uma vez que apareceu.  De alguma forma, em um site do Twitch, algu√©m, sem planejar nada errado, importou acidentalmente um grupo de seguran√ßa da AWS para sua pr√≥pria pilha Terraform.  Digitei v√°rios comandos e ... o grupo de seguran√ßa (junto com o tr√°fego recebido) desapareceu. </p><br><h2 id="terraform-velikiy">  Terraform Great </h2><br><h3 id="vosstanovlenie-iz-nepolnyh-sostoyaniy">  Recupera√ß√£o parcial </h3><br><p>  √Äs vezes, o CloudFormation n√£o pode fazer a transi√ß√£o completa de um estado para outro.  Ao mesmo tempo, ele tentar√° retornar ao anterior.  Desculpe, isso nem sempre √© vi√°vel.  A depura√ß√£o do que aconteceu √© assustadora - voc√™ nunca sabe se o CloudFormation ficar√° encantado por estar rachado - mesmo para reparo.  Mas ser√° que ele conseguir√° ou n√£o voltar ao estado anterior, ele realmente n√£o sabe como determinar e, por padr√£o, ele fica por horas esperando um milagre. </p><br><p>  O Terraform, pelo contr√°rio, est√° inclinado a se recuperar de transi√ß√µes sem √™xito com muito mais eleg√¢ncia e oferece ferramentas avan√ßadas de depura√ß√£o. </p><br><h3 id="bolee-yasnye-izmeneniya-v-sostoyaniya-dokumenta">  Altera√ß√µes mais claras no status do documento </h3><br><blockquote>  "Ok, balanceador de carga, voc√™ est√° mudando. Mas como?" <br><br>  - Um engenheiro preocupado, pronto para pressionar o bot√£o Aceitar. </blockquote><p>  √Äs vezes, preciso fazer algumas manipula√ß√µes com o balanceador de carga na pilha do CloudFormation - por exemplo, adicionar um n√∫mero de porta ou alterar um grupo de seguran√ßa.  As altera√ß√µes do CloudFormation s√£o exibidas fracamente.  Eu, como alfinetes e agulhas, checo duas vezes o arquivo yaml dez vezes para ter certeza de que n√£o apaguei tudo o que preciso e n√£o adicionei muito. </p><br><p>  Terraform √© muito mais transparente a esse respeito.  √Äs vezes, √© transparente demais (leia-se: entende).  Felizmente, a vers√£o mais recente incluiu uma exibi√ß√£o aprimorada de altera√ß√µes - agora voc√™ pode ver claramente o que est√° mudando. </p><br><h3 id="gibkost">  Flexibilidade </h3><br><blockquote>  Escreva software do contr√°rio. </blockquote><p>  Para ser franco, a caracter√≠stica distintiva mais importante do software de longa dura√ß√£o √© sua capacidade de se adaptar √†s mudan√ßas.  Escreva qualquer software do contr√°rio.  Muitas vezes, percebi que recebi um servi√ßo "simples" e comecei a colocar tudo em uma √∫nica pilha CloudFormation ou Terraform.  E √© claro, meses depois, foi revelado que eu entendi tudo errado, e o servi√ßo n√£o √© realmente simples!  E, portanto, preciso de alguma forma dividir uma pilha grande em componentes pequenos.  Quando voc√™ trabalha com o CloudFormation, √© poss√≠vel fazer isso apenas recriando primeiro a pilha existente, mas eu n√£o fa√ßo isso com meus bancos de dados.  O Terraform, por outro lado, tornou poss√≠vel dissecar a pilha e dividi-la em partes menores mais compreens√≠veis. </p><br><h3 id="moduli-v-git">  M√≥dulos no git </h3><br><p>  Compartilhar c√≥digo Terraform em v√°rias pilhas √© muito mais f√°cil do que compartilhar c√≥digo CloudFormation.  Com o Terraform, voc√™ pode colocar o c√≥digo em um reposit√≥rio git e acess√°-lo usando o controle de vers√£o sem√¢ntico.  Qualquer pessoa com acesso a este reposit√≥rio pode reutilizar o c√≥digo compartilhado.  O equivalente ao CloudFormation √© o S3, mas n√£o possui as mesmas vantagens, e n√£o h√° uma √∫nica raz√£o pela qual devemos abandonar completamente o git em favor do S3. </p><br><p>  A organiza√ß√£o cresceu e a capacidade de compartilhar pilhas compartilhadas atingiu um n√≠vel cr√≠tico.  Com o Terraform, tudo isso √© f√°cil e natural, enquanto o CloudFormation far√° voc√™ pular pelos an√©is antes de obter algo semelhante. </p><br><h3 id="operations-as-code">  Opera√ß√µes como c√≥digo </h3><br><blockquote>  "Vamos escrever e tudo bem." <br><br>  - Um engenheiro tr√™s anos antes de inventar a bicicleta Terraform. </blockquote><p>  Quando se trata de desenvolvimento de software, o Go ou um programa Java n√£o √© apenas c√≥digo. </p><br><p><img src="https://habrastorage.org/webt/qr/pf/ec/qrpfecwuy-rwjaj48w68nzl0asq.png"><br>  <em>C√≥digo como c√≥digo</em> </p><br><p>  Afinal, ainda existe a infraestrutura na qual trabalha. </p><br><p><img src="https://habrastorage.org/webt/nm/m8/9e/nmm89e9lu99otghnv73ta7bdqh8.png"><br>  <em>Infraestrutura como c√≥digo</em> </p><br><p>  Mas de onde ela √©?  Como monitorar isso?  Onde seu c√≥digo reside?  Os desenvolvedores precisam de permiss√£o para acessar? </p><br><p><img src="https://habrastorage.org/webt/hz/es/qs/hzesqsiuved-xhcccghgjoraxsi.png"><br>  <em>Opera√ß√µes como c√≥digo</em> </p><br><blockquote>  Ser desenvolvedor de software n√£o √© apenas escrever c√≥digo. </blockquote><p>  N√£o AWS One: voc√™ deve estar usando outros provedores.  SignalFx, PagerDuty ou Github.  Talvez voc√™ tenha um servidor Jenkins interno para CI / CD ou um painel de controle Grafana interno para monitoramento.  O Infra as Code √© escolhido por v√°rios motivos, e qualquer um √© igualmente importante para tudo relacionado ao software. </p><br><p>  Quando eu trabalhava na Twitch, aceleramos os servi√ßos nos sistemas embarcados mistos da Amazon e nos sistemas da AWS.  Carimbamos e suportamos muitos microsservi√ßos, aumentando os custos operacionais.  As discuss√µes foram realizadas aproximadamente na seguinte linha: </p><br><ul><li>  <strong>Eu</strong> : Droga, muitos gestos para dispersar um microsservi√ßo.  Vou precisar usar esse lixo para criar uma conta da AWS (passamos a 2 contas para <strong>microsservi√ßo</strong> ), depois essa para configurar notifica√ß√µes, essa para o reposit√≥rio de c√≥digos e esta para a lista de endere√ßos de e-mail e esta .. . </li><li>  <strong>Chumbo</strong> : Vamos fazer um script e tudo bem. </li><li>  <strong>Eu</strong> : Frets, mas o script em si vai mudar.  Voc√™ precisar√° de uma maneira de verificar se todos esses aparelhos amazon integrados est√£o atualizados. </li><li>  <strong>Chumbo</strong> : Parece bom.  E para isso, escreveremos um script. </li><li>  <strong>Eu</strong> : √ìtimo!  E o script provavelmente ainda precisar√° definir os par√¢metros.  Ele os aceitar√°? </li><li>  <strong>Chumbo</strong> : Sim, ele ir√°, para onde ele ir√°! </li><li>  <strong>Eu</strong> : o processo pode mudar, a compatibilidade com vers√µes anteriores ser√° perdida.  Ser√° necess√°rio algum controle de vers√£o sem√¢ntico. </li><li>  <strong>Chumbo</strong> : √ìtima id√©ia! </li><li>  <strong>Eu</strong> : as ferramentas podem ser alteradas manualmente, dentro da interface do usu√°rio.  Precisamos de uma maneira de verificar e corrigir isso. </li></ul><br><p>  <em>... 3 anos depois:</em> </p><br><ul><li>  <strong>Chumbo</strong> : E temos terraform. </li></ul><br><p>  A moral da f√°bula √© a seguinte: mesmo se voc√™ <strong>est√° de cabe√ßa para baixo em toda a Amazon</strong> , ainda usa algo que n√£o √© da AWS, e esses servi√ßos t√™m um estado que o idioma usa para configura√ß√£o, a fim de sincronizar esse estado. </p><br><h3 id="cloudformation-lambda-vs-git-moduli-terraform">  CloudFormation lambda vs git modules terraform </h3><br><p>  lambda √© a solu√ß√£o da CloudFormation para problemas de l√≥gica personalizada.  Com o lambda, voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">criar macros</a> ou um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recurso personalizado</a> .  Essa abordagem apresenta dificuldades adicionais que o Terraform n√£o possui no controle de vers√£o sem√¢ntica dos m√≥dulos git.  Para mim, o problema mais urgente era gerenciar permiss√µes para todos esses lambda personalizados (que s√£o dezenas de contas da AWS).  Outro ponto importante foi um problema como ‚Äúo que aconteceu antes - uma galinha ou um ovo?‚Äù: Estava associado ao c√≥digo lambda.  Essa fun√ß√£o em si √© infraestrutura e c√≥digo e precisa de monitoramento e atualiza√ß√µes.  O √∫ltimo destaque no caix√£o foi a dificuldade de atualizar semanticamente as altera√ß√µes do c√≥digo lambda;  tamb√©m era necess√°rio garantir que as a√ß√µes da pilha sem um comando direto n√£o mudassem entre as partidas. </p><br><p>  Lembro que, de alguma forma, eu queria criar uma implanta√ß√£o can√°ria para o ambiente Elastic Beanstalk com um balanceador de carga cl√°ssico.  A maneira mais f√°cil seria fazer uma segunda implanta√ß√£o do EB ao lado do ambiente de produ√ß√£o, dando outro passo: combinando o grupo de implanta√ß√£o de can√°rios escal√°vel automaticamente com o LB de implanta√ß√£o no ambiente de produ√ß√£o.  E como o Terraform usa o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">beangalk ASG como sa√≠da</a> , ser√£o necess√°rias 4 linhas de c√≥digo extras no Terraform.  Quando perguntei se havia uma solu√ß√£o compar√°vel no CloudFormation, eles me indicaram um reposit√≥rio inteiro no git com um pipeline de implanta√ß√£o e muito mais: tudo isso em prol do que as infelizes 4 linhas do c√≥digo Terraform poderiam fazer. </p><br><h3 id="on-luchshe-obnaruzhivaet-dreyf">  Ele detecta melhor a deriva </h3><br><blockquote>  Certifique-se de que a realidade atenda √†s expectativas. </blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A detec√ß√£o de deriva</a> √© uma opera√ß√£o muito poderosa como c√≥digo, porque ajuda a garantir que a realidade atenda √†s expectativas.  Est√° dispon√≠vel com CloudFormation e Terraform.  Mas, √† medida que a pilha de trabalho crescia, a busca por desvios do CloudFormation retornava cada vez mais falsos positivos. </p><br><p>  Com o Terraform, voc√™ tem ganchos de ciclo de vida muito mais avan√ßados para detec√ß√£o de deriva.  Por exemplo, voc√™ insere o comando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ignore_changes</a> diretamente na defini√ß√£o de uma tarefa do ECS se desejar ignorar altera√ß√µes na defini√ß√£o de uma tarefa espec√≠fica sem ignorar as altera√ß√µes em toda a implanta√ß√£o do ECS. </p><br><h2 id="cdk-i-buduschee-cloudformation">  CDK e o futuro do CloudFormation </h2><br><p>  √â dif√≠cil gerenciar o CloudFormation em uma escala grande de infraestrutura cruzada.  Muitas dessas dificuldades s√£o reconhecidas e a ferramenta precisa de coisas como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aws-cdk</a> , uma estrutura para definir uma infraestrutura de nuvem no c√≥digo e transmiti-la pelo AWS CloudFormation.  Ele ficar√° curioso para ver o que o aws-cdk ter√° no futuro, mas ser√° dif√≠cil para ele competir com os outros benef√≠cios do Terraform;  Para refor√ßar o CloudFormation, ser√£o necess√°rias altera√ß√µes globais. </p><br><h3 id="chtoby-terraform-ne-razocharoval">  Ent√£o Terraform n√£o decepciona </h3><br><blockquote>  Isso √© "infraestrutura como c√≥digo", n√£o "como texto". </blockquote><p>  Minha primeira impress√£o do Terraform foi muito ruim.  Eu acho que simplesmente n√£o entendi a abordagem.  Quase todos os engenheiros inicialmente o percebem involuntariamente como um formato de texto que deve ser convertido na infraestrutura desejada.  N√ÉO ASSIM. </p><br><h3 id="propisnye-istiny-horoshey-razrabotki-po-otnosyatsya-i-k-terraform">  Verdades comuns do bom desenvolvimento de software se aplicam ao Terraform </h3><br><p>  Vi quantas pr√°ticas adotadas para criar um bom c√≥digo s√£o ignoradas no Terraform.  Voc√™ estudou por anos para se tornar um bom programador.  N√£o desista dessa experi√™ncia simplesmente porque voc√™ trabalha com o Terraform.  Verdades comuns do bom desenvolvimento de software tamb√©m se aplicam ao Terraform. </p><br><h3 id="kak-uzh-kod-i-ne-zadokumentirovat">  Como o c√≥digo n√£o pode ser documentado? </h3><br><p>  Me deparei com enormes pilhas de Terraform sem nenhuma documenta√ß√£o.  Como posso escrever c√≥digo em p√°ginas - completamente sem documenta√ß√£o?  Adicione documenta√ß√£o que explique seu <strong>c√≥digo</strong> Terraform (a √™nfase aqui na palavra "c√≥digo"), por que esta se√ß√£o √© t√£o importante e o que voc√™ faz. </p><br><h3 id="kak-mozhno-razvorachivat-servisy-kotorye-nekogda-byli-odnoy-bolshoy-funkciey-main">  Como voc√™ pode implantar servi√ßos que antes eram uma grande fun√ß√£o main ()? </h3><br><p>  Conheci pilhas Terraform muito complexas, apresentadas como um √∫nico m√≥dulo.  Por que n√£o implantamos software como este?  Por que dividir fun√ß√µes grandes em fun√ß√µes menores?  As mesmas respostas se aplicam ao Terraform.  Se o seu m√≥dulo for muito grande, voc√™ precisar√° dividi-lo em m√≥dulos menores. </p><br><h3 id="razve-vasha-kompaniya-ne-polzuetsya-bibliotekami">  Sua empresa n√£o usa bibliotecas? </h3><br><p>  Vi como os engenheiros, desenvolvendo um novo projeto usando o Terraform, estupidamente copiam e colam enormes peda√ßos de outros projetos em seus pr√≥prios projetos e os escolhem at√© que comece a funcionar.  Ent√£o, voc√™ trabalha na sua empresa com o c√≥digo de "combate"?  N√≥s n√£o usamos apenas bibliotecas.  Sim, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nem tudo deve ser uma biblioteca,</a> mas onde estamos sem bibliotecas compartilhadas em princ√≠pio ?! </p><br><h3 id="razve-vy-ne-polzuetes-pep8-ili-gofmt">  Voc√™ n√£o usa PEP8 ou gofmt? </h3><br><p>  A maioria dos idiomas possui um esquema de formata√ß√£o padr√£o aceito.  No Python, esse √© o PEP8.  Em Go - gofmt.  O Terraform tem o seu: <code>terraform fmt</code> .  Use para a sa√∫de! </p><br><h3 id="vy-stanete-polzovatsya-react-ne-znaya-javascript">  Voc√™ usar√° o React sem saber o JavaScript? </h3><br><p>  Os m√≥dulos Terraform podem simplificar parte da infraestrutura complexa que voc√™ est√° criando, mas isso n√£o significa que voc√™ pode ignor√°-la.  Deseja usar o Terraform corretamente sem entender os recursos?  Voc√™ est√° condenado: o tempo passar√°, mas voc√™ n√£o dominar√° o Terraform. </p><br><h3 id="vy-kodite-singltonami-ili-vnedryaya-zavisimosti">  Voc√™ codifica singletones ou apresenta depend√™ncias? </h3><br><p>  A inje√ß√£o de depend√™ncia √© a melhor pr√°tica reconhecida para o desenvolvimento de software, preferida por singletones.  Como isso √© √∫til no Terraform?  Eu conheci os m√≥dulos Terraform, dependendo de um estado remoto.  Em vez de escrever m√≥dulos extra√≠dos de um estado remoto, escreva um m√≥dulo que aceite par√¢metros.  E depois passe esses par√¢metros para o m√≥dulo. </p><br><h3 id="vashi-biblioteki-delayut-desyat-veschey-horosho-ili-odnu---otlichno">  Suas bibliotecas fazem dez coisas bem ou uma coisa √≥tima? </h3><br><p>  Bibliotecas que se concentram em uma √∫nica tarefa que executa bem funcionam melhor.  Em vez de escrever grandes m√≥dulos Terraform que tentam fazer tudo de uma vez, fa√ßa partes deles que fazem uma coisa bem.  E depois combine-os da maneira que desejar. </p><br><h3 id="kak-vy-proizvodite-izmeneniya-v-bibliotekah-bez-obratnoy-sovmestimosti">  Como voc√™ faz altera√ß√µes nas bibliotecas sem compatibilidade com vers√µes anteriores? </h3><br><p>  O m√≥dulo Terraform geral, como uma biblioteca comum, precisa de alguma forma informar os usu√°rios sobre altera√ß√µes sem compatibilidade com vers√µes anteriores.  Quando tais altera√ß√µes ocorrem nas bibliotecas, √© irritante e igualmente irritante quando s√£o feitas altera√ß√µes sem compatibilidade com vers√µes anteriores nos m√≥dulos Terraform.  Recomenda-se o uso de tags git e semver ao usar os m√≥dulos Terraform. </p><br><h3 id="proizvodstvennyy-servis-zapuschen-u-vas-na-noutbuke-ili-v-datacentre">  O servi√ßo de produ√ß√£o foi lan√ßado no seu laptop ou em um data center? </h3><br><p>  A Hashicorp possui ferramentas como a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">terraform cloud</a> para iniciar sua terraform.  Esses servi√ßos centralizados facilitam o gerenciamento, a auditoria e a aprova√ß√£o de altera√ß√µes no terraform. </p><br><h3 id="razve-vy-ne-pishete-testy">  Voc√™ n√£o escreve testes? </h3><br><p>  Os engenheiros admitem que o c√≥digo precisa ser testado, mas eles pr√≥prios costumam usar verifica√ß√µes ao trabalhar com o Terraform.  Para infraestrutura, isso √© repleto de momentos insidiosos.  Aconselho que voc√™ "teste" ou "crie exemplos" de pilhas usando m√≥dulos que podem ser implantados corretamente para verifica√ß√£o durante o IC / CD. </p><br><h3 id="terraform-i-mikroservisy">  Terraform e microsservi√ßos </h3><br><blockquote>  A vida e a morte das empresas de microsservi√ßo dependem da velocidade, atualiza√ß√£o e destrui√ß√£o de novas pilhas de trabalho de microsservi√ßo. </blockquote><p>  O ponto negativo mais comum relacionado √†s arquiteturas de microsservi√ßo e que n√£o pode ser eliminado de forma alguma est√° relacionado ao trabalho, e n√£o ao c√≥digo.  Se voc√™ usar o Terraform, apenas como uma maneira de automatizar apenas o lado da infraestrutura da arquitetura de microsservi√ßos, estar√° se privando das verdadeiras vantagens deste sistema.  Agora <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tudo √© como c√≥digo</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt474546/">https://habr.com/ru/post/pt474546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt474532/index.html">Laborat√≥rio de r√°dio Nizhny Novgorod e r√°dios com detectores de cristal</a></li>
<li><a href="../pt474534/index.html">Livro de Alan Turing e Nota Misteriosa - Detetive Cient√≠fico</a></li>
<li><a href="../pt474536/index.html">A hist√≥ria de um pequeno projeto de doze anos (sobre o BIRMA.NET pela primeira vez e honestamente em primeira m√£o)</a></li>
<li><a href="../pt474540/index.html">Como criar chefes legais. Experi√™ncia do desenvolvedor Shadow Fight 3</a></li>
<li><a href="../pt474544/index.html">An√°lise do GeForce NOW na R√∫ssia: pr√≥s, contras e perspectivas</a></li>
<li><a href="../pt474548/index.html">O Google BERT √© um novo algoritmo de pesquisa. Como a classifica√ß√£o mudar√° e o que fazer agora?</a></li>
<li><a href="../pt474550/index.html">Como retornar o indicador TLS verde no novo Firefox 70?</a></li>
<li><a href="../pt474554/index.html">Intel Tremont - Nova microarquitetura para efici√™ncia energ√©tica</a></li>
<li><a href="../pt474556/index.html">Como fazer o suporte PCRE2 para o Apache 2.4</a></li>
<li><a href="../pt474558/index.html">Programa√ß√£o Orientada a Protocolo, Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>