<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👈 🙇🏾 ♎️ Java Challengers # 2: comparaison de chaînes 🏈 🈹 🍁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Java Challengers # 2: comparaison de chaînes 


 Comme toujours, nous avons beaucoup de retard pour le début du cours, donc hier a eu lieu une deuxièm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java Challengers # 2: comparaison de chaînes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/428449/"><h1 id="java-challengers-2-sravnenie-strok">  Java Challengers # 2: comparaison de chaînes </h1><br><p>  <em>Comme toujours, nous avons beaucoup de retard pour le début du cours, donc hier a eu lieu une deuxième leçon parmi le nouveau thread <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Java Developer"</a> .</em>  <em>Mais il en est ainsi, petites choses dans la vie, mais pour l'instant nous continuons à publier une série d'articles sur Java Challengers, dont la traduction a été préparée pour vous.</em> </p><br><p> En Java, la classe <code>String</code> encapsule un tableau de caractères ( <em>note du traducteur - avec java 9, il s'agit déjà d'un tableau d' <code>byte</code> , voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chaînes compactes en Java 9</a></em> ).  En termes simples, <code>String</code> est un tableau de caractères utilisé pour composer des mots, des phrases ou d'autres constructions. </p><br><p>  <strong>L'encapsulation</strong> est l'un des concepts les plus puissants de la programmation orientée objet.  Grâce à l'encapsulation, vous n'avez pas besoin de savoir comment fonctionne la classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>String</code></a> .  Il vous suffit de connaître les méthodes de son interface. </p><br><p><img src="https://habrastorage.org/webt/9y/nz/bu/9ynzbuynkgesfwcmvuapp9ah5ci.png"><a name="habracut"></a></p><br><p>  Lorsque vous regardez la classe <code>String</code> en Java, vous pouvez voir comment le tableau <code>char</code> est encapsulé: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">String</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value[])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>(value, <span class="hljs-number"><span class="hljs-number">0</span></span>, value.length, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); }</code> </pre> <br><p>  Pour mieux comprendre l'encapsulation, imaginez un objet physique: une machine.  Avez-vous besoin de savoir comment fonctionne une voiture sous le capot pour la conduire?  Bien sûr que non, mais vous devez savoir ce que font les interfaces de la voiture: la pédale d'accélérateur, les freins et le volant.  Chacune de ces interfaces prend en charge certaines actions: accélération, freinage, tourner à gauche, tourner à droite.  La même chose est vraie dans la programmation orientée objet. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le premier article</a> de la série Java Challengers portait sur la surcharge de méthode, qui est largement utilisée dans la classe <code>String</code> .  La surcharge peut rendre vos cours vraiment flexibles: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">String</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String original)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">String</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value[], </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offset, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">String</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] codePoints, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offset, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">String</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bytes[], </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offset, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> length, String charsetName)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-comment"><span class="hljs-comment">//    ...</span></span></code> </pre> <br><p>  Au lieu d'essayer de comprendre le fonctionnement de la classe <code>String</code> , cet article vous aidera à comprendre <em>ce</em> qu'elle fait et <em>comment l'</em> utiliser dans votre code. </p><br><h2 id="chto-takoe-pul-strok-string-pool">  Qu'est-ce qu'un pool de chaînes? </h2><br><p>  La classe <code>String</code> est sans doute la classe la plus couramment utilisée en Java.  Si nous créons un nouvel objet dans la mémoire dynamique (tas de mémoire) à chaque fois que nous utilisons <code>String</code> , alors nous gaspillerons beaucoup de mémoire.  Le pool de chaînes résout ce problème en stockant un seul objet pour chaque valeur de ligne. </p><br><p><img src="https://habrastorage.org/webt/kx/zv/kb/kxzvkbdaf7imr8yq5dj6bj048lu.jpeg" alt="strings-in-the-string-pool"></p><br><p>  <em>Lignes dans un pool de lignes</em> </p><br><p>  Bien que nous ayons créé plusieurs variables <code>String</code> avec les valeurs <code>Duke</code> et <code>Juggy</code> , seuls deux objets sont créés et stockés dans la mémoire dynamique (tas).  Voir l'exemple de code suivant pour la preuve.  (Rappelez-vous qu'en Java, l'opérateur " <code>==</code> " est utilisé pour comparer deux objets et déterminer si le même objet est le même ou non.) </p><br><pre> <code class="java hljs">String juggy = <span class="hljs-string"><span class="hljs-string">"Juggy"</span></span>; String anotherJuggy = <span class="hljs-string"><span class="hljs-string">"Juggy"</span></span>; System.out.println(juggy == anotherJuggy);</code> </pre> <br><p>  Ce code renverra <code>true</code> car les deux variables <code>String</code> pointent vers le même objet dans le pool de chaînes.  Leurs significations sont les mêmes. </p><br><h2 id="isklyuchenie----operator-new">  L'exception est le <code>new</code> opérateur. </h2><br><p>  Regardez maintenant ce code - il ressemble à l'exemple précédent, mais il y a une différence. </p><br><pre> <code class="plaintext hljs">String duke = new String("duke"); String anotherDuke = new String("duke"); System.out.println(duke == anotherDuke);</code> </pre> <br><p>  Sur la base de l'exemple précédent, vous pourriez penser que ce code retournera <code>true</code> , mais ce n'est pas le cas.  L'ajout d'un <code>new</code> opérateur crée un nouvel objet <code>String</code> en mémoire.  Ainsi, la JVM créera deux objets différents. </p><br><blockquote>  <strong>Méthodes natives</strong> <br><br>  Les méthodes natives en Java sont des méthodes qui seront compilées à l'aide du langage C, généralement dans le but de gérer la mémoire et d'optimiser les performances. </blockquote><br><h2 id="puly-strok-i-metod-intern">  Pools de chaînes et méthode <code>intern()</code> </h2><br><p>  Pour stocker des chaînes dans un pool, une méthode appelée internalisation des chaînes est utilisée. </p><br><p>  Voici ce que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Javadoc</a> nous dit sur la méthode <code>intern()</code> : </p><br><pre> <code class="java hljs"> <span class="hljs-comment"><span class="hljs-comment">/** *      . * *   ( )   {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> String}. * *    intern,     , *    {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> String},   *  {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> #equals(Object)},     . * ,   {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> String}   *        {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> String}. * *   ,      {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> s}  {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> t}, * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> s.intern() == t.intern()}  {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> true} *    ,  {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> s.equals(t)}  {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> true}. * *       . *      3.10.5 The Java&amp;trade; Language Specification. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@returns</span></span></span><span class="hljs-comment"> ,         , * , ,       . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@jls</span></span></span><span class="hljs-comment"> 3.10.5 String Literals */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intern</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre> <br><p>  La méthode <code>intern()</code> est utilisée pour stocker des chaînes dans un pool de chaînes.  Tout d'abord, il vérifie si une ligne déjà créée existe dans le pool.  Sinon, il crée une nouvelle ligne dans le pool.  La logique du pool de lignes est basée sur le modèle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flyweight</a> . </p><br><p>  Maintenant, remarquez ce qui se passe lorsque nous utilisons <code>new</code> pour créer deux lignes: </p><br><pre> <code class="java hljs">String duke = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"duke"</span></span>); String duke2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"duke"</span></span>); System.out.println(duke == duke2); <span class="hljs-comment"><span class="hljs-comment">//    false System.out.println(duke.intern() == duke2.intern()); //    true</span></span></code> </pre> <br><p>  Contrairement à l'exemple précédent avec le <code>new</code> mot-clé, dans ce cas, la comparaison retournera <code>true</code> .  En effet, l'utilisation de la méthode <code>intern()</code> garantit que la chaîne se trouve dans le pool. </p><br><h2 id="metod-equals-v-klasse-string">  Méthode <code>equals</code> dans la classe <code>String</code> </h2><br><p>  La méthode <code>equals()</code> est utilisée pour vérifier si deux classes sont identiques ou non.  Puisque <code>equals()</code> se trouve dans la classe <code>Object</code> , chaque classe Java en hérite.  Mais la méthode <code>equals()</code> doit être remplacée pour qu'elle fonctionne correctement.  Bien sûr, <code>String</code> remplace <code>equals()</code> . </p><br><p>  Jetez un oeil: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object anObject)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == anObject) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (anObject <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> String) { String aString = (String)anObject; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (coder() == aString.coder()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isLatin1() ? StringLatin1.equals(value, aString.value) : StringUTF16.equals(value, aString.value); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre> <br><p>  Comme vous pouvez le voir, la valeur de la classe <code>String</code> est comparée via <code>equals()</code> et non via une référence d'objet.  Peu importe que les références aux objets soient différentes;  les conditions seront comparées. </p><br><h2 id="naibolee-rasprostranennye-metody-string">  Méthodes de <code>String</code> courantes </h2><br><p>  Il y a encore une chose que vous devez savoir avant de résoudre le problème de comparaison de chaînes. </p><br><p>  Considérez les méthodes les plus courantes de la classe <code>String</code> : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//         trim() //     substring(int beginIndex, int endIndex) //    length() //  ,     replaceAll(String regex, String replacement) // ,     CharSequence   contains(CharSequences)</span></span></code> </pre> <br><h2 id="reshite-zadachku-na-sravnenie-strok">  Résoudre le problème de comparaison de chaînes </h2><br><p>  Vérifions ce que vous avez appris sur la classe <code>String</code> en résolvant un petit casse-tête. </p><br><p>  Dans cette tâche, vous comparez plusieurs lignes à l'aide des concepts que vous avez appris.  En regardant le code ci-dessous, pouvez-vous déterminer la valeur de chaque <code>result</code> variable? </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ComparisonStringChallenge</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String... doYourBest)</span></span></span><span class="hljs-function"> </span></span>{ String result = <span class="hljs-string"><span class="hljs-string">""</span></span>; result += <span class="hljs-string"><span class="hljs-string">" powerfulCode "</span></span>.trim() == <span class="hljs-string"><span class="hljs-string">"powerfulCode"</span></span> ? <span class="hljs-string"><span class="hljs-string">"0"</span></span> : <span class="hljs-string"><span class="hljs-string">"1"</span></span>; result += <span class="hljs-string"><span class="hljs-string">"flexibleCode"</span></span> == <span class="hljs-string"><span class="hljs-string">"flexibleCode"</span></span> ? <span class="hljs-string"><span class="hljs-string">"2"</span></span> : <span class="hljs-string"><span class="hljs-string">"3"</span></span>; result += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"doYourBest"</span></span>) == <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"doYourBest"</span></span>) ? <span class="hljs-string"><span class="hljs-string">"4"</span></span> : <span class="hljs-string"><span class="hljs-string">"5"</span></span>; result += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"noBugsProject"</span></span>) .equals(<span class="hljs-string"><span class="hljs-string">"noBugsProject"</span></span>) ? <span class="hljs-string"><span class="hljs-string">"6"</span></span> : <span class="hljs-string"><span class="hljs-string">"7"</span></span>; result += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"breakYourLimits"</span></span>).intern() == <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"breakYourLimits"</span></span>).intern() ? <span class="hljs-string"><span class="hljs-string">"8"</span></span> : <span class="hljs-string"><span class="hljs-string">"9"</span></span>; System.out.println(result); } }</code> </pre> <br><p>  Quelle sera la conclusion? </p><br><ul><li>  A: 02468 </li><li>  B: 12469 </li><li>  C: 12579 </li><li>  D: 12568 </li></ul><br><p>  La bonne réponse est donnée à la fin de l'article. </p><br><h2 id="chto-seychas-proizoshlo-ponimanie-povedeniya-string">  Que s'est-il passé maintenant?  Comprendre le comportement des <code>String</code> </h2><br><p>  Dans la première ligne, nous voyons: </p><br><pre> <code class="java hljs">result += <span class="hljs-string"><span class="hljs-string">" powerfulCode "</span></span>.trim() == <span class="hljs-string"><span class="hljs-string">"powerfulCode"</span></span> ? <span class="hljs-string"><span class="hljs-string">"0"</span></span> : <span class="hljs-string"><span class="hljs-string">"1"</span></span>;</code> </pre> <br><p>  Dans ce cas, le résultat est <code>false</code> , car lorsque la méthode <code>trim()</code> supprime des espaces, elle crée une nouvelle <code>String</code> à l'aide du <code>new</code> opérateur. </p><br><p>  Ensuite, nous voyons: </p><br><pre> <code class="java hljs">result += <span class="hljs-string"><span class="hljs-string">"flexibleCode"</span></span> == <span class="hljs-string"><span class="hljs-string">"flexibleCode"</span></span> ? <span class="hljs-string"><span class="hljs-string">"2"</span></span> : <span class="hljs-string"><span class="hljs-string">"3"</span></span>;</code> </pre> <br><p>  Il n'y a pas de secret ici, les lignes sont les mêmes dans le pool de lignes.  Cette comparaison renvoie <code>true</code> . </p><br><p>  Ensuite, nous avons: </p><br><pre> <code class="java hljs">result += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"doYourBest"</span></span>) == <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"doYourBest"</span></span>) ? <span class="hljs-string"><span class="hljs-string">"4"</span></span> : <span class="hljs-string"><span class="hljs-string">"5"</span></span>;</code> </pre> <br><p>  L'utilisation de <code>new</code> conduit à la création de deux nouvelles lignes et peu importe que leurs valeurs soient égales ou non.  Dans ce cas, la comparaison sera <code>false</code> même si les valeurs sont les mêmes. </p><br><p>  Suivant: </p><br><pre> <code class="java hljs">result += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"noBugsProject"</span></span>) .equals(<span class="hljs-string"><span class="hljs-string">"noBugsProject"</span></span>) ? <span class="hljs-string"><span class="hljs-string">"6"</span></span> : <span class="hljs-string"><span class="hljs-string">"7"</span></span>;</code> </pre> <br><p>  Puisque nous avons utilisé la méthode <code>equals()</code> , la valeur de la chaîne sera comparée, pas l'instance de l'objet. </p><br><p>  Dans ce cas, peu importe qu'il s'agisse d'objets différents ou non, car la valeur est comparée.  Le résultat est <code>true</code> . </p><br><p>  Enfin, nous avons: </p><br><pre> <code class="java hljs">result += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"breakYourLimits"</span></span>).intern() == <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(<span class="hljs-string"><span class="hljs-string">"breakYourLimits"</span></span>).intern() ? <span class="hljs-string"><span class="hljs-string">"8"</span></span> : <span class="hljs-string"><span class="hljs-string">"9"</span></span>;</code> </pre> <br><p>  Comme vous l'avez vu précédemment, la méthode <code>intern()</code> place une chaîne dans un pool de chaînes.  Les deux lignes pointent vers le même objet, donc dans ce cas <code>true</code> . </p><br><h2 id="rasprostranennye-oshibki-so-strokami">  Erreurs de chaîne courantes </h2><br><p>  Il peut être difficile de déterminer si deux lignes pointent vers le même objet ou non, surtout lorsque les lignes contiennent la même valeur.  Il est utile de se rappeler que l'utilisation de <code>new</code> conduit toujours à la création d'un nouvel objet en mémoire, même si les valeurs de chaîne sont les mêmes. </p><br><p>  L'utilisation de méthodes <code>String</code> pour comparer les références d'objets peut également être délicate.  La particularité est que si la méthode change quelque chose dans la ligne, alors il y aura différentes références aux objets. </p><br><p>  Quelques exemples pour clarifier: </p><br><pre> <code class="java hljs">System.out.println(<span class="hljs-string"><span class="hljs-string">"duke"</span></span>.trim() == <span class="hljs-string"><span class="hljs-string">"duke"</span></span>.trim());</code> </pre> <br><p>  Cette comparaison sera vraie car la méthode <code>trim()</code> ne crée pas de nouvelle ligne. </p><br><pre> <code class="java hljs">System.out.println(<span class="hljs-string"><span class="hljs-string">" duke"</span></span>.trim() == <span class="hljs-string"><span class="hljs-string">"duke"</span></span>.trim());</code> </pre> <br><p>  Dans ce cas, la première méthode <code>trim()</code> génère une nouvelle ligne, car la méthode fera son travail et donc les liens seront différents. </p><br><p>  Enfin, lorsque <code>trim()</code> fait son travail, il crée une nouvelle ligne: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   trim   String new String(Arrays.copyOfRange(val, index, index + len), LATIN1);</span></span></code> </pre> <br><h2 id="chto-nuzhno-pomnit-o-strokah">  À retenir des cordes </h2><br><ul><li><p>  Les lignes ne sont pas modifiables, leur état ne peut donc pas être modifié. </p><br></li><li><p>  Pour économiser de la mémoire, la JVM stocke les chaînes dans un pool de chaînes.  Lors de la création d'une nouvelle ligne, la JVM vérifie sa valeur et pointe vers un objet existant.  Si le pool n'a pas de ligne avec cette valeur, la machine virtuelle Java crée une nouvelle ligne. </p><br></li><li><p>  L'opérateur " <code>==</code> " compare les références d'objets.  La méthode <code>equals()</code> compare les valeurs de chaîne.  La même règle s'appliquera à tous les objets. </p><br></li><li><p>  Lorsque vous utilisez le <code>new</code> opérateur, une nouvelle ligne sera créée dans le tas (Note du traducteur - il est écrit dans l'original qu'il se trouve dans le pool, mais ce n'est pas le cas, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">merci</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">zagayevskiy</a> ), même s'il existe une ligne avec la même valeur. </p><br></li></ul><br><h2 id="otvet">  La réponse </h2><br><p>  La réponse à ce problème est D. La conclusion sera 12568. </p><br><p>  <em>À suivre ...</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428449/">https://habr.com/ru/post/fr428449/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428439/index.html">Sans ensemble</a></li>
<li><a href="../fr428441/index.html">Achat GitHub terminé. Que se passera-t-il ensuite?</a></li>
<li><a href="../fr428443/index.html">Réconciliation - vérification de l'intégrité des données dans les systèmes distribués</a></li>
<li><a href="../fr428445/index.html">Comment nous avons fait un hackathon à Helsinki et perdu</a></li>
<li><a href="../fr428447/index.html">Cloud Data Protection: A Guide for Developers</a></li>
<li><a href="../fr428451/index.html">KubeDirector est un moyen facile d'exécuter des applications complexes avec état dans Kubernetes</a></li>
<li><a href="../fr428453/index.html">Comment les programmeurs ont sauvé leur patrie</a></li>
<li><a href="../fr428457/index.html">Contournement des labels: SoundCloud a lancé des accords directs avec des musiciens - conditions critiquées</a></li>
<li><a href="../fr428461/index.html">Construire un réseau VPN distribué basé sur Check Point. Plusieurs scénarios courants</a></li>
<li><a href="../fr428465/index.html">Guide d'analyse d'impact sur l'entreprise</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>