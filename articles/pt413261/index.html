<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèØ üóûÔ∏è üéüÔ∏è Como a pesquisa funciona üîï ‚úåüèæ ‚úçüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√°, nome de usu√°rio! Todos os dias nos deparamos com uma pesquisa por v√°rios dados. Quase todos os sites com muita informa√ß√£o agora t√™m uma pesquisa....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como a pesquisa funciona</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/413261/">  Ol√°, nome de usu√°rio!  Todos os dias nos deparamos com uma pesquisa por v√°rios dados.  Quase todos os sites com muita informa√ß√£o agora t√™m uma pesquisa.  A pesquisa est√° em computadores dom√©sticos, em telefones celulares, em v√°rios tipos de software.  Obviamente, se voc√™ perguntar a qualquer desenvolvedor sobre a pesquisa em termos de tecnologia, pesquisa el√°stica, lucene ou esfinge ser√° lembrada imediatamente.  Hoje, quero olhar para voc√™ "sob o cap√¥" de uma pesquisa de texto completo e descobrir uma primeira aproxima√ß√£o de como funciona, usando o exemplo de hh.ru. <br><br><img src="https://habrastorage.org/webt/pn/cf/l7/pncfl7qsqbg5otgxyayrynymija.png" alt="imagem"><br><a name="habracut"></a><br>  <i>Isen√ß√£o de responsabilidade: este artigo n√£o √© o √∫nico ponto de vista verdadeiro e serve apenas como um ponto introdut√≥rio para uma familiariza√ß√£o inicial com o trabalho de pesquisa de texto e algumas op√ß√µes para implementar suas partes individuais.</i> <br><br>  Se voc√™ observar os detalhes da pesquisa, al√©m da parte √≥bvia na forma de uma sequ√™ncia de pesquisa, poder√° ver muito mais: <br><br><ul><li>  dica (ela sugere) </li><li>  contador de resultados de pesquisa (contador), </li><li>  v√°rios tipos de classifica√ß√£o (classifica√ß√£o), </li><li>  facetas - caracter√≠sticas agrupadas dos documentos, por exemplo, o metr√¥ em que a vaga est√° localizada, desempenhando tamb√©m a fun√ß√£o de filtros (filtros), </li><li>  sin√≥nimos </li><li>  pagina√ß√£o </li><li> snippet (snippet) - uma pequena descri√ß√£o do documento na emiss√£o, </li><li>  etc. </li></ul><br><img src="https://habrastorage.org/webt/bl/hy/so/blhyso9n80pgxke6lh-rggoft74.jpeg" alt="imagem"><br><br>  E tudo isso serve a um prop√≥sito - satisfazer a necessidade do usu√°rio de encontrar as informa√ß√µes corretas o mais r√°pido e relevante poss√≠vel.  Por exemplo, a filtragem √© importante para restringir os resultados da pesquisa; no nosso caso, pode ser um filtro por experi√™ncia, local ou emprego do candidato.  As facetas s√£o √∫teis para exibir quantas vagas existem em cada faixa salarial.  Tamb√©m √© importante complementar as consultas e os documentos com sin√¥nimos para que, a pedido do "desenvolvedor java", eles possam encontrar documentos "desenvolvedor java". <br><br>  Al√©m da pesquisa em si, sempre existem muitos componentes que facilitam a vida do usu√°rio: um tutor respons√°vel por corrigir erros ou um sajest que solicita consultas mais adequadas quando voc√™ interage com a barra de pesquisa.  Em alguns casos, √© importante poder reformular a solicita√ß√£o.  Por exemplo, mova uma parte da solicita√ß√£o para filtros: da solicita√ß√£o "Moscow programmer" Moscou pode ser removida para o filtro por cidade. <br><br><h3>  1. B√°sico </h3><br>  Agora ao ponto.  A pesquisa em si √© dividida em dois grandes est√°gios: <br><br><ul><li>  indexa√ß√£o (processamento de documentos e disposi√ß√£o de acordo com estruturas de √≠ndice especiais, para que voc√™ possa executar rapidamente a pr√≥pria pesquisa), </li><li>  pesquisa (aplica√ß√£o de filtros, pesquisa booleana, classifica√ß√£o etc.). </li></ul><br><h3>  1.1  Indexa√ß√£o </h3><br>  Uma ligeira digress√£o l√≠rica.  Al√©m disso, apresentarei o conceito de termo - como √© habitual chamar a unidade m√≠nima de indexa√ß√£o e consulta.  Esta √© a mesma unidade que ser√° armazenada no dicion√°rio de √≠ndice.  Pode ser uma palavra reduzida √† sua forma normal de palavra ou base, n√∫mero, email, letra n-gramas ou qualquer outra coisa.  Normalmente, um termo inclui um campo no qual √© indexado ou no qual uma pesquisa √© realizada. <br><br>  Primeiro, voc√™ precisa transformar os documentos de entrada em um conjunto de termos e filtrar as palavras de parada.  Elas podem ser como palavras que ocorrem com frequ√™ncia - preposi√ß√µes, conjun√ß√µes, interjei√ß√µes e outras coisas, por exemplo, caracteres especiais que n√£o queremos pesquisar.  Para que a pesquisa funcione com diferentes formas de palavras, durante o processo de indexa√ß√£o, geralmente trazemos todas as palavras para algum estado b√°sico.  Geralmente, um dos dois procedimentos √© usado: deriva√ß√£o - o processo de isolar a base de uma palavra (desenvolvimento-&gt; desenvolvimento) ou lematiza√ß√£o - o processo de trazer uma palavra √† forma normal (habilidades-&gt; habilidade). <br><br><h3>  1.2 Estruturas de √çndice </h3><br>  A maneira mais popular de representar um √≠ndice √© um √≠ndice invertido.  De fato, essa √© uma esp√©cie de tabela de hash, em que a chave √© um termo e o valor √© uma lista de documentos (geralmente uma lista de identifica√ß√£o de documento chamada lista de lan√ßamentos) na qual esse termo est√° presente.  Normalmente, um √≠ndice invertido consiste em duas partes - um dicion√°rio (dicion√°rio de termos) e listas de documentos para cada termo (lista de postagem): <br><br><img src="https://habrastorage.org/webt/k1/zf/te/k1zftetx905m-wguaytcovdbx-i.png" alt="imagem"><br><br>  Al√©m disso, o √≠ndice pode conter informa√ß√µes sobre as posi√ß√µes dos termos no documento (√≠ndice de posi√ß√£o), o que ser√° √∫til ao procurar termos a uma certa dist√¢ncia, em particular com consultas frasais, sobre a frequ√™ncia dos termos, o que ajudar√° na classifica√ß√£o e constru√ß√£o de um plano de consulta.  Mas mais sobre isso abaixo. <br><br><h3>  1.2.1 Dicion√°rio de termos </h3><br>  O dicion√°rio armazena todos os termos existentes no √≠ndice e foi projetado para encontrar rapidamente links para uma lista de documentos.  Existem v√°rias op√ß√µes para armazenar um dicion√°rio: <br><br><ul><li>  Uma tabela de hash, em que o termo √© a chave e o valor √© um link para uma lista de documentos desse termo. </li><li>  Uma lista ordenada pela qual voc√™ pode pesquisar por pesquisa bin√°ria. </li><li>  √Årvore de prefixos (trie). </li></ul><br>  A melhor maneira √© a √∫ltima op√ß√£o, porque  Tem v√°rias vantagens.  Primeiro, em um grande n√∫mero de termos, a √°rvore de prefixos ocupar√° muito menos mem√≥ria, porque as partes repetidas dos prefixos ser√£o armazenadas apenas uma vez.  Em segundo lugar, imediatamente temos a oportunidade de fazer solicita√ß√µes de prefixo.  E em terceiro lugar, essa √°rvore pode ser compactada combinando partes n√£o ramificadas. <br><br><img src="https://habrastorage.org/webt/lx/zn/1z/lxzn1zanyrwmc_cxbwvl6qv3bie.png" alt="imagem"><br><br>  Obviamente, uma √°rvore de prefixos pode n√£o ser a √∫nica estrutura para armazenar termos em um √≠ndice.  Por exemplo, uma √°rvore de sufixos tamb√©m pode estar pr√≥xima, o que, por sua vez, ser√° mais ideal para consultas com curingas (consultas no formato po * sql). <br><br><h3>  1.2.2 Lista de lan√ßamentos </h3><br>  A lista de documentos √© uma lista ordenada de identificadores de documentos, que permite que algumas otimiza√ß√µes sejam feitas com ele.  Normalmente, ele armazena em si n√£o apenas uma lista de documentos em que o termo ocorre, mas tamb√©m as posi√ß√µes (lan√ßamentos) em que ocorre.  Isso resolve v√°rios problemas ao mesmo tempo: sabemos imediatamente quantas vezes uma palavra ocorre em um documento, podemos fazer frases e consultas com uma certa dist√¢ncia entre termos, cruzando v√°rias listas de documentos de uma s√≥ vez e observando as posi√ß√µes dos termos. <br><br><img src="https://habrastorage.org/webt/7-/1v/lv/7-1vlvh3ycm7xm6kxlcu-stygos.png" alt="imagem"><br><br>  Por exemplo, nesta lista pelo termo <b>scala</b> no sexto documento do <b>t√≠tulo, a</b> palavra ocorre 4 vezes, nas posi√ß√µes 2, 15, 18 e 25. <br><br><h3>  1.2.3 Documentos com v√°rios campos </h3><br>  A maior parte do documento consiste em v√°rios campos, pelo menos no nome do documento e seu corpo.  Isso ajuda na pesquisa de partes individuais do documento e quando o termo √© significativo na classifica√ß√£o (por exemplo, o termo que ocorre no t√≠tulo pode ser considerado mais significativo). <br><br>  Al√©m disso, no √≠ndice, geralmente n√£o apenas os campos de texto s√£o armazenados, mas tamb√©m podem ser armazenados sinais de documentos, alguns valores num√©ricos etc. O armazenamento no √≠ndice geralmente assume a forma de {field-term}. <br><br><img src="https://habrastorage.org/webt/hk/zt/kq/hkztkq81x0tcc_twzuj_93qha34.png" alt="imagem"><br><br>  Por exemplo, se voc√™ tirar uma vaga, ela ter√° v√°rios campos ao mesmo tempo: nome, descri√ß√£o, empresa, folha de pagamento, cidade e a experi√™ncia necess√°ria.  Isso √© necess√°rio para que o usu√°rio possa pesquisar convenientemente n√£o apenas o nome e o texto da empresa, mas tamb√©m possa filtrar por sal√°rio e experi√™ncia, ver quantas vagas existem na cidade e nas cidades vizinhas ou at√© procurar vagas para uma determinada empresa. <br><br><h3>  1.3 Compacta√ß√£o e otimiza√ß√£o de √≠ndice </h3><br>  A velocidade do trabalho √© importante para a pesquisa; portanto, a maioria das opera√ß√µes de pesquisa de √≠ndice geralmente √© realizada na RAM.  Para fazer isso, √© muito importante aplicar uma s√©rie de otimiza√ß√µes ao √≠ndice, que o ajustar√° a um tamanho de mem√≥ria limitado.  Al√©m disso, geralmente s√£o aplicadas v√°rias otimiza√ß√µes, que permitem que voc√™ mova o √≠ndice a uma velocidade mais alta ao pesquisar, ignorando partes desnecess√°rias. <br><br><h3>  1.3.1 Compress√£o Delta </h3><br>  Como lembramos que a lista de documentos por termo (tamb√©m conhecida como lista de postagens) est√° ordenada, a primeira id√©ia de como compact√°-la √© fazer uma lista com os deslocamentos de identifica√ß√£o dos documentos em vez da lista com documentos de identifica√ß√£o.  Em uma lista espec√≠fica de 6 identificadores, ser√° assim: <br><br><img src="https://habrastorage.org/webt/xo/oe/ww/xooewwppo3g9vpm8wj3wxnmudyw.png" alt="imagem"><br><br>  Assim, percorrendo a lista, sempre calcularemos o identificador atual a partir do valor anterior obtido.  Por exemplo, ao segundo deslocamento 3, adicionamos o primeiro valor 2 e obtemos o id 5, ao terceiro 4 adicionamos 5 e obtemos 9 e assim por diante.  Com um grande n√∫mero de documentos, isso funciona muito bem, especialmente em conjunto com outro m√©todo de compacta√ß√£o - grava√ß√£o de n√∫meros de formato vari√°vel. <br><br><h3>  1.3.2 VarByte e VarInt </h3><br>  Essa √© uma maneira de armazenar cada item da lista individual na mem√≥ria, de modo a ocupar a quantidade m√≠nima de espa√ßo.  Por exemplo, se os tr√™s primeiros deslocamentos caberem em apenas 1 byte, n√£o ser√° necess√°rio mais.  Considerando que nossa lista n√£o cont√©m documentos de identifica√ß√£o, mas deltas, a compacta√ß√£o ser√° muito eficaz.  Nesta representa√ß√£o de n√∫meros, o primeiro bit de cada byte √© o sinalizador se a representa√ß√£o do n√∫mero atual termina nesse byte. <br><br><img src="https://habrastorage.org/webt/xv/xq/xy/xvxqxy_wswvxsehxyy3heca4csg.png" alt="imagem"><br><br>  Se o primeiro bit do byte 0 for o √∫ltimo byte do n√∫mero, se 1 n√£o for. <br><br><h3>  1.3.3 Pular lista / pular tabela </h3><br>  Uma lista de ignorados √© uma das estruturas para mover rapidamente uma lista de documentos de um determinado termo, ignorando uma parte desnecess√°ria da lista.  A id√©ia √© armazenar links para elementos distantes da lista no disco em frente √† pr√≥pria lista, porque ap√≥s a compacta√ß√£o n√£o podemos dizer onde exatamente o documento 100 ou 200 estar√° localizado.  Por exemplo, isso √© conveniente quando h√° uma consulta de dois termos, onde um termo ser√° encontrado com frequ√™ncia e o segundo, pelo contr√°rio, ser√° raro, e a lista de documentos come√ßar√° apenas com o 200¬∫ ID do documento.  Ent√£o, se houver uma lista com passes para a primeira lista, podemos economizar tempo em mover e pular imediatamente o bloco desnecess√°rio de identificadores. <br><br><img src="https://habrastorage.org/webt/59/8w/cf/598wcfm9ouioywtepy1tueyern8.png" alt="imagem"><br><br><h3>  1.4 Pedidos </h3><br><h3>  1.4.0 Consulta de termos </h3><br>  O tipo mais simples de solicita√ß√£o em que precisamos encontrar a lista apropriada de documentos e emitir documentos classificados ap√≥s a classifica√ß√£o. <br>  Por exemplo, desta maneira, encontramos uma lista de posi√ß√µes para <b>java</b> : <br><br><img src="https://habrastorage.org/webt/fv/uv/l7/fvuvl7xxpopw0klzphutaijdbje.png" alt="imagem"><br><br><h3>  1.4.1 Consultas booleanas (e, ou, n√£o) </h3><br>  A pesquisa booleana √© uma das partes mais importantes na recupera√ß√£o de informa√ß√µes que encontramos em todos os lugares.  Toda a pesquisa booleana √© baseada em uma combina√ß√£o de AND, OR e NOT.  Por exemplo, quando procuramos uma consulta em duas palavras: <b>java android</b> , na verdade, em uma pesquisa simples, ela ser√° convertida em <b>java AND android</b> .  E isso significa que queremos encontrar todos os documentos que cont√™m as duas palavras. <br><br>  Vale mencionar imediatamente como voc√™ se move pela lista de documentos.  Como as listas de documentos para cada termo s√£o classificadas, geralmente h√° duas maneiras de percorrer as listas: percorrer os documentos sequencialmente, passando-os um por um ou movendo-os diretamente para um documento espec√≠fico, ignorando aqueles que n√£o s√£o necess√°rios (por exemplo, quando a primeira lista √© muito menor , e n√£o precisamos passar por um grande bloco de documentos na segunda lista).  Nesse caso, primeiro usamos o ponteiro de pular ponteiros para a segunda lista para mover o mais pr√≥ximo poss√≠vel do ID do documento desejado e, em seguida, linearmente. <br><br>  No momento da pesquisa, acontece o seguinte: no √≠ndice dos termos java e android s√£o listas de documentos, √© feita uma interse√ß√£o neles - ou seja, encontramos documentos que cont√™m os dois termos.  Com esta pesquisa, os dois m√©todos de percorrer as listas s√£o usados ‚Äã‚Äãpara atravessar mais rapidamente. <br><br><img src="https://habrastorage.org/webt/ug/jl/rf/ugjlrfbdm4vo7bv0xxsfx7nuapg.png" alt="imagem"><br><br>  Com consultas OR do formul√°rio java OR scala, onde precisamos encontrar todos os documentos que contenham pelo menos um dos termos, a situa√ß√£o √© diferente - aqui n√£o precisamos que o termo esteja em todas as listas de documentos de uma s√≥ vez.  Mas h√° consultas com v√°rios operadores OR e, em seguida, a condi√ß√£o para um n√∫mero m√≠nimo de correspond√™ncias pode ocorrer, por exemplo, pode haver uma consulta java OR scala OU cotlin OR clojure com pelo menos duas correspond√™ncias e, em seguida, devemos mostrar todos os documentos que contenham pelo menos duas palavras da consulta . <br><br>  Nesse caso, o heap funciona com mais efici√™ncia.  Podemos armazenar nele links para iteradores de cada lista e obter o elemento m√≠nimo por tempo constante.  Depois de pegar o elemento m√≠nimo, removemos o iterador do heap, avan√ßamos e o adicionamos novamente ao heap.  Voc√™ pode armazenar separadamente o candidato atual a ser adicionado ao resultado e ao contador, quantas vezes ele se encontrou e, no momento em que o candidato for diferente do elemento m√≠nimo na pilha, veja se passamos pelo n√∫mero m√≠nimo de correspond√™ncias na opera√ß√£o.  E adicione √† lista final de resultados ou descarte o documento. <br><br><img src="https://habrastorage.org/webt/mn/o9/px/mno9pxfv5n91v7ilooaln719_s0.png" alt="imagem"><br><br><h3>  1.4.2 Prefixo / Coringas </h3><br>  √Äs vezes, queremos encontrar todos os documentos que contenham uma palavra que comece com um prefixo espec√≠fico.  Nesses casos, a solicita√ß√£o de prefixo nos ajudar√°, que se parecer√° com <b>jav *</b> .  Uma solicita√ß√£o de prefixo funciona muito bem quando o dicion√°rio √© implementado em uma √°rvore de prefixos, e ent√£o chegamos ao aninhamento do prefixo e pegamos todos os termos abaixo. <br><br><h3>  1.4.3 Consultas sobre frases e consulta pr√≥xima </h3><br>  H√° momentos em que voc√™ precisa encontrar a frase inteira, por exemplo, ‚Äúdesenvolvedor java‚Äù ou encontrar palavras entre as quais n√£o haver√° mais do que algumas palavras, por exemplo, ‚Äújava‚Äù e ‚Äúdesenvolvedor‚Äù, entre as quais n√£o mais que 2 palavras, para que voc√™ possa encontrar Documentos que cont√™m java android kotlin developer.  Para isso, s√£o usadas adicionalmente listas de posi√ß√µes de palavras em cada documento. <br><br><img src="https://habrastorage.org/webt/s_/aa/x8/s_aax8ar79jyhyk87misztsg57s.png" alt="imagem"><br><br>  No momento de cruzar as listas de documentos, tudo √© igual √† opera√ß√£o AND.  Por√©m, depois que o documento √© encontrado nas duas listas, √© feita uma verifica√ß√£o adicional - se os termos est√£o √† dist√¢ncia certa um do outro, pela diferen√ßa de posi√ß√£o (posi√ß√£o). <br><br><h3>  1.4.4 Plano de solicita√ß√£o </h3><br>  Geralmente, antes da execu√ß√£o da pr√≥pria solicita√ß√£o, seu plano √© constru√≠do.  Isso acontece para otimizar a execu√ß√£o da solicita√ß√£o e fazer otimiza√ß√µes como uma lista com omiss√µes para a lista de documentos. <br><br>  A maneira mais f√°cil de otimizar sua consulta √© cruzar as listas de documentos em ordem crescente de tamanho.  Portanto, n√£o desperdi√ßaremos o desperd√≠cio de documentos de grandes listas que n√£o est√£o em pequenas listas. <br><br>  Por exemplo, vamos analisar a <b>consulta android AND java AND sql</b> .  Digamos que existem 10 documentos na lista do Android, em sql - 20 e em java - 100. Nesse caso, √© melhor cruzar primeiro as listas menores, e a consulta otimizada ser√° semelhante a <b>(android AND sql) AND java</b> . <br><br>  No caso de OR, o mais simples √© contar o n√∫mero de documentos na interse√ß√£o como a soma de duas listas potencialmente interceptadas. <br><br><h3>  1.4.5 Extens√£o de consulta - Sin√¥nimos </h3><br>  Al√©m do que o usu√°rio digita na barra de pesquisa, geralmente a pesquisa tenta expandir a consulta para encontrar documentos mais relevantes.  Muito pode ser usado para expandir a pesquisa: o hist√≥rico de consultas do usu√°rio, alguns dados personalizados sobre ele e muito mais.  Mas, al√©m de tudo isso, tamb√©m existe uma maneira universal de expandir a solicita√ß√£o - sin√¥nimos. <br><br>  Nesse caso, ao gravar documentos no √≠ndice, o termo √© substitu√≠do por um "link" no dicion√°rio de sin√¥nimos: <br><br><img src="https://habrastorage.org/webt/ej/cy/_m/ejcy_m-mukw_j8qjmnqoy-qreb8.png" alt="imagem"><br><br>  O mesmo acontece ao converter uma solicita√ß√£o.  Por exemplo, quando solicitamos um <b>gerente de vendas</b> , a solicita√ß√£o realmente se parece com: <br><br><img src="https://habrastorage.org/webt/_z/pp/oo/_zppoo52_gvvdyytz3bsxldxmrc.png" alt="imagem"><br><br>  Assim, na resposta, receberemos n√£o apenas os documentos que cont√™m o gerente de vendas, mas tamb√©m aqueles que cont√™m o agente de vendas e as vendas. <br><br><h3>  1.5 Filtragem </h3><br><h3>  1.5.1 Filtro de alcance r√°pido </h3><br>  √Äs vezes, queremos filtrar algo por uma gama de valores, por exemplo, pela experi√™ncia em anos.  Suponha que desejemos encontrar todas as vagas com a experi√™ncia exigida de 3 a 11 anos.  A primeira decis√£o √© fazer uma solicita√ß√£o com todas as op√ß√µes do intervalo, combinando-as por meio do OR.  Mas o problema √© que pode haver muitos valores.  Uma maneira de resolver esse problema √© registrar o valor com v√°rias precis√£o ao mesmo tempo: <br><br><img src="https://habrastorage.org/webt/ti/2j/nm/ti2jnmqh8bvj2xoq6by86agw2-q.png" alt="imagem"><br><br>  Nesse caso, armazenaremos 5 valores de precis√£o: um ano (consideraremos isso como o valor inicial), dois, quatro, oito e dezesseis. <br><br>  Ent√£o, ao gravar, ocorrer√° o seguinte: por exemplo, ao gravar um documento com um requisito de experi√™ncia de 6 anos, registramos o valor imediatamente com toda a precis√£o: <br><br><img src="https://habrastorage.org/webt/g8/so/l0/g8sol0rss7iadolb1-xqxy2e7pm.png" alt="imagem"><br><br>  Ao filtrar "de 3 a 11 anos", acontece o seguinte: selecionamos apenas os valores necess√°rios na precis√£o necess√°ria, obtemos apenas 3 valores em vez de 8 e obtemos a consulta <b>(valor real == 3) OR (precis√£o 4 == 4) OU (precis√£o 4 == 8)</b> <br><br><img src="https://habrastorage.org/webt/4v/7u/bq/4v7ubqnlcqa9scgl7tq17m7b8ai.png" alt="imagem"><br><br><h3>  1.5.2 M√°scaras de bits </h3><br>  M√°scaras de bits s√£o parte integrante de um √≠ndice.  O uso mais importante √© filtrar documentos exclu√≠dos.  Quando voc√™ exclui um documento do √≠ndice, a exclus√£o f√≠sica n√£o ocorre imediatamente.  Uma estrutura especial √© gravada ao lado do √≠ndice, onde cada bit significa o ID do documento no √≠ndice e, quando exclu√≠do, um bit √© aumentado e, ao pesquisar, esses documentos s√£o filtrados e n√£o caem na sa√≠da. <br><br>  Voc√™ tamb√©m pode usar m√°scaras de bits para definir permiss√µes para cada usu√°rio para determinados documentos e para armazenar em cache filtros populares individuais.  Normalmente, as m√°scaras de bits s√£o armazenadas separadamente do √≠ndice. <br><br>  Por exemplo, temos filtros populares: a cidade de Moscou, apenas em per√≠odo parcial, sem experi√™ncia profissional.  Antes da solicita√ß√£o, podemos obter as m√°scaras de bits j√° salvas para esses documentos, adicion√°-las e obter a m√°scara de bits final - quais documentos passam por todos esses tr√™s filtros, economizando tempo na filtragem. <br><br><img src="https://habrastorage.org/webt/cg/g7/cm/cgg7cmb42j_ugjkcna4fqyi2bqu.png" alt="imagem"><br><br><h3>  2. Classifica√ß√£o </h3><br>  Como lembramos, a principal tarefa da pesquisa √© obter as informa√ß√µes mais relevantes no menor tempo poss√≠vel.  E nisso seremos ajudados pela classifica√ß√£o dos documentos, depois que filtramos os documentos por consulta de texto e aplicamos os filtros e direitos necess√°rios. <br><br>  A maneira mais f√°cil e barata de classificar √© simplesmente classificar os documentos por data.  Em alguns sistemas, isso foi feito anteriormente, por exemplo, nas not√≠cias ou nos an√∫ncios imobili√°rios, para que o usu√°rio recebesse os documentos mais recentes. <br><br>  √Äs vezes, um modelo de classifica√ß√£o pelo n√∫mero de palavras encontradas em um documento pode ser usado, por exemplo, quando n√£o h√° tantos documentos, e queremos encontrar todos os documentos nos quais pelo menos uma das palavras de consulta foi encontrada.  Nesse caso, os documentos em que todas as palavras da consulta ou mais delas forem encontradas ser√£o mais relevantes. <br><br>  √â claro que, atualmente, esses m√©todos j√° se tornaram irrelevantes e podem ser atribu√≠dos mais provavelmente √† hist√≥ria do problema. <br><br><h3>  2.1 TF-IDF </h3><br>  TF-IDF (termo frequ√™ncia - frequ√™ncia inversa de documentos) √© uma das f√≥rmulas de classifica√ß√£o mais b√°sicas e mais usadas.  A ess√™ncia da f√≥rmula √© diminuir os termos usados ‚Äã‚Äãem todos os lugares, por exemplo, preposi√ß√µes e interjei√ß√µes, e criar termos mais significativos e raros, mostrando assim os primeiros documentos com termos mais raros e mais significativos da consulta.  Agora vamos dividir a f√≥rmula em partes: <br><br>  <b>TF (termo frequ√™ncia)</b> √© a frequ√™ncia do termo que ocorre no documento.  √â calculado simplesmente: <br><br>  <i>TF term `java` = n√∫mero de termo` java` no documento / n√∫mero de todos os termos no documento</i> <i><br></i> <br>  <b>IDF (frequ√™ncia inversa de documentos)</b> - a inversa da frequ√™ncia com que a palavra ocorre na cole√ß√£o de documentos.  Ajuda a reduzir o peso das palavras mais usadas. <br><br>  <i>IDF (`java`) = log (n√∫mero de documentos na cole√ß√£o / n√∫mero de documentos em que o termo` java` ocorre)</i> <br><br>  Al√©m disso, para obter o TF-IDF do termo java, basta multiplicar os valores de TF e IDF obtidos.    ,     ,          .     , ,  developer       ,     ,    java developer       . <br><br><h3> 2.2   </h3><br>      ,      ,    .        ,     ,    ,     . <br><br><h3> 2.3 BM25  BM* </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BM25</a> (Okapi best match 25)      TF-IDF         .     BM25F,             (    ). <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>B</mi><mi mathvariant=&quot;normal&quot;>M</mi><mn>25</mn></mrow><mo>=</mo><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>w</mi></munderover><mfrac><mrow><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>+</mo><mi>k</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x22C5;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>T</mi><mi mathvariant=&quot;normal&quot;>F</mi></mrow><mi>i</mi></msub><mo>&amp;#x22C5;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>I</mi><mi mathvariant=&quot;normal&quot;>D</mi><mi mathvariant=&quot;normal&quot;>F</mi></mrow><mi>i</mi></msub></mrow><mrow><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>T</mi><mi mathvariant=&quot;normal&quot;>F</mi></mrow><mi>i</mi></msub><mo>+</mo><mi>k</mi><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mi>b</mi><mo>+</mo><mi>b</mi><mfrac><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>D</mi><mi mathvariant=&quot;normal&quot;>L</mi></mrow><mrow><mi>a</mi><mi>v</mi><mi>g</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>D</mi><mi mathvariant=&quot;normal&quot;>L</mi></mrow></mrow></mfrac><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac><mspace linebreak=&quot;newline&quot; /><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>I</mi><mi mathvariant=&quot;normal&quot;>D</mi><mi mathvariant=&quot;normal&quot;>F</mi></mrow><mi>i</mi></msub><mo>=</mo><mfrac><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>l</mi><mi mathvariant=&quot;normal&quot;>o</mi><mi mathvariant=&quot;normal&quot;>g</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mfrac><mrow><mi>N</mi><mo>&amp;#x2212;</mo><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mi>n</mi></mfrac><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>l</mi><mi mathvariant=&quot;normal&quot;>o</mi><mi mathvariant=&quot;normal&quot;>g</mi></mrow><mi>N</mi></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="76.867ex" height="14.467ex" viewBox="0 -1662 33095.6 6228.9" role="img" focusable="false" style="vertical-align: -10.607ex; max-width: 638px;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(8356,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-42" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-4D" x="708" y="0"></use><g transform="translate(1626,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-35" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-3D" x="2904" y="0"></use><g transform="translate(3961,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJSZ2-2211" x="0" y="0"></use><g transform="translate(147,-1090)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-31" x="1124" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-77" x="663" y="1627"></use></g><g transform="translate(5405,0)"><g transform="translate(286,0)"><rect stroke="none" width="10569" height="60" x="0" y="220"></rect><g transform="translate(1127,720)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-31" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-2B" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-6B" x="2112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-29" x="2634" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-22C5" x="3246" y="0"></use><g transform="translate(3746,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-46" x="722" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-69" x="1945" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-22C5" x="5689" y="0"></use><g transform="translate(6190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-44" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-46" x="1126" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-69" x="2516" y="-213"></use></g></g><g transform="translate(60,-862)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-46" x="722" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-69" x="1945" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-2B" x="1942" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-6B" x="2943" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-28" x="3464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-31" x="3854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-2212" x="4576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-62" x="5577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-2B" x="6229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-62" x="7230" y="0"></use><g transform="translate(7659,0)"><g transform="translate(120,0)"><rect stroke="none" width="2160" height="60" x="0" y="220"></rect><g transform="translate(588,407)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-44" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-4C" x="764" y="0"></use></g><g transform="translate(59,-391)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-76" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-67" x="1014" y="0"></use><g transform="translate(1057,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-44" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-4C" x="764" y="0"></use></g></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-29" x="10059" y="0"></use></g></g></g></g><g transform="translate(12175,-3602)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-44" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-46" x="1126" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-69" x="2516" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-3D" x="2401" y="0"></use><g transform="translate(3180,0)"><g transform="translate(397,0)"><rect stroke="none" width="5046" height="60" x="0" y="220"></rect><g transform="translate(60,823)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-6F" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-67" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-28" x="1279" y="0"></use><g transform="translate(1669,0)"><g transform="translate(120,0)"><rect stroke="none" width="2627" height="60" x="0" y="220"></rect><g transform="translate(60,465)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-6E" x="1667" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-2B" x="2267" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-31" x="3046" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-6E" x="1557" y="-488"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-29" x="4536" y="0"></use></g><g transform="translate(1439,-686)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-6F" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMAIN-67" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjBuRr_r8JM9snbTagxSyYpQWNXPA#MJMATHI-4E" x="1279" y="0"></use></g></g></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">B</mi><mi mathvariant="normal">M</mi><mn>25</mn></mrow><mo>=</mo><munderover><mo>‚àë</mo><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>w</mi></munderover><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>k</mi><mo stretchy="false">)</mo><mo>‚ãÖ</mo><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">T</mi><mi mathvariant="normal">F</mi></mrow><mi>i</mi></msub><mo>‚ãÖ</mo><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">I</mi><mi mathvariant="normal">D</mi><mi mathvariant="normal">F</mi></mrow><mi>i</mi></msub></mrow><mrow><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">T</mi><mi mathvariant="normal">F</mi></mrow><mi>i</mi></msub><mo>+</mo><mi>k</mi><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mi>b</mi><mo>+</mo><mi>b</mi><mfrac><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">D</mi><mi mathvariant="normal">L</mi></mrow><mrow><mi>a</mi><mi>v</mi><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">D</mi><mi mathvariant="normal">L</mi></mrow></mrow></mfrac><mo stretchy="false">)</mo></mrow></mfrac><mspace linebreak="newline"></mspace><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">I</mi><mi mathvariant="normal">D</mi><mi mathvariant="normal">F</mi></mrow><mi>i</mi></msub><mo>=</mo><mfrac><mrow><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">g</mi></mrow><mo stretchy="false">(</mo><mfrac><mrow><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mi>n</mi></mfrac><mo stretchy="false">)</mo></mrow><mrow><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">g</mi></mrow><mi>N</mi></mrow></mfrac></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">\mathrm{BM25} = \sum_{i=1}^w \frac{(1 + k) \cdot \mathrm{TF}_i \cdot \mathrm{IDF}_i}{\mathrm{TF}_i + k(1 - b + b \frac{\mathrm{DL}}{avg\mathrm{DL}})} \\ \mathrm{IDF}_i = \frac{\mathrm{log} (\frac{N - n + 1}{n})}{\mathrm{log} N}</script></p><br><br><h3> 2.4    </h3><br>       , : <br><br><ul><li> DFR (divergence from randomness), </li><li> IBS (information-based models), </li><li> LM Dirichlet, </li><li> Jelinek-Mercer. </li></ul><br><h3> 2.5    </h3><br>          ,   ,        .              ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>    . <br><br><h3> 2.6 Top k    </h3><br>            ,   .    ,       ,         . <br><br>     ,            .          <b>top k</b> . <br><br>       ‚Äî  .    k,  k  <b>  *   </b> .           heap.       n*log(n)    k. <br><br>           . ,        ,          ,   10    12,    score    10        score  .        ,      n ‚Äî (n*page size)  . <br><br><h3> 3.    </h3><br><h3> 3.1  </h3><br>        ‚Äî   .         , . <br><br>      ,        :    ,        ,       .  ,    .             .     (     ,        ).            (merge). <br><br>         ,     ,       : <br><br><img src="https://habrastorage.org/webt/2c/ec/gx/2cecgxgu5eyuhtaffs50anmywoa.png" alt="imagem"><br><br>       .            ,       ,   , -     . <br><br><h3> 3.2   (megre) </h3><br>        ‚Äî  .         ¬´¬ª ‚Äî      .      ,      ,        (    ). <br><br><img src="https://habrastorage.org/webt/ey/yv/n9/eyyvn9msvqryhqm3lh_rh9o4vv8.png" alt="imagem"><br><br>     ,    ,   ,       .      : <br><br><ul><li>     , </li><li>      (,           2 ), </li><li>      (,        ). </li></ul><br><h3> 4.   </h3><br>         ,    ,           .         ,  -     (,            . .).   ,      ,       ,    . <br><br><img src="https://habrastorage.org/webt/m0/jy/od/m0jyodvmhfv6vz093nofc5axnmk.png" alt="imagem"><br><br><h3> 4.1    </h3><br>           (,  hh     ,   ),     .        . <br><br>    ,        ,    . -,     ,          . -,     ,          ,         . <br><br><h3> 4.2   </h3><br>           ,       .        ,            . <br><br>    ,       hh,  <i> </i> ,        ,   -    : <br><br><img src="https://habrastorage.org/webt/bq/mo/cb/bqmocbqmz-t3kuyhddye_d04iy0.png" alt="imagem"><br><br><h3> 5.  ‚Ä¶    </h3><br>    ,      ,         ,    .   ,     :   , , ,      ,     ,         (highlight),   .      ,    ,        ,   top k . <br><br>     : <br><br><ul><li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Introduction to Information Retrieval</a>     </li><li>         lucene ( elasticsearch)  sphinx </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veja os relat√≥rios de Andrei Aksenov, por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este</font></font></a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">venha estudar na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escola programadora hh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e ou√ßa palestras sobre a pesquisa :)</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Isso √© tudo, obrigado a todos pela aten√ß√£o, √© interessante ouvir seus coment√°rios e perguntas. </font></font><br><br><h3>  PS </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gostaria de expressar gratid√£o a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gdanschin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;">me</font></a><font style="vertical-align: inherit;"> ajudar a escrever este artigo.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt413261/">https://habr.com/ru/post/pt413261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt413247/index.html">Por que monitorar sistemas de armazenamento?</a></li>
<li><a href="../pt413249/index.html">Escrevendo um m√≥dulo do kernel Linux: I2C</a></li>
<li><a href="../pt413251/index.html">Rea√ß√£o em cadeia da polimerase e Vladivostok</a></li>
<li><a href="../pt413253/index.html">Richard Hamming: Cap√≠tulo 21. Fibra √ìptica</a></li>
<li><a href="../pt413255/index.html">Richard Hamming: Cap√≠tulo 27. Dados Inv√°lidos</a></li>
<li><a href="../pt413265/index.html">Para o balne√°rio com TI</a></li>
<li><a href="../pt413267/index.html">10 qualidades essenciais a serem observadas para um gerente de produto iniciante</a></li>
<li><a href="../pt413269/index.html">Como as m√°quinas analisam big data: uma introdu√ß√£o aos algoritmos de cluster</a></li>
<li><a href="../pt413271/index.html">Sem senhas: como o sistema de autentica√ß√£o em um registro distribu√≠do funciona</a></li>
<li><a href="../pt413273/index.html">Gerenciamento de requisitos de produtos de TI dentro da empresa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>