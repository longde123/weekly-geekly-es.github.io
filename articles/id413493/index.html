<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕺🏼 🍘 👨🏾‍🍳 Infrastruktur Kunci Publik (lanjutan): Otoritas Sertifikat berdasarkan OpenSSL dan SQLite3 🏂🏻 ⌚️ 🙋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jika salah satu objek utama infrastruktur kunci publik (PKI) adalah sertifikat X509, maka subjek utama PKI adalah Otoritas Sertifikasi (CA). CAlah yan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Infrastruktur Kunci Publik (lanjutan): Otoritas Sertifikat berdasarkan OpenSSL dan SQLite3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413493/"><img src="https://habrastorage.org/webt/60/9k/sk/609ksklwykcs1xqbwuoyvqw7wg8.png" align="left" alt="gambar">  Jika salah satu objek utama infrastruktur kunci publik (PKI) adalah sertifikat X509, maka subjek utama PKI adalah Otoritas Sertifikasi (CA).  CAlah yang mengeluarkan sertifikat, menghentikan validitasnya (pencabutan sertifikat), mengonfirmasi validitasnya.  Di halaman <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Habrahabr,</a> Anda dapat menemukan berbagai publikasi tentang masalah sertifikat digital menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OpenSSL</a> . <a name="habracut"></a>  Pada dasarnya, artikel-artikel ini membahas penggunaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">utilitas openssl</a> , menjelaskan antarmuka baris perintahnya dan bekerja dengan file yang menyimpan semuanya: kunci, permintaan, sertifikat, termasuk root, dll.  Tetapi jika Anda mengembangkan pusat sertifikasi skala penuh (CA) yang berbasis pada OpenSSL, maka wajar jika Anda ingin menyingkirkan berbagai file ini dan beralih ke bekerja dengan basis data, serta memiliki antarmuka grafis untuk menerbitkan dan mengelola sertifikat.  Dan jika Anda mengingat Hukum Federal 6 April 2011.  No. 63- Tentang Tanda Tangan Elektronik, CA harus mematuhi persyaratan hukum ini, serta Persyaratan untuk Bentuk Sertifikat Kualifikasi untuk Kunci Verifikasi Tanda Tangan Elektronik, yang disetujui oleh Pesanan Layanan Keamanan Federal Rusia tertanggal 27 Desember 2011 No. 795. <br><br>  Warga biasa memiliki kesan bahwa UT adalah sesuatu yang luar biasa (well, Center, hampir seperti Mission Control Center). <br><br><img src="https://habrastorage.org/webt/b5/3v/g7/b53vg7cflxhkndwjyavz3ppfcuy.png" align="right" alt="gambar">  Dari sudut pandang tanggung jawab CA - ini memang benar.  Bagaimanapun, sertifikat yang dikeluarkan oleh CA sebenarnya sama dengan paspor hari ini. <br><br>  Dari sudut pandang seorang programmer, semuanya tidak begitu menakutkan.  Jadi proyek pusat sertifikasi CAFL63 lahir.  Implementasi proyek CAFL63 didasarkan pada tiga "pilar", yaitu OpenSSL, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SQLite3</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tcl / Tk</a> . <br><br>  Jadi, apa Otoritas Sertifikasi saat ini?  Pertama-tama, itu adalah Pusat Registrasi, di mana perwakilan dari badan hukum, individu, pengusaha individu datang untuk sertifikat dengan paket dokumen yang diperlukan, khususnya, mengidentifikasi identitas dan otoritas pemohon.  Mereka dapat datang dengan aplikasi yang sudah jadi secara elektronik.  CR memeriksa dokumen, permintaan (data yang lengkap, kebenaran tanda tangan elektronik, dll.), Dan jika semuanya berjalan dengan baik, mereka menerima permintaan, menyetujui dan mengirimkannya ke Pusat Sertifikasi (CA).  Tapi ini ideal.  Dalam praktiknya, semuanya terlihat berbeda. <br><br>  Warga negara, organisasi memerlukan sertifikat (untuk akses ke portal Layanan Negara, untuk pelaporan pajak, untuk penawaran), tetapi mereka tidak tahu apa itu dan apa yang harus dilakukan dengan itu.  Mereka sangat yakin bahwa CA menerima tanda tangan elektronik seperti faksimili.  Tapi ini adalah masalah pencerahan.  Oleh karena itu, pelamar datang ke Administrasi Pusat Administrasi Pusat dan menyerahkan dokumen.  Bersama dengan karyawan Kantor Pusat, mereka pergi ke tempat kerja terpisah dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menyiapkan permintaan</a> sertifikat: <br><br><img src="https://habrastorage.org/webt/-i/ni/fr/-inifrinlnabszqrmm9w11vpz98.png"><br><br>  Permintaan yang disiapkan pada media elektronik, sebagaimana telah disebutkan, diterima oleh CR.  Apa yang perlu diingat oleh pelamar?  Pertama dan terutama, ambil media dengan kunci pribadi yang dibuat! <br>  Permintaan yang disetujui pada media elektronik dikirimkan ke CA, di mana sertifikat akan dikeluarkan berdasarkannya. <br><br>  Ini adalah diagram skematis dari pekerjaan CA.  Detail akan menjadi jelas di bawah ini.  Satu komentar, untuk kenyamanan demonstrasi, utilitas untuk mempersiapkan permintaan, CR dan CA digabungkan menjadi satu kompleks demonstrasi.  Tetapi tidak ada masalah dengan keanekaragaman fungsional.  Yang paling sederhana adalah memiliki instance CAFL63 di setiap tempat kerja dan hanya menggunakan fungsionalitas yang diperlukan. <br><br>  Ketika proyek itu berjalan lancar, proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SimpleCA</a> menarik perhatian saya.  Mempelajari proyek ini banyak membantu dengan implementasi akhir CAFL63 CA. <br><br>  Kode sumber utilitas dan distribusinya untuk platform Linux dan MS Windows dapat ditemukan <div class="spoiler">  <b class="spoiler_title">di sini:</b> <div class="spoiler_text"><ul><li>  <a href="">kode sumber</a> </li><li>  <a href="">Linux32</a> </li><li>  <a href="">Linux64</a> </li><li>  <a href="">WIN32</a> </li><li>  <a href="">WIN64</a> </li></ul><br></div></div><br>  Jadi, jalankan utilitas CAFL63 dan halaman mulai muncul di layar: <br><br><img src="https://habrastorage.org/webt/ej/d4/6z/ejd46z3sdsymivi7ougryho9q-g.png"><br><br>  Kami memulai pekerjaan dengan menekan tombol "Buat Basis Data".  Basis data CA dibuat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DBite</a> lintas-platform <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SQLite3</a> .  Basis data CA berisi beberapa tabel.  Tabel utama mainDB hanya berisi satu catatan, yang menyimpan sertifikat root, kunci pribadi yang dienkripsi dengan kata sandi, dan pengaturan CA.  Ada dua tabel yang terkait dengan permintaan sertifikat: permintaan reqDB saat ini dan arsip permintaan reqDBArc.  Tiga tabel dibuat untuk sertifikat: tabel sertifikat baru certDBNew, tabel arsip sertifikat CertDB dan tabel sertifikat dicabut certDBRev: <br><br><pre><code class="sql hljs">. . . certdb eval {<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> certDB( ckaID <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span> , nick <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, sernum <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, certPEM <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, subject <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, notAfter <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, notBefore <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, dateRevoke <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, state <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> )} certdb eval {<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> certDBRev( ckaID <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span> )} certdb eval {<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> certDBNew( ckaID <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span> )} certdb eval {<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> reqDB (ckaID <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>, nick <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, sernum <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, subject <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, datereq <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">status</span></span> <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, reqpem <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, pkcs7 <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>)} certdb eval {<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> reqDBAr (ckaID <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>, nick <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, sernum <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, subject <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, datereq <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">status</span></span> <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, reqpem <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, pkcs7 <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>)} certdb eval {<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> crlDB(<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span> autoincrement, signtype <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, issuer <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, publishdate <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, nextdate <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, crlpem <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>)} . . .</code> </pre> <br>  Semua tabel permintaan dan sertifikat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">nilai hash</a> (sha1) dari kunci publik sebagai kunci (kunci utama).  Untuk kenyamanan, di masa depan, nilai hash dari nilai kunci publik akan disebut CKAID (terminologi PKCS # 11).  Ini ternyata sangat nyaman, misalnya, ketika mencari sertifikat berdasarkan permintaan atau sebaliknya.  Ada tabel crlDB lain di database yang menyimpan daftar sertifikat yang dicabut. <br><br>  Nilai kunci publik disimpan dalam permintaan dan dalam sertifikat.  Oleh karena itu, sebelum memasukkannya ke dalam basis data, perlu untuk mengekstrak kunci publik dari mereka dan menghitung CKAID.  Untuk mengekstrak nilai kunci publik, akan lebih mudah untuk menggunakan paket pki (paket memerlukan pki), yang berisi alat untuk bekerja dengan sertifikat dan permintaan.  Namun, paket ini tidak dirancang untuk bekerja dengan kriptografi Rusia.  Dalam hal ini, berdasarkan prosedur parse_cert dan parse_csr termasuk dalam paket pki, tulis prosedur parce_cert_gost dan parse_csr_gost: <br><br><pre> <code class="plaintext hljs">... ## Convert Pubkey type to string set pubkey_type [::pki::_oid_number_to_name $pubkey_type] # Parse public key, based on type switch -- $pubkey_type { "rsaEncryption" { set pubkey [binary format B* $pubkey] binary scan $pubkey H* ret(pubkey) ::asn::asnGetSequence pubkey pubkey_parts ::asn::asnGetBigInteger pubkey_parts ret(n) ::asn::asnGetBigInteger pubkey_parts ret(e) set ret(n) [::math::bignum::tostr $ret(n)] set ret(e) [::math::bignum::tostr $ret(e)] set ret(l) [expr {int([::pki::_bits $ret(n)] / 8.0000 + 0.5) * 8}] set ret(type) rsa } "1.2.643.2.2.19" - "1.2.643.7.1.1.1.1" - "1.2.643.7.1.1.1.2" { # gost2001, gost2012-256,gost2012-512 set pubkey [binary format B* $pubkey] binary scan $pubkey H* ret(pubkey) set ret(type) $pubkey_type ::asn::asnGetSequence pubkey_algoid pubalgost #OID -  ::asn::asnGetObjectIdentifier pubalgost oid1 #OID -   ::asn::asnGetObjectIdentifier pubalgost oid2 } default { error "Unknown algorithm" } } ...</code> </pre> <br>  Tidak seperti prosedur "asli", prosedur ini memungkinkan Anda untuk bekerja dengan objek tidak hanya dalam format PEM, tetapi juga dalam format DER.  Untuk bekerja dengan daftar pencabutan sertifikat CRL, prosedur parse_crl ditulis.  Semua prosedur ini dapat ditemukan dalam kode sumber, yang disimpan bersama distribusi. <br><br>  Juga dalam paket pki tidak ada oid-s Rusia, misalnya, TIN, SNILS, dll.  Masalah ini mudah diselesaikan dengan menambahkan oid-s Rusia ke array :: pki :: oids: <br><br><pre> <code class="plaintext hljs">. . . set ::pki::oids(1.2.643.100.1) "OGRN" set ::pki::oids(1.2.643.100.5) "OGRNIP" set ::pki::oids(1.2.643.3.131.1.1) "INN" set ::pki::oids(1.2.643.100.3) "SNILS" #  set ::pki::oids(1.2.643.2.2.3) "  34.10-2001" set ::pki::oids(1.2.643.7.1.1.3.2) "  34.10-2012-256" set ::pki::oids(1.2.643.7.1.1.3.3) "  34.10-2012-512" . . .</code> </pre> <br>  Memiliki fungsi parse_cert_gost dan parse_csr_gost, nilai-nilai CKAID (kunci utama untuk basis data) dihitung sebagai berikut: <br><br><pre> <code class="plaintext hljs">. . . array set b [parse_csr_gost $req] set pem $b(pem) set subject $b(subject) set pubkey $b(pubkey) set key1 [binary format H* $pubkey] set ckaID [::sha1::sha1 $key1] . . .</code> </pre> <br>  Jadi, klik tombol "Buat database": <br><br><img src="https://habrastorage.org/webt/fj/uh/3q/fjuh3qvrwugzxspgjchbonu9is0.png"><br><br>  Pembuatan CA dimulai dengan pilihan direktori di mana kita akan menyimpan pengaturan basis data dan kata sandi untuk akses ke kunci pribadi CA.  Utilitas CAFL63 dengan cermat memonitor panjang kata sandi: <br><br><img src="https://habrastorage.org/webt/dw/eb/hf/dwebhfn5hqfjh8bv3jge5jxllx8.png"><br><br>  Kata sandi disimpan dalam database CA sebagai hash: <br><br><pre> <code class="plaintext hljs">. . . set hash256 [::sha2::sha256 $wizData(capassword)] . . .</code> </pre> <br>  Setelah menekan tombol "Lacak", proses pembentukan sertifikat akar yang ditandatangani sendiri dari CA yang dikerahkan dimulai.  Pada langkah pertama proses ini, jenis dan parameter pasangan kunci dipilih: <br><br><img src="https://habrastorage.org/webt/zr/e4/ag/zre4agh8ilw-tvjiy354y_o337c.png"><br><br>  Setelah memutuskan pasangan kunci untuk sertifikat root dari pusat sertifikasi yang dibuat, kami melanjutkan untuk mengisi formulir dengan informasi tentang pemilik (tangkapan layar pertama tidak ada). <br><br>  Perhatikan bahwa utilitas CAFL63 memiliki "kecerdasan" tertentu dan karenanya tidak hanya mengontrol ketersediaan data di bidang, tetapi juga kebenaran (penyorotan merah - salah) dalam mengisi bidang seperti TIN, PSRN, SNILS, PSRNIP, alamat email, dll .: <br><br><img src="https://habrastorage.org/webt/4o/pt/vr/4optvrvc8o6gfd413eh5ggshby4.png"><br><br>  Setelah mengisi kolom dengan informasi tentang pemilik CA, akan ditawarkan untuk menentukan pengaturan sistem CA: <br><br><img src="https://habrastorage.org/webt/it/wq/nc/itwqnccdburbtmsdybckzdqf1u8.png"><br><br>  Jika Anda tidak akan bekerja dengan kriptografi Rusia, maka Anda dapat menggunakan OpenSSL biasa.  Untuk bekerja dengan kriptografi Rusia, Anda harus memilih versi yang sesuai, modifikasi OpenSSL.  Untuk detail lebih lanjut, baca README.txt dalam distribusi yang diunduh.  Karena rencananya akan menerbitkan sertifikat yang memenuhi syarat, maka juga perlu untuk memberikan informasi tentang sertifikasi CA itu sendiri dan sistem perlindungan informasi kriptografis yang digunakan olehnya (lihat “Persyaratan untuk Formulir Sertifikat Kualifikasi dari Kunci Verifikasi Tanda Tangan Elektronik”, yang disetujui oleh urutan Layanan Keamanan Federal Rusia tertanggal 27 Desember 2011 No. 795). <br><br>  Setelah mengisi semua bidang dengan benar, sekali lagi akan ditawarkan untuk memeriksa akurasinya dan klik tombol "Selesai": <br><br><img src="https://habrastorage.org/webt/zo/pd/xf/zopdxfb8rtzcvoei5xuvpt7udqe.png"><br><br>  Setelah mengklik tombol "Selesai", database CA akan dibuat di mana sertifikat root CA, kunci pribadi, pengaturan sistem akan disimpan, dan halaman mulai utilitas CAFL63 akan muncul di layar lagi.  Sekarang kita telah membuat database CA yang baru dibuat, kita klik tombol "Open DB", pilih direktori dengan database, pergi ke jendela kerja utama dari CA dan klik tombol "Lihat CA CA", pastikan bahwa sertifikat root yang kami buat : <br><br><img src="https://habrastorage.org/webt/c-/x_/3r/c-x_3r8rrexuvvbov7ayzay6pze.png"><br><br>  Langkah selanjutnya adalah menyiapkan templat / profil aplikasi untuk badan hukum, perorangan, pengusaha perorangan ( <b><i>Alat-&gt; Pengaturan-&gt; Jenis Sertifikat-&gt; Baru</i></b> ): <br><br><img src="https://habrastorage.org/webt/hw/-o/ml/hw-omloedtpyfgtfq1vex8h3mug.png"><br><br>  Setelah menentukan nama profil baru, akan diusulkan untuk menentukan komposisinya: <br><br><img src="https://habrastorage.org/webt/bf/yc/g_/bfycg_oxromnvlpisghe64bbuwe.png"><br><br>  Komposisi profil ditentukan oleh nama dibedakan.  Setiap profil memiliki komposisi sendiri dengan wajib (wajib) atau tidak bidang / oids.  Komposisi profil untuk badan hukum, individu, pengusaha individu ditentukan oleh persyaratan Undang-Undang Federal-63 dan "Persyaratan untuk Formulir Sertifikat Kualifikasi dari Verifikasi Tanda Tangan Elektronik Kunci Sertifikat" FSB Rusia. <br><br>  Setelah menyiapkan profil, CA siap menerima pelamar dan aplikasi dari mereka.  Seperti disebutkan di atas, pemohon dapat datang dengan atau tanpa aplikasi yang siap untuk sertifikat. <br>  Jika pemohon datang dengan aplikasi yang siap, maka setelah memeriksa dokumennya, aplikasi tersebut diimpor ke dalam database CA.  Untuk melakukan ini, pilih tab "Permintaan Sertifikat" pada jendela kerja utama, klik tombol "Impor Permintaan / CSR", dan pilih file dengan permintaan.  Setelah itu, sebuah jendela dengan informasi tentang permintaan akan muncul: <br><br><img src="https://habrastorage.org/webt/rd/dz/ry/rddzryagss1nr3eodjcs08bwero.png"><br><br>  Setelah meninjau permintaan dan memastikan bahwa itu diisi dengan benar, Anda dapat mengklik tombol "Impor" untuk memasukkannya ke dalam database.  Segera, kami mencatat bahwa ketika Anda mencoba membuat kembali permintaan dalam database CA, sebuah pesan akan ditampilkan: <br><br><img src="https://habrastorage.org/webt/ih/dy/q_/ihdyq_rplawbuh56jkw2czs8cto.png"><br><br>  Permintaan ke basis data CA ditandai ("Tipe" kolom) baik sebagai "Lokal" yang dibuat di pusat pendaftaran CA, atau sebagai "Impor" yang dibuat oleh pemohon sendiri, dan waktu penerimaan aplikasi di CA juga dicatat.  Ini dapat berguna dalam menyelesaikan situasi konflik.  Karena itu, ketika mengimpor permintaan sertifikat, Anda harus menunjukkan siapa yang membuat permintaan (lihat tangkapan layar). <br>  Aplikasi yang diimpor terletak di database CA dan ditampilkan di jendela utama pada tab "Permintaan Sertifikat".  Permintaan yang diterima berada pada tahap "pertimbangan" (kolom "Status" pada tab "Permintaan Sertifikat" dan "Arsip Permintaan").  Untuk setiap permintaan yang baru diterima, keputusan harus dibuat (menu drop-down ketika Anda mengklik kanan pada permintaan yang dipilih): <br><br><img src="https://habrastorage.org/webt/2e/08/l1/2e08l1p6pmp0ebvd_l1yi1b7aiy.png"><br><br>  Setiap permintaan harus ditolak atau disetujui: <br><br><img src="https://habrastorage.org/webt/hx/al/pt/hxalptjfajymsui_5xmtpxqnemc.png"><br><br>  Jika permintaan ditolak, maka itu dipindahkan dari tabel permintaan reqDB saat ini ke tabel arsip permintaan reqDBArc dan, karenanya, menghilang pada tab "Permintaan Sertifikat" dan muncul di tab "Arsip Permintaan". <br><br>  Aplikasi yang disetujui tetap berada di tabel reqDB dan pada tab "Permintaan Sertifikat" sampai sertifikat dikeluarkan, dan kemudian itu juga berakhir di arsip. <br><br>  Sebelum mengeluarkan sertifikat, perlu untuk mengklarifikasi dengan pemohon untuk tujuan apa (misalnya, untuk akses ke portal Layanan Negara) sertifikat akan digunakan ( <b><i>Alat-&gt; Pengaturan-&gt; Jenis Sertifikat -&gt; Individu -&gt; Edit -&gt; Penggunaan Kunci</i></b> ): <br><br><img src="https://habrastorage.org/webt/2p/kt/jm/2pktjm2nczklrb2mime0exznj7u.png"><br><br>  Untuk menerbitkan sertifikat, Anda harus memilih aplikasi yang disetujui pada tab "Permintaan Sertifikat", klik kanan dan pilih "Sertifikat Penerbit" di menu tarik-turun.  Dalam widget yang muncul, Anda harus memilih profil yang sesuai dengan profil permintaan / sertifikat: <br><br><img src="https://habrastorage.org/webt/tl/b6/x0/tlb6x0l6lk9i8c01qnyvqma-4si.png"><br><br>  Perhatikan bahwa dalam proses penerbitan sertifikat, Anda dapat mengklarifikasi nilai-nilai bidang tertentu: <br><br><img src="https://habrastorage.org/webt/v1/07/4k/v1074kdeoyswmznoaaxx-gi7pee.png"><br><br>  Prosedur untuk menerbitkan sertifikat itu sendiri (item menu "Terbitkan sertifikat") sedikit berbeda dari prosedur untuk membuat sertifikat root atau menerbitkan aplikasi: <br><br><img src="https://habrastorage.org/webt/xc/yk/ls/xcyklse8bwkvsqwwqfakk_o0dvu.png"><br><br>  Sertifikat yang dikeluarkan akan segera muncul di tab Sertifikat.  Dalam hal ini, sertifikat itu sendiri jatuh ke dalam tabel certDBNew dari database CA dan tetap di sana sampai diterbitkan.  Sertifikat dianggap diterbitkan setelah diekspor ke SQL dump sertifikat baru, yang ditransfer ke layanan publik.  Menerbitkan sertifikat memindahkannya dari tabel certDBNew ke tabel certDB. <br><br>  Jika Anda mengklik kanan pada baris yang dipilih di tab "Sertifikat", menu dengan fungsi berikut akan muncul: <br><br><img src="https://habrastorage.org/webt/pz/f1/yn/pzf1ynfqhicu8ferbge-gtgyc9i.png"><br><br>  Fungsi-fungsi ini memungkinkan Anda untuk melihat sertifikat itu sendiri dan permintaan atas dasar yang dikeluarkannya.  Anda juga dapat mengekspor sertifikat ke file atau ke flash drive pelamar.  Fungsi terpenting di sini adalah fungsi pencabutan sertifikat!  Ada fitur eksotis seperti mengekspor sertifikat ke wadah aman # 12 PKCS.  Ini digunakan ketika pelamar ingin menerima wadah seperti itu.  Untuk pelamar seperti itu, fungsi pembuatan permintaan dengan menyimpan kunci pribadi dalam file disediakan secara khusus (tombol "Buat Permintaan / CSR" pada tab "Permintaan Sertifikat"). <br><br>  Jadi, CA memulai hidupnya, mengeluarkan sertifikat pertama.  Salah satu tujuan CA adalah organisasi akses gratis ke sertifikat yang dikeluarkan.  Publikasi sertifikat biasanya melalui layanan Web.  CAFL63 juga memiliki layanan ini: <br><br><img src="https://habrastorage.org/webt/xt/a7/6w/xta76wp2bsjapckltfuqkl0pr2y.png"><br><br>  Untuk menerbitkan sertifikat dan daftar sertifikat yang dicabut pada layanan publik, CA pra-unggah sertifikat baik ke file ( <b><i>Sertifikat-&gt; Ekspor Sertifikat</i></b> ), atau membuat SQL dump seluruh tabel sertifikat dari mana Anda dapat membuat database sertifikat dan mengunggahnya ke, dan kemudian melakukannya SQL dump sertifikat baru dari mana mereka akan ditambahkan ke database layanan publik: <br><br><img src="https://habrastorage.org/webt/he/_d/1n/he_d1nxytwkmjwe-skvpzlzadig.png"><br><br>  Fungsi dasar CA adalah untuk menerbitkan daftar sertifikat yang dicabut, mirip dengan cara Kementerian Dalam Negeri berkenaan dengan paspor yang kedaluwarsa.  Sertifikat dapat dicabut atas permintaan pemilik.  Alasan utama pencabutan itu adalah hilangnya kunci pribadi atau hilangnya kepercayaan di dalamnya. <br><br>  Untuk mencabut sertifikat, cukup pilih pada tab "Sertifikat", klik kanan dan pilih item menu "Pencabutan Sertifikat": <br><br><img src="https://habrastorage.org/webt/ai/7p/hk/ai7phklvqrbu1a0z7yl-xi-5xxw.png"><br><br>  Prosedur pencabutan tidak berbeda dari prosedur persetujuan untuk permintaan atau penerbitan sertifikat.  Sertifikat yang dicabut jatuh ke tabel cerDBRev dari database CA dan muncul di tab "Sertifikat dicabut". <br><br>  Masih mempertimbangkan fungsi terakhir CA - pelepasan CRL - daftar sertifikat yang dicabut.  Daftar CRL terbentuk pada tab "Sertifikat Dicabut" ketika Anda mengklik tombol "Buat SOS / CRL".  Yang diperlukan administrator hanyalah memasukkan kata sandi CA dan mengonfirmasi niat Anda untuk mengeluarkan CRL: <br><br><img src="https://habrastorage.org/webt/5t/db/_c/5tdb_csh_qehcmmlaws9t75pssc.png"><br><br>  CRL yang dikeluarkan jatuh ke tabel crlDB dari database dan ditampilkan pada tab CRL / SOS. <br><br>  Untuk mem-parsing CRL sebelum menempatkannya dalam database, prosedur parse_crl ditulis: <br><br><pre> <code class="plaintext hljs">proc parse_crl {crl} { array set ret [list] if { [string range $crl 0 9 ] == "-----BEGIN" } { array set parsed_crl [::pki::_parse_pem $crl "-----BEGIN X509 CRL-----" "-----END X509 CRL-----"] set crl $parsed_crl(data) } ::asn::asnGetSequence crl crl_seq ::asn::asnGetSequence crl_seq crl_base ::asn::asnGetSequence crl_base crl_full ::asn::asnGetObjectIdentifier crl_full ret(signtype) #puts "KEY_TYPE=$ret(signtype)" ::::asn::asnGetSequence crl_base crl_issue set ret(issue) [::pki::x509::_dn_to_string $crl_issue] #puts "ISSUE=$ret(issue)" ::asn::asnGetUTCTime crl_base ret(publishDate) ::asn::asnGetUTCTime crl_base ret(nextDate) #puts "publishDate=$ret(publishDate)" return [array get ret] }</code> </pre> <br>  Untuk melihat CRL atau mengekspornya untuk publikasi pada layanan publik, Anda harus, seperti biasa, memilih baris yang diinginkan, klik tombol mouse kanan dan pilih item menu yang sesuai: <br><br><img src="https://habrastorage.org/webt/np/c7/f2/npc7f2i1qb_rvyreerzj6wrbjgc.png"><br><br>  Itu saja, Otoritas Sertifikasi siap. <br><img src="https://habrastorage.org/webt/q1/i1/vs/q1i1vspugm4raux1pq5chgyysd4.png" align="left" alt="gambar">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cari tahu</a> cara merakit dan menghubungkan OpenSSL dengan kriptografi Rusia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413493/">https://habr.com/ru/post/id413493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413481/index.html">Ekspor pohon uji dari JMeter ke teks</a></li>
<li><a href="../id413485/index.html">GitLab 10.8 dirilis: mirroring open-source push dan penyebaran tambahan</a></li>
<li><a href="../id413487/index.html">Apa yang seharusnya seorang pengembang harapkan dalam bidang keuangan: kondisi kerja, proyek, dan keterampilan yang diperlukan</a></li>
<li><a href="../id413489/index.html">Bagaimana memilih messenger yang benar-benar aman dan apa hubungannya dengan blockchain</a></li>
<li><a href="../id413491/index.html">Intisari Desain Makanan, Mei 2018</a></li>
<li><a href="../id413495/index.html">Penempatan cepat atau cara menggunakan front-end dalam 15 menit</a></li>
<li><a href="../id413499/index.html">Membuka program Master bersama di JetBrains dan ITMO</a></li>
<li><a href="../id413501/index.html">Tahun yang dihabiskan bersama React: kesimpulan dan rekomendasi</a></li>
<li><a href="../id413503/index.html">Patch saya jika Anda bisa: bagaimana kami melakukan debug pada produksi. Bagian 1</a></li>
<li><a href="../id413505/index.html">2 tiket gratis ke In-Memory Computing Summit Europe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>