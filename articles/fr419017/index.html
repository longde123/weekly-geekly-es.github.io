<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🤝‍👩🏻 ❕ 🤙🏽 Nouveautés de ConstraintLayout 1.1 🛤️ 🔀 🤟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ConstraintLayout facilite la création de mises en page complexes dans Android, vous permettant de créer la plupart de votre interface utilisateur avec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nouveautés de ConstraintLayout 1.1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419017/"><p><img src="https://habrastorage.org/getpro/habr/post_images/371/0cf/3a2/3710cf3a27947cebc4c994af73bc8c51.png" alt="Contrainte"></p><br><p> <strong>ConstraintLayout</strong> facilite la création de mises en page complexes dans Android, vous permettant de créer la plupart de votre interface utilisateur avec un éditeur visuel dans Android Studio.  Il est souvent appelé <strong>RelativeLayout,</strong> plus puissant.  Avec <strong>ConstraintLayout,</strong> vous pouvez éviter de nombreux niveaux d'imbrication lors de la disposition d'écrans complexes. </p><br><p>  La version stable de <strong>ConstraintLayout 1.1</strong> a récemment été publiée et elle semble maintenant très mature.  Son optimisation complète augmente encore ses performances et de nouveaux éléments, tels que des barrières et des groupes, transforment la création d'un design vraiment cool en une tâche plutôt triviale. </p><a name="habracut"></a><br><h3 id="android-gradle">  Android Gradle </h3><br><p>  Pour utiliser les nouvelles fonctionnalités dans le projet, vous devez ajouter <strong>ConstraintLayout 1.1</strong> au projet en tant que dépendance: </p><br><pre><code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dependencies</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">implementation</span></span> <span class="hljs-string"><span class="hljs-string">'com.android.support.constraint:constraint-layout:1.1.2'</span></span> }</code> </pre> <br><h2 id="novyy-funkcional-v-11">  Nouvelle fonctionnalité dans 1.1 </h2><br><h3 id="procenty">  Intérêt </h3><br><p>  Pour que la <strong>vue</strong> occupe un certain pourcentage de l'écran, dans <strong>ConstraintLayout 1.0,</strong> il était nécessaire d'avoir au moins deux dépendances.  Dans <strong>ConstraintLayout 1.1, la</strong> solution à ce problème a été simplifiée en spécifiant simplement un pourcentage de largeur ou de hauteur. </p><br><p>  La largeur du bouton est définie en pourcentage, et elle occupe tout l'espace libre et conserve son apparence: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e6d/618/916/e6d61891644677f3f1b77e8c4c80339c.jpg" alt="La largeur du bouton est définie en pourcentage, et elle occupe tout l'espace libre et conserve son apparence"></p><br><p>  Tous les composants <strong>View</strong> prennent en charge les <strong>attributs layout_constraintWidth_percent</strong> et <strong>layout_constraintHeight_percent</strong> .  Ils vous permettent de limiter le composant <strong>View</strong> à une valeur en pourcentage dans tout l'espace disponible.  Pour que le bouton soit étiré de 70% dans l'espace libre, vous n'avez besoin que de quelques lignes: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintWidth_percent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.7"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><h3 id="cepochki">  Chaînes </h3><br><p>  Lors du positionnement de plusieurs composants à l'aide d'une <strong>chaîne</strong> , il est possible de contrôler l'espace entre eux.  Dans la version <strong>1.1</strong> , plusieurs erreurs de chaînage ont été corrigées et elles peuvent désormais fonctionner avec un grand nombre de composants <strong>View</strong> .  Pour créer une chaîne, vous devez ajouter des dépendances des deux côtés du composant <strong>View</strong> : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/41c/84f/fe1/41c84ffe1454212afd339a0bb6200eda.gif" alt="Il existe plusieurs types de chaînes qui vous permettent de configurer l'emplacement des composants View interconnectés: spread, spread_inside et packed"></p><br><p>  Le composant principal ( <strong>tête</strong> ) <strong>View</strong> de la chaîne a la propriété d' <strong>application: layout_constraintVertical_chainStyle</strong> , qui peut être définie sur <strong>spread</strong> , <strong>spread_inside</strong> ou <strong>packed</strong> . </p><br><ul><li>  <strong>spread</strong> répartit uniformément tous les composants <strong>View</strong> de la chaîne </li><li>  <strong>spread_inside place</strong> les premier et dernier composants sur les bords et répartit uniformément le reste </li><li>  groupes <strong>emballés</strong> tous les composants au centre de la chaîne </li></ul><br><h3 id="barery">  Obstacles </h3><br><p>  Lorsque vous disposez de plusieurs composants <strong>View</strong> qui peuvent être redimensionnés dynamiquement, vous pouvez utiliser une <strong>barrière</strong> pour les limiter.  La barrière peut être positionnée au début, à la fin, en haut ou en bas de plusieurs composants.  Ceci est très similaire à la création d'un groupe de composants virtuels.  Virtuel, car ce groupe n'existe pas physiquement et ne complique donc pas la hiérarchie des composants. </p><br><p>  Les barrières sont vraiment utiles lorsque vous créez des chaînes localisées ou affichez du contenu créé par un utilisateur dont vous ne pouvez pas prédire la taille. </p><br><p>  Les barrières vous permettent de créer des dépendances sur plusieurs composants <strong>View</strong> : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/38e/c40/4a9/38ec404a9aac0d61ff8f6d4b7bec2526.gif" alt="Les barrières vous permettent de créer des dépendances sur plusieurs composants View"></p><br><p>  La barrière est toujours située directement à l'extérieur du groupe virtuel et peut être utilisée pour créer des dépendances avec d'autres composants <strong>View</strong> .  Dans cet exemple, le composant <strong>Vue</strong> de droite est toujours à la fin du composant le plus long du groupe virtuel. </p><br><h3 id="gruppy">  Les groupes </h3><br><p>  Parfois, vous devez afficher ou masquer plusieurs composants à la fois.  C'est pourquoi des <strong>groupes</strong> ont été ajoutés à <strong>ConstraintLayout</strong> . </p><br><p>  Le groupe n'ajoute pas de niveau d'imbrication supplémentaire à la hiérarchie des composants <strong>View</strong> .  Un groupe n'est qu'un moyen d'unification virtuelle.  Dans l'exemple ci-dessous, nous combinons <strong>profile_name</strong> et <strong>profile_image</strong> sous un même id - <strong>profile</strong> . </p><br><p>  Ceci est utile lorsque plusieurs composants apparaissent ou se cachent ensemble. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.constraint.Group</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/profile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:constraint_referenced_ids</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"profile_name,profile_image"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Après avoir créé le groupe de <strong>profils</strong> , vous pouvez modifier la visibilité de l'ensemble du groupe et il sera appliqué à la fois à <strong>nom_profil</strong> et à <strong>image_profil</strong> . </p><br><pre> <code class="java hljs">profile.visibility = GONE profile.visibility = VISIBLE</code> </pre> <br><h3 id="krugovye-zavisimosti">  Dépendances circulaires </h3><br><p>  Dans <strong>ConstraintLayout, la</strong> plupart des dépendances et restrictions sont définies par la taille de l'écran - horizontale et verticale.  <strong>La disposition de contraintes 1.1</strong> introduit un nouveau type de dépendance - <strong>constraintCircle</strong> , qui vous permet de spécifier des dépendances dans un cercle.  Au lieu des retraits horizontaux et verticaux, vous pouvez spécifier l'angle et le rayon du cercle.  Ceci est pratique pour les composants de <strong>vue</strong> inclinés tels qu'un menu radial! </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/64b/5ef/56f/64b5ef56fe70d4949da87ea2104fad6e.gif" alt="Vous pouvez créer des menus radiaux en définissant le rayon et l'angle de décalage"></p><br><p>  Lors de la création de dépendances circulaires, les angles commencent en haut et changent dans le sens horaire.  Par exemple, de cette façon, vous devez décrire le bouton du milieu dans l'exemple ci-dessus: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.design.widget.FloatingActionButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/middle_expanded_fab"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintCircle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/fab"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintCircleRadius</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"50dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintCircleAngle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"315"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><h3 id="animaciya-s-constraintset">  Animation avec ConstraintSet </h3><br><p>  <strong>ConstraintLayout</strong> peut être utilisé avec <strong>ConstraintSet</strong> pour animer plusieurs éléments à la fois.  <strong>ConstraintSet</strong> ne fonctionne qu'avec les dépendances de <strong>ConstraintLayout</strong> .  <strong>ConstraintSet</strong> peut être créé dans le code ou ajouté directement à un fichier <strong>xml</strong> . </p><br><p>  Pour démarrer l'animation, utilisez <strong>TransitionManager.beginDelayedTransition () `de la</strong> bibliothèque de support <strong>.</strong>  <strong>Cette fonction lancera toutes les animations définies dans</strong> ConstraintSet **. </p><br><p>  Dans cette vidéo, vous pouvez en apprendre un peu plus sur ce sujet: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/OHcfs6rStRo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="novye-optimizacii">  De nouvelles optimisations </h3><br><p>  <strong>ConstraintLayout 1.1</strong> ajoute plusieurs nouvelles optimisations qui augmentent ses performances.  Des optimisations sont effectuées afin de réduire le nombre de dépendances requises pour l'emplacement des composants <strong>View</strong> à l'écran. </p><br><p>  L'essence des optimisations est de se débarrasser des constantes redondantes dans les mises en page. </p><br><p>  Un nouvel attribut est apparu - <strong>layout_optimizationLevel</strong> , qui ajuste le niveau d'optimisation.  Il peut être défini sur les valeurs suivantes: </p><br><ul><li>  <strong>barrières localise les</strong> barrières et les remplace par des dépendances plus simples </li><li>  <strong>direct</strong> optimise les composants directement connectés à d'autres composants fixes, tels que les côtés de l'écran, et continue d'optimiser tous les composants qui leur sont directement liés </li><li>  <strong>standard</strong> est l'optimisation par défaut, qui comprend des <strong>barrières</strong> et <strong>des</strong> </li><li>  <strong>dimensions</strong> est actuellement une optimisation expérimentale et peut entraîner certains problèmes.  Optimise la mise en page en calculant les dimensions </li><li>  <strong>les chaînes</strong> sont actuellement également en phase expérimentale.  Optimise le chaînage des composants avec des dimensions fixes </li></ul><br><p>  Si vous voulez essayer des optimisations expérimentales des <strong>dimensions</strong> et des <strong>chaînes</strong> , vous devez les inclure dans <strong>ConstraintLayout</strong> avec </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.constraint.ConstraintLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_optimizationLevel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"standard|dimensions|chains"</span></span></span></span></code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419017/">https://habr.com/ru/post/fr419017/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419005/index.html">Excursion au poste 220/110/20</a></li>
<li><a href="../fr419007/index.html">Textures for 64k intro: comment c'est fait aujourd'hui</a></li>
<li><a href="../fr419009/index.html">clang et IDE: une histoire d'amitié et d'amitié</a></li>
<li><a href="../fr419011/index.html">Jinja2 dans le monde C ++, deuxième partie. Rendu</a></li>
<li><a href="../fr419013/index.html">Attribution basée sur l'entonnoir pour les entreprises SaaS B2B - car nous avons considéré la valeur de tous les efforts de marketing</a></li>
<li><a href="../fr419019/index.html">AlterEgo: un appareil qui peut lire (certaines) pensées</a></li>
<li><a href="../fr419021/index.html">Les principaux types d'impression et leurs fonctionnalités</a></li>
<li><a href="../fr419023/index.html">Comment nous avons fait évoluer Nginx et sauvons le monde 54 ans d'attente chaque jour</a></li>
<li><a href="../fr419025/index.html">@Pythonetc compilation, juillet 2018</a></li>
<li><a href="../fr419027/index.html">Sécurité de l'information des paiements bancaires sans espèces. Partie 6 - Analyse de la criminalité bancaire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>