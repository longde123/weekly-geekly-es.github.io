<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüî¨ ‚òÆÔ∏è üîà StealthWatch: Bereitstellung und Anpassung. Teil 2 üëºüèª üë©üèø‚Äçü§ù‚Äçüë©üèº üôåüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Kollegen! Nachdem wir im letzten Teil die Mindestanforderungen f√ºr die Bereitstellung von StealthWatch festgelegt haben, k√∂nnen wir mit der Bere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>StealthWatch: Bereitstellung und Anpassung. Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tssolution/blog/461831/"><img src="https://habrastorage.org/webt/el/jd/3y/eljd3ycrtg2yb7ifax-um20gnje.png"><br><br>  Hallo Kollegen!  Nachdem wir im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">letzten Teil</a> die Mindestanforderungen f√ºr die Bereitstellung von StealthWatch festgelegt haben, k√∂nnen wir mit der Bereitstellung des Produkts beginnen. <br><br><h3>  1. M√∂glichkeiten zur Bereitstellung von StealthWatch </h3><br>  Es gibt verschiedene M√∂glichkeiten, StealthWatch zu ‚Äûber√ºhren‚Äú: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dcloud</a> - ein Cloud-Lab-Service; </li><li>  Cloud-basiert: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stealthwatch Cloud Free Trial</a> - hier wird der Netflow von Ihrem Ger√§t in die Cloud gestreut und die StealthWatch-Software dort analysiert. </li><li>  On-Premise-POV ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GVE-Anforderung</a> ) - so wie ich es gemacht habe, werden 90 Tage lang 4 OVF-Dateien von virtuellen Maschinen mit integrierten Lizenzen gel√∂scht, die auf einem dedizierten Server im Unternehmensnetzwerk bereitgestellt werden k√∂nnen. </li></ul><a name="habracut"></a><br>  Trotz der F√ºlle heruntergeladener virtueller Maschinen reichen f√ºr eine minimale Arbeitskonfiguration nur zwei aus: StealthWatch Management Console und FlowCollector.  Wenn es jedoch kein Netzwerkger√§t gibt, das Netflow in einen FlowCollector exportieren kann, m√ºssen Sie FlowSensor bereitstellen, da letzteres das Sammeln von Netflow mithilfe von SPAN / RSPAN-Technologien erm√∂glicht. <br><br>  Wie ich bereits sagte, kann Ihr reales Netzwerk als Laborstand fungieren, da StealthWatch nur eine Kopie ben√∂tigt oder, genauer gesagt, eine Kopie des Datenverkehrs komprimiert.  Die folgende Abbildung zeigt mein Netzwerk, in dem ich auf dem Security Gateway Netflow Exporter konfiguriere und als Ergebnis Netflow an den Collector sende. <br><br><img src="https://habrastorage.org/webt/zq/-h/qq/zq-hqqpztzl9obji7bgzo_65-jq.png"><br><br>  Um auf zuk√ºnftige VMs zuzugreifen, sollten in Ihrer Firewall (falls vorhanden) die folgenden Ports aktiviert sein: <br><br>  <b>TCP 22 l TCP 25 l TCP 389 l TCP 443 l TCP 2393 l TCP 5222 l UDP 53 l UDP 123 l UDP 161 l UDP 162 l UDP 389 l UDP 514 l UDP 2055 l UDP 6343</b> <br><br>  Einige von ihnen sind bekannte Dienste, andere sind f√ºr Cisco-Dienste reserviert. <br>  In meinem Fall habe ich StelathWatch gerade im selben Netzwerk wie Check Point bereitgestellt und musste keine Berechtigungsregeln konfigurieren. <br><br><h3>  2. Installieren von FlowCollector am Beispiel von VMware vSphere </h3><br>  2.1.  Klicken Sie auf Durchsuchen und w√§hlen Sie OVF-Datei1 aus.  Nachdem Sie die Verf√ºgbarkeit der Ressourcen √ºberpr√ºft haben, rufen Sie das Men√º Ansicht unter Inventar ‚Üí Netzwerk (Strg + Umschalt + N) auf. <br><br><img src="https://habrastorage.org/webt/v6/xz/xg/v6xzxgemxql11zyz7digodat_dc.png"><br><br>  2.2.  W√§hlen Sie auf der Registerkarte Netzwerk in den Einstellungen f√ºr virtuelle Switches die Option Neue verteilte Portgruppe aus. <br><br><img src="https://habrastorage.org/webt/nr/ta/3t/nrta3ti4d3syipr_7kqwklxkjyk.png"><br><br>  2.3.  Wir setzen den Namen, lassen Sie es StealthWatchPortGroup sein, die restlichen Einstellungen k√∂nnen wie im Screenshot vorgenommen werden und klicken auf Weiter. <br><br><img src="https://habrastorage.org/webt/nz/lj/z5/nzljz5wsrlnbc__gmvmu1yy2pzk.png"><br><br><img src="https://habrastorage.org/webt/el/77/6p/el776psiknbm1qrl21trgmjkiyw.png"><br><br>  2.4.  Wir schlie√üen die Erstellung der Portgruppe mit der Schaltfl√§che Fertig stellen ab. <br><br><img src="https://habrastorage.org/webt/ev/nx/dm/evnxdmxaofyxqyufr2igey6noi4.png"><br><br>  2.5.  Bearbeiten Sie in der erstellten Portgruppe die Einstellungen, indem Sie mit der rechten Maustaste auf die Portgruppe klicken und Einstellungen bearbeiten ausw√§hlen.  Stellen Sie auf der Registerkarte Sicherheit sicher, dass der unh√∂rbare Modus Promiscuous Mode ‚Üí Accept ‚Üí OK aktiviert ist. <br><br><img src="https://habrastorage.org/webt/j3/ga/-s/j3ga-sx9-lb6xfc5aah3ixk9cvi.png"><br><br>  2.6.  Als Beispiel importieren wir OVF FlowCollector, dessen Download-Link von einem Cisco-Techniker nach einer GVE-Anfrage gesendet wurde.  Klicken Sie mit der rechten Maustaste auf den Host, auf dem Sie die VM bereitstellen m√∂chten, und w√§hlen Sie OVF-Vorlage bereitstellen aus.  In Bezug auf den zugewiesenen Speicherplatz wird es bei 50 GB "gestartet", aber f√ºr Kampfbedingungen wird empfohlen, 200 Gigabyte zuzuweisen. <br><br><img src="https://habrastorage.org/webt/fb/gc/3a/fbgc3augeta-akzjk1py4ikglzg.png"><br><br>  2.7.  W√§hlen Sie den Ordner aus, in dem sich die OVF-Datei befindet. <br><br><img src="https://habrastorage.org/webt/sl/j3/_z/slj3_zkycimo6o9wnkvpty2e6jq.png"><br><br>  2.8.  Klicken Sie auf "Weiter". <br><br><img src="https://habrastorage.org/webt/tl/0e/dn/tl0ednjv5tdfxhryi1n9i1xuvrw.png"><br><br>  2.9.  Wir geben den Namen und den Server an, auf dem wir ihn bereitstellen. <br><br><img src="https://habrastorage.org/webt/-n/ai/le/-naileut5oywhdn7cpbb7ff1bvs.png"><br><br>  2.10.  Als Ergebnis erhalten wir das folgende Bild und klicken auf "Fertig stellen". <br><br><img src="https://habrastorage.org/webt/xf/c6/kg/xfc6kgbvccpwusqahl5lwqxhjr4.png"><br><br>  2.11.  Wir f√ºhren dieselben Schritte aus, um die StealthWatch-Verwaltungskonsole bereitzustellen. <br><br><img src="https://habrastorage.org/webt/pl/oc/ek/plocekjtzimzvxg8tjwgpkatb1i.png"><br><br>  2.12.  Jetzt m√ºssen Sie die erforderlichen Netzwerke in den Schnittstellen angeben, damit FlowCollector sowohl die SMC als auch die Ger√§te sieht, von denen Netflow exportiert wird. <br><br><h3>  3. Initialisieren der StealthWatch Management Console </h3><br>  3.1.  Wenn Sie zur Konsole des installierten SMCVE-Computers gehen, sehen Sie einen Ort, an dem Sie Ihr Login und Passwort eingeben k√∂nnen (standardm√§√üig <b>sysadmin / lan1cope)</b> . <br><br><img src="https://habrastorage.org/webt/ji/c2/rx/jic2rxycyyjhf-abh4jm80upnpy.png"><br><br>  3.2.  Wir gehen zum Verwaltungspunkt, stellen die IP-Adresse und andere Netzwerkparameter ein und best√§tigen deren √Ñnderung.  Das Ger√§t wird neu gestartet. <br><br><img src="https://habrastorage.org/webt/z0/oz/qe/z0ozqewtvkxzcnhnm0g4oiwjcgu.png"><br><br><img src="https://habrastorage.org/webt/yq/72/df/yq72dfk7prajwydts60rspvumxe.png"><br><br><img src="https://habrastorage.org/webt/i7/ae/li/i7aeli91n8tshejaf6bd7nxa8jm.png"><br><br>  3.3.  Gehen Sie zur Weboberfl√§che (√ºber https an die von Ihnen angegebene Adresse SMC) und initialisieren Sie die Konsole. Der Standardbenutzername / das Standardkennwort lautet <b>admin / lan411cope</b> . <br><br>  PS: Es kommt vor, dass Google Chrome nicht ge√∂ffnet wird. Der Explorer hilft immer weiter. <br><br><img src="https://habrastorage.org/webt/zd/xs/gj/zdxsgjmf5jx1sytnvxk6ycxafom.png"><br><br>  3.4.  Stellen Sie sicher, dass Sie Kennw√∂rter √§ndern, DNS, NTP-Server, Domain und mehr festlegen.  Die Einstellungen sind intuitiv. <br><br><img src="https://habrastorage.org/webt/js/aa/jq/jsaajq0ie-2efa4bimgh9w026jo.png"><br><br>  3.5.  Nach dem Klicken auf die Schaltfl√§che ‚Äû√úbernehmen‚Äú wird das Ger√§t erneut neu gestartet.  Nach 5-7 Minuten k√∂nnen Sie erneut eine Verbindung zu dieser Adresse herstellen.  StealthWatch wird √ºber eine Weboberfl√§che verwaltet. <br><br><img src="https://habrastorage.org/webt/00/y5/ze/00y5zegb4ienavlp-8q5alarysa.png"><br><br><h3>  4. FlowCollector einstellen </h3><br>  4.1.  Mit dem Sammler trotzdem.  Geben Sie zun√§chst in der CLI die IP-Adresse, die Maske und die Dom√§ne an. Anschlie√üend wird der FC neu gestartet.  Danach k√∂nnen Sie unter der angegebenen Adresse eine Verbindung zur Weboberfl√§che herstellen und dieselbe Grundeinstellung durchf√ºhren.  Aufgrund der √§hnlichen Einstellungen werden detaillierte Screenshots weggelassen.  Die <b>Anmeldeinformationen</b> <b>sind identisch</b> . <br><br><img src="https://habrastorage.org/webt/7l/lx/dr/7llxdr6wrexyw0u-b92hpb7hhja.png"><br><br>  4.2.  Im vorletzten Element m√ºssen Sie die IP-Adresse der SMC angeben. In diesem Fall sieht die Konsole das Ger√§t. Sie m√ºssen diesen Berechtigungsnachweis eingeben, um diese Einstellung zu best√§tigen. <br><br><img src="https://habrastorage.org/webt/ra/44/yd/ra44ydcvqg-127ysgub3ud5cvse.png"><br><br>  4.3.  Wir w√§hlen die Dom√§ne f√ºr StealthWatch aus, sie wurde zuvor festgelegt, und Port <b>2055</b> ist normaler Netflow, wenn Sie mit sFlow arbeiten, Port <b>6343</b> . <br><br><img src="https://habrastorage.org/webt/xb/x3/ht/xbx3htreuzwgzeo0y8r5t-ftzhi.png"><br><br><h3>  5. Netflow Exporter-Konfiguration </h3><br>  5.1.  Ich empfehle dringend, auf diese <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ressource zu</a> verweisen, um den Netflow-Exporter zu konfigurieren. Hier finden Sie die wichtigsten Anleitungen zum Konfigurieren des Netflow-Exporters f√ºr viele Ger√§te: Cisco, Check Point, Fortinet. <br><br>  5.2.  In unserem Fall, wiederhole ich, exportieren wir Netflow vom Check Point-Gateway.  Der Netflow-Exporter wird in einer Registerkarte mit einem √§hnlichen Namen in der Weboberfl√§che (Gaia Portal) konfiguriert.  Klicken Sie dazu auf "Hinzuf√ºgen", geben Sie die Version von Netflow und den erforderlichen Port an. <br><br><img src="https://habrastorage.org/webt/yb/lw/jh/yblwjhnrugni5pkjyygj9ty4to4.png"><br><br><h3>  6. Analyse der Arbeit von StealthWatch </h3><br>  6.1.  Wenn Sie zur SMC-Weboberfl√§che gehen, k√∂nnen Sie auf der allerersten Seite von Dashboards&gt; Netzwerksicherheit sehen, dass der Datenverkehr verschwunden ist! <br><br><img src="https://habrastorage.org/webt/l0/h2/e8/l0h2e8gr3wnp2hrzomrmo7fsj24.png"><br><br>  6.2.  Einige Einstellungen, z. B. das Aufteilen von Hosts in Gruppen, das √úberwachen einzelner Schnittstellen, deren Arbeitslast, das Verwalten von Kollektoren usw., sind nur in der Java-Anwendung StealthWatch enthalten.  Nat√ºrlich √ºbertr√§gt Cisco langsam alle Funktionen auf die Browserversion, und bald werden wir einen solchen Desktop-Client ablehnen. <br><br>  Um die Anwendung zu installieren, m√ºssen Sie zuerst die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JRE</a> (ich habe Version 8 installiert, obwohl gesagt wird, dass sie bis zu 10 unterst√ºtzt) von der offiziellen Oracle-Site installieren. <br><br>  Klicken Sie zum Herunterladen in der oberen rechten Ecke der Weboberfl√§che der Verwaltungskonsole auf die Schaltfl√§che "Desktop Client". <br><br><img src="https://habrastorage.org/webt/70/66/xi/7066xidd88ts1ssot58-9nzyap8.png"><br><br>  Wenn Sie den Client zwangsweise speichern und installieren, wird Java h√∂chstwahrscheinlich darauf schw√∂ren. M√∂glicherweise m√ºssen Sie den Host zu Java-Ausnahmen hinzuf√ºgen. <br><br>  Infolgedessen wird ein ziemlich verst√§ndlicher Client ge√∂ffnet, in dem das Laden von Exporteuren, Schnittstellen, Angriffen und deren Abl√§ufen leicht zu sehen ist. <br><br><img src="https://habrastorage.org/webt/by/d6/id/byd6idovrokyvikqntkugvz62bk.png"><br><br><img src="https://habrastorage.org/webt/k_/if/s6/k_ifs69lxeh7pgcl0zvgwibjpzq.png"><br><br><img src="https://habrastorage.org/webt/tm/q5/uf/tmq5ufnvltaw7y4eogtcknps348.png"><br><br><h3>  7. StealthWatch Central Management </h3><br>  7.1.  Die Registerkarte Zentrale Verwaltung enth√§lt alle Ger√§te, die Teil der bereitgestellten StealthWatch sind, z. B. FlowCollector, FlowSensor, UDP-Director und Endpoint Concetrator.  Dort k√∂nnen Sie Netzwerkeinstellungen und Ger√§tedienste sowie Lizenzen verwalten und das Ger√§t manuell ausschalten. <br><br>  Sie k√∂nnen dorthin gelangen, indem Sie auf das "Zahnrad" in der oberen rechten Ecke klicken und Zentralverwaltung ausw√§hlen. <br><br><img src="https://habrastorage.org/webt/dk/v5/nm/dkv5nm85eznmmvcbhaill9yfuha.png"><br><br><img src="https://habrastorage.org/webt/ho/6d/wl/ho6dwlzdrzo-lkeeos0dxjdm3zs.png"><br><br>  7.2.  Wenn Sie in FlowCollector die Appliance-Konfiguration bearbeiten aufrufen, werden SSH-, NTP- und andere Netzwerkeinstellungen angezeigt, die sich auf die Anwendung selbst beziehen.  Um fortzufahren, w√§hlen Sie auf dem gew√ºnschten Ger√§t Aktionen ‚Üí Appliance-Konfiguration bearbeiten. <br><br><img src="https://habrastorage.org/webt/b7/wp/wq/b7wpwq31kcjpe98gaj7qfximmzg.png"><br><br><img src="https://habrastorage.org/webt/b4/ty/1g/b4ty1gu-jm9gi4kugiyc-xdepja.png"><br><br><img src="https://habrastorage.org/webt/ca/gl/tp/cagltpj2itdngisbjgbrn9pannw.png"><br><br>  7.3.  Die Lizenzverwaltung finden Sie auch auf der Registerkarte Zentrale Verwaltung&gt; Lizenzen verwalten.  Testlizenzen f√ºr den Fall einer GVE-Anfrage werden f√ºr <b>90 Tage</b> erteilt. <br><br><img src="https://habrastorage.org/webt/gl/1u/s0/gl1us0nbplbvjoke3mkczz8gb3q.png"><br><br>  Das Produkt ist einsatzbereit!  Im n√§chsten Teil werden wir untersuchen, wie StealthWatch Angriffe erkennen und Berichte erstellen kann. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461831/">https://habr.com/ru/post/de461831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461819/index.html">Warum einfaches Website-Design wissenschaftlich besser ist</a></li>
<li><a href="../de461821/index.html">Neue Immuntherapie entfernte alle Tumoren bei einer Frau mit metastasiertem Brustkrebs</a></li>
<li><a href="../de461823/index.html">Erweiterte vier Regeln f√ºr das Software-Design</a></li>
<li><a href="../de461827/index.html">Entwicklung hybrider PHP / Go-Anwendungen mit RoadRunner</a></li>
<li><a href="../de461829/index.html">TCP vs UDP oder die Zukunft der Netzwerkprotokolle</a></li>
<li><a href="../de461833/index.html">Verlieren Sie sich nicht in drei Kiefern: einer egozentrischen Darstellung der Umwelt</a></li>
<li><a href="../de461835/index.html">Wie Gantt-Diagramme das Projektmanagement vereinfachen und st√§rken</a></li>
<li><a href="../de461841/index.html">PVS-Studio untersuchte die Bullet Engine der Red Dead Redemption</a></li>
<li><a href="../de461845/index.html">Investitionen an der B√∂rse als Mittel zur Erhaltung der Finanzen: 3 Arbeitsmethoden</a></li>
<li><a href="../de461849/index.html">PVS-Studio warf einen Blick auf die Red Dead Redemption Engine - Bullet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>