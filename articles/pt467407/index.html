<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîó üïë üê§ Trabalhamos com o cobot Dobot M1 üõµ üë®‚Äçüåæ üöù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° um ano, em Habr√©, foi lan√ßada a revis√£o do rob√¥ de mesa Dobot Magician. Neste artigo, proponho avaliar seu irm√£o mais velho Dobot M1 em a√ß√£o. Tamb√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trabalhamos com o cobot Dobot M1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467407/">  H√° um ano, em Habr√©, foi lan√ßada a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">revis√£o do</a> rob√¥ de mesa Dobot Magician.  Neste artigo, proponho avaliar seu irm√£o mais velho Dobot M1 em a√ß√£o.  Tamb√©m tentarei explicar por que escolhi esse modelo espec√≠fico para o meu projeto, descreverei o processo de desenvolvimento da demo em Qt / c ++, bem como alguns momentos desagrad√°veis ‚Äã‚Äãque encontrei durante o processo de desenvolvimento. <br><a name="habracut"></a><br><h1>  1. Introdu√ß√£o </h1><br>  Este ano, trabalhei em um dos institutos de pesquisa mais comuns.  No in√≠cio, tudo era bastante casual, e o ano n√£o prometeu nada de interessante, at√© que um dia em um com√≠cio come√ßou uma discuss√£o sobre como fazer a montagem de c√©lulas solares em mosaico (c√©lulas solares com telhas).  Essa abordagem n√£o √© novidade, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dizem eles</a> , √© uma das primeiras maneiras de montar pain√©is para sat√©lites espaciais. <br><br>  N√£o sei se isso √© verdade porque n√£o vi artigos ou patentes.  Mas o interesse do p√∫blico por essa decis√£o aumentou, em parte tamb√©m porque h√° alguns anos a SunPower lan√ßou seus novos pain√©is, que chamou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">de s√©rie P.</a>  Aconteceu no mundo da energia fotovoltaica que, como a sanpower est√° fazendo algo, todos devem fazer isso tamb√©m.  L√° estamos n√≥s.  Tudo √© simples: preparamos os substratos, cortamos em tiras e montamos.  Naquele momento, notei que, pessoalmente, definitivamente n√£o colecionava nada manualmente, porque minhas m√£os n√£o diferiam em particular uniformidade.  Caso contr√°rio, o resultado pode ser algo como um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√≠deo</a> no YouTube.  E n√≥s, afinal, somos uma institui√ß√£o inteira, se realmente fazemos algo, n√£o √© uma fazenda t√£o coletiva.  Ofereci-me para comprar rob√¥s e configur√°-los para o processo desejado, e eles me deram o aval. <br><br>  Vale ressaltar que decidimos come√ßar a montar pain√©is mais simples e mais simples.  Um minipainel √© qualquer painel solar menor que o padr√£o.  Fazemos isso para elaborar processos tecnol√≥gicos.  Primeiro, fui guiado por um painel com o tamanho de uma c√©lula solar padr√£o com planos de dimensionamento para um painel de 2 x 2. O tamanho do lado de uma c√©lula solar √© de 16 cm, portanto, eram necess√°rios rob√¥s com um campo de acesso de 32 x 32 cm. .  Ent√£o, armado com uma barra de pesquisa, comecei a estudar as frases.  Decidi que 6 eixos n√£o s√£o necess√°rios para o projeto, 4 s√£o suficientes, ent√£o a escolha foi reduzida a rob√¥s como uma cicatriz.  Descobri que a compra de rob√¥s industriais √© acompanhada de despesas adicionais, como projetar um espa√ßo de trabalho seguro e deixar o engenheiro de aplica√ß√£o no local da instala√ß√£o, que programa o rob√¥ para sua tarefa.  Bons rob√¥s industriais s√£o caros em princ√≠pio, e os servi√ßos dos engenheiros aumentar√£o ainda mais o pre√ßo; al√©m disso, foi interessante implementar o projeto voc√™ mesmo.  Portanto, a escolha reduziu-se a cobots, rob√¥s colaborativos, com requisitos de seguran√ßa mais baixos e mais amig√°veis ‚Äã‚Äãpara a auto-prototipagem.  Ent√£o, eu rapidamente encontrei a empresa Dobot.  Eu imediatamente larguei o Dobot Magician por causa do tamanho e precis√£o, que √© de 100 m√≠crons.  Escrevi-lhes um pedido para dar especifica√ß√µes e disse onde comprar.  Descobri que com APIs existem APIs e elas podem ser programadas em C ++.  Combinava comigo, mas n√£o podia compr√°-lo diretamente.  Felizmente, encontrei um fornecedor na Holanda que me vendeu 2 pe√ßas por 8700 euros com IVA, entregues na China e, ao mesmo tempo, assumi todo o desembara√ßo aduaneiro. <br><br><h1>  Apresenta gentileza </h1><br><img src="https://habrastorage.org/webt/eq/li/v_/eqliv_l21t5_qnph5vis0kjci9m.jpeg"><br><br>  O Dobot M1 est√° posicionado como um rob√¥ colaborativo profissional de 4 eixos acess√≠vel.  Pode suportar at√© 1,5 kg de carga (n√£o testada), tem um alcance de at√© 400 mm (n√£o em todos os lugares) e precis√£o de at√© 20 m√≠crons (verificado).  O espa√ßo de trabalho da bondade √© visto na figura abaixo.  N√£o √© dif√≠cil notar que, devido √†s caracter√≠sticas do projeto, existe uma zona cega com um raio de pouco menos de 15 cent√≠metros na frente.  Al√©m disso, este mapa espacial n√£o leva em considera√ß√£o a orienta√ß√£o da m√£o.  O Dobot pode ser destro ou canhoto, ainda n√£o descobri como isso pode ser ativado em qualquer lugar sem calibra√ß√£o adicional.  Por padr√£o, o Dobot √© destro, o que significa que a zona direita √© limitada pela √°rea de acesso da 2¬™ articula√ß√£o, quando a primeira articula√ß√£o √© direcionada para a direita.  Portanto, a √°rea real da √°rea de trabalho √© cerca de 2/3 do que √© mostrado no desenho oficial. <br><br><img src="https://habrastorage.org/webt/qf/bv/dp/qfbvdpisi2sc2pbc62vg38miyko.png"><br><br>  O Goodness possui portas de E / S: entradas e sa√≠das digitais com n√≠veis de 24 V (os n√≠veis padr√£o s√£o altos), bem como entradas anal√≥gicas.  Que tipo de ADC existe, eu n√£o sei.  As portas est√£o dispon√≠veis no painel traseiro no suporte e na pr√≥pria m√£o para trabalhar com bicos.  Esqueci de fotografar o conector no pr√≥prio bra√ßo, mas √© um tipo de CAA.  H√° tamb√©m uma interface de expans√£o para a qual voc√™ pode comprar uma taxa adicional.  O Dobot se conecta a um PC via RS-232 ou atrav√©s de uma rede. <br><br><img src="https://habrastorage.org/webt/wx/jp/tx/wxjptxd8lxcgzk7z7orkbmi-hri.png"><br><br>  Material da carca√ßa: policarbonato, aparentemente, al√©m de um suporte de metal pintado de preto.  Esse design n√£o causa um senso de pr√™mio, mas tamb√©m um senso de artes√£o.  Comprei um totalmente carregado e um na base.  N√£o testei o bico laser e a impress√£o 3D. <br><br>  Para testar a bondade da bondade, usei o programa M1Studio para Windows, que √© baixado do site da empresa.  Mas isso √© tudo.  Al√©m disso, armado com API, Qt e uma esta√ß√£o de trabalho com vespas elementares, sentei-me para escrever uma demonstra√ß√£o para trabalhar com v√°rios altos e baixos. <br><br><h1>  Estamos escrevendo uma demo </h1><br>  Na verdade, a demonstra√ß√£o j√° est√° dispon√≠vel no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> .  √â poss√≠vel fazer o download da documenta√ß√£o para API e protocolo de comunica√ß√£o no site do fabricante. <br><br>  Primeiro, usamos o m√©todo SearchDobot () da api, que n√£o mostrava nada no Linux, e s√≥ funcionava no Windows se o dobot estivesse conectado via RS-232.  √â estranho, porque o M1Studiya define perfeitamente dobotov pela rede.  Com endere√ßos IP conhecidos, o m√©todo ConnectDobot () funciona perfeitamente.  Est√° tudo bem, pensei, vou configurar o roteador e deixar o endere√ßo IP ser anexado √† papoula.  No dia seguinte, fiquei surpreso com o fato de as gentilezas n√£o reagirem.  Aconteceu que, quando ligado, o dobot tem um endere√ßo aleat√≥rio de papoula.  Esse √© um recurso do firmware, que foi corrigido na nova vers√£o em maio, mas que eu, no entanto, tinha medo de instalar. <br><br>  Armado com um programa para analisar pacotes de rede, descobri que o Dobot responde √† solicita√ß√£o UDP para a porta 6000 com o texto "WhoisDobotM1" resposta UDP com texto contendo o n√∫mero do modelo do Dobot.  Com base nisso, foi criado um m√©todo personalizado que envia solicita√ß√µes por toda a sub-rede e, no caso de uma resposta, inicializa a gentileza. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MainWindow::on_buttonSearch_clicked() { QHostAddress host; QList&lt;QHostAddress&gt; <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> = QNetworkInterface::allAddresses(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.count(); i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((!<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i).isLoopback()) &amp;&amp; (<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i).protocol() == QAbstractSocket::IPv4Protocol)) host = <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i); } QString subnet = host.toString().section(<span class="hljs-string"><span class="hljs-string">'.'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">"."</span></span>; QByteArray data = <span class="hljs-string"><span class="hljs-string">"WhoisDobotM1"</span></span>; QUdpSocket udpSocketSend; udpSocketSend.writeDatagram(data);<span class="hljs-comment"><span class="hljs-comment">//need tocall it otherwise in Win get socket doesn't open udpSocketSend.bind(host, 54321, QAbstractSocket::ShareAddress); udpSocketGet.bind(host, udpSocketSend.localPort(), QAbstractSocket::ShareAddress); connect(&amp;udpSocketGet, &amp;QUdpSocket::readyRead, this, &amp;MainWindow::readUdpData); for (int i=1; i&lt;255; i++) udpSocketSend.writeDatagram(data, 32, QHostAddress(subnet + QString::number(i)), 6000); }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MainWindow::readUdpData() { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (udpSocketGet.hasPendingDatagrams()) { QNetworkDatagram data = udpSocketGet.receiveDatagram(); QByteArray ip = data.senderAddress().toString().toUtf8(); QString name = QString(data.data()).section(<span class="hljs-string"><span class="hljs-string">'_'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// cuts "dobotM1" from "dobotM1_Dobot M1_0033\x00" if (name == "dobotM1") { MyDobot* a = new MyDobot(); dobot-&gt;push_back(a); dobot-&gt;last()-&gt;initDobot(ip); ui-&gt;listDobots-&gt;addItem(ip); on_listDobots_activated(ui-&gt;listDobots-&gt;currentIndex()); } } }</span></span></code> </pre><br>  A interface de demonstra√ß√£o √© bastante simples e √© apresentada na figura abaixo. <br><br><img src="https://habrastorage.org/webt/p1/t1/ym/p1t1ym-u5v1th1j0qwacwvrc3w8.png"><br><br>  Para inicializar e controlar a gentileza, escrevi uma classe na qual realizava as fun√ß√µes necess√°rias: controle de eixo, movimento de ponto a ponto em uma linha reta e em uma curva, retorno √† posi√ß√£o inicial, controle da bomba de ar e tamb√©m monitoramento de posi√ß√µes e erros.  Vamos nos revezar.  Quando a classe √© inicializada, o endere√ßo IP da gentileza √© armazenado na vari√°vel, a primeira conex√£o a ela ocorre, toda a fila de comandos √© limpa, mesmo que a fila esteja vazia, e os par√¢metros de acelera√ß√£o e velocidade dos motores s√£o definidos. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyDobot</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QObject { Q_OBJECT <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">explicit</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyDobot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QObject *parent = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">nullptr</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; ~MyDobot(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initDobot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QByteArray IPaddress)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Pose </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCurrentPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goHomeSafe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goHome</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goSafe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goPositionStraight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goJog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAirPump</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> status, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> direction)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">//status 1 off 0 on; direction 0 suck 1 push void setOutput(uint8_t address, uint8_t level); void setMotor(int velocity, int acceleration); alarmState getAlarms(); void clearAlarms(); void clearQueue(); QString getName(); public slots: private: char deviceSN[64]; char deviceName[64]; QByteArray thisDobotIP; Pose currentPosition, futurePosition; };</span></span></code> </pre><br>  Decidi usar um vetor com elementos da minha classe para controlar o dobot quando seu n√∫mero √© maior que 1. Cada elemento do vetor tem uma vari√°vel que armazena o endere√ßo IP do dobot.  Porque  a biblioteca √© uma e existem v√°rios dobotov; em cada m√©todo da classe, voc√™ deve primeiro chamar o m√©todo de conex√£o com um dobot espec√≠fico.  Pode parecer torto, mas est√° tudo escondido, e trabalhar com essa classe √© muito conveniente. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MyDobot::setAirPump(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> status, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> direction) { ConnectDobot(thisDobotIP, <span class="hljs-number"><span class="hljs-number">115200</span></span>, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>); ...</code> </pre><br>  O movimento de um ponto a outro no API Goodness √© implementado por v√°rios m√©todos: em uma linha reta, em uma curva e de alguma outra maneira que n√£o me lembro.  Na figura abaixo, duas trajet√≥rias de movimento entre 2 pontos s√£o vis√≠veis.  Uma √© uma linha reta, que com a calibra√ß√£o adequada do dispositivo n√£o se bifurca ao se mover para frente e para tr√°s.  A segunda trajet√≥ria √© a linha curva que voc√™ obt√©m, porque o firmware de bondade ajusta sequencialmente os motores para atingir a coordenada desejada.  Note-se que nem sempre √© poss√≠vel o movimento em linha reta, algumas posi√ß√µes das articula√ß√µes n√£o permitem alcan√ßar o ponto A ao ponto B em uma linha reta. <br><br><img src="https://habrastorage.org/webt/px/i2/ke/pxi2keh8edb25v9jos_b508trha.jpeg"><br><br>  O monitoramento da posi√ß√£o do Dobot √© implementado usando a classe Qtimer, cujo sinal Qtimer :: timeout est√° vinculado ao meu m√©todo MainWindow :: on_getPoseTimer.  Devo admitir que esta √© uma solu√ß√£o mais ou menos, porque a opera√ß√£o responsiva do aplicativo com ups s√≥ √© poss√≠vel se voc√™ definir um tempo limite de 1000 ms.  Com tempos mais curtos, os empurr√µes come√ßam a ser sentidos ao gerenciar os altos.  Percebi que algumas vezes o dobot pode ser est√∫pido por algum tempo ao receber um comando, e se voc√™ envia comandos com bastante frequ√™ncia, aumenta a probabilidade de entrar em est√∫pidos.  Talvez isso se deva √† constante chamada para o ConnectDobot, que pode parecer desnecess√°ria nesta demonstra√ß√£o, mas a demonstra√ß√£o foi escrita em paralelo com o projeto principal e, no projeto principal, eu realmente preciso dessa implementa√ß√£o.  No entanto, monitorar a conex√£o nem sempre √© chamado, mas o problema com a suspens√£o permanece.  Infelizmente, um tempo limite de 1 s n√£o fornece uma medida t√£o suave da posi√ß√£o de bondade no espa√ßo, que, por exemplo, √© implementada no M1 Studio, mas, por outro lado, isso n√£o √© importante. <br><br>  No mesmo m√©todo, ocorre uma solicita√ß√£o de erros.  Por gentileza da API, a transmiss√£o do c√≥digo de erro √© implementada atrav√©s da estrutura AlarmState. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alarmState</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> value[<span class="hljs-number"><span class="hljs-number">32</span></span>]; };</code> </pre><br>  Essa estrutura √© uma matriz de elementos de 8 bits e o c√≥digo de erro √© codificado na representa√ß√£o bin√°ria de um dos v√°rios elementos da matriz.  Para calcular o c√≥digo de erro, voc√™ precisa encontrar "1" no elemento e adicionar seu n√∫mero de descarga (unidade) a 8 * n elementos (contendo ou n√£o outros erros) antes dele na matriz de valores.  Sim, pode haver mais de um erro de cada vez.  Em seguida, o c√≥digo de erro deve ser encontrado no documento, dispon√≠vel para download no site do fabricante.  O conte√∫do do pdfk foi copiado para um arquivo de texto, que √© parafusado no projeto como um recurso.  Se o c√≥digo de erro for diferente de 8 * 32 (ou seja, n√£o h√° erro), esse c√≥digo aparecer√° no campo de erro e, ao clicar no bot√£o Alarme, sua descri√ß√£o ser√° analisada no arquivo e exibida no campo de texto.  A prop√≥sito, a decodifica√ß√£o e an√°lise de erros s√£o feitas fora da classe para controlar os altos.  Agora, isso n√£o me parece a id√©ia certa. <br><br>  Uma bomba de ar est√° inclu√≠da no kit, o que no manual de instru√ß√µes sugere a conex√£o √†s sa√≠das digitais 17 e 18. Uma sa√≠da controla a ativa√ß√£o / desativa√ß√£o da bomba e a segunda controla a dire√ß√£o do movimento do ar.  Assim, por exemplo, √© ativada uma pin√ßa pneum√°tica, que tamb√©m √© fornecida. <br><br><h1>  Ervas daninhas </h1><br>  No processo de explora√ß√£o do Dobot, encontrei alguns problemas. <br><br><ol><li>  Os furos no suporte n√£o s√£o feitos para a altura dos furos na placa de ensaio √≥ptica padr√£o.  Por outro lado, uma vez quando, por engano, minhas gentilezas colidiram umas com as outras, uma delas simplesmente rolou ao redor do eixo do parafuso de fixa√ß√£o, o que, penso, evitou danos graves. </li><li>  Do primeiro par√°grafo segue o segundo.  Ap√≥s a colis√£o do Dobot, seus eixos mudaram.  Isso n√£o foi assustador no come√ßo, porque eu escrevi um m√©todo para calibrar o eixo do Dobot em rela√ß√£o √† c√¢mera.  A coisa terr√≠vel aconteceu no par√°grafo 3. </li><li>  O eixo vertical tamb√©m mudou e agora o meu normal n√£o √© normal.  Isso pode ser detectado pela c√¢mera, se voc√™ desenhar duas perpendiculares com os pontos.  Voc√™ pode garantir que, devido √† vertical inclinada, o dobot agora desenhe com uma caneta, n√£o seus eixos X e Y verdadeiros, mas suas proje√ß√µes.  E essas proje√ß√µes podem ter um √¢ngulo inferior a 90 graus.  Na realidade, isso leva a um pequeno erro de alinhamento.  Por outro lado, n√£o √© t√£o assustador porque o erro √© linear. </li><li>  Firmware Dobot, em princ√≠pio, aprox.  Houve um pequeno batente com um endere√ßo de papoula, h√° alguns problemas com a espera de respostas a solicita√ß√µes UDP, mas, caso contr√°rio, funciona bem. </li><li>  O design fornece uma bateria, necess√°ria para manter as √∫ltimas coordenadas ap√≥s desligar a gentileza.  Quando a bateria morre, a voltagem cai, o que apaga esses dados.  Por esse motivo, o dobot √© carregado em um estado de erro.  Para deduzir desses estados, voc√™ deve primeiro chamar o m√©todo para limpar as mensagens de erro e, em seguida, chamar o m√©todo de pesquisa para a posi√ß√£o "inicial".  Voc√™ pode substituir a bateria, o benef√≠cio est√° inclu√≠do.  No entanto, a bateria est√° escondida no suporte e, para isso, √© necess√°rio desaparafusar 4 parafusos.  O slot de um deles √© abatido. </li><li>  No meu projeto, usei 3 folhas de vidro para aumentar o n√≠vel da mesa.  Decis√£o mais ou menos, porque o copo est√° torto.  O fato √© que o Dobot come√ßa a gerar erros quando seu eixo vertical tem um valor inferior a 15 mm e parece que nem todas as fun√ß√µes est√£o dispon√≠veis.  Portanto, √© necess√°rio que o espa√ßo de trabalho esteja localizado logo acima do plano de conex√£o do Dobot. </li></ol><br><h1>  Conclus√£o </h1><br>  A gentileza permitiu-me implementar um projeto para montar c√©lulas solares em um mini soquete lado a lado, que pode ser visto em v√≠deo.  A precis√£o do posicionamento foi verificada nas mesmas pastilhas de sil√≠cio e estava no limite de 1 pixel em um eixo e 10 pixels em outro.  A c√¢mera neste projeto foi usada com uma resolu√ß√£o de 20 MP e o campo de vis√£o da c√¢mera ao longo do lado comprido foi de cerca de 17 cm. N√£o √© dif√≠cil calcular que 1 pixel correspondeu a um tamanho linear de cerca de 30 m√≠crons.  Acontece que as √≥pticas utilizadas, embora de alta qualidade, permitem observar claramente as bolachas de sil√≠cio apenas no centro, enquanto as bordas das bolachas ficam muito emba√ßadas, o que leva a uma incerteza na determina√ß√£o de seus rostos em lados curtos e, consequentemente, a uma incerteza na determina√ß√£o do centro da bolacha.  Depois de calibrar os eixos, ajustei o foco da c√¢mera para os lados mais curtos das placas.  Deve-se notar que, em princ√≠pio, era imposs√≠vel focalizar ali como no centro do campo de vis√£o, mas ainda assim.  Devido a esse efeito, o erro de posicionamento ao longo do eixo ao longo do lado longo da c√©lula solar estava no limite de 10 pixels, mas apenas 1 pixel no lado curto.  O que corresponde a aproximadamente 300 e 30 m√≠crons.  Isso me permitiu verificar a integridade das especifica√ß√µes quanto √† precis√£o. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/j7SNzEHzecM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt467407/">https://habr.com/ru/post/pt467407/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt467395/index.html">Habr Weekly # 18 / New Apple Gadgets, um smartphone totalmente modular, a vila de programadores na Bielorr√∫ssia, o fen√¥meno XY</a></li>
<li><a href="../pt467399/index.html">Voc√™ n√£o pode proibir: como implementar o conceito BYOD e n√£o prejudicar a seguran√ßa das informa√ß√µes</a></li>
<li><a href="../pt467401/index.html">Compara√ß√£o de Tesla Model S e Porsche Taycan</a></li>
<li><a href="../pt467403/index.html">O que voc√™ pode e n√£o pode extrair dos componentes da web</a></li>
<li><a href="../pt467405/index.html">Lyft lan√ßa concurso de reconhecimento de objetos 3D</a></li>
<li><a href="../pt467409/index.html">Para fazer neg√≥cios no Vale do Sil√≠cio, voc√™ precisa se comportar</a></li>
<li><a href="../pt467413/index.html">Estrutura de microsservi√ßo PHP - `Hello world` do Swoft</a></li>
<li><a href="../pt467415/index.html">Mercado de c√¢mbio moderno</a></li>
<li><a href="../pt467419/index.html">Lan√ßamento final do Jakarta EE 8</a></li>
<li><a href="../pt467421/index.html">Crie ponteiros inteligentes expressivos para mem√≥ria remota em C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>