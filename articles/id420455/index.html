<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔘 🙇🏿 🤦🏽 [Javawatch Live] Kisah satu permintaan tarik. `os.versi 'dalam SubstrateVM 🙆🏿 👲🏾 👲🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setahun telah berlalu sejak trik sebelumnya berhasil: untuk mempublikasikan video di YouTube alih-alih sebuah pos. “Shameful talk about singleton” mem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[Javawatch Live] Kisah satu permintaan tarik. `os.versi 'dalam SubstrateVM</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/420455/">  Setahun telah berlalu sejak trik sebelumnya berhasil: untuk mempublikasikan video di YouTube alih-alih sebuah pos.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">“Shameful talk about singleton”</a> memperoleh 7k tampilan di YouTube dan dua kali lebih banyak tentang Habré dalam versi teks.  Untuk sebuah artikel yang ditulis dalam keadaan yang benar-benar keras kepala dan menceritakan tentang akordeon tombol kuno - ini sedikit sukses. <br><br>  Hari ini saya telah menginstal rilis baru sepanjang malam.  Kali ini topiknya jauh lebih baru: sejarah komit terhadap teknologi eksperimental - SubstrateVM.  Tetapi tingkat keuletan telah meningkat ke tingkat yang baru. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/f0nD_8G1uB0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Sangat menantikan komentar Anda!  Saya mengingatkan Anda bahwa jika Anda benar-benar ingin meningkatkan sesuatu di pos ini, yang terbaik adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengajukan yang ada di Github</a> .  Saya ingin mengatakan "suka dan berlangganan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ke saluran baru</a> , tetapi apakah semua rilisnya akan berada di hub Java Anda?" <br><br>  Secara teknis: video memiliki satu perekatan lebih dekat ke akhir.  Saya baru saja menulis video yang tidak dikompresi, dan m2 ssd saya yang hanya berukuran lima ratus gigabytes dengan cepat meluap.  Dan tidak ada hard drive lain yang dapat menahan tekanan data seperti itu.  Oleh karena itu, saya harus memutuskan sambungan selama setengah jam dan keluar dan menemukan tambahan lima puluh pertunjukan untuk merekam beberapa menit terakhir.  Ini dicapai dengan menghapus file yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dikompilasi oleh GoogleChrome</a> .  Saya menulis tentang perangkat lunak perekaman di FB <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tepat pada saat merekam</a> , ada banyak rasa sakit. <br><br>  Lain yang secara teknis menarik: YouTube karena alasan tertentu memblokir saya streaming langsung.  Pada saat yang sama, tidak ada satu pun pemogokan dan stigma pada akun tersebut.  Mari berharap ini hanya sebuah kusen, dan setelah 90 hari semuanya akan dikembalikan kembali. <br><a name="habracut"></a><br><blockquote>  Artikel ini akan mengutip dari kode yang dimiliki oleh Oracle.  Anda tidak dapat menggunakan kode ini untuk diri sendiri (kecuali jika Anda membaca lisensi aslinya, dan memungkinkannya dalam kondisi, misalnya, GPL).  Ini bukan lelucon.  Olso, aku memperingatkan. <br></blockquote><br><h1>  Prikazka (dan dongeng akan ada di depan) </h1><br>  Banyak yang sudah mendengar cerita bahwa "Jawa baru akan ditulis di Jawa" dan bertanya-tanya bagaimana ini bisa terjadi.  Ada dokumen kebijakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Project Metropolis</a> dan surat yang sesuai dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">John Rose</a> , tetapi semuanya cukup samar di sana. <br><br>  Kedengarannya seperti sihir yang menyeramkan dan menyeramkan.  Dalam hal yang sama yang dapat Anda coba sekarang, bukan hanya tidak ada sihir, tetapi semuanya bodoh seperti bagian belakang sekop ketika Anda merontokkan gigi Anda dengannya.  Tentu saja, ada beberapa nuansa, tetapi ini suatu hari nanti akan sangat. <br><br>  Saya akan menunjukkannya pada contoh satu kisah instruktif yang terjadi di musim panas.  Bagaimana mereka menulis esai "Bagaimana Aku Menghabiskan Musim Panas" di sekolah. <br><br>  Untuk memulai ucapan kecil.  Proyek yang saat ini melakukan kompilasi Ahead-of-Time di Oracle Labs adalah GraalVM.  Komponen yang, pada kenyataannya, melakukan nishtyaki dan mengubah kode Java menjadi file yang dapat dieksekusi (menjadi file yang dapat dieksekusi) adalah SubstrateVM atau SVM.  Jangan bingung dengan singkatan yang sama yang digunakan oleh satanis data (mesin vektor dukungan).  Itu tentang SVM, sebagai bagian penting, kita akan berbicara lebih lanjut. <br><br><h1>  Pernyataan masalah </h1><br>  Jadi, "bagaimana saya menghabiskan musim panas."  Saya duduk berlibur, menghabiskan dua F5 di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Grail github</a> dan menemukan yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> : <br><br><img src="https://habrastorage.org/webt/uy/pg/ig/uypgig4krayn8dmvfzif_rd3em0.png"><br><br>  Seseorang menginginkan <code>os.version</code> memberikan nilai yang tepat. <br><br>  Nah cho, saya ingin memperbaiki bug?  Kata bocah itu - bocah itu tahu. <br><br>  Kami akan memeriksa apakah klien kami berbohong. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(System.getProperty(<span class="hljs-string"><span class="hljs-string">"os.version"</span></span>)); } }</code> </pre><br>  Pertama, seperti apa bentuk knalpot di Java asli: <code>4.15.0-32-generic</code> .  Ya, ini adalah Ubuntu LTS Bionic yang baru. <br><br>  Sekarang coba lakukan hal yang sama pada SVM: <br><br><pre> <code class="bash hljs">$ ls Main.java $ javac -cp . Main.java $ ls Main.class Main.java $ native-image Main Build on Server(pid: 18438, port: 35415) classlist: 151.77 ms (<span class="hljs-built_in"><span class="hljs-built_in">cap</span></span>): 1,662.32 ms setup: 1,880.78 ms error: Basic header file missing (&lt;zlib.h&gt;). Make sure libc and zlib headers are available on your system. Error: Processing image build request failed</code> </pre><br>  Ya benar.  Ini karena saya membuat mesin virtual yang sama sekali baru khusus untuk tes "bersih". <br><br><pre> <code class="bash hljs">$ sudo apt-get install zlib1g-dev libc6 libc6-dev $ native-image Main Build on Server(pid: 18438, port: 35415) classlist: 135.17 ms (<span class="hljs-built_in"><span class="hljs-built_in">cap</span></span>): 877.34 ms setup: 1,253.49 ms (typeflow): 4,103.97 ms (objects): 1,441.97 ms (features): 41.74 ms analysis: 5,690.63 ms universe: 252.43 ms (parse): 1,024.49 ms (inline): 819.27 ms (compile): 4,243.15 ms compile: 6,356.02 ms image: 632.29 ms write: 236.99 ms [total]: 14,591.30 ms</code> </pre><br>  Angka runtime absolut bisa mengerikan.  Tapi, pertama, itulah yang dimaksudkan untuk dilakukan: optimisasi yang sangat neraka diterapkan di sini.  Dan kedua, ini adalah mesin virtual lemah yang Anda inginkan. <br><br>  Dan akhirnya, momen kebenaran: <br><br><pre> <code class="hljs cs">$ ./main <span class="hljs-literal"><span class="hljs-literal">null</span></span></code> </pre><br>  Tampaknya tamu kita tidak berbohong, benar-benar tidak berfungsi. <br><br><h1>  Pendekatan pertama: mencuri properti dari tuan rumah </h1><br>  Kemudian saya mencari <code>os.version</code> global untuk <code>os.version</code> dan menemukan bahwa semua properti ini ada di kelas <code>SystemPropertiesSupport</code> . <br><br>  Saya tidak akan menulis path lengkap ke file, karena kemampuan untuk menghasilkan proyek yang benar untuk IntelliJ IDEA dan Eclipse dibangun langsung ke dalam SVM.  Ini sangat keren dan sama sekali tidak mengingatkan pada siksaan yang dialami sebagian besar OpenJDK.  Biarkan IDE membuka kelas untuk kita.  Jadi: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SystemPropertiesSupport</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String[] HOSTED_PROPERTIES = { <span class="hljs-string"><span class="hljs-string">"java.version"</span></span>, ImageInfo.PROPERTY_IMAGE_KIND_KEY, <span class="hljs-string"><span class="hljs-string">"line.separator"</span></span>, <span class="hljs-string"><span class="hljs-string">"path.separator"</span></span>, <span class="hljs-string"><span class="hljs-string">"file.separator"</span></span>, <span class="hljs-string"><span class="hljs-string">"os.arch"</span></span>, <span class="hljs-string"><span class="hljs-string">"os.name"</span></span>, <span class="hljs-string"><span class="hljs-string">"file.encoding"</span></span>, <span class="hljs-string"><span class="hljs-string">"sun.jnu.encoding"</span></span>, }; <span class="hljs-comment"><span class="hljs-comment">//... }</span></span></code> </pre><br>  Lalu saya, tanpa menyertakan kepala sama sekali, hanya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pergi dan menambahkan</a> variabel lain ke set ini: <br><br><pre> <code class="java hljs"><span class="hljs-string"><span class="hljs-string">"os.arch"</span></span>, <span class="hljs-string"><span class="hljs-string">"os.name"</span></span>, <span class="hljs-string"><span class="hljs-string">"os.version"</span></span></code> </pre><br>  Saya membangun kembali, menjalankan, mendapatkan baris yang didambakan <code>4.15.0-32-generic</code> .  Hore! <br><br>  Tapi ini masalahnya: sekarang di <em>setiap</em> mesin tempat kode ini berjalan, selalu mengeluarkan <code>4.15.0-32-generic</code> .  Bahkan di mana <code>uname -a</code> mengembalikan versi bucket sebelumnya, pada Ubunt lama. <br><br>  Menjadi jelas bahwa variabel-variabel ini ditulis ke file sumber pada saat kompilasi. <br>  Dan sungguh, Anda perlu hati-hati membaca komentar: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** System properties that are taken from the VM hosting the image generator. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String[] HOSTED_PROPERTIES</code> </pre><br>  Metode lain perlu diterapkan. <br><br><h2>  Kesimpulan </h2><br><ul><li>  Jika Anda ingin properti sistem dari "main Java" muncul di SVM, ini sangat sederhana.  Kami menulis properti yang diinginkan di tempat yang tepat, itu saja. </li><li>  Anda dapat bekerja di IDE, yang mendukung Java dan Python secara bersamaan.  Misalnya, di IntelliJ IDEA Ultimate dengan plugin Python atau yang sama di Eclipse. </li></ul><br><h1>  Pendekatan kedua </h1><br>  Jika Anda mencari-cari melalui <code>SystemPropertiesSupport</code> SystemPropertiesSupport, kami menemukan hal yang jauh lebih masuk akal: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** System properties that are lazily computed at run time on first access. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Map&lt;String, Supplier&lt;String&gt;&gt; lazyRuntimeValues;</code> </pre><br>  Antara lain, penggunaan properti ini masih tidak menghalangi proses membangun yang dapat dieksekusi.  Jelas bahwa jika kita menjejalkan banyak hal di <code>HOSTED_PROPERTIES</code> , maka semuanya akan melambat. <br><br>  Pendaftaran properti malas terjadi dengan cara yang jelas, dengan mengacu pada metode yang mengembalikan: <br><br><pre> <code class="hljs kotlin">lazyRuntimeValues.put(<span class="hljs-string"><span class="hljs-string">"user.name"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::userNameValue); lazyRuntimeValues.put(<span class="hljs-string"><span class="hljs-string">"user.home"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::userHomeValue); lazyRuntimeValues.put(<span class="hljs-string"><span class="hljs-string">"user.dir"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::userDirValue);</code> </pre><br>  Selain itu, semua referensi metode ini adalah antarmuka, dan <code>this::userDirValue</code> sama diimplementasikan untuk masing-masing platform yang didukung.  Dalam hal ini, ini adalah <code>PosixSystemPropertiesSupport</code> dan <code>WindowsSystemPropertiesSupport</code> . <br><br>  Jika kita penasaran dengan implementasi untuk Windows, kita akan melihat hal yang menyedihkan: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">userDirValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"C:\\Users\\somebody"</span></span>; }</code> </pre><br>  Seperti yang Anda lihat, Windows belum didukung :-) Namun, masalah sebenarnya adalah bahwa generasi executable untuk Windows belum selesai, jadi mendukung metode ini sebenarnya merupakan upaya yang sama sekali tidak perlu. <br><br>  Artinya, Anda perlu menerapkan metode berikut: <br><br><pre> <code class="java hljs">lazyRuntimeValues.put(<span class="hljs-string"><span class="hljs-string">"os.version"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::osVersionValue);</code> </pre><br>  Dan kemudian mendukungnya dalam dua atau tiga antarmuka yang tersedia. <br><br>  Tetapi apa yang harus ditulis di sana? <br><br><h2>  Kesimpulan </h2><br><ul><li>  Jika Anda ingin menambahkan properti baru yang dihitung dalam runtime, maka ini adalah masalah penulisan satu metode.  Hasilnya mungkin tergantung pada sistem operasi saat ini, mekanisme switching sudah berfungsi dan tidak bertanya. </li></ul><br><h1>  Sedikit arkeologi </h1><br>  Hal pertama yang terlintas dalam pikiran adalah untuk mengintip implementasi di OpenJDK dan dengan berani menyalin-menempel.  Sedikit arkeologi dan penjarahan tidak akan pernah mencegah seorang penjelajah pemberani! <br><br>  Jangan ragu untuk membuka proyek Java apa pun di Idea, tulis <code>System.getProperty("os.version")</code> , dan dengan ctrl + klik buka penerapan metode <code>getProperty()</code> .  Ternyata semua kebodohan ini terletak pada <code>Properties</code> . <br><br>  Tampaknya, cukup salin-tempel tempat di mana <code>Properties</code> ini dipenuhi, dan tertawa keras, lari ke kehampaan.  Sayangnya, kami menemukan masalah: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> Properties </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initProperties</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Properties props)</span></span></span></span>;</code> </pre><br>  Noooooooooooooo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d4d/ca9/698/d4dca9698ffccaf0de2944194698e857.gif"><br><br>  Tapi semuanya dimulai dengan sangat baik. <br><br><h1>  Apakah ada anak laki-laki? </h1><br>  Seperti yang kita ketahui, menggunakan C ++ itu buruk.  Apakah C ++ digunakan dalam SVM? <br><br>  Seperti itu saja!  Bahkan ada paket khusus untuk ini: <code>src/com.oracle.svm.native</code> . <br><br>  Dan dalam paket ini, horor-horor, terdapat file <code>getEnviron.c</code> dengan sesuatu seperti ini: <br><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> **environ; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> **</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEnviron</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> environ; }</code> </pre><br><h1>  Saatnya main-main dengan C ++ </h1><br>  Sekarang selami sedikit lebih dalam dan buka sumber OpenJDK lengkap. <br><br>  Jika seseorang belum memilikinya, maka Anda dapat <a href="">melihat di web</a> atau mengunduh.  Saya memperingatkan Anda, mereka berayun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari sini</a> , masih dengan bantuan Mercurial, dan masih akan memakan waktu sekitar setengah jam. <br><br>  File yang kita butuhkan ada di <code>src/java.base/share/native/libjava/System.c</code> . <br><br>  Melihat bahwa ini adalah jalur ke file, dan bukan hanya namanya?  Itu benar, Anda dapat mendorong Ide modis mengkilap baru Anda, dibeli seharga $ 200 setahun.  Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mencoba CLion</a> , tetapi untuk menghindari kerusakan mental yang tidak dapat dipulihkan, lebih baik mengambil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Visual Studio Code</a> .  Dia sudah menyoroti sesuatu, tetapi masih tidak mengerti apa yang dilihatnya (dia tidak mencoret semuanya dengan warna merah). <br><br>  Menceritakan kembali <code>System.c</code> : <br><br><pre> <code class="hljs lisp">java_props_t *sprops = GetJavaProperties(<span class="hljs-name"><span class="hljs-name">env</span></span>)<span class="hljs-comment"><span class="hljs-comment">; PUTPROP(props, "os.version", sprops-&gt;os_version);</span></span></code> </pre><br>  Pada gilirannya, mereka diambil dalam <code>src/java.base/unix/native/libjava/java_props_md.c</code> . <br>  Setiap platform memiliki file sendiri, mereka beralih melalui <code>#define</code> . <br><br>  Dan ini dia mulai.  Ada banyak platform.  Setiap necrophilia seperti AIX dapat dinilai, karena GraalVM tidak secara resmi mendukungnya (sejauh yang saya tahu, GNU-Linux, macOS dan Windows direncanakan pada awalnya).  GNU / Linux dan Windows mendukung penggunaan <code>&lt;sys/utsname.h&gt;</code> , yang memiliki metode yang telah ditentukan untuk mendapatkan nama dan versi sistem operasi. <br><br>  Tapi macOS memiliki <a href="">govnokod yang mengerikan</a> . <br><br><ul><li>  Nama "Mac OS X" di-hardcoated (meskipun sudah lama menjadi macOS); </li><li>  Itu tergantung pada versi makoshi.  Sebelum 10.9, SDK tidak memiliki fungsi <code>operatingSystemVersion</code> , dan Anda harus membaca <code>SystemVersion.plist</code> tangan; </li><li>  Untuk pengurangan ini, ia menggunakan ekstensi ObjC seperti ini: </li></ul><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// Fallback if running on pre-10.9 Mac OS if (osVersionCStr == NULL) { NSDictionary *version = [NSDictionary dictionaryWithContentsOfFile : @"/System/Library/CoreServices/SystemVersion.plist"]; if (version != NULL) { NSString *nsVerStr = [version objectForKey : @"ProductVersion"]; if (nsVerStr != NULL) { osVersionCStr = strdup([nsVerStr UTF8String]); } } }</span></span></code> </pre><br>  Jika awalnya ada ide untuk menulis ulang ini secara manual dalam gaya yang baik, maka dengan cepat menabrak kenyataan.  Bagaimana jika saya mengacaukan suatu tempat di hutan mie ini dari jika, seseorang akan memecahkannya, dan mereka akan menggantung saya di alun-alun?  Baik nafig.  <strong>Perlu menyalin-tempel.</strong> <br><br><h2>  Kesimpulan </h2><br><ul><li>  IDE tidak diperlukan; </li><li>  Setiap komunikasi dengan C ++ menyakitkan, tidak menyenangkan, tidak dipahami pada pandangan pertama. </li></ul><br><h1>  Copy-paste adalah norma? </h1><br>  Ini adalah masalah penting di mana jumlah siksaan lebih lanjut tergantung.  Saya benar-benar tidak ingin menulis ulang secara manual, tetapi sampai ke pengadilan karena melanggar lisensi bahkan lebih buruk.  Jadi saya pergi ke github dan bertanya langsung kepada Codrut Stancu.  Inilah yang dia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jawab</a> : <br><br>  <em>»Menggunakan kembali kode OpenJDK, misalnya, salin-tempel adalah hal yang normal dari sudut pandang perizinan.</em>  <em>Namun, ada alasan yang sangat bagus untuk ini.</em>  <em>Jika suatu fitur dapat diimplementasikan dengan menggunakan kembali kode JDK tanpa menyalin, misalnya, menambalnya dengan substitusi, itu akan jauh lebih baik. "</em> <br><br>  Kedengarannya seperti izin salin-tempel resmi! <br><br><h1>  Kami berbicara secara normal ... </h1><br>  Saya mulai porting kode ini, tetapi berlari ke kemalasan saya.  Untuk menguji macOS untuk versi yang berbeda, Anda harus menemukan setidaknya satu dengan Singa Gunung necrophilic 10.8.  Saya memiliki dua perangkat apple saya yang tersedia dan satu dari seorang teman, ditambah lagi saya dapat menyebarkannya ke beberapa VMWare percobaan. <br><br>  Tapi kemalasan.  Dan kemalasan ini menyelamatkan saya. <br><br>  Saya pergi ke ruang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">obrolan</a> dan bertanya kepada Chris Seaton toolchain mana yang paling cocok untuk perakitan.  Versi OS mana yang didukung, kompiler C ++, dan sebagainya. <br><br>  Sebagai tanggapan, dia menerima kesunyian yang mengejutkan dari obrolan dan Chris menjawab bahwa dia tidak mengerti inti dari masalah tersebut. <br><br>  Butuh waktu sebelum Chris bisa mengetahui apa yang ingin aku lakukan, dan memintanya untuk <strong>tidak melakukannya lagi</strong> . <br><blockquote>  Itu benar-benar melewatkan ide SVM.  SVM adalah Java murni, tidak seharusnya kode dimasukkan ke dalamnya dari OpenJDK.  Anda dapat membacanya, mengubahnya menjadi Java, tetapi tidak ada yang menginginkan kode C ++ dari OpenJDK.  Itu hal terakhir yang kita inginkan. <br></blockquote><br>  Contoh perpustakaan matematika tidak meyakinkannya.  Paling tidak, mereka ditulis dalam C, dan dimasukkannya C ++ berarti menghubungkan bahasa yang sama sekali baru ke basis kode.  Dan satu yang fufufu. <br><br>  Apa yang perlu kamu lakukan?  Tulis di <strong>System Java</strong> . <br><br>  Dan jika panggilan ke C / C ++ Platform SDK tidak dapat dihindari, maka ini haruslah panggilan sistem tunggal yang dibungkus dalam C API.  Data ditarik di Jawa dan kemudian logika bisnis ditulis secara ketat di Jawa, bahkan jika Platform SDK memiliki cara siap pakai yang nyaman untuk melakukannya secara berbeda di sisi C ++. <br><br>  Saya menghela nafas dan mulai mempelajari kode sumber untuk memahami bagaimana hal ini dapat dilakukan secara berbeda. <br><br><h2>  Kesimpulan </h2><br><ul><li>  Berbicara dengan orang-orang dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">obrolan tentang</a> detail yang tidak jelas.  Mereka menjawab jika pertanyaannya tidak sepenuhnya bodoh.  Meskipun contoh ini menunjukkan bahwa Chris siap untuk membahas masalah-masalah konyol, bahkan jika ini tidak menghemat waktu secara pribadi; </li><li>  C ++ sama sekali tidak ada dalam proyek.  Tidak ada alasan untuk percaya bahwa seseorang akan membiarkannya menyeretnya ke bawah lantai; </li><li>  Sebagai gantinya, Anda perlu menulis di System Java menggunakan C sebagai upaya terakhir (misalnya, saat memanggil platform SDK). </li></ul><br><h1>  Pemain biola tidak diperlukan </h1><br><blockquote>  Seorang pemain biola tidak diperlukan, sayang.  Dia hanya makan bahan bakar berlebih. <br></blockquote><br>  Kemudian saya diliputi kesedihan, karena lihat di sini.  Jika pada Windows kita memiliki <code>&lt;sys/utsname.h&gt;</code> , dan kita dengan bodoh berharap untuk jawabannya - mudah dan sederhana. <br><br>  Tetapi jika dia tidak ada di sana, apa yang harus dilakukan? <br><br><ul><li>  Panggil perintah built-in cmd atau utilitas Windows?  Mengeluarkan teks dalam bahasa Rusia yang perlu diuraikan.  Ini adalah yang paling bawah, dan mungkin tidak sesuai dengan apa yang akan dijawab OpenJDK di tempat ini. </li><li>  Ambil dari registri?  Bahkan di sini ada nuansa, misalnya, ketika beralih dari Windows 7 ke 10, metode penyimpanan angka digital di Registry berubah, dan di Windows 10 Anda perlu merekatkan tangan dari komponen utama dan kecil, atau hanya menjawab bahwa itu adalah Windows 10 dengan satu digit.  Manakah dari metode ini yang lebih benar (tidak akan membuat penilaian pengguna bertobat) tidak jelas. </li></ul><br>  Untungnya, kesedihan saya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terganggu oleh</a> pencarian-tarik Paul Woegerer, yang memperbaiki semuanya. <br><br>  Menariknya, pada awalnya semuanya diperbaiki dalam wizard (versi. Ops berhenti memberi <code>null</code> dalam tes), dan hanya kemudian saya melihat permintaan pullre.  Masalahnya adalah komit ini tidak ditandai di github sebagai pullrequest - ini adalah komit sederhana dengan tulisan <code>PullRequest: graal/1885</code> dalam komentar.  Faktanya adalah bahwa dudes di Oracle Labs tidak menggunakan Github, mereka hanya membutuhkannya untuk berinteraksi dengan committer eksternal.  Kita semua yang tidak cukup beruntung untuk bekerja di Oracle Labs perlu berlangganan notifikasi komitmen baru ke repositori dan membaca semuanya. <br><br>  Tetapi sekarang Anda dapat bersantai dan melihat bagaimana menerapkan fitur ini <em>dengan benar</em> . <br><br>  Mari kita lihat binatang apa ini, Sistem Java. <br><br>  Seperti yang saya katakan sebelumnya, semuanya sederhana, seperti bagian belakang sekop, ketika mereka mencoba mencabut gigi Anda.  Dan sama menyakitkannya.  Lihatlah kutipan dari kolam: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">osVersionValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (osVersionValue != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> osVersionValue; } <span class="hljs-comment"><span class="hljs-comment">/* On OSX Java returns the ProductVersion instead of kernel release info. */</span></span> CoreFoundation.CFDictionaryRef dict = CoreFoundation._CFCopyServerVersionDictionary(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dict.isNull()) { dict = CoreFoundation._CFCopySystemVersionDictionary(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dict.isNull()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> osVersionValue = <span class="hljs-string"><span class="hljs-string">"Unknown"</span></span>; } CoreFoundation.CFStringRef dictKeyRef = DarwinCoreFoundationUtils.toCFStringRef(<span class="hljs-string"><span class="hljs-string">"MacOSXProductVersion"</span></span>); CoreFoundation.CFStringRef dictValue = CoreFoundation.CFDictionaryGetValue(dict, dictKeyRef); CoreFoundation.CFRelease(dictKeyRef); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dictValue.isNull()) { dictKeyRef = DarwinCoreFoundationUtils.toCFStringRef(<span class="hljs-string"><span class="hljs-string">"ProductVersion"</span></span>); dictValue = CoreFoundation.CFDictionaryGetValue(dict, dictKeyRef); CoreFoundation.CFRelease(dictKeyRef); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dictValue.isNull()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> osVersionValue = <span class="hljs-string"><span class="hljs-string">"Unknown"</span></span>; } osVersionValue = DarwinCoreFoundationUtils.fromCFStringRef(dictValue); CoreFoundation.CFRelease(dictValue); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> osVersionValue; }</code> </pre><br>  Dengan kata lain, kita menulis dalam bahasa Jawa kata demi kata apa yang akan kita tulis dalam C. <br><br>  <code>DarwinExecutableName</code> bagaimana <code>DarwinExecutableName</code> ditulis: <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* Find out how long the executable path is. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> CIntPointer sizePointer = StackValue.get(CIntPointer.class); sizePointer.write(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (DarwinDyld._NSGetExecutablePath(WordFactory.nullPointer(), sizePointer) != -<span class="hljs-number"><span class="hljs-number">1</span></span>) { VMError.shouldNotReachHere(<span class="hljs-string"><span class="hljs-string">"DarwinExecutableName.getExecutableName: Executable path length is 0?"</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/* Allocate a correctly-sized buffer and ask again. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] byteBuffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[sizePointer.read()]; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (PinnedObject pinnedBuffer = PinnedObject.create(byteBuffer)) { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> CCharPointer bufferPointer = pinnedBuffer.addressOfArrayElement(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (DarwinDyld._NSGetExecutablePath(bufferPointer, sizePointer) == -<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/* Failure to find executable path. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String executableString = CTypeConversion.toJavaString(bufferPointer); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String result = realpath(executableString); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } }</code> </pre><br>  Semua <code>CIntPointer</code> ini, <code>CCharPointer</code> , <code>PinnedObject</code> , apa. <br><br>  Menurut selera saya, ini tidak nyaman dan jelek.  Anda perlu bekerja secara manual dengan pointer yang terlihat seperti kelas Java.  Anda harus memanggil <code>release</code> tepat pada waktunya agar memori tidak bocor. <br><br>  Tetapi jika Anda merasa bahwa ini adalah tindakan yang <em>tidak</em> dapat <em>dibenarkan</em> , maka Anda dapat melihat lagi <a href="">penerapan GC di .NET</a> dan merasa ngeri dengan apa yang menyebabkan C ++ jika Anda tidak berhenti tepat waktu.  Saya mengingatkan Anda bahwa ini adalah satu file CPP besar yang lebih besar dari satu megabyte.  Ada <a href="">beberapa deskripsi</a> karyanya, tetapi jelas tidak cukup untuk dipahami oleh kontributor eksternal.  Kode di atas, meskipun tampak tidak menyenangkan, cukup dapat dipahami dan dianalisis dengan menggunakan analisis statis untuk Java. <br><br>  Adapun esensi dari komitmen, saya punya pertanyaan untuknya.  Dan setidaknya dukungan Windows tidak diterapkan di sana.  Ketika codegen muncul untuk Windows, saya akan mencoba untuk mengambil tugas ini. <br><br><h2>  Kesimpulan </h2><br><ul><li>  Perlu menulis di System Java.  Puji, sebut roti manis.  Masih belum ada opsi; </li><li>  Berlangganan pemberitahuan dari repositori di GitHub dan baca komitmennya, jika tidak, PR penting akan terbang; </li><li>  Jika memungkinkan, tanyakan tentang fitur besar dari mereka yang bertanggung jawab untuk area ini.  Ada banyak hal yang diimplementasikan, tetapi mereka belum diketahui masyarakat umum.  Ada kemungkinan untuk menciptakan sepeda, dan jauh lebih buruk daripada yang dibuat oleh orang-orang dari Oracle Labs; </li><li>  Saat menangani fitur, pastikan untuk memberi tahu orang yang bertanggung jawab di github.  Jika dia tidak menjawab - menulis surat, alamat semua anggota tim mudah di-Google-nya. </li></ul><br><h1>  Epilog </h1><br>  Pertempuran ini berakhir, tetapi bukan perang sama sekali. <br><br>  Fighter, dengan sabar menunggu artikel baru tentang Habré dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">masuk dalam jajaran kami</a> ! <br><br>  Saya ingin mengingatkan Anda bahwa Oleg Shelaev, satu-satunya penginjil GraalVM <strong>resmi</strong> dari Oracle, akan datang ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">konferensi Joker berikutnya</a> .  Bukan hanya "satu-satunya penutur bahasa Rusia", tetapi "satu-satunya yang pada umumnya."  Judul laporan ( <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">“Mengkompilasi Java di muka dengan GraalVM”</a></em> ) mengisyaratkan bahwa SubstrateVM tidak dapat melakukannya tanpa. <br><br>  Ngomong-ngomong, Oleg baru-baru ini mengeluarkan senjata layanan - sebuah akun di Habré, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">shelajev-oleg</a> .  Belum ada pos di sana, tetapi Anda dapat menggunakan nama pengguna ini. <br><br>  Anda dapat berbicara dengan Oleg dan Oleg di chat room-chat kami di Telegram: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@graalvm_ru</a> .  Tidak seperti ishshuyev di Github, di sana Anda dapat berkomunikasi dalam bentuk apa pun, dan tidak ada yang akan diblokir ( <em>tetapi ini tidak akurat</em> ). <br><br>  Saya juga mengingatkan Anda bahwa setiap minggu, bersama dengan podcast Debriefing, kami membuat rilis Java Digest.  Misalnya, ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">intisari terakhir</a> .  Dari waktu ke waktu, berita tentang GraalVM dilewati di sana (pada kenyataannya, saya tidak mengubah seluruh masalah menjadi rilis berita GraalVM hanya karena menghormati penonton :-) <br><br>  Terima kasih telah membaca ini - dan sampai jumpa lagi! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id420455/">https://habr.com/ru/post/id420455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id420441/index.html">10 kesalahan keamanan paling umum dalam Python dan cara menghindarinya</a></li>
<li><a href="../id420443/index.html">Pakar keamanan dunia maya telah menciptakan detektor skimmer - SkimReaper</a></li>
<li><a href="../id420447/index.html">Museum Sejarah Komputer - tempat di mana TI dicatat</a></li>
<li><a href="../id420451/index.html">Server di awan: bersiap-siap untuk diluncurkan</a></li>
<li><a href="../id420453/index.html">Skillbox Friday Webinar: Pengembangan dan Segalanya Tentang Ini</a></li>
<li><a href="../id420457/index.html">Ikhtisar Perangkat Lunak Pencetakan 3D Simplify3D</a></li>
<li><a href="../id420459/index.html">Ikon dengan penghitung di bilah alat atas: contoh berbagai pendekatan untuk satu tugas</a></li>
<li><a href="../id420461/index.html">10 kutipan dari desainer yang buruk</a></li>
<li><a href="../id420463/index.html">ICO sepatutnya dalam penurunan, tetapi mereka memiliki kesempatan untuk berubah</a></li>
<li><a href="../id420465/index.html">Variabel nginx dengan njs: sederhana, tidak menyakitkan dan melalui JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>