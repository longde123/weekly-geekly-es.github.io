<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÑ üåô üç¨ [CppCon 2018] Herb Sutter: em dire√ß√£o a um C ++ mais simples e mais poderoso üë®‚Äçüç≥ üåÑ üéπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em seu discurso na CppCon 2018, Herb Sutter apresentou ao p√∫blico suas realiza√ß√µes em duas dire√ß√µes. Primeiramente, ele controla o tempo de vida das v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[CppCon 2018] Herb Sutter: em dire√ß√£o a um C ++ mais simples e mais poderoso</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425873/"><iframe width="560" height="315" src="https://www.youtube.com/embed/80BZxujhY38" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> Em seu discurso na CppCon 2018, Herb Sutter apresentou ao p√∫blico suas realiza√ß√µes em duas dire√ß√µes.  Primeiramente, ele <strong>controla o tempo de vida das</strong> vari√°veis ‚Äã‚Äã(Lifetime), que detectar√° classes inteiras de bugs no est√°gio de compila√ß√£o.  Em segundo lugar, esta √© uma proposta atualizada sobre <strong>metaclasses</strong> , que permitir√° evitar a duplica√ß√£o de c√≥digo, descrevendo o comportamento de uma categoria de classe e conectando-o a classes espec√≠ficas com uma linha. </p><a name="habracut"></a><br><h2 id="predislovie-bolshe--prosche">  Pref√°cio: mais = mais f√°cil ?! </h2><br><p>  Ouvem-se acusa√ß√µes de C ++ de que o padr√£o est√° crescendo sem sentido e sem piedade.  Mas mesmo os conservadores mais fervorosos n√£o argumentam que novas constru√ß√µes como range-for (ciclo de coleta) e auto (pelo menos para iteradores) tornam o c√≥digo mais simples.  Voc√™ pode desenvolver crit√©rios aproximados que (pelo menos uma, idealmente todas) novas extens√µes de idioma devem atender para simplificar o c√≥digo na pr√°tica: </p><br><ol><li>  Reduza, simplifique o c√≥digo, remova o c√≥digo duplicado (intervalo para, autom√°tico, lambda, Metaclasses) </li><li>  Facilite a escrita de c√≥digos seguros, evite erros e casos especiais (indicadores inteligentes, vida √∫til) </li><li>  Substitua completamente os recursos antigos e menos funcionais (typedef ‚Üí usando) </li></ol><br><p>  Herb Sutter identifica "C ++ moderno" - um subconjunto de recursos que atendem aos padr√µes modernos de codifica√ß√£o (como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">as Diretrizes Principais do C ++</a> ) e considera o padr√£o completo como um "modo de compatibilidade", que nem todos precisam conhecer.  Assim, se o "C ++ moderno" n√£o crescer, tudo estar√° bem. </p><br><h2 id="proverki-vremeni-zhizni-peremennyh-lifetime">  Verificando a vida √∫til das vari√°veis ‚Äã‚Äã(Lifetime) </h2><br><p>  O novo Lifetime Verification Group agora est√° dispon√≠vel como parte do Core Guidelines Checker para Clang e Visual C ++.  O objetivo n√£o √© atingir rigor e precis√£o absolutos, como no Rust, mas executar verifica√ß√µes simples e r√°pidas nas fun√ß√µes individuais. </p><br><h3 id="osnovnye-principy-proverki">  Princ√≠pios b√°sicos de verifica√ß√£o </h3><br><p>  Do ponto de vista da an√°lise do tempo de vida, os tipos s√£o divididos em 3 categorias: </p><br><ul><li>  O valor √© o que um ponteiro pode apontar. </li><li> Ponteiro - refere-se ao Valor, mas n√£o controla sua vida √∫til.  Pode estar pendurado (ponteiro pendente).  Exemplos: <code>T*</code> , <code>T&amp;</code> , iteradores, <code>std::observer_ptr&lt;T&gt;</code> , <code>std::string_view</code> , <code>gsl::span&lt;T&gt;</code> </li><li>  Propriet√°rio - controla a vida √∫til do valor.  Geralmente pode excluir seu valor antes do previsto.  Exemplos: <code>std::unique_ptr&lt;T&gt;</code> , <code>std::shared_ptr&lt;T&gt;</code> , <code>std::vector&lt;T&gt;</code> , <code>std::string</code> , <code>gsl::owner&lt;T*&gt;</code> </li></ul><br><p>  Um ponteiro pode estar em um dos seguintes estados: </p><br><ul><li>  Aponte para um valor armazenado na pilha </li><li>  Aponte para um valor contido "por dentro" por algum propriet√°rio </li><li>  Estar vazio (nulo) </li><li>  Travar (inv√°lido) </li></ul><br><h3 id="ukazateli-i-znacheniya">  Ponteiros e valores </h3><br><p>  Para cada ponteiro <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> p </script>  √© rastreado <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-8" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.251ex" height="2.66ex" viewBox="-38.5 -832 3122 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-73" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-65" x="973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-74" x="1439" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMAIN-28" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-70" x="2190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMAIN-29" x="2694" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> pset (p) </script>  - o conjunto de valores aos quais isso pode indicar.  Ao excluir um Valor, sua ocorr√™ncia em todos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.272ex" height="2.298ex" viewBox="-38.5 -728.2 1839.5 989.6" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-73" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-65" x="973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-74" x="1439" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> pset </script>  substitu√≠do por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-16"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v </font></font></span><span class="MJXp-mrow" id="MJXp-Span-20"><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√°</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.128ex" height="2.298ex" viewBox="0 -780.1 3499.5 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-69" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-6E" x="345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-76" x="946" y="0"></use><g transform="translate(1431,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">√°</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-6C" x="1846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-69" x="2144" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-64" x="2490" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-6F" x="3013" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> inv√°lido </script>  .  Ao acessar um valor de ponteiro <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-26"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> p </script>  tal que <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">v</span><span class="MJXp-mrow" id="MJXp-Span-32"><span class="MJXp-mo" id="MJXp-Span-33" style="margin-left: 0em; margin-right: 0em;">√°</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">o</span><span class="MJXp-mo" id="MJXp-Span-38" style="margin-left: 0.333em; margin-right: 0.333em;">‚àà</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">t</span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">p</span><span class="MJXp-mo" id="MJXp-Span-45" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.13ex" height="2.66ex" viewBox="0 -832 7806 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-69" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-6E" x="345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-76" x="946" y="0"></use><g transform="translate(1431,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">√°</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-6C" x="1846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-69" x="2144" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-64" x="2490" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-6F" x="3013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMAIN-2208" x="3777" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-70" x="4722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-73" x="5226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-65" x="5695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-74" x="6162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMAIN-28" x="6523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-70" x="6913" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMAIN-29" x="7416" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> inv√°lido ‚àà pset (p) </script>  emitir um erro. </p><br><pre> <code class="cpp hljs">string_view s; <span class="hljs-comment"><span class="hljs-comment">// pset(s) = {null} { char a[100]; s = a; // pset(s) = {a} cout &lt;&lt; s[0]; // OK } // pset(s) = {invalid} cout &lt;&lt; s[0]; // ERROR: invalid ‚àà pset(s)</span></span></code> </pre> <br><p>  Usando anota√ß√µes, voc√™ pode configurar quais opera√ß√µes ser√£o consideradas opera√ß√µes de acesso ao Valor.  Por padr√£o: <code>*</code> , <code>-&gt;</code> , <code>[]</code> , <code>begin()</code> , <code>end()</code> . </p><br><p>  Observe que o aviso √© emitido apenas no momento do <em>acesso</em> ao √≠ndice inv√°lido.  Se o Valor for exclu√≠do, mas ningu√©m nunca acessar esse Ponteiro, tudo estar√° em ordem. </p><br><h3 id="ukazateli-i-vladelcy">  Sinaliza√ß√£o e Propriet√°rios </h3><br><p>  Se ponteiro <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-46"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> p </script>  indica um valor contido no propriet√°rio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-48"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">o</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgT_AGj7W2cXAcuYWHrB6Gqaw2JOQ#MJMATHI-6F" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> o </script>  ent√£o isso <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-50"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">t</span><span class="MJXp-mo" id="MJXp-Span-55" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">p</span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-58" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-59"><span class="MJXp-msup" id="MJXp-Span-60"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61" style="margin-right: 0.05em;">o</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-62" style="vertical-align: 0.5em;">‚Ä≤</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> pset (p) = {o '} </script>  . </p><br><p>  M√©todos e fun√ß√µes que levam propriet√°rios, s√£o divididos em: </p><br><ul><li>  Opera√ß√µes de acesso ao valor do propriet√°rio.  Padr√£o: <code>*</code> , <code>-&gt;</code> , <code>[]</code> , <code>begin()</code> , <code>end()</code> </li><li>  Acesse opera√ß√µes ao pr√≥prio propriet√°rio, ponteiros <code>v.clear()</code> , como <code>v.clear()</code> .  Por padr√£o, essas s√£o todas as outras opera√ß√µes n√£o-const </li><li>  Acesse opera√ß√µes ao pr√≥prio Propriet√°rio, ponteiros n√£o invalidantes, como <code>v.empty()</code> .  Por padr√£o, todas essas s√£o opera√ß√µes const. </li></ul><br><p>  Anunciado propriet√°rio de conte√∫do antigo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-63"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">v</span><span class="MJXp-mrow" id="MJXp-Span-67"><span class="MJXp-mo" id="MJXp-Span-68" style="margin-left: 0em; margin-right: 0em;">√°</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">o</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10"> inv√°lido </script>  ap√≥s a remo√ß√£o do Propriet√°rio ou mediante a aplica√ß√£o de opera√ß√µes invalidantes. </p><br><p>  Essas regras s√£o suficientes para detectar muitos erros t√≠picos no c√≥digo C ++: </p><br><pre> <code class="cpp hljs">string_view s; <span class="hljs-comment"><span class="hljs-comment">// pset(s) = {null} string name = "foo"; s = name; // pset(s) = {name'} cout &lt;&lt; s[0]; // OK name = "bar"; // pset(s) = {invalid} cout &lt;&lt; s[0]; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v = get_ints(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>* p = &amp;v[<span class="hljs-number"><span class="hljs-number">5</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// pset(p) = {v'} v.push_back(42); // pset(p) = {invalid} cout &lt;&lt; *p; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view s = <span class="hljs-string"><span class="hljs-string">"foo"</span></span>s; <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; s[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ERROR // :       std::string_view s = "foo"s // pset(s) = {"foo"s '} ; // pset(s) = {invalid}</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v = get_ints(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = v.begin(); i != v.end(); ++i) { <span class="hljs-comment"><span class="hljs-comment">// pset(i) = {v'} if (*i == 2) { v.erase(i); // pset(i) = {invalid} } // pset(i) = {v', invalid} } // ERROR: ++i for (auto i = v.begin(); i != v.end(); ) { if (*i == 2) i = v.erase(i); // OK else ++i; }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&gt; get_data(); <span class="hljs-comment"><span class="hljs-comment">//   ,  get_data() != nullopt for (int value : *get_data()) // ERROR cout &lt;&lt; value; // *get_data() ‚Äî     for (int value : std::vector&lt;int&gt;(*get_data())) // OK cout &lt;&lt; value;</span></span></code> </pre> <br><h3 id="otslezhivanie-vremeni-zhizni-parametrov-funkciy">  Rastreando a vida √∫til dos par√¢metros de fun√ß√£o </h3><br><p>  Quando come√ßamos a lidar com fun√ß√µes em C ++ que retornam ponteiros, podemos apenas adivinhar a rela√ß√£o entre a vida √∫til dos par√¢metros e o valor de retorno.  Se uma fun√ß√£o aceitar e retornar ponteiros do mesmo tipo, ser√° assumido que a fun√ß√£o "obt√©m" o valor de retorno de um dos par√¢metros de entrada: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">* p, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">* q)</span></span></span><span class="hljs-function"> -&gt; </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">*</span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {p', q'} auto g(std::string&amp; s) -&gt; char*; // pset(ret) = {s'}</span></span></code> </pre> <br><p>  Fun√ß√µes suspeitas s√£o facilmente detectadas e levam o resultado do nada: </p><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::reference_wrapper&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; get_data() { <span class="hljs-comment"><span class="hljs-comment">//    int i = 3; return {i}; // pset(ret) = {i'} } // pset(ret) = {invalid}</span></span></code> </pre> <br><p>  Como √© poss√≠vel passar um valor tempor√°rio para os par√¢metros <code>const T&amp;</code> , eles n√£o s√£o levados em considera√ß√£o, a menos que o resultado n√£o esteja em outro lugar para levar: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">min</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; y)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {x', y'} //    const T&amp;- //        auto x = 10, y = 2; auto&amp; bad = min(x, y + 1); // pset(bad) = {x, temp} // pset(bad) = {x, invalid} cout &lt;&lt; bad; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> K = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> V = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> V&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find_or_default</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;K, V&gt;&amp; m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> K&amp; key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> V&amp; def)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {m', key', def'} std::map&lt;K, V&gt; map; K key = "foo"; const V&amp; s = find_or_default(map, key, "none"); // pset(s) = {map', key', temp} ‚áí pset(s) = {map', key', invalid} cout &lt;&lt; s; // ERROR</span></span></code> </pre> <br><p>  Tamb√©m se acredita que, se uma fun√ß√£o aceita um ponteiro (em vez de uma refer√™ncia), ela pode ser nullptr, e esse ponteiro n√£o pode ser usado antes de comparar com nullptr. </p><br><h3 id="zaklyuchenie-po-kontrolyu-vremeni-zhizni">  Conclus√£o do controle do tempo de vida </h3><br><p>  Repito que o Lifetime ainda n√£o √© uma proposta para o padr√£o C ++, mas uma tentativa ousada de implementar verifica√ß√µes vital√≠cias em C ++, onde, ao contr√°rio do Rust, por exemplo, nunca houve anota√ß√µes correspondentes.  No in√≠cio, haver√° muitos falsos positivos, mas com o tempo, as heur√≠sticas ir√£o melhorar. </p><br><h3 id="voprosy-iz-zala">  Perguntas da plat√©ia </h3><br><p>  <strong>As verifica√ß√µes de grupo ao longo da vida fornecem uma garantia matematicamente precisa da aus√™ncia de ponteiros pendentes?</strong> </p><br><p>  Teoricamente, seria poss√≠vel (no novo c√≥digo) pendurar um monte de anota√ß√µes em classes e fun√ß√µes e, em troca, o compilador daria tais garantias.  Mas essas verifica√ß√µes foram desenvolvidas seguindo o princ√≠pio 80:20, ou seja, voc√™ pode detectar a maioria dos erros usando um pequeno n√∫mero de regras e aplicando um m√≠nimo de anota√ß√µes. </p><br><h2 id="metaklassy">  Metaclasses </h2><br><p>  A metaclasse de alguma forma complementa o c√≥digo da classe √† qual √© aplicada e tamb√©m serve como o nome de um grupo de classes que satisfazem determinadas condi√ß√µes.  Por exemplo, como mostrado abaixo, a metaclasse da <code>interface</code> tornar√° todas as fun√ß√µes p√∫blicas e puramente virtuais para voc√™. </p><br><p>  No ano passado, Herb Sutter fez seu primeiro projeto de metaclasse ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">veja aqui</a> ).  Desde ent√£o, a sintaxe proposta atual mudou. </p><br><p>  Para iniciantes, a sintaxe para o uso de metaclasses foi alterada: </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  interface Shape { int area() const; void scale_by(double factor); }; //  class(interface) Shape { ‚Ä¶ }</span></span></code> </pre> <br><p>  Ele se tornou mais longo, mas agora existe uma sintaxe natural para a aplica√ß√£o de v√°rias metaclasses ao mesmo tempo: <code>class(meta1, meta2)</code> . </p><br><h3 id="opisanie-metaklassa">  Descri√ß√£o Metaclasse </h3><br><p>  Anteriormente, uma metaclasse era um conjunto de regras para modificar uma classe.  Agora uma metaclasse √© uma fun√ß√£o constexpr que pega uma classe antiga (declarada no c√≥digo) e cria uma nova. </p><br><p>  Ou seja, a fun√ß√£o usa um par√¢metro - meta-informa√ß√£o sobre a classe antiga (o tipo de par√¢metro depende da implementa√ß√£o), cria elementos de classe (fragmentos) e os adiciona ao corpo da nova classe usando a instru√ß√£o <code>__generate</code> . </p><br><p>  Fragmentos podem ser gerados usando as constru√ß√µes <code>__fragment</code> , <code>__inject</code> , <code>idexpr(‚Ä¶)</code> .  O orador preferiu n√£o se concentrar em seu prop√≥sito, pois essa parte ainda ser√° alterada antes de ser submetida ao comit√™ de padroniza√ß√£o.  Os nomes em si s√£o garantidos para serem alterados, duplo sublinhado foi adicionado especificamente para esclarecer isso.  A √™nfase no relat√≥rio estava em exemplos que v√£o al√©m. </p><br><h3 id="interface">  interface </h3><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">interface</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T source)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// source    //     .     //  ~X,  X ‚Äî   . __generate __fragment struct X { virtual ~X noexcept {} }; //    static_assert, compiler.require   //   constexpr-. //      . compiler.require(source.variables().empty(), "interfaces may not contain data members"); // member_functions(), ,  tuple&lt;‚Ä¶&gt;,   for... for... (auto f : source.member_functions()) { // ,   ‚Äî   / compiler.require(!f.is_copy() &amp;&amp; !f.is_move(), "interfaces may not copy or move; consider a virtual clone()"); //   public   if (!f.has_default_access()) f.make_public(); // (1) // ,       protected/private compiler.require(f.is_public(), "interface functions must be public"); //     f.make_pure_virtual(); // (2) //   f     __generate f; } }</span></span></code> </pre> <br><p>  Voc√™ pode pensar que nas linhas (1) e (2) modificamos a classe original, mas n√£o.  Observe que iteramos as fun√ß√µes da classe original com a c√≥pia, modificamos essas fun√ß√µes e as inserimos em uma nova classe. </p><br><p>  Aplica√ß√£o de metaclasse: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shape</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">area</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale_by</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> factor)</span></span></span></span>; }; <span class="hljs-comment"><span class="hljs-comment">//  : class Shape { public: virtual ~Shape noexcept {} public: virtual int area() const = 0; public: virtual void scale_by(double factor) = 0; };</span></span></code> </pre> <br><h3 id="otladka-myuteksa">  Depura√ß√£o Mutex </h3><br><p>  Suponha que tenhamos dados seguros sem thread protegidos por um mutex.  A depura√ß√£o pode ser facilitada se, em um assembly de depura√ß√£o, a cada chamada, for verificado se o processo atual bloqueou esse mutex.  Para fazer isso, uma classe TestableMutex simples foi escrita: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestableMutex</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ m.lock(); id = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::this_thread::get_id(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unlock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ id = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id{}; m.unlock(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is_held</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id == <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::this_thread::get_id(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::mutex m; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::atomic&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id&gt; id; };</code> </pre> <br><p>  Al√©m disso, em nossa classe MyData, gostar√≠amos de todos os campos p√∫blicos como </p><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v;</code> </pre> <br><p>  Substitua por + getter: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v_; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&amp; v() { assert(m_.is_held()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v_; }</code> </pre> <br><p>  Para fun√ß√µes, tamb√©m √© poss√≠vel realizar transforma√ß√µes semelhantes. </p><br><p>  Essas tarefas s√£o resolvidas usando macros e gera√ß√£o de c√≥digo.  Herb Sutter declarou guerra √†s macros: elas s√£o inseguras, ignoram sem√¢ntica, espa√ßos para nome etc.  Como √© a solu√ß√£o nas metaclasses: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">guarded_with_mutex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ __generate __fragment <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> {</span></span> TestableMutex m_; <span class="hljs-comment"><span class="hljs-comment">// lock, unlock } } template &lt;typename T, typename U&gt; constexpr void guarded_member(T type, U name) { auto field = ‚Ä¶; __generate field; auto getter = ‚Ä¶; __generate getter; } template &lt;typename T&gt; constexpr void guarded(T source) { guarded_with_mutex(); for... (auto o : source.member_variables()) { guarded_member(o.type(), o.name()); } }</span></span></code> </pre> <br><p>  Como usar: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">guarded</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyData</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v; Widget* w; }; MyData&amp; x = findData(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>); xv().clear(); <span class="hljs-comment"><span class="hljs-comment">// assertion failed: m_.is_held()</span></span></code> </pre> <br><h3 id="actor">  ator </h3><br><p>  Bem, mesmo se protegemos algum objeto com um mutex, agora tudo √© seguro para threads, n√£o h√° reivindica√ß√µes de corre√ß√£o.  Mas se um objeto puder ser acessado com frequ√™ncia por muitos threads em paralelo, o mutex ficar√° sobrecarregado e haver√° uma grande sobrecarga para lev√°-lo. </p><br><p>  A solu√ß√£o fundamental para o problema de mutexes com bugs √© o conceito de atores, quando um objeto tem uma fila de solicita√ß√µes, todas as chamadas para o objeto s√£o colocadas em fila e executadas uma ap√≥s a outra em um encadeamento especial. </p><br><p>  Deixe a classe Active conter uma implementa√ß√£o de tudo isso - na verdade, um pool / executor de threads com um √∫nico thread.  Bem, as metaclasses ajudar√£o a se livrar do c√≥digo duplicado e enfileirar√£o todas as opera√ß√µes: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">active</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageFilter</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ImageFilter(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(Buffer*)&gt; w) : work(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(w)) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Buffer* b)</span></span></span><span class="hljs-function"> </span></span>{ work(b); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(Buffer*)&gt; work; } <span class="hljs-comment"><span class="hljs-comment">//  : class ImageFilter { public: ImageFilter(std::function&lt;void(Buffer*)&gt; w) : work(std::move(w)) {} void apply(Buffer* b) { a.send([=] { work(b); }).join(); } private: std::function&lt;void(Buffer*)&gt; work; Active a; //   ,     work }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">active</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">log</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::fstream f; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">info</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(‚Ä¶)</span></span></span><span class="hljs-function"> </span></span>{ f &lt;&lt; ‚Ä¶; } };</code> </pre> <br><h3 id="property">  propriedade </h3><br><p>  Existem propriedades em quase todas as linguagens de programa√ß√£o modernas, e quem n√£o as implementou com base em C ++: Qt, C ++ / CLI, todos os tipos de macros feias.  No entanto, eles nunca ser√£o adicionados ao padr√£o C ++, pois eles mesmos s√£o considerados recursos muito restritos e sempre houve a esperan√ßa de que alguma proposta os implementasse como um caso especial.  Bem, eles podem ser implementados em metaclasses! </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  class X { public: class(property&lt;int&gt;) WidthClass { } width; }; //  class X { public: class WidthClass { int value; int get() const; void set(const int&amp; v); void set(int&amp;&amp; v); public: WidthClass(); WidthClass(const int&amp; v); WidthClass&amp; operator=(const int&amp; v); operator int() const; //   move! WidthClass(int&amp;&amp; v); WidthClass&amp; operator=(int&amp;&amp; v); } width; };</span></span></code> </pre> <br><p>  Voc√™ pode definir seu pr√≥prio getter e setter: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Date</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class">&lt;int&gt;) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonthClass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> month; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> month; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m)</span></span></span><span class="hljs-function"> </span></span>{ assert(m &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; m &lt; <span class="hljs-number"><span class="hljs-number">13</span></span>); month = m; } } month; }; Date date; date.month = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-comment"><span class="hljs-comment">// assertion failed</span></span></code> </pre> <br><p>  Idealmente, quero escrever <code>property int month { ‚Ä¶ }</code> , mas mesmo essa implementa√ß√£o substituir√° o zool√≥gico de extens√µes C ++ que inventam propriedades. </p><br><h3 id="zaklyuchenie-po-metaklassam">  Conclus√£o da Metaclasse </h3><br><p>  Metaclasses s√£o um grande recurso novo para uma linguagem j√° complexa.  Vale a pena?  Aqui est√£o alguns de seus benef√≠cios: </p><br><ul><li>  Deixe os programadores expressarem suas inten√ß√µes com mais clareza (eu quero escrever ator) </li><li>  Reduza a duplica√ß√£o de c√≥digo e simplifique o desenvolvimento e a manuten√ß√£o de c√≥digo que segue certos padr√µes </li><li>  Elimine alguns grupos de erros comuns (ser√° suficiente cuidar de todas as sutilezas uma vez) </li><li>  Permitir se livrar de macros?  (Herb Sutter √© muito beligerante) </li></ul><br><h3 id="voprosy-iz-zala-1">  Perguntas da plat√©ia </h3><br><p>  <strong>Como depurar metaclasses?</strong> </p><br><p>  Pelo menos para Clang, existe uma fun√ß√£o intr√≠nseca que, se chamada, imprimir√° o conte√∫do real da classe durante a compila√ß√£o, ou seja, o que acontece ap√≥s a aplica√ß√£o de todas as metaclasses. </p><br><p>  <strong>Dizia-se que era capaz de declarar n√£o membros como swap e hash em metaclasses.</strong>  <strong>Para onde ela foi?</strong> </p><br><p>  A sintaxe ser√° mais desenvolvida. </p><br><p>  <strong>Por que precisamos de metaclasses se conceitos j√° foram adotados para padroniza√ß√£o?</strong> </p><br><p>  Essas s√£o coisas diferentes.  Metaclasses s√£o necess√°rias para definir partes de uma classe, e os conceitos verificam se uma classe corresponde a um determinado padr√£o usando exemplos de classe.  De fato, metaclasses e conceitos funcionam bem juntos.  Por exemplo, voc√™ pode definir o conceito de um iterador e a metaclasse de um "iterador t√≠pico" que define algumas opera√ß√µes redundantes pelo restante. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425873/">https://habr.com/ru/post/pt425873/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425859/index.html">Operadores regionais se op√µem ao cancelamento de roaming</a></li>
<li><a href="../pt425861/index.html">Teste voc√™ mesmo: voc√™ pode proteger a empresa contra ataques cibern√©ticos?</a></li>
<li><a href="../pt425867/index.html">Teste de desempenho de servi√ßo da Web como parte da Integra√ß√£o Cont√≠nua. Experi√™ncia Yandex</a></li>
<li><a href="../pt425869/index.html">iFixit: Apple ainda n√£o ativou o bloqueio de MacBooks recondicionados</a></li>
<li><a href="../pt425871/index.html">Ecaterimburgo, 11 de outubro - Atlassian encontra estivador</a></li>
<li><a href="../pt425875/index.html">Atualiza√ß√£o da matriz do notebook TN-> IPS ou como obter um laptop mais avan√ßado a partir de um laptop econ√¥mico</a></li>
<li><a href="../pt425877/index.html">CEO da Apple diz que chips chineses de espionagem em servidores Supermicro s√£o fic√ß√£o</a></li>
<li><a href="../pt425879/index.html">O que o Google mostrou em sua apresenta√ß√£o</a></li>
<li><a href="../pt425881/index.html">Tudo o que voc√™ precisa saber sobre o alinhamento no Flexbox</a></li>
<li><a href="../pt425883/index.html">Per√≠odo integral</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>