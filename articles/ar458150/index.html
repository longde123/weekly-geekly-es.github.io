<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง ๐ง๐ป ๐ง๐ฝ ุซูุจ microoptimization ูู C ++ ู C # ุงููุฌูุนูู ๐จ๐ฟโ๐ป ๐ต๏ธ ๐ฉ๐ฝโ๐คโ๐ฉ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงููุฏุฑุณุฉ ุ ุนูุฏูุง ุญูููุง ุงููุนุงุฏูุงุช ุฃู ูุธุฑูุง ูู ุงูุตูุบ ุ ุญุงูููุง ุชูููููุง ุนุฏุฉ ูุฑุงุช ุฃููุงู ุ ุนูู ุณุจูู ุงููุซุงู ุ Z = X - (Y + X) ุชูููู Z = X - (Y + X) ุฅูู Z =...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุซูุจ microoptimization ูู C ++ ู C # ุงููุฌูุนูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458150/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ูู ุงููุฏุฑุณุฉ ุ ุนูุฏูุง ุญูููุง ุงููุนุงุฏูุงุช ุฃู ูุธุฑูุง ูู ุงูุตูุบ ุ ุญุงูููุง ุชูููููุง ุนุฏุฉ ูุฑุงุช ุฃููุงู ุ ุนูู ุณุจูู ุงููุซุงู ุ <code>Z = X - (Y + X)</code> ุชูููู <code>Z = X - (Y + X)</code> ุฅูู <code>Z = -Y</code> .  ูู ุงููุฌูุนุงุช ุงูุญุฏูุซุฉ ุ ูุฐู ูุฌููุนุฉ ูุฑุนูุฉ ูู ูุง ูุณูู ุจุงูุชุญุณููุงุช ุซูุจ ุงูุจุงุจ ุ ูุงูุชู ุ ูู ุฎูุงู ุงูุญุฏูุซ ุชูุฑูุจุง ุ ูุฌููุนุฉ ูู ุงูุฃููุงุท ุ ููุญู ุชูููู ุงูุชุนุจูุฑุงุช ุ ูุงุณุชุจุฏุงู ุงูุชุนูููุงุช ุจุชุนูููุงุช ุฃุณุฑุน ููุนุงูุฌ ูุนูู ุ ุงูุฎ  ูู ูุฐู ุงูููุงูุฉ ุ ููุช ุจุชุฌููุน ูุฌููุนุฉ ูู ูุฐู ุงูุชุญุณููุงุช ุงูุชู ุชู ุงูุนุซูุฑ ุนูููุง ูู ูุตุงุฏุฑ LLVM ู GCC ู .NET Core (CoreCLR). </p><br><p style=";text-align:right;direction:rtl">  ููุจุฏุฃ ุจุฃูุซูุฉ ุจุณูุทุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> X * <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; X -X * -Y =&gt; X * Y -(X - Y) =&gt; Y - XX * Z - Y * Z =&gt; Z * (X - Y)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญูู ูู ุงููุซุงู ุงูุฃุฎูุฑ ูู C ++ ููู C #: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x * z - y * z; <span class="hljs-comment"><span class="hljs-comment">// =&gt; z * (x - y) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุธุฑ ุฅูู ุงููุฌููุน ูู Clang (LLVM) ู GCC ู MSVC ู .NET Core: <br><img src="https://habrastorage.org/webt/up/xl/zo/upxlzopwz17gkq290kycswi4_qq.png"></p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ุฌููุน ุจุฑุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู C ++ ุงูุซูุงุซุฉ (GCC ู Clang ู MSVC) ุฎูุถุช ุนูููุฉ ุงูุถุฑุจ ูุงุญุฏุฉ (ูุฑู ุชุนูููุฉ <code>imul</code> ูุงุญุฏุฉ ููุท).  C # ูู ููุนู ูุฐุง ูุน RyuJIT ุ ููู ูุง ุชุชุนุฌู ูุชูุจูุฎู ูู ุฃุฌู ุฐูู ุ ุฅูู ููุท ุฃู ูุฆุฉ ุงูุชุญุณููุงุช ูุฐู ูุชููุฑุฉ ุจุชูููู ูุญุฏูุฏ ููุงู.  ูุฌุนูู ุชููู ุ ูุฅู ุชูููุฐ ุชุญููู InstCombine ุจุฃูููู ูู LLVM ูุณุชุบุฑู ุฃูุซุฑ ูู 30 ุฃูู ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ (+ 20k ุฃุณุทุฑ ุนูู DAGCombiner.cpp) ุ ุนูุงูุฉ ุนูู ุฐูู ุ ุบุงูุจุงู ูุง ูุคุฏู ูุฐุง ุงูุชุญูู ุฅูู ุชุฌููุน ุทููู.  <a href="">ุจุงูููุงุณุจุฉ ุ ุงููููุน</a> ุงููุณุคูู ุนู ูุฐุง ุงูุชุญุณูู ููุฌูุฏ.  ูุญุชูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ุนูู ุฎุท ุงููุดุชุฑู ุงูุฑููู (DSL) ุงูุฎุงุต ุงูุฐู ูุตู ูุชุญุฉ ุงูุชุญุณูู ุ ูููุง ููู <a href="">ููุชุทู</a> ). </p><br><p style=";text-align:right;direction:rtl">  ูุฑุฑุช ุ ูู ุฃุฌู ุงูููุงูุฉ ุ ูุญุงููุฉ ุชูููุฐ ูุฐุง ุงูุชุญุณูู ูู C # JIT (ุงุถุบุท ุนูู ุงูุจูุฑุฉ ุงูุฎุงุตุฉ ุจู): </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/692/14c/c65/69214cc65fd41d79f8d53caf4021c9af.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูููู ุฑุคูุฉ ุงูุงูุชุฒุงู ุงููุงูู ููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">EgorBo / coreclr</a> .  ุฏุนูุง ูุชุญูู ูู ุชุญุณูู ุงูุขู (ูู Visual Studio 2019 + Disasmo: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e53/e77/de9/e53e77de91d647f78f021d10fb57a8c9.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุฅูู ูุนูู!  <code>lea</code> + <code>imul</code> ุจุฏูุงู ูู <code>imul</code> <code>imul</code> <code>add</code> . </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุนูุฏ ุฅูู C ++ ูุชุชุจุน ูุฐุง ุงูุชุญุณูู ูู Clang.  ููููุงู ุจุฐูู ุ ุงุทูุจ ูู clang ุฃู ุชุนุทููุง LLVM IR ุงูุฃููู ุนุจุฑ <code>-emit-llvm -g0</code> ุ ุซู <code>-emit-llvm -g0</code> ุฅูู LLVM ุฅูู ุงูููุญุณููู ุ ุจุงุณุชุฎุฏุงู <code>-O2 -print-before-all -print-after-all</code> ุฃุฌู ุงูุชูุงุท ุงููุญุธุฉ ุงูุฏูููุฉ ููุชุญูู ูุฒูู ุงูุถุฑุจ ูู ูุฌููุนุฉ <code>-O2</code> (ูู ูุฐุง ูููู ุฑุคูุชู ุนูู ุงูููุงุฑุฏ ุงูุฑุงุฆุนุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">godbolt.org</a> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">; *** IR Dump Before Combine redundant instructions *** define dso_local i32 @_Z5Case1iii(i32, i32, i32) { %4 = mul nsw i32 %0, %2 %5 = mul nsw i32 %1, %2 %6 = sub nsw i32 %4, %5 ret i32 %6 } ; *** IR Dump After Combine redundant instructions *** define dso_local i32 @_Z5Case1iii(i32, i32, i32) { %4 = sub i32 %0, %1 %5 = mul i32 %4, %2 ret i32 %5 }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุฃูุถูุง ุงูุงุณุชูุชุงุน ุนูู godbolt ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช LLVM - opt (optimizer) ู llc (ูุชุฌููุน LLVM IR ุฅูู asm): </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yr/x-/dw/yrx-dw9mx9tqbrp97ts3smndy0i.png"></p><br><p style=";text-align:right;direction:rtl">  ุงูุนูุฏุฉ ุฅูู ุงูุฃูุซูุฉ.  ููุฏ ูุฌุฏุช ูุฐุง ุงููุซุงู ุงูุฌููู ูู ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">X == C - X =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> C is odd</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฐุง ุตุญูุญ: ุฅุฐุง ูุงู <code></code> (ุซุงุจุช ุ ุญุฑูู) ุญุชู ุฐูู ุงูุญูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ููููู ูุชุงุจุฉ <code>4 == 8 - 4</code> .  ูููู ุฅุฐุง ููุช ุชูุชุจ ุฃู ุฑูู ุบุฑูุจ ุจุฏูุงู ูู 8 ุ ููู ุชุชููู ูู ุงูุนุซูุฑ ุนูู ุนูุงูุฉ <code>X</code> ุจุญูุซ ุชุชุญูู ุงููุณุงูุงุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/lt/qn/pq/ltqnpqgmnbcyszoj0dv7nawouk8.png"></p><br><h3 id="ieee754-nanosit-otvetnyy-udar" style=";text-align:right;direction:rtl">  IEEE754 ุงูุฅุถุฑุงุจุงุช ุงูุนูุฏุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุชุนูู ุงูุนุฏูุฏ ูู ุงูุชุญุณููุงุช ูุฃููุงุน ูุฎุชููุฉ ูู ุงูุจูุงูุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ <code>byte</code> ุ <code>int</code> ุ <code>unsigned</code> ุ <code>float</code> ุ <code>double</code> .  ูุน ูุฐุง ุงูุฃุฎูุฑ ุ ุงูุฃููุฑ ููุณุช ุจูุฐู ุงูุจุณุงุทุฉ ููุชู ุงูุชุนุงูู ูุน ุงูุชุญุณููุงุช ูู ุฎูุงู ููุงุตูุงุช IEEE754 ุ ูุงูุชู ุณุชุตุจุญ ูุฌูููุฉ ุฅุฐุง ููุช ุจุชูููู <code>A - B - A</code> ุฅูู - <code>-B</code> ุฃู <code>(A * B) * C</code> ุฅุนุงุฏุฉ ุชุฑุชูุจูุง ุฅูู <code>A * (B * C)</code> t. ุฃ.  ุงูุนูููุงุช ููุณุช ุงูููุงุจู.  ูููู ููุงู ูุถุนูุง ุฎุงุตูุง ูู ุจุฑุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ุงูุญุฏูุซุฉ ุงูุชู ุชุชูุญ ูู ุฅููุงู ุงูููุงุตูุงุช ูุงูููู ุงูุญุฏูุฏูุฉ (NaN ู + -Inf ู + -0.0) ูู ูุซู ูุฐู ุงูุญุงูุงุช ูุฃุฏุงุก ุชุญุณููุงุช ุจุฃูุงู - ูุฐุง ูู Fast Math (ูููู ุงูุนุซูุฑ ุนูู ุทูุจ ุงูุนูุงูุงุช ุงูุนุงูุฉ (My PR) ูุฅุถุงูุฉ ูุซู ูุฐุง ุงููุถุน ุฅูู C # <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> ). </p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ูู <code>-ffast-math</code> ูู ูุนุฏ ููุงู ุงุซูุงู <code>vsubss</code> : <br><img src="https://habrastorage.org/webt/s3/et/-9/s3et-9dc6vml6f-ous27z-1xlhm.png"></p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชุนุจูุฑุงุช ุ ูุฃุฎุฐ ุงูููุญุณููููู ุฃูุถูุง ูู ุงูุงุนุชุจุงุฑ ุงูุชูููู ุจูู ุงูุฏูุงู ุงูุฑูุงุถูุฉ ูุงูุฑูุงุถูุงุช ูู <code>math.h</code> ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุชุฌ ูุญุฏุงุช ุงูุฑูู X ูุณุงูู ููุชุฌ ุงูุฑูู X: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(X) * <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(X) =&gt; X * X</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูู ุฏุงุฆูุง ุฅูุฌุงุจูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X) &lt; Y =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Y is negative. <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงุฐุง ุชุญุณุจ ุงูุฌุฐุฑ ุ ุฅุฐุง ูุงู ูู ุงููููู ูู ูุฑุญูุฉ ุงูุชุฌููุน ุญุณุงุจ ูุฑุจุน ุงูุซุงุจุช ุนูู ุงูููููุ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X) &gt; C =&gt; X &gt; C * C</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/988/d7e/cbd/988d7ecbd50be253a6b3314760ed3348.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุงููุฒูุฏ ูู ุนูููุงุช ุงูุฌุฐุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X) == <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(Y) =&gt; X == Y <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X) * <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X) =&gt; X <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X) * <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(Y) =&gt; <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X * Y) logN(<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X)) =&gt; <span class="hljs-number"><span class="hljs-number">0.5</span></span>*logN(X)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุถ ุงูุฑูุงุถูุงุช ุฃูุซุฑ ุงููุฏุฑุณุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">expN(X) * expN(Y) -&gt; expN(X + Y)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุชุญุณูู ุงูููุถู ูุฏู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(X) / <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(X) =&gt; <span class="hljs-built_in"><span class="hljs-built_in">tan</span></span>(X)</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/93a/875/4dd/93a8754dd42b07497f6a164bb60172af.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุงููุซูุฑ ูู ุนูููุงุช ุงูุจุช ูุงูุนูููุงุช ุงูููุทููุฉ ุงููููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">((a ^ b) | a) -&gt; (a | b) (a &amp; ~b) | (a ^ b) --&gt; a ^ b ((a ^ b) | a) -&gt; (a | b) (X &amp; ~Y) |^+ (~X &amp; Y) -&gt; X ^ Y A - (A &amp; B) into ~B &amp; A X &lt;= Y - <span class="hljs-number"><span class="hljs-number">1</span></span> equals to X &lt; Y A &lt; B || A &gt;= B -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> ...   !</code> </pre> <br><h3 id="nizkourovnevye-optimizacii" style=";text-align:right;direction:rtl">  ุชุญุณููุงุช ุงููุณุชูู ุงูููุฎูุถ </h3><br><p style=";text-align:right;direction:rtl">  ููุงู ูุฌููุนุฉ ูู ุงูุชุญุณูู ุ ูุงูุชู ูุง ุชุจุฏู ูููููุฉ ุงูุฃููู ููุทููุฉ ูุน t.z.  ุนููุงุก ุงูุฑูุงุถูุงุช ุ ูููู ุฃูุซุฑ ูุฏูุฉ ููุญุฏูุฏ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">X / <span class="hljs-number"><span class="hljs-number">2</span></span> =&gt; X * <span class="hljs-number"><span class="hljs-number">0.5</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงุณุชุจุฏุงู ุงููุณูุฉ ุจุถุฑุจ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/1n/nz/d2/1nnzd2msn5lxzxlx5t3-hr680cc.png"></p><br><p style=";text-align:right;direction:rtl">  ุชุดุบูู ุงูุถุฑุจ ุงูุฃุณุทูู ุนุงุฏุฉ ูุง ูููู ุฃูุถู ุฎุตุงุฆุต ุฒูู ุงููุตูู / ุงูุฅูุชุงุฌูุฉ ูู ุงูุงููุณุงู.  ุนูู ุณุจูู ุงููุซุงู ุ ูููุง ููู ุฎูุงุฑุงุช Intel Haswell: <br><img src="https://habrastorage.org/webt/i1/ej/l_/i1ejl__p9hfkduty-cn4vq0vzvu.png"></p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุถุน ุบูุฑ ุงูุณุฑูุน ููุฑูุงุถูุงุช ุ ูููู ุงุณุชุฎุฏุงูู ููุท ุฅุฐุง ูุงู ุงูุซุงุจุช ููุฉ ูุงุซููู. <br>  ุจุงูููุงุณุจุฉ ุ ุญุงููุช ูุคุฎุฑูุง ุฅุถุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐุง</a> ุงูุชุญุณูู ูู C #.  ุฃู  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ูุชุญ ููู ุจูููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ูุชูููู ุฌููุน ุงูุฅุญุฏุงุซูุงุช ุจููุฏุงุฑ 10 ูุฑุงุช ุ ูุณูู ุชุชุนุงูู * 0.1 ูุน ูุฐุง ุฃุณุฑุน ุจูุณุจุฉ 20-100 ูช ุ ููุง ูุฏ ูููู ููููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุณ ุงูุฃุณุงุณ ุงูููุทูู ู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">X * <span class="hljs-number"><span class="hljs-number">2</span></span> =&gt; X + X</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุงุฑูุฉ ูุน ุงูุตูุฑ ( <code>test</code> ) ุฃูุถู ูู ุงูููุงุฑูุฉ ูุน ุงููุญุฏุฉ ( <code>cmp</code> ) - ุจูุฏู ุงูุนูุงูุงุช ุงูุนุงูุฉ ููุชูุงุตูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">dotnet / coreclr # 25458</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">X &gt;= 1 =&gt; X &gt; 0 X &lt; 1 =&gt; X &lt;= 0 X &lt;= -1 =&gt; X &gt;= 0 X &gt; -1 =&gt; X &gt;= 0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุชุญุจ ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(X, <span class="hljs-number"><span class="hljs-number">0.5</span></span>) =&gt; <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(x) <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(X, <span class="hljs-number"><span class="hljs-number">0.25</span></span>) =&gt; <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(X)) <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(X, <span class="hljs-number"><span class="hljs-number">2</span></span>) =&gt; X * X ; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-function">mul </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(X, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>=&gt; X * X * X ; <span class="hljs-number"><span class="hljs-number">2</span></span> mul</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hd/ag/lm/hdaglmbx5f7zfibbpgzdre0swjo.png"></p><br><p style=";text-align:right;direction:rtl">  ูุง ุฑุฃูู ุ ูู ุนุฏุฏ ุนูููุงุช ุงูุถุฑุจ ุงูุชู ุชุญุชุงุฌูุง ูุญุณุงุจ <code>mod(X, 4)</code> ุฃู <code>X * X * X * X</code> ุ </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/118/3c0/f5d1183c005a7f72b6fbabdd18995d7e.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุงุซููู!  ููุฐูู ูุญุณุงุจ ุงูุฏุฑุฌุฉ ุงูุซุงูุซุฉ ุ ููู ุงูุญุงูุฉ 4 ูุณุชุฎุฏู ุณุฌู ูุงุญุฏ ููุท <code>xmm0</code> . </p><br><p style=";text-align:right;direction:rtl">  ุชุฏุนู ุงูุนุฏูุฏ ูู ุงููุนุงูุฌุงุช ุชุนูููุงุช ุฎุงุตุฉ (FMA) ุ ูุงูุชู ุชุณูุญ ูู ุจุฅุฌุฑุงุก ุงูุถุฑุจ ูุงูุฅุถุงูุฉ ูู ููุช ูุงุญุฏ ุ ูุน ุงูุญูุงุธ ุนูู ุงูุฏูุฉ ุฃุซูุงุก ุงูุถุฑุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">X * Y + Z =&gt; fmadd(X, Y, Z)</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jf/z5/nh/jfz5nh9fl6-wkx8cfmubntv7o4g.png"></p><br><p style=";text-align:right;direction:rtl">  ููุงู ูุซุงูุงู ุขุฎุฑุงู ูู ุงูุฃูุซูุฉ ุงูููุถูุฉ ูุฏู ููุง ุฅููุงููุฉ ุทู ุจุนุถ ุงูุฎูุงุฑุฒููุงุช ูู ุชุนูููุฉ ูุงุญุฏุฉ (ุฅุฐุง ูุงู ุงููุนุงูุฌ ูุฏุนููุง): <br><img src="https://habrastorage.org/webt/qj/pv/ya/qjpvya5-s-itzzxubosjpnwonkc.png"></p><br><h3 id="lovushki-dlya-optimizaciy" style=";text-align:right;direction:rtl">  ุงููุฎุงุฎ ุงูุฃูุซู </h3><br><p style=";text-align:right;direction:rtl">  ุฃุนุชูุฏ ุฃู ุงูุฌููุน ูููู ุฃูู ูุง ููููู ุงูุชุนุฌูู ูุชูููู ุงูุชุนุจูุฑุงุช ูุซูุงุซุฉ ุฃุณุจุงุจ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููู ูุณุฑ ุงูุดูุฑุฉ ูู ุจุนุถ ุงูููู ุงูุญุฏูุฏูุฉ ุ ุฃู ุชุฌุงูุฒ ุงูุณุนุฉ ุ ุฃู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ุงููุฎููุฉ ุ ุฅูุฎ. ... ูุญุชูู Bugzilla LLVM ุนูู ุงูุนุฏูุฏ ูู ุฃุฎุทุงุก InstCombine. </li><li style=";text-align:right;direction:rtl">  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูุฌุจ ุฃู ุชุนูู ุงูุชุญุณููุงุช ูุนูุง ูู ุชุณูุณู ูุญุฏุฏ. </li><li style=";text-align:right;direction:rtl">  ูุฏ ูุชู ุงุณุชุฎุฏุงู ุงูุชุนุจูุฑ ุฃู ุฃุฌุฒุงุก ููู ุงูุชู ุชุฑูุฏ ุชูููููุง ูู ููุงู ุขุฎุฑ ูุณูุคุฏู ุชูููููุง ุฅูู ุชุฏููุฑ ุงูุฃุฏุงุก. </li></ul><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุท ูููู ูุธุฑุฉ ุนูู ูุซุงู ููููุฑุฉ ุงูุฃุฎูุฑุฉ (ุชุฌุณุณุช ูู ููุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงูุงุชุฌุงูุงุช ุงููุณุชูุจููุฉ ูุชุญุณูู ุงููุชุฑุฌููู"</a> ). </p><br><p style=";text-align:right;direction:rtl">  ุชุฎูู ุฃู ูุฏููุง ูุฐุง ุงูููุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Foo1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> na = -a; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb = -b; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> na + nb; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุซูุงุซ ุนูููุงุช: <code>0 - a</code> ุ <code>0 - b</code> ุ ู <code>na + nb</code> .  ูููู ูุญุณู ุจุงููุณุจุฉ ููุง ูููู ูุฐุง ุฅูู ุงุซููู - <code>return -(a + b);</code>  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">define dso_local i32 @_Z4Foo1ii(i32, i32) { %3 = add i32 %0, %1 ; a + b %4 = sub i32 0, %3 ; 0 - %3 ret i32 %4 }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุชุฎูู ุฃููุง ูุญุชุงุฌ ุฅูู ูุชุงุจุฉ ุงูููู ุงููุชูุณุทุฉ <code>na</code> ู <code>nb</code> ูููุชุบูุฑุงุช ุงูุนุงูููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x, y; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Foo2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> na = -a; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb = -b; x = na; y = nb; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> na + nb; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ูุฒุงู ุงูููุญุณูู ูุฌุฏ ูุฐุง ุงูููุท ููุฒูู ุงูุนูููุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ (ูู ูุฌูุฉ ูุธุฑู) <code>0 - a</code> ู <code>0 - b</code> ุ ูููู ูู ุงูุญูููุฉ ุงุชุถุญ ุฃููุง ุถุฑูุฑูุฉ!  ููุชุจ ูุชุงุฆุฌ ูุฐู ุงูุนูููุงุช "ุบูุฑ ุงูุถุฑูุฑูุฉ" ูู ุงููุชุบูุฑุงุช ุงูุนุงูููุฉ!  ูุฐุง ูุคุฏู ุฅูู ูุฐุง ุงูููุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">define dso_local i32 @_Z4Foo2ii(i32, i32) { %<span class="hljs-number"><span class="hljs-number">3</span></span> = sub nsw i32 <span class="hljs-number"><span class="hljs-number">0</span></span>, %<span class="hljs-number"><span class="hljs-number">0</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span> - a %<span class="hljs-number"><span class="hljs-number">4</span></span> = sub nsw i32 <span class="hljs-number"><span class="hljs-number">0</span></span>, %<span class="hljs-number"><span class="hljs-number">1</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span> - b store i32 %<span class="hljs-number"><span class="hljs-number">3</span></span>, i32* @x, align <span class="hljs-number"><span class="hljs-number">4</span></span>, !tbaa !<span class="hljs-number"><span class="hljs-number">2</span></span> store i32 %<span class="hljs-number"><span class="hljs-number">4</span></span>, i32* @y, align <span class="hljs-number"><span class="hljs-number">4</span></span>, !tbaa !<span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">5</span></span> = add i32 %<span class="hljs-number"><span class="hljs-number">0</span></span>, %<span class="hljs-number"><span class="hljs-number">1</span></span> ; a + b %<span class="hljs-number"><span class="hljs-number">6</span></span> = sub i32 <span class="hljs-number"><span class="hljs-number">0</span></span>, %<span class="hljs-number"><span class="hljs-number">5</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span> - %<span class="hljs-number"><span class="hljs-number">5</span></span> ret i32 %<span class="hljs-number"><span class="hljs-number">6</span></span> }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุฑุจุน ุนูููุงุช ุฑูุงุถูุฉ ุจุฏูุง ูู ุซูุงุซุฉ!  ููุฏ ุฃุฎูููุง ููุญุณููููุง ููู ููู ููุชูุนูุง ุจุฃู ุงูุชุนุจูุฑุงุช ุงููุณูุทุฉ ุงูุชู ูุงู ุจุชุญุณูููุง ูุงูุช ูุง ุชุฒุงู ูุทููุจุฉ ูู ูุจู ุดุฎุต ูุง.  ุงูุขู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุฅุฎุฑุงุฌ C # RuyJIT ุ ุญูุซ ูุง ููุฌุฏ ูุซู ูุฐุง ุงูุชุญุณูู ุงูุฐูู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/fs/ar/jf/fsarjfwtbnpmp5hzbidevgo3eui.png"></p><br><p style=";text-align:right;direction:rtl">  ุซูุงุซ ุนูููุงุช ุจุฏูุงู ูู ุฃุฑุจุนุฉ - ุชุญููุช C # ุฅูู ุฃู ุชููู ุฃุณุฑุน ูู C ++ :-)!. </p><br><h3 id="a-nuzhny-li-takie-optimizacii" style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุชุญุณููุงุช ูุทููุจุฉุ </h3><br><p style=";text-align:right;direction:rtl">  ุฃูุช ูุง ุชุนุฑู ุฃุจุฏูุง ููู ุณูุจุฏู ุงูููุฏ ุจุนุฏ ุฃู ูููู ุงููุญูู ุงูุจุฑูุฌู ุจุชุถููู ูู ูุง ูู ูุณุนูุง ููุง ุฅุฐุง ูุงู ูููู ุทููุง ุจุดูู ูุณุชูุฑ ุฃู ูุณุฎูุง ุฃู ูุดุฑูุง ุฃู ุชุทููุฑูุง ุฃู ุงุณุชุฎุฏุงููุง.  - ุตูุฑุฉ ูุฎุชููุฉ ุชูุงูุง ุณูู ุชูุชุญ ูู.  ูุง ูุฑุชุจุท LLVM IR ู .NET IL ุจูุบุฉ ุจุฑูุฌุฉ ูุญุฏุฏุฉ ุ ููุง ููููู ุงูุชุฃูุฏ ูู ุฃู PL / ูุญุฏุฏุฉ ุฌุฏูุฏุฉ ูููููุง ุชุฑุฌูุฉ ููุณูุง ุจุดูู ูุนุงู ุฅูู IR.  ุญุณููุง ุ ููุงุฐุง ุชุชุญุฏุซ ุนู ุฐูู ุฅุฐุง ูุงู ููููู ุงุฎุชุจุงุฑ ุฃุฏุงุก InstCombine ูุฅููุงู ุชุดุบููู ูู ุชุทุจูู ูุนูู ุ-).  ูู ุบูุฑ ุงููุฑุฌุญ ุฃู ูููู ูุฐุง ูุฑููุง ูุซูุฑูุง ููุฅุนุฌุงุจ ุ ูููู ูู ูุฏุฑู. </p><br><h3 id="a-chto-na-schet-c" style=";text-align:right;direction:rtl">  ูุงุฐุง ุนู C #ุ </h3><br><p style=";text-align:right;direction:rtl">  ููุง ููุช ุ ุบุงูุจูุง ูุง ุชููู ุชุญุณููุงุช ุงูุชุนุจูุฑุงุช ุงูุชู ุฏุฑุณูุงูุง ุบุงุฆุจุฉ ูู C #.  ูููู ุนูุฏูุง ุฃููู C # ุฃุนูู ุฃู ููุช ุงูุชุดุบูู ุงูุฃูุซุฑ ุดุนุจูุฉ ูู CoreCLR ู RyuJIT.  ููู ุฅูู ุฌุงูุจ CoreCLR ุ ููุงู ุฃููุงุช ุชุดุบูู ุฃุฎุฑู ุ ุจูุง ูู ุฐูู ุชูู ุงูุชู ุชุณุชุฎุฏู LLVM ูุฎูููุฉ: Mono (ุงูุธุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุบุฑูุฏุฉ</a> ) ุ ู Unity Burst ุ ู IL2CPP (ุนุจุฑ clang) ู LILLC - ููุง ููููู ููุงุฑูุฉ ูุชุงุฆุฌ C ++ ุจุฃูุงู ูุน clang.  ุงูุฑุฌุงู ูู ุงููุญุฏุฉ ุญุชู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุฑูุฒ C ++ ุงูุฏุงุฎููุฉ ูู C # ุฏูู ุฃู ุฎุณุงุฑุฉ ูู ุงูุฃุฏุงุก ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฏููู</a> ! </p><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ุจุนุถ ูุชุญุงุช ุงูุชุญุณูู ุงูุชู ูููู ุงูุนุซูุฑ ุนูููุง ูู ููู <code>morph.cpp</code> ูู ุดูุฑุฉ ูุตุฏุฑ <code>morph.cpp</code> ูู ุงูุชุนูููุงุช (ูู ุงููุงุถุญ ุฃู ููุงู ุฃูุซุฑ ููููุงู): </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">*(&amp;X) =&gt; X X % <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> X / <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; X X % Y =&gt; X - (X / Y) * Y X ^ <span class="hljs-number"><span class="hljs-number">-1</span></span> =&gt; ~x X &gt;= <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; X &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> X &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; X &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> X + <span class="hljs-number"><span class="hljs-number">1</span></span> == C2 =&gt; X == C2 - C1 ((X + C1) + C2) =&gt; (X + (C1 + C2)) ((X + C1) + (Y + C2)) =&gt; ((X + Y) + (C1 + C2))</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุงูุนุซูุฑ ุนูู ุนุฏุฏ ูููู ุขุฎุฑ ูู lowering.cpp (ุงููุณุชูู ุงูููุฎูุถ) ุ ูููู ุจุดูู ุนุงู ุ ูู ุงููุงุถุญ ุฃู RyuJIT ูุฎุณุฑ ููุง ุฅูู ุงููุชุฑุฌููู C ++.  ูุฏู RyuJIT ุฃููููุงุช ูุฎุชููุฉ ููููุงู - ูุจู ุธููุฑ Tiering Compilation ุ ูุงู ูุญุชุงุฌ ุฅูู ุชูููุฑ ุณุฑุนุฉ ุชุฌููุน ููุจููุฉ ุ ููู ูุง ููุนูู ุจุดูู ุฌูุฏ ููุบุงูุฉ ุนูู ุนูุณ ูุฌูุนู C ++ (ุชุฐูุฑ ุญูู ูุณุงุฑ InstCombine ุงููููู ูู 30 ุณุทุฑูุง ูู LLVM ููุฑุงุกุฉ ุงูููุดูุฑ ุงููุซูุฑ ููุงูุชูุงู ุจุดูู ุนุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">" ุงูุญุฏูุซ "C ++ Lamentations"</a> ููู ุฃูุซุฑ ูุงุฆุฏุฉ ูุชุทููุฑ ุงูุชุญุณููุงุช ูู ูุฌุงู ุฅุถูุงุก ุงูุทุงุจุน ุงูุงูุชุฑุงุถู ุนูู ุงูููุงููุฉ ุ ูุงููุถุงุก ุนูู ุงูููุงููุฉ ูุงูุชุฎุตูุตุงุช (ููุณ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฎุตูุต Stack Object</a> ) ุ ูู ูุฐุง ุ ุจูู ุชุฃููุฏ ุ ุฃูุซุฑ ุฃูููุฉ ุจูุซูุฑ ูู ุชูููู ุชูุณูู ุฌูุจ ุงูุฌูุจ ุฅูู ุฌูุจ ุงูุชูุงู. </p><br><p style=";text-align:right;direction:rtl">  ุฑุจูุง ูุน ุธููุฑ Tiering Compilation ุ ูุน ูุฑูุฑ ุงูููุช ุ ุณูููู ููุงู ุงูุนุฏูุฏ ูู ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ ุบูุฑ ุงูุญุงุณูุฉ ูููุช ุงูุชุฌููุน ูููุณุชูู 1 ุฃู ุญุชู ุงููุณุชูู 2.  ุฑุจูุง ุญุชู ูุน ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงููุธููุฉ ุงูุฅุถุงููุฉ ู DSL - ููุฏ ูุฑุฃุช ููุชู ูุฐู ุงูููุงูุฉ ุ ุญูุซ ุฃุถุงู Prathamesh Kulkarni ุชุญุณูู ุงูุชุนุจูุฑ ูู ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ูู ุจุถุน ุณุทูุฑ DSL ููุท: </p><br><pre style=";text-align:right;direction:rtl"> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">simplify</span></span> (<span class="hljs-name"><span class="hljs-name">plus</span></span> (<span class="hljs-name"><span class="hljs-name">mult</span></span> (<span class="hljs-name"><span class="hljs-name">SIN</span></span> @<span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">SIN</span></span> @<span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-name"><span class="hljs-name">mult</span></span> (<span class="hljs-name"><span class="hljs-name">COS</span></span> @<span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">COS</span></span> @<span class="hljs-number"><span class="hljs-number">0</span></span>))) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag_unsafe_math_optimizations</span></span>)<span class="hljs-number"><span class="hljs-number">1</span></span>. { build_one_cst (<span class="hljs-name"><span class="hljs-name">TREE_TYPE</span></span> (@<span class="hljs-number"><span class="hljs-number">0</span></span>))<span class="hljs-comment"><span class="hljs-comment">; }))</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฐุง ุงูุชุนุจูุฑ ูู ูุชุงุจ ุงูุฑูุงุถูุงุช ุ-): </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>^<span class="hljs-number"><span class="hljs-number">2</span></span>(X) + <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>^<span class="hljs-number"><span class="hljs-number">2</span></span>(X) equals to <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><h3 id="poleznye-ssylki" style=";text-align:right;direction:rtl">  ุฑูุงุจุท ูููุฏุฉ </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงูุงุชุฌุงูุงุช ุงููุณุชูุจููุฉ ูุชุญุณูู ุงููุชุฑุฌููู"</a> ุ Nuno P. Lopes ู John Regehr </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ููู LLVM ูุญุณู ูุธููุฉ"</a> ุ ุฌูู Regehr </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงูุฐูุงุก ุงููุฏูุด ูููุชุฑุฌููู ุงูุญุฏูุซูู"</a> ุฏุงููุงู ููููุฑ </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุฅุถุงูุฉ ุซูุจ ุงูุจุงุจ ุงูุฃูุซู ูุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู"</a> ุ Prathamesh Kulkarni </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"1. C ++ ุ C # ู Unity"</a> ุ ูููุงุณ ูุงูุฑ </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงูุญุฏูุซ + C ุงูุฑุซุงุก"</a> ุ ุฃุฑุงุณ Pranckeviฤius </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุชุญุณููุงุช ุนูู ูุญู ุตุญูุญ ูู ุฎูุงู ุซูุจ ุงูุจุงุจ ูุน Alive"</a> ู Nuno P. Lopes ู David Menendez ู Santosh Nagarakatte ู John Regehr </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar458150/">https://habr.com/ru/post/ar458150/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar458136/index.html">GitLab ุฌุฏูุฏ 12.0 ูุน ูุฑุงุฌุนุงุช ูุฑุฆูุฉ ููุงุฆูุฉ ูู ุงูุชุจุนูุงุช</a></li>
<li><a href="../ar458142/index.html">ุชุทููุฑ ุงูุฏูุงุน ุนูู Svelte</a></li>
<li><a href="../ar458144/index.html">ุฃุฎุจุงุฑ ุงูุฃุณุจูุน: Raspberry Pi 4 ููุจูุน ุ ุงูุฅูุชุฑูุช ุนูู ุงูุชุญุงู ุงูุฏููุฉ ุงูููุญุฏุฉ ุ ุฎุฏูุงุช Roskomnadzor ู VPN ุ ุดุจูุฉ ุนุตุจูุฉ ุชุฌุฑุฏ ุงููุงุณ</a></li>
<li><a href="../ar458146/index.html">ููุชูุญ ุงููุตุฏุฑ ุชุทุจูู ูุญุงุณุจุฉ ุงูุงุชุตุงูุงุช ูู ุงูููุทูุฉ</a></li>
<li><a href="../ar458148/index.html">ุงูุงููุชุฑูููุงุช ุงูุฑุฌุนูุฉ. ุงูุณุงุนุงุช ุงูุฐููุฉ ูู 80s</a></li>
<li><a href="../ar458156/index.html">ููุงุฑูุฉ PostgreSQL ูุน FreeBSD ู CentOS ู Ubuntu Debian ู openSUSE</a></li>
<li><a href="../ar458160/index.html">ููู ุงูุฃููููุฉ ูู. NET</a></li>
<li><a href="../ar458168/index.html">ููููู ุขูุฉ ุงูุชุนูู ูุงูุฐูุงุก ุงูุงุตุทูุงุนู</a></li>
<li><a href="../ar458170/index.html">ุงูุงูุบูุงุณ ูู ุงูุดุจูุงุช ุงูุนุตุจูุฉ ุงูุชูุงููููุฉ. ุงูุฌุฒุก 5/10 - 18</a></li>
<li><a href="../ar458172/index.html">ุทุฑู ููุฒุงูุฌุฉ ุงูุชูุตููุงุช ุงูููุฑุจุงุฆูุฉ ุนูุฏ ุชุชุจุน ุงูุฃุฒูุงุฌ ุงูุชูุงุถููุฉ ุนูู ููุญุงุช ุงูุฏูุงุฆุฑ ุงููุทุจูุนุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>