<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✍🏼 👨🏽‍🔬 🈶 Behandlung von asymmetrischem FHRP-Routing 👩🏾‍🏭 🍘 🤚🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Was ist „asymmetrisches FHRP-Routing“? 


 Ein Routing-Status, in dem der Datenverkehr innerhalb einer Sitzung über einen FHRP-Master-Router (VRRP / H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Behandlung von asymmetrischem FHRP-Routing</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427939/"><h2 id="chto-takoe-fhrp-asymmetric-routing">  Was ist „asymmetrisches FHRP-Routing“? </h2><br><p>  Ein Routing-Status, in dem der Datenverkehr innerhalb einer Sitzung über einen FHRP-Master-Router (VRRP / HSRP) abläuft und über einen zweiten zurückkehrt. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c77/c2c/043/c77c2c043dbf16971955a93d3e55d6de.png" alt="Bild"></p><br><h2 id="chto-v-etom-plohogo">  Was ist daran so schlimm? </h2><a name="habracut"></a><br><p>  Wenn sich alle Router im selben LAN befinden - höchstwahrscheinlich nichts. <br>  Probleme beginnen, wenn die Netzwerktopologie folgendermaßen aussieht: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/513/d0c/f1c/513d0cf1c7fa48fb5bd25c791b31f474.png" alt="Bild"></p><br><blockquote>  1. MTU-Erkennung - Wenn sich die kleinste MTU der beiden Pfade unterscheidet, kann die Endpunkt-MTU-Pfaderkennung zu einer größten der beiden MTUs führen, was wiederum zum Verwerfen von Paketen maximaler Größe führt.  Wenn beispielsweise ein Pfad durch einen VPN-Tunnel führt und der andere nicht, hat der VPN-Tunnel eine kleinere MTU.  Ping funktioniert einwandfrei, aber die Übertragung großer Dateien schlägt konsistent fehl. <br>  2. Die Behebung von Konnektivitätsproblemen ist schwieriger, wenn einer der beiden Pfade unterbrochen ist, der andere jedoch nicht.  Eine gute alte "Traceroute" ist überhaupt keine Hilfe, da sie die Zwischenpunkte des umgekehrten Pfades nicht erkennen kann, es sei denn, sie wird von beiden Seiten der Verbindung ausgeübt, was einen Out-of-Band-Verwaltungskanal erfordert. </blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> </p><br><h2 id="pochemu-tak-poluchaetsya">  Warum ist das so? </h2><br><p>  Der Upstream-Router (Core-R-1) verfügt nicht über Informationen zu den Rollen von Downstream-Routern in FHRP. </p><br><p>  Die Entscheidung für eine Route wird autonom getroffen, basierend auf den Metriken des dynamischen Routing-Protokolls oder PBR. </p><br><h2 id="kak-eto-ispravit">  Wie kann ich das beheben? </h2><br><p>  <strong>Unter dem Gesichtspunkt des Verkehrsflusses: Der</strong> Verkehr sollte über denselben Router und VPN-Tunnel wiederkommen </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/78b/72a/744/78b72a744bb3ecacc027fd9f5e744286.png" alt="Bild"></p><br><p>  <strong>In Bezug auf das Routing:</strong> <br>  Upstream-Router sollten FHRP-Statusinformationen erhalten. </p><br><p>  Beispielsweise sollte eine Route zu einem Subnetz mit Endgeräten nur vom FHRP-Master bei normaler Entwicklung von Ereignissen angekündigt werden. </p><br><p>  <strong>Wie funktioniert es</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/fc1/4e3/e56/fc14e3e56025e061d7c50fa6b67125d0.png" alt="Bild"></p><br><h2 id="testovyy-stend-gns3-mikrotik-bgp-vrrp">  Prüfstand (GNS3, MikroTik, BGP, VRRP). </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/42d/d67/b46/42dd67b467a266e16db6119dfe0d547a.png" alt="Bild"></p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Download-Link</a> </li><li>  Router-Anmeldeinformationen: <br>  A. Login: admin <br>  B. Pass: <em>Nein</em> </li></ol><br><h2 id="bonus-dlya-teh-kto-dochital-do-konca">  Bonus für diejenigen, die bis zum Ende gelesen haben </h2><br><p>  Die Verwendung von 100.500 dedizierten / 30 IPv4-Subnetzen ist optional. <br>  Um das Problem zu lösen, können dynamische verbindungslokale IPv6-Adressen verwendet werden, was die anfängliche Bereitstellung erheblich vereinfacht. </p><br><p>  Die Lösung (in der Implementierung für MikroTik RouterOS) lautet wie folgt: <br><img src="https://habrastorage.org/getpro/habr/post_images/cfd/5f2/d45/cfd5f2d450ca7fd0c21908a082fed152.png" alt="Bild"></p><br><p>  <em>© Idea - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Webfox</a> , Artikel- und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Standmontage</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Maniak</a></em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427939/">https://habr.com/ru/post/de427939/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427929/index.html">Arbeitsministerium: Testaufgabe ist ein Arbeitsverhältnis</a></li>
<li><a href="../de427931/index.html">Internetinformationsarchitektur Teil 4</a></li>
<li><a href="../de427933/index.html">Meinung der Steam-Entwickler: Maximaler Umsatz und geringe Verantwortung für das Ventil</a></li>
<li><a href="../de427935/index.html">Neuinstallation von vorinstalliertem Windows 8 Ende 2018</a></li>
<li><a href="../de427937/index.html">Codierbar für API-Anfragen und wie man Code ordnet</a></li>
<li><a href="../de427941/index.html">Stellen Sie den Kubernetes HA-Cluster auf Baremetal mit Kubeadm und Keepalived bereit (einfache Anleitung).</a></li>
<li><a href="../de427943/index.html">Wir warten auf serielle 8K OLED LG-Fernseher im Juni 2019, die Veröffentlichung kann sich verzögern</a></li>
<li><a href="../de427945/index.html">Hypervisor für Dummies</a></li>
<li><a href="../de427947/index.html">Neuronale Netze verstehen nicht, was optische Täuschungen sind.</a></li>
<li><a href="../de427949/index.html">Unsere mangelnde Bereitschaft zur Änderung hindert uns daran, Statistiken zu verstehen.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>