<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👿 👩🏽 ⛹🏽 Mode de restriction d'accès pour les accessoires sur les appareils iOS et comment le contourner 🐢 👍 🤙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, je vais parler d'une solution techniquement intéressante d'Apple, grâce à laquelle la société a essayé de protéger ses appareils contre l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mode de restriction d'accès pour les accessoires sur les appareils iOS et comment le contourner</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462149/">  Aujourd'hui, je vais parler d'une solution techniquement intéressante d'Apple, grâce à laquelle la société a essayé de protéger ses appareils contre la devinette des mots de passe - et ce qui en est résulté.  Tout d'abord, je répondrai à la question: pourquoi ai-je besoin d'un mode de restriction d'accès aux accessoires de l'iPhone. <br><br><h2>  Protection contre le piratage du code de verrouillage d'écran </h2><br>  L'histoire de base sur la sécurité iOS est encore à venir.  Maintenant, je veux me concentrer sur une caractéristique assez controversée d'iOS, qui rend la sécurité de toutes les données utilisateur à la fois dans l'appareil et dans le compte cloud dépendante d'un seul facteur: le code de verrouillage d'écran.  Si le code de verrouillage d'écran est connu, pratiquement toutes les données peuvent être extraites de l'iPhone, y compris les mots de passe des comptes.  Protection de sauvegarde par mot de passe?  Non, ils n'ont pas entendu: c'est comme s'il y en avait, mais pour le réinitialiser, connaître le code de verrouillage est une question de quelques secondes.  Dissocier un téléphone volé d'iCloud?  Si le code de verrouillage est connu - pas de problème du tout;  Le mot de passe iCloud change en quelques secondes et l'ancien mot de passe de l'identifiant Apple n'est pas nécessaire.  Authentification à deux facteurs?  Super, assurez-vous de l'allumer!  Mais seulement si le code de verrouillage est connu, l'ensemble de l'appareil devient le tout deuxième facteur.  Je mentionne humblement des choses telles que la base de données de mots de passe de l'utilisateur dans iCloud, ses messages SMS et iMessage, ainsi que les données de santé que nos programmes peuvent décrypter en utilisant le code de verrouillage (si nécessaire, réinitialiser d'abord le mot de passe à partir du "cloud" en utilisant le même code de verrouillage unique). <a name="habracut"></a><br><br>  Connaître le code de verrouillage de l'iPhone peut faire un certain nombre de choses incroyables;  le pays devrait connaître ses héros, et j'écrirai à ce sujet en détail.  Sans surprise, la dernière ligne de défense restante - en fait, le code de verrouillage d'écran - chez Apple est gardée comme la prunelle des yeux.  Pendant plusieurs années consécutives, la longueur du code de verrouillage par défaut n'est pas 4, mais 6 chiffres.  Secure Element, le composant matériel du sous-système de sécurité Secure Enclave, dont le succès varie, limite la vitesse de recherche.  Ainsi, pour l'iPhone qui vient d'être allumé (ou redémarré), la vitesse de recherche sera lente;  nous avons été appelés des chiffres de l'ordre de 19 ans pour énumérer complètement l'espace du mot de passe.  (Cependant, personne ne casse le code de verrouillage à 6 chiffres avec des attaques frontales; des dictionnaires sont utilisés dans lesquels les codes de verrouillage sont triés par fréquence d'utilisation). <br><br><h2>  Protection contre la récupération des données </h2><br>  Il semblerait qu'un code de verrouillage à 6 chiffres et 19 ans de casse n'est déjà pas mauvais.  Cependant, les progrès ne s'arrêtent pas et il existe déjà au moins deux solutions sur le marché (le développement des sociétés Cellebrite et GrayShift pour la police et les services spéciaux) qui peuvent accélérer considérablement la recherche dans les cas où le téléphone est entré dans l'AFU (After First Unlock, c'est-à-dire qu'il a été supprimé de l'utilisateur à l'état activé et l'utilisateur a déverrouillé l'appareil au moins une fois après un redémarrage).  De plus, pour de tels appareils (et cela, notons-le, la grande majorité des téléphones saisis), ces solutions ont également un mode spécial dans lequel une partie des données (ici je m'excuse à l'avance - sans détails) est récupérée même sans avoir besoin de casser le code de verrouillage.  Désespéré de protéger leurs appareils contre les vulnérabilités exploitées par Cellebrite et GrayShift, Apple a décidé de prendre une mesure désespérée qui a provoqué un débat houleux parmi toutes les personnes impliquées.  Cette étape est l'introduction à iOS 11.4.1 (et une amélioration supplémentaire dans iOS 12) du mode de restriction d'accès ou du mode restreint USB. <br><br><h2>  Restriction d'accès USB </h2><br>  Étant donné que GrayKey et Cellebrite UFED (ou le service CAS) se connectent à l'iPhone pour transférer des données via le port Lightning (ce qui est exactement le cas, ils n'utilisent aucun service ou port de diagnostic), alors désactivons-nous complètement ce port?  Non, nous lui permettrons de facturer (et même dans ce cas pas de frais), mais nous piraterons complètement la possibilité de transfert de données!  Avec le mode de transfert de données désactivé, GrayKey et UFED ne pourront même pas voir l'iPhone, et plus encore - en extraire des informations! <br><br>  Nous sommes donc passés au mode de restriction d'accès, ou au mode restreint USB.  Les deux noms ne sont pas officiels;  Apple lui-même ne met pas particulièrement en valeur ce mode.  L'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Utilisation des accessoires USB avec iOS 11.4.1 et versions ultérieures</a> dit ce qui suit: <br><br>  <i>Dans iOS 11.4.1 et versions ultérieures, [...] vous devrez peut-être déverrouiller l'appareil pour reconnaître et utiliser l'accessoire ultérieurement.</i>  <i>L'accessoire restera connecté, même si l'appareil est par la suite bloqué.</i>  <i>Si vous ne déverrouillez pas d'abord le périphérique iOS protégé par mot de passe (ou le déverrouillez et le connectez à un accessoire USB dans la dernière heure), le périphérique iOS n'interagira pas avec l'accessoire ou l'ordinateur et, dans certains cas, il pourrait ne pas se charger.</i>  <i>Une notification peut également apparaître indiquant que l'appareil doit être déverrouillé pour utiliser des accessoires.</i> <br><br>  Ce qui suit décrit les étapes afin de désactiver cette fonctionnalité (par défaut - active). <br><br>  <i>Vous pouvez faire en sorte que votre appareil iOS ait toujours accès aux accessoires USB.</i>  <i>[...] Sur de nombreux appareils auxiliaires, un paramètre est automatiquement activé, ce qui permet d'accéder aux appareils USB lors de la première connexion.</i>  <i><b>(Je clarifierai: il y a une inexactitude de traduction claire. L'article original en anglais utilise le libellé «De nombreux appareils d'assistance activent automatiquement le paramètre pour autoriser les appareils USB la première fois qu'ils sont connectés», c'est-à-dire que «de nombreux appareils à accès universel peuvent activer automatiquement ce ». Sur les appareils eux-mêmes, comme indiqué dans le texte en langue russe d'Apple, en fait, rien n'est allumé).</b></i> <i><br><br></i>  <i>Si vous ne vous connectez pas régulièrement aux accessoires USB, vous devrez peut-être activer cette option manuellement.</i> <i><br><br></i>  <i>Dans le menu Paramètres, sélectionnez «Face ID et code de mot de passe» ou «Touch ID et code de mot de passe» et activez l'accès aux accessoires USB dans la section «Accès à l'écran verrouillé».</i> <br><br>  <i>Si l'accès aux accessoires USB est désactivé [...], vous devrez peut-être déverrouiller votre appareil iOS pour vous connecter aux accessoires USB.</i> <i><br><br></i>  <i>Remarque: le mode de restriction d'accès est activé lorsque le commutateur d'accessoires USB est désactivé.</i> <br><br>  Soit dit en passant, le mode de restriction d'accès pour les accessoires est instantanément activé lorsque l'utilisateur active le mode SOS sur le téléphone, pour lequel, selon le modèle, vous devez appuyer plusieurs fois sur le bouton d'alimentation de l'écran (3 ou 5 selon le marché), ou maintenir le bouton enfoncé allumez l'écran et l'un des boutons de contrôle du volume. <br><br>  Que fait ce mode?  En mode de restriction d'accès aux accessoires, l'iPhone ou l'iPad désactive complètement tout échange de données via le port Lightning intégré à l'appareil.  La seule chose qui reste disponible est la recharge (en pratique, même ce n'est pas toujours le cas).  Du point de vue d'un ordinateur ou d'un autre appareil auquel l'iPhone sera connecté en mode protecteur, le téléphone ne sera pas différent d'une batterie externe. <br><br>  Comment ça marche?  Au niveau philistin - très bien.  Oubliez iOS 11.4.1, après tout, cette version du système existe depuis plus d'un an.  Dans les versions actuelles d'iOS (à partir d'iOS 12), l'accès aux accessoires est bloqué au moment même où l'utilisateur verrouille l'écran de l'iPhone.  Il y a des exceptions;  par exemple, si vous connectez votre téléphone à un ordinateur ou à d'autres accessoires "numériques" de temps en temps (l'adaptateur pour casque 3,5 mm n'est "pas pris en compte", plus de détails ci-dessous), le mode de protection ne sera pas activé immédiatement après le verrouillage de l'écran, mais après une heure. <br><br>  Si vous essayez de connecter un iPhone verrouillé à un ordinateur, l'ordinateur ne verra rien: même les informations de base sur l'appareil (comme le modèle, le numéro de série et la version iOS) ne sont pas disponibles.  Une notification contextuelle apparaîtra sur l'appareil lui-même, proposant de déverrouiller l'iPhone pour utiliser l'accessoire. <br><br>  Théoriquement, le mode de protection est assez fiable: le téléphone refusera toujours de communiquer avec l'ordinateur, même s'il est redémarré.  Si vous mettez l'iPhone en mode de récupération ou DFU, il devient disponible à partir de l'ordinateur - mais il n'est pas possible d'énumérer les mots de passe dans ces modes.  Vous pouvez même remplir le dernier firmware (nous l'avons fait), mais lors du chargement ultérieur sur le système, le port est à nouveau désactivé.  En d'autres termes, au niveau philistin, la protection fonctionne. <br><br>  Et pas au niveau philistin?  Nous connaissons deux solutions dont les développeurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">auraient</a> pu contourner la protection.  Il s'agit de Cellebrite (une solution hors ligne UFED Premium et un service CAS) et GrayShift (une solution matérielle grayKey).  Sous certaines conditions (les conditions n'ont pas été divulguées), les deux fabricants peuvent se connecter à l'iPhone avec un port "bloqué" et mener une attaque sur le code de verrouillage (et dans certains cas, extraire des informations sans le code de verrouillage). <br><br>  Ainsi, Apple n'a réussi à atteindre son objectif que partiellement.  Oui, l'iPhone est un peu plus sûr.  Ni un pirate accidentel, ni même les artisans de gangs criminels à la recherche d'iPhone volés ne peuvent contourner cette protection.  Mais la police et les services spéciaux ont des chances et sont plutôt bons. <br><br><h2>  Vulnérabilités de limite d'accès </h2><br>  Je vais immédiatement faire une réservation: je ne sais pas (je ne peux pas «dire», mais je ne sais vraiment pas) les vulnérabilités que Cellebrite et GrayShift utilisent pour contourner la protection des restrictions.  Je ne peux faire d'hypothèses qu'à partir d'informations obtenues de sources publiques.  La première hypothèse est une vulnérabilité du protocole Lightning.  Rappelez-vous, j'ai mentionné l'adaptateur du connecteur Lightning à la sortie casque 3,5 mm?  Cet adaptateur n'obéit pas aux règles générales: sa connexion ne réinitialise pas le minuteur d'activation du mode de protection, et si le mode de protection a déjà été activé, vous pouvez connecter et utiliser cet adaptateur sans déverrouiller l'iPhone. <br><br>  Pendant ce temps, contrairement à de nombreux adaptateurs USB de type C similaires qui utilisent le mode Alt USB pour transmettre un signal analogique, cet adaptateur est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">appareil</a> numérique à part entière <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avec une puce DAC intégrée</a> .  Autrement dit, même en mode «protecteur», l'iPhone transmet toujours certaines données via un port apparemment bien bloqué.  Mais que se passe-t-il si notre appareil «fait semblant» d'être un adaptateur pour activer le port, et qu'il suit la chaîne des vulnérabilités?  Ce n'est qu'une hypothèse, mais l'option semble plausible. <br><br>  La deuxième hypothèse est à nouveau la vulnérabilité Lightning, mais quelque peu d'un autre côté.  Récemment, il s'est avéré qu'un autre adaptateur Apple, l'adaptateur Lightning vers HDMI, est en fait un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ordinateur avec Secure Boot et Darwin Core intégrés</a> .  De plus, cet adaptateur n'a pas son propre firmware;  le firmware y est téléchargé depuis l'iPhone à chaque fois qu'un utilisateur connecte un adaptateur.  Dans le même temps, le firmware n'est pas signé avec un identifiant unique, la signature numérique est statique.  Il est peu probable que la vulnérabilité ait été trouvée dans cet adaptateur particulier, mais l'idée semble assez prometteuse. <br><br>  Enfin, il existe également des dispositifs «d'accès universel» qui peuvent être utilisés par les malvoyants, les personnes ayant une déficience motrice fine et d'autres catégories d'utilisateurs qui ont besoin de dispositifs spéciaux pour communiquer avec l'iPhone.  Cette catégorie d'appareils a un statut spécial;  selon la documentation Apple, leur utilisation entraîne la désactivation des restrictions d'accès aux accessoires.  Vous pouvez essayer d'imaginer une attaque dans laquelle notre appareil apparaîtra d'abord comme un adaptateur 3,5 mm (l'échange de données a commencé), puis comme un accessoire pour les personnes ayant une déficience motrice fine (en d'autres termes, un clavier externe). <br><br>  Pourquoi est-ce que je pense que la vulnérabilité réside dans le protocole Lightning?  Sur le marché noir, vous pouvez trouver à la fois des modèles «d'ingénierie» de différentes versions de l'iPhone, dans lesquels une partie du matériel de protection est désactivée, ainsi que des câbles spéciaux qui offrent des fonctions supplémentaires.  C'était un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> détaillé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en anglais</a> ;  voici un article en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">russe qui y fait</a> référence.  Et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici, ils ont</a> posté une photo d'un câble d'ingénierie spécial - hélas, sans détails.  Plus en détail sur Lightning en général, vous pouvez lire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  Y a-t-il un avantage à restreindre l'accès aux accessoires? </h2><br>  Quelle est l'utilité du mode de restriction d'accès?  Après tout, Cellebrite et GrayShift peuvent-ils contourner cela?  Ici, je veux faire attention à deux choses.  Premièrement, peu de gens savent exactement comment, dans quels cas et pour quelles combinaisons particulières de versions matérielles et iOS, les deux sociétés mentionnées peuvent contourner le mode de protection.  Les informations sont délivrées par les entreprises de manière strictement dosée, strictement confidentielle et exclusivement aux utilisateurs de leurs produits après signature d'un accord de confidentialité.  Deuxièmement, les utilisateurs des produits des deux sociétés sont exclusivement des services répressifs et des services spéciaux d'un certain nombre de pays, dont la Russie n'est pas actuellement incluse.  Ainsi, rien ne menace personnellement vos données et votre appareil sur le territoire de la Russie: d'autres solutions similaires n'existent tout simplement pas maintenant. <br><br>  Ainsi, en utilisant ce mode (il est activé automatiquement pour tous les utilisateurs et reste actif si vous-même ou l'un des accessoires d'accès universel ne le désactivez pas), vous pouvez obtenir immédiatement un degré de protection supplémentaire contre le craquage de mot de passe et la fuite de données après le verrouillage de l'écran.  Cependant, même si vous avez connecté votre iPhone à un ordinateur ou à un adaptateur au cours des trois derniers jours, le transfert de données sera toujours bloqué pendant une heure. <br><br>  Liens connexes: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iOS 12 améliore le mode restreint USB</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mode restreint USB à l'envers</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iOS 11.4.1 Second Beta étend le mode restreint USB avec une activation manuelle</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462149/">https://habr.com/ru/post/fr462149/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462133/index.html">Encore une fois sur Chypre, les nuances de la vie</a></li>
<li><a href="../fr462135/index.html">Partenariat stratégique: pourquoi ServiceNow fait équipe avec un grand fournisseur de cloud</a></li>
<li><a href="../fr462141/index.html">Panier pour un centre de données</a></li>
<li><a href="../fr462145/index.html">Pourquoi faut-il plusieurs jours pour se désinscrire?</a></li>
<li><a href="../fr462147/index.html">Utilisation de la navigation lors de la refactorisation d'un héritage de projet dans React Native</a></li>
<li><a href="../fr462151/index.html">5 principales distributions Kubernetes</a></li>
<li><a href="../fr462153/index.html">Shaders de carte interactive Unity</a></li>
<li><a href="../fr462155/index.html">Travaillez avec Worker «comme vous le souhaitez», pas «autant que possible»</a></li>
<li><a href="../fr462159/index.html">Construire un système de reconnaissance faciale basé sur Golang et OpenCV</a></li>
<li><a href="../fr462161/index.html">Expérience d'installation d'Apache Airflow sur Windows 10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>