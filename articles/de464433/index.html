<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👰🏻 👩🏽‍🏫 ⏰ Mobile Cloud-Testplattformen 🖼️ 👨‍👧‍👦 👐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Und jetzt ist die Zeit gekommen, in der unsere Testanforderungen auf dem Desktop des Testers überfüllt sind. Die Seele fragte nach den Wolken. Nicht w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mobile Cloud-Testplattformen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464433/"><p>  Und jetzt ist die Zeit gekommen, in der unsere Testanforderungen auf dem Desktop des Testers überfüllt sind.  Die Seele fragte nach den Wolken.  Nicht wirklich.  Nicht wirklich. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/2o/7s/ww/2o7swwlml3ipcdpgc8qzmkyfdja.jpeg"></div><a name="habracut"></a><br><h1>  Unsere Ziele und Vorgaben </h1><br><p>  <i>(Eiliger Leser, Sie können mit dem nächsten Abschnitt fortfahren)</i> </p><br><p>  Wir entwickeln eine Finanzanwendung für den ausländischen Markt, die in verschiedenen Formaten verfügbar ist: für Desktop-Browser (Website und Erweiterung für Google Chrome), für mobile Browser sowie eine Hybridanwendung für Telefone.  Aufgrund der Besonderheiten der Anwendung legen wir besonderes Augenmerk auf das Testen der Anwendung auf verschiedenen Konfigurationen und Geräten.  Für uns ist der stabile und sichere Betrieb der Anwendung sowohl auf den Desktop-Browsern unserer Kunden als auch auf deren Geräten wichtig. </p><br><p>  Der Grund für die Suche nach einer Cloud-basierten Farm von Geräten zum Testen für uns war eine Änderung des Arbeitsformats von Büro zu vollständig entfernt und verteilt (zwischen Städten und Ländern).  Das heißt, wenn wir früher zum Testen verschiedene Geräte in einem Bündel (buchstäblich) zusammenbauen und gleichzeitig die nächste Baugruppe in einer Tabelle manuell testen könnten, ist dies jetzt unmöglich geworden.  Darüber hinaus automatisieren wir mit zunehmender Funktionalität die Regressionssätze wichtiger Tests, um die manuelle Arbeit zu reduzieren. Dies bedeutet, dass wir nach der Montage Tests für die gewünschte Konfiguration und das gewünschte Gerät aufrufen müssen. Dies ist besser, sobald die Montage zur Bereitstellung rollt. </p><br><p>  In diesem Fall besteht die einfachste und naheliegendste Lösung darin, Emulatoren für Android und Simulatoren für iOS-Geräte in unserer DevOps-Pipeline zu verwenden.  Die Implementierung auf dem Arbeitscomputer des Entwicklers ist jedoch relativ einfach und wird in der Cloud zu einer schwierigen und teuren Aufgabe.  Damit derselbe Android-Emulator schnell funktioniert, ist ein x86-Server mit HAXVM-Unterstützung erforderlich, und für einen iOS-Simulator ist nur ein MacOS-Gerät mit xcode erforderlich.  Aber leider bleibt die Frage nach der Lösung dieses Problems bei der Lücke zwischen dem Verhalten der Software auf Emulatoren und realen Geräten.  Zum Beispiel entdecken wir bei jeder zweiten Veröffentlichung seltsame Fehler auf Samsung-Geräten, die nicht auf Emulatoren abgespielt werden können.  Nun, und natürlich seltene exotische "chinesische" "Freude" mit einzigartigen und Fehlern, die ich auch in der Entwicklungsphase gerne fangen würde. </p><br><p>  Infolgedessen hatten wir Verständnis für die Notwendigkeit, eine Cloud-Farm mobiler Geräte zu verwenden, auf der wir unsere Tests schnell ausführen und bei Bedarf manuell debuggen konnten.  Und auf die unser gesamtes Team von überall auf der Welt zugreifen kann (wir lieben es, auch auf Reisen zu arbeiten). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/mv/-3/tkmv-3efjgaskkz1tbveeo0rh-4.jpeg"></div><br><p>  Unsere Tests sind in Python 3.7 geschrieben (dies wird später wichtig sein), da wir als Stapel tox + pytest + Selenium + Appium verwenden, also eine kleine Reihe nützlicher Python-Bibliotheken.  Wir werden auf jeden Fall Computer unter Windows und MacOS mit Edge-, Firefox-, Chrome-, Safari-Browsern sowie Android- und iOS-Geräten mit Browsern und einer Anwendung testen.  Wir haben nicht viele Tests für jedes Gerät (weniger als tausend), aber wenn Sie in einem einzelnen Thread auf den Geräten testen, dauert ein vollständiger Satz einige Stunden.  Daher ist das Kriterium für die Auswahl eines Dienstes für uns: </p><br><ul><li>  API-Tests (Selen / Appium) </li><li>  IOS, Android-Geräte </li><li>  Unterstützt das Testen mobiler Browser </li><li>  Unterstützung für das Herunterladen und Testen von Anwendungen </li><li>  Referenzgerät (GooglePixel (Android 9) und iPhone X (iOS 12+)) </li><li>  Manuelles Debuggen </li><li>  Protokollierung (plus Screenshots, Aufzeichnung eines Videolaufs) </li><li>  Gerätepark und Verfügbarkeit </li><li>  Durchschnittliche Testvorlaufzeit </li><li>  Preis </li></ul><br><p>  Wünschenswert, aber nicht notwendig: </p><br><ul><li>  Python-Unterstützung auf Service-Ebene (was auch immer das bedeutet) </li><li>  Unterstützung für Desktop-Geräte \ Browser </li></ul><br><h1>  Marktforschungsergebnisse </h1><br><p>  Eine Woche lang habe ich im Internet gesurft und ein Dutzend verschiedene Dienste ausprobiert.  Die meisten von ihnen bieten Freizeit für Testmöglichkeiten.  Die Ergebnisse meiner Forschung, je mehr Schlussfolgerungen subjektiv sind.  Ihre Meinung und Ergebnisse können von meinen abweichen. </p><br><p>  Auf Habré habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel für 2017 gefunden</a> , der sich dem gleichen Thema widmet, aber seitdem sind neue Dienste erschienen, und unsere Aufgabe ist etwas strenger.  So passen beispielsweise „leckere“ Dienste wie das Samsung Remote Test Lab, das Firebase Test Lab und die Xamarin Test Cloud leider nicht zu uns. </p><br><h2>  Aus dem Spiel </h2><br><h3>  Samsung Remote Test Lab </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/jg/ky/hdjgkycr6wiajxi8ucwp6spgasa.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Der Dienst bietet die Möglichkeit, kostenlos zu versuchen, mit verschiedenen Samsung-Geräten zu arbeiten, einschließlich der neuesten, einschließlich Fernsehgeräten oder Smartwatches auf Tizen (die Beschränkung beträgt maximal 10 Stunden pro Tag, pro Tag vergibt der Dienst 10 Credits kostenlos, was 2,5 Stunden pro Tag entspricht Die Mindestsitzung beträgt eine halbe Stunde (2 Credits).  Dies ist sehr gut zum Debuggen und Auffinden der Hauptursachen für Fehler auf bestimmten Geräten. Der Dienst bietet sogar Zugriff auf Remote-Debugging (Remote-Debug-Bridge, Zugriff auf die Konsole und Systemprotokolle). Leider bietet der Dienst keinen API-Zugriff auf Geräte.  Die einzige Möglichkeit zum „Automatisieren“ besteht darin, Benutzeraktionen aufzuzeichnen und sie dann in Ihrem lokalen Automatisierungstool wiederzugeben. </p><br><h3>  Firebase-Testlabor </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/4r/t0/ix4rt0ohclapstllgnbyl5726qm.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Mit einem Dienst von Google können Sie Ihre Anwendung auf Geräten mit Android und iOS kostenlos testen (nicht ganz).  Es gibt jedoch eine Einschränkung: Der Dienst erfordert entweder die Verwendung nativer Automatisierungstools (UIAtomator2 und Espresso für Android und XCTest für iOS) oder die Verwendung von automatischen Spinnen (Crawler) für Android - Robo Test und Game Loop Test.  Das heißt, die Verwendung von UIAutomator und Selen funktioniert leider nicht.  Kostenlos - das kostenlose Paket ist auf 10 Tests auf Emulatoren und fünf auf realen Geräten pro Tag beschränkt.  Wenn Sie mehr benötigen, müssen Sie für jede weitere Stunde weitere 1 USD bzw. 5 USD zahlen.  Im Allgemeinen wäre dies für unsere Aufgaben eine gute Wahl, wenn wir Tests von Grund auf neu schreiben würden, aber ich habe keine Lust, mehrere hundert Tests zu überarbeiten - es ist einfach teuer.  Und es stellt sich heraus, dass wir bei Tests zwischen Desktop-Versionen und Mobilgeräten sehr unterschiedlich sein müssen, was den Support erheblich erschweren würde. </p><br><h3>  Visual Studio App Center </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3g/_o/pr/3g_oprmudubtaulwkgqjahqot74.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Ehemalige Xamarin Test Cloud.  Dieser Dienst unterstützt schließlich Appium und ermöglicht das Testen auf Tausenden verschiedener Geräte.  Wie bei anderen Microsoft-Produkten ist es jedoch fest mit dem nativen Stack verbunden. Um diesen Service nutzen zu können, benötigen Sie sowohl VisualStudio als auch die Anforderung, das Projekt und die Tests ausschließlich in Java zu schreiben.  Wenn Sie jedoch plötzlich einen Java-Stack (mit MS VS) haben, beträgt der Preis 99 US-Dollar pro Geräteschlitz und Monat, was relativ liberal ist. </p><br><h2>  Dienstleistungen zur Auswahl </h2><br><h3>  AWS-Gerätefarm </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zn/pb/r9/znpbr9hu4dkgiqjcwoudrviaid8.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Vielleicht die derzeit leistungsstärkste Farm zum Testen auf virtuellen und realen Geräten (mehr als 2500 Geräte).  Für uns war dies ein vorrangiger Service, da unsere Services nur in der AWS-Cloud bereitgestellt werden. Außerdem beginnen die Preise pro Minute der Gerätezeit bei 17 Cent.  Mit AWS können Sie sowohl mit nativen Frameworks als auch mit Appium, Calabash und anderen automatisierten Test-Frameworks arbeiten.  Zusätzlich zu automatisierten Tests bietet der Dienst die Möglichkeit, manuell zu debuggen.  Nun, 1000 Minuten "zu versuchen" ist sehr verlockend.  Der Teufel steckt jedoch wie immer im Detail.  In Bezug auf das Testen verfügt AWS über mehrere Funktionen. </p><br><p>  Wie bereits erwähnt, verwenden wir Python 3.7. AWS Device Farm funktioniert jedoch weiterhin mit Python 2.7.6 (siehe Handbuch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ).  Und out of the box weiß nichts über Tox.  Für uns bedeutet dies das Fehlen einer Reihe von Funktionen und die Notwendigkeit, einen Teil der Tests zu verarbeiten, um die Abwärtskompatibilität sicherzustellen und eine Umgebung zu schaffen, die Tox umgeht.  Ein ziemlich seltsamer Mechanismus zum Herunterladen eines Testpakets (Archivs) impliziert außerdem das Herunterladen der Anwendung zum Testen.  In unserem Fall ist das Herunterladen der Anwendung ein zusätzlicher Schritt, wenn wir unseren Dienst über einen mobilen Browser testen.  Sie können die Anwendung jedoch durch einen "Stub" ersetzen und ein Venv mit Python 3.7 in der Python 2.7-Umgebung erstellen und dann eine Umgebung mit Tox darin erstellen, die ... </p><br><div style="text-align:center;"><img src="https://i.gifer.com/embedded/download/S5u.gif"></div><br><p>  Amazon wäre nicht Amazon, wenn alles auf alten Versionen ruhen würde.  Als Alternative (und kein Dienst hat unten eine solche Möglichkeit) schlägt AWS vor, AWS Device Farm über die AWS CLI (Befehlszeilenschnittstelle) zu verwenden (siehe Handbuch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ).  Das heißt, wir können das Gerät aus der Cloud als echtes Gerät im Remote-Debug-Modus mit unserem Computer verbinden, nachdem wir zuvor adb durch das gepatchte ersetzt haben (es gibt keine Binärdatei für Linux in der Liste der Binärdateien, aber ich bin sicher, dass sie in der Natur vorhanden ist).  Nachdem wir die AWS-CLI eingerichtet haben, müssen wir zum Testen nur wenige Befehle ausführen (da wir die GUI nicht als AWS-Gerätefarm-App verwenden werden). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/ln/tv/kalntvkkefpkcemawikixglisfq.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Codebeispiel</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> boto3 <span class="hljs-comment"><span class="hljs-comment">#  AWS SDK https://pypi.org/project/boto3/ aws_client = boto3.client('devicefarm') response = aws_client.list_devices() #     device_arn = '' for phone in response["devices"]: if phone['name'] == "Google Pixel XL": #      (  ) device_arn = phone['arn'] #   Amazon Resource Name break project_arn = aws_client.list_projects()['projects'][0]['arn'] #        #      ,    SSH    response = aws_client.create_remote_access_session(projectArn=project_arn, deviceArn=device_arn, remoteDebugEnabled=True, ssh-public-key=SSH_KEY) #     adb devices     uuid Google Pixel XL  AWS Device Farm,   iOS #     ... RUN_TESTS() ... #    ( )    aws_client.stop-remote-access-session(arn=response['remoteAccessSession']['arn']) aws_client.delete_remote_access_session(arn=response['remoteAccessSession']['arn'])</span></span></code> </pre> </div></div><br><p>  Wenn wir die Anwendung testen möchten, kann sie auch über das AWS SDK heruntergeladen werden. </p><br><p>  Aber ich habe hier keine Schlüsselnuance genannt.  Wir stolpern wieder ausführlich über den Teufel.  Tatsache ist, dass die Remote-Debugging-Option nur verfügbar ist, wenn wir den Plan für private Geräte für AWS verwenden.  Erstens ist diese Funktion nur auf Anfrage verfügbar (Sie müssen einen Brief an Amazon schreiben), zweitens ist die Option für die Region us-west-2 verfügbar, und drittens kehrt diese Option tatsächlich zu dem Szenario zurück, in dem wir einen Server für haben Testen mit einer Reihe (oder mindestens einem) angeschlossenen Geräten.  Die Vorteile liegen auf der Hand - wir können dieses Gerät ausschließlich verwenden, was offensichtlich sicherer und schneller ist. Andererseits verlieren wir den Hauptvorteil - die Auswahl und Vielfalt der Geräte. </p><br><p>  Ich mochte den Service insgesamt, aber für unser Team gibt es leider zu viele „Aber“. </p><br><h3>  Bitbar </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5a/gg/lp/5agglpijttxv29qnnlrgr12ksgu.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Diese Cloud-basierte mobile Farm ist die erste, die auf Suchmaschinen stößt.  Und nicht umsonst.  Mit Blick auf die Zukunft möchte ich sagen, dass dieser Dienst die beste Auswahl an Geräten (nur echte Geräte) und die beste Leistung in Bezug auf einen Test im Vergleich zu anderen bietet.  Bitbar bietet Dienste für manuelle und automatisierte Remote-Tests (unter Verwendung von Appium und anderen Frameworks) und ermöglicht auf Wunsch auch die Verwendung eines ähnlichen Crawlers wie Firebase Test Lab (Robotertest) - AI TestBot.  Der Hauptvorteil von BitBar ist eine unbegrenzte Anzahl von Testthreads (dh Sie können Ihre Anwendung sofort auf Hunderten von Geräten testen), indem Sie den erforderlichen Gerätepool im Voraus auswählen.  Wenn das Gerät ausgelastet ist, wird ein anderes ausgewählt oder die Sitzung wird in die Warteschlange gestellt.  Am Ende des Testlaufs wird ein Protokoll erstellt, ein Testprotokoll erstellt, die Ergebnisse werden gespeichert und die Benachrichtigung wird an die E-Mail gesendet.  Es gibt zwar Möglichkeiten, die Interaktion mit verschiedenen CI / CD-Tools zu konfigurieren.  Der Dienst bietet auch die Möglichkeit, Desktop-Browser in verschiedenen Auflösungen zu testen und bei Bedarf wie in AWS Ihre privaten Geräte zu erstellen.  Sie müssen zwar für all diese Chips bezahlen - jede Testminute kostet 0,29 US-Dollar. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oq/te/_v/oqte_v0jovfktqprbfpjzyt6kbw.jpeg"></div><br><p>  Der Einrichtungsprozess ist einfach, wie das Zusammenspiel zweier Finger mit Asphalt: </p><br><div class="spoiler">  <b class="spoiler_title">Codebeispiel</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://appium.bitbar.com/wd/hub'</span></span> desired_capabilities = { <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Motorola Google Nexus 6'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceId'</span></span>: <span class="hljs-string"><span class="hljs-string">'FA7AN1A00253'</span></span>, <span class="hljs-string"><span class="hljs-string">'newCommandTimeout'</span></span>: <span class="hljs-number"><span class="hljs-number">12000</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-comment"><span class="hljs-comment">#     Chrome,    app 'bitbar_apiKey': 'BITBAR_API_KEY', 'bitbar_project': 'Software Testing', 'bitbar_testrun': 'Test run #N', 'bitbar_device': 'Motorola Google Nexus 6', 'bitbar_app': '23425235' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """</span></span></code> </pre></div></div><br><h3>  Kobiton </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pm/jx/7z/pmjx7zlxb9om476zsp_qd24tqb0.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Ein weiterer Dienst, der Testdienste auf realen Geräten bereitstellt.  Die Auswahl der Geräte ist bescheidener als bei Bitbar (350+), die Verfügbarkeit der Geräte ist ebenfalls geringer.  Im Allgemeinen ist es in seiner Grundfunktionalität BitBar sehr ähnlich, es ermöglicht manuelle und automatische Tests (mit Appium - hier ohne Auswahl von Frameworks).  Es gibt keine Möglichkeit, auf Desktop-Browsern zu testen.  Mit diesem Dienst können Sie auch Tests mit einer unbegrenzten Anzahl von Sitzungen und Geräten organisieren. Sie können hier jedoch keinen Gerätepool erstellen.  Der Preis des Dienstes ist sehr liberal - von 0,10 USD pro zusätzliche Testminute, aber während des Testzeitraums machte ich auf eine gewisse Instabilität des Dienstes aufmerksam - das Internet fiel auf Geräten häufig ab, sobald das Gerät hängen blieb.  Wenn das Gerät ausgelastet oder reserviert ist, schlagen alle laufenden Tests fehl.  Das heißt, im Gegensatz zu Bitbar gibt es keine Warteschlangen von Sitzungen.  Es ist wahr, es kann zu geringen Kosten organisiert werden.  Kobiton hat eine eigene kleine API. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0b/8n/p9/0b8np9ceky_s0e2schcgitmgi4w.jpeg"></div><br><p>  Das Setup ist auch sehr einfach, im Gegensatz zur Bitbar, fast dem ursprünglichen Appium. </p><br><div class="spoiler">  <b class="spoiler_title">Codebeispiel</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> base64 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sleep <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> <span class="hljs-comment"><span class="hljs-comment">#  base64EncodedBasicAuth = base64.b64encode(bytes(f'{USERNAME}:{API_KEY}', 'utf-8')) headers = { 'Authorization': f'Basic {base64EncodedBasicAuth}' } reply = requests.get(f'https://api.kobiton.com/v1/apps', params={ }, headers = headers) #     deviceId headers = { 'Authorization': base64EncodedBasicAuth, 'Accept': 'application/json' } reply = requests.get(f'https://api.kobiton.com/v1/devices/{deviceId}/status', params={ }, headers = headers) #   ,      while (reply['isOnline'] == False or reply['isBooked'] == True): sleep(60) #   com_executor = f'https://{USERNAME}:{API_KEY}@api.kobiton.com/wd/hub' desired_capabilities = { 'browserName': 'Chrome', # The generated session will be visible to you only. 'sessionName': 'Automation test session', 'sessionDescription': '', 'deviceOrientation': 'portrait', 'captureScreenshots': True, 'deviceGroup': 'KOBITON', # For deviceName, platformVersion Kobiton supports wildcard # character *, with 3 formats: *text, text* and *text* # If there is no *, Kobiton will match the exact text provided 'deviceName': 'Pixel 2', 'platformName': 'Android', 'platformVersion': '9' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """ #   RUN_TESTS() """ ... """ #       ,     (   ) headers = { 'Authorization': {base64EncodedBasicAuth} } requests.delete(f'https://api.kobiton.com/v1/sessions/{sessionId}/terminate', params={ }) """ ... """</span></span></code> </pre></div></div><br><h3>  Browserstack </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ug/zt/ed/ugztedawkg6ed9okmi1htaactgc.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Guter alter BrowserStack.  Es wurden viele Dinge über ihn geschrieben und viele, die es benutzen.  Ja, es ermöglicht das Testen nicht nur in verschiedenen Browsern, sondern auch auf verschiedenen Geräten.  Sowohl im manuellen Modus als auch mit Selen / Appium.  Abhängig von Ihren Anforderungen - in mobilen Browsern oder mit Ihrer Anwendung.  In Bezug auf die Funktionen ist alles dasselbe wie bei den beiden oben genannten Diensten, aber im Gegensatz zu ihnen gibt es bereits Einschränkungen hinsichtlich der Anzahl gleichzeitiger Sitzungen.  Im Gegenteil, zahlen Sie 199 US-Dollar pro Monat und testen Sie unbegrenzt.  Es gibt Plugins für Jenkins, Travis CI, TeamCity, seine umfangreiche API, hervorragende Protokolle und eine große Auswahl an Geräten und Desktop-Browsern in verschiedenen Konfigurationen.  Abhängig davon, was Sie testen, variieren die Einstellungen - zum Testen von Browsern (auch von mobilen) wird ein Selenium-Hub und für Anwendungen ein Appium-Hub verwendet.  Darüber hinaus müssen Sie zum Testen der Anwendung separat bezahlen.  Das heißt, um sowohl mobile Browser als auch Anwendungen zu testen, müssen Sie 199 US-Dollar und weitere 159 US-Dollar zahlen (der Preis für ein Gerät zum gleichzeitigen Testen). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/xv/zz/xixvzzad9ae94ktoao0yzkodra8.png"></div><br><div class="spoiler">  <b class="spoiler_title">Beispielcode für die Anwendung</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://USERNAME:API_KEY@hub-cloud.browserstack.com/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'app'</span></span>: app_name, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Beispielcode für einen mobilen Browser</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> selenium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'http://USERNAME:API_KEY@hub.browserstack.com:80/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3>  Experimentell </h3><br><img src="https://habrastorage.org/webt/do/7d/uv/do7duvaiufyiok6muyz_zuerya4.png"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Ein weiterer Dienst, der die Möglichkeit bietet, sowohl mobile Geräte als auch Desktop-Browser manuell und automatisch mit Appium, Selenium und anderen Frameworks zu testen.  Wie bei BrowserStack ist die Anzahl der gleichzeitigen Sitzungen begrenzt, die Preise unterscheiden sich jedoch geringfügig. Für das Testen mobiler Anwendungen verlangt der Dienst 199 US-Dollar pro Monat und für das Cross-Browser-Testen nur 39 US-Dollar (für eine gleichzeitige Sitzung).  Darüber hinaus können Sie wie Bitbar mit AWS Ihr eigenes privates Labor mit Geräten erstellen, die jedoch auf Wunsch mit einer öffentlichen Cloud aus Tausenden von Geräten, Emulatoren und Browsern verschiedener Versionen und Plattformen (MacOS, Windows) gemischt werden können.  Zu den interessanten Funktionen gehört die Verfügbarkeit von Erweiterungen für IntelliJ und Eclipse, ein eigenes Appium Studio-Tool, mit dem Sie die erweiterten Funktionen von Geräten wie die Interaktion mit FaceID, die Sprachsteuerung, das Scannen von Barcodes, das Einstellen der Kommunikationsqualität, die geografische Position und vieles mehr nutzen können.  Von den Minuspunkten kann ich eine seltsame Reihe von Geräten für den Testzeitraum, die drakonische Tarifierung für den Testzeitraum sowie die Anforderung zur Verwendung von Unternehmenspost nennen (Google Mail funktioniert nicht). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fi/z3/wy/fiz3wy8hud0aa5zd28-86zluljg.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Codebeispiel</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://Uhttps://cloud.seetest.io/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">"deviceName"</span></span>: <span class="hljs-string"><span class="hljs-string">"iPhone X"</span></span>, <span class="hljs-string"><span class="hljs-string">"accessKey"</span></span>: API_KEY, <span class="hljs-string"><span class="hljs-string">"platformName"</span></span>: <span class="hljs-string"><span class="hljs-string">"ios"</span></span>, <span class="hljs-string"><span class="hljs-string">"deviceQuery"</span></span>: <span class="hljs-string"><span class="hljs-string">"'@os='ios' and @version='12.1.3' and @category='PHONE'"</span></span>, } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3>  Saucelabs </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jo/vz/sy/jovzsyon88bmkdxcknin36wro8k.jpeg"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Einer der ältesten Cloud-Testdienste.  Fast 400 verschiedene reale Geräte, eine große Auswahl an Simulatoren und Emulatoren, einschließlich atypischer Emulatoren von Samsung-Geräten, gibt es Desktop-Browser für verschiedene Betriebssysteme, einschließlich Linux.  Automatisierung auf Appium / Selen und nativen Frameworks.  Der Hauptvorteil des Dienstes ist das Vorhandensein einer umfangreichen Sammlung von Konfigurationen, einschließlich alter Betriebssysteme, Browser und Geräte.  SauceLabs haben auch eine Begrenzung für die Anzahl gleichzeitiger Sitzungen, aber hier umfasst die billigste Option nicht eine, sondern zwei gleichzeitige Sitzungen.  Was ungewöhnlich ist: Tarifpläne für reale Geräte und Emulatoren sind unterschiedlich.  Die billigsten Optionen, die zwei Sitzungen mit 2000 Testminuten pro Monat auf Emulatoren umfassen, kosten 149 US-Dollar und auf realen Geräten bereits 349 US-Dollar.  Es gibt eine Integration mit CI / CD, Slack. Leider konnte ich SauceLabs nicht live testen, da die Registrierung möglicherweise fehlschlägt, möglicherweise aufgrund der Region, aber ich kann nicht sicher sagen. </p><br><h3>  Perfecto </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/bj/h2/plbjh2r1jax9nmtdxkq08sxzfvs.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> </p><br><p>  Der neueste Cloud-Testanbieter ist Experitest optisch am ähnlichsten, jedoch ohne erweiterte Funktionen.  Es gibt eine einfache Skriptsprache.  Es ist sehr seltsam, aber im Dienst für Nicht-Unternehmenstarife (Enterprise-Tarife) gibt es keinen Vorschlag zum Testen in Desktop-Browsern. Es ist auch unmöglich, die Ausführung von Tests in Echtzeit zu überwachen (nur wenn dies kein manueller Test ist).  Zum Testen stehen ungefähr hundert verschiedene Geräte zur Verfügung.  Es gibt eine Integration mit Jenkins und interessanterweise auch mit Testmanagement-Tools wie HP ALM, IBM Rational und TFS.  Es sind auch sehr seltsame Tarifpläne verfügbar, z. B. 5 Teststunden pro Monat (in Minuten bis zu 0,33 US-Dollar (dies ist der teuerste Service)), obwohl es möglich ist, ein Paket mit zusätzlichen Stunden zu kaufen, aber es ist auch seltsam, dass dies nicht der Fall ist pro Minute oder mindestens stündliche Abrechnung nachträglich.  Zur Vereinfachung der Verwendung stehen während des Testzeitraums nur manuelle Tests sowie ein gemeinsames Labor zur Verfügung, sodass alle Starts von verschiedenen Benutzern auf einen Haufen fallen.  Es ist daher unmöglich, den Komfort und die Geschwindigkeit des Dienstes genau zu beurteilen.  Es ist ersichtlich, dass sich der Service hauptsächlich auf große Unternehmenskunden konzentriert, während die Fähigkeiten dieses Anbieters zumindest nach den verfügbaren Informationen die bescheidensten von allen sind, die ich getestet habe. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/l_/so/4xl_so-pdliodrvlt7huphfnybe.jpeg"></div><br><br><h2>  Zusammenfassende Ergebnisse </h2><br><p>  Nach allen Auswahlkriterien sind die Services sehr ähnlich, der Unterschied zwischen den Services in Leistung und Preis (wenn beispielsweise keine Funktionen vorhanden sind, wie im Fall von AWS).  Daher werden wir die Forschungsdaten in einer Tabelle zusammenfassen, die Geschwindigkeit der Dienste (unter Berücksichtigung der Verbindung über US-VPN) sowie den Preis der Einfachheit halber vergleichen und die durchschnittliche monatliche Testzeit auf Geräten vergleichen (5 Releases pro Monat, 2 Stunden Test auf Android- und iOS-Geräten) = 20 Stunden).  Als Referenzwerte verwende ich Daten von meinem lokalen Computer mit einem Emulator, der zur Reinheit des Experiments über ein VPN in den USA erneut mit diesem verbunden wird. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m9/1k/ym/m91kymmminidgp5q_ivtq110dqs.png"></div><br><h1>  Schlussfolgerungen </h1><br><p>  Es war sehr interessant für mich, den richtigen Service für unser Team zu suchen und auszuwählen.  Im Allgemeinen gibt es Lösungen für jeden Geschmack und für jede Aufgabe, und die Dienstleistungen erwiesen sich in Bezug auf Eigenschaften und Implementierung als sehr ähnlich.  Daher würde ich abhängig von Ihren Aufgaben die folgende Auswahl empfehlen: </p><br><p>  <b>Option A</b> : Wenn Ihnen die Geschwindigkeit der Überprüfung wichtig ist und Sie Dutzende verschiedener Geräte gleichzeitig überprüfen müssen, haben Sie die Wahl zwischen <b>Bitbar</b> . </p><br><p>  <b>Option B</b> : Wenn Sie Vorrang vor den Ergebnissen von Referenzgeräten haben und Konfigurationstests zweitrangig (aber erforderlich) sind, haben Sie die Wahl zwischen <b>BrowserStack</b> .  Dies ist nur unser Fall, da statistisch gesehen 90% aller Fehler Fehler von Referenzplattformen und -geräten sind (meistens treten Fehler für alle Referenzplattformen gleichzeitig auf).  Die restlichen 8% sind MS IE-Fehler, wobei die IE-Unterstützung abgelehnt wird - 2% MS Edge-Fehler und 0,5% Fehler bei bestimmten Konfigurationen. </p><br><p>  <b>Option B</b> : Wenn Sie spezielle Bedingungen wie schlechte Kommunikation, Geolokalisierung oder Touch / FaceID überprüfen möchten, haben Sie die Wahl zwischen <b>Experitest</b> . </p><br><p>  Wenn Ihr Unternehmen jedoch auf lange Sicht ein großes Büro besetzt, ist Ihre Arbeit Vollzeit. In der Regel kostet die Organisation eigener, sogar Mini-Labors mit einem Server für Emulatoren mit 2-3 angeschlossenen Geräten weniger und bequemer als die Verwendung von Spezialgeräten Dienstleistungen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464433/">https://habr.com/ru/post/de464433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464415/index.html">Neuer Hinweisservice für die Suche nach hh.ru.</a></li>
<li><a href="../de464417/index.html">10 beliebte PHP-Frameworks im Jahr 2019</a></li>
<li><a href="../de464421/index.html">Radio Viber - alle Radiosender im Messenger online</a></li>
<li><a href="../de464423/index.html">Wie man Zeit verwaltet? Freelancer-Antwort</a></li>
<li><a href="../de464429/index.html">Die 10 häufigsten Fehler bei der Arbeit mit der Spring-Plattform. Teil 1</a></li>
<li><a href="../de464435/index.html">Wie man nicht in einem Meer von Technologie und Ansätzen ertrinkt: die Erfahrung von 50 Experten</a></li>
<li><a href="../de464437/index.html">Wie das Entwicklungsteam mehr verdienen kann, indem es Verkehrsseiten erstellt [Implementierungshandbuch]</a></li>
<li><a href="../de464443/index.html">Natas Web. Passage der CTF-Plattform zur Ausnutzung von Web-Schwachstellen. Teil 2</a></li>
<li><a href="../de464445/index.html">Warum es wirklich unmöglich ist, Vegetarier zu sein</a></li>
<li><a href="../de464447/index.html">Count Scoring de la Fer oder eine Studie zum Kredit-Scoring als Teil der Erweiterung des eigenen Horizonts. Teil 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>