<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌞 😯 🔤 开发良好的电子应用程序的主要秘诀 🅿️ 💆🏿 ✋🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="一些人非常讨厌电子应用。 轻率地说，该应用程序包含Chromium浏览器似乎很奇怪。 在使用此类应用程序的过程中，这种感觉得到了增强。 它们消耗大量内存，加载缓慢，并且对用户交互没有特别高的反应速度。 开发良好的Web应用程序并不容易。 为什么将网络技术拖入桌面环境？ 毕竟，在这种环境下，他们会产生...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>开发良好的电子应用程序的主要秘诀</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458502/"> 一些人非常讨厌<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">电子</a>应用。 轻率地说，该应用程序包含Chromium浏览器似乎很奇怪。 在使用此类应用程序的过程中，这种感觉得到了增强。 它们消耗大量内存，加载缓慢，并且对用户交互没有特别高的反应速度。 开发良好的Web应用程序并不容易。 为什么将网络技术拖入桌面环境？ 毕竟，在这种环境下，他们会产生很多问题吗？ <br><br> 该材料的作者（我们今天将发表其翻译）说，尽管一切都在说明该平台的成功，但他将不会扮演Electron的捍卫者。 的确，没有人会轻视电子应用中固有的多余部分。 在开发此类应用程序时，有可能一枪杀死两只鸟吗？ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/r0/cf/5b/r0cf5b3kgqsgqfbectxrpwhyxqq.png"></div><br>  Electron的某些问题（大文件大小，缓慢加载）是该平台所基于的技术的传统。 需要从低层次解决这些问题。 在电子应用程序开发的水平上，可以解决更严重的问题（内存消耗，接口速度慢）。 但是，解决这些问题并不容易。 如果有一个秘密，知道您可以在自动模式下最大程度地减少这些缺点，该怎么办？ <br><br> 如果您想阅读程序代码，则可以立即查看<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此</a>存储库。 这是本材料中将要考虑的项目。 <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">秘密的本质</font> </h2><br> 开发高质量电子应用程序的秘诀是在后台进程中在本地系统上执行大量计算。 您对云服务的依赖程度越低，在后台流程中进行的工作就越多，那么您将获得以下积极效果： <br><br><ul><li> 即时数据加载。 应用程序用户将不必等待数据通过网络下载。 数据是从本地存储下载的。 这立即为应用程序带来了明显的性能提升。 </li><li> 低缓存要求。 客户端应用程序无需特别担心缓存。 这是因为他需要的所有数据都在本地可用。 为了使Web应用程序达到良好的性能水平，通常需要将大量数据加载到其本地状态。 这是电子应用程序内存消耗很高的原因之一。 </li></ul><br> 在这里，我不是在谈论本地数据存储的其他优点，例如，无需连接网络即可进行工作的可能性。 <br><br> 看一下我的Electron应用程序消耗了多少内存<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-Actual的</a>个人财务经理。 该程序将所有数据存储在本地。 不同设备之间的数据同步是一项可选功能，它不会影响主要功能。 我想，鉴于该应用程序旨在处理大量数据，因此它的内存消耗数据不言而喻。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/074/c80/0cd/074c800cde464ea55565f49b1fe914d4.png"></div><br>  <i><font color="#999999">实际内存消耗</font></i> <br><br> 不执行任何活动动作的应用程序将占用总计239.1 MB的内存。 该指标可能更多，它取决于应用程序中到底发生了什么，但是可以仅将指定的数字作为基数。 这不是完美的，但还不错。 至少-优于我的Slack计算机所需的1371 MB内存。 我必须说，Slack是电子应用程序的一个非典型示例，其特征在于特定的问题。 由于松弛，Electron周围有一些感觉。 其他应用程序（例如，概念或Airtable）消耗大约400-600 MB的内存。 这意味着我的应用程序在这方面取得了成功，并且赢得了。 <br><br> 我必须说239.1 MB的数字是我在进行任何优化之前获得的。 我计划在Rust中重写应用程序的一些非常重要且占用大量内存的部分。 这将大大减少应用程序的内存需求。 <br><br> 后台服务器可以通过仅将特定时间点所需的数据加载到内存中来优化自身的内存消耗。 最好使用SQLite之类的东西进行数据存储。 该DBMS已经针对解决此类问题进行了认真的优化（严重-仅使用SQLite）。 另外，应该注意的是，将各种计算移至后台进程可以使应用程序的用户界面尽可能快地响应用户的影响。 <br><br> 事实证明，在Electron应用程序中使用后台服务器会给开发人员带来有趣的机会。 在下一节中，我们将讨论使用它可以完成的所有令人难以置信的事情。 <br><br> 即使您的应用程序与云数据紧密相连，但如果您打算使用Node.js API，则可能需要一个后台进程。 仅在后台进程中才可以与这些API进行交互。 事实上，无论您的Electron应用程序是什么，我相信了解我们现在要检查的项目可以为您提供一些有用的想法。 <br><br><h2>  <font color="#3AC1EF">带服务器电子示例应用程序</font> </h2><br> 我创建了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">带服务器电子示例</a>应用程序，以展示使用其示例开发真正的本地电子应用程序所需的所有配置。 我这样做是为了通过创建类似的项目来吸引程序员。 当我刚开始与Electron合作时，我想遇到一个类似的项目。 <br><br> 可在<code>README</code>找到有关该应用程序的技术信息。 这是项目的一般概述： <br><br><ul><li> 它创建了通常的Node.js进程，用于在后台执行服务器代码。 </li><li> 其中，使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">node-ipc</a>创建了一个IPC通道，该通道旨在组织后端与应用程序的用户界面之间的直接交互。 </li><li> 如果项目以开发模式启动，则服务器不会作为后台进程启动。 您可以通过单独的浏览器窗口与之交互。 这是出于调试目的。 </li></ul><br> 现在，让我们放慢速度，并仔细查看此列表中的最后一项。 在开发模式下，您可以通过单独的浏览器窗口与服务器进行交互吗？ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efd/5ca/157/efd5ca15704cbc691bcb39c44be9d5a1.png"></div><br>  <i><font color="#999999">应用程序的客户端和服务器部分</font></i> <br><br> 是的，是的。 在学习了如何启动后台程序之后，我首先意识到，我可以使用Chromium开发人员的工具。 其次-我意识到，出于调试目的，我可以使用它们来调试Node.js代码。 因此，我说的是您可以通过浏览器与Node.js进行交互的事实。 这使您可以使用基于Chromium的丰富浏览器开发人员工具包来调试服务器代码。 <br><br> 现在，让我们看看由于上述应用程序启动方案的应用程序而可以做的所有有趣的事情。 <br><br><h2>  <font color="#3AC1EF">使用控制台</font> </h2><br> 我添加了用于记录对<code>server-ipc.js</code>文件的请求和响应的命令。 我可以使用浏览器控制台进行浏览。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b4f/993/738/b4f993738dc46f2302f9d47f4aedcc7f.gif"></div><br>  <i><font color="#999999">在浏览器控制台中调试Node.js应用程序</font></i> <br><br><h2>  <font color="#3AC1EF">分步执行代码</font> </h2><br> 使用浏览器调试应用程序的服务器端时，可以使用分步执行代码。 这并不是说这绝对是太棒了。 但是，始终可以使用此功能非常方便，不需要使用其他程序。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/158/bde/c95/158bdec95849d3ed75613241d479b5a1.gif"></div><br>  <i><font color="#999999">分步执行代码</font></i> <br><br><h2>  <font color="#3AC1EF">剖析</font> </h2><br> 也许这是我最喜欢的工具。 这是用于研究代码性能的出色标准工具，可让您分析应用程序的服务器端。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed0/ad3/3eb/ed0ad33eb3c6a64ae5c33c43cff36ec5.gif"></div><br>  <i><font color="#999999">服务器代码性能研究</font></i> <br><br> 使用浏览器开发人员的工具，您甚至可以探索启动后台进程时发生的情况（这很可能是启动应用程序中最难的部分）。 <br><br> 为此，只需开始记录指示器的过程并重新加载窗口即可。 重新启动将导致服务器重新启动。 这将我们引向下一步。 <br><br><h2>  <font color="#3AC1EF">使用组合键Cmd + R或Ctrl + R重新启动服务器</font> </h2><br> 在浏览器中调试服务器代码的另一个选项是，由于服务器调试是在浏览器窗口中执行的，因此只需重新加载窗口中的内容即可使服务器重新启动！ 使用组合键<code>Cmd+R</code> （对于Windows，则为<code>Ctrl+R</code> ）就足够了，您可以随意使用服务器代码的最新更改。 在这种情况下，将保存前端数据。 这意味着您可以继续使用应用程序的客户端部分，但是在重新启动服务器之后，客户端部分将已经可以使用新版本的服务器代码。 这让人想起正在运行的服务器上的“热”代码交换。 <br><br> 下图显示了如何更改服务器代码，并通过按<code>Cmd+R</code>重新加载页面<code>Cmd+R</code> 之后，我继续使用客户端，该客户端现在正在与新版本的服务器交互。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/103/c83/2bd/103c832bd59e4acf8d5d4953d3cfc702.gif"></div><br>  <i><font color="#999999">服务器重启</font></i> <br><br><h2>  <font color="#3AC1EF">研究应用程序正在运行的服务器端和热交换代码</font> </h2><br> 通常，在调试服务器时，只需将<code>console.log()</code>命令添加到代码中的正确位置，然后重新启动即可。 但是有时，在特别困难的情况下，碰巧查看正在运行的服务器中发生的情况而不是重新启动它非常有用。 不仅可以“查看”服务器内部，还可以更改其中的某些内容以查看这将如何影响问题。 <br><br> 在控制台中，可以使用Node.js <code>require</code>命令。 这意味着在它的帮助下，您可以连接任何服务器模块并在控制台中使用它们。 <br><br> 假设我们需要使用<code>server-handler.js</code> 。 为此，只需在控制台中运行命令<code>let handlers = require('./server-handlers')</code> 。 <br><br> 让我们创建一个存储服务器状态的系统。 在我们的例子中，这将是传递给<code>make-factorial</code>函数的所有数据的列表（实际应用程序的服务器状态会更加复杂）： <br><br><pre> <code class="plaintext hljs">handlers._history = [] handlers['make-factorial'] = async ({ num }) =&gt; {  handlers._history.push(num) }</code> </pre> <br> 您可以通过连接适当的模块并查看<code>handlers._history</code>从控制台<code>handlers._history</code>服务器<code>handlers._history</code>状态。 如果需要的话，在程序执行过程中，我们甚至可以完全替换<code>make-factorial</code>实现！ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/004/f53/4a2/004f534a249589d449baae10e1d6963a.gif"></div><br>  <i><font color="#999999">服务器状态研究</font></i> <br><br><h2>  <font color="#3AC1EF">总结</font> </h2><br> 查看<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">带服务器</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">电子示例</a>存储库，以了解项目实现的详细信息，并查看Electron应用程序服务器端的代码。 <br><br> 如果使用Visual Studio Code，则可能习惯于将开发人员工具与Node.js服务器进行高质量的集成。 使用这种方法，您可以独立于Electron应用程序自己启动服务器。 之后，您可以告诉Electron您需要连接到VS Code拥有的进程。 但是，我更喜欢使用现有的Electron开发工具。 <br><br> 这意味着程序员有机会使用任何第三方代码编辑工具，同时可以完全访问所有浏览器开发人员工具。 <br><br> 在过去的几年中，我一直在开发“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">实际”</a>应用程序，并不断使用我刚才所说的内容。 我想说我真的很喜欢这一切。 也许此应用程序的Node.js部分上的工作已经成为我所经历过的最愉快的编程经验的来源。 <br><br> 此外，上述原则对我们开发真正的本地应用程序非常重要。 我们已经拥有为此所需的所有技术。 最主要的是正确使用它们。 <br><br>  <b>亲爱的读者们！</b> 您对基于Electron的应用感觉如何？ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458502/">https://habr.com/ru/post/zh-CN458502/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458492/index.html">“我们始终相信竞争和选择用户的权利”©Yandex</a></li>
<li><a href="../zh-CN458494/index.html">使用Vue渲染功能的实际示例：为设计系统创建印刷网格</a></li>
<li><a href="../zh-CN458496/index.html">开发大型React应用程序的实用指南。 计划，操作，数据源和API</a></li>
<li><a href="../zh-CN458498/index.html">开发大型React应用程序的实用指南。 第2部分：状态管理，路由</a></li>
<li><a href="../zh-CN458500/index.html">测试redux-saga的变态</a></li>
<li><a href="../zh-CN458504/index.html">节省时间的13个npm技巧</a></li>
<li><a href="../zh-CN458506/index.html">不是Portal 3，而是接近的：钻石内部信息的量子隐形传态</a></li>
<li><a href="../zh-CN458508/index.html">内幕：EPFL研究生院。 第4.2部分：财务方面</a></li>
<li><a href="../zh-CN458514/index.html">违反GDPR的行为将受到更积极的惩罚-罚款和欧盟以外法规的影响</a></li>
<li><a href="../zh-CN458516/index.html">从吉拉获取工作日志</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>