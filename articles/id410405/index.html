<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊🏽 👨‍✈️ 🚿 Sistem Akuisisi Data di ESP. Bagian I. CO2 ‼️ 😤 🧓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari baik! Pada artikel ini saya ingin berbicara tentang implementasi perangkat pada modul ESP. Topik perangkat serupa telah diungkapkan di Internet, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sistem Akuisisi Data di ESP. Bagian I. CO2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/410405/"> Hari baik!  Pada artikel ini saya ingin berbicara tentang implementasi perangkat pada modul ESP.  Topik perangkat serupa telah diungkapkan di Internet, tetapi tidak berhenti menjadi relevan. <br><img src="https://habrastorage.org/webt/85/au/eq/85aueqa-qfotfuc69mmwk7pbmnq.jpeg"><a name="habracut"></a>  <b>Ide</b> <br><br>  Saya telah lama berpikir untuk menerapkan sistem tampilan dan kontrol tertentu di apartemen, tetapi saya tidak dapat menemukan aplikasi untuk sensor yang tersedia untuk dijual, khususnya untuk diri saya sendiri.  Hal pertama yang membingungkan adalah keberadaan server tertentu (sepotong besi terpisah) yang mengumpulkan data, memproses, dan melemparkannya ke suatu tempat untuk dilihat.  Saya ingin memiliki sistem perangkat independen yang dapat diskalakan, lebih disukai bekerja dengan satu aplikasi, secara optimal jika aplikasi sudah siap, yang sepertinya hampir mustahil (melihat ke depan saya akan mengatakan bahwa ada aplikasi seperti itu dan dapat dikonfigurasi dengan cukup fleksibel untuk tugas kita).  Dan tentu saja saya ingin membuat garis perangkat saya. <br><br>  <b>Persyaratan sistem</b> <br><br><ol><li>  Kurangnya server perangkat keras ("unit pusat"). </li><li>  Sensor / kontrol independen. </li><li>  Sensor harus nirkabel. </li><li>  Ketika mengubah komposisi dan jenis sensor tidak boleh ada ketergantungan (menambahkan perangkat baru tidak perlu "melihat" sesuatu pada orang lain). </li><li>  Jika memungkinkan, sensor harus bertenaga baterai. </li><li>  Jika perlu, sensor harus dapat dikonfigurasi, tetapi tanpa menggali ke dalam kode (web optimal). </li><li>  Notifikasi.  Ini adalah persyaratan terpisah.  Kita semua terbiasa menggunakan ponsel dan menerima pemberitahuan secara instan. </li></ol><br>  Ini bukan daftar lengkap "Daftar Keinginan", tetapi ini adalah yang utama. <br><br>  <b>Cari solusinya</b> <br><br>  Solusi untuk menciptakan sistem datang sedikit kemudian.  Pertama, perangkat pertama dikembangkan, yang akan saya tulis di artikel ini. <br><br>  Bagian perangkat keras.  ESP-12E dan ESP32.  Semua proyek yang dijelaskan di bawah ini diimplementasikan pada modul pertama.  Modul kedua memiliki beberapa proyek komersial yang tidak akan dipertimbangkan dalam artikel ini. <br><br>  Ada banyak artikel dan forum di Internet tentang ESP-12E, dan saya tidak akan mengulangi tentang semua pro dan kontra.  Semua "colokan" terjadi terutama karena kurangnya pengalaman dalam bekerja dengan modul dan dengan lingkungan, pada prinsipnya. <br><br><img src="https://habrastorage.org/webt/j6/bb/aa/j6bbaaawco5ytnkte4mw5qtag2c.jpeg"><br>  <i>Gambar 1. Foto ESP-12E.</i> <br><br>  Bagian perangkat lunak.  Firmware untuk ESP ditulis dalam Arduino IDE.  Aplikasi Blynk berjalan di sisi ponsel / tablet.  Ini adalah konstruktor yang sangat nyaman untuk menampilkan data.  Aplikasi memiliki server cloud tempat perangkat (sensor) mengirim data, dan Blynk menerimanya dan memungkinkan menampilkannya (www.blynk.cc).  Dengan cara yang sama umpan balik diatur dengan perangkat.  Yang penting, satu aplikasi dapat mengumpulkan dan menampilkan data dari beberapa perangkat. <br><br><img src="https://habrastorage.org/webt/jd/zf/yz/jdzfyzmdxnywx1kkcxedbn6ru8q.png"><br><br><img src="https://habrastorage.org/webt/iu/e5/mi/iue5mivk9phy0yb2jro75v3rtze.jpeg"><br>  <i>Gambar 2. Screenshot dari aplikasi.</i> <br><br>  Nantinya, kami akan memposting artikel tentang perangkat lunak dan tautan ke sumbernya.  Saya melakukan perangkat keras.  Implementasi perangkat lunak dilakukan oleh rekan saya. <br><br>  <b>Trio sensor pertama</b> <br><br>  1. <b><i>Sensor</i></b> Karbon Dioksida <b><i>OpenWindAir</i></b> . <br><br>  Dibangun berdasarkan modul Wi-Fi ESP-12E.  Pengukuran dilakukan menggunakan sensor CO2 MH-Z19.  Ini dikenal luas dan memungkinkan Anda melakukan pengukuran dengan cepat dan akurat.  Selain itu, perangkat ini memiliki sensor suhu dan kelembaban built-in AM2302.  Ada juga dukungan untuk sensor eksternal untuk digunakan, misalnya, dengan sistem People Monitoring.  Perangkat ini didukung oleh miniUSB dari PC atau catu daya 5V.  LED yang diterapkan dan alarm suara (yang terakhir dapat dimatikan dari aplikasi, atau digunakan oleh jam - agar tidak bangun di malam hari). <br><br>  2. <b><i>LifeOfFlowers</i></b> Sensor kelembaban tanah untuk tanaman. <br><br>  Dibangun berdasarkan modul Wi-Fi ESP-12E.  Pengukuran kelembaban tanah terjadi menggunakan elektroda yang tersangkut ke tanah (bagian dari papan perangkat).  Yang penting - elektroda, seperti seluruh papan, dipernis (di sini saya harus merancang pengukuran), yang akan mencegah pembusukan kontak.  Selain kelembaban tanah, perangkat ini mengukur kelembaban dan suhu sekitar (AM2302), cahaya dan tegangan baterai.  Ya, LifeOfFlowers beroperasi dari 1 hingga 3 tahun dengan dua baterai AAA (waktu aktif tergantung pada kecepatan refresh). <br><br>  3. Sensor Kebocoran <b><i>Air Peringatan</i></b> . <br><br>  Dibangun berdasarkan modul Wi-Fi ESP-12E.  Pengukuran dilakukan menggunakan elektroda yang disertakan dalam enklosur IP-65.  Perangkat ini ditenagai oleh dua baterai AAA (atau AA), waktu operasinya juga 1 tahun.  Dimensi perangkat hanya 55x55x30mm.  Untuk memulai, Anda harus meletakkan perangkat di tempat yang berpotensi berbahaya dan itu akan menandakan keberadaan air di lantai.  Aplikasi ini juga menampilkan voltase baterai, agar tidak lupa menggantinya tepat waktu. <br><br>  <b>OpenWindAir - implementasi perangkat keras</b> <br><br>  Di sini Anda tidak dapat menemukan frills sirkuit di sini, semuanya sederhana dan pada lembar data.  Jika seseorang membutuhkan sirkuit, saya bisa memberikannya. <br><br>  Komposisi perangkat: <br><br>  ESP8266 ESP-12E - modul itu sendiri, yang bertanggung jawab untuk mengumpulkan, memproses dan mengirim data.  Catu daya 3.3V. <br>  MH-Z19 - sensor konsentrasi karbon dioksida.  Bekerja pada UART, berukuran hingga 5000ppm dan ditenagai oleh 5V. <br>  AM2302 - pengukuran kelembaban dan suhu.  Karena sensor terletak di dalam rumahan, konstanta kalibrasi harus dimasukkan, dan data pengukuran untuk referensi.  Untuk pengukuran yang lebih akurat, sensor jarak jauh digunakan. <br><br>  1-1462037-8 (IM03TS) - relay, untuk mengganti arus yang rendah, untuk berjaga-jaga, untuk dimainkan.  Pada prinsipnya, ini adalah hal yang menarik, tetapi mereka belum datang dengan aplikasi (itu adalah output ke konektor eksternal yang sama dengan sensor kelembaban eksternal). <br><br>  CP2102-GM - USB-UART.  Ya, kami memutuskan untuk membuat log yang indah untuk menampilkan informasi secara real time, ternyata sangat nyaman, Anda dapat menonton data di terminal, menonton pesanan unduhan, debug. <br><br>  LM1117MP-ADJ - LDO untuk 3.3V. <br><br>  Ada juga pager, sepasang tombol dan tiga LED.  Selain ambang konsentrasi CO2, LED menunjukkan proses pemuatan perangkat, menghubungkan ke titik akses (atau bekerja offline) dan proses pembaruan. <br><br>  Perangkat mengimplementasikan pembaruan OTA.  Kami melempar firmware ke server mana pun (setelah meresepkannya), tekan tombol, berikan daya dan proses firmware dimulai.  Setelah menginstal (atau menyalakan ulang) untuk waktu tertentu, Anda dapat pergi ke antarmuka web (perangkat muncul sebagai titik akses) dan berkendara dalam pengaturan jaringan - setelah itu semuanya siap untuk bekerja. <br><br><img src="https://habrastorage.org/webt/tw/xr/qq/twxrqqcpb_t9szkzqan7ch4qu4w.jpeg"><br>  <i>Gambar 3. Foto papan dengan komponen.</i> <br><br>  Saya ingin menulis sedikit tentang bentuk dan fitur papan sirkuit tercetak.  Selama pengujian, ditemukan bahwa selama operasi jangka panjang Wi-Fi, modul memanaskan papan.  Ini tidak akan menjadi kritis jika sensor suhu dan kelembaban terpasang di dalam case.  Saya harus menyebarkan modul ESP dengan pengumpan dan sensor ke arah yang berbeda, dan juga membuat guntingan di papan, di mana, seperti perancang, partisi khusus masih dimasukkan.  Dengan demikian, tidak ada pencampuran udara di dalam casing dan pengukuran suhu dan kelembaban jauh lebih andal. <br><br><img src="https://habrastorage.org/webt/gs/nn/ze/gsnnze6gsm7vhckw58ug61l5lf0.jpeg"><br>  <i>Gambar 4. Foto partisi di papan tulis.</i> <br><br>  <b>Perumahan</b> <br><br>  Ada banyak keraguan - saya ingin memiliki logam yang indah, tubuh ramping dengan strip matte indikasi, dll., Tetapi seperti biasa, minimalis datang untuk menyelamatkan.  Faktor bentuk casing menentukan keberadaan LED 5mm sekolah tua, yang ternyata sangat nyaman.  Karena cembung - ini memungkinkan Anda untuk meletakkan perangkat, misalnya, di rak dan indikasi masih akan terlihat jelas.  Kasingnya sendiri adalah laser yang dipotong dari plexiglass 2mm. <br><br>  Kami membuat beberapa pilihan, dalam warna yang berbeda dan dengan kombinasi warna, serta dari bahan yang berbeda.  Terlihat sangat bagus.  Saya bahkan mencoba membuatnya dari PCB segera dengan urutan papan sirkuit tercetak.  Saat ini, kami sedang memikirkan opsi untuk memproduksi case di produksi, tetapi sejauh ini hanya dalam rencana.  Saya juga bisa mengeluarkan model. <br><br><img src="https://habrastorage.org/webt/tc/qd/cr/tcqdcro5aqh9f8jbiyhkhly3d_0.jpeg"><br>  <i>Gambar 5. Foto perangkat.</i> <br><br>  <b>Paket</b> <br><br>  Secara umum, ada rencana untuk membuat beberapa perangkat lagi (selain ketiga perangkat ini).  Sebagai contoh, ESP32 memiliki built-in Ethernet (Anda hanya perlu fisika) dan lebih banyak ADC built-in, yang akan memungkinkan Anda untuk melakukannya tanpa multiplexer, seperti halnya dengan LifeOfFlowers, tetapi lebih lanjut tentang itu nanti. <br><br>  <b>Ancaman.</b>  Blynk memiliki API server yang dapat dengan mudah digunakan (dicentang) pada PC.  Dengan demikian, pengikatan ke server menghilang. <br><br>  <b>ZZY.</b>  Agar kurang negatif berganti nama menjadi artikel.  Ketika kita beralih ke mengelola rumah menggunakan perangkat, saya akan memperbaiki artikel tersebut. <br><br>  Terima kasih atas perhatian anda! <br><br>  ZZZY: Seperti yang dijanjikan, berikut adalah tautan ke artikel tentang perangkat lunak <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">geektimes.ru/post/122601</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id410405/">https://habr.com/ru/post/id410405/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id410391/index.html">Pemilik hak atas game multi-pemain lama menolak upaya para penggemar untuk menghidupkannya kembali</a></li>
<li><a href="../id410393/index.html">Lintasan Venus pada piringan Matahari dan penentuan jarak di antara mereka</a></li>
<li><a href="../id410395/index.html">Roskachestvo menetapkan bahwa kencan online di Android lebih murah daripada di iOS</a></li>
<li><a href="../id410399/index.html">Astronom amatir memeriksa kamera baru dan secara tidak sengaja memotret lampu kilat supernova</a></li>
<li><a href="../id410403/index.html">Menulis di Giktayms, itu keren</a></li>
<li><a href="../id410409/index.html">Apakah Topeng Mobil Listrik akan kembali dari luar angkasa ke Bumi?</a></li>
<li><a href="../id410411/index.html">Produsen mobil pintar ingin memonetisasi data pelanggan</a></li>
<li><a href="../id410413/index.html">47% orang tua khawatir bahwa anak mereka memiliki keterikatan menyakitkan dengan smartphone</a></li>
<li><a href="../id410415/index.html">17 fitur iOS yang paling tidak terlihat yang mungkin belum Anda ketahui</a></li>
<li><a href="../id410417/index.html">Lupa mengubah azimuth: Hasil investigasi insiden Ariane 5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>