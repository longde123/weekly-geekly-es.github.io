<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ğŸ¼ ğŸ™ğŸ¼ â›“ï¸ PostgreSQLä¸­çš„å¹¶è¡ŒæŸ¥è¯¢ ğŸ’¼ ğŸ”“ ğŸ‘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç°ä»£CPUä¸­æœ‰å¾ˆå¤šæ ¸å¿ƒã€‚ å¤šå¹´æ¥ï¼Œåº”ç”¨ç¨‹åºå·²å°†æŸ¥è¯¢å¹¶è¡Œå‘é€åˆ°æ•°æ®åº“ã€‚ å¦‚æœè¿™æ˜¯å¯¹è¡¨ä¸­å¤šä¸ªè¡Œçš„æŠ¥å‘ŠæŸ¥è¯¢ï¼Œåˆ™åœ¨ä½¿ç”¨å¤šä¸ªCPUæ—¶è¿è¡Œé€Ÿåº¦æ›´å¿«ï¼Œè€Œåœ¨PostgreSQLä¸­ï¼Œå¯ä»¥ä»9.6ç‰ˆå¼€å§‹è¿è¡Œã€‚ 


 å®ç°å¹¶è¡ŒæŸ¥è¯¢åŠŸèƒ½èŠ±äº†3å¹´çš„æ—¶é—´-æˆ‘ä¸å¾—ä¸åœ¨æŸ¥è¯¢æ‰§è¡Œçš„ä¸åŒé˜¶æ®µé‡å†™ä»£ç ã€‚ PostgreSQL 9.6å¼•...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PostgreSQLä¸­çš„å¹¶è¡ŒæŸ¥è¯¢</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/446706/"><p><img src="https://habrastorage.org/webt/kx/ht/dl/kxhtdlsry_f8p1jv2ve_1ziks7e.jpeg"></p><br><p> ç°ä»£CPUä¸­æœ‰å¾ˆå¤šæ ¸å¿ƒã€‚ å¤šå¹´æ¥ï¼Œåº”ç”¨ç¨‹åºå·²å°†æŸ¥è¯¢å¹¶è¡Œå‘é€åˆ°æ•°æ®åº“ã€‚ å¦‚æœè¿™æ˜¯å¯¹è¡¨ä¸­å¤šä¸ªè¡Œçš„æŠ¥å‘ŠæŸ¥è¯¢ï¼Œåˆ™åœ¨ä½¿ç”¨å¤šä¸ªCPUæ—¶è¿è¡Œé€Ÿåº¦æ›´å¿«ï¼Œè€Œåœ¨PostgreSQLä¸­ï¼Œå¯ä»¥ä»9.6ç‰ˆå¼€å§‹è¿è¡Œã€‚ </p><br><p> å®ç°å¹¶è¡ŒæŸ¥è¯¢åŠŸèƒ½èŠ±äº†3å¹´çš„æ—¶é—´-æˆ‘ä¸å¾—ä¸åœ¨æŸ¥è¯¢æ‰§è¡Œçš„ä¸åŒé˜¶æ®µé‡å†™ä»£ç ã€‚  PostgreSQL 9.6å¼•å…¥äº†åŸºç¡€ç»“æ„ä»¥è¿›ä¸€æ­¥æ”¹è¿›ä»£ç ã€‚ åœ¨åç»­ç‰ˆæœ¬ä¸­ï¼Œå…¶ä»–ç±»å‹çš„æŸ¥è¯¢å°†å¹¶è¡Œæ‰§è¡Œã€‚ </p><a name="habracut"></a><br><h3 id="ogranicheniya"> å±€é™æ€§ </h3><br><ul><li> å¦‚æœæ‰€æœ‰å†…æ ¸éƒ½å·²ä½¿ç”¨ï¼Œåˆ™ä¸è¦å¯ç”¨å¹¶è¡Œæ‰§è¡Œï¼Œå¦åˆ™å…¶ä»–è¯·æ±‚å°†å˜æ…¢ã€‚ </li><li> æœ€é‡è¦çš„æ˜¯ï¼Œå…·æœ‰é«˜WORK_MEMå€¼çš„å¹¶è¡Œå¤„ç†ä¼šæ¶ˆè€—å¤§é‡å†…å­˜-æ¯ä¸ªå“ˆå¸Œè”æ¥æˆ–æ’åºéƒ½ä¼šå ç”¨work_memæ•°é‡çš„å†…å­˜ã€‚ </li><li> ä½å»¶è¿ŸOLTPè¯·æ±‚ä¸èƒ½é€šè¿‡å¹¶è¡Œæ‰§è¡Œæ¥åŠ é€Ÿã€‚ å¦‚æœæŸ¥è¯¢è¿”å›ä¸€è¡Œï¼Œé‚£ä¹ˆå¹¶è¡Œå¤„ç†åªä¼šå‡æ…¢å®ƒçš„é€Ÿåº¦ã€‚ </li><li> å¼€å‘äººå‘˜å–œæ¬¢ä½¿ç”¨TPC-HåŸºå‡†æµ‹è¯•ã€‚ ä¹Ÿè®¸æ‚¨æœ‰ç±»ä¼¼çš„æŸ¥è¯¢ä»¥å®ç°å®Œç¾çš„å¹¶è¡Œæ‰§è¡Œã€‚ </li><li> åªæœ‰æ²¡æœ‰è°“è¯é”çš„SELECTæŸ¥è¯¢æ‰èƒ½å¹¶è¡Œæ‰§è¡Œã€‚ </li><li> æœ‰æ—¶æ­£ç¡®çš„ç´¢å¼•æ¯”å¹¶è¡Œçš„é¡ºåºè¡¨æ‰«æè¦å¥½ã€‚ </li><li> ä¸æ”¯æŒæŒ‚èµ·æŸ¥è¯¢å’Œæ¸¸æ ‡ã€‚ </li><li> çª—å£å‡½æ•°å’Œæœ‰åºé›†åˆçš„é›†åˆå‡½æ•°ä¸æ˜¯å¹¶è¡Œçš„ã€‚ </li><li> æ‚¨åœ¨I / Oå·¥ä½œè´Ÿè½½ä¸­ä¸€æ— æ‰€è·ã€‚ </li><li> æ²¡æœ‰å¹¶è¡Œæ’åºç®—æ³•ã€‚ ä½†æ˜¯æ’åºæŸ¥è¯¢å¯ä»¥åœ¨æŸäº›æ–¹é¢å¹¶è¡Œæ‰§è¡Œã€‚ </li><li> ç”¨åµŒå¥—çš„SELECTæ›¿æ¢CTEï¼ˆWITH ...ï¼‰ä»¥å¯ç”¨å¹¶è¡Œå¤„ç†ã€‚ </li><li>ç¬¬ä¸‰æ–¹æ•°æ®åŒ…è£…å™¨å°šä¸æ”¯æŒå¹¶è¡Œå¤„ç†ï¼ˆä½†æ˜¯å¯ä»¥ï¼ï¼‰ </li><li> ä¸æ”¯æŒFULL OUTER JOINã€‚ </li><li>  max_rowsç¦ç”¨å¹¶è¡Œå¤„ç†ã€‚ </li><li> å¦‚æœè¯¥è¯·æ±‚å…·æœ‰æœªæ ‡è®°ä¸ºPARALLEL SAFEçš„åŠŸèƒ½ï¼Œåˆ™å®ƒå°†æ˜¯å•çº¿ç¨‹çš„ã€‚ </li><li> äº‹åŠ¡éš”ç¦»çº§åˆ«SERIALIZABLEç¦ç”¨å¹¶è¡Œå¤„ç†ã€‚ </li></ul><br><h3 id="testovaya-sreda"> æµ‹è¯•ç¯å¢ƒ </h3><br><p>  PostgreSQLå¼€å‘äººå‘˜è¯•å›¾å‡å°‘TPC-HåŸºå‡†æŸ¥è¯¢çš„å“åº”æ—¶é—´ã€‚ ä¸‹è½½åŸºå‡†æµ‹è¯•ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿å…¶é€‚åº”PostgreSQL</a> ã€‚ è¿™æ˜¯TPC-HåŸºå‡†çš„éå®˜æ–¹ä½¿ç”¨-å¹¶éç”¨äºæ¯”è¾ƒæ•°æ®åº“æˆ–ç¡¬ä»¶ã€‚ </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»éç°åœºTPC</a>ä¸‹è½½TPC-H_Tools_v2.17.3.zipï¼ˆæˆ–æ›´æ–°ç‰ˆæœ¬ï¼‰ã€‚ </li><li> å°†makefile.suiteé‡å‘½åä¸ºMakefileå¹¶æŒ‰ä»¥ä¸‹è¯´æ˜è¿›è¡Œæ›´æ”¹ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//github.com/tvondra/pg_tpch</a> ã€‚ ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘ä»£ç ã€‚ </li><li>ç”Ÿæˆæ•°æ®ï¼š <code>./dbgen -s 10</code>åˆ›å»ºä¸€ä¸ª23 GBçš„æ•°æ®åº“ã€‚ è¿™è¶³ä»¥çœ‹å‡ºå¹¶è¡ŒæŸ¥è¯¢å’Œéå¹¶è¡ŒæŸ¥è¯¢çš„æ€§èƒ½å·®å¼‚ã€‚ </li><li>  <code>csv  for</code>å’Œ<code>sed</code>å°†<code>tbl</code>æ–‡ä»¶è½¬æ¢ä¸º<code>csv  for</code> ã€‚ </li><li> å…‹éš†pg_tpchå­˜å‚¨åº“ï¼Œç„¶åå°†<code>csv</code>å¤åˆ¶åˆ°<code>pg_tpch/dss/data</code> ã€‚ </li><li> ä½¿ç”¨<code>qgen</code>å‘½ä»¤åˆ›å»ºæŸ¥è¯¢ã€‚ </li><li> ä½¿ç”¨<code>./tpch.sh</code>å‘½ä»¤å°†æ•°æ®ä¸Šä¼ åˆ°æ•°æ®åº“ã€‚ </li></ol><br><h3 id="parallelnoe-posledovatelnoe-skanirovanie"> å¹¶è¡Œé¡ºåºæ‰«æ </h3><br><p> å¯èƒ½ä¸æ˜¯å› ä¸ºå¹¶è¡Œè¯»å–ï¼Œè€Œæ˜¯å› ä¸ºæ•°æ®åˆ†æ•£åœ¨è®¸å¤šCPUå†…æ ¸ä¸­ï¼Œæ‰€ä»¥é€Ÿåº¦æ›´å¿«ã€‚ åœ¨ç°ä»£æ“ä½œç³»ç»Ÿä¸Šï¼ŒPostgreSQLæ•°æ®æ–‡ä»¶è¢«å¾ˆå¥½åœ°ç¼“å­˜ã€‚ é€šè¿‡é¢„è¯»ï¼Œæ‚¨å¯ä»¥ä»å­˜å‚¨ä¸­è·å¾—æ¯”PGå®ˆæŠ¤ç¨‹åºè¯·æ±‚æ›´å¤šçš„ä¿¡æ¯ã€‚ å› æ­¤ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¸å—ç£ç›˜I / Oçš„é™åˆ¶ã€‚ å®ƒæ¶ˆè€—CPUå‘¨æœŸæ¥ï¼š </p><br><ul><li> ä»è¡¨æ ¼çš„é¡µé¢ä¸€ä¸€è¯»å– </li><li> æ¯”è¾ƒå­—ç¬¦ä¸²å€¼å’Œ<code>WHERE</code>å­å¥ã€‚ </li></ul><br><p> è®©æˆ‘ä»¬è¿è¡Œä¸€ä¸ªç®€å•çš„<code>select</code>æŸ¥è¯¢ï¼š </p><br><pre> <code class="plaintext hljs">tpch=# explain analyze select l_quantity as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN -------------------------------------------------------------------------------------------------------------------------- Seq Scan on lineitem (cost=0.00..1964772.00 rows=58856235 width=5) (actual time=0.014..16951.669 rows=58839715 loops=1) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 1146337 Planning Time: 0.203 ms Execution Time: 19035.100 ms</code> </pre> <br><p> é¡ºåºæ‰«æäº§ç”Ÿå¤ªå¤šè¡Œè€Œæ²¡æœ‰èšåˆï¼Œå› æ­¤è¯¥è¯·æ±‚ç”±å•ä¸ªCPUå†…æ ¸æ‰§è¡Œã€‚ </p><br><p> å¦‚æœæ·»åŠ <code>SUM()</code> ï¼Œåˆ™ä¼šçœ‹åˆ°ä¸¤ä¸ªå·¥ä½œæµç¨‹å°†æœ‰åŠ©äºåŠ å¿«è¯·æ±‚çš„é€Ÿåº¦ï¼š </p><br><pre> <code class="plaintext hljs">explain analyze select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN ---------------------------------------------------------------------------------------------------------------------------------------------------- Finalize Aggregate (cost=1589702.14..1589702.15 rows=1 width=32) (actual time=8553.365..8553.365 rows=1 loops=1) -&gt; Gather (cost=1589701.91..1589702.12 rows=2 width=32) (actual time=8553.241..8555.067 rows=3 loops=1) Workers Planned: 2 Workers Launched: 2 -&gt; Partial Aggregate (cost=1588701.91..1588701.92 rows=1 width=32) (actual time=8547.546..8547.546 rows=1 loops=3) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1527393.33 rows=24523431 width=5) (actual time=0.038..5998.417 rows=19613238 loops=3) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 382112 Planning Time: 0.241 ms Execution Time: 8555.131 ms</code> </pre> <br><h3 id="parallelnaya-agregaciya"> å¹¶è¡Œèšåˆ </h3><br><p> å¹¶è¡ŒSeqæ‰«æèŠ‚ç‚¹ç”Ÿæˆç”¨äºéƒ¨åˆ†èšåˆçš„å­—ç¬¦ä¸²ã€‚ éƒ¨åˆ†èšåˆèŠ‚ç‚¹ä½¿ç”¨<code>SUM()</code>æˆªæ–­è¿™äº›è¡Œã€‚ æœ€åï¼Œæ¥è‡ªæ¯ä¸ªå·¥ä½œæµçš„SUMè®¡æ•°å™¨ç”±GatherèŠ‚ç‚¹æ”¶é›†ã€‚ </p><br><p> æœ€ç»ˆç»“æœç”±â€œæœ€ç»ˆæ±‡æ€»â€èŠ‚ç‚¹è®¡ç®—ã€‚ å¦‚æœæ‚¨æ‹¥æœ‰è‡ªå·±çš„èšåˆåŠŸèƒ½ï¼Œè¯·ç¡®ä¿å°†å…¶æ ‡è®°ä¸ºâ€œå¹¶è¡Œå®‰å…¨â€ã€‚ </p><br><h3 id="kolichestvo-rabochih-processov"> å·¥ä½œæµç¨‹æ•° </h3><br><p> æ— éœ€é‡å¯æœåŠ¡å™¨å³å¯å¢åŠ å·¥ä½œæµæ•°é‡ï¼š </p><br><pre> <code class="plaintext hljs">alter system set max_parallel_workers_per_gather=4; select * from pg_reload_conf();</code> </pre> <br><p> ç°åœ¨æˆ‘ä»¬çœ‹åˆ°4ä¸ªå·¥äººåœ¨è§£é‡Šè¾“å‡ºï¼š </p><br><pre> <code class="plaintext hljs">tpch=# explain analyze select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN ---------------------------------------------------------------------------------------------------------------------------------------------------- Finalize Aggregate (cost=1440213.58..1440213.59 rows=1 width=32) (actual time=5152.072..5152.072 rows=1 loops=1) -&gt; Gather (cost=1440213.15..1440213.56 rows=4 width=32) (actual time=5151.807..5153.900 rows=5 loops=1) Workers Planned: 4 Workers Launched: 4 -&gt; Partial Aggregate (cost=1439213.15..1439213.16 rows=1 width=32) (actual time=5147.238..5147.239 rows=1 loops=5) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1402428.00 rows=14714059 width=5) (actual time=0.037..3601.882 rows=11767943 loops=5) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 229267 Planning Time: 0.218 ms Execution Time: 5153.967 ms</code> </pre> <br><p> è¿™æ˜¯æ€ä¹ˆå›äº‹ å·¥ä½œæµç¨‹å¢åŠ äº†2å€ï¼Œè€Œè¯·æ±‚ä»…æé«˜äº†1.6599å€ã€‚ è®¡ç®—å¾ˆæœ‰è¶£ã€‚ æˆ‘ä»¬æœ‰2ä¸ªå·¥ä½œæµç¨‹å’Œ1ä¸ªé¢†å¯¼è€…ã€‚ æ›´æ”¹åï¼Œå˜ä¸º4 +1ã€‚ </p><br><p> æˆ‘ä»¬ä»å¹¶è¡Œå¤„ç†ä¸­è·å¾—çš„æœ€å¤§åŠ é€Ÿï¼š5/3 = 1.66ï¼ˆ6ï¼‰å€ã€‚ </p><br><h2 id="kak-eto-rabotaet"> å¦‚ä½•è¿ä½œï¼Ÿ </h2><br><h3 id="processy"> æµç¨‹ </h3><br><p> è¯·æ±‚çš„æ‰§è¡Œå§‹ç»ˆå§‹äºé¢†å…ˆæµç¨‹ã€‚ é¢†å¯¼è€…æ‰§è¡Œæ‰€æœ‰éå¹¶è¡Œçš„å·¥ä½œï¼Œå¹¶ä¸”æ˜¯å¹¶è¡Œå¤„ç†çš„ä¸€éƒ¨åˆ†ã€‚ æ‰§è¡Œç›¸åŒè¯·æ±‚çš„å…¶ä»–æµç¨‹ç§°ä¸ºå·¥ä½œæµç¨‹ã€‚ å¹¶è¡Œå¤„ç†ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŠ¨æ€åå°å·¥ä½œæµ</a>çš„åŸºç¡€ç»“æ„ï¼ˆè‡ª9.4ç‰ˆå¼€å§‹ï¼‰ã€‚ ç”±äºPostgreSQLçš„å…¶ä»–éƒ¨åˆ†ä½¿ç”¨è¿›ç¨‹è€Œä¸æ˜¯çº¿ç¨‹ï¼Œå› æ­¤å…·æœ‰3ä¸ªå·¥ä½œæµçš„æŸ¥è¯¢å¯èƒ½æ¯”ä¼ ç»Ÿå¤„ç†å¿«4å€ã€‚ </p><br><h3 id="vzaimodeystvie"> äº’åŠ¨äº’åŠ¨ </h3><br><p> å·¥ä½œæµé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆåŸºäºå…±äº«å†…å­˜ï¼‰ä¸é¢†å¯¼è€…è¿›è¡Œé€šä¿¡ã€‚ æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰2ä¸ªé˜Ÿåˆ—ï¼šé”™è¯¯é˜Ÿåˆ—å’Œå…ƒç»„é˜Ÿåˆ—ã€‚ </p><br><h3 id="skolko-nuzhno-rabochih-processov"> æ‚¨éœ€è¦å¤šå°‘ä¸ªå·¥ä½œæµç¨‹ï¼Ÿ </h3><br><p> æœ€å°é™åˆ¶ç”±<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>max_parallel_workers_per_gather</code></a>å‚æ•°è®¾ç½®ã€‚ ç„¶åï¼ŒæŸ¥è¯¢æ‰§è¡Œç¨‹åºä»å—<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>max_parallel_workers size</code></a>å‚æ•°é™åˆ¶çš„æ± ä¸­è·å–å·¥ä½œæµã€‚ æœ€åä¸€ä¸ªé™åˆ¶æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>max_worker_processes</code></a> ï¼Œå³åå°è¿›ç¨‹çš„æ€»æ•°ã€‚ </p><br><p> å¦‚æœæ— æ³•åˆ†é…å·¥ä½œæµç¨‹ï¼Œåˆ™å¤„ç†å°†æ˜¯å•è¿‡ç¨‹ã€‚ </p><br><p> æŸ¥è¯¢è®¡åˆ’ç¨‹åºå¯ä»¥æ ¹æ®è¡¨æˆ–ç´¢å¼•çš„å¤§å°æ¥ç¼©çŸ­å·¥ä½œæµç¨‹ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>min_parallel_table_scan_size</code></a>æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>min_parallel_table_scan_size</code></a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>min_parallel_index_scan_size</code></a>å‚æ•°ã€‚ </p><br><pre> <code class="plaintext hljs">set min_parallel_table_scan_size='8MB' 8MB table =&gt; 1 worker 24MB table =&gt; 2 workers 72MB table =&gt; 3 workers x =&gt; log(x / min_parallel_table_scan_size) / log(3) + 1 worker</code> </pre> <br><p> æ¯æ¬¡è¡¨æ¯”<code>min_parallel_(index|table)_scan_size</code>å¤§3å€æ—¶ï¼ŒPostgresä¼šæ·»åŠ å·¥ä½œæµã€‚ å·¥ä½œæµç¨‹çš„æ•°é‡ä¸æ˜¯åŸºäºæˆæœ¬çš„ã€‚ å¾ªç¯ä¾èµ–æ€§ä½¿å¤æ‚çš„å®ç°å¤æ‚åŒ–ã€‚ è€Œæ˜¯ï¼Œè°ƒåº¦ç¨‹åºä½¿ç”¨ç®€å•çš„è§„åˆ™ã€‚ </p><br><p> å®é™…ä¸Šï¼Œè¿™äº›è§„åˆ™å¹¶ä¸æ€»æ˜¯é€‚ç”¨äºç”Ÿäº§ï¼Œå› æ­¤æ‚¨å¯ä»¥æ›´æ”¹ç‰¹å®šè¡¨çš„å·¥ä½œæµæ•°é‡ï¼šALTER TABLE ... SETï¼ˆ <code>parallel_workers = N</code> ï¼‰ã€‚ </p><br><h3 id="pochemu-parallelnaya-obrabotka-ne-ispolzuetsya"> ä¸ºä»€ä¹ˆä¸ä½¿ç”¨å¹¶è¡Œå¤„ç†ï¼Ÿ </h3><br><p> é™¤äº†ä¸€é•¿ä¸²çš„é™åˆ¶å¤–ï¼Œè¿˜è¿›è¡Œæˆæœ¬æ£€æŸ¥ï¼š </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>parallel_setup_cost</code></a>åœ¨ä¸å¯¹çŸ­è¯·æ±‚è¿›è¡Œå¹¶è¡Œå¤„ç†çš„æƒ…å†µä¸‹æ‰§è¡Œã€‚ æ­¤å‚æ•°ä¼°è®¡å‡†å¤‡å†…å­˜ï¼Œå¯åŠ¨è¿›ç¨‹å’Œåˆå§‹æ•°æ®äº¤æ¢çš„æ—¶é—´ã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>parallel_tuple_cost</code></a> ï¼šé¢†å¯¼è€…ä¸å·¥äººä¹‹é—´çš„é€šä¿¡å¯èƒ½ä¼šå»¶è¿Ÿï¼Œä¸å·¥ä½œæµç¨‹ä¸­å…ƒç»„çš„æ•°é‡æˆæ­£æ¯”ã€‚ æ­¤å‚æ•°è®¡ç®—æ•°æ®äº¤æ¢æˆæœ¬ã€‚ </p><br><h3 id="soedineniya-vlozhennyh-ciklov--nested-loop-join"> åµŒå¥—å¾ªç¯è”æ¥ </h3><br><pre> <code class="plaintext hljs">PostgreSQL 9.6+      â€”   . explain (costs off) select c_custkey, count(o_orderkey) from customer left outer join orders on c_custkey = o_custkey and o_comment not like '%special%deposits%' group by c_custkey; QUERY PLAN -------------------------------------------------------------------------------------- Finalize GroupAggregate Group Key: customer.c_custkey -&gt; Gather Merge Workers Planned: 4 -&gt; Partial GroupAggregate Group Key: customer.c_custkey -&gt; Nested Loop Left Join -&gt; Parallel Index Only Scan using customer_pkey on customer -&gt; Index Scan using idx_orders_custkey on orders Index Cond: (customer.c_custkey = o_custkey) Filter: ((o_comment)::text !~~ '%special%deposits%'::text)</code> </pre> <br><p> æ”¶é›†å‘ç”Ÿåœ¨æœ€åé˜¶æ®µï¼Œå› æ­¤åµŒå¥—å¾ªç¯å·¦è¿æ¥æ˜¯å¹¶è¡Œæ“ä½œã€‚ ä»…å¹¶è¡Œç´¢å¼•æ‰«æä»…åœ¨ç‰ˆæœ¬10ä¸­å‡ºç°ã€‚å…¶å·¥ä½œæ–¹å¼ä¸å¹¶è¡Œä¸²è¡Œæ‰«æç›¸ä¼¼ã€‚ æ¡ä»¶<code>c_custkey = o_custkey</code>ä¸ºæ¯ä¸ªå®¢æˆ·çº¿è¯»å–ä¸€ä¸ªè®¢å•ã€‚ å› æ­¤å®ƒä¸æ˜¯å¹¶è¡Œçš„ã€‚ </p><br><h3 id="hesh-soedinenie--hash-join"> å“ˆå¸Œè”æ¥-å“ˆå¸Œè”æ¥ </h3><br><p> æ¯ä¸ªå·¥ä½œæµç¨‹éƒ½åœ¨PostgreSQL 11ä¹‹å‰åˆ›å»ºè‡ªå·±çš„å“ˆå¸Œè¡¨ã€‚è€Œä¸”ï¼Œå¦‚æœè¿™äº›æµç¨‹ä¸­æœ‰å››ä¸ªä»¥ä¸Šï¼Œåˆ™æ€§èƒ½å°†ä¸ä¼šæé«˜ã€‚ åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œå“ˆå¸Œè¡¨æ˜¯å…±äº«çš„ã€‚ æ¯ä¸ªå·¥ä½œæµç¨‹éƒ½å¯ä»¥ä½¿ç”¨WORK_MEMåˆ›å»ºå“ˆå¸Œè¡¨ã€‚ </p><br><pre> <code class="plaintext hljs">select l_shipmode, sum(case when o_orderpriority = '1-URGENT' or o_orderpriority = '2-HIGH' then 1 else 0 end) as high_line_count, sum(case when o_orderpriority &lt;&gt; '1-URGENT' and o_orderpriority &lt;&gt; '2-HIGH' then 1 else 0 end) as low_line_count from orders, lineitem where o_orderkey = l_orderkey and l_shipmode in ('MAIL', 'AIR') and l_commitdate &lt; l_receiptdate and l_shipdate &lt; l_commitdate and l_receiptdate &gt;= date '1996-01-01' and l_receiptdate &lt; date '1996-01-01' + interval '1' year group by l_shipmode order by l_shipmode LIMIT 1; QUERY PLAN ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- Limit (cost=1964755.66..1964961.44 rows=1 width=27) (actual time=7579.592..7922.997 rows=1 loops=1) -&gt; Finalize GroupAggregate (cost=1964755.66..1966196.11 rows=7 width=27) (actual time=7579.590..7579.591 rows=1 loops=1) Group Key: lineitem.l_shipmode -&gt; Gather Merge (cost=1964755.66..1966195.83 rows=28 width=27) (actual time=7559.593..7922.319 rows=6 loops=1) Workers Planned: 4 Workers Launched: 4 -&gt; Partial GroupAggregate (cost=1963755.61..1965192.44 rows=7 width=27) (actual time=7548.103..7564.592 rows=2 loops=5) Group Key: lineitem.l_shipmode -&gt; Sort (cost=1963755.61..1963935.20 rows=71838 width=27) (actual time=7530.280..7539.688 rows=62519 loops=5) Sort Key: lineitem.l_shipmode Sort Method: external merge Disk: 2304kB Worker 0: Sort Method: external merge Disk: 2064kB Worker 1: Sort Method: external merge Disk: 2384kB Worker 2: Sort Method: external merge Disk: 2264kB Worker 3: Sort Method: external merge Disk: 2336kB -&gt; Parallel Hash Join (cost=382571.01..1957960.99 rows=71838 width=27) (actual time=7036.917..7499.692 rows=62519 loops=5) Hash Cond: (lineitem.l_orderkey = orders.o_orderkey) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1552386.40 rows=71838 width=19) (actual time=0.583..4901.063 rows=62519 loops=5) Filter: ((l_shipmode = ANY ('{MAIL,AIR}'::bpchar[])) AND (l_commitdate &lt; l_receiptdate) AND (l_shipdate &lt; l_commitdate) AND (l_receiptdate &gt;= '1996-01-01'::date) AND (l_receiptdate &lt; '1997-01-01 00:00:00'::timestamp without time zone)) Rows Removed by Filter: 11934691 -&gt; Parallel Hash (cost=313722.45..313722.45 rows=3750045 width=20) (actual time=2011.518..2011.518 rows=3000000 loops=5) Buckets: 65536 Batches: 256 Memory Usage: 3840kB -&gt; Parallel Seq Scan on orders (cost=0.00..313722.45 rows=3750045 width=20) (actual time=0.029..995.948 rows=3000000 loops=5) Planning Time: 0.977 ms Execution Time: 7923.770 ms</code> </pre> <br><p> æ¥è‡ªTPC-Hçš„è¯·æ±‚12è¯´æ˜äº†å¹¶è¡Œå“ˆå¸Œè¿æ¥ã€‚ æ¯ä¸ªå·¥ä½œæµç¨‹éƒ½æ¶‰åŠåˆ›å»ºå…±äº«å“ˆå¸Œè¡¨ã€‚ </p><br><h3 id="soedinenie-sliyaniem--merge-join"> åˆå¹¶åŠ å…¥ </h3><br><p> æœ¬è´¨ä¸Šï¼Œåˆå¹¶è”æ¥ä¸æ˜¯å¹¶è¡Œçš„ã€‚ å¦‚æœè¿™æ˜¯è¯·æ±‚çš„æœ€åé˜¶æ®µï¼Œè¯·ä¸è¦æ‹…å¿ƒ-å®ƒä»ç„¶å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€‚ </p><br><pre> <code class="plaintext hljs">-- Query 2 from TPC-H explain (costs off) select s_acctbal, s_name, n_name, p_partkey, p_mfgr, s_address, s_phone, s_comment from part, supplier, partsupp, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and p_size = 36 and p_type like '%BRASS' and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'AMERICA' and ps_supplycost = ( select min(ps_supplycost) from partsupp, supplier, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'AMERICA' ) order by s_acctbal desc, n_name, s_name, p_partkey LIMIT 100; QUERY PLAN ---------------------------------------------------------------------------------------------------------- Limit -&gt; Sort Sort Key: supplier.s_acctbal DESC, nation.n_name, supplier.s_name, part.p_partkey -&gt; Merge Join Merge Cond: (part.p_partkey = partsupp.ps_partkey) Join Filter: (partsupp.ps_supplycost = (SubPlan 1)) -&gt; Gather Merge Workers Planned: 4 -&gt; Parallel Index Scan using &lt;strong&gt;part_pkey&lt;/strong&gt; on part Filter: (((p_type)::text ~~ '%BRASS'::text) AND (p_size = 36)) -&gt; Materialize -&gt; Sort Sort Key: partsupp.ps_partkey -&gt; Nested Loop -&gt; Nested Loop Join Filter: (nation.n_regionkey = region.r_regionkey) -&gt; Seq Scan on region Filter: (r_name = 'AMERICA'::bpchar) -&gt; Hash Join Hash Cond: (supplier.s_nationkey = nation.n_nationkey) -&gt; Seq Scan on supplier -&gt; Hash -&gt; Seq Scan on nation -&gt; Index Scan using idx_partsupp_suppkey on partsupp Index Cond: (ps_suppkey = supplier.s_suppkey) SubPlan 1 -&gt; Aggregate -&gt; Nested Loop Join Filter: (nation_1.n_regionkey = region_1.r_regionkey) -&gt; Seq Scan on region region_1 Filter: (r_name = 'AMERICA'::bpchar) -&gt; Nested Loop -&gt; Nested Loop -&gt; Index Scan using idx_partsupp_partkey on partsupp partsupp_1 Index Cond: (part.p_partkey = ps_partkey) -&gt; Index Scan using supplier_pkey on supplier supplier_1 Index Cond: (s_suppkey = partsupp_1.ps_suppkey) -&gt; Index Scan using nation_pkey on nation nation_1 Index Cond: (n_nationkey = supplier_1.s_nationkey)</code> </pre> <br><p> åˆå¹¶è”æ¥èŠ‚ç‚¹ä½äºèšé›†åˆå¹¶ä¸Šæ–¹ã€‚ å› æ­¤ï¼Œåˆå¹¶ä¸ä½¿ç”¨å¹¶è¡Œå¤„ç†ã€‚ ä½†æ˜¯â€œå¹¶è¡Œç´¢å¼•æ‰«æâ€èŠ‚ç‚¹ä»ç„¶å¯ä»¥å¸®åŠ©<code>part_pkey</code>æ®µã€‚ </p><br><h3 id="soedinenie-po-sekciyam"> èŠ‚è¿æ¥ </h3><br><p> åœ¨PostgreSQL 11ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ç¦ç”¨åˆ†åŒºï¼šå®ƒçš„è°ƒåº¦éå¸¸æ˜‚è´µã€‚ å…·æœ‰ç±»ä¼¼åˆ†åŒºçš„è¡¨å¯ä»¥é€èŠ‚è¿æ¥ã€‚ å› æ­¤Postgreså°†ä½¿ç”¨è¾ƒå°çš„å“ˆå¸Œè¡¨ã€‚ æ¯ä¸ªéƒ¨åˆ†çš„è¿æ¥å¯ä»¥å¹¶è¡Œã€‚ </p><br><pre> <code class="plaintext hljs">tpch=# set enable_partitionwise_join=t; tpch=# explain (costs off) select * from prt1 t1, prt2 t2 where t1.a = t2.b and t1.b = 0 and t2.b between 0 and 10000; QUERY PLAN --------------------------------------------------- Append -&gt; Hash Join Hash Cond: (t2.b = t1.a) -&gt; Seq Scan on prt2_p1 t2 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Hash -&gt; Seq Scan on prt1_p1 t1 Filter: (b = 0) -&gt; Hash Join Hash Cond: (t2_1.b = t1_1.a) -&gt; Seq Scan on prt2_p2 t2_1 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Hash -&gt; Seq Scan on prt1_p2 t1_1 Filter: (b = 0) tpch=# set parallel_setup_cost = 1; tpch=# set parallel_tuple_cost = 0.01; tpch=# explain (costs off) select * from prt1 t1, prt2 t2 where t1.a = t2.b and t1.b = 0 and t2.b between 0 and 10000; QUERY PLAN ----------------------------------------------------------- Gather Workers Planned: 4 -&gt; Parallel Append -&gt; Parallel Hash Join Hash Cond: (t2_1.b = t1_1.a) -&gt; Parallel Seq Scan on prt2_p2 t2_1 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Parallel Hash -&gt; Parallel Seq Scan on prt1_p2 t1_1 Filter: (b = 0) -&gt; Parallel Hash Join Hash Cond: (t2.b = t1.a) -&gt; Parallel Seq Scan on prt2_p1 t2 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Parallel Hash -&gt; Parallel Seq Scan on prt1_p1 t1 Filter: (b = 0)</code> </pre> <br><p> æœ€ä¸»è¦çš„æ˜¯ï¼Œåªæœ‰è¿™äº›éƒ¨åˆ†è¶³å¤Ÿå¤§æ—¶ï¼Œè¿™äº›éƒ¨åˆ†ä¸­çš„è¿æ¥æ‰æ˜¯å¹³è¡Œçš„ã€‚ </p><br><h3 id="parallelnoe-dopolnenie--parallel-append"> å¹¶è¡Œè¿½åŠ -å¹¶è¡Œè¿½åŠ  </h3><br><p> åœ¨ä¸åŒçš„å·¥ä½œæµç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¹¶è¡Œè¿½åŠ â€</a>ä»£æ›¿ä¸åŒçš„å—ã€‚ è¿™é€šå¸¸å‘ç”Ÿåœ¨UNION ALLæŸ¥è¯¢ä¸­ã€‚ ç¼ºç‚¹æ˜¯å¹¶è¡Œæ€§è¾ƒå·®ï¼Œå› ä¸ºæ¯ä¸ªå·¥ä½œæµç¨‹ä»…å¤„ç†1ä¸ªè¯·æ±‚ã€‚ </p><br><p> å°½ç®¡å…¶ä¸­åŒ…å«4ä¸ªå·¥ä½œæµï¼Œä½†è¿™é‡Œæ­£åœ¨è¿è¡Œ2ä¸ªå·¥ä½œæµã€‚ </p><br><pre> <code class="plaintext hljs">tpch=# explain (costs off) select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day union all select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '2000-12-01' - interval '105' day; QUERY PLAN ------------------------------------------------------------------------------------------------ Gather Workers Planned: 2 -&gt; Parallel Append -&gt; Aggregate -&gt; Seq Scan on lineitem Filter: (l_shipdate &lt;= '2000-08-18 00:00:00'::timestamp without time zone) -&gt; Aggregate -&gt; Seq Scan on lineitem lineitem_1 Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone)</code> </pre> <br><h3 id="samye-vazhnye-peremennye"> æœ€é‡è¦çš„å˜é‡ </h3><br><ul><li>  WORK_MEMé™åˆ¶æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜é‡ï¼Œè€Œä¸ä»…é™äºè¯·æ±‚ï¼šwork_memè¿æ¥<em>è¿›ç¨‹</em> =å¤§é‡å†…å­˜ã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>max_parallel_workers_per_gather</code></a>æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºå°†ä½¿ç”¨å¤šå°‘ä¸ªè¿›ç¨‹æ¥è¿›è¡Œè®¡åˆ’ä¸­çš„å¹¶è¡Œå¤„ç†ã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>max_worker_processes</code></a>å°†å·¥ä½œè¿›ç¨‹æ€»æ•°è°ƒæ•´ä¸ºæœåŠ¡å™¨ä¸Šçš„CPUæ ¸å¿ƒæ•°ã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>max_parallel_workers</code></a>ç›¸åŒï¼Œä½†é€‚ç”¨äºå¹¶è¡Œå·¥ä½œæµã€‚ </li></ul><br><h3 id="itogi"> æ€»ç»“ </h3><br><p> ä»9.6ç‰ˆå¼€å§‹ï¼Œå¹¶è¡Œå¤„ç†å¯ä»¥ä¸¥é‡æé«˜æ‰«æè®¸å¤šè¡Œæˆ–ç´¢å¼•çš„å¤æ‚æŸ¥è¯¢çš„æ€§èƒ½ã€‚ åœ¨PostgreSQL 10ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹å¯ç”¨å¹¶è¡Œå¤„ç†ã€‚ è¯·è®°ä½åœ¨å…·æœ‰å¤§é‡OLTPå·¥ä½œè´Ÿè½½çš„æœåŠ¡å™¨ä¸Šç¦ç”¨å®ƒã€‚ é¡ºåºæ‰«ææˆ–ç´¢å¼•æ‰«æä¼šæ¶ˆè€—å¤§é‡èµ„æºã€‚ å¦‚æœæ‚¨ä¸æ˜¯åœ¨æ•´ä¸ªæ•°æ®é›†ä¸­è¿›è¡ŒæŠ¥å‘Šï¼Œåˆ™åªéœ€æ·»åŠ ç¼ºå°‘çš„ç´¢å¼•æˆ–ä½¿ç”¨æ­£ç¡®çš„åˆ†åŒºï¼Œä¾¿å¯ä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ </p><br><h3 id="ssylki"> å‚è€ƒæ–‡çŒ® </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.postgresql.org/docs/11/how-parallel-query-works.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.postgresql.org/docs/11/parallel-plans.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://ashutoshpg.blogspot.com/2017/12/partition-wise-joins-divide-and-conquer.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://rhaas.blogspot.com/2016/04/postgresql-96-with-parallel-query-vs.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://amitkapila16.blogspot.com/2015/11/parallel-sequential-scans-in-play.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://write-skew.blogspot.com/2018/01/parallel-hash-for-postgresql.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://rhaas.blogspot.com/2017/03/parallel-query-v2.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://blog.2ndquadrant.com/parallel-monster-benchmark/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://blog.2ndquadrant.com/parallel-aggregate/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.depesz.com/2018/02/12/waiting-for-postgresql-11-support-parallel-btree-index-builds/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PostgreSQL 11ä¸­çš„å¹¶å‘</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN446706/">https://habr.com/ru/post/zh-CN446706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN446690/index.html">ä¼Šè±å…‹æ–¯ä¸ºæ±¡æŸ“æœ€ä¸¥é‡çš„åŸå¸‚æ¨å‡ºæ™ºèƒ½ç©ºæ°”å‡€åŒ–å™¨</a></li>
<li><a href="../zh-CN446694/index.html">JBODæ¨¡å—åŒ–å­˜å‚¨å’Œè‡ªç”±åº¦</a></li>
<li><a href="../zh-CN446696/index.html">å…³äº152-FZçš„ç¥è¯ï¼Œå¯¹äºä¸ªäººæ•°æ®è¿è¥å•†è€Œè¨€å¯èƒ½æ˜¯æ˜‚è´µçš„</a></li>
<li><a href="../zh-CN446700/index.html">Lazydocker-ç›´æ¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨Dockerçš„GUI</a></li>
<li><a href="../zh-CN446702/index.html">è¿˜æœ‰å¦ä¸€ä¸ªæ€ªå¼‚çš„è€³æœº-ç¡è§‰</a></li>
<li><a href="../zh-CN446708/index.html">ç©ºé—´é€šä¿¡ç³»ç»Ÿæ¯”è¾ƒ</a></li>
<li><a href="../zh-CN446710/index.html">ä½¿ç”¨å¾®æœåŠ¡æ¶æ„çš„å››ä¸ªçœŸå®æ•…äº‹-åç«¯United 3 mitapçš„æŠ¥å‘Šï¼šKholodets</a></li>
<li><a href="../zh-CN446712/index.html">HTTPSå¹¶ä¸æ€»æ˜¯çœ‹èµ·æ¥é‚£ä¹ˆå®‰å…¨ã€‚ åœ¨5.5ï¼…çš„HTTPSç«™ç‚¹ä¸­å‘ç°æ¼æ´</a></li>
<li><a href="../zh-CN446714/index.html">æ¥è‡ªITä¸–ç•Œçš„å¥½å¥‡å˜æ€-4</a></li>
<li><a href="../zh-CN446716/index.html">ä¸–ç•Œæœ«æ—¥çš„æ„è¯†å’Œäº‰è®º</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>