<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆓 🤛🏿 🏙️ [Ringkasan Admin] Cara berteman dengan DHCP dan tidak takut pada APIPA 👨🏽‍💼 👨‍👩‍👧‍👧 ☃️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Layanan yang mengeluarkan alamat IP ke perangkat di jaringan lokal tampaknya menjadi salah satu yang paling sederhana dan paling akrab. Namun demikian...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[Ringkasan Admin] Cara berteman dengan DHCP dan tidak takut pada APIPA</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pc-administrator/blog/467333/"><p><img src="https://habrastorage.org/getpro/habr/post_images/9c9/795/e15/9c9795e155e62808327ad29e2e964e7a.jpg"></p><br><p>  Layanan yang mengeluarkan alamat IP ke perangkat di jaringan lokal tampaknya menjadi salah satu yang paling sederhana dan paling akrab.  Namun demikian, kolega saya yang lebih muda kadang-kadang masih memiliki pertanyaan seperti "komputer menerima beberapa alamat aneh", dan penampilan server DHCP kedua di satu segmen jaringan menyebabkan beberapa masalah jaringan atau ketegangan. </p><br><p>  Agar mereka yang membaca materi ini tidak memiliki pertanyaan seperti itu, saya ingin mengumpulkan banyak informasi dasar tentang operasi mekanisme penerbitan alamat IP, fitur dan contoh konfigurasi dari konfigurasi gagal-aman dan aman.  Ya, dan mungkin spesialis yang tidak berpengalaman akan tertarik untuk menyegarkan koneksi saraf. </p><br><p>  Sedikit teori dan solusi untuk masalah yang menarik dan tidak terlalu praktis - di bawah potongan. </p><a name="habracut"></a><br><p>  Dalam jaringan area lokal modern, penerbitan alamat biasanya dilakukan oleh layanan khusus dengan dukungan protokol.  Yang paling populer adalah DHCP (Dynamic Host Configuration Protocol). </p><br><h1 id="zeroconf-ili-zachem-nam-voobsche-kakoy-to-dhcp">  Zeroconf atau mengapa kita perlu semacam DHCP </h1><br><p> Pada prinsipnya, tumpukan teknologi yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Zeroconf</a> dibuat khusus untuk jaringan kecil.  Ini memungkinkan Anda melakukannya tanpa layanan dan server terpusat, termasuk, tetapi tidak terbatas pada penerbitan alamat IP.  Mereka menutup (baik, atau hampir menutup) pertanyaan-pertanyaan berikut: </p><br><p>  <strong>Memperoleh alamat IP</strong> (Pengalamatan IP Pribadi Otomatis atau APIPA).  Sistem itu sendiri memberikan IP dari jaringan 169.254.0.0/16 (kecuali untuk / 24 grid pada awal dan akhir kisaran), berdasarkan alamat MAC dan generator nomor acak semu.  Sistem ini memungkinkan Anda untuk menghindari konflik, dan alamat dari jaringan ini disebut tautan-lokal - termasuk karena alamat ini tidak dirutekan. </p><br><p>  <strong>Cari berdasarkan nama</strong> .  Sistem mengumumkan nama jaringannya, dan setiap komputer bekerja dengannya seperti halnya DNS, menyimpan entri dalam cache-nya.  Apple menggunakan teknologi mDNS (Multicast DNS), dan Microsoft menggunakan LLMNR (Link-local Multicast Name Resolution), yang disebutkan dalam artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Domain, Alamat, dan Windows: Campur, tapi Jangan Goyang</a> ." </p><br><p>  <strong>Cari layanan jaringan</strong> .  Misalnya, printer.  Mungkin protokol yang paling terkenal adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">UPnP</a> , yang, antara lain, dapat membuka port pada router itu sendiri.  Protokolnya cukup rumit, ia menggunakan seluruh rangkaian add-on seperti menggunakan http, tidak seperti protokol kedua yang terkenal - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DNS-SD</a> (DNS Service Discovery), yang hanya menggunakan catatan SRV, termasuk ketika bekerja dengan mDNS. </p><br><p>  Dengan semua keunggulan Zeroconf - tanpa pengetahuan suci apa pun, Anda dapat membangun jaringan yang berfungsi hanya dengan menghubungkan komputer pada tingkat fisik - bahkan dapat mengganggu spesialis TI. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d5b/71d/a7e/d5b71da7ea5fe5493e9881ee71272394.jpg"></p><br><p>  <em>Agak menyebalkan, bukan?</em> </p><br><p>  Pada sistem Windows, untuk menonaktifkan pencarian-otomatis pada semua adapter jaringan, Anda perlu membuat parameter DWORD dengan nama <em>IPAutoconfigurationEnabled</em> di bagian <em>HKEY_LOCAL_MACHINE \ SYSTEM \ CurrentControlSet \ Services \ Tcpip \ Parameter</em> dan mengaturnya ke 0. </p><br><p>  Tentu saja, Zeroconf hanya cocok untuk jaringan kecil yang terisolasi (misalnya, Anda bertemu teman dengan laptop, menghubungkannya melalui Wi-Fi dan mari bermain Diablo II, tanpa membuang waktu di beberapa server), dan saya juga ingin mendapatkan jaringan lokal ke Internet .  Agar tidak menderita dengan pengaturan statis setiap komputer, protokol khusus dibuat, termasuk pahlawan hari ini - DHCP. </p><br><h1 id="dhcp-i-ego-praroditeli">  DHCP dan leluhurnya </h1><br><p>  Salah satu implementasi pertama protokol untuk mengeluarkan alamat IP muncul lebih dari 30 tahun yang lalu dan disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RARP</a> (Reverse Address Resolution Protocol).  Jika kita menyederhanakan prinsip operasinya sedikit, itu tampak seperti ini: klien membuat permintaan ke alamat broadcast jaringan, server menerimanya, menemukan pengikatan alamat MAC dan IP klien dalam databasenya, dan mengirim respons IP. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e6a/53f/109/e6a53f1099a79a913500b6dea05b1dfd.jpg"></p><br><p>  <em>Skema protokol RARP.</em> </p><br><p>  Dan semuanya tampak berhasil.  Tetapi protokol tersebut memiliki kekurangannya: perlu mengkonfigurasi server di setiap segmen jaringan lokal, mendaftarkan alamat MAC pada server ini, dan sama sekali tidak mungkin untuk mengirimkan informasi tambahan ke klien sama sekali.  Oleh karena itu, untuk menggantinya, protokol <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BOOTP</a> (Bootstrap Protocol) telah dibuat. </p><br><p>  Awalnya, ini digunakan untuk workstation diskless, yang diperlukan tidak hanya memberikan alamat IP, tetapi juga mengirimkan informasi tambahan kepada klien, seperti alamat server TFTP dan nama file unduhan.  Tidak seperti RARP, protokol sudah mendukung relai - layanan kecil yang meneruskan permintaan ke server "utama".  Ini memungkinkan untuk menggunakan satu server pada beberapa jaringan secara bersamaan.  Hanya saja tetap perlu mengkonfigurasi tabel secara manual dan batas ukuran untuk informasi tambahan.  Akibatnya, protokol DHCP modern telah memasuki lokasi, yang merupakan ekstensi yang kompatibel dari BOOTP (server DHCP mendukung klien lama, tetapi tidak sebaliknya). </p><br><p>  Perbedaan penting dari protokol yang usang adalah kemampuan untuk sementara waktu mengeluarkan alamat (sewa) dan mentransfer sejumlah besar informasi yang berbeda kepada klien.  Ini dicapai karena prosedur yang kurang sepele untuk mendapatkan alamat.  Jika dalam protokol lama skema itu sederhana, dari jenis permintaan-respons, maka sekarang skemanya adalah sebagai berikut: </p><br><ul><li>  Klien mencari server dengan permintaan siaran, juga meminta pengaturan tambahan. </li><li>  Server merespons klien dengan menawarkannya alamat IP dan pengaturan lainnya. </li><li>  Klien mengkonfirmasi informasi yang diterima oleh permintaan siaran, yang menunjukkan dalam konfirmasi alamat IP dari server yang dipilih. </li><li>  Server setuju dengan klien dengan mengirimkan permintaan kepadanya, setelah menerima yang klien sudah mengkonfigurasi antarmuka jaringan atau menolaknya. </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b55/510/aa5/b55510aa54fa43c6b42e109826ec02a5.jpg"></p><br><p>  <em>Skema komunikasi klien dengan forwarder dan server.</em> </p><br><p>  Anda dapat membaca lebih lanjut tentang skema interaksi server-klien dan struktur permintaan dan tanggapan, misalnya, dalam materi " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Struktur, format, dan tujuan paket DHCP</a> ". </p><br><blockquote>  Pada beberapa wawancara mereka bertanya kepada saya: "Transportasi dan port apa yang digunakan DHCP?"  Untuk jaga-jaga, kami menjawab: "Server UDP: 67, klien UDP: 68". </blockquote><p>  Banyak implementasi dari server DHCP telah ditemui oleh banyak orang, bahkan ketika mengatur jaringan rumah.  Memang, sekarang servernya adalah: </p><br><ul><li>  Pada hampir semua router, terutama SOHO. </li><li>  Pada sistem Windows Server.  Anda dapat membaca tentang server dan konfigurasinya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> resmi. </li><li>  Pada sistem * nix.  Mungkin perangkat lunak yang paling populer adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ISC DHCP Server</a> (dhcpd) dan "pemanen" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dnsmasq</a> . </li></ul><br><p>  Ada banyak implementasi spesifik, tetapi, misalnya, pengaturan server terbatas pada router SOHO.  Ini terutama menyangkut pengaturan tambahan, selain "alamat IP, mask, gateway, server DNS klasik."  Dan justru opsi-opsi tambahan inilah yang menyebabkan minat terbesar dalam pengoperasian protokol.  Daftar lengkapnya dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC yang</a> sesuai, tetapi saya akan menganalisis beberapa contoh menarik. </p><br><h1 id="udivitelnye-opcii-dhcp">  Opsi DHCP Luar Biasa </h1><br><p>  Pada bagian ini, saya akan membahas penggunaan praktis dari opsi DHCP pada peralatan MikroTik.  Saya akan segera menarik perhatian pada kenyataan bahwa tidak semua opsi diatur secara jelas, format parameter dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">wiki</a> .  Perlu juga dicatat bahwa klien menerapkan opsi hanya ketika dia memintanya.  Di beberapa server, Anda dapat memaksa pengaturan untuk dikirim: misalnya, di ISC DHCP Server, arahan <strong><em>dhcp-parameter-request-list</em></strong> bertanggung jawab untuk ini, dan di Dnsmasq - * * <strong><em>--dhcp-option-force</em></strong> .  MikroTik dan Windows tidak tahu caranya. </p><br><p>  <strong>Opsi 6</strong> dan <strong>Opsi 15.</strong> Mari kita mulai dengan yang sederhana.  Pengaturan nomor 6 adalah server DNS yang ditugaskan untuk klien, 15 adalah akhiran DNS.  Menetapkan sufiks DNS dapat berguna saat bekerja dengan sumber daya domain pada jaringan non-domain, seperti yang saya jelaskan dalam artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana Kami Mengurangi Personil Melalui Wi-Fi</a> ".  Konfigurasikan MikroTik di bawah spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Menyiapkan MikroTik, opsi 15</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  15.  —   HEX . /ip dhcp-server option add code=15 name=dns-suffix value=0x57687920616c6c207468697320736869743f #   /ip dhcp-server option sets add name=dns option=dns-suffix #   DHCP-  . /ip dhcp-server network set [find comment="wi-fi client dhcp"] dhcp-option-set=dns</span></span></code> </pre> </div></div><br><p>  Mengetahui bahwa server DNS juga merupakan opsi baru-baru ini berguna ketika klien yang berbeda harus mengeluarkan server DNS yang berbeda.  Keputusan bentuk "mengeluarkan satu server dan membuat aturan dst-nat berbeda untuk port 53" tidak cocok karena sejumlah alasan.  Bagian dari konfigurasi lagi di bawah spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Menyiapkan MikroTik, opsi 6</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ,  ,  ip    /ip dhcp-server option add code=6 name=google value="'8.8.8.8'" add code=6 name=cloudflare value="'1.1.1.1'" #  /ip dhcp-server lease add address=10.0.0.2 dhcp-option=google mac-address=11:11:11:11:11:11 server=dhcp add address=10.0.0.3 dhcp-option=cloudflare mac-address=22:22:22:22:22:22 server=dhcp</span></span></code> </pre></div></div><br><p>  <strong>Opsi 66</strong> dan <strong>Opsi 67</strong> .  Pengaturan ini kembali dari BOOTP dan memungkinkan Anda menentukan server dan gambar TFTP untuk boot jaringan.  Untuk cabang kecil, cukup nyaman untuk menginstal Mikrotik dan workstation tanpa disk di sana dan melempar gambar yang sudah disiapkan dari beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ThinStation ke router</a> .  Contoh konfigurasi DHCP: </p><br><pre> <code class="bash hljs">/ip dhcp-server option add name=<span class="hljs-string"><span class="hljs-string">"option66"</span></span> code=66 value=<span class="hljs-string"><span class="hljs-string">"s'192.168.88.1'"</span></span> add name=<span class="hljs-string"><span class="hljs-string">"option67"</span></span> code=67 value=<span class="hljs-string"><span class="hljs-string">"'pxelinux.0'"</span></span> /ip dhcp-server option sets add name=<span class="hljs-string"><span class="hljs-string">"set-pxe"</span></span> options=option66,option67</code> </pre><br><p>  <strong>Opsi 121</strong> dan <strong>Opsi 249</strong> .  Mereka digunakan untuk mentransfer rute tambahan ke klien, yang dalam beberapa kasus mungkin lebih nyaman daripada mendaftarkan rute pada gateway default.  Pengaturannya hampir identik, kecuali bahwa klien Windows lebih suka yang terakhir.  Untuk mengkonfigurasi parameter, rute harus dikonversi ke heksadesimal, mengumpulkan mask jaringan tujuan, alamat jaringan dan gateway dalam satu baris.  Selain itu, oleh RFC, Anda harus menambahkan rute default.  Opsi penyetelan berada di bawah spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Pengaturan rute</b> <div class="spoiler_text"><p>  Misalkan kita perlu menambahkan rute seperti dst-address = 10.0.0.0 / 24 gateway = 192.168.88.2 ke klien, dan gateway utama adalah 192.168.88.1.  Mari kita bawa semuanya dalam HEX: </p><br><div class="scrollable-table"><table><tbody><tr><td>  Pengaturan data </td><td>  Desember </td><td>  Hex </td></tr><tr><td>  Topeng </td><td>  24 </td><td>  0x18 </td></tr><tr><td>  Jaringan tujuan </td><td>  10.0.0.0 </td><td>  0x0A 00 00 </td></tr><tr><td>  Gerbang </td><td>  192.168.88.2 </td><td>  0xc0 a8 58 02 </td></tr><tr><td>  Jaringan default </td><td>  0.0.0.0/0 </td><td>  0x00 </td></tr><tr><td>  Gateway default </td><td>  192.168.88.1 </td><td>  0xc0 a8 58 01 </td></tr></tbody></table></div><br><p>  Mari kumpulkan semua kebahagiaan ini dalam satu baris dan dapatkan latar: </p><br><pre> <code class="bash hljs">/ip dhcp-server option add code=121 name=classless value=0x0A0000c0a8580200c0a85801</code> </pre></div></div><br><p>  Baca lebih lanjut di artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mikrotik, DHCP Classless Route</a> ". </p><br><p>  <strong>Opsi 252.</strong> Konfigurasi server proxy otomatis.  Jika karena alasan tertentu organisasi menggunakan proxy yang buram, akan lebih mudah untuk mengkonfigurasinya dengan klien melalui file wpad (pac) khusus.  Contoh pengaturan file seperti itu dijelaskan dalam materi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Proxy Auto Configuration (PAC)</a> .  Sayangnya, MiroTik tidak memiliki server web bawaan untuk menyimpan file ini.  Anda dapat menggunakan paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hotspot</a> atau fitur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">metarouter</a> untuk ini, tetapi lebih baik menempatkan file di tempat lain. </p><br><p>  <strong>Opsi 82</strong> .  Salah satu opsi yang paling berguna tidak hanya untuk klien, tetapi untuk relay DHCP.  Memungkinkan Anda mentransfer informasi tentang port sakelar yang terhubung ke klien dan id sakelar itu sendiri.  Berdasarkan informasi ini, server, pada gilirannya, sudah dapat mengeluarkan satu set pengaturan tertentu kepada klien atau cukup login - untuk menemukan port koneksi klien, tidak perlu untuk pergi ke semua switch secara berurutan (terutama jika mereka tidak di stack). </p><br><p>  Setelah DHCP-Relay dikonfigurasikan pada router, bidang <strong>ID Circuit Agent</strong> dan <strong>Agent Remote ID</strong> akan muncul di informasi klien, di mana yang pertama adalah pengidentifikasi port sakelar dan yang kedua adalah pengidentifikasi sakelar. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/9c3/350/fb7/9c3350fb7d11ac6f57f28c21eb58489f.jpg"></p><br><p>  <em>Mengeluarkan alamat dengan opsi 82.</em> </p><br><p>  Informasi diberikan dalam format heksadesimal.  Untuk kenyamanan, Anda dapat menggunakan skrip untuk menganalisis log DHCP.  Misalnya, solusi untuk solusi dari Microsoft diterbitkan di galeri skrip Technet yang disebut " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dekorasi Opsi DHCP 82</a> ". </p><br><p>  <strong>Opsi 82 ​​juga</strong> secara aktif digunakan dalam sistem penagihan penyedia dan dalam melindungi jaringan dari gangguan luar.  Ini sedikit lebih detail. </p><br><h1 id="dobavim-seti-nadezhnosti-i-bezopasnosti">  Tambahkan jaringan keandalan dan keamanan </h1><br><p>  Karena kesederhanaan protokol dan adanya permintaan siaran, ada serangan yang efektif pada infrastruktur - terutama dari jenis MITM ("man in the middle").  Serangan dilakukan dengan meningkatkan server DHCP Anda atau menyampaikan: setelah semua, jika Anda mengontrol penerbitan pengaturan jaringan, Anda dapat dengan mudah mengarahkan lalu lintas ke gateway yang dikompromikan.  Untuk memfasilitasi serangan, DHCP kelaparan digunakan (berpura-pura menjadi klien atau relay, penyerang memaksa server DHCP "asli" untuk mengeluarkan alamat IP-nya).  Anda dapat membaca lebih lanjut tentang implementasi serangan dalam artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menyerang DHCP</a> ", tetapi <strong>DHCP Snooping</strong> adalah metode perlindungan. </p><br><p>  Ini adalah fungsi sakelar yang memungkinkan Anda untuk "mengikat" server DHCP ke port tertentu.  Respons DHCP pada port lain akan diblokir.  Di beberapa sakelar, Anda dapat mengonfigurasi pekerjaan dengan Opsi 82 ​​saat terdeteksi dalam paket (yang menunjukkan adanya relai): buang, ganti, ganti tidak berubah. </p><br><p>  Dalam sakelar MikroTik, DHCP Snooping diaktifkan di pengaturan jembatan: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># dhcp-snooping  option 82 /interface bridge add name=bridge set [find where name="bridge"] dhcp-snooping=yes add-dhcp-option82=yes #    /interface bridge port add bridge=bridge interface=ether1 add bridge=bridge interface=ether2 trusted=yes</span></span></code> </pre><br><p>  Konfigurasi di sakelar lain serupa. </p><br><blockquote>  Perlu dicatat bahwa tidak semua model MikroTik memiliki dukungan perangkat keras penuh untuk DHCP Snooping - hanya CRS3xx yang memilikinya. </blockquote><p>  Selain perlindungan dari peretas jahat, fungsi ini akan meringankan sakit kepala ketika server DHCP lain muncul di jaringan - misalnya, ketika router SOHO digunakan sebagai saklar dengan titik akses mengatur ulang pengaturannya.  Sayangnya, dalam jaringan di mana peralatan SOHO ditemukan, tidak selalu ada struktur jaringan kabel yang kompeten dengan router yang dikelola.  Tapi itu pertanyaan lain. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/058/801/3c3/0588013c3a7595d350ee0f207dcd7b83.jpg"></p><br><p>  <em>Pergantian yang indah adalah kunci kesehatan.</em> </p><br><p>  Metode perlindungan lainnya termasuk <strong>Keamanan Port</strong> ("mengikat" alamat MAC tertentu ke port router; jika lalu lintas dari alamat lain terdeteksi, port tersebut akan diblokir), <strong>Analisis</strong> lalu lintas untuk jumlah permintaan dan respons DHCP atau membatasi jumlah mereka, dan, tentu saja, berbagai sistem <strong>IPS \ IDS</strong> . </p><br><p>  Jika kita berbicara tidak hanya tentang perlindungan jaringan, tetapi juga tentang keandalan, itu tidak akan keluar dari tempatnya untuk menyebutkan kemampuan DHCP gagal-aman.  Memang, dengan kesederhanaannya, DHCP sering menjadi salah satu layanan utama, dan jika gagal, pekerjaan organisasi dapat lumpuh.  Tetapi jika Anda hanya menginstal dua server dengan pengaturan yang sama, maka tidak ada yang lain selain konflik alamat IP yang mengarah ke ini. </p><br><p>  Tampaknya Anda dapat membagi area distribusi antara dua server, dan biarkan yang satu memberikan setengah dari alamat, dan yang lain memberikan yang lain.  Berikut ini hanya setengah dari infrastruktur yang lumpuh sedikit lebih baik dari keseluruhan. </p><br><p>  Kami akan menganalisis opsi yang lebih praktis. </p><br><p>  Pada sistem <strong>Windows Server</strong> mulai tahun 2012, sistem redundansi DHCP berfungsi di luar kotak, dalam mode load balancing (aktif-aktif) atau dalam mode toleransi kesalahan (aktif-pasif).  Penjelasan terperinci tentang teknologi dan pengaturan dapat ditemukan dalam <a href="">dokumentasi</a> resmi.  Saya perhatikan bahwa toleransi kesalahan dikonfigurasi pada level zona, sehingga zona yang berbeda dapat bekerja dalam mode yang berbeda. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ced/b26/26d/cedb2626dd463700eed59152438a6a60.jpg"></p><br><p>  <em>Mengkonfigurasi DHCP Server Failover di Windows.</em> </p><br><p>  <strong>DHCP Server ISC</strong> menggunakan arahan <strong><em>failover peer</em></strong> untuk mengkonfigurasi toleransi kesalahan, itu diusulkan untuk menyinkronkan data secara mandiri - misalnya, menggunakan rsync.  Baca selengkapnya di artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dua server DHCP di Centos7 ...</a> " </p><br><p>  Jika Anda membuat solusi toleran kesalahan berdasarkan MikroTik, maka Anda tidak dapat melakukannya tanpa trik.  Salah satu opsi untuk menyelesaikan masalah diumumkan di MUM RU 18, dan kemudian dipublikasikan di blog <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penulis</a> .  Singkatnya: dua server dikonfigurasikan, tetapi dengan parameter Ambang Batas yang berbeda (penundaan respons).  Kemudian server akan mengeluarkan alamat dengan penundaan lebih sedikit, dan dengan penundaan lebih lama - hanya ketika yang pertama gagal.  Sinkronisasi informasi lagi harus dilakukan dengan skrip. </p><br><p>  Secara pribadi, pada suatu waktu saya cukup menepuk saraf saya ketika router muncul di jaringan "tidak sengaja" dan terhubung ke jaringan area lokal baik antarmuka WAN dan LAN. </p><br><p>  <strong>Katakan, apakah Anda harus berurusan dengan kusta DHCP?</strong> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467333/">https://habr.com/ru/post/id467333/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467317/index.html">Bagaimana SoftBank menelan dunia</a></li>
<li><a href="../id467323/index.html">Gambaran Umum Fitur Qt Creator 4.10 dan QBS 1.14 Microcontroller Programming</a></li>
<li><a href="../id467327/index.html">Bagaimana saya menjadi seorang programmer pada usia 35</a></li>
<li><a href="../id467329/index.html">Produk terbaik mulai dari masalah nyata: Interkom tentang Pekerjaan yang akan Dilakukan. Bagian 1</a></li>
<li><a href="../id467331/index.html">Menjual + toko online cantik di WordPress seharga $ 269 "dari awal" - pengalaman kami</a></li>
<li><a href="../id467335/index.html">Inilah Cara Memperbarui Node.js Melalui Visual Studio, NPM, Windows / Mac</a></li>
<li><a href="../id467337/index.html">Game seluler paling populer: bagaimana "Snake" diciptakan untuk ponsel Nokia</a></li>
<li><a href="../id467339/index.html">Dan lagi, hari ke-256 tahun ini</a></li>
<li><a href="../id467343/index.html">Mengapa saya keluar dari freelance: tayangan pengembang backend setelah 2 tahun “kebebasan”</a></li>
<li><a href="../id467345/index.html">Hit blog IT dan pelatihan 4 lapis: wawancara dengan Sergei Abdulmanov dari Mosigra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>