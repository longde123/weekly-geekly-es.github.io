<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå¥ üë©üèΩ‚Äçüíº üåã Controlador de tarjeta gr√°fica: ¬øDe qui√©n es el error? üôçüèº üÜî üöú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un art√≠culo reciente impuls√≥ la preparaci√≥n de este material "Un error en el controlador de la tarjeta de video puede revelar lo que se vio en modo in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Controlador de tarjeta gr√°fica: ¬øDe qui√©n es el error?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/389039/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un art√≠culo reciente impuls√≥ la preparaci√≥n de este material "Un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">error en el controlador de la tarjeta de video puede revelar lo que se vio en modo inc√≥gnito"</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Este art√≠culo naci√≥ despu√©s de la publicaci√≥n de la forma trivial de mostrar una imagen que pertenece a cualquier proceso (incluido el finalizado), posiblemente incluso con reclamos para proteger la informaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como tambi√©n estoy involucrado en el desarrollo de controladores gr√°ficos, por casualidad, intentar√© explicar brevemente con qu√© est√° equivocado el autor del informe de error original, la responsabilidad del problema y c√≥mo se puede resolver.</font></font><br>
<br>
<a name="habracut"></a><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Independientemente del sistema operativo, sus API de sistema relacionadas y las interfaces de aplicaci√≥n para desarrollar aplicaciones gr√°ficas, un controlador de tarjeta de video arbitrario resuelve las siguientes tareas de todo el sistema:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicializaci√≥n del controlador de pantalla</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuraci√≥n del modo de video, gesti√≥n de puertos GPU, formaci√≥n de una / varias im√°genes independientes, ...</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gesti√≥n de memoria direccionable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">colas de comandos, direccionamiento lineal / en mosaico, asignaci√≥n de superficie, tablas de traducci√≥n de direcciones, extensi√≥n de apertura PCI, ...</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aceleraci√≥n 2D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cursor, capas de hardware, teclas alfa / croma, ROP, primitivas, ...</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aceleraci√≥n 3D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL, OpenGL ES / EGL, OpenVG / EGL, OpenCL, Open *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decodificaci√≥n de video / reproducci√≥n de audio / sustracci√≥n EDID / compresi√≥n de frame buffer, ...</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los enfoques para la soluci√≥n de las tareas aplicadas en cada etapa se han reducido durante mucho tiempo a las pr√°cticas establecidas. </font><font style="vertical-align: inherit;">Esto solo explica la reproducibilidad del problema indicado en dispositivos de varios fabricantes. </font><font style="vertical-align: inherit;">Mirando hacia el futuro, puedo decir que puede obtener un efecto similar en los controladores Intel. </font><font style="vertical-align: inherit;">El autor del informe de error determin√≥ con absoluta precisi√≥n dentro del marco de la soluci√≥n de qu√© problema surge el efecto: la gesti√≥n de memoria direccionable.</font></font><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gesti√≥n de la memoria</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La entidad principal que el controlador est√° operando en esta etapa es la superficie. Una superficie generalmente se llama una pieza continua de video o RAM utilizada por alguna aplicaci√≥n para formar una imagen. Para los controladores que no tienen su propia memoria, un recurso asignado desde la RAM puede ser direccionable a trav√©s de una tabla de traducci√≥n de direcciones (Tabla de traducci√≥n de gr√°ficos, GTT). De lo contrario, la imagen solo se puede mostrar al copiar la superficie en la memoria de video, ya sea por medio del controlador DMA, si lo hay, o debido a los recursos de la CPU.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, incluso los controladores con su propia memoria discreta en la mayor√≠a de los casos tambi√©n lo abordan a trav√©s de GTT, ya que de esta manera es posible crear un espacio de direcci√≥n virtual por analog√≠a con el procesador central TLB para proporcionar direccionamiento lineal o en mosaico. </font><font style="vertical-align: inherit;">El m√©todo de direccionamiento en cada caso determina el controlador y no existe una diferencia fundamental entre ellos en el marco de este art√≠culo.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de direccionamiento de mosaico en la memoria de video del art√≠culo fuente</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/185/25e/551/18525e551094433f950686a295500018.png" alt="imagen"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El controlador del controlador de gr√°ficos es la interfaz del sistema operativo para la funcionalidad de la GPU, nada m√°s. </font><font style="vertical-align: inherit;">Todas las tareas para garantizar la protecci√≥n de la informaci√≥n se asignan a cualquier nivel superior responsable de esto. </font><font style="vertical-align: inherit;">Para esto, los controladores tienen toda la funcionalidad disponible, habr√≠a un deseo de usarlo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, a solicitud de alg√∫n controlador de cliente, el sistema operativo reserva (asigna) un conjunto de superficies para ello. Dado que, seg√∫n el autor, la fragmentaci√≥n de la imagen es relativamente rara, podemos argumentar que el direccionamiento en mosaico no se usa con frecuencia en estos casos. Con el direccionamiento lineal, cada superficie se caracteriza principalmente por el desplazamiento desde el comienzo del espacio de direcciones virtuales de la memoria del controlador. Al asignar memoria, el controlador devuelve al sistema operativo exactamente este desplazamiento, que corresponde a un bloque de memoria libre que puede acomodar la superficie con las caracter√≠sticas solicitadas por el software de la aplicaci√≥n. En este caso, el controlador realiza solo las siguientes acciones: modifica GTT para un mayor uso de p√°ginas de memoria virtual, supervisa el cumplimiento de los requisitos para la alineaci√≥n de direcciones f√≠sicas,define el mecanismo de acceso del software de aplicaci√≥n a la superficie (apertura PCI / GPU, por direcci√≥n f√≠sica fuera de la apertura, extensi√≥n GTT sobre la marcha), reserva una parte de la memoria para sus propias necesidades.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con base en lo anterior, podemos concluir que, teniendo informaci√≥n sobre la cantidad total de memoria de controlador disponible y las caracter√≠sticas de superficie requeridas, la determinaci√≥n de desplazamiento para todos los controladores puede resolverse de manera uniforme. </font><font style="vertical-align: inherit;">En la pr√°ctica, este es el caso (guiado por la experiencia con varios sistemas operativos tipo UNIX): el sistema operativo proporciona un servicio / biblioteca del sistema que almacena una lista de bloques de memoria ya usados ‚Äã‚Äãy le permite calcular r√°pidamente el primer desplazamiento disponible para la copia de seguridad l√≥gica dentro de esta biblioteca. </font><font style="vertical-align: inherit;">Al mismo tiempo, al tener informaci√≥n del controlador sobre el mecanismo de acceso al bloque de memoria, el sistema operativo generalmente permite que el software de aplicaci√≥n se forme en las mismas direcciones f√≠sicas de superficies compartidas / que se cruzan.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si el controlador no controla expl√≠citamente las superficies, ¬øc√≥mo se implementa la aceleraci√≥n?</font></font></b><div class="spoiler_text">  .  -  , ,           ( ),        .<br>
<br>
     ( )   ,      ( ),         .<br>
</div></div><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Volviendo al problema original.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seguramente en este punto, muchos ya han adivinado a qu√© se reduce la cr√≠tica. </font><font style="vertical-align: inherit;">Al ejecutar varias aplicaciones, el sistema operativo solicita la superficie del controlador de video para sus necesidades y las reutiliza a medida que la memoria se libera (finalizaci√≥n del proceso). </font><font style="vertical-align: inherit;">Al mismo tiempo, el controlador no puede ser consciente de que algunos bloqueos de memoria requieren un reinicio inmediato, ya que tiene ciertos requisitos de seguridad y no tiene otros enlaces. </font><font style="vertical-align: inherit;">Poner a cero la memoria en s√≠ es una tarea trivial del hardware que llena un rect√°ngulo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, la prueba escrita para publicar el informe de error es redundante. </font><font style="vertical-align: inherit;">En el caso general (cuando la memoria de video se ajusta a una apertura PCI / GPU), no se requieren API de aplicaci√≥n para sistemas tipo UNIX. </font><font style="vertical-align: inherit;">Es suficiente contactar / dev / mem usando el desplazamiento conocido de la salida de la utilidad "lspci".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para los controladores Intel, la situaci√≥n es diferente, pero no mucho. </font><font style="vertical-align: inherit;">Como el controlador no tiene su propia memoria, GTT se forma sobre la marcha con la asignaci√≥n de memoria desde la RAM. </font><font style="vertical-align: inherit;">Al reasignar la superficie, es posible que no tenga suerte con la ubicaci√≥n real del bloque RAM, dado que en este caso el mecanismo de direccionamiento virtual del sistema operativo ya juega un papel decisivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay varias soluciones, y creo que las conclusiones ser√°n obvias:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todos los fabricantes de controladores deben implementar una funcionalidad redundante para almacenar informaci√≥n sobre superficies existentes (la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuesti√≥n de controlar las superficies compartidas permanece abierta</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El sistema operativo debe monitorear la necesidad de que esta o aquella aplicaci√≥n se ordene ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esto es una cierta marca de las superficies protegidas o una puesta a cero excesiva de cualquier superficie tanto en la RAM como en la memoria de video</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El software de la aplicaci√≥n debe limpiarse correctamente despu√©s de s√≠ mismo, ya que afirma estar involucrado en la seguridad de la informaci√≥n.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que la nota haya sido interesante.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es389039/">https://habr.com/ru/post/es389039/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es389025/index.html">Expansor de puerto USB compacto para cargar</a></li>
<li><a href="../es389029/index.html">RealSense para Dummies. Pruebas caseras</a></li>
<li><a href="../es389031/index.html">Ford ense√±a autos no tripulados para conducir en la nieve</a></li>
<li><a href="../es389033/index.html">John Chen confirma que las actualizaciones de BlackBerry se lanzar√°n en 2016</a></li>
<li><a href="../es389035/index.html">Esc√°ner de libros de bricolaje</a></li>
<li><a href="../es389041/index.html">Everykey: la clave universal para tus gadgets</a></li>
<li><a href="../es389043/index.html">Storage Media Evolution Parte 4: Unidades de estado s√≥lido</a></li>
<li><a href="../es389045/index.html">Elon Musk no teme al autom√≥vil el√©ctrico de Apple: la rivalidad ser√° √∫til para la industria</a></li>
<li><a href="../es389049/index.html">Configure el control IR del aire acondicionado desde dispositivos o "Prepare el carrito en verano"</a></li>
<li><a href="../es389051/index.html">CNET Smart Home: campo de prueba de gadgets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>