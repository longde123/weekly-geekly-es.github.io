<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👁️ 🧛🏼 💀 Mengukur Kinerja Qt 🕵🏻 🌻 ↘️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya memutuskan untuk melanjutkan serangkaian artikel tentang Aurora OS (sampai saat ini disebut Sailfish). Selama saya bekerja dengan OS ini, saya te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mengukur Kinerja Qt</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digdes/blog/457622/">  Saya memutuskan untuk melanjutkan serangkaian artikel tentang Aurora OS (sampai saat ini disebut Sailfish).  Selama saya bekerja dengan OS ini, saya telah mengumpulkan berbagai pengamatan yang berhubungan dengan kinerja aplikasi pada Qt dan sistem secara keseluruhan, karena digantung dengan berbagai perangkat, seperti pohon Natal, saya perhatikan semua hal kecil saat startup.  Saya pikir ini bisa menarik dan bermanfaat bagi kolega yang juga bekerja dengan Qt (atau akan segera bekerja).  Sarankan agar Anda dapat menguji lebih banyak. <br><br><img src="https://habrastorage.org/webt/rw/uu/ze/rwuuzedwibb0ocithqms-janr-u.jpeg"><br><a name="habracut"></a><br>  Saya memprogram di Qt dan sering berdiskusi dengan kolega, pengembang iOS, persamaan, perbedaan, dan manfaat dari pendekatan.  Pada titik tertentu, kami masih memutuskan untuk beralih dari kata-kata ke perbuatan dan melakukan pengukuran.  Kami tidak menemukan programmer Android yang siap berpartisipasi dalam hiburan kami, jadi perbandingan dengan partisipasi angka dan tabel hanya untuk Swift dan C ++. <br><br>  Saya ingin mengingatkan Anda bahwa Qt / C ++ tidak memaksakan mekanisme manajemen memorinya, dan pengguna sendiri memecahkan masalah ini dalam kerangka kemampuan yang tersedia di C ++, sementara Swift menggunakan penghitungan referensi, dan di Jawa menggunakan pengumpul sampah.  Dengan demikian, programmer memiliki kesempatan untuk berinteraksi dengan memori secara lebih efisien.  Untuk mengirim permintaan http atau membaca data dari database, Qt mengandalkan kekuatannya sendiri, dan tidak menggunakan kerangka kerja siap pakai yang disediakan oleh OS.  Pengecualian - interaksi dengan keyboard, menggambar jendela mulai aplikasi, menampilkan pemberitahuan dan hal-hal lain. <br><br><h2>  Tes 1 </h2><br>  Pertama-tama, kami memutuskan untuk menulis algoritma sederhana (ayakan Eratosthenes), menjalankannya dalam jumlah besar dan membandingkan waktu perhitungan.  Diluncurkan pada iPhone 7. <br><br>  <b>Program cepat:</b> <br><br><pre><code class="swift hljs">swift <span class="hljs-comment"><span class="hljs-comment">// // ViewController.swift // Eratosthenes // // Created by Dmitry Shadrin on 22/11/2018. // Copyright 2018 Digital Design. All rights reserved. // import UIKit class ViewController: UIViewController { @IBOutlet weak var digitTextField: UITextField! @IBOutlet weak var timeLabel: UILabel! @IBAction func startAction(_ sender: UIButton) { guard let text = digitTextField.text, let number = Int(text) else { return } prime(n: number) } func prime(n: Int) { let startTime = DispatchTime.now() let _ = PrimeSequence(upTo: n) .reduce(into: [], { $0.append($1) }) //      let endTime = DispatchTime.now() let time = (endTime.uptimeNanoseconds - startTime.uptimeNanoseconds) timeLabel.text = "\(time)" } } public struct PrimeSequence: Sequence { private let iterator: AnyIterator&lt;Int&gt; public init(upTo limit: Int) { self.iterator = AnyIterator(EratosthenesIterator(upTo: limit)) } public func makeIterator() -&gt; AnyIterator&lt;Int&gt; { return iterator } } private struct EratosthenesIterator: IteratorProtocol { let n: Int var composite: [Bool] var current = 2 init(upTo n: Int) { self.n = n self.composite = [Bool](repeating: false, count: n + 1) } mutating func next() -&gt; Int? { while current &lt;= self.n { if !composite[current] { let prime = current for multiple in stride(from: current * current, through: self.n, by: current) { composite[multiple] = true } current += 1 return prime } current += 1 } return nil } }</span></span></code> </pre> <br><br>  Saya tidak akan membahas kode secara rinci, Eratosthenes linier tidak jelas untuk dipahami, terutama jika salah satu bahasa tidak Anda kenal.  Berikut ini tautan dengan deskripsi: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://e-maxx.ru/algo/prime_sieve_linear</a> , yang tertarik, dapat memeriksa kejujurannya.  By the way, versi cepat ternyata sedikit lebih dioptimalkan dalam hal-hal kecil (Anda dapat mencarinya), yang tidak mencegah versi plus dari memenangkan kinerja. <br><br>  <b>Program qt:</b> <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"eratosthenes.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;time.h&gt; #include &lt;QVector&gt; #include &lt;QDebug&gt; #include &lt;vector&gt; #include &lt;cmath&gt; Eratosthenes::Eratosthenes(QObject *parent) { time = 0; } void Eratosthenes::qtFunction(int n) { clock_t start, end; start = clock(); std::vector&lt;int&gt; lp = std::vector&lt;int&gt;(n + 1, 0); std::vector&lt;int&gt; pr; //       pr.reserve(std::sqrt(n) / 2); for (int i = 2; i &lt;= n; ++i) { if (lp[i] == 0) { lp[i] = i; pr.emplace_back(i); } for (int j = 0; j &lt; pr.size() &amp;&amp; pr[j] &lt;= lp[i] &amp;&amp; i * pr[j] &lt;= n; ++j) { lp[i * pr[j]] = pr[j]; } } end = clock(); time = (end - start) / (double)CLOCKS_PER_SEC; pTimeChanged(); qDebug() &lt;&lt; "  " &lt;&lt; pr.size() &lt;&lt; "" &lt;&lt; time; }</span></span></span></span></code> </pre> <br>  Jalankan programnya.  Aplikasi memiliki bidang untuk memasukkan angka n, tombol mulai dan bidang dengan total waktu: <br><br><img src="https://habrastorage.org/webt/tf/q_/ck/tfq_ckywno1xmgpvylnfwwti12e.jpeg"><img src="https://habrastorage.org/webt/je/si/ta/jesita9gyvvdgv1nrtx-zcrhuu8.jpeg"><br>  <i>Swift - di sebelah kiri, Qt - di sebelah kanan.</i> <br><br>  <b>Hasil.</b>  Saya akan memberikan tabel pengukuran untuk n yang berbeda dan pada titik waktu yang berbeda: <br><img src="https://habrastorage.org/webt/w2/ck/cd/w2ckcddlg_p18aeq8lon2cagqpq.jpeg"><br>  Seperti yang Anda lihat, aplikasi C ++ ~ 1,5 kali lebih cepat daripada yang asli dengan algoritma yang identik. <br><br><h2>  Tes 2 </h2><br>  Secara alami, komputasi dalam konteks aplikasi mobile adalah hal yang penting, tetapi jauh dari itu.  Oleh karena itu, kami membuat ListView yang terdiri dari 1000 elemen, yang masing-masing berisi teks dan gambar, untuk melihat kecepatan rendering elemen grafis.  Di bawah, di video, Anda dapat melihat hasilnya: <br><br>  Qt: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/aC5tDt9xs7M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Cepat: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/7Lgp7waMvsw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Secara visual, perbedaannya tidak terlihat. <br><br><h2>  Tes 3 </h2><br>  Di Sailfish OS, kami memiliki kernel Linux dan shell asli grafis pada Qt, dan ini dengan sendirinya menunjukkan pemikiran tentang kinerja yang baik dari OS ini.  Saya sering memperhatikan bahwa Inoi R7 menang dalam hal kecepatan beberapa tugas, meskipun Samsung Galaxy S8 melakukan hal yang sama.  Jadi, misalnya, Samsung Galaxy S8 mengirim, menerima, memproses, mengemas ke dalam basis data, dll.  Permintaan 10K http dalam waktu sekitar 3-4 menit, dan Inoi R7 melakukan hal yang sama selama 5-6 menit.  Mengingat perbedaan dalam kinerja besi, hasilnya sangat mengesankan. <br><br>  Untuk pengujian kinerja OS yang lebih jujur, saya memutuskan untuk melihat kecepatan respons gerobak. <br><br><h4>  Test.cpp: </h4><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"mypainter.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;QPainter&gt; MyPainter::MyPainter(QQuickItem *parent) : QQuickPaintedItem(parent) { } void MyPainter::paint(QPainter *painter) { QPen pen; pen.setWidth(10); pen.setColor(Qt::red); painter-&gt;setPen(pen); painter-&gt;drawPolyline(pol); } void MyPainter::xyCanged(int x, int y) { pol.append(QPoint(x, y)); update(); }</span></span></span></span></code> </pre><br><h4>  Test.qml: </h4><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.9</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Window <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Painter <span class="hljs-number"><span class="hljs-number">1.0</span></span> Window { visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> Painter { id: painter anchors.fill: parent MouseArea { anchors.fill: parent onPressed: { painter.xyCanged(mouseX, mouseY) } onMouseXChanged: { painter.xyCanged(mouseX, mouseY) } onMouseYChanged: { painter.xyCanged(mouseX, mouseY) } } } }</code> </pre><br>  Sederhana dan bersahaja.  Saya tidak memiliki telepon yang mendukung Sailfish dan Android untuk penggunaan pribadi, jadi saya harus melihat rekan kerja saya untuk telepon yang sedekat mungkin dengan Inoi r7, tetapi di Android.  Yang tiba-tiba menjadi sangat sulit, mengingat saya sedang duduk di kantor pengembangan ponsel. <br><br>  <i><b>Sony Xperia Z5 compact:</b></i> <i><br></i>  <i>Prosesor - Qualcomm Snapdragon 810 MSM8994, 2000 MHz</i> <i><br></i>  <i>Jumlah inti prosesor - 8</i> <i><br></i>  <i>Pemroses Video - Adreno 430</i> <i><br></i>  <i>Jumlah memori internal - 32 GB</i> <i><br></i>  <i>Jumlah RAM - 2 GB</i> <br><br>  <i><b>Inoi R7:</b></i> <i><br></i>  <i>Prosesor - Qualcomm Snapdragon 212 MSM8909AA, 1200 MHz</i> <i><br></i>  <i>Jumlah inti prosesor - 4</i> <i><br></i>  <i>Pemroses Video - Adreno 304</i> <i><br></i>  <i>Jumlah memori internal - 16 GB</i> <i><br></i>  <i>Jumlah RAM - 2 GB</i> <br><br>  Meskipun demikian Sony ternyata lebih kuat, tetapi untuk persamaan peluang kami mengaktifkan mode hemat daya di atasnya, semua itu tidak akan menyebabkan kesetaraan penuh kekuatan perangkat.  Pada video Anda dapat melihat bahwa di Android salurannya tidak semulus di Sailfish. <br><br>  Kiri - Sony, kanan - Inoi: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/bmYRRemNb5M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Saya tidak berpendapat, ini bukan indikator yang sangat serius, Anda perlu membandingkan tidak hanya kemampuan bahasa murni, tetapi juga perpustakaan yang berbeda, asli dan lintas platform, untuk membandingkan kinerja dan kemudahan penggunaan, karena ada sangat sedikit aplikasi yang hanya menggunakan ListView dan saringan Eratosthenes.  Meskipun semua hal-hal kecil ini bersama-sama terlihat sangat meyakinkan bagi saya. <br><br><h4>  Cons </h4><br>  Tentu saja, semuanya tidak begitu cerah dengan Qt, ketika saya mencoba melukis di sini, ada kontra.  Misalnya, bekerja dengan TextInput di Android, Anda dapat menyiksa perfeksionis yang sangat sensitif terhadap kruk, karena pada setiap perangkat Qt berhasil menempatkan tongkat yang benar-benar unik di roda ketika berinteraksi dengan keyboard.  Di satu ponsel, gambar naik, di lain berdiri, tetapi EnterKey tidak berfungsi, di ketiga, hanya huruf besar yang selalu dimasukkan, dan tidak ada cara untuk meyakinkannya untuk beralih ke huruf kecil.  Anda dapat menggunakan ad infinitum.  Dan semua ini juga melambat!  (Grunts hanya relevan untuk Android, tidak ada masalah pada Sailfish, semuanya berfungsi dengan baik).  Selain itu, pada Qt sulit untuk mencapai tampilan asli aplikasi. <br><br><h3>  Kesimpulan </h3><br>  Kesimpulan utama yang dapat ditarik: Qt, sebagai alat lintas platform, tidak kalah dalam kinerjanya dengan alat pengembangan asli.  Ini sempurna untuk program-program di mana, selain GUI, masih ada banyak matematika, dan terutama untuk aplikasi perusahaan, di mana ada banyak nuansa dan beberapa karyawan, sehingga tidak membuat versi independen untuk setiap OS.  Fungsi lebih penting bagi pengguna korporat daripada UI asli.  Untuk Aurora, Qt adalah alat asli untuk pengembangan aplikasi, yang mungkin memberikan beberapa peningkatan kinerja lainnya. <br><br>  Akan menarik untuk menguji Aurora pada perangkat keras yang kuat seperti Galaxy S8 saya. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id457622/">https://habr.com/ru/post/id457622/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id457610/index.html">Analisis kerentanan Parcel Jahat</a></li>
<li><a href="../id457612/index.html">Bagaimana cara mempercepat dekompresi LZ4 di ClickHouse?</a></li>
<li><a href="../id457614/index.html">Rahasia mencari pekerjaan di luar negeri dari seorang headhunter yang berpraktik</a></li>
<li><a href="../id457616/index.html">"Wow, aku tidak tahu itu!" saat-saat dengan bercanda</a></li>
<li><a href="../id457618/index.html">Menjadi pengembang penuh tumpukan modern</a></li>
<li><a href="../id457624/index.html">Bagaimana kami memecahkan pondok tua itu dan membangun gedung pencakar langit di tempatnya</a></li>
<li><a href="../id457626/index.html">Revisi tingkat akses pengguna menggunakan Power BI menggunakan contoh Bitrix CMS (BUS)</a></li>
<li><a href="../id457628/index.html">Program P2M dan manajemen proyek yang efektif</a></li>
<li><a href="../id457630/index.html">Pengalaman mengembangkan persyaratan untuk ilmuwan data kualitas profesional</a></li>
<li><a href="../id457632/index.html">Berapa tes unit?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>