<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💠 🤛🏿 🐏 大自然的秘诀-多云的夜灯 🕵🏻 🧛🏾 💃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="您好，社区！ 

 我以云的形式介绍我自己的夜灯实现。 主要思想是通过模拟自然过程和某种交互性来制作夜灯。 大自然是最好的启发！ 

 基于便宜的微控制器ATmega8-16PU。 该代码是用C语言编写的，没有Arduino，并通过空间的一般照明和声音控制实现了多种照明效果。 

 详细信息和图片-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>大自然的秘诀-多云的夜灯</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428988/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/66/st/mr66stql1kimlmtxmkt2ycjyfue.jpeg" alt="图片" width="75%"></div><br><br> 您好，社区！ <br><br> 我以云的形式介绍我自己的夜灯实现。 主要思想是通过模拟自然过程和某种交互性来制作夜灯。 大自然是最好的启发！ <br><br> 基于便宜的微控制器ATmega8-16PU。 该代码是用C语言编写的，没有Arduino，并通过空间的一般照明和声音控制实现了多种照明效果。 <br><br> 详细信息和图片-更多... <br><a name="habracut"></a><br><h3> 电子详细资料 </h3><br> 除微控制器外，该电路还具有6个单色LED，一个RGB LED，一个光传感器（光敏电阻）以及一个带放大器和RF滤波器的麦克风。 <br><br> 为了平稳地改变LED的亮度，使用了<abbr title="脉宽调制">PWM</abbr> 。  PWM频率在64级时为244 Hz，碰巧有人看到了。 无法提高频率-您仍然需要处理器时间才能工作。 因此，为了使PWM脉冲平滑，使用了具有平滑电容器的晶体管中继器电路。 晶体管采用大增益，以增加输入电阻并减小所需的电容。 结果，1微法拉就足够了，脉冲几乎完全被平滑了。 好处比DAC便宜，并且具有大输出电流。 该方案的缺点是在低电平（最高15％）时亮度与PWM电平的非线性关系。 <br><br><div class="spoiler">  <b class="spoiler_title">Micro-Cap 9电路</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/9h/jx/m-/9hjxm-paag2rkjz7osorqlr_8ke.png" alt="图片"><br>  <i>PWM平滑方案。</i>  <i>根据I-V特性，大约有4个二极管= 1个白光LED</i> <br><br><img src="https://habrastorage.org/webt/af/6f/g4/af6fg4lbpq8fxaenzaepivxw-ps.png" alt="图片"><br>  <i>在56％PWM时LED上的电流和电压的图表。</i> <br></div></div><br> 微型驻极体麦克风通过两个带有脉冲提取（高通滤波器）的晶体管上的放大器连接到MK的离散输入，可以自信地捕获尖锐的声音-拍手。 <br><br> 他在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">DipTrace中</a>绘制并传播了木板，使其成为LUT，细节主要是smd。 蚀刻是在“氯化铁杀手”中完成的：过氧化氢+盐+柠檬酸，事实证明这是第一次，我推荐这样做。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">所有业余方式都写在这里。</a> <br><br><img src="https://habrastorage.org/webt/6g/m-/05/6gm-05vizzaj1ew1l63b-b6kh5o.jpeg" alt="图片"><br>  <i>LUT支​​付的费用</i> <br><br> 我通过USB连接器供电，该连接器允许您连接到任何USB端口。 最大消耗78 mA。 <br><br> 在以前的版本中，电缆上有一个用于设置模式的微型按钮，但是后来删除了，因为如果云层在天花板下，则无法到达。 <br><br> 没有USB连接，MK没有USB，看来成品中不需要它。 为了进行调试，我使用了UART控制器，该代码实现了与计算机的交换，但是<s>膝盖上写着</s>老套。 <br><br><img src="https://habrastorage.org/webt/7u/fy/h5/7ufyh5cpydbcvzj50ojtwibyeik.jpeg" width="75%"><br>  <i>在焊接过程中</i> <br><br>  LUT，焊接，编写程序，测试和变更，装配计时器和系数用了3个星期。 <br><br><img src="https://habrastorage.org/webt/zk/t8/g9/zkt8g9wjyn7ujuyihfg32mn-bc0.jpeg" alt="图片"><br>  <i>一般视图</i> <br><br> 结果，他实现了3种发光和照明效果模式。 我试图使它比熔岩灯更有趣，但也没有成为带有拳头口哨的迪斯科彩色音乐。 <br><br><h3> 模式： </h3><br>  <b>主要的</b>是云形式的夜灯。 云的不同部分会随机更改亮度，更改的时间段也是随机的（4 ... 25秒），更改的类型是任务的指数平滑（我可以在评论中告诉您更多）。 它具有整体的想象力，就像是覆盖了太阳的真实云层中的光溢出一样。 最大亮度级别取决于时间表中的照明级别。 我选择了不同的依赖项，在按钮上有一个可以选择依赖项的选项，但仅解决了这一点。 <br><br><img src="https://habrastorage.org/webt/hw/hp/xo/hwhpxotfo5gyf9njb_64kkvdtps.png" alt="图片"><br>  <i>外部光照对云的亮度的依赖性图。</i> <br><br> 由于云在外部黑暗（夜晚）中几乎不发光，并且可能需要短期明亮的光线（例如，在晚上起床），为此，我提出了“明亮云”子模式。 由于按钮通常无法触及，因此他在这里拍了两个掌声并使用了麦克风。 云层会以全亮度发光一分钟，同时也会溢出，然后根据光照平稳地返回到主云层模式。 <br><br><img src="https://habrastorage.org/webt/cg/ha/dx/cghadxfnhu9zgmk0x-u3rx9xsp8.gif" alt="图片"><br>  <i>云模式，第一个样本。</i>  <i>视频加速了5倍</i> <br><br>  <b>雷暴</b> -在环境光线急剧下降（但要等到完全黑暗，以免在黑暗中不会击中眼睛）时打开或三声爆裂。 随机的LED闪烁（从1到4倍），闪烁之间有随机的停顿。 当LED沿时间链闪烁时，我有些困惑，在云层中“闪电般奔跑”。 看起来也很像雷暴。 由于有雷暴天气，必须找到PWM滤波折衷方案，以使闪烁更清晰（77毫秒）。  “雷暴”的持续时间取决于环境光-从4到12次闪烁越暗，时间越长。 <br><br>  <b>黎明</b> -随着环境光线的急剧增加而开启。 设置最困难的模式是“在黎明时被薄雾蒙蒙地自然改变太阳的颜色”并不容易。 必须在几乎每个PWM级别上手动平衡RGB LED并选择相关性。 但是最后，我收到了一个或多或少的插值公式。 黎明持续40秒，然后切换到普通模式。 <br><br><img src="https://habrastorage.org/webt/c_/fl/6b/c_fl6baslbfbbxsagw5bpnou39c.jpeg" alt="图片" width="75%"><br>  <i>天亮</i> <br><br> 有兴趣的电子产品和软件： <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">存档与源</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">pdf格式</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">电路板布局，一侧</a> <br><br><h3> 建设性的 </h3><br> 云的设计非常简单，我是由sintepuha（一个40x40厘米的枕头）制成的，板子位于内部的线程悬挂上。  LED的体积应尽可能均匀地排列，RGB LED位于底部，光电传感器位于顶部。 <br><br><img src="https://habrastorage.org/webt/n8/yf/qm/n8yfqmg3dbmhm9oqpelqvnt4xxa.jpeg" width="75%"><br>  <i>在起毛过程中</i> <br><br> 由于合成纤维表面涂有硅酮以防止结块，因此难以固定。 云的下部由线框上的窄条胶带支撑。 <br><br> 问题，评论，建议写在评论中。 <br><br> 天气好！ <br><br><img src="https://habrastorage.org/webt/k2/jp/ia/k2jpiamrczanxcsod6-l-rh-nmi.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428988/">https://habr.com/ru/post/zh-CN428988/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428976/index.html">蚂蚁山还是堡垒？ 我要以公寓价格建造房屋。 第2部分：加热</a></li>
<li><a href="../zh-CN428980/index.html">离线JavaScript代理</a></li>
<li><a href="../zh-CN428982/index.html">如何在ARM上编写D</a></li>
<li><a href="../zh-CN428984/index.html">朱莉娅和动力系统的相像</a></li>
<li><a href="../zh-CN428986/index.html">在哈尔科夫举行的ThinkJava Conference＃8</a></li>
<li><a href="../zh-CN428990/index.html">使用RouteComposer的UIViewControllers的配置示例</a></li>
<li><a href="../zh-CN428992/index.html">带有Padavan和Keenetic OS固件的路由器上的锁选择锁</a></li>
<li><a href="../zh-CN428994/index.html">使用Corutin和翻新版在Android中联网</a></li>
<li><a href="../zh-CN428996/index.html">Habrahabr上的匿名圣诞老人俱乐部2018-2019</a></li>
<li><a href="../zh-CN428998/index.html">如何在React中使用实验性Profiler的新功能</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>