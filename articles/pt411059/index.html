<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≥üèæ ü§æüèº üÖ∞Ô∏è Como se tornar um m√°gico (parte 2). Bastidores t√©cnicos üî¥ üë≤üèª ‚ÜïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Geektimes, ol√°! Como prometido, esta √© uma continua√ß√£o do √∫ltimo artigo sobre o nosso pequeno mundo de magia. Hoje vou falar sobre os bastidores das m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como se tornar um m√°gico (parte 2). Bastidores t√©cnicos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/411059/"><p>  Geektimes, ol√°!  Como prometido, esta √© uma continua√ß√£o do √∫ltimo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> sobre o nosso pequeno mundo de magia.  Hoje vou falar sobre os bastidores das miss√µes m√°gicas, que decis√µes foram tomadas e como chegamos √† conclus√£o de que a miss√£o tem exatamente esse cen√°rio e apar√™ncia. </p><br><p>  Porque  At√© que a miss√£o fosse constru√≠da, eu gostava de eletr√¥nicos, em particular a programa√ß√£o de microcontroladores AVR em C, foi decidido tentar maximizar esse potencial, o que tornaria poss√≠vel adicionar o m√°ximo de interatividade, interesse e emo√ß√£o √† miss√£o!  Al√©m disso, eu realmente n√£o queria fazer com que a miss√£o se parecesse com dezenas de outras (trabalhando naquela √©poca em nossa cidade). </p><br><p>  Enquanto pensamos no novo cen√°rio, decidimos claramente que n√£o ter√≠amos bloqueios, chaves ou tarefas padr√£o, em geral, ligar os eletr√¥nicos ao m√°ximo de nossas capacidades! </p><br><p>  Vamos dar uma olhada mais de perto na parte t√©cnica e agora vou lhe mostrar como tornar a eletr√¥nica o mais <s>coletiva</s> poss√≠vel. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/dn/vy/th/dnvythtcndsal3tgxf_ia1s_yxk.jpeg"></a> </p><a name="habracut"></a><br><h2>  Revis√£o geral </h2><br><p>  Omitiremos a implementa√ß√£o inicial da miss√£o (talvez falemos sobre isso mais tarde), e nos concentraremos no momento da conclus√£o (ap√≥s o qual a miss√£o ter√° a forma final). </p><br><p>  Depois de discutirmos nossa nova vis√£o da miss√£o, percebi que o poder de um microcontrolador j√° √© pequeno e voc√™ precisa conectar um computador, combinando todos os dispositivos em um √∫nico sistema.  Para entender a integridade da imagem, um diagrama de todos os dispositivos e suas intera√ß√µes foi compilado: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wh/ef/vm/whefvmw6i3ss9jkjumnxju_veiw.jpeg" width="550"></div><br><p>  No diagrama, voc√™ pode pensar que o computador √© o principal, mas isso n√£o √© inteiramente verdade, ele assumir√° o papel de gerenciar e reproduzir trilhas de √°udio que, como voc√™ j√° notou no artigo anterior, temos muito. </p><br><p>  O microcontrolador Atmega16 se tornou o cora√ß√£o de todo o sistema (o √∫nico crit√©rio de sele√ß√£o era um n√∫mero suficiente de GPIOs), que se comunica com o programa em um computador via UART.  Todos os outros dispositivos s√£o fabricados no microcontrolador Atmega8 (√© excelente em termos de n√∫mero de GPIOs e tem um pre√ßo acess√≠vel). </p><br><p>  A maioria das placas √© soldada nas t√°buas de p√£o frente e verso mais legais, respectivamente, todos os detalhes nos gabinetes DIP.  Algumas placas permaneceram desde o in√≠cio da miss√£o. </p><br><div class="spoiler">  <b class="spoiler_title">Programa para computador</b> <div class="spoiler_text"><p>  A janela principal do programa: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jy/ym/8o/jyym8oqes1h3jybzjf1x-ipqloo.jpeg" width="500"></div><br><p>  Janela expandida para situa√ß√µes de emerg√™ncia: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lp/gz/is/lpgzisvnnrzbjmd544mjapcd-eg.jpeg" width="500"></div><br><p>  Janela de erro: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zc/_y/x-/zc_yx-mgwz-s08u-leuj7zh5oso.jpeg" width="500"></div></div></div><br><p>  A placa principal recebe apenas (!) Sinais discretos de outros dispositivos (atrav√©s dos acopladores √≥pticos que podem ser vistos na foto), se comunica com o computador, controla o LED no recipiente de mem√≥ria. </p><br><div class="spoiler">  <b class="spoiler_title">Foto do quadro</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/tw/uy/ax/twuyaxztwv4q95ghdpey2fjojfo.jpeg" width="300"><img src="https://habrastorage.org/webt/l_/6e/jz/l_6ejzxjegptdieidedh4w3lq_g.jpeg" width="300"></p></div></div><br><p>  <strong>Canh√£o M√°gico Prim√°rio: Varinha</strong> </p><br><p>  Uma varinha m√°gica √© um pouco m√°gica, um √≠m√£ de neod√≠mio √© incorporado em sua ponta.  Ele fez dela um bom av√¥-virador para madeira por apenas US $ 2.  O principal problema era enfiar um √≠m√£ de di√¢metro m√°ximo, mantendo a ponta o mais fina poss√≠vel. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ou/pu/t5/ouput5svy1t_kylawmvy4z-psf8.jpeg" height="100"></div><br><p>  Agora vamos dar uma olhada em cada dispositivo. </p><br><p>  <strong>Ramo vermelho</strong> </p><br><p>  <em>O livro</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jg/wm/5n/jgwm5nqowqi-snfpqeea6qygdbs.jpeg" width="500"></div><br><p>  O evento de √°udio do livro √© acionado pelo trailer, montado em uma prateleira.  Ele √© inicialmente fechado e, para abri-lo, voc√™ precisa trazer uma varinha com um √≠m√£.  O livro √© como um mini-cofre: possui baterias (Li-ion 3S), uma chave reed e uma chave de transistor que controla a trava eletromec√¢nica (para n√£o deixar toda a corrente passar pela chave reed. Ao mesmo tempo, voc√™ pode ver um brilho bonito dentro da chave reed, mas n√£o vai durar muito e a probabilidade de "manter" os contatos).  Tudo √© simples aqui - a varinha √© acionada, a chave reed passa a corrente, o transistor est√° aberto e o trinco √© retra√≠do.  A parte interna do dedo do p√© segura fica assim: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4p/a3/cs/4pa3csv5uafgtxobfj8ufadhdi8.jpeg" width="500"></div><br><p>  E a vis√£o final: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cv/3n/vq/cv3nvqxj-m6f1ciowre3bxc3vjk.jpeg" width="500"></div><br><p>  <em>Dobby</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gh/ra/7q/ghra7qobwrgesiu4rcqtj9mtxay.jpeg" width="500"></div><br><p>  Porque  a tarefa era reagir de maneira mais interativa para levar a meia para Dobby, a escolha recaiu sobre a tecnologia RFID.  Para fazer isso, tive que costurar um pequeno chaveiro na minha meia (como de um interfone na entrada) e colocar na meia o mesmo sinal que o de Dobby na palma da m√£o.  Por tr√°s da foto de Dobby est√° o m√≥dulo RFID. </p><br><p>  O dispositivo √© baseado no microcontrolador Atmega8 e no popular m√≥dulo RF5 RC522.  Depois de trazer a meia (um raio de resposta de at√© 4 cm √© perfeito), o transistor de efeito de campo abre a trava eletromagn√©tica na caixa e, com a ajuda de uma mola, a tampa √© levantada, um sinal √© enviado para a placa principal e uma luz vermelha acende na tigela de mem√≥ria. </p><br><div class="spoiler">  <b class="spoiler_title">Taxa</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jq/ql/_7/jqql_7jfi3w6lis3u58ylar3mwi.png" width="450"></div></div></div><br><p>  <strong>Ramo azul</strong> </p><br><p>  <em>Lareira</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6w/b0/ej/6wb0ejy-xmt10rrvvknd2emkp_8.jpeg" height="450"></div><br><p>  A lareira √© naturalmente falsa.  Feito de perfil e drywall colado com telhas de tijolo. </p><br><p>  Eletr√¥nica montada no Atmega8.  Um trailer √© montado em cada tijolo e uma faixa de LED azul √© conectada.  Os tijolos ficam em um lado das cortinas e, por outro, √© feito um guia primitivo com mola de retorno.  Quando voc√™ clica em um tijolo pela primeira vez, todos os bot√µes (existem 7 deles) ficam iluminados por 100ms e os olhos s√£o removidos da imagem usando um motor de passo, o sinal vai para a placa principal, a mem√≥ria acende e a luz azul no coletor de mem√≥ria. </p><br><p>  O motor de passo e a faixa de LED s√£o controlados usando o conjunto do transistor Darlington ULN2003 (para os curiosos, a parte te√≥rica pode ser lida <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ). </p><br><p>  Agora, cada clique em qualquer tijolo inverte seu estado (um clique, o pr√≥ximo - desligado e assim por diante), na primeira vez em que voc√™ clica em qualquer tijolo, o sensor infravermelho fica oculto na imagem: o LED IR est√° aceso, a radia√ß√£o est√° batendo longe do jogador que est√° se aproximando e √© a um transistor IR que usando <del>  fazenda coletiva </del>  ajustes exatos por resistores emitem um sinal discreto 0 ou 1 na sa√≠da. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j7/vo/vs/j7vovsqzvpecwnnta4ryuuicqzo.jpeg" width="500"></div><br><p>  H√° tamb√©m uma solu√ß√£o contra ilumina√ß√£o esp√∫ria (especialmente verdadeira se os usu√°rios come√ßarem a acender uma l√¢mpada na lareira), mais uma (mascarada) √© inclu√≠da no circuito aberto do transistor IR principal, que, quando exposto √† luz, simplesmente desliga a rea√ß√£o do microcontrolador. </p><br><p>  Assim que o sensor de infravermelho √© acionado, o microcontrolador tamb√©m liga o piscar da combina√ß√£o desejada que precisa ser pressionada (destaque) e, a prop√≥sito, a sequ√™ncia de prensagem tamb√©m desempenha um papel.  Piscar a combina√ß√£o desejada desativa todos os tijolos previamente pressionados. </p><br><p>  Quando a combina√ß√£o correta foi pressionada, a imagem √© aberta com a ajuda de uma trava eletromec√¢nica maior que nos caix√µes.  Para fazer isso, eu at√© precisei colocar um transformador bastante grande apenas nessa trava. </p><br><p>  (Em geral, essas travas s√£o muito fracas, embora consumam muita corrente no pico. Voc√™ precisa ter muito cuidado com o controle delas, se der corrente por mais de 5 segundos, pode simplesmente queimar, foi assim que queimei uma trava) </p><br><div class="spoiler">  <b class="spoiler_title">Acesso a n√≥s t√©cnicos e placa</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3f/3w/d_/3f3wd_pzwkiwc0akv-9gke8ycoy.jpeg" height="450"></div><br><p><img src="https://habrastorage.org/webt/19/y2/z1/19y2z1m4vdnzoakm9r3uurh638u.jpeg" width="350"><img src="https://habrastorage.org/webt/uf/xn/wv/ufxnwv1yklo_njv1hi_q6tf7doy.jpeg" width="350"></p></div></div><br><p>  <strong>Ramo verde</strong> </p><br><p>  <em>Caix√£o</em> </p><br><p>  Na mesa, h√° um pote discreto no trailer; se voc√™ o levantar, a luz verde no caldeir√£o acende e o caix√£o se abre, onde h√° uma dica para a porta. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/bp/g3/dgbpg30xa87pu3vkc8hsuyk_muo.jpeg" width="550"></div><br><p>  (Este √© o mesmo pote necess√°rio para o ovo da P√°scoa com as piadas de Dobby, descritas no primeiro artigo) </p><br><p>  <em>A porta</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yj/s4/n1/yjs4n1lzj_ouxjypnurgsiu_vsm.jpeg" width="350"></div><br><p>  Quando voc√™ pressiona a al√ßa totalmente para cima e para baixo (para isso, voc√™ deve colocar 2 interruptores na parte de tr√°s da porta para responder a pressionar completamente a al√ßa), o olho da cobra na porta come√ßa a piscar. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ki/gs/yq/kigsyq4bpjrb41m3wkeacow0liw.jpeg" width="300"></div><br><p>  O algoritmo de abertura de porta correto pode ser entendido a partir do prompt: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jw/rt/nv/jwrtnvq9y7fhpzfylrovjdse5xw.jpeg" height="400"></div><br><div class="spoiler">  <b class="spoiler_title">Mais tarde, descobriu-se que essa dica √© bastante complicada para os jogadores.</b>  <b class="spoiler_title">Posteriormente, foi substitu√≠do por um mais compreens√≠vel</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/hl/sr/v8/hlsrv8spyrijvnve2rz6fjmqfyi.jpeg" width="500"></div></div></div><br><p>  Durante as pausas (5s), o microcontrolador simplesmente fica atrasado e, durante a press√£o, a vari√°vel √© incrementada.  Portanto, se voc√™ pressionar a al√ßa por um longo tempo e com for√ßa, ela abrir√° de qualquer maneira, a prop√≥sito, algumas pessoas abriram a porta dessa maneira, sem entender como o fizeram.  Para n√£o fazer uma nova placa com um microcontrolador separado para essa tarefa simples, v√°rios pinos livres foram encontrados na placa do labirinto e tudo estava conectado l√°. </p><br><p>  <em>Espelho no peito</em> </p><br><p>  Na tampa do ba√∫ s√£o aplicados 10 s√≠mbolos m√°gicos, e dentro da palheta s√£o colados sob eles. <br>  O usu√°rio precisa trazer a varinha para os 3 caracteres corretos (a sequ√™ncia n√£o importa. A foto est√° marcada com marcas de verifica√ß√£o), no entanto, outras figuras tamb√©m possuem interruptores de palheta, segurando a varinha na qual cancela os cliques anteriores, mesmo que eles estivessem corretos (para que fosse imposs√≠vel abrir o ba√∫ segurando a varinha para todos os caracteres em uma linha).  Com a escolha certa de s√≠mbolos, o eletro√≠m√£ no ba√∫ se abre (os Atmega8 e ULN2003 favoritos est√£o no ba√∫).  Nesse est√°gio, um sinal √© enviado ao quadro de discagem do labirinto (uma unidade comum do pino de um MK para o pino de outro atrav√©s de uma chave do transistor) e os giros come√ßam a girar no labirinto. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y4/mg/va/y4mgva5jwu7of5x1_zt4mtlgaem.jpeg" width="550"></div><br><p>  <em>Labirinto</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1w/lx/9c/1wlx9czlf4vl6-k_kolx6nrfile.jpeg" width="550"></div><br><p>  N√≥s subestimamos esse enorme design.  Ela levou muito tempo e esfor√ßo para criar, mas o resultado valeu a pena.  Para o trabalho do ‚Äúgrande objeto preto na parede‚Äù, foi necess√°rio muito GPIO (tudo foi feito da maneira mais primitiva - sem multiplexadores / desmultiplexadores, apenas hardcore!), Ent√£o tive que dividir o dispositivo em unidades funcionais - o mostrador e o pr√≥prio labirinto.  Cada n√≥ √© criado no mesmo Atmega8. </p><br><div class="spoiler">  <b class="spoiler_title">Processo de montagem</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ha/kd/n7/hakdn7tbv9q7-3pjscovb9_pgok.gif" width="550"></div></div></div><br><p>  No labirinto, o princ√≠pio √© simples (embora ent√£o n√£o parecesse t√£o simples :)).  Muitos problemas foram causados ‚Äã‚Äãpela presen√ßa de uma bola no final de seu caminho.  A interfer√™ncia aleat√≥ria interferia constantemente na opera√ß√£o de um acoplador √≥ptico aberto. </p><br><div class="spoiler">  <b class="spoiler_title">Foto do quadro</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/bv/16/pu/bv16pucrojx_6qpbaq5wmszmfrq.jpeg" width="550"></div></div></div><br><p>  S√£o esses capacitores amarelos que ajudaram a resolver o problema da opera√ß√£o aleat√≥ria dos optoacopladores. </p><br><p>  Como resultado da passagem do labirinto, o acesso √† esfera verde √© aberto.  O sistema para fornecer acesso a ele √© bloqueado pelas portas do carro.  (Em termos de pre√ßo / for√ßa de retra√ß√£o, ele √© um monstro!). </p><br><p>  Inicialmente, n√£o estava planejado dar uma bola para o jogo, mas eu tinha que fazer ajustes j√° na fase final, porque  nas bolas magn√©ticas, elas podem ‚Äúficar juntas‚Äù e separ√°-las √© muito problem√°tico; portanto, para excluir essa probabilidade o m√°ximo poss√≠vel no jogo, foi decidido emitir bolas por sua vez.  A alimenta√ß√£o √© realizada usando um motor de passo e um obturador improvisado de uma velha haste girat√≥ria. </p><br><div class="spoiler">  <b class="spoiler_title">Foto do mecanismo</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/f0/bu/-p/f0bu-pdwg9bcxbnswdtufo-xgwk.jpeg" width="350"></div></div></div><br><p>  <strong>Juntando for√ßas</strong> </p><br><p>  <em>Xadrez</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/li/sv/bj/lisvbj67_f4538jcwsngoz-6ule.jpeg" width="500"></div><br><p>  Ap√≥s muita delibera√ß√£o, uma tarefa com um √∫nico algoritmo foi pensada (sob certas condi√ß√µes, que os jogadores fazem uma reserva).  A √∫nica coisa que restava era implementar um sistema de movimento de xadrez e rea√ß√£o √†s a√ß√µes dos jogadores :) </p><br><div class="spoiler">  <b class="spoiler_title">Com o apoio da produ√ß√£o coletiva de fazendas, o seguinte projeto de trrrresh foi implementado:</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/cb/3n/dc/cb3ndck2a4ge9y2aud1mskzqdyq.jpeg" width="350"><img src="https://habrastorage.org/webt/yz/tx/bj/yztxbjncm7oilb359bslvcvsuvk.jpeg" width="350"></p></div></div><br><p>  O mecanismo √© feito de pernos e porcas M8, rolamentos chineses e madeira.  Um √≠m√£ √© montado em cada figura com a ajuda da qual o mecanismo os move.  O acoplamento entre o motor e o parafuso prisioneiro √© feito de um componente da pistola de cola, que t√≠nhamos consum√≠veis, devido ao grande aumento do consumo de cola de silicone. </p><br><div class="spoiler">  <b class="spoiler_title">Foto do quadro</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/jw/hh/ad/jwhhadki6ctudi0tz4dxd_i3cpk.jpeg" width="350"><img src="https://habrastorage.org/webt/g6/yd/rf/g6ydrfrphcnvrigm4uuqf3th5hc.jpeg" width="350"></p></div></div><br><p>  Quem sabe, pegamos as pe√ßas do jogo de xadrez de Harry Potter, elas ainda produzem sons diferentes, brilho, etc.  Eu n√£o podia deixar esses recursos exatamente assim, movi esses xales sob o tabuleiro e, quando eles cavalgam - ele relincha, e no final voc√™ pode ouvir o som do rei ca√≠do. <br>  Ap√≥s uma vit√≥ria no xadrez, a porta do gabinete se abre (abre rapidamente com a ajuda de um trilho de g√°s para m√≥veis). </p><br><p>  Antes de passar para o mais interessante, quero falar sobre um caldeir√£o (uma tigela de lembran√ßas) e um interfone para comunica√ß√£o entre o administrador e os visitantes durante o jogo. </p><br><p>  <em>Tigela de mem√≥rias</em> </p><br><p>  Para come√ßar, este caldeir√£o de alum√≠nio de dez litros foi encontrado por meu av√¥ em uma garagem como um atributo da cozinha sovi√©tica :) A id√©ia de criar uma tigela de mem√≥rias das quais a fuma√ßa sopraria (e de fato vapor) pairou em pensamentos por um longo tempo, mas chegamos a uma implementa√ß√£o competente um pouco depois. </p><br><p>  Umidificadores ultrass√¥nicos na quantidade de 6 (!!!) pe√ßas e com uma pot√™ncia total de cerca de 100 watts se tornaram o agente de nebuliza√ß√£o! </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4s/rf/yf/4srfyfxjqghpglwjkvin8-fnvdu.png" width="350"></div><br><p>  Infelizmente, a foto n√£o foi preservada, mas o dispositivo √© muito simples, feito de acordo com o esquema: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/ly/cz/telycz1hm-xsihi9bstgrn7amiw.png" width="350"></div><br><p>  As dimens√µes foram feitas para encaixar perfeitamente este sistema na mesa (espa√ßo para gavetas). </p><br><p>  <em>Intercomunicador</em> </p><br><p>  Meu escasso conhecimento de circuitos anal√≥gicos n√£o permitiu uma solu√ß√£o r√°pida para esse problema.  Ap√≥s tentativas longas e malsucedidas (mas, como se viu depois, a solu√ß√£o estava pr√≥xima de Chetrov!), Pedi a meu amigo de Kherson que me fizesse esse dispositivo. </p><br><div class="spoiler">  <b class="spoiler_title">E depois de um tempo eu tenho um dispositivo assim</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/wp/3l/gj/wp3lgj8lyrudgr3qay6jwyz9dzq.jpeg" height="350"><img src="https://habrastorage.org/webt/nl/fd/od/nlfdod5gxhlk0yqneatdm7qxye8.jpeg" height="350"></p></div></div><br><p>  O pr√©-amplificador √© fabricado em um amplificador operacional de baixo ru√≠do NE5532, ap√≥s o qual custa TDA2006. </p><br><div class="spoiler">  <b class="spoiler_title">Circuito de pr√©-amplificador</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zr/bs/c8/zrbsc8-3bnuu6vmscl3pvhvpugg.jpeg" width="400"></div></div></div><br><p>  Finalmente, passamos para um dos sistemas mais complexos da sala - a batalha final com o Lorde das Trevas! </p><br><p>  <strong><em>Luta</em></strong> </p><br><p>  A id√©ia era realizar pelo menos uma "batalha" semelhante do jogador (Harry Potter) com Voldemort.  Para maior efeito, foi adicionado vento (2 ventiladores).  Pensamos em v√°rias op√ß√µes e, em seguida, um amigo me falou sobre os LEDs WS2812 endere√ß√°veis.  Agora, mesmo os drivers mais pregui√ßosos do Arduino falam sobre as coisas legais que eles fizeram, mas o WS2812 era menos conhecido, mas eles se tornaram nossa salva√ß√£o!  Sem eles, era simplesmente irrealista realizar nossa ideia! </p><br><p>  A tira de LED de 5m foi dobrada ao meio e um fio para um interruptor de palheta foi esticado dentro.  As primeiras fitas de 5m foram gravadas com seguran√ßa, na tentativa de economizar na fonte de alimenta√ß√£o para a mesma fita :) </p><br><p>  Iniciamos o desenvolvimento definindo os hor√°rios: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/x4/qo/wh/x4qowhnqimvp4m5c-sdratsqzws.jpeg" width="500"></div><br><p>  Alguns problemas acrescentaram a inclus√£o de f√£s.  Se voc√™ trouxer / remover a varinha frequentemente, depois o rel√© (inicialmente tentei ligar os ventiladores atrav√©s do rel√©), o microcontrolador simplesmente demoliu a torre.  Como resultado, aprendi sobre a capacidade de controlar uma carga de 220V atrav√©s de um opto-simmistor.  Depois disso eu n√£o uso um rel√© :) </p><br><p>  Tamb√©m vale mencionar que era necess√°rio um poder de computa√ß√£o s√©rio (na escala Atmega8) para se dedicar ao controle de faixa de LED.  No come√ßo, o trabalho da fita estava pendurado muito, sofremos por muito tempo, n√£o conseguimos entender o porqu√™.  Como resultado, tive que encontrar na Internet a pessoa que escreveu a biblioteca para esta fita e pedir ajuda.  O motivo era simples: o MK n√£o teve tempo de executar o c√≥digo no manipulador de interrup√ß√µes e, assim que o corrigimos, tudo funcionou perfeitamente! </p><br><div class="spoiler">  <b class="spoiler_title">Foto do quadro</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/nh/iw/cp/nhiwcpjsdozd8dqie-ur6wk49uk.jpeg" width="350"><img src="https://habrastorage.org/webt/fb/ld/va/fbldvaxsykqrxfhbw3i0c7htiaw.jpeg" width="350"></p></div></div><br><p>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Programas para microcontroladores</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Programa para computador</a> </p><br><p>  De acordo com a nossa ideia, este deve ser o √∫ltimo artigo, mas ainda queremos contar muitas coisas interessantes, por isso quero anunciar o lan√ßamento de mais dois artigos sobre como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">criar Hogwarts real (1)</a> e debater com id√©ias n√£o realizadas (2) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">do escrit√≥rio</a> . </p><br><p>  Vai ser interessante! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt411059/">https://habr.com/ru/post/pt411059/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt411045/index.html">Stick: o her√≥i desconhecido da evolu√ß√£o humana</a></li>
<li><a href="../pt411049/index.html">O que ler. Artigos e blogs pouco conhecidos e congelados de n√£o fic√ß√£o</a></li>
<li><a href="../pt411051/index.html">Os sat√©lites da Dauria Aerospace n√£o entram em contato (infelizmente, continua√ß√£o)</a></li>
<li><a href="../pt411055/index.html">Especialistas: um motorista humano no site do piloto autom√°tico da Uber poderia evitar uma colis√£o fatal</a></li>
<li><a href="../pt411057/index.html">Space X e ULA assinam contratos de US $ 650 milh√µes com o Pent√°gono</a></li>
<li><a href="../pt411061/index.html">SO real para um PC ou netbook antigo</a></li>
<li><a href="../pt411063/index.html">Aprendendo o elefante (parte 2)</a></li>
<li><a href="../pt411065/index.html">"Apreciando o sil√™ncio": quais s√£o os pr√≥s e os contras dos lugares mais calmos do planeta</a></li>
<li><a href="../pt411067/index.html">O universo primitivo 1. Cosmologia da infla√ß√£o: nosso universo √© parte do multiverso? Parte 1</a></li>
<li><a href="../pt411069/index.html">"Cyborgs e espa√ßo"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>