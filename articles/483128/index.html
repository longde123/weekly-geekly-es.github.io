<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüåæ üêã üë©‚Äç‚öñÔ∏è Presentaci√≥n de PHP 7.4: rendimiento, caracter√≠sticas, desaprobaciones ü§¥üèΩ üêî ü§πüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øQu√© significa PHP 7.4 para usted? 
 PHP evoluciona continuamente y acaban de lanzar su √∫ltima actualizaci√≥n de PHP 7.4, llena de nuevas caracter√≠stic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Presentaci√≥n de PHP 7.4: rendimiento, caracter√≠sticas, desaprobaciones</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483128/"><h2>  ¬øQu√© significa PHP 7.4 para usted? </h2><br>  PHP evoluciona continuamente y acaban de lanzar su √∫ltima actualizaci√≥n de PHP 7.4, llena de nuevas caracter√≠sticas.  Como ya hemos demostrado en las √∫ltimas versiones de PHP 7, el rendimiento y la velocidad siguen avanzando.  Una de las nuevas caracter√≠sticas m√°s interesantes es la <b>precarga</b> .  Acelera la ejecuci√≥n del script e introduce la capacidad de tener un c√≥digo m√°s r√°pido y limpio debido a las l√≠neas comunes de c√≥digo simplificadas. <br><br>  Las personas a cargo de PHP tomaron los comentarios y solicitudes de su audiencia en una consideraci√≥n m√°xima y las respondieron sin problemas.  Desde entonces, han estado cambiando continuamente el c√≥digo para que sea m√°s intuitivo y m√°s c√≥modo cambiar entre lenguajes de programaci√≥n. <br><br>  PHP se usa en m√°s del 78.9% de todos los sitios web.  Seg√∫n <b><a href="https://w3techs.com/technologies/details/pl-php">W3techs</a></b> , los sitios m√°s populares que usan PHP son Wikipedia, Pinterest y Facebook, por nombrar algunos. <br><br>  Si observamos expl√≠citamente los sitios de WordPress que ejecutan PHP, comparando PHP 5 y 7, podemos ver un aumento de doble velocidad.  Los sitios web con tecnolog√≠a de WordPress son los que m√°s ganan al usar la √∫ltima versi√≥n de PHP que existe. <br><br><img src="https://habrastorage.org/webt/mv/aq/7i/mvaq7ifytdcg65bytr9gmxim9ri.png" alt="imagen"><br><a name="habracut"></a><br>  Este gr√°fico ilustra la verdad sobre los sitios web que usan PHP activamente.  Son <b><a href="https://trends.builtwith.com/websitelist/PHP">40 millones.</a></b>  sitios web en vivo lo suficiente como para llamar su atenci√≥n?  As√≠ es como muchos est√°n usando PHP en este momento.  Adem√°s, PHP 7.4 ya presenta mejores resultados de prueba que PHP 7.3 con un rendimiento mejorado y otras actualizaciones de calidad de vida. <br><br>  El siguiente gr√°fico muestra la <b><a href="https://www.phoronix.com/scan.php%3Fpage%3Darticle%26item%3Dphp-74-benchmarks%26num%3D1">prueba de referencia</a></b> general en versiones nuevas y antiguas de PHP.  Algunos de los criterios probados fueron la facilidad de uso, la velocidad y el rendimiento, entre otros. <br><br><img src="https://habrastorage.org/webt/yc/pa/rn/ycparnhmqt8bezuoxtfdi_y_veo.png" alt="imagen"><br><br><h2>  ¬øQu√© hay de nuevo en PHP 7.4? </h2><br>  Desde 2016, PHP7 ha lanzado actualizaciones anuales sin falta.  Cada a√±o ofrecen nuevas funciones, adiciones y la posibilidad de escribir un c√≥digo m√°s limpio que hace que el lenguaje sea m√°s confiable y f√°cil de usar para aquellos que lo ejecutan en sus sitios web. <br><br>  Analicemos y echemos un vistazo m√°s de cerca a algunos de los cambios que se hicieron con la adici√≥n de PHP 7.4.  Para obtener una lista completa, consulte su registro de cambios <b><a href="https://www.php.net/manual/en/migration74.php">aqu√≠</a></b> . <br><br><h3>  Precarga </h3><br>  Hablemos del c√≥digo.  Cuando se utiliza un marco o bibliotecas, sus archivos deben cargarse y vincularse en cada solicitud.  La precarga es cuando puede cargar marcos y bibliotecas en OPCache.  Permite que el servidor cargue los archivos PHP y los almacene en la memoria durante el inicio y los tenga disponibles para futuras solicitudes.  Hable acerca de hacer que las cosas vayan r√°pido <br><br>  La precarga se ejecuta mediante una directiva <b>php.ini</b> espec√≠fica: <b>opcache.preload</b> .  Esto tiene el compilador de script PHP y se ejecuta cuando se inicia el servidor.  Tambi√©n se puede usar para precargar m√°s archivos y elegir incluirlos o compilarlos. <br><br>  Esto es asombroso  Sin embargo, si alguna vez se cambia la fuente de los archivos precargados, el servidor debe reiniciarse.  Los archivos precargados tambi√©n permanecen en cach√© en la memoria OPCache para siempre. <br>  Sin embargo, estos archivos precargados continuar√°n estando disponibles para futuras solicitudes en caso de que alguna vez necesite usarlos nuevamente. <br><br><h3>  Operador extendido en expresiones de matriz </h3><br>  Cuando se lanz√≥ PHP 5.6, PHP comenz√≥ a admitir el desempaquetado de argumentos (operador de propagaci√≥n), pero ahora, con 7.4, podemos usar esta funci√≥n con una expresi√≥n de matriz.  El desempaquetado de argumentos es una sintaxis para desempaquetar matrices y Traversables en listas de argumentos.  Y, para hacerlo, solo necesita ser antepuesto por ... (3 puntos). Eso es todo. <br><br>  Veamos este ejemplo: <br><br><pre><code class="php hljs">$animals = [<span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-string"><span class="hljs-string">'cat'</span></span>]; $animalkingdom = [<span class="hljs-string"><span class="hljs-string">'lion'</span></span>, <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>, ...$animals, <span class="hljs-string"><span class="hljs-string">'giraffe'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ['lion', 'elephant', 'dog', 'cat', 'giraffe'];</span></span></code> </pre> <br>  Ahora podemos expandir una matriz desde cualquier lugar que queramos en otra matriz, simplemente usando la sintaxis del Operador de propagaci√≥n. <br><br>  Aqu√≠ hay un ejemplo m√°s largo: <br><br><pre> <code class="php hljs">$num1 = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]; $num2 = [...$num1]; <span class="hljs-comment"><span class="hljs-comment">// [1, 2, 3] $num3 = [0, ...$num1]; // [0, 1, 2, 3] $num4 = array(...$num1, ...$num2, 111); // [1, 2, 3, 1, 2, 3, 111] $num5 = [...$num1, ...$num1]; // [1, 2, 3, 1, 2, 3]</span></span></code> </pre> <br>  No solo eso, sino que tambi√©n puedes usarlo en una funci√≥n.  Mira este ejemplo: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>]; } $num6 = [...getNum(), <span class="hljs-string"><span class="hljs-string">'c'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ['a', 'b', 'c'] $num7 = [...new NumIterator(['a', 'b', 'c'])]; // ['a', 'b', 'c'] function arrGen() { for($i = 11; $i &lt; 15; $i++) { yield $i; } } $num8 = [...arrGen()]; // [11, 12, 13, 14]</span></span></code> </pre> <br>  Adem√°s, ahora puede desempaquetar matrices y generadores que una funci√≥n devuelve directamente a una nueva matriz. <br><br>  Un ejemplo de c√≥digo se ver√≠a as√≠: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAnimals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>]; } $num1 = [...getAnimals(), <span class="hljs-string"><span class="hljs-string">'lion'</span></span>, <span class="hljs-string"><span class="hljs-string">'tiger'</span></span>, <span class="hljs-string"><span class="hljs-string">'giraffe'</span></span>];</code> </pre> <br>  Y con PHP 7.4, imprimir√≠a: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>) { [<span class="hljs-number"><span class="hljs-number">0</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"dog"</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"cat"</span></span> [<span class="hljs-number"><span class="hljs-number">2</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-string"><span class="hljs-string">"elephant"</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-string"><span class="hljs-string">"lion"</span></span> [<span class="hljs-number"><span class="hljs-number">4</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-string"><span class="hljs-string">"tiger"</span></span> [<span class="hljs-number"><span class="hljs-number">5</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-string"><span class="hljs-string">"giraffe"</span></span> }</code> </pre> <br>  Con esta nueva expresi√≥n de matriz, los operadores de propagaci√≥n deber√≠an tener un rendimiento mucho mejor en 7.3 array_merge.  Esto se debe a que el operador de propagaci√≥n es una estructura de lenguaje, mientras que array_merge es una funci√≥n.  Tambi√©n porque el operador spread admite objetos que implementan traversable y array_merge solo admite matrices. <br><br>  Algunas cosas importantes a tener en cuenta, solo puede usar matrices indexadas ya que las claves de cadena no son compatibles.  Si se usa, se arrojar√° un error recuperable en la pantalla, una vez que se encuentre una clave de cadena. <br>  Otro beneficio glorioso de 7.4 es la eliminaci√≥n de array_merge.  ¬°Diga adi√≥s al temido cambio de √≠ndice! <br><br>  Por ejemplo, echemos un vistazo a esta combinaci√≥n de matriz de largo aliento a continuaci√≥n: <br><br><pre> <code class="php hljs">$array = [<span class="hljs-string"><span class="hljs-string">'banana, '</span></span>orange<span class="hljs-string"><span class="hljs-string">']; $array[2] = '</span></span>orange<span class="hljs-string"><span class="hljs-string">'; $array[1] = '</span></span>apple<span class="hljs-string"><span class="hljs-string">'; //shifting var_dump($array); // prints array(3) { [0]=&gt; string(6) "banana" [1]=&gt; string(5) "apple" [2]=&gt; string(6) "orange"</span></span></code> </pre> <br>  Otro beneficio de 7.4 es usar la funci√≥n de generador.  Una funci√≥n generadora funciona igual que una funci√≥n normal, excepto que en lugar de devolver un valor, una <b><a href="https://www.php.net/manual/en/language.generators.syntax.php">funci√≥n generadora</a></b> produce tantos valores como sea necesario. <br><br>  Mira el c√≥digo de ejemplo a continuaci√≥n: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i = <span class="hljs-number"><span class="hljs-number">3</span></span>; $i &lt;= <span class="hljs-number"><span class="hljs-number">5</span></span>; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> $i; } } $num1 = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, ...generator()];</code> </pre> <br><h3>  Referencias d√©biles </h3><br>  Ahora PHP 7.4 tiene una clase WeakReference, que no debe confundirse con la clase <b>WeakRed</b> o la extensi√≥n <b>Weakref</b> . <br><br>  <b>WeakReferences le</b> permite al programador recordar una referencia a un objeto.  Esto es √∫til porque no evita que el objeto sea destruido.  Son √∫tiles para implementar estructuras similares a la memoria cach√©. <br><br><pre> <code class="php hljs">WeakReference { <span class="hljs-comment"><span class="hljs-comment">/* Methods */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> __construct ( void ) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> create ( object $referent ) : WeakReference <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> get ( void ) : ?object }</code> </pre> <br><h3>  Par√°metros contravariantes y retornos covariantes </h3><br>  Actualmente, PHP utiliza principalmente tipos de par√°metros invariables y tipos de retorno.  Es decir, si un m√©todo tiene un par√°metro o tipo de retorno de X, entonces el par√°metro de subtipo o tipo de retorno tambi√©n debe ser de tipo <b>X.</b> <br><br>  Ahora, con PHP 7.4, propone permitir <b>covariantes</b> (ordenadas de espec√≠ficas a gen√©ricas) y <b>contravariantes</b> (invertir el orden) en los par√°metros y tipos de retorno. <br><br>  Aqu√≠ hay un ejemplo de ambos: <br><br>  Ejemplo de tipo de retorno covariante: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Factory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">object</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserFactory</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Factory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span></span>; }</code> </pre> <br>  Ejemplo de tipo de par√°metro contravariante: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concatable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iterator $input)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concatable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// accepts all iterables, not just Iterator function concat(iterable $input) {/* . . . */} }</span></span></code> </pre> <br><h3>  Propiedades tipificadas 2.0 </h3><br>  Desde PHP 5, las sugerencias de tipo han sido una caracter√≠stica disponible que le permite especificar el tipo de variable que se espera pasar a una funci√≥n o clase.  En las migraciones de PHP 7.2, la adici√≥n del tipo de datos del objeto dio la esperanza de que habr√≠a m√°s disponibles en el futuro.  El futuro es ahora. <br><br>  En el nuevo 7.4, PHP puede admitir la siguiente lista de tipos: <br><br><pre> <code class="php hljs">bool, int, float, string, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>, object, iterable, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> any <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">or</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class"> // </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">may</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">be</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">any</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">above</span></span></span></span></code> </pre> <br>  Tenga en cuenta que el tipo <b>primario</b> puede usarse en clases y no necesita tener un primario consistente con el par√°metro y el tipo de retorno. <br><br>  Adem√°s, tenga en cuenta que <b>nulo</b> y <b>invocable</b> no son compatibles.  Se elimin√≥ el <b>vac√≠o</b> porque no era √∫til y ten√≠a una sem√°ntica poco clara;  <b>Llamable</b> , porque su comportamiento depend√≠a del contexto. <br><br>  Veamos algunos ejemplos m√°s. <br><br>  Aqu√≠ hay una clase, escrita para PHP 7.3: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> int $id */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $id; <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string $name */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id, string $name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $name)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } }</code> </pre> <br>  En PHP 7.4, sin sacrificar ning√∫n tipo de seguridad, ahora se puede escribir una clase tan simple como: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> int $id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> string $name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id, string $name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } }</code> </pre><br>  Aqu√≠ hay algunos ejemplos de todos los tipos que 7.4 ahora admite: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> int $scalarType; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ClassName $classType; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ?ClassName $nullableClassType; <span class="hljs-comment"><span class="hljs-comment">// Types are also legal on static properties public static iterable $staticProp; // Types can also be used with the "var" notation var bool $flag; // Typed properties may have default values (more below) public string $str = "foo"; public ?string $nullableStr = null; // The type applies to all properties in one declaration public float $x, $y; // equivalent to: public float $x; public float $y; }</span></span></code> </pre> <br><h3>  Funciones de flecha 2.0 </h3><br>  Las funciones an√≥nimas en PHP tienden a ser verbales y largas, incluso cuando solo realizan operaciones simples.  Esto se debe en parte a una gran cantidad de repeticiones sint√°cticas, y en parte a la necesidad de importar manualmente las variables utilizadas. <br><br>  Esto hace que el c√≥digo que usa cierres simples sea confuso de leer e incluso m√°s dif√≠cil de entender. <br><br>  Veamos un c√≥digo que usar√≠as con PHP 7.3: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array_values_from_keys</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr, $keys)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $arr[$x]; }, $keys); }</code> </pre> <br>  Ahora, aqu√≠ est√° la sintaxis m√°s concisa de PHP 7.4: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array_values_from_keys</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr, $keys)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_map(fn($x) =&gt; $arr[$x], $keys); }</code> </pre> <br>  Por lo tanto, las funciones de flecha ahora tienen esta forma simple: <br><br><pre> <code class="php hljs">fn(parameter_list) =&gt; expr</code> </pre> <br>  A continuaci√≥n puede ver un ejemplo de dos funciones $ fn1 (7.3) y $ fn2 (7.4) una al lado de la otra.  Tienen el mismo resultado pero se ven diferentes: <br><br><pre> <code class="php hljs">$y = <span class="hljs-number"><span class="hljs-number">1</span></span>; $fn1 = fn($x) =&gt; $x + $y; $fn2 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $x + $y; };</code> </pre> <br>  Esto tambi√©n funcionar√° si las funciones de flecha est√°n anidadas: <br><br><pre> <code class="php hljs">$z = <span class="hljs-number"><span class="hljs-number">1</span></span>; $fn = fn($x) =&gt; fn($y) =&gt; $x * $y + $z;</code> </pre><br>  Aqu√≠ la funci√≥n externa captura <b>$ z</b> .  Entonces, la funci√≥n interna tambi√©n captura $ z de la funci√≥n externa.  Con 7.4, el alcance externo puede estar disponible en la funci√≥n interna.  Esto es algo que 7.3 no pudo hacer. <br><br>  La sintaxis de la funci√≥n de flecha permite una variedad de funciones, como variables, valores predeterminados, par√°metros y tipos de retorno, as√≠ como el paso y retorno por referencia.  Todo mientras mantiene un aspecto limpio y legible.  A continuaci√≥n se muestran todas las funciones de flecha v√°lidas ahora disponibles: <br><br><pre> <code class="php hljs">fn(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span> $x) =&gt; $x; fn(): int =&gt; $x; fn($x = <span class="hljs-number"><span class="hljs-number">42</span></span>) =&gt; $x; fn(&amp;$x) =&gt; $x; fn&amp;($x) =&gt; $x; fn($x, ...$rest) =&gt; $rest;</code> </pre> <br>  Una cosa a tener en cuenta es que las funciones de flecha tienen la prioridad m√°s baja.  Mira el ejemplo: <br><br><pre> <code class="php hljs">fn($x) =&gt; $x + $y <span class="hljs-comment"><span class="hljs-comment">// is fn($x) =&gt; ($x + $y) // not (fn($x) =&gt; $x) + $y</span></span></code> </pre> <br><h2>  Depreciaciones </h2><br>  Hay muchas degradaciones que suceden con la fusi√≥n a 7.4.  La siguiente lista es una breve descripci√≥n de las funciones destinadas a la degradaci√≥n.  Puede encontrar una explicaci√≥n m√°s detallada <b><a href="https://wiki.php.net/rfc/deprecations_php_7_4">aqu√≠</a></b> : <br><br><ul><li>  El tipo <b>real</b> </li><li>  Legado de citas m√°gicas </li><li>  <b>array_key_exists ()</b> con objetos </li><li>  Filtro <b>FILTER_SANITIZE_MAGIC_QUOTES</b> </li><li>  M√©todos <b>export export ()</b> </li><li>  <b>mb_strrpos ()</b> con codificaci√≥n como tercer argumento </li><li>  mezcla de orden de par√°metro <b>implode ()</b> </li><li>  Desligar <b>$ this</b> de cierres no est√°ticos </li><li>  <b>funci√≥n hebrevc ()</b> </li><li>  <b>funci√≥n convert_cyr_string ()</b> </li><li>  <b>funci√≥n money_format ()</b> </li><li>  <b>funci√≥n ezmlm_hash ()</b> </li><li>  <b>Funci√≥n estore_include_path ()</b> </li><li>  <b>allow_url_include</b> ini directiv </li></ul><br>  Algunos importantes a tener en cuenta son las siguientes degradaciones de dos pasos. <br><br><h3>  Cambiar la precedencia de un operador de concatenaci√≥n </h3><br>  Actualmente, la precedencia de los operadores '.', '+' Y '-' son todos iguales.  Cualquier combinaci√≥n de estos operadores simplemente se resolver√° de izquierda a derecha. <br><br>  Veamos este c√≥digo en PHP 7.3: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"sum: "</span></span> . $a + $b; <span class="hljs-comment"><span class="hljs-comment">// would be evaluated left-to-right echo ("sum: " . $a) + $b; // could also look like this</span></span></code> </pre> <br>  Con PHP 7.4, '+' y '-' tendr√≠an prioridad sobre '.'  entonces las sumas y restas siempre se realizar√≠an antes de la cadena.  Esto se ver√≠a as√≠: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"sum: "</span></span> . $a + $b; <span class="hljs-comment"><span class="hljs-comment">// would be executed as if the code were as follows. echo "sum :" . ($a + $b);</span></span></code> </pre> <br>  Esta propuesta de dos pasos pretende ser menos propensa a errores y m√°s instintiva.  PHP 7.4 actualmente se encuentra en la primera etapa con un aviso de desaprobaci√≥n de expresiones sin par√©ntesis de '+', '-' y '.'  Mientras espera que ocurra el voto / cambio final en PHP 8. <br><br><h3>  Operador ternario asociativo de izquierda </h3><br>  A diferencia de la mayor√≠a de los otros lenguajes, el operador ternario en PHP es asociativo a la izquierda en lugar de asociativo a la derecha.  No solo es poco com√∫n, tambi√©n es confuso para los programadores que cambian entre diferentes idiomas.  PHP 7.4 propone eliminar la asociatividad izquierda y requiere el uso de par√©ntesis en su lugar. <br><br>  Echemos un vistazo al c√≥digo a continuaci√≥n: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">2</span></span> ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">4</span></span> ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>;</code> </pre> <br>  En la mayor√≠a de los otros idiomas se interpretar√≠a como: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">2</span></span> ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">4</span></span> ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>)))</code> </pre> <br>  Mientras que en PHP, se interpreta como: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((($a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">2</span></span>) ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">3</span></span>) ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">4</span></span>) ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>;</code> </pre> <br>  Esto puede conducir a errores porque generalmente no es lo que se pretend√≠a. <br><br>  A trav√©s de una propuesta separada de dos pasos, PHP 7.4 ha implementado el uso expl√≠cito de par√©ntesis como advertencia de desaprobaci√≥n y, con suerte, llevar√° a cabo un error de tiempo de ejecuci√≥n de compilaci√≥n en futuras versiones. <br><br><h2>  Conclusi√≥n </h2><br>  Justo a tiempo para las vacaciones, PHP 7.4 trae nuevas caracter√≠sticas y mejoras en la calidad de vida para todos los desarrolladores de PHP. <br><br>  Los sitios web de WordPress definitivamente se beneficiar√°n de estas mejoras y sus usuarios pueden esperar tiempos de ejecuci√≥n m√°s r√°pidos y menos uso de memoria cuando usan PHP 7.4 en comparaci√≥n con versiones anteriores. <br><br>  Con la adici√≥n de declaraciones de tipo de propiedad de primera clase y sugerencias de tipo, funciones de combinaci√≥n de flechas y una velocidad rid√≠culamente mejor, el 7.4 seguramente mejorar√° tanto la velocidad como la calidad de su flujo de trabajo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/483128/">https://habr.com/ru/post/483128/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../483116/index.html">Hacer un tubo de telescopio en casa</a></li>
<li><a href="../483118/index.html">Lo que se agregar√° a JavaScript en 2020</a></li>
<li><a href="../483120/index.html">¬øC√≥mo conectar tarjetas en una proyecci√≥n elipsoide, si no se proporciona?</a></li>
<li><a href="../483124/index.html">El gadget m√°s masivo en el futuro cercano (no un tel√©fono inteligente)</a></li>
<li><a href="../483126/index.html">Los efectos criog√©nicos pueden garantizar el transporte seguro de las bater√≠as da√±adas de los veh√≠culos el√©ctricos.</a></li>
<li><a href="../483130/index.html">¬øQu√© hacer si se olvida el c√≥digo para el candado de la maleta?</a></li>
<li><a href="../483132/index.html">Dise√±o y fabricaci√≥n de un telescopio.</a></li>
<li><a href="../483134/index.html">Prueba de autenticaci√≥n de dos factores y posibles soluciones</a></li>
<li><a href="../483136/index.html">Verificaci√≥n del MacBook usado antes de la compra - lista de verificaci√≥n</a></li>
<li><a href="../483140/index.html">Pol√≠gonos Otro Mundo: Amiga 500</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>