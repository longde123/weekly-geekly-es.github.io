<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüé® üñêüèº ü¶Ä Mrr: FRP total para reagir ü§≠ üë©üèæ‚Äçüîß üë©üèª‚Äçüî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mrr √© uma biblioteca funcional-reativa para o React (pe√ßo desculpas pela tautologia imagin√°ria). 

 A palavra "reatividade" geralmente se refere ao Rx...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mrr: FRP total para reagir</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428870/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mrr</a> √© uma biblioteca funcional-reativa para o React (pe√ßo desculpas pela tautologia imagin√°ria). <br><br>  A palavra "reatividade" geralmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">se refere ao Rx.js</a> como um FRP de refer√™ncia.  No entanto, uma s√©rie de artigos recentes sobre esse assunto em Habr√© ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">[1]</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">[2]</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">[3]</a> ) mostrou a complexidade das solu√ß√µes Rx, que em exemplos simples perdiam em clareza e simplicidade quase todas as outras abordagens.  Rx √© grande e poderoso e √© perfeito para resolver problemas nos quais a abstra√ß√£o do fluxo se sugere (na pr√°tica, isso √© principalmente a coordena√ß√£o de tarefas ass√≠ncronas).  Mas voc√™ escreveria, por exemplo, uma simples valida√ß√£o de formul√°rio s√≠ncrona no Rx?  Ele economizaria seu tempo em compara√ß√£o com as abordagens imperativas usuais? <br><br>  mrr √© uma tentativa de provar que o FRF pode ser uma solu√ß√£o conveniente e eficaz, n√£o apenas em problemas espec√≠ficos de "streaming", mas tamb√©m nas tarefas de rotina mais comuns do front-end. <br><a name="habracut"></a><br>  A programa√ß√£o reativa √© uma abstra√ß√£o muito poderosa, no momento no frontend est√° presente de duas maneiras: <br><br><ul><li>  vari√°veis ‚Äã‚Äãreativas (vari√°veis ‚Äã‚Äãcomputadas): simples, confi√°veis, intuitivas, mas o potencial do PR est√° longe de ser totalmente revelado </li><li>  bibliotecas para trabalhar com fluxos, como Rx, Bacon, etc .: poderoso, mas bastante complicado, o escopo do uso pr√°tico √© limitado a tarefas espec√≠ficas. </li></ul><br>  Mrr combina as vantagens dessas abordagens.  Ao contr√°rio do Rx.js, o mrr tem uma API curta, que o usu√°rio pode expandir com suas adi√ß√µes.  Em vez de dezenas de m√©todos e operadores - quatro operadores b√°sicos, em vez de Observ√°vel (quente e frio), Assunto, etc.  - uma abstra√ß√£o: stream.  Al√©m disso, o sr. N√£o possui alguns conceitos complexos que podem complicar significativamente a legibilidade do c√≥digo, por exemplo, metastreams. <br><br>  No entanto, o senhor n√£o √© um "Rx simplificado de uma nova maneira".  Com base nos mesmos princ√≠pios b√°sicos de Rx, o sr. Afirma ser um nicho maior: gerenciar o estado do aplicativo global e local (no n√≠vel do componente).  Embora o conceito original de programa√ß√£o reativa visasse trabalhar com tarefas ass√≠ncronas, o srr usou com sucesso abordagens de reatividade para tarefas s√≠ncronas comuns.  Este √© o princ√≠pio do "total FRP". <br><br>  Freq√ºentemente, ao criar um aplicativo no React, v√°rias tecnologias diferentes s√£o usadas: recompor (ou em breve - ganchos) para o estado do componente, Redux / mobx para o estado global, Rx com redux observ√°vel (ou thunk / saga) para gerenciar efeitos colaterais e coordenar assincronamente tarefas no editor.  Em vez de uma "salada" de diferentes abordagens e tecnologias dentro do mesmo aplicativo, com o srr voc√™ pode usar uma √∫nica tecnologia e paradigma. <br><br>  A interface mrr tamb√©m √© significativamente diferente da Rx e de bibliotecas semelhantes - √© mais declarativa.  Gra√ßas √† abstra√ß√£o da reatividade e √† abordagem declarativa, o srr permite escrever c√≥digo expressivo e conciso.  Por exemplo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TodoMVC padr√£o</a> em mrr usa menos de 50 linhas de c√≥digo (sem contar o modelo JSX). <br><br>  Mas publicidade suficiente.  Voc√™ conseguiu combinar as vantagens do RP "leve" e "pesado" em uma garrafa - voc√™ deve julgar, mas primeiro, leia os exemplos de c√≥digo. <br><br>  TodoMVC j√° √© bastante dolorido, e o exemplo de download de dados sobre usu√°rios do Github √© muito primitivo para poder sentir os recursos da biblioteca nele.  Consideraremos o srr como um exemplo de aplicativo condicional para a compra de bilhetes de trem.  Na nossa interface do usu√°rio, haver√° campos para escolher as esta√ß√µes de partida e chegada, datas.  Depois, ap√≥s o envio dos dados, uma lista de trens e lugares dispon√≠veis ser√° devolvida.  Depois de selecionar um trem e um tipo de carro espec√≠ficos, o usu√°rio inserir√° os dados do passageiro e depois adicionar√° os bilhetes √† cesta.  Vamos l√° <br><br>  Precisamos de um formul√°rio com uma escolha de esta√ß√µes e datas: <br><br><img src="https://habrastorage.org/webt/sm/he/aj/smheajucvbemykx4g-fvvqeygrc.gif"><br><br>  Crie campos de preenchimento autom√°tico para inserir esta√ß√µes. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { withMrr } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stations = [ <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>, ... ] <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-comment"><span class="hljs-comment">//    $init: { stationFromOptions: [], stationFromInput: '', }, //   - "" stationFromOptions: [str =&gt; stations.filter(s =&gt; s.indexOf(str)===0), 'stationFromInput'], }, (state, props, $) =&gt; { return (&lt;div&gt; &lt;h3&gt;    &lt;/h3&gt; &lt;div&gt;  : &lt;input onChange={ $('stationFromInput') } /&gt; &lt;/div&gt; &lt;ul className="stationFromOptions"&gt; { state.stationFromOptions.map(s =&gt; &lt;li&gt;{ s }&lt;/li&gt;) } &lt;/ul&gt; &lt;/div&gt;); }); export default Tickets;</span></span></code> </pre> <br>  Os componentes de MR s√£o criados usando a fun√ß√£o withMrr, que aceita um diagrama de link reativo (descri√ß√£o dos fluxos) e uma fun√ß√£o de renderiza√ß√£o.  As fun√ß√µes de renderiza√ß√£o s√£o passadas para os props do componente, bem como para o estado, que agora √© completamente controlado pelo srr.  Ele conter√° o inicial (bloco $ init) e calculado pelos valores da f√≥rmula das c√©lulas reativas. <br><br>  Agora, temos duas c√©lulas (ou dois fluxos, que s√£o a mesma coisa): <b>stationFromInput</b> , os valores dos quais caem da entrada do usu√°rio usando o <b>$</b> helper (passando <b>event.target.value</b> por padr√£o para elementos de entrada de dados) e uma c√©lula derivada dele <b>stationFromOptions</b> , contendo uma matriz de esta√ß√µes correspondentes por nome. <br><br>  O valor de <b>stationFromOptions √©</b> calculado automaticamente sempre que uma c√©lula pai √© alterada usando uma fun√ß√£o (na terminologia do srr chamada ‚Äú <i>f√≥rmula</i> ‚Äù - por analogia com as f√≥rmulas do Excel).  A sintaxe das express√µes mrr √© simples: em primeiro lugar, √© a fun√ß√£o (ou operador), usada para calcular o valor da c√©lula, e h√° uma lista de c√©lulas das quais essa c√©lula depende: seus valores s√£o passados ‚Äã‚Äãpara a fun√ß√£o.  Uma sintaxe t√£o estranha, √† primeira vista, tem muitas vantagens, as quais consideraremos mais adiante.  At√© agora, a l√≥gica do srr aqui se assemelha √† abordagem usual com vari√°veis ‚Äã‚Äãcomput√°veis ‚Äã‚Äãusadas no Vue, Svelte e outras bibliotecas, com a √∫nica diferen√ßa √© que voc√™ pode usar fun√ß√µes puras. <br><br>  Implementamos a substitui√ß√£o da esta√ß√£o selecionada da lista no campo de entrada.  Tamb√©m √© necess√°rio ocultar a lista de esta√ß√µes ap√≥s o usu√°rio clicar em uma delas. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">stationFromOptions</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">stationFromInput</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">stationFromOptions</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> stations.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function"> =&gt;</span></span> str.indexOf(a) === <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>], <span class="hljs-attr"><span class="hljs-attr">stationFrom</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>], <span class="hljs-attr"><span class="hljs-attr">optionsShown</span></span>: [<span class="hljs-string"><span class="hljs-string">'toggle'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>], }, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stationFromInput</span></span></span></span><span class="xml"><span class="hljs-tag">') } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state.stationFrom</span></span></span></span><span class="xml"><span class="hljs-tag"> }/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.optionsShown &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"stationFromOptions"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.stationFromOptions.map(s =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">selectStationFrom</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">s</span></span></span></span><span class="xml"><span class="hljs-tag">) }&gt;</span></span></span><span class="xml">{ s }</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">) } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">); });</span></span></code> </pre><br>  Um manipulador de eventos criado usando o $ helper na lista de esta√ß√µes emitir√° valores fixos para cada op√ß√£o. <br><br>  mrr √© consistente em sua abordagem declarativa, alheio a qualquer muta√ß√£o.  Depois de selecionar uma esta√ß√£o, n√£o podemos "for√ßar" a altera√ß√£o do valor da c√©lula.  Em vez disso, criamos uma nova c√©lula <b>stationFrom</b> , que, usando o operador de <b>mesclagem de</b> fluxo de <b>mesclagem</b> (um equivalente aproximado em Rx √© combineLatest), coletar√° os valores de dois fluxos: entrada do usu√°rio ( <b>stationFromInput</b> ) e sele√ß√£o de esta√ß√£o ( <b>selectStationFrom</b> ). <br><br>  Devemos mostrar a lista de op√ß√µes ap√≥s o usu√°rio digitar algo e ocultar depois que ele selecionou uma das op√ß√µes.  A c√©lula <b>optionsShown</b> ser√° respons√°vel pela visibilidade da lista de op√ß√µes, que aceitar√° valores booleanos dependendo das altera√ß√µes em outras c√©lulas.  Esse √© um padr√£o muito comum para o qual existe a√ß√∫car sint√°tico - o operador de <b>altern√¢ncia</b> .  Ele define o valor da c√©lula como <i>true</i> em qualquer altera√ß√£o do primeiro argumento (stream) e <i>false</i> - o segundo. <br><br>  Adicione um bot√£o para limpar o texto digitado. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">stationFromOptions</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">stationFromInput</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">stationFromOptions</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> stations.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function"> =&gt;</span></span> str.indexOf(a) === <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>], <span class="hljs-attr"><span class="hljs-attr">clearVal</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'clear'</span></span>], <span class="hljs-attr"><span class="hljs-attr">stationFrom</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'clearVal'</span></span>], <span class="hljs-attr"><span class="hljs-attr">optionsShown</span></span>: [<span class="hljs-string"><span class="hljs-string">'toggle'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>], }, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stationFromInput</span></span></span></span><span class="xml"><span class="hljs-tag">') } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state.stationFrom</span></span></span></span><span class="xml"><span class="hljs-tag"> }/&gt;</span></span></span><span class="xml"> { state.stationFrom &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">clear</span></span></span></span><span class="xml"><span class="hljs-tag">') }&gt;</span></span></span><span class="xml"></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.optionsShown &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"stationFromOptions"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.stationFromOptions.map(s =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">selectStationFrom</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">s</span></span></span></span><span class="xml"><span class="hljs-tag">) }&gt;</span></span></span><span class="xml">{ s }</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">) } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">); });</span></span></code> </pre><br>  Agora, a nossa c√©lula <b>stationFrom</b> , respons√°vel pelo conte√∫do do texto no campo de entrada, coleta seus valores n√£o de dois, mas de tr√™s fluxos.  Este c√≥digo pode ser simplificado.  Uma constru√ß√£o mrr da forma [* formula *, * ... argumentos da c√©lula *] √© semelhante √†s express√µes S no Lisp e, como no Lisp, voc√™ pode aninhar arbitrariamente essas constru√ß√µes umas nas outras. <br><br>  Vamos nos livrar da c√©lula clearVal in√∫til e encurtar o c√≥digo: <br><br><pre> <code class="javascript hljs"> stationFrom: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'clear'</span></span>]],</code> </pre><br>  Os programas escritos em um estilo imperativo podem ser comparados a uma equipe mal organizada, onde todos constantemente pedem algo um ao outro (eu insisto em chamadas de m√©todo e em altera√ß√µes mutantes); al√©m disso, os dois gerentes s√£o subordinados e vice-versa.  Programas declarativos s√£o semelhantes √† imagem ut√≥pica oposta: um coletivo em que todos sabem claramente como ele deve agir em qualquer situa√ß√£o.  N√£o h√° necessidade de pedidos nessa equipe; todos est√£o apenas em seus lugares e trabalhando em resposta ao que est√° acontecendo. <br><br>  Em vez de descrever todas as poss√≠veis consequ√™ncias de um evento (leia - para fazer certas muta√ß√µes), descrevemos todos os casos em que esse evento pode ocorrer, ou seja,  qual o valor que a c√©lula assumir√° com as altera√ß√µes em outras c√©lulas.  Em nosso pequeno exemplo at√© agora, descrevemos a c√©lula stationFrom e tr√™s situa√ß√µes que afetam seu valor.  Para um programador acostumado ao c√≥digo imperativo, essa abordagem pode parecer incomum (ou mesmo uma "muleta", uma "pervers√£o").  De fato, ele permite que voc√™ economize esfor√ßo devido √† brevidade (e estabilidade) do c√≥digo, como veremos na pr√°tica. <br><br>  E a assincronia?  √â poss√≠vel puxar a lista de esta√ß√µes propostas com ajax?  N√£o tem problema!  Em ess√™ncia, n√£o importa para o senhor se a fun√ß√£o retorna um valor ou uma promessa.  Quando mrr for retornado, ele aguardar√° sua resolu√ß√£o e enviar√° os dados recebidos para o fluxo. <br><br><pre> <code class="javascript hljs">stationFromOptions: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'/get_stations?str='</span></span> + str).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.toJSON()), <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>],</code> </pre><br>  Isso tamb√©m significa que voc√™ pode usar fun√ß√µes ass√≠ncronas como f√≥rmulas.  Casos mais complexos (tratamento de erros, status de promessa) ser√£o considerados posteriormente. <br><br>  A funcionalidade para escolher uma esta√ß√£o de partida est√° pronta.  N√£o faz sentido duplicar o mesmo para a esta√ß√£o de chegada, vale a pena coloc√°-lo em um componente separado que possa ser reutilizado.  Este ser√° um componente de entrada generalizado com preenchimento autom√°tico, portanto, renomearemos os campos e criaremos a fun√ß√£o para obter op√ß√µes adequadas definidas nos objetos. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> OptionsInput = withMrr(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">options</span></span>: [], }, <span class="hljs-attr"><span class="hljs-attr">val</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'valInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectOption'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'clear'</span></span>]], <span class="hljs-attr"><span class="hljs-attr">options</span></span>: [props.getOptions, <span class="hljs-string"><span class="hljs-string">'val'</span></span>], <span class="hljs-attr"><span class="hljs-attr">optionsShown</span></span>: [<span class="hljs-string"><span class="hljs-string">'toggle'</span></span>, <span class="hljs-string"><span class="hljs-string">'valInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectOption'</span></span>], }), (state, props, $) =&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">valInput</span></span></span></span><span class="xml"><span class="hljs-tag">') } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state.val</span></span></span></span><span class="xml"><span class="hljs-tag"> } /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.optionsShown &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"options"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.options.map(s =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">selectOption</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">s</span></span></span></span><span class="xml"><span class="hljs-tag">) }&gt;</span></span></span><span class="xml">{ s }</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">) } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } { state.val &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"clear"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">clear</span></span></span></span><span class="xml"><span class="hljs-tag">') }&gt;</span></span></span><span class="xml"> X </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">)</span></span></code> </pre><br>  Como voc√™ pode ver, voc√™ pode especificar a estrutura das c√©lulas mrr como uma fun√ß√£o do componente props (no entanto, ele ser√° executado apenas uma vez ap√≥s a inicializa√ß√£o e n√£o responder√° a altera√ß√µes nos props). <br><br><h3>  Comunica√ß√£o entre componentes </h3><br>  Agora conecte esse componente no componente pai e veja como o mrr permite que componentes relacionados troquem dados. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getMatchedStations = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'/get_stations?str='</span></span> + str).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.toJSON()); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">stationTo</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationFrom/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stationFrom</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationTo/val'</span></span>, }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (&lt;div&gt; &lt;OptionsInput { ...connectAs('selectStationFrom') } getOptions={ getMatchedStations } /&gt; - &lt;OptionsInput { ...connectAs('selectStationTo') } getOptions={ getMatchedStations } /&gt; &lt;input type="date" onChange={ $('date') } /&gt; &lt;button onClick={ $('searchTrains') }&gt;&lt;/button&gt; &lt;/div&gt;); });</code> </pre><br>  Para associar um componente pai a um componente filho, devemos passar par√¢metros para ele usando a fun√ß√£o <b>connectAs</b> (quarto argumento da fun√ß√£o render).  Nesse caso, indicamos o nome que queremos dar ao componente filho.  Ao anexar um componente dessa maneira, com esse nome, podemos acessar suas c√©lulas.  Nesse caso, estamos ouvindo c√©lulas val.  O inverso tamb√©m √© poss√≠vel - escute o componente filho da c√©lula pai. <br><br>  Como voc√™ pode ver, aqui o srr segue uma abordagem declarativa: nenhum retorno de chamada onChange √© necess√°rio, basta especificar um nome para o componente filho na fun√ß√£o connectAs, ap√≥s o qual obtemos acesso √†s c√©lulas!  Nesse caso, novamente devido √† declaratividade, n√£o h√° amea√ßa de interfer√™ncia no trabalho de outro componente - n√£o temos a capacidade de "mudar" nada, alterar, podemos apenas "ouvir" os dados. <br><br><h3>  Sinais e Valores </h3><br>  A pr√≥xima etapa √© a busca de trens adequados para os par√¢metros selecionados.  Na abordagem imperativa, provavelmente escrever√≠amos um determinado processador para enviar o formul√°rio onSubmit, o que iniciaria a√ß√µes adicionais - uma solicita√ß√£o ajax e exibi√ß√£o dos resultados.  Mas, como voc√™ se lembra, n√£o podemos "pedir" nada!  S√≥ podemos criar outro conjunto de c√©lulas derivadas das c√©lulas do formul√°rio.  Vamos escrever mais uma solicita√ß√£o. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getTrains = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params">, to, date</span></span></span><span class="hljs-function">) =&gt;</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'/get_trains?from='</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> + <span class="hljs-string"><span class="hljs-string">'&amp;to='</span></span> + to + <span class="hljs-string"><span class="hljs-string">'&amp;date='</span></span> + date).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.toJSON()); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">stationFrom</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationFrom/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stationTo</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationTo/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">results</span></span>: [getTrains, <span class="hljs-string"><span class="hljs-string">'stationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationTo'</span></span>, <span class="hljs-string"><span class="hljs-string">'date'</span></span>, <span class="hljs-string"><span class="hljs-string">'searchTrains'</span></span>], }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (&lt;div&gt; &lt;OptionsInput { ...connectAs('selectStationFrom') } getOptions={ getMatchedStations } /&gt; - &lt;OptionsInput { ...connectAs('selectStationTo') } getOptions={ getMatchedStations } /&gt; &lt;input type="date" onChange={ $('date') } /&gt; &lt;button onClick={ $('searchTrains') }&gt;&lt;/button&gt; &lt;/div&gt;); });</code> </pre><br>  No entanto, esse c√≥digo n√£o funcionar√° conforme o esperado.  O c√°lculo (rec√°lculo do valor da c√©lula) √© iniciado quando qualquer um dos argumentos muda, portanto, a solicita√ß√£o ser√° enviada, por exemplo, imediatamente ap√≥s a sele√ß√£o da primeira esta√ß√£o, e n√£o apenas clicando em "Pesquisar".  Precisamos, por um lado, que as esta√ß√µes e a data sejam passadas para os argumentos da f√≥rmula, mas, por outro lado, n√£o respondam √† sua mudan√ßa.  No sr., Existe um mecanismo elegante para isso chamado de escuta passiva. <br><br><pre> <code class="javascript hljs"> results: [getTrains, <span class="hljs-string"><span class="hljs-string">'-stationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'-stationTo'</span></span>, <span class="hljs-string"><span class="hljs-string">'-date'</span></span>, <span class="hljs-string"><span class="hljs-string">'searchTrains'</span></span>],</code> </pre><br>  Basta adicionar um sinal de menos na frente do nome da c√©lula e pronto!  Agora, os <b>resultados</b> responder√£o apenas √†s altera√ß√µes na c√©lula <b>searchTrains</b> . <br><br>  Nesse caso, a c√©lula <b>searchTrains</b> atua como um "sinal de c√©lula" e as c√©lulas da <b>esta√ß√£oFrom</b> e outras como "valores de c√©lula".  Para uma c√©lula de sinal, apenas o momento em que os valores ‚Äúfluem‚Äù atrav√©s dela √© importante e que tipo de dados ser√£o - de qualquer maneira: pode ser apenas verdadeiro, ‚Äú1‚Äù ou qualquer outra coisa (no nosso caso, esses ser√£o objetos de evento DOM )  Para uma c√©lula de valor, √© seu valor que √© importante, mas, ao mesmo tempo, os momentos de sua mudan√ßa n√£o s√£o significativos.  Esses dois tipos de c√©lulas n√£o s√£o mutuamente exclusivos: muitas c√©lulas s√£o sinais e valores.  No n√≠vel de sintaxe em mrr, esses dois tipos de c√©lulas n√£o diferem de forma alguma, mas o entendimento conceitual de tal diferen√ßa √© muito importante ao escrever c√≥digo reativo. <br><br><h3>  Dividindo fluxos </h3><br>  Uma solicita√ß√£o para procurar assentos no trem pode levar algum tempo; portanto, devemos mostrar ao carregador e tamb√©m responder em caso de erro.  J√° existem poucas promessas para essa abordagem padr√£o com a resolu√ß√£o autom√°tica. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">results</span></span>: {}, } stationFrom: <span class="hljs-string"><span class="hljs-string">'selectStationFrom/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stationTo</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationTo/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">searchQuery</span></span>: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params">, to, date</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to, date }), <span class="hljs-string"><span class="hljs-string">'-stationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'-stationTo'</span></span>, <span class="hljs-string"><span class="hljs-string">'-date'</span></span>, <span class="hljs-string"><span class="hljs-string">'searchTrains'</span></span>], <span class="hljs-attr"><span class="hljs-attr">results</span></span>: [<span class="hljs-string"><span class="hljs-string">'nested'</span></span>, (cb, query) =&gt; { cb({ <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }); getTrains(query.from, query.to, query.date) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'data'</span></span>, res)) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, err)) .finally(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'loading'</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)) }, <span class="hljs-string"><span class="hljs-string">'searchQuery'</span></span>], <span class="hljs-attr"><span class="hljs-attr">availableTrains</span></span>: <span class="hljs-string"><span class="hljs-string">'results.data'</span></span>, }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;div&gt; &lt;div&gt; &lt;OptionsInput { ...connectAs(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationFrom'</span></span></span></span></span><span class="hljs-function">) } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOptions</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getMatchedStations</span></span></span><span class="hljs-function"> } /&gt; - &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OptionsInput</span></span></span><span class="hljs-function"> { ...</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">connectAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationTo'</span></span></span></span></span><span class="hljs-function">) } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOptions</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getMatchedStations</span></span></span><span class="hljs-function"> } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">date</span></span></span><span class="hljs-function">" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onChange</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'date'</span></span></span></span></span><span class="hljs-function">) } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onClick</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'searchTrains'</span></span></span></span></span><span class="hljs-function">) }&gt;&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function">"&gt;...&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; } { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">"&gt; . ,  .   .&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; } { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">availableTrains</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">"&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">availableTrains</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(train</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;div /&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; } &lt;/</span></span>div&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>); });</code> </pre><br>  O operador <b>aninhado</b> permite ‚Äúdecompor‚Äù os dados em subc√©lulas; para isso, o primeiro argumento da f√≥rmula √© o retorno de chamada, com o qual voc√™ pode ‚Äúenviar‚Äù os dados para a subc√©lula (uma ou mais).  Agora, temos fluxos separados que s√£o respons√°veis ‚Äã‚Äãpelo erro, pelo status da promessa e pelos dados recebidos.  O operador aninhado √© uma ferramenta muito poderosa e um dos poucos imperativos em mrr (n√≥s mesmos especificamos em quais c√©lulas colocar os dados).  Enquanto o operador de mesclagem mescla v√°rios threads em um, aninhado divide o thread em v√°rios sub-threads, sendo assim o oposto. <br><br>  O exemplo acima √© uma maneira padr√£o de trabalhar com promessas, em mrr √© generalizado como um operador de promessa e permite que voc√™ reduza o c√≥digo: <br><br><pre> <code class="javascript hljs"> results: [<span class="hljs-string"><span class="hljs-string">'promise'</span></span>, (query) =&gt; getTrains(query.from, query.to, query.date), <span class="hljs-string"><span class="hljs-string">'searchQuery'</span></span>], <span class="hljs-comment"><span class="hljs-comment">//     availableTrains: 'results.data',</span></span></code> </pre><br>  Al√©m disso, o operador da promessa garante que apenas os resultados da promessa mais recente sejam usados. <br><br><img src="https://habrastorage.org/webt/in/ew/2d/inew2diajzwvzh6lzcie3saledw.gif"><br><br>  Componente para exibir os assentos dispon√≠veis (por simplicidade, recusaremos os diferentes tipos de carros) <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TrainSeats = withMrr({ <span class="hljs-attr"><span class="hljs-attr">selectSeats</span></span>: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seatsNumber, { id }</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(seatsNumber)).fill(<span class="hljs-literal"><span class="hljs-literal">true</span></span>).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">trainId</span></span>: id })), <span class="hljs-string"><span class="hljs-string">'-seatsNumber'</span></span>, <span class="hljs-string"><span class="hljs-string">'-$props'</span></span>, <span class="hljs-string"><span class="hljs-string">'select'</span></span>], <span class="hljs-attr"><span class="hljs-attr">seatsNumber</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'selectSeats'</span></span>], }, (state, props, $) =&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"train"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  ‚Ññ{ props.num } { props.from } - { props.to }.   : { props.seats || 0 } { props.seats &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">seatsNumber</span></span></span></span><span class="xml"><span class="hljs-tag">') } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state.seatsNumber</span></span></span></span><span class="xml"><span class="hljs-tag"> || </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">max</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.seats</span></span></span></span><span class="xml"><span class="hljs-tag"> } /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span></span><span class="xml"><span class="hljs-tag">') }&gt;</span></span></span><span class="xml"></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">);</span></span></code> </pre><br>  Para acessar adere√ßos em uma f√≥rmula, voc√™ pode se inscrever na caixa especial $ props. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ ... selectedSeats: <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>, }, (state, props, $, connectAs) =&gt; { ... &lt;div className=<span class="hljs-string"><span class="hljs-string">"results"</span></span>&gt; { state.availableTrains.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">train, i</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;TrainSeats key={i} {...train} {...connectAs(<span class="hljs-string"><span class="hljs-string">'train'</span></span> + i)}/&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; }</span></span></code> </pre><br>  Novamente, usamos a audi√ß√£o passiva para selecionar o n√∫mero de lugares selecionados quando voc√™ clica no bot√£o "Selecionar".  Associamos cada componente filho ao pai usando a fun√ß√£o connectAs.  O usu√°rio pode selecionar assentos em qualquer um dos trens propostos, por isso ouvimos as altera√ß√µes em todos os componentes filhos usando a m√°scara "*". <br><br>  Mas aqui est√° o problema: o usu√°rio pode adicionar assentos primeiro em um trem, depois em outro, para que os novos dados triturem os anteriores.  Como "acumular" dados de fluxo?  Para fazer isso, existe um operador de <b>fechamento</b> , que, juntamente com aninhado e funil, forma a base do sr. (Todos os outros nada mais s√£o do que a√ß√∫car sint√°tico com base nesses tr√™s). <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-string"><span class="hljs-string">'closure'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> seats = []; <span class="hljs-comment"><span class="hljs-comment">//     return selectedSeats =&gt; { seats = [...seats, selectedSeats]; return seats; } }, '*/selectSeats'],</span></span></code> </pre><br>  Ao usar o <b>fechamento</b> primeiro (em componentDidMount), √© criado um fechamento que retorna a f√≥rmula.  Ela, portanto, tem acesso a vari√°veis ‚Äã‚Äãde fechamento.  Isso permite que voc√™ salve dados entre as chamadas de maneira segura - sem cair no abismo das vari√°veis ‚Äã‚Äãglobais e do estado mut√°vel compartilhado.  Assim, o fechamento permite implementar a funcionalidade dos operadores Rx, como varredura e outros.  No entanto, esse m√©todo √© bom para casos dif√≠ceis.  Se precisarmos salvar apenas o valor de uma vari√°vel, podemos simplesmente usar o link para o valor anterior da c√©lula usando o nome especial "^": <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> [...seats, ...prev], <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>, <span class="hljs-string"><span class="hljs-string">'^'</span></span>]</code> </pre><br>  Agora, o usu√°rio deve inserir um nome e sobrenome para cada ticket selecionado. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SeatDetails = withMrr({}, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;div&gt; { props.trainId } &lt;input name=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"name"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value={ props.name } onChange={ $(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'setDetails'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, e =&gt; [</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'name'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, e.target.value, props.i]</span></span></span><span class="hljs-function">) } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">surname</span></span></span><span class="hljs-function">" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">surname</span></span></span><span class="hljs-function"> } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onChange</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'setDetails'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, e =&gt; [</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'surname'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, e.target.value, props.i]</span></span></span><span class="hljs-function">) }/&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">href</span></span></span><span class="hljs-function">="#" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onClick</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'removeSeat'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, props.i</span></span></span><span class="hljs-function">) }&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">X</span></span></span><span class="hljs-function">&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt;); }) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Tickets</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">withMrr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ $init: { results: {}, selectedSeats: [], } stationFrom: </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationFrom/val'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, stationTo: </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationTo/val'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, searchQuery: [(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params">, to, date</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to, date }), <span class="hljs-string"><span class="hljs-string">'-stationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'-stationTo'</span></span>, <span class="hljs-string"><span class="hljs-string">'-date'</span></span>, <span class="hljs-string"><span class="hljs-string">'searchTrains'</span></span>], <span class="hljs-attr"><span class="hljs-attr">results</span></span>: [<span class="hljs-string"><span class="hljs-string">'promise'</span></span>, (query) =&gt; getTrains(query.from, query.to, query.date), <span class="hljs-string"><span class="hljs-string">'searchQuery'</span></span>], <span class="hljs-attr"><span class="hljs-attr">availableTrains</span></span>: <span class="hljs-string"><span class="hljs-string">'results.data'</span></span>, <span class="hljs-attr"><span class="hljs-attr">selectedSeats</span></span>: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> [...seats, ...prev], <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>, <span class="hljs-string"><span class="hljs-string">'^'</span></span>] }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;div&gt; &lt;div&gt; &lt;OptionsInput { ...connectAs(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationFrom'</span></span></span></span></span><span class="hljs-function">) } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOptions</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getMatchedStations</span></span></span><span class="hljs-function"> } /&gt; - &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OptionsInput</span></span></span><span class="hljs-function"> { ...</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">connectAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationTo'</span></span></span></span></span><span class="hljs-function">) } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOptions</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getMatchedStations</span></span></span><span class="hljs-function"> } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">date</span></span></span><span class="hljs-function">" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onChange</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'date'</span></span></span></span></span><span class="hljs-function">) } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onClick</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'searchTrains'</span></span></span></span></span><span class="hljs-function">) }&gt;&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function">"&gt;...&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; } { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">"&gt; . ,  .   .&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; } { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">availableTrains</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">"&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">availableTrains</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(train, i</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;TrainSeats key={i} {...train} {...connectAs(<span class="hljs-string"><span class="hljs-string">'train'</span></span> + i)}/&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; } { state.selectedSeats.map((seat, i) =&gt; &lt;SeatDetails key={i} i={i} { ...seat } {...connectAs('seat' + i)}/</span></span>&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; &lt;/</span></span>div&gt;); });</code> </pre><br>  A c√©lula <b>selectedSeats</b> cont√©m uma matriz de locais selecionados.  √Ä medida que o usu√°rio digita o nome e o sobrenome de cada ticket, devemos alterar os dados nos elementos correspondentes da matriz. <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, details, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ??? }, '*/selectSeats', '*/setDetails', '^']</span></span></code> </pre><br>  A abordagem padr√£o n√£o √© adequada para n√≥s: na f√≥rmula, precisamos saber qual c√©lula mudou e responder de acordo.  Uma das formas do operador de mesclagem nos ajudar√°. <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, { <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [...prev, ...seats]; }, <span class="hljs-string"><span class="hljs-string">'*/setDetails'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[field, value, i], prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { prev[i][field] = value; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }, <span class="hljs-string"><span class="hljs-string">'*/removeSeat'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { prev.splice(i, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }, }, <span class="hljs-string"><span class="hljs-string">'^'</span></span><span class="hljs-comment"><span class="hljs-comment">/*,       */</span></span>],</code> </pre><br>  √â um pouco como redutores Redux, mas com sintaxe mais flex√≠vel e poderosa.  E voc√™ n√£o pode ter medo de alterar a matriz, porque apenas a f√≥rmula de uma c√©lula tem controle sobre ela, respectivamente, altera√ß√µes paralelas s√£o exclu√≠das (mas a modifica√ß√£o de matrizes que s√£o passadas como argumentos certamente n√£o vale a pena). <br><br><h3>  Cole√ß√µes reativas </h3><br>  O padr√£o quando a c√©lula armazena e altera a matriz √© muito comum.  Todas as opera√ß√µes com a matriz s√£o de tr√™s tipos: inserir, modificar, excluir.  Para descrever isso, existe um elegante operador de <b>coll</b> .  Use-o para simplificar o c√°lculo dos bancos <b>selecionados</b> . <br><br>  Foi: <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, { <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [...prev, ...seats]; }, <span class="hljs-string"><span class="hljs-string">'*/setDetails'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[field, value, i], prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { prev[i][field] = value; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }, <span class="hljs-string"><span class="hljs-string">'*/removeSeat'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { prev.splice(i, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }, <span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> [], }, <span class="hljs-string"><span class="hljs-string">'^'</span></span>]</code> </pre><br>  tornou-se: <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-string"><span class="hljs-string">'coll'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>, <span class="hljs-attr"><span class="hljs-attr">update</span></span>: <span class="hljs-string"><span class="hljs-string">'*/setDetails'</span></span>, <span class="hljs-attr"><span class="hljs-attr">delete</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'*/removeSeat'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({}), <span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>]] }]</code> </pre><br>  no entanto, o formato dos dados no fluxo setDetails precisa ser alterado um pouco: <br><br><pre> <code class="javascript hljs"> &lt;input name=<span class="hljs-string"><span class="hljs-string">"name"</span></span> onChange={ $(<span class="hljs-string"><span class="hljs-string">'setDetails'</span></span>, e =&gt; [{ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: e.target.value }, props.i]) } /&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"surname"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">setDetails</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">e</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> [{ surname: e.target.value }, props.i]) }/&gt;</span></span></code> </pre><br>  Usando o operador <b>coll</b> , descrevemos tr√™s threads que afetar√£o nossa matriz.  Nesse caso, o fluxo de <b>cria√ß√£o</b> deve conter os pr√≥prios elementos, que devem ser adicionados √† matriz (geralmente objetos).  O fluxo de <b>exclus√£o</b> aceita os √≠ndices dos elementos a serem exclu√≠dos (ambos em '* / removeSeat') e as m√°scaras.  A m√°scara {} excluir√° todos os elementos e, por exemplo, a m√°scara {name: 'Carl'} excluir√° todos os elementos com o nome Carl.  O fluxo de <b>atualiza√ß√£o</b> aceita pares de valores: a altera√ß√£o que precisa ser feita com o elemento (m√°scara ou fun√ß√£o) e o √≠ndice ou m√°scara dos elementos que precisam ser alterados.  Por exemplo, [{sobrenome: 'Johnson'}, {}] definir√° o sobrenome Johnson para todos os elementos da matriz. <br><br>  O operador coll usa algo como uma linguagem de consulta interna, facilitando o trabalho com cole√ß√µes e tornando-a mais declarativa. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O c√≥digo completo da</a> nossa aplica√ß√£o no JsFiddle. <br><br>  N√≥s nos familiarizamos com quase todas as funcionalidades b√°sicas necess√°rias do srr.  Um t√≥pico bastante significativo que permaneceu no mar √© o gerenciamento de patrim√¥nio global, que pode ser discutido em artigos futuros.  Mas agora voc√™ pode come√ßar a usar o mrr para gerenciar o estado dentro de um componente ou grupo de componentes relacionados. <br><br><h3>  Conclus√µes </h3><br><h4>  Qual √© o poder do srr? </h4><br>  O mrr permite que voc√™ escreva aplicativos no React com um estilo reativo funcional (o mrr pode ser descriptografado como Tornar o React Reactivo).  mrr √© muito expressivo - voc√™ gasta menos tempo escrevendo linhas de c√≥digo. <br><br>  O srr fornece um pequeno conjunto de abstra√ß√µes b√°sicas, o suficiente para todos os casos - este artigo descreve quase todos os principais recursos e t√©cnicas do srr.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tamb√©m existem ferramentas para expandir esse conjunto b√°sico (a capacidade de criar operadores personalizados). </font><font style="vertical-align: inherit;">Voc√™ pode escrever um c√≥digo declarativo bonito sem ler centenas de p√°ginas do manual e sem sequer estudar as profundezas te√≥ricas da programa√ß√£o funcional - √© improv√°vel que voc√™ precise usar, digamos, m√¥nadas, porque </font><font style="vertical-align: inherit;">O pr√≥prio srr √© uma m√¥nada gigante que separa a computa√ß√£o pura das muta√ß√µes de estado.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enquanto em outras bibliotecas coexistem abordagens heterog√™neas (imperativas usando m√©todos e declarativas usando ligantes reativos), das quais o programador mistura aleatoriamente ‚Äúsalada‚Äù, no sr. Existe uma √∫nica ess√™ncia b√°sica - um fluxo, que contribui para a homogeneidade e uniformidade do c√≥digo. </font><font style="vertical-align: inherit;">Conforto, conveni√™ncia, simplicidade, economizar o tempo de um programador s√£o as principais vantagens do srr (a partir daqui √© outra decodifica√ß√£o do srr como "srrrr", ou seja, ronronar um gato que est√° satisfeito com a vida de um gato).</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quais s√£o as desvantagens? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programar com "linhas" tem suas vantagens e desvantagens. </font><font style="vertical-align: inherit;">Voc√™ n√£o poder√° preencher automaticamente o nome da c√©lula, nem procurar o local onde est√° definido. </font><font style="vertical-align: inherit;">Por outro lado, em mrr sempre existe um e apenas um local em que o comportamento da c√©lula √© determinado, e √© f√°cil encontr√°-lo com uma simples pesquisa de texto, enquanto procura o local em que o valor do campo Redux da loja √© determinado, ou ainda menos o campo state ao usar o setState nativo pode demorar mais.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quem poderia estar interessado nisso? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de tudo, os adeptos da programa√ß√£o funcional s√£o pessoas para quem a vantagem de uma abordagem declarativa √© √≥bvia. </font><font style="vertical-align: inherit;">Obviamente, as solu√ß√µes kosher do ClojureScript j√° existem, mas ainda assim continuam sendo um produto de nicho, enquanto o React domina a bola. </font><font style="vertical-align: inherit;">Se o seu projeto j√° usa o Redux, voc√™ pode come√ßar a usar o mrr para gerenciar o estado local e, no futuro, mudar para o global. </font><font style="vertical-align: inherit;">Mesmo se voc√™ n√£o planeja usar novas tecnologias no momento, pode lidar com o sr. Para "esticar seu c√©rebro", examinando tarefas familiares sob uma nova luz, porque o sr. √â significativamente diferente das bibliotecas de gerenciamento de estado comuns.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Isso j√° pode ser usado? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em princ√≠pio, sim :) A biblioteca √© jovem, at√© agora foi ativamente usada em v√°rios projetos, mas a API da funcionalidade b√°sica j√° foi estabelecida, agora o trabalho est√° sendo realizado principalmente em diferentes lo√ß√µes (a√ß√∫car sint√°tico), projetadas para acelerar e facilitar o desenvolvimento. </font><font style="vertical-align: inherit;">A prop√≥sito, nos princ√≠pios de mrr n√£o h√° nada espec√≠fico para o React, ele pode ser adaptado para uso com qualquer biblioteca de componentes (o React foi escolhido devido √† falta de reatividade interna ou a uma biblioteca geralmente aceita para isso). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obrigado por sua aten√ß√£o, serei grato pelo feedback e cr√≠ticas construtivas!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt428870/">https://habr.com/ru/post/pt428870/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt428858/index.html">Confer√™ncia DEFCON 17. Ria dos seus v√≠rus! Parte 1</a></li>
<li><a href="../pt428860/index.html">Confer√™ncia DEFCON 17. Ria dos seus v√≠rus! Parte 2</a></li>
<li><a href="../pt428864/index.html">Vamos tornar a web √≥tima novamente</a></li>
<li><a href="../pt428866/index.html">7 princ√≠pios de design, atitude em rela√ß√£o √†s tend√™ncias de design, portf√≥lio de designers UX, ...</a></li>
<li><a href="../pt428868/index.html">JARs de v√°rias vers√µes - Ruim ou Bom?</a></li>
<li><a href="../pt428872/index.html">A hist√≥ria de um olho e 20 opera√ß√µes (n√£o lidas para impress√£o) ou ele queria ser um piloto, mas ele n√£o era permitido no c√©u</a></li>
<li><a href="../pt428876/index.html">N√£o h√° como voltar atr√°s: a experi√™ncia pessoal do testador</a></li>
<li><a href="../pt428878/index.html">Voo de porco ou otimiza√ß√£o de int√©rpretes de bytecode</a></li>
<li><a href="../pt428880/index.html">Novos m√©todos de autentica√ß√£o - uma amea√ßa √† privacidade?</a></li>
<li><a href="../pt428882/index.html">Mobile Yandex Blitz: analisamos tarefas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>