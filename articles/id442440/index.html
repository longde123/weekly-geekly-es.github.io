<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📲 💪🏽 🥦 Membuat Aplikasi Android Menggunakan Anko Layouts dan Anko Coroutines 🕣 👨‍🏫 🧘🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sekitar setahun yang lalu, saya mulai menggunakan Kotlin di proyek Android saya. Saya ingin mencoba sesuatu yang baru yang menarik untuk dipelajari. L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat Aplikasi Android Menggunakan Anko Layouts dan Anko Coroutines</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442440/"><p><img src="https://cdn-images-1.medium.com/max/1500/1*TYtiKJzWtdHZhq9TdIEICA.png" alt="gambar"></p><br><p>  Sekitar setahun yang lalu, saya mulai menggunakan Kotlin di proyek Android saya.  Saya ingin mencoba sesuatu yang baru yang menarik untuk dipelajari.  Lalu aku menemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anko</a> .  Pada saat itu, menulis UI dalam xml cukup membosankan.  Saya selalu suka menulis antarmuka dengan tangan saya, tanpa menggunakan WYSIWYG dan markup xml yang digunakan di Android Studio.  Satu-satunya negatif adalah bahwa Anda harus me-restart aplikasi untuk memeriksa perubahan apa pun.  Anda dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">plugin</a> yang menunjukkan seperti apa tampilan ui tanpa meluncurkan aplikasi, tetapi menurut saya agak aneh.  Ia juga memiliki kemampuan keren untuk mengonversi xml ke Anko Layouts DSL. </p><br><p>  Kelemahan terbesar dari perpustakaan adalah kurangnya dokumentasi yang lengkap.  Untuk mengetahui cara menggunakannya dengan benar, saya sering harus melihat ke sumbernya.  Pada artikel ini, pengembangan aplikasi menggunakan Anko Layouts dan Anko Coroutines akan dibahas secara rinci. </p><a name="habracut"></a><br><p>  Perpustakaan Anko sendiri dibagi menjadi 4 bagian independen: </p><br><ul><li>  Tata Letak Anko - membangun UI. </li><li>  Anko Commons - Alat dan fitur yang berguna. </li><li>  Anko SQLite - bekerja dengan basis data SQLite. </li><li>  Anko Coroutine adalah alat yang berguna untuk bekerja dengan coroutine. </li></ul><br><p>  Untuk menambahkan perpustakaan ke proyek, cukup tambahkan satu baris tergantung pada proyek: </p><br><p><code>implementation "org.jetbrains.anko:anko:$anko_version"</code> </p> <br><p>  di mana <code>anko_version</code> adalah versi perpustakaan saat ini, terdaftar dalam file build.gradle di tingkat proyek: </p><br><p> <code>ext.anko_version='0.10.8'</code> </p> <br><h2 id="anko-layouts">  Tata letak Anko </h2><br><p>  Layout Anko memungkinkan Anda untuk mengembangkan aplikasi Android UI lebih efisien daripada menggunakan Java. </p><br><p>  Pemain utama di lapangan adalah <a href=""><code>AnkoComponent&lt;T&gt;</code></a> dengan metode createView tunggal yang menerima <a href=""><code>AnkoContext&lt;T&gt;</code></a> dan mengembalikan Tampilan.  Dalam metode ini seluruh UI dibuat.  <a href=""><code>AnkoContext&lt;T&gt;</code></a> adalah pembungkus di atas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ViewManager</a> .  Lebih banyak tentang itu nanti. </p><br><p>  Memiliki sedikit pemahaman tentang cara kerja <a href=""><code>AnkoComponent&lt;T&gt;</code></a> , mari mencoba membuat UI sederhana di kelas Aktivitas kami.  Perlu diperjelas bahwa ejaan "langsung" dari UI hanya mungkin di Activity, karena fungsi ekstensi terpisah <a href="">ankoView</a> ditulis untuk itu, di mana metode <a href="">addView dipanggil</a> , dan <a href=""><code>AnkoContextImpl&lt;T&gt;</code></a> dibuat dalam metode itu sendiri dengan <code>setContentView = true</code> parameter. </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppCompatActivity</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) verticalLayout { lparams(matchParent, matchParent) gravity = Gravity.CENTER textView(<span class="hljs-string"><span class="hljs-string">"Cool Anko TextView"</span></span>) { gravity = Gravity.CENTER } } }</code> </pre> <br><p>  Jelas, untuk sesuatu yang lebih dari satu TextView, metode onCreate akan dengan cepat berubah menjadi dump.  Mari kita coba memisahkan kelas Activity dari UI.  Untuk melakukan ini, buat kelas lain yang akan dijelaskan. </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppActivityUi</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AnkoComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppActivity</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ui: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AnkoContext</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AppActivity</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span>: View = with(ui) { verticalLayout { lparams(matchParent, matchParent) gravity = Gravity.CENTER textView(<span class="hljs-string"><span class="hljs-string">"Cool Anko TextView"</span></span>) { gravity = Gravity.CENTER } } } }</code> </pre> <br><p>  Sekarang, untuk meneruskan UI kami ke Aktivitas kami, <a href="">Anda dapat menggunakan</a> </p><br><pre> <code class="kotlin hljs">AppActivityUi().setContentView(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre> <br><p>  Oke, tetapi bagaimana jika kita ingin membuat UI untuk fragmen?  Untuk melakukan ini, Anda dapat menggunakan metode createView secara langsung dengan memanggilnya dari metode fragmen onCreateView.  Ini terlihat seperti ini: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppFragment</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fragment</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(inflater: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LayoutInflater</span></span></span></span><span class="hljs-function"><span class="hljs-params">, container: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ViewGroup</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: View { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> AppFragmentUi().createView(AnkoContext.create(requireContext(), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) } }</code> </pre> <br><p>  Seperti yang telah disebutkan - <a href=""><code>AnkoContext&lt;T&gt;</code></a> adalah pembungkus di atas ViewManager.  Objek pendampingnya memiliki tiga metode utama yang mengembalikan <a href=""><code>AnkoContext&lt;T&gt;</code></a> .  Kami akan menganalisisnya secara lebih rinci. </p><br><h3 id="create">  buat </h3><br><pre> <code class="kotlin hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">&lt;T&gt;</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ctx: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Context</span></span></span></span><span class="hljs-function"><span class="hljs-params">, owner: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">T</span></span></span></span><span class="hljs-function"><span class="hljs-params">, setContentView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: AnkoContext&lt;T&gt;</code> </pre> <br><p>  dan saudara kembarnya </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ctx: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Context</span></span></span></span><span class="hljs-function"><span class="hljs-params">, setContentView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: AnkoContext&lt;Context&gt;</code> </pre> <br><p>  kembalikan <a href=""><code>AnkoContextImpl&lt;T&gt;</code></a> . </p><br><p>  Metode digunakan dalam semua kasus standar, seperti, misalnya, dalam contoh sebelumnya dengan Aktivitas dan Fragmen.  Yang paling menarik di sini adalah opsi pemilik dan setContentView.  Yang pertama memungkinkan Anda untuk mengirimkan Fragmen, Aktivitas, atau sesuatu yang lain ke metode instance createView. </p><br><pre> <code class="kotlin hljs">MyComponent().createView(AnkoContext.create(context, myVew)) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyComponent</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AnkoComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ui: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AnkoContext</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">View</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span>: View = with(ui) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myView: View= ui.owner <span class="hljs-comment"><span class="hljs-comment">//     } }</span></span></code> </pre> <br><p>  Parameter kedua - setContentView - akan secara otomatis mencoba menambahkan tampilan yang dihasilkan jika Konteks <a href="">adalah turunan dari Activity atau ContextWrapper</a> .  Jika dia tidak berhasil, dia akan melempar IllegalStateException. </p><br><h3 id="createdelegate">  buatDelegasikan </h3><br><p>  Metode ini bisa sangat berguna, tetapi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi resmi tentang gihab</a> tidak mengatakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">apa</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">apa</a> tentang itu.  Saya menemukannya di sumber ketika saya memecahkan masalah kembung kelas UI: </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">&lt;T: ViewGroup&gt;</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDelegate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(owner: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">T</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: AnkoContext&lt;T&gt; = DelegatingAnkoContext(owner)</code> </pre> <br><p>  Ini memungkinkan Anda untuk menambahkan hasil komponen createView ke pemilik. </p><br><p>  Pertimbangkan penggunaannya sebagai contoh.  Misalkan kita memiliki kelas besar yang menggambarkan salah satu layar aplikasi - AppFragmentUi. </p><br><pre> <code class="kotlin hljs">verticalLayout { relativeLayout { id = R.id.toolbar <span class="hljs-comment"><span class="hljs-comment">//    view } relativeLayout{ id = R.id.content //     view } }</span></span></code> </pre> <br><p>  Secara logis, itu dapat dibagi menjadi dua bagian - toolbar dan konten, AppFragmentUiToolbar dan AppFragmentUiContent, masing-masing.  Maka AppFragmentUi kelas utama kami akan menjadi lebih sederhana: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppFragmentUi</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AnkoComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppFragment</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ui: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AnkoContext</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AppFragment</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span> = with(ui) { verticalLayout { AppFragmentUiToolbar().createView(AnkoContext.createDelegate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) AppFragmentUiContent().createView(AnkoContext.createDelegate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) } } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppFragmentUiToolbar</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AnkoComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">_LinearLayout</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ui: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AnkoContext</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">_LinearLayout</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span>: View = with(ui.owner) { relativeLayout { id = R.id.toolbar <span class="hljs-comment"><span class="hljs-comment">//   view } } }</span></span></code> </pre> <br><p>  Perhatikan bahwa bukan ui, tetapi ui.owner diteruskan ke dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>with</code></a> fungsi sebagai objek. <br>  Jadi, kami memiliki algoritma berikut: </p><br><ol><li>  Contoh komponen dibuat. </li><li>  Metode createView menciptakan View yang akan ditambahkan. </li><li>  Tampilan yang dihasilkan ditambahkan ke pemilik. </li></ol><br><p>  Perkiraan yang lebih dekat: <code>this.addView(AppFragmentUiToolbar().createView(...))</code> <br>  Seperti yang Anda lihat, opsi dengan createDelegate lebih mudah dibaca. </p><br><h3 id="createreusable">  buat dapat digunakan kembali </h3><br><p>  Sepertinya standar AnkoContext.create, tetapi dengan sedikit tambahan - tampilan terbaru dianggap sebagai tampilan root: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyComponent</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AnkoComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MyObject</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ui: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AnkoContext</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MyObject</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span>: View = with(ui) { textView(<span class="hljs-string"><span class="hljs-string">"Some text"</span></span>) <span class="hljs-comment"><span class="hljs-comment">//       IllegalStateException: View is already set //     "Another text" textView("Another text") } }</span></span></code> </pre> <br><p>  Dalam implementasi standar, jika tampilan root diatur, <a href="">upaya untuk mengatur tampilan kedua secara paralel akan menghasilkan pengecualian</a> . </p><br><p>  Metode createReusable mengembalikan kelas <a href="">ReusableAnkoContext</a> , yang diwarisi dari <a href="">AnkoContextImpl</a> dan mengganti metode yang <a href=""><code>alreadyHasView()</code></a> . </p><br><h3 id="customview">  Customview </h3><br><p>  Untungnya, Tata Letak Anko tidak terbatas pada fungsi ini.  Jika kami perlu menunjukkan CustomView kami sendiri, kami tidak perlu menulis </p><br><pre> <code class="kotlin hljs">verticalLayout { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> view = CustomView(context) <span class="hljs-comment"><span class="hljs-comment">//.... addView(view) //  addView(view.apply { ... }) }</span></span></code> </pre> <br><p>  Untuk melakukan ini, Anda dapat menambahkan pembungkus Anda sendiri, yang akan melakukan hal yang sama. </p><br><p>  Komponen utama di sini adalah metode ekstensi <a href=""><code>&lt;T: View&gt;ankoView(factory: (Context) -&gt; T, theme: Int, init: T.() -&gt; Unit)</code></a> dari ViewManager, Konteks atau Aktivitas. </p><br><ul><li>  factory - sebuah fungsi, ke input yang konteksnya dilewati dan tampilan dikembalikan.  Faktanya, itu adalah pabrik tempat pembuatan View berlangsung. </li><li>  tema adalah sumber daya gaya yang akan diterapkan pada tampilan saat ini. </li><li>  init adalah fungsi di mana parameter yang diperlukan akan ditetapkan untuk Tampilan yang dibuat. </li></ul><br><p>  Tambahkan implementasi Anda untuk CustomView kami </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> ViewManager.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">customView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(theme: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">init</span></span></span></span><span class="hljs-function"><span class="hljs-params">: (</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CustomView</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>.() -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>): CustomView { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ankoView({ CustomView(it) }, theme, <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>) }</code> </pre> <br><p>  Sekarang CustomView kami dibuat sangat sederhana: </p><br><pre> <code class="kotlin hljs">customView { id = R.id.customview <span class="hljs-comment"><span class="hljs-comment">//   }</span></span></code> </pre> <br><p>  Anda dapat menggunakan lparams untuk menerapkan LayoutParams ke View. </p><br><pre> <code class="kotlin hljs">textView(<span class="hljs-string"><span class="hljs-string">"text"</span></span>) { textSize = <span class="hljs-number"><span class="hljs-number">12f</span></span> }.lparams(width = matchParent, height = wrapContent) { centerInParent() }</code> </pre> <br><p>  Perlu dicatat bahwa ini tidak berlaku untuk semua View - semua metode lparams biasanya dinyatakan dalam pembungkus.  Misalnya, <a href="">_RelativeLayout</a> adalah pembungkus di atas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RelativeLayout</a> .  Dan untuk semua orang. </p><br><p>  Untungnya, beberapa pembungkus telah ditulis untuk Pustaka Dukungan Android, jadi Anda hanya dapat menyertakan dependensi dalam file gradle. </p><br><pre> <code class="plaintext hljs"> // Appcompat-v7 (Anko Layouts) implementation "org.jetbrains.anko:anko-appcompat-v7:$anko_version" implementation "org.jetbrains.anko:anko-coroutines:$anko_version" // CardView-v7 implementation "org.jetbrains.anko:anko-cardview-v7:$anko_version" // Design implementation "org.jetbrains.anko:anko-design:$anko_version" implementation "org.jetbrains.anko:anko-design-coroutines:$anko_version" // GridLayout-v7 implementation "org.jetbrains.anko:anko-gridlayout-v7:$anko_version" // Percent implementation "org.jetbrains.anko:anko-percent:$anko_version" // RecyclerView-v7 implementation "org.jetbrains.anko:anko-recyclerview-v7:$anko_version" implementation "org.jetbrains.anko:anko-recyclerview-v7-coroutines:$anko_version" // Support-v4 (Anko Layouts) implementation "org.jetbrains.anko:anko-support-v4:$anko_version" // ConstraintLayout implementation "org.jetbrains.anko:anko-constraint-layout:$anko_version"</code> </pre><br><p>  Antara lain, perpustakaan memungkinkan implementasi yang lebih nyaman dari berbagai pendengar.  Contoh kecil dari repositori: </p><br><pre> <code class="kotlin hljs">seekBar.setOnSeekBarChangeListener(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : OnSeekBarChangeListener { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onProgressChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(seekBar: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SeekBar</span></span></span></span><span class="hljs-function"><span class="hljs-params">, progress: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, fromUser: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStartTrackingTouch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(seekBar: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SeekBar</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> = <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStopTrackingTouch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(seekBar: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SeekBar</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> })</code> </pre> <br><p>  dan sekarang menggunakan Anko </p><br><pre> <code class="plaintext hljs">seekBar { onSeekBarChangeListener { onProgressChanged { seekBar, progress, fromUser -&gt; // do something } } }</code> </pre> <br><p>  Juga, beberapa pendengar mendukung coroutine: </p><br><pre> <code class="kotlin hljs"> verticalLayout{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anyCoroutineContext = GlobalScope.coroutineContext onClick(anyCoroutineContext) { <span class="hljs-comment"><span class="hljs-comment">//this: CoroutineScope } }</span></span></code> </pre> <br><h2 id="anko-coroutines">  Anko coroutine </h2><br><p>  Untuk mentransfer objek sensitif kebocoran memori dengan aman, metode <code>asReference</code> .  Ini didasarkan pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WeakReference</a> dan mengembalikan objek <a href="">Ref.</a> <br></p><pre> <code class="kotlin hljs">verticalLayout{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activity = ui.owner <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityReference: Ref&lt;AppActivity&gt; = activity.asReference() onClick(anyCoroutineContext) { ref().doSomething() } }</code> </pre> <br><p>  Misalkan Anda ingin menambahkan dukungan untuk corutin di ViewPager.OnPageChangeListener standar.  Mari kita buat sekeren contoh seekbar. <br>  Pertama, buat kelas terpisah dan mewarisi dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ViewPager.OnPageChangeListener</a> . </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CoroutineOnPageChangeListener</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> coroutineContext: CoroutineContext = Dispatchers.Main ) : ViewPager.OnPageChangeListener { }</code> </pre> <br><p>  Kami akan menyimpan lambdas dalam variabel yang akan dipanggil oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ViewPager.OnPageChangeListener</a> . </p><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onPageScrollStateChanged: ((<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, CoroutineContext) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onPageScrolled: ((<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, CoroutineContext) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onPageSelected: ((<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, CoroutineContext) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">null</span></span></code> </pre><br><p>  Kami menerapkan inisialisasi untuk salah satu variabel ini (sisanya dilakukan dengan cara yang sama) </p><br><pre> <code class="kotlin hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrollStateChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action: ((</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, CoroutineContext)</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)?) { onPageScrollStateChanged = action }</code> </pre> <br><p>  Dan pada akhirnya kami menerapkan fungsi dengan nama yang sama. </p><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrollStateChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(state: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { GlobalScope.launch(coroutineContext) { onPageScrollStateChanged?.invoke(state, coroutineContext) } }</code> </pre> <br><p>  Tetap menambahkan fungsi ekstensi untuk membuatnya berfungsi </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> ViewPager.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageChangeListenerCoroutines</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">init</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CoroutineOnPageChangerListener</span></span></span></span><span class="hljs-function"><span class="hljs-params">.()</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> listener = CoroutineOnPageChangerListener() listener.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() addOnPageChangeListener(listener) }</code> </pre> <br><p>  Dan rekatkan semua ini di bawah ViewPager </p><br><pre> <code class="kotlin hljs">viewPager { onPageChangeListenerCoroutines { onPageScrolled { position, offset, pixels, coroutineContext -&gt; <span class="hljs-comment"><span class="hljs-comment">//  -   . } } }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Kode lengkap di sini</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CoroutineOnPageChangeListener</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> coroutineContext: CoroutineContext = Dispatchers.Main ) : ViewPager.OnPageChangeListener { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onPageScrollStateChanged: ((<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, CoroutineContext) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onPageScrolled: ((<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, CoroutineContext) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onPageSelected: ((<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, CoroutineContext) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrollStateChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action: ((</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, CoroutineContext)</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)?) { onPageScrollStateChanged = action } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrolled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action: ((</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, CoroutineContext)</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)?) { onPageScrolled = action } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageSelected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action: ((</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, CoroutineContext)</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)?) { onPageSelected = action } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrolled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, positionOffset: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, positionOffsetPixels: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { GlobalScope.launch(coroutineContext) { onPageScrolled?.invoke(position, positionOffset, positionOffsetPixels, coroutineContext) } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageSelected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { GlobalScope.launch(coroutineContext) { onPageSelected?.invoke(position, coroutineContext) } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrollStateChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(state: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { GlobalScope.launch(coroutineContext) { onPageScrollStateChanged?.invoke(state, coroutineContext) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> ViewPager.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageChangeListenerCoroutines</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">init</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">CoroutineOnPageChangerListener</span></span></span></span><span class="hljs-function"><span class="hljs-params">.()</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> listener = CoroutineOnPageChangerListener() listener.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() addOnPageChangeListener(listener) }</code> </pre></div></div><br><p>  Juga di perpustakaan Tata Letak Anko ada banyak metode yang berguna, seperti terjemahan ke <a href="">berbagai metrik</a> . </p><p></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id442440/">https://habr.com/ru/post/id442440/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id442428/index.html">Baris perintah paling sederhana pada NASM dan QEMU</a></li>
<li><a href="../id442430/index.html">Intisari materi menarik untuk pengembang seluler # 288 (24 Februari - 3 Maret)</a></li>
<li><a href="../id442432/index.html">[Di dermaga] Berkibar. Bagian 1. Untuk pengembang Android</a></li>
<li><a href="../id442434/index.html">7 rekomendasi untuk menganalisis 70 parameter pertumbuhan situs teratas pada 2019 di Yandex</a></li>
<li><a href="../id442438/index.html">Pandangan pertama pada JavaScript melalui mata pengembang Java</a></li>
<li><a href="../id442442/index.html">Insinyur Senior dalam mencari pekerjaan. Tentang tugas di wawancara teknis dan pertanyaan teoritis</a></li>
<li><a href="../id442444/index.html">Mitos fisika populer modern</a></li>
<li><a href="../id442446/index.html">Transformasi digital pada contoh Call center bisnis apa pun</a></li>
<li><a href="../id442448/index.html">Pola konkurensi dan kesalahan disembunyikan dalam kode: Deadlock</a></li>
<li><a href="../id442450/index.html">Blockchain dan data medis: cara kerjanya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>