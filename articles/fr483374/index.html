<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíî ‚úäüèΩ ü§∂üèø Recommandations de l'API REST - Exemples de conception de services Web dans Java et Spring üè∞ üïã üåó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le dernier article de cette s√©rie, vous d√©couvrirez les recommandations de l'API REST et les exemples de d√©veloppement des services Web Java et S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Recommandations de l'API REST - Exemples de conception de services Web dans Java et Spring</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483374/">  Dans le dernier article de cette s√©rie, vous d√©couvrirez les recommandations de l'API REST et les exemples de d√©veloppement des services Web Java et Spring. <br><br>  Lors du d√©veloppement d'une bonne API REST, il est important d'avoir de bons microservices. <br>  Comment d√©veloppez-vous votre API REST?  Quelles sont les meilleures pratiques? <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/2l/pg/rq/2lpgrq94xumpddkf6ivlt3ekkgu.png"><br><h3>  Vous apprendrez: </h3><br><ul><li>  Comment d√©velopper une bonne API REST? </li><li>  √Ä quoi dois-je penser lors du d√©veloppement d'une API REST? </li><li>  Quelles sont les meilleures pratiques pour d√©velopper des services Web RESTful? </li></ul><br><h3>  API REST </h3><br>  Voici le dernier article d'une s√©rie d'articles sur l'API REST: <br><br><ul><li>  <a href="https://habr.com/ru/post/483202/">Introduction √† l'API REST - Services Web RESTful</a> </li><li>  <a href="https://habr.com/ru/post/483204/">Diff√©rences entre REST et SOAP</a> </li><li>  <a href="https://habr.com/ru/post/483206/">D√©veloppement d'API REST - qu'est-ce que Contract First (contrat d'abord)?</a> </li><li>  <a href="https://habr.com/ru/post/483322/">D√©veloppement d'API REST - qu'est-ce que Code First (code first)?</a> </li><li>  <a href="https://habr.com/post/483328/">API REST - Qu'est-ce que HATEOAS?</a> </li><li>  Recommandations de l'API REST - Exemples de conception de services Web dans Java et Spring </li></ul><br><h3>  Utilisez l'approche du consommateur d'abord </h3><br>  Qui utilisera votre service?  Services aux consommateurs. <br><br>  Consid√©rez-vous le service du point de vue du consommateur? <br><br><ul><li>  Si vous d√©veloppez une API, votre consommateur peut-il comprendre votre API? </li><li>  Si vous publiez vos ressources, le consommateur peut-il les trouver et y acc√©der? </li><li>  Le consommateur peut-il comprendre vos URI? </li><li>  Quel type de service proposez-vous? </li><li>  S'agit-il d'une application mobile ou d'une application web? </li><li>  √Ä quels consommateurs vous attendez-vous et ces types de consommateurs peuvent-ils changer √† l'avenir? </li><li>  Si vous impl√©mentez quelque chose comme HATEOAS, r√©fl√©chissez √† la fa√ßon dont vos clients l'utiliseront avant de l'impl√©menter. </li></ul><br><blockquote><ul><li>  <b>La chose la plus importante est d'avoir une excellente documentation</b> </li><li>  <b>Facilitez la t√¢che de vos clients pour vous faire gagner du temps.</b> </li><li>  <b>Plus les consommateurs peuvent faire seuls, moins de travail pour vous.</b> </li></ul><br></blockquote><br>  Chaque fois que vous avez une discussion ou une r√©vision de service, mettez les exigences des clients en premier lieu. <br><br><h3>  Utilisez l'approche du contrat d'abord </h3><br>  Qu'est-ce qu'un contrat? <br><br>  Le cr√©ateur du service Web est consid√©r√© comme <b>un fournisseur de services</b> .  Une application qui utilise un service Web est un <b>consommateur du service</b> .  <b>Un contrat</b> est un accord entre un fournisseur et un consommateur sur un service. <br><br><img src="https://habrastorage.org/webt/d-/5f/on/d-5fon8kmzaf6f_7g-bn7fsbofe.png"><br><br>  Afin d'utiliser correctement le service, le consommateur du service doit bien comprendre le contrat.  Le contrat comprend des d√©tails sur de nombreux aspects du service, tels que: <br><br><ul><li>  Comment appeler un service Web? </li><li>  Quel type de transport est utilis√©? </li><li>  Quelles sont les structures de demande et de r√©ponse? </li></ul><br>  Cela s'appelle √©galement une <b>d√©finition de service</b> . <br><br>  Dans l'approche du contrat d'abord, vous d√©finissez d'abord un contrat de service, puis impl√©mentez uniquement le service. <br><br><h3>  Contrat d'abord avec WSDL </h3><br>  Par exemple, lorsque vous d√©finissez des services Web SOAP, vous utilisez WSDL pour d√©finir le contrat. <br><br><img src="https://habrastorage.org/webt/ou/st/86/oust86bvzc87vsg-k229x1ujl14.png"><br><br>  Le WSDL d√©termine quels sont les points de terminaison de service, les op√©rations que vous publiez et les structures de demande et de r√©ponse. <br><br><h3>  Contrat d'abord avec Swagger / Open API </h3><br>  Lorsque vous utilisez des services Web RESTful, Swagger est un outil populaire pour documenter vos services Web. <br><br><img src="https://habrastorage.org/webt/we/tc/3x/wetc3x4x6unbgve0wcaxdjdbkp8.png"><br><img src="https://habrastorage.org/webt/l-/2m/h_/l-2mh_uh6txdtyekd1xn585mmvw.png"><br>  Swagger vous permet de d√©terminer les ressources que vous fournissez dans le cadre de votre API.  Il inclut les d√©tails de chaque op√©ration, par exemple, si elle utilise XML, JSON ou les deux.  Un plan de r√©ponse est √©galement l√†. <br><br><img src="https://habrastorage.org/webt/9e/px/uh/9epxuhh57oelrv-dupcqib0t6ho.png"><br><br>  Il donne √©galement des informations d√©taill√©es sur les codes de r√©ponse qu'il prend en charge.  Vous pouvez √©galement voir que cette ressource particuli√®re, <b>/ jpa / users</b> : <br><br><img src="https://habrastorage.org/webt/gi/ig/pk/giigpknfhlsy8qiscbblp_eigdw.png"><br><br>  prend en charge le fonctionnement GET.  En fait, il prend √©galement en charge l'op√©ration POST: <br><br><img src="https://habrastorage.org/webt/ox/9o/ch/ox9ochxtkao2ghxalyyi_o6oy4m.png"><br><br>  Le sch√©ma de r√©ponse, si cette ressource est disponible, sera: <br><br><img src="https://habrastorage.org/webt/lf/gq/xo/lfgqxoi0txeqlqyg8vmblmppwdq.png"><br><br>  La d√©finition de l'objet Utilisateur est pr√©sente dans l'accord Swagger comme: <br><br><img src="https://habrastorage.org/webt/d3/s0/nm/d3s0nmktz3so7vqye4t8vqizwm4.png"><br><br>  Il comprend des attributs: <b>birthDate</b> , <b>id</b> , <b>name</b> et un tableau de messages de messages.  Certains champs contiennent √©galement un champ de description. <br><br>  Dans l'approche du contrat d'abord, avant d'impl√©menter le service, vous cr√©ez manuellement ou √† l'aide de l'application la d√©finition cr√©√©e par Swagger. <br><br><h3>  Avantages de l'approche du contrat d'abord </h3><br>  En utilisant l'approche du contrat d'abord, vous pensez √† vos clients et √† la fa√ßon dont ils peuvent utiliser ce service.  Vous n'√™tes pas initialement inquiet des d√©tails de mise en ≈ìuvre. <br><br>  Si, √† un stade pr√©coce, vous accordez une grande importance √† la mise en ≈ìuvre, les d√©tails techniques p√©n√®trent la d√©finition de votre service. <br><br>  Vous devez vous assurer que la d√©finition de votre service ne d√©pend pas de la plate-forme que vous utilisez, que ce soit Java, .NET ou toute autre. <br><br><h3>  D√©finir les normes d'organisation pour l'API REST </h3><br>  YARAS est une directive importante pour vos normes organisationnelles. <br><br><img src="https://habrastorage.org/webt/bu/9e/9s/bu9e9sa0bryvgm6g8yhhtabcdf0.png"><br><br>  YARAS signifie <b>Yet Another RESTful API Standard</b> .  YARAS fournit les normes, directives et conventions √† suivre lors du d√©veloppement de services Web RESTful.  Il donne des recommandations pour les choses suivantes: <br><br><ul><li>  Comment nommer vos services </li><li>  Comment structurer votre demande et votre r√©ponse </li><li>  Comment mettre en ≈ìuvre le filtrage, le tri, la pagination et d'autres actions </li><li>  Comment aborder le versioning </li><li>  Comment devez-vous aborder la documentation de l'API </li></ul><br><h3>  Approche unifi√©e du d√©veloppement des services </h3><br>  Vous devez r√©soudre de nombreux probl√®mes complexes avant de commencer √† concevoir des services Web RESTful.  Tout ce qui pr√©c√®de, vous devez le savoir. <br><br>  Le leadership de votre organisation ne voudra pas que les √©quipes qui traitent de ressources diff√©rentes aient des approches diff√©rentes de ces choses. <br><br>  Par exemple, il n'est pas souhaitable que Team-A organise le contr√¥le de version en fonction des param√®tres de requ√™te et Team-B utilise le contr√¥le de version en fonction de l'URI. <br><br>  Par cons√©quent, il est important que vous ayez clairement d√©fini des normes organisationnelles pour votre approche des services Web RESTful. <br><br><h3>  Personnalisation de YARAS SOUS les besoins organisationnels </h3><br>  La bonne chose √† propos de YARAS est qu'il peut √™tre personnalis√© pour r√©pondre aux besoins sp√©cifiques de l'organisation.  Par exemple, vous pouvez: <br><br><ul><li>  Configurez √† quoi devraient ressembler les corps de demande et de r√©ponse. </li><li>  Choisissez un syst√®me de contr√¥le de version sp√©cifique </li></ul><br>  √âtant donn√© que YARAS a une couverture assez compl√®te, vous pouvez √™tre s√ªr que vous n'avez manqu√© aucune d√©cision importante. <br><br><h3>  Choix d'un cadre standard d'entreprise API REST </h3><br>  Les frameworks typiques utilis√©s pour cr√©er des services Web RESTful dans le monde Java sont Spring MVC, Spring REST et JAX-RS. <br><br>  Si vous cr√©ez un framework / arch√©type / application de r√©f√©rence sp√©cifique √† l'organisation qui adh√®re aux normes d'organisation communes en plus de votre plate-forme API REST pr√©f√©r√©e, cela permettra aux √©quipes d'adh√©rer facilement aux normes communes. <br><br>  Les caract√©ristiques typiques incluent: <br><br><ul><li>  Structures de demande et de r√©ponse </li><li>  Gestion des erreurs </li><li>  filtrage </li><li>  Chercher </li><li>  Versioning </li><li>  Prise en charge des fausses r√©ponses </li><li>  Hateoas </li></ul><br>  Le cadre standard fournit une approche unifi√©e de la conception et de la mise en ≈ìuvre des services dans toute l'organisation. <br><br><h3>  Gestion d'API REST d√©centralis√©e </h3><br>  Cr√©ez un groupe d'experts parmi les √©quipes cr√©ant l'API REST et formez une √©quipe de gestion.  L'√©quipe est responsable de <br><br><ul><li>  Am√©lioration des normes API REST </li><li>  Cr√©ation / conception de votre infrastructure API REST </li></ul><br><h3>  Utilisation g√©n√©ralis√©e de HTTP </h3><br>  Chaque fois que vous pensez aux services Web RESTful, pensez au HTTP. <br><br>  HTTP poss√®de toutes les fonctionnalit√©s qui vous aident √† cr√©er d'excellents services Web. <br><br><h4>  Utilisez les bonnes m√©thodes de requ√™te HTTP </h4><br>  Pensez aux m√©thodes de requ√™te HTTP que vous devez utiliser.  Lorsque vous pensez √† impl√©menter une op√©ration, d√©terminez la ressource sur laquelle elle doit √™tre effectu√©e, puis recherchez la m√©thode de requ√™te HTTP appropri√©e.  R√©cup√©rez-vous des d√©tails, cr√©ez-vous quelque chose, mettez-vous √† jour quelque chose existant ou supprimez-vous un existant? <br><br>  Utilisation de m√©thodes HTTP: <br><br><ul><li>  OBTENIR pour obtenir </li><li>  POST pour cr√©er </li><li>  PUT √† mettre √† jour </li><li>  SUPPRIMER pour supprimer </li><li>  PATCH pour les mises √† jour partielles </li></ul><br><h4>  Utilisez l'√©tat de r√©ponse HTTP appropri√© </h4><br>  Lorsque vous effectuez l'op√©ration, assurez-vous de renvoyer l'√©tat de r√©ponse correct. <br><br>  Par exemple, lorsqu'une ressource sp√©cifique n'est pas trouv√©e, ne lancez pas d'exception de serveur.  Envoyez plut√¥t le code de r√©ponse appropri√© dans un message de r√©ponse, tel que <b>404</b> . <br><br>  S'il y a vraiment une exception de serveur, renvoyez le code <b>500</b> . <br><br>  Si la validation √©choue, envoyez le code de la demande non valide. <br><br><h3>  Focus sur la performance </h3><br>  Chaque ressource peut avoir plusieurs repr√©sentations - au format XML ou JSON.  Le consommateur de services peut choisir la pr√©sentation de son choix. <br><br>  Le service renvoie 3 utilisateurs lorsque nous envoyons une demande GET.  Dans ce cas, nous obtenons la repr√©sentation JSON de la ressource <b><i>/ users</i></b> . <br><br><img src="https://habrastorage.org/webt/gq/qn/jq/gqqnjqeoz1e_lo1vftv0qymzdje.png"><br><br>  Lorsque le consommateur n'indique pas de vue pr√©f√©r√©e, nous utilisons JSON. <br><br><img src="https://habrastorage.org/webt/ox/fr/b-/oxfrb-45qiilzqpul45nbdpqk6a.png"><br><br>  Le consommateur peut envoyer un en-t√™te Accept pour indiquer la vue. <br><br><img src="https://habrastorage.org/webt/df/tz/0t/dftz0teguhajcobfnjsgs-elmhk.png"><br><br>  Le corps de la r√©ponse a d√©sormais un contenu XML: <br><br><img src="https://habrastorage.org/webt/bw/ct/io/bwctiow8vaxwy2sik1-awmyhar0.png"><br><br><h3>  Utilisez le pluriel </h3><br>  Utilisez toujours le pluriel lorsque vous nommez des ressources. <br><br>  Regardons un exemple simple.  Supposons que nous ayons un service qui h√©berge une ressource utilisateur.  Ce qui suit d√©crit comment y acc√©der: <br><br><ul><li>  Cr√©er un utilisateur: <b>POST / utilisateurs</b> </li><li>  Supprimer un utilisateur: <b>SUPPRIMER / utilisateurs / 1</b> </li><li>  Obtenez tous les utilisateurs: <b>GET / utilisateurs</b> </li><li>  Obtenez un utilisateur: <b>GET / users / 1</b> </li></ul><br>  La pr√©f√©rence de plusieurs utilisateurs par rapport √† l'utilisateur utilisateur rend l'URI plus lisible. <br><br><ul><li>  Par exemple, si nous utilisons <b>/ user</b> au lieu de <b>/ users</b> pour obtenir, <b>GET / user</b> ne transmet pas le bon message au lecteur. </li></ul><br><h3>  Cr√©er une bonne documentation </h3><br>  Les consommateurs doivent comprendre comment faire le meilleur usage du service, et la meilleure fa√ßon de les aider est de cr√©er une bonne documentation. <br><br>  Les services Web SOAP peuvent utiliser la fonctionnalit√© WSDL, tandis que les services Web RESTful ont des options Swagger (d√©sormais la norme de documentation Open API). <br><br>  Le choix d'un format n'est qu'une partie de la cr√©ation d'une bonne documentation.  Ce qui est √©galement important, c'est de fournir la bonne quantit√© d'informations pour aider le consommateur. <br><br>  La documentation doit √™tre compl√®te et inclure les points suivants: <br><br><ul><li>  Qu'est-ce qu'une structure de demande et de r√©ponse? </li><li>  Comment un consommateur doit-il s'authentifier? </li><li>  Quelles sont les limites d'utilisation? </li><li>  Indiquez tous les types de messages de r√©ponse et les codes d'√©tat correspondants qui peuvent √™tre attendus du service. </li></ul><br><h3>  Cr√©er un portail de documentation API REST commun </h3><br>  Il serait utile d'avoir un portail de documentation API REST commun √† l'ensemble de l'organisation.  Jetez un ≈ìil √† l'un de ces portails: <br><br><img src="https://habrastorage.org/webt/3j/vm/bo/3jvmbovqx_sikaedwbkgzxe80yc.png"><br><br>  Un tel portail regroupe toutes les ressources disponibles dans l'organisation.  Avoir une interface utilisateur telle que l'interface utilisateur Swagger aura ses avantages suppl√©mentaires.  √Ä l'aide de l'interface utilisateur Swagger, vous pouvez voir la documentation plus en d√©tail: <br><br><img src="https://habrastorage.org/webt/xp/io/ox/xpiooxhstlexwhwjxqk9umd6yye.png"><br><br>  Cela peut √™tre utilis√© m√™me par des utilisateurs non techniques.  Les informations fournies ici comprennent: <br><br><ul><li>  Format de r√©ponse attendu </li><li>  Type de contenu </li><li>  Codes de r√©ponse pris en charge </li></ul><br>  Le format de la documentation dans le style d'une demande / r√©ponse en direct peut √©galement √™tre int√©ressant. <br><br><h3>  Prise en charge des versions </h3><br>  Le contr√¥le de version entra√Æne une grande complexit√© pour un service Web.  Il est tr√®s difficile de g√©rer plusieurs versions diff√©rentes du m√™me service Web.  Essayez d'√©viter cela autant que possible. <br><br>  Cependant, dans certains sc√©narios, le contr√¥le de version est in√©vitable. <br><br>  Commen√ßons par regarder un exemple de service.  Supposons que nous ayons initialement d√©fini un service qui a la classe <b>PersonV1</b> comme suit: <br><br>  Cette version de la classe ne prend pas en compte le fait qu'un nom peut avoir plusieurs sous-sections, telles que le pr√©nom et le nom.  V√©rifiez ceci: <br><br>  La deuxi√®me version de la classe source a √©t√© mise √† jour pour corriger cette anomalie: <br><br>  Nous ne pouvons pas transf√©rer imm√©diatement l'ensemble du service pour utiliser <b>PersonV2</b> !  Il est possible que d'autres consommateurs attendent des r√©ponses au format <b>PersonV1</b> . <br><br>  C'est l√† que le contr√¥le de version est requis. <br><br>  Voyons maintenant les options que nous avons pour le contr√¥le de version de ces deux ressources. <br><br><h3>  Utilisation de diff√©rents URI </h3><br>  Nous avons une option: utiliser diff√©rents URI pour ces diff√©rentes ressources.  Dans le code d'examen ci-dessous, nous utilisons les URI <b>v1 / personne</b> et <b>v2 / personne</b> pour les distinguer: <br><br>  Si vous ex√©cutez une demande GET pour la ressource <b>v1 / personne</b> : <br><br><img src="https://habrastorage.org/webt/ro/xv/go/roxvgoo6pek2xv4wokws2zivir4.png"><br><br>  Vous recevrez des informations correspondant √† la <b>v1</b> .  Pour une autre ressource: <br><br><img src="https://habrastorage.org/webt/hn/yn/vh/hnynvhniet9iacsxsrikaa9pxj8.png"><br><br><h3>  Utilisation du param√®tre de requ√™te </h3><br>  La deuxi√®me m√©thode de contr√¥le de version utilise le param√®tre de requ√™te: <br><br>  Dans l'URI <b>/ personne / param</b> , si nous envoyons le param√®tre avec <b>version = 1</b> , nous retournons une ressource de type <b>PersonV1</b> : <br><br><img src="https://habrastorage.org/webt/sp/qe/1g/spqe1gs9bksyba0pmidzsndo1fm.png"><br><br>  Pour le m√™me URI, le param√®tre avec <b>version = 2</b> renvoie une ressource de type <b>PersonV2</b> : <br><br><img src="https://habrastorage.org/webt/2q/qt/q1/2qqtq1ci6j_pg4bc6brglrj4z88.png"><br><br>  Cette m√©thode est appel√©e versioning √† l'aide de param√®tres de requ√™te. <br><br><h3>  Utilisation d'un en-t√™te (en-t√™te) </h3><br>  Une autre fa√ßon de proc√©der consiste √† contr√¥ler la version en sp√©cifiant un titre.  Ici, nous utilisons un en-t√™te appel√© <b>X-API-VERSION</b> et marquons l'URI comme <b>/ person / header</b> .  Lorsque la valeur d'en-t√™te est <b>1</b> , une ressource de type <b>PersonV1 est renvoy√©e</b> : <br><br><img src="https://habrastorage.org/webt/d-/0b/ww/d-0bwwbim3yedwkmreql8hancrg.png"><br><br>  Lorsque sa valeur est <b>2</b> , une ressource de type <b>PersonV2</b> est r√©cup√©r√©e: <br><br><img src="https://habrastorage.org/webt/yz/_q/1-/yz_q1-fcemb3sqptsk4cd5p8kno.png"><br><br>  Nous utilisons l'attribut dans l'en-t√™te de demande pour effectuer le contr√¥le de version pour nous. <br><br><h3>  Utilisation de l'en-t√™te d'acceptation </h3><br>  La derni√®re m√©thode pour cr√©er des versions utilise l'en-t√™te Accepter.  Si le consommateur inclut les informations de premi√®re version dans l'en-t√™te Accept de la demande GET, la ressource suivante est renvoy√©e: <br><br><img src="https://habrastorage.org/webt/dz/yw/54/dzyw5423iw2i6ogaiund7wpl1wo.png"><br><br>  Sinon, une ressource de type <b>PersonV2 est retourn√©e</b> : <br><br><img src="https://habrastorage.org/webt/3i/a4/wl/3ia4wlgl4dbx9fvpxvz3ho8ihxc.png"><br><br>  Cette m√©thode de contr√¥le de version est appel√©e <b>Accepter la version d'en-t√™te</b> ou <b>Version de</b> <b>type de support</b> , car les types MIME sont g√©n√©ralement le contenu de l'en-t√™te Accepter. <br><br><h3>  Comparaison des m√©thodes de contr√¥le de version </h3><br>  Jusqu'√† pr√©sent, nous avons vu quatre types de m√©thodes dans les versions: <br><br><ul><li>  Utilisation de diff√©rents URI </li><li>  Utilisation du param√®tre de requ√™te </li><li>  Utilisation de l'en-t√™te </li><li>  Utilisation de Accept Header / Media Type </li></ul><br>  Lequel est le meilleur?  La v√©rit√© est qu'il n'y a pas de r√©ponse unique √† cette question.  Le fait est que diff√©rents g√©ants de l'Internet fr√©quentent diff√©rents types de versions. <br><br><ul><li>  Utilisation de diff√©rents URI - Twitter </li><li>  Utilisation du param√®tre de requ√™te - Amazon </li><li>  Utilisation d'un en-t√™te - Microsoft </li><li>  Utilisation de Accept Header / Media Type - GitHub </li></ul><br><br>  Vous devez √©valuer ces quatre options en fonction de vos besoins sp√©cifiques.  Il y a un certain nombre de facteurs importants √† consid√©rer: <br><br><ul><li>  <b>Pollution URI</b> : En contr√¥lant les versions √† l'aide d'URI et de param√®tres de requ√™te, nous finissons par polluer l'espace URI.  En effet, nous ajoutons des pr√©fixes et des suffixes aux cha√Ænes principales de l'URI.  Le contr√¥le de version √† l'aide d'un en-t√™te √©vite cela. </li><li>  <b>Utilisation abusive des en-t√™tes HTTP</b> .  Dans le cas du contr√¥le de version utilisant des en-t√™tes et le type de support, les en-t√™tes HTTP sont mal utilis√©s car ils n'√©taient pas initialement destin√©s au contr√¥le de version. </li><li>  <b>Mise en cache</b> : une ressource est identifi√©e par son URI.  Toutefois, si vous n'utilisez pas d'URI pour d√©terminer sa version, mais utilisez un m√©canisme bas√© sur l'en-t√™te, les informations de version ne peuvent pas √™tre mises en cache.  Si la mise en cache HTTP est importante pour vous, utilisez le contr√¥le de version bas√© sur un URI ou un param√®tre de demande. </li><li>  <b>Ex√©cutabilit√© de la demande de navigateur</b> : le versioning bas√© sur le titre et le type de support n√©cessite des outils comme Postman.  Cependant, si les consommateurs de services ne sont pas techniquement avertis, il est pr√©f√©rable d'utiliser le contr√¥le de version bas√© sur un URI ou un param√®tre de requ√™te. </li><li>  <b>Documentation API</b> : Vous devez √©galement r√©fl√©chir √† la fa√ßon dont vous souhaitez documenter vos API.  Le contr√¥le de version bas√© sur l'URI et le param√®tre de requ√™te est plus facile √† documenter que les deux autres types de contr√¥le de version. </li></ul><br>  Comprenez qu'il n'y a pas de solution id√©ale unique! <br><br><h3>  Pensez √† la gestion des erreurs </h3><br>  Lorsqu'un consommateur soumet une demande √† un service, il est important qu'il re√ßoive la bonne r√©ponse.  Chaque fois que quelque chose se passe mal, il est important d'envoyer une r√©ponse appropri√©e. <br><br><h3>  Lorsqu'un consommateur demande une ressource inexistante </h3><br>  Si nous envoyons une demande GET pour rechercher un utilisateur existant, nous obtenons la r√©ponse suivante: <br><br><img src="https://habrastorage.org/webt/uv/dl/9j/uvdl9jri5sd_xafc-fog6acw0rm.png"><br><br>  Si vous recherchez un utilisateur inexistant: <br><br><img src="https://habrastorage.org/webt/9z/kq/je/9zkqjeitglkibqhxszf-4_qr9xk.png"><br><br>  Ce que vous obtenez est le statut <b>404 Not Found</b> .  Il s'agit d'une bonne gestion des erreurs car elle d√©termine correctement que la ressource n'a pas √©t√© trouv√©e et ne renvoie pas d'erreur de serveur. <br><br>  Envoyons maintenant une requ√™te GET √† un URI inexistant: <br><br><img src="https://habrastorage.org/webt/gp/b9/ch/gpb9ch3b9ochiotgxppztr4zyb4.png"><br><br>  Comme vous pouvez le voir, vous obtenez <b>404</b> statuts de r√©ponse <b>non trouv√©s</b> .  Une URL non valide indique une ressource qui n'existe pas. <br><br><h3>  Statuts de r√©ponse importants </h3><br><ul><li>  200 - succ√®s </li><li>  404 - ressource introuvable </li><li>  400 - demande non valide (par exemple, erreur de validation) </li><li>  201 - cr√©√© </li><li>  401 - non autoris√© (si l'authentification √©choue) </li><li>  500 - erreur de serveur </li></ul><br><h3>  D√©tails de l'erreur dans le corps de r√©ponse </h3><br>  Cela est utile si vous disposez d'une structure d'exception standard lors du d√©veloppement de votre service. <br><br><img src="https://habrastorage.org/webt/fd/ds/vd/fddsvdk0uirskh9ubp4oprwdcd8.png"><br><br>  Pour des erreurs sp√©cifiques, des structures de r√©ponse sp√©cifiques peuvent √™tre renvoy√©es au consommateur, ce qui peut √™tre la norme dans toute l'organisation.  Assurez-vous que la r√©ponse d'erreur est √©galement lisible pour les consommateurs, sans confusion. <br><br><h3>  Utilisation de la documentation Swagger ou Open API </h3><br>  Swagger fournit l'un des formats de documentation les plus populaires pour les services Web RESTful.  Aujourd'hui, il est soutenu par diverses organisations et est utilis√© dans un grand nombre de services.  Nous examinons ici deux aspects principaux de Swagger: <br><br><ul><li>  Format de documentation Swagger </li><li>  Swagger UI, qui vous permet de consulter la documentation Swagger d'une mani√®re visuellement pratique </li></ul><br><h3>  Documentation Swagger </h3><br>  Jetez un ≈ìil au Swagger JSON suivant: <br><br><img src="https://habrastorage.org/webt/76/da/mo/76damom8ezs7j-5amuzvwfxrh6q.png"><br><br>  Au niveau sup√©rieur, cela ressemble beaucoup √† la d√©finition de WSDL.  Il a plusieurs attributs importants: <br><ul><li>  <b>h√¥te</b> : o√π se trouve le service </li><li>  <b>basePath</b> : le chemin d'acc√®s au service </li><li>  <b>consomme</b> : quelles demandes sont accept√©es </li></ul><br><img src="https://habrastorage.org/webt/em/iz/q0/emizq09g1kavjozxl2-dnasjuum.png"><br><br><ul><li>  <b>produit</b> : Quels types de r√©ponses sont g√©n√©r√©s </li></ul><br><img src="https://habrastorage.org/webt/eu/5w/wg/eu5wwgbarvmsawqrqslbu3ps9oa.png"><br><br><ul><li>  <b>chemins</b> : diff√©rentes ressources disponibles Dans ce cas, vous avez plusieurs types de ressources dans la liste: </li></ul><br><img src="https://habrastorage.org/webt/j0/y7/9d/j0y79dcqh83k2kak44d7te-fb3q.png"><br><br>       Swagger,      ,    ,    : <br><br><img src="https://habrastorage.org/webt/bx/dx/5c/bxdx5cazvuaggiwdhkqrxcwp1es.png"><br><br>  <b>/users</b>   <b>GET</b>  <b>POST</b> .  <b>GET</b>        .      : <br><br><img src="https://habrastorage.org/webt/_1/gk/p6/_1gkp6wgcm4_lql3lnlrt49okvg.png"><br><br>  ,    <b>200</b>      <b>User</b> . <b>User</b>    <b>definitions</b> ()    : <br><br><img src="https://habrastorage.org/webt/wa/-4/9o/wa-49o7ao-f8_lpf-ifh4zptvks.png"><br><br> Swagger    ,      RESTful -.      JSON. <br><br><h3>  Swagger UI </h3><br> Swagger UI ‚Äî   ,       Swagger  - RESTful.    : <br><br><img src="https://habrastorage.org/webt/8_/up/yn/8_upynbqoldixni50vm45okd39c.png"><br><br>  ,      -    .      : <br><br><img src="https://habrastorage.org/webt/ex/qu/4i/exqu4ioa6t5fai0zagud42n8w_k.png"><br><br>      ,    : <br><br><img src="https://habrastorage.org/webt/or/df/3-/ordf3-wrutjlzbey_oxfudbydcm.png"><br><br>     ,   URL : <br><br><img src="https://habrastorage.org/webt/3z/8m/6q/3z8m6qrd6sgoyteluxobp7duiim.png"><br><br>      GET  ,    : <br><br><img src="https://habrastorage.org/webt/sw/rg/ps/swrgpsafvap9hwycxgqkphfkds0.png"><br><br>   ,     .  <b>birthDate</b> , <b>id</b> , <b>links</b> , <b>name</b>  <b>posts</b>  .         : <br><br><img src="https://habrastorage.org/webt/xb/np/ec/xbnpec9iiud7vdkdqok6scnu-uc.png"><br><br><h3>   Swagger ( Open API) </h3><br>    Swagger ‚Äî  ,   .    ,    ,    :         : <br><br><img src="https://habrastorage.org/webt/vi/el/hn/vielhn-jq9zvj5ql30hgnu0kzme.png"><br><br>  Swagger     contract-first,    code-first. <br><br>      <a href="https://youtu.be/-jwd-9PKr5Y" rel="nofollow"></a> . <br><br><h3>  R√©sum√© </h3><br>           RESTful -. <br><br><h3>   </h3><br> <a href="https://dzone.com/articles/be-the-best-api-you-can-be" rel="nofollow">Be the BEST at Your REST API!</a> <br><br> <a href="https://dzone.com/articles/developing-rest-apis" rel="nofollow">Developing REST APIs</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr483374/">https://habr.com/ru/post/fr483374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr483360/index.html">Commande d'entra√Ænement √©lectrique. Exp√©rience amateur</a></li>
<li><a href="../fr483364/index.html">Vous pouvez √©crire du code au travail pour √©conomiser votre temps libre.</a></li>
<li><a href="../fr483366/index.html">Histoire d'Internet: R√©seautage</a></li>
<li><a href="../fr483368/index.html">Cr√©ation du packer de fichiers ELF x86_64 pour Linux</a></li>
<li><a href="../fr483372/index.html">Comment former un r√©seau neuronal DeepPavlov sur un ordinateur portable √† l'aide d'un GPU</a></li>
<li><a href="../fr483376/index.html">√Ä la surface d'un trou noir</a></li>
<li><a href="../fr483378/index.html">Travail de type s√©curis√© avec des registres sans surcharge en C ++ 17: m√©taprogrammation bas√©e sur les valeurs</a></li>
<li><a href="../fr483380/index.html">Microservices: comment respecter le contrat</a></li>
<li><a href="../fr483382/index.html">Kali Linux 2020.1</a></li>
<li><a href="../fr483384/index.html">Quels mots anglais du lexique informatique pronon√ßons-nous le plus souvent incorrectement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>