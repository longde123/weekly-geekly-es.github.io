<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯеТ ЁЯС╛ тЬНЁЯП┐ ABBYY RTR SDK рдФрд░ django рдХреЗ рд╕рд╛рде рдПрдВрдбреНрд░реЙрдЗрдб рдерд┐рдВрдЧреНрд╕ рдкрд░ рдЧреНрд░рдВрдереЛрдВ рдХреЛ рдкрд╣рдЪрд╛рдирдирд╛ ЁЯСйЁЯП╝тАНЁЯОУ тЫИя╕П ЁЯЪБ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдирдорд╕реНрддреЗ! рдореЗрд░рд╛ рдирд╛рдо рдЕрдЬрд╝рд╛рдд рдХрд▓рд┐рдордХреЛрд╡ рд╣реИ, рдореИрдВ рдПрдкреНрд▓рд╛рдЗрдб рдореИрдереЗрдореЗрдЯрд┐рдХреНрд╕ рдФрд░ рдХрдВрдкреНрдпреВрдЯрд░ рд╕рд╛рдЗрдВрд╕ рд╕рдВрдХрд╛рдп рдХреЗ рджреВрд╕рд░реЗ рд╡рд░реНрд╖ рдХрд╛ рдЫрд╛рддреНрд░ рд╣реВрдБ, рдЬреЛ рд╣рд╛рдпрд░ рд╕реНрдХреВрд▓ рдСрдлрд╝ рдЗрдХреЛрдиреЙрдорд┐рдХреНрд╕ рдореЗрдВ рдХрдВрдкреНрдпреВ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ABBYY RTR SDK рдФрд░ django рдХреЗ рд╕рд╛рде рдПрдВрдбреНрд░реЙрдЗрдб рдерд┐рдВрдЧреНрд╕ рдкрд░ рдЧреНрд░рдВрдереЛрдВ рдХреЛ рдкрд╣рдЪрд╛рдирдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/abbyy/blog/432514/"><p>  рдирдорд╕реНрддреЗ!  рдореЗрд░рд╛ рдирд╛рдо рдЕрдЬрд╝рд╛рдд рдХрд▓рд┐рдордХреЛрд╡ рд╣реИ, рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдкреНрд▓рд╛рдЗрдб рдореИрдереЗрдореЗрдЯрд┐рдХреНрд╕ рдФрд░ рдХрдВрдкреНрдпреВрдЯрд░ рд╕рд╛рдЗрдВрд╕</a> рд╕рдВрдХрд╛рдп рдХреЗ рджреВрд╕рд░реЗ рд╡рд░реНрд╖ рдХрд╛ рдЫрд╛рддреНрд░ рд╣реВрдБ, рдЬреЛ рд╣рд╛рдпрд░ рд╕реНрдХреВрд▓ рдСрдлрд╝ рдЗрдХреЛрдиреЙрдорд┐рдХреНрд╕ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬреНрдЮрд╛рди рдХрд╛</a> рд╕рдВрдХрд╛рдп рд╣реИ рдФрд░ рдПрдмреАрдмреАрд╡рд╛рдИ рдХреЗ рдореЛрдмрд╛рдЗрд▓ рд╡рд┐рдХрд╛рд╕ рд╡рд┐рднрд╛рдЧ рдореЗрдВ рдкреНрд░рд╢рд┐рдХреНрд╖реБ рд╣реИред  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рдЕрдкрдиреА рдЫреЛрдЯреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛, рдЬрд┐рд╕реЗ рдПрдХ рдЧреНрд░реАрд╖реНрдордХрд╛рд▓реАрди рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред </p><br><img src="https://habrastorage.org/webt/xe/ck/gv/xeckgvbiddugjrh70y447trujkg.jpeg" align="left" width="800"><br><p>  рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рдХрдиреНрд╡реЗрдпрд░ рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЛред  рдорд╛рд▓ рдпрд╛ рдХреБрдЫ рд╡рд┐рд╡рд░рдг рдЗрд╕рдХреЗ рд╕рд╛рде рдЬрд╛рддреЗ рд╣реИрдВ, рдЬрд┐рд╕ рдкрд░ рдкрд╛рда рдХреЛ рдкрд╣рдЪрд╛рдирдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ (рд╢рд╛рдпрдж рдпрд╣ рдХреБрдЫ рдЕрджреНрд╡рд┐рддреАрдп рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реИ, рдпрд╛ рд╢рд╛рдпрдж рдХреБрдЫ рдФрд░ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ)ред  рдкрд╛рд░реНрд╕рд▓ рдПрдХ рдЕрдЪреНрдЫрд╛ рдЙрджрд╛рд╣рд░рдг рд╣реИред  рдХрдиреНрд╡реЗрдпрд░ рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рджреВрд░ рд╕реЗ рдПрдХ рдСрдкрд░реЗрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЦрд░рд╛рдмреА рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЬрд┐рд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣рд▓ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рд╕реЗ рдЙрд╕реЗ рдХреНрдпрд╛ рдорджрдж рдорд┐рд▓ рд╕рдХрддреА рд╣реИ?  рдПрдВрдбреНрд░реЙрдЗрдб рдерд┐рдВрдЧреНрд╕ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдПрдХ рдЙрдкрдХрд░рдг рдПрдХ рдЕрдЪреНрдЫрд╛ рд╕рдорд╛рдзрд╛рди рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: рдпрд╣ рдореЛрдмрд╛рдЗрд▓ рд╣реИ, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ, рдФрд░ рд╡рд╛рдИ-рдлрд╛рдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рд╣рдордиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдмреАрдмреАрд╡рд╛рдИ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпреЛрдВ</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдФрд░ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдХрд┐ рд╡реЗ рдРрд╕реА рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рдЙрдкрдпреБрдХреНрдд рд╣реИрдВ - рдЗрдВрдЯрд░рдиреЗрдЯ рдСрдл рдерд┐рдВрдЧреНрд╕ рдХреА рд╢реНрд░реЗрдгреА рд╕реЗ "рдЧреИрд░-рдорд╛рдирдХ рдЙрдкрдХрд░рдгреЛрдВ" рдкрд░ рдПрдХ рдзрд╛рд░рд╛ рдореЗрдВ рдкрд╛рда рдХреА рдорд╛рдиреНрдпрддрд╛ред  рд╣рдо рдЬрд╛рдирдмреВрдЭрдХрд░ рдХрдИ рдЪреАрдЬреЛрдВ рдХреЛ рд╕рд░рд▓ рдХрд░реЗрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рд╕рд┐рд░реНрдл рдПрдХ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдк рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рддреЛ рдмрд┐рд▓реНрд▓реА рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИред <a name="habracut"></a></p><br><h3 id="android-things">  Android рдЪреАрдЬреЗрдВ </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдВрдбреНрд░реЙрдЗрдб рдерд┐рдВрдЧреНрд╕ рд╕реНрдЯрд╛рд░реНрдЯрд░ рдХрд┐рдЯ</a> рдирд╛рдордХ рдПрдХ рдЕрджреНрднреБрдд рдЪреАрдЬ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Google I / O</a> рд╕рдореНрдореЗрд▓рди рд╕реЗ рд╣рдорд╛рд░реЗ ABBYY рдХрд╛рд░реНрдпрд╛рд▓рдп рдореЗрдВ рдЖрдИред  рдЕрдЪреНрдЫрд╛рдИ рдЧрд╛рдпрдм рдирд╣реАрдВ рд╣реБрдИ, рдФрд░ рд╣рдо рдЕрдкрдиреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдорд╛рдиреНрдпрддрд╛ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреА рддрд▓рд╛рд╢ рдореЗрдВ рдЗрд╕рдХреЗ рд╕рд╛рде рдЦреЗрд▓рдирд╛ рдЪрд╛рд╣рддреЗ рдереЗред  рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рд╣рдорд╛рд░реЗ рдЙрдкрдХрд░рдг рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдЪрд▓рд╛рдПрдВред  рдРрд╕рд╛ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реИ, рдмрд▓реНрдХрд┐ рдирд┐рд░реНрдорд╛рддрд╛ рд╕реЗ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдХрдбрд╝рд╛рдИ рд╕реЗ рдкрд╛рд▓рди рдХрд░реЗрдВред </p><br><p>  рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рдкрдврд╝реЗрдВред </p><br><p>  <em>рдореЗрд░реЗ рд╣рд╛рде рдореЗрдВ рдХреНрдпрд╛ рдЖрдпрд╛</em> <br><img src="https://habrastorage.org/webt/wf/jm/lo/wfjmlotr9yda08ipwalicle9dni.jpeg" alt="рдЫрд╡рд┐"><br>  <em>рдФрд░ рдкреЛрд╕реНрдЯ рдХреЗ рдЕрдВрдд рдореЗрдВ рдореИрдВ рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдЗрдХрдЯреНрдареЗ рдбрд┐рд╡рд╛рдЗрд╕ рдХреНрдпрд╛ рджрд┐рдЦрддрд╛ рд╣реИ</em> </p><br><h3 id="chto-zhe-my-delaem">  рд╣рдо рдХреНрдпрд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВ? </h3><br><p>  рд╣рдо рдПрдВрдбреНрд░реЙрдЗрдб рдерд┐рдВрдЧреНрд╕ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрд╡реЗрджрди рд▓рд┐рдЦреЗрдВрдЧреЗ рдЬреЛ рдХреИрдорд░реЗ рд╕реЗ рдЫрд╡рд┐ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░реЗрдЧрд╛, рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рдХреЛ рдорд╛рдиреНрдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рдкрд╛рда рдФрд░ (рд╕рдордп-рд╕рдордп рдкрд░) рдлрд╝реНрд░реЗрдо рднреЗрдЬреЗрдЧрд╛ рддрд╛рдХрд┐ рд╕рд╢рд░реНрдд рдСрдкрд░реЗрдЯрд░ рд╕рдордЭ рд╕рдХреЗ рдХрд┐ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдкрд░ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИред  рд╕рд░реНрд╡рд░ django рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдореИрдВ рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреА рдЬрд▓реНрджрдмрд╛рдЬреА рдХрд░рддрд╛ рд╣реВрдВ рдХрд┐ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдХрд┐рд╕реА рдирд┐рд╡реЗрд╢ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрдЧреА, рд╕рд╛рде рд╣реА рдкрдВрдЬреАрдХрд░рдг рдФрд░ рдПрд╕рдПрдордПрд╕ (рдареАрдХ рд╣реИ, рдПрдбрдмреНрд▓реНрдпреВрдПрд╕ рдкрд░ рдЖрдкрдХреЛ рдЕрднреА рднреА рдкрдВрдЬреАрдХрд░рдг рдХрд░рдиреЗ рдФрд░ рдореБрдлреНрдд рдЦрд╛рддрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ)ред </p><br>
<h3 id="zapuskaem-raketu-v-kosmos-server">  рд╣рдо рд▓реЙрдиреНрдЪ рдХрд░рддреЗ рд╣реИрдВ <del>  рдЕрдВрддрд░рд┐рдХреНрд╖ рдореЗрдВ рд░реЙрдХреЗрдЯ </del>  рд╕рд░реНрд╡рд░ </h3><br><p><img src="https://habrastorage.org/webt/wd/yn/dm/wdyndmafgjdclqwrxddq8cq2ej8.jpeg" align="right">  рд╣рдо рдорд╛рди рд▓реЗрдВрдЧреЗ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдореБрдлреНрдд рдореЗрдВ рдПрдбрдмреНрд▓реНрдпреВрдПрд╕ рдЦрд╛рддрд╛ рд╣реИред  рд╣рдо рдЕрдкрдиреЗ рдХрд╛рд░реНрдб рдХреЛ рдЯрд╛рдИ рдХрд░реЗрдВрдЧреЗ рддрд╛рдХрд┐ рдмреБрд░рд╛рдИ рдЕрдореЗрдЬрд╝рди, рд╣рдорд╛рд░реЗ рд▓рд╛рдкрд░рд╡рд╛рд╣ рд╣реЛрдиреЗ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╣рдо рдореЗрдВ рд╕реЗ рдПрдХ рд╢реЗрдХреЗрд▓ рдХреЛ рдХрд╛рдЯ рд▓реЗред  рд╣рдо рдПрдбрдмреНрд▓реНрдпреВрдПрд╕ рдИрд╕реА 2 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдПрд╕рдПрд╕рдбреА рд╡реЙрд▓реНрдпреВрдо рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде рдЙрдмрдВрдЯреВ рд╕рд░реНрд╡рд░ 18.04 рдПрд▓рдЯреАрдПрд╕ (рдПрдЪрд╡реАрдПрдо) рдкрд░ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдмрдирд╛рдПрдВрдЧреЗред  рдЗрд╕ OS рдХреЗ рд▓рд┐рдП рдФрд░ рдПрдХ рдореБрдлреНрдд рдЦрд╛рддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдХреЗрд╡рд▓ рдПрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрдкрд▓рдмреНрдз рд╣реИ, рдЗрд╕реЗ рдЪреБрдиреЗрдВ (рдЪрд┐рдВрддрд╛ рди рдХрд░реЗрдВ, рд░реИрдо рдХреА рдПрдХ рдЧреАрдЧрд╛рдмрд╛рдЗрдЯ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ)ред  рд╣рдо рдПрдХ ssh рдХреБрдВрдЬреА рдмрдирд╛рдПрдВрдЧреЗ (рдпрд╛ рдкрд╣рд▓реЗ рд╕реЗ рддреИрдпрд╛рд░ рдПрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ) рдФрд░ рд╣рдорд╛рд░реА рдорд╢реАрди рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рд╣рдо рдЗрд▓рд╛рд╕реНрдЯрд┐рдХ рдЖрдИрдкреА (рд╕реНрдерд┐рд░ рдЖрдИрдкреА рдЬреИрд╕реА рдХреБрдЫ) рднреА рдмрдирд╛рдПрдВрдЧреЗ рдФрд░ рддреБрд░рдВрдд рдЗрд╕реЗ рд╣рдорд╛рд░реА рдорд╢реАрди рд╕реЗ рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЗрд▓рд╛рд╕реНрдЯрд┐рдХ рдЖрдИрдкреА, рдЬреЛ рдХрд┐рд╕реА рднреА рдЖрднрд╛рд╕реА рдорд╢реАрди рд╕реЗ рдмрдВрдзрд╛ рдирд╣реАрдВ рд╣реИ, рдЖрдкрдХреЛ рд╡рд┐рдХрд╛рд╕ рдХреЗ рджреМрд░рд╛рди рдкреИрд╕рд╛ рдЦрд░реНрдЪ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рд╣рдо рд╕рд░реНрд╡рд░ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реИрдВред  рд╣рдо рдорд╢реАрди рдкрд░ рдЖрд╡рд╢реНрдпрдХ рдЯреВрд▓рдХрд┐рдЯ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдкрд╛рдпрдерди рддреАрд╕рд░реЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдкреВрд░реНрд╡рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдорд╛рдорд▓рд╛ рдЫреЛрдЯреЗ рдкрд░ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><pre><code class="bash hljs">$ sudo apt-get update $ sudo apt-get install python3-pip $ sudo pip3 install virtualenv</code> </pre> <br><p>  рдХрд░реНрддрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ, рд╣рдореЗрдВ рдмрд╛рдж рдореЗрдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред </p><br><pre> <code class="bash hljs">$ sudo apt-get install docker.io</code> </pre> <br><p>  рдЖрдкрдХреЛ рдкреЛрд░реНрдЯ 8000 рдЦреЛрд▓рдиреЗ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рд╡реЗрдм рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд╣рдо рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред  Ssh рдХреЗ рд▓рд┐рдП рдкреЛрд░реНрдЯ 22 рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЦреБрд▓рд╛ рд╣реИред </p><br><p>  рд╣реБрд░реНрд░реЗ!  рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЕрдкрдиреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рджреВрд░рд╕реНрде рдХрдВрдкреНрдпреВрдЯрд░ рд╣реИред  рд╣рдо рд╕рд░реНрд╡рд░ рдкрд░ рд╕реАрдзреЗ рдХреЛрдб рд▓рд┐рдЦреЗрдВрдЧреЗред </p><br><h4 id="django--channels">  Django (+ рдЪреИрдирд▓) </h4><br><p>  рдореИрдВрдиреЗ django рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЖрдкрдХреЛ рдПрдХ рдЫреЛрдЯреА рд╡реЗрдм рд╕реЗрд╡рд╛ рдХреЛ рдЬрд▓реНрджреА рдФрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред  рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд django рдЪреИрдирд▓ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╣рдореЗрдВ рд╡реЗрдм рд╕реЙрдХреЗрдЯ (рдЕрд░реНрдерд╛рддреН рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП) рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рджреЗрдЧреА <del>  рдХреАрд▓ </del>  рдкреГрд╖реНрда рдХреЛ рддрд╛рдЬрд╝рд╛ рдХрд┐рдП рдмрд┐рдирд╛ рдЪрд┐рддреНрд░реЛрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдХреЗ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд░реЗрдВ)ред </p><br><p>  рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдПрдБ рдЬрд┐рд╕рдореЗрдВ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдЬрдЧрд╣ рджреА рдЬрд╛рдПред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджрд╕реНрддрд╛рд╡реЗрдЬрд╝</a> рдореЗрдВ рдирд┐рд░реНрджреЗрд╢реЛрдВ рд╕реЗ рд╡рд┐рдЪрд▓рд┐рдд рдХрд┐рдП рдмрд┐рдирд╛, django рдЪреИрдирд▓реЛрдВ рдХреЗ рд╕рд╛рде django рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред </p><br><pre> <code class="bash hljs">$ mkdir Project $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> Project $ virtualenv venv $ <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> venv/bin/activate $ pip install -U channels <span class="hljs-comment"><span class="hljs-comment">#       django $ pip install channels_redis #    Redis $ pip install djangorestframework $ django-admin startproject mysite $ cd mysite</span></span></code> </pre> <br><p>  рд╣рдо рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рддреЗ рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 3 рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдБ рд╣реЛрдВрдЧреАред  рдореБрдЦреНрдп рдореЗрдВ рдПрдХ рд╣реА рдирд╛рдо рд╣реЛрдЧрд╛ - mysite (рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛), рдЕрдиреНрдп рджреЛ - рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рдФрд░ рдЕрдкрд▓реЛрдб рдХрд░рдирд╛ред  рдкрд╣рд▓рд╛ рдПрдХ рд╡реЗрдм рдкреЗрдЬ рдкрд░ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрдЧрд╛, рдФрд░ рджреВрд╕рд░рд╛ - рдЗрд╕реЗ REST API рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред </p><br><pre> <code class="bash hljs">$ python3 manage.py startapp streaming $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> streaming $ rm -r migrations admin.py apps.py models.py tests.py $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. $ python3 manage.py startapp uploading $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> uploading $ rm -r migrations admin.py apps.py models.py tests.py</code> </pre> <br><p>  Django рдЪреИрдирд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред  WSGI_APPLICATION рдХреЗ рд╕рд╛рде рд▓рд╛рдЗрди рдкрд░ рдЯрд┐рдкреНрдкрдгреА рдХрд░реЗрдВ рдФрд░ ASGI_APPLICATION рдХреЗ рд╕рд╛рде рдПрдХ рдирдпрд╛ рдЬреЛрдбрд╝реЗрдВред  рдЕрдм рд╣рдорд╛рд░рд╛ рдЖрд╡реЗрджрди рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред </p><br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/settings.py # ... # WSGI_APPLICATION = ... ASGI_APPLICATION = 'mysite.routing.application' # ...</span></span></code> </pre> <br><p>  рд╣рдо INSTALLED_APPS рд╕реВрдЪреА рдХреЗ рдореВрд▓реНрдп рдХреЛ рднреА рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/settings.py # ... INSTALLED_APPS = [ 'channels', 'streaming', 'uploading', 'rest_framework', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] # ...</span></span></code> </pre> <br><h4 id="arhitektura">  рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ </h4><br><p>  рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрдзрд┐рдХрд╛рд░рд┐рдХ</a> django рдЪреИрдирд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓</a> рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреЛрдб рд▓рд┐рдЦреЗрдВрдЧреЗред  рд╣рдорд╛рд░реА рдЫреЛрдЯреА рд╕реЗрд╡рд╛ рдХреА рд╕рдВрд░рдЪрдирд╛ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрд╛рдИ рджреЗрдЧреА: </p><br><p>  MYIP: 8000 / рдлреНрд░реЗрдо - рдПрдХ рд╡реЗрдм рдкреЗрдЬ рдЬреЛ рдкрд░рд┐рдгрд╛рдо рдХреЛ рджрд┐рдЦрд╛рдПрдЧрд╛, рд╕рд╢рд░реНрдд рд░реВрдк рд╕реЗ, рд╡рд╣ рдкреГрд╖реНрда рдЬрд┐рд╕реЗ рдСрдкрд░реЗрдЯрд░ рджреЗрдЦ рд░рд╣рд╛ рд╣реИ <br>  MYIP: рдорд╛рдиреНрдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рдкрд╛рда рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП 8000 / рдЕрдкрд▓реЛрдб / рдЕрдкрд▓реЛрдб / рдЕрдкрд▓реЛрдб / - рдПрдХ рдкреЛрд╕реНрдЯ рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП рдкрддрд╛ <br>  MYIP: 8000 / рдЕрдкрд▓реЛрдб / рдЕрдкрд▓реЛрдб / рдЕрдкрд▓реЛрдб / - PUT рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП рдкрддрд╛, рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЪрд┐рддреНрд░ рднреЗрдЬрдирд╛ </p><br><p>  рдЗрд╕ рддрд░реНрдХ рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреА urls.py рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/mysite/urls.py from django.contrib import admin from django.conf.urls import include, url urlpatterns = [ url(r'^frame/', include('streaming.urls')), url(r'^upload/', include('uploading.urls')), ]</span></span></code> </pre> <br><h4 id="rest-api">  рдЕрдиреНрдп рдПрдкреАрдЖрдИ </h4><br><p>  рд╣рдо рдЕрдкрдиреЗ рдПрдкреАрдЖрдИ рдХреЗ рддрд░реНрдХ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/uploading/urls.py from django.conf.urls import url from rest_framework.urlpatterns import format_suffix_patterns from . import views urlpatterns = [ url(r'^upload_text/$', views.UploadTextView.as_view()), url(r'^upload_image/$', views.UploadImageView.as_view()), ] urlpatterns = format_suffix_patterns(urlpatterns)</span></span></code> </pre> <br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/uploading/views.py from django.shortcuts import render from rest_framework.views import APIView from rest_framework.response import Response from channels.layers import get_channel_layer from rest_framework.parsers import FileUploadParser from asgiref.sync import async_to_sync import base64 # Create your views here. class UploadTextView(APIView): def post(self, request, format=None): message = request.query_params['message'] if not message: raise ParseError("Empty content") channel_layer = get_channel_layer() async_to_sync(channel_layer.group_send)("chat", { "type": "chat.message", "message": message, }) return Response({'status': 'ok'}) class UploadImageView(APIView): parser_class = (FileUploadParser,) def put(self, request, format=None): if 'file' not in request.data: raise ParseError("Empty content") f = request.data['file'] channel_layer = get_channel_layer() async_to_sync(channel_layer.group_send)("chat", { "type": "chat.message", "image64": base64.b64encode(f.read()).decode("ascii"), }) return Response({'status': 'ok'})</span></span></code> </pre> <br><h4 id="veb-stranichka">  рд╡реЗрдм рдкреЗрдЬ </h4><br><p>  рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдПрдХ рдкреГрд╖реНрда рдкрд░ рдлрд┐рдЯ рд╣реЛрдЧреА, рдЗрд╕рд▓рд┐рдП рддрд░реНрдХ рд╕рд░рд▓ рд╣реЛрдЧрд╛ред </p><br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/streaming/urls.py from django.conf.urls import url from . import views urlpatterns = [ url(r'^', views.index, name='index'), ]</span></span></code> </pre> <br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/streaming/views.py from django.shortcuts import render from django.utils.safestring import mark_safe import json # Create your views here. def index(request): return render(request, 'index.html', {})</span></span></code> </pre> <br><p>  рдкрд░рд┐рдгрд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ рдПрдХ рдЫреЛрдЯрд╛ HTML рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕рдореЗрдВ рдПрдХ рд╡реЗрдм рд╕реЙрдХреЗрдЯ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдФрд░ рдЗрд╕реЗ рд╕рд╛рдордЧреНрд░реА рд╕реЗ рднрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реЛрдЧреАред </p><br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- mysite/streaming/templates/index.html --&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Live from Android Things<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"chat-log"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cols</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rows</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"frame"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> chatSocket = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> WebSocket( </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'ws://'</span></span></span><span class="javascript"> + </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.location.host + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'/ws/chat/'</span></span></span><span class="javascript">); chatSocket.onmessage = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">e</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> data = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">JSON</span></span></span><span class="javascript">.parse(e.data); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> message = data[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'message'</span></span></span><span class="javascript">]; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> image64 = data[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'image64'</span></span></span><span class="javascript">]; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (image64) { </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelector(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#frame'</span></span></span><span class="javascript">).setAttribute( </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'src'</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'data:image/png;base64,'</span></span></span><span class="javascript"> + image64 ); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (message) { </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelector(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#chat-log'</span></span></span><span class="javascript">).value += (message + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'\n'</span></span></span><span class="javascript">); } }; chatSocket.onclose = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">e</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.error(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Chat socket closed unexpectedly'</span></span></span><span class="javascript">); }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h4 id="nastroyka-routing-soketov">  рд░реВрдЯрд┐рдВрдЧ, рд╕реЙрдХреЗрдЯреНрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h4><br><p>  рд░реВрд╕реА рдореЗрдВ рд░реВрдЯрд┐рдВрдЧ рд╢рдмреНрдж рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рдЕрдиреБрд╡рд╛рдж рдХреНрдпрд╛ рд╣реИ?  рдЖрдЗрдП рдЗрд╕ рдкреНрд░рд╢реНрди рдХреЛ рд╣рдорд╛рд░реЗ рд╕рд┐рд░ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ (рдпрд╛ рдЙрд╕рдХреЗ) рд╕реЗрдЯ рдХрд░реЗрдВред </p><br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/mysite/settings.py # ... ALLOWED_HOSTS = ['*'] #  []  ['*'],    # ... CHANNEL_LAYERS = { 'default': { 'BACKEND': 'channels_redis.core.RedisChannelLayer', 'CONFIG': { "hosts": [('127.0.0.1', 6379)], }, }, }</span></span></code> </pre> <br><p>  рдЕрдм рдЖрдкрдХреЛ "рдлрд╝реЙрд░рд╡рд░реНрдбрд┐рдВрдЧ" рд▓реЙрдЬрд┐рдХ рдХреЛ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ (рд░рд╛рдЙрдЯрд┐рдВрдЧ рдереНрд░реВ рдлрд╝рд╛рдЗрд▓реЗрдВ urls.py рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рдорд╛рди рд╣реИрдВ, рдХреЗрд╡рд▓ рдЕрдм рд╡реЗрдм рд╕реЙрдХреЗрдЯ рдХреЗ рд▓рд┐рдП)ред </p><br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/mysite/routing.py from channels.auth import AuthMiddlewareStack from channels.routing import ProtocolTypeRouter, URLRouter import streaming.routing application = ProtocolTypeRouter({ # (http-&gt;django views is added by default) 'websocket': AuthMiddlewareStack( URLRouter( streaming.routing.websocket_urlpatterns ) ), })</span></span></code> </pre> <br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/streaming/routing.py from django.conf.urls import url from . import consumers websocket_urlpatterns = [ url(r'^ws/chat/$', consumers.FrameConsumer), ]</span></span></code> </pre> <br><p>  рдФрд░ рдЕрдм рд╣рдо рдЦреБрдж рд╣реА рдлреНрд░реЗрдорд╡рд░реНрдХ рдХреЛ рдХрдВрдЬреНрдпреВрдорд░рд╣реЛрдо рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ </p><br><pre> <code class="django hljs"><span class="xml"><span class="xml"># mysite/streaming/consumers.py from asgiref.sync import async_to_sync from channels.generic.websocket import WebsocketConsumer, JsonWebsocketConsumer import json class FrameConsumer(WebsocketConsumer): def connect(self): self.room_group_name = 'chat' # Join room group async_to_sync(self.channel_layer.group_add)( self.room_group_name, self.channel_name ) self.accept() def disconnect(self, close_code): # Leave room group async_to_sync(self.channel_layer.group_discard)( self.room_group_name, self.channel_name ) # Receive message from WebSocket def receive(self, text_data): text_data_json = json.loads(text_data) message = text_data_json['message'] # Send message to room group async_to_sync(self.channel_layer.group_send)( self.room_group_name, { 'type': 'chat_message', 'message': message } ) # Receive message from room group def chat_message(self, event): if 'message' in event: # Send message to WebSocket self.send(text_data=json.dumps({ 'message': event['message'] })) elif 'image64' in event: self.send(text_data=json.dumps({ 'image64': event['image64'] }))</span></span></code> </pre> <br><p>  рдФрд░ рдЕрдВрдд рдореЗрдВ, рдкрд╕реАрдиреЗ рд╕реЗ рддрд░ рд╣рдереЗрд▓рд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╣рдо рд▓реЙрдиреНрдЪ рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="bash hljs">$ docker run -p 6379:6379 -d redis:2.8 $ python manage.py runserver 0.0.0.0:8000</code> </pre> <br><h3 id="a-teper-sobstvenno-pro-android">  рдФрд░ рдЕрдм Android рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ </h3><br><p><img src="https://habrastorage.org/webt/rj/ce/rz/rjcerzjdlgxfnn9puhl3cjg2seu.jpeg" align="right">  рд╣рдо рдкрд╛рдареНрдп рдорд╛рдиреНрдпрддрд╛ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдмреАрдмреАрд╡рд╛рдИ рд╕реЗ рдЖрд░рдЯреАрдЖрд░ рдПрд╕рдбреАрдХреЗ рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред  рд╣рдорд╛рд░реЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдВрддрд┐рдо рдкреИрдХ рдЖрд░рдЯреАрдЖрд░ рдПрд╕рдбреАрдХреЗ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред  рд╣рдо рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдлреНрд░реЗрдо рдХреЗ рд▓рд┐рдП рдПрдХ рдХрд╛рдлреА рд╕рд░рд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ, рд╣рдорд╛рд░рд╛ рдЖрд╡реЗрджрди рдкрд┐рдЫрд▓реЗ рд▓рд┐рдВрдХ (/ рдирдореВрдирд╛-рдЯреЗрдХреНрд╕реНрдЯрдХреИрдкрдЪрд░) рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдП рдЧрдП рд╕рдВрдЧреНрд░рд╣ рд╕реЗ рдПрдХ рдирдореВрдирд╛ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛрдЧрд╛ред  рд╣рдо рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдПрдВрдбреНрд░реЙрдЗрдб рдерд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдФрд░ рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрд╡реЗрджрди рд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рднрд╛рдЧреЛрдВ рдХреЛ рдмрд╛рд╣рд░ рдлреЗрдВрдХ рджреЗрдВрдЧреЗред </p><br><p>  рд▓рд╛рдЗрдмреНрд░реЗрд░реА .AR рдлрд╝рд╛рдЗрд▓ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдП рдЧрдП рд╕рдВрдЧреНрд░рд╣ рдХреА lib рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИ, рд╣рдо рдЖрдпрд╛рдд рдХрд░рддреЗ рд╣реИрдВред  рд╣рдо рдЕрдкрдиреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд╕рдВрдкрддреНрддрд┐ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣ рдХреА рд╕рдВрдкрддреНрддрд┐ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдХреЙрдкреА рдХрд░рддреЗ рд╣реИрдВ (рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рдорд╛рдиреНрдпрддрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдлрд╛рдЗрд▓реЗрдВ)ред  рд╡рд╣рд╛рдВ рд╣рдо рд╕рдВрдЧреНрд░рд╣ рд╕реЗ рд▓рд╛рдЗрд╕реЗрдВрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЛ рдХреЙрдкреА рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рдХреЗ рдмрд┐рдирд╛ рдЖрд╡реЗрджрди рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред </p><br><p>  рдПрдмреАрдмреАрд╡рд╛рдИ рдЖрд░рдЯреАрдЖрд░ рдПрд╕рдбреАрдХреЗ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЯрд╛рдЗрдк рдЗрдВрдЬрди рдХрд╛ рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЯрд╛рдЗрдк рдХрд┐рдП рдЧрдП ITextCaptureService рдХрд╛ рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реИ, рдЬрд┐рд╕реЗ рд╣рдо рдмрд╛рдж рдореЗрдВ рд▓реЙрдиреНрдЪ рдХрд░реЗрдВрдЧреЗред </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { mEngine = Engine.load(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, LICENSE_FILE_NAME); mTextCaptureService = mEngine.createTextCaptureService(textCaptureCallback); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// ...</span></span></code> </pre> <br><p>  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдкрдХреЛ ITextCaptureService.Callback рдХреЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЗрд╕реЗ рд╕реАрдзреЗ рд╣рдорд╛рд░реЗ MainActivity рдХреНрд▓рд╛рд╕ рдореЗрдВ рдмрдирд╛рдПрдВ, рдЗрд╕реЗ 3 рддрд░реАрдХреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ITextCaptureService.Callback textCaptureCallback = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ITextCaptureService.Callback() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRequestLatestFrame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] buffer)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  ,       . //    . mCamera.addCallbackBuffer(buffer); } @Override public void onFrameProcessed( ITextCaptureService.TextLine[] lines, ITextCaptureService.ResultStabilityStatus resultStatus, ITextCaptureService.Warning warning) { //      ,    if (resultStatus.ordinal() &gt;= 3) { //   ,     mSurfaceViewWithOverlay.setLines(lines, resultStatus); } else { //  ,     mSurfaceViewWithOverlay.setLines(null, ITextCaptureService.ResultStabilityStatus.NotReady); } //  warnings // ... } @Override public void onError(Exception e) { //    } };</span></span></code> </pre> <br><p>  рд╣рдордиреЗ рдХреИрдорд░рд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдлреНрд░реЗрдо рдХреА рдкреНрд░рд╛рдкреНрддрд┐ рдХреЛ рд╕реМрдВрдк рджрд┐рдпрд╛ рд╣реИред  рдореИрдВ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдЕрдВрджрд░ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИред </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Camera.PreviewCallback cameraPreviewCallback = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Camera.PreviewCallback() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPreviewFrame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] data, Camera camera)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     (    ) if (!mIsUploading) { mIsUploading = true; //    new UploadImageTask(mCameraPreviewSize.width, mCameraPreviewSize.height).execute(data); } //     mTextCaptureService.submitRequestedFrame(data); } };</span></span></code> </pre> <br><p>  рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдХреБрдЫ рд╡рд░реНрдЧреЛрдВ рдХреЛ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдЬреЛ рдмрджрд▓реЗ рдореЗрдВ рдЕрдкрд▓реЛрдбрд░ рд╡рд░реНрдЧ рдХреА рдПрдХ рд╡рд╕реНрддреБ рдкрд░ рдЕрдкрдирд╛ рдХрд╛рдо рд╕реМрдВрдкреЗрдВрдЧреЗред </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UploadTextTask</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AsyncTask</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Void </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String... params)</span></span></span><span class="hljs-function"> </span></span>{ mUploader.uploadText(params[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UploadImageTask</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AsyncTask</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">byte</span></span></span><span class="hljs-class">[], </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mCameraPreviewWidth; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mCameraPreviewHeight; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UploadImageTask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height)</span></span></span><span class="hljs-function"> </span></span>{ mCameraPreviewWidth = width; mCameraPreviewHeight = height; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Void </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[]... params)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] jpegBytes = convertToJpegBytes(params[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (jpegBytes != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { mUploader.uploadImage(jpegBytes); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] convertToJpegBytes(<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] rawBytes) { YuvImage yuvImage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> YuvImage( rawBytes, ImageFormat.NV21, mCameraPreviewWidth, mCameraPreviewHeight, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (ByteArrayOutputStream os = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ByteArrayOutputStream()) { yuvImage.compressToJpeg( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, mCameraPreviewWidth, mCameraPreviewHeight), <span class="hljs-number"><span class="hljs-number">40</span></span>, os ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> os.toByteArray(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { Log.d(TAG, <span class="hljs-string"><span class="hljs-string">"compress error"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  рдЕрдкрд▓реЛрдбрд░ рд╡рд░реНрдЧ рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ OkHttp3 рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдЖрдкрдХреЛ рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХреЛ рдмрд╣реБрдд рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </p><br><h3 id="rezultat">  рдкрд░рд┐рдгрд╛рдо </h3><br><p>  рд╣рдореЗрдВ ABBYY рд╕реЗ рдорд╛рдиреНрдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рдПрдХ рдХрд╛рдордХрд╛рдЬреА рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд░реНрд╡рд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдорд┐рд▓рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдЗрдВрдЯрд░рдиреЗрдЯ рдСрдл рдерд┐рдВрдЧреНрд╕ рдореЗрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдХреНрдпрд╛ рдпрд╣ рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд╣реИ? </p><br><p>  <em>рдПрдХ рдПрдХрддреНрд░рд┐рдд рдЙрдкрдХрд░рдг рдФрд░ рдореЗрд░реЗ рдирд┐рдпреЛрдХреНрддрд╛ рдХрд╛ рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ рджреЗрд╢реА рд╡рд┐рдЬреНрдЮрд╛рдкрди</em> <br><img src="https://habrastorage.org/webt/7t/x1/hp/7tx1hpdekcwi6dwn7_mygnqxoqk.jpeg" alt="рдЫрд╡рд┐"></p><br><p>  <em>рдкрд╛рда рдорд╛рдиреНрдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рд╣реИ</em> <br><img src="https://habrastorage.org/webt/ow/d-/ha/owd-ha1je23vvghfz8ceupg9iks.jpeg" alt="рдЫрд╡рд┐"></p><br><p>  <em>рдХрдИ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рдЕрд╡рд▓реЛрдХрди рдХреЗ рд╕рд╛рде рд╕реЗрд▓реНрдлреА рдкреИрдиреЛрд░рдорд╛</em> <br><img src="https://habrastorage.org/webt/b0/pk/em/b0pkemwybvudykjrient8vfknwa.jpeg" alt="рдЫрд╡рд┐"></p><br><p>  <em>Vidos, рдпрд╣ рд╕рдм рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЬреАрд╡рди рдореЗрдВ рдХреИрд╕реЗ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ</em> </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/cnzVXyWAYiQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  рдЧрд┐рддреБрдм рдкрд░ рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА: </p><br><p>  тЖТ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">AndroidThingsTextRecognition-Backend</a> <br>  тЖТ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">AndroidThingsTextRecognition-Android</a> </p><br><p>  рд▓реЛ рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░реЛ! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi432514/">https://habr.com/ru/post/hi432514/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi432502/index.html">рд╕реА рдФрд░ рд╕реА ++ рдЬреИрд╕реА рднрд╛рд╖рд╛рдУрдВ рдХреЗ рдХрд╛рд░рдг рдЗрдВрдЯрд░рдиреЗрдЯ рдореЗрдВ рдЧрдВрднреАрд░ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ рдЬреЛ рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдореЗрдВ рдпреЛрдЧрджрд╛рди рдХрд░рддреА рд╣реИрдВ</a></li>
<li><a href="../hi432506/index.html">Microsoft рдХрдиреЗрдХреНрдЯ (); 2018: рд╕рднреА рдмрд╛рджрд▓ рд╕рдореНрдореЗрд▓рди рдХреА рдШреЛрд╖рдгрд╛рдПрдВ</a></li>
<li><a href="../hi432508/index.html">рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐ рдореЗрдВ рд╕рд╛рдЗрди рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рдмрд╛рдзрд╛рдУрдВ рдкрд░</a></li>
<li><a href="../hi432510/index.html">рдиреЙрд░реНрд╡реЗ рдХреА рдкреНрд▓рдЧ-рдЗрди рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рд╡рд╛рд╣рдиреЛрдВ рдХреА рдмрд╛рдЬрд╛рд░ рд╣рд┐рд╕реНрд╕реЗрджрд╛рд░реА рд▓рдЧрднрдЧ рдПрдХ рдирдИ рдКрдВрдЪрд╛рдИ рдкрд░ рд╣реИ</a></li>
<li><a href="../hi432512/index.html">PostgreSQL: PipelineDB - рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХреЗ рд╕рдордЧреНрд░ рдкреНрд░рд╢реНрди</a></li>
<li><a href="../hi432516/index.html">рдЕрдкрдиреЗ рдХреНрд╖рд┐рддрд┐рдЬ рдХреЛ рд╡реНрдпрд╛рдкрдХ рдмрдирд╛рдПрдВ, рд╣реЛрдореНрд╕! рдпрд╛ рдХреНрдпреЛрдВ рднреМрддрд┐рдХрд╡рд┐рджреЛрдВ рдХреЛ рдПрдХ рд╡рд╛рдпрд▓рд┐рди рдФрд░ рдкрд╛рдХ рдХреМрд╢рд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ</a></li>
<li><a href="../hi432518/index.html">рдЗрд▓реЗрдХреНрдЯреНрд░реЙрди рдФрд░ рджреЗрд╢реА рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреА рдЧрд┐рд░рд╛рд╡рдЯ</a></li>
<li><a href="../hi432520/index.html">рдПрдореНрдмреЗрдбреЗрдб рдбреЗрдЯрд╛рдмреЗрд╕ (рдПрдЪ 2) рдореЗрдВ рдПрдЯрд▓рд╕рд┐рдпрди рдЬреАрд░рд╛ рдФрд░ рд╕рдВрдЧрдо рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдкрд╛рд╕рд╡рд░реНрдб рдХреИрд╕реЗ рдмрджрд▓реЗрдВ</a></li>
<li><a href="../hi432524/index.html">рдХреНрдпреЛрдВ рдЖрдк Quora рдХрд╛ рдЙрдкрдпреЛрдЧ рдлрд┐рд░ рдХрднреА рди рдХрд░реЗрдВ</a></li>
<li><a href="../hi432526/index.html">рдирдИ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>