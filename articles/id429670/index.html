<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹🏽 😅 🧑🏼‍🤝‍🧑🏻 Java Script! = JavaScript. Lima jawa dalam satu kelas. Kami skrip sehingga kami ingat selamanya 👩🏾‍🤝‍👩🏻 👧🏾 👶🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Minggu ini, Grup JUG.ru kemungkinan akan merilis pengumuman. Sampai aku mengatakan apa. Partisipasi dalam proyek-proyek rahasia membangkitkan kreativi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java Script! = JavaScript. Lima jawa dalam satu kelas. Kami skrip sehingga kami ingat selamanya</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/429670/"><iframe width="560" height="315" src="https://www.youtube.com/embed/7SCwk02RPA0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Minggu ini, Grup JUG.ru kemungkinan akan merilis pengumuman.  Sampai aku mengatakan apa.  Partisipasi dalam proyek-proyek rahasia membangkitkan kreativitas, jadi di sini ada video malam tentang Jawa. <br><br>  Berita luar biasa: sekarang tidak satu setengah jam panjang, tetapi sekitar 20 menit, dan bahkan ada sesuatu untuk ditonton.  Sedikit kurang sepenuhnya, terdiri dari screencast.  Mereka yang tidak tahan dengan sampah video ini dan suka menggunakan dekripsi teks, harus memotong banyak teks setelah dipotong.  Welkam, dan mungkin Jawa bersama Anda. <br><a name="habracut"></a><br>  Segera 12 Java akan dirilis, dan banyak yang masih duduk di Semerochka dan percaya bahwa dalam hal upgrade mereka tidak akan melihat sesuatu yang baru atau menarik.  Dalam edisi super pendek ini, kita akan belajar bagaimana mengubah kehidupan rekan-rekan kita menjadi neraka dengan bantuan Java yang ditulis, dan di beberapa tempat saya akan mengacaukan gadget baru.  Nah, ahli Obskurantis, tentu saja, tidak akan selamat dari kemajuan. <br><br>  Katakan, mengapa Anda memperbarui Ide Anda?  Fitur baru terus muncul di sana, beberapa pintasan baru, sepuluh kali meningkatkan produktivitas Anda sebagai pengembang.  Tetapi Anda tidak tahu tentang mereka.  Apakah Anda benar-benar membaca berita ini?  Jika Anda adalah pengguna biasa, maka mungkin tidak.  Anda, pada prinsipnya, tidak peduli dengan sebagian besar waktu.  Anda memperbarui Ide hanya karena ... Anda bisa.  Karena kulitnya indah, tema gelap, panel sentuh di MacBook.  Namun penjelasan seperti itu tidak gagal di hadapan pihak berwenang sebagai jawaban "mengapa membeli Ide". <br><br>  Sebagai gantinya, kita dapat mengatakan bahwa pada 29 Oktober, baru-baru ini, JetBrains menyematkan dukungan untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jalur mentah</a> dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Idea</a> versi beta.  Idenya dalam versi beta, garisnya ada di pratinjau, tetapi ini tidak lagi penting bagi siapa pun.  Jika Anda begitu keras kepala sehingga Anda menempatkan 12 java, maka Anda memiliki masalah yang lebih serius.  Saya tahu sendiri. <br><br>  Mari kita lihat tampilannya dalam praktik.  Untuk melakukan ini, cobalah untuk menyelesaikan beberapa jenis masalah demonstrasi.  Cukup sering ada masalah scripting sesuatu.  Misalnya, dalam game komputer ini adalah pencarian, di jenkins ini adalah skrip build, dan sebagainya.  Biasanya, Python atau Groove digunakan untuk ini, dan mari kita ambil dan gunakan Java telanjang!  Kenapa, kenapa?  Karena kita bisa, dalam tiga baris, dan bahkan tanpa peretasan.  Kedengarannya seperti ide bagus :-) <br><br><h1>  Tempat menonton </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Semuanya ada di github</a> . <br><br><h1>  Lingkup </h1><br>  Bayangkan kita memiliki file seperti ini: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> io.javawatch; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloHabrPrototype</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Hello Habr!"</span></span>; } };</code> </pre> <br>  Kami ingin dieksekusi bukan ketika kompilasi seluruh aplikasi, tetapi sebagai string - setelah peluncuran.  Seperti naskah, itu. <br><br><h1>  Secara manual </h1><br>  Pertama, Anda perlu menyalip semuanya menjadi string. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String SOURCE = <span class="hljs-string"><span class="hljs-string">"\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" package io.javawatch;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" public class HelloHabr {\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" public String get() {\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" return \"Hello Habr!\";\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" }\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" };"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String CNAME = <span class="hljs-string"><span class="hljs-string">"io.javawatch.HelloHabr"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String CODE_CACHE_DIR = <span class="hljs-string"><span class="hljs-string">"C:/temp/codeCache"</span></span>;</code> </pre><br>  Semua plus dan indentasi ini terlihat sangat menyedihkan. <br><br>  Sebelumnya, yang bisa kami lakukan hanyalah memasukkan kode ke dalam file dan membacanya.  Ini mungkin solusi yang baik, tetapi tidak selalu cocok.  Misalnya, Anda adalah pembicara di konferensi dan mendemonstrasikan kode dari slide.  Bahkan konstruksi di atas jauh lebih baik daripada hanya referensi tidak berdasar bahwa Anda memiliki kode di suatu tempat yang melakukan sesuatu di sana.  Pergantian slide menghabiskan waktu dan perhatian audiens.  Baik dan sebagainya.  Singkatnya, kasus, ketika Anda membutuhkan kode persis inline, Anda dapat membuat. <br><br>  Sekarang kita memiliki kesempatan untuk membuang sampah menggunakan string mentah.  Kami bangun dengan kursor pada kode, tekan Alt + Enter (atau apa pun yang berjalan pada OS Anda Quck Fix di Idea).  Pilih "convert to raw string literal" dan dapatkan nyashka ini: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String SOURCE = ` <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> io.javawatch; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloHabr</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Hello Habr!"</span></span>; } };`; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String CNAME = <span class="hljs-string"><span class="hljs-string">"io.javawatch.HelloHabr"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String CODE_CACHE_DIR = <span class="hljs-string"><span class="hljs-string">"C:/temp/codeCache"</span></span>;</code> </pre><br>  Menurut pendapat saya, demi fitur ini, sudah layak dijalankan untuk menginstal JDK 12. <br><br>  Omong-omong, agar fitur tersebut berfungsi, Anda perlu melakukan beberapa hal: <br><br><ul><li>  Unduh JDK 12 dan daftar di pengaturan proyek </li><li>  Dalam pengaturan javac global, atur flag <code>--release</code> , bytecode versi 12, flag tambahan <code>--enable-preview</code> <code>-Xlint:preview</code> </li><li>  Sekarang dalam konfigurasi jalankan / debug Anda perlu menambahkan flag VM <code>--enable-preview</code> </li></ul><br>  Jika Anda tidak mengerti, bagaimana melakukannya, lihat screencast saya dari pos pos, semuanya cukup jelas di sana. <br><br>  Sekarang, untuk memulai, Anda perlu melakukan tiga langkah sederhana: mengubah string menjadi representasi internal sumber yang nyaman, kompilasi dan jalankan: <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* 1 */</span></span> RuntimeSource file = RuntimeSource.create(); <span class="hljs-comment"><span class="hljs-comment">//SimpleJavaFileObject /* 2 */ compile(Collections.singletonList(file)); /* 3 */ String result = run(); /* 4 */ /* ??? */ /* 5 */ /* PROFIT! */ System.out.println(result); }</span></span></code> </pre><br>  Ada kelas <code>SimpleJavaFileObject</code> untuk "representasi yang mudah", tetapi memiliki satu fitur yang menarik.  Ini sangat abstrak.  Yaitu, metode kuncinya, yang harus dikembalikan oleh sumber yang dikompilasi, selalu melakukan eksekusi dengan harapan bahwa kami akan mensubklasifikasikannya: <br><br><pre> <code class="java hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * This implementation always throws {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@linkplain</span></span></span><span class="hljs-comment"> * UnsupportedOperationException}. Subclasses can change this * behavior as long as the contract of {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> FileObject} is * obeyed. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> CharSequence </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCharContent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ignoreEncodingErrors)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnsupportedOperationException(); }</code> </pre><br>  Jadi, Anda harus menulis beberapa ahli waris Anda.  Harap perhatikan bahwa konstruktor <code>SimpleJavaFileObject</code> asli menginginkan URI untuk kelas yang dikompilasi, tetapi di mana kita mendapatkannya?  Karena itu, saya sarankan hanya menempelkannya dengan cara yang paling jelas, seperti di sini di fungsi <code>buildURI</code> : <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RuntimeSource</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleJavaFileObject</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String contents = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> CharSequence </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCharContent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ignoreEncodingErrors)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contents; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> RuntimeSource </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeSource(CNAME, SOURCE); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RuntimeSource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String className, String contents)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(buildURI(className), Kind.SOURCE); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.contents = contents; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> URI </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildURI</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String className)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// io.javawatch.HelloHabr -&gt; // string:///io/javawatch/HelloHabr.java URI uri = URI.create("string:///" + className.replace('.', '/') + Kind.SOURCE.extension); System.out.println(uri); return uri; }</span></span></code> </pre><br>  Sekarang mari kita beralih ke kompilasi: <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;RuntimeSource&gt; files)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ File ccDir = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(CODE_CACHE_DIR); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ccDir.exists()) { FileUtils.deleteDirectory(ccDir); FileUtils.forceMkdir(ccDir); } JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); Logger c = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Logger(); StandardJavaFileManager fileManager = compiler.getStandardFileManager(c, Locale.ENGLISH, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); Iterable options = Arrays.asList(<span class="hljs-string"><span class="hljs-string">"-d"</span></span>, CODE_CACHE_DIR, <span class="hljs-string"><span class="hljs-string">"--release=12"</span></span>, <span class="hljs-string"><span class="hljs-string">"--enable-preview"</span></span>, <span class="hljs-string"><span class="hljs-string">"-Xlint:preview"</span></span>); JavaCompiler.CompilationTask task = compiler.getTask(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, fileManager, c, options, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, files); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (task.call()) { System.out.println(<span class="hljs-string"><span class="hljs-string">"compilation ok"</span></span>); } }</code> </pre><br>  Harap dicatat: kami melewati empat flag untuk perakitan, tiga di antaranya bertanggung jawab untuk menentukan opsi yang persis sama dengan yang kami lakukan dengan mouse di pengaturan javac di Ide. <br><br>  Dan akhirnya, jalankan kelas sementara kami: <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException, MalformedURLException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   File ccDir = new File(CODE_CACHE_DIR); ClassLoader loader = new URLClassLoader(new URL[]{ccDir.toURL()}); var clss = loader.loadClass("io.javawatch.HelloHabr"); // Java 10 //    Object instance = clss.getConstructor().newInstance(); // Java 9 // Object instance = clss.newInstance(); Method thisMethod = clss.getDeclaredMethod("get"); Object result = thisMethod.invoke(instance); return (String) result; }</span></span></code> </pre><br>  Harap dicatat bahwa <code>var clss = loader.loadClass</code> lebih nyaman untuk menulis daripada <code>Class&lt;?&gt; clss = loader.loadClass</code> , dan tidak memperkenalkan vorings baru.  Kata kunci <code>var</code> muncul di Sepuluh Teratas. <br><br>  Perhatikan juga bahwa <code>clss.newInstance()</code> diusulkan untuk dipotong mulai dari Nine.  Dia menelan pengecualian, yang merupakan hal buruk.  Sembilan menyarankan pertama memanggil <code>getConstructor</code> , yang parameter dan melemparkan pengecualian yang benar. <br><br>  Harap perhatikan juga bahwa saya memanggil variabel <code>class</code> kata, tetapi Java tidak bersumpah.  Pekerjaan rumah: Anda dapat melakukan ini dalam beberapa cara, Anda perlu memahami mana yang paling menarik dan mengapa. <br><br>  Secara umum, itu saja.  Itu bekerja. <br><br><h1>  Otomasi </h1><br>  Di sini kritik akan berseru, semuanya hitam di sini, karena ada perpustakaan di dunia Jawa yang mengkompilasi semuanya untuk Anda dalam satu baris. <br><br>  OK, mari kita lihat.  Berikut adalah kode di perpustakaan JOOR, yang terletak di bagian atas Google: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> io.javawatch; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.joor.Reflect; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.function.Supplier; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Automatic</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ Supplier&lt;String&gt; supplier = Reflect.compile( <span class="hljs-string"><span class="hljs-string">"io.javawatch.HelloHabr"</span></span>, ` <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> io.javawatch; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloHabr</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">util</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Supplier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Hello Habr!"</span></span>; } };` ).create().get(); System.out.println(supplier.get()); } }</code> </pre><br>  Seolah semuanya baik-baik saja.  Memang, dalam satu baris, kecuali bahwa saya harus menyeret saplayer. <br><br>  Namun ada nuansa.  Coba kembalikan "Hello Habr!"  seperti string string literal: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ``Hello Habr!``; }</code> </pre><br>  Semuanya akan langsung macet dengan kesalahan "(gunakan --able-preview untuk mengaktifkan literal string mentah)".  Tapi apakah kita sudah menyalakannya?  Ya, persetan dengan dua.  Kami memasukkannya ke dalam Ide, dan JOOR membangunnya dengan kompiler sistem!  Mari kita lihat apa yang ada di dalamnya: <br><br><pre> <code class="java hljs">JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); ompiler.getTask(out, fileManager, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, files).call();</code> </pre><br>  Dan bagaimana dengan kita ketika kita sendiri memanggil JavaCompiler yang sama? <br><br><pre> <code class="java hljs"> Iterable options = Arrays.asList(<span class="hljs-string"><span class="hljs-string">"-d"</span></span>, CODE_CACHE_DIR, <span class="hljs-string"><span class="hljs-string">"--release=12"</span></span>, <span class="hljs-string"><span class="hljs-string">"--enable-preview"</span></span>, <span class="hljs-string"><span class="hljs-string">"-Xlint:preview"</span></span>); JavaCompiler.CompilationTask task = compiler.getTask(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, fileManager, c, options, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, files);</code> </pre><br>  Dan di JOOR hanya ada nol kosong bukan opsi.  Mereka bahkan tidak bisa lewat di dalam! <br><br>  Mungkin merupakan ide yang bagus untuk mengirimi mereka permintaan tarik seperti itu ke Github di JOOR.  Jika saya tidak akan melakukannya sendiri, Anda melakukannya, ya? <br><br>  Dan moralnya sederhana, takut akan hadiah sumber terbuka.  Terkadang lebih mudah untuk menulis dinding teks kecil, tetapi memiliki kontrol atasnya. <br><br><h1>  Cara termudah </h1><br>  Ada cara untuk tidak menulis dinding teks, dan tidak menggunakan perpustakaan yang mencurigakan.  Dimulai dengan Java 9, kami memiliki shell interaktif (mirip dengan yang ada di Python, Ruby, dan bahasa scripting lainnya) yang dapat menjalankan perintah Java.  Dan tentu saja, itu ditulis dalam Java itu sendiri dan tersedia sebagai kelas Java.  Anda dapat membuat instance dan hanya melakukan tugas yang diperlukan secara langsung: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shell</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jShell = JShell.create(); <span class="hljs-comment"><span class="hljs-comment">//Java 9 jShell.eval("String result;"); jShell.eval(`result = "Hello Habr!";`); //Java 12 var result = jShell.variables() //Streams: Java 8, var: Java 10 .filter((@Nullable var v) -&gt; v.name().equals("result")) //var+lambda: Java 11 .findAny() .get(); System.out.println(jShell.varValue(result)); } }</span></span></code> </pre><br>  Streaming muncul di Java 8, dan sekarang digunakan di mana-mana, dan Anda bahkan tidak perlu memanggil <code>stream()</code> sendiri, orang lain akan menyebutnya untuk Anda.  Dalam hal ini, memanggil <code>variables()</code> mengembalikan aliran tepat, bukan ArrayList, seperti yang dilakukan seseorang dari tujuh masa kecil yang sulit.  Hasil aliran langsung dapat dituangkan ke <code>var</code> . <br><br>  Perhatikan bahwa sekarang Anda dapat menulis <code>var</code> juga dalam parameter lambda.  Fitur ini telah bersama kami sejak Java 11. <br><br>  Secara umum, ini adalah kelas yang sangat signifikan.  Ini menggunakan banyak fitur dari berbagai generasi Jawa, dan semua ini terlihat secara holistik dan harmonis.  Saya yakin bahwa hal-hal seperti itu akan digunakan oleh semua orang dan di mana saja, jadi kode di Java 12 akan langsung berbeda secara visual dari yang kami miliki di Java 7. <br><br><h1>  Untuk meringkas </h1><br>  Kami melihat beberapa fitur: <br><br><ul><li>  8: Aliran (untuk yang ada di tangki) </li><li>  9: JShell dan metode usang baru </li><li>  10: kata kunci var </li><li>  11: Pengembangan Var untuk parameter lambda </li><li>  12: Raw String Literals dan dukungannya di IntelliJ IDEA </li></ul><br>  Sedikit peringatan untuk pemula.  Jika Anda terus-menerus melakukan ini dalam aplikasi nyata tanpa makna khusus, maka rekan kerja Anda akan menjadi gila pada awalnya, mencoba memahami apa yang Anda tulis, dan kemudian mereka dapat mengalahkan Anda dengan sangat menyakitkan.  Dan saya tidak berbicara tentang fitur Java baru sekarang, tetapi tentang kompilasi dalam runtime, tentu saja. <br><br>  Jika Anda ingin mempelajari lebih lanjut tentang Java sebagai bahasa, maka Anda harus, misalnya, melihat laporan Tagir Valeev.  Anda mengenalnya sebagai seorang pria dari atas pusat Jawa di Habré, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">lany</a> .  Di Joker ia berbicara tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Amber</a> , dan di JPoint - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">teka</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">teki</a> terkenalnya, dan seterusnya dan seterusnya.  Di sana, dan tentang bahasa Jawa, dan tentang IntelliJ IDEA, semuanya ada di sana.  Semua ini dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ditemukan di YouTube</a> .  Sebenarnya, karena cemburu pada Tagir, yang bisa mengatakan sesuatu tentang bahasa itu sendiri, tapi saya tidak dan posting ini ternyata.  Juga akan ada pelawak dan JPoint baru, tetapi kita akan membahas ini nanti. <br><br>  Saya memenuhi kewajiban moral saya, kewajiban ke Jawa.  Dari sisiku, peluru itu terbang keluar.  Dan Anda di sana, pada tujuh, yang tidak memiliki Jawa kedua belas, tetap di sini, Anda semua yang terbaik, suasana hati yang baik dan kesehatan.  Terima kasih </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id429670/">https://habr.com/ru/post/id429670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id429654/index.html">Meningkatkan Manajemen Proyek</a></li>
<li><a href="../id429656/index.html">Kecerdasan buatan juga salah. Ketika Amazon Go mempersingkat kami di AS - toko masa depan tanpa kasir dan penjual</a></li>
<li><a href="../id429658/index.html">SpaceX Starlink Internet Satelit - “Cetak Lisensi Uang”</a></li>
<li><a href="../id429662/index.html">Kami menembus perlindungan dari bot</a></li>
<li><a href="../id429668/index.html">Google PageSpeed ​​Insights telah diperbarui secara drastis, apa yang akan berubah?</a></li>
<li><a href="../id429676/index.html">Cadangkan ke kaset</a></li>
<li><a href="../id429678/index.html">Bagaimana kami menerjemahkan 10 juta baris kode C ++ ke standar C ++ 14 (dan kemudian ke C ++ 17)</a></li>
<li><a href="../id429680/index.html">Kursus MIT "Keamanan Sistem Komputer". Kuliah 17: Otentikasi Pengguna, Bagian 1</a></li>
<li><a href="../id429682/index.html">Kursus MIT "Keamanan Sistem Komputer". Kuliah 17: Otentikasi Pengguna, Bagian 2</a></li>
<li><a href="../id429684/index.html">Firebase Summit 2018: secara singkat tentang hal utama</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>