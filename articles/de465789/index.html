<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíº ü§ó üí° Schulung Cisco 200-125 CCNA v3.0. Tag 29. PAT und NAT ü§ôüèø üññ üôáüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute werden wir PAT (Port Address Translation), eine Technologie zum √úbersetzen von IP-Adressen mithilfe von Ports, und NAT (Network Address Translat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schulung Cisco 200-125 CCNA v3.0. Tag 29. PAT und NAT</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/465789/">  Heute werden wir PAT (Port Address Translation), eine Technologie zum √úbersetzen von IP-Adressen mithilfe von Ports, und NAT (Network Address Translation), eine Technologie zum √úbersetzen von IP-Adressen von Transitpaketen, untersuchen.  PAT ist ein Sonderfall von NAT.  Wir werden drei Themen behandeln: <br><br>  - private oder interne (Intranet, lokale) IP-Adressen und √∂ffentliche oder externe IP-Adressen; <br>  - NAT und PAT; <br>  - NAT / PAT konfigurieren. <br><br>  Beginnen wir mit den privaten IP-Adressen.  Wir wissen, dass sie in drei Klassen unterteilt sind: A, B und C. <br><br><img src="https://habrastorage.org/webt/ob/rv/le/obrvlewzzejxlfwxxbi_90zkrwe.jpeg"><br><br>  Interne Adressen der Klasse A belegen den Zehnerbereich von 10.0.0.0 bis 10.255.255.255, und externe Adressen belegen den Bereich von 1.0.0.0 bis 9. 255.255.255 und von 11.0.0.0 bis 126.255.255.255. <br><br>  Interne Adressen der Klasse B reichen von 172.16.0.0 bis 172.31.255.255, und externe Adressen reichen von 128.0.0.0 bis 172.15.255.255 und von 172.32.0.0 bis 191.255.255.255. <a name="habracut"></a><br><br>  Interne Adressen der Klasse C reichen von 192.168.0.0 bis 192.168.255.255, und externe Adressen reichen von 192.0.0 bis 192.167.255.255 und von 192.169.0.0 bis 223.255.255.255. <br><br><img src="https://habrastorage.org/webt/-e/_r/ba/-e_rba3erd3jnyymki4ebjwu9fs.jpeg"><br><br>  Adressen der Klasse A sind Adressen / 8, Klasse B - / 12 und Klasse C - / 16.  Somit belegen die externen und internen IP-Adressen verschiedener Klassen unterschiedliche Bereiche. <br><br>  Wir haben wiederholt diskutiert, was der Unterschied zwischen privaten und √∂ffentlichen IP-Adressen ist.  Wenn wir einen Router und eine Gruppe interner IP-Adressen haben und diese versuchen, auf das Internet zuzugreifen, konvertiert der Router diese im Allgemeinen in externe IP-Adressen.  Interne Adressen werden ausschlie√ülich in lokalen Netzwerken und nicht im Internet verwendet. <br><br>  Wenn ich die Netzwerkparameter meines Computers √ºber die Befehlszeile ansehe, wird dort meine interne LAN-IP-Adresse 192.168.1.103 angezeigt. <br><br><img src="https://habrastorage.org/webt/hq/tx/wf/hqtxwfez60be9ufwpywe72ldll4.jpeg"><br><br>  Um Ihre √∂ffentliche IP-Adresse herauszufinden, k√∂nnen Sie einen Internetdienst wie "Was ist meine IP" verwenden?  Wie Sie sehen k√∂nnen, unterscheidet sich die externe Adresse des Computers 78.100.196.163 von seiner internen Adresse. <br><br><img src="https://habrastorage.org/webt/wm/1n/w0/wm1nw0n_syo74vtnmskictzyx8e.jpeg"><br><br>  In allen F√§llen ist mein Computer im Internet genau anhand der externen IP-Adresse sichtbar.  Die interne Adresse meines Computers lautet also 192.168.1.103 und die externe Adresse 78.100.196.163.  Die interne Adresse wird nur f√ºr die lokale Kommunikation verwendet, Sie k√∂nnen damit nicht auf das Internet zugreifen, daf√ºr ben√∂tigen Sie eine √∂ffentliche IP-Adresse.  Sie k√∂nnen sich daran erinnern, warum die Trennung in private und √∂ffentliche Adressen vorgenommen wurde, indem Sie das Video-Tutorial Tag 3 lesen. <br><br>  √úberlegen Sie, was NAT ist.  Es gibt drei Arten von NAT: statisches, dynamisches und √ºberladenes NAT oder PAT. <br><br><img src="https://habrastorage.org/webt/sq/os/yh/sqosyhlr7iwvdpydrfys3xigo9m.jpeg"><br><br>  In Cisco gibt es 4 Begriffe, die NAT beschreiben.  Wie gesagt, NAT ist ein Mechanismus zum Konvertieren interner Adressen in externe.  Wenn ein mit dem Internet verbundenes Ger√§t ein Paket von einem anderen Ger√§t aus dem lokalen Netzwerk empf√§ngt, wird dieses Paket einfach verworfen, da das Format der internen Adresse nicht mit dem Format der im globalen Internet verwendeten Adressen √ºbereinstimmt.  Daher muss das Ger√§t eine √∂ffentliche IP-Adresse erhalten, um auf das Internet zugreifen zu k√∂nnen. <br>  Der erste Begriff lautet also Inside Local, dh die IP-Adresse des Hosts im internen LAN.  Einfach ausgedr√ºckt ist dies die prim√§re Quelladresse vom Typ 192.168.1.10.  Der zweite Begriff, Inside Global, ist die IP-Adresse des lokalen Hosts, unter der sie im externen Netzwerk sichtbar ist.  In unserem Fall ist dies die IP-Adresse des externen Ports des Routers 200.124.22.10. <br><br><img src="https://habrastorage.org/webt/b_/ia/sj/b_iasjqtn7zpepgxzpykgutrnxg.jpeg"><br><br>  Sie k√∂nnen sagen, dass Inside Local eine private IP-Adresse und Inside Global eine √∂ffentliche IP-Adresse ist.  Denken Sie daran, dass der Begriff "Innen" f√ºr die Verkehrsquelle und "Au√üen" f√ºr den Zweck des Verkehrs verwendet wird.  Outside Local ist die IP-Adresse des Hosts im externen Netzwerk, unter der sie f√ºr das interne Netzwerk sichtbar ist.  Einfach ausgedr√ºckt ist dies die Empf√§ngeradresse, die vom internen Netzwerk aus sichtbar ist.  Ein Beispiel f√ºr eine solche Adresse ist die IP-Adresse 200.124.22.100 eines Ger√§ts im Internet. <br><br><img src="https://habrastorage.org/webt/ey/sm/o-/eysmo-pr4ikwlwag52qkmag4zeu.jpeg"><br><br>  Outside Global ist die Host-IP-Adresse, die im externen Netzwerk angezeigt wird.  In den meisten F√§llen sehen die externen lokalen und externen globalen Adressen gleich aus, da die Ziel-IP-Adresse auch nach der Konvertierung f√ºr die Quelle dieselbe ist wie vor der Konvertierung. <br><br><img src="https://habrastorage.org/webt/bg/tn/xq/bgtnxq5blz5qdtgtnpqddu8rr08.jpeg"><br><br>  √úberlegen Sie, was statisches NAT ist.  Statisches NAT bedeutet eine Eins-zu-Eins-Konvertierung von internen IP-Adressen in externe oder eine Eins-zu-Eins-Konvertierung.  Wenn Ger√§te Datenverkehr ins Internet senden, werden ihre internen internen Adressen in interne interne Adressen konvertiert. <br><br><img src="https://habrastorage.org/webt/oo/n6/ql/oon6qlova0vcwlg7bovpduisxho.jpeg"><br><br>  Es gibt 3 Ger√§te in unserem lokalen Netzwerk, und wenn sie online gehen, erh√§lt jedes seine eigene Inside Global-Adresse.  Diese Adressen werden Verkehrsquellen statisch zugewiesen.  Das Eins-zu-Eins-Prinzip bedeutet, dass 100 Ger√§te, die sich im lokalen Netzwerk befinden, 100 externe Adressen erhalten. <br><br>  NAT schien das Internet zu retten, was mit √∂ffentlichen IP-Adressen endete.  Dank NAT k√∂nnen viele Unternehmen und viele Netzwerke eine gemeinsame externe IP-Adresse haben, in die lokale Ger√§teadressen beim Zugriff auf das Internet konvertiert werden.  Sie k√∂nnen sagen, dass in diesem Fall von statischem NAT die Anzahl der Adressen nicht gespeichert wird, da hundert lokalen Computern hundert externe Adressen zugewiesen sind und Sie absolut Recht haben.  Statisches NAT hat jedoch noch einige Vorteile. <br><br>  Zum Beispiel haben wir einen Server mit einer internen IP-Adresse von 192.168.1.100.  Wenn ein Ger√§t aus dem Internet ihn kontaktieren m√∂chte, kann er dies nicht √ºber die interne Zieladresse tun. Dazu muss er die externe Adresse des Servers 200.124.22.3 verwenden.  Wenn statisches NAT im Router konfiguriert ist, wird der gesamte an 200.124.22.3 adressierte Datenverkehr automatisch an 192.168.1.100 weitergeleitet.  Dies erm√∂glicht den externen Zugriff auf Ger√§te im lokalen Netzwerk, in diesem Fall auf den Webserver des Unternehmens, was in einigen F√§llen erforderlich sein kann. <br><br>  Betrachten Sie dynamisches NAT.  Es ist statisch sehr √§hnlich, weist jedoch nicht jedem lokalen Ger√§t permanente externe Adressen zu.  Zum Beispiel haben wir 3 lokale Ger√§te und nur 2 externe Adressen.  Wenn das zweite Ger√§t online gehen m√∂chte, wird ihm die erste freie IP-Adresse zugewiesen.  Wenn der Webserver danach online gehen m√∂chte, weist ihm der Router die zweite verf√ºgbare externe Adresse zu.  Wenn das erste Ger√§t danach zum externen Netzwerk wechseln m√∂chte, ist keine IP-Adresse f√ºr das Ger√§t verf√ºgbar, und der Router verwirft sein Paket. <br><br><img src="https://habrastorage.org/webt/id/uf/lt/iduflt-hi8gyfgpgkotj8sagyxs.jpeg"><br><br>  Wir k√∂nnen Hunderte von Ger√§ten mit internen IP-Adressen haben, und jedes dieser Ger√§te kann online gehen.  Da wir jedoch keine statische Zuweisung externer Adressen haben, k√∂nnen nicht mehr als zwei von hundert Ger√§ten gleichzeitig auf das Internet zugreifen, da wir nur zwei dynamisch zugewiesene externe Adressen haben. <br><br>  Cisco-Ger√§te haben standardm√§√üig eine feste Adress√ºbersetzungszeit von 24 Stunden.  Sie kann jederzeit auf 1,2,3, 10 Minuten ge√§ndert werden.  Nach dieser Zeit werden externe Adressen freigegeben und automatisch an den Adresspool zur√ºckgegeben.  Wenn zu diesem Zeitpunkt das erste Ger√§t online gehen m√∂chte und eine externe Adresse verf√ºgbar ist, erh√§lt es diese.  Der Router enth√§lt eine NAT-Tabelle, die dynamisch aktualisiert wird. Bis zum Ablauf der Konvertierungszeit wird die zugewiesene Adresse vom Ger√§t gespeichert.  Einfach ausgedr√ºckt, dynamisches NAT funktioniert nach dem Prinzip: "Wer zuerst kam, hat gedient." <br><br>  √úberlegen Sie, was ein √ºberladenes NAT oder PAT ausmacht.  Dies ist die h√§ufigste Art von NAT.  Ihr Heimnetzwerk kann viele Ger√§te haben - einen PC, ein Smartphone, einen Laptop, ein Tablet, und alle sind mit einem Router verbunden, der eine externe IP-Adresse hat.  Mit PAT k√∂nnen viele Ger√§te mit internen IP-Adressen gleichzeitig unter einer externen IP-Adresse online gehen.  Dies ist m√∂glich, weil jede private interne IP-Adresse w√§hrend einer Kommunikationssitzung eine bestimmte Portnummer verwendet. <br>  Angenommen, wir haben eine √∂ffentliche Adresse 200.124.22.1 und viele lokale Ger√§te.  Wenn Sie auf das Internet zugreifen, erhalten alle diese Hosts dieselbe Adresse 200.124.22.1.  Das einzige, was sie voneinander unterscheidet, ist die Portnummer. <br>  Wenn Sie sich an die Diskussion der Transportschicht erinnern, wissen Sie, dass die Transportschicht Portnummern enth√§lt und die Quellportnummer eine Zufallszahl ist. <br><br><img src="https://habrastorage.org/webt/bd/6v/rd/bd6vrdsnsfezgoads3mbzzphcco.jpeg"><br><br>  Angenommen, im externen Netzwerk befindet sich ein Host mit einer IP-Adresse von 200.124.22.10, der mit dem Internet verbunden ist.  Wenn der Computer 192.168.1.11 den Computer 200.124.22.10 kontaktieren m√∂chte, wird ein zuf√§lliger Quellport 51772 erstellt. In diesem Fall ist der Zielport des Computers im externen Netzwerk 80. <br><br>  Wenn der Router ein lokales Computerpaket empf√§ngt, das an ein externes Netzwerk gesendet wurde, √ºbersetzt er seine lokale lokale lokale Adresse in die interne globale Adresse 200.124.22.1 und weist dem Port den Port 23556 zu. Das Paket erreicht den Computer 200.124.22.10 und muss eine Antwort gem√§√ü dem Handshake-Verfahren zur√ºcksenden. Das Ziel ist die Adresse 200.124.22.1 und Port 23556. <br><br>  Der Router verf√ºgt √ºber eine NAT-√úbersetzungstabelle. Nachdem er ein Paket von einem externen Computer empfangen hat, ermittelt er die Inside Local-Adresse, die der Inside Global-Adresse entspricht, als 192.168.1.11: 51772 und leitet das Paket an diesen weiter.  Danach kann die Verbindung zwischen den beiden Computern als hergestellt betrachtet werden. <br>  Gleichzeitig k√∂nnen Sie Hunderte von Ger√§ten haben, die dieselbe Adresse 200.124.22.1 f√ºr die Kommunikation verwenden, jedoch unterschiedliche Portnummern, sodass alle gleichzeitig online gehen k√∂nnen.  Aus diesem Grund ist PAT eine so beliebte √úbersetzungsmethode. <br><br>  Schauen wir uns die Konfiguration von statischem NAT an.  F√ºr jedes Netzwerk m√ºssen zun√§chst die Eingangs- und Ausgangsschnittstellen festgelegt werden.  Das Diagramm zeigt einen Router, √ºber den Datenverkehr von Port G0 / 0 zu Port G0 / 1 √ºbertragen wird, dh von einem internen Netzwerk zu einem externen Netzwerk.  Somit haben wir eine Eingabeschnittstelle 192.168.1.1 und eine Ausgabeschnittstelle 200.124.22.1. <br><br><img src="https://habrastorage.org/webt/rj/nc/o6/rjnco6mmewiiildmwtu0gn8ixs4.jpeg"><br><br>  Um NAT zu konfigurieren, gehen wir zur G0 / 0-Schnittstelle und stellen die IP-Parameter 192.168.1.1 255.255.255.0 IP-Parameter ein und geben an, dass diese Schnittstelle die Eingabe mit dem Befehl ip nat inside ist. <br><br><img src="https://habrastorage.org/webt/rf/dd/xt/rfddxtoq7k4bti2dprru9jriheq.jpeg"><br><br>  In √§hnlicher Weise konfigurieren wir NAT auf der G0 / 1-Ausgabeschnittstelle, indem wir die IP-Adresse 200.124.22.1, die Subnetzmaske 255.255.255.0 und die IP-Adresse au√üerhalb angeben.  Denken Sie daran, dass die dynamische NAT-√úbersetzung immer von der Eingabe zur Ausgabeschnittstelle von innen nach au√üen erfolgt.  F√ºr dynamisches NAT kommt die Antwort nat√ºrlich √ºber die Ausgabeschnittstelle zur Eingabeschnittstelle, aber wenn der Verkehr initiiert wird, wird die Ein- / Aus-Richtung ausgel√∂st.  Bei statischem NAT kann die Verkehrsinitiierung in eine der Richtungen erfolgen - In-Out oder Out-In. <br><br>  Als n√§chstes m√ºssen wir eine Tabelle mit statischem NAT erstellen, in der jede lokale Adresse einer separaten globalen Adresse entspricht.  In unserem Fall gibt es 3 Ger√§te, daher besteht die Tabelle aus 3 Eintr√§gen, die die Inside Local IP-Adresse der Quelle angeben, die in die Inside Global-Adresse √ºbersetzt wird: ip nat inside static 192.168.1.10 200.124.22.1. <br>  In statischem NAT schreiben Sie daher manuell eine √úbersetzung f√ºr jede lokale Hostadresse vor.  Jetzt gehe ich zu Packet Tracer und nehme die oben beschriebenen Einstellungen vor. <br><br><img src="https://habrastorage.org/webt/mz/td/sh/mztdshpsmzcjt5zsb7xuifiacp8.jpeg"><br><br>  Oben haben wir den Server 192.168.1.100, unten den Computer 192.168.1.10 und ganz unten den Computer 192.168.1.11.  Der G0 / 0-Port von Router0 hat eine IP-Adresse von 192.168.1.1 und der G0 / 1-Port hat 200.124.22.1.  In der "Cloud", die das Internet darstellt, habe ich Router1 platziert, dem eine IP-Adresse von 200.124.22.10 zugewiesen wurde. <br><br>  Ich gehe in die Einstellungen von Router1 und gebe den Befehl debug ip icmp ein.  Sobald der Ping dieses Ger√§t erreicht, wird im Einstellungsfenster eine Debug-Meldung angezeigt, die angibt, um welche Art von Paket es sich handelt. <br>  Lassen Sie uns den Router Router0 einrichten.  Ich gehe in den globalen Einstellungsmodus und rufe die G0 / 0-Schnittstelle auf.  Als n√§chstes gebe ich den Befehl ip nat inside ein, gehe dann zur g0 / 1-Schnittstelle und gebe den Befehl ip nat external ein.  Daher habe ich die Eingangs- und Ausgangsschnittstellen des Routers zugewiesen.  Jetzt muss ich die IP-Adressen manuell konfigurieren, dh die Zeilen der obigen Tabelle in die Einstellungen √ºbertragen: <br><br>  IP nat inside source static 192.168.1.10 200.124.22.1 <br>  IP nat inside source static 192.168.1.11 200.124.22.2 <br>  Ip nat inside source static 192.168.1.100 200.124.22.3 <br><br><img src="https://habrastorage.org/webt/tb/px/-f/tbpx-flkjx4vwlsd6ee2rljrky0.jpeg"><br><br>  Jetzt werde ich Router1 von jedem unserer Ger√§te anpingen und sehen, welche IP-Adressen der empfangene Ping anzeigt.  Dazu platziere ich das ge√∂ffnete CLI-Fenster des R1-Routers auf der rechten Seite des Bildschirms, um Debug-Meldungen anzuzeigen.  Jetzt gehe ich zum PC0-Befehlszeilenterminal und pinge die Adresse 200.124.22.10 an.  Danach erscheint im Fenster eine Meldung, dass der Ping von der IP-Adresse 200.124.22.1 empfangen wurde.  Dies bedeutet, dass die IP-Adresse des lokalen Computers 192.168.1.10 in die globale Adresse 200.124.22.1 konvertiert wurde. <br><br><img src="https://habrastorage.org/webt/ax/ei/g6/axeig6imwtfp-bxxjjmz0uh6uum.jpeg"><br><br>  Ich mache dasselbe mit dem n√§chsten lokalen Computer und sehe, dass seine Adresse in 200.124.22.2 konvertiert wurde.  Dann sende ich Ping vom Server und sehe die Adresse 200.124.22.3. <br>  Wenn der Datenverkehr vom LAN-Ger√§t den Router erreicht, auf dem statisches NAT konfiguriert ist, konvertiert der Router gem√§√ü der Tabelle die lokale IP-Adresse in die globale und sendet den Datenverkehr an das externe Netzwerk.  Um die NAT-Tabelle zu √ºberpr√ºfen, gebe ich den Befehl show ip nat translations ein. <br><br><img src="https://habrastorage.org/webt/5d/-9/rx/5d-9rxvls9gdzoz_aanqpbdxeqe.jpeg"><br><br>  Jetzt k√∂nnen wir alle Transformationen sehen, die der Router vornimmt.  In der ersten Spalte von Inside Global befindet sich die Adresse des Ger√§ts vor der √úbertragung, dh die Adresse, unter der das Ger√§t vom externen Netzwerk aus sichtbar ist, und dann die Adresse Inside Local, dh die Adresse des Ger√§ts im lokalen Netzwerk.  Die dritte Spalte zeigt Outside Local und die vierte die Outside Global-Adresse, die beide identisch sind, da die Ziel-IP-Adresse nicht √ºbersetzt wird.  Wie Sie sehen, wurde die Tabelle nach einigen Sekunden gel√∂scht, da in Packet Tracer ein kurzes Ping-Timeout festgelegt wurde. <br><br>  Ich kann den Server vom R1-Router unter der Adresse 200.124.22.3 anpingen. Wenn ich zu den Router-Einstellungen zur√ºckkehre, k√∂nnen Sie sehen, dass die Tabelle erneut mit vier Ping-Zeilen mit der konvertierten Zieladresse 192.168.1.100 gef√ºllt wurde. <br><br><img src="https://habrastorage.org/webt/xx/5i/nq/xx5inqtiknpu90hl-mqjrheahti.jpeg"><br><br>  Wie gesagt, selbst wenn das Broadcast-Timeout funktioniert hat und der Datenverkehr von einer externen Quelle initiiert wird, wird der NAT-Mechanismus automatisch aktiviert.  Dies geschieht nur bei Verwendung von statischem NAT. <br><br>  Nun wollen wir sehen, wie dynamisches NAT funktioniert.  In unserem Beispiel gibt es zwei √∂ffentliche Adressen f√ºr drei Ger√§te im lokalen Netzwerk. Es k√∂nnen jedoch Dutzende und Hunderte solcher privaten Hosts vorhanden sein.  Gleichzeitig k√∂nnen nur 2 Ger√§te online gehen.  √úberlegen Sie, was zus√§tzlich der Unterschied zwischen statischem und dynamischem NAT ist. <br><br>  Wie im vorherigen Fall m√ºssen Sie zuerst die Eingabe- und Ausgabeschnittstellen des Routers bestimmen.  Als N√§chstes erstellen wir eine Art Zugriffsliste, aber dies ist nicht die ACL, √ºber die wir in der vorherigen Lektion gesprochen haben.  Diese Zugriffsliste wird verwendet, um den Datenverkehr zu identifizieren, den wir konvertieren m√∂chten.  Hier erscheint der neue Begriff ‚Äûinteressanter Verkehr‚Äú oder ‚Äûinteressanter Verkehr‚Äú.  Dies ist Datenverkehr, der Sie aus irgendeinem Grund interessiert. Wenn dieser Datenverkehr mit den Bedingungen der Zugriffsliste √ºbereinstimmt, f√§llt er unter die Aktion von NAT und wird konvertiert.  Dieser Begriff gilt in vielen F√§llen f√ºr den Datenverkehr. Beispielsweise wird bei VPNs ‚Äûinteressant‚Äú als Datenverkehr bezeichnet, der durch einen VPN-Tunnel geleitet wird. <br><br>  Wir m√ºssen eine ACL erstellen, die interessanten Verkehr identifiziert. In unserem Fall ist dies der Verkehr des gesamten Netzwerks 192.168.1.0, zusammen mit dem die Umkehrmaske 0.0.0.255 angezeigt wird. <br><br><img src="https://habrastorage.org/webt/rq/ep/rp/rqeprpll-v1nzyru_dewaflnj9o.jpeg"><br><br>  Dann m√ºssen wir einen NAT-Pool erstellen, f√ºr den wir den Befehl ip nat pool &lt;Poolname&gt; verwenden und den Pool der IP-Adressen 200.124.22.1 200.124.22.2 angeben.  Dies bedeutet, dass wir nur zwei externe IP-Adressen bereitstellen.  Als N√§chstes verwendet der Befehl das Schl√ºsselwort netmask und gibt die Subnetzmaske 255.255.255.252 ein.  Das letzte Oktett der Maske ist (255 - die Anzahl der Pooladressen ist 1). Wenn Sie also 254 Adressen im Pool haben, lautet die Subnetzmaske 255.255.255.0.  Dies ist ein sehr wichtiger Parameter. Geben Sie daher beim Einrichten von dynamischem NAT unbedingt den richtigen Netzmaskenwert ein. <br><br>  Als n√§chstes verwenden wir einen Befehl, der den NAT-Mechanismus startet: ip nat innerhalb des Pools NWKING der Quellliste 1, wobei NWKING der Poolname ist und Liste 1 die ACL-Zugriffslistennummer 1 bedeutet.  Denken Sie daran: Damit dieser Befehl funktioniert, m√ºssen Sie zuerst einen Pool dynamischer Adressen und eine Zugriffsliste erstellen. <br><br>  Unter unseren Bedingungen kann das erste Ger√§t, das online gehen m√∂chte, dies tun, das zweite Ger√§t auch, aber das dritte muss warten, bis eine der Pooladressen frei ist.  Das Konfigurieren von dynamischem NAT besteht aus vier Schritten: Bestimmen der Eingabe- und Ausgabeschnittstelle, Bestimmen des ‚Äûinteressanten‚Äú Datenverkehrs, Erstellen eines NAT-Pools und Einrichten. <br>  Jetzt gehen wir zu Packet Tracer und versuchen, dynamisches NAT zu konfigurieren.  Zuerst m√ºssen wir die statischen NAT-Einstellungen entfernen, f√ºr die wir die Befehle nacheinander eingeben: <br><br>  no Ip nat inside source static 192.168.1.10 200.124.22.1 <br>  no Ip nat inside source static 192.168.1.11 200.124.22.2 <br>  no Ip nat inside source static 192.168.1.100 200.124.22.3. <br><br>  Als N√§chstes erstelle ich mit dem Befehl access-list 1 allow 192.168.1.0 0.0.0.255 die Zugriffsliste Liste 1 f√ºr das gesamte Netzwerk und konfiguriere den NAT-Pool mit dem Befehl ip nat pool NWKING 200.124.22.1 200.124.22.2 netmask 255.255.255.252.  In diesem Befehl habe ich den Namen des Pools, die Adressen, die ihn eingeben, und die Netzwerkmaske angegeben. <br><br>  Dann gebe ich mit dem Befehl ip nat inside source list 1 an, ob dieses NAT intern oder extern ist und aus welcher Quelle NAT Informationen erhalten soll, in unserem Fall list. Danach fragt das System, ob der gesamte Pool oder eine bestimmte Schnittstelle ben√∂tigt wird .  Ich w√§hle Pool, weil wir mehr als 1 externe Adresse haben.  Wenn Sie Schnittstelle ausw√§hlen, m√ºssen Sie einen Port mit einer bestimmten IP-Adresse angeben.  In der endg√ºltigen Form sieht der Befehl folgenderma√üen aus: ip nat innerhalb der Quellliste 1 Pool NWKING.  Jetzt besteht dieser Pool aus zwei Adressen 200.124.22.1 200.124.22.2. Sie k√∂nnen diese jedoch frei √§ndern oder neue Adressen hinzuf√ºgen, die nicht an eine bestimmte Schnittstelle gebunden sind. <br><br>   ,      ,     IP-        ,      .     ,      ,     NAT.     Router 1,     ,       3- . <br><br><img src="https://habrastorage.org/webt/io/yt/lk/ioytlkva1_ucbg0-llm4r5ckiy0.jpeg"><br><br>  ,    ,    ,  .      PC0  ,        .     Router 1, ,        200.124.22.1  200.124.22.2.    ,   ,      .       PC0,   ,   ,         200.124.22.1. <br><br>     NAT     ?     Router0    clear ip nat translation *  ¬´¬ª   .          show ip nat translation,     . <br><br>    NAT   show ip nat statistics. <br><br><img src="https://habrastorage.org/webt/c8/o0/ne/c8o0neryfwlityjhd2zb_v5mc98.jpeg"><br><br>    ,       ,     NAT/PAT.  ,    0,       .      ,      hits  misses (          ),     . <br><br>         IP- ‚Äì  NAT,  PAT.   PAT     ,      NAT:      ,  ¬´¬ª ,   NAT   PAT.         ,     ,     ,    PAT         .     NAT  PAT      overload,     .      NAT    PAT. <br><br><img src="https://habrastorage.org/webt/rs/ho/mv/rshomvllaqmpjgqhp36eferkb9o.jpeg"><br><br>  ,        NWKING, , 200.124.22.1,               255.255.255.0.   ,    ip nat 1 pool NWKING 200.124.22.1 200.124.22.1 netmask 255.255.255.0  source interface    200.124.22.1  G0/1.               IP-. <br><br>        IP-,      .       ,            .  NAT   ,       ,        ,   NAT IP-   .      ,   IP-       . <br><br>      Packet Tracer.      NAT  no Ip nat inside source list 1 NWKING    NAT    no Ip nat pool NWKING 200.124.22.1 200.124.22.2 netmask 225.255.255.252. <br><br>      PAT  Ip nat pool NWKING 200.124.22.2 200.124.22.2 netmask 225.255.255.255.      IP-,     ,       200.124.22.1,     200.124.22.2.     ,      . <br><br>    PAT  Ip nat inside source list 1 pool NWKING overload.          PAT.    ,     ,    ,     PC0 Router1   200.124.22.10.       ,   ,   ,    ,  IP- 200.124.22.2.      ,   PC1   Server0. <br><br> ,       Router0.  ,    ,      ,       Router1  IP-  200.124.22.2. <br><br><img src="https://habrastorage.org/webt/fh/tf/gp/fhtfgp0x3n7fghja8yjs_qtp7ci.jpeg"><br><br>    show ip nat statistics,    PAT. <br><br><img src="https://habrastorage.org/webt/na/vq/l2/navql2ahsncx0c5utra8t5efxbi.jpeg"><br><br>  ,    ,   ,  12,      . <br><br>    -  ‚Äî   Ip nat inside source list 1 interface gigabit Ethernet g0/1 overload.        PC0, ,      200.124.22.1,     !    :      ,        ,     NAT-   IP-   .             . <br>      ,      .  Packet Tracer,            NAT  PAT.       ICND1 ‚Äî    CCNA,    , ,   . <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/l5wuJFoeVDQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Vielen Dank f√ºr Ihren Aufenthalt bei uns.  Gef√§llt dir unser Artikel?  M√∂chten Sie weitere interessante Materialien sehen?  Unterst√ºtzen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% f√ºr Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir f√ºr Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit √ºber VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verf√ºgbar). <br><br>  <b>Dell R730xd 2 mal g√ºnstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2,6 GHz 14C 64 GB DDR4 4 x 960 GB SSD 1 Gbit / s 100 TV von 199 US-Dollar</a> in den Niederlanden!</b>  <b><b>Dell R420 - 2x E5-2430 2,2 GHz 6C 128 GB DDR3 2x960 GB SSD 1 Gbit / s 100 TB - ab 99 US-Dollar!</b></b>  Lesen Sie mehr √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgeb√§udes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern f√ºr 9.000 Euro f√ºr einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de465789/">https://habr.com/ru/post/de465789/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de465775/index.html">LTSP-Server basierend auf CentOS7</a></li>
<li><a href="../de465779/index.html">Yealink T19 Auto-Provisioning + Dynamisches Adressbuch</a></li>
<li><a href="../de465781/index.html">Wie ich einen benutzerdefinierten Okhttp-Breaker durch Kotlins Coroutinen gemacht habe</a></li>
<li><a href="../de465783/index.html">Russischer Spielentwickler, bedeutungslos und gnadenlos</a></li>
<li><a href="../de465787/index.html">Liebe die Ziege</a></li>
<li><a href="../de465791/index.html">Sicherheitsl√ºcken bei Einzelh√§ndlern - drei F√§lle, in denen OTP in der Anfrage abgerufen werden konnte</a></li>
<li><a href="../de465793/index.html">Frontend Weekly Digest (26. August - 1. September 2019)</a></li>
<li><a href="../de465795/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 378 (26. August - 1. September 2019)</a></li>
<li><a href="../de465797/index.html">Genetische Algorithmen (oder der Klient ist immer K√∂nig - und oft ein Narr)</a></li>
<li><a href="../de465801/index.html">Food Design Digest, August 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>