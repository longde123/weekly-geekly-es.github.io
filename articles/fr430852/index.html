<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüöí ü•¢ üë®üèΩ Coh√©rence et garanties ACID dans les syst√®mes de stockage distribu√©s üîÜ ü§† ‚óæÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les syst√®mes distribu√©s sont utilis√©s lorsqu'il existe un besoin de mise √† l'√©chelle horizontale pour fournir des indicateurs de performance accrus qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Coh√©rence et garanties ACID dans les syst√®mes de stockage distribu√©s</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/gridgain/blog/430852/">  Les syst√®mes distribu√©s sont utilis√©s lorsqu'il existe un besoin de mise √† l'√©chelle horizontale pour fournir des indicateurs de performance accrus qu'un syst√®me √† √©chelle verticale n'est pas en mesure de fournir suffisamment d'argent. <br><br>  Comme la transition d'un paradigme √† un seul thread √† un multi-thread, la migration vers un syst√®me distribu√© n√©cessite une sorte d'immersion et une compr√©hension de son fonctionnement √† l'int√©rieur, ce √† quoi vous devez faire attention. <br><br>  L'un des probl√®mes auxquels est confront√©e une personne qui souhaite migrer un projet vers un syst√®me distribu√© ou d√©marrer un projet dessus est le produit √† choisir. <br><br>  En tant qu'entreprise qui a ¬´mang√© un chien¬ª dans le d√©veloppement de syst√®mes de ce type, nous aidons nos clients √† prendre des d√©cisions √©clair√©es concernant les syst√®mes de stockage distribu√©s.  Nous publions √©galement une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©rie de webinaires</a> pour un public plus large qui se concentrent sur les principes de base dans un langage simple, et quelles que soient les pr√©f√©rences alimentaires sp√©cifiques aident √† cartographier les fonctionnalit√©s importantes pour le rendre plus facile √† choisir. <br><br>  Cet article est bas√© sur nos documents sur la coh√©rence et les garanties ACID dans les syst√®mes distribu√©s. <br><a name="habracut"></a><br><h1>  Qu'est-ce que c'est et pourquoi est-il n√©cessaire? </h1><br>  ¬´ <b>La</b> <b>coh√©rence des</b> <b>donn√©es</b> (parfois <i>la coh√©rence des donn√©es</i> ) est <i>la coh√©rence des donn√©es</i> entre elles, l'int√©grit√© des donn√©es et la coh√©rence interne.¬ª  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia</a> ) <br><br>  La coh√©rence implique qu'√† tout moment donn√©, les applications peuvent √™tre s√ªres qu'elles travaillent avec la version correcte et techniquement pertinente des donn√©es, et peuvent s'y fier pour prendre des d√©cisions. <br><br>  Dans les syst√®mes distribu√©s, assurer la coh√©rence devient de plus en plus difficile et plus co√ªteux, car toute une s√©rie de nouveaux d√©fis se posent li√©s √† l'√©change de r√©seau entre diff√©rents n≈ìuds, la possibilit√© de d√©faillance de n≈ìuds individuels et - souvent - le manque d'une m√©moire unique pouvant servir de v√©rification. <br><br>  Par exemple, si j'ai un syst√®me de 4 n≈ìuds: A, B, C et D, qui sert les transactions bancaires, et que les n≈ìuds C et D sont s√©par√©s de A et B (disons, en raison de probl√®mes de r√©seau), il est fort possible que je ne le sois plus maintenant J'ai acc√®s √† une partie de la transaction.  Comment dois-je agir dans cette situation?  Diff√©rents syst√®mes adoptent des approches diff√©rentes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/8p/gw/lm8pgwmqnfcsp0uifu1hgiizhqg.png"></div><br>  Au niveau sup√©rieur, il y a 2 directions cl√©s qui sont exprim√©es dans le th√©or√®me CAP. <br><br>  ¬´ <b>Le th√©or√®me de CAP</b> (√©galement connu sous le nom <b>de th√©or√®me de Brewer</b> ) est une d√©claration heuristique selon laquelle dans toute impl√©mentation de l'informatique distribu√©e, il est possible de ne pas fournir plus de deux des trois propri√©t√©s suivantes: <br><br><ul><li>  coh√©rence des donn√©es (coh√©rence angl.) - dans tous les n≈ìuds de calcul √† un moment donn√©, les donn√©es ne se contredisent pas; </li><li>  disponibilit√© (disponibilit√© en anglais) - toute demande √† un syst√®me distribu√© se termine par une r√©ponse correcte, mais sans garantie que les r√©ponses de tous les n≈ìuds du syst√®me correspondent; </li><li>  tol√©rance de partition - la division d'un syst√®me distribu√© en plusieurs sections isol√©es n'entra√Æne pas une r√©ponse incorrecte de chaque section. </li></ul><br>  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia</a> ) <br><br>  Lorsque le th√©or√®me CAP parle de coh√©rence, il implique une d√©finition assez stricte, y compris la lin√©arisation des enregistrements et des lectures, et ne stipule que la coh√©rence lors de l'√©criture de valeurs individuelles.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Martin Kleppman</a> ) <br><br>  Le th√©or√®me du CAP dit que si nous voulons √™tre r√©sistants aux probl√®mes de r√©seau, alors en g√©n√©ral nous devons choisir de sacrifier: coh√©rence ou accessibilit√©.  Il existe √©galement une version √©tendue de ce th√©or√®me - PACELC ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia</a> ), qui parle en outre du fait que m√™me en l'absence de probl√®mes de r√©seau, nous devons choisir entre la vitesse de r√©ponse et la coh√©rence. <br><br>  Et m√™me si, √† premi√®re vue, originaire du monde des SGBD classiques, il semble que le choix soit √©vident et que la coh√©rence soit la chose la plus importante que nous ayons, c'est loin d'√™tre toujours le cas, ce qui illustre clairement la croissance explosive d'un certain nombre de SGBD NoSQL qui ont fait un choix diff√©rent et Malgr√© cela, ils ont une √©norme base d'utilisateurs.  Apache Cassandra avec sa fameuse consistance √©ventuelle en est un bon exemple. <br><br>  Tout cela est d√ª au fait que c'est un <i>choix</i> qui implique que nous sacrifions quelque chose, et nous ne sommes pas toujours pr√™ts √† le sacrifier. <br><br>  Souvent, le probl√®me de coh√©rence dans les syst√®mes distribu√©s est r√©solu simplement en abandonnant cette coh√©rence. <br><br>  Mais il est n√©cessaire et important de comprendre quand le rejet de cette coh√©rence est acceptable, et quand il s'agit d'une exigence m√©tier critique. <br><br>  Par exemple, si je con√ßois un composant qui est responsable du stockage des sessions utilisateur, ici, tr√®s probablement, la coh√©rence n'est pas si importante pour moi, et la perte de donn√©es n'est pas critique si elle ne se produit que dans des cas probl√©matiques - tr√®s rarement.  Le pire qui puisse arriver est que l'utilisateur devra se connecter, et pour de nombreuses entreprises, cela aura peu d'effet sur ses performances financi√®res. <br><br>  Si je fais des analyses sur le flux de donn√©es √† partir de capteurs, dans de nombreux cas, il n'est absolument pas critique pour moi de perdre certaines donn√©es et d'obtenir un sous-√©chantillonnage pendant une courte p√©riode, surtout si je vois enfin les donn√©es. <br><br>  Mais si je fais un syst√®me bancaire, la coh√©rence des transactions en esp√®ces est critique pour mon entreprise.  Si j‚Äôai accumul√© une p√©nalit√© sur le pr√™t d‚Äôun client parce que je n‚Äôai tout simplement pas vu le paiement effectu√© √† temps, m√™me s‚Äôil √©tait dans le syst√®me, c‚Äôest tr√®s, tr√®s mauvais.  De m√™me que si le client peut retirer tout l'argent de ma carte de cr√©dit plusieurs fois, car j'ai eu des probl√®mes de r√©seau au moment de la transaction et les informations de retrait n'ont pas atteint une partie de mon cluster. <br><br>  Si vous effectuez un achat co√ªteux dans une boutique en ligne, vous ne voulez pas que votre commande soit oubli√©e, malgr√© le rapport de r√©ussite sur la page Web. <br><br>  Mais si vous optez pour la coh√©rence, vous sacrifiez l'accessibilit√©.  Et souvent, cela est attendu, tr√®s probablement, vous l'avez rencontr√© personnellement plus d'une fois. <br><br>  Il vaut mieux que le panier de la boutique en ligne indique ¬´essayez plus tard, un SGBD distribu√© n'est pas disponible¬ª que s'il signale le succ√®s et oublie la commande.  Il vaut mieux obtenir un refus dans une transaction en raison de l‚Äôindisponibilit√© des services de la banque qu‚Äôun battement sur le succ√®s puis la proc√©dure avec la banque du fait qu‚Äôil a oubli√© que vous avez pay√© le pr√™t. <br><br>  Enfin, si nous regardons le th√©or√®me PACELC √©tendu, nous comprenons que m√™me dans le cas d'un fonctionnement r√©gulier du syst√®me, en choisissant la coh√©rence, nous pouvons sacrifier de faibles latences, obtenant un niveau potentiellement inf√©rieur de performances maximales. <br><br>  Par cons√©quent, r√©pondre √† la question ¬´pourquoi est-ce n√©cessaire?¬ª: Il est n√©cessaire s'il est essentiel que votre t√¢che dispose de donn√©es √† jour et coh√©rentes, et l'alternative vous apportera des pertes significatives sup√©rieures √† l'indisponibilit√© temporaire du service pendant la p√©riode de l'incident ou √† ses performances inf√©rieures. <br><br><h1>  Comment fournir cela? </h1><br>  Par cons√©quent, la premi√®re d√©cision que vous devez prendre est de savoir o√π vous en √™tes dans le th√©or√®me du CAP, vous voulez de la coh√©rence ou de la disponibilit√© en cas d'incident. <br><br>  Ensuite, vous devez comprendre √† quel niveau vous souhaitez apporter des modifications.  Peut-√™tre que vous avez juste assez d'enregistrements atomiques affectant un seul objet, comme MongoDB en √©tait capable (maintenant il √©tend cela en plus avec la prise en charge des transactions √† part enti√®re).  Permettez-moi de vous rappeler que le th√©or√®me CAP ne dit rien sur la coh√©rence des op√©rations d'√©criture impliquant plusieurs objets: le syst√®me peut bien √™tre CP (c'est-√†-dire pr√©f√©rer la coh√©rence d'accessibilit√©) et en m√™me temps ne fournir que des enregistrements atomiques uniques. <br><br>  Si cela ne vous suffit pas, nous commen√ßons √† aborder le concept de transactions ACID distribu√©es √† part enti√®re. <br><br>  Je note que m√™me lorsque nous entrons dans le nouveau monde courageux des transactions ACID distribu√©es, nous devons souvent sacrifier quelque chose.  Par exemple, un certain nombre de syst√®mes de stockage distribu√©s ont des transactions distribu√©es, mais uniquement dans une seule partition.  Ou, par exemple, le syst√®me peut ne pas prendre en charge la partie ¬´I¬ª au niveau dont vous avez besoin, sans isolement ou avec un nombre insuffisant de niveaux d'isolement. <br><br>  Ces restrictions ont souvent √©t√© faites pour une raison quelconque: soit pour simplifier l'impl√©mentation, soit, par exemple, pour am√©liorer les performances, soit pour autre chose.  Ils sont suffisants pour un grand nombre de cas, vous ne devez donc pas les consid√©rer comme des inconv√©nients √† eux seuls. <br><br>  Vous devez comprendre si ces restrictions sont un probl√®me pour votre sc√©nario sp√©cifique.  Sinon, vous avez plus de choix et vous pouvez donner plus de poids, par exemple, aux indicateurs de performance ou √† la capacit√© du syst√®me √† fournir une tol√©rance aux catastrophes, etc.  Enfin, il ne faut pas oublier que dans un certain nombre de syst√®mes ces param√®tres peuvent √™tre ajust√©s au point que le syst√®me peut √™tre CP ou AP selon la configuration. <br><br>  Si notre produit vise √† √™tre CP, il a g√©n√©ralement soit une approche de quorum pour la s√©lection des donn√©es, soit des n≈ìuds d√©di√©s qui sont les principaux propri√©taires des enregistrements, toutes les modifications de donn√©es les traversent, et en cas de probl√®mes de r√©seau, si ces n≈ìuds ma√Ætres ne peuvent pas donner la r√©ponse, on pense que les donn√©es, en principe, ne peuvent pas √™tre obtenues, ou l'arbitrage, lorsqu'un composant externe hautement accessible (par exemple, le cluster ZooKeeper) peut dire lequel des segments de cluster est le principal, contient la version actuelle des donn√©es et peut effectivement r√©pondre √† la demande  s. <br><br>  Enfin, si nous nous int√©ressons non seulement au CP, mais √† la prise en charge de transactions ACID distribu√©es √† part enti√®re, alors souvent une seule source de v√©rit√© est souvent utilis√©e, par exemple, le stockage sur disque centralis√©, o√π nos n≈ìuds, en fait, n'agissent qu'en tant que caches, qui peuvent √™tre d√©sactiv√©s dans temps de validation, ou le protocole de validation multiphase est appliqu√©. <br><br>  La premi√®re approche √† disque unique simplifie √©galement la mise en ≈ìuvre, donne de faibles latences sur les transactions distribu√©es, mais √©change en √©change une √©volutivit√© tr√®s limit√©e sur les charges avec des volumes d'enregistrement importants. <br><br>  La deuxi√®me approche donne beaucoup plus de libert√© dans la mise √† l'√©chelle et, √† son tour, est divis√©e en protocoles de validation en deux phases ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia</a> ) et en trois phases ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia</a> ). <br><br>  Consid√©rez une validation en deux phases qui utilise, par exemple, Apache Ignite. <br><br><img src="https://habrastorage.org/webt/ha/1a/qx/ha1aqxrjarg8g-x81wdn2i3xcoe.png"><br>  Ôøº <br>  La proc√©dure de validation est divis√©e en 2 phases: pr√©paration et validation. <br><br>  Dans la phase de pr√©paration, un message est pr√©par√© sur la pr√©paration de la validation, et chaque participant, si n√©cessaire, verrouille, effectue toutes les op√©rations jusqu'√† la validation r√©elle et y compris, et envoie la pr√©paration √† ses r√©pliques, si cela est suppos√© par le produit.  Si au moins l'un des participants a r√©pondu par un refus pour une raison quelconque ou s'est r√©v√©l√© indisponible - les donn√©es n'ont pas r√©ellement chang√©, il n'y a pas eu de validation.  Les participants annulent les modifications, lib√®rent les verrous et reviennent √† leur √©tat d'origine. <br><br>  Dans la phase de validation, l'ex√©cution r√©elle de la validation est envoy√©e aux n≈ìuds du cluster.  Si, pour une raison quelconque, certains des n≈ìuds n'√©taient pas disponibles ou ont r√©pondu avec une erreur, alors les donn√©es ont √©t√© entr√©es dans leur fichier de journalisation (car la pr√©paration a r√©ussi) et la validation peut dans tous les cas √™tre termin√©e au moins dans un √©tat en attente. <br><br>  Enfin, si le coordinateur √©choue, au stade de la pr√©paration, la validation sera annul√©e, au stade de la validation un nouveau coordinateur peut √™tre s√©lectionn√©, et si tous les n≈ìuds ont termin√© la pr√©paration, il peut v√©rifier et s'assurer que la phase de validation est termin√©e. <br><br>  Diff√©rents produits ont leurs propres fonctionnalit√©s d'impl√©mentation et d'optimisation.  Ainsi, par exemple, certains produits sont capables, dans certains cas, de r√©duire une validation en 2 phases √† une validation en une phase, gagnant consid√©rablement en performances. <br><br><h1>  Conclusions </h1><br>  Conclusion principale: les syst√®mes de stockage distribu√© sont un march√© assez d√©velopp√© et les produits qui s'y trouvent peuvent fournir une grande coh√©rence des donn√©es. <br><br>  De plus, les produits de cette cat√©gorie sont situ√©s √† diff√©rents points de l'√©chelle de coh√©rence, des produits enti√®rement AP sans aucune transactionnalit√© aux produits CP qui fournissent en outre des transactions ACID √† part enti√®re.  Certains produits peuvent √™tre configur√©s d'une mani√®re ou d'une autre. <br><br>  Lorsque vous choisissez ce dont vous avez besoin, vous devez tenir compte des besoins de votre cas et bien comprendre quels sacrifices et compromis vous √™tes pr√™t √† faire, car rien ne se passe gratuitement, et en choisissant un, vous refuserez tr√®s probablement autre chose. <br><br>  Lors de l'√©valuation des produits de ce c√¥t√©, il convient de pr√™ter attention aux √©l√©ments suivants: <br><br><ul><li>  o√π ils se trouvent dans le th√©or√®me CAP; </li><li>  Prend-il en charge les transactions ACID distribu√©es? </li><li>  quelles restrictions imposent-ils aux transactions distribu√©es (par exemple, uniquement dans une seule partition, etc.); </li><li>  Commodit√© et efficacit√© de l'utilisation des transactions distribu√©es, leur int√©gration dans d'autres composants du produit. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430852/">https://habr.com/ru/post/fr430852/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430840/index.html">Quelles preuves peuvent convaincre les math√©maticiens s'il n'y a pas de preuves rigoureuses?</a></li>
<li><a href="../fr430842/index.html">Nous utilisons la blockchain pour lutter contre la corruption et la cyberintimidation</a></li>
<li><a href="../fr430844/index.html">Comment choisir une batterie pour UPS</a></li>
<li><a href="../fr430846/index.html">Quoi de neuf: les d√©tails sur la mise en ≈ìuvre de la nouvelle architecture Zen 2 sont devenus connus</a></li>
<li><a href="../fr430850/index.html">Apple Metal chez MAPS.ME</a></li>
<li><a href="../fr430854/index.html">¬´JS devient plus mature¬ª: entretien avec le comit√© du programme HolyJS 2018 Moscou</a></li>
<li><a href="../fr430856/index.html">Toute la v√©rit√© sur RTOS. Article # 21. Bo√Ætes aux lettres: introduction et services de base</a></li>
<li><a href="../fr430860/index.html">T√©l√©chargez, enregistrez et visualisez le PDF dans Swift</a></li>
<li><a href="../fr430862/index.html">"Monstres dans les jeux - comment inciter un joueur √† vous d√©tester"</a></li>
<li><a href="../fr430864/index.html">Les matchs ne sont pas un jouet?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>