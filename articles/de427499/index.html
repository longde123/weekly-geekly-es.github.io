<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ûø üõçÔ∏è üôÖüèº Wor√ºber schreiben sie im technischen Support des Video-Streamers? üôéüèø ‚ûñ üò≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo an alle. T√§glich werden in unserem Support Dutzende verschiedener Anrufe ge√∂ffnet, von einfachen Fragen ‚ÄûHilfe beim Einrichten eines Clusters‚Äú b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wor√ºber schreiben sie im technischen Support des Video-Streamers?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/erlyvideo/blog/427499/">  Hallo an alle.  T√§glich werden in unserem Support Dutzende verschiedener Anrufe ge√∂ffnet, von einfachen Fragen ‚ÄûHilfe beim Einrichten eines Clusters‚Äú bis zu sehr komplexen Fragen ‚ÄûDer Ablauf funktioniert nicht, der Ablauf ruckelt manchmal‚Äú, aber es gibt Fragen, bei denen das Auge bereits zuckt und jeder Mitarbeiter des Unternehmens im Detail antworten kann. <br><br>  Und da die Fragen nicht aufh√∂ren, k√∂nnen Sie sie hier beantworten. <br><a name="habracut"></a><br><h2>  Warum wird das Video verz√∂gert? </h2><br>  Wir haben zwei Artikel im Blog ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einer</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zwei</a> ) zu diesem Thema, lesen Sie sie, wenn Sie mit Videos arbeiten, und hier werde ich eine kurze und umfassende Antwort geben: <br><br>  Modernes Internet-Streaming ist ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HLS-Protokoll</a> .  Manchmal DASH, aber das ist nicht wichtig, da beide segmentiert sind. <br><br>  Wie funktioniert es  Streaming-Videos werden in kleine Dateien "geschnitten" (normalerweise 2-8 Sekunden, abh√§ngig von der Dynamik des Inhalts). 3-10 solcher Segmente werden akkumuliert und durch eine spezielle Wiedergabeliste beschrieben, die automatisch aktualisiert wird, wenn das alte Segment gel√∂scht und ein neues hinzugef√ºgt wird.  So einfach.  Mehr Segmente - l√§ngere Verz√∂gerung, l√§ngere Dauer jedes Segments - l√§ngere Verz√∂gerung.  10-20 Sekunden sind normal. <br><br>  Warum wird das ben√∂tigt?  Warum so viele Videos im Speicher des Videoservers speichern?  Durch die Segmentierung kann der Player nicht auf die Instabilit√§t der Internetverbindung reagieren und das Video beim Wechsel von einem Wi-Fi-Netzwerk zu einer mobilen Verbindung nicht unterbrechen.  Wenn das Video nicht im Voraus vorbereitet und in separate Dateien gepackt worden w√§re, w√ºrden bei geringsten St√∂rungen oder mangelnder Bandbreite Videoartefakte auf dem Bildschirm angezeigt, und die Segmentierung gibt dem Player etwa 4 bis 20 Sekunden Zeit, um die Verbindung des Players wiederherzustellen und neue Daten zu laden. <br><br>  Was tun, wenn Sie unverz√ºglich ein Video ben√∂tigen?  W√§hlen Sie ein anderes Protokoll, wenn Sie einen Web-Chat arrangieren, den Copter √ºber das Internet steuern und IP-Videokameras ansehen m√∂chten.  Hier einige Beispiele: WebRTC, MSE-LD, RTMP. <br><br><h2>  Wie sch√ºtze ich das Video?  Nur auf Ihrer Site einf√ºgen </h2><br>  Die Aufgabe ist sehr einfach: Das Video auf der Website sollte vor dem Einf√ºgen in andere Websites gesch√ºtzt werden. Niemand m√∂chte f√ºr den Datenverkehr eines anderen bezahlen. Der Videoverkehr ist teuer.  Und das Video kann privat sein und sollte nicht √ºber Ihr pers√∂nliches Konto hinausgehen. <br><br>  Ich habe immer eine Antwort auf alle diese Anfragen - Sie <b>m√ºssen Securelink</b> auf Ihrer Site <b>konfigurieren</b> .  Inhaltsschutz ist nicht einseitig m√∂glich - die Site selbst muss Links generieren, Sie k√∂nnen nicht einfach einen statischen Link zur Site nehmen und einf√ºgen. <br><br>  Securelink ist eine alte und hochwirksame Linkschutztechnologie.  Viele habruchitel kennen ein spezielles Modul f√ºr Nginx - ngx_http_secure_link_module.  Wir verwenden kein Nginx, aber es gibt eine √§hnliche und nicht weniger effiziente Implementierung. Der einzige Unterschied besteht in der Reihenfolge der Parameter. <br><br>  Wie funktioniert es  Die Site generiert einen <b>eindeutigen einmaligen</b> Link basierend auf Benutzerdaten.  Und was wei√ü der Webserver √ºber den Client?  Das ist richtig, dies ist die IP-Adresse, User-Agent, Cookie, die angeforderte URL.  Wenn der Client autorisiert ist, k√∂nnen Sie in den Sitzungsvariablen andere Informationen abrufen, z. B. eine eindeutige Client-ID in der Servicedatenbank oder beispielsweise die G√ºltigkeitsdauer des Abonnements. <br><br>  Wir sammeln die Parameter in einer Zeile und hashen mit Ihrem bevorzugten Algorithmus, zum Beispiel SHA1.  Es stellt sich heraus, eine Reihe von nutzlosen Zeichen.  Der Hash aus der Zeichenfolge "127.0.0.1Habr" lautet beispielsweise: 70ebe94671dd21bd65f4a00dfd988adc83fe6bda. <br><br>  Diese Zeile wird an den Video-Streamer √ºbertragen und hat die Aufgabe, die G√ºltigkeit des Links zu √ºberpr√ºfen, der von Ihrer Website generiert wurde, nicht "faul" ist und nicht an Dritte weitergegeben wird.  Es gibt kein Feedback von der Website, daher sollte der Video-Streamer einen Hash mit denselben Daten generieren, die die Website verwendet hat.  Der Video-Streamer kennt auch die IP-Adresse des Clients und den angeforderten Inhalt, kann jedoch weder die Benutzer-ID noch die Lebensdauer der Verbindung kennen.  Sie m√ºssen diese Daten direkt auf den Link √ºbertragen und den geheimen Schl√ºssel verwenden, damit niemand f√ºr sich selbst Links generieren kann. <br><br>  Wir nehmen die Zeile "127.0.0.1Habr1540327100SECRET" und erhalten SHA1 99fe961672c52aa3033b98b545ec2cdec93bf515, und jetzt bilden wir einen Link des Formulars: <br><br>  <a href="">example.com/Habr/index.m3u8?token=99fe961672c52aa3033b98b545ec2cdec93bf515-1540327100</a> <br><br>  example.com ist Ihr Videoserver, Habr ist das angeforderte Video, index.m3u8 ist der Standardname f√ºr die HLS-Wiedergabeliste, das Werttoken ist die Zeichenfolge des von uns generierten Webservers. <br><br>  Der Video-Streamer extrahiert auf einfache Weise alles aus diesen Daten, was zum Abrufen des gleichen Hashs erforderlich ist: Die IP-Adresse wird aus der Webservervariablen gelesen, der angeforderte Inhalt aus der URL, die Lebensdauer aus dem Token-Parameter, das einzige, was ihm fehlt, ist der geheime Schl√ºssel, den er ben√∂tigt Registrieren Sie sich in der Konfigurationsdatei und halten Sie es geheim. <br><br>  Sie k√∂nnen einen solchen Link nicht an einen Freund senden oder in einem anderen Browser √∂ffnen. Die Hashing-Formel enth√§lt eine IP-Adresse, und es gelingt Ihnen nicht, die Lebensdauer zu ersetzen. Dann stimmt der Hash nicht √ºberein. <br><br><h2>  Fallstricke </h2><br>  Ich wollte es wirklich in zwei Abs√§tzen beschreiben, aber kurz gesagt, es hat nicht geklappt.  Dies ist das erste Problem - nicht jeder ist bereit, sich mit solchen Details zu befassen, da es viel einfacher ist, einen statischen Link einzuf√ºgen.  Wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">haben fertige Beispiele auf</a> unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Website</a> , daher sollte es kein Problem geben. <br><br>  Es kommt h√§ufig vor, dass die Site und der Webserver die IP-Adresse des Clients falsch ermitteln. Dies ist normal, wenn CDN-Netzwerke verwendet werden, z. B. CloudFlare.  In diesem Fall m√ºssen Sie die IP-Adresse aus dem richtigen Header entnehmen. M√∂glicherweise ben√∂tigen Sie die Hilfe des CDN-Anbieters.  CloudFlare verf√ºgt beispielsweise √ºber CF-Connecting-IP. <br><br>  Falsche Zeit.  Eine falsche Zeit auf einem der Server f√ºhrt in Kombination mit Versuchen, die Lebensdauer der Verbindung zu minimieren, h√§ufig zu unterbrochenen Verbindungen.  Es kommt auch vor, dass der Benutzer die Registerkarte mehrere Stunden lang offen l√§sst und das Video dann aufgrund der kurzen Lebensdauer nicht abspielen kann. <br><br>  3-24 Stunden Verbindungslebensdauer - dies ist normal, sie sind trotzdem gesch√ºtzt und es gibt M√∂glichkeiten, die Anzahl der gleichzeitigen Ansichten zu begrenzen. <br><br><h2>  Anstelle einer Summe </h2><br>  Sagen Sie uns in den Kommentaren, wie Sie diesen Linkschutzmechanismus umgehen k√∂nnen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427499/">https://habr.com/ru/post/de427499/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427487/index.html">Konfigurationstests f√ºr Java-Entwickler: Praktische Erfahrung</a></li>
<li><a href="../de427489/index.html">HomeData: Wie Datenanalyse in Architektur und St√§dtebau eingesetzt wird</a></li>
<li><a href="../de427491/index.html">vDud auf Englisch: 7 westliche Interviewer, von denen jeder ein Beispiel nimmt</a></li>
<li><a href="../de427493/index.html">Verst√§rker der Niederfrequenzklassen: A, B, AB, D, G, H.</a></li>
<li><a href="../de427495/index.html">Wie viel unterrichtet Habr +, um herauszufinden, wie viel andere Unternehmen verdienen</a></li>
<li><a href="../de427501/index.html">Seymour Papert: Harter Spa√ü</a></li>
<li><a href="../de427505/index.html">Vermutung des Geistes</a></li>
<li><a href="../de427507/index.html">Seymour Papert: Die k√∂stliche Entdeckung von "Nichts"</a></li>
<li><a href="../de427509/index.html">Webserver: Southbridge Erfahrung und Praxis</a></li>
<li><a href="../de427513/index.html">So analysieren Sie den Thread-Dump</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>