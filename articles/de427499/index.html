<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>➿ 🛍️ 🙅🏼 Worüber schreiben sie im technischen Support des Video-Streamers? 🙎🏿 ➖ 😳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo an alle. Täglich werden in unserem Support Dutzende verschiedener Anrufe geöffnet, von einfachen Fragen „Hilfe beim Einrichten eines Clusters“ b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Worüber schreiben sie im technischen Support des Video-Streamers?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/erlyvideo/blog/427499/">  Hallo an alle.  Täglich werden in unserem Support Dutzende verschiedener Anrufe geöffnet, von einfachen Fragen „Hilfe beim Einrichten eines Clusters“ bis zu sehr komplexen Fragen „Der Ablauf funktioniert nicht, der Ablauf ruckelt manchmal“, aber es gibt Fragen, bei denen das Auge bereits zuckt und jeder Mitarbeiter des Unternehmens im Detail antworten kann. <br><br>  Und da die Fragen nicht aufhören, können Sie sie hier beantworten. <br><a name="habracut"></a><br><h2>  Warum wird das Video verzögert? </h2><br>  Wir haben zwei Artikel im Blog ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einer</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zwei</a> ) zu diesem Thema, lesen Sie sie, wenn Sie mit Videos arbeiten, und hier werde ich eine kurze und umfassende Antwort geben: <br><br>  Modernes Internet-Streaming ist ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HLS-Protokoll</a> .  Manchmal DASH, aber das ist nicht wichtig, da beide segmentiert sind. <br><br>  Wie funktioniert es  Streaming-Videos werden in kleine Dateien "geschnitten" (normalerweise 2-8 Sekunden, abhängig von der Dynamik des Inhalts). 3-10 solcher Segmente werden akkumuliert und durch eine spezielle Wiedergabeliste beschrieben, die automatisch aktualisiert wird, wenn das alte Segment gelöscht und ein neues hinzugefügt wird.  So einfach.  Mehr Segmente - längere Verzögerung, längere Dauer jedes Segments - längere Verzögerung.  10-20 Sekunden sind normal. <br><br>  Warum wird das benötigt?  Warum so viele Videos im Speicher des Videoservers speichern?  Durch die Segmentierung kann der Player nicht auf die Instabilität der Internetverbindung reagieren und das Video beim Wechsel von einem Wi-Fi-Netzwerk zu einer mobilen Verbindung nicht unterbrechen.  Wenn das Video nicht im Voraus vorbereitet und in separate Dateien gepackt worden wäre, würden bei geringsten Störungen oder mangelnder Bandbreite Videoartefakte auf dem Bildschirm angezeigt, und die Segmentierung gibt dem Player etwa 4 bis 20 Sekunden Zeit, um die Verbindung des Players wiederherzustellen und neue Daten zu laden. <br><br>  Was tun, wenn Sie unverzüglich ein Video benötigen?  Wählen Sie ein anderes Protokoll, wenn Sie einen Web-Chat arrangieren, den Copter über das Internet steuern und IP-Videokameras ansehen möchten.  Hier einige Beispiele: WebRTC, MSE-LD, RTMP. <br><br><h2>  Wie schütze ich das Video?  Nur auf Ihrer Site einfügen </h2><br>  Die Aufgabe ist sehr einfach: Das Video auf der Website sollte vor dem Einfügen in andere Websites geschützt werden. Niemand möchte für den Datenverkehr eines anderen bezahlen. Der Videoverkehr ist teuer.  Und das Video kann privat sein und sollte nicht über Ihr persönliches Konto hinausgehen. <br><br>  Ich habe immer eine Antwort auf alle diese Anfragen - Sie <b>müssen Securelink</b> auf Ihrer Site <b>konfigurieren</b> .  Inhaltsschutz ist nicht einseitig möglich - die Site selbst muss Links generieren, Sie können nicht einfach einen statischen Link zur Site nehmen und einfügen. <br><br>  Securelink ist eine alte und hochwirksame Linkschutztechnologie.  Viele habruchitel kennen ein spezielles Modul für Nginx - ngx_http_secure_link_module.  Wir verwenden kein Nginx, aber es gibt eine ähnliche und nicht weniger effiziente Implementierung. Der einzige Unterschied besteht in der Reihenfolge der Parameter. <br><br>  Wie funktioniert es  Die Site generiert einen <b>eindeutigen einmaligen</b> Link basierend auf Benutzerdaten.  Und was weiß der Webserver über den Client?  Das ist richtig, dies ist die IP-Adresse, User-Agent, Cookie, die angeforderte URL.  Wenn der Client autorisiert ist, können Sie in den Sitzungsvariablen andere Informationen abrufen, z. B. eine eindeutige Client-ID in der Servicedatenbank oder beispielsweise die Gültigkeitsdauer des Abonnements. <br><br>  Wir sammeln die Parameter in einer Zeile und hashen mit Ihrem bevorzugten Algorithmus, zum Beispiel SHA1.  Es stellt sich heraus, eine Reihe von nutzlosen Zeichen.  Der Hash aus der Zeichenfolge "127.0.0.1Habr" lautet beispielsweise: 70ebe94671dd21bd65f4a00dfd988adc83fe6bda. <br><br>  Diese Zeile wird an den Video-Streamer übertragen und hat die Aufgabe, die Gültigkeit des Links zu überprüfen, der von Ihrer Website generiert wurde, nicht "faul" ist und nicht an Dritte weitergegeben wird.  Es gibt kein Feedback von der Website, daher sollte der Video-Streamer einen Hash mit denselben Daten generieren, die die Website verwendet hat.  Der Video-Streamer kennt auch die IP-Adresse des Clients und den angeforderten Inhalt, kann jedoch weder die Benutzer-ID noch die Lebensdauer der Verbindung kennen.  Sie müssen diese Daten direkt auf den Link übertragen und den geheimen Schlüssel verwenden, damit niemand für sich selbst Links generieren kann. <br><br>  Wir nehmen die Zeile "127.0.0.1Habr1540327100SECRET" und erhalten SHA1 99fe961672c52aa3033b98b545ec2cdec93bf515, und jetzt bilden wir einen Link des Formulars: <br><br>  <a href="">example.com/Habr/index.m3u8?token=99fe961672c52aa3033b98b545ec2cdec93bf515-1540327100</a> <br><br>  example.com ist Ihr Videoserver, Habr ist das angeforderte Video, index.m3u8 ist der Standardname für die HLS-Wiedergabeliste, das Werttoken ist die Zeichenfolge des von uns generierten Webservers. <br><br>  Der Video-Streamer extrahiert auf einfache Weise alles aus diesen Daten, was zum Abrufen des gleichen Hashs erforderlich ist: Die IP-Adresse wird aus der Webservervariablen gelesen, der angeforderte Inhalt aus der URL, die Lebensdauer aus dem Token-Parameter, das einzige, was ihm fehlt, ist der geheime Schlüssel, den er benötigt Registrieren Sie sich in der Konfigurationsdatei und halten Sie es geheim. <br><br>  Sie können einen solchen Link nicht an einen Freund senden oder in einem anderen Browser öffnen. Die Hashing-Formel enthält eine IP-Adresse, und es gelingt Ihnen nicht, die Lebensdauer zu ersetzen. Dann stimmt der Hash nicht überein. <br><br><h2>  Fallstricke </h2><br>  Ich wollte es wirklich in zwei Absätzen beschreiben, aber kurz gesagt, es hat nicht geklappt.  Dies ist das erste Problem - nicht jeder ist bereit, sich mit solchen Details zu befassen, da es viel einfacher ist, einen statischen Link einzufügen.  Wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">haben fertige Beispiele auf</a> unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Website</a> , daher sollte es kein Problem geben. <br><br>  Es kommt häufig vor, dass die Site und der Webserver die IP-Adresse des Clients falsch ermitteln. Dies ist normal, wenn CDN-Netzwerke verwendet werden, z. B. CloudFlare.  In diesem Fall müssen Sie die IP-Adresse aus dem richtigen Header entnehmen. Möglicherweise benötigen Sie die Hilfe des CDN-Anbieters.  CloudFlare verfügt beispielsweise über CF-Connecting-IP. <br><br>  Falsche Zeit.  Eine falsche Zeit auf einem der Server führt in Kombination mit Versuchen, die Lebensdauer der Verbindung zu minimieren, häufig zu unterbrochenen Verbindungen.  Es kommt auch vor, dass der Benutzer die Registerkarte mehrere Stunden lang offen lässt und das Video dann aufgrund der kurzen Lebensdauer nicht abspielen kann. <br><br>  3-24 Stunden Verbindungslebensdauer - dies ist normal, sie sind trotzdem geschützt und es gibt Möglichkeiten, die Anzahl der gleichzeitigen Ansichten zu begrenzen. <br><br><h2>  Anstelle einer Summe </h2><br>  Sagen Sie uns in den Kommentaren, wie Sie diesen Linkschutzmechanismus umgehen können. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427499/">https://habr.com/ru/post/de427499/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427487/index.html">Konfigurationstests für Java-Entwickler: Praktische Erfahrung</a></li>
<li><a href="../de427489/index.html">HomeData: Wie Datenanalyse in Architektur und Städtebau eingesetzt wird</a></li>
<li><a href="../de427491/index.html">vDud auf Englisch: 7 westliche Interviewer, von denen jeder ein Beispiel nimmt</a></li>
<li><a href="../de427493/index.html">Verstärker der Niederfrequenzklassen: A, B, AB, D, G, H.</a></li>
<li><a href="../de427495/index.html">Wie viel unterrichtet Habr +, um herauszufinden, wie viel andere Unternehmen verdienen</a></li>
<li><a href="../de427501/index.html">Seymour Papert: Harter Spaß</a></li>
<li><a href="../de427505/index.html">Vermutung des Geistes</a></li>
<li><a href="../de427507/index.html">Seymour Papert: Die köstliche Entdeckung von "Nichts"</a></li>
<li><a href="../de427509/index.html">Webserver: Southbridge Erfahrung und Praxis</a></li>
<li><a href="../de427513/index.html">So analysieren Sie den Thread-Dump</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>