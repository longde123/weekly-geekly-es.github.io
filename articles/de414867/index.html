<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òùüèª üß† üôáüèΩ ThinkingHome.Migrator - versionierte Migration des Datenbankschemas auf der .NET Core-Plattform üöÑ üê¢ üíÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo! Heute habe ich eine neue Version von ThinkingHome.Migrator ver√∂ffentlicht - ein Tool f√ºr die versionierte Migration eines Datenbankschemas auf ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ThinkingHome.Migrator - versionierte Migration des Datenbankschemas auf der .NET Core-Plattform</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414867/"><p>  Hallo!  Heute habe ich eine neue Version von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ThinkingHome.Migrator ver√∂ffentlicht</a> - ein Tool f√ºr die versionierte Migration eines Datenbankschemas auf die .NET Core-Plattform. <br><img src="https://habrastorage.org/webt/yi/xf/gf/yixfgf4_v0d3mrkmwa7nqbv2v_m.jpeg"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">In NuGet ver√∂ffentlichte</a> Pakete, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ausf√ºhrliche Dokumentation</a> geschrieben.  Sie k√∂nnen den neuen Migrator bereits verwenden, und ich werde Ihnen sagen, wie er angezeigt wurde, warum er die Versionsnummer 3.0.0 hat (obwohl dies die erste Version ist) und warum er ben√∂tigt wird, wenn <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">EF Migrations</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FluentMigrator vorhanden sind</a> . </p><a name="habracut"></a><br><h2 id="kak-vsyo-nachinalos">  Wie alles begann </h2><br><p> Vor 9 Jahren, im Jahr 2009, arbeitete ich als ASP.NET-Entwickler.  Als wir unser Projekt ver√∂ffentlichten, blieb eine spezielle Person lange wach und f√ºhrte gleichzeitig die Dateien auf dem Server aus und f√ºhrte SQL-Skripte mit seinen H√§nden aus, um die Datenbanken im Produkt zu aktualisieren.  Wir haben nach einem Tool gesucht, das dies automatisch <a href="">erledigt,</a> und das <a href="">Migrator.NET-</a> Projekt gefunden. </p><br><p>  Der Migrator schlug f√ºr diese Zeit eine neue Idee vor - Datenbank√§nderungen in Form von Migrationen festzulegen.  Jede Migration enth√§lt einen kleinen Teil der √Ñnderungen und eine Versionsnummer, in die die Datenbank nach Abschluss verschoben wird.  Der Migrator selbst verfolgte die Versionen und f√ºhrte die erforderlichen Migrationen in der erforderlichen Reihenfolge durch.  Besonders cool war die Tatsache, dass der Migrator f√ºr jede Migration umgekehrte √Ñnderungen vornehmen durfte.  Zu Beginn des Migrators war es m√∂glich, eine niedrigere Version als die aktuelle festzulegen, und die Datenbank wurde automatisch auf diese Version zur√ºckgesetzt, wobei die erforderlichen Migrationen in umgekehrter Reihenfolge durchgef√ºhrt wurden. </p><br><pre><code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">Migration(1)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AddAddressTable</span></span> : <span class="hljs-title"><span class="hljs-title">Migration</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Up</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Database.AddTable(<span class="hljs-string"><span class="hljs-string">"Address"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column(<span class="hljs-string"><span class="hljs-string">"id"</span></span>, DbType.Int32, ColumnProperty.PrimaryKey), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column(<span class="hljs-string"><span class="hljs-string">"street"</span></span>, DbType.String, <span class="hljs-number"><span class="hljs-number">50</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column(<span class="hljs-string"><span class="hljs-string">"city"</span></span>, DbType.String, <span class="hljs-number"><span class="hljs-number">50</span></span>) ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Down</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Database.RemoveTable(<span class="hljs-string"><span class="hljs-string">"Address"</span></span>); } }</code> </pre> <br><p>  Es gab viele Fehler in diesem Migrator.  Er wusste nicht, wie er mit anderen Datenbankschemata als dem Standardschema arbeiten sollte.  In einigen F√§llen wurden falsche SQL-Abfragen generiert. Wenn Sie eine nicht vorhandene Versionsnummer angeben, f√§llt dies in eine Endlosschleife.  Infolgedessen haben meine Kollegen und ich das Projekt gegabelt und dort Fehler behoben. </p><br><p>  GitHub.com mit seinen Gabeln und Pull-Anfragen war damals nicht da (der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Migrantencode</a> war auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">code.google.com</a> ).  Daher haben wir uns insbesondere nicht darum gek√ºmmert, dass unsere √Ñnderungen wieder in das urspr√ºngliche Projekt √ºbernommen werden - wir haben nur unsere Kopie ges√§gt und selbst verwendet.  Im Laufe der Zeit haben wir den gr√∂√üten Teil des Projekts umgeschrieben, und ich wurde dessen Hauptbetreuer.  Dann habe ich den Code unseres Migrators <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf Google Code</a> gepostet und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel √ºber Habr geschrieben</a> .  Es gab also ECM7.Migrator. </p><br><p>  W√§hrend der Arbeit am Migrator haben wir ihn fast vollst√§ndig umgeschrieben.  Gleichzeitig haben sie die API ein wenig vereinfacht und alles mit automatischen Tests abgedeckt.  Ich pers√∂nlich habe es wirklich genossen, das zu nutzen, was passiert ist.  Im Gegensatz zum urspr√ºnglichen Migrator gab es ein Gef√ºhl der Zuverl√§ssigkeit und es gab kein Gef√ºhl, dass seltsame Magie geschah. </p><br><p>  Wie sich herausstellte, mochte nicht nur unser Migrator.  Soweit ich wei√ü, wurde es in ziemlich gro√üen Unternehmen eingesetzt.  Ich kenne ABBYY, BARS Group und konzert.ru.  Wenn Sie die Suchabfrage "ecm7 migrator" eingeben, sehen Sie in den Ergebnisartikeln dar√ºber, Erw√§hnungen im Lebenslauf, Beschreibungen der Verwendung in der studentischen Arbeit.  Manchmal erhielt ich Briefe von Fremden mit Fragen oder Dankesworten. </p><br><p>  Nach 2012 hat sich das Projekt fast nicht entwickelt.  Die aktuellen Funktionen deckten alle Aufgaben ab, die ich hatte, und ich sah keine Notwendigkeit, etwas zu erledigen. </p><br><h2 id="thinkinghomemigrator">  ThinkingHome.Migrator </h2><br><p>  Letztes Jahr habe ich angefangen, an einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Projekt</a> f√ºr .NET Core zu arbeiten.  Dort musste es m√∂glich sein, Plugins zu verbinden, und Plugins sollten in der Lage sein, die erforderliche Datenbankstruktur f√ºr sich selbst zu erstellen, um ihre Daten dort zu speichern.  Dies ist eine solche Aufgabe, f√ºr die ein Migrator gut geeignet ist. </p><br><h3 id="ef-migrations">  Ef Migrationen </h3><br><p>  Ich habe den Entity Framework Core verwendet, um mit der Datenbank zu arbeiten. Als erstes habe ich EF Migrations ausprobiert.  Leider musste ich fast sofort die Idee aufgeben, sie zu benutzen. </p><br><p>  Entity Framework-Migrationen ziehen eine Reihe von Abh√§ngigkeiten in das Projekt und bewirken beim Start eine besondere Magie.  Ein Schritt nach links / ein Schritt nach rechts - Sie sto√üen auf Einschr√§nkungen.  Beispielsweise m√ºssen Migrationen des Entity Framework aus irgendeinem Grund notwendigerweise in derselben Assembly wie <code>DbContext</code> .  Dies bedeutet, dass Migrationen nicht in Plugins gespeichert werden k√∂nnen. </p><br><h3 id="fluentmigrator">  Fluentmigrator </h3><br><p>  Als klar wurde, dass EF Migrations nicht passte, suchte ich in Google nach einer L√∂sung und fand mehrere Open-Source-Migratoren.  Der am weitesten fortgeschrittene von ihnen, gemessen an der Anzahl der Downloads auf NuGet und der Stars auf GitHub, erwies sich als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FluentMigrator</a> .  FM ist sehr gut!  Er wei√ü viel und hat eine sehr praktische API.  Zuerst entschied ich, dass dies das ist, was ich brauche, aber sp√§ter wurden mehrere Probleme entdeckt. </p><br><p>  Das Hauptproblem besteht darin, dass FluentMigrator nicht wei√ü, wie mehrere Versionssequenzen in derselben Datenbank ber√ºcksichtigt werden sollen.  Wie ich oben geschrieben habe, musste ich einen Migrator in einer modularen Anwendung verwenden.  Es ist notwendig, dass die Module (Plugins) unabh√§ngig voneinander installiert und aktualisiert werden k√∂nnen.  FluentMigrator verf√ºgt √ºber eine durchg√§ngige Versionsnummerierung.  Aus diesem Grund ist es unm√∂glich, die Migration eines Plugins aus der Datenbank auszuf√ºhren / zur√ºckzusetzen, ohne die Datenbankstruktur der verbleibenden Plugins zu beeinflussen. </p><br><p>  Ich habe versucht, das gew√ºnschte Verhalten mithilfe von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tags</a> zu organisieren, aber dies ist auch nicht ganz das, was Sie brauchen.  FluentMigrator speichert keine Tag-Informationen f√ºr abgeschlossene Migrationen.  Dar√ºber hinaus sind Tags an Migrationen gebunden, nicht an Assemblys.  Dies ist sehr seltsam, da der Einstiegspunkt f√ºr die Migration genau die Assembly ist.  Im Prinzip war es wahrscheinlich m√∂glich, auf diese Weise eine parallele Versionierung durchzuf√ºhren, aber Sie m√ºssen einen ziemlich komplizierten Wrapper √ºber den Migrator schreiben. </p><br><h3 id="portirovat-ecm7migrator-na-net-core">  Port ECM7.Migrator auf .NET Core </h3><br><p>  Am Anfang wurde diese Option nicht einmal in Betracht gezogen.  Zu diesem Zeitpunkt war die aktuelle Version von .NET Core 1.1 und die API war schlecht kompatibel mit .NET Framework, in dem ECM7.Migrator funktionierte.  Ich war mir sicher, dass das Portieren auf .NET Core schwierig und zeitaufw√§ndig sein w√ºrde.  Als es keine Optionen gab, um ‚Äûdas fertige zu nehmen‚Äú, beschloss ich, es zu versuchen.  Die Aufgabe war einfacher als ich erwartet hatte.  √úberraschenderweise funktionierte es fast sofort.  Es waren nur geringf√ºgige √Ñnderungen erforderlich.  Da die Logik des Migrators durch Tests abgedeckt wurde, waren alle Stellen, die kaputt gingen, sofort sichtbar und ich reparierte sie schnell. </p><br><p>  Jetzt habe ich Adapter f√ºr nur vier DBMS portiert: MS SQL Server, PostgreSQL, MySQL, SQLite.  Ich habe keine Adapter f√ºr Oracle (da es noch keinen stabilen Client f√ºr .NET Core gibt), MS SQL Server CE (da es nur unter Windows funktioniert und ich keinen Platz zum Ausf√ºhren habe) und Firebird (weil es vorhanden ist) portiert nicht sehr beliebt, Hafen sp√§ter).  Wenn Sie Anbieter f√ºr diese oder andere DBMS erstellen m√ºssen, ist dies im Prinzip recht einfach. </p><br><p>  Der Quellcode f√ºr den neuen Migrator <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">befindet sich auf GitHub</a> .  Konfigurierte den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Start von Tests f√ºr jedes DBMS</a> in Travis CI.  Es wurde ein Befehlszeilenprogramm ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.NET Core Global Tool</a> ) geschrieben, das einfach <a href="">√ºber NuGet installiert</a> werden kann.  Die Dokumentation ist geschrieben - ich habe mich sehr bem√ºht, detailliert und klar zu schreiben, und es scheint, dass es passiert ist.  Sie k√∂nnen nehmen und verwenden! </p><br><h3 id="nemnogo-pro-nazvanie">  Ein wenig √ºber den Namen ... </h3><br><p>  Der neue Migrator ist nicht abw√§rtskompatibel mit dem alten.  Sie arbeiten auf verschiedenen Plattformen und haben eine andere API.  Daher wird das Projekt unter einem anderen Namen ver√∂ffentlicht. </p><br><p>  Der Name wurde vom <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ThinkingHome-</a> Projekt gew√§hlt, f√ºr das ich einen Migrator portiert habe.  Eigentlich ist ECM7.Migrator auch nach dem Projekt benannt, an dem ich gerade gearbeitet habe. </p><br><p>  Vielleicht war es besser, einen neutralen Namen zu w√§hlen, aber mir fiel es nicht ein, gute Optionen zu haben.  Wenn Sie das wissen - schreiben Sie in die Kommentare.  Es ist nicht zu sp√§t, alles umzubenennen. </p><br><p>  Die Versionsnummer gab 3.0.0 an, weil  Der neue Migrator ist eine logische Fortsetzung des alten. </p><br><h2 id="bystryy-start">  Schnellstart </h2><br><p>  Versuchen wir also, einen Migrator zu verwenden. </p><br><p>  Alle Datenbank√§nderungen werden im Migrationscode aufgezeichnet - Klassen, die in einer Programmiersprache (z. B. in C #) geschrieben sind.  Migrationsklassen erben von der Basisklasse <code>Migration</code> vom <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ThinkingHome.Migrator.Framework-</a> Paket.  In ihnen m√ºssen Sie die Methoden der Basisklasse √ºberschreiben: <code>Apply</code> (√Ñnderungen √ºbernehmen) und <code>Revert</code> (√Ñnderungen <code>Revert</code> ).  Innerhalb dieser Methoden beschreibt der Entwickler mithilfe einer <a href="">speziellen API</a> die Aktionen, die f√ºr die Datenbank ausgef√ºhrt werden m√ºssen. </p><br><p>  Au√üerdem muss die Migrationsklasse mit dem Attribut <code>[Migration]</code> und die Version angeben, in die die Datenbank nach diesen √Ñnderungen verschoben wird. </p><br><h3 id="primer-migracii">  Migrationsbeispiel </h3><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ThinkingHome.Migrator.Framework; [Migration(<span class="hljs-number"><span class="hljs-number">12</span></span>)] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MyTestMigration : Migration { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> override <span class="hljs-type"><span class="hljs-type">void</span></span> Apply() { //  :   <span class="hljs-keyword"><span class="hljs-keyword">Database</span></span>.AddTable("CustomerAddress", <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Column</span></span>("customerId", DbType.Int32, ColumnProperty.PrimaryKey), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Column</span></span>("addressId", DbType.Int32, ColumnProperty.PrimaryKey)); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> override <span class="hljs-type"><span class="hljs-type">void</span></span> Revert() { //  :   <span class="hljs-keyword"><span class="hljs-keyword">Database</span></span>.RemoveTable("CustomerAddress"); //     ,  //  Revert    } }</code> </pre> <br><h3 id="kak-zapustit">  Wie man l√§uft </h3><br><p>  Migrationen werden in eine DLL-Datei kompiliert.  Danach k√∂nnen Sie Datenbank√§nderungen mit dem Dienstprogramm zur <code>migrate-database</code> .  Installieren Sie es zun√§chst <a href="">von NuGet</a> . </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">dotnet</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tool</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-g</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">thinkinghome</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.migrator</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.cli</span></span></code> </pre> <br><p>  F√ºhren Sie <code>migrate-database</code> und geben Sie den erforderlichen DBMS-Typ, die Verbindungszeichenfolge und den Pfad zur DLL-Datei mit Migrationen an. </p><br><pre> <code class="hljs pgsql">migrate-<span class="hljs-keyword"><span class="hljs-keyword">database</span></span> postgres "host=localhost;port=5432;database=migrations;" /<span class="hljs-type"><span class="hljs-type">path</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>/migrations.dll</code> </pre> <br><h3 id="zapuskaem-cherez-api">  F√ºhren Sie die API aus </h3><br><p>  Sie k√∂nnen Migrationen √ºber die API von Ihrer eigenen Anwendung aus durchf√ºhren.  Sie k√∂nnen beispielsweise eine Anwendung schreiben, die beim Start selbst die gew√ºnschte Datenbankstruktur erstellt. </p><br><p>  Verbinden Sie dazu das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ThinkingHome.Migrator-</a> Paket von NuGet und das Paket mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Transformationsanbieter f√ºr das erforderliche DBMS</a> mit Ihrem Projekt.  Erstellen Sie anschlie√üend eine Instanz der <code>ThinkingHome.Migrator.Migrator</code> Klasse, rufen Sie die <code>Migrate</code> Methode auf und √ºbergeben Sie die erforderliche Version der Datenbank als Parameter. </p><br><pre> <code class="hljs powershell">var version = <span class="hljs-literal"><span class="hljs-literal">-1</span></span>; //  <span class="hljs-literal"><span class="hljs-literal">-1</span></span>     var provider = <span class="hljs-string"><span class="hljs-string">"postgres"</span></span>; var connectionString = <span class="hljs-string"><span class="hljs-string">"host=localhost;port=5432;database=migrations;"</span></span>; var assembly = Assembly.LoadFrom(<span class="hljs-string"><span class="hljs-string">"/path/to/migrations.dll"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (var migrator = new Migrator(provider, connectionString, <span class="hljs-keyword"><span class="hljs-keyword">assembly</span></span>)) { migrator.Migrate(version); }</code> </pre> <br><p>  √úbrigens k√∂nnen Sie mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem</a> FluentMigrator-Startbeispiel vergleichen. </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Ich habe versucht, ein einfaches Werkzeug ohne Sucht und komplexe Magie zu entwickeln.  Es scheint ganz gut geklappt zu haben.  Das Projekt war lange Zeit nicht grob, alles wird in Tests behandelt, es gibt eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">detaillierte Dokumentation</a> in russischer Sprache.  Wenn Sie .NET Core 2.1 verwenden, versuchen Sie es mit einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">neuen Migrator</a> .  H√∂chstwahrscheinlich wird es Ihnen auch gefallen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de414867/">https://habr.com/ru/post/de414867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de414855/index.html">Eine Auswahl an frischen Python-B√ºchern f√ºr alle, die es gerade lernen m√∂chten</a></li>
<li><a href="../de414857/index.html">Interview mit Ilya Stenkov, Gr√ºnderin des Kryptomarktes</a></li>
<li><a href="../de414859/index.html">So verwenden Sie eine USB-Kamera mit ROS auf einem Raspberry Pi oder BeagleBone Blue - zum Streamen von Videos auf einen gro√üen Computer</a></li>
<li><a href="../de414861/index.html">Tunnelmodellierung - Version 1.0</a></li>
<li><a href="../de414865/index.html">iMaterialist Furniture Challenge oder 50 Stuhlfarben</a></li>
<li><a href="../de414869/index.html">Verschwindende Rahmenbedingungen</a></li>
<li><a href="../de414871/index.html">Der Staubsturm auf dem Mars erreichte das planetare Ausma√ü, sogar die Neugier war betroffen</a></li>
<li><a href="../de414873/index.html">IDisposable - dass deine Mutter nicht √ºber die Freigabe von Ressourcen gesprochen hat. Teil 1</a></li>
<li><a href="../de414875/index.html">Kubernetes Containerd-Integration ersetzt Docker f√ºr die Produktion</a></li>
<li><a href="../de414877/index.html">Ein ungew√∂hnliches Objektiv f√ºr eine normale Kamera oder wie man aufh√∂rt, √ºber den Fokus nachzudenken</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>