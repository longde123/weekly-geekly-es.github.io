<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÜüèª üéê üëèüèæ Apache Kafka + Spring Boot: Ol√°, microsservi√ßos üö∂ üñêüèø üï∑Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Nesta postagem, escreveremos um aplicativo no Spring Boot 2 usando o Apache Kafka no Linux, da instala√ß√£o do JRE a um aplicativo de microsse...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apache Kafka + Spring Boot: Ol√°, microsservi√ßos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440400/"> Ol√° Habr!  Nesta postagem, escreveremos um aplicativo no Spring Boot 2 usando o Apache Kafka no Linux, da instala√ß√£o do JRE a um aplicativo de microsservi√ßo em funcionamento. <br><br>  Colegas do departamento de desenvolvimento front-end que viram o artigo reclamam que eu n√£o estou explicando o que s√£o Apache Kafka e Spring Boot.  Acredito que quem precisa montar um projeto finalizado usando as tecnologias acima sabe o que √© e por que precisa.  Se para o leitor a pergunta n√£o est√° ociosa, aqui est√£o excelentes artigos sobre Habr√©, o que s√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Apache Kafka</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spring Boot</a> . <br><br>  Podemos fazer sem longas explica√ß√µes sobre o que s√£o Kafka, Spring Boot e Linux e, em vez disso, executar o servidor Kafka do zero em uma m√°quina Linux, escrever dois microsservi√ßos e fazer com que um deles envie mensagens para o outro - em geral, configure arquitetura completa de microsservi√ßos. <br><br><img src="https://habrastorage.org/webt/5d/p3/ab/5dp3abjx-c62zmfmmtp5tjvbjci.jpeg"><br><br>  A postagem ser√° composta de duas se√ß√µes.  No primeiro, configuramos e executamos o Apache Kafka em uma m√°quina Linux; no segundo, escrevemos dois microsservi√ßos em Java. <br><a name="habracut"></a><br>  Na inicializa√ß√£o, na qual iniciei minha carreira profissional como programador, havia microsservi√ßos no Kafka, e um dos meus microsservi√ßos tamb√©m trabalhava com outros atrav√©s do Kafka, mas eu n√£o sabia como o pr√≥prio servidor funcionava, se ele estava escrito como um aplicativo ou se j√° est√° completamente encaixotado produto.  Qual foi minha surpresa e decep√ß√£o quando o Kafka ainda era um produto in a box, e minha tarefa seria n√£o apenas escrever um cliente em Java (o que eu amo fazer), como tamb√©m implantar e configurar o aplicativo finalizado como devOps (que eu odeio fazer).  No entanto, mesmo que eu possa aument√°-lo no servidor virtual Kafka em menos de um dia, √© realmente muito simples fazer isso.  Ent√£o <br><br>  Nossa aplica√ß√£o ter√° a seguinte estrutura de intera√ß√£o: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wy/id/y5/wyidy5ttuw6eam5buszy6rb8z0m.jpeg"></div><br>  No final da postagem, como de costume, haver√° links para o git com o c√≥digo ativo. <br><br><h1>  Implantar o Apache Kafka + Zookeeper em uma m√°quina virtual </h1><br>  Tentei criar o Kafka no Linux local, em uma papoula e no Linux remoto.  Em dois casos (Linux), consegui rapidamente.  Com papoula ainda nada aconteceu.  Portanto, criaremos o Kafka no Linux.  Eu escolhi o Ubuntu 18.04. <br><br>  Para que Kafka trabalhe, ela precisa de um tratador.  Para fazer isso, voc√™ deve fazer o download e execut√°-lo antes de iniciar o Kafka. <br><br>  Ent√£o <br><br><h4>  0. Instale o JRE </h4><br>  Isso √© feito pelos seguintes comandos: <br><br><pre><code class="bash hljs">sudo apt-get update sudo apt-get install default-jre</code> </pre> <br>  Se tudo der certo, voc√™ poder√° inserir o comando <br><br><pre> <code class="bash hljs">java -version</code> </pre> <br>  e verifique se o Java est√° instalado. <br><br><h4>  1. Baixe o Zookeeper </h4><br>  Eu n√£o gosto de equipes m√°gicas no Linux, especialmente quando eles d√£o apenas alguns comandos e n√£o est√° claro o que est√£o fazendo.  Portanto, descreverei cada a√ß√£o - o que exatamente ela faz.  Portanto, precisamos baixar o Zookeeper e descompact√°-lo em uma pasta conveniente.  √â aconselh√°vel que todos os aplicativos sejam armazenados na pasta / opt, ou seja, no nosso caso, ser√° / opt / zookeeper. <br><br>  Eu usei o comando abaixo.  Se voc√™ conhece outros comandos do Linux que, na sua opini√£o, permitir√£o que voc√™ fa√ßa isso de maneira mais racial, use-os.  Sou desenvolvedor, n√£o devoto, e me comunico com servidores no n√≠vel da "pr√≥pria cabra".  Ent√£o, baixe o aplicativo: <br><br><pre> <code class="bash hljs">wget -P /home/xpendence/downloads/ <span class="hljs-string"><span class="hljs-string">"http://apache-mirror.rbc.ru/pub/apache/zookeeper/zookeeper-3.4.12/zookeeper-3.4.12.tar.gz"</span></span></code> </pre> <br>  O aplicativo √© baixado para a pasta que voc√™ especificar, criei a pasta / home / xpendence / downloads para baixar todos os aplicativos de que preciso. <br><br><h4>  2. Desembale o Zookeeper </h4><br>  Eu usei o comando: <br><br><pre> <code class="bash hljs">tar -xvzf /home/xpendence/downloads/zookeeper-3.4.12.tar.gz</code> </pre> <br>  Este comando descompacta o arquivo morto na pasta em que voc√™ est√° localizado.  Pode ser necess√°rio transferir o aplicativo para / opt / zookeeper.  E voc√™ pode entrar imediatamente nele e a partir da√≠ j√° descompactar o arquivo. <br><br><h4>  3. Editar configura√ß√µes </h4><br>  Na pasta / zookeeper / conf / h√° um arquivo zoo-sample.cfg, sugiro renome√°-lo para zoo.conf; √© esse arquivo que a JVM procurar√° na inicializa√ß√£o.  O seguinte deve ser adicionado a este arquivo no final: <br><br><pre> <code class="bash hljs">tickTime=2000 dataDir=/var/zookeeper clientPort=2181</code> </pre> <br>  Al√©m disso, crie o diret√≥rio / var / zookeeper. <br><br><h4>  4. Inicie o Zookeeper </h4><br>  V√° para a pasta / opt / zookeeper e inicie o servidor com o comando: <br><br><pre> <code class="bash hljs">bin/zkServer.sh start</code> </pre> <br>  ‚ÄúINICIADO‚Äù deve aparecer. <br><br>  Depois disso, proponho verificar se o servidor est√° funcionando.  Escrevemos: <br><br><pre> <code class="bash hljs">telnet localhost 2181</code> </pre> <br>  Uma mensagem deve aparecer dizendo que a conex√£o foi um sucesso.  Se voc√™ tiver um servidor fraco e a mensagem n√£o aparecer, tente novamente - mesmo quando STARTED aparecer, o aplicativo come√ßar√° a escutar a porta muito mais tarde.  Quando tentei tudo isso em um servidor fraco, isso aconteceu comigo todas as vezes.  Se tudo estiver conectado, digite o comando <br><br><pre> <code class="bash hljs">ruok</code> </pre> <br>  O que significa: "Voc√™ est√° bem?"  O servidor deve responder: <br><br><pre> <code class="bash hljs">imok ( !)</code> </pre> <br>  e desconecte.  Ent√£o, tudo est√° de acordo com o plano.  Prosseguimos com o lan√ßamento do Apache Kafka. <br><br><h4>  5. Crie um usu√°rio no Kafka </h4><br>  Para trabalhar com o Kafka, precisamos de um usu√°rio separado. <br><br><pre> <code class="bash hljs">sudo adduser --system --no-create-home --disabled-password --disabled-login kafka</code> </pre> <br><h4>  6. Fa√ßa o download do Apache Kafka </h4><br>  Existem duas distribui√ß√µes - bin√°ria e fontes.  N√≥s precisamos de um bin√°rio.  Na apar√™ncia, o arquivo com o bin√°rio √© diferente em tamanho.  O bin√°rio pesa 59 MB e 6,5 MB pesam. <br><br>  Fa√ßa o download do bin√°rio no diret√≥rio l√°, usando o link abaixo: <br><br><pre> <code class="bash hljs">wget -P /home/xpendence/downloads/ <span class="hljs-string"><span class="hljs-string">"http://mirror.linux-ia64.org/apache/kafka/2.1.0/kafka_2.11-2.1.0.tgz"</span></span></code> </pre> <br><h4>  7. Descompacte o Apache Kafka </h4><br>  O procedimento de desembalagem n√£o √© diferente do mesmo para o Zookeeper.  Tamb√©m descompactamos o arquivo morto no diret√≥rio / opt e o renomeamos para kafka, para que o caminho para a pasta / bin seja / opt / kafka / bin <br><br><pre> <code class="bash hljs">tar -xvzf /home/xpendence/downloads/kafka_2.11-2.1.0.tgz</code> </pre> <br><h4>  8. Editar configura√ß√µes </h4><br>  As configura√ß√µes est√£o em /opt/kafka/config/server.properties.  Adicione uma linha: <br><br><pre> <code class="bash hljs">delete.topic.enable = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Essa configura√ß√£o parece ser opcional, funciona sem ela.  Essa configura√ß√£o permite excluir t√≥picos.  Caso contr√°rio, voc√™ simplesmente n√£o poder√° excluir t√≥picos atrav√©s da linha de comando. <br><br><h4>  9. Damos acesso aos diret√≥rios do usu√°rio kafka Kafka </h4><br><pre> <code class="bash hljs">chown -R kafka:nogroup /opt/kafka chown -R kafka:nogroup /var/lib/kafka</code> </pre> <br><h4>  10. O t√£o esperado lan√ßamento do Apache Kafka </h4><br>  N√≥s inserimos o comando, ap√≥s o qual o Kafka deve iniciar: <br><br><pre> <code class="bash hljs">/opt/kafka/bin/kafka-server-start.sh /opt/kafka/config/server.properties</code> </pre> <br>  Se as a√ß√µes usuais (Kafka est√£o escritas em Java e Scala) n√£o se espalharam no log, tudo funcionou e voc√™ pode testar nosso servi√ßo. <br><br><h4>  10.1  Problemas fracos no servidor </h4><br>  Para experimentos no Apache Kafka, peguei um servidor fraco com um n√∫cleo e 512 MB de RAM (por apenas 99 rublos), o que resultou em v√°rios problemas para mim. <br><br>  Falta de mem√≥ria.  Obviamente, voc√™ n√£o pode fazer overclock com 512 MB e o servidor n√£o p√¥de implantar o Kafka devido √† falta de mem√≥ria.  O fato √© que, por padr√£o, o Kafka consome 1 GB de mem√≥ria.  N√£o √© √† toa que ele estava desaparecido :) <br><br>  Vamos para kafka-server-start.sh, zookeeper-server-start.sh.  J√° existe uma linha que regula a mem√≥ria: <br><br><pre> <code class="java hljs">export KAFKA_HEAP_OPTS=<span class="hljs-string"><span class="hljs-string">"-Xmx1G -Xms1G"</span></span></code> </pre> <br>  Altere para: <br><br><pre> <code class="java hljs">export KAFKA_HEAP_OPTS=<span class="hljs-string"><span class="hljs-string">"-Xmx256M -Xms128M"</span></span></code> </pre> <br>  Isso reduzir√° o apetite do Kafka e permitir√° que voc√™ inicie o servidor. <br><br>  O segundo problema com um computador fraco √© a falta de tempo para se conectar ao Zookeeper.  Por padr√£o, isso √© dado 6 segundos.  Se o ferro √© fraco, √© claro que isso n√£o √© suficiente.  Em server.properties, aumentamos o tempo de conex√£o com o zukipper: <br><br><pre> <code class="bash hljs">zookeeper.connection.timeout.ms=30000</code> </pre> <br>  Coloquei meio minuto. <br><br><h4>  11. Teste o Kafka-server </h4><br>  Para isso, abriremos dois terminais, em um lan√ßaremos o produtor, por outro - o consumidor. <br>  No primeiro console, insira uma linha: <br><br><pre> <code class="bash hljs">/opt/kafka/bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> /opt/kafka/bin/kafka-console-producer.sh --broker-list localhost:9092 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br>  Este √≠cone deve aparecer, indicando que o produtor est√° pronto para enviar mensagens de spam: <br><br><pre> <code class="bash hljs">&gt;</code> </pre> <br>  No segundo console, digite o comando: <br><br><pre> <code class="bash hljs">/opt/kafka/bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> --from-beginning</code> </pre> <br>  Agora, digitando no console do produtor, quando voc√™ pressionar Enter, ele aparecer√° no console do consumidor. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/k7/uu/kf/k7uukff1u2kyygrgetrnvjnqmmg.png"></a> <br><br>  Se voc√™ v√™ na tela aproximadamente o mesmo que eu - parab√©ns, o pior j√° passou! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n7/rg/lz/n7rglz4s3wvbqzg_chzjjooiazw.jpeg"></div><br>  Agora, apenas precisamos escrever alguns clientes no Spring Boot que se comunicar√£o atrav√©s do Apache Kafka. <br><br><h1>  Escrevendo um aplicativo no Spring Boot </h1><br>  Escreveremos dois aplicativos que trocar√£o mensagens atrav√©s do Apache Kafka.  A primeira mensagem ser√° chamada kafka-server e conter√° o produtor e o consumidor.  O segundo ser√° chamado kafka-tester, e foi projetado para termos uma arquitetura de microsservi√ßo. <br><br><h3>  kafka-server </h3><br>  Para nossos projetos criados por meio do Spring Initializr, precisamos do m√≥dulo Kafka.  Adicionei Lombok e Web, mas isso √© uma quest√£o de gosto. <br><br>  O cliente Kafka consiste em dois componentes - o produtor (ele envia mensagens para o servidor Kafka) e o consumidor (ele escuta o servidor Kafka e recebe novas mensagens a partir da√≠ sobre os t√≥picos nos quais est√° inscrito).  Nossa tarefa √© escrever os dois componentes e faz√™-los funcionar. <br><br>  Consumidor: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KafkaConsumerConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.server}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaServer; <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.group.id}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaGroupId; <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; batchFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BatchMessagingMessageConverter(converter())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; singleFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ConsumerFactory&lt;Long, AbstractDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; kafkaListenerContainerFactory() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, LongDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId); props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringJsonMessageConverter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">converter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter(); } }</code> </pre> <br>  Precisamos de 2 campos inicializados com dados est√°ticos do kafka.properties. <br><br><pre> <code class="java hljs">kafka.server=localhost:<span class="hljs-number"><span class="hljs-number">9092</span></span> kafka.group.id=server.broadcast</code> </pre> <br>  kafka.server √© o endere√ßo no qual nosso servidor trava, nesse caso, local.  Por padr√£o, Kafka escuta na porta 9092. <br><br>  kafka.group.id √© um grupo de consumidores, dentro do qual uma inst√¢ncia da mensagem √© entregue.  Por exemplo, voc√™ tem tr√™s correios em um grupo e todos ouvem o mesmo t√≥pico.  Assim que uma nova mensagem aparecer no servidor com este t√≥pico, ela ser√° entregue a algu√©m do grupo.  Os dois consumidores restantes n√£o est√£o recebendo a mensagem. <br><br>  Em seguida, estamos criando uma f√°brica para os consumidores - ConsumerFactory. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ConsumerFactory&lt;Long, AbstractDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); }</code> </pre> <br>  Inicializado com as propriedades de que precisamos, servir√° como uma f√°brica padr√£o para os consumidores no futuro. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, LongDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId); props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; }</code> </pre> <br>  consumerConfigs s√£o apenas configura√ß√µes de mapa.  N√≥s fornecemos o endere√ßo do servidor, grupo e desserializadores. <br><br>  Al√©m disso, um dos pontos mais importantes para um consumidor.  O consumidor pode receber objetos √∫nicos e cole√ß√µes - por exemplo, StarshipDto e List.  E se obtivermos StarshipDto como JSON, obteremos List como, grosso modo, como uma matriz JSON.  Portanto, temos pelo menos duas f√°bricas de mensagens - para mensagens √∫nicas e para matrizes. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; singleFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; }</code> </pre> <br>  Instanciamos ConcurrentKafkaListenerContainerFactory, digitamos Long (chave da mensagem) e AbstractDto (valor da mensagem abstrata) e inicializamos seus campos com propriedades.  Obviamente, inicializamos a f√°brica com nossa f√°brica padr√£o (que j√° cont√©m configura√ß√µes de mapa), depois marcamos que n√£o ouvimos pacotes (as mesmas matrizes) e especificamos um conversor JSON simples como conversor. <br><br>  Quando criamos uma f√°brica para pacotes / matrizes (lote), a principal diferen√ßa (al√©m do fato de marcarmos que ouvimos pacotes) √© que especificamos como conversor um conversor de pacote especial que converter√° pacotes que consistem em de cadeias JSON. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; batchFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BatchMessagingMessageConverter(converter())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringJsonMessageConverter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">converter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter(); }</code> </pre> <br>  E mais uma coisa.  Ao inicializar os beans Spring, a lixeira com o nome kafkaListenerContainerFactory pode n√£o ser contada e o aplicativo fica arruinado.  Certamente existem op√ß√µes mais elegantes para resolver o problema, escreva sobre elas nos coment√°rios, por enquanto acabei de criar uma lixeira descarregada com funcionalidade com o mesmo nome: <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; kafkaListenerContainerFactory() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); }</code> </pre> <br>  O consumidor est√° configurado.  Passamos para o produtor. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KafkaProducerConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.server}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaServer; <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.producer.id}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaProducerId; <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">producerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, LongSerializer.class); props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class); props.put(ProducerConfig.CLIENT_ID_CONFIG, kafkaProducerId); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProducerFactory&lt;Long, StarshipDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">producerStarshipFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaProducerFactory&lt;&gt;(producerConfigs()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> KafkaTemplate&lt;Long, StarshipDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kafkaTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ KafkaTemplate&lt;Long, StarshipDto&gt; template = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KafkaTemplate&lt;&gt;(producerStarshipFactory()); template.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> template; } }</code> </pre> <br>  Das vari√°veis ‚Äã‚Äãest√°ticas, precisamos do endere√ßo do servidor kafka e do ID do produtor.  Ele pode ser qualquer coisa. <br><br>  Nas configura√ß√µes, como vemos, n√£o h√° nada de especial.  Quase a mesma coisa.  Mas com rela√ß√£o √†s f√°bricas, h√° uma diferen√ßa significativa.  Devemos registrar um modelo para cada classe, cujos objetos enviaremos para o servidor, bem como uma f√°brica para ele.  Temos um par desse tipo, mas pode haver dezenas deles. <br><br>  No modelo, marcamos que serializaremos objetos em JSON, e isso, talvez, seja suficiente. <br><br>  Temos um consumidor e um produtor, resta escrever um servi√ßo que envie e receba mensagens. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StarshipServiceImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StarshipService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ObjectMapper objectMapper; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StarshipServiceImpl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate, ObjectMapper objectMapper)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.kafkaStarshipTemplate = kafkaStarshipTemplate; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.objectMapper = objectMapper; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@KafkaListener</span></span>(id = <span class="hljs-string"><span class="hljs-string">"Starship"</span></span>, topics = {<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>}, containerFactory = <span class="hljs-string"><span class="hljs-string">"singleFactory"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"=&gt; consumed {}"</span></span>, writeValueAsString(dto)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeValueAsString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> objectMapper.writeValueAsString(dto); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JsonProcessingException e) { e.printStackTrace(); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"Writing value to JSON failed: "</span></span> + dto.toString()); } } }</code> </pre> <br>  Existem apenas dois m√©todos em nosso servi√ßo, eles s√£o suficientes para explicar o trabalho do cliente.  Autowire os padr√µes que precisamos: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate;</code> </pre> <br>  M√©todo do produtor: <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); }</code> </pre> <br>  Tudo o que √© necess√°rio para enviar uma mensagem ao servidor √© chamar o m√©todo send no modelo e transferir o t√≥pico (assunto) e nosso objeto para l√°.  O objeto ser√° serializado em JSON e voar√° para o servidor sob o t√≥pico especificado. <br><br>  O m√©todo de escuta √© assim: <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@KafkaListener</span></span>(id = <span class="hljs-string"><span class="hljs-string">"Starship"</span></span>, topics = {<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>}, containerFactory = <span class="hljs-string"><span class="hljs-string">"singleFactory"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"=&gt; consumed {}"</span></span>, writeValueAsString(dto)); }</code> </pre> <br>  Marcamos esse m√©todo com a anota√ß√£o @KafkaListener, onde indicamos qualquer ID que gostamos, ouvimos t√≥picos e uma f√°brica que converter√° a mensagem recebida no que precisamos.  Nesse caso, como aceitamos um objeto, precisamos de uma √∫nica f√°brica.  Para Lista &lt;?&gt;, Especifique batchFactory.  Como resultado, enviamos o objeto ao servidor kafka usando o m√©todo send e o obtemos usando o m√©todo consumir. <br><br>  Voc√™ pode escrever um teste em 5 minutos que demonstrar√° toda a for√ßa do Kafka, mas iremos al√©m - dedique 10 minutos e escreva outro aplicativo que enviar√° mensagens ao servidor que nosso primeiro aplicativo ouvir√°. <br><br><h2>  kafka-tester </h2><br>  Tendo a experi√™ncia de escrever o primeiro aplicativo, podemos escrever facilmente o segundo, especialmente se copiarmos a pasta e o pacote dto, registrar apenas o produtor (enviaremos apenas mensagens) e adicionar o √∫nico m√©todo de envio ao servi√ßo.  Usando o link abaixo, voc√™ pode facilmente fazer o download do c√≥digo do projeto e garantir que n√£o haja nada complicado l√°. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Scheduled</span></span>(initialDelay = <span class="hljs-number"><span class="hljs-number">10000</span></span>, fixedDelay = <span class="hljs-number"><span class="hljs-number">5000</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">produce</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ StarshipDto dto = createDto(); log.info(<span class="hljs-string"><span class="hljs-string">"&lt;= sending {}"</span></span>, writeValueAsString(dto)); kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> StarshipDto </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StarshipDto(<span class="hljs-string"><span class="hljs-string">"Starship "</span></span> + (LocalTime.now().toNanoOfDay() / <span class="hljs-number"><span class="hljs-number">1000000</span></span>)); }</code> </pre> <br>  Ap√≥s os primeiros 10 segundos, o kafka-tester come√ßa a enviar mensagens com os nomes de naves estelares para o servidor Kafka a cada 5 segundos (a imagem √© clic√°vel). <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/oo/ri/gk/oorigkqltxuntytvhzbarlninhk.png"></a> <br><br>  L√°, eles s√£o ouvidos e recebidos pelo kafka-server (a imagem tamb√©m √© clic√°vel). <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/cs/w-/vc/csw-vcgajjpjymkdxcwibqllnoi.png"></a> <br><br>  Espero que aqueles que sonham em come√ßar a escrever microsservi√ßos na Kafka tenham sucesso t√£o facilmente quanto eu.  E aqui est√£o os links para os projetos: <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">kafka-server</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">kafka-tester</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt440400/">https://habr.com/ru/post/pt440400/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt440388/index.html">Intervalos: A pr√≥xima evolu√ß√£o do C ++</a></li>
<li><a href="../pt440390/index.html">O mundo diversificado dos sistemas embarcados e o lugar da Embox nele</a></li>
<li><a href="../pt440392/index.html">WebRTC no seu site - sem bugs e sem or√ßamento</a></li>
<li><a href="../pt440394/index.html">Escalonamento de privil√©gios do PostgreSQL - an√°lise CVE-2018-10915</a></li>
<li><a href="../pt440398/index.html">Hist√≥rico de participa√ß√£o (e vit√≥ria) na Russian AI Cup 2018 - CodeBall</a></li>
<li><a href="../pt440402/index.html">Desenvolvedor do SearchFace sobre recursos de algoritmo</a></li>
<li><a href="../pt440404/index.html">"Arquitetura da informa√ß√£o": mitap em OZON</a></li>
<li><a href="../pt440410/index.html">Selecionando, armazenando em cache e exibindo fotos no mapa</a></li>
<li><a href="../pt440412/index.html">Zimbra Collaboration Suite e MS Exchange no mesmo dom√≠nio</a></li>
<li><a href="../pt440414/index.html">Sobre linter, qualidade de c√≥digo, qualidade em geral e gerenciamento de qualidade</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>