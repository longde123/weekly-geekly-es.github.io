<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçû üë®üèæ‚Äçü§ù‚Äçüë®üèΩ üêç Kaspresso: le framework d'autotest que vous attendiez üëçüèæ üö∏ üçÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quiconque a √©t√© ou est engag√© dans des autotests Android sait √† quel point c'est p√©nible. 
 Vous vous fatiguez du volume des t√¢ches et des probl√®mes p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kaspresso: le framework d'autotest que vous attendiez</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/kaspersky/blog/467617/">  Quiconque a √©t√© ou est engag√© dans des autotests Android sait √† quel point c'est p√©nible. <br>  Vous vous fatiguez du volume des t√¢ches et des probl√®mes pour que les vacances ne vous aident pas.  Les gens ont m√™me arr√™t√© √† cause des autotests. <br><br>  La douleur, la souffrance et le tourment conduisent in√©vitablement √† l'√©mergence de quelque chose de nouveau et de beau.  Nous avons essay√© de rassembler tous les r√¢teaux sur lesquels nous devions marcher, avons combin√© nos efforts avec les gars d'Avito et de HH et avons cr√©√© quelque chose qui rendrait votre relation avec les autotests incomparablement meilleure et plus fructueuse. <br><br>  Rencontrez: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kaspresso</a> - le cadre d'autotest que vous attendiez! <br><br><img src="https://habrastorage.org/webt/dw/jh/9k/dwjh9kypjl637kxj8tiaxwjvtp0.png"><br><a name="habracut"></a><br>  Je constate tout de suite qu'il y a deux vid√©os de tr√®s bonne qualit√© sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©seau</a> d√©di√©es √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kaspresso</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AdbServer</a> (auxiliaire pour Kaspresso, mais en m√™me temps, un projet fort et ind√©pendant): <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dmitry Movchan, Eugene Matsyuk - Comment commencer √† √©crire des autotests et ne pas devenir fou</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Egor Kournikov - La seule chose dont vous avez besoin pour les tests d'interface utilisateur</a> <br><br>  Ils d√©crivent en d√©tail l'histoire de la cr√©ation de biblioth√®ques: comment nous sommes pass√©s de la r√©solution d'un probl√®me √† la r√©solution d'un autre, et ce qui s'est finalement produit.  Je le recommande vivement. <br><br>  Par cons√©quent, dans l'article, je ne parlerai que des principaux points et puces afin que vous puissiez rapidement comprendre en quoi consiste ce cadre et quelles t√¢ches il r√©sout.  Et les tripes et les d√©tails peuvent √™tre trouv√©s dans la vid√©o et la documentation. <br><br><h2>  Pourquoi avons-nous m√™me besoin de notre propre cadre? </h2><br>  Chaque d√©veloppeur qui commence √† √©crire des autotests pose in√©vitablement des questions: <br><br><ol><li>  Comment commencer √† √©crire des autotests? </li><li>  Quels outils choisir? </li><li>  Que faire s'il n'y a pas d'outil n√©cessaire? </li><li>  Quelles sont les meilleures pratiques? </li></ol><br>  √Ä tout cela, ajoutez que chaque √©quipe essaie de r√©soudre ces probl√®mes √† sa mani√®re.  En cons√©quence, il n'y a pas de r√©ponse unique, il n'y a nulle part o√π jeter un ≈ìil sur la fa√ßon de le faire correctement.  Par cons√©quent, l'√©criture et la prise en charge des autotests co√ªtent cher aux entreprises, ce qui remet en question la faisabilit√© de l'automatisation en tant que telle. <br><br>  Pendant ce temps, l'automatisation des tests poursuit de bons objectifs.  Il vous permet d'avoir toujours un assistant vert et pr√™t √† sortir.  Et cela signifie que vous pouvez d√©ployer la version rapidement. <br>  Le seul probl√®me est de trouver des r√©ponses aux questions ci-dessus.  Mais ils sont presque les m√™mes pour toutes les √©quipes.  Alors pourquoi ne pas automatiser leur solution? <br><br><h2>  Que voulons-nous du cadre? </h2><br>  R√©v√©lons un peu nos attentes du cadre. <br><br><h3>  Bonne lisibilit√© </h3><br>  Par d√©faut, seule la biblioth√®que Espresso est disponible pour nous dans Android.  Il y a bien s√ªr Appium + Cucumber, qui en th√©orie vous permet d'√©crire des tests sur deux plateformes √† la fois.  Mais la communaut√© se dirige avec confiance vers le tout premier instrument.  Je ne d√©crirai pas tous les avantages et les inconv√©nients des biblioth√®ques ci-dessus: le r√©seau regorge d'informations √† ce sujet.  Voici, par exemple, l'un des liens relativement r√©cents: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Appium vs Espresso.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Que choisir et comment utiliser?</a> <br><br>  Alors, Espresso.  Pas un mauvais outil, mais son api est un peu retourn√©.  Jetez un ≈ìil √† un code simple: <br><br><pre><code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">espressoTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { onView(allOf(allOf(withId(R.id.espresso), isDescendantOfA(withId(R.id.coffee_variates))), isDescendantOfA(withId(R.id.content)))) .check(matches(withEffectiveVisibility(View.VISIBLE))) }</code> </pre> <br>  Vous devez penser √† le comprendre, non? <br><br>  Les dieux de Tha√Ølande et d'Australie nous ont pr√©sent√© la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kakao</a> , avec laquelle vous pouvez comprendre en un coup d'≈ìil ce qui se passe dans votre test.  Voici le m√™me code, mais avec Kakao: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kakaoTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { mainScreen { myView.isVisible() } }</code> </pre><br>  Bien mieux.  Mais imaginez maintenant que vous avez automatis√© un cas de test complet.  √Ä quoi ressemblerait le code? <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { MainScreen() { homeButton.click() } HomeScreen() { title { isVisible() hasAnyText() } } } }</code> </pre><br>  Le principal probl√®me est que, en regardant ce test, il est difficile de le corr√©ler avec le cas de test que vous avez automatis√©.  Vous pouvez bien s√ªr ajouter des journaux ou quelque chose comme √ßa.  Ou entrez dsl, qui transforme imm√©diatement l'apparence de vos tests: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { step(‚Äú<span class="hljs-number"><span class="hljs-number">1</span></span>. Open Home screen‚Äù) { MainScreen() { homeButton.click() } } step(‚Äú<span class="hljs-number"><span class="hljs-number">2</span></span>. Check Home title‚Äù) { HomeScreen() { title { isVisible() hasAnyText() } } } } }</code> </pre><br>  D'accord, √ßa a l'air compl√®tement diff√©rent. <br><br><h3>  La stabilit√© </h3><br>  Toute biblioth√®que pour ui-tests √©choue.  La m√™me action peut √™tre effectu√©e 50 fois avec succ√®s et √† la 51e pause sans raison apparente.  Et √† la 52e manche, tout va bien √† nouveau.  Et un tel "flacking" peut d√©cemment g√¢cher vos nerfs. <br><br>  Nous avons pens√©, pourquoi ne pas essayer d'intercepter toutes les actions de Kakao-Espresso, et y ajouter d√©j√† un comportement suppl√©mentaire visant √† g√©rer de telles erreurs al√©atoires. <br><br>  C'est ainsi que la <a href="">version 2.1 de la biblioth√®que Kakao est</a> n√©e, vous permettant de vous int√©grer √† tous les appels Espresso. <br><br>  De plus, nous avons cr√©√© nos propres intercepteurs, avec lesquels vous pouvez modifier le comportement du cadran-pair ou, par exemple, simplement vous connecter.  De plus, ces intercepteurs sont personnalisables, vous pouvez donc les personnaliser en fonction de vos besoins.  En savoir plus dans le <a href="">dock</a> . <br><br>  Plus pr√©cis√©ment, dans le cadre de la lutte contre les tests floconneux - si certaines de vos actions ont lev√© une exception, Kaspresso essaiera: <br><br><ul><li>  Faites d√©filer.  Peut-√™tre que votre vue n'est tout simplement pas visible √† l'√©cran. </li><li>  Supprimez le dialogue syst√®me qui pourrait provenir de Dieu sait o√π. </li><li>  R√©p√©tez un appel interrompu pendant deux secondes. </li></ul><br>  Avec ces √©tapes, nous r√©solvons compl√®tement le probl√®me avec des tests feuillet√©s! <br><br><h3>  Journalisation </h3><br>  L'un des principaux probl√®mes qui accompagne les autotests est le manque de journalisation intelligible, qui n'est surtout pas suffisant lorsque le test se bloque.  Asseyez-vous et demandez-vous ce qui est tomb√© et comment. <br><br>  Gr√¢ce √† l'interception susmentionn√©e, nous avons pu construire un syst√®me de journalisation assez √©tendu. <br><br>  Prenons un exemple: <br><br><img src="https://habrastorage.org/webt/03/nn/qg/03nnqgupdqnwa_i4jwyz1uqq6r0.png"><br><br><img src="https://habrastorage.org/webt/tq/az/3v/tqaz3vjsgpw0-ivylrfbnuqyiqa.png"><br><br>  Par d√©faut, Kaspresso enregistre toutes vos actions, s√©lectionne chaque √©tape du test, affiche le temps d'ex√©cution, etc. <br><br><h3>  Adb complet dans les tests Espresso </h3><br>  Initialement, adb n'est pas disponible dans les tests Espresso.  Oui, il y a <i>un shell adb</i> , mais il y a beaucoup moins de fonctions qu'en plein <i>adb</i> .  Mais il y a tellement de choses qui peuvent √™tre utiles dans les tests. <br><br>  Nous avons cr√©√© une biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AdbServer</a> distincte qui retournera <i>adb</i> complet √† vos tests!  La vid√©o ci-dessus d√©taille comment nous nous sommes battus et ce que nous avons v√©cu pour cela ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux</a> ). <br><br><h3>  Travailler avec Android OS </h3><br>  Les sp√©cificit√©s des tests de Kaspersky Lab sont telles que nous devons beaucoup travailler avec OS Android: configurer certains param√®tres, t√©l√©charger des fichiers sur le syst√®me, etc. Tout cela nous a incit√©s √† standardiser tout notre travail avec le syst√®me, √† cr√©er un ensemble d'interfaces claires, accessible via un seul <i>appareil de</i> classe point d'entr√©e. <br><br>  Quelles sont ces interfaces et que font-elles?  Permettez-moi de vous donner quelques diapositives de la pr√©sentation de Yegor √† titre d'illustration: <br><br><img src="https://habrastorage.org/webt/ye/5w/po/ye5wpoo2z5ezglihfrlkpobobrs.png"><br><br><img src="https://habrastorage.org/webt/f-/tc/ow/f-tcowtztognmdjlaxkl9x6z9sg.png"><br><br><img src="https://habrastorage.org/webt/um/wj/te/umwjteh2qef3xv-4hw4xzkjkrh8.png"><br><br><img src="https://habrastorage.org/webt/qz/yy/qs/qzyyqsa4aeqaozts7uy367ryofw.png"><br><br>  La documentation est <a href="">ici</a> . <br><br>  Sous le capot, AdbServer et UiAutomator sont principalement utilis√©s. <br>  Mais!  Si vous n'√™tes pas satisfait de l'impl√©mentation d'une interface, vous pouvez d√©finir votre impl√©mentation via le configurateur. <br><br><h3>  Capture d'√©cran de DocLoc (Documentation et localisation) </h3><br>  Tous les projets o√π il y a une localisation, il est souvent n√©cessaire de prendre des captures d'√©cran dans diff√©rentes langues afin de les donner au traducteur comme illustrations.  Apr√®s tout, il est tr√®s difficile de faire une traduction correcte sans voir o√π et comment une ligne particuli√®re est utilis√©e.  Par cons√©quent, je veux pouvoir prendre des captures d'√©cran rapidement et imm√©diatement dans toutes les langues.  Y compris des captures d'√©cran des bo√Ætes de dialogue syst√®me.  Vous pouvez √©galement avoir besoin de captures d'√©cran sur les √©crans h√©rit√©s et sans refactoring global. <br><br>  Tout cela vous permet de faire Kaspresso hors de la bo√Æte.  En savoir plus dans la <a href="">documentation</a> . <br><br><h3>  Architecture et bonnes pratiques </h3><br>  L'une des t√¢ches cl√©s de Kaspresso √©tait de cr√©er un tel DSL qui vous pousserait vers la bonne architecture de test et leur √©criture correcte. <br><br>  De nombreuses copies ont √©t√© cass√©es sur ce sujet, car vous ne trouverez malheureusement de telles r√®gles nulle part.  Tout ce que vous pouvez trouver sont des articles sur l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">objet de page</a> . <br><br>  Par cons√©quent, nous n'avons √©pargn√© aucun effort et avons soulign√© ces probl√®mes dans la <a href="">documentation</a> , et dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©o une fois</a> et la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©o deux</a> . <br>  De plus, Sasha Blinov a √©crit un excellent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article sur le Kotlin DSL et les tests √©l√©gants</a> .  Les dsl d√©crits dans l'article sont fournis par Kaspresso. <br><br>  De retour chez Mobius, nous avons propos√© une option sur la fa√ßon d'acc√©l√©rer l'impact des autotests et de les int√©grer rapidement dans PullRequest, en contournant les probl√®mes d'infrastructure in√©vitables.  Nous en parlons plus en d√©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h3>  Comment connecter et configurer Kaspresso si vous avez d√©j√† de nombreux tests </h3><br>  Le charme principal est que si vous avez d√©j√† de nombreux tests √©crits en Kakao et que vous souhaitez impl√©menter Kaspresso, vous n'avez rien √† r√©√©crire!  H√©ritez simplement vos classes de test de la classe sp√©ciale TestCase.  Et c'est tout! <br><br>  C'√©tait: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  C'est devenu: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  Et si vous n'aimez pas l'h√©ritage, utilisez une classe <i>TestRule</i> similaire. <br><br>  Comme nous l'avons d√©j√† mentionn√©, Kaspresso est un cadre tr√®s flexible et personnalisable.  Tous les param√®tres sont disponibles via la classe <i>Kaspresso</i> du m√™me nom. <br><br>  Le param√®tre par d√©faut est par d√©faut.  Si vous souhaitez personnaliser quelque chose, cela ressemblera √† ceci: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>( Kaspresso.Builder.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().apply { viewBehaviorInterceptors.add(MyInterceptor()) flakySafetyParams.timeoutMs = <span class="hljs-number"><span class="hljs-number">1_000</span></span> } ) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  Autrement dit, <i>Kaspresso.Builder</i> est disponible via le <i>constructeur</i> <i>TestCase</i> , o√π vous d√©finissez tous les param√®tres dont vous avez besoin.  Les d√©tails sur le configurateur sont √©crits dans la <a href="">documentation</a> . <br><br><h2>  Plans imm√©diats </h2><br>  Dans un avenir tr√®s proche, nous pr√©voyons d'ajouter les √©l√©ments suivants: <br><br><h3>  Afficher les √©tapes de test dans Allure (bonjour aux gars de HeadHunter) </h3><br>  Gr√¢ce √† un intercepteur sp√©cial, nous pr√©parons les donn√©es pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Marathon</a> .  Cela nous permet de voir les rapports Allure de la nature suivante: <br><br><img src="https://habrastorage.org/webt/ad/dm/ux/addmux7l65zlvxi0fxlr97wr_o0.jpeg"><br><br>  D√©tails dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PR # 4</a> <br><br>  PS PR est d√©j√† dans la version 1.0.1, nous pr√©parons maintenant le PR correspondant √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Marathon</a> . <br>  Pss.  Il y a une id√©e pour attacher un morceau sp√©cifique du journal √† chaque √©tape, et ajouter une capture d'√©cran √† l'√©tape "tomb√©e". <br><br><h3>  Test des scripts de mise √† niveau </h3><br>  Il est souvent n√©cessaire de v√©rifier l'exactitude des mises √† niveau des applications.  Oui, certains ch√®ques peuvent √™tre transf√©r√©s aux tests unitaires.  Mais nous aimerions √™tre calmes pour l'ensemble de l'application dans son ensemble. <br><br>  Malheureusement, sur un Espresso pur, il est impossible de le faire, car si nous r√©installons l'apk test√©, le test √©chouera.  Vous pouvez en quelque sorte essayer de jouer avec le coureur, mais il m'est difficile d'imaginer √† quoi ressembleront ces am√©liorations et √† quel point elles seront stables. <br>  Par cons√©quent, chez Kaspresso, nous pr√©parons une solution √† ce probl√®me, bas√©e sur UiAutomator.  Cependant, en haut, vous aurez tout de m√™me le m√™me dsl familier, tr√®s similaire √† Kakao et avec le m√™me support pour l'intersection. <br><br><h2>  Liens utiles </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kaspresso</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AdbServer</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chat</a> , dans lequel nous serons toujours heureux de r√©pondre √† toutes vos questions <br><br><h2>  Remerciements </h2><br>  Un merci sp√©cial √† tous ceux qui ont particip√© √† l'√©laboration du projet. <br>  C'√©tait tr√®s difficile, mais sacr√©ment cool! <br><br><img src="https://habrastorage.org/webt/_l/vd/_u/_lvd_ux_onb1ft8uoo2eat8_5uo.png"><br><br><img src="https://habrastorage.org/webt/j2/bm/i1/j2bmi1ov0wicizc7iru0shunom0.png"><br><br><h2>  Au lieu d'une conclusion </h2><br>  Nous pensons que Kaspresso et AdbServer vous rendront la vie meilleure. <br>  Nous appr√©cions vos commentaires, recommandations, Yishuyam et PulRequest! <br>  Et n'oubliez pas de mettre un ast√©risque, s'il vous pla√Æt! <br><br>  PS Et √† la toute fin un petit sondage =) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr467617/">https://habr.com/ru/post/fr467617/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr467605/index.html">Tout ce dont vous avez besoin est une URL</a></li>
<li><a href="../fr467607/index.html">Confession de haineux docker</a></li>
<li><a href="../fr467609/index.html">Cr√©ation d'une application mobile sur React Native</a></li>
<li><a href="../fr467611/index.html">Algorithmes de d√©tection de contour d'image</a></li>
<li><a href="../fr467615/index.html">Comment cr√©er un wrapper Python et ne pas devenir fou</a></li>
<li><a href="../fr467619/index.html">Les pichets Aquafor sont un bon exemple de la fa√ßon dont les filtres pour le traitement de l'eau ne peuvent pas √™tre con√ßus</a></li>
<li><a href="../fr467621/index.html">Rencontre Elasticsearch Moscou √† Ozon</a></li>
<li><a href="../fr467625/index.html">10 services pour cr√©er une structure de site en 2020</a></li>
<li><a href="../fr467627/index.html">AZN-V comme technologie de surveillance pour drones</a></li>
<li><a href="../fr467629/index.html">Le livre ¬´R√©alit√© irr√©elle. Parcourir la boucle quantique ¬ª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>