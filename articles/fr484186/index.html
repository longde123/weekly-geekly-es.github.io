<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüöí üë©üèø‚Äçüè≠ üåõ LDAP - "l'authentification" est un contre-mod√®le üåõ üëÅÔ∏è ü§öüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, toute organisation poss√®de un annuaire LDAP rempli d'utilisateurs de cette organisation. Si vous regardez attentivement, vous trouverez u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LDAP - "l'authentification" est un contre-mod√®le</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avanpost/blog/484186/"><img src="https://habrastorage.org/webt/z4/t7/pc/z4t7pcdsbu94_dfp79cpkjk88te.png" alt="image"><br><br>  Aujourd'hui, toute organisation poss√®de un annuaire LDAP rempli d'utilisateurs de cette organisation.  Si vous regardez attentivement, vous trouverez une ou plusieurs applications qui utilisent le m√™me r√©pertoire pour ¬´l'authentification¬ª.  Et les guillemets ne sont pas accidentels ici, car LDAP est un protocole d'acc√®s √† l'annuaire con√ßu pour lire, √©crire et rechercher le service d'annuaire.  Ce n'est pas un protocole d'authentification.  Le terme ¬´authentification LDAP¬ª fait plut√¥t r√©f√©rence √† cette partie du protocole (op√©ration de liaison), qui d√©termine qui vous √™tes et quels droits d'acc√®s vous avez aux informations de l'annuaire. <br><a name="habracut"></a><br>  Au fil du temps, LDAP est devenu un service d'authentification de facto.  Les services LDAP g√©n√©ralis√©s et abordables, tels que Active Directory, sont devenus une friandise pour les d√©veloppeurs de logiciels qui souhaitent int√©grer l'authentification dans leurs produits.  Les biblioth√®ques clientes LDAP sont disponibles pour presque tous les frameworks et l'int√©gration est relativement facile √† impl√©menter. <br><br>  Mais malgr√© le fait que l'utilisation de LDAP puisse aider √† r√©soudre le probl√®me de l'impl√©mentation de l'authentification des utilisateurs dans diverses applications de l'entreprise, cela cr√©e de nombreux probl√®mes.  Contrairement aux protocoles d'authentification sp√©cialement con√ßus, l'utilisation de LDAP entra√Æne diverses vuln√©rabilit√©s de s√©curit√© des informations. <br><br>  Pour comprendre quelles sont ces vuln√©rabilit√©s, vous devez d'abord comprendre le fonctionnement de l'authentification LDAP. <br><br><h2>  Fonctionnement de l'authentification LDAP </h2><br>  Imaginez la situation suivante (elle est loin de la r√©alit√©, mais elle transmet parfaitement l'essence). <br><br>  Supposons que je passe une commande dans une boutique en ligne afin qu'elle soit livr√©e √† mon domicile en mon absence.  Le courrier arrive et laisse une note sous la porte avec le texte ¬´Je suis d√©sol√©, nous ne vous avons pas trouv√©¬ª et me demande de retirer la commande au point de retrait le plus proche √† un moment opportun.  Au point de prise en charge, l'employ√© me demande mon nom, mon adresse et demande les cl√©s de la maison pour confirmer mon identit√©.  Ensuite, l'agent de livraison vient chez moi et ouvre la porte avec ma cl√©.  Il va √† l'int√©rieur pour s'assurer que j'habite l√†-bas, par exemple, √† partir de photographies sur le mur ou par le nom du destinataire sur la correspondance.  Apr√®s cela, l'employ√© revient au point d'√©mission et m'informe qu'il a r√©ussi √† confirmer mon identit√©, et je peux recevoir mon colis!  Hourra! <br><br>  En plus des probl√®mes de logistique, cette situation regorge d'autres probl√®mes.  Et si un critique sans scrupules faisait une copie de ma cl√©?  Ou a-t-il laiss√© la cl√© sans surveillance pendant longtemps, et quelqu'un d'autre?  Et si le testeur √©tait attaqu√© et que ma cl√© √©tait prise?  Quand je donne la cl√© de mon appartement √† un √©tranger, je ne peux pas √™tre s√ªr de sa d√©cence et de ma s√©curit√©. <br><br>  Heureusement, dans le monde r√©el, nous avons des documents d‚Äôidentification, par exemple un permis de conduire ou un passeport, qui sont d√©livr√©s par des agences gouvernementales, et leur authenticit√© ne fait aucun doute.  Je peux fournir ces documents au coursier pour ma propre identification sans remettre les cl√©s. <br><br>  Dans le monde LDAP, nous devons encore passer nos cl√©s pour ouvrir la porte en notre nom.  Nous transf√©rons notre mot de passe √† un tiers et il essaie de p√©n√©trer le serveur LDAP avec lui.  S'il parvient √† y acc√©der, nous ne pouvons pas √™tre s√ªrs que nos informations d'identification ne sont pas compromises.  Dans ce cas, l'attaquant aura non seulement la possibilit√© de d√©verrouiller la porte LDAP, mais √©galement d'acc√©der √† n'importe quelle application qui utilise les m√™mes informations d'identification. <br><br>  Heureusement, dans un monde d'authentification plus complet, nous avons aussi des passeports et des permis de conduire!  Les protocoles d'authentification tels que Kerberos, SAML et OpenID Connect √©mettent des jetons √† des tiers.  Les jetons confirment que vous √™tes bien ce que vous pr√©tendez √™tre, et il n'est pas n√©cessaire de transf√©rer vos cl√©s √† quiconque.  Parce que LDAP n'a jamais √©t√© con√ßu comme un protocole d'authentification, il manque les m√©canismes appropri√©s. <br><br><h2>  Inconv√©nients de LDAP en tant que syst√®me d'authentification </h2><br>  En 2007, Shumon Hack a publi√© un article de science-fiction ( <a href="https://www.huque.com/talks/2007-10-LDAP-Authn.html">LDAP Weaknesses as a Central Authentication System</a> ) dans lequel il d√©crit trois probl√®mes sp√©cifiques lors de l'utilisation de LDAP comme syst√®me d'authentification. <br><br><h4>  1. L'application n'est probablement pas suffisamment s√©curis√©e pour g√©rer les informations d'identification </h4><br>  L'auteur souligne que la protection d'un petit ensemble de serveurs d'authentification contre les attaques est beaucoup plus facile que la protection d'un grand nombre de serveurs d'applications. <br><br>  Pour la plupart, les serveurs d'authentification sont, en r√®gle g√©n√©rale, sous la supervision √©troite de sp√©cialistes ayant une exp√©rience significative dans le domaine de la s√©curit√© de l'information. <br><br>  D'un autre c√¥t√©, les serveurs d'applications ont un niveau de s√©curit√© compl√®tement diff√©rent et sont plus √† risque de compromis.  Ils sont moins s√©curis√©s, fonctionnent avec des piles de logiciels plus complexes et sont plus susceptibles de pr√©senter des vuln√©rabilit√©s.  Et le plus souvent, ils sont g√©r√©s par des personnes qui n'ont pas une connaissance approfondie de la s√©curit√©.  Construire le bon syst√®me de s√©curit√© est un processus compliqu√© dans lequel il est tr√®s facile de se tromper. <br><br>  Le probl√®me est que si un serveur d'applications est compromis, toutes les informations d'identification utilis√©es par leurs propri√©taires pendant l'attaque sont √©galement compromises.  Tout autre syst√®me qui utilise le m√™me annuaire LDAP pour l'authentification est en danger. <br><br><h4>  2. Le serveur LDAP ne peut pas s√©curiser le m√©canisme d'authentification utilis√© pour obtenir les informations d'identification </h4><br>  Un serveur LDAP ne peut garantir la s√©curit√© des transactions.  Bien qu'un serveur LDAP, par exemple, puisse appliquer la liaison sur TLS pour garantir que les informations d'identification ne sont pas transmises en texte clair, le serveur lui-m√™me n'a jamais jou√© de r√¥le dans l'obtention des informations d'identification de l'utilisateur.  Il existe un risque que l'application re√ßoive un mot de passe via un canal non s√©curis√©. <br><br><h4>  3. L'utilisateur est oblig√© de partager son secret d'authentification avec un tiers </h4><br>  Le mot de passe utilisateur ou le secret d'authentification doit rester <i>secret</i> .  Il ne doit √™tre connu que de l'utilisateur et du syst√®me d'authentification.  Lors de l'utilisation de l'authentification LDAP, l'utilisateur est oblig√© de partager son secret avec un tiers afin qu'elle puisse ensuite utiliser ce secret pour interagir avec l'annuaire LDAP au nom de l'utilisateur. <br><br>  Il est important de mentionner que lors de l'utilisation de protocoles d'authentification sp√©cialement con√ßus tels que Kerberos, et m√™me √† partir du NTLM pr√©c√©dent, le secret de l'utilisateur n'est jamais transmis sur le r√©seau.  Le dispositif client et le serveur utilisent des op√©rations cryptographiques pour se prouver qu'ils ont le m√™me secret et n'√©changent m√™me pas le secret lui-m√™me. <br><br>  Aux points de Shumon Hook, j'ajouterai une description de plusieurs nuances de l'authentification LDAP, bas√©e sur ma propre exp√©rience.  Tout d'abord, le sujet concerne l'utilisation d'Active Directory. <br><br><h4>  4. De nombreux d√©veloppeurs ne connaissent pas suffisamment les m√©canismes LDAP pour l'utiliser correctement </h4><br>  Un de mes pr√©c√©dents articles de <a href="https://blog.lithnet.io/">blog</a> d√©crit comment la liaison anonyme et non authentifi√©e a permis de d√©jouer les d√©veloppeurs d'applications et a fait sauter les utilisateurs non autoris√©s.  La possibilit√© d'effectuer une op√©ration de liaison sans authentification est l'une des subtilit√©s du protocole que m√™me les experts LDAP les plus exp√©riment√©s ne connaissent pas. <br><br>  Les r√©pertoires ne sont pas faciles √† organiser et capables de stocker une √©norme quantit√© d'informations organisationnelles et offrent de nombreuses fa√ßons personnalisables de les stocker.  J'ai vu beaucoup de cas o√π le d√©veloppeur de l'application supposait qu'il y avait une certaine classe ou attribut d'objet, et quand ils n'√©taient pas d√©tect√©s, l'application se bloquait.  Pour l'authentification des utilisateurs, la connaissance de la structure des donn√©es stock√©es dans l'annuaire ne doit pas √™tre requise et appliqu√©e.  Le protocole d'authentification doit √™tre extrait des d√©tails du r√©f√©rentiel d'objets situ√© √† un niveau inf√©rieur. <br><br><h4>  5. Les administrateurs d'applications ne configurent souvent pas correctement les clients LDAP </h4><br>  Lors de la gestion d'Active Directory dans un grand environnement distribu√©, il existe une nuance d√©sagr√©able: il est difficile de d√©terminer quelles applications sp√©cifiques utilisent Active Directory en tant qu'annuaire LDAP et comment les administrateurs d'applications ont configur√© le client LDAP exactement. <br><br>  Ce qui suit sont des exemples des horreurs d'une mauvaise configuration. <br><br><ul><li>  DN de codage en dur dans les applications ou utilisation de DN dans une op√©ration de liaison.  Des probl√®mes surviennent constamment lorsque vous renommez ou d√©placez des objets dans un r√©pertoire, et tout cela parce que quelqu'un quelque part DN DN cod√© en dur.  (Remarque pour ceux qui effectuent des op√©rations de liaison simples avec Active Directory: il n'est pas n√©cessaire d'utiliser un DN. Active Directory fournit √©galement des formats de DN alternatifs qui sont plus fiables que l'utilisation d'un format traditionnel). </li><li>  Pour l'op√©ration de liaison, ce n'est pas un compte de service qui est utilis√©, mais un compte personnel du d√©veloppeur ou de l'administrateur (imaginez ce qui se passera lorsque le propri√©taire du compte quittera l'entreprise). </li><li>  Envoi de mots de passe en texte clair au port 389. </li><li>  Dans certaines applications, la case √† cocher ¬´Valider le certificat¬ª n'est pas requise lors de la connexion √† AD √† l'aide de TLS (port 636).  Pourquoi est-ce g√©n√©ralement acceptable?  Comment transmettre le mot de passe √† un service tiers sans √™tre convaincu de son authenticit√©? </li></ul><br>  Faire fonctionner le client LDAP est facile.  Mais le simple fait que cela fonctionne ne signifie pas que la configuration est correcte. <br><br><h4>  6. L'authentification LDAP et les services d'authentification modernes s'excluent mutuellement </h4><br>  Une application qui utilise LDAP pour l'authentification devra toujours s'appuyer sur les noms d'utilisateur et les mots de passe.  Essayer d'impl√©menter des technologies modernes, telles que l'authentification multifacteur et l'authentification unique, est pratiquement impossible (sauf si vous allez impl√©menter vos propres technologies, ce qui en soi est une mauvaise id√©e).  La FIDO Alliance s'engage √† faire des mots de passe une relique du pass√© et chaque application qui utilise l'authentification LDAP sera un obstacle √† une politique sans mot de passe. <br><br><h2>  Quelles sont les options? </h2><br>  Aujourd'hui, les applications Web peuvent vraiment se passer de l'authentification LDAP.  Il existe de nombreux excellents protocoles d'authentification Web, tels que SAML, WS-Federation et OpenID Connect, qui ne n√©cessitent pas d'informations d'identification utilisateur pour fonctionner avec des applications tierces.  D'innombrables produits fournissent ces services, y compris le service de f√©d√©ration Active Directory (int√©gr√© √† Windows Server) ou des services tiers tels que Microsoft Azure AD, Okta, Ping et autres.  Si votre organisation ne dispose pas d'un IdP f√©d√©r√©, la premi√®re chose √† faire est de l'impl√©menter. <br><br>  La principale chose √† laquelle vous devez faire attention lors du choix d'un nouveau logiciel est la prise en charge des protocoles d'authentification modernes.  M√™me si l'entreprise a besoin de l'application ici et maintenant, ne vous pr√©cipitez pas pour choisir une solution, surtout si ce choix se limite uniquement aux produits avec authentification LDAP.  Il convient d'essayer de faire comprendre au fournisseur s√©lectionn√© la n√©cessit√© d'affiner le produit √† l'aide de protocoles d'authentification plus modernes.  Peut-√™tre qu'il √©coutera et r√©visera son plan de d√©veloppement. <br><br>  Le nombre d'applications de bureau avec un "client lourd" qui prend en charge les protocoles d'authentification modernes augmente, et c'est en effet une tendance joyeuse.  Ces applications √©taient g√©n√©ralement un bastion de l'authentification LDAP.  Un nombre croissant de SDK, tels que la biblioth√®que d'authentification Microsoft (MSAL), permettent aux d√©veloppeurs d'ajouter facilement la prise en charge des services d'authentification modernes √† leurs applications mobiles et de bureau. <br><br>  En fin de compte, il convient de reconna√Ætre que dans la r√©alit√© d'aujourd'hui, toutes les applications ne prennent pas en charge les protocoles d'authentification modernes, et ne le seront peut-√™tre jamais.  La mise en ≈ìuvre d'une interdiction compl√®te de l'authentification LDAP n'est probablement pas possible dans aucune organisation.  Cependant, l'authentification LDAP ne doit en aucun cas √™tre encourag√©e au sein de l'organisation.  L'utilisation de LDAP ne doit √™tre envisag√©e qu'en l'absence d'autres options. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr484186/">https://habr.com/ru/post/fr484186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr484174/index.html">Castle buvant dans des conditions "extr√™mes" ou comment nous avons particip√© au spectacle "DOZOR"</a></li>
<li><a href="../fr484176/index.html">Impl√©mentation du mod√®le de statut dans Unity</a></li>
<li><a href="../fr484178/index.html">Commutateur Ethernet intelligent pour la plan√®te Terre</a></li>
<li><a href="../fr484180/index.html">PBX virtuel Rostelecom: quoi et comment faire via l'API</a></li>
<li><a href="../fr484182/index.html">Xenobots: des nanorobots vivants issus de cellules de grenouilles</a></li>
<li><a href="../fr484188/index.html">Normes de conception de base de donn√©es</a></li>
<li><a href="../fr484192/index.html">Applications faciles et faciles √† d√©ployer sur la cartouche Tarantool (partie 2)</a></li>
<li><a href="../fr484194/index.html">Kubernetes traduit en enfants</a></li>
<li><a href="../fr484196/index.html">Enregistrement du son JS √† partir d'un microphone ou des commentaires vocaux</a></li>
<li><a href="../fr484198/index.html">Revers de la m√©daille: qui a gagn√© et perdu sur la croissance des actions Tesla</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>