<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧖🏽 💞 🔓 Refleksi pada OOP dan keadaan objek 🛩️ 🏴󠁧󠁢󠁥󠁮󠁧󠁿 ☸️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kode program ditulis dari atas ke bawah. Instruksi dibaca dan dieksekusi dalam urutan yang sama. Ini logis dan semua orang sudah lama terbiasa. Dalam ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Refleksi pada OOP dan keadaan objek</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478826/"><p>  Kode program ditulis dari atas ke bawah.  Instruksi dibaca dan dieksekusi dalam urutan yang sama.  Ini logis dan semua orang sudah lama terbiasa.  Dalam beberapa kasus, Anda dapat mengubah urutan operasi.  Tetapi kadang-kadang urutan pemanggilan fungsi penting, meskipun secara sintaksis hal ini tidak jelas.  Ternyata kode itu terlihat berfungsi, bahkan setelah mengatur ulang panggilan, dan hasilnya tidak terduga. </p><br><p>  Suatu kali, kode yang sama menarik perhatian saya. <a name="habracut"></a></p><br><h2 id="problema">  Masalah </h2><br><p>  Suatu hari, ketika mencari-cari kode orang lain dalam proyek bersama, saya menemukan fungsi seperti: </p><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Product product, Images images, Prices prices, Availabilities availabilities)</span></span></span></span>{ priceFiller.fill(product, prices); <span class="hljs-comment"><span class="hljs-comment">//do not move this line below availabilityFiller call, availabilities require prices availabilityFiller.fill(product, availabilities); imageFiller.fill(product, images); return product; }</span></span></code> </pre> <br><p>  Tentu saja, bukan gaya yang paling "elegan" yang menarik perhatian Anda: kelas menyimpan data (POJO), fungsi mengubah objek yang masuk ... </p><br><p>  Secara umum, sepertinya tidak ada apa-apa.  Kami memiliki objek di mana tidak ada cukup data, dan ada data itu sendiri yang berasal dari sumber lain (layanan), yang sekarang akan kita tempatkan di objek ini untuk membuatnya lengkap. </p><br><p>  Namun ada beberapa nuansa. </p><br><ol><li>  Saya tidak menyukai kenyataan bahwa tidak ada satu fungsi pun yang ditulis dalam gaya FP dan memodifikasi objek yang dilewatkan sebagai argumen. <br><ul><li>  Tetapi katakanlah ini dilakukan untuk mengurangi waktu pemrosesan dan jumlah objek yang dibuat. </li></ul></li><li>  Hanya komentar dalam kode yang mengatakan bahwa urutan panggilan itu penting, dan Anda harus berhati-hati saat menyematkan <code>Filler</code> baru <br><ul><li>  Tetapi jumlah orang yang mengerjakan proyek ini lebih dari 1 dan tidak semua orang tahu tentang trik ini.  Terutama orang-orang baru dalam tim (belum tentu di perusahaan). </li></ul></li></ol><br><p>  Poin terakhir terutama melindungi saya.  Lagipula, API dibangun sedemikian rupa sehingga kita tidak tahu apa yang telah berubah pada objek setelah memanggil fungsi ini.  Misalnya, sebelum dan sesudah kami memiliki metode <code>Product::getImages</code> , yang, sebelum memanggil fungsi <code>fill</code> , akan menghasilkan daftar kosong, dan kemudian daftar dengan gambar ke produk kami. </p><br><p>  Dengan <code>Filler</code> segalanya menjadi lebih buruk.  <code>AvailabilityFiller</code> tidak memperjelas bahwa mereka mengharapkan informasi tentang harga barang sudah tertanam dalam objek yang ditransfer. </p><br><p>  Jadi saya berpikir tentang bagaimana saya bisa melindungi kolega saya dari kesalahan penggunaan fungsi. </p><br><h2 id="predlozhennye-resheniya">  Solusi yang diajukan </h2><br><p>  Pertama, saya memutuskan untuk membahas kasus ini dengan kolega saya.  Sayangnya, semua solusi yang mereka usulkan tampaknya tidak cocok untuk saya. </p><br><h3 id="runtimeexception">  Runtimeexception </h3><br><p>  Salah satu opsi yang diusulkan adalah: dan Anda menulis di <code>AvailabilityFiller</code> di awal fungsi <code>Objects.requireNonNull(product.getPrices)</code> dan kemudian programmer mana pun akan menerima kesalahan selama tes lokal. </p><br><ul><li>  tetapi harga mungkin benar-benar tidak ada di sana, jika layanan tidak tersedia atau kesalahan lain, maka produk tersebut harus menerima status "kehabisan stok".  Kami harus mengaitkan semua jenis bendera atau apa pun untuk membedakan "tidak ada data" dari "bahkan tidak diminta". <br><ul><li>  Jika Anda melempar pengecualian di <code>getPrices</code> sendiri, maka kami akan membuat masalah yang sama dengan Java modern dengan daftar <br><ul><li>  Misalkan Daftar dilewatkan ke fungsi yang menawarkan metode get dalam API-nya ... Saya tahu Anda tidak perlu mengubah objek yang ditransfer, tetapi buat yang baru.  Tetapi intinya adalah bahwa API menawarkan metode seperti itu kepada kami, tetapi dalam runtime kesalahan dapat terjadi jika itu adalah daftar yang tidak dapat diubah, seperti yang diperoleh dari Collectors.toList () </li></ul></li></ul></li><li>  jika <code>AvailabilityFiller</code> digunakan oleh orang lain, programmer yang menulis panggilan tidak akan langsung mengerti apa masalahnya.  Hanya setelah peluncuran dan Debug.  Kemudian dia masih harus memahami kode untuk mencari tahu di mana mendapatkan data. </li></ul><br><h3 id="test">  Tes </h3><br><p>  "Dan kamu menulis tes yang akan pecah jika kamu mengubah urutan panggilan."  yaitu  jika semua <code>Filler</code> mengembalikan produk "baru", sesuatu seperti ini akan berubah: </p><br><pre> <code class="java hljs">given(priceFillerMock.fill(eq(productMock), any())).willReturn(productWithPricesMock); given(availabilityFillerMock.fill(eq(productMockWithPrices), any())).willReturn(productMockWithAvailabilities); given(imageFillerMock.fill(eq(productMockWithAvailabilities), any())).willReturn(productMockWithImages); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = productFiller.fill(productMock, p1, p2, p3); assertThat(<span class="hljs-string"><span class="hljs-string">"unexpected return value"</span></span>, result, is(productMockWithImages));</code> </pre> <br><ul><li>  Saya tidak suka tes yang begitu "Kotak Putih" </li><li>  Beristirahat dengan setiap <code>Filler</code> baru </li><li>  Itu rusak ketika mengubah urutan panggilan independen </li><li>  Sekali lagi, itu tidak menyelesaikan masalah penggunaan kembali <code>AvailabilityFiller</code> itu sendiri </li></ul><br><h2 id="sobstvennye-popytki-resheniya-problemy">  Upaya sendiri untuk menyelesaikan masalah </h2><br><h3 id="ideya">  Ide </h3><br><p>  Saya pikir Anda sudah menebak bahwa saya ingin menyelesaikan masalah di tingkat kompilasi.  Nah, mengapa saya perlu, seseorang bertanya, bahasa yang dikompilasi dengan pengetikan yang kuat jika saya tidak dapat mencegah kesalahan. </p><br><p>  Dan saya bertanya-tanya apakah sebuah objek tanpa data tambahan dan objek "extended" milik kelas yang sama? </p><br><p>  Bukankah benar untuk menggambarkan berbagai keadaan yang mungkin dari suatu objek sebagai kelas atau antarmuka yang terpisah? </p><br><p>  Jadi ide saya adalah ini: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct&gt; product, Images images, Prices prices, Availabilities availabilities)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p1 = priceFiller.fill(product, prices); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p2 = availabilityFiller.fill(p1, availabilities); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> imageFiller.fill(p2, images); } <span class="hljs-function"><span class="hljs-function">PriceFiller </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductWithPrices </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct&gt; product, Prices prices)</span></span></span><span class="hljs-function"> AvailabilityFiller </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductWithAvailabilities </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends ProductWithPrices&gt; product, Prices prices)</span></span></span><span class="hljs-function">  </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> &lt;BaseProduct &amp; PriceAware &amp; AvailabilityAware&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct &amp; PriceAware&gt; product, Prices prices)</span></span></span></span></code> </pre> <br><p>  Yaitu  produk yang awalnya didefinisikan adalah turunan dari kelas selain yang dikembalikan, yang sudah menunjukkan perubahan data. </p><br><p>  <code>Filler</code> , di API mereka, tentukan dengan tepat data apa yang mereka butuhkan dan apa yang mereka kembalikan. </p><br><p>  Dengan cara ini Anda dapat mencegah urutan panggilan yang salah. </p><br><h3 id="realizaciya">  Implementasi </h3><br><p>  Bagaimana menerjemahkan ini menjadi kenyataan di Jawa?  (Ingatlah bahwa mewarisi dari beberapa kelas di Jawa tidak dimungkinkan.) </p><br><p>  Kompleksitas ditambahkan oleh operasi independen.  Misalnya, gambar dapat ditambahkan sebelum dan sesudah menambahkan harga, serta di akhir fungsi. <br>  Lalu mungkin </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductWithImages</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageAware</span></span></span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductWithImagesAndPrices</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageAware</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PriceAware</span></span></span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Product</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageAware</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PriceAware</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvailabilityAware</span></span></span></span>{}</code> </pre> <br><p>  Bagaimana cara menggambarkan semuanya? </p><br><p>  Buat adaptor? </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProductWithImagesAndPrices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct &amp; PriceAware&gt; base)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.base = base; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images = Collections.emptyList(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.base.getId(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Price </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.base.getPrice(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Image&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images; }</code> </pre> <br><p>  Salin data / tautan? </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProductWithImagesAndPrices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct &amp; PriceAware&gt; base)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = base.getId(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.prices = base.getPrices(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images = Collections.emptyList(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Image&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images; }</code> </pre> <br><p>  Seperti yang sudah terlihat, semuanya hanya memiliki sejumlah besar kode.  Dan ini terlepas dari kenyataan bahwa dalam contoh saya hanya menyisakan 3 jenis data input.  Di dunia nyata, bisa ada banyak lagi. </p><br><p>  Ternyata biaya penulisan dan pemeliharaan kode seperti itu tidak membenarkan diri mereka sendiri, walaupun gagasan untuk membagi negara menjadi kelas-kelas terpisah tampak sangat menarik bagi saya. </p><br><p>  <em>Mundur</em> </p><br><blockquote>  Jika Anda melihat bahasa lain, maka di suatu tempat masalah ini lebih mudah untuk dipecahkan, tetapi di suatu tempat tidak. <br>  Misalnya, di Go, Anda dapat menulis referensi ke kelas yang dapat dikembangkan tanpa metode "menyalin" atau "membebani".  Tapi ini bukan tentang Go </blockquote><p>  <em>Penyimpangan lain</em> </p><br><blockquote>  Saat menulis artikel ini, solusi lain yang mungkin muncul dengan <code>Proxy</code> , yang meminta penulisan hanya metode baru, tetapi membutuhkan hierarki antarmuka.  Secara umum, menakutkan, marah dan tidak cocok.  Jika seseorang tiba-tiba tertarik: </blockquote><br><div class="spoiler">  <b class="spoiler_title">Sebelum tidur dan makan, tidak disarankan untuk melihat ini</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> baseProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseProductProxy().create(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseProductImpl(<span class="hljs-number"><span class="hljs-number">100L</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productWithPrices = fillPrices(baseProduct, BigDecimal.TEN); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productWithAvailabilities = fillAvailabilities(productWithPrices, <span class="hljs-string"><span class="hljs-string">"available"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productWithImages = fillImages(productWithAvailabilities, List.of(<span class="hljs-string"><span class="hljs-string">"url1, url2"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> product = productWithImages; System.out.println(product.getId()); System.out.println(product.getPrice()); System.out.println(product.getAvailability()); System.out.println(product.getImages()); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T extends BaseProduct&gt; <span class="hljs-function"><span class="hljs-function">ImageAware </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T base, List&lt;String&gt; images)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (ImageAware) Proxy.newProxyInstance(base.getClass().getClassLoader(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[]{ImageAware.class, BaseProduct.class}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyInvocationHandler&lt;&gt;(base, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageAware() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> images; } })); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T extends BaseProduct&gt; <span class="hljs-function"><span class="hljs-function">PriceAware </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillPrices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T base, BigDecimal price)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (PriceAware) Proxy.newProxyInstance(base.getClass().getClassLoader(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[]{PriceAware.class}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyInvocationHandler&lt;&gt;(base, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PriceAware() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BigDecimal </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> price; } })); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> AvailabilityAware </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillAvailabilities</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PriceAware base, String availability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (AvailabilityAware) Proxy.newProxyInstance(base.getClass().getClassLoader(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[]{AvailabilityAware.class}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyInvocationHandler&lt;&gt;(base, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AvailabilityAware() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAvailability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> base.getPrice().intValue() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? availability : <span class="hljs-string"><span class="hljs-string">"sold out"</span></span>; } })); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProductImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; BaseProductImpl(<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = id; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id; } } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProductProxy</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">BaseProduct </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BaseProduct base)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (BaseProduct) Proxy.newProxyInstance(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getClass().getClassLoader(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[]{BaseProduct.class}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyInvocationHandler&lt;&gt;(base, base)); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -<span class="hljs-number"><span class="hljs-number">1L</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PriceAware</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> BigDecimal </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BigDecimal.ZERO; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvailabilityAware</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PriceAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAvailability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"sold out"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageAware</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvailabilityAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Collections.emptyList(); } } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyInvocationHandler</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">U</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvocationHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> U additional; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> T base; MyInvocationHandler(T base, U additional) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.additional = additional; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.base = base; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object proxy, Method method, Object[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Arrays.stream(additional.getClass().getInterfaces()).anyMatch(i -&gt; i == method.getDeclaringClass())) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> method.invoke(additional, args); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> baseMethod = Arrays.stream(base.getClass().getMethods()).filter(m -&gt; m.getName().equals(method.getName())).findFirst(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (baseMethod.isPresent()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> baseMethod.get().invoke(base, args); } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NoSuchMethodException(method.getName()); } } }</code> </pre> </div></div><br><h2 id="vyvod">  Kesimpulan </h2><br><p>  Apa yang terjadi?  Di satu sisi, ada pendekatan menarik yang menerapkan kelas yang terpisah untuk "objek" di berbagai negara dan menjamin pencegahan kesalahan yang disebabkan oleh urutan panggilan yang salah untuk metode yang memodifikasi objek ini. </p><br><p>  Di sisi lain, pendekatan ini membuat Anda menulis begitu banyak kode sehingga Anda langsung ingin menolaknya.  Banyaknya antarmuka dan kelas hanya membuat proyek sulit dipahami. </p><br><p>  Dalam proyek saya yang lain, saya masih mencoba menggunakan pendekatan ini.  Dan pada awalnya di tingkat antarmuka, semuanya baik-baik saja.  Saya menulis fungsinya: </p><br><pre> <code class="java hljs">&lt;T extends Foo&gt; <span class="hljs-function"><span class="hljs-function">List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;T&gt; ts)</span></span></span></span>{} &lt;T extends Foo &amp; Bar&gt; <span class="hljs-function"><span class="hljs-function">List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;T&gt; ts)</span></span></span></span>{} &lt;T extends Foo&gt; <span class="hljs-function"><span class="hljs-function">List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finalStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;T&gt; ts)</span></span></span></span>{}</code> </pre> <br><p>  Dengan demikian menunjukkan bahwa langkah pemrosesan data tertentu memerlukan informasi tambahan yang tidak diperlukan baik pada awal pemrosesan atau pada akhirnya. </p><br><p>  Menggunakan <code>mock</code> dan, saya berhasil menguji kode.  Tetapi ketika sampai pada implementasi dan jumlah data dan berbagai sumber mulai bertambah, saya dengan cepat menyerah dan mengubah semuanya menjadi tampilan “normal”.  Semuanya berfungsi dan tidak ada yang mengeluh.  Ternyata efisiensi dan kesederhanaan kode menang atas "pencegahan" kesalahan, dan Anda dapat melacak urutan panggilan yang benar secara manual, bahkan jika kesalahan memanifestasikan dirinya hanya pada tahap pengujian manual. </p><br><p>  Mungkin jika saya mengambil langkah mundur dan melihat kode dari sisi lain, saya akan memiliki solusi yang sama sekali berbeda.  Tetapi kebetulan saya menjadi tertarik pada baris komentar khusus ini. </p><br><p>  Sudah di akhir artikel, memikirkan fakta bahwa karena tidak bagus untuk menggambarkan setter di antarmuka, Anda dapat membayangkan perakitan data produk dalam bentuk <code>Builder</code> , yang mengembalikan antarmuka yang berbeda setelah menambahkan data yang ditentukan.  Sekali lagi, itu semua tergantung pada kompleksitas logika objek bangunan.  Jika Anda bekerja dengan Spring Security, maka Anda terbiasa dengan solusi semacam ini. </p><br><p>  Sebagai contoh saya, begini: </p><br><div class="spoiler">  <b class="spoiler_title">Solusi Berbasis Pola Pembangun</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application_2</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> product = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product.Builder() .id(<span class="hljs-number"><span class="hljs-number">1000</span></span>) .price(<span class="hljs-number"><span class="hljs-number">20</span></span>) .availability(<span class="hljs-string"><span class="hljs-string">"available"</span></span>) .images(List.of(<span class="hljs-string"><span class="hljs-string">"url1, url2"</span></span>)) .build(); System.out.println(product.getId()); System.out.println(product.getAvailability()); System.out.println(product.getPrice()); System.out.println(product.getImages()); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Product</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> price; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String availability; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> List&lt;String&gt; images; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Product</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> price, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, String availability, List&lt;String&gt; images)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.price = price; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = id; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.availability = availability; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images = images; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> price; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAvailability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> availability; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> images; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Builder</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductBuilder</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductWithPriceBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> price; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String availability; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;String&gt; images; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">id</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = id; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductWithPriceBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">price</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> price)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.price = price; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">availability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String availability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.availability = availability; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">images</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; images)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images = images; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> av = price &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; availability != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? availability : <span class="hljs-string"><span class="hljs-string">"sold out"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product(price, id, av, images); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">id</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">images</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; images)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ProductWithPriceBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">price</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> price)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductWithPriceBuilder</span></span></span></span>{ <span class="hljs-function"><span class="hljs-function">ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">availability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String availability)</span></span></span></span>; } } }</code> </pre> </div></div><br><p>  Jadi itu: </p><br><ul><li>  Tulis fitur bersih </li><li>  Tulis kode yang indah dan jelas </li><li>  Ingat bahwa singkatnya adalah saudara perempuan dan yang paling penting adalah kode bekerja </li><li>  Jangan ragu untuk bertanya hal-hal, mencari cara lain, dan bahkan memunculkan solusi alternatif, dalam hal ini </li><li>  Jangan diam!  Ketika menjelaskan masalah kepada orang lain, solusi yang lebih baik dilahirkan (Duck Duck Driven Developent) </li></ul><br><h2 id="spasibo-za-vnimanie">  Terima kasih atas perhatian anda </h2></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id478826/">https://habr.com/ru/post/id478826/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id478812/index.html">Kembangkan hexapod dari awal (bagian 6) - transisi ke pencetakan 3D</a></li>
<li><a href="../id478814/index.html">Bagaimana pemasaran membuatnya lebih cepat untuk mengisi daya ponsel cerdas Anda</a></li>
<li><a href="../id478816/index.html">Menguji aplikasi android menggunakan selenoid. Cari lokasi di aplikasi seluler menggunakan Appium</a></li>
<li><a href="../id478820/index.html">Vivaldi untuk Android: satu beta bagus dan yang kedua lebih baik</a></li>
<li><a href="../id478822/index.html">Robotisasi AI dengan Platform Data IRIS Antar Sistem</a></li>
<li><a href="../id478832/index.html">Titik pertukaran traffic: dari awal hingga penciptaan IX Anda sendiri</a></li>
<li><a href="../id478834/index.html">Mengapa kita mati rasa karena ketakutan: efek serotonin pada penggerak</a></li>
<li><a href="../id478836/index.html">Apa yang umum antara revolver, mesin cuci dan robot otonom</a></li>
<li><a href="../id478838/index.html">Kematian pertama di jetpack</a></li>
<li><a href="../id478840/index.html">Di mana penciptaan pasar dimulai. Bagian dua</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>