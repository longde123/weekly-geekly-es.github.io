<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüè≠ üö∂üèæ üõéÔ∏è +10 r√®gles de code propre du d√©veloppeur Angular ‚ñ™Ô∏è üëÉüèΩ üö¥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Aujourd'hui, je voulais aborder le sujet du code correct en travaillant avec Angular. Ces recommandations rendront votre code plus e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>+10 r√®gles de code propre du d√©veloppeur Angular</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426935/">  <b>Bonjour, Habr!</b> <br><br>  Aujourd'hui, je voulais aborder le sujet du code correct en travaillant avec Angular.  Ces recommandations rendront votre code plus efficace dans la pratique et me permettront d'√™tre moins exigeant sur le code junior. <a name="habracut"></a><br><br>  1. √âvitez la logique dans les mod√®les <br><br>  Et la premi√®re chose que je veux mentionner est la logique dans les mod√®les.  Si vous avez une sorte de logique dans vos mod√®les, m√™me si c'est simple &amp;&amp;, il est utile de l'extraire dans votre composant.  La pr√©sence de logique dans le mod√®le signifie qu'il est impossible de le tester et qu'il est donc plus sujet aux erreurs lors du changement de code du mod√®le. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"isShow"</span></span></span><span class="hljs-tag">&gt;</span></span> Example <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ngOnInit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.isShow = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  2. Lignes "s√ªres" <br><br>  Supposons que vous ayez une variable de type cha√Æne qui ne peut avoir qu'un ensemble sp√©cifique de valeurs.  Au lieu de le d√©clarer comme un type de cha√Æne, vous pouvez d√©clarer cette liste m√™me de valeurs possibles comme un type. <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-string"><span class="hljs-string">'One'</span></span> | <span class="hljs-string"><span class="hljs-string">'Two'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isShow) { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-string"><span class="hljs-string">'One'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-string"><span class="hljs-string">'Two'</span></span> }</code> </pre><br>  En d√©clarant le type d'une variable de cette fa√ßon, nous pouvons √©viter les erreurs lors de l'√©criture de code au moment de la compilation plut√¥t qu'au moment de l'ex√©cution. <br><br>  3. La r√®gle des m√©thodes longues <br><br>  Voici une d√©mo de code redondante.  Il est important de comprendre que personne n'aime les m√©thodes longues. <br>  Les m√©thodes longues indiquent g√©n√©ralement qu'elles font trop de choses.  Il est possible que la m√©thode elle-m√™me fasse une chose, mais √† l'int√©rieur, il y a plusieurs autres op√©rations qui peuvent √™tre plac√©es dans une autre m√©thode qui a son propre objectif logique.  Les m√©thodes longues sont difficiles √† lire, √† comprendre et √† maintenir.  Ils sont √©galement sujets aux erreurs, car changer une chose peut affecter beaucoup d'autres choses dans cette m√©thode.  Je suis s√ªr, pas seulement pour moi, que de telles m√©thodes rendent le refactoring (qui est la cl√© de toute application) plus difficile qu'il ne pourrait l'√™tre. <br><br>  4. Duplication de code <br><br>  Si vous avez du code qui se r√©p√®te √† diff√©rents endroits du projet.  Extrayez le code extensible dans une m√©thode distincte et utilisez-le √† la place du code extensible. <br><br>  Le probl√®me avec la duplication de code est que si nous voulons apporter des modifications √† la logique de ce code, nous devons le faire √† plusieurs endroits.  Cela rend difficile la maintenance du code, ce qui augmente le risque d'erreurs.  Il faut √©galement plus de temps pour apporter des modifications √† la logique.  Avec moins de code en double, l'application sera plus rapide. <br><br>  5. trackBy <br><br>  Diluons la liste des subtilit√©s du travail avec Angular. <br><br>  Souvent utilis√© par ngFor pour parcourir un tableau dans des mod√®les, il est souvent priv√© dans la pratique d'une fonction telle que trackBy.  Utilisez-le pour travailler avec ngFor.  Gr√¢ce √† une telle bagatelle, vous recevrez un identifiant unique pour chaque √©l√©ment. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let item of items; trackBy: trackByFn"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ item }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs axapta">trackByFn(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>, item) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item.id; <span class="hljs-comment"><span class="hljs-comment">//  ,   }</span></span></code> </pre> <br>  Lorsque le tableau change, Angular r√©affiche tout l'arborescence DOM.  Mais si vous utilisez trackBy, Angular saura quel √©l√©ment a chang√© et ne changera que le DOM pour cet √©l√©ment particulier. <br><br>  6. Abonnez-vous dans le mod√®le <br><br>  Faites attention √† l'exemple de souscription au composant observ√©: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{ text }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs javascript">blablaObservable .pipe( map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> value.item), takeUntil(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._destroyed$) ) .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.text = item);</code> </pre> <br>  Maintenant, vous avez vu comment ne pas le faire.  Ce n'est pas que je vous ai exhort√© √† suivre strictement mes recommandations, c'est juste que les d√©veloppeurs ne se plongent pas souvent dans ce qui se passe dans leur code.  Alors pourquoi est-ce mauvais et comment bien faire?  Le fait est que nous courons le risque de se d√©sabonner accidentellement d'un abonnement √† un composant, ce qui peut entra√Æner une fuite de m√©moire.  La meilleure option consiste √† utiliser un abonnement dans le mod√®le lui-m√™me: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{ text$ | async }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.text$ = blablaObservable .pipe( map(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.item) );</code> </pre> <br>  Gr√¢ce √† async, nous n'avons pas √† nous soucier de la d√©sinscription, car il le fait automatiquement, ce qui simplifie le code, √©liminant ainsi la n√©cessit√© de g√©rer manuellement les abonnements.  Il r√©duit √©galement le risque de se d√©sabonner accidentellement du composant que j'ai mentionn√© ci-dessus. <br><br>  7. Chargement paresseux <br><br>  Dans la mesure du possible, utilisez le chargement de module paresseux dans votre application angulaire.  Le chargement diff√©r√© est lorsque vous t√©l√©chargez quelque chose uniquement lorsqu'il est utilis√©, par exemple, le chargement d'un composant uniquement lorsque vous avez besoin de le voir.  Cela r√©duira la taille de l'application t√©l√©chargeable et peut am√©liorer le temps de chargement de l'application sans charger les modules qui ne sont pas utilis√©s. <br><br>  // app.routing.ts <br><br><pre> <code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">path</span></span>: <span class="hljs-string"><span class="hljs-string">'dashboard'</span></span>, loadChildren: <span class="hljs-string"><span class="hljs-string">'lazy-load.module#DashboardModule'</span></span> }</code> </pre> <br>  8. Abonnement √† l'int√©rieur de l'abonnement <br><br>  Parfois, vous pouvez avoir besoin de valeurs de plus d'un observable pour terminer une action.  Dans ce cas, √©vitez de vous abonner √† un observable dans le bloc d'abonnement d'un autre observable.  Utilisez plut√¥t les op√©rateurs de cha√Ænage appropri√©s.  Les instructions en cha√Æne sont ex√©cut√©es sur des observables √† partir de la d√©claration devant eux.  Certains op√©rateurs de cha√Æne, tels que withLatestFrom, combineLatest, etc ... <br><br>  √Ä: <br><br><pre> <code class="hljs javascript">oneObservable$.pipe( take(<span class="hljs-number"><span class="hljs-number">1</span></span>) ) .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">oneValue</span></span></span><span class="hljs-function"> =&gt;</span></span> { twoObservable$.pipe( take(<span class="hljs-number"><span class="hljs-number">1</span></span>) ) .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">twoValue</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log([oneValue, twoValue].join(<span class="hljs-string"><span class="hljs-string">', '</span></span>)); }); });</code> </pre> <br>  Apr√®s: <br><br><pre> <code class="hljs powershell">oneObservable<span class="hljs-variable"><span class="hljs-variable">$</span></span>.pipe( withLatestFrom(twoObservable<span class="hljs-variable"><span class="hljs-variable">$</span></span>), first() ) .subscribe(([<span class="hljs-type"><span class="hljs-type">oneValue</span></span>, <span class="hljs-type"><span class="hljs-type">twoValue</span></span>]) =&gt; { console.log([<span class="hljs-type"><span class="hljs-type">oneValue</span></span>, <span class="hljs-type"><span class="hljs-type">twoValue</span></span>].join(<span class="hljs-string"><span class="hljs-string">', '</span></span>)); });</code> </pre> <br>  9. Mise en cache <br><br>  Lorsque vous faites des demandes √† l'API, les r√©ponses de certains d'entre eux ne changent souvent pas.  Dans ces cas, vous pouvez ajouter un m√©canisme de mise en cache et enregistrer la valeur √† partir de l'API.  Lorsque la demande doit √™tre r√©p√©t√©e pour la m√™me API, v√©rifiez si elle a une valeur dans le cache et, si c'est le cas, utilisez-la.  Sinon, effectuez un appel API et mettez en cache le r√©sultat.  Si n√©cessaire, vous pouvez entrer l'heure du cache, o√π vous pouvez v√©rifier la derni√®re fois et d√©cider d'appeler l'API.  Avoir un m√©canisme de mise en cache √©vite les demandes d'API ind√©sirables.  Gr√¢ce √† cet √©vitement des demandes en double, la vitesse d'application est am√©lior√©e, car nous n'avons pas besoin d'attendre une r√©ponse et de t√©l√©charger ainsi les m√™mes informations encore et encore. <br><br>  10. √âcraser en composants r√©utilisables <br><br>  Divisez les gros composants en plus petits.  Simplifiez ces composants et rendez-les aussi stupides que possible, car cela les fera fonctionner dans plus de sc√©narios.  La cr√©ation d'un tel composant signifie que le composant n'a pas de logique particuli√®re en soi et fonctionne uniquement sur la base des entr√©es et sorties qui lui sont fournies.  En r√®gle g√©n√©rale, le dernier descendant de l'arborescence des composants sera le plus simple de tous.  Cela se fait en fonction de la facilit√© d'utilisation de ces composants, ces composants sont moins susceptibles de g√©n√©rer des erreurs.  Les composants r√©utilisables r√©duisent √©galement la duplication de code, ce qui facilite la maintenance et les modifications. <br><br>  <b>Souhaitez-vous continuer une telle chronique?</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426935/">https://habr.com/ru/post/fr426935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426925/index.html">Revue Haiku R1 / beta1 - r√©vision BeOS 18 ans apr√®s sa derni√®re version officielle</a></li>
<li><a href="../fr426927/index.html">Transitions de phase de jeu vid√©o et √©quilibre du jeu</a></li>
<li><a href="../fr426929/index.html">Comment les applications de finances personnelles se synchronisent avec les banques</a></li>
<li><a href="../fr426931/index.html">Comment partir travailler sur la C√¥te d'Azur et obtenir un passeport fran√ßais en 3 ans</a></li>
<li><a href="../fr426933/index.html">Conception frontale</a></li>
<li><a href="../fr426937/index.html">Les membres bioniques apprennent √† ouvrir la bi√®re</a></li>
<li><a href="../fr426939/index.html">Un √©tudiant dipl√¥m√© a r√©solu le probl√®me de la confirmation de l'informatique quantique</a></li>
<li><a href="../fr426941/index.html">Sur la question de la vitesse et de sa mesure en Arduino</a></li>
<li><a href="../fr426943/index.html">La traduction russe la plus compl√®te du cours de programmation Harvard CS50 2015 2015, gratuite sur YouTube</a></li>
<li><a href="../fr426945/index.html">Ce que j'ai aim√© chez Paul Allen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>