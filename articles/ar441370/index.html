<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😜 🍧 👨🏼‍🍳 حماية بلا خوف. سلامة الموضوع في الصدأ 🎞️ 🏳️‍🌈 🏴‍☠️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="هذا هو الجزء الثاني من سلسلة مقالات حماية بلا خوف. في البداية تحدثنا عن أمن الذاكرة 

 التطبيقات الحديثة متعددة الخيوط: بدلاً من تنفيذ المهام بالتسلسل...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>حماية بلا خوف. سلامة الموضوع في الصدأ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441370/" style=";text-align:right;direction:rtl">  <font color="gray"><i>هذا هو الجزء الثاني من سلسلة مقالات حماية بلا خوف.</i></font>  <font color="gray"><i>في البداية تحدثنا عن <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">أمن الذاكرة</a></i></font> <br><br>  التطبيقات الحديثة متعددة الخيوط: بدلاً من تنفيذ المهام بالتسلسل ، يستخدم البرنامج مؤشرات الترابط لأداء عدة مهام في وقت واحد.  نلاحظ جميعًا <i>العمل</i> <i>والتزامن في وقت واحد</i> يوميًا: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يتم تقديم المواقع من قبل العديد من المستخدمين في نفس الوقت. <br></li><li style=";text-align:right;direction:rtl"> تقوم واجهة المستخدم بعمل خلفية لا يزعج المستخدم (تخيل أنه في كل مرة تكتب فيها شخصية ، يتجمد التطبيق للتحقق من الهجاء). <br></li><li style=";text-align:right;direction:rtl">  يمكن لجهاز الكمبيوتر تشغيل تطبيقات متعددة في نفس الوقت. </li></ul><br>  تعمل التدفقات المتوازية على تسريع العمل ، ولكن تقدم مجموعة من مشكلات المزامنة ، وهي حالة توقف تام وظروف السباق.  من وجهة نظر الأمان ، لماذا نهتم بسلامة الخيط؟  لأن أمان الذاكرة والخيوط لديه مشكلة واحدة ونفس المشكلة: الاستخدام غير المناسب للموارد.  الهجمات هنا لها نفس تأثيرات هجمات الذاكرة ، بما في ذلك تصعيد الامتيازات وتنفيذ التعليمات البرمجية التعسفية (ACE) وتجاوز عمليات التحقق من الأمان. <br><a name="habracut"></a><br>  ترتبط أخطاء التزامن ، مثل أخطاء التنفيذ ، ارتباطًا وثيقًا بصحة البرنامج.  على الرغم من أن نقاط الضعف في الذاكرة تكون دائمًا خطيرة للغاية ، فإن أخطاء التنفيذ / المنطق لا تشير دائمًا إلى وجود مشكلة أمنية إذا لم تحدث في جزء التعليمات البرمجية المتعلقة بالامتثال لعقود الأمان (على سبيل المثال ، إذن لتجاوز فحص الأمان).  ولكن الخلل التزامن لها خصوصية.  إذا ظهرت مشاكل أمنية بسبب الأخطاء المنطقية غالبًا بجوار الرمز المقابل ، فغالبًا ما تحدث أخطاء التزامن <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">في وظائف أخرى ، وليس في الوظيفة التي ارتكب فيها الخطأ مباشرةً</a> ، مما يجعل من الصعب تتبعها والقضاء عليها.  هناك صعوبة أخرى تتمثل في تداخل معين بين معالجة الذاكرة غير الصحيحة وأخطاء التزامن ، والتي نراها في سباقات البيانات. <br><br>  طورت لغات البرمجة استراتيجيات التزامن المختلفة لمساعدة المطورين على إدارة مشكلات الأداء والأمان للتطبيقات متعددة الخيوط. <br><br><h1 style=";text-align:right;direction:rtl">  مشاكل التزامن </h1><br>  من المقبول عمومًا أن البرمجة الموازية أصعب من المعتاد: فدماغنا يتكيف بشكل أفضل مع المنطق المتسلسل.  يمكن أن يكون للشفرة المتوازية تفاعلات غير متوقعة وغير مرغوب فيها بين مؤشرات الترابط ، بما في ذلك حالة توقف تام وخلاف وسباقات البيانات. <br><br>  تحدث حالة <i>توقف تام</i> عندما تتوقع عدة مؤشرات ترابط أداء بعض الإجراءات لمواصلة العمل.  على الرغم من أن هذا السلوك غير المرغوب فيه قد يتسبب في هجوم رفض الخدمة ، إلا أنه لن يتسبب في حدوث ثغرات أمنية مثل ACE. <br><br>  <i>شرط السباق</i> هو موقف يمكن أن يؤثر فيه زمن أو ترتيب المهام على صحة البرنامج.  يحدث سباق البيانات عندما تحاول عدة تدفقات الوصول في نفس الوقت إلى موقع الذاكرة نفسه مع محاولة كتابة واحدة على الأقل.  يحدث أن حالة السباق وسباق البيانات <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تحدث بشكل مستقل عن</a> بعضها البعض.  لكن <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">سباقات البيانات دائما خطيرة</a> . <br><br><h3 style=";text-align:right;direction:rtl">  الآثار المحتملة لأخطاء التزامن </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  طريق مسدود <br></li><li style=";text-align:right;direction:rtl">  فقدان المعلومات: مؤشر ترابط آخر الكتابة فوق المعلومات <br></li><li style=";text-align:right;direction:rtl">  فقدان النزاهة: المعلومات من عدة تدفقات متشابكة <br></li><li style=";text-align:right;direction:rtl">  فقدان الجدوى: مشكلات في الأداء بسبب عدم إمكانية الوصول إلى الموارد المشتركة </li></ol><br>  يُطلق على أكثر أنواع هجمات التزامن شهرةً اسم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TOCTOU</a> (وقت الاختيار حتى وقت الاستخدام): في الواقع ، تكون حالة السباق بين فحص الشروط (على سبيل المثال ، بيانات اعتماد الأمان) واستخدام النتائج.  هجوم TOCTOU يؤدي إلى فقدان النزاهة. <br><br>  تعتبر الأقفال المتبادلة وفقدان القدرة على البقاء مشكلات في الأداء ، وليست مشاكل أمنية ، في حين أن فقدان المعلومات وفقدان النزاهة من المحتمل أن تكون مرتبطة بالأمن.  تبحث <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مقالة "الأمن بالون الأحمر"</a> في بعض عمليات الاستغلال المحتملة.  مثال على ذلك هو تلف المؤشر متبوعًا بتصعيد الامتيازات أو تنفيذ التعليمات البرمجية عن بُعد.  في الاستغلال ، تقوم دالة تقوم بتحميل المكتبة المشتركة ELF (تنسيق قابل للتنفيذ والرابط) ببدء تشغيل إشارة على المكالمة الأولى فقط بشكل صحيح ، ثم تحد بشكل غير صحيح من عدد مؤشرات الترابط ، مما يؤدي إلى تلف ذاكرة kernel.  هذا الهجوم هو مثال على فقدان المعلومات. <br><br>  الجزء الأكثر صعوبة في البرمجة المتزامنة هو الاختبار والتصحيح ، لأنه من الصعب إعادة إنتاج أخطاء التزامن.  توقيت الأحداث ، وقرارات نظام التشغيل ، وحركة مرور الشبكة وعوامل أخرى ... كل هذا يغير سلوك البرنامج في كل بداية. <br><br><div style="text-align:center;;text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/aa1/702/1b2/aa17021b2f9cb3eb726ea37995ed4e2e.png"></a> </div><br>  <i><font color="gray">في بعض الأحيان يكون من الأسهل حقًا إزالة البرنامج بالكامل بدلاً من البحث عن خطأ.</font></i>  <i><font color="gray"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Heisenbugs</a></font></i> <br><br>  لا يتغير السلوك فقط في كل مرة يبدأ فيها ، ولكن حتى إدخال مشغلات الإخراج أو تصحيح الأخطاء يمكن أن يغير السلوك ، مما ينتج عنه "أخطاء Heisenberg" (أخطاء غير محددة ، يصعب إعادة إنتاجها نموذجية من البرمجة المتوازية) التي تنشأ وتختفي بشكل غامض. <br><br>  البرمجة الموازية صعبة.  من الصعب التنبؤ بكيفية تفاعل الكود الموازي مع الكود المتوازي الآخر.  عندما تظهر الأخطاء ، يصعب العثور عليها وتصحيحها.  بدلاً من الاعتماد على المختبرين ، دعونا نلقي نظرة على طرق تطوير البرامج واستخدام اللغات التي تجعل كتابة التعليمات البرمجية المتوازية أسهل. <br><br>  أولاً ، نضع مفهوم "أمان الخيط": <br><br><blockquote style=";text-align:right;direction:rtl">  "يعتبر نوع البيانات أو الأسلوب الثابت آمنًا في سلسلة الرسائل إذا كان يتصرف بشكل صحيح عند استدعائه من عدة سلاسل ، بغض النظر عن كيفية تنفيذ هذه المواضيع ، ولا يتطلب تنسيقًا إضافيًا من رمز الاتصال."  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">معهد ماساتشوستس للتكنولوجيا</a> </blockquote><br><h1 style=";text-align:right;direction:rtl">  كيف تعمل لغات البرمجة بالتوازي </h1><br>  في اللغات التي لا يوجد بها أمان ثابت للخيط ، يتعين على المبرمجين مراقبة الذاكرة التي يتم مشاركتها مع خيط آخر بشكل مستمر ويمكن أن يتغيروا في أي وقت.  في البرمجة المتسلسلة ، يتم تعليمنا تجنب المتغيرات العامة إذا قام جزء آخر من التعليمات البرمجية بتغييرها بهدوء.  من المستحيل مطالبة المبرمجين بضمان التغيير الآمن في البيانات المشتركة ، وكذلك الإدارة اليدوية للذاكرة. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e3e/3e3/5d2/e3e3e35d2775715a1f337d7c58aad7f7.gif"></div><br>  <i><font color="gray">"اليقظة المستمرة!"</font></i> <br><br>  عادة ، تقتصر لغات البرمجة على طريقتين: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  الحد من قابلية التغيير أو تقييد الوصول المشترك <br></li><li style=";text-align:right;direction:rtl">  أمان الخيط اليدوي (مثل الأقفال ، الإشارات) </li></ol><br>  تضع اللغات ذات قيود سلاسل الرسائل إما حدًا واحدًا لمؤشر الترابط القابل للتغيير ، أو تتطلب أن تكون جميع المتغيرات الشائعة غير قابلة للتغيير.  يعالج كلا النهجين المشكلة الأساسية لسباق البيانات - البيانات المشتركة القابلة للتعديل بطريقة غير صحيحة - لكن القيود شديدة للغاية.  لحل المشكلة ، جعلت اللغات بدايات التزامن ذات المستوى المنخفض ، مثل المزامنة.  يمكن استخدامها لإنشاء بنية بيانات آمنة لمؤشر الترابط. <br><br><h3 style=";text-align:right;direction:rtl">  بيثون وقفل عالمي بواسطة مترجم </h3><br>  يحتوي تطبيق المرجع في Python و Cpython على كائن مزامنة غريب يسمى Global Interpreter Lock (GIL) ، والذي يحظر كافة مؤشرات الترابط الأخرى عندما يصل مؤشر ترابط واحد إلى كائن.  بيثون متعدد مؤشرات الترابط سيء السمعة بسبب <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">عدم كفاءته</a> بسبب الكمون جيل.  لذلك ، تعمل معظم برامج Python المتزامنة في عدة عمليات بحيث يكون لكل منها GIL الخاص بها. <br><br><h3 style=";text-align:right;direction:rtl">  استثناءات وقت التشغيل و Java </h3><br>  يدعم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Java</a> البرمجة المتزامنة من خلال نموذج ذاكرة مشترك.  كل مؤشر ترابط له مسار التنفيذ الخاص به ، ولكن يمكنه الوصول إلى أي كائن في البرنامج: يجب أن يقوم المبرمج بمزامنة الوصول بين مؤشرات الترابط باستخدام بدائل Java المدمجة. <br><br>  على الرغم من أن Java تحتوي على كتل إنشاء لإنشاء برامج آمنة لمؤشر الترابط ، إلا أن <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">أمان مؤشر الترابط غير</a> <b>مضمون من قبل</b> المترجم (على عكس أمان الذاكرة).  في حالة حدوث وصول غير متزامن للذاكرة (على سبيل المثال ، سباق البيانات) ، فإن Java ستلقي استثناءًا في وقت التشغيل ، ولكن يجب على المبرمجين استخدام بدائل التزامن بشكل صحيح. <br><br><h3 style=";text-align:right;direction:rtl">  C ++ وعقل مبرمج </h3><br>  في حين تتجنب Python ظروف السباق باستخدام GIL و Java يلقي استثناءات في وقت التشغيل ، تتوقع C ++ من المبرمج مزامنة الوصول إلى الذاكرة يدويًا.  قبل الإصدار C ++ 11 ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">لم تتضمن</a> المكتبة القياسية بدائل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">التزامن</a> . <br><br>  توفر معظم اللغات أدوات لكتابة التعليمات البرمجية الآمن لمؤشر الترابط ، وهناك طرق خاصة لاكتشاف سباق البيانات وحالة السباق ؛  لكنه لا يعطي أي ضمانات لسلامة مؤشر الترابط ولا يحمي من سباق البيانات. <br><br><h1 style=";text-align:right;direction:rtl">  كيفية حل مشكلة الصدأ؟ </h1><br>  يتخذ Rust نهجًا متعدد الأوجه للتخلص من ظروف السباق باستخدام قواعد الحيازة وأنواع آمنة للحماية تمامًا من ظروف السباق في وقت الترجمة. <br><br>  في <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المقالة الأولى ،</a> قدمنا ​​مفهوم الملكية ، وهذا هو واحد من المفاهيم الأساسية للصدأ.  كل متغير له مالك فريد ، ويمكن نقل الملكية أو اقتراضها.  إذا أراد خيط آخر تغيير المورد ، فنحن ننقل الملكية عن طريق نقل المتغير إلى خيط جديد. <br><br>  نقل يستثني استثناء: يمكن أن مؤشرات ترابط متعددة الكتابة إلى نفس الذاكرة ، ولكن أبدا في نفس الوقت.  نظرًا لأن المالك دائمًا ما يكون وحيدًا ، فما الذي يحدث إذا اقترض مؤشر ترابط آخر متغيرًا؟ <br><br>  في Rust ، لديك إما استعارة قابلة للتغيير أو عدة استعارات ثابتة.  لا يمكن تقديم قروض قابلة للتغيير وغير قابلة للتغيير (أو عدة قروض قابلة للتغيير).  في أمان الذاكرة ، من المهم أن يتم تحرير الموارد بشكل صحيح ، ومن المهم في أمان مؤشر الترابط واحد فقط تغيير متغير في أي وقت معين.  بالإضافة إلى ذلك ، في مثل هذه الحالة ، لن تشير التدفقات الأخرى إلى الاقتراض المتقادم: إما أن التسجيل أو المشاركة أمر ممكن ، لكن ليس كلاهما. <br><br>  تم تصميم مفهوم الملكية لمعالجة نقاط الضعف في الذاكرة.  اتضح أنه يمنع أيضا سباق البيانات. <br><br>  على الرغم من أن العديد من اللغات لديها أساليب أمان للذاكرة (مثل حساب الارتباط وجمع البيانات المهملة) ، فإنها تعتمد عادة على المزامنة اليدوية أو الحظر على المشاركة المتزامنة لمنع سباق البيانات.  يتناول نهج Rust نوعي الأمن ، ويحاول حل المشكلة الرئيسية المتمثلة في تحديد الاستخدام المقبول للموارد وضمان هذه الصلاحية في وقت الترجمة. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/972/88b/4d9/97288b4d9796a35d8cce9400c2dbfd73.png"></div><br><br><h3 style=";text-align:right;direction:rtl">  لكن انتظر!  هذا ليس كل شيء! </h3><br>  تمنع قواعد الملكية مؤشرات الترابط المتعددة من كتابة البيانات إلى نفس موقع الذاكرة وتحظر تبادل البيانات في وقت واحد بين سلاسل الرسائل وقابلية التحويل ، ولكن هذا لا يوفر بالضرورة هياكل بيانات آمنة لمؤشر الترابط.  كل بنية بيانات في Rust هي إما خيط آمن أو لا.  يتم تمرير هذا إلى المحول البرمجي باستخدام نظام كتابة. <br><br><blockquote style=";text-align:right;direction:rtl">  "البرنامج المكتوب بشكل جيد لا يمكن أن يرتكب خطأ".  - روبن ميلنر ، 1978 </blockquote><br>  في لغات البرمجة ، تصف أنظمة الكتابة السلوك المقبول.  بمعنى آخر ، فإن البرنامج المكتوب جيدًا محدد جيدًا.  طالما أن أنواعنا معبرة بما يكفي لالتقاط المعنى المقصود ، فسوف يتصرف برنامج مكتوب بشكل جيد كما هو مقصود. <br><br>  الصدأ هي لغة آمنة ، وهنا يقوم المترجم بالتحقق من اتساق جميع الأنواع.  على سبيل المثال ، لا يتم ترجمة التعليمات البرمجية التالية: <br><br><pre style=";text-align:right;direction:rtl"><code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> x = <span class="hljs-string"><span class="hljs-string">"I am a string"</span></span>; x = <span class="hljs-number"><span class="hljs-number">6</span></span>;</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"> error[E0308]: mismatched types --&gt; src/main.rs:<span class="hljs-number"><span class="hljs-number">6</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span> | <span class="hljs-number"><span class="hljs-number">6</span></span> | x = <span class="hljs-number"><span class="hljs-number">6</span></span>; <span class="hljs-comment"><span class="hljs-comment">// | ^ expected &amp;str, found integral variable | = note: expected type `&amp;str` found type `{integer}`</span></span></code> </pre> <br>  جميع المتغيرات في الصدأ غالباً ما تكون ضمنية.  يمكننا أيضًا تحديد أنواع جديدة ووصف إمكانيات كل نوع باستخدام <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">نظام السمات</a> .  توفر الصفات تجريدًا للواجهة.  السمتان المهمتان المضمنتان هما <code>Send</code> and <code>Sync</code> ، والتي يتم توفيرها افتراضيًا بواسطة برنامج التحويل البرمجي لكل نوع: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>Send</code> يشير إلى أنه يمكن نقل الهيكل بأمان بين سلاسل الرسائل (مطلوب لنقل الملكية) <br></li><li style=";text-align:right;direction:rtl">  تشير <code>Sync</code> إلى أن مؤشرات الترابط يمكنها استخدام الهيكل بأمان. </li></ul><br>  المثال أدناه هو نسخة مبسطة من <a href="">التعليمات البرمجية من المكتبة القياسية</a> التي تفرز مؤشرات الترابط: <br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">spawn</span></span></span></span>&lt;Closure: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>() + <span class="hljs-built_in"><span class="hljs-built_in">Send</span></span>&gt;(closure: Closure){ ... } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = std::rc::Rc::new(<span class="hljs-number"><span class="hljs-number">6</span></span>); spawn(|| { x; });</code> </pre> <br>  تأخذ وظيفة <code>spawn</code> وسيطة واحدة ، <code>closure</code> وتتطلب نوعًا للأخير يطبق سمات <code>Fn</code> و <code>Fn</code> .  عند محاولة إنشاء دفق وتمرير قيمة <code>closure</code> مع المتغير <code>x</code> يلقي المترجم خطأ: <br><br><pre style=";text-align:right;direction:rtl">  error [E0277]: `std :: rc :: Rc &lt;i32&gt;` لا يمكن إرسالها بين سلاسل الرسائل بأمان
      -&gt; src / main.rs: 8: 1
       |
     8 |  تفرخ (move || {x؛})؛
       |  لا يمكن إرسال ^^^^^ `std :: rc :: Rc &lt;i32&gt;` بين سلاسل الرسائل بأمان
       |
       = مساعدة: ضمن `[closure@src/main.rs: 8: 7: 8:21 x: std :: rc :: Rc &lt;i32&gt;]` ، لم يتم تنفيذ السمات `std :: marker :: Send` لـ `std :: rc :: Rc &lt;i32&gt;`
       = ملاحظة: مطلوب لأنه يظهر داخل النوع `[closure@src/main.rs: 8: 7: 8:21 x: std :: rc :: Rc &lt;i32&gt;]
     ملاحظة: مطلوب من قبل "تفرخ" </pre><br>  تسمح <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">سمات</a> <code>Send</code> and <code>Sync</code> لنظام نوع Rust بفهم البيانات التي يمكن مشاركتها.  بتضمين هذه المعلومات في نظام الكتابة ، تصبح سلامة مؤشر الترابط جزءًا من أمان النوع.  بدلاً من الوثائق ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">يتم تطبيق أمان مؤشر الترابط بواسطة قانون المحول البرمجي</a> . <br><br>  يرى المبرمجون بوضوح الكائنات الشائعة بين مؤشرات الترابط ، ويضمن المترجم موثوقية هذا التثبيت. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/35c/af5/27e/35caf527e18989b41893e6fd37239dab.gif"></div><br><br>  على الرغم من توفر أدوات البرمجة المتوازية بعدة لغات ، إلا أن منع شروط السباق ليس بالأمر السهل.  إذا طلبت من المبرمجين أن يتناوبوا بالتعليمات المعقدة والتفاعل بين سلاسل الرسائل ، فإن الأخطاء لا مفر منها.  على الرغم من أن خروقات أمان الخيوط والذاكرة تؤدي إلى عواقب مماثلة ، فإن عمليات حماية الذاكرة التقليدية ، مثل عد الروابط وجمع البيانات المهملة ، لا تمنع ظروف السباق.  بالإضافة إلى الضمان الثابت لأمان الذاكرة ، فإن نموذج ملكية Rust يمنع أيضًا تغييرات البيانات غير الآمنة والمشاركة غير الصحيحة للكائنات بين مؤشرات الترابط ، بينما يوفر نظام الكتابة أمان مؤشر الترابط في وقت الترجمة. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/92d/429/fb9/92d429fb9c3812ddfdf115d71a3695ed.jpg"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar441370/">https://habr.com/ru/post/ar441370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar441360/index.html">فتح - الحرف قبعة حمراء</a></li>
<li><a href="../ar441362/index.html">Kibana دليل المستخدم. التصور. الجزء 3</a></li>
<li><a href="../ar441364/index.html">برنامج مؤتمر لوا في موسكو 2019</a></li>
<li><a href="../ar441366/index.html">هل يحتاج المتجر إلى تجربة Stylish Crossell: Retail Rocket في تحليل الصور لتشكيل توصيات</a></li>
<li><a href="../ar441368/index.html">كيف يبدو قمر نبتون الخفي سابقًا؟</a></li>
<li><a href="../ar441372/index.html">[الجمعة] كيف تقلى الدجاج من حيث الفيزياء</a></li>
<li><a href="../ar441376/index.html">أبعد من النقاء: ما يمكن وما لا يمكن عكس غشاء التناضح</a></li>
<li><a href="../ar441378/index.html">الباحثون من Google: للحماية ضد Specter يتطلب تغيير في بنية المعالج ، لن تساعد تصحيحات البرامج</a></li>
<li><a href="../ar441380/index.html">7 نقاط لنمو التحويل أو كيفية زيادة قابلية النقر على الأزرار</a></li>
<li><a href="../ar441382/index.html">طور العلماء الصينيون مولد كهرضغطية لجهاز تنظيم ضربات القلب</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>