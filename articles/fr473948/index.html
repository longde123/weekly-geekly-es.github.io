<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüé® üë®üèø‚Äçüéì ‚òùüèø Operon: acc√©l√®re les performances d'Ansible ‚ù§Ô∏è üíÖüèø ü•ê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je suis tr√®s heureux de pr√©senter enfin Operon , le rempla√ßant haute performance d'Ansible Engine. Operon est con√ßu pour les grandes installations et ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Operon: acc√©l√®re les performances d'Ansible</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/473948/"><p><img src="https://habrastorage.org/webt/lo/4s/i3/lo4si33bevrsrpbjkpg23lvxbye.jpeg"></p><br><p>  Je suis tr√®s heureux de pr√©senter enfin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Operon</a> , le rempla√ßant haute performance d'Ansible Engine.  Operon est con√ßu pour les grandes installations et est distribu√© par abonnement.  Il lance des playbooks, des modules, des plug-ins et des outils tiers existants sans modification, √† l'aide d'un moteur avanc√©, augmente consid√©rablement le nombre r√©el de n≈ìuds adress√©s en une seule ex√©cution, ce qui permet de gagner des heures √† chaque appel. </p><a name="habracut"></a><br><p>  <strong>Operon est install√© s√©par√©ment et conjointement</strong> avec Ansible Engine: vous pouvez progressivement y transf√©rer vos projets ou l'utiliser au d√©marrage si vous le souhaitez. </p><br><p>  Ci-dessous est un graphique de l'ex√©cution de 416 t√¢ches <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">common.yml</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DebOps</a> 0.7.2 d√©ploy√©es via SSH: </p><br><p><img src="https://habrastorage.org/webt/-h/dj/vf/-hdjvfmecu117sb_puadvdg5w80.png"></p><br><p>  Compar√© √† l'op√©ron Ansible propre, il r√©duit le temps d'ex√©cution par n≈ìud d'environ 60%.  Mais avec des lancements en masse, l'avantage est beaucoup plus grand.  D√©couvrez comment le temps d'exploitation augmente (mat√©riel: 24 Go, Xeon E5530 √† 8 c≈ìurs; d√©ploy√© sur les machines virtuelles Google Cloud via SSH en 18 ms): </p><br><p><img src="https://habrastorage.org/webt/cz/4c/eg/cz4ceg0tbpk1dzgekkbsaqxhtxs.png"></p><br><p> Pour chaque ex√©cution, 416 t√¢ches ont √©t√© effectu√©es sur chaque n≈ìud, y compris les √©l√©ments de boucle.  Sur une s√©rie de 1024 n≈ìuds, 540 496 t√¢ches ont √©t√© ex√©cut√©es en 54 minutes;  d√©bit moyen - 151 t√¢ches / seconde.  La mise √† l'√©chelle horizontale est √©vidente: presque 4x, de 256 √† 1024 n≈ìuds. </p><br><p>  L'ex√©cution d'Ansible √† 256 n≈ìuds a d√ª √™tre annul√©e: pendant une longue p√©riode, elle n'a pas produit de r√©sultats, elle a d√ª √™tre red√©marr√©e plusieurs fois, r√©duisant le nombre de processus de 40 √† 10 afin qu'Ansible n'√©puise pas ses ressources RAM.  Cela aurait pu fonctionner avec 13 processus, mais nous avons d√ª refuser de nouvelles tentatives: nous avons d√©j√† pass√© 2 jours de temps machine. </p><br><p>  Pour la derni√®re manche, avant d'annuler, Ansible a r√©alis√© 89% des t√¢ches en 6 heures et 13 minutes: </p><br><p><img src="https://habrastorage.org/webt/qk/mo/yb/qkmoybfrc5yp2tccliv-fls2npq.png"></p><br><p>  Op√©ron d√©ploy√© sur tous les n≈ìuds lors de chaque ex√©cution parall√®le.  Effectuer 1024 processus sur 8 c≈ìurs, cela donne une augmentation √† peine perceptible de la charge, et sur 24 c≈ìurs, le nombre de processus augmente jusqu'√† 6144. Si nous ex√©cutions le m√™me nombre de t√¢ches sur ce nombre de n≈ìuds, uniquement avec 16 c≈ìurs, nous pensons que nous ex√©cuterions terminer non pas en 54 minutes, mais en 27. </p><br><p>  La consommation de m√©moire est tr√®s pr√©visible et largement d√©tach√©e des processus.  Avec 256 processus, Operon consomme quatre fois moins que Ansible en consomme 10;  en m√™me temps, le processeur consomme au moins 15 fois moins de temps processeur. </p><br><p><img src="https://habrastorage.org/webt/wg/6d/uc/wg6duc-smz_sklkgi23fewmde3i.png"></p><br><p>  Ici, la courbe va en d√©clin: Ansible s'ex√©cute sur 64 n≈ìuds avec 40 processus, tandis que les ex√©cutions sur 256 n≈ìuds s'ex√©cutent √† partir de 10. Ansible s'ex√©cute sur 256 n≈ìuds a pris 1,6 Go / processus;  ainsi, ind√©pendamment des ressources RAM disponibles, une restriction s√©v√®re sur le parall√©lisme r√©alisable a √©t√© cr√©√©e. </p><br><p>  Operon est une nouvelle √©tape dans l'approche de d√©veloppement qui a fait ses d√©buts avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mitogen for Ansible</a> .  Il h√©rite des am√©liorations massives des performances de bas niveau n√©cessaires √† des milliers d'utilisateurs: </p><br><p><img src="https://habrastorage.org/webt/ky/1p/w1/ky1pw1vyu3_qczrhqnjpvg7iwti.png"></p><br><p><img src="https://habrastorage.org/webt/ny/9j/se/ny9jsejzdbncitz0n92oywffsys.png"></p><br><h3 id="ne-tolko-po">  Pas seulement des logiciels </h3><br><p>  La productivit√© est un effet secondaire du changement culturel vers une plus grande orientation des utilisateurs, la compatibilit√© et l'internalisation des co√ªts.  Nous avons quelque chose √† montrer, mais pour que vous puissiez pleinement go√ªter au go√ªt du nouveau produit, je suis heureux d'annoncer qu'il y aura une garantie de syntaxe de playbook avec compatibilit√© directe - en plus de restaurer certaines constructions obsol√®tes d'Ansible Engine. </p><br><p>  <strong>inclure</strong> : </p><br><pre><code class="plaintext hljs">- include: "i-will-always-work.yml"</code> </pre> <br><p>  <strong>boucles "avec"</strong> </p><br><pre> <code class="plaintext hljs">- debug: msg={{item}} with_items: ["i", "will", "always", "work"]</code> </pre> <br><p>  <strong>"actions de squash"</strong> </p><br><pre> <code class="plaintext hljs">- apt: name: "{{item}}" with_items: ["i", "will", "always", "work"]</code> </pre> <br><p>  <strong>tirets dans les noms de groupe</strong> </p><br><pre> <code class="plaintext hljs">$ cat hosts [i-will-always-work.us.mycorp.com] host1</code> </pre> <br><p>  <strong>fusion de hachage</strong> </p><br><pre> <code class="plaintext hljs"># I will always work [defaults] hash_behaviour = merge</code> </pre> <br><p>  Les exp√©ditions d'Operon avec une syntaxe compatible avec Ansible 2.9 <strong>recevront un support continu</strong> , et la d√©sactivation de la syntaxe dans Ansible Engine n'affectera pas Operon √† l'avenir.  De tels changements nuisent aux installations de travail sans am√©liorer leurs capacit√©s, et ils sont la principale source de travail pour corriger les erreurs lors des mises √† jour. </p><br><p>  Au fil du temps, cette garantie s'√©tend √† la s√©mantique du moteur et au-del√†. </p><br><h3 id="kak-priobschitsya">  Comment adh√©rer? </h3><br><p>  Initialement, Operon sera distribu√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avec le soutien de Network Genomics</a> , et c'est une exp√©rience et un engagement envers un service que vous n'obtiendrez nulle part ailleurs.  Si votre √©quipe est coinc√©e dans le pi√®ge du d√©ploiement ou fatigu√©e de r√©parer les mises √† jour pendant des ann√©es, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pensez √† demander une √©valuation</a> , et sans d√©lai, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©crivez-moi un e</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mail</a> - pour toutes questions et points incompr√©hensibles. </p><br><p>  Le meilleur logiciel est dans le domaine public, donc une version publique aura lieu lorsque nous serons en mesure de fournir un certain niveau de support gratuit.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Abonnez-vous √† notre newsletter</a> pour √™tre inform√© √† temps des prochaines versions. </p><br><p>  <strong>Operon am√©liorera-t-il les performances de Windows?</strong> <br>  Oui  Si vous rencontrez des probl√®mes de performances lors de vos d√©ploiements Windows, restez √† l'√©coute pour l'instant. </p><br><p>  <strong>Operon am√©liorera-t-il les performances des p√©riph√©riques r√©seau?</strong> <br>  Oui  Operon pr√©sente une refonte architecturale qui s'√©tend bien au-del√† de la couche de transport et est √©galement applicable √† tous les types de connexions. </p><br><p>  <strong>Operon est-il une ramification Ansible?</strong> <br>  Non.  Operon est une r√©√©criture incr√©mentielle du moteur, un petit composant d'environ 60k lignes de code, dont environ un quart a √©t√© remplac√©.  Chaque installation Ansible comprend environ 715 000 lignes, dont la grande majorit√©, comme Operon, est prise en charge ind√©pendamment par la grande communaut√© Ansible. </p><br><p>  <strong>Operon Ansible Engine s'am√©liorera-t-il?</strong> <br>  Oui  Operon promeut d√©j√† une am√©lioration au sein d'Ansible Engine, et comme il s'agit d'un raffinement, il y a une incitation √† apporter une contribution, √† peaufiner le code si n√©cessaire. </p><br><p>  <strong>Le logiciel est-il gratuit?</strong> <br>  Oui  Operon est publi√© sous la m√™me GPL qu'Ansible, et vous pouvez utiliser librement le code sous cette licence. </p><br><p>  <strong>Operon rompt-il la compatibilit√©?</strong> <br>  Non.  Operon ne viole pas la compatibilit√© avec l'ensemble standard de modules, les interfaces de plug-in ou l'√©cosyst√®me Ansible environnant et ne pr√©voit pas de le violer.  La compatibilit√© est avant tout: vous ne devez pas prendre de retard sur les am√©liorations futures, tout en oubliant la r√©trocompatibilit√©, comme l'am√©lioration de la stabilit√© de la syntaxe du playbook. </p><br><p>  <strong>Ai-je besoin d'Operon si j'ai des plans pour un seul n≈ìud?</strong> <br>  Operon assurera la comp√©titivit√© continue des comp√©tences dans lesquelles vous avez tant investi.  Il offre une flexibilit√© accrue qui n'existait pas auparavant: la libert√© de choisir un moteur.  Avec Operon, vous gagnez, m√™me si vous ne l'utilisez pas directement. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473948/">https://habr.com/ru/post/fr473948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473936/index.html">Performances audio interactives - Une nouvelle √®re de jeux d'assistant vocal</a></li>
<li><a href="../fr473938/index.html">Stockez universellement les param√®tres d'application via IConfiguration</a></li>
<li><a href="../fr473940/index.html">Test de r√©sistance: nanom√©canique de la nacre noble nacre</a></li>
<li><a href="../fr473944/index.html">Conseils du cr√©ateur de RimWorld: distorsions cognitives pour pr√©dire un fan du jeu</a></li>
<li><a href="../fr473946/index.html">Journalisation et suivi distribu√©s pour les microservices</a></li>
<li><a href="../fr473950/index.html">Mettre en ≈ìuvre, √©voluer: l'exp√©rience de l'utilisation des autotests dans VTB</a></li>
<li><a href="../fr473952/index.html">Comme j'ai √©crit l'IA pour la strat√©gie au tour par tour</a></li>
<li><a href="../fr473956/index.html">Informations secr√®tes d'une compagnie de t√©l√©phone de trafiquants de drogue</a></li>
<li><a href="../fr473958/index.html">Le japonais de NICT a pr√©sent√© un cluster de fibres de travail avec une bande passante de 1 Pbit / s</a></li>
<li><a href="../fr473960/index.html">Strat√©gies de localisation de contenu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>