<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌂 👂🏻 👧🏼 Membalikkan rekayasa protokol pertukaran dalam peralatan EOS 🤲🏻 🧀 🔦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya harus mengatakan segera, judulnya mungkin sedikit keras. Saya benar-benar perlu mengeluarkan hanya satu perintah dari protokol untuk mengontrol d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membalikkan rekayasa protokol pertukaran dalam peralatan EOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453234/"><img src="https://habrastorage.org/webt/pt/u1/jf/ptu1jfusfx89aspkcdsgcl2cfd8.jpeg"><br><br>  Saya harus mengatakan segera, judulnya mungkin sedikit keras.  Saya benar-benar perlu mengeluarkan hanya satu perintah dari protokol untuk mengontrol dimmer.  Tentang bagaimana ini dilakukan dan apa yang terjadi pada akhirnya, baca terus di artikel. <br><a name="habracut"></a><br>  Jadi, ada perusahaan Jerman seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">EOS Premium SPA Technology</a> .  Ini menghasilkan berbagai peralatan untuk sauna.  Mereka memiliki panel kontrol yang cukup menarik, dengan layar sentuh, unit daya berkualitas tinggi.  Benar, mereka cukup mahal, tetapi mereka tampaknya membenarkan diri mereka sendiri. <br><br>  Namun, ada satu minus besar dalam peralatan mereka.  Unit daya dapat mengontrol tungku listrik multi-kilowatt, tetapi pada saat yang sama mereka memiliki saluran kontrol pencahayaan yang sangat lemah.  Hanya hingga 150 watt!  Pencahayaan dapat dikontrol dengan mudah langsung dari remote control, menyalakan / mematikannya, dan menyesuaikan kecerahan.  Tapi 150 W SANGAT kecil!  Ada unit tambahan untuk kontrol pencahayaan yang dijual, tetapi label harganya sangat tidak manusiawi. <br>  Dalam hal ini, tugas tersebut tampaknya membuat dimmer yang akan mengontrol beban dengan lebih banyak daya dan, di samping itu, beban tegangan rendah (strip LED pada 12 / 24V atau lampu halogen pada 24V). <br><br>  Halogen, meskipun mereka mengkonsumsi lebih banyak dan cenderung kelelahan, tetapi menurut saya, pencahayaan dari mereka lebih menyenangkan.  Meskipun ini masalah selera.  Secara umum, tugas seperti itu telah matang.  Mengapa pencahayaan seperti itu diperlukan diilustrasikan dengan baik dalam gambar ini: <br><br><img src="https://habrastorage.org/webt/hh/ll/df/hhlldfevv9dtynhk6u8pw4bxc8w.jpeg"><br><br>  EOS merilis banyak panel kontrol, tetapi yang paling umum adalah Emotec dan Emotouch III.  Kami akan berurusan dengan mereka. <br><br><img src="https://habrastorage.org/webt/vm/jn/xg/vmjnxg9m9mddm-p-spev7s9zzzy.jpeg"><br><br><img src="https://habrastorage.org/webt/n7/cz/h4/n7czh4zcvsxxq32x7jba0jj8fc4.jpeg"><br><br>  Saya harus mengatakan bahwa panel kontrol pada peralatan EOS terhubung ke unit daya melalui kabel telepon 4-pin konvensional: <br><br><img src="https://habrastorage.org/webt/um/qy/fx/umqyfxidgautasltb4fecpve810.jpeg"><br><br>  Pemeriksaan cepat papan menunjukkan bahwa dua kabel diberikan untuk daya 24V, dan dua lainnya pada garis antarmuka RS-485.  Secara umum, implementasi standar.  Garis A dan B ada di tengah: <br><br><img src="https://habrastorage.org/webt/9_/iv/8q/9_iv8qeyufqoi4hidaqr6ukpvls.png"><br><br>  Setelah terhubung ke saluran menggunakan konverter USB-RS-485 dan mengatur kecepatan pada 9600 bps dari botak, kami melihat byte berjalan, tetapi tujuannya, tentu saja, tidak diketahui.  Protokol pertukaran tidak ditemukan dalam domain publik, dan pabrikan itu sendiri menolak untuk menyediakannya, meskipun permintaan yang sesuai dikirimkan kepada mereka. <br>  Saya harus berurusan dengan decoding sendiri :-) <br><br>  Ya, saya akan segera mencatat satu nuansa.  Kontrol dimmer hanya berfungsi setelah unit daya dioperasikan.  Ini terlihat jelas ketika lampu terhubung ke output dari dimmer built-in.  Itu mulai bersinar hanya setelah sauna mulai memanas. <br><br>  Awalnya, mereka mulai memilah-milah kecepatan dari 9600 hingga 115200 bps dari seri standar. <br>  Dan pada kecepatan 38.400 saya sadar bahwa perintah dipisahkan oleh dua byte standar 0x0A, 0x0D. <br><br>  Nah, ini sudah sesuatu.  Ayo lakukan trik selanjutnya.  Mari kita mencari perintah yang kita butuhkan dengan nilai kecerahan.  Tiba-tiba itu ditransmisikan secara jelas. <br><br>  Kami menetapkan nilai 73 (0x49) pada remote control: <br><br><img src="https://habrastorage.org/webt/v6/nk/ye/v6nkye2sbd2i97veetujuehgjac.jpeg"><br><br>  Selanjutnya, kami menghapus log dan mencari byte ini di sana: <br><br><img src="https://habrastorage.org/webt/bp/hx/g4/bphxg4rbib00zdybzqdzvd5gn84.png"><br><br>  Voila!  Kami menemukannya, lihat kiri dan kanan ke byte 0x0A, 0x0D, mencoba memilih paket yang kita butuhkan.  Dan sebagai hasilnya, kita mendapatkan struktur ini: <br><br>  0x0E 0x04 0x04 0x49 0x49 0x00 0x00 0xD1 0x0A 0x0D <br><br>  Selama percobaan, ditemukan bahwa 2 dan 3 byte selalu sama dengan 0x04, 4 dan 5 mengatur kecerahan dalam persen, 6 dan 7 sama dengan 0, 8 - itu berubah, yang berarti tidak jelas, 9 dan 10 - 0x0A, 0xD. <br><br>  Seperti yang ditunjukkan percobaan, byte pertama adalah alamat.  Ini menetapkan apa yang disebut nomor kamar.  Faktanya adalah remote EOS dapat mengendalikan beberapa unit daya secara bersamaan.  Masing-masing memiliki alamatnya sendiri, yang dikirimkan dalam byte ini. <br><br>  Alamatnya adalah sebagai berikut: <br>  Untuk panel kontrol oven: <br>  01 - kamar pertama <br>  21 - kamar kedua <br>  41 - kamar ketiga <br>  61 - kamar keempat <br>  81 - kamar kelima <br>  A1 - kamar keenam <br>  C1 - kamar ketujuh <br>  E1 - kamar kedelapan <br><br>  Untuk panel kontrol pembuat uap: <br>  0E - kamar pertama <br>  2E - kamar kedua <br>  4E - kamar ketiga <br>  6E - kamar keempat <br>  8E - kamar kelima <br>  AE - kamar keenam <br>  CE - kamar ketujuh <br>  EE - kamar kedelapan <br><br>  Sebenarnya, ini semua decoding. <br><br>  Untuk memeriksa, sehingga untuk berbicara dalam "dinamika", kami dengan cepat melemparkan program pada Delphi untuk menampilkan nilai kecerahan dan memutar bilah geser.  Semuanya memenuhi dengan jelas. <br><br>  Setelah itu, kami mengembangkan di C program sederhana untuk memecahkan kode paket-paket ini dan meluncurkan semuanya dalam perangkat keras.  Perangkat itu sendiri cukup sederhana.  Di sana, PWM biasa diimplementasikan pada tombol daya, tetapi jika tertarik, saya kemudian dapat menulis artikel terpisah tentang itu. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id453234/">https://habr.com/ru/post/id453234/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id453218/index.html">Hal utama dengan YaC 2019: seratus drone di jalan, Yandex.Module, makanan, rumah pintar</a></li>
<li><a href="../id453220/index.html">13 Kesalahan Pemasaran Email yang Harus Dihindari untuk Keterlibatan Lebih Baik</a></li>
<li><a href="../id453222/index.html">SphinxSearch-meetup SuperJob</a></li>
<li><a href="../id453228/index.html">Jam Nixie pada indikator IN-18</a></li>
<li><a href="../id453232/index.html">Menulis miliar lagu dengan C # dan Deep Learning</a></li>
<li><a href="../id453236/index.html">Membuat prototipe game seluler, mulai dari mana, dan bagaimana melakukannya. Bagian 2</a></li>
<li><a href="../id453238/index.html">Lampu berjalan di relay</a></li>
<li><a href="../id453242/index.html">Taman bermain untuk acara musim panas</a></li>
<li><a href="../id453246/index.html">ERP - Sistem Degradasi Berkelanjutan</a></li>
<li><a href="../id453248/index.html">Artemis Lunar Mission - produksi elemen utama stasiun lunar Lunar Gateway diluncurkan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>