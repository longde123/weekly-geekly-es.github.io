<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëû üçí üïê Dicas para criar fluxos de trabalho personalizados no GitLab CI üë®‚Äçüè´ ‚úã üöÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota perev. : O artigo original foi escrito por Mi≈Çosz Sm√≥≈Çka, um dos fundadores da pequena empresa polonesa Three Dots Labs , especializada em "solu√ß...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dicas para criar fluxos de trabalho personalizados no GitLab CI</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/436910/">  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: O artigo original foi escrito por Mi≈Çosz Sm√≥≈Çka, um dos fundadores da pequena empresa polonesa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Three Dots Labs</a> , especializada em "solu√ß√µes avan√ßadas de back-end".</i>  <i>O autor baseia-se em sua experi√™ncia no uso ativo do GitLab CI e compartilha as dicas acumuladas para outros usu√°rios deste produto Open Source.</i>  <i>Depois de l√™-los, percebemos o qu√£o perto os problemas descritos por ele est√£o perto de n√≥s, por isso decidimos compartilhar as solu√ß√µes propostas com um p√∫blico mais amplo.</i> <br><br><img src="https://habrastorage.org/web/168/262/b4e/168262b4e3af4467978ffc20dd8bba99.png"><br><br>  Desta vez, abordarei t√≥picos mais avan√ßados no GitLab CI.  Uma tarefa comum aqui √© implementar recursos n√£o padr√£o no pipeline.  A maioria das dicas √© espec√≠fica para o GitLab, embora algumas possam ser aplicadas a outros sistemas de IC. <a name="habracut"></a><br><br><h2>  Executar testes de integra√ß√£o </h2><br>  Como regra, a verifica√ß√£o de c√≥digo usando <b>testes de unidade √©</b> f√°cil de conectar a qualquer sistema de IC.  Normalmente, isso n√£o √© mais complicado do que executar um dos comandos embutidos no conjunto padr√£o de utilit√°rios em uma linguagem de programa√ß√£o.  Nesses testes, voc√™ provavelmente usar√° v√°rios moki e stubs para ocultar os detalhes da implementa√ß√£o e focar no teste de l√≥gica espec√≠fica.  Por exemplo, voc√™ pode usar o banco de dados na mem√≥ria como stubs de armazenamento ou grava√ß√£o para clientes HTTP que sempre retornar√£o respostas j√° preparadas. <br><br>  No entanto, mais cedo ou mais tarde voc√™ precisar√° de <b>testes de integra√ß√£o</b> para cobrir situa√ß√µes mais incomuns com os testes.  N√£o vou entrar em discuss√£o sobre todos os tipos poss√≠veis de teste e apenas digo que por <i>integra√ß√£o</i> quero dizer testes que usam algum tipo de recursos externos.  Pode ser um servidor de banco de dados real, servi√ßo HTTP, armazenamento conectado etc. <br><br>  No GitLab, √© f√°cil executar recursos conect√°veis ‚Äã‚Äãcomo cont√™ineres do Docker associados ao cont√™iner em que os scripts est√£o em execu√ß√£o.  Essas depend√™ncias podem ser definidas usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>services</code></a> .  Eles est√£o dispon√≠veis pelo nome da imagem ou pelo nome de sua escolha, se voc√™ a especificar no campo de <code>alias</code> . <br><br>  Aqui est√° um exemplo simples de uso de um cont√™iner conect√°vel com o MySQL: <br><br><pre> <code class="plaintext hljs">integration_tests: stage: tests services: - name: mysql:8 alias: db script: - ./run_tests.sh db:3306</code> </pre><br>  Nesse caso, nos scripts de teste, voc√™ precisar√° se conectar ao host <code>db</code> .  Usar um alias geralmente √© uma boa ideia, pois permite substituir imagens sem a necessidade de modificar o c√≥digo de teste.  Por exemplo, voc√™ pode substituir a imagem do <code>mysql</code> por <code>mariadb</code> , e o script ainda funcionar√° corretamente. <br><br><h4>  √Ä espera de cont√™ineres </h4><br>  Como os cont√™ineres de plug-in demoram para carregar, pode ser necess√°rio aguardar antes de enviar qualquer solicita√ß√£o.  Uma maneira simples √© o script <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wait-for-it.sh</a> com um tempo limite definido. <br><br><h3>  Usando o Docker Compose </h3><br>  Na maioria dos casos, os <code>services</code> devem ser suficientes.  No entanto, √†s vezes a intera√ß√£o com servi√ßos externos pode ser necess√°ria.  Por exemplo, no caso de iniciar o Kafka e o ZooKeeper em dois cont√™ineres separados (√© assim que as imagens oficiais s√£o coletadas).  Outro exemplo √© a execu√ß√£o de testes com um n√∫mero din√¢mico de n√≥s, como o Selenium.  A melhor solu√ß√£o para executar esses servi√ßos seria o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Docker Compose</a> : <br><br><pre> <code class="plaintext hljs">version: '3' services: zookeeper: image: confluentinc/cp-zookeeper environment: ZOOKEEPER_CLIENT_PORT: 2181 kafka: image: confluentinc/cp-kafka environment: KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092 ports: - 9092:9092</code> </pre><br>  Se voc√™ usar sua instala√ß√£o com os corredores do GitLab em servidores confi√°veis, poder√° executar o Docker Composer atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">executor</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shell</a> .  Outra op√ß√£o poss√≠vel √© o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Docker no</a> <code>dind</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Docker</a> ( <code>dind</code> ).  Mas, neste caso, leia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este artigo</a> primeiro. <br><br>  Uma maneira de usar o Compose √© configurar seu ambiente, executar testes e destruir tudo.  Um script bash simples ficaria assim: <br><br><pre> <code class="plaintext hljs">docker-compose up -d ./run_tests.sh localhost:9092 docker-compose down</code> </pre> <br>  Contanto que voc√™ execute testes em um ambiente m√≠nimo, tudo ficar√° bem.  Embora possa surgir uma situa√ß√£o na qual voc√™ precisa instalar algumas depend√™ncias ... H√° outra maneira de executar testes no Docker Compose - ele permite criar sua pr√≥pria imagem do Docker com um ambiente de teste.  Em um dos cont√™ineres, voc√™ executa testes e sai com o c√≥digo de retorno correspondente: <br><br><pre> <code class="plaintext hljs">version: '3' services: zookeeper: image: confluentinc/cp-zookeeper environment: ZOOKEEPER_CLIENT_PORT: 2181 kafka: image: confluentinc/cp-kafka environment: KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092 tests: image: registry.example.com/some-image command: ./run_tests.sh kafka:9092</code> </pre><br>  Observe que eliminamos a necessidade de mapear portas.  Neste exemplo, os testes podem interagir com todos os servi√ßos diretamente. <br><br>  E seu lan√ßamento √© realizado por um comando: <br><br><pre> <code class="plaintext hljs">docker-compose up --exit-code-from tests</code> </pre> <br>  A op√ß√£o <code>--exit-code-from</code> implica <code>--abort-on-container-exit</code> , o que significa: todo o ambiente iniciado pela <code>docker-compose up</code> ser√° interrompido ap√≥s a conclus√£o de um dos cont√™ineres.  O c√≥digo de conclus√£o para este comando ser√° equivalente ao c√≥digo de sa√≠da do servi√ßo selecionado (ou seja, esses s√£o os <code>tests</code> no exemplo acima).  Se o comando que inicia os testes for conclu√≠do com c√≥digo diferente de zero, o <code>docker-compose up</code> inteiro ser√° encerrado. <br><br><h2>  Usando r√≥tulos como tags de IC </h2><br>  <b>Aviso</b> : essa √© uma id√©ia bastante incomum, mas me pareceu muito √∫til e flex√≠vel. <br><br>  Como voc√™ deve saber, o GitLab tem um recurso de Etiquetas dispon√≠vel no n√≠vel do projeto e do grupo.  Os r√≥tulos podem ser definidos nos tickets e nas solicita√ß√µes de mesclagem.  No entanto, eles n√£o t√™m rela√ß√£o com os pipelines. <br><br><img src="https://habrastorage.org/webt/xt/pn/79/xtpn79pe46ztibrzwyeroay952k.png"><br><br>  Um pouco de refinamento permitir√° acessar os r√≥tulos da solicita√ß√£o de mesclagem nos scripts de trabalho.  No GitLab 11.6, tudo se tornou ainda mais f√°cil, porque  a vari√°vel de ambiente <code>CI_MERGE_REQUEST_IID</code> apareceu (sim, √© com o <code>IID</code> , n√£o o <code>ID</code> ) se o pipeline usar <code>only: merge_requests</code> . <br><br>  Se <code>only: merge_requests</code> n√£o <code>only: merge_requests</code> usado ou voc√™ estiver trabalhando com uma vers√£o mais antiga do GitLab, o MR ainda poder√° ser obtido - usando a chamada da API: <br><br><pre> <code class="bash hljs">curl <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$CI_API_V4_URL</span></span></span><span class="hljs-string">/projects/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$CI_PROJECT_ID</span></span></span><span class="hljs-string">/repository/commits/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$CI_COMMIT_SHA</span></span></span><span class="hljs-string">/merge_requests?private_token=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GITLAB_TOKEN</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br>  O campo que precisamos √© <code>iid</code> .  No entanto, lembre-se de que muitos MRs podem retornar para um determinado commit. <br><br>  Quando o MR IID √© recebido, resta apenas recorrer √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API de solicita√ß√µes de mesclagem</a> e usar o campo de <code>labels</code> da resposta: <br><br><pre> <code class="bash hljs">curl <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$CI_API_V4_URL</span></span></span><span class="hljs-string">/projects/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$CI_PROJECT_ID</span></span></span><span class="hljs-string">/merge_requests/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$CI_MERGE_REQUEST_IID</span></span></span><span class="hljs-string">?private_token=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GITLAB_TOKEN</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><h3>  Entrar </h3><br>  Infelizmente, no momento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o √© poss√≠vel</a> usar <code>$CI_JOB_TOKEN</code> para acessar a API do projeto (pelo menos se o projeto n√£o for p√∫blico).  Se o projeto tiver acesso limitado (interno ou privado), para autoriza√ß√£o na API do GitLab, voc√™ precisar√° gerar um token de API pessoal. <br><br><img src="https://habrastorage.org/webt/jo/c_/jn/joc_jntn1lbz5eb6tif6cfo41xs.png"><br><br>  No entanto, essa n√£o √© a solu√ß√£o mais segura, portanto, tenha cuidado.  Se o token cair em m√£os ruins, o acesso de grava√ß√£o a todos os seus projetos poder√° aparecer com ele.  Uma maneira de reduzir riscos √© criar uma conta separada com o direito de ler o reposit√≥rio e gerar um token pessoal para essa conta. <br><br><h4>  Qu√£o seguras s√£o suas vari√°veis? </h4><br>  Algumas vers√µes atr√°s, a se√ß√£o <i>Vari√°veis</i> era chamada <i>Vari√°veis ‚Äã‚ÄãSecretas</i> , que parece que elas foram criadas para armazenar credenciais e outras informa√ß√µes cr√≠ticas de maneira confi√°vel.  De fato, as vari√°veis ‚Äã‚Äãs√£o simplesmente ocultas dos usu√°rios que n√£o t√™m privil√©gios de Mantenedor.  Eles n√£o s√£o criptografados no disco e seu vazamento pode ocorrer facilmente atrav√©s de vari√°veis ‚Äã‚Äãde ambiente em scripts. <br><br>  Lembre-se disso ao adicionar vari√°veis ‚Äã‚Äãe considere manter segredos em solu√ß√µes mais seguras (por exemplo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vault da HashiCorp</a> ). <br><br><h3>  Casos de uso </h3><br>  O que fazer com as listas de etiquetas depende de voc√™.  Aqui est√£o algumas id√©ias: <br><br><ul><li>  Use-os para segmentar testes. </li><li>  Use a sem√¢ntica de valor-chave com dois pontos como separador (por exemplo, r√≥tulos como <code>tests:auth</code> , <code>tests:user</code> ) </li><li>  Inclua determinados recursos para trabalhos. </li><li>  Permitir a depura√ß√£o de trabalhos espec√≠ficos se o r√≥tulo existir. </li></ul><br><h2>  Chamando APIs externas </h2><br>  Embora o GitLab possua v√°rios recursos j√° dispon√≠veis, √© muito prov√°vel que voc√™ deseje usar outros utilit√°rios que possam ser integrados aos pipelines.  A maneira mais simples de implement√°-lo √©, obviamente, chamar o bom e velho <code>curl</code> . <br><br>  Se voc√™ criar suas pr√≥prias ferramentas, poder√° ensin√°-las a ouvir os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Webhooks do GitLab</a> (consulte a guia <b>Integra√ß√µes</b> nas configura√ß√µes do projeto).  No entanto, se voc√™ pretende us√°-los com qualquer sistema cr√≠tico, verifique se eles atendem aos requisitos de alta disponibilidade. <br><br><h3>  Exemplo: anota√ß√µes Grafana </h3><br>  Se voc√™ trabalha com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Grafana</a> , as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anota√ß√µes</a> s√£o uma √≥tima maneira de marcar eventos que ocorreram ao longo do tempo nos gr√°ficos.  Eles podem ser adicionados n√£o apenas manualmente clicando na GUI, mas tamb√©m chamando a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://docs.grafana.org/">API REST</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://docs.grafana.org/">Grafana</a> : <br><br><img src="https://habrastorage.org/webt/9e/rr/0z/9err0z9dowhzj9jr1q_asbxsxs0.png"><br><br>  Para acessar a API, voc√™ precisar√° gerar uma chave de API.  Considere criar um usu√°rio separado com acesso limitado: <br><br><img src="https://habrastorage.org/webt/qv/ab/ax/qvabaxtz1ivbshbiw1eeyx10vme.png"><br><br>  Defina duas vari√°veis ‚Äã‚Äãnas configura√ß√µes do projeto: <br><br><ul><li>  <code>GRAFANA_URL</code> - URL da instala√ß√£o do Grafana (por exemplo, <code>https://grafana.example.com</code> ); </li><li>  <code>GRAFANA_APIKEY</code> - chave gerada para a API. </li></ul><br>  Para poder reutiliz√°-lo, coloque o script no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio com scripts comuns</a> : <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash set -e if [ $# -lt 2 ]; then echo "Usage: $0 &lt;text&gt; &lt;tag&gt;" exit 1 fi readonly text="$1" readonly tag="$2" readonly time="$(date +%s)000" cat &gt;./payload.json &lt;&lt;EOF { "text": "$text", "tags": ["$tag"], "time": $time, "timeEnd": $time } EOF curl -X POST "$GRAFANA_URL/api/annotations" \ -H "Authorization: Bearer $GRAFANA_APIKEY" \ -H "content-type: application/json" \ -d @./payload.json</span></span></code> </pre> <br>  Agora voc√™ pode adicionar sua chamada √† configura√ß√£o do IC com os par√¢metros necess√°rios: <br><br><pre> <code class="plaintext hljs">deploy: stage: deploy script: - $SCRIPTS_DIR/deploy.sh production - $SCRIPTS_DIR/grafana-annotation.sh "$VERSION deployed to production" deploy-production</code> </pre> <br>  Essas chamadas podem ser feitas no script <code>deploy.sh</code> para simplificar a configura√ß√£o do IC. <br><br><h2>  B√¥nus: dicas r√°pidas </h2><br>  O GitLab possui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">excelente documenta√ß√£o</a> sobre todas as palavras-chave poss√≠veis que podem ser usadas para configurar o IC.  N√£o quero duplicar seu conte√∫do aqui, mas vou apontar alguns casos √∫teis.  Clique nos t√≠tulos para ver a documenta√ß√£o relacionada. <br><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Uso avan√ßado de somente / exceto</a> </h3><br>  Ao definir padr√µes para vari√°veis ‚Äã‚Äãde IC, √© poss√≠vel definir montagens personalizadas para algumas ramifica√ß√µes.  Isso pode ajudar, por exemplo, a identificar corre√ß√µes push para corre√ß√µes urgentes, mas n√£o abuse: <br><br><pre> <code class="plaintext hljs">only: refs: - branches variables: - $CI_COMMIT_REF_NAME =~ /^hotfix/</code> </pre> <br>  O GitLab tem muitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vari√°veis ‚Äã‚Äãpredefinidas</a> em cada trabalho de IC - use-as. <br><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√Çncoras Yaml</a> </h3><br>  Use-os para evitar duplica√ß√£o. <br><br>  Na vers√£o 11.3, voc√™ tamb√©m pode usar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">palavra</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">chave extends</a> : <br><br><pre> <code class="plaintext hljs">.common_before_script: &amp;common_before_script before_script: - ... - ... deploy: &lt;&lt;: *common_before_script</code> </pre> <br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Exclus√£o de artefato</a> </h3><br>  Por padr√£o, todos os artefatos coletados no pipeline ser√£o transferidos para todos os trabalhos subseq√ºentes.  Se voc√™ listar explicitamente os artefatos dos quais os trabalhos dependem, poder√° economizar tempo e espa√ßo em disco: <br><br><pre> <code class="plaintext hljs">dependencies: - build</code> </pre> <br>  Ou, pelo contr√°rio, pule completamente tudo se nenhum deles for necess√°rio: <br><br><pre> <code class="plaintext hljs">dependencies: []</code> </pre> <br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Estrat√©gia Git</a> </h3><br>  Ignore a clonagem de reposit√≥rio se o trabalho n√£o usar esses arquivos: <br><br><pre> <code class="plaintext hljs">variables: GIT_STRATEGY: none</code> </pre> <br>  √â isso a√≠! <br><br>  Obrigado pela leitura!  Para coment√°rios e perguntas, entre em contato comigo no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Twitter</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Reddit</a> . <br><br>  Mais dicas sobre o GitLab podem ser encontradas em posts anteriores: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Manter scripts comuns no GitLab CI</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vers√£o sem√¢ntica autom√°tica no IC do GitLab</a> . </li></ul><br><h2>  PS do tradutor </h2><br>  Leia tamb√©m em nosso blog: <br><br><ul><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitLab CI para integra√ß√£o e entrega cont√≠nuas na produ√ß√£o.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1: nosso pipeline</a> ‚Äù; </li><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitLab CI para integra√ß√£o e entrega cont√≠nuas na produ√ß√£o.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2: superando dificuldades</a> ‚Äù; </li><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Crie projetos com o GitLab CI: um .gitlab-ci.yml para centenas de aplicativos</a> ‚Äù; </li><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Construa e instale aplicativos no Kubernetes usando dapp e GitLab CI</a> ‚Äù; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pr√°ticas recomendadas para CI / CD com Kubernetes e GitLab (revis√£o e relat√≥rio de v√≠deo)</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436910/">https://habr.com/ru/post/pt436910/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436894/index.html">Rastejando o apocalipse de TI. Novos servi√ßos em nuvem deixar√£o alguns engenheiros desempregados</a></li>
<li><a href="../pt436896/index.html">docker-pretty-ps - finalmente um docker leg√≠vel ps</a></li>
<li><a href="../pt436900/index.html">FunTech ML-meetup</a></li>
<li><a href="../pt436904/index.html">Limite de 32 K para dados na ROM dos microcontroladores AVR</a></li>
<li><a href="../pt436908/index.html">6 maneiras de ocultar dados em um aplicativo Android</a></li>
<li><a href="../pt436912/index.html">Tend√™ncias de CRM de 2019: divertido de ler, perigoso de acreditar</a></li>
<li><a href="../pt436914/index.html">Problemas de crescimento de inicializa√ß√£o - Monitoramento</a></li>
<li><a href="../pt436916/index.html">VShard - escala horizontal em Tarantool</a></li>
<li><a href="../pt436918/index.html">Criando um jogo para o Game Boy, parte 2</a></li>
<li><a href="../pt436920/index.html">Transpiler PAS2JS de Pascal para JavaScript: incompat√≠vel com Delphi e solu√ß√µes alternativas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>