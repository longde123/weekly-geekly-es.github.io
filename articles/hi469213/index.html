<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯЖХ ЁЯдЬЁЯП╜ ЁЯд▓ЁЯП╜ рдЬрдВрдЧ рдХреЗ рд╕рд╛рде рджрд╣рдирд╢реАрд▓ рдкрд╛рд░реНрд╕рд░ рдХреА рдЦреЛрдЬ ЁЯСйЁЯП┐тАНЁЯТ╝ ЁЯЩПЁЯП╜ ЁЯСРЁЯП┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдирдорд╕реНрдХрд╛рд░, рд╣реЗрдмреНрд░! рдореИрдВ рдЖрдкрдХреЗ рд▓рд┐рдП "рд▓рд░реНрдирд┐рдВрдЧ рдкрд╛рд░реНрд╕рд░ рдХреЙрдореНрдмрд┐рдиреЗрдЯрд░ рд╡рд┐рде рд░рд╕реНрдЯ" рд▓реЗрдЦ рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдкреНрд░рд╕реНрддреБрдд рдХрд░рддрд╛ рд╣реВрдВред 


 рдпрд╣ рд▓реЗрдЦ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рджрд╣рдирд╢реАрд▓ рдкрд╛рд░реНрд╕рд░ рдХреА рдореВрд▓ рдмрд╛рдд...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЬрдВрдЧ рдХреЗ рд╕рд╛рде рджрд╣рдирд╢реАрд▓ рдкрд╛рд░реНрд╕рд░ рдХреА рдЦреЛрдЬ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469213/"><p>  рдирдорд╕реНрдХрд╛рд░, рд╣реЗрдмреНрд░!  рдореИрдВ рдЖрдкрдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">"рд▓рд░реНрдирд┐рдВрдЧ рдкрд╛рд░реНрд╕рд░ рдХреЙрдореНрдмрд┐рдиреЗрдЯрд░ рд╡рд┐рде рд░рд╕реНрдЯ"</a> рд▓реЗрдЦ рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдкреНрд░рд╕реНрддреБрдд рдХрд░рддрд╛ рд╣реВрдВред </p><br><p>  <em>рдпрд╣ рд▓реЗрдЦ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рджрд╣рдирд╢реАрд▓ рдкрд╛рд░реНрд╕рд░ рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ рд╕рд┐рдЦрд╛рддрд╛ рд╣реИ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрдВрдЧ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реИрдВред</em>  <em>рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдХрд┐рд╕реА рдЕрдиреНрдп рдЬреНрдЮрд╛рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдФрд░ рд╕рдм рдХреБрдЫ рдЬреЛ рд╕реАрдзреЗ рд░реБрд╕реНрдд рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдирд╣реАрдВ рд╣реИ, рд╕рд╛рде рд╣реА рдЗрд╕рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рдХреБрдЫ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рдкрд╣рд▓реБрдУрдВ рдХреЛ рд╕рдордЭрд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред</em>  <em>рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рд▓реЗрдЦ рдЖрдкрдХреЛ рдЬрдВрдЧ рдХреЛ рд╕реАрдЦрдиреЗ рдореЗрдВ рдорджрдж рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдФрд░ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдк рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рджрд╣рдирд╢реАрд▓ рдкрд╛рд░реНрд╕рд░ рдХреЛ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕рдордЭ рдирд╣реАрдВ рдкрд╛рдПрдВрдЧреЗред</em>  <em>рдпрджрд┐ рдЖрдк рд░рд╕реНрдЯ рд╕реАрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">"рд░рд╕реНрдЯ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд▓реИрдВрдЧреНрд╡реЗрдЬ"</a> рдкреБрд╕реНрддрдХ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рддрд╛ рд╣реВрдВред</em> </p><a name="habracut"></a><br><h3 id="s-tochki-zreniya-novichka">  рд╢реБрд░реБрдЖрдд рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ </h3><br><p>  рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рдЬреАрд╡рди рдореЗрдВ, рдПрдХ рд╕рдордп рдЖрддрд╛ рд╣реИ рдЬрдм рдЙрд╕реЗ рдПрдХ рдкрд╛рд░реНрд╕рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </p><br><p>  рдПрдХ рдиреМрд╕рд┐рдЦрд┐рдпрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдкреВрдЫреЗрдЧрд╛: "рдПрдХ рдкрд╛рд░реНрд╕рд░ рдХреНрдпрд╛ рд╣реИ?" </p><br><p>  рдордзреНрдп-рд╕реНрддрд░реАрдп рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХрд╣реЗрдЧрд╛: "рдпрд╣ рд╕рд░рд▓ рд╣реИ, рдореИрдВ рдПрдХ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рд▓рд┐рдЦреВрдВрдЧрд╛ред" </p><br><p>  рдорд╛рд╕реНрдЯрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХрд╣реЗрдЧрд╛: "рджреВрд░ рд╣реЛ рдЬрд╛рдУ, рдореБрдЭреЗ рдкрддрд╛ рд╣реИ рдХрд┐ lex рдФрд░ yaccред" </p><br><p>  рдПрдХ рдиреМрд╕рд┐рдЦрд┐рдпрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд▓рдЧрддрд╛ рд╣реИред </p><br><p>  рдРрд╕рд╛ рдирд╣реАрдВ рдХрд┐ рдирд┐рдпрдорд┐рдд рднрд╛рд╡ рдЦрд░рд╛рдм рд╣реИрдВред  (рд▓реЗрдХрд┐рди рдХреГрдкрдпрд╛, рдПрдХ рдЬрдЯрд┐рд▓ рдкрд╛рд░реНрд╕рд░ рдХреЛ рдПрдХ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд┐рдЦрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рди рдХрд░реЗрдВред) рдРрд╕рд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдЙрдкрдХрд░рдг рдЬреИрд╕реЗ рдХрд┐ рдкрд╛рд░реНрд╕рд░ рдФрд░ рд▓реЗрдХреНрд╕рд░ рдЬрдирд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рдХреЛрдИ рдЦреБрд╢реА рдирд╣реАрдВ рд╣реИ рдЬреЛ рд╕рд╣рд╕реНрд░рд╛рдмреНрджреА рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдгрддрд╛ рдХреЗ рд▓рд┐рдП рд╕рдореНрдорд╛рдирд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВред  рд▓реЗрдХрд┐рди рдкрд╛рд░реНрд╕рд░реНрд╕ рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ рд╕реАрдЦрдирд╛ рдПрдХ <em>рдЦреБрд╢реА рд╣реИ</em> ред  рдпрд╣ рднреА рд╣реИ рдХрд┐ рдЖрдк рдХреНрдпрд╛ рдпрд╛рдж рдХрд░реЗрдВрдЧреЗ рдЕрдЧрд░ рдЖрдк рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдпрд╛ рдкрд╛рд░реНрд╕рд░ рдЬрдирд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рдШрдмрд░рд╛рддреЗ рд╣реИрдВ, рддреЛ рджреЛрдиреЛрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдорд╕реНрдпрд╛ рдкрд░ рдХреЗрд╡рд▓ рдЕрдореВрд░реНрдд рд╣реИрдВред  рдПрдХ рд╢реБрд░реБрдЖрдд рдХреЗ рджрд┐рдорд╛рдЧ рдореЗрдВ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬреИрд╕рд╛ рдХрд┐ рдПрдХ рдЖрджрдореА рдиреЗ рдХрд╣рд╛</a> , рдХрдИ рд╕рдВрднрд╛рд╡рдирд╛рдПрдВ рд╣реИрдВред  рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдХреЗрд╡рд▓ рдПрдХ рд╕рд╣реА рд╡рд┐рдХрд▓реНрдк рд╣реИред </p><br><p>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рд╣рдо рд╕реАрдЦреЗрдВрдЧреЗ рдХрд┐ рд╕реНрдХреНрд░реИрдЪ рд╕реЗ рдкрд╛рд░реНрд╕рд░ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдП <br>  рдПрдХ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛, рдЬрд┐рд╕реЗ <em>рдХреЙрдореНрдмрд┐рдиреЗрдЯрд░рд┐рдпрд▓ рдкрд╛рд░реНрд╕рд░ рдХреЗ</em> рд░реВрдк рдореЗрдВ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЬреИрд╕реЗ рд╣реА рдЖрдк рдЙрдирдХреЗ рдореВрд▓ рд╡рд┐рдЪрд╛рд░ рдХреЛ рд╕рдордЭ рд▓реЗрддреЗ рд╣реИрдВ, рд╡реИрд╕реЗ рд╣реА рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд░реВрдк рд╕реЗ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╣реЛрдиреЗ рдХрд╛ рдлрд╛рдпрджрд╛ рд╣реЛрддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рдореВрд▓ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рдмрд╣реБрдд рдХрд░реАрдм рд░рд╣рддреЗ рд╣реИрдВред  рдХреНрдпреЛрдВрдХрд┐ рдпрд╣рд╛рдВ рдПрдХрдорд╛рддреНрд░ рд╕рд╛рд░ рд╡реЗ рд╣реЛрдВрдЧреЗ рдЬреЛ рдЖрдк рдЦреБрдж рдмрдирд╛рддреЗ рд╣реИрдВред  рдореБрдЦреНрдп рдХреЙрдореНрдмрд┐рдиреЗрдЯрд░ рдЬреЛ рдЖрдк рдпрд╣рд╛рдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ рдЖрдк рдЦреБрдж рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░реЗрдВрдЧреЗред </p><br><h3 id="kak-rabotat-s-etoy-statyoy">  рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдХрд╛рдо рдХрд░реЗрдВ </h3><br><p> рдпрд╣ рджреГрдврд╝рддрд╛ рд╕реЗ рдЕрдиреБрд╢рдВрд╕рд╛ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рдирдИ рдЬрдВрдЧ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░реЗрдВ рдФрд░ <code>src/lib.rs</code> рдореЗрдВ рдХреЛрдб рд╕реНрдирд┐рдкреЗрдЯ <code>src/lib.rs</code> рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдкрдврд╝рддреЗ рд╣реИрдВ (рдЖрдк рдЗрд╕реЗ рд╕реАрдзреЗ рдкреЗрдЬ рд╕реЗ рдкреЗрд╕реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдмреЗрд╣рддрд░ рджрд░реНрдЬ рдХрд░реЗрдВ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЖрдкрдХреЛ рдЧрд╛рд░рдВрдЯреА рджреЗрддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдЗрд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрдврд╝реЗрдВрдЧреЗ)ред  рдХреЛрдб рдХреЗ рд╕рднреА рднрд╛рдЧ рдЬрд┐рдирдХреА рдЖрдкрдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдЦ рдореЗрдВ рдХреНрд░рдо рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВред  рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рдХрднреА-рдХрднреА рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦреЗ рдЧрдП рдХрд╛рд░реНрдпреЛрдВ рдХреЗ <em>рд╕рдВрд╢реЛрдзрд┐рдд</em> рд╕рдВрд╕реНрдХрд░рдг рдкреЗрд╢ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдЗрди рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЖрдкрдХреЛ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдирдП рдХреЗ рд╕рд╛рде рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рдХреЛрдб рдХреЛ <code>2018</code> рднрд╛рд╖рд╛ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП <code>rustc</code> рд╕рдВрд╕реНрдХрд░рдг 1.34.0 рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛ред  рдЖрдк рд╕рдВрдХрд▓рдХ рдХреЗ рдХрд┐рд╕реА рднреА рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдПрдХ рд░рд┐рд▓реАрдЬрд╝ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдЬреЛ <code>2018</code> рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ (рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ <code>Cargo.toml</code> рдореЗрдВ <code>edition = "2018"</code> )ред  рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдмрд╛рд╣рд░реА рдирд┐рд░реНрднрд░рддрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </p><br><p>  рдЕрдкреЗрдХреНрд╖рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд▓реЗрдЦ рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдП рдЧрдП рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <code>cargo test</code> ред </p><br><h3 id="xcruciating-yazyk-razmetki">  Xcruciating Markup рднрд╛рд╖рд╛ </h3><br><p>  рд╣рдо XML рдХреЗ рд╕рд░рд▓реАрдХреГрдд рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд╛рд░реНрд╕рд░ рд▓рд┐рдЦрдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред  рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parent-element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single-element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">attribute</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parent-element</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  XML рддрддреНрд╡реЛрдВ рдХреЛ <code>&lt;</code> рдЕрдХреНрд╖рд░ рдФрд░ рдПрдХ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЗ рд╕рд╛рде рдЦреЛрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХрд┐рд╕реА рднреА рдЕрдХреНрд╖рд░, рд╕рдВрдЦреНрдпрд╛ рдФрд░ <code>-</code> рдмрд╛рдж рдПрдХ рдЕрдХреНрд╖рд░ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдмрд╛рдж рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛ рдЬреЛрдбрд╝реЗ рдХреА рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╕реВрдЪреА рд╣реИ: рдкрд╣рд▓реЗ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдПрдХ рдФрд░ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛, рдЙрд╕рдХреЗ рдмрд╛рдж <code>=</code> рдФрд░ рджреЛрд╣рд░реЗ рдЙрджреНрдзрд░рдг рдореЗрдВ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧред  рдЕрдВрдд рдореЗрдВ, рдмрдЪреНрдЪреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдПрдХ рддрддреНрд╡ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╛ рддреЛ рдПрдХ рд╕рдорд╛рдкрди <code>/&gt;</code> рдЪрд░рд┐рддреНрд░ рд╣реЛрддрд╛ рд╣реИ, рдпрд╛ <code>&gt;</code> рдмрд╛рд▓ рддрддреНрд╡реЛрдВ рдХреЗ рдЕрдЧрд▓реЗ рдЕрдиреБрдХреНрд░рдо рдХреЗ рдЕрд╕реНрддрд┐рддреНрд╡ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдФрд░ рдПрдХ рд╕рдорд╛рдкрди рдЯреИрдЧ <code>&lt;/</code> рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдЙрд╕рдХреЗ рдмрд╛рдж рдПрдХ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЯреИрдЧ рдФрд░ рдПрдХ рд╕рдорд╛рдкрди рдЪрд░рд┐рддреНрд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рд╡рд╣ рд╕рдм рд╣рдо рд╕рдорд░реНрдерди рдХрд░реЗрдВрдЧреЗред  рдХреЛрдИ рдирд╛рдорд╕реНрдерд╛рди, рдХреЛрдИ рдкрд╛рда рдиреЛрдбреНрд╕ рдирд╣реАрдВ рд╣реЛрдЧрд╛, рдФрд░ <em>рд╕рдмрд╕реЗ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк</em> рд╕реЗ рдХреЛрдИ рд╕реНрдХреАрдорд╛ рдЬрд╛рдВрдЪ рдирд╣реАрдВ рд╣реЛрдЧреАред  рд╣рдореЗрдВ рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЗ рд▓рд┐рдП рдЙрджреНрдзрд░рдгреЛрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреА рдЪрд┐рдВрддрд╛ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИ - рд╡реЗ рдкрд╣рд▓реЗ рджреЛрд╣рд░реЗ рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрди рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рд╡реЗ рдЕрдЧрд▓реЗ рдПрдХ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рдмрд╛рдд рд╣реИред </p><br><p>  рд╣рдо рдЗрди рддрддреНрд╡реЛрдВ рдХреЛ рдПрдХ рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ рдЬреЛ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[derive(Clone, Debug, PartialEq, Eq)]</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Element</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, attributes: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt;, children: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;Element&gt;, }</code> </pre> <br><p>  рдХреЛрдИ рдлреИрдВрд╕реА рдкреНрд░рдХрд╛рд░ рдирд╣реАрдВ рд╣реИрдВ, рдмрд╕ рдирд╛рдо рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ (рдпрд╣ рдкреНрд░рддреНрдпреЗрдХ рдЯреИрдЧ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реИ), рддрд╛рд░ рдХреЗ рдЬреЛрдбрд╝реЗ рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд┐рд╢реЗрд╖рддрд╛ (рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдФрд░ рдореВрд▓реНрдп) рдФрд░ рдмрдЪреНрдЪреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдЬреЛ рдмрд┐рд▓реНрдХреБрд▓ рдорд╛рддрд╛-рдкрд┐рддрд╛ рдХреА рддрд░рд╣ рджрд┐рдЦрддреА рд╣реИред </p><br><p>  (рдпрджрд┐ рдЖрдк рдкреНрд░рд┐рдВрдЯ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ <code>derive</code> рдЕрдиреБрднрд╛рдЧ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред рдЖрдкрдХреЛ рдмрд╛рдж рдореЗрдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред) </p><br><h3 id="opredelenie-parsera">  Parser рдкрд░рд┐рднрд╛рд╖рд╛; </h3><br><p>  рдЦреИрд░, рдпрд╣ рдПрдХ parser рд▓рд┐рдЦрдиреЗ рдХрд╛ рд╕рдордп рд╣реИред </p><br><p>  рдкрд╛рд░реНрд╕рд┐рдВрдЧ рд╕реВрдЪрдирд╛ рдХреА рдПрдХ рдзрд╛рд░рд╛ рд╕реЗ рд╕рдВрд░рдЪрд┐рдд рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИред  рдПрдХ рдкрд╛рд░реНрд╕рд░ рд╡рд╣ рд╣реИ рдЬреЛ рдЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕рд╛рдордиреЗ рд▓рд╛рддрд╛ рд╣реИред </p><br><p>  рдЕрдиреБрд╢рд╛рд╕рди рдореЗрдВ рд╣рдо рдЦреЛрдЬ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ, рдкрд╛рд░реНрд╕рд░, рдЕрдкрдиреЗ рд╕рд░рд▓рддрдо рд░реВрдк рдореЗрдВ, рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬреЛ рдХреБрдЫ рдЗрдирдкреБрдЯ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рд╢реЗрд╖ рдЗрдирдкреБрдЯ рдХреЗ рд╕рд╛рде рдкрд╛рд░реНрд╕ рдХрд┐рдП рдЧрдП рдЖрдЙрдЯрдкреБрдЯ рдпрд╛ рд░рд┐рдЯрд░реНрди рджреЗрддрд╛ рд╣реИ, рдпрд╛ рдПрдХ рддреНрд░реБрдЯрд┐ рдХрд╣рддреА рд╣реИ "рдореИрдВ рдЗрд╕реЗ рдкрд╛рд░реНрд╕ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред" </p><br><p>  рдкрд╛рд░реНрд╕рд░ рдЕрдкрдиреЗ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд░реВрдкреЛрдВ рдореЗрдВ рднреА рджрд┐рдЦрддрд╛ рд╣реИред  рдЖрдк рдпрд╣ рдмрддрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЗрдирдкреБрдЯ, рдЖрдЙрдЯрдкреБрдЯ рдФрд░ рддреНрд░реБрдЯрд┐ рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИ, рдФрд░ рдпрджрд┐ рдЖрдкрдХреЛ рдЕрдЪреНрдЫреЗ рддреНрд░реБрдЯрд┐ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдкрд╛рд░реНрд╕рд░ рд╡рд╣реА рд░рд╣рддрд╛ рд╣реИ: рдРрд╕рд╛ рдХреБрдЫ рдЬреЛ рдЗрдирдкреБрдЯ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХреБрдЫ рдХреЗ рд╕рд╛рде рдкрд╛рд░реНрд╕ рдЖрдЙрдЯрдкреБрдЯ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рддрд╛ рд╣реИ рдЗрдирдкреБрдЯ рд╕реЗ рдмрдЪреЗ рдпрд╛ рдЖрдкрдХреЛ рдмрддрд╛ рджреЗрдВ рдХрд┐ рдпрд╣ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рдЗрдирдкреБрдЯ рдХреЛ рдкрд╛рд░реНрд╕ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЗрд╕реЗ рдПрдХ рдкреНрд░рдХрд╛рд░ рдХреЗ рдлрдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВред </p><br><pre> <code class="rust hljs"><span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(Input) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(Input, Output), Error&gt;</code> </pre> <br><p>  рдЕрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ: рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рднрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕ рдХреЗ рд╕рдорд╛рди рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рд╣рдо рдЬреЛ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ рд╡рд╣ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рдПрдХ <code>Element</code> рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИред  рдлрд┐рд▓рд╣рд╛рд▓, рд╣рдо рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд╡рд┐рд╡рд░рдг рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдХреЗрд╡рд▓ рдЙрд╕ рдкрдВрдХреНрддрд┐ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд▓реМрдЯрд╛рдПрдВ рдЬрд┐рд╕реЗ рд╣рдо рдкрд╛рд░реНрд╕ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╣рдорд╛рд░рд╛ рдХрд╛рд░реНрдп рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдЧрд╛: </p><br><pre> <code class="rust hljs"><span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, Element), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;</code> </pre> <br><p>  рд╣рдо рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реНрд▓рд╛рдЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рдЯреБрдХрдбрд╝реЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рднрд╛рд╡реА рд╕реВрдЪрдХ рд╣реИ, рдФрд░ рдлрд┐рд░ рд╣рдо рдЗрд╕реЗ рдЕрд▓рдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдЗрдирдкреБрдЯ рдбреЗрдЯрд╛ рдХреЛ "рдЙрдкрднреЛрдЧ" рдХрд░рдХреЗ, рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд┐рдП рдЧрдП рдЯреБрдХрдбрд╝реЗ рдХреЛ рдХрд╛рдЯрдХрд░ рдФрд░ рд╢реЗрд╖ рдХреЛ рдкрд░рд┐рдгрд╛рдо рдХреЗ рд╕рд╛рде рд╡рд╛рдкрд╕ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдпрд╣ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд▓реАрдирд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ <code>&amp;[u8]</code> (рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ ASCII рд╡рд░реНрдгреЛрдВ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рдмрд╛рдЗрдЯреНрд╕ рдХрд╛ рдПрдХ рдЯреБрдХрдбрд╝рд╛), рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдХреНрдпреЛрдВрдХрд┐ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реНрд▓рд╛рдЗрд╕ рдЕрдзрд┐рдХрд╛рдВрд╢ рд╕реНрд▓рд╛рдЗрд╕реЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рддреЗ рд╣реИрдВ - рдЦрд╛рд╕рдХрд░ рдЬрдм рд╕реЗ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдПрдХ рдХреЗ рд╕рд╛рде рдЕрдиреБрдХреНрд░рдорд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдирдВрдмрд░ <code>input[0]</code> , рдЖрдкрдХреЛ рдЯреБрдХрдбрд╝рд╛ <code>input[0..1]</code> рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рджреВрд╕рд░реА рдУрд░, рдЙрдирдХреЗ рдкрд╛рд╕ рдХрдИ рддрд░реАрдХреЗ рд╣реИрдВ рдЬреЛ рдкрд╛рд░реНрд╕рд┐рдВрдЧ рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрддреЗ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рдмрд╛рдЗрдЯ рд╕реНрд▓рд╛рдЗрд╕ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред </p><br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣рдо рддрд░реАрдХреЛрдВ рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░реЗрдВрдЧреЗ, рди рдХрд┐ рдЪрд░рд┐рддреНрд░ рд╕реВрдЪрдХрд╛рдВрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ, рдХреНрдпреЛрдВрдХрд┐ рдпреВрдирд┐рдХреЛрдбред  UTF-8 рдореЗрдВ, рдФрд░ рд╕рднреА Rust рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдорд╛рдиреНрдп UTF-8 рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рд╣реИрдВ, рдпреЗ рд╕реВрдЪрдХрд╛рдВрдХ рд╣рдореЗрд╢рд╛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд░реНрдгреЛрдВ рдХреЗ рдЕрдиреБрд░реВрдк рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рд╕рднреА рдЗрдЪреНрдЫреБрдХ рдкрд╛рд░реНрдЯрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рд╣реИ рдХрд┐ рд╡реЗ рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЛ рд╣рдорд╛рд░реЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣реЗрдВред </p><br><h3 id="nash-pervyy-parser">  рд╣рдорд╛рд░рд╛ рдкрд╣рд▓рд╛ рдкрд╛рд░реНрд╕рд░ </h3><br><p>  рдЖрдЗрдП рдПрдХ рдРрд╕реЗ рдкрд╛рд░реНрд╕рд░ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдЬреЛ рд╕рд┐рд░реНрдл рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рдкрд╣рд▓реЗ рдЪрд░рд┐рддреНрд░ рдХреЛ рджреЗрдЦрддрд╛ рд╣реИ <br>  рдФрд░ рдпрд╣ рддрдп рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдкрддреНрд░ <code>a</code> ред </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">the_letter_a</span></span></span></span>(input: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, ()), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> input.chars().next() { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(<span class="hljs-string"><span class="hljs-string">'a'</span></span>) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[<span class="hljs-string"><span class="hljs-string">'a'</span></span>.len_utf8()..], ())), _ =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } }</code> </pre> <br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЗрдирдкреБрдЯ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рджреЗрдЦреЗрдВ: рд╣рдо рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реНрд▓рд╛рдЗрд╕ рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рд╣рдо <code>(&amp;str, ())</code> , рдпрд╛ <code>&amp;str</code> рд╕рд╛рде рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде <code>Result</code> рджреЗрддреЗ рд╣реИрдВред  рдЬреЛрдбрд╝реА <code>(&amp;str, ())</code> рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдмрд┐рдВрджреБ рд╣реИ: рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рдХрд╣рд╛ рдХрд┐ рд╣рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдПрдХ рдЯрдкрд▓ рд╡рд╛рдкрд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, <br>  рдкрд╛рд░реНрд╕рд┐рдВрдЧ рдкрд░рд┐рдгрд╛рдо рдФрд░ рдмрд╛рдХреА рдЗрдирдкреБрдЯред  <code>&amp;str</code> рдЕрдЧрд▓рд╛ рдЗрдирдкреБрдЯ рд╣реИ, рдФрд░ рдкрд░рд┐рдгрд╛рдо рд╕рд┐рд░реНрдл рдПрдХ рдмреНрд▓реЙрдХ рдкреНрд░рдХрд╛рд░ <code>()</code> , рдХреНрдпреЛрдВрдХрд┐ рдпрджрд┐ рдпрд╣ рдкрд╛рд░реНрд╕рд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдХреЗрд╡рд▓ рдПрдХ рдкрд░рд┐рдгрд╛рдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рд╣рдореЗрдВ рдкрддреНрд░ рдорд┐рд▓рд╛), рдФрд░ рд╣рдореЗрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╡рд╛рдкрд╕ рдЖрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ <br>  рдкрддреНрд░ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рд╣рдореЗрдВ рдХреЗрд╡рд▓ рдпрд╣ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдЗрд╕реЗ рдЦреЛрдЬрдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣реЗред </p><br><p>  рддреЛ, рдЪрд▓реЛ рдкрд╛рд░реНрд╕рд░ рдХреЗ рдХреЛрдб рдХреЛ рд╣реА рджреЗрдЦреЗрдВред  рд╣рдордиреЗ рдордЬрд╛рдХ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдХрд┐ рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░рдиреЗ рд╕реЗ рд╣рдо рдпреВрдирд┐рдХреЛрдб рдХреЗ рд╕рд╛рде рд╕рд┐рд░рджрд░реНрдж рд╕реЗ рдмрдЪ рд╕рдХрддреЗ рд╣реИрдВ: рд╣рдореЗрдВ <code>chars()</code> рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рдкрд╛рддреНрд░реЛрдВ рдкрд░ рдПрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рд╕реЗ рдкрд╣рд▓рд╛ рдЪрд░рд┐рддреНрд░ рд▓реЗрддреЗ рд╣реИрдВред  рдпрд╣ <code>Option</code> рдореЗрдВ рд▓рд┐рдкрдЯреЗ рдЯрд╛рдЗрдк <code>char</code> рдХрд╛ рдПрдХ рддрддреНрд╡ рд╣реЛрдЧрд╛, рдЬрд┐рд╕рдореЗрдВ <code>None</code> рднреА рдЗрд╕рдХрд╛ рдорддрд▓рдм <code>None</code> рд╣реЛрдЧрд╛ рдХрд┐ рд╣рдо рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реЗ <code>char</code> рдЦреАрдВрдЪрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рдереЗред </p><br><p>  рдорд╛рдорд▓реЛрдВ рдХреЛ рдмрджрддрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, <code>char</code> рдЬрд░реВрд░реА рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЖрдк рдЗрд╕реЗ рдПрдХ рдпреВрдирд┐рдХреЛрдб рдЪрд░рд┐рддреНрд░ рдХреЗ рд░реВрдк рдореЗрдВ рднреА рд╕реЛрдЪрддреЗ рд╣реИрдВред  рдРрд╕рд╛ рд╣реЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдпреВрдирд┐рдХреЛрдб рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">"рдЧреНрд░реИрдлреЗрдо рдХреНрд▓рд╕реНрдЯрд░"</a> рдХрд╣рд▓рд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХрдИ <code>char</code> рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">"рд╕реНрдХреЗрд▓рд░ рд╡реИрд▓реНрдпреВрдЬрд╝" рд╣реЛрддреЗ рд╣реИрдВ</a> , рдЬреЛ рдЧреНрд░реИрдлреЗрдореА рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рджреЛ рд╕реНрддрд░ рдиреАрдЪреЗ рд╣реЛрддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрд╣ рдорд╛рд░реНрдЧ рдкрд╛рдЧрд▓рдкрди рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рд╣рдорд╛рд░реЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рд╣рдо рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ ASCII рдХреЗ рдмрд╛рд╣рд░ <code>chars</code> рджреЗрдЦрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЪрд▓реЛ рд╡рд╣рд╛рдБ рд░реБрдХреЗрдВред </p><br><p>  рд╣рдо <code>Some('a')</code> рдкреИрдЯрд░реНрди рдХреЗ рд▓рд┐рдП рдореИрдк рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рдХрд┐ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдЦреЛрдЬреЗ рдЬрд╛ рд░рд╣реЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд░рд┐рдгрд╛рдо рд╣реИ, рдФрд░ рдпрджрд┐ рд╡рд╣ рдореИрдЪ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╣рдо рдЕрдкрдиреА рд╕рдлрд▓рддрд╛ рдХреА рд╡рд╛рдкрд╕реА рдХрд░рддреЗ рд╣реИрдВ: <br>  <code>Ok((&amp;input['a'.len_utf8()..], ()))</code> ред  рдпрд╣реА рд╣реИ, рд╣рдо рдЙрд╕ рднрд╛рдЧ рдХреЛ рд╣рдЯрд╛ рджреЗрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рд▓рд╛рдЗрди рд╕реНрд▓рд╛рдЗрд╕ рд╕реЗ рдкрд╛рд░реНрд╕ ( <code>'a'</code> ) рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рдмрд╛рдХреА рдХреЛ рдЕрдкрдиреЗ рдкрд╛рд░реНрд╕ рдХрд┐рдП рдЧрдП рдорд╛рди рдХреЗ рд╕рд╛рде рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ, рдЬреЛ рдЕрднреА рдЦрд╛рд▓реА рд╣реИ <br>  <code>()</code> ред  рд╣рдореЗрд╢рд╛ рдпреВрдирд┐рдХреЛрдб рд░рд╛рдХреНрд╖рд╕ рдХреЛ рдпрд╛рдж рдХрд░рддреЗ рд╣реБрдП, рдХрд╛рдЯрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд░рд┐рддреНрд░ <code>'a'</code> рдХреА рдпреВрдЯреАрдПрдл -8 рдореЗрдВ рд▓рдВрдмрд╛рдИ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рддреЗ рд╣реИрдВ - рдпрд╣ 1 рд╣реИ (рд▓реЗрдХрд┐рди рдпреВрдирд┐рдХреЛрдб рд░рд╛рдХреНрд╖рд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХрднреА рдирд╣реАрдВ рднреВрд▓рдирд╛ рдЪрд╛рд╣рд┐рдП)ред </p><br><p>  рдпрджрд┐ рд╣рдореЗрдВ рдХреЛрдИ рдЕрдиреНрдп <code>Some(char)</code> рдорд┐рд▓рддрд╛ рд╣реИ, рдпрд╛ рдпрджрд┐ рд╣рдореЗрдВ <code>None</code> рдорд┐рд▓рддрд╛ рд╣реИ, рддреЛ рд╣рдо рдПрдХ рддреНрд░реБрдЯрд┐ рд▓реМрдЯрд╛рддреЗ рд╣реИрдВред  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реА рддреНрд░реБрдЯрд┐ рдХрд╛ рдкреНрд░рдХрд╛рд░ рдХреЗрд╡рд▓ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдЯреБрдХрдбрд╝рд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд╣рдордиреЗ <code>input</code> рд░реВрдк рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ <code>input</code> рдФрд░ рдЬрд┐рд╕реЗ рдкрд╛рд░реНрд╕ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рдХреА рд╢реБрд░реБрдЖрдд <code>a</code> , рдЗрд╕рд▓рд┐рдП рдпрд╣ рд╣рдорд╛рд░реА рдЧрд▓рддреА рд╣реИред  рдпрд╣ рдПрдХ рдмрдбрд╝реА рдЧрд▓рддреА рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдХрдо рд╕реЗ рдХрдо рдпрд╣ "рдХрд╣реАрдВ рди рдХрд╣реАрдВ рдХреБрдЫ рдЧрд▓рдд рд╣реИ" рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдереЛрдбрд╝рд╛ рдмреЗрд╣рддрд░ рд╣реИред </p><br><p>  рд╣рдореЗрдВ XML рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕ рдкрд╛рд░реНрд╕рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдкрд╣рд▓реА рдЪреАрдЬ рдЬреЛ рд╣рдореЗрдВ рдХрд░рдиреА рд╣реЛрдЧреА рд╡рд╣ рд╣реИ рд╢реБрд░реБрдЖрддреА рдЪрд░рд┐рддреНрд░ рдХреЛ рдвреВрдВрдврдирд╛ <code>&lt;</code> , рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдХреБрдЫ рдЗрд╕реА рддрд░рд╣ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╣рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ <code>&gt;</code> , <code>/</code> рдФрд░ <code>=</code> рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рдЗрд╕рд▓рд┐рдП рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдПрдХ рдРрд╕рд╛ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛ рд╕рдХреЗрдВ рдЬреЛ рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЪрд░рд┐рддреНрд░ рдХреЗ рд▓рд┐рдП рдкрд╛рд░реНрд╕рд░ рдмрдирд╛рддрд╛ рд╣реИ? </p><br><h3 id="sozdanie-parsera">  рдкрд╛рд░реНрд╕рд░ рдмрдирд╛рдирд╛ </h3><br><p>  рдЖрдЗрдП рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреА рд╕реЛрдЪрддреЗ рд╣реИрдВ: рд╣рдо рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦреЗрдВрдЧреЗ рдЬреЛ <em>рдХрд┐рд╕реА рднреА рд▓рдВрдмрд╛рдИ рдХреЗ</em> рд╕реНрдерд┐рд░ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд╛рд░реНрд╕рд░ рдмрдирд╛рддрд╛ рд╣реИ, рдФрд░ рдХреЗрд╡рд▓ рдПрдХ рдЪрд░рд┐рддреНрд░ рдирд╣реАрдВред  рдпрд╣ рдФрд░ рднреА рд╕рд░рд▓ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд▓рд╛рдЗрди рдХрд╛ рдЯреБрдХрдбрд╝рд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рд╡реИрдз UTF-8 рд▓рд╛рдЗрди рдЯреБрдХрдбрд╝рд╛ рд╣реИ, рдФрд░ рд╣рдореЗрдВ рдпреВрдирд┐рдХреЛрдб рд░рд╛рдХреНрд╖рд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрдиреЗ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИред </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">match_literal</span></span></span></span>(expected: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, ()), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> input.get(<span class="hljs-number"><span class="hljs-number">0</span></span>..expected.len()) { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next == expected =&gt; { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[expected.len()..], ())) } _ =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } }</code> </pre> <br><p>  рдЕрдм рдпрд╣ рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ рджрд┐рдЦрддрд╛ рд╣реИред </p><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдЗрдП рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рджреЗрдЦреЗрдВред  рдЕрдм рд╣рдорд╛рд░рд╛ рдХрд╛рд░реНрдп рдПрдХ <code>expected</code> рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдПрдХ рдкрд╛рд░реНрд╕рд░ рдХреЗ рд╕рдорд╛рди рдХреБрдЫ <em>рджреЗрддрд╛</em> рд╣реИ, рди рдХрд┐ рд╕реНрд╡рдпрдВ рдкрд╛рд░реНрд╕рд░ рд╣реЛрдиреЗ рдХреЗ рдмрдЬрд╛рдпред  рдпрд╣ рдПрдХ рдРрд╕рд╛ рдлрдВрдХреНрд╢рди рд╣реИ рдЬреЛ <em>рдПрдХ рдЙрдЪреНрдЪ рдСрд░реНрдбрд░ рдлрд╝рдВрдХреНрд╢рди рджреЗрддрд╛ рд╣реИ</em> ред  рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ, рд╣рдо рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦ рд░рд╣реЗ рд╣реИрдВ рдЬреЛ рдкрд╣рд▓реЗ рд╣рдорд╛рд░реЗ <code>the_letter_a</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рдорд╛рди рдлрд╝рдВрдХреНрд╢рди <em>рдмрдирд╛рддрд╛ рд╣реИ</em> ред </p><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╢рд░реАрд░ рдореЗрдВ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдПрдХ рдХреНрд▓реЛрдЬрд░ рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ рдЬреЛ рдЗрд╕ рдХрд╛рдо рдХреЛ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЬреЛ рдкрд┐рдЫрд▓реЗ рдПрдХ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред </p><br><p>  рдкреИрдЯрд░реНрди рдорд┐рд▓рд╛рди рд╕рдорд╛рди рджрд┐рдЦрддрд╛ рд╣реИ, рд╕рд┐рд╡рд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рд╣рдо рдЕрдкрдиреЗ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╢рд╛рдмреНрджрд┐рдХ рд╕реЗ рд╕реАрдзреЗ рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдирд╣реАрдВ рдЬрд╛рдирддреЗ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдорд┐рд▓рд╛рди рд╕реНрдерд┐рддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ <code>if next == expected</code> ред  рдЕрдиреНрдпрдерд╛, рдпрд╣ рд╕рд░реНрдХрд┐рдЯ рдХреЗ рд╢рд░реАрд░ рдХреЗ рдЕрдВрджрд░ рдкрд╣рд▓реЗ рдХреА рддрд░рд╣ рд╣реА рд╣реИред </p><br><h3 id="testirovanie-nashego-parsera">  рд╣рдорд╛рд░реЗ рдкрд╛рд░реНрд╕рд░ рдХрд╛ рдкрд░реАрдХреНрд╖рдг </h3><br><p>  рдЖрдЗрдП рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВ рддрд╛рдХрд┐ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛ рд╕рдХреЗ рдХрд┐ рд╣рдо рдЗрд╕реЗ рдареАрдХ рдХрд░ рд▓реЗрдВред </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">literal_parser</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parse_joe = match_literal(<span class="hljs-string"><span class="hljs-string">"Hello Joe!"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, ())), parse_joe(<span class="hljs-string"><span class="hljs-string">"Hello Joe!"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">" Hello Robert!"</span></span>, ())), parse_joe(<span class="hljs-string"><span class="hljs-string">"Hello Joe! Hello Robert!"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello Mike!"</span></span>), parse_joe(<span class="hljs-string"><span class="hljs-string">"Hello Mike!"</span></span>) ); }</code> </pre> <br><p>  рдкрд╣рд▓реЗ рд╣рдо рдПрдХ рдкрд╛рд░реНрд╕рд░ рдмрдирд╛рддреЗ рд╣реИрдВ: <code>match_literal("Hello Joe!")</code> ред  рдпрд╣ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП <code>"Hello Joe!"</code>  рдФрд░ рдмрд╛рдХреА рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╡рд╛рдкрд╕ рдХрд░реЗрдВ, рдпрд╛ рд╡рд┐рдлрд▓ рд░рд╣реЗрдВ рдФрд░ рдкреВрд░реЗ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░реЗрдВред </p><br><p>  рдкрд╣рд▓реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдЗрд╕реЗ рдареАрдХ рд╡рд╣реА рдкрдВрдХреНрддрд┐ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреА рд╣рдо рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдПрдХ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдФрд░ рдорд╛рди рд▓реМрдЯрд╛рддрд╛ рд╣реИ <code>()</code> , рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ "рд╣рдордиреЗ рдЕрдкреЗрдХреНрд╖рд┐рдд рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд┐рдпрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЛ рдЗрд╕реЗ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред" </p><br><p>  рджреВрд╕рд░реЗ рдореЗрдВ, рд╣рдо рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рдЦрд┐рд▓рд╛рддреЗ рд╣реИрдВ <code>"Hello Joe! Hello Robert!"</code>  рдФрд░ рд╣рдо рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рд╡рд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ <code>"Hello Joe!"</code>  рдФрд░ рдЗрдирдкреБрдЯ рдХреЗ рд╢реЗрд╖ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИ: <code>" Hello Robert!"</code>  (рдЕрдЧреНрд░рдгреА рд╕реНрдерд╛рди рдФрд░ рдмрд╛рдХреА рд╕рдм рдХреБрдЫ)ред </p><br><p>  рддреАрд╕рд░реЗ рдореЗрдВ, рд╣рдо рдЧрд▓рдд рдЗрдирдкреБрдЯ рджрд░реНрдЬ рдХрд░рддреЗ рд╣реИрдВ: <code>"Hello Mike!"</code>  рдФрд░ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рдЗрдирдкреБрдЯ рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИред  рдРрд╕рд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ <code>Mike</code> рдЧрд▓рдд рд╣реИ, рдЖрдорддреМрд░ рдкрд░ рд╕рд┐рд░реНрдл рд╡рд╣реА рдирд╣реАрдВ рдЬреЛ рдкрд╛рд░реНрд╕рд░ рдХреА рддрд▓рд╛рд╢ рдореЗрдВ рдерд╛ред </p><br><h3 id="parser-dlya-chego-to-menee-specifichnogo">  рдХреБрдЫ рдХрдо рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреЗ рд▓рд┐рдП рдкрд╛рд░реНрд╕рд░ </h3><br><p>  рддреЛ рдпрд╣ рд╣рдореЗрдВ <code>&lt;</code> , <code>&gt;</code> , <code>=</code> рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ <code>&lt;/</code> рдФрд░ <code>/&gt;</code> рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рд╣рдо рд▓рдЧрднрдЧ рд╣реЛ рдЪреБрдХреЗ рд╣реИрдВ! </p><br><p>  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЪрд░рд┐рддреНрд░ рдХреЗ рдмрд╛рдж рдЕрдЧрд▓рд╛ <code>&lt;</code> рддрддреНрд╡ рдХрд╛ рдирд╛рдо рд╣реИред  рд╣рдо рдПрдХ рд╕рд╛рдзрд╛рд░рдг рд╕реНрдЯреНрд░рд┐рдВрдЧ рддреБрд▓рдирд╛ рдХреЗ рд╕рд╛рде рдРрд╕рд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред  рд▓реЗрдХрд┐рди рд╣рдо рдЗрд╕реЗ regex рдХреЗ рд╕рд╛рде рдХрд░ <em>рд╕рдХрддреЗ</em> рд╣реИрдВ ... </p><br><p>  ... рд▓реЗрдХрд┐рди рдЪрд▓реЛ рд╡рд╛рдкрд╕ рдкрдХрдбрд╝реЛред  рдпрд╣ рдПрдХ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рд╣реЛрдЧреА рдЬреЛ рд╕рд░рд▓ рдХреЛрдб рдореЗрдВ рджреЛрд╣рд░рд╛рдиреЗ рдореЗрдВ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реЛрдЧреА, рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ <code>regex</code> рдкреИрдХреЗрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рдХреНрдпрд╛ рд╣рдо рдЗрд╕рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдкрд╛рд░реНрд╕рд░ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдХреЗрд╡рд▓ рдорд╛рдирдХ рдЬрдВрдЧрд▓рд╛ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред </p><br><p>  рддрддреНрд╡ рдХреЗ рдирд╛рдо рдХреЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдирд┐рдпрдо рдХреЛ рдпрд╛рдж рдХрд░реЗрдВ, рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: рдПрдХ рд╡рд░реНрдгрдорд╛рд▓рд╛ рд╡рд░реНрдг, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╢реВрдиреНрдп рдпрд╛ рдХрд┐рд╕реА рд╡рд░реНрдгрдорд╛рд▓рд╛ рдХреЗ рдкреНрд░рддреАрдХ рдХрд╛ рдЕрдзрд┐рдХ рд╣реЛрдирд╛, <br>  рдЪрд░рд┐рддреНрд░, рд╕рдВрдЦреНрдпрд╛ рдпрд╛ рдбреИрд╢ред </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">identifier</span></span></span></span>(input: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> matched = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>::new(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> chars = input.chars(); <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> chars.next() { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next.is_alphabetic() =&gt; matched.push(next), _ =&gt; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) = chars.next() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next.is_alphanumeric() || next == <span class="hljs-string"><span class="hljs-string">'-'</span></span> { matched.push(next); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> next_index = matched.len(); <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[next_index..], matched)) }</code> </pre> <br><p>  рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рд╣рдо рдкрд╣рд▓реЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВред  рдЗрд╕ рдмрд╛рд░ рд╣рдо рдПрдХ рдкрд╛рд░реНрд╕рд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдирд╣реАрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рд╣рдо рд╕рд┐рд░реНрдл рдкрд╛рд░реНрд╕рд░ рдХреЛ рд╣реА рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдкрд╣рд▓реА рдмрд╛рд░ред  рдпрд╣рд╛рдВ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдкрд░рд┐рдгрд╛рдо рдкреНрд░рдХрд╛рд░ <code>()</code> рдмрдЬрд╛рдп <code>()</code> рд╣рдо рд╢реЗрд╖ рдЗрдирдкреБрдЯ рдХреЗ рд╕рд╛рде рдЯреНрдпреВрдкрд▓ рдореЗрдВ рдПрдХ <code>String</code> рд▓реМрдЯрд╛рддреЗ рд╣реИрдВред  рдЗрд╕ <code>String</code> рдореЗрдВ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реЛрдЧрд╛ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдЕрднреА рдкрд╛рд░реНрд╕ рдХрд┐рдпрд╛ рд╣реИред </p><br><p>  рдЗрд╕реЗ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, рд╣рдо рдкрд╣рд▓реЗ рдПрдХ рдЦрд╛рд▓реА <code>String</code> рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ <code>matched</code> рдХрд╣рддреЗ рд╣реИрдВред  рдпрд╣ рд╣рдорд╛рд░рд╛ рдкрд░рд┐рдгрд╛рдо рд╣реЛрдЧрд╛ред  рд╣рдореЗрдВ <code>input</code> рдореЗрдВ рдкрд╛рддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рднреА рдорд┐рд▓рддреА рд╣реИ, рдЬрд┐рд╕реЗ рд╣рдо рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред </p><br><p>  рдкрд╣рд▓рд╛ рдХрджрдо рдпрд╣ рджреЗрдЦрдирд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдХреЛрдИ рдкреНрд░рддреАрдХ рд╣реИред  рд╣рдо рдкрд╣рд▓реЗ рдЕрдХреНрд╖рд░ рдХреЛ <code>next.is_alphabetic()</code> рдФрд░ рдЬрд╛рдБрдЪрддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рд╡рд╣ рдЕрдХреНрд╖рд░ рд╣реИ: <code>next.is_alphabetic()</code> ред  рдорд╛рдирдХ рд░рд╕реНрдЯ рд▓рд╛рдЗрдмреНрд░реЗрд░реА, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рд╣рдореЗрдВ рдпреВрдирд┐рдХреЛрдб рдХреЗ рд╕рд╛рде рдорджрдж рдХрд░реЗрдЧреА - рдпрд╣ рдХрд┐рд╕реА рднреА рд╡рд░реНрдгрдорд╛рд▓рд╛ рдореЗрдВ рдЕрдХреНрд╖рд░реЛрдВ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛрдЧрд╛, рдФрд░ рди рдХреЗрд╡рд▓ рдПрдПрд╕рд╕реАрдЖрдИрдЖрдИ рдореЗрдВред  рдпрджрд┐ рдпрд╣ рдПрдХ рдкрддреНрд░ рд╣реИ, рддреЛ рд╣рдо рдЗрд╕реЗ <code>matched</code> рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рд╣рдорд╛рд░реЗ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рдбрд╛рд▓рддреЗ рд╣реИрдВ, рдФрд░ рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рд╣рдо рддрддреНрд╡ рдХреЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЛ рдирд╣реАрдВ рджреЗрдЦрддреЗ рд╣реИрдВ рдФрд░ рддреБрд░рдВрдд рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд▓реМрдЯрддреЗ рд╣реИрдВред </p><br><p>  рджреВрд╕рд░реЗ рдЪрд░рдг рдореЗрдВ, рд╣рдо <code>is_alphanumeric()</code> рд╕реЗ рд╡рд░реНрдгреЛрдВ рдХреЛ рдЦреАрдВрдЪрддреЗ рд░рд╣рддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдЙрд╕ рдкрдВрдХреНрддрд┐ рддрдХ рднреЗрдЬрддреЗ рд╣реИрдВ, рдЬрд┐рд╕реЗ рд╣рдо рддрдм рддрдХ рдмрдирд╛рддреЗ рд╣реИрдВ рдЬрдм рддрдХ рдХрд┐ рд╣рдореЗрдВ <code>is_alphanumeric()</code> рдЪрд░рд┐рддреНрд░ рдирд╣реАрдВ <code>is_alphanumeric()</code> рдЬреЛ <code>is_alphanumeric()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╕рдВрддреБрд╖реНрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ (рдпрд╣ <code>is_alphabetic()</code> рд╕рдорд╛рди рд╣реИ <code>is_alphabetic()</code> рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдЗрд╕рдореЗрдВ рдХрд┐рд╕реА рд╡рд░реНрдгрдорд╛рд▓рд╛ рдореЗрдВ рд╕рдВрдЦреНрдпрд╛рдПрдБ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИрдВ) рдпрд╛ рдкрд╛рдиреА <code>'-'</code> рдЫреАрдВрдЯрд╛ <code>'-'</code> ред </p><br><p>  рдЬрдм рд╣рдо рдкрд╣рд▓реА рдмрд╛рд░ рдРрд╕рд╛ рдХреБрдЫ рджреЗрдЦрддреЗ рд╣реИрдВ рдЬреЛ рдЗрди рдорд╛рдирджрдВрдбреЛрдВ рдХреЛ рдкреВрд░рд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╣рдо рдкрд╛рд░реНрд╕рд┐рдВрдЧ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, рд▓реВрдк рдХреЛ рддреЛрдбрд╝рддреЗ рд╣реИрдВ рдФрд░ рдПрдХ <code>String</code> рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ, рдЬреЛ рд╣рдо <code>input</code> рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдЯреБрдХрдбрд╝реЗ рдХреЛ рдХрд╛рдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕реА рддрд░рд╣, рдпрджрд┐ рд╡рд░реНрдг рдПрдХ рдкреБрдирд░рд╛рд╡реГрддреНрдд рдореЗрдВ рд╕рдорд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рдо рдЗрдирдкреБрдЯ рдХреЗ рдЕрдВрдд рддрдХ рдкрд╣реБрдВрдЪ рдЧрдП рд╣реИрдВред </p><br><p>  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рд╣рдо рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдЖрддреЗ рд╣реИрдВ рдЬрдм рд╣рдо рдХреБрдЫ рдРрд╕рд╛ рджреЗрдЦрддреЗ рд╣реИрдВ рдЬреЛ рдЕрд▓реНрдлрд╝рд╛рдиреНрдпреВрдореЗрд░рд┐рдХ рдпрд╛ рдбреИрд╢ рдирд╣реАрдВ рд╣реИред  рдЗрд╕ рдкрд╣рд▓реЗ рдЕрдХреНрд╖рд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рдиреЗ рдХреЗ рдмрд╛рдж рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рд╡реИрдз рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдФрд░ рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдЗрдирдкреБрдЯ рд▓рд╛рдЗрди рдореЗрдВ рдЕрдзрд┐рдХ рддрддреНрд╡ рд╣реЛрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдХреЗрд╡рд▓ рдкрд╛рд░реНрд╕ рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рджреЗрддреЗ рд╣реИрдВ рдФрд░ рдЕрдкрдирд╛ рдкрд░рд┐рдгрд╛рдо рд╡рд╛рдкрд╕ рдХрд░рддреЗ рд╣реИрдВред  рдХреЗрд╡рд▓ рдЕрдЧрд░ рд╣рдореЗрдВ рдпрд╣ рдкрд╣рд▓рд╛ рдЕрдХреНрд╖рд░ рднреА рдирд╣реАрдВ рдорд┐рд▓рддрд╛ рд╣реИ, рддреЛ рд╣рдо рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рддреНрд░реБрдЯрд┐ рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдХреЛрдИ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдирд╣реАрдВ рдерд╛ред </p><br><p>  рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ <code>Element</code> рд╕рдВрд░рдЪрдирд╛ рд╡рд╣ рд╣реИ рдЬреЛ рд╣рдо рдЕрдкрдиреЗ XML рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Element</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, attributes: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt;, children: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;Element&gt;, }</code> </pre> <br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣рдордиреЗ рдкрд╣рд▓реЗ рднрд╛рдЧ, <code>name</code> рдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░ рджрд┐рдпрд╛ред  <code>String</code> рдЬреЛ рд╣рдорд╛рд░реЗ рдкрд╛рд░реНрд╕рд░ рд░рд┐рдЯрд░реНрди рдХреЛ рд╕реАрдзреЗ рд╡рд╣рд╛рдВ рд▓реЗ рдЬрд╛рддреА рд╣реИред  рдпрд╣ рдкреНрд░рддреНрдпреЗрдХ <code>attribute</code> рдХреЗ рдкрд╣рд▓реЗ рднрд╛рдЧ рдХреЗ рд▓рд┐рдП рд╕рд╣реА рдкрд╛рд░реНрд╕рд░ рднреА рд╣реИред </p><br><p>  рдЖрдЗрдП рдЗрд╕реЗ рджреЗрдЦреЗрдВред </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">identifier_parser</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"i-am-an-identifier"</span></span>.to_string())), identifier(<span class="hljs-string"><span class="hljs-string">"i-am-an-identifier"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">" entirely an identifier"</span></span>, <span class="hljs-string"><span class="hljs-string">"not"</span></span>.to_string())), identifier(<span class="hljs-string"><span class="hljs-string">"not entirely an identifier"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"!not at all an identifier"</span></span>), identifier(<span class="hljs-string"><span class="hljs-string">"!not at all an identifier"</span></span>) ); }</code> </pre> <br><p>  рд╣рдо рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдкрд╣рд▓реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕реНрдЯреНрд░рд┐рдВрдЧ <code>"i-am-an-identifier"</code> рдкреВрд░реА рддрд░рд╣ <code>"i-am-an-identifier"</code> рдкрд╛рд░реНрд╕ рд╣реИ, рдХреЗрд╡рд▓ рдПрдХ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдЫреЛрдбрд╝ рд░рд╣рд╛ рд╣реИред  рджреВрд╕рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдкрд╛рд░реНрд╕рд░ рдПрдХ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ <code>"not"</code> рджреЗрддрд╛ рд╣реИ, рдФрд░ рд╢реЗрд╖ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рд╢реЗрд╖ рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд╛рдкрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рддреАрд╕рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдкрд╛рд░реНрд╕рд░ рддреБрд░рдВрдд рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкрд╣рд▓рд╛ рд╡рд░реНрдг рдЬреЛ рдЗрд╕реЗ рдкрд╛рддрд╛ рд╣реИ рд╡рд╣ рдПрдХ рдЕрдХреНрд╖рд░ рдирд╣реАрдВ рд╣реИред </p><br><h3 id="kombinatory">  combinators </h3><br><p>  рдЕрдм рд╣рдо рд╢реБрд░реБрдЖрддреА рдЪрд░рд┐рддреНрд░ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <code>&lt;</code> , рдФрд░ рд╣рдо рдЕрдЧрд▓реЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдореЗрдВ <em>рджреЛрдиреЛрдВ</em> рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЕрдЧрд▓рд╛ рдХрджрдо рдПрдХ рдФрд░ рдХреЙрдореНрдмрд┐рдиреЗрдЯрд░ рдкрд╛рд░реНрд╕рд░ рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦрдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдЬреЛ рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рджреЛ <em>рдкрд╛рд░реНрд╕рд░реНрд╕</em> рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдПрдХ рдирдпрд╛ <em>рдкрд╛рд░реНрд╕рд░</em> рджреЗрддрд╛ рд╣реИ рдЬреЛ рдЙрди рджреЛрдиреЛрдВ рдХреЛ рдХреНрд░рдо рдореЗрдВ рдкрд╛рд░реНрд╕ <em>рдХрд░рддрд╛</em> рд╣реИред  рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, <em>рдПрдХ</em> рдкрд╛рд░реНрд╕рд░ <em>рдХреЙрдореНрдмрд┐рдиреЗрдЯрд░</em> рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рджреЛ рдкрд╛рд░реНрд╕рд░реЛрдВ рдХреЛ рдПрдХ рдирдП рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рд╣рдо рдРрд╕рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair</span></span></span></span>&lt;P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, (R1, R2)), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, R1), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;, P2: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, R2), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser1(input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, result1)) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser2(next_input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((final_input, result2)) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((final_input, (result1, result2))), <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), }, <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), } }</code> </pre> <br><p>  рдпрд╣рд╛рдВ рдереЛрдбрд╝рд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ: рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рджреЗрдЦрдХрд░ рд╢реБрд░реВ рдХрд░реЗрдВред </p><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЪрд╛рд░ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЪрд░ рд╣реИрдВ: <code>P1</code> , <code>P1</code> <code>P2</code> , <code>R1</code> рдФрд░ <code>R2</code> ред  рдпреЗ рд╣реИрдВ <code>Parser 1</code> , <code>Parser 2</code> , <code>Result 1</code> рдФрд░ <code>Result 2</code> ред  <code>P1</code> рдФрд░ <code>P2</code> рдлрд╝рдВрдХреНрд╢рдВрд╕ рд╣реИрдВ, рдФрд░ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рд╡реЗ рдкрд╛рд░реНрд╕рд░ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреЗ рдПрдХ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдкреИрдЯрд░реНрди рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВ: рд░рд┐рдЯрд░реНрди рд╡реИрд▓реНрдпреВ рдХреА рддрд░рд╣, рд╡реЗ рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗрддреЗ рд╣реИрдВ <code>&amp;str</code> рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рд╡рд╛рдкрд╕ рд▓реМрдЯрддреЗ рд╣реИрдВ рдФрд░ рд╢реЗрд╖ рдЗрдирдкреБрдЯ рдФрд░ рдкрд░рд┐рдгрд╛рдо, рдпрд╛ рдПрдХ рддреНрд░реБрдЯрд┐ <code>Result</code> рдЬреЛрдбрд╝реА рдХрд╛ рдкрд░рд┐рдгрд╛рдо рджреЗрддреЗ рд╣реИрдВред </p><br><p>  рд▓реЗрдХрд┐рди рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдкрд░рд┐рдгрд╛рдо рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рджреЗрдЦреЗрдВ: <code>P1</code> рд╡рд╣ рдкрд╛рд░реНрд╕рд░ рд╣реИ рдЬреЛ <code>R1</code> рджреЗрддрд╛ рд╣реИ рдпрджрд┐ рд╕рдлрд▓ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ <code>P2</code> рднреА <code>R2</code> рджреЗрддрд╛ рд╣реИред  рдФрд░ рд╣рдорд╛рд░реЗ рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рд╡рд╛рдкрд╕ рд▓рд╛рдП рдЧрдП рдЕрдВрддрд┐рдо рдкрд╛рд░реНрд╕рд░ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╣реИ <code>(R1, R2)</code> ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЗрд╕ рдкрд╛рд░реНрд╕рд░ рдХрд╛ рдХрд╛рд░реНрдп рдкрд╣рд▓реЗ рдЗрдирдкреБрдЯ рдкрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдХ <code>P1</code> рдХреЛ рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реИ, рдЗрд╕рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рд╕рд╣реЗрдЬрдирд╛ рд╣реИ, рдлрд┐рд░ <code>P1</code> рд▓реМрдЯрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЗрдирдкреБрдЯ рдкрд░ <code>P2</code> рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реИ, рдФрд░ рдпрджрд┐ рджреЛрдиреЛрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рджреЛ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдПрдХ рдЯреНрдпреВрдкрд▓ <code>(R1, R2)</code> рдореЗрдВ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рддреЗ рд╣реИрдВред <code>(R1, R2)</code> ред </p><br><p>  рдХреЛрдб рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рд╡рд╣реА рд╣реИ рдЬреЛ рд╡рд╣ рдХрд░рддрд╛ рд╣реИред  рд╣рдо рдкрд╣рд▓реЗ рдПрдирд╛рд▓рд╛рдЗрдЬрд╝рд░ рдХреЛ рдЗрдирдкреБрдЯ рдкрд░ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдлрд┐рд░ рджреВрд╕рд░реЗ рдПрдирд╛рд▓рд╛рдЗрдЬрд╝рд░ рд╕реЗ, рдлрд┐рд░ рджреЛ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдПрдХ рдЯреНрдпреВрдкрд▓ рдореЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕реЗ рд╡рд╛рдкрд╕ рдХрд░рддреЗ рд╣реИрдВред  рдпрджрд┐ рдЗрдирдореЗрдВ рд╕реЗ рдХреЛрдИ рднреА рдкрд╛рд░реНрд╕рд░ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╣рдо рддреБрд░рдВрдд рдЙрд╕ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рдПрдВрдЧреЗ рдЬреЛ рдЙрд╕рдиреЗ рдЬрд╛рд░реА рдХреА рдереАред </p><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдореЗрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╣рдорд╛рд░реЗ рдкрд╣рд▓реЗ XML рдЯреИрдЧ <code>match_literal</code> рдкрд╣рд▓реЗ рдЯреБрдХрдбрд╝реЗ рдХреЛ <code>match_literal</code> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рджреЛ рдкрд╛рд░реНрд╕рд░реНрд╕, <code>match_literal</code> рдФрд░ <code>identifier</code> рдХреЛ рдорд┐рд▓рд╛рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЪрд▓реЛ рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреНрдпрд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВред </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tag_opener = pair(match_literal(<span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>), identifier); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>, ((), <span class="hljs-string"><span class="hljs-string">"my-first-element"</span></span>.to_string()))), tag_opener(<span class="hljs-string"><span class="hljs-string">"&lt;my-first-element/&gt;"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"oops"</span></span>), tag_opener(<span class="hljs-string"><span class="hljs-string">"oops"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"!oops"</span></span>), tag_opener(<span class="hljs-string"><span class="hljs-string">"&lt;!oops"</span></span>)); }</code> </pre> <br><p>  рдХрд╛рдо рдХрд░рдиреЗ рд▓рдЧрддрд╛ рд╣реИ!  рд▓реЗрдХрд┐рди рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рджреЗрдЦреЗрдВ: <code>((), String)</code> ред  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рд╣рдо рдХреЗрд╡рд▓ рд╕рд╣реА рдореВрд▓реНрдп рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, <code>String</code> ред  рдпрд╣ рдХрд╛рдлреА рдмрд╛рд░ рд╣реЛрдЧрд╛ - рд╣рдорд╛рд░реЗ рдХреБрдЫ рдкрд╛рд░реНрд╕рд░ рдХреЗрд╡рд▓ рдЙрддреНрдкрд╛рджрди рдореВрд▓реНрдпреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдЗрдирдкреБрдЯ рдореЗрдВ рдкреИрдЯрд░реНрди рд╕реЗ рдореЗрд▓ рдЦрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдЙрдирдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЕрдирджреЗрдЦрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рдкреИрдЯрд░реНрди рдХреЗ рдЕрдиреБрдХреВрд▓ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рджреЛ рдЕрдиреНрдп рдХреЙрдореНрдмреАрдиреЗрдЯрд░реЛрдВ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА <code>pair</code> рдХреЙрдореНрдмрд┐рдиреЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ: <code>left</code> , рдЬреЛ рдкрд╣рд▓реЗ рдкрд╛рд░реНрд╕рд░ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдмрддрд╛рддрд╛ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рджреВрд╕рд░реЗ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд <code>right</code> ред  рд╣рдордиреЗ рдКрдкрд░ рдЕрдкрдиреЗ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдПрдХ рдкрд╛рд░реНрд╕рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рд╣реИ, рдЬреЛ рдмрд╛рдПрдВ рд╣рд┐рд╕реНрд╕реЗ рдХреЛ рдЫреЛрдбрд╝ рджреЗрддрд╛ рд╣реИ рдФрд░ <code>pair</code> рдмрдЬрд╛рдп рдХреЗрд╡рд▓ рд╣рдорд╛рд░реЗ <code>String</code> рдмрдЪрд╛рддрд╛ рд╣реИред </p><br><h3 id="vvedenie-v-funktor">  рдлрдиреНрдиреЗрдХрд╛рд░ рдкрд░рд┐рдЪрдп </h3><br><p>  рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рд╣рдо рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВ, рдЖрдЗрдП рдПрдХ рдФрд░ рдХреЙрдореНрдмрд┐рдиреЗрдЯрд░ рдХрд╛ рдкрд░рд┐рдЪрдп рджреЗрдВ рдЬреЛ рдЗрди рджреЛ: <code>map</code> рдХреЗ рд▓реЗрдЦрди рдХреЛ рдмрд╣реБрдд рд╕рд░рд▓ рдХрд░реЗрдЧрд╛ред </p><br><p>  рдЗрд╕ рдХреЙрдореНрдмреАрдиреЗрдЯрд░ рдХрд╛ рдПрдХ рдХрд╛рдо рд╣реИ: рдкрд░рд┐рдгрд╛рдо рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рдмрджрд▓рдирд╛ред , ,    ,   <code>((), String)</code>     ,      <code>String</code> . </p><br><p>      ,  ,      .     : <code>|(_left, right)| right</code> .  ,     <code>Fn(A) -&gt; B</code>  <code>A</code> тАФ    ,  <code>B</code> тАФ . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span></span>&lt;P, F, A, B&gt;(parser: P, map_fn: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, B), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, A), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(A) -&gt; B, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser(input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, result)) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, map_fn(result))), <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), } }</code> </pre> <br><p>    ? <code>P</code> тАФ  .  <code>A</code>  . <code>F</code> тАФ  ,       <code>P</code>    ,    ,  <code>P</code>   ,     тАФ <code>B</code>  <code>A</code> </p><br><p>     <code>parser(input)</code> ,   ,   <code>result</code>       <code>map_fn(result)</code> ,  <code>A</code>  <code>B</code> ,     . </p><br><p>   ,        ,    <code>map</code>   ,    <code>Result</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span></span>&lt;P, F, A, B&gt;(parser: P, map_fn: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, B), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, A), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(A) -&gt; B, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| parser(input) .map(|(next_input, result)| (next_input, map_fn(result))) }</code> </pre> <br><p>   тАФ ,   ┬л┬╗  Haskell    ,  .        <code>A</code> ,       <code>map</code> ,      <code>A</code>  <code>B</code>       ,    <code>B</code>  ,  .        Rust,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>Option</code></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>Result</code></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>Iterator</code></a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>Future</code></a> ,     .     :    -         Rust,         ,    ,    ,   ,       <code>map</code> . </p><br><h3 id="vremya-dlya-tipazha">    </h3><br><p> ,   ,         : <code>Fn(&amp;str) -&gt; Result&lt;(&amp;str, Output), &amp;str&gt;</code> . ,    ,    ,  ,   ,   ,     ,              . </p><br><p>         ,    : </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParseResult</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; = <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, Output), &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;;</code> </pre> <br><p>   ,  ,     ,     <code>ParseResult&lt;String&gt;</code>  .     ,      ,      Rust       .      ,   <code>rustc</code> ,     ,   . </p><br><p>   <code>'a</code> ,   ,      <em> </em> . </p><br><p>  .       ,       ,      .    ,     . </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parser</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt;; }</code> </pre> <br><p>         :  <code>parse()</code> ,    :   ,   ,   . </p><br><p>     ,        ,    : </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, F, Output&gt; Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> F <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;Output&gt;, { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>(input) } }</code> </pre> <br><p>  ,        ,   ,      <code>Parser</code> ,          . </p><br><p> ,   ,          .    <code>map</code>  ,   . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, F, A, B&gt;(parser: P, map_fn: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, B&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(A) -&gt; B, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| parser.parse(input) .map(|(next_input, result)| (next_input, map_fn(result))) }</code> </pre> <br><p>      :       ,      <code>parser.parse(input)</code> ,     ,    <code>P</code> ,   ,    <code>Parser</code> ,      ,   <code>Parser</code> .         ,     .      <code>'a'</code> ,    ,       . </p><br><p>     <code>pair</code>   ,     : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (R1, R2)&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser1.parse(input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, result1)) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser2.parse(next_input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((final_input, result2)) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((final_input, (result1, result2))), <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), }, <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), } }</code> </pre> <br><p>     :            <code>parser.parse(input)</code>  <code>parser(input)</code> . </p><br><p>   ,       <code>pair</code> ,       <code>map</code> . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (R1, R2)&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| { parser1.parse(input).and_then(|(next_input, result1)| { parser2.parse(next_input) .map(|(last_input, result2)| (last_input, (result1, result2))) }) } }</code> </pre> <br><p>  <code>and_then</code>  <code>Result</code>   <code>map</code> ,   ,        <code>Result</code> ,    <code>Result</code> .             <code>match</code> .  <code>and_then</code>   ,  ,        <code>map</code> ,    <code>left</code>  <code>right</code> . </p><br><h3 id="left-i-right"> Left  Right </h3><br><p>  <code>pair</code>  <code>map</code>  ,    <code>left</code>  <code>right</code>  : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">left</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt;, { map(pair(parser1, parser2), |(left, _right)| left) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">right</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt;, { map(pair(parser1, parser2), |(_left, right)| right) }</code> </pre><br><p>    <code>pair</code> ,          ,      <code>map</code>      ,    . </p><br><p>          ,     ,            . </p><br><p>      ,    <code>Parser</code>  <code>ParseResult</code> . <code>match_literal</code>   : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">match_literal</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;(expected: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, ()&gt; { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> input.get(<span class="hljs-number"><span class="hljs-number">0</span></span>..expected.len()) { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next == expected =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[expected.len()..], ())), _ =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } }</code> </pre> <br><p>       ,    ,       тАФ <code>&amp;'a str</code> ,  <code>rustc</code> . </p><br><p>  <code>identifier</code> ,     ,   ,      : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">identifier</span></span></span></span>(input: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; {</code> </pre> <br><p>   . <code>()</code>   .    . </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">right_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tag_opener = right(match_literal(<span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>), identifier); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"my-first-element"</span></span>.to_string())), tag_opener.parse(<span class="hljs-string"><span class="hljs-string">"&lt;my-first-element/&gt;"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"oops"</span></span>), tag_opener.parse(<span class="hljs-string"><span class="hljs-string">"oops"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"!oops"</span></span>), tag_opener.parse(<span class="hljs-string"><span class="hljs-string">"&lt;!oops"</span></span>)); }</code> </pre> <br><h3 id="odin-ili-bolshe">    </h3><br><p>      .      <code>&lt;</code>     .  ?       . </p><br><p> ,   ,     .       ,    . </p><br><p> , ,         - , <em> </em>       : . </p><br><p>          (  )  .      . </p><br><p>    тАФ      <em>   </em> ,   <code>&lt;element attribute="value"/&gt;</code>   ,      .       ,     ,   <em>  </em>  . </p><br><p>          <code>identifier</code> ,      .  ,          . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_or_more</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;A&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> input| { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>::new(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, first_item)) = parser.parse(input) { input = next_input; result.push(first_item); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, next_item)) = parser.parse(input) { input = next_input; result.push(next_item); } <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((input, result)) } }</code> </pre> <br><p>  ,    ,    ,  <code>A</code> ,        <code>Vec&lt;A&gt;</code> тАФ   <code>A</code> . </p><br><p>      <code>identifier</code> .     ,     ,    .       ,      ,           . </p><br><p>    ,  :         <em></em>  ?       : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero_or_more</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;A&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> input| { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>::new(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, next_item)) = parser.parse(input) { input = next_input; result.push(next_item); } <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((input, result)) } }</code> </pre> <br><p>    ,  ,     . </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_or_more_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parser = one_or_more(match_literal(<span class="hljs-string"><span class="hljs-string">"ha"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(), (), ()])), parser.parse(<span class="hljs-string"><span class="hljs-string">"hahaha"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"ahah"</span></span>), parser.parse(<span class="hljs-string"><span class="hljs-string">"ahah"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>), parser.parse(<span class="hljs-string"><span class="hljs-string">""</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero_or_more_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parser = zero_or_more(match_literal(<span class="hljs-string"><span class="hljs-string">"ha"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(), (), ()])), parser.parse(<span class="hljs-string"><span class="hljs-string">"hahaha"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">"ahah"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[])), parser.parse(<span class="hljs-string"><span class="hljs-string">"ahah"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[])), parser.parse(<span class="hljs-string"><span class="hljs-string">""</span></span>)); }</code> </pre> <br><p>      :  <code>one_or_more</code>     ,             ,   <code>zero_or_more</code>      ,    . </p><br><p>            ,       ,     .     <code>one_or_more</code>   <code>zero_or_more</code> , -  : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_or_more</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;A&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { map(pair(parser, zero_or_more(parser)), |(head, <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> tail)| { tail.insert(<span class="hljs-number"><span class="hljs-number">0</span></span>, head); tail }) }</code> </pre> <br><p>      Rust,           <code>cons</code>  <code>Vec</code> ,   ,     Lisp,    ,   . ,   :  . </p><br><p>    ,          :    ,       .  :                (       ).       ,      ,   <code>Clone</code> ,      ,     ,          . </p><br><p>    <em></em> .  ,      <code>one_or_more</code>   ,  ,       ,      ,        ,     -  ,    ,   <code>RangeBound</code>            : <code>range(0..)</code>  <code>zero_or_more</code> , <code>range(1..)</code>  <code>one_or_more</code> , <code>range(5..=6)</code>     ,    . </p><br><p>       .           <code>zero_or_more</code>  <code>one_or_more</code> . </p><br><p>      ,        тАФ  ,    <code>Rc</code>    ? </p><br><h3 id="predikatnyy-kombinator">   </h3><br><p>      ,         <code>one_or_more</code>      <code>zero_or_more</code> . </p><br><p>   ,  .     ,  <em></em>  .     ,    ,     ,       <code>&gt;</code>  <code>/&gt;</code> .    ,  <em></em>  .    ,   ,       ,        <em>  </em>  <em>  </em> ,    . </p><br><p>       .       . </p><br><p> -.         <code>match_literal</code>  ,    .   ?   -    ,       Unicode,    .        Rust,  ,  <code>char</code>   <code>is_whitespace</code> ,    <code>is_alphabetic</code>  <code>is_alphanumeric</code> . </p><br><p> -.     ,      ,   <code>is_whitespace</code> ,     <code>identifier</code> . </p><br><p> -.    ,     .      <code>any_char</code> ,    <code>char</code>   ,      ,   <code>pred</code> ,       ,    : <code>pred(any_char, |c| c.is_whitespace())</code> .    ,      ,    :      . </p><br><p>  <code>any_char</code> ,   ,       UTF-8. </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">any_char</span></span></span></span>(input: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> input.chars().next() { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[next.len_utf8()..], next)), _ =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } }</code> </pre> <br><p>   <code>pred</code>     ,   , .    ,       .     ,      <code>true</code> ,    .       ,    . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pred</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A, F&gt;(parser: P, predicate: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;A) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span>, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, value)) = parser.parse(input) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> predicate(&amp;value) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, value)); } } <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input) } }</code> </pre> <br><p>   ,  ,    : </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">predicate_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parser = pred(any_char, |c| *c == <span class="hljs-string"><span class="hljs-string">'o'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">"mg"</span></span>, <span class="hljs-string"><span class="hljs-string">'o'</span></span>)), parser.parse(<span class="hljs-string"><span class="hljs-string">"omg"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"lol"</span></span>), parser.parse(<span class="hljs-string"><span class="hljs-string">"lol"</span></span>)); }</code> </pre> <br><p>     ,     <code>whitespace_char</code>    : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">whitespace_char</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>&gt; { pred(any_char, |c| c.is_whitespace()) }</code> </pre> <br><p>  ,     <code>whitespace_char</code> ,     ,    , <em>   </em> ,    , <em>   </em> .        <code>space1</code>  <code>space0</code> . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">space1</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>&gt;&gt; { one_or_more(whitespace_char()) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">space0</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>&gt;&gt; { zero_or_more(whitespace_char()) }</code> </pre> <br><h3 id="citiruemye-stroki">   </h3><br><p>          ? ,    ,          .     <code>identifier</code>    (  ,      <code>any_char</code>  <code>pred</code>   <code>*_or_more</code> ). <code>match_literal("=")</code>   <code>=</code> .         ,     .  ,      ,     . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quoted_string</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { map( right( match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), left( zero_or_more(pred(any_char, |c| *c != <span class="hljs-string"><span class="hljs-string">'"'</span></span>)), match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), ), ), |chars| chars.into_iter().collect(), ) }</code> </pre> <br><p>       ,     ,    ,      ,   . </p><br><p>     <code>map</code> -   ,    ,    ,     ,    ,    :   .  <code>map</code>  <code>right</code> ,    <code>right</code> тАФ  ,   : <code>match_literal("\"")</code> .     . </p><br><p>    <code>right</code> тАФ   .      <code>left</code> ,    ,  <em></em>   <code>left</code> , ,   ,   <code>match_literal("\"")</code> тАФ  .  ,   тАФ    . </p><br><p>     <code>pred</code>  <code>any_char</code> ,   ,    <em>   </em> ,      <code>zero_or_more</code> ,   : </p><br><ul><li>   </li><li>       ,  <em></em>    </li><li>    </li></ul><br><p>   <code>right</code>  <code>left</code>          . </p><br><p>  ,   . ,   <code>zero_or_more</code> ? <code>Vec&lt;A&gt;</code>      <code>A</code> .  <code>any_char</code>  <code>char</code> .  ,    ,  <code>Vec&lt;char&gt;</code> .     <code>map</code> :   ,   <code>Vec&lt;char&gt;</code>  <code>String</code> ,   ,     <code>String</code>  <code>Iterator&lt;Item = char&gt;</code> ,      <code>vec_of_chars.into_iter().collect()</code>     ,    <code>String</code> . </p><br><p>     ,  ,    ,    ,  ,     ,   ,  ,            . </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quoted_string_parser</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"Hello Joe!"</span></span>.to_string())), quoted_string().parse(<span class="hljs-string"><span class="hljs-string">"\"Hello Joe!\""</span></span>) ); }</code> </pre> <br><p> , , ,  ,    . </p><br><h3 id="nakonec-atributy-razbora"> ,   </h3><br><p>     , ,  <code>=</code>    .   ,      . </p><br><p>      .   ,      <code>Vec&lt;(String, String)&gt;</code> ,      <code>(String, String)</code> ,       <code>zero_or_more</code> . ,     . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attribute_pair</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt; { pair(identifier, right(match_literal(<span class="hljs-string"><span class="hljs-string">"="</span></span>), quoted_string())) }</code> </pre> <br><p>   !  :           <code>pair</code> ,       <code>identifier</code> ,    <code>String</code> ,  <code>right</code>   <code>=</code> ,      ,    <code>quoted_string</code> ,     <code>String</code> . </p><br><p>      <code>zero_or_more</code> ,   ,        . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attributes</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt;&gt; { zero_or_more(right(space1(), attribute_pair())) }</code> </pre> <br><p>    :     , <br>   .   <code>right</code>       . </p><br><p>   . </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attribute_parser</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(( <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[ (<span class="hljs-string"><span class="hljs-string">"one"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"1"</span></span>.to_string()), (<span class="hljs-string"><span class="hljs-string">"two"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"2"</span></span>.to_string()) ] )), attributes().parse(<span class="hljs-string"><span class="hljs-string">" one=\"1\" two=\"2\""</span></span>) ); }</code> </pre> <br><p>  !  ! </p><br><p>   , ,      rustc ,      ,          .  ,              .  ,    rustc,  ,   ,    <code>#![type_length_limit = "тАжsome big numberтАж"]</code>   ,      .   ,    <code>#![type_length_limit = "16777216"]</code> ,          . ,   ! </p><br><h3 id="tak-teper-zavershenie">    </h3><br><p>   , ,      ,    ,        NP-.        element:        ,   ,    ,        <code>zero_or_more</code> , ? </p><br><p> ,     ,     . ,   ,      ,    :   <code>&lt;</code> ,    .  ,       <code>(String, Vec&lt;(String, String)&gt;)</code>   . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">element_start</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt;)&gt; { right(match_literal(<span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>), pair(identifier, attributes())) }</code> </pre> <br><p>    ,        ,       . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">single_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { map( left(element_start(), match_literal(<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>)), |(name, attributes)| Element { name, attributes, children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }, ) }</code> </pre> <br><p> ,  ,      тАФ     <code>Element</code> ! </p><br><p>      . </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">single_element_parser</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(( <span class="hljs-string"><span class="hljs-string">""</span></span>, Element { name: <span class="hljs-string"><span class="hljs-string">"div"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(<span class="hljs-string"><span class="hljs-string">"class"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"float"</span></span>.to_string())], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[] } )), single_element().parse(<span class="hljs-string"><span class="hljs-string">"&lt;div class=\"float\"/&gt;"</span></span>) ); }</code> </pre> <br><p> тАж   ,       . </p><br><p>    <code>single_element</code>  ,          ,    ,    . ,        ,       ,       тАФ ,       тАФ   . </p><br><p>   ,        ,      ... </p><br><h3 id="beskonechnost-ne-predel">    </h3><br><p>   -      Rust, , ,      . </p><br><p>        .  ,      : </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span></span>&lt;A&gt; { Cons(A, List&lt;A&gt;), Nil, }</code> </pre> <br><p>   rustc    ,     <code>List&lt;A&gt;</code>   ,     <code>List::&lt;A&gt;::Cons</code>    <code>List&lt;A&gt;</code> ,      .   rustc,      ,   ,     <em></em>  . </p><br><p>             ,       Rust.    ,   Rust,   ,     <em></em>     ,     <em></em>  ,    .    ,      . </p><br><p>    ,    .  ,   <code>List::Cons</code>   <code>A</code>   <em></em> <code>A</code> ,     <code>A</code>  <em></em>   <code>A</code> .    ,   ,   ,    ,    <code>List::Cons</code>      ,    .    ,           Rust тАФ  <code>Box</code> . </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span></span>&lt;A&gt; { Cons(A, <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>&lt;List&lt;A&gt;&gt;), Nil, }</code> </pre> <br><p>     <code>Box</code>   ,       .  ,          ,            <code>Box&lt;dyn Parser&lt;'a, A&gt;&gt;</code> . </p><br><p>   .  ?  ,        -    ,    ,          .       :   .      .  ,      ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  SIMD</a> (     ). </p><br><p> ,     <code>Parser</code>     <em>Box</em>     ,      . </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BoxedParser</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { parser: <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>&lt;dyn Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;, } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>&lt;P&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { BoxedParser { parser: <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>::new(parser), } } } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.parser.parse(input) } }</code> </pre> <br><p> ,  ,    <code>BoxedParser</code>    <code>box</code> .    <code>BoxedParser</code>       (  <code>BoxedParser</code> ,      ),    <code>BoxedParser::new(parser)</code> ,    ,      <code>Box</code>    . ,   <code>Parser</code>  ,         . </p><br><p>          <code>Box</code> ,  <code>BoxedParser</code>    <code>Parser</code>  ,   . ,   ,  ,           ,    ,     <em>  </em> ,  , ,   <em> </em> .        . </p><br><h3 id="vozmozhnost-predstavlyaet-sebya">    </h3><br><p> ,  ,       ,     . </p><br><p>    ,   ?      ,       ,       .    <code>quoted_string</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quoted_string</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { map( right( match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), left( zero_or_more(pred(any_char, |c| *c != <span class="hljs-string"><span class="hljs-string">'"'</span></span>)), match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), ), ), |chars| chars.into_iter().collect(), ) }</code> </pre> <br><p>     ,             .             <code>Parser</code> ? </p><br><p>   ,     ,     <code>impl Trait</code>     ,   <code>impl Trait</code>     . </p><br><p> тАж      <code>BoxedParser</code> .       ,   <code>impl Parser&lt;'a, A&gt;</code> ,    <em></em>  ,   <code>BoxedParser&lt;'a, A&gt;</code> . </p><br><p>   ,          ,           ,   <code>Parser</code> . </p><br><p>     <code>map</code> ,    <code>Parser</code>  : </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parser</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt;; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span></span>&lt;F, NewOutput&gt;(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, map_fn: F) -&gt; BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Sized</span></span> + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(Output) -&gt; NewOutput + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { BoxedParser::new(map(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, map_fn)) } }</code> </pre> <br><p>   <code>'a</code> , ,    .  ,            тАФ     ,          ,       <code>impl Trait</code> . </p><br><p>       <code>quoted_string</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quoted_string</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { right( match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), left( zero_or_more(pred(any_char, |c| *c != <span class="hljs-string"><span class="hljs-string">'"'</span></span>)), match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), ), ) .map(|chars| chars.into_iter().collect()) }</code> </pre> <br><p>   ,   ,  <code>.map()</code>    <code>right()</code> . </p><br><p>         <code>pair</code> , <code>left</code>  <code>right</code> ,       ,    ,    ,        <code>pair</code> .    ,       ,     <code>map</code> ,         . </p><br><p>    тАФ <code>pred</code> .        <code>Parser</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pred</span></span></span></span>&lt;F&gt;(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, pred_fn: F) -&gt; BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Sized</span></span> + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;Output) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span> + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { BoxedParser::new(pred(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, pred_fn)) }</code> </pre> <br><p>       <code>quoted_string</code>   <code>pred</code> ,   : </p><br><pre> <code class="rust hljs">zero_or_more(any_char.pred(|c| *c != <span class="hljs-string"><span class="hljs-string">'"'</span></span>)),</code> </pre> <br><p>  ,     ,   ,     <code>zero_or_more</code>   тАФ    ┬л    <code>any_char</code>    ┬╗,    .  ,        <code>zero_or_more</code>  <code>one_or_more</code>  . </p><br><p>     <code>quoted_string</code> ,    <code>map</code>  <code>single_element</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">single_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { left(element_start(), match_literal(<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>)).map(|(name, attributes)| Element { name, attributes, children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }) }</code> </pre> <br><p>      <code>element_start</code>  ,    ,  ,   .          ... </p><br><p> тАж  ,       .             ,     . </p><br><p>    <code>map</code>  <code>pred</code>  <code>Box</code> тАФ <em></em>     ! </p><br><h3 id="obrabotka-detey-elementa">    </h3><br><p>         .    <code>single_element</code> ,   ,     <code>&gt;</code> ,    <code>/&gt;</code> .            ,        ,     . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">open_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { left(element_start(), match_literal(<span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>)).map(|(name, attributes)| Element { name, attributes, children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }) }</code> </pre> <br><p> ,     ?     ,    ,      ,         <code>zero_or_more</code> ,     ?  ,      , тАФ      : ,   <em></em>  , <em></em>  . </p><br><p>   ,   ,      :     ,  ,      .    ,  ,   ,     <em>   </em> .   , ,   ,    ,   ,        ,    . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">either</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, A&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser1.parse(input) { ok @ <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(_) =&gt; ok, <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(_) =&gt; parser2.parse(input), } }</code> </pre> <br><p>       <code>element</code> ,     ,    (     <code>open_element</code>   ,       <code>element</code> ). </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { either(single_element(), open_element()) }</code> </pre> <br><p>       .         ,  ,    ,    .      , ? </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;(expected_name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { right(match_literal(<span class="hljs-string"><span class="hljs-string">"&lt;/"</span></span>), left(identifier, match_literal(<span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>))) .pred(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |name| name == &amp;expected_name) }</code> </pre> <br><p>   <code>pred</code>   ,   ? </p><br><p>           ,   : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parent_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { pair( open_element(), left(zero_or_more(element()), close_element(тАжoops)), ) }</code> </pre> <br><p>        <code>close_element</code> ?  ,      . </p><br><p>   .       ,   <code>parent_element</code> ,     <code>open_element</code>   <code>element</code>   <code>parent_element</code> ,  ,       XML. </p><br><p> ,  ,     <code>and_then</code> ? ,  .    <code>and_then</code> :   -,   ,  ,       <em></em> ,    .     <code>pair</code> ,   ,   ,       ,     .  , <code>and_then</code>   <code>Result</code>  <code>Option</code> ,   ,      ,   <code>Result</code>  <code>Option</code>      <em></em> ,   ,     ( ,    )). </p><br><p> ,      . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and_then</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, F, A, B, NextP&gt;(parser: P, f: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, B&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, NextP: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, B&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(A) -&gt; NextP, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser.parse(input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, result)) =&gt; f(result).parse(next_input), <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), } }</code> </pre> <br><p>   ,    ,    <code>P</code> ,   ,     <code>A</code> .    <code>F</code> ,  <code>map</code>    <code>A</code>  <code>B</code> ,     ,  <code>and_then</code>    <code>A</code>  <em>  </em> <code>NextP</code> ,     <code>B</code> .    тАФ <code>B</code> ,    ,  ,     <code>NextP</code>   . </p><br><p>    :        ,     ,  ,     ,      <code>f</code>   ( <code>A</code> ),  ,    <code>f(result)</code> ,       <code>B</code> .   <em></em>          .    ,        ,    ,       <code>B</code> </p><br><p>  :        <code>P</code> ,    ,    <code>f</code>     <code>P</code> ,        <code>NextP</code> ,    ,    . </p><br><p>        <code>Parser</code> ,    <code>map</code> ,    . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and_then</span></span></span></span>&lt;F, NextParser, NewOutput&gt;(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, f: F) -&gt; BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Sized</span></span> + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NextParser: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(Output) -&gt; NextParser + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { BoxedParser::new(and_then(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, f)) }</code> </pre> <br><p> , ,    ? </p><br><p>  ,   <em></em>  <code>pair</code>  : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (R1, R2)&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Clone</span></span>, R2: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { parser1.and_then(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |result1| parser2.map(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |result2| (result1.clone(), result2))) }</code> </pre> <br><p>    ,   : <code>parser2.map()</code>  <code>parser2</code>     ,    <code>Fn</code> ,   <code>FnOnce</code> ,     <code>parser2</code> ,     .  ,  Rust.     ,      ,        <code>pair</code> . </p><br><p> ,         Rust,            <code>close_element</code> ,   ,         . </p><br><p>    : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parent_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { pair( open_element(), left(zero_or_more(element()), close_element(тАжoops)), ) }</code> </pre> <br><p> ,   <code>and_then</code> ,            <code>close_element</code> . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parent_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { open_element().and_then(|el| { left(zero_or_more(element()), close_element(el.name.clone())).map(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |children| { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> el = el.clone(); el.children = children; el }) }) }</code> </pre> <br><p>     ,   <code>and_then</code>    <code>open_element()</code> ,    ,    <code>close_element</code> .  ,       <code>open_element</code>      <code>and_then</code> .  ,         <code>Element</code>  <code>open_element</code> , ,   ,      . </p><br><p>  ,  <code>map</code>    ,    <code>Element</code> ( <code>el</code> )   .    <code>clone()</code> ,      <code>Fn</code>       .       ( <code>Vec&lt;Element&gt;</code> )       <code>Element</code> ,        . </p><br><p> ,     ,      <code>element</code>  ,    <code>open_element</code>  <code>parent_element</code> ,      ,     ,   ,   ! </p><br><h3 id="sobiraetes-li-vy-skazat-slovo-m-ili-dolzhen-ya">      ""   ? </h3><br><p> ,    ,   <code>map</code>  ┬л┬╗   Haskell? </p><br><p> <code>and_then</code> тАФ    ,     Rust,      ,   <code>map</code> .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>flat_map</code></a>  <code>Iterator</code> ,     ,   . </p><br><p>     тАФ "".     <code>Thing&lt;A&gt;</code> ,      <code>and_then</code> ,        <code>A</code>  <code>Thing&lt;B&gt;</code> ,        <code>Thing&lt;B&gt;</code> тАФ  . </p><br><p>     , ,     <code>Option&lt;A&gt;</code> ,   ,    <code>Some(A)</code>  <code>None</code> ,     ,   <code>Some(A)</code> ,   <code>Some(B)</code> </p><br><p>     . ,     <code>Future&lt;A&gt;</code>     ,  <code>and_then</code>      <code>Future&lt;B&gt;</code> ,      <code>Future&lt;B&gt;</code>    <code>Future&lt;A&gt;</code>  ,     <code>Future&lt;A&gt;</code> .        <code>Future&lt;A&gt;</code> ,   тАФ   <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">1</a></sup> ,   <code>Future&lt;B&gt;</code> .  ,   <code>Future</code>     ,    <code>and_then</code>   <em>  </em> ,       <code>Future</code> ,  .     ,     <em></em> <code>Future</code> ,       . </p><br><p>      ,   Rust       ,   ,     ,  ,  ,       ,    ,    .  . </p><br><h3 id="probely-redux"> , Redux </h3><br><p>   . </p><br><p>      ,    XML,      .       ,              (  ,        ,  <code>&lt; div / &gt;</code> ,    ). </p><br><p>               . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">whitespace_wrap</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { right(space0(), left(parser, space0())) }</code> </pre> <br><p>    <code>element</code>  ,          <code>element</code> ,  ,          ,   . </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { whitespace_wrap(either(single_element(), parent_element())) }</code> </pre> <br><h3 id="my-na-finishnoy-pryamoy">    ! </h3><br><p>  ,    !    ,  . </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xml_parser</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> doc = <span class="hljs-string"><span class="hljs-string">r#" &lt;top label="Top"&gt; &lt;semi-bottom label="Bottom"/&gt; &lt;middle&gt; &lt;bottom label="Another bottom"/&gt; &lt;/middle&gt; &lt;/top&gt;"#</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parsed_doc = Element { name: <span class="hljs-string"><span class="hljs-string">"top"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(<span class="hljs-string"><span class="hljs-string">"label"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"Top"</span></span>.to_string())], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[ Element { name: <span class="hljs-string"><span class="hljs-string">"semi-bottom"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(<span class="hljs-string"><span class="hljs-string">"label"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"Bottom"</span></span>.to_string())], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }, Element { name: <span class="hljs-string"><span class="hljs-string">"middle"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[Element { name: <span class="hljs-string"><span class="hljs-string">"bottom"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(<span class="hljs-string"><span class="hljs-string">"label"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"Another bottom"</span></span>.to_string())], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }], }, ], }; <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, parsed_doc)), element().parse(doc)); }</code> </pre> <br><p>  ,    -   ,   ,      : </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mismatched_closing_tag</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> doc = <span class="hljs-string"><span class="hljs-string">r#" &lt;top&gt; &lt;bottom/&gt; &lt;/middle&gt;"#</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"&lt;/middle&gt;"</span></span>), element().parse(doc)); }</code> </pre> <br><p>    ,        .     ,      <em></em>  ,       ,  , <em></em> .  ,  , ,  ,          .     ,       ,    , ,   ,    . </p><br><p>     :     ,   !  ,      ,  ,               <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">2</a></sup> . </p><br><p>  ,   ,       .      ! </p><br><h3 id="dopolnitelnye-resursy">   </h3><br><p>  ,    ,       Rust ,   ,        - ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  </a> ,       ,       . </p><br><p>        ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>pom</code></a> ,           ,    . </p><br><p>       Rust  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>nom</code></a>   ,    <code>pom</code>    (    ,  ),          ,     . </p><br><p>        Rust  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>combine</code></a> ,    . </p><br><p>       Haskell  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Parsec</a> . </p><br><p> ,            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><em>┬л  Haskell┬╗</em></a> ,          ,      Haskell. </p><br><h2 id="licenziya">  </h2><br><p>      Bodil Stokke        Creative Commons Attribution-NonCommercial-ShareAlike 4.0.     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://creativecommons.org/licenses/by-nc-sa/4.0/</a> . </p><br><h2 id="snoski">  </h2><br><p> 1:       . </p><br><p> 2: ,      . </p><br><h2 id="ot-perevodchikov">   </h2><br><p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">andreevlex</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">funkill</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi469213/">https://habr.com/ru/post/hi469213/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi469195/index.html">DevOpsProdigy KubeGraf v1.1.0</a></li>
<li><a href="../hi469203/index.html">рдирд╛рд╢реНрддреЗ рдФрд░ рд╣реИрдХрд╛рдердиреЛрдВ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрдд "рдХреИрдл": рдпрд╣ рдбреЗрдЯрд╛ рд╕рд╛рдЗрдВрд╕ рд╕рдореБрджрд╛рдп рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдХреНрдпреЛрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ</a></li>
<li><a href="../hi469205/index.html">рд╕рдВрдЧреНрд░рд╣рд╛рд▓рдп рдбреЗрдЯрд╛рдЖрд░реНрдЯред рдЕрдирдкреИрдХ "рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХреНрд╕ рдПрдордПрд╕ 0511"</a></li>
<li><a href="../hi469209/index.html">рдХреИрд╕реЗ рд╕рд╕реНрддреЗ рдлрд┐рд▓рд┐рдкреНрд╕ рдПрд▓рдИрдбреА рд▓реИрдВрдк рдорд╣рдВрдЧреЗ рд╕реЗ рдЕрд▓рдЧ рд╣реИрдВ</a></li>
<li><a href="../hi469211/index.html">рдЖрдИрд╕реАрдбреА рдмреИрдВрдХ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд╛рд░рд┐рд╕реНрдерд┐рддрд┐рдХреА рддрдВрддреНрд░ рдХреИрд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реИ</a></li>
<li><a href="../hi469215/index.html">рдЖрд░ рднрд╛рд╖рд╛ рдореЗрдВ рддрд╛рд░реАрдЦреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ (рдореВрд▓ рд╕реБрд╡рд┐рдзрд╛рдПрдБ, рд╕рд╛рде рд╣реА рд╕рд╛рде рд▓реБрдмреНрд░рд┐рдбреЗрдЯ рдФрд░ рдЯрд╛рдЗрдордкрд░рд┐рдпреЛрдбреНрд╕рдЖрд░ рдкреИрдХреЗрдЬ)</a></li>
<li><a href="../hi469217/index.html">рдЖрдИрдПрдордПрдЪрдУ рд╕рдВрдд рдЯреАрдорд▓рд╛рдЗрдб рдХреЙрдиреНрдл 2019</a></li>
<li><a href="../hi469219/index.html">IntelliJ IDEA рдкрд░ рд╢реАрд░реНрд╖ 20 рдиреЗрд╡рд┐рдЧреЗрд╢рди рд╕реБрд╡рд┐рдзрд╛рдПрдБред рднрд╛рдЧ реи</a></li>
<li><a href="../hi469221/index.html">рдХреИрд╕реНрдХреЗрдбреВрд░: рдПрдХ рдЪрд░рд┐рддреНрд░ рдХреЗ рдЫрд╣-рдмрд┐рдВрджреБ рдореБрджреНрд░рд╛ рдХреА рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдХрд░рдирд╛</a></li>
<li><a href="../hi469223/index.html">рдмреИрдХрдбреЛрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдПрд▓рдИрдбреА рд▓рд╛рдЗрдЯ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>