<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฆ ๐ฉ๐ฟโ๐ ุงููุฑ ุนูู ุงูุดูุฑุฉ ุ ุฃู ููููุฉ ุฅุซุงุฑุฉ ุงูุฑูุจูุช ู ... ุงูุขุฎุฑูู ๐ ๐๐ผ ๐ณ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฐุงุช ูุฑุฉ ุ ุฌุฑุช ูุญุงุฏุซุฉ ูุชูุตุช ุฃูุงู ูุชุฌุฑ ุจุนูุฏ ุจุนูุฏ : 


NB: - ?  
 GURU : - ยซยป . .    .   ,  ... 
 


 NB: - , ?  
 GURU : - google yandex , .  . , . 
 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงููุฑ ุนูู ุงูุดูุฑุฉ ุ ุฃู ููููุฉ ุฅุซุงุฑุฉ ุงูุฑูุจูุช ู ... ุงูุขุฎุฑูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432038/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/px/hq/po/pxhqpot6x9sqphxahh2fzhk4pz8.png"><br><br>  ุฐุงุช ูุฑุฉ ุ ุฌุฑุช ูุญุงุฏุซุฉ ูุชูุตุช <strike>ุฃูุงู ูุชุฌุฑ ุจุนูุฏ ุจุนูุฏ</strike> : <br><blockquote style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">NB: -         ?</code> </pre> <br> <code><b>GURU</b> : -    ยซยป      . . <b> </b>   <b></b> .  <b> </b> ,         <b></b> ...</code> <br> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">NB: -      ,     ?</code> </pre> <br> <code><b>GURU</b> : -    <strong>google</strong>   <b>yandex</b>  ,    .    <b></b>       .    ,      .</code> <br> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">NB: -       ?</code> </pre> <br> <code><b>GURU</b> : - ?โฆ   <strong></strong> ...</code> <br> </blockquote>  ุชููู <b>NB</b> ุนู ุงูุณุคุงู ุ ุฎูููุง ุนูู ูุง ูุจุฏู ูู ุฅุฒุนุงุฌ ูุญุงูุฑ ุฃูุซุฑ ุฎุจุฑุฉ ุจูุถูุญ. <br>  ุชูุงูุช <b>ุฌูุฑู</b> ุนูููู ุ ููุง ูู ูุงู ุงูุชุฃููุฏ ุนูู ุงุณุชููุงุฏ ููุถูุน ุงููููู ููุงู ุตุงูุชุง ... <br><a name="habracut"></a><br>  ุจุงูุทุจุน ุ ุนุฑูุช <strong>GURU</strong> ุฃู ุงุณุชุนูุงู ุงูุจุญุซ (ุนูู ุณุจูู ุงููุซุงู ุ ุจุงููููุฉ: proxy) ุณูุคุฏู ูุฑูุจูุง ุฌุฏูุง ุฅูู <strong>ููุงุญุธุฉ NB</strong> ููุญุตูู ุนูู ุงูุนููุงู ุงููุทููุจ: ูุงุฆูุฉ ุงููููุฐ.  ูููู ุจุนุฏ ุงูุชุฌุงุฑุจ ุงูุฃููู ุ ุณูู ูููู <strong>NB</strong> ุจููุณ ุงูุณุฑุนุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุณุช ูู ุงูุนูุงููู ูู ูุงุฆูุชู ุชุนูู ุ </li><li style=";text-align:right;direction:rtl">  ููุณุช ุฌููุน ุงููููุงุก ุฌูุฏุฉ ุนูู ูุฏู ุงููุณุงูุงุฉ. </li><li style=";text-align:right;direction:rtl">  "ุงูุชูุณู" ุจูููุน ุนุจุฑ ูููู ูุฏูููุง ูู ูููุฉ ุชุชุทูุจ ุฅุฑุงุฏุฉ ูุจูุฑุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูููู "ุฎุงุทุฆ" ุณูุถุฑ ุงููุถุน ุ ูุฃูู  ูุฏ ูุชู ุงูุงุดุชุจุงู ูู ุงููููุน ูู ุฎูุงู ูุฎุทูุทุงุช ุงูุนูุงููุฉ ูู ุงูุบูุงู. </li></ul><hr><br>  ุณูู ุฃุชุญุฏุซ ูู ูุฐุง ุงูููุงู ุนู ูุฏู ุงูุงุฑุชุฌุงู (ูุงูุฃูู ูู ุฐูู ุนุงููู) <br>  (ุฏูู ุงุณุชุฎุฏุงู ุจุฑุงูุฌ ุฎุงุตุฉ ูุนููุฉ ุ ูุซู <strong>ZennoPoster</strong> ุ ุฅูุฎ ...) <br>  ูู ุจุจูุงุก ุฃุฏุงุฉ ุชููุงุฆูุฉ ููุญุตูู ุนูู ูุงุฆูุฉ ุจุงููููุงุก "ุงูููุงุณุจูู ุญููุง" ูุงุณุชุฎุฏุงููู ูุชูุธูู ุฒูุงุฑุงุช (ุชููุงุฆูุฉ) ููุฐูู ุชูุช ุชุฑููุชูู <br>  ุงููููุน ุจุงุณุชุฎุฏุงู <strong>ูุชุตูุญ ูุฑูู</strong> . <br><br>  ุจุงุชุจุงุน ุงูุชุนูููุงุช ุ ุณูู ุชุญุตู ุนูู ุฃุฏุงุฉ ุฌุงูุฒุฉ ุชุชูุญ ูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  "ุงููุฑ" - ูู (ุฒูุงุฑุฉ) ุงููููุน ุงููุณุชูุฏู ุชููุงุฆููุง ุจุงููุงูู ุ ุฏูู ุฎูู ูู ุงูุชุณููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุญุงูุงุฉ ุณููู ุงููุณุชุฎุฏู ุจุงููุงูู ุ </li><li style=";text-align:right;direction:rtl">  ุชูุธูู ุฌููุน ุงูุฒูุงุฑุงุช ููููุง ูุฌุฏูู (ุณููุงุฑูู) ุ </li><li style=";text-align:right;direction:rtl">  ุชูุนู ูู ูุง ุณุจู ูู ุนุฏุฏ ุงููุฑุงุช ุงููุงุฒูุฉ ููุชูุฏู. </li></ul><br>  ูุนูู ุงูุฑุบู ูู ุฃู ูู ุนููู (ุฅูู ุฌุงูุจ ุงูุจุญุซ) ุงุณุชุบุฑู ุฃุณุจูุนูุง ุ ููู ุชุญุชุงุฌ ุฅูู ููููู ูุฅูุดุงุก ูุซู ูุฐู ุงูุฃุฏุงุฉ ุ ููุฏูู ูุนุฑูุฉ ุฃุณุงุณูุฉ <strong>ุจุณุทุฑ ุงูุฃูุงูุฑ</strong> ู <b>PHP</b> ู <b>JavaScript</b> . <br><hr><br>  ููุน ุฐูู ุ ูุจู ุงูุชูุฑูุฑ ุฃุณูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุฎุทุท ุงูุชุงูู</a> ุ ุณุฃููู ุจุถุน ูููุงุช ุญูู ุณุจุจ ุฅุนุฏุงุฏ ูุฐู ุงููุงุฏุฉ ูููู. <br><br>  ุณุชููู ุงููุงุฏุฉ ูููุฏุฉ ุฅุฐุง ููุช ุชุฑูุฏ ุฃู ุชููู ููู ูุชู ุชุฑุชูุจ ุงูุฅูุดุงุกุงุช (ุ ุฃู ุงูููุดุฆุงุชุ) ุงูุชู ููููู ูู ุฎูุงููุง ุจูุงุก ุชุทุจูู ุจุณุฑุนุฉ ูุณุจูุฉ ุ ุจุณูููุฉ ูุฏูู ุชูููุฉ ุ ูุงุจูุฉ ููุชููู ูุน ุชุบููุฑุงุช ุงูุชุบููุฑุงุช.  ุฅุฐุง ููุช ููุชููุง ุจุฅููุงููุฉ ุฅูุดุงุก ุชุทุจูู ูุณุชูุฏ ุฅูู ุญุงููุฉ ุฎุฏูุฉ ( <abbr title="ุญุงููุฉ ุฎุฏูุฉ ุงููุคุณุณุฉ">ESB</abbr> ). <br><br>  ุณูููู ุงููุต ูููุฏูุง ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูุชุนุฑู ุนูู ุงุณุชุฎุฏุงู <strong>Docker</strong> ูุฃูุธูุฉ ุงูุจูุงุก <b>ุงูููุฑู</b> .  ุฃู ุฅุฐุง ููุช ููุชููุง ููุท ุจู <strong>Selenium Server</strong> ูุงููุฑูู ุงูุฏูููุฉ ูู ุชููู ูุญุชูู / ูุธูุฑ ูู ูุธุงูุฑ ูุดุงุท HTTPx. <br><blockquote style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ุฅูู "ุงูุงุณุชุฎุฏุงู ุงูููุฑู" ุ ูุฅู ูุฑุงุกุฉ ูู ูุฐุง ุจุนูุงูุฉ ูุง ูุณุชุญู ูู ูุฐุง ุงูุนูุงุก.  ุงูููุฏ ูู ุจุงูุชุฃููุฏ. </blockquote><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุชูู ูุจุงุดุฑุฉ ูุฅุนุฏุงุฏ ุงูุฃุฏุงุฉ ุงูููุงุฆูุฉ.</b>  <b class="spoiler_title">ูุณุชุบุฑู ุงูุฅุนุฏุงุฏ ุฃูู ูู 20 ุฏูููุฉ.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ููุชุฑุถ ุงูุฏููู ุฃู ูุฏูู ุฌูุงุฒูู ุชุญุช ุชุตุฑูู ูุน ุชุซุจูุช Ubuntu 18.04. <br>  ูุงุญุฏ ููุจููุฉ ุงูุชุญุชูุฉ ( <b>ุนุงูู ูููุงุก</b> ) ุ ูุงูุขุฎุฑ ููุฑุงูุจุฉ <b>ุงูุนูููุฉ</b> ( <b>ุนูููุฉ</b> ). <br><br>  ูู ุงูููุชุฑุถ ุฃู ุงูุญุฒู ุงูุชุงููุฉ ูุซุจุชุฉ ุจุงููุนู ุนูู <b>ุนุงูู ุงููููุงุก</b> : <br><blockquote style=";text-align:right;direction:rtl">  <i>ุจูุงุจุฉ ุ ุนุงูู ูููุงุก ุ ุนุงูู ูููุงุก ูุคูู</i> </blockquote><br>  ูู ุงูููุชุฑุถ ุฃู ุงูุญุฒู ุงูุชุงููุฉ ูุซุจุชุฉ ุจุงููุนู ุนูู <b>ุงูุนูููุฉ</b> : <br><blockquote style=";text-align:right;direction:rtl">  <i>git ุ php-common ุ php-cli ุ php-curl ุ php-zip ุ php-memcached ุ ุงูููุญู</i> </blockquote>  ุฅุฐุง ูุงู ูุฏูู ุฃู ุฃุณุฆูุฉ ูู ูุฐู ุงููุฑุญูุฉ ุ ุฃูุชุฑุญ ูุถุงุก 15 ุฏูููุฉ ูู ูุฑุงุกุฉ ุงููุงุฏุฉ ุจุฃููููุง. <br><br>  <strong>ุนุงูู ูููุงุก</strong> <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    root-. # ,     TCP-: # 11300, 11211, 4444, 5930, 8080, 8081, 8082, 8083 #        # " root-"    git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/esb-infrastructure.git cd esb-infrastructure docker-compose up --build -d #      3     #   . #       web-.</span></span></code> </pre><br>  <strong>ุงูุนูููุฉ</strong> <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      . #      process-   , #     -  php- git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/clicker-noserver.git cd clicker-noserver composer update #  .       "XXXXXXXX" mv app/settings.php.dist app/settings.php #   . gnome-terminal \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php curl"' \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php timezone"' \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php whoer"' #  . ,     , #  : - log/list.proxy php app/src/Utils/givethejob.php ./log/list.proxy</span></span></code> </pre><br>  ุงูุชุธุฑ ุ ุดุงูุฏ ูุง ูุญุฏุซ ูู ุฎูุงู ููุญุฉ ุงูููุจ (http: // ip-address-do-doer-machines: 8080). <br>  ุณุชููู ุงููุชูุฌุฉ ูุชููุฑุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ <i>ุงูููุฌูุฏุฉ</i> . <br></div></div><a name="scheme"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุชูุณูุฑ ูุงูุชุฎุทูุท </h2><br><img src="https://habrastorage.org/webt/6e/1w/nc/6e1wnczv0tchzm_sq9pey6avk2o.png"><br><br>  ูุตู ุงููุฎุทุท ุฃุนูุงู ุชุณูุณู ุฎุทูุงุช ุงูุนูููุฉ ุ ูุงููุชูุฌุฉ ุงููุชููุนุฉ ููู ุฎุทูุฉ ุ ูุงูููุงุฑุฏ ุงููุทููุจุฉ ูุฅูุดุงุก ูู ุฌุฒุก (ุงูุชูุงุตูู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุฉ 2</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุฉ 3</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุฉ 4ุ5ุ6</a> ). <br><br>  ูู ุญุงูุชู ุ ูุญุฏุซ ูู ุดูุก ุนูู ุฌูุงุฒู <strong>Ubuntu 18.04</strong> .  ูุงุญุฏ ูููู ูุชุญูู ูู ุงูุนูููุฉ.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุชู ุชุดุบูู ุนุฏุฉ ุญุงููุงุช ุชุฑุณูุฉ ููุจููุฉ ุงูุชุญุชูุฉ. <br><br><blockquote style=";text-align:right;direction:rtl"><h4 style=";text-align:right;direction:rtl">  ุงูุฃุนุฐุงุฑ ูุงููุดู </h4><br>  ูุชููู ูู ุฑูุฒ ุงูุญุฒูุฉ ูู ุซูุงุซุฉ ุฃุฌุฒุงุก. <br>  ูุงุญุฏ ูููู ููุณ ูู (ูุงุญุธุช ุฃู ูุฐุง ุฑูุฒ ุฃููู ูุฌููู).  ูุตุฏุฑ ูุฐุง ุงูุฑูุฒ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="packagist.org">packagist.org</a> . <br><br>  ุฃูุง ุดุฎุตูุงู ูุชุจุช ุฃุฎุฑู ุ ูุญุงููุช ุฌุนููุง ูููููุฉ ูููุฑุณุฉ ูุญูุงูู ุฃุณุจูุน ููุฐุง ุงูุฌุฒุก ูู ุงูููุฏ. <br><br>  ุงูุจุงูู ูู "ุฅุฑุซ ุชุงุฑูุฎู ุตุนุจ".  ุชู ุฅูุดุงุก ูุฐุง ุงูุฌุฒุก ูู ุงูููุฏ ุนูู ูุฏุงุฑ ูุชุฑุฉ ุฒูููุฉ ุทูููุฉ.  ุจูุง ูู ุฐูู ูู ููุช ูู ููู ูุฏู ุงููุซูุฑ ูู ุงูููุงุฑุฉ ูู ุงูุจุฑูุฌุฉ. <br><br>  ูุฐุง ูู ุจุงูุชุญุฏูุฏ ุณุจุจ ูููุน ุงููุณุชูุฏุนุงุช ุนูู <strong>GitLab</strong> ุงูุฎุงุต ุจู ูุญุฒู ุนูู <strong>Satis ุงูุฎุงุต</strong> ุจู.  ูููุดุฑ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="Github.com">GitHub.com</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="packagist.org">packagist.org ุ ุณูุชุทูุจ</a> ูุฐุง ุงูุฑูุฒ ูุนุงูุฌุฉ ููุซุงุฆู ุฃูุซุฑ ุฏูุฉ. <br><br>  ุฌููุน ุฃุฌุฒุงุก ุงูููุฏ ููุชูุญุฉ ููุงุณุชุฎุฏุงู ุบูุฑ ุงููุญุฏูุฏ.  ุงููุณุชูุฏุนุงุช ูุงูุญุฒู ุณุชููู ูุชุงุญุฉ ุฅูู ุงูุฃุจุฏ. <br><br>  ููุน ุฐูู ุ ุนูุฏ ุฅุนุงุฏุฉ ูุดุฑ ุงูุดูุฑุฉ ุ ุณุฃููู ููุชููุง ูู ููุดุฑ ุฑุงุจุท ูู ุฃู ููุฐู ุงูููุงูุฉ. <br></blockquote><br><h2 style=";text-align:right;direction:rtl">  ููููุง ุนู ุงูุนูุงุฑุฉ </h2><br>  ุชุชูุซู ุงูุทุฑููุฉ ุงูุชู ุชู ุงุณุชุฎุฏุงููุง ูุฅูุดุงุก ุฃุฏุงุชูุง ูู ูุชุงุจุฉ (ุฃู ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ูุณุงุนุฏุฉ) ูุญู ูู ูููุฉ ูุญุฏุฏุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ููู ุฃุฏุงุฉ ูุณุงุนุฏุฉ ุ ุจุบุถ ุงููุธุฑ ุนู ุงููููุฉ ุงููุฑุงุฏ ุญููุง ุ ุฎุงุตูุชุงู ูุดุชุฑูุชุงู ููุฌููุน: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุชุดุบูู ุงูุฃุฏุงุฉ ุจุดูู ูุณุชูู ุนู ุงูุขุฎุฑูู ูู ุณุทุฑ ุงูุฃูุงูุฑ ูุน ุงููุนููุงุช ุงูุชู ุชุญุชูู ุนูู ุงููููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูููู ููุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ุฅุฑุฌุงุน ูุชูุฌุฉ ุงูุชูููุฐ ุฅูู stdout (ุจุนุฏ ุชูููููุง ุจุทุฑููุฉ ูุนููุฉ). </li></ul><br>  ูุชูุญ ูู ุงูุญู ุงูุฐู ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ูุฐุง ุงููุจุฏุฃ ุชุบููุฑ ุนุฏุฏ ูุนุงูุฌุงุช ุงูููุงู ููุฏ ุงูุชุดุบูู (ุงูุนูุงู) ููู ุฎุทูุฉ ูู ุฎุทูุงุช ุงูุนูููุฉ.  ุณูุคุฏู ุนุฏุฏ ูุฎุชูู ูู ุงูุนูุงู ููู ุฎุทูุฉ ุฅูู ุชุนุทู "0" ููุฎุทูุงุช ุงูุชู ุชุชุจุน ุจุณุจุจ ุทูู ููุงู ูุนุงูุฌุฉ ุงูุฎุทูุงุช ุงูุณุงุจูุฉ. <br><br>  ูุนุชูุฏ ุงูููุช ุงููุณุชุบุฑู ูู ุงูุญุตูู ุนูู ูุญุฏุฉ ูู ูุชูุฌุฉ ุงูุนูููุฉ (ูู ุญุงูุชูุง ุฃูู ูููู ุชู ุงูุชุญูู ููู) ุนูู ุนูุงูู ุฎุงุฑุฌูุฉ (ุนุฏุฏ ุงููููุงุก ุบูุฑ ุงูููุงุณุจูู ุ ูุฒูู ุงุณุชุฌุงุจุฉ ููุฑุฏ ุฎุงุฑุฌู ุ ุฅูุฎ). <br><br>  ูู ุฎูุงู ุชุบููุฑ ุนุฏุฏ ุงูุนูุงู ููู ุฎุทูุฉ ูู ุฎุทูุงุช ุงูุนูููุฉ ุ ูููู ุจุชุญููู ูุฐุง ุงูุงุนุชูุงุฏ ุฅูู ุงุนุชูุงุฏ ุนูู ุนุฏุฏ ุงูุนูุงู ููุฏ ุงูุชุดุบูู (ุฃู ุ ุงุนุชูุงุฏูุง ุนูู ูุฏุฑุงุช ุงูุญูุณุจุฉ ูุงูููุงุฉ ุงููุนููุฉ). <br><br>  ููุฒุงููุฉ ุชุดุบูู ุงูุฃุฌุฒุงุก ุงููุณุชููุฉ ุงููุฑุฏูุฉ ุ ูู ุงูููุงุฆู ุงุณุชุฎุฏุงู ุฎุงุฏู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู ุจุงุนุชุจุงุฑู ูุงูู ุจูุงูุงุช ูุฑุฏู.  ุณูุชูุญ ูู ุชุฌููุน ูุชุงุฆุฌ ุงูุฎุทูุงุช ุงูููุชููุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูููุญูู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ "ุงูุฎุทูุฉ ุงูุชุงููุฉ" ูู ุงูููุช ุงูููุงุณุจ ููุฏุฎูุงุช. <br><br><h3 style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู.  MQ ู ESB </h3><br>  ููุง ุงููุณุชูู ุงูุฃุฏูู ( <abbr title="ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู">MQ</abbr> ) ุณูู ูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ููุงูุฉ ูุฑุงุฌุนุฉ ูุจูุฑุฉ">beanstalkd</a> .  ุตุบูุฑุฉ ูุฎูููุฉ ุงููุฒู ูุฎุงููุฉ ูู ุงูุชูููู ุ ููู ูุชููุฑุฉ ูู ุญุฒูุฉ deb ููู ุญุงููุฉ Docker ุ ููู ุนุงูู ููู ุบูุฑ ูุงุถุญ.  ุงููุณุชูู ุงูููุทูู ( <abbr title="ุญุงููุฉ ุฎุฏูุฉ ุงููุคุณุณุฉ">ESB</abbr> ) ุณูู ูููุฐ ุงูููุฏ ูู <strong>PHP</strong> . <br><br>  ุณูุชู ุงุณุชุฎุฏุงู ูุฆุชูู ููุชูููุฐ.  <b>esbTask</b> ู <b>nextStepWorker</b> . <br><br>  <b>esbTask</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">esbTask</span></span></span><span class="hljs-class"> //   ,     </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// immutable-; // "" (   ESB-),  payload //    //     "" .... }</span></span></code> </pre><br>  ูุซุงู ูู ูุฐู ุงููุฆุฉ ูุนูู ุนูู "ูุนุงูุฌุฉ" <abbr title="ุงูุญูููุฉ">paylod ูู</abbr> ุฎูุงู ุฎุทูุงุช ุงูุนูููุฉ.  ูุทุจู ููููู <abbr title="ุญุงููุฉ ุฎุฏูุฉ ุงููุคุณุณุฉ">ESB</abbr> ุนุฏุฉ ูุจุงุฏุฆ / ุฃููุงุท.  ุงุซูุงู ูููู ูุณุชุญููู ุงูุงูุชูุงู ุจุดูู ูููุตู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุญูู ุงููุณุงุฑ (ุชุณูุณู ุงูุฎุทูุงุช) ููุนูููุฉ ุ ูู ูู ููุทุฉ ุฒูููุฉ ูู ุงูุนูููุฉ ุ <br>  ูุง ุฃุญุฏ ูุนุฑู ุฅูุง ุงููุบูู ุงูุฐู ุณููุชูู ุ <br></li><li style=";text-align:right;direction:rtl">  ูุญุชูู ูู ูุบูู ุนูู ุซูุงุซุฉ ุงุชุฌุงูุงุช ูุญุชููุฉ ูููุชุงุฆุฌ: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุงูุนูููุฉ (ุงุณุชูุฑุงุฑ ุทุจูุนู) ุ </li><li style=";text-align:right;direction:rtl">  ุฎุทูุฉ ุงูุฅููุงู (ูุฏู ุงูุฅููุงู - ูุชู ุชุญุฏูุฏูุง ุจูุงุณุทุฉ ุงูุฎุทูุฉ ุงูุชุงููุฉ ุ ุฅุฐุง ูู ููู ููุงู ุฃู ููุทุฉ ูู ููุงุตูุฉ ูุถุน ุงูุนูููุฉ / ุงูุฅููุงู) ุ <br></li><li style=";text-align:right;direction:rtl">  ูุชู ุชุญุฏูุฏ ุงูุฎุทูุฉ ุงูุฎุทุฃ (ูุฏู ุฅููุงุก ุงูุทูุงุฑุฆ - ุจูุงุณุทุฉ ุงูุฎุทูุฉ ุงูุชุงููุฉ ุ ูู ุญุงูุฉ ูุฌูุฏ ุฎุทุฃ ุนุงูู). <br></li></ul><br></li></ul><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุชู ุชูุซูู ุงููุงุฆู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูู json ุ ูุฎูู ููุง ...</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// json- esbTask { //    (   esbTask) "_type":"App\\\\rebean\\\\payloads\\\\ESBtaskQueue", //  "task":"task:queue@XXX.XXX.XXX.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">11300", //    () "replyto":[ "othertask1:nextqueue1@yyy.XXX.XXX.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">11300", "othertask2:nextqueue2", "othertask3:nextqueue3", ], //    () "onerror":[ "error:errorsstep@zzz.XXX.XXX.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">11300", "error:errorsstep1", "error:errorsstep2", "error:errorsstep3" ], //     () "onstop":[ "stop:stopstep@kkk.XXX.XXX.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">11300", "stop:stopstep1", "stop:stopstep2", "stop:stopstep3" ], //   "payload":{ .... }, //   ... () "till":[ .... ], //     ... () //        // -  (LINUX-TimeStamp) "since":[ 1540073089.8833, ], // -     "points":1, //  .     "groupid":"" }</span></span></code> </pre><br></div></div><br>  <b>nextStepWorker</b> <br><br>  ุชุชู ูุนุงูุฌุฉ ูู ุฑุณุงูุฉ ุชุธูุฑ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจูุงุณุทุฉ ุงูุนุงูู ุงููุณุคูู ุนููุง.  ููููุงู ุจุฐูู ุ ูุชู ุชูููุฐ ูุฌููุนุฉ ุงููุธุงุฆู ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nextStepWorker</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">workerConstructor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       //     esbTask //    () //    MQ- (beanstalkd) //     (Memcached) //     (MySQL) // : -  (  - ); -    stop-; -      (log, event, mq) .... }</span></span></code> </pre><br>  ูุชู ุชุทุจูู ุงูุนูุงู ููู ุฎุทูุฉ ูู ุฎุทูุงุช ุงูุนูููุฉ ุนูู ุฃุณุงุณ ูุฐู ุงููุฆุฉ.  ุฑูุชูู ูุงูู ูู ูุนุงูุฌุฉ ููุนุงูุฌุฉ ูุฅุฑุณุงู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุงูุทุฑูู ุ ูุงููุตู ูุนุชูู. <br><br>  ุงูุญู ููู ูุดููุฉ ูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุญุตูู ุนูู esbTask ูุชุดุบูู ุงูุนุงูู. </li><li style=";text-align:right;direction:rtl">  ุชูููุฐ ุงูููุทู ุนู ุทุฑูู ุชุฎุฒูู ุงููุชุงุฆุฌ ูู ุงูุญูููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุฃููู ุชูููุฐ ุงูุนุงูู (ุทุงุฑุฆ ุฃู ุนุงุฏู - ูุง ููู). </li></ol><br>  ุฅุฐุง ุชู ุฅููุงู ุงูุฎุทูุงุช ุ ูุณูุชู ูุถุน ุงููุชูุฌุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุงูุงุณู ุงูููุงุณุจ ูุณูุจุฏุฃ ุงูุนุงูู ุงูุชุงูู ูู ุงููุนุงูุฌุฉ. <br><a name="subj2"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุนููุง ูุฑุฉ ูุงุญุฏุฉ.  ุงูุชุญูู ูู ุชูุงูุฑ </h2><br>  ูู ุงููุงูุน ุ ูุฅู ุฅูุดุงุก ุนุงูู ูุญู ุฃู ูู ุงููุดุงูู ูู ุชูููุฐ ุทุฑููุฉ ูุงุญุฏุฉ.  ูุซุงู (ูุจุณุทุฉ) ูุชุทุจูู ุญู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุดููุฉ</a> ุงูุนูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">2 ุนูู</a> ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Process/worker/curlChecker.php .... class curlChecker extends nextStepWorker { const PROXY_INFO = 'https://api.ipfy.me?format=json&amp;geo=true'; const PROXY_TIMEOUT = '40'; const COMMAND = "curl -m %s -Lx http://%s:%s '%s'"; public function logic() { //    .  ..   payload extract($this-&gt;context()); //  defaults    payload  $curltimeout = $curltimeout ?? self::PROXY_TIMEOUT; $curlchecker = $curlchecker ?? self::PROXY_INFO; //     $line = sprintf( static::COMMAND, $curltimeout, $host, $port, $curlchecker ); exec($line, $info); //      // ( ,  stop-) $info = arrays::valid_json(implode('', info)); if (empty($info)) throw new \Exception("Bad proxy: $host:$port!", static::STATUS_STOP); //    payload $this-&gt;enrich(['info']) -&gt;sets(compact('info')); } }</span></span></code> </pre><br>  ูุชู ุงูููุงู ุจุจุนุถ ุงูุฃุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููู ุดูุก ู "ุงููุนุงุฑ" ุฅูู ุงููุฑุญูุฉ ุงูุชุงููุฉ. <br><a name="subj3"></a><br><h2 style=";text-align:right;direction:rtl">  ุชุญุฏูุฏ ุงูููุทูุฉ ุงูุฒูููุฉ.  TimeZoneDB ููุง ูู ... </h2><br>  ูุชุถูู ุงูุงุฎุชุจุงุฑ ุงููุชุนูู ููุทูุจุงุช ุงููุงุฑุฏุฉ ูุทุงุจูุฉ ููุช ูุงูุฐุฉ ุงููุณุชุนุฑุถ ุจุงูููุช ุงูุฐู ููุฌุฏ ููู ุนููุงู IP ููุตุฏุฑ ุงูุทูุจ. <br><br>  ูุชุฌูุจ ุงูุดู ูู ุงูุนุฏุงุฏุงุช ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ููุช ุงููููู ุงููุญูู. <br><br>  ููุนุฑูุฉ ุงูููุช ุ ูุฃุฎุฐ ุฎุทูุท ุงูุทูู ูุงูุนุฑุถ ูู ูุชุงุฆุฌ ุงูุฎุทูุฉ ุงูุณุงุจูุฉ ูู ุงูุนูููุฉ ููุญุตู ุนูู ุจูุงูุงุช ุญูู ุงูููุทูุฉ ุงูุฒูููุฉ ุงูุชู ุณุชุนูู ูููุง ุงููุณุฎุฉ ุงููุณุชูุจููุฉ ููุงูุฐุฉ ุงููุชุตูุญ.  ุณูุชู ุชูููุฑ ูุฐู ุงูุจูุงูุงุช ููุง ูู ูุจู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="timezonedb.com">ูุญุชุฑููู ูู ูุฌุงู ุงูููุช</a> . <br><br>  ุณูููู ุงูุนุงูู ุงููุจุณุท ูุญู ูุฐู ุงููุดููุฉ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุฉ 3</a> ) ูุดุงุจููุง ุชูุงููุง ูููุดููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุณุงุจูุฉ</a> .  ุงููุฑู ุงููุญูุฏ ูู ุนููุงู URL ููุทูุจ.  ููููู ุงูุนุซูุฑ ุนูู ุงููุณุฎุฉ ุงููุงููุฉ ูู ุงูููู: <br><blockquote style=";text-align:right;direction:rtl">  // app / src / Process / worker / timeZone.php </blockquote><br><h2 style=";text-align:right;direction:rtl">  ููููุง ุนู ุงูุจููุฉ ุงูุชุญุชูุฉ </h2><br>  ุจุงูุฅุถุงูุฉ ุฅูู <strong>beanstalkd</strong> ุงูููุตููุฉ ุ ุณุชุญุชุงุฌ ุฃุฏุงุชูุง ุฅูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>Memcached</strong> - ูููุงู ุงูุชุฎุฒูู ุงููุคูุช ุ </li><li style=";text-align:right;direction:rtl">  <strong>ุฎุงุฏู ุณููููููู</strong> - ููุงุณุจ ูุชุดุบูู <strong>ุจุฑูุงูุฌ ุณููููููู ููุจ ุฏุฑุงูู</strong> ูู ุญุงููุฉ ูููุตูุฉ ูููููู ูุฑุงูุจุฉ ุงูุนูููุฉ ุนุจุฑ <strong>VNC</strong> ุ </li><li style=";text-align:right;direction:rtl">  ููุญุงุช ูุนูููุงุช ููุฑุงูุจุฉ <strong>beanstald</strong> ุ <strong>memcached ุ</strong> ู <strong>VNC</strong> . </li></ul><br>  ูููุดุฑ ุงูุณุฑูุน ููู ูุฐุง ุ ูุฅู Docker ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฃูุฑุงู ุจูุถุงุก ุนุงูู ุงููููุงุก">ููููุฉ ุงูุชุซุจูุช ุนูู ุฃูุจููุชู</a> ) ูุฑูุญุฉ ููุบุงูุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ู "ุฃูุฑูุณุชุฑุง" ุจุงููุณุจุฉ ูู ูู ุนุงูู ุฅูุดุงุก (ุฃูุงูุฑ ููุชุซุจูุช) ...</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo apt-get -y update sudo apt-get -y install docker-compose</code> </pre><br></div></div><br>  ุชุชูุญ ูู ูุฐู ุงูุฃุฏูุงุช ุชุดุบูู ุฎูุงุฏู / ุนูููุงุช ุชูุช ุชููุฆุชูุง ุจุงููุนู ูุชููุฆุชูุง (ุจูุงุณุทุฉ ุดุฎุต ุณุงุจู) ูู "ุญุงููุงุช" ูููุตูุฉ ููุธุงู ุงูุชุดุบูู ุงูุฃุตู.  ููุญุตูู ุนูู ุชูุงุตูู ุ ุฃูุตู ุจุงูุฑุฌูุน ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ููุงู ุฌูุฏ ุขุฎุฑ">ูุฐู</a> ุงูููุงูุฉ ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ููุงู ุฌูุฏ ุขุฎุฑ">ูุฐู</a> ุงูููุงูุฉ. <br><br>  ูุฐูู ... <br><br>  ูุจุฏุก ุงูุจููุฉ ุงูุชุญุชูุฉ ุ ุชุญุชุงุฌ ุฅูู ุนุฏุฉ ุฃูุงูุฑ ูู ูุญุฏุฉ ุงูุชุญูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,    docker- #     (   ) #    sudo -s git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/esb-infrastructure.git \ panels cd panels docker-compose up --build -d #   .</span></span></code> </pre><br>  ูุชูุฌุฉ ุงูุชูููุฐ ุงููุงุฌุญ ููุฃูุฑ ุนูู ุงูุฌูุงุฒ ุจุนููุงู XXX.XXX.XXX.XXX ุ <br>  ุณูู ุชุชููู ูุฌููุนุฉ ุงูุฎุฏูุงุช ุงูุชุงููุฉ: <br><blockquote style=";text-align:right;direction:rtl">  - XXX.XXX.XXX.XXX:11300 - <strong>ุดุฌุฑุฉ ุงููุงุตูููุงุก</strong> <br>  - XXX.XXX.XXX.XXX:11211 - <strong>Memcached</strong> <br>  - XXX.XXX.XXX.XXX-00-00444 - <strong>ุฎุงุฏู ุงูุณููููููู</strong> <br>  - XXX.XXX.XXX.XXX:5930 - ุฎุงุฏู <b>VNC</b> ููุชุญูู ูู ูุง ูุญุฏุซ ูู <b>Chrome</b> <br>  - XXX.XXX.XXX.XXX:8081 - ููุญุฉ ููุจ ููุชูุงุตู ูุน <strong>Memcached</strong> (admin: pass) <br>  - XXX.XXX.XXX.XXX:8082 - ููุญุฉ ููุจ ููุชูุงุตู ูุน <strong>beanstalkd</strong> <br>  - XXX.XXX.XXX.XXX:8083 - ููุญุฉ ููุจ ููุชูุงุตู ูุน <strong>VNC</strong> (ูููุฉ ุงููุฑูุฑ: ุณุฑ) <br>  - XXX.XXX.XXX.XXX:8080 - ููุญุฉ ุงูููุจ ุงูุนุงูุฉ <br></blockquote><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">"ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ูู ุดูุก ูู ููุงูู" ุ "ุงูุฏุฎูู ุฅูู ูุญุฏุฉ ุงูุชุญูู ูู ุงูุญุงููุฉ" ุ ูููู ุฃู ูููู "ุฅููุงู ุงูุจููุฉ ุงูุชุญุชูุฉ" ุจูุซุงุจุฉ ุฃูุงูุฑ ูู ุงูููุณุฏ.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,    docker-, #    ..../panels/ #    docker-compose ps # Name Command State Ports # ------------------------------------------------------------------------------------------------------------------------ # beanstalkd /usr/bin/beanstalkd Up 0.0.0.0:11300-&gt;11300/tcp # chrome start-cron Up 0.0.0.0:4444-&gt;4444/tcp, 0.0.0.0:5930-&gt;5900/tcp # memcached docker-entrypoint.sh memcached Up 0.0.0.0:11211-&gt;11211/tcp # nginx docker-php-entrypoint /sta ... Up 0.0.0.0:8443-&gt;443/tcp, 0.0.0.0:8080-&gt;80/tcp, # 0.0.0.0:8082-&gt;8082/tcp, 0.0.0.0:8083-&gt;8083/tcp, 9000/tcp # vnc /usr/bin/supervisord -c /e ... Up 0.0.0.0:8081-&gt;8081/tcp #       chrome docker exec -ti chrome /bin/bash #       docker-compose stop &amp;&amp; docker rm $(docker ps -a -q)</span></span></code> </pre></div></div><a name="subjs"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูููุงู 4ุ5ุ6 - ุงูุฌูุน ุจูู ูู ูุงุฆุฏุฉ ูุงุญุฏุฉ </h2><br>  ุจุนุฏ ุงููุธุฑ ูู ุงูุชูุณูุฑ ูู ุงูููุงู ุจุงูุชูุตูู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุฎุทุท ุฃุนูุงู</a> ) ุ ูู ุงูุณูู ุงูุชุฃูุฏ ูู ุฃู ูุงุญุฏุฉ ููุท ูู ุงูููุงู ุงููุชุจููุฉ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุฉ 6</a> ) ุชุนุชูุฏ ุนูู ููุฑุฏ ุฎุงุฑุฌู.  ุจุฃุฏุงุก ุงูููุงู ูุน ุฃููุงุช ุชุดุบูู "ูุถูููุฉ ูุดุฑูุทุฉ" (ูุณุชููุฉ ุนู ุงูุนูุงูู ุบูุฑ ุงูููุถุจุท) ุ ูู ูุญุตู ุนูู ูุฒุงูุง ุฅุถุงููุฉ ูุณุฑุนุฉ ุงูุนูููุฉ ุจุฑูุชูุง.  ูู ูุฐุง ุงูุตุฏุฏ ุ ุชู ุงูุฌูุน ุจูู ูุฐู ุงูููุงู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">4ุ5ุ6</a> ) ูู ุนุงูู ูุงุญุฏ.  ูุณูู ููู ุงูุนุงูู: <br><blockquote style=";text-align:right;direction:rtl">  // app / src / Process / worker / whoerChecker.php </blockquote><br><h3 style=";text-align:right;direction:rtl">  ูู ุจุนูู ุฅุนุฏุงุฏุงุช ููุชุตูุญ Chrome.  ุงูุฅุถุงูุงุช </h3><br>  <strong>ุชู</strong> ุชูููู <strong>Chrome</strong> ุจูุฑููุฉ ูุน ุงูููููุงุช ุงูุฅุถุงููุฉ. <br><br>  ุงููููู ุงูุฅุถุงูู ูู <strong>Chrome</strong> ูู ุฃุฑุดูู ูุญุชูู ุนูู ููู <i>manifest.json</i> .  ููุตู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ.  ูุญุชูู ุงูุฃุฑุดูู ุฃูุถูุง ุนูู ูุฌููุนุฉ ูู <b>JavaScript ู html ู css ูุบูุฑูุง ูู</b> ุงููููุงุช ุงูุชู ูุญุชุงุฌูุง ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ูุณุชูุฏุงุช Chrome ุงูุฑุณููุฉ">ุงูุชูุงุตูู</a> ). <br><br>  ูู ุญุงูุชูุง ุ ุณูุชู ุชูููุฐ ุฃุญุฏ ูููุงุช <b>JavaScript</b> ูู ุณูุงู ูุงูุฐุฉ ุนูู <strong>Chrome</strong> ูุณุชุฏุฎู ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุงููุงุฒูุฉ ุญูุฒ ุงูุชูููุฐ. <br><br>  ูุญุชุงุฌ ููุท ุฅูู ุฃุฎุฐ ูุงูุจ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุงุณุชุจุฏุงู ุงูุจูุงูุงุช ุงููุงุฒูุฉ (ุจุฑูุชูููู ุงูุชูุงุนู ูุงูุนููุงู ูุงููููุฐ ุฃู ุงูููุทูุฉ ุงูุฒูููุฉ) ููุฎุงุฏู ุงููููู ููุฏ ุงูุงุฎุชุจุงุฑ ูู ุงูุฃูุงูู ุงูุตุญูุญุฉ. <br><br>  ููุชุทู ูู ุงูููุฏ ุงูุฐู ูุฌุนู ุงูุฃุฑุดูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Chrome/proxyHelper.php .... class proxyHelper extends sshDocker{ .... // $name -  - // $files - [ ... '   -' =&gt; '', ...] protected function buildPlugin(string $name, array $files) { $this-&gt;last = "$this-&gt;cache/$name"; if (!file_exists("$this-&gt;last")) { $zip = new \ZipArchive(); $zip-&gt;open("$this-&gt;last", \ZipArchive::CREATE | \ZipArchive::OVERWRITE); foreach ($files as $n =&gt; $data) { $zip-&gt;addFromString(basename($n), $data); } $zip-&gt;close(); } $this-&gt;all[] = $this-&gt;last; $this-&gt;all = array_unique($this-&gt;all); return $this; } .... }</span></span></code> </pre><br>  ุชู ุงูุนุซูุฑ ุนูู ูุงูุจ ุงููููู ุงูุฅุถุงูู ูุถุจุท ุงูุจุฑููุณู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ูุณุชูุฏุน ุงููููู ุงูุฅุถุงูู ูุชุซุจูุช ุงูุฎุงุฏู ุงููููู ูู Chrome">ูู ุจูู ุงูุฎูุงุฒูุฑ ููุชุงุฆุฌ ุนูู ุงูุฃุดุฎุงุต ุงูุฐูู ูุญุจูู ูููุชูู</a> ูุชุบููุฑู ูู ุฌุฒุก ุงูุจุฑูุชูููู ูุฅุถุงูุชู ุฅูู ุงููุณุชูุฏุน. <br><br><h3 style=";text-align:right;direction:rtl">  ูุงูุฐุฉ ุชุบููุฑ ุงูููุช </h3><br>  ูุชุบููุฑ ุงูููุช ุงูุนุงููู ููุซูู Chrome ููุฏ ุงูุชุดุบูู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุจุฏุงู <i>window.Date</i> ุจูุฆุฉ ูุน ูุธุงุฆู ููุงุซูุฉ ุ ูููู ุตุงูุญุฉ ูู ุงูููุทูุฉ ุงูุฒูููุฉ ุงูููุงุณุจุฉ. <br><br>  ุฅููู ุฃูุฏุฑ ุญููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ูุณุชูุฏุน ุงูููููู ุงูุฅุถุงูู ูุชุบููุฑ ููุช ุงููุงูุฐุฉ ูู Chrome">ุนูู ุณุงูุจู ุฌูุณุชููุง</a> .  ุชู ุฅูุดุงุก ุงูุจุฑูุงูุฌ ุงููุตู ููุงุฎุชุจุงุฑ ุงูุชููุงุฆู <abbr title="ูุงุฌูุฉ ุงููุณุชุฎุฏู">ููุงุฌูุฉ ุงููุณุชุฎุฏู</abbr> ุ ูููู ุจุนุฏ ุชุทุจูู ุจุนุถ ุงูุชุญุณููุงุช. <br><br>  ููุงู ูุงุฑู ุจุณูุท ููุง ุฃุฑูุฏ ุฃู ุฃููุช ุงูุชุจุงููู ุฅููู.  ูุฑุชุจุท ุจุณูุงู ุงูุจุฑุงูุฌ ุงููุตูุฉ ุงูููุถุญุฉ ูู <i>manifest.json</i> . <br><br>  ุงูุณุฑ ููู ูู ุฃู ุงูุณูุงู ุงูุนุงู (ุงูุณูุงู ุงูุฐู ูุชู ููู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฑุฆูุณู ูููููู ุงูุฅุถุงูู ูุชุนููู ุงูุฅุนุฏุงุฏุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุชุตู ุจุงูุดุจูุฉ) ูุนุฒูู ุนู ุณูุงู ุนูุงูุฉ ุงูุชุจููุจ ุงูุชู ูุชู ุชุญููู ุงูุตูุญุฉ ุจูุง. <br><br>  ูู ุงููุงุญูุฉ ุงูุนูููุฉ ุ ูุฌุฏ ุฃู ุงูุชุฃุซูุฑ ุนูู ุงููููุฐุฌ ุงูุฃููู ูููุฆุฉ ูู ุงูุณูุงู ุงูุนุงููู ูู ูุคุฏ ุฅูู ุชุบููุฑู ูู ุนูุงูุฉ ุงูุชุจููุจ.  ููุน ุฐูู ุ ุจุนุฏ ุชุณุฌูู ุงูุจุฑูุงูุฌ ุงููุตู ูู ุงูุตูุญุฉ ุงูุชู ุชู ุชุญููููุง ุจุงููุนู ูุชูููุฐูุง ูุจู ุงูุขุฎุฑูู ุ ุชู ุญู ุงููุดููุฉ. <br><br>  ูุชู ุชูุซูู ุงูุญู ุจูุงุณุทุฉ ุฌุฒุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/chromePlugins/timeShift/content.js //     var s = document.createElement('script'); //        s.src = chrome.extension.getURL('timeshift.js'); //      (document.head || document.documentElement).appendChild(s);</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏุงุช ุงููููู </h3><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุนุฏ ุฅุนุฏุงุฏ ุฎุงุฏู ูููู ูู Chrome ุฃูุฑูุง ุจุณูุทูุง ุฅูู ุงูุญุฏ ุงูุฐู ูุฌุนููู ุฃุฎูู ุฑูุฒ js ูู ุงูููุณุฏ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/chromePlugins/proxy/background.js var config = { mode: "fixed_servers", rules: { singleProxy: { scheme: "%scheme", host: "%proxy_host", port: parseInt(%proxy_port) }, bypassList: ["foobar.com"] } }; chrome.proxy.settings.set({value: config, scope: "regular"}, function () { }); function callbackFn(details) { return { authCredentials: { username: "%username", password: "%password" } }; } chrome.webRequest.onAuthRequired.addListener( callbackFn, {urls: ["&amp;gtall_urls&amp;lt"]}, ['blocking'] );</span></span></code> </pre><br></div></div><br><h3 style=";text-align:right;direction:rtl">  ูุณุงุฑ ุงูุฅุถุงูุงุช ูุฑูู </h3><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุชู ุชุณููุฉ ุฌููุน ุงูููููุงุช ุงูุฅุถุงููุฉ ููููุง ูููุฎุทุท ูุชุชู ุฅุถุงูุชูุง ุฅูู ุงููุฌูุฏ ุงููุคูุช ููุฌูุงุฒ ุงูุฐู ูุชุญูู ูู ุงูุนูููุฉ.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  // ูุฎุทุท ุงูุชุณููุฉ ูููููู ุงูุฅุถุงูู ุงููููู: <br>  ุงููููู - [ุนููุงู] - [ูููุฐ] - [ุจุฑูุชูููู]&gt; <br>  ุงูุชุญูู ุงูุฒููู - ["-" | ""] - [shift_in_minutes_from_GMT] .zip </blockquote></div></div><br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุซุจูุช ูุฐู ุงูููููุงุช ุงูุฅุถุงููุฉ ูู ุญุงููุฉ ุนุงูู ูููุงุก ุชุนูู ุนูู ุงูุฌูุงุฒ ุงููุณุคูู ุนู ุงูุจููุฉ ุงูุชุญุชูุฉ. <br><br>  ุณููุนู ูุฐุง ูุน ssh.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุงุจูุช </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุญุฒูุฉ Phpseclib ูู packagist.org"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpseclib</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุญุชู ูุฃุณู ูู ูุงุญููุง). </font><font style="vertical-align: inherit;">ููุชูููุง ุจุงูุณููู ุบูุฑ ุงูุนุงุฏู ููููุชุจุฉ ุ ูุถูุช ููููุง ูู ุฏุฑุงุณุชูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุนูู ุนููู ูุญุฏุฉ ุงูุชุญูู ssh ุจุดูู ุฃูุถู ููุง ูุณูุนูู ุจุดูู ุฃุณุฑุน ุ ููู ุงููููุฉ ูุฏ ุฃูุฌุฒุช ุจุงููุนู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ูููุณุชูู ุงูููุฎูุถ (ุงูุนูู ูุน SFTP ู SSH) ุ ุชููู ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ูุณุคููุฉ (ุฃุฏูุงู). </font><font style="vertical-align: inherit;">ุณูุคุฏู ุงุณุชุจุฏุงู ูุฐู ุงููุฆุฉ ุฅูู ุงุณุชุจุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ูุณุชูุฏุน ูุจุณูููุจ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpseclib ุจุนููู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุฏุฉ ุงูุชุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Chrome/sshDocker.php //    (DOCKER_HOST, DOCKER_USER, DOCKER_PASS) //   : app/settings.php //      .... class sshDocker { .... //  .     docker //    .         // : app/techs.php const EXEC_DOCKER = DOCKER_BIN_PATH . "/docker exec -i %s %s"; .... //     sudo    (  ),  DOCKER_USER -  protected function sudo(string $command, string $expect = '.*'){...} //     Docker-,      //       -    self::EXEC_DOCKER protected function execDocker(string $command, string $expect){...} .... }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุดุชูุฉ ูู ูุงุนุฏุฉ sshDocker ููู ูุฆุฉ proxyHelper ุงููุนุฑููุฉ ุจุงููุนู ุ ููู ูุง ุชูุชุฌ ุงูููููุงุช ุงูุฅุถุงููุฉ ูุญุณุจ ุ ุจู ุชุถุนูุง ุฃูุถูุง ูู ูุฌูุฏ ูุคูุช ูู ุญุงููุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Chrome/proxyHelper.php .... class proxyHelper extends sshDocker { .... public static function new(string $docker, $plugins) { return (new self($docker, $plugins)) -&gt;setupPlugins(); } .... }</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุทูุงู Chome ูุน ุงูุฅุนุฏุงุฏุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุณุงุนุฏูุง </font><b><font style="vertical-align: inherit;">Selenium Server ูู </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุบูู Chrome</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุฎุตุต </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Selenium Server ูู ุฅุทุงุฑ ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ูุฑูู </font><strong><font style="vertical-align: inherit;">FaceBook</font></strong><font style="vertical-align: inherit;"> ุฎุตูุตูุง ูุงุฎุชุจุงุฑ ูุงุฌูุงุช WEB. </font><font style="vertical-align: inherit;">ูุชูุญ ุฅุทุงุฑ ุงูุนูู ูููุทูุฑ ูุญุงูุงุฉ ุฃู ุฅุฌุฑุงุก ูุณุชุฎุฏู ุจุฑูุฌููุง ูู ูุงูุฐุฉ ูุชุตูุญ (ุจุงุณุชุฎุฏุงู </font><b><font style="vertical-align: inherit;">Chrome</font></b><font style="vertical-align: inherit;"> ุฃู </font><b><font style="vertical-align: inherit;">Firefox</font></b><font style="vertical-align: inherit;"> ). </font><b><font style="vertical-align: inherit;">ุฎุงุฏู Selenium Server</font></b><font style="vertical-align: inherit;"> ููููู ููุงุณุชุฎุฏุงู ูุน ุงูุนุฏูุฏ ูู ุงููุบุงุช ููู ูู ุงููุงูุน ุฃุฏุงุฉ ููุงุณูุฉ ููุชุงุจุฉ ุงูุจุฑุงูุฌ ุงููุตูุฉ ููุงุฎุชุจุงุฑ. </font><font style="vertical-align: inherit;">ุฃูุถู ุทุฑููุฉ ููุญุตูู ุนูู ุฅุตุฏุงุฑ ุฌุฏูุฏ ููุงุณุชุฎุฏุงู ูู ุงููุดุฑูุน:</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br> <b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">composer require facebook/webdriver</code> </pre><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูููู ุงูุชูููุฏู ูููุซูู ุงูุฑุฆูุณู ููุงุฆู Server Selenium (RemoteWebDriver) ุจุฏุง ูุทูููุง ุจุงููุณุจุฉ ูู.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// URL- $url = "https://example.com/books/196/empire-v-povest-o-nastoyashem-sverhcheloveke"; // URL,     (Selenium Server) $server = 'http://' . DOCKER_HOST . '/wd/hub'; //   ,      $options = new ChromeOptions(); $options-&gt;addArguments(array( '--disable-notifications' )); //    - $capabilities = DesiredCapabilities::chrome(); $capabilities-&gt;setCapability(ChromeOptions::CAPABILITY, $options); //        5000     URL $driver = RemoteWebDriver::create($server, $capabilities, 5000); $page = $driver-&gt;get($url);</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุจุงูุชุงูู ุ ููุช ุจุชูููู ูู ุฐูู ููููุงู ุ ูุน ุชุญุณูู ุงูุชูููู ูุงุญุชูุงุฌุงุชู: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Process/worker/whoerChecker.php .... class whoerChecker extends nextStepWorker { //    : app/settings.php // URL Selenium Server const SELENIUM_SERVER = CHVM; //  - const DOCKER_NAME = DOCKER_NAME; .... public function config() .... //        : // $driver = RemoteWebDriver::create($server, $capabilities, 5000); $chrome = Chrome::driver( static::SELENIUM_SERVER, Chrome::capabilities(static::DOCKER_NAME, $plugins), 5000 ); .... } ....</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูู ุชุชูุณู ุนูู ุงูููุฑ ุฅูู ุงูุฅุถุงูุงุช $. </font><font style="vertical-align: inherit;">ุงูุฅุถุงูุงุช $ ูู ุจููุฉ ุจูุงูุงุช ูุณุคููุฉ ุนู ุชูููู ุงูุฅุถุงูุงุช. </font><font style="vertical-align: inherit;">ููู ุฏููู ูุงุณุชุจุฏุงู ุงูุนูุงุตุฑ ุงููุงุฆุจุฉ ูู </font><font style="vertical-align: inherit;">ูููุงุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุถุงููุฉ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ูุตู ุงููููู ูู ููู ุงูุชุทุจูู / plugs.php ููู ุฌุฒุก ูู ุงูุชุทุจูู / settings.php ููุฎูุงุฑุงุช ุงูุนุงูุฉ.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/plugs.php const PLUGS = [ 'timeshift' =&gt; [ 'path' =&gt; PROJECTPATH . '/app/chromePlugins/timeShift', 'files' =&gt; ['manifest.json', 'timeshift.js', 'content.js'], 'fields' =&gt; ['%addsminutes' =&gt; 'timeshift'] ], 'proxy' =&gt; [ 'path' =&gt; PROJECTPATH . '/app/chromePlugins/proxy', 'files' =&gt; ['manifest.json', 'background.js'], 'fields' =&gt; [ '%proxy_host' =&gt; 'host', '%proxy_port' =&gt; 'port', '%scheme' =&gt; 'scheme', '%username' =&gt; 'user', '%password' =&gt; 'pass' ] ] ];</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญููู ุงูุตูุญุฉ ุจุงุณุชุฎุฏุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium WebDriver</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุณูุท ููุบุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">.... $url = <span class="hljs-string"><span class="hljs-string">'https://__/_-_'</span></span>; $page = $chrome-&gt;get($url); .... <span class="hljs-comment"><span class="hljs-comment">//   xPath-   $xpath = '/html[1]/body[1]/div[1]/div[1]/div[1]/div[2]/div[1]/div[1]/div[1]/div[1]/strong[1]'; $element = page-&gt;findElement(WebDriverBy::xpath($xpath)); .... //   $text = $element-&gt;getText(); // HTML- $html = $element-&gt;&gt;getAttribute('innerHTML'); ....</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูุชุจุช ุจุงููุนู ุ ูุชู ุชูููุฐ ุฌููุน ูุฐู ุงูุฅุฌุฑุงุกุงุช ูู ุฎูุงู ูุงุฆุฏุฉ ุงูุฎุทูุฉ ุงูุซุงูุซุฉ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฉ 4ุ5ุ6</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br><blockquote style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> // app / src / Process / worker / whoerChecker.php </font></font><br></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฎุชุงู ููุตู ุงูุนูู ูุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุฃูุฏ ุฃู ุฃููุช ุงูุชุจุงููู ุฅูู ุญูููุฉ ุฃูู ุนูุฏ ุงุณุชุฎุฏุงู ูุฐู ุงูุชูููููุฌูุง ุนูู ูุทุงู ุตูุงุนู (ูู 1000 ุฅูู 3000 ุตูุญุฉ) ุ ูุฅูู ูู ุบูุฑ ุงููุฃููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุชูู </font><font style="vertical-align: inherit;">ุฌูุณุฉ ุนูู ูุน </font><b><font style="vertical-align: inherit;">Selenium Server</font></b><font style="vertical-align: inherit;"> ุจุดูู ุบูุฑ ุตุญูุญ. ุงููุงูุฐุฉ ูู ุงููุงูู. ููููู ููุฐู ุงูููุงูุฐ ุชุชุฑุงูู ุงููุซูุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุงููุธุฑ ูู ุนุฏุฉ ุทุฑู ูููุงูุญุฉ "ุงูุฏุจุงุจูุณ". ุงูุนูู "ุฃูู" 2 ุฃูุงู. ุงูุฃูุซุฑ ูุนุงููุฉ ูุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุชุญูู ุงูุชุซุจูุช ุงูุตุญูุญ ูุงูุชูููู ูู ุงูุญุงููุฉ Docker ุฅูู ูููุฉ ูููุตูุฉ ุ ูุตููุง ุจุฏูุฉ ูุจุดูู ุฏููู ุจูุงุณุทุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">renskiy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ููุงูุฉ ุญูู ููููุฉ ุงุณุชุฎุฏุงู cron ุฏุงุฎู ุญุงููุฉ ุนุงูู ูููุงุก"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุงู ูุฎุตุต ููุฐุง </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link"><font style="vertical-align: inherit;">ุงูููุถูุน </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="  ,    cron  docker-"><font style="vertical-align: inherit;">ููุท</font></a><font style="vertical-align: inherit;"> (ูุงูุฐู ููุฌุฆุช ุจู).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ูุตู ุฅุนุงุฏุฉ ุงูุฅูุดุงุก ุงูุชููุงุฆู ูุตูุฑุฉ Docker ุงูุฃุตููุฉ ูุชุซุจูุช ุงูุนุฏูุฏ ูู ุงูุจุฑุงูุฌ ุงููุตูุฉ ูุฅุบูุงู ุงูุฏุจุงุจูุณ ูุชูุธูู ุงูููููุงุช ุงูุฅุถุงููุฉ ุบูุฑ ุงููุณุชุฎุฏูุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ูุตู ููุตู ูุชุซุจูุช ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุฑุณ ูุงูุฅุฑุณุงุก ูู ูุณุชูุฏุน"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูุฏุน</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> docker-compose.yml ุ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="   clicker  docker-  "><font style="vertical-align: inherit;">ูุณุชูุฏุน ุงูุจููุฉ ุงูุชุญุชูุฉ</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุชู ุชุนููู ุชุฑุฏุฏ ุงูุชูุธูู ูู ููู killcron ูู ููุณ ุงููุณุชูุฏุน.</font></font><br><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WebRTC </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ูุฏ ุญุฏุฏูุง ุจุงููุนู ุงูููุช ุงูุตุญูุญ ุ ูุญุฑูุฉ ุงููุฑูุฑ ูู ูุชุตูุญูุง ุชูุฑ ุนุจุฑ ูููู ุ ูุง ูุฒุงู ูู ุงููููู ุงูุชุดุงููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ูุงุฑู ุงูุชูููุช (ุงููุชุตูุญ ูุนููุงู IP) ุ ููุงู ูุตุฏุฑุงู ุขุฎุฑุงู ูุฅุซุจุงุช ูููุฉ "ุงูุฌููุณ ุฎูู ุงููููู". </font><font style="vertical-align: inherit;">ูุฐู ูู </font><font style="vertical-align: inherit;">ุชูููุงุช </font><font style="vertical-align: inherit;">ููุงุด ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebRTC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุถูู ูู ุงููุชุตูุญ. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนุทูู </font><b><font style="vertical-align: inherit;">ุงูููุงุด</font></b><font style="vertical-align: inherit;"> ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุตูุญูุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font><b><font style="vertical-align: inherit;">WebRTC</font></b><font style="vertical-align: inherit;"> ููุณ ูุฐูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุจุจ ูู ูู ุงุญุชูุงูุงุช ุงููุดู ูู ููุณู - </font><font style="vertical-align: inherit;">ุงูุญุฒู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UDP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูู ููุงู ูุฐููุง </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebRTC ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฌุฏ ูุฐุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฐุงู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">3478</font></b><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19302</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅููุงู ุฎุฑูุฌ ุงููุดุงูุฉ ูู ุญุงููุฉ ุงููุฑูู ุ ูุชู ุชุทุจูู ูุงุนุฏุฉ iptables ุนูู ุงูุฌูุงุฒ ุงููุถูู ูุน ุญุงููุงุช ุงูุจููุฉ ุงูุชุญุชูุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">iptables -t raw -I PREROUTING -p udp -m multiport --dports 3478,19302 -j DROP</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณ proxyHelper ุจุชูููุฐ ูุฐู ุงููููุฉ. </font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจููุฉ ุงูุนูุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญููู ุงููุฏู ุจูุฌุงุญ - ุชูููุฐ "ุงูููุฑ" ุนูู ุงููููุน ุงููุฏู ูู ุฎูุงู ูููู ูุฌููู ุ ูุญุชุงุฌ ุฅูู ุนุงูู ุขุฎุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ูุณุฎุฉ ููุทูุนุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoerChecker</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฃุนุชูุฏ ุฃู ุฃูุนู ุฐูู ุจููุฑุฏู ุ ุจุงุณุชุฎุฏุงู ูู ุดูุก ููุชูุจ ุ ูู ูููู ุงูุฃูุฑ ุตุนุจูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฌุฉ ุงูุนูููุฉ ุจุฑูุชูุง ูู ุฏุฎูู ุทุงุจูุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงูุนุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุญุชูู ุนูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู "ุฏุฑุฌุฉ" ูู ุนุฏู ุงููุดู ุนู ูููุชู ูุตุงุฏูุฉ ุนููุงู ุงููููู ุงููููู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ "ุงููุนุจ" ุถุฏ ุงูุนุฏุงุฏุงุช ุ ูุฅู ุงูุดูุก ุงูุฑุฆูุณู ุงูุฐู ูุฌุจ ุชุฐูุฑู ูู ุนุฏู ุงููุดู ุนู ูููุชู ูุนุฏู ุงูููุงู ุจุฒูุงุฑุงุช ุขููุฉ. </font><font style="vertical-align: inherit;">ูุชู ุชูููุฑ ุงูุงูุชุซุงู ููุจุฏุฃ "ูุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุฑุงุช" ูู ุฎูุงู ุฅููุงููุฉ ุชูุธูู ุงูุฅุฌุฑุงุกุงุช ููููุง ูุฌุฏูู ุฒููู ุ ููู ูุถูู ูู </font><i><font style="vertical-align: inherit;">esbTask</font></i><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุง ูู ุฐูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูู </font><font style="vertical-align: inherit;">ูุบูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESB ุงูุฎุงุต</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุง </font><font style="vertical-align: inherit;">).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุญุงููุช ุงูููุงู ุจูู ุดูุก ุจุนูุงูุฉ ุ ูุณูููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุณ ูุงูุฏูุณ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุน ุงููุณุชูุฏู ูุดุงุจููุง </font><b><font style="vertical-align: inherit;">ููุดูู</font></b><font style="vertical-align: inherit;"> ุงูุชุงูู.</font></font><br><br><img src="https://habrastorage.org/webt/es/wn/kk/eswnkk5esmtcunc6xvpn90ndefw.png"><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุฉ ูุถุน ูู ุดูุก ูุนุง </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐูู ุ ุฃุนุทูุช: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ุงูุชู ุชููู ูุงุฏุฑุฉ ุนูู ูุจูู "ููุฏุฎู" (ููุณูุทุฉ ุณุทุฑ ุฃูุงูุฑ) </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esbTask ูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุดูู ุณูุณูุฉ json ูุชูููุฐ ุจุนุถ ุงูููุทู ุ ูุฅุฑุณุงู ุงููุชุงุฆุฌ ุฅูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beanstalkd</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ูุถุน</font></b><font style="vertical-align: inherit;"> ุงูุฑุณุงุฆู ูู </font><b><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงูุชุธุงุฑ</font></b><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุ ุงุณุชูุงุฏูุง ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beanstalkd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุขูุฉ ููููุณ (ุขูุฉ ุนูููุฉ) ุ </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ูุฐุง "ูุนุทู" ุ ุนุงุฏุฉ ูุง ุฃุณุชุฎุฏู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libevent</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React PHP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูู ูุฐุง ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุนุฏูุฏ ูู ุงูุฃุฏูุงุช ุ ูุชูุญ ูู ุงูุชุญูู ูู ุนุฏุฏ ูุซููุงุช ุงููุนุงูุฌ (ุถูู ุงูุญุฏูุฏ ุงููุญุฏุฏุฉ) ููู ูุฑุญูุฉ ูู ูุฑุงุญู ุงูุนูููุฉ ุชููุงุฆููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุจุงููุธุฑ ุฅูู ุญุฌู ุงูููุงู ูุชูุงุตูู ุงูููุถูุน ุ ุณุฃููู ุณุนูุฏูุง ููุตู ูู ูุฐุง ูู ููุงูุฉ ูููุตูุฉ. </font><font style="vertical-align: inherit;">ูุฐู ุงูููุงูุฉ ูู ุชูููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noserver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงูุงุดูุงุก ุงููุณุชูุจููุฉ ูู " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุฏู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ".</font></font><blockquote style=";text-align:right;direction:rtl"><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุชุจุท ุชุงุฑูุฎ ูุดุฑู ุจุงูุชูุงูู ุ ุนุฒูุฒู ุงููุงุฑุฆ.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">      .      , ,โฆ . ,  ,    ,   ,     ,         . <br><br>   <b>habr</b>   ,     . , ,          . <br><br>        .     ,        " <b>server</b> ",       <b>README.md</b>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="   clicker  docker-  "> </a> . </blockquote></div></div></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noserver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุ ุณุชููู ูุซูู ูุงุญุฏ ุจูุนุงูุฌุฉ ูุงุฆูุฉ ุงูุชุธุงุฑ ูุงุญุฏุฉ (ุฎุทูุฉ ุนูููุฉ ูุงุญุฏุฉ). </font><font style="vertical-align: inherit;">ูุฐุง ุงูููุฌ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ุฅูุง ุฃู ุชุบุถุจ ุงูุฃุฑูุงุญ ุงูุชู ุฃุณุชุฎุฏููุง</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุชุตุญูุญ ุงูุฃุฎุทุงุก ููุนูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุนุชูุงุฏูุง ุนูู ุณุฑุนุฉ ุงููุนุงูุฌุฉ ุงูุชู ุชุญุชุงุฌ ุฅูููุง ุ ููููู ุจุฏุก ุชุดุบูู ุงูุนุฏูุฏ ูู ุงููุณุฎ ุงูุชู ุชุฑูุฏูุง "ูุฏูููุง". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ูุจุฏู ูุซู ูุฐุง:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Process/noserver/singleProcess.php //   ,    //   include __DIR__ . '/../../../settings.php'; use App\ESB\pipeNcacheService; use App\arrayNstring\queueDSN; use App\arrayNstring\timeSpent; use App\arrayNstring\progressString; //    $path = __DIR__ . '/../worker'; //   $queues = array_keys(WORKERS); $queue = $argv[1] ?? end($queues); $queue = strtolower($queue); if (!in_array($queue, $queues)) die("php $argv[0] &lt;queue_name&gt;" . PHP_EOL); //  - $progress = new progressString("Listenning... Idle: ", 40, 20); // ,      $stopwatch = timeSpent::start(); //    beanstalkd- list($worker, $task) = WORKERS[$queue]; $procid = ['procid' =&gt; posix_getpid()]; //   beanstalkd  Memcached, //     ( ) $dsn = new queueDSN($task, $queue, ...QUEUE_SERVER); //     ESB- $pnc = new pipeNcacheService($dsn); $pipe = $pnc-&gt;getPipe(); echo "Start listener for queue: $queue." . PHP_EOL; echo "Press Ctrl-C to stop listener." . PHP_EOL; //      //       while (true) { try { $job = $pipe-&gt;watch($queue) -&gt;reserve(1); $now = new DateTime(); $opts = json_encode($pipe-&gt;getPayload($job) + $procid); $pipe-&gt;delete($job); echo PHP_EOL . "Task recived at: " . $now-&gt;format('H:i:s') . " Starting worker: $worker. "; $stopwatch = timeSpent::start(); exec("php $path/$worker $opts", $out); echo "Finished. Time spent: $stopwatch" . PHP_EOL; $stopwatch = timeSpent::start(); } catch (Throwable $exception) { echo $progress($stopwatch('%I:%S', null, $now)); } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุฏุงูุฉ ุงูุบุฑูุจุฉ ููุนุงูู ูููุชุฉ ูููุธุฑ ... ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ูู ุนุงูู ูู ุนูุงุตุฑ PHP ุ ููุฏ ุงุณุชุฎุฏูุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exec (...)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุฐูู ูุชูููุฑ ุงูููุช ุ ุญุชู ูุง ูุชู ุฅูุดุงุก ุนูุงู ูููุตููู ูู " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noserver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุฃู ุนุฏู ุชุบููุฑ ุงูุนุงูู ูุบุฑุถ ุงูุจุฏุก ูู ูุถุน </font><font style="vertical-align: inherit;">" </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ".</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุถุน ูููุงุช ุนู ุงูุชูููู ูุงููุดุฑ </font></font></h2><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุซูุงุจุช ุงูุชูููู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุชูููู ููุซููู ูู </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุจูู / settings.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชู ุฅูุดุงุคู ุจูุงุณุทุชู ููุฑูุง ุจุนุฏ ุงุณุชูุณุงุฎ ุงููุณุชูุฏุน. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุฃุนุฏ ุชุณููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุจูู / settings.php.dist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุชู ูุตู ุฌููุน ุงูุซูุงุจุช ุฏุงุฎููุง. </font></font><br><br> <b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุจูู / settings.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูู ุจูู ุฃุดูุงุก ุฃุฎุฑู ุ ูุชุถูู ูููุงุช ูุน ุงูุซูุงุจุช ุงูุฃุฎุฑู.</font></font><br><blockquote style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">ูุญุชูู </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุจูู / queues.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุฃุณูุงุก ููุงุฆู ุงูุงูุชุธุงุฑ ูุงููุธุงุฆู </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">ูุญุชูู </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุจูู / plugs.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ูุตู </font><font style="vertical-align: inherit;">ูููููุงุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chrome</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุถุงููุฉ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">ูุญุชูู </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุจูู / techs.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุซูุงุจุช ูุญุณูุจุฉ</font></font><br></blockquote><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุฑุงูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูููุฑ ุงูุฑุงุญุฉ ูู ูุนุงูุฌุฉ ูุชุงุฆุฌ ุงูุนูููุฉ ููุถุน ุงูููุงู ุ ููุงู ุงูุนุฏูุฏ ูู ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ. </font><font style="vertical-align: inherit;">ูุชู ุชุดุบูู ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ูู ุณุทุฑ ุงูุฃูุงูุฑ. </font><font style="vertical-align: inherit;">ูุฏูุช ูุน ูุตู ุงูุญุฌุฉ. </font><font style="vertical-align: inherit;">ุชูุน: </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุจูู / src / Utils</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><blockquote style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> backup.php - ูุญูุธ ููุงุฆู ุงูุงูุชุธุงุฑ ุฅูู ููู</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    clear.php - ููุธู ุงูุทูุงุจูุฑ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    export.php - ูุชู ุชุตุฏูุฑู ูู ููู ุจู ูุงุฆูุฉ ุงูุชุธุงุฑ ูุญููุธุฉ </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     ุฃุฒูุงุฌ ุงูุนููุงู: ูููุงุก</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    Givethejob.php - ูุธุงุฆู ุงูููุงู ููุฐู ุงูุนูููุฉ </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     (ุงููุตุฏุฑ - ุงูุนููุงู: ูุฑุจุน ุงูุชุญุฑูุฑ ูุงูุณุฑุฏ ุงููููุฐ).</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     ูููู ุงุณุชุจุนุงุฏ ุจุนุถ ุงูุนูุงููู ูู ุงููุงุฆูุฉ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    restore.php - ุงุณุชุนุงุฏุฉ ูุงุฆูุฉ ุงูุชุธุงุฑ ูุญููุธุฉ </font></font></pre></blockquote><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุตูู ุงูุนูุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุงุณุชุฎุฏุงู ุงูุนุงูููู ุงููุชุงุจููู ุ ูุฏ ูููู ูู ุงูููุงุณุจ ุงุณุชุฎุฏุงู ุฎูุงุฑุงุช ุงูุชูููู ุงูุชุงููุฉ: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Process/worker/curlChecker.php .... $worker = new curlChecker( [ //    curlChecker::WORKER =&gt; 'curlchecker', //  beanstalkd curlChecker::PIPE_HOSTPORT =&gt; implode(':', QUEUE_SERVER), //  Memcached curlChecker::CACHE_HOSTPORT =&gt; implode(':', MEMCACHED), // ,    . //    -   curlChecker::DB_SCRIPT =&gt; __DIR__ . '/../../../confdb.php', // ,       // (        -) curlChecker::INFO_START =&gt; CURL_START, // ,        // (        -) curlChecker::INFO_END =&gt; CURL_END, //  ,     //    //        curlChecker::INFO_ADDS_END =&gt; ['host', 'port'] ], ['setupworker', 'config', 'logic'] ); ....</span></span></code> </pre><br><a name="deploy"></a><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุดุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุฑุถ ุงูุฏููู ุฃู ูุฏูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌูุงุฒูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุช ุชุตุฑูู ูุน ุชุซุจูุช </font><b><font style="vertical-align: inherit;">Ubuntu 18.04</font></b><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุฏ ููุจููุฉ ุงูุชุญุชูุฉ ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุงูู ูููุงุก</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุ ูุงูุขุฎุฑ ููุฑุงูุจุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><b><font style="vertical-align: inherit;">ุนูููุฉ</font></b><font style="vertical-align: inherit;"> ). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุงูู ูููุงุก</font></font></b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    root-. # ,     TCP-: # 11300, 11211, 4444, 5930, 8080, 8081, 8082, 8083 #   . sudo -s apt -y update apt -y install git snap snap install docker apt -y install docker-compose # C       # " root-"    cd ~ git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/esb-infrastructure.git cd esb-infrastructure docker-compose up --build -d #      3     #   . #       web-.</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูููุฉ</font></font></b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      . #   . sudo apt -y update sudo apt -y install git php-common php-cli php-curl php-zip php-memcached composer # C     process-   , #     -  php- cd /var/www git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/clicker-noserver.git cd clicker-noserver composer update #  .       "XXXXXXXX" mv app/settings.php.dist app/settings.php #   . gnome-terminal \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php curl"' \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php timezone"' \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php whoer"' #  . ,     , #  : - log/list.proxy php app/src/Utils/givethejob.php ./log/list.proxy</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุฑ ุ ุดุงูุฏ ูุง ูุญุฏุซ ูู ุฎูุงู ููุญุฉ ุงูููุจ (http: // ip-address-do-doer-machines: 8080). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชููู ุงููุชูุฌุฉ ูุชููุฑุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฌูุฏุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ุงูุฎุชุงู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงููุซูุฑ ููุฏูุดุฉ ุฃู ูุชุงุจุฉ ูุฐู ุงูููุงูุฉ ูุชุญุฑูุฑูุง ุงุณุชุบุฑูุชุง ููุชูุง ุฃุทูู ูู ูุชุงุจุฉ ุงูููุฏ ููุณู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฑุฃูู ูุงู ูููู ุฃู ูููู ุนูู ุงูุนูุณ ูู ุฐูู (ูุงููุฑู ูู ุงูููุช ุงูููุงุณุจ ูููู ุฃู ุชููู ุนุฏุฉ ุฃุถุนุงู)ุ ุฅู ูู ููู ุงุซููู ุงูุฃูุฏููููุฌูุงุช: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุณุงูุฉ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุคุณุณุฉ ุนูู ุฎุฏูุฉ ุงูุญุงููุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฃููู ุณุนูุฏูุง ุฌุฏูุง ุฅุฐุง ูุฌุฏุช ุฃู ุงูููุฌ ุงูููุฏู ููุชุงุจุฉ ุงูุชุทุจููุงุช ูููุฏ ุ ูุฅู ุงูุญูู ุนูู ุฃุฌุฒุงุก ูุฎุชููุฉ ุบูุฑ ูุงุถุญ ูู ูุฑุญูุฉ ุงูุชุตููู.</font></font><br><br>  ุดูุฑุง ูู </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar432038/">https://habr.com/ru/post/ar432038/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar432024/index.html">Gradle 5.0 - ูุง ุงูุฌุฏูุฏ</a></li>
<li><a href="../ar432030/index.html">ุงููุณุงุฑ ุฅูู ูุงุดู ุงููุฐุจ ุจุฏูู ุชูุงูุณ ุ ุฃู ููููุฉ ุชุฑุชูุจ ุงูุงุฎุชุฑุงู ุจุฃูุตู ุณุฑุนุฉ</a></li>
<li><a href="../ar432032/index.html">ููุชูู ูู ุญูู ุจุญุซ ุฌูุฌู ูุณูุฑ</a></li>
<li><a href="../ar432034/index.html">ูุชุงุจ "ุงูููุฑุจุงุก ุฎุทูุฉ ุจุฎุทูุฉ" ูููุฎุฑุฌ ุฑูุฏููู ุณููุฑูู</a></li>
<li><a href="../ar432036/index.html">ูุงูู: ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุฃูุงููุฉ</a></li>
<li><a href="../ar432040/index.html">ุงููุตุงุฏููู + ุงูุฌูุงูุจ: ุชุฎุตูุต ุงูุชุญูู ูู ุงูุตุญุฉ</a></li>
<li><a href="../ar432042/index.html">ูุงูุฏูุณ ููุชุญ ุงูุณุญุงุจุฉ. ููุฏุณุฉ ุงููุธุงู ุงูุฃุณุงุณู ุงูุฌุฏูุฏ</a></li>
<li><a href="../ar432046/index.html">ูุณุงุจูุฉ ูุฃุณ ุจูุงูุงุช ุงูุงุชุตุงูุงุช ุณุฎููุฉ ูุงุฏูุฉ</a></li>
<li><a href="../ar432048/index.html">ููุงุฐุง ูุฒุนุฌ ุฃู ุดุฎุต ุชุนูู ุงููุบุงุช ุบูุฑ ุงููุทููุจุฉุ ุฏุฑุงุณุฉ ุญุงูุฉ ูููุฌุชูุน F #</a></li>
<li><a href="../ar432050/index.html">ูุฑุญุจุง ุจูู ูู ููุฌุงุช Blockchain ูุงูุงุซูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>