<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗝️ ⚒️ 📓 Adaptor blockchain Ethereum untuk platform data IRIS InterSystems 🧓🏿 🍏 🕢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Blockchain 
 Sekarang, ketika saya menulis artikel ini, nilai tukar Bitcoin telah turun lebih dari 5 kali relatif terhadap nilai maksimum dan ketik...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Adaptor blockchain Ethereum untuk platform data IRIS InterSystems</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/439560/"><h4>  1. Blockchain </h4><br>  Sekarang, ketika saya menulis artikel ini, nilai tukar Bitcoin telah turun lebih dari 5 kali relatif terhadap nilai maksimum dan ketika saya mengatakan bahwa saya melakukan sesuatu yang terkait dengan blockchain, hal pertama yang saya dengar adalah skeptisisme terbuka - “siapa yang butuh semua ini blockchain Anda sekarang” . <br><br>  Ya, memang sensasi di sekitar blockchain telah berlalu.  Tetapi teknologi yang mendasari tetap, mereka berkembang dan akan terus berkembang dan digunakan di ceruk tertentu. <a name="habracut"></a>  Di Internet dan khususnya di Habré ada banyak bahan yang menggambarkan kedua area umum aplikasi teknologi (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/company/bitfury/blog/353350</a> dan contoh-contoh lebih spesifik dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/company/raiffeisenbank/blog/332756</a> ). <br><br>  Seperti yang Anda ketahui, blockchain adalah registri terdistribusi, mis.  database yang didistribusikan antara beberapa node sementara setiap node menyimpan salinan lengkap dari registri.  Keunikan dari blockchain adalah bahwa catatan (transaksi) dikelompokkan ke dalam blok, dan blok digabungkan menjadi rantai blok.  Namun, hanya operasi penambahan data yang tersedia.  Semua ini mengarah pada fakta bahwa hampir tidak mungkin untuk melakukan perubahan pada transaksi yang sudah disimpan di blockchain. <br><br>  Ada banyak materi tentang cara kerja blockchain (jika Anda belum pernah mendengar tentang blockchain sebelumnya, maka Anda bisa mulai dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video sederhana ini</a> ). <br><br>  Pada saat gelombang minat maksimum dalam teknologi blockchain, ada banyak panggilan untuk menggunakan blockchain di mana-mana.  Namun, ada tanda-tanda proyek / tugas tertentu, yang implementasinya mungkin memerlukan blockchain. <br><br>  Pertama, partisipasi sejumlah besar pemain (pengguna) yang merekam data, sementara itu perlu untuk mencegah inkonsistensi dan meningkatkan kepercayaan diri. <br><br>  Kedua, tidak adanya pihak ketiga yang dipercaya semua orang. <br><br>  Ketiga, perlunya mekanisme verifikasi data publik. <br>  Jika semua kondisi di atas terpenuhi, Anda perlu berpikir tentang menggunakan blockchain. <br><br>  Tugas-tugas seperti itu dapat muncul dalam industri apa pun.  Proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.101blockchains.com</a> mengumpulkan informasi tentang proyek potensial dan yang diimplementasikan, serta tentang fitur-fitur menggunakan blockchain di berbagai bidang. <br><br>  Misalnya, di sektor kesehatan, blockchain dapat digunakan: <br><br><ul><li>  untuk manajemen data pasien yang aman; </li><li>  untuk memerangi narkoba palsu melalui transaksi tidak berubah-ubah di seluruh rantai pasokan; </li><li>  untuk meningkatkan pemantauan dan efektivitas uji klinis dengan menghilangkan penipuan dan manipulasi data. </li></ul><br>  Saat menggunakan blockchain di segmen korporat, mereka biasanya menggunakan blockchain pribadi dengan berbagai tingkat izin (Private Block diizinkan).  Jaringan tersebut memiliki seperangkat simpul khusus untuk mengonfirmasi transaksi. <br><br>  Namun, ketika mengembangkan adaptor IRIS InterSystems pertama untuk bekerja dengan blockchain, kami memilih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ethereum</a> , yang termasuk dalam kategori Blockchain Permissionless - platform terbuka tanpa badan pengatur.  Pilihan ini dikaitkan dengan popularitas Ethereum dan infrastruktur yang cukup berkembang: kehadiran berbagai alat dan perpustakaan.  Anda juga dapat memperhatikan bahwa menggunakan perangkat lunak Ethereum Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">membuat blockchain pribadi</a> . <br><br><h4>  2. Adaptor </h4><br>  Sekarang saatnya beralih ke adaptor itu sendiri. <br><br>  Adaptor dalam InterSystems IRIS (dan juga dalam Ensemble) adalah kelas atau paket kelas IRIS InterSystems yang menyediakan kemampuan untuk bekerja dengan sistem eksternal.  InterSystems IRIS adapter dibagi menjadi yang masuk (untuk menerima data dari sistem eksternal ketika sistem eksternal adalah inisiator interaksi) dan keluar (untuk bekerja dengan sistem eksternal ketika inisiator interaksi adalah InterSystems IRIS). <br><br>  Adaptor IRIS Ethereum adalah adaptor keluar, dan sedikit berbeda dari sebagian besar adaptor IRIS InterSystems lainnya, karena bagian dari adaptor ini adalah paket kelas IRIS InterSystems, tetapi adaptor juga mencakup modul NodeJS kecil.  Arsitektur ditunjukkan pada Gambar 1. <br><br><img src="https://habrastorage.org/webt/mo/kz/3c/mokz3cufv-4t24zab_oeouy5ef8.png"><br>  <i>Gambar 1</i> <br><br>  Modul adaptor NodeJS menggunakan perpustakaan NodeJS yang ada untuk bekerja dengan Ethereum. <br><br>  Adaptor menyediakan fitur berikut: <br><br><ul><li>  Tempatkan kontrak cerdas di Ethereum (kami berencana untuk menyiapkan artikel lain di mana kami akan berbicara lebih banyak tentang kontrak pintar, alat pengembangan dan membahas contoh). </li><li>  Sebut metode kontrak pintar: kedua metode yang tidak mengubah status blockchain, dan metode yang mengubah status blockchain </li><li>  Menyimpan transaksi (mentransfer dana dari dompet ke dompet) </li><li>  Memanggil metode pembantu untuk mendapatkan status blockchain </li><li>  Mencatat semua permintaan (menjalankan modul NodeJS, berguna untuk debugging) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Adaptor tersedia dengan kode sumber <b>OpenExchange</b></a> . <br><br><h4>  3. Contoh sederhana </h4><br>  Contoh "Hello world" diinstal dengan adaptor. <br><br>  Untuk mulai bekerja dengan Ethereum (termasuk untuk menjalankan contoh ini) Anda perlu: <br><br><ul><li>  Pilih jaringan yang akan Anda gunakan.  Untuk pengembangan, jaringan uji seperti Ropsten biasanya digunakan. </li><li>  Buat dompet di jaringan ini dan isi kembali </li><li>  Instal klien Ethereum lokal (misalnya, Geth) atau dapatkan kunci untuk bekerja dengan penyedia cloud (misalnya, Infura) </li></ul><br>  Saat mengatur transaksi bisnis, Anda harus menentukan (Gambar 2): <br><br><ol><li>  Server dan port tempat modul NodeJS berjalan (port default adalah 3000) </li><li>  Pengaturan penyedia (dalam hal ini, akses ke Infura) </li><li>  Detail akses (dalam detail akses Anda perlu menunjukkan dompet Anda sebagai nama pengguna, kunci pribadi dari dompet sebagai kata sandi. Dalam InterSystems IRIS, detail akses disimpan dalam database terpisah, yang enkripsi harus diaktifkan) </li></ol><br><img src="https://habrastorage.org/webt/ei/kr/bv/eikrbvchchjm5xwkbrfv9qm4olk.png"><br>  <i>Gambar 2</i> <br><br>  Untuk bekerja dengan kontrak pintar, Anda harus membuat (untuk setiap kontrak pintar yang akan Anda hubungi) folder di sistem file dan menempatkan 2 file di sana: <br>  * abi.txt <br>  * bytecode.txt <br><br>  File-file ini harus memiliki kontrak pintar dan Bytecode ABI.  Kontrak pintar ABI - deskripsi formal tentang antarmuka kontrak pintar dalam format json.  ABI dan Bytecode dibuat pada saat kontrak pintar dikompilasi. <br><br>  Bytecode hanya diperlukan untuk menggunakan kontrak. <br><br>  Dengan menggunakan layanan pengujian, Anda dapat memverifikasi operasi transaksi bisnis. <br><br>  Pada Gambar 3, menggunakan layanan tes, kontrak pintar digunakan.  Hasil memanggil operasi bisnis ini adalah pesan yang berisi hash transaksi. <br><br><img src="https://habrastorage.org/webt/it/qm/wk/itqmwkzesdspagy8vxdwh0klpn4.png"><br>  <i>Gambar 3</i> <br><br>  Menggunakan browser ropsten.etherscan.io (https://etherscan.io/), Anda dapat menemukan transaksi ini dan mendapatkan alamat dari kontrak pintar yang ditempatkan. <br><br>  Untuk menjalankan metode kontrak pintar menggunakan adaptor, Anda harus menentukan pengaturan dalam konfigurasi produk: ContractFolder dan ContractAddress. <br><br>  Kode untuk memanggil metode kontrak pintar cukup sederhana: <br><br><pre><code class="go hljs">set ..ContractABI = [].%FromJSON(..ContractFolder_<span class="hljs-string"><span class="hljs-string">"abi.txt"</span></span>) set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) set result = contract.hello() set pResponse = ##class(Ens.StringContainer).%New(result.args)</code> </pre> <br>  Menggunakan metode adaptor GetContract, yang meneruskan alamat kontrak pintar dan ABI, objek kontrak pintar dibuat, yang kemudian digunakan untuk memanggil metode.  Dalam hal ini, metode hello () harus didefinisikan dalam kontrak pintar, yang mengembalikan string. <br><br>  Dalam contoh ini, metode hello () tidak mengubah status blockchain, sehingga dapat dipanggil secara serempak.  Namun, metode yang mengubah status blockchain dapat memakan waktu lama (menunggu konfirmasi transaksi). <br><br>  Untuk memanggil metode seperti itu, Anda dapat menggunakan mekanisme respons yang ditangguhkan di InterSystems IRIS.  Adaptor perlu melewati token yang ditangguhkan dan kemudian, ketika transaksi NodeJS dikonfirmasi, modul akan mengirimkan hasil eksekusi ke IRIS InterSystems.  Untuk melakukan ini, Anda harus mengonfigurasi aplikasi web dan menambahkan transaksi bisnis ke produk yang akan memproses respons yang diterima. <br><br>  Kode untuk memanggil metode yang mengubah status blockchain: <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// getting EthereumAccount(wallet) and privateKey do ##class(Ens.Config.Credentials).GetCredentialsObj(.cred, "Ethereum.Demo.EthereumOperation", "Ens.Config.Credentials", ..Credentials) set account = ##class(Ethereum.Address).%New(cred.Username) set privateKey = cred.Password //reading contract ABI set ..ContractABI = [].%FromJSON(..ContractFolder_"abi.txt") // get contract object set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) $$$ThrowOnError(..DeferResponse(.deferred)) // estimate gas do contract.SetOptions(account) set gasJSON = contract.EstimateGas("setName",pRequest.Name) $$$TRACE(gasJSON.gas) do contract.SetOptions(account, privateKey, ##class(Ethereum.Wei).%New(1000000000), ##class(Ethereum.Wei).%New(100*gasJSON.gas),,deferred) set result = contract.setName(pRequest.Name)</span></span></code> </pre> <br>  Dalam hal ini, sebelum memanggil metode kontrak pintar setName (), Anda perlu menentukan sejumlah parameter, termasuk token respons tertunda. <br><br>  Pada artikel kami berikutnya, kami akan berbicara lebih banyak tentang kontrak pintar dan memberikan contoh penyelesaian aplikasi menggunakan adaptor Interisystem IRIS Ethereum. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id439560/">https://habr.com/ru/post/id439560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id439546/index.html">Apakah Android memimpikan punk listrik? Bagaimana saya mengajar jaringan saraf untuk menulis musik</a></li>
<li><a href="../id439550/index.html">Hackquest 2018. Hasil & Tulisan. Hari 1-3</a></li>
<li><a href="../id439552/index.html">Ekstensi Chrome berbahaya</a></li>
<li><a href="../id439556/index.html">TDMS Fairway. Metodologi PMBOK dan organisasi desain Rusia</a></li>
<li><a href="../id439558/index.html">Telepon lama baru. Temukan kembali telepon PSTN</a></li>
<li><a href="../id439562/index.html">Konfigurasikan kluster Kubernetes HA pada logam kosong dengan kubeadm. Bagian 1/3</a></li>
<li><a href="../id439564/index.html">Aplikasi Praktis Transformasi Pohon AST Menggunakan Putout sebagai Contoh</a></li>
<li><a href="../id439566/index.html">Mengapa dokumentasi SRE penting? Bagian 3</a></li>
<li><a href="../id439568/index.html">SSD berbasis QLC - pembunuh hard drive? Tidak juga</a></li>
<li><a href="../id439570/index.html">IPython magic untuk mengedit tag sel Jupyter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>