<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ง๐ผ ๐จ๐พโ๐ B + ุดุฌุฑุฉ ูู ูุดุฑูุน ุญูููู ๐ฐ โ๏ธ ๐ค</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ูุฐู ุงูููุงูุฉ ุ ุณูููู ูุธุฑุฉ ููุตูุฉ ุนูู ููููุฉ ุนูู ุดุฌุฑุฉ B + ูู ูุงุนุฏุฉ ุจูุงูุงุช Apache Ignite ุงูููุฒุนุฉ. 




 ููุงู ุจุงููุนู ููุงูุชุงู ุนู ุงูุฃุดุฌุงุฑ H ุนูู ุงูุฃุดุฌุงุฑ B (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>B + ุดุฌุฑุฉ ูู ูุดุฑูุน ุญูููู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/413749/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูููุงูุฉ ุ ุณูููู ูุธุฑุฉ ููุตูุฉ ุนูู ููููุฉ ุนูู ุดุฌุฑุฉ B + ูู ูุงุนุฏุฉ ุจูุงูุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Apache Ignite</a> ุงูููุฒุนุฉ. <br></p><br><img src="https://habrastorage.org/webt/mv/_t/zg/mv_tzg1o-c96a2ib19cf9umv67u.jpeg"><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ููุงู ุจุงููุนู ููุงูุชุงู ุนู ุงูุฃุดุฌุงุฑ H ุนูู ุงูุฃุดุฌุงุฑ B ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุญุฏุฉ</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุซูุชุงู</a> ) ุ ูููู ูู ุงููุฑุฌุญ ุฃู ุชููู ูุธุฑูุฉ ูุญุชู ุฅุฐุง ูุงูุช ุชุญุชูู ุนูู ุชูููุฐ ุ ููู ููุณุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌุงูุฒุฉ ููุฅูุชุงุฌ</a> .  ูู ูุฐุง ููุงู ุงูุชูุงู ุจุงููุธุฑ ุฅูู ุงูุชุทุจูู ุงููุณุชุฎุฏู ูู ุงูุญูุงุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุจู ูุฑุงุกุฉ ุงูููุงูุฉ ุฃูุซุฑ ุ ุฃูุตุญู ุจูุดุงูุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุงุถุฑุฉ ูููุณูู ุจุงุจูููู</a> ุ ุฅุฐุง ููุช ูุง ุชุฒุงู ูุง ุชุนุฑู ูุง ูู ุดุฌุฑุฉ B ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ.  ููููู ูุณุช ุจุญุงุฌุฉ ุฅูู ูุนุฑูุฉ ุฌุงูุง ุจุนูู ุฃู ูุดุฑูุน Apache Ignite - ุฅูุง ุฃู ุฃูุชุจ ุงูุชูุงุตูู ุจุดูู ุตุฑูุญ ุฃู ุฃุฎูููุง ุชุญุช ุงููุฎุฑุจูู. </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ูุฑุงุกุฉ ูุตุงุฏุฑ Ignite ุ ุฃูุตุญู ุจุชุฎุทู ุญุฌุฌ ุงูุฃุณุงููุจ ูู ุนููู ุ ูุงูุชู ูุง ูููู ูุนูุงูุง ูุงุถุญูุง ุชูุงููุง ููุฑุงุกุฉ ุฃุณูุงุก ุงููุธุงุฆู - ูู ุงูุฃุณูู ุจูุซูุฑ ูุฑุงุกุฉ ูุต ุงููุธููุฉ ุฅุฐุง ููุช ุชุนุฑู ูุณุจููุง ูุง ุชูุนูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฑุฌู ููุงุญุธุฉ ุฃููู ูุณุช ุงููุทูุฑ ุงูุฑุฆูุณู ูู Apache Ignite ููููู ุฃู ุฃุณูุก ููู ุดูุก ูู ุงูุฑูุฒ.  ูุฐุง ุ ุฃุถุน ุนุจุงุฑุฉ "ุจูุฏุฑ ูุง ุฃููู" ุ ูุงูุชู ูุฌุจ ุฅุถุงูุชูุง ุฐููููุง ูุจู ูู ุฌููุฉ ุฅูุฌุงุจูุฉ. </p><br><h1 id="zachem-b-derevo-v-apache-ignite" style=";text-align:right;direction:rtl">  ููุงุฐุง ุดุฌุฑุฉ B + ูู Apache Ignite </h1><br><p style=";text-align:right;direction:rtl"> Apache Ignite ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฏุงุฎู ุงูุฐุงูุฑุฉ ุ ูููู ููุฐ ุงูุฅุตุฏุงุฑ 2.1 ูุญุชูู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฎุฒู ุจูุงูุงุช ุฏุงุฆู</a> - ููู ูุธููุฉ ูุญูุธ ุงูุจูุงูุงุช ุนูู ุงููุฑุต <em>(ูุง ุนูุงูุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุจููุฉ ุงูุจูุงูุงุช ุงููุณุชูุฑุฉ</a> )</em> .  ูุฐูู ุ ูู ุงููุงุถุญ ููุงุฐุง ููุงู ุญุงุฌุฉ ุฅูู ุจููุฉ ููุฐุงูุฑุฉ ุงูุฎุงุฑุฌูุฉ ุ ูุจูู ููู ููุงุฐุง ูู ูุฎุชุงุฑูุง ุจููุฉ ุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุฅู ุดุฌุฑุฉ B + ูู ุชุญุณูู ููุดุฌุฑุฉ B ุ ุญูุซ ูุชู ุชุฎุฒูู ุงูููู ููุท ูู ุงูุฃูุฑุงู.  ูู ูุฐุง ุงูุชุญุณูู ุ ูุชู ุงุญุชูุงุก ุงููุฒูุฏ ูู ุงูููุงุชูุญ ูู ุงูุนูุฏุฉ ุ ููุง ูุฒูุฏ ูู ุฏุฑุฌุฉ ุงูุชูุฑุน.  ูุฐูู ุ ููุณ ููุงู ุงููุซูุฑ ูู ุงูุฃุณุจุงุจ ูุงุณุชุฎุฏุงู ุดุฌุฑุฉ B ุงูููุงุณูููุฉ. </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">B *</a> ู B + * - ุฃูุซุฑ ูุซุงูุฉ ุนูู ุงููุฑุต ุ ูููู ุฃุฏุงุกููุง ุฃุณูุฃ ุ ูุฃู  ูููู ุจุชุฎุฒูู ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ูุงูุฃุฏุงุก ุฃูุซุฑ ุฃูููุฉ ุจุงููุณุจุฉ ููุง. </p><br><p style=";text-align:right;direction:rtl">  ุงุณุชูุงุฏูุง ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุนุงููุฑ ุ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนุฏ ุดุฌุฑุฉ LSM</a> ุฃุณุฑุน ูู ุงููุชุงุจุฉ ุ ูููููุง ุฃุจุทุฃ ูู ุงููุฑุงุกุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅู ุงูุฎุณุงุฑุฉ ูู ุงููุฑุงุกุฉ ุฃูุจุฑ ูู ุงูููุชุณุจ ูู ุงููุชุงุจุฉ ุ ูุฐูู ุจุงููุณุจุฉ ููุญุงูุฉ ุงูุนุงูุฉ ุงูุงูุชุฑุงุถูุฉ ุ ุฃูุฏ ุฃูุถูุง ุฃู ุขุฎุฐ ุดุฌุฑุฉ B +. </p><br><p style=";text-align:right;direction:rtl">  ููุงู ุฃูุถูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุดุฌุงุฑ ูุณูุฑูุฉ</a> ุบุฑูุจุฉ ุ ููุน ุฐูู ุ ุนูู ูุง ูุจุฏู ุ ูุชู ุชุณุฌูู ุจุฑุงุกุงุช ุงูุงุฎุชุฑุงุน ูุชูููุฐูุง ููุท ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TokuDB</a> . </p><br><p style=";text-align:right;direction:rtl">  ุฃูุง ุดุฎุตูุงู ููุชู ุฃูุซุฑ ููุงุฐุง ูุงู ูู ุงููุณุชุญูู ุฃุฎุฐ ุฎูููุฉ ูุฑุต ุฌุงูุฒุฉ ุ ูุซู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">LevelDB</a> ุ  ุงูุฅุฌุงุจุฉ ุงูุฌุฒุฆูุฉ ูู ุฃู PDS ูุฏุนู ุงูุชุฎุฒูู ูู ุฌูุฉ ุฎุงุฑุฌูุฉ. </p><br><h1 id="realizaciya-v-krupnuyu-kletku" style=";text-align:right;direction:rtl">  ุชูููุฐ ุงูุฎููุฉ ุงููุจูุฑุฉ </h1><br><p style=";text-align:right;direction:rtl"> ูู ุงูุจุฏุงูุฉ ุ ุทูุฑุช GridGain Apache Ignite ุ ูููู ูุจู ุงููุบุงุฏุฑุฉ ุฅูู ุงููุตุฏุฑ ุงูููุชูุญ ุ ุชุญูู ุงุณู ุงูุดุฑูุฉ ุ ูุฐูู ุชุจุฏุฃ ุจุนุถ ุฃุณูุงุก ุงูููููุงุช ุจู <code>Grid</code> ูุฃุฎุฑู ูุน <code>Ignite</code> .  ูุฐูู <code>GridCursor</code> ุ ููู <code>IgniteTree</code> .  ูุง ููุฌุฏ ููุทู ุขุฎุฑ ููุง. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ูุชุงุจุฉ ููุฏ Apache Ignite ูู ุฃููุงุท ุฃูุถู ููุงุฑุณุงุช Java ุ ููู ูุฆุฉ ุชุฑุซ ูุงุฌูุฉ ุ ุฅู ูู ุชูู ูุงุญุฏุฉ.  ูู ูุงุฌูุฉ <code>IgniteTree</code> ูุงุจุฏุฃ ุงูุฑูุต.  ุฃุนุทู ุงูุฑูุฒ ุจุฏูู javadoc ุ ุจุงุฎุชุตุงุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IgniteTree</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">L</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">put</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T val)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L key, Object x, InvokeClosure&lt;T&gt; c)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findOne</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L key)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GridCursor&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L lower, L upper)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GridCursor&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L lower, L upper, Object x)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findFirst</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findLast</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L key)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvokeClosure</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Nullable T row)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException</span></span>; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newRow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">OperationType </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">operationType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> OperationType { NOOP, REMOVE, PUT } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุตู ูุงุฌูุฉ <code>IgniteTree</code> ูุฌููุนุฉ ููุงุณูุฉ ูู ุงูุนูููุงุช.  ูุฑุฌู ููุงุญุธุฉ ุฃู ุงูุจุญุซ ูู ุงููุทุงู ูุชุทูุจ ููู ุฑุจุท ุงูุฃูุฑุงู ูู ูุงุฆูุฉ.  ุชุฏุนู ุงูููุงูุฃุฉ ุนูููุฉ ุชุณุฌูู ุชุนุณููุฉ - <code>invoke</code> . </p><br><p style=";text-align:right;direction:rtl">  ุชุฃุฎุฐ ุนูููุฉ ุงููุถุน ูุณูุทุฉ ูุงุญุฏุฉ ููุท ูู ุงูููุน <code>T</code> ุจุฏูู ููุชุงุญ.  ูู ุชุฌุฏ ุชูุณูุฑูุง ูุฐูู ูู <code>IgniteTree</code> ุ ูููู ุงูุฅุฌุงุจุฉ ูุฎููุฉ ูู ุฑุฃุณ <code>BPlusTree</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BPlusTree</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">L</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">L</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataStructure</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IgniteTree</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">L</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑู ุ ุงููููุฉ ุชุฑุซ ุงูููุชุงุญ ุ ูุจุงูุชุงูู ุ ูู ุนูููุฉ ุงูุจูุน ุ ูุชู ุญุณุงุจ ุงูููุชุงุญ ูู ุงููููุฉ.  ูุฐุง ูุง ูุญุฏ ูู ูุธุงุฆู ุงูุดุฌุฑุฉ.  ุฃูุชุฑุถ ุฃูู ุฃูุซุฑ ุฅุญูุงูุง ูุชุฎุฒูู ุงููุฌููุนุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุนุงุฏุฉ ูุง ูุตูุนูู ุฎุฑูุทุฉ ูู ุฎูุงู ุฑุจุท ุซุงุจุช ุงูููุงูุฉ ุจุงููููุฉ.  ููุน ุฐูู ุ ูู ุดุฌุฑุฉ B + ุ <em>ูุชู</em> ุชุฎุฒูู <em>ุงูููุงุชูุญ ููุท</em> ูู ุงูุนูุฏ ุ ุฅุฐุง ูุงูุช ุงููููุฉ ุชุฎุฒู ุงูููุชุงุญ ุฃูุถูุง ุ ูุนูุฏูุง ูู ุงูุฃูุฑุงู ูููู ุชุฎุฒูู <em>ุงูููู ููุท</em> .  ูุฅุฐุง ูุงูุช ุงูุดุฌุฑุฉ ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ุ ูุนูุฏุฆุฐู ูุชุถุญ ุชููุงุฆููุง ุฃูู ูู ุงูุฃูุฑุงู ุณูููู ููุงู ููุงุชูุญ ููุท ุจุฏูู ููู ุงูููุงูุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/gk/5a/mj/gk5amjeohtkej5assnsgyy791p4.png"></p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุฑูุฒ ุจุญุซ ุงูุนูุตุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> g Get. * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> IgniteCheckedException If failed. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doFind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Get g)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (;;) { <span class="hljs-comment"><span class="hljs-comment">// Go down with retries. g.init(); switch (findDown(g, g.rootId, 0L, g.rootLvl)) { case RETRY: case RETRY_ROOT: checkInterrupted(); continue; default: return; } } } /** * @param g Get. * @param pageId Page ID. * @param fwdId Expected forward page ID. * @param lvl Level. * @return Result code. * @throws IgniteCheckedException If failed. */ private Result findDown(final Get g, final long pageId, final long fwdId, final int lvl) throws IgniteCheckedException { long page = acquirePage(pageId); try { for (;;) { // Init args. g.pageId = pageId; g.fwdId = fwdId; Result res = read(pageId, page, search, g, lvl, RETRY); switch (res) { case GO_DOWN: case GO_DOWN_X: assert g.pageId != pageId; assert g.fwdId != fwdId || fwdId == 0; // Go down recursively. res = findDown(g, g.pageId, g.fwdId, lvl - 1); switch (res) { case RETRY: checkInterrupted(); continue; // The child page got split, need to reread our page. default: return res; } case NOT_FOUND: assert lvl == 0 : lvl; g.row = null; // Mark not found result. return res; default: return res; } } } finally { if (g.canRelease(pageId, lvl)) releasePage(pageId, page); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจูู ุฃุณุงุณ ุฎูุงุฑุฒููุฉ ุงุฌุชูุงุฒ ุดุฌุฑุฉ B ุฏูู ุชุบููุฑ: ููุฒููู ุงูุดุฌุฑุฉ ุจุดูู ูุชูุฑุฑ ุฅูู ุงููุฑูุฉ ุงููุทููุจุฉ: ุฅุฐุง ูุงูุช ุงููููุฉ ููุฌูุฏุฉ ุ ูุฅููู ูุนูุฏูู ุงููุชูุฌุฉ ุ ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููุง ูููุฉ ููุง.  ูุจุฏู ุฃู ุงูุนูุฏูุฉ ุชุฑูุช ููุฑุงุญุฉ ุ ุนูู ุฃู ุญุงู ุ ูุฅู ุฃุดุฌุงุฑ B ููุณุช ุนูููุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tc/g3/0t/tcg30to_z-6fcrfegjfulubh0gq.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ููุฏ ููุฌุฆุช ูุฃูู ูุงู ููุงู ุชุซุจูุช ูุงุถุญ ูู ุฑุฃุณู: ุชุชู ุฅุฒุงูุฉ ุงูุนูุฏูุฉ ุฏุงุฆููุง ูู ูุดุฑูุน ุญูููู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง ููุฌุฏ ุชุญุณูู ุนุงุฆุฏ ุงูุฐูู ูู Java</a> ุ ุงูุนูุฏูุฉ ููุจููุฉ ูู ุงููุดุงุฑูุน ุจูุบุงุช ุฃุฎุฑู).  ูููู ูู ุงูุญูููุฉ ุ ูุชู ููุงุณ ุงุฑุชูุงุน ุดุฌุฑุฉ B ุจูุญุฏุงุช ุ ูุฃู ุญุฌู ูุชูุฉ ุงูุฃูุฑ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>10</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-30" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>10</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-1"> 2 ^ {10} </script>  ุ ูุนุฏุฏ ุจูุงูุงุช ุงูุทูุจ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>40</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-34"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-30" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>40</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-2"> 2 ^ {40} </script>  ูุณูููู ุงูุงุฑุชูุงุน <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>40</mn></mrow></msup><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>10</mn></mrow></msup><mo stretchy=&quot;false&quot;>)</mo></mrow><mo>=</mo><mn>4</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="24.975ex" height="2.901ex" viewBox="0 -935.7 10753.2 1249" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-6F" x="298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-67" x="784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-28" x="1264" y="0"></use><g transform="translate(1654,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-34"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-30" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-29" x="2962" y="0"></use></g><g transform="translate(5566,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-6F" x="298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMATHI-67" x="784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-28" x="1264" y="0"></use><g transform="translate(1654,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-30" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-29" x="2962" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-3D" x="9196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/company/sberbank/blog/413749/&amp;usg=ALkJrhiG23QOnhjn7LbIdc_N9Wz-Cz7PvA#MJMAIN-34" x="10252" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>40</mn></mrow></msup><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>10</mn></mrow></msup><mo stretchy="false">)</mo></mrow><mo>=</mo><mn>4</mn></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ frac {log (2 ^ {40})} {log (2 ^ {10})} = 4 </script>  . </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุจ</a> Apache Ignite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุฒุงูู</a> .  ูุฐูู ุ ุชุฏุนู ุงูุดุฌุฑุฉ ุงูุชุนุฏูู ุงูุชูุงูุณู.  ูู ููุช ุงูุนูููุฉ ุ ูุชู ุญุธุฑ ุตูุญุฉ ูุงุญุฏุฉ ุ ูููู ูุฏ ูููู ูุคุดุฑ ุชุฑุงุจุท ุขุฎุฑ ุจุชุนุฏูู ุจุงูู ุงูุดุฌุฑุฉ ุจุญูุซ ุชููู ุงููุฑุงุกุฉ ุงูุซุงููุฉ ูุทููุจุฉ.  ูุจุงูุชุงูู ูููู ุฃู ูุตู ุงูุฅุฌุฑุงุก ุฅูู ุงูุฌุฐุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ุ ูู ุฃููู ูุนูู ูุฐู ุงููุธููุฉ ุ ูุฃู ุงููุฑุต ุจุทูุก ูุณูุนูู ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ุนูู ูุนุงูุฌุฉ ุฌููุน ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุจูุฏูุก.  ูู ุงููุงุถุญ ุฃู ุงูุจุญุซ ูู ุงูุนูุฏุฉ ุงูุชู ุชู ุชุญููููุง ูู ุงููุฑุต ูููู ููููุงู ุ ูุฎูุงู ูุฐุง ุงูููุช ููููู ุชุญููู ุงููุฑุต ุจุนูููุฉ ุฃุฎุฑู ุ ููู ุงููุญุงููุงุช ุงููุชูุฑุฑุฉ ุณุชุณุชููู ุงูููุณุจ.  ููุน ุฐูู ุ ูุฌุฑุน ูู ุฃูู ูู ูุฐุง ุงูุชุทุจูู ูู ูุชู ุฏูุน ุงูุนูุฏ ุนูู ุงูููุฑ ุฅูู ุงููุฑุต ุจุนุฏ ุงูุชุนุฏูู ุ ููููุง ูุงูุช ูุนููุฉ ูู ุงูุฐุงูุฑุฉ ููุชุฑุฉ ูู ุงูููุช ุ ูู ุฃุฌู ุชุทุจูู ุงูุนุฏูุฏ ูู ุงูุชุนุฏููุงุช ุนูู ุงูููุฑ.  ูุง ุชุถูุน ุงูุจูุงูุงุช ุจูุถู ูุชุงุจุฉ Ahead Log.  ุงููุฒูุฏ ุนู ุฐูู ุณูููู ูู ููุงูุฉ ุงูููุงู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนูุง ูุฑู ุงูุฑูุฒ ูุฅุถุงูุฉ ุนูุตุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doPut</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T row, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> needOld)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException </span></span>{ checkDestroyed(); Put p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Put(row, needOld); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (;;) { <span class="hljs-comment"><span class="hljs-comment">// Go down with retries. p.init(); Result res = putDown(p, p.rootId, 0L, p.rootLvl); switch (res) { case RETRY: case RETRY_ROOT: checkInterrupted(); continue; case FOUND: // We may need to insert split key into upper level here. if (!p.isFinished()) { // It must be impossible to have an insert higher than the current root, // because we are making decision about creating new root while keeping // write lock on current root, so it can't concurrently change. assert p.btmLvl &lt;= getRootLevel(); checkInterrupted(); continue; } return p.oldRow; default: throw new IllegalStateException("Result: " + res); } } } catch (IgniteCheckedException e) { throw new IgniteCheckedException("Runtime failure on row: " + row, e); } catch (RuntimeException e) { throw new IgniteException("Runtime failure on row: " + row, e); } catch (AssertionError e) { throw new AssertionError("Assertion error on row: " + row, e); } finally { checkDestroyed(); } } /** * @param p Put. * @param pageId Page ID. * @param fwdId Expected forward page ID. * @param lvl Level. * @return Result code. * @throws IgniteCheckedException If failed. */ private Result putDown(final Put p, final long pageId, final long fwdId, final int lvl) throws IgniteCheckedException { assert lvl &gt;= 0 : lvl; final long page = acquirePage(pageId); try { for (;;) { // Init args. p.pageId = pageId; p.fwdId = fwdId; Result res = read(pageId, page, search, p, lvl, RETRY); switch (res) { case GO_DOWN: case GO_DOWN_X: assert lvl &gt; 0 : lvl; assert p.pageId != pageId; assert p.fwdId != fwdId || fwdId == 0; res = p.tryReplaceInner(pageId, page, fwdId, lvl); if (res != RETRY) // Go down recursively. res = putDown(p, p.pageId, p.fwdId, lvl - 1); if (res == RETRY_ROOT || p.isFinished()) return res; if (res == RETRY) checkInterrupted(); continue; // We have to insert split row to this level or it is a retry. case FOUND: // Do replace. assert lvl == 0 : "This replace can happen only at the bottom level."; return p.tryReplace(pageId, page, fwdId, lvl); case NOT_FOUND: // Do insert. assert lvl == p.btmLvl : "must insert at the bottom level"; assert p.needReplaceInner == FALSE : p.needReplaceInner + " " + lvl; return p.tryInsert(pageId, page, fwdId, lvl); default: return res; } } } finally { if (p.canRelease(pageId, lvl)) releasePage(pageId, page); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงููุฑู ุงููุญูุฏ ูู ุฃูู ุจุนุฏ ุงูุชุดุงู ุงูููุถุน ุ ูุชุญูู ุงูุฑูุฒ ุฅูู <code>replace</code> <code>insert</code> .  ูู ูุนุฏ ุจุงูุฅููุงู ูุดุงูุฏุฉ ุฑูุฒ <code>remove</code> .  ุงูุขููุฉ ุงูุฃุณุงุณูุฉ ูู ุฃูู ูุน ุงููุญุงููุงุช ุงููุชูุฑุฑุฉ ููุณูุฑ ุจุดูู ูุชูุฑุฑ ูู ุฎูุงู ุงูุดุฌุฑุฉ ูุน ูุงุฆู ุฎุงุต ุงุนุชูุงุฏูุง ุนูู ุงูุนูููุฉ: <code>Get</code> ุฃู <code>Put</code> ุฃู <code>Remove</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุนูู <code>Invoke</code> ุจููุณ ุงูุทุฑููุฉ ุ ุชุชู ุงูุนูููุฉ ููุท ูุน ูุณุฎุฉ ูู ุงูุณุฌู ุ ุซู ูุชู ุชุญุฏูุฏ ููุนู: <code>NOOP</code> ูููุฑุงุกุฉ ุ <code>REMOVE</code> ู <code>PUT</code> ููุชุญุฏูุซ ุฃู ุงูุฅุถุงูุฉ ุ ุซู ูุชู ุฅูุดุงุก ูุงุฆู <code>Put</code> ุฃู <code>Remove</code> ุงูููุงุจู ุ ูุงูุฐู ูุชู ุชุทุจููู ุนูู ุงูุณุฌู ูู ุงูุดุฌุฑุฉ. </p><br><h1 id="ispolzovanie" style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู </h1><br><p style=";text-align:right;direction:rtl">  ุฃุฏูุงู ุณูู ุฃููู ูุธุฑุฉ ูุงุญุตุฉ ุนูู ุงุซููู ูู <code>BPlusTree</code> : <code>CacheDataTree</code> ู <code>PendingEntriesTree</code> .  Overboard ูู ุชูููุฐ ุงูููุงุฑุณ - ูุฐุง ููุถูุน ูููุงูุดุฉ ูููุตูุฉ ุ ูุณุช ุนูู ุงุณุชุนุฏุงุฏ ุจุนุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูุจู ุงูุงูุชูุงู ุ <code>IgniteCache</code> ุฃู ุงูุฎุฑูุทุฉ ุงูููุฒุนุฉ ุงููุญููุฉ ููุง ูุธุงุฆู <code>IgniteCache</code> ูุชุณูู <code>IgniteCache</code> - ูููุง ููู ุจุจุณุงุทุฉ ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช. </p><br><h2 id="cachedatatree" style=";text-align:right;direction:rtl"> <code>CacheDataTree</code> </h2> <br><p style=";text-align:right;direction:rtl">  <code>CacheDataTree</code> ุชุนููู <code>IgniteCache</code> ุฅูู ุงููุฑุต.  ุงููุฑุฒ ูุชุนุฏุฏ ุงููุณุชููุงุช: ุฃููุงู ุงููุฑุฒ ุญุณุจ ูุนุฑู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฅูู ููุงุชูุญ ุงููุฌููุนุฉ ูู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ูุงุญุฏุฉ ุ ุซู ุญุณุจ ุงูุชุฌุฒุฆุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุง ุชุชูุฑุฑ <code>CacheDataTree</code> ุนุจุฑ ุงููุทุงู ุ ุญูุซ ูุชู ุชูููุฐ ุงูููุงุฑุณ ูู ุฎูู <code>H2Tree extends BPlusTree</code> ุ ูุจุงูุชุงูู ุ ูุฅู ุงูููุน ุงููุญุฏุฏ ูู ุงููุฑุฒ ููุณ ููููุง: ุฃููุง ูุง ูููู <code>put</code> ูุชูููุฐ ุงูุนูููุงุช.  ููุงุฑูุฉ ุงูุชุฌุฒุฆุฉ ูู ุฃุณุฑุน ูู ุงูุฃุดูุงุก.  ูููู ุงูุฃูู ูู ุฐูู ุ ุฃู ุงูุชุฌุฒุฆุฉ ุงูููุญุฏุฉ ุณุชููุฃ ุงูุดุฌุฑุฉ ุจูุซุงูุฉ ุฃูุจุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุชุชูุงุฒู ุงูุฃุดุฌุงุฑ ุจุญูุซ ูุง ุชุชุญูู ุฅูู ูุงุฆูุฉ.  ูููู ุฅุฐุง ููุช ุจุฅุถุงูุฉ ููุงุชูุญ ููุฒุนุฉ ุจุงูุชุณุงูู ุฅูู ุดุฌุฑุฉ ุงูุจุญุซ ุ ูุณุชุชู ููุงุฒูุชูุง ุชููุงุฆููุง.  ูุธุฑูุง ูุฃู ุงูุฃุดุฌุงุฑ B ุชุจุฏุฃ ูู ุงูููุงุฒูุฉ ูุน ุธููุฑ ุงููุดุงูู ุ ูุชุฎูุท ุชุฌุฒุฆุงุช ุงูููุงุชูุญ ุจุงูุชุณุงูู ุ ูุฅู ุงููุฑุฒ ุญุณุจ ุงูุชุฌุฒุฆุฉ ูููู ูู ูุชูุฑุฉ ุงูููุงุฒูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅู ุงุณุชุฎุฏุงู ุงูุชุฌุฒุฆุฉ ูู ุดุฌุฑุฉ ุงูุจุญุซ ููุณ ููุฑุฉ ุบุฑูุจุฉ ููุง ูุจุฏู ุ ูุฅู ุชุทููุฑูุง ุงูููุทูู ุณูุคุฏู ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุตููู Hash ุชุนูููู</a> . </p><br><h2 id="pendingentriestree" style=";text-align:right;direction:rtl"> <code>PendingEntriesTree</code> </h2> <br><p style=";text-align:right;direction:rtl">  ูุฎุฒู <code>PendingEntriesTree</code> ุงูููุงุชูุญ ููุจูุงูุงุช ุจูุฑูุฑ ุงูููุช ููุชู ุงุณุชุฎุฏุงูู ููุฌููุนุฉ.  ุงููุฑุฒ ูุชุนุฏุฏ ุงููุณุชููุงุช: ูุชู ุงููุฑุฒ ุฃููุงู ุญุณุจ ูุนุฑู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฅูู ููุงุชูุญ ุงููุฌููุนุฉ ูู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ูุงุญุฏุฉ ุ ุซู ุญุณุจ ุงูุนูุฑ.  ุงูุชุงูู ูู ุฌููุฉ ุฃุฎุฑู ูู ุงูููุงุฑูุฉ - ุนูู ูุง ูุจุฏู ุ ุชูููุฉ ุจุญุชุฉ ุ ููุชูููุฒ ุจูู ุงูุนูุงุตุฑ.  ูู ุงููุฑุฒ ุ ูู ุงูุณูู ุชุฎููู ุฃู ูุฐุง ุงููุตู ูุณุชุฎุฏู ููุจุญุซ ุนู ุงููุทุงูุงุช.  ุชููู ูุฐู ุงูุดุฌุฑุฉ ุจุชูุฑุงุฑ ููุงุชูุญ ุฅุฏุฎุงู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุงุณุชุจุงู. </p><br><p style=";text-align:right;direction:rtl">  ุงููู ููู ุชุนูู ูุฐู ุงููุบุงูุฑุฉ ุงููููุตูุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุบุงูุฑุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูู <code>IgniteCacheOffheapManagerImpl.expire()</code> ุฎุฐ ุงููุคุดุฑ ูุญุฐู ุงูุฅุฏุฎุงูุงุช ูู <code>PendingEntriesTree</code> .  ูุชู ุญุฐู ุงูุฅุฏุฎุงูุงุช ูู <code>CacheDataTree</code> ูู ุงูุฅุบูุงู <code>c</code> ุ ุงูุฐู ูุชู ุชูุฑูุฑู ูู ุงููุนููุงุช. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">expire</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( GridCacheContext cctx, IgniteInClosure2X&lt;GridCacheEntryEx, GridCacheVersion&gt; c, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> amount )</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชููู Apache Ignite ูุคุฎุฑูุง ุนู ุฏุนู Java 7 ุ ูุฐูู ูุชู ุฅูุดุงุก ุงูุฅุบูุงู ูู ุฎูุงู ูุฆุฉ ูุฌูููุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> IgniteInClosure2X&lt;GridCacheEntryEx, GridCacheVersion&gt; expireC = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IgniteInClosure2X&lt;GridCacheEntryEx, GridCacheVersion&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyx</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GridCacheEntryEx entry, GridCacheVersion obsoleteVer)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> touch = !entry.isNear(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (log.isTraceEnabled()) log.trace(<span class="hljs-string"><span class="hljs-string">"Trying to remove expired entry from cache: "</span></span> + entry); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entry.onTtlExpired(obsoleteVer)) touch = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (GridCacheEntryRemovedException ignore) { entry = entry.context().cache().entryEx(entry.key()); touch = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (touch) entry.context().evicts().touch(entry, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); } };</code> </pre><br><p style=";text-align:right;direction:rtl">  ูุง ูุจุญุซ ุนูู ูู ูู ุฃุณููุจ <code>GridCacheMapEntry.onTtlExpired()</code> ุ ุญูุซ ููุฌุฏ ุงูุฎุท ุงูุซููู ูู ุงููุชูุฉ ุงูุฃุฎูุฑุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">cctx.cache().removeEntry(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);</code> </pre> </div></div><br><h1 id="detali-realizacii" style=";text-align:right;direction:rtl">  ุชูุงุตูู ุงูุชูููุฐ </h1><br><h2 id="rabota-so-stranicami-v-offheap" style=";text-align:right;direction:rtl">  ุงูุนูู ูุน ุงูุตูุญุงุช ูู Offheap </h2><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Offheap</a> ูู ุชูููุฉ ูุชุญุณูู ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุงููุฏููุฉ ุจูุบุฉ ุจุงุณุชุฎุฏุงู ุฌุงูุน ุงูููุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅููุง ุฎุฑุงูุฉ ุฃูู ุจุณุจุจ ุชุจุงุทุค ูู ุดูุก ูู ุฌุงูุน ุงูููุงูุฉ ุ ุนุงุฏุฉ ูุง ูููู ููุงุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌูุน ูุณุจุฉ ุจุงุฆุณุฉ ูู ุงูุฃุฏุงุก</a> .  ุญุชู ุฃููุงู ูุจูุฑุฉ ูู ุญุฏ ุฐุงุชูุง ููุณุช ูุดููุฉ ุ ูุฃู  ุชุนูู ุฌุงูุนุงุช ุงูุชุฌููุน ุจุดูู ุชูุงูุณู (ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CMS ู G1</a> ูู Java) ุ ูุงูุฎูุงุฏู ุชุญุชูู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนุดุฑุงุช ุงูููู</a> .  ุจุงูุทุจุน ุ ูุถูู ุงูููุฌููุน ูุชุฑุงุช ุชููู ุบูุฑ ูุชููุนุฉ ููุชุทุจูู ุ ููู ุฃูุฑ ููู ููุฃูุนุงุจ ุ ููููู ููุจูู ููุงุนุฏุฉ ุงูุจูุงูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ููู ูุง ุณูุญุฏุซ ุจุงููุนู ูู ุงููุดููุฉ ูู ุงูุชูุงู ูุฑุถูุฉ ุงูุฃุฌูุงู ุนูู ูููุฉ ูุจูุฑุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฑุถูุงุช ุงูุฌูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุชุณุชุฎุฏู ุงูุชุญุณููุงุช GC ูุฑุถูุฉ ุงูุฃุฌูุงู.  ุชูุฌุฏ ูุฐู ุงููุฑุถูุฉ ูู ูุณุฎุชูู: ูููุฉ ูุถุนููุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุฑุถูุฉ ุงูุฃุฌูุงู ุงูุถุนููุฉ:</strong> ูุนุธู ุงูุฃุดูุงุก ุชููุช ุตุบูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุฑุถูุฉ ูููุฉ ุญูู ุงูุฃุฌูุงู:</strong> ูููุง ูุจุฑ ุงููุงุฆู ุ ุฒุงุฏ ุนูุฑู. </p><br><p style=";text-align:right;direction:rtl">  ุชูุชุฑุถ ุงููุฑุถูุฉ ุงููููุฉ ูุฑุถูุฉ ุถุนููุฉ ุ ูููู ููุณ ุงูุนูุณ.  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ููุจุบู ุฃู ููุชูู GC ุจุชุญููู ุงููุฑุถูุฉ ุงูุถุนููุฉ ุ ูููู ูู ุงููุงูุน ููุณ ุงูุฃูุฑ ูุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ุชุญูู ูู ุญุฏูุซ Alexey Shipilev ุนู GC ุงูุฌุฏูุฏ ูู Java ุ ุฅุฐุง ููุช ุชุฑุบุจ ูู ููู ุงูููุถูุน ุจุดูู ุฃูุถู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุญุฏ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุซูุงู</a> . </p></div></div><br><p style=";text-align:right;direction:rtl">  ูููุง ุดูุก ูู ูุฐุง ุงููุจูู ุฃูู ูุจู ุธููุฑ PDS ุ ุชู ูุถุน Apache Ignite ุจุดูู ุฃุณุงุณู ูุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ุจูู ุงูุฎุฏูุงุช ููุงุนุฏุฉ ุจูุงูุงุช ุงููุฑุต (ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Hadoop</a> ).  ูุฐูู ุ ุชุณูู ุงูุฎุฑุงุฆุท ูู Ignite <code>IgniteCache</code> ูููุง ูุธููุฉ ุงูุจุซู ุงูููุงุจูุฉ.  ูุชูุชูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุท ูุฑุถูุฉ ุงูุฃุฌูุงู - ุญูุซ ูุฒุฏุงุฏ ุงุญุชูุงู ุญุฐู ูุงุฆู ุจูุฑูุฑ ุงูููุช.  ูุฐูู ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุนูู Offheap ูุชุฎุฒูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุนูู ุชุญุณูู ุงูุฃุฏุงุก. </p><br><p style=";text-align:right;direction:rtl">  ุงููุฒูุฏ ูู ุงูููุงูุขุช: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุนูู Offheap ุนูู ุชุณููู ุชูููุฐ ุงูููุงูู ุงูุชู ุชุญุชูู ุนูู ุฃูุซุฑ ูู ุนูุงุตุฑ <code>Integer.MAX_VALUE</code> . </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุฐุง ุงุญุชูุธุช ุจูุฌููุนุฉ ุฃูู ูู 32 ุฌูุฌุงุจุงูุช ุ ูุณุชุฒู ุงูุฑูุงุจุท 4 ุจุงูุช</a> ุ ููุง ูููุฑ ุจุถุนุฉ ุบูุบุงุจุงูุช. </li><li style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุงูููุฌูุน ูููู ุจุจูุงุก ุฑุณู ุจูุงูู ูููุงุฆูุงุช ุ ูุฅูู ูุณุชููู ุงูุฐุงูุฑุฉ ุจูุง ูุชูุงุณุจ ูุน ุนุฏุฏูุง.  ูุนุฏุฏ ุงููุงุฆูุงุช ูุชูุงุณุจ ูุน ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ.  ูุณุชููู ุงููุฌูุน ุฃูุถูุง ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ุ ูุงูุชู ูุชู ุฅููุงููุง ุจุดูู ุฃูุถู ูุถุบุท ุงูุจูุงูุงุช ุ ุนูู ุณุจูู ุงููุซุงู. </li><li style=";text-align:right;direction:rtl">  ูู ุฃููุงู ูุจูุฑุฉ ุฌุฏูุง ุ ุญุชู ูู ูู ูุชู ุงูุชูุงู ูุฑุถูุฉ ุงูุฃุฌูุงู ููู ุ ูุณูุธู ููุงู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงููุฏููุฉ ุฐุงุช ุงููููุฉ ุงููุทููุฉ ุงูุชู ุณุชูุชูููุง. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฅุฑุณุงู ุงูุจูุงูุงุช ุจุนุฏ ุฐูู ุฅูู ุงููุฑุต ุ ูุชู ุฅุฌุฑุงุก ุชุณูุณู ูููุงุฆูุงุช ูู ุงูุฐุงูุฑุฉ ูุจุงุดุฑุฉ ูู ุฎูุงู <code>unsafe</code> ุ ุซู ูุชู ุงุณุชุฎุฏุงู ููุทูุฉ ุงูุฐุงูุฑุฉ ูุฐู ููุฎุฒู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุงููุคูุช. </p><br><h2 id="write-ahead-log" style=";text-align:right;direction:rtl">  ุงูุชุจ ุณุฌู ุงููุณุชูุจู </h2><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Write Ahead Log</a> ุนุจุงุฑุฉ ุนู ุณุฌู ููุนูููุงุช ุฐุงุช ุจููุฉ ุฎุทูุฉ ุ ููุถูู ุฅูููุง ุชูููุฉ ุซุงุจุชุฉ ุ ุนูู ุนูุณ ุงูุดุฌุฑุฉ.  ูุชู ุชุญุฏูุซ ุงูุดุฌุฑุฉ ุจุดูู ุฃูู ุชูุฑุงุฑูุง ุ ูุฅุฐุง ููุฏุช ุงูุจูุงูุงุช ุจุณุจุจ ุงูุณููุท ุ ูุณุชุชู ุงุณุชุนุงุฏุชูุง ูู ุงูุณุฌู ุนู ุทุฑูู ุชุทุจูู ุงูุนูููุงุช ุจุฏุกูุง ูู ุขุฎุฑ ุญุงูุฉ ุชู ุญูุธูุง.  ูุงููุชูุฌุฉ ูู ุชุญุณูู ุงูุฃุฏุงุก ุฏูู ุงููุณุงููุฉ ุนูู ุงูููุซูููุฉ.  ุฃูุตุญู ุจุฅููุงุก ูุธุฑุฉ ุนูู ูุงุฌูุฉ <code>IgniteWriteAheadLogManager</code> - ููุงู ูุซุงุฆู ููุตูุฉ. </p><br><h2 id="obhod-uzla" style=";text-align:right;direction:rtl">  ุชุฌุงูุฒ ุงูุนูุฏุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุงูุนูุฏ ูู ุฃุดุฌุงุฑ B ููุณุช ุตุบูุฑุฉ ุ ูุชู ุชุฌุงูุฒูุง ูู ุฎูุงู ุงูุจุญุซ ุงูุซูุงุฆู.  ููุฐุง ุ ูุชู <code>BPlusTree.GetPageHandler</code> ุฃุญูุงุฏ ูุฆุฉ <code>BPlusTree.GetPageHandler</code> ุ ูุจุงููุณุจุฉ ููุนูููุงุช ุงููุฎุชููุฉ ููู ูุฎุชููุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชูููุฐ ุงูุจุญุซ ุงูุซูุงุฆู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findInsertionPoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lvl, BPlusIO&lt;L&gt; io, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> buf, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> low, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cnt, L row, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shift)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IgniteCheckedException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> row != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> high = cnt - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (low &lt;= high) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = (low + high) &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cmp = compare(lvl, io, buf, mid, row); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cmp == <span class="hljs-number"><span class="hljs-number">0</span></span>) cmp = -shift; <span class="hljs-comment"><span class="hljs-comment">// We need to fix the case when search row matches multiple data rows. //noinspection Duplicates if (cmp &lt; 0) low = mid + 1; else if (cmp &gt; 0) high = mid - 1; else return mid; // Found. } return -(low + 1); // Not found. }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฎุชูู ุทุฑููุฉ <code>compare</code> ุจุงุฎุชูุงู ุฃุญูุงุฏ <code>BPlusTree</code> .  ูุดูุฑ ุงูููุฑุณ ุงูุณุงูุจ ุนุฏู ูุฌูุฏ ุนูุตุฑ ูู ุงูููุงู ุงูุฐู ูููู ุฃู ูููู ููู.  <code>Collections.binarySearch</code> ููุนู ุงูุดูุก ููุณู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุจู ููุฎุทูุท ุงูุชุงููุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cmp == <span class="hljs-number"><span class="hljs-number">0</span></span>) cmp = -shift;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนูููุฉ <code>findOne</code> ุ ูุฐุง ุงูุฑูุฒ ูุง ููุนู ุดูุฆูุง ุ ูุฃูู  ุชู ุชุนููู <code>shift</code> ุฅูู ุตูุฑ ุ ุฃู  ุฅุฐุง ูุงูุช ููุณ ุงูููุงุชูุญ ููุฌูุฏุฉ ูู ุงูุดุฌุฑุฉ ุ ูุณูุฌุฏูู ุฃุญุฏูู ุชุนุณูููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ุฅุฐุง ููุช ุชุจุญุซ ุนู ุงููุทุงู ุจูุฐู ุงูุทุฑููุฉ ุ ูุณุชููุฏ ุงูุนูุงุตุฑ ุ ูุฐูู ูุชู ุชุนููู <code>shift</code> ุฅูู <code>1</code> .  ููุชูุฌุฉ ูุฐูู ุ <em>ูู ูุนุซุฑ ุงูุจุญุซ ุนูู ุงูุนูุตุฑ ุญุชู ุฅุฐุง ูุงู ููุฌูุฏูุง</em> ุ ูููู ููุณ ูู ุงูููู ุงูุจุญุซ ุนู ุงููุทุงู. </p></div></div><br><h2 id="spisok-listov" style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงูุฃูุฑุงู </h2><br><p style=";text-align:right;direction:rtl">  ููุชุฌูู ูู ุงููุทุงู ุจููุงุกุฉ ุ ูุชู ุฑุจุท ุงูุฃูุฑุงู ุจูุงุฆูุฉ.  <code>BPlusTree.ForwardCursor</code> ุ ุงูุฐู ููุชูู ูู ูุฑูุฉ ุฅูู ูุฑูุฉ ุ ููุชูุฌุฉ ุจุญุซ.  ุนูู ูุง ูุจุฏู ุ ูู ูุชู ุนุฒู ูุฑูุฑ ุงููุคุดุฑ ุนู ุงูุนูููุงุช ุงูุฃุฎุฑู ูู ุงูุดุฌุฑุฉ ุ ูุฃูู  ุนูุฏ ุงููุฑูุฑ ุ ูุคุฎุฐ ุงูููู ุนูู ุตูุญุฉ ูุงุญุฏุฉ ููุท.  ูู ุฃุฌุฏ ุขููุฉ ูุฒุงููุฉ ุชุญูู ุงููุตูู ุฅูู ุทุฑู ุงููุคุดุฑ. </p><br><h1 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุดุฌุฑุฉ B + ูู Apache Ignite ุตุบูุฑุฉ ููุงุฑูุฉู ุจููุงุนุฏ ุงูุจูุงูุงุช ุงูุนูุงุฆููุฉ ุงูุฃุฎุฑู ุ ูุญุตู ุนูู ุงููุฌููุนุฉ ุงููุงุฒูุฉ ูุฅูุชุงุฌ ุดุฌุฑุฉ B + ุงูุฌุงูุฒุฉ ููุฅูุชุงุฌ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุฑ <strong>WAL</strong> ุฃูุงููุง ุฑุฎูุตูุง ุ ููุชูุฌุฉ ูุฐูู ุ ูุงุฏุฑูุง ูุง ูุชู ุชุญุฏูุซ ุงูุดุฌุฑุฉ ุนูู ุงููุฑุต. </li><li style=";text-align:right;direction:rtl">  <strong>Offheap</strong> ูุน ุงูุจูุงูุงุช ูู ุดูู ูุชุณูุณู. </li><li style=";text-align:right;direction:rtl">  <strong>ุงูุชุฒุงูู</strong> - ูุฃุฌุฒุงุก ุงูุดุฌุฑุฉ ุงููุญููุฉ ูู ุงูุฐุงูุฑุฉ. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar413749/">https://habr.com/ru/post/ar413749/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar413739/index.html">ููู ูููุง ุจูุณุญ ุงูุฅูุชุฑูุช ุจุงููุงูู ููุง ุชุนูููุงู</a></li>
<li><a href="../ar413741/index.html">ูุง ูุงู ูููู: ุงูุทุจุงุนุงุช ูุฑูู WWDC Redmadrobot</a></li>
<li><a href="../ar413743/index.html">ูู ุจุชุดุบูู LAMP ููุฆุงุช ุชุทุจููุงุช ุงูููุจ ุงูุฃุฎุฑู ุจุจุถุน ููุฑุงุช</a></li>
<li><a href="../ar413745/index.html">ุชู ุชุทููุฑ ูุธุงู ุทุงูุฉ ูุงุณููู ูุฌููุน ุงูุฅููุชุฑูููุงุช ูู ุฌุณู ุงูุฅูุณุงู ูู ููุช ูุงุญุฏ</a></li>
<li><a href="../ar413747/index.html">ููุฑ NULL</a></li>
<li><a href="../ar413751/index.html">ุฑุณูุงู ุดูุฑูููู ูููุณูู ุฌุฑุงููู - ุงูุนูู ูุน ุงูุจูุฆุฉ ุนูู jug.msk.ru</a></li>
<li><a href="../ar413753/index.html">ุนูู ูู ุงูุณูุงุก: ุทุงุฆุฑุฉ ุจุฏูู ุทูุงุฑ ูุน ุงูุชุนุฑู ุนูู ุงูุนูู ูู ุงูุญุดูุฏ ูุงูุฃูุงูู ุงูุนุงูุฉ</a></li>
<li><a href="../ar413757/index.html">ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ูุดุฑูุน ุชุฌุงุฑู: ูุงุฐุง ุชูุนูุ</a></li>
<li><a href="../ar413759/index.html">ุงูุชุดู ุงููุถูู ุงูููุงุฏ ุงูุนุถููุฉ ุนูู ุงููุฑูุฎ ุ ูุงูุชู ูุจูุบ ุนูุฑูุง ูููุงุฑุงุช ุงูุณููู</a></li>
<li><a href="../ar413761/index.html">ููููุฉ ููุน Windows 10 ูู ุฅุนุงุฏุฉ ุงูุชุดุบูู ุจุนุฏ ุงูุชุญุฏูุซุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>