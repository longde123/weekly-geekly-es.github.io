<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçüíª ü§æüèº üëáüèª Android Go ist die zuk√ºnftige Milliarde Ger√§te und ein Limit von 50 MB. Yandex Vortrag üë©üèæ‚Äçüåæ ü•â ü§¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neue Wege f√ºr die Entwicklung einer bereits bekannten Plattform - es ist immer interessant. Einerseits erweitern Sie den Kundenstamm, andererseits inv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Android Go ist die zuk√ºnftige Milliarde Ger√§te und ein Limit von 50 MB. Yandex Vortrag</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/423493/">  Neue Wege f√ºr die Entwicklung einer bereits bekannten Plattform - es ist immer interessant.  Einerseits erweitern Sie den Kundenstamm, andererseits investieren Sie nicht in die Erstellung von Software von Grund auf neu, sondern nutzen vorhandene Entwicklungen.  Aber wenn die Richtung wirklich neu ist, mit ihren eigenen Besonderheiten, dann wird es nicht m√∂glich sein, mit sehr wenig Blut auszukommen.  Beim n√§chsten Treffen der Mosdroid-Community in unserem B√ºro sprach der Entwickler Arthur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Vasilov Arturka</a> √ºber die Anpassung der Yandex-Anwendung an das Android Go-System. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/VYcLRPoA4Bk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><blockquote>  Wenn Sie keinen Taschenrechner, keinen Wecker usw. schreiben, sind Sie im Durchschnitt entweder sehr cool, gut gemacht und haben alles gut gemacht, oder Ihre Anwendung ben√∂tigt 150 bis 170 Megabyte. </blockquote><br><a name="habracut"></a>  - Mein Name ist Arthur, ich bin ein Android-Entwickler und arbeite an der Yandex-Anwendung.  Heute werde ich Ihnen eine Geschichte dar√ºber erz√§hlen, wie wir uns an Android Go angepasst haben.  Ich werde Ihnen sagen, auf welche Art von Rechen wir gesto√üen sind, was f√ºr uns nicht funktioniert hat und wie alles funktioniert, warum es ben√∂tigt wird. <br><br>  Ein kleiner Exkurs dar√ºber, worum es geht.  Android Go ist eine spezielle Version von Android f√ºr kosteng√ºnstige Ger√§te.  Sie kosten 60-100 Dollar und sind daher sehr schwach, langsam und verlangsamt.  Deshalb hat Google beschlossen, ein eigenes System zu erstellen, damit sie zumindest irgendwie normal funktionieren.  Es wurde 2017 bei Google I / O angek√ºndigt, dh ein Jahr und mehrere Monate sind vergangen.  Als der Mitap angek√ºndigt wurde, wurde daher eine logische Frage aufgeworfen: "Lebst du noch oder was?"  Ich sagte dann, dass alles in Ordnung ist, alles in Ordnung ist, werde ich sagen.  Und jetzt, als typischer Internet-Held, werde ich nachtr√§glich antworten, warum es passiert ist. <br><br><img src="https://habrastorage.org/webt/h2/qw/6g/h2qw6gttth_hx-niydwklvvcb8u.jpeg"><br>  Was genau ist passiert?  Google sagte: "Wir machen ein solches System."  Dann sagte er: "Okay, wir brauchen Zeit, um fertig zu werden" und das alles.  Danach haben Anbieter immer eine gewisse Verz√∂gerung bei der Anpassung dieser Version f√ºr sich.  Und die neue Version bei uns wird bereits fr√ºhestens ein Jahr sp√§ter ver√∂ffentlicht, daher gibt es hier nichts √úberraschendes.  Au√üerdem mussten sie sich entscheiden, ob sie so etwas tun sollten: Sie sprechen von billigen Ger√§ten, und es ist nicht klar, ob sie davon profitieren werden oder nicht.  Dar√ºber hinaus muss dieses Ger√§t neu sein, es muss gemacht werden, lernen, wie man verkauft, verstehen, wie es funktionieren wird. <br><br>  Das erste Smartphone mit Android Go erschien vor nicht allzu langer Zeit.  Irgendwann im April begannen die Verk√§ufe wahrscheinlich oder vielleicht im Mai.  Dies ist Nokia 1, es wird √ºberall verkauft.  Ich liege hier herum.  Meiner Meinung nach gibt es derzeit nur neun solcher Smartphones auf dem Markt, aber bis Ende des Jahres versprechen sie mehr als hundert.  Und im Prinzip hat keiner der gro√üen Player wie Huawei, Samsung und andere sein Wort gesagt, also werden sie noch etwas hinzuf√ºgen, sie werden sich nicht von einem so gro√üen Markt fernhalten k√∂nnen. <br><br>  Vor dem Bericht ging ich zur Android Go-Seite und sah, dass sie die Android Pie Go Edition erstellt haben.  Aber sie haben dort nichts getan, sie haben einfach die Anzahl der installierten Anwendungen und ihr Gewicht im Voraus reduziert.  Sie sagten: "Sie haben jetzt doppelt so viel freien Speicherplatz."  Und die Standardausreden: Fehlerbehebung, Leistungsverbesserung, alles.  Aber zumindest haben sie angerufen, was bedeutet, dass sie nicht vergessen haben. <br><br>  Was sind speziell die Einschr√§nkungen dieser Ger√§te?  Erstens haben sie 512 Megabyte oder 1 Gigabyte RAM, 8 oder 16 Gigabyte Speicher.  Es ist klar, dass sie unter solchen Bedingungen extrem gehemmt sind und alle normalen Anwendungen auf ihnen ungef√§hr auf die gleiche Weise funktionieren.  Damit Anwendungen mit minimaler Angemessenheit funktionieren, sagte Google: "Lassen Sie uns die folgenden Anforderungen einf√ºhren."  Sie sind ziemlich logisch, folgen Sie dem, was auf der vorherigen Folie war. <br><br><img src="https://habrastorage.org/webt/ci/xm/ht/cixmhtwrdwbu_gkczbo0vk3-k8e.jpeg"><br><br>  Zuallererst ist es abstrakt gute Leistung.  Ihre Anwendung sollte auf einem solchen Ger√§t gut und schnell ausgef√ºhrt werden k√∂nnen.  Wir sind: ‚ÄûGro√üartig.  Wir arbeiten. ‚Äú <br><br>  Dar√ºber hinaus gibt es bereits bestimmte Zahlen, denen wir entsprechen m√ºssen.  Der belegte Speicherplatz nach dem Auspacken und Installieren des APK betr√§gt nicht mehr als 40 Megabyte.  Manchmal ist dies ein Problem, weil jemand und die APK alle 80 Megabyte wiegen.  Es wird weh tun.  Dar√ºber hinaus kann dies nicht angemessen erfasst und gemessen werden.  Das hei√üt, Sie k√∂nnen nicht sagen: "Ich wei√ü, dass meine APK so viel wiegt, sodass die Anwendung nach der Installation so viel kostet."  All dies h√§ngt sehr stark vom Hersteller, der Version des Ger√§ts, Android usw. ab. Wenn Ihre APK jedoch 10 Megabyte ben√∂tigt, ist im Prinzip alles in Ordnung und Sie werden diese Anzahl niemals √ºberschreiten. <br><br>  Und jetzt die unterhaltsamste und coolste Anforderung: Der verbrauchte Arbeitsspeicher w√§hrend der Arbeit mit der Anwendung sollte 50 Megabyte nicht √ºberschreiten. <br><br>  Wer wei√ü, wie viel RAM seine Anwendung w√§hrend des Betriebs durchschnittlich ben√∂tigt?  Wer hat sich jemals √ºber dieses Problem gewundert?  Gibt es jemanden mit weniger als 100 Megabyte?  Sch√∂n.  Aber vielleicht l√ºgst du.  Wenn Sie im Durchschnitt keinen Taschenrechner, keinen Wecker usw. schreiben, sind Sie entweder sehr cool, gut gemacht und haben alles gut gemacht, oder Ihre Anwendung ben√∂tigt 150-170 Megabyte.  Es ist sehr schwierig, es auf 50 Megabyte zu bringen.  Daher werden wir den Rest der Zeit dar√ºber sprechen, wie man den Globus in eine Eule verwandelt usw. <br><br><img src="https://habrastorage.org/webt/6k/el/g1/6kelg1qxjmzqgltficsia2dk1p0.jpeg"><br>  Was beinhaltet unser Erinnerungsgespr√§ch?  Es ist direkt notwendig zu verstehen, was genau wir messen und wie es am besten gemessen werden kann.  Auch f√ºr Android Go-Ger√§te gibt es eine Besonderheit, die ber√ºcksichtigt werden muss, und wir werden auch dar√ºber sprechen.  Und ich werde Ihnen auch einige allgemeine Dinge erz√§hlen, allgemeine Tipps, die Sie vielleicht nicht erraten haben, die aber wirklich viel Ged√§chtnis von Ihnen essen k√∂nnen. <br><br>  Im Jahr 2018, nachdem Google I / O durchlaufen wurde, m√ºssen Sie die Geschichte √ºber das Ged√§chtnis mit einem Verweis auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesen Bericht beginnen</a> .  Wer hat es gesehen? <br><br>  Gro√üartig.  Alle verbleibenden 180 Personen wissen, was in naher Zukunft zu tun ist.  Meiner Meinung nach ist dies einer der besten Berichte bei Google I / O.  Dude sagte unglaublich coole Dinge.  Er erz√§hlte alles in den Regalen, gut und mit vielen tiefen Details.  Diejenigen, die es gesehen haben und sich gut daran erinnern, werden wahrscheinlich bemerken, dass ich einige Dinge von dort kopiert habe, weil es sonst unm√∂glich ist, er hat alles erz√§hlt, also werde ich es wiederholen. <br><br>  Was messen wir?  Es gab so etwas wie PSS (Proportional Set Size).  Das hei√üt, der RAM in Android wird durch etwa 40-Kilobyte-Bl√∂cke dargestellt, und diese Bl√∂cke k√∂nnen entweder vollst√§ndig zur Anwendung geh√∂ren oder zwischen Prozessen und Anwendungen st√∂bern. <br><br>  Und die Frage ist: Wie genau kann man verstehen, auf welche Anwendung dieser gemeinsame Speicher bezogen werden soll?  Es gibt verschiedene Ans√§tze, sie sind ziemlich logisch.  PSS sagt, wenn Speicher zwischen N Prozessen fummelt, gehen wir davon aus, dass Ihre Anwendung 1 / N dieses Speichers besitzt.  Und genau so gibt es die Residential Set Size und die Unique Set Size, die besagen, dass ‚Äûkeiner der gemeinsam genutzten Speicher mir geh√∂rt‚Äú und ‚ÄûAlles geh√∂rt‚Äú.  Im Prinzip ist PSS hier am logischsten. <br><br>  Wie genau k√∂nnen Sie den verbrauchten Speicher messen?  Hier ist alles einfach.  Entweder ist es ein Profiler in Android Studio oder es ist dumpsys.  Es gibt nat√ºrlich auch andere Tools.  Sie k√∂nnen Ihnen detailliertere Ergebnisse liefern, etwas komplizierteres, aber das Problem ist, dass es sehr, sehr schwierig ist, ihre Ergebnisse zu verstehen und sie alle zu verwenden.  Oft ben√∂tigen Sie entweder root oder einen benutzerdefinierten Build von Android.  Und im Gro√üen und Ganzen brauchen Sie sie nicht, die ersten beiden Werkzeuge reichen aus. <br><br><img src="https://habrastorage.org/webt/0r/--/pr/0r--prgyak0-hltivshg-dxeuqc.jpeg"><br><h5>  <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link von der Folie</a></sup></sub> </h5><br>  Ich werde nicht √ºber den Profiler in Android Studio sprechen, ich denke, viele Leute haben ihn verwendet.  Wer nicht benutzt hat, muss unbedingt stupsen.  Insbesondere habe ich den folgenden Link bereitgestellt - nur ein guter Artikel aus der Dokumentation mit Video, wie man es benutzt, mit Demos.  Und im Prinzip ist alles klar.  Es zeigt, wohin Ihr Ged√§chtnis geht, zeigt es in Echtzeit.  Das Einzige, woran man sich erinnern muss, ist, dass es dennoch bestimmte Fehler auferlegt, die sich aus der Tatsache ergeben, dass wir dieses Ged√§chtnis st√§ndig messen.  Sie liegen jedoch innerhalb akzeptabler Grenzen. <br><br><img src="https://habrastorage.org/webt/gb/fv/wn/gbfvwnjxm6fcggr66eoyzmcvnni.jpeg"><br><h5>  <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link von der Folie</a></sup></sub> </h5><br>  Dumpsys ist eine einfache Konsolensache, die nichts von Ihnen erfordert, nur ein verbundenes Telefon und ADB.  Und Sie k√∂nnen diesen Befehl ausf√ºhren: Rufen Sie dumpsys meminfo auf, √ºbergeben Sie das Paket an es, und es gibt Ihnen so etwas zur√ºck.  Und wenn wir daran interessiert sind, wie viel unsere Anwendung verbraucht, k√∂nnen wir uns speziell TOTAL ansehen, das besagt, dass "Ihre Anwendung ungef√§hr 168 Megabyte verbraucht".  Viel, aber was tun? <br><br><img src="https://habrastorage.org/webt/lm/yo/xw/lmyoxwiahsbeey_ru-3zvdtd8y0.jpeg"><br><h5>  <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link von der Folie</a></sup></sub> </h5><br>  Es zeigt Ihnen auch eine genaue Aufschl√ºsselung, wie viel Speicher in diesem Speicher ben√∂tigt wird.  Es gibt hier verschiedene Abschnitte, sie sind komplex, wir werden weiter dar√ºber sprechen, aber jetzt k√∂nnen wir die Hauptsache bemerken - dies sind Java Heap, unsere Java-Objekte, und alles weitere ist komplizierter. <br><br>  Was ist sonst noch wichtig?  Das Ged√§chtnis ist eine sehr empfindliche Sache f√ºr alle Arten von Tests und alle Arten von √§u√üeren Bedingungen.  Das hei√üt, alle Tests m√ºssen Sie so oft wie m√∂glich unter den gleichen Bedingungen durchf√ºhren.  Es ist klar, dass dies idealerweise ein Ger√§t sein sollte, da der Speicher von der Version von Android abh√§ngt.  Es reicht aus, sich an die Unterschiede zwischen den Vieren und F√ºnfern zu erinnern.  Dies h√§ngt von der Gr√∂√üe oder Aufl√∂sung des Bildschirms ab. Je gr√∂√üer der Bildschirm, desto mehr Inhalte werden eingebrochen, desto mehr Speicher wird ben√∂tigt, um alles zu zeichnen.  Je gr√∂√üer die Aufl√∂sung, desto mehr Pixel belegt Ihre Bitmap und desto mehr Speicher wird zum Speichern ben√∂tigt. <br><br>  Das Anwendungsszenario wirkt sich auch auf die Tests aus.  Sie k√∂nnen den Text lesen oder mit einer Reihe von Bildern durch die Galerie scrollen.  Und es ist klar, wo es mehr Speicher geben wird. <br><br>  Ein weiterer wichtiger Punkt ist die Belastung des Ger√§ts.  Das hei√üt, Sie k√∂nnen alles gleich haben, aber in einem Fall ist Ihre Anwendung die einzige, die f√ºr Sie funktioniert, und in dem anderen Fall haben Sie eine Reihe von Anwendungen, die etwas im Hintergrund tun, etwas herunterladen, l√∂schen, im Vordergrund arbeiten Gleichzeitig wird Ihr Speicher einfach gel√∂scht, da Sie ihn anderen Anwendungen zur Verf√ºgung stellen m√ºssen.  Daher ist es im Idealfall besser, alle anderen funktionierenden Anwendungen zu √ºbernehmen und zuerst zu beenden, nicht Ihre.  Alles, was Sie erreichen und dann t√∂ten k√∂nnen.  Nur in diesem Fall, und PSS wird es Ihnen auf jeden Fall danken, da es nicht erforderlich ist, den Speicher zwischen den Prozessen zu durchsuchen. <br><br><img src="https://habrastorage.org/webt/lm/yo/xw/lmyoxwiahsbeey_ru-3zvdtd8y0.jpeg"><br>  Sie k√∂nnen beispielsweise die aktuellen Informationen zum freien Speicherplatz und zum belegten Speicher abrufen und anzeigen.  Er wird Ihnen so etwas wie ein Schild bringen, auf dem steht: "Hier habe ich so viel freien Speicher, so viel zwischengespeicherten Speicher, so viel belegten Speicher."  Und wenn Sie 200-250 Megabyte freien Speicher f√ºr Ihre Geliebte dort haben, dann ist dies wahrscheinlich gut, dann wird nichts Ihre Tests beeinflussen. <br><br>  Vielleicht hat jetzt jemand die Frage "Warum brauche ich das alles?"  Dies ist so ein Breaker, in dem ich zus√§tzlich die Motivation f√ºr all das sagen werde. <br><br>  Erstens, selbst wenn Sie unter Android Go jetzt nichts unternehmen und denken, dass es tot ist, kann es sich durchaus entwickeln, zu Ihnen kommen, und irgendwann m√ºssen Sie sich mit all dem befassen. <br><br>  Das zweite, was ich f√ºr sehr wichtig halte, ist, dass Sie nur Regressionstests aus dem Ged√§chtnis durchf√ºhren k√∂nnen.  Das hei√üt, Sie k√∂nnen einfach ein Skript schreiben, das die Anwendung ausf√ºhrt, dumpsys ausf√ºhrt, solche Messungen durchf√ºhrt und beobachtet, wie sich diese Indikatoren zwischen den Releases √§ndern.  Ein solches Skript kann in ein paar Stunden geschrieben werden, die Infrastruktur kann f√ºr eine l√§ngere Zeit konfiguriert werden, aber es scheint mir, dass dies eine gute Sache ist. <br><br>  Wenn wir √ºber die Besonderheiten von Android Go sprechen - unseren dritten Punkt im Kampf gegen das Ged√§chtnis - dann gibt es einige gute Neuigkeiten.  Erstens verlangt niemand wirklich, dass Sie diese Einschr√§nkungen befolgen.  Das hei√üt, Sie k√∂nnen die Anwendung so verwenden, wie sie ist, sie mit Android Go auf das Ger√§t stellen und alles ist in Ordnung.  Das Problem ist, dass der Benutzer Sie sehr wahrscheinlich entfernt, weil Sie viel Platz beanspruchen.  Auch Ihre Anwendung l√§uft m√∂glicherweise langsam und hat eine Menge Speicher, ja.  Aber bisher hat es niemand verboten, denn sonst h√§tte es auf Android Go keine andere Anwendung als Google Apps gegeben.  Aber wenn sich dieses Ding weiterentwickelt, werden sich viele an solche Bedingungen anpassen, und am Ende kann Ihre Anwendung einfach in der Android Go-Ausgabe gesenkt werden oder sagen, wie der Benutzer die Anwendung auf seinem Android Go-Smartphone installiert, sie k√∂nnen ihm Alarm anzeigen : "Alter, die App funktioniert nicht gut mit Android Go.  Vielleicht wirst du es nicht sagen? " <br><br>  Es gibt noch einen weiteren Punkt: Sie k√∂nnen Android Go-Ger√§te manuell von Google Play ausschlie√üen, dh, die Anwendung kann nicht auf Android Go-Ger√§ten installiert werden.  Es erschien vor nicht allzu langer Zeit. <br><br>  Google ist auch schlau genug, und die 50 Megabyte, die im Titel des Berichts erklangen, sind keine feste Zahl, sondern h√§ngen von der Aufl√∂sung des Ger√§ts, der Bildschirmgr√∂√üe und dar√ºber hinaus von der Art der Anwendung ab.  Zum Beispiel werden Spiele meiner Meinung nach mehr als 115 Megabyte zugewiesen.  Dies ist grunds√§tzlich verst√§ndlich. <br><br><img src="https://habrastorage.org/webt/gu/yj/0s/guyj0sbre79wfwrlzgupt009xn0.jpeg"><br><h5>  <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link von der Folie</a></sup></sub> </h5><br>  Was ist, wenn wir direkt √ºber diesen Test sprechen?  Es gibt noch einen Punkt, der uns besonders besch√§ftigt - die Arbeit mit Presets.  Wenn Anbieter ein neues Telefon herstellen, stellen sie h√§ufig einige vorinstallierte Anwendungen bereit.  Insbesondere sind wir sehr daran beteiligt, und das Problem ist, dass dort Dinge wie die Compatibility Test Suite ausgef√ºhrt werden.  Dies sind Google-Tests, sie f√ºhren sie aus.  Und dort, wenn Ihre Anwendung nicht diesen 50 Megabyte entspricht, ist alles schlecht und Ihre Anwendung kann auf einem solchen Ger√§t nicht vorinstalliert werden. <br><br>  Leider stammen die Tests, die Google durchf√ºhrt, nicht aus Open Source. Ich kann ihnen nicht sagen, dass sie unter der NDA stehen, aber gute Entwickler von Google haben einen solchen Artikel √ºber Android Go geschrieben, und dort gibt es im Prinzip Empfehlungen, die gut genug sind <br><br>  Das hei√üt, alles ist banal.  Wir starten die Anwendung.  Wir warten 5 Sekunden, bis alles geladen ist.  Wir machen dumpsys, schreiben den TOTAL-Wert, f√ºhren einige Male aus, wir erhalten das Ergebnis.  Alles ist sehr einfach und allt√§glich. <br><br><img src="https://habrastorage.org/webt/zq/ma/de/zqmadexusg3whja0-dsz0d4w7gk.jpeg"><br>  Das einzige ist, dass sie ein so kleines Merkmal in ihrem Artikel nicht ber√ºcksichtigt oder vielleicht auch nicht dar√ºber gesprochen haben - es gibt so etwas wie die Arbeit in einem anderen Prozess, und sie tun es oft, um zu k√§mpfen, einschlie√ülich des Speicherverbrauchs. <br><br>  Wer glaubt, dass dies gut f√ºr Android Go ist?  Und wer findet das schlecht?  Tapfer. <br><br><img src="https://habrastorage.org/webt/_c/4p/h5/_c4ph5f7gcnhakefypwspum8d_y.jpeg"><br>  Das Problem ist, dass dies schlecht ist, da am Ende Ihr verbrauchter Anwendungsspeicher √ºber alle Prozesse hinweg gez√§hlt wird.  Wenn wir einen solchen leeren Prozess ohne irgendetwas machen und dumpsys von diesem bestimmten Prozess nehmen, werden wir sehen, dass es 7 Megabyte dauert.  5-8 Megabyte - dies ist ein solcher Aufwand bei der Erstellung des Prozesses.  Wenn wir also um jedes Megabyte k√§mpfen, um alles auf 50 zu bringen, wird uns so etwas sehr schlecht gegeben.  Nehmen wir insbesondere an, Yandex hat die beliebteste Yandex.Metrica-Bibliothek, sie funktioniert auch in einem anderen Prozess, und dies kann uns auch Schmerzen bereiten. <br><br><img src="https://habrastorage.org/webt/qu/os/fu/quosfu3kccdztjv7cp6ujn4rxhg.jpeg"><br>  Wenn zum Beispiel einige externe Bibliotheken zu Ihnen kommen, k√∂nnen Sie einfach sagen: ‚ÄûAlter, bitte arbeiten Sie im Hauptprozess.  Ich bin damit einverstanden, dass dies zwar langsamer ist, aber keinen unn√∂tigen Speicherplatz verbraucht. ‚Äú  Das ist also auch ein subtiler Punkt. <br><br><img src="https://habrastorage.org/webt/ci/6b/9c/ci6b9cbpebgounzlbc87xids-xi.jpeg"><br><br>  Wenn wir √ºber den Speicherverbrauch sprechen, gehen wir zu dieser Platte √ºber, die dort ist.  Wir nehmen ein leeres Projekt und f√ºhren dieses Dumpsys aus, starten dieses Gesch√§ft und sehen, dass 23 Megabyte von 50 bereits vergeben sind.  Leere "Hallo Welt!"  ohne irgendetwas einfach mit dem text aktivieren.  Es wird ziemlich traurig.  Es wird noch trauriger, wenn wir erkennen, dass wir einen Parameter wie Java Heap direkt beeinflussen k√∂nnen, dh wir k√∂nnen direkt unsere Java-Objekte explizit verfolgen, die wir l√∂schen, reduzieren und zumindest irgendwie interagieren k√∂nnen. <br><br>  Und es ist schwierig, normal mit dieser ganzen Sache zu interagieren, da dies ein beliebiger Framework-Code ist und Sie direkt aus Java einfach keine normalen Tools haben, um zu verstehen, wie all dies verwendet wird.  Aber die gute Nachricht ist, dass wir diese ganze Sache indirekt beeinflussen k√∂nnen, also lassen Sie uns dar√ºber sprechen, was da ist. <br><br><img src="https://habrastorage.org/webt/pa/p_/qp/pap_qprhxuqhr59pnjx8kxrqwos.jpeg"><br>  Was ist Java Heap ist verst√§ndlich.  Was Native Heap ist, ist auch ziemlich logisch anzunehmen.  Dies sind die gleichen Zuweisungen, nur positive.  Sie stammen aus dem Framework und aus Ihren nativen Bibliotheken, .so-Dateien und mehr. <br><br>  Code steht in direktem Zusammenhang mit der Codespeicherung.  Dies ist die Gr√∂√üe Ihrer .dex, dies ist Ihre .so, dies sind die Ressourcen, mmap-Dateien und all das.  Das hei√üt, je weniger Code, desto besser.  Die einfachste Wahrheit, die im Allgemeinen √ºber alles funktioniert. <br><br>  Stapel ist ein Stapel von Java / C ++ - Threads.  Das hei√üt, jeder Thread hat seinen eigenen Aufrufstapel, sodass jeder Thread einen bestimmten Speicherbereich erstellt, um das Ganze zu speichern. <br><br>  Grafik ist ein UI-Rendering.  Es werden teilweise gespeicherte Bitmaps gezeichnet und was damit verbunden ist. <br><br>  Private andere, System - das ist etwas, das wir √ºberhaupt nicht beeinflussen k√∂nnen, und in der Tat alles andere, was nicht sehr kategorisierbar ist. <br><br><img src="https://habrastorage.org/webt/ut/mv/ft/utmvfteatf-vvzdda5_a8f-iyvi.jpeg"><br><br>  Wenn wir √ºber native Bibliotheken sprechen, nehmen wir an, Sie k√∂nnen eine leere Anwendung verwenden ... Sie k√∂nnen die √ºbliche Anwendung verwenden, die wir haben, und dumpsys daraus entnehmen, um festzustellen, dass 146 Megabyte erforderlich sind.  Und wenn Sie etwas schneiden ... insbesondere habe ich die beiden gr√∂√üten nativen Bibliotheken, die wir insgesamt 15 Megabyte haben, genommen und ges√§gt und danach Dumpsys genommen. Sie k√∂nnen leicht erkennen, dass wir den Verbrauch aus dem Native Heap und verloren haben vom Code.  Das hei√üt, mit einer so einfachen Geste haben wir uns etwa 35 Megabyte gespart.  Nicht schlimm genug. <br><br><img src="https://habrastorage.org/webt/zn/9r/9v/zn9r9v35dja5ndfyz4nwinzshys.jpeg"><br><br>  Streams.  Lassen Sie uns den einfachsten Test machen.  Es gibt eine leere Anwendung, und es gibt dieselbe leere Anwendung, in der wir eine Schleife erstellen, die einen neuen Thread () ausf√ºhrt, f√ºnf Sekunden darin schl√§ft und diesen Thread startet.  Sie k√∂nnen sehen, dass in diesem Fall der Stapel stark aufgef√ºllt wird.  Das hei√üt, wir k√∂nnen diese ganze Sache beeinflussen, aber indirekt, indem wir die Anzahl der Threads im Java-Code reduzieren.  Das hei√üt, durch Java-Objekte, einschlie√ülich der Beeinflussung all dieser Positionen, die sich in anderen Elementen befinden. <br><br><img src="https://habrastorage.org/webt/4i/ed/mo/4iedmo77bys7vs6hv-f65oiuta0.jpeg"><br><br>  Wenn Sie weiterhin √ºber Threads sprechen, k√∂nnen Sie leicht sehen, was Sie f√ºr Threads haben und was sie in der Anwendung tun.  Es gibt verschiedene Werkzeuge.  Sie k√∂nnen dieselbe Systrace verwenden. Sie k√∂nnen einfach die Konsole verwenden, um die ID Ihres Prozesses zu ermitteln und ps anhand der Threads im System abzurufen. <br><br>  Wenn Sie gut abschneiden und alle Arten von ThreadFactory verwenden, um Ihre Threads zu benennen, k√∂nnen Sie verstehen, was Sie haben sollten, was nicht, und so das Ganze reduzieren, da es besonders bedeutungslos ist, 100 Threads in der Anwendung zu haben. <br><br>  Was kann man noch tun?  Es gibt eine Reihe bekannter Akkordeon-Tipps: Achten Sie auf Lecks, verwenden Sie Pools, erstellen Sie keine Objekte, wenn Sie dies nicht ben√∂tigen, und all dieser Unsinn, all dies gilt.  Gro√üartig. <br><br>  Es besteht eine gute Korrelation zwischen dem Speicherbedarf Ihrer Anwendung und ihrer Gr√∂√üe.  Das hei√üt, je gr√∂√üer Ihre Anwendung ist, desto mehr Speicher wird verbraucht. Reduzieren Sie also auf einfache Weise das Gewicht der APK, reduzieren Sie das Gewicht von .dex, reduzieren Sie .so, entfernen Sie alles, was entfernt werden kann. <br><br>       . ,      ,     ,    .      ,     ?   ‚Äî         ‚Äî    ,      .   ,     ,        .       .   ‚Äî   . <br><br><img src="https://habrastorage.org/webt/3s/mv/wk/3smvwkzryvrsm1klctrsmnxtx4i.jpeg"><br>    dumpsys,   ,      ,    . ,   ,   View,  WebView,  Assets,    . <br><br><img src="https://habrastorage.org/webt/yd/m_/92/ydm_92wzagxi-1a9zpwzkeqbe8o.jpeg"><br>  ,      , , ,     ,    SharedPreference  SQLite  - , , ,   . <br><br><img src="https://habrastorage.org/webt/1f/fs/ct/1ffsctcvhhohxpwiysekmopqwzk.jpeg"><br><br> , ,      Assets.  ,  ,    ‚Äì .     1,5 . -,      ,         .    . <br><br><img src="https://habrastorage.org/webt/q5/7g/ki/q57gkiv47412jj1q9_aye3k_4e8.jpeg"><br>    ‚Äî  WebView.    ,  WebView,   ,  dumpsys,  100 ,  .  , , - ,   ,  300  ‚Äî .    ,  WebView ,    . -. <br><br><img src="https://habrastorage.org/webt/o9/pj/z8/o9pjz8exyayhtg1varn-wtsmw8i.jpeg"><br><br> Google   .    .      WebView,     Google,    - .     WebView. . <br><br><img src="https://habrastorage.org/webt/nt/lp/-q/ntlp-qwbjnysaljhmmahewkcdeq.jpeg"><br><br>    Google Go,    Android Go-.       ,     - layout    ,      .  ,      ,      ,   Chrome Tabs,  Chrome    .   . <br><br>       Android Go,    ?    ,      Android Go,      . <br><br><img src="https://habrastorage.org/webt/rm/jz/cf/rmjzcfwjkfponuuzuljvu0r088q.jpeg"><br>  Es gibt verschiedene M√∂glichkeiten. -,      ,    ,       Android Go   .     ,    , .         ,   , ,  - build ,  - ,    ,  - .        APK,       ,  ‚Äî  uses-feature ¬´low-memory¬ª,      APK. <br><br>       ,     ,      Android Go.   Google. ,  ,  Go-   . <br><br>   ,   ?  ,      ,      -       ,   : ¬´,  -  .   ¬ª.           .   ,     ,    ,      ,   ,    - ,      ,  -    .     , ,  ,    ,    Google,    Google     ,      .        ,      ,  ,   Android Go  ,       ,       . <br><br>   ,       ,       ,  -.   . <br><br><img src="https://habrastorage.org/webt/6r/wd/i-/6rwdi-8mzeuwfvvw00dh0nmdf48.jpeg"><br><h5> <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a></sup></sub> </h5><br>       ,    Google I/O:   ,          -    . ,      ,    ,  ,   ,    - ,        .    ,  ¬´       ,      .  ¬ª.     .        ,  .    ,  . <br><br>    ? ,      .  ‚Äî  ,    ,     98% .  ,         , ,    . .       -    Android Go-.  ,  YouTube Go       .    YouTube   , ,  ,   .  .   ,    Android Go    , , ,     ‚Äî    .     ‚Äî Facebook Lite, Twitter Lite,   . Lite,      -   . -,  ,      .    Facebook,    .       ,      ,    . ,    ‚Äî   ,     Android Go. <br><br>    ?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>  Stack Overflow,    1000 .      .  ,    ,    ,     . ,  ,    ‚Äî  dumpsys. <br><br>      ,  Android    ,   512   ,    Android 4.4.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> API</a>     ,     . <br><br>     ,    .    ,        .   ‚Äî   ,    . <br><br>     , : ¬´ ¬ª.  : ¬´¬ª.  .  ‚Äî  ,  .  - 170 .  .  -  .    ?      , ,  ,     ,    - .     -  ‚Äî   .  105 .  . <br><br><img src="https://habrastorage.org/webt/mv/qk/gj/mvqkgjfuippyzhhhcv0tmkosqzw.jpeg"><br>     .   build-   -.  densitySplit,     , resConfig,       .   ,  ,    ‚Äî . ProGuard   .  ,  ProGuard  ,     ,  , ,  ,       stacktraces. <br><br>      .     ,      ,      Android Go-       . <br><br>    - 64 .  : ¬´,   ¬ª.  14 ,  4 ,  60 .     ,   .  .  ,     .         ‚Äî    ,  ,  ,     ,    .     , ,  ,     Android Go,    . 10 , APK     ,  , .   ,    ,      . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die beste L√∂sung ist also die zweite Anwendung. </font><font style="vertical-align: inherit;">Allerdings werden nur wenige Menschen Ressourcen daf√ºr ausgeben, w√§hrend der tats√§chliche Gewinn nicht klar ist. </font><font style="vertical-align: inherit;">Vielleicht wird deine Geschichte nicht so traurig sein, denn ich h√§tte noch ein wenig M√ºhe, ich w√§re geklettert, aber ich war schon unertr√§glich. </font><font style="vertical-align: inherit;">Aber so eine Geschichte. </font><font style="vertical-align: inherit;">In diesem relativ positiven Sinne k√∂nnen Sie es wahrscheinlich beenden. </font><font style="vertical-align: inherit;">Danke an alle.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423493/">https://habr.com/ru/post/de423493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423483/index.html">Finden des richtigen Weges zum Trennen von Website-Inhalten mithilfe von Webpack</a></li>
<li><a href="../de423485/index.html">Faules Laden von Bildern mit IntersectionObserver</a></li>
<li><a href="../de423487/index.html">Node.js ohne node_modules</a></li>
<li><a href="../de423489/index.html">Ich bin Notarzt und m√∂chte √ºber das neue Apple Watch-Elektrokardiogramm sprechen</a></li>
<li><a href="../de423491/index.html">PHP Digest Nr. 139 (3. - 17. September 2018)</a></li>
<li><a href="../de423495/index.html">Was ist in XGBoost enthalten und was hat Go damit zu tun?</a></li>
<li><a href="../de423497/index.html">Lassen Sie uns versuchen, √ºber hierarchische Zustandsmaschinen im Allgemeinen und deren Unterst√ºtzung in SObjectizer-5 im Besonderen zu sprechen</a></li>
<li><a href="../de423499/index.html">DevBoy - wie ich ein Open Source-Ger√§teprojekt erstellt und ein Projekt auf Kickstarter gestartet habe</a></li>
<li><a href="../de423503/index.html">Meine Erfahrung in Deutschland zu bewegen, zu leben und zu studieren</a></li>
<li><a href="../de423505/index.html">Zuckerberg verkauft Facebook-Aktien f√ºr 13 Milliarden US-Dollar, damit ‚Äûunsere Kinder nie krank werden m√ºssen‚Äú</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>