<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”º ğŸ’ª ğŸš¶ğŸ½ python + matplotlibä¸­çš„è‡ªå®šä¹‰ç‰©ç†äº¤äº’çš„åŸºæœ¬æ¨¡æ‹Ÿ ğŸ‚ğŸ¿ ğŸšï¸ ğŸ‘¨ğŸ¼â€ğŸš’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä½ å¥½ 

 åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æè¿°æŸä¸ªé¢†åŸŸçš„å·¥ä½œï¼Œç„¶ååšå‡ºä¸€äº›æ¼‚äº®çš„åŠŸèƒ½ï¼ˆè¿™é‡Œçš„ä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼‰ã€‚ 



 æœ¬æ–‡å°†å‘ç”Ÿä»€ä¹ˆã€‚ 

 ä¸€èˆ¬æƒ…å†µï¼š 



1. æˆ‘ä»¬æè¿°äº†åŸºç¡€ï¼Œå³ä½¿ç”¨å‘é‡ï¼ˆå¯¹äºæ‰‹å¤´æ²¡æœ‰éº»æœ¨çš„äººä½¿ç”¨çš„è‡ªè¡Œè½¦ï¼‰ 
2. æˆ‘ä»¬æè¿°äº†ç›¸äº’ä½œç”¨çš„å®è´¨ç‚¹å’Œé¢†åŸŸ 
 ç‰¹æ®Šæƒ…å†µï¼ˆåŸºäºä¸€èˆ¬æƒ…å†µï¼‰ï¼š 



1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>python + matplotlibä¸­çš„è‡ªå®šä¹‰ç‰©ç†äº¤äº’çš„åŸºæœ¬æ¨¡æ‹Ÿ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467803/"> ä½ å¥½ <br><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æè¿°æŸä¸ªé¢†åŸŸçš„å·¥ä½œï¼Œç„¶ååšå‡ºä¸€äº›æ¼‚äº®çš„åŠŸèƒ½ï¼ˆè¿™é‡Œçš„ä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼‰ã€‚ <br><br><img src="https://habrastorage.org/webt/_u/hj/cw/_uhjcwkdv3vn28vmkcdlvgonnug.png"><br><br> æœ¬æ–‡å°†å‘ç”Ÿä»€ä¹ˆã€‚ <br><br> ä¸€èˆ¬æƒ…å†µï¼š <br><br><ol><li> æˆ‘ä»¬æè¿°äº†åŸºç¡€ï¼Œå³ä½¿ç”¨å‘é‡ï¼ˆå¯¹äºæ‰‹å¤´æ²¡æœ‰éº»æœ¨çš„äººä½¿ç”¨çš„è‡ªè¡Œè½¦ï¼‰ </li><li> æˆ‘ä»¬æè¿°äº†ç›¸äº’ä½œç”¨çš„å®è´¨ç‚¹å’Œé¢†åŸŸ </li></ol><br> ç‰¹æ®Šæƒ…å†µï¼ˆåŸºäºä¸€èˆ¬æƒ…å†µï¼‰ï¼š <br><br><ol><li>è®©æˆ‘ä»¬å¯è§†åŒ–ç”µç£åœºå¼ºåº¦çš„çŸ¢é‡åœºï¼ˆç¬¬ä¸€å¼ å’Œç¬¬ä¸‰å¼ å›¾ç‰‡ï¼‰ <br></li><li> æˆ‘ä»¬å°†å¯è§†åŒ–ç²’å­åœ¨ç”µç£åœºä¸­çš„è¿åŠ¨ <br></li></ol><br> åˆ‡é¢ä¸‹è§æˆ‘ï¼ <br><a name="habracut"></a><br><h1> ç†è®ºèƒŒæ™¯ç¼–ç¨‹ </h1><br><h3> å‘é‡ </h3><br> æ‰€æœ‰åŸºç¡€çš„åŸºç¡€éƒ½æ˜¯ä¸€ä¸ªå‘é‡ï¼ˆå°¤å…¶æ˜¯åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼‰ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†ä»å‘é‡çš„æè¿°å¼€å§‹ã€‚ æˆ‘ä»¬éœ€è¦ä»€ä¹ˆï¼Ÿ å‘é‡ï¼Œè·ç¦»ï¼Œæ¨¡å—å’Œä¸€äº›æŠ€æœ¯é—®é¢˜ä¸Šçš„ç®—æœ¯è¿ç®—ã€‚ æˆ‘ä»¬å°†ä»åˆ—è¡¨ç»§æ‰¿çš„å‘é‡ã€‚ è¿™æ˜¯å…¶åˆå§‹åŒ–çš„æ ·å­ï¼š <br><br><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vector</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(list)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *el)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> el: self.append(e)</code> </pre> <br> ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå‘é‡ <br><br><pre> <code class="python hljs">v = Vector(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre><br> è®©æˆ‘ä»¬è®¾ç½®ç®—æœ¯è¿ç®—åŠ æ³•ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vector</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(list)</span></span></span><span class="hljs-class">:</span></span> ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__add__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] + other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self + other</code> </pre><br> å¥½ï¼š <br><br><pre> <code class="python hljs">v1 = Vector(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) v2 = Vector(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>, <span class="hljs-number"><span class="hljs-number">23.2</span></span>) v1 + v2 &gt;&gt;&gt; [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">59</span></span>, <span class="hljs-number"><span class="hljs-number">26.2</span></span>]</code> </pre><br> æˆ‘ä»¬ç±»ä¼¼åœ°å®šä¹‰æ‰€æœ‰ç®—æœ¯è¿ç®—ï¼ˆå‘é‡çš„å®Œæ•´ä»£ç å°†æ›´ä½ï¼‰ã€‚ ç°åœ¨æ‚¨éœ€è¦è·ç¦»åŠŸèƒ½ã€‚ æˆ‘å¯ä»¥åˆ¶ä½œä¸€ä¸ªç²—ç³™çš„distï¼ˆv1ï¼Œv2ï¼‰-ä½†è¿™å¹¶ä¸æ¼‚äº®ï¼Œå› æ­¤è¯·é‡æ–°å®šä¹‰ï¼…è¿ç®—ç¬¦ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vector</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(list)</span></span></span><span class="hljs-class">:</span></span> ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__mod__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum((self - other) ** <span class="hljs-number"><span class="hljs-number">2</span></span>) ** <span class="hljs-number"><span class="hljs-number">0.5</span></span></code> </pre><br> å¥½ï¼š <br><br><pre> <code class="python hljs">v1 = Vector(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) v2 = Vector(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>, <span class="hljs-number"><span class="hljs-number">23.2</span></span>) v1 % v2 &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">58.60068258988115</span></span></code> </pre><br> æˆ‘ä»¬è¿˜éœ€è¦ä¸¤ç§æ–¹æ³•æ¥æ›´å¿«åœ°ç”ŸæˆçŸ¢é‡å’Œå®ç°æ¼‚äº®çš„è¾“å‡ºã€‚ è¿™é‡Œæ²¡æœ‰æ£˜æ‰‹çš„é—®é¢˜ï¼Œå› æ­¤è¿™é‡Œæ˜¯Vectorç±»çš„å®Œæ•´ä»£ç ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">æ‰€æœ‰å‘é‡ç±»ä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vector</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(list)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *el)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> el: self.append(e) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__add__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] + other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self + other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__sub__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] - other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self - other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__mul__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] * other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self * other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__truediv__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] / other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self / other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__pow__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] ** other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self ** other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__mod__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum((self - other) ** <span class="hljs-number"><span class="hljs-number">2</span></span>) ** <span class="hljs-number"><span class="hljs-number">0.5</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self % Vector.emptyvec(len(self)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dim</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> len(self) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__str__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(self) == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Empty"</span></span> r = [str(i) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"&lt; "</span></span> + <span class="hljs-string"><span class="hljs-string">" "</span></span>.join(r) + <span class="hljs-string"><span class="hljs-string">" &gt;"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_ipython_display_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> print(str(self)) @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">emptyvec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(lens=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">, n=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Vector(*[n <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(lens)]) @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">randvec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dim)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Vector(*[random.random() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(dim)])</code> </pre><br></div></div><br><h3> ç‰©è´¨ç‚¹ </h3><br> ç†è®ºä¸Šï¼Œè¿™é‡Œçš„ä¸€åˆ‡éƒ½å¾ˆç®€å•-è¯¥ç‚¹å…·æœ‰åæ ‡ï¼Œé€Ÿåº¦å’ŒåŠ é€Ÿåº¦ï¼ˆä¸ºç®€å•èµ·è§ï¼‰ã€‚ æ­¤å¤–ï¼Œå¥¹è¿˜æœ‰ä¸€ä¸ªè´¨é‡å’Œä¸€ç»„è‡ªå®šä¹‰å‚æ•°ï¼ˆä¾‹å¦‚ï¼Œå¯¹äºç”µç£åœºï¼Œç”µè·ä¸ä¼šä¼¤å®³æˆ‘ä»¬ï¼Œä½†æ²¡æœ‰äººæ‰“æ‰°æ‚¨è®¾ç½®è‡³å°‘ä¸€ä¸ªè‡ªæ—‹ï¼‰ã€‚ <br><br> åˆå§‹åŒ–å¦‚ä¸‹ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Point</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, coords, mass=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, q=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed=None, **properties)</span></span></span><span class="hljs-function">:</span></span> self.coords = coords <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> speed <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: self.speed = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(coords))]) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: self.speed = speed self.acc = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(coords))]) self.mass = mass self.__params__ = [<span class="hljs-string"><span class="hljs-string">"coords"</span></span>, <span class="hljs-string"><span class="hljs-string">"speed"</span></span>, <span class="hljs-string"><span class="hljs-string">"acc"</span></span>, <span class="hljs-string"><span class="hljs-string">"q"</span></span>] + list(properties.keys()) self.q = q <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> prop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> properties: setattr(self, prop, properties[prop])</code> </pre><br> ä¸ºäº†ç§»åŠ¨ï¼Œå›ºå®šå’ŒåŠ é€Ÿæˆ‘ä»¬çš„è§‚ç‚¹ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä»¥ä¸‹æ–¹æ³•ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Point</span></span></span><span class="hljs-class">:</span></span> ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.coords = self.coords + self.speed * dt <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">accelerate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.speed = self.speed + self.acc * dt <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">accinc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, force)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#        self.acc = self.acc + force / self.mass def clean_acc(self): self.acc = self.acc * 0</span></span></code> </pre><br> åšå¾—å¥½ï¼Œè§‚ç‚¹æœ¬èº«å°±åšå¥½äº†ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ç‚¹ä»£ç ï¼ˆè¾“å‡ºæ•ˆæœä¸é”™ï¼‰</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Point</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, coords, mass=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, q=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed=None, **properties)</span></span></span><span class="hljs-function">:</span></span> self.coords = coords <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> speed <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: self.speed = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(coords))]) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: self.speed = speed self.acc = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(coords))]) self.mass = mass self.__params__ = [<span class="hljs-string"><span class="hljs-string">"coords"</span></span>, <span class="hljs-string"><span class="hljs-string">"speed"</span></span>, <span class="hljs-string"><span class="hljs-string">"acc"</span></span>, <span class="hljs-string"><span class="hljs-string">"q"</span></span>] + list(properties.keys()) self.q = q <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> prop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> properties: setattr(self, prop, properties[prop]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.coords = self.coords + self.speed * dt <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">accelerate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.speed = self.speed + self.acc * dt <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">accinc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, force)</span></span></span><span class="hljs-function">:</span></span> self.acc = self.acc + force / self.mass <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clean_acc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.acc = self.acc * <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__str__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> r = [<span class="hljs-string"><span class="hljs-string">"Point {"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.__params__: r.append(<span class="hljs-string"><span class="hljs-string">" "</span></span> + p + <span class="hljs-string"><span class="hljs-string">" = "</span></span> + str(getattr(self, p))) r += [<span class="hljs-string"><span class="hljs-string">"}"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"\n"</span></span>.join(r) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_ipython_display_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> print(str(self))</code> </pre><br> ç»“æœï¼š <br><img src="https://habrastorage.org/webt/gu/p2/hv/gup2hvuve_ty_bblqsaceemz4iw.png"><br></div></div><br><h3> äº’åŠ¨é¢†åŸŸ </h3><br> æˆ‘ä»¬å°†äº¤äº’åœºç§°ä¸ºåŒ…å«æ‰€æœ‰ç‰©è´¨ç‚¹çš„é›†åˆå¹¶å¯¹å…¶æ–½åŠ ä½œç”¨åŠ›çš„å¯¹è±¡ã€‚ æˆ‘ä»¬å°†è€ƒè™‘æˆ‘ä»¬å¥‡å¦™çš„å®‡å®™çš„ç‰¹æ®Šæƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬å°†è¿›è¡Œä¸€ä¸ªè‡ªå®šä¹‰çš„äº¤äº’ï¼ˆå½“ç„¶ï¼Œè¿™å¾ˆå®¹æ˜“æ‰©å±•ï¼‰ã€‚ å£°æ˜ä¸€ä¸ªæ„é€ å‡½æ•°å¹¶æ·»åŠ ä¸€ä¸ªç‚¹ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InteractionField</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, F)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># F -   , F(p1, p2, r), p1, p2 - , r -    self.points = [] self.F = F def append(self, *args, **kwargs): self.points.append(Point(*args, **kwargs))</span></span></code> </pre><br> ç°åœ¨ï¼Œæœ‰è¶£çš„éƒ¨åˆ†æ˜¯å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åœ¨æ­¤æ—¶è¿”å›â€œå¼ åŠ›â€ã€‚ å°½ç®¡æ­¤æ¦‚å¿µæŒ‡çš„æ˜¯ç”µç£ç›¸äº’ä½œç”¨ï¼Œä½†åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸€äº›æŠ½è±¡çŸ¢é‡ï¼Œæˆ‘ä»¬å°†æ²¿ç€è¯¥çŸ¢é‡ç§»åŠ¨è¯¥ç‚¹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†æ‹¥æœ‰ç‚¹qçš„å±æ€§ï¼Œåœ¨ç‰¹å®šæƒ…å†µä¸‹-ç‚¹çš„ç”µè·ï¼ˆé€šå¸¸-æˆ‘ä»¬æƒ³è¦çš„ä»»ä½•ä¸œè¥¿ï¼Œç”šè‡³æ˜¯å‘é‡ï¼‰ã€‚ é‚£ä¹ˆCç‚¹çš„å¼ åŠ›æ˜¯å¤šå°‘ï¼Ÿ åƒè¿™æ ·ï¼š <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>C</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><msub><mi>F</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>C</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="38.647ex" height="2.419ex" viewBox="0 -780.1 16639.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-45" x="1635" y="0"></use><g transform="translate(2400,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼ˆ</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-76" x="3479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-65" x="3965" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-63" x="4431" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-43" x="4865" y="0"></use><g transform="translate(5625,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼‰</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMAIN-3D" x="6733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-73" x="8040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-75" x="8509" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-6D" x="9082" y="0"></use><g transform="translate(9960,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-63" x="1202" y="0"></use><g transform="translate(1635,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-69" x="910" y="-213"></use></g><g transform="translate(2623,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼ˆ</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-76" x="3703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-65" x="4188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-63" x="4655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-43" x="5088" y="0"></use><g transform="translate(5849,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ï¼‰</text></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mo>ï¼ˆ</mo></mrow><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mo>ï¼‰</mo></mrow><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><msub><mi>F</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>ï¼ˆ</mo></mrow><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mo>ï¼‰</mo></mrow></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ vec Eï¼ˆ\ vec Cï¼‰= \ sum {\ vec F_iï¼ˆ\ vec Cï¼‰} </script></p><br><br> ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶çš„å¼ åŠ› <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>C</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.565ex" height="2.057ex" viewBox="0 -780.1 2396 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-43" x="1635" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>C</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ vec C </script> ç­‰äºä½œç”¨åœ¨æŸä¸ªå•ä½ç‚¹ä¸Šçš„æ‰€æœ‰ç‰©è´¨ç‚¹çš„åŠ›ä¹‹å’Œã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InteractionField</span></span></span><span class="hljs-class">:</span></span> ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intensity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, coord)</span></span></span><span class="hljs-function">:</span></span> proj = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(coord.dim())]) single_point = Point(Vector(), mass=<span class="hljs-number"><span class="hljs-number">1.0</span></span>, q=<span class="hljs-number"><span class="hljs-number">1.0</span></span>) <span class="hljs-comment"><span class="hljs-comment">#       (   ,       F,      ) for p in self.points: if coord % p.coords &lt; 10 ** (-10): #      ,        ,   ,     (  ) continue d = p.coords % coord fmod = self.F(single_point, p, d) * (-1) #    -  proj = proj + (coord - p.coords) / d * fmod #  return proj</span></span></code> </pre><br> è‡³æ­¤ï¼Œæ‚¨å·²ç»å¯ä»¥ç»˜åˆ¶çŸ¢é‡åœºï¼Œä½†æˆ‘ä»¬å°†åœ¨æœ€åå®Œæˆã€‚ ç°åœ¨è®©æˆ‘ä»¬åœ¨äº’åŠ¨ä¸­è¿ˆå‡ºä¸€æ­¥ <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InteractionField</span></span></span><span class="hljs-class">:</span></span> ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.clean_acc() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: p.accinc(self.intensity(p.coords) * pq) p.accelerate(dt) p.move(dt)</code> </pre><br> è¿™é‡Œçš„ä¸€åˆ‡éƒ½å¾ˆç®€å•ã€‚ å¯¹äºæ¯ä¸ªç‚¹ï¼Œæˆ‘ä»¬ç¡®å®šè¿™äº›åæ ‡ä¸­çš„å¼ åŠ›ï¼Œç„¶åç¡®å®šåœ¨ETUç‰©æ–™ç‚¹ä¸Šçš„æœ€ç»ˆåŠ›ï¼š <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>F</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>E</mi><mo>&amp;#x2217;</mo><mi>q</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.476ex" height="2.419ex" viewBox="0 -780.1 7524.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-46" x="1635" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMAIN-3D" x="2662" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-76" x="3969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-65" x="4454" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-63" x="4921" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-45" x="5354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMAIN-2217" x="6341" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhi2NAsiX2hjPIKEizIWiFAyAKOgwg#MJMATHI-71" x="7064" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>F</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mi>E</mi><mo>âˆ—</mo><mi>q</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> \ vec F = \ vec E * q </script></p><br><br> å®šä¹‰ç¼ºå°‘çš„åŠŸèƒ½ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ‰€æœ‰äº¤äº’å­—æ®µä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InteractionField</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, F)</span></span></span><span class="hljs-function">:</span></span> self.points = [] self.F = F <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move_all</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: p.move(dt) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intensity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, coord)</span></span></span><span class="hljs-function">:</span></span> proj = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(coord.dim())]) single_point = Point(Vector(), mass=<span class="hljs-number"><span class="hljs-number">1.0</span></span>, q=<span class="hljs-number"><span class="hljs-number">1.0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> coord % p.coords &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> ** (<span class="hljs-number"><span class="hljs-number">-10</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> d = p.coords % coord fmod = self.F(single_point, p, d) * (<span class="hljs-number"><span class="hljs-number">-1</span></span>) proj = proj + (coord - p.coords) / d * fmod <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> proj <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.clean_acc() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: p.accinc(self.intensity(p.coords) * pq) p.accelerate(dt) p.move(dt) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clean_acc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: p.clean_acc() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> self.points.append(Point(*args, **kwargs)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gather_coords</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [p.coords <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points]</code> </pre><br></div></div><br><h1> ç‰¹ä¾‹ã€‚ ç²’å­è¿åŠ¨å’ŒçŸ¢é‡åœºå¯è§†åŒ– </h1><br> å› æ­¤ï¼Œæˆ‘ä»¬æ¥åˆ°äº†æœ€æœ‰è¶£çš„åœ°æ–¹ã€‚ è®©æˆ‘ä»¬ä»...å¼€å§‹ <br><br><h3> æ¨¡æ‹Ÿç”µç£åœºä¸­ç²’å­çš„è¿åŠ¨ </h3><br><pre> <code class="python hljs">u = InteractionField(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> p1, p2, r: <span class="hljs-number"><span class="hljs-number">300000</span></span> * -p1.q * p2.q / (r ** <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">0.1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">3</span></span>): u.append(Vector.randvec(<span class="hljs-number"><span class="hljs-number">2</span></span>) * <span class="hljs-number"><span class="hljs-number">10</span></span>, q=random.random() - <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre><br> å®é™…ä¸Šï¼Œç³»æ•°kåº”è¯¥ç­‰äºæŸç§åäº¿ï¼ˆ9 * 10 ^ï¼ˆ-9ï¼‰ï¼‰ï¼Œä½†æ˜¯ç”±äºå®ƒå°†åœ¨æ—¶é—´t-&gt; 0ä¹‹å‰è¢«æ·¬ç­ï¼Œå› æ­¤æˆ‘ç«‹å³å†³å®šä½¿å®ƒä»¬éƒ½è¶³å¤Ÿå¤§ã€‚ å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„ç‰©ç†å­¦ä¸­ï¼Œk = 300'000ã€‚ å…³äºå…¶ä»–æ‰€æœ‰å†…å®¹ï¼Œæˆ‘è®¤ä¸ºè¿™å¾ˆæ¸…æ¥šã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">r ** 2 + 0.1</b> <div class="spoiler_text"><br>  -è¿™æ˜¯é¿å…è¢«é›¶é™¤çš„é—®é¢˜ã€‚æˆ‘ä»¬å½“ç„¶å¯èƒ½ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼Œè§£å†³äº†ä¸€ä¸ªå¾ˆå¤§çš„æ‰©æ•£ç³»ç»Ÿï¼Œä½†æ˜¯é¦–å…ˆï¼Œå¯¹äºä¸¤ä¸ªä»¥ä¸Šçš„ç‰©ä½“ï¼Œæ²¡æœ‰è¿åŠ¨æ–¹ç¨‹ï¼Œå…¶æ¬¡ï¼Œâ€œåˆå­¦è€…çš„æ–‡ç« â€æ¦‚å¿µä¸­æ˜¾ç„¶æ²¡æœ‰åŒ…å«è¿™ä¸ªæ–¹ç¨‹ã€‚ <br></div></div><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ²¿æ¯ä¸ªè½´æ·»åŠ åä¸ªç‚¹ï¼ˆäºŒç»´ç©ºé—´ï¼‰ï¼Œåæ ‡ä»0åˆ°10ã€‚ åŒæ ·ï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªç‚¹ä»-0.25åˆ°0.25æ”¶è´¹ã€‚ ç°åœ¨è¿›è¡Œå¾ªç¯å¹¶æ ¹æ®å…¶åæ ‡ï¼ˆå’Œè½¨è¿¹ï¼‰ç»˜åˆ¶ç‚¹ï¼š <br><br><pre> <code class="python hljs">X, Y = [], [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">130</span></span>): u.step(<span class="hljs-number"><span class="hljs-number">0.0006</span></span>) xd, yd = zip(*u.gather_coords()) X.extend(xd) Y.extend(yd) plt.figure(figsize=[<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>]) plt.scatter(X, Y) plt.scatter(*zip(*u.gather_coords()), color=<span class="hljs-string"><span class="hljs-string">"orange"</span></span>) plt.show()</code> </pre><br> åº”è¯¥å‘ç”Ÿä»€ä¹ˆï¼š <br><br><img src="https://habrastorage.org/webt/en/px/hm/enpxhmzga54aedh3zunn6vwl9ns.png"><br><br> å®é™…ä¸Šï¼Œç»˜å›¾æ˜¯å®Œå…¨éšæœºçš„ï¼Œå› ä¸ºåœ¨åŠ›å­¦å‘å±•çš„æ—¶åˆ»ï¼Œæ¯ä¸ªç‚¹çš„è½¨è¿¹éƒ½æ˜¯ä¸å¯é¢„æµ‹çš„ã€‚ <br><br><h3> çŸ¢é‡åœºå¯è§†åŒ– </h3><br> è¿™é‡Œçš„ä¸€åˆ‡éƒ½å¾ˆç®€å•ã€‚ æˆ‘ä»¬éœ€è¦ç»è¿‡ä¸€äº›æ­¥éª¤ï¼Œå¹¶åœ¨æ­£ç¡®çš„æ–¹å‘ä¸Šåœ¨æ¯ä¸ªåæ ‡ä¸Šç»˜åˆ¶ä¸€ä¸ªå‘é‡ã€‚ <br><br><pre> <code class="python hljs">fig = plt.figure(figsize=[<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]) res = [] STEP = <span class="hljs-number"><span class="hljs-number">0.3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> np.arange(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, STEP): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> y <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> np.arange(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, STEP): inten = u.intensity(Vector(x, y)) F = inten.mod() inten /= inten.mod() * <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-comment"><span class="hljs-comment">#     res.append(([x - inten[0] / 2, x + inten[0] / 2], [y - inten[1] / 2, y + inten[1] / 2], F)) for r in res: plt.plot(r[0], r[1], color=(sigm(r[2]), 0.1, 0.8 * (1 - sigm(r[2])))) #        plt.show()</span></span></code> </pre><br> å¤§æ¦‚åº”è¯¥å¾—å‡ºè¿™ä¸ªç»“è®ºã€‚ <br><br><img src="https://habrastorage.org/webt/hb/3w/ou/hb3wouiyh8_k5ob-drwfsiezzyu.png"><br><br> æ‚¨å¯ä»¥åŠ é•¿å‘é‡æœ¬èº«ï¼Œå°†* 4æ›¿æ¢ä¸º* 1.5ï¼š <br><br><img src="https://habrastorage.org/webt/3f/5z/i1/3f5zi1kln7lgmw3l_fwrviuwjpy.png"><br><br><h3> æˆ‘ä»¬ç©çš„æ˜¯ç«‹ä½“æ„Ÿå’Œé€ å‹ </h3><br> åˆ›å»ºä¸€ä¸ªå…·æœ‰200ä¸ªç‚¹çš„5ç»´ç©ºé—´ï¼Œå¹¶ä¸”è¯¥äº¤äº’ä¸å–å†³äºè·ç¦»çš„å¹³æ–¹ï¼Œè€Œå–å†³äº4åº¦ã€‚ <br><br><pre> <code class="python hljs">u = InteractionField(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> p1, p2, r: <span class="hljs-number"><span class="hljs-number">300000</span></span> * -p1.q * p2.q / (r ** <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">0.1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">200</span></span>): u.append(Vector.randvec(<span class="hljs-number"><span class="hljs-number">5</span></span>) * <span class="hljs-number"><span class="hljs-number">10</span></span>, q=random.random() - <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre><br> ç°åœ¨ï¼Œæ‰€æœ‰åæ ‡ï¼Œé€Ÿåº¦ç­‰éƒ½å®šä¹‰ä¸ºäº”ä¸ªç»´åº¦ã€‚ ç°åœ¨è®©æˆ‘ä»¬å»ºæ¨¡ï¼š <br><br><pre> <code class="python hljs">velmod = <span class="hljs-number"><span class="hljs-number">0</span></span> velocities = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">100</span></span>): u.step(<span class="hljs-number"><span class="hljs-number">0.0005</span></span>) velmod = sum([p.speed.mod() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> u.points]) <span class="hljs-comment"><span class="hljs-comment">#       velocities.append(velmod) plt.plot(velocities) plt.show()</span></span></code> </pre><br><img src="https://habrastorage.org/webt/md/ak/v0/mdakv0sa55ytezwm0zxe_i8toss.png"><br><br> è¿™æ˜¯åœ¨ä»»ä½•ç»™å®šæ—¶é—´æ‰€æœ‰é€Ÿåº¦æ€»å’Œçš„å›¾è¡¨ã€‚ å¦‚æ‚¨æ‰€è§ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒä»¬æ­£åœ¨ç¼“æ…¢åŠ é€Ÿã€‚ <br><br> å¥½å§ï¼Œè¿™æ˜¯å…³äºå¦‚ä½•ä½¿è¿™ç§ç®€å•çš„äº‹æƒ…çš„ç®€çŸ­è¯´æ˜ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ç©èŠ±ä¼šå‘ç”Ÿä»€ä¹ˆï¼š <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_iE7qDSQpSI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><div class="spoiler">  <b class="spoiler_title">æ‰€æœ‰ä»£ç ä¸æ¼”ç¤º</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vector</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(list)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *el)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> el: self.append(e) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__add__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] + other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self + other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__sub__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] - other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self - other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__mul__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] * other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self * other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__truediv__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] / other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self / other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__pow__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(other) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Vector: <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(self) == len(other), <span class="hljs-string"><span class="hljs-string">"Error 0"</span></span> r = Vector() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(self)): r.append(self[i] ** other[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: other = Vector.emptyvec(lens=len(self), n=other) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self ** other <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__mod__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, other)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum((self - other) ** <span class="hljs-number"><span class="hljs-number">2</span></span>) ** <span class="hljs-number"><span class="hljs-number">0.5</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self % Vector.emptyvec(len(self)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dim</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> len(self) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__str__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(self) == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Empty"</span></span> r = [str(i) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"&lt; "</span></span> + <span class="hljs-string"><span class="hljs-string">" "</span></span>.join(r) + <span class="hljs-string"><span class="hljs-string">" &gt;"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_ipython_display_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> print(str(self)) @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">emptyvec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(lens=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">, n=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Vector(*[n <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(lens)]) @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">randvec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dim)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Vector(*[random.random() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(dim)]) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Point</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, coords, mass=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, q=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, speed=None, **properties)</span></span></span><span class="hljs-function">:</span></span> self.coords = coords <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> speed <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: self.speed = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(coords))]) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: self.speed = speed self.acc = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(coords))]) self.mass = mass self.__params__ = [<span class="hljs-string"><span class="hljs-string">"coords"</span></span>, <span class="hljs-string"><span class="hljs-string">"speed"</span></span>, <span class="hljs-string"><span class="hljs-string">"acc"</span></span>, <span class="hljs-string"><span class="hljs-string">"q"</span></span>] + list(properties.keys()) self.q = q <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> prop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> properties: setattr(self, prop, properties[prop]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.coords = self.coords + self.speed * dt <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">accelerate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.speed = self.speed + self.acc * dt <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">accinc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, force)</span></span></span><span class="hljs-function">:</span></span> self.acc = self.acc + force / self.mass <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clean_acc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.acc = self.acc * <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__str__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> r = [<span class="hljs-string"><span class="hljs-string">"Point {"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.__params__: r.append(<span class="hljs-string"><span class="hljs-string">" "</span></span> + p + <span class="hljs-string"><span class="hljs-string">" = "</span></span> + str(getattr(self, p))) r += [<span class="hljs-string"><span class="hljs-string">"}"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"\n"</span></span>.join(r) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_ipython_display_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> print(str(self)) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InteractionField</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, F)</span></span></span><span class="hljs-function">:</span></span> self.points = [] self.F = F <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move_all</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: p.move(dt) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intensity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, coord)</span></span></span><span class="hljs-function">:</span></span> proj = Vector(*[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(coord.dim())]) single_point = Point(Vector(), mass=<span class="hljs-number"><span class="hljs-number">1.0</span></span>, q=<span class="hljs-number"><span class="hljs-number">1.0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> coord % p.coords &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> ** (<span class="hljs-number"><span class="hljs-number">-10</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> d = p.coords % coord fmod = self.F(single_point, p, d) * (<span class="hljs-number"><span class="hljs-number">-1</span></span>) proj = proj + (coord - p.coords) / d * fmod <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> proj <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, dt)</span></span></span><span class="hljs-function">:</span></span> self.clean_acc() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: p.accinc(self.intensity(p.coords) * pq) p.accelerate(dt) p.move(dt) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clean_acc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points: p.clean_acc() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> self.points.append(Point(*args, **kwargs)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gather_coords</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [p.coords <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.points] <span class="hljs-comment"><span class="hljs-comment">#  import matplotlib.pyplot as plt import numpy as np import time #     if False: u = InteractionField(lambda p1, p2, r: 300000 * -p1.q * p2.q / (r ** 2 + 0.1)) for i in range(10): u.append(Vector.randvec(2) * 10, q=(random.random() - 0.5) / 2) X, Y = [], [] for i in range(130): u.step(0.0006) xd, yd = zip(*u.gather_coords()) X.extend(xd) Y.extend(yd) plt.figure(figsize=[8, 8]) plt.scatter(X, Y) plt.scatter(*zip(*u.gather_coords()), color="orange") plt.show() def sigm(x): return 1 / (1 + 1.10 ** (-x/1000)) #    if False: u = InteractionField(lambda p1, p2, r: 300000 * -p1.q * p2.q / (r ** 2 + 0.1)) for i in range(3): u.append(Vector.randvec(2) * 10, q=random.random() - 0.5) fig = plt.figure(figsize=[5, 5]) res = [] STEP = 0.3 for x in np.arange(0, 10, STEP): for y in np.arange(0, 10, STEP): inten = u.intensity(Vector(x, y)) F = inten.mod() inten /= inten.mod() * 1.5 res.append(([x - inten[0] / 2, x + inten[0] / 2], [y - inten[1] / 2, y + inten[1] / 2], F)) for r in res: plt.plot(r[0], r[1], color=(sigm(r[2]), 0.1, 0.8 * (1 - sigm(r[2])))) plt.show() #    5-  if False: u = InteractionField(lambda p1, p2, r: 300000 * -p1.q * p2.q / (r ** 4 + 0.1)) for i in range(200): u.append(Vector.randvec(5) * 10, q=random.random() - 0.5) velmod = 0 velocities = [] for i in range(100): u.step(0.0005) velmod = sum([p.speed.mod() for p in u.points]) velocities.append(velmod) plt.plot(velocities) plt.show()</span></span></code> </pre><br></div></div><br> ä¸‹ä¸€ç¯‡æ–‡ç« å¯èƒ½ä¼šæ¶‰åŠæ›´å¤æ‚çš„å»ºæ¨¡ï¼Œä»¥åŠæµä½“å’ŒNavier-Stokesæ–¹ç¨‹ã€‚ <br>  UPDï¼šæˆ‘çš„åŒäº‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨è¿™é‡Œ</a>å†™çš„ä¸€ç¯‡æ–‡ç«  <br><br> æ„Ÿè°¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">MomoDev</a>å¸®åŠ©æ¸²æŸ“è§†é¢‘ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN467803/">https://habr.com/ru/post/zh-CN467803/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN467791/index.html">Google Data Studioä¸­çš„é¡µé¢æ»šåŠ¨åˆ†æ</a></li>
<li><a href="../zh-CN467793/index.html">å•äººäº’è”ç½‘å…¬å¸çš„æ— èŠæŠ€æœ¯å †æ ˆ</a></li>
<li><a href="../zh-CN467795/index.html">å…³äºåŠ å¯†è´§å¸å’Œå›½å®¶æ³•è§„çš„è¯´æ˜</a></li>
<li><a href="../zh-CN467797/index.html">â€œä¸ºâ€¦â€¦è€Œç¬‘â€ï¼šä¸ºä»€ä¹ˆæ‚¨éœ€è¦æ²¡æœ‰â€œæˆ˜æ–—â€åº”ç”¨ç¨‹åºçš„è½¯ä»¶å·¥å…·</a></li>
<li><a href="../zh-CN467801/index.html">æœ€å°çš„è‡ªåŠ¨åŒ–ã€‚ ç¬¬1.1éƒ¨åˆ†ã€‚ è™šæ‹ŸåŒ–åŸºç¡€</a></li>
<li><a href="../zh-CN467807/index.html">åœ¨ä¿„ç½—æ–¯ä¹°å–åŠ å¯†è´§å¸ï¼šæ–¹æ³•ï¼Œåˆæ³•åŒ–ï¼Œé£é™©</a></li>
<li><a href="../zh-CN467811/index.html">æ¶æ„å’Œç¼–ç¨‹Fairchild Channel F</a></li>
<li><a href="../zh-CN467813/index.html">å®¡æŸ¥FSTECç¬¬17é˜¶çš„å˜æ›´</a></li>
<li><a href="../zh-CN467817/index.html">å…³äºç”Ÿæˆè®¾è®¡æ¨¡å¼çš„ä¸€äº›çŸ¥è¯†</a></li>
<li><a href="../zh-CN467821/index.html">ç®€åŒ–å¹¶å‰Šå‡éœ€æ±‚ï¼šDoomçš„åˆ›å»ºè€…John Romeroè®¿è°ˆ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>