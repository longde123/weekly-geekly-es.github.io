<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖊️ 👇🏼 🏂🏽 Ingénierie des cadeaux ✒️ 👩🏻‍🏭 💅🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En dehors de la fenêtre il pleut, décembre est au calendrier. Le temps des vacances approche et donc celui des cadeaux. Le collègue Pavel veut un nouv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ingénierie des cadeaux</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480792/"><img src="https://habrastorage.org/webt/md/lw/ph/mdlwpht7vhixr2jkxrftetb8hv4.jpeg"><br><br>  En dehors de la fenêtre il pleut, décembre est au calendrier.  Le temps des vacances approche et donc celui des cadeaux.  Le collègue Pavel veut un nouvel ordinateur portable pour lui-même, et sa petite amie Masha veut une maison au bord de la mer.  Et malgré le salaire digne de la profession de programmeur tyzh, nous ne vivons pas dans un monde de possibilités infinies, ce qui signifie que je ne peux pas donner à ces gens exactement ce qu'ils veulent le plus (même si Pacha est peut-être mon meilleur Pavel, qui Je sais, mais Masha va très bien). <br><br>  C'est là que le problème des «cadeaux bon marché» apparaît.  Cela ne fonctionne pas de donner un cadeau cher à tout le monde, mais je ne veux pas donner une autre boîte de chocolats, une bougie ou une figurine indistincte.  Vous devez donc combiner affaires et plaisir - j'aime faire les choses de mes propres mains, et le résultat est excellent comme cadeau.  Ceci est une histoire sur la façon dont j'ai de nouveau prétendu être ingénieur et fabriqué plusieurs cadeaux à la main. <br><a name="habracut"></a><br><h2>  Une petite digression du sujet principal </h2><br>  Je ne peux pas aller directement au sujet principal, je vais donc partir de loin.  Il y a quelques années, le jeu «The Witcher 3» est sorti.  Mon ami m'a conseillé de jouer, et en général j'ai vraiment admiré le jeu.  Ensuite, j'ai décidé quoi faire et lui donner quelque chose de thématique lié au jeu ... Je n'entrerai pas trop dans la description du jeu (Google aidera tout le monde) ou je dirais que peu de choses me sont venues à l'esprit pour les mots clés "The Witcher, Engineer, Gift". <br><br>  Le personnage principal du jeu a un cheval nommé "Roach" (en voix russe), le héros la conduit de temps en temps avec la phrase "Move, Roach".  J'ai décidé de fabriquer un jouet mécanique sur le thème des "cafards émouvants". <br><br>  Naturellement, le cadeau a été conçu comme une chose complètement inutile, stupide mais drôle, donc le plan était le suivant: <br><br><ol><li>  Il y a une boîte qui cache le mécanisme en soi. </li><li>  Le mécanisme est un arbre en rotation que le cheval déplace. </li><li>  La «ténacité» maximale du mouvement du cheval est la bienvenue.  Au départ, on pensait même que le cheval devait se déplacer comme un poisson, et non comme un cheval (après tout, un gardon), mais le résultat était «quelque chose entre les deux». </li><li>  Tout cela sera fait à partir de contreplaqué, qui selon les dessins peut être coupé avec précision avec un laser. </li></ol><br>  Le principal inconvénient du choix du matériau et du fait que la découpe sera réalisée sur commande est le fait que j'ai perdu l'opportunité de créer un prototype, ce qui signifie que tous les problèmes de mains tordues et de non-respect de la règle des «sept fois la mesure» se sont fait sentir assez rapidement: <br><br><img src="https://habrastorage.org/webt/bq/9h/e2/bq9he2doyiixrvhr47zha5frml0.jpeg"><br><br>  Bien qu'à la fin, le fait que de nombreux détails du mécanisme de jeu en raison de trop grands écarts aient aidé à compenser le fait que j'ai connecté les pièces et l'arbre de façon assez tordue.  Ici, comme on dit, «moins moins donne plus» et le mécanisme dans son ensemble a fonctionné comme prévu: <br><br><img src="https://habrastorage.org/webt/cn/x2/gf/cnx2gfjjm2rasl3jtcd3oah-ors.gif"><br><br>  Après il n'y avait plus qu'une petite peinture et le résultat était une telle boîte: <br><br><img src="https://habrastorage.org/webt/fe/x9/uf/fex9ufxoprduhzobingucsoinm4.jpeg"><br><br>  Ensuite, quelqu'un dira qu'il était nécessaire de rendre la boîte transparente pour qu'il soit possible d'observer le travail de l'intérieur, mais en fait j'ai d'abord pensé que je ne pouvais pas assembler l'ensemble du mécanisme et de la boîte si propre et soigneusement de l'intérieur qu'il ne ferait pas de mal regardez à travers les parois transparentes de la boîte.  Par conséquent, une boîte opaque est une mesure nécessaire. <br><br>  Il ne reste plus qu'à l'emballer, à nouer un noeud sur une boite et le cadeau est prêt: <br><br><img src="https://habrastorage.org/webt/k9/47/k_/k947k_nkfln04gnb6adkqda9vs4.jpeg"><br><br>  Mais afin de ne pas déranger l'enfant intérieur, qui voulait se sentir comme un ingénieur dans une situation où en fait j'ai collé quelques morceaux de contreplaqué, j'ai décidé de faire un «dessin».  Pardonnez-moi tous ceux qui comprennent quelque chose dans les dessins techniques, car  Je comprends que c'est plus une parodie du dessin qu'un vrai dessin, mais comme il me semblait, il a ajouté de la valeur à un simple jouet: <br><br><img src="https://habrastorage.org/webt/pk/t2/ms/pkt2msf9f2s496bchyrmdi6fs0w.png"><br><br><h2>  Aujourd'hui, je ... </h2><br>  Parfois, le destin joue avec nous et laisse entendre que quelque chose devrait arriver bientôt.  L'histoire d'un de mes appareils commence exactement de la même manière.  J'ai commandé quelques petits appareils électroniques d'une valeur d'environ 5 $, qui, comme d'habitude, ont passé un mois sur la route, après quoi j'ai reçu un SMS que le colis m'attendait au bureau de poste local.  La boîte s'est avérée beaucoup plus grande que ce à quoi je m'attendais et a immédiatement soulevé des doutes quant à son contenu.  Les doutes ont été confirmés - à l'intérieur, en plus des petites choses que j'ai commandées, il y avait aussi un écran e-ink tricolore avec une diagonale de 4,2 pouces.  J'ai contacté le vendeur, il a confirmé qu'il avait gâché quelque chose lors de l'emballage, mais a dit que je peux considérer cela comme un cadeau et l'utiliser comme bon me semble. <br><br>  Le destin m'a laissé entendre que le moment était venu de commencer un nouveau projet et que ce projet sera quelque chose avec un affichage à encre électronique.  Après m'être brièvement familiarisé avec les spécifications de l'appareil et connecté l'écran au contrôleur, je me suis assuré que les spécifications ne me mentaient pas sur le temps de mise à jour.  L'écran a été mis à jour pendant plus de 10 secondes, clignotant et essayant de me provoquer une crise d'épilepsie: <br><br><img src="https://habrastorage.org/webt/ni/w1/h5/niw1h5wpnfczyud_2593yvxq-mg.gif"><br>  (Je n'ai pas de premières photos de la connexion de l'écran, alors ici, l'appareil a déjà un look plus significatif) <br><br>  Il est devenu clair que vous avez besoin d'un appareil simple qui ne nécessitera pas d'animations complexes (et des animations en général).  Et puis je suis tombé sur un calendrier d'humeur: <br><img src="https://habrastorage.org/webt/zm/a0/dg/zma0dglgpkea9lkxbnqlndawc-o.jpeg"><br><br>  Le calendrier de l'humeur est un ensemble d'images simples et de signatures ironiques.  J'ai décidé que je ferais un calendrier (qui n'est en fait pas du tout un calendrier) avec le nom "Today I" ... Ce sera un appareil simple qui affiche chaque jour une image caractérisant "l'état d'esprit" aujourd'hui et une description de celui-ci.  De plus, le calendrier pourrait également avoir d'autres fonctions, mais le calendrier principal serait précisément le «calendrier» - sa propre image pour chaque jour. <br><br>  Le module papier électronique permettait d'afficher trois couleurs (noir, rouge et blanc), qui devaient être transmises au module, comme deux images - noir et blanc et rouge et blanc.  En fait, il serait plus correct de dire que l'écran attend simplement un bitmap monochrome, où chaque bit détermine la couleur d'un pixel (je ne suis pas sûr que ce terme soit applicable au papier électronique, mais j'espère que l'idée est claire).  Un bitmap séparé peut être défini pour le canal noir ou rouge.  Ainsi, il y a un ensemble d'octets où chaque bit qui est mis à 1 correspondra à un pixel de couleur, et tous les bits qui restent 0 seront des pixels blancs à l'écran.  La résolution d'écran est de 400 x 300 pixels, soit  pour une image en noir et blanc, 15 000 octets seront nécessaires (8 pixels sont encodés dans un octet).  Pour les trois couleurs, il faudra 30 000 octets, si vous n'essayez pas de compresser l'image de manière plus compacte.  Du point de vue de la mise en œuvre, les créateurs de l'affichage pourraient simplement sélectionner deux bits par pixel et stocker l'état réel des choses (où est le rouge, où est le noir et où est le blanc), mais cela nécessiterait les mêmes 30000 octets, mais même pour les images monochromes nécessiterait le transfert de 30 000 octets. <br><br>  Comme dans n'importe lequel de mes autres «métiers», j'ai commencé à m'inventer des tâches pour que tout ne se transforme pas en «brancher le câblage et télécharger la bibliothèque».  Même si nous prenons en compte la possibilité d'implémenter une sorte d'algorithme de compression d'image du côté du contrôleur, il est devenu clair que sans un stockage externe pour les fichiers d'image, le contrôleur serait très déprimé.  Il a été décidé de prendre une carte SD et d'écrire un simple wrapper de code pour travailler avec FAT32.  Bien sûr, il serait possible de se passer d'un système de fichiers et d'écrire directement des données sur une carte mémoire, mais il me semblait que c'était moins pratique pour ajouter de nouveaux fichiers, et il était intéressant pour moi de mettre en œuvre les opérations de base pour travailler avec FAT32 de mes propres mains. <br><br>  Il est important de préciser que j'ai l'habitude d'écrire des choses moi-même (vous ne devriez pas me dire qu'il y a une mer de bibliothèques, je connais et avec Google) quand je fais de telles choses  Avant cela, je n'avais pas eu le plaisir de travailler avec FAT32 à un niveau bas, c'était un processus plutôt amusant. <br><br>  Je n'entrerai pas dans les détails du travail avec FAT32 et la carte SD dans son ensemble, car  Internet regorge d'articles sur ce sujet (et je ne veux pas transformer mon histoire en une nouvelle version des spécifications), mais je vais parler de certaines choses qui devaient être mises en œuvre.  Il est nécessaire d'implémenter non seulement les fonctions de lecture d'un fichier et d'écriture dans un fichier (j'ai décidé de stocker certains paramètres et conditions sur la même carte SD, et non dans l'EEPROM), mais aussi les fonctions de recherche d'un fichier dans le système de fichiers si vous avez besoin de travailler avec de la manière habituelle. <br><br>  Toutes les données de la carte mémoire sont divisées en grappes (l'unité adressable principale du système de fichiers FAT32) et les grappes sont déjà divisées en secteurs.  Pour lire le fichier «habr.txt» de la carte SD en FAT32, vous avez besoin de: <br><br><ol><li>  Initialisez la carte mémoire. </li><li>  Lisez le secteur à l'adresse zéro et vérifiez que le système de fichiers FAT32 a un certain en-tête (vous pouvez sauter cette étape si nous croyons en la chance). </li><li>  Lisez le secteur à l'adresse zéro et obtenez «Logical Block Addressing» (LBA). </li><li>  Lisez le secteur à l'adresse reçue (LBA) et obtenez-en les données nécessaires (quel cluster est la racine - le répertoire racine, combien de secteurs se trouvent dans le cluster, etc.). </li><li>  Lisez le cluster «Répertoire racine» (en fait, la lecture se fait par secteurs, il vous suffit de lire autant de secteurs qu'il y a de secteurs dans le cluster) par son numéro.  Il a sa propre formule pour convertir les numéros de série du cluster en adresses physiques.  Les informations sur les fichiers sont stockées ici, nous lisons donc les données à la recherche du fichier souhaité.  Il y a une bagatelle de plus sur les noms de fichiers: le nom peut être court ou long, selon cela, les données sont stockées soit en un seul endroit (dans la même structure) soit dans un enregistrement supplémentaire, qui doit également être lu séparément.  Lorsqu'un fichier portant le nom souhaité est trouvé, nous obtenons le cluster dans lequel se trouve son début (ou peut-être le fichier entier s'il tient dans la taille du cluster), ainsi que la taille du fichier.  Si le fichier n'est pas trouvé dans ce cluster, nous recherchons le cluster suivant et répétons le processus de recherche de fichier. </li><li>  Lisez le cluster à l'adresse trouvée.  Continuez à lire les clusters et recherchez le cluster suivant jusqu'à ce que toutes les données aient été lues. </li></ol><br>  Il me semble qu'il est plus facile de dire le principe du système de fichiers à ceux qui ont mis en place des listes chaînées au moins une fois, car  en fait, le système de fichiers FAT32 est un ensemble de blocs de données et une sorte de tableau qui indique où chercher le prochain bloc de données.  La lecture des données de FAT32 est un processus où nous lisons les données, recherchons l'adresse du bloc suivant, lisons les données, recherchons l'adresse du bloc suivant, etc. <br><br>  Je n'ai pas implémenté tous les scénarios possibles et simplifié certaines choses: <br><br><ul><li>  Tous les fichiers sont à la racine de la carte mémoire et la navigation dans les répertoires n'est pas utilisée. </li><li>  Tous les fichiers ont des noms courts. </li><li>  Au démarrage, le contrôleur lit une liste de fichiers et les stocke en mémoire afin de ne pas rechercher à nouveau chaque fichier. </li><li>  Le nombre maximum de fichiers est limité par une constante (et en fait je n'ai dessiné que quelques dizaines d'images). </li></ul><br>  En bref, tout ce qui précède est une raison convaincante de prendre une bibliothèque prête à l'emploi et de ne pas passer beaucoup de temps à lire la documentation, à développer et à déboguer.  Je me conseillerais de mettre en œuvre de telles choses uniquement à des fins éducatives ou «pour le plaisir». <br><br>  L'écran a également imposé certaines limitations, comme  n'importe quelle image dessus est affichée de cette façon: <br><br><ol><li>  Nous nous réveillons et initialisons l'écran (afin de prolonger sa durée de vie et d'économiser de l'énergie, l'écran dort essentiellement). </li><li>  Nous exposons le canal nécessaire (par exemple, noir). </li><li>  Nous transmettons 15 000 octets de l'image. </li><li>  Nous exposons le canal nécessaire (par exemple, rouge). </li><li>  Nous transmettons 15 000 octets de l'image. </li><li>  Nous disons à l'écran de tirer les données du tampon. </li><li>  Nous attendons que l'affichage ait fini de dessiner. </li><li>  Nous disons à l'écran de dormir. </li></ol><br>  Pour les images monochromes, vous pouvez ignorer les étapes 4 et 5. Pour une image en trois couleurs, l'ordre de transmission des images en noir et blanc et rouge-blanc n'est pas important, car  le rouge est toujours peint sur le noir, le noir n'est que sur le blanc et seuls les pixels restent blancs, qui sont blanc et noir et blanc et rouge et blanc. <br><br>  Pour plus de simplicité (afin de ne pas augmenter le nombre total de fichiers), j'ai décidé de stocker les images en noir et blanc et rouge-blanc en un seul fichier, où l'image en noir et blanc est immédiatement suivie de rouge-blanc: <br><br><img src="https://habrastorage.org/webt/qo/p-/4j/qop-4jlidhtf82tthoxxspebl2o.png"><br><br>  Le résultat de la comparaison de ces images était quelque chose comme ça (il me semble que chacun de nous au moins une fois dans sa vie se sentait comme un cerf avec des cornes - une jambe): <br><br><img src="https://habrastorage.org/webt/7o/tb/cs/7otbcsv6yqjrqivfjutep87b1am.png"><br><br>  En fait, les deux images ont été suivies d'une autre image qui contenait une description de l'état (en cliquant sur le bouton, vous pouvez obtenir une description qui correspond à l'image qui est affichée aujourd'hui). <br><br>  En raison de la mémoire limitée du contrôleur, les données de la carte mémoire ne sont jamais lues entièrement dans la mémoire du contrôleur.  L'image de la carte mémoire est lue en fragments qui sont déterminés par la taille du secteur (pour simplifier, nous supposons que cette taille est toujours statique et ne peut pas changer de carte en carte) et tombe dans le processus de traitement des données de la carte.  Dans mon implémentation, la fonction de lecture d'un fichier prend en entrée le numéro de cluster, la taille du fichier et le rappel à "tirer" pour chaque secteur lu.  Cette approche nous a permis d'utiliser plusieurs fonctions différentes de traitement de fichiers pour lire et afficher l'image elle-même ou sa description. <br><br>  Ainsi, la logique suivante est tombée sur la fonction de rappel de lecture d'images à partir d'une carte mémoire: <br><br><ol><li>  Définissez le canal requis (le canal est déterminé de manière aléatoire) avant d'envoyer des données à l'écran. </li><li>  Gardez une trace des données transmises pour changer de canal lorsque l'envoi des données pour le canal précédent est terminé. </li><li>  Envoyer les données reçues de la carte. </li><li>  Déterminez que les données nécessaires ont été transmises et que le reste des données (image avec description) peut être ignoré. </li></ol><br>  C'était compliqué par le fait que j'ai décidé de saisir des images contenant plus de données que ce qui devrait être affiché à l'écran.  C'est-à-dire  il y a une image, qui est l'arrière-plan et est toujours statique et correspond à la taille de l'écran, et il y a une image beaucoup plus grande à partir de laquelle vous devez prendre une zone aléatoire (la taille de l'écran) et l'afficher. <br><br>  Une telle image imposait des exigences supplémentaires au gestionnaire - il était nécessaire de calculer combien d'octets de la ligne actuelle de l'écran ont été transférés, combien il fallait ajouter lors du prochain appel (si la ligne tombait à la frontière de la taille du secteur) et combien devaient être ignorés. <br><br>  Visuellement, cette situation peut être montrée comme ceci: <br><br><img src="https://habrastorage.org/webt/22/iy/sr/22iysrbf7x-8n4ptpq4mtbq6kjc.png"><br><br>  Il y a un certain tampon dans lequel il y a une «fenêtre» de la taille requise (section verte) et il vous suffit de lire les données de cette fenêtre, en lisant les données du tampon en fragments de N octets.  Il serait possible de visualiser un tel processus de lecture comme celui-ci: <br><br><img src="https://habrastorage.org/webt/cp/me/qo/cpmeqoznzfnhkflphfxdhscxhq0.gif"><br><br>  En général, l'ajout de la logique de travail avec l'écran dans une fonction qui reçoit toujours un tampon de 512 octets et qui devrait déterminer lequel de ces 512 octets est nécessaire (si quelque chose est nécessaire) s'est avéré ne pas être une tâche aussi facile à résoudre «Sur le front».  Plus précisément, la tâche n'était pas tellement compliquée que non standard par rapport aux solutions de tous les jours, donc, de façon surprenante, il était très intéressant de la résoudre.  Pour moi, c'était comme une «tâche olympique», où il fallait calculer la quantité d'électricité nécessaire pour contracter les muscles afin de transférer l'eau d'un seau à l'autre avec deux cuillères (une cuillère dans chaque main). <br><br>  Afin de mieux comprendre quelle est la difficulté ici, j'ajouterai une autre animation ici, uniquement «en termes de» le contenu du cluster, et non le fichier entier (toutes les autres informations doivent être stockées séparément): <br><br><img src="https://habrastorage.org/webt/ba/vk/zg/bavkzgmfovjycovxj1uasy7kwae.gif"><br><br>  Comme prévu, le calendrier devrait afficher une nouvelle image chaque jour, c'est-à-dire  il doit pouvoir surveiller l'heure (même lorsqu'il est éteint), ce qui signifie qu'un module d'horloge en temps réel (RTC) est également nécessaire.  Et malgré le fait que mon contrôleur dispose d'une horloge en temps réel intégrée, il est presque impossible de récupérer une batterie pour cela, car  les contacts ne sont pas câblés à la carte.  J'ai décidé de ne pas violer les jambes du contrôleur pour tenter de les souder et j'ai pris le RTC chinois externe.  Travailler avec RTC était censé être complètement simple: <br><br><ul><li>  Une fois allumé, obtenez l'heure du RTC chinois. </li><li>  Réglez l'heure en RTC interne. </li><li>  Utilisez le RTC interne pour compter le temps et oublier les chinois jusqu'au prochain arrêt. </li></ul><br>  Mais ici, tout s'est avéré pas si simple, car le RTC interne du contrôleur fonctionne avec l'heure au format habituel (horodatage UNIX), et son ami chinois utilise le décimal codé binaire (BCD).  Avant cela, je n'avais pas rencontré ce format et j'étais très surpris que même les modules modernes pour Arduino l'utilisent.  L'essence du format est assez simple - il y a un octet, qui, par exemple, stocke le nombre de secondes.  Les quatre bits de poids fort stockent des dizaines et les quatre bits de poids faible stockent des unités.  Il s'avère que la représentation hexadécimale de cet octet lui-même contient un temps lisible - l'octet 0x49 correspond à une valeur de 49 secondes (bien que dans le système décimal, cet octet corresponde à 72). <br><br>  Si je comprends bien, cela s'est produit si historiquement qu'il était plus facile d'utiliser RTC directement avec les encodeurs d'écran pour créer l'horloge, mais j'ai dû convertir le BDC en horodatage UNIX avec des stylos. <br><br>  En plus de l'affichage, du module d'horloge en temps réel, de la carte mémoire et du système de fichiers pour cela, il était nécessaire d'envelopper tous ces presse-étoupe dans un boîtier, qui devait également être fabriqué, c'est-à-dire  "Dessiner".  Vous pouvez lire plus en détail sur toutes les douleurs que j'ai rencontrées dans ma dernière publication, tout était exactement le même ici: <br><br><img src="https://habrastorage.org/webt/f_/6i/jh/f_6ijh7_nag2fpzyjwzkdkapips.jpeg"><br>  (Je n'ai pas prévu de production de masse, tous les détails autour sont le résultat de mesures incorrectes ou de solutions mal pensées) <br><br>  En conséquence, le boîtier et les détails nécessaires ont été dessinés (il n'y a pas de couverture sur l'image): <br><br><img src="https://habrastorage.org/webt/pg/k9/w-/pgk9w-ajyangtju3ianmi1dm9jo.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les boutons ont été placés dans une pièce séparée pour faciliter l'assemblage (il semble que j'ai encore appris quelque chose du temps du dernier projet): </font></font><br><br><img src="https://habrastorage.org/webt/lp/c_/i8/lpc_i8kkwazohmmz2ujiynl2lea.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'assemblage (à l'exception des couvertures avant et arrière) de l'appareil ressemble à ceci: l' </font></font><br><br><img src="https://habrastorage.org/webt/ah/yq/un/ahyqun2x2cwbvpn2hk5o59dupbw.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">écran est attaché au boîtier avec des liens. </font><font style="vertical-align: inherit;">Cela s'est avéré être une méthode beaucoup plus pratique que de la boulonner. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eh bien, un petit enfer pour les perfectionnistes (une barbe de fils et de composants): </font></font><br><br><img src="https://habrastorage.org/webt/tv/kh/pz/tvkhpznwutzclmhqaf_0q1abk_a.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'ensemble s'est avéré être un tel appareil, sur lequel j'ai fait un petit livre - instructions: </font></font><br><br><img src="https://habrastorage.org/webt/cw/s0/y9/cws0y9bk4nre9kwyjwjar2cvsui.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le capot arrière est boulonné, ce qui vous permet de démonter l'appareil si une violence supplémentaire est requise sur son intérieur:</font></font><br><br><img src="https://habrastorage.org/webt/ec/dj/d6/ecdjd6m9-d85udrkqee-vphi1qe.jpeg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Oui, c'est plus facile d'acheter une maison en bord de mer! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et puis quelqu'un qui a lu jusqu'ici dira: «Et est-ce une alternative aux cadeaux simples?! Oui, vous devez immédiatement investir 100 500 heures de votre temps, ce qui est beaucoup plus cher que l'argent! » Je ne discuterai pas de ce sujet, je dirai simplement que pour moi, c'est un processus méditatif et je tue deux oiseaux avec une pierre - d'une part, je fais des choses dont personne n'a besoin (peu me paieraient pour développer quelque chose tels), mais qui m'intéressent à faire, et une personne reçoit un objet unique en cadeau qui, bien qu'il ne porte pas une charge utile évidente, donne le sourire. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cependant, pour qu'il n'y ait pas d'arrière-goût de solutions qui nécessitent beaucoup de temps, je vais partager quelques histoires plus courtes.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant, en général, il est devenu très à la mode d'imprimer des choses sur une imprimante 3D. </font><font style="vertical-align: inherit;">Les appareils d'impression sont devenus beaucoup plus accessibles et le logiciel de création de modèles est assez simple à comprendre pour les enfants.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Crie à l'aide </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au travail, nous avons une blague sur le fait que si vous avez besoin d'aide, il vous suffit de crier la mouette et quelqu'un vous aidera certainement. En vérité, je ne sais pas à quoi elle est liée ni d'où vient cette blague, mais dans la correspondance interne des images de mouettes ont souvent commencé à apparaître, laissant entendre que quelqu'un avait besoin d'aide. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cependant, le bureau de type ouvert et la modestie interne de certains collègues ne leur ont pas permis de profiter pleinement de la possibilité d'appeler à une telle aide. Ensuite, un «homme non ingénieur» a décidé de venir à la rescousse, prenant un «module de lecteur de musique MP3 pour Arduino» chinois chargé, un clone chinois d'Arduino Nano, quelques fils et quelques mp3 avec l'enregistrement des sons des goélands.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En général, il convient de noter ici que j'ai l'habitude de commander différents modules à rabais, ce qui, il me semble, peut être utile un jour, ou je reçois de tels appareils électroniques en cadeau d'amis / connaissances qui n'ont pas trouvé ces appareils électroniques utiles. </font><font style="vertical-align: inherit;">Par conséquent, le mot «traîner» n'est pas accidentel, mais décrit très précisément l'état des choses. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme je suis une personne loin de la modélisation 3D, je viens de prendre un modèle tout prêt de la tête de la mouette et d'y apporter les modifications nécessaires. </font><font style="vertical-align: inherit;">À savoir, à partir des changements, il était nécessaire:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Séparez le bec de la tête pour imprimer le bec dans une couleur différente. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Faites une «cavité» dans laquelle toute l'électronique se trouvera (haut-parleur, lecteur, arduino et fils). </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le résultat est quelque chose comme ça (le bec est divisé en deux parties pour une meilleure qualité d'impression): </font></font><br><br><img src="https://habrastorage.org/webt/r7/nz/9_/r7nz9_z7qibv9mqtowdvp038dki.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">je ne pense pas qu'il soit logique de parler du code, car </font><font style="vertical-align: inherit;">en plus d'initialiser le lecteur, il n'y avait qu'un gestionnaire de clic de bouton et jouant l'un des enregistrements vocaux de mouette (en général: playSound (rand () &amp; 3);). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après cela, laissez simplement la mouette pour imprimer et collecter tout ensemble. </font><font style="vertical-align: inherit;">En conséquence, nous avons un «simulateur de thé» à part entière (la couleur de la mouette est déterminée par le plastique qui était disponible), qui se connecte à l'USB et lorsque vous cliquez sur le bouton sur la tête de la mouette, il reproduit «l'appel à l'aide»:</font></font><br><br><img src="https://habrastorage.org/webt/ec/xg/ts/ecxgtsytg7czrd89196s2bwm8de.jpeg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Encore plus simple? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une collègue s'est plainte d'avoir été constamment distraite pendant qu'elle passait des tests. </font><font style="vertical-align: inherit;">Nous trouvons sur Internet un modèle 3D de lunettes et faisons de petits changements: </font></font><br><br><img src="https://habrastorage.org/webt/kg/zz/jv/kgzzjvkhncuwiektwjpkjqciv54.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En conséquence, nous avons des lunettes - des oeillères. </font><font style="vertical-align: inherit;">Nous ne sommes pas distraits par nous-mêmes et les autres comprennent que vous ne devriez pas être distrait:</font></font><br><br><img src="https://habrastorage.org/webt/ce/vm/k5/cevmk5j74alm2qbuzodzsk5uplc.jpeg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Assez simple! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Donc, pour créer, vous avez besoin de: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La possibilité de trouver ou de dessiner une béquille dans l'éditeur de vecteur. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La possibilité de dessiner 2 cylindres dans l'éditeur 3D, l'un de plus que l'autre de ~ 0,4 mm. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La possibilité de faire un simple morceau de papier - une étiquette. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Imprimante 3D (votre propre service d'impression ou personnalisé). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L'imprimante est ordinaire. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et maintenant, dans l'ordre ... Nous dessinons une béquille: </font></font><br><br><img src="https://habrastorage.org/webt/l6/z_/uv/l6z_uvppvank9lg9tnt00clmeeq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous dessinons deux cylindres: Nous </font></font><br><br><img src="https://habrastorage.org/webt/aa/xi/yd/aaxiydolfoszxdnh8duxmhk3io0.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imprimons les pièces et l'étiquette et obtenons un grand et simple cadeau pour "tyzhprogramistov":</font></font><br><br><img src="https://habrastorage.org/webt/ux/up/w9/uxupw9tma7hqfuhatlg6n2loies.jpeg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C'était pour quoi tout ça? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Parfois, le destin joue avec nous et laisse entendre que quelque chose devrait arriver bientôt.» Plusieurs fois dans ma vie, j'ai eu des idées que je voulais réaliser, mais j'ai attendu quelque chose. </font><font style="vertical-align: inherit;">Je ne ferais pas de «calendrier» électronique si un écran gratuit ne venait pas de Chine, ce qui signifie que je ne traiterais pas de FAT32, je ne me renseignerais pas sur le format BCD utilisé dans RTC. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peut-être que quelqu'un lira cette histoire (ou du moins regardera les photos) et pensera: "Merde, s'il pouvait le faire, alors je peux le faire encore mieux!" Et en conséquence, cela apportera de la joie à quelqu'un à proximité. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En dehors de la fenêtre il pleut, le calendrier est décembre. </font><font style="vertical-align: inherit;">Le temps des vacances approche et donc celui des cadeaux. </font><font style="vertical-align: inherit;">Faites et recevez des cadeaux intéressants, pas seulement une autre boîte de chocolats, une bougie ou une figurine.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480792/">https://habr.com/ru/post/fr480792/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480780/index.html">Comment assembler une illustration à partir de cubes et de pictogrammes</a></li>
<li><a href="../fr480782/index.html">5 choses que j'aimerais savoir quand j'ai commencé à utiliser Angular</a></li>
<li><a href="../fr480786/index.html">Clonage profond indépendant d'objets en JavaScript</a></li>
<li><a href="../fr480788/index.html">Sapin de Noël sur la ligne de commande</a></li>
<li><a href="../fr480790/index.html">"Efficacité d'usine". Trouver un goulot d'étranglement et mettre en œuvre un système de traction pour augmenter la productivité</a></li>
<li><a href="../fr480794/index.html">Un peu sur le cas particulier de la mise en œuvre d'algorithmes de recherche de portes ouvertes</a></li>
<li><a href="../fr480796/index.html">Programmeurs, devops et chats Schrodinger</a></li>
<li><a href="../fr480798/index.html">C ++ Russia Piter 2019 rapporte l'examen</a></li>
<li><a href="../fr480800/index.html">Vous cherchez un testeur d'emploi? Préparez-vous à démontrer les compétences des développeurs</a></li>
<li><a href="../fr480802/index.html">Chaos Engineering, Part 3: Méthodes et outils</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>