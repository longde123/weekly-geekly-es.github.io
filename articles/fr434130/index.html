<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏩 🖤 🤐 Interface réactive. Conférence d'Artyom Belov à FrontTalks 2018 🐪 ⛷️ 🐺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En JavaScript basé sur navigateur, les interfaces sont prévisibles. "Single-threaded", avec un script de rendu transactionnel: écran vide - chargement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Interface réactive. Conférence d'Artyom Belov à FrontTalks 2018</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/434130/">  En JavaScript basé sur navigateur, les interfaces sont prévisibles.  "Single-threaded", avec un script de rendu transactionnel: écran vide - chargement - interface.  Le développeur Artyom Belov de Cxense, se concentrant sur la loi de Pareto, a expliqué comment, ayant passé 20% du temps, rendant l'application 80% plus rapide grâce aux techniques de "design réactif" - pas encore formulées, mais déjà utilisées dans des produits privilégiant l'UX. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/N1vRiKV0iC4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><blockquote>  Mais quant aux mecs les plus aguerris qui ne sortent pas de Webpack et font souffrir Webpack, et non l'inverse?  Ils branchent des plugins.  Mais comme nous sommes au début du développement de cette technique, l'écosystème nous propose un plug-in qui prend votre HTML, génère du HTML avec CSS intégré basé sur celui-ci, fournit un QR code pour la publicité ... Sérieusement?  Après cela, vous pouvez prendre et à travers "! Important" interrompre les styles ... Peut-être que cela vaut la peine de poser une question, pourquoi suis-je toujours dans le front-end. </blockquote><br><a name="habracut"></a>  - Bonjour à tous, je suis Artyom Belov.  De nos jours, le mot réactif peut être mal compris: il y a un grand pourcentage de personnes qui ont appris React avant d'apprendre JavaScript.  Par conséquent, prononcer de tels mots racine est un peu ambigu.  Mais pour moi, c'est encore la physique, la loi de conservation de l'élan. <br><br>  Commençons par le problème.  C'est notre perfectionnisme professionnel.  Après tout, nous ne montrons pas l'interface avant qu'elle ne soit pas "parfaite" - à notre avis.  Et je ne sais pas ce qui va gagner dans la nomination pour le contenu informatif: un écran de navigateur blanc ou un spinner avec l'inscription "N'hésitez pas à attendre éternellement";  ce n'est pas clair pour moi. <br><br><img src="https://habrastorage.org/webt/lp/6n/im/lp6nimmouvk7ykz4jww1kxtbao0.gif"><br><br>  Mais une chose est sûre: le rendu, comme la réponse d'une application, n'est pas une transaction.  L'affichage d'une interface n'est pas une unité logique, vous devez donc la battre par lots. <br><br><img src="https://habrastorage.org/webt/ij/ye/mg/ijyemgrfvrmwrqzfqjuhgij4fv0.png"><br><br>  Et à l'avant, en général, nous nous aidons, nous mentons. <br><br><img src="https://habrastorage.org/webt/xt/oq/wy/xtoqwysiydkejdbgl-5hks8zlss.png"><br><br>  Fondamentalement, lorsque nous parlons du «temps de chargement» de notre application, nous ne disons pas complètement l'expression - «temps de chargement moyen».  Bien que vous n'ayez pas besoin d'avoir sept travées dans le front pour rendre le téléchargement de la deuxième application instantané, utilisez Service Worker. <br><br>  Et il est triste que Lighthouse encourage le fait que la demande ne puisse montrer aucun signe de vie et seulement dans les deux ou trois dernières images de l'audit dire: "En fait, je me suis préparé à dessiner" <br><br><img src="https://habrastorage.org/webt/hp/de/x6/hpdex6uk7jnysvos09h9bmzqjlw.png"><br><br>  Et obtenir moins de 100 points dans le test d'application pour les performances n'est pas le plus difficile.  Google l'a remarqué, merci. <br><br><img src="https://habrastorage.org/webt/nf/od/yc/nfodyc04egapyj2qguraxrtuqgs.png"><br><br>  Et un concept aussi complet que «Time to Interactive» a été décomposé en étapes, à savoir: «First Interactive», «Time to Consistently Interactive» et «First Input Delay».  Si avec les deux premiers termes utilisant Google Translate, vous pouvez comprendre comment interagir et s'améliorer, alors ce dernier peut être expliqué en regardant le fil principal du navigateur. <br><br><img src="https://habrastorage.org/webt/xl/d0/ii/xld0iivk6nhvadqiitkkno1wf3a.png"><br><br>  Un exemple.  Si, immédiatement après le chargement de l'interface, l'utilisateur clique sur le champ de texte, une pause peut se produire avant que le champ de texte affiche un curseur avec la possibilité d'entrer.  C'est parce que le thread principal était occupé, et l'interface au moment du clic semblait prête pour l'interaction. <br><br><img src="https://habrastorage.org/webt/se/hs/3r/sehs3rflulvrztgsmqwmiedgseo.png"><br><br>  Tout se résume au fait que les métriques dans Lighthouse ont presque le même temps d'exécution - alors qu'elles doivent être équilibrées. <br><br><img src="https://habrastorage.org/webt/r9/yi/ry/r9yiryefiv4vpmmgjz16xjkuk0c.png"><br><br>  "La première peinture significative" doit être aussi rapide que possible, "La première peinture satisfaisante" doit être derrière elle, et "Time to Consistently Interactive" ne doit pas avoir un tel delta de l'écran blanc du navigateur jusqu'à ce que l'interface soit complètement prête. <br><br>  Bien sûr, il y a des experts qui diront que cela se fait simplement: <br><br>  «Nous devons diviser l'application en itinéraires dans Webpack et effectuer un rendu côté serveur.  Oui, il y a du travail pendant une demi-heure! " <br><br>  Mais ce n'est pas tout à fait vrai ... Cher expert, ne mentionne pas que chaque nouvelle route fait la même chose - le chargement.  Et encore une fois, toutes les métriques de Lighthous ont un petit delta entre elles, car l'itinéraire est généralement important. <br><br>  Et parfois, vous ne travaillez pas dans une grande entreprise prospère, et le rendu côté serveur n’est pas là.  Et, profitant de votre position officielle, vous démarrez la R&amp;D avec un objectif clair: obtenir un rendu progressif.  Comme un JPEG progressif, qui est dans le paragraphe 167 de "Covodry" de Lebedev. <br><br>  En principe, le plan de R&amp;D semble très simple ... Vous devez en quelque sorte réaliser un profit.  Et n'oubliez pas l'essentiel - l'heure et les dates qui aiment brûler.  Et, en tenant le manifeste d'un programmeur minimaliste entre vos mains, vous devez vous rappeler: passez 20% du temps sur 80% du résultat. <br><br>  J'ai des outils.  Par exemple, lag-radar. <br><br><img src="https://habrastorage.org/webt/me/ui/gi/meuigirky5fida7bawgkzjkrhq4.gif"><br><br>  Certes, je ne suis pas entré dans Santa Barbara, qui a volé l'idée, Dan Abramov à quelqu'un ou vice versa ... Lors de la dernière présentation de JSConf Iceland 2018, un concept assez intéressant a été montré: le radar est vert jusqu'à ce qu'il détecte un retard dans la bande de roulement principale, et lorsqu'ils sont sensibles, le radar devient jaune et lorsqu'il est critique, il devient rouge. <br><br>  Et en appuyant sur Cmd + Shift + P sur un Mac - ou Ctrl + Shift + P sur un Windows - j'ai regardé le pourcentage de couverture du code.  Et puis il a regardé le paquet. <br><br><img src="https://habrastorage.org/webt/qm/zp/xh/qmzpxh1534fuw7wmb12pcahwbu0.png"><br><br><img src="https://habrastorage.org/webt/n9/kb/b4/n9kbb4yn0tr_elsgaqcjmxoabsi.png"><br><br>  Et encore une fois pour couvrir, et encore pour regrouper.  Et il a simplement décidé d'accepter la situation.  Je n'ai rien à retirer d'ici.  En effet, dans les projets, beaucoup utilisent des outils qui sont de facto des standards.  Par exemple, Ivan Akulov, avec Google Chrome Labs, a créé il y a longtemps un référentiel pour l'optimisation du webpack, webpack-libs-optimisations.  Et pourquoi devrais-je répéter cela, parler de Code Split, de Lazy Load?  C'est ce qui est des standards connus et progressifs en 2018. <br><br><img src="https://habrastorage.org/webt/bl/hq/sf/blhqsfhtguvdph0phjugkxdii8k.png"><br><br>  Et répondant à la question "Que peut-on télécharger en une demi-seconde?"  - JS et voici le gagnant.  Par exemple, vous pouvez télécharger 100 kilo-octets de JPG et consacrer 0,04 à son traitement, mais JS le fait, car cela prend beaucoup plus de temps pour le traiter, 20 fois. <br><br><img src="https://habrastorage.org/webt/i5/2t/bf/i52tbfz_iunvezbqv4inaps2gbu.png"><br><br>  Parce que vous devez vous rappeler ce qui se passe au démarrage de l'application. <br><br><img src="https://habrastorage.org/webt/zg/ma/2b/zgma2bclq-utain_9wewam-znea.png"><br><br>  Après le téléchargement, la chose que vous souhaitez recomposer commence: téléchargez à un moment donné, et analysez, compilez et exécutez du code à un autre moment. <br><br><img src="https://habrastorage.org/webt/ut/ac/cn/utaccnuew-ezap0uwwa5gwdeptm.png"><br><br>  J'ai regardé ce que la balise &lt;script /&gt; nous offre.  Il existe de nombreuses options et j'ai pensé à utiliser un indice. <br><br><img src="https://habrastorage.org/webt/lp/zm/wv/lpzmwvxsbdqhy601fquwvbfxh3g.png"><br><br>  Hmm, il n'y a pas de télécommande dans la chambre, pas de téléphone.  Je prends 50:50.  Nous avons encore les options "différer" et type = "module". <br><br><img src="https://habrastorage.org/webt/p9/4m/xn/p94mxnan7l_grkm1eeboiwompra.png"><br><br>  Ils se chargent sans bloquer l'analyse, mais se traitent et s'exécutent plus tard, lorsque l'application est la plus prête pour cela - libérant le thread principal. <br><br>  Mais il n'y a pas de bonne option, et les paroles du grand homme Ben Schwartz sont rappelées.  Non pas qu'il l'ait dit en russe, mais: <br><br><img src="https://habrastorage.org/webt/hp/fm/pj/hpfmpjka7cobou4-ycbslc75fr8.png"><br><br>  Pour l'éviter, j'ai besoin de JS, donc la demande initiale est la seule méthode pour me débarrasser des demandes inutiles. <br><br><img src="https://habrastorage.org/webt/j2/_a/gk/j2_agk43qhz_filmtvcb5nqisps.png"><br><br>  Eh bien, vous devez configurer à nouveau Webpack.  Ce n'est pas toujours la connexion des plugins. <br><br><img src="https://habrastorage.org/webt/py/br/dv/pybrdv0jaypvevaxpxmyxztnre8.png"><br><br>  En regardant l'ensemble dans le contexte, je ne comprends pas vraiment comment je répète tel ou tel fragment de code entre les fichiers. <br><br><img src="https://habrastorage.org/webt/ip/ns/ac/ipnsacv2uyzzh71ojjbvzq84-8s.png"><br><br>  Probablement, ils doivent être retirés dans la demande critique? <br><br><img src="https://habrastorage.org/webt/je/bj/sg/jebjsglelbtzg5ae1qpebqp6qpu.png"><br><br>  En utilisant ConcatenationPlugin (), nous effaçons le manifeste Webpack, c'est-à-dire une liste de tous les fichiers des modules Webpack, puis incorporons ce JSON, éliminant ainsi cette demande inutile.  Déterminez ensuite s'il existe du code asynchrone qui peut être incorporé.  Et enfin, intégrez les cerveaux de Webpack directement dans la page afin de ne pas attendre que tous les modules se chargent.  Oui, prenez le morceau d'exécution et intégrez-le en HTML. <br><br><img src="https://habrastorage.org/webt/ez/se/mn/ezsemnw4njhrkyzacjq9ou3mpj8.png"><br><br>  En général, l'intégration des cerveaux Webpack ne donne pas l'augmentation la plus enchanteresse, mais parlons maintenant de CSS critique. <br><br><img src="https://habrastorage.org/webt/qk/to/yp/qktoypf0izvaipse92pg8y5xrsc.png"><br><br>  Mais ... nous avons réalisé que Critical CSS est destiné aux gars qui n'ont pas d'application de page unique.  Après tout, sans un itinéraire HTML complet, les outils ne pourront pas créer de CSS critique. <br><br><img src="https://habrastorage.org/webt/bb/q6/h7/bbq6h7fs1wp0en6enqpq_fghdce.png"><br><br>  Et c'est bien qu'il y ait un Marionnettiste qui pourrait. <br><br><img src="https://habrastorage.org/webt/u4/np/ah/u4npah85nsmbspbasfgjblwndzw.png"><br><br>  Après tout, ce qui lui a été présenté - le dossier «puppeteer-examples» sur GitHub a été saisi dans les projets.  Et c'est ainsi que le projet Rendertron a vu le jour.  Certes, afin d'obtenir au moins une sorte d'erreur de sa part, vous devez insérer l'adresse, appuyez sur Entrée ... et c'est tout. <br><br><img src="https://habrastorage.org/webt/l-/ld/lu/l-ldlucikl595sr-nblxzeyltgw.png"><br><br>  Heureusement, il existe d'autres packages npm qui fonctionnent.  Ils sont apparemment sur le marché depuis plus longtemps. <br><br><img src="https://habrastorage.org/webt/we/uk/ka/weukkaysbo1vbcd5dkoq6hlz3_i.png"><br><br>  Après avoir installé et construit le package, avec la boucle habituelle, je peux restituer le HTML de mon application sur le serveur local, et ainsi obtenir le HTML critique, si nécessaire pour créer un CSS critique. <br><br><img src="https://habrastorage.org/webt/zn/yu/zy/znyuzyyszqvrvvyiw7ymmol2qe0.png"><br><br>  Le bootstrap HTML, au lieu d'attendre un rendu, a donné une augmentation, comme prévu, mais il est trop tôt pour s'y attarder.  Continuons le chemin vers CSS critique. <br><br><img src="https://habrastorage.org/webt/jq/tr/qp/jqtrqp3qmikvmse5u1o_hsenvii.png"><br><br>  Merci encore à Eddie Osmani d'avoir pris soin de l'écosystème et d'avoir créé HtmlCriticalWebpackPlugin (), où pour la configuration, vous devez répondre à quelques questions: où enregistrer le CSS critique et sous quelle forme? <br><br><img src="https://habrastorage.org/webt/m8/bp/e4/m8bpe4c-ycf0ycrpp61za6enyvs.png"><br><br>  Oh, vous pouvez voir la ligne suspecte «painthouse».  C'est un moment très intéressant où Eddie Osmani utilise un package tiers qui a, il s'avère, même une interface Web. <br><br><img src="https://habrastorage.org/webt/1w/e5/fx/1we5fxpgriedvqtvzvpet_-xtck.png"><br><br>  Mais pour être honnête, j'ai honte d'utiliser l'interface Web, c'est apparemment pour les concepteurs de mise en page qui n'ont pas de ligne de commande.  Mais tout est simple, comme dans l'annonce Yuppy des années 90: il suffit de cliquer sur «Créer». <br><br><img src="https://habrastorage.org/webt/xw/gu/3b/xwgu3bgd2swexdr43zgtvchpjru.png"><br><br>  Et cela ne donne pas la croissance la plus enchanteresse, mais très sensible pour la première coloration de l'application. <br><br><img src="https://habrastorage.org/webt/oh/a4/qv/oha4qvyjpbhbs7i0na3urkctw6k.png"><br><br>  Avec une trace du monde, et l'application tourne légèrement lorsque les polices commencent à danser.  Cette ligne est connue sous le nom de 3 secondes.  Et la section commence dans laquelle nous, le front-end, perdons rarement, à savoir le jeu avec les polices. <br><br>  Recettes pour télécharger des polices.  Ici, l'affichage des polices nous aidera.  Après avoir compris qu'ici, vous n'avez pas besoin de bouger tout de suite, nous décidons d'abord: un flash de texte invisible, FOIT, ou un flash de texte sans style, FOUT, nous fait peur. <br><br><img src="https://habrastorage.org/webt/ud/o3/hb/udo3hbctfrr-fhnau-vnzbxqd0a.png"><br><br>  Et - le spoiler - le plus terrible pour nous est le flash de texte invisible, car il provoque un plus grand nombre de redessins. <br><br><img src="https://habrastorage.org/webt/ae/re/1h/aere1hwgbcmtxarci1bmzgzuwne.gif"><br><br>  Si en bref, en regardant quelles propriétés d'affichage de police existent, il est juste de choisir le swap ou le repli pour vous-même.  Dans l'ensemble, parmi les cinq propriétés, vous pouvez choisir la bonne pour vous-même, il n'y a pas de bonne option. <br><br><img src="https://habrastorage.org/webt/fv/tc/jt/fvtcjt7ei2axij5oq-qmg5oeicq.png"><br><br>  De plus, j'ai entendu dire qu'il existe un projet Font Style Matcher qui me permettra de sélectionner une police système de secours décente pour ma police Comic Sans et de ne pas la charger avec Google Fonts.  Bien que ce ne soit pas tout à fait vrai ... <br><br>  Il y a des gens comme Zach Zezerman qui ont inventé le concept FOFT. <br><br><img src="https://habrastorage.org/webt/h7/bh/_k/h7bh_kzwxghwdaoczjamornpc3q.png"><br><br>  Ce qui n'est pratiquement pas visible dans le navigateur. <br><br>  Cela est dû au fait que lorsque vous téléchargez une police romaine de style standard et que le navigateur est déjà si intelligent qu'il peut créer une police "fausse" en gras, en italique, soulignée et barrée en fonction du style standard.  Cela donne un flash, mais presque aucun.  Pour ce faire, implémentez la police dite de préchargement. <br><br><img src="https://habrastorage.org/webt/v8/he/o6/v8heo68v8tmi1l-n4xhk_iy925c.png"><br><br>  Mais que se passe-t-il si je dis que la police peut être intégrée dans CSS?  Et c'est vrai, et ça donne aussi un gain! <br><br><img src="https://habrastorage.org/webt/fb/rw/or/fbrworg5hz3rnlf4xb0_jumd81u.png"><br><br>  Cela ressemble à une combinaison de techniques.  Vous avez juste besoin d'incorporer la police romaine directement dans CSS.  Ainsi, pour gagner de la croissance à la première connaissance principale de l'utilisateur avec l'application, puis charger les casques restants si nécessaire, mais pas immédiatement. <br><br><img src="https://habrastorage.org/webt/vc/2n/u_/vc2nu_vy1q3yhdvrjm3tiiuidek.png"><br><br>  Et donc, après tant de manipulations, «Time to Consistently Interactive» a encore un delta important par rapport aux autres indicateurs.  J'ai seulement amélioré la coloration de l'application.  Ce n'est pas mal, mais pas ce que je recherchais.  À mon avis, je dois attraper une sorte de problème.  Et elle a été attrapée, et par la queue.  Après tout: <br><br><img src="https://habrastorage.org/webt/zj/_-/ym/zj_-ymrryk3ncctvdj3draofpqc.png"><br><br>  Il est assez évident pourquoi cela n'est pas implémenté dans de nombreux navigateurs.  Un saut de parchemin, et comment déterminer ce dont vous avez besoin et ce que vous n'avez pas besoin de charger, n'est pas le plus simple.  Peut-être que cela donnera un tour. <br><br>  Mais encore une fois, les experts vous le diront - il y a une charge paresseuse. <br><br><img src="https://habrastorage.org/webt/yt/mn/gc/ytmngczroz9syd-jilxja1j1lga.gif"><br><br>  Mais rappelez-vous comment vous interagissez avec lui.  Vous ne pouvez pas couvrir 100% des cas. <br><br><img src="https://habrastorage.org/webt/e1/xy/to/e1xytoccbdrthqr7t8mwkpz7xy0.png"><br><br>  Oui, et si vous suivez le chemin de l'optimisation et terminez tous les points de contrôle dans le livre d'Eddie Osmani «Essential Image Optimization», vous restez également avec des problèmes non résolus ... <br><br>  Mais j'ai vu qu'Eddie Osmani aime mentionner Reddit dans ses almanachs et ses articles sur le Medium.  Je me souvenais qu'un ami travaillait pour moi là-bas et l'appelant pour des conseils, il m'a rappelé qu'il y avait une chose telle que la performance Percieved, et cette définition était dans les couloirs de mon esprit. <br><br><img src="https://habrastorage.org/webt/wq/7b/ir/wq7bircpigeuun2zq-1dnd2olnc.gif"><br><br>  Ici, d'ailleurs, les designers nous aident.  C'est quand ce n'est pas le moment de jouer, mais la façon dont vous présentez votre application.  Et la très bonne tactique pour cela est «les espaces réservés de contenu». <br><br><img src="https://habrastorage.org/webt/sw/sp/as/swspasimeyisz0xpntedhjtwzws.gif"><br><br>  Par exemple, YouTube peut le faire. <br><br><img src="https://habrastorage.org/webt/hs/dg/oc/hsdgocb3gd43zf28rdk9mrp8sw0.gif"><br><br>  YouTube parvient à lire la vidéo avant que tous les composants de support aient été téléchargés.  Cela se fait, en regardant vers l'avenir, en raison des espaces réservés au contenu, tels que les dés animés gris. <br><br><img src="https://habrastorage.org/webt/r-/mn/hd/r-mnhdfosuuxnoxjmo3nkyirbiw.png"><br><br>  Et que nous offre l'écosystème en ce moment?  Rien de spécial.  CodePen  Voyons leurs implémentations. <br><br><img src="https://habrastorage.org/webt/i3/yg/rn/i3ygrnaewv6egvo6m30viqtnizc.gif"><br><br>  C'est tout à fait une carte qui se déroule dans n'importe quel modèle de conception.  Voyons voir ... <br><br><img src="https://habrastorage.org/webt/vh/bt/ol/vhbtolsbdzrzwsbjwbssns2k9ku.png"><br><br>  Nous devons déclarer quelques variables sur 30 lignes, déclarer un gramme de propriété sur 50 lignes, quelques animations et nous obtenons 100 lignes de code ... C'est 10 sur 10 sur l'échelle Lea Viru. <br><br>  Mais quant aux mecs les plus aguerris qui ne sortent pas de Webpack et font souffrir Webpack, et non l'inverse?  Ils branchent des plugins.  Mais comme nous sommes au début du développement de cette technique, l'écosystème nous propose un plug-in qui prend votre HTML, génère du HTML avec CSS intégré sur la base, donne un QR code pour la publicité, apparemment ... Sérieusement?  Après cela, vous pouvez prendre et à travers "! Important" interrompre les styles ... Peut-être que cela vaut la peine de poser une question, pourquoi suis-je toujours dans le frontend. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2e1/eb8/136/2e1eb8136cda41afbcb5c57377fa0b39.gif"><br><br>  Mais il y a une équipe de personnes pour qui les blagues sur leur produit ne sont tout simplement pas drôles.  PostCSS. <br><br><img src="https://habrastorage.org/webt/gs/oz/4p/gsoz4pnecxwewknvoeibchl3jt4.png"><br><br>  Vous pouvez toujours compter sur eux.  En particulier, vous pouvez implémenter cette technique - «espaces réservés contants» - sur le concept CSS «multi background».  C'est quand une seule propriété «d'arrière-plan» peut contenir plusieurs valeurs dans une virgule. <br><br><img src="https://habrastorage.org/webt/-d/ib/ve/-dibve2ok-afdcgtacyxwmnoy7o.png"><br><br>  CanIUse juste des réponses, oui. <br><br><img src="https://habrastorage.org/webt/kj/rl/cy/kjrlcyol1rb9wjelcbypmi27cbg.png"><br><br>  Cela ressemble à ce qui suit, qui nous est familier.  Familier - grâce à Medium. <br><br><img src="https://habrastorage.org/webt/6z/gg/k8/6zggk89ocfmdsweepjofkwynb7y.png"><br><br>  Un dégradé linéaire est appliqué à votre image, qui s'affiche le plus rapidement possible, et une image en taille réelle apparaîtra au-dessus, plus tard.  Dans le code, cela ressemble à ceci. <br><br><img src="https://habrastorage.org/webt/aa/vz/gp/aavzgp6cvedhymo93jwi_qlgavi.png"><br><br>  La première demande de priorité commence à charger l'image, bien sûr, lourde.  Et instantanément, lorsque vous obtenez CSS, un dégradé linéaire apparaît.  Mais le dégradé linéaire n'est pas aussi droit et lisse que l'assouplissement. <br><br><img src="https://habrastorage.org/webt/qo/2v/5t/qo2v5tly1crltm-rhtr13byfwqs.png"><br><br>  Par conséquent, le code devrait être récupéré par un autre plugin, ce qui rendra le dégradé linéaire plus fluide. <br><br><img src="https://habrastorage.org/webt/vq/5o/hl/vq5ohlkxagfq4phxowdhbhdwjju.png"><br><br>  Mais avec un peu de dégradé vous allez faire des superpositions pour qu'elles couvrent tous les cas. <br><br><img src="https://habrastorage.org/webt/mc/2p/ko/mc2pkosyyjuaqzywe5n7snaxt2s.png"><br><br>  Dans ce cas, cela ne fonctionnera pas correctement, car l'image est trop complexe pour créer une abstraction avec juste un dégradé linéaire.  Mais ici, sqip fonctionnera. <br><br><img src="https://habrastorage.org/webt/go/9q/k-/go9qk-zubonia-f8ce9rxpyjkjm.png"><br><br>  Il s'agit d'un module CLI pour créer un espace réservé pour votre image et l'attacher en utilisant la technique des arrière-plans multiples. <br><br><img src="https://habrastorage.org/webt/yr/vo/3w/yrvo3wxdsdkoz3ycvvb63n_l7ja.png"><br><br>  Bien sûr, l'image en taille réelle se chargera beaucoup plus longtemps et l'espace réservé de sqip en raison de son poids sera affiché beaucoup plus rapidement. <br><br><img src="https://habrastorage.org/webt/k9/-f/ya/k9-fyawdkhg5wnj-g9ad0kg5ada.png"><br><br>  Mais ce n'est pas tout à fait ce que je cherche.  J'aimerais que des images lourdes viennent quand j'en ai besoin, et non quand le navigateur le veut.  Et je dois diviser cela en deux fichiers CSS, en mettre un dans le &lt;head&gt;, où seront les images claires, puis charger les images lourdes dans le &lt;body&gt;. <br><br><img src="https://habrastorage.org/webt/0x/3f/tp/0x3ftpbxbusr1rx9azjw0qwowfm.png"><br><br>  Mais qu'en est-il des images restantes, par exemple, dans JS? <br><br><img src="https://habrastorage.org/webt/7i/pt/cd/7iptcduyrpohelvzqfoi7bh5n1a.png"><br><br>  La manipulation avec SVG, en particulier, semble décevante.  Vous semblez vouloir redessiner le SVG, mais grâce à un CSS familier, il n'est pas sous votre contrôle. <br><br><img src="https://habrastorage.org/webt/3n/aa/os/3naaosb4noviggdmao_ddela4ua.png" width="400"><br><br>  Apparemment, selon les nouvelles tendances, le SVG devra devenir un composant. <br><br><img src="https://habrastorage.org/webt/np/mz/8i/npmz8i9lz8-4hvuot6hkeaabpiw.png"><br><br>  Avec l'aide du package qui a été adopté par Dan Abramov dans "create-react-app" - c'est "svgr". <br><br><img src="https://habrastorage.org/webt/4h/cy/w0/4hcyw0pbrpkries7-9uubkcdxfw.png"><br><br>  Il s'agit d'un outil CLI qui insère simplement SVG dans votre JS, et vous pouvez travailler avec lui en tant que composant.  Ce sont en fait trois lignes de code. <br><br><img src="https://habrastorage.org/webt/do/2n/5v/do2n5vqnu2abhdcvg5tyzi4rfm0.png"><br><br>  Mais les concepteurs ne sont apparemment pas conscients que de nombreux frameworks devraient avoir un élément racine du composant.  Je ne lui demanderai pas "d'exporter" SVG depuis Sketch d'une "manière spéciale"? <br><br><img src="https://habrastorage.org/webt/-r/e8/ec/-re8eccxf55jvammpcjxbmrdjqy.png"><br><br>  En raison d'un certain nombre de problèmes mineurs, il faut faire attention aux projets étrangement populaires. <br><br><img src="https://habrastorage.org/webt/4b/ia/a9/4biaa9-smgckysguhn6icrhoxr0.png"><br><br>  Par exemple, certains «react-icon-base» qui s'offrent en remplacement de la balise &lt;SVG&gt;.  À savoir, le package, pour ainsi dire, nous dit: au lieu de la balise &lt;SVG&gt;, enveloppez votre code SVG en moi, après quoi j'appliquerai les propriétés: fill, text, stroke et que ce soit, moi-même, parce que j'ai la logique qui sert " bridge "de CSS. <br><br><img src="https://habrastorage.org/webt/68/0t/nu/680tnuknxotglxqfkedecjeimom.png"><br><br>  Et à l'aide d'une simple commande, vous pouvez créer votre modèle svgr pour votre projet. <br><br><img src="https://habrastorage.org/webt/lj/5e/a1/lj5ea1ltfxnqds_ryjlihtscmuk.png"><br><br><img src="https://habrastorage.org/webt/ab/4d/ru/ab4drujwtqjw58qy7qy_ymkkp9k.png"><br><br>  Pour être honnête, je ne sais pas pourquoi ce projet est uniquement pour React. <br><br>  Ensuite, vous pouvez importer les icônes qui ne sont pas envahies par du sucre syntaxique, quelle que soit votre convenance. <br><br><img src="https://habrastorage.org/webt/fo/fa/ip/fofaipth6nhgfrhxfkzvo-qkqye.png"><br><br>  Et enfin, éloignez-vous de la balise obsolète, peut-être &lt;img&gt;, vers l'approche de composant dont tout le monde parle. <br><br><img src="https://habrastorage.org/webt/xb/mn/r_/xbmnr_cmfjvvuiiaynjd94ntbpo.png"><br><br>  Et en faveur de quoi?  Par exemple, pour que vous essayiez la pseudo-classe «: export» dans vos fichiers SCSS \ SASS. <br><br><img src="https://habrastorage.org/webt/da/gc/ab/dagcabkl5ljvze-pi5byymjvezs.png"><br><br>  Je suis très probablement certain que cela fonctionne également dans le Webpack de votre version.  La pseudo-classe «: export» décharge les variables que vous déclarez dans SCSS.  Ensuite, vous pouvez les importer en code JS.  Et c'est tout, et vous n'avez pas besoin de faire pousser des vélos, comme une sorte de fichier JSON avec toutes les couleurs et tout. <br><br><img src="https://habrastorage.org/webt/az/et/4p/azet4purq7uyv1by9ieb2t4quey.png"><br><br>  Svgr vous permet de réduire la première coloration de l'application.  Mais pas si honnête, car le code a simplement migré de CSS vers JS. <br><br>  Mais deuxièmement, nous avons oublié sqip, quelle sera la croissance après son application? <br><br><img src="https://habrastorage.org/webt/uo/kz/a_/uokza_2mediwdi2zvrbde81ocrk.png"><br><br>  Ayant de simples compétences en importation dynamique, nous appliquons la technique suivante.  Nous chargeons la version allégée de l'image, espace réservé sqip, et l'afficheons dans l'interface.  Ensuite, dans l'importation dynamique, dans .then (), nous attendrons l'icône en taille réelle sans bloquer l'interaction avec l'interface. <br><br><img src="https://habrastorage.org/webt/jp/8z/os/jp8zosqdywuruwqgm3uvctgrm64.png"><br><br>  Cela conduit au fait que nous obtenons le sujet pour nous SVG, que nous pouvons remplacer avec des arguments, comme un vrai composant JS. <br><br><img src="https://habrastorage.org/webt/s4/om/yc/s4omyca_uxov66_rf0cwwkkpkkc.png"><br><br>  Et enfin, cela donne une augmentation des métriques nécessaires du "interactif".  Et vous répondez ainsi à la principale question qui se pose dans les articles d'Eddie Osmani: "Est-ce qu'il se passe quelque chose en général?"  Vous y répondez bien plus tôt: "Oui, cela se produit." <br><br><img src="https://habrastorage.org/webt/sw/sp/as/swspasimeyisz0xpntedhjtwzws.gif" width="400"><br><br>  Mais j'ai l'impression que je n'ai que des icônes dans l'application.  Il existe également des champs de formulaire, par exemple. <br><br><img src="https://habrastorage.org/webt/zi/uv/zm/ziuvzmaqb4r8qjqxzkrovjs6ija.png"><br><br>  Voici une solution que vous pouvez google dès maintenant.  Par exemple, «react-content-placeholder» et «vue-content-placeholder».  Mais arrêtez-vous, ici nous vous proposons de dessiner manuellement les espaces réservés SVG des composants. <br><br><img src="https://habrastorage.org/webt/sg/px/ig/sgpxigjx8adf8m086qspkr_uzmo.png"><br><br>  Il existe également une version Web où vous pouvez faire glisser et créer des espaces réservés par glisser-déposer.  Ce sera exactement comme vos vrais composants. <br><br><img src="https://habrastorage.org/webt/4s/x4/ql/4sx4qlbodank-sxpc_2gjwkwrou.png"><br><br>  Mais s’il s’agit de charger cinq fois des composants de style - non!  - et le système stylisé que j'utilise. <br><br><img src="https://habrastorage.org/webt/ws/5t/99/ws5t99mmlkoxoltvtieoqyrq6hc.png"><br><br>  Et faites-en une règle que vous devez respecter strictement le système de conception.  Et non les icônes et les images doivent être correctement exportées, mais un système de conception doit réglementer ce processus.  La largeur du champ de texte ne doit pas être codée en dur, mais le système de conception, en haut, doit régler cela. <br><br><img src="https://habrastorage.org/webt/zk/rh/j9/zkrhj9u2cfz5flb8wzo4cny7xdc.png"><br><br>  Et le plus difficile, enfin, est de coller un opérateur ternaire qui affiche notre espace réservé le plus simple, qui permettra à l'utilisateur de savoir qu'il est finalement arrivé à l'adresse, puis de télécharger le composant complet uniquement lorsque nous en avons besoin. <br><br>  En général, il devrait y avoir une démo, mais je ne suis pas venu ici pour un rapport publicitaire.  Mais les autres gars que vous connaissez tous sont dignes de respect. <br><br><img src="https://habrastorage.org/webt/xx/mf/j-/xxmfj-n04brdzux-8cw0pqetkgk.png"><br><br>  Et si j'étais aux Oscars, je prendrais une enveloppe et dirais quelque chose comme: «Pour l'incroyable ingéniosité dans la mise en œuvre de l'espace réservé au contenu, à savoir dans la mise en œuvre de l'animation en utilisant un gif 10x10 pixels, au lieu d'écrire des styles CSS, le titre est décerné "experts en animation, avec les salutations du passé, Instagram!" <br><br><img src="https://habrastorage.org/webt/xe/mt/ts/xemttszhiqkiwn9j7gdbhom4_5y.gif"><br><br>  J'espère qu'ils ne mettent pas en retrait les GIF transparents à un pixel, et que la propriété border n'est pas un double tableau. <br><br>  Et je voudrais vous rappeler: comptez sur une véritable surveillance des utilisateurs, RUM. <br><br><img src="https://habrastorage.org/webt/qh/mc/wi/qhmcwipplhkttpsr0dpvkp2juvq.png"><br><br>  Pour les vrais utilisateurs de vos projets et des métriques pertinentes. ,      ,  , first input delay. <br><br>  ,      ,    common-,       . <br><br>   ,        ,          . <br><br>  ,     ,     JPG    ,     . <br><br>   ,       . ,   . <br><br><img src="https://habrastorage.org/webt/m-/ld/d3/m-ldd3rl4p_uxyjrdch8rpojsdm.png"><br><br>  Et le dernier.  ,    ,   ,       ,     ,    - loadable-. ́,    ,     . ,    —     ,   .      —    ,     .  , , ,         Webpack.      ,  … great loading component?  ,  -   ?      ? <br><br>  ,      ,  , ,    .     . <br><br><img src="https://habrastorage.org/webt/fk/fh/vn/fkfhvn0b1unjt3c39uyebo8lczm.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434130/">https://habr.com/ru/post/fr434130/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434120/index.html">Tutoriel React, Partie 5: Premiers pas avec une application TODO, style de base</a></li>
<li><a href="../fr434122/index.html">Scénario - Pas un objet de page</a></li>
<li><a href="../fr434124/index.html">Activez l'accélération GPU dans Photoshop sous Wine</a></li>
<li><a href="../fr434126/index.html">Lire des médias à l'aide de la bibliothèque VLCj</a></li>
<li><a href="../fr434128/index.html">PHP Digest n ° 146 (10-24 décembre 2018) + Résultats 2018</a></li>
<li><a href="../fr434132/index.html">Achetez un téléviseur et roulez-le: LG prévoit de commencer à vendre des téléviseurs flexibles dans l'année à venir</a></li>
<li><a href="../fr434134/index.html">Analyse des résultats de l'enquête Kaggle ML & DS 2018</a></li>
<li><a href="../fr434136/index.html">Anatomie d'entreprise</a></li>
<li><a href="../fr434138/index.html">Nous écrivons notre propre machine virtuelle</a></li>
<li><a href="../fr434140/index.html">Une brève histoire des fonctionnalités asynchrones Javascript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>