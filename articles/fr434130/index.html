<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè© üñ§ ü§ê Interface r√©active. Conf√©rence d'Artyom Belov √† FrontTalks 2018 üê™ ‚õ∑Ô∏è üê∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En JavaScript bas√© sur navigateur, les interfaces sont pr√©visibles. "Single-threaded", avec un script de rendu transactionnel: √©cran vide - chargement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Interface r√©active. Conf√©rence d'Artyom Belov √† FrontTalks 2018</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/434130/">  En JavaScript bas√© sur navigateur, les interfaces sont pr√©visibles.  "Single-threaded", avec un script de rendu transactionnel: √©cran vide - chargement - interface.  Le d√©veloppeur Artyom Belov de Cxense, se concentrant sur la loi de Pareto, a expliqu√© comment, ayant pass√© 20% du temps, rendant l'application 80% plus rapide gr√¢ce aux techniques de "design r√©actif" - pas encore formul√©es, mais d√©j√† utilis√©es dans des produits privil√©giant l'UX. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/N1vRiKV0iC4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><blockquote>  Mais quant aux mecs les plus aguerris qui ne sortent pas de Webpack et font souffrir Webpack, et non l'inverse?  Ils branchent des plugins.  Mais comme nous sommes au d√©but du d√©veloppement de cette technique, l'√©cosyst√®me nous propose un plug-in qui prend votre HTML, g√©n√®re du HTML avec CSS int√©gr√© bas√© sur celui-ci, fournit un QR code pour la publicit√© ... S√©rieusement?  Apr√®s cela, vous pouvez prendre et √† travers "! Important" interrompre les styles ... Peut-√™tre que cela vaut la peine de poser une question, pourquoi suis-je toujours dans le front-end. </blockquote><br><a name="habracut"></a>  - Bonjour √† tous, je suis Artyom Belov.  De nos jours, le mot r√©actif peut √™tre mal compris: il y a un grand pourcentage de personnes qui ont appris React avant d'apprendre JavaScript.  Par cons√©quent, prononcer de tels mots racine est un peu ambigu.  Mais pour moi, c'est encore la physique, la loi de conservation de l'√©lan. <br><br>  Commen√ßons par le probl√®me.  C'est notre perfectionnisme professionnel.  Apr√®s tout, nous ne montrons pas l'interface avant qu'elle ne soit pas "parfaite" - √† notre avis.  Et je ne sais pas ce qui va gagner dans la nomination pour le contenu informatif: un √©cran de navigateur blanc ou un spinner avec l'inscription "N'h√©sitez pas √† attendre √©ternellement";  ce n'est pas clair pour moi. <br><br><img src="https://habrastorage.org/webt/lp/6n/im/lp6nimmouvk7ykz4jww1kxtbao0.gif"><br><br>  Mais une chose est s√ªre: le rendu, comme la r√©ponse d'une application, n'est pas une transaction.  L'affichage d'une interface n'est pas une unit√© logique, vous devez donc la battre par lots. <br><br><img src="https://habrastorage.org/webt/ij/ye/mg/ijyemgrfvrmwrqzfqjuhgij4fv0.png"><br><br>  Et √† l'avant, en g√©n√©ral, nous nous aidons, nous mentons. <br><br><img src="https://habrastorage.org/webt/xt/oq/wy/xtoqwysiydkejdbgl-5hks8zlss.png"><br><br>  Fondamentalement, lorsque nous parlons du ¬´temps de chargement¬ª de notre application, nous ne disons pas compl√®tement l'expression - ¬´temps de chargement moyen¬ª.  Bien que vous n'ayez pas besoin d'avoir sept trav√©es dans le front pour rendre le t√©l√©chargement de la deuxi√®me application instantan√©, utilisez Service Worker. <br><br>  Et il est triste que Lighthouse encourage le fait que la demande ne puisse montrer aucun signe de vie et seulement dans les deux ou trois derni√®res images de l'audit dire: "En fait, je me suis pr√©par√© √† dessiner" <br><br><img src="https://habrastorage.org/webt/hp/de/x6/hpdex6uk7jnysvos09h9bmzqjlw.png"><br><br>  Et obtenir moins de 100 points dans le test d'application pour les performances n'est pas le plus difficile.  Google l'a remarqu√©, merci. <br><br><img src="https://habrastorage.org/webt/nf/od/yc/nfodyc04egapyj2qguraxrtuqgs.png"><br><br>  Et un concept aussi complet que ¬´Time to Interactive¬ª a √©t√© d√©compos√© en √©tapes, √† savoir: ¬´First Interactive¬ª, ¬´Time to Consistently Interactive¬ª et ¬´First Input Delay¬ª.  Si avec les deux premiers termes utilisant Google Translate, vous pouvez comprendre comment interagir et s'am√©liorer, alors ce dernier peut √™tre expliqu√© en regardant le fil principal du navigateur. <br><br><img src="https://habrastorage.org/webt/xl/d0/ii/xld0iivk6nhvadqiitkkno1wf3a.png"><br><br>  Un exemple.  Si, imm√©diatement apr√®s le chargement de l'interface, l'utilisateur clique sur le champ de texte, une pause peut se produire avant que le champ de texte affiche un curseur avec la possibilit√© d'entrer.  C'est parce que le thread principal √©tait occup√©, et l'interface au moment du clic semblait pr√™te pour l'interaction. <br><br><img src="https://habrastorage.org/webt/se/hs/3r/sehs3rflulvrztgsmqwmiedgseo.png"><br><br>  Tout se r√©sume au fait que les m√©triques dans Lighthouse ont presque le m√™me temps d'ex√©cution - alors qu'elles doivent √™tre √©quilibr√©es. <br><br><img src="https://habrastorage.org/webt/r9/yi/ry/r9yiryefiv4vpmmgjz16xjkuk0c.png"><br><br>  "La premi√®re peinture significative" doit √™tre aussi rapide que possible, "La premi√®re peinture satisfaisante" doit √™tre derri√®re elle, et "Time to Consistently Interactive" ne doit pas avoir un tel delta de l'√©cran blanc du navigateur jusqu'√† ce que l'interface soit compl√®tement pr√™te. <br><br>  Bien s√ªr, il y a des experts qui diront que cela se fait simplement: <br><br>  ¬´Nous devons diviser l'application en itin√©raires dans Webpack et effectuer un rendu c√¥t√© serveur.  Oui, il y a du travail pendant une demi-heure! " <br><br>  Mais ce n'est pas tout √† fait vrai ... Cher expert, ne mentionne pas que chaque nouvelle route fait la m√™me chose - le chargement.  Et encore une fois, toutes les m√©triques de Lighthous ont un petit delta entre elles, car l'itin√©raire est g√©n√©ralement important. <br><br>  Et parfois, vous ne travaillez pas dans une grande entreprise prosp√®re, et le rendu c√¥t√© serveur n‚Äôest pas l√†.  Et, profitant de votre position officielle, vous d√©marrez la R&amp;D avec un objectif clair: obtenir un rendu progressif.  Comme un JPEG progressif, qui est dans le paragraphe 167 de "Covodry" de Lebedev. <br><br>  En principe, le plan de R&amp;D semble tr√®s simple ... Vous devez en quelque sorte r√©aliser un profit.  Et n'oubliez pas l'essentiel - l'heure et les dates qui aiment br√ªler.  Et, en tenant le manifeste d'un programmeur minimaliste entre vos mains, vous devez vous rappeler: passez 20% du temps sur 80% du r√©sultat. <br><br>  J'ai des outils.  Par exemple, lag-radar. <br><br><img src="https://habrastorage.org/webt/me/ui/gi/meuigirky5fida7bawgkzjkrhq4.gif"><br><br>  Certes, je ne suis pas entr√© dans Santa Barbara, qui a vol√© l'id√©e, Dan Abramov √† quelqu'un ou vice versa ... Lors de la derni√®re pr√©sentation de JSConf Iceland 2018, un concept assez int√©ressant a √©t√© montr√©: le radar est vert jusqu'√† ce qu'il d√©tecte un retard dans la bande de roulement principale, et lorsqu'ils sont sensibles, le radar devient jaune et lorsqu'il est critique, il devient rouge. <br><br>  Et en appuyant sur Cmd + Shift + P sur un Mac - ou Ctrl + Shift + P sur un Windows - j'ai regard√© le pourcentage de couverture du code.  Et puis il a regard√© le paquet. <br><br><img src="https://habrastorage.org/webt/qm/zp/xh/qmzpxh1534fuw7wmb12pcahwbu0.png"><br><br><img src="https://habrastorage.org/webt/n9/kb/b4/n9kbb4yn0tr_elsgaqcjmxoabsi.png"><br><br>  Et encore une fois pour couvrir, et encore pour regrouper.  Et il a simplement d√©cid√© d'accepter la situation.  Je n'ai rien √† retirer d'ici.  En effet, dans les projets, beaucoup utilisent des outils qui sont de facto des standards.  Par exemple, Ivan Akulov, avec Google Chrome Labs, a cr√©√© il y a longtemps un r√©f√©rentiel pour l'optimisation du webpack, webpack-libs-optimisations.  Et pourquoi devrais-je r√©p√©ter cela, parler de Code Split, de Lazy Load?  C'est ce qui est des standards connus et progressifs en 2018. <br><br><img src="https://habrastorage.org/webt/bl/hq/sf/blhqsfhtguvdph0phjugkxdii8k.png"><br><br>  Et r√©pondant √† la question "Que peut-on t√©l√©charger en une demi-seconde?"  - JS et voici le gagnant.  Par exemple, vous pouvez t√©l√©charger 100 kilo-octets de JPG et consacrer 0,04 √† son traitement, mais JS le fait, car cela prend beaucoup plus de temps pour le traiter, 20 fois. <br><br><img src="https://habrastorage.org/webt/i5/2t/bf/i52tbfz_iunvezbqv4inaps2gbu.png"><br><br>  Parce que vous devez vous rappeler ce qui se passe au d√©marrage de l'application. <br><br><img src="https://habrastorage.org/webt/zg/ma/2b/zgma2bclq-utain_9wewam-znea.png"><br><br>  Apr√®s le t√©l√©chargement, la chose que vous souhaitez recomposer commence: t√©l√©chargez √† un moment donn√©, et analysez, compilez et ex√©cutez du code √† un autre moment. <br><br><img src="https://habrastorage.org/webt/ut/ac/cn/utaccnuew-ezap0uwwa5gwdeptm.png"><br><br>  J'ai regard√© ce que la balise &lt;script /&gt; nous offre.  Il existe de nombreuses options et j'ai pens√© √† utiliser un indice. <br><br><img src="https://habrastorage.org/webt/lp/zm/wv/lpzmwvxsbdqhy601fquwvbfxh3g.png"><br><br>  Hmm, il n'y a pas de t√©l√©commande dans la chambre, pas de t√©l√©phone.  Je prends 50:50.  Nous avons encore les options "diff√©rer" et type = "module". <br><br><img src="https://habrastorage.org/webt/p9/4m/xn/p94mxnan7l_grkm1eeboiwompra.png"><br><br>  Ils se chargent sans bloquer l'analyse, mais se traitent et s'ex√©cutent plus tard, lorsque l'application est la plus pr√™te pour cela - lib√©rant le thread principal. <br><br>  Mais il n'y a pas de bonne option, et les paroles du grand homme Ben Schwartz sont rappel√©es.  Non pas qu'il l'ait dit en russe, mais: <br><br><img src="https://habrastorage.org/webt/hp/fm/pj/hpfmpjka7cobou4-ycbslc75fr8.png"><br><br>  Pour l'√©viter, j'ai besoin de JS, donc la demande initiale est la seule m√©thode pour me d√©barrasser des demandes inutiles. <br><br><img src="https://habrastorage.org/webt/j2/_a/gk/j2_agk43qhz_filmtvcb5nqisps.png"><br><br>  Eh bien, vous devez configurer √† nouveau Webpack.  Ce n'est pas toujours la connexion des plugins. <br><br><img src="https://habrastorage.org/webt/py/br/dv/pybrdv0jaypvevaxpxmyxztnre8.png"><br><br>  En regardant l'ensemble dans le contexte, je ne comprends pas vraiment comment je r√©p√®te tel ou tel fragment de code entre les fichiers. <br><br><img src="https://habrastorage.org/webt/ip/ns/ac/ipnsacv2uyzzh71ojjbvzq84-8s.png"><br><br>  Probablement, ils doivent √™tre retir√©s dans la demande critique? <br><br><img src="https://habrastorage.org/webt/je/bj/sg/jebjsglelbtzg5ae1qpebqp6qpu.png"><br><br>  En utilisant ConcatenationPlugin (), nous effa√ßons le manifeste Webpack, c'est-√†-dire une liste de tous les fichiers des modules Webpack, puis incorporons ce JSON, √©liminant ainsi cette demande inutile.  D√©terminez ensuite s'il existe du code asynchrone qui peut √™tre incorpor√©.  Et enfin, int√©grez les cerveaux de Webpack directement dans la page afin de ne pas attendre que tous les modules se chargent.  Oui, prenez le morceau d'ex√©cution et int√©grez-le en HTML. <br><br><img src="https://habrastorage.org/webt/ez/se/mn/ezsemnw4njhrkyzacjq9ou3mpj8.png"><br><br>  En g√©n√©ral, l'int√©gration des cerveaux Webpack ne donne pas l'augmentation la plus enchanteresse, mais parlons maintenant de CSS critique. <br><br><img src="https://habrastorage.org/webt/qk/to/yp/qktoypf0izvaipse92pg8y5xrsc.png"><br><br>  Mais ... nous avons r√©alis√© que Critical CSS est destin√© aux gars qui n'ont pas d'application de page unique.  Apr√®s tout, sans un itin√©raire HTML complet, les outils ne pourront pas cr√©er de CSS critique. <br><br><img src="https://habrastorage.org/webt/bb/q6/h7/bbq6h7fs1wp0en6enqpq_fghdce.png"><br><br>  Et c'est bien qu'il y ait un Marionnettiste qui pourrait. <br><br><img src="https://habrastorage.org/webt/u4/np/ah/u4npah85nsmbspbasfgjblwndzw.png"><br><br>  Apr√®s tout, ce qui lui a √©t√© pr√©sent√© - le dossier ¬´puppeteer-examples¬ª sur GitHub a √©t√© saisi dans les projets.  Et c'est ainsi que le projet Rendertron a vu le jour.  Certes, afin d'obtenir au moins une sorte d'erreur de sa part, vous devez ins√©rer l'adresse, appuyez sur Entr√©e ... et c'est tout. <br><br><img src="https://habrastorage.org/webt/l-/ld/lu/l-ldlucikl595sr-nblxzeyltgw.png"><br><br>  Heureusement, il existe d'autres packages npm qui fonctionnent.  Ils sont apparemment sur le march√© depuis plus longtemps. <br><br><img src="https://habrastorage.org/webt/we/uk/ka/weukkaysbo1vbcd5dkoq6hlz3_i.png"><br><br>  Apr√®s avoir install√© et construit le package, avec la boucle habituelle, je peux restituer le HTML de mon application sur le serveur local, et ainsi obtenir le HTML critique, si n√©cessaire pour cr√©er un CSS critique. <br><br><img src="https://habrastorage.org/webt/zn/yu/zy/znyuzyyszqvrvvyiw7ymmol2qe0.png"><br><br>  Le bootstrap HTML, au lieu d'attendre un rendu, a donn√© une augmentation, comme pr√©vu, mais il est trop t√¥t pour s'y attarder.  Continuons le chemin vers CSS critique. <br><br><img src="https://habrastorage.org/webt/jq/tr/qp/jqtrqp3qmikvmse5u1o_hsenvii.png"><br><br>  Merci encore √† Eddie Osmani d'avoir pris soin de l'√©cosyst√®me et d'avoir cr√©√© HtmlCriticalWebpackPlugin (), o√π pour la configuration, vous devez r√©pondre √† quelques questions: o√π enregistrer le CSS critique et sous quelle forme? <br><br><img src="https://habrastorage.org/webt/m8/bp/e4/m8bpe4c-ycf0ycrpp61za6enyvs.png"><br><br>  Oh, vous pouvez voir la ligne suspecte ¬´painthouse¬ª.  C'est un moment tr√®s int√©ressant o√π Eddie Osmani utilise un package tiers qui a, il s'av√®re, m√™me une interface Web. <br><br><img src="https://habrastorage.org/webt/1w/e5/fx/1we5fxpgriedvqtvzvpet_-xtck.png"><br><br>  Mais pour √™tre honn√™te, j'ai honte d'utiliser l'interface Web, c'est apparemment pour les concepteurs de mise en page qui n'ont pas de ligne de commande.  Mais tout est simple, comme dans l'annonce Yuppy des ann√©es 90: il suffit de cliquer sur ¬´Cr√©er¬ª. <br><br><img src="https://habrastorage.org/webt/xw/gu/3b/xwgu3bgd2swexdr43zgtvchpjru.png"><br><br>  Et cela ne donne pas la croissance la plus enchanteresse, mais tr√®s sensible pour la premi√®re coloration de l'application. <br><br><img src="https://habrastorage.org/webt/oh/a4/qv/oha4qvyjpbhbs7i0na3urkctw6k.png"><br><br>  Avec une trace du monde, et l'application tourne l√©g√®rement lorsque les polices commencent √† danser.  Cette ligne est connue sous le nom de 3 secondes.  Et la section commence dans laquelle nous, le front-end, perdons rarement, √† savoir le jeu avec les polices. <br><br>  Recettes pour t√©l√©charger des polices.  Ici, l'affichage des polices nous aidera.  Apr√®s avoir compris qu'ici, vous n'avez pas besoin de bouger tout de suite, nous d√©cidons d'abord: un flash de texte invisible, FOIT, ou un flash de texte sans style, FOUT, nous fait peur. <br><br><img src="https://habrastorage.org/webt/ud/o3/hb/udo3hbctfrr-fhnau-vnzbxqd0a.png"><br><br>  Et - le spoiler - le plus terrible pour nous est le flash de texte invisible, car il provoque un plus grand nombre de redessins. <br><br><img src="https://habrastorage.org/webt/ae/re/1h/aere1hwgbcmtxarci1bmzgzuwne.gif"><br><br>  Si en bref, en regardant quelles propri√©t√©s d'affichage de police existent, il est juste de choisir le swap ou le repli pour vous-m√™me.  Dans l'ensemble, parmi les cinq propri√©t√©s, vous pouvez choisir la bonne pour vous-m√™me, il n'y a pas de bonne option. <br><br><img src="https://habrastorage.org/webt/fv/tc/jt/fvtcjt7ei2axij5oq-qmg5oeicq.png"><br><br>  De plus, j'ai entendu dire qu'il existe un projet Font Style Matcher qui me permettra de s√©lectionner une police syst√®me de secours d√©cente pour ma police Comic Sans et de ne pas la charger avec Google Fonts.  Bien que ce ne soit pas tout √† fait vrai ... <br><br>  Il y a des gens comme Zach Zezerman qui ont invent√© le concept FOFT. <br><br><img src="https://habrastorage.org/webt/h7/bh/_k/h7bh_kzwxghwdaoczjamornpc3q.png"><br><br>  Ce qui n'est pratiquement pas visible dans le navigateur. <br><br>  Cela est d√ª au fait que lorsque vous t√©l√©chargez une police romaine de style standard et que le navigateur est d√©j√† si intelligent qu'il peut cr√©er une police "fausse" en gras, en italique, soulign√©e et barr√©e en fonction du style standard.  Cela donne un flash, mais presque aucun.  Pour ce faire, impl√©mentez la police dite de pr√©chargement. <br><br><img src="https://habrastorage.org/webt/v8/he/o6/v8heo68v8tmi1l-n4xhk_iy925c.png"><br><br>  Mais que se passe-t-il si je dis que la police peut √™tre int√©gr√©e dans CSS?  Et c'est vrai, et √ßa donne aussi un gain! <br><br><img src="https://habrastorage.org/webt/fb/rw/or/fbrworg5hz3rnlf4xb0_jumd81u.png"><br><br>  Cela ressemble √† une combinaison de techniques.  Vous avez juste besoin d'incorporer la police romaine directement dans CSS.  Ainsi, pour gagner de la croissance √† la premi√®re connaissance principale de l'utilisateur avec l'application, puis charger les casques restants si n√©cessaire, mais pas imm√©diatement. <br><br><img src="https://habrastorage.org/webt/vc/2n/u_/vc2nu_vy1q3yhdvrjm3tiiuidek.png"><br><br>  Et donc, apr√®s tant de manipulations, ¬´Time to Consistently Interactive¬ª a encore un delta important par rapport aux autres indicateurs.  J'ai seulement am√©lior√© la coloration de l'application.  Ce n'est pas mal, mais pas ce que je recherchais.  √Ä mon avis, je dois attraper une sorte de probl√®me.  Et elle a √©t√© attrap√©e, et par la queue.  Apr√®s tout: <br><br><img src="https://habrastorage.org/webt/zj/_-/ym/zj_-ymrryk3ncctvdj3draofpqc.png"><br><br>  Il est assez √©vident pourquoi cela n'est pas impl√©ment√© dans de nombreux navigateurs.  Un saut de parchemin, et comment d√©terminer ce dont vous avez besoin et ce que vous n'avez pas besoin de charger, n'est pas le plus simple.  Peut-√™tre que cela donnera un tour. <br><br>  Mais encore une fois, les experts vous le diront - il y a une charge paresseuse. <br><br><img src="https://habrastorage.org/webt/yt/mn/gc/ytmngczroz9syd-jilxja1j1lga.gif"><br><br>  Mais rappelez-vous comment vous interagissez avec lui.  Vous ne pouvez pas couvrir 100% des cas. <br><br><img src="https://habrastorage.org/webt/e1/xy/to/e1xytoccbdrthqr7t8mwkpz7xy0.png"><br><br>  Oui, et si vous suivez le chemin de l'optimisation et terminez tous les points de contr√¥le dans le livre d'Eddie Osmani ¬´Essential Image Optimization¬ª, vous restez √©galement avec des probl√®mes non r√©solus ... <br><br>  Mais j'ai vu qu'Eddie Osmani aime mentionner Reddit dans ses almanachs et ses articles sur le Medium.  Je me souvenais qu'un ami travaillait pour moi l√†-bas et l'appelant pour des conseils, il m'a rappel√© qu'il y avait une chose telle que la performance Percieved, et cette d√©finition √©tait dans les couloirs de mon esprit. <br><br><img src="https://habrastorage.org/webt/wq/7b/ir/wq7bircpigeuun2zq-1dnd2olnc.gif"><br><br>  Ici, d'ailleurs, les designers nous aident.  C'est quand ce n'est pas le moment de jouer, mais la fa√ßon dont vous pr√©sentez votre application.  Et la tr√®s bonne tactique pour cela est ¬´les espaces r√©serv√©s de contenu¬ª. <br><br><img src="https://habrastorage.org/webt/sw/sp/as/swspasimeyisz0xpntedhjtwzws.gif"><br><br>  Par exemple, YouTube peut le faire. <br><br><img src="https://habrastorage.org/webt/hs/dg/oc/hsdgocb3gd43zf28rdk9mrp8sw0.gif"><br><br>  YouTube parvient √† lire la vid√©o avant que tous les composants de support aient √©t√© t√©l√©charg√©s.  Cela se fait, en regardant vers l'avenir, en raison des espaces r√©serv√©s au contenu, tels que les d√©s anim√©s gris. <br><br><img src="https://habrastorage.org/webt/r-/mn/hd/r-mnhdfosuuxnoxjmo3nkyirbiw.png"><br><br>  Et que nous offre l'√©cosyst√®me en ce moment?  Rien de sp√©cial.  CodePen  Voyons leurs impl√©mentations. <br><br><img src="https://habrastorage.org/webt/i3/yg/rn/i3ygrnaewv6egvo6m30viqtnizc.gif"><br><br>  C'est tout √† fait une carte qui se d√©roule dans n'importe quel mod√®le de conception.  Voyons voir ... <br><br><img src="https://habrastorage.org/webt/vh/bt/ol/vhbtolsbdzrzwsbjwbssns2k9ku.png"><br><br>  Nous devons d√©clarer quelques variables sur 30 lignes, d√©clarer un gramme de propri√©t√© sur 50 lignes, quelques animations et nous obtenons 100 lignes de code ... C'est 10 sur 10 sur l'√©chelle Lea Viru. <br><br>  Mais quant aux mecs les plus aguerris qui ne sortent pas de Webpack et font souffrir Webpack, et non l'inverse?  Ils branchent des plugins.  Mais comme nous sommes au d√©but du d√©veloppement de cette technique, l'√©cosyst√®me nous propose un plug-in qui prend votre HTML, g√©n√®re du HTML avec CSS int√©gr√© sur la base, donne un QR code pour la publicit√©, apparemment ... S√©rieusement?  Apr√®s cela, vous pouvez prendre et √† travers "! Important" interrompre les styles ... Peut-√™tre que cela vaut la peine de poser une question, pourquoi suis-je toujours dans le frontend. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2e1/eb8/136/2e1eb8136cda41afbcb5c57377fa0b39.gif"><br><br>  Mais il y a une √©quipe de personnes pour qui les blagues sur leur produit ne sont tout simplement pas dr√¥les.  PostCSS. <br><br><img src="https://habrastorage.org/webt/gs/oz/4p/gsoz4pnecxwewknvoeibchl3jt4.png"><br><br>  Vous pouvez toujours compter sur eux.  En particulier, vous pouvez impl√©menter cette technique - ¬´espaces r√©serv√©s contants¬ª - sur le concept CSS ¬´multi background¬ª.  C'est quand une seule propri√©t√© ¬´d'arri√®re-plan¬ª peut contenir plusieurs valeurs dans une virgule. <br><br><img src="https://habrastorage.org/webt/-d/ib/ve/-dibve2ok-afdcgtacyxwmnoy7o.png"><br><br>  CanIUse juste des r√©ponses, oui. <br><br><img src="https://habrastorage.org/webt/kj/rl/cy/kjrlcyol1rb9wjelcbypmi27cbg.png"><br><br>  Cela ressemble √† ce qui suit, qui nous est familier.  Familier - gr√¢ce √† Medium. <br><br><img src="https://habrastorage.org/webt/6z/gg/k8/6zggk89ocfmdsweepjofkwynb7y.png"><br><br>  Un d√©grad√© lin√©aire est appliqu√© √† votre image, qui s'affiche le plus rapidement possible, et une image en taille r√©elle appara√Ætra au-dessus, plus tard.  Dans le code, cela ressemble √† ceci. <br><br><img src="https://habrastorage.org/webt/aa/vz/gp/aavzgp6cvedhymo93jwi_qlgavi.png"><br><br>  La premi√®re demande de priorit√© commence √† charger l'image, bien s√ªr, lourde.  Et instantan√©ment, lorsque vous obtenez CSS, un d√©grad√© lin√©aire appara√Æt.  Mais le d√©grad√© lin√©aire n'est pas aussi droit et lisse que l'assouplissement. <br><br><img src="https://habrastorage.org/webt/qo/2v/5t/qo2v5tly1crltm-rhtr13byfwqs.png"><br><br>  Par cons√©quent, le code devrait √™tre r√©cup√©r√© par un autre plugin, ce qui rendra le d√©grad√© lin√©aire plus fluide. <br><br><img src="https://habrastorage.org/webt/vq/5o/hl/vq5ohlkxagfq4phxowdhbhdwjju.png"><br><br>  Mais avec un peu de d√©grad√© vous allez faire des superpositions pour qu'elles couvrent tous les cas. <br><br><img src="https://habrastorage.org/webt/mc/2p/ko/mc2pkosyyjuaqzywe5n7snaxt2s.png"><br><br>  Dans ce cas, cela ne fonctionnera pas correctement, car l'image est trop complexe pour cr√©er une abstraction avec juste un d√©grad√© lin√©aire.  Mais ici, sqip fonctionnera. <br><br><img src="https://habrastorage.org/webt/go/9q/k-/go9qk-zubonia-f8ce9rxpyjkjm.png"><br><br>  Il s'agit d'un module CLI pour cr√©er un espace r√©serv√© pour votre image et l'attacher en utilisant la technique des arri√®re-plans multiples. <br><br><img src="https://habrastorage.org/webt/yr/vo/3w/yrvo3wxdsdkoz3ycvvb63n_l7ja.png"><br><br>  Bien s√ªr, l'image en taille r√©elle se chargera beaucoup plus longtemps et l'espace r√©serv√© de sqip en raison de son poids sera affich√© beaucoup plus rapidement. <br><br><img src="https://habrastorage.org/webt/k9/-f/ya/k9-fyawdkhg5wnj-g9ad0kg5ada.png"><br><br>  Mais ce n'est pas tout √† fait ce que je cherche.  J'aimerais que des images lourdes viennent quand j'en ai besoin, et non quand le navigateur le veut.  Et je dois diviser cela en deux fichiers CSS, en mettre un dans le &lt;head&gt;, o√π seront les images claires, puis charger les images lourdes dans le &lt;body&gt;. <br><br><img src="https://habrastorage.org/webt/0x/3f/tp/0x3ftpbxbusr1rx9azjw0qwowfm.png"><br><br>  Mais qu'en est-il des images restantes, par exemple, dans JS? <br><br><img src="https://habrastorage.org/webt/7i/pt/cd/7iptcduyrpohelvzqfoi7bh5n1a.png"><br><br>  La manipulation avec SVG, en particulier, semble d√©cevante.  Vous semblez vouloir redessiner le SVG, mais gr√¢ce √† un CSS familier, il n'est pas sous votre contr√¥le. <br><br><img src="https://habrastorage.org/webt/3n/aa/os/3naaosb4noviggdmao_ddela4ua.png" width="400"><br><br>  Apparemment, selon les nouvelles tendances, le SVG devra devenir un composant. <br><br><img src="https://habrastorage.org/webt/np/mz/8i/npmz8i9lz8-4hvuot6hkeaabpiw.png"><br><br>  Avec l'aide du package qui a √©t√© adopt√© par Dan Abramov dans "create-react-app" - c'est "svgr". <br><br><img src="https://habrastorage.org/webt/4h/cy/w0/4hcyw0pbrpkries7-9uubkcdxfw.png"><br><br>  Il s'agit d'un outil CLI qui ins√®re simplement SVG dans votre JS, et vous pouvez travailler avec lui en tant que composant.  Ce sont en fait trois lignes de code. <br><br><img src="https://habrastorage.org/webt/do/2n/5v/do2n5vqnu2abhdcvg5tyzi4rfm0.png"><br><br>  Mais les concepteurs ne sont apparemment pas conscients que de nombreux frameworks devraient avoir un √©l√©ment racine du composant.  Je ne lui demanderai pas "d'exporter" SVG depuis Sketch d'une "mani√®re sp√©ciale"? <br><br><img src="https://habrastorage.org/webt/-r/e8/ec/-re8eccxf55jvammpcjxbmrdjqy.png"><br><br>  En raison d'un certain nombre de probl√®mes mineurs, il faut faire attention aux projets √©trangement populaires. <br><br><img src="https://habrastorage.org/webt/4b/ia/a9/4biaa9-smgckysguhn6icrhoxr0.png"><br><br>  Par exemple, certains ¬´react-icon-base¬ª qui s'offrent en remplacement de la balise &lt;SVG&gt;.  √Ä savoir, le package, pour ainsi dire, nous dit: au lieu de la balise &lt;SVG&gt;, enveloppez votre code SVG en moi, apr√®s quoi j'appliquerai les propri√©t√©s: fill, text, stroke et que ce soit, moi-m√™me, parce que j'ai la logique qui sert " bridge "de CSS. <br><br><img src="https://habrastorage.org/webt/68/0t/nu/680tnuknxotglxqfkedecjeimom.png"><br><br>  Et √† l'aide d'une simple commande, vous pouvez cr√©er votre mod√®le svgr pour votre projet. <br><br><img src="https://habrastorage.org/webt/lj/5e/a1/lj5ea1ltfxnqds_ryjlihtscmuk.png"><br><br><img src="https://habrastorage.org/webt/ab/4d/ru/ab4drujwtqjw58qy7qy_ymkkp9k.png"><br><br>  Pour √™tre honn√™te, je ne sais pas pourquoi ce projet est uniquement pour React. <br><br>  Ensuite, vous pouvez importer les ic√¥nes qui ne sont pas envahies par du sucre syntaxique, quelle que soit votre convenance. <br><br><img src="https://habrastorage.org/webt/fo/fa/ip/fofaipth6nhgfrhxfkzvo-qkqye.png"><br><br>  Et enfin, √©loignez-vous de la balise obsol√®te, peut-√™tre &lt;img&gt;, vers l'approche de composant dont tout le monde parle. <br><br><img src="https://habrastorage.org/webt/xb/mn/r_/xbmnr_cmfjvvuiiaynjd94ntbpo.png"><br><br>  Et en faveur de quoi?  Par exemple, pour que vous essayiez la pseudo-classe ¬´: export¬ª dans vos fichiers SCSS \ SASS. <br><br><img src="https://habrastorage.org/webt/da/gc/ab/dagcabkl5ljvze-pi5byymjvezs.png"><br><br>  Je suis tr√®s probablement certain que cela fonctionne √©galement dans le Webpack de votre version.  La pseudo-classe ¬´: export¬ª d√©charge les variables que vous d√©clarez dans SCSS.  Ensuite, vous pouvez les importer en code JS.  Et c'est tout, et vous n'avez pas besoin de faire pousser des v√©los, comme une sorte de fichier JSON avec toutes les couleurs et tout. <br><br><img src="https://habrastorage.org/webt/az/et/4p/azet4purq7uyv1by9ieb2t4quey.png"><br><br>  Svgr vous permet de r√©duire la premi√®re coloration de l'application.  Mais pas si honn√™te, car le code a simplement migr√© de CSS vers JS. <br><br>  Mais deuxi√®mement, nous avons oubli√© sqip, quelle sera la croissance apr√®s son application? <br><br><img src="https://habrastorage.org/webt/uo/kz/a_/uokza_2mediwdi2zvrbde81ocrk.png"><br><br>  Ayant de simples comp√©tences en importation dynamique, nous appliquons la technique suivante.  Nous chargeons la version all√©g√©e de l'image, espace r√©serv√© sqip, et l'afficheons dans l'interface.  Ensuite, dans l'importation dynamique, dans .then (), nous attendrons l'ic√¥ne en taille r√©elle sans bloquer l'interaction avec l'interface. <br><br><img src="https://habrastorage.org/webt/jp/8z/os/jp8zosqdywuruwqgm3uvctgrm64.png"><br><br>  Cela conduit au fait que nous obtenons le sujet pour nous SVG, que nous pouvons remplacer avec des arguments, comme un vrai composant JS. <br><br><img src="https://habrastorage.org/webt/s4/om/yc/s4omyca_uxov66_rf0cwwkkpkkc.png"><br><br>  Et enfin, cela donne une augmentation des m√©triques n√©cessaires du "interactif".  Et vous r√©pondez ainsi √† la principale question qui se pose dans les articles d'Eddie Osmani: "Est-ce qu'il se passe quelque chose en g√©n√©ral?"  Vous y r√©pondez bien plus t√¥t: "Oui, cela se produit." <br><br><img src="https://habrastorage.org/webt/sw/sp/as/swspasimeyisz0xpntedhjtwzws.gif" width="400"><br><br>  Mais j'ai l'impression que je n'ai que des ic√¥nes dans l'application.  Il existe √©galement des champs de formulaire, par exemple. <br><br><img src="https://habrastorage.org/webt/zi/uv/zm/ziuvzmaqb4r8qjqxzkrovjs6ija.png"><br><br>  Voici une solution que vous pouvez google d√®s maintenant.  Par exemple, ¬´react-content-placeholder¬ª et ¬´vue-content-placeholder¬ª.  Mais arr√™tez-vous, ici nous vous proposons de dessiner manuellement les espaces r√©serv√©s SVG des composants. <br><br><img src="https://habrastorage.org/webt/sg/px/ig/sgpxigjx8adf8m086qspkr_uzmo.png"><br><br>  Il existe √©galement une version Web o√π vous pouvez faire glisser et cr√©er des espaces r√©serv√©s par glisser-d√©poser.  Ce sera exactement comme vos vrais composants. <br><br><img src="https://habrastorage.org/webt/4s/x4/ql/4sx4qlbodank-sxpc_2gjwkwrou.png"><br><br>  Mais s‚Äôil s‚Äôagit de charger cinq fois des composants de style - non!  - et le syst√®me stylis√© que j'utilise. <br><br><img src="https://habrastorage.org/webt/ws/5t/99/ws5t99mmlkoxoltvtieoqyrq6hc.png"><br><br>  Et faites-en une r√®gle que vous devez respecter strictement le syst√®me de conception.  Et non les ic√¥nes et les images doivent √™tre correctement export√©es, mais un syst√®me de conception doit r√©glementer ce processus.  La largeur du champ de texte ne doit pas √™tre cod√©e en dur, mais le syst√®me de conception, en haut, doit r√©gler cela. <br><br><img src="https://habrastorage.org/webt/zk/rh/j9/zkrhj9u2cfz5flb8wzo4cny7xdc.png"><br><br>  Et le plus difficile, enfin, est de coller un op√©rateur ternaire qui affiche notre espace r√©serv√© le plus simple, qui permettra √† l'utilisateur de savoir qu'il est finalement arriv√© √† l'adresse, puis de t√©l√©charger le composant complet uniquement lorsque nous en avons besoin. <br><br>  En g√©n√©ral, il devrait y avoir une d√©mo, mais je ne suis pas venu ici pour un rapport publicitaire.  Mais les autres gars que vous connaissez tous sont dignes de respect. <br><br><img src="https://habrastorage.org/webt/xx/mf/j-/xxmfj-n04brdzux-8cw0pqetkgk.png"><br><br>  Et si j'√©tais aux Oscars, je prendrais une enveloppe et dirais quelque chose comme: ¬´Pour l'incroyable ing√©niosit√© dans la mise en ≈ìuvre de l'espace r√©serv√© au contenu, √† savoir dans la mise en ≈ìuvre de l'animation en utilisant un gif 10x10 pixels, au lieu d'√©crire des styles CSS, le titre est d√©cern√© "experts en animation, avec les salutations du pass√©, Instagram!" <br><br><img src="https://habrastorage.org/webt/xe/mt/ts/xemttszhiqkiwn9j7gdbhom4_5y.gif"><br><br>  J'esp√®re qu'ils ne mettent pas en retrait les GIF transparents √† un pixel, et que la propri√©t√© border n'est pas un double tableau. <br><br>  Et je voudrais vous rappeler: comptez sur une v√©ritable surveillance des utilisateurs, RUM. <br><br><img src="https://habrastorage.org/webt/qh/mc/wi/qhmcwipplhkttpsr0dpvkp2juvq.png"><br><br>  Pour les vrais utilisateurs de vos projets et des m√©triques pertinentes. ,      ,  , first input delay. <br><br>  ,      ,    common-,       . <br><br>   ,        ,          . <br><br>  ,     ,     JPG    ,     . <br><br>   ,       . ,   . <br><br><img src="https://habrastorage.org/webt/m-/ld/d3/m-ldd3rl4p_uxyjrdch8rpojsdm.png"><br><br>  Et le dernier.  ,    ,   ,       ,     ,    - loadable-. ÃÅ,    ,     . ,    ‚Äî     ,   .      ‚Äî    ,     .  , , ,         Webpack.      ,  ‚Ä¶ great loading component?  ,  -   ?      ? <br><br>  ,      ,  , ,    .     . <br><br><img src="https://habrastorage.org/webt/fk/fh/vn/fkfhvn0b1unjt3c39uyebo8lczm.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434130/">https://habr.com/ru/post/fr434130/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434120/index.html">Tutoriel React, Partie 5: Premiers pas avec une application TODO, style de base</a></li>
<li><a href="../fr434122/index.html">Sc√©nario - Pas un objet de page</a></li>
<li><a href="../fr434124/index.html">Activez l'acc√©l√©ration GPU dans Photoshop sous Wine</a></li>
<li><a href="../fr434126/index.html">Lire des m√©dias √† l'aide de la biblioth√®que VLCj</a></li>
<li><a href="../fr434128/index.html">PHP Digest n ¬∞ 146 (10-24 d√©cembre 2018) + R√©sultats 2018</a></li>
<li><a href="../fr434132/index.html">Achetez un t√©l√©viseur et roulez-le: LG pr√©voit de commencer √† vendre des t√©l√©viseurs flexibles dans l'ann√©e √† venir</a></li>
<li><a href="../fr434134/index.html">Analyse des r√©sultats de l'enqu√™te Kaggle ML & DS 2018</a></li>
<li><a href="../fr434136/index.html">Anatomie d'entreprise</a></li>
<li><a href="../fr434138/index.html">Nous √©crivons notre propre machine virtuelle</a></li>
<li><a href="../fr434140/index.html">Une br√®ve histoire des fonctionnalit√©s asynchrones Javascript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>