<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåë ‚úçüèæ üßëüèª‚Äçü§ù‚Äçüßëüèª Composici√≥n versus herencia, patr√≥n de equipo y desarrollo del juego en general üôä ‚è™ üë®üèΩ‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Descargo de responsabilidad: en mi opini√≥n, un art√≠culo sobre arquitectura de software no deber√≠a ni puede ser ideal. Cualquier soluci√≥n descrita pued...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Composici√≥n versus herencia, patr√≥n de equipo y desarrollo del juego en general</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438510/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/na/sz/bh/naszbh_usuh0jpozxmoiuqpdl1q.png"></div><br>  Descargo de responsabilidad: <i>en mi opini√≥n, un art√≠culo sobre arquitectura de software no deber√≠a ni puede ser ideal.</i>  <i>Cualquier soluci√≥n descrita puede no cubrir el nivel necesario para un programador, y para otro programador complicar√° la arquitectura innecesariamente.</i>  <i>Pero debe dar una soluci√≥n a las tareas que se ha establecido.</i>  <i>Y esta experiencia, junto con todos los dem√°s conocimientos de un programador que aprende, organiza informaci√≥n, perfecciona a los reci√©n llegados y se critica a s√≠ mismo y a los dem√°s, esta experiencia se convierte en excelentes productos de software.</i>  <i>El art√≠culo cambiar√° entre el arte y la parte t√©cnica.</i>  <i>Este es un peque√±o experimento y espero que sea interesante.</i> <br><blockquote>  - Escucha, se me ocurri√≥ una gran idea de juego.  - El dise√±ador del juego Vasya estaba desali√±ado y ten√≠a los ojos rojos.  Todav√≠a beb√≠a caf√© y hol√≠var en Habr√© para matar el tiempo antes del stand-up.  Me mir√≥ expectante hasta que termine de escribir en los comentarios al hombre sobre lo que estaba equivocado.  Vasya sab√≠a que hasta que prevaleciera la justicia y no se defendiera la verdad, no ten√≠a sentido continuar la conversaci√≥n conmigo.  Agregu√© la √∫ltima oraci√≥n y lo mir√©. <br><br>  En pocas palabras: los magos con man√° pueden lanzar hechizos, y los guerreros pueden luchar en combate cuerpo a cuerpo y gastar resistencia.  Tanto los magos como los guerreros pueden moverse.  S√≠, a√∫n ser√° posible robar a las vacas, pero ya lo haremos en la pr√≥xima versi√≥n, en resumen.  ¬øMostrar√° el prototipo despu√©s del stand-up, est√° bien? <br><br>  Se escap√≥ en su negocio de dise√±o de juegos, y abr√≠ el IDE. </blockquote><a name="habracut"></a><br>  De hecho, el tema "composici√≥n versus herencia", "problema de mono-pl√°tano", "problema de rombo (herencia m√∫ltiple)" son preguntas comunes en entrevistas en diferentes formatos y por una buena raz√≥n.  El uso incorrecto de la herencia puede complicar la arquitectura, y los programadores inexpertos no saben c√≥mo lidiar con esto y, como resultado, comienzan a criticar a OOP como un todo y comienzan a escribir c√≥digo de procedimiento.  Por lo tanto, los programadores experimentados (o aquellos que han le√≠do cosas inteligentes en Internet) consideran que es su deber preguntar sobre tales cosas en una entrevista en una variedad de formas.  La respuesta universal es "la composici√≥n es mejor que la herencia, y no se deben aplicar tonos de gris".  Aquellos que acaban de leer cada una de esas respuestas estar√°n 100% satisfechos. <br><br>  Pero, como dije al comienzo del art√≠culo, cada arquitectura se adaptar√° a su proyecto y si la herencia es suficiente para su proyecto y todo lo que se necesita para resolver el problema es crear Monkey with Banana, cr√©elo.  Nuestro programador estaba en una situaci√≥n similar.  No tiene sentido rechazar la herencia solo porque el FPS se reir√° de usted. <br><br><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ x = <span class="hljs-number"><span class="hljs-number">0</span></span>; y = <span class="hljs-number"><span class="hljs-number">0</span></span>; moveTo (x, y) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x = x; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y = y; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ mana = <span class="hljs-number"><span class="hljs-number">100</span></span>; castSpell () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mana--; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Warrior</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ stamina = <span class="hljs-number"><span class="hljs-number">100</span></span>; meleeHit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.stamina--; } }</code> </pre> <br><blockquote>  El stand-up, como siempre, se prolong√≥.  Me balance√© en una silla y colgu√© el tel√©fono mientras June Petya intentaba convencer al probador de que la imposibilidad de un control r√°pido con el bot√≥n derecho del mouse no es un error, porque no hab√≠a tal posibilidad en ning√∫n lado, lo que significa que debe dejar la tarea al departamento de preproducci√≥n.  El probador argument√≥ que, dado que para los usuarios el control mediante el bot√≥n derecho parece ser obligatorio, esto es un error, no una caracter√≠stica.  De hecho, como el √∫nico jugador de nuestro equipo que juega nuestro juego en servidores de batalla, quer√≠a agregar esta funci√≥n lo antes posible, pero sab√≠a que si la dejas en el departamento de preproducci√≥n, la m√°quina burocr√°tica dejar√≠a que se lance no antes de 4 meses, y habi√©ndolo publicado como un error, ya puede obtenerlo en la pr√≥xima compilaci√≥n.  El gerente del proyecto, como siempre, lleg√≥ tarde, y los muchachos estaban maldiciendo tan ferozmente que ya hab√≠an cambiado a colchonetas y, probablemente, las cosas pronto habr√≠an llegado a una pelea si el director del estudio no se hubiera encontrado con la maldici√≥n y no los hubiera llevado a su oficina.  Probablemente nuevamente por 300 d√≥lares multados. <br><br>  Cuando sal√≠ de la sala de rally, un dise√±ador de juegos corri√≥ hacia m√≠ y felizmente dijo que a todos les gustaba el prototipo, lo aceptaron y ahora este es nuestro nuevo proyecto para los pr√≥ximos seis meses.  Mientras camin√°bamos hacia mi mesa, √©l dijo con entusiasmo qu√© nuevas caracter√≠sticas habr√≠a en nuestro juego.  Cu√°ntos hechizos diferentes invent√≥ y, por supuesto, habr√° un palad√≠n que pueda luchar y lanzar magia.  Y todo el departamento de artistas ya est√° trabajando en nuevas animaciones, y China ya ha firmado un acuerdo seg√∫n el cual nuestro juego se lanzar√° en su mercado.  Mir√© en silencio el c√≥digo de mi prototipo, pens√© profundamente, destaqu√© todo y lo borr√©. </blockquote>  Creo que con el tiempo, cada programador, basado en su experiencia, comienza a ver problemas obvios que puede encontrar.  Especialmente si trabajas en equipo con un dise√±ador de juegos durante mucho tiempo.  Tenemos un mont√≥n de nuevos requisitos y caracter√≠sticas.  Y nuestra vieja "arquitectura" obviamente no puede manejarlo. <br><br>  Cuando se le pide una tarea similar en una entrevista, sin duda tratar√°n de atraparlo.  Pueden tener muchas formas diferentes: cocodrilos, que pueden nadar y correr.  Tanques que pueden disparar un ca√±√≥n o una ametralladora, etc.  La propiedad m√°s importante de tales tareas es que tiene un objeto que puede hacer varias cosas diferentes.  Y su herencia no puede hacer frente de ninguna manera, porque es imposible heredar de FlyingObject y SwimmingObject, y diferentes objetos pueden realizar diferentes acciones.  En este punto, abandonamos la herencia y pasamos a la composici√≥n: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ abilities = []; addAbility (...abilities) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> abilities) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.abilities.push(a); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } getAbility (AbilityClass) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.abilities) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> AbilityClass) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">/////////////////////////////////////// // //    ,      //       // /////////////////////////////////////// class Ability {} class HealthAbility extends Ability { health = 100; maxHealth = 100; } class MovementAbility extends Ability { x = 0; y = 0; moveTo(x, y) { this.x = x; this.y = y; } } class SpellCastAbility extends Ability { mana = 100; maxMana = 100; cast () { this.mana--; } } class MeleeFightAbility extends Ability { stamina = 100; maxStamina = 100; constructor (power) { this.power = power; } hit () { this.stamina--; } } /////////////////////////////////////// // //        // /////////////////////////////////////// class CharactersFactory { createMage () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new SpellCastAbility() ); } createWarrior () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new MeleeFightAbility(3) ); } createPaladin () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new SpellCastAbility(), new MeleeFightAbility(2) ); } }</span></span></code> </pre><br>  Cada acci√≥n posible ahora es una clase separada con su propio estado, y si es necesario, podemos crear personajes √∫nicos lanz√°ndoles el n√∫mero requerido de habilidades.  Por ejemplo, es muy f√°cil crear un √°rbol m√°gico inmortal: <br><br><pre> <code class="javascript hljs">createMagicTree () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Character().addAbility( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpellCastAbility() ); }</code> </pre> <br>  Perdimos la herencia y apareci√≥ una composici√≥n en su lugar.  Ahora creamos un personaje y enumeramos sus posibles habilidades.  Pero esto no significa que la herencia siempre sea mala, solo en este caso no encaja.  La mejor manera de entender si la herencia es correcta es responder a la pregunta por s√≠ mismo qu√© relaci√≥n representa.  Si esta conexi√≥n es "es-a", es decir, indica que MeleeFightAbility es una habilidad, entonces es perfecta.  Si la conexi√≥n se crea solo porque desea agregar una acci√≥n y muestra "has-a", entonces debe pensar en la composici√≥n. <br><blockquote>  Disfrut√© viendo un gran resultado.  Funciona de manera inteligente y sin errores, ¬°arquitectura so√±ada!  Estoy seguro de que pasar√° m√°s de una prueba de tiempo y durante mucho tiempo no tendremos que volver a escribirlo.  Estaba tan entusiasmado con mi c√≥digo que ni siquiera me di cuenta de c√≥mo se me acerc√≥ June Petya. <br><br>  La calle ya estaba oscura, lo que hac√≠a a√∫n m√°s notable c√≥mo brillaba de felicidad.  Aparentemente, logr√≥ dejar la tarea y librarse de la penalizaci√≥n por colchonetas en la direcci√≥n de sus colegas, que se anunci√≥ la semana pasada. <br><br>  "Los artistas pintaron simplemente animaciones divinas", dijo r√°pidamente, "no puedo esperar para que se jodan".  Ventajas voladoras particularmente hermosas cuando se aplica un hechizo de curaci√≥n.  ¬°Son tan verdes y esas ventajas! <br><br>  Me maldije a m√≠ mismo, porque olvid√© por completo que todav√≠a tenemos que atornillar la vista.  Maldici√≥n, parece tener que reescribir la arquitectura. </blockquote>  Tales art√≠culos generalmente describen solo el trabajo con el modelo, porque es abstracto y adulto, y tambi√©n puede dar "im√°genes para mostrar" a junio, sin importar la arquitectura que haya.  Sin embargo, nuestro modelo debe proporcionar la m√°xima informaci√≥n para la vista para que pueda hacer su trabajo.  En GameDev, el patr√≥n "Equipo" se usa generalmente para esto.  En pocas palabras: tenemos un estado sin l√≥gica, y cualquier cambio debe ocurrir en los equipos correspondientes.  Esto puede parecer una complicaci√≥n, pero ofrece muchas ventajas: <br>  - Se combinan muy bien cuando un equipo llama a otro <br>  - Cada comando, cuando se ejecuta, es, de hecho, un evento al que puede suscribirse <br>  - Podemos serializarlos f√°cilmente. <br><br>  Por ejemplo, un comando de da√±o podr√≠a verse as√≠.  Es entonces cuando el guerrero lo usar√° cuando sea golpeado con una espada y el mago cuando sea golpeado por un hechizo de fuego.  Ahora, por simplicidad, implement√© la validaci√≥n de comandos a trav√©s de excepciones, pero luego pueden reescribirse como c√≥digos de retorno. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DealDamageCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (target, damage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> healthAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target.getAbility(HealthAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (healthAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoHealthAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> resultHealth = healthAbility.health - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage; healthAbility.health = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.max( <span class="hljs-number"><span class="hljs-number">0</span></span>, resultHealth ); } }</code> </pre> <br>  Me gusta hacer comandos jer√°rquicos: cuando uno se ejecuta, <s>da a luz</s> muchos hijos, que luego ejecuta el motor.  Entonces, ahora que tenemos la capacidad de infligir da√±o, podemos intentar implementar un ataque cuerpo a cuerpo <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeleeHitCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, damage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fightAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(MeleeFightAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fightAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoFightAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren([ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target, fightAbility.power); ]); } }</code> </pre> <br>  Estos dos equipos tienen todo lo que necesitas para nuestras animaciones.  Un procesador puede simplemente suscribirse a eventos y mostrar todo lo que los artistas desean con el siguiente c√≥digo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> onMeleeHit (meleeHitCommand) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> view.drawMeleeHit( meleeHitCommand.source, meleeHitCommand.target ); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> onDealDamage (dealDamageCommand) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> view.showDamageNumbers( dealDamageCommand.target, dealDamageCommand.damage ); }</code> </pre> <br><blockquote>  Perd√≠ la cuenta, que una vez segu√≠ trabajando hasta el anochecer.  Desde la infancia, el desarrollo de los juegos me ha atra√≠do, me pareci√≥ algo m√°gico, e incluso ahora, cuando he estado haciendo esto durante muchos a√±os, estoy ansioso por eso.  A pesar de que aprend√≠ un secreto sobre c√≥mo se crean, no he perdido la fe en la magia.  Y esta magia me hace sentarme con tanta inspiraci√≥n por la noche y escribir mi c√≥digo.  Vasya se me acerc√≥.  Absolutamente no sabe programar, pero comparte mi actitud hacia los juegos. <br><br>  - Aqu√≠ - el dise√±ador del juego puso delante de m√≠ un Talmud de 200 p√°ginas impreso en hojas A4.  Aunque el documento de dise√±o se llev√≥ a cabo en confluencia, nos gust√≥ imprimirlo en etapas importantes para sentir este trabajo en forma f√≠sica.  Lo abr√≠ en una p√°gina aleatoria y obtuve una gran lista de una variedad de hechizos que un mago y un palad√≠n pueden hacer, una descripci√≥n de sus efectos, requisitos de inteligencia, precio de man√° y una descripci√≥n aproximada para los artistas sobre c√≥mo mostrarlos.  Trabajo durante muchos meses, porque hoy volver√© a quedarme en el trabajo. </blockquote>  Nuestra arquitectura facilita la creaci√≥n de combinaciones complejas de hechizos.  Es solo que cada hechizo puede devolver una lista de comandos que deben ejecutarse durante el lanzamiento <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CastSpellCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, spell) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell = spell; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> spellAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(SpellCastAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (spellAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoSpellCastAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PayManaCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell.manaCost)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell.getCommands(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target)); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">0</span></span>; getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DamageSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (damageValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damageValue = damageValue; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damageValue) ]; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HealSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (healValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.healValue = healValue; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.healValue) ]; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VampireSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value = value; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HealDamageCommand(source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value) ]; } }</code> </pre><br><blockquote>  <i>Un a√±o y medio despu√©s</i> <br><br>  El stand-up, como siempre, se prolong√≥.  Me balance√© en la silla y colgu√© en la computadora port√°til mientras Middle Petya discut√≠a con el probador sobre el error que se hab√≠a iniciado.  Con toda sinceridad, trat√≥ de convencer al probador de que la falta de control con el bot√≥n derecho del mouse en nuestro nuevo juego no deber√≠a marcarse como un error, porque esa tarea nunca se mantuvo y los dise√±adores de juegos o bufones no la resolvieron.  Ten√≠a la sensaci√≥n de deja vu, pero un nuevo mensaje en la discordia me distrajo: <br><br>  - Escucha - escribi√≥ el dise√±ador del juego - Tengo una gran idea ... </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/438510/">https://habr.com/ru/post/438510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../438496/index.html">Python + Raspberry Pi + Pixhawk y quadrocopter. O como no hacer robots</a></li>
<li><a href="../438498/index.html">¬øC√≥mo prepararse r√°pidamente para una entrevista, que tendr√° preguntas sobre algoritmos y tecnolog√≠as de procesamiento de informaci√≥n?</a></li>
<li><a href="../438500/index.html">En el lado bueno: c√≥mo Optimus Prime llev√≥ a Kingston e HyperX a CES 2019</a></li>
<li><a href="../438506/index.html">Mi segundo invierno sin nieve ni magistratura en B√©lgica</a></li>
<li><a href="../438508/index.html">La actividad del cerebro humano se tradujo por primera vez en un lenguaje claro.</a></li>
<li><a href="../438512/index.html">Compresi√≥n de datos de Huffman</a></li>
<li><a href="../438514/index.html">C√≥mo no he trabajado durante un a√±o en Sberbank</a></li>
<li><a href="../438516/index.html">Cu√°ndo guardar la longitud de una matriz en una variable local en C #</a></li>
<li><a href="../438518/index.html">Creando tu jsfiddle, parte 2</a></li>
<li><a href="../438522/index.html">Ecualizador estrat√©gico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>