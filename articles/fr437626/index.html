<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßñüèø üë®‚Äçüë¶‚Äçüë¶ üë©üèΩ‚Äçü§ù‚Äçüë®üèø Performances de la plateforme de trading avec un exemple simple üìñ ü§öüèº üê¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je veux parler sous une forme scientifique populaire de l'optimisation du temps de r√©ponse dans les plateformes de n√©gociation des b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Performances de la plateforme de trading avec un exemple simple</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437626/"><img src="https://habrastorage.org/webt/ek/hb/e1/ekhbe1j_jv2gufmgexvlsgre-si.png"><br><p>  Dans cet article, je veux parler sous une forme scientifique populaire de l'optimisation du temps de r√©ponse dans les plateformes de n√©gociation des bourses et des banques (HFT).  Pour r√©f√©rence, nous parlons de temps allant de centaines de nanosecondes √† des centaines de microsecondes.  Pour la plupart des autres applications, bon nombre des m√©thodes d'optimisation ci-dessous ne sont pas pertinentes simplement parce qu'il n'y a pas d'exigences aussi strictes. </p><br><p>  Nous consid√©rons g√©n√©ralement les performances en unit√©s de bande passante.  Par exemple dans Gigaflops.  Dans de tels cas, la t√¢che d'optimisation se r√©duit √† effectuer le nombre maximal de calculs par unit√© de temps ou √† r√©soudre le probl√®me en un minimum de temps.  La conception du processeur est con√ßue principalement pour atteindre le nombre maximal de calculs par unit√© de temps et des techniques d'optimisation standard pour celui-ci. </p><br><p>  Cependant, il existe des applications o√π le temps de r√©ponse est plus important, par exemple, les plates-formes de n√©gociation dans le commerce informatique (HFT), les moteurs de recherche, la robotique et les t√©l√©communications.  Le temps de r√©ponse est le temps d'ex√©cution d'une op√©ration ¬´unique¬ª de ce type, par exemple, de la r√©ception d'un package avec les devis actuels de l'√©change √† l'envoi de la commande de l'op√©ration d'√©change.  En fait, le temps de r√©ponse et le d√©bit (le nombre d'op√©rations de ce type par unit√© de temps) sont √©troitement li√©s, mais la diff√©rence est fondamentale.  Il est souvent possible d'augmenter le d√©bit simplement en ajoutant du mat√©riel (plus de serveurs), mais l'am√©lioration du temps de r√©ponse de cette mani√®re est probl√©matique (sauf en cas de charges de pointe). </p><a name="habracut"></a><br><p>  Plusieurs excellentes techniques sont utilis√©es pour optimiser le temps de r√©ponse.  Certains am√©liorent √† la fois le temps de r√©ponse et le d√©bit, d'autres am√©liorent l'un au d√©triment de l'autre.  Par exemple, pour am√©liorer le d√©bit, la mise en m√©moire tampon est typique pour traiter un tableau de paquets √† la fois.  De toute √©vidence, pour le temps de r√©ponse √† un seul paquet, cette approche est nuisible. </p><br><p>  Dans les plateformes de trading, la stabilit√© du temps de r√©ponse est √©galement tr√®s importante.  La plupart des gains et pertes se produisent lors de mouvements brusques des march√©s, accompagn√©s d'une activit√© anormalement √©lev√©e.  La plate-forme doit supporter de telles charges.  Tout bouchon peut provoquer des pertes tangibles. </p><br><p>  En g√©n√©ral, une telle optimisation du temps de r√©ponse de bas niveau est un sujet complexe qui n√©cessite une bonne compr√©hension de la pile r√©seau, du c≈ìur du syst√®me d'exploitation, des performances du processeur et de la plate-forme, et une synchronisation efficace des threads.  Ma t√¢che est d'expliquer toutes ces choses complexes avec un exemple simple et compr√©hensible. </p><cut><br><h4>  Travail de bureau </h4><br><p>  Utilisons l'analogie suivante.  Imaginez un groupe de personnes travaillant dans un bureau.  Les communications se font par l'√©change de messages sur papier (lettres).  Chaque lettre contient le destinataire, l'exp√©diteur et la t√¢che.  Des lettres sont plac√©es sur certaines tables du bureau.  Il y a des employ√©s qui ont pour t√¢che de recevoir des lettres du monde ext√©rieur et de les mettre sur des tables.  D'autres ramassent des lettres sur les tables et les transmettent aux d√©cideurs.  Chaque d√©cideur ne travaille qu'avec un certain type de lettres (ou t√¢ches). </p><br><p>  Le d√©cideur lit les lettres qui lui sont destin√©es et d√©cide si cette t√¢che sera achev√©e, report√©e ou ignor√©e.  Les t√¢ches d'ex√©cution sont empil√©es sur une table distincte.  Des ouvriers sp√©ciaux ramassent des lettres de cette table et les distribuent aux artistes.  Certaines lettres doivent recevoir une r√©ponse √† l'ext√©rieur du bureau, par exemple, envoyer une confirmation √† l'exp√©diteur externe. </p><br><p>  Pour √™tre plus proche de la r√©alit√©, compliquons un peu plus les conditions.  Par exemple, un bureau est un r√©seau complexe de chambres et de couloirs, et diff√©rents types de travailleurs ne peuvent se rendre que dans certains endroits auxquels ils ont acc√®s.  Comme le disent les math√©maticiens, sans perte de g√©n√©ralit√©, supposons que notre bureau, dans des conditions normales, traite 200 messages par jour avec un temps moyen de traitement des messages de 5 minutes. </p><br><p>  Notre t√¢che consiste donc √† minimiser le temps de traitement des messages.  Dans ce cas, il est souhaitable que le temps de traitement maximal ne d√©passe pas la moyenne plus de, disons, deux fois.  C'est-√†-dire que les sursauts d'activit√© doivent √™tre g√©r√©s efficacement. </p><br><p>  Alors par o√π commencer?  La fa√ßon la plus simple d'embaucher plus d'employ√©s est de traiter plus de messages.  Il est agr√©able de rechercher des travailleurs rapides, le temps de traitement sera alors r√©duit.  Disons que nous avons engag√© Usain Bolt et les autres finalistes olympiques.  Peut-√™tre que le temps de traitement est pass√© √† 2 minutes.  Mais il est √©vident qu'il n'y a nulle part o√π aller plus loin dans cette direction.  Personne ne court plus vite.  La limite est atteinte.  En comparant ces approches avec un ordinateur, l'embauche de personnes consiste √† acheter du mat√©riel suppl√©mentaire (serveurs, processeurs, c≈ìurs) pour augmenter le nombre de threads d'ex√©cution.  L'embauche d'athl√®tes est similaire √† l'achat du fer le plus rapide (fr√©quence maximale en premier lieu). </p><br><p>  La disposition de notre bureau n'est peut-√™tre pas optimale.  Un espace suffisant doit √™tre pr√©vu pour que les travailleurs puissent travailler efficacement.  Peut-√™tre √©largir les couloirs, sinon les gens doivent c√©der la place les uns aux autres, perdre un temps pr√©cieux?  D√©veloppons.  Augmentons √©galement l√©g√®rement les pi√®ces pour que les gens ne se pressent pas √† l'approche des tables.  C'est comme acheter un serveur avec plus de c≈ìurs et plus de m√©moire et de bande passante d'E / S. </p><br><p>  De plus, nous pouvons passer au service express au lieu du courrier ordinaire pour √©changer des messages avec le monde ext√©rieur.  En termes informatiques, cela revient √† s√©lectionner et √† optimiser l'√©quipement r√©seau et la pile r√©seau du syst√®me d'exploitation.  Tout cela est un co√ªt suppl√©mentaire, mais nous supposons qu'ils seront certainement rentables. </p><br><p>  Ainsi, apr√®s les innovations, notre temps de traitement des messages est tomb√© √†, disons, une minute.  Les travailleurs peuvent √©galement √™tre form√©s pour am√©liorer le processus de communication et d'ex√©cution.  Cela donnera peut-√™tre 15 pour cent avec la bonne motivation.  Il sait que nous avons atteint 51 secondes.  Ceci est similaire √† l'optimisation logicielle. </p><br><p>  La prochaine √©tape est d'essayer d'√©viter les collisions entre nos travailleurs en mouvement rapide.  Le goulot d'√©tranglement probable est l'approche des tables.  Il est conseill√© aux travailleurs d'avoir un acc√®s instantan√© et simultan√© aux bureaux dont ils ont besoin.  Vous pouvez trier les messages sur les tableaux lors de la mise en page (plac√©s dans des dossiers s√©par√©s) pour acc√©l√©rer l'acc√®s.  Les messages peuvent √©galement avoir des priorit√©s diff√©rentes.  Dans le programme, il s'agit d'un analogue de la synchronisation des threads.  Les flux doivent avoir un acc√®s parall√®le et maximal illimit√© aux donn√©es.  La r√©solution des probl√®mes de synchronisation des threads entra√Æne souvent une augmentation consid√©rable du d√©bit du syst√®me et contribue √† am√©liorer les temps de r√©ponse.  Dans le sens du traitement des salves d'activit√©, l'influence d'un algorithme de synchronisation optimal est g√©n√©ralement difficile √† surestimer. </p><br><p>  De plus, les travailleurs peuvent parfois se retrouver devant une porte ferm√©e.  D'autres probl√®mes mineurs de cette nature peuvent entra√Æner des inconv√©nients et des retards.  Il est conseill√© de remplir les conditions suivantes: le nombre de personnes dans un b√¢timent donn√© ne d√©passe jamais sa capacit√©, la vitesse des travailleurs est illimit√©e, aucune action n'est prise sans rapport avec le travail principal et aucun √©tranger ne se lance dans le processus de travail.  En termes informatiques, cela signifie que le nombre de threads ne d√©passe jamais le nombre de c≈ìurs disponibles, la plate-forme est configur√©e pour une fr√©quence / performance maximale, les modes √©conomiques sont d√©sactiv√©s, le mode Turbo est activ√© et le noyau du syst√®me d'exploitation et d'autres applications est isol√© et (presque) n'affecte pas la plate-forme de n√©gociation. </p><br><p>  Il est maintenant temps d'examiner encore plus attentivement les conditions dans le bureau.  Les portes s'ouvrent-elles facilement?  Le sol glisse-t-il?  Cela revient √† analyser les interactions avec le syst√®me d'exploitation.  S'il n'y a rien √† am√©liorer, vous pouvez essayer d'√©viter l'utilisation de certaines pi√®ces.  Par exemple, au lieu de livrer des lettres par le bureau, pourquoi ne pas les jeter de fen√™tre en fen√™tre?  Vous dites mal √† l'aise?  Cela peut √™tre inconfortable, mais rapide.  Ceci est similaire √† l'utilisation de l'approche de contournement du noyau dans la pile r√©seau. </p><br><p>  Au lieu d'utiliser la pile r√©seau du syst√®me d'exploitation, le contournement du noyau ex√©cute la pile r√©seau dans l'espace utilisateur.  Cela permet de se d√©barrasser de la copie inutile de donn√©es entre le syst√®me et la pile d'utilisateurs et du retard dans l'ex√©cution du flux de r√©ception de messages.  Dans le contournement du noyau, le flux de r√©ception attend g√©n√©ralement activement.  Il ne s'assoit pas sur le verrou du syst√®me d'exploitation, mais v√©rifie en permanence la variable de verrouillage jusqu'√† ce qu'il lui donne la permission de s'ex√©cuter. </p><br><p>  En fait, si nous avons commenc√© √† lancer des messages √† travers les fen√™tres, faisons-le efficacement.  L'option la plus fiable est de passer d'une fen√™tre √† l'autre.  Ce principe est utilis√© dans le protocole TCP.  Ce n'est pas l'option la plus rapide.  UDP vous permet de simplement d√©poser un message sans accus√© de r√©ception.  C'est plus rapide.  Personne n'est oblig√© d'attendre.  Vous pensez que c'est la limite?  Non, vous pouvez toujours apprendre √† lancer √† travers la fen√™tre afin que la lettre tombe directement sur la table souhait√©e et dans le dossier souhait√©.  Cette approche est appel√©e acc√®s direct √† distance √† la m√©moire (RDMA).  Je pense que nous avons r√©duit le temps de traitement de quelques secondes √† 35. </p><br><p>  Ou peut-√™tre construire un bureau √† partir de z√©ro au lieu d'adapter le bureau existant √† nos besoins?  Tels que fournit des conditions de travail id√©ales.  Cela am√©liorera peut-√™tre le temps de r√©ponse de quelques secondes √† 20, voire moins.  La conception de son propre bureau consiste √† utiliser un r√©seau de portes programmables sur site (FPGA).  Le FPGA est quelque chose comme un processeur dont le mat√©riel est programm√© pour r√©soudre un probl√®me sp√©cifique.  Un processeur normal est cod√© pour ex√©cuter un ensemble sp√©cifique d'instructions sur certains types de donn√©es et le thread d'ex√©cution (√† ne pas confondre avec le thread d'application) est √©galement corrig√©.  Contrairement au processeur, les FPGA ne sont pas pr√©programm√©s pour un ensemble d'instructions, de types de donn√©es et de flux d'ex√©cution.  Ils sont programm√©s pour une t√¢che sp√©cifique et dans cet √©tat sont capables de l'ex√©cuter uniquement (jusqu'√† une reprogrammation ult√©rieure).  Une programmation FPGA efficace n'est pas une t√¢che facile.  Apporter des modifications au programme peut √©galement n√©cessiter beaucoup d'efforts.  Et bien que le FPGA n'implique pas l'embauche d'Usain Bolt (les fr√©quences sont bien inf√©rieures √† celles du processeur), mais le parall√©lisme illimit√© de l'ex√©cution des instructions permet d'obtenir des temps de traitement des messages inf√©rieurs √† ceux du processeur. </p><br><p>  Eh bien, en conclusion, je recommanderai des outils d'analyse de performance pour les logiciels.  L'amplificateur Intel VTuneTM et la technologie Intel Processor Trace vous aident √† voir en d√©tail o√π et pourquoi le temps CPU est perdu. </p><br><p>  Si le sujet vous int√©resse, vous pouvez lire mes articles sur Intel Developer Zone (en anglais), qui fournissent √©galement des conseils techniques pratiques sur l'optimisation du temps de r√©ponse. </p><br><ul><li>  https://software.intel.com/en-us/articles/optimizing-computer-applications-for-latency-part-1-configuring-the-hardware </li><li>  https://software.intel.com/en-us/articles/optimizing-computer-applications-for-latency-part-2-tuning-applications </li></ul></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437626/">https://habr.com/ru/post/fr437626/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437616/index.html">Six mois sans PDG et baisse des ventes d'iPhone: pourquoi les actions d'Intel baissent</a></li>
<li><a href="../fr437618/index.html">42 op√©rateurs de recherche avanc√©e de Google (liste compl√®te)</a></li>
<li><a href="../fr437620/index.html">Comment la technologie cloud change la fa√ßon dont nous traitons</a></li>
<li><a href="../fr437622/index.html">Prise en main du service Azure Machine Learning</a></li>
<li><a href="../fr437624/index.html">OpenSceneGraph: principes de base des textures</a></li>
<li><a href="../fr437630/index.html">Les principales annonces de Microsoft de la conf√©rence BETT</a></li>
<li><a href="../fr437632/index.html">Mash, les bases de la langue</a></li>
<li><a href="../fr437634/index.html">Routeur sans fil bricolage</a></li>
<li><a href="../fr437636/index.html">Publication de l'application sur le Microsoft Store: quelques changements pour l'ann√©e</a></li>
<li><a href="../fr437638/index.html">"Quel est le point de r√©ponse?" Non-r√©viseur Atmotube et soudure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>