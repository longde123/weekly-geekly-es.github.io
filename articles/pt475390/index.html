<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóØÔ∏è üöÜ üë®‚Äç‚öïÔ∏è Como criar seu primeiro aplicativo Web usando o Go ‚ò∏Ô∏è üöº üëºüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Apresento a voc√™ a tradu√ß√£o do artigo "Como criar seu primeiro aplicativo da Web com o Go", de Ayooluwa Isaiah. 


 Este √© o guia para seu p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como criar seu primeiro aplicativo Web usando o Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475390/"><p>  Ol√° Habr!  Apresento a voc√™ a tradu√ß√£o do artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Como criar seu primeiro aplicativo da Web com o Go",</a> de Ayooluwa Isaiah. </p><br><p> Este √© o guia para seu primeiro aplicativo da web Go.  Criaremos um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativo de not√≠cias</a> que usa a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API de not√≠cias</a> para receber artigos sobre um t√≥pico espec√≠fico e implant√°-lo no servidor de produ√ß√£o no final. </p><a name="habracut"></a><br><p>  Voc√™ pode encontrar o c√≥digo completo usado para este tutorial neste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio GitHub</a> . </p><br><h2 id="trebovaniya">  Exig√™ncias </h2><br><p> O √∫nico requisito para esta tarefa √© que o Go esteja instalado no seu computador e voc√™ esteja um pouco familiarizado com sua sintaxe e constru√ß√µes.  A vers√£o Go que usei para criar o aplicativo tamb√©m √© a mais recente no momento da reda√ß√£o deste documento: <strong>1.12.9</strong> .  Para visualizar a vers√£o instalada do Go, use o comando <code>go version</code> . </p><br><p>  Se voc√™ acha esta tarefa muito dif√≠cil para voc√™, v√° para a minha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">li√ß√£o introdut√≥ria</a> anterior, que deve ajud√°-lo a come√ßar. </p><br><h2 id="itak-nachnem">  Ent√£o, vamos come√ßar! </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">N√≥s clonamos o reposit√≥rio de arquivos inicial no GitHub</a> e <code>cd</code> no diret√≥rio criado.  Temos tr√™s arquivos principais: No arquivo <code>main.go</code> escreveremos todo o c√≥digo Go para esta tarefa.  O arquivo <code>index.html</code> √© o modelo que ser√° enviado ao navegador e os <code></code> do aplicativo est√£o em <code>assets/styles.css</code> . </p><br><h2 id="sozdadim-bazovyy-veb-server">  Crie um servidor web b√°sico </h2><br><p>  Vamos come√ßar criando um servidor n√∫cleo que envia o texto "Hello World!" Para o navegador ao executar uma solicita√ß√£o GET para a raiz do servidor.  Altere seu arquivo <code>main.go</code> para ficar assim: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { w.Write([]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>(<span class="hljs-string"><span class="hljs-string">"&lt;h1&gt;Hello World!&lt;/h1&gt;"</span></span>)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() mux.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, indexHandler) http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":"</span></span>+port, mux) }</code> </pre> <br><p>  A primeira linha do <code>package main</code> - declara que o c√≥digo no arquivo <code>main.go</code> ao pacote principal.  Depois disso, importamos o pacote <code>net/http</code> , que fornece implementa√ß√µes de cliente e servidor HTTP para uso em nosso aplicativo.  Este pacote faz parte da biblioteca padr√£o e est√° inclu√≠do em todas as instala√ß√µes do Go. </p><br><p>  Na fun√ß√£o <code>main</code> , <code>http.NewServeMux()</code> cria um novo multiplexador de solicita√ß√£o HTTP e o atribui √† vari√°vel <code>mux</code> .  Essencialmente, o multiplexador de solicita√ß√£o corresponde √† URL das solicita√ß√µes recebidas na lista de caminhos registrados e chama o manipulador apropriado para o caminho sempre que uma correspond√™ncia √© encontrada. </p><br><p>  Em seguida, registramos nossa primeira fun√ß√£o de manipulador para o caminho raiz <code>/</code> .  Essa fun√ß√£o de manipulador √© o segundo argumento para <code>HandleFunc</code> e sempre possui a <code>func (w http.ResponseWriter, r * http.Request)</code> assinatura <code>func (w http.ResponseWriter, r * http.Request)</code> . </p><br><p>  Se voc√™ olhar para a fun√ß√£o <code>indexHandler</code> , ver√° que ela possui exatamente essa assinatura, o que a torna um segundo argumento v√°lido para <code>HandleFunc</code> .  O par√¢metro <code>w</code> √© a estrutura que usamos para enviar respostas √† solicita√ß√£o HTTP.  Ele implementa o m√©todo <code>Write()</code> , que pega uma fatia de bytes e grava os dados combinados como parte da resposta HTTP. </p><br><p>  Por outro lado, o par√¢metro <code>r</code> representa a solicita√ß√£o HTTP recebida do cliente.  √â assim que acessamos os dados enviados pelo navegador da web no servidor.  Ainda n√£o o estamos usando aqui, mas definitivamente o usaremos mais tarde. </p><br><p>  Por fim, temos o m√©todo <code>http.ListenAndServe()</code> , que inicia o servidor na porta 3000 se a porta n√£o estiver configurada pelo ambiente.  Sinta-se livre para usar uma porta diferente se 3000 for usado no seu computador. </p><br><p>  Em seguida, compile e execute o c√≥digo que voc√™ acabou de escrever: </p><br><pre> <code class="bash hljs">go run main.go</code> </pre> <br><p>  Se voc√™ acessar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http: // localhost: 3000</a> no seu navegador, dever√° ver o texto "Hello World!". </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/989/645/927/9896459277d1e7aa363ee0f9c444bc92.png" alt="Navegador corajoso mostrando o texto Hello World"></a> </p><br><h2 id="shablony-v-go">  Ir modelos </h2><br><p>  Vejamos os conceitos b√°sicos de modelos no Go.  Se voc√™ estiver familiarizado com modelos em outros idiomas, isso deve ser f√°cil de entender. </p><br><p>  Os modelos fornecem uma maneira f√°cil de personalizar a sa√≠da do seu aplicativo da Web, dependendo da rota, sem a necessidade de escrever o mesmo c√≥digo em locais diferentes.  Por exemplo, podemos criar um modelo para a barra de navega√ß√£o e us√°-lo em todas as p√°ginas do site sem duplicar o c√≥digo.  Al√©m disso, tamb√©m temos a oportunidade de adicionar alguma l√≥gica b√°sica √†s nossas p√°ginas da web. </p><br><p>  O Go fornece duas bibliotecas de modelos em sua biblioteca padr√£o: <code>text/template</code> e <code>html/template</code> .  Ambos fornecem a mesma interface, no entanto, o pacote <code>html/template</code> √© usado para gerar sa√≠da HTML protegida contra a inje√ß√£o de c√≥digo, portanto a usaremos aqui. </p><br><p>  Importe este pacote para o seu arquivo <code>main.go</code> e use-o da seguinte maneira: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tpl = template.Must(template.ParseFiles(<span class="hljs-string"><span class="hljs-string">"index.html"</span></span>)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { tpl.Execute(w, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() mux.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, indexHandler) http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":"</span></span>+port, mux) }</code> </pre> <br><p>  <code>tpl</code> √© uma vari√°vel no n√≠vel do pacote que indica a defini√ß√£o de um modelo a partir dos arquivos fornecidos.  A chamada <code>template.ParseFiles</code> analisa o arquivo <code>index.html</code> na raiz do diret√≥rio de nosso projeto e verifica sua validade. </p><br><p>  Envolvemos a chamada <code>template.ParseFiles</code> no <code>template.Must</code> para que o c√≥digo cause p√¢nico quando ocorrer um erro.  A raz√£o pela qual entramos em p√¢nico aqui, em vez de tentar lidar com o erro, √© porque n√£o faz sentido continuar executando o c√≥digo se tivermos um modelo inv√°lido.  Esse √© um problema que precisa ser corrigido antes de tentar reiniciar o servidor. </p><br><p>  Na fun√ß√£o <code>indexHandler</code> executamos o modelo criado anteriormente fornecendo dois argumentos: onde queremos gravar a sa√≠da e os dados que queremos passar para o modelo. </p><br><p>  No caso acima, gravamos a sa√≠da na interface <code>ResponseWriter</code> e, como n√£o temos dados para passar ao nosso modelo no momento, <code>nil</code> √© passado como o segundo argumento. </p><br><p>  Pare o processo em execu√ß√£o no seu terminal usando Ctrl-C e inicie-o novamente com <code>go run main.go</code> e atualize seu navegador.  Voc√™ dever√° ver o texto "Demonstra√ß√£o do aplicativo de not√≠cias" na p√°gina, como mostrado abaixo: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/8f8/3d2/10b/8f83d210b810eeacb35c3684adcaa827.png" alt="Navegador corajoso mostrando o texto da demonstra√ß√£o do aplicativo de not√≠cias"></a> </p><br><h2 id="dobavlyaem-panel-navigacii-na-stranicu">  Adicione uma barra de navega√ß√£o √† p√°gina </h2><br><p>  Substitua o conte√∫do da <code>&lt;body&gt;</code> no seu arquivo index.html, como mostrado abaixo: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span><span class="hljs-tag">&gt;</span></span>News Demo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Enter a news topic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/freshman-tech/news"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button github-button"</span></span></span><span class="hljs-tag">&gt;</span></span>View on Github<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Em seguida, reinicie o servidor e atualize seu navegador.  Voc√™ deve ver algo semelhante a este: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/abf/65e/ea8/abf65eea8166c5839ec6e01e19d31eb4.png" alt="Navegador mostrando a barra de navega√ß√£o sem estilo"></a> </p><br><h2 id="rabota-so-staticheskimi-faylami">  Trabalhar com arquivos est√°ticos </h2><br><p>  Observe que a barra de navega√ß√£o que adicionamos acima n√£o possui estilos, apesar de j√° os termos especificado no <code>&lt;head&gt;</code> nosso documento. </p><br><p>  Isso ocorre porque o caminho <code>/</code> realmente corresponde a todos os caminhos que n√£o s√£o processados ‚Äã‚Äãem outro lugar.  Portanto, se voc√™ acessar <a href="">http: // localhost: 3000 / assets / style.css</a> , ainda receber√° a p√°gina inicial de Demonstra√ß√£o de Not√≠cias em vez do arquivo CSS porque a rota <code>/assets/style.css</code> n√£o foi declarada especificamente. </p><br><p>  Mas a necessidade de declarar manipuladores expl√≠citos para todos os nossos arquivos est√°ticos n√£o √© realista e n√£o pode ser dimensionada.  Felizmente, podemos criar um manipulador para atender a todos os recursos est√°ticos. </p><br><p>  A primeira coisa a fazer √© criar uma inst√¢ncia do objeto do servidor de arquivos, passando no diret√≥rio em que todos os nossos arquivos est√°ticos est√£o localizados: </p><br><pre> <code class="go hljs">fs := http.FileServer(http.Dir(<span class="hljs-string"><span class="hljs-string">"assets"</span></span>))</code> </pre> <br><p>  Em seguida, precisamos dizer ao nosso roteador para usar este objeto de servidor de arquivos para todos os caminhos que come√ßam com o prefixo <code>/assets/</code> : </p><br><pre> <code class="go hljs">mux.Handle(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, http.StripPrefix(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, fs))</code> </pre> <br><p>  Agora todos juntos: </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// main.go //   func main() { port := os.Getenv("PORT") if port == "" { port = "3000" } mux := http.NewServeMux() //     fs := http.FileServer(http.Dir("assets")) mux.Handle("/assets/", http.StripPrefix("/assets/", fs)) mux.HandleFunc("/", indexHandler) http.ListenAndServe(":"+port, mux) }</span></span></code> </pre> <br><p>  Reinicie o servidor e atualize o navegador.  Os estilos devem ser ativados conforme mostrado abaixo: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/933/902/77d/93390277dcb620c2f3a3e0421a4f5e6d.png" alt="Navegador corajoso mostrando a barra de navega√ß√£o com estilo"></a> </p><br><h2 id="sozdaem-rout-search">  Criamos uma rota / pesquisa </h2><br><p>  Vamos criar uma rota que lide com consultas de pesquisa para artigos de not√≠cias.  Usaremos a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API de not√≠cias</a> para processar solicita√ß√µes; portanto, voc√™ precisa se registrar para receber uma chave de API gratuita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Essa rota espera dois par√¢metros de consulta: <code>q</code> representa a consulta do usu√°rio e a <code>page</code> usada para rolar pelos resultados.  Este par√¢metro da <code>page</code> √© opcional.  Se n√£o estiver inclu√≠do no URL, simplesmente assumimos que o n√∫mero da p√°gina dos resultados est√° definido como "1". </p><br><p>  Adicione o seguinte manipulador em <code>indexHandler</code> ao seu arquivo <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { u, err := url.Parse(r.URL.String()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { w.WriteHeader(http.StatusInternalServerError) w.Write([]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>(<span class="hljs-string"><span class="hljs-string">"Internal server error"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } params := u.Query() searchKey := params.Get(<span class="hljs-string"><span class="hljs-string">"q"</span></span>) page := params.Get(<span class="hljs-string"><span class="hljs-string">"page"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> page == <span class="hljs-string"><span class="hljs-string">""</span></span> { page = <span class="hljs-string"><span class="hljs-string">"1"</span></span> } fmt.Println(<span class="hljs-string"><span class="hljs-string">"Search Query is: "</span></span>, searchKey) fmt.Println(<span class="hljs-string"><span class="hljs-string">"Results page is: "</span></span>, page) }</code> </pre> <br><p>  O c√≥digo acima extrai os par√¢metros <code>q</code> e <code>page</code> da URL de solicita√ß√£o e exibe os dois no terminal. </p><br><p>  Em seguida, registre a fun√ß√£o <code>searchHandler</code> como manipulador do caminho <code>/search</code> , conforme mostrado abaixo: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() fs := http.FileServer(http.Dir(<span class="hljs-string"><span class="hljs-string">"assets"</span></span>)) mux.Handle(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, http.StripPrefix(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, fs)) <span class="hljs-comment"><span class="hljs-comment">// Add the next line mux.HandleFunc("/search", searchHandler) mux.HandleFunc("/", indexHandler) http.ListenAndServe(":"+port, mux) }</span></span></code> </pre> <br><p>  Lembre-se de importar os pacotes <code>fmt</code> e <code>net/url</code> de cima: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"net/url"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> )</code> </pre> <br><p>  Agora reinicie o servidor, insira a consulta no campo de pesquisa e verifique o terminal.  Voc√™ deve ver sua solicita√ß√£o no terminal, como mostrado abaixo: </p><br><br><br><h2 id="sozdayom-model-dannyh">  Crie um modelo de dados </h2><br><p>  Quando fazemos uma solicita√ß√£o para a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>News API/everything</code></a> endpoint, esperamos uma resposta json no seguinte formato: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ok"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"totalResults"</span></span>: <span class="hljs-number"><span class="hljs-number">4661</span></span>, <span class="hljs-attr"><span class="hljs-attr">"articles"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"source"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Gizmodo.com"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Jennings Brown"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"World's Dumbest Bitcoin Scammer Tries to Scam Bitcoin Educator, Gets Scammed in The Process"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ben Perrin is a Canadian cryptocurrency enthusiast and educator who hosts a bitcoin show on YouTube. This is immediately apparent after a quick a look at all his social media. Ten seconds of viewing on of his videos will show that he is knowledgeable about di‚Ä¶"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://gizmodo.com/worlds-dumbest-bitcoin-scammer-tries-to-scam-bitcoin-ed-1837032058"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"urlToImage"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://i.kinja-img.com/gawker-media/image/upload/s--uLIW_Oxp--/c_fill,fl_progressive,g_center,h_900,q_80,w_1600/s4us4gembzxlsjrkmnbi.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"publishedAt"</span></span>: <span class="hljs-string"><span class="hljs-string">"2019-08-07T16:30:00Z"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"content"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ben Perrin is a Canadian cryptocurrency enthusiast and educator who hosts a bitcoin show on YouTube. This is immediately apparent after a quick a look at all his social media. Ten seconds of viewing on of his videos will show that he is knowledgeable about..."</span></span> } ] }</code> </pre> <br><p>  Para trabalhar com esses dados no Go, precisamos gerar uma estrutura que reflita os dados ao decodificar o corpo da resposta.  Claro, voc√™ pode faz√™-lo manualmente, mas prefiro usar o site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JSON-to-Go</a> , o que facilita muito esse processo.  Ele gera uma estrutura Go (com tags) que funcionar√° para este JSON. </p><br><p>  Tudo o que voc√™ precisa fazer √© copiar o objeto JSON e col√°-lo no campo marcado com <strong>JSON</strong> , depois copiar a sa√≠da e col√°-lo no seu c√≥digo.  Aqui est√° o que obtemos para o objeto JSON acima: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> AutoGenerated <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Status <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"status"`</span></span> TotalResults <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-string"><span class="hljs-string">`json:"totalResults"`</span></span> Articles []<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Source <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { ID <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"name"`</span></span> } <span class="hljs-string"><span class="hljs-string">`json:"source"`</span></span> Author <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"author"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> URL <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"url"`</span></span> URLToImage <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"urlToImage"`</span></span> PublishedAt time.Time <span class="hljs-string"><span class="hljs-string">`json:"publishedAt"`</span></span> Content <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"content"`</span></span> } <span class="hljs-string"><span class="hljs-string">`json:"articles"`</span></span> }</code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/ac8/9d9/44f/ac89d944f90e03d2313a02d38364ba0d.png" alt="Navegador corajoso mostrando a ferramenta JSON to Go"></a> </p><br><p>  Fiz v√°rias altera√ß√µes na estrutura <code>AutoGenerated</code> separando o fragmento <code>Articles</code> em sua pr√≥pria estrutura e atualizando o nome da estrutura.  Cole a seguinte declara√ß√£o de vari√°vel <code>tpl</code> em <code>main.go</code> e adicione o pacote de <code>time</code> √† sua importa√ß√£o: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Source <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { ID <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"name"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Article <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Source Source <span class="hljs-string"><span class="hljs-string">`json:"source"`</span></span> Author <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"author"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> URL <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"url"`</span></span> URLToImage <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"urlToImage"`</span></span> PublishedAt time.Time <span class="hljs-string"><span class="hljs-string">`json:"publishedAt"`</span></span> Content <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"content"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Results <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Status <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"status"`</span></span> TotalResults <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-string"><span class="hljs-string">`json:"totalResults"`</span></span> Articles []Article <span class="hljs-string"><span class="hljs-string">`json:"articles"`</span></span> }</code> </pre> <br><p>  Como voc√™ deve saber, o Go exige que todos os campos exportados na estrutura comecem com uma letra mai√∫scula.  No entanto, √© comum representar campos JSON usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">camelCase</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">snake_case</a> , que n√£o come√ßam com uma letra mai√∫scula. </p><br><p>  Portanto, usamos tags de campo de estrutura como <code>json:"id"</code> para exibir explicitamente o campo de estrutura no campo JSON, como mostrado acima.  Ele tamb√©m permite que voc√™ use nomes completamente diferentes para o campo de estrutura e o campo json correspondente, se necess√°rio. </p><br><p>  Por fim, vamos criar um tipo diferente de estrutura para cada consulta de pesquisa.  Adicione isso abaixo da estrutura de <code>Results</code> em <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Search <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { SearchKey <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> NextPage <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TotalPages <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Results Results }</code> </pre> <br><p>  Essa estrutura representa cada consulta de pesquisa feita pelo usu√°rio.  <code>SearchKey</code> √© a pr√≥pria consulta, o campo <code>NextPage</code> permite rolar pelos resultados, <code>TotalPages</code> - o n√∫mero total de p√°ginas de resultados da consulta e <code>Results</code> - a p√°gina atual dos resultados da consulta. </p><br><h2 id="otpravlyaem-zapros-po-news-api-i-renderim-rezultaty">  Envie uma solicita√ß√£o usando a API de not√≠cias e renderize os resultados </h2><br><p>  Agora que temos o modelo de dados para o nosso aplicativo, vamos continuar e fazer solicita√ß√µes √† API de not√≠cias e renderizar os resultados na p√°gina. </p><br><p>  Como a API do News exige uma chave da API, precisamos encontrar uma maneira de transmiti-la em nosso aplicativo sem codifica√ß√£o embutida no c√≥digo.  Vari√°veis ‚Äã‚Äãde ambiente s√£o uma abordagem comum, mas decidi usar sinalizadores de linha de comando.  O Go fornece um pacote de <code>flag</code> que suporta a an√°lise b√°sica dos sinalizadores de linha de comando, e √© isso que vamos usar aqui. </p><br><p>  Primeiro, declare uma nova vari√°vel <code>apiKey</code> sob a vari√°vel <code>tpl</code> : </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> apiKey *<span class="hljs-keyword"><span class="hljs-keyword">string</span></span></code> </pre> <br><p>  Em seguida, use-o na fun√ß√£o <code>main</code> seguinte maneira: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { apiKey = flag.String(<span class="hljs-string"><span class="hljs-string">"apikey"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"Newsapi.org access key"</span></span>) flag.Parse() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> *apiKey == <span class="hljs-string"><span class="hljs-string">""</span></span> { log.Fatal(<span class="hljs-string"><span class="hljs-string">"apiKey must be set"</span></span>) } <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code> </pre> <br><p>  Aqui chamamos o m√©todo <code>flag.String()</code> , que nos permite definir um sinalizador de string.  O primeiro argumento para esse m√©todo √© o nome do sinalizador, o segundo √© o valor padr√£o e o terceiro √© a descri√ß√£o de uso. </p><br><p>  Depois de definir todos os sinalizadores, voc√™ precisa chamar <code>flag.Parse()</code> para <code>flag.Parse()</code> los.  Por fim, como o <code>apikey</code> √© um componente necess√°rio para este aplicativo, garantimos que o programa falhe se esse sinalizador n√£o for definido durante a execu√ß√£o do programa. </p><br><p>  Certifique-se de adicionar o pacote de <code>flag</code> √† sua importa√ß√£o, reinicie o servidor e passe o sinalizador <code>apikey</code> necess√°rio, conforme mostrado abaixo: </p><br><pre> <code class="bash hljs">go run main.go -apikey=&lt;your newsapi access key&gt;</code> </pre> <br><p>  Em seguida, vamos continuar e atualizar o <code>searchHandler</code> para que a consulta de pesquisa do usu√°rio seja enviada para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">newsapi.org</a> e os resultados sejam exibidos em nosso modelo. </p><br><p>  Substitua as duas chamadas para o m√©todo <code>fmt.Println()</code> no final da fun√ß√£o <code>searchHandler</code> seguinte c√≥digo: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// beginning of the function search := &amp;Search{} search.SearchKey = searchKey next, err := strconv.Atoi(page) if err != nil { http.Error(w, "Unexpected server error", http.StatusInternalServerError) return } search.NextPage = next pageSize := 20 endpoint := fmt.Sprintf("https://newsapi.org/v2/everything?q=%s&amp;pageSize=%d&amp;page=%d&amp;apiKey=%s&amp;sortBy=publishedAt&amp;language=en", url.QueryEscape(search.SearchKey), pageSize, search.NextPage, *apiKey) resp, err := http.Get(endpoint) if err != nil { w.WriteHeader(http.StatusInternalServerError) return } defer resp.Body.Close() if resp.StatusCode != 200 { w.WriteHeader(http.StatusInternalServerError) return } err = json.NewDecoder(resp.Body).Decode(&amp;search.Results) if err != nil { w.WriteHeader(http.StatusInternalServerError) return } search.TotalPages = int(math.Ceil(float64(search.Results.TotalResults / pageSize))) err = tpl.Execute(w, search) if err != nil { w.WriteHeader(http.StatusInternalServerError) } }</span></span></code> </pre> <br><p>  Primeiro, criamos uma nova inst√¢ncia da estrutura de <code>Search</code> e configuramos o valor do campo <code>SearchKey</code> para o valor do par√¢metro de URL <code>q</code> na solicita√ß√£o HTTP. </p><br><p>  Depois disso, convertemos a vari√°vel da <code>page</code> em um n√∫mero inteiro e atribu√≠mos o resultado ao campo <code>NextPage</code> vari√°vel de <code>search</code> .  Em seguida, criamos a vari√°vel <code>pageSize</code> e configuramos seu valor como 20. Essa vari√°vel <code>pageSize</code> representa o n√∫mero de resultados que a API de not√≠cias retornar√° em sua resposta.  Este valor pode variar de 0 a 100. </p><br><p>  Em seguida, criamos o terminal usando <code>fmt.Sprintf()</code> e fazemos uma solicita√ß√£o GET.  Se a resposta da API de not√≠cias n√£o for <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://freshman.tech/">200 OK</a> , retornaremos um erro geral do servidor ao cliente.  Caso contr√°rio, o corpo da resposta ser√° analisado em <code>search.Results</code> . </p><br><p>  Em seguida, calculamos o n√∫mero total de p√°ginas dividindo o campo <code>TotalResults</code> por <code>pageSize</code> .  Por exemplo, se uma consulta retornar 100 resultados e exibirmos apenas 20 por vez, precisaremos rolar cinco p√°ginas para ver todos os 100 resultados dessa consulta. </p><br><p>  Depois disso, renderizamos nosso modelo e passamos a vari√°vel de <code>search</code> como interface de dados.  Isso nos permite acessar dados de um objeto JSON em nosso modelo, como voc√™ ver√°. </p><br><p>  Antes de passar para <code>index.html</code> , atualize suas importa√ß√µes, como mostrado abaixo: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"encoding/json"</span></span> <span class="hljs-string"><span class="hljs-string">"flag"</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"math"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"net/url"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> <span class="hljs-string"><span class="hljs-string">"strconv"</span></span> <span class="hljs-string"><span class="hljs-string">"time"</span></span> )</code> </pre> <br><p>  Vamos continuar e exibir os resultados na p√°gina alterando o arquivo <code>index.html</code> seguinte maneira.  Adicione isso sob a <code>&lt;header&gt;</code> : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-results"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ range .Results.Articles }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"news-article"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">target</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_blank"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"noreferrer noopener"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{.URL}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span><span class="hljs-tag">&gt;</span></span>{{.Title }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Description }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"source"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Source.Name }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"published-date"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .PublishedAt }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"article-image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ .URLToImage }}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Para acessar o campo de estrutura no modelo, usamos o operador de ponto.  Este operador se refere a um objeto de estrutura (neste caso, <code>search</code> ) e, dentro do modelo, simplesmente especificamos o nome do campo (como <code>{{.Results}}</code> ). </p><br><p>  O bloco <code>range</code> permite iterar sobre uma fatia no Go e gerar algum HTML para cada elemento da fatia.  Aqui, iteramos sobre a fatia das estruturas de <code>Articles</code> contidas no campo <code>Articles</code> e exibimos o HTML a cada itera√ß√£o. </p><br><p>  Reinicie o servidor, atualize o navegador e procure not√≠cias sobre um t√≥pico popular.  Voc√™ deve obter uma lista de 20 resultados por p√°gina, conforme mostrado na captura de tela abaixo. </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/e5b/129/9ff/e5b1299ffc3a2c0ba892cdf3a2097e73.png" alt="Navegador mostrando listagens de not√≠cias"></a> </p><br><h2 id="sohranyaem-poiskovyy-zapros-v-inputehttpsfreshmantechweb-development-with-gopersist-the-search-query-in-the-input">  Salvar consulta de pesquisa no exterior </h2><br><p>  Observe que a consulta de pesquisa desaparece da entrada quando a p√°gina √© atualizada com os resultados.  Idealmente, a consulta deve ser mantida at√© que o usu√°rio realize uma nova pesquisa.  Veja como a Pesquisa do Google funciona, por exemplo. </p><br><p>  Podemos corrigir isso facilmente, atualizando o atributo <code>value</code> da tag de <code>input</code> em nosso arquivo <code>index.html</code> seguinte maneira: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ .SearchKey }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Enter a news topic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Reinicie seu navegador e fa√ßa uma nova pesquisa.  A consulta de pesquisa ser√° salva como mostrado abaixo: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/88c/c3b/44e/88cc3b44e1bdd882aa9dfde1666c32b3.png"></a> </p><br><h2 id="formatiruem-datu-publikaciihttpsfreshmantechweb-development-with-goformat-the-published-date">  Formatar data de publica√ß√£o </h2><br><p>  Se voc√™ olhar para a data de cada artigo, ver√° que ela √© pouco leg√≠vel.  A sa√≠da atual mostra como a API News retorna a data de publica√ß√£o do artigo.  Mas podemos mudar isso facilmente, adicionando um m√©todo √† estrutura do <code>Article</code> e usando-o para formatar a data em vez de usar o valor padr√£o. </p><br><p>  Vamos adicionar o seguinte c√≥digo logo abaixo da estrutura do <code>Article</code> em <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a *Article)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormatPublishedDate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { year, month, day := a.PublishedAt.Date() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%v %d, %d"</span></span>, month, day, year) }</code> </pre> <br><p>  Aqui, um novo m√©todo <code>FormatPublishedDate</code> criado na estrutura <code>Article</code> , e esse m√©todo formata o campo <code>PublishedAt</code> no <code>Article</code> e retorna uma string no seguinte formato: <code>10  2009</code> . </p><br><p>  Para usar esse novo m√©todo no seu modelo, substitua <code>.PublishedAt</code> por <code>.FormatPublishedDate</code> no seu arquivo <code>index.html</code> .  Em seguida, reinicie o servidor e repita a consulta de pesquisa anterior.  Isso produzir√° os resultados com uma hora formatada corretamente, como mostrado abaixo: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/444/c8a/92f/444c8a92fbd3ee21d89646c2d5868250.png" alt="Navegador corajoso mostrando a data formatada corretamente"></a> </p><br><h2 id="vyvodim-obschee-kolichestvo-rezultatovhttpsfreshmantechweb-development-with-goshow-the-total-number-of-results">  Exibe o n√∫mero total de resultados. </h2><br><p>  Vamos melhorar a interface do usu√°rio do nosso aplicativo de not√≠cias, indicando o n√∫mero total de resultados na parte superior da p√°gina e exibir uma mensagem caso nenhum resultado tenha sido encontrado para uma consulta espec√≠fica. </p><br><p>  Tudo o que voc√™ precisa fazer √© adicionar o seguinte c√≥digo como filho do <code>.container</code> , logo acima do elemento <code>.search-results</code> no seu arquivo <code>index.html</code> : </p><br><pre> <code class="go hljs">&lt;div class=<span class="hljs-string"><span class="hljs-string">"result-count"</span></span>&gt; {{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gt .Results.TotalResults <span class="hljs-number"><span class="hljs-number">0</span></span>)}} &lt;p&gt;About &lt;strong&gt;{{ .Results.TotalResults }}&lt;/strong&gt; results were found.&lt;/p&gt; {{ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ne .SearchKey <span class="hljs-string"><span class="hljs-string">""</span></span>) and (eq .Results.TotalResults <span class="hljs-number"><span class="hljs-number">0</span></span>) }} &lt;p&gt;No results found <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> your query: &lt;strong&gt;{{ .SearchKey }}&lt;/strong&gt;.&lt;/p&gt; {{ end }} &lt;/div&gt;</code> </pre> <br><p>  Go    ,     .    <code>gt</code> ,  ,   <code>TotalResults</code>  <code>Results</code>  .   ,         . </p><br><p>   ,  <code>SearchKey</code>     ( <code>(ne .SearchKey "")</code> )  <code>TotalResults</code>   ( <code>(eq .Results.TotalResults 0)</code> ),    ¬´No results found¬ª. </p><br><p>         ,        .      ¬´No results found¬ª. </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/305/bfc/407/305bfc40758d20abe8e01c1981930d41.png" alt="Browser showing no results found message"></a> </p><br><p>             .      ,   : </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/bbb/30a/c8c/bbb30ac8c3adc70ff1195ed3382ce928.png" alt="Browser showing results count at the top of the page"></a> </p><br><h2 id="paginaciyahttpsfreshmantechweb-development-with-gopagination">  </h2><br><p>      20  ,   ,             . </p><br><p>    <strong>Next</strong>  ,       .  ,      ,        <code>Search</code>  <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsLastPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage &gt;= s.TotalPages }</code> </pre> <br><p>   ,    <code>NextPage</code> ,   <code>TotalPages</code>   <code>Search</code> .   ,    <code>NextPage</code>  ,     .    : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//   search.TotalPages = int(math.Ceil(float64(search.Results.TotalResults / pageSize))) //   if  if ok := !search.IsLastPage(); ok { search.NextPage++ } //    }</span></span></code> </pre> <br><p> ,   ,        .       <code>.search-results</code>    <code>index.html</code> . </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (ne .IsLastPage true) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .NextPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button next-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Next<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>         ,  <strong>Next</strong>       . </p><br><p>  , <code>href</code>     <code>/search</code>        <code>q</code> ,   <code>NextPage</code>   <code>page</code> . </p><br><p>    <strong>Previous</strong> .        ,     1.   ,      <code>CurrentPage()</code>  <code>Search</code> ,   .     <code>IsLastPage</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CurrentPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> s.NextPage == <span class="hljs-number"><span class="hljs-number">1</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage - <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre> <br><p>    <code>NextPage - 1</code> ,   ,  <code>NextPage</code>  1.    ,   1   .     : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PreviousPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.CurrentPage() - <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre> <br><p>  ,         <strong>Previous</strong> ,      1.   <code>.pagination</code>    <code>index.html</code>  : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (gt .NextPage 2) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .PreviousPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button previous-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Previous<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} {{ if (ne .IsLastPage true) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .NextPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button next-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Next<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>        .      ,   : </p><br><br><br><h2 id="pokazyvaem-tekuschuyu-stranicuhttpsfreshmantechweb-development-with-goshow-the-current-page">    </h2><br><p>  ,      ,   ,            ,       . </p><br><p>          <code>index.html</code>  : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"result-count"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (gt .Results.TotalResults 0)}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>About <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Results.TotalResults }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> results were found. You are on page <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .CurrentPage }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> of <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> {{ .TotalPages }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> {{ else if (ne .SearchKey "") and (eq .Results.TotalResults 0) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>No results found for your query: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .SearchKey }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  ,        ,                 . </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/071/3cd/5a8/0713cd5a870236b1e64309fd24575847.png" alt="Browser showing current page"></a> </p><br><h2 id="deploim-na-herokuhttpsfreshmantechweb-development-with-godeploy-to-heroku">   Heroku </h2><br><p> ,    ,       Heroku. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a> ,     ,    .     .    <strong>freshman-news</strong> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a> ,      Heroku   .    <code>heroku login</code>  ,       Heroku. </p><br><p> ,    git-   .  ,   <code>git init</code>     ,     ,   heroku    git-.  <code>freshman-news</code>   . </p><br><pre> <code class="bash hljs">heroku git:remote -a freshman-news</code> </pre> <br><p>   Procfile      ( <code>touch Procfile</code> )    : </p><br><pre> <code class="bash hljs">web: bin/news-demo -apikey <span class="hljs-variable"><span class="hljs-variable">$NEWS_API_KEY</span></span></code> </pre> <br><p>     GitHub      Go,   ,    <code>go.mod</code> ,   .   ,     ,   . </p><br><pre> <code class="go hljs">module github.com/freshman-tech/news-demo <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-number"><span class="hljs-number">1.12</span></span><span class="hljs-number"><span class="hljs-number">.9</span></span></code> </pre> <br><p>       <strong>Settings</strong>    Heroku   <strong>Reveal Config Vars</strong> .      <strong>NEWS_API_KEY</strong> ,           . </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/7e6/ddc/3df/7e6ddc3df666b96b83c892346746f0c3.png" alt="Heroku config variables"></a> </p><br><p> ,         Heroku    : </p><br><pre> <code class="bash hljs">git add . git commit -m <span class="hljs-string"><span class="hljs-string">"Initial commit"</span></span> git push heroku master</code> </pre> <br><p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://__.herokuapp.com</a> ,      . </p><br><h2 id="zaklyucheniehttpsfreshmantechweb-development-with-gowrap-up">  Conclus√£o </h2><br><p>        News     Go  -.   ,      Heroku. </p><br><p>  ,       .     -    ,   ,    . </p><br><p>  Obrigado pela leitura! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475390/">https://habr.com/ru/post/pt475390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475366/index.html">Droidcon London 2019: novas tend√™ncias e os relat√≥rios mais interessantes</a></li>
<li><a href="../pt475370/index.html">Algoritmo Kahan: Como obter a diferen√ßa exata de produtos</a></li>
<li><a href="../pt475378/index.html">‚ÄúN√£o podemos deixar direitos de dados pessoais para grandes empresas‚Äù - ex-editor-chefe da Wired UK sobre o futuro da tecnologia</a></li>
<li><a href="../pt475382/index.html">Como implementamos o WebAssembly no Yandex.Maps e por que deixamos o JavaScript</a></li>
<li><a href="../pt475384/index.html">O que h√° de novo na bota de mola 2.2?</a></li>
<li><a href="../pt475392/index.html">Por que usar python -m pip</a></li>
<li><a href="../pt475396/index.html">O que √© repleto de desativar verifica√ß√µes "desnecess√°rias" no CAD de placas de circuito impresso</a></li>
<li><a href="../pt475398/index.html">Eventos digitais em Moscou, de 11 a 17 de novembro</a></li>
<li><a href="../pt475400/index.html">Eventos digitais em S√£o Petersburgo, de 11 a 17 de novembro</a></li>
<li><a href="../pt475404/index.html">Padr√£o BLoC com um exemplo simples</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>