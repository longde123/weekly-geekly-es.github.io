<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧥 🥔 ✝️ Xcode 11和XCFrameworks：一种新的框架打包格式 💿 🏄 🕴🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在拥有并开发自己的库和组件堆栈的许多公司的生命中，有时会很难维护该堆栈和组件的数量。 


 对于iOS平台（通常是Apple生态系统）的开发，有两种选择可以将库连接为依赖项： 


1. 每次您构建应用程序时，请收集它们。 
2. 使用已经收集的依赖项提前收集它们。 


 当选择第二种方法时，使...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Xcode 11和XCFrameworks：一种新的框架打包格式</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/475816/"><p><img src="https://habrastorage.org/webt/nd/9g/nt/nd9gntw7zmcbecyibkxwc8aheno.png"></p><br><p> 在拥有并开发自己的库和组件堆栈的许多公司的生命中，有时会很难维护该堆栈和组件的数量。 </p><br><p> 对于iOS平台（通常是Apple生态系统）的开发，有两种选择可以将库连接为依赖项： </p><br><ol><li> 每次您构建应用程序时，请收集它们。 </li><li> 使用已经收集的依赖项提前收集它们。 </li></ol><br><p> 当选择第二种方法时，使用CI / CD系统将库组装成现成的工件变得合乎逻辑。 </p><br><p> 但是，在构建库以及使用该库的最终产品时，需要为Apple生态系统中的多个平台或处理器体系结构构建库通常并不总是需要琐碎的操作。 </p><br><p> 在这种背景下，很难不注意到，研究Apple在WWDC 2019上提出的一项创新非常有趣，这是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Swift</a>中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Binary Frameworks</a>演示的一部分- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">框架</a>的包装格式是XCFramework。 </p><br><p> 与已建立的方法相比，XCFramework具有多个优点： </p><br><ol><li> 开箱即用的捆绑包中所有目标平台和体系结构的依赖性打包。 </li><li>  XCFramework格式的连接捆绑包，作为所有目标平台和体系结构的单个依赖项。 </li><li> 无需构建胖/通用框架。 </li><li> 在将最终应用程序加载到AppStore之前，无需摆脱x86_64 slice。 </li></ol><br><p> 在本文中，我们将解释为什么引入这种新格式，它是什么，以及它给开发人员带来的好处。 </p><a name="habracut"></a><br><h1 id="kak-poyavilsya-novyy-format"> 新格式如何出现 </h1><br><p> 苹果先前发布了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Swift Package Manager</a>依赖<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">管理器</a> 。 <br> 最重要的是，Swift PM允许您以开放源代码的形式提供库，并带有相关性的描述。 </p><br><p> 从提供库的开发人员的角度来看，我想强调一下Swift PM的两个方面。 </p><br><ul><li> 明显的缺点是，出于某种原因，并非所有的图书馆供应商都希望向消费者开放其源代码。 </li><li> 一个明显的优点-从源代码编译依赖项时，我们无需观察库的二进制兼容性。 </li></ul><br><p>  XCFramework Apple提供了一种新的打包库二进制格式，认为它可以替代Swift包。 </p><br><p> 从Xcode 11及其beta版本开始，可以使用这种格式以及连接XCFramework中组装的库的功能。 </p><br><h1 id="chto-izsebya-predstavlyaet-xcframework"> 什么是XCFramework </h1><br><p>  XCFramework的核心是一种打包和交付各种版本库的新方法。 </p><br><p> 除其他外，新格式还允许将静态库及其头文件（包括用C / Objective-C编写的头文件）打包在一起。 </p><br><p> 更详细地考虑格式。 </p><br><ol><li><p>  <strong>开箱即用的捆绑包中所有目标平台和体系结构的依赖关系打包</strong> </p><br><p>现在，可以将每个目标平台和体系结构的所有库程序集打包为扩展名为.xcframework的单个软件包。 <br> 但是，为此，此时，您必须使用脚本通过Xcode 11的新<code>-create-xcframework</code>开关来调用<code>xcodebuild</code> 。 </p><br><p> 组装和包装过程将进一步考虑。 </p><br></li><li><p>  <strong>XCFramework格式的连接包，作为所有目标平台和体系结构的单个依赖项</strong> </p><br><p> 由于包.xcframework包含所有必需的依赖项汇编选项，因此我们不必担心其体系结构和目标平台。 </p><br><p> 在Xcode 11中，就像常规.framework一样，连接了.xcframework打包的库。 <br> 更具体地说，这可以在目标设置中通过以下方式实现： </p><br><ul><li> 将.xcframework添加到“常规”选项卡的“框架和库”部分 </li><li> 在“构建阶段”选项卡上将.xcframework添加到“将二进制文件与库链接” </li></ul><br></li><li><p>  <strong>无需构建胖/通用框架</strong> </p><br><p> 以前，为了在插件库中支持几个库和几个体系结构，必须准备所谓的胖框架或通用框架。 <br> 这是使用<code>lipo</code>将组装好的框架的所有选项缝到一个厚的二进制文件中完成的。 </p><br><p> 对此的更多详细信息，例如，在以下文章中： </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">如何构建自己的iOS框架</a> （habr.ru） </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在Xcode 10.2和iOS 12</a> （medium.com）中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">编写自定义通用框架</a> </li></ul><br></li><li><p>  <strong>在AppStore中加载最终应用程序之前，无需摆脱x86_64 slice</strong> </p><br><p> 通常，这种切片用于在iOS模拟器中提供库。 <br> 当您尝试在AppStore中下载依赖项包含x86_64 slice的应用程序时，可能会遇到众所周知的错误<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ITMS-90087</a> 。 </p><br></li></ol><br><h1 id="sozdanie-iupakovka-xcframework-teoriya"> 创建和打包XCFramework：理论 </h1><br><p> 在前面提到的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">演示文稿</a>中，需要执行几个步骤才能以XCFramework格式组装和打包库： </p><br><ol><li><p>  <strong>项目准备</strong> </p><br><p> 首先，在负责构建目标平台库的所有项目目标区域中，您需要启用Xcode 11的新的Build Libraries for Distribution设置。 </p><br><p><img src="https://habrastorage.org/webt/wl/vs/ak/wlvsakcfadbfihsrebpvtey6uec.png"></p><br></li><li><p>  <strong>目标平台和体系结构的项目组装</strong> </p><br><p> 接下来，我们必须收集目标平台和体系结构的所有目标。 <br> 让我们考虑使用特定项目配置示例调用命令的示例。 </p><br><p> 假设在项目中，我们有两个方案“ XCFrameworkExample-iOS”和“ XCFramework-macOS”。 </p><br><p><img src="https://habrastorage.org/webt/on/ug/s8/onugs8ismapkgs0hngnvdixne9m.png"></p><br><p> 此外，在该项目中，有两个目标可收集iOS和macOS的库。 </p><br><p><img src="https://habrastorage.org/webt/m8/li/dj/m8lidjpvlt6svz9nc052imlcnik.png"></p><br><p> 要构建所有必需的库配置，我们需要使用相应的方案来收集两个目标。 <br> 但是，对于iOS，我们需要两个程序集：一个用于终端设备（ARM），另一个用于模拟器（x86_64）。 </p><br><p> 总共，我们需要收集3个框架。 </p><br><p> 为此，可以使用<code>xcodebuild</code>命令： </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO</span></span></code> </pre> <br><p> 结果，我们得到了3个组装好的框架，我们将它们进一步包装在.xcframework容器中。 </p><br></li><li><p>  <strong>将组装的.framework包装在.xcframework中</strong> </p><br><p> 您可以使用以下命令执行此操作： </p><br><pre> <code class="bash hljs">xcodebuild -create-xcframework \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -output <span class="hljs-string"><span class="hljs-string">"./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><p> 可能会有很多<code>-framework</code>参数<code>-framework</code> ，这些<code>-framework</code>指向您要附加到.xcframework容器的所有.framework程序集。 </p><br></li></ol><br><h1 id="podgotovka-proekta-biblioteki-dlya-buduschey-sborki-iupakovki-xcframework"> 为将来的XCFramework组装和包装准备图书馆项目 </h1><br><p>  <strong>TL; DR：可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">从Github上的存储库</a>下载完成的项目。</strong> </p><br><p> 例如，我们正在实现一个可用于两个平台的库：iOS和macOS。 <br> 我们将使用本文上一节中提到的项目配置：两个方案和两个对应的iOS和macOS平台框架目标。 </p><br><p> 库本身会为我们提供<code>String?</code>的简单扩展<code>String?</code>  （ <code>Optional where Wrapped == String</code> ），具有单个属性。 </p><br><p> 我们将此属性<code>isNilOrEmpty</code> ，顾名思义，在<code>String?</code>内时它会告诉我们<code>String?</code> 缺少值或内部存储的字符串为空。 </p><br><p> 该代码可以实现如下： </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Optional</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapped</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isNilOrEmpty: <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> .some(string) = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> string.isEmpty } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><p> 我们直接进行项目的创建和配置。 </p><br><ol><li><p>  <strong>首先，我们需要为您选择的两个目标平台之一创建一个“框架”类型的项目：iOS或macOS。</strong> </p><br><p> 您可以通过菜单项“ File” =&gt;“ New” =&gt;“ Project”，或使用键盘快捷键<strong>⇧++ N</strong> （默认）在Xcode中执行此操作。 </p><br><p> 接下来，在对话框顶部，选择所需的平台（iOS或macOS），选择Framework项目的类型，然后转到“下一步”按钮。 </p><br><p> 在下一个屏幕上，我们需要在“产品名称”字段中设置项目名称。 </p><br><p> 或者，您可以使用项目的“基本”名称，在前面提到的配置中，它是“ XCFrameworkExample”。 </p><br><p> 将来，在配置项目时，我们将在目标名称中使用的基本名称中添加表示平台的后缀。 </p><br></li><li><p>  <strong>之后，您需要在项目中为列出的另一个平台创建另一个“框架”类型的目标（最初创建该项目的平台除外）。</strong> </p><br><p> 为此，请使用菜单项“文件” =&gt;“新建” =&gt;“目标”。 </p><br><p> 接下来，我们在对话框中选择两个平台的另一个（相对于第1段中选择的那个），然后再次选择项目类型“框架”。 </p><br><p> 对于“产品名称”字段，我们可以立即在平台后缀中使用该名称，在本段中为其添加目标。 因此，如果平台是macOS，则名称可以是“ XCFrameworkExample-macOS”（％base_name％-％platform％）。 </p><br></li><li><p>  <strong>我们将设置目标和图表，以使其易于区分。</strong> </p><br><p> 首先，重命名我们的方案及其附属的目标，以使它们的名称反映平台，例如： </p><br><ul><li>  “ XCFrameworkExample-iOS” </li><li>  “ XCFrameworkExample-macOS” </li></ul><br></li><li><p>  <strong>接下来，将带有扩展名<code>String?</code>的文件添加到项目.swift中<code>String?</code></strong> </p><br><p> 将一个新的.swift文件添加到项目中，名称为“ Optional.swift”。 <br> 在文件本身中，我们将前面提到的扩展名放在<code>Optional</code> 。 </p><br><p> 重要的是不要忘记将代码文件添加到两个目标中。 </p><br><p><img src="https://habrastorage.org/webt/qp/eh/qs/qpehqsezf7pb-pg4pc8wao7l4cs.png"></p><br></li></ol><br><p> 现在我们有了一个项目，可以使用上一阶段中的命令将它们放在XCFramework中。 </p><br><h1 id="process-sborki-iupakovki-biblioteki-vformat-xcframework"> 以.xcframework格式组装和打包库的过程 </h1><br><p> 在此阶段，您可以在单独的文件中使用bash脚本来构建库并将其打包为.xcframework格式。 另外，这将允许将来使用这些开发将解决方案集成到CI / CD系统中。 </p><br><p> 该脚本看起来很简单，实际上，它汇集了前面提到的汇编命令： </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # ---------------------------------- # BUILD PLATFORM SPECIFIC FRAMEWORKS # ---------------------------------- # iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO # ------------------- # PACKAGE XCFRAMEWORK # ------------------- xcodebuild -create-xcframework \ -framework "./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -output "./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><h1 id="soderzhimoe-xcframework">  .xcframework内容 </h1><br><p> 作为本文前面段落中的汇编脚本的结果，我们得到了梦co以求的捆绑包.xcframework，可以将其添加到项目中。 </p><br><p> 如果我们查看此包（与.framework一样，实际上是一个简单的文件夹）的内部，我们将看到以下结构： </p><br><p><img src="https://habrastorage.org/webt/pg/sr/g6/pgsrg6uc4prxhairmnoy57p9wus.png"></p><br><p> 在这里，我们看到.xcframework内部是.framework格式的程序集，并按平台和体系结构进行了细分。 另外，为了描述包.xcframework的内容，内部还有一个Info.plist文件。 </p><br><div class="spoiler">  <b class="spoiler_title">Info.plist文件具有以下内容</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>AvailableLibraries<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-x86_64-simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatformVariant<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos-x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundlePackageType<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XFWK<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkFormatVersion<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p> 您可能会注意到，与“ .framework”格式相反，“ CFBundlePackageType”键使用的是新值“ XFWK”，而不是“ FMWK”。 </p><br><h1 id="itogi"> 总结 </h1><br><p> 因此，XCFramework中的库打包格式只不过是.framework格式编译库的常规容器。 </p><br><p> 但是，这种格式允许您分别存储和独立使用其中提供的每个体系结构和平台。 这消除了构建胖/通用框架的广泛方法中固有的许多问题。 </p><br><p> 尽管如此，目前在实际项目中使用XCFramework的问题还是有一个重要的细微差别-依赖关系管理，Apple尚未以XCFramework格式实现。 </p><br><p> 为此，习惯使用Swift PM，Carthage，CocoaPods和其他依赖项管理系统及其组件。 因此，不足为奇的是，在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CocoaPods</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Carthage</a>项目中已经确切地开始了对新格式的支持。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN475816/">https://habr.com/ru/post/zh-CN475816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN475804/index.html">使用Google Cloud Functions按计划将计划的呼叫报告从CoMagic导入到BigQuery</a></li>
<li><a href="../zh-CN475808/index.html">GitHub已创建了一个具有数千年历史的存储库，它将在其中保存开源存储库以供后代使用</a></li>
<li><a href="../zh-CN475810/index.html">乌拉尔将如何出口82,000吨苏联核库存</a></li>
<li><a href="../zh-CN475812/index.html">如何在开放空间中保持疯狂：从头开始建立新办公室</a></li>
<li><a href="../zh-CN475814/index.html">Docker转型：在Mirantis中销售Docker Enterprise和更新路径</a></li>
<li><a href="../zh-CN475826/index.html">为什么不能信任亚马逊（及其他）评级</a></li>
<li><a href="../zh-CN475830/index.html">自己动手的便携式复古控制台</a></li>
<li><a href="../zh-CN475832/index.html">CSS媒体表达式比max-width还要多</a></li>
<li><a href="../zh-CN475834/index.html">Scrum不会帮助您。 我们了解为什么</a></li>
<li><a href="../zh-CN475836/index.html">采访亚瑟·卡丘扬（Arthur Khachuyan）：如何计算社交网络上的亿万富翁？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>