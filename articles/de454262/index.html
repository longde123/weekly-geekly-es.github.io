<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚫️ 🙋 🔚 Warum jeder Datenwissenschaftler Dask kennen sollte 👮 👨🏿‍🏭 🚺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Kollegen! 

 Vielleicht hätte der Titel der heutigen Veröffentlichung mit einem Fragezeichen besser ausgesehen - es ist schwer zu sagen. Auf jed...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Warum jeder Datenwissenschaftler Dask kennen sollte</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/454262/"> Hallo Kollegen! <br><br>  Vielleicht hätte der Titel der heutigen Veröffentlichung mit einem Fragezeichen besser ausgesehen - es ist schwer zu sagen.  Auf jeden Fall möchten wir Ihnen heute eine kurze Tour anbieten, die Sie in die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dask-</a> Bibliothek einführt, mit der Aufgaben in Python parallelisiert werden sollen.  Wir hoffen, dass wir in Zukunft noch ausführlicher auf dieses Thema zurückkommen können. <br><br><img src="https://habrastorage.org/webt/v1/sy/al/v1syalwkg-cp2dnxebftth8yhnu.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i>Foto aufgenommen bei</i></a> <br><a name="habracut"></a><br>  Dask ist ohne Übertreibung das revolutionärste Datenverarbeitungswerkzeug, auf das ich gestoßen bin.  Wenn Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pandas und Numpy mögen</a> , aber manchmal nicht mit Daten umgehen können, die nicht in den Arbeitsspeicher passen, ist Dask genau das, was Sie brauchen.  Dask unterstützt den Pandas-Datenrahmen und Numpy-Datenstrukturen (Arrays).  Dask kann entweder auf dem lokalen Computer oder skaliert ausgeführt und dann im Cluster ausgeführt werden.  Im Wesentlichen schreiben Sie den Code nur einmal und wählen dann aus, ob Sie ihn auf dem lokalen Computer verwenden oder in einem Cluster mit vielen Knoten mithilfe der gängigsten Python-Syntax bereitstellen möchten.  Die Funktion selbst ist großartig, aber ich habe beschlossen, diesen Artikel zu schreiben, um zu betonen: Jeder Data Scientist (zumindest mit Python) sollte Dask verwenden.  Aus meiner Sicht besteht die Magie von Dask darin, dass Sie durch Minimieren des Codes ihn mithilfe der Rechenleistung parallelisieren können, die beispielsweise auf meinem Laptop bereits verfügbar ist.  Bei paralleler Datenverarbeitung läuft das Programm schneller, Sie müssen weniger warten und dementsprechend bleibt mehr Zeit für die Analyse.  In diesem Artikel werden wir insbesondere über das Objekt <code>dask.delayed</code> sprechen und darüber, wie es in den Data Science-Aufgabenstrom passt. <br><br><h3>  Dask vorstellen </h3><br>  Als Einführung in Dask finden Sie hier einige Beispiele, um Ihnen einen Eindruck von der völlig unauffälligen und natürlichen Syntax zu vermitteln.  Die wichtigste Schlussfolgerung, die ich in diesem Fall vorschlagen möchte, ist, dass das Wissen, über das Sie bereits verfügen, ausreicht, um zu arbeiten.  Sie müssen kein neues Big-Data-Tool wie Hadoop oder Spark erlernen. <br><br>  Dask bietet 3 parallele Sammlungen an, in denen Sie Daten speichern können, die die Größe des RAM überschreiten, nämlich Dataframes, Bags und Arrays.  In jeder dieser Arten von Sammlungen können Sie Daten speichern, indem Sie sie zwischen RAM und Festplatte segmentieren sowie Daten auf mehrere Knoten in einem Cluster verteilen. <br><br>  Ein Dask DataFrame besteht aus geschredderten Datenframes, z. B. in Pandas, sodass Sie eine Teilmenge der Funktionen der Pandas-Abfragesyntax verwenden können.  Unten finden Sie einen Beispielcode, der alle CSV-Dateien für 2018 herunterlädt, ein Feld mit einem Zeitstempel analysiert und eine Pandas-Anforderung startet: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dask.dataframe <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> dd df = dd.read_csv(<span class="hljs-string"><span class="hljs-string">'logs/2018-*.*.csv'</span></span>, parse_dates=[<span class="hljs-string"><span class="hljs-string">'timestamp'</span></span>]) df.groupby(df.timestamp.dt.hour).value.mean().compute()</code> </pre> <br>  <i>Dask Dataframe-Beispiel</i> <br><br>  In Dask Bag können Sie Sammlungen von Python-Objekten speichern und verarbeiten, die nicht in den Speicher passen.  Dask Bag eignet sich hervorragend für die Verarbeitung von Protokollen und Sammlungen von Dokumenten im JSON-Format.  In diesem Codebeispiel werden alle JSON-Dateien für 2018 in die Dask Bag-Datenstruktur geladen, jeder JSON-Datensatz wird analysiert und Benutzerdaten werden mithilfe der Lambda-Funktion gefiltert: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dask.bag <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> db <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json records = db.read_text(<span class="hljs-string"><span class="hljs-string">'data/2018-*-*.json'</span></span>).map(json.loads) records.filter(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> d: d[<span class="hljs-string"><span class="hljs-string">'username'</span></span>] == <span class="hljs-string"><span class="hljs-string">'Aneesha'</span></span>).pluck(<span class="hljs-string"><span class="hljs-string">'id'</span></span>).frequencies()</code> </pre> <br>  <i>Dask Bag Beispiel</i> <br><br>  Die Datenstruktur von Dask Arrays unterstützt Slices im Numpy-Stil.  Im folgenden Beispiel wird ein Satz von HDF5-Daten in Dimensionsblöcke (5000, 5000) aufgeteilt: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> h5py f = h5py.File(<span class="hljs-string"><span class="hljs-string">'myhdf5file.hdf5'</span></span>) dset = f[<span class="hljs-string"><span class="hljs-string">'/data/path'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dask.array <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> da x = da.from_array(dset, chunks=(<span class="hljs-number"><span class="hljs-number">5000</span></span>, <span class="hljs-number"><span class="hljs-number">5000</span></span>))</code> </pre> <br>  <i>Dask Array Beispiel</i> <br><br><h3>  Parallelverarbeitung in Dask </h3><br>  Ein weiterer ebenso genauer Titel für diesen Abschnitt wäre "Tod eines sequentiellen Zyklus".  Hin und wieder stoße ich auf ein gemeinsames Muster: Durchlaufen Sie die Liste der Elemente und führen Sie dann die Python-Methode mit jedem Element aus, jedoch mit unterschiedlichen Eingabeargumenten.  Zu den gängigen Datenverarbeitungsszenarien gehört das Berechnen von Feature-Aggregaten für jeden Client oder das Aggregieren von Ereignissen aus dem Protokoll für jeden Schüler.  Anstatt auf jedes Argument in einer sequentiellen Schleife eine Funktion anzuwenden, können Sie mit dem Objekt Dask Delayed viele Elemente parallel verarbeiten.  Bei der Arbeit mit Dask Delayed werden alle Funktionsaufrufe in die Warteschlange gestellt und in das Ausführungsdiagramm eingefügt. Danach sollen sie verarbeitet werden. <br><br>  Ich war immer etwas faul, meine eigene Threading-Engine zu schreiben oder Asyncio zu verwenden, daher werde ich Ihnen nicht einmal ähnliche Beispiele zum Vergleich zeigen.  Mit Dask können Sie weder die Syntax noch den Programmierstil ändern!  Sie müssen nur die Methode kommentieren oder <code>@dask.delayed</code> , die parallel zu <code>@dask.delayed</code> und die Berechnungsmethode aufrufen, nachdem der Schleifencode ausgeführt wurde. <br><br><img src="https://habrastorage.org/webt/e_/_t/k9/e__tk9l_qrxshram0hqh-golmie.png"><br><br><h3>  Dask Computing Graph Beispiel </h3><br>  Im folgenden Beispiel sind die beiden Methoden mit <code>@dask.delayed</code> .  Drei Zahlen werden in einer Liste gespeichert, sie müssen quadriert und dann summiert werden.  Dask erstellt einen Berechnungsgraphen, der die parallele Ausführung der Quadrierungsmethode <code>sum_list</code> . <code>sum_list</code> das Ergebnis dieser Operation an die <code>sum_list</code> Methode übergeben.  Das Berechnungsdiagramm kann durch <code>calling .visualize()</code> angezeigt werden.  <code>Calling .compute()</code> wird das Berechnungsdiagramm ausgeführt.  Wie aus der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schlussfolgerung hervorgeht</a> , werden die Listenelemente nicht in der richtigen Reihenfolge, sondern parallel verarbeitet. <br><br>  Die Anzahl der Threads kann festgelegt werden (z. B. <code>dask.set_options( pool=ThreadPool(10)</code> ), und sie können auch einfach ausgetauscht werden, um Prozesse auf Ihrem Laptop oder PC zu verwenden (z. B. <code>dask.config.set( scheduler='processes'</code> ). . <br><br>  Daher habe ich gezeigt, wie trivial es sein wird, einem Projekt aus dem Bereich Data Science mithilfe von Dask eine parallele Verarbeitung von Aufgaben hinzuzufügen.  Kurz bevor ich diesen Artikel schrieb, habe ich Dask verwendet, um die Daten über Benutzer-Klick-Streams (Besuchsverlauf) in 40-minütige Sitzungen aufzuteilen und dann die Attribute für jeden Benutzer für weitere Cluster zu aggregieren.  Sagen Sie uns, wie Sie Dask verwendet haben! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454262/">https://habr.com/ru/post/de454262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454248/index.html">Leibeigene im Zeitalter der künstlichen Intelligenz</a></li>
<li><a href="../de454252/index.html">Selbst die Webressourcen bekannter Organisationen sind nicht vor Fehlern von Kindern geschützt.</a></li>
<li><a href="../de454254/index.html">Wir schreiben Reverse socks5 Proxy auf Powershell. Teil 3</a></li>
<li><a href="../de454256/index.html">Was ist los mit unserer IT</a></li>
<li><a href="../de454260/index.html">Bad Code Kindertag</a></li>
<li><a href="../de454264/index.html">4 sinnvolle Youtube-Kanäle zu technischen Interviews</a></li>
<li><a href="../de454266/index.html">Dell und Alienware auf der Computex 2019: Sprechen Sie über wichtige Innovationen</a></li>
<li><a href="../de454272/index.html">Die ganze Wahrheit über RTOS. Artikel 27. Systemzeit</a></li>
<li><a href="../de454274/index.html">Licht, Kamera ... Wolke: Wie Wolken die Filmindustrie verändern</a></li>
<li><a href="../de454278/index.html">Cyberversicherung auf dem russischen Markt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>