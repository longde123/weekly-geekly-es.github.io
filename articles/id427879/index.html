<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤šğŸ¼ ğŸ•ºğŸ½ ğŸ» Bagaimana saya beralih dari Python ke Julia (dan mengapa) ğŸ§¤ ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ¿ ğŸ‘¨â€ğŸ”¬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sedikit latar belakang tentang Python 
 Python adalah bahasa yang bagus. Saya mencoba beberapa bahasa sebelumnya: Pascal di sekolah; C, C dengan kelas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana saya beralih dari Python ke Julia (dan mengapa)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427879/"><h3>  Sedikit latar belakang tentang Python </h3><br>  Python adalah bahasa yang bagus.  Saya mencoba beberapa bahasa sebelumnya: Pascal di sekolah;  C, C dengan kelas, C ++ di universitas.  Dua (tiga) yang terakhir menanamkan keengganan yang kuat untuk pemrograman: alih-alih menyelesaikan masalah, Anda mengacaukan alokasi dan penghancur (kata-kata menakutkan dari masa lalu), Anda berpikir dalam hal primitif tingkat rendah.  Pendapat saya adalah bahwa C tidak cocok untuk menyelesaikan masalah pendidikan dan ilmiah (dalam hal apa pun, di bidang matematika).  Saya yakin mereka akan menolak saya, tetapi saya tidak mencoba memaksakan apa pun pada siapa pun, saya hanya mengekspresikan pendapat saya. <br><br>  Python dulunya adalah wahyu.  Untuk pertama kalinya dalam hidup saya, saya menulis beberapa tingkat abstraksi lebih tinggi daripada apa yang biasanya dilakukan dalam bahasa C.  Jarak antara tugas dan kode telah dikurangi tidak seperti sebelumnya. <br><br>  Saya mungkin akan melakukan ini sepanjang hidup saya di Python jika saya tidak harus tiba-tiba mengimplementasikan tes statistik NIST.  Tampaknya tugasnya sangat sederhana: ada array dengan beberapa (&gt; = 10) megabita panjangnya, ada serangkaian tes yang perlu diterapkan ke array ini. <br><a name="habracut"></a><br><h3>  Untuk apa numpy bagus? </h3><br>  Dalam python, ada paket numpy yang bagus untuk bekerja dengan array, yang pada dasarnya adalah antarmuka tingkat tinggi untuk perpustakaan cepat seperti LAPACK.  Tampaknya set seluruh pria untuk komputasi ilmiah tersedia (Sympy, Numpy, Scipy, Matplotlib), apa lagi yang Anda inginkan? <br><br>  Setiap orang yang berurusan dengan numpy tahu bahwa dia baik, tetapi tidak dalam segala hal.  Kita masih perlu mencoba memastikan bahwa operasi di vektorisasi (seperti pada R), yaitu  dalam arti, seragam untuk seluruh array.  Jika tiba-tiba masalah Anda karena alasan tertentu tidak sesuai dengan paradigma ini, maka Anda memiliki masalah. <br><br>  Apa tugas non-vektor yang saya bicarakan?  Ya, setidaknya ambil NIST yang sama: hitung panjang register geser linier menggunakan algoritma Berlekamp-Messi;  menghitung panjang unit terpanjang berturut-turut dan seterusnya.  Saya tidak mengesampingkan kemungkinan bahwa ada beberapa jenis solusi cerdik yang akan mengurangi masalah menjadi solusi vektor. <br><br><div class="spoiler">  <b class="spoiler_title">Licik?</b> <div class="spoiler_text">  Sebagai contoh dari NIST yang sama: perlu untuk menghitung jumlah urutan "switching", di mana dengan "beralih" maksud saya mengubah unit berturut-turut (... 1111 ...) menjadi nol berturut-turut (... 000 ... ), dan sebaliknya.  Untuk melakukan ini, Anda dapat mengambil urutan asli tanpa elemen terakhir (x [: -1]) dan mengurangi darinya urutan digeser oleh 1 (x [2:]), dan kemudian menghitung jumlah elemen bukan nol di urutan baru yang dihasilkan.  Semuanya akan terlihat seperti: <br><br><pre><code class="python hljs">np.count_nonzero(x[:<span class="hljs-number"><span class="hljs-number">-1</span></span>] - x[<span class="hljs-number"><span class="hljs-number">1</span></span>:])</code> </pre> <br>  Ini mungkin terlihat seperti latihan menghibur untuk pikiran, tetapi pada dasarnya sesuatu yang tidak wajar terjadi di sini, sebuah trik yang tidak akan terlihat jelas bagi pembaca setelah beberapa saat.  Belum lagi bahwa ini masih lambat - tidak ada yang membatalkan alokasi memori. <br></div></div><br>  Operasi non-vektor di Python adalah waktu yang lama.  Bagaimana menghadapi mereka jika numpy tidak cukup?  Biasanya mereka menawarkan beberapa solusi: <br><br><ol><li>  <b>Numba JIT.</b>  Jika dia bekerja seperti yang dijelaskan pada halaman judul Numba, maka saya pikir itu akan bermanfaat untuk menyelesaikan cerita.  Saya telah sedikit melupakan masa lalu bahwa apa yang salah dengannya;  Intinya adalah bahwa akselerasi itu tidak mengesankan seperti yang saya harapkan, sayangnya. </li><li>  <b>Cython.</b>  Oke, angkat tangan, mereka yang percaya bahwa cython adalah solusi yang sangat indah dan elegan yang tidak menghancurkan makna dan semangat Python?  Saya kira tidak;  jika Anda menggunakan Cython, Anda sudah bisa berhenti membodohi diri sendiri dan beralih ke sesuatu yang kurang canggih seperti C ++ dan C. </li><li>  Tulis ulang kemacetan dalam C dan tarik dari Python kesayangan Anda.  OK, tapi bagaimana jika saya memiliki seluruh program - ini semua tentang perhitungan dan kemacetan?  Xi tidak menawarkan!  Saya tidak berbicara tentang fakta bahwa dalam solusi ini Anda perlu tahu bukan hanya satu, tetapi dua bahasa - Python dan C. </li></ol><br><h3>  Inilah JULIA! </h3><br>  Setelah merenungkan solusi yang ada dan tidak menemukan (tidak dapat memprogram) sesuatu yang baik, saya memutuskan untuk menulis ulang dengan sesuatu yang "lebih cepat".  Bahkan, jika Anda menulis "perontok angka" di abad ke-21 dengan dukungan normal untuk array, operasi vektor "di luar kotak", dll.  dll, maka pilihan Anda tidak terlalu padat: <br><br><ol><li>  <b>Fortran</b> .  Dan jangan tertawa, siapa di antara kita yang tidak menarik BLAS / LAPACK dari bahasa favorit kita?  Fortran adalah bahasa yang sangat baik (SI!) Untuk komputasi SCIENTIFIC.  Saya tidak mengambilnya dengan alasan bahwa sejak zaman Fortran banyak hal telah ditemukan dan ditambahkan ke bahasa pemrograman;  Saya berharap untuk sesuatu yang lebih modern. </li><li>  <b>R</b> menderita masalah yang sama dengan Python (vektorisasi). </li><li>  <b>Matlab</b> - mungkin ya, sayangnya saya tidak punya uang untuk memeriksa. </li><li>  <b>Julia</b> - kuda itu gelap, akan lepas landas, tidak akan lepas landas (dan itu wajar sampai versi stabil 1.0) </li></ol><br><h3>  Beberapa keuntungan yang jelas dari Julia </h3><br><ol><li>  Itu terlihat seperti Python, setidaknya yang sama "tingkat tinggi", dengan kemampuan, jika perlu, turun ke bit dalam angka. </li><li>  Tidak repot dengan alokasi memori dan sejenisnya. </li><li>  Jenis sistem yang kuat.  Jenis ditentukan secara opsional dan sangat tertutup.  Suatu program dapat ditulis tanpa menentukan satu jenis - dan jika Anda melakukannya, mereka akan dapat melakukannya dengan cepat.  Namun ada nuansa. </li><li>  Sangat mudah untuk menulis jenis khusus yang akan secepat jenis bawaan. </li><li>  Pengiriman ganda.  Anda dapat membicarakan hal ini selama berjam-jam, tetapi menurut saya - ini adalah yang terbaik yang dimiliki Julia, ini adalah dasar dari desain semua program dan, secara umum, dasar dari filosofi bahasa. <br>  Berkat pengiriman ganda, banyak hal ditulis dengan sangat seragam. <br><br><div class="spoiler">  <b class="spoiler_title">Beberapa contoh pengiriman</b> <div class="spoiler_text"><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>() #       <span class="hljs-number"><span class="hljs-number">0</span></span>  <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) #   <span class="hljs-number"><span class="hljs-number">10</span></span>     <span class="hljs-number"><span class="hljs-number">0</span></span>  <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>) #   <span class="hljs-number"><span class="hljs-number">3</span></span>  <span class="hljs-number"><span class="hljs-number">5</span></span>   .... using Distributions d = Normal() #     <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(d) #     <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(d, <span class="hljs-number"><span class="hljs-number">10</span></span>) #   <span class="hljs-number"><span class="hljs-number">10</span></span> ...   </code> </pre><br>  Yaitu, argumen pertama dapat berupa distribusi (satu dimensi) dari Distribusi, tetapi pemanggilan fungsi akan tetap sama.  Dan tidak hanya distribusi (dimungkinkan untuk mengirimkan RNG itu sendiri sebagai objek MersenneTwister dan banyak lagi).  Contoh lain (menurut saya, ilustratif) adalah navigasi di DataFrames tanpa loc / iloc. <br></div></div></li><li>  6. Array adalah asli, bawaan.  Vektorisasi di luar kotak. <br></li></ol><br><h3>  Kontra untuk tetap diam tentang yang akan menjadi kejahatan! </h3><br><ol><li>  Bahasa baru  Di satu sisi, tentu saja, minus.  Dalam sesuatu, mungkin tidak dewasa.  Di sisi lain, ia memperhitungkan rake banyak bahasa masa lalu, berdiri "di bahu raksasa", telah menyerap banyak hal menarik dan baru. </li><li>  Program cepat tidak mungkin untuk menulis.  Ada beberapa hal yang tidak jelas yang sangat mudah diatasi: Anda melangkah menyapu, meminta bantuan komunitas, melangkah lagi ... dll.  Ini terutama tipe ketidakstabilan, ketidakstabilan tipe, dan variabel global.  Secara umum, sejauh yang saya tahu sendiri, seorang programmer yang ingin cepat menulis dalam Julia melewati beberapa tahap: a) menulis dengan Python.  Ini bagus, dan memang begitu, tetapi kadang-kadang akan ada masalah kinerja.  b) menulis seperti di C: jenis resep maniak sedapat mungkin.  c) secara bertahap memahami di mana perlu (sangat diukur) untuk menentukan jenis, dan di mana mereka mengganggu. </li><li>  Ekosistem  Beberapa paket mentah, dalam arti bahwa suatu tempat terus-menerus ada sesuatu yang jatuh;  beberapa sudah matang, tetapi tidak konsisten satu sama lain (konversi ke jenis lain diperlukan, misalnya).  Di satu sisi, ini jelas buruk;  di sisi lain, Julia memiliki banyak ide yang menarik dan berani, hanya karena "kita berdiri di atas pundak para raksasa" - kita telah memperoleh pengalaman luar biasa menginjak garu dan "bagaimana tidak melakukannya", dan ini diperhitungkan (sebagian) oleh pengembang paket. </li><li>  Array penomoran dari 1. Ha, bercanda, ini tentu saja plus!  Tidak, yah, serius, ada apa, dengan indeks apa penomoran dimulai?  Anda akan terbiasa dalam 5 menit.  Tidak ada yang mengeluh bahwa bilangan bulat disebut bilangan bulat, bukan keseluruhan.  Ini semua masalah selera.  Dan ya, ambil setidaknya Cormen yang sama sesuai dengan algoritma - semuanya diberi nomor dari satu di sana, dan kadang-kadang tidak nyaman untuk mengulanginya dengan Python sebaliknya. </li></ol><br><h3>  Nah, mengapa kecepatan? </h3><br>  Sudah waktunya untuk mengingat mengapa semuanya dimulai. <br><br>  Catatan: Saya aman melupakan Python, jadi tuliskan perbaikan Anda di komentar, saya akan mencoba menjalankannya di laptop saya dan melihat runtime. <br><br>  Jadi, dua contoh kecil dengan microbenchmark. <br><br><div class="spoiler">  <b class="spoiler_title">Sesuatu vektor</b> <div class="spoiler_text">  Masalah: vektor X 0 dan 1 disuplai ke input fungsi. Anda perlu mengonversinya menjadi vektor 1 dan (-1) (1 -&gt; 1, 0 -&gt; -1) dan menghitung berapa banyak koefisien dari transformasi Fourier dari vektor ini. nilai absolut melebihi batas batas. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_fft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, boundary)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> np.count_nonzero(np.abs(np.fft.fft(<span class="hljs-number"><span class="hljs-number">2</span></span>*x<span class="hljs-number"><span class="hljs-number">-1</span></span>)) &gt; boundary) %timeit process_fft(x, <span class="hljs-number"><span class="hljs-number">2000</span></span>) <span class="hljs-number"><span class="hljs-number">84.1</span></span> ms Â± <span class="hljs-number"><span class="hljs-number">335</span></span> Âµs per loop (mean Â± std. dev. of <span class="hljs-number"><span class="hljs-number">7</span></span> runs, <span class="hljs-number"><span class="hljs-number">10</span></span> loops each)</code> </pre><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_fft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, boundary)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t -&gt; t &gt; boundary, abs.(fft(2*x.-1)</span></span></span><span class="hljs-function">)) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">benchmark</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_fft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, 2000)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkTools</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Trial</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memory</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">estimate</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">106</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">81</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MiB</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allocs</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">estimate</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">61</span></span></span><span class="hljs-function"> -------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">minimum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">80</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">233</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(4.75% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">median</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">80</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">746</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(4.70% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">85</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">000</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(8.67% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maximum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">205</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">831</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(52.27% GC)</span></span></span><span class="hljs-function"> -------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">samples</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">59</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evals</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sample</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span></span></code> </pre><br>  Kami tidak akan melihat sesuatu yang mengejutkan di sini - semua sama, mereka tidak menganggapnya sendiri, tetapi meneruskannya ke program fortran yang dioptimalkan dengan baik. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Sesuatu Non-Vektor</b> <div class="spoiler_text">  Array 0 dan 1. diumpankan ke input. Temukan panjang dari unit terpanjang berturut-turut. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">longest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> maxLen = <span class="hljs-number"><span class="hljs-number">0</span></span> currLen = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-comment"><span class="hljs-comment"># This will count the number of ones in the block for bit in x: if bit == 1: currLen += 1 maxLen = max(maxLen, currLen) else: maxLen = max(maxLen, currLen) currLen = 0 return max(maxLen, currLen) %timeit longest(x) 599 ms Â± 639 Âµs per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span></span></code> </pre><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">longest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maxLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">currLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> # </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">This</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">will</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">the</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">number</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">of</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ones</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">the</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">block</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bit</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bit</span></span></span><span class="hljs-function"> == </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">currLen</span></span></span><span class="hljs-function"> += </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maxLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maxLen, currLen)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maxLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maxLen, currLen)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">currLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">return</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maxLen, currLen)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">benchmark</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">longest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkTools</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Trial</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memory</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">estimate</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bytes</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allocs</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">estimate</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> -------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">minimum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">9</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">094</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(0.00% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">median</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">9</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">248</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(0.00% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">9</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">319</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(0.00% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maximum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">12</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">177</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(0.00% GC)</span></span></span><span class="hljs-function"> -------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">samples</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">536</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evals</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sample</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span></span></code> </pre><br>  Perbedaannya jelas dengan mata telanjang.  Tips untuk "menyelesaikan" dan / atau membuat vektor versi versi numpy dipersilakan.  Saya juga ingin mencatat bahwa programnya hampir identik.  Sebagai contoh, saya tidak mendaftarkan satu jenis pun di Julia (bandingkan dengan yang sebelumnya) - semua sama, semuanya bekerja dengan cepat. <br></div></div><br>  Saya juga ingin mencatat bahwa versi yang disajikan tidak termasuk dalam program akhir, tetapi lebih dioptimalkan;  di sini mereka diberikan sebagai contoh dan tanpa komplikasi yang tidak perlu (meneruskan memori tambahan di Julia untuk dilakukan di tempat, dll.). <br><br><h3>  Apa yang keluar pada akhirnya? </h3><br>  Saya tidak akan menampilkan kode final untuk Python dan untuk Julia: ini adalah rahasia (setidaknya untuk saat ini).  Pada saat saya berhenti menyelesaikan versi python, itu berhasil semua tes NIST pada array 16 megabyte karakter biner dalam ~ 50 detik.  Pada Julia saat ini, semua tes berjalan pada volume yang sama ~ 20 detik.  Mungkin saya bodoh, dan ada ruang untuk optimisasi, dll.  dll.  Tetapi inilah saya, sebagaimana adanya saya, dengan segala kelebihan dan kekurangannya, dan menurut pendapat saya, itu harus dianggap bukan kecepatan program dalam ruang hampa dalam bahasa pemrograman, tetapi bagaimana saya secara pribadi dapat memprogram ini (tanpa benar-benar blunder). <br><br><h3>  Mengapa saya menulis semua ini? </h3><br>  Orang-orang di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> menjadi tertarik;  Saya memutuskan untuk menulis ketika saatnya tiba.  Di masa depan saya berpikir untuk melewati Julia lebih teliti, dengan contoh menyelesaikan beberapa masalah khas.  Mengapa  Lebih banyak bahasa, baik dan berbeda, dan biarkan semua orang yang ingin menemukan sesuatu yang cocok untuknya secara pribadi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id427879/">https://habr.com/ru/post/id427879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id427869/index.html">Buka webinar â€œMultithreading di Jawa. Di luar disinkronkan-beri tahu semua Â»</a></li>
<li><a href="../id427871/index.html">Pembajakan Luar Angkasa: - Pedagang Bersenjata dan Patroli Militer - Bagian II</a></li>
<li><a href="../id427873/index.html">Printer Konstruksi 3D untuk Sekolah Tinggi Teknologi Modern</a></li>
<li><a href="../id427875/index.html">Latar Belakang: "Internet Archive" - â€‹â€‹sejarah penciptaan, misi, dan proyek tambahan</a></li>
<li><a href="../id427877/index.html">Bahasa pemrograman Rockstar: ketika kode terlihat seperti teks hit batu</a></li>
<li><a href="../id427883/index.html">Memperkenalkan Virtualisasi, Kontainer, dan Kubernet: 18 Sumber Daya Cloud</a></li>
<li><a href="../id427889/index.html">Salah, salah, salah! metode mitigasi DDoS</a></li>
<li><a href="../id427891/index.html">Jutaan Orang Dapat Diserang Melalui Kerentanan dalam Platform Konferensi Cisco WebEx</a></li>
<li><a href="../id427893/index.html">Berdarah Lola di Omega 2 atau tersedak Python di Halloween</a></li>
<li><a href="../id427895/index.html">Menghapus data dari database shardable</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>