<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëà ü§µ üöÄ Wir programmieren die Lichtsteuerung durch Bewegungs- und Lichtsensoren auf Node-RED üèæ üë¥üèæ üë§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es gibt nur wenige Artikel √ºber eine Programmierumgebung wie Node-RED im russischsprachigen Internet . Dieser Artikel enth√ºllt das Geheimnis des Vorha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir programmieren die Lichtsteuerung durch Bewegungs- und Lichtsensoren auf Node-RED</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/396985/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt nur wenige Artikel √ºber eine Programmierumgebung wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node-RED</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im russischsprachigen Internet </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dieser Artikel enth√ºllt das Geheimnis des Vorhangs zu diesem Produkt und zeigt am Beispiel der Erstellung eines Lichtsteuerungsalgorithmus f√ºr Bewegungssensoren, wie einfach es ist, mit Node-RED verschiedene Szenarien und Regeln f√ºr die Automatisierung eines Smart Homes in vollst√§ndig grafischer Form zu implementieren, ohne Code zu schreiben.</font></font><br>
<br>
<img src="https://habrastorage.org/files/639/1c2/c9f/6391c2c9f6134818a598bc2e703815ce.png"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist Node-RED?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IBM versucht wie andere gro√üe Unternehmen, seine Nische im sich entwickelnden Internet der Dinge zu finden. </font><font style="vertical-align: inherit;">Dies ist normalerweise mit der Ver√∂ffentlichung von Open-Source-Anwendungen und -Produkten verbunden, um deren kostenpflichtige Plattformen bekannt zu machen. </font><font style="vertical-align: inherit;">Bei IBM ist die kostenpflichtige Plattform beispielsweise Bluemix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node-RED ist eine Open-Source-Idee von IBM und, wie es einfach auf der Website geschrieben wird, ein Tool, mit dem Hardware, APIs und Services auf neue und interessante Weise verbunden werden k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Methoden basieren auf der Verwendung grafischer Kommunikationsleitungen, √ºber die Nachrichten zwischen Knoten gesendet werden. </font><font style="vertical-align: inherit;">So k√∂nnen Sie die verschiedenen Bl√∂cke einfach mit der Maus ohne Programmierung verbinden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Entwicklung in Node-RED erfolgt √ºber einen normalen Browser. Der Kernel selbst kann auf verschiedenen Plattformen ausgef√ºhrt werden - PC, RPi, Cloud usw.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Node-RED f√ºr Smart Home</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe mich f√ºr Node-RED entschieden, um Skripte und Regeln f√ºr Smart Home zu schreiben. Das hei√üt, f√ºr die Automatisierung. Die Verbindung mit verschiedenen Aktoren, Webdiensten und Sensoren wird auf OpenHAB hergestellt. Warum habe ich mich entschieden, dort nicht zu automatisieren? Mehrere Gr√ºnde: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - In OpenHAB werden Skripte und Regeln in ihrer eigenen Sprache geschrieben. Ich wollte es nicht nur f√ºr eine Anwendung studieren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Das Debuggen der Regeln selbst ist fast unm√∂glich. Wenn die Regel nicht funktioniert, ist es schwierig herauszufinden, warum. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ich m√∂chte, dass meine Regeln f√ºr die Kommunikation mit Ger√§ten unabh√§ngig von Hardware, Kommunikationskan√§len, Plattformen und der Software selbst sind. Damit ich problemlos zu einer anderen UD-Plattform wechseln kann, z. B. Domoticz, MajorDomo, FHEM, und meine Regeln mitnehmen und sie nicht unter der neuen UD-Plattform neu schreiben kann.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lichtsteuerung durch Bewegungs- und Lichtsensoren</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also fangen wir an. </font><font style="vertical-align: inherit;">Eigentlich ist die urspr√ºngliche Aufgabe einfach und trivial: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe LED-Spots f√ºr die Beleuchtung im Korridor gesteuert. </font><font style="vertical-align: inherit;">Ich m√∂chte, dass das Licht bei Bewegung aufleuchtet und sich nach 10 Sekunden selbst ausschaltet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns die Aufgabe etwas komplizieren: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Das Licht sollte sich nur einschalten, wenn es drau√üen dunkel ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Die Lichtintensit√§t sollte von der Zeit abh√§ngen. - Bis 21 Uhr sollte sich das Licht mit voller Intensit√§t einschalten und danach nur um 10% als Hintergrundbeleuchtung.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensoren, Darsteller usw. Eisen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Protokolle und Kommunikationsm√∂glichkeiten mit Sensoren und Aktoren werde ich hier nicht beschreiben. Es gen√ºgt zu sagen, dass in meinem Smart Home alle diese Protokolle auf eins reduziert sind - MQTT, und dass dadurch bereits eine Kommunikation mit Node-RED stattfindet. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Welche Sensoren und Aktoren habe ich? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Der Bewegungssensor. Ver√∂ffentlicht eine OPEN-Nachricht zum Thema / myhome / state / Hall_motion, wenn eine Bewegung erkannt wird, und zu CLOSED, wenn 2 Sekunden lang keine Bewegung erfolgt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Lichtsensor. Es misst die Helligkeit der Stra√üenbeleuchtung im Bereich von 0-1000 Lux. Es ver√∂ffentlicht einmal pro Minute eine Nachricht im Thema / myhome / state / Lumin_Hall mit der aktuellen Lichtst√§rke.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. LED-Lampen f√ºr Dimmersteuerung. </font><font style="vertical-align: inherit;">Es hat das Thema / myhome / command / Light_Hall / state abonniert. </font><font style="vertical-align: inherit;">Wenn Sie dort 0 schreiben, erlischt das Licht. </font><font style="vertical-align: inherit;">100 - schaltet sich bei maximaler Helligkeit ein. </font><font style="vertical-align: inherit;">1-99 - √§ndert die Lichtintensit√§t. </font><font style="vertical-align: inherit;">F√ºr Nachtbeleuchtung ausreichend Intensit√§t 1.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung des Durchflusses in Node-RED</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird davon ausgegangen, dass Sie Node-RED bereits installiert haben. </font><font style="vertical-align: inherit;">Wenn nicht, folgen Sie dem obigen Link und installieren Sie eine f√ºr Sie geeignete Option - auf einem Computer, Raspberry, Clowd usw. </font><font style="vertical-align: inherit;">In meinem Fall ist Node-RED auf RPi2 installiert (meiner Meinung nach wird es sogar mit Raspbian geliefert, sodass √ºberhaupt nichts installiert werden muss). </font><font style="vertical-align: inherit;">F√ºr diesen Ablauf m√ºssen keine zus√§tzlichen Bibliotheken installiert werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein- und Ausg√§nge</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst erstellen wir die notwendigen Ein- und Ausg√§nge f√ºr unseren Algorithmus. Dies sind MQTT-Clients, die die relevanten Themen abonnieren. Wir ziehen sie aus der Bibliothek auf der linken Seite und passen sie an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hinweis: Die angezeigten Blocknamen k√∂nnen in ihren Einstellungen ge√§ndert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie f√ºr den Lichtsensor den Knoten Halllichtsensor aus dem MQTT-Eingang: </font></font><br>
<br>
<img src="https://habrastorage.org/files/498/4bf/290/4984bf2904f44c0b97aad3d2ea8bb116.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In seiner Konfiguration reicht es aus, die Adresse und das Thema des MQTT-Brokers zu registrieren. </font></font><br>
<br>
<img src="https://habrastorage.org/files/883/3ca/27f/8833ca27f19e4f789a545265e877b4fc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein Broker dreht sich auf derselben Plattform, also verlassen Sie einfach localhost. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erstellen den Hall-Bewegungssensor-Knoten f√ºr den Bewegungssensor: </font></font><br>
<br>
<img src="https://habrastorage.org/files/b07/e06/172/b07e0617262c43f8af32d02b10ecc6cd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles ist gleich, setzen Sie einfach ein anderes Thema / myhome / state / Hall_motion. </font></font><br>
<br>
<img src="https://habrastorage.org/files/58e/186/5e9/58e1865e981a444395d03419537ab8b9.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie an der Adresse und den Parametern des Brokers sehen k√∂nnen, hat dieser Knoten bereits den vorherigen Knoten √ºbernommen, sodass Sie sie nicht in einen neuen eingeben m√ºssen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt noch MQTT-Ausgang hinzuzuf√ºgen, um einen Ausgang f√ºr den LED-Dimmer zu erstellen. Ziehen Sie den MQTT-Ausgang per Drag &amp; Drop und nennen Sie ihn Hall Light Dimmer. </font></font><br>
<br>
<img src="https://habrastorage.org/files/4c5/779/1de/4c57791de90247ad9a1b6208d5199c0d.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Parametern m√ºssen Sie erneut nur das gew√ºnschte Thema angeben, an das Nachrichten zur Steuerung des Dimmers gesendet werden sollen - / myhome / command / Light_Hall / state </font></font><br>
<br>
<img src="https://habrastorage.org/files/7b6/8fb/545/7b68fb5452b142a7bfb1c4c293d902fe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis haben wir drei Knoten f√ºr unseren Flow. </font></font><br>
<br>
<img src="https://habrastorage.org/files/6ae/70c/cf9/6ae70ccf981d46318f6c487435dbeb81.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es w√ºrde nicht schaden, sie auf Funktionalit√§t zu testen. Das ist leicht. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verbinden die Debug-Ausgabe mit den Eingabebl√∂cken. </font></font><br>
<br>
<img src="https://habrastorage.org/files/9e6/5fa/e1b/9e65fae1b1c2464a9c5d553f5be90411.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und verbinden Sie den Inject Input mit dem Output Block. </font></font><br>
<br>
<img src="https://habrastorage.org/files/11e/d81/8c6/11ed818c639f4331a317232357d88b57.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Einstellungen dieses Knotens m√ºssen Sie die Nutzlast auf die gew√ºnschte Helligkeit der Lampe einstellen. In diesem Fall ist es beispielsweise 100. </font></font><br>
<br>
<img src="https://habrastorage.org/files/77b/dd8/1d6/77bdd81d6fb046ec94b0c5a6907f0956.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir k√∂nnen mehrere identische Inject-Bl√∂cke durch Kopieren und Einf√ºgen erstellen, die Helligkeit √§ndern und sie wie </font><font style="vertical-align: inherit;">folgt </font><font style="vertical-align: inherit;">mit dem Ausgang verbinden:</font></font><br>
<br>
<img src="https://habrastorage.org/files/a2c/63b/706/a2c63b70698841d7a610d89de62aca37.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das wird auch funktionieren. </font><font style="vertical-align: inherit;">Es ist Zeit zu √ºberpr√ºfen. </font><font style="vertical-align: inherit;">Wir klicken auf die Schaltfl√§che Bereitstellen: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c93/3e5/16f/c933e516faa0478485d82513326f96dd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter den MQTT-Knoten sollte eine kleine Meldung angezeigt werden: </font></font><br>
<br>
<img src="https://habrastorage.org/files/132/d32/701/132d32701d154b038b17b7d6a5e0055d.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bedeutet, dass sie mit dem MQTT-Broker verbunden sind. </font><font style="vertical-align: inherit;">Wenn alles nach Plan verlaufen ist, sollten auf der rechten Registerkarte Debug die Meldungen der Sensoren angezeigt werden. Wenn Sie auf die Rechtecke links neben den Inject-Knoten klicken, sollte sich die Lichtintensit√§t der an den Dimmer angeschlossenen Lampe √§ndern. </font><font style="vertical-align: inherit;">Wenn alles funktioniert, k√∂nnen Sie weiter gehen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steuerkreis f√ºr Bewegungssensorbeleuchtung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Einfachheit halber werde ich einzelne miteinander verbundene Bl√∂cke als Ketten bezeichnen. Lassen Sie uns zun√§chst versuchen, eine einfache Schaltung zu erstellen, die das Licht des Bewegungssensors einschaltet und nach einiger Zeit ausschaltet. Dazu ben√∂tigen wir nach dem Node-RED-Konzept die Meldung des Bewegungssensors, um den Dimmer √ºber bestimmte Bl√∂cke zu erreichen und einen bestimmten Text zu haben. Zun√§chst werden wir uns mit der Einbeziehung von Licht befassen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst w√§hlen wir aus allen Meldungen des Bewegungssensors eine Meldung mit dem Text OPEN aus - das hei√üt, die Bewegung ist erschienen. Verwenden Sie dazu den Schalterblock. Schlie√üen Sie es an den Ausgang des bereits erstellten Hall Motion Sensor-Blocks an. </font></font><br>
<br>
<img src="https://habrastorage.org/files/ad2/92d/eb3/ad292deb31634ef7853c1cb9bcc45cef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden es so konfigurieren, dass der Block nur Nachrichten mit dem Text OPEN ausgibt</font></font><br>
<br>
<img src="https://habrastorage.org/files/79c/989/4f7/79c9894f70154190835afd1969fa8f2a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie auf dem Bild sehen k√∂nnen, vergleicht der Block die Nutzdaten mit dem Text OPEN und sendet Nachrichten an die Ausgabe, wenn der Text √ºbereinstimmt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Dimmer erfordert, dass Nachrichten mit der erforderlichen Helligkeit 0 ... 100 eingegeben werden. Er wird den Text OPEN nicht verstehen. Daher verwenden wir den √Ñnderungsblock, um den Text der Nachricht zu √§ndern. </font></font><br>
<br>
<img src="https://habrastorage.org/files/a25/202/c7d/a25202c7dc5b40e5ab5e4ac2aa9503db.png"><br>
<img src="https://habrastorage.org/files/e8e/7a6/102/e8e7a6102c54450a9ae86a7b5eeed678.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notieren Sie in den Einstellungen dieses Blocks die erforderliche √Ñnderung - Nachrichtennutzlast, die wir auf 100 √§ndern - die erforderliche Beleuchtungsintensit√§t. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und schlie√ülich verbinden wir alles mit dem Eingang unseres Dimmers: </font></font><br>
<br>
<img src="https://habrastorage.org/files/4e5/cb7/810/4e5cb78102d24e208f4d770a6b7c71a7.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie diese Schaltung starten, k√∂nnen Sie sicherstellen, dass sie funktioniert - das Licht wird in Bewegung eingeschaltet. Es bleibt sicherzustellen, dass es sich auch ausschaltet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie dazu die Triggereinheit und verbinden Sie sie mit dem Ausgang des Bewegungssensors.</font></font><br>
<br>
<img src="https://habrastorage.org/files/a9b/e70/538/a9be70538741423fb180dd6453c9d5eb.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Triggerblock k√∂nnen Sie verz√∂gerte Nachrichten generieren und durch eine bestimmte Nachricht zur√ºckgesetzt werden. Wir werden es folgenderma√üen </font></font><br>
<br>
<img src="https://habrastorage.org/files/cb2/a37/a90/cb2a37a90a81451a935ffb92db9fcc00.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
konfigurieren </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Diese Einstellung bedeutet, dass der Trigger beim Eintreffen der ersten Nachricht nichts sendet, sondern eine Zeitverz√∂gerung von 8 Sekunden startet und danach eine Nachricht mit dem Text 0 sendet. Der Trigger wird auch zur√ºckgesetzt, wenn er eine Eingabe mit dem Text OPEN empf√§ngt. Was bedeutet das in unserem Fall? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, der Bewegungssensor zeigt eine OPEN-Meldung an. Diese Nachricht bringt den Trigger ohne Reaktion in seinen urspr√ºnglichen Zustand zur√ºck. Nach einiger Zeit gibt der Bewegungssensor eine GESCHLOSSENE Meldung aus. Diese Nachricht startet die Zeitverz√∂gerung und 8 Sekunden danach zeigt der Trigger eine Nachricht 0 an.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn w√§hrend dieser Zeitverz√∂gerung die OPEN-Nachricht erneut eintrifft, kehrt der Trigger wieder in seinen urspr√ºnglichen Zustand zur√ºck und wartet auf die n√§chste Nachricht (die logischerweise geschlossen wird). In diesem Fall zeigt der Trigger keine Meldungen an. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, auf diese Weise haben wir einen Timer erstellt, mit dem wir das Licht nach einer bestimmten Belichtung automatisch ausschalten k√∂nnen. Wenn wir uns an die Beschreibung des Bewegungssensors erinnern, wird klar, warum hier 8 Sekunden eingestellt sind und nicht 10 - 2 Sekunden aufgrund der Verschlusszeit des Bewegungssensors selbst hinzugef√ºgt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt, den Triggerausgang mit dem Dimmer zu verbinden, und Sie k√∂nnen die Schaltung zur √úberpr√ºfung starten. </font></font><br>
<br>
<img src="https://habrastorage.org/files/df4/c60/62f/df4c6062f86d48feab6b08ac3050b6fa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich stelle fest, dass ich der Einfachheit halber Screenshots von bereits debuggten Ketten poste. Sie k√∂nnen Bl√∂cke mit Ihrer Debug-Kette aufh√§ngen, um zu verstehen, wie sie funktioniert. Ihre Kette sieht m√∂glicherweise folgenderma√üen aus:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e63/3c7/10e/e633c710e67f47d1931e0c33b92a69b7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und es gibt nichts, wor√ºber man sich Sorgen machen m√ºsste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und Sie k√∂nnen es so machen: Im </font></font><br>
<br>
<img src="https://habrastorage.org/files/cff/c68/6ca/cffc686cab3f49059033979c52ac0ae5.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Allgemeinen k√∂nnen Sie durch Klicken auf die Rechtecke links neben den Inject-Bl√∂cken die Schaltung ohne B√ºgeleisen debuggen - auf Ihrem Laptop w√§hrend einer Fahrt mit der U-Bahn oder sogar einem Tablet.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Licht-Ein / Aus-Schaltung abh√§ngig von der Helligkeit der Stra√üenbeleuchtung </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen wir sicherstellen, dass das Licht nicht eingeschaltet wird, wenn die Stra√üe zu hell ist. Dazu m√ºssen wir eine weitere Kette hinzuf√ºgen und die Hauptkette leicht √§ndern, um diesen Faktor zu ber√ºcksichtigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nehmen Sie zuerst den bereits bekannten Schaltblock und verbinden Sie ihn mit dem Ausgang des Lichtsensors. </font></font><br>
<br>
<img src="https://habrastorage.org/files/5fc/b76/7f8/5fcb767f8f4c470eb4d99f8464da301b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden dieses Ger√§t so konfigurieren, dass es abh√§ngig von der aktuellen Beleuchtung Nachrichten vom Lichtsensor an einen der Ausg√§nge sendet. </font></font><br>
<br>
<img src="https://habrastorage.org/files/bd6/b5c/f07/bd6b5cf07f2c4d3395bed17d0c2e4e9e.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die obige Bedingung bedeutet, dass bei einer Beleuchtung von weniger als 10 Lux die Nachricht an Ausgang 1 gesendet wird. Andernfalls wird sie an Ausgang 2 gesendet. Vergessen Sie nicht, dass Sie die </font></font><br>
<br>
<img src="https://habrastorage.org/files/c17/91f/640/c1791f6403f4420885d4187f9ef88e7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Option </font><font style="vertical-align: inherit;">ausw√§hlen m√ºssen, </font><font style="vertical-align: inherit;">damit die Nachricht nur an einen der Ausg√§nge gerichtet wird.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basierend auf dem Funktionsprinzip stellt sich logischerweise heraus, dass wir die Bewegungserkennung aktivieren m√ºssen, wenn die Meldung am ersten (oberen) Ausgang erscheint, und wenn am zweiten, dann deaktivieren m√ºssen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sind nat√ºrlich 1000 und 1 Methoden m√∂glich, von denen die einfachste darin besteht, die Nachricht zu blockieren, um das Licht vom Bewegungssensor einzuschalten, wenn es drau√üen hell ist. Wir erkennen es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass in Node-RED die Ausf√ºhrungsengine basierend auf Nachrichten implementiert ist. Das hei√üt, Keine Nachricht - kein Ereignis, keine Reaktion. Dies legt bestimmte Besonderheiten f√ºr den Fall fest, dass verschiedene Nachrichten asynchron ankommen, d. H. Zu verschiedenen Zeitpunkten. In diesem Fall ist beispielsweise die Nachricht vom Lichtsensor asynchron mit den Nachrichten vom Bewegungssensor. Um die Wirkung des Lichtsensors zu ber√ºcksichtigen, m√ºssen wir uns daher die Informationen in seiner Nachricht merken und sie dann anwenden, wenn das n√§chste Mal eine Nachricht vom Bewegungssensor kommt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall kommt der Kontext zur Rettung - ein Feld, in dem Sie Informationen w√§hrend der Ablaufausf√ºhrung speichern k√∂nnen. Der Kontext ist global in Bezug auf die gesamte Umgebung oder lokal f√ºr einen bestimmten Fluss oder im Allgemeinen nur f√ºr einen bestimmten Block.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall verwenden wir einen lokalen Kontext f√ºr diesen Fluss. Das hei√üt, Variablen sind f√ºr alle Bl√∂cke in diesem Fluss sichtbar. Erstellen Sie einen √Ñnderungsblock und verbinden Sie ihn mit dem ersten Ausgang des Lichtschwellendetektors. </font></font><br>
<br>
<img src="https://habrastorage.org/files/0fc/c00/305/0fcc00305f154d0f91ff49bef62a28dc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie wir uns erinnern, wird an diesem Ausgang eine Meldung angezeigt, wenn der Lichtsensor meldet, dass die Stra√üenbeleuchtung weniger als 10 Lux betr√§gt. Ber√ºcksichtigen Sie die Konfiguration des √Ñnderungsblocks. </font></font><br>
<br>
<img src="https://habrastorage.org/files/96b/881/dcf/96b881dcfdc9420b96d4d358cd67a63b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall verwenden wir die Set-Regel, um die Variable flow.Light_enabled auf Yes zu setzen. Daher haben wir der globalen Variablen einen Wert zugewiesen, den wir in anderen Bl√∂cken verwenden k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie auf die gleiche Weise den zweiten √Ñnderungsblock und verbinden Sie ihn mit dem zweiten Ausgang. </font></font><br>
<br>
<img src="https://habrastorage.org/files/c31/f0a/67b/c31f0a67bbf34ddc86ded46ddf74c9fa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Konfiguration lautet wie folgt:</font></font><br>
<br>
<img src="https://habrastorage.org/files/8a8/a88/553/8a8a885534e44d3b871c127119451efd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um herauszufinden, ob ein solcher Detektor richtig funktioniert, k√∂nnen wir eine einfache Schaltung mit Inject- und Debug-Bl√∂cken erstellen. </font></font><br>
<br>
<img src="https://habrastorage.org/files/f7b/963/1c8/f7b9631c800c48e2a6c32985b901f47b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig geben wir in den Einstellungen des Inject-Blocks an, dass er jede Sekunde den Wert des variablen Durchflusses angeben soll. Light_enabled </font></font><br>
<br>
<img src="https://habrastorage.org/files/517/cde/9ba/517cde9ba14d43dab8e56c10abc3bedf.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann kann das Ergebnis des Lichtsensors auf der Registerkarte Debug leicht </font><font style="vertical-align: inherit;">angezeigt werden </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/files/698/faf/415/698faf41515040aa953448b86b3ed101.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die allgemeine Licht-Ein / Aus-Schaltung f√ºr den Lichtsensor sieht </font></font><br>
<br>
<img src="https://habrastorage.org/files/368/721/3b4/3687213b4253469494c227c0fdc4df39.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nun so aus, um diesen Effekt zu ber√ºcksichtigen Als Steuerstromkreis des Bewegungssensors reicht es f√ºr uns aus, den Schaltblock in den Stromkreis des Pfades einzuf√ºgen, um das Licht einzuschalten. </font></font><br>
<br>
<img src="https://habrastorage.org/files/1d9/610/d37/1d9610d375064d959272c7b0e471b733.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und richten Sie es so ein, dass nur dann Nachrichten vom Bewegungssensor √ºbersprungen werden, wenn unsere globale Variable flow.Light_enabled auf Yes gesetzt ist - d. H. Drau√üen ist es dunkel. </font></font><br>
<br>
<img src="https://habrastorage.org/files/30e/8b7/29e/30e8b729e5f54ad895b171d4d06a5ce9.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fertig! Jetzt sieht unser Fluss so aus:</font></font><br>
<br>
<img src="https://habrastorage.org/files/b16/886/c1b/b16886c1bae2485cbe959c9008603c90.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ñndern der Helligkeit der Lampe je nach Zeit </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist sehr wenig √ºbrig. </font><font style="vertical-align: inherit;">Wir wollen die Intensit√§t der LED-Lampe √§ndern. </font><font style="vertical-align: inherit;">Das hei√üt, </font><font style="vertical-align: inherit;">Wenn es bei uns dunkel ist, die Zeit jedoch vor 21 Uhr liegt, sollte das Licht bei voller Leistung aufleuchten. </font><font style="vertical-align: inherit;">Aber nach neun - nur bei geringer Leistung, wie bei Nachtbeleuchtung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie dazu einen Inject-Block: </font></font><br>
<br>
<img src="https://habrastorage.org/files/f09/eb9/610/f09eb96103554139bf45f3cc6d74e7c9.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Er kann so konfiguriert werden, dass zu einem bestimmten Zeitpunkt eine Nachricht angezeigt wird. </font><font style="vertical-align: inherit;">Stellen Sie es jeden Tag um 21:00 Uhr ein. </font></font><br>
<br>
<img src="https://habrastorage.org/files/fa2/eaa/acf/fa2eaaacf5ea4ba294253e875831936b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig stellen wir fest, dass eine Nachricht mit dem Wert 1 ausgegeben wird. Dies ist unsere gew√ºnschte Intensit√§t der Hintergrundbeleuchtung im Nachtmodus. </font><font style="vertical-align: inherit;">Um diesen Wert in der Lichtsteuerschaltung zu verwenden, verwenden wir denselben Trick mit globalen Variablen. </font><font style="vertical-align: inherit;">Erstellen Sie einen change: block </font></font><br>
<br>
<img src="https://habrastorage.org/files/c39/9ae/134/c399ae13425e47a9a4d3f2d0c3800790.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und konfigurieren Sie ihn so, dass der Variablen flow.Light_Brightness der Wert aus der Nachricht zugewiesen wird.</font></font><br>
<img src="https://habrastorage.org/files/5ab/906/2bd/5ab9062bdaa04d88bec7bc0485c7f46b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die anf√§ngliche Helligkeit am Morgen wiederherzustellen, erstellen Sie einen zweiten Injektionsblock, der um 6 Uhr morgens ausgef√ºhrt wird, und geben Sie einen Helligkeitswert von 100 an. Schlie√üen Sie ihn dort an. </font></font><br>
<br>
<img src="https://habrastorage.org/files/d2f/342/e3c/d2f342e3c2094eeb9e2055fe3df454af.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher wird der Variablen flow.Light_brightness jeden Abend um 9 Uhr der Wert 1 und jeden Morgen um 6 Uhr der Wert 100 zugewiesen. </font><font style="vertical-align: inherit;">Es bleibt nur, dies im Hauptstromkreis anzuwenden. </font><font style="vertical-align: inherit;">Daf√ºr haben wir bereits einen Block zur Anpassung der Lichthelligkeit: </font></font><br>
<br>
<img src="https://habrastorage.org/files/cd8/130/7c7/cd81307c79d445c2b3ecf08ed709e92b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr diesen m√ºssen wir nur die Einstellung so √§ndern, dass keine Konstante zugewiesen wird, sondern der Wert der Variablen flow.Light_brightness.</font></font><br>
<br>
<img src="https://habrastorage.org/files/f01/e09/da0/f01e09da09cb417586297f0efbfeab77.png"><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Endergebnis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der endg√ºltige Ablauf, der von Debugging-Bl√∂cken befreit ist, sieht ordentlich und sauber aus. </font><font style="vertical-align: inherit;">Beim Erstellen haben wir nur Bausteine ‚Äã‚Äãaus der Node-RED-Installation verwendet. </font><font style="vertical-align: inherit;">Bei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flows.nodered.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gibt es jedoch √ºber 800 zus√§tzliche Bl√∂cke und Bibliotheken, mit denen Sie viele verschiedene Dinge hinzuf√ºgen k√∂nnen. </font></font><br>
<br>
<img src="https://habrastorage.org/files/e4b/3c3/20b/e4b3c320b15745ffbbd91e343715a156.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr diejenigen, die daran interessiert sind, diesen Algorithmus zu wiederholen, ver√∂ffentliche ich den Ablauf, den ich zum Debuggen verwendet habe: </font></font><br>
<br>
<img src="https://habrastorage.org/files/cc2/27a/61c/cc227a61c0f5434bad8a469623439e23.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sowie den JSON-Code, der problemlos in jede Version von Node-RED importiert und getestet werden kann.</font></font><br>
<pre><code class="hljs json">[{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"5afd41b4.d61318"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"switch"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Movement detected?"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"propertyType"</span></span>:<span class="hljs-string"><span class="hljs-string">"msg"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"eq"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"v"</span></span>:<span class="hljs-string"><span class="hljs-string">"OPEN"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"vt"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"checkall"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"outputs"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">562</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">285</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"381b0d6d.a0bd7a"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"35bac8e.57dd5b8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"trigger"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"op1"</span></span>:<span class="hljs-string"><span class="hljs-string">"5"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"op2"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"op1type"</span></span>:<span class="hljs-string"><span class="hljs-string">"nul"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"op2type"</span></span>:<span class="hljs-string"><span class="hljs-string">"val"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>:<span class="hljs-string"><span class="hljs-string">"8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"extend"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"units"</span></span>:<span class="hljs-string"><span class="hljs-string">"s"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reset"</span></span>:<span class="hljs-string"><span class="hljs-string">"OPEN"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Switch off delay"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">750</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">373</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"e995e130.1e2118"</span></span>,<span class="hljs-string"><span class="hljs-string">"af1f191f.498098"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"d85623d1.29b058"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"change"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light Brightness Adjustment"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"set"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"p"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"pt"</span></span>:<span class="hljs-string"><span class="hljs-string">"msg"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_brightness"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"tot"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"action"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"from"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reg"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">1013.9999389648438</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">284.63330078125</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"e995e130.1e2118"</span></span>,<span class="hljs-string"><span class="hljs-string">"af1f191f.498098"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"934ff922.ca34f"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"OPEN"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">258.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">408</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"5afd41b4.d61318"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"ea0e2e99.52a6f8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"CLOSED"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">269</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">459</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"35bac8e.57dd5b8"</span></span>,<span class="hljs-string"><span class="hljs-string">"5afd41b4.d61318"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"4187db59.93c2dc"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt in"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Hall Light Sensor"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"/myhome/state/Lumin_Hall"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"qos"</span></span>:<span class="hljs-string"><span class="hljs-string">"2"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"bfc8eee2.a46c9"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">243</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">146</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"c94e7c4.849f48"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"c94e7c4.849f48"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"switch"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light Threshold Selector"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"propertyType"</span></span>:<span class="hljs-string"><span class="hljs-string">"msg"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"lt"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"v"</span></span>:<span class="hljs-string"><span class="hljs-string">"10"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"vt"</span></span>:<span class="hljs-string"><span class="hljs-string">"num"</span></span>},{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"else"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"checkall"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"outputs"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">517.3333129882812</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">145.7166748046875</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"48e6a07a.962798"</span></span>],[<span class="hljs-string"><span class="hljs-string">"ca8b6623.f11c7"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"381b0d6d.a0bd7a"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"switch"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light Enabled?"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"propertyType"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"eq"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"v"</span></span>:<span class="hljs-string"><span class="hljs-string">"Yes"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"vt"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"checkall"</span></span>:<span class="hljs-string"><span class="hljs-string">"true"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"outputs"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">775.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">285</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"d85623d1.29b058"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"48e6a07a.962798"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"change"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Enable Light"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"set"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"p"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"pt"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">"Yes"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"tot"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"action"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"from"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reg"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">822</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">109</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"ca8b6623.f11c7"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"change"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Disable Light"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"set"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"p"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"pt"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">"No"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"tot"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"action"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"from"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reg"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">824.6666259765625</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">177.51666259765625</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"b6ea27c1.c33cd"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">"1"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">330.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">678</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"db66aec8.b3abc"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"db66aec8.b3abc"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"debug"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_enabled"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"active"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"console"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"complete"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">670.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">679</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"fa4b50b8.e6e0f"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"5"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"num"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">233.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">212</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"c94e7c4.849f48"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"e7b1a39.f9e596"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"100"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"num"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">235</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">266</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"c94e7c4.849f48"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"4b2f3c6f.de9aac"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt in"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Hall Motion Sensor"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"/myhome/state/Hall_motion"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"qos"</span></span>:<span class="hljs-string"><span class="hljs-string">"2"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"87b370d1.dd497"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">247</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">334</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"5afd41b4.d61318"</span></span>,<span class="hljs-string"><span class="hljs-string">"35bac8e.57dd5b8"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"e995e130.1e2118"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt out"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Hall Light Dimmer "</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"/myhome/command/Light_Hall/state"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"qos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"retain"</span></span>:<span class="hljs-string"><span class="hljs-string">"true"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"87b370d1.dd497"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">1310</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">315</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"781e72a7.3c0abc"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Reduce Brightness at 21:00"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"Night Brightness"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"1"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"str"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">"00 21 * * *"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">339</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">517</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"adbf1e2e.3f5ae"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"aa444315.a48ad8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"inject"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Normal Brightness at 6:00"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"topic"</span></span>:<span class="hljs-string"><span class="hljs-string">"Night Brightness"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payload"</span></span>:<span class="hljs-string"><span class="hljs-string">"50"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"payloadType"</span></span>:<span class="hljs-string"><span class="hljs-string">"num"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"repeat"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"crontab"</span></span>:<span class="hljs-string"><span class="hljs-string">"00 6 * * *"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"once"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">349.6666259765625</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">604.683349609375</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[<span class="hljs-string"><span class="hljs-string">"adbf1e2e.3f5ae"</span></span>]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"adbf1e2e.3f5ae"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"change"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light Brightness Adjustment"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"set"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"p"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light_brightness"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"pt"</span></span>:<span class="hljs-string"><span class="hljs-string">"flow"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">"payload"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"tot"</span></span>:<span class="hljs-string"><span class="hljs-string">"msg"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"action"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"property"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"from"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"to"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"reg"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">692</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">554</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[[]]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"af1f191f.498098"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"debug"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"active"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"console"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"complete"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"x"</span></span>:<span class="hljs-number"><span class="hljs-number">1303.5</span></span>,<span class="hljs-attr"><span class="hljs-attr">"y"</span></span>:<span class="hljs-number"><span class="hljs-number">429</span></span>,<span class="hljs-attr"><span class="hljs-attr">"wires"</span></span>:[]},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"bfc8eee2.a46c9"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt-broker"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"localhost"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"port"</span></span>:<span class="hljs-string"><span class="hljs-string">"1883"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"clientid"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"usetls"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"verifyservercert"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"compatmode"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"keepalive"</span></span>:<span class="hljs-string"><span class="hljs-string">"60"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"cleansession"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willTopic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willQos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willRetain"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willPayload"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthTopic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthQos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthRetain"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthPayload"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>},{<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"87b370d1.dd497"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"mqtt-broker"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"z"</span></span>:<span class="hljs-string"><span class="hljs-string">"2384634b.17767c"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"broker"</span></span>:<span class="hljs-string"><span class="hljs-string">"localhost"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"port"</span></span>:<span class="hljs-string"><span class="hljs-string">"1883"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"clientid"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"usetls"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"verifyservercert"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"compatmode"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"keepalive"</span></span>:<span class="hljs-string"><span class="hljs-string">"60"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"cleansession"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willTopic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willQos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willRetain"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"willPayload"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthTopic"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthQos"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthRetain"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"birthPayload"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>}]
</code></pre><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel habe ich versucht zu demonstrieren und zu erkl√§ren, wie einfach es ist, allt√§gliche Hausautomationsalgorithmen in einer Node-RED-Umgebung zu implementieren. Ich habe auch versucht, die Hauptvorteile dieser Programmierumgebung aufzuzeigen, wie zum Beispiel: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - eine logische grafische Darstellung von Verbindungen und Funktionen </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - einfache Programmierung und einfaches Debuggen von Benutzerskripten </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Hardware- und Plattformunabh√§ngigkeit der resultierenden Algorithmen - dieses Skript funktioniert gleicherma√üen gut mit OpenHAB sowie mit ioBroker und mit allen anderen Smart-Home-Plattformen, die das MQTT-Protokoll unterst√ºtzen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Einfacher Austausch vorgefertigter Algorithmen zwischen Benutzern dank Copy-Paste-JSON-Code und Vorhandensein einer Online-Plattform f√ºr den Austausch erfolgreicher L√∂sungen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node-RED kann viel mehr, z. B. Wetter aus dem Internet empfangen, Benachrichtigungen an Twitter senden oder mit Nest-Thermostaten arbeiten. </font><font style="vertical-align: inherit;">Auf dieser Grundlage k√∂nnen Sie viele andere interessante und n√ºtzliche Automatisierungsalgorithmen erstellen. </font><font style="vertical-align: inherit;">Dies sind jedoch Themen f√ºr die folgenden Artikel.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de396985/">https://habr.com/ru/post/de396985/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de396973/index.html">Hersteller in den USA haben nicht das Recht, eine Garantie nach dem Entfernen des Garantieaufklebers abzulehnen. Was ist in Russland?</a></li>
<li><a href="../de396975/index.html">Computer im Auto, Jahr 2016</a></li>
<li><a href="../de396977/index.html">K√ºnstliche Intelligenz hat Sprachprobleme</a></li>
<li><a href="../de396979/index.html">Kritische Rolle: Ein neuer Blick auf D & D.</a></li>
<li><a href="../de396983/index.html">Wie ich Funkamateur wurde und mein erstes RES registrierte</a></li>
<li><a href="../de396987/index.html">Intelligente Nanobots injizieren Substanzen als Reaktion auf Gehirnbedingungen</a></li>
<li><a href="../de396989/index.html">Versorgungsl√ºftungssystem basierend auf dem Kanal-Innenger√§t der Klimaanlage</a></li>
<li><a href="../de396993/index.html">Wikiverse-Projekt: Visualisierung des Wikipedia-Informationsuniversums</a></li>
<li><a href="../de396995/index.html">Hey, bin ich da dr√ºben?</a></li>
<li><a href="../de396997/index.html">Wie schalte ich einen Computer mit einem Passwort ein? Kennwortumgehung unter Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>