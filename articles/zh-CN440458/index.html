<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎊 😥 🏈 基于SIP应用服务器的文本日志文件的VoIP网络状态预测 😵 🔓 📺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="监视VoIP信令网络的状态是使UCaaS提供商向客户提供保证质量的服务质量（如音频和视频呼叫，传真接收和传输）的重要条件之一。 通常，使用各种监视系统，流量收集和分析，CDR分析来执行这种控制。 信号网络的某些参数相当困难，并且通常无法使用所示方法进行评估。 


 有关VoIP信令网络状态的重要信...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>基于SIP应用服务器的文本日志文件的VoIP网络状态预测</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dins/blog/440458/"><p> 监视VoIP信令网络的状态是使UCaaS提供商向客户提供保证质量的服务质量（如音频和视频呼叫，传真接收和传输）的重要条件之一。 通常，使用各种监视系统，流量收集和分析，CDR分析来执行这种控制。 信号网络的某些参数相当困难，并且通常无法使用所示方法进行评估。 </p><a name="habracut"></a><br><p> 有关VoIP信令网络状态的重要信息的可能来源是SIP应用服务器（SIP AS），它是处理VoIP网络中的呼叫所涉及的主要元素之一。  SIP AS日志文件使您可以评估VoIP信令网络的以下参数： </p><br><ul><li>  SIP对话长度 </li><li> 对于各种类型的SIP请求，从发送请求到接收最终响应之间的时间间隔（请求响应时间，RRT） </li><li> 不同类型的SIP消息的消息重传次数（重传，RTR） </li></ul><br><p> 不仅这些参数的值很重要，而且这些参数的分布以及它们随时间的变化也很重要。 有关参数值随时间变化的信息可以预测VoIP网络中可能出现的问题。 该信息还可以用作各种机器学习算法（机器学习，ML）的数据源之一，这不仅使预测时间和其他因素成为可能，而且还可以预测参数的变化。 </p><br><p> 根据信号负载，SIP AS可以每天以文本格式生成高达数十GB的日志文件。 分析如此大量的文本文件是一项资源密集型任务。 作为一种可能的选择，可以使用各种Python工具进行此分析。 例如， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pandas</a>库提供了非常方便的工具来处理和分析各种数据，尤其是数据帧（DF）。 本文中使用的代码可<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处获得</a> 。 <br> 建议使用以下步骤来分析SIP AS日志文件： </p><br><ol><li> 打开日志文件进行读取。 如果SIP AS创建了多个日志文件，则应以创建它们的相同顺序打开它们。 </li><li> 逐行读取数据。 在处理单位为数十GB的文件时，这对于节省RAM是必要的 </li><li> 高亮显示位于特定字符序列之间的SIP消息-分隔符 </li><li> 创建词典列表。 每个字典又由一个时间戳（键）和一个列表形式的实际SIP消息（值）组成。 </li><li> 将此列表保存为磁盘或网络存储，例如泡菜文件。 此文件以后将用于创建各种DF。 </li><li> 从保存的泡菜文件创建DF，其中包含进一步分析（SIP DF）所需的信息 </li></ol><br><p> 在此特定情况下，将创建一个SIP DF，其中包含以下列： </p><br><ul><li> 时间戳-SIP AS添加的时间戳 </li><li> 通话ID-SIP对话的通话ID </li><li> CSeq_num，CSeq_meth-来自“ CSeq” SIP标头的数据 </li><li> 方向-已接收（Rx &lt;-）或已发送（Tx-&gt;）的消息，添加了SIP AS </li><li>  SIP方法-SIP请求行中的SIP方法 </li><li>  Src Dst IP-发送或接收消息的IP地址 </li></ul><br><p><img src="https://habrastorage.org/webt/9e/pq/x4/9epqx4i7nfowaxkmfuji7cqusau.png" alt="图片"></p><br><p> 图  1.从大约3 GB的泡菜文件中获得的SIP DF的参数 </p><br><p><img src="https://habrastorage.org/webt/mm/xg/fs/mmxgfsyxywnoeszied6n7tiyc6g.png" alt="图片"></p><br><p> 图  2. SIP DF的内容 </p><br><p> 具有类似的SIP DF，您可以评估信令VoIP网络的各种参数。 下面的所有示例均来自有效的VoIP网络。 可以提供有关指定网络的任何信息的IP地址和其他数据已更改。 </p><br><h4 id="1-dlina-sip-dialoga">  1. SIP对话的时间 </h4><br><p><img src="https://habrastorage.org/webt/tg/fp/g2/tgfpg2yil79lpysldretfmpwg6g.png" alt="图片"><br><img src="https://habrastorage.org/webt/ae/fy/i2/aefyi2ndnytapmictjqm0ifart0.png" alt="图片"><br> 图  3. DF和SIP对话框长度 </p><br><p> 对于长时间的SIP对话，您可以通过Call-ID值找到呼叫，然后通过文本日志来分析此呼叫的情况。 尽管SIP对话的长度为数十到数百个消息的呼叫数量相对较少，但必须调查这些呼叫的情形。 对此类呼叫的研究揭示了长SIP对话的以下来源： </p><br><ul><li> 建立语音会话后，传输数十个具有特定结构的组，其中包含DTMF字符。 这是一种语音呼叫场景，在此场景中将在主叫用户和被叫用户之间进行身份验证，授权和信息交换。 </li><li> 在视频通话中记录了非常多的完整帧内请求（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">FIR</a> ）请求。 这尤其表示在视频通话期间电话软件出现问题或RTP数据包丢失。 </li></ul><br><p> 由于VoIP设备故障，试图通过IVR菜单选择PIN码（发送大量DTMF序列），还会出现长的SIP对话框。 在任何情况下，都有必要监视长SIP会话的数量，因为随着此类对话框数量的增加，可能会在VoIP网络的各个元素上出现额外的无用信号负载。 </p><br><h4 id="2-rrt">  2. RRT </h4><br><p> 它是针对接收和发送的INFO和INVITE请求分别计算的。 请记住，在处理大量呼叫时，可能会为不同的对话框出现相同的CSeq值。 可以假设RRT值的分配对于所发送的请求应该大致相同，由于INFO和INVITE请求的大小和内容不同，因此，绝对值应该有所不同，结果是网络元素对这些请求的处理时间不同。 </p><br><p><img src="https://habrastorage.org/webt/rd/d3/2q/rdd32qczrh2glgsxgxhqsx0g9ia.png" alt="图片"><br> 图  3. SIP AS收到的INFO请求的RRT <br> 在这种情况下，RRT值的增加表明虚拟化可能存在问题，这会增加SIP AS的负载。  Call-ID和CSeq_num允许您检查每种情况的RRT值。 </p><br><p><img src="https://habrastorage.org/webt/ht/a0/yw/hta0ywhl6nfznqymdgzl4eo7_fc.png" alt="图片"><br> 图  4. SIP AS发送的INFO请求的RRT。 图上的RRT限制为500毫秒，这是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SIP T1</a>计时器的默认值。 </p><br><p><img src="https://habrastorage.org/webt/kn/d3/wf/knd3wfmcqfmwij1wk4jgqlmax24.png" alt="图片"><br> 图  5. SIP AS发送的INVITE请求的RRT。 正如预期的那样，分布与INFO查询大致相同。 </p><br><h4 id="3-rtr">  3. RTR </h4><br><p> 表征VoIP信令网络状态的重要参数。 </p><br><p><img src="https://habrastorage.org/webt/yl/v3/h5/ylv3h5eqljf3prx1p9oqogs4fr0.png" alt="图片"><br> 图  6.分别重发INFO和INVITE请求的百分比。 考虑了发生一次或多次的RTR。 </p><br><p> 除了描述的示例外，还可以使用DF获得其他数据，例如： </p><br><ul><li> 为传出消息纠正SIP AS负载平衡。 为此，您需要使用groupby（）计算发送到不同IP地址（SrcDst IP）的已发送消息（Tx）的数量Count（）-与retransmits_counter_tx（）函数类似。 邮件数量差异超过15-20％表示负载分配不正确 </li><li> 呼叫转移失败的次数。 为此，您可以创建一个单独的DF，其中仅包含REFER对话框，以及这些对话框的消息中必要的标题和字段。 </li><li> 参数对时间的依赖性。 如果您收集了一个参数（例如RRT）在几个月内的平均值，则可以根据数据构建时间序列（时间序列，TS）。 使用各种库进行TS分析，例如statsmodels，您可以确定趋势，季节性和其他TS参数。 来自此预测的数据可用于调整VoIP网络的体系结构。 </li></ul><br><h4 id="zaklyuchenie"> 结论 </h4><br><p>  SIP AS文本日志文件是有关VoIP网络当前状态的重要信息来源。 另外，在对该信息进行适当处理之后获得的数据可以用于预测VoIP网络的状态，特别是使用ML方法。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN440458/">https://habr.com/ru/post/zh-CN440458/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN440444/index.html">基于队列的系统</a></li>
<li><a href="../zh-CN440446/index.html">TDMS公平工作流程网络研讨会系列</a></li>
<li><a href="../zh-CN440448/index.html">故事结束了无家可归的程序员</a></li>
<li><a href="../zh-CN440450/index.html">有卢布可以进入，但没有出路：第三方文件如何进入区块链以及该怎么做</a></li>
<li><a href="../zh-CN440454/index.html">保罗·格雷厄姆（Paul Graham）：我从黑客新闻中学到的东西</a></li>
<li><a href="../zh-CN440460/index.html">七个Mount and Blade修改器如何创建游戏工作室</a></li>
<li><a href="../zh-CN440462/index.html">2019年不可错过的7大内容营销策略</a></li>
<li><a href="../zh-CN440464/index.html">在.NET Core中使用Digital Ocean Managed Databases服务</a></li>
<li><a href="../zh-CN440466/index.html">Web UART遥控器</a></li>
<li><a href="../zh-CN440468/index.html">全天候运行2倍，更快10倍-都是为了人类</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>