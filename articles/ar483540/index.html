<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐พ ใฐ๏ธ ๐ฉ ChaiScript - ูุบุฉ ุงูุจุฑูุฌุฉ ุงููุตูุฉ ูู C ++ โ๏ธ ๐ธ โ๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุนูุฏูุง ุชููู ููุงู ุญุงุฌุฉ ูุชุถููู ูุบุฉ ุจุฑูุฌุฉ ูู ูุดุฑูุน C ++ ุ ูุฅู ุฃูู ุดูุก ูุชุฐูุฑู ูุนุธู ุงููุงุณ ูู Lua. ูู ูุฐู ุงูููุงูุฉ ูู ุชููู ูุฐูู ุ ุณุฃุชุญุฏุซ ุนู ูุบุฉ ุฃุฎุฑู ุ ูุง ุชูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ChaiScript - ูุบุฉ ุงูุจุฑูุฌุฉ ุงููุตูุฉ ูู C ++</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483540/" style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชููู ููุงู ุญุงุฌุฉ ูุชุถููู ูุบุฉ ุจุฑูุฌุฉ ูู ูุดุฑูุน C ++ ุ ูุฅู ุฃูู ุดูุก ูุชุฐูุฑู ูุนุธู ุงููุงุณ ูู Lua.  ูู ูุฐู ุงูููุงูุฉ ูู ุชููู ูุฐูู ุ ุณุฃุชุญุฏุซ ุนู ูุบุฉ ุฃุฎุฑู ุ ูุง ุชูู ููุงุกูุฉ ูุณูููุฉ ุชุนูู ูุบุฉ ุชุณูู ChaiScript. <br><br><img src="https://habrastorage.org/webt/zh/vl/py/zhvlpyg_87wuf7gg0alk-s7qeyo.png" alt="ุตูุฑุฉ"><br><a name="habracut"></a><br><h4 style=";text-align:right;direction:rtl">  ููุฏูุฉ ูุตูุฑุฉ </h4><br>  ุฃูุง ููุณู ุนุซุฑุช ุนูู ChaiScript ุนู ุทุฑูู ุงูุตุฏูุฉ ุนูุฏูุง ุดุงูุฏุช <a href="https://youtu.be/uzF4u9KgUWI">ูุงุญุฏุฉ ูู ูุญุงุถุฑุงุช</a> ุฌุงูุณูู ุชูุฑูุฑ ุ ูุงุญุฏุฉ ูู ุงููุจุฏุนูู ูู ุงููุบุฉ.  ููุฏ ุงูุชูุช ุจู ุ ููู ุชูู ุงููุญุธุฉ ุนูุฏูุง ูุงู ูู ุงูุถุฑูุฑู ุงุฎุชูุงุฑ ูุบุฉ ุจุฑูุฌุฉ ูู ุงููุดุฑูุน ุ ูุฑุฑุช - ููุงุฐุง ูุง ุฃุฌุฑุจ ChaiScriptุ  ุงููุชูุฌุฉ ูุงุฌุฃุชูู ุจุณุฑูุฑ (ุณุชุชู ูุชุงุจุฉ ุชุฌุฑุจุชู ุงูุดุฎุตูุฉ ุจุงููุฑุจ ูู ููุงูุฉ ุงูููุงู) ุ ููุน ุฐูู ุ ุจุบุถ ุงููุธุฑ ุนู ูุฏู ุบุฑุงุจุฉ ุงูุฃูุฑ ุ ูู ููู ููุงู ููุงู ูุงุญุฏ ูู ุงููุญูุฑ ุงูุฐู ุฐูุฑ ูุฐู ุงููุบุฉ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ููุฑุฑุช ุฐูู ุณูููู ูู ุงูุฌููู ุฃู ุชูุชุจ ุนูู.  ุจุงูุทุจุน ุ ุชุญุชูู ุงููุบุฉ ุนูู <a href="">ูุซุงุฆู</a> ููููุน <a href="http://chaiscript.com/">ุฑุณูู</a> ุ ูููู ูู ููุฑุฃูุง ุงูุฌููุน ูู ุงูููุงุญุธุงุช ุ ููููู ุชูุณูู ุงูููุงู ุฃูุฑุจ ุฅูู ุงูุนุฏูุฏ (ุจูุง ูู ุฐูู ุฃูุง). <br><br>  ุฃููุงู ุ ุณูุชุญุฏุซ ุนู ุจูุงุก ุงูุฌููุฉ ููุบุฉ ูุฌููุน ููุฒุงุชูุง ุ ุซู ุญูู ููููุฉ ุชูููุฐูุง ูู ูุดุฑูุน C ++ ุงูุฎุงุต ุจู ุ ููู ุงูููุงูุฉ ุณุฃุชุญุฏุซ ููููุงู ุนู ุชุฌุฑุจุชู.  ุฅุฐุง ูุงู ุฌุฒุก ููู ุบูุฑ ููุชู ุ ุฃู ููุช ุชุฑุบุจ ูู ูุฑุงุกุฉ ุงูููุงู ุจุชุฑุชูุจ ูุฎุชูู ุ ูููููู ุงุณุชุฎุฏุงู ุฌุฏูู ุงููุญุชููุงุช: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://habr.com/ru/post/483540/">ุจูุงุก ุงูุฌููุฉ ChaiScript</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://habr.com/ru/post/483540/">ุงูุชูููุฐ ูู C ++</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://habr.com/ru/post/483540/">ุชุฌุฑุจุฉ ุดุฎุตูุฉ</a> </li></ul><br><a name="syntax"></a><br><h2 style=";text-align:right;direction:rtl">  ุจูุงุก ุงููุบุฉ </h2><br>  ูุดุจู ChaiScript C ++ ู JS ูู ุจูุงุกู.  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุฅูู ุ ูุซู ุงูุบุงูุจูุฉ ุงูุนุธูู ูู ูุบุงุช ุงูุจุฑูุฌุฉ ุงููุตูุฉ ุ ูุชู ูุชุงุจุชู ุฏููุงูููููุง ุ ุนูู ุนูุณ ุฌุงูุง ุณูุฑูุจุช ุ ูุฅูู ูุญุชูู ุนูู ูุชุงุจุฉ ุตุงุฑูุฉ (ุฑูู <code>1 + "2"</code> ).  ููุงู ุฃูุถูุง ุฃุฏุงุฉ ุชุฌููุน ูุฌูุนุฉ ููููุงูุฉ ูุถูููุฉ ุ ูุงููุบุฉ ูุงุจูุฉ ููุชูุณูุฑ ุชูุงููุง ุ ููุง ูุณูุญ ูู ุจุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุณุทุฑูุง ุชูู ุงูุขุฎุฑ ุ ุฏูู ุชุฌููุน ูู ุงูุฑูุฒ ุงูุจุฑูุฏู.  ุฅูู ูุฏุนู ุงูุงุณุชุซูุงุกุงุช (ุนูุงูุฉ ุนูู ุฐูู ุ ุงูููุตู ุ ููุง ูุณูุญ ูู ุจุงููุจุถ ุนูููู ุฏุงุฎู ุงููุต ููู C ++) ุ ูุธุงุฆู lambda ุ ุงูุชุญููู ุงูุฒุงุฆุฏ ูููุดุบู.  ููุณุช ุญุณุงุณุฉ ูููุณุงูุงุช ุ ููุง ูุชูุญ ูู ุงููุชุงุจุฉ ูุณุทุฑ ููุฑุฏ ูู ุฎูุงู ูุงุตูุฉ ููููุทุฉ ุ ุฃู ุจุฃุณููุจ python ุ ุชูุตู ุจูู ุงูุชุนุจูุฑุงุช ุจุณุทุฑ ุฌุฏูุฏ. <br><br><h4 style=";text-align:right;direction:rtl">  ุฃููุงุน ุจุฏุงุฆูุฉ </h4><br>  ูููู ChaiScript ุงูุชุฑุงุถููุง ุจุชุฎุฒูู ูุชุบูุฑุงุช ุนุฏุฏ ุตุญูุญ ูุซู int ุ ููุงูุนูุฉ ูุฒุฏูุฌุฉ ุ ูุณูุงุณู ูุน std :: string.  ููุชู ุฐูู ูู ุงูููุงู ุงูุฃูู ูู ุฃุฌู ุถูุงู ุงูุชูุงูู ูุน ุฑูุฒ ุงูุงุชุตุงู.  ุชุญุชูู ุงููุบุฉ ุนูู ูุงุญูุงุช ููุฃุฑูุงู ุ ุญุชู ูุชููู ูู ุงูุฅุดุงุฑุฉ ุจูุถูุญ ุฅูู ููุน ุงููุชุบูุฑ ูุฏููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*   chaiscript    js    ,  var / auto `;`      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myInt = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-comment"><span class="hljs-comment">// int var myLongLong = 1ll // long long int var myFloating = 3.3 // double var myBoolean = false // bool var myString = "hello world!\n" // std::string</span></span></code> </pre><br>  ูุง ูุนูู ุชุบููุฑ ููุน ุงููุชุบูุฑุงุช ููุท ุ ุนูู ุงูุฃุฑุฌุญ ุณุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุนุงูู ุงูุชุดุบูู ุงูุฎุงุต ุจู `=` ููุฐู ุงูุฃููุงุน ุ ูุฅูุง ูุฅูู ุชุฎุงุทุฑ ุฅูุง ุจุฅููุงุก ุงุณุชุซูุงุก (ุณูุชุญุฏุซ ุนู ูุฐุง ูุงุญููุง) ุฃู ุถุญูุฉ ุงูุชูุฑูุจ ุ ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> integer = <span class="hljs-number"><span class="hljs-number">3</span></span> integer = <span class="hljs-number"><span class="hljs-number">5.433</span></span> print(integer) <span class="hljs-comment"><span class="hljs-comment">//  5    double    int! integer = true //   -   `=`  (int, bool)</span></span></code> </pre><br>  ููุน ุฐูู ุ ููููู ุงูุชุตุฑูุญ ุนู ูุชุบูุฑ ุฏูู ุชุฎุตูุต ูููุฉ ูู ุ ููู ูุฐู ุงูุญุงูุฉ ุณูู ูุญุชูู ุนูู ููุน ุบูุฑ ูุนุฑู ุญุชู ูุชู ุชุนููู ูููุฉ ูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุญุงููุงุช ูุถููุฉ </h4><br>  ุชุญุชูู ุงููุบุฉ ุนูู ุญุงููุชูู - Vector ู Map.  ุฅููู ูุนูููู ุจุดูู ูุดุงุจู ููุธุฑุงุฆูู ูู C ++ (std :: vector ู std :: map ุ ุนูู ุงูุชูุงูู) ุ ููููู ูุง ูุญุชุงุฌูู ุฅูู ููุน ุ ูุฃูู ูููููู ุชุฎุฒูู ุฃู.  ูููู ุฅุฌุฑุงุก ุงูููุฑุณุฉ ูุงููุนุชุงุฏ ุจุงุณุชุฎุฏุงู ints ุ ููู ุงูุฎุฑูุทุฉ ุชุชุทูุจ ููุชุงุญูุง ุจุณูุณูุฉ.  ุฃุถุงู ุงููุคูููู ุฃูุถูุง ุฃูู ูุณุชูุญู ุจุดูู ูุงุถุญ ูู ุจูุซูู ุ ุงููุฏุฑุฉ ุนูู ุฅุนูุงู ุงูุญุงููุงุช ุจุณุฑุนุฉ ูู ุงูููุฏ ุจุงุณุชุฎุฏุงู ุงูุตูุบุฉ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> v = [ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>u, <span class="hljs-number"><span class="hljs-number">4</span></span>ll, <span class="hljs-string"><span class="hljs-string">"16"</span></span>, <span class="hljs-string"><span class="hljs-string">`+`</span></span> ] <span class="hljs-comment"><span class="hljs-comment">//      var m = [ "key1" : 1, "key2": "Bob" ]; //    - var M = Map() //    var V = Vector() //    //        C++ : v.push_back(123) //    ,     v.push_back_ref(m); // m -   //      m["key"] = 3 //       (reference assignment): m["key"] := m //      </span></span></code> </pre><br>  ุชูุฑูุฑ ูุงุชุงู ุงููุฆุชุงู ุจุดูู ูุงูู ุชูุฑูุจูุง ูุธุฑุงุฆููุง ูู C ++ ุ ุจุงุณุชุซูุงุก ุงูุชูุฑุงุฑุงุช ุ ูุฃูู ุจุฏูุงู ูู ุฐูู ุชูุฌุฏ ูุตูู ุฎุงุตุฉ Range ู Const_Range.  ุจุงูููุงุณุจุฉ ุ ูุชู ุชูุฑูุฑ ุฌููุน ุงูุญุงููุงุช ุจุงูุฑุฌูุน ุฅูููุง ุญุชู ูู ููุช ุชุณุชุฎุฏู ุงููุงุฌุจ ุฎูุงู = ุ ููู ุฃูุฑ ุบุฑูุจ ุฌุฏูุง ุจุงููุณุจุฉ ูู ุ ูุฃูู ุจุงููุณุจุฉ ูุฌููุน ุงูุฃููุงุน ุงูุฃุฎุฑู ุ ูุญุฏุซ ุงููุณุฎ ุญุณุจ ุงููููุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุจูุงุก ุงูุดุฑุทู </h4><br>  ุชูุฑูุจูุง ูุงูุฉ ูุตูุงุช ุงูุดุฑูุท ูุงูุฏูุฑุงุช ูููู ูุตููุง ูู ุฑูุฒ ูุซุงู ูุงุญุฏ ุญุฑูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-comment"><span class="hljs-comment">//  if-else if (a &gt; b) { print("a &gt; b") } else if (a == b){ print("a == b") } else { print("a &lt; b") } // switch -    if- //      //  break    ,    C++ var str = "hello" switch(str) { case("hi") { print("hi!"); break; } case("hello") { print("hello!" break; } case("bye") { print("bye-bye!") break; } default { print("what have you said?") } } var x = true //     ,       while (x) { print("x was true") x = false; } //    C.        ,    ,    ,    for (var i = 0; i &lt; 10; ++i) //   -,    { print(i); //  0 ... 9  10  } // ranged-for loop for(element : [1, 2, 3, 4, 5]) { puts(element) //   12345 } //  :   C++17 if-init statements: if(var x = get_value(); x &lt; 10) { print(x) // x     if }</span></span></code> </pre><br>  ุฃุนุชูุฏ ุฃู ุงูุฃุดุฎุงุต ุงููุทูุนูู ุนูู C ++ ูู ูุนุซุฑูุง ุนูู ุฃู ุดูุก ุฌุฏูุฏ.  ูุฐุง ููุณ ููุงุฌุฆูุง ุ ูุฃู ChaiScript ูุชู ูุถุนู ููุบุฉ ุณููุฉ "ููุชุนูู" ููุชุนูู ุ ูุจุงูุชุงูู ูุณุชุนูุฑ ุฌููุน ุงูุชุตูููุงุช ุงูููุงุณูููุฉ ุงููุนุฑููุฉ.  ูุฑุฑ ุงููุคูููู ุชุณููุท ุงูุถูุก ุญุชู ุนูู ูููุชูู ุฑุฆูุณูุชูู ูุฅุนูุงู ุงููุชุบูุฑุงุช - <code>var</code> ู <code>auto</code> ุ ูู ุญุงูุฉ ูุง ุฅุฐุง ููุช ุญููุง ุชุญุจ ุงูุฅูุฌุงุจูุงุช ุฐุงุช ุงูุณูุงุฑุงุช. <br><br><h4 style=";text-align:right;direction:rtl">  ุณูุงู ุงูุชูููุฐ </h4><br>  ChaiScript ูู ุณูุงู ูุญูู ูุนุงููู.  ูุชู ุชูููุฐ ุงูููุฏ ูู ุฃุนูู ุฅูู ุฃุณูู ูู ุณุทุฑ ุฅูู ุขุฎุฑ ุ ูููู ูููู ุฃุฎุฐู ูู ูุธุงุฆู ููุชู ุงุณุชุฏุนุงุคู ูุงุญููุง (ูููู ููุณ ูู ููุช ุณุงุจู!).  ุงููุชุบูุฑุงุช ุงููุนููุฉ ุฏุงุฎู ุงูุฏุงูุงุช ุฃู ุงูุดุฑูุท / ุงูุญููุงุช ุบูุฑ ูุฑุฆูุฉ ุงูุชุฑุงุถููุง ูู ุงูุฎุงุฑุฌ ุ ูููู ููููู ุชุบููุฑ ูุฐุง ุงูุณููู ุจุงุณุชุฎุฏุงู ุงููุนุฑู <code>global</code> ุจุฏูุงู ูู <code>var</code> .  ุชุฎุชูู ุงููุชุบูุฑุงุช ุงูุนุงูุฉ ุนู ุงููุชุบูุฑุงุช ุงูุนุงุฏูุฉ ุ ููู ุฃููุงู ูุฑุฆูุฉ ุฎุงุฑุฌ ุงูุณูุงู ุงููุญูู ุ ูุซุงููุงู ุ ูููู ุฅุนุงุฏุฉ ุงูุฅุนูุงู ุนููุง (ุฅุฐุง ูู ูุชู ุชุญุฏูุฏ ุงููููุฉ ุฃุซูุงุก ุฅุนุงุฏุฉ ุงูุฅุนูุงู ุ ูุณุชุธู ููุง ูู) <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     chaiscript def foo(x) { global G = 2 print(x) } foo(0) //  foo(x), G = 2 print(G) //  2 global G = 3 //  G = 3,   global -  !</span></span></code> </pre><br>  ุจุงูููุงุณุจุฉ ุ ุฅุฐุง ูุงู ูุฏูู ูุชุบูุฑ ุ ูุชุญุชุงุฌ ุฅูู ุงูุชุญูู ููุง ุฅุฐุง ูุงู ูุฏ ุชู ุชุนููู ูููุฉ ูู ุ ุงุณุชุฎุฏู <code>is_var_undef</code> ุงููุถููุฉ <code>is_var_undef</code> ุ ูุงูุชู ุชูุฑุฌุน ุฅูู ุงูุญุงูุฉ ุงูุญููููุฉ ุฅุฐุง ูุงู ุงููุชุบูุฑ ุบูุฑ ูุนุฑูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุณูุณูุฉ ุงูุงุณุชููุงุก </h4><br>  ูููู ูุถุน ุงููุงุฆูุงุช ุงูุฃุณุงุณูุฉ ุฃู ูุงุฆูุงุช ุงููุณุชุฎุฏู ุงูุชู ููุง ุทุฑููุฉ <code>to_string()</code> ูู ุณูุณูุฉ ุจุงุณุชุฎุฏุงู ุจูุงุก ุฌููุฉ <code>${object}</code> .  ูุฐุง ูุชุฌูุจ ุชุณูุณูุงุช ุงูุณูุณูุฉ ุบูุฑ ุงูุถุฑูุฑูุฉ ููุจุฏู ุจุดูู ุนุงู ุฃูุซุฑ ููุงุกูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-comment"><span class="hljs-comment">//  sum of 3 + 4 = 7 print("sum of ${x} + ${y} = ${x + y}")</span></span></code> </pre><br>  ูุงูู ุ ุฎุฑูุทุฉ ุ MapPair ูุฌููุน ุงูุจุฏุงุฆูุฉ ุฃูุถุง ุฏุนู ูุฐู ุงูููุฒุฉ.  ูุชู ุนุฑุถ ุงููุชุฌู ุจุงูุชูุณูู <code>[o1, o2, ...]</code> ุ ุชุนููู ูู <code>[&lt;key1, val1&gt;, &lt;key2, val2&gt;, ...]</code> ุ ู MapPair: <code>&lt;key, val&gt;</code> . <br><br><h4 style=";text-align:right;direction:rtl">  ูุธุงุฆู ูุงููุฑูู ุงูุฏูููุฉ </h4><br>  ูุธุงุฆู ChaiScript ูู ูุงุฆูุงุช ูุซู ูู ุดูุก ุขุฎุฑ.  ูููู ุงูุชูุงุทูุง ุ ูุชุนููููุง ูููุชุบูุฑุงุช ุ ูุฌุนููุง ูุชุฏุงุฎูุฉ ูู ูุธุงุฆู ุฃุฎุฑู ุ ูุชูุฑูุฑูุง ููุณูุทุฉ.  ุจุงููุณุจุฉ ููู ุฃูุถูุง ุ ููููู ุชุญุฏูุฏ ููุน ููู ุงูุฅุฏุฎุงู (ููู ูุง ุชูุชูุฑ ุฅููู ุงููุบุงุช ุงูููุชูุจุฉ ุฏููุงูููููุง!) ุ ููุฐุง ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงูููุน ูุจู ุฅุนูุงู ูุนููุฉ ุงููุธููุฉ.  ุฅุฐุง ุชู ุชุญููู ุงููุนููุฉ ุ ุนูุฏ ุงูุงุชุตุงู ุ ุฅูู ุงููุนููุฉ ุงููุญุฏุฏุฉ ุ ูุณูุญุฏุซ ุงูุชุญููู ููููุง ูููุงุนุฏ C ++ ุ ูุฅูุง ูุชู ุทุฑุญ ุงุณุชุซูุงุก: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">def adder(int x, int y) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } def adder(bool x, bool y) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x || y } adder(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-comment"><span class="hljs-comment">// ,  3 adder(1.22, -3.7) // ,  1 + (-3) = 2 adder(true, true) // ,  true adder(true, 3) // ,    adder(bool, int)</span></span></code> </pre><br>  ูููู ุฃูุถูุง ุถุจุท ูุธุงุฆู ุงููุบุฉ ุนูู ุดุฑูุท ุงูุงุชุตุงู (ุญุงุฑุณ ุงูููุงููุฉ).  ุฅุฐุง ูู ูุชู ุงุญุชุฑุงููุง ุ ูุชู ุทุฑุญ ุงุณุชุซูุงุก ุ ูุฅูุง ูุชู ุฅุฌุฑุงุก ููุงููุฉ.  ูุฃูุงุญุธ ุฃูุถูุง ุฃูู ุฅุฐุง ูู ููู ูููุธููุฉ ุจูุงู ุฅุฑุฌุงุน ูู ุงูููุงูุฉ ุ ูุณูุชู ุฅุฑุฌุงุน ุงูุชุนุจูุฑ ุงูุฃุฎูุฑ.  ูุฑูุญุฉ ููุบุงูุฉ ููุฃุนูุงู ุงูุฑูุชูููุฉ ุงูุตุบูุฑุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">def div(x, y) : y != <span class="hljs-number"><span class="hljs-number">0</span></span> { x / y } <span class="hljs-comment"><span class="hljs-comment">//  `y`    -    `x`  `y` print(div(2, 0.5)) //  4.0 print(div(2, 0)) // , `y`  0!</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุงููุฆุงุช ู Dynamic_Object </h4><br>  ูุญุชูู ChaiScript ุนูู ุฃุณุงุณูุงุช OOP ุ ููู ุนูุงูุฉ ุฒุงุฆุฏ ูุญุฏุฏุฉ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ูุนุงูุฌุฉ ูุงุฆูุงุช ูุนูุฏุฉ.  ุชุญุชูู ุงููุบุฉ ุนูู ููุน ุฎุงุต - Dynamic_Object.  ูู ุงููุงูุน ุ ูู ูุซููุงุช ุงููุฆุงุช ููุณุงุญุงุช ุงูุฃุณูุงุก ูู Dynamic_Object ุชูุงููุง ุฐุงุช ุฎุตุงุฆุต ูุญุฏุฏุฉ ูุณุจููุง.  ูุณูุญ ูู ูุงุฆู ุฏููุงูููู ุจุฅุถุงูุฉ ุญููู ุฅููู ุฃุซูุงุก ุชูููุฐ ุงูุจุฑูุงูุฌ ุงููุตู ุ ุซู ุงููุตูู ุฅููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj = Dynamic_Object(); obj.x = <span class="hljs-number"><span class="hljs-number">3</span></span>; obj.f = fun(arg) { print(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x + arg); } <span class="hljs-comment"><span class="hljs-comment">//  obj   f (     `x` obj.f(-3); //  0</span></span></code> </pre><br>  ูุชู ุชุนุฑูู ุงูุทุจูุงุช ุจูู ุจุณุงุทุฉ.  ูููู ุชุนููููุง ุนูู ุงูุญููู ูุงูุฃุณุงููุจ ูุงูููุดุฆูู.  ูู <code>set_explicit(object, value)</code> ุงููุซูุฑุฉ ููุงูุชูุงู <code>set_explicit(object, value)</code> ุฎูุงู ุงูุฏุงูุฉ ุงููููุฒุฉ <code>set_explicit(object, value)</code> ููููู "ุฅุตูุงุญ" ุญููู ุงููุงุฆู ุนู ุทุฑูู ุญุธุฑ ุฅุถุงูุฉ ุฃุณุงููุจ ุฃู ุณูุงุช ุฌุฏูุฏุฉ ุจุนุฏ ุฅุนูุงู ุงููุฆุฉ (ูุชู ุฐูู ุนุงุฏุฉ ูู ุงููููุดุฆ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Widget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> id; <span class="hljs-comment"><span class="hljs-comment">//  id def Widget() { this.id= 0 } //    def Widget(id) { this.id = id } //   1  def get_id() { id } //   } var w = Widget(10) print(w.get_id()) //  10 (w.id) print(w.get_id) //   10,        set_explicit(w, true) //    wx = 3 //      Widget   x</span></span></code> </pre><br>  ููุทุฉ ูููุฉ - ูู ุงูุญูููุฉ ุ ุทุฑู ุงููุตู ูู ูุฌุฑุฏ ูุธุงุฆู ุงููุณูุทุฉ ุงูุฃููู ูู ูุงุฆู ูุฆุฉ ูุน ููุน ูุญุฏุฏ ุจูุถูุญ.  ูุฐูู ุ ููุงูุฆ ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ุฅุถุงูุฉ ุฃุณููุจ ุฅูู ูุฆุฉ ููุฌูุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">def set_id(Widget w, id) { w.id = id } w.set_id(<span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-comment"><span class="hljs-comment">// w.id = 9 set_id(w, 9) //  , w.id = 9</span></span></code> </pre><br>  ูููู ูุฃู ุดุฎุต ูุทูุน ุนูู C # ุฃู ูุญู ูุญู ูุง ูุดุจู ุทุฑููุฉ ุงูุชูุฏูุฏ ุ ูุณูููู ูุฑูุจูุง ูู ุงูุญูููุฉ.  ูุจุงูุชุงูู ุ ูู ุงููุบุฉ ุ ููููู ุฅุถุงูุฉ ูุธุงุฆู ุฌุฏูุฏุฉ ุญุชู ูููุฆุงุช ุงููุฏูุฌุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุณูุณูุฉ ุฃู int.  ููุฏู ุงููุคูููู ุฃูุถูุง ุทุฑููุฉ ุตุนุจุฉ ูุชุญููู ุงููุดุบููู ุงูุฒุงุฆุฏูู: ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุทููู ุฑูุฒ ุงููุดุบู ุจุงุณุชุฎุฏุงู ุนูุงูุฉ ุงูุชูุฏุฉ (`) ููุง ูู ุงููุซุงู ุฃุฏูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   +     Widget def `+`(Widget w1, Widget w2) { print("merging two widgets!") } var widget1 = Widget() var widget2 = Widget() widget1 + widget2 //      //        : var plus = `+` print(plus(1, 7)) //  8</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุงููุทุงูุงุช </h4><br>  ุนูุฏ ุงูุญุฏูุซ ุนู ูุณุงุญุฉ ุงูุงุณู ูู ChaiScript ุ ูุฌุจ ุฃู ูุคุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฃู ูุฐู ุงููุฆุงุช ูู ุฃุณุงุณูุง ุฏุงุฆููุง ูู ุณูุงู ุนุงููู.  ููููู ุฅูุดุงุฆูุง ุจุงุณุชุฎุฏุงู ูุธููุฉ <code>namespace(name)</code> ุ ุซู ุฅุถุงูุฉ ุงููุธุงุฆู ูุงููุฆุงุช ุงููุงุฒูุฉ.  ุจุดูู ุงูุชุฑุงุถู ุ ูุง ุชูุฌุฏ ููุชุจุงุช ูู ุงููุบุฉ ุ ููุน ุฐูู ููููู ุชุซุจูุชูุง ุจุงุณุชุฎุฏุงู ุงูููุญูุงุช ุ ูุงูุชู ุณูุชุญุฏุซ ุนููุง ูุงุญููุง.  ุจุดูู ุนุงู ุ ูุฏ ุชุจุฏู ุชููุฆุฉ ูุณุงุญุฉ ุงูุงุณู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">namespace(<span class="hljs-string"><span class="hljs-string">"math"</span></span>) <span class="hljs-comment"><span class="hljs-comment">//    math //   math.square = fun(x) { x * x } math.hypot_squared= fun(x, y) { math.square(x) + math.square(y) } print(math.square(4)) //  16 print(math.hypot_squared(3, 4)) //  25</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุชุนุจูุฑุงุช ูุงูุฏุง ูุบูุฑูุง ูู ุงูููุฒุงุช </h4><br>  ุชุนุจูุฑุงุช Lambda ูู ChaiScript ุชุดุจู ูุง ูุนุฑูู ูู C ++.  ูุชู ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุฃุณุงุณูุฉ <b>ุงูููุชุนุฉ</b> ููู ุ ููู ุชุชุทูุจ ุฃูุถูุง ุชุญุฏูุฏ ุงููุชุบูุฑุงุช ุงูุชู ุชู ุงูุชูุงุทูุง ุจุดูู ุตุฑูุญ ุ ูููููุง ุชูุนู ุฐูู ุฏุงุฆููุง ุจุงูุฑุฌูุน ุฅูููุง.  ุชุญุชูู ุงููุบุฉ ุฃูุถูุง ุนูู ุฏุงูุฉ ุฑุจุท ุชุณูุญ ูู ุจุฑุจุท ุงูููู ุจูุธุงุฆู ุงููุนููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> func_object = fun(x) { x * x } func_object(<span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  81 var name = "John" var greet = fun[name]() { "Hello, " + name } print(greet()) //  Hello, John name = "Bob" print(greet()) //  Hello, Bob var message = bind(fun(msg, name) { msg + " from " + name }, _, "ChaiScript"); print(message("Hello")) //  Hello from ChaiScript</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุงุณุชุซูุงุกุงุช </h4><br>  ูุฏ ุชุญุฏุซ ุงุณุชุซูุงุกุงุช ุฃุซูุงุก ุชูููุฐ ุงูุจุฑูุงูุฌ ุงููุตู.  ูููู ุงุนุชุฑุงุถูุง ูู ChaiScript ููุณูุง (ูุงูุชู ุณููุงูุดูุง ููุง) ููู C ++.  ุจูุงุก ุงูุฌููุฉ ูุทุงุจู ุชูุงููุง ููุฅูุฌุงุจูุงุช ุ ุญุชู ููููู ุฑูู ุฑูู ุฃู ุณูุณูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(x + <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-comment"><span class="hljs-comment">// x   } catch (e) { print("Error during evaluation")) } //   C++   ChaiScript //   Vector -   std::vector,    std::exception      try { var vec = [1, 2] var val = vec[3] //     } catch (e) { print("index out of range: " + e.what()); // e.what    ChaiScript } //  atch   guard     ,    `:` try { throw(5.2) } catch(e) : is_type(e, "int") { print("Int: ${e}"); //   `e`  int } catch(e) : is_type(e, "double") { print("Double: ${e}"); //  `e`  double }</span></span></code> </pre><br>  ุจุทุฑููุฉ ุฌูุฏุฉ ุ ูุฌุจ ุนููู ุชุญุฏูุฏ ูุฆุฉ ุงูุงุณุชุซูุงุกุงุช ูุฑูููุง.  ุณูุชุญุฏุซ ุนู ููููุฉ ุงุนุชุฑุงุถูุง ูู C ++ ูู ุงููุณู ุงูุซุงูู.  ุจุงููุณุจุฉ ุฅูู ุงุณุชุซูุงุกุงุช ุงููุชุฑุฌููู ุงูููุฑููู ุ ูููู ChaiScript ุงุณุชุซูุงุกุงุชู ุ ูุซู eval_error ุ bad_boxed_cast ุ ุฅูุฎ. <br><br><h4 style=";text-align:right;direction:rtl">  ุซูุงุจุช ุงููุชุฑุฌู </h4><br>  ูุฏูุดุชู ุ ุชุญููุช ุงููุบุฉ ุฅูู ููุน ูู ูุญุฏุงุช ูุงูุฑู ุงููุชุฑุฌู - ููุงู 4 ูููุง ููุท ููููุง ุชุนูู ุนูู ุชุญุฏูุฏ ุงูุณูุงู ูุชุณุชุฎุฏู ูู ุงูุบุงูุจ ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก: <br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><tbody><tr><td>  __LINE__ </td><td>  ุงูุณุทุฑ ุงูุญุงูู ุ ุฅุฐุง ูู ูุชู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ููู ุ ุซู "1" </td></tr><tr><td>  __FILE__ </td><td>  ุงูููู ุงูุญุงูู ุ ุฅุฐุง ูู ูุชู ุงุณุชุฏุนุงุก ุงูุฑูุฒ ูู ููู ุ ุซู "__EVAL__" </td></tr><tr><td>  __CLASS__ </td><td>  ุงููุฆุฉ ุงูุญุงููุฉ ุฃู "NOT_IN_CLASS" </td></tr><tr><td>  __FUNC__ </td><td>  ุงููุธููุฉ ุงูุญุงููุฉ ุฃู "NOT_IN_FUNCTION" </td></tr></tbody></table></div><br><h4 style=";text-align:right;direction:rtl">  ุฎุทุฃ ุงูููุงุกูุฉ </h4><br>  ุฅุฐุง ูู ูุชู ุงูุฅุนูุงู ุนู ุงููุธููุฉ ุงูุชู ุชุชุตู ุจูุง ุ ูุณูุชู ุทุฑุญ ุงุณุชุซูุงุก.  ุฅุฐุง ูุงู ูุฐุง ุบูุฑ ููุจูู ุจุงููุณุจุฉ ูู ุ ููููู ุชุญุฏูุฏ ูุธููุฉ ุฎุงุตุฉ - <code>method_missing(object, func_name, params)</code> ุ ูุงูุชู ุณูุชู ุงุณุชุฏุนุงุคูุง ุจุงุณุชุฎุฏุงู ุงููุณูุทุงุช ุงูููุงุจูุฉ ูู ุญุงูุฉ ูุฌูุฏ ุฎุทุฃ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">def method_missing(Widget w, string name, Vector v) { print(<span class="hljs-string"><span class="hljs-string">"widget method ${name} with params {v} was not found"</span></span>) } w = Widget() w.invoke_error(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  widget method invoke_error with params [1, 2, 3] was not found</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ูุธุงุฆู ูุฏูุฌุฉ </h4><br>  ูุญุฏุฏ ChaiScript ุงูุนุฏูุฏ ูู ุงููุธุงุฆู ุงููุฏูุฌุฉ ุ ููู ุงูููุงูุฉ ุฃูุฏ ุงูุชุญุฏุซ ุนู ุงููุธุงุฆู ุงููููุฏุฉ ุจุดูู ุฎุงุต.  ูู ุจูููุง: <code>eval(str)</code> ุ <code>eval_file(filename)</code> ุ <code>to_json(object)</code> ุ <code>from_json(str)</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(<span class="hljs-string"><span class="hljs-string">"x * y"</span></span>) <span class="hljs-comment"><span class="hljs-comment">// res = 15,  eval     //     : //  eval_file eval_file("source.chai") //   use,  ,         use("source.chai") // to_json    Map    var w = Widget(0) var j = to_json(w) // j = "{ "id" : 0 }" // from_json    Map ( ,   ) var m = from_json(" { "x": 0, "y": 3, "z": 2 }") print(m) //  Map  [&lt;x, 0&gt;, &lt;y, 3&gt;, &lt;z, 2&gt;]</span></span></code> </pre><br><a name="cppchai"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุชูููุฐ ูู C ++ </h2><br><h4 style=";text-align:right;direction:rtl">  ุชุฑููุจ </h4><br>  ChaiScript ูู ููุชุจุฉ ุฑุฃุณ - ููุท C ++ ูุงูุจ.  ููููุง ูุฐูู ุ ุณุชุญุชุงุฌ ููุท ููุชุซุจูุช ูุฅูุดุงุก <a href="https://github.com/ChaiScript/ChaiScript">ูุณุชูุฏุน</a> ูููุณุฎ ุฃู ูุถุน ูู ุงููููุงุช ูู <a href="https://github.com/ChaiScript/ChaiScript/tree/develop/include/chaiscript">ูุฐุง ุงููุฌูุฏ</a> ูู ูุดุฑูุนู.  ูุธุฑูุง ููุงุนุชูุงุฏ ุนูู IDE ุ ูุชู ุฅุฌุฑุงุก ูู ุฐูู ุจุทุฑููุฉ ูุฎุชููุฉ ููุฏ ุชู ูุตูู ุจุงูุชูุตูู ูู ุงูููุชุฏูุงุช ููุชุฑุฉ ุทูููุฉ ุ ุซู ุณููุชุฑุถ ุฃูู ุชูููุช ูู ุชูุตูู ุงูููุชุจุฉ ุ ููุชู ุชุถููู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุน: <code>#include &lt;chaiscript/chaiscript.hpp&gt;</code> . <br><br><h4 style=";text-align:right;direction:rtl">  ุงุณุชุฏุนุงุก ุฑูุฒ C ++ ูุชุญููู ุงูุจุฑูุงูุฌ ุงููุตู </h4><br>  ุฃุตุบุฑ ูููุฐุฌ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุงุณุชุฎุฏุงู ChaiScript ููุง ูู ููุถุญ ุฃุฏูุงู.  ูุญุฏุฏ ูุธููุฉ ุจุณูุทุฉ ูู C ++ ุชุฃุฎุฐ std :: string ูุชูุฑุฌุน ุงูุณูุณูุฉ ุงููุนุฏูุฉ ุ ุซู ูุถูู ุฑุงุจุทูุง ุฅูููุง ูู ูุงุฆู ChaiScript ูุงุณุชุฏุนุงุฆู.  ูุฏ ูุณุชุบุฑู ุงูุชุฌููุน ููุชูุง ูุจูุฑูุง ุ ูููู ูุฐุง ูุฑุฌุน ูู ุงูููุงู ุงูุฃูู ุฅูู ุญูููุฉ ุฃู ุฅูุดุงุก ุนุฏุฏ ูุจูุฑ ูู ููุงูุจ ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ููุณ ุจุงูุฃูุฑ ุงูุณูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt; #include &lt;chaiscript/chaiscript.hpp&gt; std::string greet_name(const std::string&amp; name) { return "hello, " + name; } int main() { chaiscript::ChaiScript chai; //  chaiscript chai.add(chaiscript::fun(&amp;greet_name), "greet"); //    greet //  eval      chai.eval(R"( print(greet("John")); )"); }</span></span></span></span></code> </pre> <br>  ุฃุชููู ุฃู ุชููู ูุฏ ูุฌุญุช ูุฑุฃูุช ูุชูุฌุฉ ุงููุธููุฉ.  ุฃุฑูุฏ ุฃู ุฃุดูุฑ ุฅูู ูุงุฑู ุจุณูุท ูุงุญุฏ ุนูู ุงูููุฑ - ุฅุฐุง ุฃุนููุช ุฃู ูุงุฆู ChaiScript ุซุงุจุช ุ ูุฅูู ุชุญุตู ุนูู ุฎุทุฃ ููุช ุชุดุบูู ุบูุฑ ุณุงุฑุฉ.  ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃู ุงููุบุฉ ุชุฏุนู ุชุนุฏุฏ ุงูุนูููุงุช ุจุดูู ุงูุชุฑุงุถู ูุชุฎุฒูู ูุชุบูุฑุงุช ุงูุชุฏูู ุงููุญููุฉ ุงูุชู ูุชู ุงููุตูู ุฅูููุง ูู destructor ุงูุฎุงุต ุจู.  ููุน ุฐูู ุ ูุชู ุชุฏููุฑูุง ูุจู ุงุณุชุฏุนุงุก destructor ูููุซูู ุงูุซุงุจุช ุ ููุชูุฌุฉ ูุฐูู ุ ูุฏููุง ุฎุทุฃ ูู ุงููุตูู ุฃู ุฎุทุฃ ูู ุชุฌุฒุฆุฉ ุงูุฎุทุฃ.  ุงุณุชูุงุฏูุง ุฅูู <a href="https://github.com/ChaiScript/ChaiScript/issues/338">ุงููุดููุฉ ุนูู github</a> ุ ุณูููู ุงูุญู ุงูุฃุจุณุท ูู ูุถุน <b><code>#define CHAISCRIPT_NO_THREADS</code></b> ูู ุฅุนุฏุงุฏุงุช ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ุฃู ูุจู ุชุถููู ููู ุงูููุชุจุฉ ุ ูุจุงูุชุงูู ุชุนุทูู ุชุนุฏุฏ ุงูุนูููุงุช.  ููุง ุฃููููุง ุ ูู ููู ูู ุงููููู ุฅุตูุงุญ ูุฐุง ุงูุฎุทุฃ. <br><br>  ุงูุขู ุณูู ูุญูู ุจุงูุชูุตูู ููู ูุญุฏุซ ุงูุชูุงุนู ุจูู C ++ ู ChaiScript.  ุชุนุฑูู ุงูููุชุจุฉ <code>fun</code> ุฏุงูุฉ ุงููุงูุจ ุงูุฎุงุตุฉ ุ ูุงูุชู ูููู ุฃู ุชุฃุฎุฐ ูุคุดุฑูุง ุฅูู ุฏุงูุฉ ุฃู ุนุงูู ุฃู ูุคุดุฑ ุฅูู ูุชุบูุฑ ูุฆุฉ ุ ุซู ุชูุฑุฌุน ูุงุฆููุง ุฎุงุตูุง ูุฎุฒู ุงูุญุงูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฏุนููุง ูุญุฏุฏ ูุฆุฉ ุงููุทุนุฉ ูู ุฑูุฒ C ++ ููุญุงูู ุฑุจุทูุง ุจู ChaiScript ุจุทุฑู ูุฎุชููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Widget</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Widget(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id) : Id(id) { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Id; } }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Widget&amp; w)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"widget #"</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::to_string(w.GetId()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ chaiscript::ChaiScript chai; <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">//  Widget  C++  chai.add(chaiscript::fun([&amp;w] { return w; }), "get_widget"); //         chai.add(chaiscript::fun(ToString), "to_string"); //   chai.add(chaiscript::fun(&amp;Widget::GetId), "get_id"); //   //    ,   Widget    GetId,    to_string,    chai.eval(R"( var w = get_widget() print(w.get_id) //  2 print(w) //  widget #2 )"); }</span></span></code> </pre><br>  ููุง ุชุฑูู ุ ูุนูู ChaiScript ุจูุฏูุก ุชุงู ูุน ูุฆุงุช C ++ ุบูุฑ ุงููุนุฑููุฉ ููุง ูููููู ุงุณุชุฏุนุงุก ุฃุณุงููุจูุง.  ุฅุฐุง ุงุฑุชูุจุช ุฎุทุฃ ูู ููุงู ูุง ูู ุงูููุฏ ุ ููู ุงููุฑุฌุญ ุฃู ูููู ุงูุจุฑูุงูุฌ ุงููุตู ุงุณุชุซูุงุกูุง ูู <code>error in function dispatch</code> ุ ููู ุฃูุฑ ุบูุฑ ููู ุนูู ุงูุฅุทูุงู.  ููุน ุฐูู ุ ูุง ูููู ุงุณุชูุฑุงุฏ ูุธุงุฆู ููุท ุ ุฏุนููุง ูุฑู ููููุฉ ุฅุถุงูุฉ ูุชุบูุฑ ุฅูู ุจุฑูุงูุฌ ูุตู ุจุงุณุชุฎุฏุงู ุงูููุชุจุฉ.  ููููุงู ุจุฐูู ุ ุญุฏุฏ ุงููููุฉ ุฃุตุนุจ ููููุงู - ูู ุจุงุณุชูุฑุงุฏ std :: vector &lt;Widget&gt;.  <code>chaiscript::var</code> ูุธููุฉ <code>chaiscript::var</code> ูุทุฑููุฉ <code>add_global</code> ูุฐุง.  ุณูุถูู ุฃูุถูุง ุญูู <code>Data</code> ุงูุนุงู ุฅูู ุนูุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฏููุง ููุนุฑูุฉ ููููุฉ ุงุณุชูุฑุงุฏ ุญูู ุงููุตู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Widget</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Data = <span class="hljs-number"><span class="hljs-number">0</span></span>; Widget(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id) <span class="hljs-keyword"><span class="hljs-keyword">noexcept</span></span> : Id(id) { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Id; } }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Widget&amp; w)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"widget #"</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::to_string(w.GetId()) + <span class="hljs-string"><span class="hljs-string">" with data: "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::to_string(w.Data); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ chaiscript::ChaiScript chai; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Widget&gt; W; <span class="hljs-comment"><span class="hljs-comment">//    Widget W.emplace_back(1); W.emplace_back(2); W.emplace_back(3); chai.add(chaiscript::fund(ToString), "to_string"); chai.add(chaiscript::fun(&amp;Widget::Data), "data"); //     //     ChaiScript chai.add_global(chaiscript::var(std::ref(W)), "widgets"); //     std::ref chai.add(chaiscript::fun(&amp;std::vector&lt;Widget&gt;::size), "size"); //   // .        using IndexFuncType = Widget&amp; (std::vector&lt;Widget&gt;::*)(const size_t); chai.add(chaiscript::fun(IndexFuncType(&amp;std::vector&lt;Widget&gt;::operator[])), "[]"); chai.eval(R"( for(var i = 0; i &lt; vec.size; ++i) { vec[i].data = i * 2; print(vec[i]) } )"); }</span></span></code> </pre><br>  ูุนุฑุถ ุงูุฑูุฒ ุฃุนูุงู: <b><code>widget #1 with data: 0</code> ุ <code>widget #2 with data: 2</code> ุ <code>widget #3 with data: 4</code></b> .  ุฃุถููุง ูุคุดุฑูุง ุฅูู ุญูู ุงููุตู ูู ChaiScript ุ ูุจูุง ุฃู ุงูุญูู ุฃุตุจุญ ููุนูุง ุจุฏุงุฆููุง ุ ูุฅููุง ูุบูุฑ ูููุชู.  ุฃูุถูุง ุ ุชูุช ุฅุถุงูุฉ ุนุฏุฉ ุทุฑู ููุนูู ูุน <code>std::vector</code> ุ ุจูุง ูู ุฐูู <code>operator[]</code> .  ูุนุฑู ุฃููุฆู ุงูุฐูู ูุนุฑููู STL ุฃู <code>std::vector</code> ุทุฑููุชุงู ููููุฑุณุฉ - ุฃุญุฏููุง ูุนูุฏ ุงุฑุชุจุงุท ุซุงุจุช ุ ูุงูุขุฎุฑ ุฑุงุจุท ุจุณูุท.  ููุฐุง ุงูุณุจุจ ุจุงููุณุจุฉ ูููุธุงุฆู ุงูุฒุงุฆุฏุฉ ุ ูุฌุจ ุฃู ุชุดูุฑ ุตุฑุงุญุฉ ุฅูู ููุนูุง - ูุฅูุง ูุฅู ุงูุบููุถ ููุดุฃ ุ ูุณูููู ุงููุชุฑุฌู ุจุฅููุงุก ุฎุทุฃ. <br><br>  ุชููุฑ ุงูููุชุจุฉ ุนุฏุฉ ุทุฑู ุฅุถุงููุฉ ูุฅุถุงูุฉ ูุงุฆูุงุช ุ ูููููุง ูููุง ูุชุทุงุจูุฉ ุชูุฑูุจูุง ุ ูุฐูู ูุง ุฃุฑู ููุทุฉ ุงููุธุฑ ูููุง ุจุงูุชูุตูู.  ูุชูููุญ ุตุบูุฑ ุ ุฅููู ุงูููุฏ ุฃุฏูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">chai.add(chaiscript::var(x), <span class="hljs-string"><span class="hljs-string">"x"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// x   ChaiScript chai.add(chaiscript::var(std::ref(x), "x"); //  ,    C++  ChaiScript auto shared_x = std::make_shared&lt;int&gt;(5); chai.add(chaiscript::var(shared_x), "x"); // shared_ptr      C++  ChaiScript chai.add(chaiscript::const_var(x), "x"); //   ChaiScript    chai.add_global_const(chaiscript::const_var(x), "x"); // global const . ,  x   chai.add_global(chaiscript::var(x), "x"); // global , .  x   chai.set_global(chaiscript::var(x), "x"); //   global ,    const</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุญุงููุงุช STL </h4><br>  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุชูุฑูุฑ ุญุงููุงุช STL ุงูุชู ุชุญุชูู ุนูู ุฃููุงุน <b>ุจุฏุงุฆูุฉ</b> ุฅูู ChaiScript ุ ููููู ุฅุถุงูุฉ ูุซูู ุญุงููุฉ ุญุงููุฉ ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฎุงุต ุจู ุจุญูุซ ูุง ุชููู ุจุงุณุชูุฑุงุฏ ุทุฑู ููู ููุน. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MyVector = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::pair&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;&gt;; MyVector V; V.emplace_back(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"John"</span></span>); V.emplace_back(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">"Bob"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    - vector  pair chai.add(chaiscript::bootstrap::standard_library::vector_type&lt;MyVector&gt;("MyVec")); chai.add(chaiscript::bootstrap::standard_library::pair_type&lt;MyVector::value_type&gt;("MyVecData")); chai.add(chaiscript::var(std::ref(V)), "vec"); chai.eval(R"( for(var i = 0; i &lt; vec.size; ++i) { print(to_string(vec[i].first) + " " + vec[i].second) } )");</span></span></code> </pre> <br>       ChaiScript,     .  ,        STL-,       .   c <code>std::vector&lt;Widget&gt;</code> ,  , ,   ChaiScript        <code>vector_type</code> ,    Widget  . <br><br><h4 style=";text-align:right;direction:rtl"> ++   ChaiScript </h4><br>            ChaiScript,      .  ,   .      Widget      WindowWidget,         ,       : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Widget</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Widget(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id) : Id(id) { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Id; } }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WindowWidget</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Widget { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::pair&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; Size; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: WindowWidget(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> height) : Widget(id), Size(width, height) { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetWidth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Size.first; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetHeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Size.second; } }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ chaiscript::ChaiScript chai; <span class="hljs-comment"><span class="hljs-comment">//   Widget    chai.add(chaiscript::user_type&lt;Widget&gt;(), "Widget"); chai.add(chaiscript::constructor&lt;Widget(int)&gt;(), "Widget"); //   WindowWidget    chai.add(chaiscript::user_type&lt;WindowWidget&gt;(), "WindowWidget"); chai.add(chaiscript::constructor&lt;WindowWidget(int, int, int)&gt;(), "WindowWidget"); // ,  Widget -    WindowWidget chai.add(chaiscript::base_class&lt;Widget, WindowWidget&gt;()); //   Widget  WindowWidget chai.add(chaiscript::fun(&amp;Widget::GetId), "get_id"); chai.add(chaiscript::fun(&amp;WindowWidget::GetWidth), "width"); chai.add(chaiscript::fun(&amp;WindowWidget::GetHeight), "height"); //  WindowWidget     chai.eval(R"( var window = WindowWidget(1, 800, 600) print("${window.width} * ${window.height}") print("widget.id is ${window.get_id}") )"); }</span></span></code> </pre><br>    ChaiScript  ,    C++  ,     .   -          (,      ),      ,          <code>std::vector&lt;Widget&gt;</code> . <br><br><h4 style=";text-align:right;direction:rtl">        </h4><br>              .     ChaiScript    ,   ,        : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; w.Data = <span class="hljs-number"><span class="hljs-number">4444</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  Widget w chai.add(chaiscript::fun(&amp;Widget::GetId, &amp;w), "widget_id"); chai.add(chaiscript::fun(&amp;Widget::Data, &amp;w), "widget_data"); chai.eval(R"( print(widget_id) print(widget_data) )");</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถูุง ุ ุนูุฏ ุชุตุฏูุฑ ูุฆุงุช "ููุชุจุฉ" ุฃูุซุฑ ูู C ++ ุฅูู ChaiScript (ุนูู ุณุจูู ุงููุซุงู ุ vec3 ุ ูุนูุฏุฉ ุ ูุตูููุฉ) ุ ุบุงูุจูุง ูุง ุชููู ุฅููุงููุฉ ุงูุชุญููู ุงูุถููู ูู ููุน ุฅูู ุขุฎุฑ ูุทููุจุฉ. ูู ChaiScript ุ ูุชู ุญู ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ุฅุถุงูุฉ </font></font><code>type_conversion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฑูุงูุฌ ูุตู ุฅูู ุงููุงุฆู. ุนูู ุณุจูู ุงููุซุงู ุ ุถุน ูู ุงูุงุนุชุจุงุฑ ุงููุฆุฉ ุงููุนูุฏุฉ ูุชุทุจูู ุชุญููู int ูุงููุถุงุนูุฉ ุฅูููุง ุฃุซูุงุก ุงูุฅุถุงูุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Complex</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Re, Im; Complex(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> re, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> im = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>) : Re(re), Im(im) { } }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ chaiscript::ChaiScript chai; <span class="hljs-comment"><span class="hljs-comment">//  Complex,   re, im,    `=` chai.add(chaiscript::user_type&lt;Complex&gt;(), "Complex"); chai.add(chaiscript::bootstrap::standard_library::assignable_type&lt;Complex&gt;("Complex")); chai.add(chaiscript::constructor&lt;Complex(float, float)&gt;(), "Complex"); chai.add(chaiscript::fun(&amp;Complex::Re), "re"); chai.add(chaiscript::fun(&amp;Complex::Im), "im"); //     double  int  Complex chai.add(chaiscript::type_conversion&lt;int, Complex&gt;()); chai.add(chaiscript::type_conversion&lt;double, Complex&gt;()); //     `+`    chai.eval(R"( def `+`(Complex c, x) { var res = Complex(0, 0) res.re = c.re + x.re res.im = c.im + x.im return res } var c = Complex(1, 2) c = c + 3 print("${c.re} + ${c.im}i") )"); // : `4 + 2i` }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ููุณ ูู ุงูุถุฑูุฑู ูุชุงุจุฉ ูุธููุฉ ุชุญููู ูู C ++ ููุณูุง ุ ูุจุนุฏ ุฐูู ููุท ุชุตุฏูุฑูุง ุฅูู ChaiScript. </font><font style="vertical-align: inherit;">ููููู ุฅุถุงูุฉ ุชุญูููุงุช ููุตู ุงููุธููุฉ ุงูุฌุฏูุฏุฉ ุจุงููุนู ูู ุฑูุฒ ุงูุจุฑูุงูุฌ ุงููุตู ููุณู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุชุญููู ููููุนูู ุบูุฑ ุจุฏููู ุ ููููู ุชูุฑูุฑ lambda ููุณูุทุฉ ุฅูู ุฏุงูุฉ </font></font><code>type_conversion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุณูู ูุทูู ุนููู ุนูุฏูุง ุงูุตุจ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงู ูุจุฏุฃ ููุงุซู ูุชุญููู Vector ุฃู Map ChaiScript ุฅูู ููุนู ุงููุฎุตุต. </font><font style="vertical-align: inherit;">ููุฐุง ุ </font></font><code>vector_conversion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชู </font><font style="vertical-align: inherit;">ุชุนุฑูููุง ูู ุงูููุชุจุฉ </font></font><code>map_conversion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุฑูุบ ChaiScript ุฅุฑุฌุงุน ุงูููู </font></font></h4><br>  <code>eval</code>  <code>eval_file</code>         <code>Boxed_Value</code> .         C++,        ,     <code>boxed_cast&lt;T&gt;</code> .     ,   ,    <code>bad_boxed_cast</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//       double d = chai.eval&lt;double&gt;("5.3 + 2.1"); //     Boxed_Value,     auto v = chai.eval("5.3 + 2.1"); double d = chai.boxed_cast&lt;double&gt;(v);</span></span></code> </pre><br>      ChaiScript    shared_ptr,            .      shared_ptr    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> x = chai.eval&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;&gt;(<span class="hljs-string"><span class="hljs-string">"var x = 3.2"</span></span>);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุดูุก ุงูุฑุฆูุณู ูู ุนุฏู ุงูุงุญุชูุงุธ ุจูุฑุฌุน ุฅูู ูููุฉ Shared_ptr ุงููุคุฌูุฉ ุ ูุฅูุง ูุฅูู ุชูุงุฌู ุฎุทุฑ ุงูุญุตูู ุนูู ุงูุชูุงู ุงููุตูู ุจุนุฏ ุญุฐู ุงููุชุบูุฑ ุฃุซูุงุก ุชุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ ุชููุงุฆููุง ูู ุงูุจุฑูุงูุฌ ุงููุตู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซู ุงููุชุบูุฑุงุช ุ ููููู ุงูุญุตูู ุนูู ูุธุงุฆู ูู ChaiScript ูู ุดูู ุนูุงูู ุชูุฌูู ูุนุจุฃุฉ ุชูุชูุท ุญุงูุฉ ูุงุฆู ChaiScript. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุณูู ูุณุชุฎุฏู ุงููุธููุฉ ุงูุชู ุชู ุชูููุฐูุง ุจุงููุนู ูููุฆุฉ Complex ูุญุงูู ุงุณุชุฎุฏุงููุง ูุงุณุชุฏุนุงุก ูุธููุฉ ูู ูุฑุญูุฉ ุชูููุฐ ุงูุจุฑูุงูุฌ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> printComplex = chai.eval&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(Complex)&gt;&gt;(<span class="hljs-string"><span class="hljs-string">R"( fun(Complex c) { print("${c.re} + ${c.im}i"); } )"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  ,   ,      C++ printComplex(Complex(2, 3)); //  chaiscript,  `2 + 3i`</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุซูุงุก ChaiScript ุงุตุทูุงุฏ </font></font></h4><br>        ,    .  <code>eval_error</code>    , <code>bad_boxed_cast</code> ,        <code>std::exception</code>   .        ,        ++: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyException</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::exception { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Data; MyException(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> data) : <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::exception(<span class="hljs-string"><span class="hljs-string">"MyException"</span></span>), Data(data) { } }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ chaiscript::ChaiScript chai; <span class="hljs-comment"><span class="hljs-comment">//      chaiscript chai.add(chaiscript::user_type&lt;MyException&gt;(), "MyException"); chai.add(chaiscript::constructor&lt;MyException(int)&gt;(), "MyException"); try { //          chai.eval("throw(MyException(11111))", chaiscript::exception_specification&lt;MyException, std::exception&gt;()); } catch (MyException&amp; e) { std::cerr &lt;&lt; e.Data; //   `11111` } catch (chaiscript::exception::eval_error&amp; e) { std::cerr &lt;&lt; e.pretty_print(); } catch(std::exception&amp; e) { std::cerr &lt;&lt; e.what(); } }</span></span></code> </pre><br>    ,       C++.   <code>pretty_print</code> ,  <code>eval_error</code>     ,    ,  ,  ,              . <br><br><h4 style=";text-align:right;direction:rtl">  ChaiScript </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ุจุดูู ุงูุชุฑุงุถู ุ ChaiScript ูุง ูููุฑ ูุธุงุฆู ุฅุถุงููุฉ ูู ุญูุซ ุงูููุชุจุงุช. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ููุชูุฑ ุฅูู ุงูุฏูุงู ุงูุฑูุงุถูุฉ ูุฌุฏุงูู ุงูุชุฌุฒุฆุฉ ููุนุธู ุงูุฎูุงุฑุฒููุงุช. </font><font style="vertical-align: inherit;">ููููู ุชูุฒูู ุจุนุถูุง ูู ุดูู ููุชุจุงุช ุงููุญุฏุงุช ุงูููุทูุฉ ูู ูุณุชูุฏุน </font></font><a href="https://github.com/ChaiScript/ChaiScript_Extras"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChaiScript Extras</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณูู </font><font style="vertical-align: inherit;">ุ ุซู ุงูุงุณุชูุฑุงุฏ ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฎุงุต ุจู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฎุฐ ููุชุจุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑูุงุถูุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุธููุฉ acos (x):</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;chaiscript/chaiscript.hpp&gt; #include &lt;chaiscript/extras/math.hpp&gt; int main() { chaiscript::ChaiScript chai; //   auto mathlib = chaiscript::extras::math::bootstrap(); chai.add(mathlib); std::cout &lt;&lt; chai.eval&lt;double&gt;("acos(0.5)"); // ~1.047 }</span></span></span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ูุชุงุจุฉ ููุชุจุชู ููุบุฉ ุซู ุงูุงุณุชูุฑุงุฏ. </font><font style="vertical-align: inherit;">ูุชู ุฐูู ุจูู ุจุณุงุทุฉ ุ ูุฐูู ุฃูุตุญู ุจูุฑุงุกุฉ ุงูุฑูุงุถูุงุช ููุชูุญุฉ ุงููุตุฏุฑ ุฃู ุฃู ูุตุฏุฑ ุขุฎุฑ ูู ุงููุณุชูุฏุน. </font><font style="vertical-align: inherit;">ูู ุญูุซ ุงููุจุฏุฃ ุ ูุฌุฒุก ูู ุงูุชูุงูู ูุน C ++ ุ ุฏุฑุณูุง ูู ุดูุก ุชูุฑูุจูุง ุ ูุฐูู ุฃุนุชูุฏ ุฃูู ูููู ุฅููุงู ุงููุณู ูู ูุฐุง ุงูุดุฃู.</font></font><br><a name="myexp"></a><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฌุฑุจุฉ ุดุฎุตูุฉ </font></font></h2><br>      3D-  OpenGL    ,          ,         .      <a href="https://github.com/MomoDeve/MSL"></a> , ,  , ยซ    ยป,      . <br><br>      ,  ChaiScript      ,         Lua.      ,        ,       :  ,         C++  C,      -  C-style . ,        ,     . <br><br>        ,         .            ImGui,     chaiscript.               ,   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//      3D-: // rotation CHAI_IMPORT(&amp;GLInstance::RotateX, rotate_x); CHAI_IMPORT(&amp;GLInstance::RotateY, rotate_y); CHAI_IMPORT(&amp;GLInstance::RotateZ, rotate_z); // scale CHAI_IMPORT((GLInstance&amp;(GLInstance::*)(float))&amp;GLInstance::Scale, scale); CHAI_IMPORT((GLInstance&amp;(GLInstance::*)(float, float, float))&amp;GLInstance::Scale, scale); // translation CHAI_IMPORT(&amp;GLInstance::Translate, translate); CHAI_IMPORT(&amp;GLInstance::TranslateX, translate_x); CHAI_IMPORT(&amp;GLInstance::TranslateY, translate_y); CHAI_IMPORT(&amp;GLInstance::TranslateZ, translate_z); // hide / show CHAI_IMPORT(&amp;GLInstance::Hide, hide); CHAI_IMPORT(&amp;GLInstance::Show, show); // getters CHAI_IMPORT(&amp;GLInstance::GetTranslation, translation); CHAI_IMPORT(&amp;GLInstance::GetRotation, rotation); CHAI_IMPORT(&amp;GLInstance::GetScale, scale);</span></span></code> </pre><br>       ,      -,     .        : <br><br><img src="https://habrastorage.org/webt/rl/bo/td/rlbotdpcfl4pdpbplwxfrvsk73i.png" alt="ุตูุฑุฉ"><br> <i>  chaiscript  ImGui:      </i> <br><br>     ,            . , Lua      ,       ,          (JIT     ),     ChaiScript    .      ,    ,      . <br><br>         .           C++ (  Lua   ),         ChaiScript    .         .    . <br><br><h4 style=";text-align:right;direction:rtl">  ุฑูุงุจุท ูููุฏุฉ </h4><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   ChaiScript: <a href="http://chaiscript.com/">chaiscript.com</a> </li><li style=";text-align:right;direction:rtl">      : <a href="">ChaiScript cheatsheet</a> </li><li style=";text-align:right;direction:rtl">  : <a href="https://codedocs.xyz/ChaiScript/ChaiScript/">codedocs.xyz/ChaiScript/ChaiScript</a> </li><li style=";text-align:right;direction:rtl">     ChaiScript: <a href="https://github.com/MomoDeve/MomoEngine">github.com/MomoDeve/MomoEngine</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar483540/">https://habr.com/ru/post/ar483540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar483528/index.html">ูุฌุจ ุฃู ุชุนุชูุฏ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช REST ุนูู ุงููุต ุงูุชุดุนุจู</a></li>
<li><a href="../ar483530/index.html">ููู ูุนููุง ูุนุจุฉ ูุชููุง. ููุงุฐุง ูููุงุฐุงุ</a></li>
<li><a href="../ar483532/index.html">ูุคุชูุฑ DefCon 27: ูุฑุงุก ุงูููุงููุณ ูุฅูุดุงุก ุงูุดุงุฑุงุช ุงูุฅููุชุฑูููุฉ ุงูุฌุฒุก 1</a></li>
<li><a href="../ar483536/index.html">ุชุงุฑูุฎ ุงููุนุงูุฌ ุงูุฏููู ูุงูููุจููุชุฑ ุงูุดุฎุตู: 1974 - 1980</a></li>
<li><a href="../ar483538/index.html">ูู ุจุชูุตูู ุดุงุดุฉ ER-TFT101-1 ุจุญุฌู 10 ุจูุตุงุช ุจู STM32F429 ุนุจุฑ FMC</a></li>
<li><a href="../ar483542/index.html">ูุถู ุงูุงุชุตุงูุงุช - ููุงุฏ ุญูู ุนูู ููุฏูู ุงูุฎุฏูุงุช</a></li>
<li><a href="../ar483544/index.html">ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุชุฏุญุถ ุงูุงูุชุฑุงุถ ุงูุฑุฆูุณู ููุทุงูุฉ ุงููุธููุฉ</a></li>
<li><a href="../ar483550/index.html">ุชุทููุฑ ุงูุฎุฏูุฉ ู IaaS: ูุฌููุนุฉ ูู ุงูุณุญุงุจุฉ ุ ูุชุฎุฒูู ุงูุจูุงูุงุช ุ ูุชุทูุฑ 1cloud</a></li>
<li><a href="../ar483552/index.html">MVVM ูุงุฎุชูุงุฑ ุงูุนูุงุตุฑ ูู ุงููุญูู</a></li>
<li><a href="../ar483554/index.html">ููุตุฉ ุงูุชูููููุฌูุง ุงูุฌุฏูุฏุฉ ูู 20s. ููุงุฐุง ูุง ุฃุชูู ูุน ุฒููุฑุจูุฑุฌ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>