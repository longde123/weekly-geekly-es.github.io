<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äç‚öïÔ∏è üöÑ üåé Nube privada para Internet de las cosas üìΩÔ∏è ü§≥üèª üë©üèø‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saludos, Habr! 

 Nosotros, el equipo de arquitectos de TI de IBM, que se dedica a la creaci√≥n y comercializaci√≥n de soluciones industriales para dive...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nube privada para Internet de las cosas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ibm/blog/426135/"><img src="https://habrastorage.org/webt/eg/uo/mr/eguomrkrciqdlubmnmltrvoy7tg.png"><br><br>  Saludos, Habr! <br><br>  Nosotros, el equipo de arquitectos de TI de IBM, que se dedica a la creaci√≥n y comercializaci√≥n de soluciones industriales para diversas industrias.  En nuestro tiempo libre, investigamos nuevas tecnolog√≠as, experimentamos y probamos las mejores pr√°cticas. <br><br>  En los √∫ltimos a√±os, el tema de Internet de las cosas ha sido muy popular.  Nuestros clientes preguntan acerca de las soluciones y plataformas de caja universal que se pueden ubicar localmente en su centro de datos.  Lo m√°s importante es que, sobre la base de tales "cajas", todos los nuevos servicios y aplicaciones deber√≠an desarrollarse y lanzarse muy r√°pidamente, o m√°s bien instant√°neamente o "ayer". <br><br>  Nos preguntamos: "¬øQu√© pasa si juntamos algo similar en tecnolog√≠as abiertas y p√∫blicas?" <br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ya</a> hemos hablado y mostrado mucho sobre el uso de los contenedores <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Docker</a> y sus herramientas de administraci√≥n basadas en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kubernetes</a> .  Sin embargo, hasta ahora no ha sido posible ver c√≥mo todas estas tecnolog√≠as avanzadas se pueden utilizar a escala industrial para tareas comerciales, espec√≠ficamente en Internet de las cosas.  As√≠ que llenemos este vac√≠o.  El concepto de microservicios, as√≠ como los enfoques de moda para el desarrollo (DevOps), la integraci√≥n y el despliegue de aplicaciones (CI / CD) se considerar√°n una tarea ligeramente diferente y se reservar√°n para m√°s adelante. <br><br>  En este art√≠culo queremos hablar sobre la preparaci√≥n e instalaci√≥n de uno de los componentes clave: IBM Cloud Private (de hecho, el ensamblaje industrial de Docker / Kubernetes y un poco m√°s), que puede actuar como un n√∫cleo de infraestructura condicional al crear una plataforma local de Internet de las cosas.  Pregunta por qu√© √©l? <br><br>  Porque prometimos tecnolog√≠as abiertas y p√∫blicas (versi√≥n gratuita para la comunidad y soporte de la comunidad): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hub.docker.com/r/ibmcom/icp-inception</a> <br><br><h2>  Descripci√≥n general de IBM Cloud Private </h2><br>  IBM Cloud Private (ICP) es una plataforma de nube privada para implementaci√≥n y operaciones locales.  ICP es un entorno integrado que le permite dise√±ar, desarrollar, implementar y administrar aplicaciones locales creadas teniendo en cuenta la arquitectura de contenedores.  La entrega de ICP incluye un orquestador basado en Kubernetes (K8), un almac√©n de im√°genes local, as√≠ como una consola de administraci√≥n y herramientas de monitoreo compatibles. <br><br><h3>  ¬øQu√© es una nube privada o privada? </h3><br>  Una nube privada es un modelo de computaci√≥n en la nube que se ejecuta exclusivamente para una organizaci√≥n, generalmente en su territorio y recursos.  Dicha nube puede ser gestionada y mantenida tanto por sus propios especialistas como por terceros.  Se puede alojar una plataforma similar detr√°s del firewall de la compa√±√≠a y fuera de √©l.  Una nube privada proporciona los beneficios de una nube p√∫blica, incluida la implementaci√≥n r√°pida y la escalabilidad, as√≠ como la facilidad de uso, administraci√≥n y flexibilidad.  Al mismo tiempo, la versi√≥n local proporciona un mayor control sobre el sistema, mayor productividad, costos predecibles con precisi√≥n, mayores requisitos de seguridad y capacidades de administraci√≥n flexibles seg√∫n las necesidades de la organizaci√≥n.  Una nube privada le permite configurarla directamente para tareas comerciales espec√≠ficas y requisitos de seguridad del cliente. <br><br>  Antes de proceder con la instalaci√≥n de ICP, definiremos la terminolog√≠a: <br><br>  <b>Nodo maestro</b> <br><ul><li>  Supervisa y controla el cl√∫ster K8. </li><li>  kubectl: una herramienta de l√≠nea de comandos para administrar un cl√∫ster. </li><li>  API REST: interfaz para interactuar con nodos de trabajo. </li><li>  etcd: es un almac√©n de claves asequible y persistente, que se utiliza como almacenamiento de respaldo de K8 para todos los datos del cl√∫ster. </li><li>  Kube-Scheduler: este componente supervisa los contenedores reci√©n creados (pods) que no tienen un nodo asignado, y selecciona un nodo para ejecutarlos. </li><li>  Por lo general, se requieren 3 o m√°s nodos principales para un funcionamiento estable y garantizar la tolerancia a fallas.  En nuestro caso, para ahorrar recursos, instalaremos todos los componentes ICP necesarios en un √∫nico servidor dedicado (nodo √∫nico). </li></ul><br>  <b>Nodo de trabajo</b> <br><ul><li>  La m√°quina de trabajo en los K8 anteriormente conocida como Minion.  Este nodo puede ser cualquiera de los hosts que recibe tareas del nodo principal y tambi√©n controla el proceso de lanzamiento de contenedores en √©l.  Dependiendo de la configuraci√≥n del cl√∫ster, el nodo de trabajo puede ser una m√°quina virtual o un servidor f√≠sico. </li><li>  Los siguientes componentes se pueden ejecutar en cada nodo: </li><li>  kubelet: es el servicio principal del nodo de trabajo.  Supervisa los contenedores que se asignaron a su nodo (ya sea para una conexi√≥n segura o mediante un archivo de configuraci√≥n local). </li><li>  kube-proxy: muestra los servicios definidos en la API de K8s en cada nodo, admite reglas de red en el host y reenv√≠a las conexiones. </li><li>  docker: lanzamiento de contenedores y entorno de gesti√≥n. </li><li>  supervisor: este es un sistema de control y proceso de monitoreo liviano que puede usar para mantener el kubelet y la ventana acoplable en funcionamiento. </li><li>  fluentd: este es un servicio que ayuda a garantizar el registro a nivel de cl√∫ster. </li></ul><br>  <b>Contenedores</b> <br><ul><li>  Una aplicaci√≥n que se ejecuta en un entorno aislado. </li><li>  El conjunto de procesos ejecutables y la imagen lanzada del programa. </li></ul><br>  <b>Capullos (vainas)</b> <br><ul><li>  Un pod es un grupo de uno o m√°s contenedores Docker, con un almacenamiento / red com√∫n y una especificaci√≥n de c√≥mo ejecutar contenedores en un nodo de trabajo. </li><li>  Cada Pod tiene su propia IP. </li><li>  Pod comparte el espacio de nombres PID, la red y el nombre de host. </li></ul><br>  <b>Controlador de replicaci√≥n</b> <br><ul><li>  Proporciona accesibilidad y escalabilidad. </li><li>  Responsable de controlar el n√∫mero de Pods desplegados. </li><li>  Utiliza una plantilla que describe lo que debe contener cada Pod. </li></ul><br>  <b>Etiquetas</b> <br><ul><li>  Metadatos asignados a los recursos de K8, por ejemplo: contenedores, servicios. </li><li>  Pares clave-valor unidos a objetos para identificaci√≥n. </li><li>  Estos par√°metros son cr√≠ticos porque se basan en una solicitud de cl√∫ster de recursos con etiquetas espec√≠ficas. </li></ul><br>  <b>Servicios</b> <br><ul><li>  Una colecci√≥n de contenedores expuestos como punto final. </li><li>  Informaci√≥n sobre el estado del cl√∫ster K8s y la configuraci√≥n de red, que se aplica a todos los nodos de trabajo. </li><li>  Con la configuraci√≥n correcta, los pods creados por el controlador de replicaci√≥n se registrar√°n autom√°ticamente como el servicio correspondiente. </li></ul><br>  <b>Informaci√≥n secreta (secretos)</b> <br><ul><li>  Informaci√≥n confidencial para ser le√≠da o utilizada por los contenedores. </li><li>  Se montan vol√∫menes especiales de la unidad de disco autom√°ticamente para que los contenedores puedan leer el contenido. </li><li>  Cada entrada tiene su propio camino. </li></ul><br><h3>  Arquitectura </h3><br>  A continuaci√≥n se muestra una arquitectura ICP de alto nivel que enumera los componentes principales por nodos principales, de trabajo y proxy.  Vale la pena se√±alar que en este art√≠culo el √©nfasis principal se pone en una combinaci√≥n de contenedores Docker y el entorno de gesti√≥n de Kubernetes.  Estos componentes de c√≥digo abierto son clave y fundamentales para la plataforma ICP.  Sin embargo, para trabajar completamente con ICP, tambi√©n necesitar√° conocimiento de Helm, el administrador de administraci√≥n de paquetes de software.  K8s se utiliza para implementar y alojar instancias de aplicaciones integradas en esquemas Helm, que a su vez se refieren a im√°genes de Docker.  Los esquemas de Helm contienen informaci√≥n sobre los detalles de su aplicaci√≥n, y las im√°genes de Docker contienen todos los paquetes de software necesarios para ejecutar su aplicaci√≥n. <br><br> <a href=""><img src="https://habrastorage.org/webt/ch/hd/is/chhdisgv9bo9fu4bfdow2g1ydmu.png"></a> <br><br>  Para obtener una introducci√≥n detallada a la arquitectura y los componentes de la plataforma ICP, puede utilizar el enlace de documentaci√≥n en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBM Knowledge Center</a> . <br><br><h2>  Preparaci√≥n </h2><br>  Para completar c√≥modamente la instalaci√≥n de ICP en 20-30 minutos, se requieren los siguientes recursos m√≠nimos de hardware y acceso a Internet: <br>  ‚Ä¢ Un host (f√≠sico o virtual) <br>  ‚Ä¢ CPU = 8 n√∫cleos (o n√∫cleos virtuales) <br>  ‚Ä¢ RAM = 10 GB (de hecho, se pueden requerir hasta 14 GB) <br>  ‚Ä¢ Disco = 40 GB (en SSD como siempre m√°s r√°pido) <br><blockquote>  <i><b>Nota:</b> si tiene un poco m√°s de tiempo libre y menos recursos de hardware, en 40-60 minutos puede instalar ICP en 1 n√∫cleo virtual i5 y 10 GB de RAM.</i> </blockquote><br><h2>  Instalaci√≥n </h2><br><h3>  Descargar Ubuntu </h3><br>  Descargue la distribuci√≥n de <a href="">Ubuntu Server versi√≥n 16.04.05</a> .  Realice una instalaci√≥n est√°ndar del sistema operativo en una m√°quina virtual o f√≠sica con las caracter√≠sticas anteriores. <br><br><h3>  Obtener direcci√≥n IP </h3><br>  Despu√©s de completar el proceso de instalaci√≥n del sistema operativo, en la l√≠nea de comando, encuentre la direcci√≥n IP de su m√°quina virtual usando el siguiente comando: <br><br><pre><code class="bash hljs">ifconfig</code> </pre> <br>  Debe escribir / recordar la direcci√≥n IP de Ethernet (inet addr), as√≠ como Bcast y Mask.  Estos par√°metros se mostrar√°n despu√©s de ejecutar el comando correspondiente: <br> <a href=""><img src="https://habrastorage.org/webt/ao/tp/gh/aotpghosoq-nglwcwwm-1fmn_pk.png"></a> <br>  <i>Figura 1. Un ejemplo del comando ifconfig</i> <br><br><h3>  Conexi√≥n SSH </h3><br>  Si us√≥ la funci√≥n "Instalaci√≥n f√°cil" cuando configur√≥ la m√°quina virtual, luego de la instalaci√≥n completa de Ubuntu Server deber√° instalar el servidor OpenSSH.  Puede hacer esto con los siguientes comandos: <br><br><pre> <code class="bash hljs">apt install openssh-server sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> sshd</code> </pre> <br>  Despu√©s de ejecutar los comandos apropiados, podr√° conectarse a la m√°quina virtual mediante SSH.  Dependiendo del sistema operativo, puede usar diferentes m√©todos de conexi√≥n.  Para Windows, puede usar la popular herramienta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PuTTY</a> ; para MacOS, puede usar el comando ssh en la terminal. <br><br> <a href=""><img src="https://habrastorage.org/webt/2w/v8/st/2wv8st2har9fplst87-ouu2xn3a.png"></a> <br>  <i>Figura 2. Ejemplo de conexi√≥n a trav√©s de PuTTY para Windows</i> <br><br>  El siguiente paso es establecer una contrase√±a para el superusuario (root): <br><br><pre> <code class="bash hljs">sudo -i passwd</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/tk/p5/l_/tkp5l_dnzxuaf5-bdlf5j2nllis.png"></a> <br>  <i>Figura 3. Configuraci√≥n de una nueva contrase√±a para el usuario root</i> <br><br><h3>  Actualizaci√≥n de interfaz de red </h3><br>  Despu√©s de configurar la capacidad de conectarse a trav√©s de SSH y actualizar la contrase√±a de superusuario, necesitamos configurar la interfaz de red para determinar los par√°metros de red est√°ticos.  Esto se hace con el siguiente comando: <br><br><pre> <code class="bash hljs">nano /etc/network/interfaces</code> </pre> <br>  Actualizamos la configuraci√≥n de la interfaz de red (interfaz de red primaria) en funci√≥n de la informaci√≥n obtenida durante el comando ifconfig, nuestro ejemplo se ve as√≠: <br><br><pre> <code class="bash hljs">auto ens33 iface ens33 inet static address 192.168.175.7 netmask 255.255.255.0 network 192.168.175.0 broadcast 192.168.175.255 gateway 192.168.175.2 dns-nameservers 192.168.175.2 8.8.8.8</code> </pre> <br><blockquote>  <i><b>Nota: Es</b> importante especificar correctamente el servidor DNS, ya que el acceso a Internet es necesario para la instalaci√≥n posterior de los componentes ICP.</i> </blockquote><br> <a href=""><img src="https://habrastorage.org/webt/u3/cb/v7/u3cbv77no49a5vnxx5jfvb-rena.png"></a> <br>  <i>Figura 4. Configuraci√≥n de la interfaz de red</i> <br><br>  Guarde el archivo actualizado con los siguientes pasos: Ctrl + X, S√≠, Entrar. <br><br>  Para simplificar el inicio de sesi√≥n en una m√°quina virtual con privilegios de superusuario (root), debe realizar cambios en la configuraci√≥n del servicio SSH.  Para hacer esto, ejecute el siguiente comando: <br><br><pre> <code class="bash hljs">nano /etc/ssh/sshd_config</code> </pre> <br>  A continuaci√≥n, busque la l√≠nea de permiso de acceso y ed√≠tela en consecuencia: <br><br><pre> <code class="bash hljs">PermitRootLogin yes</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/4h/mg/9c/4hmg9clbw62w0fb_v7enmmptweo.png"></a> <br>  <i>Figura 5. Actualizaci√≥n de la configuraci√≥n de SSH</i> <br><br>  Guarde el archivo como en el paso anterior: Ctrl + X, S√≠, Entrar. <br><br>  Despu√©s de realizar todos los cambios, para aplicar los nuevos par√°metros tiene sentido reiniciar completamente la m√°quina virtual o reiniciar los servicios correspondientes (redes y ssh), por ejemplo, con los siguientes comandos: <br><br><pre> <code class="bash hljs">shutdown -r 0</code> </pre> <br>  o <br><br><pre> <code class="bash hljs">service &lt;service_name&gt; restart</code> </pre> <br>  Despu√©s de reiniciar la m√°quina, debe iniciar sesi√≥n nuevamente a trav√©s de SSH. <br><br><h3>  Actualizaci√≥n de componentes </h3><br>  Actualice Ubuntu Server con el siguiente comando (el comando debe ejecutarse como root): <br><br><pre> <code class="bash hljs">apt update</code> </pre> <br>  Nota: si se produce un error durante la actualizaci√≥n: "El repositorio 'cdrom: // Ubuntu-Server 16.04.5 LTS _Xenial Xerus_ - Release amd64 (20180731) xenial Release' no tiene un archivo de lanzamiento".  Debe ejecutar el siguiente comando: <br><br><pre> <code class="bash hljs">sudo nano /etc/apt/sources.list</code> </pre> <br>  Y comentar la l√≠nea: <br><br><pre> <code class="bash hljs">deb cdrom:[Ubuntu-Server 16.04.5 LTS ‚Ä¶</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/x4/l8/0w/x4l80wwrr4ovzqd0a_wj3jqy8ki.png"></a> <br>  <i>Figura 6. Correcci√≥n de un posible error.</i> <br><br>  A continuaci√≥n, guarde el archivo, como se hizo anteriormente: Ctrl + X, S√≠, Enter <br><br>  Despu√©s de corregir un posible error, ejecute el comando de actualizaci√≥n nuevamente y, como resultado, deber√≠a ver algo como esto: <br><br> <a href=""><img src="https://habrastorage.org/webt/iu/i7/7_/iui77_byceas5t0cujkv-1p9ltu.png"></a> <br>  <i>Figura 7. Actualizaci√≥n de Ubuntu</i> <br><br><h2>  Instalar IBM Cloud Private </h2><br>  Antes de instalar ICP, debe editar el archivo de hosts: <br><br><pre> <code class="bash hljs">nano /etc/hosts</code> </pre> <br>  Reemplace la cadena 127.0.1.1 ubuntu con su direcci√≥n IP y cualquier nombre de host adecuado. <br><br>  Aseg√∫rese de que el nombre de host y el alias en la l√≠nea est√©n separados por una pesta√±a o espacio: <br> <a href=""><img src="https://habrastorage.org/webt/ht/jk/ks/htjkkshqzdczphtd999qhxb_unu.png"></a> <br>  <i>Figura 8. Cambio del archivo de hosts</i> <br><br>  Guarde el archivo: Ctrl + X, S√≠, Enter <br><br>  Los siguientes 2 comandos le permitir√°n actualizar el sistema e instalar m√≥dulos adicionales. <br><br><pre> <code class="bash hljs">apt update apt-get install apt-transport-https ca-certificates curl software-properties-common python-minimal jq</code> </pre> <br>  Verifique la terminal en busca de errores: <br><br> <a href=""><img src="https://habrastorage.org/webt/so/ve/fi/sovefisrk9vxuzgcxusddtzir6e.png"></a> <br>  <i>Figura 9. Instalaci√≥n de componentes adicionales</i> <br><br>  Aumente la memoria virtual m√°xima con el comando: <br><br><pre> <code class="bash hljs">sysctl -w vm.max_map_count=262144</code> </pre><br>  Los K8 no comenzar√°n con el intercambio habilitado.  Puede deshabilitarlo con el comando: <br><br><pre> <code class="bash hljs">swapoff ‚Äìa</code> </pre> <br><blockquote>  <i><b>Nota: los</b> dos comandos anteriores funcionar√°n en la sesi√≥n actual.</i>  <i>Cuando reinicie, estos par√°metros se perder√°n y deber√° registrarlos nuevamente.</i> </blockquote><br>  La aplicaci√≥n de estos par√°metros al cargar el sistema operativo se puede habilitar con los siguientes comandos: <br><br><pre> <code class="bash hljs">sed -i <span class="hljs-string"><span class="hljs-string">'/ swap / s/^/#/'</span></span> /etc/fstab <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"vm.max_map_count=262144"</span></span> &gt;&gt; /etc/sysctl.conf</code> </pre> <br><h3>  Agregar una clave GPG </h3><br>  Usamos el siguiente comando: <br><br><pre> <code class="bash hljs">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -</code> </pre> <br><h3>  Agregar un repositorio para instalar Docker </h3><br>  Para completar la instalaci√≥n del repositorio, debe ejecutar los siguientes 2 comandos: <br><br><pre> <code class="bash hljs">add-apt-repository <span class="hljs-string"><span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(lsb_release -cs)</span></span></span><span class="hljs-string"> stable"</span></span> apt-get update</code> </pre> <br><h3>  Instalar Docker </h3><br>  Utilice el siguiente comando para instalar Docker (Docker versi√≥n 17.12.1 es la versi√≥n m√°xima admitida para IBM Cloud Private 2.1.0.3): <br><br><pre> <code class="bash hljs">apt-get install docker-ce=17.12.1~ce-0~ubuntu</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/so/ve/fi/sovefisrk9vxuzgcxusddtzir6e.png"></a> <br>  <i>Figura 10. Proceso de instalaci√≥n de Docker</i> <br><br>  Puede verificar la funcionalidad de Docker con el siguiente comando: <br><br><pre> <code class="bash hljs">docker version</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/w3/8y/si/w38ysiwd6porpbipaez4_nghy9i.png"></a> <br>  <i>Figura 11. Comprobaci√≥n de Docker</i> <br><br><h3>  Descargar IBM Cloud Private </h3><br>  Para descargar la imagen ICP-ce (Community Edition) del recurso dockerHub, debe usar el kit de herramientas Docker.  Puede hacer esto con el siguiente comando: <br><br><pre> <code class="bash hljs">docker pull ibmcom/icp-inception:2.1.0.3</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/vq/k4/m3/vqk4m3d4o-sclprferxvwcjprte.png"></a> <br>  <i>Figura 12. Descargar ICP</i> <br><br>  IBM empaquet√≥ todos los componentes esenciales necesarios para la instalaci√≥n en un paquete (tenga en cuenta que puede cambiar la versi√≥n a una versi√≥n m√°s nueva si es necesario).  El comando de extracci√≥n cargar√° la imagen al sistema de archivos local (la imagen se iniciar√° para instalar ICP). <br><br>  Cree un directorio y navegue hasta √©l: <br><br><pre> <code class="bash hljs">mkdir /opt/icp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/icp</code> </pre> <br>  Copie el paquete ICP en este directorio: <br><br><pre> <code class="bash hljs">docker run -e LICENSE=accept -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/data ibmcom/icp-inception:2.1.0.3 cp -r cluster /data</code> </pre> <br><blockquote>  <i><b>Nota:</b> este comando Docker toolkit ejecuta el comando de copia de Linux (cp) desde el directorio especificado (opci√≥n -v).</i>  <i>El directorio del cl√∫ster se crear√° en / opt / icp con todos los archivos necesarios.</i> </blockquote><br><h3>  Configurar claves SSH </h3><br>  Cree nuevas claves ssh en el directorio / opt / icp / cluster: <br><br><pre> <code class="bash hljs">ssh-keygen -b 4096 -f ~/.ssh/id_rsa -N <span class="hljs-string"><span class="hljs-string">""</span></span> cat ~/.ssh/id_rsa.pub | sudo tee -a ~/.ssh/authorized_keys systemctl restart sshd cp ~/.ssh/id_rsa ./cluster/ssh_key</code> </pre> <br>  Verifique que la clave est√© creada y ubicada en la carpeta / opt / icp / cluster: <br><br><pre> <code class="bash hljs">ls /opt/icp/cluster</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/5t/-f/th/5t-fthfoh0nvegetpvqgs5qcqvm.png"></a> <br>  <i>Figura 13. El contenido de la carpeta del cl√∫ster</i> <br><br><h3>  Configuraci√≥n de ICP </h3><br>  Agregue la direcci√≥n IP de cada nodo en el cl√∫ster al archivo / opt / icp / cluster / hosts (en nuestro caso, usamos la misma direcci√≥n IP para cada componente que especificamos en / etc / hosts).  Hacemos esto con el siguiente comando: <br><br><pre> <code class="bash hljs">nano /opt/icp/cluster/hosts</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/uv/g4/3n/uvg43n_tjis5f-s9x1oakpsfjwi.png"></a> <br>  <i>Figura 14. El contenido del archivo hosts</i> <br><br>  Guarde el archivo: Ctrl + X, S√≠, Enter <br><br>  Puede encontrar informaci√≥n detallada sobre las opciones de instalaci√≥n en el archivo de configuraci√≥n: <br><br><pre> <code class="bash hljs">more /opt/icp/cluster/config.yaml</code> </pre> <br>  No recomendamos cambiar la configuraci√≥n de instalaci√≥n predeterminada. <br><blockquote>  <i><b>Nota: Los</b> 2 archivos de instalaci√≥n m√°s importantes son hosts y config.yaml, que describen las opciones de instalaci√≥n de ICP.</i>  <i>En una configuraci√≥n de varios trabajadores, debe especificar una lista de direcciones IP en la secci√≥n de trabajadores.</i>  <i>Al instalar la versi√≥n actual de ICP en modo de nodo √∫nico, las direcciones IP en el archivo de hosts solo cambian.</i> </blockquote><br><h3>  Instalaci√≥n de ICP </h3><br>  Vaya al directorio del cl√∫ster y ejecute la instalaci√≥n: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/icp/cluster docker run -e LICENSE=accept --net=host -t -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/installer/cluster ibmcom/icp-inception:2.1.0.3 install</code> </pre> <br>  Dependiendo de los recursos disponibles, la instalaci√≥n puede durar de 20 a 60 minutos.  Si se producen errores (mensajes rojos), realice los cambios apropiados en los archivos de configuraci√≥n.  A veces, la instalaci√≥n puede ralentizarse un poco debido a los intentos de reconexi√≥n a componentes que a√∫n no se han iniciado (por ejemplo, al iniciar Cloudant o IAM). <br><br>  La instalaci√≥n deber√≠a verse as√≠: <br> <a href=""><img src="https://habrastorage.org/webt/ft/9-/8r/ft9-8re-bg2velkh1hlxqdgoecu.png"></a> <br>  <i>Figura 15. Resultado de instalaci√≥n de ICP</i> <br><br>  En caso de errores, puede ser necesario desinstalar ICP: <br><br><pre> <code class="bash hljs">docker run -e LICENSE=accept --net=host -t -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/installer/cluster ibmcom/icp-inception:2.1.0.3 uninstall</code> </pre> <br>  Antes de continuar con el siguiente paso, espere unos 5 minutos para que todos los componentes de ICP se inicien correctamente. <br><br>  Siga el enlace provisto despu√©s de que se complete la instalaci√≥n, ingrese a la consola ICP (admin / admin): <br><br><pre> <code class="bash hljs">https://&lt;ip_address&gt;:8443</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/t8/en/-t/t8en-t-wktktunis-pn4phoz2dw.png"></a> <br>  <i>Figura 16. La p√°gina de inicio de sesi√≥n del panel de control</i> <br><br>  P√°gina de bienvenida de ICP: <br> <a href=""><img src="https://habrastorage.org/webt/ji/bf/t6/jibft6ehclvq8-npu2slawyoxbo.png"></a> <br>  <i>Figura 17. Interfaz web del panel de control</i> <br><br>  En la esquina superior derecha, seleccione el men√∫ Cat√°logo, se muestra una lista de aplicaciones disponibles: <br> <a href=""><img src="https://habrastorage.org/webt/3i/_w/tt/3i_wttbjrkwapn7nvohf-fo4ziy.png"></a> <br>  <i>Figura 18. Cat√°logo de componentes</i> <br><br>  Este directorio contiene una lista de aplicaciones y software, cuya descripci√≥n puede estudiar a su gusto, pero hasta ahora no se apresure a implementarlos. <br>  Todav√≠a tenemos que aprender c√≥mo manejar adecuadamente el ICP reci√©n instalado (no solo a trav√©s de la interfaz web, sino tambi√©n la consola en forma de CLI - Interfaz de l√≠nea de comandos), conectar el almacenamiento persistente y realizar peque√±as configuraciones. <br><br><h2>  En conclusi√≥n </h2><br>  Para resumir. <br><br>  Implementamos con √©xito la edici√≥n de la comunidad IBM Cloud Private (versi√≥n 2.1.0.3) en un host en una m√°quina virtual que ejecuta Ubuntu Server OS 16/04/05.  Por el momento, hemos verificado personalmente la instalaci√≥n en los hipervisores VMware e Hyper-V, definitivamente funciona en XenServer y no deber√≠a haber ninguna dificultad para VirtualBox y KVM. <br><br>  ¬øQui√©n est√° realmente ansioso por sumergirse a√∫n m√°s en el estudio de ICP, es decir, una excelente selecci√≥n del trabajo de laboratorio de nuestro colega aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/phthom/IBMCloudPrivate</a> <br><br>  De los pr√≥ximos pasos: despu√©s de una nueva instalaci√≥n, solo necesitamos configurar ICP un poco y comenzar a llenarlo con algo √∫til y cercano a tareas pr√°cticas. <br><br>  Si la comunidad de Habr respalda positivamente esta iniciativa, a medida que avancen nuestras investigaciones y experimentos, llenaremos el n√∫cleo de la plataforma con los componentes necesarios para la recopilaci√≥n de telemetr√≠a, el almacenamiento de datos, el procesamiento, el an√°lisis, el pron√≥stico, la formaci√≥n de interfaces de programas externos y la creaci√≥n de aplicaciones de usuario.  En consecuencia, desarrollar una serie de tales art√≠culos. <br><br>  Esperando sus comentarios y sugerencias! <br><br>  Adem√°s, nuestra gente de ideas afines de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AIXportal.ru</a> prepar√≥ un maravilloso video clip sobre la instalaci√≥n de IBM Cloud Private en su canal de Youtube, alguien se sentir√° m√°s c√≥modo as√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">youtu.be/eQwOOTzjM24</a> <br><br><h2>  Enlaces y materiales √∫tiles </h2><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">P√°gina del producto en ruso</a> <br>  ‚Ä¢ Qui√©n quiere practicar ingl√©s, el libro - ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ICP for Dummies</a> ‚Äù 2018.  (40 p√°ginas) <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Libros blancos para ICP 2.1.0.3</a> en el IBM Knowledge Center <br>  ‚Ä¢ Comunidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ICP</a> abierta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en IBM developerWorks</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Recetas ICP para desarrolladores.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426135/">https://habr.com/ru/post/es426135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426121/index.html">MC.exe (compilador de mensajes), rc.exe, link.exe para generar .dll para EventMessageFile</a></li>
<li><a href="../es426123/index.html">Aprende OpenGL. Leccion 6.1. PBR o renderizado f√≠sicamente correcto. Teor√≠a</a></li>
<li><a href="../es426125/index.html">Carrera de esteroides. Ascensores</a></li>
<li><a href="../es426131/index.html">Descargue la configuraci√≥n a FPGA a trav√©s de USB o desmonte FTDI MPSSE</a></li>
<li><a href="../es426133/index.html">Presentaci√≥n de la versi√≥n alfa de instant√°neas de volumen en Kubernetes</a></li>
<li><a href="../es426137/index.html">Era de la honestidad</a></li>
<li><a href="../es426141/index.html">Red Hat reemplaza Docker con Podman</a></li>
<li><a href="../es426143/index.html">Animaci√≥n 3D: ¬øvideo o interactivo?</a></li>
<li><a href="../es426145/index.html">Taller de aceptaci√≥n independiente, 23 de octubre, Mosc√∫</a></li>
<li><a href="../es426149/index.html">Instalador Python de bricolaje para compilaciones de Android de TeamCity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>