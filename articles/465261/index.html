<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêé ‚öõÔ∏è üë®‚Äçüíª El poder m√°gico de las macros, o c√≥mo hacer la vida m√°s f√°cil para un programador ensamblador AVR üë¶üèæ üî¨ üóæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mucho se ha escrito sobre macros en ensamblador. Y en la documentaci√≥n, y en varios art√≠culos. Pero en la mayor√≠a de los casos, se reduce a una simple...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El poder m√°gico de las macros, o c√≥mo hacer la vida m√°s f√°cil para un programador ensamblador AVR</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465261/"><p>  Mucho se ha escrito sobre macros en ensamblador.  Y en la documentaci√≥n, y en varios art√≠culos.  Pero en la mayor√≠a de los casos, se reduce a una simple lista de directivas con una breve descripci√≥n de sus funciones, o a un conjunto de ejemplos dispares de macros preparadas. <br>  El prop√≥sito de este art√≠culo es describir un enfoque espec√≠fico para la programaci√≥n en lenguaje ensamblador para generar el c√≥digo m√°s simple y legible utilizando macros.  El art√≠culo no describir√° la sintaxis de comandos y directivas individuales.  El <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">fabricante</a> ya ha proporcionado una descripci√≥n detallada.  Nos centraremos en c√≥mo utilizar estas oportunidades para resolver problemas espec√≠ficos. </p><a name="habracut"></a><br><p>  En un momento, ATMEL prob√≥ y desarroll√≥ una l√≠nea de microcontroladores de ocho bits con una arquitectura de muy alta calidad y un sistema de comando simple, pero al mismo tiempo muy potente.  Pero, como saben, no hay l√≠mite para la perfecci√≥n, y algunas instrucciones de uso frecuente no son suficientes.  Afortunadamente, el ensamblador de macros, amable y absolutamente gratuito proporcionado por el fabricante, puede simplificar significativamente el c√≥digo mediante el uso de directivas.  Antes de pasar directamente a las macros, realizaremos algunos pasos preliminares. </p><br><h3 id="opredelenie-konstant">  Definici√≥n de constantes </h3><br><pre><code class="plaintext hljs">.EQU FOSC = 16000000 .EQU CLK8 = 0</code> </pre> <br><p>  Estas dos definiciones le permiten deshacerse de los "n√∫meros m√°gicos" en las macros, donde los valores de los registros se calculan en funci√≥n de la frecuencia del procesador y el estado del fusible del divisor perif√©rico.  La primera definici√≥n es la frecuencia del cristal del procesador en hercios, la segunda es el estado del divisor de frecuencia perif√©rico. </p><br><h3 id="imenovanie-registrov">  Registrar nombres </h3><br><pre> <code class="plaintext hljs">.DEF TempL = r16 .DEF TempH = r17 .DEF TempQL = r18 .DEF TempQH = r19 .DEF AL = r0 .DEF AH = r1 .DEF AQL = r2 .DEF AQH = r3</code> </pre> <br><p>  Un registro de nombres algo redundante a primera vista que se puede utilizar en macros.  Solo se necesitan cuatro registros para <em>Temp</em> si se trata de valores de 32 bits (por ejemplo, en operaciones de multiplicar dos n√∫meros de 16 bits).  Si estamos seguros de que dos registros de almacenamiento temporal son suficientes para que los usemos en macros, entonces <em>TempQL</em> y <em>TempQH</em> no se pueden determinar.  Las definiciones de <em>A</em> son necesarias para las macros que utilizan operaciones de multiplicaci√≥n.  <em>AQ ya</em> no es necesario si no usamos aritm√©tica de 32 bits con nuestras macros. </p><br><h3 id="makrosy-dlya-realizacii-prostyh-komand">  Macros para implementar comandos simples </h3><br><p>  Ahora que hemos descubierto el nombre de los registros, comenzaremos a implementar los comandos que faltan y comenzaremos tratando de simplificar los existentes.  El ensamblador AVR tiene una caracter√≠stica inc√≥moda.  Para entrada y salida, los primeros 64 puertos usan los comandos de <em>entrada / salida</em> , y para los <em>lds / sts</em> restantes.  Para no mirar la documentaci√≥n cada vez que se busca el comando necesario para un puerto espec√≠fico, crearemos un conjunto de comandos universales que sustituir√°n independientemente los valores necesarios. </p><br><pre> <code class="plaintext hljs">.MACRO XOUT .IF @0&lt;64 out @0,@1 .ELSE sts @0,@1 .ENDIF .ENDMACRO .MACRO XIN .IF @1&lt;64 in @0,@1 .ELSE lds @0,@1 .ENDIF .ENDMACRO</code> </pre> <br><p>  Para que la sustituci√≥n funcione correctamente, se utiliza la compilaci√≥n condicional en la macro.  En el caso de que la direcci√≥n del puerto sea inferior a 64, se ejecuta la primera secci√≥n condicional, de lo contrario la segunda.  Nuestras macros repiten completamente la funcionalidad de los comandos est√°ndar para trabajar con puertos de entrada / salida, por lo tanto, para indicar que nuestro equipo tiene caracter√≠sticas avanzadas, agregamos el prefijo de nombre est√°ndar <em>X.</em> <br>  Uno de los comandos m√°s comunes que no est√°n disponibles en el ensamblador, pero que se requieren constantemente, es el comando para escribir constantes en los registros de entrada de salida.  La implementaci√≥n de macro para este comando se ver√° as√≠ </p><br><pre> <code class="plaintext hljs">.MACRO OUTI ldi TempL,@1 .IF @0&lt;64 out @0, TempL .ELSE sts @0, TempL .ENDIF .ENDMACRO</code> </pre> <br><p>  En este caso, el nombre en la macro, para no violar la l√≥gica de denominaci√≥n de comandos, agregue al nombre est√°ndar el postfix <em>I</em> , utilizado por el desarrollador para denotar los comandos para trabajar con constantes.  En esta macro, usamos el registro <em>TempL</em> previamente definido para la <em>operaci√≥n</em> . <br>  En algunos casos, no se requiere un solo registro, sino un par completo que almacena un valor de 16 bits.  Cree una nueva macro para escribir un valor de 16 bits en un par de registros de E / S </p><br><pre> <code class="plaintext hljs">.MACRO OUTIW ldi TempL,HIGH(@1) .IF @0&lt;64 out @0H, TempL .ELSE sts @0H, TempL .ENDIF ldi TempL,LOW(@1) .IF @0&lt;64 out @0L, TempL .ELSE sts @0L, TempL .ENDIF .ENDMACRO</code> </pre> <br><p>  En esta macro, utilizamos las funciones <em>LOW</em> y <em>HIGH</em> incorporadas para extraer el byte bajo y alto de un valor de 16 bits.  En el nombre de la macro, agregue los postfixes <em>I</em> y <em>W</em> al comando para indicar que en este caso el comando funciona con un valor de 16 bits (palabra). <br>  No menos a menudo en los programas se cargan pares de registros, por ejemplo, para configurar punteros en la memoria.  Creemos tal macro </p><br><pre> <code class="plaintext hljs">.MACRO ldiw ldi @0L, LOW(@1) ldi @0H, HIGH(@1) .ENDMACRO</code> </pre> <br><p>  En esta macro, usamos el hecho de que la denominaci√≥n est√°ndar de registros y puertos en el fabricante implica el postfix <em>L</em> para el valor inferior y el postfix <em>H</em> para la parte superior del valor de doble byte.  Si sigue esta regla al nombrar sus propias variables, la macro funcionar√° correctamente, incluso con ellas.  La belleza de las macros tambi√©n radica en el hecho de que proporcionan una sustituci√≥n simple, por lo tanto, en el caso de que el segundo operando sea un n√∫mero, y en el caso de que este sea el nombre de la etiqueta, la macro funcionar√° correctamente. </p><br><h3 id="makrosy-dlya-realizacii-slozhnyh-komand">  Macros para implementar comandos complejos. </h3><br><p>  Cuando se trata de operaciones m√°s complejas, generalmente no se usan macros, prefiriendo rutinas.  Sin embargo, en estos casos, las macros pueden facilitar la vida y hacer que el c√≥digo sea m√°s legible.  En este caso, la compilaci√≥n condicional viene al rescate.  Un enfoque de programaci√≥n podr√≠a verse as√≠: <br>  Colocamos todas nuestras rutinas en un archivo separado, que llamaremos, por ejemplo, <strong>Library.inc</strong> .  Cada subrutina en este archivo tendr√° la siguiente forma </p><br><pre> <code class="plaintext hljs">_sub0: .IFDEF __sub0 ; -----    ----- ret .ENDIF</code> </pre> <br><p>  En este caso, la presencia de la definici√≥n __sub0 significa que la subrutina debe incluirse en el c√≥digo resultante.  De lo contrario, se ignora. <br>  A continuaci√≥n, en un archivo separado <strong>Macro.inc,</strong> definimos macros del formulario </p><br><pre> <code class="plaintext hljs">.MACRO SUB0 .IFNDEF __sub0 .DEF __sub0 .ENDIF ; ---          call _sub0 .ENDMACRO</code> </pre> <br><p>  Al usar esta macro, verificamos la definici√≥n de __sub0 y, si falta, realizamos la determinaci√≥n.  Como resultado, el uso de una macro desbloquea la inclusi√≥n de c√≥digo de subrutina en el archivo de salida.  En el caso de usar rutinas en macros, el c√≥digo del programa principal tomar√° la siguiente forma </p><br><pre> <code class="plaintext hljs">.INCLUDE ‚ÄúMacro.inc‚Äù ;----    ---- .INCLUDE ‚ÄúLibrary.inc‚Äù</code> </pre> <br><p>  Como ejemplo, damos una implementaci√≥n de una macro para dividir enteros sin signo de 8 bits.  Mantenemos la l√≥gica del fabricante y colocamos el resultado en <em>AL (r0)</em> , y el resto de la divisi√≥n en <em>AH (r1)</em> .  La subrutina tendr√° el siguiente aspecto </p><br><pre> <code class="plaintext hljs">_div8u: .IFDEF __ div8u ;AH -  ;AL  ;TempL -  ;TempH -  ;TempQL -  clr AL; clr AH; ldi TempQL,9 d8u_1: rol TempL dec TempQL brne d8u_2 ret d8u_2: rol A sub AH, TempH brcc d8u_3 add AH,TempH clc rjmp d8u_1 d8u_3: sec rjmp d8u_1 .ENDIF</code> </pre> <br><p>  La definici√≥n de macro para usar esta rutina ser√° la siguiente </p><br><pre> <code class="plaintext hljs">.MACRO DIV8U .IFNDEF __div8u .DEF __div8u .ENDIF mov TempL, @0 mov TempH, @1 call _div8u .ENDMACRO</code> </pre> <br><p>  Si lo desea, puede agregar una versi√≥n para trabajar con una constante </p><br><pre> <code class="plaintext hljs">.MACRO DIV8UI .IFNDEF __div8u .DEF __div8u .ENDIF mov TempL, @0 ldi TempH, @1 call _div8u .ENDMACRO</code> </pre> <br><p>  Como resultado, el uso de la operaci√≥n de divisi√≥n en el texto del programa es trivial </p><br><pre> <code class="plaintext hljs">DIV8U r10, r11 ; r0 = r10/r11 r1 = r10 % r11 DIV8UI r10, 35 ; r0 = r10/35 r1 = r10 % 35</code> </pre> <br><p>  Mediante la compilaci√≥n condicional, podemos ubicar todas las rutinas que podr√≠an sernos √∫tiles en <strong>Library.inc</strong> .  En este caso, solo aquellos que fueron llamados al menos una vez aparecer√°n en el c√≥digo de salida.  Presta atenci√≥n a la posici√≥n de la etiqueta de entrada.  La salida de la etiqueta m√°s all√° de los l√≠mites de la condici√≥n se debe a las caracter√≠sticas del compilador.  Si coloca la etiqueta en el cuerpo del bloque condicional, el compilador puede arrojar un error.  La presencia de etiquetas no utilizadas en el c√≥digo no da miedo, ya que la presencia de cualquier n√∫mero de etiquetas no afecta el resultado. </p><br><h3 id="makrosy-dlya-raboty-s-periferiey">  Macros Perif√©ricos </h3><br><p>  Una de las operaciones donde es dif√≠cil de hacer sin usar la documentaci√≥n del fabricante es inicializar dispositivos perif√©ricos.  Incluso con el uso de designaciones mnemot√©cnicas de registros y bits del c√≥digo, puede ser dif√≠cil entender en qu√© modo se configura un dispositivo en particular, especialmente porque a veces el modo se configura mediante una combinaci√≥n de valores de bits de diferentes registros.  Veamos c√≥mo se pueden usar las macros con el ejemplo de <em>USART</em> . <br>  Comencemos con la macro de inicializaci√≥n de modo as√≠ncrono. </p><br><pre> <code class="plaintext hljs">.MACRO USART_INIT ; speed, bytes, parity, stop-bits .IF CLK8 == 0 .SET DIVIDER = FOSC/16/@0-1 .ELSE .SET DIVIDER = FOSC/128/@0-1 .ENDIF ; Set baud rate to UBRR0 outi UBRR0H, HIGH(DIVIDER) outi UBRR0L, LOW(DIVIDER) ; Enable receiver and transmitter .SET UCSR0B_ = (1&lt;&lt;RXEN0)|(1&lt;&lt;TXEN0) outi UCSR0B, UCSR0B_ .SET UCSR0C_ = 0 .IF @2 == 'E' .SET UCSR0C_ |= (1&lt;&lt;UPM01) .ENDIF .IF @2 == 'O' .SET UCSR0C_ |= (1&lt;&lt;UPM00) .ENDIF .IF @3== 2 .SET UCSR0C_ |= (1&lt;&lt;USBS0) .ENDIF .IF @1== 6 .SET UCSR0C_ |= (1&lt;&lt;UCSZ00) .ENDIF .IF @1== 7 .SET UCSR0C_ |= (1&lt;&lt;UCSZ01) .ENDIF .IF @1== 8 .SET UCSR0C_ = UCSR0C_ |(1&lt;&lt;UCSZ01)|(1&lt;&lt;UCSZ00) .ENDIF .IF @1== 9 .SET UCSR0C_ |= (1&lt;&lt;UCSZ02)|(1&lt;&lt;UCSZ01)|(1&lt;&lt;UCSZ00) .ENDIF ; Set frame format outi UCSR0C,UCSR0C_ .ENDMACRO</code> </pre> <br><p>  El uso de la macro nos permiti√≥ reemplazar la inicializaci√≥n de los registros de configuraci√≥n de <em>USART</em> con valores que eran incomprensibles sin leer la documentaci√≥n por una l√≠nea que incluso aquellos que encontraron por primera vez este controlador pod√≠an manejar.  En esta macro, tambi√©n qued√≥ claro por qu√© determinamos las constantes de frecuencia y divisor.  Bueno, debe tenerse en cuenta que a pesar del impresionante c√≥digo de la macro en s√≠, el resultante tendr√° la misma apariencia que si estuvi√©ramos escribiendo la inicializaci√≥n de la manera habitual. <br>  Para finalizar con <em>USART,</em> aqu√≠ hay algunas macros m√°s peque√±as </p><br><pre> <code class="plaintext hljs"> .MACRO USART_SEND_ASYNC outi UDR0, @0 .ENDMACRO</code> </pre> <br><p>  Solo hay una l√≠nea, pero el uso de esta macro le permitir√° ver mejor d√≥nde el programa muestra los datos en <em>USART</em> .  Si suponemos trabajar en modo s√≠ncrono sin usar interrupciones, en lugar de <em>USART_SEND_ASYNC</em> es mejor usar la macro a continuaci√≥n </p><br><pre> <code class="plaintext hljs"> .MACRO USART_SEND USART_Transmit: xin TempL, UCSR0A sbrs TempL, UDRE0 rjmp USART_Transmit outi UDR0, @0 .ENDMACRO</code> </pre> <br><p>  En este caso, habilitamos la verificaci√≥n de ocupaci√≥n del puerto y mostramos datos solo cuando el puerto est√° libre.  Obviamente, este enfoque para trabajar con dispositivos perif√©ricos funcionar√° para cualquier dispositivo, y no solo para <em>USART</em> . </p><br><h3 id="sravnenie-programm-bez-i-s-ispolzovaniem-makrosov">  Comparaci√≥n de programas sin y usando macros. </h3><br><p>  Veamos un peque√±o ejemplo y comparemos el c√≥digo escrito sin usar macros con el c√≥digo donde se usan.  Por ejemplo, tome un programa que muestre el cl√°sico <strong>"¬°Hola mundo!"</strong>  a la terminal a trav√©s del hardware <em>UART</em> . </p><br><pre> <code class="plaintext hljs"> RESET: ldi r16, high(RAMEND) out SPH,r16 ldi r16, low(RAMEND) out SPL,r16 USART_Init: out UBRR0H, r17 out UBRR0L, r16 ldi r16, (1&lt;&lt;RXEN0)|(1&lt;&lt;TXEN0) out UCSRnB,r16 ldi r16, (1&lt;&lt;USBS0)|(3&lt;&lt;UCSZ00) out UCSR0C,r16 ldi ZL, LOW(STR&lt;&lt;1) ldi ZH, HIGH(STR&lt;&lt;1) LOOP: lpm r16, Z+ or r16,r16 breq END USART_Transmit: in r17, UCSR0A sbrs r17, UDRE0 rjmp USART_Transmit out UDR0,r16 rjmp LOOP END: rjmp END STR: .DB ‚ÄúHello world!‚Äù,0</code> </pre> <br><p>  Y aqu√≠ est√° el mismo programa, pero escrito usando macros </p><br><pre> <code class="plaintext hljs">.INCLUDE ‚Äúmacro.inc‚Äù .EQU FOSC = 16000000 .EQU CLK8 = 0 RESET: ldiw SP, RAMEND; USART_INIT 19200, 8, "N", 1 ldiw Z, STR&lt;&lt;1 LOOP: lpm TempL, Z+ test TempL breq END USART_SEND TempL rjmp LOOP END: rjmp END STR: .DB ‚ÄúHello world!‚Äù,0</code> </pre> <br><p>  En este ejemplo, utilizamos las macros descritas anteriormente, lo que nos permiti√≥ simplificar significativamente el c√≥digo del programa y hacerlo m√°s comprensible.  El c√≥digo binario en ambos programas ser√° absolutamente id√©ntico. </p><br><h3 id="vyvod">  Conclusi√≥n </h3><br><p>  El uso de macros puede reducir significativamente el c√≥digo de ensamblador del programa, para hacerlo m√°s comprensible y legible.  La compilaci√≥n condicional le permite crear comandos universales y bibliotecas de procedimientos sin crear c√≥digo de salida redundante.  Como inconveniente, se puede se√±alar un conjunto muy modesto seg√∫n los est√°ndares de lenguajes de alto nivel de operaciones y restricciones permitidas al declarar datos "hacia adelante".  Esta restricci√≥n no permite, por ejemplo, escribir por medio de macros un comando universal completo para las <em>transiciones jmp / rjmp</em> e infla significativamente el c√≥digo de la macro al implementar una l√≥gica compleja. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465261/">https://habr.com/ru/post/465261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465249/index.html">Conferencia de Richard Stallman en el Polit√©cnico de Mosc√∫. Agosto 2019</a></li>
<li><a href="../465251/index.html">El verano casi ha terminado. Casi no se filtraron datos</a></li>
<li><a href="../465255/index.html">Implementaci√≥n de la agrupaci√≥n de conexiones WCF para .Net Core usando HttpClientFactory</a></li>
<li><a href="../465257/index.html">‚Äú¬°Cuidado, FAS!‚Äù: Trucos de McDonald's, shawarma divino, falso Clooney y algo de magia callejera</a></li>
<li><a href="../465259/index.html">ValueTask <TResult>: ¬øpor qu√©, por qu√© y c√≥mo?</a></li>
<li><a href="../465263/index.html">Bloquea en PostgreSQL: 3. Bloquea otros objetos</a></li>
<li><a href="../465267/index.html">TypeScript Magia de expresi√≥n</a></li>
<li><a href="../465269/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 26. DNS y DHCP</a></li>
<li><a href="../465271/index.html">Los hackers roban y lavan dinero mediante la entrega de alimentos y los servicios de reserva de hotel.</a></li>
<li><a href="../465273/index.html">C√≥mo los desarrolladores de software de Microgaming protegen a los usuarios de los hacks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>