<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏿 🧙🏽 🔠 我们使用Arduino打印图片 🛋️ 🦖 🥧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="很长一段时间以来，我都想在Ardoino上进行某种项目，以便其中的所有内容都能正常工作。而且，经过几个月的设计，编程和组装，我们得到了这样的微型打印机，您可以用它在最普通的贴纸上打印各种图片和文本。如果看完视频后您非常想做这样的事情，我请一只猫。
 
 我们需要什么
 

- Arduino Uno...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我们使用Arduino打印图片</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383877/"><iframe width="560" height="315" src="https://www.youtube.com/embed/AlBPFC41FsM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
很长一段时间以来，我都想在Ardoino上进行某种项目，以便其中的所有内容都能正常工作。</font><font style="vertical-align: inherit;">而且，经过几个月的设计，编程和组装，我们得到了这样的微型打印机，您可以用它在最普通的贴纸上打印各种图片和文本。</font><font style="vertical-align: inherit;">如果看完视频后您非常想做这样的事情，我请一只猫。</font></font><br>
<a name="habracut"></a><br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们需要什么</font></font></b></h3><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Uno。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于这个项目，我使用了原始的意大利Arduino Uno开发板。</font><font style="vertical-align: inherit;">我不能保证可以在其他板上工作。</font></font></li>
<li><b> sg-90 — 3 .</b>         .</li>
<li><b> .</b>       5 ,       </li>
<li><b>.</b>      3  :   , -     ,        .          -   «».</li>
<li><b> .</b>         ,    — .</li>
<li><b>   ().</b>        —  ,         ,    .       .      1-   .</li>
<li><b>.</b>        </li>
<li><b>     .</b>     «» ,            </li>
<li><b> 4 .</b>      -. ,    , , .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蓝图。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">在此处</font></a><font style="vertical-align: inherit;">写信，我将免费将其发送给您</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a></li>
</ul><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际执行</font></font></b></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零件制造</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这个阶段取决于您的愿望和能力。</font><font style="vertical-align: inherit;">您可以在机器上切割或手动切割所有零件。</font><font style="vertical-align: inherit;">这里应注意的主要事情是该项目的质量和性能将直接取决于您的准确性。</font><font style="vertical-align: inherit;">您还需要考虑这一点：您在照片中看到的某些细节可能与图纸中的细节有些许不同。</font><font style="vertical-align: inherit;">应当立即注意，照片中显示的细节可能与附图中的细节略有不同。</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/files/5fa/11b/e02/5fa11be02d2e4c47b94749eaa1f6f10f.png"></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于那些打算手动完成所有操作的人</font></font></b><div class="spoiler_text"> ,    , :  ( ),  ( ), ,    .<br>
<br>
   —  -     .<br>
<br>
  .  ,    .         .    ,    ,    (   )    .     , / ,    .     ,  —     .<br>
<br>
      ,     :<br>
<br>
<img width="23%" src="https://habrastorage.org/files/43d/912/7be/43d9127be30e479982e0a183e0d0845e.png"> <img width="23%" src="https://habrastorage.org/files/0a7/6f2/bbf/0a76f2bbfe314d36ab3edb1b2dce5fe1.png"> <img width="23%" src="https://habrastorage.org/files/a0e/215/483/a0e21548302a4139943de723ad494c5b.png"> <img width="23%" src="https://habrastorage.org/files/924/eba/2eb/924eba2ebead49b28d12fc2f60763207.png"><br>
<br>
<img width="23%" src="https://habrastorage.org/files/14f/d24/125/14fd241250c94f1f9ca402b97ff2c0c8.png"> <img width="23%" src="https://habrastorage.org/files/675/b20/f1e/675b20f1e19f4fcb8acdeed5e33224bd.png"> <img width="23%" src="https://habrastorage.org/files/570/189/1ca/5701891ca1db40c3a01126ee4da06064.png"><br>
</div></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们收集侧壁</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
到目前为止，一切都很简单：将零件粘贴起来。</font><font style="vertical-align: inherit;">注意确保零件上没有多余的胶水。</font></font><br>
<img width="45%" src="https://habrastorage.org/files/58d/5da/3fa/58d5da3fae1342c6a5616cd595fb25e0.png"> <img width="45%" src="https://habrastorage.org/files/9ca/7a7/3c6/9ca7a73c6c804a8194f93dd2825a7c59.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将腿粘到底座上</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些腿仅代表美学价值。</font><font style="vertical-align: inherit;">如果您想节省时间，可以跳过此步骤。</font></font><br>
<img width="45%" src="https://habrastorage.org/files/30a/64d/66e/30a64d66ee624345ae30818c248fb291.png"> <img width="45%" src="https://habrastorage.org/files/85b/7b0/a8c/85b7b0a8ccee46fc8010941e967b4e87.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">放在一起</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前后板上的文字可以根据您的喜好进行更改。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/561/df1/6f8/561df16f82cc42b7a49f407239f6c08c.png"> <img width="45%" src="https://habrastorage.org/files/033/aca/376/033aca376e304c158fc8072171aa1b36.png"><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/60d/699/5fe/60d6995fee9543a387bf09ca48a39ac6.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制作纸垫</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这个阶段需要特殊的准确性和彻底性。</font><font style="vertical-align: inherit;">特别困难的是整个平台将被固定在其上的“ G”形导轨。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您需要完全按照图中所示的风险小心地粘贴薄带。</font><font style="vertical-align: inherit;">为了获得最佳效果，我使用了这种不寻常的“衣夹”，但是您可以放心使用它们。</font><font style="vertical-align: inherit;">最主要的是去除多余的胶水，并确保条带不会移动到任何地方。</font><font style="vertical-align: inherit;">在它们之上，我们将条带粘合得更宽-这里的技术是相同的。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/352/c3e/cd7/352c3ecd719143ed91f29927dfacd1c2.png"> <img width="45%" src="https://habrastorage.org/files/a72/0be/597/a720be597c4d42048d6f40b04785cdd3.png"><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/0a4/40e/3d8/0a440e3d833848829fcfd035a1825e33.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
胶干后（至少20分钟），尝试将垫子插入身体。如果她像发条一样去那里并且可以清楚地前后移动，那么您很幸运-这正是您所需要的。否则，我们会将砂纸拿在手中，并掠过其楔入的滑轨的位置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
胶合齿条应该没有问题。确保它们垂直粘贴。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/316/8f7/f3a/3168f7f3a48342888827ab53bb6b7dbc.png"> <img width="45%" src="https://habrastorage.org/files/62b/c95/1e7/62bc951e7c254d1fb7aae11d4b9d4aef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们继续进行纸张固定机构的组装。如果按此顺序收集所有内容，则不会出现问题。首先，我们粘上机架，然后将杠杆固定在机架上。然后，我们将一条胶合板粘在上面，以固定纸狐狸。然后，我们才将弹簧将要紧贴的部分粘在一起。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/4f2/e73/999/4f2e73999837402397ddb4dc1ad1a049.png"> <img width="45%" src="https://habrastorage.org/files/ace/8cf/239/ace8cf2390464da9a91e0d8167243ada.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还有几张照片可以使您更清楚地了解如何收集所有这些信息：</font></font></b><div class="spoiler_text"><img width="45%" src="https://habrastorage.org/files/821/ac3/87f/821ac387f768404bbb6978fb6df40c16.jpg"> <img width="45%" src="https://habrastorage.org/files/8e3/925/549/8e392554935a4f6dbf22356b85f958f8.jpg"> <img width="45%" src="https://habrastorage.org/files/69a/2fd/37a/69a2fd37a7544cee96664910280a9750.jpg"> <img width="45%" src="https://habrastorage.org/files/c19/4ac/4f8/c194ac4f8dcf4d39a7f8082b49429f3b.jpg"> <img width="45%" src="https://habrastorage.org/files/11c/a38/755/11ca38755d4a47b88560f2cc6cb87e3f.jpg"><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果一切都正确完成，那么您的打印机应该看起来像这样：</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/85d/5f7/0fe/85d5f70fe94644f391ce0771b3ffdfc2.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拉削机构</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，我们终于可以开始使用齿轮了......只需将它们放在约110毫米长的预先准备好的杆上，如下图所示，然后粘上超级胶水（必须均匀地涂在齿轮中心孔的壁上）。</font><font style="vertical-align: inherit;">确保齿轮齿适合齿条。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/ccc/8cd/68c/ccc8cd68cf67488ababeaf449da6a27a.png"> <img width="45%" src="https://habrastorage.org/files/24d/490/beb/24d490beb4b84eea8a9fbf1236c12f3a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
胶干后，尝试轻轻滚动杆-平台应移动。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装第一个伺服器</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，您需要准备电动机的齿轮。</font><font style="vertical-align: inherit;">每个伺服器都带有多个塑料摆动器。</font><font style="vertical-align: inherit;">必须如下图所示切割和旋转它们。</font><font style="vertical-align: inherit;">然后将其粘在齿轮上。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/eeb/77f/9d1/eeb77f9d10f643889e50bb21f5df4c99.png"> <img width="45%" src="https://habrastorage.org/files/dec/d86/b2f/decd86b2fab64b969c0c87025308f8fd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在我们继续安装驱动器。</font><font style="vertical-align: inherit;">要开始使用，请将纸垫完全推入打印机，然后逆时针滚动伺服直到其停止。</font><font style="vertical-align: inherit;">然后，您需要选择驱动器的最佳位置，即固定伺服系统，以使齿轮不会产生较大的间隙，而不会彼此抵靠。</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/36f/860/244/36f860244b1546aa86ac326b1f12038c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，您可以检查一切是否对我们有用。</font><font style="vertical-align: inherit;">为此，请通过pin9将伺服器连接到Arduino，然后从Patterns：Servo&gt; Sweep加载草图。</font><font style="vertical-align: inherit;">以防万一，我在下面给出他的代码。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">伺服扫频</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MIN_ANGLE 0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_ANGLE 180</span><font></font>
<font></font>
Servo servo;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{ <font></font>
  servo.attach(<span class="hljs-number">9</span>);<font></font>
} <font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{ 
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=MIN_ANGLE; i&lt;=MAX_ANGLE; ++i) {<font></font>
    servo.write(i); <font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
  } <font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=MAX_ANGLE; i&gt;=MIN_ANGLE; --i) {                                <font></font>
    servo.write(i);<font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
  } <font></font>
} <font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果一切正常，那就太好了。</font><font style="vertical-align: inherit;">如果没有，请尝试更改驱动器的位置或代码中的MIN_ANGLE和MAX_ANGLE值。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装第二个伺服</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，第一台电机的所有操作均类似。</font><font style="vertical-align: inherit;">唯一的区别是您需要一个〜12 mm长的小轴来固定两个齿轮。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/e73/db2/47e/e73db247e6f243f29b0dbb3ecd9d8b4b.png"> <img width="45%" src="https://habrastorage.org/files/db0/854/2f0/db08542f0d8b4c69ac52d45c77f4d0a6.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们放了一个印刷车</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您成功地达到了这个阶段，那么您在这里应该不会有任何特殊的困难。</font><font style="vertical-align: inherit;">这里最困难的事情是仔细组装托架（以免它挂出并楔住），您可能需要使用砂纸。</font><font style="vertical-align: inherit;">下一个可能的问题是齿轮齿条粘合不良。</font><font style="vertical-align: inherit;">它应严格平行于外壳的底部，最好在滑架位于离伺服驱动器最远的位置时粘上它。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/e6d/a7b/c97/e6da7bc97edb46318be775ca4bbdc8f2.png"> <img width="45%" src="https://habrastorage.org/files/c0e/bef/92a/c0ebef92a0c443a5825ecf08168b1cc1.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果一切正常，我们将使用Arduino和上述草图检查该组件，然后继续下一步。</font><font style="vertical-align: inherit;">如果不是，则问题很可能是由于齿轮或齿轮齿条胶粘不正确造成的。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后伺服</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此阶段，我们收集毡尖笔的控制杆。</font><font style="vertical-align: inherit;">我们需要能够在螺钉上钻一个侧面孔，用它来拧紧螺钉。</font><font style="vertical-align: inherit;">尝试确保在降低毡尖笔的状态下，伺服器的位置为90度，这样您就不必在代码中进行不必要的更正。</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/b04/5d1/e50/b045d1e503934c88a6f9cdc0a8fd7eaf.png"> <img width="45%" src="https://habrastorage.org/files/d33/bab/b92/d33babb92f6245c4a7bc6237796996f7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
安装电机后，我们的打印机将准备就绪。</font><font style="vertical-align: inherit;">我建议用美纹纸胶带粘贴纸垫的表面；在调试打印机期间，它可能会严重弄脏。</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/f0e/986/256/f0e986256d1e40af9c88d6d94e47a744.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一次运行和调试</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，我们将伺服器连接到我们的Arduino Uno，在此阶段无需将其放置在打印机内，这将给工作带来不便。</font><font style="vertical-align: inherit;">我们将第一个电动机连接到引脚2，将第二个电动机连接到引脚4，将第三个电动机连接到引脚6。</font><font style="vertical-align: inherit;">接下来，下载此草图。</font><font style="vertical-align: inherit;">注意！</font><font style="vertical-align: inherit;">这段代码不适用于更新版本1.6.4的IDE（我试图详细注释掉所有代码，而我将不做过多介绍）：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转过我</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">/*
*  MiniPrinter
*  Designed in May 2015
*  By Alexandrow Yegor
*/</span><font></font>
<font></font>
<span class="hljs-comment">// ,        Servo</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> {</span>
  <span class="hljs-keyword">int</span> min_angle, max_angle;<font></font>
  Servo servo;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IMG_W 64 <span class="hljs-comment">// </span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IMG_H 64 <span class="hljs-comment">// </span></span>
<span class="hljs-keyword">int</span> STEP = <span class="hljs-number">2</span>;    <span class="hljs-comment">//    1 </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IDLING_MS 4 <span class="hljs-comment">// ,     1 </span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> WRITING_MS 8</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> <span class="hljs-title">motor_x</span>, <span class="hljs-title">motor_y</span>, <span class="hljs-title">motor_p</span>;</span>
byte img[IMG_W/<span class="hljs-number">8</span>]; <span class="hljs-comment">//  </span>
                   <span class="hljs-comment">//  =  </span><font></font>
<font></font>
<span class="hljs-function">struct Motor <span class="hljs-title">newMotor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pin, <span class="hljs-keyword">int</span> a1, <span class="hljs-keyword">int</span> a2)</span> </span>{ <span class="hljs-comment">// </span>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> <span class="hljs-title">m</span>;</span><font></font>
<font></font>
  m.servo.attach(pin);<font></font>
  m.min_angle = a1;<font></font>
  m.max_angle = a2;<font></font>
<font></font>
  <span class="hljs-keyword">return</span> m;<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">gotoStart</span><span class="hljs-params">()</span> </span>{<font></font>
   motor_p.servo.write(motor_p.max_angle); <span class="hljs-comment">// </span>
   delay(<span class="hljs-number">15</span>);<font></font>
   <font></font>
   <span class="hljs-comment">//   (0; 0)</span><font></font>
   motor_x.servo.write(motor_x.min_angle);<font></font>
   motor_y.servo.write(motor_y.min_angle); <font></font>
   delay(IDLING_MS * STEP * IMG_W + <span class="hljs-number">150</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">// </span><font></font>
    motor_p.servo.write(motor_p.max_angle); <font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
    motor_x.servo.write(motor_x.min_angle);<font></font>
    motor_y.servo.write(motor_y.max_angle);<font></font>
    delay(IDLING_MS * STEP * IMG_W + <span class="hljs-number">150</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">//</span>
  Serial.begin(<span class="hljs-number">9600</span>);<font></font>
  motor_y = newMotor(<span class="hljs-number">2</span>, <span class="hljs-number">50</span>, <span class="hljs-number">180</span>);<font></font>
  motor_x = newMotor(<span class="hljs-number">4</span>, <span class="hljs-number">30</span>, <span class="hljs-number">160</span>);<font></font>
  motor_p = newMotor(<span class="hljs-number">6</span>, <span class="hljs-number">90</span>, <span class="hljs-number">99</span>);<font></font>
  gotoStart();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//,      ,     </span>
<span class="hljs-function">boolean <span class="hljs-title">nextWayIsEmpty</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>{
  <span class="hljs-keyword">for</span>(; i&lt;IMG_W; ++i) {
    <span class="hljs-keyword">if</span>(!(img[i/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(i%<span class="hljs-number">8</span>)))) <span class="hljs-keyword">continue</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printImg</span><span class="hljs-params">()</span> </span>{<font></font>
  gotoStart();<font></font>
  <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> y=<span class="hljs-number">0</span>; y&lt;IMG_H; ++y) {
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;IMG_W/<span class="hljs-number">8</span>; ++i) img[i] = Serial.read();<font></font>
      Serial.write(<span class="hljs-number">61</span>);<span class="hljs-comment">//  ,          </span><font></font>
      <font></font>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;STEP; ++i) { <span class="hljs-comment">//       ,  STEP</span>
          motor_x.servo.write(motor_x.min_angle); <span class="hljs-comment">//   </span><font></font>
          motor_y.servo.write(motor_y.min_angle + y*STEP + i); <font></font>
          delay(IDLING_MS * STEP * x + <span class="hljs-number">30</span>);<font></font>
          <font></font>
          <span class="hljs-keyword">for</span>(x=<span class="hljs-number">0</span>; x&lt;IMG_W; ++x) {<font></font>
            <font></font>
            <span class="hljs-keyword">if</span>(nextWayIsEmpty(x)) {<font></font>
              motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
              <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
            <font></font>
            <span class="hljs-comment">//  (/),    </span>
            motor_p.servo.write((img[x/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(x%<span class="hljs-number">8</span>))) ? motor_p.min_angle : motor_p.max_angle);<font></font>
            delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
            <font></font>
            <span class="hljs-comment">//     X</span><font></font>
            motor_x.servo.write(motor_x.min_angle + x*STEP);<font></font>
            delay(((img[x/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(x%<span class="hljs-number">8</span>))) ? WRITING_MS : IDLING_MS) * STEP); <font></font>
        }<font></font>
        <font></font>
        <span class="hljs-comment">// </span><font></font>
        motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
      }<font></font>
    <font></font>
    <span class="hljs-comment">// </span><font></font>
    motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
  }<font></font>
    <font></font>
  gotoStart();<font></font>
  Serial.flush();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-comment">//     ,    </span>
<span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">checkMessage</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span>(Serial.available()) {<font></font>
      delay(<span class="hljs-number">10</span>);<font></font>
      byte msg[] = {Serial.read(), Serial.read()};<font></font>
      <font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'P'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'R'</span>) printImg(); <span class="hljs-comment">//</span>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'S'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'T'</span>) gotoStart(); <span class="hljs-comment">//   (0; 0)</span>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'C'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'L'</span>) finish(); <span class="hljs-comment">//" "</span>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'S'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'Z'</span>) STEP = Serial.read(); <span class="hljs-comment">//    </span>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'P'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'T'</span>) { <span class="hljs-comment">//     (PT+1 -   , PT-2  2  )</span>
        <span class="hljs-keyword">if</span>(Serial.read() == <span class="hljs-string">'+'</span>) {<font></font>
          byte b = Serial.read();<font></font>
          motor_p.min_angle += b-<span class="hljs-string">'0'</span>;<font></font>
          motor_p.max_angle += b-<span class="hljs-string">'0'</span>;<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          byte b = Serial.read();<font></font>
          motor_p.min_angle -= b-<span class="hljs-string">'0'</span>;<font></font>
          motor_p.max_angle -= b-<span class="hljs-string">'0'</span>;<font></font>
        }<font></font>
      }  <font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
  checkMessage();<font></font>
}<font></font>
<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果到目前为止，您已经对所有系统进行了测试和调试，则应该没有问题：纸张平台应略微抽动，并且打印托架应位于最左侧。如果以上任何一项都未到达边缘，或者相反，靠在墙壁上，请尝试在setup（）函数中选择参数。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果遇到更严重的问题，建议您再次仔细阅读整个教程，并检查所有操作是否正确。此外，最好使用第一个清单（伺服扫描）再次检查每个电动机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，我们将打印机连接到计算机并运行该</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（我们需要安装Java）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，我们选择要连接打印机的串行端口，然后按“确定”按钮，然后打印机应稍微扭转纸垫。然后单击“日志”按钮。我们打开了一个终端窗口。接下来，输入CL命令-打印机应向内推压垫。如果输入ST，打印机将返回其原始位置。您还可以连续发送多个命令，例如：CLSTCL。最主要的是不要在团队之间使用空格和其他字符。</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/files/5ba/ec2/3be/5baec23be65546d09251c02a11c6406c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果我们能够解决这些问题，请继续-用毡尖的笔安装杠杆。首先，将毡尖笔固定在手柄上。从其尖端到杠杆下边缘的距离应约为25毫米。然后，您需要拧紧螺钉，以使毡尖笔固定不动。现在，只需将此杆放在伺服器的轴上-毡尖笔的笔尖到纸张的距离应约为7毫米。更准确地说，可以使用PT +1和PT-1命令来调整高度。他们调整标记的角度，而不是1，可以是0到9之间的任何数字。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在最关键的时刻到了-打印第一张图片。小型64x64图片最适合。我建议使用此Mario：</font><font style="vertical-align: inherit;">
首先</font></font><br>
<br>
<img src="https://habrastorage.org/files/8d2/7de/3f6/8d27de3f6dc04c9b892e31bdf4271f53.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载，</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您需要打开图像：</font></font><br>
<br>
<div style="text-align:center;"><img width="60%" src="https://habrastorage.org/files/c39/95e/7dd/c3995e7ddc784328a3b1d5c38440fdaa.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用右侧的滑块，您可以根据自己的喜好调整图像的对比度。值得记住的是，黑色像素越多-图片打印时间越长。</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/c73/666/cf5/c73666cf5293464fa2a4c017caa1b70d.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
就是这样 </font><font style="vertical-align: inherit;">然后，您只需按下“打印”按钮，即可欣赏您的创作工作。</font><font style="vertical-align: inherit;">在此阶段，唯一可能的问题是按下毡尖笔。</font><font style="vertical-align: inherit;">他要么太用力要么根本不用力。</font><font style="vertical-align: inherit;">除了通过终端控制毡尖笔的高度外，您还可以尝试手动调节高度。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，您需要自担风险，可以更改草图中的全局变量的值：以打印的速度和大小来玩。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一旦您对生成的图片的质量感到满意，就可以通过用螺钉将Arduino安全地放在打印机外壳中-这可以视为您的项目，可以向所有朋友炫耀！</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结论</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
就这样，我希望您对这个项目感兴趣。</font><font style="vertical-align: inherit;">当然，它具有</font><font style="vertical-align: inherit;">实现功能的</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺点</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此仍有改进，改进和发展的空间。</font><font style="vertical-align: inherit;">我将很高兴收到评论中的任何建议，问题和建议。</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN383877/">https://habr.com/ru/post/zh-CN383877/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN383865/index.html">伯克利地震学家创建了地球深层的3D地图</a></li>
<li><a href="../zh-CN383867/index.html">虚拟现实中的性爱即将到来：玩具准备就绪（18+）</a></li>
<li><a href="../zh-CN383871/index.html">智能手机DEXP Ixion ML2 5英寸：功能强大的电池，可记录5,200 mAh，具有高清屏幕和一周的自治</a></li>
<li><a href="../zh-CN383873/index.html">3D金属打印使用激光系统和先进的机器人</a></li>
<li><a href="../zh-CN383875/index.html">HTML5版本的StarCraft</a></li>
<li><a href="../zh-CN383881/index.html">DeviceHive v 0.3固件中的ESP8266的无线配置</a></li>
<li><a href="../zh-CN383885/index.html">如何在不离开家的情况下进行科学发现？</a></li>
<li><a href="../zh-CN383891/index.html">史蒂夫·沃兹尼亚克（Steve Wozniak）最终喜欢迈克尔·法斯宾德（Michael Fassbender）担任主角的关于史蒂夫·乔布斯的电影</a></li>
<li><a href="../zh-CN383893/index.html">波兰业余火星巡回赛</a></li>
<li><a href="../zh-CN383895/index.html">回顾华硕ZenPad C 7.0平板电脑</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>