<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äç‚öñÔ∏è üåë üçã Yandex stellt RPKI vor ü§º üö¥üèΩ ü§úüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, ich hei√üe Alexander Azimov. Bei Yandex entwickle ich verschiedene √úberwachungssysteme sowie eine Transportnetzarchitektur. Aber heute werden wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Yandex stellt RPKI vor</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/467391/">  Hallo, ich hei√üe Alexander Azimov.  Bei Yandex entwickle ich verschiedene √úberwachungssysteme sowie eine Transportnetzarchitektur.  Aber heute werden wir √ºber BGP sprechen. <br><br><img src="https://habrastorage.org/webt/se/fl/c6/seflc6gr46dhwzh_g-9ywy7ucb0.png"><br><br>  Vor einer Woche hat Yandex ROV (Route Origin Validation) an den Kreuzungen mit allen Peer-Partnern sowie mit Verkehrsaustauschpunkten aufgenommen.  Lesen Sie weiter unten, warum dies getan wurde und wie sich dies auf die Interaktion mit Telekommunikationsbetreibern auswirkt. <br><br><a name="habracut"></a><h3>  BGP und was ist daran falsch? </h3><br>  Sie wissen wahrscheinlich, dass BGP als dom√§nen√ºbergreifendes Routing-Protokoll konzipiert wurde.  W√§hrend der Reise konnte die Anzahl der Benutzerf√§lle jedoch zunehmen: Heute hat sich BGP dank zahlreicher Erweiterungen zu einem Nachrichtenbus entwickelt, der Aufgaben vom VPN des Betreibers bis zum jetzt modischen SD-WAN abdeckt, und sogar als Transportmittel f√ºr den SDN-√§hnlichen Controller verwendet, der sich dreht Entfernungsvektor BGP in etwas √Ñhnliches wie das Verbindungszustandsprotokoll. <br><br><img src="https://habrastorage.org/webt/8j/zv/vm/8jzvvm3jevj3u8oc_f-oazc2vdc.png"><br><h5>  <sub>Abb.</sub>  <sub>1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BGP SAFI</a></sub> </h5><br>  Warum hat BGP so viele Verwendungen erhalten (und erh√§lt sie auch weiterhin)?  Es gibt zwei Hauptgr√ºnde: <br><br><ul><li>  BGP ist das einzige Protokoll, das zwischen autonomen Systemen (AS) funktioniert. </li><li>  BGP unterst√ºtzt Attribute im TLV-Format (Typ-L√§nge-Wert).  Ja, das Protokoll ist damit nicht allein, aber da es an den Verbindungsstellen zwischen Telekommunikationsbetreibern nichts zu ersetzen gibt, ist es immer rentabler, ein Funktionselement mehr daran zu befestigen, als ein zus√§tzliches Routing-Protokoll zu unterst√ºtzen. </li></ul><br>  Was ist los mit ihm?  Kurz gesagt, dem Protokoll fehlen integrierte Mechanismen zur √úberpr√ºfung der Richtigkeit der empfangenen Informationen.  Das hei√üt, BGP ist ein Protokoll von vornherein: Wenn Sie der Welt mitteilen m√∂chten, dass Sie jetzt ein Netzwerk von Rostelecom, MTS oder Yandex besitzen, bitte! <br><br><h3>  IRRDB-Filter - Das Beste vom Schlimmsten </h3><br>  Es stellt sich die Frage, warum das Internet in einer solchen Situation immer noch funktioniert.  Ja, es funktioniert die meiste Zeit, aber es explodiert regelm√§√üig und macht ganze nationale Segmente unzug√§nglich.  Trotz der Tatsache, dass die Hacking-Aktivit√§t in BGP ebenfalls zunimmt, treten die meisten Anomalien immer noch aufgrund von Fehlern auf.  Ein Beispiel f√ºr dieses Jahr ist der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fehler eines kleinen Betreibers</a> in Belarus, der eine halbe Stunde lang einen erheblichen Teil des Internets f√ºr MegaFon-Benutzer unzug√§nglich machte.  Ein weiteres Beispiel: Der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">w√ºtende BGP-Optimierer hat</a> eines der gr√∂√üten CDN-Netzwerke der Welt zerst√∂rt. <br><br><img src="https://habrastorage.org/webt/mw/0y/lo/mw0yloyk-a3m8j3dzod7acrqx6q.png" width="600"><br><h5>  <sub>Abb.</sub>  <sub>2. Abfangen des Cloudflare-Verkehrs</sub> </h5><br>  Aber warum treten solche Anomalien alle sechs Monate und nicht jeden Tag auf?  Weil Telekommunikationsbetreiber externe Routing-Informationsdatenbanken verwenden, um zu √ºberpr√ºfen, was ihre Nachbarn von BGP erhalten.  Es gibt viele solcher Datenbanken, einige von ihnen werden von Registraren (RIPE, APNIC, ARIN, AFRINIC) verwaltet, einige sind unabh√§ngige Akteure (die bekanntesten - RADB) und es gibt auch eine ganze Reihe von Registraren, die gro√üen Unternehmen geh√∂ren (Level3, NTT usw.).  Dank dieser Datenbanken beh√§lt das dom√§nen√ºbergreifende Routing die relative Stabilit√§t seiner Arbeit bei. <br><br>  Es gibt jedoch Nuancen.  Routeninformationen werden basierend auf den Objekten ROUTE-OBJECTS und AS-SET √ºberpr√ºft.  Und wenn erstere eine Autorisierung f√ºr den IRRDB-Teil implizieren, fehlt die Autorisierung als Klasse f√ºr die zweite Klasse.  Das hei√üt, jeder kann jeden zu seinen Sets hinzuf√ºgen und dadurch die Filter h√∂herer Lieferanten umgehen.  Dar√ºber hinaus kann die Eindeutigkeit der AS-SET-Benennung zwischen verschiedenen IRR-Basen nicht garantiert werden, was zu erstaunlichen Effekten mit einem pl√∂tzlichen Verbindungsverlust beim Telekommunikationsbetreiber f√ºhren kann, der seinerseits nichts ge√§ndert hat. <br><br>  Ein weiteres Problem ist das AS-SET-Nutzungsmodell.  Es gibt zwei Punkte: <br><br><ul><li>  Wenn ein Bediener einen neuen Client hat, f√ºgt er ihn seinem AS-SET hinzu, entfernt ihn jedoch fast nie. </li><li>  Filter selbst werden nur an Junctions mit Clients konfiguriert. </li></ul><br>  Infolgedessen verschlechtert das moderne Format von BGP-Filtern die Filter an den Schnittstellen zu Kunden allm√§hlich und vertraut a priori auf das, was von Peer-to-Peer-Partnern und IP-Transitanbietern kommt. <br><br>  Was ersetzt Pr√§fixfilter basierend auf AS-SET?  Das Interessanteste ist, dass kurzfristig nichts.  Es gibt jedoch zus√§tzliche Mechanismen, die den Betrieb von auf IRRDB basierenden Filtern erg√§nzen, und zuallererst handelt es sich nat√ºrlich um RPKI. <br><br><h3>  RPKI </h3><br>  Vereinfacht k√∂nnen Sie sich die RPKI-Architektur als verteilte Datenbank vorstellen, deren Datens√§tze kryptografisch √ºberpr√ºft werden k√∂nnen.  Im Fall von ROA (Route Object Authorization) ist der Eigent√ºmer des Adressraums der Unterzeichner, und der Datensatz selbst ist ein Tripel (Pr√§fix, asn, max_length).  Tats√§chlich postuliert dieser Eintrag Folgendes: Der Eigent√ºmer des Adressraum-Pr√§fixes $ erlaubte dem AS mit der Nummer $ asn, Pr√§fixe mit einer L√§nge von nicht mehr als $ max_length anzuk√ºndigen.  Router, die den RPKI-Cache verwenden, k√∂nnen unterwegs die Konformit√§t mit zwei <i>Pr√§fix-First-Lautsprechern</i> √ºberpr√ºfen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pc/ir/5f/pcir5ftpb07o2prtpop5mdtdae4.png" width="600"></div><br><h5>  <sub>Abbildung 3. RPKI-Architektur</sub> </h5><br>  ROA-Objekte sind seit langem standardisiert, blieben aber bis vor kurzem tats√§chlich nur auf dem Papier des IETF-Journals.  Meiner Meinung nach klingt der Grund daf√ºr be√§ngstigend - schlechtes Marketing.  Nach Abschluss der Standardisierung wurde argumentiert, dass ROAs vor BGP-Hijacking sch√ºtzen - und das stimmte nicht.  Angreifer k√∂nnen ROA-Filter leicht umgehen, indem sie am Anfang des Pfads die richtige Lautsprechernummer eingeben.  Und sobald dieses Bewusstsein kam, war der n√§chste logische Schritt die Ablehnung der Verwendung von ROA.  Und warum brauchen wir Technologie, wenn sie nicht funktioniert? <br><br>  Warum ist es Zeit, deine Meinung zu √§ndern?  Weil das nicht die ganze Wahrheit ist.  ROA sch√ºtzt nicht vor Hacking-Aktivit√§ten in BGP, sondern <b>vor versehentlichem Entf√ºhren von Datenverkehr</b> , z. B. vor statischen Lecks in BGP, die immer h√§ufiger auftreten.  Im Gegensatz zu IRR-basierten Filtern kann ROV nicht nur an Schnittstellen zu Kunden, sondern auch an Schnittstellen zu Kollegen und h√∂heren Lieferanten verwendet werden.  Das hei√üt, mit der Einf√ºhrung von RPKI verl√§sst BGP allm√§hlich a priori das Vertrauen. <br><br>  Jetzt wird die ROA-basierte Routenpr√ºfung schrittweise von den Hauptakteuren eingef√ºhrt: Die gr√∂√üten europ√§ischen IX verwerfen bereits falsche Routen. Unter den Tier-1-Betreibern ist AT &amp; T hervorzuheben, das an den Kreuzungen mit seinen Peering-Partnern Filter aktiviert hat.  Auch die gr√∂√üten Inhaltsanbieter sind f√ºr die Shell geeignet.  Und Dutzende mittelgro√üer Transitunternehmen haben es bereits leise umgesetzt, ohne es jemandem zu sagen.  Warum implementieren all diese Betreiber RPKI?  Die Antwort ist einfach: Sch√ºtzen Sie Ihren ausgehenden Verkehr vor Fehlern anderer.  Aus diesem Grund ist Yandex einer der ersten in der Russischen F√∂deration, der ROV an der Grenze seines Netzwerks einbezieht. <br><br><h3>  Was wird als n√§chstes passieren? </h3><br>  Jetzt haben wir die Routing-Informationen an den Kreuzungen mit Verkehrsaustauschpunkten und privatem Peer-to-Peer √ºberpr√ºft.  In naher Zukunft wird die √úberpr√ºfung auch bei vorgelagerten Verkehrsanbietern durchgef√ºhrt. <br><br><img src="https://habrastorage.org/webt/wm/kt/8c/wmkt8cnykp91dxaote-qw6ko9vu.png"><br><br>  Was √§ndert sich f√ºr Sie?  Wenn Sie die Sicherheit des Verkehrsroutings zwischen Ihrem Netzwerk und Yandex erh√∂hen m√∂chten, empfehlen wir: <br><br><ul><li>  Das Signieren Ihres Adressraums <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im RIPE-Portal</a> ist einfach und dauert durchschnittlich 5-10 Minuten.  Dies sch√ºtzt unsere Konnektivit√§t f√ºr den Fall, dass jemand unfreiwillig Ihren Adressraum entf√ºhrt (und dies wird fr√ºher oder sp√§ter geschehen). </li><li>  Das Einf√ºgen eines der Open-Source-RPKI-Caches ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ripe-Validator</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Routinator</a> ) und das Aktivieren der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Routenpr√ºfung</a> an der Netzwerkgrenze <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dauert</a> l√§nger, verursacht jedoch keine technischen Schwierigkeiten. </li></ul><br>  Yandex unterst√ºtzt auch die Entwicklung eines Filtersystems basierend auf dem neuen RPKI-Objekt - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ASPA</a> (Autonomous System Provider Authorization).  Filter, die auf ASPA- und ROA-Objekten basieren, k√∂nnen nicht nur ‚Äûundichte‚Äú AS-SETs ersetzen, sondern auch MiTM-Angriffe mit BGP schlie√üen. <br><br>  Ich werde in einem Monat auf der Next Hop-Konferenz ausf√ºhrlich √ºber ASPA sprechen.  Es wird auch Kollegen von Netflix, Facebook, Dropbox, Juniper, Mellanox und Yandex geben.  Wenn Sie sich f√ºr den Netzwerkstapel und seine zuk√ºnftige Entwicklung interessieren, ist die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Registrierung offen</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467391/">https://habr.com/ru/post/de467391/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467381/index.html">Mehrst√∂ckige LEDs, intelligente Lichter und Gl√ºhbirnen f√ºr 18 Rubel</a></li>
<li><a href="../de467383/index.html">"Der Manager muss weiter codieren": Interview mit Stephen Chin</a></li>
<li><a href="../de467385/index.html">Eine Auswahl psychologischer und atypischer technischer Fragen aus Java-Entwicklerinterviews</a></li>
<li><a href="../de467387/index.html">L√∂sungen f√ºr die Arbeit mit Feedback und Kundenerfahrung: von kleinen Diensten bis zu schweren Plattformen</a></li>
<li><a href="../de467389/index.html">Pinterest Sharding: Wie wir unseren MySQL Park skaliert haben</a></li>
<li><a href="../de467393/index.html">Das NX Bootcamp startet im Oktober</a></li>
<li><a href="../de467395/index.html">Habr Weekly # 18 / New Apple Gadgets, ein vollmodulares Smartphone, das Dorf der Programmierer in Wei√ürussland, das XY-Ph√§nomen</a></li>
<li><a href="../de467399/index.html">Sie k√∂nnen nicht verbieten, Folgendes mitzubringen: wie Sie das BYOD-Konzept implementieren und die Informationssicherheit nicht beeintr√§chtigen</a></li>
<li><a href="../de467401/index.html">Vergleich von Tesla Model S und Porsche Taycan</a></li>
<li><a href="../de467403/index.html">Was Sie aus Webkomponenten herausholen k√∂nnen und was nicht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>