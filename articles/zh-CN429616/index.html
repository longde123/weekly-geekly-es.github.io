<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖍️ 👩‍🏫 🤽 数字工作区第1部分：Citrix 👩‍👦‍👦 👨‍🔧 🧝🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="说到太空飞船，在莫斯科大剧院的广阔土地上耕作，对公司进行数字化转型，没有人解释要进入这个非常数字化的时代需要采取哪些具体步骤。 在本系列文章中，我们不会一次谈论所有内容，而是谈论其中一个领域-工作空间的数字化（数字工作空间）。 我们将描述该地区每个领先的制造商如何理解它，以及IT专业人员应如何处理所...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>数字工作区第1部分：Citrix</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/429616/"> 说到<s>太空飞船，在莫斯科大剧院的广阔土地上耕作，</s>对公司<s>进行</s>数字化转型，没有人解释要进入这个非常数字化的时代需要采取哪些具体步骤。 在本系列文章中，我们不会一次谈论所有内容，而是谈论其中一个领域-工作空间的数字化（数字工作空间）。 我们将描述该地区每个领先的制造商如何理解它，以及IT专业人员应如何处理所有这些。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31f/530/c52/31f530c52968de40774a6cb19feeca43.png" width="500"></div><br><a name="habracut"></a><br><h2> 沉浸在Citrix中 </h2><br>  IT世界并没有停滞不前：每个供应商都在开发其产品，并将新的东西带入硬件和软件领域。  Citrix作为虚拟化，网络负载平衡和用户协作解决方案的领导者，最近推出了新产品。 供应商积极开发的主要领域是终端服务和工作场所虚拟化（VDI）。 <br><br> 在设计IT项目时，我们解决了许多问题。 通常，第一个选择是在终端解决方案和VDI之间进行选择。 计算预算估算时，虚拟化技术的成本更高，但是虚拟化技术允许您使用来宾操作系统创建隔离的环境。 每个客户端使用隔离的操作系统可以提高环境的安全性并避免应用程序冲突。 在终端环境中，当一个应用程序无法在多用户模式下运行时会出现这种情况。 回答“选择什么”的问题。 您可以通过以测试模式部署Citrix解决方案，并检查与特定公司中使用的应用程序的兼容性。 <br><br> 假设我们选择了VDI。 除了基本的入门数据（用户数量，可集成的应用程序，一个虚拟位置的技术参数等）之外，还需要回答一个问题-您需要保存多长时间才能在虚拟工作场所中进行更改？ 无法保存数据的虚拟工作站称为非持久性，而具有保存功能的虚拟工作站称为持久性。 虚拟工作站中存储的数据分为两个组件：appdata（已安装的应用程序）和用户配置文件（带有数据的用户配置文件）。 如果积极使用Citrix用户配置文件管理或Microsoft漫游配置文件来管理用户配置文件，则用户应用程序的情况将更加复杂。 如果没有Personal vDisk或之前使用完整克隆，则根本无法实现此类功能。 <br><br> 仅在分析基础架构之后才可以确定解决方案。 例如，在我们的一个项目中，客户使用了萨摩皮斯尼门户网站进行应用程序交付。 换句话说，用户可以通过Web浏览器登录，选择必要的应用程序，并根据Active Directory中分配给他的安全组在他们的工作场所中安装它们。 这种应用程序交付机制阻止了使用非持久性VDI和所需的数据存储。 <br><br> 还有另一种情况，客户使用终端场来交付所有应用程序。 在这种情况下，不需要持久性VDI。 这使您可以节省虚拟工作站上的计算资源，并满足终端服务的需求，而仅在虚拟工作站中保留那些需要隔离环境的应用程序。 从用户的角度来看，一切看起来像是正常的工作场所。 <br><br> 下面，我们将介绍Citrix的主要创新，这将使我们能够在最近更新后更好地浏览其技术。 <br><br><h2> 品牌重塑 </h2><br> 首先，我要指出供应商对更改其产品名称的不可思议的热爱。 至少要考虑主要因素，许多主要因素已经让他们爱上了Citrix。 一旦不被调用：Metaframe，Presentation Server和XenApp。 现在已落户虚拟应用程序。 该功能在任何地方都保持不变-提供对服务器应用程序的访问。 <br><br> 那些正在查看供应商新闻的人可能已经知道，还有另一种产品更名，现在以一种新的方式来称呼他们。 这不仅适用于终端访问组织的决策，还适用于其他产品线。 下图显示了旧名称和新名称。 不要感到困惑:) <br><br><img src="https://habrastorage.org/webt/2i/mg/bl/2imgbl71wm0ud02icn2p4gng5_s.png"><br><br> 不仅我们熟悉的产品名称已更改，而且每个解决方案的编辑级别也已更改。 请注意避免在XenApp产品的版本中造成混淆：现在，高级级别不是起始许可证，而是等同于企业级别的许可证。 下表显示了所有更改： <br><br><table><tbody><tr><td>  <b>过时的名称</b> <br></td><td>  <b>不推荐使用的版本</b> <br></td><td>  <b>新名字</b> <br></td><td>  <b>新版</b> <br></td></tr><tr><td>  Xenapp <br></td><td> 进阶 <br></td><td> 虚拟应用 <br></td><td> 标配 <br></td></tr><tr><td>  Xenapp <br></td><td> 企业版 <br></td><td> 虚拟应用 <br></td><td> 进阶 <br></td></tr><tr><td>  Xenapp <br></td><td> 铂金 <br></td><td> 虚拟应用 <br></td><td> 保费 <br></td></tr><tr><td>  XenDesktop <br></td><td>  Vdi <br></td><td> 虚拟桌面 <br></td><td> 标配 <br></td></tr><tr><td>  XenDesktop <br></td><td> 企业版 <br></td><td> 虚拟应用程序和桌面 <br></td><td> 进阶 <br></td></tr><tr><td>  XenDesktop <br></td><td> 铂金 <br></td><td> 虚拟应用程序和桌面 <br></td><td> 保费 <br></td></tr><tr><td>  XenServer的 <br></td><td> 标配 <br></td><td> 管理程序 <br></td><td> 标配 <br></td></tr><tr><td>  XenServer的 <br></td><td> 企业版 <br></td><td> 管理程序 <br></td><td> 保费 <br></td></tr><tr><td>  NetScaler ADC VPX <br></td><td> 标配 <br></td><td>  ADC VPX <br></td><td> 标配 <br></td></tr><tr><td>  NetScaler ADC VPX <br></td><td> 企业版 <br></td><td>  ADC VPX <br></td><td> 进阶 <br></td></tr><tr><td>  NetScaler ADC VPX <br></td><td> 铂金 <br></td><td>  ADC VPX <br></td><td> 保费 <br></td></tr></tbody></table><br><h2>  Citrix App分层 </h2><br> 除了更改名称之外，我还要注意主要制造商的VDI解决方案的更新愿景。 我们正在谈论使用软件构建设计，该软件可让您将图像分为几层。 对于VMware，它称为App Volume，对于Citrix，它称为App Layering。 值得注意的是，这两种解决方案不仅可以与制造商的VDI配合使用，而且还可以与竞争对手的解决方案配合使用，例如与VMware Horizo​​n合作。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/88a/f9b/e64/88af9be648883c081ed4880e99c24b58.png"><br><br> 该解决方案的主要思想是创建不同的层，例如，使用操作系统，虚拟化环境或应用程序，然后将它们编译为用户的工作映像。 这很快就完成了，对于不同的用户组及其应用程序，输出的图像类型多种多样。 <br><br>  Citrix App Layering使用以下层： <br><br><ul><li> 平台（平台层） </li><li> 操作系统（操作系统层） </li><li> 应用程序（应用程序层） </li><li> 个人（用户层） </li></ul><br> 每一层都由某些应用程序组成，并负责其功能（请参见下文）。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c2/1e5/9ff/3c21e59ff004dfef4a46b4ed92a529c7.png"><br><br> 从这些层组装一个整体图像，然后将其交付给用户。 每层必须事先准备。 建立映像的过程不会花费很多时间。 <br><br> 除了使用整体图像之外，App Layering还可以通过Elastic Layering将应用程序层交付到虚拟桌面。 此功能使您可以根据要求个性化您的用户环境。 此功能通过Active Directory中的安全组进行管理，该安全组允许您将应用程序套件添加到虚拟桌面。 <br><br> 许可规则如下表所示： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d68/41a/319/d6841a31923103eb68dd8b39b05b0bde.png"><br><br>  <b>重要说明</b> ：应用程序分层仅在Citrix（客户成功服务）的积极支持下可用。 <br><br><h2>  VDI设计以及如何在其中使用Citrix App分层 </h2><br> 让我们谈谈VDI解决方案的设计。 在确定了持久性和非持久性虚拟工作站的数量之后，有必要确定其创建机制。 为此可以使用两种技术：机器创建服务（MCS）和预配服务（PVS）。 主要区别如下。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e8a/741/1f8/e8a7411f8b4ee5a3cb37990ad7f6a206.png"><br>  <i>桌面部署机制的比较</i> <br><br>  MCS通过将Citrix Studio管理控制台调用到虚拟化管理服务器API（vCenter，VMM，XenCenter）来工作。 通过必要的命令，可以执行基本操作来创建，删除或修改虚拟机的目录。 部署Citrix Virtual Apps and Desktops时，该服务与连接代理一起安装。 使用MCS，您可以创建两种类型的虚拟工作站：快速克隆（快速克隆）和完全克隆（完全克隆）。 如果使用完全克隆清除了所有内容，因为它是主映像的完整副本，则将根据以下原理生成快速克隆：从主映像创建具有两个附加差异磁盘和ID磁盘的虚拟工作场所。 我必须说id磁盘也存在于完整克隆中，并存储有关域成员身份的信息。 该磁盘的大小为16 MB。 差异磁盘存储主映像更改。 创建目录时，将为所有虚拟工作站设置此磁盘的大小。 重新引导时，差异磁盘将重置为零，因此您不能使用它来构建持久性VDI解决方案。 为了使用快速克隆实施持久性VDI，使用了其他个人vDisk技术，下面将对此进行详细介绍。 <br><br>  PVS用作流下载服务。 它安装在单独的服务器上，具有自己的管理控制台。 对虚拟化环境管理服务器API的调用也会发生，但程度要小得多。 加载虚拟工作站时，通过网络执行基本操作。 有些人害怕附加的控制台，因为 这会使管理复杂化，但我敦促您不要害怕。  PVS服务大大简化了虚拟桌面的更新。 它们是从映像存储（标准网络存储smb或PVS服务器本地磁盘上的目录）下载的。 该映像是引导时使用的服务文件和虚拟硬盘（.vhd）。 由于这项服务，更新过程非常简单-您只需要连接另一个虚拟硬盘并重新启动工作站即可。 当然，使用这样的服务会创建非持久性虚拟工作站（请注意：该服务具有一种缓存方法，可让您保存所有更改，但实际上我没有看到这样的解决方案，因此我不推荐它们）。 为了使用PVS服务实现持久VDI，使用了与快速克隆相同的原理。 <br><br> 由于技术的不同，负载分别落在各个组件上。 如果在使用PVS服务的情况下，网络上有很大的负载，那么在使用MCS服务的情况下，负载在所使用的数据存储系统上。 <br><br> 我将举例说明我设法实现的VDI解决方案的主要设计： <br><br><ol><li> 使用MCS服务使用差异磁盘（快速克隆）或PVS服务创建克隆，并将所有更改（应用程序数据\用户配置文件）存储在专用个人磁盘（个人虚拟磁盘）上。 </li><li> 由于存储系统具有重复数据删除和压缩功能，因此使用MCS服务创建完整克隆并节省磁盘空间。 </li><li> 使用MCS服务使用快速克隆或PVS服务创建克隆，并使用Citrix用户配置文件管理技术移动用户配置文件。 当然，这不是完整的持久VDI，在这种设计中，用户仅存储存储在用户配置文件和用户数据中的应用程序设置。 无法以这种配置安装应用程序，因为 重新引导虚拟桌面后，更改将回滚。 呼叫中心通常使用类似的设计。 </li></ol><br> 最常见的是，我观察到第一种设计的实现或2和3个选项的混合解决方案。 <br><br><h2>  RIP，个人虚拟磁盘 </h2><br>  Citrix宣布不再开发个人vDisk技术后，第一种设计的实施变得不切实际。 客户开始放弃这个想法，而个人vDisk技术本身也有许多缺点。 在我的实践中，该解决方案在虚拟工作站的静态使用中效果很好，也就是说，当将虚拟工作站分配给一个用户时，相应地，将个人磁盘连接到该磁盘，并存储所有更改。 当用户获得新的虚拟桌面并将个人磁盘连接到虚拟桌面时，随机使用虚拟桌面和个人磁盘通常会引起问题。 但是，仍然可以将第一种设计与静态分配的虚拟工作站一起使用，从而可以大大节省磁盘空间，可以将虚拟工作场所中的用户数据和已安装的应用程序放置在“慢速”磁盘上，并且为了不丢失操作系统性能，需要进行所有更改来自主映像（差异磁盘），放在“快速”磁盘上。 这种设计可以大大节省磁盘空间，并且不会损失虚拟工作站的生产力。 <br><br> 在Citrix App Layering解决方案中，宣布一个层（用户层）将允许实现类似于个人vDisk的功能，但是将近一年的时间该层仍处于实验室状态。 在9月25日的下一次更新中，有关此主题的更新最终出现<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在App Layering文档中</a> ，并宣布用户层可用于生产环境。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/60c/58d/6e8/60c58d6e8736897bff7e22b78bfb5e65.png"><br><br> 一个重要的更新，使您可以使用Citrix App Layering解决方案和用户层来实施类型1设计，以存储用户数据和用户安装的应用程序。 <br><br><h2> 结论与建议 </h2><br> 经典的虚拟工作场所组织的明显问题迫使Citrix重新考虑其针对混合多层虚拟机结构的方法，该方法允许在非持久性环境中创建持久性VDI（展望未来，其他供应商也是如此）。 <br><br> 在Citrix的现实中，重点放在Citrix App Layering的开发上，因此，我建议在开发VDI草图时仔细研究此解决方案。 该产品将显着降低维修主图像所需的人工成本，使您可以快速编译不同部门所需的图像，当然，由于使用了弹性层，因此可以提高解决方案的灵活性。 并且不要忘记用户层，借助它您可以实现第一种类型的设计。 <br><br>  <i>计算复合体高级设计工程师Roman Mirzayanov，</i> <i><br></i>  <i>喷气信息系统</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN429616/">https://habr.com/ru/post/zh-CN429616/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN429602/index.html">图灵无处不在的完整性</a></li>
<li><a href="../zh-CN429604/index.html">联想S730-13（2018）笔记本电脑评测：坚固的金属外壳，时尚的铝制外壳</a></li>
<li><a href="../zh-CN429606/index.html">该死的十几个人：项目经理的书籍清单</a></li>
<li><a href="../zh-CN429610/index.html">有关如何运行Android模拟器或在Intel处理器上保存的故事</a></li>
<li><a href="../zh-CN429612/index.html">Fulsteks是永恒的MIDL。 如果你不想受苦，不要走这条路</a></li>
<li><a href="../zh-CN429618/index.html">电子游戏XO</a></li>
<li><a href="../zh-CN429620/index.html">如何为游戏创建大洲地图</a></li>
<li><a href="../zh-CN429622/index.html">机器人用20,000名工人取代了亚马逊</a></li>
<li><a href="../zh-CN429624/index.html">美国宇航局将如何使用机器人从火星土壤中制造火箭燃料</a></li>
<li><a href="../zh-CN429626/index.html">基因组破解者表明，不再有DNA将是匿名的</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>