<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ โ๏ธ ๐ง๐ผ . NET - ุฃุฏูุงุช ููุนูู ูุน ุชุนุฏุฏ ุงูุนูููุงุช ูุชุฒุงูู - ุงูุฌุฒุก 2 ๐๏ธ ๐ ๐คด๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏ ูุดุฑุช ูุฐู ุงูููุงูุฉ ูู ุงูุฃุตู ูู ูุฏููุฉ CodingSight . 
 ููุง ุฃูู ูุชุงุญ ุจุงููุบุฉ ุงูุฑูุณูุฉ ููุง . 

 ุชุญุชูู ูุฐู ุงูููุงูุฉ ุนูู ุงูุฌุฒุก ุงูุซุงูู ูู ุฎุทุงุจู ูู ุงูุงุฌุชูุงุน mu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>. NET - ุฃุฏูุงุช ููุนูู ูุน ุชุนุฏุฏ ุงูุนูููุงุช ูุชุฒุงูู - ุงูุฌุฒุก 2</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461471/" style=";text-align:right;direction:rtl">  <i>ููุฏ ูุดุฑุช ูุฐู ุงูููุงูุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุตู</a> ูู ูุฏููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CodingSight</a> .</i> <i><br></i>  <i>ููุง ุฃูู ูุชุงุญ ุจุงููุบุฉ ุงูุฑูุณูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> .</i> <br><br>  ุชุญุชูู ูุฐู ุงูููุงูุฉ ุนูู ุงูุฌุฒุก ุงูุซุงูู ูู ุฎุทุงุจู ูู ุงูุงุฌุชูุงุน multithreading.  ููููู ุฅููุงุก ูุธุฑุฉ ุนูู ุงูุฌุฒุก ุงูุฃูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุง</a> .  ูู ุงูุฌุฒุก ุงูุฃูู ุ ุฑูุฒุช ุนูู ุงููุฌููุนุฉ ุงูุฃุณุงุณูุฉ ูู ุงูุฃุฏูุงุช ุงููุณุชุฎุฏูุฉ ูุจุฏุก ุณูุณูุฉ ุฃู ูููุฉ ุ ูุทุฑู ุชุชุจุน ุญุงูุชูุง ุ ูุจุนุถ ุงูุฃุดูุงุก ุงูุฅุถุงููุฉ ูุซู PLinq.  ูู ูุฐุง ุงูุฌุฒุก ุ ุณุฃุตูุญ ุงููุดููุงุช ุงูุชู ูุฏ ุชูุงุฌููุง ูู ุจูุฆุฉ ูุชุนุฏุฏุฉ ุงูุฎููุท ูุจุนุถ ุงูุทุฑู ูุญููุง. <br><br><h2 style=";text-align:right;direction:rtl">  ูุญุชููุงุช </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุดุฃู ุงูููุงุฑุฏ ุงููุดุชุฑูุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุดุงูู ุงููุญุชููุฉ ูู ุจูุฆุงุช ูุชุนุฏุฏุฉ ุงูุฎููุท</a> <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฃุฒู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุงูุฉ ุงูุณุจุงู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุดุบูู-ุงูุงูุชุธุงุฑ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฌููุน ุงูููุถูุน</a> </li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุทุฑู ุงูุชุฒุงูู</a> <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุดุงุจู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Monitor.Enter ุ Monitor.Exit ุ ููู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SpinLock ุ SpinWait</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Monitor.Wait ุ Monitor.Pulse [ุงููู]</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ReaderWriterLockSlim</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนุงุฆูุฉ ResetEvent</a> </li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงุณุชูุชุงุฌุงุช</a> </li></ul><br><a name="habracut"></a><a name="SharedResources"></a><br><h2 style=";text-align:right;direction:rtl">  ุจุดุฃู ุงูููุงุฑุฏ ุงููุดุชุฑูุฉ </h2><br>  ูุง ููููู ูุชุงุจุฉ ุจุฑูุงูุฌ ูุณุชูุฏ ุฅูู ุนุฏุฉ ูุคุดุฑุงุช ุชุฑุงุจุท ุฏูู ุงูุญุงุฌุฉ ุฅูู ููุงุฑุฏ ูุดุชุฑูุฉ.  ุญุชู ูู ูุงู ูุนูู ุนูู ูุณุชูู ุงูุชุฌุฑูุฏ ุงูุญุงูู ุงูุฎุงุต ุจู ุ ูุณุชุฌุฏ ุฃูู ูุญุชูู ุจุงููุนู ุนูู ููุงุฑุฏ ูุดุชุฑูุฉ ุจูุฌุฑุฏ ุงูุฎูุงุถ ูุณุชูู ุชุฌุฑูุฏ ูุงุญุฏ ุฃู ุฃูุซุฑ.  ูููุง ููู ุจุนุถ ุงูุฃูุซูุฉ: <br><br>  <b>ูุซุงู ุฑูู 1:</b> <br><br>  ูุชุฌูุจ ุงููุดููุงุช ุงููุญุชููุฉ ุ ููููู ุฌุนู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุชุนูู ูุน ูููุงุช ูุฎุชููุฉ ุ ููู ูุงุญุฏ ููู ูุคุดุฑ ุชุฑุงุจุท.  ูุจุฏู ูู ุฃู ุงูุจุฑูุงูุฌ ูุง ูุญุชูู ุนูู ููุงุฑุฏ ูุดุชุฑูุฉ ุนูู ุงูุฅุทูุงู. <br><br>  ุนูุฏ ุงูุฎูุงุถ ูุณุชููุงุช ุนุฏุฉ ุ ุณุชุนุฑู ุฃู ููุงู ูุญุฑู ุฃูุฑุงุต ุซุงุจุชูุง ูุงุญุฏูุง ููุท ุ ููุนูุฏ ุงูุฃูุฑ ุฅูู ุจุฑูุงูุฌ ุงูุชุดุบูู ุฃู ูุธุงู ุงูุชุดุบูู ูุฅูุฌุงุฏ ุญู ูููุดููุงุช ุงููุชุนููุฉ ุจุงููุตูู ุฅูู ูุญุฑู ุงูุฃูุฑุงุต ุงูุซุงุจุชุฉ. <br><br>  <b>ูุซุงู ุฑูู 2:</b> <br><br>  ุจุนุฏ ูุฑุงุกุฉ <i>ุงููุซุงู ุฑูู 1</i> ุ ูุฑุฑุช ูุถุน ุงููููุงุช ุนูู ุฌูุงุฒูู ุจุนูุฏูู ูุฎุชูููู ูุน ุฃุฌูุฒุฉ ูุฃูุธูุฉ ุชุดุบูู ูุฎุชููุฉ ูุนูููุง.  ููููู ุฃูุถูุง ุงูุญูุงุธ ุนูู ุงุชุตุงููู ูุฎุชูููู ูู FTP ุฃู NFS. <br><br>  ุนูุฏ ุงูุฎูุงุถ ูุณุชููุงุช ุนุฏุฉ ูุฑุฉ ุฃุฎุฑู ุ ุฃูุช ุชุฏุฑู ุฃู ุดูุฆูุง ูู ูุชุบูุฑ ูุนูููุง ุ ูุฃู ูุดููุฉ ุงููุตูู ุงูุชูุงูุณู ูุฏ ุชู ุชูููุถูุง ุงูุขู ุฅูู ุจุฑูุงูุฌ ุชุดุบูู ุจุทุงูุฉ ุงูุดุจูุฉ ุฃู ูุธุงู ุชุดุบูู ุงูุฌูุงุฒ ุงูุฐู ูุนูู ุนููู ุงูุจุฑูุงูุฌ. <br><br>  <b>ูุซุงู ุฑูู 3:</b> <br><br>  ุจุนุฏ ุณุญุจ ูุนุธู ุดุนุฑู ูู ูุญุงููุงุช ุฅุซุจุงุช ุฃูู ุจุฅููุงูู ูุชุงุจุฉ ุจุฑูุงูุฌ ูุชุนุฏุฏ ุงูุฎููุท ุ ูุฅูู ุชูุฑุฑ ุงูุชุฎูุต ูู ุงููููุงุช ุจุงููุงูู ูููู ุงูุญุณุงุจุงุช ุฅูู ูุงุฆููู ูุฎุชูููู ุ ูุน ุชููุฑ ุงูุฑูุงุจุท ุฅูู ูู ูุงุฆู ูู ูุฐู ุงูุนูุงุตุฑ ููุท ุงูููุงุถูุน. <br><br>  ูุฅุจุฑุงุฒ ุงูุนุดุฑุงุช ูู ุงููุณุงููุฑ ุงูููุงุฆูุฉ ูู ูุนุด ูุฐู ุงูููุฑุฉ: ูุง ูุฒุงู ููุนุชุจุฑ ููุช ุชุดุบูู ูุงุญุฏ ู Garbage Collector ุ ูุฌุฏููุฉ ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ุ ูุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุงูููุญุฏุฉ ุงูููุญุฏุฉ ูุนูููุง ุ ููุนุงูุฌูุง ูุงุญุฏูุง ููุงุฑุฏ ูุดุชุฑูุฉ. <br><br>  ูุฐูู ุ ุนูููุง ุฃูู ูู ุงููุณุชุญูู ูุชุงุจุฉ ุจุฑูุงูุฌ ูุชุนุฏุฏ ุงูุฎููุท ูุน ุนุฏู ูุฌูุฏ ููุงุฑุฏ ูุดุชุฑูุฉ ุนูู ุฌููุน ูุณุชููุงุช ุงูุชุฌุฑูุฏ ูุนูู ูุงูู ูุทุงู ุฑุตุฉ ุงูุชูููููุฌูุง.  ูุญุณู ุงูุญุธ ุ ูุฅู ูู ูุณุชูู ุชุฌุฑูุฏู (ููุงุนุฏุฉ ุนุงูุฉ) ูุนุชูู ุฌุฒุฆููุง ุฃู ูุงูููุง ุจูุณุงุฆู ุงููุตูู ุงูุชูุงูุณู ุฃู ูุฑูุถ ุฐูู ุนูู ุงูููุฑ (ุนูู ุณุจูู ุงููุซุงู: ูุง ูุณูุญ ุฃู ุฅุทุงุฑ ุนูู ููุงุฌูุฉ ุงููุณุชุฎุฏู ุจุงูุนูู ูุน ุนูุงุตุฑ ูู ุฎููุท ูุฎุชููุฉ).  ูุฐูู ุนุงุฏุฉู ูุง ุชุธูุฑ ุงููุดููุงุช ุงููุชุนููุฉ ุจุงูููุงุฑุฏ ุงููุดุชุฑูุฉ ุจูุณุชูู ุงูุชุฌุฑูุฏ ุงูุญุงูู.  ูุฑุนุงูุชูู ุ ูุชู ุชูุฏูู ููููู ุงูุชุฒุงูู. <br><a name="Problems"></a><br><h2 style=";text-align:right;direction:rtl">  ุงููุดุงูู ุงููุญุชููุฉ ูู ุจูุฆุงุช ูุชุนุฏุฏุฉ ุงูุฎููุท </h2><br>  ูููููุง ุชุตููู ุฃุฎุทุงุก ุงูุจุฑุงูุฌ ุฅูู ุงููุฆุงุช ุงูุชุงููุฉ: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุจุฑูุงูุฌ ูุง ููุชุฌ ูุชูุฌุฉ - ุฅูู ูุชุนุทู ุฃู ูุชุฌูุฏ. </li><li style=";text-align:right;direction:rtl">  ูุนุทู ุงูุจุฑูุงูุฌ ูุชูุฌุฉ ุบูุฑ ุตุญูุญุฉ. </li><li style=";text-align:right;direction:rtl">  ููุชุฌ ุงูุจุฑูุงูุฌ ูุชูุฌุฉ ุตุญูุญุฉ ููููู ูุง ููุจู ุจุนุถ ุงููุชุทูุจุงุช ุบูุฑ ุงููุชุนููุฉ ุจุงููุธููุฉ - ููู ููุถู ุงููุซูุฑ ูู ุงูููุช ุฃู ุงูููุงุฑุฏ. </li></ol><br>  ูู ุงูุจูุฆุงุช ูุชุนุฏุฏุฉ ุงูุฎููุท ุ ูุงููุดููุงุช ุงูุฑุฆูุณูุฉ ุงูุชู ุชุคุฏู ุฅูู ุฃุฎุทุงุก # 1 ู # 2 ูู ุญุงูุฉ <b>ุชููู ุชุงู</b> <b>ูุดุฑุท ุงูุณุจุงู</b> . <br><br><a name="Deadlock"></a><br><h3 style=";text-align:right;direction:rtl">  ูุฃุฒู </h3><br>  ุงูุฌููุฏ ูู ูุชูุฉ ูุชุจุงุฏูุฉ.  ููุงู ุงูุนุฏูุฏ ูู ุงูุงุฎุชูุงูุงุช ูู ุญุงูุฉ ุชููู ุชุงู.  ูููู ุงุนุชุจุงุฑ ูุง ููู ุงูุฃูุซุฑ ุดููุนูุง: <br><br><img src="https://habrastorage.org/webt/fl/ij/aj/flijajjtgsaczutpuk9t1filaig.png"><br><br>  ุฃุซูุงุก ููุงู ูุคุดุฑ <b>ุงูุชุฑุงุจุท # 1</b> ุจุดูุก ุ ูุงู ูุคุดุฑ <b>ุงูุชุฑุงุจุท ุฑูู 2</b> ุจุญุธุฑ ุงูููุฑุฏ <b>B.</b>  ูู ููุช ูุง ูู ููุช ูุงุญู ุ ุงูููุฑุฏ ุงููุญุธูุฑ ูู ูุคุดุฑ <b>ุงูุชุฑุงุจุท ุฑูู 1</b> ููุงู ูุญุงูู ุญุธุฑ ุงูููุฑุฏ ุจ. ูุณูุก ุงูุญุธ ุ ูู ูุญุฏุซ ูุฐุง ุฃุจุฏูุง ูุฃู ูุคุดุฑ <b>ุงูุชุฑุงุจุท ุฑูู 2</b> ุณูุชุฑู ุงูููุฑุฏ <b>B</b> ุจุนุฏ ุญุธุฑ ุงูููุฑุฏ <b>A.</b> <br><a name="RaceCondition"></a><br><h3 style=";text-align:right;direction:rtl">  ุญุงูุฉ ุงูุณุจุงู </h3><br>  Race-Condition ูู ูููู ุนูุฏูุง ูุนุชูุฏ ูู ูู ุณููู ููุชุงุฆุฌ ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุนูู ุฌุฏููุฉ ูุคุดุฑ ุชุฑุงุจุท ุจูุฆุฉ ุงูุชูููุฐ <br><br>  ุงููุดููุฉ ูู ุฃู ุจุฑูุงูุฌู ูููู ุฃู ูุนูู ุจุดูู ุบูุฑ ุตุญูุญ ูุฑุฉ ูุงุญุฏุฉ ูู ุงููุงุฆุฉ ุ ุฃู ุญุชู ูู ุงูููููู. <br><br>  ูุฏ ุชุฒุฏุงุฏ ุงูุฃููุฑ ุณูุกูุง ุนูุฏูุง ุชุฃุชู ุงููุดููุงุช ูู ูุฌููุนุงุช ุซูุงุซูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏ ูุคุฏู ุงูุณููู ุงููุญุฏุฏ ูุฌุฏููุฉ ูุคุดุฑ ุงูุชุฑุงุจุท ุฅูู ุญุงูุฉ ุชููู ุชุงู ูุดุชุฑูุฉ. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ูุงุชูู ุงููุณุฃูุชูู ุงููุชูู ุชุคุฏูุงู ุฅูู ุฃุฎุทุงุก ุตุฑูุญุฉ ุ ููุงู ุฃูุถูุง ุงููุดููุงุช ุงูุชู ุ ุฅุฐุง ูู ุชุคุฏ ุฅูู ูุชุงุฆุฌ ุญุณุงุจูุฉ ุบูุฑ ุตุญูุญุฉ ุ ูุฏ ูุง ุชุฒุงู ุชุฌุนู ุงูุจุฑูุงูุฌ ูุณุชุบุฑู ุงููุซูุฑ ูู ุงูููุช ุฃู ุงูููุงุฑุฏ ูุชุญููู ุงููุชูุฌุฉ ุงููุฑุฌูุฉ.  ุงุซููู ูู ูุฐู ุงููุดููุงุช ูู <b>ูุดุบูู ุงูุงูุชุธุงุฑ</b> ู <b>ูุคุดุฑ ุชุฑุงุจุท Starvation</b> . <br><a name="BusyWait"></a><br><h3 style=";text-align:right;direction:rtl">  ูุดุบูู-ุงูุงูุชุธุงุฑ </h3><br>  ูุดููุฉ Busy Wait ูู ูุดููุฉ ุชุญุฏุซ ุนูุฏูุง ูููู ุงูุจุฑูุงูุฌ ููุงุฑุฏ ุงููุนุงูุฌ ุนูู ุงูุงูุชุธุงุฑ ุจุฏูุงู ูู ุงูุญุณุงุจ. <br><br>  ุนุงุฏุฉู ูุง ุชุจุฏู ูุฐู ุงููุดููุฉ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(!hasSomethingHappened) ;</code> </pre> <br>  ูุฐุง ูุซุงู ุนูู ุงูููุฏ ุงูุณูุฆ ููุบุงูุฉ ูุฃูู ูุดุบู ุจุงููุงูู ููุงุฉ ูุงุญุฏุฉ ูู ุงููุนุงูุฌ ุจูููุง ูุง ููุนู ุฃู ุดูุก ูุซูุฑ ุนูู ุงูุฅุทูุงู.  ูุง ูููู ุชุจุฑูุฑ ูุซู ูุฐุง ุงูุฑูุฒ ุฅูุง ุนูุฏูุง ูููู ูู ุงูุฃูููุฉ ุจููุงู ูุนุงูุฌุฉ ุชุบููุฑ ูููุฉ ูู ุณูุณูุฉ ุฑุณุงุฆู ูุฎุชููุฉ ุจุณุฑุนุฉ.  ูุจุญููู "ุจุณุฑุนุฉ" ุฃุนูู ุฃูู ูุง ููููู ุงูุงูุชุธุงุฑ ุญุชู ูุจุถุนุฉ ูุงููุซุงููุฉ.  ูู ุฌููุน ุงูุญุงูุงุช ุงูุฃุฎุฑู ุ ุฃู ุฌููุน ุงูุญุงูุงุช ุงูุชู ูููู ุฃู ูุชูุตู ุฅูููุง ุงูุนูู ุงููุนููู ุ ููู ุงูููุงุฆู ุฃูุซุฑ ุงุณุชุฎุฏุงู ุฃุดูุงู ResetEvent ูุฅุตุฏุงุฑุงุชูุง ุงููุญููุฉ.  ุณูุชุญุฏุซ ุนููู ุจุนุฏ ูููู. <br><br>  ุฑุจูุง ุ ููุชุฑุญ ุจุนุถ ุงููุฑุงุก ุญู ูุดููุฉ ุฌููุฑ ูุงุญุฏ ูุชู ุดุบููุง ุจุงููุงูู ูุน ุงูุงูุชุธุงุฑ ุนู ุทุฑูู ุฅุถุงูุฉ Thread.Sleep (1) (ุฃู ุดูุก ูุดุงุจู) ูู ุงูุฏูุฑุฉ.  ูู ุญูู ุฃูู ุณูุคุฏู ุฅูู ุญู ูุฐู ุงููุดููุฉ ุ ุณูุชู ุฅูุดุงุก ูุดููุฉ ุฌุฏูุฏุฉ - ุงูููุช ุงููุณุชุบุฑู ููุฑุฏ ุนูู ุงูุชุบููุฑุงุช ุณูููู 0.5 ูููู ุซุงููุฉ ูู ุงููุชูุณุท.  ูู ูุงุญูุฉ ุ ููุณ ูุฐุง ูุซูุฑูุง ุ ูููู ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุฐู ุงููููุฉ ุฃุนูู ูุงุฑุซูุฉ ููุง ูููููุง ุชุญูููู ุจุงุณุชุฎุฏุงู ุจุฏุงุฆู ุงูุชุฒุงูู ูุนุงุฆูุฉ ResetEvent. <br><a name="ThreadStarvation"></a><br><h3 style=";text-align:right;direction:rtl">  ุชุฌููุน ุงูููุถูุน </h3><br>  ููุซู ูุคุดุฑ ุชุฑุงุจุท Starvation ูุดููุฉ ูู ุงูุจุฑูุงูุฌ ุงูุฐู ูุญุชูู ุนูู ุงููุซูุฑ ูู ูุคุดุฑุงุช ุชุฑุงุจุท ุงูุชุดุบูู ุงููุชุฒุงููุฉ.  ููุง ุ ูุชุญุฏุซ ุจุงูุชุญุฏูุฏ ุนู ุณูุงุณู ุงูุนูููุงุช ุงููุดุบููุฉ ูุน ุงูุญุณุงุจ ุจุฏูุงู ูู ุงูุชุธุงุฑ ุงูุฅุฌุงุจุฉ ูู ุจุนุถ IO.  ูุน ูุฐู ุงููุดููุฉ ุ ูููุฏ ุฃู ูุฒุงูุง ุฃุฏุงุก ููููุฉ ุชุชูุงูู ูุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูุฃู ุงููุนุงูุฌ ููุถู ุงููุซูุฑ ูู ุงูููุช ูู ุชุจุฏูู ุงูุณูุงูุงุช. <br><br>  ููููู ุงูุนุซูุฑ ุนูู ูุซู ูุฐู ุงููุดููุงุช ุจุงุณุชุฎุฏุงู ูููุงุช ุงูุชุนุฑูู ุงููุฎุชููุฉ.  ูููุง ููู ููุทุฉ ุดุงุดุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู</a> ุชุนุฑูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">dotTrace ุงูุฐู</a> ูุนูู ูู ูุถุน ุงูุฌุฏูู ุงูุฒููู <br> <a href=""><img src="https://habrastorage.org/webt/qy/n9/nk/qyn9nkwglryzuu60cipo8zdi0ra.png"></a> <br>  <i>(ุงููุฑ ููุชูุจูุฑ).</i> <br><br>  ุนุงุฏุฉู ุ ูุง ุชุญุชูู ุงูุจุฑุงูุฌ ุงูุชู ูุง ุชุนุงูู ูู ุชุฌููุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุนูู ุฃูุฉ ุฃูุณุงู ูุฑุฏูุฉ ุนูู ุงููุฎุทุทุงุช ุงูุชู ุชูุซู ุงูุฎููุท.  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ูุฆุฉ ุงููุธู ุงููุฑุนูุฉ ุ ูููููุง ุฃู ูุฑู ุฃู ุงูุจุฑูุงูุฌ ูุงู ููุชุธุฑ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ููุฏุฉ 30.6 ูช ูู ุงูููุช. <br><br>  ุนูุฏูุง ูุชู ุชุดุฎูุต ูุซู ูุฐู ุงููุดููุฉ ุ ููููู ุงูุชุนุงูู ูุนูุง ุจุจุณุงุทุฉ: ููุฏ ุจุฏุฃุช ุนุฏุฏูุง ูุจูุฑูุง ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ููุช ูุงุญุฏ ุ ูุฐูู ูู ููุท ุจุชุดุบูู ุนุฏุฏ ุฃูู ูู ุณูุงุณู ุงูุฑุณุงุฆู. <br><a name="SyncPrimitives"></a><br><h2 style=";text-align:right;direction:rtl">  ุทุฑู ุงูุชุฒุงูู </h2><br><a name="Interlocked"></a><br><h3 style=";text-align:right;direction:rtl">  ูุดุงุจู </h3><br>  ุฑุจูุง ูุฐุง ูู ุงูุฃุณููุจ ุงูุชุฒุงูู ุงูุฃูุซุฑ ุฎูููุฉ ุงููุฒู.  ุงููุชุดุงุจูุฉ ูู ูุฌููุนุฉ ูู ุงูุนูููุงุช ุงูุฐุฑูุฉ ุงูุจุณูุทุฉ.  ุนูุฏูุง ูุชู ุชูููุฐ ุนูููุฉ ุฐุฑูุฉ ุ ูุง ูููู ุฃู ูุญุฏุซ ุดูุก.  ูู .NET ุ ูุชู ุชูุซูู Interlocked ุจูุงุณุทุฉ ูุฆุฉ ุซุงุจุชุฉ ุจููุณ ุงูุงุณู ูุน ุชุญุฏูุฏ ุทุฑู ุ ูู ูุงุญุฏุฉ ูููุง ุชููุฐ ุนูููุฉ ุฐุฑูุฉ ูุงุญุฏุฉ. <br><br>  ูุฅุฏุฑุงู ุงูุฑุนุจ ุงูููุงุฆู ููุนูููุงุช ุบูุฑ ุงูุฐุฑูุฉ ุ ุญุงูู ูุชุงุจุฉ ุจุฑูุงูุฌ ูููู ุจุฅุทูุงู 10 ูุคุดุฑุงุช ุชุฑุงุจุท ุ ูู ูููุง ูุฒูุฏ ุงููุชุบูุฑ ููุณู ููููู ูุฑุฉ.  ุนูุฏ ุงูุงูุชูุงุก ูู ูููุชูู ุ ุฃุฎุฑุฌ ูููุฉ ูุฐุง ุงููุชุบูุฑ.  ูุณูุก ุงูุญุธ ุ ุณูู ุชุฎุชูู ูุซูุฑุง ุนู 10 ููููู ุฏููุงุฑ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูููู ุงูุฃูุฑ ูุฎุชูููุง ูู ูู ูุฑุฉ ุชููู ูููุง ุจุชุดุบูู ุงูุจุฑูุงูุฌ.  ูุญุฏุซ ูุฐุง ูุฃูู ุญุชู ุงูุนูููุฉ ุงูุจุณูุทุฉ ูุซู ุงูุฒูุงุฏุฉ ููุณุช ุนูููุฉ ุฐุฑูุฉ ุ ูุชุดูู ุงุณุชุฎุฑุงุฌ ุงููููุฉ ูู ุงูุฐุงูุฑุฉ ุ ูุญุณุงุจ ุงููููุฉ ุงูุฌุฏูุฏุฉ ููุชุงุจุชูุง ุนูู ุงูุฐุงูุฑุฉ ูุฑุฉ ุฃุฎุฑู.  ูุฐูู ุ ูููู ุฃู ุงุซููู ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุฌุนู ุฃู ูู ูุฐู ุงูุนูููุงุช ูุณูุชู ููุฏุงู ุฒูุงุฏุฉ ูู ูุฐู ุงูุญุงูุฉ. <br><br>  ุชููุฑ ุงููุฆุฉ Interlocked ุฃุณุงููุจ ุงูุฒูุงุฏุฉ / ุงูุฅููุงุต ุ ูููุณ ูู ุงูุตุนุจ ุชุฎููู ูุง ููุชุฑุถ ุงูููุงู ุจู.  ุชููู ูููุฏุฉ ุญููุง ุฅุฐุง ููุช ุจูุนุงูุฌุฉ ุงูุจูุงูุงุช ูู ุงูุนุฏูุฏ ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูุญุณุงุจ ุดูุก ูุง.  ูุซู ูุฐุง ุงูุฑูุฒ ุณูู ูุนูู ุจุดูู ุฃุณุฑุน ุจูุซูุฑ ูู ุงูููู ุงูููุงุณููู.  ุฅุฐุง ุงุณุชุฎุฏููุง Interlocked ูู ุงูุญุงูุฉ ุงูููุถุญุฉ ูู ุงูููุฑุฉ ุงูุณุงุจูุฉ ุ ูุณููุชุฌ ุงูุจุฑูุงูุฌ ุจุดูู ููุซูู ูููุฉ 10 ููุงููู ูู ุฃู ุณููุงุฑูู. <br><br>  ูุธููุฉ ุงูุฃุณููุจ CompareExchange ููุณุช ูุงุถุญุฉ.  ููุน ุฐูู ุ ูุฅู ูุฌูุฏูุง ูุชูุญ ุชูููุฐ ุงููุซูุฑ ูู ุงูุฎูุงุฑุฒููุงุช ุงููุซูุฑุฉ ููุงูุชูุงู.  ุงูุฃูู ูู ุฐูู ุ ูู ูู ุนุงุฆูุฉ ุฎุงููุฉ ูู ููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CompareExchange</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> location1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> comparand</span></span></span><span class="hljs-function">)</span></span>;</code> </pre><br>  ูุฐู ุงูุทุฑููุฉ ุชุฃุฎุฐ ุซูุงุซ ููู.  ูุชู ุชูุฑูุฑ ุฃูู ุฅุดุงุฑุฉ ูู ุฎูุงู ูุฑุฌุน ููู ุงููููุฉ ุงูุชู ุณูุชู ุชุบููุฑูุง ุฅูู ุงูุซุงููุฉ ุฅุฐุง ูุงู ุงููููุน 1 ูุณุงูู ุงูููุงุฑูุฉ ุนูุฏ ุฅุฌุฑุงุก ุงูููุงุฑูุฉ.  ุณูุชู ุฅุฑุฌุงุน ุงููููุฉ ุงูุฃุตููุฉ ูููููุน 1.  ูุฐุง ูุจุฏู ูุนูุฏูุง ุ ูุฐูู ูู ุงูุฃุณูู ูุชุงุจุฉ ุฌุฒุก ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุชููุฐ ููุณ ุงูุนูููุงุช ูุซู CompareExchange: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> original = location1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (location1 == comparand) location1 = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> original;</code> </pre><br>  ุงููุฑู ุงููุญูุฏ ูู ุฃู ุงูุทุจูุฉ ุงููุชุดุงุจูุฉ ุชููุฐ ูุฐุง ุจุทุฑููุฉ ุฐุฑูุฉ.  ูุฐูู ุ ุฅุฐุง ูุชุจูุง ูุฐุง ุงูุฑูุฒ ุจุฃููุณูุง ุ ููุฏ ููุงุฌู ุณููุงุฑูู ุชู ููู ุงุณุชููุงุก ุดุฑุท ุงููููุน 1 == ุงูููุงุฑูุฉ ุจุงููุนู.  ูููู ุนูุฏูุง ูุชู ุชูููุฐ ุงูุนุจุงุฑุฉ location1 = value ุ ููุฏ ูุงู ูุคุดุฑ ุชุฑุงุจุท ูุฎุชูู ุจุชุบููุฑ ูููุฉ location1 ุจุงููุนู ุ ูุฐูู ุณูุชู ููุฏูุง. <br><br>  ูููููุง ุงูุนุซูุฑ ุนูู ูุซุงู ุฌูุฏ ุนูู ููููุฉ ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ููุดุฆูุง ุงููุชุฑุฌู ูุฃู ุญุฏุซ C #. <br><br>  ุฏุนูุง ููุชุจ ูุฆุฉ ุจุณูุทุฉ ูุน ุญุฏุซ ูุงุญุฏ ูุณูู MyEvent: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyClass</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> EventHandler MyEvent; }</code> </pre><br>  ุงูุขู ุ ุฏุนููุง ูุจูู ุงููุดุฑูุน ูู ุชูููู ุงูุฅุตุฏุงุฑ ููุชุญ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฅูุดุงุก ูู</a> ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">dotPeek</a> ูุน ุชูููู ุฎูุงุฑ "ุฅุธูุงุฑ ุฑูุฒ ุงููุชุฑุฌู ุงูุฐู ุชู ุฅูุดุงุคู": <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CompilerGenerated</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> EventHandler MyEvent; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> EventHandler MyEvent { [CompilerGenerated] <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> { EventHandler eventHandler = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.MyEvent; EventHandler comparand; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { comparand = eventHandler; eventHandler = Interlocked.CompareExchange&lt;EventHandler&gt;(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.MyEvent, (EventHandler) Delegate.Combine((Delegate) comparand, (Delegate) <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>), comparand); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (eventHandler != comparand); } [CompilerGenerated] <span class="hljs-keyword"><span class="hljs-keyword">remove</span></span> { <span class="hljs-comment"><span class="hljs-comment">// The same algorithm but with Delegate.Remove } }</span></span></code> </pre><br>  ููุง ุ ูููููุง ุฃู ูุฑู ุฃู ุงููุชุฑุฌู ูุฏ ุฎูู ุฎูุงุฑุฒููุฉ ูุนูุฏุฉ ุฅูู ุญุฏ ูุง ูุฑุงุก ุงูููุงููุณ.  ุชููุนูุง ูุฐู ุงูุฎูุงุฑุฒููุฉ ูู ููุฏุงู ุงุดุชุฑุงู ูู ุงูุญุฏุซ ุงูุฐู ูุชู ููู ุงูุงุดุชุฑุงู ูู ุนุฏุฏ ูููู ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ูุฐุง ุงูุญุฏุซ ูู ููุช ูุงุญุฏ.  ุฏุนููุง ููุถุญ ุทุฑููุฉ ุงูุฅุถุงูุฉ ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ูุง ุชููู ุจู ุทุฑููุฉ CompareExchange ูุฑุงุก ุงูููุงููุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">EventHandler eventHandler = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.MyEvent; EventHandler comparand; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { comparand = eventHandler; <span class="hljs-comment"><span class="hljs-comment">// Begin Atomic Operation if (MyEvent == comparand) { eventHandler = MyEvent; MyEvent = Delegate.Combine(MyEvent, value); } // End Atomic Operation } while (eventHandler != comparand);</span></span></code> </pre><br>  ูุฐุง ุฃูุซุฑ ูุงุจููุฉ ููุฅุฏุงุฑุฉ ุ ูููู ุฑุจูุง ูุง ูุฒุงู ูุญุชุงุฌ ุฅูู ุชูุณูุฑ.  ููุฐุง ุฃุตู ุงูุฎูุงุฑุฒููุฉ: <br><br>  <i>ุฅุฐุง ูุงู MyEvent ูุง ูุฒุงู ููุง ูุงู ูู ุงูููุช ุงูุญุงูู ุ ุจุฏุฃูุง ูู ุชูููุฐ Delegate.Combine ุ ุซู ุงุถุจุทู ุนูู ูุง ูุนูุฏ ุนููู Delegate.Combine.</i>  <i>ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุญุงูู ูุฑุฉ ุฃุฎุฑู ุญุชู ุชุนูู.</i> <br><br>  ุจูุฐู ุงูุทุฑููุฉ ุ ูู ุชุถูุน ุงูุงุดุชุฑุงูุงุช ุฃุจุฏูุง.  ุณูุชุนูู ุนููู ุญู ูุดููุฉ ููุงุซูุฉ ุฅุฐุง ููุช ุชุฑุบุจ ูู ุชุทุจูู ุตููู ุฏููุงูููู ูุขูู ููุตูุญุงุช ูุฎุงูู ูู ุงูููู.  ุฅุฐุง ุจุฏุฃุช ุนุฏุฉ ูุคุดุฑุงุช ุชุฑุงุจุท ูุฌุฃุฉ ูู ุฅุถุงูุฉ ุนูุงุตุฑ ุฅูู ูุฐุง ุงูุตููู ุ ููู ุงูููู ุฃู ุชุชู ุฅุถุงูุฉ ูู ูุฐู ุงูุนูุงุตุฑ ุจูุฌุงุญ. <br><a name="Lock"></a><br><h3 style=";text-align:right;direction:rtl">  Monitor.Enter ุ Monitor.Exit ุ ููู </h3><br>  ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงูุฅูุดุงุกุงุช ููุฒุงููุฉ ูุคุดุฑ ุงูุชุฑุงุจุท ุจุดูู ูุชูุฑุฑ.  ูุทุจููู ููููู ุงููุณู ุงูููู: ุจูุนูู ุฃูู ูููู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูููุชูุจุฉ ุจูู ููุงููุงุช Monitor.Enter ู Monitor.Exit ููุท ุนูู ููุฑุฏ ูุงุญุฏ ูู ููุช ูุงุญุฏ ุจูุงุณุทุฉ ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ููุท.  ูุนูู ูุดุบู ุงูููู ูุจุฏูู ููุณูุฑ ุญูู ููุงููุงุช Enter / Exit ูููููุฉ ูู ูุญุงููุฉ ุฃุฎูุฑุฉ.  ุชุชูุซู ุงูุฌูุฏุฉ ุงูููุชุนุฉ ูููุณู ุงููุงู ูู .NET ูู ุฃูู ูุฏุนู ุฅุนุงุฏุฉ ุงูุชูุทูู.  ูุฐุง ูุนูู ุฃูู ูููู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ุจุฏูู ุฃู ูุดุงูู ุญููููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>(a) { <span class="hljs-keyword"><span class="hljs-keyword">lock</span></span> (a) { ... } }</code> </pre><br>  ูู ุบูุฑ ุงููุญุชูู ุฃู ููุชุจ ุฃู ุดุฎุต ุจูุฐู ุงูุทุฑููุฉ ุจุงูุถุจุท ุ ูููู ุฅุฐุง ููุช ุจูุดุฑ ูุฐุง ุงูุฑูุฒ ุจูู ุนุฏุฉ ุทุฑู ูู ุฎูุงู ุนูู ููุฏุณ ุงูุงุชุตุงู ุ ูุฅู ูุฐู ุงูููุฒุฉ ูููู ุฃู ุชููุฑ ูู ุจุนุถ IFs.  ููู ุชูุฌุญ ูุฐู ุงูุฎุฏุนุฉ ุ ุงุถุทุฑ ูุทูุฑู .NET ุฅูู ุฅุถุงูุฉ ูููุฏ - ููููู ููุท ุงุณุชุฎุฏุงู ูุซููุงุช ุฃููุงุน ุงููุฑุฌุน ููุงุฆู ุงูุชุฒุงูู ุ ููุชู ุฅุถุงูุฉ ุนุฏุฏ ูููู ูู ุงูุจุงูุชุงุช ุฅูู ูู ูุงุฆู ุญูุซ ุณูุชู ูุชุงุจุฉ ูุนุฑู ูุคุดุฑ ุงูุชุฑุงุจุท. <br><br>  ุฅู ุฎุตูุตูุฉ ุนูููุฉ ุนูู ุงููุณู ุงูุญุฑุฌ ูู C # ุชูุฑุถ ููุฏูุง ูุซูุฑูุง ุนูู ุนุงูู ุงูููู: ูุง ููููู ุงุณุชุฎุฏุงู ุนุงูู ุงูุชุธุงุฑ ุงูุงูุชุธุงุฑ ุฏุงุฎู ูุดุบู ุงูููู.  ูู ุงูุจุฏุงูุฉ ุ ูุงุฌุฃูู ุฐูู ูุฃูู ูููู ุชุฌููุน ุจููุฉ Monitor -Enter / Exit ููุงุซูุฉ.  ูุง ูู ุงูุตููุฉุ  ูู ุงูููู ุฅุนุงุฏุฉ ูุฑุงุกุฉ ุงูููุฑุฉ ุงูุณุงุจูุฉ ูุชุทุจูู ุจุนุถ ุงููุนุฑูุฉ ุญูู ููููุฉ ุนูู ุงููุฒุงููุฉ / ุงูุงูุชุธุงุฑ: ูู ูุชู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุนุฏ ุงูุงูุชุธุงุฑ ุนูู ููุณ ุณูุณูุฉ ุงูุฑุณุงุฆู ููุง ูู ุงูุญุงู ูุจู ุงูุงูุชุธุงุฑ.  ูุนุชูุฏ ูุฐุง ุนูู ุณูุงู ุงููุฒุงููุฉ ููุง ุฅุฐุง ูุงู ูุชู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ ConfigureAwait ุฃู ูุง.  ูู ูุฐุง ุ ูุชุจุน ุฃูู ูุฏ ูุชู ุชูููุฐ Monitor.Exit ุนูู ูุคุดุฑ ุชุฑุงุจุท ูุฎุชูู ุนู Monitor.Enter ุ ููุง ุณูุคุฏู ุฅูู ุทุฑุญ SynchronizationLockException.  ุฅุฐุง ููุช ูุง ุชุตุฏููู ุ ูุญุงูู ุชุดุบูู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ูู ุชุทุจูู ูุญุฏุฉ ุงูุชุญูู - ุณูุคุฏู ุฐูู ุฅูู ุฅูุดุงุก <b>SynchronizationLockException</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> syncObject = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object(); Monitor.Enter(syncObject); Console.WriteLine(Thread.CurrentThread.ManagedThreadId); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); Monitor.Exit(syncObject); Console.WriteLine(Thread.CurrentThread.ManagedThreadId);</code> </pre><br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูู ุชุทุจูู WinForms ุฃู WPF ุ ุณูุนูู ูุฐุง ุงูุฑูุฒ ุจุดูู ุตุญูุญ ุฅุฐุง ููุช ุจุงูุงุชุตุงู ุจู ูู ุณูุณูุฉ ุงูุฑุณุงุฆู ุงูุฑุฆูุณูุฉ ุญูุซ ุณูููู ููุงู ุณูุงู ุงูุชุฒุงูู ุงูุฐู ูููุฐ ุงูุนูุฏุฉ ุฅูู ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู ุจุนุฏ ุงูุชุธุงุฑ ุงูุงุชุตุงู.  ูู ุฃู ุญุงู ุ ูู ุงูุฃูุถู ุนุฏู ุงูุงูุชูุงู ุญูู ููุงุทุน ูููุฉ ูู ุณูุงู ุฑูุฒ ูุญุชูู ุนูู ุนุงูู ุงูุชุธุงุฑ.  ูู ูุซู ูุฐู ุงูุฃูุซูุฉ ุ ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุจุฏุงุฆู ุงูุชุฒุงูู ุงูุชู ุณููุธุฑ ูููุง ูุงุญููุง. <br><br>  ุจูููุง ูุชูุงูู ููุถูุน ุงูุฃูุณุงู ุงููููุฉ ูู .NET ุ ูู ุงูููู ุงูุฅุดุงุฑุฉ ุฅูู ุฎุตูุตูุฉ ูุงุญุฏุฉ ุฃุฎุฑู ุญูู ููููุฉ ุชูููุฐูุง.  ูุนูู ูุณู ููู ูู .NET ูู ูุถุนูู: ุงูุงูุชุธุงุฑ ุงูุฏูุฑุงูู ูุงูุงูุชุธุงุฑ ุงูุฃุณุงุณู.  ูููููุง ุชูุซูู ุฎูุงุฑุฒููุฉ ุงูุงูุชุธุงุฑ ุงูุฏูุฑุงูู ูุซู ุงูููุฏ ุงููุงุฐุจ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(!TryEnter(syncObject)) ;</code> </pre><br>  ูุชู ุชูุฌูู ูุฐุง ุงูุชุญุณูู ูุญู ุงูุชูุงุท ูุณู ูุงู ูู ุฃุณุฑุน ููุช ูููู ูู ูุชุฑุฉ ุฒูููุฉ ูุตูุฑุฉ ุนูู ุฃุณุงุณ ุฃูู ุ ุญุชู ุฅุฐุง ูุงูุช ุงูููุงุฑุฏ ูุดุบููุฉ ุญุงูููุง ุ ูุณูุชู ุฅุตุฏุงุฑู ูุฑูุจูุง.  ุฅุฐุง ูู ูุญุฏุซ ูุฐุง ูู ูุชุฑุฉ ุฒูููุฉ ูุตูุฑุฉ ุ ูุณูู ูุชุญูู ูุคุดุฑ ุงูุชุฑุงุจุท ุฅูู ุงูุงูุชุธุงุฑ ูู ุงููุถุน ุงูุฃุณุงุณู ุ ูุงูุฐู ูุณุชุบุฑู ููุชูุง - ุชูุงููุง ูุซู ุงูุนูุฏุฉ ูู ุงูุงูุชุธุงุฑ.  ูุงู ูุทูุฑู .NET ุจุชุญุณูู ุณููุงุฑูู ุงููุชู ุงููุตูุฑุฉ ูุฏุฑ ุงูุฅููุงู.  ูุณูุก ุงูุญุธ ุ ุฅุฐุง ุจุฏุฃุช ุงูุนุฏูุฏ ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ุณุญุจ ุงููุณู ุงูููู ุจูููุง ุ ููุฏ ูุคุฏู ุฐูู ุฅูู ุชุญููู ุนุงูู ููุงุฌุฆ ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ. <br><a name="SpinLock"></a><br><h3 style=";text-align:right;direction:rtl">  SpinLock ุ SpinWait </h3><br>  ุจุนุฏ ุงูุฅุดุงุฑุฉ ุจุงููุนู ุฅูู ุฎูุงุฑุฒููุฉ ุงูุงูุชุธุงุฑ ุงูุฏูุฑู (spin-wait) ุ ูุฌุฏุฑ ุงูุญุฏูุซ ุนู ููุงูู SpinLock ู SpinWait ูู BCL.  ูุฌุจ ุนููู ุงุณุชุฎุฏุงููุง ุฅุฐุง ูุงูุช ููุงู ุฃุณุจุงุจ ุงูุชุฑุถ ุฃูู ุณูููู ูู ุงููููู ุฏุงุฆููุง ุงูุญุตูู ุนูู ูุชูุฉ ุจุณุฑุนุฉ ูุจูุฑุฉ.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุฌุจ ุฃูุง ุชููุฑ ูููุง ุญููุง ุญุชู ุชุธูุฑ ูุชุงุฆุฌ ุงูุชูุตูู ุฃู ุนูู ุงูุฒุฌุงุฌุฉ ูู ุจุฑูุงูุฌู ููุชุฌ ุนู ุงุณุชุฎุฏุงู ุจุฏุงุฆู ุงูุชุฒุงูู ุงูุฃุฎุฑู. <br><a name="Pulse"></a><br><h3 style=";text-align:right;direction:rtl">  Monitor.Wait ุ Monitor.Pulse [ุงููู] </h3><br>  ูุฌุจ ุฃู ููุธุฑ ุฅูู ูุงุชูู ุงูุทุฑููุชูู ุฌูุจูุง ุฅูู ุฌูุจ.  ูู ุฎูุงู ูุณุงุนุฏุชูู ุ ููููู ุชูููุฐ ุงูุนุฏูุฏ ูู ุณููุงุฑูููุงุช ุงูููุชุฌูู ูุงููุณุชููููู. <br><br>  ุงูููุชุฌ-ุงููุณุชููู ูู ููุท ูู ุชุตููู ูุชุนุฏุฏ ุงูุนูููุงุช / ูุชุนุฏุฏ ุงูุฎููุท ูุชุถูู ูุงุญุฏูุง ุฃู ุฃูุซุฑ ูู ุณูุงุณู ุงูุนูููุงุช / ุงูุนูููุงุช ุงูุชู ุชูุชุฌ ุงูุจูุงูุงุช ูุนูููุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ ูู ุงูุนูููุงุช / ุณูุงุณู ุงูุนูููุงุช ุงูุชู ุชุนุงูุฌ ูุฐู ุงูุจูุงูุงุช.  ุนุงุฏุฉ ุ ูุชู ุงุณุชุฎุฏุงู ูุฌููุนุฉ ูุดุชุฑูุฉ. <br><br>  ูุง ูููู ุงุณุชุฏุนุงุก ููุชุง ุงูุทุฑููุชูู ุฅูุง ุนู ุทุฑูู ูุคุดุฑ ุชุฑุงุจุท ูุญุชูู ุญุงููุงู ุนูู ูุชูุฉ.  ุณุชููู ุทุฑููุฉ ุงูุงูุชุธุงุฑ ุจุชุญุฑูุฑ ุงููุชูุฉ ูุชุฌููุฏูุง ุญุชู ูุชู ุงุณุชุฏุนุงุก ูุคุดุฑ ุชุฑุงุจุท ุขุฎุฑ ูููุจุถ. <br><br>  ููุฏููู ุนูู ุฐูู ุ ูุชุจุช ูุซุงููุง ุจุณูุทูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">object</span></span> syncObject = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>(); Thread t1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(T1); t1.Start(); Thread.Sleep(<span class="hljs-number"><span class="hljs-number">100</span></span>); Thread t2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(T2); t2.Start();</code> </pre><img src="https://habrastorage.org/webt/0-/7k/uy/0-7kuyx2b8evi2iwzmt-6-capv0.png"><br>  <i>(ุงุณุชุฎุฏูุช ุตูุฑุฉ ุจุฏูุงู ูู ูุต ููุง ูุฅุธูุงุฑ ุชุฑุชูุจ ุชูููุฐ ุงูุชุนูููุงุช ุจุฏูุฉ)</i> <br>  <b>Explanation:</b> ููุช ุจุชุญุฏูุฏ ุฒูู ุงูุชูุงู ูุฏุฑู 100 ูููู ุซุงููุฉ ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุฎูุท ุงูุซุงูู ููุชุฃูุฏ ูู ุฃูู ุณูุชู ุชูููุฐู ูููุง ุจุนุฏ. <br>  - T1: ุงูุณุทุฑ # 2 ูุจุฏุฃ ุงูุฎูุท <br>  - T1: ุงูุณุทุฑ ุฑูู 3 ูุฏุฎู ุงูุฎูุท ุฅูู ูุณู ููู <br>  - T1: ุงูุณุทุฑ ุฑูู 6 ูุฐูุจ ุงูุฎูุท ุฅูู ุงูููู <br>  - T2: ุงูุณุทุฑ # 3 ูุจุฏุฃ ุงูุฎูุท <br>  - T2: ุงูุฎุท # 4 ูุชุฌูุฏ ูููุชุธุฑ ุงููุณู ุงูุญุฑุฌ <br>  - T1: ุงูุฎุท ุฑูู 7 ุ ูุชูุญ ูููุณู ุงูุญุฑุฌ ุฃู ูุชุฌูุฏ ููุชุฌูุฏ ุฃุซูุงุก ุงูุชุธุงุฑ ุฎุฑูุฌ ุงููุจุถ <br>  - T2: ุงูุฎุท ุฑูู 8 ูุฏุฎู ุงููุณู ุงูุญุฑุฌ <br>  - T2: ุงูุฎุท # 11 ูุดูุฑ ุฅูู T1 ุจูุณุงุนุฏุฉ Pulse <br>  - T2: ุงูุฎุท ุฑูู 14 ูุฎุฑุฌ ูู ุงููุณู ุงูุญุฑุฌ.  ูุง ูููู ูู T1 ูุชุงุจุนุฉ ุชูููุฐู ูุจู ุญุฏูุซ ุฐูู. <br>  - T1: ุงูุฎุท ุฑูู 15 ูุฎุฑุฌ ูู ุงูุงูุชุธุงุฑ <br>  - T1: ุฎุท # 16 ูุฎุฑุฌ ูู ุงููุณู ุงูุญุฑุฌ <br><br>  <i>ููุงู ููุงุญุธุฉ ูููุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">MSDN</a> ุชุชุนูู ุจุงุณุชุฎุฏุงู ุทุฑู Pulse / Wait: ูุง ูููู Monitor ุจุชุฎุฒูู ูุนูููุงุช ุงูุญุงูุฉ ุ ููุง ูุนูู ุฃู ุงุณุชุฏุนุงุก ุทุฑููุฉ Pulse ูุจู ุฃู ูุคุฏู ุฃุณููุจ Wait ุฅูู ุชููู ุชุงู.</i>  <i>ุฅุฐุง ูุงูุช ูุซู ูุฐู ุงูุญุงูุฉ ููููุฉ ุ ููู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุฃุญุฏ ุงููุตูู ูู ุนุงุฆูุฉ ResetEvent.</i> <br><br>  ููุถุญ ุงููุซุงู ุงูุณุงุจู ุจูุถูุญ ููููุฉ ุนูู ุฃุณุงููุจ ุงูุงูุชุธุงุฑ / ุงููุจุถ ููุฆุฉ ุงูุดุงุดุฉ ุ ููููู ูุง ูุฒุงู ูุชุฑู ุจุนุถ ุงูุฃุณุฆูุฉ ุญูู ุงูุญุงูุงุช ุงูุชู ูุฌุจ ุฃู ูุณุชุฎุฏููุง ูููุง.  ูุซุงู ุฌูุฏ ุนูู ุฐูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุทุจูู</a> BlockingQueue &lt;T&gt;.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุฅู ุชุทุจูู BlockingCollection &lt;T&gt; ูู System.Collections.Concurrent ูุณุชุฎุฏู SemaphoreSlim ููุชุฒุงูู. <br><a name="ReaderWriterLockSlim"></a><br><h3 style=";text-align:right;direction:rtl">  ReaderWriterLockSlim </h3><br>  ุฃุญุจ ุบุงููุง ูุฐุง ุงูุชุฒุงูู ุงูุจุฏุงุฆู ุ ูููุซูู ูุฆุฉ ูู ููุณ ุงูุงุณู ูู ูุณุงุญุฉ ุงูุงุณู System.Threading.  ุฃุนุชูุฏ ุฃู ุงููุซูุฑ ูู ุงูุจุฑุงูุฌ ุณุชุนูู ุจุดูู ุฃูุถู ุฅุฐุง ุงุณุชุฎุฏู ูุทูุฑููุง ูุฐู ุงููุฆุฉ ุจุฏูุงู ูู ุงูููู ุงูููุงุณู. <br><br>  ุงูููุฑุฉ: ูููู ูุฑุงุกุฉ ุงููุซูุฑ ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุ ููููู ูููุชุงุจุฉ ููุท ุงููุชุงุจุฉ.  ุนูุฏูุง ูุฑุบุจ ููุถูุน ูู ุงููุชุงุจุฉ ุ ูุง ูููู ุจุฏุก ูุฑุงุกุฉ ุฌุฏูุฏุฉ - ุณูู ููุชุธุฑูู ุญุชู ุงูููุงูุฉ.  ููุงู ุฃูุถูุง ููููู ููู ุงููุฑุงุกุฉ ุงููุงุจู ููุชุฑููุฉ.  ููููู ุงุณุชุฎุฏุงูู ุนูุฏูุง ุ ุฃุซูุงุก ุนูููุฉ ุงููุฑุงุกุฉ ุ ุชููู ุฃู ููุงู ุญุงุฌุฉ ููุชุงุจุฉ ุดูุก ูุง - ุณูุชู ุชุญููู ูุฐุง ุงูููู ุฅูู ููู ูููุชุงุจุฉ ูู ุนูููุฉ ุฐุฑูุฉ ูุงุญุฏุฉ. <br><br>  ูู ูุณุงุญุฉ ุงูุงุณู System.Threading ุ ููุงู ุฃูุถูุง ูุฆุฉ ReadWriteLock ุ ููู ููุตู ุจุดุฏุฉ ุจุนุฏู ุงุณุชุฎุฏุงููุง ูุชุทููุฑ ุฌุฏูุฏ.  ุณูู ุชุณุงุนุฏ ูุณุฎุฉ Slim ูู ุชุฌูุจ ุงูุญุงูุงุช ุงูุชู ุชุคุฏู ุฅูู ุญุงูุฉ ุชููู ุชุงู ูุชุณูุญ ุจุงูุชูุงุท ูุชูุฉ ุจุณุฑุนุฉ ูุฃููุง ุชุฏุนู ุงููุฒุงููุฉ ูู ูุถุน ุงูุงูุชุธุงุฑ ุงูุฏูุฑุงูู ูุจู ุงูุงูุชูุงู ุฅูู ุงููุถุน ุงูุฃุณุงุณู. <br><br>  ุฅุฐุง ููุช ูุง ุชุนุฑู ูุฐุง ุงููุตู ูุจู ูุฑุงุกุฉ ูุฐุง ุงูููุงู ุ ุฃุนุชูุฏ ุงูุขู ุ ุฃูู ุชุฐูุฑุช ุงููุซูุฑ ูู ุงูุฃูุซูุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูููุชูุจุฉ ุญุฏูุซูุง ุญูุซ ุณูุญ ูุฐุง ุงูููุฌ ูููุชู ุจุงูุนูู ุจูุนุงููุฉ. <br><br>  ูุงุฌูุฉ ูุฆุฉ ReaderWriterLockSlim ุจุณูุทุฉ ูุณููุฉ ุงูููู ุ ูููููุง ููุณุช ูุฑูุญุฉ ูู ุงูุงุณุชุฎุฏุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReaderWriterLockSlim(); @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>.EnterReadLock(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... } finally { @lock.ExitReadLock(); }</span></span></code> </pre><br>  ุนุงุฏุฉู ูุง ุฃุฑุบุจ ูู ูููุง ูู ูุตู - ููุฐุง ูุฌุนููุง ุฃูุซุฑ ุณูููุฉ. <br><br>  <i><b>ุงูููุฑุฉ:</b> ุฅูุดุงุก ุฃุณุงููุจ ูููุฑุงุกุฉ / WriteLock ุงูุชู ุชุฑุฌุน ูุงุฆููุง ูุน ุทุฑููุฉ ุงูุชุฎูุต.</i>  <i>ููููู ุจุนุฏ ุฐูู ุงููุตูู ุฅูููุง ุจุงุณุชุฎุฏุงู ุ ูุฑุจูุง ูู ูุฎุชูู ูุซูุฑูุง ุนู ุงูููู ุงูููุงุณู ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจุนุฏุฏ ุงูุฃุณุทุฑ.</i> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RWLock</span></span> : <span class="hljs-title"><span class="hljs-title">IDisposable</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> WriteLockToken : IDisposable { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ReaderWriterLockSlim @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteLockToken</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ReaderWriterLockSlim @</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">lock</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.@<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span> = @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>; @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>.EnterWriteLock(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>.ExitWriteLock(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> ReadLockToken : IDisposable { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ReaderWriterLockSlim @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadLockToken</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ReaderWriterLockSlim @</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">lock</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.@<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span> = @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>; @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>.EnterReadLock(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>.ExitReadLock(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ReaderWriterLockSlim @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReaderWriterLockSlim(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ReadLockToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadLock</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReadLockToken(@<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> WriteLockToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteLock</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WriteLockToken(@<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; @<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span>.Dispose(); }</code> </pre><br>  ูุฐุง ูุณูุญ ููุง ููุท ุจูุชุงุจุฉ ูุง ููู ูุงุญููุง ูู ุงูููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rwLock = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RWLock(); <span class="hljs-comment"><span class="hljs-comment">// ... using(rwLock.ReadLock()) { // ... }</span></span></code> </pre><br><a name="ResetEvent"></a><br><h3 style=";text-align:right;direction:rtl">  ุนุงุฆูุฉ ResetEvent </h3><br>  ุฃุฏุฑุฌ ุงููุฆุงุช ุงูุชุงููุฉ ูู ูุฐู ุงูุนุงุฆูุฉ: ManualResetEvent ู ManualResetEventSlim ู AutoResetEvent. <br><br>  ูููู ุฃู ุชูุฌุฏ ูุฆุฉ ManualResetEvent ูุฅุตุฏุงุฑูุง ุงููุญูู ููุฆุฉ AutoResetEvent ูู ุญุงูุชูู: <br><br>  - ุจุฏูู ุฅุดุงุฑุฉ - ูู ูุฐู ุงูุญุงูุฉ ุ ุชุชุฌูุฏ ุฌููุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงูุชู ุชุณูู WaitOne ุญุชู ูุชุญูู ุงูุญุฏุซ ุฅูู ุญุงูุฉ ุฅุดุงุฑุฉ. <br>  - ุงูุฅุดุงุฑุฉ - ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุฅุตุฏุงุฑ ุฌููุน ุงูุฎููุท ุงููุฌูุฏุฉ ูุณุจููุง ูู ููุงููุฉ WaitOne.  ูุชู ุฅุฌุฑุงุก ุฌููุน ููุงููุงุช WaitOne ุงูุฌุฏูุฏุฉ ุนูู ุญุฏุซ ูุดุงุฑ ุจุดูู ููุฑู ูุณุจููุง. <br><br>  ูุฎุชูู AutoResetEvent ุนู ManualResetEvent ูุฃูู ููุชูู ุชููุงุฆููุง ุฅูู ุงูุญุงูุฉ ุบูุฑ ุงููุดุงุฑ ุฅูููุง ุจุนุฏ ุชุญุฑูุฑ <b>ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ุชูุงููุง</b> .  ุฅุฐุง ุชู ุชุฌููุฏ ุจุนุถ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุฃุซูุงุก ุงูุชุธุงุฑ AutoResetEvent ุ ููู ูููู ุงุณุชุฏุนุงุก Set ุฅูุง ุจุฅุตุฏุงุฑ ูุคุดุฑ ุชุฑุงุจุท ุนุดูุงุฆู ูุงุญุฏ ุ ุจุฏูุงู ูู ManualResetEvent ุงูุฐู ูุตุฏุฑ ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท. <br><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุซุงู ุนู ููููุฉ ุนูู AutoResetEvent: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">AutoResetEvent evt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AutoResetEvent(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); Thread t1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(T1); t1.Start(); Thread.Sleep(<span class="hljs-number"><span class="hljs-number">100</span></span>); Thread t2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(T2); t2.Start();</code> </pre><img src="https://habrastorage.org/webt/ku/us/k2/kuusk2oupkj4_gftf8fixy_51pu.png"><br>  ูู ูุฐู ุงูุฃูุซูุฉ ุ ูููููุง ุฃู ูุฑู ุฃู ุงูุญุฏุซ ููุชูู ุฅูู ุงูุญุงูุฉ ุบูุฑ ุงููุดุงุฑ ุฅูููุง ุชููุงุฆููุง ููุท ุจุนุฏ ุฅุทูุงู ูุคุดุฑ ุงูุชุฑุงุจุท ุงูุฐู ุชู ุชุฌููุฏู ูู ููุงููุฉ WaitOne. <br><br>  ุจุฎูุงู ReaderWriterLock ุ ูุง ูุนุชุจุฑ ManualResetEvent ูุฏูููุง ุญุชู ุจุนุฏ ุธููุฑ ุฅุตุฏุงุฑ Slim ุงูุฎุงุต ุจู.  ูููู ุฃู ุชููู ูุฐู ุงููุณุฎุฉ ุงูุฑููุนุฉ ูู ุงููุตู ูุนุงูุฉ ูู ูุชุฑุงุช ุงูุงูุชุธุงุฑ ุงููุตูุฑุฉ ููุง ูุญุฏุซ ูู ูุถุน Spin-Wait ุ  ุงูุฅุตุฏุงุฑ ุงูููุงุณู ุฌูุฏ ููุงูุชุธุงุฑ ุงูุทููู. <br><br>  ูุจุตุฑู ุงููุธุฑ ุนู ูุฆุงุช ManualResetEvent ู AutoResetEvent ุ ููุงู ุฃูุถูุง ูุฆุฉ CountdownEvent.  ูุฐู ุงููุฆุฉ ูููุฏุฉ ุฌุฏูุง ูุชุทุจูู ุงูุฎูุงุฑุฒููุงุช ุงูุชู ุชููู ุจุฏูุฌ ุงููุชุงุฆุฌ ูุนูุง ุจุนุฏ ูุณู ููุงุฒู.  ููุนุฑู ูุฐุง ุงูููุฌ ุจุงุณู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุดููุฉ ุงูุตูุฉ</a> .  ููุฌุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู</a> ุฑุงุฆุน ูุฎุตุต ููุฐุง ุงููุตู ุ ูุฐูู ูู ุฃุตูู ุจุงูุชูุตูู ููุง. <br><a name="Conclusions"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุงุณุชูุชุงุฌุงุช </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนูุฏ ุงูุนูู ูุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุ ููุงู ูุณุฃูุชุงู ูุฏ ุชุคุฏูุงู ุฅูู ูุชุงุฆุฌ ุบูุฑ ุตุญูุญุฉ ุฃู ุญุชู ุนุฏู ูุฌูุฏ ูุชุงุฆุฌ - ุญุงูุฉ ุงูุณุจุงู ู ุญุงูุฉ ุชููู ุชุงู. </li><li style=";text-align:right;direction:rtl">  ุงููุดููุงุช ุงูุชู ูููู ุฃู ุชุฌุนู ุงูุจุฑูุงูุฌ ููุถู ุงููุฒูุฏ ูู ุงูููุช ุฃู ุงูููุงุฑุฏ ูู ุชุฌููุน ุงูุฎูุท ูุงูุงูุชุธุงุฑ ุงููุดุบูู. </li><li style=";text-align:right;direction:rtl">  ูููุฑ .NET ุงูุนุฏูุฏ ูู ุงูุทุฑู ููุฒุงููุฉ ูุคุดุฑุงุช ุงูุชุฑุงุจุท. </li><li style=";text-align:right;direction:rtl">  ููุงู ููุนุงู ูู ุฃูุถุงุน ุงูุชุธุงุฑ ุงููุชูุฉ - Spin Wait ู Core Wait.  ุจุฏุงุฆู ุงูุชุฒุงูู ููุคุดุฑ ุชุฑุงุจุท Som.e ูู .NET ุชุณุชุฎุฏู ููุงููุง. </li><li style=";text-align:right;direction:rtl">  Interlocked ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ูู ุงูุนูููุงุช ุงูุฐุฑูุฉ ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูุชูููุฐ ุฎูุงุฑุฒููุงุช ุฎุงููุฉ ูู ุงูููู.  ุฅูู ุฃุณุฑุน ุงูุชุฒุงูู ุงูุจุฏุงุฆู. </li><li style=";text-align:right;direction:rtl">  ุงูููู ูุงูุดุงุดุฉ: ูููู ูุดุบูู ุงูุฅุฏุฎุงู / ุงูุฎุฑูุฌ ุจุชูููุฐ ููููู ุงููุณู ุงูุญุฑุฌ - ุฌุฒุก ูู ุงูุดูุฑุฉ ูุง ูููู ุชูููุฐู ุฅูุง ุจุฎูุท ูุงุญุฏ ูู ููุช ูุงุญุฏ. </li><li style=";text-align:right;direction:rtl">  ุชุนุชุจุฑ ุทุฑู Monitor.Pulse / Wait ูููุฏุฉ ูุชูููุฐ ุณููุงุฑูููุงุช ุงูููุชุฌูู ูุงููุณุชููููู. </li><li style=";text-align:right;direction:rtl">  ูููู ุฃู ูููู ReaderWriterLockSlim ุฃูุซุฑ ูุงุฆุฏุฉ ูู ุญุงูุงุช ุงูุชุฃููู ุงูููุงุณูุฉ ุนูุฏ ุชููุน ูุฑุงุกุฉ ูุชูุงุฒูุฉ. </li><li style=";text-align:right;direction:rtl">  ูููู ุฃู ุชููู ุนุงุฆูุฉ ุงููุฆุฉ ResetEvent ูููุฏุฉ ููุฒุงููุฉ ูุคุดุฑ ุงูุชุฑุงุจุท. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar461471/">https://habr.com/ru/post/ar461471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar461461/index.html">ุชุฒุฏูุฑ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูู ุนุตุฑ ุงูุณุญุงุจุฉ ุ ููู ุจูุฑุงุช ุงูุดุฑูุท ูุง ุชููุณู. ูุญุงุฏุซุฉ ูุน Veeam</a></li>
<li><a href="../ar461463/index.html">ุงูุนูููุงุช ุงูุชุฌุงุฑูุฉ ูู ุดุฑูุงุช ุงููุดุงุฑูุน: ุงููุถุงุฑุจุฉ ูุงููุงูุน. ุฅููุงุก ุงูุถูุก ูุน R</a></li>
<li><a href="../ar461465/index.html">ุฏููู ุงูููุงุณ</a></li>
<li><a href="../ar461467/index.html">ูุซุงู ุนูู ุฅูุดุงุก ุชุทุจููุงุช Makefile ูู Go</a></li>
<li><a href="../ar461469/index.html">ูุง ูุดุจู ุงูุงุณุชูุงุน ุฅูู ุฑูุฒ ูู 1000 ูููุฉ ูู ุงูุฏูููุฉ ุงููุงุญุฏุฉ</a></li>
<li><a href="../ar461473/index.html">ุฎูุงุฑุฒููุงุช ุงูุชุตุญูุญ ุนูู ุงูุฑุณูู ุงูุจูุงููุฉ - ุงูุขู ูุน ุงูุตูุฑ</a></li>
<li><a href="../ar461475/index.html">AMA ูุน ูุจุฑ 1011</a></li>
<li><a href="../ar461483/index.html">ููุงุฒูุฉ ุงูุชุญููู Openstack</a></li>
<li><a href="../ar461487/index.html">ููุงู CTF ูุตุบุฑุฉ</a></li>
<li><a href="../ar461493/index.html">ุณูููู Django 3.0 ุบูุฑ ูุชุฒุงูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>