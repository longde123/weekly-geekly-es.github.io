<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ™Ô∏è ‚öîÔ∏è üëäüèª Vorbereitung auf die Spring Professional-Zertifizierung. Fr√ºhlingssicherheit üèë üëçüèª üë®üèº‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist eine √úbersetzung des Spring Professional Certification Prep- Artikels. 


 Es wird das Thema Spring Security und die wichtigsten Fr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vorbereitung auf die Spring Professional-Zertifizierung. Fr√ºhlingssicherheit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470786/"><p>  Dieser Artikel ist eine √úbersetzung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spring Professional Certification Prep-</a> Artikels. </p><br><p>  Es wird das Thema Spring Security und die wichtigsten Fragen dazu behandeln. </p><br><p>  Es kann auch verwendet werden, um sich auf ein Interview vorzubereiten. </p><br><p>  ‚Üì Weitere Artikel finden Sie unter den Links im Inhaltsverzeichnis ‚Üì </p><br><div class="spoiler">  <b class="spoiler_title">Inhaltsverzeichnis</b> <div class="spoiler_text"><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abh√§ngigkeitsinjektion, Container, IoC, Bohnen</a> </li><li>  AOP (aspektorientierte Programmierung) </li><li>  JDBC, Transaktionen, JPA, Federdaten </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fr√ºhlingsstiefel</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fr√ºhling mvc</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fr√ºhlingssicherheit</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RUHE</a> </li><li>  Testen </li></ol></div></div><br><p><img src="https://habrastorage.org/webt/q7/qy/qq/q7qyqqemf0oh1lsftat7d44gvo0.png"></p><br><hr><a name="habracut"></a><br><p>  Fragen selbst: </p><br><div class="spoiler">  <b class="spoiler_title">Was ist Authentifizierung und Autorisierung?</b> <div class="spoiler_text"><p>  Bei der Authentifizierung wird der Benutzer eines Computersystems √ºberpr√ºft. <br>  So passiert es im Fr√ºhling: </p><br><ol><li> Das resultierende Kennwort und der Benutzername werden in eine Instanz von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UsernamePasswordAuthenticationToken</a> konvertiert.  Es implementiert die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Authentifizierungsschnittstelle</a> . </li><li> Das Token wird zur √úberpr√ºfung an das <code>AuthenticationManager</code> Objekt √ºbergeben </li><li>  Bei Erfolg gibt AM ein ausgef√ºlltes <code>Authentication</code> </li><li>  Der Sicherheitskontext wird durch Aufrufen von <code>SecurityContextHolder.getContext().setAuthentication(...)</code> </li></ol><br><p>  Bei der Autorisierung wird √ºberpr√ºft, ob der Benutzer √ºber die zum Ausf√ºhren einer Aktion erforderliche Rolle verf√ºgt.  W√§hrend der Autorisierung wird gepr√ºft, ob Sie √ºber die entsprechenden Rechte f√ºr den Zugriff auf die Ressource verf√ºgen. </p><br><p>  Prozess: </p><br><ol><li>  Vom Auftraggeber wird die Rolle des Benutzers angezeigt </li><li>  Benutzerrolle gegen Ressourcenrolle gepr√ºft </li></ol><br><p>  Zuerst erfolgt die Authentifizierung und dann die Authentifizierung. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Wie funktioniert Sicherheit intern?</b> <div class="spoiler_text"><ul><li><p>  Verwenden von Spring AOP-Proxys, die von der AbstractSecurityInterceptor-Klasse erben. </p><br><p>  Es wird f√ºr Methoden verwendet, die die Autorisierung aufrufen. </p><br></li><li><p>  Die Sicherheits-Webinfrastruktur basiert auf Servlet-Filtern. </p><br></li></ul><br><p>  Der erste Schritt besteht darin, den Filter <code>DelegatingFilterProxy</code> zu konfigurieren.  Er delegiert die Anfrage an <code>FilterChainProxy</code> . </p><br><p>  <code>FilterChainProxy</code> ist eine Bean, die eine oder mehrere <code>SecurityFilterChain</code> im Konstruktor akzeptiert. </p><br><p>  <code>SeccurityFilterChain</code> vergleicht die URL in der Anforderung mit einer Liste von Filtern. </p><br><p><img src="https://habrastorage.org/webt/kd/dq/ue/kddquemwaqzt7fflstsye9-3lwg.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Hauptmerkmale von Spring Security</b> <div class="spoiler_text"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>SecurityContextHolder</code></a> - enth√§lt und bietet Zugriff auf den SecurityContext in der Anwendung. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>SecurityContext</code></a> - Die Standardimplementierung von Spring Security, die das Authentifizierungsobjekt enth√§lt. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>Authentication</code></a> - Stellt ein Token f√ºr eine Authentifizierungsanforderung oder f√ºr einen Principal bereit, der sich authentifiziert hat.  Es enth√§lt auch eine Liste der Befugnisse, auf die der Auftraggeber Zugriff hat. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>GrantedAuthority</code></a> - Enth√§lt die Berechtigung, die dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>GrantedAuthority</code></a> Principal erteilt wurde. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>UserDetails</code></a> - enth√§lt Informationen zum Benutzer: Passwort, Login, Berechtigungen.  Diese Informationen werden verwendet, um nach erfolgreicher Authentifizierung ein Authentifizierungsobjekt zu erstellen. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>UserDetailsService</code></a> - Dieser Service extrahiert Informationen √ºber den Benutzer aus dem Repository (Programmspeicher, Datenbank usw.) und f√ºgt sie in UserDetails ein. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Was ist ein Delegate-Proxy-Filter?</b> <div class="spoiler_text"><p>  Die <code>DelegatingFilterProxy</code> Klasse ist eine Klasse, die die Schnittstelle <code>javax.Servlet.Filter</code> implementiert. </p><br><p>  Dies ist ein spezieller Filter, der die Arbeit an andere Beans delegiert, die ebenfalls Filter sind. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Was ist eine Sicherheitsfilterkette?</b> <div class="spoiler_text"><p>  Die Filterkette implementiert die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>SecurityFilterChain</code></a> Schnittstelle.  Die von Spring Security bereitgestellte Implementierung lautet DefaultSecurityFilterChain. </p><br><p>  Der DSFC-Konstruktor akzeptiert mehrere Parameter.  Der erste Parameter ist Request Matcher.  Die √ºbrigen Parameter sind Filter, die die Servlet.Filter-Schnittstelle implementieren.  Hier sind alle von DSFC akzeptierten Filter: </p><br><ul><li> <code>ChannelProcessingFilter</code> </li> <li> <code>SecurityContextPersistenceFilter</code> </li> <li> <code>ConcurrentSessionFilter</code> </li> <li>  Beliebige Authentifizierung.  Filter: <code>UserNamePasswordAuthenticationFilter</code> / <code>CasAythenticationFilter</code> / <code>BasicAuthenticationFilter</code> </li><li> <code>SecurityContextHolderAwareRequestFilter</code> </li> <li> <code>JaasApiIntegrationFilter</code> </li> <li> <code>RemeberMeAuthenticationFilter</code> </li> <li> <code>AnonymusAuthenticationFilter</code> </li> <li> <code>ExceptionTranslationFilter</code> </li> <li> <code>FilterSecurityInterceptor</code> </li> </ul></div></div><br><div class="spoiler">  <b class="spoiler_title">Was ist ein Sicherheitskontext?</b> <div class="spoiler_text"><p>  Das prim√§re Objekt ist ein <code>SecurityContextHolder</code> .  Hier werden Details zum aktuellen Sicherheitskontext gespeichert, z. B. Details zum Principal, der die Anwendung derzeit verwendet.  Standardm√§√üig wird <code>ThreadLocal</code> f√ºr die Speicherung verwendet. </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// SecurityContext SecurityHolderContext.getContext()</span></span></code> </pre> <br><p>  Das von der Methode <code>getContext()</code> Objekt ist <code>SecurityContext</code> .  Sie k√∂nnen ein <code>Authentication</code> empfangen und einrichten. </p><br><p>  <code>Authentication</code> stellt die folgenden Eigenschaften dar: </p><br><ul><li>  Die Sammlung von Befugnissen, die dem Auftraggeber gew√§hrt wurden </li><li>  Daten zur Benutzeridentifikation (Login, Passwort) </li><li>  Details - hinzuf√ºgen.  Informationen, falls erforderlich.  Kann null sein </li><li>  Auftraggeber </li><li>  Authentifizierungsflag - Boolesche Variable, die angibt, ob der Principal den Test erfolgreich bestanden hat </li></ul></div></div><br><div class="spoiler">  <b class="spoiler_title">Wie stelle ich ein Benutzer-Klick-Abfangen bei bestimmten URLs ein?</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpSecurity http)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ http.authorizeRequests() <span class="hljs-comment"><span class="hljs-comment">//    /resources .antMatchers("/resources/**").permitAll() //      2  .antMatchers("/").hasAnyRole("ANONYMOUS", "USER") .antMatchers("/login)*").hasAnyRole("ANONYMOUS", "USER") .antMatchers("/logoutr").hasAnyRole("ANONYMOUS", "USER") //      ADMIN .antMatchers("iadmin/*").hasRole("ADMIN") .antMatchers("/events/").hasRole("ADMIN") }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Was bedeutet * in den Methoden antMatchers und mvcMatchers ()?</b> <div class="spoiler_text"><p>  Dieser Ausdruck bedeutet "beliebig". </p><br><p>  Es gibt 2 Arten: </p><br><ul><li><p>  <code>*</code> - f√§ngt nur auf der Ebene ab, auf der es verwendet wird. </p><br><p>  Das Muster "/ orders / *" √ºberpr√ºft beispielsweise die Rechte des Benutzers, wenn der Benutzer folgt </p><br><p>  / Befehle / Au√üerirdische oder / Befehle / 1, aber nicht / Befehle / Au√üerirdischer / 1. </p><br></li><li><p>  <code>**</code> - Abschnitte auf allen Ebenen. <br>  Alle Anfragen werden gepr√ºft, / Bestellungen / Aliens, / Bestellungen / 1, / Bestellungen / Alien / 1. </p><br></li></ul></div></div><br><div class="spoiler">  <b class="spoiler_title">Warum ist mvcMatcher sicherer als antMatcher?</b> <div class="spoiler_text"><p>  Weil <code>antMatcher(‚Äú/service‚Äù)</code> den Anforderungspfad nur <code>‚Äú/service‚Äù</code> <code>mvcMatcher(‚Äú/service‚Äù)</code> , w√§hrend <code>mvcMatcher(‚Äú/service‚Äù)</code> <code>‚Äú/service‚Äù</code> , <code>‚Äú/service.html‚Äù</code> , "/service.abc" zuordnet. . </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Unterst√ºtzt Spring das Passwort-Hashing?</b>  <b class="spoiler_title">Was ist Salz?</b> <div class="spoiler_text"><p>  Ja, das tut es.  Es gibt eine <code>PasswordEncoder</code> Schnittstelle f√ºr das Hashing, die nur eine Methode enth√§lt: </p><br><p>  <code>static PasswordEncoder createDelegatingPasswordEncoder()</code> , der den Standard- <code>DelegatePasswordEncoder</code> zur√ºckgibt. </p><br><p>  Salt wird verwendet, um den Passwort-Hash-Wert zu berechnen.  Dies ist eine Folge von Zufallszahlen, mit denen ein Textkennwort in einen Hash konvertiert wird.  Das Salt wird in klarer Form neben dem Hash-Passwort gespeichert und kann sp√§ter verwendet werden, wenn ein sauberes Passwort mit einem neuen Benutzer-Login in einen Hash konvertiert wird. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Warum brauchen Sie Schutz f√ºr Methoden?</b>  <b class="spoiler_title">Wie installiere ich es?</b> <div class="spoiler_text"><p>  Spring Security unterst√ºtzt den Schutz einzelner Methoden in Beans (z. B. in Controllern).  Dies ist eine zus√§tzliche Schutzschicht f√ºr die Anwendung. </p><br><p>  Sie muss explizit mit der Annotation <code>@EnableGlobalMethodSecurity</code> angegeben werden. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Was macht die Annotation @RolesAllowed?</b> <div class="spoiler_text"><p>  Diese Anmerkung basiert auf dem JSR-250. <br>  <code>@RolesAllowed</code> k√∂nnen Sie den Zugriff auf Methoden (z. B. in der Controller-Klasse) mithilfe von Rollen konfigurieren. <br>  Beispiel: <code>@RolesAllowed(‚ÄúADMIN‚Äù)</code> erlaubt nur Benutzern mit der <code>ADMIN</code> Rolle </p><br><p>  Zur Verwendung m√ºssen Sie <code>@EnableGlobalMethodSecurity(jsr250Enabled=true)</code> f√ºr die @ Configuration-Klasse festlegen. + Diese Annotation muss sich im Klassenpfad befinden. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Erz√§hlen Sie uns von @PreAuthorize</b> <div class="spoiler_text"><p>  <code>@PreAuthorize</code> k√∂nnen Sie den Zugriff auf die Methode mit SpEL konfigurieren. <br>  Zur Verwendung m√ºssen Sie <code>@EnableGlobalMethodSecurity(prePostEnabled=true)</code> </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Wie werden all diese Anmerkungen implementiert?</b> <div class="spoiler_text"><p>  Die End-to-End-Funktionalit√§t wird mithilfe von Spring AOP (Proxy-Objekten) verwendet. </p></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470786/">https://habr.com/ru/post/de470786/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470774/index.html">Neue Typanmerkungen in Python 3.8 (Protokoll, Final, TypedDict, Literal)</a></li>
<li><a href="../de470778/index.html">Seagate ST2000DM008 Laufwerk Bewertung: schnelle "zwei" ohne √úberpreis</a></li>
<li><a href="../de470780/index.html">Die Bar ist genommen - die neue von Seagate zur Aufbewahrung</a></li>
<li><a href="../de470782/index.html">Daten an der Grenze: So erstellen Sie eine neue IT-Architektur</a></li>
<li><a href="../de470784/index.html">Das Farbdesign der mysteri√∂sen Welten der toten Zellen</a></li>
<li><a href="../de470790/index.html">Wir l√∂sen Yandex.Interview-Aufgaben in einem funktionalen Stil</a></li>
<li><a href="../de470792/index.html">Interview mit einem der Macher von Untitled Goose Game</a></li>
<li><a href="../de470794/index.html">Laravel: Erkl√§ren Sie die Grundkonzepte. Erster Teil: Theorie</a></li>
<li><a href="../de470800/index.html">P - Antizipation sowie das vorl√§ufige DUMP Kazan Programm. Siehe die Berichte, die die Fleischwolfauswahl bestanden haben</a></li>
<li><a href="../de470802/index.html">Backup, Teil 6: Vergleichen der Backup-Tools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>