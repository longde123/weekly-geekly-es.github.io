<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🚀 💵 👦🏽 Gestion des dépendances, événements et modèles d'observateurs et de médiateurs 👩🏽‍⚖️ 👋🏼 🧘🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans leur forme pure, les modèles sont assez rares, et lorsque l'on étudie les modèles, en particulier dans les premiers stades, ce ne sont pas tant l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gestion des dépendances, événements et modèles d'observateurs et de médiateurs</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420783/">  Dans leur forme pure, les modèles sont assez rares, et lorsque l'on étudie les modèles, en particulier dans les premiers stades, ce ne sont pas tant les modèles eux-mêmes qui importent que la compréhension des mécanismes (tactiques) avec lesquels ils sont mis en œuvre.  Dans cet article, je voudrais décrire l'un de ces mécanismes (gestion de la dépendance), qui est utilisé dans les modèles Observateur et Médiateur, mais qui est souvent négligé.  Si vous commencez tout juste à apprendre des modèles, alors bienvenue au chat. <a name="habracut"></a><br><br><h3>  Gestion des dépendances </h3><br>  Commençons par la déclaration: si la classe A dépend de la classe B, alors, sans changer le comportement, vous pouvez réécrire le code pour que la classe B dépend de la classe A ou introduire une autre classe C pour que les classes A et B soient indépendantes, et la classe C se liera et dépendra des classes A et B. <br><br><img src="https://habrastorage.org/webt/sv/qp/o-/svqpo-gde7mnctncpcyicol2xxu.png"><br><br>  Une classe dépend d'une autre si elle fait référence à ses champs ou méthodes.  Les champs sont facilement transférés d'une classe à une autre, nous allons donc nous attarder sur les méthodes plus en détail.  Supposons que la classe B contient la méthode Print, qui imprime la date actuelle sur la console, et que la classe A appelle cette méthode. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> B _b; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">A</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">B b</span></span></span><span class="hljs-function">)</span></span> { _b = b; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _b.Print(); } } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">B</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(DateTime.Now.ToString()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> B(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> A(b); a.Run(); }</code> </pre> <br>  Ainsi, la classe A dépend de la classe B. Pour inverser cette dépendance, au lieu d'appeler directement la méthode Print, nous allons générer un événement.  Maintenant, la classe A ne sait rien de la classe B, et la classe B peut souscrire à un événement de la classe A. C'est-à-dire  la classe B dépendra de la classe A. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> EventHandler PrintRequested; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { PrintRequested.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, EventArgs.Empty); } } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">B</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> A _a; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">B</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">A a</span></span></span><span class="hljs-function">)</span></span> { _a = a; _a.PrintRequested += (s, e) =&gt; Print(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(DateTime.Now.ToString()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> A(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> B(a); a.Run(); }</code> </pre> <br>  Le comportement du code ne change pas et, dans la méthode appelante, seul l'ordre d'initialisation des objets et le transfert des dépendances au constructeur sont modifiés. <br><br>  En fait, c'est l'implémentation du modèle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Observer</a> en C #.  La classe A est un observable et la classe B est un observateur.  La classe A est une classe indépendante qui génère des notifications (événements).  Les autres classes intéressées peuvent souscrire à ces événements et appliquer leur logique.  Le système devient plus dynamique du fait que maintenant la classe A n'a plus besoin de connaître les autres implémentations.  Nous pouvons ajouter de nouvelles implémentations qui s'abonneront aux événements, tandis que la classe A restera inchangée. <br><br>  Vous pouvez aller plus loin et supprimer la dépendance de la classe B sur A en ajoutant du code externe qui reliera les deux classes, c'est-à-dire  abonner un objet aux événements d'un autre. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> EventHandler PrintRequested; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { PrintRequested.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, EventArgs.Empty); } } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">B</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(DateTime.Now.ToString()); } } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">C</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> A(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> B(); a.PrintRequested += (s, e) =&gt; b.Print(); a.Run(); } }</code> </pre> <br>  Maintenant, les classes A et B sont complètement indépendantes, chacune accomplit sa tâche et ne sait rien des autres classes.  La logique de l'interaction entre les objets entre dans une nouvelle classe.  Seule la classe C sait en réponse à quels événements et dans quelles conditions les méthodes de classe B doivent être appelées. Ainsi, la classe C devient un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">médiateur</a> . <br><br><h3>  Résumé: Combattre la complexité du système </h3><br>  Un des problèmes importants de la programmation est la présence de systèmes complexes issus de classes enchevêtrées avec un grand nombre de dépendances (systèmes étroitement couplés).  En gérant les dépendances, vous pouvez réduire la connectivité, simplifier le système et atteindre une plus grande agilité et flexibilité. <br><br>  Le modèle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Observer</a> réduit la connectivité en inversant les dépendances.  Il est bien applicable lorsqu'il existe plusieurs sources d'événements et de nombreux écouteurs ajoutés dynamiquement.  Un autre bon exemple de l'utilisation de ce modèle est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la programmation réactive</a> , lorsqu'un changement dans l'état d'un objet entraîne un changement dans l'état de tous les objets qui en dépendent, et ainsi de suite. <br><br><img src="https://habrastorage.org/webt/zi/n_/qv/zin_qvuoucnx_9kyfs4meljrehm.png"><br><br>  Le modèle de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">médiateur</a> réduit la connectivité du système car toutes les dépendances vont dans une seule classe, le médiateur et toutes les autres classes deviennent indépendants et ne sont responsables que de la logique qu'ils exécutent.  Ainsi, l'ajout de nouvelles classes devient plus facile, mais avec chaque nouvelle classe, la logique de médiateur est très compliquée.  Au fil du temps, si le médiateur continue de croître de façon incontrôlable, il devient alors très difficile à maintenir. <br><img src="https://habrastorage.org/webt/2e/li/wu/2eliwughdpwyoql8jzgoki6xwl0.png"><br><br>  Un piège dangereux lors de l'utilisation des modèles Observateur et Médiateur est la présence de références circulaires, lorsque des événements de la même classe, traversant une chaîne d'objets, conduisent à nouveau à la génération du même événement.  Ce problème est difficile à résoudre et complique considérablement l'utilisation des modèles. <br><br>  Ainsi, dans différentes circonstances, en gérant les dépendances, vous pouvez arriver à différents modèles, parfois à un mélange d'entre eux, et parfois ce mécanisme sera utile sans utiliser de modèles du tout.  Combattez la complexité et ne produisez pas d'entités. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc3/8da/dd6/cc38dadd649b3a6304b8f3739e30ee92.jpg" alt="image"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr420783/">https://habr.com/ru/post/fr420783/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr420767/index.html">Rostelecom exige que Sputnik soit déclarée en faillite</a></li>
<li><a href="../fr420769/index.html">Looking.House - plus de 150 points de Looking Glass sur un seul site</a></li>
<li><a href="../fr420775/index.html">Propre partie en 72 heures: râteau, béquilles et alpagas</a></li>
<li><a href="../fr420777/index.html">Connexion à Android Studio sans code</a></li>
<li><a href="../fr420779/index.html">Société Boring Mask: tunnel vers le stade et ouverture du tunnel</a></li>
<li><a href="../fr420785/index.html">Travailler en tant que spécialiste informatique en Extrême-Orient - Oblast de Sakhaline</a></li>
<li><a href="../fr420791/index.html">Robots domestiques: ce que vous pouvez acheter. Aperçu des robots domestiques commerciaux disponibles</a></li>
<li><a href="../fr420793/index.html">Débogage en tant que processus</a></li>
<li><a href="../fr420795/index.html">Idées fausses de l'analyste</a></li>
<li><a href="../fr420797/index.html">L'apprentissage ne peut pas être remis à plus tard</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>