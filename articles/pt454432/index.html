<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💆🏽 💯 🍑 Arqueologia divertida: o guia de estilo R sob a lupa 🖖🏽 👨🏾‍💻 👩🏿‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como você sabe, o código é lido com muito mais frequência do que está escrito. Para que pelo menos alguém que não seja o autor possa lê-lo, e haja gui...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arqueologia divertida: o guia de estilo R sob a lupa</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454432/"> Como você sabe, o código é lido com muito mais frequência do que está escrito.  Para que pelo menos alguém que não seja o autor possa lê-lo, e haja guias de estilo.  Para R, este pode ser, por exemplo, o manual de Hadley. <br><br>  Um guia de estilo não é apenas um acordo tácito entre desenvolvedores - muitas das regras têm um histórico curioso.  Por que a seta <code>&lt;-</code> melhor que o sinal de igual <code>=</code> , por que os veteranos R não gostam de sublinhados, como o comprimento recomendado da linha está associado a um cartão perfurado e muito mais - mais. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Isenção de responsabilidade: R Style Guides</b> <div class="spoiler_text">  Ao contrário do Python, o R não possui um único padrão.  Consequentemente, não existe um guia único.  Além do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">guia Hadley</a> (ou de sua versão estendida do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tidyverse</a> ), existem outros, como <a href="">Google</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bioconductor</a> . <br><br>  No entanto, o guia Hadley pode ser considerado o mais difundido (como a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">verificação</a> interna <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">do</a> RStudio, por exemplo), o que é bastante facilitado pela popularidade das bibliotecas criadas pelo próprio Hadley (dplyr, ggplot, tidyr e outros da coleção tidyverse). <br></div></div><br><h2>  1. Operador de atribuição: <code>&lt;-</code> vs <code>=</code> </h2><br>  Todos os guias disponíveis recomendam o uso do operador não padrão <code>&lt;-</code> , mas não o sinal de igual <code>=</code> , que é comum em outros idiomas modernos.  Três outros operadores ( <code>&lt;&lt;-</code> , <code>-&gt;</code> , <code>-&gt;&gt;</code> ) nem são mencionados (como o que existia nas versões anteriores <code>:=</code> ).  Parece, por que precisamos dessa flecha fora do padrão? <br><br>  A história nos revela as cartas: em R, a flecha veio de S, que por sua vez a herdou da APL.  Na APL, nos permitiu distinguir atribuição de igualdade.  Em R, o operador de igualdade é padrão, portanto a diferença é diferente.  Se a seta era inicialmente um operador de atribuição, o sinal de igual atribuía valores <i>apenas aos</i> parâmetros nomeados.  Em 2001, o sinal de igual se tornou o operador de atribuição, mas nunca se tornou sinônimo da seta. <br><br>  O que nos permite considerar <code>=</code> substituto completo para a flecha?  Primeiro de tudo, <code>=</code> como o operador de atribuição funciona apenas no nível superior.  Por exemplo, dentro da função, tudo funcionará como antes: <br><br><pre> <code class="julia hljs">mean(x = <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-comment"><span class="hljs-comment"># [1] 3 x # Error: object 'x' not found mean (x &lt;- 1:5) # [1] 3 x # [1] 1 2 3 4 5</span></span></code> </pre><br>  Aqui <code>=</code> define apenas o parâmetro da função, enquanto <code>&lt;-</code> também atribui o valor à variável x.  Podemos obter o mesmo efeito colocando a operação de atribuição entre parênteses <s>(não, isso ainda não é Lisp)</s> : <br><br><pre> <code class="julia hljs">mean ((x = <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>)) <span class="hljs-comment"><span class="hljs-comment"># [1] 3 x # [1] 1 2 3 4 5</span></span></code> </pre><br>  ... ou entre chaves: <br><br><pre> <code class="julia hljs">mean ({x = <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>}) <span class="hljs-comment"><span class="hljs-comment"># [1] 3 x # [1] 1 2 3 4 5</span></span></code> </pre><br>  Além disso, a seta tem precedência sobre o sinal de igual: <br><br><pre> <code class="julia hljs">x &lt;- y &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-comment"><span class="hljs-comment"># OK x = y = 2 # OK x = y &lt;- 3 # OK x &lt;- y = 4 # Error in x &lt;- y = 4 : could not find function "&lt;-&lt;-"</span></span></code> </pre><br>  A última expressão falhou porque é equivalente a <code>(x &lt;- y) = 4</code> e o analisador a interpreta como <br><br><pre> <code class="julia hljs"><span class="hljs-string"><span class="hljs-string">`&lt;-&lt;-`</span></span>(x, y = <span class="hljs-number"><span class="hljs-number">4</span></span>, value = <span class="hljs-number"><span class="hljs-number">4</span></span>)</code> </pre><br>  Em outras palavras, estamos tentando executar uma operação incorreta: primeiro atribua x a ye depois tente atribuir x e y a 4. A expressão será processada sem erros apenas se você alterar a prioridade das operações entre parênteses: <code>x &lt;- (y = 4)</code> . <br><br><h2>  2. Espaçamento </h2><br>  O guia recomenda colocar espaços entre os operadores (exceto, é claro, colchetes::, :: e :: :), bem como antes do colchete de abertura.  Obviamente, isso faz parte dos padrões de codificação GNU.  No entanto, esta cláusula está intimamente relacionada ao uso de <code>&lt;-</code> como um operador de atribuição.  Por exemplo <br><br><pre> <code class="julia hljs">x &lt;-<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  O que é isso  X é menor que -1?  Ou defina x como 1? <br><br>  No entanto, o espaço extra não é melhor do que o ausente, por exemplo: <br><br><pre> <code class="julia hljs">x &lt;- <span class="hljs-number"><span class="hljs-number">0</span></span> ifelse(x &lt;-<span class="hljs-number"><span class="hljs-number">1</span></span>, T, F) <span class="hljs-comment"><span class="hljs-comment"># [1] TRUE x &lt;- 0 ifelse(x &lt; -1, T, F) # [1] FALSE</span></span></code> </pre><br>  No primeiro caso, não há espaço entre <code>&lt;</code> e <code>-</code> , o que cria um operador de atribuição. <br><br><h2>  3. Nomes de funções e variáveis </h2><br>  Os guias de estilo discordam da questão dos nomes: o guia Hadley recomenda sublinhados para todos os nomes;  Guia do Google - separação por pontos para variáveis ​​e estilo de camelo com a primeira minúscula para funções;  O biocondutor recomenda o LowerCamel para funções e variáveis.  Não há unidade na comunidade R sobre esse problema, e todos os estilos possíveis podem ser encontrados: <br><br><pre> <code class="julia hljs">lowerCamel period.separation lower_case_with_underscores allowercase UpperCamel</code> </pre><br>  Não existe um estilo uniforme, mesmo para os nomes R básicos (por exemplo, nomes de nomes e linhas.nomes são funções diferentes!).  Se você não levar em consideração a caixa de leitura ilegível (somente os usuários do Matlab podem adorar), existem três estilos mais populares: lowerCamel, letras minúsculas com _ e letras minúsculas com separação de pontos. <br><br><img src="https://habrastorage.org/webt/kv/mr/a1/kvmra14xyiec6k6eiya0s6nxmys.png"><br><br>  A popularidade de estilos diferentes para nomes de funções e parâmetros (um nome pode corresponder a estilos diferentes).  Fonte: Rasmus Bååth <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">performance</a> on useR! 2017. <br><br><div class="spoiler">  <b class="spoiler_title">A mesma coisa em 2012</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wx/tj/tt/wxtjttoeaoxb1zzoyokrrbxh2pg.png"><br>  Fonte: Baath (2012).  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O estado das convenções de nomenclatura em R</a> ".  The R Journal vol.  4/2, p. 74-75. <br></div></div><br>  A separação ponto a ponto é sinistramente reminiscente do uso de métodos na programação orientada a objetos, mas é historicamente comum.  É tão comum que esse estilo em particular possa ser considerado verdadeiramente R'vsky.  Por exemplo, a maioria das funções básicas o usa especificamente (e todos acabam de se reunir com data.table e as.factor). <br><br>  Mas a separação é um dos estilos menos populares (e aqui Hadley vai contra a maioria).  Para muitos usuários de R, os sublinhados serão irritantes: na popular extensão Emacs Speaks Statistics, ela é substituída por padrão pelo operador de atribuição <code>&lt;-</code> .  E as configurações padrão, é claro, <s>quase</s> ninguém muda. <br><br>  No entanto, a influência do Emacs ESS ainda é uma explicação da categoria de "abanar a cauda do cachorro".  Há uma razão mais antiga: nas versões anteriores do R, o sublinhado era sinônimo da seta <code>&lt;-</code> .  Por exemplo, em 2000, você pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">encontrar o</a> seguinte: <br><br><pre> <code class="julia hljs"><span class="hljs-comment"><span class="hljs-comment">#      R c &lt;- c(1,2,3,4,5) mean(c) [1] 3 c_mean &lt;- mean(c) c [1] 3</span></span></code> </pre><br>  Aqui, em vez de criar a variável <code>c_mean</code> R atribuiu o valor 3 primeiro à média da variável e depois à variável c.  No R moderno, essas metamorfoses, é claro, não ocorrerão. <br><br>  Devido à impopularidade, _ funções desse estilo quase não são encontradas entre as básicas: <br><br><pre> <code class="julia hljs"><span class="hljs-comment"><span class="hljs-comment">#  3.5.1  25  grep("^[^\\.]*$", apropos("_"), value = T)</span></span></code> </pre><br>  Por fim, o estilo lowerCamel é pouco legível ao usar nomes longos: <br><br><pre> <code class="julia hljs"><span class="hljs-comment"><span class="hljs-comment"># ! GrossNationalIncomePerCapitaAtlasMethodCurrentUnitedStatesDollars</span></span></code> </pre><br>  Assim, em termos de nomes, as recomendações de guias não podem ser consideradas inequívocas;  Afinal, isso é uma questão de gosto (desde que haja consistência nisso). <br><br><h2>  4. Aparelhos encaracolados </h2><br>  De acordo com o guia, uma nova linha deve seguir a chave de abertura e a de fechamento deve estar em uma linha separada (a menos que outra coisa a siga).  I.e.  algo como isto: <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { log(x) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { message(<span class="hljs-string"><span class="hljs-string">"Not applicable!"</span></span>) }</code> </pre> <br>  Tudo aqui não é muito interessante: esse é o estilo padrão de recuo do K&amp;R, que remonta à linguagem C e ao famoso livro de Kernigan e Ritchie “The C Programming Language” (ou K&amp;R pelos nomes dos autores). <br><br>  As origens desse estilo também são bastante óbvias: permite salvar linhas, mantendo a legibilidade.  Para computadores antigos, o espaço vertical era um luxo demais.  Por exemplo, o C foi desenvolvido no PDP-11, no terminal onde havia apenas 24 linhas.  E, ao imprimir um livro de K&amp;R, esse estilo economiza papel! <br><br><h2>  5. sequência de 80 caracteres </h2><br>  O comprimento da linha recomendado de acordo com o guia é de 80 caracteres.  O número mágico 80 é encontrado não apenas em R, mas também em um grande número de outras linguagens (Java, Perl, PHP, etc., etc.).  E não apenas idiomas: até a linha de comando do Windows consiste em 80 caracteres. <br><br>  Pela primeira vez na programação, esse número apareceu em 1928, em vez de no cartão perfurado padrão da IBM, onde havia exatamente 80 colunas para dados.  Uma pergunta muito mais interessante é por que esse padrão foi escolhido?  Afinal, cartões perfurados de comprimento diferente (para 24 ou 45 colunas) foram usados ​​anteriormente. <br><br><img src="https://habrastorage.org/webt/6z/ny/ji/6znyjixcpaypxaaorp_y4_zdmc4.jpeg"><br><br>  A resposta mais popular relaciona o comprimento de um cartão perfurado ao comprimento da linha das máquinas de escrever.  As primeiras máquinas foram projetadas para o papel padrão americano 8½ x 11 polegadas e permitidas a impressão de 72 a 90 caracteres, dependendo do tamanho das margens.  Portanto, a versão de 80 caracteres por linha parece bastante plausível, embora não seja verdadeira no último recurso.  É possível que 80 caracteres sejam apenas o meio termo em termos de ergonomia. <br><br><h2>  6. Recuo da linha: espaços x tabulações </h2><br>  O estilo recomendado pelo guia é de dois espaços, não de uma guia.  A recusa de tabulação é bastante compreensível: o comprimento da TAB varia em diferentes editores de texto (pode ser de 2 a 8 espaços).  Recusando-os, obtemos duas vantagens ao mesmo tempo: primeiro, o código será exatamente o mesmo que o digitamos;  segundo, não haverá violação acidental do comprimento recomendado da string.  Nesse caso, é claro, aumentamos o tamanho do arquivo (quem deseja lidar com essas microoptimizações em 2k19?) <br><br>  Os espaços de disputa versus guias têm uma longa história e podem ser equiparados a religiosos (como Win vs Linux, Android vs iOS e similares).  No entanto, já sabemos quem ganhou: de acordo com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estudo</a> Stack Overflow, os desenvolvedores que usam espaços ganham mais do que aqueles que usam guias.  Um argumento mais poderoso do que as regras de um guia de estilo, certo? <br><br>  <b>Em vez de uma conclusão: as</b> regras dos guias de estilo podem parecer estranhas e ilógicas.  De fato, por que a seta <code>&lt;-</code> se existe um operador padrão <code>=</code> ?  Mas se você se aprofundar, por trás de cada regra há alguma lógica, muitas vezes já esquecida. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt454432/">https://habr.com/ru/post/pt454432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt454422/index.html">Sobre a interpretação pervertida da Primeira Lei de Newton na física moderna</a></li>
<li><a href="../pt454424/index.html">5 erros comuns ao usar componentes de arquitetura do Android</a></li>
<li><a href="../pt454426/index.html">ARTificial: no início da inteligência artificial</a></li>
<li><a href="../pt454428/index.html">O que a Apple introduziu na WWDC e o que os desenvolvedores de iOS pensam sobre isso</a></li>
<li><a href="../pt454430/index.html">Vida de partículas 3D</a></li>
<li><a href="../pt454434/index.html">PDA (Pocket Travel Computer): registrador GPS de circuitos</a></li>
<li><a href="../pt454436/index.html">Mesquinho alegria mesquinho # 1: loguru</a></li>
<li><a href="../pt454440/index.html">Petty Little Fun # 2: Estrelinha</a></li>
<li><a href="../pt454442/index.html">Como escolher uma rede proxy para o seu negócio: 3 dicas práticas</a></li>
<li><a href="../pt454444/index.html">Nós perfilamos o carregamento do Habr ou como 189 solicitações na página tornam a influência</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>