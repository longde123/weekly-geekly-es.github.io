<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌰 🧒 🤦🏿 Controlamos la iluminación del apartamento (NooLite, Raspberry Pi y WebIOPi) 🤾🏿 😮 👨🏽‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quiero compartir la experiencia de usar el sistema de hogar inteligente NooLite junto con el Raspberry Pi Modelo B (en adelante RPI ) en un apartament...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Controlamos la iluminación del apartamento (NooLite, Raspberry Pi y WebIOPi)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/382689/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quiero compartir la experiencia de usar el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sistema de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hogar inteligente </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NooLite</font></a><font style="vertical-align: inherit;"> junto con el Raspberry Pi Modelo B (en adelante </font></font><abbr title="Raspberry pi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPI</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) en un apartamento de dos habitaciones. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobre el sistema NooLite se escribieron repetidamente en un concentrador:</font></font><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NooLite: un sistema de iluminación controlado por radio o el primer paso para un hogar inteligente</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NooLite-2, o casa inteligente para tontos</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">busque en el Habr la etiqueta "noolita" o escriba en la barra de búsqueda google "sitio: habrahabr.ru noolita"</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este artículo te diré:</font></font><br>
<ul>
<li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WebIOPi</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Raspbian</a>    UART     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> MT1132 NooLite</a></li>
<li>    WebIOPi      HTTP REST  GPIO UART</li>
<li>      Android     REST </li>
</ul><br>
<a name="habracut"></a><br>
<h4></h4><br>
<ul>
<li><b></b> ( ): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RPI</a> + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WebIOPi</a> (UART+REST) + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NooLite </a></li>
<li><b> </b>:   NooLite   —   </li>
<li><b></b> ( , ):   Android, WEB-,  bash shell (python script)</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quizás alguien piense: "No me molestaría con RPI por el simple hecho de controlar la iluminación del apartamento desde un teléfono móvil, pero me daría cuenta de todo </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con un vaso de plástico, un guijarro y un hilo</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en un Arduino con un escudo de Wi-Fi o uno más simple". implementación concisa en el microcontrolador AVR ". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero, como ya estaba acumulando polvo en el estante RPI y fui superado por el deseo de hacer una iluminación "inteligente" utilizando la plataforma RPI, decidí tomarlo como base. </font><font style="vertical-align: inherit;">Además, la posibilidad de utilizar RPI proporciona un buen margen para ampliar la funcionalidad de la "casa inteligente".</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datos de entrada</font></font></h4><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apartamento de 2 habitaciones P44T sin reparación en un edificio nuevo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPI (fue adquirido hace dos años por interés)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deseo de realizar iluminación inteligente</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante un tiempo estuve mirando varias plataformas y tecnologías de la casa inteligente, como resultado, la elección recayó en el sistema NooLite, basado en lo siguiente:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">precio adecuado en comparación con sistemas similares (Z-Wave, EnOcean, ZigBee)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Confío en los productos fabricados en Bielorrusia.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">protocolo abierto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muchos ejemplos de uso en internet</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">433 MHz </font><font style="vertical-align: inherit;">extendido y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ratificado por SCRF</font></font></a><font style="vertical-align: inherit;"></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También llamé la atención </font><font style="vertical-align: inherit;">sobre la </font><font style="vertical-align: inherit;">plataforma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiren Board</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> basada en </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">ARM9</font></a><font style="vertical-align: inherit;"> para la automatización del hogar </font><font style="vertical-align: inherit;">con una rica funcionalidad para todas las necesidades imaginables e inimaginables. </font><font style="vertical-align: inherit;">Estuve especialmente satisfecho con la característica asesina: un módulo de radio de 433 MHz, que en mi caso es adecuado para controlar las unidades de potencia NooLite. </font><font style="vertical-align: inherit;">Pero como ya tengo un RPI, vamos a construir sobre esto. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para implementar la iluminación "inteligente" en el apartamento, necesitaba resolver las siguientes tareas:</font></font><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">determinar el escenario de iluminación óptimo en un apartamento de dos habitaciones</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">definir un método para integrarse con RPI y colocar baja corriente</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elige una envoltura para controlar</font></font></a><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dibujar una arquitectura de interacción común</font></font></a></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hacer una lista de compras </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coordinar lo anterior con su esposa</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comprar los componentes necesarios</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vincular controles remotos y depurar integración RPI&gt; NooLite</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encontrar y comprar interruptores adecuados para controles remotos</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">colocar bloques de energía e interruptores </font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desarrollar una aplicación móvil para Android</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los elementos 1 y 4-6 se pueden repetir en un ciclo. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precio de emisión:</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPI [1 pieza]</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Módulo NooLite MT1132 [1 140 ₽ X 1 pc] 1 140 ₽</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bloques de alimentación NL [1240 ₽ X 11 piezas] 13 640 ₽</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paneles de control estacionarios NL [1 340 ₽ X 7 piezas] 9 380 ₽</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Llavero de control remoto NL [1 550 ₽ X 1 pc] 1 550 ₽</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor de movimiento NL [1 550 ₽ X 1 pc] 1 550 ₽</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cajas de montaje, soportes, módulos de teclado / botón (interruptores), marcos (comprados individualmente)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amigos con una impresora 3D - gratis</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: ~ 27 000 ₽</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + controlador de 3 000 ₽.</font></font><br>
<a name="block1"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escenario de iluminación del apartamento</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación se muestra el diseño del chaleco de dos habitaciones P44T de esquina con un ventanal. </font></font><br>
<img src="https://habrastorage.org/files/f24/f3a/512/f24f3a512d94401ebf9d36ae27b645a2.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Está previsto controlar la iluminación con NooLite en todas las habitaciones, excepto la logia, el baño y el inodoro.</font></font><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El corredor</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 puntos de iluminación con modo relé (encendido / apagado). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sensor de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> movimiento </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">PM111</font></a><font style="vertical-align: inherit;"> debe controlar un punto de luz no tan brillante </font><font style="vertical-align: inherit;">. Esto permitirá en la oscuridad iluminar el camino del vagabundo nocturno en busca de las luces del hambre nocturna. </font></font><br>
<img src="https://habrastorage.org/files/82b/981/6b6/82b9816b645c43f09360010da4b2d6bd.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ambos puntos de iluminación deben ser controlados por un interruptor fijo ubicado al lado de la puerta principal. El interruptor debe incluir el escenario "apague las luces en todo el departamento". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sensor de movimiento térmico entra en modo de espera (comienza a responder al movimiento de los objetos térmicos) cuando configura el nivel requerido de iluminación de la habitación y la sensibilidad. Por lo general, durante el día no hay necesidad de parpadear la luz en el pasillo para pasar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De las instrucciones para el sensor:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si la iluminación cerca del sensor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM111 es</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> más alta que la establecida por el regulador de iluminancia, entonces el sensor está en modo de espera. </font><font style="vertical-align: inherit;">Al mismo tiempo, su consumo de corriente es mínimo (menos de 1 μA) y el sensor de movimiento térmico está desactivado. </font><font style="vertical-align: inherit;">Cuando la iluminación cae por debajo de un nivel predeterminado, el sensor entra en modo de espera.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las luces en el inodoro y el baño están controladas por un interruptor estacionario clásico. </font><font style="vertical-align: inherit;">La luz y el ventilador en el inodoro están conectados a través de un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">relé de tiempo F&amp;F PO-415</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (también bielorrusos) en un riel DIN.</font></font><br>
<img src="https://habrastorage.org/files/761/0dd/00a/7610dd00a0d14e85bfb6aad508fd7570.png"><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado del cierre del contacto de control 6, los contactos de relé 11, 12 están cerrados. </font><font style="vertical-align: inherit;">Abrir el contacto de control 6 provoca una cuenta regresiva del tiempo establecido, después de lo cual se detiene el funcionamiento del PO-415.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El interruptor de pasillo estacionario debe ser del tipo de un botón pulsador, ya que invocar un script implica presionar un botón (el script no tiene estados ON / OFF). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, el botón es necesario si necesitamos apagar la luz ya encendida por el sensor de movimiento, cuando el temporizador del sensor está configurado para no apagar la luz durante varios minutos después de activarse. </font><font style="vertical-align: inherit;">La clave no cabe en este caso. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total al final del pasillo:</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dos unidades de potencia de tipo relé 200 W ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SU111-200</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en modo relé)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un interruptor estacionario de 3 botones ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PK313</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remote </font><font style="vertical-align: inherit;">):</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Botón 1 - encendido / apagado del punto de luz de iluminación 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">botón 2 - encendido / apagado del punto de luz de iluminación 2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">botón 3 - apaga la luz en todo el departamento (guión)</font></font></li>
</ul><br>
 </li>
</ul><br>
<img src="https://habrastorage.org/files/d15/e11/fde/d15e11fde6b544e0b8b4a39329018f58.png"><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cocina</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tres puntos de iluminación:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lámpara sobre la mesa ( </font><font style="vertical-align: inherit;">modo de relé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SU111-200</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iluminación puntual en techo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tensado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><font style="vertical-align: inherit;">modo de relé </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">SU111-200</font></a><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tira de LED para iluminar la superficie de trabajo de la cocina ( </font><font style="vertical-align: inherit;">modo de relé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SU111-200</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los puntos de iluminación se controlan mediante un interruptor de 3 botones ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">control</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remoto </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">PK311</font></a><font style="vertical-align: inherit;"> ) ubicado en la entrada de la cocina.</font></font><br>
<img src="https://habrastorage.org/files/f5e/6db/293/f5e6db29310044d7a028093a8bf6dcfc.png"><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sala de estar y balcón</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dos puntos de iluminación en modo relé ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SU111-200</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iluminación principal en la sala de estar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">luz en el balcón</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada punto de iluminación está controlado por 2 interruptores:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interruptor estacionario de 2 botones en el balcón ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PK313</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remote </font><font style="vertical-align: inherit;">):</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Botón 1 - luz de encendido / apagado en el balcón</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">botón 2 - encender / apagar la luz en la sala de estar</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interruptor estacionario de 2 teclas en la sala de estar ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PK314</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remote </font><font style="vertical-align: inherit;">):</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tecla 1 - encender / apagar la luz en la sala de estar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tecla 2 - luz de encendido / apagado en el balcón</font></font></li>
</ul><br>
 </li>
</ul><br>
<img src="https://habrastorage.org/files/2cd/d9e/241/2cdd9e24183442d089566677dee0de8c.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quizás alguien pregunte "¿por qué no poner un interruptor de 2 teclas en el balcón como en la sala de estar?" </font><font style="vertical-align: inherit;">o "¿por qué no poner botones en todo el apartamento?". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sucedió que al principio se suponía que debía instalar un interruptor de 3 botones con un botón de escenario en el balcón, pero luego cambiaron de opinión al elegir el diseño de los interruptores. </font><font style="vertical-align: inherit;">También se supuso que habría botones en el pasillo y en la cocina, e interruptores de llave en la sala de estar, dormitorio y balcón para preservar el diseño. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Más tarde quise atenuar la luz con un interruptor junto a la cama, así que todo salió mal. </font><font style="vertical-align: inherit;">Para preservar el diseño de los interruptores automáticos, tuve que viajar por muchos mercados de construcción, visitar una docena de sitios de Internet, más sobre esto más adelante en la sección " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buscar y comprar interruptores automáticos adecuados para controles remotos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ".</font></font><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dormitorio</font></font></h5><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sección 1 (cama)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por lo general, los bloques de alimentación se encuentran en cada punto de iluminación. </font><font style="vertical-align: inherit;">Un punto de iluminación: una unidad de potencia. </font><font style="vertical-align: inherit;">En mi escenario de iluminación, hay una desviación de la lógica tradicional. </font><font style="vertical-align: inherit;">En la "sección 1" de la habitación, se supone que debe instalar una lámpara con dos unidades de potencia, una de las cuales estará atenuada. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sección 2 (ventana salediza)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Además de los interruptores fijos, todos los puntos de iluminación deben controlarse desde un control remoto de bolsillo como consola de respaldo y RPI. </font><font style="vertical-align: inherit;">Para llavero:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">botón A (encender / apagar la luz en el pasillo y en la cocina)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">botón B (enciende / apaga la luz en la sala de estar y en el balcón)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">botón C (encender / apagar la luz en el dormitorio)</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/a78/f82/e8d/a78f82e8da434711aa8a66d6c40d7050.png"><br>
<a name="block2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definición de colocación de baja corriente y método de integración de NooLite C para RPI</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diré de inmediato, la integración es simple. </font><font style="vertical-align: inherit;">NooLite tiene un módulo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT1132</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El módulo recibe un paquete de control a través de UART de algún controlador, en mi caso es un RPI, transmite un comando por aire a dispositivos ejecutivos (bloques de alimentación) y responde con la construcción OK / r \ n, todo se describe en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las instrucciones del módulo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensión de alimentación del módulo (VCC Upit)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.7-5.5 V</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rango de voltaje de entrada en Rx </font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 - Arriba</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL HIGH LVL (unidad lógica) en Upit = 5 V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 - Upit (5 V)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL LOW LVL (cero lógico) en Upit = 5 V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0-0.8 V</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL HIGH LVL (unidad lógica) en Upit = 3.3 V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2-3.3 V</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL LOW LVL (cero lógico) en Upit = 3.3 V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0-0.8 V</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Velocidad UART</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9600 baudios</font></font></td>
</tr>
</tbody></table><br>
<img src="https://habrastorage.org/files/ffe/4ee/a4d/ffe4eea4d7a14c25ae45f94c3bef4204.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que las líneas RPART UART funcionan con niveles TTL de 3.3 V, usaremos 3.3 V como la potencia U del módulo. </font></font><br>
<img src="https://habrastorage.org/files/d37/959/89e/d3795989ef37427ab127ad82d02e2ed0.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede usar tres líneas en el MT1132: VCC, GND y RX, para transmitir un paquete de control. </font><font style="vertical-align: inherit;">Hice esto al depurar: no leí la respuesta "OK \ r \ n" del MT1132, fue suficiente para mí observar el indicador de la unidad de alimentación conectada. </font><font style="vertical-align: inherit;">Tras la aceptación exitosa del comando "vinculante", se inicia un parpadeo frecuente del LED incorporado en la unidad de alimentación. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro punto, la potencia del transmisor de radio con potencia U de 3.3 V a 3.3 mW, con potencia U de 5 V a 5 mW. </font><font style="vertical-align: inherit;">La distancia máxima a la unidad de potencia es de 70 m.</font></font><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre el paquete de control</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El paquete de control consta de 12 bytes: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ST, B0, B1, B2, B3, B4, B5, B6, B7, B8, CS, SP </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ST</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - byte de inicio, siempre 85 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B0..B8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - carga útil (comandos de control) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - comprobar suma </font><font style="vertical-align: inherit;">El byte menos </font><font style="vertical-align: inherit;">significativo </font><font style="vertical-align: inherit;">de la suma de los primeros 10 bytes </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ST a B8) </font><b><font style="vertical-align: inherit;">SP</font></b><font style="vertical-align: inherit;"> - detener byte. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acuerdo con las instrucciones, escribí los bytes de control que necesito: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - comando de control con valores:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 - apaga la carga</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 - enciende la carga</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 - enciende o apaga la carga</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9 - desacoplamiento (iniciar el proceso de borrar la dirección de la memoria de la unidad de alimentación)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15 - encuadernación (registre la dirección del módulo en la unidad de alimentación)</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dirección del canal (de 0 a 31). </font><font style="vertical-align: inherit;">Solo 32 canales. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
otros bytes por defecto, excepto la suma de verificación. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : configuración del modo de transmisión del módulo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el </font><font style="vertical-align: inherit;">valor 80 (0x50) se pasa </font><font style="vertical-align: inherit;">a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B0,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entonces:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cantidad de repeticiones - 2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bitrate 2-1000 bps</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modo 0: envía un comando</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/034/067/d82/034067d8239e4139b06ce9408ce2d87f.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, compilé tal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tabla</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con los paquetes de control necesarios para mí.</font></font><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colocación en el cuadro eléctrico</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se decidió instalar una corriente débil en la centralita interna:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El RPI se monta en un riel DIN uniendo amigos impresos en una impresora 3D</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Módulo MT1132 para controlar unidades de potencia por aire</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dos ~ 220 enchufes en DIN para la conexión de unidades de alimentación de un enrutador y RPI</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/9ab/684/784/9ab6847847b94274ab95a4cdac7379b3.jpg"><br>
<a name="block3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depuración de integración y selección de envoltorios para gestión</font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prerrequisitos:</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPI</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Módulo MT1132</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cables de madre a madre para conectar los pines MT1132 y RPI GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarjeta SD con cualquier imagen RPI preinstalada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acceso a la consola RPI SHELL (bash, csh, korn, etc.) (teclado directo o remoto a través de SSH)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paquetes de control preparados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca para trabajar con UART a través del encabezado GPIO en RPI</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras preparaba la imagen, detecté un error genial en el Macbook Air mientras grababa la imagen Raspbian-wheezy debajo de la raíz (aunque para mí esta es una característica: protección adicional contra escritura, solo piense nuevamente antes de sobrescribir los datos):</font></font><br>
<pre><code class="bash hljs">dd bs=1m <span class="hljs-keyword">if</span>=2015-02-16-raspbian-wheezy.img of=/dev/disk2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La consola devolvió:</font></font><br>
<pre><code class="bash hljs">dd: /dev/disk2: Permission denied </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con el bloqueo eliminado en la tarjeta SD, debajo de la raíz y las modificaciones correctas en / dev / disk2 ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego encontré un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intercambio sobre este tema</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alguien ayudó a volar en la ranura SD en la amapola, alguien consiguió una máquina tragamonedas. Vencer a un macbook es un desperdicio hoy, y como resultado, una pequeña brecha me ayudó: si la tarjeta SD no está completamente insertada, todo funcionará. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante la depuración, tuve que cultivar colectivamente, porque no había conectores adecuados de madre a madre. </font></font><br>
<img src="https://habrastorage.org/files/ebf/f89/c4f/ebff89c4f54a444da08cee2965451eda.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teniendo en cuenta que necesitaba un contenedor para controlar las unidades de potencia a través de WEB, la capacidad de realizar solicitudes REST en el futuro y una biblioteca UART desde una caja, la elección recayó en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebIOPi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img src="https://habrastorage.org/files/3da/fa4/85e/3dafa485e4fe44f8b9f0c0b7bfffc282.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque quería construir OpenHAB debido a la arquitectura genial. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La plataforma de automatización se describió en Habré</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Definitivamente usaré esta plataforma en el futuro, pero por ahora, para mi "Lista de deseos", la plataforma elegida es suficiente.</font></font><br>
<a name="arch"></a><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitectura general de interacción</font></font></h5><br>
<img src="https://habrastorage.org/files/ebb/55d/b61/ebb55db6163f476fb505ca4e498f2d7f.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración de WebIOPi mínimo</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Usando las instrucciones proporcionadas en el sitio web del proyecto:</font></font><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instale el marco de WebIOPi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> siguiendo estos pasos</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalación</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejecutando WebIOPi (Daemon)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicio automático en el arranque</font></font></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configure UART</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cambiando 3 archivos: / etc / inittab, /boot/cmdline.txt, / etc / webiopi / config. </font><font style="vertical-align: inherit;">Pasos:</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uart a bordo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración de WebIOPi</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reproducimos las acciones descritas en la sección</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Truco de Loopback en serie (envíenos la "cadena" a través de UART y léala a través de la interfaz WEBIOPi en la sección Monitor en serie)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el video en la sección Serial Monitor muestra el proceso</font></font></li>
</ul><br>
 </li>
</ol><br>
<img src="https://habrastorage.org/files/39b/9d6/224/39b9d6224a214d16bb931577c750497c.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale un puente para probar el bucle UART. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando la tabla compilada previamente con los paquetes de control, escribiremos un script simple de Python para administrar el módulo desde RPI SHELL.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script de Shell RPI para el módulo MT1132</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/python</span>
<span class="hljs-keyword">import</span> sys, getopt
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">argv</span>):</span>
   ch = <span class="hljs-string">''</span>
   cmd = <span class="hljs-string">''</span>
   <span class="hljs-keyword">try</span>:<font></font>
      opts, args = getopt.getopt(argv,<span class="hljs-string">"h:"</span>,[<span class="hljs-string">"ch="</span>,<span class="hljs-string">"cmd="</span>])
   <span class="hljs-keyword">except</span> getopt.GetoptError:
      <span class="hljs-keyword">print</span> <span class="hljs-string">'mt1132.py --ch &lt;channel_number&gt; --cmd &lt;ON/OFF/BIND/UNBIND&gt;'</span>
      sys.exit(<span class="hljs-number">2</span>)
   <span class="hljs-keyword">for</span> opt, arg <span class="hljs-keyword">in</span> opts:
      <span class="hljs-keyword">if</span> opt == <span class="hljs-string">'-h'</span>:
         <span class="hljs-keyword">print</span> <span class="hljs-string">'mt1132.py --ch &lt;channel_number&gt; --cmd &lt;ON/OFF/BIND/UNBIND&gt;'</span><font></font>
         sys.exit()<font></font>
      <span class="hljs-keyword">elif</span> opt <span class="hljs-keyword">in</span> (<span class="hljs-string">"--ch"</span>):<font></font>
         ch = arg<font></font>
      <span class="hljs-keyword">elif</span> opt <span class="hljs-keyword">in</span> (<span class="hljs-string">"--cmd"</span>):<font></font>
         cmd = arg<font></font>
   <span class="hljs-keyword">print</span> <span class="hljs-string">'Channel: '</span>, ch
   <span class="hljs-keyword">print</span> <span class="hljs-string">'Command: '</span>, cmd
   <span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'ON'</span> <span class="hljs-keyword">and</span> ch!=<span class="hljs-string">''</span>:
        <span class="hljs-keyword">if</span> ch==<span class="hljs-string">'0'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 0'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a7</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'1'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 1'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a8</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'2'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 2'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a9</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'3'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 3'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00aa</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'4'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 4'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ab</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'5'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 5'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ac</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'6'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 6'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ad</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'7'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 7'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'8'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 8'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00af</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'9'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 9'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b0</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'10'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 10'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0a</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b1</span>, <span class="hljs-number">0x00aa</span>])
   <span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'OFF'</span> <span class="hljs-keyword">and</span> ch!=<span class="hljs-string">''</span>:
        <span class="hljs-keyword">if</span> ch==<span class="hljs-string">'0'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 0'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a5</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'1'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 1'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a6</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'2'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 2'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a7</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'3'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 3'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a8</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'4'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 4'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a9</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'5'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 5'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00aa</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'6'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 6'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ab</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'7'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 7'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ac</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'8'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 8'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ad</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'9'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 9'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'10'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 10'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0a</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])
   <span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'BIND'</span> <span class="hljs-keyword">and</span> ch!=<span class="hljs-string">''</span>:
        <span class="hljs-keyword">if</span> ch==<span class="hljs-string">'0'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 0'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b4</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'1'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 1'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b5</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'2'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 2'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b6</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'3'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 3'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b7</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'4'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 4'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b8</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'5'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 5'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b9</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'6'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 6'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ba</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'7'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 7'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00bb</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'8'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 8'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00bc</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'9'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 9'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00bd</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'10'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 10'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0a</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00be</span>, <span class="hljs-number">0x00aa</span>])
   <span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'UNBIND'</span> <span class="hljs-keyword">and</span> ch!=<span class="hljs-string">''</span>:
        <span class="hljs-keyword">if</span> ch==<span class="hljs-string">'0'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 0'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'1'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 1'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00af</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'2'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 2'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b0</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'3'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 3'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b1</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'4'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 4'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b2</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'5'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 5'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b3</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'6'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 6'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b4</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'7'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 7'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b5</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'8'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 8'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b6</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'9'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 9'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b7</span>, <span class="hljs-number">0x00aa</span>])
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'10'</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 10'</span>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0a</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b8</span>, <span class="hljs-number">0x00aa</span>])
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<font></font>
   main(sys.argv[<span class="hljs-number">1</span>:])
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para controlar MT1132 desde la consola de shell, ejecute los siguientes comandos </font></font><br>
<pre><code class="bash hljs"><font></font>
mt1132.py --ch &lt;channel_number&gt; --cmd &lt;ON/OFF/BIND/UNBIND&gt;<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajustamos la </font><b><font style="vertical-align: inherit;">API REST</font></b><font style="vertical-align: inherit;"> El marco WebIOPi proporciona </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">control a través de solicitudes HTTP en el estilo REST</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lo que facilita la fijación de clientes móviles y simplifica la interacción cliente-servidor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copie y pegue el marco API REST usando el enlace de arriba:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtener la función GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Establecer la función GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtenga valor GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Establecer valor GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salida de un solo pulso</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secuencia de bits de salida</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salida PWM con una relación de ciclo de trabajo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salida PWM con un ángulo para servos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Llamar a una macro en el servidor</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtenga el estado / configuración completo de GPIO</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestro caso es "Llamar a una macro en el servidor". </font><font style="vertical-align: inherit;">La descripción no es grasa, pero es suficiente para el experimento: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTP POST / macros / (macro) / (args)</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Devuelve el valor devuelto por la macro.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como (macro) aún no se ha preparado, revisaremos el REST "Obtener el estado / configuración GPIO completo", y para esto necesitamos hacer una solicitud HTTP GET / *. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abrimos cualquier cliente API REST, utilicé el cliente DHC para el navegador Chrome. Estamos intentando realizar una solicitud REST para obtener la hora actual. </font></font><br>
<img src="https://habrastorage.org/files/b21/fc2/c33/b21fc2c3392b49c6b4f3f36220f97268.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración de WebIOPi (/ etc / webiopi / config) </font></font></b><br>
<img src="https://habrastorage.org/files/9c0/861/2fa/9c08612fa2024ef892a0e31b641c90e7.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la sección [DISPOSITIVOS]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregue un dispositivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serie</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (UART GPIO): este es nuestro módulo MT1132, donde </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ttyAMA0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es el dispositivo (puerto) que ve el núcleo de Raspbian, </font><font style="vertical-align: inherit;">la velocidad en </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baudios</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es la velocidad en Intercambio de información en baudios a través de esta interfaz UART. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
9600 baudios / (8 + 1 bit de inicio + 1 bit de parada) = 960 bytes / s. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la sección [SCRIPTS]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (scripts personalizados):</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregue la cadena </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myscrypt = /home/pi/smarthome/python/mt1132.py</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para conectar nuestro script al marco. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la sección [REST]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (configuración de control GPIO a través de la API REST. Opcional): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gpio-post-value = false - prohíbe cambiar los niveles lógicos BAJO / ALTO en los pines GPIO a través de solicitudes REST; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gpio-post-function = false: prohíbe cambiar la configuración IN / OUT en los pines GPIO a través de solicitudes REST. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los ajustes restantes no se modifican. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[COAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no toqué, desconectar. Si bien no tengo idea de con qué se come y dónde se usa. Grabé solo esta línea en mi cabeza: oAP - es un protocolo de transferencia web especializado para usar con nodos restringidos y redes restringidas en el</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet of Things</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , diseñado para aplicaciones de máquina a máquina (M2M) como la energía inteligente y la automatización de edificios ". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quizás en Habr alguien abre casos útiles de uso.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregue macros para solicitudes REST a un script previamente preparado.</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Channel 0	</span>
<span class="hljs-meta">@webiopi.macro	</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ch0</span>(<span class="hljs-params">cmd</span>):</span>
	<span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'on'</span>:<font></font>
		serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a7</span>, <span class="hljs-number">0x00aa</span>])<font></font>
		webiopi.sleep(<span class="hljs-number">1</span>)<font></font>
		resp = <span class="hljs-string">'Channel: 0, Cmd: '</span> + cmd + <span class="hljs-string">', Status: '</span> + serial.readString()
	<span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'off'</span>:<font></font>
		serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a5</span>, <span class="hljs-number">0x00aa</span>])<font></font>
		webiopi.sleep(<span class="hljs-number">1</span>)<font></font>
		resp = <span class="hljs-string">'Channel: 0, Cmd: '</span> + cmd + <span class="hljs-string">', Status: '</span> + serial.readString()
	<span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'unbind'</span>:<font></font>
		serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])<font></font>
		webiopi.sleep(<span class="hljs-number">1</span>)<font></font>
		resp = <span class="hljs-string">'Channel: 0, Cmd: '</span> + cmd + <span class="hljs-string">', Status: '</span> + serial.readString()
	<span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'bind'</span>:<font></font>
		serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b4</span>, <span class="hljs-number">0x00aa</span>])<font></font>
		webiopi.sleep(<span class="hljs-number">1</span>)<font></font>
		resp = <span class="hljs-string">'Channel: 0, Cmd: '</span> + cmd + <span class="hljs-string">', Status: '</span> + serial.readString()
	<span class="hljs-keyword">return</span> resp 
</code></pre><br>
</div></div><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prueba de solicitudes REST con macros</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enviamos una solicitud REST para "vincular la dirección del tercer canal NooLite MT1132 al bloque de alimentación en el que se inicia la vinculación" a través de DHC. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el paquete de control se envía con éxito, el módulo MT1132 responderá a través de UART TX al GPIO UART RX "OK". </font><font style="vertical-align: inherit;">Si tiene éxito, la unidad de alimentación recordará la dirección del canal y parpadeará intensamente con el LED verde incorporado.</font></font><br>
<img src="https://habrastorage.org/files/ea3/e94/eb7/ea3e94eb7784412f8e909c7fb5af18a6.png"><br>
<a name="block5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cliente simple para Android</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, no planeaba escribir una aplicación para Android, debido a que no tenía idea, tenía la intención de restringirme a un navegador. </font><font style="vertical-align: inherit;">Luego, accidentalmente, entró en el canal de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inicio de Android</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El autor, Dmitry, cuenta en detalle con Andryukha cómo comenzar rápidamente su primer proyecto bajo la plataforma Androyd. </font><font style="vertical-align: inherit;">¡Muchas gracias al autor por el proyecto y el arduo trabajo! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de ver y completar no más de veinte lecciones, comencé a crear mi sencilla aplicación de control de iluminación. </font><font style="vertical-align: inherit;">Para el desarrollo utilicé IDE Android Studio, como indica Google, basado en IntelliJ IDEA. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interfaz El</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
resultado fue una interfaz muy ascética:</font></font><br>
<img src="https://habrastorage.org/files/771/334/b07/771334b07db9439381afe676f597f189.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main.xml TAL CUAL</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl7"</span>
    <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"2dp"</span>
    <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"false"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!-- --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"50dp"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1c1"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"18sp"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl4"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/white"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/white"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"18sp"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1c2"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">" "</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl4"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/white"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"18sp"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1c3"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl4"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!--  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room1txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room1"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center|top"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place1txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1switch1"</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place5txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1switch2"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place2txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1switch3"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b1on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b1off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b2on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b2off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b3on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b3off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!--  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"40dp"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room2txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room2"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place1txt"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r2switch1"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center|left"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r2b1on"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r2b1off"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!--  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"40dp"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room3txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room3"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place1txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r3switch1"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center|left"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r3b1on"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r3b1off"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!--    --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room4txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room4"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place6txt"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4switch1"</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place8txt"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4switch3"</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place7txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4switch2"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b1on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b1off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b3on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b3off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b2on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b2off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
<font></font>
    <span class="hljs-comment">&lt;!--  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room5txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room5"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place3txt"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5switch1"</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place4txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5switch2"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5b1on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5b1off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5b2on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5b2off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los métodos de OnClick están vinculados a botones.</font></font><br>
<pre><code class="java hljs"><span class="hljs-meta">@Override</span><font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
        <span class="hljs-comment">// define the button switch that invoked the listener by id</span><font></font>
        <span class="hljs-keyword">switch</span> (v.getId()) {<font></font>
            <span class="hljs-comment">// Buttons room1 </span><font></font>
            <span class="hljs-keyword">case</span> R.id.r1b1on: <span class="hljs-comment">// </span><font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch4url) + <span class="hljs-string">"on"</span>;<font></font>
                <span class="hljs-keyword">new</span> ParseTask().execute();<font></font>
                <span class="hljs-keyword">break</span>;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Switch define la vista de ID del elemento del botón, muestra un mensaje TOAST en la pantalla y realiza una solicitud HTTP al RPI a través de HttpURLConnection dentro de AsyncTask (llame a ParseTask (). Execute ();). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interacción con el backend</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
HttpURLConnection: una clase para la interacción a través del protocolo HTTP. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Método de clase AsyncTask doInBackground: realiza tareas pesadas en una secuencia de fondo separada y devuelve el resultado a la secuencia de la interfaz de usuario. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HttpURLConnection se ejecuta en el método doInBackground. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta técnica a menudo se encuentra en Internet para implementar el intercambio de datos a través del protocolo HTTP.</font></font><br>
<pre><code class="java hljs">webiopiurl = getString(R.string.ch4url) + <span class="hljs-string">"on"</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sustituye una constante del archivo strings.xml en los recursos del proyecto</font></font><br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ch4url"</span>&gt;</span>http://192.168.1.154:8000/macros/ch4/<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, la URL completa para habilitar el canal 4 se ve así</font></font><br>
<pre><code class="html hljs xml">http://192.168.1.154:8000/macros/ch4/on
</code></pre><br>
<pre><code class="java hljs"><span class="hljs-comment">// HTTP Query to backend in REST style</span><font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParseTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AsyncTask</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">String</span>&gt; </span>{<font></font>
        HttpURLConnection urlConnection = <span class="hljs-keyword">null</span>;<font></font>
        BufferedReader reader = <span class="hljs-keyword">null</span>;<font></font>
        String result = <span class="hljs-string">""</span>;<font></font>
        String BASIC_AUTH = <span class="hljs-string">"Basic "</span><font></font>
                + Base64.encodeToString((getString(R.string.login) + <span class="hljs-string">":"</span> + getString(R.string.pwd)).getBytes(), Base64.NO_WRAP);<font></font>
<font></font>
        <span class="hljs-meta">@Override</span><font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">doInBackground</span><span class="hljs-params">(Void... params)</span> </span>{<font></font>
            <span class="hljs-comment">//    REST </span><font></font>
            <span class="hljs-keyword">try</span> {<font></font>
                URL url = <span class="hljs-keyword">new</span> URL(webiopiurl);<font></font>
                urlConnection = (HttpURLConnection) url.openConnection();<font></font>
                urlConnection.setRequestMethod(<span class="hljs-string">"POST"</span>);<font></font>
                urlConnection.setRequestProperty(<span class="hljs-string">"Authorization"</span>, BASIC_AUTH);<font></font>
                urlConnection.connect();<font></font>
                <span class="hljs-comment">//    backend webiopi</span><font></font>
                InputStream inputStream = urlConnection.getInputStream();<font></font>
                StringBuffer buffer = <span class="hljs-keyword">new</span> StringBuffer();<font></font>
                reader = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(inputStream));<font></font>
                String line;<font></font>
                <span class="hljs-keyword">while</span> ((line = reader.readLine()) != <span class="hljs-keyword">null</span>) {<font></font>
                    buffer.append(line);<font></font>
                }<font></font>
                result = buffer.toString();<font></font>
            } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
                e.printStackTrace();<font></font>
            }<font></font>
            <span class="hljs-keyword">return</span> result;<font></font>
        }<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">código MainActivity.java TAL CUAL</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">package</span> ru.bbq.smarthome_App;<font></font>
<font></font>
<span class="hljs-keyword">import</span> android.os.AsyncTask;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.support.v7.app.ActionBarActivity;
<span class="hljs-keyword">import</span> android.util.Base64;
<span class="hljs-keyword">import</span> android.util.Log;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.widget.Button;
<span class="hljs-keyword">import</span> android.widget.TextView;
<span class="hljs-keyword">import</span> android.widget.Toast;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.io.BufferedReader;
<span class="hljs-keyword">import</span> java.io.InputStream;
<span class="hljs-keyword">import</span> java.io.InputStreamReader;
<span class="hljs-keyword">import</span> java.net.HttpURLConnection;
<span class="hljs-keyword">import</span> java.net.URL;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ActionBarActivity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">View</span>.<span class="hljs-title">OnClickListener</span> </span>{
    <span class="hljs-comment">// Add logger</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String LOG_TAG = <span class="hljs-string">"my_log"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String webiopiurl = <span class="hljs-string">""</span>;
    <span class="hljs-comment">// switch buttons</span><font></font>
    TextView r1sw1;<font></font>
    TextView r1sw2;<font></font>
    TextView r1sw3;<font></font>
    TextView r2sw1;<font></font>
    TextView r3sw1;<font></font>
    TextView r4sw1;<font></font>
    TextView r4sw2;<font></font>
    TextView r4sw3;<font></font>
    TextView r5sw1;<font></font>
    TextView r5sw2;<font></font>
    <span class="hljs-comment">// ON OFF buttons</span><font></font>
    Button r1b1on;<font></font>
    Button r1b1off;<font></font>
    Button r1b2on;<font></font>
    Button r1b2off;<font></font>
    Button r1b3on;<font></font>
    Button r1b3off;<font></font>
    Button r2b1on;<font></font>
    Button r2b1off;<font></font>
    Button r3b1on;<font></font>
    Button r3b1off;<font></font>
    Button r4b1on;<font></font>
    Button r4b1off;<font></font>
    Button r4b2on;<font></font>
    Button r4b2off;<font></font>
    Button r4b3on;<font></font>
    Button r4b3off;<font></font>
    Button r5b1on;<font></font>
    Button r5b1off;<font></font>
    Button r5b2on;<font></font>
    Button r5b2off;<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);<font></font>
        setContentView(R.layout.main);<font></font>
        <span class="hljs-comment">// find View-elements and buttons</span>
        r1sw1 = (TextView) findViewById(R.id.r1switch1); <span class="hljs-comment">// room1switch1</span>
        r1sw2 = (TextView) findViewById(R.id.r1switch2); <span class="hljs-comment">// room1switch2</span>
        r1sw3 = (TextView) findViewById(R.id.r1switch3); <span class="hljs-comment">// room1switch3</span>
        r2sw1 = (TextView) findViewById(R.id.r2switch1); <span class="hljs-comment">// room2switch1</span>
        r3sw1 = (TextView) findViewById(R.id.r3switch1); <span class="hljs-comment">// room3switch1</span>
        r4sw1 = (TextView) findViewById(R.id.r4switch1); <span class="hljs-comment">// room4switch1</span>
        r4sw2 = (TextView) findViewById(R.id.r4switch2); <span class="hljs-comment">// room4switch2</span>
        r4sw3 = (TextView) findViewById(R.id.r4switch3); <span class="hljs-comment">// room4switch3</span>
        r5sw1 = (TextView) findViewById(R.id.r5switch1); <span class="hljs-comment">// room5switch1</span>
        r5sw2 = (TextView) findViewById(R.id.r5switch2); <span class="hljs-comment">// room5switch2</span>
        r1b1on = (Button) findViewById(R.id.r1b1on);    <span class="hljs-comment">// room1 button1 ON</span>
        r1b1off = (Button) findViewById(R.id.r1b1off);  <span class="hljs-comment">// room1 button1 OFF</span>
        r1b2on = (Button) findViewById(R.id.r1b2on);    <span class="hljs-comment">// room1 button2 ON</span>
        r1b2off = (Button) findViewById(R.id.r1b2off);  <span class="hljs-comment">// room1 button2 OFF</span>
        r1b3on = (Button) findViewById(R.id.r1b3on);    <span class="hljs-comment">// room1 button3 ON</span>
        r1b3off = (Button) findViewById(R.id.r1b3off);  <span class="hljs-comment">// room1 button3 OFF</span>
        r2b1on = (Button) findViewById(R.id.r2b1on);    <span class="hljs-comment">// room2 button1 ON</span>
        r2b1off = (Button) findViewById(R.id.r2b1off);  <span class="hljs-comment">// room2 button1 OFF</span>
        r3b1on = (Button) findViewById(R.id.r3b1on);    <span class="hljs-comment">// room3 button1 ON</span>
        r3b1off = (Button) findViewById(R.id.r3b1off);  <span class="hljs-comment">// room3 button1 OFF</span>
        r4b1on = (Button) findViewById(R.id.r4b1on);    <span class="hljs-comment">// room4 button1 ON</span>
        r4b1off = (Button) findViewById(R.id.r4b1off);  <span class="hljs-comment">// room4 button1 OFF</span>
        r4b2on = (Button) findViewById(R.id.r4b2on);    <span class="hljs-comment">// room4 button2 ON</span>
        r4b2off = (Button) findViewById(R.id.r4b2off);  <span class="hljs-comment">// room4 button2 OFF</span>
        r4b3on = (Button) findViewById(R.id.r4b3on);    <span class="hljs-comment">// room4 button3 ON</span>
        r4b3off = (Button) findViewById(R.id.r4b3off);  <span class="hljs-comment">// room4 button3 OFF</span>
        r5b1on = (Button) findViewById(R.id.r5b1on);    <span class="hljs-comment">// room5 button1 ON</span>
        r5b1off = (Button) findViewById(R.id.r5b1off);  <span class="hljs-comment">// room5 button1 OFF</span>
        r5b2on = (Button) findViewById(R.id.r5b2on);    <span class="hljs-comment">// room5 button2 ON</span>
        r5b2off = (Button) findViewById(R.id.r5b2off);  <span class="hljs-comment">// room5 button2 OFF</span><font></font>
<font></font>
        <span class="hljs-comment">//assign listeners to buttons</span>
        r1b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b2on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b2off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b3on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b3off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r2b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r2b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r3b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r3b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b2on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b2off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b3on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b3off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r5b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r5b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r5b2on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r5b2off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// Define On ClickView method</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{
        <span class="hljs-comment">// define the button switch that invoked the listener by id</span>
        <span class="hljs-keyword">switch</span> (v.getId()) {
            <span class="hljs-comment">// Buttons room1 </span>
            <span class="hljs-keyword">case</span> R.id.r1b1on: <span class="hljs-comment">// </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch4url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b1off: <span class="hljs-comment">// </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch4url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b2on: <span class="hljs-comment">//  </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch3url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b2off: <span class="hljs-comment">//  </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch3url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b3on: <span class="hljs-comment">// LED </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw3.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch2url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b3off: <span class="hljs-comment">// LED </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw3.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch2url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// Buttons room2 </span>
            <span class="hljs-keyword">case</span> R.id.r2b1on:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room2txt)+<span class="hljs-string">" &gt; "</span>+r2sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch6url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r2b1off:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room2txt)+<span class="hljs-string">" &gt; "</span>+r2sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch6url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// Buttons room3 </span>
            <span class="hljs-keyword">case</span> R.id.r3b1on:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room3txt)+<span class="hljs-string">" &gt; "</span>+r3sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch5url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r3b1off:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room3txt)+<span class="hljs-string">" &gt; "</span>+r3sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch5url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// Buttons room4 bedroom</span>
            <span class="hljs-keyword">case</span> R.id.r4b1on: <span class="hljs-comment">//    </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch8url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b1off: <span class="hljs-comment">//    </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch8url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b2on: <span class="hljs-comment">//    </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch7url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b2off: <span class="hljs-comment">//    </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch7url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b3on: <span class="hljs-comment">//   dimmer</span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw3.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch9url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b3off: <span class="hljs-comment">//   dimmer</span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw3.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch9url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// Buttons room5 corridor</span>
            <span class="hljs-keyword">case</span> R.id.r5b1on:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room5txt)+<span class="hljs-string">" &gt; "</span>+r5sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch1url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r5b1off:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room5txt)+<span class="hljs-string">" &gt; "</span>+r5sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch1url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r5b2on:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room5txt)+<span class="hljs-string">" &gt; "</span>+r5sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch0url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r5b2off:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room5txt)+<span class="hljs-string">" &gt; "</span>+r5sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch0url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// HTTP Query to backend in REST style</span>
    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParseTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AsyncTask</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">String</span>&gt; </span>{<font></font>
        HttpURLConnection urlConnection = <span class="hljs-keyword">null</span>;<font></font>
        BufferedReader reader = <span class="hljs-keyword">null</span>;<font></font>
        String result = <span class="hljs-string">""</span>;<font></font>
        String BASIC_AUTH = <span class="hljs-string">"Basic "</span>
                + Base64.encodeToString((getString(R.string.login) + <span class="hljs-string">":"</span> + getString(R.string.pwd)).getBytes(), Base64.NO_WRAP);
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">doInBackground</span><span class="hljs-params">(Void... params)</span> </span>{
            <span class="hljs-comment">//    REST </span>
            <span class="hljs-keyword">try</span> {<font></font>
                URL url = <span class="hljs-keyword">new</span> URL(webiopiurl);<font></font>
                urlConnection = (HttpURLConnection) url.openConnection();<font></font>
                urlConnection.setRequestMethod(<span class="hljs-string">"POST"</span>);<font></font>
                urlConnection.setRequestProperty(<span class="hljs-string">"Authorization"</span>, BASIC_AUTH);<font></font>
                urlConnection.connect();<font></font>
                <span class="hljs-comment">//    backend webiopi</span><font></font>
                InputStream inputStream = urlConnection.getInputStream();<font></font>
                StringBuffer buffer = <span class="hljs-keyword">new</span> StringBuffer();<font></font>
                reader = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(inputStream));<font></font>
                String line;<font></font>
                <span class="hljs-keyword">while</span> ((line = reader.readLine()) != <span class="hljs-keyword">null</span>) {<font></font>
                    buffer.append(line);<font></font>
                }<font></font>
                result = buffer.toString();<font></font>
            } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
                e.printStackTrace();<font></font>
            }<font></font>
            <span class="hljs-keyword">return</span> result;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPostExecute</span><span class="hljs-params">(String str)</span> </span>{
            <span class="hljs-keyword">super</span>.onPostExecute(str);
            <span class="hljs-comment">//  ,    plain text ( JSON)</span>
            <span class="hljs-comment">//    log</span><font></font>
            Log.d(LOG_TAG, str);<font></font>
            <span class="hljs-comment">//  TOAST -   webiopi     MT1132</span><font></font>
            Toast.makeText(getApplicationContext(), str, Toast.LENGTH_SHORT).show();<font></font>
        }<font></font>
    }<font></font>
<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<a name="block4"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encuentre y compre interruptores adecuados para controles remotos</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basado en el escenario de iluminación, este proyecto utiliza teclados y botones / interruptores NooLite incorporados fijos, es necesario proporcionar la capacidad de instalar interruptores con tres módulos (botones / teclas), preservando el diseño de los interruptores (todos los interruptores deben tener el mismo aspecto). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al elegir interruptores, considere la posibilidad de:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalación de dos o tres módulos en el soporte de interruptores</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalación de botones y módulos de teclado</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los interruptores de luz de vida bticino son adecuados para estas condiciones. </font><font style="vertical-align: inherit;">En la foto de abajo, los módulos ensamblados con el control remoto NooLite. </font></font><br>
<img src="https://habrastorage.org/files/f6e/6b0/d1a/f6e6b0d1a7b9428cbba0d6e6670c1cb9.jpg"><br>
<img src="https://habrastorage.org/files/57d/47e/4f9/57d47e4f9b90491980fa5cff309ec226.jpg"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unidad de alimentación en el techo durante la depuración. Depuración </font></font></b> <br>
<img src="https://habrastorage.org/files/d08/495/843/d08495843ec84300bc851d70e0b011ab.jpg"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el sitio </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">. </font></b></font><br>
<img src="https://habrastorage.org/files/ceb/2c6/51a/ceb2c651a47145a2b51daab51abb32d6.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panel eléctrico con corriente débil ubicada en el interior.</font></font></b><br>
<img src="https://habrastorage.org/files/128/1f8/00a/1281f800ac6e40dd829cdde1e7b7f3cf.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Gracias por su atención. </font><font style="vertical-align: inherit;">¡Que tengas un buen día!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es382689/">https://habr.com/ru/post/es382689/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es382677/index.html">My Internet of Things: Guest Castle (Parte 2)</a></li>
<li><a href="../es382679/index.html">Los astrónomos pudieron obtener imágenes del lago de lava en la superficie de Io, el satélite de Júpiter</a></li>
<li><a href="../es382681/index.html">5 horas de acercamiento de Soyuz a la EEI - en un video de medio minuto en YouTube</a></li>
<li><a href="../es382685/index.html">Mira mas alla del horizonte</a></li>
<li><a href="../es382687/index.html">Los científicos del CERN están preparando un "campo de fuerza" para proteger a los astronautas de la radiación</a></li>
<li><a href="../es382693/index.html">На спутнике Роскосмоса METEOR-M2 произошел сбой [аппарат восстановили]</a></li>
<li><a href="../es382695/index.html">Fusión general</a></li>
<li><a href="../es382697/index.html">Realidad virtual y mercado de consumo</a></li>
<li><a href="../es382699/index.html">La Biblioteca Británica pide ayuda para descifrar el grabado en una espada del siglo XIII.</a></li>
<li><a href="../es382701/index.html">По фильму «Джон Уик» сделают шутер от первого лица для VR-очков</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>