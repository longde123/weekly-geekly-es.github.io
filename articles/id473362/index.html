<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ¼ ğŸ™ğŸ¿ ğŸ‘©ğŸ¼â€âš–ï¸ Pengalaman GSoC: Bagaimana Dua (Tiga) Siswa Benar-Benar Meningkatkan Kode CRIU ğŸ¦ ğŸŒ ğŸ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setiap tahun, Google menyelenggarakan acara Google Summer of Code, di mana proyek OpenSource terkemuka menemukan pengembang baru yang berbakat di kala...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengalaman GSoC: Bagaimana Dua (Tiga) Siswa Benar-Benar Meningkatkan Kode CRIU</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/virtuozzo/blog/473362/">  Setiap tahun, Google menyelenggarakan acara Google Summer of Code, di mana proyek OpenSource terkemuka menemukan pengembang baru yang berbakat di kalangan siswa.  Pada tahun 2019, proyek CRIU kami tidak hanya berhasil melewati babak kualifikasi, tetapi juga untuk menarik beberapa pengembang muda sekaligus.  Tentang mengapa semua ini, dan bagaimana pekerjaan pada CRUI berlangsung dalam kerangka GSoC - baca di bawah kucing. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/109/de4/c31/109de4c31759545abe5fd1cd510484db.png" alt="gambar"><br><br><a name="habracut"></a><br><br>  Kami di Virtuozzo memiliki proyek kecil namun sudah cukup populer yang disebut CRIU.  Ini adalah utilitas sistem yang agak rumit dan satu set tambalan kernel (kebanyakan dari mereka, sudah, telah diterima ke pohon kernel utama), yang dengannya Anda dapat melakukan hal-hal seperti, misalnya migrasi langsung kontainer atau memperbarui kernel tanpa memulai ulang aplikasi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f4/ea0/8ed/5f4ea08edfc77cbbb9aad905a193f0d3.png" alt="gambar"><br><br>  Kami memulai proyek ini kembali pada tahun 2011.  Dan terlepas dari kenyataan bahwa utilitas tersebut pada awalnya menimbulkan banyak pertanyaan, dan beberapa menganggap implementasinya mustahil, CRIU secara bertahap berubah menjadi alat yang matang.  Hingga saat ini, lebih dari satu setengah ratus kontributor dari beberapa lusin perusahaan, termasuk raksasa seperti Google dan IBM, telah berhasil berpartisipasi di dalamnya.  Meskipun demikian, pencarian untuk anggota baru terus berlanjut, dan tahun ini kami akhirnya mencapai Google Summer of Code (GSoC). <br><br>  GSoC adalah acara tahunan yang disponsori Google yang tujuannya adalah untuk menarik siswa ke berbagai proyek sumber terbuka.  Di satu sisi, tim dari proyek terbuka berusaha untuk berpartisipasi dalam acara tersebut, dan di sisi lain, siswa yang ingin berkontribusi pada pengembangan masyarakat dan membuktikan profesionalisme mereka pada proyek nyata. <br><br>  Untuk masuk ke tim GSoC, Anda perlu mengirimkan aplikasi yang menentukan deskripsi proyek, beberapa topik yang dapat dikerjakan siswa dan daftar yang disebut "mentor" - peserta aktif dalam proyek yang akan membantu siswa dalam pekerjaannya yang sulit.  Siswa diminta untuk memilih satu proyek atau lebih dan mengirimkan resume mereka ke mentor. <br><br>  Di tengah tahun sekolah, Google mempertimbangkan aplikasi tim dan memilih proyek yang akan berpartisipasi, dan lebih dekat dengan liburan musim panas, tim memilih siswa yang siap bekerja, setelah itu Google melakukan pemfilteran terakhir dan mendistribusikan siswa sesuai dengan tim.  Di musim panas, pekerjaan dimulai, yang berlangsung tiga bulan.  Sekali setiap 30 hari, siswa menyerahkan laporan sementara, dan mentor mereka mengevaluasi hasilnya dan membuat rekomendasi untuk kelanjutan (atau pemutusan) pekerjaan. <br><br><h3>  Optimalisasi memori dan implementasi log biner <br></h3><br>  Saya akui bahwa pada 2019 bukanlah upaya pertama kami untuk memasuki GSoC.  Hingga saat ini, kami belum dapat melewati tahap pemilihan proyek dari Google.  Tetapi kami tidak menyerah (secara umum, tidak sulit untuk mengirimkan aplikasi), dan akhirnya, semuanya berjalan baik - Google mengakui pengembangan proyek kami sebagai hal yang penting dan merilis CRUI di GSoC. <br><br>  Kami memiliki banyak topik untuk siswa, satu lagi yang indah dan lebih kompleks.  Kejutan yang menyenangkan adalah kenyataan bahwa untuk masing-masing dari mereka di komunitas ada pemain.  Ada orang yang tahu masalah-masalah yang disuarakan dan siap untuk bekerja sebagai mentor.  Pada tahap pengarsipan siswa, kami menerima seluruh "kompetisi" - 2 siswa mendaftar untuk masing-masing topik dan hampir semua memiliki data input yang bagus.  Seleksi akhir memungkinkan kami untuk mendapatkan dua siswa yang mengambil topik optimisasi kode pelestarian memori dari proses yang sedang berlangsung, serta penerapan log biner. <br><br>  Karena CRIU adalah sistem migrasi aplikasi langsung, ia memiliki mode operasi ketika memori yang digunakan proses dibaca dan ditulis ke file gambar secara paralel dengan pelaksanaan proses itu sendiri.  Kami menyebut ini "operasi jantung yang hidup" dari proses tersebut, karena proses ini terus bekerja tanpa henti.  Sebelum putaran GSoC, semua memori ditarik ke dalam pipa menggunakan panggilan sistem vmsplice, yang membuat suara pada satu waktu, dan kemudian proses terus dijalankan, dan CRIU perlahan-lahan membuang memori ini ke file (atau ke saluran jaringan jika itu merupakan migrasi langsung).  Pada prinsipnya, ini adalah pendekatan yang berfungsi, tetapi masalahnya adalah bahwa memori yang terletak di pipa secara efektif terkunci (mlock) dan kernel tidak dapat membongkar ke disk (swap-out) jika perlu. <br><br>  Dari sudut pandang arsitektur, kami ingin mengganti pipa untuk menyalin memori dalam porsi kecil dengan memanggil process_vm_readv.  Inovasi ini muncul di kernel Linux belum lama ini (omong-omong, panggilan ini memiliki saudara kembar yang disebut process_vm_writev).  Tetapi pada saat yang sama memungkinkan Anda untuk sangat memfasilitasi dan mempercepat, misalnya, pekerjaan utilitas strace dan debuggers, yang dapat menyodok memori proses untuk menyelesaikan beberapa tugas lainnya. <br><br>  Bekerja pada pengoptimalan menjadi rumit oleh fakta bahwa kode untuk bekerja dengan memori proses adalah salah satu yang utama dalam utilitas, dan karena itu harus benar-benar dapat diandalkan.  Kesalahan apa pun dalam menyimpan halaman dapat menyebabkan proses menerima keadaan objek internal yang tidak konsisten (tentang CRIU mana, tentu saja, tidak "tahu" apa pun) dan setelah pemulihan, ia akan jatuh tanpa diagnostik yang jelas. <br><br>  Kesulitan kedua dari pengembangan ini adalah bahwa bekerja dengan memori terlibat di hampir semua fitur CRIU.  Ini adalah prosedur pengembalian-pos pemeriksaan yang biasa, ini adalah berbagai versi yang dioptimalkan, misalnya pra-dump atau pengembalian malas.  Suatu saat selama minggu pelaporan berikutnya, kami bahkan berencana untuk â€œmemberhentikanâ€ siswa dari proyek, tetapi, untungnya, kami tidak melakukan ini dan sekarang kami memiliki optimasi yang telah lama dinanti di cabang devel kami. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b31/4a8/e69/b314a8e6945d365f2dbc1b4e73412ad8.png" alt="gambar"><br><br>  Tugas kedua dalam kerangka GSoC 2019 adalah pengembangan dan implementasi yang disebut log biner.  Begini masalahnya: ketika CRIU bekerja, utilitas menulis pesan tentang kerjanya ke file (atau ke layar, tetapi masih lebih baik ke file).  Pentingnya posting ini sangat besar!  Jika prosedur pencadangan atau pemulihan untuk beberapa alasan tidak berakhir dengan sukses, maka satu-satunya cara untuk memahami alasannya adalah dengan menganalisis setiap langkah sedetail mungkin, dan untuk ini Anda memerlukan informasi tentang utilitas.  Idealnya, proses memerlukan log dan file gambar paling detail, jika ada.  Dalam praktiknya, persyaratan seperti itu sulit dipenuhi. <br><br>  Untuk mendapatkan log yang paling rinci, CRIU menyediakan mode yang sesuai, dan sebagian besar pengguna (dan mungkin bahkan semua) selalu mengaktifkannya.  Tetapi jumlah informasi yang dihasilkan criu dalam proses ini sangat besar sehingga pencatatan itu sendiri mulai mempengaruhi kecepatan sistem.  Sebuah penelitian kecil telah menunjukkan bahwa kita menghabiskan 90% waktu kita untuk login pada operasi pemformatan output - yaitu, pada%% d yang sama,% 08s,% .2f, dan pengubah lain dari keluarga fungsi printf.  Mematikan log mengurangi waktu menyimpan dan memulihkan proses dari 10 hingga 30 persen, tergantung pada ukuran proses itu sendiri. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/035/8cc/429/0358cc42935b88b0792a1c693e84f7c6.png" alt="gambar"><br><br>  Untuk mematikan penggunaan sejumlah sumber daya sistem untuk logging, tetapi membiarkan log se informatif mungkin, kami memutuskan untuk menyingkirkan pemformatan dan menyimpan data biner ke file log.  Bagaimanapun, Anda dapat memformatnya nanti, jika perlu.  Siswa kedua mengatasi tugas ini, yang tambalannya juga telah diterima ke cabang pengembangan. <br><br><h3>  Dan tidak hanya di GSoC <br></h3><br>  Ngomong-ngomong, fakta menarik lain dari berpartisipasi dalam GSoC adalah bahwa siswa ketiga datang kepada kami yang menyatakan keinginan untuk menyelesaikan masalah anonimisasi.  Lagi pula, sering kali tidak mungkin untuk mendapatkan file gambar karena fakta bahwa mereka mengandung informasi rahasia yang tidak ingin dibagikan oleh pengguna secara adil kepada siapa pun - isi memori, file yang proses kerjanya, isi antrian dalam koneksi jaringan, dan sebagainya.  Untuk mengatasi masalah ini, kami mengirimkan fitur yang disebut "anonimisasi gambar" dalam aplikasi, tetapi Google tidak menerimanya. <br><br>  Namun demikian, topik tersebut tidak kehilangan relevansinya, dan siswa yang ingin menanganinya dalam kerangka kerja GSoC, pada akhirnya, memutuskan untuk mengerjakan masalah secara mandiri, di luar acara Google. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/521/6c2/3cd/5216c23cdb38140d3997e8d928e03b86.png" alt="gambar"><br><br><h3>  Kesimpulan <br></h3><br>  Itu, tentu saja, pengalaman positif berpartisipasi dalam GSoC.  Alat CRIU kami, yang sangat kami cintai dan hargai, telah menerima beberapa impuls yang lebih kuat untuk pengembangan, itu telah menjadi lebih dewasa dan nyaman.  Jadi bagi siapa ini mungkin bermanfaat, gunakan dengan senang hati! <br><br>  Di sisi lain, kami yakin bahwa masalah partisipasi dalam acara seperti itu adalah masalah ketekunan dan kepercayaan diri dalam proyek kami.  Jika Anda membutuhkan pengembang, jangan sampai bosan mengirimkan aplikasi dan merumuskan topik baru yang menarik.  Anda dapat menemukan kontributor yang sama sekali tidak terduga dari negara lain atau bahkan dari perusahaan lain. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473362/">https://habr.com/ru/post/id473362/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473348/index.html">Ide inersia (SGDm), gagasan scaling (Adagrad) dan regularisasi dalam pembelajaran mesin menggunakan masalah klasifikasi sebagai contoh</a></li>
<li><a href="../id473350/index.html">Membuat API REST dengan Node.js dan Oracle Database. Bagian 3</a></li>
<li><a href="../id473352/index.html">Koleksi serentak dalam 10 menit</a></li>
<li><a href="../id473354/index.html">Tentang keanehan habrostatistics</a></li>
<li><a href="../id473358/index.html">Instal dan konfigurasikan Nexus Sonatype menggunakan infrastruktur sebagai pendekatan kode</a></li>
<li><a href="../id473364/index.html">Ada goby, berayun: daftar periksa untuk e-commerce di musim penjualan</a></li>
<li><a href="../id473366/index.html">Apa yang ada di tv pintar saya untuk Anda? Atau apa yang bisa dijejalkan ke TV?</a></li>
<li><a href="../id473368/index.html">MIRO adalah platform robot terbuka dalam ruangan. Bagian 3 - Komponen Perangkat Lunak: ESP8266</a></li>
<li><a href="../id473372/index.html">Membuat layanan pelacakan panggilan sederhana, bagian 1</a></li>
<li><a href="../id473374/index.html">Bagaimana kami mengintegrasikan YouTube Live dengan Zoom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>