<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíä üë©üèΩ‚Äçüåæ ü§£ SwayWM - UnixPorn Yourself üèÇüèº üë≤üèª üí£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. Pada artikel ini, saya akan menjelaskan pengalaman saya dalam mengatur dan menggunakan sway, manajer jendela ubin untuk Linux. 
 Apa it...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SwayWM - UnixPorn Yourself</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484378/"><p>  Halo semuanya.  Pada artikel ini, saya akan menjelaskan pengalaman saya dalam mengatur dan menggunakan sway, manajer jendela ubin untuk Linux. <a name="habracut"></a></p><br><h1 id="chto-eto-takoe-i-zachem-ono-nuzhno">  Apa itu dan mengapa itu dibutuhkan? </h1><br><p>  Secara resmi, sway adalah manajer jendela ubin, pengganti transparan untuk i3wm, yang bekerja di atas Wayland. </p><br><blockquote>  Weiland, alias W√∂lund, dll.  - Karakter dari mitologi Old German dan Old Norse, sebuah buku yang pada suatu waktu ditulis oleh penulis cerita rakyat Inggris Jessie Weston.  Sekarang kamu tahu. </blockquote><p>  Namun, menurut pendapat saya, fitur utama sway adalah konstruktor, dengan semua kelebihan dan kekurangan dari pendekatan ini.  Jika Anda menyukai Vim (kemiripannya dengan diperburuk oleh orientasi pada penggunaan keyboard), Archlinux dan proyek serupa, maka saya menyarankan Anda untuk melihat lebih dekat pada goyangan.  Pendapat pribadi saya adalah bahwa sekali Anda menghabiskan lebih banyak waktu menyiapkannya, Anda akan mendapatkan lingkungan yang sangat stabil dan nyaman bagi Anda secara pribadi, di mana tidak ada yang tidak terduga akan terjadi. </p><br><p>  Jika kerugian dari goyangan dan Wayland (seperti kurangnya dukungan untuk driver pribadi NVidia dan kebutuhan untuk mencari analog untuk banyak program yang akrab) nampaknya fatal bagi Anda, saya menyarankan Anda untuk memperhatikan x3 i3wm.  Bagian-bagian konstruktor akan benar-benar berbeda, Anda harus menginstal xinit, mengkonfigurasi berbagai .Xauthority, adalah mungkin untuk berurusan dengan merobek, tetapi logika umum dari sistem persis sama. </p><br><h1 id="ustanovka">  Instalasi </h1><br><p> Goyangan mungkin dalam repositori distribusi Anda.  Namun, jika Anda ingin menginstal versi yang lebih baru, maka itu sangat sederhana.  Halaman proyek <a href="https://github.com/swaywm/sway">github</a> memiliki sedikit daftar dependensinya.  Instal mereka, klon repositori, klon <code>wlroots</code> ke folder <code>subprojects</code> : </p><br><pre> <code class="plaintext hljs">hub clone swaywm/sway hub clone swaywm/wlroots sway/subprojects/wlroots</code> </pre><br><p>  (di sini saya menggunakan <a href="https://github.com/github/hub">hub</a> . Alat non-standar, tetapi sangat nyaman).  Setelah itu, Anda dapat mengonfigurasi dan membuat: </p><br><pre> <code class="plaintext hljs">meson setup ./sway-build ./sway --buildtype=minsize ninja -C ./sway-build doas ninja -C ./sway-build install</code> </pre> <br><blockquote>  doas adalah pengganti sudo ringan dari pengembang OpenBSD.  Linux biasanya menggunakan garpu <a href="https://github.com/Duncaen/OpenDoas">OpenDoas.</a> </blockquote><br><h1 id="zapusk">  Luncurkan </h1><br><p>  Jika Anda ingin menjalankan goyangan dari baris perintah tanpa menggunakan manajer seperti SDDM, maka satu-satunya cara yang tepat untuk melakukan ini adalah </p><br><pre> <code class="plaintext hljs">$ exec sway</code> </pre> <br><p>  Jika Anda menjalankan sway tanpa <code>exec</code> , mengunci layar dengan swaylock, dan sway crash, Anda akan terlempar kembali ke baris perintah.  Kunci tidak akan berguna. </p><br><blockquote>  Catatan untuk penggemar systemd: sway tidak membutuhkan systemd-logind atau elogind.  Benar, dalam hal ini Anda harus mengatur bit suid atau mengkonfigurasi kemampuan.  Lihat <a href="https://github.com/swaywm/sway/wiki/Running-Sway-without-systemd">wiki</a> . </blockquote><br><h2 id="peremennye-okruzheniya">  Variabel lingkungan </h2><br><p>  Ada beberapa tempat di mana saya meresepkannya. </p><br><p>  Script shell di <code>~/.local/bin/sway</code> - untuk variabel yang spesifik untuk diayunkan.  Sebagai contoh, saya ingin aplikasi Qt tidak menampilkan pemandangan dan menggunakan tema dari <code>qt5ct</code> : </p><br><pre> <code class="plaintext hljs">#!/bin/bash QT_QPA_PLATFORMTHEME=qt5ct \ QT_WAYLAND_DISABLE_WINDOWDECORATION=1 \ /usr/bin/sway</code> </pre> <br><p>  <code>~/.pam_environment</code> - untuk variabel yang saya ingin segera sediakan di sesi pengguna systemd.  Contoh: </p><br><pre> <code class="plaintext hljs">SSH_AUTH_SOCK DEFAULT="${XDG_RUNTIME_DIR}/gnupg/S.gpg-agent.ssh"</code> </pre> <br><p>  Namun, ubah file ini dengan hati-hati, terutama jika Anda menggunakan lingkungan lain.  Sebagai contoh, KDE Plasma tidak akan menyukainya jika mendeteksi <code>$WAYLAND_DISPLAY</code> (ironisnya, modul <code>pam_env</code> file ini dibuat N tahun yang lalu terutama untuk mengatur variabel <code>$DISPLAY</code> ). </p><br><p>  <code>~/.bashrc</code> - untuk semua kasus lainnya. </p><br><h1 id="nastroyka-sway">  Pengaturan goyangan </h1><br><h2 id="vvod">  Masuk </h2><br><p>  Semuanya cukup sederhana di sistem saya: kami menginstal tata letak Rusia dan Inggris dan beralih di antara mereka dengan <code>Alt+Shift</code> .  Di goyangan konfigurasi, terlihat seperti ini: </p><br><pre> <code class="plaintext hljs">input * { xkb_layout us,ru xkb_options grp:alt_shift_toggle }</code> </pre> <br><p>  Sway menggunakan perpustakaan <code>libinput</code> untuk input, sama seperti KDE dan Gnome.  Jadi, kami memiliki banyak opsi yang tersedia.  Pengaturan touchpad, pengguliran alami, akselerasi pointer mouse, dll.  dll.  Daftar opsi dapat diperiksa dalam <code>man sway-input</code> , dan daftar perangkat input dalam output perintah </p><br><pre> <code class="plaintext hljs">swaymsg -t get_inputs</code> </pre> <br><p>  Namun, saya ingin menarik perhatian pada satu kesempatan menarik.  Jika Anda pindah dari lingkungan X, Anda cukup mentransfer pengaturan keyboard dari sana.  Jalankan perintah di lingkungan ini </p><br><pre> <code class="plaintext hljs">$ xkbcomp $DISPLAY /path/to/keymap.xkb</code> </pre> <br><p>  dan dalam register konfigurasi goyang </p><br><pre> <code class="plaintext hljs">input * { xkb_file /path/to/keymap.xkb }</code> </pre> <br><h2 id="hotkei">  Tombol cepat </h2><br><p>  Tombol cepat, seperti segala sesuatu yang lain dalam pengaturan, diatur dalam konfigurasi.  Ada 3 perintah untuk mendefinisikannya: </p><br><ol><li>  <code>bindswitch</code> .  Ini dilakukan saat membuka / menutup tutup laptop, beralih ke mode tablet, dll. </li><li>  <code>bindcode</code> .  Ini dijalankan ketika kunci dengan kode yang ditentukan ditekan.  Itu tidak tergantung pada tata letak saat ini, terutama berguna untuk tombol multimedia. </li><li>  <code>bindsym</code>  Karakter saat ini yang dimasukkan tergantung pada tata letak.  Namun, jika Anda menambahkan parameter <code>--to-code</code> , karakter ini akan secara implisit dikonversi ke kode yang sesuai untuk tata letak pertama dari <code>xkb_layout</code> (lihat pengaturan input). </li></ol><br><p>  Misalnya, hotkey seperti itu akan mengalahkan jendela saat ini terlepas dari tata letak: </p><br><pre> <code class="plaintext hljs">bindsym --to-code $mod+Shift+q kill</code> </pre> <br><p>  Anda dapat membaca lebih lanjut tentang parameter ini di mana: <code>man 5 sway</code> . </p><br><p>  Untuk dengan mudah menentukan apa yang ditekan, penulis sway menulis <a href="https://git.sr.ht/~sircmpwn/wshowkeys">keylogger</a> khusus (ia membutuhkan hak root untuk bekerja, sehingga tidak perlu khawatir tentang keamanan). </p><br><h2 id="vyvod">  Kesimpulan </h2><br><p>  Daftar perangkat output yang tersedia dapat diperoleh dengan perintah </p><br><pre> <code class="plaintext hljs">swaymsg -t get_outputs</code> </pre> <br><p>  Dalam konfigurasi untuk masing-masing, Anda dapat mengatur mode video, penskalaan (termasuk fraksional), gambar, rotasi, dll.  Konfigurasi paling sederhana terlihat seperti ini: </p><br><pre> <code class="plaintext hljs">output HDMI-A-1 mode 1920x1080@60Hz output * bg /path/to/wallpaper.jpg fill</code> </pre> <br><p>  Daftar opsi lengkap dapat ditemukan di <code>man sway-output</code> mana. <br>  Ada juga program <a href="https://github.com/emersion/wlr-randr">wlr-randr</a> di mana semua ini dapat diatur dari baris perintah (yaitu, ini adalah analog dari XRandr untuk Wayland). </p><br><h2 id="swaybar">  Swaybar </h2><br><p>  Swaybar - panel tempat informasi status ditampilkan.  Tanggal, waktu, baki sistem, dll.  dll.  Biasanya penggemar i3 dan goyangan menghabiskan waktu paling banyak menyiapkan panel khusus ini (atau panel, mungkin ada beberapa).  Secara pribadi, saya sudah cukup dengan ini, dekat dengan konfigurasi minimum: </p><br><pre> <code class="plaintext hljs">bar { position top colors { statusline #ffffff background #282828E6 inactive_workspace #282936BF #282936BF #5c5c5c } font Hack 11 status_command i3blocks }</code> </pre> <br><p>  Ada banyak opsi untuk menyesuaikan posisi, warna, font, baki, dll.  Anda dapat <code>man 5 sway-bar</code> tentang mereka di mana - <code>man 5 sway-bar</code> . </p><br><p>  Swaybar berkomitmen untuk membaca dan mem-parsing json dalam format i3bar, keluaran oleh <code>status_command</code> .  Ada banyak program yang bisa digunakan di sini.  <a href="https://i3wm.org/i3status/">i3status</a> , <a href="https://github.com/Alexays/Waybar">waybar</a> , <a href="https://github.com/greshake/i3status-rust">i3status-rs</a> , dan banyak proyek lainnya.  Secara pribadi, saya lebih suka <a href="https://github.com/vivien/i3blocks">i3block</a> karena kesederhanaan konfigurasi dan kemudahan menambahkan blok khusus. </p><br><h1 id="nastroyka-prikladnyh-programm">  Pengaturan Aplikasi </h1><br><h2 id="uvedomleniya">  Notifikasi </h2><br><p>  Ini dapat <a href="https://github.com/emersion/mako">dilakukan oleh</a> daemon <a href="https://github.com/emersion/mako">mako</a> (kemungkinan besar ada dalam distribusi Anda).  Di sana Anda juga dapat menyesuaikan warna, dll., Tetapi ini semua opsional.  Jalankan saja dan itu akan berhasil. </p><br><p>  Mako mengimplementasikan spesifikasi Notifikasi Desktop XDG berbasis dbus.  Ini didukung oleh banyak program, termasuk Chromium, Firefox dan Telegram. </p><br><h2 id="emulyator-terminala">  Terminal emulator </h2><br><p>  Dalam lingkungan seperti KDE, Plasma biasanya menggunakan emulator built-in yang menampilkan menu, tab, dan banyak elemen desain lainnya.  Tapi mengapa semua ini bergoyang?  Saya lebih suka <a href="https://github.com/alacritty/alacritty">Alacritty</a> - sangat cepat berkat penggunaan emulator GPU, dengan cara yang ditulis dalam Rust.  Saya menambahkan tombol pintas ke bagian key_bindings di config-nya ( <code>~/.config/alacritty/alacritty.yml</code> ): </p><br><pre> <code class="plaintext hljs">- { key: T, mods: Control|Shift, action: SpawnNewInstance }</code> </pre> <br><p>  buka jendela baru dengan direktori saat ini.  Pengganti tab yang bagus, dan goyangan akan mengatur tata letaknya. </p><br><pre> <code class="plaintext hljs">- { key: Up, mods: Control|Shift, action: ScrollLineUp, mode: ~Alt } - { key: Down, mods: Control|Shift, action: ScrollLineDown, mode: ~Alt }</code> </pre> <br><p>  gulir ke atas / bawah garis. </p><br><p>  Kami menulis di goyangan konfigurasi </p><br><pre> <code class="plaintext hljs">set $term alacritty bindsym $mod+Return exec $term</code> </pre> <br><p>  Alacritty tidak mendukung ligatur, karena mereka mempengaruhi kecepatan rendering.  Jika Anda masih membutuhkannya, perhatikan <a href="https://sw.kovidgoyal.net/kitty/">kitty</a> - emulator ini juga sangat cepat, dan hanya ada sejumlah fitur dan pengaturan yang menakutkan di bawah tenda. </p><br><h2 id="zapusk-prilozheniy">  Luncurkan aplikasi </h2><br><p>  Aplikasi yang sedang bergoyang biasanya diluncurkan menggunakan menu hotkey.  Dalam konfigurasi mereka menulis sesuatu seperti </p><br><pre> <code class="plaintext hljs">set $menu ... bindsym --to-code $mod+d exec $menu</code> </pre> <br><p>  Ada banyak program untuk menampilkan menu.  Beberapa, seperti <a href="https://tools.suckless.org/dmenu/">dmenu</a> atau <a href="https://tools.suckless.org/dmenu/">rofi</a> , membutuhkan XWayland.  Di antara mereka yang bekerja di bawah Wayland kita dapat membedakan <a href="https://github.com/Cloudef/bemenu">bemenu</a> dan bahkan krunner (apa yang muncul di KDE oleh <code>Alt+F2</code> . Ya, ini adalah program independen). </p><br><p>  Namun, saya lebih suka solusi yang lebih universal, yaitu <a href="https://github.com/Biont/sway-launcher-desktop">sway-launcher-desktop</a> .  Meskipun namanya, itu tidak tergantung pada goyangan dan secara umum bukan program GUI, tetapi skrip shell kecil yang bekerja di konsol.  Skrip ini membentuk menu dari program dalam <code>$PATH</code> , file desktop yang diinstal (sesuai dengan spesifikasi Entri Desktop XDG) dan mungkin sumber tambahan (dikonfigurasi dalam konfigurasi).  Utilitas <code>fzf</code> luar <code>fzf</code> digunakan untuk menampilkan dan mencari menu - perhatikan itu. </p><br><p>  Jadi, untuk menampilkan menu, kita perlu membuka jendela terminal dengan program ini.  Dengan alacritty, ini dilakukan seperti ini: </p><br><pre> <code class="plaintext hljs">set $menu exec alacritty -e sway-launcher-desktop bindsym --to-code $mod+d exec $menu</code> </pre> <br><p>  Anda mungkin ingin membuat jendela ini mengambang secara default.  Di i3 dan goyangan, aturan seperti itu dikonfigurasi dalam konfigurasi menggunakan direktif <code>for_window</code> .  Untuk memetakan aturan ke jendela <code>sway-launcher-desktop</code> , perlu diberi beberapa kelas unik, bagi saya itu hanya <code>Launcher</code> .  Perlu diingat bahwa karena penggunaan Wayland, kriteria yang tercantum dalam <a href="https://i3wm.org/docs/userguide.html">manual i3</a> tidak cocok untuk bergoyang.  Yang benar dapat ditemukan di <code>man 5 sway</code> , bagian <code>CRITERIA</code> .  Dalam hal ini, <code>app_id</code> sangat cocok, dan konfigurasi terakhir terlihat seperti ini: </p><br><pre> <code class="plaintext hljs">set $menu exec alacritty --class Launcher -e sway-launcher-desktop for_window [app_id="Launcher"] floating enable, border pixel 10, sticky enable bindsym --to-code $mod+d exec $menu</code> </pre> <br><h2 id="avtozapusk-prilozheniy">  Aplikasi autostart </h2><br><p>  Pada prinsipnya, untuk memulai kembali program secara otomatis, Anda cukup menulis </p><br><pre> <code class="plaintext hljs">exec /path/to/program</code> </pre> <br><p>  dalam konfigurasi goyang, atau bahkan membuat unit systemd kustom.  Namun, dalam artikel ini saya akan menggunakan spesifikasi Autostart XDG yang diadopsi oleh KDE dan Gnome. </p><br><p>  Spesifikasi ini adalah untuk menjalankan file desktop yang berada di direktori <code>/etc/xdg/autostart</code> dan <code>~/.config/autostart</code> .  Biasanya, file-file ini datang dalam paket dengan program, tetapi mudah dibuat sendiri. </p><br><p>  Di sinilah esensi modular goyangan memanifestasikan dirinya.  Sway sendiri tidak tahu apa-apa tentang Autostart XDG, atau XDG Desktop Entry.  Selain itu, pengembangnya secara aktif tidak menyukai ini dan semua spesifikasi serupa.  Namun, utilitas konsol <a href="https://github.com/jceb/dex">dex</a> dapat mengelolanya (kemungkinan besar, itu ada dalam repositori distribusi Anda). </p><br><p>  Untuk memeriksa apa yang akan ada dalam autorun, ketik perintah </p><br><pre> <code class="plaintext hljs">$ dex -ade Sway</code> </pre> <br><p>  <code>a</code> berarti autostart, <code>d</code> - "dry run", <code>-e Sway</code> menetapkan nama lingkungan (dapat berupa apa saja) dan digunakan untuk penyaringan. </p><br><p>  Kemungkinan besar, daftar yang dihasilkan tidak cocok untuk Anda.  Misalnya, saya mendapat <code>kgpg</code> .  Kami melanjutkan sebagai berikut: salin file desktop yang sesuai dari <code>/etc/xdg/autostart</code> ke <code>~/.config/autostart</code> , tambahkan baris di sana </p><br><pre> <code class="plaintext hljs">NotShowIn=Sway</code> </pre> <br><p>  dan periksa autorun lagi.  Banyak program (terutama yang ditulis dalam Electron) mungkin tidak suka dijalankan di bawah Wayland.  Kami melakukan hal yang sama dengan mereka.  Kami menyalin file desktop dan mengubah jalur peluncuran di sana.  Itu: </p><br><pre> <code class="plaintext hljs">Exec=/usr/bin/skypeforlinux</code> </pre> <br><p>  menjadi: </p><br><pre> <code class="plaintext hljs">Exec=env GDK_BACKEND=x11 /usr/bin/skypeforlinux</code> </pre> <br><p>  teknik yang sama dapat diterapkan pada sway-launcher-desktop dari paragraf sebelumnya.  Ketika semua masalah diselesaikan, tambahkan baris ke konfigurasi goyangan </p><br><pre> <code class="plaintext hljs">exec dex -ae Sway</code> </pre> <br><p>  Atau Anda dapat melakukan yang sebaliknya: menyalin file-file desktop yang diinginkan ke beberapa direktori non-standar dan mengatur dex di atasnya dengan perintah </p><br><pre> <code class="plaintext hljs">exec dex -as /path/to/your/dir</code> </pre> <br><h2 id="skrinshoty">  Tangkapan layar </h2><br><p>  Dua peti mati akan membantu kami dengan ini.  <a href="https://github.com/emersion/slurp">slurp</a> memungkinkan Anda untuk memilih area persegi panjang sewenang-wenang di layar, dan <a href="https://github.com/emersion/grim">suram</a> membuat screenshot dari itu.  Dalam konfigurasi saya ini terlihat seperti ini: </p><br><pre> <code class="plaintext hljs">bindsym Print exec grim ~/Pictures/screen-"$(date +%s)".png bindsym $mod+Print exec grim -g "$(slurp)" ~/Pictures/screen-"$(date +%s)".png</code> </pre> <br><p>  <code>$mod+PrintScreen</code> - tangkapan layar area sembarang, <code>PrintScreen</code> - tangkapan layar seluruh layar. </p><br><h2 id="skrinkasty">  Screencasts </h2><br><p>  Jika Anda perlu menulis screencast ke file atau streaming ke aliran RTMP (misalnya, pada Twitch), <a href="https://github.com/ammen99/wf-recorder">wf-recorder</a> akan membantu dengan ini (juga mendukung slurp). </p><br><p>  Jika Anda ingin menggunakan OBS Studio, maka ada plugin <a href="https://hg.sr.ht/~scoopta/wlrobs">wlrobs</a> untuk ini. </p><br><p>  Namun, solusi paling universal yang didukung di satu sisi dalam KDE dan Gnome, dan di sisi lain, khususnya di browser Chrome dan Firefox, adalah dengan menggunakan Pipewire dan spesifikasi XDG Desktop Portal.  Untuk goyangan, ada lapisan yang diperlukan <a href="https://github.com/emersion/xdg-desktop-portal-wlr">xdg-desktop-portal-wlr</a> , meskipun saya tidak memeriksa kinerjanya. </p><br><h2 id="nochnoy-rezhim">  Mode malam </h2><br><p>  Mode malam terdiri dari mengganti warna monitor dengan warna yang lebih hangat dalam gelap.  Para ilmuwan meragukan seberapa berguna ini sebenarnya, dan pengembang Wayland memutuskan bahwa standardisasi protokol koreksi gamma tidak berguna karena alasan teknis. </p><br><p>  Namun demikian, saya suka fitur ini, dan dalam goyangan itu juga ada.  Untuk mode malam, kita memerlukan <a href="https://github.com/minus7/redshift">garpu pergeseran merah ini</a> dengan dukungan untuk protokol khusus-goyangan. </p><br><p>  Kami menginstalnya dengan cara apa pun, dalam <code>~/.config/redshift/redshift.conf</code> , pilih protokol yang diinginkan dan tentukan garis bujur dan garis lintang. </p><br><pre> <code class="plaintext hljs">[redshift] location-provider=manual adjustment-method=wayland [manual] lat=xx.xx lon=yy.yy</code> </pre> <br><h2 id="blokirovka-i-otklyuchenie-ekrana">  Kunci dan layar mati </h2><br><p>  Dua dari peti mati datang untuk menyelamatkan di sini.  <code>swayidle</code> menjalankan perintah yang diberikan dalam batas waktu jika tidak ada aktivitas (atau sebaliknya, penampilannya), dan <code>swaylock</code> mengunci layar dan memerlukan kata sandi.  Anda dapat mematikan layar (atau semua layar, jika ada beberapa) </p><br><pre> <code class="plaintext hljs">swaymsg "output * dpms off"</code> </pre> <br><p>  Inilah yang akan terlihat seperti daemon, memblokir layar setelah 300 detik tidak aktif dan mematikannya setelah 600: </p><br><pre> <code class="plaintext hljs">swayidle -w \ timeout 300 'swaylock -f -c 000000' \ timeout 600 'swaymsg "output * dpms off"' \ resume 'swaymsg "output * dpms on"' \ before-sleep 'swaylock -f -c 000000'</code> </pre> <br><p>  Jalankan dengan cara apa pun. </p><br><h2 id="i3blocks">  i3block </h2><br><p>  Blok siap pakai dengan kalender, jaringan, status disk, dll.  dll.  dapat dipinjam dari repositori <a href="https://github.com/vivien/i3blocks-contrib">i3blocks-contrib</a> .  Di i3blocks mereka ditambahkan di config di <code>~/.config/i3blocks/config</code> .  Misalnya, sebuah blok dengan pembaruan setiap 5 detik pada hari dalam seminggu, tanggal dan waktu: </p><br><pre> <code class="plaintext hljs">[time] command=date +"%a %d/%m %H:%M" interval=5</code> </pre> <br><p>  Tapi ini contoh yang terlalu sederhana.  Bahkan, penggemar goyang i3 dan bergoyang memiliki grail suci: menampilkan bilah judul dari jendela saat ini di bilah atas.  Mari kita cari tahu bagaimana mencapai ini. </p><br><p>  Pertama-tama, kami mulai membaca <code>man sway-ipc</code> dan menemukan bahwa Anda dapat berlangganan acara di sana.  Yang diperlukan memiliki kode <code>0x80000003. WINDOW</code>  <code>0x80000003. WINDOW</code> dan mengembalikan objek json dari struktur ini: </p><br><pre> <code class="plaintext hljs">{ "change" : "focus | title | ...", "container": { focused: true | false, name: "...", ... } }</code> </pre> <br><p>  Memang, jendela itu sendiri dapat mengubah judulnya ( <code>change == title</code> ), atau kita dapat memindahkan fokus ke jendela lain ( <code>change == focus</code> ).  Namun, jendela dapat mengubah judul dan tidak fokus.  Untuk menyaring peristiwa semacam itu, kita harus memeriksa properti <code>container.focused</code> . </p><br><p>  Anda dapat menjelaskan semua logika ini dengan Python atau Go, tetapi ada cara yang lebih baik.  <code>swaymsg</code> membuatnya mudah untuk berlangganan acara yang diinginkan dan menampilkannya ke stdout: </p><br><pre> <code class="plaintext hljs">$ swaymsg -m -t SUBSCRIBE "['window']"</code> </pre> <br><p>  dan kami akan memproses json yang dihasilkan di <code>jq</code> .  Tanpa membahas seluk-beluk sintaks kueri utilitas yang luar biasa ini, inilah hasilnya: </p><br><pre> <code class="bash hljs">$ query=<span class="hljs-string"><span class="hljs-string">'select(.change == "focus" or (.change == "title" and .container.focused)) | .container.name'</span></span> $ swaymsg -m -t SUBSCRIBE <span class="hljs-string"><span class="hljs-string">"['window']"</span></span> | jq --unbuffered -r <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$query</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><p>  Script dua baris di bash, dan tidak ada kode lagi!  Bendera <code>--unbuffered</code> diperlukan, jika tidak, i3blocks tidak akan langsung menerima baris baru, tetapi hanya ketika buffer dihapus. </p><br><p>  Terakhir, tambahkan blok berikut ke konfigurasi i3blocks: </p><br><pre> <code class="plaintext hljs">[active_window] command=/path/to/our/script.sh interval=persist</code> </pre> <br><p>  Pekerjaan rumah: ajarkan suram untuk mengambil tangkapan layar dari jendela saat ini.  Mereka mengatakan bahwa hal-hal seperti itu tidak mungkin di Wayland, tetapi orang-orang meragukannya. </p><br><p>  Pekerjaan rumah 2: Ajarkan i3block untuk menampilkan tata letak keyboard saat ini sebagai bendera.  Ada beberapa blok di i3blocks-contrib, tetapi mereka menampilkan teks alih-alih sebuah bendera dan tidak berfungsi di Wayland. </p><br><h2 id="prochie-programmy">  Program lainnya </h2><br><p>  <a href="https://github.com/bugaevc/wl-clipboard">wl-clipboard</a> memungkinkan Anda untuk bekerja dengan clipboard dari terminal, yaitu, menggantikan xclip dan xsel.  Ini sangat berguna untuk pengguna vim, di mana salin / tempel mulai menggunakan <code>"+y</code> / <code>"+p</code> (cukup instal paket ini, tidak diperlukan konfigurasi tambahan). </p><br><p>  <a href="https://github.com/ReimuNotMoe/ydotool">ydotool</a> - penggantian xdotool. </p><br><p>  <a href="https://gitlab.freedesktop.org/mstoeckl/waypipe/">waypipe</a> - proksi untuk transparansi jaringan.  Sejujurnya, saya tidak ingat kapan terakhir kali seseorang mengajukan pertanyaan terkait fitur ini di forum khusus.  Mungkin mereka tidak menggunakannya sama sekali?  Saya - jelas tidak. </p><br><p>  KDE Connect  Tambahkan file <code>org.kde.kdeconnect.nonplasma.desktop</code> ke <code>org.kde.kdeconnect.nonplasma.desktop</code> (lihat bagian sebelumnya), instal KDE Connect pada smartphone Anda dan konfigurasikan koneksi mereka - dan Anda dapat mengontrol pemutaran musik dan video dari smartphone Anda di browser dengan plugin <a href="https://addons.mozilla.org/ru/firefox/addon/plasma-integration/">integrasi plasma</a> , di vlc , dalam cantata, dalam mpv dengan <a href="https://github.com/hoyon/mpv-mpris">plugin mpv-mpris</a> , dan juga menerima notifikasi dalam mako.  Penghargaan saya untuk proyek KDE untuk mengembangkan program yang tidak terpaku pada ekosistem mereka. </p><br><h1 id="zaklyuchenie">  Kesimpulan </h1><br><p>  Anda dapat menulis tentang mengatur semua ini (terutama panel i3blocks) tanpa akhir, tetapi lebih baik berhenti di sini.  Inilah yang saya dapatkan: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/s9/qy/q0/s9qyq0rrpk9rzv4bamj1qsooceq.png"></a> </p><br><p>  Juga pergi ke subreddit <a href="https://www.reddit.com/r/unixporn/">/ r / unixporn</a> dan kagumi apa yang dilakukan orang.  (Namun, 95% dari semua yang ditata di sana terlihat indah, tetapi pasti tidak cocok untuk pekerjaan sehari-hari :)). </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id484378/">https://habr.com/ru/post/id484378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id484368/index.html">Bagaimana saya melakukan mesin pencari untuk Telegram</a></li>
<li><a href="../id484370/index.html">Slurm SRE - belajar untuk memastikan kebahagiaan pengguna</a></li>
<li><a href="../id484372/index.html">Rumah pintar dengan Xiaomi pada contoh sauna</a></li>
<li><a href="../id484374/index.html">Perjalanan ke pusat ... gambar buruh pelabuhan. Atau cara mengunduh gambar dari registri tanpa buruh pelabuhan</a></li>
<li><a href="../id484376/index.html">Samsung Moscow Center for Artificial Intelligence dalam cerita karyawan</a></li>
<li><a href="../id484380/index.html">Pindah - abad terakhir! Alternatif untuk std :: pindah di ‚ÄúC ++ of the Future‚Äù</a></li>
<li><a href="../id484382/index.html">Algoritma Bellman-Ford</a></li>
<li><a href="../id484386/index.html">Pertemuan AWS_Ru di Raiffeisenbank</a></li>
<li><a href="../id484388/index.html">VVVVVV ??? VVVVVV !!! :)</a></li>
<li><a href="../id484390/index.html">Glean Insights Tentang 18 Kerangka Kerja Java Terbaik Untuk Digunakan pada tahun 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>