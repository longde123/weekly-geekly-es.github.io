<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÅ üìô üöØ Wir arbeiten mit dem Cobot Dobot M1 üìü ‚úåüèæ üéé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor einem Jahr erschien auf Habr√© die √úberpr√ºfung des Desktop-Roboters Dobot Magician. In diesem Artikel schlage ich vor, seinen √§lteren Bruder Dobot ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir arbeiten mit dem Cobot Dobot M1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467407/">  Vor einem Jahr erschien auf Habr√© die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√úberpr√ºfung des</a> Desktop-Roboters Dobot Magician.  In diesem Artikel schlage ich vor, seinen √§lteren Bruder Dobot M1 in Aktion zu evaluieren.  Ich werde auch versuchen zu erkl√§ren, warum ich dieses spezielle Modell f√ºr mein Projekt ausgew√§hlt habe. Ich werde den Entwicklungsprozess der Demo in Qt / c ++ sowie einige unangenehme Momente beschreiben, die ich w√§hrend des Entwicklungsprozesses erlebt habe. <br><a name="habracut"></a><br><h1>  Einf√ºhrung </h1><br>  Dieses Jahr habe ich an einem der g√§ngigsten Forschungsinstitute gearbeitet.  Anfangs war alles ziemlich locker, und das Jahr versprach nichts Interessantes, bis eines Tages bei einer Kundgebung eine Diskussion dar√ºber begann, wie Solarzellen (Schindelsolarzellen) gekachelt zusammengebaut werden k√∂nnen.  Dieser Ansatz sei nichts Neues, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hei√üt es</a> , dies sei eine der ersten M√∂glichkeiten, Panels f√ºr Weltraumsatelliten zusammenzubauen. <br><br>  Ich wei√ü nicht, wie wahr das ist, weil ich keine Artikel oder Patente gesehen habe.  Das Interesse der √ñffentlichkeit an dieser Entscheidung hat sich jedoch erw√§rmt, auch weil SunPower vor einigen Jahren seine neuen Panels, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">P-Serie, auf</a> den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Markt gebracht hat</a> .  In der Welt der Photovoltaik ist es einfach so passiert, dass, da die Sanpower etwas tut, jeder dies auch tun muss.  Da sind wir.  Alles ist einfach: Wir bereiten die Substrate vor, schneiden sie in Streifen und montieren sie.  In diesem Moment bemerkte ich, dass ich pers√∂nlich definitiv nichts manuell sammeln w√ºrde, da sich meine H√§nde nicht in besonderer Gleichm√§√üigkeit unterschieden.  Andernfalls kann das Ergebnis so etwas wie ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video</a> auf YouTube sein.  Und wir sind schlie√ülich eine ganze Institution. Wenn wir wirklich etwas tun, ist es keine so kollektive Farm.  Ich bot an, Roboter zu kaufen und sie f√ºr den gew√ºnschten Prozess zu konfigurieren, und sie gaben mir die Erlaubnis. <br><br>  Es sollte beachtet werden, dass wir uns entschieden haben, einfacher zu beginnen und Mini-Panels zusammenzubauen.  Ein Mini-Panel ist ein Solarpanel, das kleiner als der Standard ist.  Wir tun dies, um technologische Prozesse zu erarbeiten.  Zuerst wurde ich von einem Panel mit einer Gr√∂√üe von 1 Standardsolarzelle mit Skalierungspl√§nen auf ein Panel von 2 x 2 gef√ºhrt. Die Gr√∂√üe der Seite einer Solarzelle betr√§gt 16 cm. Dementsprechend wurden Roboter mit einem Zugangsfeld von 32 x 32 cm ben√∂tigt. Ich wollte eine genauere Genauigkeit und der Preis war billiger .  Also begann ich mit einer Suchleiste die S√§tze zu studieren.  Ich entschied, dass 6 Achsen f√ºr das Projekt nicht ben√∂tigt werden, 4 sind genug, also wurde die Auswahl auf Roboter wie eine Narbe beschr√§nkt.  Ich fand heraus, dass der Kauf von Industrierobotern mit zus√§tzlichen Kosten verbunden ist, z. B. dem Entwerfen eines sicheren Arbeitsbereichs und dem Verlassen des Anwendungstechnikers am Installationsort, der den Roboter f√ºr Ihre Aufgabe programmiert.  Gute Industrieroboter sind im Prinzip teuer, und die Dienste von Ingenieuren werden den Preis noch weiter erh√∂hen. Au√üerdem war es interessant, das Projekt selbst umzusetzen.  Daher beschr√§nkte sich die Auswahl auf Cobots, kollaborative Roboter mit geringeren Sicherheitsanforderungen und freundlicher f√ºr das Selbstprototyping.  Also fand ich schnell die Firma Dobot.  Ich habe den Dobot Magier wegen der Gr√∂√üe und Genauigkeit von 100 Mikrometern sofort fallen lassen.  Ich schrieb ihnen eine Anfrage, um Spezifikationen zu geben und sagte, wo sie kaufen sollten.  Ich fand heraus, dass es mit APIs APIs gibt, die in C ++ programmiert werden k√∂nnen.  Es passte zu mir, aber ich konnte es nicht einfach direkt kaufen.  Gl√ºcklicherweise fand ich einen Lieferanten in den Niederlanden, der mir 2 St√ºck f√ºr 8700 Euro mit Mehrwertsteuer mit Lieferung aus China verkaufte und gleichzeitig die gesamte Zollabfertigung √ºbernahm. <br><br><h1>  Eigenschaften Freundlichkeit </h1><br><img src="https://habrastorage.org/webt/eq/li/v_/eqliv_l21t5_qnph5vis0kjci9m.jpeg"><br><br>  Dobot M1 ist als erschwinglicher professioneller 4-Achsen-Kollaborationsroboter positioniert.  Es kann einer Last von bis zu 1,5 kg standhalten (nicht getestet), hat eine Reichweite von bis zu 400 mm (nicht √ºberall) und eine Genauigkeit von bis zu 20 Mikrometern (gepr√ºft).  Der Arbeitsraum der Freundlichkeit ist in der folgenden Abbildung dargestellt.  Es ist nicht schwer zu bemerken, dass aufgrund der Konstruktionsmerkmale eine blinde Zone mit einem Radius von etwas weniger als 15 Zentimetern vorne vorhanden ist.  Dar√ºber hinaus ber√ºcksichtigt diese Raumkarte nicht die Ausrichtung der Hand.  Dobot kann entweder rechtsh√§ndig oder linksh√§ndig sein. Ich habe immer noch nicht herausgefunden, wie dies ohne zus√§tzliche Kalibrierung unterwegs eingeschaltet werden kann.  Standardm√§√üig ist Dobot Rechtsh√§nder, was bedeutet, dass die rechte Zone durch den Zugangsbereich des 2. Gelenks begrenzt ist, wenn das erste Gelenk nach rechts gerichtet ist.  Der reale Bereich des Arbeitsbereichs betr√§gt also ungef√§hr 2/3 der in der offiziellen Zeichnung gezeigten Fl√§che. <br><br><img src="https://habrastorage.org/webt/qf/bv/dp/qfbvdpisi2sc2pbc62vg38miyko.png"><br><br>  Goodness hat E / A-Anschl√ºsse: digitale Ein- und Ausg√§nge mit 24-V-Pegeln (Standardpegel sind hoch) sowie analoge Eing√§nge.  Welche Art von ADC es gibt, wei√ü ich nicht.  An der R√ºckseite des St√§nders und an der Hand selbst befinden sich Anschl√ºsse f√ºr die Arbeit mit D√ºsen.  Ich habe vergessen, den Stecker am Arm selbst zu fotografieren, aber es handelt sich um eine Art CAA.  Es gibt auch eine Erweiterungsschnittstelle, f√ºr die Sie eine zus√§tzliche Geb√ºhr erwerben k√∂nnen.  Dobot stellt √ºber RS-232 oder √ºber ein Netzwerk eine Verbindung zu einem PC her. <br><br><img src="https://habrastorage.org/webt/wx/jp/tx/wxjptxd8lxcgzk7z7orkbmi-hri.png"><br><br>  Geh√§usematerialien: anscheinend Polycarbonat sowie ein schwarz lackierter Metallst√§nder.  Dieses Design verursacht kein Gef√ºhl von Premium, sondern auch ein Gef√ºhl von Handwerkskunst.  Ich kaufte einen voll beladenen und einen in der Basis.  Ich habe die Laserd√ºse und den 3D-Druck nicht getestet. <br><br>  Um die G√ºte der Freundlichkeit zu testen, habe ich das Programm M1Studio f√ºr Windows verwendet, das von der Website des Unternehmens heruntergeladen wird.  Aber das ist alles.  Au√üerdem setzte ich mich mit API, Qt und einer Workstation mit Elementarwespen zusammen, um eine Demo zu schreiben, in der ich mit mehreren H√∂hen und Tiefen arbeiten konnte. <br><br><h1>  Wir schreiben eine Demo </h1><br>  Tats√§chlich ist die Demo bereits auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a> verf√ºgbar.  Die Dokumentation f√ºr API und Kommunikationsprotokoll kann von der Website des Herstellers heruntergeladen werden. <br><br>  Zun√§chst verwendeten wir die SearchDobot () -Methode von api, die unter Linux nichts zeigte und nur in Windows funktionierte, wenn der Dobot √ºber RS-232 verbunden war.  Es ist seltsam, weil M1Studiya Dobotov √ºber das Netzwerk perfekt definiert.  Bei bekannten IP-Adressen funktioniert die ConnectDobot () -Methode einwandfrei.  Es ist okay, dachte ich, ich werde den Router einrichten und die IP-Adresse an die Mohnblume anh√§ngen lassen.  Am n√§chsten Tag war ich √ºberrascht, dass Freundlichkeiten nicht reagieren.  Es stellte sich heraus, dass der Dobot beim Einschalten eine zuf√§llige Mohnadresse hat.  Dies ist eine solche Funktion der Firmware, die in der neuen Version im Mai behoben wurde, die ich jedoch nicht installieren wollte. <br><br>  Ausger√ºstet mit einem Programm zur Analyse von Netzwerkpaketen fand ich heraus, dass Dobot auf eine UDP-Anfrage an Port 6000 mit dem Text ‚ÄûWhoisDobotM1‚Äú UDP-Antwort mit Text reagiert, der die Modell-Dobot-Nummer enth√§lt.  Auf dieser Grundlage wurde eine benutzerdefinierte Methode geschrieben, die Anforderungen √ºber das gesamte Subnetz sendet und im Falle einer Antwort die Freundlichkeit initialisiert. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MainWindow::on_buttonSearch_clicked() { QHostAddress host; QList&lt;QHostAddress&gt; <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> = QNetworkInterface::allAddresses(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.count(); i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((!<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i).isLoopback()) &amp;&amp; (<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i).protocol() == QAbstractSocket::IPv4Protocol)) host = <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i); } QString subnet = host.toString().section(<span class="hljs-string"><span class="hljs-string">'.'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">"."</span></span>; QByteArray data = <span class="hljs-string"><span class="hljs-string">"WhoisDobotM1"</span></span>; QUdpSocket udpSocketSend; udpSocketSend.writeDatagram(data);<span class="hljs-comment"><span class="hljs-comment">//need tocall it otherwise in Win get socket doesn't open udpSocketSend.bind(host, 54321, QAbstractSocket::ShareAddress); udpSocketGet.bind(host, udpSocketSend.localPort(), QAbstractSocket::ShareAddress); connect(&amp;udpSocketGet, &amp;QUdpSocket::readyRead, this, &amp;MainWindow::readUdpData); for (int i=1; i&lt;255; i++) udpSocketSend.writeDatagram(data, 32, QHostAddress(subnet + QString::number(i)), 6000); }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MainWindow::readUdpData() { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (udpSocketGet.hasPendingDatagrams()) { QNetworkDatagram data = udpSocketGet.receiveDatagram(); QByteArray ip = data.senderAddress().toString().toUtf8(); QString name = QString(data.data()).section(<span class="hljs-string"><span class="hljs-string">'_'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// cuts "dobotM1" from "dobotM1_Dobot M1_0033\x00" if (name == "dobotM1") { MyDobot* a = new MyDobot(); dobot-&gt;push_back(a); dobot-&gt;last()-&gt;initDobot(ip); ui-&gt;listDobots-&gt;addItem(ip); on_listDobots_activated(ui-&gt;listDobots-&gt;currentIndex()); } } }</span></span></code> </pre><br>  Die Demo-Oberfl√§che ist recht einfach und wird im Bild unten dargestellt. <br><br><img src="https://habrastorage.org/webt/p1/t1/ym/p1t1ym-u5v1th1j0qwacwvrc3w8.png"><br><br>  Um die Freundlichkeit zu initialisieren und zu steuern, schrieb ich eine Klasse, in der ich die Funktionen realisierte, die ich ben√∂tige: Achsensteuerung, Bewegung von Punkt zu Punkt in einer geraden Linie und in einer Kurve, R√ºckkehr in die Ausgangsposition, Steuerung der Luftpumpe sowie √úberwachung von Positionen und Fehlern.  Wechseln wir uns ab.  Wenn die Klasse initialisiert wird, wird die IP-Adresse der G√ºte in der Variablen gespeichert, die erste Verbindung dazu wird hergestellt, die gesamte Befehlswarteschlange wird bereinigt, auch wenn die Warteschlange leer ist, und die Beschleunigungs- und Geschwindigkeitsparameter f√ºr Motoren werden festgelegt. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyDobot</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QObject { Q_OBJECT <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">explicit</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyDobot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QObject *parent = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">nullptr</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; ~MyDobot(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initDobot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QByteArray IPaddress)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Pose </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCurrentPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goHomeSafe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goHome</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goSafe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goPositionStraight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goJog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAirPump</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> status, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> direction)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">//status 1 off 0 on; direction 0 suck 1 push void setOutput(uint8_t address, uint8_t level); void setMotor(int velocity, int acceleration); alarmState getAlarms(); void clearAlarms(); void clearQueue(); QString getName(); public slots: private: char deviceSN[64]; char deviceName[64]; QByteArray thisDobotIP; Pose currentPosition, futurePosition; };</span></span></code> </pre><br>  Ich habe beschlossen, einen Vektor mit Elementen meiner Klasse zu verwenden, um Dobot zu steuern, wenn ihre Anzahl gr√∂√üer als 1 ist. Jedes Element des Vektors hat eine Variable, die die IP-Adresse des Dobots speichert.  Weil  Die Bibliothek ist eine, und es gibt mehrere Dobotov. In jeder Methode der Klasse m√ºssen Sie zuerst die Methode zum Herstellen einer Verbindung mit einem bestimmten Dobot aufrufen.  Es mag schief aussehen, aber es ist alles unter der Haube, und dann ist die Arbeit mit dieser Klasse sehr praktisch. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MyDobot::setAirPump(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> status, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> direction) { ConnectDobot(thisDobotIP, <span class="hljs-number"><span class="hljs-number">115200</span></span>, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>); ...</code> </pre><br>  Die Bewegung von Punkt zu Punkt in API Goodness wird durch verschiedene Methoden implementiert: in einer geraden Linie, in einer Kurve und auf eine andere Weise, an die ich mich nicht erinnere.  In der folgenden Abbildung sind zwei Bewegungsbahnen zwischen zwei Punkten sichtbar.  Eine ist eine gerade Linie, die sich bei ordnungsgem√§√üer Kalibrierung des Ger√§ts beim Hin- und Herbewegen nicht teilt.  Die zweite Trajektorie ist die gekr√ºmmte Linie, die Sie erhalten, da die Firmware f√ºr die Freundlichkeit die Motoren nacheinander anpasst, um die gew√ºnschte Koordinate zu erreichen.  Es ist zu beachten, dass eine Bewegung in einer geraden Linie nicht immer m√∂glich ist. Einige Positionen der Gelenke erlauben es nicht, in einer geraden Linie von Punkt A nach Punkt B zu gelangen. <br><br><img src="https://habrastorage.org/webt/px/i2/ke/pxi2keh8edb25v9jos_b508trha.jpeg"><br><br>  Die Dobot-Positions√ºberwachung wird mithilfe der Qtimer-Klasse implementiert, deren Qtimer :: timeout-Signal an meine MainWindow :: on_getPoseTimer-Methode gebunden ist.  Ich muss zugeben, dass dies eine mittelm√§√üige L√∂sung ist, da ein reaktionsschneller Betrieb der Anwendung mit Ups nur m√∂glich ist, wenn Sie ein Timeout von 1000 ms einstellen.  Bei k√ºrzeren Timings sind beim Verwalten der Ups Rucke zu sp√ºren.  Mir ist aufgefallen, dass ein Dobot manchmal eine Weile dumm sein kann, wenn er einen Befehl empf√§ngt, und wenn Sie ziemlich oft Befehle senden, steigt die Wahrscheinlichkeit, in einen dummen Zustand zu geraten.  Vielleicht liegt dies an dem st√§ndigen Aufruf von ConnectDobot, der in dieser Demo unn√∂tig erscheint, aber die Demo wurde parallel zum Hauptprojekt geschrieben, und im Hauptprojekt brauche ich wirklich eine solche Implementierung.  Die √úberwachung der Verbindung wird jedoch nicht jedes Mal aufgerufen, aber das Problem mit der Aufh√§ngung bleibt bestehen.  Eine Zeit√ºberschreitung von 1 s liefert leider keine so reibungslose Messung der Position der G√ºte im Raum, die beispielsweise im M1 Studio implementiert ist, aber andererseits ist dies nicht wichtig. <br><br>  Bei der gleichen Methode tritt eine Fehleranforderung auf.  Aus Gr√ºnden der Benutzerfreundlichkeit wird die Fehlercode√ºbertragung √ºber die AlarmState-Struktur implementiert. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alarmState</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> value[<span class="hljs-number"><span class="hljs-number">32</span></span>]; };</code> </pre><br>  Diese Struktur ist ein Array von 8-Bit-Elementen, und der Fehlercode ist in der Bin√§rdarstellung eines der verschiedenen Elemente des Arrays codiert.  Um den Fehlercode zu berechnen, m√ºssen Sie im Element "1" suchen und seine Entladungsnummer (Einheit) zu 8 * n Elementen (die andere Fehler enthalten oder nicht enthalten) vor dem Wertarray hinzuf√ºgen.  Ja, es kann mehr als einen Fehler gleichzeitig geben.  Als n√§chstes muss der Fehlercode in dem Dokument gefunden werden, das auf der Website des Herstellers zum Download zur Verf√ºgung steht.  Der Inhalt von pdfk wurde in eine Textdatei kopiert, die als Ressource mit dem Projekt verbunden ist.  Wenn der Fehlercode von 8 * 32 abweicht (d. H. Es liegt kein Fehler vor), wird dieser Code im Fehlerfeld angezeigt. Durch Klicken auf die Schaltfl√§che Alarm wird seine Beschreibung in der Datei analysiert und dann im Textfeld angezeigt.  √úbrigens werden Fehlerdecodierungen und -analysen au√üerhalb der Klasse durchgef√ºhrt, um die Ups zu steuern.  Das scheint mir jetzt nicht ganz die richtige Idee zu sein. <br><br>  Das Kit enth√§lt eine Luftpumpe, die in der Bedienungsanleitung den Anschluss an die digitalen Ausg√§nge 17 und 18 vorschl√§gt. Ein Ausgang steuert das Ein- und Ausschalten der Pumpe und der zweite die Richtung der Luftbewegung.  So wird beispielsweise ein pneumatischer Greifer aktiviert, der ebenfalls mitgeliefert wird. <br><br><h1>  Unkraut </h1><br>  W√§hrend ich den Dobot ausnutzte, stie√ü ich auf einige Probleme. <br><br><ol><li>  Die L√∂cher im St√§nder sind nicht f√ºr die Teilung der L√∂cher im optischen Standard-Steckbrett vorgesehen.  Auf der anderen Seite, einmal, als versehentlich meine Freundlichkeiten miteinander kollidierten, rollte einer von ihnen einfach um die Achse des Befestigungsbolzens, was meiner Meinung nach schwere Sch√§den vermeidet. </li><li>  Aus dem ersten Absatz folgt der zweite.  Nach der Kollision des Dobot verschoben sich ihre Achsen.  Dies war zun√§chst nicht be√§ngstigend, da ich eine Methode zum Kalibrieren der Achse des Dobot relativ zur Kamera geschrieben habe.  Das Schreckliche ist in Absatz 3 passiert. </li><li>  Die vertikale Achse hat sich ebenfalls verschoben und jetzt ist meine Normalit√§t nicht normal.  Dies kann von der Kamera erkannt werden, wenn Sie mit den Punkten zwei Senkrechte zeichnen.  Sie k√∂nnen sicherstellen, dass Dobot aufgrund der schr√§gen Vertikalen jetzt mit einem Stift nicht seine wahren X- und Y-Achsen zeichnet, sondern deren Projektionen.  Und diese Projektionen k√∂nnen einen Winkel von weniger als 90 Grad haben.  In der Realit√§t f√ºhrt dies zu einem kleinen Ausrichtungsfehler.  Andererseits ist es nicht so be√§ngstigend, weil der Fehler linear ist. </li><li>  Dobot-Firmware, grunds√§tzlich ca.  Es gab einen kleinen Pfosten mit einer Mohnadresse, es gibt einige Probleme beim Warten auf Antworten auf UDP-Anfragen, aber ansonsten funktioniert es gut. </li><li>  Das Design bietet eine Batterie, die ben√∂tigt wird, um die letzten Koordinaten nach dem Ausschalten der Freundlichkeit beizubehalten.  Wenn die Batterie leer ist, f√§llt die Spannung ab, wodurch diese Daten gel√∂scht werden.  Aus diesem Grund wird der Dobot in einen Fehlerzustand geladen.  Um aus diesen Zust√§nden abzuleiten, m√ºssen Sie zuerst die Methode zum L√∂schen von Fehlermeldungen und dann die Suchmethode f√ºr die Position "home" aufrufen.  Sie k√∂nnen die Batterie austauschen, der Vorteil ist enthalten.  Die Batterie ist jedoch im St√§nder versteckt, und um dorthin zu gelangen, mussten 4 Schrauben gel√∂st werden.  Der Schlitz eines von ihnen wird abgeschossen. </li><li>  In meinem Projekt habe ich 3 Glasscheiben verwendet, um das Niveau des Tisches zu erh√∂hen.  So lala Entscheidung, weil das Glas schief ist.  Tatsache ist, dass Dobot beginnt, Fehler zu erzeugen, wenn seine vertikale Achse einen Wert von weniger als 15 mm hat, und es scheint, dass nicht alle Funktionen verf√ºgbar sind.  Daher muss sich der Arbeitsbereich direkt √ºber der Befestigungsebene des Dobot befinden. </li></ol><br><h1>  Fazit </h1><br>  Dank meiner Freundlichkeit konnte ich ein Projekt zum Zusammenbau von Solarzellen in einer gekachelten Mini-Steckdose durchf√ºhren, das auf Video zu sehen ist.  Die Positionierungsgenauigkeit wurde auf denselben Siliziumwafern √ºberpr√ºft und lag in der Grenze von 1 Pixel auf einer Achse und 10 Pixel auf einer anderen.  Die Kamera in diesem Projekt wurde mit einer Aufl√∂sung von 20 MP verwendet, und das Sichtfeld der Kamera entlang der langen Seite betrug etwa 17 cm. Es ist nicht schwer zu berechnen, dass 1 Pixel einer linearen Gr√∂√üe von etwa 30 Mikrometern entsprach.  Es ist einfach so passiert, dass die verwendete Optik, wenn auch von hoher Qualit√§t, es erm√∂glicht, Siliziumwafer nur in ihrer Mitte klar zu beobachten, w√§hrend die Kanten der Wafer sehr verschwommen werden, was zu einer Unsicherheit bei der Bestimmung ihrer Fl√§chen entlang kurzer Seiten und dementsprechend zu einer Unsicherheit bei der Bestimmung der Mitte des Wafers f√ºhrt.  Nach dem Kalibrieren der Achsen habe ich den Kamerafokus auf die kurzen Seiten der Platten eingestellt.  Es ist anzumerken, dass es im Prinzip unm√∂glich war, sich dort wie in der Mitte des Sichtfeldes zu konzentrieren, aber dennoch.  Aufgrund dieses Effekts lag der Positionierungsfehler entlang der Achse entlang der langen Seite der Solarzelle im Grenzbereich von 10 Pixeln, auf der kurzen Seite jedoch nur bei 1 Pixel.  Das entspricht ungef√§hr 300 und 30 Mikron.  Dadurch konnte ich die Integrit√§t der Spezifikationen auf Richtigkeit √ºberpr√ºfen. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/j7SNzEHzecM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467407/">https://habr.com/ru/post/de467407/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467395/index.html">Habr Weekly # 18 / New Apple Gadgets, ein vollmodulares Smartphone, das Dorf der Programmierer in Wei√ürussland, das XY-Ph√§nomen</a></li>
<li><a href="../de467399/index.html">Sie k√∂nnen nicht verbieten, Folgendes mitzubringen: wie Sie das BYOD-Konzept implementieren und die Informationssicherheit nicht beeintr√§chtigen</a></li>
<li><a href="../de467401/index.html">Vergleich von Tesla Model S und Porsche Taycan</a></li>
<li><a href="../de467403/index.html">Was Sie aus Webkomponenten herausholen k√∂nnen und was nicht</a></li>
<li><a href="../de467405/index.html">Lyft startet 3D-Objekterkennungswettbewerb</a></li>
<li><a href="../de467409/index.html">Um im Silicon Valley Gesch√§fte zu machen, m√ºssen Sie sich benehmen</a></li>
<li><a href="../de467413/index.html">PHP Microservice Framework - "Hallo Welt" von Swoft</a></li>
<li><a href="../de467415/index.html">Moderner Devisenmarkt</a></li>
<li><a href="../de467419/index.html">Jakarta EE 8 Final Release ver√∂ffentlicht</a></li>
<li><a href="../de467421/index.html">Erstellen Sie ausdrucksstarke intelligente Zeiger f√ºr den Remotespeicher in C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>