<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõåüèæ ü§≤üèº üë©üèø‚Äçüç≥ Utilisation de Fastify et de Preact pour prototyper rapidement des applications Web üë©‚Äçüë©‚Äçüë¶‚Äçüë¶ ‚úçüèΩ üç¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur du mat√©riel, dont nous publions la traduction aujourd'hui, souhaite partager une histoire sur les technologies qu'il utilise pour d√©velopper ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation de Fastify et de Preact pour prototyper rapidement des applications Web</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/442652/">  L'auteur du mat√©riel, dont nous publions la traduction aujourd'hui, souhaite partager une histoire sur les technologies qu'il utilise pour d√©velopper rapidement des prototypes d'applications Web.  Ces technologies incluent les biblioth√®ques Fastify et Preact.  Il utilise √©galement la biblioth√®que htm.  Il s'int√®gre facilement √† Preact et est utilis√© pour d√©crire les √©l√©ments DOM √† l'aide de constructions intuitives rappelant JSX.  Dans le m√™me temps, un transcripteur comme Babel n'est pas n√©cessaire pour travailler avec.  Apr√®s avoir d√©montr√© les outils de d√©veloppement de prototypage et les m√©thodes de travail avec celui-ci, l'auteur du mat√©riel montrera comment emballer ces applications dans des conteneurs Docker.  Cela facilite la d√©monstration des applications √† toutes les personnes int√©ress√©es. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/iq/mq/4a/iqmq4a-j0p_qnlayhqdbmbb2au4.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Commencer</font> </h2><br>  J'ai commenc√© √† utiliser l'ensemble des technologies susmentionn√©es il y a quelques semaines lorsque je devais cr√©er un prototype d'application Web tr√®s simple con√ßu pour v√©rifier, avec des coll√®gues, certaines hypoth√®ses. <br><br>  Mon exp√©rience a √©t√© extr√™mement r√©ussie.  J'ai pu cr√©er un prototype tr√®s rapidement, mes coll√®gues ont pu l'exp√©rimenter facilement, ils ont pu exprimer rapidement leurs impressions √† ce sujet.  Dans le m√™me temps, ils pouvaient tester le projet m√™me si Node.js et NPM n'√©taient pas install√©s sur leurs ordinateurs. <br><br>  Tout cela m'a conduit √† l'id√©e que je devrais √©crire du mat√©riel sur mon approche du prototypage rapide d'applications Web.  Il est possible que cette approche soit utile √† quelqu'un d'autre.  Pour ceux qui connaissent d√©j√† Fastify et Preact, je d√©crirai imm√©diatement la chose la plus importante, qui leur permettra de mettre imm√©diatement mes id√©es en pratique. <br><br><h2>  <font color="#3AC1EF">Id√©es principales</font> </h2><br>  Si vous √™tes d√©j√† familier avec Fastify et Preact et que vous souhaitez apprendre √† organiser le d√©veloppement de projets bas√©s sur ces technologies, vous √™tes litt√©ralement √† quelques pas de ce que vous voulez.  √Ä savoir, nous parlons des commandes suivantes: <br><br><pre><code class="plaintext hljs">git clone https://github.com/lmammino/fastify-preact-htm-boilerplate.git my-new-project cd my-new-project rm -rf .git npm install</code> </pre> <br>  Bien s√ªr, vous pouvez remplacer le nom du projet, <code>my-new-project</code> , par le nom de votre projet. <br><br>  Apr√®s avoir install√© tout ce dont vous avez besoin, vous pouvez commencer √† travailler sur le projet.  √Ä savoir, nous parlons de ce qui suit: <br><br><ul><li>  Le dossier <code>src/ui</code> contient les fichiers de la partie client de l'application (ici Preact et htm sont utilis√©s). </li><li>  Le dossier <code>src/server</code> contient des fichiers li√©s au c√¥t√© serveur de l'application (Fastify est utilis√© ici). </li></ul><br>  En modifiant les fichiers appropri√©s, vous pouvez ex√©cuter le projet: <br><br><pre> <code class="plaintext hljs">npm start</code> </pre> <br>  Apr√®s cela, vous pouvez le tester en allant √† l'adresse <code>localhost:3000</code> dans le navigateur. <br><br>  Et encore une chose.  Si vous avez aim√© mon d√©veloppement, je serai extr√™mement reconnaissant √† la star de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> . <br><br>  Examinons maintenant les technologies utilis√©es ici et les fonctionnalit√©s de leur utilisation. <br><br><h2>  <font color="#3AC1EF">Fastify</font> </h2><br>  Fastify est un framework web rapide et √©conomique pour Node.js.  Ce projet a √©t√© √† l'origine cr√©√© par deux programmeurs.  Maintenant, l'√©quipe de ceux qui y travaillent compte 10 personnes, plus de 130 personnes aident au d√©veloppement du projet, il a r√©colt√© pr√®s de 10 000 √©toiles sur GitHub. <br><br>  Fastify a √©t√© influenc√© par les frameworks Node.js comme Express et Hapi, qui existent depuis un certain temps.  Il √©tait √† l'origine destin√© √† la productivit√©, √† la convenance des programmeurs et √† √©tendre ses capacit√©s √† l'aide de plugins.  C'est d'ailleurs l'une de mes fonctionnalit√©s pr√©f√©r√©es de Fastify. <br><br>  Si vous n'√™tes pas familier avec le framework Fastify ou si vous voulez mieux le conna√Ætre, je peux recommander sa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> officielle. <br><br>  Il convient de noter que je suis li√© √† Fastify.  Je suis membre de la principale √©quipe de d√©veloppement et je suis principalement engag√© dans le support du site du projet et dans l'√©laboration de sa documentation. <br><br><h2>  <font color="#3AC1EF">Preact</font> </h2><br>  Preact est une biblioth√®que pour d√©velopper des interfaces utilisateur pour des projets Web, qui a √©t√© cr√©√©e par une seule personne en remplacement rapide et compact de React.  Ce projet s'est av√©r√© √™tre un succ√®s, maintenant toute une √©quipe de d√©veloppeurs s'y est engag√©e, sur GitHub il a marqu√© plus de 20 000 √©toiles. <br><br>  L'une des raisons pour lesquelles j'aime Preact est que cette biblioth√®que poss√®de une couche extensible pour d√©crire les composants visuels de l'application.  Dans des circonstances normales, cette biblioth√®que peut √™tre utilis√©e √† l'aide de JSX en combinaison avec Babel pour traduire le code, mais si vous ne souhaitez pas installer Babel et configurer le processus de g√©n√©ration d'application, vous pouvez utiliser Preact, par exemple, avec la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">htm</a> , qui utilise des litt√©raux de mod√®le et ne n√©cessite pas transpilation lors du lancement de projets dans lesquels il est utilis√© dans les navigateurs modernes. <br><br>  Dans cet article, nous utiliserons la biblioth√®que htm et consid√©rerons bient√¥t quelques exemples. <br><br><h2>  <font color="#3AC1EF">Aper√ßu du projet</font> </h2><br>  Ici, nous regardons l'ensemble du processus de cr√©ation d'un projet.  Notre objectif sera de d√©velopper une application web simple qui affiche des informations sur l'heure sur le serveur au moment de son lancement.  Ici, afin de clarifier ce que nous visons. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d8/9fe/c12/4d89fec1291d3ab9b66f7673af992d06.png"></div><br>  <i><font color="#999999">Application dans le navigateur</font></i> <br><br>  Il s'agit d'une application monopage (SPA), dans laquelle Preact et htm sont utilis√©s pour former sa partie client, et Fastify est utilis√© pour cr√©er une API con√ßue pour recevoir l'heure du serveur. <br><br>  Un lecteur attentif peut remarquer que la page montr√©e dans la figure pr√©c√©dente a une jolie ic√¥ne de favicon.  Certes, il est tr√®s petit l√†-bas, donc je vais faciliter la t√¢che √† ceux qui, en se brisant les yeux, essaient de comprendre.  En voici une version agrandie. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aaa/3a8/c3b/aaa3a8c3b25bba5f361af23d9af0f22b.jpg"></div><br>  <i><font color="#999999">Favicon</font></i> <br><br><h2>  <font color="#3AC1EF">Configuration du c√¥t√© serveur de l'application</font> </h2><br>  Commen√ßons par cr√©er un nouveau dossier: <br><br><pre> <code class="plaintext hljs">mkdir server-time cd server-time</code> </pre> <br>  Maintenant, initialisez le projet NPM et installez Fastify: <br><br><pre> <code class="plaintext hljs">npm init -y npm i --save fastify@next fastify-static@next fastify-cli</code> </pre> <br>  Veuillez noter que j'ai utilis√© la construction <code>@next</code> pour d√©crire certains <code>@next</code> d√©pendances.  Ceci est fait pour que le projet utilise la biblioth√®que Fastify 2, qui est actuellement dans un √©tat candidat de sortie, mais deviendra tr√®s bient√¥t la version stable principale. <br><br>  Veuillez noter que vous pouvez √©galement cr√©er un nouveau projet bas√© sur Fastify √† l'aide de l' <code>fastify-cli</code> ligne de commande <code>fastify-cli</code> : <br><br><pre> <code class="plaintext hljs">npx fastify-cli generate server-time</code> </pre> <br>  Au moment de la r√©daction de ce document, cette √©quipe cr√©e un projet con√ßu pour utiliser Fastify 1.x, mais tr√®s bient√¥t, apr√®s la sortie de Fastify 2, cet outil sera mis √† jour. <br><br>  Analysons les packages install√©s: <br><br><ul><li>  <code>fastify</code> est un composant central du framework. </li><li>  <code>fastify-static</code> est un plugin suppl√©mentaire qui vous permet de servir facilement des fichiers statiques avec le serveur Fastify. </li><li>  <code>fastify-cli</code> est un outil en ligne de commande qui vous permet de cr√©er des projets bas√©s sur Fastify. </li></ul><br>  Pour le moment, nous sommes pr√™ts √† cr√©er une API bas√©e sur Fastify.  <code>src/server/server.js</code> donc le code du serveur dans le <code>src/server/server.js</code> : <br><br><pre> <code class="plaintext hljs">const path = require('path') module.exports = async function(fastify, opts) { //      `src/ui` fastify.register(require('fastify-static'), {   root: path.join(__dirname, '..', 'ui'), }) //     API fastify.get('/api/time', async (request, reply) =&gt; {   return { time: new Date().toISOString() } }) }</code> </pre> <br>  Je crois que le code ci-dessus s'explique bien, mais il y a quelques d√©tails int√©ressants qui m√©ritent d'√™tre mentionn√©s.  Cela sera particuli√®rement utile pour ceux qui n'ont pas d'exp√©rience avec Fastify. <br><br>  La premi√®re chose √† laquelle vous pouvez pr√™ter attention dans ce code est que le mot-cl√© <code>async</code> est utilis√© ici.  Fastify prend en charge √† la fois le d√©veloppement de style asynchrone / attente et une approche de rappel plus traditionnelle.  Le choix exact d√©pend des pr√©f√©rences d'un d√©veloppeur particulier. <br><br>  Un autre d√©tail int√©ressant est que nous d√©finissons ici le serveur comme un module export√©.  Ce module (appel√© ¬´plug-in¬ª dans le jargon Fastify) est une fonction qui prend comme argument une instance de Fastify ( <code>fastify</code> ) et un ensemble d'options ( <code>fastify</code> ).  Dans la d√©claration du module, nous pouvons utiliser une instance de <code>fastify</code> pour enregistrer les plugins.  C'est exactement ce qui se passe avec le plugin <code>fastify-static</code> .  Nous pouvons √©galement d√©crire les points de terminaison HTTP √† l'aide de m√©thodes sp√©ciales telles que <code>fastify.get</code> et <code>fastify.post</code> . <br><br>  L'approche modulaire utilis√©e ici, m√™me si elle semble un peu inhabituelle, a ses avantages.  Pour commencer, il convient de noter qu'il vous permet de combiner plusieurs serveurs.  Imaginez que vous avez cr√©√© un serveur con√ßu pour servir un blog et un autre pour un forum.  Ils peuvent √™tre facilement int√©gr√©s dans une application existante en les attachant √† des chemins tels que <code>/blog</code> et <code>/forum</code> . <br><br>  De plus, cette approche nous permet d'abstraire des applications et des sous-applications des liaisons de serveur (par exemple, la liaison de socket), en passant la solution √† cette t√¢che soit √† l'application racine soit √† <code>fastify-cli</code> . <br><br>  D√©marrez le serveur √† l'aide de l' <code>fastify</code> ligne de commande <code>fastify</code> : <br><br><pre> <code class="plaintext hljs">node_modules/.bin/fastify start --log-level info src/server/server.js</code> </pre> <br>  Afin de simplifier notre vie, nous pouvons ajouter cette commande √† la section <code>scripts</code> de notre fichier <code>package.json</code> : <br><br><pre> <code class="plaintext hljs">{ "scripts": {   "start": "fastify start --log-level info src/server/server.js" } }</code> </pre> <br>  Avant de d√©marrer le serveur, nous devons nous assurer qu'il existe un dossier dans lequel les ressources statiques seront situ√©es.  Sinon, <code>fastify-static</code> erreur.  Cr√©ez ce dossier: <br><br><pre> <code class="plaintext hljs">mkdir src/ui</code> </pre> <br>  Nous pouvons maintenant d√©marrer l'application avec la commande <code>npm start</code> et naviguer √† l'aide du navigateur vers <code>localhost:3000/api/time</code> . <br><br>  Si tout fonctionne correctement, dans le navigateur, vous pouvez voir quelque chose comme ceci: <br><br><pre> <code class="plaintext hljs">{ "time": "2019-02-17T19:32:03.354Z" }</code> </pre> <br>  √Ä ce stade, vous pouvez appr√©cier une autre fonctionnalit√© int√©ressante de Fastify.  Elle r√©side dans le fait que la s√©rialisation JSON, dans le cas o√π une certaine route retourne un objet, est appliqu√©e automatiquement. <br><br>  Maintenant, le travail sur l'API du serveur est termin√©.  Ayons une interface. <br><br><h2>  <font color="#3AC1EF">Configuration frontend</font> </h2><br>  Tout le code de notre projet li√© au frontend sera situ√© dans le dossier <code>src/ui</code> .  Il sera compos√© de 5 fichiers: <br><br><ul><li>  <code>app.js</code> - Code d'application <code>app.js</code> -activ√©. </li><li>  <code>bootstrap.min.css</code> - Code CSS pour le style de l'application (il provient directement du framework Bootstrap). </li><li>  <code>favicon.ico</code> - fichier favicon.  Si vous d√©veloppez une application s√©rieuse, vous ne pouvez pas vous passer d'un bon fichier favicon. </li><li>  <code>index.html</code> est le fichier HTML principal de notre application d'une page. </li><li>  <code>preacthtm.js</code> - code des biblioth√®ques Preact et htm. </li></ul><br>  Tout d'abord, placez les fichiers dans le dossier, qui sont les styles, les biblioth√®ques et l'ic√¥ne favicon: <br><br><pre> <code class="plaintext hljs">curl "https://unpkg.com/htm@2.0.0/preact/standalone.js" &gt; src/ui/preacthtm.js curl "https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" &gt; src/ui/bootstrap.min.css curl "https://github.com/lmammino/fastify-preact-htm-boilerplate/blob/master/src/ui/favicon.ico?raw=true" &gt; src/ui/favicon.ico</code> </pre> <br>  Cr√©ez maintenant le fichier <code>src/ui/index.html</code> : <br><br><pre> <code class="plaintext hljs">&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt;   &lt;meta charset="utf-8" /&gt;   &lt;meta     name="viewport"     content="width=device-width, initial-scale=1, shrink-to-fit=no"   /&gt;   &lt;!-- Bootstrap CSS --&gt;   &lt;link rel="stylesheet" href="/bootstrap.min.css" /&gt;   &lt;title&gt;My awesome server time&lt;/title&gt; &lt;/head&gt; &lt;body&gt;   &lt;div id="app"&gt;&lt;/div&gt;   &lt;!-- JavaScript --&gt;   &lt;script src="/preacthtm.js"&gt;&lt;/script&gt;   &lt;script src="/app.js"&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br>  Nous avons devant nous une page HTML tr√®s ordinaire avec laquelle nous chargeons toutes les ressources (CSS et JS) et cr√©ons un √©l√©ment <code>&lt;div&gt;</code> vide avec l' <code>app</code> identifiant, dans lequel nous sortirons notre application pendant l'ex√©cution du projet. <br><br>  Jetez maintenant un ≈ìil au code de l'application, qui devrait se trouver dans le <code>src/ui/app.js</code> : <br><br><pre> <code class="plaintext hljs">/*  htmPreact */ const { html, Component, render } = htmPreact class App extends Component { componentDidMount() {   this.setState({ loading: true, time: null })   fetch('/api/time')     .then(response =&gt; response.json())     .then(data =&gt; this.setState({ loading: false, time: data.time })) } render(props, state) {   return html`     &lt;div class="container mt-5"&gt;       &lt;div class="row justify-content-center"&gt;         &lt;div class="col"&gt;           &lt;h1&gt;Hello from your new App&lt;/h1&gt;           &lt;div&gt;             ${state.loading &amp;&amp;               html`                 &lt;p&gt;Loading time from server...&lt;/p&gt;               `} ${state.time &amp;&amp;               html`                 &lt;p&gt;Time from server: &lt;i&gt;&lt;font color="#999999"&gt;${state.time}&lt;/font&gt;&lt;/i&gt; &lt;/p&gt;               `}           &lt;/div&gt;           &lt;hr /&gt;           &lt;div&gt;             Have fun changing the code from this boilerplate:             &lt;ul&gt;               &lt;li&gt;UI code available at &lt;code&gt;/src/ui&lt;/code&gt;&lt;/li&gt;               &lt;li&gt;Server-side code available at &lt;code&gt;/src/server&lt;/code&gt;&lt;/li&gt;             &lt;/ul&gt;           &lt;/div&gt;         &lt;/div&gt;       &lt;/div&gt;     &lt;/div&gt;   ` } } render( html`   &lt;${App} /&gt; `, document.getElementById('app') )</code> </pre> <br>  Il n'y a qu'un seul composant avec √©tat dans cette application appel√© <code>App</code> .  L'√©tat de ce composant comprend 2 variables: <br><br><ul><li>  <code>loading</code> est une variable logique utilis√©e pour indiquer si une demande √† l'API du serveur est en cours d'ex√©cution √† un certain moment pour obtenir des informations sur l'heure du serveur. </li><li>  <code>time</code> - une cha√Æne qui contient les derni√®res informations d'heure re√ßues du serveur. </li></ul><br>  Si vous connaissez React, vous pouvez facilement comprendre le code ci-dessus. <br>  En utilisant Preact et htm, nous pouvons cr√©er des composants en d√©clarant des classes qui √©tendent la classe <code>Component</code> int√©gr√©e. <br><br>  Dans cette classe, nous pouvons d√©crire le comportement d'un composant en utilisant des m√©thodes de cycle de vie, comme <code>componentDidMount()</code> , et √©galement utiliser une m√©thode qui se comporte comme une m√©thode <code>render()</code> standard de React. <br><br>  Dans notre cas, d√®s que le composant est attach√© √† la page (m√©thode <code>componentDidMount()</code> ), nous d√©finissons la propri√©t√© de <code>loading</code> √©tat et ex√©cutons une demande d'API √† l'aide de <code>fetch</code> . <br>  Une fois la demande termin√©e, nous d√©finissons la valeur de la propri√©t√© d'√©tat <code>time</code> et red√©finissons la propri√©t√© de <code>loading</code> sur <code>false</code> . <br><br>  La m√©thode <code>render()</code> est appel√©e automatiquement chaque fois qu'un √©tat de composant change ou lorsque de nouvelles propri√©t√©s lui sont transmises.  Dans cette m√©thode, nous d√©crivons le composant DOM en utilisant htm. <br><br>  La biblioth√®que htm vous permet de d√©crire les n≈ìuds DOM √† l'aide de litt√©raux de mod√®le balis√©s avec une balise sp√©ciale - <code>html</code> .  Dans notre litt√©ral de mod√®le, des expressions dynamiques peuvent √™tre pr√©sentes, comme celles que nous utilisons pour v√©rifier l'√©tat et d√©cider quoi afficher si l'application charge des donn√©es √† partir du serveur et si les donn√©es sont d√©j√† charg√©. <br><br>  Il convient √©galement de noter que nous devons cr√©er une instance de l'application et l'afficher sur une page HTML.  Cela se fait √† l'aide de la fonction <code>render()</code> de l'objet global <code>htmPreact</code> . <br><br>  Le travail sur l'application frontale est maintenant termin√©.  Vous pouvez red√©marrer le serveur, aller sur <code>localhost:3000</code> et exp√©rimenter avec ce que nous venons de cr√©er.  Par exemple, vous pouvez d√©velopper le v√¥tre sur la base de cette application.  Et lorsque ce que vous construisez semble suffisamment int√©ressant pour le montrer √† quelqu'un d'autre, il vous sera probablement utile de placer votre application dans un conteneur Docker. <br><br><h2>  <font color="#3AC1EF">Conteneurisation des applications</font> </h2><br>  Je crois que la meilleure fa√ßon de montrer aux autres vos nouveaux petits projets est d'utiliser les capacit√©s de Docker √† cet effet. <br><br>  Gr√¢ce √† Docker, quiconque essaie d'ex√©cuter votre application √† la maison sera libre de penser s'il a la version appropri√©e de Node.js et NPM install√©e, il n'aura pas besoin de t√©l√©charger le code source de l'application pour s'en assurer en entrant la s√©quence correcte de commandes , installez ses d√©pendances et d√©marrez le serveur. <br><br>  Afin d'emballer l'application dans le conteneur Docker, nous devons cr√©er un <code>Dockerfile</code> tr√®s simple dans le dossier racine de notre projet: <br><br><pre> <code class="plaintext hljs">FROM node:11-alpine WORKDIR /app COPY . /app RUN npm install --production EXPOSE 3000 CMD ["npm", "start"]</code> </pre> <br>  Nous d√©crivons ici les actions suivantes: <br><br><ul><li>  L'image est cr√©√©e sur la base de l'image Node.js 11, construite sur la base d'Alpine Linux. </li><li>  Tout dans le dossier actuel est copi√© dans le dossier <code>/app</code> du conteneur. </li><li>  Apr√®s cela, nous <code>npm install</code> commande <code>npm install</code> pour t√©l√©charger et installer les d√©pendances.  L'utilisation de l'indicateur <code>--production</code> conduit au fait que seules les d√©pendances n√©cessaires au d√©ploiement du projet en production seront install√©es.  Cela acc√©l√®re la cr√©ation d'images si le projet utilise de nombreuses d√©pendances de d√©veloppement. </li><li>  Nous indiquons que le conteneur doit avoir un pore ouvert 3000, sur lequel, par d√©faut, le serveur fonctionnera. </li><li>  Au final, nous d√©crivons une commande, <code>npm start</code> , qui sera ex√©cut√©e au d√©marrage du conteneur.  Elle lance l'application. </li></ul><br>  Afin de collecter l'image pour le conteneur, ex√©cutez la commande suivante: <br><br><pre> <code class="plaintext hljs">docker build -t server-time .</code> </pre> <br>  Apr√®s quelques secondes, l'image devrait √™tre pr√™te et vous devriez pouvoir d√©marrer le conteneur: <br><br><pre> <code class="plaintext hljs">docker run -it -p 3000:3000 server-time</code> </pre> <br>  L' <code>-p</code> vous permet de configurer la connexion entre le port de conteneur 3000 et le port local 3000. Cela vous permettra d'acc√©der √† l'application conteneuris√©e sur <code>localhost:3000</code> . <br>  Vous √™tes maintenant pr√™t √† partager votre application avec d'autres personnes.  Pour l'ex√©cuter dans l'environnement Docker, il suffit, √† condition que Docker soit install√© sur l'ordinateur, d'ex√©cuter les deux commandes ci-dessus dans son dossier. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Dans cet article, nous avons expliqu√© comment cr√©er un environnement pour le d√©veloppement rapide d'applications Web √† l'aide de Fastify et Preact.  En outre, nous avons expliqu√© comment partager l'application avec d'autres personnes utilisant Docker. <br><br>  Comme mentionn√© ci-dessus, les outils propos√©s sont con√ßus pour un prototypage rapide, alors maintenant vous vous demandez peut-√™tre ce qui manque ici pour d√©velopper de vraies applications.  Tr√®s probablement, lorsque vous parlez de ¬´vraies applications¬ª, vous entendez les caract√©ristiques suivantes: <br><br><ul><li>  Compilation des ressources de la partie front-end de l'application: cr√©ation de fichiers optimis√©s (bundles), √©ventuellement √† l'aide de Webpack, Babel ou d'autres outils. </li><li>  Routage dans le front-end de l'application. </li><li>  Rendu du serveur </li><li>  Moyens de stockage permanent des donn√©es. </li></ul><br>  Toutes ces possibilit√©s de d√©veloppement d'applications r√©elles n'ont pas encore √©t√© ajout√©es √† l'ensemble des technologies discut√©es ici, donc pour l'instant je le per√ßois comme un outil de d√©veloppement de prototypes.  Je suis s√ªr que si vous avez aim√© ce que vous avez vu et que vous consid√©rez tout cela comme la base de futures applications qui r√©solvent de vrais probl√®mes, vous pouvez facilement trouver ce dont vous avez besoin et cr√©er des applications pr√™tes √† l'emploi sur Fastify et Preact. version de production. <br><br>  <b>Chers lecteurs!</b>  Comment prototyper des applications Web? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr442652/">https://habr.com/ru/post/fr442652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr442642/index.html">Que lire en mars: 22 nouveaux livres pour les sp√©cialistes du marketing, les gestionnaires, les d√©veloppeurs et les concepteurs</a></li>
<li><a href="../fr442644/index.html">La plupart des comp√©tences hors programmation augmentent la valeur pour les d√©veloppeurs</a></li>
<li><a href="../fr442646/index.html">R√©seaux Kubernetes: Ingress</a></li>
<li><a href="../fr442648/index.html">M√©canismes d'allocation de Go</a></li>
<li><a href="../fr442650/index.html">Analyse et optimisation des applications React</a></li>
<li><a href="../fr442654/index.html">Passer √† Next.js et acc√©l√©rer 7,5 fois le chargement de la page d'accueil de manifold.co</a></li>
<li><a href="../fr442658/index.html">8 astuces pour travailler avec CSS: parallaxe, pied de page collant et autres</a></li>
<li><a href="../fr442660/index.html">Math√©matiques r√©conciliant Newton avec le monde quantique</a></li>
<li><a href="../fr442662/index.html">Comment regarder SDDL et ne pas casser les yeux sur les points-virgules</a></li>
<li><a href="../fr442664/index.html">QIWI Kitchen 6 f√©vrier - comment c'√©tait + pr√©sentations des conf√©renciers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>