<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüè≠ üèè üë©üèø‚Äçüç≥ Toda la verdad sobre RTOS. Art√≠culo # 7. N√∫cleo SE: Introducci√≥n üë®üèø‚Äçüíº üëåüèø üîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el resto de la serie "Toda la verdad sobre RTOS", examinaremos en detalle c√≥mo se implementa y despliega RTOS. Para hacer esto, consideraremos un R...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Toda la verdad sobre RTOS. Art√≠culo # 7. N√∫cleo SE: Introducci√≥n</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418601/"><img src="https://habrastorage.org/webt/s_/59/bp/s_59bpqram112a5-md1svupxnmo.jpeg"><br><br>  En el resto de la serie "Toda la verdad sobre RTOS", examinaremos en detalle c√≥mo se implementa y despliega RTOS.  Para hacer esto, consideraremos un RTOS espec√≠fico: Nucleus SE.  Incluso si no va a utilizar este n√∫cleo en particular u otros n√∫cleos relacionados con √©l, comprender c√≥mo funciona proporcionar√° una buena base para trabajar con cualquier RTOS. <br><a name="habracut"></a><br>  Para comprender por qu√© Nucleus SE se dise√±√≥ de esta manera, es importante resaltar las tareas y objetivos centrales que segu√≠ al comienzo de este proyecto. <br><br>  Art√≠culos anteriores de la serie: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Otros servicios RTOS</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Interacci√≥n de tareas y sincronizaci√≥n</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tareas, cambio de contexto e interrupciones</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tareas y planificaci√≥n</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RTOS: estructura y modo en tiempo real</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RTOS: introducci√≥n.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><br></a> <br><br>  <b>Simplicidad</b> <br><br>  El c√≥digo del n√∫cleo debe ser simple, directo, bien comentado y documentado.  Nucleus SE est√° destinado principalmente para uso educativo. <br><br>  <b>Tama√±o</b> <br><br>  Este deber√≠a ser un n√∫cleo peque√±o y bien escalable (ya que la memoria, especialmente la memoria operativa (RAM), puede ser escasa). <br><br>  <b>Funcionalidad</b> <br><br>  El n√∫cleo debe tener un alto nivel de funcionalidad que admita servicios RTOS est√°ndar. <br><br>  <b>Soporte de 8/16 bits</b> <br><br>  Debe admitir arquitecturas de 8 y 16 bits: en la medida de lo posible, utilice datos del tama√±o de un byte;  las estructuras de datos no deber√≠an requerir m√©todos de direccionamiento ex√≥ticos;  los datos persistentes no deben copiarse en RAM innecesariamente. <br><br>  <b>El futuro</b> <br><br>  Debe haber una ruta de desarrollo de Nucleus SE a Nucleus RTOS.  Los usuarios deber√≠an poder transferir f√°cilmente el c√≥digo entre n√∫cleos.  M√°s importante a√∫n, su conocimiento tambi√©n debe ser transferido.  La API Nucleus SE implementa efectivamente un subconjunto de la API Nucleus RTOS. <br><br>  <b>Costo</b> <br><br>  El modelo de negocio deber√≠a ser atractivo para todos los usuarios potenciales: desarrolladores de dispositivos de 8/16 bits, aquellos que primero usan el RTOS y aquellos que solo est√°n estudiando la tecnolog√≠a en s√≠.  Por lo tanto, Nucleus SE est√° disponible de forma gratuita, absolutamente libre de usar con fines comerciales y educativos;  El c√≥digo puede ser utilizado y modificado. <br><br>  <b>P√∫blico objetivo N√∫cleo SE</b> <br><br>  El resultado de este enfoque es un n√∫cleo que puede ser √∫til para tres tipos de desarrolladores: <br><br><ul><li>  Programadores de dispositivos de 8/16 bits que requieren un n√∫cleo simple o un programador de tareas.  Esto es especialmente atractivo si los desarrolladores est√°n interesados ‚Äã‚Äãen adquirir ciertas habilidades para usar RTOS o cuando desarrollan un sistema que usa otros dispositivos de 32 bits donde Nucleus RTOS puede ser una buena opci√≥n. </li><li>  Desarrolladores de aplicaciones integradas que utilizan dispositivos de 32 bits donde la complejidad del software no vale el costo de un RTOS comercial tradicional.  Usar Nucleus SE puede ser √∫til y permitir√° el desarrollo (hasta Nucleus RTOS) si aumenta la complejidad de la aplicaci√≥n. </li><li>  Los estudiantes en el proceso de aprendizaje pueden usar Nucleus SE como base para aprender RTOS.  Las habilidades adquiridas ser√°n √∫tiles m√°s tarde cuando comiencen a funcionar. </li></ul><br>  <b>Decisiones de dise√±o y compensaciones</b> <br><br>  Para lograr los objetivos anteriores, se tuvieron que tomar varias decisiones de dise√±o cuidadosamente pensadas.  Los detalles se describir√°n m√°s adelante cuando consideremos funciones espec√≠ficas, pero aqu√≠ hay un breve resumen de los puntos clave. <br><br>  <b>Configuraci√≥n est√°tica</b> <br><br>  Nucleus SE es un RTOS est√°tico, lo que significa que todas las decisiones de configuraci√≥n se toman en el momento de la compilaci√≥n, no din√°micamente en el tiempo de ejecuci√≥n.  Esto tiene muchas ventajas, incluida la simplificaci√≥n de la estructura de datos y la reducci√≥n del tama√±o del c√≥digo, por lo que no es necesario llamar a las funciones de creaci√≥n y eliminaci√≥n de API.  Para la mayor√≠a de las aplicaciones, no se requiere la creaci√≥n din√°mica de objetos. <br><br>  <b>Numero de objetos</b> <br><br>  El n√∫mero de objetos de cada tipo est√° limitado en una aplicaci√≥n basada en Nucleus SE.  Puede ser de una a diecis√©is tareas y de cero a diecis√©is tipos diferentes de objeto kernel.  Esto simplifica el direccionamiento de objetos (ver m√°s abajo).  Esta restricci√≥n no es dif√≠cil para aplicaciones peque√±as para las que est√° destinado el n√∫cleo. <br><br>  <b>Dirigiendo objetos</b> <br><br>  Los objetos se abordan mediante un "√≠ndice", que puede variar de cero a quince.  En comparaci√≥n con el uso habitual de punteros, esto puede ser m√°s eficiente en procesadores m√°s peque√±os y permitir menos memoria: el √≠ndice requiere solo 4 bits de memoria;  La direcci√≥n es de 16-32 bits. <br><br>  <b>Planificador</b> <br><br>  El planificador pertenec√≠a al √°rea de la arquitectura del n√∫cleo que se simplific√≥.  En lugar de proporcionar un mecanismo flexible con diferentes pol√≠ticas de programaci√≥n, hay cuatro tipos de planificador disponibles en el n√∫cleo;  el planificador espec√≠fico para la aplicaci√≥n se selecciona durante la configuraci√≥n. <br><br>  <b>Funcionalidad limitada</b> <br><br>  Algunas funciones disponibles en Nucleus RTOS no se implementan en Nucleus SE.  En algunos casos, esto se hace por simplicidad.  En otros casos, una ligera p√©rdida de funcionalidad en un √°rea hace que la otra funcionalidad sea m√°s f√°cil de implementar.  Estas incompatibilidades se destacan en los art√≠culos relevantes de la serie. <br><br>  <b>Uso de la memoria</b> <br><br>  Dado que Nucleus SE debe admitir aplicaciones de memoria limitadas, se ha prestado especial atenci√≥n al uso de la memoria.  Se supon√≠a que deb√≠a usar la ROM y la RAM "cl√°sicas": la ROM se usaba para el c√≥digo y los datos persistentes;  RAM: para almacenar variables, una pila, etc. Aunque un objetivo espec√≠fico puede tener un esquema diferente, el c√≥digo Nucleus SE es bastante flexible;  Las definiciones (#defines) de ROM y RAM se utilizan para prefijar todas las estructuras de variables y datos para indicar su ubicaci√≥n.  Esto se puede lograr utilizando herramientas. <br><br>  El requisito clave era evitar la copia innecesaria de datos de la ROM a la RAM, ya que la RAM puede no ser suficiente.  El mecanismo por el cual se logra esto se describe en la secci√≥n Estructuras de datos del siguiente art√≠culo. <br><br>  <b>Implementaci√≥n API</b> <br><br>  La API para Nucleus SE se implementa de la manera tradicional: la funci√≥n del lenguaje C implementa cada llamada API.  Estas llamadas est√°n agrupadas l√≥gicamente.  Aunque las llamadas a la API en Nucleus SE no son exactamente las mismas que en Nucleus RTOS, la funcionalidad general es simulada y la asignaci√≥n entre las API es f√°cil.  Se incluir√°n detalles de la API Nucleus RTOS. <br><br>  <b>Secciones cr√≠ticas</b> <br><br>  El c√≥digo para muchas llamadas a funciones API incluye secuencias de instrucciones que manipulan los datos del n√∫cleo.  En general, los datos pueden estar en un estado no v√°lido durante la ejecuci√≥n de estas instrucciones, por lo que se debe tener cuidado para evitar la interrupci√≥n.  O bien, puede estar prohibido ejecutar c√≥digo desde otra tarea o interrumpir el controlador si pudiera acceder a estos datos (actualmente no v√°lidos).  Dichas secuencias de instrucciones se denominan secciones cr√≠ticas. <br><br>  Se define un par de macros llamadas NUSE_CS_Enter () y NUSE_CS_Exit ().  Todos los c√≥digos de funciones de la API de Nucleus SE los utilizan para abarcar la secci√≥n cr√≠tica, por lo tanto: <br><br>  NUSE_CS_Enter (); <br>  &lt;c√≥digo no interrumpible&gt; <br>  NUSE_CS_Exit (); <br><br>  T√≠picamente, estas macros se expandir√°n en instrucciones de interrupci√≥n de instrucciones de desactivaci√≥n e instrucciones de interrupci√≥n de habilitaci√≥n respectivamente.  Esto deber√° verificarse si Nucleus SE se implementa en una arquitectura de procesador diferente.  En el pr√≥ximo art√≠culo se describir√° m√°s informaci√≥n sobre la migraci√≥n de Nucleus SE. <br><br>  <b>Escalabilidad</b> <br><br>  Como todos los RTOS modernos, Nucleus SE es escalable.  Para asegurarse de que solo se incluyan componentes RTOS usados, todas las funciones API se presentan en forma de biblioteca.  Por lo tanto, durante el enlace, las funciones a las que se hace referencia se extraen y se incluyen en la imagen final de la aplicaci√≥n.  Nucleus RTOS utiliza este enfoque tanto para el n√∫cleo como para todos los dem√°s componentes del sistema operativo.  Nucleus SE utiliza una t√©cnica diferente. <br><br>  En lugar de confiar en la biblioteca en la caja de herramientas seleccionada, todos los archivos fuente en la distribuci√≥n de Nucleus SE contienen directivas de compilaci√≥n condicional.  Para configurar Nucleus SE para el programa, el desarrollador necesita instalar varios caracteres #define (m√°s sobre esto en el pr√≥ximo art√≠culo).  Esto determina qu√© funciones de API se compilan y, por lo tanto, se incluyen en el programa. <br><br>  Nucleus SE mejora este enfoque al ofrecer un objeto que yo llamo "escalabilidad extrema".  Varios aspectos de la funcionalidad del n√∫cleo pueden activarse y desactivarse, o configurarse de otras formas utilizando caracteres #definidos similares.  Por lo tanto, el desarrollador tiene un punto de control sobre el uso de la memoria. <br><br>  <b>Cual API?</b> <br><br>  Nucleus SE tiene su propia API, que se describir√° en detalle en futuros art√≠culos.  Para muchos usuarios, basta con incluir estas llamadas a las funciones API en el c√≥digo. <br><br>  Algunos usuarios pueden preferir usar una API diferente: est√°ndar o con la que est√©n familiarizados.  La API de Nucleus SE es bastante flexible y le permite crear un contenedor que transforma una interfaz a otra API. <br><br>  Uno de los objetivos principales del desarrollo de Nucleus SE es un alto grado de compatibilidad a nivel de usuario con Nucleus RTOS.  Aunque las API son diferentes, est√°n dise√±adas para ser f√°ciles de combinar.  Habr√° un contenedor disponible para facilitar el uso de la API Nucleus RTOS en Nucleus SE. <br><br>  En el pr√≥ximo art√≠culo, continuaremos revisando Nucleus SE y nos centraremos en la estructura interna y la implementaci√≥n de RTOS. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es418601/">https://habr.com/ru/post/es418601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es418589/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 324 (23-29 de julio de 2018)</a></li>
<li><a href="../es418591/index.html">Bug Bounty Kyivstar: recompensa por acceso de administrador a Jira, AWS, Apple, Google Developer, servicios de Bitbucket - $ 50</a></li>
<li><a href="../es418593/index.html">No todos los auriculares inal√°mbricos son igualmente √∫tiles o algunas palabras sobre el problema del c√≥dec</a></li>
<li><a href="../es418597/index.html">Funciones para documentar bases de datos PostgreSQL. Parte tres</a></li>
<li><a href="../es418599/index.html">5 fuentes de datos que convierten los datos APM en an√°lisis de rendimiento de aplicaciones</a></li>
<li><a href="../es418603/index.html">Reloj inteligente Matrix PowerWatch que nunca necesita ser cargado</a></li>
<li><a href="../es418605/index.html">Analistas: la capitalizaci√≥n de Microsoft podr√≠a llegar a $ 1 bill√≥n</a></li>
<li><a href="../es418607/index.html">Elegir un proveedor de Wi-Fi corporativo</a></li>
<li><a href="../es418609/index.html">120 kW de energ√≠a de reserva o C√≥mo alimentar el estado de la energ√≠a del sol</a></li>
<li><a href="../es418611/index.html">C√°lculo de la pizzer√≠a: Papa Jones, a quien no le importa la seguridad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>