<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎁 👞 🆕 Android Jetpack构成第一印象 🌲 👌🏾 💰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在Google IO 2019上看到有关Android Jetpack Compose的话题后，我想立即尝试一下。 而且，其中实现的方法使我非常想起Flutter，这让我很感兴趣 。 





 Compose库本身处于pre-alpha阶段，因此没有多少可用的文档和文章。 接下来，我将依靠我设法...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Android Jetpack构成第一印象</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461101/"><p> 在Google IO 2019上看到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有关Android Jetpack Compose</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">话题</a>后，我想立即尝试一下。 而且，其中实现的方法<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使我</a>非常想起<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Flutter，这让我很感兴趣</a> 。 </p><br><p><img src="https://habrastorage.org/webt/i1/-6/fz/i1-6fzjfxbzx-ajpwg-5y7ey7cq.png"></p><a name="habracut"></a><br><p>  Compose库本身处于pre-alpha阶段，因此没有多少可用的文档和文章。 接下来，我将依靠我设法找到的几种资源以及<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">开源库</a> 。 </p><br><p> 这些资源是： </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Android开发人员后台：第115集：Jetpack撰写</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">由第一原则组成</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">深入Jetpack撰写</a> </li></ul><br><h1 id="chto-takoe-android-jetpack-compose"> 什么是Android Jetpack Compose？ </h1><br><p> 以前，整个Android UI都基于View类。 自Android早期以来就是这种情况。 在这方面，已经积累了许多遗留和体系结构缺陷，可以改善这些缺陷。 但是要做到这一点非常困难，而又不破坏所有基于其编写的代码。 </p><br><p> 在过去的几年中，客户端应用程序世界中出现了许多新概念（包括Frontend趋势），因此Google团队采取了激进的道路，并从头重写了Android中的整个UI级别。 于是出现了Android Jetpack Compose库，其中包括React，Litho，Vue，Flutter等许多概念性技巧。 </p><br><p> 让我们看一下现有UI的一些功能，并将其与Compose进行比较。 </p><br><h3 id="1--nezavisimost-ot-relizov-android">  1.独立于Android版本 </h3><br><p> 现有的UI与平台密切相关。 当Material Design的第一个组件出现时，它们仅适用于Android 5（API21）及更高版本。 要在较旧版本的系统上工作，必须使用支持库。 </p><br><p>  Compose是Jetpack的一部分，它使它独立于系统版本，甚至可以在较旧的Android版本中使用（至少与API21配合使用）。 </p><br><h3 id="2-ves-api-na-kotlin">  2.整个Kotlin API </h3><br><p> 以前，您必须处理不同的文件才能创建UI。 我们以xml描述了标记，然后使用Java / Kotlin代码使其工作。 然后，我们返回到其他xml文件以设置主题，动画，导航等。甚至尝试用xml编写代码（数据绑定）。 </p><br><p> 使用Kotlin允许您直接用代码而不是xml编写声明式的UI。 </p><br><h3 id="3-composable--kompozitnyy-ispolzovanie-kompozicii-vmesto-nasledovaniya">  3. Composable = Composite：使用合成代替继承 </h3><br><p> 创建自定义UI元素可能很麻烦。 我们需要从View或其后代继承，并照顾好许多重要的属性，然后才能正确启动它。 例如，TextView类包含大约3万行Java代码。 这是由于这样的事实，它内部包含许多不必要的逻辑，这些逻辑由后代元素继承。 </p><br><p> 另一方面，Compose出现了，用组合代替了继承。 </p><br><p> <code>Padding</code>最适合说明其含义： </p><br><p> 在现有的UI中，为了呈现缩进<code>30dp</code>的<code>TextView</code> ： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="图片" width="500"></div><br><p> 我们需要编写以下代码： </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p> 这意味着在TextView.java或其超类内部的某个位置，存在知道如何计算和绘制缩进量的逻辑。 </p><br><p> 让我们看看如何在Compose中执行相同的操作： </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// note: the cyan background color is omitted for now to keep it simple Padding(30.dp) { Text("Drag or tap on the seek bar") }</span></span></code> </pre> <br><p>  <strong>变化</strong> <br>  <code>TextView</code>变成了<code>Text()</code> 。  <code>android:padding</code>属性已变成<code>Padding</code> <code>Text</code>的<code>Padding</code> 。 </p><br><p>  <strong>好处</strong> <br> 因此， <code>Text</code>仅负责呈现文本本身。 他不知道如何计算缩进量。 另一方面，填充仅负责填充，仅此而已。 它可以在任何其他元素周围使用。 </p><br><h3 id="4-odnonapravlennyy-potok-dannyh">  4.单向数据流 </h3><br><p> 如果我们谈论例如在现有UI系统中控制<code>CheckBox</code>的状态，则单向数据流是一个重要的概念。 当用户点击<code>CheckBox</code> ，其状态变为<code>checked = true</code> ：该类更新View状态并从监视状态变化的代码中调用回调。 </p><br><p> 然后，在代码本身中，例如在<code>ViewModel</code> ，您需要更新相应的<code>state</code>变量。 现在，您有两个按下状态的副本，这可能会造成问题。 例如，更改<code>ViewModel</code>内部<code>state</code>变量的值将导致<code>CheckBox</code>更新，这可能以无休止的循环结束。 为了避免这种情况，我们将不得不提出某种拐杖。 </p><br><p> 由于基于单点原则，因此使用Compose将有助于解决这些问题。 状态更改将在框架内处理：我们只向内提供数据模型。 此外，Compose中的组件现在不会自行更改其状态。 相反，它仅调用回调，而现在是更改UI的应用程序任务。 </p><br><h3 id="5-uluchshenie-otladki">  5.改善调试 </h3><br><p> 由于整个UI现在都是用Kotlin编写的，因此您现在可以调试UI。 我自己没有尝试过此操作，但是在播客中，他们说调试器和断点在Compose中有效。 </p><br><h1 id="hvatit-slov-pokazhite-kod"> 足够的单词，显示代码 </h1><br><p> 我知道，我想快速查看代码中的UI外观（扰流板：如果您尝试在Flutter上编写，则非常类似于Flutter）。 </p><br><p> 我们将从创建一些简单的<code>View</code> ，然后比较它们在现有UI和Compose中的外观。 </p><br><h3 id="1-framelayout-vs-wrap--padding--background">  1. <code>FrameLayout</code>与<code>Wrap + Padding + Background</code> </h3><br><p> 我们重用上面的示例，并尝试使此<code>TextView</code>缩进为<code>30dp</code>并带有青绿色背景： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="缩进为30dp和引入背景的“ TextView”" width="500"></div><br><p> 现有的用户界面： </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">--------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AND</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p> 现在看一下在Compose中执行相同操作的代码： </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Wrap { Padding(<span class="hljs-number"><span class="hljs-number">30</span></span>.dp) { DrawRectangle(color = Color.Cyan) Text(<span class="hljs-string"><span class="hljs-string">"Drag or tap on the seek bar"</span></span>) } } }</code> </pre> <br><p> 这里有一些新东西。 由于<code>Text</code>只知道渲染文本，因此不关心填充和背景。 因此，要添加它们，我们需要使用三个单独的函数： </p><br><ul><li>  <code>DrawRectangle</code>背景 </li><li>  <code>Padding</code>缩进 </li><li>  <code>Wrap</code>是覆盖诸如<code>FrameLayout</code>参数的函数。 </li></ul><br><p> 很简单 但这与我们都习惯的现有UI系统略有不同。 </p><br><h3 id="2-vertikalnyy-linearlayout-vs-column">  2.垂直<code>LinearLayout</code>与<code>Column</code> </h3><br><p> 现在，让我们尝试做一些等效于我们旧的<code>LinearLayout</code> 。 <br> 要将两个元素放在另一个元素的下面，如下图所示，我们可以使用<code>Column</code> ： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/32c/9e9/29e/32c9e929e70b2f811aad977075a79e87.png" alt="两个要素一个接一个" width="500"></div><br><p> 该代码将如下所示： </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) Button(text = <span class="hljs-string"><span class="hljs-string">"Next"</span></span>) } }</code> </pre> <br><p> 嵌套在<code>Column</code>元素中的元素将垂直位于另一个元素的下方。 </p><br><h3 id="2a-otstupy">  2a。 压痕 </h3><br><p> 您可能已经注意到文本和按钮离边缘太近了。 因此，添加<code>Padding</code> 。 </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">//   Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text("Click the button below: ") Button(text = "Next") } } }</span></span></code> </pre> <br><p> 看起来更好： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d1/d83/053/4d1d83053a411a9858b0feedab75de4a.png" alt="两个元素缩进一个在另一个之下" width="500"></div><br><h3 id="2b-intervaly">  2b。 间隔 </h3><br><p> 我们还可以在<code>Text</code>和<code>Button</code>之间添加一些缩进： </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) <span class="hljs-comment"><span class="hljs-comment">//    Button(text = "Next") } } }</span></span></code> </pre> <br><p> 现在我们的屏幕是什么样的： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2be/3d8/709/2be3d8709c5f83c72f15ab9b450e0ba6.png" alt="缩进和倾斜的两个元素，一个在另一个下面" width="500"></div><br><h3 id="2c-gorizontalnyy-linearlayout-vs-row">  2c。 水平<code>LinearLayout</code>与<code>Row</code> </h3><br><p> 将第二个按钮放在第一个按钮旁边： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/351/842/b31/351842b31ea3fd8ec51a7585ea8efcad.png" alt="添加了第二个按钮" width="500"></div><br><p> 代码如下： </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) Row { <span class="hljs-comment"><span class="hljs-comment">//   Button(text = "Back") //   WidthSpacer(10.dp) //    Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  <code>Row</code>两个按钮将为水平。  <code>WidthSpacer</code>会增加它们之间的距离。 </p><br><h3 id="2d-gravity-vs-alignment">  2d。  <code>Gravity</code>与<code>Alignment</code> </h3><br><p> 就像在当前用户界面中的<code>gravity</code>一样，将元素对准中心。 为了显示差异，我将旧行注释掉并用新行替换： </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">// Column(crossAxisAlignment = CrossAxisAlignment.Start) { Column(crossAxisAlignment = CrossAxisAlignment.Center) { //  Text("Click the button below: ") HeightSpacer(10.dp) // Row { Row(mainAxisSize = FlexSize.Min) { //    Button(text = "Back") WidthSpacer(10.dp) Button(text = "Next") } } } }</span></span></code> </pre> <br><p> 我们将成功： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/346/e5c/ad7/346e5cad7f27352c91076001d2bf5cf0.png" alt="中央对齐" width="500"></div><br><p> 使用<code>crossAxisAlignment = CrossAxisAlignment.Center</code>嵌套元素将水平居中。 我们还应该将<code>Row</code>参数设置为<code>mainAxisSize = FlexSize.Min</code> ，其行为与<code>layout_width = wrap_content</code>相似，因此由于默认的<code>mainAxisSize = FlexSize.Max</code> ，它不会在屏幕上<code>mainAxisSize = FlexSize.Max</code> ，其行为类似于<code>layout_width = match_parent</code> 。 </p><br><h3 id="2d-zamechanie">  2d。 备注 </h3><br><p> 从上面的示例中我们可以看到，所有元素都是由单独的函数构成的： <code>padding</code>是单独的函数， <code>spacer</code>是单独的函数，而不是<code>Text</code> ， <code>Button</code>或<code>Column</code>内部的属性。 </p><br><p> 诸如<code>RecyclerView</code>或<code>ConstraintLayout</code>类的更复杂的元素正在开发中：因此，我无法在演示源中找到有关它们的示例。 </p><br><h3 id="3stili-i-temy">  3.样式和主题 </h3><br><p> 您可能已经注意到，默认情况下，上面的按钮是紫色的。 这是因为它们使用默认样式。 让我们看看样式如何在Compose中工作。 </p><br><p> 在上面的示例中， <code>FormDemo</code>带有<code>@Composable</code>注释。 现在，我将展示如何在<code>Activity</code>使用此元素： </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ MaterialTheme { FormDemo() } } } }</code> </pre> <br><p> 代替<code>setContentView()</code>函数，我们使用<code>setContent()</code> ，它是<code>Compose.kt</code>库中的扩展函数。 </p><br><p>  <code>CraneWrapper</code>包含Compose树，并提供对<code>Context</code> ， <code>Density</code> ， <code>FocusManager</code>和<code>TextInputService</code> 。 </p><br><p>  <code>MaterialTheme</code>允许您自定义元素的主题。 </p><br><p> 例如，可以将主题的原色更改为棕色，如下所示： </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ <span class="hljs-comment"><span class="hljs-comment">// MaterialTheme { MaterialTheme(colors = MaterialColors(primary = Color.Maroon)) { FormDemo() } } } }</span></span></code> </pre> <br><p> 现在，我们的屏幕将如下所示： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f1/783/c01/8f1783c0159c45c314c05724969d7000.png" alt="栗色为原色" width="500"></div><br><p> 可以更改的其他颜色和字体： <a href="">MaterialTheme.kt＃57</a> </p><br><p>  Rally Activity提供了一个很好的示例，可以如何自定义主题： <a href="">RallyTheme.kt的源代码</a> </p><br><h1 id="chto-posmotretpochitat"> 看什么/读什么 </h1><br><p> 如果需要更多，可以根据<a href="">此处</a>的<a href="">说明</a>组装示例项目。 </p><br><p> 正如Windows用户所写的那样，现在没有启动Compose的正式方法，但是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">kotlinlang Slack提供了</a>一个非官方的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">指南</a> 。 </p><br><p> 可以在<code>#compose</code> kotlinlang Slack频道中向开发人员询问有关Compose的问题。 </p><br><p> 在评论中保留其他链接-最有用的链接将在此处添加。 </p><br><h1 id="vyvody"> 结论 </h1><br><p> 该库的开发如火如荼，因此此处显示的任何接口均可能发生变化。 您还可以在源代码中学习很多东西，例如<code>@Model</code>和单向数据流（单向数据流）。 也许这是以后文章的主题。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461101/">https://habr.com/ru/post/zh-CN461101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461087/index.html">为我的游戏生成地牢和洞穴</a></li>
<li><a href="../zh-CN461091/index.html">LED天花灯</a></li>
<li><a href="../zh-CN461093/index.html">OpenStreetMap第469号世界新闻（07/09/2019-07/07/2019）</a></li>
<li><a href="../zh-CN461095/index.html">Apollo指导计算机-体系结构和系统软件。 第一部分</a></li>
<li><a href="../zh-CN461099/index.html">游戏空中攻击！ -我们的第一个VR开发经验</a></li>
<li><a href="../zh-CN461105/index.html">5个有用的Webpack插件</a></li>
<li><a href="../zh-CN461107/index.html">Seryozha的剂量计。 第二部分 百年纪念管vs和平原子</a></li>
<li><a href="../zh-CN461113/index.html">在生产中的微控制器项目中使用C ++的五年</a></li>
<li><a href="../zh-CN461121/index.html">微控制器中的小型多任务实验</a></li>
<li><a href="../zh-CN461125/index.html">在Visual Studio的源代码中创建顺序编号代码以对消息编号的任务（例如C＃）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>