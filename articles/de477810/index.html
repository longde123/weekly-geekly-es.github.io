<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧘 🧝🏿 🤚🏾 Wir machen einen Router und NAS auf einem Prozessor 👆🏾 😓 🏐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel hat eine Fortsetzung . 


 Ich habe nur wenige Jahre nach dem Kauf eines Computers einen „Heimserver“ unter Linux erhalten. Von diesem ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir machen einen Router und NAS auf einem Prozessor</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477810/"><p>  Dieser Artikel hat eine <a href="https://habr.com/ru/post/478924/">Fortsetzung</a> . </p><br><p>  Ich habe nur wenige Jahre nach dem Kauf eines Computers einen „Heimserver“ unter Linux erhalten.  Von diesem Moment an sind nun mehr als fünfzehn Jahre vergangen und die meiste Zeit hatte ich eine Art zweiten zusätzlichen Computer zu Hause.  Einmal, als es Zeit für ein Update wurde, dachte ich: Warum brauche ich einen separaten Router, wenn ich bereits einen freien Computer habe?  Immerhin war es für viele lange Zeit eine Standardkonfiguration. </p><br><p>  Tatsächlich: Heute kann man dafür eine separate virtuelle Maschine bekommen, dort eine USB- oder PCI-WLAN-Karte weiterleiten.  Und als Betriebssystem können Sie MikroTik RouterOS auf einen Schlag verwenden und Software für Unternehmen für wenig Geld erwerben. </p><a name="habracut"></a><br><h3 id="vstuplenie">  Eintrag </h3><br><p>  Ich werde meine Ziele zu der Zeit umreißen, als ich gerade mit dem Projekt angefangen habe: </p><br><ol><li>  Die Baugruppe sollte aus den gängigsten Standardkomponenten bestehen.  Dies bedeutet, dass es keine Motherboards mit anderen Größen als mATX / mini-ITX und Low Cases gibt, in die Karten in voller Größe nicht passen </li><li>  Es sollte viel Speicherplatz vorhanden sein, die Körbe selbst sind jedoch kleiner als 2,5 Zoll. </li><li>  Modularität sollte nach einer Weile zu Einsparungen führen - schließlich kann die WLAN-Karte des alten Standards 5 einfach gegen 7 ausgetauscht werden </li><li>  Unterstützung für mindestens einige Fernbedienungen, damit Sie verstehen, warum das System nicht aufsteigt, ohne den Monitor und die Tastatur physisch mit etwas zu verbinden, das hoch und fern steht </li><li>  Volle Freiheit bei der Auswahl eines Betriebssystems und deren Unterstützung für alle kritischen Komponenten in jedem Betriebssystem </li><li>  Hohe leistung.  Es ist müde, darauf zu warten, dass Deluge .torrent in mehreren tausend Dateien „lebt“ oder die Verschlüsselung aktiviert ist, und es führt zu einem Geschwindigkeitsverlust unter Festplatten oder Netzwerkverbindungen. </li><li>  Visuelle Schönheit und Genauigkeit der Montage </li><li>  Höchste Kompaktheit.  Die ideale Größe ist eine moderne Spielekonsole. </li></ol><br><p>  Ich warne Sie sofort, wenn Sie glauben, dass ich Ihnen im folgenden Artikel erläutere, wie Sie alle Punkte vervollständigen können, dass Sie sehr naiv sind und besser Synology oder einen Platz in der Cloud kaufen. <br>  Tatsächlich sehe ich in einer solchen Entscheidung nichts Unrealistisches, nur dass ich das gesamte Angebot wahrscheinlich nicht gut genug studiert habe und vielleicht, weil der Markt für selbst zusammengebaute NAS seit langem rückläufig ist und Komponenten für diesen Zweck immer kleiner und billiger werden. </p><br><h3 id="nemnogo-o-softe">  Ein bisschen über Software </h3><br><p>  Kürzlich war ich so faul, dass ich KVM nicht einmal selbst konfigurieren wollte. Deshalb habe ich mich entschlossen, zu sehen, was unRAID ist. LinusTechTips bewarb dies als praktische Benutzeroberfläche für die Konfiguration von KVM und als gute Software für NAS im Allgemeinen.  Da ich zu faul war, um mit mdadm herumzustöbern, hat unRAID zwei Fliegen mit einer Klappe geschlagen. </p><br><h3 id="sborka">  Versammlung </h3><br><h4 id="korpus">  Wohnen </h4><br><p>  Dann kam überraschenderweise der schwierigste Teil der Montage eines provisorischen NAS auf Standardkomponenten: die Auswahl eines Gehäuses!  Wie gesagt, die Zeiten, in denen der Koffer mit der Tür, hinter der sich Körbe mit Scheiben befinden, längst vorbei sind.  Und ich wollte unbedingt 2,5-Zoll-Seagate-Laufwerke (2,5 Zoll) als Festplatten verwenden (zum Zeitpunkt des Schreibens beträgt die maximale Kapazität 5 TB).  Sie schweigen und brauchen wenig Platz.  Während 5 TB für mich ausreichten. </p><br><p>  Offensichtlich wollte das Motherboard miniITX, da anscheinend ein Erweiterungssteckplatz ausreichte. </p><br><p>  Es stellte sich heraus, dass es kompakte Taschen gibt, die die Größe eines Netbooks haben, aber es gibt nur einen Platz für 2,5 und die "anderen" Fälle, in denen es bereits einige 3,5 der entsprechenden Größe gibt.  Die Mitte existiert einfach nicht.  Auch für das Geld.  Es gab etwas an Ali, aber es wurde eingestellt (IMMER Ali auf der Suche nach ungewöhnlichen Dingen überprüfen, manchmal haben die Chinesen bereits alles erfunden und es in Massenproduktion gebracht).  In einem kleinen Forum habe ich über SilverStone CS01B-HS gelesen, aber der Preis passte überhaupt nicht in die Budgetkategorie.  Müde von der Suche bestellte ich es bei Amazon über Shipito, was den dritten Punkt der technischen Aufgabe völlig verfehlte. </p><br><p>  Aber jetzt können Sie sich überhaupt nicht um das Budget kümmern! </p><br><p>  Ich rate Ihnen, umgehend ein 3D-Modell Ihres Dream-Gehäuses zu erstellen und es auf einer echten Aluminium-CNC-Maschine einzuschalten.  Es wird etwas teurer sein als Silverstone, aber tausendmal angenehmer.  Teile es einfach später auf dem Github! </p><br><h4 id="processor">  CPU </h4><br><p>  Natürlich wollte ich AMD als Prozessor nehmen, 2019 steht auf dem Hof, nur wer sich nicht tief mit shtud auseinandersetzt.  Bei dem Versuch, Punkt 4 „Unterstützung für die Fernsteuerung“ zu erfüllen, finde ich jedoch nur AMD Ryzen DASH und verstehe, dass Sie sich in diesem Fall für Intel entscheiden müssen. </p><br><p>  Weiterhin ist alles wie immer: Yandex.Markt, Filter, einfaches googeln für Kinderprobleme und Lieferung morgen im MKAD kostenlos. </p><br><h4 id="matplata">  Hauptplatine </h4><br><p>  Tatsächlich haben Sie bei den Motherboards die Wahl zwischen einem - dem Gigabyte GA-Q170TN. </p><br><p>  Ich habe keine Ahnung, warum der Erweiterungssteckplatz nur x4 ist, aber wenn Sie in Zukunft eine 10-Gigabyte-Netzwerkkarte dort unterbringen möchten, ist genügend Speicher verfügbar (Sie können jedoch keinen Speicher anschließen, der eine solche Leistung bietet). </p><br><p>  Von den großen Pluspunkten: zwei miniPCI-E-Slots.  MikroTik veröffentlicht alle seine WLAN-Karten (und wir brauchen sie, da sie nur in RouterOS unterstützt werden) im miniPCI-E-Format und werden sie höchstwahrscheinlich noch viele Jahre veröffentlichen, da dies der Hauptstandard für Erweiterungskarten ist.  Sie können zum Beispiel das <a href="https://mikrotik.com/product/r11e_lora8" rel="nofollow">LoRaWAN-</a> Modul kaufen und auf einfache Weise Unterstützung für Geräte mit LoRa erhalten. </p><br><p>  Zwei Ethernet, aber 1 Gbit / s.  2017 legte ich ein Gesetz vor, das den Verkauf von Motherboards mit Ethernet-Geschwindigkeiten von bis zu 4 Gbit / s verbietet, es gelang mir jedoch nicht, die erforderliche Anzahl von Signaturen für den Durchgang des Stadtfilters zu sammeln. </p><br><h4 id="diski">  Festplatten </h4><br><p>  Wir nehmen zwei STDR5000200 als Festplatten.  Aus irgendeinem Grund kosten sie weniger als die ST5000LM000, die es tatsächlich gibt.  Nach dem Kauf überprüfen, zerlegen, beziehen wir den ST5000LM000 und verbinden ihn über SATA.  Im Garantiefall holen Sie es ab, geben es ab und erhalten eine neue CD im Austausch (ich scherze nicht, ich habe es getan). </p><br><p>  Ich habe die NVMe-SSD möglicherweise in Zukunft nicht verwendet, falls erforderlich. </p><br><p>  Intel hat in seinen besten Traditionen einen Rake ausgelegt: Es gibt nicht genügend Support auf dem Motherboard, der Prozessor benötigt auch vPro-Support, und Sie werden es leid sein, nach einer Kompatibilitätstabelle zu suchen.  Durch ein Wunder fand ich heraus, dass ich mindestens i5-7500 benötige.  Da das Budget aber nicht mehr begrenzt war, versöhnte ich mich. </p><br><p>  Ich sehe nichts Interessantes in den restlichen Komponenten, sie können durch alle Analoga ersetzt werden. Daher ist hier eine allgemeine Tabelle mit Preisen zum Zeitpunkt des Kaufs: </p><br><div class="scrollable-table"><table><thead><tr><th>  Name </th><th>  Menge </th><th>  Preis </th><th>  Kosten </th></tr></thead><tbody><tr><td>  Crucial DDR4 SO-DIMM 2400 MHz PC4-19200 CL17 - 4 Gbit CT4G4SFS624A </td><td>  2 </td><td>  1 259 </td><td>  2,518 </td></tr><tr><td>  Seagate STDR5000200 </td><td>  2 </td><td>  8 330 </td><td>  16 660 </td></tr><tr><td>  SilverStone CS01B-HS </td><td>  1 </td><td>  159 USD + 17 USD (Versand von Amazon) + 80 USD (Versand nach Russland) = 256 USD </td><td>  16,830 </td></tr><tr><td>  Controller PCI-E Espada FG-EST14A-1-BU01 </td><td>  1 </td><td>  2 850 </td><td>  2 850 </td></tr><tr><td>  Netzteil SFX 300 W Sei leise SFX POWER 2 BN226 </td><td>  1 </td><td>  4160 </td><td>  4160 </td></tr><tr><td>  Kingston SSD 240 GB SUV500MS / 240G {mSATA} </td><td>  1 </td><td>  2,770 </td><td>  2,770 </td></tr><tr><td>  Intel Core i5-7500 </td><td>  1 </td><td>  10.000 </td><td>  10.000 </td></tr><tr><td>  GIGABYTE GA-Q170TN </td><td>  1 </td><td>  9 720 </td><td>  9 720 </td></tr><tr><td>  MikroTik R11e-5HacT </td><td>  1 </td><td>  3,588 </td><td>  3,588 </td></tr><tr><td>  Antennen </td><td>  3 </td><td>  358 </td><td>  1,074 </td></tr><tr><td>  RouterOS Level 4 Lizenz </td><td>  1 </td><td>  45 US-Dollar </td><td>  2 925 </td></tr><tr><td>  UnRAID-Basislizenz </td><td>  1 </td><td>  59 US-Dollar </td><td>  3 835 </td></tr></tbody></table></div><br><p>  Insgesamt 66 930 Rubel.  Punkt drei über den wirtschaftlichen Teil des Problems ist erschüttert, aber die Vorstellung, dass dieses Eisen in zehn Jahren noch in der Lage sein wird, die zugewiesene Aufgabe zu erfüllen, wärmt die Seele. </p><br><p>  Das Einrichten der Software war ganz einfach, gut, er hat es: 95% können an einem Abend mit der Maus angeklickt werden.  Ich kann dies in einem separaten Artikel beschreiben, wenn es interessant ist, da nicht alles perfekt war, aber es gab keine unlösbaren Nicht-Google-Probleme.  Beispielsweise war es nicht so einfach, verkabelte Ethernet-Adapter in RouterOS zu entfernen, da die Liste der unterstützten Geräte eher knapp ist. </p><br><h3 id="vyvody-posle-prohozhdeniya-granicy-v-sto-dney-uptime">  Schlussfolgerungen nach dem Überschreiten der Grenze von hundert Tagen Betriebszeit </h3><br><ol><li>  vPro wird für diesen Zweck nicht benötigt.  Dies reduziert die Auswahl an Motherboards und Prozessoren erheblich. Für den Heimgebrauch benötigen Sie ein drahtloses HDMI-Verlängerungskabel und eine drahtlose Tastatur.  In extremen Fällen (der Server befindet sich im Keller unter einer Stahlbetonplatte) - Verwenden Sie ein Twisted-Pair-Verlängerungskabel. </li><li>  10 Gigabit wurden gestern benötigt.  Die durchschnittliche Festplatte aus den 2010er Jahren liest schneller als 120 Megabyte pro Sekunde, wofür ein Gigabit-Netzwerk nicht ausreicht.  Und wir werden den SSD-Cache ablegen, für den 1,25 GB / s eine Einschränkung darstellen können. </li><li>  Das Korps verschlang ein Viertel des Budgets.  Das ist inakzeptabel. </li><li>  Schneller Prozessor in NAS / Router - mehr benötigt, als es anfangs schien </li><li>  unRAID ist wirklich gute Software, es gibt alles, was benötigt wird, und es gibt nichts, was nicht benötigt wird.  Sie bezahlen einmalig, wenn Sie mehr Festplatten benötigen - sie fragen nur nach dem Unterschied in den Lizenzkosten. </li></ol><br><p>  Mein früherer Zufallsgenerator gab ungefähr 20 Megabit mit aktivierter VPN-Tunnelverschlüsselung aus.  Jetzt reicht nur noch ein Core i5-7500, um Gigabits auszugeben. </p><br><img src="https://habrastorage.org/webt/m1/i-/kb/m1i-kbxxfxmtko2p9bec5neooaq.png"><br><h3 id="ps">  PS </h3><br><p>  Ich freue mich sehr, wenn Sie bis zum Ende gelesen haben und es für Sie interessant war!  Bitte stellen Sie Fragen, wenn etwas unklar bleibt.  Ich hätte es völlig vergessen können. </p><br><p>  Ich werde umgehend das Offensichtliche beantworten: </p><br><p>  <strong>- Warum all das können Sie nur Synology kaufen?</strong> <br>  "Ja, und ich rate Ihnen, dies zu tun."  Es ist einfacher, schneller, billiger und zuverlässiger.  Ein Artikel für Enthusiasten, die wissen, warum sie zusätzliche Funktionen benötigen. </p><br><p>  <strong>- Warum nicht FreeNAS, gibt es alles, was in unRAID enthalten ist, aber kostenlos?</strong> <br>  - Leider ist Open Source schon ganz anders.  FreeNAS wird von genau denselben Lohnprogrammierern geschrieben.  Und wenn Sie ihre Arbeit kostenlos bekommen, dann sind Sie das Endprodukt.  Oder sie werden bald aufhören, den Investor zu bezahlen. </p><br><p>  <strong>- Sie können alles unter reinem Linux machen und mehr sparen!</strong> <br>  Ja  Einmal habe ich es getan.  Aber warum?  Die Einrichtung eines Netzwerks unter Linux war für mich immer ein Problem.  Lassen Sie das Computer Hausmeister bleiben.  Und RouterOS löst diese Art von Problemen vollständig.  Das Gleiche gilt für MD RAID: Trotz der Tatsache, dass Sie mit mdadm keine dummen Fehler machen können, habe ich immer noch die Daten verloren.  Und unRAID lässt Sie einfach nicht den falschen Knopf drücken.  Auch hier sollten Sie Ihre Zeit nicht damit verschwenden, das Repository manuell zu konfigurieren. </p><br><p>  <strong>- Aber Sie haben immer noch das übliche Ubuntu in einer virtuellen Maschine installiert!</strong> <br>  - Aus diesem Grund wurde alles begonnen.  Jetzt haben Sie Ihr persönliches AWS mit der maximalen Geschwindigkeit, mit der Sie gleichzeitig eine Verbindung zu Ihrem Speicher, Ihrem Heimnetzwerk und dem Internet herstellen können, die Ihnen niemand bieten kann.  Und welche Dienste in dieser virtuellen Maschine ausgeführt werden, liegt bei Ihnen. </p><br><p>  <strong>- Bei Problemen im Haus gibt es sofort kein WLAN, kein Internet, keinen Speicher.</strong> <br>  - Ein Ersatz-Router liegt für 1.000 Rubel, und nichts wird von den Laufwerken gehen.  Abgesehen von Festplatten und Kühlern war die ganze Zeit nichts kaputt.  Sogar ein normaler Nettop hat fast zehn Jahre lang rund um die Uhr gearbeitet und fühlt sich jetzt großartig an.  Überlebte zwei Scheiben. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de477810/">https://habr.com/ru/post/de477810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de477790/index.html">Wie das Galileo-Satellitensystem aufgrund organisatorischer Verwirrung und anderer Probleme getrennt wurde</a></li>
<li><a href="../de477792/index.html">Wann Sie gewinnen können, ist Ihr Profil</a></li>
<li><a href="../de477800/index.html">Höhepunkte aus dem Chrome Web Dev Summit 2019 Web Development Forum</a></li>
<li><a href="../de477804/index.html">Der Weg zur natürlichen Intelligenz</a></li>
<li><a href="../de477808/index.html">Lästige Warnungen beim Betreten des Terminalservers werden beseitigt</a></li>
<li><a href="../de477812/index.html">Überprüfung der russischen Gesetzgebung zum Schutz kritischer Informationsinfrastrukturen</a></li>
<li><a href="../de477814/index.html">Gibt es Viren unter Mac?</a></li>
<li><a href="../de477816/index.html">So finden Sie einen Job mit einem guten Vertrag</a></li>
<li><a href="../de477820/index.html">VMware, Hyper-V, OpenStack, Kubernetes, Swarm - Überwachung über eine einzige Oberfläche in Quest Foglight</a></li>
<li><a href="../de477822/index.html">PHP 7.4 veröffentlicht! Wie Badoo Upgrades</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>