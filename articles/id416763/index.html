<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛁 🤴🏽 👩🏿‍🏭 Ensemble Chef Wayang: Bandingkan Ansible, SaltStack, Chef, dan Wayang 🚾 👩🏿‍🍳 🖐🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari ini kita akan berbicara tentang apa itu SCM dan menceritakan beberapa kisah melalui prisma yang akan kita pertimbangkan Ansible, SaltStack, Chef ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ensemble Chef Wayang: Bandingkan Ansible, SaltStack, Chef, dan Wayang</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/416763/">  Hari ini kita akan berbicara tentang apa itu SCM dan menceritakan beberapa kisah melalui prisma yang akan kita pertimbangkan Ansible, SaltStack, Chef and Puppet, memilih opsi terbaik untuk tugas tertentu. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/3xA2SggKQKo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Materi ini didasarkan pada transkrip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">laporan oleh Andrei Filatov</a> , insinyur sistem utama di EPAM Systems, dari konferensi Oktober DevOops 2017 kami. <br><a name="habracut"></a><br><h2>  Apa itu SCM dan apa yang dimakannya? </h2><br><img src="https://habrastorage.org/webt/hc/qk/qz/hcqkqz63ox1qwcu5qrfc08hkg7o.jpeg"><br><br>  Apa itu SCM?  Pertama-tama, itu adalah hal yang memungkinkan infrastruktur kami dari keadaan A untuk mengeksekusi negara B dengan mengeksekusi beberapa kode. Banyak pengembang yang bukan insinyur DevOps dalam praktik berpikir bahwa ada sesuatu yang terjadi dengan cara "otomatis". pada infrastruktur. <br><br>  Metode "otomatis" mengimplementasikan kami SCM (System Configuration Management).  Untuk apa ini?  Terutama untuk membangun infrastruktur yang berulang dan konsisten.  SCM memperluas proses CI / CD dengan baik.  Karena ini adalah kode, ini dapat disimpan dalam sistem kontrol versi apa pun: Git, Mercurial.  Cukup sederhana untuk dikembangkan dan dipelihara. <br><br>  Final adalah siklus otomatisasi tertutup: semuanya dapat dilakukan secara otomatis, mulai dari membuat infrastruktur hingga menggunakannya dan menggunakan kode. <br><br><h2>  Apa itu SCM: Ansible </h2><br><img src="https://habrastorage.org/webt/w8/kg/5z/w8kg5z-9n6uy-eva2x5ofgeiuig.jpeg"><br><br>  Pertimbangkan pelamar kami.  Yang pertama adalah Ansible.  Ini memiliki arsitektur tanpa agen, jika kita berbicara tentang versi open source, ditulis dengan Python, ia memiliki DSL seperti Yaml, mudah diperluas karena modul yang ditulis dengan Python, sangat sederhana dan ringan.  Ansible memiliki ambang masuk terendah - Anda dapat mengajar siapa pun. <br><br>  Ada pengalaman ketika seseorang, tidak tahu Python, tidak tahu apa-apa tentang SCM, masuk Ansible hanya dalam dua hari dan sudah mulai melakukan sesuatu. <br>  Di bawah ini adalah contoh dari ChatOps: pemberi notifikasi di Slack.  Kode Ansible yang melihat Yaml bukanlah hal baru. <br><br><pre><code class="hljs pgsql">- block: - <span class="hljs-type"><span class="hljs-type">name</span></span>: "SlackNotify : Deploy Start" local_action: module: slack token: "{{ slack_url }}" attachments: - title: "Deploy to {{ inventory_hostname }} has been Started" <span class="hljs-type"><span class="hljs-type">text</span></span>: "&lt;!here&gt; :point_up_2:" color: "#551a8b" - <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>: configure.yml tags: - configure - <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>: remote-<span class="hljs-keyword"><span class="hljs-keyword">fetch</span></span>.yml tags: - remote - <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>: assets.yml</code> </pre> <br><hr><br><h2>  Apa itu SCM: Koki </h2><br><img src="https://habrastorage.org/webt/wi/kr/bd/wikrbdzapzntbjimi4ns5jw2bm0.jpeg"><br><br>  Chef adalah arsitektur klien-server, ada server Chef dan klien Chef.  Konfigurasi berbasis pencarian, ditulis dalam Ruby, memiliki Ruby DSL.  Dengan demikian, di dalam buku resep dan masakan Anda, Anda dapat menggunakan kekuatan penuh Ruby, tetapi saya tidak menyarankan melakukan ini.  Chef memiliki komunitas besar dan seperangkat alat terbesar di antara semua SCM.  Ini seperti apa kode Chef, ini adalah penyebaran Jetty. <br><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># # Cookbook Name:: dg-app-edl # Recipe::fe # node.normal[:jetty][:home] = "/usr/share/jetty" node.normal[:jetty][:group] = "deploy" include_recipe "dg-auth::deploy" include_recipe "newrelic::repository" include_recipe "newrelic::server-monitor" include_recipe "dg-jetty::jetty9" include_recipe "newrelic::java-agent" directory "edl" do action :create owner group "deploy" mode "0775" path "/usr/share/where/edl" recursive true end</span></span></code> </pre><br><hr><br><h2>  Apa itu SCM: SaltStack </h2><br><img src="https://habrastorage.org/webt/um/dp/qa/umdpqavcnru1d40qd-bncyclmx8.jpeg"><br><br>  SaltStack memiliki arsitektur tanpa agen yang bekerja dalam mode dorong menggunakan Salt-SSH, dan arsitektur client-server ketika ada Salt-master dan Salt-minion.  Penekanannya adalah pada otomatisasi waktu nyata, eksekusi paralel dari semua proses, dan ditulis dengan Python.  Juga bahasa seperti Yaml, kode ini sangat mirip dengan Ansible. <br><br><pre> <code class="hljs mel">#ntp-packages: pkg.installed: - pkgs: - ntp - ntpdate #/etc/ntp.conf: <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>: - managed - <span class="hljs-keyword"><span class="hljs-keyword">source</span></span>: salt:<span class="hljs-comment"><span class="hljs-comment">//common/ntpd/ntp.conf - template: jinja - mode: 644 #/etc/sysconfig/ntpd: file: - managed - source: salt://common/ntpd/ntpd - template: jinja - mode: 644 #ntp-service: service.running: - name: ntpd</span></span></code> </pre><br><hr><br><h2>  Apa itu SCM: Wayang </h2><br><img src="https://habrastorage.org/webt/iz/-3/ac/iz-3acdxp8hdgg-lxxk_lp8oilq.jpeg"><br><br>  Penawar terakhir kami adalah Wayang.  Ini juga memiliki arsitektur client-server, seperti Chef, konfigurasi tidak didasarkan pada pencarian, tetapi pada "fakta" yang datang dengan Puppet-master, ditulis dalam Ruby, memiliki DSL seperti Ruby.  Tetapi orang-orang Wayang tidak diizinkan untuk menggunakan kode Ruby murni dalam manifes mereka.  Ini adalah plus dan minus.  Ini adalah seperti apa kode manifestasi Wayang: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> { '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mysql::server</span></span></span><span class="hljs-class">' : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">root_password</span></span></span><span class="hljs-class"> =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">password</span></span></span><span class="hljs-class">' } </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mysql::db</span></span></span><span class="hljs-class">{ ['</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">', '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test2</span></span></span><span class="hljs-class">', '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test3</span></span></span><span class="hljs-class">']: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ensure</span></span></span><span class="hljs-class"> =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">present</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">charset</span></span></span><span class="hljs-class"> =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">utf8</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">require</span></span></span><span class="hljs-class"> =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Class</span></span></span><span class="hljs-class">['</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mysql::server</span></span></span><span class="hljs-class">'], } </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mysql::db</span></span></span><span class="hljs-class">{ '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test4</span></span></span><span class="hljs-class">': </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ensure</span></span></span><span class="hljs-class"> =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">present</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">charset</span></span></span><span class="hljs-class"> =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">latin1</span></span></span><span class="hljs-class">', } </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mysql::db</span></span></span><span class="hljs-class">{ '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test5</span></span></span><span class="hljs-class">': </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ensure</span></span></span><span class="hljs-class"> =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">present</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">charset</span></span></span><span class="hljs-class"> =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">binary</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">collate</span></span></span><span class="hljs-class"> =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">binary</span></span></span><span class="hljs-class">', }</span></span></code> </pre><br><h2>  SCM dalam praktek </h2><br><h3>  SaltStack dalam lingkungan demiliterisasi </h3><br>  Pertama-tama, saya ingin membagikan proyek yang ditulis di SaltStack.  Ini adalah proyek kami sebelumnya dan rasa sakit yang paling segar, dan rasa sakit yang paling segar selalu yang paling menyakitkan.  Pelanggan kami terlibat dalam penyimpanan data - ini adalah produksi server besi untuk menyimpan data pada GPFS, GlusterFS, tetapi pembuatan kustom.  Dia datang kepada kami dengan tugas-tugas berikut: <br><br><ol><li>  Membuat penginstal USB / DVD.  Anda perlu membuat media dari mana semuanya diinstal.  Ini dilakukan untuk pelanggan pelanggan yang tinggal di daerah tertutup, di mana server paling sering tidak memiliki Internet.  Kita perlu mengemas dalam satu ISO, mengirim ke insinyur lapangan yang akan menyebarkan semua yang dibutuhkan di situs. <br></li><li>  Menyebarkan sekelompok produk.  Pelanggan memiliki beberapa produk besar, kami harus dapat menggunakannya dalam mode kluster. <br></li><li>  Manajemen, konfigurasi, dan pemeliharaan cluster menggunakan CLI-utility.  Kerangka kerja kami harus membantu insinyur lapangan mengelola kluster. <br></li></ol><br>  Pelanggan memiliki beberapa persyaratan.  Pertama-tama, ia memiliki sejumlah besar keahlian Python, bahkan hanya pengembang C dan Python.  Pelanggan segera berkata: "Kami ingin SaltStack", tanpa meninggalkan pilihan. <br><br>  Apa yang kita hadapi  Pelanggan memiliki beberapa produk dalam instalasi, semua harus dengan Salt-Masters.  Tetapi kita dihadapkan dengan masalah penskalaan konfigurasi Multi-Master.  Misalnya, di Info NODE (status server tertentu), kami memilih milidetik dengan konfigurasi dua-master, detik dengan tiga master, dan dengan lima kami tidak pernah menunggu operasi selesai.  MultiMaster adalah fitur yang baik, tetapi tidak skalanya dengan baik. <br><br>  Masalah kedua yang kami temui adalah kerja tim: SaltStack memiliki Runner and Module.  Modul adalah ekstensi yang beroperasi pada Salt Minion, di sisi mesin.  Runner berjalan di sisi server.  Kami sering mengalami pertempuran: apa yang harus dilakukan Runner, dan apa yang harus dilakukan Modul. <br><br>  Lalu kami menemukan kejutan kecil dari cache.mine: <br><br><pre> <code class="python hljs">ime = ImeActions() id = __grains__[<span class="hljs-string"><span class="hljs-string">'id'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> id == ime.master_id: ret = __salt__[<span class="hljs-string"><span class="hljs-string">'mine.get'</span></span>](id, <span class="hljs-string"><span class="hljs-string">'ime_actions.make_bfs_uuid'</span></span>) ime_dict = ret.get(id, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> ime_dict: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: result = __salt__[<span class="hljs-string"><span class="hljs-string">'mine.send'</span></span>](<span class="hljs-string"><span class="hljs-string">'ime_actions.make_bfs_uuid'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exeption, e: log.error(<span class="hljs-string"><span class="hljs-string">"Failed to generate uuid: {0}."</span></span>.format(str(e))) result = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:</code> </pre><br>  Kami memiliki utilitas yang ditulis dalam C. Kami menjalankannya, itu menghasilkan ID acak.  Itu harus unik di antara semua peserta di cluster, masing-masing, kita perlu melakukan ini sekali pada master, dan kemudian mendistribusikannya di antara mesin.  Kami menggunakan cache.mine untuk ini.  Ternyata, dia tidak mengalami reboot. <br><br><img src="https://habrastorage.org/webt/g1/n6/bo/g1n6boipselezqysof41glvfa5s.jpeg"><br><br>  "Kondisi balapan."  Paralelisasi baik, tetapi dalam keadaan konfigurasi dasar.orchestrate masuk ke state.sls sedang berjalan jika proses panjang terjadi.  Pada batas waktu, dia percaya bahwa Negara telah selesai, meskipun masih berjalan, dan sedang mencoba untuk memulai yang berikutnya.  Terjadi kesalahan.  Dan masalah ini belum diperbaiki. <br><br><img src="https://habrastorage.org/webt/uq/s5/wb/uqs5wbeqhfc8o22yr9mwck3fcbg.jpeg"><br>  Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">melihat GitHub</a> . <br><br>  Apa yang bisa kami gunakan selain SaltStack? <br><br><h3>  SaltStack di lingkungan DMZ </h3><br><img src="https://habrastorage.org/webt/ze/k6/me/zek6meak3aivzorfh7rsgf4e9na.jpeg"><br><br><ul><li>  DMZ  Paket koki hebat, Wayang juga.  Dan dengan Ansible, masalahnya adalah - jika tidak ada Tower - tidak ada cara untuk memulai konfigurasi dalam mode Tarik dari node kami, yang harus dilakukan di zona demiliterisasi. <br></li><li>  Kerangka kerja untuk CLI (dalam Python).  Chef dan Wayang tidak sangat cocok, tetapi jika Anda tidak memiliki batasan untuk hanya menggunakan Python, Anda dapat menulis dalam Ruby dan menggunakan API Chef atau Wayang.  Toolkit yang mungkin tidak mendukung ini. <br></li><li>  Manajemen Cluster.  Chef sangat cocok untuk mengelola cluster, Wayang juga, dan Ansible pada awalnya ditulis untuk mengelola cluster di Amazon. <br></li></ul><br><h3>  Koki di lingkungan yang besar dan dinamis </h3><br>  Pelanggan datang dengan tugas mengkonsolidasikan semua sumber daya dalam satu cloud - itu adalah Openstack.  Sebelum itu, semuanya tersebar: sesuatu di Rackspace Cloud, sesuatu di server khusus atau pusat data pribadi mereka. <br><br>  Mereka menginginkan manajemen sumber daya yang sepenuhnya dinamis, dan juga agar aplikasi mereka dapat menambah kapasitas bagi diri mereka sendiri jika perlu.  Artinya, kita membutuhkan infrastruktur dinamis yang lengkap dan lingkungan yang sepenuhnya dinamis baik naik turun. <br><br>  Untuk membangun proses CD dengan benar, Anda memerlukan lingkungan yang sepenuhnya otomatis.  Kami menciptakan SDLC - Siklus Hidup Pengembangan Perangkat Lunak untuk mereka, dan menerapkannya, termasuk untuk SCM.  Mereka lulus tes integrasi tidak hanya dari aplikasi, tetapi juga infrastruktur. <br><br>  Karenanya, ketika ada yang tidak beres dengan kami, kami, seperti orang-orang dari Netflix, harus dapat membunuh sumber daya yang rusak dan mengembalikan pekerja yang baru dan terjamin ke tempat mereka. <br><br>  Masalah apa yang kita hadapi: <br><br><ol><li>  Itu 2013, digunakan Chef 10, di mana pencarian lambat.  Kami memulai pencarian, berkeliling semua mobil, dan butuh selamanya.  Kami mencoba memecahkan masalah dengan konvensi penamaan, serta pemilihan dan pencarian fqdn.  Ini mempersempit ruang lingkup pencarian, karena itu dipercepat. <br><br>  Tetapi beberapa operasi perlu dilakukan di seluruh lingkungan.  Dengan demikian, pencarian dijalankan sekali di awal, hasilnya disimpan dalam atribut, dan menggunakan Ruby kami menyaring hasilnya: kami mem-parsing potongan yang kami butuhkan dan melakukan apa yang diperlukan. <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !Chef::Config[<span class="hljs-symbol"><span class="hljs-symbol">:solo</span></span>] search(<span class="hljs-symbol"><span class="hljs-symbol">:node</span></span>, <span class="hljs-string"><span class="hljs-string">"fqdn:*metro-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">#{node[</span></span><span class="hljs-symbol"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-symbol">:env</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-string">-mongodb*"</span></span>).each <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|mongo|</span></span> @mongodbs &lt;&lt; mongo.fqdn <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> @mongodbs = [<span class="hljs-string"><span class="hljs-string">"lvs-metro-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">#{node[</span></span><span class="hljs-symbol"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-symbol">:env</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-string">-mongodb3001.qa.example.com"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  Intinya: gunakan konvensi penamaan, jalankan pencarian sekali, gunakan Ruby untuk menyaring hasil yang diinginkan. <br></li><li>  Menggunakan "node.save" tidak aman, hati-hati dan hati-hati.  Kami mengalami masalah ini ketika menggunakan cluster MySQL, dan menggunakan node.save di dalam resep pada node MySQL yang tidak sepenuhnya dikonfigurasi.  Dan pada saat Scale-up, beberapa aplikasi memberikan 500 kesalahan.  Ternyata kami menyimpan node pada waktu yang salah: ia pergi ke server Chef, di sana klien Chef di UI mengambil node baru yang tidak dikonfigurasi sebelum mode operasi. <br></li><li>  Kurangnya "bentangan" dapat membunuh server chef.  Splay adalah parameter klien Chef yang memungkinkan Anda untuk mengatur rentang ketika klien pergi ke server untuk konfigurasi.  Dengan beban yang besar, ketika Anda perlu menggunakan banyak node pada saat yang sama, ini tidak akan mematikan server. <br></li></ol><br>  Apa yang bisa kita gunakan sebagai pengganti koki? <br><br><img src="https://habrastorage.org/webt/0w/xx/rm/0wxxrmdr90fpnyppzwoumgkbmai.jpeg"><br><br><ul><li>  Provisi dinamis  SaltStack sangat sempurna karena memiliki SaltCloud yang terintegrasi sempurna di mana saja.  Wayang memiliki fungsi serupa, tetapi hanya tersedia di Wayang Perusahaan, untuk uang.  Ansible sangat cocok jika perusahaan "tinggal" di Amazon, jika sesuatu yang lain - Anda dapat mengikatnya menjadi alternatif, tetapi tidak begitu nyaman. <br></li><li>  SDLC.  Chef memiliki segalanya, dari Test Kitchen hingga memilih alat untuk pengujian integrasi.  SaltStack memiliki semua alat Python yang tersedia, sekarang Wayang memiliki segalanya.  Ansible memiliki Spec Peran, Anda dapat menggunakan Chef's Test Kitchen, tetapi itu bukan alat asli. <br></li><li>  Penggantian sumber daya.  Semuanya baik-baik saja di Chef, di SaltStack Anda dapat menyelesaikan SaltCloud ke kondisi yang diinginkan, di alat Wayang hanya dalam versi Enterprise, dan Ansible bekerja dengan baik hanya dengan Amazon. <br></li></ul><br><h3>  EPAM Private Cloud dengan Chef </h3><br>  Setahun setengah sebelum munculnya AWS OpsWorks, kami ingin membuat Amazon CloudFormation canggih dengan mengintegrasikan Chef sehingga sumber daya tidak hanya digunakan, tetapi juga dikonfigurasikan. <br><br>  Tugas global kedua adalah membuat katalog layanan sehingga pelanggan dan pengguna dapat menggunakan CLI untuk menggunakan tumpukan LAMP yang benar-benar siap digunakan, misalnya. <br><br><img src="https://habrastorage.org/webt/a4/cy/f6/a4cyf6ep8anoudzr6ydh7as2yrg.jpeg"><br><br>  Kami memilih Chef, tetapi proyek harus mendukung SCM yang berbeda.  Kami mulai dengan Chef-Server bawaan, dan pengguna juga bisa menggunakan Chef-Server mereka sendiri, yang dihosting di suatu tempat bersama mereka.  Artinya, kami tidak mendapatkan akses ke sumber daya pengguna dan laptop, tetapi tetap berhasil. <br><br><img src="https://habrastorage.org/webt/xf/vh/py/xfvhpysd5j89seh3qgrei3o5ryi.jpeg"><br><br>  Setiap SCM dapat digunakan untuk mengimplementasikan CloudFormation + OpsWork, semua orang cocok.  Untuk membuat katalog - semua orang kecuali SaltStack akan melakukan ini dengan baik.  SaltStack memiliki nuansa: sangat sulit untuk menemukan spesialis yang mengenal SaltStack dengan baik dan dapat membuat layanan dan mengisi katalog. <br><br><h3>  Popularitas SCM dalam EPAM </h3><br><img src="https://habrastorage.org/webt/d3/o1/z2/d3o1z2giceihh4izcy4r6zlnkpq.jpeg"><br><br>  Ini adalah statistik popularitas SCM dalam EPAM.  SaltStack sangat jauh di belakang.  Di tempat pertama Ansible, ini adalah yang paling sederhana dan dengan ambang masuk yang rendah.  Ketika kami mencoba menemukan seseorang di pasar dengan pengetahuan tentang SCM, pasar terlihat hampir sama. <br><br><h3>  Bekerja dengan Ansible </h3><br>  Kiat yang bisa saya berikan saat bekerja dengan Ansible: <br><ol><li>  Gunakan 'akselerasi', menyebarkan konfigurasi 2-6 kali lebih cepat dari SSH (untuk el6).  Untuk yang lainnya, ada 'pipelining'.  Ini dimatikan untuk kompatibilitas ke belakang, tetapi menyalakan kembali pipelining sangat mudah, saya sarankan melakukannya. <br></li><li>  Gunakan 'with_items' <br><br><pre> <code class="hljs powershell">- name: project apt dependencies installed apt: name: <span class="hljs-string"><span class="hljs-string">"{{ item }}"</span></span> become: yes with_items: - build<span class="hljs-literal"><span class="hljs-literal">-essential</span></span> - acl - git - curl - gnupg2 - libpcre3<span class="hljs-literal"><span class="hljs-literal">-dev</span></span> - python<span class="hljs-literal"><span class="hljs-literal">-apt</span></span> - python<span class="hljs-literal"><span class="hljs-literal">-pycurl</span></span> - python<span class="hljs-literal"><span class="hljs-literal">-boto</span></span> - imagemagick - libmysqlclient<span class="hljs-literal"><span class="hljs-literal">-dev</span></span> <span class="hljs-comment"><span class="hljs-comment"># needed for data import</span></span></code> </pre><br>  Dalam contoh ini, kami memasang paket, skema ini dapat digunakan untuk membuat pengguna dan operasi serupa. <br></li><li>  Dengan hati-hati gunakan 'local_action' dan 'delegated'.  Yang pertama memungkinkan Anda untuk mendapatkan sesuatu yang mirip dengan SaltStack Runner, yang kedua mampu mendelegasikan tugas ke mesin tertentu. <br><br><pre> <code class="hljs sql">- name: <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> postgresql <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> postgresql_db: <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ database_name }}"</span></span> login_host: <span class="hljs-string"><span class="hljs-string">"{{ database_host }}"</span></span> login_user: <span class="hljs-string"><span class="hljs-string">"{{ database_master_user }}"</span></span> login_password: <span class="hljs-string"><span class="hljs-string">"{{ database_master_password }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">encoding</span></span>: <span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span> lc_collate: <span class="hljs-string"><span class="hljs-string">"en_US.UTF-8"</span></span> lc_ctype: <span class="hljs-string"><span class="hljs-string">"en_US.UTF-8"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>: <span class="hljs-string"><span class="hljs-string">"template0"</span></span> state: <span class="hljs-keyword"><span class="hljs-keyword">present</span></span> delegate_to: <span class="hljs-string"><span class="hljs-string">"{{ groups.pg_servers|random}}"</span></span></code> </pre><br>  Ini adalah bagian dari pembuatan basis data.  Tanpa baris terakhir, operasi akan dilakukan beberapa kali dan jatuh pada upaya kedua untuk membuat database yang sama. <br></li><li>  Optimalkan peran dan kinerja Anda dengan tag.  Ini secara signifikan dapat mengurangi waktu tunggu. <br></li></ol><br><h3>  Kesimpulan </h3><br>  Bagi saya, Ansible adalah favorit.  SaltStack sangat baik, sangat fleksibel, tetapi membutuhkan pengetahuan Python, tanpa mereka SaltStack lebih baik tidak digunakan.  Chef adalah peluru perak universal untuk tugas dan skala apa pun, tetapi membutuhkan lebih banyak pengetahuan daripada Ansible.  Dan siapa yang menggunakan Wayang - Saya tidak tahu.  Pada prinsipnya, ini sangat mirip dengan Chef, tetapi dengan nuansa tersendiri. <br><blockquote>  Menit periklanan.  Jika Anda menyukai laporan ini dari konferensi <b>DevOops</b> - perhatikan bahwa pada 14 Oktober <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DevOops 2018 baru</a> akan diadakan di St. Petersburg, akan ada banyak hal menarik dalam programnya.  Situs ini sudah memiliki pembicara dan laporan pertama. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id416763/">https://habr.com/ru/post/id416763/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id416753/index.html">Plugin Hola VPN populer dikompromikan</a></li>
<li><a href="../id416755/index.html">Suka Ekstrim - Komite Investigasi Terhadap</a></li>
<li><a href="../id416757/index.html">Tes terkelupas</a></li>
<li><a href="../id416759/index.html">Mengapa kecerdasan buatan tidak akan menyelesaikan semua masalah</a></li>
<li><a href="../id416761/index.html">Bahasa kosmik, bagian 1: apakah tata bahasa universal itu universal?</a></li>
<li><a href="../id416765/index.html">Perusahaan Foliplast: siklus penuh produksi digital di Rusia</a></li>
<li><a href="../id416767/index.html">Deuce untukmu, atau audit dengan peretasan</a></li>
<li><a href="../id416775/index.html">Kerajinan kertas lain</a></li>
<li><a href="../id416777/index.html">Prinsip operasi jaringan saraf convolutional. Hampir rumit</a></li>
<li><a href="../id416781/index.html">Siapa yang akan menyelamatkan teori relativitas?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>