<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçü§ù‚Äçüë®üèΩ üé≥ üë©üèΩ‚Äçüè´ Modbus RTU-Netzwerkemulationssoftware üöò ü§±üèø üïé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einf√ºhrung 
 Wenn Sie nur einen Hammer als Werkzeug haben, √§hnelt jedes Problem einem Nagel. 

 Abraham Maslow 
 Das Modbus-Protokoll ist sowohl Habr-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Modbus RTU-Netzwerkemulationssoftware</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409111/"><h1>  Einf√ºhrung </h1><br><blockquote>  Wenn Sie nur einen Hammer als Werkzeug haben, √§hnelt jedes Problem einem Nagel. <br><br>  <i>Abraham Maslow</i> </blockquote><br>  Das Modbus-Protokoll ist sowohl Habr-Lesern als auch Hicktime-Lesern bekannt.  Viele Ver√∂ffentlichungen haben sich seiner Anwendung gewidmet, die schwer aufzulisten sind, weil es so viele davon gibt, und von Zeit zu Zeit erscheinen hier und da neue Artikel. <br><br><img src="https://habrastorage.org/webt/2m/xh/ry/2mxhryo9sblm6uzcf0srfxzqkkm.png"><br><br>  Die Popularit√§t dieses Protokolls beruht auf seiner Offenheit und Einfachheit.  Der Anwendungsbereich ist breit genug: von professionellen industriellen Automatisierungssystemen bis hin zu Amateur-DIY-Projekten mit verteilten Steuerungssystemen, "intelligenten" H√§usern und so weiter.  Dieses Protokoll wurde auch von mir gew√§hlt, als mein Team mit der Erstellung von Software f√ºr den Zugsimulator besch√§ftigt war.  Das Modbus RTU-Protokoll auf der physischen RS485-Schnittstelle wird in diesem Simulator verwendet, um Daten von Steuerungen, die an der Fahrerkonsole angebracht sind, in den Steuercomputer einzugeben (denken Sie nicht, dass Modbus f√ºr echtes rollendes Material verwendet wird!). <br><br>  Es lohnt sich nicht, √ºber die Schwierigkeiten beim Einrichten von Software zu sprechen, die mit einem Netzwerk von Controllern interagiert, die Ger√§te steuern.  Insbesondere wenn ein Teil der Ger√§te bereits im Eisen vorhanden ist und der andere Teil sich in der Entwicklung und Herstellung befindet.  In diesem Fall muss Software der obersten Ebene unter Ber√ºcksichtigung ihrer Interaktion mit dieser Hardware geschrieben werden.  Und es ist ratsam, es so zu schreiben, dass sofort eine funktionierende Version des Systems erstellt wird, ohne dass ‚ÄûKr√ºcken‚Äú verwendet werden, die immer schwer vom Code zu entfernen sind. <br><br>  "Sie m√ºssen Software schreiben, wenn Prototypen der gesamten Hardware fertig sind", sagen Sie, und Sie werden Recht haben, aber ... ha ha ha, das passiert in der realen Welt selten.  Und hier helfen uns Software-Emulatoren. <br><a name="habracut"></a><br><h1>  1. Kurz √ºber Modbus RTU </h1><br>  Ich werde nicht im Detail √ºber das Protokoll sprechen.  Wer sich f√ºr Details interessiert, kann die Suche nutzen - das Protokoll ist offen, seine offizielle Spezifikation und viele Informationen sind im Netzwerk verf√ºgbar.  Ich kann nur sagen, dass es in Modbus RTU das Bin√§rformat der √ºbertragenen Daten beschreibt und das RS485-Standard-Twisted-Pair-Kabel als √úbertragungsmedium verwendet.  RS232 kann auch verwendet werden, wenn das Netzwerk einen Sender und einen Empf√§nger hat, oder RS422 f√ºr die unidirektionale Daten√ºbertragung. <br><br>  Wir werden an RS485 interessiert sein, einer Halbduplex-Schnittstelle, √ºber die jeweils nur ein Ger√§t Daten √ºbertr√§gt.  Die Arbitrierung des Busses in Modbus erfolgt aufgrund der Dauerhaftigkeit des obligatorischen Ruheintervalls von 3,5 Zeichen bei einer bestimmten √úbertragungsgeschwindigkeit.  Jede Nachricht sollte mit einem Ruheintervall beginnen und enden.  Es gibt ein Master-Ger√§t im Netzwerk und mehrere Slaves (bis zu 31 in einem Netzwerksegment ohne Verwendung von Repeatern).  Jedes Slave-Ger√§t verf√ºgt √ºber eine eindeutige ID (1 bis 31).  Die Daten√ºbertragung durch Slaves erfolgt nur, wenn der Master eine Anforderung zum Empfangen von Daten von diesem Ger√§t gesendet hat. <br><br>  Eine typische Assistentenanforderung sieht folgenderma√üen aus <br><br><table><tbody><tr><td>  ID </td><td>  Funktionscode </td><td>  Datenadresse </td><td>  Datenmenge (2 Bytes) </td><td>  Daten </td><td>  CRC16 </td></tr></tbody></table><br>  CRC16 wird verwendet, um die Integrit√§t der √ºbertragenen Daten zu steuern.  Modus verwendet die Big Endian-Datendarstellungsnotation: Bei Werten von 2 Bytes steht das h√∂chstwertige Byte in der Nachricht an erster Stelle.  Das Protokoll verwendet vier Arten von Daten: <br><br><ol><li>  Spulen - diskrete Ausg√§nge (1 Bit) zum Lesen / Schreiben </li><li>  Digitaleing√§nge - Nur-Lese-Digitaleing√§nge (1 Bit) </li><li>  Halteregister - Ausgangsregister (2 Bytes) zum Lesen / Schreiben verf√ºgbar </li><li>  Eingangsregister - Eingangsregister (2 Bytes) zum Lesen verf√ºgbar </li></ol><br>  Als Antwort auf die Anfrage sendet der Slave Daten im folgenden Format <br><br><table><tbody><tr><td>  ID </td><td>  Funktionscode </td><td>  Die Datenmenge in Bytes </td><td>  Daten </td><td>  CRC16 </td></tr></tbody></table><br>  Eine vom Master empfangene Nachricht wird in den Empfangspuffer aller Ger√§te eingegeben.  Wenn jedoch das erste Byte des Empfangspuffers nicht mit der Ger√§te-ID √ºbereinstimmt, werden die empfangenen Daten ignoriert und der Empfangspuffer gel√∂scht.  Wenn die Nachricht f√ºr dieses Ger√§t bestimmt ist, bildet sie eine Antwort und sendet sie nach Einhaltung des Ruheintervalls an den Master. <br><br>  Wie sie sagen, einfach, aber mit Geschmack.  Weitere Informationen hierzu finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Protokollspezifikation</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lesen Sie hier</a> , wie Sie das Protokoll auf der seriellen Schnittstelle implementieren k√∂nnen.  Daf√ºr haben wir uns hier nicht versammelt. <br><br>  Bei der Entwicklung von Top-Level-Software (z. B. auf Basis eines PCs implementierter Master) f√ºr ein solches Netzwerk w√§re es sch√∂n, eine Reihe von Softwaretools zu haben, mit denen ein solches Konzept implementiert werden kann <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/89b/944/3b5/89b9443b5fb11f04536782afce19be3d.png" alt="Bild"></div><br>  Die Bedeutung dieses Schemas ist wie folgt.  Angenommen, wir haben einen Teil der Ger√§te im zuk√ºnftigen Netzwerk.  Oder solche Ger√§te gibt es bisher nicht.  Es besteht jedoch der brennende Wunsch, Software f√ºr die oberste Verwaltungsebene zu schreiben und zu debuggen, damit wir nichts neu schreiben m√ºssen, wenn das Netzwerk noch in Hardware implementiert ist.  Dazu m√ºssen Sie ein physisches √úbertragungsmedium verwenden, f√ºr das wir ein √§hnliches Ger√§t verwenden <br><br><img src="https://habrastorage.org/webt/1x/cz/ja/1xczjafogu-dwd3qnetuijaszma.jpeg"><br><br>  Einer der Adapter wird verwendet, um die Software des entwickelten Assistenten zu verbinden.  Eine andere dient zum Anschlie√üen eines Emulators eines zuk√ºnftigen Netzwerks von Slaves.  Mit dem Zweig mit einem wei√üen Anschluss verbinden wir den Teil des Netzwerks, der bereits in Hardware implementiert ist.  So haben wir die M√∂glichkeit, ruhig mit dem Standard-Kommunikationsprotokoll zu arbeiten und schrittweise echte Ger√§te in Betrieb zu nehmen.  Wenn wir dem Kunden das Objekt geben, wird uns nicht die M√∂glichkeit genommen, seine Software in einer komfortablen Laborumgebung ohne Zugriff auf das Objekt zu √§ndern.  QSlave im Diagramm ist genau derselbe Teil des Netzwerks, der von der Software emuliert wird.  Nat√ºrlich m√ºssen Sie die entsprechende Software schreiben, die vom Autor erstellt wurde. <br><br><h1>  2. QSlave - Slave-Netzwerkemulation </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">QSlave</a> ist ein offener plattform√ºbergreifender Modbus-RTU-Netzwerkemulator.  Sie k√∂nnen es unter der GPL v2.0-Lizenz auf Github unter dem obigen Link erhalten. <br><br><img src="https://habrastorage.org/webt/4n/nd/am/4nndamsmf4i7ghnfrzzbbc94vqu.png"><br><br>  Die Anwendung wird in C ++ unter Verwendung des Qt-Frameworks entwickelt.  Qt verf√ºgt im Allgemeinen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√ºber Bibliotheken f√ºr die Arbeit mit Modbus</a> , aber die Besonderheiten der Aufgabe - die Simulation eines Netzwerks von Slaves anstelle eines einzelnen Slaves - f√ºhrten dazu, dass die integrierten Qt-Bibliotheken f√ºr Modbus hier nicht verwendet wurden.  Um die von der virtuellen seriellen Schnittstelle empfangenen Daten zu verarbeiten, wurde eine selbstgeschriebene Modbus-Bibliothek erstellt.  Der Code dieser Bibliothek wird als separates Projekt implementiert, ist v√∂llig unabh√§ngig von der Benutzeroberfl√§che und kann zur Kenntnisnahme von Softwaresimulationen mit erweiterten Funktionen verwendet werden.  Aufgrund der Tatsache, dass die Modbus-Emulation von der Benutzeroberfl√§che getrennt ist, wird das Netzwerk mithilfe von Konfigurationsdateien konfiguriert.  Das XML-Format wurde gew√§hlt (wir verwenden es h√§ufig in unseren Projekten).  Eine Beispielkonfiguration finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im Projektcode</a> .  Eine Reihe von Konfigurationen besteht aus einer Hauptdatei mit der Erweiterung * .net, die so aussieht <br><br>  <b>example.net</b> <br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Config</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Slave</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span>Traffic light<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  XML-  (  *.xml) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">config</span></span></span><span class="hljs-tag">&gt;</span></span>traffic-light<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">config</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Slave</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Config</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  und XML-Konfigurationsdateien f√ºr jeden der Slaves <br><br>  <b>Ampel.xml</b> <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Config</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>16<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Red signal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>17<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Yellow signal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>18<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Green signal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DiscreteInput</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Ready<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DiscreteInput</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HoldingRegister</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Signal activity time<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>15<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HoldingRegister</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">InputRegister</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Signals count<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">InputRegister</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Config</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Die letzte Datei enth√§lt eine Beschreibung aller auf dem Ger√§t verf√ºgbaren Daten.  Um die Konfiguration herunterzuladen, m√ºssen Sie die * .net-Datei √ºber das QSlave-Programmmen√º (Datei ‚Üí Konfiguration √∂ffnen) √∂ffnen.  Alle Konfigurationsdateien m√ºssen sich im selben Verzeichnis befinden.  Die Beispielkonfiguration beschreibt ein Netzwerk von einem Slave-Ger√§t, eine virtuelle Ampel, deren diskrete Ausg√§nge die Signale beschreiben, ein digitaler Eingang zeigt ein Bit des betriebsbereiten Ger√§ts an (bereit), das Eingangsregister meldet die Anzahl der Ampeln und das Ausgangsregister legt die Zeit fest, w√§hrend der es eingeschaltet ist jedes der Signale. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/fea/def/3a4/feadef3a4c17567d127543ee0954b561.png" alt="Bild"><br><br>  Nat√ºrlich simuliert dieser Simulator nicht die interne Logik des Ger√§ts.  Sie k√∂nnen nur die Werte der Speicherzellen festlegen, die dem Master zur Verf√ºgung stehen.  Jeder der Werte kann nach eigenem Ermessen festgelegt werden, indem die entsprechende Zelle in der Tabelle bearbeitet wird. <br><br>  Bei aller Einfachheit hilft uns diese Software bei der Arbeit an der Simulatorsoftware (die bereits in Betrieb genommen wurde), ohne das Labor zu verlassen. <br><br><img src="https://habrastorage.org/webt/qh/9j/ba/qh9jba49bbzglh5ca1t2nryin9a.png"><br><br>  Niemand sagt jedoch, dass Sie keinen erweiterten Emulator erstellen k√∂nnen, der den Betrieb virtueller Netzwerkger√§te simuliert.  Zum Erstellen k√∂nnen Sie den im QSlave-Paket verf√ºgbaren Modbus-Bibliothekscode verwenden. <br><br><h1>  3. QMaster - Emulation des Master-Ger√§ts </h1><br>  Um Slaves zu erstellen und ihre Firmware zu debuggen, ben√∂tigen Sie eine Assistentensimulation.  Es gibt eine Reihe offener Emulatoren, wie zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">QModbus</a> .  Wir haben es in unserer Arbeit verwendet, bis wir beschlossen, die Daten√ºbertragungsrate auf 250 kBit / s zu erh√∂hen.  QModbus erlaubt dies nicht.  Es war m√∂glich, es aus den Quellen f√ºr Linux neu zu erstellen, aber unsere Elektronikingenieure sitzen unter Windows und wo die Montage aus mehreren Gr√ºnden nicht stattfand.  Es stellte sich heraus, dass diese Anwendung in Qt 4 geschrieben ist und eine libmodbus-Bibliothek eines Drittanbieters verwendet.  Ich wollte eine plattform√ºbergreifende L√∂sung f√ºr Qt5, zumal Qt5 bereits sofort mit Modbus funktioniert.  Daher wurde das Analogon mit dem Qt Modbus-Bibliotheksstapel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">QMaster geschrieben</a> .  Unter den gleichen Bedingungen ist es auch auf Github erh√§ltlich. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a13/5fa/5b2/a135fa5b2781d646d18010960defd69d.png" alt="Bild"><br><br><h1>  Fazit </h1><br>  Abschlie√üend m√∂chte ich sagen, dass ich (bei der Arbeit) haupts√§chlich an geschlossenen Projekten arbeite.  Die beschriebenen Tools wurden jedoch von mir in meiner Freizeit auf eigene Initiative pers√∂nlich entwickelt.  Au√üerdem sind sie in der Windows-Version statisch mit dem Qt-GPL-Code verkn√ºpft, sodass ich sie unter den gleichen Bedingungen wie Qt an die Community weitergeben muss.  Dar√ºber hinaus k√∂nnen diese Tools f√ºr den Leser n√ºtzlich sein. <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de409111/">https://habr.com/ru/post/de409111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de409099/index.html">Was gibt es f√ºr das neue Jahr zu geben? Problem 2017</a></li>
<li><a href="../de409101/index.html">Wissenschaftliche M√∂glichkeiten zur √úberwindung von M√ºdigkeit: Nootropika, Kaffee und Neurotechnologie</a></li>
<li><a href="../de409103/index.html">Crispr Therapeutics plant erste klinische Studien zur Behandlung genetisch bedingter Krankheiten</a></li>
<li><a href="../de409105/index.html">Die gr√∂√üten Kryptow√§hrungen, ihr Ergebnis und warum NiceHash nicht zu Hause gestohlen hat</a></li>
<li><a href="../de409107/index.html">Programmieren und √úbertragen von Daten an Arduino √ºber Funk mit dem ESP8266. Teil drei. Hallo ANDROID</a></li>
<li><a href="../de409113/index.html">Eine Kleinigkeit, aber sch√∂n: eine Tasse, die die Temperatur des Getr√§nks reguliert</a></li>
<li><a href="../de409115/index.html">Soundtracks von Kult-Spielen: Pest, Utopie und Eispickel</a></li>
<li><a href="../de409119/index.html">Intel ‚ùÑ 2017. Ergebnisse des Jahres</a></li>
<li><a href="../de409121/index.html">Was ist das: der russische Markt f√ºr Streaming-Dienste</a></li>
<li><a href="../de409123/index.html">Wie man einen bequemen Synthesizer mit eigenen H√§nden herstellt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>