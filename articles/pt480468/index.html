<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ú≥Ô∏è üí™üèΩ üòâ Implantando aplicativos do cartucho Tarantool sem esfor√ßo (parte 1) üå¶Ô∏è üèø üë°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J√° apresentamos o Tarantool Cartridge que permite desenvolver e compactar aplicativos distribu√≠dos. Agora vamos aprender como implantar e controlar es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Implantando aplicativos do cartucho Tarantool sem esfor√ßo (parte 1)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/480468/"><img src="https://habrastorage.org/webt/yc/gm/xx/ycgmxxaqlvyslsrzoo6jnv1vmx0.jpeg"><br><br>  J√° apresentamos o <a href="https://habr.com/ru/company/mailru/blog/465503/">Tarantool Cartridge</a> que permite desenvolver e compactar aplicativos distribu√≠dos.  Agora vamos aprender como implantar e controlar esses aplicativos.  Sem p√¢nico, est√° tudo sob controle!  Reunimos todas as melhores pr√°ticas de trabalho com o Tarantool Cartridge e escrevemos uma <a href="https://galaxy.ansible.com/tarantool/cartridge">fun√ß√£o Ansible</a> , que implantar√° o pacote nos servidores, iniciar√° e ingressar√° inst√¢ncias em conjuntos de r√©plicas, configurar√° a autoriza√ß√£o, iniciar√° o bootstrap vshard, habilitar√° a configura√ß√£o autom√°tica de failover e cluster de patches. <br><br>  Interessante, hein?  Mergulhe, verifique os detalhes sob o corte. <br><a name="habracut"></a><br><h1>  Come√ßando com uma amostra </h1><br>  Vamos orient√°-lo atrav√©s de apenas algumas das fun√ß√µes da fun√ß√£o.  Voc√™ sempre pode encontrar uma descri√ß√£o completa de todos os seus recursos e par√¢metros de entrada na <a href="https://github.com/tarantool/ansible-cartridge">documenta√ß√£o</a> .  No entanto, tentar uma vez √© melhor do que v√™-lo centenas de vezes, ent√£o vamos implantar um aplicativo pequeno. <br><br>  O Tarantool Cartridge tem um <a href="https://github.com/tarantool/cartridge-cli/tree/master/examples/getting-started-app">tutorial</a> para criar um pequeno aplicativo de cartucho que armazena informa√ß√µes sobre clientes banc√°rios e suas contas, al√©m de fornecer uma API para gerenciamento de dados via HTTP.  Para esse fim, o aplicativo descreve duas fun√ß√µes poss√≠veis que podem ser atribu√≠das √†s inst√¢ncias: <code>api</code> e <code>storage</code> . <br><br>  O cartucho em si n√£o diz nada sobre como iniciar processos - apenas fornece uma oportunidade para configurar as inst√¢ncias em execu√ß√£o.  Portanto, o restante depende do usu√°rio: distribuir arquivos de configura√ß√£o, executar servi√ßos e configurar topologia.  Mas n√£o vamos fazer tudo isso - o Ansible far√° isso por n√≥s. <br><br><h3>  Come√ßando √† a√ß√£o </h3><br>  Primeiro, vamos implantar nosso aplicativo em duas m√°quinas virtuais e configurar uma topologia simples: <br><br><ul><li>  O conjunto de r√©plicas <code>app-1</code> representar√° a fun√ß√£o da <code>api</code> que cont√©m a fun√ß√£o <code>vshard-router</code> .  Haver√° apenas uma inst√¢ncia. </li><li>  O conjunto de r√©plicas <code>storage-1</code> representar√° a fun√ß√£o de <code>storage</code> (incluindo a fun√ß√£o <code>vshard-storage</code> ) - aqui adicionaremos duas inst√¢ncias de m√°quinas diferentes. </li></ul><br><img src="https://habrastorage.org/webt/k9/nh/oc/k9nhoc4kladn7obskseox7he8ek.jpeg"><br><br>  Para executar a amostra, precisaremos do <a href="https://www.vagrantup.com/">Vagrant</a> e do <a href="https://www.ansible.com/">Ansible</a> (vers√£o 2.8 ou superior). <br><br>  A fun√ß√£o em si √© armazenada no <a href="https://galaxy.ansible.com/docs/">Ansible Galaxy</a> - um reposit√≥rio que permite compartilhar seu trabalho e usar as fun√ß√µes prontas. <br><br>  Agora clone o reposit√≥rio de amostra: <br><br><pre> <code class="plaintext hljs">$ git clone https://github.com/dokshina/deploy-tarantool-cartridge-app.git $ cd deploy-tarantool-cartridge-app &amp;&amp; git checkout 1.0.0</code> </pre> <br>  Em seguida, implante as m√°quinas virtuais: <br><br><pre> <code class="plaintext hljs">$ vagrant up</code> </pre> <br>  Depois disso, instale a fun√ß√£o Ansible do cartucho Tarantool: <br><br><pre> <code class="plaintext hljs">$ ansible-galaxy install tarantool.cartridge,1.0.1</code> </pre> <br>  E inicie a fun√ß√£o instalada: <br><br><pre> <code class="plaintext hljs">$ ansible-playbook -i hosts.yml playbook.yml</code> </pre> <br>  Agora aguarde at√© o processo do manual terminar, v√° para <a href="http://localhost:8181/admin/cluster/dashboard">http: // localhost: 8181 / admin / cluster / dashboard</a> e aproveite os resultados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/70/zo/vq/70zovqqaeiph6v1bjoenzl_hn1w.png"></div><br><br>  Voc√™ pode fazer o upload dos dados agora.  Incr√≠vel, n√£o √©? <br><br>  Agora vamos descobrir como trabalhar com ele, e tamb√©m podemos adicionar outro conjunto de r√©plicas √† topologia. <br><br><h3>  Aprofundando-se nos detalhes </h3><br>  Ent√£o o que aconteceu? <br><br>  Colocamos em funcionamento duas m√°quinas virtuais e lan√ßamos o manual Ansible que configurou nosso cluster.  Agora, vamos olhar dentro do arquivo <code>playbook.yml</code> : <br><br><pre> <code class="plaintext hljs">--- - name: Deploy my Tarantool Cartridge app hosts: all become: true become_user: root tasks: - name: Import Tarantool Cartridge role import_role: name: tarantool.cartridge</code> </pre> <br>  Nada de interessante acontece aqui;  vamos iniciar o papel <code>tarantool.cartridge</code> chamado <code>tarantool.cartridge</code> . <br><br>  O mais importante (a configura√ß√£o do cluster) est√° no arquivo de invent√°rio <code><a href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html">hosts.yml</a></code> : <br><br><pre> <code class="plaintext hljs">--- all: vars: # common cluster variables cartridge_app_name: getting-started-app cartridge_package_path: ./getting-started-app-1.0.0-0.rpm # path to package cartridge_cluster_cookie: app-default-cookie # cluster cookie # common ssh options ansible_ssh_private_key_file: ~/.vagrant.d/insecure_private_key ansible_ssh_common_args: '-o IdentitiesOnly=yes -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no' # INSTANCES hosts: storage-1: config: advertise_uri: '172.19.0.2:3301' http_port: 8181 app-1: config: advertise_uri: '172.19.0.3:3301' http_port: 8182 storage-1-replica: config: advertise_uri: '172.19.0.3:3302' http_port: 8183 children: # GROUP INSTANCES BY MACHINES host1: vars: # first machine connection options ansible_host: 172.19.0.2 ansible_user: vagrant hosts: # instances to be started on the first machine storage-1: host2: vars: # second machine connection options ansible_host: 172.19.0.3 ansible_user: vagrant hosts: # instances to be started on the second machine app-1: storage-1-replica: # GROUP INSTANCES BY REPLICA SETS replicaset_app_1: vars: # replica set configuration replicaset_alias: app-1 failover_priority: - app-1 # leader roles: - 'api' hosts: # replica set instances app-1: replicaset_storage_1: vars: # replica set configuration replicaset_alias: storage-1 weight: 3 failover_priority: - storage-1 # leader - storage-1-replica roles: - 'storage' hosts: # replica set instances storage-1: storage-1-replica:</code> </pre> <br>  Tudo o que precisamos fazer √© aprender a gerenciar inst√¢ncias e conjuntos de r√©plicas modificando esse arquivo.  Mais tarde, adicionaremos novas se√ß√µes a ele.  Para evitar confus√£o ao adicionar as se√ß√µes, observe a vers√£o final deste arquivo ou <code>hosts.updated.yml</code> , que est√° localizado no reposit√≥rio de amostra. <br><br><h3>  Gerenciando as inst√¢ncias </h3><br>  Em termos Ansible, cada inst√¢ncia √© um host (n√£o deve ser confundido com um servidor f√≠sico), ou seja, o n√≥ de infraestrutura que o Ansible gerenciar√°.  Para cada host, podemos especificar par√¢metros de conex√£o (como <code>ansible_host</code> e <code>ansible_user</code> ) e configura√ß√£o da inst√¢ncia.  A descri√ß√£o da inst√¢ncia est√° na se√ß√£o <code>hosts</code> . <br><br>  Vamos examinar a configura√ß√£o da inst√¢ncia <code>storage-1</code> : <br><br><pre> <code class="plaintext hljs">all: vars: ... # INSTANCES hosts: storage-1: config: advertise_uri: '172.19.0.2:3301' http_port: 8181 ...</code> </pre> <br>  Na vari√°vel de <code>config</code> , especificamos os par√¢metros da inst√¢ncia: <code>advertise URI</code> e <code>HTTP port</code> . <br><br>  Abaixo est√£o os par√¢metros das inst√¢ncias <code>app-1</code> e <code>storage-1-replica</code> . <br><br>  Devemos fornecer ao Ansible par√¢metros de conex√£o para cada inst√¢ncia.  Parece razo√°vel agrupar as inst√¢ncias por m√°quinas virtuais.  Para esse prop√≥sito, as inst√¢ncias s√£o agrupadas em <code>host1</code> e <code>host2</code> , e cada grupo na se√ß√£o <code>vars</code> cont√©m os valores de par√¢metro <code>ansible_user</code> e <code>ansible_user</code> para uma √∫nica m√°quina virtual.  E a se√ß√£o <code>hosts</code> cont√©m hosts (ou inst√¢ncias) inclu√≠dos neste grupo: <br><br><pre> <code class="plaintext hljs">all: vars: ... hosts: ... children: # GROUP INSTANCES BY MACHINES host1: vars: # first machine connection options ansible_host: 172.19.0.2 ansible_user: vagrant hosts: # instances to be started on the first machine storage-1: host2: vars: # second machine connection options ansible_host: 172.19.0.3 ansible_user: vagrant hosts: # instances to be started on the second machine app-1: storage-1-replica:</code> </pre> <br>  Vamos come√ßar a editar o <code>hosts.yml</code> .  Agora, adicionamos mais duas inst√¢ncias: <code>storage-2-replica</code> na primeira m√°quina virtual e <code>storage-2</code> na segunda: <br><br><pre> <code class="plaintext hljs">all: vars: ... # INSTANCES hosts: ... storage-2: # &lt;== config: advertise_uri: '172.19.0.3:3303' http_port: 8184 storage-2-replica: # &lt;== config: advertise_uri: '172.19.0.2:3302' http_port: 8185 children: # GROUP INSTANCES BY MACHINES host1: vars: ... hosts: # instances to be started on the first machine storage-1: storage-2-replica: # &lt;== host2: vars: ... hosts: # instances to be started on the second machine app-1: storage-1-replica: storage-2: # &lt;== ...</code> </pre> <br>  Inicie o manual do Ansible: <br><br><pre> <code class="plaintext hljs">$ ansible-playbook -i hosts.yml \ --limit storage-2,storage-2-replica \ playbook.yml</code> </pre> <br>  Observe a op√ß√£o <code>--limit</code> .  Como cada inst√¢ncia de cluster √© um host em termos de Ansible, podemos especificar explicitamente quais inst√¢ncias devem ser configuradas ao executar o manual. <br><br>  Ent√£o, voltamos √† interface do usu√°rio da web em <a href="http://localhost:8181/admin/cluster/dashboard">http: // localhost: 8181 / admin / cluster / dashboard</a> e examinamos nossas novas inst√¢ncias: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l2/jw/9-/l2jw9-hw2varlmqtt0tdnonh8tw.png"></div><br><br>  Em seguida, vamos dominar o gerenciamento de topologia. <br><br><h3>  Gerenciando a Topologia </h3><br>  Vamos agrupar nossas novas inst√¢ncias no conjunto de r√©plicas <code>storage-2</code> , adicionar um novo grupo de <code>replicaset_storage_2</code> e descrever os par√¢metros do conjunto de r√©plicas nas vari√°veis, como fizemos para <code>replicaset_storage_1</code> .  Na se√ß√£o <code>hosts</code> , especificamos quais inst√¢ncias devem ser inclu√≠das neste grupo (ou seja, nosso conjunto de r√©plicas): <br><br><pre> <code class="plaintext hljs">--- all: vars: ... hosts: ... children: ... # GROUP INSTANCES BY REPLICA SETS ... replicaset_storage_2: # &lt;== vars: # replicaset configuration replicaset_alias: storage-2 weight: 2 failover_priority: - storage-2 - storage-2-replica roles: - 'storage' hosts: # replicaset instances storage-2: storage-2-replica:</code> </pre> <br>  Em seguida, executamos o manual novamente: <br><br><pre> <code class="plaintext hljs">$ ansible-playbook -i hosts.yml \ --limit replicaset_storage_2 \ --tags cartridge-replicasets \ playbook.yml</code> </pre> <br>  Desta vez, passamos o nome do grupo correspondente √† nossa r√©plica definida no par√¢metro <code>--limit</code> . <br><br>  Vamos olhar para a op√ß√£o de <code>tags</code> . <br><br>  Nossa fun√ß√£o executa sucessivamente v√°rias tarefas marcadas com as seguintes tags: <br><br><ul><li>  <code>cartridge-instances</code> : gerenciamento de inst√¢ncia (configura√ß√£o, associa√ß√£o); </li><li>  <code>cartridge-replicasets</code> : gerenciamento de topologia (gerenciamento de conjunto de r√©plicas e remo√ß√£o permanente (expuls√£o) de inst√¢ncias do cluster); </li><li>  <code>cartridge-config</code> : controle de outros par√¢metros do cluster (inicializa√ß√£o vshard, failover autom√°tico, par√¢metros de autoriza√ß√£o e configura√ß√£o do aplicativo). </li></ul><br>  Podemos especificar explicitamente que parte do trabalho queremos fazer - e a fun√ß√£o pular√° o restante das tarefas.  Nesse caso, queremos apenas trabalhar com topologia, por isso especificamos conjuntos <code>cartridge-replicasets</code> . <br><br>  Vamos avaliar o resultado de nossos esfor√ßos.  Localize o novo conjunto de r√©plicas em <a href="http://localhost:8181/admin/cluster/dashboard">http: // localhost: 8181 / admin / cluster / dashboard</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sw/0z/gm/sw0zgm53me7ft63db8lxrswcxvw.png"></div><br><br>  Yay <br><br>  Tente alterar a configura√ß√£o das inst√¢ncias e conjuntos de r√©plicas e veja como a topologia do cluster √© alterada.  Voc√™ pode tentar diferentes casos de uso, como <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_delegation.html">atualiza√ß√£o sem</a> <code>memtx_memory</code> ou aumento do <code>memtx_memory</code> .  A fun√ß√£o tentaria fazer isso sem reiniciar a inst√¢ncia para reduzir o poss√≠vel tempo de inatividade do seu aplicativo. <br><br>  N√£o se esque√ßa de <code>vagrant halt</code> a interrup√ß√£o das m√°quinas virtuais quando terminar com elas. <br><br><h1>  O que tem dentro? </h1><br>  Aqui vou contar mais sobre o que aconteceu sob o cap√¥ do papel Ansible durante nossos testes. <br>  Vamos considerar as etapas de implanta√ß√£o de um aplicativo de cartucho. <br><br><h3>  Instalando o Pacote e Iniciando as Inst√¢ncias </h3><br>  A primeira coisa a fazer √© entregar o pacote no servidor e instal√°-lo.  Agora, a fun√ß√£o pode trabalhar com pacotes RPM e pacotes DEB. <br><br>  Em seguida, lan√ßamos as inst√¢ncias.  √â muito simples: cada inst√¢ncia √© um servi√ßo <code>systemd</code> separado.  Por exemplo: <br><br><pre> <code class="plaintext hljs">$ systemctl start myapp@storage-1</code> </pre> <br>  Este comando inicia a inst√¢ncia <code>storage-1</code> do <code>myapp</code> <br>  aplica√ß√£o.  A inst√¢ncia em execu√ß√£o procura sua <a href="https://www.tarantool.io/ru/doc/2.2/book/cartridge/cartridge_dev/">configura√ß√£o</a> em <code>/etc/tarantool/conf.d/</code> .  Voc√™ pode visualizar os logs da inst√¢ncia usando o <code>journald</code> . <br><br>  O arquivo da unidade <code>/etc/systemd/systemd/myapp@.sevice</code> para o servi√ßo systemd √© entregue com o pacote. <br><br>  O Ansible possui m√≥dulos internos para instala√ß√£o de pacotes e gerenciamento de servi√ßos systemd; portanto, n√£o inventamos nada de novo aqui. <br><br><h3>  Configurando a Topologia de Cluster </h3><br>  As coisas mais emocionantes acontecem aqui.  Tenho certeza que voc√™ concorda que √© estranho se preocupar com uma fun√ß√£o Ansible especial para instalar pacotes e executar servi√ßos <code>systemd</code> . <br><br>  Voc√™ pode configurar o cluster manualmente: <br><br><ul><li>  A primeira op√ß√£o √© abrir a interface do usu√°rio da Web e clicar nos bot√µes.  √â bastante adequado para uma inicializa√ß√£o √∫nica de v√°rias inst√¢ncias. </li><li>  A segunda op√ß√£o √© usar a API GraphQL.  Aqui voc√™ j√° pode automatizar algo, por exemplo, escrever um script em Python. </li><li>  A terceira op√ß√£o √© para os corajosos: v√° ao servidor, conecte-se a uma das inst√¢ncias com a ajuda do <code>tarantoolctl connect</code> e execute todas as a√ß√µes necess√°rias com o m√≥dulo Lua do <code>cartridge</code> . </li></ul><br>  A principal tarefa de nossa inven√ß√£o √© fazer essa parte mais dif√≠cil do trabalho para voc√™. <br><br>  O Ansible permite que voc√™ escreva seu pr√≥prio m√≥dulo e use-o em sua fun√ß√£o.  Nossa fun√ß√£o usa esses m√≥dulos para gerenciar os v√°rios componentes do cluster. <br><br>  Como isso funciona?  Voc√™ descreve o estado desejado do cluster em uma configura√ß√£o declarativa e a fun√ß√£o fornece a cada m√≥dulo sua pr√≥pria se√ß√£o de configura√ß√£o como entrada.  O m√≥dulo recebe o estado atual do cluster e o compara com a entrada.  Em seguida, o c√≥digo para o estado de cluster necess√°rio √© iniciado usando o soquete de uma das inst√¢ncias. <br><br><h1>  Resultados </h1><br>  Hoje, mostramos como implantar seu aplicativo Tarantool Cartridge e configurar uma topologia simples.  Para fazer isso, usamos o Ansible, uma ferramenta poderosa que √© f√°cil de usar e permite configurar v√°rios n√≥s de infraestrutura ao mesmo tempo (no nosso caso, as inst√¢ncias do cluster). <br><br>  Acima, examinamos uma das muitas maneiras de descrever a configura√ß√£o do cluster por meio do Ansible.  Depois de sentir que est√° pronto para mais, aprenda as <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html">melhores pr√°ticas</a> para escrever playbooks.  Voc√™ pode achar mais f√°cil gerenciar a topologia com <code>group_vars</code> e <code>host_vars</code> . <br><br>  Em breve, mostraremos como remover permanentemente (expulsar) inst√¢ncias da topologia, inicializar vshard, gerenciar failover autom√°tico, configurar autoriza√ß√£o e configurar o cluster de patches.  Enquanto isso, voc√™ pode revisar a <a href="https://github.com/tarantool/ansible-cartridge">documenta√ß√£o</a> e tentar alterar as configura√ß√µes do cluster. <br><br>  Se algo der errado, <a href="https://github.com/tarantool/ansible-cartridge/issues/new">informe-nos</a> sobre o problema.  Faremos o nosso melhor para resolver qualquer problema! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt480468/">https://habr.com/ru/post/pt480468/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt480452/index.html">OWASP Moscow Meetup # 9: Registros de desempenho</a></li>
<li><a href="../pt480458/index.html">Assista "Cell of time"</a></li>
<li><a href="../pt480460/index.html">Solu√ß√£o fundamental de um sistema de equa√ß√µes lineares. Vista lateral</a></li>
<li><a href="../pt480462/index.html">Como debati uma lista duplamente vinculada de O (1)</a></li>
<li><a href="../pt480466/index.html">Especifica√ß√µes do dialisador: o caminho dos Jedi</a></li>
<li><a href="../pt480470/index.html">Onde trabalhar como desenvolvedor j√∫nior</a></li>
<li><a href="../pt480472/index.html">[Anima√ß√£o] Technobrands dominam o mundo</a></li>
<li><a href="../pt480480/index.html">Como os computadores qu√¢nticos funcionam. Montando o quebra-cabe√ßa</a></li>
<li><a href="../pt480482/index.html">Como construir um computador para ML</a></li>
<li><a href="../pt480484/index.html">BeerPHP: o que √©, por que ir e como correr na sua cidade</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>