<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÖ üêú üàÇÔ∏è Blockchain: ¬øqu√© debemos construir PoC? üëò üåæ üèä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬°Los ojos tienen miedo y las manos pican! 

 En art√≠culos anteriores, descubrimos las tecnolog√≠as en las que se construyen las cadenas de bloques ( ¬øP...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Blockchain: ¬øqu√© debemos construir PoC?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466157/">  <i>¬°Los ojos tienen miedo y las manos pican!</i> <br><br>  En art√≠culos anteriores, descubrimos las tecnolog√≠as en las que se construyen las cadenas de bloques ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øPara qu√© debemos construir una cadena de bloques?</a> ) Y los casos que se pueden implementar con su ayuda ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øQu√© debemos construir un caso?</a> ).  ¬°Es hora de trabajar con tus manos!  Para la implementaci√≥n de pilotos y PoC (Prueba de concepto), prefiero usar nubes, porque  se puede acceder a ellos desde cualquier parte del mundo y, a menudo, no tiene que perder tiempo en la instalaci√≥n tediosa del entorno, porque  Hay configuraciones predefinidas.  Entonces, hagamos algo simple, por ejemplo, una red para transferir monedas entre los participantes y llamarlo modestamente Citcoin.  Para esto, utilizaremos la nube de IBM y la tela universal blockled Hyperledger Fabric.  Primero, veamos por qu√© Hyperledger Fabric se llama blockchain universal. <br><br><img src="https://habrastorage.org/webt/f6/tc/q3/f6tcq3wp6dn1kaity-mtv9xkkik.png" alt="imagen"><br><a name="habracut"></a><br><h2>  Tela Hyperledger: una cadena de bloques universal </h2><br>  En t√©rminos generales, el sistema de informaci√≥n universal es: <br><br><ul><li>  Un conjunto de servidores y un n√∫cleo de software que realiza la l√≥gica empresarial; </li><li>  Interfaces para interactuar con el sistema; </li><li>  Medios para el registro, autenticaci√≥n y autorizaci√≥n de dispositivos / personas; </li><li>  Base de datos que almacena datos operativos y de archivo: </li></ul><br><img src="https://habrastorage.org/webt/ha/dt/cr/hadtcr9siyz1oy-ouwou9gwhyzs.png" alt="imagen"><br><br>  La versi√≥n oficial de qu√© es Hyperledger Fabric se puede leer en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio</a> y, en resumen, Hyperledger Fabric es una plataforma de c√≥digo abierto que le permite construir cadenas de bloques cerradas y ejecutar contratos inteligentes arbitrarios escritos en los lenguajes de programaci√≥n JS y Go.  Echemos un vistazo a la arquitectura de Hyperledger Fabric en detalle y asegur√©monos de que sea un sistema universal que solo tenga los detalles espec√≠ficos de almacenamiento y registro de datos.  La especificidad es que los datos, como en todas las cadenas de bloques, se almacenan en bloques que se colocan en la cadena de bloques solo si los participantes llegaron a un consenso y despu√©s de registrar los datos no se pueden corregir o eliminar discretamente. <br><br><h2>  Arquitectura de tela Hyperledger </h2><br>  El diagrama muestra la arquitectura de la tela Hyperledger: <br><br><img src="https://habrastorage.org/webt/lt/av/n_/ltavn_otc0ix7lspm1wqvvz2zl4.png" alt="imagen"><br><br>  <b>Organizaciones</b> : las organizaciones contienen pares, es decir  blockchain existe debido al apoyo de las organizaciones.  Diferentes organizaciones pueden ser miembros del mismo canal. <br><br>  <b>Canal</b> : una estructura l√≥gica que une a los pares en grupos, es decir  Blockchain est√° configurado.  Hyperledger Fabric puede procesar simult√°neamente varias cadenas de bloques con diferentes l√≥gicas comerciales. <br><br>  <b>El Proveedor de servicios de membres√≠a (MSP)</b> es una CA (Autoridad de certificaci√≥n) para emitir identidades y asignar roles.  Para crear un nodo, debe interactuar con MSP. <br><br>  <b>Nodos pares</b> : verifique las transacciones, almacene la cadena de bloques, ejecute contratos inteligentes e interact√∫e con las aplicaciones.  Los pares tienen una identidad (certificado digital) que emite un MSP.  A diferencia de la red Bitcoin o Etherium, donde todos los nodos son iguales, en los nodos Hyperledger Fabric juegan diferentes roles: <br><br><ul><li>  Peer puede <b>respaldar a peer</b> (EP) y ejecutar contratos inteligentes. </li><li>  <b>Compitiendo entre pares</b> (CP): solo guarde datos en la cadena de bloques y actualice el "Estado mundial". </li><li>  <b>Anchor Peer</b> (AP): si varias organizaciones participan en la cadena de bloques, entonces los pares de anclaje se utilizan para comunicarse entre ellas.  Cada organizaci√≥n debe tener uno o m√°s pares de anclaje.  Con la ayuda de AP, cualquier par en la organizaci√≥n puede obtener informaci√≥n sobre todos los pares en otras organizaciones.  El <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">protocolo de chismes se</a> utiliza para sincronizar informaci√≥n entre AP. </li><li>  <b>L√≠der</b> : si la organizaci√≥n tiene varios pares, solo el l√≠der recibir√° bloques del servicio de pedidos y se los dar√° a los otros pares.  Un l√≠der puede ser establecido est√°ticamente o seleccionado din√°micamente por sus pares en una organizaci√≥n.  El protocolo de chismes tambi√©n se utiliza para sincronizar la informaci√≥n del l√≠der. </li></ul><br>  <b>Los activos</b> son entidades de valor que se almacenan en la cadena de bloques.  M√°s espec√≠ficamente, se trata de datos de valor clave en formato JSON.  Son estos datos los que se registran en Blockchain.  Tienen una historia que se almacena en la cadena de bloques y el estado actual, que se almacena en la base de datos del estado mundial.  Las estructuras de datos se llenan aleatoriamente seg√∫n las tareas comerciales.  No hay campos obligatorios, la √∫nica recomendaci√≥n es que los activos deben tener un propietario y ser valiosos. <br><br>  <b>Libro mayor</b> : consiste en el blockchain "Blockchain" y la base de datos "Word state", que almacena el estado actual de los activos.  El estado mundial usa LevelDB o CouchDB. <br><br>  <b>Contrato inteligente</b> : mediante contratos inteligentes, se implementa la l√≥gica de negocios del sistema.  En Hyperledger Fabric, los contratos inteligentes se denominan chaincode.  Con la ayuda de chaincode, se definen activos y transacciones sobre ellos.  Hablando en lenguaje t√©cnico, los contratos inteligentes son m√≥dulos de software implementados en los lenguajes de programaci√≥n JS o Go. <br><br>  <b>Pol√≠tica de respaldo</b> : para cada chaincode, puede especificar cu√°ntas pol√≠ticas y de qui√©n desea esperar confirmaciones para la transacci√≥n.  Si no se establece la pol√≠tica, se usa por defecto: "la transacci√≥n debe ser confirmada por cualquier miembro de cualquier organizaci√≥n en el canal".  Ejemplos de pol√≠ticas: <br><br><ul><li>  Cualquier administrador de la organizaci√≥n debe confirmar la transacci√≥n; </li><li>  Cualquier miembro o cliente de la organizaci√≥n debe confirmar; </li><li>  Debe confirmar cualquier organizaci√≥n de pares. </li></ul><br>  <b>Servicio de pedidos</b> : empaqueta las transacciones en bloques y env√≠a pares al canal.  Garantiza la entrega de mensajes a todos los pares en la red.  Para sistemas industriales, el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">agente de mensajes Kafka se</a> utiliza para desarrollar y probar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Solo</a> . <br><br><h2>  Flujo de llamadas </h2><br><img src="https://habrastorage.org/webt/we/9m/wt/we9mwttlva0u7k0-zv2r6998rss.png" alt="imagen"><br><br><ul><li>  La aplicaci√≥n interact√∫a con Hyperledger Fabric utilizando Go, Node.js o Java SDK; </li><li>  El cliente crea una transacci√≥n de tx y la env√≠a a sus pares; </li><li>  Peer verifica la firma del cliente, completa la transacci√≥n y env√≠a la firma de respaldo al cliente.  Chaincode se ejecuta solo en el par que lo respalda, y el resultado de su ejecuci√≥n se env√≠a a todos los pares.  Este algoritmo de trabajo se llama consenso de PBFT (Practical Byzantine Fault Tolerant).  Se diferencia del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BFT cl√°sico</a> en que el mensaje se env√≠a y no se espera la confirmaci√≥n de todos los participantes, sino solo de un conjunto espec√≠fico; </li><li>  Despu√©s de que el cliente ha recibido el n√∫mero de respuestas correspondientes a la pol√≠tica de aprobaci√≥n, env√≠a la transacci√≥n al servicio de pedidos; </li><li>  El servicio de pedidos forma un bloque y lo env√≠a a todos los pares comprometidos.  El servicio de pedidos proporciona una escritura secuencial de bloques, que excluye la denominada bifurcaci√≥n de libro mayor ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">consulte la secci√≥n "Bifurcaciones"</a> ); </li><li>  Los pares reciben un bloque, verifican la pol√≠tica de respaldo nuevamente, escriben el bloque en la cadena de bloques y cambian el estado en el DB "Estado mundial". </li></ul><br>  Es decir  Resulta la separaci√≥n de roles entre nodos.  Esto proporciona escalabilidad y seguridad de blockchain: <br><br><ul><li>  Los contratos inteligentes (chaincode) realizan la aprobaci√≥n de sus pares.  Esto garantiza la confidencialidad de los contratos inteligentes, como  no es almacenado por todos los participantes, sino solo en sus compa√±eros de apoyo. </li><li>  Ordenar deber√≠a funcionar r√°pido.  Esto est√° garantizado por el hecho de que Ordenar solo forma un bloque y lo env√≠a a un grupo fijo de pares l√≠deres. </li><li>  Los pares comprometidos solo almacenan la cadena de bloques: puede haber muchos de ellos y no requieren mucha potencia y trabajo instant√°neo. </li></ul><br>  Para obtener m√°s informaci√≥n sobre las soluciones arquitect√≥nicas de Hyperledger Fabric y por qu√© funciona de esta manera, consulte aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Or√≠genes de la arquitectura</a> o aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hyperledger Fabric: un sistema operativo distribuido para blockchains autorizados</a> . <br><br>  Entonces, Hyperledger Fabric es un sistema verdaderamente universal con el que puede: <br><br><ul><li>  Implemente l√≥gica comercial arbitraria utilizando el mecanismo de contrato inteligente; </li><li>  Escriba y reciba datos de una base de datos blockchain en formato JSON; </li><li>  Proporcione y verifique el acceso a la API utilizando la Autoridad de certificaci√≥n. </li></ul><br>  Ahora que hemos descubierto los detalles de la tela Hyperledger, ¬°finalmente hagamos algo √∫til! <br><br><h2>  Expandir Blockchain </h2><br><h3>  Declaraci√≥n del problema. </h3><br>  La tarea es implementar la red Citcoin con las siguientes funciones: crear una cuenta, obtener un saldo, reponer la cuenta, transferir monedas de una cuenta a otra.  Dibujemos un modelo de objeto, que implementaremos m√°s adelante en un contrato inteligente.  Por lo tanto, tendremos cuentas que se identifican por nombres y que contienen un saldo y una lista de cuentas.  Las cuentas y una lista de cuentas est√°n en t√©rminos de activos de Hyperledger Fabric.  En consecuencia, tienen una historia y un estado actual.  Intentar√© dibujarlo claramente: <br><br><img src="https://habrastorage.org/webt/wj/vx/uc/wjvxuc7wn8q8z8ob7efborjwfeu.png" alt="imagen"><br><br>  Las cifras superiores son el estado actual, que se almacena en la base de datos del Estado mundial.  Debajo de ellos hay figuras que muestran la historia que se almacena en la cadena de bloques.  El estado actual de los activos se modifica por las transacciones.  El activo solo cambia en su totalidad, por lo tanto, como resultado de la transacci√≥n, se crea un nuevo objeto y el valor actual del activo pasa al historial. <br><br><h3>  IBM Cloud </h3><br>  Creamos una cuenta en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la nube de IBM</a> .  Para usar la plataforma blockchain, debe actualizarla a Pay-As-You-Go.  Este proceso puede no ser r√°pido, porque  IBM solicita informaci√≥n adicional y la verifica manualmente.  De lo positivo, puedo decir que IBM tiene buenos materiales de capacitaci√≥n que le permiten implementar Hyperledger Fabric en su nube.  Me gustaron las siguientes series de art√≠culos y ejemplos: <br><br><ul><li>  <a href="">Cree una red b√°sica de blockchain usando la plataforma Blockchain</a> </li><li>  <a href="">Crear y ejecutar un contrato inteligente de blockchain</a> </li><li>  <a href="">Emitir eventos desde la plataforma Blockchain</a> </li></ul><br>  Las siguientes son capturas de pantalla de la plataforma IBM Blockchain.  Esta no es una instrucci√≥n para crear una cadena de bloques, sino simplemente una demostraci√≥n del alcance de la tarea.  Entonces, para nuestros prop√≥sitos, hacemos una Organizaci√≥n: <br><br><img src="https://habrastorage.org/webt/vw/gr/co/vwgrcodh-v21eslmmfe_1nkruhk.png" alt="imagen"><br><br>  En √©l creamos nodos: Orderer CA, Org1 CA, Orderer Peer: <br><br><img src="https://habrastorage.org/webt/f7/1x/g2/f71xg2fhmy258ihqyaunufjgas4.png" alt="imagen"><br><br>  Comenzamos usuarios: <br><br><img src="https://habrastorage.org/webt/1t/k5/_i/1tk5_ihjhcimki8xaeuxenwszh0.png" alt="imagen"><br><br>  Crea un canal y ll√°malo citcoin: <br><br><img src="https://habrastorage.org/webt/hv/y-/av/hvy-av3p4pjrpgonz47bcj0qebq.png" alt="imagen"><br><br>  En esencia, Channel es una cadena de bloques, por lo que comienza con un bloque cero (bloque Genesis): <br><br><img src="https://habrastorage.org/webt/9x/n0/c0/9xn0c0ihpxzmytycm9olkqi6klm.png" alt="imagen"><br><br><h3>  Escribir un contrato inteligente </h3><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* * Citcoin smart-contract v1.5 for Hyperledger Fabric * (c) Alexey Sushkov, 2019 */</span></span> <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Contract } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fabric-contract-api'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> maxAccounts = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CitcoinEvents</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Contract</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> instantiate(ctx) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.info(<span class="hljs-string"><span class="hljs-string">'instantiate'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> emptyList = []; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ctx.stub.putState(<span class="hljs-string"><span class="hljs-string">'accounts'</span></span>, Buffer.from(<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(emptyList))); } <span class="hljs-comment"><span class="hljs-comment">// Get all accounts async GetAccounts(ctx) { // Get account list: let accounts = '{}' let accountsData = await ctx.stub.getState('accounts'); if (accountsData) { accounts = JSON.parse(accountsData.toString()); } else { throw new Error('accounts not found'); } return accountsData.toString() } // add a account object to the blockchain state identifited by their name async AddAccount(ctx, name, balance) { // this is account data: let account = { name: name, balance: Number(balance), type: 'account', }; // create account: await ctx.stub.putState(name, Buffer.from(JSON.stringify(account))); // Add account to list: let accountsData = await ctx.stub.getState('accounts'); if (accountsData) { let accounts = JSON.parse(accountsData.toString()); if (accounts.length &lt; maxAccounts) { accounts.push(name); await ctx.stub.putState('accounts', Buffer.from(JSON.stringify(accounts))); } else { throw new Error('Max accounts number reached'); } } else { throw new Error('accounts not found'); } // return object return JSON.stringify(account); } // Sends money from Account to Account async SendFrom(ctx, fromAccount, toAccount, value) { // get Account from let fromData = await ctx.stub.getState(fromAccount); let from; if (fromData) { from = JSON.parse(fromData.toString()); if (from.type !== 'account') { throw new Error('wrong from type'); } } else { throw new Error('Accout from not found'); } // get Account to let toData = await ctx.stub.getState(toAccount); let to; if (toData) { to = JSON.parse(toData.toString()); if (to.type !== 'account') { throw new Error('wrong to type'); } } else { throw new Error('Accout to not found'); } // update the balances if ((from.balance - Number(value)) &gt;= 0 ) { from.balance -= Number(value); to.balance += Number(value); } else { throw new Error('From Account: not enought balance'); } await ctx.stub.putState(from.name, Buffer.from(JSON.stringify(from))); await ctx.stub.putState(to.name, Buffer.from(JSON.stringify(to))); // define and set Event let Event = { type: "SendFrom", from: from.name, to: to.name, balanceFrom: from.balance, balanceTo: to.balance, value: value }; await ctx.stub.setEvent('SendFrom', Buffer.from(JSON.stringify(Event))); // return to object return JSON.stringify(from); } // get the state from key async GetState(ctx, key) { let data = await ctx.stub.getState(key); let jsonData = JSON.parse(data.toString()); return JSON.stringify(jsonData); } // GetBalance async GetBalance(ctx, accountName) { let data = await ctx.stub.getState(accountName); let jsonData = JSON.parse(data.toString()); return JSON.stringify(jsonData); } // Refill own balance async RefillBalance(ctx, toAccount, value) { // get Account to let toData = await ctx.stub.getState(toAccount); let to; if (toData) { to = JSON.parse(toData.toString()); if (to.type !== 'account') { throw new Error('wrong to type'); } } else { throw new Error('Accout to not found'); } // update the balance to.balance += Number(value); await ctx.stub.putState(to.name, Buffer.from(JSON.stringify(to))); // define and set Event let Event = { type: "RefillBalance", to: to.name, balanceTo: to.balance, value: value }; await ctx.stub.setEvent('RefillBalance', Buffer.from(JSON.stringify(Event))); // return to object return JSON.stringify(from); } } module.exports = CitcoinEvents;</span></span></code> </pre> <br>  Intuitivamente, todo debe quedar claro aqu√≠: <br><br><ul><li>  Hay varias funciones (AddAccount, GetAccounts, SendFrom, GetBalance, RefillBalance) que el programa de demostraci√≥n llamar√° utilizando la API de Hyperledger Fabric. </li><li>  Las funciones SendFrom y RefillBalance generan eventos (Evento) que recibir√° el programa de demostraci√≥n. </li><li>  Funci√≥n instanciar: se llama una vez durante la creaci√≥n de instancias de un contrato inteligente.  De hecho, se llama no una vez, sino cada vez que se cambia una versi√≥n de un contrato inteligente.  Por lo tanto, inicializar la lista con una matriz vac√≠a es una mala idea, porque  Ahora, al cambiar la versi√≥n de un contrato inteligente, perderemos la lista actual.  Pero nada, solo estoy aprendiendo). </li><li>  Las cuentas y una lista de cuentas (cuentas) son estructuras de datos JSON.  Para la manipulaci√≥n de datos, se utiliza JS. </li><li>  Puede obtener el valor actual de un activo llamando a la funci√≥n getState y actualizarlo usando putState. </li><li>  Al crear una cuenta, se llama a la funci√≥n AddAccount, en la que se realiza una comparaci√≥n para el n√∫mero m√°ximo de cuentas en la cadena de bloques (maxAccounts = 5).  Y hay una jamba (¬ønotado?), Que conduce a un aumento infinito en el n√∫mero de cuentas.  Tales errores deben ser evitados) </li></ul><br>  A continuaci√≥n, suba el contrato inteligente a Channel e inst√°lelo: <br><br><img src="https://habrastorage.org/webt/ew/3a/ok/ew3aok9gsgrcaadaor-b0xwxllg.png" alt="imagen"><br><br>  Observamos la transacci√≥n para instalar Smart Contract: <br><br><img src="https://habrastorage.org/webt/om/m4/x9/omm4x9np0s1i8wjki6guvvyc46o.png" alt="imagen"><br><br>  Vemos los detalles sobre nuestro canal: <br><br><img src="https://habrastorage.org/webt/tj/bd/eb/tjbdebruoky86aiwhx5t7ayqljq.png" alt="imagen"><br><br>  Como resultado, obtenemos el siguiente diagrama de red blockchain en la nube de IBM.  Tambi√©n hay un programa de demostraci√≥n que se ejecuta en la nube de Amazon en un servidor virtual (consulte la siguiente secci√≥n para m√°s detalles): <br><br><img src="https://habrastorage.org/webt/bx/sb/1s/bxsb1s6s0c36u_2vh0lmjqmqj9u.png" alt="imagen"><br><br><h2>  Crear una GUI para llamadas de API de Hyperledger Fabric </h2><br>  Hyperledger Fabric tiene una API que se puede usar para: <br><br><ul><li>  Canal de creaciones; </li><li>  Conexiones entre pares al canal; </li><li>  Instalaci√≥n e instanciaci√≥n de contratos inteligentes en el canal; </li><li>  Llamada de transacci√≥n; </li><li>  Solicitar informaci√≥n sobre la cadena de bloques. </li></ul><br><h3>  Desarrollo de aplicaciones </h3><br>  En nuestro programa de demostraci√≥n, usaremos la API solo para invocar transacciones y solicitar informaci√≥n, porque  Ya hemos tomado los pasos restantes con la plataforma de blockchain de IBM.  Escribimos una GUI usando una pila de tecnolog√≠a est√°ndar: Express.js + Vue.js + Node.js.  Puede escribir un art√≠culo separado sobre c√≥mo comenzar a crear aplicaciones web modernas.  Aqu√≠ dejar√© un enlace a la serie de conferencias que m√°s me gust√≥: la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aplicaci√≥n web Full Stack usando Vue.js y Express.js</a> .  El resultado es una aplicaci√≥n cliente-servidor con una interfaz gr√°fica familiar al estilo de Material Design de Google.  La API REST entre el cliente y el servidor consta de varias llamadas: <br><br><ul><li>  HyperledgerDemo / v1 / init: inicializa la cadena de bloques; </li><li>  HyperledgerDemo / v1 / accounts / list: obtenga una lista de todas las cuentas </li><li>  HyperledgerDemo / v1 / account? Name = Bob &amp; balance = 100 - crea una cuenta Bob; </li><li>  HyperledgerDemo / v1 / info? Account = Bob: obtenga informaci√≥n sobre la cuenta de Bob; </li><li>  HyperledgerDemo / v1 / transacci√≥n? De = Bob &amp; to = Alice &amp; volume = 2 - transfiere dos monedas de Bob a Alice; </li><li>  HyperledgerDemo / v1 / disconnect: cierra la conexi√≥n a la cadena de bloques. </li></ul><br>  Puse la descripci√≥n de la API con ejemplos en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el sitio web de Postman</a> , un programa conocido para probar la API HTTP. <br><br><h3>  Aplicaci√≥n de demostraci√≥n de Amazon Cloud </h3><br>  La aplicaci√≥n se carg√≥ en Amazon, porque  Hasta el momento, IBM no ha podido actualizar mi cuenta y permitir la creaci√≥n de servidores virtuales.  C√≥mo la cereza adjunt√≥ el dominio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.citcoin.info</a> .  Mantendr√© el servidor encendido por un momento, luego lo apagar√©, porque  los centavos de alquiler est√°n goteando, y las monedas de citcoin a√∫n no se cotizan en el intercambio). Puse capturas de pantalla de la demostraci√≥n en el art√≠culo para que la l√≥gica del trabajo sea clara.  La aplicaci√≥n de demostraci√≥n puede: <br><br><ul><li>  Inicializa la cadena de bloques; </li><li>  Crear una cuenta (pero ahora no cree una nueva cuenta, porque la cantidad m√°xima de cuentas prescritas en el contrato inteligente se ha alcanzado en la cadena de bloques); </li><li>  Obtenga una lista de cuentas; </li><li>  Transfiera monedas de citcoin entre Alice, Bob y Alex; </li><li>  Recibir eventos (pero ahora no hay forma de mostrar eventos, por lo tanto, para simplificar, la interfaz dice que los eventos no son compatibles); </li><li>  Registrar acciones. </li></ul><br>  Primero, inicialice la cadena de bloques: <br><br><img src="https://habrastorage.org/webt/o8/j5/te/o8j5tev3u9drgclmlfzluoys-e4.png" alt="imagen"><br><br>  A continuaci√≥n, inicie su cuenta, no juegue con saldo: <br><br><img src="https://habrastorage.org/webt/e1/eo/ck/e1eockzjedclvktadadhnbsgkem.png" alt="imagen"><br><br>  Obtenemos una lista de todas las cuentas disponibles: <br><br><img src="https://habrastorage.org/webt/_0/ih/o-/_0iho-vlhsg0v6abggskdshpmow.png" alt="imagen"><br><br>  Seleccionamos al remitente y al destinatario, obtenemos sus saldos.  Si el remitente y el destinatario son iguales, su cuenta se repondr√°: <br><br><img src="https://habrastorage.org/webt/c7/go/vu/c7govuxmtn4wkcc_4byqz5dzgd8.png" alt="imagen"><br><br>  En el registro, monitoreamos la ejecuci√≥n de transacciones: <br><br><img src="https://habrastorage.org/webt/lw/sj/tb/lwsjtbmwe8oplpok_mg8ocvjirq.png" alt="imagen"><br><br>  En realidad, con un programa de demostraci√≥n, eso es todo.  A continuaci√≥n, puede ver nuestra transacci√≥n en blockchain: <br><br><img src="https://habrastorage.org/webt/cp/cu/ik/cpcuikr02wqi_nwht9liarcpkhk.png" alt="imagen"><br><br>  Y la lista general de transacciones: <br><br><img src="https://habrastorage.org/webt/_z/1t/ej/_z1tejxfntvmmqugqzf04plkrae.png" alt="imagen"><br><br>  Con esto, completamos con √©xito la implementaci√≥n de PoC para crear la red Citcoin.  ¬øQu√© m√°s se necesita hacer para que Citcoin se convierta en una red de transferencia de monedas completa?  Solo un poco: <br><br><ul><li>  En la etapa de creaci√≥n de una cuenta, implemente la generaci√≥n de una clave privada / p√∫blica.  La clave privada debe almacenarse en la cuenta de usuario, p√∫blica en la cadena de bloques. </li><li>  Realice una transferencia de monedas en la que se use una clave p√∫blica para identificar al usuario, no un nombre. </li><li>  Cifre las transacciones que van del usuario al servidor con su clave privada. </li></ul><br><h2>  Conclusi√≥n </h2><br>  Hemos implementado la red Citcoin con funciones: agregar una cuenta, obtener un saldo, reponer su cuenta, transferir monedas de una cuenta a otra.  Entonces, ¬øcu√°nto nos cost√≥ construir PoC? <br><br><ul><li>  Necesitamos estudiar blockchain en general y Hyperledger Fabric en particular; </li><li>  Aprenda a usar las nubes IBM o Amazon; </li><li>  Aprenda el lenguaje de programaci√≥n JS y algunos marcos web; </li><li>  Si es necesario almacenar algunos datos no en la cadena de bloques, sino en una base de datos separada, aprenda a integrarse, por ejemplo, con PostgreSQL; </li><li>  Y por √∫ltimo, pero no menos importante, ¬°sin conocimiento de Linux en el mundo moderno, en ninguna parte!) </li></ul><br>  Por supuesto, no es ciencia espacial, ¬°pero debes sudar! <br><br><h3>  Fuentes de GitHub </h3><br>  Puso el c√≥digo fuente en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> .  Una breve descripci√≥n del repositorio: <br>  Directorio " <b>servidor</b> " - servidor Node.js <br>  Directorio " <b>cliente</b> " - Cliente Node.js <br>  El directorio " <b>blockchain</b> " (los valores y las claves de los par√°metros, por supuesto, no funcionan y solo se dan como ejemplo): <br><br><ul><li>  contrato - fuente del contrato inteligente </li><li>  billetera: claves de usuario para usar la API de Hyperledger Fabric. </li><li>  * .cds: versiones compiladas de contratos inteligentes </li><li>  Archivos * .json: archivos de configuraci√≥n de muestra para usar la API de Hyperledger Fabric </li></ul><br>  <b><font color="#B22222">¬°Es solo el comienzo!</font></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/466157/">https://habr.com/ru/post/466157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../466147/index.html">Administrador de visualizaci√≥n de datos reactivos. Introduccion</a></li>
<li><a href="../466149/index.html">Crear un s√≠mbolo de conector con texto "din√°mico" en OrCAD</a></li>
<li><a href="../466151/index.html">Investigaci√≥n: programas extra√±os en el registro de software dom√©stico</a></li>
<li><a href="../466153/index.html">Crear un documento de dise√±o de misi√≥n de juego narrativo usando el ejemplo de Last of Us</a></li>
<li><a href="../466155/index.html">Arquitectura y caracter√≠sticas de la red de datos de Tarantool</a></li>
<li><a href="../466159/index.html">Por qu√© la velocidad es importante en un intercambio moderno y c√≥mo superar a los competidores: 3 formas pr√°cticas</a></li>
<li><a href="../466165/index.html">C√≥mo la inteligencia artificial ayuda a gestionar proyectos</a></li>
<li><a href="../466169/index.html">Oferta especial para estudiantes que trabajan de JetBrains</a></li>
<li><a href="../466171/index.html">Cinco razones para ir a JUG.EKB</a></li>
<li><a href="../466179/index.html">fform: React & JSONSchema - m√°xima flexibilidad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>