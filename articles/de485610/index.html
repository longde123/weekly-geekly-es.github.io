<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≥üèº üòä üìî Erstellen Sie eine Qt-Anwendung in WebAssembly unter Windows ‚û∞ ‚òùüèø üö°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wie Sie wissen, k√∂nnen in Qt geschriebene Anwendungen, die plattform√ºbergreifend sind, von Desktops, Mobilger√§ten, dem Internet der Dinge bis hin zu M...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen Sie eine Qt-Anwendung in WebAssembly unter Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485610/"><img src="https://habrastorage.org/webt/2v/ru/wl/2vruwlzn5xvqonnbrju4xfdatfs.png"><br><br>  Wie Sie wissen, k√∂nnen in Qt geschriebene Anwendungen, die <a href="https://doc.qt.io/qt-5/supported-platforms.html" rel="nofollow">plattform√ºbergreifend sind,</a> von <a href="https://www.qt.io/use-cases" rel="nofollow">Desktops, Mobilger√§ten, dem Internet der Dinge</a> bis hin zu <a href="https://www.qt.io/blog/2019/08/21/announcing-qt-mcus" rel="nofollow">Mikrocontrollern ausgef√ºhrt werden</a> . <br><br>  Eine M√∂glichkeit besteht darin, eine Qt-Anwendung in WebAssembly zu erstellen, mit der Sie sie im Browser eines Benutzers ausf√ºhren k√∂nnen.  Daher besteht das Aktualisieren der Anwendung f√ºr den Benutzer darin, eine neue WASM-Datei auf den Server hochzuladen. <br><br>  Um die Bereitstellung der Anwendung als Teil dieses Artikels zu vereinfachen, stellen wir die Qt-Anwendung in WebAssembly f√ºr Windows √ºber die Befehlszeile zusammen. <a name="habracut"></a><br><br>  Die Version von Qt 5.13.2 wurde im Artikel verwendet, und ich glaube, dass der Benutzer die Qt-Umgebung installiert und konfiguriert hat und Anwendungen f√ºr Desktop in Windows sammelt. <br><br>  F√ºhren Sie das Hilfsprogramm MaintenanceTool.exe aus, w√§hlen Sie "Komponenten hinzuf√ºgen oder entfernen" aus, aktivieren Sie das Kontrollk√§stchen WebAssembly und warten Sie, bis die Installation abgeschlossen ist. <br><br><img src="https://habrastorage.org/webt/ed/s9/sa/eds9saafk20p2aq8icyhkz567fa.png"><br><br>  Erstellen Sie ein leeres Projekt, zum Beispiel in Qt Creator (Qt Stack-Ansicht) und speichern Sie es. <br><br>  Wir gehen zur offiziellen Qt <a href="https://doc.qt.io/qt-5/wasm.html" rel="nofollow">WASM-</a> Dokumentationsseite. <br><br>  Wir fangen an, esmdk zu installieren.  Laden Sie <a href="https://github.com/emscripten-core/emscripten" rel="nofollow">emscripten</a> herunter und entpacken Sie es beispielsweise in c: \ wasm <br><br>  Wir starten die Kommandozeile (fangen an, cmd auszuf√ºhren) und versuchen sie zu installieren: <br><br><pre><code class="plaintext hljs">cd c:\emsdk emsdk.bat install sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Hier passiert nichts.  Und der Cursor befindet sich bereits in der n√§chsten Zeile.  Was k√∂nnte passieren?  Mal sehen warum?  √ñffnen Sie die Datei mit dem Editor und sehen Sie: <br><br><img src="https://habrastorage.org/webt/zf/em/7g/zfem7g3qowujeln8bnqprb3g2uu.png"><br><br>  Brauchen wir eine Python?  √úberpr√ºfen?  Wir schreiben in die Kommandozeile <br><br><pre> <code class="plaintext hljs">c:\emsdk&gt;python --version "python"      ,     .</code> </pre> <br>  Dann m√ºssen wir noch Python installieren.  <a href="https://www.python.org/downloads/windows/" rel="nofollow">Laden Sie</a> es <a href="https://www.python.org/downloads/windows/" rel="nofollow">herunter</a> und installieren Sie es.  Denken Sie daran, ein H√§kchen hinzuzuf√ºgen, wenn Sie "Add Python 3.8 to PATH" installieren. <br><br><img src="https://habrastorage.org/webt/zh/sq/dg/zhsqdg097xt83hk9pd9bjycvjia.png"><br><br>  Schlie√üen Sie nach dem Herunterladen und Installieren die Befehlszeile und f√ºhren Sie CMD erneut aus.  Wir pr√ºfen: <br><br><pre> <code class="plaintext hljs">c:\emsdk&gt;python --version Python 3.8.1</code> </pre><br>  Installieren Sie emsdk und aktivieren Sie die Build-Umgebung: <br><br><pre> <code class="plaintext hljs">emsdk.bat install sdk-fastcomp-1.38.27-64bit emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Wir pr√ºfen: <br><br><pre> <code class="plaintext hljs">em++</code> </pre> <br>  Der Compiler ist fertig.  Es ist Zeit, mit der Erstellung unserer Anwendung zu beginnen.  Schauen wir uns den Ordner an, in dem Qt wasm installiert ist: In meinem Fall befindet er sich in C: \ Qt \ 5.13.2 \ wasm_32 <br><br>  F√ºhren Sie die Befehlszeile mit der Umgebung zum Erstellen von Mingw aus: Starten Sie mingw - w√§hlen Sie Qt 5.13.2 (MinGW 7.3.0 32-Bit). <br><br>  Wir aktivieren unsere emsdk darin: <br><br><pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Wir gehen in den Ordner mit der Testanwendung und versuchen zu sammeln: <br><br><pre> <code class="plaintext hljs">cd c:\Project\test-wasm qmake "qmake"      ,     .</code> </pre> <br><br>  Ist etwas schief gelaufen?  Habe ich den String und die Umgebung f√ºr die Assembly irgendwie nicht korrekt aktiviert?  Schlie√üen Sie die Befehlszeile und f√ºhren Sie sie erneut aus: Starten Sie mingw - w√§hlen Sie Qt 5.13.2 (MinGW 7.3.0 32-Bit) und √ºberpr√ºfen Sie, ob qmake vorhanden ist: <br><br><pre> <code class="plaintext hljs">Setting up environment for Qt usage... C:\Qt\5.13.2\mingw73_32&gt;qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/Qt/5.13.2/mingw73_32/lib</code> </pre> <br>  Alles ist in Ordnung, die Qt-Umgebung ist aktiviert und qmake funktioniert.  Wir versuchen, emsdk erneut zu aktivieren und erhalten den gleichen Fehler. <br><br>  Nun, ich dachte, es ist m√∂glich, einen Freund dazu zu bringen, zuerst emsdk auszuf√ºhren und dann die mingw-Umgebung zu aktivieren. Dazu m√ºssen wir uns die Verkn√ºpfung zum Starten der Konsole mit der mingw32-Umgebung ansehen (mingw starten - mit der rechten Maustaste auf den Speicherort der Datei klicken - mit der rechten Maustaste auf ‚ÄûQt 5.13.2 (MinGW 7.3.0 32-Bit) ‚Äù- Eigenschaften. <br><br><img src="https://habrastorage.org/webt/9s/5p/j2/9s5pj2xg81ww4yavpaocmchv1ti.png"><br><br>  Im Objekt interessiert uns der Pfad zum Starten der bat-Datei.  In meinem Fall ist es C: \ Qt \ 5.13.2 \ mingw73_32 \ bin \ qtenv2.bat <br><br>  Also fangen wir von vorne an.  Starten Sie die Ausf√ºhrung von cmd <br><br><pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit C:\Qt\5.13.2\mingw73_32\bin\qtenv2.bat qmake --version</code> </pre> <br>  funktioniert ... gehe in den Ordner mit dem Quellcode des Projekts <br><br><pre> <code class="plaintext hljs">qmake make "make"      ,     .</code> </pre> <br>  Wir erinnern uns, dass wir mingw verwenden und der Befehl zum Erstellen darin anders ist: <br>  <b>mingw32-make.exe</b> <br><br><pre> <code class="plaintext hljs">mingw32-make</code> </pre> <br>  Die Anwendung wurde zusammengestellt, √ºberpr√ºft jedoch, ob sie verwendet wurde: <br><br><pre> <code class="plaintext hljs">g++ -Wl,-s -Wl,-subsystem,windows -mthreads -o release\test-wasm.exe release/main.o release/qrc_qml.o C:\Qt\5.13.2\mingw73_32\lib\libQt5Quick.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Gui.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Qml.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Network.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Core.a -lmingw32 C:\Qt\5.13.2\mingw73_32\lib\libqtmain.a -LC:\openssl\lib -LC:\Utils\my_sql\mysql-5.7.25-win32\lib -LC:\Utils\postgresql\pgsql\lib -lshell32 mingw32-make.exe[1]: Leaving directory 'c:/Project/test-wasm'</code> </pre> <br><br>  Also  Halt an  Was haben wir gesammelt? <br><br>  <b>Wir haben</b> <b>die</b> √ºbliche 32-Bit-Anwendung f√ºr den <b>Desktop</b> (x86) erstellt, da wir die Assembly <u>C: \ Qt \ 5.13.2 \ mingw73_32 verwendet haben</u> <br><br>  Und wir mussten WASM bauen.  Passen wir die PATH-Umgebung so an, dass zuerst der Pfad und qmake aus dem wasm-Ordner √ºbernommen werden: <br><br><pre> <code class="plaintext hljs">set PATH=c:\Qt\5.13.2\wasm_32\bin;%PATH%</code> </pre> <br>  Wir l√∂schen den Ordner aus den gesammelten Dateien <br><br><pre> <code class="plaintext hljs">mingw32-make.exe clean del .qmake.stash</code> </pre> <br>  Wir beginnen mit der Montage <br><br><pre> <code class="plaintext hljs">qmake</code> </pre> <br><img src="https://habrastorage.org/webt/cz/nx/3s/cznx3sfjy_1b4svadrdfr2uac9m.png"><br><br>  Was?  Wieder ein Fehler?  Welche Art von DLL brauchen wir?  Suchen wir danach in dem Ordner, in dem Qt installiert ist: <br>  Wie kann das sein?  Wird f√ºr 32-Bit-kompiliertes WASM (c: \ Qt \ 5.13.2 \ wasm_32 \ bin) eine Bibliothek aus 64-Bit-MINGW verwendet? <br><br><img src="https://habrastorage.org/webt/kd/k_/my/kdk_mydgdcxxqogigkfjbt157wo.png"><br><br>  Nehmen wir an, Sie k√∂nnen die Gelegenheit nutzen und den Pfad zu dieser 64-Bit-Bibliothek hinzuf√ºgen: <br><br><pre> <code class="plaintext hljs">set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% mingw32-make.exe clean qmake mingw32-make.exe</code> </pre><br>  und ... viele Fehler <br><br><div class="spoiler">  <b class="spoiler_title">Weitere Details</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">release/main.o:main.cpp:(.text+0x1bc): undefined reference to `_imp___ZN4QUrlD1Ev' release/main.o:main.cpp:(.text+0x1c6): undefined reference to `_imp___ZN11QMetaObject10ConnectionD1Ev' release/main.o:main.cpp:(.text+0x1d7): undefined reference to `_imp___ZN21QQmlApplicationEngine4loadERK4QUrl' release/main.o:main.cpp:(.text+0x1e0): undefined reference to `_imp___ZN15QGuiApplication4execEv' release/main.o:main.cpp:(.text+0x1ef): undefined reference to `_imp___ZN21QQmlApplicationEngineD1Ev' release/main.o:main.cpp:(.text+0x1f8): undefined reference to `_imp___ZN15QGuiApplicationD1Ev' release/main.o:main.cpp:(.text+0x225): undefined reference to `_imp___ZN10QArrayData10deallocateEPS_jj' release/main.o:main.cpp:(.text+0x249): undefined reference to `_imp___ZN21QQmlApplicationEngineD1Ev' release/main.o:main.cpp:(.text+0x252): undefined reference to `_imp___ZN15QGuiApplicationD1Ev' release/main.o:main.cpp:(.text+0x276): undefined reference to `_imp___ZN10QArrayData10deallocateEPS_jj' release/main.o:main.cpp:(.text+0x28f): undefined reference to `_imp___ZN4QUrlD1Ev' release/main.o:main.cpp:(.text+0x2aa): undefined reference to `_imp___ZN4QUrlD1Ev' release/qrc_qml.o:qrc_qml.cpp:(.text+0x23): undefined reference to `qUnregisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text+0x53): undefined reference to `qRegisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text+0x83): undefined reference to `qUnregisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text.startup+0x23): undefined reference to `qRegisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)'</code> </pre> <br></div></div><br><pre> <code class="plaintext hljs">C:/Qt/Tools/mingw730_32/bin/../lib/gcc/i686-w64-mingw32/7.3.0/../../../../i686-w64-mingw32/lib/../lib/libmingw32.a(lib32_libmingw32_a-crt0_c.o):crt0_c.c:(.text.startup+0x39): undefined reference to `WinMain@16' collect2.exe: error: ld returned 1 exit status mingw32-make[1]: *** [Makefile.Release:66: release/test-wasm.exe] Error 1 mingw32-make[1]: Leaving directory 'c:/Project/test-wasm' mingw32-make: *** [Makefile:38: release] Error 2</code> </pre><br>  Warum so viele Fehler?  Warum hast du es nicht getan?  Ich habe die tempor√§ren Dateien aufger√§umt, den Build gestartet und so viele Fehler bekommen. <br><br>  Also, du musst nachdenken, eine Tasse Tee / Kaffee einschenken ... <br><br>  Richtig!  Die Idee!  Weil  Anscheinend haben wir den letzten Pfad zu 64-Bit-Bibliotheken als letzten geschrieben. Als er dann einen 32-Bit-WASM erstellte, verstand er nicht, wie und was er verkn√ºpfen sollte, und versuchte, den Pfad zur 64-Bit-Bibliothek zu verwenden, was bedeutet, dass ich den Pfad zur 32-Bit-Bibliothek fr√ºher als zuvor angeben musste 64 bit.  Ich werde versuchen, es zu beheben: <br><br>  Schlie√üe die Konsole.  Wir √∂ffnen wieder mingw 32-bit und hier besucht mich der Gedanke:  Wir haben bereits die Befehlszeile f√ºr mingw 32 Bit gestartet und dann den Pfad zu den Bibliotheken durch 64 Bit ersetzt. Wir werden wieder Vorrang beim Aufbau der Qt-Desktop-Umgebung auf 64-Bit-Komponenten haben und wir brauchen umgekehrt (da PATH zuerst mit bis zu 64 Bit verwendet wird). und dann bis zu 32 Bibliotheken insgesamt).  Dann wird unser endg√ºltiger Algorithmus so aussehen: <br><br><pre> <code class="plaintext hljs">cmd c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/qt/5.13.2/mingw73_64/lib</code> </pre> <br>  f√ºge den Pfad zu wasm hinzu und gehe sammeln: <br><br><pre> <code class="plaintext hljs">set PATH=c:\Qt\5.13.2\wasm_32\bin;%PATH% cd c:\Project\test-wasm c:\Project\test-wasm&gt;qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/Qt/5.13.2/wasm_32/lib qmake mingw32-make "mingw32-make"      ,     .</code> </pre> <br>  25 wieder!  Was ist nun los mit mir?  Wo ist diese Datei √ºberhaupt?  Wohin  Suchanfragen im Explorer besagen, dass es sich um <u>C: \ Qt \ Tools \ mingw730_32 \ bin handelt</u> <br><br>  Nun, mingw32-make.exe wird nun definitiv bei uns gefunden: <br><br><pre> <code class="plaintext hljs">set PATH=C:\Qt\Tools\mingw730_32\bin;%PATH%</code> </pre> <br>  Wir fangen an zu sammeln: <br><br><pre> <code class="plaintext hljs">c:\Project\test-wasm&gt;mingw32-make c:\Qt\5.13.2\wasm_32\bin\qmake.exe -o Makefile test-wasm.pro Info: creating stash file C:\Project\test-wasm\.qmake.stash sed -es/@APPNAME@/test-wasm/g C:/Qt/5.13.2/wasm_32/plugins/platforms/wasm_shell.html &gt; C:/Project/test-wasm/test-wasm.html "sed"      ,     . mingw32-make: *** [Makefile:424: apphtml] Error 1</code> </pre> <br>  <b>sed</b> ??  Dies ist nicht Linux, Mac, * nix, * BSD.  Wo kann man es bekommen?  Search (sed.exe)? .. Und wir finden nicht. <br><br>  Wir gehen ins Internet, suchen nach (sed download windows) und stellen fest, dass es f√ºr <a href="http://gnuwin32.sourceforge.net/packages/sed.htm" rel="nofollow">Windows</a> heruntergeladen werden kann: <br><br>  Laden Sie binaries Zip herunter, entpacken Sie es aus dem Ordner bin / sed.exe und f√ºhren Sie Folgendes aus: <br><br><img src="https://habrastorage.org/webt/p1/bu/lg/p1bulgzwobzdf8i6d65rdpqdelc.png"><br><br><img src="https://habrastorage.org/webt/p1/bu/lg/p1bulgzwobzdf8i6d65rdpqdelc.png"><br><br>  Zwei Fehler bei fehlenden DLL-Komponenten.  M√ºssen wir noch sed aus dem Quellcode sammeln oder nach diesen fehlenden DLLs suchen?  Nein, das w√ºrde ich nicht gerne tun ... Noch einmal schauen wir uns die <a href="http://gnuwin32.sourceforge.net/packages/sed.htm" rel="nofollow">GNU-</a> Website genau an und sehen sie in den Downloads: <b>‚Ä¢ Vollst√§ndiges Paket, au√üer Quellensetup</b> <br><br>  Herunterladen, entpacken und installieren.  Versuche zu rennen: <br><br><pre> <code class="plaintext hljs">"c:\Program Files (x86)\GnuWin32\bin\sed.exe"</code> </pre> <br>  Es funktioniert !!!  Es muss noch einmal zum Pfad hinzugef√ºgt werden: <br><br><pre> <code class="plaintext hljs">set PATH="c:\Program Files (x86)\GnuWin32\bin";%PATH% mingw32-make</code> </pre> <br>  Der Prozessor ist hochgefahren, die Montage hat begonnen.  Nun, ich hoffe, dass es uns jetzt gelingt! <br><br>  Es dauerte ... Minuten <br><br><pre> <code class="plaintext hljs">emcc: warning: cannot represent a NaN literal '0x22748a2c570' with custom bit pattern in NaN-canonicalizing JS engines (eg Firefox and Safari) without erasing bits! in ret double 0x7FF4000000000000 in _ZL7qt_snanv() emcc: warning: cannot represent a NaN literal '0x22748a2c570' with custom bit pattern in NaN-canonicalizing JS engines (eg Firefox and Safari) without erasing bits! in ret double 0x7FF4000000000000 in _ZL7qt_snanv.30589() c:\Project\test-wasm&gt;dir ... 25.01.2020 17:42 2 922 test-wasm.html 25.01.2020 17:55 355 725 test-wasm.js 25.01.2020 14:59 461 test-wasm.js_plugin_import.cpp 25.01.2020 16:23 4 384 test-wasm.js_plugin_import.obj 25.01.2020 15:49 601 test-wasm.js_qml_plugin_import.cpp 25.01.2020 16:23 4 668 test-wasm.js_qml_plugin_import.obj 25.01.2020 14:52 1 099 test-wasm.pro 25.01.2020 15:25 22 523 test-wasm.pro.user 25.01.2020 17:55 20 759 738 test-wasm.wasm</code> </pre><br>  Hurra!  Es stellte sich heraus.  Unsere Testanwendung ist zusammengestellt.  Wasm binar ben√∂tigt 20 MB.  Nicht ein bisschen.  Versuchen wir, unsere Datei test-wasm.htm in einem Browser zu √∂ffnen und ... <br><br><img src="https://habrastorage.org/webt/2v/ru/wl/2vruwlzn5xvqonnbrju4xfdatfs.png"><br><br><h2>  So fassen Sie zusammen, wie Sie eine Qt-Anwendung f√ºr 5.13.2 unter Windows erstellen: </h2><br><br>  1. Sie m√ºssen Python installieren.  GNU SED und installiere bin√§re Assemblys WebAssembly √ºber online installiertes Qt <br><br>  2. <pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit set PATH="c:\Program Files (x86)\GnuWin32\bin";%PATH% set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% set PATH=C:\Qt\Tools\mingw730_32\bin;%PATH%</code> </pre> <br>  Aber Habr w√§re nicht Habr, wenn ich nicht versucht h√§tte <b>,</b> die <b>WebAssembly-</b> Anwendung aus der neuesten Version von Qt zu <b>erstellen</b> , die derzeit <b>5.14.0 ist</b> .  Ich hoffe, ich erwarte am Ende nicht genau die gleiche Aufgabe wie beim Erstellen von Version 5.13.2. <br><br>  √úber das Online-Installationsprogramm (MaintenanceTool.exe) installieren wir Qt WebAssembly f√ºr Version 5.14.0.  Wir konfigurieren die Umgebung und f√ºhren die Assembly aus. <br><br>  Der Prozess geht weiter und ... <br><br><img src="https://habrastorage.org/webt/zt/zh/b0/ztzhb07vfti-eekm3krpb5v-u1q.png"><br><br>  Nichts ist klar.  Wie ist es?  In Version 5.13.2 konnte ich nach dem Tanzen mit einem Tamburin die Anwendung zusammenstellen, aber in Version 5.14.0 hat es nicht geklappt?  Aber wie haben sie es dann zusammengebaut? <br><br>  ... Aber k√∂nnen wir auch WASM Qt 5.14.0 aus dem Quellcode erstellen?  Und warum nicht?  Dazu ben√∂tigen wir viel Platz auf der Festplatte sowie eine gute Auslastung des Prozessors: <br><br><pre> <code class="plaintext hljs">echo PATH=c:\qtwasm514\bin;"C:\Program Files (x86)\GnuWin32\bin";c:\qt\Tools\mingw730_32\bin;%PATH% c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit cd c:\Qt\5.14.0\Src configure.bat -no-warnings-are-errors -xplatform wasm-emscripten -platform win32-g++ -nomake examples -prefix c:\qtwasm</code> </pre><br>  In diesem Fall wird wasm nach der Assembly im Ordner c: \ qtwasm installiert, und es m√ºssen keine Beispiele gesammelt werden. <br><br><div class="spoiler">  <b class="spoiler_title">Konfigurationsausgabe</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Building on: win32-g++ (i386, CPU features: none) Building for: wasm-emscripten (wasm, CPU features: none) Target compiler: clang 6.0.1 Configuration: cross_compile largefile release c++11 no-pkg-config reduce_exports static stl Build options: Mode ................................... release Optimize release build for size ........ no Building shared libraries .............. no Using C standard ....................... C11 Using C++ standard ..................... C++11 Using ccache ........................... no Using precompiled headers .............. no Using LTCG ............................. no Target compiler supports: Build parts ............................ libs Qt modules and options: Qt Concurrent .......................... no Qt D-Bus ............................... no Qt D-Bus directly linked to libdbus .... no Qt Gui ................................. yes Qt Network ............................. yes Qt Sql ................................. no Qt Testlib ............................. yes Qt Widgets ............................. yes Qt Xml ................................. yes Support enabled for: Using pkg-config ....................... no udev ................................... no Using system zlib ...................... no Zstandard support ...................... no Qt Core: DoubleConversion ....................... yes Using system DoubleConversion ........ no GLib ................................... no iconv .................................. yes ICU .................................... no Built-in copy of the MIME database ..... yes Tracing backend ........................ none Logging backends: journald ............................. no syslog ............................... no slog2 ................................ no Using system PCRE2 ..................... no Qt Network: getifaddrs() ........................... no IPv6 ifname ............................ no libproxy ............................... no OpenSSL ................................ no Qt directly linked to OpenSSL ........ no OpenSSL 1.1 ............................ no DTLS ................................... no OCSP-stapling .......................... no SCTP ................................... no Use system proxies ..................... yes Qt Gui: Accessibility .......................... yes FreeType ............................... yes Using system FreeType ................ no HarfBuzz ............................... yes Using system HarfBuzz ................ no Fontconfig ............................. no Image formats: GIF .................................. yes ICO .................................. yes JPEG ................................. yes Using system libjpeg ............... no PNG .................................. yes Using system libpng ................ no EGL .................................... yes OpenVG ................................. no OpenGL: Desktop OpenGL ....................... no OpenGL ES 2.0 ........................ yes OpenGL ES 3.0 ........................ no OpenGL ES 3.1 ........................ no OpenGL ES 3.2 ........................ no Vulkan ................................. no Session Management ..................... yes Features used by QPA backends: evdev .................................. no libinput ............................... no INTEGRITY HID .......................... no mtdev .................................. no tslib .................................. no xkbcommon .............................. no X11 specific: XLib ................................. no XCB Xlib ............................. no EGL on X11 ........................... no QPA backends: DirectFB ............................... no EGLFS .................................. no LinuxFB ................................ no VNC .................................... yes Mir client ............................. no Qt Sql: SQL item models ........................ yes Qt Widgets: GTK+ ................................... no Styles ................................. Fusion Windows Qt PrintSupport: CUPS ................................... no Qt Sql Drivers: DB2 (IBM) .............................. no InterBase .............................. no MySql .................................. no OCI (Oracle) ........................... no ODBC ................................... no PostgreSQL ............................. no SQLite2 ................................ no SQLite ................................. yes Using system provided SQLite ......... no TDS (Sybase) ........................... no Qt Testlib: Tester for item models ................. yes Qt SerialBus: Socket CAN ............................. no Socket CAN FD .......................... no SerialPort Support ..................... no Further Image Formats: JasPer ................................. no MNG .................................... no TIFF ................................... yes Using system libtiff ................. no WEBP ................................... yes Using system libwebp ................. no Qt QML: QML network support .................... yes QML debugging and profiling support .... yes QML tracing JIT support ................ no QML sequence object .................... yes QML list model ......................... yes QML XML http request ................... yes QML Locale ............................. yes QML delegate model ..................... yes Qt Quick: Direct3D 12 ............................ no AnimatedImage item ..................... yes Canvas item ............................ yes Support for Qt Quick Designer .......... yes Flipable item .......................... yes GridView item .......................... yes ListView item .......................... yes TableView item ......................... yes Path support ........................... yes PathView item .......................... yes Positioner items ....................... yes Repeater item .......................... yes ShaderEffect item ...................... yes Sprite item ............................ yes Qt Scxml: ECMAScript data model for QtScxml ...... yes Qt Gamepad: SDL2 ................................... no Qt 3D GeometryLoaders: Autodesk FBX ........................... no Qt Wayland Client ........................ no Qt Wayland Compositor .................... no Qt Bluetooth: BlueZ .................................. no BlueZ Low Energy ....................... no Linux Crypto API ....................... no WinRT Bluetooth API (desktop &amp; UWP) .... no WinRT advanced bluetooth low energy API (desktop &amp; UWP) . no Qt Sensors: sensorfw ............................... no Qt Quick Controls 2: Styles ................................. Default Fusion Imagine Material Universal Qt Quick Templates 2: Hover support .......................... yes Multi-touch support .................... yes Qt Positioning: Gypsy GPS Daemon ....................... no WinRT Geolocation API .................. no Qt Location: Qt.labs.location experimental QML plugin . yes Geoservice plugins: OpenStreetMap ........................ no HERE ................................. yes Esri ................................. yes Mapbox ............................... yes MapboxGL ............................. no Itemsoverlay ......................... yes QtXmlPatterns: XML schema support ..................... yes Qt Multimedia: ALSA ................................... no GStreamer 1.0 .......................... no GStreamer 0.10 ......................... no Video for Linux ........................ no OpenAL ................................. no PulseAudio ............................. no Resource Policy (libresourceqt5) ....... no Windows Audio Services ................. no DirectShow ............................. no Windows Media Foundation ............... no Qt Tools: QDoc ................................... no Qt WebEngineCore: Qt WebEngine Widgets ................... yes Qt WebEngine Qml ....................... yes Embedded build ......................... yes Full debug information ................. no Pepper Plugins ......................... no Printing and PDF ....................... no Proprietary Codecs ..................... no Spellchecker ........................... yes Native Spellchecker .................... no WebRTC ................................. no Use System Ninja ....................... no Geolocation ............................ yes WebChannel support ..................... yes Use v8 snapshot ........................ yes Kerberos Authentication ................ no Extensions ............................. no Support qpa-xcb ........................ no Building v8 snapshot supported ......... yes Use ALSA ............................... no Use PulseAudio ......................... no Optional system libraries used: re2 .................................. no icu .................................. no libwebp, libwebpmux and libwebpdemux . no opus ................................. no ffmpeg ............................... no libvpx ............................... no snappy ............................... no glib ................................. no zlib ................................. no minizip .............................. no libevent ............................. no jsoncpp .............................. no protobuf ............................. no libxml2 and libxslt .................. no lcms2 ................................ no png .................................. no JPEG ................................. no harfbuzz ............................. no freetype ............................. no Required system libraries: fontconfig ........................... no dbus ................................. no nss .................................. no khr .................................. no glibc ................................ no Required system libraries for qpa-xcb: x11 .................................. no libdrm ............................... no xcomposite ........................... no xcursor .............................. no xi ................................... no xtst ................................. no Qt WebEngineQml: UI Delegates ........................... yes Test Support ........................... no Note: Using static linking will disable the use of dynamically loaded plugins. Make sure to import all needed static plugins, or compile needed modules into the library. Note: No wayland-egl support detected. Cross-toolkit compatibility disabled. Note: The following modules are not being compiled in this configuration: serialport 3dcore 3drender WARNING: QDoc will not be compiled, probably because libclang could not be located. This means that you cannot build the Qt documentation. Either ensure that llvm-config is in your PATH environment variable, or set LLVM_INSTALL_DIR to the location of your llvm installation. On Linux systems, you may be able to install libclang by installing the libclang-dev or libclang-devel package, depending on your distribution. On macOS, you can use Homebrew's llvm package. On Windows, you must set LLVM_INSTALL_DIR to the installation path. WARNING: host pkg-config not found Qt is now configured for building. Just run 'mingw32-make'. Once everything is built, you must run 'mingw32-make install'. Qt will be installed into 'c:\qtwasm'. Prior to reconfiguration, make sure you remove any leftovers from the previous build.</code> </pre> <br></div></div><br>  Wir montieren und montieren: <br><br><pre> <code class="plaintext hljs">mingw32-make mingw32-make install</code> </pre> <br>  Nachdem ich WASM Qt 5.14.0 neu erstellt und c: \ qtwasm im Ordner installiert und diesen Pfad verwendet habe, konnte ich WebAssembly aus der Version 5.14.0 von Qt erstellen. <br><br><h2>  Schlussfolgerung 2. </h2><br>  Wenn Sie Qt 5.14.0 WebAssembly verwenden m√∂chten, m√ºssen Sie es aus den Quellen neu erstellen und die Version verwenden, die Sie bereits erstellt haben. <br><br><h2>  Fazit </h2><br>  Qt WebAssembly ist eine interessante Technologie, die seit Version <a href="https://www.qt.io/blog/2018/11/19/getting-started-qt-webassembly" rel="nofollow">5.12</a> in Qt verf√ºgbar ist. <br><br>  WebAssembly- <a href="https://www.qt.io/blog/2018/05/22/qt-for-webassembly-examples" rel="nofollow">Beispiele</a> k√∂nnen <a href="https://www.qt.io/qt-examples-for-webassembly" rel="nofollow">online</a> auf der Qt-Website eingesehen werden. <br><br>  Beim Versuch, ein eigenes Projekt zu erstellen, sind jedoch Fehler aufgetreten: <br><br><img src="https://habrastorage.org/webt/gl/in/tm/glintm9_aahtojefsodha0ntaz4.png"><br><br>  Daher ist es bei der Verwendung dieser Technologie erforderlich, deren <a href="https://wiki.qt.io/Qt_for_WebAssembly" rel="nofollow">Grenzen zu untersuchen</a> . <br><br>  Derzeit nicht unterst√ºtzte Module: qtmultimedia, qtwebview. <br><br>  Derzeit funktioniert WebAssembly haupts√§chlich in Desktop-Browsern und es ist nicht bekannt, wann die vollst√§ndige Unterst√ºtzung auf Mobilger√§ten angezeigt wird. <br><br>  F√ºr diejenigen, die diesen Artikel bis zum Ende gelesen, aber noch nie Qt ausprobiert haben, k√∂nnen Sie das <a href="https://www.qt.io/download" rel="nofollow">Online-Installationsprogramm</a> herunterladen, die MinGW-Optionen und die erforderliche Version von Qt WebAssmbly ausw√§hlen.  <a href="https://www.qt.io/development-tools" rel="nofollow">QtCreator wird</a> standardm√§√üig installiert und Sie k√∂nnen Ihre erste Anwendung erstellen. <br><br>  Am Ende dieses Artikels m√∂chte ich empfehlen, dass Benutzer versuchen, Beispiele aus den Qt-Quellen, aus dem Ordner Src \ qtcharts \ examples, zu sammeln und sie in einem Browser auszuf√ºhren. <br><br>  Zum Starten des Webservers k√∂nnen Sie Python verwenden und Folgendes ausf√ºhren: <br>  <code>python -m http.server 8000 --bind 192.168.0.10</code> wenn Sie eine Adresse im lokalen Netzwerk des Computers 192.168.0.10 haben.  Vergessen Sie auch nicht, den Port in der Firewall zu √∂ffnen, und versuchen Sie dann, die Anwendung √ºber einen Browser von einem anderen Computer / Ger√§t / Smartphone aus zu √∂ffnen. <br><br>  Stimmen Sie ab und geben Sie in den Kommentaren Beispiele f√ºr die Verwendung des besten GUI-Frameworks f√ºr C ++ Qt an. <br><br>  <i><b>Viel Gl√ºck mit Ihrer Kreativit√§t und neuen Errungenschaften!</b></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de485610/">https://habr.com/ru/post/de485610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de485596/index.html">Algorithmus-Interviews: Theorie vs. √ºben</a></li>
<li><a href="../de485598/index.html">Digitale Veranstaltungen in Moskau vom 27. Januar bis 2. Februar</a></li>
<li><a href="../de485600/index.html">Digitale Veranstaltungen in St. Petersburg vom 27. Januar bis 2. Februar</a></li>
<li><a href="../de485606/index.html">Treiberfiltervorg√§nge in der Registrierung. √úbe</a></li>
<li><a href="../de485608/index.html">Microservices mit Spring Boot. Teil 4. Verwenden von Ribbon f√ºr den Lastenausgleich</a></li>
<li><a href="../de485612/index.html">Was hat mir ein Weltraumunfall als Entwickler beigebracht?</a></li>
<li><a href="../de485614/index.html">Rote Unternehmenskultur ist das Hauptproblem des russischen Gesch√§fts (Teil 3)</a></li>
<li><a href="../de485618/index.html">Automatisierung f√ºr die Kleinsten. Hinweise. RESTful API</a></li>
<li><a href="../de485620/index.html">Joschkar-Ola im Allgemeinen eine IT-Stadt?</a></li>
<li><a href="../de485622/index.html">PostgreSQL-Sicherungswerkzeuge. Andrey Salnikov (Datenreiher)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>