<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÑ üë∑üèª üîî Erstellung des 35MM-Spiels. Postapokalypse in Russland üë®üèæ‚Äçü§ù‚Äçüë®üèª üç† üë®‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guten Tag an alle, mein Name ist Sergey Noskov. Heute m√∂chte ich √ºber die Schaffung meines ersten vollwertigen Indie-Projekts namens 35MM sprechen, da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellung des 35MM-Spiels. Postapokalypse in Russland</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448340/"><img src="https://habrastorage.org/webt/nd/lc/7g/ndlc7ge6rk_kvh7uq0ysdei1sqi.jpeg"><br><br>  Guten Tag an alle, mein Name ist Sergey Noskov.  Heute m√∂chte ich √ºber die Schaffung meines ersten vollwertigen Indie-Projekts namens 35MM sprechen, das 2016 auf Steam ver√∂ffentlicht wurde.  Die Geschichte ist nat√ºrlich lang und seitdem wurden mehrere Artikel und Interviews zum Thema des Projekts ver√∂ffentlicht, es gab jedoch keine detaillierte Beschreibung des Entwicklungsprozesses.  Auch die technischen Aspekte der Umsetzung wurden kaum ber√ºhrt.  Eigentlich werden wir dar√ºber reden. <br><br>  Beginnen wir mit einem kleinen Hintergrund.  35MM ist ein Abenteuer mit Blick aus der ersten Person auf eine Postapokalypse in Russland.  Die Menschen - ein Laufsimulator.  Das Spiel erz√§hlt uns die Geschichte der Reise zweier Wanderer durch die verlassenen L√§nder, die die Zivilisation hinterlassen hat.  Der Gro√üteil der Bev√∂lkerung starb nach einer schrecklichen Krankheit aus, und jetzt gewinnt die Natur ihre Punkte von der Menschheit zur√ºck.  Leider erinnere ich mich nicht genau, wie die Idee zu diesem Projekt entstanden ist, aber ich erinnere mich definitiv daran, dass ich zu dieser Zeit ein begeisterter Fan des Themas Stalker, Metro-Spiele und allgemein einer solchen atmosph√§rischen Umgebung war.  Die Landschaften verlassener St√§dte, Industriegebiete und D√∂rfer erregten immer meine Angst und Freude.  Ich wei√ü nicht, um welche Art von Krankheit es sich handelt und wie ich diese Liebe erkl√§ren kann, aber es gibt viele von uns.  Im Allgemeinen reichte eine solche Leidenschaft f√ºr dieses Thema aus, um Ihre eigene kleine Spielewelt zu erschaffen. <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/ro/01/jj/ro01jjdr6mpcdqso8mzkghc4dv4.jpeg"><br><br>  Da ich bereits zwei kleine Projekte (Light und Train) sowie Erfahrung mit der Unity-Engine hatte, begann ich, ein neues Spiel darin zu entwickeln.  Wenn ich mich nicht irre, war zu diesem Zeitpunkt bereits die f√ºnfte Version des Motors verf√ºgbar, aber bis zu einem gewissen Grad bin ich konservativ (nicht mein bestes professionelles Merkmal), daher habe ich beschlossen, in Version 4.7 zu bleiben.  F√ºr ein allgemeines Verst√§ndnis gibt es viele signifikante Unterschiede zwischen den Versionen 4 und 5 der Engine, insbesondere in Bezug auf Rendering, Beleuchtung und Materialien.  In Unity 5 wurden physikalisch genaue Shader eingef√ºhrt, die Licht korrekt reflektieren und Reflexe anzeigen k√∂nnen.  Mit einfachen Worten: Blendung und Reflexionen auf Materialien mit solchen Shadern wirken nat√ºrlicher und attraktiver.  In Version 4 waren grundlegende Shader viel einfacher. Das Schreiben eigener Shader konnte jedoch die Bildqualit√§t erheblich verbessern.  Wir werden etwas sp√§ter dar√ºber sprechen.  Es ist klar, dass die Entwicklung des Spiels neben der Arbeit in der Engine selbst viele Aspekte umfasst.  Damit die Engine etwas zu stopfen hat, sind Inhalte erforderlich: Modelle, Texturen, Sounds, Skripte usw.  All das sehen wir am Ende auf dem Monitor und h√∂ren in den Spalten.  Und nat√ºrlich erfordert jede Art von Inhalt eine eigene Software.  Um 3D-Modelle zu erstellen, habe ich 3D max verwendet, um mit 2D-Grafiken zu arbeiten und Texturen zu erstellen - Photoshop, um mit Sound zu arbeiten - Adobe Audition. Ich habe den Code in das mit Unity gelieferte Monodevelop-Programm geschrieben.  Ich empfehle besonders, dass Sie Ihre Augen schlie√üen oder mit dem n√§chsten Kapitel fortfahren - das Spiel ist in Javascript geschrieben.  Nur shh, sag es niemandem.  Ich wei√ü nur, dass dies f√ºr manche ein schlechter Geschmack ist und niemand √ºber Javascript schreibt.  Im Allgemeinen werden die Hauptwerkzeuge ausgew√§hlt und der Workflow bewegt sich langsam weg. <br><br><br><h4>  Wie alles begann </h4><br>  In einigen Interviews habe ich bereits erw√§hnt, dass ich normalerweise keinen klaren Entwicklungsplan habe, sondern nur das gro√üe Ganze.  Daher erfolgt die Erstellung von Standorten h√§ufig spontan und das Design wird unterwegs durchdacht.  Dies ist nat√ºrlich eher ein Minus als ein Plus, aber es gibt eine positive Seite - es ist sehr unterhaltsam und man wei√ü nie genau, was als n√§chstes passieren wird.  Es stellt sich heraus, dass das Spiel zu einem gewissen Grad bereits in der Anfangsphase sein eigenes Leben f√ºhrt.  Die Entwicklung von 35MM begann mit der Schaffung des allerersten Standorts - eines verlassenen Waldhauses und eines weitl√§ufigen Grundst√ºcks mit Feldern und Nadelwald. <br><br><img src="https://habrastorage.org/webt/kr/sb/cn/krsbcnewlw_cvsut4sthf26gl1a.jpeg"><br><br>  Um die Erdoberfl√§che aufzubauen, wurde Terran mit 5-6 Texturen aus Gras und Erde verwendet.  Der Standard-Terrane-Shader malt die Oberfl√§che mit verschiedenen Texturen unter Verwendung der RGBA-Maske, die wir mit einem Pinsel in der Engine selbst erstellen. Das Ergebnis sieht oft sehr verschwommen aus. Die √úberg√§nge zwischen den Texturen sind zu glatt und wirken nicht nat√ºrlich.  Um diesen Punkt zu verfeinern, wurde der Terrane Shader ge√§ndert und eine Offset-Maske hinzugef√ºgt.  Die Schwarz-Wei√ü-Textur ‚Äûverschob‚Äú die im Terran gezeichnete Maske und erzeugte zerrissene und sch√§rfere Kanten, die das Erscheinungsbild der Oberfl√§che optisch etwas komplizierten. <br><br><img src="https://habrastorage.org/webt/ya/xj/ec/yaxjecb49aydjyn16wrezqwgtte.jpeg"><br><br><img src="https://habrastorage.org/webt/_q/yq/_b/_qyq_bril__wzoxhezidghk7sdo.jpeg"><br><br>  Die Oberfl√§che unseres Landes wurde durch verschiedene Grasarten in Form von zuf√§llig verstreuten Pleins erg√§nzt.  Das Ger√§t verf√ºgt auch √ºber einen Plakatmodus (wenn Grasebenen immer auf den Player schauen), ist jedoch nicht sehr gut zum Spielen mit einer Ansicht aus der ersten Person geeignet, da es zu auff√§llig ist, wie das Gras unsere Kamera ‚Äûbeobachtet‚Äú.  Sie sollten immer vorsichtig mit dem Gras sein und es in angemessenen Grenzen hinzuf√ºgen, da dieses Vergn√ºgen eine Menge Zugriffe hervorruft, was sich wiederum auf die Leistung auswirkt.  Je mehr Drawcalls, desto h√∂her ist die Belastung des Computersystems.  Vergessen Sie aber nicht, dass nicht nur Herausforderungen die Belastung erh√∂hen.  Es gibt unz√§hlige M√∂glichkeiten, die Leistung im Spiel zu beeintr√§chtigen.  Neben Gras auf dem Boden wurden zur Abwechslung Maschen mit √Ñsten und Steinen sowie eine Reihe von Abziehbildern mit Schmutz und Spuren von Autor√§dern verstreut. <br><br><img src="https://habrastorage.org/webt/8i/jp/u9/8ijpu9_rppnirhxukbnyfczgea0.jpeg"><br><br>  Nachdem Sie die Oberfl√§che erstellt haben, gehen Sie zu Vegetation, B√§umen und B√ºschen.  Ich zog es vor, den Hauptteil des Waldes (Nadelb√§ume) mit den Werkzeugen des Terrans selbst zu pflanzen - das hei√üt mit einem Pinsel.  Der Vorteil dieser Methode besteht darin, dass sie schnell und einfach durchgef√ºhrt werden kann. Dar√ºber hinaus wird ein solcher Wald in gro√üer Entfernung von Maschen in Werbetafeln umgewandelt, was sich sehr gut auf die Optimierung auswirkt.  In der N√§he der Last ist jedoch stark erh√∂ht, da solche B√§ume meines Wissens nicht rollen.  Vielleicht irre ich mich und jemand wird mich korrigieren.  Das Schlachten ist ein sehr wichtiges Werkzeug zur Optimierung.  Grob gesagt handelt es sich hierbei um eine Kombination von Maschen mit einem Material in einer gemeinsamen Masche, wodurch die Anzahl der Zugrufe erheblich verringert und die Last verringert wird.  Ein weiteres Minus der Sitzpl√§tze auf dem Gel√§nde ist die gleiche Position der B√§ume, dh sie sind alle im gleichen Winkel angelegt und diese Gleichheit ist auff√§llig.  In diesem Zusammenhang habe ich einige Kiefern-, Fichten- und Laubb√§ume manuell in verschiedenen Winkeln und mit verschiedenen Gr√∂√üen installiert, was der Landschaft Abwechslung verlieh.  Die B√ºsche waren auf die gleiche Weise angeordnet. <br><br><img src="https://habrastorage.org/webt/yy/z-/vg/yyz-vgfhvbn27w1bi6enj3vpfoc.jpeg"><br><br><img src="https://habrastorage.org/webt/e1/rc/ew/e1rcewfivsfb3ob6gmhk7rjv-x4.jpeg"><br><br>  Der Vollst√§ndigkeit halber bleibt es, sich mit dem Himmel zu befassen.  F√ºr diese Aufgabe wurde ein gew√∂hnliches Skybox-Material mit sechs Texturen verwendet.  Es gab Versuche, den Shader so zu modifizieren, dass der Himmel dynamisch aussah, aber das Ergebnis rechtfertigte sich nicht und diese Idee musste aufgegeben werden.  Eine Alternative war die Verwendung eines Partikelsystems mit einer Wolkentextur und horizontalen Werbetafeln mit Bewegungstweens.  Soweit ich mich erinnere, wurde im Stalker-Spiel eine √§hnliche Option verwendet, und tats√§chlich gibt es woanders noch viele weitere. <br><br><img src="https://habrastorage.org/webt/15/zs/co/15zsco7qze7gwo7mtz-qjagsxdm.jpeg"><br><br><h4>  Beleuchtung </h4><br>  In der 4. Version der Unity-Engine gab es einen sehr praktischen Modus zum Backen von Lightmaps - Dual Lightmapping.  In aktuellen Versionen gibt es eine √§hnliche Option, die ich jedoch noch nicht im Detail untersucht habe.  Der Dual-Modus erm√∂glichte es uns, Schatten und Blendung in Echtzeit aus n√§chster N√§he zu zeichnen, aber als wir uns von der Kamera entfernten, verwandelte sich das Ganze reibungslos in gebackene Lichtkarten, was die Aufgabe f√ºr unsere Hardware erheblich erleichterte.  Im Allgemeinen habe ich diese Methode an allen Orten des Spiels angewendet.  Infolgedessen wurde f√ºr jeden mittleren Ort ein Satz von etwa 5 bis 10 Lichtkarten f√ºr den Nahplan gebacken, und eine √§hnliche Menge f√ºr den entfernten Plan (Lichtkarten auch im Nahplan, jedoch nur mit gebackener Umgebung). <br><br><img src="https://habrastorage.org/webt/rf/x1/mt/rfx1mtclxshah0ofoykqhftdj9a.jpeg"><br><br><img src="https://habrastorage.org/webt/fa/dt/vf/fadtvfm-928kih6ouhi3_axjpz8.jpeg"><br><br>  Im Allgemeinen habe ich in vielen Bereichen versucht, vollst√§ndig gebackenes Licht zu verwenden, mit Ausnahme des Sonnenlichts.  Punktlichter wurden an Stellen platziert, um Akzente und mehr Licht hervorzuheben.  Dies geschah haupts√§chlich in R√§umen, in denen wenig externes Licht eindrang.  An einigen Stellen wurden nat√ºrlich auch Rilttime-Lampen mit Schatten verwendet: Licht von einem Feuer, eine Tischlampe, eine Decken- oder Wandlampe.  √úbrigens hatte ich bei der Arbeit mit Beleuchtung ein gro√ües Problem mit Punktlampen und Echtzeitschatten.  In einigen Bereichen verursachte der Blick der Kamera auf eine Punktlichtquelle mit Schatten unheimliche Friese und Bremsen.  Es ist nicht ganz klar, warum die Last so hoch war, aber der Profiler zeigte in diesem Moment f√ºr den Bruchteil einer Sekunde Off-Scale-Drawcalls.  Um die Situation zu korrigieren, half die Verwendung von zwei Spot-Leuchten, die in entgegengesetzte Richtungen voneinander gerichtet waren.  Diese Option erwies sich als weniger schwer. <br><br><img src="https://habrastorage.org/webt/cn/0n/dm/cn0ndmoy7smmzdn1aaib9f3te3s.jpeg"><br><br><h4>  Modelle </h4><br>  Die meisten 3D-Modelle f√ºr das Spiel wurden unabh√§ngig voneinander erstellt.  Etwas wurde sehr sorgf√§ltig gemacht, mit dem Backen normaler Karten und anderer Feinheiten, und etwas wurde in Eile erstellt, um Zeit zu sparen.  Die meisten Objekte wurden in Gruppen erstellt und verwendeten eine einzelne Atlastextur.  Das hei√üt, in einer Textur gab es Abschnitte, zum Beispiel f√ºr einen Betonblock, ein Verkehrsschild, Ziegelreste, eine Kanalluke usw.  Dies erm√∂glichte die Verwendung eines Materials f√ºr alle diese Objekte und dementsprechend das Klappern der Objekte.  Soweit wir uns erinnern, ist das ziemlich gut.  Einige Modelle wurden von mir originalgetreu aus dem Internet aus kostenlosen Bibliotheken heruntergeladen.  Grunds√§tzlich handelt es sich hierbei um kleine Requisiten zum F√ºllen der R√§ume. Ich habe jedoch versucht, alle diese Modelle ein wenig zu modifizieren, sodass die √Ñhnlichkeit nicht sehr offensichtlich war.  Oft bemerkte ich identische Assets in Indie-Spielen, was meine Wahrnehmung nicht in bester Weise beeinflusste.  Das problematischste in Bezug auf die Sch√∂pfung war der Transport.  Das Modellieren von Radfahrzeugen von Grund auf ist sehr zeitaufw√§ndig und nimmt viel Zeit in Anspruch.  Daher habe ich mehrere Exemplare der Autos im Asset Store gekauft. <br><br><img src="https://habrastorage.org/webt/_f/s1/c5/_fs1c5qh9mrgi2u8wiysjevdrdw.jpeg"><br><br><img src="https://habrastorage.org/webt/ey/yk/51/eyyk510atgkm5d0wrzlpdetox9k.jpeg"><br><br><img src="https://habrastorage.org/webt/kc/g9/62/kcg962k7ikvrkueqcmeijk73kzi.jpeg"><br><br>  Ein separates "Lied" war die Schaffung von Charakteren.  Dies ist immer noch ein Experiment.  F√ºr diejenigen, die keine gute Vorstellung davon haben, wie viel Arbeit erforderlich ist, damit ein Charakter erscheint, der irgendwie im Spiel existieren kann, werde ich erkl√§ren.  Es wird ein High-Poly-Modell mit allen Details, Kn√∂pfen an den √Ñrmeln, Falten im Gesicht usw. erstellt.  Ein Low-Poly-Modell desselben Charakters wird mit einem Textur-Scan erstellt (in meinem Spiel betrug die Anzahl der Polygone pro Charakter durchschnittlich etwa 5-8 Tausend).  Ferner wird eine normale Karte, eine Umgebungskarte (weiche Schattierung) durch listige oder unkomplizierte Manipulationen aus dem High-Poly-Modell f√ºr das Low-Poly-Modell entfernt.  Normalerweise mache ich dann aus der Umgebung eine diffuse Karte in Photoshop.  Erstellen Sie in der diffusen Karte im Alphakanal eine Spiegelkarte, um Brillanz zu erzeugen. <br><br><img src="https://habrastorage.org/webt/xo/en/kn/xoenknestj0mo76ow0xco-yvyu4.jpeg"><br><br><img src="https://habrastorage.org/webt/9s/v1/sr/9sv1sre0wuc7oryy9ug-u8ynqpo.jpeg"><br><br>  F√ºr 2019 ist es nat√ºrlich schon zu primitiv, aber f√ºr 16 Jahre und f√ºr das Indie-Projekt war es durchaus geeignet. <br><br>  Au√üerdem muss unser Perser geflirtet werden - um Knochen darin zu platzieren, wodurch er seine Gliedma√üen bewegen, seinen Kiefer bewegen, seine Finger beugen und beugen kann usw.  Nun, am Ende muss das Ganze animiert werden.  Normalerweise wird eine Reihe von Animationen mit unterschiedlichen Zust√§nden f√ºr den Charakter erstellt: Gehen, Laufen, Stehen oder Sitzen.  Es sind aber auch einzigartige Fragmente erforderlich, zum Beispiel in meinem Fall f√ºr den Partner unseres Helden Petrowitsch, eine Vielzahl von Variationen von Aktionen erforderlich: √ñffnen von T√ºren, Untersuchen einer Karte, Kampf mit Banditen, Werfen einer leichten Bombe auf Bor-Ebene usw.  All dies musste von Hand animiert werden, was nat√ºrlich in seiner Ungeschicklichkeit sehr auff√§llig ist.  Im Allgemeinen ist die manuelle Animation menschlicher Bewegungen eine sehr schwierige Aufgabe und es ist √§u√üerst schwierig, ein plausibles Ergebnis zu erzielen.  Daher ist die Bewegungskappe die am besten geeignete L√∂sung f√ºr diese Aufgabe.  Soweit ich wei√ü, ist diese Option jetzt billiger und schneller als die Arbeit des Animators, obwohl die empfangenen Daten manuell verarbeitet und "bereinigt" werden m√ºssen. <br><br><img src="https://habrastorage.org/webt/gv/b8/ir/gvb8irricyi1lcirwgwisjcjfkq.jpeg"><br><br><h4>  Shader </h4><br>  Ich werde sofort klarstellen, dass ich das Shader-Schreiben zu dieser Zeit sehr oberfl√§chlich verstanden habe.  Meine Ausbildung bestand haupts√§chlich in der Analyse von vorgefertigten Beispielen und deren Verfeinerung.  Ich habe verschiedene Optionen aus dem Netzwerk √ºbernommen, Parameter ge√§ndert, neue hinzugef√ºgt oder alte entfernt und √ºberpr√ºft, wie sich dies auf das Ergebnis auswirkt.  Es stellte sich heraus, dass dies eine √§u√üerst aufregende Aktivit√§t ist.  Von besonderem Interesse f√ºr mich war der Umgang mit verschiedenen Texturkan√§len als Maske.  In einigen F√§llen habe ich versucht, die maximale Informationsmenge in eine Textur zu integrieren und zu verwenden.  Zu Beginn des Artikels erw√§hnte ich die Unterschiede zwischen der 4. und sp√§teren Version von Unity und insbesondere das Vorhandensein physikalisch korrekter Schattierungen in den neuesten.  Ich habe versucht, dieses Manko selbst zu beseitigen, und der Fresneleffekt wurde dem Standard-Shader mit einer Spiegel-, Cubmap- und normalen Karte hinzugef√ºgt.  Dies ist ein solches Merkmal von reflektierenden Materialien, bei denen Oberfl√§chen in einem Winkel zu unserer Ansicht die Umgebung (oder in diesem Fall die Cubmap) st√§rker reflektieren und normalerweise heller und kontrastreicher aussehen.  Dies macht sich besonders bei einer gl√§nzenden Kugel bemerkbar, deren Kanten heller als die Mitte erscheinen.  Ich konnte diesen Effekt wiederholen und die Cubmap in das Material malen, was wir normalerweise auf reflektierenden, aber rauen Oberfl√§chen sehen k√∂nnen.  Dieser Shader passte perfekt zu mir und wurde auf die meisten Materialien im Spiel angewendet. <br><br><img src="https://habrastorage.org/webt/kz/ka/kj/kzkakjqxlpr1izaz4ffc3h7kdac.jpeg"><br><br><img src="https://habrastorage.org/webt/qp/go/0m/qpgo0m9kwezqi0nraikd-lbxuro.jpeg"><br><br>  Die zweite interessante Erfahrung war die Erstellung eines Shaders f√ºr die Haut von Charakteren.  Grundlage war ein im Internet gefundener Code, mit dem Sie eine Verlaufstextur verwenden k√∂nnen, die f√ºr die St√§rke und Farbe der Beleuchtung verantwortlich ist, die sich auf das Modell auswirkt.  Eine √§hnliche Textur mit einem r√∂tlichen Farbton in der Mitte erm√∂glichte die Nachahmung der menschlichen Haut, die sozusagen ein wenig durchscheinend ist, dh eine eigene Dicke hat, in der das Licht gleichm√§√üig gestreut wird.  Der Effekt ist nicht perfekt, sieht aber besser aus als das Standard-Bumped Specular aus Kunststoff. <br><br><img src="https://habrastorage.org/webt/bd/x9/vq/bdx9vqxqwtq9mpfixc38u3bl0bi.jpeg"><br><br>  Zus√§tzlich zu den oben genannten Shadern wurden dabei viele sekund√§re Optionen mit individuellen Effekten erstellt.  Zum Beispiel ein Pf√ºtzen-Shader mit einer Cubmap und einer diffusen Kartenverformung.  Da es zu teuer ist, echte Reflexionen auf Pf√ºtzen anzuwenden, und ich kein Rendering in der Textur verwenden wollte (dies ist der Zeitpunkt, an dem der Rahmen in der Textur gespeichert und im Material verwendet wird, wodurch beispielsweise Verzerrungen der warmen Luft auftreten k√∂nnen), habe ich beschlossen, einfache Verzerrungen der Erdtextur vorzunehmen. √ºber eine Pf√ºtze gespannt.  Der Effekt war sehr sch√∂n und belastete das Eisen √ºberhaupt nicht.  √úbrigens wurde ein Shader mit einem Textur-Render verwendet, um die Luft von Petroleumlampen und einem Lagerfeuer zu verzerren.  Es scheint eine W√§rmeverzerrung des Detonator-Assets gewesen zu sein.  Um volumetrische Lichtstrahlen zu simulieren, wurde ein Vertex-Shader mit dem Soft-Particle-Effekt und dem Rim-Light-Effekt erstellt (wenn wir Polygone in einem Winkel betrachten, geht das Netz in Alpha √ºber).  Dies ist eine klassische und bereits b√§rtige Art der Implementierung.  F√ºr die neue Einheit gibt es jetzt eine coole Option, die auf der Grundlage des Nacheffekts funktioniert und es Ihnen erm√∂glicht, echte Lichtstrahlen auch unter Ber√ºcksichtigung der Schatten zu zeichnen. <br><br>  Ein weiterer erw√§hnenswerter Punkt ist der Satz von Shadern, die zur Simulation nasser Oberfl√§chen entwickelt wurden.  Das Spiel hat eine Episode, in der irgendwann starker Regen beginnt und einige der Materialien reibungslos einen charakteristischen Glanz erhalten.  Der Haupteffekt wurde auf das Gel√§nde angewendet, auf dem sich wie bei Pf√ºtzen die diffuse Textur zu verzerren begann.  Wasserlecks traten auch an den Fenstern der H√§user auf.  Nun, der "nasseste" Chip waren Tropfen, die auf die Linse fielen.  Tats√§chlich wurde ich hier von Zweifeln gequ√§lt, weil der Held weder eine Brille noch einen Helm hatte und nicht klar war, wie sich die Tropfen so besessen auf dem Bildschirm zeigen.  Optisch gefiel mir der Effekt jedoch so gut, dass ich ihn einfach nicht ablehnen konnte. <br><br><img src="https://habrastorage.org/webt/ei/-x/u2/ei-xu2rezxy8cw3icshvbrbqev0.jpeg"><br><br>  Also gehen wir reibungslos zu Post-Effekten √ºber.  Apropos Tropfen auf dem Bildschirm, alles ist einfach: Ein paar Tropfen von der Textur vermehren sich und bewegen sich mit unterschiedlichen Geschwindigkeiten nach unten.  Parallel dazu bewegen sich Wellen (Gradiententexturen) nach unten, die jeweils mit ihrer eigenen Tropfengruppe multipliziert werden.  Dann wird das Ganze zusammengefasst, sozusagen leicht in der ‚ÄûDiffusion‚Äú angezeigt, aber es wird haupts√§chlich als Maske zum Verschieben von Koordinaten verwendet.  Infolgedessen wird unser Bild durch die Brechung von Wassertropfen verzerrt.  Die wichtigsten Post-Effekte, die auf der Kamera immer oder optional waren (wenn der Player sie ein- oder ausschaltete), sind Antialiasing, SSAO, Bloom, Aberration, Vignette und Sun Shafts.  Dies sind alles Standard-Unity-Effekte, aber SSAO wurde so modifiziert, dass das Rendern von Schatten in einiger Entfernung auf Null reduziert wird, da in der Entfernung im Nebel die dunklen Flecken der Schatten seltsam aussahen.  Der Aberrationseffekt wurde ebenfalls ge√§ndert (dies ist die Farbverzerrung des Bildes bei Verwendung von Linsen, etwa Farbkonturen an den R√§ndern von Objekten). Der Standardeffekt von Unity malte die burgundergr√ºnen R√§nder von Objekten (meiner Meinung nach eine ziemlich seltsame L√∂sung).  Tats√§chlich sind die Farben meistens n√§her an Gelb-Rot-Blau, was mir klar wurde.  Ein weiterer dauerhafter Effekt war die selbstgemachte Farbkorrektur.  Der Standard-Unity-Effekt schien mir zu ressourcenintensiv, sodass ein eigener, vereinfachter Effekt realisiert wurde.  Im Grunde hat er den Effekt des Tonmappings erzeugt und das Farbschema leicht in ein k√§lteres ge√§ndert.  Die Auswahl einer Farbpalette f√ºr ein Bild ist immer eine schwierige Aufgabe, die schwer zu bestimmen ist.  Es kommt vor, dass Sie v√∂llig entgegengesetzte Optionen m√∂gen und eine Entscheidung √§u√üerst schwierig ist.  In diesem Projekt habe ich mich f√ºr stumpfe und kalte Farben entschieden.  F√ºr viele schien sie √ºberm√§√üig verblasst zu sein, aber es scheint mir, dass sie die Stimmung, die ich in meinem Spiel zu reflektieren versuchte, sehr genau wiedergibt, die Stimmung von Traurigkeit, Niedergeschlagenheit und Einsamkeit. <br><br><img src="https://habrastorage.org/webt/qv/er/iv/qverivmj5x-rorvqc0vgmmsrtpo.jpeg"><br><br><img src="https://habrastorage.org/webt/4i/uz/2k/4iuz2kxafowra3gr_cckxkngpzq.jpeg"><br><br><h4>  Was ist mit dem Code? </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In einem Interview erw√§hnte ich wiederholt, dass ich immer weit vom Thema Programmierung entfernt war und mich mehr auf die visuelle Komponente konzentrierte. Ich habe angefangen, den ersten vollwertigen Code zu schreiben, w√§hrend ich am Spiel ‚ÄûTrain‚Äú gearbeitet habe. Als ich 35MM entwickelte, hatte ich bereits einige F√§higkeiten. Im Allgemeinen schien mir das Quest-Genre sehr gut geeignet zu sein, um die Programmierung auf meinem Anfangsniveau zu verstehen. Die meisten Aktionen im Spiel basieren auf Triggern. Ein Objekt tritt in den Trigger ein (ein W√ºrfel mit einem Collider) und etwas beginnt zu passieren, zum Beispiel eine Schnittszene. Im Drehbuch wird wie im Drehbuch f√ºr eine Theaterauff√ºhrung Zeile f√ºr Zeile beschrieben, wann und was passiert - jetzt schaltet sich die Kamera des Players aus, die Zwischensequenzkamera ein, der Charakter erscheint im Rahmen, die Konversationsanimation beginnt usw. Ich glaube, dass es Werkzeuge gibt, die diesen ganzen Prozess erleichtern (ich glaubeweil es nicht tief ging), aber diese Option scheint mir immer noch am verst√§ndlichsten zu sein, weil Sie selbst alle Ereignisse kontrollieren.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Bewegung unseres Partners im Spiel wurde mithilfe von Triggern implementiert, die Kontrollpunkte seiner Route waren. Wenn Sie den Ausl√∂ser dr√ºcken, wird m√∂glicherweise eine neue Animation aktiviert oder der Charakter kann etwas sagen. </font></font><br><br><img src="https://habrastorage.org/webt/ts/r9/rz/tsr9rz9e2jumsgryopdvzs_og4m.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diese Methode wurde auf allen Ebenen au√üer der letzten angewendet. Am letzten Ort in der Stadt, wenn wir mit einem Partner zu ihr kamen, f√ºhrte er uns nicht mehr die Route entlang, sondern rannte uns hinterher. Dort wurde bereits ein auf NavMesh basierender Controller verwendet (ein System, mit dem ein Objekt nach einem Pfad zu einem Ziel suchen und zu diesem wechseln kann).</font></font><br><br><img src="https://habrastorage.org/webt/cx/my/4i/cxmy4ix45uvqvn4auqkvlk0ykby.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit dem B√§ren am zweiten Ort des Spiels war es schwieriger. Es wurde ein Controller verwendet, der nur mit einem starren K√∂rper (physischem K√∂rper) funktioniert, daher war das Tier dumm und st√ºrzte oft gegen B√§ume und andere Gegenst√§nde. Physisches Material ohne Reibung erm√∂glichte es uns, ernsthafte Staus zu vermeiden, und der B√§r rutschte schlie√ülich aus und verfolgte uns weiter. Hier und im Allgemeinen in Bereichen, in denen Sie sterben k√∂nnen, stie√ü ich auf das schwerwiegendste Problem f√ºr mich - den Start des Todes und den Neustart. Zum Zeitpunkt des Todes war es notwendig, alle aktuellen Zust√§nde des Charakters zu ber√ºcksichtigen: Ist die Taschenlampe eingeschaltet, ist die Karte offen, ist das Messer aktiviert usw. Es war auch erforderlich, die Werte der Gesundheit und aller Ressourcen zu erhalten, und dann, alles, was aktiviert wurde, war es erforderlich, die Animation der fallenden Kamera zu deaktivieren und zu starten. Nach dem Abdunkeln des Bildschirms musste alles zur√ºckgegeben und die gespeicherten Werte gelesen werden.Tats√§chlich gibt es keine gro√üen Schwierigkeiten mit dem richtigen Ansatz, aber in meinem Fall tauchten viele Fehler auf: Entweder blieb das Messer in meinen H√§nden vor meinen Augen, als der B√§r angriff, dann ging die Karte nicht weg - alles so. Au√üerdem wei√ü man nie, wie sich ein Spieler in diesem Moment selbst f√ºhren kann, wohin er rennen wird und unter welchen Bedingungen ein B√§r f√ºhren kann, der irgendwo stecken bleiben oder uns zum Beispiel durch die Mauer angreifen kann. Im Allgemeinen gibt es viele Nuancen, die Sie nicht sofort vorhersehen werden.greife uns durch die Mauer an. Im Allgemeinen gibt es viele Nuancen, die Sie nicht sofort vorhersehen werden.greife uns durch die Mauer an. Im Allgemeinen gibt es viele Nuancen, die Sie nicht sofort vorhersehen werden.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Interaktion unseres Charakters mit Objekten wurde mit dem Raycast-Strahl realisiert. Alle interaktiven Objekte wurden mit dem Betreff-Tag versehen. Wenn der Strahl auf sie trifft, wird die Hintergrundbeleuchtung aktiviert (das Netz ist ein Indikator mit hervorgehobenen Kanten) und enth√§lt ein Skript, das bereits daf√ºr verantwortlich ist, welche Aktionen wir mit diesem Objekt ausf√ºhren k√∂nnen, z. B. ein Objekt aufnehmen und lesen eine Notiz oder √∂ffnen Sie die T√ºr.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr die Interaktion gab es urspr√ºnglich Pl√§ne, vollwertige H√§nde herzustellen, die nach Objekten greifen, was einen offensichtlicheren Effekt der Pr√§senz erzeugen w√ºrde. Diese Option stellte f√ºr mich jedoch die gro√üe Schwierigkeit der Implementierung und die Aussicht dar, in Zukunft ein ganzes ‚ÄûB√ºndel‚Äú von Fehlern zu haben. Es gab also nur H√§nde, die bereits ausgew√§hlte Elemente tragen. Vor der Kamera befindet sich ein Fertighaus mit kleinen Griffen, das bereits alle Objekte (Kamera, Messer, Axt usw.) enth√§lt. Wenn Sie w√§hrend des Spiels ein Objekt ausw√§hlen, wird das gew√ºnschte Objekt aktiviert und die unn√∂tigen Objekte deaktiviert.</font></font><br><br><img src="https://habrastorage.org/webt/kp/my/wh/kpmywhdleoxjlpvbey5nxq6iexa.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein interessanter Punkt bezog sich auf die Animation der sprechenden Charaktere. </font><font style="vertical-align: inherit;">Die Technik ist primitiv, aber ich habe selbst daran gedacht, stolz, ja. </font><font style="vertical-align: inherit;">Zuerst dachte ich, dass ich bei der Kommunikation der Charaktere die Animation der √ñffnung des Kiefers in zuf√§lliger Reihenfolge mit jeder Phrase starten m√ºsste. </font><font style="vertical-align: inherit;">Aber dann kam mir der Gedanke, dass ein Skript den Lautst√§rkepegel des Soundtracks zum Zeitpunkt der Wiedergabe lesen und diesen Pegel auf einen Float-Wert √ºbertragen k√∂nnte, der bereits f√ºr die Position des Kiefers des Helden verantwortlich ist. </font><font style="vertical-align: inherit;">Letztendlich √∂ffnete sich der Kiefer automatisch, wenn W√∂rter im Takt der Audiodatei ausgesprochen wurden. </font><font style="vertical-align: inherit;">Dies vereinfachte die Aufgabe erheblich, obwohl sie zu "maschinell" aussah.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Optimierung </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Optimierung ist ein sehr wichtiger Teil der Entwicklung, von dem abh√§ngt, wie reibungslos das Spiel auf unterschiedlicher Hardware funktioniert. Ich werde auf die Optimierung der visuellen Komponente des Projekts eingehen. Hierf√ºr gibt es mehrere n√ºtzliche Methoden: Gruppen von Lods, Keulen ist verschlossen, Objekte in einiger Entfernung abschneiden. Die LOD-Gruppe sollte bei ‚Äûschweren‚Äú High-Poly-Objekten verwendet werden. Erstellen Sie dazu mehrere Netze mit einer unterschiedlichen Anzahl von Polygonen. Je weiter die Kamera vom Motiv entfernt ist, desto einfacher wird das Modell im Rahmen gezeichnet. Zum Beispiel wurden f√ºr 35 MM Lods in Modellen von Autos, Charakteren und einigen B√§umen verwendet. Normalerweise wurden 2-3 Lodes hergestellt, von denen jedes nachfolgende Netz fast 2 mal weniger Polygone hatte. Zur Verdeutlichung: Das urspr√ºngliche Automodell besteht aus 15.000 Polygonen, die erste LOD hat bereits etwa 9 Tonnen.(Die Anzahl der Rippen nimmt ab, kleine Teile wie Scharniere, Innenteile werden entfernt), die zweite LOD erreicht bereits 5 Tonnen (T√ºrgriffe, Spiegel in der Kabine werden entfernt, die Geometrie wird noch einfacher). Weiter in der gleichen Richtung. F√ºr Lodges wurde √ºbrigens ein interessanter Trick verwendet. Wenn wir Lightmaps f√ºr ein Objekt mit Lods backen, m√ºssen wir f√ºr beide Objekte backen. Um die Zeit zum Backen zu verk√ºrzen und Systemspeicher zu sparen, habe ich ein Skript verwendet, das die zugewiesene Lightmap mit allen Koordinaten automatisch vom √ºbergeordneten Objekt (Null-LOD) auf alle anderen Lods √ºbertr√§gt.Ein interessanter Trick wurde verwendet. Wenn wir Lightmaps f√ºr ein Objekt mit Lods backen, m√ºssen wir f√ºr beide Objekte backen. Um die Zeit zum Backen zu verk√ºrzen und Systemspeicher zu sparen, habe ich ein Skript verwendet, das die zugewiesene Lightmap mit allen Koordinaten automatisch vom √ºbergeordneten Objekt (Null-LOD) auf alle anderen Lods √ºbertr√§gt.Ein interessanter Trick wurde verwendet. Wenn wir Lightmaps f√ºr ein Objekt mit Lods backen, m√ºssen wir f√ºr beide Objekte backen. Um die Zeit zum Backen zu verk√ºrzen und Systemspeicher zu sparen, habe ich ein Skript verwendet, das die zugewiesene Lightmap mit allen Koordinaten automatisch vom √ºbergeordneten Objekt (LOD Null) auf alle anderen Lods √ºbertr√§gt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die zweite Optimierungsmethode ist Occlusion Culling. Dies ist ein Mechanismus, bei dem alles abgeschnitten wird, was sich nicht im Sichtfeld der Kamera befindet oder von einem anderen Objekt geschlossen wird. Wenn wir zum Beispiel in den Raum gehen, sehen wir hinter der Wand nicht mehr viele Objekte auf der Stra√üe, und daher m√ºssen keine Ressourcen f√ºr das Rendern aufgewendet werden.</font></font><br><br><img src="https://habrastorage.org/webt/j1/_y/tk/j1_ytkv-3hkd3m8m-xbewf8thzw.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine weitere n√ºtzliche M√∂glichkeit, das Rendern zu vereinfachen, besteht darin, Objekte aus der Ferne zu beschneiden. </font><font style="vertical-align: inherit;">Dies ist die erste Option, die ich seit dem Projekt ‚ÄûLicht‚Äú getroffen habe. </font><font style="vertical-align: inherit;">An der Kamera h√§ngt ein Skript, das den Renderabstand f√ºr jede Ebene anpasst. </font><font style="vertical-align: inherit;">In meinem Fall wurden drei Kategorien von Schichten speziell erstellt, mit kleinen Gegenst√§nden (Haushaltsgegenst√§nden, H√§mmern, Ziegeln und kleinen Tr√ºmmern) mit mittleren und etwas √ºberdurchschnittlichen Gr√∂√üen (Teekannen, B√ºsche, Blument√∂pfe, kleine Laternenpf√§hle usw.). </font><font style="vertical-align: inherit;">Drei Kategorien wurden Entfernungen zugewiesen: 40, 80 und 120 Meter. </font><font style="vertical-align: inherit;">Sobald die angegebene Entfernung √ºberschritten wurde, hat die Kamera das Rendern des entsprechenden Objekts beendet. </font><font style="vertical-align: inherit;">Die Option ist sehr praktisch und effektiv, da kleine Requisiten aus der Ferne nicht mehr zu sehen sind und es daher keinen Sinn macht, sie zu rendern.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ton </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die meisten Sounds f√ºr das Spiel stammen aus kostenlosen Bibliotheken aus dem Internet. Normalerweise habe ich die erforderlichen Optionen heruntergeladen und sie dann in Adobe Audition kombiniert und gemischt. Im Allgemeinen gibt es zu diesem Teil der Arbeit nicht viel zu sagen, da es sich um einen eher routinem√§√üigen, langweiligen Prozess handelt, der f√ºr mich nicht besonders attraktiv ist. √úbrigens hat die Arbeit, Sounds einzuf√ºhren, Schnittszenen zu bewerten und Sounddateien so anzupassen, dass der gew√ºnschte Sound zur richtigen Zeit abgespielt wird - all dies hat wahrscheinlich ein Viertel der gesamten Zeit in Anspruch genommen, die am Spiel gearbeitet hat. Der einzig angenehme Moment war die Einf√ºhrung der Musik, an der der coole und √§u√üerst talentierte Komponist Dmitry Nikolaev arbeitete. Ich bin sehr zufrieden mit dem, was er getan hat, weil ich im Gro√üen und Ganzen nicht genau wusste, was ich h√∂ren wollte. Aber Dmitry f√ºhlte die Stimmung sehr gut,die im Projekt festgelegt und in Form einer atmosph√§rischen Umgebung umgesetzt wurde. Es stellte sich als etwas Fantastisches, Geheimnisvolles und Melodisches heraus.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein weiterer interessanter Schritt war die Arbeit mit Sprachfiguren. Trotz der Kritik von au√üen bin ich immer noch zufrieden mit dem Ergebnis und ich glaube, dass die Schauspieler ihre Arbeit sehr gut gemacht haben. √úbrigens die Hauptfiguren von Vsevolod Petrykin und Alexander Bragi, f√ºr die sie sich sehr bedanken.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Allgemeinen gab es keine ernsthaften Probleme mit dem Sound, obwohl nach der Ver√∂ffentlichung ein seltener Fehler entdeckt wurde, den ich immer noch nicht √ºberwinden konnte, weil ich seine Natur immer noch nicht verstand. </font><font style="vertical-align: inherit;">Manchmal h√∂rte ein Teil der Sounds auf zu spielen oder klang mit einem starken Echoeffekt. </font><font style="vertical-align: inherit;">Wenn man mit einem Helden spricht, kann eine Stimme pl√∂tzlich verschwinden und sich auf die gleiche Weise pl√∂tzlich erholen. </font><font style="vertical-align: inherit;">Es gab Vermutungen, die mit einer gro√üen Last und einer gro√üen Anzahl von gleichzeitig abgespielten Ger√§uschen verbunden waren. </font><font style="vertical-align: inherit;">Es gab auch Annahmen √ºber die Verbindung des Fehlers mit den Hallzonen, aber dies ist nicht korrekt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das ist wahrscheinlich alles. </font><font style="vertical-align: inherit;">Seit der Entwicklung ist viel Zeit vergangen, einige Dinge wurden vergessen und andere sind v√∂llig irrelevant geworden, aber ich hoffe, dass der Artikel f√ºr jemanden n√ºtzlich sein wird und Antworten auf einige Fragen geben kann. </font><font style="vertical-align: inherit;">Vielen Dank und viel Gl√ºck!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de448340/">https://habr.com/ru/post/de448340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de448330/index.html">Zufallszahlen und dezentrale Netzwerke: Eine praktische Anwendung</a></li>
<li><a href="../de448332/index.html">IT-Adh√§renten initiieren: Zeigen Sie Ihre St√§rke auf einem Riff</a></li>
<li><a href="../de448334/index.html">Wenn jemandes Produktivit√§t Interesse weckt</a></li>
<li><a href="../de448336/index.html">Seminar ‚ÄûHybrid Clouds - Vor- und Nachteile: Vorbereitung auf Business und IT‚Äú - 25. April, Moskau</a></li>
<li><a href="../de448338/index.html">Aufschl√ºsselung der Grundlagen von C #: Zuweisen von Speicher f√ºr einen Referenztyp auf dem Stapel</a></li>
<li><a href="../de448342/index.html">MyDrops - kosteng√ºnstiges TWS mit gutem Sound und zuverl√§ssigem Bluetooth</a></li>
<li><a href="../de448346/index.html">Von GNU zu Doom: TechTrain 2019 angek√ºndigt</a></li>
<li><a href="../de448350/index.html">W√∂rterbuchimplementierung in Python</a></li>
<li><a href="../de448352/index.html">Die Boring Company wird in Las Vegas einen Tunnel graben</a></li>
<li><a href="../de448354/index.html">GraphQL Voyager als Tool zum Auffinden von Schwachstellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>