<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‚ğŸ½ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ» ğŸ¥ MassTransitï¼ŒSagaå’ŒRabbitMQç”¨äºå®æ–½æµç¨‹ç®¡ç†å™¨ ğŸ‘‚ğŸ½ ğŸ¦ ğŸ¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ›¾ç»ï¼Œæˆ‘ä»¬é¢ä¸´ç€ä½¿ä¸€å®¶å¤§å…¬å¸çš„å„ç§å·¥ä½œæµç¨‹è‡ªåŠ¨åŒ–çš„ä»»åŠ¡ã€‚ å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œè¿™æ„å‘³ç€åœ¨å¯åŠ¨æ—¶è¦ç»„è£…å¤§çº¦10ä¸ªç³»ç»Ÿã€‚ è€Œä¸”ï¼Œæ‰€æœ‰ç»„ä»¶éƒ½å¿…é¡»å¼‚æ­¥ï¼Œå¯æ‰©å±•ï¼Œå¯é åœ°è¿æ¥ã€‚ 


 ç®€åŒ–çš„è¿‡ç¨‹å¯ä»¥æè¿°ä¸ºä¸åŒç³»ç»Ÿä¸­çš„ä¸€ç³»åˆ—åŠ¨ä½œï¼Œç”±äºéœ€è¦äººå·¥å‚ä¸ï¼Œå› æ­¤æ— æ³•å®Œå…¨è‡ªåŠ¨åŒ–ã€‚ ä¾‹å¦‚ï¼Œé€‰æ‹©æŸäº›åŠ¨ä½œæˆ–åŸºæœ¬åè°ƒï¼Œè¿™å¯¹äºè¿›å…¥è¿‡ç¨‹çš„ä¸‹ä¸€...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MassTransitï¼ŒSagaå’ŒRabbitMQç”¨äºå®æ–½æµç¨‹ç®¡ç†å™¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/412793/"><p> æ›¾ç»ï¼Œæˆ‘ä»¬é¢ä¸´ç€ä½¿ä¸€å®¶å¤§å…¬å¸çš„å„ç§å·¥ä½œæµç¨‹è‡ªåŠ¨åŒ–çš„ä»»åŠ¡ã€‚ å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œè¿™æ„å‘³ç€åœ¨å¯åŠ¨æ—¶è¦ç»„è£…å¤§çº¦10ä¸ªç³»ç»Ÿã€‚ è€Œä¸”ï¼Œæ‰€æœ‰ç»„ä»¶éƒ½å¿…é¡»å¼‚æ­¥ï¼Œå¯æ‰©å±•ï¼Œå¯é åœ°è¿æ¥ã€‚ </p><br><p> ç®€åŒ–çš„è¿‡ç¨‹å¯ä»¥æè¿°ä¸ºä¸åŒç³»ç»Ÿä¸­çš„ä¸€ç³»åˆ—åŠ¨ä½œï¼Œç”±äºéœ€è¦äººå·¥å‚ä¸ï¼Œå› æ­¤æ— æ³•å®Œå…¨è‡ªåŠ¨åŒ–ã€‚ ä¾‹å¦‚ï¼Œé€‰æ‹©æŸäº›åŠ¨ä½œæˆ–åŸºæœ¬åè°ƒï¼Œè¿™å¯¹äºè¿›å…¥è¿‡ç¨‹çš„ä¸‹ä¸€é˜¶æ®µæ˜¯å¿…éœ€çš„ã€‚ </p><br><p> ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å†³å®šé€šè¿‡æ•°æ®æ€»çº¿ä½¿ç”¨æ¶ˆæ¯ä¼ é€’ä½“ç³»ç»“æ„ï¼ŒMassTransitåŠå…¶Sagaä¸RabbitMQå®Œç¾åŒ¹é…ã€‚ </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/8f9/896/b2a/8f9896b2aade49a732cf10b63b8276ec.jpg" alt="å›¾ç‰‡"><a name="habracut"></a></p><h2> ä½è´ºæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ </h2><br>  Sagaæ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Enterprise Application Integration Templates</a>ä¸€ä¹¦ä¸­Process Manageræ¨¡æ¿çš„å®ç°ï¼Œå®ƒä½¿æ‚¨å¯ä»¥å°†æµç¨‹æè¿°ä¸ºçŠ¶æ€æœºã€‚ äº‹ä»¶åˆ°è¾¾å…¥å£ï¼ŒSagaæ‰§è¡Œä¸€ç³»åˆ—åŠ¨ä½œã€‚ åŒæ—¶ï¼Œåœ¨ä½è´ºå¿çš„ä»»ä½•é˜¶æ®µï¼Œéƒ½å¯èƒ½éœ€è¦åšå‡ºå†³å®šã€‚ ç„¶åï¼Œå¥¹åœ¨è·Ÿè¸ªå™¨ä¸­åˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶æ— é™æœŸåœ°â€œå…¥ç¡â€ï¼Œç­‰å¾…æ–°äº‹ä»¶ã€‚ <br><p>  SagaåŸºäº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‡ªåŠ¨æœº</a> ã€‚ åœ¨ä»MassTransitStateMachine &lt;&gt;ç»§æ‰¿çš„ç±»ä¸­å£°æ˜æ€§åœ°æè¿°äº†å®ƒã€‚ å¯¹äºSagaï¼Œæ‚¨éœ€è¦æè¿°æ‰€æœ‰çŠ¶æ€ï¼Œå‘ç”Ÿçš„äº‹ä»¶ä»¥åŠå‘ç”ŸæŸäº›äº‹ä»¶æ—¶é‡‡å–çš„æªæ–½ã€‚ å½“å‰çŠ¶æ€å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ </p><br><p> é¦–å…ˆï¼Œæˆ‘ä»¬æè¿°ä½è´ºçš„æ‰€æœ‰å·å’Œäº‹ä»¶ï¼Œå¹¶ç»™å®ƒä»¬èµ·æ˜“äºç†è§£çš„åç§°ã€‚ çœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">StateMachine</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> State AwaitingTaskCreated { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> State AwaitingTaskTakedToWork { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> State AwaitingDecisionAboutTask { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> State Rejected { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Event&lt;IStartWorkflowCommand&gt; StartWorkflowCommandReceived { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Event&lt;TaskCreatedNotification&gt; TaskCreated { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Event&lt;TaskTakedToWorkNotification&gt; TaskTakedToWork { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Event&lt;TaskDeclinedNotification&gt; TaskDeclined { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Event&lt;TaskApprovedNotification&gt; TaskApproved { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BuildStateMachine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InstanceState(x =&gt; x.CurrentState); Event(() =&gt; StartWorkflowCommandReceived, x =&gt; x.CorrelateById(ctx =&gt; ctx.Message.CorrelationId) .SelectId(context =&gt; context.Message.CorrelationId)); Event(() =&gt; TaskCreated, x =&gt; x.CorrelateById(ctx =&gt; ctx.Message.CorrelationId)); Event(() =&gt; TaskTakedToWork, x =&gt; x.CorrelateById(ctx =&gt; ctx.Message.CorrelationId)); Event(() =&gt; TaskDeclined, x =&gt; x.CorrelateById(ctx =&gt; ctx.Message.CorrelationId)); Event(() =&gt; TaskApproved, x =&gt; x.CorrelateById(ctx =&gt; ctx.Message.CorrelationId)); } }</code> </pre> <br><p> æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªå±€éƒ¨ç±»ï¼Œåœ¨å…¶ä¸­å£°æ˜äº†æ‰€æœ‰çŠ¶æ€å’Œäº‹ä»¶çš„åˆ—è¡¨ï¼Œä»¥åŠBuildStateMachineæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æè¿°äº†äº‹ä»¶ä¸Sagaçš„å…³è”ã€‚ ä¸ºæ­¤ï¼Œåœ¨æ¯ä¸ªäº‹ä»¶ä¸­ä¼ é€’ä¸€ä¸ªç‰¹æ®Šçš„å‚æ•°CorrelationId-è¿™æ˜¯Guidï¼Œå®ƒåœ¨æ‰€æœ‰è¿æ¥çš„ç³»ç»Ÿä¹‹é—´å’Œç›‘è§†ç³»ç»Ÿä¸­è¿è¡Œã€‚ </p><br><p> å› æ­¤ï¼Œå¦‚æœå‡ºç°ä»»ä½•é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ‰€æœ‰è¿æ¥çš„ç³»ç»Ÿä¸­è¿˜åŸæ—¥å¿—æ‰€å‘ç”Ÿæƒ…å†µçš„å…¨éƒ¨å›¾æ™¯ã€‚ æˆ‘ä»¬åœ¨æ¥è‡ªSagaçš„æ¶ˆæ¯ä¸­å‘é€CorrelationIdï¼Œç³»ç»Ÿå°†å…¶å‘é€å›é€šçŸ¥ä¸­ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å°†æ¶ˆæ¯ä¸ç‰¹å®šçš„Sagaç›¸å…³è”ã€‚ </p><br><p> è¿™æ˜¯çŠ¶æ€æœºç±»æœ¬èº«çš„ä¸€ä¸ªç¤ºä¾‹ï¼š </p><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> sealed partial <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> StateMachine : MassTransitStateMachine&lt;WorkflowSaga&gt; { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> StateMachine() { BuildStateMachine(); <span class="hljs-keyword"><span class="hljs-keyword">Initially</span></span>(WhenStartWorkflowCommandReceived()); During(AwaitingTaskCreatedInPlanner, WhenTaskCreated()); During(AwaitingTaskTakedToWork, WhenTaskTakedToWork()); During(AwaitingDecisionAboutTask, WhenTaskApproved(), WhenTaskDeclined()); } private EventActivityBinder&lt;WorkflowSaga, IStartWorkflowCommand&gt; WhenStartWorkflowCommandReceived() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">When</span></span>(StartWorkflowCommandReceived) .<span class="hljs-keyword"><span class="hljs-keyword">Then</span></span>(ctx =&gt; ctx.Instance.SaveConfigurationRequestInfo(ctx.Data)) .Send(TaskManagerQueue, ctx =&gt; <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> CreateTaskCommand(ctx.Instance)) .TransitionTo(AwaitingTaskCreated); } private EventActivityBinder&lt;WorkflowSaga, TaskCreatedNotification&gt; WhenTaskCreated() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">When</span></span>(DPORPApproveTaskCreatedInPlanner) .<span class="hljs-keyword"><span class="hljs-keyword">Then</span></span>(ctx =&gt; ctx.Instance.SaveCreatedTaskInfo(ctx.Data)) .Send(MailServiceQueue, ctx =&gt; <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> NotifyRequestAuthorThatWorkflowStarted(ctx.Instance)) .TransitionTo(AwaitingTaskTakedToWork); } private EventActivityBinder&lt;WorkflowSaga, TaskTakedToWorkNotification&gt; WhenTaskTakedToWork() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">When</span></span>(TaskTakedToWork) .<span class="hljs-keyword"><span class="hljs-keyword">Then</span></span>(ctx =&gt; ctx.Instance.MarkTaskAsTakedToWork(ctx.Data)) .TransitionTo(AwaitingDecisionAboutTask); } private EventActivityBinder&lt;WorkflowSaga, TaskApprovedNotification&gt; WhenTaskApproved() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">When</span></span>(TaskApproved) .<span class="hljs-keyword"><span class="hljs-keyword">Then</span></span>(ctx =&gt; ctx.Instance.MarkTaskAsApproved(ctx.Data)) .Finalize(); } private EventActivityBinder&lt;WorkflowSaga, TaskDeclinedNotification&gt; WhenTaskDeclined() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">When</span></span>(TaskDeclined) .<span class="hljs-keyword"><span class="hljs-keyword">Then</span></span>(ctx =&gt; ctx.Instance.MarkTaskAsDeclined(ctx.Data)) .TransitionTo(Rejected); } }</code> </pre><br><p> æ„é€ å‡½æ•°æè¿°çŠ¶æ€ã€‚ ä¸ºäº†ä¿æŒå¯è¯»æ€§ï¼Œä½¿ç”¨å•ç‹¬çš„æ–¹æ³•æ¥æ¥æ”¶æ¯ä¸ªäº‹ä»¶ã€‚ æ„é€ æ¶ˆæ¯çš„æ•´ä¸ªé€»è¾‘æ˜¯åœ¨æ¶ˆæ¯æœ¬èº«ä¸­æ‰§è¡Œçš„ï¼Œå¦åˆ™ï¼Œéšç€ç³»ç»Ÿå¤æ‚æ€§çš„æé«˜ï¼ŒSagaè¿…é€Ÿè†¨èƒ€ã€‚ </p><br><p> åœ¨åˆ¶å®šçº¦å®šå’Œä¿æŒå¯è¯»æ€§æ—¶åº”æ ¼å¤–å°å¿ƒã€‚ ç”±äºCï¼ƒçš„å¿…è¦æ€§ï¼Œå¾ˆéš¾åœ¨å…¶ä¸­å£°æ˜çŠ¶æ€å’ŒåŠ¨ä½œçš„æè¿°ã€‚ å³ä½¿å¯¹äºç®€å•çš„çŠ¶æ€æœºï¼ŒçœŸæ­£çš„åœ°ç‹±ä¹Ÿå¼€å§‹äº†ã€‚ </p><br><p> ç°åœ¨è°ˆè°ˆSagaInstanceã€‚  SagaInstanceæ˜¯ä»SagaStateMachineInstanceç»§æ‰¿çš„ç±»ã€‚ å®ƒç”±è¡¨å¾çŠ¶æ€æœºçš„å¯¹è±¡å’Œå­—æ®µç»„æˆã€‚ ç²—ç•¥åœ°è¯´ï¼Œè¿™å°±æ˜¯ä½è´ºçš„è®°å¿†ã€‚ æˆ‘ä»¬å­˜å‚¨äº†å¥¹ä¸€ç”Ÿæ‰€éœ€çš„æ‰€æœ‰Sagaæ•°æ®ã€‚ æ­¤ç±»ä¸­è¿˜æè¿°äº†åœ¨å·¥ä½œè¿‡ç¨‹ä¸­æ­¤æ•°æ®æ›´æ”¹çš„é€»è¾‘ã€‚ </p><br><p> è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š </p><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> WorkflowSaga : SagaStateMachineInstance , ISagaWithState , ICreatedOnOffset , IModifiedOnOffset , ICreatedBy&lt;string&gt; , IModifiedBy&lt;string&gt; { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Guid CorrelationId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> string CurrentState { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> string InitialRequestViewUrl { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> string RequestNumber { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> string RequestAuthor { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> string RequestText { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> byte[] RowVersion { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> string CreatedBy { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> string ModifiedBy { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> DateTimeOffset CreatedOn { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> DateTimeOffset ModifiedOn { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> DateTimeOffset CompletedOn { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> virtual ICollection&lt;RelatedTask&gt; RelatedTasks { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> SaveGabrielConfigurationRequestInfo( ICreateGabrielConfigurationRequestCommand command) { CorrelationId = command.CorrelationId; RequestNumber = command.RequestNumber; RequestAuthor = command.Author; RequestText = command.RequestText; InitialRequestViewUrl = command.InitialRequestViewUrl; CreatedOn = RuntimeContext.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>.DateTimeOffset.Now; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> SaveCreatedTaskInfo(ITaskCreationInfo taskCreationInfo) { RelatedPlannerTasks.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RelatedPlannerTask(taskCreationInfo)); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> MarkTaskAsTakedToWork(ITaskUpdatedInfo taskInfo) { UpdateTaskInfo(taskInfo, TaskStatus.TakedToWork); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> MarkTaskAsApproved(TaskApprovedNotification taskInfo) { UpdateTaskInfo(taskInfo, TaskStatus.Completed, taskInfo.<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>); CompletedOn = RuntimeContext.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>.DateTimeOffset.Now; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> MarkTaskAsDeclined(TaskDeclinedNotification taskInfo) { UpdateTaskInfo(taskInfo, TaskStatus.Declined, taskInfo.<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>); CompletedOn = RuntimeContext.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>.DateTimeOffset.Now; } private <span class="hljs-type"><span class="hljs-type">void</span></span> UpdateTaskInfo(ITaskUpdatedInfo taskInfo, TaskStatus taskStatus, string <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { var task = RelatedTasks.Single(t =&gt; t.Number == taskInfo.Number); task.ModifiedBy = taskInfo.TaskModifiedBy; task.<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; task.Status = taskStatus; } }</code> </pre><br><p> ä¸€ä¸ªç¤ºä¾‹æ˜¾ç¤ºï¼Œåœ¨SagaInstanceä¸­å­˜å‚¨äº†CorrelationIdä»¥å°†äº‹ä»¶ä¸Sagaå’ŒCurrentStateç›¸å…³è”ä»¥å­˜å‚¨Sagaçš„å½“å‰çŠ¶æ€ã€‚ </p><br><h2> é”™è¯¯å¤„ç† </h2><br><p> å¦‚æœåœ¨æ¶ˆæ¯å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼ŒSagaä¼šå¦‚ä½•å¤„ç†ï¼Ÿ è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½å¸Œæœ›çŠ¶æ€æœºå§‹ç»ˆä¿æŒä¸€è‡´ï¼Œå³ä½¿å‡ºäº†é—®é¢˜ã€‚ å€ŸåŠ©MassTransitï¼ŒSagaçš„è¡¨ç°ä¸é”™ã€‚ </p><br><p> æ­£å¦‚æ‚¨å·²ç»æ³¨æ„åˆ°çš„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ²¡æœ‰ä¸€ä¸ªtry catchå—å¯ä»¥å¤„ç†å¼‚å¸¸ã€‚ åŸå› å¾ˆç®€å•ï¼šåœ¨é‚£é‡Œä¸éœ€è¦å®ƒä»¬ã€‚ å¦‚æœåœ¨æ¶ˆæ¯å¤„ç†æœŸé—´å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æ¶ˆæ¯å°†è¿”å›åˆ°é˜Ÿåˆ—ï¼Œå¹¶ä¸”æ‰€æœ‰æ›´æ”¹éƒ½å°†å›æ»šã€‚ ç”±äºæˆ‘ä»¬åœ¨ä¸Sagaç›¸åŒçš„äº‹åŠ¡ä¸­è¿›è¡Œæ‰€æœ‰æ•°æ®æ“ä½œï¼Œå› æ­¤ä¸ä¼šå…³é—­è¯¥äº‹åŠ¡ã€‚ </p><br><p> ä¸€èˆ¬è€Œè¨€ï¼Œåœ¨Sagaæœ¬èº«ä¸­æ“çºµSagaä»¥å¤–çš„å…¶ä»–ä¸œè¥¿æ˜¯ä¸å¥½çš„åšæ³•ã€‚ æ ¹æ®â€œä¼ä¸šåº”ç”¨ç¨‹åºçš„é›†æˆæ¨¡æ¿â€ä¸€ä¹¦ï¼Œæµç¨‹ç®¡ç†å™¨åº”ä¿æŒå°½å¯èƒ½çš„ç²¾ç®€å’Œç¬¨æ‹™ï¼šä»…å‘ç³»ç»Ÿå‘å‡ºå‘½ä»¤å¹¶ç›‘è§†çŠ¶æ€ï¼Œä½†ä»–æœ¬äººä¸åº”è¯¥åšä»»ä½•äº‹æƒ…ã€‚ </p><br><p> å½“ç„¶ï¼Œå½“æ‚¨éœ€è¦æ‰§è¡Œä¸€äº›è¡¥å¿æ“ä½œæ¥å¤„ç†å¼‚å¸¸æ—¶ï¼Œä¼šæœ‰æ›´å¤æ‚çš„åœºæ™¯ã€‚ ç„¶åï¼Œä½¿ç”¨â€œ .Catchâ€çŠ¶æ€æœºå¤„ç†ç¨‹åºæ¥æ•è·æŸç§ç±»å‹çš„å¼‚å¸¸ï¼Œç„¶åæ‰§è¡Œè¡¥å¿é€»è¾‘ã€‚ </p><br><p> è€Œä¸”ï¼Œå¦‚æœæ‚¨åªéœ€è¦æ‰¿è¯ºä¸€ä¸ªä¾‹å¤–ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨è§‚å¯Ÿè€…ï¼ˆObserverï¼‰ã€‚ </p><br><p> ç°åœ¨æƒ³è±¡ä¸€ä¸‹åœ¨æ¶ˆæ¯å¤„ç†æœŸé—´æˆ‘ä»¬å·²ç»æ‰§è¡Œäº†Sendå‘½ä»¤çš„æƒ…å†µï¼Œæ­¤åå‘ç”Ÿäº†å¼‚å¸¸ã€‚ åœ¨æ­¤æ­¥éª¤å‘é€çš„å‘½ä»¤å°†å‘ç”Ÿä»€ä¹ˆï¼Ÿ æ¯•ç«Ÿï¼Œæ‰€æœ‰å·²ç»æ¶ˆå¤±çš„ä¸œè¥¿éƒ½æ— æ³•é€€è¿˜å—ï¼Ÿ ä½†æ˜¯ï¼Œè¿™é‡Œä¸€åˆ‡éƒ½ç»è¿‡æ·±æ€ç†Ÿè™‘ã€‚ </p><br><p> é…ç½®æ€»çº¿æ—¶ï¼Œå¯ä»¥å¯ç”¨UseInMemoryOutboxé€‰é¡¹ã€‚ æ­¤é€‰é¡¹å…è®¸æ‚¨åœ¨å½“å‰æ­¥éª¤å®Œæˆä¹‹å‰ä¸å‘é€æ¶ˆæ¯ã€‚ å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œå°†å®Œå…¨ä¸å‘é€æ¶ˆæ¯ã€‚ ä»¥ä¸‹æ˜¯æ–‡æ¡£æ‘˜å½•ï¼š </p><br><pre> <code class="hljs pgsql">/// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// Includes an outbox <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the consume <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> <span class="hljs-type"><span class="hljs-type">path</span></span>, which delays outgoing messages <span class="hljs-keyword"><span class="hljs-keyword">until</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">path</span></span> /// <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the pipeline <span class="hljs-keyword"><span class="hljs-keyword">returns</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the outbox <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>. At this <span class="hljs-type"><span class="hljs-type">point</span></span>, the message execution pipeline should be /// nearly complete <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> the ack remaining. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> an <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> thrown, the messages are <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> sent/published. /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="configurator"&gt;The pipe configurator&lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> UseInMemoryOutbox(this IConsumePipeConfigurator configurator)</code> </pre> <br><h2> æµ‹éªŒ </h2><br><p> ä¹ä¸€çœ‹ï¼Œæµ‹è¯•å¼‚æ­¥çŠ¶æ€æœºä»ç„¶æ˜¯ä¸€ç§ä¹è¶£ã€‚ ä½†æ˜¯è¿™é‡Œä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚  MassTransitæä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„æµ‹è¯•ç¼–å†™æ¡†æ¶ï¼Œå¯ä»¥å®Œå…¨æ»¡è¶³æˆ‘ä»¬æµ‹è¯•çŠ¶æ€æœºçš„æ‰€æœ‰éœ€æ±‚ã€‚ </p><br><p> è¯¥æ¡†æ¶ä¸ºInMemoryæä¾›äº†æ•°æ®æ€»çº¿ï¼ˆInMemoryTestHarnessï¼‰çš„å®ç°ï¼Œå®ƒä½¿æ‚¨å¯ä»¥ç»•è¿‡RabbitMQæˆ–å…¶ä»–é˜Ÿåˆ—å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚ </p><br><p> å¥½å§ï¼Œä¾‹å¦‚ï¼š </p><br><pre> <code class="hljs pgsql">[TestFixture] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SagaTests : TestFixtureBase { protected const string HostName = "HostName"; protected InMemoryTestHarness Harness; protected StateMachine StateMachine; protected StateMachineSagaTestHarness&lt;GabrielConfigurationRequestSaga, StateMachine&gt; Saga; [SetUp] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> SetUp() { StateMachine = (StateMachine)Kernel. <span class="hljs-keyword"><span class="hljs-keyword">Get</span></span>&lt;MassTransitStateMachine&lt;WorkflowSaga&gt;&gt;(); Harness = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> InMemoryTestHarness(HostName); Saga = Harness .StateMachineSaga&lt;WorkflowSaga, StateMachine&gt;(StateMachine); } [TearDown] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> async Task TearDown() { await Harness.Stop(); } protected async Task&lt;WorkflowSaga&gt; InitializeSaga() { await Harness.<span class="hljs-keyword"><span class="hljs-keyword">Start</span></span>(); var command = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TestStartWorkflowCommand { CorrelationId = SagaId, Author = RequestAuthor, InitialRequestViewUrl = InitialRequestViewUrl, RequestText = RequestText, RequestNumber = RequestNumber, }; await Harness.InputQueueSendEndpoint .Send&lt;IStartWorkflowCommand&gt;(command); //    ,  consume    , // ,  Saga  ,    <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.IsTrue(Harness.Consumed .<span class="hljs-keyword"><span class="hljs-keyword">Select</span></span>&lt;IStartWorkflowCommand&gt;().<span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>()); var currentSaga = Saga.Created.Contains(SagaId); currentSaga.RelatedPlannerTasks = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;RelatedPlannerTask&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentSaga; } [Test] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> async Task CheckCurrntStateWhenStartWorkflowCommand() { var saga = await InitializeSaga(); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.IsNotNull(saga); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual(StateMachine .AwaitingORDTApproveTaskCreatedInPlanner.Name, saga.CurrentState); } } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> WhenTaskCreated : SagaTestsBase { private async Task&lt;WorkflowSaga&gt; InitializeState() { var saga = await InitializeSaga(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); saga.CurrentState = StateMachine.AwaitingTaskCreated.Name; InitializeRelatedTask(saga); await SendTaskCreatedNotification(); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.IsTrue(Harness.Consumed .<span class="hljs-keyword"><span class="hljs-keyword">Select</span></span>&lt;TaskCreatedNotification&gt;().<span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> saga; } [Test] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> async Task SaveWorkflowDataWhenTaskCreated() { var saga = await InitializeState(); var taskInfo = saga.RelatedPlannerTasks .First(task =&gt; task.PlannerTaskType == PlannerTaskType.DPORPApprove); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual(TaskNumber, taskInfo.Number); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual(TaskUrl, taskInfo.TaskUrl); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual(SagaId, taskInfo.SagaCorrelationId); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual(TaskStatus.Created, taskInfo.Status); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual(<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>, taskInfo.ModifiedBy); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual(saga.CurrentState, StateMachine.AwaitingTaskTakedToWork.Name); } [Test] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> async Task SendsMailWhenTaskCreated() { var mailConsumer = Harness .Consumer&lt;MockConsumer&lt;ISendEmailMessageWithTemplateCommand&gt;&gt; (RabbitMqRouting.QueueNames .SendEmailsQueueName); await InitializeState(); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.IsTrue(mailConsumer.Consumed .<span class="hljs-keyword"><span class="hljs-keyword">Select</span></span>&lt;ISendEmailMessageWithTemplateCommand&gt;().<span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>()); } private async Task SendTaskCreatedNotification() { await Harness.InputQueueSendEndpoint .Send(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TaskCreatedNotification { TaskUrl = TaskUrl, Number = TaskNumber, TaskModifiedBy = <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>, CorrelationId = SagaId }); } }</code> </pre><br><p> æµ‹è¯•è¿è¡Œéå¸¸å¿«ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä¸€å°å¼€å‘äººå‘˜çš„è®¡ç®—æœºä¸Šï¼Œå¤§çº¦21ç§’å†…è¿è¡Œ850ä¸ªæµ‹è¯•ã€‚ </p><br><h2> æœ‰ç”¨çš„æç¤º </h2><br><p> æ€»ä¹‹ï¼Œæˆ‘ä»¬æ ¹æ®ç»éªŒæä¾›äº†ä¸€äº›æœ‰ç”¨çš„æç¤ºã€‚ </p><br><ol><li><p> åˆåŒå’Œå…¬äº¤è½¦é€šä¿¡æ–¹æ¡ˆæœ€å¥½æ”¾åœ¨ç§äººç©ºé—´ä¸­ã€‚ å› æ­¤ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„åç§°ä¸ä¼šæœ‰å·®å¼‚ã€‚ æ‚¨è¿˜å¯ä»¥å°†å¸¦æœ‰å‘½åé˜Ÿåˆ—å’Œä¸»æœºçš„å¸¸é‡æ”¾å…¥nugetä¸­ã€‚  Nugetæ¯å¤©å¯å®šåˆ¶ã€‚ è¿˜æœ‰ä¸€äº›æºä»£ç æ§åˆ¶æ”¯æŒnugetï¼Œæœ‰æ”¶è´¹çš„ç§äººä¾›ç¨¿ã€‚ </p><br></li><li><p> äº†è§£å‘é€å’Œå‘å¸ƒä¹‹é—´çš„åŒºåˆ«ã€‚ å¦‚æœæ‚¨æœ‰ä¸€ä¸ªè®¢é˜…è€…ï¼Œå¹¶ä¸”ç¡®åˆ‡çŸ¥é“è¦å°†å‘½ä»¤å‘é€åˆ°çš„é˜Ÿåˆ—çš„åç§°ï¼Œè¯·ä½¿ç”¨â€œå‘é€â€ã€‚ å‘å¸ƒæ—¨åœ¨å‘é€å¹¿æ’­è­¦æŠ¥ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥</a>ä¸Šçš„è¯¦ç»†ä¿¡æ¯ã€‚ </p><br></li><li><p> å¦‚æœæ‚¨éœ€è¦æ„å»ºè¯·æ±‚/å“åº”æ¶ˆæ¯ï¼Œåˆ™æœ€å¥½ä¸ºåˆåŒæ·»åŠ å“åº”çš„é˜Ÿåˆ—åç§°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨MassTransitè‡ªå·±å»ºè®®é¿å…çš„MassTransitçš„è¯·æ±‚/å“åº”æ–¹æ¡ˆã€‚ ç”±äºè¿™å¤§å¤§é™ä½äº†å¯é æ€§ã€‚ æ‚¨æ­£åœ¨å¤±å»å¼‚æ­¥çš„æ‰€æœ‰å¥½å¤„ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä»ç„¶éœ€è¦åœ¨æœ‰é™çš„æ—¶é—´å†…è·å¾—ç­”æ¡ˆï¼Œåˆ™æœ€å¥½ä½¿ç”¨ç›´æ¥å‘¼å«ã€‚ è¿™æœ€å¥½å†™åœ¨åŒä¸€æœ¬ä¹¦ã€Šä¼ä¸šåº”ç”¨ç¨‹åºé›†æˆæ¨¡æ¿ã€‹ä¸­ã€‚ </p><br></li><li><p> ä¼ å¥‡åº”è¯¥æ˜¯ç˜¦çš„ã€‚ å°è¯•å°†æ‰€æœ‰ç¹ççš„é€»è¾‘ä¼ é€’ç»™å…¶ä»–ç³»ç»Ÿã€‚  Sagaå¿…é¡»è·³è¿‡çŠ¶æ€å¹¶å‘å·¦å³æ•£å¸ƒæ¶ˆæ¯ã€‚ </p><br></li><li><p> å°†æ‰€æœ‰æ¶ˆæ¯CorrelationIdæ·»åŠ åˆ°ç³»ç»Ÿä¹‹é—´è¿è¡Œã€‚ å› æ­¤ï¼Œåˆ†ææ—¥å¿—å¹¶å°†æ‰€æœ‰æ¶ˆæ¯é“¾æ¥æˆä¸€å¼ å›¾ç‰‡è¦å®¹æ˜“å¾—å¤šã€‚ å¤§ä¼—è¿è¾“ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ ä»CorrelatedByæ¥å£ç»§æ‰¿æ—¶ï¼Œä¼šå°†CorrelationIdæ·»åŠ åˆ°æ¶ˆæ¯ä¸­ã€‚ <br></p><br> åœ¨ç³»ç»Ÿä¸­è®¾ç½®æ—¥å¿—å’Œç›‘è§†ï¼Œå°†æ°¸è¿œä¸ä¼šé€ æˆä¼¤å®³ã€‚ æˆ‘ä»¬åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ¬æ–‡ä¸­çš„</a>ç»éªŒã€‚ <br></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN412793/">https://habr.com/ru/post/zh-CN412793/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN412783/index.html">åœ¨Centos 7ä¸Šä»æºä»£ç å®‰è£…MTProto Telegramä»£ç†</a></li>
<li><a href="../zh-CN412785/index.html">ç®¡ç†ç¡•å£«å’Œè‡ªç”±èŒä¸šè€…ã€‚ æ•…äº‹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†</a></li>
<li><a href="../zh-CN412787/index.html">å°†GitåµŒå…¥ä¼ä¸šå¼€å‘ç³»ç»Ÿä¸­</a></li>
<li><a href="../zh-CN412789/index.html">â€œå·¥ä½œä¸­çš„å¸®åŠ©â€ï¼šå¦‚ä½•ä½¿èŠå¤©æœºå™¨äººæ›´æ™ºèƒ½</a></li>
<li><a href="../zh-CN412791/index.html">æ”¹å–„è§†é¢‘ç›‘æ§ç³»ç»Ÿçš„æ€§èƒ½å¹¶é˜²æ­¢å´©æºƒ</a></li>
<li><a href="../zh-CN412795/index.html">è®©æˆ‘ä»¬ä»æ–‡ç« â€œæå®¢æ—¶ä»£é‡è¿”å“ˆå‹ƒå°”åˆ°åº•å‡ºäº†ä»€ä¹ˆé—®é¢˜â€çš„è®¨è®ºä¸­å¾—å‡ºç»“è®ºã€‚</a></li>
<li><a href="../zh-CN412797/index.html">å…³äºGoogleçš„CDNï¼ŒæœåŠ¡å’Œå­—ä½“çš„å±å®³</a></li>
<li><a href="../zh-CN412799/index.html">å§‹ç»ˆä¿æŒè”ç³»ï¼šMango Talker-Messengerå’Œè½¯ä»¶ç”µè¯</a></li>
<li><a href="../zh-CN412801/index.html">ç ”ç©¶ï¼šç”±äºåŠ å¯†è´§å¸äº¤æ˜“çš„å®‰å…¨æ€§ä½ï¼Œé»‘å®¢çªƒå–äº†æ•°ç™¾ä¸‡ç¾å…ƒ</a></li>
<li><a href="../zh-CN412803/index.html">æ·±å…¥äº†è§£å„ç§æ™ºèƒ½åˆçº¦å¹³å°</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>