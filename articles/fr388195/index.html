<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💪🏽 🆕 👣 Brûlure d'arbre de Noël! Nous prenons un smartphone, Internet mobile et ... allumons le "sapin de Noël" dans le pays 🙅🏽 🏽 🔟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il s'agira de la gestion des appareils électriques via Internet. La tâche est assez simple s'il existe un bon Internet câblé et, surtout, une adresse ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Brûlure d'arbre de Noël! Nous prenons un smartphone, Internet mobile et ... allumons le "sapin de Noël" dans le pays</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/masterkit/blog/388195/"><img src="https://habrastorage.org/files/e8f/3a1/d57/e8f3a1d578764572939df34bb36a10ba.jpg" align="left"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agira de la gestion des appareils électriques via Internet. La tâche est assez simple s'il existe un bon Internet câblé et, surtout, une adresse IP statique. Mais lorsque l'accès à Internet n'est possible que via un modem GSM, par exemple, dans le pays, le choix des solutions n'est pas si grand ... mais il y en a! Désormais, plus d'utilisateurs sont connectés au réseau mondial que de personnes sur Terre. Divers appareils sont des utilisateurs Internet à part entière depuis longtemps et beaucoup d'entre eux communiquent entre eux en utilisant le protocole MQTT populaire, qui a été décrit plus d'une fois ici. Le Master Kit comprend plusieurs appareils qui utilisent également le protocole MQTT et le serveur cloud gratuit iot.eclipse.org. Nous parlerons de leur configuration et de leur application.</font></font><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, en quelques mots sur ce qu'est la technologie MQTT pour communiquer des appareils entre eux sur l'Internet des objets. Il s'agit d'un chat, très similaire à un chat permettant aux gens de communiquer. Un appareil, par exemple, "Thermomètre Internet" crée son propre enregistrement sur un serveur spécial, le "sujet". Les autres appareils intéressés «s'abonnent» à cette rubrique et reçoivent toutes les mises à jour qui se produisent en temps réel, ou envoient leurs informations au chat, par exemple, les commandes de gestion. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est très simple. Vous devez déployer un réseau Wi-Fi local à l'aide d'un routeur domestique et vous connecter à Internet de quelque manière que ce soit, par exemple à l'aide d'un modem GSM. Dans notre cas, tout modem 2/3 / 4G de n'importe quel opérateur mobile convient</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, quels sont les appareils de Master Kit? Il n'y en a que trois dans cette ligne. Ce sont des cartes électroniques assemblées, bien sûr, sur la base du très connu ESP8266-01. Étant donné que cette puce n'a que deux entrées / sorties qui peuvent être contrôlées ou lire des informations, la gamme d'appareils s'est révélée être une combinaison des capacités d'un capteur de température et d'un relais électromagnétique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le but des appareils sera clair, j'espère, d'après le nom. En utilisant le premier, vous pouvez contrôler deux appareils électriques (radiateurs, éclairage, pompes, portails, irrigation, sirène, etc ...). Comme vous pouvez le voir, la carte contient deux relais électromagnétiques assez puissants. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MP3506</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Relais Internet, 2 canaux. </font></font><br>
<img src="https://habrastorage.org/files/b78/82a/956/b7882a95620d41e48d3748a047b1545d.jpg" align="left"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxièmement, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MP3504</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Internet relais + thermomètre</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/53a/171/2ad/53a1712adc644c05b7147fa90fe31f9b.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet appareil vous permet de connecter un seul appareil électrique, mais en même temps de recevoir des informations sur la température à "l'objet". Les deux appareils sont assemblés sur la même carte et sont alimentés par 12V DC. Les relais permettent de commuter des charges jusqu'à 7A. Mais, si vous souhaitez contrôler le chauffage, il est préférable de le faire via un contacteur supplémentaire. Le même DS18B20 est utilisé comme capteur de température, vous le voulez dans un boîtier normal, vous le voulez dans un boîtier scellé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le troisième appareil est compact, alimenté en 5V via le connecteur USB le plus standard. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit d'un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thermomètre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Internet </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">MP3507</font></a><font style="vertical-align: inherit;"> , 2 canaux.</font></font><br>
<img src="https://habrastorage.org/files/4e1/ec4/44a/4e1ec444ad03450f9f72c38a71b9ac79.jpg" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi deux canaux? L'exemple est simple - l'un mesure la température dans la maison, le second dans la rue. Le kit comprend 2 capteurs, mais pour une utilisation en extérieur, le capteur en version étanche est bien adapté. La photo </font><font style="vertical-align: inherit;">montre un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capteur scellé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec le module MP3504. Mais il est également compatible avec le module MP3507</font></font><div style="text-align:center;"><img src="https://habrastorage.org/files/7f9/c9c/241/7f9c9c2418a2499eacffebda7046cb1b.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La présence d'un connecteur USB pour l'alimentation vous permet de connecter le module à n'importe quelle charge USB, ce qui est très pratique. </font></font><br>
<img src="https://habrastorage.org/files/efb/8cc/121/efb8cc12142f48eea00ddeca305cabe2.jpg" align="right"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après que le côté du fer soit plus ou moins décrit, il est nécessaire de parler de l'application qui le contrôle. Master Kit propose une application gratuite pour chacun des modules décrits, qui ressemble plus à une démo pour montrer les capacités du module qu'à un outil super universel pour gérer une maison à distance. Mais le système de commande est ouvert, donc les modules peuvent être connectés en toute sécurité à OpenHab ou écrire votre application sur n'importe quel système d'exploitation. Et même avec l'aide du constructeur App Inventor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici des exemples de captures d'écran d'Applications pour Android. </font></font><br>
<img src="https://habrastorage.org/files/ab0/70e/50b/ab070e50b5d04179b26922c0ef9ad93a.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toutes sont similaires et diffèrent dans l'ensemble des icônes nécessaires, en fonction de l'objectif du module (certaines des fonctions sont prévues pour l'avenir):</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Light" - indique l'état du relais. Lampe allumée - relais activé. Si vous cliquez sur la lampe - elle s'éteindra, encore une fois - allumez. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Numéro au-dessus de l'ampoule» est le compteur des minutes de l'état allumé du relais, vous pouvez l'utiliser comme un enregistreur du temps de fonctionnement de votre appareil, par exemple, pour calculer le revenu s'il est léger au-dessus de la table de billard, qui s'allume si le temps est payé. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Température» - lecture actuelle du capteur de température. S'il y en a 2, alors il y aura deux valeurs. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Globe" - un bouton pour se connecter à un appareil à partir d'un smartphone </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Marteau avec une clé à molette" - un bouton pour appeler les paramètres de l'application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La connexion et la configuration consistent en 2 étapes </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. connexion du module de votre réseau local</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Installez et configurez l'application Android pour qu'elle fonctionne spécifiquement avec votre module. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour vous connecter à votre réseau local, vous devez mettre le module en mode configuration. Pour ce faire, dans les 1-2 secondes suivant la mise sous tension, vous devez fermer 2 contacts et les maintenir dans cet état pendant 5-7 secondes. À ce moment, la LED bleue clignote brièvement 1 fois par seconde. S'il s'éteint, vous devez répéter l'opération à nouveau. Regardez l'image avec le module avec deux thermomètres. </font></font><br>
<img src="https://habrastorage.org/files/f89/f85/1f8/f89f851f8422479b834c679ca4cfde91.jpg" align="right"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le configurer, vous devez fermer, par exemple, des pincettes ou un morceau de fil avec les broches 2 et 3 (ci-dessus). Une </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fois que le module est entré en mode de configuration, il crée un réseau local autour de lui, dont le nom commence par le mot MQTT et se termine par un ID à 7 chiffres. Entre ces parties du nom se trouve un signe de fonctionnalité et de version.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple: MQTT_2RELE V1.6_1234567 Vous devez vous connecter à ce réseau avec un mot de passe par défaut. Et au fait, rappelez-vous ce numéro. Il vous sera utile lors de la configuration de l'application Android de contrôle. Il s'agit du nom du sujet auquel votre smartphone ou tablette se connectera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, vous avez le choix de configurer en utilisant l'application Android "Configurateur" ou en utilisant sa version Windows. J'aime plus Windows. La fenêtre des paramètres semble simple et claire</font></font><br>
<img src="https://habrastorage.org/files/21f/46d/2ba/21f46d2ba06b4e9ba27d872650421987.jpg" align="left"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les deux premières lignes, vous écrivez le nom et le mot de passe du réseau Wi-Fi auquel vous souhaitez connecter votre module. Dans le deuxième bloc, vous autorisez le module à fonctionner simultanément avec le point d'accès ou l'interdisez. Si vous n'interdisez pas, vous pouvez vous connecter directement au module. Et cela est lourd de sécurité. Mieux vaut interdire. Ensuite, l'accès au module est protégé par le système d'accès du routeur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après les réglages, le module se connectera automatiquement à votre routeur et s'enregistrera automatiquement sur le serveur MQTT. Nous avons choisi le gratuit iot.eclipse.org</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il reste dans l'application préinstallée de cliquer sur le bouton Paramètres (un marteau avec une clé à molette) et de passer par plusieurs étapes, il vous suffit de confirmer l'action, en un seul endroit, vous devez entrer l'ID du module - le numéro à sept chiffres dont nous nous sommes souvenus lors de la connexion au réseau. </font><font style="vertical-align: inherit;">Plus de détails sont sur le site dans les instructions, il est donc inutile de les retaper ici. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant que les réglages sont faits, il ne reste plus qu'à connecter vos appareils électriques aux relais de sortie, placer des capteurs de température, fournir Internet et vous pouvez l'utiliser. </font><font style="vertical-align: inherit;">Le smartphone lui-même peut également être connecté à Internet de n'importe quelle manière. </font><font style="vertical-align: inherit;">Dans le métro de Moscou fonctionne également. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonne année à tous!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr388195/">https://habr.com/ru/post/fr388195/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr388183/index.html">DEXP Ixion MS150 Glider: un smartphone moderne pour les petits budgets</a></li>
<li><a href="../fr388185/index.html">Facebook offre aux employés 10 000 $ pour se rapprocher du bureau</a></li>
<li><a href="../fr388187/index.html">La NASA prévoit une mission pour capturer et étudier les astéroïdes</a></li>
<li><a href="../fr388189/index.html">Les mythes SSD à dissiper</a></li>
<li><a href="../fr388191/index.html">Comment retourner l'ancienne limite de 15 Go dans OneDrive</a></li>
<li><a href="../fr388197/index.html">L'huile de poisson transforme les cellules adipeuses en brûle-graisses</a></li>
<li><a href="../fr388199/index.html">NexTemp est le thermomètre le plus étrange que j'ai vu</a></li>
<li><a href="../fr388201/index.html">Le projet artistique Raspberry Pi génère des millions de «dommages» aux titulaires de droits d'auteur</a></li>
<li><a href="../fr388205/index.html">Réalité virtuelle avec Google</a></li>
<li><a href="../fr388207/index.html">Il pleut aujourd'hui sur Saturne ... à partir d'hélium liquide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>