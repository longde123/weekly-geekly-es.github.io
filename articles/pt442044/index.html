<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòô üå≥ üëÜüèΩ Como usamos o sistema de monitoramento de varejo Zabbix ‚óæÔ∏è ‚úãüèº ‚òùüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sistemas de monitoramento como o Zabbix n√£o s√£o surpreendentes para usu√°rios sofisticados. No entanto, no varejo, eles n√£o s√£o convidados frequentes e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como usamos o sistema de monitoramento de varejo Zabbix</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pilot/blog/442044/">  Sistemas de monitoramento como o Zabbix n√£o s√£o surpreendentes para usu√°rios sofisticados.  No entanto, no varejo, eles n√£o s√£o convidados frequentes e, se usados, cada vez mais para o controle do servidor.  Fomos al√©m e os usamos para monitorar o software e os equipamentos da caixa registradora. <br><br><img src="https://habrastorage.org/webt/oe/91/5m/oe915mnserqh-stapn4hwvsxb6m.jpeg"><a name="habracut"></a><br><br><h2>  Por que os sistemas de monitoramento raramente s√£o encontrados no varejo </h2><br>  Tudo √© completamente transparente aqui: varejistas e empresas de servi√ßos raramente usam sistemas de monitoramento, porque √© dif√≠cil avaliar sua efici√™ncia econ√¥mica.  Com a introdu√ß√£o dos processos de neg√≥cios, tudo √© simples - X dinheiro e X esfor√ßo.  Mas calcular quanto eles economizaram no varejista no futuro √© mais dif√≠cil. <br><br>  Os prestadores de servi√ßos geralmente n√£o implementam sistemas de monitoramento tamb√©m porque n√£o reduzem a import√¢ncia de seu trabalho.  Isso √© l√≥gico: o Zabbix permite identificar um problema antes que o cliente o veja.  Por um lado, isso melhora a qualidade dos servi√ßos prestados.  Por outro lado, o cliente √†s vezes tem a impress√£o err√¥nea de que seus processos de neg√≥cios est√£o perfeitamente organizados e funcionam sem nenhuma ajuda externa.  Mas isso pode ser resolvido fornecendo relat√≥rios a tempo. <br><br>  No entanto, mesmo os varejistas que concordam em implementar um sistema de monitoramento geralmente terminam com o controle de servidores, computadores de escrit√≥rio, fontes de alimenta√ß√£o ininterruptas e equipamentos de rede ativos.  Tamb√©m fazemos isso: <br><br><ul><li>  dos servidores, obtemos dados sobre a utiliza√ß√£o de processadores, o desempenho de ventiladores, discos r√≠gidos, mem√≥ria, temperatura de processadores e placas-m√£e; </li></ul><br><ul><li>  de fontes de energia ininterruptas - status, n√≠vel de carga, informa√ß√µes sobre quanto tempo elas trabalhar√£o em caso de falta de energia; </li></ul><br><ul><li>  de equipamentos de rede - tr√°fego nas portas, utiliza√ß√£o de recursos. </li></ul><br>  Como parte das informa√ß√µes recebidas, solicita√ß√µes autom√°ticas s√£o feitas no Service Desk.  V√°rios outros dados nos ajudam a investigar incidentes.  Exemplo cl√°ssico: um usu√°rio reclama que seu computador est√° lento.  Sem um sistema de monitoramento, √© dif√≠cil rastrear - quando o engenheiro conecta tudo ficar√° bem ou o funcion√°rio tem uma impress√£o subjetiva (seu PC fraco funciona objetivamente mais devagar do que um computador de jogos sofisticado que est√° em casa).  Portanto, estamos estudando gr√°ficos retrospectivos para o momento em que uma pessoa estava observando um problema. <br><br>  Mas tudo isso √© comum, nada de novo.  Aconteceu que fomos mais longe e, com a ajuda do Zabbix, come√ßamos a monitorar o desempenho do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">software</a> e equipamentos de registro de caixa.  Fazemos isso para grandes varejistas internacionais, amplamente representados no mercado russo nos segmentos aliment√≠cio e n√£o aliment√≠cio.  Al√©m disso, nosso sistema de monitoramento regional foi adquirido por algumas redes regionais, que agora podem controlar independentemente o desempenho de seus processos de neg√≥cios. <br><br><h2>  Por que come√ßamos a fazer isso? </h2><br>  Francamente falando, o sistema de monitoramento foi implementado no Pilot espontaneamente, sem nenhum projeto e em partes.  Se a decis√£o sobre isso viesse de cima, talvez segu√≠ssemos o caminho de outros prestadores de servi√ßos e n√£o nos incomodar√≠amos.  Mas iniciamos a introdu√ß√£o de funcion√°rios lineares - engenheiros.  Diante de um colapso espec√≠fico de equipamentos de caixa registradora ou falhas de software, eles estavam procurando como evit√°-lo no futuro.  E eles tiveram a ideia de um sistema de monitoramento. <br><br>  Com ele, temos tr√™s op√ß√µes para resolver problemas: <br><br><ul><li>  preventivamente - corrija o problema antes que ele aconte√ßa.  Por exemplo, ao monitorar um disco r√≠gido, vemos que o espa√ßo nele foi reduzido para um n√≠vel cr√≠tico.  E estamos tomando medidas nesse sentido; </li></ul><br><ul><li>  depois do fato - resolvemos o problema depois que aconteceu.  Por exemplo, um ventilador no processador falhou.  O processador ainda est√° aquecendo, mas est√° funcionando.  Mais cedo ou mais tarde, √© claro, falhar√°, mas at√© agora temos a oportunidade de substituir o ventilador.  Ou seja, o usu√°rio ainda n√£o percebeu o incidente, mas ele j√° √©.  Do ponto de vista dele, resolvemos o problema proativamente, mas do ponto de vista do equipamento - depois do fato; </li></ul><br><ul><li>  analiticamente - obtemos uma grande quantidade de dados em retrospecto para analisar incidentes. </li></ul><br><br><img src="https://habrastorage.org/webt/-1/yh/v0/-1yhv02wsngac5pl_ydhzezyskk.png"><br><br>  Obviamente, nosso sistema de monitoramento n√£o afeta todas as caixas registradoras porque nem sempre faz sentido.  Pegue um scanner de c√≥digo de barras.  Eles trabalham ou n√£o.  E, no segundo caso, os funcion√°rios da loja nos reportar√£o um problema muito mais rapidamente do que um sistema de monitoramento.  Portanto, nos concentramos no controle de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">terminais POS</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">caixas registradoras (CCP)</a> . <br><br><h2>  Monitoramento da integridade da CCT </h2><br>  O CCP fornece ao driver informa√ß√µes suficientes que permitem avaliar seu desempenho.  Por exemplo: <br><br><ul><li>  V√°rios dados de invent√°rio - vers√µes de hardware, firmware, drivers, n√∫meros de s√©rie.  Em geral, a composi√ß√£o do equipamento no servi√ßo √© fixada nos anexos dos contratos e armazenada no CMDB; no entanto, o cliente √© livre para mover e substituir o equipamento como desejar.  Obviamente, ele nem sempre se lembra de que seria bom notificar a empresa de servi√ßos sobre isso.  √â aqui que o sistema de monitoramento chega em socorro, que rastreia a mudan√ßa na configura√ß√£o do equipamento.  Escrevemos um m√≥dulo de integra√ß√£o que corrige o CMDB de acordo com os dados de invent√°rio do Zabbix.  Al√©m de rastrear a configura√ß√£o real do equipamento nas instala√ß√µes de servi√ßo, ele, juntamente com a funcionalidade de detec√ß√£o autom√°tica do sistema de monitoramento, reduz capitalmente o tempo para iniciar o invent√°rio de um novo cliente, se esse trabalho for previsto no contrato. </li></ul><br><br>  Estudo de caso: muitos provavelmente se lembram do caso de um bug no firmware de um dos fabricantes da KKT em dezembro de 2017?  Assim que as primeiras informa√ß√µes sobre o problema apareceram, configuramos um gatilho no Zabbix, sinalizando a vers√£o do firmware que continha o bug, e obtivemos uma lista de CCPs que precisavam ser resolvidos com urg√™ncia. <br><br><ul><li>  O c√≥digo de status do CCP √© um excelente par√¢metro que permite rastrear quase qualquer mau funcionamento, desde o tempo definido incorretamente ou o superaquecimento do cabe√ßote da impressora at√© a presen√ßa de dados fiscais n√£o enviados na unidade fiscal. </li></ul><br><h2>  Cash Software Control </h2><br>  Como parte do controle do programa de caixa, monitoramos v√°rios sinais: <br><br><ul><li>  a capacidade de manuten√ß√£o dos servi√ßos - se o software est√° ativado ou n√£o, se ele abre algumas portas de rede ou est√° aguardando uma conex√£o; </li></ul><br><ul><li>  entradas nos logs - geralmente o software grava nos logs sobre os problemas encontrados, gera um conjunto de erros.  Como sinal indireto, se os logs forem alterados, o software funcionar√°, se n√£o houver novas entradas neles, ser√° necess√°rio criar uma solicita√ß√£o; </li></ul><br><ul><li>  de fato, as pr√≥prias entradas do log - se uma mensagem de erro ocorrer, o gatilho ser√° acionado.  Ap√≥s o processamento, os registros s√£o transferidos para o ELK: os logs do Logstash s√£o eliminados pela API do Zabbix; </li></ul><br><ul><li>  os resultados do software de integra√ß√£o que baixa, converte e envia dados (por exemplo, transfere informa√ß√µes para o EGAIS, OFD, recebe uma variedade de mercadorias).  Portanto, um pacote de dados recentemente formado incorretamente com a nomenclatura desativou o software dos terminais de pagamento autom√°tico, paralisando seu trabalho em uma das lojas de nossos clientes.  Gra√ßas ao sistema de monitoramento, conseguimos localizar o problema a tempo; </li></ul><br><ul><li>  vers√µes de software e driver - √†s vezes surgem situa√ß√µes em que, por exemplo, as vers√µes de dois programas n√£o s√£o compat√≠veis, mas para que o software cash funcione, √© necess√°rio interagir; </li></ul><br><ul><li>  Bancos de dados - monitoramos a capacidade de manuten√ß√£o dos servi√ßos, a disponibilidade de portas de rede, o n√∫mero de bancos de dados, suas vers√µes e o n√∫mero de bancos de dados desativados; </li></ul><br><ul><li>  servi√ßos externos (por exemplo, EGAIS, com os quais interagimos atrav√©s de redes IP no modo autom√°tico). </li></ul><br><br><img src="https://habrastorage.org/webt/aj/58/pb/aj58pbyioafwqbsfp7x7jwfq0ui.png"><br><br><h2>  Problemas que costumam entrar no sistema de monitoramento </h2><br>  Na maioria das vezes, o Zabbix nos sinaliza sobre problemas de rede: inacessibilidade de dispositivos, tempo de resposta muito longo.  Al√©m disso, existem dificuldades na utiliza√ß√£o dos recursos: PCs de baixa pot√™ncia s√£o geralmente usados ‚Äã‚Äãpara caixas registradoras.  O terceiro problema mais comum √© a validade dos dados de sistemas externos. <br><br>  Muitas vezes, chegam mensagens sobre a hora local incorreta.  Os PCs de caixa geralmente n√£o entram no AD e o servi√ßo ntp deve ser configurado l√° separadamente, o que √†s vezes √© esquecido.  E a hora errada no caixa est√° repleta de grandes problemas para a loja: por exemplo, vender √°lcool quando √© proibido, o que pode levar a uma multa ou perda de uma licen√ßa. <br><br><h2>  Fraude e tempo de inatividade </h2><br>  Outra √°rea de atividade em que o Zabbix, por acaso, se mostrou bastante √∫til, √© a luta contra a fraude.  Acontece que contratados nas regi√µes ou engenheiros de campo individuais, que s√£o pagos separadamente, entram em conspira√ß√£o com os usu√°rios do cliente e resolvem problemas que realmente n√£o existiam.  Podemos traz√™-los para a √°gua pot√°vel analisando as indica√ß√µes do sistema de monitoramento.  Enquanto isso √© feito manualmente, quando um aumento suspeito de atividade √© registrado em um determinado local, estamos trabalhando para verificar automaticamente aplicativos com leituras do Zabbix em todos os casos em que isso for poss√≠vel. <br><br>  Agora, nosso sistema de monitoramento recebe de 15 a 25% das aplica√ß√µes.  Essa √© uma quantia bastante pequena, mas at√© o final deste ano queremos aumentar em 50% para os clientes que assinaram contratos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">servi√ßo</a> conosco. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt442044/">https://habr.com/ru/post/pt442044/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt442032/index.html">Reintrodu√ß√£o de bisonte (pequena vit√≥ria dos zo√≥logos)</a></li>
<li><a href="../pt442034/index.html">ReCaptcha bypass em testes de sel√™nio</a></li>
<li><a href="../pt442036/index.html">Tempo de execu√ß√£o maduro do cont√™iner: containererd torna-se graduado em CNCF</a></li>
<li><a href="../pt442038/index.html">Resumo dos eventos para profissionais de RH na √°rea de TI em mar√ßo de 2019</a></li>
<li><a href="../pt442040/index.html">Parceria como uma ferramenta eficaz para o desenvolvimento de neg√≥cios</a></li>
<li><a href="../pt442046/index.html">Rea√ß√£o e divis√£o de c√≥digo</a></li>
<li><a href="../pt442048/index.html">Como o programador do Google resolve problemas comuns</a></li>
<li><a href="../pt442050/index.html">O que fazer se voc√™ deseja arrecadar dinheiro para o reparo de Failure e apenas a Wikipedia estiver dispon√≠vel</a></li>
<li><a href="../pt442052/index.html">Nova tecnologia pode dez vezes melhorar a resolu√ß√£o de imagens de tecidos biol√≥gicos</a></li>
<li><a href="../pt442054/index.html">Fevereiro de 2019 Joomla Digest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>