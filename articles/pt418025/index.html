<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÅ ‚ûó ‚è© O livro ‚ÄúAprendendo Java EE. Programa√ß√£o moderna para grandes empresas " ü§õüèº ‚õ≥Ô∏è ü¶á</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi Habr! 

 Este livro descreve a nova gera√ß√£o do Java EE. Voc√™ embarcar√° em uma jornada pelo Java EE no contexto do mundo moderno de microsservi√ßos e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O livro ‚ÄúAprendendo Java EE. Programa√ß√£o moderna para grandes empresas "</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/418025/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/ct/ac/t4/ctact4noq-x7eg0x5gqj_8kbm7g.jpeg" align="left" alt="imagem"></a>  Oi Habr! <br><br>  Este livro descreve a nova gera√ß√£o do Java EE.  Voc√™ embarcar√° em uma jornada pelo Java EE no contexto do mundo moderno de microsservi√ßos e cont√™ineres.  Este n√£o √© um guia de refer√™ncia para a sintaxe da API - os conceitos e t√©cnicas aqui apresentados refletem a experi√™ncia real de uma pessoa que percorreu esse caminho recentemente, prestando muita aten√ß√£o aos obst√°culos que surgem e est√° pronta para compartilhar seu conhecimento.  Em v√°rias situa√ß√µes, desde a cria√ß√£o de um pacote para testes e uso da nuvem, este livro ser√° o complemento ideal para desenvolvedores iniciantes e experientes que desejam entender mais do que apenas uma API e ajud√°-los a reconstruir seu pensamento para criar uma arquitetura de aplicativo moderna no Java EE . <br><a name="habracut"></a><br><h3>  Sequ√™ncia de execu√ß√£o </h3><br>  Os processos de neg√≥cios implementados em aplicativos corporativos descrevem fluxos de processos espec√≠ficos.  Para os cen√°rios de neg√≥cios envolvidos, esse √© um processo de solicita√ß√£o e resposta s√≠ncrona ou processamento ass√≠ncrono de um processo iniciado. <br><br>  Os cen√°rios de neg√≥cios s√£o chamados em threads separados, um thread por solicita√ß√£o ou chamada.  Os fluxos s√£o criados pelo cont√™iner e colocados na unidade para reutiliza√ß√£o depois que a chamada foi processada com √™xito.  Por padr√£o, os processos de neg√≥cios definidos nas classes de aplicativos, bem como as tarefas transversais, como transa√ß√µes, s√£o executados seq√ºencialmente. <br><br><h3>  Execu√ß√£o s√≠ncrona </h3><br>  Um cen√°rio t√≠pico em que uma solicita√ß√£o HTTP requer uma resposta do banco de dados √© implementado da seguinte maneira.  Um thread processa a solicita√ß√£o que chega ao loop, por exemplo, o JAX-RS UsersResource, invertendo o princ√≠pio de controle;  O m√©todo de recurso JAX-RS √© chamado pelo cont√™iner.  O recurso implementa e usa o EJB do UserManagement, que tamb√©m √© chamado implicitamente pelo cont√™iner.  Todas as opera√ß√µes s√£o realizadas por intermedi√°rios de forma s√≠ncrona.  O EJB do Usu√°rio usar√° o gerenciador de entidades para armazenar a nova entidade e, assim que o m√©todo de neg√≥cios que iniciou a transa√ß√£o atualmente ativa terminar, o cont√™iner tentar√° confirmar a transa√ß√£o no banco de dados.  Dependendo do resultado da transa√ß√£o, o m√©todo de recurso do circuito retoma a opera√ß√£o e gera uma resposta ao cliente.  Tudo acontece de forma s√≠ncrona, neste momento o cliente est√° bloqueado e aguardando uma resposta. <br><br>  A execu√ß√£o s√≠ncrona inclui o processamento de eventos CDI s√≠ncronos.  Eles separam o acionamento de eventos do dom√≠nio do processamento, no entanto, os eventos s√£o processados ‚Äã‚Äãde forma s√≠ncrona.  Existem v√°rios m√©todos para monitorar transa√ß√µes.  Se um est√°gio de transa√ß√£o for indicado, o evento poder√° ser processado nesse est√°gio - durante a corre√ß√£o da transa√ß√£o, antes de sua conclus√£o, ap√≥s a conclus√£o, no caso de transa√ß√£o malsucedida ou bem-sucedida.  Por padr√£o, ou se a transa√ß√£o estiver inativa, os eventos CDI s√£o processados ‚Äã‚Äãimediatamente quando ocorrem.  Isso permite que os engenheiros implementem solu√ß√µes complexas - por exemplo, usando eventos que ocorrem somente ap√≥s a adi√ß√£o bem-sucedida de entidades ao banco de dados.  Seja como for, em todos os casos, o processamento √© realizado de forma s√≠ncrona. <br><br><h3>  Execu√ß√£o ass√≠ncrona </h3><br>  A execu√ß√£o sincronizada de tarefas atende aos requisitos de muitos cen√°rios de neg√≥cios, mas h√° momentos em que voc√™ precisa de comportamento ass√≠ncrono.  H√° v√°rias restri√ß√µes no uso de encadeamentos pelo ambiente Java EE.  O cont√™iner gerencia recursos e fluxos e os coloca na unidade.  Os utilit√°rios de controle de concorr√™ncia externa est√£o localizados fora do cont√™iner e n√£o est√£o cientes desses fluxos.  Portanto, o c√≥digo do aplicativo n√£o deve executar e controlar seus threads.  Para fazer isso, ele usa os recursos Java EE.  Existem v√°rias APIs com suporte ass√≠ncrono interno. <br><br>  <b>M√©todos EJB ass√≠ncronos</b> <br><br>  A maneira mais f√°cil de implementar o comportamento ass√≠ncrono √© usar a anota√ß√£o @Asynchronous para um m√©todo de neg√≥cios da classe EJB ou EJB.  As chamadas para esses m√©todos retornam imediatamente, √†s vezes com uma resposta do tipo Future.  Eles s√£o executados em um thread separado controlado pelo cont√™iner.  Este m√©todo funciona bem para cen√°rios simples, mas √© limitado aos EJBs: <br><br><pre><code class="hljs java"><span class="hljs-meta"><span class="hljs-meta">@Asynchronous</span></span> <span class="hljs-meta"><span class="hljs-meta">@Stateless</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Calculator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculatePi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> decimalPlaces)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      } }</span></span></code> </pre> <br>  <b>Servi√ßo de gerenciamento de desempenho</b> <br><br>  Para execu√ß√£o ass√≠ncrona de tarefas em objetos CDI gerenciados ou usando utilit√°rios de controle de simultaneidade Java SE, o Java EE inclui vers√µes gerenciadas por cont√™iner das fun√ß√µes ExecutorService e ScheduledExecutorService.  Eles s√£o usados ‚Äã‚Äãpara implementar tarefas ass√≠ncronas em threads controlados por cont√™iner.  As inst√¢ncias ManagedExecutorService e ManagedScheduledExecutorService est√£o incorporadas no c√≥digo do aplicativo.  Eles podem ser usados ‚Äã‚Äãpara executar sua pr√≥pria l√≥gica, mas s√£o mais eficazes quando combinados com os utilit√°rios de controle de simultaneidade Java SE, como valores futuros complementados.  O exemplo a seguir mostra como criar valores futuros preenchidos usando threads controlados por cont√™iner: <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.annotation.Resource; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.enterprise.concurrent.ManagedExecutorService; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Random; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.CompletableFuture; <span class="hljs-meta"><span class="hljs-meta">@Stateless</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Calculator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Resource</span></span> ManagedExecutorService mes; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> CompletableFuture&lt;Double&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateRandomPi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxDecimalPlaces)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CompletableFuture.supplyAsync(() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random().nextInt(maxDecimalPlaces) + <span class="hljs-number"><span class="hljs-number">1</span></span>, mes) .thenApply(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::calculatePi); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculatePi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> decimalPlaces)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } }</code> </pre> <br>  O objeto Calculadora retorna o valor futuro complementado do tipo duplo, que ainda pode ser calculado quando o contexto de chamada √© retomado.  Pode ser solicitado quando os c√°lculos forem conclu√≠dos, bem como combinado com c√°lculos subsequentes.  N√£o importa onde novos encadeamentos s√£o necess√°rios no aplicativo corporativo, voc√™ deve usar a funcionalidade Java EE para gerenci√°-los. <br><br>  <b>Eventos CDI ass√≠ncronos</b> <br><br>  Eventos CDI tamb√©m podem ser processados ‚Äã‚Äãde forma ass√≠ncrona.  Nesse caso, o cont√™iner tamb√©m fornece um fluxo para manipular eventos.  Para descrever um manipulador de eventos ass√≠ncrono, o m√©todo √© anotado com @ObservesAsync e o evento √© ativado usando o m√©todo fireAsync ().  Os seguintes trechos de c√≥digo demonstram eventos CDI ass√≠ncronos: <br><br><pre> <code class="hljs java"><span class="hljs-meta"><span class="hljs-meta">@Stateless</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CarManufacturer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> CarFactory carFactory; <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> Event&lt;CarCreated&gt; carCreated; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Car </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">manufactureCar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Specification spec)</span></span></span><span class="hljs-function"> </span></span>{ Car car = carFactory.createCar(spec); carCreated.fireAsync(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CarCreated(spec)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> car; } }</code> </pre> <br>  O manipulador de eventos √© chamado em seu pr√≥prio encadeamento gerenciado por cont√™iner: <br><br><pre> <code class="hljs cs">import javax.enterprise.<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.ObservesAsync; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CreatedCarListener</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCarCreated</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">@ObservesAsync CarCreated </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">event</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    } }</span></span></code> </pre> <br>  Por motivos de compatibilidade com vers√µes anteriores, os eventos CDI s√≠ncronos tamb√©m podem ser processados ‚Äã‚Äãno m√©todo EJB ass√≠ncrono.  Portanto, eventos e manipuladores s√£o definidos como s√≠ncronos e o m√©todo manipulador √© um m√©todo de neg√≥cios EJB com anota√ß√£o @Asynchronous.  Antes de os eventos ass√≠ncronos serem introduzidos no padr√£o CDI para Java EE 8, essa era a √∫nica maneira de implementar esse recurso.  Para evitar confus√£o no Java EE 8 e posterior, √© melhor evitar essa implementa√ß√£o. <br><br>  <b>Escopos de processamento ass√≠ncrono</b> <br><br>  Como o cont√™iner n√£o possui informa√ß√µes sobre por quanto tempo as tarefas ass√≠ncronas podem ser executadas, o uso de escopos nesse caso √© limitado.  Objetos com um escopo dentro da solicita√ß√£o ou sess√£o que estavam dispon√≠veis quando a tarefa ass√≠ncrona foi iniciada n√£o estar√£o necessariamente ativos durante toda a sua implementa√ß√£o - a solicita√ß√£o e a sess√£o podem terminar muito antes de sua conclus√£o.  Portanto, os encadeamentos que executam tarefas ass√≠ncronas, como as fornecidas pelo servi√ßo agendado do executor ou eventos ass√≠ncronos, podem n√£o ter acesso a inst√¢ncias de objetos gerenciados com escopo na solicita√ß√£o ou sess√£o que estavam ativas durante a chamada.  O mesmo vale para acessar links para inst√¢ncias incorporadas, por exemplo, em m√©todos lambda que fazem parte da execu√ß√£o s√≠ncrona. <br><br>  Isso deve ser levado em considera√ß√£o ao modelar tarefas ass√≠ncronas.  Todas as informa√ß√µes sobre uma chamada espec√≠fica devem ser fornecidas no momento em que a tarefa √© iniciada.  No entanto, uma tarefa ass√≠ncrona pode ter suas pr√≥prias inst√¢ncias de objetos gerenciados com um escopo limitado. <br><br>  <b>Definir tempo de execu√ß√£o</b> <br><br>  Os cen√°rios de neg√≥cios podem ser chamados n√£o apenas de fora, por exemplo, por meio de uma solicita√ß√£o HTTP, mas tamb√©m de dentro do aplicativo - uma tarefa que √© executada em um hor√°rio espec√≠fico. <br><br>  No mundo Unix, a funcionalidade para executar tarefas peri√≥dicas √© popular - essas s√£o as tarefas do planejador.  Os EJBs fornecem recursos semelhantes usando os temporizadores EJB.  Os temporizadores invocam m√©todos de neg√≥cios em intervalos especificados ou ap√≥s um tempo especificado.  O exemplo a seguir descreve um cron√¥metro c√≠clico que √© iniciado a cada dez minutos: <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ejb.Schedule; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ejb.Startup; <span class="hljs-meta"><span class="hljs-meta">@Singleton</span></span> <span class="hljs-meta"><span class="hljs-meta">@Startup</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PeriodicJob</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Schedule</span></span>(minute = <span class="hljs-string"><span class="hljs-string">"*/10"</span></span>, hour = <span class="hljs-string"><span class="hljs-string">"*"</span></span>, persistent = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">executeJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   10  } }</span></span></code> </pre> <br>  Quaisquer EJBs - singletones, objetos gerenciados com ou sem persist√™ncia de estado - podem criar timers.  No entanto, na maioria dos cen√°rios, faz sentido criar temporizadores apenas para singleton.  O atraso est√° definido para todos os objetos ativos.  Geralmente, √© necess√°rio iniciar as tarefas agendadas a tempo, e √© por isso que √© usado em singleton.  Pelo mesmo motivo, neste exemplo, o objeto EJB deve estar ativo quando o aplicativo for iniciado.  Isso garante que o cron√¥metro comece a funcionar imediatamente. <br><br>  Se voc√™ descrever o cron√¥metro como uma constante, sua vida √∫til se estender√° a todo o ciclo de vida da JVM.  O cont√™iner √© respons√°vel por armazenar temporizadores persistentes, geralmente no banco de dados.  Temporizadores permanentes, que devem funcionar enquanto o aplicativo n√£o estiver dispon√≠vel, s√£o ativados na inicializa√ß√£o.  Tamb√©m permite usar os mesmos timers com v√°rias inst√¢ncias do objeto.  Temporizadores constantes com uma configura√ß√£o de servidor apropriada s√£o uma solu√ß√£o apropriada se voc√™ precisar executar um processo de neg√≥cios exatamente uma vez em v√°rios servidores. <br><br>  Os cron√¥metros criados automaticamente usando a anota√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Agenda</a> s√£o descritos usando express√µes cron do tipo Unix.  Para maior flexibilidade, os cron√¥metros EJB s√£o descritos programaticamente usando o servi√ßo de cron√¥metro fornecido pelo cont√™iner, que cria os m√©todos de retorno de chamada Timers e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Timeout</a> . <br><br>  Tarefas peri√≥dicas e adiadas tamb√©m podem ser descritas fora dos EJBs usando o servi√ßo do planejador gerenciado por cont√™iner.  Uma inst√¢ncia de ManagedScheduledExecutorService que executa tarefas ap√≥s o atraso especificado ou em intervalos especificados √© implementada nos componentes gerenciados.  Essas tarefas ser√£o implementadas em threads controlados por cont√™iner: <br><br><pre> <code class="hljs java"><span class="hljs-meta"><span class="hljs-meta">@ApplicationScoped</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Periodic</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Resource</span></span> ManagedScheduledExecutorService mses; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startAsyncJobs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ mses.schedule(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::execute, <span class="hljs-number"><span class="hljs-number">10</span></span>, TimeUnit.SECONDS); mses.scheduleAtFixedRate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::execute, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, TimeUnit.SECONDS); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } }</code> </pre> <br>  A chamada do m√©todo startAsyncJobs () executar√° a fun√ß√£o execute () no encadeamento gerenciado dez segundos ap√≥s a chamada e a cada dez segundos ap√≥s o primeiro minuto. <br><br>  <b>Assincronia e reatividade em JAX-RS</b> <br><br>  O JAX-RS suporta comportamento ass√≠ncrono para n√£o bloquear desnecessariamente os fluxos de solicita√ß√£o do lado do servidor.  Mesmo se uma conex√£o HTTP estiver aguardando uma resposta, o fluxo de solicita√ß√µes poder√° continuar processando outras solicita√ß√µes enquanto um processo demorado √© executado no servidor.  Os fluxos de solicita√ß√£o s√£o agregados em um cont√™iner e esse reposit√≥rio de solicita√ß√£o √© de um determinado tamanho.  Para n√£o desperdi√ßar o fluxo de pedidos, os m√©todos de recursos ass√≠ncronos JAX-RS criam tarefas que s√£o executadas quando o fluxo de pedidos retorna e podem ser reutilizadas.  A conex√£o HTTP continua e d√° uma resposta ap√≥s a conclus√£o da tarefa ass√≠ncrona ou ap√≥s um tempo limite.  O exemplo a seguir mostra o m√©todo de recurso ass√≠ncrono JAX-RS: <br><br><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@Path(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"users"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@Consumes(MediaType.APPLICATION_JSON)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersResource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Resource</span></span> ManagedExecutorService mes; ‚Ä¶ <span class="hljs-meta"><span class="hljs-meta">@POST</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CompletionStage&lt;Response&gt; createUserAsync(User user) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CompletableFuture.supplyAsync(() -&gt; createUser(user), mes); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Response createUser(User user) { userStore.create(user); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Response.accepted().build(); } }</code> </pre> <br>  Para manter o fluxo de solicita√ß√µes ocupado por muito tempo, o m√©todo JAX-RS deve ser conclu√≠do rapidamente.  Isso se deve ao fato de o m√©todo de recurso ser chamado do cont√™iner por meio da invers√£o de controle.  O resultado obtido no est√°gio de conclus√£o ser√° usado para retomar a conex√£o do cliente no final do processamento. <br><br>  Os est√°gios de retorno da conclus√£o s√£o uma tecnologia relativamente nova na API JAX-RS.  Se voc√™ precisar descrever o atraso e, ao mesmo tempo, fornecer maior flexibilidade com uma resposta ass√≠ncrona, poder√° incluir o tipo AsyncResponse no m√©todo  Essa abordagem √© demonstrada no seguinte exemplo: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">import</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">javax</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ws</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.rs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.container</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.AsyncResponse</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">import</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">javax</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ws</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.rs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.container</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Suspended</span></span>; @<span class="hljs-keyword"><span class="hljs-keyword">Path</span></span>("<span class="hljs-keyword"><span class="hljs-keyword">users</span></span>") @Consumes(MediaType.APPLICATION_JSON) public class UsersResource { @<span class="hljs-keyword"><span class="hljs-keyword">Resource</span></span> ManagedExecutorService mes; ‚Ä¶ @<span class="hljs-keyword"><span class="hljs-keyword">POST</span></span> public void createUserAsync(User user, @Suspended AsyncResponse response) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">response</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setTimeout</span></span>(5, <span class="hljs-selector-tag"><span class="hljs-selector-tag">TimeUnit</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.SECONDS</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">response</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setTimeoutHandler</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">r</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">r</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.resume</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Response</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.status</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Response</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Status</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.SERVICE_UNAVAILABLE</span></span>)<span class="hljs-selector-class"><span class="hljs-selector-class">.build</span></span>())); <span class="hljs-selector-tag"><span class="hljs-selector-tag">mes</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.execute</span></span>(() <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">response</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.resume</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">createUser</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">user</span></span>))); } }</code> </pre> <br>  Gra√ßas aos tempos limite criados, a solicita√ß√£o do cliente n√£o espera indefinidamente, mas apenas at√© que o resultado seja recebido ou o tempo limite da chamada expire.  No entanto, os c√°lculos continuar√£o √† medida que forem executados de forma ass√≠ncrona.  Para recursos JAX-RS implementados como EJBs, √© poss√≠vel aplicar a anota√ß√£o @Asynchronous para n√£o chamar explicitamente m√©todos de neg√≥cios ass√≠ncronos por meio do executor de servi√ßo. <br><br>  O cliente JAX-RS tamb√©m suporta comportamento ass√≠ncrono.  Dependendo dos requisitos, faz sentido n√£o bloque√°-lo durante chamadas HTTP.  O exemplo anterior mostra como definir atrasos para solicita√ß√µes do cliente.  Para chamadas de sistema externas de longa execu√ß√£o e especialmente paralelas, √© melhor usar comportamento ass√≠ncrono e reativo. <br><br>  Considere v√°rios aplicativos de servidor que fornecem informa√ß√µes sobre o clima.  O componente cliente acessa todos esses aplicativos e calcula a previs√£o meteorol√≥gica m√©dia.  Idealmente, voc√™ pode tornar o acesso aos sistemas paralelo: <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.stream.Collectors; <span class="hljs-meta"><span class="hljs-meta">@ApplicationScoped</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WeatherForecast</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Client client; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;WebTarget&gt; targets; <span class="hljs-meta"><span class="hljs-meta">@Resource</span></span> ManagedExecutorService mes; <span class="hljs-meta"><span class="hljs-meta">@PostConstruct</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ client = ClientBuilder.newClient(); targets = ‚Ä¶ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Forecast </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAverageForecast</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> invokeTargetsAsync() .stream() .map(CompletableFuture::join) .reduce(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::calculateAverage) .orElseThrow(() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"   "</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;CompletableFuture&lt;Forecast&gt;&gt; invokeTargetsAsync() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> targets.stream() .map(t -&gt; CompletableFuture.supplyAsync(() -&gt; t .request(MediaType.APPLICATION_JSON_TYPE) .get(Forecast.class), mes)) .collect(Collectors.toList()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Forecast </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateAverage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Forecast first, Forecast second)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@PreDestroy</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">closeClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ client.close(); } }</code> </pre> <br>  O m√©todo invokeTargetsAsync () chama objetos dispon√≠veis de forma ass√≠ncrona, chamando o servi√ßo executador agendado.  Os descritores CompletableFuture s√£o retornados e usados ‚Äã‚Äãpara calcular os resultados m√©dios.  O in√≠cio do m√©todo join () ser√° bloqueado at√© que a chamada seja conclu√≠da e os resultados sejam recebidos. <br><br>  Objetos chamados de forma ass√≠ncrona iniciam e esperam uma resposta de v√°rios recursos ao mesmo tempo, possivelmente mais devagar.  Nesse caso, aguardar respostas dos recursos do servi√ßo meteorol√≥gico leva tanto tempo quanto esperar a resposta mais lenta, e nem todas as respostas juntas. <br><br>  A vers√£o mais recente do JAX-RS possui suporte integrado para os est√°gios de conclus√£o, o que reduz o c√≥digo estereotipado nos aplicativos.  Assim como nos valores preenchidos, a chamada retorna imediatamente o c√≥digo da fase de conclus√£o para refer√™ncia futura.  O exemplo a seguir mostra as fun√ß√µes do cliente reativo JAX-RS usando a chamada rx (): <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-type"><span class="hljs-type">Forecast</span></span> getAverageForecast() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> invokeTargetsAsync() .stream() .<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span>((l, r) -&gt; l.thenCombine(r, this::calculateAverage)) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>(s -&gt; s.toCompletableFuture().<span class="hljs-built_in"><span class="hljs-built_in">join</span></span>()) .orElseThrow(() -&gt; new <span class="hljs-type"><span class="hljs-type">IllegalStateException</span></span>(<span class="hljs-string"><span class="hljs-string">"   "</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CompletionStage</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Forecast</span></span>&gt;&gt; invokeTargetsAsync() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> targets.stream() .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>(t -&gt; t .request(<span class="hljs-type"><span class="hljs-type">MediaType</span></span>.<span class="hljs-type"><span class="hljs-type">APPLICATION_JSON_TYPE</span></span>) .rx() .<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-type"><span class="hljs-type">Forecast</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>)) .collect(<span class="hljs-type"><span class="hljs-type">Collectors</span></span>.toList()); }</code> </pre> <br>  No exemplo acima, voc√™ n√£o precisa procurar o servi√ßo dos executores agendados - o cliente JAX-RS gerenciar√° isso sozinho.  Antes do m√©todo rx () aparecer, os clientes usavam uma chamada async () expl√≠cita.  Esse m√©todo se comportou de maneira semelhante, mas retornou apenas objetos Future.  Usar uma abordagem reativa nos clientes √© ideal para a maioria dos projetos. <br>  Como voc√™ pode ver, o Java EE usa um servi√ßo de artista gerenciado por cont√™iner. <br><br><h3>  Conceitos e princ√≠pios de design no Java EE moderno </h3><br>  A API Java EE √© baseada em conven√ß√µes e princ√≠pios de design que s√£o descritos como padr√µes.  Os engenheiros de software encontrar√£o modelos familiares de API e abordagens de desenvolvimento de aplicativos.  O objetivo do Java EE √© promover o uso consistente da API. <br><br>  O principal princ√≠pio dos aplicativos focados principalmente na implementa√ß√£o de cen√°rios de neg√≥cios √©: a tecnologia n√£o deve interferir.  Como j√° mencionado, os engenheiros devem poder se concentrar na implementa√ß√£o da l√≥gica de neg√≥cios sem gastar a maior parte do tempo em quest√µes tecnol√≥gicas e de infraestrutura.  Idealmente, a l√≥gica do dom√≠nio √© implementada em Java simples e complementada por anota√ß√µes e outras propriedades suportadas pelo ambiente corporativo, sem afetar o c√≥digo do dom√≠nio ou complic√°-lo.  Isso significa que a tecnologia n√£o requer muita aten√ß√£o dos engenheiros e n√£o imp√µe restri√ß√µes muito grandes.  O ambiente J2EE costumava exigir muitas solu√ß√µes muito complexas.  Para implementar as interfaces e estender as classes base, tivemos que usar objetos gerenciados e objetos de armazenamento persistente.  Isso complicou a l√≥gica da √°rea de assunto e dificultou o teste. <br><br>  No Java EE, a l√≥gica do dom√≠nio √© implementada na forma de classes Java simples equipadas com anota√ß√µes, segundo as quais o cont√™iner resolve determinadas tarefas corporativas durante a execu√ß√£o do aplicativo.  A pr√°tica de criar c√≥digo limpo geralmente envolve escrever um c√≥digo mais bonito do que conveniente para reutiliza√ß√£o.  O Java EE suporta essa abordagem.  Se, por algum motivo, voc√™ precisar remover a tecnologia e deixar a l√≥gica pura da √°rea de assunto, isso ser√° feito simplesmente excluindo as anota√ß√µes correspondentes. <br><br>  Como veremos no Cap√≠tulo 7, essa abordagem de programa√ß√£o implica a necessidade de teste, porque para programadores, a maioria das especifica√ß√µes Java EE nada mais s√£o do que anota√ß√µes. <br><br>  Em toda a API, um princ√≠pio de design chamado invers√£o de controle (IoC) foi adotado - em outras palavras, "n√£o nos chame, n√≥s nos chamaremos".  Isso √© especialmente percept√≠vel em circuitos de aplicativos, como recursos JAX-RS.  Os m√©todos de recurso s√£o descritos usando anota√ß√µes de m√©todo Java, que s√£o chamadas posteriormente pelo cont√™iner no contexto apropriado.  O mesmo se aplica √† inje√ß√£o de depend√™ncia, na qual √© necess√°rio escolher geradores ou levar em considera√ß√£o tarefas transversais, como interceptores.  Os desenvolvedores de aplicativos podem se concentrar na implementa√ß√£o da l√≥gica e na descri√ß√£o de relacionamentos, deixando a implementa√ß√£o de detalhes t√©cnicos em um cont√™iner.  Outro exemplo, n√£o t√£o √≥bvio, √© a descri√ß√£o da convers√£o de objetos Java em JSON e vice-versa por meio de anota√ß√µes JSON-B.  Os objetos s√£o transformados n√£o apenas em uma forma expl√≠cita e programada, mas tamb√©m implicitamente, em um estilo declarativo. <br><br>  Outro princ√≠pio que permite aos engenheiros aplicar efetivamente essa tecnologia √© a programa√ß√£o mediante acordo.  Por padr√£o, o Java EE define um comportamento espec√≠fico que corresponde √† maioria dos cen√°rios de uso.  Se n√£o for suficiente ou n√£o atender aos requisitos, o comportamento poder√° ser redefinido, geralmente em v√°rios n√≠veis. <br>  Existem muitos exemplos de programa√ß√£o de conven√ß√µes.  Um deles √© o uso de m√©todos de recurso JAX-RS que convertem a funcionalidade Java em respostas HTTP.  Se o comportamento padr√£o do JAX-RS em rela√ß√£o √†s respostas n√£o atender aos requisitos, voc√™ poder√° aplicar o tipo de resposta Resposta.  Outro exemplo √© a especifica√ß√£o de objetos gerenciados, que geralmente √© implementada usando anota√ß√µes.  Para alterar esse comportamento, voc√™ pode usar o descritor XML beans.xml.  √â muito conveniente para programadores que, no mundo moderno do Java EE, os aplicativos corporativos sejam desenvolvidos de maneira pragm√°tica e de alto desempenho, que geralmente n√£o requer o uso intensivo de XML como antes. <br><br>  Quanto √† produtividade dos programadores, outro princ√≠pio importante de desenvolvimento no Java EE √© que essa plataforma requer integra√ß√£o no cont√™iner de v√°rios padr√µes.  Como os cont√™ineres suportam um conjunto espec√≠fico de APIs - e se toda a API Java EE √© suportada, esse √© exatamente o caso - tamb√©m requer implementa√ß√µes de API para fornecer integra√ß√£o perfeita de outras APIs.  A vantagem dessa abordagem √© a capacidade de usar os recursos JAX-RS da convers√£o JSON-B e a tecnologia de Valida√ß√£o de Bean sem configura√ß√£o expl√≠cita adicional, com exce√ß√£o das anota√ß√µes.  Nos exemplos anteriores, vimos como as fun√ß√µes definidas nos padr√µes individuais podem ser usadas juntas sem esfor√ßo adicional.  Essa √© uma das maiores vantagens da plataforma Java EE.  Uma especifica√ß√£o gen√©rica garante uma combina√ß√£o de padr√µes individuais.  Os programadores podem confiar em certos recursos e implementa√ß√£o fornecidos pelo servidor de aplicativos. <br><br><h3>  C√≥digo de alta qualidade f√°cil de usar </h3><br>  Os programadores geralmente concordam que voc√™ deve se esfor√ßar para escrever um c√≥digo de alta qualidade.  No entanto, nem todas as tecnologias s√£o igualmente adequadas para isso. <br><br>  Conforme mencionado no in√≠cio do livro, o foco no desenvolvimento de aplicativos deve ser a l√≥gica de neg√≥cios.  No caso de altera√ß√µes na l√≥gica de neg√≥cios ou surgimento de novos conhecimentos, √© necess√°rio atualizar o modelo de dom√≠nio, bem como o c√≥digo fonte.  A refatora√ß√£o iterativa √© necess√°ria para criar e manter um modelo de dom√≠nio e c√≥digo-fonte de alta qualidade como um todo.  Os esfor√ßos para aprofundar a compreens√£o da √°rea de assunto s√£o descritos no conceito de design orientado a problemas. <br><br>  H√° muita literatura sobre refatora√ß√£o no n√≠vel de c√≥digo.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depois que a l√≥gica de neg√≥cios √© apresentada na forma de c√≥digo e verificada por testes, os programadores devem gastar algum tempo e se esfor√ßar para repensar e melhorar a primeira op√ß√£o. Isso se aplica a identificadores de nomes, m√©todos e classes. Particularmente importantes s√£o a escolha de nomes, n√≠veis de abstra√ß√£o e pontos de responsabilidade comuns.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De acordo com a defini√ß√£o de design orientado a problemas, a √°rea de assunto deve corresponder o m√°ximo poss√≠vel √† sua representa√ß√£o na forma de c√≥digo. Isso inclui, em particular, o idioma da √°rea de assunto - em outras palavras, a maneira como programadores e especialistas em neg√≥cios falam sobre determinadas fun√ß√µes. O objetivo de toda a equipe √© encontrar uma linguagem comum universal que seja usada efetivamente n√£o apenas nas discuss√µes e nos slides da apresenta√ß√£o, mas tamb√©m no c√≥digo. O refinamento do conhecimento no campo dos neg√≥cios ocorrer√° ciclicamente. Como a refatora√ß√£o no n√≠vel do c√≥digo, essa abordagem implica que o modelo original n√£o atender√° totalmente a todos os requisitos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assim, a tecnologia aplicada deve suportar altera√ß√µes de modelo e c√≥digo. Se houver muitas restri√ß√µes, ser√° dif√≠cil fazer altera√ß√µes mais tarde.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para o desenvolvimento de aplicativos em geral, e especialmente para refatora√ß√£o, √© imperativo que o software seja coberto suficientemente por testes automatizados. Como o c√≥digo est√° em constante mudan√ßa, os testes de regress√£o garantem que nenhuma das fun√ß√µes de neg√≥cios seja danificada acidentalmente. Assim, um n√∫mero suficiente de testes de controle suporta a refatora√ß√£o, permitindo que os engenheiros entendam claramente que, depois de fazer altera√ß√µes, toda a funcionalidade ainda funciona conforme o esperado. Idealmente, a tecnologia deve suportar a capacidade de testar sem impor restri√ß√µes √† estrutura do c√≥digo. Discutiremos isso com mais detalhes no Cap√≠tulo 7.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para ativar a refatora√ß√£o, √© prefer√≠vel a liga√ß√£o fraca √† liga√ß√£o apertada. A altera√ß√£o de um componente afeta todas as fun√ß√µes que o chamam explicitamente e todos os componentes que ele precisa. O Java EE suporta v√°rias op√ß√µes de liga√ß√£o fracas: inje√ß√£o de depend√™ncia, eventos e tarefas de ponta a ponta, como ganchos. Tudo isso simplifica as altera√ß√µes de c√≥digo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Existem v√°rias ferramentas e m√©todos para medir a qualidade. Em particular, a an√°lise de c√≥digo est√°tico permite coletar informa√ß√µes sobre complexidade, conectividade, depend√™ncias entre classes e pacotes e a implementa√ß√£o como um todo. Essas ferramentas ajudam os engenheiros a identificar problemas em potencial e a criar uma imagem ampla do projeto de software. O cap√≠tulo 6 mostrar√° como verificar automaticamente a qualidade do c√≥digo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em geral, √© recomend√°vel reorganizar constantemente o c√≥digo e melhorar sua qualidade. Projetos de software geralmente s√£o criados para introduzir novas fun√ß√µes de gera√ß√£o de receita e n√£o para melhorar a funcionalidade existente. O problema √© que refatorar e melhorar a qualidade do c√≥digo √† primeira vista n√£o traz benef√≠cios para os neg√≥cios. Claro que n√£o √© assim. Para alcan√ßar uma velocidade est√°vel e integrar novas fun√ß√µes com qualidade satisfat√≥ria, √© necess√°rio revisar as fun√ß√µes existentes. Idealmente, os loops de refatora√ß√£o devem ser incorporados no diagrama do projeto. A experi√™ncia mostra que os gerentes de projeto geralmente desconhecem esse problema. No entanto, uma equipe de engenheiros de software √© respons√°vel por manter a qualidade.</font></font><br><br><h3>  Sobre o autor </h3><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebastian Daschner</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© freelancer em Java, consultor e professor de programa√ß√£o e entusiasta de Java (EE). Ele participa do JCP, ajudando a criar novos padr√µes Java EE, atendendo aos grupos 370 e 374 de especialistas em JSR e trabalhando em v√°rios projetos de c√≥digo aberto. Por suas contribui√ß√µes √† comunidade e ao ecossistema Java, ele recebeu o t√≠tulo de Java e Oracle Development Champion.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebastian fala regularmente em confer√™ncias internacionais de TI, como JavaLand, JavaOne e Jfokus. </font><font style="vertical-align: inherit;">Ele recebeu o JavaOne Rockstar Award na confer√™ncia JavaOne 2016. Juntamente com o gerente da comunidade Java Steve Chin, ele participou de dezenas de confer√™ncias e grupos de usu√°rios Java enquanto viajava de motocicleta. </font><font style="vertical-align: inherit;">Steve e Sebastian criaram o JOnsen, uma n√£o confer√™ncia sobre Java realizada em uma fonte termal na zona rural do Jap√£o.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sobre o Revisor </font></font></h3><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melissa McKay</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© desenvolvedora de software com 15 anos de experi√™ncia na cria√ß√£o de v√°rios tipos de aplicativos para clientes particulares e empresas. Agora ela est√° envolvida principalmente em aplicativos Java do lado do servidor, usados ‚Äã‚Äãno campo das comunica√ß√µes e da televis√£o. Seus interesses incluem sistemas de cluster, ela tem uma paix√£o especial por resolver problemas associados a aplicativos paralelos e multithread. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melissa participa regularmente da n√£o confer√™ncia JCrete em Creta, Gr√©cia, e teve o prazer de participar da abertura da n√£o confer√™ncia JOnsen no Jap√£o. Ela gosta de participar de confer√™ncias de TI volunt√°rias para crian√ßas, como JavaOne4Kids e JCrete4Kids. Ela foi membro do comit√™ de conte√∫do do JavaOne 2017 e √© membro ativo do Denver Java User Group.</font></font><br><br>  ¬ªMais informa√ß√µes sobre o livro podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trecho</a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cupom de 20% de desconto para vendedores ambulantes - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java EE</font></font></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418025/">https://habr.com/ru/post/pt418025/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418011/index.html">P√°ginas individuais e SEO. Segredos de otimiza√ß√£o</a></li>
<li><a href="../pt418013/index.html">O Intel Core i7-8086K (parte 3)</a></li>
<li><a href="../pt418015/index.html">Novo Vasyuki. Desenvolvimento inovador de Moscou at√© 2100</a></li>
<li><a href="../pt418017/index.html">An√°lise do comportamento do Trojan Pegasus na rede</a></li>
<li><a href="../pt418023/index.html">Ponteiros em C s√£o mais abstratos do que voc√™ imagina</a></li>
<li><a href="../pt418027/index.html">Microservice Blitz</a></li>
<li><a href="../pt418029/index.html">ReactOS 0.4.9: haters ter√£o que procurar novos argumentos</a></li>
<li><a href="../pt418031/index.html">Empilhamento em massa de modelos ML em produ√ß√£o: real ou n√£o?</a></li>
<li><a href="../pt418035/index.html">Apresentando a linha do tempo na Unity</a></li>
<li><a href="../pt418037/index.html">Testador m√≥vel, prepare-se. Bem-vindo ao Meetup sobre testes m√≥veis da Avito</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>