<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙍🏽 👨🏼‍💻 🌾 Éléments personnalisés au combat 👩‍👩‍👧 🌗 🔴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bon après-midi 

 L'histoire de cette publication est assez simple et peut-être familière à beaucoup. L'entreprise développe de nombreux produits - da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Éléments personnalisés au combat</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444662/"> Bon après-midi <br><br>  L'histoire de cette publication est assez simple et peut-être familière à beaucoup.  L'entreprise développe de nombreux produits - dans notre cas, principalement pour un seul client.  Récemment, toutes les solutions ont été développées pour le Web et les solutions de bureau existantes sur le Web ont été transférées. <br><br>  À cet égard, si l'on souhaitait accélérer le développement et garantir l'uniformité des produits, il a été décidé de développer une base de composants commune.  Nous ne parlerons pas de la façon dont le kit d'interface utilisateur a été créé et des longues batailles avec les concepteurs, mais je veux parler de la mise en œuvre de cette tâche. <br>  Au front, nous avons la démocratie, voire l'anarchie.  Les gens sont libres d'utiliser les solutions avec lesquelles ils sont à l'aise.  En ce moment, il y a des projets en bataille dans AngularJS, Angular, React, Vanilla, et il y a aussi des projets dans Vue pour un usage interne.  À ce stade, notre regard s'est tourné vers les composants Web. <br><a name="habracut"></a><br><h4>  Composants Web </h4><br>  Jetons un coup d'œil au concept des composants Web.  Il est basé sur le concept d'éléments personnalisés, qui vous permet d'étendre la classe HTMLElement en créant vos propres balises html, avec une logique métier cachée à l'utilisateur.  Ça a l'air cool, ça a l'air sympa.  Voyons ce que nous pouvons faire.  Ci-après, le code source est donné en tapuscrit. <br><br>  Pour créer un élément personnalisé, nous devons procéder comme suit.  Décrivez la classe et enregistrez le composant. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Here I am'</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!customElements.get(<span class="hljs-string"><span class="hljs-string">'new-custom-element'</span></span>)) { <span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> customElements.define(<span class="hljs-string"><span class="hljs-string">'new-custom-element'</span></span>, NewCustomElement); }</code> </pre> <br>  De plus, en connectant ce code à n'importe quel html (en le compilant dans JS), nous pouvons utiliser le composant (nous y reviendrons, en fait, si vos clients n'osent pas utiliser Chrome). <br><br>  Les éléments personnalisés nous donnent également quelques crochets pour suivre la durée de vie des composants. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I am created'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/*   ,     DOM,   ,  ,    ,       */</span></span> connectedCallback() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Now I am in Dom'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._render(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._addEventListeners(); } <span class="hljs-comment"><span class="hljs-comment">/*   ,     DOM,  ,    */</span></span> disconnectedCallback() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I am removed now'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._removeEventListeners(); } <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> get observedAttributes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'date'</span></span>]; } <span class="hljs-comment"><span class="hljs-comment">/* ,       */</span></span> attributeChangedCallback(attrName, oldVal, newVal) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (attrName) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'date'</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*   ,      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> adoptedCallback() { <span class="hljs-comment"><span class="hljs-comment">/*  ,    ,      */</span></span> } }</code> </pre><br>  Nous pouvons également générer des événements dans les composants via la méthode dispatchEvent <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">////// _date: Date = new Date(); set date(val: Date) { this._date = val; this.dispatchEvent(new CustomEvent('dateChanged', { bubbles: true, cancelable: false, detail: this._date })); } ////// }</span></span></code> </pre><br><h4>  L'avenir est venu, ont-ils dit, vous écrivez le code une fois et l'utilisez partout, ils ont dit </h4><br>  Nous nous sommes un peu familiarisés avec les composants, maintenant je vais parler des sentiments qui sont restés après avoir travaillé avec cette technologie.  En général, dans l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Composants Web dans le monde réel, l'</a> auteur a décrit une attitude envers la technologie qui s'est avérée très proche de moi. <br><br>  Voyons quels avantages nous avons. <br><br><ul><li>  <b>Réutilisable</b> : nous avons une bibliothèque vraiment réutilisable.  Pour le moment, cela fonctionne dans un projet vanilla, se connectant en tant que bundle Webpack compilé, et dans un projet angulaire 7, connectant des sources dactylographiées dans l'AppModule </li><li>  <b>Comportement compréhensible</b> : si vous suivez les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">meilleures pratiques</a> , nous obtenons des composants avec un comportement compréhensible qui peuvent être facilement intégrés dans des cadres existants, par exemple pour angulaire, en utilisant des bananes dans une boîte, dans des applications natives via des attributs, ou en travaillant avec des propriétés reflétant des attributs </li><li>  <b>Style unifié</b> : c'est une répétition du point sur la réutilisabilité, mais quand même.  Désormais, tous les projets utilisent des blocs de construction uniques pour la construction de l'interface utilisateur. </li><li>  <b>Honnêtement, je ne peux pas trouver d'autres avantages</b> : dites-nous comment les composants Web vous ont aidé. </li></ul><br>  Ensuite, je vais essayer de décrire des choses que je n'ai probablement pas aimées. <br><br><ul><li>  <b>Coûts de main-d'œuvre</b> : les coûts de développement de composants sont incomparablement plus élevés que le développement d'un framework. </li><li>  <b>Dénomination</b> : les composants sont en concurrence mondiale, donc les noms de classe et les noms de balises doivent être préfixés.  Étant donné que nous avons toujours des bibliothèques de composants implémentées dans des cadres nommés &lt; <b>company</b> -component-name&gt;, nous avons dû préfixer les composants Web deux fois avec &lt; <b>company-wc</b> -component-name&gt;. </li><li>  <b>ShadowRoot</b> : selon les meilleures pratiques, l'utilisation de shadowRoot est recommandée.  Cependant, cela n'est pas très pratique, car il n'y a aucune possibilité d'influencer l'apparence du composant de l'extérieur.  Et un tel besoin est souvent rencontré. </li><li>  <b>Rendu</b> : sans frameworks, vous devez oublier la liaison de données et la réactivité (LitElement pour vous aider, mais c'est une autre dépendance). </li><li>  <b>L'avenir n'est pas venu</b> : pour maintenir le support utilisateur à l'ancien niveau (nous l'avons ie11 et tout ce qui est plus frais), vous devez attacher les polyphiles, es5 est la norme cible, ce qui crée des problèmes supplémentaires. </li><li>  <b>Polyphils eux</b> - <b>mêmes</b> : Afin d'obtenir tout cela sous IE, j'ai dû beaucoup tourmenter et prendre des décisions laides, car les polycoms du composant Web cassent quelque chose à l'intérieur du hangar, provoquant un débordement de la pile d'appels.  En conséquence, j'ai dû remplir des polyphiles, ayant reçu des dépendances supplémentaires. </li></ul><br>  Je ne sais pas quelle conclusion tirer de tout cela.  Si Microsoft crée un navigateur basé sur le chrome et cesse de prendre en charge IE et Edge, alors oui, il deviendra plus facile de respirer. <br><br>  Il y a un avantage étrange: vous pouvez donner le développement de composants Web propres aux développeurs débutants - laissez-les voir comment c'est, écrivez en JS sans frameworks.  Un collègue n'a pas compris depuis longtemps pourquoi le changement de propriété dans le composant n'était pas immédiatement reflété dans le DOM.  Ici, ce sont des gens cultivés sur des cadres.  Et je suis pareil. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr444662/">https://habr.com/ru/post/fr444662/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr444650/index.html">Déodorant bactérien: une relation symbiotique entre les grenouilles arboricoles et les bactéries Pseudomonas</a></li>
<li><a href="../fr444652/index.html">"Il est temps de sortir du front-end": Andrey Sitnik sur la stagnation de la communauté, l'open source et pas seulement</a></li>
<li><a href="../fr444654/index.html">L'économie de la joie. Le mentorat comme cas particulier. La loi de trois pour cent</a></li>
<li><a href="../fr444658/index.html">Vidéo du Badoo PHP Meetup # 2: A propos des tests et de la qualité du code</a></li>
<li><a href="../fr444660/index.html">Consignation de toutes les requêtes de base de données dans Asp.Net Boilerplate 4.3 .Net Core 2.1</a></li>
<li><a href="../fr444664/index.html">Linux Foundation traitera des puces open source</a></li>
<li><a href="../fr444668/index.html">5 problèmes les plus courants rencontrés par les employeurs lors de la sélection de spécialistes informatiques du point de vue d'un recruteur-sous-traitant</a></li>
<li><a href="../fr444670/index.html">Recherche: la musique nuit à la pensée créative - comprendre et discuter d'autres opinions</a></li>
<li><a href="../fr444672/index.html">Roskachestvo a présenté une évaluation des écouteurs filaires et sans fil disponibles en Russie</a></li>
<li><a href="../fr444674/index.html">Sony Xperia 10 et Xperia 10 Plus - smartphones à vue large</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>