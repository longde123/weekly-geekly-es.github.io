<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèΩ ü•ä üë®‚Äçüë©‚Äçüë¶ C√≥mo crear e implementar una aplicaci√≥n Full-Stack React üîâ üíÜüèø ü•ô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Yo represento a la atenci√≥n de la traducci√≥n del art√≠culo ¬´C√≥mo construir y desplegar una completa -Stack reaccionan-App¬ª Autor Frank Zicke...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo crear e implementar una aplicaci√≥n Full-Stack React</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476696/"> Hola Habr!  Yo represento a la atenci√≥n de la traducci√≥n del art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬´C√≥mo construir y desplegar una completa</a> -Stack reaccionan-App¬ª Autor Frank Zickert. <br><br>  Los componentes de infraestructura facilitan la creaci√≥n, ejecuci√≥n e implementaci√≥n de una aplicaci√≥n React completa.  Con estos componentes React, puede concentrarse en escribir la l√≥gica empresarial de su aplicaci√≥n.  No necesita preocuparse por su configuraci√≥n. <br><br>  ¬øDesea convertirse en un desarrollador full-stack?  La aplicaci√≥n full-stack complementa la interfaz web interactiva React con un servidor y una base de datos.  Sin embargo, esta aplicaci√≥n requiere mucho m√°s opciones que un simple solicitud de una p√°gina. <br><a name="habracut"></a><br>  Utilizamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">componentes de la infraestructura</a> .  Estos componentes React nos permiten definir nuestra arquitectura de infraestructura como parte de nuestra aplicaci√≥n React.  Ya no necesitamos ninguna otra configuraci√≥n, como Webpack, Babel o Serverless. <br><br><h2>  Inicio </h2><br>  Puede configurar su proyecto de tres maneras: <br><br><ul><li>  Descargue su c√≥digo personalizado de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.infrastructure-components.com</a> , </li><li>  o clonar este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio de GitHub</a> , </li><li>  o instalar bibliotecas manualmente, vea esta publicaci√≥n para m√°s detalles. </li></ul><br>  Una vez que haya instalado las dependencias (ejecute <code>npm install</code> ), puede compilar el proyecto con un comando: <code>npm run build</code> . <br><br>  El script de compilaci√≥n agrega tres scripts m√°s a package.json: <br><br><ul><li>  <code>npm run{your-project-name}</code> inicia su aplicaci√≥n React localmente (modo hot-dev, sin parte del servidor y base de datos) </li><li>  <code>npm run start-{your-env-name}</code> nombre} recorre toda la pila de software a nivel local.  Nota: Se requiere Java 8 JDK para ejecutar la base de datos fuera de l√≠nea.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠ es c√≥mo puede instalar el JDK</a> . </li><li>  <code>npm run deploy-{your-env-name}</code> nombre} despliega su aplicaci√≥n en AWS. </li></ul><br>  Nota  Para implementar su aplicaci√≥n en AWS, necesita un usuario t√©cnico de IAM con estos derechos.  Coloque las credenciales del usuario en su .env-archivo de la siguiente manera: <br><br><pre> <code class="plaintext hljs">AWS_ACCESS_KEY_ID = *** AWS_SECRET_ACCESS_KEY = ***</code> </pre> <br><h2>  Define la arquitectura de tu aplicaci√≥n </h2><br>  Los proyectos basados ‚Äã‚Äãen componentes de infraestructura tienen una estructura clara.  Tienes un componente de nivel superior.  Esto define la arquitectura general de su aplicaci√≥n. <br><br>  Los subcomponentes (componentes secundarios) refinan (ampl√≠an) el comportamiento de la aplicaci√≥n y agregan funciones. <br><br>  En el siguiente ejemplo, el componente <code>&lt;ServiceOrientedApp /&gt;</code> es nuestro componente de nivel superior.  Lo exportamos como el archivo predeterminado a nuestro archivo de punto de entrada ( <code>src / index.tsx)</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ( &lt;ServiceOrientedApp stackName = "soa-dl" buildPath = 'build' region='eu-west-1'&gt; &lt;Environment name="dev" /&gt; &lt;Route path='/' name='My Service-Oriented React App' render={()=&gt;&lt;DataForm /&gt;} /&gt; &lt;DataLayer id="datalayer"&gt; &lt;UserEntry /&gt; &lt;GetUserService /&gt; &lt;AddUserService /&gt; &lt;/DataLayer&gt; &lt;/ServiceOrientedApp&gt; );</code> DataForm /&gt;} <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ( &lt;ServiceOrientedApp stackName = "soa-dl" buildPath = 'build' region='eu-west-1'&gt; &lt;Environment name="dev" /&gt; &lt;Route path='/' name='My Service-Oriented React App' render={()=&gt;&lt;DataForm /&gt;} /&gt; &lt;DataLayer id="datalayer"&gt; &lt;UserEntry /&gt; &lt;GetUserService /&gt; &lt;AddUserService /&gt; &lt;/DataLayer&gt; &lt;/ServiceOrientedApp&gt; );</code> </pre> <br>  <code>&lt;ServiceOrientedApp /&gt;</code> es una aplicaci√≥n web interactiva.  Puede aclarar (expandir) la funcionalidad de esta aplicaci√≥n utilizando los componentes secundarios que proporcion√≥.  Admite los <code>&lt;DataLayer /&gt;</code> <code>&lt;Environment /&gt;</code> , <code>&lt;Route /&gt;</code> , <code>&lt;Service /&gt;</code> y <code>&lt;DataLayer /&gt;</code> . <br><br>  <code>&lt;Envrionment /&gt;</code> determina el tiempo de ejecuci√≥n de su aplicaci√≥n.  Por ejemplo, puede tener una versi√≥n de desarrollo y producci√≥n.  Puede ejecutar e implementar cada uno por separado. <br><br>  <code>&lt;Route /&gt;</code> es la p√°gina de su aplicaci√≥n.  funciona como <code>&lt;Route /&gt;</code> en react-router.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠ hay un tutorial sobre c√≥mo trabajar con rutas</a> . <br><br>  <code>&lt;Service /&gt;</code> define una funci√≥n que se ejecuta en el lado del servidor.  Puede tener uno o m√°s <code>&lt;Middleware /&gt;</code> - componentes como los ni√±os. <br><br>  <code>&lt;Middleware /&gt;</code> funciona como Express.js-middleware. <br>  <code>&lt;DataLayer /&gt;</code> agrega una base de datos NoSQL a su aplicaci√≥n.  Se necesita &lt;Entrada /&gt; - componentes como los ni√±os.  &lt;Entrada /&gt; describe el tipo de elementos en su base de datos. <br><br>  Estos componentes son todo lo que necesitamos para crear nuestra aplicaci√≥n de pila completa.  Como puede ver, nuestra aplicaci√≥n tiene: un tiempo de ejecuci√≥n, una p√°gina, dos servicios y una base de datos con un registro. <br><br>  La estructura del componente proporciona una vista clara de su aplicaci√≥n.  Cuanto mayor sea su aplicaci√≥n obtiene, m√°s importante es. <br><br>  Usted puede haber notado que el <code>&lt;Service /&gt;</code> son hijos de la <code>&lt;DataLayer /&gt;</code> .  Esto tiene una explicaci√≥n simple.  Queremos que nuestros servicios tengan acceso a la base de datos.  Realmente es as√≠ de simple! <br><br><h2>  Dise√±o de bases de datos </h2><br>  <code>&lt;DataLayer /&gt;</code> crea Amazon DynamoDB.  Esta es una base de datos de valores clave (NoSQL).  Proporciona un alto rendimiento en cualquier escala.  Pero a diferencia de las bases de datos relacionales, no admite consultas complejas. <br><br>  El esquema de la base tiene tres campos: <code>primaryKey</code> , <code>rangeKey</code> y <code>data</code> .  Esto es importante porque necesita saber que solo puede encontrar entradas por sus teclas.  Ya sea por <code>primaryKey</code> , o por <code>rangeKey</code> , o ambos. <br><br>  Con este conocimiento, echemos un vistazo a nuestra <code>&lt;Entry /&gt;</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> USER_ENTRY_ID = <span class="hljs-string"><span class="hljs-string">"user_entry"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserEntry</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Entry</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">primaryKey</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"username"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rangeKey</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"userid"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">age:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">GraphQLString</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">address:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">GraphQLString</span></span></span></span><span class="xml"><span class="hljs-tag"> }} /&gt;</span></span></span><span class="xml"> };</span></span></code> </pre> <br>  <code>&lt;Entry /&gt;</code> describe la estructura de nuestros datos.  Definimos nombres para nuestra primaryKey y rangeKey.  Puede usar cualquier nombre que no sean algunas palabras clave de DynamoDB que puede encontrar aqu√≠.  Pero los nombres que usamos tienen implicaciones funcionales: <br><br><ul><li>  Cuando a√±adimos los elementos en nuestra base de datos, tenemos que proporcionar valores para estos nombres clave. </li><li>  La combinaci√≥n de las dos teclas describe el elemento √∫nico en la base de datos. </li><li>  No deber√≠a haber otra &lt;Entrada /&gt; con los mismos nombres de clave (un nombre puede ser el mismo, pero no ambos). </li><li>  Podemos encontrar elementos en la base de datos solo cuando tenemos el valor de al menos un nombre de clave. </li></ul><br>  En nuestro ejemplo, esto significa que: <br><br><ul><li>  Cada usuario debe tener un nombre de usuario y un ID de usuario. </li><li>  no puede haber un segundo Usuario con el mismo nombre de usuario y el mismo ID de usuario.  Desde la perspectiva de la base de datos que ser√≠a bueno si los dos usuarios fue el mismo que el nombre de usuario, cuando tienen identificador de usuario diferente (o viceversa). </li><li>  No podemos tener otra &lt;Entrada /&gt; en nuestra base de datos con primaryKey = "username" y rangeKey = "userid". </li><li>  Podemos consultar la base de datos para los usuarios cuando tenemos un nombre de usuario o <code>id</code> usuario.  Pero no podemos solicitar por edad o direcci√≥n. </li></ul><br><h3>  Agregar elementos a la base de datos </h3><br>  Definimos dos componentes <code>&lt;Service /&gt;</code> en nuestro <code>&lt;ServiceOrientedApp /&gt;</code> .  Servicio <code>POST</code> que agrega al usuario a la base de datos y servicio <code>GET</code> que recupera al usuario de ella. <br><br>  Comencemos con <code>&lt;AddUserService /&gt;</code> .  Aqu√≠ est√° el c√≥digo para este servicio: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { callService, Middleware, mutate, Service, serviceWithDataLayer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"infrastructure-components"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { USER_ENTRY_ID, IUserEntry } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user-entry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ADDUSER_SERVICE_ID = <span class="hljs-string"><span class="hljs-string">"adduser"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ADDUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/adduser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">IUserEntry</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">JSON.parse(req.body);</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mutate</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.setEntryMutation</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody</span></span></span></span><span class="xml"><span class="hljs-tag">) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">("</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ok</span></span></span></span><span class="xml"><span class="hljs-tag">"); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> };</span></span></code> ; <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { callService, Middleware, mutate, Service, serviceWithDataLayer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"infrastructure-components"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { USER_ENTRY_ID, IUserEntry } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user-entry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ADDUSER_SERVICE_ID = <span class="hljs-string"><span class="hljs-string">"adduser"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ADDUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/adduser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">IUserEntry</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">JSON.parse(req.body);</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mutate</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.setEntryMutation</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody</span></span></span></span><span class="xml"><span class="hljs-tag">) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">("</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ok</span></span></span></span><span class="xml"><span class="hljs-tag">"); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> };</span></span></code> DataLayer, req, res, pr√≥ximos) { <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { callService, Middleware, mutate, Service, serviceWithDataLayer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"infrastructure-components"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { USER_ENTRY_ID, IUserEntry } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user-entry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ADDUSER_SERVICE_ID = <span class="hljs-string"><span class="hljs-string">"adduser"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ADDUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/adduser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">IUserEntry</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">JSON.parse(req.body);</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mutate</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.setEntryMutation</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody</span></span></span></span><span class="xml"><span class="hljs-tag">) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">("</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ok</span></span></span></span><span class="xml"><span class="hljs-tag">"); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> };</span></span></code> </pre> <br>  Componente <code>&lt;Service /&gt;</code> - toma tres par√°metros: <br><br><ul><li>  El identificador ( <code>id</code> ) debe ser una cadena √∫nica.  Utilizamos un identificador ( <code>id</code> ), cuando tenemos que hacer referencia al <code>service</code> de los dem√°s componentes. </li><li>  La <code>path</code> (con inicial /) indica la ruta URL relativa de su servicio </li><li>  El <code>method</code> debe ser <code>GET</code> , <code>POST</code> , <code>UPDATE</code> , <code>DELETE</code> .  Indica la solicitud HTTP que usamos cuando llamamos al servicio. </li></ul><br>  <code>&lt;Middleware /&gt;</code> como un ni√±o.  Este <code>&lt;Middleware /&gt;</code> toma una funci√≥n de devoluci√≥n de llamada como par√°metro.  Podr√≠amos proporcionar directamente el middleware Express.js.  Como queremos acceder a la base de datos, <code>serviceWithDataLayer</code> funci√≥n en <code>serviceWithDataLayer</code> .  Esto agrega <code>dataLayer</code> como el primer par√°metro de nuestra devoluci√≥n de llamada. <br><br>  <code>DataLayer</code> proporciona acceso a la base de datos.  Vamos a ver c√≥mo! <br><br>  La funci√≥n asincr√≥nica de <code>mutate</code> aplica los cambios a los datos en nuestra base de datos.  Esto requiere que el cliente y las mutaciones de comandos como par√°metros. <br><br>  Estos elementos - un objeto de Javascript, que tiene todos los pares de valores clave.  En nuestro servicio, obtenemos este objeto del cuerpo de la solicitud.  Para el <code>User</code> objeto tiene la siguiente estructura: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface IUserEntry { <span class="hljs-attr"><span class="hljs-attr">username</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">address</span></span>: string }</code> </pre> <br>  Este objeto toma los nombres <code>primaryKey</code> y <code>rangeKey</code> y todas las claves de datos que definimos en <code>&lt;Entry /&gt;</code> . <br><br>  Nota: en el momento del tipo admitido es una cadena, que corresponde a la definici√≥n de GraphQLString &lt;Entrada /&gt;. <br>  Hemos mencionado anteriormente que tomamos los datos <code>IUserEntry</code> del cuerpo.  ¬øC√≥mo va esto? <br><br>  Los componentes de infraestructura proporcionan la funci√≥n asincr√≥nica <code>callService (serviceId, dataObject)</code> .  Esta funci√≥n toma el identificador de servicio, Javascript-sitios (como para el env√≠o del cuerpo de la petici√≥n usando <code>POST</code> ), la funci√≥n del <code>success</code> - y una funci√≥n de devoluci√≥n de llamada con un error. <br><br>  El siguiente fragmento muestra c√≥mo usamos esta funci√≥n para llamar a nuestro <code>&lt;AddUserService /&gt;</code> .  Especificamos <code>serviceId</code> .  Y pasamos <code>userData</code> , que tomamos como par√°metro de nuestra funci√≥n. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callAddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userData: IUserEntry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( ADDUSER_SERVICE_ID, userData, (data: any) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"received data: "</span></span>, data); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); };</code> de datos); <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callAddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userData: IUserEntry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( ADDUSER_SERVICE_ID, userData, (data: any) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"received data: "</span></span>, data); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); };</code> </pre> <br>  Ahora <code>callAddUserService</code> funci√≥n - eso es todo lo que necesitamos cuando queremos a√±adir un nuevo usuario.  Por ejemplo, ll√°melo cuando el usuario hace clic en un bot√≥n: <br><br><pre> <code class="javascript hljs">&lt;button onClick={() =&gt; callAddUserService({ <span class="hljs-attr"><span class="hljs-attr">username</span></span>: username, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: userid, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: age, <span class="hljs-attr"><span class="hljs-attr">address</span></span>: address })}&gt;Save&lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt;</span></span></code> </pre> <br>  Simplemente lo llamamos usando el objeto <code>IUserEntry</code> .  Llama al servicio correcto (como lo indica su identificador ( <code>id</code> )).  Pone <code>userData</code> en el cuerpo de la solicitud.  <code>&lt;AddUserService /&gt;</code> toma datos del cuerpo y los coloca en la base de datos. <br><br><h3>  Obtener elementos de la base de datos </h3><br>  Obtener los elementos de la base de datos es tan simple como la adici√≥n de ellos. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">GETUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/getuser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.getEntryQuery</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">username:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req.query.username</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">userid:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req.query.userid</span></span></span></span><span class="xml"><span class="hljs-tag"> }) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">JSON.stringify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag">)); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> }</span></span></code> ": "*", // Necesario para CORS apoyo para trabajar <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">GETUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/getuser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.getEntryQuery</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">username:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req.query.username</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">userid:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req.query.userid</span></span></span></span><span class="xml"><span class="hljs-tag"> }) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">JSON.stringify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag">)); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> }</span></span></code> </pre> <br>  Nuevamente, usamos &lt;Servicio /&gt;, &lt;Middleware /&gt; y una funci√≥n de devoluci√≥n de llamada con acceso a la base de datos. <br><br>  En lugar de la funci√≥n <code>mutate</code> , que agrega un elemento a la base de datos, usamos la funci√≥n <code>select</code> .  Esta funci√≥n pregunta por el cliente que estamos tomando de <code>dataLayer</code> .  El segundo par√°metro es el comando de <code>select</code> .  Al igual que el comando de <code>mutation</code> , podemos crear un comando de <code>select</code> usando <code>dataLayer</code> . <br><br>  Esta vez usamos la funci√≥n <code>getEntryQuery</code> .  Proporcionamos el identificador ( <code>id</code> ) <code>&lt;Entry /&gt;</code> cuyo elemento queremos recibir.  Y proporcionamos las teclas ( <code>primaryKey</code> y <code>rangeKey</code> ) un elemento espec√≠fico en el objeto Javascript.  Como proporcionamos ambas claves, recuperamos un elemento.  Si es que existe. <br><br>  Como puede ver, tomamos los valores clave de la solicitud.  Pero esta vez los tomamos de <code>request.query</code> , y no de <code>request.body</code> .  La raz√≥n es que el servicio utiliza el <code>GET</code> -method.  Este m√©todo no admite el cuerpo en la solicitud.  Pero proporciona todos los datos como par√°metros de consulta. <br><br>  La funci√≥n <code>callService</code> maneja esto por nosotros.  Como en la <code>callAddUserService-function</code> , proporcionamos el identificador ( <code>id</code> ) <code>&lt;Service /&gt;</code> que queremos llamar.  Proporcionamos los datos necesarios.  Aqu√≠ est√°n solo las llaves.  Y proporcionamos una funci√≥n de devoluci√≥n de llamada. <br><br>  Una devoluci√≥n de llamada exitosa proporciona una respuesta.  El cuerpo de respuesta en formato json contiene nuestro elemento encontrado.  Podemos acceder a este elemento a trav√©s de la clave <code>get_user_entry</code> .  " <code>Get_</code> " define la solicitud que colocamos en nuestra funci√≥n de selecci√≥n.  ¬´ <code>User_entry</code> ¬ª - esta es la clave de nuestra <code>&lt;Entry /&gt;</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callGetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">username: string, userid: string, onData: (userData: IUserEntry</span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( GETUSER_SERVICE_ID, { <span class="hljs-attr"><span class="hljs-attr">username</span></span>: username, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: userid }, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response: any</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); onData(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); }); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); }</code> ) <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callGetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">username: string, userid: string, onData: (userData: IUserEntry</span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( GETUSER_SERVICE_ID, { <span class="hljs-attr"><span class="hljs-attr">username</span></span>: username, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: userid }, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response: any</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); onData(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); }); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); }</code> </pre> <br><h2>  Echa un vistazo a tu aplicaci√≥n Full-Stack en acci√≥n. </h2><br>  Si no ha lanzado su aplicaci√≥n, ahora es el momento de hacerlo: <code>npm run start-{your-env-name}</code> . <br><br>  Incluso se puede implementar la aplicaci√≥n de AWS con un solo comando: <code>npm run deploy-{your-env-name}</code> .  (Recuerde poner las credenciales de AWS en el archivo .env). <br><br>  Esta publicaci√≥n no describe c√≥mo ingresa los datos que ingresa en la base de datos y c√≥mo muestra los resultados.  <code>callAddUserService</code> y <code>callGetUserService</code> encapsulan todo lo que es espec√≠fico de los servicios y la base de datos.  Simplemente coloque el objeto Javascript all√≠ y lo recupere. <br><br>  Puede encontrar el c√≥digo fuente de este ejemplo en este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub-repositorio</a> .  Incluye una interfaz de usuario muy simple. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/476696/">https://habr.com/ru/post/476696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../476682/index.html">C√≥mo escribir un zapador en Phaser y ejecutar una tarea de prueba de desarrollador HTML5</a></li>
<li><a href="../476686/index.html">Desarrollo de una puerta de enlace IoT basada en Raspberry CM3 +</a></li>
<li><a href="../476688/index.html">Nuevo curso de OTUS. "Desarrollador IOS. Curso avanzado V 2.0 ¬ª</a></li>
<li><a href="../476692/index.html">Principios de marketing de contenidos</a></li>
<li><a href="../476694/index.html">Sobre la robotizaci√≥n empresarial con Farida Roslovets y directora de la empresa RPA electroNeek</a></li>
<li><a href="../476698/index.html">C√≥mo Apple mata las tecnolog√≠as web</a></li>
<li><a href="../476700/index.html">Mes en la producci√≥n de radiadores de acero.</a></li>
<li><a href="../476702/index.html">C√≥mo una peque√±a ciudad del interior se convirti√≥ en un centro internacional de comercio electr√≥nico</a></li>
<li><a href="../476704/index.html">C√≥mo automatizar el dise√±o de correos electr√≥nicos con el mismo tipo de elementos: utilizamos objetos inteligentes</a></li>
<li><a href="../476706/index.html">Cerebras Systems present√≥ una computadora con el procesador m√°s grande del mundo de 22 √ó 22 cent√≠metros</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>