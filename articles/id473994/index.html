<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛽️ 👩🏾‍💻 🏭 Memuat skrip modern 👩🏻 🦂 ♣️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Melewati kode yang tepat untuk setiap browser bukanlah tugas mudah. 

 Pada artikel ini, kami akan mempertimbangkan beberapa opsi untuk mengatasi masa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Memuat skrip modern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/473994/">  Melewati kode yang tepat untuk setiap browser bukanlah tugas mudah. <br><br>  Pada artikel ini, kami akan mempertimbangkan beberapa opsi untuk mengatasi masalah ini. <br><br><img src="https://habrastorage.org/webt/4f/rs/cl/4frsclbbpc2v0pwpxqehbh3tj1w.png"><br><br>  Melewati kode modern oleh browser modern dapat sangat meningkatkan kinerja.  Paket JavaScript Anda akan dapat berisi sintaksis modern yang lebih ringkas atau dioptimalkan dan mendukung browser lama. <br><br>  Di antara alat untuk pengembang, pola <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">modul / nomodule</a> memuat deklaratif modern atau kode lama mendominasi, yang menyediakan browser dengan sumber dan memungkinkan Anda untuk memutuskan mana yang akan digunakan: <br><br><pre><code class="javascript hljs">&lt;script type=<span class="hljs-string"><span class="hljs-string">"module"</span></span> src=<span class="hljs-string"><span class="hljs-string">"/modern.js"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script nomodule src=<span class="hljs-string"><span class="hljs-string">"/legacy.js"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Sayangnya, tidak semuanya begitu sederhana.  Pendekatan HTML yang ditunjukkan di atas memicu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">reload skrip di Edge dan Safari</a> . <a name="habracut"></a><br><br><h4>  Apa yang bisa dilakukan? </h4><br>  Bergantung pada peramban, kami perlu memberikan salah satu opsi untuk skrip yang dikompilasi, tetapi beberapa peramban lama tidak mendukung semua sintaks yang diperlukan untuk ini. <br><br>  Pertama, ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Perbaikan Safari</a> .  Safari 10.1 mendukung modul JS, bukan atribut <code>nomodule</code> dalam skrip, yang memungkinkannya untuk mengeksekusi kode modern dan lama.  Namun, acara sebelum- <code>beforeload</code> non-standar yang didukung oleh Safari 10 &amp; 11 dapat digunakan untuk polyfill <code>nomodule</code> . <br><br><h4><a name="first"></a>  Metode Satu: Unduhan Dinamis </h4><br>  Anda dapat mengatasi masalah ini dengan menerapkan pemuat skrip kecil.  Mirip dengan cara kerja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">LoadCSS</a> .  Alih-alih berharap untuk implementasi modul-ES dan atribut <code>nomodule</code> di <code>nomodule</code> , Anda dapat mencoba untuk mengeksekusi skrip modul sebagai "tes dengan tes lakmus", dan berdasarkan hasilnya, pilih untuk mengunduh kode modern atau lawas. <br><br><pre> <code class="javascript hljs">&lt;!-- use a <span class="hljs-built_in"><span class="hljs-built_in">module</span></span> script to detect modern browsers: --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="actionscript"><span class="xml"><span class="actionscript"> self.modern = </span></span><span class="hljs-literal"><span class="xml"><span class="actionscript"><span class="hljs-literal">true</span></span></span></span><span class="xml"><span class="actionscript"> </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!-- now use that flag to load modern VS legacy code: --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> addEventListener(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'load'</span></span></span></span><span class="xml"><span class="javascript">, </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"></span><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span></span><span class="xml"><span class="javascript">{ </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> s = </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">document</span></span></span></span><span class="xml"><span class="javascript">.createElement(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'script'</span></span></span></span><span class="xml"><span class="javascript">) </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript"> (</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'noModule'</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">in</span></span></span></span><span class="xml"><span class="javascript"> s) { </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">// notice the casing s.type = 'module' s.src = '/modern.js' } else { s.src = '/legacy.js' } document.head.appendChild(s) }) </span></span></span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Tetapi dengan pendekatan ini, Anda harus menunggu skrip modul "lakmus" selesai sebelum Anda menerapkan skrip yang benar.  Ini terjadi karena <code>&lt;sript type="module"&gt;</code> selalu bekerja secara tidak sinkron.  Tapi ada cara yang lebih baik! <br><br>  Anda dapat menerapkan opsi independen dengan memeriksa apakah <code>nomodule</code> di browser.  Ini berarti bahwa kami akan mempertimbangkan browser seperti Safari 10.1 sebagai usang, bahkan jika mereka mendukung modul.  Tapi itu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bisa menjadi</a> yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terbaik</a> .  Ini kode yang relevan: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">'noModule'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> s) { <span class="hljs-comment"><span class="hljs-comment">// notice the casing s.type = 'module' s.src = '/modern.js' } else s.src = '/legacy.js' } document.head.appendChild(s)</span></span></code> </pre> <br>  Ini dapat dengan cepat diubah menjadi fungsi yang memuat kode modern atau lawas, dan juga menyediakan pemuatan asinkron: <br><br><pre> <code class="javascript hljs">&lt;script&gt; $loadjs(<span class="hljs-string"><span class="hljs-string">"/modern.js"</span></span>,<span class="hljs-string"><span class="hljs-string">"/legacy.js"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">$loadjs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">src,fallback,s</span></span></span><span class="hljs-function">) </span></span>{ s = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">'noModule'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> s) s.type = <span class="hljs-string"><span class="hljs-string">'module'</span></span>, s.src = src <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> s.async = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, s.src = fallback <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.appendChild(s) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  Apa kompromi di sini? <br><br>  <b>Preload</b> <br><br>  Karena solusinya benar-benar dinamis, browser tidak akan dapat mendeteksi sumber daya JavaScript kami sampai ia memulai kode bootstrap yang kami tulis untuk memasukkan skrip modern atau lawas.  Biasanya, browser memindai HTML untuk mencari sumber yang dapat diunduh sebelumnya.  Masalah ini terpecahkan, tetapi tidak secara ideal: Anda dapat memuat versi modern paket di browser modern menggunakan <code>&lt;link rl=modulpreload&gt;</code> . <br><br>  Sayangnya, sejauh ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hanya Chrome yang mendukung</a> <code>modulepreload</code> . <br><br><pre> <code class="javascript hljs">&lt;link rel=<span class="hljs-string"><span class="hljs-string">"modulepreload"</span></span> href=<span class="hljs-string"><span class="hljs-string">"/modern.js"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"><span class="xml"><span class="undefined">self.modern=1</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!-- etc --&gt;</code> </pre> <br>  Jika teknik ini cocok untuk Anda, Anda bisa mengurangi ukuran dokumen HTML yang menjadi tempat Anda menyematkan skrip ini.  Jika payload Anda kecil, seperti layar splash atau kode unduhan aplikasi klien, maka menjatuhkan preload scanner tidak akan mempengaruhi kinerja.  Dan jika Anda menggambar banyak HTML penting di server untuk dikirim ke browser, maka pemindai preload akan berguna bagi Anda dan pendekatan yang dijelaskan tidak akan menjadi pilihan terbaik untuk Anda. <br><br>  Inilah yang terlihat seperti solusi ini digunakan: <br><br><pre> <code class="javascript hljs">&lt;link rel=<span class="hljs-string"><span class="hljs-string">"modulepreload"</span></span> href=<span class="hljs-string"><span class="hljs-string">"/modern.js"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"><span class="xml"><span class="undefined">self.modern=1</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; $loadjs(<span class="hljs-string"><span class="hljs-string">"/modern.js"</span></span>,<span class="hljs-string"><span class="hljs-string">"/legacy.js"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">$loadjs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e,d,c</span></span></span><span class="hljs-function">)</span></span>{c=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"script"</span></span>),self.modern?(c.src=e,c.type=<span class="hljs-string"><span class="hljs-string">"module"</span></span>):c.src=d,<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.appendChild(c)} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  Perlu juga dicatat bahwa daftar browser yang mendukung modul JS hampir sama dengan yang mendukung <code>&lt;link rl=preload&gt;</code> .  Untuk beberapa situs, mungkin pantas menggunakan <code>&lt;link rl=preload as=script crossorigin&gt;</code> sebagai ganti <code>modulepreload</code> .  Performa dapat menurun karena preloading skrip klasik tidak menyiratkan penguraian yang seragam dari waktu ke waktu, seperti halnya dengan <code>modulepreload</code> . <br><br><a name="second"></a><h4>  Metode Dua: Lacak Agen Pengguna </h4><br>  Saya tidak memiliki contoh kode yang cocok karena melacak Agen Pengguna adalah tugas yang tidak sepele.  Tetapi kemudian Anda dapat membaca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel yang</a> sangat bagus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di Smashing Magazine.</a> <br><br>  Faktanya, semuanya dimulai dengan <code>&lt;scrit src=bundle.js&gt;</code> di HTML untuk semua browser.  Ketika bundle.js diminta, server mem-parsing string Agen Pengguna dari browser yang meminta dan memilih JavaScript yang akan dikembalikan - modern atau lawas, tergantung pada bagaimana browser dikenali. <br><br>  <b>Pendekatan ini bersifat universal, tetapi menimbulkan konsekuensi serius:</b> <b><br></b> <br><ul><li>  Karena server pintar diperlukan, pendekatan ini tidak akan berfungsi dalam kondisi penggunaan statis (generator situs statis, Netlify, dll.). </li><li>  Caching untuk URL JavaScript ini sekarang tergantung pada Agen Pengguna, yang sangat tidak stabil. </li><li>  Definisi UA sulit dan dapat menyebabkan klasifikasi yang salah. </li><li>  Baris User Agent mudah dipalsukan, dan UA baru muncul setiap hari. </li></ul><br>  Salah satu cara mengatasi keterbatasan ini adalah menggabungkan pola modul / nomodule dengan diferensiasi Agen Pengguna untuk menghindari pengiriman beberapa versi paket ke alamat yang sama.  Pendekatan ini mengurangi cache halaman, tetapi menyediakan preloading yang efisien: server penghasil HTML tahu kapan harus menggunakan <code>modulepreload</code> dan kapan harus <code>preload</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">renderPage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">request, response</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> html = <span class="hljs-string"><span class="hljs-string">`&lt;html&gt;&lt;head&gt;...`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> agent = request.headers.userAgent; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isModern = userAgent.isModern(agent); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModern) { html += <span class="hljs-string"><span class="hljs-string">` &lt;link rel="modulepreload" href="modern.mjs"&gt; &lt;script type="module" src="modern.mjs"&gt;&lt;/script&gt; `</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { html += <span class="hljs-string"><span class="hljs-string">` &lt;link rel="preload" as="script" href="legacy.js"&gt; &lt;script src="legacy.js"&gt;&lt;/script&gt; `</span></span>; } response.end(html); }</code> </pre> <br>  Untuk situs yang sudah menghasilkan HTML di server sebagai tanggapan atas setiap permintaan, ini bisa menjadi transisi yang efektif untuk mengunduh skrip modern. <br><br><a name="third"></a><h4>  Metode tiga: browser lama yang bagus </h4><br>  Efek negatif dari pola modul / nomodule terlihat di versi Chrome, Firefox, dan Safari yang lebih lama - jumlahnya sangat kecil, karena peramban diperbarui secara otomatis.  Dengan Edge 16-18, situasinya berbeda, tetapi ada harapan: Edge versi baru akan menggunakan mesin rendering berbasis Chromium, yang tidak memiliki masalah seperti itu. <br><br>  Untuk beberapa aplikasi, ini akan menjadi kompromi yang ideal: unduh kode versi modern di 90% browser, dan berikan kode lama kepada yang lama.  Muatan di browser yang lebih lama akan meningkat. <br><br>  Ngomong-ngomong, tidak ada Agen Pengguna yang rebootnya merupakan masalah tidak menempati pangsa pasar ponsel yang signifikan.  Jadi sumber dari semua byte tambahan ini tidak mungkin berupa perangkat seluler atau perangkat dengan prosesor yang lemah. <br><br>  Jika Anda membuat situs yang terutama diakses oleh peramban seluler atau peramban baru, maka bagi sebagian besar pengguna ini, jenis modul / pola nomodule yang paling sederhana cocok.  Pastikan Anda menambahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perbaikan Safari 10.1</a> jika perangkat iOS yang lebih lama mendatangi Anda. <br><br><pre> <code class="javascript hljs">   iOS-. &lt;!-- polyfill <span class="hljs-string"><span class="hljs-string">`nomodule`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Safari <span class="hljs-number"><span class="hljs-number">10.1</span></span>: --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> !</span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params">e,t,n</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">)</span></span></span></span><span class="xml"><span class="javascript">{!(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"noModule"</span></span></span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">in</span></span></span></span><span class="xml"><span class="javascript">(t=e.createElement(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"script"</span></span></span></span><span class="xml"><span class="javascript">)))&amp;&amp;</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"onbeforeload"</span></span></span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">in</span></span></span></span><span class="xml"><span class="javascript"> t&amp;&amp;(n=!</span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">1</span></span></span></span><span class="xml"><span class="javascript">,e.addEventListener(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"beforeload"</span></span></span></span><span class="xml"><span class="javascript">,</span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params">e</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">)</span></span></span></span><span class="xml"><span class="javascript">{</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript">(e.target===t)n=!</span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">0</span></span></span></span><span class="xml"><span class="javascript">;</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">else</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript">(!e.target.hasAttribute(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"nomodule"</span></span></span></span><span class="xml"><span class="javascript">)||!n)</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript">;e.preventDefault()},!</span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">0</span></span></span></span><span class="xml"><span class="javascript">),t.type=</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="javascript">,t.src=</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"."</span></span></span></span><span class="xml"><span class="javascript">,e.head.appendChild(t),t.remove())}(</span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">document</span></span></span></span><span class="xml"><span class="javascript">) </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!-- <span class="hljs-number"><span class="hljs-number">90</span></span>+% <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> browsers: --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"modern.js"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module'&gt;&lt;/script&gt;</span></span></span></span></span></span> &lt;!-- IE, Edge &lt;<span class="hljs-number"><span class="hljs-number">16</span></span>, Safari &lt;<span class="hljs-number"><span class="hljs-number">10.1</span></span>, old desktop: --&gt; <span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">&lt;script src="</span></span></span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">legacy.js</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">nomodule</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><a name="fourth"></a><h4>  Metode Empat: Terapkan Ketentuan Paket </h4><br>  Solusi yang baik adalah menggunakan <code>nomodule</code> untuk mengunduh paket dengan kode yang tidak diperlukan di browser modern, seperti polyfill.  Dengan pendekatan ini, dalam kasus terburuk, polyfill akan dimuat atau bahkan dieksekusi (di Safari 10.1), tetapi efeknya akan terbatas pada “re-polyfilling”.  Mengingat hari ini pendekatan dengan mengunduh dan mengeksekusi polyfill di semua browser berlaku, ini bisa menjadi peningkatan yang layak. <br><br><pre> <code class="javascript hljs">&lt;!-- newer browsers will not load <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> bundle: --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">nomodule</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"polyfills.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!-- all browsers load <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> one: --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/bundle.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Anda dapat mengkonfigurasi CLI Angular untuk menggunakan pendekatan ini dengan polyfill, seperti yang diperlihatkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Minko</a> Gachev.  Setelah mempelajari tentang pendekatan ini, saya menyadari bahwa Anda dapat mengaktifkan injeksi polyfill otomatis di preact-cli - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PR</a> ini menunjukkan betapa mudahnya menerapkan teknik ini. <br><br>  Dan jika Anda menggunakan WebPack, maka ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">plugin yang nyaman</a> untuk <code>html-webpack-plugin</code> , yang membuatnya mudah untuk menambahkan nomodule ke paket dengan polyfill. <br><br><h4>  Jadi apa yang harus dipilih? </h4><br>  Jawabannya tergantung pada situasi Anda.  Jika Anda membuat aplikasi klien, dan HTML Anda mengandung lebih dari <code>&lt;sript&gt;</code> , maka Anda mungkin perlu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">metode pertama</a> . <br><br>  Jika Anda membuat situs yang dirender di server, dan Anda dapat melakukan caching, maka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">metode kedua</a> mungkin cocok <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">untuk Anda</a> . <br><br>  Jika Anda menggunakan render <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">universal</a> , perolehan kinerja yang ditawarkan oleh pemindaian pra-muat bisa sangat penting.  Karena itu, perhatikan metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ketiga</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">keempat</a> .  Pilih yang cocok dengan arsitektur Anda. <br><br>  Secara pribadi, saya memilih, dengan fokus pada durasi penguraian pada perangkat seluler, dan bukan pada biaya pengunduhan dalam versi desktop.  Pengguna seluler menganggap biaya penguraian dan transfer data sebagai biaya aktual (konsumsi baterai dan biaya transfer data), sedangkan pengguna desktop tidak memiliki batasan seperti itu.  Saya juga melanjutkan dari pengoptimalan untuk 90% pengguna - pemirsa utama proyek saya menggunakan browser modern dan / atau mobile. <br><br><h4>  Apa yang harus dibaca </h4><br>  Ingin mempelajari lebih lanjut tentang topik ini?  Anda bisa mulai dari sini: <br><br><ul><li>  Info tambahan yang bagus tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">webpack-esnext-boilerplate</a> . </li><li>  Ralph <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengimplementasikan modul / nomodule di Next.js</a> dan sedang mengerjakan solusi untuk masalah umum. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473994/">https://habr.com/ru/post/id473994/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473984/index.html">Intisari Ilmu Data (Oktober 2019)</a></li>
<li><a href="../id473986/index.html">“Impian saya adalah melihat seseorang melalui pepohonan” - pendiri Lisa Alert tentang teknologi pencarian modern</a></li>
<li><a href="../id473988/index.html">Mengoptimalkan distribusi server di rak</a></li>
<li><a href="../id473990/index.html">Pelajari OpenGL. Pelajaran 7.2 - Menggambar Teks</a></li>
<li><a href="../id473992/index.html">Tinjauan umum protokol modern dalam sistem otomasi industri</a></li>
<li><a href="../id473998/index.html">Belanda, atau di sana dan kembali</a></li>
<li><a href="../id474000/index.html">IQBX - desainer elektromekanis untuk kalangan dan pecinta DIY [ide konsep]</a></li>
<li><a href="../id474004/index.html">Dari Norilsk ke Riyadh: Kasus Nyata untuk Kartu Memori Suhu Industri Kingston microSD UHS-I</a></li>
<li><a href="../id474008/index.html">Greenplum 6: ulasan fitur baru</a></li>
<li><a href="../id474012/index.html">Keamanan untuk Wadah Docker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>