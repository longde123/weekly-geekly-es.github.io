<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôÄÔ∏è üóëÔ∏è üòå Einf√ºhrung in Smart Contracts üéì üõ•Ô∏è üôÖüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel werden wir uns ansehen, was intelligente Vertr√§ge sind, was sie sind, verschiedene intelligente Vertragsplattformen kennenlernen, ih...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einf√ºhrung in Smart Contracts</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/distributedlab/blog/413231/">  In diesem Artikel werden wir uns ansehen, was intelligente Vertr√§ge sind, was sie sind, verschiedene intelligente Vertragsplattformen kennenlernen, ihre Funktionen kennenlernen und diskutieren, wie sie funktionieren und welche Vorteile sie bieten k√∂nnen.  Dieses Material ist sehr n√ºtzlich f√ºr Leser, die mit dem Thema Smart Contracts nicht vertraut sind, es aber n√§her verstehen m√∂chten. <br><a name="habracut"></a><br><h2>  <b>Regul√§rer Vertrag vs.</b>  <b>kluger Vertrag</b> </h2><br>  Bevor wir auf Details eingehen, schauen wir uns ein Beispiel f√ºr den Unterschied zwischen einem normalen Vertrag, der auf Papier festgelegt ist, und einem intelligenten Vertrag, der in digitaler Form dargestellt wird. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e19/d3a/226/e19d3a22688347a83b9ef987a94162c7.png" alt="Bild"><br><br>  Wie hat das vor intelligenten Vertr√§gen funktioniert?  Stellen Sie sich eine Gruppe von Menschen vor, die einige Regeln und Bedingungen f√ºr die Verteilung von Werten sowie einen bestimmten Mechanismus festlegen m√∂chten, um die Umsetzung dieser Verteilung gem√§√ü den vorgegebenen Regeln und Bedingungen zu gew√§hrleisten.  Dann kamen sie zusammen, machten ein Papier, auf das sie ihre Identifikationsdaten, die Bedingungen, die Werte aufschrieben, das Datum festlegten und unterschrieben.  Dieser Vertrag wurde auch von einer vertrauensw√ºrdigen Partei wie einem Notar best√§tigt.  Dar√ºber hinaus gingen diese Personen mit ihrer Papierkopie eines solchen Vertrags in verschiedene Richtungen auseinander und begannen, einige Ma√ünahmen durchzuf√ºhren, die m√∂glicherweise nicht dem Vertrag selbst entsprachen, dh sie taten eine Sache, und auf dem Papier wurde versichert, dass sie etwas v√∂llig anderes tun sollten.  Und wie kommt man aus dieser Situation heraus?  Tats√§chlich muss eines der Mitglieder der Gruppe dieses Papier nehmen, einige Beweise vorlegen, es vor Gericht bringen und die Einhaltung des Vertrags und der tats√§chlichen Ma√ünahmen anstreben.  Sehr oft ist es schwierig, eine faire Ausf√ºhrung dieses Vertrags zu erreichen, was zu unangenehmen Konsequenzen f√ºhrt. <br><br>  Was kann man √ºber intelligente Vertr√§ge sagen?  Sie kombinieren sowohl die M√∂glichkeit, die Vertragsbedingungen zu schreiben, als auch den Mechanismus f√ºr ihre strikte Umsetzung.  Wenn die Bedingungen festgelegt wurden und die entsprechende Transaktion oder Anforderung signiert wurde, ist es nach Annahme dieser Anforderung oder Transaktion nicht mehr m√∂glich, die Bedingungen zu √§ndern oder deren Implementierung zu beeinflussen. <br><br>  Es gibt einen Validator oder das gesamte Netzwerk sowie eine Datenbank, in der alle zur Ausf√ºhrung eingegangenen intelligenten Vertr√§ge in strenger chronologischer Reihenfolge gespeichert sind.  Es ist auch wichtig, dass diese Datenbank alle Ausl√∂sebedingungen f√ºr die Ausf√ºhrung eines intelligenten Vertrags enth√§lt.  Dar√ºber hinaus muss der Wert ber√ºcksichtigt werden, dessen Verteilung im Vertrag beschrieben ist.  Wenn dies f√ºr eine digitale W√§hrung gilt, sollte diese Datenbank dies ber√ºcksichtigen. <br><br>  Mit anderen Worten, die Pr√ºfer von Smart Contracts m√ºssen Zugriff auf alle Daten haben, mit denen der Smart Contract arbeitet.  Beispielsweise sollte eine Datenbank verwendet werden, um gleichzeitig digitale W√§hrungen, Benutzersalden, Benutzertransaktionen und Zeitstempel aufzuzeichnen.  In einem intelligenten Vertrag kann die Bedingung dann das Guthaben des Benutzers in einer bestimmten W√§hrung, der Beginn einer bestimmten Zeit oder die Tatsache einer bestimmten Transaktion sein, jedoch nicht mehr. <br><br><h2>  <b>Intelligente Vertragsdefinition</b> </h2><br>  Im Allgemeinen wurde die Terminologie selbst vom Forscher Nick Szabo erfunden und erstmals 1994 angewendet. Sie wurde 1997 in einem Artikel dokumentiert, der die Idee intelligenter Vertr√§ge beschreibt. <br><br>  Intelligente Vertr√§ge implizieren, dass eine gewisse Automatisierung der Wertverteilung durchgef√ºhrt wird, die m√∂glicherweise nur von den vordefinierten Bedingungen abh√§ngt.  In seiner einfachsten Form sieht es aus wie ein Vertrag mit genau festgelegten Bedingungen, der von bestimmten Parteien unterzeichnet wird. <br><br>  Intelligente Vertr√§ge sollen das Vertrauen in Dritte minimieren.  Manchmal ist das Entscheidungszentrum, von dem alles abh√§ngt, v√∂llig ausgeschlossen.  Dar√ºber hinaus ist es einfacher, eine Pr√ºfung f√ºr solche Vertr√§ge durchzuf√ºhren.  Dies ist eine Folge einiger Konstruktionsmerkmale eines solchen Systems, aber meistens meinen wir mit einem intelligenten Vertrag eine dezentrale Umgebung und das Vorhandensein von Funktionen, mit denen jeder die Datenbank analysieren und eine vollst√§ndige Pr√ºfung der Ausf√ºhrung von Vertr√§gen durchf√ºhren kann.  Dies gew√§hrleistet den Schutz vor r√ºckwirkenden √Ñnderungen von Daten, die √Ñnderungen bei der Ausf√ºhrung des Vertrags selbst zur Folge haben.  Die Digitalisierung der meisten Prozesse beim Erstellen und Starten eines intelligenten Vertrags vereinfacht h√§ufig die Technologie und die Kosten ihrer Implementierung. <br><br><h3>  Ein einfaches Beispiel - Treuhandservice </h3><br>  Schauen wir uns ein sehr einfaches Beispiel an.  Dies hilft Ihnen dabei, die Funktionalit√§t intelligenter Vertr√§ge besser zu verstehen und besser zu navigieren, in welchen F√§llen sie verwendet werden sollten. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c49/ff9/541/c49ff9541c0289e2da814c0d62a0425a.png" alt="Bild"><br><br>  Es kann auch mit Bitcoin implementiert werden, obwohl es derzeit immer noch schwierig ist, Bitcoin als vollwertige Plattform f√ºr intelligente Vertr√§ge zu bezeichnen.  Wir haben also einige K√§ufer und es gibt einen Online-Shop.  Der K√§ufer m√∂chte in diesem Gesch√§ft einen Monitor kaufen.  Im einfachsten Fall bereitet der K√§ufer die Zahlung vor und sendet sie. Der Online-Shop akzeptiert sie, best√§tigt sie und sendet sie dann.  In dieser Situation besteht jedoch ein gro√üer Vertrauensbedarf - der K√§ufer muss dem Online-Shop f√ºr die gesamten Kosten des Monitors vertrauen.  Da der Online-Shop in den Augen des K√§ufers ein schlechtes Ansehen hat, besteht das Risiko, dass der Shop nach Annahme der Zahlung aus irgendeinem Grund den Service verweigert und die Waren nicht an den K√§ufer sendet.  Daher stellt der K√§ufer eine Frage (und der Online-Shop stellt diese Frage), was in diesem Fall angewendet werden kann, um solche Risiken zu minimieren und solche Transaktionen zuverl√§ssiger zu machen. <br><br>  Bei Bitcoin k√∂nnen Sie dem K√§ufer und Verk√§ufer die M√∂glichkeit geben, einen Mediator unabh√§ngig voneinander auszuw√§hlen.  Es gibt viele Menschen, die sich mit strittigen Themen befassen.  Und unsere Teilnehmer k√∂nnen aus der allgemeinen Liste der Mediatoren ausw√§hlen, denen gleichzeitig vertraut wird.  Zusammen bilden sie eine Multisignaturadresse 2 von 3, wobei drei Schl√ºssel vorhanden sind und zwei Signaturen von zwei beliebigen Schl√ºsseln ben√∂tigt werden, um M√ºnzen von dieser Adresse auszugeben.  Ein Schl√ºssel geh√∂rt dem K√§ufer, der zweite dem Online-Shop und der dritte dem Mediator.  Und der K√§ufer sendet den zur Bezahlung des Monitors erforderlichen Betrag an eine solche Multisignaturadresse.  Wenn der Verk√§ufer nun feststellt, dass das Geld f√ºr eine Weile an der von ihm abh√§ngigen Multisignaturadresse gesperrt ist, kann er den Monitor sicher per Post senden. <br><br>  Ferner erh√§lt der K√§ufer das Paket, pr√ºft die Ware und entscheidet √ºber den endg√ºltigen Kauf.  Er kann dem erbrachten Service vollst√§ndig zustimmen und die Transaktion mit seinem Schl√ºssel unterschreiben, wo er M√ºnzen von der Multisignaturadresse an den Verk√§ufer √ºberweist, oder mit etwas unzufrieden sein.  Im zweiten Fall kontaktiert er den Mediator, um eine alternative Transaktion zu erstellen, bei der diese M√ºnzen unterschiedlich verteilt werden. <br><br>  Angenommen, der Monitor ist etwas zerkratzt angekommen und es gab kein Kabel zum Anschlie√üen an einen Computer im Kit, obwohl auf der Website des Online-Shops geschrieben wurde, dass das Kabel im Kit enthalten sein sollte.  Dann sammelt der K√§ufer die Beweise, die erforderlich sind, um dem Mediator zu beweisen, dass er in dieser Situation get√§uscht wurde: Er macht Screenshots der Website, macht ein Foto des Schecks aus der Post, macht ein Foto von Kratzern auf dem Monitor und zeigt, dass das Siegel gebrochen und das Kabel herausgezogen wurde.  Der Online-Shop wiederum sammelt seine Beweise und gibt sie an den Mediator weiter. <br><br>  Der Mediator ist daran interessiert, sowohl die Emp√∂rung des K√§ufers als auch die Interessen des Online-Shops zu befriedigen (es wird weiter verstanden, warum).  Er stellt eine solche Transaktion dar, bei der M√ºnzen mit Multisignaturadressen in einem gewissen Verh√§ltnis zwischen dem K√§ufer, dem Online-Shop und der Auswahl ausgegeben werden, da er als Belohnung f√ºr seine Arbeit an sich selbst teilnimmt.  Angenommen, 90% des Gesamtbetrags gehen an den Verk√§ufer, 5% an den Mediator und 5% an den K√§ufer.  Der Mediator signiert diese Transaktion mit seinem Schl√ºssel, sie kann jedoch noch nicht angewendet werden, da hierf√ºr zwei Signaturen erforderlich sind, jedoch nur eine.  Er sendet eine solche Transaktion sowohl an den K√§ufer als auch an den Verk√§ufer.  Wenn mindestens einer von ihnen mit dieser M√∂glichkeit der Umverteilung von M√ºnzen zufrieden ist, wird die Transaktion zus√§tzlich signiert und an das Netzwerk verteilt.  F√ºr die Validierung reicht es aus, wenn einer der Transaktionsteilnehmer der Mediator-Option zustimmt. <br><br>  In diesem Fall ist es wichtig, zun√§chst einen Mediator auszuw√§hlen, damit beide Teilnehmer ihm vertrauen.  In diesem Fall wird er unabh√§ngig von den Interessen des einen oder anderen handeln und die Situation objektiv beurteilen.  Wenn der Mediator keine solche Option f√ºr die Verteilung von M√ºnzen bietet, die mindestens einen Teilnehmer zufriedenstellen, k√∂nnen sowohl der K√§ufer als auch der Online-Shop die M√ºnzen nach gemeinsamer Vereinbarung an eine neue Multisignaturadresse weiterleiten und ihre beiden Unterschriften setzen.  Die neue Multisignaturadresse wird mit einer anderen Auswahl zusammengestellt, die m√∂glicherweise kompetenter in dieser Angelegenheit ist und eine bessere Option bietet. <br><br><h3>  Beispiel f√ºr Schlafsaal und K√ºhlschrank </h3><br>  Schauen wir uns ein komplexeres Beispiel an, in dem die Funktionen eines intelligenten Vertrags expliziter dargestellt werden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4d9/d62/be0/4d9d62be0f11ea9938eb092ee279dd85.png" alt="Bild"><br><br>  Nehmen wir an, es gibt drei Leute, die sich k√ºrzlich in einem Schlafsaal niedergelassen haben.  Die drei sind daran interessiert, einen K√ºhlschrank in ihrem Zimmer zu kaufen, den sie teilen werden.  Einer von ihnen meldete sich freiwillig, um den notwendigen Betrag f√ºr den Kauf eines K√ºhlschranks zu sammeln und mit dem Verk√§ufer zu verhandeln.  Sie haben sich jedoch vor relativ kurzer Zeit kennengelernt, und es besteht nicht gen√ºgend Vertrauen zwischen ihnen.  Offensichtlich sind zwei von ihnen gef√§hrdet und geben einem dritten Geld.  Dar√ºber hinaus m√ºssen sie eine Einigung √ºber die Wahl des Verk√§ufers erzielen. <br><br>  Sie k√∂nnen den Treuhandservice nutzen, dh einen Mediator ausw√§hlen, der die Ausf√ºhrung der Transaktion √ºberwacht und umstrittene Probleme l√∂st, falls solche auftreten.  Nachdem sie zugestimmt haben, erstellen sie einen intelligenten Vertrag und schreiben darin bestimmte Bedingungen vor. <br><br>  Die erste Bedingung ist, dass vor einer bestimmten Zeit, beispielsweise innerhalb einer Woche, drei Zahlungen von bestimmten Adressen f√ºr einen bestimmten Betrag auf dem entsprechenden Konto des Smart-Vertrags eingehen m√ºssen.  Geschieht dies nicht, endet der Smart-Vertrag und gibt die M√ºnzen an alle Teilnehmer zur√ºck.  Wenn die Bedingung erf√ºllt ist, werden die Werte der Kennungen des Verk√§ufers und des Mediators festgelegt und die Bedingung, dass alle Teilnehmer mit der Wahl des Verk√§ufers und des Mediators einverstanden sind, √ºberpr√ºft.  Wenn alle Bedingungen erf√ºllt sind, wird das Geld an die angegebenen Adressen √ºberwiesen.  Ein solcher Ansatz kann die Teilnehmer auf jeder Seite vor Betrug sch√ºtzen und beseitigt im Allgemeinen die Notwendigkeit des Vertrauens. <br><br>  Wir sehen in diesem Beispiel das Prinzip selbst, dass eine solche M√∂glichkeit, Schritt f√ºr Schritt Parameter f√ºr jede zu erf√ºllende Bedingung festzulegen, die Erstellung von Systemen beliebiger Komplexit√§t und Tiefe verschachtelter Ebenen erm√∂glicht.  Dar√ºber hinaus k√∂nnen Sie zun√§chst die erste Bedingung in einem Smart-Vertrag definieren und erst nach dessen Abschluss Parameter f√ºr die n√§chste Bedingung festlegen.  Mit anderen Worten, formal ist die Bedingung vorgeschrieben, und Parameter daf√ºr k√∂nnen bereits w√§hrend ihres Betriebs eingestellt werden. <br><br><h3>  Klassifizierung intelligenter Vertr√§ge </h3><br>  Zur Klassifizierung k√∂nnen Sie verschiedene Kriteriengruppen angeben.  Zum Zeitpunkt der Technologieentwicklung sind jedoch vier davon relevant. <br><br>  Intelligente Vertr√§ge k√∂nnen durch eine Laufzeitumgebung unterschieden werden, die entweder zentral oder dezentral sein kann.  Im Falle der Dezentralisierung haben wir eine viel gr√∂√üere Unabh√§ngigkeit und Fehlertoleranz bei der Ausf√ºhrung intelligenter Vertr√§ge. <br><br>  Sie k√∂nnen auch durch den Prozess des Einstellens und Erf√ºllens von Bedingungen unterschieden werden: Sie k√∂nnen willk√ºrlich programmierbar, begrenzt oder vordefiniert sein, d. H. Streng typisiert.  Wenn es auf der Smart Contract-Plattform nur 4 spezifische Smart Contracts gibt, k√∂nnen die Parameter f√ºr diese beliebig festgelegt werden.  Dementsprechend ist das Einstellen viel einfacher: Wir w√§hlen einen Vertrag aus der Liste aus und √ºbergeben die Parameter. <br><br>  Bei der Initiierungsmethode gibt es automatisierte intelligente Vertr√§ge, dh wenn bestimmte Bedingungen erf√ºllt sind, erf√ºllen sie sich selbst, und es gibt solche Vertr√§ge, in denen die Bedingungen angegeben sind, aber die Plattform √ºberpr√ºft ihre Erf√ºllung nicht automatisch, da sie separat initiiert werden m√ºssen. <br><br>  Dar√ºber hinaus unterscheiden sich intelligente Vertr√§ge in Bezug auf den Datenschutz.  Sie k√∂nnen entweder vollst√§ndig offen oder teilweise oder vollst√§ndig vertraulich sein.  Letzteres bedeutet, dass externe Beobachter die Bedingungen intelligenter Vertr√§ge nicht sehen.  Das Thema Datenschutz ist jedoch sehr umfangreich und sollte getrennt vom aktuellen Artikel betrachtet werden. <br><br>  Im Folgenden werden wir uns mit den ersten drei Kriterien befassen, um das Verst√§ndnis des aktuellen Themas zu verdeutlichen. <br><br><h3>  Intelligente Laufzeitvertr√§ge </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/64d/ffe/abc/64dffeabc36e80f36101529bd8cf1ff3.png" alt="Bild"><br><br>  Die Laufzeit unterscheidet zwischen zentralisierten und dezentralisierten Smart Contract-Plattformen.  Bei zentralisierten digitalen Vertr√§gen wird ein Dienst verwendet, bei dem nur ein Validator vorhanden ist und m√∂glicherweise ein Sicherungs- und Wiederherstellungsdienst vorhanden ist, der ebenfalls zentral verwaltet wird.  Es gibt eine Datenbank, in der alle erforderlichen Informationen zum Festlegen der Bedingungen des Smart Contract und zur Verteilung des Werts gespeichert sind, der in dieser Datenbank des Dienstes ber√ºcksichtigt wird.  Ein solcher zentralisierter Dienst hat einen Kunden, der Bedingungen f√ºr bestimmte Anforderungen festlegt und solche Vertr√§ge verwendet.  Aufgrund der Tatsache, dass die Plattform zentralisiert ist, sind Authentifizierungsmechanismen m√∂glicherweise weniger zuverl√§ssig als in Kryptow√§hrungen. <br><br>  Als Beispiel k√∂nnen Sie Mobilfunkanbieter (verschiedene Mobilfunkbetreiber) verwenden.  Angenommen, ein bestimmter Betreiber verfolgt den Datenverkehr auf seinen Servern zentral, der in verschiedenen Formaten √ºbertragen werden kann, z. B. in Form von Sprachanrufen, SMS, mobilem Internetverkehr und nach verschiedenen Standards, und verfolgt auch die Gelder auf den Benutzerguthaben.  Dementsprechend kann ein Mobilfunkanbieter Vertr√§ge zur Abrechnung der erbrachten Dienste und ihrer Zahlung zu unterschiedlichen Bedingungen abschlie√üen.  In diesem Fall k√∂nnen Bedingungen wie "Senden Sie eine SMS mit diesem und jenem Code an diese und jene Nummer und Sie erhalten solche und solche Verkehrsverteilungsbedingungen" leicht festgelegt werden. <br><br>  Ein weiteres Beispiel kann angef√ºhrt werden: traditionelle Banken mit fortschrittlicher Internetbanking-Funktionalit√§t und sehr einfachen Vertr√§gen wie regelm√§√üigen Zahlungen, automatischer Umwandlung eingehender Zahlungen, automatischem Zinsabzug auf einem bestimmten Konto usw. <br><br>  Wenn es sich um intelligente Vertr√§ge mit einer dezentralen Laufzeit handelt, haben wir eine Gruppe von Validatoren.  Im Idealfall kann jeder √ºberhaupt ein Validator werden.  Aufgrund des Datenbanksynchronisationsprotokolls und der Konsensbildung verf√ºgen wir √ºber eine gemeinsame Datenbank, in der jetzt alle Transaktionen mit streng beschriebenen Vertr√§gen gespeichert werden und nicht einige bedingte Anforderungen, deren Formate sich h√§ufig √§ndern, aber es gibt keine offene Spezifikation.  Hier enthalten Transaktionen Anweisungen zur Ausf√ºhrung eines Vertrags gem√§√ü strengen Spezifikationen.  Diese Spezifikation ist offen und daher k√∂nnen Plattformbenutzer selbst intelligente Vertr√§ge pr√ºfen und validieren.  Hier sehen wir, dass dezentrale Plattformen in Bezug auf Unabh√§ngigkeit und Fehlertoleranz den zentralisierten Plattformen √ºberlegen sind, ihr Design und ihre Wartung jedoch viel komplizierter sind. <br><br><h3>  Intelligente Vertr√§ge auf dem Weg zur Festlegung und Erf√ºllung von Bedingungen </h3><br>  Jetzt werden wir genauer analysieren, wie sich intelligente Vertr√§ge in der Art und Weise unterscheiden k√∂nnen, wie sie definiert und erf√ºllt werden.  Hier achten wir auf intelligente Vertr√§ge, die willk√ºrlich programmiert und Turing-vollst√§ndig sind.  Mit einem Turing-Complete-Smart-Vertrag k√∂nnen Sie nahezu jeden Algorithmus als Bedingung f√ºr die Vertragserf√ºllung angeben: Registerzyklen, eine Art von Wahrscheinlichkeitsberechnungsfunktionen und dergleichen bis hin zu Ihren eigenen elektronischen Signaturalgorithmen.  In diesem Fall meinen wir eine wirklich willk√ºrliche Schreibweise der Logik. <br><br>  Sie w√§hlen auch willk√ºrliche intelligente Vertr√§ge aus, die laut Turing jedoch nicht vollst√§ndig sind.  Dazu geh√∂ren Bitcoin und Litecoin mit einem eigenen Skript.  Dies bedeutet, dass es m√∂glich ist, nur bestimmte Operationen in einer beliebigen Reihenfolge zu verwenden, aber es ist nicht mehr m√∂glich, Schleifen und benutzerdefinierte Algorithmen zu schreiben. <br><br>  Dar√ºber hinaus gibt es solche Smart Contract-Plattformen, die vordefinierte Smart Contracts implementieren.  Dazu geh√∂ren Bitshares und Steemit.  Bitshares verf√ºgt √ºber eine Reihe intelligenter Vertr√§ge f√ºr den Handel, die Verwaltung von Konten, die Verwaltung der Plattform selbst und ihrer Parameter.  Steemit ist eine √§hnliche Plattform, konzentriert sich jedoch nicht mehr auf die Ausgabe von Token und den Handel wie Bitshares, sondern auf das Bloggen, d. H. Es speichert und verarbeitet Inhalte dezentral. <br><br>  Zu den willk√ºrlich abgeschlossenen Vertr√§gen geh√∂ren die Plattformen Ethereum und RootStock, die sich noch in der Entwicklung befinden.  Daher werden wir uns weiter mit der intelligenten Vertragsplattform von Ethereum befassen. <br><br><h3>  Intelligente Vertr√§ge nach Initiierungsmethode </h3><br>  Durch die Initiierungsmethode k√∂nnen intelligente Vertr√§ge auch in mindestens zwei Gruppen unterteilt werden: automatisiert und manuell (nicht automatisiert).<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist typisch f√ºr automatisierte Transaktionen, dass der Smart-Vertrag mit allen bekannten Parametern und dem Einsetzen von Bedingungen vollst√§ndig automatisch ausgef√ºhrt wird, dh es m√ºssen keine zus√§tzlichen Transaktionen gesendet und f√ºr jede nachfolgende Ausf√ºhrung eine zus√§tzliche Provision ausgegeben werden. Die Plattform selbst verf√ºgt √ºber alle Daten, um zu berechnen, wie der Smart-Vertrag endet. Die Logik dort ist nicht willk√ºrlich, sondern vorbestimmt, und all dies ist vorhersehbar. Das hei√üt, Sie k√∂nnen im Voraus die Komplexit√§t des intelligenten Vertrags beurteilen, eine konstante Provision daf√ºr verwenden und alle Prozesse f√ºr seine Implementierung sind effizienter.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei intelligenten Vertr√§gen, die willk√ºrlich programmiert werden, wird die Ausf√ºhrung nicht automatisiert. </font><font style="vertical-align: inherit;">Um einen solchen intelligenten Vertrag zu initiieren, m√ºssen Sie praktisch bei jedem Schritt eine neue Transaktion erstellen, die die n√§chste Ausf√ºhrungsphase oder die n√§chste Methode des intelligenten Vertrags aufruft, die entsprechende Provision zahlen und auf die Best√§tigung der Transaktion warten. </font><font style="vertical-align: inherit;">Die Ausf√ºhrung kann erfolgreich abgeschlossen werden oder nicht, da der Smart Contract Code willk√ºrlich ist und einige unvorhersehbare Momente auftreten k√∂nnen, wie z. B. ein ewiger Zyklus, das Fehlen einiger Parameter und Argumente, unverarbeitete au√üergew√∂hnliche Momente usw.</font></font><br><br><h2> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ethereum-Konten</font></font></b> </h2><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Arten von Ethereum-Konten </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns √ºberlegen, welche Konten auf der Ethereum-Plattform vorhanden sein k√∂nnen. Hier gibt es nur zwei Arten von Konten und es gibt keine weiteren Optionen. Der erste Typ hei√üt Benutzerkonto, der zweite ist das Vertragskonto. Mal sehen, wie sie sich unterscheiden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Benutzerkonto wird nur mit dem privaten Schl√ºssel der elektronischen Signatur verwaltet. Der Kontoinhaber generiert sein Schl√ºsselpaar f√ºr die elektronische Signatur mit dem ECDSA-Algorithmus (Elliptic Curve Digital Signature Algorithm). Nur die mit diesem Schl√ºssel signierten Transaktionen k√∂nnen den Status dieses Kontos √§ndern.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr das Smart Contract-Konto gibt es eine separate Logik. </font><font style="vertical-align: inherit;">Sie kann nur mit Hilfe eines vorgegebenen Programmcodes gesteuert werden, der das Verhalten des Smart Contract vollst√§ndig bestimmt: Wie wird er unter bestimmten Umst√§nden seine M√ºnzen verwalten, auf Initiative des Benutzers und unter welchen zus√§tzlichen Bedingungen werden diese M√ºnzen verteilt? </font><font style="vertical-align: inherit;">Wenn die Entwickler im Programmcode einige Punkte nicht angeben, k√∂nnen Probleme auftreten. </font><font style="vertical-align: inherit;">Beispielsweise kann ein intelligenter Vertrag einen bestimmten Status erhalten, in dem er die Einleitung einer weiteren Ausf√ºhrung von keinem der Benutzer akzeptiert. </font><font style="vertical-align: inherit;">In diesem Fall werden die M√ºnzen tats√§chlich eingefroren, da der Smart-Vertrag keinen Ausweg aus diesem Zustand bietet.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> So erstellen Sie Konten in Ethereum </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei einem Benutzerkonto generiert der Eigent√ºmer unabh√§ngig ein Schl√ºsselpaar √ºber ECDSA. Es ist wichtig zu beachten, dass Ethereum f√ºr die elektronische Signatur genau denselben Algorithmus und genau dieselbe elliptische Kurve wie Bitcoin verwendet, die Adresse jedoch etwas anders berechnet wird. Hier wird das Ergebnis des doppelten Hashing nicht mehr wie bei Bitcoin angewendet, sondern es wird ein einmaliges Hashing durch die Keccak-Funktion auf einer L√§nge von 256 Bit bereitgestellt. Die niedrigstwertigen Bits werden vom empfangenen Wert abgeschnitten, n√§mlich die 160 niedrigstwertigen Bits des Ausgabewerts der Hash-Funktion. Als Ergebnis erhalten wir die Adresse in Ethereum. Tats√§chlich dauert es 20 Bytes.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachten Sie, dass die Kontokennung in Ethereum im Gegensatz zu Bitcoin und vielen anderen Systemen, bei denen die Adresse im Basisnummernsystem 58 mit einer zus√§tzlichen Pr√ºfsumme codiert ist, ohne Verwendung einer Pr√ºfsumme hexadezimal codiert wird. Dies bedeutet, dass Sie sorgf√§ltig mit Kontokennungen in Ethereum arbeiten m√ºssen: Selbst ein Fehler in der Kennung f√ºhrt garantiert zum Verlust von M√ºnzen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt eine wichtige Funktion, die darin besteht, dass ein Benutzerkonto auf der allgemeinen Datenbankebene zu dem Zeitpunkt erstellt wird, zu dem er die erste eingehende Zahlung akzeptiert.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt einen v√∂llig anderen Ansatz f√ºr die Erstellung eines intelligenten Vertragskontos. Zun√§chst schreibt einer der Benutzer den Quellcode des Smart Contract. Anschlie√üend wird der Code durch einen speziellen Compiler f√ºr die Ethereum-Plattform geleitet und erh√§lt Bytecode f√ºr die virtuelle Ethereum-Maschine. Der empfangene Bytecode wird in ein spezielles Transaktionsfeld gestellt. Es wird im Namen des Initiatorkontos authentifiziert. Dar√ºber hinaus ist diese Transaktion √ºber das Netzwerk verteilt und hostet den Smart Contract Code. Die Provision f√ºr die Transaktion und dementsprechend f√ºr die Ausf√ºhrung des Vertrages wird vom Kontostand des Initiators abgezogen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jeder Smart-Vertrag enth√§lt notwendigerweise einen eigenen Konstruktor (dieses Vertrags). </font><font style="vertical-align: inherit;">Es kann leer sein oder Inhalt haben. </font><font style="vertical-align: inherit;">Nachdem der Konstruktor ausgef√ºhrt wurde, wird eine Smart Contract-Kontokennung erstellt, mit der Sie M√ºnzen senden, bestimmte Methoden des Smart Contract aufrufen usw. k√∂nnen.</font></font><br><br><h2> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ethereum-Transaktionsstruktur</font></font></b> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um dies klarer zu machen, werden wir beginnen, die Struktur der Ethereum-Transaktion und den Beispiel-Smart-Vertragscode zu √ºberpr√ºfen. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/2cf/562/c11/2cf562c11f33cc0ed594c935925a1fad.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Ethereum-Transaktion besteht aus mehreren Feldern. Die erste dieser Nonce ist eine bestimmte Transaktionsnummer in Bezug auf das Konto selbst, die es verteilt und dessen Autor ist. Dies ist erforderlich, um das Doppelte von Transaktionen zu unterscheiden, dh um den Fall auszuschlie√üen, dass dieselbe Transaktion zweimal akzeptiert wird. Durch die Verwendung eines Bezeichners hat jede Transaktion einen eindeutigen Hashwert. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Darauf folgt ein Feld wie der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gaspreis</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies ist der Preis, zu dem die Basisw√§hrung von Ethereum in Gas umgerechnet wird, der f√ºr die Ausf√ºhrung des Smart-Vertrags und die Zuweisung der Ressource der virtuellen Maschine bezahlt wird.</font></font> Was bedeutet das? <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Bitcoin werden Provisionen direkt von der Basisw√§hrung - Bitcoin selbst - bezahlt. Dies ist dank eines einfachen Mechanismus zur Berechnung m√∂glich: Wir zahlen streng die Datenmenge, die in der Transaktion enthalten ist. In Ethereum ist die Situation komplizierter, da es sehr schwierig ist, von der Menge der Transaktionsdaten auszugehen. Hier kann die Transaktion noch Programmcode enthalten, der auf der virtuellen Maschine ausgef√ºhrt wird, und jede Operation der virtuellen Maschine kann eine andere Komplexit√§t aufweisen. Es gibt auch Operationen, die Speicher f√ºr Variablen zuweisen. Sie haben ihre eigene Komplexit√§t, von der die Zahlung f√ºr jede Operation abh√§ngt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Kosten f√ºr jede Operation in Gas√§quivalenten sind konstant. Es wird speziell eingef√ºhrt, um die konstanten Kosten jeder Operation zu bestimmen. Abh√§ngig von der Netzlast √§ndert sich der Gaspreis, dh der Koeffizient, nach dem die Basisw√§hrung zur Zahlung der Provision in diese Hilfseinheit umgerechnet wird.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt noch eine weitere Funktion der Transaktion in Ethereum: Der Bytecode, den sie zur Ausf√ºhrung in der virtuellen Maschine enth√§lt, wird ausgef√ºhrt, bis sie mit einem bestimmten Ergebnis endet (Erfolg-Fehler) oder bis eine bestimmte Anzahl von M√ºnzen zugewiesen ist eine Provision zahlen. Um die Situation zu vermeiden, dass im Falle eines Fehlers alle M√ºnzen auf Provision vom Konto des Absenders ausgegeben wurden (zum Beispiel wurde in der virtuellen Maschine eine Art ewiger Zyklus gestartet), existiert das folgende Feld - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Startgas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (es wird oft als Gaslimit bezeichnet) - es definiert Die maximale Anzahl von M√ºnzen, die der Absender bereit ist, f√ºr eine bestimmte Transaktion auszugeben. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das n√§chste Feld hei√üt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zieladresse</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dies schlie√üt die Adresse des Empf√§ngers von M√ºnzen oder die Adresse eines bestimmten Smart-Vertrags ein, dessen Methoden aufgerufen werden. Danach folgt das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wertefeld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in das die Anzahl der M√ºnzen eingegeben wird, die an die Zieladresse gesendet werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als n√§chstes folgt ein interessantes Feld namens </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das zur gesamten Struktur passt. Dies ist kein separates Feld, sondern die gesamte Struktur, in der der Code f√ºr die virtuelle Maschine definiert ist. Hier k√∂nnen Sie beliebige Daten einf√ºgen - hierf√ºr gibt es separate Regeln. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und das letzte Feld hei√üt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Signatur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es enth√§lt gleichzeitig sowohl die elektronische Signatur des Autors dieser Transaktion als auch den √∂ffentlichen Schl√ºssel, mit dem diese Signatur √ºberpr√ºft wird. </font><font style="vertical-align: inherit;">√úber den √∂ffentlichen Schl√ºssel k√∂nnen Sie die Absenderkonto-ID f√ºr diese Transaktion abrufen, dh das Absenderkonto im System selbst eindeutig identifizieren. </font><font style="vertical-align: inherit;">Durch die Struktur der Transaktion haben wir die Hauptsache herausgefunden.</font></font><br><br><h2> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel f√ºr einen Smart Contract Code f√ºr Solidit√§t</font></font></b> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schauen wir uns nun anhand eines Beispiels den einfachsten intelligenten Vertrag genauer an. </font></font><br><br><pre><code class="javascript hljs">contract Bank { address owner; mapping(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">address</span></span></span><span class="hljs-function"> =&gt;</span></span> uint) balances; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bank</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ owner = msg.sender; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deposit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">payable</span></span></span><span class="hljs-function"> </span></span>{ balances[msg.sender] += msg.value; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withdraw</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">uint amount</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (balances[msg.sender] &gt;= amount) { balances[msg.sender] -= amount; msg.sender.transfer(amount); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMyBalance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">view</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returns</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">uint</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> balances[msg.sender]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (msg.sender == owner) selfdestruct(owner); } }</code> </pre> <br>  Oben finden Sie einen vereinfachten Quellcode, der Benutzerm√ºnzen enthalten und bei Bedarf zur√ºckgeben kann. <br><br>  Es gibt also einen Bank-Smart-Vertrag, der die folgenden Funktionen ausf√ºhrt: Er sammelt M√ºnzen auf seinem Guthaben, dh wenn eine Transaktion best√§tigt und ein solcher Smart-Vertrag platziert wird, wird ein neues Konto erstellt, das M√ºnzen auf seinem Guthaben enthalten kann.  es erinnert sich an Benutzer und die Verteilung von M√ºnzen zwischen ihnen;  Es gibt verschiedene Methoden zum Verwalten von Guthaben, dh es ist m√∂glich, das Guthaben des Benutzers aufzuf√ºllen, abzuheben und zu √ºberpr√ºfen. <br><br>  Lassen Sie uns jede Zeile des Quellcodes durchgehen.  Dieser Vertrag enth√§lt konstante Felder.  Einer von ihnen mit dem Adresstyp hei√üt Eigent√ºmer.  Hier merkt sich der Vertrag die Adresse des Benutzers, der diesen intelligenten Vertrag erstellt hat.  Ferner gibt es eine dynamische Struktur, die die Entsprechung zwischen Benutzeradressen und Salden beibeh√§lt. <br><br>  Danach folgt die Bankmethode - sie wird als Vertrag bezeichnet.  Dementsprechend ist dies sein Konstruktor.  Hier wird der Eigent√ºmervariablen die Adresse der Person zugewiesen, die diesen Smart-Vertrag im Netzwerk ver√∂ffentlicht hat.  Dies ist das einzige, was in diesem Konstruktor passiert.  Das hei√üt, msg sind in diesem Fall genau die Daten, die zusammen mit der Transaktion, die den gesamten Code f√ºr diesen Vertrag enth√§lt, an die virtuelle Maschine √ºbertragen wurden.  Dementsprechend ist msg.sender der Autor dieser Transaktion, die diesen Code hostet.  Er wird der Eigent√ºmer des Smart-Vertrags sein. <br><br>  Mit der Einzahlungsmethode kann eine Transaktion eine bestimmte Anzahl von M√ºnzen auf ein Vertragskonto √ºberweisen.  In diesem Fall bel√§sst der intelligente Vertrag, der diese M√ºnzen erh√§lt, sie in seiner Bilanz, schreibt jedoch an die Bilanzstruktur, wer genau der Absender dieser M√ºnzen war, um zu wissen, wem sie geh√∂ren. <br><br>  Die n√§chste Methode hei√üt Abheben und erfordert einen Parameter - die Anzahl der M√ºnzen, die jemand von dieser Bank abheben m√∂chte.  Hier wird √ºberpr√ºft, ob auf dem Guthaben des Benutzers, der diese Methode aufruft, gen√ºgend M√ºnzen vorhanden sind, um sie zu senden.  Wenn es genug davon gibt, gibt der Smart-Vertrag selbst diese Menge an M√ºnzen an den Anrufer zur√ºck. <br><br>  Als n√§chstes wird die Methode zum √úberpr√ºfen des aktuellen Kontostands des Benutzers beschrieben.  Wer diese Methode aufruft, wird verwendet, um dieses Guthaben im Smart-Vertrag zu erhalten.  Es ist erw√§hnenswert, dass der Modifikator dieser Methode view ist.  Dies bedeutet, dass die Methode selbst die Variablen ihrer Klasse in keiner Weise √§ndert und tats√§chlich nur eine Lesemethode ist.  Es wird keine separate Transaktion zum Aufrufen dieser Methode erstellt, es wird keine Provision gezahlt, und alle Berechnungen werden lokal durchgef√ºhrt. Danach erh√§lt der Benutzer das Ergebnis. <br><br>  Die Kill-Methode wird ben√∂tigt, um den Status eines intelligenten Vertrags zu zerst√∂ren.  Und hier wird eine zus√§tzliche Pr√ºfung geschrieben, ob der Aufrufer dieser Methode der Eigent√ºmer dieses Vertrages ist.  Wenn dies der Fall ist, zerst√∂rt sich der Vertrag selbst und die Zerst√∂rungsfunktion akzeptiert einen Parameter - die Kontokennung, an die der Vertrag alle auf seinem Kontostand verbleibenden M√ºnzen sendet.  In diesem Fall gehen die restlichen M√ºnzen automatisch an die Adresse des Vertragsinhabers. <br><br><h2>  <b>Wie funktioniert ein vollst√§ndiger Ethereum-Netzwerkknoten?</b> </h2><br>  Lassen Sie uns einen schematischen Blick darauf werfen, wie diese intelligenten Vertr√§ge auf der Ethereum-Plattform ausgef√ºhrt werden und wie ein vollst√§ndiger Netzwerkknoten funktioniert. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/10b/d25/63a/10bd2563a30d8284e5498e774e4abaf9.png" alt="Bild"><br><br>  Ein vollst√§ndiger Ethereum-Netzwerkknoten muss mindestens vier Module haben. <br>  Das erste ist, wie bei jedem dezentralen Protokoll, das P2P-Netzwerkmodul - ein Modul f√ºr die Netzwerkverbindung und die Arbeit mit anderen Knoten, bei dem Bl√∂cke, Transaktionen und Informationen √ºber andere Knoten ausgetauscht werden.  Dies ist eine traditionelle Komponente f√ºr alle dezentralen Kryptow√§hrungen. <br><br>  Au√üerdem haben wir ein Modul zum Speichern von Blockchain-Daten, Verarbeiten, Ausw√§hlen eines Priorit√§tszweigs, Erg√§nzen von Bl√∂cken, Entkoppeln von Bl√∂cken, √úberpr√ºfen dieser Bl√∂cke usw. <br><br>  Das dritte Modul hei√üt EVM (Ethereum Virtual Machine) - dies ist die virtuelle Maschine, die Bytecode aus der Ethereum-Transaktion akzeptiert.  Dieses Modul nimmt den aktuellen Status eines bestimmten Kontos auf und √§ndert seinen Status basierend auf dem empfangenen Bytecode.  Die Version der virtuellen Maschine auf jedem der Netzwerkknoten muss identisch sein.  Die Berechnungen auf jedem der Ethereum-Knoten sind genau gleich, erfolgen jedoch in einer asynchronen Reihenfolge: Jemand √ºberpr√ºft und akzeptiert diese Transaktion fr√ºher, dh er f√ºhrt den gesamten darin enthaltenen Code aus und sp√§ter jemand.  Dementsprechend wird beim Erstellen einer Transaktion diese an das Netzwerk verteilt, die Knoten akzeptieren sie und zum Zeitpunkt der √úberpr√ºfung wird genau wie bei der Ausf√ºhrung von Bitcoin Script in Bitcoin der Bytecode der virtuellen Maschine hier ausgef√ºhrt. <br><br>  Eine Transaktion gilt als √ºberpr√ºft, wenn der gesamte darin enthaltene Code ausgef√ºhrt wurde, ein neuer Status f√ºr ein bestimmtes Konto generiert und gespeichert wurde, bis klar war, ob diese Transaktion angewendet wurde oder nicht.  Wenn die Transaktion angewendet wird, gilt dieser Status nicht nur als abgeschlossen, sondern bereits als relevant.  Es gibt eine Datenbank, in der der Status jedes Kontos f√ºr jeden Host gespeichert ist.  Aufgrund der Tatsache, dass alle Berechnungen auf dieselbe Weise ablaufen und der Status der Blockchain derselbe ist, ist die Datenbank mit dem Status aller Konten auch f√ºr jeden Knoten gleich. <br><br><h2>  <b>Mythen und Grenzen intelligenter Vertr√§ge</b> </h2><br>  Zu den Einschr√§nkungen, die f√ºr Ethereum-√§hnliche Smart Contract-Plattformen bestehen, kann Folgendes angef√ºhrt werden: <br><br><ul><li>  Codeausf√ºhrung; </li><li>  Speicher zuweisen; </li><li>  Blockchain-Daten; </li><li>  Zahlungen senden; </li><li>  neuen Vertrag erstellen; </li><li>  andere Vertr√§ge anrufen. </li></ul><br>  Schauen wir uns die Einschr√§nkungen an, die einer virtuellen Maschine auferlegt werden, und zerstreuen dementsprechend einige Mythen √ºber intelligente Vertr√§ge.  Auf einer virtuellen Maschine, die sich nicht nur in Ethereum, sondern auch auf √§hnlichen Plattformen befinden kann, k√∂nnen Sie wirklich beliebige logische Operationen ausf√ºhren, dh Code schreiben, und dieser wird dort ausgef√ºhrt. Sie k√∂nnen zus√§tzlich Speicher zuweisen.  Die Provision wird jedoch f√ºr jede Operation und f√ºr jede zus√§tzlich zugewiesene Speichereinheit separat gezahlt. <br><br>  Ferner kann die virtuelle Maschine Daten aus der Blockchain-Datenbank lesen, um diese Daten als Ausl√∂ser f√ºr die Ausf√ºhrung der einen oder anderen Logik intelligenter Vertr√§ge zu verwenden.  Eine virtuelle Maschine kann Transaktionen erstellen und senden, neue Vertr√§ge erstellen und Methoden anderer intelligenter Vertr√§ge aufrufen, die bereits im Netzwerk ver√∂ffentlicht wurden: vorhanden, verf√ºgbar usw. <br><br>  Der h√§ufigste Mythos ist, dass intelligente Vertr√§ge von Ethereum Informationen aus beliebigen Internetressourcen unter ihren eigenen Bedingungen verwenden k√∂nnen.  Die Wahrheit ist, dass die virtuelle Maschine keine Netzwerkanforderung an eine externe Informationsquelle im Internet senden kann. Das hei√üt, es ist unm√∂glich, einen solchen intelligenten Vertrag zu schreiben, der den Wert zwischen den Benutzern verteilt, je nachdem, wie das Wetter auf der Stra√üe ist, oder Wer hat in einer Meisterschaft gewonnen oder basierend auf einem anderen Vorfall in der Au√üenwelt, weil Informationen √ºber diese Vorf√§lle einfach nicht in der Datenbank der Plattform selbst enthalten sind.  Das hei√üt, es gibt nichts in der Blockchain dar√ºber.  Wenn es dort nicht angezeigt wird, kann die virtuelle Maschine diese Daten nicht als Ausl√∂ser verwenden. <br><br><h2>  <b>Ethereum Nachteile</b> </h2><br>  Lassen Sie uns die wichtigsten auflisten.  Der erste Nachteil besteht darin, dass es beim Entwerfen, Entwickeln und Testen intelligenter Vertr√§ge in Ethereum einige Schwierigkeiten gibt (Ethereum verwendet die Solidity-Sprache zum Schreiben intelligenter Vertr√§ge).  In der Tat zeigt die Praxis, dass ein sehr gro√üer Prozentsatz aller Fehler zum menschlichen Faktor geh√∂rt.  Dies gilt tats√§chlich f√ºr bereits geschriebene Ethereum-Smart-Vertr√§ge mit einer Komplexit√§t von mittel oder h√∂her.  Wenn bei einfachen intelligenten Vertr√§gen die Fehlerwahrscheinlichkeit gering ist, treten bei komplexen intelligenten Vertr√§gen sehr h√§ufig Fehler auf, die zum Diebstahl von Geldern, zu deren Einfrieren, zur Zerst√∂rung intelligenter Vertr√§ge auf unerwartete Weise usw. f√ºhren. Viele solcher F√§lle sind bereits bekannt. <br><br>  Der zweite Nachteil ist, dass die virtuelle Maschine selbst nicht perfekt ist, da sie auch von Menschen geschrieben wird.  Es kann beliebige Befehle ausf√ºhren, und dies ist eine Sicherheitsanf√§lligkeit: Eine Reihe von Befehlen kann auf eine bestimmte Weise konfiguriert werden, was zu unvorhergesehenen Konsequenzen f√ºhrt.  Dies ist ein sehr komplexer Bereich, aber es gibt bereits mehrere Studien, die zeigen, dass diese Sicherheitsl√ºcken in der aktuellen Version des Ethereum-Netzwerks bestehen und zum Scheitern vieler intelligenter Vertr√§ge f√ºhren k√∂nnen. <br><br>  Eine weitere gro√üe Schwierigkeit kann als Nachteil angesehen werden.  Es besteht in der Tatsache, dass es auf praktische oder technische Weise m√∂glich ist, zu dem Schluss zu kommen, dass Sie, wenn Sie den Bytecode des Vertrags kompilieren, der auf der virtuellen Maschine ausgef√ºhrt wird, eine bestimmte Reihenfolge von Operationen bestimmen k√∂nnen.  Wenn diese Vorg√§nge zusammen ausgef√ºhrt werden, wird die virtuelle Maschine sehr stark belastet und √ºberproportional zu der Provision verlangsamt, die f√ºr diese Vorg√§nge gezahlt wurde. <br><br>  In der Vergangenheit gab es bereits eine solche Phase der Ethereum-Entwicklung, in der viele Leute, die den Betrieb der virtuellen Maschine im Detail verstanden hatten, solche Schwachstellen fanden.  Tats√§chlich zahlten Transaktionen eine sehr kleine Provision, verlangsamten jedoch praktisch das gesamte Netzwerk.  Diese Probleme sind sehr schwer zu l√∂sen, da Sie sie ermitteln m√ºssen, zweitens den Preis f√ºr die Durchf√ºhrung dieser Vorg√§nge anpassen und drittens eine harte Verzweigung durchf√ºhren m√ºssen, dh alle Netzwerkknoten auf eine neue Version der Software aktualisieren und dann gleichzeitige Aktivierung dieser √Ñnderungen. <br><br>  In Bezug auf Ethereum wurde viel geforscht, es wurden viele praktische Erfahrungen gesammelt: sowohl positive als auch negative, aber es gibt immer noch Schwierigkeiten und Schwachstellen, die irgendwie noch bek√§mpft werden m√ºssen. <br><br>  Wenn der thematische Teil des Artikels abgeschlossen ist, wenden wir uns den h√§ufig auftretenden Fragen zu. <br><br><h2>  <b>H√§ufig gestellte Fragen</b> </h2><br>  <i>- Wenn alle Parteien des aktuellen Smart-Vertrags die Bedingungen √§ndern m√∂chten, k√∂nnen sie diesen Smart-Vertrag mit Mehrfachsignatur k√ºndigen und dann einen neuen Smart-Vertrag mit aktualisierten Bedingungen f√ºr seine Implementierung erstellen?</i> <br><br>  Hier wird die Antwort zweifach sein.  Warum?  Da ein intelligenter Vertrag einerseits einmal festgelegt wird und keine √Ñnderungen impliziert, kann er andererseits eine vordefinierte Logik haben, die unter bestimmten Bedingungen eine vollst√§ndige oder teilweise √Ñnderung vorsieht.  Das hei√üt, wenn Sie etwas in Ihrem Smart-Vertrag √§ndern m√∂chten, m√ºssen Sie die Bedingungen festlegen, unter denen Sie diese Bedingungen aktualisieren k√∂nnen.  Dementsprechend kann eine Vertragsverl√§ngerung nur so umsichtig organisiert werden.  Aber auch hier kann es zu Problemen kommen: Machen Sie einen Fehler und erhalten Sie die entsprechende Sicherheitsl√ºcke.  Daher m√ºssen solche Dinge sehr detailliert und gr√ºndlich entworfen und getestet werden. <br><br>  <i>- Und wenn der Mediator eine Verschw√∂rung mit einer der beteiligten Parteien eingeht: Treuhandkonto oder ein kluger Vertrag?</i>  <i>Ist in einem intelligenten Vertrag ein Mediator erforderlich?</i> <br><br>  Ein Mediator ist in einem intelligenten Vertrag nicht erforderlich.  Es kann nicht sein.  Wenn der Mediator im Falle eines Treuhandvertrags eine Verschw√∂rung von einer der Parteien eingeht, dann verliert dieses System seinen gesamten Wert.  Daher werden Mediatoren so ausgew√§hlt, dass ihnen alle an diesem Prozess beteiligten Parteien gleichzeitig vertrauen.  Dementsprechend √ºbertragen Sie einfach keine M√ºnzen an eine Multisignaturadresse mit dem Mediator, dem Sie nicht vertrauen. <br><br>  <i>- Ist es m√∂glich, viele verschiedene Token von einer Adresse an verschiedene Zieladressen zu √ºbertragen, z. B. Austauschadressen, bei denen diese Token in einer Ethereum-Transaktion gehandelt werden?</i> <br><br>  Dies ist eine gute Frage und betrifft das Ethereum-Transaktionsmodell und seine Unterschiede zum Bitcoin-Modell.  Und der Unterschied ist dramatisch.  Wenn Sie im Ethereum-Transaktionsmodell einfach M√ºnzen √ºbertragen, werden diese nur von einer Adresse an eine andere √ºbertragen, ohne dass sich der von Ihnen angegebene Betrag √§ndert.  Mit anderen Worten, dies ist kein Modell f√ºr nicht ausgegebene Ausgaben (UTXO), sondern ein Modell f√ºr Konten und entsprechende Salden.  Es ist theoretisch m√∂glich, mit einer Transaktion mehrere verschiedene Token gleichzeitig zu senden, wenn Sie einen kniffligen Smart-Vertrag schreiben, aber dennoch viele Transaktionen durchf√ºhren, einen Vertrag erstellen, dann Token und M√ºnzen darauf √ºbertragen und dann die entsprechende Methode aufrufen m√ºssen.  Dies erfordert Aufwand und Zeit, in der Praxis funktioniert dies nicht und alle Zahlungen in Ethereum erfolgen in separaten Transaktionen. <br><br>  <i>- Einer der Mythen √ºber die Ethereum-Plattform ist, dass es unm√∂glich ist, Bedingungen zu beschreiben, die von den Daten einer externen Internetressource abh√§ngen. Was dann?</i> <br><br>  Die L√∂sung besteht darin, dass der intelligente Vertrag selbst ein oder mehrere sogenannte vertrauensw√ºrdige Orakel enthalten kann, die Daten √ºber den Stand der Dinge in der Au√üenwelt sammeln und diese √ºber spezielle Methoden auf intelligente Vertr√§ge √ºbertragen.  Der Vertrag selbst betrachtet die Daten, die er von vertrauensw√ºrdigen Parteien erhalten hat, als wahr.  F√ºr eine h√∂here Zuverl√§ssigkeit w√§hlen sie einfach eine gro√üe Gruppe von Orakeln aus und minimieren das Risiko von Absprachen.  Der Vertrag selbst ber√ºcksichtigt m√∂glicherweise keine Daten von Orakeln, die der Mehrheit widersprechen. <br><br>  Dieses Thema wird in einer der Vorlesungen des Online-Blockchain-Kurses ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einf√ºhrung in intelligente Vertr√§ge</a> ‚Äú behandelt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413231/">https://habr.com/ru/post/de413231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413221/index.html">Bakterien √ºberleben in einem "Reinraum" w√§hrend der Montage von Raumfahrzeugen und fressen Reinigungsprodukte</a></li>
<li><a href="../de413223/index.html">Habra W√∂rterbuch. Teil 1</a></li>
<li><a href="../de413225/index.html">Sicherheitswoche 20: Nichttriviale Cyber-Angriffe</a></li>
<li><a href="../de413227/index.html">Was ist Gott unter Kleidern?</a></li>
<li><a href="../de413229/index.html">Erstellen Sie Caffe in Google Colaboratory: Kostenlose Grafikkarte in der Cloud</a></li>
<li><a href="../de413233/index.html">Der uLogin-Dienst sendet Daten von Formularen (E-Mail, Telefon) an eine Website eines Drittanbieters und schweigt dar√ºber</a></li>
<li><a href="../de413235/index.html">Wetten auf bessere Vorhersagen: Neue Mathematik der Wettervorhersage</a></li>
<li><a href="../de413237/index.html">Facebook bestreitet, dass Ger√§tehersteller dieselben Daten wie Entwickler Alexander Kogan senden</a></li>
<li><a href="../de413239/index.html">Wie man ein Smartphone etwas d√ºmmer macht</a></li>
<li><a href="../de413241/index.html">Abfangen von Funktionen im Linux-Kernel mit ftrace</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>