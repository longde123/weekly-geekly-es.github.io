<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ≥Ô∏è üë®üèΩ‚Äçü§ù‚Äçüë®üèº ü§∞ Deno: O tempo do Node.JS est√° se esgotando? ü§∏üèΩ üõÖ üçß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cerca de 18 meses se passaram desde o lan√ßamento interno de Deno, um lan√ßamento de pr√©-visualiza√ß√£o, v√°rios artigos foram publicados sobre Habr√©, e Ry...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Deno: O tempo do Node.JS est√° se esgotando?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476972/"><p><img src="https://habrastorage.org/webt/ph/0g/t5/ph0gt5rsvagsf2ysoqple3gg7oo.png"></p><br><p>  Cerca de 18 meses se passaram desde o lan√ßamento interno de Deno, um lan√ßamento de pr√©-visualiza√ß√£o, v√°rios artigos foram publicados sobre Habr√©, e Ryan vai a confer√™ncias e fala sobre ele.  No entanto, nunca vi uma an√°lise cuidadosa deste projeto em nenhum lugar - por algum motivo, todos est√£o limitados a traduzir a documenta√ß√£o ... </p><br><p>  Bem, vamos tentar fazer isso agora.  Nos √∫ltimos 5 anos, escrevo no Node.JS e a empresa OneTwoTrip, onde estou trabalhando agora, escreve projetos no n√≥ h√° cerca de 9 anos (sim, escrevi a hist√≥ria de <a href="https://habr.com/ru/post/459206/">9 anos em um mon√≥lito no n√≥</a> ).  Portanto, a an√°lise deve ser boa.  Al√©m disso, eu j√° disse a ele no <a href="https://axept.timepad.ru/event/1110942/">Moscow Node.JS Meetup 10</a> , e foi interessante.  A prop√≥sito, se for mais conveniente para voc√™ ouvir, n√£o ler, <a href="https://youtu.be/4414kjKYekM">poder√°</a> ouvir e assistir <a href="https://youtu.be/4414kjKYekM">aqui</a> .  Meu segundo discurso, eu sou um cara de camisa rosa. </p><a name="habracut"></a><br><p>  Curiosamente, para entender de onde o projeto veio e por que, √© necess√°rio cair no passado.  Ent√£o, lan√ßamos um pouco de plut√¥nio, elevamos as portas do nosso delorean e embarcamos em uma jornada - observe os 10 anos importantes que fizeram do Node.JS a maneira como o vemos agora. </p><br><p><img src="https://habrastorage.org/webt/sv/f7/xa/svf7xamhyfsi4rzxzdkwxlkfum0.jpeg"></p><br><h2 id="vperyod-v-proshloe">  Encaminhar para o passado </h2><br><h3 id="2009">  2009 </h3><br><p>  Ryan Dahl anuncia o Node.JS, <a href="https://www.youtube.com/watch%3Fv%3DztspvPYybIY">aqui</a> est√° <a href="https://www.youtube.com/watch%3Fv%3DztspvPYybIY">ela</a> - a primeira apresenta√ß√£o no JSConf 2009. </p><br><h3 id="2010">  2010 </h3><br><p>  Express, socket.io aparece - os principais tijolos no momento s√£o praticamente qualquer servi√ßo. </p><br><p>  Existem pessoas loucas que realmente escrevem c√≥digo de servidor nisso! </p><br><h3 id="2011">  2011 </h3><br><p>  Caras grandes come√ßam a flertar com o Node.JS - incluindo Uber e Linkedin. </p><br><p>  Vers√£o Npm 1.0. </p><br><p>  O n√≥ come√ßa a trabalhar no Windows. </p><br><h3 id="2012">  2012 </h3><br><p>  Ryan se afasta do desenvolvimento do Node.JS.  <strong>Lembre-se</strong> .  Era 2012.  Portanto, Ryan √© certamente o criador e fez muito pelo ecossistema - mas os pr√≥ximos 7 anos se passaram <strong>sem a</strong> sua participa√ß√£o. </p><br><h3 id="2013">  2013 </h3><br><p>  N√≥ no Paypal, Walmart, eBay. </p><br><p>  Koa aparece - lembra quantas c√≥pias foram quebradas sobre geradores? </p><br><h3 id="2014">  2014 </h3><br><p>  N√≥ na Netflix.  As tentativas est√£o come√ßando a formalizar o projeto em algo mais maduro, com um modelo aberto para gerenciar um conselho consultivo.  H√° uma estagna√ß√£o t√©cnica que leva ao garfo do io.js. </p><br><h3 id="2015">  2015 </h3><br><p>  Trabalhe nos bugs.  A fus√£o do io.js e do Node em √™xtase sob os ausp√≠cios da Node Foundation e do lan√ßamento do N√≥ 4. Devo dizer que esta √© a vers√£o que considero a primeira na qual foi realmente poss√≠vel desenvolver algo.  Se algu√©m escreveu nas vers√µes 0.xx - ent√£o voc√™ se lembra de var, callback hell, v√°rias bibliotecas diferentes para simplificar o trabalho ass√≠ncrono (como step e async. Sim, async n√£o √© apenas async aguardando, mas tamb√©m uma biblioteca npm). </p><br><h3 id="2016">  2016 </h3><br><p>  O incidente com o teclado esquerdo, que ainda √© a l√≠ngua do mal, lembra o ecossistema.  Quantos artigos e ataques.  Bem, odiadores v√£o odiar.  No entanto, li√ß√µes importantes disso foram aprendidas. </p><br><h3 id="2017">  2017 </h3><br><p>  Ano de avan√ßo.  N√£o mencionarei todos os lan√ßamentos do n√≥ e o aumento no n√∫mero de instala√ß√µes de m√≥dulos com npm, no entanto, este ano, o n√∫mero de servi√ßos no Node.JS excedeu 8 milh√µes e o n√∫mero de instala√ß√µes foi de 3 bilh√µes por semana.  Figuras absolutamente c√≥smicas que s√£o dif√≠ceis de imaginar. </p><br><p>  A N-API tamb√©m apareceu e o Node.JS foi novamente bifurcado no Ayo.js.  Uma hist√≥ria muito engra√ßada e instrutiva sobre a SJW - vale a pena um artigo separado, por isso n√£o vou me debru√ßar sobre ela - eu apenas recomendo a leitura quando quiser.  Somente para o prospoiler que o garfo morreu com seguran√ßa. </p><br><h3 id="2018">  2018 </h3><br><p>  A segunda histeria em massa desde o leftpad - agora sobre como o fluxo de eventos rouba bitcoins.  Centenas de posts sobre inseguran√ßa do ecossistema.  Publica√ß√µes do Fantasy sobre como os pacotes npm roubam informa√ß√µes do cart√£o de cr√©dito.  A comunidade est√° pulverizando lama como uma mangueira.  Devo dizer que foi muito √∫til e tamb√©m foram feitas conclus√µes - sobre elas um pouco mais tarde. </p><br><p>  Al√©m disso, Ryan repentinamente explode posts da comunidade sobre o fato de que vale a pena escrever servi√ßos s√©rios no Go, descreve 10 coisas em Node que ele lamenta e anuncia Deno, que resolve todos os problemas. </p><br><h3 id="2019">  2019 </h3><br><p>  Deno vai para a vers√£o pr√©via, v√°rios artigos aparecem no hub e agora voc√™ est√° lendo um deles. </p><br><p><img src="https://habrastorage.org/webt/r2/df/4i/r2df4igff7g0bhkz6a0sl0hq_cs.jpeg"></p><br><h2 id="nazad-v-nastoyaschee">  De volta ao presente </h2><br><p>  Espero que, ap√≥s esse passeio, tenha ficado mais claro que tipo de manchas doloridas o ecossistema tinha e como se desenvolveu - tendo esse contexto, √© muito mais f√°cil entender o que est√° acontecendo agora. </p><br><h2 id="10-veschey-v-nodejs-o-kotoryh-sozhaleet-rayan-dal">  10 coisas que Ryan Dahl lamenta pelo Node.JS </h2><br><p>  Infelizmente, n√£o encontrei de imediato o artigo com a tradu√ß√£o do relat√≥rio, por isso vou list√°-los aqui brevemente, e aqui vou comentar. </p><br><ol><li>  <strong>Falta de apoio √†s promessas no in√≠cio da jornada</strong> .  Sim, teria sido mais simples se Ryan n√£o tivesse cumprido as promessas, considerando-as uma complica√ß√£o extra que n√£o decolou no in√≠cio do desenvolvimento do n√≥.  O tempo perdido para todo esse inferno de retorno de chamada √© certamente uma pena - mas em 2019, todas as bibliotecas s√£s t√™m promessas como interface principal.  Al√©m disso, at√© as bibliotecas do sistema finalmente prometem. </li><li>  <strong>Seguran√ßa de chamadas do sistema e de rede.</strong>  Por um lado - sim, √© bom quando tudo est√° seguro.  Por outro lado, n√£o est√° claro como, a esse respeito, o n√≥ acabou sendo pior do que qualquer outro meio ... </li><li>  <strong>Crie m√≥dulos nativos usando GYP.</strong>  Sim, provavelmente era sup√©rfluo, mas quem poderia saber que o cromo a deixaria.  Mais uma vez - se o cromo se foi, tamb√©m podemos sair .... </li><li>  <strong>Pacote.json excessivo.</strong>  <strong>NPM como um registro de monop√≥lio.</strong>  O argumento sobre o package.json √© um pouco estranho.  Por exemplo, Ryan diz que h√° algum lixo l√° como uma licen√ßa.  Mas se n√£o existisse, como voc√™ poderia descobrir rapidamente as licen√ßas dos m√≥dulos usados ‚Äã‚Äãno seu projeto? ... O argumento sobre o NPM √© mais parecido com a verdade, mas abordaremos isso com mais detalhes posteriormente. </li><li>  <strong>M√≥dulos de n√≥.</strong>  <strong>A resolu√ß√£o complexa de depend√™ncias n√£o funciona como em um navegador.</strong>  Sim est√° certo.  Depend√™ncias est√°veis ‚Äã‚Äãcome√ßaram a ser colocadas sem milagres apenas na vers√£o 4-5 do npm.  Mas o mecanismo funciona e permite que voc√™ fa√ßa coisas incr√≠veis - no momento, tudo bem.  Quanto √† compatibilidade com o navegador, n√£o importa o que voc√™ fa√ßa, ainda haver√° etapas de processamento do c√≥digo, como compila√ß√£o e coleta de pacotes.  Portanto, √© improv√°vel que os m√≥dulos de n√≥s tenham algum significado nesse contexto. </li><li>  <strong>Exigir sem extens√£o e sua incerteza</strong> .  Sim, provavelmente ruim.  Mas n√£o basta mencionar ... </li><li>  <strong>index.js como complica√ß√£o desnecess√°ria.</strong>  Ponto tamb√©m muito trivial e chato para descrever. </li></ol><br><p>  A prop√≥sito, lembre-se, eu disse que Ryan lamenta cerca de 10 coisas, e existem apenas 7 pontos.N√£o √© um erro, eu revi o relat√≥rio dele v√°rias vezes e as resenhas do relat√≥rio.  Ou era uma piada complicada sobre o assunto de processar valores num√©ricos, ou Ryan era t√≠mido demais para citar mais 3 pontos ... </p><br><p>  Mas tudo bem, entendemos os problemas e seguimos em frente.  Logicamente, em Deno, Ryan decidiu se livrar de todos os problemas do Node.JS.  Vamos ver o que aconteceu com ele. </p><br><h2 id="iz-chego-sostoit-deno">  Em que consiste o Deno </h2><br><ol><li>  Deno est√° escrito em Rust. </li><li>  Como um loop de evento, Deno usa Tokio, escrito novamente em Rust. </li><li>  Deno suporta o Typecript fora da caixa. </li><li>  Bem, o c√≥digo √© executado usando o mesmo V8, que capturou o mundo inteiro. </li></ol><br><p>  √Ä primeira vista, parece bom, mas vamos dar uma olhada mais de perto nesses pontos. </p><br><p>  <strong>Ferrugem</strong> .  N√£o, por favor, entenda-me corretamente - acredito que Rust and Go s√£o idiomas maravilhosos e estou sinceramente feliz por eles.  Eles tornam poss√≠vel escrever c√≥digo de baixo n√≠vel mais r√°pido e seguro do que em C ++.  No entanto, h√° uma nuance - na melhor das hip√≥teses, n√£o ser√° mais lenta que a implementa√ß√£o em C ++.  Ent√£o, pessoalmente, n√£o vejo o ponto de escrever um an√°logo completo de cadeias de sistema e um loop de eventos - √© improv√°vel que traga algum benef√≠cio real, pois essas s√£o coisas que em algum momento simplesmente atingem o estado ideal e n√£o s√£o realmente otimizadas. </p><br><p>  <strong>TypeScript</strong>  Mais uma vez - n√£o tenho nada contra o TS.  Um grande n√∫mero de empresas e desenvolvedores o usam, e ele j√° mostrou seu valor.  Mas Deno apenas oculta o transpilador no bin√°rio e o c√≥digo transpilado em diret√≥rios especiais.  Ou seja, tudo √© o mesmo sob o cap√¥, e n√£o h√° benef√≠cio nisso, exceto na est√©tica.  Mas h√° um sinal de menos - a vers√£o do transpiler est√° bem pregada na vers√£o do Deno.  N√£o tenho certeza se isso √© bom - √© f√°cil imaginar uma situa√ß√£o em que voc√™ deseja atualizar o transpiler ou o tempo de execu√ß√£o.  Mas n√£o os dois ao mesmo tempo. </p><br><p>  Ent√£o, enquanto nada saboroso √© vis√≠vel.  Vamos mais longe, veja os principais recursos. </p><br><h2 id="osnovnye-otlichiya-deno-i-nodejs">  As principais diferen√ßas entre Deno e Node.JS </h2><br><h3 id="deno-ne-ispolzuet-npm-net-centralizovannogo-reestra-moduli-importiruyutsya-po-url-net-packagejson">  Deno n√£o usa npm.  N√£o h√° registro central.  M√≥dulos s√£o importados por URL.  No package.json. </h3><br><p>  Ou seja, o c√≥digo se parece com isso: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { test, runIfMain } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"https://deno.land/std/testing/mod.ts"</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { assertEquals } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"https://deno.land/std/testing/asserts.ts"</span></span>;

test(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">t1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  assertEquals(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>, <span class="hljs-string"><span class="hljs-string">"hello"</span></span>);
});
</code></pre><br>
<p>      ,    .        .  ,       .       :</p><br>
<ol>
<li>      .         ,    ,      . .  ,     :<br>
1.1.  ,      ,      .<br>
1.2.    ,       ,    ,       .<br>
1.3.       ,         .       2012 ,  npm  ,  ?     , " "?</li>
<li> ,  .      github, gitlab,    ,       .   .   .  npm , ,  ‚Äî   ,     ?       ‚Äî   .     Entropic, , ,   ‚Äî    .</li>
</ol><br>
<p>     .    ,     -       (       ) ‚Äî   ‚Ä¶        ‚Ä¶    2019? ,    ,   2012   Node.JS   shrinkwrap,   lock file?      ,   ?</p><br>
<p>  ,    URL ‚Äî     ,    ‚Äî     .</p><br>
<h3 id="vse-asinhronnye-operacii-v-deno-vozvraschayut-promise">    Deno  Promise.</h3><br>
<p>  , .   2012      ‚Äî          .        .     -  .</p><br>
<h3 id="deno-vsegda-zavershaet-rabotu-na-uncaught-errors">Deno     Uncaught Errors</h3><br>
<p>      .  Node.JS       .    .</p><br>
<h3 id="ispolzuyutsya-es-modules-a-ne-require"> ES Modules,   require</h3><br>
<p>, ,        .  ,  Node.JS     ES Modules...</p><br>
<h3 id="deno-trebuet-razresheniya-na-rabotu-s-setyu-faylami-i-peremennymi-okruzheniya">Deno      ,    .</h3><br>
<p> !  ‚Ä¶  ‚Äî     allow-read, allow-net, allow-run, allow-env.   - :</p><br>
<pre><code class="bash hljs">deno --allow-read=/etc https://deno.land/std/examples/cat.ts /etc/passwd</code></pre><br>
<p>      :</p><br>
<ol>
<li>        .</li>
<li> ,          --allow-all.</li>
<li>        .      .    ,                ,    .       .   ,     ‚Äî   .</li>
<li>  .    ,     ,      .      .  ,     2019       2012,      ‚Äî        ...</li>
</ol><br>
<h2 id="nashe-vremya-nashi-dni-npm"> .  . NPM.</h2><br>
<p><img src="https://habrastorage.org/webt/zk/gz/ei/zkgzeiqxfwe_gxqhgbndrhi3sem.png"></p><br>
<p>      ,    npm  2012 :</p><br>
<ol>
<li>  .      .</li>
<li>Lock file   .</li>
<li>  .    github, snyk   npm.</li>
<li>    .</li>
<li>  .</li>
<li>       ‚Äî , ,  .</li>
<li>  .</li>
</ol><br>
<p>   npm  ‚Ä¶ ,         .  ,  ,   ‚Ä¶   " ",        ‚Äî facebook, google, microsoft, gitlab‚Ä¶         ,  npm       .</p><br>
<h2 id="podvodya-itogi"> </h2><br>
<p>  :</p><br>
<ol>
<li>Rust ‚Äî  .</li>
<li>TypeScript ‚Äî  .</li>
<li>   URL  NPM ‚Äî    .</li>
<li>  ‚Äî  .</li>
<li>  .   .  .  !</li>
</ol><br>
<p><img src="https://habrastorage.org/webt/qw/v8/qc/qwv8qcrwbqujdxridpefbeet4-0.png"></p><br>
<p>         Deno.     " ,  " ‚Äî ,     ,  Deno   ‚Äî      .</p><br>
<p>     ,    ,    ,     ,       .    Deno  , ,      Moscow Node.JS Meetup ‚Äî       .        ‚Äî ,     -     ?</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt476972/">https://habr.com/ru/post/pt476972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt476948/index.html">Trajet√≥rias qu√¢nticas e o que elas comem</a></li>
<li><a href="../pt476954/index.html">O trabalho n√£o √© um lobo, parte 3. Iniciante - crescer ou sobreviver?</a></li>
<li><a href="../pt476956/index.html">Angular sem zone.js: desempenho m√°ximo</a></li>
<li><a href="../pt476958/index.html">Omega Red + PS1 Emulator = Kojima Genius</a></li>
<li><a href="../pt476970/index.html">EkbDotNet Meeting No. 1 - Yekaterinburg ingressa na comunidade DotNet.Ru</a></li>
<li><a href="../pt476974/index.html">Aprenda Web Design responsivo em 5 minutos</a></li>
<li><a href="../pt476976/index.html">6 erros de falar em p√∫blico em confer√™ncias</a></li>
<li><a href="../pt476980/index.html">O que √© suporte jur√≠dico: recomenda√ß√µes para um advogado de uma empresa de TI</a></li>
<li><a href="../pt476982/index.html">Desenvolvedor em um site remoto - do zero ao her√≥i</a></li>
<li><a href="../pt476984/index.html">Caso da Narcade: desenvolvedores turcos falam sobre localiza√ß√£o de jogos para celular e o mercado turco de jogos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>