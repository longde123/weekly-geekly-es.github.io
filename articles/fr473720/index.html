<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏇🏼 🤘🏽 👋🏻 Deux façons de réaliser des tests unitaires fiables 🚅 👨🏻‍🎓 🐞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On pense que les tests unitaires ne sont pas nécessaires. Que seulement la moitié de la vérité est cachée en eux. Et cette véritable information sur l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Deux façons de réaliser des tests unitaires fiables</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473720/"> On pense que les tests unitaires ne sont pas nécessaires.  Que seulement la moitié de la vérité est cachée en eux.  Et cette véritable information sur le comportement du programme ne sera révélée que lorsque nous les collecterons dans un test d'intégration. <br><br>  Il y a une raison à cela, mais les tests unitaires sont-ils vraiment incomplets et peuvent-ils être rendus plus fiables?  Combien de raisons de leur incomplétude? <br><a name="habracut"></a><br>  Supposons que nous ayons deux composants couverts par le test unitaire, Caller et Callee.  L'appelant appelle Callee avec un argument et utilise en quelque sorte l'objet renvoyé.  Chacun des composants a son propre ensemble de dépendances, que nous absorbons. <br><br>  Combien de scénarios dans lesquels ces composants se comportent de manière inattendue lors de l'intégration? <br><br>  Le premier scénario est un <b>problème externe aux deux composants</b> .  Par exemple, ils dépendent tous deux de l'état de la base de données, de l'autorisation, des variables d'environnement, des variables globales, des cookies, des fichiers, etc.  Juger cela est assez simple, car même dans les très gros programmes, il y a généralement un nombre limité de tels points de discorde. <br><br>  Le problème peut être résolu, évidemment, soit par une refonte avec des dépendances réduites, <br>  ou nous simulons directement une erreur possible dans un scénario de niveau supérieur, c'est-à-dire que nous introduisons le composant CallingStrategy (OffendingCaller, OffendedCallee) {} et simulons le crash de l'appelé et la gestion des erreurs dans CallingStrategy.  Pour cela, les tests d'intégration ne sont pas requis, mais une compréhension est nécessaire que le comportement spécifique de l'un des composants présente un risque pour l'autre composant, et il serait bon d'isoler ce scénario dans un composant. <br><br>  Deuxième scénario: le problème est dans l'interface des objets intégrables, c'est-à-dire  <b>un état inutile d'un des objets s'est infiltré dans un autre</b> . <br><br>  En fait, c'est une faille dans l'interface qui le permet.  La solution au problème est également assez évidente - typage et rétrécissement des interfaces, validation précoce des paramètres. <br><br>  Comme nous pouvons le voir, les deux raisons sont extrêmement courantes, mais il serait bon de dire clairement qu'il n'y en a pas d'autres. <br><br>  Ainsi, si nous vérifions nos classes pour 1) l'état interne et 2) les dépendances externes, nous n'avons aucune raison de douter de la fiabilité des tests unitaires. <br><br>  (Quelque part dans le coin, un programmeur fonctionnel pleure doucement avec les mots «je vous l'ai dit», mais pas à ce sujet pour le moment). <br><br>  Mais nous pouvons simplement oublier ou manquer une sorte de dépendance! <br><br>  Peut être grossièrement estimé.  Supposons qu'il y ait dix scénarios dans chaque composant.  Nous sautons un scénario sur dix.  Par exemple, Callee retourne soudainement null et Caller reçoit soudainement une NullPointerException.  Nous devons faire une erreur deux fois, ce qui signifie que la probabilité de tomber quelque part est de 1/100.  Il est difficile d’imaginer que le scénario d’intégration des deux éléments le prouve.  Pour de nombreux composants appelés séquentiellement dans le test d'intégration, la probabilité d'attraper certaines des erreurs augmente, ce qui signifie que plus la pile du test d'intégration est longue et plus il y a de scénarios, plus elle est justifiée. <br><br>  (Les mathématiques réelles de l'accumulation d'erreurs sont, bien sûr, beaucoup plus compliquées, mais le résultat ne varie pas beaucoup). <br><br>  Dans le processus de réalisation du test d'intégration, cependant, nous pouvons nous attendre à une augmentation significative du bruit provenant des dépendances brisées et au temps considérable consacré à la recherche d'un bogue, ils sont également proportionnels à la longueur de la pile. <br><br>  Autrement dit, il s'avère que <b>des tests d'intégration sont nécessaires si les tests unitaires sont mauvais ou manquants</b> .  Par exemple, lorsque seul un script valide est vérifié dans chaque test unitaire, lorsqu'ils utilisent des interfaces trop larges et n'analysent pas les dépendances générales. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473720/">https://habr.com/ru/post/fr473720/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473708/index.html">Voiture électrique faite maison - tout n'est pas ce que vous pensez</a></li>
<li><a href="../fr473710/index.html">Les principes de documentation et de localisation, ou comment obtenir une bonne localisation à moindre coût</a></li>
<li><a href="../fr473714/index.html">Comment je suis arrivé à la spécification formelle d'un processeur RISC-V en F #</a></li>
<li><a href="../fr473716/index.html">Widgets pilotés par la souris. Glissez et déposez dans la fenêtre</a></li>
<li><a href="../fr473718/index.html">Comment ajouter des chèques à NoVerify sans écrire une seule ligne de code Go</a></li>
<li><a href="../fr473722/index.html">Isolement à distance, anxiété et dépression</a></li>
<li><a href="../fr473726/index.html">Il ne suffit pas de savoir ce que sont Mutex, Semaphore et async / wait. Vous devez tout savoir des quanta</a></li>
<li><a href="../fr473728/index.html">Mise en œuvre typique de la surveillance. Nikolay Sivko</a></li>
<li><a href="../fr473732/index.html">L'histoire de la fraude dans la construction d'un réseau câblé sous l'Arctique pour 1 milliard de dollars</a></li>
<li><a href="../fr473740/index.html">CreateRemoteThread pour Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>