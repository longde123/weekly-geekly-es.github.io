<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¢ ü•ù üë®‚Äç‚öïÔ∏è Adaptador Ethereum blockchain para la plataforma de datos InterSystems IRIS üíÜüèΩ üíî üöé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Blockchain 
 Ahora, cuando escribo este art√≠culo, la tasa de cambio de Bitcoin ha ca√≠do m√°s de 5 veces en relaci√≥n con el valor m√°ximo y cuando dij...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Adaptador Ethereum blockchain para la plataforma de datos InterSystems IRIS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/439560/"><h4>  1. Blockchain </h4><br>  Ahora, cuando escribo este art√≠culo, la tasa de cambio de Bitcoin ha ca√≠do m√°s de 5 veces en relaci√≥n con el valor m√°ximo y cuando dije que estaba haciendo algo relacionado con la cadena de bloques, lo primero que escuch√© es un escepticismo abierto: "¬øqui√©n necesita toda esta cadena de bloques tuya?" . <br><br>  S√≠, de hecho, la exageraci√≥n en torno a la cadena de bloques ha pasado.  Pero las tecnolog√≠as subyacentes permanecieron, se est√°n desarrollando y continuar√°n desarroll√°ndose y se utilizar√°n en ciertos nichos. <a name="habracut"></a>  En Internet y, en particular, en Habr√©, hay una gran cantidad de materiales que describen ambas √°reas generales de aplicaci√≥n de la tecnolog√≠a (por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habr.com/company/bitfury/blog/353350</a> y ejemplos m√°s espec√≠ficos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habr.com/company/raiffeisenbank/blog/332756</a> ). <br><br>  Como sabes, blockchain es un registro distribuido, es decir  una base de datos que se distribuye entre varios nodos mientras cada nodo almacena una copia completa del registro.  La peculiaridad de blockchain es que los registros (transacciones) se agrupan en bloques, y los bloques se combinan en una cadena de bloques.  Sin embargo, solo las operaciones de adici√≥n de datos est√°n disponibles.  Todo esto lleva al hecho de que es casi imposible realizar cambios en las transacciones ya guardadas en la cadena de bloques. <br><br>  Hay muchos materiales sobre c√≥mo funciona la cadena de bloques (si no ha escuchado nada sobre la cadena de bloques antes, puede comenzar con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este simple video</a> ). <br><br>  En el momento del m√°ximo aumento de inter√©s en la tecnolog√≠a blockchain, hubo muchas llamadas para usar blockchain absolutamente en todas partes.  Sin embargo, hay ciertos signos de proyectos / tareas, cuya implementaci√≥n puede requerir una cadena de bloques. <br><br>  En primer lugar, la participaci√≥n de una gran cantidad de jugadores (usuarios) que registran datos, mientras que es necesario evitar inconsistencias y aumentar la confianza. <br><br>  En segundo lugar, la ausencia de un tercero en el que todos conf√≠en. <br><br>  En tercer lugar, la necesidad de un mecanismo para la verificaci√≥n de datos p√∫blicos. <br>  Si se cumplen todas las condiciones anteriores, debe pensar en usar una cadena de bloques. <br><br>  Dichas tareas pueden surgir en cualquier industria.  El proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.101blockchains.com</a> recopila informaci√≥n sobre proyectos potenciales e implementados, as√≠ como sobre las caracter√≠sticas del uso de blockchain en diferentes √°reas. <br><br>  Por ejemplo, en el sector de la salud, blockchain se puede usar: <br><br><ul><li>  para la gesti√≥n segura de los datos del paciente; </li><li>  combatir las drogas falsificadas a trav√©s de transacciones invariables a lo largo de la cadena de suministro; </li><li>  para mejorar el monitoreo y la efectividad de los ensayos cl√≠nicos al eliminar el fraude y la manipulaci√≥n de datos. </li></ul><br>  Cuando usan blockchain en el segmento corporativo, generalmente usan una blockchain privada con varios niveles de permisos (Blockchain con permiso privado).  Dichas redes tienen un conjunto especial de nodos para confirmar transacciones. <br><br>  Sin embargo, al desarrollar el primer adaptador IRIS de InterSystems para trabajar con blockchain, elegimos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ethereum</a> , que pertenece a la categor√≠a de Blockchain sin permiso, una plataforma abierta sin un organismo rector.  Esta elecci√≥n est√° asociada con la popularidad de Ethereum y una infraestructura bastante desarrollada: la presencia de varias herramientas y bibliotecas.  Tambi√©n puede notar que usando el software Ethereum puede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">crear una blockchain privada</a> . <br><br><h4>  2. El adaptador </h4><br>  Ahora es el momento de pasar al adaptador en s√≠. <br><br>  Un adaptador en InterSystems IRIS (as√≠ como en Ensemble) es una clase o paquete de clases IRIS de InterSystems que proporcionan la capacidad de trabajar con un sistema externo.  Los adaptadores IRIS de InterSystems se dividen en entrantes (para recibir datos de un sistema externo cuando el sistema externo es el iniciador de la interacci√≥n) y salientes (para trabajar con un sistema externo cuando el iniciador de la interacci√≥n es IRIS de InterSystems). <br><br>  El adaptador IRIS Ethereum es un adaptador saliente y es ligeramente diferente de la mayor√≠a de los otros adaptadores IRIS de InterSystems, ya que parte de este adaptador es un paquete de clases IRIS de InterSystems, pero el adaptador tambi√©n incluye un peque√±o m√≥dulo NodeJS.  La arquitectura se muestra en la Figura 1. <br><br><img src="https://habrastorage.org/webt/mo/kz/3c/mokz3cufv-4t24zab_oeouy5ef8.png"><br>  <i>Figura 1</i> <br><br>  El m√≥dulo adaptador NodeJS usa las bibliotecas NodeJS existentes para trabajar con Ethereum. <br><br>  El adaptador proporciona las siguientes caracter√≠sticas: <br><br><ul><li>  Coloque un contrato inteligente en Ethereum (planeamos preparar otro art√≠culo en el que hablaremos m√°s sobre contratos inteligentes, herramientas de desarrollo y discutiremos un ejemplo). </li><li>  Llame a m√©todos de contrato inteligente: ambos m√©todos que no cambian el estado de la cadena de bloques y los m√©todos que cambian el estado de la cadena de bloques. </li><li>  Guardar una transacci√≥n (transferir fondos de billetera a billetera) </li><li>  Llamar a m√©todos auxiliares para obtener el estado de blockchain </li><li>  Registro de todas las solicitudes (realiza el m√≥dulo NodeJS, √∫til para la depuraci√≥n) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El adaptador est√° disponible con el c√≥digo fuente de <b>OpenExchange</b></a> . <br><br><h4>  3. Un ejemplo simple </h4><br>  Se instala un ejemplo de "Hola mundo" con el adaptador. <br><br>  Para comenzar a trabajar con Ethereum (incluso para ejecutar este ejemplo) necesita: <br><br><ul><li>  Elija con qu√© red trabajar√°.  Para el desarrollo, generalmente se utilizan redes de prueba como Ropsten. </li><li>  Cree una billetera en esta red y repongala </li><li>  Instale un cliente Ethereum local (por ejemplo, Geth) u obtenga una clave para trabajar con un proveedor de la nube (por ejemplo, Infura) </li></ul><br>  Al configurar una transacci√≥n comercial, debe especificar (Figura 2): <br><br><ol><li>  Servidor y puerto donde se ejecuta el m√≥dulo NodeJS (el puerto predeterminado es 3000) </li><li>  Configuraci√≥n del proveedor (en este caso, acceso a Infura) </li><li>  Detalles de acceso (en los detalles de acceso debe indicar su billetera como nombre de usuario, la clave privada de la billetera como contrase√±a. En InterSystems IRIS, los detalles de acceso se almacenan en una base de datos separada, para la cual se debe habilitar el cifrado) </li></ol><br><img src="https://habrastorage.org/webt/ei/kr/bv/eikrbvchchjm5xwkbrfv9qm4olk.png"><br>  <i>Figura 2</i> <br><br>  Para trabajar con contratos inteligentes, deber√° crear (para cada contrato inteligente con el que se pondr√° en contacto) una carpeta en el sistema de archivos y colocar 2 archivos all√≠: <br>  * abi.txt <br>  * bytecode.txt <br><br>  Estos archivos deben tener un contrato inteligente ABI y Bytecode.  Smart contract ABI: una descripci√≥n formal de la interfaz de contrato inteligente en formato json.  ABI y Bytecode se crean en el momento en que se compila el contrato inteligente. <br><br>  Bytecode solo es necesario para implementar un contrato. <br><br>  Mediante el servicio de prueba, puede verificar el funcionamiento de una transacci√≥n comercial. <br><br>  En la Figura 3, utilizando el servicio de prueba, se implementa el contrato inteligente.  El resultado de llamar a esta operaci√≥n comercial es un mensaje que contiene un hash de transacci√≥n. <br><br><img src="https://habrastorage.org/webt/it/qm/wk/itqmwkzesdspagy8vxdwh0klpn4.png"><br>  <i>Figura 3</i> <br><br>  Usando el navegador ropsten.etherscan.io (https://etherscan.io/), puede encontrar esta transacci√≥n y obtener la direcci√≥n del contrato inteligente colocado. <br><br>  Para ejecutar m√©todos de contrato inteligentes utilizando el adaptador, debe especificar la configuraci√≥n en la configuraci√≥n del producto: ContractFolder y ContractAddress. <br><br>  El c√≥digo para llamar al m√©todo de contrato inteligente es bastante simple: <br><br><pre><code class="go hljs">set ..ContractABI = [].%FromJSON(..ContractFolder_<span class="hljs-string"><span class="hljs-string">"abi.txt"</span></span>) set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) set result = contract.hello() set pResponse = ##class(Ens.StringContainer).%New(result.args)</code> </pre> <br>  Usando el m√©todo del adaptador GetContract, que se pasa la direcci√≥n del contrato inteligente y ABI, se crea un objeto de contrato inteligente, que luego se utiliza para llamar a los m√©todos.  En este caso, el m√©todo hello () debe definirse en el contrato inteligente, que devuelve una cadena. <br><br>  En este ejemplo, el m√©todo hello () no cambia el estado de la cadena de bloques, por lo que puede llamarse sincr√≥nicamente.  Sin embargo, los m√©todos que cambian el estado de la cadena de bloques pueden llevar mucho tiempo (esperando la confirmaci√≥n de la transacci√≥n). <br><br>  Para llamar a tales m√©todos, puede usar el mecanismo de respuesta diferida en InterSystems IRIS.  El adaptador debe pasar el token diferido y luego, cuando se confirma la transacci√≥n NodeJS, el m√≥dulo transmitir√° el resultado de su ejecuci√≥n a InterSystems IRIS.  Para hacer esto, debe configurar la aplicaci√≥n web y agregar una transacci√≥n comercial al producto que procesar√° la respuesta recibida. <br><br>  C√≥digo para llamar a un m√©todo que cambia el estado de la cadena de bloques: <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// getting EthereumAccount(wallet) and privateKey do ##class(Ens.Config.Credentials).GetCredentialsObj(.cred, "Ethereum.Demo.EthereumOperation", "Ens.Config.Credentials", ..Credentials) set account = ##class(Ethereum.Address).%New(cred.Username) set privateKey = cred.Password //reading contract ABI set ..ContractABI = [].%FromJSON(..ContractFolder_"abi.txt") // get contract object set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) $$$ThrowOnError(..DeferResponse(.deferred)) // estimate gas do contract.SetOptions(account) set gasJSON = contract.EstimateGas("setName",pRequest.Name) $$$TRACE(gasJSON.gas) do contract.SetOptions(account, privateKey, ##class(Ethereum.Wei).%New(1000000000), ##class(Ethereum.Wei).%New(100*gasJSON.gas),,deferred) set result = contract.setName(pRequest.Name)</span></span></code> </pre> <br>  En este caso, antes de llamar al m√©todo de contrato inteligente setName (), se deben especificar varios par√°metros, incluido un token de respuesta retrasada. <br><br>  En nuestro pr√≥ximo art√≠culo, hablaremos m√°s sobre contratos inteligentes y daremos un ejemplo de c√≥mo resolver una aplicaci√≥n utilizando el adaptador InterSystems IRIS Ethereum. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/439560/">https://habr.com/ru/post/439560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../439546/index.html">¬øSue√±an los androides con el punk el√©ctrico? C√≥mo ense√±√© a una red neuronal a escribir m√∫sica</a></li>
<li><a href="../439550/index.html">Hackquest 2018. Resultados y rese√±as. D√≠a 1-3</a></li>
<li><a href="../439552/index.html">Extensiones maliciosas de Chrome</a></li>
<li><a href="../439556/index.html">TDMS Fairway. Metodolog√≠as PMBOK y organizaciones de dise√±o rusas.</a></li>
<li><a href="../439558/index.html">Nuevo tel√©fono viejo. Reinventar el tel√©fono PSTN</a></li>
<li><a href="../439562/index.html">Configure el cl√∫ster Kubernetes HA en metal desnudo con kubeadm. Parte 1/3</a></li>
<li><a href="../439564/index.html">Aplicaci√≥n pr√°ctica de la transformaci√≥n del √°rbol AST utilizando Putout como ejemplo</a></li>
<li><a href="../439566/index.html">Por qu√© es importante la documentaci√≥n de SRE. Parte 3</a></li>
<li><a href="../439568/index.html">SSD basados ‚Äã‚Äãen QLC: ¬øun asesino del disco duro? No realmente</a></li>
<li><a href="../439570/index.html">Magia de IPython para editar etiquetas de celda de Jupyter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>