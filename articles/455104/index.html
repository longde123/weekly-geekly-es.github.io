<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéß üõÄüèª ü§öüèΩ BotAuth: inicio de sesi√≥n y registro con bots üì≠ üê∂ üñåÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="BotAuth: un paquete que le permite iniciar sesi√≥n con el bot Vkontakte, FaceBook, Telegram. 

 El objetivo principal de BotAuth es simplificar a los v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>BotAuth: inicio de sesi√≥n y registro con bots</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455104/"><img src="https://habrastorage.org/webt/jy/oa/nl/jyoanlvadhny8tfmfnt-seykprk.jpeg"><br><br>  BotAuth: un paquete que le permite iniciar sesi√≥n con el bot Vkontakte, FaceBook, Telegram. <br><br>  El objetivo principal de BotAuth es simplificar a los visitantes de los sitios web / inicio de sesi√≥n PWA a trav√©s de las redes sociales. <br><br>  Mientras social.  Las redes no proporcionan comentarios de las aplicaciones m√≥viles nativas a un sitio web, los desarrolladores tienen que enviar al usuario a un navegador, donde nuevamente deben ingresar un nombre de usuario y contrase√±a. <br><br>  Usando bots, puede obtener comentarios (devoluci√≥n de llamada) de la aplicaci√≥n nativa, por lo que no obliga a ingresar el nombre de usuario y la contrase√±a de la red social.  red en el navegador. <br><a name="habracut"></a><br>  Demostraci√≥n: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://laravel.zetrider.ru/botauth</a> <br>  GitHub - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/zetrider/BotAuth</a> <br><br>  Enlaces del formulario: <br><br><pre><code class="plaintext hljs">https://vk.me/ https://t.me/ https://m.me/</code> </pre> <br>  Abra una aplicaci√≥n m√≥vil para iniciar un di√°logo con el bot.  El visitante no tendr√° que volver a ingresar el nombre de usuario y la contrase√±a en el navegador. <br><br>  Puedes conectar bots: <br><br><ul><li>  Vkontakte </li><li>  Telegrama </li><li>  Facebook </li><li>  Su propio proveedor (ejemplo a continuaci√≥n) </li></ul><br><div class="spoiler">  <b class="spoiler_title">Instalaci√≥n</b> <div class="spoiler_text"><ol><li>  compositor requiere zetrider / botauth </li><li>  Conecte el paquete en config / app.php <br>  Proveedor <br><pre> <code class="php hljs">ZetRider\BotAuth\BotAuthServiceProvider::class,</code> </pre> <br>  Fachada <br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'BotAuth'</span></span> =&gt; ZetRider\BotAuth\Facades\BotAuth::class,</code> </pre> <br></li><li>  Copia la configuraci√≥n.  archivo <br><pre> <code class="plaintext hljs">php artisan vendor:publish --tag=botauth-config</code> </pre> <br>  si es necesario <br><pre> <code class="plaintext hljs">php artisan vendor:publish --tag=botauth-views</code> </pre> <br><pre> <code class="plaintext hljs">php artisan vendor:publish --tag=botauth-migrations</code> </pre> <br></li><li>  Indicar para lo social necesario.  enlace de redes en config / botauth.php en el par√°metro de enlace. </li><li>  Rellene el archivo ENV con las teclas bot <br><pre> <code class="plaintext hljs">BOTAUTH_VKONTAKTE_API_SECRET BOTAUTH_VKONTAKTE_API_TOKEN BOTAUTH_VKONTAKTE_API_CONFIRM BOTAUTH_TELEGRAM_API_TOKEN BOTAUTH_TELEGRAM_PROXY BOTAUTH_FACEBOOK_API_SECRET BOTAUTH_FACEBOOK_API_TOKEN BOTAUTH_FACEBOOK_API_CONFIRM</code> </pre> <br></li><li>  Ejecutar migraciones <br><pre> <code class="plaintext hljs">php artisan migrate</code> </pre> <br></li><li>  En Middleware VerifyCsrfToken agrega una excepci√≥n de direcci√≥n para devoluci√≥n de llamada, el valor predeterminado es botauth / callback / * ' <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $except = [ <span class="hljs-string"><span class="hljs-string">'botauth/callback/*'</span></span> <span class="hljs-comment"><span class="hljs-comment">// Except callback Csrf middleware ];</span></span></code> </pre><br></li><li>  Para su modelo de usuario, agregue un rasgo: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">ZetRider</span></span>\<span class="hljs-title"><span class="hljs-title">BotAuth</span></span>\<span class="hljs-title"><span class="hljs-title">Traits</span></span>\<span class="hljs-title"><span class="hljs-title">BotAuthUserTrait</span></span>;</code> </pre> <br>  lo que agregar√° una relaci√≥n con los inicios de sesi√≥n de los usuarios de la red social.  redes <br></li></ol><br></div></div><br>  <b>Conexi√≥n de bots:</b> <br><br><div class="spoiler">  <b class="spoiler_title">Vkontakte</b> <div class="spoiler_text"><ol><li>  Abra la configuraci√≥n de su comunidad o cree un nuevo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">vk.com/groups?w=groups_create</a> </li><li>  En la configuraci√≥n de la comunidad, abra la secci√≥n "Configuraci√≥n" - "Trabajar con la API" </li><li>  Cree una contrase√±a, seleccione "Permitir que la aplicaci√≥n acceda a los mensajes de la comunidad", escriba la clave, debe especificarse en .env <b>BOTAUTH_VKONTAKTE_API_TOKEN</b> </li><li>  En la misma p√°gina, seleccione la API de devoluci√≥n de llamada, seleccione "Versi√≥n de API" <b>5.95</b> , especifique la direcci√≥n de devoluci√≥n de llamada de su sitio en el campo "Direcci√≥n", ejemplo predeterminado <pre> <code class="plaintext hljs">https://DOMAIN/botauth/callback/vkontakte</code> </pre> </li><li>  A continuaci√≥n, especifique la l√≠nea a la que el servidor debe regresar .env <b>BOTAUTH_VKONTAKTE_API_CONFIRM</b> </li><li>  En el campo "Clave secreta", ingrese cualquier clave secreta, especifique en .env <b>BOTAUTH_VKONTAKTE_API_SECRET</b> </li><li>  Despu√©s de completar todas las claves en .env, haga clic en el bot√≥n "Confirmar" </li><li>  En la misma p√°gina, abra la pesta√±a "Tipos de eventos", seleccione "Bandeja de entrada" </li><li>  Abra la configuraci√≥n de la comunidad, el elemento "Mensajes", habilite los "mensajes de la comunidad" </li><li>  Abra la configuraci√≥n de la comunidad, el elemento "Mensajes" - "Configuraci√≥n del bot", active "Funciones del bot" </li></ol><br>  El bot est√° listo para funcionar. <br><br>  Un ejemplo de un enlace directo a un di√°logo con un bot <pre> <code class="plaintext hljs">https://vk.me/zetcode</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Telegrama</b> <div class="spoiler_text"><ol><li>  Crea tu bot a trav√©s de @BotFather </li><li>  Recuerde la clave, especifique en .env <b>BOTAUTH_TELEGRAM_API_TOKEN</b> </li><li>  Agregar un enlace web a trav√©s de <br><pre> <code class="plaintext hljs">https://api.telegram.org/botYOUR_TOKEN/setWebhook?url=https://DOMAIN/botauth/callback/telegram</code> </pre> <br>  reemplace YOUR_TOKEN con su token, DOMAIN con su dominio </li><li>  Si es necesario, especifique el proxy en .env <b>BOTAUTH_TELEGRAM_PROXY</b> , por ejemplo calcetines5h: //127.0.0.1: 1080 </li></ol><br>  El bot est√° listo para funcionar. <br><br>  Un ejemplo de un enlace directo a un di√°logo con un bot <pre> <code class="plaintext hljs">https://t.me/BotAuthBot</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Facebook</b> <div class="spoiler_text"><ol><li>  Debe haber creado una p√°gina; si no es as√≠, agregue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.facebook.com/pages/creation/?ref_type=universal_creation_hub</a> </li><li>  Agregue la nueva aplicaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developers.facebook.com/apps</a> </li><li>  En la configuraci√≥n de la aplicaci√≥n, seleccione "B√°sico", copie el "Secreto de la aplicaci√≥n" a .env <b>BOTAUTH_FACEBOOK_API_SECRET</b> </li><li>  En la configuraci√≥n de la aplicaci√≥n, debe agregar el producto "Messenger" </li><li>  En la configuraci√≥n del producto "Messenger", cree un token de acceso, especif√≠quelo en .env <b>BOTAUTH_FACEBOOK_API_TOKEN</b> </li><li>  En la configuraci√≥n del producto Messenger, cree un enlace web, especifique en la URL de devoluci√≥n de llamada <pre> <code class="plaintext hljs">https://DOMAIN/botauth/callback/facebook</code> </pre>  reemplaza DOMAIN con tu dominio </li><li>  En el campo "Confirmar marcador", especifique cualquier texto, gu√°rdelo en .env <b>BOTAUTH_FACEBOOK_API_CONFIRM</b> </li><li>  En las opciones de "Campos de suscripci√≥n", seleccione "mensajes" </li><li>  Haga clic en confirmar </li><li>  Despu√©s de confirmar el servidor en la configuraci√≥n de enlace web, seleccione la p√°gina, haga clic en "Suscribir" </li><li>  En la ventana "Comprobar aplicaci√≥n de Messenger", junto a "pages_messaging", haga clic en "Agregar a solicitud" </li></ol><br>  El bot ya est√° listo para trabajar, pero solo est√° disponible para los administradores. <br><br>  Despu√©s de confirmar la aplicaci√≥n, estar√° disponible para todos los visitantes.  Presentar la solicitud para moderaci√≥n. <br><br>  Un ejemplo de un enlace directo a un di√°logo con un bot <pre> <code class="plaintext hljs">https://m.me/zetridercode</code> </pre> <br></div></div><br>  <b>Importante:</b> <br><br><ol><li>  El sitio deber√≠a funcionar en https </li><li>  El bot de Facebook devuelve un PSID que no coincide con el ID de usuario p√∫blico. </li><li>  Por defecto, el controlador bot funciona con el modelo \ App \ User.  Si tiene un caso diferente, simplemente cree su controlador y modelo basado en ejemplos del repositorio.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modelo</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">controlador</a> </li></ol><br>  <b>C√≥mo agregar su proveedor:</b> <br><br>  Crea tu clase que hereda una clase abstracta <br><br><pre> <code class="plaintext hljs">ZetRider\BotAuth\AbstractProvider</code> </pre> <br>  Ejemplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ejemplo / ExampleProvider.php</a> <br><br>  Agregue un proveedor al servicio, por ejemplo, AppServiceProvider en el m√©todo de arranque <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Register example proider BotAuth::extend('example', function() { return new \Path\To\Your\Class\ExampleProvider(); });</span></span></code> </pre><br>  El proveedor procesar√° las solicitudes en una devoluci√≥n de llamada en <br><br><pre> <code class="plaintext hljs">https://.../botauth/callback/example</code> </pre> <br>  <b>Eventos</b> <br><br>  Evento sobre el procesamiento exitoso de un nuevo mensaje del bot <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Catch bot callback \Event::listen(\ZetRider\BotAuth\Events\MessageNewEvent::class, function($event) { $provider = $event-&gt;provider; // ZetRider\BotAuth\AbstractProvider $slug = $provider-&gt;getProviderSlug(); $data = $provider-&gt;getCallbackResponse(); $user = $provider-&gt;getUser(); $text = $provider-&gt;getText(); // You can send a message // $provider-&gt;sendMessage(__('Back to web site')); });</span></span></code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/455104/">https://habr.com/ru/post/455104/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455094/index.html">C√≥mo proteger 5G en una ciudad inteligente: aplique una nueva arquitectura de seguridad</a></li>
<li><a href="../455096/index.html">Pruebas de competencias con pruebas: por qu√© y c√≥mo</a></li>
<li><a href="../455098/index.html">Entrevista con Alexander Makarov, equipo central de Yii</a></li>
<li><a href="../455100/index.html">C√≥mo organizar el caf√© en la oficina.</a></li>
<li><a href="../455102/index.html">Conexi√≥n de interfaces seriales sobre IP</a></li>
<li><a href="../455106/index.html">Desarrollo de software. Tendencias 2019</a></li>
<li><a href="../455110/index.html">¬øLa felicidad de los empleados depende de tareas interesantes? Juegos de Tell Badoo, SKB Kontur, Dodo Pizza, Staply y Alternativa</a></li>
<li><a href="../455112/index.html">Bitrix24: "No se considera que ha ca√≠do r√°pidamente"</a></li>
<li><a href="../455114/index.html">Implementaci√≥n de tipo entero en CPython</a></li>
<li><a href="../455118/index.html">Hacia el futuro con la integraci√≥n del servicio Jenkins y Oracle APEX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>