<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüè´ ü•´ ü§≥ Verifica√ß√µes on-line na rede federal atrav√©s do RabbitMQ, 1C e magia negra üë®üèæ‚Äç‚úàÔ∏è ‚úãüèæ üòû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No ano passado, o diretor de TI de uma das maiores participa√ß√µes agroindustriais da R√∫ssia entrou em contato conosco. A abordagem aos neg√≥cios impleme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verifica√ß√µes on-line na rede federal atrav√©s do RabbitMQ, 1C e magia negra</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422151/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/89/-z/xo/89-zxong6o-oxnwst3edu20hxba.png"></div><br><p> No ano passado, o diretor de TI de uma das maiores participa√ß√µes agroindustriais da R√∫ssia entrou em contato conosco.  A abordagem aos neg√≥cios implementada por nosso cliente foi impressionante.  Ele foi um dos primeiros a implementar a ideia de uma empresa de ciclo completo - do campo √† prateleira do supermercado.  Devido √† disponibilidade e alta qualidade dos produtos, essa holding se tornou uma marca reconhecida que eles conhecem e escolhem.  Naquela √©poca, a holding inclu√≠a mais de 650 pontos de venda e mais de 20.000 funcion√°rios distribu√≠dos em toda a Federa√ß√£o Russa. </p><br><p>  O cliente precisava garantir a entrega mais r√°pida de cheques ao centro a partir de todos os pontos de venda na R√∫ssia, incluindo barracas de comida em vilarejos remotos com Internet ocasional e computadoriza√ß√£o m√≠nima. </p><br><p>  Considerando as especificidades especificadas, a solu√ß√£o para o problema se transformou em uma emocionante aventura com um pandeiro, xam√£s e pernas de coelho na cara do RabbitMQ.  Como criamos um cluster federado de filas e o que encontramos - sob o corte. </p><a name="habracut"></a><br><h2 id="o-problematike-zakazchika">  Sobre problemas do cliente </h2><br><p>  Manter um grande n√∫mero de pontos de venda distribu√≠dos, operando nas condi√ß√µes de concorr√™ncia acirrada, exigia que seus l√≠deres tomassem prontamente decis√µes de gerenciamento.  Para isso, os gerentes precisavam de informa√ß√µes sobre verifica√ß√µes no modo em tempo real. </p><br><p>  No sistema atual, o tempo de entrega do cheque do caixa ao sistema central chegou a 3 dias.  Ao mesmo tempo, as informa√ß√µes sobre a compra perfeita n√£o eram registradas periodicamente (perda de cheque). </p><br><p>  Era necess√°rio fornecer informa√ß√µes sobre vendas "aqui e agora" para otimizar a entrega de produtos √†s lojas e responder rapidamente √†s mudan√ßas no equil√≠brio de mercadorias e demanda.  Essas informa√ß√µes devem ir simultaneamente para o IS central da explora√ß√£o, com base em 1C, e para o computador do comerciante em uma determinada loja / ponto de venda. </p><br><p>  Al√©m disso, era necess√°rio garantir uma reavalia√ß√£o centralizada e operacional de mercadorias pela rede, al√©m de conectar ao sistema de BI da holding um fluxo de dados on-line de todas as tomadas. <br>  Como resultado, foram formados crit√©rios para o sucesso do projeto: </p><br><ul><li>  os cheques perfurados no caixa da loja devem estar vis√≠veis no sistema central 1C no m√°ximo 1 segundo a partir do momento de sua ‚Äúfiscaliza√ß√£o‚Äù no caixa na presen√ßa (comunica√ß√£o) da comunica√ß√£o; </li><li>  em caso de falhas tempor√°rias de comunica√ß√£o, assegure a entrega imediata garantida de verifica√ß√µes ao sistema central ap√≥s a restaura√ß√£o do canal de comunica√ß√£o. </li></ul><br><p>  Para a equipe do Silver Bullet, isso foi muito tentador, pois na √©poca j√° t√≠nhamos desenvolvido nosso adaptador 1C para o RabbitMQ e a capacidade de inici√°-lo na batalha a grandes dist√¢ncias e cargas atra√≠a mentes nerds.  O pr√≥prio conceito de ‚Äúposi√ß√£o do cheque no centro em 1 segundo‚Äù n√£o √© t√£o novo. Em 2013, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apresentamos a ideia de usar filas</a> em 1C e at√© testamos em uma rede de negocia√ß√£o, mas na √©poca eram muletas muito experimentais, que inclu√≠am, al√©m do Rabbit + 1C ainda √© C #, WCF e at√© um pouco de C ++. </p><br><p>  Claro, todos n√≥s o espionamos em livros inteligentes que foram escritos ainda mais cedo.  Portanto, n√£o ousarei julgar exatamente quando a id√©ia de linhas em projetos de integra√ß√£o come√ßou a dominar o mundo. </p><br><p>  De uma forma ou de outra, a parte te√≥rica e o conceito de arquitetura provaram sua efic√°cia, restando apenas um pouco - para fazer tudo, testar, corrigir bugs, documentar e implantar.  : trollface: </p><br><h2 id="nyryaem-s-golovoy">  Mergulhando com a cabe√ßa </h2><br><p>  Ningu√©m sabe melhor do que o propriet√°rio da empresa sobre seus pontos fortes e fracos; portanto, todos os projetos de integra√ß√£o come√ßam com uma auditoria dos processos do cliente e com o entendimento do ponto de partida (COMO EST√Å).  Normalmente, uma pesquisa de neg√≥cios inclui: </p><br><ul><li>  an√°lise de informa√ß√µes sobre como os processos de neg√≥cios est√£o acontecendo agora; </li><li>  coletar requisitos para o sistema entrevistando funcion√°rios-chave para entender como, em sua opini√£o, os processos de neg√≥cios devem ser organizados; </li><li>  formaliza√ß√£o e otimiza√ß√£o de processos de neg√≥cios. </li></ul><br><p>  Para eliminar discrep√¢ncias, usamos a formaliza√ß√£o dos processos de neg√≥cios AS IS e TO BE na forma de esquemas BPMN.  √â mais f√°cil entend√™-lo e √© mais f√°cil para o cliente n√£o perder nada quando passamos pelo diagrama do processo junto com ele. </p><br><p>  Pelas caracter√≠sticas t√©cnicas, durante a auditoria constatou que: </p><br><ul><li>  os pontos de venda usam m√°quinas baseadas no Windows - com sistemas operacionais heterog√™neos instalados (dependendo do ano de cria√ß√£o) do Windows XP ao Windows 7, 8, 10; </li><li>  caixas registradoras est√£o executando o firmware Frontol com o Windows Embedded a bordo; </li><li>  o circuito de gerenciamento de varejo utiliza software heterog√™neo, incluindo solu√ß√µes de fornecedores da 1C e seus pr√≥prios desenvolvimentos; </li><li>  os canais de comunica√ß√£o s√£o implementados com o princ√≠pio de ‚Äúo que √©‚Äù, no intervalo de linhas de cabo a modems apito USB; </li><li>  os pontos de venda s√£o atendidos por empresas locais de terceiriza√ß√£o e n√£o por um servi√ßo centralizado; </li><li>  o funcionamento do sistema depende substancialmente da capacidade de manuten√ß√£o (funcionamento adequado) do computador do gerente de mercadorias em cada tomada. </li></ul><br><p><img src="https://habrastorage.org/webt/cv/hw/xl/cvhwxlmawid2vavdngll1nqs4ca.png" alt="Esquema de integra√ß√£o AS-IS"></p><br><p>  <em>Esquema de integra√ß√£o AS-IS</em> </p><br><p>  A auditoria tamb√©m mostrou que os processos de neg√≥cios da empresa praticamente n√£o precisam ser ajustados, mas √© necess√°rio um aprimoramento da infraestrutura para garantir um fluxo ininterrupto de informa√ß√µes. </p><br><p>  Em geral, nos deparamos com a tarefa de entrega confi√°vel de documentos entre os tr√™s componentes do processo: caixa registradora, comerciante de computadores e escrit√≥rio central.  Ao mesmo tempo, o computador do comerciante √© uma m√°quina "embaixo da mesa".  Pode ser ligado / desligado a pedido do comerciante.  Ou at√© mesmo seja desligado 23 horas em 24.  No entanto, ao sair do anoitecer, o comerciante deve ver um conjunto real de pre√ßos, saldos, itens de estoque etc. </p><br><h2 id="vybor-resheniya-sbor-grabley-i-rasstanovka-kostyley">  Escolhendo uma solu√ß√£o, coletando um ancinho e colocando muletas </h2><br><p>  A integra√ß√£o da fila h√° muito se tornou um padr√£o comum.  Quando voc√™ precisa transferir algo para algum lugar, com muitos links, em um ambiente n√£o confi√°vel e rotear fluxos de dados ao mesmo tempo, voc√™ precisa de eventos e filas.  Portanto, escolhemos o RabbitMQ, porque ele se integra facilmente a qualquer ambiente (pareceu-nos), incluindo a plataforma 1C, para a qual j√° t√≠nhamos nosso pr√≥prio adaptador para o protocolo AMQP. </p><br><p>  O RMQ √© um tipo de gerenciador de fluxo de dados e permite a integra√ß√£o no modo de tempo ‚Äúquase real‚Äù, mantendo uma conex√£o fraca de sistemas, suportando cargas e assim por diante ... Um bom servidor, em uma palavra, muito foi escrito sobre isso em Habr√©. </p><br><p>  Um dos recursos interessantes √© o clustering pronto para uso e a capacidade de criar clusters de servidores distribu√≠dos que funcionam juntos. </p><br><p><img src="https://habrastorage.org/webt/3t/4z/ze/3t4zzefa40o467uuhiwepzb4_fs.png" alt="imagem"></p><br><p>  Sempre gostei das fotos com a arquitetura da integra√ß√£o nas filas.  Eles sempre consistem em tr√™s dados, no centro dos quais √© um corretor de mensagens.  Deixe que essa imagem esteja neste artigo, para n√£o violar o c√¢non. </p><br><p>  Ao construir o esquema, surgiu a pergunta - onde o servidor da fila deveria estar localizado?  Em que condi√ß√µes nosso sistema pode acabar?  Descobrimos que existem 5 situa√ß√µes de emerg√™ncia nas quais o trabalho n√£o deve parar. </p><br><ol><li>  Todos os blocos est√£o inclu√≠dos. </li><li>  O centro est√° desconectado, h√° acesso a um comerciante. </li><li>  O merchandiser est√° desconectado, h√° acesso ao centro. </li><li>  Desativado e comerciante e centro. </li><li>  Sistema 1C desativado. </li></ol><br><p>  Os cheques em todas essas situa√ß√µes devem romper, o com√©rcio n√£o deve parar.  Ao restaurar o canal - as verifica√ß√µes devem chegar ao assinante.  Deixe-me lembr√°-lo de que um ponto de venda tamb√©m pode ser uma barraca rural.  N√£o h√° nenhum servidor separado instalado no qual o RMQ possa ser instalado.  Descobriu-se que o intermedi√°rio de mensagens deve estar diretamente no caixa.  Os servidores s√£o um luxo inadmiss√≠vel e o Rabbit √© bastante leve e pode funcionar em um pequeno terminal de PDV.  Ent√£o porque n√£o? </p><br><p>  Obviamente, n√£o fizemos do POS o √∫nico n√≥ do cluster RMQ, mas colocamos um dos n√≥s do cluster federado diretamente no terminal comercial, executando o Windows Embedded.  Dizer isso foi um pouco mais f√°cil do que fazer, mas fizemos isso de forma alegre e imprudente.  O que vou lhe dizer agora. </p><br><h3 id="kak-postavit-rmq-terminal-frontol">  Como colocar RMQ terminal Frontol </h3><br><p>  Devo dizer que Erlang e o pr√≥prio servidor RMQ chegaram ao terminal do Windows quase sem problemas.  Surgiram problemas no cliente, que deve interagir com o servidor a partir do software da caixa registradora. </p><br><p>  O software de caixa registradora Frontol possui uma documenta√ß√£o bastante boa, da qual descobrimos que √© poss√≠vel personalizar o comportamento usando Javascript.  "Yuhu!"  - dissemos e come√ßamos a pesquisar no Google JS o RabbitMQ.  Logo ficou claro que uma chatice estava esperando por n√≥s.  Na frente, n√£o √© exatamente Javascript.  Bem, isto √©  formalmente, sim, a sintaxe √© a mesma, mas a m√°quina JavaScript em si √© do Windows Script Host, a mesma que √© VBScript, cscript.exe e muito mais.  Em resumo, √© muito antigo, espec√≠fico da Microsoft e nem um √∫nico cliente JS de coelho sadio funcionar√° nele. </p><br><p>  No entanto, no ecossistema WSH, voc√™ pode usar objetos COM e fomos em dire√ß√£o ao cliente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RMQ para .NET</a> . </p><br><p>  As vers√µes modernas desse cliente n√£o oferecem mais suporte ao .NET 3.5, que estava dispon√≠vel para n√≥s no terminal POS, mas, felizmente, o c√≥digo-fonte do cliente est√° aberto e, al√©m disso, o github do projeto retinha as tags nas quais o .NET 3.5 ainda era suportado.  Gl√≥ria ao c√≥digo aberto!  Restava desinflar o c√≥digo-fonte da vers√£o antiga do cliente .NET, marque a caixa de sele√ß√£o Com-Visible e implante no terminal. </p><br><h3 id="vzaimodeystvie-s-kassoy-frontol">  Intera√ß√£o de check-out do Frontol </h3><br><p>  O software de caixa registradora possui uma API que pode ser usada para intera√ß√£o. </p><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ frontol.addEventListener(<span class="hljs-string"><span class="hljs-string">"openDocument"</span></span>, <span class="hljs-string"><span class="hljs-string">"beforeOpenDocument"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); frontol.addEventListener(<span class="hljs-string"><span class="hljs-string">"closeDocument"</span></span>, <span class="hljs-string"><span class="hljs-string">"beforeCloseDocument"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); frontol.addEventListener(<span class="hljs-string"><span class="hljs-string">"closeDocument"</span></span>, <span class="hljs-string"><span class="hljs-string">"afterCloseDocument"</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); frontol.addEventListener(<span class="hljs-string"><span class="hljs-string">"closeSession"</span></span>, <span class="hljs-string"><span class="hljs-string">"beforeCloseSession"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); frontol.addEventListener(<span class="hljs-string"><span class="hljs-string">"closeSession"</span></span>, <span class="hljs-string"><span class="hljs-string">"afterCloseSession"</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); addPolyfills(); <span class="hljs-comment"><span class="hljs-comment">//   ) initRmqVariables(); createRMQConnection(); }</span></span></code> </pre> <br><p>  Os recursos do JS nativo que est√° a bordo do Windows s√£o extremamente ruins.  Por exemplo, n√£o h√° Array.indexOf ou JSON.stringify.  Mas o mundo n√£o est√° sem pessoas boas.  Lembramos da popular muleta baseada em navegador chamada "polyphillas" e, felizmente, a incorporamos na caixa.  Deixando de lado as piadas, todos os truques de m√°gica com JS foram intencionalmente meticulosamente comentados, para que gera√ß√µes de futuros administradores possam entender clara e rapidamente o que est√° acontecendo, de onde veio e como funciona. </p><br><p><img src="https://habrastorage.org/webt/dy/r4/wt/dyr4wtajznottdsc0kf4hdxm-vq.png"></p><br><p><img src="https://habrastorage.org/webt/5f/zn/6o/5fzn6okjyzwwcmyaauou07ny818.png"></p><br><p>  Logo ficou claro que a JS-API n√£o cobre parte de nossos casos; no entanto, como o Frontol inclui um DBMS do Firebird e existe um provedor ODBC, podemos usar o Javascript para entrar em contato diretamente com o banco de dados da caixa usando Javascript. obtenha os dados que precisamos l√°. </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">afterCloseSession</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> connection = getDatabaseConnection(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> qSelect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ActiveXObject(<span class="hljs-string"><span class="hljs-string">"ADODB.Command"</span></span>); qSelect.ActiveConnection = connection; qSelect.CommandText = <span class="hljs-string"><span class="hljs-string">"SELECT ChequeNumber "</span></span> + <span class="hljs-string"><span class="hljs-string">"FROM Document "</span></span> + <span class="hljs-string"><span class="hljs-string">"WHERE "</span></span> + <span class="hljs-string"><span class="hljs-string">" State = 1 "</span></span> + <span class="hljs-string"><span class="hljs-string">" AND(ChequeType IN(0, 1, 2)) "</span></span></code> </pre><br><p>  E, finalmente, trabalhar diretamente com o servidor de filas do nosso JS fica assim: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createRMQConnection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ActiveXObject(<span class="hljs-string"><span class="hljs-string">"RabbitMQ.Client.ConnectionFactory"</span></span>); factory.UserName = rmqUser; factory.Password = rmqPass; factory.VirtualHost = <span class="hljs-string"><span class="hljs-string">"/"</span></span>; factory.HostName = <span class="hljs-string"><span class="hljs-string">"localhost"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { rmqConnection = factory.CreateConnection(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">"     .   !\n"</span></span> + e.message); } rmqChannel = rmqConnection.CreateModel(); rmqMessageProperties = rmqChannel.CreateBasicProperties(); rmqMessageProperties.ContentType = <span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>; rmqMessageProperties.ContentEncoding = <span class="hljs-string"><span class="hljs-string">"string"</span></span>; rmqMessageProperties.DeliveryMode = <span class="hljs-number"><span class="hljs-number">2</span></span>; }</code> </pre> <br><h2 id="obschaya-kartina-resheniya">  A imagem geral da solu√ß√£o </h2><br><p>  Os seguintes princ√≠pios foram estabelecidos na arquitetura: </p><br><ul><li>  Federa√ß√£o de servidores RabbitMQ - RMQ - modo de servidor de Federa√ß√£o para que os eventos sejam entregues a todos os destinat√°rios; </li><li>  sobreviv√™ncia do caixa local - se um evento ocorreu no caixa, ele deve ser entregue em qualquer caso, mesmo que no momento o balc√£o n√£o esteja acess√≠vel na rede; </li><li>  2 provedores de dados - no modo normal, os dados s√£o entregues atrav√©s do servidor (o computador do comerciante), se o computador do comerciante estiver indispon√≠vel (como resultado de um acidente ou por outros motivos), o caixa far√° a entrega, quando o computador do comerciante for ligado, ele receber√° sua parte dos eventos depois do centro, mas garantido; </li><li>  RMQ - servi√ßo servidor RabbitMQ com portas TCP abertas para armazenamento em cluster e mensagens; </li><li>  Para garantir a entrega garantida de mensagens, a redund√¢ncia do fluxo de dados √© aplicada.  Isso minimiza o impacto das conex√µes de rede entre os n√≥s do sistema; </li><li>  em 1C: Center, foi decidido instalar um conjunto de servidores RMQ no modo HA - alta disponibilidade do servidor central, incl.  H√° uma reserva dupla e replica√ß√£o de eventos, para garantir a entrega. </li></ul><br><p><img src="https://habrastorage.org/webt/st/tp/vs/sttpvss5ldov15shsqsfa_88xao.png"></p><br><p>  De acordo com a solu√ß√£o de arquitetura, o seguinte diagrama de fluxo de dados foi criado: </p><br><ul><li>  Frontol, 1C - pontos iniciais e finais da troca - objetos que s√£o fontes e receptores de mensagens; </li><li>  fila federada - um tipo especial de fila que permite criar um sistema distribu√≠do para o envio de mensagens, no qual a fila pode ser publicada no n√≥ localizado na tomada (upstream) e seu recebimento da fila no centro (downstream).  Para a transmiss√£o de mensagens de upstream para downstream, um plug-in especial (Federation PlugIn) √© instalado no servidor da fila central; </li><li>  P√° - (literalmente "p√°") - um mecanismo para transmitir mensagens de um objeto (fila) para outro.  Os objetos podem pertencer a um servidor ou diferente; </li><li>  a arquitetura do sistema fornece gerenciamento de implanta√ß√£o remota, ou seja, a capacidade de instalar servidores RabbitMQ em qualquer computador na rede de reten√ß√£o a partir de um √∫nico centro; </li><li>  a configura√ß√£o e a conex√£o com a federa√ß√£o s√£o realizadas usando os chamados scripts de p√≥s-instala√ß√£o, que v√™m de f√°brica com a entrega de servidores RMQ, com a configura√ß√£o necess√°ria dos par√¢metros de rede aceitos na rede do cliente. </li></ul><br><p>  O circuito resultante fornece as caracter√≠sticas de velocidade solicitadas e funciona de maneira est√°vel quando qualquer um dos componentes cai.  Depois que a conex√£o √© perdida e restaurada, os dados acumulados v√£o para o centro dentro de 5 a 10 segundos.  Na pr√°tica, a tecnologia de sistemas fracamente acoplados provou sua efic√°cia.  Todos os eventos ocorrem como se estivessem em um escrit√≥rio, sem levar em conta os v√°rios tipos de atrasos associados √† distribui√ß√£o territorial e o grau de disponibilidade dos canais de comunica√ß√£o inerentes a ele. </p><br><h2 id="kratkoe-zaklyuchenie">  Breve conclus√£o </h2><br><p>  Gostaria de aproveitar separadamente o tempo maravilhoso em que vivemos.  Mais recentemente, o uso de c√≥digo aberto em um produto foi uma esp√©cie de ascetismo.  "O seu software de c√≥digo aberto funciona?"  Ent√£o, como voc√™ gosta deste cacto?  Hoje, essa √© uma m√°xima absoluta. </p><br><p>  N√£o consigo imaginar uma empresa que n√£o tenha produtos de c√≥digo aberto no produto.  Gra√ßas √† disponibilidade de informa√ß√µes, software de c√≥digo aberto, a implementa√ß√£o de id√©ias de neg√≥cios se tornou muito mais f√°cil e r√°pida.  Precisa colocar o RMQ no antigo Javascript personalizado e no Windows?  N√£o h√° nada mais f√°cil.  Uma solu√ß√£o pesquisada no Google √© um pouco inapropriada?  - veja como √© feito e adicione os desaparecidos.  O tempo de coloca√ß√£o no mercado ao usar produtos abertos √© reduzido significativamente.  E todo mundo sabe que o lan√ßamento r√°pido de uma solu√ß√£o significa uma vantagem competitiva. </p><br><p>  Github, Stackoverflow, documenta√ß√£o e padr√µes abertos tornam poss√≠vel lan√ßar em quest√£o de semanas o que anteriormente exigiria muitos anos de experi√™ncia em v√°rios campos do conhecimento em inform√°tica. </p><br><p>  E, claro, √© especialmente agrad√°vel que a comunidade de apelidos 1C saia do mundo fechado todos os anos e se funda na TI global.  Por exemplo, ‚Äú1C: Enterprise‚Äù hoje √© um dos idiomas oficiais suportados pelo Github, e as pessoas da comunidade 1C o ‚Äúensinaram‚Äù a esse idioma.  Essa hist√≥ria provavelmente merece um artigo separado, talvez eu o escreva algum dia.  Enquanto isso - tudo de melhor e boa sorte! </p><br><p>  Obrigado pelo seu tempo! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt422151/">https://habr.com/ru/post/pt422151/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt422139/index.html">Vers√£o m√≥vel do Habr. Vers√£o 3.0</a></li>
<li><a href="../pt422141/index.html">Implanta√ß√£o e depura√ß√£o remotas de aplicativos principais dotnet no * nix</a></li>
<li><a href="../pt422143/index.html">A receita para uma revis√£o de c√≥digo √∫til do desenvolvedor da Yandex</a></li>
<li><a href="../pt422147/index.html">Aumente o n√≥ Speedtest</a></li>
<li><a href="../pt422149/index.html">Como √© - ser comiss√°rio de bordo</a></li>
<li><a href="../pt422155/index.html">Frase secreta do auditor</a></li>
<li><a href="../pt422157/index.html">CPE - modelo de pagamento para o usu√°rio envolvido no redirecionamento m√≥vel</a></li>
<li><a href="../pt422161/index.html">Diminuindo o n√≠vel de conectividade usando o DI para melhorar a testabilidade do c√≥digo, exemplo de implementa√ß√£o</a></li>
<li><a href="../pt422163/index.html">Desenvolvimento de um conversor de v√≠deo 264 para avi para dashcam QCM-08DL</a></li>
<li><a href="../pt422165/index.html">Qual cliente da Microsoft devo atualizar para o Dynamics 365?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>