<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™„ ğŸ‰ ğŸ¤ŸğŸ» Peralatan Nirkabel NooLite dan Rumah Pintar (Bagian 1). Arduino ğŸ”ª â˜ï¸ ğŸ‡ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo para pembaca Geektimes! Kali ini saya ingin menyampaikan kepada Anda serangkaian artikel tentang mengintegrasikan peralatan nirkabel nooLite ke d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Peralatan Nirkabel NooLite dan Rumah Pintar (Bagian 1). Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/389067/"><img src="https://habrastorage.org/files/d8c/f00/38e/d8cf0038e7a040fe8e07446481c0a1a0.jpg" alt="nooLite"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Halo para pembaca Geektimes! </font><font style="vertical-align: inherit;">Kali ini saya ingin menyampaikan kepada Anda serangkaian artikel tentang mengintegrasikan peralatan nirkabel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nooLite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke dalam sistem otomasi rumah. </font><font style="vertical-align: inherit;">Siklus ini akan serupa dengan seri artikel yang sudah diterbitkan ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dua</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tiga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) tentang integrasi modul Laurent ke dalam sistem Smart Home, hanya saja ia akan berbicara tentang sistem nooLite dan setelah membaca siklus ini Anda tidak akan memiliki pertanyaan tentang mengelola perangkat nooLite dari Smart Anda di rumah</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang serangkaian artikel</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siklus dibagi menjadi tiga bagian. Pada bagian pertama, Anda akan belajar tentang prinsip-prinsip pengoperasian peralatan nirkabel nooLite dan cara mengelolanya dari proyek Arduino Anda. Bagian </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kedua</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan menjelaskan secara rinci tentang integrasi modul kontrol MT1132 ke dalam Server Arduino Mega dan tentang kemungkinan untuk mengelola Rumah Pintar yang terbuka dalam koneksi ini. Dan </font><font style="vertical-align: inherit;">artikel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ketiga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam seri ini akan dikhususkan untuk topik yang sangat menarik - konsep menciptakan perangkat "100 in 1" berdasarkan Arduino Mega Server. Contoh membuat stasiun solder nirkabel pada AMS akan diperiksa secara terperinci, secara harfiah dari nol - berdasarkan hanya pada satu dimer nirkabel nooLite. Juga akan ada </font><font style="vertical-align: inherit;">bagian </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keempat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari mana Anda akan belajar cara membuat kristal ajaib.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ngomong-ngomong, stasiun solder, yang akan dibahas dalam artikel ketiga, sudah hadir dalam rakitan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terbaru </font><font style="vertical-align: inherit;">dengan nomor 0.14. </font><font style="vertical-align: inherit;">Dan pembaca yang paling ingin tahu tidak sabar menunggu artikel ketiga, tetapi segera unduh kit distribusi dan cari tahu bagaimana semuanya bekerja sendiri. </font></font><br>
<br>
<img src="https://habrastorage.org/files/428/a18/eeb/428a18eeb1f84623bc6c9f8d59e08974.jpg" alt="stasiun solder"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan hal yang hebat adalah bahwa bisa ada ratusan perangkat seperti itu di AMS, dan pada saat yang sama. </font><font style="vertical-align: inherit;">Misalnya, stasiun solder, stasiun cuaca, unit keamanan, pengontrol rumah kaca, dll. Dan semua ini dapat bekerja secara bersamaan atau "memulai" dengan memuat halaman web atau bahkan seluruh situs yang didedikasikan untuk perangkat tertentu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi jangan maju dulu, mari kita tinggalkan yang paling menarik pada akhirnya, tetapi untuk sekarang kita akan melakukan persiapan teoretis yang diperlukan. </font><font style="vertical-align: inherit;">Saya berjanji bahwa semuanya akan dinyatakan dengan cara yang paling sederhana dan paling masuk akal. </font><font style="vertical-align: inherit;">Jadi mari kita mulai.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peralatan NooLite</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peralatan NooLite sudah menjadi sistem yang terkenal dan populer dan ada cukup banyak informasi tentang itu di Internet. </font><font style="vertical-align: inherit;">Saya akan mencoba merangkum poin-poin utama di sini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konsepnya sangat sederhana - ada unit daya untuk mengendalikan cahaya dan berbagai beban, dan panel kontrol yang mengirim perintah ke unit daya ini. </font><font style="vertical-align: inherit;">Dan semua ini bekerja, tentu saja, tanpa partisipasi koneksi kabel. </font><font style="vertical-align: inherit;">Sebenarnya semuanya. </font><font style="vertical-align: inherit;">Keindahan sistem ini adalah bahwa semua komponen dipikirkan, dibuat dengan baik dan melakukan apa yang dikatakannya - mereka dapat mengontrol peralatan yang terhubung dengan andal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada juga sensor nirkabel, kontrol perangkat dari smartphone dan banyak lagi, tetapi dalam satu artikel tidak mungkin mencakup semuanya, di sini kita hanya akan fokus pada integrasi nooLite dengan platform DIY populer - Arduino.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari seluruh spektrum luas peralatan nooLite, kami akan tertarik dengan modul kontrol MT1132 karena ia dirancang untuk terhubung ke Arduino dan komputer papan tunggal seperti Raspberry Pi. Dan itu bekerja pada antarmuka serial sederhana. Ke depan sedikit, saya akan mengatakan bahwa saya menyukai modul karena kesederhanaannya, dapat diprediksi dan operasi yang dapat diandalkan. Dan saya dapat menghargai kualitas-kualitas ini setelah satu bulan berjuang tanpa hasil dengan modul jaringan pada chip W5500, yang tidak ingin bekerja secara normal. </font></font><br>
<br>
<img src="https://habrastorage.org/files/af4/5a9/4dc/af45a94dc2684467920e9191ebcafc83.jpg" alt="Modul MT1132"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan saya terutama menyukai kenyataan bahwa (terlepas dari catu daya) modul terhubung ke Arduino hanya dengan satu (!) Kawat (RX). Yang kedua (TX) bisa dihilangkan sama sekali. Modul ini "satu arah", yaitu dirancang hanya untuk mengirim sinyal kontrol. Rencana perusahaan Nootehnika termasuk pengembangan dan rilis versi "dua arah" dari modul.</font></font><br>
<br>
<img src="https://habrastorage.org/files/60c/dfb/d07/60cdfbd0709b41b88b19a00638637d59.jpg" alt="SU111-300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elemen kedua yang kita butuhkan dari peralatan nooLite adalah unit kontrol daya, misalnya, SU111-300. Sambungan unit ini dasar dan dapat dilihat pada gambar. Dua kabel terhubung ke jaringan 220 volt, dan dua lainnya ke beban. Satu-satunya hal yang ingin saya perhatikan adalah bahwa modul dilengkapi dengan jumper yang memblokir mode peredupan dan, jika Anda ingin menyesuaikan daya, Anda perlu memotong jumper ini (dan ingat untuk mengisolasi kabel telanjang yang dihasilkan).</font></font><br>
<br>
<img src="https://habrastorage.org/files/acf/cd5/4ad/acfcd54ad9ab4c57bf6409799dd3a133.jpg" alt="PU311-2"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak akan memikirkan remote karena itu adalah kontrol "manual", dan kami, sehubungan dengan otomatisasi, lebih tertarik pada otomatis. </font><font style="vertical-align: inherit;">Saya hanya bisa mengatakan bahwa percobaan dilakukan dengan remote control PU311-2, dibuat dalam bentuk saklar dinding dan itu menunjukkan dirinya dengan cara terbaik, yaitu, menyalakan dan mematikan lampu dengan jelas dan tanpa kegagalan. </font><font style="vertical-align: inherit;">Apa, sebenarnya, peralatan yang baik dan berbeda dari yang buruk - Anda tidak akan memerhatikan yang baik.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsep kerja. </font><font style="vertical-align: inherit;">Binding dan Unlinking</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum Anda dapat menghidupkan dan mematikan peralatan listrik menggunakan sistem nooLite, Anda perlu "menghubungkan" modul kontrol ke unit daya yang sesuai. Ini dilakukan dengan menggunakan prosedur yang disebut. "Bindings" dan "unying", dijelaskan secara rinci dalam dokumentasi nooLite. Singkatnya, semuanya bermuara pada menekan sepasang tombol pada blok yang ditautkan dan tidak menimbulkan kesulitan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus ketika modul kontrol MT1132 digunakan sebagai pengganti remote control, prosedurnya terjadi dengan cara yang sedikit berbeda. Yaitu: karena modul tidak memiliki tombol, Anda perlu membuat dan mengirim perintah kontrol secara terprogram pada saluran yang diinginkan, dan kemudian tekan tombol pada unit daya, mengonfirmasi "mengikat" atau "membuka ikatan".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saluran adalah "garis kontrol" dan ada 32 di antaranya dalam modul MT1132, sebagaimana dibuktikan oleh dua digit terakhir dalam namanya. </font><font style="vertical-align: inherit;">Ini berarti bahwa dengan modul ini Anda dapat mengelola 32 kelompok peralatan yang terpisah, yang lebih dari cukup untuk sebuah apartemen atau rumah kecil. </font><font style="vertical-align: inherit;">Jika Anda memiliki rumah besar, maka modul dapat bekerja bersama dan skala ke sejumlah saluran.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deskripsi Protokol</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumen yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bagus </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">di</font></a><font style="vertical-align: inherit;"> situs web perusahaan Nootehnika </font><font style="vertical-align: inherit;">yang secara komprehensif dan terperinci menggambarkan koneksi modul dan protokol kontrolnya. </font><font style="vertical-align: inherit;">Saya tidak akan mengacaukan artikel dengan rincian teknis yang tidak perlu, siapa pun dapat membaca dokumen ini, saya hanya akan menjelaskan poin utama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengontrol modul, kita perlu membentuk perintah kontrol yang terdiri dari 12 byte. </font><font style="vertical-align: inherit;">Prinsip-prinsip pembentukan tim ini dijelaskan dalam dokumen di atas. </font><font style="vertical-align: inherit;">Dan seperti yang akan Anda lihat di bawah, semua aturan ini sudah diprogram dalam fungsi kontrol dan kita hanya perlu menggunakannya untuk mengeluarkan perintah ke modul.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tim uji</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nooLite memiliki sistem perintah yang cukup berkembang, dari mana kami akan memilih yang paling sederhana dan paling umum dan menggambarkan sistem menggunakan contoh mereka.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jepret</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lepaskan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inklusi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak aktif</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan daya (peredupan)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memahami bagaimana tim dasar bekerja, Anda dapat dengan mudah menggunakan yang lain.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menghubungkan modul MT1132</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang sudah saya katakan, modul MT1132 terhubung secara harfiah dengan satu kabel (kecuali untuk daya). </font><font style="vertical-align: inherit;">Modul ini dapat ditenagai oleh voltase 5 volt dan voltase 3,3 volt. </font><font style="vertical-align: inherit;">Oleh karena itu, tidak ada masalah menghubungkan ke 5-volt Arduino Mega atau 3,3 volt Arduino Due. </font><font style="vertical-align: inherit;">Satu-satunya titik adalah bahwa dengan daya yang berkurang, kisaran operasi sistem yang andal berkurang. </font><font style="vertical-align: inherit;">Dan ini harus diperhitungkan jika Anda ingin memberi daya pada modul dari tegangan 3,3 volt.</font></font><br>
<br>
<img src="https://habrastorage.org/files/fb8/2a4/d76/fb82a4d769cb49bda099e57591c13157.jpg" alt="Arduino"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul ini memiliki pin RX dan TX untuk menerima dan mengirim sinyal melalui antarmuka serial. </font><font style="vertical-align: inherit;">Yang penting untuk pengoperasian modul adalah koneksi RX, untuk menerima perintah kontrol dari pengontrol. </font><font style="vertical-align: inherit;">Oleh karena itu, pin RX di sisi modul terhubung ke pin TX (18) di sisi Arduino. </font><font style="vertical-align: inherit;">Pinout ini berlaku untuk Arduino Mega dan Arduino Due.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian perangkat lunak</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita cari tahu bagaimana mengelola semua ekonomi ini dari sketsa di Arduino. </font><font style="vertical-align: inherit;">Pertama, inisialisasi Serial1, yang kami hubungkan dengan modul MT1132 (ini dilakukan pada frekuensi standar 9600):</font></font><br>
<br>
<pre><code class="java hljs">Serial1.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kode fungsi kontrol utama:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nooSendCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> channel, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> command, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> format)</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> buf[<span class="hljs-number"><span class="hljs-number">12</span></span>];<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">12</span></span>; i++) {<font></font>
    buf[i] = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  }<font></font>
<font></font>
  buf[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">85</span></span>;<font></font>
  buf[<span class="hljs-number"><span class="hljs-number">1</span></span>] = B01010000;<font></font>
  buf[<span class="hljs-number"><span class="hljs-number">2</span></span>] = command;<font></font>
  buf[<span class="hljs-number"><span class="hljs-number">3</span></span>] = format;<font></font>
  buf[<span class="hljs-number"><span class="hljs-number">5</span></span>] = channel;<font></font>
  buf[<span class="hljs-number"><span class="hljs-number">6</span></span>] = data;<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> checkSum = <span class="hljs-number"><span class="hljs-number">0</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) {<font></font>
    checkSum += buf[i];<font></font>
  }<font></font>
<font></font>
  buf[<span class="hljs-number"><span class="hljs-number">10</span></span>] = lowByte(checkSum);<font></font>
  buf[<span class="hljs-number"><span class="hljs-number">11</span></span>] = <span class="hljs-number"><span class="hljs-number">170</span></span>;<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; (<span class="hljs-number"><span class="hljs-number">12</span></span>); i++) {<font></font>
    Serial1.write(buf[i]);<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada prinsipnya, kita bahkan tidak perlu tahu cara kerjanya, kita dapat menggunakannya dalam mode "kotak hitam" atau semacam API, dengan antarmuka tertentu mencuat. </font><font style="vertical-align: inherit;">Kami hanya perlu tahu cara menggunakan antarmuka ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, hanya ada empat parameter - saluran, perintah, data, dan format. </font><font style="vertical-align: inherit;">Anda dapat membaca prinsip dengan mana permintaan untuk API ini dapat dihasilkan dalam dokumen yang disebutkan di atas, tetapi kami akan menyederhanakan tugas kami lebih jauh dan membungkus antarmuka ini dalam perintah kontrol perangkat nooLite sederhana.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nooBind</span></span></span><span class="hljs-function">  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function">         </span></span>{nooSendCommand(ch, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nooUnbind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function">         </span></span>{nooSendCommand(ch,  <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nooOn</span></span></span><span class="hljs-function">    </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function">         </span></span>{nooSendCommand(ch,  <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nooOff</span></span></span><span class="hljs-function">   </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function">         </span></span>{nooSendCommand(ch,  <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nooValue</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> </span></span>{nooSendCommand(ch,  <span class="hljs-number"><span class="hljs-number">6</span></span>, v, <span class="hljs-number"><span class="hljs-number">1</span></span>);}
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tim yang relatif kompleks hanyalah yang terakhir, di sana, selain saluran, level daya juga diatur. </font><font style="vertical-align: inherit;">Ada juga tim dalam sketsa yang tidak akan kita bahas sekarang, tetapi mereka dibentuk dengan mudah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya ... itu dia! </font><font style="vertical-align: inherit;">Tidak ada tempat yang lebih mudah. </font><font style="vertical-align: inherit;">Dalam kode tersebut, perintah kontrol terlihat seperti ini:</font></font><br>
<br>
<pre><code class="java hljs">nooBind(ch);<font></font>
nooUnbind(ch);<font></font>
nooOn(ch);<font></font>
nooOff(ch);<font></font>
nooValue(ch, v);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita berlatih mempraktikkan manajemen modul daya nooLite. </font><font style="vertical-align: inherit;">Jadi, kami mengikat blok daya pada saluran nol:</font></font><br>
<br>
<pre><code class="java hljs">nooBind(<span class="hljs-number"><span class="hljs-number">0</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LED pada unit daya mulai berkedip. </font><font style="vertical-align: inherit;">Tekan tombol pada blok - LED berhenti berkedip - blok daya terpasang. </font><font style="vertical-align: inherit;">Alih-alih saluran nol, Anda dapat menggunakan yang lain. </font><font style="vertical-align: inherit;">Dan Anda dapat dengan mudah menghasilkan nomor saluran dalam kode sketsa sesuai dengan kebutuhan Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nyalakan lampu (jika kita mengikat lampu pada saluran nol, maka perintah untuk itu harus dikirim pada saluran ini):</font></font><br>
<br>
<pre><code class="java hljs">nooOn(<span class="hljs-number"><span class="hljs-number">0</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atur daya (kecerahan lampu):</font></font><br>
<br>
<pre><code class="java hljs">nooValue(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini Anda perlu mengatakan sedikit tentang aturan pembentukan tim yang menetapkan tingkat kekuatan. Nilai daya tidak berubah dari 0 menjadi 255, seperti yang dipikirkan orang, tetapi dari 35 menjadi 155. Jika nilainya lebih dari 155, maka daya akan maksimum, jika 0, maka ini akan setara dengan perintah shutdown. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini (untuk berjaga-jaga) rumus yang menerjemahkan nilai "standar" dari 0 hingga 100 ke dalam format yang dipahami oleh modul nooLite:</font></font><br>
<br>
<pre><code class="java hljs">v = x * <span class="hljs-number"><span class="hljs-number">1.2</span></span> + <span class="hljs-number"><span class="hljs-number">34</span></span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan menggunakan rumus ini, Anda dapat mengatur kecerahan lampu dalam persentase daya yang biasa. </font><font style="vertical-align: inherit;">Dan, tentu saja, jika Anda perlu menyesuaikan daya secara nonlinier, maka Anda dapat membuat variabel v menurut hukum apa pun atau bahkan hanya memilih nilai tetap. </font><font style="vertical-align: inherit;">Ini akan dibahas pada bagian ketiga dari siklus, ketika kita akan menyesuaikan suhu pemanasan dari stasiun solder. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Matikan perangkat:</font></font><br>
<br>
<pre><code class="java hljs">nooOff(<span class="hljs-number"><span class="hljs-number">0</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lepaskan:</font></font><br>
<br>
<pre><code class="java hljs">nooUnbind(<span class="hljs-number"><span class="hljs-number">0</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LED pada unit daya mulai berkedip. </font><font style="vertical-align: inherit;">Kami mengkonfirmasi decoupling dengan menekan tombol pada unit daya. </font><font style="vertical-align: inherit;">Itu saja, sekarang unit daya telah berhenti merespons perintah kami dan kami dapat "memotret" lagi di salah satu dari 32 saluran modul no11ite MT1132. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini sketsa lengkapnya.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode sketsa lengkap</font></font></b><div class="spoiler_text">byte const PIN_TX = 18; // TX PIN (to RX noolite)<br>
byte const PIN_RX = 19; // RX PIN (to TX noolite)<br>
<br>
void nooSendCommand(byte channel, byte command, byte data, byte format) {<br>
 byte buf[12];<br>
<br>
for (byte i = 0; i &lt; 12; i++) {<br>
 buf[i] = 0;<br>
 }<br>
<br>
buf[0] = 85;<br>
 buf[1] = B01010000;<br>
 buf[2] = command;<br>
 buf[3] = format;<br>
 buf[5] = channel;<br>
 buf[6] = data;<br>
<br>
int checkSum = 0;<br>
 for (byte i = 0; i &lt; 10; i++) {<br>
 checkSum += buf[i];<br>
 }<br>
<br>
buf[10] = lowByte(checkSum);<br>
 buf[11] = 170;<br>
<br>
for (byte i = 0; i &lt; (12); i++) {<br>
 Serial1.write(buf[i]);<br>
 }<br>
}<br>
<br>
void nooBind (byte ch) {nooSendCommand(ch, 15, 0, 0);}<br>
void nooUnbind (byte ch) {nooSendCommand(ch, 9, 0, 0);}<br>
<br>
void nooOn (byte ch) {nooSendCommand(ch, 2, 0, 0);}<br>
void nooOff (byte ch) {nooSendCommand(ch, 0, 0, 0);}<br>
void nooTrigger(byte ch) {nooSendCommand(ch, 4, 0, 0);}<br>
void nooCancel (byte ch) {nooSendCommand(ch, 10, 0, 0);}<br>
<br>
void nooUp (byte ch) {nooSendCommand(ch, 3, 0, 0);}<br>
void nooDown (byte ch) {nooSendCommand(ch, 1, 0, 0);}<br>
void nooRevers (byte ch) {nooSendCommand(ch, 5, 0, 0);}<br>
<br>
void nooValue (byte ch, byte v) {nooSendCommand(ch, 6, v, 1);}<br>
<br>
void setup() {<br>
 Serial1.begin(9600);<br>
<br>
/*     <br>
      loop(),    */<br>
<br>
//nooBind(0);<br>
<br>
//nooOn(0);<br>
 //nooOff(0);<br>
 //nooValue(0, 100);<br>
<br>
//nooUnbind(0); <br>
}<br>
<br>
void loop(){<br>
<br>
}<br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subtotal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, </font><font style="vertical-align: inherit;">tidak ada yang rumit </font><font style="vertical-align: inherit;">dalam mengendalikan modul daya </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nooLite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggunakan Arduino, sebaliknya, kontrolnya sangat sederhana: modul terhubung dengan satu kawat, dan perintahnya hampir merupakan bahasa manusia yang alami - "nyalakan saluran 0", "matikan saluran 1", "Untuk mengatur kekuatan 50% pada saluran 3" benar-benar tidak sederhana.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonus untuk mereka yang telah membaca sampai akhir</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa hari yang lalu, versi baru dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server dirilis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada nomor 0.14, di mana semua penyakit masa kanak-kanak teknologi diatasi dan yang bekerja dengan cepat dan stabil. </font><font style="vertical-align: inherit;">Dan versi yang sama berisi inti kendali instrumen nooLite terintegrasi dan cara kerjanya, Anda akan belajar dari artikel berikutnya dalam seri â€œPeralatan Nirkabel NooLite dan Rumah Pintar (Bagian 2). </font><font style="vertical-align: inherit;">Arduino Mega Server. " </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian kedua</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ketiga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keempat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari siklus.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id389067/">https://habr.com/ru/post/id389067/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id389051/index.html">CNET Smart Home: Gadget Testing Ground</a></li>
<li><a href="../id389053/index.html">Rumah pintar. Otak</a></li>
<li><a href="../id389057/index.html">CES 2016: Pengumuman LG dan Samsung untuk rumah pintar</a></li>
<li><a href="../id389063/index.html">Bagaimana mobil persegi tahun 80-an dirampingkan pada tahun 90-an</a></li>
<li><a href="../id389065/index.html">Penyelidikan fajar mengirim gambar rinci kawah Ceres</a></li>
<li><a href="../id389069/index.html">Remix OS, OS multi-jendela berbasis Android, sekarang tersedia untuk PC</a></li>
<li><a href="../id389071/index.html">Gangguan dalam sistem satelit navigasi global</a></li>
<li><a href="../id389073/index.html">Branto ORB: bola yang hampir ajaib untuk mengendalikan rumah Anda</a></li>
<li><a href="../id389075/index.html">Ğ Ğ°ÑĞ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ° Ğ² Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ³Ğ¾Ğ´</a></li>
<li><a href="../id389077/index.html">Pendiri Oculus: PC berdaya rendah adalah hambatan utama untuk mempopulerkan realitas virtual</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>