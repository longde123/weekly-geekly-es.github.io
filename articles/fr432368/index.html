<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥩 👰🏿 🔼 Avant vous - React Modern Web App 👩🏽‍⚕️ 🍲 🤛🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Avant de commencer à créer à partir de zéro Modern Web App, vous devez comprendre ce qu'est une application Web moderne? 


 Modern Web App (MWA) est ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Avant vous - React Modern Web App</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432368/"><p>  Avant de commencer à créer à partir de zéro <strong>Modern Web App,</strong> vous devez comprendre ce qu'est une application Web moderne? </p><br><p> Modern Web App (MWA) est une application qui respecte toutes les normes Web modernes.  Parmi eux, l'application Web progressive est la possibilité de télécharger une version de navigateur mobile sur votre téléphone et de l'utiliser comme une application à part entière.  C'est aussi l'occasion de faire défiler le site hors ligne à la fois depuis un appareil mobile et depuis un ordinateur;  conception de matériaux modernes;  optimisation parfaite des moteurs de recherche;  et naturellement - une vitesse de téléchargement élevée. </p><br><p><img src="https://habrastorage.org/webt/cp/p4/sr/cpp4srk-it2nhotgkfg5q6kczqi.png"></p><br><p>  Voici ce qui se passera dans notre MWA (je vous conseille d'utiliser cette navigation sur l'article): </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Application Web universelle</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Material-ui</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fractionnement de code</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exemple de redux</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Version mobile</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Progressive Web App</a> </li><li>  Babel 7, Webpack et plus </li></ul><br><p>  Les gens sur Habré sont des entreprises, alors attrapez immédiatement un lien vers le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">référentiel GitHub</a> , une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archive</a> de chacune des étapes de développement et une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">démo</a> .  Cet article est destiné aux développeurs familiarisés avec node.js et réagissant.  Toute la théorie nécessaire est présentée dans le volume nécessaire.  Élargissez vos horizons en cliquant sur les liens. </p><br><p>  Commençons! </p><a name="habracut"></a><br><a name="ssr"></a><br><h3 id="1-universal">  1. Universel </h3><br><p> Actions standard: créez un répertoire de travail et exécutez <code>git init</code> .  Ouvrez <em>package.json</em> et ajoutez quelques lignes: </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"@babel/cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.5"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@babel/core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.6"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@babel/preset-env"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.6"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@babel/preset-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@babel/register"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"babel-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^8.0.4"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"babel-plugin-root-import"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"express"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.16.4"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.6.3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.6.3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react-helmet"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react-router"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.3.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react-router-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.3.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"webpack"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.26.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"webpack-cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.1.2"</span></span> }</code> </pre> <br><p>  Nous <code>npm install</code> et, pendant son installation, nous comprenons. </p><br><p>  Puisque nous sommes au début de 2018 et 2019, notre application Web sera <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">universelle (ou isomorphe)</a> , à la fois à l'arrière et à l'avant, il y aura une version <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ECMAScript</a> non inférieure à ES2017.  Pour ce faire, <em>index.js</em> (le fichier d'entrée de l'application) connecte babel / register, et <strong>babel</strong> à la volée transforme tout le code ES qui le suit en JavaScript convivial par navigateur en utilisant babel / preset-env et babel / preset-react.  Pour faciliter le développement, j'utilise généralement le plugin babel-plugin-root-import, avec lequel toutes les importations du répertoire racine ressembleront à '~ /', et à partir de src / - '&amp; /'.  Alternativement, vous pouvez écrire de longs chemins ou utiliser un alias à partir du webpack. </p><br><p>  <em>index.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"@babel/register"</span></span>)(); <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"./app"</span></span>);</code> </pre> <br><p>  <em>.babelrc</em> </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"presets"</span></span>: [ [ <span class="hljs-string"><span class="hljs-string">"@babel/preset-env"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">"targets"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"node"</span></span>: <span class="hljs-string"><span class="hljs-string">"current"</span></span> } } ], <span class="hljs-string"><span class="hljs-string">"@babel/preset-react"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"plugins"</span></span>: [ [<span class="hljs-string"><span class="hljs-string">"babel-plugin-root-import"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">"paths"</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">"rootPathPrefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"~"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"rootPathSuffix"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"rootPathPrefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"&amp;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"rootPathSuffix"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/"</span></span> }] }] ] }</code> </pre> <br><p>  Il est temps de configurer <strong>Webpack</strong> .  Nous créons <em>webpack.config.js</em> et utilisons le code (ci-après, faites attention aux commentaires dans le code). </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">// ,      Universal web app entry: { client: './src/client.js' }, // ,      webpack' output: { path: path.resolve(__dirname, 'public'), publicPath: '/' }, module: { //  babel-loader     ECMAScript    // JavaScript.       /public rules: [ { test: /\.js$/, exclude: /node_modules/, loader: "babel-loader" } ] } }</span></span></code> </pre> <br><p>  A partir de ce moment, le plaisir commence.  Il est temps de développer le côté serveur de l'application.  <strong>Le rendu côté serveur</strong> (SSR) est une technologie conçue pour accélérer le chargement d'une application Web à certains moments et résoudre le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">débat éternel</a> sur l'optimisation des moteurs de recherche dans les applications à page unique (SEO in SPA).  Pour ce faire, nous prenons le modèle HTML, y mettons le contenu et l'envoyons à l'utilisateur.  Le serveur le fait très rapidement - la page est dessinée en quelques millisecondes.  Cependant, il n'y a aucun moyen de manipuler le DOM sur le serveur, donc la partie client de l'application rafraîchit la page et elle devient finalement interactive.  D'accord?  Nous nous développons! </p><br><p>  <em>app.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> express <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'express'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> path <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'path'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> stateRoutes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server/stateRoutes'</span></span> <span class="hljs-comment"><span class="hljs-comment">//   Express     Node.js const app = express() //    app.use(express.static('public')) app.use('/assets', express.static(path.resolve(__dirname, 'assets'))) //    3000 ,      const PORT = process.env.PORT || 3000 app.listen(PORT, '0.0.0.0', () =&gt; { console.log(`The app is running in PORT ${PORT}`) }) //   -  GET-   state  -  //    ,     . stateRoutes(app)</span></span></code> </pre> <br><p>  <em>server / stateRoutes.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ssr <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//        // ssr - ,   HTML app.get('*', (req, res) =&gt; { const response = ssr(req.url) res.send(response) }) }</span></span></code> </pre> <br><p>  Le <em>fichier server / server.js</em> collecte le contenu généré par react et le transmet au modèle HTML - <em>/server/template.js</em> .  Il convient de préciser que le serveur utilise un routeur statique, car nous ne voulons pas modifier l'url de la page lors du chargement.  Et <strong>react-casque</strong> est une bibliothèque qui simplifie considérablement le travail avec les métadonnées (et en effet avec la balise head). </p><br><p>  <em>server / server.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { renderToString } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom/server'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { StaticRouter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/app/App'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> template <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./template'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      const reactRouterContext = {} //     HTML let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;App/&gt; &lt;/StaticRouter&gt; ) //  &lt;head&gt;  HTML- const helmet = Helmet.renderStatic() //   HTML-     return template(helmet, content) }</span></span></code> </pre> <br><p>  Dans <em>server / template.js,</em> dans la tête, nous imprimons les données du casque, connectons le favicon, les styles du répertoire statique / actifs.  Dans le corps se trouvent le contenu et le bundle webpack client.js situés dans le dossier / public, mais comme il est statique, nous allons à l'adresse du répertoire racine - /client.js. </p><br><p>  <em>serveur / template.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// HTML- export default function template(helmet, content = '') { const scripts = `&lt;script src="/client.js"&gt;&lt;/script&gt;` const page = `&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt; ${helmet.title.toString()} ${helmet.meta.toString()} ${helmet.link.toString()} &lt;meta charset="utf-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt; &lt;meta name="theme-color" content="#810051"&gt; &lt;link rel="shortcut icon" href="/assets/logos/favicon.ico" type="image/x-icon"&gt; &lt;link rel="icon" href="/assets/logos/favicon.ico" type="image/x-icon"&gt; &lt;link rel="stylesheet" href="/assets/global.css"&gt; &lt;/head&gt; &lt;body&gt; &lt;div class="content"&gt; &lt;div id="app" class="wrap-inner"&gt; &lt;!--- magic happens here --&gt; ${content} &lt;/div&gt; &lt;/div&gt; ${scripts} &lt;/body&gt; ` return page }</span></span></code> </pre> <br><p>  Nous nous tournons vers le simple - le côté client.  Le <em>fichier src / client.js</em> restaure le code HTML généré par le serveur sans mettre à jour le DOM et le rend interactif.  (Plus d'informations <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  La fonction de réaction d' <strong>hydrate le</strong> fait.  Et maintenant, nous n'avons plus rien à voir avec un routeur statique.  Nous utilisons celui habituel - BrowserRouter. </p><br><p>  <em>src / client.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { hydrate } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BrowserRouter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app/App'</span></span> hydrate( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">BrowserRouter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">BrowserRouter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#app'</span></span>) )</code> </pre> <br><p>  Déjà dans deux fichiers, le composant React de l'application a réussi à s'allumer.  Il s'agit du composant principal de l'application de bureau qui effectue le routage.  Son code est très courant: </p><br><p>  <em>src / app / App.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Switch, Route } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Home <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Home'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">App</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Switch</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Route</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">exact</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">component</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{Home}/</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Switch</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br><p>  Eh bien, <em>src / app / Home.js.</em>  Remarquez comment fonctionne Helmet - le wrapper de balise head habituel. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Home</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Helmet</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Universal Page</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Modern Web App - Home Page"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Helmet</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Welcome to the page of Universal Web App </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br><p>  Félicitations!  Nous avons démonté la première partie du développement de MWA!  Il ne restait que quelques touches pour tester le tout.  Idéalement, vous pouvez remplir le dossier <em>/ assets</em> avec des fichiers de style global et un favicon selon le modèle - server / template.js.  Nous n'avons pas non plus de commandes de lancement d'application.  Retour à <em>package.json</em> : </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run pack &amp;&amp; npm run startProd"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"startProd"</span></span>: <span class="hljs-string"><span class="hljs-string">"NODE_ENV=production node index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"pack"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack --mode production --config webpack.config.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"startDev"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run packDev &amp;&amp; node index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"packDev"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack --mode development --config webpack.config.js"</span></span> }</code> </pre> <br><p>  Vous pouvez remarquer deux catégories de commandes - Prod et Dev.  Ils diffèrent dans la configuration de webpack v4.  À propos de <code>--mode</code> mérite d'être lu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br>  Assurez-vous d'essayer l'application universelle résultante sur <strong>localhost: 3000</strong> </p><br><a name="material"></a><br><h3 id="2-material-ui">  2. Material-ui </h3><br><p>  Cette partie du didacticiel se concentrera sur la connexion à l'application Web avec le SSR de la bibliothèque material-ui.  Pourquoi exactement elle?  Tout est simple - la bibliothèque se développe activement, est maintenue et possède une documentation complète.  Avec lui, vous pouvez créer une belle interface utilisateur juste pour cracher. </p><br><p>  Le schéma de connexion lui-même, adapté à notre application, est décrit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Eh bien, faisons-le. </p><br><p>  Installez les dépendances nécessaires: </p><br><pre> <code class="bash hljs">npm i @material-ui/core jss react-jss</code> </pre> <br><p>  Ensuite, nous devons apporter des modifications aux fichiers existants.  Dans <em>server / server.js,</em> nous <em>encapsulons</em> notre application dans JssProvider et MuiThemeProvider, qui fourniront des composants material-ui et, très important, l'objet sheetsRegistry - css, qui doit être placé dans le modèle HTML.  Côté client, nous utilisons uniquement MuiThemeProvider, en lui fournissant un objet thème. </p><br><div class="spoiler">  <b class="spoiler_title">serveur, modèle et client</b> <div class="spoiler_text"><p>  <em>server / server.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { renderToString } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom/server'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { StaticRouter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-comment"><span class="hljs-comment">//     material-ui import { SheetsRegistry } from 'react-jss/lib/jss' import JssProvider from 'react-jss/lib/JssProvider' import { MuiThemeProvider, createMuiTheme, createGenerateClassName, } from '@material-ui/core/styles' import purple from '@material-ui/core/colors/purple' import App from '&amp;/app/App' import template from './template' export default function render(url) { const reactRouterContext = {} //  sheetsRegistry -    const sheetsRegistry = new SheetsRegistry() const sheetsManager = new Map() //   -        const theme = createMuiTheme({ palette: { primary: purple, secondary: { main: '#f44336', }, }, //      3.*.*.   v4 -  typography: { useNextVariants: true, }, }) const generateClassName = createGenerateClassName() //     let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;JssProvider registry={sheetsRegistry} generateClassName={generateClassName}&gt; &lt;MuiThemeProvider theme={theme} sheetsManager={sheetsManager}&gt; &lt;App/&gt; &lt;/MuiThemeProvider&gt; &lt;/JssProvider&gt; &lt;/StaticRouter&gt; ) const helmet = Helmet.renderStatic() //  sheetsRegistry        html return template(helmet, content, sheetsRegistry) }</span></span></code> </pre> <br><p>  <em>serveur / template.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">helmet, content = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sheetsRegistry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> css = sheetsRegistry.toString() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scripts = <span class="hljs-string"><span class="hljs-string">`&lt;script src="/client.js"&gt;&lt;/script&gt;`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> page = <span class="hljs-string"><span class="hljs-string">`&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt; ... &lt;/head&gt; &lt;body&gt; &lt;div class="content"&gt;...&lt;/div&gt; &lt;style id="jss-server-side"&gt;</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${css}</span></span></span><span class="hljs-string">&lt;/style&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${scripts}</span></span></span><span class="hljs-string"> &lt;/body&gt; `</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> page }</code> </pre> <br><p>  <em>src / client.js</em> </p><br><pre> <code class="javascript hljs">... import MuiThemeProvider <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/styles/MuiThemeProvider'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> createMuiTheme <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/styles/createMuiTheme'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> purple <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/colors/purple'</span></span> <span class="hljs-comment"><span class="hljs-comment">//       ,     //         const theme = createMuiTheme({ palette: { primary: purple, secondary: { main: '#f44336', }, }, typography: { useNextVariants: true, }, }) //     hydrate( &lt;MuiThemeProvider theme={theme}&gt; &lt;BrowserRouter&gt; &lt;App/&gt; &lt;/BrowserRouter&gt; &lt;/MuiThemeProvider&gt;, document.querySelector('#app') )</span></span></code> </pre> </div></div><br><p>  Maintenant, je propose d'ajouter un petit design élégant au composant Home.  Vous pouvez consulter tous les composants Material-UI sur leur site officiel, ici Paper, Button, AppBar, Toolbar et Typography suffisent. </p><br><p>  <em>src / app / Home.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Paper <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Paper'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Typography <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Typography'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Button'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Header <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Header'</span></span> <span class="hljs-comment"><span class="hljs-comment">// Inline styles -       css  react const styles = { paper: { margin: "auto", marginTop: 200, width: "40%", padding: 15 }, btn: { marginRight: 20 } } export default function Home() { return( &lt;div&gt; &lt;Helmet&gt; &lt;title&gt;Universal Material Page&lt;/title&gt; &lt;/Helmet&gt; &lt;Header/&gt; &lt;Paper elevation={4} style={styles.paper} align="center"&gt; &lt;Typography variant="h5"&gt;Universal Web App with Material-ui&lt;/Typography&gt; &lt;br/&gt; &lt;Button variant="contained" color="primary" style={styles.btn}&gt;I like it!&lt;/Button&gt; &lt;/Paper&gt; &lt;/div&gt; ) }</span></span></code> </pre> <br><p>  <em>src / app / Header.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AppBar <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/AppBar'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Toolbar <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Toolbar'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Typography <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Typography'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Header</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppBar</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"static"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Toolbar</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">variant</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"h5"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"inherit"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Modern Web App </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Toolbar</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppBar</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ) }</code> </pre> <br><p>  Maintenant, quelque chose comme ça devrait se révéler: </p><br><p><img src="https://habrastorage.org/webt/hw/sz/tz/hwsztzwymykxqtpq09zvrriozvy.png"></p><br><a name="splitting"></a><br><h3 id="3-code-splitting">  3. Fractionnement du code </h3><br><p>  Si vous prévoyez d'écrire quelque chose de plus qu'une liste TODO, votre application augmentera proportionnellement au bundle client.js.  Pour éviter un long chargement de pages chez l'utilisateur, le fractionnement de code a été inventé depuis longtemps.  Cependant, une fois que Ryan Florence, l'un des créateurs de React-router, a effrayé les développeurs potentiels avec sa phrase: </p><br><blockquote>  Godspeed ceux qui tentent les applications de partage de code rendues par le serveur. </blockquote><p>  <em>Bonne chance à tous ceux qui décident de créer des applications SSR avec fractionnement de code</em> </p><br><p>  Nous sommes repoussés - nous le ferons!  Installez le nécessaire: <cut></cut></p><br><pre> <code class="bash hljs">npm i @babel/plugin-syntax-dynamic-import babel-plugin-dynamic-import-node react-loadable</code> </pre> <br><p>  Le problème n'est qu'une fonction - l'importation.  Webpack prend en charge cette fonction d'importation dynamique asynchrone, mais la compilation de babel sera un énorme problème.  Heureusement, en 2018, les bibliothèques sont arrivées pour aider à résoudre ce problème.  babel / plugin-syntax-dynamic-import et babel-plugin-dynamic-import-node nous sauveront de l'erreur <code>"Unexpected token when using import()"</code> .  Pourquoi deux bibliothèques pour une tâche?  dynamic-import-node est nécessaire spécifiquement pour le rendu du serveur et récupérera les importations sur le serveur à la volée: </p><br><p>  <em>index.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"@babel/register"</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [<span class="hljs-string"><span class="hljs-string">"@babel/plugin-syntax-dynamic-import"</span></span>, <span class="hljs-string"><span class="hljs-string">"dynamic-import-node"</span></span>] }); <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"./app"</span></span>);</code> </pre> <br><p>  En même temps, nous modifions le <em>fichier de</em> configuration global babel <em>.babelrc</em> </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"plugins"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"@babel/plugin-syntax-dynamic-import"</span></span>, <span class="hljs-string"><span class="hljs-string">"react-loadable/babel"</span></span>, ... ]</code> </pre> <br><p>  Ici semblait <strong>être réactif</strong> .  Cette bibliothèque avec une excellente documentation rassemblera tous les modules cassés par l'importation du webpack sur le serveur, et le client les récupérera tout aussi facilement.  Pour ce faire, le serveur doit télécharger tous les modules: </p><br><p>  <em>app.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> ... Loadable.preloadAll().then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> app.listen(PORT, <span class="hljs-string"><span class="hljs-string">'0.0.0.0'</span></span>, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`The app is running in PORT </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${PORT}</span></span></span><span class="hljs-string">`</span></span>) })) ...</code> </pre> <br><p>  Les modules eux-mêmes sont très faciles à connecter.  Jetez un œil au code: </p><br><p>  <em>src / app / App.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Switch, Route } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loading <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/Loading'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AsyncHome = Loadable({ <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* webpackChunkName: "Home" */</span></span> <span class="hljs-string"><span class="hljs-string">'./Home'</span></span>), <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: Loading, <span class="hljs-attr"><span class="hljs-attr">delay</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span>, }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">App</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Switch</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Route</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">exact</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">component</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{AsyncHome}/</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Switch</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br><p>  React-loadable charge de manière asynchrone le composant Home, indiquant clairement au webpack qu'il doit être appelé Home (oui, c'est un cas rare lorsque les commentaires ont un sens).  <code>delay: 300</code> signifie que si après 300 ms le composant ne se charge toujours pas, vous devez montrer que le téléchargement est toujours en cours.  Il traite du chargement: </p><br><p>  <em>src / Loading.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CircularProgress <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/CircularProgress'</span></span> <span class="hljs-comment"><span class="hljs-comment">//        .   const styles = { div: { width: '20%', margin: 'auto', transition: 'margin 1s', backgroundColor: 'lightgreen', color: 'white', cursor: 'pointer', borderRadius: '3px' } } export default function Loading(props) { if (props.error) { //      (  PWA  ),  //  ,      return &lt;div style={styles.div} onClick={ () =&gt; window.location.reload(true) } align="center"&gt; &lt;h3&gt; Please, click here or reload the page. New content is ready. &lt;/h3&gt; &lt;/div&gt; } else if (props.pastDelay) { //     300,    return &lt;CircularProgress color="primary"/&gt; } else { //    Loading  return null } }</span></span></code> </pre> <br><p>  Pour indiquer clairement au serveur les modules que nous importons, nous devons enregistrer: </p><br><pre> <code class="javascript hljs">Loadable({ <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-string"><span class="hljs-string">'./Bar'</span></span>), <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: [<span class="hljs-string"><span class="hljs-string">'./Bar'</span></span>], <span class="hljs-attr"><span class="hljs-attr">webpack</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.resolveWeak(<span class="hljs-string"><span class="hljs-string">'./Bar'</span></span>)], });</code> </pre> <br><p>  Mais pour ne pas répéter le même code, il existe un plugin / babel réactif que nous avons déjà connecté avec succès à <em>.babelrc</em> .  Maintenant que le serveur sait quoi importer, vous devez savoir ce qui sera rendu.  Le workflow est un peu comme un casque: </p><br><p>  <em>server / server.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { getBundles } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable/webpack'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> stats <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'~/public/react-loadable.json'</span></span> ... let modules = [] <span class="hljs-comment"><span class="hljs-comment">//      modules let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;JssProvider registry={sheetsRegistry} generateClassName={generateClassName}&gt; &lt;MuiThemeProvider theme={theme} sheetsManager={sheetsManager}&gt; &lt;Loadable.Capture report={moduleName =&gt; modules.push(moduleName)}&gt; &lt;App/&gt; &lt;/Loadable.Capture&gt; &lt;/MuiThemeProvider&gt; &lt;/JssProvider&gt; &lt;/StaticRouter&gt; ) ... //     ( ) let bundles = getBundles(stats, modules) //    HTML- return template(helmet, content, sheetsRegistry, bundles)</span></span></code> </pre> <br><p>  Pour vous assurer que le client charge tous les modules rendus sur le serveur, nous devons les corréler avec les bundles créés par webpack.  Pour ce faire, apportez des modifications à la configuration du collecteur.  Le plugin react-loadable / webpack écrit tous les modules dans un fichier séparé.  Nous devons également dire à webpack de sauvegarder correctement les modules après l'importation dynamique - dans l'objet de sortie. </p><br><p>  <em>webpack.config.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ReactLoadablePlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-loadable/webpack'</span></span>).ReactLoadablePlugin; ... output: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'public'</span></span>), <span class="hljs-attr"><span class="hljs-attr">publicPath</span></span>: <span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-attr"><span class="hljs-attr">chunkFilename</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].bundle.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">"[name].js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactLoadablePlugin({ <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'./public/react-loadable.json'</span></span>, }) ]</code> </pre> <br><p>  Nous écrivons les modules dans le modèle, en les chargeant à leur tour: </p><br><p>  <em>serveur / template.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">helmet, content = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sheetsRegistry, bundles</span></span></span><span class="hljs-function">) </span></span>{ ... const page = <span class="hljs-string"><span class="hljs-string">`&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt;...&lt;/head&gt; &lt;body&gt; &lt;div class="content"&gt; &lt;div id="app" class="wrap-inner"&gt; &lt;!--- magic happens here --&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${content}</span></span></span><span class="hljs-string"> &lt;/div&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${bundles.map(bundle =&gt; </span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">`&lt;script src='/</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${bundle.file}</span></span></span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">'&gt;&lt;/script&gt;`</span></span></span></span><span class="hljs-string"><span class="hljs-subst">).join(</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">'\n'</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string"> &lt;/div&gt; &lt;style id="jss-server-side"&gt;</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${css}</span></span></span><span class="hljs-string">&lt;/style&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${scripts}</span></span></span><span class="hljs-string"> &lt;/body&gt; `</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> page }</code> </pre> <br><p>  Il ne reste plus qu'à traiter la partie client.  La méthode <code>Loadable.preloadReady()</code> charge à l'avance tous les modules que le serveur a donnés à l'utilisateur. </p><br><p>  <em>src / client.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> Loadable.preloadReady().then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { hydrate( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MuiThemeProvider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">theme</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{theme}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">BrowserRouter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">BrowserRouter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MuiThemeProvider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#app'</span></span>) ) })</code> </pre> <br><p>  C'est fait!  Nous commençons et regardons le résultat - dans la dernière partie, le bundle n'était qu'un seul fichier - client.js pesant 265 ko, et maintenant il y a 3 fichiers, dont le plus gros pèse 215 ko.  Inutile de dire que la vitesse de chargement des pages augmentera considérablement lors de la mise à l'échelle d'un projet? </p><br><p><img src="https://habrastorage.org/webt/a-/-t/k_/a--tk_6dxr4zzvg-7z8zys_cas4.png"></p><br><a name="redux"></a><br><h3 id="4-redux-schetchik">  4. Compteur Redux </h3><br><p>  Nous allons maintenant commencer à résoudre des problèmes pratiques.  Comment résoudre le dilemme lorsque le serveur dispose de données (par exemple, d'une base de données), vous devez les afficher afin que les robots de recherche puissent trouver le contenu, puis utiliser ces données sur le client. </p><br><p>  Il y a une solution.  Il est utilisé dans presque tous les articles SSR, mais la manière dont il est implémenté est loin d'être toujours adaptée à une bonne évolutivité.  En termes simples, en suivant la plupart des tutoriels, vous ne pourrez pas faire un vrai site avec SSR sur le principe "One, Two, and Production".  Maintenant, je vais essayer de parsemer le i. </p><br><p>  Nous n'avons besoin que de <strong>redux</strong> .  Le fait est que redux dispose d'un magasin global, que nous pouvons transférer du serveur au client en un seul clic. <br>  Maintenant l'important (!): Nous avons une raison d'avoir un <em>fichier server / stateRoutes</em> .  Il gère l'objet <strong>initialState</strong> qui y est généré, un magasin est créé à partir de celui-ci, puis transmis au modèle HTML.  Le client récupère cet objet à partir de la <code>window.__STATE__</code> , <code>window.__STATE__</code> magasin, et c'est tout.  Cela semble facile. </p><cut></cut><br><p>  Installer: </p><br><pre> <code class="bash hljs">npm i redux react-redux</code> </pre> <br><p>  Suivez les étapes ci-dessus.  Ici, pour la plupart, répétition du code précédemment utilisé. </p><br><div class="spoiler">  <b class="spoiler_title">Compteur de traitement serveur et client</b> <div class="spoiler_text"><p>  <em>server / stateRoutes.js</em> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ssr <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server'</span></span> <span class="hljs-comment"><span class="hljs-comment">//   -  = 5 const initialState = { count: 5 } export default function (app) { app.get('*', (req, res) =&gt; { //  initialState  const response = ssr(req.url, initialState) res.send(response) }) }</span></span></code> </pre><br><p>  <em>server / server.js</em> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> configureStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/redux/configureStore'</span></span> ... export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url, initialState</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   const store = configureStore(initialState) ... // Redux Provider    . let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;Provider store={store} &gt; &lt;JssProvider registry={sheetsRegistry} generateClassName={generateClassName}&gt; &lt;MuiThemeProvider theme={theme} sheetsManager={sheetsManager}&gt; &lt;Loadable.Capture report={moduleName =&gt; modules.push(moduleName)}&gt; &lt;App/&gt; &lt;/Loadable.Capture&gt; &lt;/MuiThemeProvider&gt; &lt;/JssProvider&gt; &lt;/Provider&gt; &lt;/StaticRouter&gt; ) ... //  initialState  HTML- return template(helmet, content, sheetsRegistry, bundles, initialState) }</span></span></code> </pre> <br><p>  <em>serveur / template.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">helmet, content = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sheetsRegistry, bundles, initialState = {}</span></span></span><span class="hljs-function">) </span></span>{ ... <span class="hljs-comment"><span class="hljs-comment">//   initialState       const scripts = `&lt;script&gt; window.__STATE__ = ${JSON.stringify(initialState)} &lt;/script&gt; &lt;script src="/client.js"&gt;&lt;/script&gt;` const page = `&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt;...&lt;/head&gt; &lt;body&gt; ... ${scripts} &lt;/body&gt; ` return page }</span></span></code> </pre> <br><p>  Nous obtenons le magasin sur le client.  <em>src / client.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> configureStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./redux/configureStore'</span></span> ... <span class="hljs-comment"><span class="hljs-comment">//   initialState  ""     const state = window.__STATE__ const store = configureStore(state) Loadable.preloadReady().then(() =&gt; { hydrate( &lt;Provider store={store} &gt; &lt;MuiThemeProvider theme={theme}&gt; &lt;BrowserRouter&gt; &lt;App/&gt; &lt;/BrowserRouter&gt; &lt;/MuiThemeProvider&gt; &lt;/Provider&gt;, document.querySelector('#app') ) })</span></span></code> </pre> </div></div><br><p>  La logique de redux dans le SSR est terminée.  Maintenant, le travail habituel avec redux consiste à créer un magasin, des actions, des réducteurs, une connexion, etc.  J'espère que ce sera clair sans trop d'explications.  Sinon, lisez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Redux entier ici</b> <div class="spoiler_text"><p>  <em>src / redux / configureStore.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createStore } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> rootReducer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reducers'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureStore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">preloadedState</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createStore( rootReducer, preloadedState ) }</code> </pre> <br><p>  <em>src / redux / actions.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// actions export const INCREASE = 'INCREASE' export const DECREASE = 'DECREASE' //  action creators export function increase() { return { type: INCREASE } } export function decrease() { return { type: DECREASE } }</span></span></code> </pre> <br><p>  <em>src / redux / reducers.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { INCREASE, DECREASE } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> INCREASE: <span class="hljs-comment"><span class="hljs-comment">//   action = INCREASE -  state.count  1 return Object.assign({}, state, { count: state.count + 1 }) case DECREASE: //  DECREASE -   1.    return Object.assign({}, state, { count: state.count - 1 }) default: //      return state } }</span></span></code> </pre> <br><p>  <em>src / app / Home.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { bindActionCreators } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Actions <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/redux/actions'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Header <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Header'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Paper <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Paper'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Typography <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Typography'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Button'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> styles = { <span class="hljs-attr"><span class="hljs-attr">paper</span></span>: { <span class="hljs-attr"><span class="hljs-attr">margin</span></span>: <span class="hljs-string"><span class="hljs-string">'auto'</span></span>, <span class="hljs-attr"><span class="hljs-attr">marginTop</span></span>: <span class="hljs-string"><span class="hljs-string">'10%'</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-string"><span class="hljs-string">'40%'</span></span>, <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span> }, <span class="hljs-attr"><span class="hljs-attr">btn</span></span>: { <span class="hljs-attr"><span class="hljs-attr">marginRight</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Home</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(){ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.increase = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.increase.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decrease = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decrease.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) } <span class="hljs-comment"><span class="hljs-comment">//   dispatch   increase  decrease increase(){ this.props.actions.increase() } decrease(){ this.props.actions.decrease() } render(){ return ( &lt;div&gt; &lt;Helmet&gt; &lt;title&gt;MWA - Home&lt;/title&gt; &lt;meta name="description" content="Modern Web App - Home Page" /&gt; &lt;/Helmet&gt; &lt;Header/&gt; &lt;Paper elevation={4} style={styles.paper} align="center"&gt; &lt;Typography variant="h5"&gt;Redux-Counter&lt;/Typography&gt; &lt;Typography variant="subtitle1"&gt;Counter: {this.props.count}&lt;/Typography&gt; &lt;br/&gt; &lt;Button variant="contained" color="primary" onClick={this.increase} style={styles.btn}&gt;Increase&lt;/Button&gt; &lt;Button variant="contained" color="primary" onClick={this.decrease}&gt;Decrease&lt;/Button&gt; &lt;/Paper&gt; &lt;/div&gt; ) } } //   props  const mapStateToProps = (state) =&gt; ({ count: state.count }) //  actions  this.props const mapDispatchToProps = (dispatch) =&gt; ({ actions: bindActionCreators(Actions, dispatch) }) //  react-redux connect     export default connect( mapStateToProps, mapDispatchToProps )(Home)</span></span></code> </pre> </div></div><br><p>    : </p><br><p><img src="https://habrastorage.org/webt/jx/hl/yn/jxhlynjixnl5i0r-g7zygxuax4y.gif"></p><br><a name="mobile"></a><br><h3 id="5-mobilnaya-versiya"> 5.   </h3><br><p><img src="https://habrastorage.org/webt/ek/3a/on/ek3aonmzc8w0atrngq6zjngea_g.gif" align="left">     ,         —  .       .        ,    ,        <strong>initialState</strong> ,      . </p><br><p>     : </p><br><pre> <code class="bash hljs">npm i mobile-detect</code> </pre> <br><p> <strong>mobile detect</strong>      user-agent,  null             . <br><br clear="left"></p><br><p>   : </p><br><p> <em>server/stateRoutes.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ssr <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MobileDetect <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobile-detect'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">count</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">mobile</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ app.get(<span class="hljs-string"><span class="hljs-string">'*'</span></span>, (req, res) =&gt; { <span class="hljs-comment"><span class="hljs-comment">// md == null,  ,    const md = new MobileDetect(req.headers['user-agent']) const response = ssr(req.url, initialState, md.mobile()) res.send(response) }) }</span></span></code> </pre> <br><p>           —  : </p><br><div class="spoiler"> <b class="spoiler_title">     </b> <div class="spoiler_text"><p> <em>server/server.js</em> </p><br><pre> <code class="javascript hljs">... import App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/app/App'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MobileApp <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/mobileApp/App'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url, initialState, mobile</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    -    let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;Provider store={store} &gt; &lt;JssProvider registry={sheetsRegistry} generateClassName={generateClassName}&gt; &lt;MuiThemeProvider theme={theme} sheetsManager={sheetsManager}&gt; &lt;Loadable.Capture report={moduleName =&gt; modules.push(moduleName)}&gt; {mobile === null ? &lt;App/&gt; : &lt;MobileApp/&gt; } &lt;/Loadable.Capture&gt; &lt;/MuiThemeProvider&gt; &lt;/JssProvider&gt; &lt;/Provider&gt; &lt;/StaticRouter&gt; ) //       initialState.mobile = mobile return template(helmet, content, sheetsRegistry, bundles, initialState) }</span></span></code> </pre> <br><p> <em>src/client.js</em> </p><br><pre> <code class="javascript hljs">... const state = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.__STATE__ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = configureStore(state) <span class="hljs-comment"><span class="hljs-comment">//       state Loadable.preloadReady().then(() =&gt; { hydrate( &lt;Provider store={store} &gt; &lt;MuiThemeProvider theme={theme}&gt; &lt;BrowserRouter&gt; {state.mobile === null ? &lt;App/&gt; : &lt;MobileApp/&gt; } &lt;/BrowserRouter&gt; &lt;/MuiThemeProvider&gt; &lt;/Provider&gt;, document.querySelector('#app') ) })</span></span></code> </pre> </div></div><br><p>         react-,     .    ,     .       <em>src/mobileApp</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . </p><br><a name="pwa"></a><br><h3 id="6-progressivnoe-prilozhenie"> 6.   </h3><br><p> <em>Progressive Web App</em> (PWA), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  Google</a> —  ,    ,    ,   . </p><br><p><img src="https://habrastorage.org/webt/6g/iw/x_/6giwx_0fwzwfcppxqp1kfvsle_a.gif" align="left">      .         :  Chrome, Opera  Samsung Internet     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> .  iOS             Safari,       .  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> .      PWA:  Windows  Chrome v70, Linux  v70, ChromeOS  v67.  PWA  macOS —         2019    Chrome v72. </p><br><p>       : PWA        .  ,       ,   ,  . <br><br clear="left"></p><br><p> 2  — manifest.json  service-worker.js —  . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> —  json , ,     ,  . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Service-worker</a>   :    push-,        . </p><br><p>   .      ,     : </p><br><p> <em>public/manifest.json</em> : </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"MWA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Modern Web App"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Modern app built with React SSR, PWA, material-ui, code splitting and much more"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"icons"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"/assets/logos/yellow 192.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"192x192"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"/assets/logos/yellow 512.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"512x512"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"start_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"display"</span></span>: <span class="hljs-string"><span class="hljs-string">"standalone"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"theme_color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#810051"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background_color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#FFFFFF"</span></span> }</code> </pre> <br><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>   service-worker',        .    ,  ,   : </p><br><p> <em>public/service-worker.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   -       var CACHE = 'cache' //     self.addEventListener('install', function(evt) { evt.waitUntil(precache()) }) //   fetch  ,       self.addEventListener('fetch', function(evt) { console.log('The service worker is serving the asset.') evt.respondWith(fromCache(evt.request)) evt.waitUntil(update(evt.request)) }) // ,      function precache() { return caches.open(CACHE).then(function (cache) { return cache.addAll([ './', '/assets/MWA.png', '/assets/global.css', '/assets/logos/favicon.ico', '/assets/logos/yellow 192.png', '/assets/logos/yellow 512.png', '/robots.txt' ]) }) } //   ,      .  ,   function fromCache(request) { return caches.open(CACHE).then(function (cache) { return cache.match(request).then(function (matching) { return matching || null }) }) } //     ,    //     function update(request) { return caches.open(CACHE).then(function (cache) { return fetch(request).then(function (response) { return cache.put(request, response) }) }) }</span></span></code> </pre> <br><p>    PWA ,      -  html-: </p><br><p> <em>server/template.js</em> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">helmet, content = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sheetsRegistry, bundles, initialState = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scripts = <span class="hljs-string"><span class="hljs-string">`... &lt;script&gt; //    service-worker -  if ('serviceWorker' in navigator) { window.addEventListener('load', () =&gt; { navigator.serviceWorker.register('/service-worker.js') .then(registration =&gt; { console.log('Service Worker is registered! '); }) .catch(err =&gt; { console.log('Registration failed ', err); }); }); } &lt;/script&gt;`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> page = <span class="hljs-string"><span class="hljs-string">`&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt; ... &lt;link rel="manifest" href="/manifest.json"&gt; &lt;/head&gt; &lt;body&gt; ... </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${scripts}</span></span></span><span class="hljs-string"> &lt;/body&gt; `</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> page }</code> </pre> <br><p>  C'est fait!     https,     ,     gif     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">demo</a> . </p><br><h3 id="7-konec"> 7.  </h3><br><p>        MWA.      ,     ,    .      ,     SSR  Code Splitting,      PWA           . </p><br><p> ,     MWA    - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">web.dev</a> : </p><br><p><img src="https://habrastorage.org/webt/wh/xx/tr/whxxtrgl_djujcsj8rvhzatf8sg.png"></p><br><p>      ,  — .  ,    ,     —     . </p><br><p> , MWA — opensource . , , ! </p><br><p>  Bonne chance </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr432368/">https://habr.com/ru/post/fr432368/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr432356/index.html">Comment rédiger un excellent fil d'actualités VKontakte en 20 heures</a></li>
<li><a href="../fr432360/index.html">"Descendant" AlphaGo a indépendamment appris à jouer aux échecs, au shogi et à aller</a></li>
<li><a href="../fr432362/index.html">Chang'e 4 - La mission de l'autre côté de la lune commence aujourd'hui</a></li>
<li><a href="../fr432364/index.html">Alphabet phonétique: comment une solution pour l'aviation aidera à transférer une connexion par téléphone</a></li>
<li><a href="../fr432366/index.html">Implémenter la mise en cache SSD dans le stockage QSAN XCubeSAN</a></li>
<li><a href="../fr432370/index.html">AlphaZero a vaincu Stockfish dans un match de 1000 matchs</a></li>
<li><a href="../fr432372/index.html">Microsoft a officiellement confirmé qu'Edge passe au moteur Chromium</a></li>
<li><a href="../fr432374/index.html">Elasticsearch hautement accessible et évolutif dans Kubernetes</a></li>
<li><a href="../fr432378/index.html">Un élève de 10e de Sibérie veut devenir concepteur de processeurs. Pourquoi ne pas fabriquer un accélérateur neuronal FPGA?</a></li>
<li><a href="../fr432380/index.html">Six ans de vie avec un iPhone qui ne me distrait pas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>