<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¨ üöì üè¥ Treinamento Cisco 200-125 CCNA v3.0. Dia 14. VTP, Poda e VLAN Nativa üéÆ üå∫ ‚öΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje, continuaremos nossa discuss√£o sobre VLAN e discutiremos o protocolo VTP, bem como os conceitos de poda de VTP e VLAN nativa. Em um v√≠deo anterio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Treinamento Cisco 200-125 CCNA v3.0. Dia 14. VTP, Poda e VLAN Nativa</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/463231/"> Hoje, continuaremos nossa discuss√£o sobre VLAN e discutiremos o protocolo VTP, bem como os conceitos de poda de VTP e VLAN nativa.  Em um v√≠deo anterior, falamos sobre o VTP, e a primeira coisa que vem √† sua mente quando voc√™ ouve falar sobre o VTP √© que ele n√£o √© um protocolo de entroncamento, apesar do que √© chamado de "protocolo de entroncamento de VLAN". <br><br><img src="https://habrastorage.org/webt/3i/q0/z9/3iq0z9bwjsogzqjcdksb76_iy94.jpeg"><br><br>  Como voc√™ sabe, existem dois protocolos populares de entroncamento - o protocolo propriet√°rio Cisco ISL, que n√£o √© usado atualmente, e o protocolo 802.q, usado em dispositivos de rede de v√°rios fabricantes para encapsular o tr√°fego de entroncamento.  Este protocolo tamb√©m √© usado em comutadores Cisco.  J√° dissemos que o VTP √© um protocolo de sincroniza√ß√£o de VLAN, ou seja, foi projetado para sincronizar o banco de dados da VLAN em todos os comutadores da rede. <br><br><img src="https://habrastorage.org/webt/aw/i8/6c/awi86cfo128hwy2xwtw0c_mj5kq.jpeg"><br><br>  Mencionamos v√°rios modos VTP - servidor, cliente, transparente.  Se o dispositivo usar o modo servidor, isso permitir√° que voc√™ fa√ßa altera√ß√µes, adicione ou remova VLANs.  O modo cliente n√£o permite altera√ß√µes nas configura√ß√µes; voc√™ pode configurar um banco de dados VLAN apenas por meio de um servidor VTP e ele ser√° replicado para todos os clientes VTP.  O comutador no modo transparente n√£o faz altera√ß√µes em seu pr√≥prio banco de dados de VLAN, mas simplesmente passa por ele mesmo e passa as altera√ß√µes para o pr√≥ximo dispositivo no modo cliente.  Esse modo √© semelhante a desabilitar o protocolo VTP em um dispositivo espec√≠fico, transformando-o em um portador de informa√ß√µes sobre altera√ß√µes na VLAN. <a name="habracut"></a><br><br>  Voltar para o Packet Tracer e a topologia de rede discutida na li√ß√£o anterior.  Configuramos a rede VLAN10 para o departamento de vendas e a rede VLAN20 do departamento de marketing, combinando-as com tr√™s comutadores. <br><br><img src="https://habrastorage.org/webt/nw/cc/2r/nwcc2rmc4zke8sz_t9hpfr1fn6a.jpeg"><br><br>  Entre os comutadores SW0 e SW1, a VLAN20 est√° conectada e, entre SW0 e SW2, a VLAN10 √© conectada devido ao fato de termos adicionado a VLAN10 ao banco de dados da VLAN do comutador SW1. <br>  Para considerar a opera√ß√£o do protocolo VTP, vamos usar um dos comutadores como servidor VTP, seja SW0.  Se voc√™ se lembra, por padr√£o, todos os comutadores funcionam no modo de servidor VTP.  Vamos para o terminal da linha de comando do switch e digite o comando show vtp status.  Voc√™ v√™ a vers√£o atual do protocolo VTP - 2 e o n√∫mero de revis√£o da configura√ß√£o 4. Se voc√™ se lembrar, sempre que s√£o feitas altera√ß√µes no banco de dados VTP, o n√∫mero de revis√£o √© aumentado em um. <br><br><img src="https://habrastorage.org/webt/ry/_o/vk/ry_ovka1bovj7mdz-dbrb7ocyjw.jpeg"><br><br>  O n√∫mero m√°ximo de VLANs suportadas √© 255. Esse n√∫mero depende da marca de um switch Cisco espec√≠fico, pois diferentes switches podem suportar um n√∫mero diferente de redes virtuais locais.  O n√∫mero de VLANs existentes √© 7, em um minuto consideraremos que tipo de rede.  O modo de gerenciamento VTP √© o servidor, o nome de dom√≠nio n√£o est√° definido, o modo de remo√ß√£o de VTP est√° desativado, retornaremos a isso mais tarde.  Os modos VTP V2 e VTP Traps Generation tamb√©m est√£o desativados.  Voc√™ n√£o precisa conhecer os dois √∫ltimos modos de passar no exame 200-125 CCNA, para que n√£o precise se preocupar com eles. <br><br>  Vamos dar uma olhada no banco de dados VLAN, para o qual usamos o comando show vlan.  Como vimos no v√≠deo anterior, temos quatro redes n√£o suportadas: 1002, 1003, 1004 e 1005. <br><br><img src="https://habrastorage.org/webt/1r/91/gw/1r91gwmtwtcliixet8gmqvwbefq.jpeg"><br><br>  Ele tamb√©m lista as 2 VLANs 10 e 20 que criamos e a VLAN1 de rede padr√£o.  Agora vamos para outro comutador e insira o mesmo comando para visualizar o status do VTP.  Voc√™ v√™ que o n√∫mero de revis√£o para esse switch √© 3, est√° no modo de servidor VTP e todas as outras informa√ß√µes s√£o semelhantes ao primeiro switch.  Quando eu insiro o comando show VLAN, verei que fizemos duas altera√ß√µes nas configura√ß√µes, uma a menos que o switch SW0, e √© por isso que o n√∫mero de revis√£o do SW1 √© 3. Fizemos 3 altera√ß√µes nas configura√ß√µes padr√£o do primeiro switch, portanto, seu n√∫mero de revis√£o aumentou para 4. <br><br><img src="https://habrastorage.org/webt/0t/mj/y0/0tmjy0ccn59trobdq3sdbev0cny.jpeg"><br><br>  Agora vamos ver o status do SW2.  O n√∫mero da revis√£o aqui √© 1, e isso √© estranho.  Precisamos ter uma segunda revis√£o, porque uma altera√ß√£o foi feita nas configura√ß√µes.  Vamos dar uma olhada no banco de dados da VLAN. <br><br><img src="https://habrastorage.org/webt/kf/y4/1d/kfy41dkjx4jgowh7s5kfqkwxgle.jpeg"><br><br>  Fizemos uma altera√ß√£o criando uma rede VLAN10 e n√£o sei por que essas informa√ß√µes n√£o foram atualizadas.  Talvez isso se deva ao fato de n√£o termos uma rede real, mas sim um simulador de rede de software no qual possa haver erros.  Quando voc√™ tem a oportunidade de trabalhar com dispositivos reais enquanto pratica na Cisco, isso o ajudar√° mais do que o simulador do Packet Tracer.  Outra coisa √∫til na aus√™ncia de dispositivos reais seria o GNC3, ou o simulador de rede da Cisco.  Este √© um emulador que usa o sistema operacional real do dispositivo, por exemplo, um roteador.  H√° uma diferen√ßa entre o simulador e o emulador - o primeiro √© um programa que parece um roteador real, mas n√£o √©.  O emulador programaticamente cria apenas o pr√≥prio dispositivo, mas usa software real para sua opera√ß√£o.  Mas se voc√™ n√£o tiver a oportunidade de trabalhar com o software Cisco IOS real, a melhor op√ß√£o seria o Packet Tracer. <br><br>  Portanto, precisamos configurar o SW0 como um servidor VTP, para isso, vou para o modo de configura√ß√£o global e insiro o comando vtp vers√£o 2. Como eu disse, podemos instalar a vers√£o do protocolo de que precisamos - 1 ou 2, neste caso, precisa de uma segunda vers√£o.  Em seguida, com o comando vtp mode, configuramos o modo VTP do switch - servidor, cliente ou transparente.  Nesse caso, precisamos do modo servidor e, ap√≥s digitar o comando do servidor vtp mode, o sistema exibe uma mensagem de que o dispositivo j√° est√° no modo servidor.  Em seguida, precisamos configurar o dom√≠nio VTP, para o qual usamos o comando vtp domain nwking.org.  Por que isso √© necess√°rio?  Se houver outro dispositivo com um n√∫mero de revis√£o mais alto na rede, todos os outros dispositivos com uma revis√£o mais baixa come√ßar√£o a replicar o banco de dados da VLAN deste dispositivo.  No entanto, isso s√≥ acontece quando os dispositivos t√™m o mesmo nome de dom√≠nio.  Por exemplo, se voc√™ trabalha em nwking.org, especifica esse dom√≠nio, se na Cisco, o dom√≠nio √© Cisco.com e assim por diante.  O nome de dom√≠nio dos dispositivos da sua empresa permite distingui-los dos dispositivos de outra empresa ou de qualquer outro dispositivo de rede externo.  Se voc√™ atribuir um nome de dom√≠nio da empresa a um dispositivo, ele far√° parte da rede da empresa. <br><br>  A pr√≥xima coisa a fazer √© definir uma senha VTP.  √â necess√°rio para que um hacker, com um dispositivo com um n√∫mero de revis√£o grande, n√£o possa copiar as configura√ß√µes de VTP para o seu switch.  Entro a senha do cisco usando o comando vtp password cisco.  Depois disso, a replica√ß√£o dos dados VTP entre os switches s√≥ ser√° poss√≠vel se as senhas corresponderem.  Se a senha errada for usada, o banco de dados da VLAN n√£o ser√° atualizado. <br><br>  Vamos tentar criar mais algumas VLANs.  Para fazer isso, eu uso o comando config t, use o comando vlan 200 para criar uma rede com o n√∫mero 200, nomeie-o como TEST e salve as altera√ß√µes com o comando exit.  Ent√£o eu crio outra rede vlan 500 e chamo-a de TEST1.  Se voc√™ agora inserir o comando show vlan, na tabela de rede virtual do switch, poder√° ver essas duas novas redes √†s quais nenhuma porta est√° atribu√≠da. <br><br><img src="https://habrastorage.org/webt/_n/um/mc/_nummc6z1slkdz0ydz7ekzh7qys.jpeg"><br><br>  Vamos para SW1 e ver seu status VTP.  Vemos que nada mudou aqui, exceto pelo nome de dom√≠nio, o n√∫mero de VLANs permaneceu igual a 7. N√£o vemos a apar√™ncia das redes que criamos, porque a senha do VTP n√£o corresponde.  Vamos definir a senha do VTP neste switch digitando os comandos conf t, vtp pass e vtp password cisco em sequ√™ncia.  O sistema emitiu uma mensagem de que o banco de dados da VLAN do dispositivo agora usa a senha da Cisco.  Vamos dar uma olhada no status do VTP novamente para verificar se as informa√ß√µes foram replicadas.  Como voc√™ pode ver, o n√∫mero de VLANs existentes aumentou automaticamente para 9. <br><br>  Se voc√™ olhar o banco de dados VLAN desse switch, poder√° ver que as redes VLAN200 e VLAN500 que criamos apareceram automaticamente nele. <br><br>  O mesmo precisa ser feito com o √∫ltimo comutador SW2.  Vamos inserir o comando show vlan - voc√™ v√™ que n√£o houve altera√ß√µes.  Da mesma forma, n√£o h√° altera√ß√µes no status do VTP.  Para que essa op√ß√£o atualize as informa√ß√µes, voc√™ tamb√©m precisa configurar uma senha, ou seja, digite os mesmos comandos do SW1.  Depois disso, o n√∫mero de VLANs no status SW2 aumentar√° para 9. <br><br>  √â para isso que serve o protocolo VTP.  Isso √© √≥timo, fornecendo atualiza√ß√£o autom√°tica de informa√ß√µes em todos os dispositivos de rede do cliente depois de fazer altera√ß√µes no dispositivo do servidor.  Voc√™ n√£o precisa fazer altera√ß√µes manualmente no banco de dados da VLAN de todos os comutadores - a replica√ß√£o ocorre automaticamente.  Se voc√™ tiver 200 dispositivos de rede, suas altera√ß√µes ser√£o salvas simultaneamente em todos os duzentos dispositivos.  Por precau√ß√£o, precisamos ter certeza de que o SW2 tamb√©m √© um cliente VTP; portanto, v√° para as configura√ß√µes com o comando config t e insira o comando do cliente no modo vtp. <br><br>  Assim, em nossa rede, apenas o primeiro comutador est√° no modo Servidor VTP, os outros dois est√£o no modo Cliente VTP.  Se agora eu entrar nas configura√ß√µes do SW2 e digitar o comando vlan 1000, recebo a mensagem: "A configura√ß√£o de VTP VLAN n√£o √© permitida quando o dispositivo est√° no modo cliente".  Portanto, n√£o posso fazer altera√ß√µes no banco de dados da VLAN se o switch estiver no modo de cliente VTP.  Se eu quiser fazer altera√ß√µes, preciso ir ao servidor do switch. <br><br>  Entro nas configura√ß√µes do terminal SW0 e insiro os comandos vlan 999, nomeie IMRAN e saia.  Essa nova rede apareceu no banco de dados VLAN desse comutador e, se eu for agora para o banco de dados do cliente SW2 do comutador, verei que as mesmas informa√ß√µes apareceram aqui, ou seja, ocorreu a replica√ß√£o. <br><br>  Como eu disse, o VTP √© um √≥timo software, mas se usado incorretamente, esse protocolo pode atrapalhar toda a rede.  Portanto, voc√™ precisa ter muito cuidado com a rede da empresa se o nome de dom√≠nio e a senha VTP n√£o forem especificados.  Nesse caso, tudo o que o hacker precisa √© inserir o cabo do seu switch em uma tomada na parede, conectar-se a qualquer switch do escrit√≥rio usando o protocolo DTP e, usando o tronco criado, atualizar todas as informa√ß√µes usando o protocolo VTP.  Portanto, o hacker poder√° excluir todas as VLANs importantes, aproveitando o fato de o n√∫mero de revis√£o do seu dispositivo ser maior que o n√∫mero de revis√£o dos demais switches.  Ao mesmo tempo, os comutadores da empresa substituir√£o automaticamente todas as informa√ß√µes do banco de dados da VLAN por informa√ß√µes replicadas de um comutador malicioso, e toda a sua rede entrar√° em colapso. <br><br>  Isso ocorre porque os computadores que usam um cabo de rede est√£o conectados a uma porta de switch espec√≠fica √† qual a VLAN 10 ou VLAN20 est√° conectada.  Se essas redes forem removidas do banco de dados da LAN do switch, ele desconectar√° automaticamente a porta pertencente a uma rede inexistente.  Normalmente, a rede de uma empresa pode falhar precisamente porque os comutadores simplesmente desativam as portas associadas √† VLAN que foram removidas durante a pr√≥xima atualiza√ß√£o. <br><br>  Para evitar que esse problema ocorra, voc√™ precisa definir o nome de dom√≠nio e a senha do VTP ou usar a fun√ß√£o Cisco Port Security, que permite gerenciar os endere√ßos MAC das portas do switch, introduzindo v√°rias restri√ß√µes ao uso.  Por exemplo, se algu√©m tentar alterar o endere√ßo MAC, a porta ser√° desligada imediatamente.  Em breve conheceremos muito bem esse recurso dos comutadores Cisco e agora voc√™ s√≥ precisa saber que o Port Security permite garantir que o VTP esteja protegido contra um invasor. <br><br>  Resuma qual √© a configura√ß√£o do VTP.  Essa op√ß√£o de vers√£o do protocolo √© 1 ou 2, o objetivo do modo VTP √© servidor, cliente ou transparente.  Como eu disse, o √∫ltimo modo n√£o atualiza o banco de dados VLAN do pr√≥prio dispositivo, mas simplesmente passa todas as altera√ß√µes para os dispositivos vizinhos.  A seguir, s√£o apresentados os comandos para atribuir um nome de dom√≠nio e senha: dom√≠nio vtp &lt;nome de dom√≠nio&gt; e senha vtp &lt;senha&gt;. <br><br><img src="https://habrastorage.org/webt/cc/w-/ar/ccw-ardwngn7z0mm4ub3ggg7gps.jpeg"><br><br>  Agora vamos falar sobre as configura√ß√µes de remo√ß√£o de VTP.  Se voc√™ observar a topologia de rede, poder√° ver que todos os tr√™s comutadores t√™m o mesmo banco de dados de VLAN, o que significa que VLAN10 e VLAN20 fazem parte dos tr√™s comutadores.  Tecnicamente, o switch SW2 n√£o precisa de uma rede VLAN20, porque n√£o possui portas relacionadas a essa rede.  No entanto, independentemente disso, todo o tr√°fego enviado do computador Laptop0 via VLAN20 passa para o comutador SW1 e dele para as portas SW2 atrav√©s de um tronco.  Sua principal tarefa como especialista em rede √© garantir que o m√≠nimo de dados poss√≠vel seja transmitido pela rede.  Voc√™ deve garantir a transfer√™ncia dos dados necess√°rios, mas como limitar a transfer√™ncia de informa√ß√µes que n√£o s√£o necess√°rias para este dispositivo? <br><br>  Voc√™ deve garantir que o tr√°fego destinado aos dispositivos VLAN20 n√£o v√° para as portas SW2 atrav√©s do tronco quando n√£o for necess√°rio.  Ou seja, o tr√°fego do Laptop0 deve chegar ao SW1 e mais adiante aos computadores na rede VLAN20, mas n√£o deve ir al√©m da porta de tronco correta do SW1.  Isso pode ser alcan√ßado usando a poda de VTP. <br><br>  Para fazer isso, precisamos entrar nas configura√ß√µes do servidor VTP SW0, porque, como eu j√° disse, as configura√ß√µes de VTP podem ser feitas apenas atrav√©s do servidor, v√° para as configura√ß√µes globais e digite o comando vtp poda.  Como o Packet Tracer √© apenas um simulador, esse comando n√£o existe em seus prompts de linha de comando.  No entanto, quando eu digito a poda de vtp e pressiono "Enter", o sistema relatar√° que a poda de vtp n√£o est√° dispon√≠vel. <br><br>  Usando o comando show vtp status, veremos que o modo de remo√ß√£o de VTP est√° no estado desabilitado, portanto, precisamos disponibiliz√°-lo movendo-o para a posi√ß√£o de habilita√ß√£o.  Feito isso, ativamos o modo de Poda de VTP nos tr√™s comutadores da nossa rede no dom√≠nio da rede. <br>  Deixe-me lembr√°-lo do que √© a poda de VTP.  Quando ativamos esse modo, o servidor de switch SW0 informa ao switch SW2 que apenas a VLAN10 est√° configurada em suas portas.  Depois disso, o comutador SW2 informa ao comutador SW1 que ele n√£o precisa de nenhum outro tr√°fego que n√£o seja o tr√°fego destinado √† rede VLAN10.  Agora, gra√ßas √† remo√ß√£o de VTP, o switch SW1 tem as informa√ß√µes de que n√£o precisa enviar tr√°fego VLAN20 no tronco SW1-SW2. <br><br>  Como administrador de rede, isso √© muito conveniente para voc√™.  Voc√™ n√£o precisa inserir comandos manualmente, pois o switch √© inteligente o suficiente para enviar exatamente o que um dispositivo de rede espec√≠fico precisa.  Se amanh√£ voc√™ colocar outra unidade da equipe de marketing em um pr√©dio vizinho e conectar sua rede VLAN20 ao comutador SW2, esse comutador informar√° imediatamente o comutador SW1 que agora possui redes VLAN10 e VLAN20 e solicitar√° que voc√™ transfira tr√°fego para as duas redes.  Essas informa√ß√µes s√£o atualizadas constantemente em todos os dispositivos, o que torna a comunica√ß√£o mais eficiente. <br><br><img src="https://habrastorage.org/webt/zh/i3/7l/zhi37lgxyefzidb0olg0j9xsqcc.jpeg"><br><br>  H√° outra maneira de especificar a transfer√™ncia de tr√°fego - use um comando que permita a transfer√™ncia de dados apenas para a VLAN especificada.  Entro nas configura√ß√µes do switch SW1, onde estou interessado na porta Fa0 / 4, e insiro os comandos int fa0 / 4 e o switchport trunk permitiu vlan.  Como eu j√° sei que o SW2 possui apenas VLAN10, posso especificar o switch SW1 para que sua porta de tronco permita que apenas o tr√°fego dessa rede passe usando o comando vlan permitido.  Assim, programei a porta de tronco Fa0 / 4 para transmitir tr√°fego apenas para VLAN10.  Isso significa que essa porta n√£o passar√° mais tr√°fego VLAN1, VLAN20 ou qualquer outra rede, exceto a especificada. <br><br>  Voc√™ pode perguntar qual √© o melhor para usar - VTP Pruning ou o comando vlan permitido.  A resposta √© subjetiva, porque em alguns casos faz sentido usar o primeiro m√©todo e, em alguns, o segundo.  Como administrador de rede, voc√™ deve escolher a melhor solu√ß√£o.  Em alguns casos, a decis√£o de programar a porta para permitir o tr√°fego para uma VLAN espec√≠fica pode ser boa, mas em alguns casos pode ser ruim.  No caso de nossa rede, o uso do comando vlan permitido pode ser garantido se n√£o for necess√°rio alterar a topologia da rede.  Mas se algu√©m quiser adicionar um grupo de dispositivos usando a VLAN20 ao SW 2, √© mais recomend√°vel aplicar o modo de remo√ß√£o de VTP. <br><br><img src="https://habrastorage.org/webt/qp/df/1d/qpdf1dmfb0p4assdcvctqizzgwi.jpeg"><br><br>  Portanto, configurar a remo√ß√£o de VTP √© usar os seguintes comandos.  O comando vtp podun fornece uso autom√°tico desse modo.  Se voc√™ deseja configurar a remo√ß√£o de VTP da porta de tronco para transmitir manualmente o tr√°fego de uma VLAN espec√≠fica, use o comando para selecionar a interface do n√∫mero da porta de tronco &lt;#&gt;, ative o tronco do modo de porta de comuta√ß√£o do modo de tronco e ative o tr√°fego de uma rede espec√≠fica usando a vlan permitida do tronco de porta de comuta√ß√£o &lt; tudo / nenhum / adicionar / remover / #&gt;. <br><br>  Voc√™ pode usar 5 par√¢metros no √∫ltimo comando.  Tudo significa que o tr√°fego √© permitido para todas as VLANs, nenhum - o tr√°fego n√£o √© permitido para todas as VLANs.  Se voc√™ usar o par√¢metro add, poder√° adicionar passagem de tr√°fego para outra rede.  Por exemplo, permitimos o tr√°fego da VLAN10 e, com o comando add, voc√™ tamb√©m pode permitir a passagem do tr√°fego da rede VLAN20.  O comando remove permite remover uma das redes, por exemplo, se voc√™ usar o par√¢metro remove 20, apenas a transmiss√£o de tr√°fego da VLAN10 permanecer√°. <br><br>  Agora considere a VLAN nativa.  J√° dissemos que a VLAN nativa √© uma rede virtual para transmitir tr√°fego n√£o marcado atrav√©s de uma porta de tronco espec√≠fica. <br><br><img src="https://habrastorage.org/webt/dr/_l/ng/dr_lngwzayijz9dg5hrnrxruf2m.jpeg"><br><br>  Entro nas configura√ß√µes de uma porta espec√≠fica, conforme indicado pelo cabe√ßalho da linha de comando SW (config-if) #, e uso o comando switchport trunk native vlan &lt;n√∫mero da rede&gt;, por exemplo, VLAN10.  Agora todo o tr√°fego da VLAN10 passar√° pela tag sem tag. <br><br>  Voltar para a topologia de rede l√≥gica na janela Packet Tracer.  Se eu usar o comando switchport trunk native vlan 20 para a porta do switch Fa0 / 4, todo o tr√°fego da rede VLAN20 passar√° pelo tronco Fa0 / 4 - SW2 sem marca√ß√£o.  Quando o switch SW2 recebe esse tr√°fego, ele pensa: ‚Äúesse √© um tr√°fego n√£o marcado, ent√£o eu tenho que encaminh√°-lo para a VLAN nativa‚Äù.  Para esse switch, a VLAN nativa √© a VLAN1 da rede.  As redes 1 e 20 n√£o est√£o conectadas de nenhuma maneira, mas como o modo nativo de VLAN √© usado, temos a oportunidade de rotear o tr√°fego da VLAN20 para uma rede completamente diferente.  No entanto, esse tr√°fego n√£o ser√° encapsulado e as pr√≥prias redes ainda dever√£o corresponder. <br><br>  Vejamos um exemplo.  Entrarei nas configura√ß√µes do SW1 e usarei o comando switchport trunk native vlan 10. Agora, qualquer tr√°fego da VLAN10 vir√° da porta do tronco sem identifica√ß√£o.  Quando atingir a porta de tronco SW2, o switch entender√° que deve encaminh√°-lo para a VLAN1.  Como resultado desta solu√ß√£o, o tr√°fego n√£o poder√° alcan√ßar computadores PC2, 3 e 4, pois eles est√£o conectados √†s portas de acesso do switch para a VLAN10. <br><br>        ,  native VLAN  Fa0/4,    VLAN10,     Fa0/1,    VLAN1.  ,          -  native VLAN. <br><br><img src="https://habrastorage.org/webt/gw/qt/xg/gwqtxg60_7zjscy-yhlvo9fv6nc.jpeg"><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8Ai0Bi71PsE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?       , <b>30%        entry-level ,      :</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps  $20     ?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV a partir de US $ 199</a> na Holanda!</b>  <b><b>Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - a partir de US $ 99!</b></b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt463231/">https://habr.com/ru/post/pt463231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt463221/index.html">Watching the Sun: 5 tipos de gadgets, de US $ 5 a US $ 5.000</a></li>
<li><a href="../pt463223/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel n¬∫ 310 (de 5 a 11 de agosto)</a></li>
<li><a href="../pt463225/index.html">Empresa WiFi. FreeRadius + FreeIPA + Ubiquiti</a></li>
<li><a href="../pt463227/index.html">Solu√ß√£o de problemas com pwnable.kr 19 - desvincular. Estouro de buffer de pilha</a></li>
<li><a href="../pt463229/index.html">Jetpacks em Cultura: Cinema</a></li>
<li><a href="../pt463233/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 15. Comunica√ß√£o lenta e seguran√ßa portu√°ria</a></li>
<li><a href="../pt463237/index.html">Como tocamos m√∫sica com redes neurais v 2.0</a></li>
<li><a href="../pt463239/index.html">22 de agosto - Alfa JS MeetUP SPb</a></li>
<li><a href="../pt463241/index.html">Notas da Confer√™ncia ACL 2019</a></li>
<li><a href="../pt463243/index.html">Manipula√ß√£o da consci√™ncia. Por que isso √© t√£o simples?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>