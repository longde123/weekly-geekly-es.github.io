<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëù ü•® üïî Menulis aplikasi multibahasa di React Native üßòüèº ü§ôüèº ü§±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pelokalan produk sangat penting bagi perusahaan internasional yang menjelajahi negara dan wilayah baru. Demikian pula, pelokalan diperlukan untuk apli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menulis aplikasi multibahasa di React Native</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/459741/"><img src="https://habrastorage.org/getpro/habr/post_images/d65/2b6/19e/d652b619e61aaf2d1216f0f94ab533b2.jpg"><br><br>  Pelokalan produk sangat penting bagi perusahaan internasional yang menjelajahi negara dan wilayah baru.  Demikian pula, pelokalan diperlukan untuk aplikasi seluler.  Jika pengembang memulai ekspansi internasional, penting untuk memberi pengguna dari negara lain kesempatan untuk bekerja dengan antarmuka dalam bahasa asli mereka.  Pada artikel ini, kami akan membuat aplikasi React Native menggunakan paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">react-native-localize</a> . <br><a name="habracut"></a><br><blockquote>  <b>Skillbox merekomendasikan:</b> Kursus pendidikan online <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang Java Profesi"</a> . <br>  <b>Kami mengingatkan Anda:</b> <i>untuk semua pembaca "Habr" - diskon 10.000 rubel saat mendaftar untuk kursus Skillbox menggunakan kode promo "Habr".</i> </blockquote><br><h3>  Alat dan keterampilan </h3><br>  Untuk memahami artikel ini, Anda memerlukan keterampilan dasar Bereaksi Asli.  Untuk membiasakan diri dengan pengaturan mesin yang bekerja, Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menggunakan instruksi resmi</a> . <br><br>  Kami membutuhkan versi alat perangkat lunak ini: <br><ul><li>  Node v10.15.0 </li><li>  npm 6.4.1 </li><li>  benang 1.16.0 </li><li>  reaksi asli 0,59.9 </li><li>  react-native-localize 1.1.3 </li><li>  i18n-js 3.3.0 </li></ul><br><h3>  Memulai </h3><br>  Kami akan membuat aplikasi yang akan mendukung bahasa Inggris, Prancis, dan Arab.  Pertama, buat proyek baru menggunakan react-native-cli.  Untuk melakukan ini, di terminal Anda harus mengetik ini: <br><br>  <i>$ react-native init multiLanguage</i> <i><br></i>  <i>$ cd multiLanguage</i> <br><br>  <b>Tambahkan perpustakaan yang diperlukan</b> <br><br>  Langkah pertama adalah menginstal react-native-localize dengan mengetik berikut ini: <br>  $ yarn add react-native-localize <br><br>  Jika masalah muncul selama proses instalasi, Anda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">harus mempelajari manual instalasi</a> . <br><br>  Perpustakaan react-native-localize memberi pengembang akses ke fungsi multibahasa.  Tapi dia butuh perpustakaan lain - i18n. <br><br>  Artikel ini menjelaskan penggunaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">I18n.js</a> untuk menyediakan terjemahan JavaScript. <br><br>  <i>$ benang tambahkan i18n-js</i> <br><br>  Yah, karena i18n-js tidak menyediakan caching atau memoisasi, saya sarankan menggunakan lodash.memoize untuk ini: <br><br>  <i>$ benang tambahkan lodash.memoize</i> <br><br>  <b>Bekerja dengan terjemahan</b> <br><br>  Agar aplikasi dapat bekerja dengan terampil dengan bahasa lain, pertama Anda harus membuat direktori terjemahan di dalam src, lalu tiga file JSON untuk masing-masing bahasa. <br><br>  1. en.json untuk bahasa Inggris; <br><br>  2. fr.json untuk bahasa Prancis; <br><br>  3. ar.json untuk bahasa Arab. <br><br>  File-file ini berisi objek JSON dengan kunci dan nilai.  Kuncinya akan sama untuk setiap bahasa.  Ini digunakan oleh aplikasi untuk menampilkan informasi teks. <br><br>  Nilai adalah teks yang akan ditampilkan kepada pengguna. <br><br>  Bahasa inggris: <br><br>  <i>{"Hello": "Hello World!"}</i> <br><br>  Prancis <br><br>  <i>{"Halo": "Salut le Monde!"}</i> <br><br>  Arab <br><br>  <i>{"Halo": "ÿ£ŸáŸÑÿßŸã ÿ®ÿßŸÑÿπÿßŸÑŸÖ"}</i> <br><br>  Bahasa lain dapat ditambahkan dengan cara yang sama. <br><br><h3>  Kode utama </h3><br>  Pada titik ini, Anda perlu membuka file App.js dan menambahkan impor ke dalamnya: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> RNLocalize <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-native-localize"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> i18n <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"i18n-js"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> memoize <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"lodash.memoize"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Use for caching/memoize for better performance import { I18nManager, SafeAreaView, ScrollView, StyleSheet, Text, View } from "react-native";</span></span></code> </pre> <br>  Setelah itu, fungsi bantu dan konstanta ditambahkan, yang berguna kemudian. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> translationGetters = { <span class="hljs-comment"><span class="hljs-comment">// lazy requires (metro bundler does not support symlinks) ar: () =&gt; require("./src/translations/ar.json"), en: () =&gt; require("./src/translations/en.json"), fr: () =&gt; require("./src/translations/fr.json") }; const translate = memoize( (key, config) =&gt; i18n.t(key, config), (key, config) =&gt; (config ? key + JSON.stringify(config) : key) ); const setI18nConfig = () =&gt; { // fallback if no available language fits const fallback = { languageTag: "en", isRTL: false }; const { languageTag, isRTL } = RNLocalize.findBestAvailableLanguage(Object.keys(translationGetters)) || fallback; // clear translation cache translate.cache.clear(); // update layout direction I18nManager.forceRTL(isRTL); // set i18n-js config i18n.translations = { [languageTag]: translationGetters[languageTag]() }; i18n.locale = languageTag; };</span></span></code> </pre> <br>  Nah, sekarang mari kita buat komponen kelas App: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); setI18nConfig(); <span class="hljs-comment"><span class="hljs-comment">// set initial config } componentDidMount() { RNLocalize.addEventListener("change", this.handleLocalizationChange); } componentWillUnmount() { RNLocalize.removeEventListener("change", this.handleLocalizationChange); } handleLocalizationChange = () =&gt; { setI18nConfig(); this.forceUpdate(); }; render() { return ( &lt;SafeAreaView style={styles.safeArea}&gt; &lt;Text style={styles.value}&gt;{translate("hello")}&lt;/Text&gt; &lt;/SafeAreaView&gt; ); } } const styles = StyleSheet.create({ safeArea: { backgroundColor: "white", flex: 1, alignItems: "center", justifyContent: "center" }, value: { fontSize: 18 } });</span></span></code> </pre> <br>  Elemen pertama - setI18nConfig () - mengatur konfigurasi awal. <br><br>  Maka Anda perlu menambahkan event listener ke componentDidMount (), elemen ini akan melacak pembaruan dan memanggil handleLocalizationChange () ketika itu terjadi. <br><br>  Metode handleLocalizationChange () mengaktifkan setI18nConfig () dan forceUpdate ().  Ini diperlukan untuk perangkat Android, karena komponen harus dirender agar perubahannya menjadi nyata. <br><br>  Maka Anda perlu menghapus mendengarkan dari metode componentWillUnmount (). <br><br>  Akhirnya, halo dikembalikan dalam render () dengan menggunakan translate () dan menambahkan parameter kunci ke dalamnya.  Setelah tindakan ini, aplikasi akan dapat "memahami" bahasa apa yang dibutuhkan, dan menampilkan pesan di dalamnya. <br><br><h3>  Peluncuran aplikasi </h3><br>  Sekarang adalah waktu untuk memeriksa cara kerja terjemahan. <br><br>  Pertama, jalankan aplikasi dalam simulator atau emulator, ketikkan <br><br>  <i>$ react-native run-ios</i> <i><br></i>  <i>$ react-native run-android</i> <i><br></i> <br>  Akan terlihat seperti ini: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/93c/bdd/af4/93cbddaf4e8c5d7858ee28226eae2a3b.png"><br><br>  Sekarang Anda dapat mencoba mengubah bahasa ke bahasa Prancis, lalu meluncurkan aplikasi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/65d/c0b/059/65dc0b0595cbfda55b1c0e9613025a92.png"><br><br>  Kami melakukan hal yang sama dengan bahasa Arab, tidak ada perbedaan. <br><br>  Sejauh ini, sangat bagus. <br><br>  Tetapi apa yang terjadi jika Anda memilih bahasa acak yang terjemahannya tidak ada dalam aplikasi? <br><br>  Ternyata tugas findBestLanguage adalah menyediakan terjemahan optimal dari semua yang tersedia.  Akibatnya, bahasa default akan ditampilkan. <br><br>  Ini tentang pengaturan telepon.  Jadi, misalnya, di emulator iOS, Anda dapat melihat urutan bahasa. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c41/949/da6/c41949da6517781477d3d6fb96cab82c.png"><br><br>  Jika bahasa yang dipilih tidak disukai, findBestAvailableLanguage mengembalikan yang tidak ditentukan, sehingga bahasa default ditampilkan. <br><br><h3>  Bonus </h3><br>  React-native-localize memiliki API yang menyediakan akses ke sejumlah besar elemen bahasa.  Sebelum Anda mulai, Anda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">harus membiasakan diri dengan dokumentasi</a> . <br><br><h3>  Kesimpulan </h3><br>  Aplikasi ini dapat dibuat multibahasa tanpa masalah.  React-native-localize adalah opsi bagus yang memungkinkan Anda untuk memperluas lingkaran pengguna aplikasi. <br><br>  Kode sumber proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ada di sini</a> . <br><br><blockquote>  <b>Skillbox merekomendasikan:</b> <br><br><ul><li>  Kursus praktis dua tahun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Saya adalah pengembang web PRO</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"</a> </li><li>  Kursus online <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang C # dari awal</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"</a> </li><li>  Kursus tahunan praktis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang PHP dari 0 hingga PRO"</a> . <br></li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id459741/">https://habr.com/ru/post/id459741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id459728/index.html">Smartphone dengan mudah: Ulasan ZTE Red Magic 3</a></li>
<li><a href="../id459730/index.html">Porting Qt ke STM32</a></li>
<li><a href="../id459732/index.html">Cara memilih lisensi Open Source untuk kerangka kerja RAD di GitHub</a></li>
<li><a href="../id459734/index.html">Asap menguji kandidat rilis dengan autotest dalam 15 menit</a></li>
<li><a href="../id459739/index.html">Mengapa Mozilla disebut "penjahat utama Internet"?</a></li>
<li><a href="../id459743/index.html">Kelompok mastermind untuk pengusaha, bukan konferensi dan pelatihan: pengalaman saya</a></li>
<li><a href="../id459747/index.html">British Airways akan didenda $ 230 juta karena membocorkan data pelanggan</a></li>
<li><a href="../id459751/index.html">Analisis psikoanalisis dari spesialis yang diremehkan. Bagian 1. Siapa dan mengapa</a></li>
<li><a href="../id459757/index.html">Pendekatan fungsional untuk penanganan kesalahan di Dart</a></li>
<li><a href="../id459761/index.html">Cara merawat sepeda listrik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>