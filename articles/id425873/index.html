<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎧 🎌 📽️ [CppCon 2018] Herb Sutter: Menuju C ++ yang Lebih Sederhana dan Lebih Kuat 🐷 🚍 👩🏽‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam pidatonya di CppCon 2018, Herb Sutter menyampaikan kepada publik prestasinya dalam dua arah. Pertama-tama, ini adalah kontrol variabel seumur hi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[CppCon 2018] Herb Sutter: Menuju C ++ yang Lebih Sederhana dan Lebih Kuat</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425873/"><iframe width="560" height="315" src="https://www.youtube.com/embed/80BZxujhY38" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> Dalam pidatonya di CppCon 2018, Herb Sutter menyampaikan kepada publik prestasinya dalam dua arah.  Pertama-tama, ini adalah <strong>kontrol</strong> variabel seumur hidup (Lifetime), yang memungkinkan mendeteksi seluruh kelas bug pada tahap kompilasi.  Kedua, ini adalah proposal yang diperbarui pada <strong>metaclasses</strong> , yang akan memungkinkan menghindari duplikasi kode, setelah menggambarkan perilaku kategori kelas dan kemudian menghubungkannya ke kelas-kelas tertentu dengan satu baris. </p><a name="habracut"></a><br><h2 id="predislovie-bolshe--prosche">  Kata Pengantar: lebih = lebih mudah?! </h2><br><p>  Tuduhan C ++ terdengar bahwa standar tersebut tumbuh tanpa alasan dan tanpa ampun.  Tetapi bahkan konservatif yang paling bersemangat tidak akan berpendapat bahwa konstruksi baru seperti range-for (siklus pengumpulan) dan otomatis (setidaknya untuk iterator) membuat kode lebih sederhana.  Anda dapat mengembangkan perkiraan kriteria yang harus dipenuhi (setidaknya satu, idealnya semua) ekstensi bahasa baru untuk menyederhanakan kode dalam praktik: </p><br><ol><li>  Kurangi, sederhanakan kode, hapus kode duplikat (range-for, auto, lambda, Metaclasses) </li><li>  Membuat kode aman lebih mudah untuk ditulis, mencegah kesalahan dan kasus khusus (smart pointer, Lifetimes) </li><li>  Ganti sepenuhnya fitur lama yang kurang berfungsi (typedef → using) </li></ol><br><p>  Herb Sutter mengidentifikasi "C ++ modern" - subset fitur yang memenuhi standar pengkodean modern (seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pedoman Inti C ++</a> ), dan menganggap standar penuh sebagai "mode kompatibilitas", yang tidak perlu diketahui oleh semua orang.  Dengan demikian, jika "C ++ modern" tidak tumbuh, maka semuanya baik-baik saja. </p><br><h2 id="proverki-vremeni-zhizni-peremennyh-lifetime">  Memeriksa masa pakai variabel (Seumur Hidup) </h2><br><p>  Grup Verifikasi Seumur Hidup baru sekarang tersedia sebagai bagian dari Pemeriksa Pedoman Inti untuk Dentang dan Visual C ++.  Tujuannya bukan untuk mencapai ketelitian dan akurasi absolut, seperti pada Rust, tetapi untuk melakukan pemeriksaan sederhana dan cepat dalam fungsi individu. </p><br><h3 id="osnovnye-principy-proverki">  Prinsip dasar verifikasi </h3><br><p>  Dari sudut pandang analisis seumur hidup, jenis dibagi menjadi 3 kategori: </p><br><ul><li>  Nilai adalah apa yang Pointer dapat tunjukkan. </li><li> Pointer - mengacu pada Nilai, tetapi tidak mengontrol masa pakainya.  Mungkin menggantung (penunjuk menggantung).  Contoh: <code>T*</code> , <code>T&amp;</code> , iterators, <code>std::observer_ptr&lt;T&gt;</code> , <code>std::string_view</code> , <code>gsl::span&lt;T&gt;</code> </li><li>  Pemilik - mengontrol umur Nilai.  Biasanya dapat menghapus nilainya lebih cepat dari jadwal.  Contoh: <code>std::unique_ptr&lt;T&gt;</code> , <code>std::shared_ptr&lt;T&gt;</code> , <code>std::vector&lt;T&gt;</code> , <code>std::string</code> , <code>gsl::owner&lt;T*&gt;</code> </li></ul><br><p>  Pointer dapat berada di salah satu dari kondisi berikut: </p><br><ul><li>  Tunjuk ke nilai yang disimpan di tumpukan </li><li>  Tunjuk ke Nilai yang terkandung "di dalam" oleh beberapa Pemilik </li><li>  Kosong (nol) </li><li>  Hang (tidak valid) </li></ul><br><h3 id="ukazateli-i-znacheniya">  Pointer dan Nilai </h3><br><p>  Untuk setiap Pointer <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> p </script>  dilacak <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7">t</span><span class="MJXp-mo" id="MJXp-Span-8" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">p</span><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.251ex" height="2.66ex" viewBox="-38.5 -832 3122 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-73" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-65" x="973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-74" x="1439" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMAIN-28" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-70" x="2190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMAIN-29" x="2694" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> pset (p) </script>  - set nilai yang dapat ditunjukkannya.  Saat menghapus Nilai, ini terjadi di semua <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.272ex" height="2.298ex" viewBox="-38.5 -728.2 1839.5 989.6" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-73" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-65" x="973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-74" x="1439" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> pset </script>  diganti oleh <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-16"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">d</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.368ex" height="2.057ex" viewBox="0 -780.1 4464 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-69" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-64" x="707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-61" x="1230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-6B" x="1760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-76" x="2281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-61" x="2767" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-6C" x="3296" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-69" x="3595" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-64" x="3940" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> tidak valid </script>  .  Saat mengakses Nilai Pointer <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-27"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> p </script>  sedemikian rupa <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-29"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">d</span><span class="MJXp-mo" id="MJXp-Span-40" style="margin-left: 0.333em; margin-right: 0.333em;">∈</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">t</span><span class="MJXp-mo" id="MJXp-Span-45" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">p</span><span class="MJXp-mo" id="MJXp-Span-47" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.37ex" height="2.66ex" viewBox="0 -832 8770.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-69" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-64" x="707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-61" x="1230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-6B" x="1760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-76" x="2281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-61" x="2767" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-6C" x="3296" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-69" x="3595" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-64" x="3940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMAIN-2208" x="4741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-70" x="5687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-73" x="6190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-65" x="6660" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-74" x="7126" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMAIN-28" x="7488" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-70" x="7877" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMAIN-29" x="8381" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> tidak valid ∈ pset (p) </script>  mengeluarkan kesalahan. </p><br><pre> <code class="cpp hljs">string_view s; <span class="hljs-comment"><span class="hljs-comment">// pset(s) = {null} { char a[100]; s = a; // pset(s) = {a} cout &lt;&lt; s[0]; // OK } // pset(s) = {invalid} cout &lt;&lt; s[0]; // ERROR: invalid ∈ pset(s)</span></span></code> </pre> <br><p>  Menggunakan anotasi, Anda dapat mengonfigurasi operasi mana yang akan dianggap operasi mengakses Nilai.  Secara default: <code>*</code> , <code>-&gt;</code> , <code>[]</code> , <code>begin()</code> , <code>end()</code> . </p><br><p>  Harap perhatikan bahwa peringatan dikeluarkan hanya pada saat <em>akses</em> ke Indeks yang tidak valid.  Jika Nilai dihapus, tetapi tidak ada yang pernah mengakses Pointer ini, maka semuanya beres. </p><br><h3 id="ukazateli-i-vladelcy">  Rambu dan Pemilik </h3><br><p>  Jika Pointer <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-48"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> p </script>  menunjukkan nilai yang terkandung dalam pemilik <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-50"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">o</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhgcWZmfnbuY9eP-U8CaMYHMo3-e1A#MJMATHI-6F" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> o </script>  lalu ini <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-52"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">t</span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">p</span><span class="MJXp-mo" id="MJXp-Span-59" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-60" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-61"><span class="MJXp-msup" id="MJXp-Span-62"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63" style="margin-right: 0.05em;">o</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-64" style="vertical-align: 0.5em;">′</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> pset (p) = {o '} </script>  . </p><br><p>  Metode dan fungsi yang mengambil pemilik, dibagi menjadi: </p><br><ul><li>  Operasi Akses Nilai Pemilik.  Default: <code>*</code> , <code>-&gt;</code> , <code>[]</code> , <code>begin()</code> , <code>end()</code> </li><li>  Akses operasi ke pemilik itu sendiri, pointer <code>v.clear()</code> , seperti <code>v.clear()</code> .  Secara default, ini semua adalah operasi non-const lainnya </li><li>  Akses operasi ke Pemilik itu sendiri, pointer tidak valid, seperti <code>v.empty()</code> .  Secara default, ini semua adalah operasi const. </li></ul><br><p>  Pemilik Konten Lama Diumumkan <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-65"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10"> tidak valid </script>  setelah penghapusan Pemilik atau pada aplikasi operasi yang tidak valid. </p><br><p>  Aturan-aturan ini cukup untuk mendeteksi banyak bug khas dalam kode C ++: </p><br><pre> <code class="cpp hljs">string_view s; <span class="hljs-comment"><span class="hljs-comment">// pset(s) = {null} string name = "foo"; s = name; // pset(s) = {name'} cout &lt;&lt; s[0]; // OK name = "bar"; // pset(s) = {invalid} cout &lt;&lt; s[0]; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v = get_ints(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>* p = &amp;v[<span class="hljs-number"><span class="hljs-number">5</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// pset(p) = {v'} v.push_back(42); // pset(p) = {invalid} cout &lt;&lt; *p; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view s = <span class="hljs-string"><span class="hljs-string">"foo"</span></span>s; <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; s[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ERROR // :       std::string_view s = "foo"s // pset(s) = {"foo"s '} ; // pset(s) = {invalid}</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v = get_ints(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = v.begin(); i != v.end(); ++i) { <span class="hljs-comment"><span class="hljs-comment">// pset(i) = {v'} if (*i == 2) { v.erase(i); // pset(i) = {invalid} } // pset(i) = {v', invalid} } // ERROR: ++i for (auto i = v.begin(); i != v.end(); ) { if (*i == 2) i = v.erase(i); // OK else ++i; }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&gt; get_data(); <span class="hljs-comment"><span class="hljs-comment">//   ,  get_data() != nullopt for (int value : *get_data()) // ERROR cout &lt;&lt; value; // *get_data() —     for (int value : std::vector&lt;int&gt;(*get_data())) // OK cout &lt;&lt; value;</span></span></code> </pre> <br><h3 id="otslezhivanie-vremeni-zhizni-parametrov-funkciy">  Melacak parameter fungsi seumur hidup </h3><br><p>  Ketika kita mulai berurusan dengan fungsi dalam C ++ yang mengembalikan Pointer, kita hanya bisa menebak tentang hubungan antara masa pakai parameter dan nilai balik.  Jika suatu fungsi menerima dan mengembalikan Pointer dari jenis yang sama, maka asumsi dibuat bahwa fungsi "mendapatkan" nilai pengembalian dari salah satu parameter input: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">* p, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">* q)</span></span></span><span class="hljs-function"> -&gt; </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">*</span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {p', q'} auto g(std::string&amp; s) -&gt; char*; // pset(ret) = {s'}</span></span></code> </pre> <br><p>  Fungsi mencurigakan mudah dideteksi yang mengambil hasil entah dari mana: </p><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::reference_wrapper&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; get_data() { <span class="hljs-comment"><span class="hljs-comment">//    int i = 3; return {i}; // pset(ret) = {i'} } // pset(ret) = {invalid}</span></span></code> </pre> <br><p>  Karena dimungkinkan untuk memberikan nilai sementara ke parameter <code>const T&amp;</code> parameter, mereka tidak diperhitungkan, kecuali jika hasilnya tidak ada di tempat lain untuk mengambil: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">min</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; y)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {x', y'} //    const T&amp;- //        auto x = 10, y = 2; auto&amp; bad = min(x, y + 1); // pset(bad) = {x, temp} // pset(bad) = {x, invalid} cout &lt;&lt; bad; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> K = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> V = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> V&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find_or_default</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;K, V&gt;&amp; m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> K&amp; key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> V&amp; def)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {m', key', def'} std::map&lt;K, V&gt; map; K key = "foo"; const V&amp; s = find_or_default(map, key, "none"); // pset(s) = {map', key', temp} ⇒ pset(s) = {map', key', invalid} cout &lt;&lt; s; // ERROR</span></span></code> </pre> <br><p>  Juga diyakini bahwa jika suatu fungsi menerima sebuah pointer (bukan referensi), maka itu bisa menjadi nullptr, dan pointer ini tidak dapat digunakan sebelum membandingkan dengan nullptr. </p><br><h3 id="zaklyuchenie-po-kontrolyu-vremeni-zhizni">  Kesimpulan Kontrol Waktu Seumur Hidup </h3><br><p>  Saya ulangi bahwa Lifetime belum merupakan proposal untuk standar C ++, tetapi upaya berani untuk menerapkan pemeriksaan seumur hidup di C ++, di mana, tidak seperti Rust, misalnya, tidak pernah ada penjelasan yang sesuai.  Pada awalnya, akan ada banyak positif palsu, tetapi seiring waktu, heuristik akan meningkat. </p><br><h3 id="voprosy-iz-zala">  Pertanyaan dari audiens </h3><br><p>  <strong>Apakah pemeriksaan grup Seumur Hidup memberikan jaminan matematis yang akurat dari tidak adanya petunjuk yang menggantung?</strong> </p><br><p>  Secara teoritis, akan dimungkinkan (dalam kode baru) untuk menggantung banyak anotasi pada kelas dan fungsi, dan sebagai gantinya kompiler akan memberikan jaminan tersebut.  Tetapi pemeriksaan ini dikembangkan mengikuti prinsip 80:20, yaitu, Anda dapat menangkap sebagian besar kesalahan menggunakan sejumlah kecil aturan dan menerapkan minimum anotasi. </p><br><h2 id="metaklassy">  Metaclasses </h2><br><p>  Metaclass dalam beberapa cara melengkapi kode kelas yang diterapkannya, dan juga berfungsi sebagai nama untuk sekelompok kelas yang memenuhi persyaratan tertentu.  Misalnya, seperti yang ditunjukkan di bawah ini, metaclass <code>interface</code> akan membuat semua fungsi publik dan murni virtual untuk Anda. </p><br><p>  Tahun lalu, Herb Sutter membuat proyek metaclass pertamanya ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lihat di sini</a> ).  Sejak itu, sintaks yang diajukan saat ini telah berubah. </p><br><p>  Sebagai permulaan, sintaks untuk menggunakan metaclasses telah berubah: </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  interface Shape { int area() const; void scale_by(double factor); }; //  class(interface) Shape { … }</span></span></code> </pre> <br><p>  Sudah menjadi lebih lama, tetapi sekarang ada sintaksis alami untuk menerapkan beberapa metaclasses sekaligus: <code>class(meta1, meta2)</code> . </p><br><h3 id="opisanie-metaklassa">  Deskripsi Metaclass </h3><br><p>  Sebelumnya, metaclass adalah seperangkat aturan untuk memodifikasi kelas.  Sekarang metaclass adalah fungsi constexpr yang mengambil kelas lama (dideklarasikan dalam kode) dan membuat yang baru. </p><br><p>  Yaitu, fungsi mengambil satu parameter - meta-informasi tentang kelas lama (tipe parameter tergantung pada implementasinya), membuat elemen kelas (fragmen), dan kemudian menambahkannya ke badan kelas baru menggunakan instruksi <code>__generate</code> . </p><br><p>  Fragmen dapat dibuat menggunakan <code>__fragment</code> , <code>__inject</code> , <code>idexpr(…)</code> .  Pembicara memilih untuk tidak fokus pada tujuan mereka, karena bagian ini masih akan berubah sebelum diserahkan kepada komite standardisasi.  Nama-nama itu sendiri dijamin akan diubah, garis bawah ganda ditambahkan secara khusus untuk memperjelas hal ini.  Penekanan dalam laporan ini adalah pada contoh-contoh yang melangkah lebih jauh. </p><br><h3 id="interface">  antarmuka </h3><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">interface</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T source)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// source    //     .     //  ~X,  X —   . __generate __fragment struct X { virtual ~X noexcept {} }; //    static_assert, compiler.require   //   constexpr-. //      . compiler.require(source.variables().empty(), "interfaces may not contain data members"); // member_functions(), ,  tuple&lt;…&gt;,   for... for... (auto f : source.member_functions()) { // ,   —   / compiler.require(!f.is_copy() &amp;&amp; !f.is_move(), "interfaces may not copy or move; consider a virtual clone()"); //   public   if (!f.has_default_access()) f.make_public(); // (1) // ,       protected/private compiler.require(f.is_public(), "interface functions must be public"); //     f.make_pure_virtual(); // (2) //   f     __generate f; } }</span></span></code> </pre> <br><p>  Anda mungkin berpikir bahwa pada baris (1) dan (2) kami memodifikasi kelas asli, tetapi tidak.  Harap dicatat bahwa kami mengulangi fungsi-fungsi kelas asli dengan menyalin, memodifikasi fungsi-fungsi ini, dan kemudian menyisipkannya ke kelas baru. </p><br><p>  Aplikasi Metaclass: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shape</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">area</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale_by</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> factor)</span></span></span></span>; }; <span class="hljs-comment"><span class="hljs-comment">//  : class Shape { public: virtual ~Shape noexcept {} public: virtual int area() const = 0; public: virtual void scale_by(double factor) = 0; };</span></span></code> </pre> <br><h3 id="otladka-myuteksa">  Debugging Mutex </h3><br><p>  Misalkan kita memiliki data aman non-utas yang dilindungi oleh mutex.  Debugging dapat difasilitasi jika, dalam rakitan debug, pada setiap panggilan, diperiksa apakah proses saat ini telah mengunci mutex ini.  Untuk melakukan ini, kelas TestableMutex sederhana ditulis: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestableMutex</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ m.lock(); id = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::this_thread::get_id(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unlock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ id = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id{}; m.unlock(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is_held</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id == <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::this_thread::get_id(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::mutex m; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::atomic&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id&gt; id; };</code> </pre> <br><p>  Selanjutnya, di kelas MyData kami, kami ingin setiap bidang publik suka </p><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v;</code> </pre> <br><p>  Ganti dengan + pengambil: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v_; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&amp; v() { assert(m_.is_held()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v_; }</code> </pre> <br><p>  Untuk fungsi, kita juga dapat melakukan transformasi serupa. </p><br><p>  Tugas-tugas tersebut diselesaikan menggunakan makro dan pembuatan kode.  Herb Sutter menyatakan perang terhadap makro: mereka tidak aman, mengabaikan semantik, ruang nama, dll.  Seperti apa solusinya pada metaclasses: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">guarded_with_mutex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ __generate __fragment <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> {</span></span> TestableMutex m_; <span class="hljs-comment"><span class="hljs-comment">// lock, unlock } } template &lt;typename T, typename U&gt; constexpr void guarded_member(T type, U name) { auto field = …; __generate field; auto getter = …; __generate getter; } template &lt;typename T&gt; constexpr void guarded(T source) { guarded_with_mutex(); for... (auto o : source.member_variables()) { guarded_member(o.type(), o.name()); } }</span></span></code> </pre> <br><p>  Cara menggunakannya: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">guarded</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyData</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v; Widget* w; }; MyData&amp; x = findData(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>); xv().clear(); <span class="hljs-comment"><span class="hljs-comment">// assertion failed: m_.is_held()</span></span></code> </pre> <br><h3 id="actor">  aktor </h3><br><p>  Yah, bahkan jika kita melindungi beberapa objek dengan mutex, sekarang semuanya aman, tidak ada klaim kebenaran.  Tetapi jika suatu objek sering dapat diakses oleh banyak utas secara paralel, mutex akan kelebihan beban, dan akan ada overhead yang besar untuk mengambilnya. </p><br><p>  Solusi mendasar untuk masalah mutex kereta adalah konsep aktor, ketika suatu objek memiliki antrian permintaan, semua panggilan ke objek diantrekan dan dieksekusi satu demi satu di utas khusus. </p><br><p>  Biarkan kelas Aktif berisi implementasi dari semua ini - pada kenyataannya, kumpulan thread / pelaksana dengan utas tunggal.  Nah, metaclasses akan membantu menyingkirkan kode duplikat dan mengantre semua operasi: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">active</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageFilter</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ImageFilter(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(Buffer*)&gt; w) : work(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(w)) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Buffer* b)</span></span></span><span class="hljs-function"> </span></span>{ work(b); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(Buffer*)&gt; work; } <span class="hljs-comment"><span class="hljs-comment">//  : class ImageFilter { public: ImageFilter(std::function&lt;void(Buffer*)&gt; w) : work(std::move(w)) {} void apply(Buffer* b) { a.send([=] { work(b); }).join(); } private: std::function&lt;void(Buffer*)&gt; work; Active a; //   ,     work }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">active</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">log</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::fstream f; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">info</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(…)</span></span></span><span class="hljs-function"> </span></span>{ f &lt;&lt; …; } };</code> </pre> <br><h3 id="property">  properti </h3><br><p>  Ada properti di hampir semua bahasa pemrograman modern, dan siapa pun yang tidak mengimplementasikannya berdasarkan C ++: Qt, C ++ / CLI, semua jenis makro jelek.  Namun, mereka tidak akan pernah ditambahkan ke standar C ++, karena mereka sendiri dianggap fitur yang terlalu sempit, dan selalu ada harapan bahwa beberapa proposal akan mengimplementasikannya sebagai kasus khusus.  Ya, mereka dapat diimplementasikan pada metaclasses! </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  class X { public: class(property&lt;int&gt;) WidthClass { } width; }; //  class X { public: class WidthClass { int value; int get() const; void set(const int&amp; v); void set(int&amp;&amp; v); public: WidthClass(); WidthClass(const int&amp; v); WidthClass&amp; operator=(const int&amp; v); operator int() const; //   move! WidthClass(int&amp;&amp; v); WidthClass&amp; operator=(int&amp;&amp; v); } width; };</span></span></code> </pre> <br><p>  Anda dapat mengatur pengambil dan penyetel Anda sendiri: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Date</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class">&lt;int&gt;) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonthClass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> month; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> month; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m)</span></span></span><span class="hljs-function"> </span></span>{ assert(m &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; m &lt; <span class="hljs-number"><span class="hljs-number">13</span></span>); month = m; } } month; }; Date date; date.month = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-comment"><span class="hljs-comment">// assertion failed</span></span></code> </pre> <br><p>  Idealnya, saya ingin menulis <code>property int month { … }</code> , tetapi bahkan implementasi seperti itu akan menggantikan kebun binatang C ++ ekstensi yang menciptakan properti. </p><br><h3 id="zaklyuchenie-po-metaklassam">  Kesimpulan Metaclass </h3><br><p>  Metaclasses adalah fitur baru yang besar untuk bahasa yang sudah kompleks.  Apakah itu sepadan?  Berikut adalah beberapa manfaatnya: </p><br><ul><li>  Biarkan programmer mengekspresikan niat mereka dengan lebih jelas (saya ingin menulis aktor) </li><li>  Mengurangi duplikasi kode dan menyederhanakan pengembangan dan pemeliharaan kode yang mengikuti pola tertentu </li><li>  Hilangkan beberapa kelompok kesalahan umum (itu akan cukup untuk mengurus semua seluk-beluk sekali) </li><li>  Bolehkan untuk menyingkirkan makro?  (Herb Sutter sangat berperang) </li></ul><br><h3 id="voprosy-iz-zala-1">  Pertanyaan dari audiens </h3><br><p>  <strong>Bagaimana cara debug metaclasses?</strong> </p><br><p>  Setidaknya untuk Dentang, ada fungsi intrinsik yang, jika dipanggil, akan mencetak isi sebenarnya dari kelas pada waktu kompilasi, yaitu, apa yang diperoleh setelah menerapkan semua metaclasses. </p><br><p>  <strong>Dulu dikatakan bisa mendeklarasikan non-anggota seperti swap dan hash di metaclasses.</strong>  <strong>Kemana dia pergi?</strong> </p><br><p>  Sintaks akan dikembangkan lebih lanjut. </p><br><p>  <strong>Mengapa kita perlu metaclasses jika konsep telah diadopsi untuk standardisasi?</strong> </p><br><p>  Ini adalah hal yang berbeda.  Metaclasses diperlukan untuk mendefinisikan bagian-bagian kelas, dan konsep memeriksa untuk melihat apakah kelas cocok dengan pola tertentu menggunakan contoh kelas.  Bahkan, metaclasses dan konsep bekerja dengan baik bersama.  Misalnya, Anda dapat mendefinisikan konsep iterator dan metaclass dari "iterator tipikal" yang mendefinisikan beberapa operasi berlebihan melalui sisanya. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id425873/">https://habr.com/ru/post/id425873/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id425859/index.html">Operator regional menentang pembatalan roaming</a></li>
<li><a href="../id425861/index.html">Uji diri Anda: dapatkah Anda melindungi perusahaan dari serangan dunia maya?</a></li>
<li><a href="../id425867/index.html">Pengujian kinerja layanan web sebagai bagian dari Integrasi Berkelanjutan. Pengalaman Yandex</a></li>
<li><a href="../id425869/index.html">iFixit: Apple belum mengaktifkan pemblokiran MacBook yang diperbaharui</a></li>
<li><a href="../id425871/index.html">Yekaterinburg, 11 Oktober - Atlassian bertemu dengan buruh pelabuhan</a></li>
<li><a href="../id425875/index.html">Matriks notebook upgrade TN-> IPS atau cara mendapatkan laptop yang lebih maju dari laptop anggaran</a></li>
<li><a href="../id425877/index.html">CEO Apple mengatakan chip mata-mata Cina di server Supermicro adalah fiksi</a></li>
<li><a href="../id425879/index.html">Apa yang ditunjukkan Google pada presentasinya</a></li>
<li><a href="../id425881/index.html">Semua yang perlu Anda ketahui tentang perataan di Flexbox</a></li>
<li><a href="../id425883/index.html">Penuh waktu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>