<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñ±Ô∏è üíÖüèæ üïü O que eu entendi e que problemas encontrei ao criar um clone do Hacker News üñêüèø üöΩ üëì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De um tradutor: Este artigo √© uma tradu√ß√£o resumida da postagem original do desenvolvedor da Web Jesse Horne. Seu trabalho e ao mesmo tempo seu hobby ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O que eu entendi e que problemas encontrei ao criar um clone do Hacker News</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/425099/"><img src="https://habrastorage.org/getpro/habr/post_images/9d2/2a8/a7c/9d22a8a7c00b7d82fb381a39ec725b64.jpg"><br><br>  De um tradutor: Este artigo √© uma tradu√ß√£o resumida da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">postagem</a> original <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">do</a> desenvolvedor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">da</a> Web Jesse Horne.  Seu trabalho e ao mesmo tempo seu hobby √© web design.  Jesse geralmente compartilha suas melhores pr√°ticas e li√ß√µes aprendidas com outros programadores, experientes e iniciantes. <br><br>  H√° algum tempo, escrevi um post bastante volumoso no Hacker News, que recebeu s√≥lido apoio dos leitores.  Chamei a aten√ß√£o para as capacidades desse recurso e decidi tentar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">criar um clone</a> para obter novas experi√™ncias e conhecimentos. <br><a name="habracut"></a><br><blockquote>  <b>A Skillbox recomenda:</b> Um curso pr√°tico de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">desenvolvedor de PHP de</a> um ano. <br>  <b>Lembramos que:</b> <i>para todos os leitores de "Habr" - um desconto de 10.000 rublos ao se inscrever em qualquer curso Skillbox usando o c√≥digo promocional "Habr".</i> </blockquote><br>  Inicialmente, isso me pareceu um grande objetivo, onde o kit de ferramentas e as t√°ticas eram predeterminadas.  Anteriormente, trabalhei em tarefas menores usando diferentes linguagens e estruturas.  A √∫nica coisa que n√£o existia era um projeto importante que permitiria reunir tudo isso. <br><br>  Decidi trabalhar em um novo projeto do zero usando a linguagem Crystal.  Essa √© uma ferramenta conveniente, que tamb√©m √© nova.  √â r√°pido, os princ√≠pios de trabalhar com ele s√£o semelhantes ao Ruby.  √â digitado estatisticamente e √© de c√≥digo aberto.  Mas apenas uma nova linguagem tamb√©m n√£o √© suficiente, ent√£o decidi complicar minha tarefa e criar n√£o um clone do Hacker News, mas uma vers√£o aprimorada desse recurso. <br><br>  A prop√≥sito, eu pensei que criar um clone regular seria uma tarefa f√°cil.  E o fato de n√£o ser assim, percebi um pouco mais tarde, come√ßando o trabalho. <br><br>  <b>N√£o varra muito alto</b> <br><br>  N√£o quero dizer que voc√™ n√£o deve estabelecer metas ambiciosas.  Tente alcan√ßar as estrelas, com ou sem espinhos.  Sonhar √© √∫til, tentar alcan√ßar o que eu n√£o podia fazer antes √© necess√°rio para avan√ßar com sucesso na carreira profissional. <br><br>  Eu disse que voc√™ n√£o deve tentar se <s>apressar</s> imediatamente <s>no desgaste de</s> uma tarefa complexa e grande.  Escolha o que voc√™ precisa em um momento espec√≠fico para implementar a ideia.  Al√©m disso, recomendo dividir metas significativas em outras menores.  Se voc√™ tem muito c√≥digo no qual h√° muito "lixo", tente simplificar e estruturar tudo. <br><br>  Nem consigo expressar em palavras o quanto √© importante dividir uma tarefa grande em v√°rias tarefas menores. <br><br>  No meu caso, me deparei com v√°rios novos problemas que n√£o havia encontrado antes.  Primeiro, trabalhei com o Crystal apenas uma vez - quando estava criando um aplicativo cuja complexidade n√£o era muito maior que a complexidade de um programa como "Ol√°, mundo!".  No passado, eu usei Python, Lua, PHP.  A nova linguagem foi o primeiro obst√°culo √† implementa√ß√£o do projeto. <br><br>  <b>O segundo foi o quadro</b> .  Crystal, sendo uma nova linguagem, ainda n√£o possui muitas estruturas e documenta√ß√£o para elas.  Eu decidi usar Kemal para o meu clone.  Eu esperava que o quadro fosse intuitivo, pois conheci exatamente isso no meu trabalho.  Mas aqui estava outro caso - as coisas individuais n√£o eram f√°ceis de entender.  Por exemplo, algumas se√ß√µes do c√≥digo pareciam bastante normais, mas por algum motivo n√£o funcionaram.  E foi dif√≠cil encontrar a causa do problema na Internet pelo mesmo motivo - a novidade da linguagem e a pr√≥pria estrutura.  Em alguns casos, tive que parar por um longo tempo e lidar com a causa do problema.  At√© agora, eu nunca tinha visto a fonte, por exemplo, o mesmo Flask. <br><br>  <b>O terceiro obst√°culo</b> s√£o os objetivos espec√≠ficos que escolhi para o projeto.  Para tornar meu clone mais √∫til, decidi adicionar v√°rios recursos funcionais.  Eu trabalhei com o Hacker News anteriormente, por isso sei muito sobre as vantagens e desvantagens desse recurso.  Ocorreu-me que seria bom explorar as an√°lises fornecidas pelo GitHub.  Utilizando-os, eu poderia adicionar estat√≠sticas sobre o n√∫mero de visualiza√ß√µes e a atividade do usu√°rio no site. <br><br>  Assim, decidi que meu clone deveria mostrar pelo menos visualiza√ß√µes e cliques para cada postagem.  Essa fun√ß√£o provavelmente seria √∫til para os usu√°rios e sua implementa√ß√£o seria uma boa pr√°tica para mim.  Mas n√£o achei que demorasse tanto!  Agora, o projeto √© mais uma prova de conceito do que um recurso pronto.  Al√©m de visualiza√ß√µes e cliques, tamb√©m decidi adicionar uma exibi√ß√£o dos coment√°rios que aparecem para que eles apare√ßam em tempo real.  Se n√£o fosse por essa tarefa adicional, o projeto teria sido conclu√≠do muito mais rapidamente. <br><br>  Agora, o projeto suporta autoriza√ß√£o, publica√ß√£o e classifica√ß√£o de postagens, intera√ß√£o com outros usu√°rios, comentando e visualizando perfis, etc. <br><br>  <b>O quarto problema</b> que estou enfrentando √© o caos.  Migra√ß√µes, modelos, visualiza√ß√µes, controladores de API, c√≥digo CSS e JavaScript se acumulam muito rapidamente.  E tudo isso se transforma em uma bagun√ßa.  Eu tentei resolver o problema e quase consegui.  Mas lugares parcialmente problem√°ticos no c√≥digo do meu projeto ainda ocorrem - voc√™ pode perceber facilmente.  Portanto, em muitos lugares, o c√≥digo √© repetido, os pontos de extremidade n√£o s√£o organizados, a nomea√ß√£o √© complicada, o que leva a um aumento na quantidade de c√≥digo e a um grande n√∫mero de consultas no banco de dados.  Gradualmente, resolvo esse problema. <br><br>  <b>Em muitos lugares, o c√≥digo √© repetido</b> <br><br>  Quando o projeto come√ßou, resolvi os problemas que apareciam.  Por exemplo, foi necess√°rio verificar se o usu√°rio est√° autenticado - e eu encontrei uma solu√ß√£o original que levou tr√™s linhas ou mais, dependendo da rota.  Eu estava com pressa para implementar as solu√ß√µes encontradas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/faf/a2b/142/fafa2b142f94d3d413c25c8889938de6.jpg"><br><br>  Em geral, eu tive que seguir os princ√≠pios do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DRY</a> desde o in√≠cio.  N√£o se repita!  Eu precisava escrever um programa intermedi√°rio que fizesse o que era necess√°rio e, em seguida, simplesmente aplique a solu√ß√£o encontrada nesses casos, quando necess√°rio.  No futuro, ajustarei meu projeto com base nesse princ√≠pio. <br><br>  <b>Nomea√ß√£o e organiza√ß√£o de terminais</b> <br><br>  Eu desenvolvia a API na equipe da Pioneer.  Usamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">REST</a> , um estilo de arquitetura que eu realmente jurei como um novo membro da equipe Pioneer.  Nesta equipe, trabalhei nos pequenos elementos de um grande aplicativo.  Mas no meu novo projeto eu tive que escrever tudo do zero. <br><br>  Uma "API RESTful" deve ter uma interface uniforme, como diz o Wiki.  No meu projeto, organizei tudo para que os pontos finais fossem definidos nos arquivos de origem, chamados de acordo com a fun√ß√£o ou finalidade.  O registro e a sa√≠da do aplicativo foram registrados em "auth.cr".  O nome do usu√°rio foi registrado em "user.cr". <br><br>  Sem d√∫vida, esta parte requer processamento.  No futuro, organizarei tudo para que as a√ß√µes se relacionem com o terminal "/ user", simplesmente porque tudo isso est√° relacionado ao "Usu√°rio".  Por exemplo, para melhorar a estrutura do projeto, dividirei o c√≥digo em partes mais convenientes e gerenci√°veis ‚Äã‚Äãcom um grande n√∫mero de arquivos.  Vou criar a pasta "src / user / auth /", que conter√° as fun√ß√µes de login, registro e sa√≠da do usu√°rio do aplicativo. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/857/b21/861/857b21861b663781c60ea6ae8fb29845.png" alt="1_6dy_OCE7_Cjj_Df7_A0s_Aj_3i_Q"></a> <br><br>  <b>Muitos pedidos</b> <br><br>  Neste projeto, estou tentando escalar minhas id√©ias.  No momento, muitas consultas est√£o sendo feitas no banco de dados.  Portanto, se o aplicativo tivesse cem usu√°rios, eu ficaria louco tentando descobrir quantas consultas ao banco de dados est√£o sendo executadas a cada poucos segundos.  Agora o cliente atualiza o status das mensagens a cada 10 minutos.  Al√©m disso, o post determina ciclicamente se foi visualizado pelo usu√°rio.  Durante cada verifica√ß√£o, ocorre uma solicita√ß√£o ao banco de dados, realizada de acordo com o filtro atual.  E tudo isso carrega significativamente o servidor. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/270/faf/fe9/270faffe964e6f1e60721f8b9a6d4dc2.jpg"><br><br>  Tudo o que √© descrito acima s√£o apenas exemplos de problemas que encontro o tempo todo.  N√£o posso descrev√™-los por completo.  No entanto, agora estou pensando em documentar meus problemas e solu√ß√µes.  Espero que tudo isso ajude outros programadores a ver e entender meus erros e a evitar os pr√≥prios.  Eu sei que se eu usar uma combina√ß√£o de Redis e MySQL ou Postgres, eu posso acelerar a execu√ß√£o de consultas.  Mas, por enquanto, vou me debru√ßar sobre isso. <br><br>  Espero que voc√™ tenha gostado do artigo e tenha aprendido algo √∫til para si mesmo. <br><br><blockquote>  <b>A Skillbox recomenda:</b> <br><br><ul><li>  Curso on-line <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Profiss√£o frontend-developer"</a> . </li><li>  Curso educacional on-line <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Profiss√£o de desenvolvedor web"</a> . </li><li>  Curso pr√°tico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Mobile Developer PRO"</a> . </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425099/">https://habr.com/ru/post/pt425099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425087/index.html">Openspace Agility: Apresentando o Agile em toda a empresa (agora com lideran√ßa!)</a></li>
<li><a href="../pt425089/index.html">TI no mundo animal: pesquisa de formigas e TCP / IP</a></li>
<li><a href="../pt425091/index.html">O que diabos est√° acontecendo com as classifica√ß√µes de popularidade das linguagens de programa√ß√£o?</a></li>
<li><a href="../pt425093/index.html">Solu√ß√µes de IoT para servi√ßos habitacionais e comunit√°rios: o que ser√£o os medidores inteligentes e quem deve atend√™-los?</a></li>
<li><a href="../pt425095/index.html">Semin√°rio on-line aberto "Jogo" 2048 "</a></li>
<li><a href="../pt425101/index.html">Docker + Laravel = ‚ù§</a></li>
<li><a href="../pt425103/index.html">Pare o Google Predators de perseguir seus filhos</a></li>
<li><a href="../pt425105/index.html">Modo de fabrica√ß√£o Intel ME - uma amea√ßa oculta ou o que est√° por tr√°s da vulnerabilidade CVE-2018-4251 no MacBook</a></li>
<li><a href="../pt425107/index.html">Fintech Digest: problemas de biometria no celular, leasing de telefones Samsung, valores mobili√°rios no blockchain</a></li>
<li><a href="../pt425109/index.html">O livro ‚ÄúJava na nuvem. Bota de Primavera, Nuvem de Primavera, Fundi√ß√£o em Nuvem ¬ª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>