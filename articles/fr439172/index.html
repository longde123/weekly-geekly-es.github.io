<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßîüèø üçø üï∏Ô∏è Extension de macro Assert () pour impl√©menter une gestion minimale des erreurs ü§∑üèº üêï üõÄüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Sire, je suis venu avec une d√©fense de dragon." Il n'a plus peur de nous! Il est d√©clench√© par le battement des ailes d'un dragon et allume une sir√®n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Extension de macro Assert () pour impl√©menter une gestion minimale des erreurs</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439172/"> "Sire, je suis venu avec une d√©fense de dragon."  Il n'a plus peur de nous!  Il est d√©clench√© par le battement des ailes d'un dragon et allume une sir√®ne forte pour que tout le monde puisse entendre le dragon s'approcher. <br>  "Cette d√©fense fait-elle autre chose?" <br>  "Non, pourquoi?"  Nous serons pr√©venus! <br>  "Oui ... Mang√© par les sir√®nes hurlantes ... Et pourtant ... nous rappelle-t-on quand nous avons pr√©vu des pannes? ... <br><br><h3>  Description du probl√®me </h3><br>  Cette m√©thode ne pr√©tend pas au concept de gestion des erreurs dans les projets complexes et complexes.  Il s'agit plut√¥t d'un exemple de ce qui peut √™tre fait avec un minimum de moyens. <br><a name="habracut"></a><br>  Une bonne norme consiste √† supposer qu'aucun assert () ne doit √™tre d√©clench√© pendant l'ex√©cution du programme.  Et si au moins un assert () a fonctionn√© lors du test de l'application, vous devez envoyer cette erreur au d√©veloppeur.  Mais que faire si l'application n'est pas enti√®rement test√©e?  Et assert () fonctionnera pour le client?  Envoyer une erreur au d√©veloppeur?  Abandonner un programme?  En r√©alit√©, ce sera la version finale de l'application et l'assert () standard sera simplement d√©sactiv√©.  La question se pose √©galement avec la contradiction interne du syst√®me: il devrait y avoir beaucoup d'assert () pour faciliter la d√©tection des erreurs, mais il devrait y avoir moins d'assert () pour moins interrompre l'utilisateur et son travail avec l'application.  Je ne voudrais surtout pas ¬´tomber¬ª si le nombre de personnes qui utilisent l'application d√©pend de la stabilit√© du travail et si assert () √©tait essentiellement insignifiant (n√©cessitant une correction, mais permettant, par exemple, de continuer √† travailler assez bien). <br><br>  De telles consid√©rations conduisent √† la n√©cessit√© d'affiner assert () c / c ++.  Et d√©finissez vos propres macros qui √©tendent les fonctionnalit√©s de assert () standard - mais en ajoutant un minimum de gestion des erreurs.  Que ces macros soient. <br><br>  <b>VERIFY_EXIT (Condition);</b> <b><br></b>  <b>VERIFY_RETURN (Condition, ReturnValue);</b> <b><br></b>  <b>VERIFY_THROW (condition, exception);</b> <b><br></b>  <b>VERIFY_DO (Condition) {/ * bloc √©chec * /};</b> <br><br>  (Ces macros peuvent √™tre appel√©es diff√©remment. Par exemple, VERIFY_OR_EXIT (), VERIFY_OR_RETURN (), VERIFY_OR_THROW (), VERIFY_OR_DO (). Ou vice versa dans une version plus courte.) <br><br>  Ces macros, tout d'abord, ont une impl√©mentation pour la version de d√©bogage de la compilation et la version finale.  Cela leur permet d'avoir un comportement dans la version finale du programme.  C'est-√†-dire  effectuer des actions non seulement pendant les tests, mais aussi avec l'utilisateur. <br><br><h3>  Description de la macro </h3><br>  (La description des macros est approximative, leur autre conception est √©galement possible.) <br><br>  1) <b>VERIFY_EXIT (Condition);</b> <br><br>  V√©rifie la <b>condition</b> Condition et si elle est fausse, elle appelle la norme assert () (version de d√©bogage) et quitte √©galement la fonction actuelle (versions de d√©bogage et de publication). <br><br>  2) <b>VERIFY_RETURN (Condition, ReturnValue);</b> <br><br>  Il v√©rifie la <b>condition</b> Condition et s'il est faux, il appelle la norme assert () (version de d√©bogage), et quitte √©galement la fonction actuelle en retournant <b>ReturnValue</b> (versions de d√©bogage et de publication). <br><br>  3) <b>VERIFY_THROW (condition, exception);</b> <br><br>  V√©rifie la <b>condition</b> Condition et si elle est fausse, elle appelle ensuite la norme assert () (version de d√©bogage) et l√®ve √©galement une <b>exception</b> (versions de d√©bogage et de publication). <br><br>  4) <b>VERIFY_DO (Condition) {/ * bloc de blocage * /};</b> <br><br>  V√©rifie la <b>condition</b> Condition et si elle est fausse, elle appelle la norme assert () (version de d√©bogage), et effectue √©galement le <b>bloc d'√©chec</b> ou l'op√©ration imm√©diatement apr√®s la macro (versions de d√©bogage et de publication). <br><br>  Pour toutes les macros, il est important: <br><br><ul><li>  Dans tous les cas, la <b>condition</b> doit √™tre vraie pour ¬´passer¬ª la macro et fausse pour activer le chemin de la gestion minimale des erreurs. </li><li>  Chacune des macros impl√©mente une m√©thode minimale de gestion des erreurs.  Ceci est n√©cessaire pour impl√©menter le comportement en cas d'erreurs non d√©tect√©es lors des tests, mais survenues chez l'utilisateur.  Selon l'impl√©mentation, vous pouvez informer le d√©veloppeur d'une erreur survenue sur le client, mais chaque impl√©mentation fournit √©galement un moyen minimal de r√©cup√©rer d'une erreur. </li></ul><br><h3>  Mod√®les d'utilisation des macros </h3><br>  Bien s√ªr, la chose la plus int√©ressante est que les surhommes entropiques (h√©ros de la r√©duction des erreurs dans les programmes) sont l'utilisation de ces macros. <br><br>  1) Conditions pr√©alables et post√©rieures. <br><br>  Le premier cas d'utilisation est les conditions pr√© et post.  Permettez-moi de vous rappeler que les conditions pr√©alables v√©rifient l'√©tat du programme (arguments d'entr√©e, √©tat de l'objet, variables utilis√©es) pour v√©rifier la conformit√© aux exigences n√©cessaires du fragment de code ex√©cut√©.  Les conditions de publication (elles sont moins courantes dans les programmes) visent √† v√©rifier que nous avons atteint le r√©sultat souhait√© et que l'√©tat des objets reste valide pour le fragment de code actuel. <br><br>  L'utilisation des macros propos√©es est simple - nous attribuons chaque v√©rification dans une macro distincte.  Nous s√©lectionnons les macros en fonction de la gestion des erreurs dont nous avons besoin.  (VERIFY_EXIT () - traitement d'erreur avec la sortie de cette fonction, VERIFY_RETURN () - traitement d'erreur avec le retour d'une valeur, VERRIFY_THROW () - traitement d'erreur avec une exception, etc.) <br><br>  Vous pouvez √©galement ajouter ou utiliser la macro VERIFY (), qui n'effectuera aucune gestion d'erreur.  Cela peut √™tre utile, par exemple dans les conditions de publication √† la fin d'une fonction. <br><br>  Ces macros sont compl√®tement autonomes si vous utilisez les principes du code pur et allouez suffisamment de fonctions pour impl√©menter des actions atomiques.  Chaque fonction peut v√©rifier l'√©tat d'un objet, les arguments d'entr√©e, etc.  pour mener √† bien son action atomique. <br><br>  2) S√©mantique d'une transaction. <br><br>  En outre, ces macros peuvent √™tre utilis√©es pour impl√©menter du code avec une s√©mantique de transaction.  Une telle s√©mantique s'entend comme: 1) une pr√©paration progressive √† une op√©ration avec v√©rification des r√©sultats de chacune des √©tapes de pr√©paration;  2) l'ex√©cution de l'action uniquement si toutes les √©tapes de pr√©paration ont r√©ussi;  3) refus de remplir, si certaines conditions ne sont pas remplies au stade de la pr√©paration (avec un √©ventuel retour en arri√®re de l'ex√©cution). <br><br>  3) Concevoir le code en tenant compte d'une √©ventuelle extension. <br><br>  Cela est particuli√®rement vrai pour les biblioth√®ques et le code g√©n√©ral, qui peuvent initialement √™tre d√©velopp√©s dans le contexte d'une seule condition d'ex√©cution, et peuvent ensuite √™tre utilis√©s avec d'autres conditions (commencer √† √™tre utilis√©s diff√©remment).  Dans ce cas, ces macros peuvent d√©crire les "limites" de la fonctionnalit√© du code.  D√©terminez ce qui a √©t√© initialement per√ßu comme une erreur et ce qui a r√©ussi.  (Cette approche est proche des conditions de post-publication classiques.) Bien s√ªr, j'√©cris les ¬´bordures¬ª entre guillemets, car  ces limites peuvent √™tre r√©vis√©es, mais il est important de d√©terminer (ou plut√¥t de transmettre aux futurs d√©veloppeurs) la connaissance des limites acceptables de la conception de code. <br><br><h3>  Impl√©mentation de macro </h3><br>  Je suppose que la plupart des d√©veloppeurs de niveau interm√©diaire n'auront pas de probl√®mes pour impl√©menter ces macros.  Mais si vous avez besoin d'informations, je vais consacrer quelques points importants. <br><br>  Les macros doivent √™tre repr√©sentables comme une seule instruction.  Que peut-on faire avec do {} tandis que les (fausses) constructions ou similaires.  Par exemple, comme ceci: <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VERFY_EXIT(cond) \ do{bool _= (bool)(cond); assert(_); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(!_) {return;}} while(false) \ </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/*end macro VERIFY_EXIT()*/</span></span></span></span></code> </pre> <br>  Ensuite, vous pouvez √©crire le code suivant: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) VERIFY_EXIT(a%<span class="hljs-number"><span class="hljs-number">2</span></span>==<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br>  Bien s√ªr, ce n'est qu'une des possibilit√©s de mise en ≈ìuvre.  Vous pouvez impl√©menter des macros de diff√©rentes mani√®res. <br><br>  PS Bataille r√©ussie avec l'entropie, surhommes! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr439172/">https://habr.com/ru/post/fr439172/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr439160/index.html">√âtat de l'algorithme: qu'advient-il des d√©veloppeurs ind√©pendants sur Steam?</a></li>
<li><a href="../fr439162/index.html">Comment d√©boguer le frontend et le backend: instructions √©tape par √©tape</a></li>
<li><a href="../fr439166/index.html">mmWave en route vers la commercialisation dans le format smartphone</a></li>
<li><a href="../fr439168/index.html">Syst√®mes d'analyse client</a></li>
<li><a href="../fr439170/index.html">Les op√©rateurs cellulaires aideront les banques √† v√©rifier l'exactitude des donn√©es clients</a></li>
<li><a href="../fr439174/index.html">Safe Internet Day: quelles menaces rechercher en 2019</a></li>
<li><a href="../fr439176/index.html">Envoyer un e-mail avec des pi√®ces jointes par JavaMailSender de SpringFramework</a></li>
<li><a href="../fr439180/index.html">D√©fi Rekko</a></li>
<li><a href="../fr439182/index.html">Comment nous distribuons les commandes entre les chauffeurs dans Yandex.Taxi</a></li>
<li><a href="../fr439184/index.html">Modifier votre mot de passe: tester les strat√©gies de mot de passe du service Web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>