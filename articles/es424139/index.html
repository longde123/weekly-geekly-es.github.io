<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíç üê∂ üí™üèæ Los errores y conceptos err√≥neos m√°s comunes al configurar DFSR üë©üèª‚Äçüî¨ ü•ù ü§üüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[Nota traductor El art√≠culo es para Windows Server 2003 / 2003R2 / 2008 / 2008R2, pero la mayor√≠a de lo anterior se aplica a versiones posteriores del...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Los errores y conceptos err√≥neos m√°s comunes al configurar DFSR</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424139/">  <i>[Nota</i>  <i>traductor</i>  <i>El art√≠culo es para Windows Server 2003 / 2003R2 / 2008 / 2008R2, pero la mayor√≠a de lo anterior se aplica a versiones posteriores del sistema operativo]</i> <br><br>  Hola a todos!  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Warren</a> est√° aqu√≠ nuevamente, y esta publicaci√≥n de blog es una compilaci√≥n de los problemas de DFSR m√°s comunes que he encontrado en los √∫ltimos a√±os.  El prop√≥sito de esta publicaci√≥n es enumerar errores comunes en la configuraci√≥n de DFSR que causan estos problemas y evitar que cometa errores similares.  Saber lo que <i>no se</i> debe hacer <i>es</i> tan importante como saber <i>qu√©</i> hacer.  Muchos de los elementos descritos est√°n relacionados con otros temas, por lo que se proporcionan los enlaces correspondientes para un estudio en profundidad del tema. <br><a name="habracut"></a><br><h2>  El tama√±o de la cuota es demasiado peque√±o para la carpeta provisional </h2><br>  ¬øViste muchos eventos en la revista con los c√≥digos 4202 y 4204?  En este caso, el tama√±o de la carpeta provisional est√° configurado incorrectamente.  Una consecuencia desagradable del tama√±o incorrectamente establecido de la carpeta de ensayo es la reducci√≥n del rendimiento de la replicaci√≥n, porque en lugar de replicar archivos, el servicio pasar√° tiempo limpiando la carpeta de ensayo. <br>  Los servidores DFSR que est√°n configurados con un tama√±o de carpeta de preparaci√≥n suficiente son m√°s eficientes por al menos dos razones: <br><br><ol><li>  Es mucho m√°s eficiente simplemente colocar el archivo en una carpeta intermedia una vez, luego enviarlo a todos los socios de replicaci√≥n de host, que crear el archivo, replicarlo y luego eliminar una copia para cada socio de host. </li><li>  Si la edici√≥n Enterprise del sistema operativo est√° instalada en al menos un miembro, los servidores pueden usar la tecnolog√≠a RDC entre archivos <i>[aprox.</i>  <i>traductor: a partir de Windows Server 2012, esta tecnolog√≠a tambi√©n <a href="">est√° disponible</a> en la edici√≥n est√°ndar]</i> </li></ol><br>  Un tama√±o configurado incorrectamente para la carpeta provisional tambi√©n puede causar bucles de replicaci√≥n.  Esto sucede si el archivo replicado ya se ha copiado en la carpeta provisional en el servidor receptor, pero el mecanismo de limpieza de la carpeta provisional elimina este archivo antes de que pueda moverse a la carpeta de destino.  El archivo eliminado se replicar√° nuevamente en el servidor y este servidor lo eliminar√° nuevamente de la carpeta provisional, como resultado de lo cual el servidor nunca podr√° recibir el archivo.  Este proceso se repetir√° hasta que el servidor acepte el archivo. <br><br>  No ignore los eventos de registro para la carpeta de ensayo. <br><br>  Consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta publicaci√≥n</a> que describe c√≥mo usar el m√©todo para determinar el tama√±o m√≠nimo de una carpeta intermedia. <br><br>  Consulte la secci√≥n "Aumento de la cuota provisional" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  Para obtener informaci√≥n sobre RDC entre archivos, puede leer el art√≠culo "Informaci√≥n sobre la compresi√≥n diferencial remota", publicado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h2>  Procedimiento de preselecci√≥n incorrecto o no probado </h2><br>  Un procedimiento de preselecci√≥n es la copia de datos que se replicar√°n en un nuevo servidor miembro de replicaci√≥n antes de agregarse a la carpeta final de este servidor, a fin de reducir el tiempo requerido para completar la replicaci√≥n primaria.  La mayor√≠a de las fallas del procedimiento de presentaci√≥n previa que encontr√© fueron causadas por tres razones. <br><br><ol><li>  Desajuste de ACL en origen y destino. </li><li>  Despu√©s de copiar a un nuevo miembro de replicaci√≥n, se realizaron cambios en los archivos. </li><li>  No se realizaron pruebas previas para verificar que el procedimiento de preselecci√≥n utilizado funcionara como se esperaba. </li></ol><br>  En resumen, los archivos deben copiarse de cierta manera, y no pueden cambiarse despu√©s de haber sido copiados en la carpeta intermedia, y todo el proceso debe ser probado previamente por usted. <br><br>  Haga clic <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> para leer el blog del Sr. Pile sobre c√≥mo organizar adecuadamente el procedimiento de preselecci√≥n para sus servidores DFSR. <br><br><h2>  Tama√±o de cola de copia grande a lo largo del tiempo </h2><br>  Adem√°s del hecho de que una cola de copia grande que existe durante mucho tiempo significa que sus datos no est√°n sincronizados, esto puede conducir a una resoluci√≥n de conflictos indeseable cuando un archivo con contenido antiguo gana en un script de resoluci√≥n de conflictos.  El escenario m√°s com√∫n en el que me encontr√© con este comportamiento es la adici√≥n masiva de nuevas carpetas de replicaci√≥n.  En lugar de realizar una implementaci√≥n por fases, algunos administradores agregaron de inmediato 20 carpetas nuevas para la replicaci√≥n desde 20 sucursales diferentes, lo que sobrecarg√≥ el servidor host.  Implemente en etapas para que la replicaci√≥n primaria se complete en un per√≠odo de tiempo razonable. <br><br><h2>  DFSR utilizado como soluci√≥n de respaldo </h2><br>  Lo creas o no, algunos administradores implementan DFSR sin copias de seguridad sin conexi√≥n de datos replicados.  DFSR no fue dise√±ado como una soluci√≥n de respaldo.  Uno de los objetivos del desarrollo de DFSR es formar parte de una estrategia de respaldo empresarial, porque DFSR le permite recopilar sus datos distribuidos geogr√°ficamente en un sitio centralizado para su posterior respaldo, recuperaci√≥n y archivado.  Varios miembros de replicaci√≥n brindan protecci√≥n contra fallas en el servidor, pero esto no lo protege de eliminaciones accidentales.  Para estar completamente protegido, debe hacer una copia de seguridad de sus datos. <br><br><h2>  Replicaci√≥n unidireccional: su uso y m√©todos de reparaci√≥n incorrectos </h2><br>  En un intento por evitar que ocurran actualizaciones no deseadas en servidores donde los datos nunca cambiar√°n (o si desean evitar cambios en ellos), muchos clientes configuran la replicaci√≥n unidireccional al eliminar las conexiones salientes para los miembros de replicaci√≥n.  La replicaci√≥n unidireccional no es compatible con ninguna versi√≥n de DFSR anterior a Windows Server 2008 R2.  Windows 2008 R2 admite la replicaci√≥n unidireccional, lo que le permite configurar carpetas de solo lectura para carpetas replicadas. <br><br>  El uso de miembros de replicaci√≥n de solo lectura puede lograr el objetivo de la replicaci√≥n unidireccional, lo que evita cambios no deseados en los datos que se replican.  Si desea usar la replicaci√≥n unidireccional usando DFSR, use Windows 2008 R2 y para aquellos miembros que no deben cambiarse, seleccione el modo de solo lectura. <br><br>  Haga clic <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> para obtener informaci√≥n sobre la replicaci√≥n de solo lectura DFSR. <br><br>  Otro problema com√∫n ocurre cuando el administrador descubre que la replicaci√≥n unidireccional no es compatible e intenta corregir la situaci√≥n, pero lo hace de manera incorrecta.  Simplemente habilitar la replicaci√≥n bidireccional puede tener resultados no deseados. <br><br>  Haga clic <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> para aprender c√≥mo solucionar la replicaci√≥n unidireccional. <br><br><h2>  Servidor de nodo como punto √∫nico de falla y servidores de nodo sobrecargados </h2><br>  He visto muchas implementaciones con un servidor de nodo √∫nico.  Si este servidor de nodo falla, la implementaci√≥n completa est√° en riesgo.  Si est√° utilizando Windows Server 2003 o 2008, debe tener al menos dos servidores host, y si uno falla, el otro debe manejar la carga en el tiempo de recuperaci√≥n del primero con un impacto m√≠nimo en los usuarios finales.  A partir de Windows Server 2008 R2, DFSR se puede implementar en un cl√∫ster de conmutaci√≥n por error de Windows, proporcionando alta disponibilidad y reduciendo a la mitad los requisitos de almacenamiento. <br><br>  Tarde o temprano, los administradores tienen una situaci√≥n en la que hay demasiados servidores en las sucursales que est√°n configurados para replicarse con un servidor de un solo nodo.  Esto puede provocar retrasos en la replicaci√≥n.  Para comprender cu√°ntos servidores de Office Office puede servir un servidor de nodo √∫nico, puede utilizar el seguimiento de la cola de copia.  No existe una f√≥rmula m√°gica, ya que cada entorno es √∫nico y existen muchas dependencias. <br><br>  Lea la secci√≥n "Configuraci√≥n de topolog√≠a" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> para obtener informaci√≥n sobre c√≥mo implementar servidores host. <br>  Haga clic <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> para obtener informaci√≥n sobre c√≥mo configurar DFSR en un cl√∫ster de conmutaci√≥n por error de Windows Server 2008. <br><br><h2>  Demasiadas carpetas para replicar en una sola base de datos Jet </h2><br>  DFSR usa una base de datos Jet en el volumen.  Como resultado, colocar todas las carpetas replicadas en el mismo volumen hace que todas est√©n en la misma base de datos Jet.  Si surge un problema en esta base de datos que necesita ser reparado o restaurado, la base de datos afectar√° a todas las carpetas replicadas en este disco.  <i>[Nota</i>  <i>traductor</i>  <i>obviamente, esto no es un disco, sino un volumen.]</i> Ser√≠a m√°s correcto usar tantos discos como sea posible y distribuir las carpetas replicadas entre ellos, asegurando as√≠ el tiempo m√°ximo de disponibilidad de datos. <br><br><h2>  Implementaci√≥n basada en soluciones iSCSI de presupuesto </h2><br>  A menudo he visto implementaciones de DFSR utilizando el hardware iSCSI m√°s barato.  Por lo general, si usa DFSR, lo hace para lograr objetivos cr√≠ticos, como la redundancia de datos, la consolidaci√≥n de copias de seguridad, la entrega programada de aplicaciones y las actualizaciones del sistema operativo.  No es una buena idea depender de equipos de baja calidad que no cuentan con el soporte normal del proveedor.  Si los datos son importantes para su negocio, el equipo en el que trabajan el SO y el mecanismo de replicaci√≥n ser√°n importantes para ello. <br><br><h2>  El servicio DFSR no instala los parches actuales </h2><br>  DFSR es activamente compatible con Microsoft y se actualiza seg√∫n sea necesario.  Actualice DFSR si hay una nueva versi√≥n para √©l en el momento de su pr√≥ximo ciclo de instalaci√≥n de actualizaciones.  Aseg√∫rese de que sus servidores est√©n actualizados de acuerdo con los art√≠culos de la base de conocimiento que se enumeran a continuaci√≥n. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Revisiones DFSR para Windows 2003 R2</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Revisiones DFSR para Windows 2008 y Windows 2008 R2</a> <br><br>  Tenga en cuenta que, adem√°s de DFSR.EXE / DFSRS.EXE, las actualizaciones enumeradas tambi√©n son para NTFS.SYS y otros archivos.  Para que la replicaci√≥n funcione correctamente, aseg√∫rese siempre de que los √∫ltimos parches est√©n instalados al menos para DFSR y NTFS.  Otras correcciones de la lista se refieren principalmente a problemas de interfaz de usuario, y deber√° instalarlas al menos en los sistemas donde se realizan las tareas de configuraci√≥n de DFSR. <br><br>  Se recomienda que los parches se instalen en el servidor DFSR por adelantado, incluso si todo funciona bien, ya que m√°s adelante esto lo ayudar√° a evitar la aparici√≥n de problemas ya conocidos. <br><br><h2>  Los controladores del adaptador de red no son compatibles hasta la fecha </h2><br>  DFSR solo podr√° funcionar normalmente si la red que le proporciona tambi√©n funciona sin problemas.  Usar controladores hace 5 a√±os no es la soluci√≥n m√°s inteligente.  Ten√≠a experiencia comunic√°ndome con varios clientes para quienes los problemas de replicaci√≥n DFSR se resolvieron al actualizar un controlador NIC desactualizado. <br><br><h2>  Falta el monitoreo de DFSR </h2><br>  A pesar del hecho de que DFSR se utiliza para mover, como regla, datos cr√≠ticos, muchos administradores no tienen idea de lo que est√° haciendo DFSR hasta que se encuentran con un problema.  Aquellos que tienen m√°s recursos crean sus propios scripts para monitorear las colas de copias en sus servidores, pero la mayor√≠a simplemente conf√≠a en ellos.  El paquete de administraci√≥n para DFSR se lanz√≥ hace casi un a√±o (y otras versiones aparecieron antes).  Inst√°lelo y √∫selo, y luego podr√° detectar problemas y responder a ellos antes de que se conviertan en una pesadilla.  Si no puede usar el Paquete de administraci√≥n de gesti√≥n de operaciones para DFSR, al menos escriba un script para monitorear la cola de copias diariamente para comprender si los archivos DFSR se est√°n replicando o no. <br><br>  Haga clic <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> para obtener informaci√≥n sobre el Paquete de administraci√≥n de gesti√≥n de operaciones para DFSR. <br><br>  <b>Actualizado el 19 de enero de 2011:</b> <br><h2>  Realizar cambios en el almacenamiento en disco sin archivar primero los datos </h2><br>  Si necesita reemplazar el disco duro en el servidor DFSR o agregar uno nuevo para aumentar el espacio de almacenamiento, es extremadamente importante tener una copia de seguridad de datos actualizada en caso de que algo salga mal.  Todo puede salir mal, la mayor√≠a de las veces se producen eventos de conflicto debido a cambios inesperados en la carpeta principal o la eliminaci√≥n accidental de la carpeta principal, que se replica a todos los socios.  Debe hacer una copia de seguridad de sus datos antes de realizar cambios y conservarlos hasta que se complete el proyecto. <br><br><h2>  Detener el servicio DFSR para detener temporalmente la replicaci√≥n </h2><br>  A veces necesita detener temporalmente la replicaci√≥n.  La forma correcta de hacer esto es deshabilitar la replicaci√≥n para el grupo deseado usando un horario.  El servicio DFSR debe estar ejecut√°ndose para poder leer las actualizaciones en el registro de USN.  No detenga el servicio DFSR durante un per√≠odo prolongado (d√≠as, semanas), ya que esto puede provocar un desbordamiento del registro (si se han cambiado, agregado o eliminado muchos archivos durante este tiempo).  DFSR se recuperar√° de los desbordamientos del registro, pero en implementaciones grandes tomar√° mucho tiempo y la replicaci√≥n no funcionar√° o ser√° muy lenta durante la recuperaci√≥n del registro.  Adem√°s, es probable que observe colas de copia muy grandes hasta que se complete la recuperaci√≥n del registro. <br><br>  Espero que esta lista te ayude.  Buena replicaci√≥n! <br><br>  Warren "red ancha" Williams <br><br>  <i>[Nota</i>  <i>traductor</i>  <i>Si hay inter√©s de los lectores, m√°s adelante intentar√© traducir los art√≠culos publicados en los enlaces indicados en el texto, as√≠ como otros art√≠culos del autor original]</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424139/">https://habr.com/ru/post/es424139/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424129/index.html">Desarrollo de Android. Un poco sobre el trabajo r√°pido con listas</a></li>
<li><a href="../es424131/index.html">Manifiesto para desarrolladores de sistemas inteligentes: 15 principios</a></li>
<li><a href="../es424133/index.html">Virtualizaci√≥n de trabajos para la oficina de arquitectura a trav√©s de los ojos de las humanidades.</a></li>
<li><a href="../es424135/index.html">La Uni√≥n Europea aprueba una nueva directiva de derechos de autor: c√≥mo afectar√° a Internet</a></li>
<li><a href="../es424137/index.html">¬øY c√≥mo celebraste el d√≠a del programador?</a></li>
<li><a href="../es424141/index.html">Dise√±o de juegos a la vida. La econom√≠a del juego (Parte I)</a></li>
<li><a href="../es424143/index.html">El resumen de materiales interesantes para el desarrollador m√≥vil # 271 (del 17 al 23 de septiembre)</a></li>
<li><a href="../es424147/index.html">Telltale lo es todo. Una pena</a></li>
<li><a href="../es424149/index.html">Frecuencia de acuarela de 96 fps: revoluci√≥n o disturbio de formato en cinematograf√≠a</a></li>
<li><a href="../es424151/index.html">M√°quina de etiquetado para etiquetas de labios: expanda la distorsi√≥n del cilindro mediante programaci√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>