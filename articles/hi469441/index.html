<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯП╡я╕П ЁЯПЮя╕П ЁЯСЕ рд╕рд░рд▓рддрд╛ рдХреА рдЬрдЯрд┐рд▓рддрд╛ ЁЯОн ЁЯеж тПм</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдХреА рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛ рдореЗрдВ рд▓рд┐рдЦрд╛ рд╣реИ, рдореИрдВ рдПрдХ рдРрд╕реА рднрд╛рд╖рд╛ рдХреА рддрд▓рд╛рд╢ рдореЗрдВ рд╣реВрдВ, рдЬрд┐рд╕рдореЗрдВ рдореИрдВ рдХрдо рд▓рд┐рдЦ рд╕рдХреВрдВ рдФрд░ рдЕрдзрд┐рдХ рд╕реБрд░рдХреНрд╖рд╛ рд╣реЛред рдореЗрд░реА рдореБрдЦреНрдп рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╕рд░рд▓рддрд╛ рдХреА рдЬрдЯрд┐рд▓рддрд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469441/"><p><img src="https://habrastorage.org/webt/4l/s7/kr/4ls7krf3m0xjrh7ediaeilkldpe.png"></p><br><p> рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ</a> рдХреА рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛ рдореЗрдВ рд▓рд┐рдЦрд╛ рд╣реИ, рдореИрдВ рдПрдХ рдРрд╕реА рднрд╛рд╖рд╛ рдХреА рддрд▓рд╛рд╢ рдореЗрдВ рд╣реВрдВ, рдЬрд┐рд╕рдореЗрдВ рдореИрдВ рдХрдо рд▓рд┐рдЦ рд╕рдХреВрдВ рдФрд░ рдЕрдзрд┐рдХ рд╕реБрд░рдХреНрд╖рд╛ рд╣реЛред  рдореЗрд░реА рдореБрдЦреНрдп рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рд╣рдореЗрд╢рд╛ рд╕реА # рд░рд╣реА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рджреЛ рднрд╛рд╖рд╛рдУрдВ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рдЬреЛ рдЬрдЯрд┐рд▓рддрд╛ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рд╕рдордорд┐рдд рд░реВрдк рд╕реЗ рдЕрд▓рдЧ рд╣реИрдВ, рдЬрд┐рд╕реЗ рдореИрдВрдиреЗ рдХреЗрд╡рд▓ рдкрд╣рд▓реЗ рд╣реА рд╕реБрдирд╛ рдерд╛, рд▓реЗрдХрд┐рди рдореИрдВ рдирд╣реАрдВ рд▓рд┐рдЦ рд╕рдХрд╛: рд╣рд╛рд╕реНрдХреЗрд▓ рдФрд░ рдЧреЛред  рдПрдХ рднрд╛рд╖рд╛ рдпрд╣ рдХрд╣рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕рд┐рджреНрдз рд╣реЛ рдЧрдИ рдХрд┐ "рд╣рд░ рдХреАрдордд рдкрд░ рд╕рдлрд▓рддрд╛ рд╕реЗ рдмрдЪреЗрдВ" *, рдЬрдмрдХрд┐ рджреВрд╕рд░рд╛, рдореЗрд░реА рд╡рд┐рдирдореНрд░ рд░рд╛рдп рдореЗрдВ, рдЗрд╕рдХрд╛ рдкреВрд░реНрдг рд╡рд┐рдкрд░реАрдд рд╣реИред  рдЕрдВрдд рдореЗрдВ, рдореИрдВ рдпрд╣ рд╕рдордЭрдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ рдХрд┐ рдХреНрдпрд╛ рдмреЗрд╣рддрд░ рд╣реЛрдЧрд╛: рдЬрд╛рдирдмреВрдЭрдХрд░ рд╕рд╛рджрдЧреА рдпрд╛ рдЬрд╛рдирдмреВрдЭрдХрд░ рдХрдареЛрд░рддрд╛? </p><br><p>  рдореИрдВрдиреЗ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рд▓рд┐рдЦрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рдФрд░ рдпрд╣ рджреЗрдЦрд╛ рдХрд┐ рджреЛрдиреЛрдВ рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рдпрд╣ рдХрд┐рддрдирд╛ рдЖрд╕рд╛рди рд╣реИ, рдЕрдиреБрднрд╡ рдХреЗ рд╕рд╛рде рдПрдХ рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП рдЙрдирдХреА рд╕реАрдЦрдиреЗ рдХреА рдЕрд╡рд╕реНрдерд╛ рдХреНрдпрд╛ рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдХрд┐рддрдирд╛ рдЕрдзреНрдпрдпрди рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдПрдХ рдФрд░ рджреВрд╕рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ "рдиреМрд╕рд┐рдЦрд┐рдпрд╛" рдХреЛрдб рдХрд┐рддрдирд╛ рдореБрд╣рд╛рд╡рд░рд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рдпрд╣ рд╕рдордЭрдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ рдХрд┐ рд╣рд╛рд╕реНрдХреЗрд▓ рдХрдВрдкрд╛рдЗрд▓рд░ рдХреЛ рд╕рдВрддреБрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЦрд┐рд░рдХрд╛рд░ рдореБрдЭреЗ рдХрд┐рддрдирд╛ рднреБрдЧрддрд╛рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдХрд┐рддрдирд╛ рд╕рдордп рдЧреЛрд░реЛрдирд╛рдЗрдЯреНрд╕ рдХреА рдкреНрд░рд╕рд┐рджреНрдз рд╕реБрд╡рд┐рдзрд╛ рдХреЛ рдмрдЪрд╛рдПрдЧрд╛ред  рдореИрдВрдиреЗ рдпрдерд╛рд╕рдВрднрд╡ рдирд┐рд╖реНрдкрдХреНрд╖ рд░рд╣рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рдФрд░ рдореИрдВ рд▓реЗрдЦ рдХреЗ рдЕрдВрдд рдореЗрдВ рдПрдХ рд╡реНрдпрдХреНрддрд┐рдкрд░рдХ рд░рд╛рдп рджреВрдВрдЧрд╛ред  рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдореЛрдВ рдиреЗ рдореБрдЭреЗ рдмрд╣реБрдд рдЖрд╢реНрдЪрд░реНрдпрдЪрдХрд┐рдд рдХрд┐рдпрд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХрд┐ рдЦрд╛рдмрд░реЛрд╡рд╕реНрдХ рдирд╛рдЧрд░рд┐рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕ рддрд░рд╣ рдХреА рддреБрд▓рдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрдврд╝рдирд╛ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛрдЧрд╛ред </p><a name="habracut"></a><br><hr><br><p>  рдФрд░ рддреБрд░рдВрдд рдПрдХ рдЫреЛрдЯреА рд╕реА рдЯрд┐рдкреНрдкрдгреАред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ (*) рдЕрдХреНрд╕рд░ рд╡рд┐рдбрдВрдмрдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХреЗрд╡рд▓ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд▓реЛрдЧ рдЗрд╕реЗ рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ рдкрд╛рд░реНрд╕ рдХрд░рддреЗ рд╣реИрдВред  рд╡реЗ рдЗрд╕реЗ "рдмрдЪрдиреЗ (рд╕рдлрд▓рддрд╛) (рд╣рд░ рдХреАрдордд рдкрд░)" рдХреЗ рд░реВрдк рдореЗрдВ рдкрдврд╝рддреЗ рд╣реИрдВ, "," рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ, рдЕрдЧрд░ рдпрд╣ рд╕рдлрд▓рддрд╛ рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдЗрд╕рд╕реЗ рдмрдЪрдирд╛ рдЪрд╛рд╣рд┐рдП, "рдЬрдмрдХрд┐ рдЕрд╕рд▓реА рд╡рд╛рдХреНрдпрд╛рдВрд╢" рд╕реЗ рдмрдЪреЗрдВ (рд╕рдлрд▓рддрд╛ рдмрд┐рд▓реНрдХреБрд▓) рд▓рд╛рдЧрдд) ", рдЕрд░реНрдерд╛рдд," рдпрджрд┐ рд╕рдлрд▓рддрд╛ рдХреА рдХреАрдордд рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╣реИ, рддреЛ рд╣рдореЗрдВ рд╡рд╛рдкрд╕ рдХрджрдо рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рд╕рдм рдХреБрдЫ рдкреБрдирд░реНрд╡рд┐рдЪрд╛рд░ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред "  рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдЗрд╕ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреЗ рдмрд╛рдж рдпрд╣ рд╣рд╛рд╕реНрдпрд╛рд╕реНрдкрдж рд╣реЛ рдЧрдпрд╛ рдФрд░ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрд░реНрде рдорд┐рд▓рд╛: рднрд╛рд╖рд╛ рдХреА рд╡рд┐рдЪрд╛рд░рдзрд╛рд░рд╛ рдХреЛ рдЖрдкрдХреЗ рдЖрд╡реЗрджрди рдХреА рдЙрдЪрд┐рдд рдпреЛрдЬрдирд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдПрдбрд╣реЙрдХ рдмреИрд╕рд╛рдЦреА рди рдбрд╛рд▓реЗрдВ рдЬрд╣рд╛рдВ рдЙрдирдХреА рдмрд╣реБрдд рдЕрдзрд┐рдХ рд▓рд╛рдЧрдд рд╣реИред  рдЧреЛ рдХреА рд╡рд┐рдЪрд╛рд░рдзрд╛рд░рд╛, рдмрджрд▓реЗ рдореЗрдВ, "рдХреЛрдб рдкрд░реНрдпрд╛рдкреНрдд рд╕рд░рд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдмрджрд▓рддреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЗрд╕реЗ рдлреЗрдВрдХрдирд╛ рдФрд░ рдПрдХ рдирдпрд╛ рд▓рд┐рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реЛ рд╕рдХреЗ"ред </p><br><h2 id="metodika-sravneniya">  рддреБрд▓рдирд╛ рддрдХрдиреАрдХ </h2><br><p>  рдЖрдЧреЗ рдХреА рд╣рд▓рдЪрд▓ рдХреЗ рдмрд┐рдирд╛, рдореИрдВрдиреЗ рдХреЙрдорд░реЗрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">0xd34df00d</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреНрд╡рд╛рд░рд╛ рдЖрд╡рд┐рд╖реНрдХрд╛рд░ рдХреА рдЧрдИ</a> рдкрд╣реЗрд▓реА рдХреЛ рд▓рд┐рдпрд╛ рдФрд░ рдпрд╣ рдЗрд╕ рддрд░рд╣ рд▓рдЧрддрд╛ рд╣реИ: </p><br><p>  рдорд╛рди рд▓реАрдЬрд┐рдП рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреБрдЫ рд╕рдВрд╕реНрдерд╛рдУрдВ рдХреЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛рдУрдВ рдХрд╛ рдПрдХ рдкреЗрдбрд╝ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ (рд╕реНрдореГрддрд┐ рдореЗрдВ, рдХрд┐рд╕реА рднреА рд░реВрдк рдореЗрдВ)ред  рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre><code class="plaintext">|- 1
   |- 2
   |- 3
      |- 4
      |- 5</code></pre><br>
<p>     API    <code>/api/{id}</code>  JSON-  . </p><br>
<p>   ,  ,         API,     . ,       ,           <code>IO</code>     .</p><br>
<p>      API,     ,     .   ,    ,      ,  ..</p><br>
<p>       :</p><br>
<pre><code class="plaintext">|- 1
   |- 2
   |- 3
      |- 4
      |- 5

|- 1: 
   |- 2:   1
   |- 3:   2
      |- 4:   1
      |- 5:   2</code></pre><br>
<p>            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://jsonplaceholder.typicode.com/todos/</a></p><br>
<p> ,  ,   ,   .</p><br>
<h2 id="otstuplenie-pro-haskell">  Haskell</h2><br>
<p><br>
<em>  ,   -, -    <code>do-</code>,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>.    ,  .      C#</em></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/90e/d14/6ac/90ed146ac2ed677cf377915af7a99705.jpg"></p><br>
<p><em> -  .   </em></p><br>
<p>Disclaimer:          ,       Haskell    </p><br>
<p>   ,        ML .   ,   ,  Lingua Franca -  *   .     ,     ,      ,  .     .   ,         ,     .</p><br>
<p><em>*        /++/...,    тАФ C++/C#/Java/Kotlin/Swift/...</em></p><br>
<p>  ,      Haskell.  Scala/F#/Idris/Elm/Elixir/тАж    ,      тАФ   ,  .        ,          ,    Haskell    .      Rust/C#,      ,   .  <code>Option</code>/<code>Maybe</code>, <code>Result</code>/<code>Either</code>  <code>Task</code>/<code>Promise</code>/<code>Future</code>/<code>IO</code>                .</p><br>
<h4 id="itak-esli-vy-vidite-pered-soboy">,     </h4><br>
<pre><code class="haskell">data Maybe a = Just a | Nothing  --  </code></pre><br>
<p>  </p><br>
<pre><code class="rust">//   
enum Maybe&lt;T&gt; {
   Just(T),
   Nothing
}</code></pre><br>
<p>   ,        .     Rust: -  -          T.   -     .         . ,  </p><br>
<pre><code class="haskell">data Either a b = Left a | Right b</code></pre><br>
<p>    ,     </p><br>
<pre><code class="rust">enum Either&lt;A,B&gt; {
   Left(A),
   Right(B)
}</code></pre><br>
<p>   .   ,         (   -    ).</p><br>
<p>    -   -,   ,   :</p><br>
<pre><code class="haskell">data Comment = Comment {
      title :: String
    , id  :: Int
    } deriving (Show) --     
              --    (  ToString()  C#/Java)</code></pre><br>
<p>  :</p><br>
<pre><code class="rust">#[derive(Debug)]
struct Comment {
    title: String,
    id: i32
}</code></pre><br>
<p>   ,  .</p><br>
<h4 id="esli-zhe-vy-vidite-pered-soboy">     </h4><br>
<pre><code class="haskell">sqr :: Int -&gt; Int
sqr x = x*x

main :: IO () -- IO   ,     ,     
main = print (sqr 3)</code></pre><br>
<p> </p><br>
<pre><code class="rust">fn sqr(x: i32) -&gt; i32 { x*x }
fn main() {
   println!("{}", sqr(3));
}</code></pre><br>
<p>    ,  тАФ    ,   тАФ  <code>main</code>. </p><br>
<p> ,    :  -    ,  ML- тАФ .   -   -   .    <code>(sqr 3)</code>  ,     ,        .       <code>print sqr</code>      ,  <code>sqr</code>   <code>Fn(i32) -&gt; i32</code> (<code>Func&lt;int, int&gt;</code>   C#),      <code>show</code> ( <code>ToString()</code>). </p><br>
<p> :        :  () тАФ  ,   тАФ   . -   (      )     <code>-&gt;</code>,      . ,     <code>foo :: Int -&gt; Double -&gt; String -&gt; Bool</code>,      <code>foo</code>    :  ,       ,    .</p><br>
<p>   ,      <code>bar :: (Int -&gt; Double) -&gt; Int -&gt; (String -&gt; Bool)</code>?</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p>   <code>bar</code>   :  <code>Int -&gt; Double</code>    <code>Int</code>,    <code>String -&gt; bool</code>.</p><br>
<p>Rust-: <code>fn bar(f: impl Fn(i32) -&gt; f64, v: i32) -&gt; impl Fn(String) -&gt; bool</code></p><br>
<p>C#-: <code>Func&lt;string, bool&gt; Bar(Func&lt;int, double&gt; f, int v)</code> </p></div></div><br>
<p>   ,    (     ),       .     ,        ,        ,      .</p><br>
<h4 id="teper-zhe-esli-vy-vidite"> ,   </h4><br>
<pre><code class="haskell">sqr x = x*x     --     ,   
add x y = x + y -- : FOR EXAMPLE PURPOSES ONLY!
add5_long x = add 5 x
add5 = add 5    --    ,       , 
                --  add5     add5_long. 
                --    Method Groups  C#
                --     - 

main :: IO ()
main = putStrLn (show (add 10 (add5 (sqr 3)))) </code></pre><br>
<p>   </p><br>
<pre><code class="rust">fn sqr(x: i32) -&gt; i32 { x*x }
fn add(x: i32, y: i32) -&gt; i32 { x + y }
fn add5(x: i32) -&gt; i32 { add(5, x) }

fn main() {
   println!("{}", ToString::to_string(add(10, add(5, sqr(3)))));                
}</code></pre><br>
<p>,    .      $      .   <code>a $ b</code>    <code>a (b)</code>.      :</p><br>
<pre><code class="haskell">main = putStrLn $ show $ add 10 $ add5 $ sqr 3 -- !  </code></pre><br>
<p>              ,    -  .     .   тАФ   ,     <code>f (g x) = (f . g) x</code>.  <code>print (sqr 3)</code>    <code>(print . sqr) 3</code>.   ""  "  "    "    ",      <code>3</code>.       :</p><br>
<pre><code class="haskell">main = putStrLn . show . add 10 . add5 $ sqr 3</code></pre><br>
<p>  ,        ?    ,  тАФ ,           ,         - :</p><br>
<pre><code class="haskell">--     5,   10,    ,    
putStrLnShowAdd10Add5 = putStrLn . show . add 10 . add5
--   putStrLnShowAdd10Add5 x = putStrLn . show . add 10 . add5 x
--      (, ,    )

main :: IO ()
main = putStrLnShowAdd10Add5 $ sqr 3</code></pre><br>
<p>    "24".             тАФ       ,       ,   тАФ        тАФ    .</p><br>
<p>   ML   ,    Haskell ,       </p><br>
<h4 id="posledniy-ryvok"> </h4><br>
<pre><code class="haskell">main :: IO ()
main = 
  let maybe15 = do
      let just5 = Just 5    --    Maybe   Just (.  )   5
      let just10 = Just 10  --     10
      a &lt;- just5            --     ,   ,     `a`.           !
      b &lt;- just10           --     `b`
      return $ a + b        --      ,      (    Just)      a  b.
  in 
    print maybe15</code></pre><br>
<p> ,    <code>do</code>-   <code>&lt;-</code> ,  <code>do-</code>,      ,   ( ,   ).       <code>Maybe</code>     - (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">"Null condition operator"</a>),   null-  ,   null,     -  . <code>do-</code> -  ,     .</p><br>
<p>,     ? ,    "" ,     (   <code>Maybe</code>,      ,  <code>Result&lt;T,Error&gt;</code>,        тАФ <code>Either</code>),    ,   ?    ,  <code>&lt;-</code>    ,              .</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p>     ,    <code>async/await</code> (   C# ..  Rust async-await   ):</p><br>
<pre><code class="cs">async ValueTask&lt;int&gt; Maybe15() {
    var just5 = Task.FromResult(5);
    var just10 = Task.FromResult(10);
    int a = await just5; //         !
    int b = await just10;
    return a + b;
}

Console.WriteLine(Maybe15().ToString()) //   15</code></pre><br>
<p>    <code>Task</code>  <code>Maybe</code>,     ,   .<br>
 ,   <code>do-</code>   <code>async/await</code> (       <code>Task</code>)    ,  <code>do</code> тАФ  " <code>async</code>-",  <code>&lt;-</code> тАФ  "" (  ).      <code>Future</code>/<code>Option</code>/<code>Result</code>/ <code>List</code>,   . </p></div></div><br>
<div class="spoiler"><b class="spoiler_title"> C#</b><div class="spoiler_text"><p>    C#   <code>do-</code>,     <code>async/await</code>  <code>Task</code>.   , <em> </em>, LINQ-. ,     , -      ,          .         Nullable,     Haskell         (     Task). ,    ( ):</p><br>
<pre><code class="haskell">main :: IO ()
main = 
  let maybe15 = do
      a &lt;- Just 5
      b &lt;- Just 10
      return $ a + b 
  in 
    print maybe15</code></pre><br>
<p>   C#</p><br>
<pre><code class="cs">int? maybe15 = from a in new int?(5)
               from b in new int?(10)
               select a + b;

Console.WriteLine(maybe15?.ToString() ?? "Nothing");</code></pre><br>
<p>  ?  тАФ ,     haskell   Nothing   ,   C#    .</p><br>
<p>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  repl</a> (        ).        <code>Result</code>  <code>Task</code>.  ,     .  ,           (,      , ?).</p><br>
<p>           Haskell: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://repl.it/@Pzixel/ChiefLumpyDebugging</a></p></div></div><br>
<p>,    ,     </p><br>
<h2 id="haskell">Haskell</h2><br>
<p><img src="https://habrastorage.org/webt/yv/48/tc/yv48tcqlydoabxmt9zo0coqwcq4.png"></p><br>
<p><em>         ? , IDE   </em></p><br>
<p>                :  GHC (), Stack (   ,   <code>cargo</code>  <code>dotnet</code>), IntelliJ-Haskell,     .     ,         IDE  .</p><br>
<p>  ,      ,  ,  ,  ,       :</p><br>
<pre><code class="haskell">main :: IO ()
main = putStrLn "Hello, World!"</code></pre><br>
<p>,  !     ,    .       <code>Data.Tree</code>    <code>drawTree</code>. , ,     :</p><br>
<pre><code class="haskell">import Data.Tree

main :: IO ()
main = do
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]
    putStrLn . drawTree $ tree --      ,     .
                               --        </code></pre><br>
<p>    :</p><br>
<pre><code class="plaintext">    тАв No instance for (Num String) arising from the literal тАШ1тАЩ
    тАв In the first argument of тАШNodeтАЩ, namely тАШ1тАЩ
      In the expression:
        Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]</code></pre><br>
<p>-  30   ,   "   ?.. тАж ,       ",  "haskell map convert to string",        <code>map show</code>.   :     <code>putStrLn . drawTree . fmap show $ tree</code>, ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  </a></p><br>
<p>,    ,       ?<br>
,   ,       .     ,    ,   -   -  . ..    -  Rust  ,            <code>Option</code> тАФ  ,      - <code>Maybe</code> ( <code>Option</code>),  ,     HTTP ,    .       ,   .</p><br>
<p>    -:</p><br>
<pre><code class="haskell">import Data.Tree

data Comment = Comment {
      title :: String
    , id  :: Int
    } deriving (Show)

getCommentById :: Int -&gt; Maybe Comment
getCommentById i = Just $ Comment (show i) i

main :: IO ()
main = do
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]
    putStrLn . drawTree . fmap show $ tree</code></pre><br>
<p> ,     -   .      "haskell map maybe list" (    ,          ,    ),     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> "  <code>mapM</code>". :</p><br>
<pre><code class="haskell">import Data.Tree
import Data.Maybe

data Comment = Comment {
      title :: String
    , id  :: Int
    } deriving (Show)

getCommentById :: Int -&gt; Maybe Comment
getCommentById i = Just $ Comment (show i) i

main :: IO ()
main = do
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]
    putStrLn . drawTree . fmap show $ tree
    let commentsTree = mapM getCommentById tree
    putStrLn . drawTree . fmap show $ fromJust commentsTree</code></pre><br>
<p>:</p><br>
<pre><code class="plaintext">1
|
+- 2
|
`- 3
   |
   +- 4
   |
   `- 5
Comment {title = "1", id = 1}
|
+- Comment {title = "2", id = 2}
|
`- Comment {title = "3", id = 3}
   |
   +- Comment {title = "4", id = 4}
   |
   `- Comment {title = "5", id = 5}</code></pre><br>
<p>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  </a>.    <code>fromJust</code> ( <code>unwrap()</code>    <code>Nullable.Value</code>  C#,   ,   ,   ),     ,           .</p><br>
<p>    ,     ,       JSON'.<br>
 ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">wreq</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">   </a>.  15          :</p><br>
<pre><code class="haskell">{-# LANGUAGE DeriveGeneric #-}

import Data.Tree
import Data.Maybe
import Network.Wreq
import GHC.Generics
import Data.Aeson
import Control.Lens

data Comment = Comment {
      title :: String
    , id  :: Int
    } deriving (Generic, Show)

instance FromJSON Comment -- `impl FromJson for Comment {}`   Rust

getCommentById :: Int -&gt; IO Comment
getCommentById i = do
  response &lt;- get $ "https://jsonplaceholder.typicode.com/todos/" ++ show i
  let comment = decode (response ^. responseBody) :: Maybe Comment
  return $ fromJust comment

main :: IO ()
main = do
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]
    Prelude.putStrLn . drawTree . fmap show $ tree
    let commentsTree = mapM getCommentById tree
    Prelude.putStrLn . drawTree . fmap show $ fromJust commentsTree</code></pre><br>
<p>тАж   20 ,       (,  <code>reqwest</code>  Rust),      :</p><br>
<pre><code class="plaintext">    * Couldn't match expected type `Maybe (Tree a0)'
                  with actual type `IO (Tree Comment)'
    * In the first argument of `fromJust', namely `commentsTree'
      In the second argument of `($)', namely `fromJust commentsTree'
      In a stmt of a 'do' block:
        putStrLn . drawTree . fmap show $ fromJust commentsTree
   |
28 |     Prelude.putStrLn . drawTree . fmap show $ fromJust commentsTree
   |                                                        ^^^^^^^^^^^^^</code></pre><br>
<p> ,    <code>fromJust</code>    <code>Maybe Tree</code> -&gt; <code>Tree</code>,         IO ,     <code>IO Tree</code>  <code>Maybe Tree</code>.    ?   ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> "  <code>&lt;-</code>"  . :</p><br>
<pre><code class="haskell">main :: IO ()
main = do
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]
    Prelude.putStrLn . drawTree . fmap show $ tree
    commentsTree &lt;- mapM getCommentById tree
    Prelude.putStrLn . drawTree . fmap show $ commentsTree</code></pre><br>
<p>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>.  .  ,    .</p><br>
<p>  20  ,    .    Concurrent-, -  ,  -.    ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">async</a>.        ,     - :</p><br>
<pre><code class="haskell">commentsTree &lt;- mapConcurrently getCommentById tree</code></pre><br>
<p>.  <strong><em></em></strong> ,   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  </a>.       ,   тАФ  .</p><br>
<p><em>:        ..   ,  HTTP ,  repl.it   .       </em></p><br>
<p>        .          C#  Rust        .         67  -.       ,  <code>reqwest</code>    100      ,     . ,                  . </p><br>
<p>     .     ,       ,    .        ,       :</p><br>
<pre><code class="haskell">main = do
    let tree = [1,2,3,4,5]
    print tree
    commentsTree &lt;- mapConcurrently getCommentById tree
    print commentsTree</code></pre><br>
<p></p><br>
<pre><code class="plaintext">[1,2,3,4,5]
[Comment {title = "delectus aut autem", id = 1},Comment {title = "quis ut nam facilis et officia qui", id = 2},Comment {title = "fugiat veniam minus", id = 3},Comment {title = "et porro tempora", id = 4},Comment {title = "laboriosam mollitia et enim quasi adipisci quia provident illum", id = 5}]</code></pre><br>
<p>       ,     .        ,          <em> </em>,      . , ,           ( ,   ),  ,  ,  ,   <em></em> .  ,        ,            .</p><br>
<p>,    ,     , go.        ,           ( ,  go    )      .   ,       (,           ),           тАФ !</p><br>
<h2 id="go">Go</h2><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/039/a3f/4cc/039a3f4cc229b1497864df0033839433.png"></p><br>
<p><em>  ,     </em></p><br>
<p>           ,     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://play.golang.org/</a>   .</p><br>
<p> ,     . ,   .      go :</p><br>
<pre><code class="go">package main

type intTree struct {
    id int
    children []intTree
}

func main() {
    tree := intTree{ //    gofmt 
        id: 1,
        children: []intTree {
            {
                id: 2,
                children: []intTree{

                },
            },
            {
                id: 3,
                children: []intTree{
                    {
                        id: 4,
                    },
                    {
                        id: 5,
                    },
                },
            },
        },
    }
}</code></pre><br>
<p>  тАФ , <code>tree declared and not used</code>. ,     ,       ,  <code>tree</code>  <code>_</code>.  ,   <code>no new variables on left side of :=</code>. ,              ,        .      ,  ,          <code>foreach</code>     :</p><br>
<pre><code class="go">func showIntTree(tree intTree) {
    showIntTreeInternal(tree, "")
}

func showIntTreeInternal(tree intTree, indent string) {
    fmt.Printf("%v%v\n", indent, tree.id)
    for _, child := range tree.children {
        showIntTreeInternal(child, indent + "  ")
    }
}</code></pre><br>
<p>, ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> ,   </a>.      Haskell         ,          .</p><br>
<p> ,      .   ,    </p><br>
<pre><code class="go">type comment struct {
    id int
    title string
}

type commentTree struct {
    value comment
    children []commentTree
}

func loadComments(node intTree) commentTree {
    result := commentTree{}
    for _, c := range node.children {
        result.children = append(result.children, loadComments(c))
    }
    result.value = getCommentById(node.id)
    return result
}

func getCommentById(id int) comment { 
    return comment{id:id, title:"Hello"} //     go
}</code></pre><br>
<p>           :</p><br>
<pre><code class="go">func showCommentsTree(tree commentTree) {
    showCommentsTreeInternal(tree, "")
}

func showCommentsTreeInternal(tree commentTree, indent string) {
    fmt.Printf("%v%v - %v\n", indent, tree.value.id, tree.value.title)
    for _, child := range tree.children {
        showCommentsTreeInternal(child, indent + "  ")
    }
}</code></pre><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>,        -,      . ,   http , ,   JSON,    5   :</p><br>
<pre><code class="go">func getCommentById(i int) comment {
    result := &amp;comment{}
    err := getJson("https://jsonplaceholder.typicode.com/todos/"+strconv.Itoa(i), result)
    if err != nil {
        panic(err) //    
    }
    return *result
}

func getJson(url string, target interface{}) error {
    var myClient = &amp;http.Client{Timeout: 10 * time.Second}
    r, err := myClient.Get(url)
    if err != nil {
        return err
    }
    defer r.Body.Close()

    return json.NewDecoder(r.Body).Decode(target)
}</code></pre><br>
<p>, </p><br>
<pre><code class="plaintext">1
  2
  3
    4
    5
0 - 
  0 - 
  0 - 
    0 - 
    0 - </code></pre><br>
<p>     . ,   ,   .  .</p><br>
<p>  5     ,  ,     :  <code>{Title = "delectus aut autem", Id = 1}</code>  c <code>id, title</code>   .    ,       ,    тАФ .  ,   :  тАФ       ,  тАФ      ,    .</p><br>
<p>      DTO,     , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>.</p><br>
<p>  10    ,      !      тАФ    . ,               , ,      ,    ,    .</p><br>
<p>   5,     <code>go</code>-.  </p><br>
<pre><code class="go">func loadComments(root intTree) commentTree {
    var wg sync.WaitGroup
    result := loadCommentsInner(&amp;wg, root)
    wg.Wait()
    return result
}

func loadCommentsInner(wg *sync.WaitGroup, node intTree) commentTree {
    result := commentTree{}
    wg.Add(1)
    for _, c := range node.children {
        result.children = append(result.children, loadCommentsInner(wg, c))
    }
    go func() {
        result.value = getCommentById(node.id)
        wg.Done()
    }()
    return result
}</code></pre><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> </p><br>
<pre><code class="plaintext">0 - 
  0 - 
  0 - 
    0 - 
    0 - </code></pre><br>
<p>,   - ?  ,     ,  .  ,        ,   <code>wg.Wait()</code>        ,         ,    .</p><br>
<p>,    -     ,   .    ,   ,    ,     10     :</p><br>
<pre><code class="go">func loadComments(root intTree) commentTree {
    ch := make(chan commentTree, 1)   //  
    var wg sync.WaitGroup             //   
    wg.Add(1)                         //     
    loadCommentsInner(&amp;wg, ch, root)  //  
    wg.Wait()                         //  
    result := &lt;- ch                   //    
    return result
}

func loadCommentsInner(wg *sync.WaitGroup, channel chan commentTree, node intTree) {
    ch := make(chan commentTree, len(node.children))  //     
    var childWg sync.WaitGroup                        //     
    childWg.Add(len(node.children))
    for _, c := range node.children {
        go loadCommentsInner(&amp;childWg, ch, c)         //      ()
    }
    result := commentTree{
        value: getCommentById(node.id),               //   
    }
    if len(node.children) &gt; 0 {                       //     ,   ,   
        childWg.Wait()
        for value := range ch {                       //      ,    
            result.children = append(result.children, value)
        }
    }
    channel &lt;- result                                 //     
    wg.Done()                                         //     
}</code></pre><br>
<p> тАж <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>.   .  ,       .  ,      ,   ,    .   -  .  ?</p><br>
<p>  15   ,  , / ,  тАж        HTTP    :</p><br>
<pre><code class="go">func getCommentById(id int) comment {
    return comment{Id: id, Title: "Hello"}
}</code></pre><br>
<p>   :</p><br>
<pre><code class="go">1
  2
  3
    4
    5
fatal error: all Goroutines are asleep - deadlock!

goroutine 1 [semacquire]:
sync.runtime_Semacquire(0xc00006e228)
    C:/go/src/runtime/sema.go:56 +0x49
sync.(*WaitGroup).Wait(0xc00006e220)
    C:/go/src/sync/waitgroup.go:130 +0x6b
main.loadCommentsInner(0xc00006e210, 0xc0000ce120, 0x1, 0xc000095f10, 0x2, 0x2)
    C:/Users/pzixe/go/src/hello/hello.go:47 +0x187
main.loadComments(0x1, 0xc000095f10, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
    C:/Users/pzixe/go/src/hello/hello.go:30 +0xec
main.main()
    C:/Users/pzixe/go/src/hello/hello.go:94 +0x14d</code></pre><br>
<p>,   -  . ,   -   ?     HTTP        ,      ...</p><br>
<p>             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">@gogolang</a>    ,       .      ,     :</p><br>
<ol>
<li>      .     ,        ,                <code>comment</code>    JSON</li>
<li>    .     ,   <code>Task</code>   <code>Task</code>    <code>WhenAny</code>/<code>WhenAll</code>    .  ,    ,   ,   .   ,     ,     .      тАФ    - -<br>
<pre><code class="go">for httpRequest := range webserer.listen() {
    go handle(httpRequest)
} </code></pre></li>
<li><p>           go-way     printTree:</p><br>
<pre><code class="go">func printTree(tree interface{}) string {
    b, err := json.MarshalIndent(tree, "", "  ")
    if err != nil {
        panic(err)
    }
    return string(b)
}</code></pre><br>
<p> <code>interface {}</code> тАФ    <code>dynamic</code>   <code>any</code>,       .         ,      .</p><br>
<p>   JSON         ,      .</p><br>
</li>
</ol><br>
<p>      ,      :     ,  ,      ?                 .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>:</p><br>
<pre><code class="go">func loadComments(root intTree) commentTree {
    result := commentTree{}
    var wg sync.WaitGroup
    loadCommentsInner(&amp;result, root, &amp;wg)
    wg.Wait()
    return result
}

func loadCommentsInner(resNode *commentTree, node intTree, wg *sync.WaitGroup) {
    wg.Add(1)
    for _, res := range node.children {
        resNode.children = append(resNode.children, &amp;commentTree{})
        loadCommentsInner(resNode.children[len(resNode.children)-1], res, wg)
    }
    resNode.value = getCommentById(node.id)
    wg.Done()
}</code></pre><br>
<p>  ? ,        "go-way":     ,        .         ,   ,     ,     .</p><br>
<p>    ,        .    ,    ,   ,    </p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p>  ,        ,   . </p></div></div><br>
<p>       ,       ,   - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>   :</p><br>
<pre><code class="go">func loadComments(root intTree) commentTree {
    result := commentTree{}
    var wg sync.WaitGroup
    loadCommentsInner(&amp;result, root, &amp;wg)
    wg.Wait()
    return result
}

func loadCommentsInner(resNode *commentTree, node intTree, wg *sync.WaitGroup) {
    wg.Add(len(node.children))
    for _, res := range node.children {
        child := &amp;commentTree{}
        resNode.children = append(resNode.children, child)
        res := res
        go func() {
            defer wg.Done()
            loadCommentsInner(child, res, wg)
        }()
    }
    resNode.value = getCommentById(node.id)
}</code></pre><br>
<p> ,   ,   .          ,  ,               . ,         (,   4         ,      ),  ,       .</p><br>
<p>       ,   ,         .         :</p><br>
<pre><code class="plaintext">1
  2
  3
    4
    5
START 1
START 3
START 5
DONE 5
START 2
DONE 2
START 4
DONE 4</code></pre><br>
<p>,   4  5 , 3  .  ,    ,       ,           . , Rust   ,        ,        ,          .</p><br>
<p>  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>,   ,     :</p><br>
<pre><code class="go">if len(node.children) &gt; 0 {
    childWg.Wait()
    for i := 0; i &lt; len(node.children); i++ { //      
        result.children = append(result.children, &lt;-ch)
    }
}
channel &lt;- result
wg.Done()</code></pre><br>
<p> ,    ?    ,      ,     ,      ,       .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>,      : </p><br>
<ol>
<li><code>func (n *IdTree) LoadComments(ctx context.Context) (*CommentTree, error)</code> тАФ        tree</li>
<li><code>g, ctx := errgroup.WithContext(ctx)</code> тАФ   </li>
<li><code>i, c := i, c // correct capturing by closure</code> тАФ   ,    ,   .         </li>
<li><code>g.Go(func() error</code> тАФ   ,    </li>
</ol><br>
<p> ,    ,    .</p><br>
<p>,         ? ,  .   (  ), ,       (-   ),     . ,         ,    .</p><br>
<p>  ,      ? ,         ,     ,    .      <code>getCommentById</code>.</p><br>
<p>     .</p><br>
<h2 id="c">CтЩп</h2><br>
<p>C#   ,     6 ,         .           ,    ,  ,    8         :</p><br>
<pre><code class="cs">class Program
{
    class Comment
    {
        public int Id { get; set; }
        public string Title { get; set; }

        public override string ToString() =&gt; $"{Id} - {Title}";
    }

    private static readonly HttpClient HttpClient = new HttpClient();

    private static Task&lt;Comment&gt; GetCommentById(int id) =&gt;
        HttpClient.GetStringAsync($"https://jsonplaceholder.typicode.com/todos/{id}")
            .ContinueWith(n =&gt; JsonConvert.DeserializeObject&lt;Comment&gt;(n.Result));

    private static async Task&lt;Tree&lt;Comment&gt;&gt; GetCommentsTree(Tree&lt;int&gt; tree)
    {
        var children = Task.WhenAll(tree.Children.Select(GetCommentsTree));
        var value = await GetCommentById(tree.Value);
        var childrenResults = await children;
        return new Tree&lt;Comment&gt; { Value = value, Children = childrenResults };
    }

    private static async Task Main()
    {
        var tree = Tr(1, new[] { Tr(2), Tr(3, new[] { Tr(4), Tr(5) }) });
        PrintTree(tree);
        var comment_tree = await GetCommentsTree(tree);
        PrintTree(comment_tree);
    }

    class Tree&lt;T&gt;
    {
        public T Value { get; set; }
        public Tree&lt;T&gt;[] Children { get; set; }
    }

    private static void PrintTree&lt;T&gt;(Tree&lt;T&gt; tree, string intendantion = "")
    {
        Console.WriteLine(intendantion + tree.Value);
        foreach (var child in tree.Children)
        {
            PrintTree(child, intendantion + "  ");
        }
    }

    static Tree&lt;T&gt; Tr&lt;T&gt;(T value, Tree&lt;T&gt;[] children = null) =&gt; new Tree&lt;T&gt; { Value = value, Children = children ?? Array.Empty&lt;Tree&lt;T&gt;&gt;() };
}</code></pre><br>
<p>     ,    ? ,   ,   <code>Task.WhenAll</code>    <code>foreach</code>     .       .<br>
     ? ,              .          <code>GetCommentById</code>.    ,  <code>AsyncEnumerable</code> ,         ,          .</p><br>
<h2 id="vyvody"></h2><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/db8/2fc/0fd/db82fc0fd7312aaa872e335f823b2cd7.png"></p><br>
<p> ,      .          ,   ,    ,  ,       .       .  , <abbr title="  "></abbr>.</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>Haskell</th>
<th>go</th>
<th>C#</th>
</tr>
</thead>
<tbody>
<tr>
<td>   *</td>
<td>17</td>
<td>76</td>
<td>28</td>
</tr>
<tr>
<td>   </td>
<td>2</td>
<td>4</td>
<td>-</td>
</tr>
<tr>
<td>     </td>
<td>30</td>
<td>10</td>
<td>-</td>
</tr>
<tr>
<td>     </td>
<td>15</td>
<td>50</td>
<td>-</td>
</tr>
<tr>
<td>   </td>
<td>тЬУ</td>
<td>тЬЧ</td>
<td>тЬЧ</td>
</tr>
<tr>
<td>     </td>
<td>тЬУ</td>
<td>тЬЧ</td>
<td>тЬУ</td>
</tr>
<tr>
<td>    **</td>
<td>тЬУтЬЧ</td>
<td>тЬУ</td>
<td>тЬУ</td>
</tr>
<tr>
<td>  </td>
<td>~30</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>  </td>
<td>5c</td>
<td>1.9c***</td>
<td>1.6c</td>
</tr>
</tbody>
</table></div><br>
<p>*        ,     . ,         ,    Haskell   showTree       </p><br>
<p>** ,           42.  , ,     :</p><br>
<pre><code class="cs">async Task&lt;Tree&lt;Comment&gt;&gt; GetCommentsTree(Tree&lt;int&gt; tree)
{
    if (tree.Children.Sum(c =&gt; c.Value) == 42)
    {
        return new Tree&lt;Comment&gt; { Value = await GetCommentById(tree.Value), Children = Array.Empty&lt;Tree&lt;int&gt;&gt; };
    }
    ...         </code></pre><br>
<p>      .</p><br>
<p>         ,   ,      <code>mapParallel</code>.    ,    ,    go  C#. </p><br>
<p>***     ,      7 ,   1.9 ,     200.     ,           .</p><br>
<hr><br>
<p>    ,   :</p><br>
<blockquote>   ""  </blockquote><p>Haskell:     ,     . ,   ,        , ,   . , ,   17     ,        ,    .</p><br>
<p>Go:     -   , <strong><em></em></strong>     - ,        ,      .</p><br>
<blockquote>      </blockquote><p>Haskell:      ,   ,        .     ,       "   ", "    Rust",   .        ,            .   ,       .     :     . ,        ,       .</p><br>
<p>Go:      <strong></strong>.       10  .     .  ,       ,   .     , ,      ,          ,       тАФ .    ,    .     - ,       ,   ,      .  , ,  ,   .           ,      .     ,   ,        .</p><br>
<blockquote>C        </blockquote><p>.  ,      ,      ,  ,     ,     <code>Maybe</code>  <code>IO</code>    ,    .</p><br>
<blockquote>C     </blockquote><p> ,     -      ,  .        <code>Task.Run(() =&gt; DoStuffAsyncInAnotherThread())</code>    ,   -  .   ,  <code>go DoAsyncStuff()</code>,        ,          (  -   ),      <code>Task.WhenAny</code>/<code>Task.WhenAll</code> (       ),    .</p><br>
<p>       .        ,  ,    .   . ,         ,     .</p><br>
<p>  - ,  , ,    .</p><br>
<h2 id="subektivnaya-chast"> </h2><br>
<p>   ,       .</p><br>
<p>      ,       .      :   ,     ,  ,    . ,    ,           ,       ,     "    ?",     <code>Maybe</code>  <code>IO</code>   "   <code>fromJust</code>     <code>Maybe</code>,   <code>IO</code>?". </p><br>
<p>      , ..      ,         .             , ,    , -      .   .     ,       "     ",     .          ,    .  ,               ,          .       ,      ,         . </p><br>
<hr><br>
<p>     ,      ,      ,       -  ,      .  ?   .  JSON?   .         .    ,         (,          <code>^.</code>),    ,       (-    HTTP  ),     .</p><br>
<p>           ,   -  ,       .     ,   ,   тАФ .      .         :         ,  <em> </em>   .</p><br>
<hr><br>
<p>, .</p><br>
<p>       IDE//etc,     /   .</p><br>
<p>        . </p><br>
<p>-    ,   -     ,   тАФ     .   ,          ,   //тАж       ,     ...</p><br>
<p>-       ,       go 3      ,        . -  ,     8     ,            5,  -         .       ,        ,  ,     .   .</p><br>
<p>  -       ,       ( )    .          :</p><br>
<blockquote> тАФ  go   ,   ,     <br>
<br>
 тАФ  *sarcasm*<br>
<br>
 тАФ <em>Sorry, this group is no longer accessible</em></blockquote><p>    ,         (    ),        ,   .</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/z8/ab/nj/z8abnjw1rn4oiupsnoozpu_5epq.png"><br>
<em>             </em></p></div></div><br>
<p>  ,         ?  ,      -              .    ,    -   ,      ,  ,   ,          тАж ,   .</p><br>
<p><strong><em>Upd.        ,   ,         .     ,          .       ,     .</em></strong></p><br>
<h2 id="zaklyuchenie"></h2><br>
<p>     ?        ,     .      .      ,   ,     obj/bin     .     ,   .   ,   Go        ,       ,   -     .       ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">    </a>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>      .   -      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">gorm</a>,      EF/Linq2Db/Hibernate/Dapper       API.</p><br>
<p>        ,   ,          ,     .     "" ,     ,    ,  , .      SQL ,   .     ,  .       ,     . ,    ,         ,    ,   ""    ,  -    .            ,    ,      ,    (   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>).  go        <code>Map</code>,           :     ,   тАФ  .</p><br>
<p>          ,         :</p><br>
<p><img src="https://habrastorage.org/webt/pj/sd/wv/pjsdwv6xnhc57nc-hwvywaho8lk.jpeg"></p><br>
<p> тАФ   ,        ?..</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi469441/">https://habr.com/ru/post/hi469441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi469427/index.html">рд▓рдХрдбрд╝реА рдХреЗ рдЦрд┐рд▓реМрдиреЗ, рднрд╛рдЧ рдЪрд╛рд░ - 1990</a></li>
<li><a href="../hi469429/index.html">рд╣реЗрдмреНрд░рд╛ рд╕рдореАрдХреНрд╖рд╛рдУрдВ рдХреА рдЗрдЪреНрдЫрд╛ рдХреА рд╕рдореАрдХреНрд╖рд╛</a></li>
<li><a href="../hi469433/index.html">рдкрд╣рд▓реА рдмрд╛рд░ред рд╣рдордиреЗ рд░реЛрдмреЛрдЯ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрдХреНрд░реИрдЪ рдХреЛ рдХреИрд╕реЗ рдкреЗрд╢ рдХрд┐рдпрд╛, рдЗрд╕рдХреА рдХрд╣рд╛рдиреА</a></li>
<li><a href="../hi469435/index.html">рд░рд┐рд╡рд░реНрд╕ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ Yandex.Station рд╕рдХреНрд░рд┐рдпрдг рдкреНрд░реЛрдЯреЛрдХреЙрд▓</a></li>
<li><a href="../hi469439/index.html">ARIES PLC110 [M02] -MS4, HMI, OPC рдФрд░ SCADA, рдпрд╛ рд╡реНрдпрдХреНрддрд┐ рдХреЛ рдХреИрдореЛрдорд╛рдЗрд▓ рдЪрд╛рдп рдХреА рдХрд┐рддрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рднрд╛рдЧ реи</a></li>
<li><a href="../hi469443/index.html">рдмрдЪреА рд╣реБрдИ рд╕рд╛рдордЧреНрд░реА: "рдЕрд╕рдВрднрд╡" рд╕рдВрд░рдЪрдирд╛ рдЬреЛ рд╕реНрдерд▓реАрдп рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рд╕реЗ рдкрд╣рд▓реЗ рдирд┐рдХрд▓ рдЧрдИ рдереА</a></li>
<li><a href="../hi469445/index.html">AngularConnect 2019 рдХрд╛ рдЕрд╡рд▓реЛрдХрдиред рднрд╛рдЧ 2</a></li>
<li><a href="../hi469447/index.html">рдПрдХ рд╢рд╛рдирджрд╛рд░ рд╡рд┐рдЪрд╛рд░ рд╕реЗ рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рдЙрджреНрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐ рдХрд╛ рдорд╛рд░реНрдЧ</a></li>
<li><a href="../hi469449/index.html">EV SSL рдкреНрд░рдорд╛рдгрдкрддреНрд░: рдХреНрдпрд╛ рдореГрддреНрдпреБ рдХреЗ рдмрд╛рдж рдХрд╛ рдЬреАрд╡рди рд╣реИ?</a></li>
<li><a href="../hi469451/index.html">рд╢реВрдиреНрдп рдХрд╛ рджрд░реНрд╢рди</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>