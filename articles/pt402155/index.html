<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëê ü§ô ‚ö†Ô∏è Potente redutor de quatro canais para LEDs üë©‚Äçüëß‚Äçüë¶ ü¶Ü üßúüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste artigo, falarei sobre o projeto de um potente redutor de quatro canais para tiras e l√¢mpadas de LED (at√© 200 watts de pot√™ncia total, 50..100 wa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Potente redutor de quatro canais para LEDs</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402155/">  Neste artigo, falarei sobre o projeto de um potente redutor de quatro canais para tiras e l√¢mpadas de LED (at√© 200 watts de pot√™ncia total, 50..100 watts por canal) com alta frequ√™ncia de controle PWM (1 kilohertz com profundidade de cor de 10 bits), para ilumina√ß√£o de alta qualidade .  Al√©m disso, possui uma entrada para o sensor de luz, fun√ß√µes de feedback (emitindo para o controlador informa√ß√µes sobre a tens√£o de entrada, tens√£o nas entradas de medi√ß√£o etc.) e at√© isolamento galv√¢nico da porta de controle serial. <br><br><img src="https://habrastorage.org/files/34a/40c/43c/34a40c43cea94d2c86d0a577633c5993.JPG"><br><a name="habracut"></a><br>  Aconteceu que eu decidi mudar meu perfil e me ocupar com microcontroladores e automa√ß√£o. Depois de alguns meses, recebi uma oferta tentadora de fazer uma ‚Äúcasa inteligente‚Äù na Rep√∫blica Dominicana, de modo que quase todos os aspectos da vida de uma vila bastante grande de tr√™s grandes sejam gerenciados e automatizados. edif√≠cios, desde ilumina√ß√£o e clima, at√© rob√¥s de jardim e sistemas de irriga√ß√£o.  Como eu estava cansado de neve e geada por um longo tempo, era imposs√≠vel rejeitar tal oferta, ainda mais porque eles me ajudaram muito na movimenta√ß√£o e adapta√ß√£o. <br><br>  Obviamente, uma das tarefas mais cruciais √© controlar a ilumina√ß√£o, em muitas salas e no exterior.  Para economizar energia que √© cara aqui, tiras de LED e l√¢mpadas de 12 volts ser√£o usadas em quase todos os lugares, que devem ser controladas usando dimmers.  Os modelos de dimmer existentes n√£o eram muito satisfat√≥rios em todos os aspectos (uma frequ√™ncia de regula√ß√£o suficientemente alta para a aus√™ncia de oscila√ß√µes; pot√™ncia, para controlar faixas longas brilhantes ou l√¢mpadas / holofotes; protocolos de troca fechados e assim por diante).  Ent√£o eu decidi fazer o meu dimmer. <br><br>  Um ponto muito doloroso na fase de projeto foi a escolha de obter energia de baixa tens√£o a partir de 110 volts de corrente alternada.  Mesmo uma op√ß√£o ex√≥tica foi considerada com um abaixamento sem transformador imediatamente at√© 12 volts, mas devido a considera√ß√µes sobre seguran√ßa el√©trica e contra inc√™ndio, ela foi rejeitada.  As fontes de alimenta√ß√£o prontas 110-&gt; 12 n√£o eram t√£o caras (US $ 20 por 120 watts e US $ 40 por 200), embora em geral.  Mas, felizmente, havia muito espa√ßo para equipamentos, ent√£o decidi por essa op√ß√£o. <br><br>  O circuito acabou por ser relativamente simples (exceto pelo n√≥ de isolamento galv√¢nico da porta serial em quatro optoacopladores) - o microcontrolador STM32F030F4P6, dois drivers ADP3624 MOSFET e transistores de chave IRLB8748, selecionados com uma grande margem (com uma carga de 100 watts por canal - estavam pouco quentes) , al√©m de um m√≥dulo step-down chin√™s pulsado pronto a 3,3 volts.  Os drivers selecionados permitem o controle em frequ√™ncias de at√© megahertz, o que fornece a frequ√™ncia da tens√£o de sa√≠da em kilohertz, com uma etapa de PWM de um microssegundo.  Na pr√°tica, mesmo um modo com uma frequ√™ncia PWM de oito quilohertz e uma etapa de 125 nanossegundos foi testado, mas na pr√°tica, uma frequ√™ncia de ajuste t√£o alta amea√ßa alguma instabilidade na sa√≠da - os transistores podem simplesmente n√£o ter tempo para fechar t√£o rapidamente e a qualidade do ajuste "flutua". <br><br> <a href=""><img src="https://habrastorage.org/files/066/0b3/8bb/0660b38bbd6f408894a90839f6ce3407.png" width="900"></a> <br><br>  A fia√ß√£o da placa para correntes t√£o altas foi um desafio bastante dif√≠cil para mim, nunca havia encontrado essas tarefas antes.  Foi decidido torn√°-los o mais largo poss√≠vel (um condutor com uma largura de pelo menos 10 mm em uma camada de 70 m√≠crons de cobre) e, quando isso n√£o for poss√≠vel, use a segunda camada, combinando-as com um grande n√∫mero de vias.  Eu removi a m√°scara dos condutores de alta carga para que, se necess√°rio, um barramento de cobre pudesse ser aplicado por cima (mas isso n√£o era necess√°rio, mesmo com uma carga m√°xima de 200 watts - a placa aquece at√© apenas 40 graus em um gabinete fechado). <br><br>  O protocolo de troca, devido √† falta de mem√≥ria flash, foi escolhido de maneira extremamente simples, os comandos s√£o enviados linha a linha, na forma do texto ‚Äú0: 512‚Äù (canal zero, PWM 512), os dados de sa√≠da s√£o transmitidos da mesma maneira (tens√£o, dados do primeiro fotorresistor, dados do segundo fotorresistor, tens√£o de entrada na entrada do ADC3, tens√£o de entrada na entrada do ADC5, tens√£o do controlador, temperatura do chip).  Seria mais correto usar o protocolo MQTT, mas eu tinha medo de que n√£o ca√≠sse no flash (kilobytes de espa√ßo livre permaneciam entre 16). <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C√≥digo fonte no github</a> <br><br>  Um dimmer √© intermitente atrav√©s da mesma porta de controle (√© necess√°rio aplicar uma unidade ao 4¬∫ pino, depois o pulso ao 5¬∫, ap√≥s o qual o microcontrolador pode ser carregado usando o protocolo serial padr√£o STM32. Para controlar um redutor j√° intermitente, tr√™s fios s√£o suficientes, + 3,3 / + 5V no primeiro pino, dados no terceiro, no sexto - a terra.As configura√ß√µes da porta de controle no firmware s√£o 38400 baud, 8n1. <br><br>  Obviamente, a primeira vers√£o do redutor n√£o ficou isenta de falhas.  Aconteceu que um microfarads de 470 capacitores por 12 volts n√£o √© suficiente, ele aquece demais com uma carga pesada (especialmente se os fios da fonte de alimenta√ß√£o s√£o finos para essas correntes), precisamos adicionar outros mais potentes (de acordo com a corrente m√°xima permitida).  O m√≥dulo de energia chin√™s tamb√©m se mostrou uma solu√ß√£o malsucedida; um dos m√≥dulos falhou durante os testes sem motivo aparente; substituirei por um conversor no TPS62177; al√©m disso, adicionarei outro conversor opcional no AP1501 (24-&gt; 12), para o caso de fonte de alimenta√ß√£o mais fraca 24 volts.  Bem, voc√™ precisar√° de um circuito de controle para uma ventoinha de 120 mm para a fonte de alimenta√ß√£o (nos casos em que a carga estiver pr√≥xima do m√°ximo), com controle t√©rmico e infinitamente ajust√°vel.  Tamb√©m decidi substituir o isolamento galv√¢nico complexo da porta de controle pelo chip SI8641. <br><br>  Existem problemas na parte do software - √†s vezes a leitura da porta serial trava, o controle de bloqueio (a experi√™ncia com o STM32 ainda n√£o √© muito grande para mim) e o protocolo acabou sendo muito idiota, talvez eu tente colocar um MQTT normal l√°. <br><br>  Aqui est√° um exemplo do uso de um dimmer em um banco de testes (minha porta da frente), junto com um sensor de dist√¢ncia por infravermelho (a cor e o brilho da faixa RGBW s√£o ajust√°veis, dependendo da dist√¢ncia, atrav√©s do openhab): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/knXuq3a6p4M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  No pr√≥ximo artigo, falarei sobre uma unidade de comuta√ß√£o de quatro canais com cargas CA de oito quilowatts com rel√©s biest√°veis ‚Äã‚Äã(para reduzir a energia consumida em v√£o) medindo o consumo atual em cada canal. <br><br>  Bem, vou terminar com uma nota positiva.  Como se viu, na Rep√∫blica Dominicana, 99% de √°lcool isoprop√≠lico ou et√≠lico n√£o podem ser encontrados para lavar placas de circuito (e tamb√©m gasolina pura).  Voc√™ pode encontrar 70% misturados, obviamente, n√£o com √°gua destilada, deixando manchas.  E voc√™ ainda pode encontrar facilmente 99,6% de metil (n√£o sei por que eles o vendem, √© at√© assustador us√°-lo como solvente - voc√™ pode respirar em pares).  Decidi tentar enxaguar a primeira placa dimmer com √°gua destilada, que comprei em uma loja de artigos para o lar.  Felizmente, n√£o percebi a id√©ia de verificar a qualidade do destilado quanto ao sabor.  Mas a placa de circuito e a pia galvanizada realmente n√£o gostaram quando eu as coloquei com eletr√≥lito de bateria (garrafas de √°gua estavam na prateleira com ela, obviamente eu peguei a errada quando a coloquei na cesta) ... <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt402155/">https://habr.com/ru/post/pt402155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt402145/index.html">Continuando o tema ‚ÄúC√¢ncer. O que fazer com isso ... "</a></li>
<li><a href="../pt402147/index.html">A IBM registrou um √∫nico bit de informa√ß√£o em um √°tomo</a></li>
<li><a href="../pt402149/index.html">Intel XMM 7560 - Gigabit no ar</a></li>
<li><a href="../pt402151/index.html">Not√°rio digital Blockchain: Emercoin DPO Antifake</a></li>
<li><a href="../pt402153/index.html">"N√≥s classificamos" a casa impressa</a></li>
<li><a href="../pt402157/index.html">Chris Kaspersky morreu. Dedicado √† mem√≥ria de um hacker real</a></li>
<li><a href="../pt402159/index.html">Ranking de fevereiro dos desenvolvimentos cient√≠ficos mais medi√°ticos</a></li>
<li><a href="../pt402161/index.html">Os fabricantes de software fecham massivamente as vulnerabilidades usadas pela CIA</a></li>
<li><a href="../pt402163/index.html">Hist√≥ria atualizada de Steve Jobs</a></li>
<li><a href="../pt402165/index.html">A maior c√∫pula da ci√™ncia de Istra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>