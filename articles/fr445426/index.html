<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî† ‚õπüèΩ üë∂ Optimisation pour l'application PostgreSQL servant des Rails üíÑ üö∂üèº ‚õµÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En tant qu'ing√©nieur logiciel principal √† la plate-forme de messagerie de construction d'entreprise pour l'industrie des soins de sant√©, je suis respo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimisation pour l'application PostgreSQL servant des Rails</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445426/"><p> En tant qu'ing√©nieur logiciel principal √† la plate-forme de messagerie de construction d'entreprise pour l'industrie des soins de sant√©, je suis responsable, y compris d'autres t√¢ches, de la performance de notre application.  Nous d√©veloppons un service Web assez standard en utilisant l'application Ruby on Rails pour la logique m√©tier et l'API, React + Redux pour les applications √† page unique face aux utilisateurs, en tant que base de donn√©es, nous utilisons PostgreSQL.  Les raisons courantes des probl√®mes de performances dans des piles similaires sont les requ√™tes lourdes vers la base de donn√©es et je voudrais raconter comment nous avons appliqu√© des optimisations non standard mais assez simples pour am√©liorer les performances. </p><br><p>  Notre entreprise op√®re aux √âtats-Unis, nous devons donc √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conformes √† la HIPAA</a> et suivre certaines politiques de s√©curit√©, l'audit de s√©curit√© est quelque chose pour lequel nous sommes toujours pr√™ts.  Pour r√©duire les risques et les co√ªts, nous comptons sur un fournisseur de cloud sp√©cial pour ex√©cuter nos applications et bases de donn√©es, tr√®s similaire √† ce que fait Heroku.  D'une part, cela nous permet de nous concentrer sur la construction de notre plate-forme, mais d'autre part, cela ajoute une limitation suppl√©mentaire √† notre infrastructure.  Parlant bri√®vement - nous ne pouvons pas √©voluer √† l'infini.  En tant que d√©marrage r√©ussi, nous doublons le nombre d'utilisateurs tous les quelques mois et un jour, notre surveillance nous a dit que nous d√©passions le quota d'E / S disque sur le serveur de base de donn√©es.  AWS sous-jacent a commenc√© la limitation, ce qui a entra√Æn√© une d√©gradation significative des performances.  L'application Ruby n'√©tait pas capable de traiter tout le trafic entrant car les employ√©s de Unicorn passaient trop de temps √† attendre la r√©ponse de la base de donn√©es, les clients √©taient m√©contents. </p><a name="habracut"></a><br><h2 id="standard-solutions">  Solutions standard </h2><br><p>  Au d√©but de l'article, j'ai mentionn√© l'expression "optimisations non standard" car tous les fruits √† faible pendaison √©taient d√©j√† cueillis: </p><br><ul><li>  nous avons supprim√© toutes les requ√™tes N + 1.  Ruby gem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bullet</a> √©tait l'outil principal </li><li>  tous les index n√©cessaires sur la base de donn√©es ont √©t√© ajout√©s, tous les inutiles ont √©t√© supprim√©s, gr√¢ce √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pg_stat_statements</a> </li><li>  certaines requ√™tes avec plusieurs jointures ont √©t√© r√©√©crites pour une meilleure efficacit√© </li><li>  nous avons s√©par√© les requ√™tes pour r√©cup√©rer les collections pagin√©es des requ√™tes de d√©coration.  Par exemple, au d√©part, nous avons ajout√© un compteur de messages par bo√Æte de dialogue en joignant des tables, mais il a √©t√© remplac√© par une requ√™te suppl√©mentaire pour augmenter les r√©sultats.  La requ√™te suivante fait un <em>index uniquement</em> et est vraiment bon march√©: </li></ul><br><pre><code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> COUNT(<span class="hljs-number"><span class="hljs-number">1</span></span>), dialog_id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> messages <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> dialog_id <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> dialog_id;</code> </pre> <br><ul><li>  ajout√© quelques caches.  En fait, cela n'a pas bien fonctionn√© car en tant qu'application de messagerie, nous avons de nombreuses mises √† jour </li></ul><br><p>  Toutes ces astuces ont fait un excellent travail pendant quelques mois jusqu'√† ce que nous rencontrions √† nouveau le m√™me probl√®me de performances - plus d'utilisateurs, une charge plus √©lev√©e.  Nous cherchions autre chose. </p><br><h2 id="advanced-solutions">  Solutions avanc√©es </h2><br><p>  Nous ne voulions pas utiliser l'artillerie lourde et impl√©menter la d√©normalisation et le partitionnement car ces solutions n√©cessitent une connaissance approfondie des bases de donn√©es, d√©placent l'√©quipe de l'impl√©mentation des fonctionnalit√©s vers la maintenance et √† la fin, nous voulions √©viter la complexit√© de notre application.  Enfin, nous avons utilis√© PostgreSQL 9.3 o√π les partitions sont bas√©es sur des d√©clencheurs avec tous leurs co√ªts.  Le principe KISS en action. </p><br><h2 id="custom-solutions">  Solutions personnalis√©es </h2><br><h4 id="compress-data">  Compresser les donn√©es </h4><br><p>  Nous avons d√©cid√© de nous concentrer sur le principal sympt√¥me - disque IO.  Moins de donn√©es que nous stockons, moins de capacit√© d'E / S dont nous avons besoin, c'√©tait l'id√©e principale.  Nous avons commenc√© √† chercher des opportunit√©s de compresser les donn√©es et les premiers candidats √©taient des colonnes comme <code>user_type</code> fournies avec des associations polymorphes par ActiveRecord.  Dans l'application, nous utilisons beaucoup de modules qui nous am√®nent √† avoir de longues cha√Ænes comme <code>Module::SubModule::ModelName</code> pour les associations polymorphes.  Ce que nous avons fait - convertir tous les types de colonnes de varchar en ENUM.  La migration de Rails ressemble √† ceci: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddUserEnumType</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Migration[5.2] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">disable_ddl_transaction!</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">up</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveRecord::Base</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">connection</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">execute</span></span></span><span class="hljs-class"> &lt;&lt;~</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SQL</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CREATE</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TYPE</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user_type_enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AS</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ENUM</span></span></span><span class="hljs-class"> ( '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module::Submodule::UserModel1</span></span></span><span class="hljs-class">', '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module::Submodule::UserModel2</span></span></span><span class="hljs-class">', '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module::Submodule::UserModel3</span></span></span><span class="hljs-class">' );</span></span> SQL add_column <span class="hljs-symbol"><span class="hljs-symbol">:messages</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:sender_type_temp</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:user_type_enum</span></span> Message .in_batches(<span class="hljs-symbol"><span class="hljs-symbol">of:</span></span> <span class="hljs-number"><span class="hljs-number">10000</span></span>) .update_all(<span class="hljs-string"><span class="hljs-string">'sender_type_temp = sender_type::user_type_enum'</span></span>) safety_assured <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> rename_column <span class="hljs-symbol"><span class="hljs-symbol">:messages</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:sender_type</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:sender_type_old</span></span> rename_column <span class="hljs-symbol"><span class="hljs-symbol">:messages</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:sender_type_temp</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:sender_type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><p>  Quelques notes sur cette migration pour les personnes qui ne connaissent pas Rails: </p><br><ul><li>  <em>disable_ddl_transaction!</em>  d√©sactive la migration transactionnelle.  C'est tr√®s risqu√© √† faire, mais nous voulions √©viter les transactions longues.  Veuillez vous assurer que vous ne d√©sactivez pas les transactions lors de la migration sans en avoir besoin. </li><li>  Lors de la premi√®re √©tape, nous cr√©ons un nouveau type de donn√©es ENUM sur PostgreSQL.  La meilleure fonctionnalit√© sur ENUM est une petite taille, vraiment petite compar√©e √† varchar.  ENUM a quelques difficult√©s √† ajouter de nouvelles valeurs, mais en g√©n√©ral, nous n'ajoutons pas souvent de nouveaux types d'utilisateurs. </li><li>  ajouter une nouvelle colonne <em>sender_type_temp</em> avec le <em>user_type_enum</em> </li><li>  remplir les valeurs de la nouvelle colonne <em>in_batches</em> pour √©viter un long verrouillage sur les <em>messages de</em> la table </li><li>  la derni√®re √©tape remplace l'ancienne colonne par une nouvelle.  C'est l'√©tape la plus dangereuse car si la colonne <em>sender_type</em> √©tait transform√©e en <em>sender_type_old</em> mais que <em>sender_type_temp</em> n'√©tait pas devenu <em>sender_type,</em> nous aurions beaucoup de probl√®mes. </li><li>  <em>safety_assured</em> vient du joyau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">strong_migration</a> qui permet d'√©viter les erreurs d'√©criture des migrations.  Renommer une colonne n'est pas une op√©ration s√ªre, nous avons donc d√ª confirmer que nous comprenions ce que nous faisions.  En fait, il existe un moyen plus s√ªr mais plus long, comprenant plusieurs d√©ploiements. </li></ul><br><p>  Inutile de dire que nous ex√©cutons toutes les migrations similaires pendant les p√©riodes d'activit√© les plus basses avec des tests appropri√©s. </p><br><p>  Nous avons converti toutes les colonnes polymorphes en ENUM, abandonn√© les anciennes colonnes apr√®s quelques jours de surveillance et finalement ex√©cut√© VACUUM pour r√©duire la fragmentation.  Cela nous a permis d'√©conomiser environ 10% de l'espace disque total, mais <br>  certains tableaux avec quelques colonnes ont √©t√© compress√©s deux fois!  Ce qui √©tait plus important - certaines tables ont commenc√© √† √™tre mises en cache dans la m√©moire (rappelez-vous, nous ne pouvons pas facilement ajouter plus de RAM) par PostgreSQL et cela a consid√©rablement r√©duit l'ES disque requis. </p><br><h4 id="dont-trust-your-service-provider">  Ne faites pas confiance √† votre fournisseur de services </h4><br><p>  Une autre chose a √©t√© trouv√©e dans l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment une seule modification de configuration PostgreSQL a am√©lior√© les performances de requ√™te lente par 50x</a> - notre fournisseur PostgreSQL effectue une configuration automatique pour le serveur en fonction du volume de RAM, de disque et de CPU demand√©, mais pour une raison quelconque, ils ont laiss√© le param√®tre <em>random_page_cost</em> avec le valeur par d√©faut qui est 4 optimis√©e pour le disque dur.  Ils nous facturent pour ex√©cuter des bases de donn√©es sur SSD mais n'ont pas configur√© correctement PostgreSQL.  Apr√®s les avoir contact√©s, nous avons obtenu de bien meilleurs plans d'ex√©cution: </p><br><pre> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">EXPLAIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ANALYSE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> COUNT(*) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> count_dialog_id, dialog_id <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> dialog_id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> messages <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> sender_type = <span class="hljs-string"><span class="hljs-string">'Module::Submodule::UserModel1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> sender_id = <span class="hljs-number"><span class="hljs-number">1234</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> dialog_id; db=# <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> random_page_cost = <span class="hljs-number"><span class="hljs-number">4</span></span>; QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- HashAggregate (cost=76405.45..76411.92 rows=647 width=12) (actual time=2428.412..2428.420 rows=12 loops=1) Group Key: dialog_id -&gt; Bitmap Heap Scan on messages (cost=605.90..76287.72 rows=23545 width=4) (actual time=82.442..2376.033 rows=79466 loops=1) Recheck Cond: ((sender_id = 1234) AND (sender_type = 'Module::Submodule::UserModel1'::user_type_enum)) Heap Blocks: exact=23672 -&gt; Bitmap Index Scan on index_messages_on_sender_id_and_sender_type_and_message_type (cost=0.00..600.01 rows=23545 width=0) (actual time=76.067..76.068 rows=79466 loops=1) Index Cond: ((sender_id = 1234) AND (sender_type = 'Module::Submodule::UserModel1'::user_type_enum)) Planning time: 3.849 ms Execution time: 2428.691 ms (9 rows) db=# SET random_page_cost = 1; QUERY PLAN ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ HashAggregate (cost=21359.54..21366.01 rows=647 width=12) (actual time=97.905..97.913 rows=12 loops=1) Group Key: dialog_id -&gt; Index Scan using index_messages_on_sender_id_and_sender_type_and_message_type on messages (cost=0.56..21241.81 rows=23545 width=4) (actual time=0.058..60.444 rows=79466 loops=1) Index Cond: ((sender_id = 1234) AND (sender_type = 'Module::Submodule::UserModel1'::user_type_enum)) Planning time: 0.277 ms Execution time: 98.070 ms (6 rows)</span></span></code> </pre> <br><h4 id="move-data-away">  √âloignez les donn√©es </h4><br><p>  Nous avons d√©plac√© une √©norme table vers une autre base de donn√©es.  Nous devons garder des audits de chaque modification du syst√®me par la loi et cette exigence est mise en ≈ìuvre avec gem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PaperTrail</a> .  Cette biblioth√®que cr√©e une table dans la base de donn√©es de production o√π toutes les modifications des objets sous surveillance sont enregistr√©es.  Nous utilisons le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">multivers de</a> biblioth√®que pour int√©grer une autre instance de base de donn√©es √† notre application Rails.  Soit dit en passant - ce sera une fonctionnalit√© standard de Rails 6. Il existe certaines configurations: </p><br><p>  D√©crire la connexion dans le fichier <code>config/database.yml</code> </p><br><pre> <code class="plaintext hljs">external_default: &amp;external_default url: "&lt;%= ENV['AUDIT_DATABASE_URL'] %&gt;" external_development: &lt;&lt;: *external_default</code> </pre> <br><p>  Classe de base pour les mod√®les ActiveRecord d'une autre base de donn√©es: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExternalRecord</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">abstract_class</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">true</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">establish_connection</span></span></span><span class="hljs-class"> :"</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">external_</span></span></span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#{Rails.env}" end</span></span></span></span></code> </pre> <br><p>  Mod√®le qui impl√©mente les versions PaperTrail: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExternalVersion</span></span></span><span class="hljs-class"> &lt; ExternalRecord </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">include</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PaperTrail::VersionConcern</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Cas d'utilisation dans le mod√®le en cours d'audit: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Message</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">has_paper_trail</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class_name</span></span></span><span class="hljs-class">: "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExternalVersion</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><h2 id="summary">  R√©sum√© </h2><br><p>  Nous avons finalement ajout√© plus de RAM √† notre instance PostgreSQL et actuellement nous ne consommons que 10% des E / S disque disponibles.  Nous avons surv√©cu jusqu'√† ce stade car nous avons appliqu√© quelques astuces - compresser les donn√©es dans notre base de donn√©es de production, corriger la configuration et d√©placer les donn√©es non pertinentes.  Probablement, cela n'aidera pas dans votre cas particulier, mais j'esp√®re que cet article pourrait donner quelques id√©es sur l'optimisation personnalis√©e et simple.  Bien s√ªr, n'oubliez pas de parcourir la liste de contr√¥le des probl√®mes standard r√©pertori√©s au d√©but. </p><br><p>  PS: Je recommande vivement un excellent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">add-on DBA pour psql</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445426/">https://habr.com/ru/post/fr445426/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445416/index.html">Pourquoi les disques vinyle survivent √† l'√®re num√©rique</a></li>
<li><a href="../fr445418/index.html">Homo sapiens? Plus</a></li>
<li><a href="../fr445420/index.html">Il y a 17 milliards d'ordinateurs dans le cortex de votre cerveau</a></li>
<li><a href="../fr445422/index.html">Quels langages de programmation sont les moins s√©curis√©s?</a></li>
<li><a href="../fr445424/index.html">Exp√©rience dans le d√©veloppement du service Refund Tool avec une API asynchrone sur Kafka</a></li>
<li><a href="../fr445428/index.html">Wi-Fi de haute qualit√© - la base de l'hospitalit√© moderne et le moteur des affaires</a></li>
<li><a href="../fr445432/index.html">Gestionnaire de packages Unity</a></li>
<li><a href="../fr445434/index.html">Meilleur pire travail au monde: √† la recherche d'un Habraautor</a></li>
<li><a href="../fr445436/index.html">Recyclage dans DevOps - √† quoi vous pr√©parer</a></li>
<li><a href="../fr445438/index.html">Connaissance des √©l√©ments √©clair√©s et des composants Web bas√©s sur celui-ci</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>