<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ì ü¶î üòö Om-yum-yum et validation des donn√©es üêÉ üêê ‚õ∞Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Parlons un peu de la validation des donn√©es. Qu'est-ce qui est compliqu√© et pourquoi devrait-il √™tre n√©cessaire, par exemple, dans un ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Om-yum-yum et validation des donn√©es</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473026/"><p> Bonjour √† tous!  Parlons un peu de la validation des donn√©es.  Qu'est-ce qui est compliqu√© et pourquoi devrait-il √™tre n√©cessaire, par exemple, dans un projet √©crit en caract√®res dactylographi√©s?  Le tapuscrit contr√¥le assez bien tout, il reste √† v√©rifier l'entr√©e utilisateur maximale.  Autrement dit, pour jeter une douzaine d'habitu√©s dans le projet et tout, il semblerait, peut fermer le sujet, mais ... Loin de toujours, et dans le cas du Web, presque jamais, tout le projet est dans une seule base de code et utilise les m√™mes types.  A la jonction de telles bases de code, des situations surviennent lorsque l'attente ne correspond pas √† la r√©alit√© et qu'ici le tapuscrit n'est plus un assistant.  Quelques exemples: </p><a name="habracut"></a><br><ul><li> La partie cliente de l'application re√ßoit des donn√©es de l'API et les valide.  Premi√®rement, l'API peut soudainement et parfois sans pr√©avis changer, et deuxi√®mement, les "gars du serveur" eux-m√™mes ne savent parfois pas ce que leur API peut faire, par exemple, dans certains domaines, au lieu d'un tableau garanti, m√™me s'il est vide, la pleine lune peut √™tre donn√© <code>null</code> .  Lors de la description des donn√©es sur le client, les programmeurs semblent d√©terminer avec quoi le client sait comment travailler et si quelque chose ne va pas, il est beaucoup plus agr√©able de voir imm√©diatement un message dans la console sur la source du probl√®me, plut√¥t que de d√©tecter un bogue incompr√©hensible d√©j√† l√† o√π il est sorti dans la couche d'affichage. (et c'est bien si on le remarque imm√©diatement).  De plus, il existe d√©j√† des solutions ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2</a> ) permettant de transf√©rer des types du serveur au client.  Je n'ai pas encore essay√© de le faire, mais il est fort possible que ce soit l'avenir. </li><li>  La situation inverse est lorsque le serveur v√©rifie les param√®tres envoy√©s pour arr√™ter imm√©diatement le traitement de la demande s'ils ne r√©pondent pas √† ceux attendus.  Je pense qu'il n'est pas n√©cessaire de pr√©ciser pourquoi il est important de le faire. </li><li>  La validation des donn√©es avant leur stockage dans la base de donn√©es ne sera pas non plus superflue.  Par exemple, vous pouvez voir comment il est organis√© dans l'un de mes v√©los: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MaraquiaORM # Validation</a> . </li></ul><br><p>  Je pense que les exemples sont assez convaincants et maintenant, il n'y a aucun sentiment que vous pouvez faire avec de simples habitu√©s, car il ne s'agit pas seulement de saisie par l'utilisateur, mais de validation de complexes, g√©n√©ralement imbriqu√©s sur plusieurs niveaux de donn√©es.  Une biblioth√®que sp√©ciale est d√©j√† n√©cessaire ici.  Et bien s√ªr il y en a!  Il se trouve qu'au cours des 10 derni√®res ann√©es, √† chaque d√©marrage d'un nouveau projet, j'essaie d'utiliser une autre biblioth√®que de ce type, en l'adaptant √† mes besoins.  Et chaque fois que quelque chose se passe mal, ce qui conduit parfois au remplacement du sujet test√© au milieu d'un d√©veloppement actif.  Je ne parlerai pas de toutes les options que j'ai √©tudi√©es, je ne dirai que celles test√©es dans le projet actuel. </p><br><h4 id="type-check">  v√©rification de type </h4><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> </p><br><p>  Petite biblioth√®que assez pratique.  Le circuit est d√©crit comme une cha√Æne.  En utilisant des cha√Ænes multi-lignes, vous pouvez d√©crire des structures assez complexes: </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">`{ ID: String, creator: { fname: String | Null, mname: String | Null, lname: String | Null, email: [String] } | Undefined, sender: Maybe { name: String, email: String }, type: Number, subject: String, ... }`</span></span></code> </pre> <br><p>  Il y a des inconv√©nients assez s√©rieux: </p><br><ul><li>  L'IDE n'aide en aucune fa√ßon avec un ensemble de sch√©mas, ce qui √©tait particuli√®rement ennuyeux lors du passage √† la dactylographie. </li><li>  Messages d'erreur presque inutiles.  Je n'ai pas utilis√© cette biblioth√®que depuis plus d'un an et peut-√™tre que quelque chose a chang√© (√† en juger par le code, non).  Les messages √©taient du style "Cha√Æne attendue, re√ßue nulle".  Imaginez maintenant, vous avez un tableau de pi√®ces pour 200 objets, dont chacun a des champs avec des cha√Ænes, et dans un seul objet l'un des champs s'est cass√©.  Comment trouver ce champ?  Voir les 200 articles?  J'ai souffert tant de fois et √ßa m'a vraiment <s>bris√© la vie,</s> ruin√© l'impression de la biblioth√®que.  Habituellement, je ne veux pas savoir ce qui √©tait attendu et re√ßu l√†-bas, mais je veux ouvrir le sch√©ma de donn√©es et trouver le champ n√©cessaire dans celui-ci et le m√™me dans les donn√©es elles-m√™mes.  En d'autres termes, dans le message d'erreur, il est essentiel d'avoir le chemin de cl√© au bon endroit dans les donn√©es / sch√©ma, et ce qui √©tait attendu l√† et arriv√© √† tout peut √™tre omis. </li><li>  Bien s√ªr, bien s√ªr, mais l'indentation dans l'exemple ci-dessus ne dispara√Ætra pas lorsque le code est compress√©. </li></ul><br><h4 id="joi">  Joi </h4><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> <br>  Version du navigateur: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">joi-browser</a> </p><br><p>  Probablement la biblioth√®que la plus c√©l√®bre sur ce sujet avec un tas de fonctionnalit√©s et une API sans fin.  Au d√©but, je l'ai utilis√© sur le serveur et il s'est montr√© parfaitement.  √Ä un moment donn√©, j'ai d√©cid√© de le remplacer par <code>type-check</code> sur le client.  √Ä cette √©poque, je ne contr√¥lais presque pas la taille du paquet, il n'y avait tout simplement aucun probl√®me avec cela.  Mais au cours de l'ann√©e, il a augment√© rapidement et sur Internet mobile, le premier t√©l√©chargement d'application n'√©tait pas du tout confortable.  Il a √©t√© d√©cid√© d'organiser un chargement paresseux des composants.  Le rapport du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">webpack-bundle-analyzer</a> a montr√© un tas de g√©ants dans le bundle et ils sont tous all√©s facilement aux morceaux cr√©√©s par le webpack.  Tout le monde sauf <code>Joi</code> .  De nombreux composants communiquent avec le serveur et toutes les r√©ponses du serveur sont valid√©es, c'est-√†-dire que placer <code>Joi</code> dans une sorte de morceau n'a pas de sens, il sera simplement toujours charg√© juste apr√®s le principal.  √Ä un moment donn√©, le bundle principal ressemblait √† ceci: des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tyts</a> .  Bien s√ªr, un d√©sir durable a surgi de faire quelque chose.  Je voulais la m√™me biblioth√®que pratique, mais beaucoup moins. </p><br><h4 id="yup">  Ouaip </h4><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> </p><br><p>  Dans le fichier lisez-moi, ils promettent le m√™me <code>Joi</code> , mais en taille adapt√©e √† l'interface.  En fait, il n'est que deux fois plus petit, c'est-√†-dire que <code>Yup</code> √©tait toujours la plus grande biblioth√®que du bundle principal.  De plus, des inconv√©nients suppl√©mentaires sont apparus: </p><br><ul><li>  La biblioth√®que par d√©faut ignore tout <code>undefined</code> .  <code>.required()</code> pas tr√®s agr√©able, et j'aime mieux quand tout est initialement impossible et o√π cela est permis.  <code>Joi</code> a une option <code>presence: 'required'</code> pour configurer ce comportement.  J'ai cr√©√© une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">demande avec le num√©ro infernal 666</a> , mais jusqu'√† pr√©sent, les auteurs sont silencieux. </li><li>  Il n'y a aucun moyen de v√©rifier les valeurs de l'objet, en autorisant toutes les cl√©s.  <code>Joi</code> utilise <a href="">object.pattern</a> pour cela, le premier argument <a href="">acceptant</a> n'importe quelle cha√Æne.  Il serait probablement toujours possible de s'en sortir, et les auteurs peuvent corriger le premier moins, mais √©tant donn√© la taille, je ne voulais pas attendre ou modifier moi-m√™me quelque chose. </li></ul><br><h4 id="ow">  Ow </h4><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> </p><br><p>  Le candidat suivant s'est finalement av√©r√© √™tre vraiment petit, et il ne l'a pas forc√© √† √©crire constamment <code>()</code> o√π vous pouvez vous en passer.  Par exemple, vous pouvez √©crire un validateur qui autorise une cha√Æne ou <code>undefined</code> comme suit: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> optionalStringValidator = ow.optional.string; ow(optionalStringValidator, <span class="hljs-string"><span class="hljs-string">'1'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Ok ow(optionalStringValidator, undefined); // Ok</span></span></code> </pre> <br><p>  Super!  Et <code>null</code> ?  En retournant toute la documentation, j'ai trouv√© la m√©thode suivante: </p><br><pre> <code class="javascript hljs">ow.any(ow.optional.string, ow.null);</code> </pre> <br><p>  Oh horreur!  Lorsque j'ai essay√© de r√©√©crire une partie de la validation dans le projet, j'ai failli me casser les doigts en tapant ceci.  J'ai <code>ow.nullable</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">probl√®me</a> en ajoutant <code>ow.nullable</code> , qui a √©t√© envoy√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  En bref, ils disent que <code>null</code> n'est pas n√©cessaire du tout.  Les arguments qui y sont donn√©s sont √©galement tout √† fait ad√©quats compte tenu de la premi√®re ligne de leur fichier Lisez-moi: </p><br><blockquote>  Validation des arguments de fonction pour les humains </blockquote><p>  Autrement dit, cette biblioth√®que sert √† valider les valeurs fournies comme arguments de la fonction.  Apparemment, ils ne comptaient pas vraiment sur d‚Äô√©normes structures imbriqu√©es provenant du serveur. <br>  Une √©tude plus approfondie et des tentatives d'utilisation ont r√©v√©l√© plusieurs autres fonctionnalit√©s qui, encore une fois, √©taient bien expliqu√©es par la m√™me ligne dans le fichier Lisezmoi, mais ne me convenaient pas tr√®s bien.  C'est en fait une assez bonne biblioth√®que, juste pour quelques autres fins. </p><br><hr><br><p>  Par ici, j'√©tais d√©j√† compl√®tement fatigu√© d'abandonner et j'ai d√©cid√© d'√©crire ma biblioth√®que avec le blackjack et les vierges.  Oui, oui, je reviens avec le prochain v√©lo :).  Rencontrez: </p><br><h2 id="omyumyum">  Omyumyum </h2><br><p>  Quelques exemples: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> om <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'omyumyum'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isOptionalNumber = om.number.or.undefined; isOptionalNumber(<span class="hljs-string"><span class="hljs-string">'1'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false isOptionalNumber(1); // =&gt; true isOptionalNumber(undefined); // =&gt; true</span></span></code> </pre> <br><p>  <code>.or</code> peut √™tre utilis√© autant de fois que vous le souhaitez en augmentant les options possibles: </p><br><pre> <code class="javascript hljs">om.number.or.string.or.null.or.undefined;</code> </pre> <br><p>  Dans ce cas, une fonction presque ordinaire est constamment g√©n√©r√©e qui prend n'importe quel argument et retourne un <code>boolean</code> . <br>  Si vous souhaitez que la fonction g√©n√®re une erreur en cas d'√©chec du test: </p><br><pre> <code class="javascript hljs">om(om.number, <span class="hljs-string"><span class="hljs-string">'1'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  TypeError</span></span></code> </pre> <br><p>  Ou au curry: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isNumberOrThrow = om(om.number); isNumberOrThrow(<span class="hljs-string"><span class="hljs-string">'1'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  TypeError</span></span></code> </pre> <br><p>  La fonction r√©sultante n'est pas tout √† fait ordinaire, car elle dispose de m√©thodes suppl√©mentaires.  <code>.or</code> d√©j√† affich√©, une partie des m√©thodes d√©pendra du type s√©lectionn√© (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API</a> ), par exemple, une cha√Æne peut √™tre am√©lior√©e avec une expression r√©guli√®re: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isNonEmptyString = om.string.pattern(<span class="hljs-regexp"><span class="hljs-regexp">/\S/</span></span>); <span class="hljs-comment"><span class="hljs-comment">// == `om.string.nonEmpty` isNonEmptyString(' '); // =&gt; false isNonEmptyString('1'); // =&gt; true</span></span></code> </pre> <br><p>  Et pour l'objet, vous pouvez sp√©cifier sa forme: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isUserData = om.object.shape({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: om.string, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: om.number.or.vacuum <span class="hljs-comment"><span class="hljs-comment">// `.or.vacuum` == `.or.null.or.undefined` }); isUserData({}); // =&gt; false isUserData({ age: 20 }) // =&gt; false isUserData({ name: '' }); // =&gt; true isUserData({ name: '', age: null }); // =&gt; true isUserData({ name: '', age: 20 }); // =&gt; true</span></span></code> </pre> <br><p>  Le chemin de cl√© promis √† l'endroit probl√©matique: </p><br><pre> <code class="javascript hljs">om(om.array.of(om.object.shape({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: om.string })), [{ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }]); <span class="hljs-comment"><span class="hljs-comment">//  TypeError('Type mismatch at "[1].name"')</span></span></code> </pre> <br><p>  Si les fonctionnalit√©s int√©gr√©es ne sont pas suffisantes, vous pouvez toujours utiliser <code>.custom(validator: (value: any) =&gt; boolean)</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isEmailOrPhone = om.custom(<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'is-email'</span></span>)).or.custom(<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'is-phone'</span></span>)); isEmailOrPhone(<span class="hljs-string"><span class="hljs-string">'test@test.test'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span></code> </pre> <br><p>  En stock est √©galement attendu <code>.and</code> utilis√© pour combiner et am√©liorer les types: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isNonZeroString = om.string.and.custom(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> str.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// == `om.string.nonZero` isNonZeroString(''); // =&gt; false isNonZeroString('1'); // =&gt; true</span></span></code> </pre> <br><p>  <code>.and</code> a priorit√© sur <code>.or</code> , mais comme <code>.custom()</code> accepte le validateur exactement de la m√™me forme que celle cr√©√©e par la biblioth√®que, cela peut √™tre contourn√©: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      `age`,   `birthday` om.object.shape({ name: om.string }).and.custom( om.object.shape({ age: om.number }) .or.object.shape({ birthday: om.date })] );</span></span></code> </pre> <br><p>  Vous pouvez continuer √† am√©liorer les validateurs cr√©√©s pr√©c√©demment.  Les anciens ne se g√¢tent pas du tout.  Essayons d'am√©liorer les <code>isUserData</code> cr√©√©s pr√©c√©demment: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isImprovedUserData = isUserData.and.object.shape({ <span class="hljs-attr"><span class="hljs-attr">friends</span></span>: om.array.of(isUserData).or.vacuum }); isImprovedUserData({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">friends</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span> }] }); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span></code> </pre> <br><p>  Eh bien, <code>.not</code> rest√©. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isNotVacuum = om.not.null.and.not.undefined; <span class="hljs-comment"><span class="hljs-comment">// == `om.not.vacuum` isNotVacuum(1); // =&gt; true isNotVacuum(null); // =&gt; false isNotVacuum(undefined); // =&gt; false</span></span></code> </pre> <br><p>  D'autres m√©thodes disponibles peuvent √™tre trouv√©es dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'API de la</a> biblioth√®que. </p><br><h4 id="plyusy-biblioteki">  Avantages de la biblioth√®que: </h4><br><ul><li>  Syntaxe laconique avec <code>.or</code> , <code>.and</code> , <code>.not</code> et un minimum de parenth√®ses.  En combinaison avec la saisie semi-automatique, l'ensemble se transforme en plaisir. </li><li>  Minuscule m√™me par rapport √† <code>Ow</code> (pr√®s de 10 fois moins (minify + gzip)), et par rapport √† <code>Joi</code> biblioth√®que est comme une plume √† c√¥t√© d'une montagne. </li><li>  Joli nom :) </li></ul><br><h4 id="minusy-biblioteki">  Inconv√©nients de la biblioth√®que: </h4><br><ul><li>  Moins de types et leurs modificateurs.  Et il est peu probable qu'il y en ait beaucoup plus.  Les trois sc√©narios d'utilisation donn√©s au d√©but de l'article (quelque chose sur les jonctions et les bases de code) supposent la transmission de donn√©es en texte brut, dans la plupart des cas, c'est JSON.  C'est, √† mon avis, une telle biblioth√®que devrait prendre en charge les types possibles dans JSON, ainsi que les types <code>undefined</code> et quelques types couramment utilis√©s.  Le m√™me <code>Ow</code> pour une raison quelconque, est rempli de prise en charge de tous les types de tableaux typ√©s et autres non-sens.  Je pense que c'est superflu. </li><li>  Impossible de convertir des donn√©es comme <code>Joi</code> .  Je pense que <code>Joi</code> est assez mauvais aussi.  Au moins, je n'ai pas assez de ses capacit√©s et, si n√©cessaire, je fais des transformations avec des outils compl√®tement diff√©rents.  Il s'agit peut-√™tre d'une nouvelle direction de d√©veloppement pour l' <code>omyumyum</code> . </li></ul><br><p>  C‚Äôest tout!  Si vous avez aim√© l'article, aimez-le, abonnez-vous √† la cha√Æne et bonne chance)). </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473026/">https://habr.com/ru/post/fr473026/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473002/index.html">Explication du paradoxe de Fermi dans le cadre de la sociologie spatiale Liu Qixin</a></li>
<li><a href="../fr473008/index.html">La loi de l'acc√©l√©ration des retours (partie 2)</a></li>
<li><a href="../fr473012/index.html">R√©sultats de la conf√©rence des partenaires Advantech √† Moscou</a></li>
<li><a href="../fr473014/index.html">Pr√©sentation de l'autorisation Kubernetes du consul Hashicorp</a></li>
<li><a href="../fr473018/index.html">Conseils aux candidats d'un programmeur r√©alisant des entretiens sur Facebook</a></li>
<li><a href="../fr473028/index.html">En Russie a commenc√© √† importer des d√©chets radioactifs d'Europe? Tri√©</a></li>
<li><a href="../fr473030/index.html">Nous calculons les bots "mal√©fiques" potentiels et les bloquons par IP</a></li>
<li><a href="../fr473032/index.html">"L'espoir est une mauvaise strat√©gie." SRE intensif √† Moscou, 3-5 f√©vrier</a></li>
<li><a href="../fr473034/index.html">Comment s'asseoir timlid</a></li>
<li><a href="../fr473036/index.html">API Android Camera2 √† partir de la th√©i√®re, partie 3. Codec multim√©dia et streaming vid√©o sur UDP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>