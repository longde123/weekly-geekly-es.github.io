<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ò∏Ô∏è ü§üüèΩ üêì Prototyping eines Handyspiels, wo man anf√§ngt und wie man es macht. Teil 1 üé© üé∑ ‚ò¶Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So kam es, dass ich oft Prototypen mache (sowohl f√ºr die Arbeit als auch f√ºr pers√∂nliche Projekte) 
 und ich m√∂chte meine Erfahrungen teilen. Ich m√∂ch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prototyping eines Handyspiels, wo man anf√§ngt und wie man es macht. Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453056/">  So kam es, dass ich oft Prototypen mache (sowohl f√ºr die Arbeit als auch f√ºr pers√∂nliche Projekte) <br>  und ich m√∂chte meine Erfahrungen teilen.  Ich m√∂chte einen Artikel schreiben, der interessant w√§re, mich selbst zu lesen, und zun√§chst frage ich mich, woran sich eine Person orientiert, wenn sie diese oder jene Entscheidung bei der Umsetzung des Projekts trifft, wie sie das Projekt startet, es ist oft am schwierigsten zu beginnen. <br><br>  Ein neues Beispiel, das ich mit Ihnen betrachten m√∂chte, ist das Konzept eines zuf√§lligen, auf Physik basierenden Puzzles.  <i>Manchmal werde ich sehr offensichtliche Dinge erw√§hnen, um das Thema f√ºr Anf√§nger zu erweitern.</i> <br><br><h3>  Die Idee sieht so aus </h3><br><img src="https://habrastorage.org/webt/ll/_-/mh/ll_-mhzvvzuhmrptbuhnsjt9up8.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br><a name="habracut"></a><br>  Wir ordnen verschiedene Modifikatoren auf dem Spielfeld an, die die Richtung der Rakete √§ndern, anziehen, beschleunigen, absto√üen und so weiter.  Die Aufgabe besteht darin, den Weg zwischen den Sternen zum n√§chsten Planeten zu ebnen, den wir brauchen.  Das Gewinnen wird beim Landen / Ber√ºhren der Spur des Planeten ber√ºcksichtigt.  Das Spielfeld ist vertikal, mehrere Bildschirme hoch, es wird davon ausgegangen, dass die Flugbahn den Boden des Bildschirms links / rechts einnehmen kann.  Verlieren - Wenn Sie den Zielplaneten verpasst haben, mit einem anderen Planeten kollidiert sind, sind Sie weit √ºber die Zone hinaus geflogen. <br><br>  Und ich hoffe, wir alle verstehen, dass wir vor dem Beginn der Entwicklung und Umsetzung unserer Pl√§ne zun√§chst einen Prototyp erstellen m√ºssen - ein sehr grobes und schnelles Produkt, mit dem Sie schnell die grundlegenden Mechanismen ausprobieren und sich ein Bild vom Gameplay machen k√∂nnen.  Wof√ºr sind Prototypen gemacht?  Der Spielprozess in unseren K√∂pfen und in der Praxis sind sehr unterschiedliche Dinge, was uns cool erscheint, f√ºr andere wird es v√∂lliger Horror sein, und oft gibt es kontroverse Momente im Projekt - Management, Spielregeln, Spieldynamik usw.  usw.  Es wird extrem dumm sein, die Prototypenphase zu √ºberspringen, die Architektur durchzuarbeiten, die Grafiken zu liefern, die Level anzupassen und schlie√ülich herauszufinden, dass das Spiel Schei√üe ist.  Aus dem Leben - in einem Spiel gab es Minispiele, ungef√§hr 10 Teile, nach dem Prototyping stellte sich heraus, dass sie furchtbar langweilig waren, die H√§lfte wurde weggeworfen, die andere H√§lfte wurde erneuert. <br><br>  Tipp - Isolieren Sie zus√§tzlich zur grundlegenden Mechanik kontroverse Stellen und schreiben Sie die spezifischen Erwartungen an den Prototyp auf.  Dies geschieht, um schwierige Momente nachzuladen.  Eine der Aufgaben dieses Prototyps war beispielsweise, wie bequem und verst√§ndlich das Spielfeld aus mehreren Bildschirmen besteht und diese gewickelt werden m√ºssen.  Plan A - svayp musste umgesetzt werden.  Plan B - die M√∂glichkeit, das Spielfeld zu vergr√∂√üern (falls erforderlich).  Es gab auch mehrere Optionen f√ºr Modifikatoren.  Die erste Idee ist im Screenshot zu sehen - wir legen den Modifikator und die Richtung seines Einflusses offen.  Infolgedessen wurden die Modifikatoren einfach durch Kugeln ersetzt, die die Richtung der Rakete √§ndern, wenn sie die Kugel ber√ºhren.  Wir beschlossen, dass dies eher beil√§ufig sein w√ºrde, ohne Flugbahnen usw. <br><br>  <b>Die allgemeine Funktionalit√§t, die wir implementieren:</b> <br><br><ol><li>  Sie k√∂nnen die anf√§ngliche Flugbahn der Rakete einstellen, wobei der Grad der Abweichung von der Senkrechten begrenzt ist (die Rakete kann nicht mehr als einen Grad zur Seite gedreht werden). </li><li>  Es sollte einen Startknopf geben, mit dem wir die Rakete auf die Stra√üe schicken </li><li>  Scrollen des Bildschirms beim Platzieren des Modifikators (zum Starten) </li><li>  Kamerabewegung hinter dem Player (nach dem Start) </li><li>  Schnittstellenfenster, mit dem Drag &amp; Drop-Modifikatoren auf dem Feld implementiert werden </li><li>  Der Prototyp muss zwei Modifikatoren haben - Absto√üung und Beschleunigung </li><li>  Wenn du ber√ºhrst, muss es Planeten geben, die du stirbst </li><li>  Wenn Sie ber√ºhren, muss es einen Planeten geben, den Sie gewinnen </li></ol><br><h3>  Architektur </h3><br>  Ein sehr wichtiger Punkt, in der gro√üen Entwicklung wird allgemein angenommen, dass der Prototyp so schrecklich wie schneller geschrieben wird, dann wird das Projekt einfach von Grund auf neu geschrieben.  In der harten Realit√§t vieler Projekte wachsen die Beine aus dem Prototyp heraus, was f√ºr die gro√üe Entwicklung schlecht ist - Kurvenarchitektur, Legacy-Code, technische Schulden, zus√§tzliche Zeit f√ºr das Refactoring.  Nun, und die Indie-Entwicklung als Ganzes flie√üt reibungslos vom Prototyp zur Beta.  Warum bin ich? Es ist notwendig, die Architektur sogar in einen Prototyp zu legen, auch wenn sie primitiv ist, damit Sie sp√§ter nicht weinen oder vor Kollegen rot werden. <br><br>  Vor jedem Start wiederholen wir immer - SOLID, KISS, DRY, YAGNI.  Selbst erfahrene Programmierer vergessen Kiss und Yagni. <br><br>  <b>An welcher grundlegenden Architektur halte ich mich fest?</b> <br><br>  Es gibt ein leeres Gameobject GameController in der Szene mit dem entsprechenden Tag, Komponenten / Mono-Bikes h√§ngen daran. Es ist besser, es zu einem Fertighaus zu machen und dann einfach Komponenten nach Bedarf zum Fertighaus hinzuzuf√ºgen: <br><br><ol><li>  GameController - (verantwortlich f√ºr den Status des Spiels, direkt zur Logik (gewonnen, verloren, wie viel Leben usw.) </li><li>  InputController - alles, was mit der Verwaltung von Spielern, dem Verfolgen von Tachi, Klicks, dem Klicken, dem Kontrollstatus usw. zu tun hat. </li><li>  TransformManager - In Spielen m√ºssen Sie h√§ufig wissen, wer wo ist, verschiedene Daten, die sich auf die Position des Spielers / der Feinde beziehen.  Wenn wir zum Beispiel an einem Planeten vorbeifliegen, ist der Spieler besiegt, der Gamecontroller ist daf√ºr verantwortlich, aber er muss die Position des Spielers kennen, von wo aus.  Der Transformationsmanager ist genau die Essenz, die √ºber Dinge Bescheid wei√ü </li><li>  AudioController - hier ist klar, es geht um Sounds </li><li>  InterfacesController - und hier ist klar, dass es um die Benutzeroberfl√§che geht </li></ol><br>  Das Gesamtbild ergibt sich: F√ºr jede verst√§ndliche Aufgabe haben Sie einen eigenen Controller / eine eigene Entit√§t, die diese Probleme l√∂st. Dies hilft, Godlayk-Objekte zu vermeiden. Sie erhalten eine Vorstellung davon, wo Sie aus den Controllern, die wir Daten senden, graben k√∂nnen. Wir k√∂nnen jederzeit die Implementierung des Empfangs von Daten √§ndern.  √ñffentliche Felder sind nicht erlaubt, wir geben Daten nur √ºber √∂ffentliche Eigenschaften / Methoden.  Wir berechnen / √§ndern Daten lokal. <br><br>  Manchmal kommt es vor, dass der GameController aufgrund verschiedener spezifischer Logik und Berechnungen aufgeblasen ist.  Wenn wir Daten verarbeiten m√ºssen, ist es besser, eine separate Klasse GameControllerModel zu erstellen und dort auszuf√ºhren. <br><br><h3>  Und so begann der Code </h3><br><div class="spoiler">  <b class="spoiler_title">Basisklasse f√ºr Raketen</b> <div class="spoiler_text"><pre><code class="java hljs">using GlobalEventAggregator; using UnityEngine; using UnityEngine.Assertions; namespace PlayerRocket { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> RocketState { WAITFORSTART = <span class="hljs-number"><span class="hljs-number">0</span></span>, MOVE = <span class="hljs-number"><span class="hljs-number">1</span></span>, STOP = <span class="hljs-number"><span class="hljs-number">2</span></span>, COMPLETESTOP = <span class="hljs-number"><span class="hljs-number">3</span></span>, } [RequireComponent(typeof(Rigidbody))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerRocketBase</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonoBehaviour</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span><span class="hljs-class"> </span></span>{ [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketConfig config; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Rigidbody rigidbody; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> InputController inputController; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketHolder rocketHolder; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketState rocketState; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Transform Transform =&gt; transform; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Rigidbody RigidbodyForForce =&gt; rigidbody; RocketState IPlayerHelper.RocketState =&gt; rocketState; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ForceModel&lt;IUseForces&gt; forceModel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> virtual </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Injections(); EventAggregator.AddListener&lt;ButtonStartPressed&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, StartEventReact); EventAggregator.AddListener&lt;EndGameEvent&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, EndGameReact); EventAggregator.AddListener&lt;CollideWithPlanetEvent&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, DestroyRocket); rigidbody = GetComponent&lt;Rigidbody&gt;(); Assert.IsNotNull(rigidbody, <span class="hljs-string"><span class="hljs-string">"    "</span></span> + gameObject.name); forceModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ForceModel&lt;IUseForces&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> virtual </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Injections(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyRocket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CollideWithPlanetEvent obj)</span></span></span><span class="hljs-function"> </span></span>{ Destroy(gameObject); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EndGameReact</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EndGameEvent obj)</span></span></span><span class="hljs-function"> </span></span>{ Debug.Log(<span class="hljs-string"><span class="hljs-string">"     "</span></span>); rocketState = RocketState.STOP; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Injections</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ EventAggregator.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectEvent&lt;InputController&gt; { inject = (InputController obj) =&gt; inputController = obj}); EventAggregator.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectEvent&lt;RocketHolder&gt; { inject = (RocketHolder holder) =&gt; rocketHolder = holder }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartEventReact</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ButtonStartPressed buttonStartPressed)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span><span class="hljs-class"> </span></span>{ Transform Transform { get; } RocketState RocketState { get; } } }</code> </pre> <br></div></div><br>  <b>Gehen wir</b> die Klasse durch: <br><br><pre> <code class="java hljs"> [RequireComponent(typeof(Rigidbody))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerRocketBase</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonoBehaviour</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span></span></code> </pre> <br>  Erstens, warum ist die Klasse abstrakt?  Wir wissen nicht, welche Art von Raketen wir haben werden, wie sie sich bewegen werden, wie sie animiert werden, welche Spielfunktionen verf√ºgbar sein werden (zum Beispiel die M√∂glichkeit, dass eine Rakete zur Seite springt).  Daher machen wir die Basisklasse abstrakt, legen dort Standarddaten ab und legen die abstrakten Methoden fest, deren Implementierung f√ºr bestimmte Raketen variieren kann. <br><br>  Es ist auch ersichtlich, dass die Klasse bereits eine Implementierung von Schnittstellen und ein Attribut hat, das im Gameplay die gew√ºnschte Komponente h√§ngt, ohne die die Rakete keine Rakete ist. <br><br><pre> <code class="java hljs">[SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketConfig config;</code> </pre> <br>  Dieses Attribut gibt an, dass der Inspektor √ºber ein serialisierbares Feld verf√ºgt, in das das Objekt eingepfercht ist. In den meisten Lektionen, einschlie√ülich Unity, werden diese Felder ver√∂ffentlicht. Wenn Sie ein Indie-Entwickler sind, tun Sie dies nicht.  Verwenden Sie private Felder und dieses Attribut.  Hier m√∂chte ich ein wenig dar√ºber nachdenken, was diese Klasse ist und was sie tut. <br><br><div class="spoiler">  <b class="spoiler_title">Rocketconfig</b> <div class="spoiler_text"><pre> <code class="java hljs">using UnityEngine; namespace PlayerRocket { [CreateAssetMenu(fileName = <span class="hljs-string"><span class="hljs-string">"RocketConfig"</span></span>, menuName = <span class="hljs-string"><span class="hljs-string">"Configs/RocketConfigs"</span></span>, order = <span class="hljs-number"><span class="hljs-number">1</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RocketConfig</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScriptableObject</span></span></span><span class="hljs-class"> </span></span>{ [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> fuel; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Speed =&gt; speed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Fuel =&gt; fuel; } }</code> </pre> <br></div></div><br>  Dies ist ein ScriptableObject, in dem Raketeneinstellungen gespeichert werden.  Dies erfordert den Datenpool, den Spieleentwickler ben√∂tigen - √ºber die Klasse hinaus.  Somit m√ºssen Spieleentwickler nicht herumspielen und ein bestimmtes Spielprojekt mit einer bestimmten Rakete einrichten. Sie k√∂nnen nur diese Konfiguration reparieren, die in einem separaten Asset / einer separaten Datei gespeichert ist.  Sie k√∂nnen die Laufzeitkonfiguration konfigurieren und sie wird gespeichert. Es ist auch m√∂glich, verschiedene Skins f√ºr die Rakete zu kaufen, und die Parameter sind dieselben - die Konfiguration wandert nur dorthin, wo Sie sie ben√∂tigen.  Dieser Ansatz wird gut erweitert - Sie k√∂nnen beliebige Daten hinzuf√ºgen, benutzerdefinierte Editoren schreiben usw. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ForceModel&lt;IUseForces&gt; forceModel;</code> </pre> <br>  Ich m√∂chte auch darauf eingehen, dies ist eine generische Klasse zum Anwenden von Modifikatoren auf ein Objekt. <br><br><div class="spoiler">  <b class="spoiler_title">Forcemodel</b> <div class="spoiler_text"><pre> <code class="java hljs">using System.Collections.Generic; using System.Linq; using UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> TypeOfForce { Push = <span class="hljs-number"><span class="hljs-number">0</span></span>, AddSpeed = <span class="hljs-number"><span class="hljs-number">1</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForceModel</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class"> </span></span>{ readonly <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T forceUser; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;SpaceForces&gt; forces = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;SpaceForces&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> bool IsHaveAdditionalForces; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ForceModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T user)</span></span></span><span class="hljs-function"> </span></span>{ GlobalEventAggregator.EventAggregator.AddListener&lt;SpaceForces&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ChangeModificatorsList); forceUser = user; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeModificatorsList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SpaceForces obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj.IsAdded) forces.Add(obj); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> forces.Remove(forces.FirstOrDefault(x =&gt; x.CenterOfObject == obj.CenterOfObject)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (forces.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) IsHaveAdditionalForces = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> IsHaveAdditionalForces = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddModificator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsHaveAdditionalForces) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; foreach (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f in forces) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (f.TypeOfForce) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TypeOfForce.Push: AddDirectionForce(f); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TypeOfForce.AddSpeed: forceUser.RigidbodyForForce.AddRelativeForce(Vector3.up*f.Force); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddDirectionForce</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SpaceForces spaceForces)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Debug.Log(""); //var t = AngleDir(forceUser.TransformForForce.position, spaceForces.CenterOfObject); forceUser.RigidbodyForForce.AddForce(Push(spaceForces)); } private Vector3 Push(SpaceForces spaceForces) { var dist = Vector2.Distance(forceUser.Transform.position, spaceForces.CenterOfObject); var coeff = 1 - (spaceForces.ColliderBound / dist); if (forceUser.Transform.position.x &gt; spaceForces.CenterOfObject.x) return (Vector3.right * spaceForces.Force) * coeff; else return (-Vector3.right * spaceForces.Force) * coeff; } public static float AngleDir(Vector2 A, Vector2 B) { return -Ax * By + Ay * Bx; } } public interface IUseForces { Transform Transform { get; } Rigidbody RigidbodyForForce { get; } } public struct SpaceForces { public TypeOfForce TypeOfForce; public Vector3 CenterOfObject; public Vector3 Direction; public float Force; public float ColliderBound; public bool IsAdded; }</span></span></code> </pre> <br></div></div><br>  Dies ist, was ich oben geschrieben habe - wenn Sie eine Art Berechnung / komplexe Logik ausf√ºhren m√ºssen, legen Sie sie in eine separate Klasse.  Es gibt eine sehr einfache Logik - es gibt eine Liste von Kr√§ften, die auf eine Rakete wirken.  Wir durchlaufen die Liste, schauen uns an, um welche Art von Leistung es sich handelt, und wenden eine bestimmte Methode an.  Die Liste wird durch Ereignisse aktualisiert. Ereignisse treten beim Ein- / Beenden in das Modifikatorfeld auf.  Das System ist sehr flexibel, erstens arbeitet es mit einer Schnittstelle (Hi-Kapselung), Benutzer von Modifikatoren k√∂nnen nicht nur Raketen / Spieler sein.  Zweitens ein Generikum - Sie k√∂nnen IUseForces mit verschiedenen Nachkommen f√ºr Anforderungen / Experimente erweitern und diese Klasse / dieses Modell weiterhin verwenden. <br><br>  Genug f√ºr den ersten Teil.  Im zweiten Teil werden wir ein System von Ereignissen, Abh√§ngigkeitsinjektionen, einen Eingabecontroller und eine Raketenklasse selbst betrachten und versuchen, sie zu starten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de453056/">https://habr.com/ru/post/de453056/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de453034/index.html">Vater schuf mit einem 3D-Drucker und einer X-Box eine bionische Prothese f√ºr seinen Sohn</a></li>
<li><a href="../de453038/index.html">Software Defined Radio - wie funktioniert es? Teil 4</a></li>
<li><a href="../de453042/index.html">H√§ufig gestellte Fragen zu Windows Terminal Build 2019</a></li>
<li><a href="../de453044/index.html">Der lang erwartete Schritt in Richtung komplex strukturierter Dokumente (+ Video)</a></li>
<li><a href="../de453046/index.html">Verwenden aller Funktionen von Indizes in PostgreSQL</a></li>
<li><a href="../de453058/index.html">AI hat gelernt, Videos aus einem Frame zu erstellen. Alte Gem√§lde k√∂nnen jetzt lebendig gemacht werden</a></li>
<li><a href="../de453064/index.html">Harm for Good: Das Immunsystem von Lamprey im Kampf gegen menschlichen Hirntumor</a></li>
<li><a href="../de453066/index.html">Typografische Benutzeroberfl√§che - eine neue Methode zur Entwicklung von Benutzeroberfl√§chen</a></li>
<li><a href="../de453068/index.html">Subjektivit√§t</a></li>
<li><a href="../de453070/index.html">L - Logik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>