<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‡ğŸ½ ğŸ›€ğŸ¿ ğŸ“¡ éœå¤«æ›¼æ•°æ®å‹ç¼© ğŸ˜§ ğŸ”” ğŸ–‹ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å‚èµ›ä½œå“ 
 åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºè‘—åçš„éœå¤«æ›¼ç®—æ³•åŠå…¶åœ¨æ•°æ®å‹ç¼©ä¸­çš„åº”ç”¨ã€‚ 

 ç»“æœï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªç®€å•çš„å­˜æ¡£å™¨ã€‚ åœ¨HabrÃ©ä¸Šå·²ç»æœ‰å…³äºå®ƒçš„æ–‡ç«  ï¼Œä½†æ˜¯æ²¡æœ‰å®é™…å®æ–½ã€‚ å½“å‰èŒä½çš„ç†è®ºææ–™æ¥è‡ªå­¦æ ¡çš„è®¡ç®—æœºç§‘å­¦è¯¾ç¨‹ä»¥åŠRobert Laforeçš„ä¹¦â€œ Javaä¸­çš„æ•°æ®ç»“æ„å’Œç®—æ³•â€ã€‚ å› æ­¤ï¼Œä¸€åˆ‡éƒ½åœ¨å‰Š...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>éœå¤«æ›¼æ•°æ®å‹ç¼©</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438512/"><h2> å‚èµ›ä½œå“ </h2><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºè‘—åçš„éœå¤«æ›¼ç®—æ³•åŠå…¶åœ¨æ•°æ®å‹ç¼©ä¸­çš„åº”ç”¨ã€‚ <br><br> ç»“æœï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªç®€å•çš„å­˜æ¡£å™¨ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨HabrÃ©ä¸Š</a>å·²ç»æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…³äºå®ƒ</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« </a> ï¼Œä½†æ˜¯æ²¡æœ‰å®é™…å®æ–½ã€‚ å½“å‰èŒä½çš„ç†è®ºææ–™æ¥è‡ªå­¦æ ¡çš„è®¡ç®—æœºç§‘å­¦è¯¾ç¨‹ä»¥åŠRobert Laforeçš„ä¹¦â€œ Javaä¸­çš„æ•°æ®ç»“æ„å’Œç®—æ³•â€ã€‚ å› æ­¤ï¼Œä¸€åˆ‡éƒ½åœ¨å‰Šå‡ä¹‹ä¸­ï¼ <br><a name="habracut"></a><br><h2> æœ‰ç‚¹æƒ³ </h2><br> åœ¨çº¯æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªå­—ç¬¦ç”¨8ä½ï¼ˆASCIIç¼–ç ï¼‰æˆ–16ä½ï¼ˆUnicodeç¼–ç ï¼‰ç¼–ç ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬å°†è€ƒè™‘ASCIIç¼–ç ã€‚ ä¾‹å¦‚ï¼Œä»¥s1 =â€œ SUSIE SAYS IT IS EASY \ nâ€è¡Œã€‚ æ€»çš„æ¥è¯´ï¼Œè¯¥è¡Œä¸­æ€»å…±æœ‰22ä¸ªå­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼å’Œæ¢è¡Œç¬¦-'\ n'ã€‚ åŒ…å«æ­¤è¡Œçš„æ–‡ä»¶å°†é‡22 * 8 = 176ä½ã€‚ é—®é¢˜ç«‹å³å‡ºç°ï¼šä½¿ç”¨æ‰€æœ‰8ä½ç¼–ç 1ä¸ªå­—ç¬¦æ˜¯å¦åˆç†ï¼Ÿ æˆ‘ä»¬ä¸ä¼šä½¿ç”¨æ‰€æœ‰ASCIIå­—ç¬¦ã€‚ å³ä½¿ä½¿ç”¨ï¼Œæœ€é¢‘ç¹çš„å­—æ¯Sç»™å‡ºå°½å¯èƒ½çŸ­çš„ä»£ç ï¼Œè€Œæœ€ç¨€æœ‰çš„å­—æ¯T Tç»™å‡ºæ›´çœŸå®çš„ä»£ç æ›´ä¸ºåˆç†ã€‚ è¿™æ˜¯éœå¤«æ›¼ç®—æ³•ï¼šæ‚¨éœ€è¦æ‰¾åˆ°æœ€ä½³çš„ç¼–ç é€‰é¡¹ï¼Œä½¿æ–‡ä»¶çš„é‡é‡æœ€å°ã€‚ ä¸åŒçš„å­—ç¬¦å…·æœ‰ä¸åŒçš„ä»£ç é•¿åº¦æ˜¯å¾ˆæ­£å¸¸çš„-è¿™æ˜¯ç®—æ³•çš„åŸºç¡€ã€‚ <br><br><h3> ç¼–ç æ–¹å¼ </h3><br> ä¸ºä»€ä¹ˆä¸ç»™å­—ç¬¦'S'ä¸€ä¸ªä»£ç ï¼Œä¾‹å¦‚1ä½é•¿ï¼š0æˆ–1ã€‚è®©å®ƒä¸º1ã€‚é‚£ä¹ˆæˆ‘ä»¬å°†ç»™ç¬¬äºŒä¸ªæœ€å¸¸é‡åˆ°çš„å­—ç¬¦-â€ï¼ˆç©ºæ ¼ï¼‰-0ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæ‚¨å¼€å§‹è§£ç æ¶ˆæ¯-ç¼–ç çš„å­—ç¬¦ä¸²s1-æ‚¨ä¼šçœ‹åˆ°ä»£ç ä»¥1å¼€å¤´ã€‚é‚£ä¹ˆè¯¥æ€ä¹ˆåšï¼šå®ƒæ˜¯å­—ç¬¦Sï¼Œè¿˜æ˜¯å…¶ä»–å­—ç¬¦ï¼Œä¾‹å¦‚Aï¼Ÿ å› æ­¤ï¼Œå‡ºç°äº†ä¸€æ¡é‡è¦è§„åˆ™ï¼š <br><br>  <b>ä»»ä½•ä»£ç éƒ½ä¸åº”è¯¥æ˜¯å¦ä¸€ä¸ªçš„å‰ç¼€</b> <br><br> æ­¤è§„åˆ™æ˜¯ç®—æ³•ä¸­çš„å…³é”®ã€‚ å› æ­¤ï¼Œä»£ç çš„åˆ›å»ºä»é¢‘ç‡è¡¨å¼€å§‹ï¼Œè¯¥é¢‘ç‡è¡¨æŒ‡ç¤ºæ¯ä¸ªå­—ç¬¦çš„é¢‘ç‡ï¼ˆå‡ºç°æ¬¡æ•°ï¼‰ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cu/h6/y6/cuh6y658iqqnvb0whujokfbsaeq.jpeg" width="350"></div> å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦åº”ä½¿ç”¨<u>å°½å¯èƒ½å°‘</u>çš„ä½æ•°è¿›è¡Œç¼–ç ã€‚ æˆ‘å°†ç»™å‡ºä¸€ä¸ªå¯èƒ½çš„ä»£ç è¡¨ç¤ºä¾‹ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3j/01/_2/3j01_2tsdi_q790e8yuwa1l41zc.jpeg" width="350"></div> å› æ­¤ï¼Œç¼–ç åçš„æ¶ˆæ¯å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre><code class="plaintext hljs">10 01111 10 110 1111 00 10 010 1110 10 00 110 0110 00 110 10 00 1111 010 10 1110 01110</code> </pre> <br> æˆ‘ç”¨ç©ºæ ¼åˆ†éš”äº†æ¯ä¸ªå­—ç¬¦çš„ä»£ç ã€‚ è¿™å®é™…ä¸Šä¸ä¼šåœ¨å‹ç¼©æ–‡ä»¶ä¸­å‘ç”Ÿï¼ <br> é—®é¢˜å‡ºç°äº†ï¼š <s>æ­¤salagaæ˜¯</s>å¦‚ä½•æå‡º<s>ä»£ç çš„</s> ï¼Ÿå¦‚ä½•åˆ›å»ºä»£ç è¡¨ï¼Ÿ è¿™å°†åœ¨ä¸‹é¢è®¨è®ºã€‚ <br><br><h4> å»ºç«‹éœå¤«æ›¼æ ‘ </h4><br> åœ¨è¿™é‡Œï¼ŒäºŒå‰æœç´¢æ ‘å¯ä»¥è§£æ•‘ã€‚ ä¸ç”¨æ‹…å¿ƒï¼Œè¿™é‡Œä¸éœ€è¦æœç´¢ï¼Œæ’å…¥å’Œåˆ é™¤æ–¹æ³•ã€‚ è¿™æ˜¯javaä¸­çš„æ ‘ç»“æ„ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> frequence; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> letter; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Node leftChild; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Node rightChild; ... }</code> </pre><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BinaryTree</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Node root; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinaryTree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ root = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Node(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinaryTree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Node root)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.root = root; } ... }</code> </pre><br> è¿™ä¸æ˜¯å®Œæ•´çš„ä»£ç ï¼Œå®Œæ•´çš„ä»£ç å°†åœ¨ä¸‹é¢ã€‚ <br><br> è¿™æ˜¯æ ‘æ„å»ºç®—æ³•æœ¬èº«ï¼š <br><br><ol><li> ä¸ºæ¶ˆæ¯ä¸­çš„æ¯ä¸ªå­—ç¬¦åˆ›å»ºä¸€ä¸ªNodeå¯¹è±¡ï¼ˆç¬¬s1è¡Œï¼‰ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå°†æœ‰9ä¸ªèŠ‚ç‚¹ï¼ˆNodeå¯¹è±¡ï¼‰ã€‚ æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸¤ä¸ªæ•°æ®å­—æ®µï¼šç¬¦å·å’Œé¢‘ç‡ </li><li> ä¸ºæ¯ä¸ªNodeèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªTreeå¯¹è±¡ï¼ˆBinaryTreeï¼‰ã€‚ è¯¥èŠ‚ç‚¹æˆä¸ºæ ‘çš„æ ¹ã€‚ </li><li> å°†è¿™äº›æ ‘ç²˜è´´åˆ°ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ã€‚ é¢‘ç‡è¶Šä½ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ å› æ­¤ï¼Œæå–æ—¶ï¼Œæ€»æ˜¯ä»¥æœ€ä½çš„é¢‘ç‡é€‰æ‹©dervoã€‚ </li></ol><br> æ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦å¾ªç¯æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š <br><br><ol><li> ä»ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­æå–ä¸¤æ£µæ ‘ï¼Œå¹¶ä½¿å®ƒä»¬æˆä¸ºæ–°èŠ‚ç‚¹ï¼ˆä¸å¸¦å­—æ¯çš„æ–°åˆ›å»ºèŠ‚ç‚¹ï¼‰çš„åä»£ã€‚ æ–°èŠ‚ç‚¹çš„é¢‘ç‡æ˜¯ä¸¤ä¸ªåä»£æ ‘çš„é¢‘ç‡ä¹‹å’Œã€‚ </li><li> å¯¹äºæ­¤èŠ‚ç‚¹ï¼Œåˆ›å»ºä¸€ä¸ªåœ¨æ­¤èŠ‚ç‚¹ä¸­å…·æœ‰æ ¹çš„æ ‘ã€‚ å°†æ­¤æ ‘ç²˜è´´å›ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚  ï¼ˆç”±äºæ ‘å…·æœ‰æ–°çš„é¢‘ç‡ï¼Œå› æ­¤å¾ˆå¯èƒ½ä¼šåˆ°è¾¾é˜Ÿåˆ—ä¸­çš„æ–°ä½ç½®ï¼‰ </li><li> ç»§ç»­æ­¥éª¤1å’Œ2ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­åªå‰©ä¸‹ä¸€æ£µæ ‘-Huffmanæ ‘ </li></ol><br> è€ƒè™‘åœ¨çº¿s1ä¸Šçš„æ­¤ç®—æ³•ï¼š <br><br><img src="https://habrastorage.org/webt/v4/l2/xn/v4l2xnrj2mzomws6y696cm7o3_q.jpeg"><br><br> åœ¨æ­¤ï¼Œç¬¦å·â€œ lfâ€ï¼ˆæ¢è¡Œç¬¦ï¼‰è¡¨ç¤ºåˆ°æ–°è¡Œçš„è¿‡æ¸¡ï¼Œâ€œ spâ€ï¼ˆç©ºæ ¼ï¼‰æ˜¯ç©ºæ ¼ã€‚ <br><br><h4> æ¥ä¸‹æ¥æ˜¯ä»€ä¹ˆï¼Ÿ </h4><br> æˆ‘ä»¬æœ‰ä¸€æ£µéœå¤«æ›¼æ ‘ã€‚ å¥½å§ï¼Œå¥½ ä»¥åŠå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ  <s>ä»–ä»¬ä¸ä¼šå…è´¹è·å–å®ƒï¼Œ</s>ç„¶åï¼Œæ‚¨éœ€è¦è·Ÿè¸ªä»æ ‘çš„æ ¹åˆ°å¶çš„æ‰€æœ‰å¯èƒ½è·¯å¾„ã€‚ è®©æˆ‘ä»¬åŒæ„æŒ‡å®šè¾¹ç¼˜0ï¼ˆå¦‚æœå®ƒå¯¼è‡´å·¦åä»£ï¼‰å’Œ1ï¼ˆå¦‚æœå®ƒå¯¼è‡´å³åä»£ï¼‰ã€‚ ä¸¥æ ¼æ¥è¯´ï¼Œåœ¨è¿™äº›ç¬¦å·ä¸­ï¼Œç¬¦å·ä»£ç æ˜¯ä»æ ‘çš„æ ¹åˆ°åŒ…å«ç›¸åŒç¬¦å·çš„å·¥ä½œè¡¨çš„è·¯å¾„ã€‚ <br><br><img src="https://habrastorage.org/webt/of/pi/k4/ofpik4e7t3afswjddxugb-ddkfa.jpeg"><br><br> å› æ­¤ï¼Œä»£ç è¡¨å‡ºç°äº†ã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœè€ƒè™‘æ­¤è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºæ¯ä¸ªå­—ç¬¦çš„â€œæƒé‡â€çš„ç»“è®º-è¿™æ˜¯å…¶ä»£ç çš„é•¿åº¦ã€‚ ç„¶åå‹ç¼©æ–‡ä»¶çš„æƒé‡ä¸ºï¼š2 * 3 + 2 * 4 + 3 * 3 + 6 * 2 +1 * 4 +1 * 5 + 2 * 4 + 4 * 2 +1 * 5 = 65ä½ã€‚ æœ€åˆï¼Œå®ƒçš„é‡é‡ä¸º176ä½ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†å…¶é™ä½äº†176/65 = 2.7å€ï¼ ä½†è¿™æ˜¯ä¹Œæ‰˜é‚¦ã€‚ è¿™æ ·çš„ç³»æ•°ä¸å¤ªå¯èƒ½è·å¾—ã€‚ æ€ä¹ˆäº† è¿™å°†åœ¨ç¨åè®¨è®ºã€‚ <br><br><h3> è§£ç æ–¹å¼ </h3><br> å¥½å§ï¼Œä¹Ÿè®¸å‰©ä¸‹çš„æœ€ç®€å•çš„äº‹æƒ…å°±æ˜¯è§£ç ã€‚ æˆ‘æƒ³å¾ˆå¤šäººéƒ½çŒœæƒ³ä¸å¯èƒ½ç®€å•åœ°åˆ›å»ºå‹ç¼©æ–‡ä»¶è€Œæ²¡æœ‰ä»»ä½•ç¼–ç æ–¹å¼çš„æç¤º-æˆ‘ä»¬å°†æ— æ³•å¯¹å…¶è¿›è¡Œè§£ç ï¼ æ˜¯çš„ï¼Œæˆ‘å¾ˆéš¾æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘å¿…é¡»åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å‹ç¼©è¡¨çš„æ–‡æœ¬æ–‡ä»¶table.txtï¼š <br><br><pre> <code class="plaintext hljs">01110 00 A010 E1111 I110 S10 T0110 U01111 Y1110</code> </pre><br> ä»¥â€œå­—ç¬¦â€â€œå­—ç¬¦ä»£ç â€çš„å½¢å¼è®°å½•è¡¨ã€‚ ä¸ºä»€ä¹ˆ01110æ²¡æœ‰å­—ç¬¦ï¼Ÿ å®é™…ä¸Šï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ªç¬¦å·ï¼Œåªæ˜¯æˆ‘è¾“å‡ºåˆ°æ–‡ä»¶æ—¶ä½¿ç”¨çš„javaå·¥å…·ï¼Œæ¢è¡Œç¬¦-'\ n'-ä¼šè½¬æ¢ä¸ºæ¢è¡Œç¬¦ï¼ˆæ— è®ºå¬èµ·æ¥å¤šä¹ˆæ„šè ¢ï¼‰ã€‚ å› æ­¤ï¼Œé¡¶éƒ¨çš„ç©ºè¡Œæ˜¯ä»£ç 01110çš„å­—ç¬¦ã€‚å¯¹äºä»£ç 00ï¼Œè¯¥å­—ç¬¦æ˜¯è¯¥è¡Œå¼€å¤´çš„ç©ºæ ¼ã€‚ æˆ‘å¿…é¡»é©¬ä¸Šè¯´ï¼Œ <s>æˆ‘ä»¬</s>å­˜å‚¨è¯¥è¡¨çš„æ–¹æ³•å¯èƒ½æ˜¯æœ€ä¸åˆç†çš„ã€‚ ä½†æ˜¯å¾ˆå®¹æ˜“ç†è§£å’Œå®æ–½ã€‚ æˆ‘å¾ˆé«˜å…´å¬åˆ°æ‚¨åœ¨æœ‰å…³ä¼˜åŒ–çš„è¯„è®ºä¸­æå‡ºçš„å»ºè®®ã€‚ <br><br> æ‹¥æœ‰æ­¤è¡¨éå¸¸å®¹æ˜“è§£ç ã€‚ å›å¿†ä¸€ä¸‹åˆ›å»ºç¼–ç æ—¶éµå¾ªçš„è§„åˆ™ï¼š <br><br>  <b>ä»»ä½•ä»£ç éƒ½ä¸åº”åœ¨å…¶å‰ç¼€</b> <br><br> è¿™æ˜¯å®ƒå‘æŒ¥ä¿ƒè¿›ä½œç”¨çš„åœ°æ–¹ã€‚ æˆ‘ä»¬é€ä½é¡ºåºè¯»å–ï¼Œå¹¶ä¸”ä¸€æ—¦æ¥æ”¶åˆ°çš„ç”±è¯»å–çš„ä½ç»„æˆçš„å­—ç¬¦ä¸²dä¸å¯¹åº”äºå­—ç¬¦çš„ç¼–ç åŒ¹é…ï¼Œæˆ‘ä»¬ä¾¿ç«‹å³çŸ¥é“å­—ç¬¦å·²è¢«ç¼–ç ï¼ˆå¹¶ä¸”åªæœ‰å®ƒï¼ï¼‰ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨è§£ç è¡Œï¼ˆåŒ…å«è§£ç æ¶ˆæ¯çš„è¡Œï¼‰ä¸­å†™å…¥å­—ç¬¦ï¼Œå°†dè¡Œæ¸…é›¶ï¼Œç„¶åè¯»å–ç¼–ç æ–‡ä»¶ã€‚ <br><br><h2> å®ä½œ </h2><br> ç°åœ¨è¯¥<s>é€šè¿‡</s>ç¼–å†™å­˜æ¡£å™¨æ¥<s>ç¾è¾±æˆ‘çš„ä»£ç äº†</s> ã€‚ æˆ‘ä»¬ç§°ä¹‹ä¸ºCompressorã€‚ <br><br> è®©æˆ‘ä»¬ä»å¤´å¼€å§‹ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬ç¼–å†™Nodeç±»ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> frequence;<span class="hljs-comment"><span class="hljs-comment">// private char letter;// private Node leftChild;//  private Node rightChild;//  public Node(char letter, int frequence) { //,  this.letter = letter; this.frequence = frequence; } public Node() {}//    (.       ) public void addChild(Node newNode) {//  if (leftChild == null)//  =&gt;  =&gt;    leftChild = newNode; else { if (leftChild.getFrequence() &lt;= newNode.getFrequence()) // ,   rightChild = newNode;// ,     else { rightChild = leftChild; leftChild = newNode; } } frequence += newNode.getFrequence();//  } public Node getLeftChild() { return leftChild; } public Node getRightChild() { return rightChild; } public int getFrequence() { return frequence; } public char getLetter() { return letter; } public boolean isLeaf() {//   return leftChild == null &amp;&amp; rightChild == null; } }</span></span></code> </pre><br> ç°åœ¨è¿™æ£µæ ‘ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BinaryTree</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Node root; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinaryTree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ root = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Node(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinaryTree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Node root)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.root = root; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFrequence</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> root.getFrequence(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Node </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRoot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> root; } }</code> </pre><br> ä¼˜å…ˆé˜Ÿåˆ—ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ArrayList;<span class="hljs-comment"><span class="hljs-comment">//-,      class PriorityQueue { private ArrayList&lt;BinaryTree&gt; data;//  private int nElems;//-    public PriorityQueue() { data = new ArrayList&lt;BinaryTree&gt;(); nElems = 0; } public void insert(BinaryTree newTree) {// if (nElems == 0) data.add(newTree); else { for (int i = 0; i &lt; nElems; i++) { if (data.get(i).getFrequence() &gt; newTree.getFrequence()) {//     data.add(i, newTree);// . ,  c       1  break;//       } if (i == nElems - 1) data.add(newTree); } } nElems++;// -   1 } public BinaryTree remove() {//   BinaryTree tmp = data.get(0);//   data.remove(0);//,  nElems--;// -   1 return tmp;//  (   ) } }</span></span></code> </pre><br> åˆ›å»ºéœå¤«æ›¼æ ‘çš„ç±»ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HuffmanTree</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> ENCODING_TABLE_SIZE = <span class="hljs-number"><span class="hljs-number">127</span></span>;<span class="hljs-comment"><span class="hljs-comment">//   private String myString;// private BinaryTree huffmanTree;//  private int[] freqArray;//  private String[] encodingArray;//  //----------------constructor---------------------- public HuffmanTree(String newString) { myString = newString; freqArray = new int[ENCODING_TABLE_SIZE]; fillFrequenceArray(); huffmanTree = getHuffmanTree(); encodingArray = new String[ENCODING_TABLE_SIZE]; fillEncodingArray(huffmanTree.getRoot(), "", ""); } //--------------------frequence array------------------------ private void fillFrequenceArray() { for (int i = 0; i &lt; myString.length(); i++) { freqArray[(int)myString.charAt(i)]++; } } public int[] getFrequenceArray() { return freqArray; } //------------------------huffman tree creation------------------ private BinaryTree getHuffmanTree() { PriorityQueue pq = new PriorityQueue(); //   for (int i = 0; i &lt; ENCODING_TABLE_SIZE; i++) { if (freqArray[i] != 0) {//     Node newNode = new Node((char) i, freqArray[i]);//    Node BinaryTree newTree = new BinaryTree(newNode);//  Node  BinaryTree pq.insert(newTree);//   } } while (true) { BinaryTree tree1 = pq.remove();//    . try { BinaryTree tree2 = pq.remove();//     Node newNode = new Node();//  Node newNode.addChild(tree1.getRoot());//      newNode.addChild(tree2.getRoot()); pq.insert(new BinaryTree(newNode); } catch (IndexOutOfBoundsException e) {//     return tree1; } } } public BinaryTree getTree() { return huffmanTree; } //-------------------encoding array------------------ void fillEncodingArray(Node node, String codeBefore, String direction) {//   if (node.isLeaf()) { encodingArray[(int)node.getLetter()] = codeBefore + direction; } else { fillEncodingArray(node.getLeftChild(), codeBefore + direction, "0"); fillEncodingArray(node.getRightChild(), codeBefore + direction, "1"); } } String[] getEncodingArray() { return encodingArray; } public void displayEncodingArray() {//  fillEncodingArray(huffmanTree.getRoot(), "", ""); System.out.println("======================Encoding table===================="); for (int i = 0; i &lt; ENCODING_TABLE_SIZE; i++) { if (freqArray[i] != 0) { System.out.print((char)i + " "); System.out.println(encodingArray[i]); } } System.out.println("========================================================"); } //----------------------------------------------------- String getOriginalString() { return myString; } }</span></span></code> </pre><br> åŒ…å«ç¼–ç /è§£ç çš„ç±»ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HuffmanOperator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> ENCODING_TABLE_SIZE = <span class="hljs-number"><span class="hljs-number">127</span></span>;<span class="hljs-comment"><span class="hljs-comment">//  private HuffmanTree mainHuffmanTree;//  (   ) private String myString;//  private int[] freqArray;//  private String[] encodingArray;//  private double ratio;//  public HuffmanOperator(HuffmanTree MainHuffmanTree) {//for compress this.mainHuffmanTree = MainHuffmanTree; myString = mainHuffmanTree.getOriginalString(); encodingArray = mainHuffmanTree.getEncodingArray(); freqArray = mainHuffmanTree.getFrequenceArray(); } public HuffmanOperator() {}//for extract; //---------------------------------------compression----------------------------------------------------------- private String getCompressedString() { String compressed = ""; String intermidiate = "";// (  ) //System.out.println("=============================Compression======================="); //displayEncodingArray(); for (int i = 0; i &lt; myString.length(); i++) { intermidiate += encodingArray[myString.charAt(i)]; } //      .       8=&gt; //    ( 1,  ) byte counter = 0;//     (   : 0&lt;=counter&lt;8&lt;127) for (int length = intermidiate.length(), delta = 8 - length % 8; counter &lt; delta ; counter++) {//delta -    intermidiate += "0"; } // -         compressed = String.format("%8s", Integer.toBinaryString(counter &amp; 0xff)).replace(" ", "0") + intermidiate; //  setCompressionRatio(); //System.out.println("==============================================================="); return compressed; } private void setCompressionRatio() {//   double sumA = 0, sumB = 0;//A-the original sum for (int i = 0; i &lt; ENCODING_TABLE_SIZE; i++) { if (freqArray[i] != 0) { sumA += 8 * freqArray[i]; sumB += encodingArray[i].length() * freqArray[i]; } } ratio = sumA / sumB; } public byte[] getBytedMsg() {//final compression StringBuilder compressedString = new StringBuilder(getCompressedString()); byte[] compressedBytes = new byte[compressedString.length() / 8]; for (int i = 0; i &lt; compressedBytes.length; i++) { compressedBytes[i] = (byte) Integer.parseInt(compressedString.substring(i * 8, (i + 1) * 8), 2); } return compressedBytes; } //---------------------------------------end of compression---------------------------------------------------------------- //------------------------------------------------------------extract----------------------------------------------------- public String extract(String compressed, String[] newEncodingArray) { String decompressed = ""; String current = ""; String delta = ""; encodingArray = newEncodingArray; //displayEncodingArray(); // -   for (int i = 0; i &lt; 8; i++) delta += compressed.charAt(i); int ADDED_ZEROES = Integer.parseInt(delta, 2); for (int i = 8, l = compressed.length() - ADDED_ZEROES; i &lt; l; i++) { //i = 8, ..      -   current += compressed.charAt(i); for (int j = 0; j &lt; ENCODING_TABLE_SIZE; j++) { if (current.equals(encodingArray[j])) {//  decompressed += (char)j;//   current = "";//    } } } return decompressed; } public String getEncodingTable() { String enc = ""; for (int i = 0; i &lt; encodingArray.length; i++) { if (freqArray[i] != 0) enc += (char)i + encodingArray[i] + '\n'; } return enc; } public double getCompressionRatio() { return ratio; } public void displayEncodingArray() {//  System.out.println("======================Encoding table===================="); for (int i = 0; i &lt; ENCODING_TABLE_SIZE; i++) { //if (freqArray[i] != 0) { System.out.print((char)i + " "); System.out.println(encodingArray[i]); //} } System.out.println("========================================================"); } }</span></span></code> </pre><br> æœ‰åŠ©äºå†™å…¥æ–‡ä»¶çš„ç±»ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.PrintWriter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.FileNotFoundException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.FileOutputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.Closeable; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileOutputHelper</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Closeable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> File outputFile; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FileOutputStream fileOutputStream; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FileOutputHelper</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File file)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> FileNotFoundException </span></span>{ outputFile = file; fileOutputStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileOutputStream(outputFile); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeByte</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> msg)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ fileOutputStream.write(msg); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeBytes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] msg)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ fileOutputStream.write(msg); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String msg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (PrintWriter pw = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintWriter(outputFile)) { pw.write(msg); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (FileNotFoundException e) { System.out.println(<span class="hljs-string"><span class="hljs-string">" ,     !"</span></span>); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ fileOutputStream.close(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finalize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ close(); } }</code> </pre><br> æœ‰åŠ©äºè¯»å–æ–‡ä»¶çš„ç±»ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.FileInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.EOFException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.InputStreamReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.Closeable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileInputHelper</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Closeable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FileInputStream fileInputStream; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> BufferedReader fileBufferedReader; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FileInputHelper</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File file)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ fileInputStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileInputStream(file); fileBufferedReader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BufferedReader(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputStreamReader(fileInputStream)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readByte</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cur = fileInputStream.read(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cur == -<span class="hljs-number"><span class="hljs-number">1</span></span>)<span class="hljs-comment"><span class="hljs-comment">//   throw new EOFException(); return (byte)cur; } public String readLine() throws IOException { return fileBufferedReader.readLine(); } @Override public void close() throws IOException{ fileInputStream.close(); } }</span></span></code> </pre><br> å¥½å§ï¼Œå’Œä¸»è¦çš„ç±»ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.charset.MalformedInputException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.FileNotFoundException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.file.Files; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.file.NoSuchFileException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.file.Paths; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.EOFException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> ENCODING_TABLE_SIZE = <span class="hljs-number"><span class="hljs-number">127</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {<span class="hljs-comment"><span class="hljs-comment">//       if (args[0].equals("--compress") || args[0].equals("-c")) compress(args[1]); else if ((args[0].equals("--extract") || args[0].equals("-x")) &amp;&amp; (args[2].equals("--table") || args[2].equals("-t"))) { extract(args[1], args[3]); } else throw new IllegalArgumentException(); } catch (ArrayIndexOutOfBoundsException | IllegalArgumentException e) { System.out.println("    "); System.out.println(" Readme.txt"); e.printStackTrace(); } } public static void compress(String stringPath) throws IOException { List&lt;String&gt; stringList; File inputFile = new File(stringPath); String s = ""; File compressedFile, table; try { stringList = Files.readAllLines(Paths.get(inputFile.getAbsolutePath())); } catch (NoSuchFileException e) { System.out.println(" ,     !"); return; } catch (MalformedInputException e) { System.out.println("    "); return; } for (String item : stringList) { s += item; s += '\n'; } HuffmanOperator operator = new HuffmanOperator(new HuffmanTree(s)); compressedFile = new File(inputFile.getAbsolutePath() + ".cpr"); compressedFile.createNewFile(); try (FileOutputHelper fo = new FileOutputHelper(compressedFile)) { fo.writeBytes(operator.getBytedMsg()); } //create file with encoding table: table = new File(inputFile.getAbsolutePath() + ".table.txt"); table.createNewFile(); try (FileOutputHelper fo = new FileOutputHelper(table)) { fo.writeString(operator.getEncodingTable()); } System.out.println("   : " + compressedFile.getAbsolutePath()); System.out.println("    " + table.getAbsolutePath()); System.out.println("     !"); double idealRatio = Math.round(operator.getCompressionRatio() * 100) / (double) 100;//  double realRatio = Math.round((double) inputFile.length() / ((double) compressedFile.length() + (double) table.length()) * 100) / (double)100;//  System.out.println("    " + idealRatio); System.out.println("      " + realRatio); } public static void extract(String filePath, String tablePath) throws FileNotFoundException, IOException { HuffmanOperator operator = new HuffmanOperator(); File compressedFile = new File(filePath), tableFile = new File(tablePath), extractedFile = new File(filePath + ".xtr"); String compressed = ""; String[] encodingArray = new String[ENCODING_TABLE_SIZE]; //read compressed file //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!check here: try (FileInputHelper fi = new FileInputHelper(compressedFile)) { byte b; while (true) { b = fi.readByte();//method returns EOFException compressed += String.format("%8s", Integer.toBinaryString(b &amp; 0xff)).replace(" ", "0"); } } catch (EOFException e) { } //-------------------- //read encoding table: try (FileInputHelper fi = new FileInputHelper(tableFile)) { fi.readLine();//skip first empty string encodingArray[(byte)'\n'] = fi.readLine();//read code for '\n' while (true) { String s = fi.readLine(); if (s == null) throw new EOFException(); encodingArray[(byte)s.charAt(0)] = s.substring(1, s.length()); } } catch (EOFException ignore) {} extractedFile.createNewFile(); //extract: try (FileOutputHelper fo = new FileOutputHelper(extractedFile)) { fo.writeString(operator.extract(compressed, encodingArray)); } System.out.println("    " + extractedFile.getAbsolutePath()); } }</span></span></code> </pre><br>  readme.txtæŒ‡ä»¤æ–‡ä»¶ç”±æ‚¨è‡ªå·±å†³å®šï¼š-) <br><br><h2> ç»“è®º </h2><br> è¿™å¯èƒ½å°±æ˜¯æˆ‘æƒ³è¯´çš„ã€‚ å¦‚æœæ‚¨å¯¹<s>æˆ‘</s>åœ¨ä»£ç ï¼Œç®—æ³•å’Œæ€»ä½“ä¸Šçš„ä¼˜åŒ–æ–¹é¢çš„æ”¹è¿›<s>æ— èƒ½ä¸ºåŠ›</s> ï¼Œè¯·éšæ—¶æ’°å†™ã€‚ å¦‚æœæˆ‘è¯¯è§£äº†ä¸€äº›ä¸œè¥¿ï¼Œä¹Ÿè¦å†™ã€‚ æˆ‘å¾ˆé«˜å…´æ”¶åˆ°æ‚¨çš„è¯„è®ºï¼ <br><br><h3> èšè‹¯ä¹™çƒ¯ </h3><br> æ˜¯çš„ï¼Œæ˜¯çš„ï¼Œæˆ‘ä»ç„¶åœ¨è¿™é‡Œï¼Œå› ä¸ºæˆ‘æ²¡æœ‰å¿˜è®°ç³»æ•°ã€‚ å¯¹äºå­—ç¬¦ä¸²s1ï¼Œç¼–ç è¡¨çš„é‡é‡ä¸º48ä¸ªå­—èŠ‚-æ¯”åŸå§‹æ–‡ä»¶å¤§å¾—å¤šï¼Œå¹¶ä¸”ä»–ä»¬æ²¡æœ‰å¿˜è®°å…¶ä»–é›¶ï¼ˆæ·»åŠ çš„é›¶çš„æ•°é‡ä¸º7ï¼‰=&gt;å‹ç¼©ç‡å°†å°äº1ï¼š176 /ï¼ˆ65 + 48 * 8 + 7ï¼‰= 0.38ã€‚ å¦‚æœæ‚¨ä¹Ÿæ³¨æ„åˆ°äº†è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆæ‚¨<s>å°±ä¸ä¼š</s>åšå¾—å¾ˆå¥½ã€‚ æ˜¯çš„ï¼Œå¯¹äºå°æ–‡ä»¶ï¼Œæ­¤å®ç°æ•ˆç‡æä½ã€‚ ä½†æ˜¯å¤§æ–‡ä»¶ä¼šæ€æ ·ï¼Ÿ æ–‡ä»¶å¤§å°è¿œè¿œè¶…è¿‡äº†ç¼–ç è¡¨çš„å¤§å°ã€‚ åœ¨è¿™é‡Œï¼Œç®—æ³•å¯ä»¥æ­£å¸¸å·¥ä½œï¼ ä¾‹å¦‚ï¼Œå¯¹äºã€Š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æµ®å£«å¾·ã€‹ç‹¬ç™½ï¼Œ</a>å­˜æ¡£è€…ç»™å‡ºçš„çœŸå®ï¼ˆæœªç†æƒ³åŒ–ï¼‰ç³»æ•°ç­‰äº1.46ï¼Œå‡ ä¹æ˜¯åŸæ¥çš„ä¸€åŠï¼ æ˜¯çš„ï¼Œè¯¥æ–‡ä»¶åº”è¯¥æ˜¯è‹±æ–‡çš„ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438512/">https://habr.com/ru/post/zh-CN438512/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438498/index.html">å¦‚ä½•å¿«é€Ÿå‡†å¤‡é¢è¯•ï¼Œè¿™å°†å¯¹ç®—æ³•å’Œä¿¡æ¯å¤„ç†æŠ€æœ¯äº§ç”Ÿç–‘é—®ï¼Ÿ</a></li>
<li><a href="../zh-CN438500/index.html">å¥½çš„æ–¹é¢ï¼šæ“å¤©æŸ±å¦‚ä½•å°†é‡‘å£«é¡¿å’ŒHyperXå¸¦å…¥CES 2019</a></li>
<li><a href="../zh-CN438506/index.html">æˆ‘çš„ç¬¬äºŒä¸ªå†¬å¤©åœ¨æ¯”åˆ©æ—¶æ²¡æœ‰é›ªæˆ–åœ°æ–¹è¡Œæ”¿å®˜</a></li>
<li><a href="../zh-CN438508/index.html">äººè„‘æ´»åŠ¨é¦–å…ˆè¢«ç¿»è¯‘æˆæ¸…æ™°çš„è¯­éŸ³</a></li>
<li><a href="../zh-CN438510/index.html">æ€»ä½“ä¸ç»§æ‰¿ï¼Œå›¢é˜Ÿæ¨¡å¼å’Œæ¸¸æˆå¼€å‘</a></li>
<li><a href="../zh-CN438514/index.html">æˆ‘å¦‚ä½•åœ¨Sberbankå‘†äº†ä¸€å¹´</a></li>
<li><a href="../zh-CN438516/index.html">ä½•æ—¶å°†æ•°ç»„çš„é•¿åº¦ä¿å­˜åˆ°Cï¼ƒä¸­çš„å±€éƒ¨å˜é‡ä¸­</a></li>
<li><a href="../zh-CN438518/index.html">åˆ›å»ºæ‚¨çš„jsfiddleï¼Œç¬¬2éƒ¨åˆ†</a></li>
<li><a href="../zh-CN438522/index.html">æˆ˜ç•¥å‡è¡¡å™¨</a></li>
<li><a href="../zh-CN438524/index.html">Flutteråº”ç”¨ç¨‹åºæ¶æ„101ï¼šé¦™è‰ï¼ŒèŒƒå›´æ¨¡å‹ï¼ŒBLoC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>