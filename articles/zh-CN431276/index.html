<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🃏 🧘🏾 ✌🏾 为何英特尔处理器的功耗超出预期：散热要求和涡轮模式 🖐🏼 🚞 👨🏽‍💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="近来，个人电脑自组装的爱好者社区充满了能源消耗这一主题。 英特尔最新的八核处理器的TDP为 95瓦，但是用户正在观察它们的功耗为150-180瓦，这没有任何意义。 在本指南中，我们将向您解释为什么会发生这种情况，以及为什么会给铁评的作者带来如此多的问题。 

 什么是TDP（热设计功率，散热器要求）...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>为何英特尔处理器的功耗超出预期：散热要求和涡轮模式</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431276/"><img src="https://habrastorage.org/getpro/habr/post_images/0d5/996/568/0d599656876498476895cb8893ca749d.jpg"><br><br> 近来，个人电脑自组装的爱好者社区充满了能源消耗这一主题。 英特尔最新的八核处理器的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TDP为</a> 95瓦，但是用户正在观察它们的功耗为150-180瓦，这没有任何意义。 在本指南中，我们将向您解释为什么会发生这种情况，以及为什么会给铁评的作者带来如此多的问题。 <br><br><h2> 什么是TDP（热设计功率，散热器要求） </h2><br> 对于每个处理器，英特尔通常会考虑一定的散热器，以一定的功率保证一定的工作频率。 大多数人将TDP等同于最大功耗，因为在计算中需要耗散的处理器的热功率等于其消耗的功率。 通常，TDP指示此功率的大小。 <br><a name="habracut"></a><br> 但是，严格来说，TDP是指冷却器的功耗能力。  TDP是保证该性能的最小冷却器功能。 一部分能量通过插槽和主板散发，这意味着散热器的额定功率可能低于TDP，但在大多数讨论中，TDP和功耗通常是同一回事：处理器在负载下消耗了多少能量。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/41c/ef0/4f7/41cef04f7ede2c4d1c33b0a7a6174327.png"><br><br> 作为TDP系统的一部分，您可以将其安装在固件中。 如果处理器使用TDP作为最大功率限制，那么我们将看到相同的测量程序如何为具有多个内核的高功率处理器生成相似的图形。 <br><br> 近年来，英特尔仅使用了TDP这样的定义。 对于任何给定的处理器，英特尔保证特定功率-TDP的工作频率（基准频率）。 这意味着65 W Core i7-8700类型的处理器具有3.2 GHz的正常频率和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">turbo模式下的</a> 4.7 GHz，只有在以3.2 GHz的频率运行时，才能保证消耗高达65 W的功率。 英特尔不保证上述3.2 GHz和65瓦功率的有效运行。 <br><br> 除了基本指标外，英特尔还使用Turbo模式。  Core i7-8700之类的东西可以在4.7 GHz Turbo模式下显示，同时消耗的能量比在3.2 GHz下运行的处理器要多得多。  Core i7-8700处理器上所有内核的Turbo模式的工作频率为4.3 GHz，远远超过保证的3.2 GHz。 当turbo模式不降低到基本频率时，情况就很复杂。 也就是说，如果处理器在TDP恒定过量的情况下工作，那么您购买的65 W散热器（或随附的散热器）将成为瓶颈。 如果您需要更高的速度，则需要扔出一个这样的冷却器并采取更好的措施。 <br><br> 但是，制造商不会告诉您这一点。 如果涡轮模式的冷却不够，并且处理器达到温度上限，那么大多数现代处理器将切换到功率限制模式，从而降低速度以保持在指定的功耗范围内。 结果，快速处理器无法达到其极限。 <br><br><h2> 所以TDP没什么意思吗？ 为什么现在这成为一个问题？ </h2><br> 在过去的十年中，使用术语TDP的方法没有改变，但是处理器开始以不同的方式使用其能源预算。 最近出现的频率在4 GHz以上的六核和八核消费类处理器意味着高负载的新处理器超过了宣布的TDP。 过去，我们看到指定额定功率为95瓦的四核处理器即使在Turbo模式下满负荷情况下也仅使用50瓦。 而且，如果我们添加内核，并且不更改程序包上的TDP名称，则应该进行一些更改。 <br><br><h2> 包装上没有的秘密号码 </h2><br> 在每个处理器中，英特尔根据功能和预期的运行模式确定几种能级。 但是，所有这些能量级别和功能都可以在固件级别进行调整，因此OEM可以决定这些处理器在系统中的工作方式。 结果，系统中处理器的能耗值是一个非常模糊的指标。 <br><br> 为简单起见，您可以遵循三个重要的值。 英特尔将其称为PL1（能量级别1），PL2（能量级别2）和T（Tau）。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e52/b31/d11/e52b31d11fdc1aaaac10f1b6a51fc122.png"><br><br> 从长远来看，PL1是有效的均匀预期能耗。 实际上，PL1通常被定义为TDP处理器。 也就是说，如果TDP为80瓦，则PL1为80瓦。 <br><br>  PL2-短期最大处理器功耗。 该值高于PL1，并且处理器在负载下进入此状态，从而允许其使用高达PL2最大值的加速模式。 这意味着，如果英特尔为处理器确定了几种加速模式，则它们只有在PL2达到最大功耗时才能工作。 在PL1模式下，turbo不起作用。 <br><br>  Tau是一个临时变量。 它确定处理器在回滚到PL1之前必须保持PL2模式多长时间。  Tau与处理器的功率和温度无关（预计达到温度极限时，将使用另一组不同的超低电压和频率值，并且PL1 / PL2系统将停止工作）。 <br><br> 以下是英特尔的官方定义： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c99/d3d/174/c99d3d174843f082a18778ff260afeaa.png"><br><br> 让我们分析处理器上的重负载情况。 <br><br> 首先，它开始在PL2模式下工作。 如果负载是单线程的，则必须达到规范中指示的turbo上限。 通常，一个内核的功耗不会接近整个芯片的PL2值。 如果我们继续加载内核，处理器将根据英特尔确定的基于核的值通过降低Turbo模式频率做出响应。 如果处理器的功耗达到PL2的值，则将其频率更改为不超过PL2。 <br><br> 当系统长时间处于严重负载（“ Tau”秒）时，固件应切换到PL1作为新的功率限制。  Turbo表不再使用-它们仅适用于PL2模式。 <br><br> 如果功耗超过PL1，则会更改频率和电压，以使能耗保持在这些限制之内。 即，在负载下的操作持续时间内，处理器整体上将频率从状态PL2降低到状态PL1。 这意味着处理器的温度应降低，这将延长处理器的寿命。 <br><br>  PL1模式一直工作到负载消失并且内核进入非活动状态一定时间（通常最多5秒）。 之后，当出现另一重负载时，可以再次打开PL2模式。 <br><br> 以下是一些数量示例-英特尔在各种处理器的规格中列出了几个选项。 例如，我选择了Core i7-8700K。 此过程适用以下条件： <br><br> <code>PL1 = TDP = 95  <br> PL2 = TDP * 1.25 = 118.75  <br> Tau = 8 </code> <br> <br><img src="https://habrastorage.org/getpro/habr/post_images/be6/fed/110/be6fed11003a0009767ab63851d8fc87.png"><br><br> 在这种情况下，系统应能够在八秒钟内加速至119瓦，然后再次回落至95瓦。 几代Intel处理器在大多数情况下都一直在这样工作，实际上，这并不重要，因为即使在满载情况下，处理器的功耗通常也常常比PL1低得多。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c83/883/1cc/c838831cc576fa17f1863e10cb64bac7.png"><br><br> 但是，所有这些废话都始于主板制造商，因为可以在固件中配置PL1，PL2和Tau。 例如，在上图中，您可以从PL2中删除限制，然后将PL1分配给165 W和95W。 <br><br><h2> 随机数世界 </h2><br> 我将主要讨论消费电子产品。 通常在散热受限的条件下（例如笔记本电脑或小型PC）仔细监视PL1，PL2和Tau。 我熟悉几种功能强大且同时时尚的PC选件，其中PL2也与TDP等同，以便处理器可以略微加速，但不会达到一个或两个内核的负载超出TDP的程度。 <br><br> 但是，在我们对六核处理器激增后的CPU的评论中，我们经常开始看到数字远远大于PL1或PL2，并且这种消耗会无限期地持续下去，除非它超过了温度极限。 为什么会这样呢？ <br><br> 在任何现代BIOS中，尤其是主要的主板制造商，都将进行限制功率（短期和长期）和持续时间的设置。 在大多数情况下，默认情况下，用户不知道将其设置为什么值，因为将在其中写入Auto，这是一个代码符号，表示“我们知道为他们分配什么值，不用担心”。 制造商会将这些值写入内存并使用它们，但用户只会看到“自动”。 结果，您可以将PL2分配给4096 W，并使Tau非常大，例如65535或-1（无穷大-取决于BIOS变体）。 这意味着CPU将在不超过温度限制的情况下不间断地以Turbo模式运行。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/004/f97/8e0/004f978e017fe20f365522dd88a7dae3.png"><br><br> 制造商为什么要这样做？ 尽管特定制造商的特定原因可能有所不同，但可能有许多原因。 <br><br> 首先，这意味着用户可以一直保持Turbo模式，并且每个内核每秒都将以Turbo模式运行。 在评估中，或者通过指标衡量用户的效果时，效果评估将大放异彩， <br><br> 其次，正在为此开发产品。 英特尔通常会在每次启动时默认确定主板的规格（它们甚至有自己的主板，它们以零售价出售），一定数量的电源相位和预期寿命。 制造商显然可以实现他们的选择：更多的电源阶段，更强大的阶段，用于提高效率的特殊电源等。 如果他们的主板可以连续支持所有内核的Turbo模式，那为什么不呢？ <br><br> 第三，更昂贵的主板型号的制造商知道发烧友会为他们使用改进的冷却系统。 如果处理器的功耗超过160瓦，并且用户使用了不错的冷却系统，则所有内核上的Turbo模式将改善产品的外观。 英特尔标准是为公司推荐的散热器定义的。 <br><br><h2> 那么，对谁信任，有什么区别呢？ </h2><br> 英特尔为其零件设定标准。  PL1，PL2，Tau，主板图，固件设置-对于所有内容，英特尔建议使用默认值。 其中有些是公开的，例如，英特尔在文件中指出的那些，有些是保密的（无论我们怎么问，英特尔都不会告诉我们这些信息）。 但是，这些仍然是推荐值。 最后，主板制造商可以随心所欲。 他们这样做。 <br><br> 结果，例如，对我来说测试设备变得更加困难。 不同的用户将希望我们的设置为： <br>  1.英特尔推荐， <br>  2.喜欢开箱即用， <br>  3.转到最大。 <br><br> 而且，当然，英特尔的建议所提供的指标要比开箱即用的要少得多，而“最大化”选项本身就说明了问题。 <br><br> 值得注意的是，到目前为止，在所有CPU评估中的所有测试中，硬件都是在“开箱即用”的设置下运行的，而不是“ Intel推荐”的设置。 <br><br> 为了提供有关测量值的一些信息，我们使用了功能强大的CPU和 <br> 在25到30秒的满载测试中得到以下结果： <br><br><table><tbody><tr><th>  Anandtech </th><th>  2级 </th><th> 头 </th><th>  PL1 </th><th> 结果 </th></tr><tr><td> 无限的 </td><td>  4096瓦 </td><td>  999秒 </td><td>  4096瓦 </td><td>  100％ </td></tr><tr><td> 英特尔规格165W </td><td>  207瓦 </td><td>  8秒 </td><td>  165瓦 </td><td>  98％ </td></tr><tr><td> 恒定165w </td><td>  165瓦 </td><td>  1秒 </td><td>  165瓦 </td><td>  94％ </td></tr><tr><td> 英特尔规格95W </td><td>  118瓦 </td><td>  8秒 </td><td>  95瓦 </td><td>  84％ </td></tr><tr><td> 恒定95w </td><td>  95瓦 </td><td>  1秒 </td><td>  95瓦 </td><td>  71％ </td></tr></tbody></table><br><br> 最近，已经注意到一些主板制造商正在改变其PL1 / PL2 / Tau的策略，并将Tau值降低到合理的水平，例如30秒。 在此类主板上进行速度测量时，尽管这些结果更接近英特尔规格，但用户获得的结果却比平时少。 <br><br> 事实是，当主板设置为“自动”时，制造商通常不会透露该值的确切值。 结果，描述这种设备的操作非常困难。 并且这些值可能会因安装的处理器而异。 <br><br> 通常，我们使用开箱即用的设置进行测试，但使用制造商建议值的内存除外。 我们相信，这是最诚实的方式，可以告诉读者在几乎没有任何设置更改时可以依靠什么速度。 实际上，这通常意味着PL2设置为非常大的值，而Tau设置为非常长的值。 当温度保持在设定的极限内时，我们会不断遇到涡轮模式。 <br><br><h2> 目前的状况，我们该怎么办 </h2><br> 至少自从Kaby Lake发布以来，我一直想写一篇类似的文章。 消费类主板中的大多数处理器都可以使用无限的PL2，多年来一直认为这是正常的。 只有通过测试Core i9-9900K，我们才开始发现一些奇怪的东西。 上周我们在有关新款Xeon E的文章中说，我们的Supermicro主板确实遵循了英特尔的建议。 似乎更商业化/服务器的主板将遵循英特尔的规范，这似乎是显而易见的，但是我个人是第一次看到这种情况。 显然，按照这些规范的消费电子板不起作用，也不起作用。 我要说的是，英特尔在消费类主板上的测试结果（以及AMD的Intel Intel处理器的测试结果）也不符合Intel的规格。 <br><br> 那么我们该怎么办呢？ 我要说的是，英特尔需要在包装盒上放置两个电源名称： <br><ul><li>  PL2的TDP峰值 </li><li>  TDP长期用于PL1。 </li></ul><br><br> 这样，英特尔和其他公司将能够解释峰值功耗和基本频率。 <br><br> 如果用户希望更换消费类主板，那么将很难做到。 所有制造商都希望彼此领先，因此我们面临着多核Turbo选项（默认情况下启用）之类的问题。 制造商更喜欢“无限PL2”路径，因为这使他们可以爬到性能图表的顶部。 但是散热能力有限的笔记本电脑通常具有自己的选项PL1，PL2和Tau，并且通常严格对应于这些参数。 <br><br> 问题是，英特尔规范对于英特尔台式机处理器有多重要？ 如果我们需要从字面上遵循这些建议，也许我们会采取进一步的措施，仅使用库存冷却器？ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN431276/">https://habr.com/ru/post/zh-CN431276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN431264/index.html">麻省理工学院的课程“计算机系统安全”。 第19讲：“匿名网络”，第2部分（Tor网络创建者的讲演）</a></li>
<li><a href="../zh-CN431266/index.html">麻省理工学院的课程“计算机系统安全”。 第19讲：“匿名网络”，第3部分（Tor网络创建者的讲演）</a></li>
<li><a href="../zh-CN431270/index.html">如何组装Apple 1并为其编写游戏</a></li>
<li><a href="../zh-CN431272/index.html">房屋中的最佳温度或如何在后室内无线安装恒温器</a></li>
<li><a href="../zh-CN431274/index.html">圣诞老人对自己说：在假期期间应用程序开发人员如何赚取最大利润？</a></li>
<li><a href="../zh-CN431278/index.html">您可能会被机器人吓住了-但此问题有解决方案</a></li>
<li><a href="../zh-CN431280/index.html">夜视：Pixel手机在黑暗中如何看待</a></li>
<li><a href="../zh-CN431282/index.html">慢软件</a></li>
<li><a href="../zh-CN431284/index.html">百年纪念系列：创造力与可用性</a></li>
<li><a href="../zh-CN431286/index.html">被遗忘的欺诈：世界电力系统骗局</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>