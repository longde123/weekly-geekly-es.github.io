<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЮ┐ ЁЯЩЗЁЯП╗ ЁЯСЖЁЯП╛ .NET рдХреЛрд░ рдореЗрдВ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди (рдЕрдм рди рдХреЗрд╡рд▓ SIMD) ЁЯЧТя╕П ЁЯПТ тЬФя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд░рд┐рдЪрдп 


 рдХреБрдЫ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рд╣рдордиреЗ рддрдп рдХрд┐рдпрд╛ рдХрд┐ рдпрд╣ .NET рдХреЛрдб рдореЗрдВ SIMD рдХреЛрдб рдХреЛ рд╕рдкреЛрд░реНрдЯ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ ред рд╣рдордиреЗ System.Numerics рдирд╛рдорд╕реНрдерд╛рди рдХреЛ Vector<T> Vector4 Vector<...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>.NET рдХреЛрд░ рдореЗрдВ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди (рдЕрдм рди рдХреЗрд╡рд▓ SIMD)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/clrium/blog/467663/"><h2 id="vvedenie">  рдкрд░рд┐рдЪрдп </h2><br><p> рдХреБрдЫ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣рдордиреЗ рддрдп рдХрд┐рдпрд╛ рдХрд┐ рдпрд╣ .NET рдХреЛрдб рдореЗрдВ SIMD рдХреЛрдб рдХреЛ рд╕рдкреЛрд░реНрдЯ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ</a> ред  рд╣рдордиреЗ <code>System.Numerics</code> рдирд╛рдорд╕реНрдерд╛рди рдХреЛ <code>Vector&lt;T&gt;</code> <code>Vector4</code> <code>Vector&lt;T&gt;</code> <code>Vector4</code> <code>Vector&lt;T&gt;</code> рдФрд░ <code>Vector&lt;T&gt;</code> ред  рдпреЗ рдкреНрд░рдХрд╛рд░ рдЬрдм рднреА рд╕рдВрднрд╡ рд╣реЛ рд╡реЗрдХреНрдЯрд░ рдирд┐рд░реНрджреЗрд╢ рдмрдирд╛рдиреЗ, рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдФрд░ рд╣реЗрд░рдлреЗрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдорд╛рдиреНрдп-рдЙрджреНрджреЗрд╢реНрдп рдПрдкреАрдЖрдИ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВред  рд╡реЗ рдЙрди рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд╕рдВрдЧрддрддрд╛ рднреА рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЙрдкрдпреБрдХреНрдд рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдиреЗ рдХрдо рд╕реЗ рдХрдо рд░рд┐рдлреИрдХреНрдЯрд░рд┐рдВрдЧ рдХреЗ рд╕рд╛рде, рдХрдИ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреЛ рд╡реЗрдХреНрдЯрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреАред  рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреА рд╡реНрдпрд╛рдкрдХрддрд╛ рдЖрдзреБрдирд┐рдХ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░, рд╡реЗрдХреНрдЯрд░ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдкрд░ рд╕рднреА рдЙрдкрд▓рдмреНрдз рдХрд╛ рдкреВрд░рд╛ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡реЗрджрди рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдмрдирд╛ рджреЗрддреА рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдзреБрдирд┐рдХ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХрдИ рд╡рд┐рд╢рд┐рд╖реНрдЯ, рдЧреИрд░-рд╡реЗрдХреНрдЯрд░, рдирд┐рд░реНрджреЗрд╢ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рдХрд╛рдлреА рд╕реБрдзрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдХреИрд╕реЗ рд╣рдордиреЗ .NET рдХреЛрд░ 3.0 рдореЗрдВ рдЗрди рд╕реАрдорд╛рдУрдВ рдХреЛ рджрд░рдХрд┐рдирд╛рд░ рдХрд┐рдпрд╛ред </p><br><p><img src="https://habrastorage.org/webt/4d/mx/lt/4dmxlt8xgnpgncvellsujvoe_rk.jpeg"><br>  <strong>рдиреЛрдЯ:</strong> <em><strong>рдЕрднреА рддрдХ рдЗрдВрдЯреНрд░рд┐рд╕рд┐рдХреНрд╕</strong> рдЕрдиреБрд╡рд╛рдж рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╕реНрдерд╛рдкрд┐рдд рд╢рдмреНрдж <strong>рдирд╣реАрдВ рд╣реИ</strong> ред</em>  <em>рд▓реЗрдЦ рдХреЗ рдЕрдВрдд рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рд╡рд┐рдХрд▓реНрдк рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реЛрдЯ рд╣реИред</em>  <em>рдпрджрд┐ рд╣рдо рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрдирддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рд▓реЗрдЦ рдХреЛ рдмрджрд▓ рджреЗрдВрдЧреЗ</em> </p><a name="habracut"></a><br><h2 id="chto-takoe-vstroennye-funkcii">  рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХрд╛рд░реНрдп рдХреНрдпрд╛ рд╣реИрдВ </h2><br><p>  .NET рдХреЛрд░ 3.0 рдореЗрдВ, рд╣рдордиреЗ <em>рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдмрд┐рд▓реНрдЯ-рдЗрди рдлрд╝рдВрдХреНрд╢рди</em> (рджреВрд░ WF) рдирд╛рдордХ рдирдИ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЬреЛрдбрд╝реА рд╣реИред  рдпрд╣ <em>рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛</em> рдХрдИ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдирд┐рд░реНрджреЗрд╢реЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ, рдЬрд┐рдиреНрд╣реЗрдВ рдХреЗрд╡рд▓ рдЕрдзрд┐рдХ рд╕рд╛рдорд╛рдиреНрдп-рдЙрджреНрджреЗрд╢реНрдп рддрдВрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╕реНрддреБрдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╡реЗ рдореМрдЬреВрджрд╛ SIMD рдирд┐рд░реНрджреЗрд╢реЛрдВ рд╕реЗ рдЕрд▓рдЧ рд╣реИрдВ рдХрд┐ рдЙрдирдХреЗ рдкрд╛рд╕ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЙрджреНрджреЗрд╢реНрдп рдирд╣реАрдВ рд╣реИ (рдирдП <em>WFs</em> рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдирд╣реАрдВ рд╣реИрдВ рдФрд░ рдЙрдирдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд╕рдВрдЧрддрддрд╛ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддреА рд╣реИ)ред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╡реЗ .NET рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рд╕реАрдзреЗ рдордВрдЪ рдФрд░ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред  рдореМрдЬреВрджрд╛ SIMD рдлрд╝рдВрдХреНрд╢рдВрд╕, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо, рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕рдВрдЧрддрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рд╡реЗ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕реЗ рдереЛрдбрд╝рд╛ рд╕рд╛рд░ рд╣реЛрддреЗ рд╣реИрдВред  рдпрд╣ рдЕрдореВрд░реНрдд рдорд╣рдВрдЧрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдХреБрдЫ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рдкреНрд░рдХрдЯреАрдХрд░рдг рдХреЛ рд░реЛрдХ рд╕рдХрддрд╛ рд╣реИ (рдЬрдм, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ, рдпрд╛ рд╕рднреА рд▓рдХреНрд╖реНрдп рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдкрд░ рдЕрдиреБрдХрд░рдг рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ)ред </p><br><p>  рдирдП <em>рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдлрд╝рдВрдХреНрд╢рди</em> рдФрд░ рд╕рдорд░реНрдерд┐рдд рдкреНрд░рдХрд╛рд░, <code>System.Runtime.Intrinsics</code> рдЕрдВрддрд░реНрдЧрдд рд╕реНрдерд┐рдд рд╣реИрдВред  .NET рдХреЛрд░ 3.0 рдХреЗ рд▓рд┐рдП, рдЗрд╕ рд╕рдордп, рдПрдХ <code>System.Runtime.Intrinsics.X86</code> ред  рд╣рдо рдЕрдиреНрдп рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдЬреИрд╕реЗ <code>System.Runtime.Intrinsics.Arm</code> рд▓рд┐рдП <em>рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХрд╛</em> рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВред </p><br><p>  рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдирд╛рдорд╕реНрдерд╛рдиреЛрдВ рдХреЗ рддрд╣рдд, <em>WF рдХреЛ</em> рдЙрди рдХрдХреНрд╖рд╛рдУрдВ рдореЗрдВ рд╡рд░реНрдЧреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рддрд╛рд░реНрдХрд┐рдХ рд░реВрдк рд╕реЗ рдПрдХреАрдХреГрдд рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдирд┐рд░реНрджреЗрд╢реЛрдВ (рдЕрдХреНрд╕рд░ рдирд┐рд░реНрджреЗрд╢ рд╕реЗрдЯ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ (ISA)) рдХреЗ рд╕рдореВрд╣реЛрдВ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдЧ рдПрдХ <code>IsSupported</code> рд╕рдВрдкрддреНрддрд┐ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ <code>IsSupported</code> рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреЛрдб рдЬрд┐рд╕ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИ рд╡рд╣ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рдЗрд╕ рд╕реЗрдЯ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкреНрд░рддреНрдпреЗрдХ рдРрд╕реЗ рд╡рд░реНрдЧ рдореЗрдВ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рд╕рдВрдЧрдд рд╕реЗрдЯ рдореЗрдВ рдореИрдк рдХреА рдЧрдИ рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИред  рдХрднреА-рдХрднреА рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдЙрдкрд╡рд░реНрдЧ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рд╕рдорд╛рди рдЕрдиреБрджреЗрд╢ рд╕реЗрдЯ рдХреЗ рдПрдХ рднрд╛рдЧ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рджреНрд╡рд╛рд░рд╛ рд╕реАрдорд┐рдд (рд╕рдорд░реНрдерд┐рдд) рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>Lzcnt</code> рд╡рд░реНрдЧ <em>рдЕрдЧреНрд░рдгреА рд╢реВрдиреНрдп рдЧрдгрдирд╛ рдХреЗ</em> рд▓рд┐рдП <em>рдирд┐рд░реНрджреЗрд╢реЛрдВ</em> рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдЙрд╕рдХреЗ рдкрд╛рд╕ <code>X64</code> 64 рдирд╛рдордХ рдПрдХ рдЙрдкрд╡рд░реНрдЧ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХреЗрд╡рд▓ 64-рдмрд┐рдЯ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рд╡рд╛рд▓реЗ рдорд╢реАрдиреЛрдВ рдкрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЗрди рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рд░реВрдк рд╢рд╛рдорд┐рд▓ рд╣реИред </p><br><p>  рдЗрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рд╡рд░реНрдЧ рдкреНрд░рдХреГрддрд┐ рдореЗрдВ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ <code>Lzcnt.X64.IsSupported</code> рд╕рд╣реА рд╣реИ, рддреЛ <code>Lzcnt.IsSupported</code> рднреА рд╕рд╣реА рд▓реМрдЯрдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдЙрдкрд╡рд░реНрдЧ рд╣реИред  рдпрд╛, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ <code>Sse2.IsSupported</code> рд╕рд╣реА рд╣реИ, рддреЛ <code>Sse.IsSupported</code> рд╕рд╣реА <code>Sse.IsSupported</code> рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ <code>Sse2</code> рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ <code>Sse</code> рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ <code>Sse</code> ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рд╡рд░реНрдЧ рдирд╛рдореЛрдВ рдХреА рд╕рдорд╛рдирддрд╛ рдЙрдирдХреЗ рд╡рдВрд╢рд╛рдиреБрдЧрдд рдкрджрд╛рдиреБрдХреНрд░рдо рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрдиреЗ рдХрд╛ рд╕реВрдЪрдХ рдирд╣реАрдВ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>Bmi2</code> рд╡рд┐рд░рд╛рд╕рдд <code>Bmi2</code> рдирд╣реАрдВ рдорд┐рд▓рд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢ рдХреЗ рдЗрди рджреЛ рд╕реЗрдЯреЛрдВ рдХреЗ рд▓рд┐рдП <code>IsSupported</code> рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЧрдП рдорд╛рди рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реЛрдВрдЧреЗред  рдЗрди рд╡рд░реНрдЧреЛрдВ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рдореВрд▓рднреВрдд рд╕рд┐рджреНрдзрд╛рдВрдд рдЖрдИрдПрд╕рдП рд╡рд┐рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреА рд╕реНрдкрд╖реНрдЯ рдкреНрд░рд╕реНрддреБрддрд┐ рдереАред  SSE2 рдХреЛ SSE1 рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЬреЛ рд╡рд░реНрдЧ рдЙрдирдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВ рд╡реЗ рд╡рд┐рд░рд╛рд╕рдд рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрдВред  рдЙрд╕реА рд╕рдордп, рдмреАрдПрдордЖрдИ 2 рдХреЛ рдмреАрдПрдордЖрдИ 1 рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рд╡рд┐рд░рд╛рд╕рдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ред  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрдкрд░реЛрдХреНрдд рдПрдкреАрдЖрдИ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИред </p><br><pre> <code class="plaintext hljs">namespace System.Runtime.Intrinsics.X86 { public abstract class Sse { public static bool IsSupported { get; } public static Vector128&lt;float&gt; Add(Vector128&lt;float&gt; left, Vector128&lt;float&gt; right); // Additional APIs public abstract class X64 { public static bool IsSupported { get; } public static long ConvertToInt64(Vector128&lt;float&gt; value); // Additional APIs } } public abstract class Sse2 : Sse { public static new bool IsSupported { get; } public static Vector128&lt;byte&gt; Add(Vector128&lt;byte&gt; left, Vector128&lt;byte&gt; right); // Additional APIs public new abstract class X64 : Sse.X64 { public static bool IsSupported { get; } public static long ConvertToInt64(Vector128&lt;double&gt; value); // Additional APIs } } }</code> </pre> <br><p>  рдЖрдк рдирд┐рдореНрди рд▓рд┐рдВрдХ <a href="">source.dot.net рдпрд╛ GitHub рдкрд░ dotnet / coreclr рдкрд░</a> рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рдЕрдзрд┐рдХ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ </p><br><p>  <code>IsSupported</code> рдЬрд╛рдБрдЪреЛрдВ <code>IsSupported</code> JIT рдХрдВрдкрд╛рдЗрд▓рд░ рджреНрд╡рд╛рд░рд╛ рд░рди-рдЯрд╛рдЗрдо рд╕реНрдерд┐рд░рд╛рдВрдХ (рдЬрдм рдЕрдиреБрдХреВрд▓рди рд╕рдХреНрд╖рдо рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ) рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдХрдИ ISAs, рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдпрд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд░реЙрд╕-рд╕рдВрдХрд▓рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ <code>if</code> рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдЕрдкреНрд░рдпреБрдХреНрдд рдХреЛрдб рд╢рд╛рдЦрд╛рдПрдВ (рдпрд╛рдиреА рдЙрди рд╢рд╛рдЦрд╛рдПрдВ рдЬреЛ рд╕рд╢рд░реНрдд рд╡рд┐рд╡рд░рдг рдореЗрдВ рдЪрд░ рдХреЗ рдореВрд▓реНрдп рдХреЗ рдХрд╛рд░рдг рдкрд╣реБрдВрдЪ рдпреЛрдЧреНрдп рдирд╣реАрдВ рд╣реИрдВ) рдХреЛ рдореВрд▓ рдХреЛрдб рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рдкрд░ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рд╕рдВрдмрдВрдзрд┐рдд <code>IsSupported</code> рдХрд╛ рд╕рддреНрдпрд╛рдкрди рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХрдорд╛рдВрдб рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдкрд╣рд▓реЗ рд╣реЛред  рдпрджрд┐ рдРрд╕рд╛ рдХреЛрдИ рдЪреЗрдХ рдирд╣реАрдВ рд╣реИ, рддреЛ рдХреЛрдб рдЬреЛ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо / рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдкрд░ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рдпреЗ рдХрдорд╛рдВрдб рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИрдВ, рдПрдХ <code>PlatformNotSupportedException</code> рд░рдирдЯрд╛рдЗрдо рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рджреЗрдЧрд╛ред </p><br><h2 id="kakie-preimuschestva-oni-dayut">  рд╡реЗ рдХреНрдпрд╛ рд▓рд╛рдн рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ? </h2><br><p>  рдмреЗрд╢рдХ, <em>рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХрд╛рд░реНрдп</em> рд╕рднреА рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ <em>рд╣реИрдВ</em> , рд▓реЗрдХрд┐рди рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдЧрдгрдирд╛рдУрдВ рдХреЗ рд╕рд╛рде рд▓реЛрдб рдХрд┐рдП рдЧрдП рд╕рдВрдЪрд╛рд▓рди рдореЗрдВ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  <code>CoreFX</code> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>ML.NET</code></a> рдЗрди рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдореЗрдореЛрд░реА рдХреЛ рдХреЙрдкреА рдХрд░рдиреЗ, рдХрд┐рд╕реА рдПрд░реЗ рдпрд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рдХрд┐рд╕реА рдПрд▓рд┐рдореЗрдВрдЯ рдХреЗ рдЗрдВрдбреЗрдХреНрд╕ рдХреЛ рдЦреЛрдЬрдиреЗ, рдЗрдореЗрдЬ рдХрд╛ рдЖрдХрд╛рд░ рдмрджрд▓рдиреЗ, рдпрд╛ рд╡реИрдХреНрдЯрд░ / рдореИрдЯреНрд░реЗрд╕ / рдЯреЗрдирд░реНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВред  рдХреБрдЫ рдХреЛрдб рдХрд╛ рдореИрдиреБрдЕрд▓ рд╡реИрд░рд┐рдПрд╢рди рдЬреЛ рдПрдХ рдЕрдбрд╝рдЪрди рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд╛рдордиреЗ рдЖрдпрд╛ рдерд╛, рд╡рд╣ рд╕реБрдирдиреЗ рдореЗрдВ рднреА рд╕рд░рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдХреЛрдб рдХрд╛ рд╡реИрд╢реНрд╡реАрдХрд░рдг, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдПрдХ рд╕рдордп рдореЗрдВ рдХрдИ рдСрдкрд░реЗрд╢рди рдХрд░рдирд╛ рд╣реИ, рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, SIMD рдирд┐рд░реНрджреЗрд╢реЛрдВ (рдПрдХ рдирд┐рд░реНрджреЗрд╢ рдзрд╛рд░рд╛, рдХрдИ рдбреЗрдЯрд╛ рд╕реНрдЯреНрд░реАрдо) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред </p><br><p>  рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдЖрдк рдХреБрдЫ рдХреЛрдб рдХреЛ рд╕рджрд┐рд╢ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрдВ, рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░реВрдкрд░реЗрдЦрд╛ рддреИрдпрд╛рд░ рдХрд░рдиреА рд╣реЛрдЧреА рдХрд┐ рдпрд╣ рдХреЛрдб рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ "рд╣реЙрдЯ рд╕реНрдкреЙрдЯ" рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ (рдФрд░, рдЗрд╕рд▓рд┐рдП, рдЖрдкрдХрд╛ рдЕрдиреБрдХреВрд▓рди рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдЧрд╛)ред  рд╡реЗрдХреНрдЯрд░рд╛рдЗрдЬреЗрд╢рди рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдореЗрдВ рдкреНрд░реЛрдлрд╛рдЗрд▓рд┐рдВрдЧ рдХрд░рдирд╛ рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕рднреА рдХреЛрдб рдХреЗ рд╡реЗрдХреНрдЯрд░рд╛рдЗрдЬреЗрд╢рди рд╕реЗ рдЙрддреНрдкрд╛рджрдХрддрд╛ рдирд╣реАрдВ рдмрдврд╝рддреА рд╣реИред </p><br><h2 id="vektorizaciya-prostogo-algoritma">  рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рд╡реИрд╢реНрд╡реАрдХрд░рдг </h2><br><p>  <em>рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХрд╛рд░реНрдпреЛрдВ</em> рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <em>,</em> рд╣рдо рдХрд┐рд╕реА рд╕рд░рдгреА рдпрд╛ рд╢реНрд░реЗрдгреА рдХреЗ рд╕рднреА рддрддреНрд╡реЛрдВ рдХреЛ рд╕рдореЗрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рд▓реЗрддреЗ рд╣реИрдВред  рдЗрд╕ рддрд░рд╣ рдХрд╛ рдХреЛрдб рд╡реИрд╢реНрд╡реАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрджрд░реНрд╢ рдЙрдореНрдореАрджрд╡рд╛рд░ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдкреНрд░рддреНрдпреЗрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдкрд░, рдПрдХ рд╣реА рддреБрдЪреНрдЫ рдСрдкрд░реЗрд╢рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">public int Sum(ReadOnlySpan&lt;int&gt; source) { int result = 0; for (int i = 0; i &lt; source.Length; i++) { result += source[i]; } return result; }</code> </pre> <br><p>  рдпрд╣ рдХреЛрдб рдХрд╛рдлреА рд╕рд░рд▓ рдФрд░ рд╕реАрдзрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдмрдбрд╝реЗ рдЗрдирдкреБрдЯ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдзреАрдорд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐  рдкреНрд░рддрд┐ рдЪрд▓рдирд╛ рдХреЗрд╡рд▓ рдПрдХ рддреБрдЪреНрдЫ рдСрдкрд░реЗрд╢рди рдХрд░рддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">BenchmarkDotNet=v0.11.5, OS=Windows 10.0.18362 AMD Ryzen 7 1800X, 1 CPU, 16 logical and 8 physical cores .NET Core SDK=3.0.100-preview9-013775 [Host] : .NET Core 3.0.0-preview9-19410-10 (CoreCLR 4.700.19.40902, CoreFX 4.700.19.40917), 64bit RyuJIT [AttachedDebugger] DefaultJob : .NET Core 3.0.0-preview9-19410-10 (CoreCLR 4.700.19.40902, CoreFX 4.700.19.40917), 64bit RyuJIT</code> </pre> <br><div class="scrollable-table"><table><thead><tr><th>  рд╡рд┐рдзрд┐ </th><th>  рдЧрд┐рдирддреА </th><th>  рдореАрди </th><th>  рддреНрд░реБрдЯрд┐ </th><th>  StdDev </th></tr></thead><tbody><tr><td>  рдпреЛрдЧ </td><td>  1 </td><td>  2.477 рдПрди.рдПрд╕. </td><td>  0.0192 рдПрди.рдПрд╕. </td><td>  0.0179 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  2 </td><td>  2.164 рдПрди.рдПрд╕. </td><td>  0.0265 рдПрди.рдПрд╕. </td><td>  0.0235 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  4 </td><td>  рей.реиреирек рдПрди.рдПрд╕. </td><td>  0.0302 рдПрди.рдПрд╕. </td><td>  0.0267 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  8 </td><td>  4.347 рдПрди.рдПрд╕. </td><td>  0.0665 рдПрди.рдПрд╕. </td><td>  0.0622 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  16 </td><td>  8.444 рдПрди.рдПрд╕. </td><td>  0.2042 рдПрди.рдПрд╕. </td><td>  0.3734 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  32 </td><td>  13.963 рдПрди.рдПрд╕. </td><td>  0.2182 рдПрди.рдПрд╕. </td><td>  0.2041 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  64 </td><td>  50.374 рдПрди.рдПрд╕. </td><td>  0.2955 рдПрди.рдПрд╕. </td><td>  0.2620 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  128 </td><td>  60.139 рдПрди.рдПрд╕. </td><td>  0.3890 рдПрди.рдПрд╕. </td><td>  0.3639 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  256 </td><td>  106.416 рдПрди.рдПрд╕. </td><td>  0.6404 рдПрди.рдПрд╕. </td><td>  0.5990 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  512 </td><td>  291.450 рдПрди.рдПрд╕. </td><td>  3.5148 рдПрди.рдПрд╕. </td><td>  3.2878 рдПрдирдПрд╕ </td></tr><tr><td>  рдпреЛрдЧ </td><td>  1024 </td><td>  574.243 рдПрди.рдПрд╕. </td><td>  9.5851 рдПрди.рдПрд╕. </td><td>  8.4970 рд░реБрдкрдпреЗ </td></tr><tr><td>  рдпреЛрдЧ </td><td>  2048 </td><td>  1 137.819 рдПрдирдПрд╕ </td><td>  5.9363 рдПрди.рдПрд╕. </td><td>  5.5529 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  4096 </td><td>  2 228.341 рдПрди.рдПрд╕. </td><td>  22.8882 рдПрди.рдПрд╕. </td><td>  21.4097 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  8192 </td><td>  2 973.040 рдПрди.рдПрд╕. </td><td>  14.2863 рдПрди.рдПрд╕. </td><td>  12.6644 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  16384 </td><td>  5 883.504 рдПрди.рдПрд╕. </td><td>  15.9619 рдПрди.рдПрд╕. </td><td>  14.9308 рдПрди.рдПрд╕. </td></tr><tr><td>  рдпреЛрдЧ </td><td>  32768 </td><td>  11 699.237 рдПрди.рдПрд╕. </td><td>  104.0970 рдПрди.рдПрд╕. </td><td>  97.3724 рдПрди.рдПрд╕. </td></tr></tbody></table></div><br><h2 id="povyshenie-proizvoditelnosti-za-schet-razvertyvaniya-ciklov">  рддреИрдирд╛рддреА рдЪрдХреНрд░реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрддреНрдкрд╛рджрдХрддрд╛ рдмрдврд╝рд╛рдПрдБ </h2><br><p>  рдХреЛрдб рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ рдХреЗ рд▓рд┐рдП рдЖрдзреБрдирд┐рдХ рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рдкрд╛рд╕ рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдХрд▓реНрдк рд╣реИрдВред  рдПрдХрд▓-рдереНрд░реЗрдбреЗрдб рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП, рдПрдХ рдРрд╕рд╛ рд╡рд┐рдХрд▓реНрдк рдПрдХ рдкреНрд░реЛрд╕реЗрд╕рд░ рдЪрдХреНрд░ рдореЗрдВ рдХрдИ рдЖрджрд┐рдо рд╕рдВрдЪрд╛рд▓рди рдХрд░рдирд╛ рд╣реИред </p><br><p>  рдЕрдзрд┐рдХрд╛рдВрд╢ рдЖрдзреБрдирд┐рдХ рдкреНрд░реЛрд╕реЗрд╕рд░ рдПрдХ рдШрдбрд╝реА рдЪрдХреНрд░ (рдЗрд╖реНрдЯрддрдо рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ) рдореЗрдВ рдЪрд╛рд░ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдВрдЪрд╛рд▓рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдХреЛрдб рдХреЗ рд╕рд╣реА "рд▓реЗрдЖрдЙрдЯ" рдХреЗ рд╕рд╛рде, рдЖрдк рдХрднреА-рдХрднреА рдПрдХрд▓ рдереНрд░реЗрдбреЗрдб рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ рднреА рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдпрджреНрдпрдкрд┐ рдЬреЗрдЖрдИрдЯреА рдЕрдкрдиреЗ рджрдо рдкрд░ рдЕрдирд┐рдпрдВрддреНрд░рд┐рдд рд▓реВрдк рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЬреЗрдЖрдИрдЯреА рдЙрддреНрдкрдиреНрди рдХреЛрдб рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рдХрд╛рд░рдг рдЗрд╕ рддрд░рд╣ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрдиреЗ рдореЗрдВ рд░реВрдврд╝рд┐рд╡рд╛рджреА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдХреЛрдб рдореЗрдВ, рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд▓реВрдк рдХреА рддреИрдирд╛рддреА рдХрд░рдирд╛ рдлрд╛рдпрджреЗрдордВрдж рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЖрдк рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рд▓реВрдк рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">public unsafe int SumUnrolled(ReadOnlySpan&lt;int&gt; source) { int result = 0; int i = 0; int lastBlockIndex = source.Length - (source.Length % 4); // Pin source so we can elide the bounds checks fixed (int* pSource = source) { while (i &lt; lastBlockIndex) { result += pSource[i + 0]; result += pSource[i + 1]; result += pSource[i + 2]; result += pSource[i + 3]; i += 4; } while (i &lt; source.Length) { result += pSource[i]; i += 1; } } return result; }</code> </pre> <br><p>  рдпрд╣ рдХреЛрдб рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХрд╛ рдмреЗрд╣рддрд░ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЫреЛрдЯреЗ рдЫреЛрд░реЛрдВ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдХреЛрдб рдереЛрдбрд╝рд╛ рдзреАрдорд╛ рдЪрд▓рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЖрда рддрддреНрд╡реЛрдВ рдХреЗ рдЗрдирдкреБрдЯ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдпрд╣ рдкреНрд░рд╡реГрддреНрддрд┐ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмрджрд▓ рд░рд╣реА рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдирд┐рд╖реНрдкрд╛рджрди рдХреА рдЧрддрд┐ рдмрдврд╝рдиреА рд╢реБрд░реВ рд╣реЛ рдЬрд╛рддреА рд╣реИ (32 рд╣рдЬрд╛рд░ рддрддреНрд╡реЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рдХреЛрдб рдХрд╛ рдирд┐рд╖реНрдкрд╛рджрди рд╕рдордп, рдореВрд▓ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рдордп рд╕реЗ 26% рдХрдо рд╣реИ)ред  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдРрд╕реЗ рдЕрдиреБрдХреВрд▓рди рд╣рдореЗрд╢рд╛ рдЙрддреНрдкрд╛рджрдХрддрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЯрд╛рдЗрдк <code>float</code> рддрддреНрд╡реЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрдЧреНрд░рд╣ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп, рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо <code>float</code> "рддреИрдирд╛рдд" рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдореВрд▓ рдПрдХ рдХреЗ рд╕рдорд╛рди рдЧрддрд┐ рд╣реЛрддреА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдкреНрд░реЛрдлрд╛рдЗрд▓рд┐рдВрдЧ рдХреЛ рдЕрдВрдЬрд╛рдо рджреЗрдирд╛ рдмрд╣реБрдд рдЬрд░реВрд░реА рд╣реИред </p><br><div class="scrollable-table"><table><thead><tr><th>  рд╡рд┐рдзрд┐ </th><th>  рдЧрд┐рдирддреА </th><th>  рдореАрди </th><th>  рддреНрд░реБрдЯрд┐ </th><th>  StdDev </th></tr></thead><tbody><tr><td>  SumUnrolled </td><td>  1 </td><td>  2.922 рдПрди.рдПрд╕. </td><td>  0.0651 рдПрди.рдПрд╕. </td><td>  0.0609 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  2 </td><td>  3.576 рдПрди.рдПрд╕. </td><td>  0.0116 рдПрди.рдПрд╕. </td><td>  0.0109 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  4 </td><td>  3.708 рдПрди.рдПрд╕. </td><td>  0.0157 рдПрди.рдПрд╕. </td><td>  0.0139 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  8 </td><td>  4.832 рдПрди.рдПрд╕. </td><td>  0.0486 рдПрди.рдПрд╕. </td><td>  0.0454 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  16 </td><td>  7.490 рдПрди.рдПрд╕. </td><td>  0.1131 рдПрди.рдПрд╕. </td><td>  0.1058 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  32 </td><td>  11.277 рдПрди.рдПрд╕. </td><td>  0.0910 рдПрди.рдПрд╕. </td><td>  0.0851 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  64 </td><td>  19.761 рдПрди.рдПрд╕. </td><td>  0.2016 рдПрди.рдПрд╕. </td><td>  0.1885 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  128 </td><td>  36.639 рдПрди.рдПрд╕. </td><td>  0.3043 рдПрди.рдПрд╕. </td><td>  0.2847 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  256 </td><td>  77.969 рдПрди.рдПрд╕. </td><td>  0.8409 рдПрди.рдПрд╕. </td><td>  0.7866 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  512 </td><td>  146.357 рдПрди.рдПрд╕. </td><td>  1.3209 рдПрди.рдПрд╕. </td><td>  1.2356 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  1024 </td><td>  287.354 рдПрди.рдПрд╕. </td><td>  0.9223 рдПрди.рдПрд╕. </td><td>  0.8627 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  2048 </td><td>  566.405 рдПрди.рдПрд╕. </td><td>  4.0155 рдПрди.рдПрд╕. </td><td>  3.5596 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  4096 </td><td>  1 131.016 рдПрди.рдПрд╕. </td><td>  7.3601 рдПрдирдПрд╕ </td><td>  6.5246 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  8192 </td><td>  2 259.836 рдПрди.рдПрд╕. </td><td>  8.6539 рдПрди.рдПрд╕. </td><td>  8.0949 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  16384 </td><td>  4 501.295 рдПрди.рдПрд╕. </td><td>  6.4186 рдПрди.рдПрд╕. </td><td>  6.0040 рдПрди.рдПрд╕. </td></tr><tr><td>  SumUnrolled </td><td>  32768 </td><td>  8 979.690 рдПрди.рдПрд╕. </td><td>  19.5265 рдПрди.рдПрд╕. </td><td>  18.2651 рдПрди.рдПрд╕. </td></tr></tbody></table></div><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4b7/180/775/4b71807758bdae4be2fba1eb6af8360b.png"></p><br><h2 id="povyshenie-proizvoditelnosti-za-schet-vektorizacii-ciklov">  рд▓реВрдк рд╡реЗрдХреНрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрддреНрдкрд╛рджрдХрддрд╛ рдмрдврд╝рд╛рдПрдВ </h2><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдо рдЕрднреА рднреА рдЗрд╕ рдХреЛрдб рдХреЛ рдереЛрдбрд╝рд╛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  SIMD рдирд┐рд░реНрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдзреБрдирд┐рдХ рдкреНрд░реЛрд╕реЗрд╕рд░ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдПрдХ рдФрд░ рд╡рд┐рдХрд▓реНрдк рд╣реИред  рдПрдХ рдирд┐рд░реНрджреЗрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╡реЗ рдЖрдкрдХреЛ рдПрдХ рд╣реА рдШрдбрд╝реА рдЪрдХреНрд░ рдореЗрдВ рдХрдИ рдСрдкрд░реЗрд╢рди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред  рдпрд╣ рдкреНрд░рддреНрдпрдХреНрд╖ рд▓реВрдк рдЕрдирдлреЛрд▓реНрдбрд┐рдВрдЧ рд╕реЗ рдмреЗрд╣рддрд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдПрдХ рд╣реА рдХрд╛рдо рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЙрддреНрдкрдиреНрди рдХреЛрдб рдХреА рдереЛрдбрд╝реА рдорд╛рддреНрд░рд╛ рдХреЗ рд╕рд╛рдеред </p><br><p>  рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдСрдкрд░реЗрд╢рди, рдПрдХ рддреИрдирд╛рдд рдЪрдХреНрд░ рдореЗрдВ, 4 рдмрд╛рдЗрдЯреНрд╕ рд▓реЗрддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рд░реВрдк рдореЗрдВ рдЬреЛрдбрд╝ рдХреЗ 4 рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП 16 рдмрд╛рдЗрдЯреНрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕реА рд╕рдордп, SIMD рдЕрддрд┐рд░рд┐рдХреНрдд рдирд┐рд░реНрджреЗрд╢ 4 рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдВрдЪрд╛рд▓рди рднреА рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ 4 рдмрд╛рдЗрдЯреНрд╕ рд▓реЗрддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕реАрдкреАрдпреВ рдХреЗ рд▓рд┐рдП рдХрдо рдирд┐рд░реНрджреЗрд╢ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ SIMD рдЕрдиреБрджреЗрд╢ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕реАрдкреАрдпреВ <em>рдзрд╛рд░рдгрд╛</em> рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЕрдиреБрдХреВрд▓рди рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЗрд╕ рд▓реЗрдЦ рдХреЗ рджрд╛рдпрд░реЗ рд╕реЗ рдкрд░реЗ рд╣реИред  рдЗрд╕рд╕реЗ рднреА рдмреЗрд╣рддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдЖрдзреБрдирд┐рдХ рдкреНрд░реЛрд╕реЗрд╕рд░ рдПрдХ рд╕рдордп рдореЗрдВ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ SIMD рдЕрдиреБрджреЗрд╢ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЕрд░реНрдерд╛рдд, рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЖрдк рдПрдХ рдорд┐рд╢реНрд░рд┐рдд рд░рдгрдиреАрддрд┐ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрд╕реА рд╕рдордп рдПрдХ рдЖрдВрд╢рд┐рдХ рдЪрдХреНрд░ рд╕реНрдХреИрди рдФрд░ рд╡реЗрдХреНрдЯрд░рд╛рдЗрдЬреЗрд╢рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП <code>Vector&lt;T&gt;</code> рд╕рд╛рдорд╛рдиреНрдп рдЙрджреНрджреЗрд╢реНрдп рд╡рд░реНрдЧ рдХреЛ рджреЗрдЦрдХрд░ рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рд╡рд╣ рдирдИ <em>рдбрдмреНрд▓реНрдпреВрдПрдлрдПрд╕ рдХреА</em> рддрд░рд╣, <em>рд╕рд┐рдордбреА</em> рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЛ рдПрдореНрдмреЗрдб рдХрд░реЗрдЧрд╛, рд▓реЗрдХрд┐рди рд╕рд╛рде рд╣реА, рдЗрд╕ рд╡рд░реНрдЧ рдХреА рдмрд╣реБрдореБрдЦреА рдкреНрд░рддрд┐рднрд╛ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рд╡рд╣ "рдореИрдиреБрдЕрд▓" рдХреЛрдбрд┐рдВрдЧ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдХреЛрдб рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">public int SumVectorT(ReadOnlySpan&lt;int&gt; source) { int result = 0; Vector&lt;int&gt; vresult = Vector&lt;int&gt;.Zero; int i = 0; int lastBlockIndex = source.Length - (source.Length % Vector&lt;int&gt;.Count); while (i &lt; lastBlockIndex) { vresult += new Vector&lt;int&gt;(source.Slice(i)); i += Vector&lt;int&gt;.Count; } for (int n = 0; n &lt; Vector&lt;int&gt;.Count; n++) { result += vresult[n]; } while (i &lt; source.Length) { result += source[i]; i += 1; } return result; }</code> </pre> <br><p>  рдпрд╣ рдХреЛрдб рддреЗрдЬреА рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдВрддрд┐рдо рд░рд╛рд╢рд┐ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╕рдордп рд╣рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рддрддреНрд╡ рдХреЛ рдЕрд▓рдЧ рд╕реЗ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, <code>Vector&lt;T&gt;</code> рдореЗрдВ рдПрдХ рд╕рдЯреАрдХ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЖрдХрд╛рд░ рдирд╣реАрдВ рд╣реИ, рдФрд░ рднрд┐рдиреНрди рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрди рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рдирдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреЛрдб рдЪрд▓ рд░рд╣рд╛ рд╣реИред  <em>рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдлрд╝рдВрдХреНрд╢рди</em> рдЕрддрд┐рд░рд┐рдХреНрдд <em>рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛</em> рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдЗрд╕ рдХреЛрдб рдХреЛ рдереЛрдбрд╝рд╛ рд╕реБрдзрд╛рд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдереЛрдбрд╝рд╛ рддреЗрдЬрд╝ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЛрдб рдЬрдЯрд┐рд▓рддрд╛ рдФрд░ рд░рдЦрд░рдЦрд╛рд╡ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреА рд▓рд╛рдЧрдд рдкрд░)ред </p><br><div class="scrollable-table"><table><thead><tr><th>  рд╡рд┐рдзрд┐ </th><th>  рдЧрд┐рдирддреА </th><th>  рдореАрди </th><th>  рддреНрд░реБрдЯрд┐ </th><th>  StdDev </th></tr></thead><tbody><tr><td>  SumVectorT </td><td>  1 </td><td>  4.517 рдПрди.рдПрд╕. </td><td>  0.0752 рдПрди.рдПрд╕. </td><td>  0.0703 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  2 </td><td>  4.853 рдПрди.рдПрд╕. </td><td>  0.0609 рдПрди.рдПрд╕. </td><td>  0.0570 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  4 </td><td>  5.047 рдПрди.рдПрд╕. </td><td>  0.0909 рдПрди.рдПрд╕. </td><td>  0.0850 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  8 </td><td>  5.671 рдПрди.рдПрд╕. </td><td>  0.0251 рдПрди.рдПрд╕. </td><td>  0.0223 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  16 </td><td>  6.579 рдПрди.рдПрд╕. </td><td>  0.0330 рдПрди.рдПрд╕. </td><td>  0.0276 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  32 </td><td>  10.460 рдПрди.рдПрд╕. </td><td>  0.0241 рдПрди.рдПрд╕. </td><td>  0.0226 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  64 </td><td>  17.148 рдПрди.рдПрд╕. </td><td>  рдХреНрд░рд╛рдЙрди 7 рдПрди.рдПрд╕. </td><td>  0.0381 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  128 </td><td>  23.239 рдПрди.рдПрд╕. </td><td>  0.0853 рдПрди.рдПрд╕. </td><td>  0.0756 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  256 </td><td>  62.146 рдПрди.рдПрд╕. </td><td>  0.8319 рдПрди.рдПрд╕. </td><td>  0.7782 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  512 </td><td>  114.863 рдПрди.рдПрд╕. </td><td>  0.4175 рдПрди.рдПрд╕. </td><td>  0.3906 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  1024 </td><td>  172.129 рдПрди.рдПрд╕. </td><td>  1.8673 рдПрди.рдПрд╕. </td><td>  1.7467 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  2048 </td><td>  429.722 рдПрди.рдПрд╕. </td><td>  1.0461 рдПрди.рдПрд╕. </td><td>  0.9786 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  4096 </td><td>  654.209 рдПрди.рдПрд╕. </td><td>  3.6215 рдПрди.рдПрд╕. </td><td>  3.0241 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  8192 </td><td>  1 675.046 рдПрди.рдПрд╕. </td><td>  14.5231 рдПрди.рдПрд╕. </td><td>  13.5849 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorT </td><td>  16384 </td><td>  2 514.778 рдПрдирдПрд╕ </td><td>  5.3369 рдПрди.рдПрд╕. </td><td>  4.9921 рдПрдирдПрд╕ </td></tr><tr><td>  SumVectorT </td><td>  32768 </td><td>  6,689.829 рдПрдирдПрд╕ </td><td>  13.9947 рдПрди.рдПрд╕. </td><td>  13.0906 рдПрди.рдПрд╕. </td></tr></tbody></table></div><br><p><img src="https://habrastorage.org/getpro/habr/post_images/00e/0be/5d4/00e0be5d469067af095f34beccf8c45c.png"></p><br><p>  <em>рдиреЛрдЯ</em> рдЗрд╕ рдЖрд▓реЗрдЦ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдЖрдВрддрд░рд┐рдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ ( <code>COMPlus_SIMD16ByteOnly=1</code> ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <code>Vector&lt;T&gt;</code> рдЖрдХрд╛рд░ рдХреЛ 16 рдмрд╛рдЗрдЯреНрд╕ рдХреЗ рдмрд░рд╛рдмрд░ рдмрдирд╛рдпрд╛ред  рдЗрд╕ рдЯреНрд╡реАрдХ рдиреЗ <code>SumVectorT</code> рд╕рд╛рде <code>SumVectorizedSse</code> рддреБрд▓рдирд╛ рдХрд░рддреЗ рд╕рдордп рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рдХрд┐рдпрд╛ рдФрд░ рд╣рдореЗрдВ рдХреЛрдб рдХреЛ рд╕рд░рд▓ рд░рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреАред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдпрд╣ рдПрдХ рд╕рд╢рд░реНрдд рдХреВрдж рд▓рд┐рдЦрдиреЗ рд╕реЗ <code>if (Avx2.IsSupported) { }</code> ред  рдпрд╣ рдХреЛрдб <code>Sse2</code> рдХреЗ рдХреЛрдб рдХреЗ рд▓рдЧрднрдЧ рд╕рдорд╛рди рд╣реИ, рд▓реЗрдХрд┐рди <code>Vector256&lt;T&gt;</code> (32-рдмрд╛рдЗрдЯ) рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рд▓реВрдк рдХреЗ рдПрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдореЗрдВ рдФрд░ рднреА рдЕрдзрд┐рдХ рддрддреНрд╡реЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдирдП <em>рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХрд╛рд░реНрдпреЛрдВ</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рдХреЛрдб рдХреЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">public int SumVectorized(ReadOnlySpan&lt;int&gt; source) { if (Sse2.IsSupported) { return SumVectorizedSse2(source); } else { return SumVectorT(source); } } public unsafe int SumVectorizedSse2(ReadOnlySpan&lt;int&gt; source) { int result; fixed (int* pSource = source) { Vector128&lt;int&gt; vresult = Vector128&lt;int&gt;.Zero; int i = 0; int lastBlockIndex = source.Length - (source.Length % 4); while (i &lt; lastBlockIndex) { vresult = Sse2.Add(vresult, Sse2.LoadVector128(pSource + i)); i += 4; } if (Ssse3.IsSupported) { vresult = Ssse3.HorizontalAdd(vresult, vresult); vresult = Ssse3.HorizontalAdd(vresult, vresult); } else { vresult = Sse2.Add(vresult, Sse2.Shuffle(vresult, 0x4E)); vresult = Sse2.Add(vresult, Sse2.Shuffle(vresult, 0xB1)); } result = vresult.ToScalar(); while (i &lt; source.Length) { result += pSource[i]; i += 1; } } return result; }</code> </pre> <br><p>  рдпрд╣ рдХреЛрдб, рдлрд┐рд░ рд╕реЗ рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдмрд╕реЗ рдЫреЛрдЯреЗ рдЗрдирдкреБрдЯ рд╕реЗрдЯреЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░ рд╕рднреА рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рддреЗрдЬ рд╣реИред  32 рд╣рдЬрд╛рд░ рддрддреНрд╡реЛрдВ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдХреЛрдб рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдЪрдХреНрд░ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ 75% рддреЗрдЬреА рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕реНрд░реЛрдд рдХреЛрдб рдХреА рддреБрд▓рдирд╛ рдореЗрдВ 81% рдЕрдзрд┐рдХ рддреЗрдЬреА рд╕реЗ рд╣реЛрддрд╛ рд╣реИред </p><br><p>  рдЖрдкрдиреЗ рджреЗрдЦрд╛ рдХрд┐ рд╣рдордиреЗ рдХреБрдЫ <code>IsSupported</code> рдЪреЗрдХ рд▓рд┐рдЦреЗред  рдкрд╣рд▓реЗ рдПрдХ рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рд╡рд░реНрддрдорд╛рди рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ <em>рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдлрд╝рдВрдХреНрд╢рди</em> рдХреЗ рдЖрд╡рд╢реНрдпрдХ рд╕реЗрдЯ рдХрд╛ рд╕рдорд░реНрдерди <em>рдХрд░рддрд╛ рд╣реИ</em> , рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рд╕реНрд╡реАрдк рдФрд░ <code>Vector&lt;T&gt;</code> рд╕рдВрдпреЛрдЬрди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдиреБрдХреВрд▓рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдмрд╛рдж рд╡рд╛рд▓рд╛ рд╡рд┐рдХрд▓реНрдк рдПрдЖрд░рдПрдо / рдПрдЖрд░рдПрдо 64 рдЬреИрд╕реЗ рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдХреЗ рд▓рд┐рдП рдЪреБрдирд╛ рдЬрд╛рдПрдЧрд╛ рдЬреЛ рдЖрд╡рд╢реНрдпрдХ рдирд┐рд░реНрджреЗрд╢ рд╕реЗрдЯ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рдпрд╛ рдпрджрд┐ рд╕реЗрдЯ рдХреЛ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХреЗ рд▓рд┐рдП рдЕрдХреНрд╖рдо рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  <code>SumVectorizedSse2</code> рд╡рд┐рдзрд┐ рдореЗрдВ рджреВрд╕рд░рд╛ <code>IsSupported</code> рдкрд░реАрдХреНрд╖рдг, рдЕрддрд┐рд░рд┐рдХреНрдд рдЕрдиреБрдХреВрд▓рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрджрд┐ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ <code>Ssse3</code> рдирд┐рд░реНрджреЗрд╢ <code>Ssse3</code> рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЕрдиреНрдпрдерд╛, рдЕрдзрд┐рдХрд╛рдВрд╢ рддрд░реНрдХ рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рд▓реВрдк рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рд╣реИрдВред  <code>Vector128&lt;T&gt;</code> рдПрдХ 128-рдмрд┐рдЯ рдкреНрд░рдХрд╛рд░ рд╣реИ рдЬрд┐рд╕рдореЗрдВ <code>Vector128&lt;T&gt;.Count</code> 128 <code>Vector128&lt;T&gt;.Count</code> ред рддрддреНрд╡ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, <code>uint</code> , рдЬреЛ рд╕реНрд╡рдпрдВ 32-рдмрд┐рдЯ рд╣реИ, рдореЗрдВ 4 (128/32) рддрддреНрд╡ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рд╣реИ рдХрд┐ рд╣рдордиреЗ рд▓реВрдк рдХреИрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ред </p><br><div class="scrollable-table"><table><thead><tr><th>  рд╡рд┐рдзрд┐ </th><th>  рдЧрд┐рдирддреА </th><th>  рдореАрди </th><th>  рддреНрд░реБрдЯрд┐ </th><th>  StdDev </th></tr></thead><tbody><tr><td>  SumVectorized </td><td>  1 </td><td>  4.555 рдПрди.рдПрд╕. </td><td>  0.0192 рдПрди.рдПрд╕. </td><td>  0.0179 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  2 </td><td>  4.848 рдПрди.рдПрд╕. </td><td>  0.0147 рдПрди.рдПрд╕. </td><td>  0.0137 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  4 </td><td>  5.381 рдПрди.рдПрд╕. </td><td>  0.0210 рдПрди.рдПрд╕. </td><td>  0.0186 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  8 </td><td>  4.838 рдПрди.рдПрд╕. </td><td>  0.0209 рдПрди.рдПрд╕. </td><td>  0.0186 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  16 </td><td>  5.107 рдПрди.рдПрд╕. </td><td>  0.0175 рдПрди.рдПрд╕. </td><td>  0.0146 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  32 </td><td>  5.646 рдПрди.рдПрд╕. </td><td>  0.0230 рдПрди.рдПрд╕. </td><td>  0.0204 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  64 </td><td>  6.763 рдПрди.рдПрд╕. </td><td>  0.0338 рдПрди.рдПрд╕. </td><td>  0.0316 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  128 </td><td>  9.308 рдПрди.рдПрд╕. </td><td>  0.1041 рдПрди.рдПрд╕. </td><td>  0.0870 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  256 </td><td>  15.634 рдПрди.рдПрд╕. </td><td>  0.0927 рдПрди.рдПрд╕. </td><td>  0.0821 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  512 </td><td>  34.706 рдПрдирдПрд╕ </td><td>  0.2851 рдПрди.рдПрд╕. </td><td>  0.2381 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  1024 </td><td>  68.110 рдПрди.рдПрд╕. </td><td>  0.4016 рдПрди.рдПрд╕. </td><td>  0.3756 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  2048 </td><td>  136.533 рдПрди.рдПрд╕. </td><td>  1.3104 рдПрди.рдПрд╕. </td><td>  1.2257 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  4096 </td><td>  277.930 рдПрди.рдПрд╕. </td><td>  0.5913 рдПрди.рдПрд╕. </td><td>  0.5531 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  8192 </td><td>  554.720 рдПрди.рдПрд╕. </td><td>  3.5133 рдПрди.рдПрд╕. </td><td>  3.2864 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  16384 </td><td>  1 110.730 рдПрди.рдПрд╕. </td><td>  рей.рейрежрекрей рдПрди.рдПрд╕. </td><td>  3.0909 рдПрди.рдПрд╕. </td></tr><tr><td>  SumVectorized </td><td>  32768 </td><td>  2 200.996 рдПрди.рдПрд╕. </td><td>  21.0538 рдПрди.рдПрд╕. </td><td>  19.6938 рдПрди.рдПрд╕. </td></tr></tbody></table></div><br><p><img src="https://habrastorage.org/getpro/habr/post_images/311/e70/320/311e7032050337fe946103244e749076.png"></p><br><h2 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><p>  рдирдП <em>рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдлрд╝рдВрдХреНрд╢рди</em> рдЖрдкрдХреЛ рдЙрд╕ рдорд╢реАрди рдХреА рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рджреЗрддреЗ рд╣реИрдВ, рдЬрд┐рд╕ рдкрд░ рдЖрдк рдХреЛрдб рдЪрд▓рд╛рддреЗ рд╣реИрдВред  X86 рдФрд░ X64 рдХреЗ рд▓рд┐рдП 15 рд╕реЗрдЯреЛрдВ рдкрд░ рд▓рдЧрднрдЧ 1,500 API рд╡рд┐рддрд░рд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВ, рдПрдХ рд▓реЗрдЦ рдореЗрдВ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╣реИрдВред  рдЕрдбрд╝рдЪрдиреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдХреЛ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдХрд░рдХреЗ, рдЖрдк рдЙрд╕ рдХреЛрдб рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╡реИрд╢реНрд╡реАрдХрд░рдг рд╕реЗ рд▓рд╛рднрд╛рдиреНрд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдПрдХ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрддрд╛ рд╣реИред  рдРрд╕реЗ рдХрдИ рдкрд░рд┐рджреГрд╢реНрдп рд╣реИрдВ рдЬрд╣рд╛рдВ рд╡реЗрдХреНрдЯрд░рд╛рдЗрдЬрд╝реЗрд╢рди рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд▓реВрдк рдЕрдирдлреЙрд▓реНрдбрд┐рдВрдЧ рдХреЗрд╡рд▓ рд╢реБрд░реБрдЖрдд рд╣реИред </p><br><p>  рдЬреЛ рдХреЛрдИ рднреА рдЕрдзрд┐рдХ рдЙрджрд╛рд╣рд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ, рд╡рд╣ рдлреНрд░реЗрдорд╡рд░реНрдХ рдореЗрдВ <em>рдирд┐рд░реНрдорд┐рдд рдХрд╛рд░реНрдпреЛрдВ</em> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрдЯрдиреЗрдЯ</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрд╕реНрдкрдиреЗрдЯ</a> рджреЗрдЦреЗрдВ), рдпрд╛ рдЕрдиреНрдп рд╕рд╛рдореБрджрд╛рдпрд┐рдХ рд▓реЗрдЦреЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рджреЗрдЦ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рдпрджреНрдпрдкрд┐ рд╡рд░реНрддрдорд╛рди <em>рдбрдмреНрд▓реНрдпреВрдПрдл</em> рд╡рд┐рд╢рд╛рд▓ рд╣реИрдВ, рдлрд┐рд░ рднреА рдмрд╣реБрдд рдЕрдзрд┐рдХ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдкреЗрд╢ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рдкреЗрд╢ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GitHub рдкрд░ dotnet / corefx рдХреЗ</a> рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреЗ рдПрдкреАрдЖрдИ рдЕрдиреБрд░реЛрдз рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВред  рдПрдкреАрдЖрдИ рд╕рдореАрдХреНрд╖рд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ <a href="">рдпрд╣рд╛рдВ</a> рд╡рд░реНрдгрд┐рдд <a href="">рд╣реИ</a> рдФрд░ рдЪрд░рдг 1 рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдПрдкреАрдЖрдИ рдЕрдиреБрд░реЛрдз рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдЪреНрдЫрд╛ рдЙрджрд╛рд╣рд░рдг</a> рд╣реИред </p><br><h2 id="osobye-blagodarnosti">  рд╡рд┐рд╢реЗрд╖ рдзрдиреНрдпрд╡рд╛рдж </h2><br><p>  рдореИрдВ рд╣рдорд╛рд░реЗ рд╕рдореБрджрд╛рдп <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Fei рдкреЗрдВрдЧ (@fiigii)</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Jacek Blaszczynski (@ 4creators)</a> рдХреЗ рд╕рджрд╕реНрдпреЛрдВ рдХреЛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╡реНрдпрдХреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдХрд┐ рд╡реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрд╕рдПрдлрдПрдл</a> рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдореЗрдВ рдЙрдирдХреА рдорджрдж рдХреЗ рд▓рд┐рдП, рд╕рд╛рде рд╣реА рд╕рдореБрджрд╛рдп рдХреЗ рд╕рднреА рд╕рджрд╕реНрдпреЛрдВ рдХреЛ рдЗрд╕ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рд╡рд┐рдХрд╛рд╕, рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдФрд░ рдЖрд╕рд╛рдиреА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдореВрд▓реНрдпрд╡рд╛рди рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдВред </p><br><hr><br><h3 id="posleslovie-k-perevodu">  рдЕрдиреБрд╡рд╛рдж рдХреЗ рдмрд╛рдж </h3><br><p>  рдореИрдВ .NET рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдкрд╕рдВрдж рдХрд░рддрд╛ рд╣реВрдВ, рдФрд░, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рд╕реА # рднрд╛рд╖рд╛ред  C ++ рдХреА рджреБрдирд┐рдпрд╛ рд╕реЗ рдЖ рд░рд╣рд╛ рд╣реИ, рдФрд░ рдбреЗрд▓реНрдлреА рдФрд░ рдЬрд╛рд╡рд╛ рдореЗрдВ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрдиреЗ рдХрд╛ рдмрд╣реБрдд рдХрдо рдЕрдиреБрднрд╡ рд╣реИ, рдореИрдВ C # рдореЗрдВ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдореЗрдВ рдмрд╣реБрдд рд╕рд╣рдЬ рдерд╛ред  2006 рдореЗрдВ, рдпрд╣ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ (рднрд╛рд╖рд╛ рд╕реНрд╡рдпрдВ) рдореБрдЭреЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХрдЪрд░рд╛ рд╕рдВрдЧреНрд░рд╣ рдФрд░ рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ рдЬрд╛рд╡рд╛ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдФрд░ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд▓рдЧ рд░рд╣реА рдереАред  рдЗрд╕рд▓рд┐рдП, рдореЗрд░реА рдкрд╕рдВрдж C # рдкрд░ рдЧрд┐рд░ рдЧрдИ, рдФрд░ рдореБрдЭреЗ рдЗрд╕рдХрд╛ рдкрдЫрддрд╛рд╡рд╛ рдирд╣реАрдВ рдерд╛ред  рдХрд┐рд╕реА рднрд╛рд╖рд╛ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рдкрд╣рд▓рд╛ рдЪрд░рдг рдХреЗрд╡рд▓ рдЙрд╕рдХрд╛ рд╕реНрд╡рд░реВрдк рдерд╛ред  2006 рддрдХ, C # рдиреЗ рдЙрд╕ рд╕рдордп рдХреА рд╕рд░реНрд╡рд╢реНрд░реЗрд╖реНрда рднрд╛рд╖рд╛рдУрдВ рдФрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо: C ++ / Java / Delphi рдореЗрдВ рдореМрдЬреВрдж рд╕рднреА рд╕рд░реНрд╡рд╢реНрд░реЗрд╖реНрда рдХреЛ рдЕрд╡рд╢реЛрд╖рд┐рдд рдХрд░ рд▓рд┐рдпрд╛ред  2010 рдореЗрдВ, рдПрдл # рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╣реЛ рдЧрдпрд╛ред  рдпрд╣ .NET рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ рдЗрд╕реЗ рдкреЗрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рдХреНрд╖реНрдп рдХреЗ рд╕рд╛рде рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкреНрд░рддрд┐рдорд╛рди рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рд╛рдпреЛрдЧрд┐рдХ рдордВрдЪ рдерд╛ред  рдкреНрд░рдпреЛрдЧреЛрдВ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╕реА # рдХреЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рдЕрдЧрд▓рд╛ рдЪрд░рдг рдерд╛ - рдПрдлрдкреА рдХреА рдУрд░ рдЕрдкрдиреА рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░, рдЕрдирд╛рдо рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреА рд╢реБрд░реБрдЖрдд рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рд▓реИрдореНрдмреНрдбрд╛ рдПрдХреНрд╕рдкреНрд░реЗрд╢рди рдФрд░, рдЕрдВрддрддрдГ, LINQред  рднрд╛рд╖рд╛ рдХреЗ рдЗрд╕ рд╡рд┐рд╕реНрддрд╛рд░ рдиреЗ C # рдХреЛ рдореЗрд░реЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рд╕рд╛рдорд╛рдиреНрдп-рдЙрджреНрджреЗрд╢реНрдп рд╡рд╛рд▓реА рднрд╛рд╖рд╛ рдореЗрдВ рд╕рдмрд╕реЗ рдЙрдиреНрдирдд рдмрдирд╛ рджрд┐рдпрд╛ред  рдЕрдЧрд▓рд╛ рд╡рд┐рдХрд╛рд╕рд╡рд╛рджреА рдХрджрдо рд╕рдВрдЧрд╛рдорд┐рддрд┐ рдФрд░ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╕рдорд░реНрдерди рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдерд╛ред  рдЯрд╛рд╕реНрдХ / рдЯрд╛рд╕реНрдХ &lt;рдЯреА&gt;, рдЯреАрдкреАрдПрд▓ рдХреА рдкреВрд░реА рдЕрд╡рдзрд╛рд░рдгрд╛, LINQ рдХреЗ рд╡рд┐рдХрд╛рд╕ - PLINQ, рдФрд░ рдЕрдВрдд рдореЗрдВ, async рдпрд╛ рдкреНрд░рддреАрдХреНрд╖рд╛ рд╣реИред  ,   - ,       .NET   C# тАФ      .    Span&lt;T&gt;  Memory&lt;T&gt;, ValueTask/ValueTask&lt;T&gt;, IAsyncDispose, ref readonly struct   in,  foreach, IO.Streams.         GC    .   ,       тАФ       .  ,     .NET   C#,  ,          .   (       )         . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi467663/">https://habr.com/ru/post/hi467663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi467653/index.html">рд╣реИрдмреНрд░реЗрдЯреИрдЯрд┐рд╕реНрдЯрд┐рдХреНрд╕: рдкрд╛рдардХ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг</a></li>
<li><a href="../hi467655/index.html">рдореИрдВрдиреЗ C # 8 рдХреЗ рд╕рд╛рде рдЧрд░реНрдорд┐рдпреЛрдВ рдХреЛ рдХреИрд╕реЗ рдмрд┐рддрд╛рдпрд╛</a></li>
<li><a href="../hi467657/index.html">I рд╕реЗ Z рддрдХ рдЗрдиреНрд╡реЗрдВрдЯреНрд░реАред рд╣рдо рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд▓рд╛рдЗрд╕реЗрдВрд╕ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi467659/index.html">рдЕрджреНрдпрддрди HyperX FURY DDR4 рдореЗрдореЛрд░реА рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рдЙрджрд╛рд╣рд░рдг рджреНрд╡рд╛рд░рд╛ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдЧрддрд┐ рджреЗрдВ</a></li>
<li><a href="../hi467661/index.html">рд╢реЗрд░реЛрдЬрд╝рд╛ рдХреЗ рд▓рд┐рдП рджреЛрд╕реАрдореАрдЯрд░ред рднрд╛рдЧ I рдкреЛрд▓реАрдорд╛рд╕реНрдЯрд░ - рдиреНрдпреВрдХреНрд▓рд╛рдЗрдб рд╣рдВрдЯрд░реНрд╕</a></li>
<li><a href="../hi467665/index.html">рдЖрд░рдУрдПрд╕ рдЯреНрд░рдХ рдЯреНрд░реЙрд▓реАред рднрд╛рдЧ 5. rviz рдФрд░ gazebo рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рдирд╛: xacro, рдирдП рд╕реЗрдВрд╕рд░</a></li>
<li><a href="../hi467667/index.html">рд╕рдВрдЧрдарди рдкрд░рд┐рдпреЛрдЬрдирд╛ рдпреЛрдЬрдирд╛ (рднрд╛рдЧ 4)</a></li>
<li><a href="../hi467669/index.html">рдореБрдЭреЗ рдкреВрд░рд╛ рджреЗрдЦреЗрдВ: рдореЛрдмрд╛рдЗрд▓ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдкрд░ рд▓рд╛рдЗрд╡ рд╡реАрдбрд┐рдпреЛ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдирд┐рдЪреЛрдбрд╝</a></li>
<li><a href="../hi467671/index.html">рдПрдирдПрд▓рдПрдХреНрд╕ рд░реЗрдЯреНрд░реЛ рдХрдВрдкреНрдпреВрдЯрд░</a></li>
<li><a href="../hi467673/index.html">рдмрд┐рд▓реНрдЯ-рдЗрди рдЧреЛ рдлреАрдЪрд░</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>