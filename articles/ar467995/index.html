<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ง๐พ ๐คน๐ป ููุฏุฉ ุนุงููู ูููุง ุจุชุทููุฑ ูุธุงู ุงููุฑุงูุจุฉ ูุฏููุง. ุงููุฑ ู ... ๐ก ๐ค ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ุจุงูุฌููุน! 


 ููุฏ ุชุญุฏุซุช ุจุงููุนู ูู ูุฐู ุงููุฏููุฉ ุนู ุชูุธูู ูุธุงู ูุฑุงูุจุฉ ูุนูุงุฑู ูููุฏุณุฉ ุงูุฎุฏูุงุช ุงููููุฑููุฉ ูุนู ุงูุงูุชูุงู ูู ุงูุฌุฑุงููุช + ุงูููุณ ุฅูู ุงูุฌุฑุงููุช ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุฏุฉ ุนุงููู ูููุง ุจุชุทููุฑ ูุธุงู ุงููุฑุงูุจุฉ ูุฏููุง. ุงููุฑ ู ...</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/467995/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฑุญุจุง ุจุงูุฌููุน! </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุชุญุฏุซุช ุจุงููุนู ูู ูุฐู ุงููุฏููุฉ ุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุธูู ูุธุงู ูุฑุงูุจุฉ ูุนูุงุฑู</a> ูููุฏุณุฉ ุงูุฎุฏูุงุช ุงููููุฑููุฉ ูุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงูุชูุงู ูู ุงูุฌุฑุงููุช + ุงูููุณ ุฅูู ุงูุฌุฑุงููุช + ClickHouse ูุชุฎุฒูู ุงูููุงููุณ</a> ุชุญุช ุงูุฃุญูุงู ุงูุนุงููุฉ.  ุจุนุฏ ุฐูู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุจ</a> ุฒูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุฑุบู ููุณููู</a> ุนู ุงูุญููุฉ ุงูุฃููู ูู ูุธุงู ุงููุฑุงูุจุฉ ูุฏููุง - ููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Bioyino</a> ุงูุชู ุทูุฑูุงูุง ุ ููู ุฃุฏุงุฉ ุชุฌููุน ููููุงุณุงุช ูุงุจูุฉ ููุชูุฒูุน. </p><br><p style=";text-align:right;direction:rtl">  ุญุงู ุงูููุช ูุชุญุฏูุซ ุงููุนูููุงุช ุงููุชุนููุฉ ุจููููุฉ ุฅุนุฏุงุฏูุง ูููุฑุงูุจุฉ ูู Avito - ุขุฎุฑ ููุงู ูุฏููุง ูุงู ุจุงููุนู ูู ุนุงู 2018 ุ ูุฎูุงู ูุฐู ุงููุชุฑุฉ ูุงูุช ููุงู ุงูุนุฏูุฏ ูู ุงูุชุบููุฑุงุช ุงููุซูุฑุฉ ููุงูุชูุงู ูู ุจููุฉ ุงููุฑุงูุจุฉ ูุฅุฏุงุฑุฉ ุงููุดุบูุงุช ูุงูุฅุดุนุงุฑุงุช ูุชุญุณููุงุช ุงูุจูุงูุงุช ุงููุฎุชููุฉ ูู ClickHouse ูุบูุฑูุง ูู ุงูุงุจุชูุงุฑุงุช ุ ุงูุฐู ุฃุฑูุฏ ููุท ุฃู ุฃุฎุจุฑู ุนูู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/wy/zd/u6/wyzdu6fyb-3ehjdbzwi8jgxhvec.png"></p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ูููู ููุจุฏุฃ ุจุงูุชุฑุชูุจ. </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุนุงู 2017 ุ</a> ุนุฑุถุช ูุฎุทุทูุง ูุชูุงุนู ุงูููููุงุช ุงูุชู ูุงูุช ุฐุงุช ุตูุฉ ูู ุฐูู ุงูููุช ุ ูุฃูุฏ ุฃู ุฃูุถุญูุง ูุฑุฉ ุฃุฎุฑู ุญุชู ูุง ุชุถุทุฑ ุฅูู ุชุจุฏูู ุนูุงูุงุช ุงูุชุจููุจ ูุฑุฉ ุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/4e9/d52/d3e/4e9d52d3e19df15d928d29d2394095fa.jpg"></a> </p><br><p style=";text-align:right;direction:rtl">  ูู ุชูู ุงููุญุธุฉ ุ ุญุฏุซ ูุง ููู. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ุฒุงุฏ ุนุฏุฏ ุงูุฎูุงุฏู ูู ูุฌููุนุฉ ุงูุฌุฑุงููุช ูู 3 ุฅูู 6. <br>  ( <code>56 CPU 2.60GHz, 384GB RAM, 10 SSD SAS 745GB, Raid 6, 10GBit/s Net</code> ). </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุณุชุจุฏููุง ุจุฑูุจูู</a> ุจู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">bioyino</a> - ุชุทุจูููุง ุงูุฎุงุต ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">StatsD</a> ุจู Rust ุ ูุญุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุจูุง ููุงูุฉ</a> ูุงููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญูู ูุฐุง ุงูููุถูุน</a> .  ููุน ุฐูู ุ ุจุนุฏ ูุดุฑ ุงูููุงู ุ ุทุฑุญูุง ุฏุนููุง ููุนูุงูุงุช (ุงูุฌุฑุงููุช) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑุงูุช ููู</a> ูุงุฎุชูุงุฑ ูุงุฆุฏ. </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุฏ ุชูุตููุง ุฅูู ุฅููุงููุฉ ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">bioyino</a> ูุนุงูู StatsD ููุถุนูุง ูุฐู ุงูุนูุงูู ุจุฌูุงุฑ ูุซููุงุช ูุชุฑุงุตุฉ ุ ููุฐูู ุญูุซ ูุงูุช ููุงู ุญุงุฌุฉ ุฅูููุง ูู k8s. </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุฏ ุชุฎูุตูุง ุฃุฎูุฑูุง ูู ูุธุงู ูุฑุงูุจุฉ Munin ุงููุฏูู (ุฑุณูููุง ุ ูุง ูุฒุงู ูุฏููุง ุ ููู ุจูุงูุงุชู ูู ุชุนุฏ ูุณุชุฎุฏูุฉ). </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุชู ุชูุธูู ุฌูุน ุงูุจูุงูุงุช ูู ูุฌููุนุงุช Kubernetes ูู ุฎูุงู Prometheus / Federations ุ ุญูุซ ูู ูุชู ุฏุนู Heapster ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู Kubernetes. </p><br></li></ul><br><h1 id="monitoring" style=";text-align:right;direction:rtl">  ูุฑุงูุจุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุนูู ูุฏุงุฑ ุงูุนุงููู ุงููุงุถููู ุ ุฒุงุฏ ุนุฏุฏ ุงูููุงููุณ ุงูููุจููุฉ ูุงููุนุงูุฌุฉ ุจุญูุงูู 9 ูุฑุงุช. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/r2/yu/zm/r2yuzm1rt5ok64zh2utwrpdtzbk.png"></a> </p><br><p style=";text-align:right;direction:rtl">  ุชุฒุฏุงุฏ ูุณุจุฉ ูุณุงุญุฉ ุงูุฎุงุฏู ุงููุดุบููุฉ ุฃูุถูุง ุ ููุญู ูุชุฎุฐ ุฎุทูุงุช ูุฎุชููุฉ ูุฎูุถูุง.  ูุฐุง ูุงุถุญ ููุนูุงู ุนูู ุงูุฑุณู ุงูุจูุงูู. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/s2/uj/ml/s2ujmlqnrsoo0yb0kgtxkdcf4ek.png"></a> </p><br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ููุนู ุจุงูุถุจุทุ </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุฏุฃูุง ูู ุชุทุจูู ุฃุณุงููุจ ุถุบุท ูุนูุฏุฉ ุนูู ุฃุนูุฏุฉ ุงูุจูุงูุงุช. <br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> graphite.data <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Time</span></span> UInt32 CODEC(Delta, ZSTD)</code> </pre> </li><li style=";text-align:right;direction:rtl">  ูุณุชูุฑ ูู ุทู ุงูุจูุงูุงุช ุงูุชู ูุถู ุนูููุง ุฃูุซุฑ ูู ุฎูุณุฉ ุฃุณุงุจูุน ูู ุงูููุงุตู ุงูุซุงููุฉ ูุงูุซูุงุซูู ุฅูู ุฎูุณ ุฏูุงุฆู.  ููููุงู ุจุฐูู ุ ูุฏููุง ูููุฉ cron ุ ูุงูุชู ุชุจุฏุฃ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุดูุฑ (ุชูุฑูุจูุง) ุงูุฅุฌุฑุงุก ุงูุชุงูู: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">10 10 10 * * clickhouse-client -q <span class="hljs-string"><span class="hljs-string">"select distinct partition from system.parts where active=1 and database='graphite' and table='data' and max_date between today()-55 AND today()-35;"</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> PART; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> clickhouse-client -u systemXXX --password XXXXXXX -q <span class="hljs-string"><span class="hljs-string">"OPTIMIZE TABLE graphite.data PARTITION ('"</span></span><span class="hljs-variable"><span class="hljs-variable">$PART</span></span><span class="hljs-string"><span class="hljs-string">"') FINAL"</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุดุงุฑููุง ุฌุฏุงูู ุงูุจูุงูุงุช.  ุงูุขู ูุฏููุง ุซูุงุซุฉ ุดุธุงูุง ูุน ูุณุฎุชูู ูุชูุงุซูุชูู ููู ููููุง ููุชุงุญ ูุดุงุฑูุฉ ุงูุชุฌุฒุฆุฉ ููุงุจุฉ ุนู ุงููููุงุณ.  ูููุญูุง ูุฐุง ุงูุฃุณููุจ ูุฑุตุฉ ูุชูููุฐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุฌุฑุงุกุงุช ูุฌููุนุฉ ุงูุชุญุฏูุซุงุช</a> ุ ูุธุฑูุง ูุฃู ูู ุงูููู ุงูุฎุงุตุฉ ุจูููุงุณ ูุนูู ููุฌูุฏุฉ ูู ููุณ ุงูุฃุฏุงุฉ ุ ููุชู ุงุณุชุฎุฏุงู ูุณุงุญุฉ ุงููุฑุต ุนูู ุฌููุน ุงููุทุน ุจุดูู ููุญุฏ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุฎุทุท <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฏูู ุงูููุฒุน</a> ููุง ููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> graphite.data_all ( <span class="hljs-string"><span class="hljs-string">`Path`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, <span class="hljs-string"><span class="hljs-string">`Value`</span></span> Float64, <span class="hljs-string"><span class="hljs-string">`Time`</span></span> UInt32, <span class="hljs-string"><span class="hljs-string">`Date`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>, <span class="hljs-string"><span class="hljs-string">`Timestamp`</span></span> UInt32 ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Distributed</span></span> ( <span class="hljs-string"><span class="hljs-string">'graphite_cluster'</span></span>, <span class="hljs-string"><span class="hljs-string">'graphite'</span></span>, <span class="hljs-string"><span class="hljs-string">'data'</span></span>, jumpConsistentHash(cityHash64(<span class="hljs-keyword"><span class="hljs-keyword">Path</span></span>), <span class="hljs-number"><span class="hljs-number">3</span></span>) )</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุฎุตุตูุง ุญููู ุงููุณุชุฎุฏู "ุงูุงูุชุฑุงุถูุฉ" ูููุฑุงุกุฉ ููุท <code>systemXXX</code> ุชูููุฐ ุฅุฌุฑุงุกุงุช ุงููุชุงุจุฉ ุนูู ุงูุฌุฏุงูู ุนูู ูุธุงู ูุณุชุฎุฏู ูููุตู <code>systemXXX</code> . </p><br><p style=";text-align:right;direction:rtl">  ุชูููู ูุชูุฉ ุงูุฌุฑุงููุช ูู ClickHouse ูุงูุชุงูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote_servers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">graphite_cluster</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shard</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">internal_replication</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">internal_replication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>graphite-clickhouse01<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>9000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span>systemXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span>XXXXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>graphite-clickhouse04<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>9000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span>systemXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span>XXXXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shard</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shard</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">internal_replication</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">internal_replication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>graphite-clickhouse02<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>9000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span>systemXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span>XXXXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>graphite-clickhouse05<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>9000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span>systemXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span>XXXXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shard</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shard</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">internal_replication</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">internal_replication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>graphite-clickhouse03<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>9000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span>systemXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span>XXXXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>graphite-clickhouse06<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>9000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span>systemXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span>XXXXXX<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">replica</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shard</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">graphite_cluster</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote_servers</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุชุญููู ุงููุชุงุจุฉ ุ ุฒุงุฏ ุนุฏุฏ ุทูุจุงุช ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุงูุฌุฑุงููุช.  ุชุณุชุฎุฏู ูุฐู ุงูุจูุงูุงุช ูู ุฃุฌู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุฌููุฒ ุงูุฒูุงุฏ ูุชูุจูู ุงูุฌูู ุ </li><li style=";text-align:right;direction:rtl">  ุนุฑุถ ุงูุฑุณูู ุงูุจูุงููุฉ ุนูู ุงูุดุงุดุงุช ูู ุงูููุชุจ ูุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงููุญููู ูุดุงุดุงุช ุงูููุจููุชุฑ ูุนุฏุฏ ูุชุฒุงูุฏ ูู ููุธูู ุงูุดุฑูุฉ. </li></ul><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ch/rb/wh/chrbwhdiyl3x3cxjqmwgtohph6y.png"></a> </p><br><p style=";text-align:right;direction:rtl">  ูููุน ุงููุฑุงูุจุฉ ูู ุงูุบุฑู ุชุญุช ูุฐุง ุงูุญูู ุ ุงุณุชุฎุฏููุง ุงุฎุชุฑุงููุง ุขุฎุฑ: ูููู ุจุชุฎุฒูู ุงูุจูุงูุงุช ููููููู ุงูุฃุฎูุฑูู ูู ููุญุฉ "ุตุบูุฑุฉ" ูููุตูุฉ ุ ููุฑุณู ุฌููุน ุทูุจุงุช ุงููุฑุงุกุฉ ููููููู ุงูุฃุฎูุฑูู ููุงู ุ ููุง ูููู ูู ุงูุญูู ุนูู ุทุงููุฉ ุงููุดุฑุฉ ุงูุฑุฆูุณูุฉ.  ุฃูุถูุง ุจุงููุณุจุฉ ููุฐุง ุงูุฌูุงุฒ ุงูููุญู "ุงูุตุบูุฑ" ุ ุงุณุชุฎุฏููุง ูุธุงู ุชุฎุฒูู ูุชุฑู ุนูุณู ุ ููุง ุฃุฏู ุฅูู ุชุณุฑูุน ุนูููุฉ ุงูุจุญุซ ุนู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ููู ูุชูุธูู ูุณู ูููู ููุง ุจุดูู ูุจูุฑ.  ูุฎุทุท ูุฐู ุงูููุญุฉ ูู ุนูู ุงููุญู ุงูุชุงูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> graphite.data_reverse ( <span class="hljs-string"><span class="hljs-string">`Path`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, <span class="hljs-string"><span class="hljs-string">`Value`</span></span> Float64, <span class="hljs-string"><span class="hljs-string">`Time`</span></span> UInt32 CODEC(Delta(<span class="hljs-number"><span class="hljs-number">4</span></span>), ZSTD(<span class="hljs-number"><span class="hljs-number">1</span></span>)), <span class="hljs-string"><span class="hljs-string">`Date`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>, <span class="hljs-string"><span class="hljs-string">`Timestamp`</span></span> UInt32 ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span> = ReplicatedGraphiteMergeTree ( <span class="hljs-string"><span class="hljs-string">'/clickhouse/tables/{cluster}/data_reverse'</span></span>, <span class="hljs-string"><span class="hljs-string">'{replica}'</span></span>, <span class="hljs-string"><span class="hljs-string">'graphite_rollup'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">Path</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Time</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">SETTINGS</span></span> index_granularity = <span class="hljs-number"><span class="hljs-number">4096</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุฌูู ุงูุจูุงูุงุช ุฅูููุง ุ ุฃุถููุง ูุณููุง ุฌุฏูุฏูุง ุฅูู ููู ุชูููู ุชุทุจูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">click-carbon</a> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[upload.graphite_reverse] type = "points-reverse" table = "graphite.data_reverse" threads = 2 url = "http://systemXXX:XXXXXXX@localhost:8123/" timeout = "60s" cache-ttl = "6h0m0s" zero-timestamp = true</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุฐู ุงูุฃูุณุงู ุงูุชู ูุถู ุนูููุง ุฃูุซุฑ ูู ููููู ุ ูุชุจูุง ูููุฉ cron.  ูุจุฏู ุดูุก ูู ูุฐุง ุงููุจูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">1 12 * * * clickhouse-client -q <span class="hljs-string"><span class="hljs-string">"select distinct partition from system.parts where active=1 and database='graphite' and table='data_reverse' and max_date&lt;today()-2;"</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> PART; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> clickhouse-client -u systemXXX --password XXXXXXX -q <span class="hljs-string"><span class="hljs-string">"ALTER TABLE graphite.data_reverse DROP PARTITION ('"</span></span><span class="hljs-variable"><span class="hljs-variable">$PART</span></span><span class="hljs-string"><span class="hljs-string">"')"</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุงูุฌุฏูู ุ ูู ููู ุชูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฑุงููุช - clickhouse</a> ุ ุชูุช ุฅุถุงูุฉ ูุณู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[[data-table]] table = "graphite.data_reverse" max-age = "48h" reverse = true</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉู ูุฐูู ุ ูุฏููุง ุฌุฏูู ูุญุชูู ุนูู 100ูช ูู ุงูุจูุงูุงุช ุงูุชู ูุชู ูุณุฎูุง ูุณุฎูุง ูุชูุงุซูุงู ุฅูู ุงูุฎูุงุฏู ุงูุณุชุฉ ุฌููุนูุง ุงูุชู ุชุนุงูุฌ ุนุจุก ุงููุฑุงุกุฉ ุจุงููุงูู ูู ุงูุทูุจุงุช ุงูุชู ุชูู ูุฏุฉ ุนุฑุถูุง ุนู ููููู (ููุฏููุง 95ูช ูููุง).  ููุฏููุง ุฃูุถูุง ุฌุฏูู ูุธูู ูุญุชูู ุนูู 1/3 ูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ูู ูุดุฑุฉ ุ ูุงูุชู ุชููุฑ ูุฑุงุกุฉ ุฌููุน ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ.  ูุญุชู ูู ูุงูุช ูุฐู ุงูุทูุจุงุช ุฃุตุบุฑ ุจูุซูุฑ ุ ูุฅู ุงูุญูู ูููุง ุฃุนูู ูู ุฐูู ุจูุซูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูุง ูุญุฏุซ ูุน ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉุ!  ููุชูุฌุฉ ููุฒูุงุฏุฉ ูู ุญุฌู ุงูุจูุงูุงุช ุงููุณุฌูุฉ ูุงููุฑุงุกุฉ ูู ูุฌููุนุฉ ุงูุฌุฑุงููุช ุ ุฒุงุฏ ุฅุฌูุงูู ุชุญููู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู ุงูุฎูุงุฏู ุฃูุถูุง.  ูุจุฏู ุดูุก ูู ูุฐุง ุงููุจูู. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/_u/mg/m3/_umgm3dd9lgetkopu45jjrqqodw.png"></a> </p><br><p style=";text-align:right;direction:rtl">  ุฃูุฏ ุฃู ุฃููุช ุงูุงูุชุจุงู ุฅูู ุงููุฑูู ุงูุฏูููุฉ ุงูุชุงููุฉ: ูุฐูุจ ูุตู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุฅูู ุงูุชุญููู ูุงููุนุงูุฌุฉ ุงูุฃูููุฉ ููููุงููุณ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฑุญูู ุงููุฑุจูู</a> (ุงูุฅุตุฏุงุฑ 2.3 ูู 2018-09-05 ุ ููู ุงููุณุคูู ุนู ููู ุงูููุงููุณ) ุ ูุงูุฐู ููุน ุนูู ุซูุงุซุฉ ูู ุฃุตู ุณุชุฉ ุฎูุงุฏู.  ููุง ุชุฑูู ูู ุงูุฑุณู ุงูุจูุงูู ุ ููุฐู ุงูุฎูุงุฏู ุงูุซูุงุซุฉ ุงูููุฌูุฏุฉ ูู ุงูุฌุฒุก ุงูุนููู. </p><br><h1 id="alerting" style=";text-align:right;direction:rtl">  ุชูุจูู </h1><br><p style=";text-align:right;direction:rtl">  ููุธุงู ุชูุจูู ุ ูุง ูุฒุงู ูุฏููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Moira</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">moira-client</a> ููุชูุจูุง ูุฐูู.  ูู ุฃุฌู ุงูุฅุฏุงุฑุฉ ุงููุฑูุฉ ูููุดุบูุงุช ูุงูุฅุดุนุงุฑุงุช ูุงูุชุตุนูุฏุงุช ุ ูุณุชุฎุฏู ูุตููุง ุชุนุฑููููุง ูุณูู alert.yaml.  ูุชู ุฅูุดุงุคู ุชููุงุฆููุง ุนูุฏูุง ูุชู ุฅูุดุงุก ุฎุฏูุฉ ุนุจุฑ PaaS (ูููู ุงูุนุซูุฑ ุนูู ุงููุฒูุฏ ุญูู ูุฐุง ุงูููุถูุน ูู ููุงู Vadim Madison <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ูุง ูุนุฑูู ุนู ุงูุฎุฏูุงุช ุงููุตุบุฑุฉ"</a> ) ููุชู ูุถุนูุง ูู ูุณุชูุฏุนูุง.  ููุนูู ูุน alert.yaml ุ ูุทุนูุง ุงุฑุชุจุงุทูุง ุนูู moira-client ู ุฃุทูููุง ุนููู alert-autoconf (ูุญู ูุฎุทุท ููุชุญ).  ููุงู ุฎุทูุฉ ูู ุชุฌููุน ุงูุฎุฏูุฉ ูู TeamCity ูุน ุชุตุฏูุฑ ุงููุดุบูุงุช ูุงูุฅุดุนุงุฑุงุช ุฅูู Moira ุนุจุฑ ุงูุชูุจูู ุงูุชููุงุฆู.  ุนูุฏ ุชูููุฐ ุงูุชุบููุฑุงุช ุนูู alert.yaml ุ ูุชู ุชุดุบูู ุงุฎุชุจุงุฑุงุช ุชููุงุฆูุฉ ุชุญูู ูู ุตุญุฉ ููู yaml ุ ููุง ุชูุฏู ุทูุจุงุช ุฅูู ุงูุฌุฑุงููุช ููู ูุงูุจ ูุชุฑู ููุชุญูู ูู ุตุญุชูุง. </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ููุฑู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุชู ูุง ุชุณุชุฎุฏู PaaS ุ ูููุง ุจุชูุธูู ูุณุชูุฏุน ูููุตู ูุณูู ุงูุชูุจูู.  ุฌุนู ูููู ุงููููุฐุฌ: Team / Project / alert.yaml.  ุจุงููุณุจุฉ ููู alert.yaml ุ ูููู ุจุฅูุดุงุก ูุฌููุนุฉ ูููุตูุฉ ูู TeamCity ุ ูุงูุชู ุชุฌุฑู ุงูุงุฎุชุจุงุฑุงุช ูุชุฏูุน ูุญุชููุงุช alert.yaml ูู Moira. </p><br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูููู ูุฌููุน ููุธูููุง ุฅุฏุงุฑุฉ ุงููุดุบูุงุช ูุงูุฅุฎุทุงุฑุงุช ูุงูุชุตุนูุฏ ุจุงุณุชุฎุฏุงู ููุฌ ูุงุญุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูุฃูู ูุจู ุฃู ูููู ูุฏููุง ุจุงููุนู ูุดุบูุงุช ุชู ุชุดุบูููุง ูู ุฎูุงู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ุ ูููุง ุจุชุทุจูู ุงููุฏุฑุฉ ุนูู ุชุญููููุง ุจุชูุณูู yaml.  ูููู ุฅุฏุฑุงุฌ ูุญุชููุงุช ูุณุชูุฏ yaml ุงููุณุชูู ูู alert.yaml ุจุฏูู ุฃู ุชุญูููุงุช ุฅุถุงููุฉ ุนูููุงู ุ ุซู ุฏูุน ุงูุชุบููุฑุงุช ุฅูู ุงููุนุงูุฌ.  ุฃุซูุงุก ุงูุฅูุดุงุก ุ ุณุชููู ุงูุชูุจูู ุงูุชููุงุฆู ุฃู ูุซู ูุฐุง ุงููุดุบู ููุฌูุฏ ุจุงููุนู ูุณูุณุฌูู ูู ุณุฌููุง ูู Redis. </p><br><p style=";text-align:right;direction:rtl">  ูููุฐ ููุช ููุณ ุจุจุนูุฏ ุ ุญุตููุง ุนูู ูุงุฌุจ ููุงูุจุฉ ุงููููุฏุณูู 24 ร 7.  ูู ุฃุฌู ููู ุงููุดุบูุงุช ุฅูููู ููุฎุฏูุฉ ุ ูููู ูู ุงูุชูุจูู ุงูุฎุงุต ุจู. ูุงูู ูููุก ูุตู "ูุง ูุฌุจ ูุนูู ุฅุฐุง ุฑุฃูุช" ุจุดูู ุตุญูุญ ุ ููุถุน ุงูุนูุงูุฉ [24 ร 7] ูุฏูุน ุงูุชุบููุฑุงุช ุฅูู ุงููุนุงูุฌ.  ุจุนุฏ ุชูุจูู alert.yaml ุ ุณุชูุน ุฌููุน ุงููุดุบูุงุช ุงูููุถุญุฉ ููู ุชููุงุฆููุง ุชุญุช ูุฑุงูุจุฉ ุงูุชุญูู ุนูู ูุฏุงุฑ 24 ุณุงุนุฉ ุทูุงู ุงูููู ูุนูู ูุฏุงุฑ ุงูุฃุณุจูุน.  ูู - ุชุจุณูุท!  ุงูุฌูุงู! </p><br><h1 id="sbor-biznes-metrik" style=";text-align:right;direction:rtl">  ุฌูุน ููุงููุณ ุงูุนูู </h1><br><p style=";text-align:right;direction:rtl">  ููุฐ ุขุฎุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงูุฉ</a> ุญูู ุฌูุน ููุนุงูุฌุฉ ููุงููุณ ุงูุนูู ุ ุฃุตุจุญ ูุฏููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">bioyino</a> ุฃูุถู. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุฏูุงู ูู ุงุฎุชูุงุฑ ูุงุฆุฏ ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุตู</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชู ุงุณุชุฎุฏุงู ุงูุทูุงูุฉ</a> ุงููุฏูุฌุฉ. </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุชู</a> ูุนุงูุฌุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุนูุงูุงุช</a> ุจุดูู ุตุญูุญ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุดูู ุงูุฌุฑุงููุช</a> . </li><li style=";text-align:right;direction:rtl">  ุงูุขู ููููู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">bioyino</a> (StatsD ุฎุงุฏู) ูุนุงูู. </li><li style=";text-align:right;direction:rtl">  ูุญุณุงุจ ุงูููู ุงููุฑูุฏุฉ ุ ูุชู ุฏุนู ุชูุณูู "set". </li><li style=";text-align:right;direction:rtl">  ูููู ุฅุฌุฑุงุก ุงูุชุฌููุน ุงูููุงุฆู ููููุงููุณ ูู ุนุฏุฉ ุณูุงุณู. </li><li style=";text-align:right;direction:rtl">  ูููู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ูุทุน ุงูุฌุฑุงููุช ูู ุงุชุตุงูุงุช ูุชูุงุฒูุฉ ูุชุนุฏุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุตูุงุญ ุฌููุน ุงูุฎูู ูุฌุฏุช. </li></ol><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุนูู ูุซู ูุฐุง. </p><br><p style=";text-align:right;direction:rtl">  ุจุฏุฃูุง ุจูุดุงุท ูู ุชูุฏูู ูููุงุก StatsD ุจุฌุงูุจ ุฌููุน ุงููููุฏุงุช ุงููุจูุฑุฉ ุงููุชุฑูุฉ ุงููุจูุฑุฉ: ูู ุงูุญุงููุงุช ุงูุชู ุชุญุชูู ุนูู ูุซููุงุช ูุชุฌุงูุณุฉ ุ ูู ุญุงุถูุงุช k8 ุจุฌูุงุฑ ุงูุฎุฏูุงุช ุ ุนูู ุงููุถูููู ูุน ููููุงุช ุงูุจููุฉ ุงูุชุญุชูุฉ ุ ุฅูุฎ. <br>  ููุน ูููู Statsd ุจุฌุงูุจ ุงูุชุทุจูู.  ูุณุชุบุฑู ุงูุฃูุฑ ููุงููุณ ูู ูุฐุง ุงูุชุทุจูู ูุชูุงุซูุฉ ุนุจุฑ UDP ุ ูููู ูู ูุนุฏ ูุณุชุฎุฏู ุงููุธุงู ุงููุฑุนู ููุดุจูุฉ (ุจุณุจุจ ุงูุชุญุณููุงุช ูู ููุงุฉ Linux).  ูุชู ุชุฌููุน ูู ุงูุฃุญุฏุงุซ ูุณุจููุง ุ ููุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุชู ูุชู ุฌูุนูุง ูู ุซุงููุฉ (ูููู ุชูููู ุงููุงุตู ุงูุฒููู) ุฅูู ุงููุฌููุนุฉ ุงูุฑุฆูุณูุฉ ูุฎูุงุฏู StatsD (bioyino0 [1-3]) ุจุชูุณูู Cap'n Proto. </p><br><p style=";text-align:right;direction:rtl">  ุธูุช ุงููุนุงูุฌุฉ ุงูุฅุถุงููุฉ ูุชุฌููุน ุงูููุงููุณ ูุงุฎุชูุงุฑ ูุงุฆุฏ ูู ูุฌููุนุฉ StatsD ูุฅุฑุณุงู ุงูููุงุณุงุช ูู ูุจู ุงูุฒุนูู ุฅูู ุงูุฌุฑุงููุช ุฏูู ุชุบููุฑ ุนููู.  ููููู ุฃู ุชูุฑุฃ ุนู ูุฐุง ุจุงูุชูุตูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ููุงูุชูุง ุงูุฃุฎูุฑุฉ</a> . </p><br><p style=";text-align:right;direction:rtl">  ุฃูุง ุจุงููุณุจุฉ ููุฃุฑูุงู ุ ููู ููุง ููู. </p><br><p style=";text-align:right;direction:rtl">  <em>ุงูุฑุณู ุงูุจูุงูู ููุฃุญุฏุงุซ StatsD ุงููุงุฑุฏุฉ</em> <br> <a href=""><img src="https://habrastorage.org/webt/m2/td/56/m2td56sycgexhmsupyp7nfmp2hw.png"></a> <br><img src="https://habrastorage.org/webt/np/5m/hi/np5mhi_4z6pfwpdpbvzfamn7fws.png"></p><br><p style=";text-align:right;direction:rtl">  <em>ุฑุณู ุจูุงูู ููููุงููุณ ุงููุฑุณูุฉ ูู StatsD ุฅูู ุงูุฌุฑุงููุช</em> <br> <a href=""><img src="https://habrastorage.org/webt/m2/td/56/m2td56sycgexhmsupyp7nfmp2hw.png"></a> </p><br><h1 id="itogo" style=";text-align:right;direction:rtl">  ูู ุงููุฌููุน </h1><br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุงููุฎุทุท ุงูุนุงู ููุชูุงุนู ุจูู ููููุงุช ุงููุฑุงูุจุฉ ูู ุงูููุช ุงูุญุงูู ููุฐุง. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/n6/ym/-b/n6ym-bcuyt3a3ctoda93lassduo.png"></a> </p><br><p style=";text-align:right;direction:rtl">  ุฅุฌูุงูู ุนุฏุฏ ุงูููุงููุณ: 2 189 484 898 474. <br>  ุฅุฌูุงูู ุนูู ุชุฎุฒูู ุงูููุงููุณ: 3 ุณููุงุช. <br>  ุนุฏุฏ ุงูุฃุณูุงุก ุงููุชุฑูุฉ ุงููุฑูุฏุฉ: 6 585 413 171. <br>  ุนุฏุฏ ุงููุดุบูุงุช: 1053 ุ ุชุนูู ูู 1 ุฅูู 15 ูููู ูุชุฑ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฎุทุท ูููุณุชูุจู ุงููุฑูุจ:</strong> </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุจุฏุก ูู ููู ุฎุฏูุงุช ุงูููุชุฌ ุฅูู ูุธุงู ุชุฎุฒูู ูุชุฑู ููุณูู ุ </li><li style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ุซูุงุซุฉ ุฎูุงุฏู ุฃุฎุฑู ุฅูู ูุฌููุนุฉ ุงูุฌุฑุงููุช ุ </li><li style=";text-align:right;direction:rtl">  ุชูููู ุตุฏุงูุงุช ูููุฑุง ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃูุณุฌุฉ ุงูุซุงุจุชุฉ</a> . </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุจุญุซ ุนู</a> ูุทูุฑ ุขุฎุฑ ูู ูุฑูู ุงููุฑุงูุจุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ุณุฃููู ุณุนูุฏูุง ุจุงูุชุนูููุงุช ูุงูุฃุณุฆูุฉ ููุง - ุงููุชุงุจุฉ.  ูุณุฃููู ุฃูุถูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุงูุนุฑุถ ุนูู Highload ++ ูู 7 ููููุจุฑ</a> ุ ุฅุฐุง ููุช ููุงู ุ ููููููุง ุงูุชุญุฏุซ. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar467995/">https://habr.com/ru/post/ar467995/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar467977/index.html">ุฅูุดุงุก ุชุทุจูู ุจุงุณุชุฎุฏุงู Styled-Components ูู Vue.js</a></li>
<li><a href="../ar467979/index.html">ุชูุงูู ุงูุฅุนูุงูุงุช: ููู ุชุนููุ</a></li>
<li><a href="../ar467983/index.html">ููุงุฐุง ูุฌุจ ุนููู ุฑูู MVP ูู ูุดุงุฑูุนู</a></li>
<li><a href="../ar467987/index.html">ุงูููุงู ุงูููููุฉ ุญูุฉ: ุตูุน ุงููุฑุงุฑ ุนูู ูุณุชูู ุงูููุงุฏ ุฏูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ</a></li>
<li><a href="../ar467991/index.html">ูู ุชุฎุชูู ุงูุฑูุงุชุจ ุงูุฅูููููุฉ ูููุทูุฑูู ุนู ููุณูู ุ ุจุงููุธุฑ ุฅูู ุชูููุฉ ุงููุนูุดุฉ</a></li>
<li><a href="../ar467997/index.html">ุชู ุงููุจุงูุบุฉ ูู ููุฏุณุฉ ุงูุจุฑูุฌูุงุช ุ ูุงูุชูููู ูู ุชุตููู ุจุณูุท</a></li>
<li><a href="../ar467999/index.html">ูุณุคุงู VNA ุฃู ุฌูุงุฒ ูุงุจุงูู ุตููู</a></li>
<li><a href="../ar468001/index.html">ูุง ุชุธู: ุงูุจุฑุงูุฌ ุญูุง ุฃุตุจุญุช ุฃูุซุฑ ุชูููุฉ</a></li>
<li><a href="../ar468003/index.html">5 ุบูุบุงูุฑุชุฒ ุงูุญุฏูุฏ: ูุตุฉ ุญูู ููููุฉ ุจูุงุก VDS ูุงุฆู ุงูุณุฑุนุฉ</a></li>
<li><a href="../ar468005/index.html">ูู ูููุฉ ุนู ุงูุฏุนู ุงููุฌูุฏ (24 ุณุจุชูุจุฑ ุ ููุณูู)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>