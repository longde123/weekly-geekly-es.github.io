<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕺🏾 🚗 🕴🏽 Membuat aplikasi ARCore pertama Anda 👆 🚉 🐵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel sebelumnya, saya sudah menjelaskan apa itu ARCore dan bagaimana hal itu membantu pengembang untuk membuat aplikasi augmented reality yan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat aplikasi ARCore pertama Anda</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438178/"><p><img src="https://habrastorage.org/getpro/habr/post_images/cd8/f22/342/cd8f2234275cbc67a7956d0eb233e1ec.jpg" alt="Membuat aplikasi ARCore pertama Anda"></p><br><p>  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya,</a> saya sudah menjelaskan apa itu ARCore dan bagaimana hal itu membantu pengembang untuk membuat aplikasi augmented reality yang menakjubkan tanpa perlu memahami matematika dan OpenGL. </p><br><p>  Jika Anda belum membacanya, saya sangat merekomendasikan melakukan ini sebelum pindah ke artikel ini dan mulai mengembangkan aplikasi ARCore. </p><a name="habracut"></a><br><h2 id="nachalo-raboty">  Memulai </h2><br><p> Untuk mulai mengembangkan aplikasi ARCore, Anda harus terlebih dahulu menambahkan dukungan ARCore ke proyek Anda.  Ini sangat sederhana, karena kita akan menggunakan Android Studio dan Sceneform SDK.  Ada dua operasi utama yang dilakukan secara otomatis oleh Sceneform: </p><br><ol><li>  Periksa ARCore. </li><li>  Minta izin untuk menggunakan kamera. </li></ol><br><p>  Anda tidak perlu khawatir tentang dua langkah ini saat membuat aplikasi ARCore menggunakan Sceneform SDK.  Anda hanya perlu menambahkan Sceneform SDK ke proyek Anda. </p><br><p>  Buat proyek Android Studio baru dengan Kegiatan kosong. </p><br><p> Tambahkan dependensi berikut ke file <code>build.gradle</code> di tingkat proyek: </p><br><pre> <code class="plaintext hljs">dependencies { classpath 'com.google.ar.sceneform:plugin:1.5.0' }</code> </pre> <br><p>  Dan tambahkan dependensi ini ke file <code>build.gradle</code> di tingkat aplikasi: </p><br><pre> <code class="plaintext hljs">implementation "com.google.ar.sceneform.ux:sceneform-ux:1.5.0"</code> </pre> <br><p>  Sekarang sinkronkan proyek dengan file Gradle dan tunggu sampai build selesai.  Dengan demikian, Sceneform SDK dan plugin Sceneform untuk Android Studio akan ditambahkan ke proyek.  Ini akan memungkinkan Anda untuk melihat <code>.sfb</code> , yang merupakan model 3D yang akan dirender di kamera Anda, serta membantu Anda mengimpor, melihat, dan membuat sumber daya 3D. </p><br><h2 id="sozdanie-vashego-pervogo-arcore-prilozheniya">  Membuat aplikasi ARCore pertama Anda </h2><br><p>  Sekarang setelah persiapan Android Studio selesai dan Sceneform SDK diinstal, kita dapat mulai membuat aplikasi ARCore pertama kami. </p><br><p>  Pertama, kita perlu menambahkan fragmen Sceneform ke tata letak kita.  Ini adalah <strong>adegan yang</strong> disebut di mana semua model 3D kami akan ditempatkan.  Fragmen akan mengatur inisialisasi kamera dan memproses izin sendiri. </p><br><p>  Buka file tata letak utama Anda.  Dalam kasus saya, ini adalah file <code>activity_main.xml</code> .  Dan tambahkan fragmen Sceneform di sana: </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FrameLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".MainActivity"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.ar.sceneform.ux.ArFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/ux_fragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FrameLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Saya mengatur lebar dan tinggi <code>match_parent</code> sehingga adegan layar penuh.  Anda dapat memilih ukuran sesuai dengan kebutuhan Anda. </p><br><h2 id="proverka-sovmestimosti">  Pemeriksaan kompatibilitas </h2><br><p>  Ini semua yang perlu Anda lakukan dalam file tata letak.  Sekarang kita beralih ke Activity, dalam kasus saya itu adalah <code>MainActivity</code> .  Tambahkan metode ke Aktivitas: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkIsSupportedDeviceOrFinish</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Activity activity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Sceneform requires Android N or later"</span></span>); Toast.makeText(activity, <span class="hljs-string"><span class="hljs-string">"Sceneform requires Android N or later"</span></span>, Toast.LENGTH_LONG).show(); activity.finish(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } String openGlVersionString = ((ActivityManager) activity.getSystemService(Context.ACTIVITY_SERVICE)) .getDeviceConfigurationInfo() .getGlEsVersion(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Double.parseDouble(openGlVersionString) &lt; MIN_OPENGL_VERSION) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Sceneform requires OpenGL ES 3.0 later"</span></span>); Toast.makeText(activity, <span class="hljs-string"><span class="hljs-string">"Sceneform requires OpenGL ES 3.0 or later"</span></span>, Toast.LENGTH_LONG) .show(); activity.finish(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> </pre> <br><p>  Metode ini memeriksa apakah perangkat Anda mendukung Sceneform SDK atau tidak.  SDK membutuhkan Android API level 27 atau lebih tinggi dan OpenGL ES versi 3.0 atau lebih tinggi.  Jika perangkat tidak mendukung kedua parameter ini, adegan tidak akan dimuat, dan aplikasi Anda akan menampilkan layar kosong. </p><br><p>  Namun, Anda masih dapat mengimplementasikan semua fungsi lain dari aplikasi Anda yang tidak memerlukan Sceneform SDK. </p><br><p>  Setelah memeriksa kompatibilitas, kami dapat membuat model 3D kami dan melampirkannya ke tempat kejadian. </p><br><h2 id="dobavlenie-assets">  Menambah aset </h2><br><p>  Sekarang Anda perlu menambahkan model 3D ke proyek yang akan ditampilkan di layar Anda.  Anda dapat membuat model ini sendiri jika Anda terbiasa dengan proses pembuatannya.  Atau Anda bisa pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Poly</a> . </p><br><p>  Di sana Anda akan menemukan repositori besar sumber daya 3D untuk dipilih.  Selain itu, mereka gratis untuk diunduh. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/765/458/73b/76545873b1dadbde506f9747decd5952.jpg" alt="Poli"></p><br><p>  Di Android Studio, buka folder aplikasi Anda di panel kiri.  Anda memerlukan folder <strong>sampledata</strong> .  Folder ini akan berisi semua model 3D Anda.  Di dalam folder ini, buat folder dengan nama model Anda. </p><br><p>  Di arsip yang Anda unduh dari Poly, kemungkinan besar Anda akan menemukan 3 file: </p><br><ol><li>  file <code>.mtl</code> </li><li>  File <code>.obj</code> </li><li>  file <code>.png</code> </li></ol><br><p>  Yang paling penting dari ketiga file ini adalah file <code>.obj</code> .  Ini adalah model Anda.  Masukkan semua 3 file dalam <strong>sampledata -&gt; "folder model Anda"</strong> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/25a/afc/34d/25aafc34d50054f1b42b3e80660d41e9.jpg" alt="Jalan menuju model 3D"></p><br><p>  Sekarang klik kanan pada file <code>.obj</code> .  Opsi pertama adalah <strong>Impor Aset Sceneform</strong> .  Klik di atasnya, jangan mengubah pengaturan default, cukup klik <strong>Selesai</strong> di jendela berikutnya.  Setelah itu, sinkronkan proyek dengan file Gradle. </p><br><p>  Impor sumber daya 3D yang akan digunakan dalam proyek Anda selesai.  Selanjutnya, mari kita gunakan model 3D dalam kode kita dan memasukkannya ke dalam adegan. </p><br><h2 id="sozdanie-modeli">  Pembuatan model </h2><br><p>  Tambahkan kode berikut ke Aktivitas Anda, dan saya akan menjelaskannya baris demi baris: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TAG = MainActivity.class.getSimpleName(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> MIN_OPENGL_VERSION = <span class="hljs-number"><span class="hljs-number">3.0</span></span>; ArFragment arFragment; ModelRenderable lampPostRenderable; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@SuppressWarnings</span></span>({<span class="hljs-string"><span class="hljs-string">"AndroidApiChecker"</span></span>, <span class="hljs-string"><span class="hljs-string">"FutureReturnValueIgnored"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!checkIsSupportedDeviceOrFinish(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } setContentView(R.layout.activity_main); arFragment = (ArFragment) getSupportFragmentManager().findFragmentById(R.id.ux_fragment); ModelRenderable.builder() .setSource(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, Uri.parse(<span class="hljs-string"><span class="hljs-string">"LampPost.sfb"</span></span>)) .build() .thenAccept(renderable -&gt; lampPostRenderable = renderable) .exceptionally(throwable -&gt; { Toast toast = Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"Unable to load andy renderable"</span></span>, Toast.LENGTH_LONG); toast.setGravity(Gravity.CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); toast.show(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }); }</code> </pre> <br><p>  Pertama kita menemukan <code>arFragment</code> , yang sebelumnya kita tambahkan ke tata letak.  Fragmen ini bertanggung jawab untuk penyimpanan dan pengoperasian tempat kejadian.  Anda bisa membayangkannya sebagai wadah untuk adegan kami. </p><br><p>  Selanjutnya, kami menggunakan kelas <code>ModelRenderable</code> untuk membangun model kami.  Menggunakan metode <code>setSource</code> kami memuat model kami dari file <code>.sfb</code> yang dihasilkan ketika sumber daya diimpor.  Metode <code>thenAccept</code> mendapatkan model setelah dibuat, dan kami mengatur model yang dimuat ke <code>lampPostRenderable</code> variabel kami. </p><br><p>  Untuk penanganan kesalahan, kami memiliki metode yang <code>exceptionally</code> , yang disebut jika pengecualian terjadi. </p><br><p>  Semua ini terjadi secara tidak sinkron, sehingga Anda tidak perlu khawatir tentang multithreading. </p><br><p>  Sekarang setelah model dimuat dan disimpan dalam variabel <code>lampPostRenderable</code> , kami akan menambahkannya ke adegan kami. </p><br><h2 id="dobavlenie-modeli-v-scenu">  Menambahkan Model ke Adegan </h2><br><p>  Adegan kami berada di <code>arFragment</code> dan akan menerima acara sentuhan pengguna.  Oleh karena itu, kita perlu menginstal pendengar <code>onTap</code> untuk fragmen kita untuk memproses sentuhan dan menempatkan objek di tempat yang diperlukan.  Tambahkan kode berikut ke metode <code>onCreate</code> : </p><br><pre> <code class="java hljs">arFragment.setOnTapArPlaneListener( (HitResult hitresult, Plane plane, MotionEvent motionevent) -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lampPostRenderable == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Anchor anchor = hitresult.createAnchor(); AnchorNode anchorNode = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AnchorNode(anchor); anchorNode.setParent(arFragment.getArSceneView().getScene()); TransformableNode lamp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TransformableNode(arFragment.getTransformationSystem()); lamp.setParent(anchorNode); lamp.setRenderable(lampPostRenderable); lamp.select(); } );</code> </pre> <br><p>  Kami menetapkan pendengar <code>onTapArPlaneListener</code> untuk fragmen AR kami.  Sintaksis berikut digunakan untuk ekspresi lambda.  Jika Anda tidak terbiasa dengan itu, maka lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">panduan</a> kecil ini tentang topik ini. </p><br><p>  Pertama, kita membuat <strong>jangkar</strong> dari <code>HitResult</code> menggunakan <code>hitresult.createAnchor()</code> dan menyimpannya di objek <code>Anchor</code> . </p><br><p>  Lalu kita buat <strong>simpul</strong> dari jangkar ini.  Ini akan disebut <code>AnchorNode</code> dan akan dilampirkan ke tempat kejadian menggunakan metode <code>setParent</code> . </p><br><p>  Selanjutnya, kita membuat <code>TransformableNode</code> , yang akan menjadi model kita, dan ikat ke node kita.  <code>TransformableNode</code> masih belum memiliki informasi tentang objek yang harus ditampilkan.  Kami akan meneruskan objek ini dengan menggunakan metode <code>setRenderable</code> , yang mengambil objek bertipe ModelRenderable sebagai parameter (ingat, kami mendapat objek seperti itu dan menamakannya <code>lampPostRenderable</code> ?).  Dan akhirnya, kita memanggil metode <code>lamp.select()</code> ; </p><br><p>  Ooh!  Terlalu banyak terminologi.  Jangan khawatir, saya akan menjelaskan semuanya sekarang: </p><br><ol><li><p>  <strong>Adegan</strong> : ini adalah tempat di mana semua objek 3D Anda akan ditampilkan.  Adegan ini terletak di fragmen AR yang kami tambahkan ke tata letak. </p><br></li><li><p>  <strong>HitResult</strong> : ini adalah garis imajiner (atau sinar) yang datang dari tak terbatas, yang memberikan titik persimpangan dirinya dengan objek dari dunia nyata. </p><br></li><li><p>  <strong>Jangkar</strong> : Ini adalah lokasi dan orientasi tetap di dunia nyata.  Ini dapat dipahami sebagai koordinat (x, y, z) dalam ruang tiga dimensi.  Pose adalah posisi dan orientasi suatu benda di atas panggung.  Ini digunakan untuk mengubah ruang koordinat lokal dari suatu objek menjadi ruang koordinat nyata. </p><br></li><li><p>  <strong>Anchor node</strong> : Ini adalah node yang secara otomatis memposisikan dirinya di dunia nyata.  Ini adalah simpul pertama yang dipasang ketika sebuah pesawat terdeteksi. </p><br></li><li><p>  <strong>TransformableNode</strong> : Ini adalah simpul yang dapat berinteraksi dengan Anda.  Itu bisa dipindahkan, diskalakan, diputar, dan sebagainya.  Dalam contoh ini, kita dapat mengatur skala objek kita dan memutarnya.  Karenanya nama Transformable. </p><br></li></ol><br><p>  Tidak ada ilmu roket.  Ini sebenarnya relatif sederhana.  Seluruh adegan dapat dilihat dalam bentuk grafik di mana orang tua adalah adegan, dan anak-anak adalah jangkar node, yang kemudian bercabang ke berbagai node dan objek lain yang akan ditampilkan di layar. </p><br><p>  Akibatnya, Aktivitas Anda akan terlihat seperti ini: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.ayusch.arcorefirst; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.Activity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.ActivityManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.net.Uri; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Build; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.app.AppCompatActivity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.util.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.Gravity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.MotionEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.Toast; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.core.Anchor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.core.HitResult; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.core.Plane; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.sceneform.AnchorNode; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.sceneform.rendering.ModelRenderable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.sceneform.ux.ArFragment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.sceneform.ux.TransformableNode; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TAG = MainActivity.class.getSimpleName(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> MIN_OPENGL_VERSION = <span class="hljs-number"><span class="hljs-number">3.0</span></span>; ArFragment arFragment; ModelRenderable lampPostRenderable; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@SuppressWarnings</span></span>({<span class="hljs-string"><span class="hljs-string">"AndroidApiChecker"</span></span>, <span class="hljs-string"><span class="hljs-string">"FutureReturnValueIgnored"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!checkIsSupportedDeviceOrFinish(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } setContentView(R.layout.activity_main); arFragment = (ArFragment) getSupportFragmentManager().findFragmentById(R.id.ux_fragment); ModelRenderable.builder() .setSource(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, Uri.parse(<span class="hljs-string"><span class="hljs-string">"LampPost.sfb"</span></span>)) .build() .thenAccept(renderable -&gt; lampPostRenderable = renderable) .exceptionally(throwable -&gt; { Toast toast = Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"Unable to load andy renderable"</span></span>, Toast.LENGTH_LONG); toast.setGravity(Gravity.CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); toast.show(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }); arFragment.setOnTapArPlaneListener( (HitResult hitresult, Plane plane, MotionEvent motionevent) -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lampPostRenderable == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Anchor anchor = hitresult.createAnchor(); AnchorNode anchorNode = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AnchorNode(anchor); anchorNode.setParent(arFragment.getArSceneView().getScene()); TransformableNode lamp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TransformableNode(arFragment.getTransformationSystem()); lamp.setParent(anchorNode); lamp.setRenderable(lampPostRenderable); lamp.select(); } ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkIsSupportedDeviceOrFinish</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Activity activity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Sceneform requires Android N or later"</span></span>); Toast.makeText(activity, <span class="hljs-string"><span class="hljs-string">"Sceneform requires Android N or later"</span></span>, Toast.LENGTH_LONG).show(); activity.finish(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } String openGlVersionString = ((ActivityManager) activity.getSystemService(Context.ACTIVITY_SERVICE)) .getDeviceConfigurationInfo() .getGlEsVersion(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Double.parseDouble(openGlVersionString) &lt; MIN_OPENGL_VERSION) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Sceneform requires OpenGL ES 3.0 later"</span></span>); Toast.makeText(activity, <span class="hljs-string"><span class="hljs-string">"Sceneform requires OpenGL ES 3.0 or later"</span></span>, Toast.LENGTH_LONG) .show(); activity.finish(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } }</code> </pre> <br><p>  Selamat!  Anda baru saja menyelesaikan pembuatan aplikasi ARCore pertama Anda.  Mulai menambahkan objek ke dalamnya dan Anda akan melihat bagaimana mereka mulai hidup di dunia nyata. </p><br><p>  Ini adalah pandangan pertama Anda tentang cara membuat aplikasi ARCore sederhana dari awal di Android Studio.  Dalam pelajaran berikutnya, saya akan mempelajari ARCore lebih dalam dan menambahkan lebih banyak fungsi ke aplikasi. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id438178/">https://habr.com/ru/post/id438178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id438168/index.html">Bagaimana memecahkan kamera yang mahal sehingga istrimu tidak membunuhmu</a></li>
<li><a href="../id438170/index.html">Hadiah dinamai menurut Ilya Segalovich. Kisah tentang Ilmu Komputer dan Peluncuran Publikasi</a></li>
<li><a href="../id438172/index.html">Apple tidak dapat memindahkan produksi perangkatnya ke AS</a></li>
<li><a href="../id438174/index.html">Kuning - Vakum - Cloud</a></li>
<li><a href="../id438176/index.html">Ikhtisar IPSec di Mikrotik</a></li>
<li><a href="../id438180/index.html">Daftarkan transaksi real estat secara online</a></li>
<li><a href="../id438182/index.html">Studi ini menemukan manfaat pembajakan moderat bagi produsen dan distributor konten</a></li>
<li><a href="../id438188/index.html">Bill Gates dan reaktor natrium cepat</a></li>
<li><a href="../id438196/index.html">Jika proyeknya adalah "Teater", gunakan aktor ...</a></li>
<li><a href="../id438198/index.html">Mari kita masuk jauh ke dalam sejarah: di mana kaki quadrocopters tumbuh</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>