<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕵🏼 💪🏿 🔃 Introdução ao Analisador Estático PVS-Studio para Desenvolvimento C ++ no Linux 🕴🏼 🤴🏿 📎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O PVS-Studio suporta a análise de projetos desenvolvidos em C, C ++, C # e Java. Você pode usar o analisador no Windows, Linux e macOS. Este pequeno a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introdução ao Analisador Estático PVS-Studio para Desenvolvimento C ++ no Linux</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/462659/"><img src="https://habrastorage.org/webt/iu/6h/e0/iu6he0qpjzu0rlqvvkqpczf_euu.png" align="left">  O PVS-Studio suporta a análise de projetos desenvolvidos em C, C ++, C # e Java.  Você pode usar o analisador no Windows, Linux e macOS.  Este pequeno artigo mostrará o básico da análise de códigos C e C ++ no ambiente Linux. <br><br><h2>  Instalação </h2><br>  Existem diferentes maneiras de instalar o PVS-Studio no Linux, dependendo do seu tipo de distribuição.  O método mais conveniente e preferido é usar o repositório, pois ele permite a atualização automática do analisador ao liberar novas versões.  Outra opção é usar o pacote de instalação, que você pode obter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><a name="habracut"></a><br>  Os comandos de instalação diferem dependendo da distribuição do Linux que você está usando.  Por exemplo, é assim que a instalação do repositório em sistemas baseados em Debian se parece: <br><br><pre><code class="cpp hljs">wget -q -O - https:<span class="hljs-comment"><span class="hljs-comment">//files.viva64.com/etc/pubkey.txt | sudo apt-key add - sudo wget -O /etc/apt/sources.list.d/viva64.list \ https://files.viva64.com/etc/viva64.list sudo apt update sudo apt install pvs-studio</span></span></code> </pre> <br>  Para instalar o PVS-Studio a partir do pacote para download, você pode usar o utilitário <i>gdebi</i> : <br><br><pre> <code class="cpp hljs">sudo gdebi pvs-studio-VERSION.deb</code> </pre> <br>  O processo de instalação é descrito em mais detalhes na seção " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instalando e atualizando o PVS-Studio no Linux</a> ".  Você também pode encontrar informações sobre sistemas não-Debian lá. <br><br>  Depois que o PVS-Studio estiver instalado, você precisará inserir os dados da licença.  Aqui está o comando para isso: <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer credentials NAME KEY [-o LIC-FILE]</code> </pre> <br>  <i>NAME</i> e <i>KEY</i> são o nome de usuário registrado e a chave de licença, respectivamente.  O parâmetro opcional <i>–o</i> permite especificar o local em que um arquivo de licença será gerado.  Por padrão, ele será armazenado no diretório <i>~ / .config / PVS-Studio /</i> . <br><br>  Se você precisar de uma chave de avaliação, poderá obtê-la na página " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Baixar e avaliar o PVS-Studio</a> ". <br><br><h2>  Verificando seu projeto </h2><br>  Depois de instalar o analisador, você pode começar a verificar os projetos.  Existem duas maneiras principais de fazer isso: <br><br><ol><li>  Monitoramento de compilação. </li><li>  Executando diretamente dos sistemas de construção. </li></ol><br>  Vamos falar sobre o primeiro caminho.  Para iniciar o monitoramento no Linux, você precisa do utilitário <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>strace</i></a> .  O PVS-Studio o utiliza para coletar uma lista e parâmetros de processos, que foram lançados durante a construção. <br><br>  Use o comando abaixo para iniciar a compilação: <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer trace -- make</code> </pre> <br>  Aqui, <i>make</i> é usado, mas qualquer outro comando que você esteja executando para criar seu projeto pode estar no seu lugar.  Se necessário, você pode passar parâmetros da linha de comando para ele da maneira usual. <br><br>  Após a compilação, o <i>strace</i> criará um arquivo que o analisador utilizará para verificar o código-fonte.  Para iniciar a análise, use o comando abaixo. <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer analyze -o /path/to/project.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span></code> </pre> <br>  Como resultado, um arquivo de log codificado será gerado, que você poderá converter em um dos formatos suportados.  Falaremos sobre trabalhar com relatórios mais tarde. <br><br>  Além do <i>strace</i> , você pode basear a análise no arquivo <i>compile_commands.json</i> (JSON Compilation Database).  Muitos sistemas de construção possuem meios internos de exportar comandos de compilação, ou você pode usar o utilitário <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BEAR</a> para fazer isso.  Aqui está o comando para iniciar a análise neste caso: <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer analyze –f /path/to/compile_commands.json</code> </pre> <br>  Observe que o analisador reconhece o compilador, usado no processo de compilação, por seu nome do executável.  Se você receber o erro "Nenhuma unidade de compilação encontrada" ao tentar analisar seu projeto, tente especificar explicitamente o nome do seu compilador por meio da chave da linha de comando <i>–compiler</i> ou <i>–c</i> : <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer analyze -c MyCompiler</code> </pre> <br>  Você pode precisar disso se estiver usando compilação cruzada ou se o seu compilador tiver um nome de executável não padrão. <br><br>  Além do modo de monitoramento, você pode integrar o analisador diretamente ao seu sistema de construção ou IDE.  Nosso repositório oficial do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> fornece exemplos de projetos nos quais a integração já foi configurada: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pvs-studio-cmake-examples</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pvs-studio-qmake-examples</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pvs-studio-makefile-examples</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pvs-studio-waf-examples</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pvs-studio-eclipse-examples</a> </li></ul><br>  Para saber mais sobre como executar o analisador no Linux, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documentação</a> . <br><br><h2>  Trabalhando com Relatórios </h2><br>  Após verificar um projeto, o analisador cria um relatório codificado.  Para convertê-lo em um dos formatos suportados, é necessário usar o utilitário <i>plog-converter</i> , fornecido com a instalação do PVS-Studio. <br><br>  Aqui está uma lista de formatos suportados: <br><br><ul><li>  xml - um formato conveniente para processamento adicional dos resultados da análise, suportado pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plug</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">in do SonarQube</a> ; </li><li>  csv - arquivo armazena dados tabulares (números e texto) em texto sem formatação; </li><li>  errorfile é o formato de saída do gcc e do clang; </li><li>  tasklist - um formato de erro que pode ser aberto no QtCreator; </li><li>  html - relatório html com uma breve descrição dos resultados da análise; </li><li>  fullhtml - relatório com a classificação dos resultados da análise de acordo com os diferentes parâmetros e navegação ao longo do código fonte. </li></ul><br>  O formato fullhtml é o mais conveniente para visualizar o relatório, pois permite pular para a linha de código correspondente ao aviso de seu interesse.  O comando a seguir permite converter o relatório para este formato: <br><br><pre> <code class="cpp hljs">plog-converter -a GA:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span> -t fullhtml /path/project.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> -o /path/report_dir</code> </pre> <br>  Quando você o inicia, um diretório recém-criado chamado <i>/ path / report_dir</i> conterá todos os arquivos de relatório. <br><br>  Preste atenção ao parâmetro <i>-a</i> .  Ele permite especificar quais avisos devem aparecer no relatório resultante.  É conveniente se você precisar filtrar a saída do analisador.  O comando acima criará um relatório, que conterá apenas mensagens gerais de análise do primeiro e do segundo níveis de certeza ( <i>Alto</i> e <i>Médio</i> ). <br><br>  Um exemplo de relatório: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0b/4b6/997/c0b4b69970d61d40e24e6a3e867cf597.png" alt="Quadro 9"></div><br><br>  Ao clicar na célula <i>Localização de</i> uma mensagem, você pode pular para a linha de código correspondente: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b4e/44e/a7d/b4e44ea7d19a4c2a5a35a79c140f96e3.png" alt="Quadro 8"></div><br><br>  Ao clicar no código de diagnóstico na coluna <i>Código</i> , você pode abrir a documentação sobre esse diagnóstico. <br><br><h2>  Suprimindo avisos do analisador </h2><br>  Ao usar qualquer analisador estático para verificar o código-fonte, você pode obter falsos positivos ou simplesmente avisos de ruído indesejáveis.  O PVS-Studio possui meios de suprimir essas mensagens.  Para direcionar avisos individuais, você pode usar um dos métodos descritos no artigo de documentação " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Supressão de alarmes falsos</a> ". <br><br>  Além disso, ao verificar o código antigo, convém suprimir todos os avisos.  Como regra, você pode precisar disso se quiser verificar apenas o novo código adicionado a uma base de código existente.  Para fazer isso, use o parâmetro <i>suprimir</i> do utilitário <i>pvs-studio-analyzer</i> . <br><br>  Você pode suprimir avisos em massa em um relatório usando este comando: <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer suppress /path/to/report.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span></code> </pre> <br>  As informações sobre avisos suprimidos são armazenadas em um arquivo chamado <i>suppress_base.json</i> , localizado ao lado do projeto.  Essas mensagens são excluídas dos relatórios de verificações subsequentes. <br><br>  Este mecanismo é descrito em detalhes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h2>  Conclusão </h2><br>  Esta foi uma breve introdução ao uso do PVS-Studio no Linux.  Espero que tenha sido útil e tenha conseguido responder às perguntas mais frequentes.  Se você precisar de mais informações sobre o tópico deste artigo, consulte a documentação <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462659/">https://habr.com/ru/post/pt462659/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462643/index.html">Determinar indivíduos interdependentes a bordo de estruturas usando python</a></li>
<li><a href="../pt462649/index.html"># 18 Mosdroid Argon - relatório</a></li>
<li><a href="../pt462653/index.html">LTE como um símbolo de independência</a></li>
<li><a href="../pt462655/index.html">Digite seu código finalmente</a></li>
<li><a href="../pt462657/index.html">SkyRC B6 Nano Carregador revisão e teste</a></li>
<li><a href="../pt462661/index.html">Familiaridade com o analisador estático PVS-Studio ao desenvolver programas C ++ no Linux</a></li>
<li><a href="../pt462663/index.html">Nadar, dançar (!) E balançar: que atividades eu quero</a></li>
<li><a href="../pt462665/index.html">Helm Security</a></li>
<li><a href="../pt462667/index.html">Galaxy Guide DevOpsConf 2019</a></li>
<li><a href="../pt462671/index.html">Infraestrutura da empresa como produto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>