<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé© üß¶ üë¥üèΩ ¬øC√≥mo funcionan las pruebas A / B en Avito? ü¶ã ‚öæÔ∏è ü§üüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos Mi nombre es Danila, trabajo en un equipo que desarrolla infraestructura anal√≠tica en Avito. El centro de esta infraestructura es la prue...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øC√≥mo funcionan las pruebas A / B en Avito?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/454164/"><p>  Hola a todos  Mi nombre es Danila, trabajo en un equipo que desarrolla infraestructura anal√≠tica en Avito.  El centro de esta infraestructura es la prueba A / B. </p><br><p>  Los experimentos A / B son una herramienta clave para la toma de decisiones en Avito.  En nuestro ciclo de desarrollo de productos, una prueba A / B es imprescindible.  Probamos cada hip√≥tesis y lanzamos solo cambios positivos. </p><br><p>  Recopilamos cientos de m√©tricas y podemos desglosarlas en secciones comerciales: verticales, regiones, usuarios autorizados, etc. Hacemos esto autom√°ticamente usando una √∫nica plataforma para experimentos.  En el art√≠culo, le contar√© con suficiente detalle c√≥mo est√° organizada la plataforma y profundizaremos en algunos detalles t√©cnicos interesantes. </p><br><p><img src="https://habrastorage.org/webt/ts/r_/qw/tsr_qwh3l7qfw2kob14z0lsaiya.png"></p><a name="habracut"></a><br><p>  Las funciones principales de la plataforma A / B se formulan de la siguiente manera. </p><br><ol><li>  Te ayuda a ejecutar experimentos r√°pidamente </li><li>  Controla las intersecciones de experimentos no deseados </li><li>  Cuenta m√©tricas, estad√≠sticas.  pruebas, visualiza resultados </li></ol><br><p>  En otras palabras, la plataforma ayuda a tomar decisiones sin errores m√°s r√°pidamente. </p><br><p>  Si dejamos de lado el proceso de desarrollo de caracter√≠sticas que se env√≠an para la prueba, el ciclo completo del experimento se ve as√≠: </p><br><p><img src="https://habrastorage.org/webt/ve/wd/by/vewdbye97eexzetbj3riubs-i1w.png"></p><br><ul><li>  El cliente (analista o gerente de producto) configura los par√°metros del experimento a trav√©s del panel de administraci√≥n. </li><li>  El servicio dividido, de acuerdo con estos par√°metros, distribuye el grupo A / B necesario al dispositivo cliente. </li><li>  Las acciones del usuario se recopilan en registros sin procesar que pasan por la agregaci√≥n y se convierten en m√©tricas. </li><li>  Las m√©tricas se ejecutan a trav√©s de pruebas estad√≠sticas. </li><li>  Los resultados se visualizan en el portal interno el d√≠a despu√©s del lanzamiento. </li></ul><br><p>  Todo el transporte de datos en un ciclo lleva un d√≠a.  Como regla general, los experimentos duran una semana, pero el cliente recibe un incremento de resultados todos los d√≠as. </p><br><p>  Ahora profundicemos en los detalles. </p><br><h1 id="upravlenie-eksperimentom">  Gesti√≥n de experimentos </h1><br><p>  El panel de administraci√≥n usa el formato YAML para configurar los experimentos. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/lb/ko/k_/lbkok_pnexw8kzvdlkoq1jteuzy.png"></a> </p><br><p>  Esta es una soluci√≥n conveniente para un equipo peque√±o: finalizar las capacidades de la configuraci√≥n no tiene un frente.  El uso de configuraciones de texto simplifica el trabajo para el usuario: debe hacer menos clics con el mouse.  Una soluci√≥n similar es utilizada por el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">marco A / B de Airbnb</a> . </p><br><p>  Para dividir el tr√°fico en grupos, utilizamos la t√©cnica com√∫n de hash de sal. </p><br><p><img src="https://habrastorage.org/webt/fs/ar/r_/fsarr_kezrgckfiuvf1w1uyuqfs.png"></p><br><p>  Para eliminar el efecto de "memoria" de los usuarios, al comenzar un nuevo experimento, hacemos una mezcla adicional con la segunda sal: </p><br><p><img src="https://habrastorage.org/webt/3-/qd/w0/3-qdw0xc2l0swwonorrgkfd_lpg.png"></p><br><p>  El mismo principio se describe en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">presentaci√≥n de Yandex</a> . </p><br><p>  Para evitar intersecciones de experimentos potencialmente peligrosas, utilizamos una l√≥gica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">similar a las "capas" en Google</a> . </p><br><h1 id="sbor-metrik">  Colecci√≥n de m√©tricas </h1><br><p>  Colocamos registros sin procesar en Vertica y los agregamos en tablas de preparaci√≥n con la estructura: </p><br><p><img src="https://habrastorage.org/webt/v6/tw/bv/v6twbvgj-togpdbylpqq21gfbz0.png"></p><br><p>  Las observaciones suelen ser simples contadores de eventos.  Las observaciones se usan como componentes en la f√≥rmula de c√°lculo m√©trico. </p><br><p>  La f√≥rmula para calcular cualquier m√©trica es una fracci√≥n, cuyo numerador y denominador es la suma de las observaciones: </p><br><p><img src="https://habrastorage.org/webt/me/sb/or/mesbordzixv0yrcl4oo5nho5aa4.png"></p><br><p>  En uno de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">los informes</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Yandex, las</a> m√©tricas se dividieron en dos tipos: por usuarios y Ratio.  Esto tiene sentido comercial, pero en la infraestructura es m√°s conveniente considerar todas las m√©tricas de la misma manera que Ratio.  Esta generalizaci√≥n es v√°lida, porque la m√©trica "posyuzerny" es obviamente representable como una fracci√≥n: </p><br><p><img src="https://habrastorage.org/webt/d_/ih/l5/d_ihl5vdcvdguaohaytz5xkfepy.png"></p><br><p>  Resumimos las observaciones en el numerador y el denominador de la m√©trica de dos maneras. <br>  Simple: </p><br><p><img src="https://habrastorage.org/webt/q9/fk/vc/q9fkvc6qsmj6dzwqknqnqwpgrts.png"></p><br><p>  Esta es la cantidad habitual de cualquier conjunto de observaciones: el n√∫mero de b√∫squedas, clics en anuncios, etc. <br>  Y m√°s complicado: </p><br><p><img src="https://habrastorage.org/webt/iu/_s/ru/iu_srukdm2pyxrvoizc68butlx8.png"></p><br><p>  Un n√∫mero √∫nico de claves, en la agrupaci√≥n por la cual el total de observaciones es mayor que un umbral dado. </p><br><p>  Dichas f√≥rmulas se configuran f√°cilmente con la configuraci√≥n YAML: </p><br><p><img src="https://habrastorage.org/webt/ga/i3/qj/gai3qjape-xmwg2pyfg0snj6lao.png"></p><br><p>  Los par√°metros groupby y umbral son opcionales.  Solo ellos determinan el segundo m√©todo de suma. </p><br><p>  Los est√°ndares descritos le permiten configurar casi cualquier m√©trica en l√≠nea que se le ocurra.  Al mismo tiempo, se conserva una l√≥gica simple que no impone una carga excesiva en la infraestructura. </p><br><h1 id="statisticheskiy-kriteriy">  Criterio estad√≠stico </h1><br><p>  Medimos la importancia de las desviaciones por m√©trica utilizando los m√©todos cl√°sicos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">prueba T, prueba</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">U de Mann-Whitney</a> .  La principal condici√≥n necesaria para aplicar estos criterios es que las observaciones en la muestra no deben depender unas de otras.  En casi todos nuestros experimentos, creemos que los usuarios (Uid) satisfacen esta condici√≥n. </p><br><p><img src="https://habrastorage.org/webt/v-/ya/nz/v-yanzyx8c--fqqgnzkhlkg4j0c.png"></p><br><p>  Ahora surge la pregunta: ¬øc√≥mo realizar la prueba T y la prueba MW para las m√©tricas de relaci√≥n?  Para la prueba T, debe poder leer la varianza de la muestra, y para MW, la muestra debe estar "definida por el usuario". </p><br><p><img src="https://habrastorage.org/webt/d-/7j/p2/d-7jp2xfsktkjajzki-wrp8sugw.png"></p><br><p>  Respuesta: necesita expandir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ratio en una serie de Taylor a primer orden en un punto</a> <math> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>E</mi></mrow><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo stretchy=&quot;false&quot;>[</mo><mi>X</mi><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>E</mi></mrow><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo stretchy=&quot;false&quot;>[</mo><mi>Y</mi><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy=&quot;false&quot;>]</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="33.139ex" height="2.66ex" viewBox="0 -832 14268.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-45" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-6C" x="1404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-65" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-66" x="2169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-74" x="2719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMAIN-5B" x="3081" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-58" x="3359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-72" x="4462" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-69" x="4913" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-67" x="5259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-68" x="5739" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-74" x="6316" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMAIN-5D" x="6677" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMAIN-2C" x="6956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-45" x="7401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-6C" x="8415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-65" x="8714" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-66" x="9180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-74" x="9731" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMAIN-5B" x="10092" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-59" x="10371" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-72" x="11384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-69" x="11836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-67" x="12181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-68" x="12662" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMATHI-74" x="13238" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMAIN-5D" x="13600" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhjIbvi0ua4XxFZFsAZNV4CY3FFmrQ#MJMAIN-29" x="13878" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></mi></mrow><mtext>&nbsp;</mtext><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></mi><mtext>&nbsp;</mtext><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yo</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></mi></mrow><mtext>&nbsp;</mtext><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></mi><mtext>&nbsp;</mtext><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yo</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> ({E} \ left [X \ right], {E} \ left [Y \ right]) </script>   : </p><br><p><img src="https://habrastorage.org/webt/ky/im/td/kyimtdhnynvygcu_r867uzeoubu.png"></p><br><p>  Esta f√≥rmula convierte dos muestras (numerador y denominador) en una, preservando la media y la varianza (asint√≥ticamente), lo que permite el uso de estad√≠sticas cl√°sicas.  pruebas </p><br><p><img src="https://habrastorage.org/webt/il/h3/ac/ilh3acbdbdjnszyjezba85ee4ku.png"></p><br><p>  Los colegas de Yandex llaman a una idea similar el m√©todo de linealizaci√≥n de la relaci√≥n (apariciones de una y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dos</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">veces</a> ). </p><br><h1 id="proizvoditelnost-pri-masshtabirovanii">  Rendimiento de escala </h1><br><p>  Uso r√°pido para estad√≠sticas de CPU.  Los criterios permiten llevar a cabo millones de iteraciones (comparaciones de tratamiento frente a control) en minutos en un servidor completamente normal con 56 n√∫cleos.  Pero en el caso de grandes vol√∫menes de datos, el rendimiento descansa, en primer lugar, en el almacenamiento y el tiempo de lectura del disco. </p><br><p>  El c√°lculo diario de las m√©tricas Uid genera muestras con un tama√±o total de cientos de miles de millones de valores (debido a la gran cantidad de experimentos simult√°neos, cientos de m√©tricas y acumulaci√≥n acumulativa).  Es demasiado problem√°tico exprimir tales vol√∫menes del disco todos los d√≠as (a pesar del gran grupo de la base de la columna Vertica).  Por lo tanto, nos vemos obligados a reducir la cardinalidad de los datos.  Pero hacemos esto casi sin p√©rdida de informaci√≥n sobre la varianza utilizando una t√©cnica llamada "Bucket". </p><br><p>  La idea es simple: dividimos los Uid y, seg√∫n el resto de la divisi√≥n, los "dispersamos" en varios cubos (denotamos su n√∫mero por B): </p><br><p><img src="https://habrastorage.org/webt/cd/1h/x-/cd1hx-k8rgilkmwxafotz3-tgok.png"></p><br><p>  Ahora pasamos a la nueva unidad experimental: el cubo.  Resumimos las observaciones en el cubo (el numerador y el denominador son independientes): </p><br><p><img src="https://habrastorage.org/webt/yv/jq/bz/yvjqbz34yd8yswtoff50zpgj3g0.png"></p><br><p>  Con esta transformaci√≥n, se cumple la condici√≥n de independencia de las observaciones, el valor de la m√©trica no cambia y es f√°cil verificar que se conserva la varianza de la m√©trica (promedio sobre la muestra de observaciones): </p><br><p><img src="https://habrastorage.org/webt/df/ku/6p/dfku6pb74plagc0doxg62blhdly.png"></p><br><p>  Cuanto m√°s cubeta, menos informaci√≥n se pierde y menor es el error en igualdad.  En Avito, tomamos B = 200. </p><br><p>  La densidad de distribuci√≥n m√©trica despu√©s de la conversi√≥n del cubo siempre se vuelve similar a la normal. </p><br><p><img src="https://habrastorage.org/webt/fk/sa/rf/fksarfomowkwdzzhwveb10vbtr0.png"></p><br><p>  Se pueden reducir a un tama√±o fijo tantas muestras grandes como desee.  El crecimiento en la cantidad de datos almacenados en este caso solo depende linealmente del n√∫mero de experimentos y m√©tricas. </p><br><h1 id="vizualizaciya-rezultatov">  Visualizaci√≥n de resultados </h1><br><p>  Como herramienta de visualizaci√≥n, utilizamos Tableau y webview en Tableau Server.  Todos los empleados de Avito tienen acceso all√≠.  Cabe se√±alar que Tableau hace bien el trabajo.  Implementar una soluci√≥n similar usando un desarrollo completo de atr√°s / adelante ser√≠a una tarea mucho m√°s intensiva en recursos. </p><br><p>  Los resultados de cada experimento son una hoja de varios miles de n√∫meros.  La visualizaci√≥n debe ser tal que minimice las conclusiones incorrectas en el caso de la implementaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">errores del primer y segundo tipo</a> y, al mismo tiempo, no "omita" los cambios en m√©tricas y secciones importantes. </p><br><p>  Primero, monitoreamos las m√©tricas de "salud" de los experimentos.  Es decir, respondemos las preguntas: "¬øEs cierto que los participantes fueron" vertidos "en cada uno de los grupos?", "¬øEs igual a los usuarios autorizados o nuevos?" </p><br><p> <a href=""><img src="https://habrastorage.org/webt/k1/-r/-x/k1-r-xrjn1gyeg8-o6-9eolq-qe.png"></a> </p><br><p>  En el caso de desviaciones estad√≠sticamente significativas, se resaltan las celdas correspondientes.  Cuando pasa el cursor sobre cualquier n√∫mero, se muestra la din√°mica acumulativa del d√≠a. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ju/ke/z0/jukez0yfvsmoyu_gmpy384rsmzc.png" width="600"></a> </p><br><p>  El panel principal con m√©tricas se ve as√≠: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ng/mb/ju/ngmbjufio9wsbf0mnpld0ldqajq.png"></a> </p><br><p>  Cada fila es una comparaci√≥n de grupos por una m√©trica espec√≠fica en una secci√≥n espec√≠fica.  A la derecha hay un panel con filtros para experimentos y m√©tricas.  Panel de filtro de la secci√≥n inferior. </p><br><p>  Cada comparaci√≥n de m√©trica consta de varias m√©tricas.  Analicemos sus valores de izquierda a derecha: </p><br><p>  <strong>1. MDE.</strong>  <strong>Efecto m√≠nimo detectable</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/sy/xw/gk/syxwgkaimg-pgsqtnrriv8ybf5e.png"></a> </p><br><p>  ‚ç∫ y Œ≤ son probabilidades de error preseleccionadas del primer y segundo tipo.  MDE es muy importante si el cambio no es estad√≠sticamente significativo.  Al tomar una decisi√≥n, el cliente debe recordar que la falta de estad√≠sticas.  la importancia no equivale a ning√∫n efecto.  De manera bastante confiable, solo podemos decir que el posible efecto no es m√°s que MDE. </p><br><p>  <strong>2. MW |</strong>  <strong>T. Mann-Whitney Resultados de las pruebas U y T</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/za/vs/j8/zavsj8pnzmrazz-maz_lucwjrti.png"></a> </p><br><p>  El panel muestra el valor de las estad√≠sticas z y t (para MW y T, respectivamente).  En una descripci√≥n emergente: din√°mica del valor p.  Si el cambio es significativo, la celda se resalta en rojo o verde, seg√∫n el signo de la diferencia entre los grupos.  En este caso, decimos que la m√©trica est√° "coloreada". </p><br><p>  <strong>3. Ascensor.</strong>  <strong>Diferencia porcentual entre grupos</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/cr/db/fk/crdbfkcytwrjdzez3l-v1gu1c8e.png"></a> </p><br><p>  <strong>4. Media |</strong>  <strong>Num |</strong>  <strong>Den</strong>  <strong>Valor m√©trico, as√≠ como numerador y denominador por separado</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/8d/kc/wp/8dkcwpugkmf6f6qqdrmnksp-rda.png"></a> </p><br><p>  Aplicamos otra prueba T al numerador y al denominador, lo que ayuda a comprender qu√© contribuci√≥n es decisiva. </p><br><p>  <strong>5. Std.</strong>  <strong>Desviaci√≥n est√°ndar selectiva</strong> <br>  <strong>6. Hist.</strong>  <strong>Prueba de Shapiro-Wilk para la normalidad de la distribuci√≥n de "cubos".</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/0d/dh/h6/0ddhh68_mdhgjpb6dyufnucnmfc.png"></a> </p><br><p>  Si el indicador es rojo, entonces quiz√°s la muestra tenga valores at√≠picos o una cola anormalmente larga.  En este caso, debe tomar el resultado de acuerdo con esta m√©trica con cuidado, o nada en absoluto.  Al hacer clic en el indicador, se abre el histograma de la m√©trica por grupo.  El histograma muestra claramente anomal√≠as: es m√°s f√°cil sacar conclusiones. </p><br><h1 id="zaklyuchenie">  Conclusi√≥n </h1><br><p>  El surgimiento de la plataforma A / B en Avito es un hito cuando nuestro producto comenz√≥ a crecer m√°s r√°pido.  Todos los d√≠as, realizamos experimentos ecol√≥gicos que cargan al equipo;  y "rojos", que proporcionan alimento saludable para el pensamiento. </p><br><p>  Logramos construir un sistema efectivo de pruebas y m√©tricas A / B.  A menudo resolvimos problemas complejos con m√©todos simples.  Debido a esta simplicidad, la infraestructura tiene un buen margen de seguridad. </p><br><p>  Estoy seguro de que aquellos que van a construir la plataforma A / B en su empresa encontraron algunas ideas interesantes en el art√≠culo.  Me complace compartir nuestra experiencia con usted. </p><br><p>  Escriba preguntas y comentarios, trataremos de responderlas. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/454164/">https://habr.com/ru/post/454164/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454144/index.html">En Java 13 quieren agregar "bloques de texto"</a></li>
<li><a href="../454148/index.html">Comprobaci√≥n del rendimiento del SOC</a></li>
<li><a href="../454154/index.html">"Ramas del infierno": control en la nube de vertederos ilegales y vertederos peligrosos</a></li>
<li><a href="../454156/index.html">Neum√°ticos y protocolos en automatizaci√≥n industrial: c√≥mo funciona todo</a></li>
<li><a href="../454160/index.html">Uso de PowerShell para aumentar los privilegios de la cuenta local</a></li>
<li><a href="../454166/index.html">6 de junio - Foro VeeamON en Mosc√∫</a></li>
<li><a href="../454168/index.html">La arena principal del pa√≠s. ¬øC√≥mo se actualiz√≥ Luzhniki antes de la Copa del Mundo?</a></li>
<li><a href="../454170/index.html">Bienvenido al DroidHeads Meetup 8 de junio</a></li>
<li><a href="../454172/index.html">Env√≠o de estad√≠sticas de un DataFrame a BigQuery usando Yandex. Estad√≠sticas directas como ejemplo</a></li>
<li><a href="../454176/index.html">Uibook: una herramienta de prueba visual para reaccionar componentes con consultas de medios</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>