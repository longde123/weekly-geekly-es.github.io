<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåØ ü§öüèª üé® Radio WiFi WOLNA. C√≥mo se cre√≥ una peque√±a startup üéâ üßí üßëüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No hace mucho tiempo, puse en un tribunal p√∫blico un dispositivo de mi propio dise√±o, que se desarroll√≥ el a√±o pasado. Esta es una radio por internet ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Radio WiFi WOLNA. C√≥mo se cre√≥ una peque√±a startup</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403239/"> No hace mucho tiempo, puse en un tribunal p√∫blico un dispositivo de mi propio dise√±o, que se desarroll√≥ el a√±o pasado.  Esta es una radio por internet con wifi. <br><br><img src="https://habrastorage.org/files/f54/afe/69e/f54afe69e5d844a494f9a0dfec8604c4.png" alt="imagen"><br><br>  Se propone votar a favor o en contra de las personas en rublos en uno de los sitios de crowdfunding.  El dispositivo no caus√≥ gran revuelo, aunque ya hay patrocinadores.  Pero desde entonces ha habido muchas preguntas t√©cnicas y solicitudes para dise√±ar los circuitos y el firmware.  Todos los que est√©n interesados ‚Äã‚Äãen c√≥mo naci√≥ el dispositivo y de qu√© est√° hecho, son bienvenidos. <br>  <i>Spoiler:</i> no habr√° firmware. <br><a name="habracut"></a><br>  Entonces, todo comenz√≥ con la necesidad de tener una radio en casa en la cocina.  Por supuesto, como desarrollador de electr√≥nica, inmediatamente descart√© la opci√≥n de ir a la tienda y comprar.  Por cierto, por esta raz√≥n, todav√≠a no tengo un timbre normal. <br><br>  La radio FM se abandon√≥ debido a la implementaci√≥n aburrida.  Y se decidi√≥ hacer una radio por Internet.  Mirando hacia el futuro, quiero mostrar que tal receptor result√≥ aqu√≠. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/wiW4ZcnPw18" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>Selecci√≥n de hierro</b> <br><br>  Primero, era necesario elegir una plataforma en la que pudiera construir una radio por Internet.  Hay muchas opciones, pero eleg√≠ lo que estaba a la mano: <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Odroid W</a> + LCD <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">STM32F4DISCOVERY</a> + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ESP8266</a> + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">VS1053B</a> <br><br>  En una odroid, el proceso de desarrollo llevar√≠a menos tiempo, pero los inconvenientes, en mi caso particular (muchos no est√°n de acuerdo conmigo), prevalecieron: <br><br>  - el proceso de carga del sistema operativo lleva algo de tiempo <br>  - Una tendencia creciente a infectar dispositivos IoT con virus <br>  - Tengo poco conocimiento del desarrollo de Linux <br>  - precio <br><br>  Sin embargo, le ped√≠ a uno de mis buenos amigos que escribiera un softink para Odroid W, que comenzar√≠a desde el inicio del sistema y reproducir√≠a la radio por Internet.  Pero la incapacidad de editar correctamente el proyecto sin sacudir a un compa√±ero enterr√≥ esta opci√≥n y me empuj√≥ a la segunda. <br><br>  Y puse el siguiente diagrama en una placa de pruebas: <br><br><img src="https://habrastorage.org/files/c09/207/c4d/c09207c4d0bb40d589c165e8493d4d7e.png" alt="imagen"><br><br>  <b>C√≥mo trabajar con radio por internet</b> <br><br>  Despu√©s de eso, comenc√© a ver c√≥mo funciona la radio por Internet.  Result√≥ que la gran mayor√≠a de las estaciones usan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Icecast</a> para transmitir.  Gira en alg√∫n lugar de un servidor con una IP fija y espera una conexi√≥n.  Como regla, en el puerto 8000 o 8080.  Aunque hay muchas excepciones.  Despu√©s de conectarse, debe enviar una solicitud de este tipo, sustituyendo el nombre de la secuencia y el servidor: <br><br><pre><code class="hljs powershell">GET /stream HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> Icy<span class="hljs-literal"><span class="hljs-literal">-MetaData</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> User<span class="hljs-literal"><span class="hljs-literal">-Agent</span></span>: Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (X11; U; Linux i686; en<span class="hljs-literal"><span class="hljs-literal">-US</span></span>; rv:<span class="hljs-number"><span class="hljs-number">1.6</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">20040413</span></span> Epiphany/<span class="hljs-number"><span class="hljs-number">1.2</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> Host: internetradioserver.ru Cache<span class="hljs-literal"><span class="hljs-literal">-Control</span></span>: no<span class="hljs-literal"><span class="hljs-literal">-cache</span></span></code> </pre> <br>  En respuesta, comienza a caer un flujo <s>interminable de</s> mp3, que ya puede decodificarse y reproducirse. <br><br>  La apertura de una conexi√≥n TCP y otras alegr√≠as de trabajar con el ESP8266 se realizan mediante comandos AT.  No me detendr√© en ellos, la informaci√≥n est√° completa en Internet.  Todo est√° muy bien pintado en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">comunidad de habla rusa esp8266</a> .  El procedimiento para trabajar con √©l es simple: <br><br>  1. Estamos esperando una conexi√≥n WiFi, si no est√° all√≠, seleccione una red, ingrese la contrase√±a. <br>  2. Abrimos la conexi√≥n TCP con el servidor de la estaci√≥n de radio.  Las direcciones de los servidores, los puertos y los nombres de las secuencias se almacenan directamente en la memoria flash del microcontrolador, pero m√°s sobre eso m√°s adelante. <br>  3. Env√≠e la solicitud GET arriba. <br>  4. Recibimos en respuesta un flujo continuo de mp3. <br>  5. Si necesita cambiar la estaci√≥n, cierre la conexi√≥n TCP y repita desde el paso 2. <br><br>  Te contar√© un poco sobre c√≥mo las estaciones entran en la memoria flash del microcontrolador.  Inicialmente, en la etapa de verificaci√≥n, simplemente escrib√≠ direcciones, n√∫meros de puerto y nombres de flujo en una de las p√°ginas de memoria del programa.  Pero con el tiempo, cuando los dispositivos se dispersaron entre familiares y amigos, tuve que agregar la capacidad de actualizar centralmente la lista.  Se decidi√≥ crear un servidor con una IP fija, en la que se almacenar√≠a un archivo con una lista de estaciones.  Cuando se conecta a trav√©s de TCP, el servidor espera una contrase√±a y emite un archivo, y el microcontrolador lo escribe en su memoria flash.  Desde que encontr√© por primera vez la creaci√≥n de "algo en Internet", me sorprendi√≥ gratamente que resulta que alquilar una m√°quina virtual con una IP fija cuesta solo 100 rublos al mes.  Milagros :) <br><br>  <b>Circuiter√≠a</b> <br><br>  Despu√©s de jugar lo suficiente con STM32F4Discovery, decid√≠ hacer mi propia tarjeta, en la que se ubicar√≠an todos los elementos del receptor, y no necesitar√© tirar de los cables ni a la pantalla ni a los conectores.  Esto mejora enormemente la fiabilidad y la capacidad de fabricaci√≥n <s>y todos lo sue√±an</s> . <br><br>  El esquema se puede descargar aqu√≠.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[DIAGRAMA]</a>  No la adorn√© ni la pein√© espec√≠ficamente para su publicaci√≥n.  Esta es una opci√≥n de trabajo, y deber√≠a ser suficiente para aquellos que est√°n realmente interesados. <br><br>  El esquema consta de las partes principales: <br><br>  1. MK STM32F415 con arn√©s: dos de cuarzo y una bater√≠a para un reloj en tiempo real. <br>  2. ESP8266 <br>  3. VS1053 con flejes estrictamente en la hoja de datos.  Comenz√≥ en MK a trav√©s de SPI. <br>  4. Potencia: dos reguladores lineales LM1117 a 3.3 y 1.8 voltios. <br>  5. Pantalla, conectores, botones, potenci√≥metro.  Todo esto est√° instituido en el microcontrolador GPIO. <br><br>  Adem√°s, el amplificador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PAM8403</a> clase D no se muestra en el diagrama, ya que cuesta un m√≥dulo comprado por separado. <br><br>  <b>Tarifa</b> <br><br>  Para bien, antes de hacer el tablero, debe determinar la ubicaci√≥n de los elementos que sobresalen del cuerpo: botones, conectores, pantalla.  As√≠ lo hice, pero sobre el caso m√°s tarde. <br><br>  El tablero result√≥ as√≠.  ¬°Cuidado geek fresa! <br><br><img src="https://habrastorage.org/files/2b5/487/9d8/2b54879d8f6d4bf98a54004cccaf298b.JPG" alt="imagen"><br><br><img src="https://habrastorage.org/files/c9b/e26/4f7/c9be264f79f147428eed3b0bab40d95b.JPG" alt="imagen"><br><br><img src="https://habrastorage.org/files/819/d14/f09/819d14f09d91481785ce9787f32160a2.JPG" alt="imagen"><br><br>  El tablero es de dos capas, un espesor de 1,5 mm.  Todos los componentes smd est√°n ubicados en un lado, lo que facilita la instalaci√≥n autom√°tica.  Sin embargo, el asunto a√∫n no le ha llegado. <br><br>  Varios expertos ya me rega√±aron en pikabu por peque√±os defectos en el cableado.  Sin embargo, el tablero funciona, y funciona como deber√≠a.  No veo el valor en los dibujos del tablero, as√≠ que no lo publico.  Si hay solicitudes, lo publicar√©.  De todos modos, lo rehacer√©.  Y, por supuesto, ¬°las cr√≠ticas bien fundadas son bienvenidas! <br><br>  <b>Vivienda</b> <br><br>  El caso es un dolor de todos los ingenieros electr√≥nicos aficionados.  E incluso si no eres un aficionado, haciendo un caso por tu dinero te conviertes en √©l. <br><br>  En lotes peque√±os, la opci√≥n m√°s econ√≥mica es el fresado o el corte por l√°ser.  Con las opciones de metal, todav√≠a se puede doblar chapa, pero este no es mi caso.  Por lo tanto, eleg√≠ el fresado de piezas de madera + corte l√°ser de paneles.  En t√©rminos de sonido, una caja de madera tambi√©n es una gran ventaja. <br><br>  El resultado fue este conjunto de partes: <br><br><img src="https://habrastorage.org/files/0a9/510/970/0a9510970e2d4339982a28f32bdf729a.JPG" alt="imagen"><br><br>  Especial atenci√≥n merece la inscripci√≥n.  Despu√©s de mucho pensar, c√≥mo aplicarlos, se decidi√≥ realizarlos mediante lechada.  Es decir, primero, con un molino delgado, la inscripci√≥n se selecciona en el panel y luego se vierte pintura all√≠.  Despu√©s de que la pintura se seque, se elimina su exceso.  Una operaci√≥n muy costosa, pero ya no me deten√≠a.  Adem√°s, una de las formas m√°s duraderas.  Si alguien tiene experiencia con otras formas de aplicar etiquetas, por favor comparta. <br><br>  As√≠ es como se ven las inscripciones resultantes. <br><br><img src="https://habrastorage.org/files/05b/6e7/48c/05b6e748cb9e43aa9df7d02b72686eb8.JPG" alt="imagen"><br><br>  Y aqu√≠ est√° la radio ensamblada desde adentro: <br><br><img src="https://habrastorage.org/files/02e/abe/567/02eabe56732143659518590266241998.JPG" alt="imagen"><br><br>  Y una foto m√°s afuera: <br><br><img src="https://habrastorage.org/files/e3c/f6b/ab8/e3cf6bab85ca4789ae85310c6257eee8.JPG" alt="imagen"><br><br>  Conclusi√≥n  Este art√≠culo describi√≥ los detalles del desarrollo del dispositivo con trazos amplios.  Es bastante dif√≠cil escribir sobre los detalles, por un lado, por el hecho de que su mar, por otro lado, todos individualmente parecen obvios.  Podr√≠a escribir en un art√≠culo separado sobre circuitos, una placa de circuito impreso, firmware, trabajando con esp8266 y vs1053b, si tengo suficiente inter√©s definitivamente escribir√©.  Porque realmente quiero que la radio por Internet se vuelva popular. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es403239/">https://habr.com/ru/post/es403239/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es403229/index.html">Juegos de cartas de computadora: Streamers para ver</a></li>
<li><a href="../es403231/index.html">Invasores de retroceso o c√≥mo conectar una pantalla LED de 64x64 a Arduino</a></li>
<li><a href="../es403233/index.html">NASA: Encelado tiene todas las condiciones para el origen y mantenimiento de la vida.</a></li>
<li><a href="../es403235/index.html">¬øPor qu√© el segundo es m√°s interesante que el primero? Una nota sobre las nuevas escalas de Xiaomi</a></li>
<li><a href="../es403237/index.html">Agregar un contador SDM-220 a OpenHab</a></li>
<li><a href="../es403241/index.html">Preg√∫ntele a Ethan: ¬øC√≥mo interact√∫a la materia oscura con los agujeros negros?</a></li>
<li><a href="../es403245/index.html">C√≥mo comenzar a ensamblar un quadrocopter ZMR250 / QAV250 con Aliexpress (1 parte)</a></li>
<li><a href="../es403247/index.html">Microsoft corrigi√≥ vulnerabilidades de d√≠a cero en su software mucho antes de que fueran reveladas por Shadow Brokers</a></li>
<li><a href="../es403249/index.html">Los planes de la NASA est√°n cambiando: los lanzamientos de cohetes pesados ‚Äã‚Äãde la NASA probablemente sufrir√°n</a></li>
<li><a href="../es403253/index.html">Es razonable: ¬øpor qu√© el problema principal de la neurobiolog√≠a se refleja en la f√≠sica?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>