<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õµÔ∏è ü§ß üéµ Ordinateur portable maison ZedRipper sur seize Z80 üßùüèº ü§° üìä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un article du site de l'ing√©nieur fou de la maison Chris Fenton 



 D√©couvrez le ZedRipper, une b√™te √† 16 c≈ìurs fonctionnant √† 83 MHz et aliment√©e pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ordinateur portable maison ZedRipper sur seize Z80</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480290/">  <i>Un article du site de l'ing√©nieur fou de la maison <a href="http://www.chrisfenton.com/" rel="nofollow">Chris Fenton</a></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcc/4a1/93f/fcc4a193fa546d942e21526347e24679.jpg"><br><br>  D√©couvrez le ZedRipper, une b√™te √† 16 c≈ìurs fonctionnant √† 83 MHz et aliment√©e par des processeurs Z80, aussi portable qu'impossible.  Il s'agit de ma derni√®re tentative d'assembler un ordinateur pour le plaisir et d'avoir satisfait plusieurs souhaits √† la fois: <br><ul><li>  Enfin, utilisez le FPGA g√©ant, qui tra√Ænait avec moi au ralenti. </li><li>  Jouez une histoire alternative de la cr√©ation d'ordinateurs, en abordant la question du multit√¢che du point de vue du fer. </li><li>  Assemblez un ordinateur sur lequel je pourrais √©crire des programmes courts amusants sur le chemin du travail dans le train. </li><li>  Assembler une plateforme sur laquelle des exp√©riences relativement simples d'architecture informatique pourraient √™tre r√©alis√©es. </li></ul><br><a name="habracut"></a><br><h2>  Photos glamour </h2><br>  Si vous n'avez pas le temps de lire une feuille de texte sur une architecture informatique peu pratique ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcc/4a1/93f/fcc4a193fa546d942e21526347e24679.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fb/c99/c87/2fbc99c870e83ac52a8557bf0f4e185b.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f7/ed0/a6d/7f7ed0a6dd2340c931cff32d445c38b8.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c85/cb6/a6a/c85cb6a6a717959425d524318573be52.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/617/d68/eb6/617d68eb64fba0f72521e58efa206b07.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c0/b09/83b/9c0b0983b0d10cc8aa7ba98fd67dee8b.jpg"><br><br><h2>  Alors, quelle est cette b√™te? </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/622/9b6/781/6229b6781b68722c4dccea4c2ee48181.png"><br><br>  ZedRipper est le r√©sultat d'une tentative de construction de l'ordinateur le plus cool avec CP / M 2.2: <br><br><ul><li>  16 processeurs Z80 fonctionnant √† une fr√©quence de 83,33 MHz. </li><li>  64 Ko de m√©moire d√©di√©e pour chaque Z80. </li><li>  Acc√©l√©rateur de terminal compatible ANSI avec 16 sorties. </li><li>  Tous les processeurs et p√©riph√©riques sont connect√©s par un r√©seau en anneau unidirectionnel enti√®rement synchrone fonctionnant √† 83 MHz. </li><li>  Lecteur de 128 Mo sur une carte SD (16 disques de 8 Mo en CP / M). </li><li>  Un noyau ¬´serveur¬ª qui d√©marre dans CP / M 2.2 et ex√©cute le serveur de fichiers CP / NET (√©crit en Turbo Pascal 3 sur l'ordinateur lui-m√™me!), Qui fournit un acc√®s partag√© √† la carte SD. </li><li>  15 noyaux ¬´client¬ª lan√ßant CP / NOS √† partir de la ROM.  Chaque client a acc√®s √† un r√©f√©rentiel commun, et tout le monde peut ex√©cuter n'importe quel programme CP / M 2.2 sans rivaliser pour les ressources avec d'autres noyaux. </li></ul><br><h2>  Une autre route </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/7f7/ed0/a6d/7f7ed0a6dd2340c931cff32d445c38b8.jpg"><br>  <i>Est-ce les √©checs et Planetfall qui me distraient de mon √©diteur Turbo Pascal?</i> <br><br>  Apr√®s mes aventures avec le <a href="http://www.chrisfenton.com/dd9-kaypro-edition/" rel="nofollow">portage de jeux sur Kaypro</a> , j'ai eu une impression √©tonnamment chaleureuse de ce syst√®me d'exploitation primitif il y a 40 ans, et j'ai eu une id√©e que j'ai d√©cid√© de d√©velopper: et si l'histoire tournait dans la direction oppos√©e, et que le PC continuerait des chemins de d√©veloppement avec plusieurs processeurs tout de suite?  M√™me dans les ann√©es 1980, les processeurs eux-m√™mes (et bient√¥t la RAM) √©taient relativement peu co√ªteux, mais le multit√¢che sur PC √©tait bas√© uniquement sur des dur√©es de coupe r√©duites lorsqu'une grande ressource (RAM ou CPU) √©tait divis√©e entre des programmes concurrents.  Iron ne pouvait pas faire face √† cela (et il √©tait tr√®s difficile d'obtenir des programmes qui se comportent bien sur des syst√®mes d'exploitation tels que DOS) jusqu'√† ce que nous entrions dans l'√®re des 386 et des ordinateurs avec plus de 4 Mo de m√©moire. <br><br>  Au cours de mes passe-temps historiques avec les ordinateurs, je suis tomb√© sur quelque chose de tr√®s int√©ressant pour moi: au d√©but du d√©veloppement, le syst√®me d'exploitation <a href="https://ru.wikipedia.org/wiki/CP/M" rel="nofollow">CP / M</a> supportait une version ¬´r√©seau¬ª appel√©e CP / NET.  La plupart des gens connaissent encore son id√©e aujourd'hui - mettre au bureau une ou deux ¬´vraies¬ª machines avec de gros disques et imprimantes, dont les ressources seraient partag√©es entre des clients l√©gers, des terminaux avec CPU et RAM.  Chaque utilisateur travaillerait comme s'il avait sa propre machine ex√©cutant CP / M avec acc√®s √† de grands disques et imprimantes. <br><br>  Comme je l'ai mentionn√©, le CPU et la RAM (g√©n√©ralement le Z80 avait 64 Ko de DRAM) n'√©taient pas particuli√®rement chers, mais tous les pribluds externes n√©cessaires pour cr√©er un ordinateur utile (lecteurs, imprimantes, moniteurs, ..) s'ajoutaient au co√ªt total.  √Ä cette √©poque, l'ajout de plusieurs CPU / RAM √† un ordinateur semblait une approche quelque peu d√©cadente pour fournir √† un utilisateur plusieurs CPU et RAM.  M√™me CP / M est all√© dans le sens de diviser les longueurs de temps pour MP / M OS. <br><br>  J'ai trouv√© qu'Exidy s'en rapprochait le plus - en 1981, ils ont sorti leur machine Multi-NET 80, qui permettait d'ajouter jusqu'√† 16 cartes, chacune ayant un Z80 et une RAM.  Cependant, il a √©t√© con√ßu pour fonctionner jusqu'√† 16 utilisateurs individuels, et non pour le travail d'un seul utilisateur qui a lanc√© simultan√©ment 16 programmes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d6/f11/a67/1d6f11a67df9e98a54b3d8c22dbdada7.png"><br>  <i>Si proche ...</i> <br><br>  Avance rapide de 40 ans - les transistors ont en fait chut√©.  Apr√®s la fermeture du laboratoire, j'ai h√©rit√© de plusieurs FPGA monstrueux (Stratix IV 530GX), et j'ai pens√© qu'il serait si int√©ressant de le faire avec l'un d'eux.  √Ä un moment donn√©, je suis tomb√© sur un projet tr√®s int√©ressant de Grant Searle <a href="http://www.searle.wales/" rel="nofollow">Multi-Comp</a> , et il √©tait assez facile d'assembler une machine fonctionnelle avec CP / M et un processeur.  Mais j'avais besoin de plus.  J'ai d√©cid√© de voir si je pouvais cr√©er une machine multic≈ìur sur CP / M avec de vrais multit√¢ches - rien de d√©licat, juste de la force brute. <br><br><h2>  Nous configurons et lan√ßons des logiciels </h2><br>  Dans ce projet, je me suis principalement concentr√© sur le mat√©riel, et je n'ai pas √©crit une seule ligne de code dans l'assembleur.  Le CPU 0 se charge directement √† partir de la ROM, que j'ai prise de Grant, et les n≈ìuds restants sont charg√©s √† partir de la ROM 4K / CP / NOS, que j'ai prise du simulateur Atari. <br><br>  Les deux ROMs attendent une connexion √† un terminal s√©rie via une interface standard, tandis que les clients CP / NOS attendent un autre port s√©rie connect√© √† un serveur.  Il est facile de concevoir votre propre logique sur de si grands FPGA.  J'ai d√©velopp√© ma logique de d√©codage d'adresses, gr√¢ce √† laquelle le Z-Ring pour chaque CPU appara√Æt dans le sch√©ma de mappage d'adresses si n√©cessaire. <br><br><h2>  √Ä l'int√©rieur </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/c32/b62/68b/c32b6268b1bab5acd982289313128e16.jpg"><br><br>  Le c≈ìur du ZedRipper est l'un de ces √©normes FPGA Stratix IV 530GX.  La carte HSMC est utilis√©e pour l'affichage, la r√©ception des donn√©es du contr√¥leur de clavier et la connexion √† la carte SD.  Ethernet est utilis√© pour t√©l√©charger le firmware, il y a donc un tel port sur le c√¥t√© du bo√Ætier, ainsi qu'un adaptateur pour carte SD et un emplacement pour un port s√©rie externe (pas encore utilis√©). <br><br><h2>  Clavier et contr√¥leur </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/390/d96/b74/390d96b74f1ada63b46ec54ca89014aa.jpg"><br>  <i>Clavier et trou au premier plan, o√π un dispositif de positionnement sera install√© plus tard</i> <br><br>  J'avais un clavier PS / 2 compact qui tra√Ænait (de l'un de mes anciens projets avec un ordinateur portable), et je voulais le connecter aux E / S 2,5 V de mon FPGA.  J'ai d√©cid√© de suivre la voie facile et d'ajouter un microcontr√¥leur Teensy 2.0 au bundle. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/31d/afb/25d/31dafb25dab1f3c7760b8279f69d656a.jpg"><br>  <i>Contr√¥leur de colle chaude au bas du clavier</i> <br><br>  Cela a permis de traduire PS / 2 en ASCII, ainsi que de marquer facilement certaines des touches suppl√©mentaires (F1-F12) en s√©quences ¬´magiques¬ª de commandes de terminal, pour plus de commodit√©.  Le contr√¥leur fournit ensuite Z80 octets pour UART √† 9600 bauds (en utilisant un simple diviseur de tension qui change de 5 V √† 2,5 V pour FPGA).  √âtant donn√© que ce projet a √©t√© assembl√© √† partir de diverses ordures se trouvant dans mon atelier, c'√©tait une solution pratique qui s'est bien r√©v√©l√©e au travail. <br><br><h2>  Affichage </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/29d/509/095/29d50909504950789ba6240785a8b5dc.jpg"><br>  <i>L'√©cran de chargement, le serveur s'ex√©cute dans le coin sup√©rieur gauche et trois programmes utilisateur diff√©rents fonctionnent sur des noyaux distincts</i> <br><br>  Caract√©ristiques d'affichage: 1280 √ó 800 10,1 ‚Ä≥, et il comprend VGA.  FPGA utilise un simple r√©seau de r√©sistances pour fournir jusqu'√† 64 couleurs (R2G2B2).  L'affichage n√©cessite une minuterie de 83,33 MHz (1280 √ó 800 √† 60 Hz), donc pour plus de simplicit√©, tout le circuit fonctionne √† cette fr√©quence. <br><br>  Le projet de Grant, Multicomp, avait un code VHDL pour un simple terminal compatible ANSI.  J'ai r√©√©crit sa logique sur Verilog, puis d√©velopp√© un contr√¥leur vid√©o prenant en charge 16 terminaux ind√©pendants connect√©s via un n≈ìud Z-Ring.  L'affichage 1280 √ó 800 est consid√©r√© comme un affichage de 160x50 caract√®res (avec une police 8x16), et chaque terminal fonctionne comme un "sprite" 80x25 qui peut √™tre d√©plac√© n'importe o√π sur l'√©cran (avec une liste de priorit√©s qui ajuste la s√©quence de rendu du terminal).  √âtant donn√© que chaque terminal fonctionne ind√©pendamment des autres, il poss√®de sa propre machine d'√©tat, avec 2 Ko de RAM pour les caract√®res et 2 Ko ¬´d'attributs¬ª (pour stocker les informations de couleur).  Chaque caract√®re prend en charge les couleurs d'arri√®re-plan et de caract√®re 4 bits.  √âtant donn√© que tous les terminaux doivent avoir les m√™mes caract√®res d'indentation et qu'une cellule 8x16 ne peut contenir qu'un seul caract√®re, tous les terminaux peuvent utiliser la m√™me ROM de 2 Ko contenant une police.  En g√©n√©ral, la logique d'affichage utilise environ 66 Ko de RAM de bloc. <br><br>  En g√©n√©ral, je re√ßois un gestionnaire de fen√™tres tr√®s simple pour mes terminaux CP / M, qui fonctionne presque enti√®rement en raison du mat√©riel.  C'est l'un des domaines de recherche les plus riches - jusqu'√† pr√©sent, seul le processeur du serveur est capable de r√©organiser les terminaux, mais j'ai des plans ambitieux pour ajouter un dispositif de positionnement tel qu'une souris, qui permet d'utiliser le mat√©riel Windows uniquement pour faire glisser les fen√™tres et modifier la priorit√© des affichages. <br><br>  √âtant donn√© que le contr√¥leur de terminal n'est qu'un des n≈ìuds Z-Ring (et rediriger cette interface vers l'un des Z80 est tr√®s simple), parmi les plans futurs, il sera possible d'ajouter un terminal ¬´plein √©cran¬ª 160x50 (√©ventuellement comme ¬´arri√®re-plan¬ª), et un v√©ritable affichage 1280x800x64 couleurs avec SRAM externe rapide sur la carte. <br><br><h2>  Anneau en Z </h2><br>  Comment assembler un tas de Z80?  Dans mon travail, j'ai fermement appris une chose: d√©velopper des r√©seaux est difficile.  Les objectifs g√©n√©raux de ce r√©seau √©taient les suivants: <br><br><ul><li>  Impl√©mentation simple. </li><li>  Interface simple </li><li>  Extensibilit√© arbitraire. </li><li>  Performances ad√©quates. </li></ul><br>  Comme je l'ai d√©j√† mentionn√©, mes Z80 s'attendent √† se connecter √† des ports s√©rie, donc l'interface √©tait assez simple √† faire - elle devait √™tre d√©guis√©e en port s√©rie!  Essentiellement, Z-Ring est un r√©seau en anneau synchrone unidirectionnel qui utilise des ¬´cr√©dits¬ª pour contr√¥ler le flux.  Chaque n≈ìud a un tampon entrant de 1 octet pour chacun des autres n≈ìuds du r√©seau.  Apr√®s une r√©initialisation, chaque n≈ìud a 1 ¬´cr√©dit¬ª pour chacun des n≈ìuds de r√©seau restants.  Le sch√©ma est param√©tr√©, il est donc facilement extensible √† des centaines de n≈ìuds avec l'ajout d'une tr√®s petite quantit√© de logique, mais aujourd'hui Z-Ring prend en charge jusqu'√† 32 n≈ìuds (par cons√©quent, chaque n≈ìud a besoin d'un tampon de 32 octets). <br><br>  Le ¬´bus¬ª lui-m√™me se compose d'un bit de validit√©, d'un ID ¬´source¬ª, d'un ID ¬´cible¬ª et d'une charge utile de 1 octet (19 bits).  Je pense que ce serait assez simple √† impl√©menter en utilisant la logique TTL (si une personne avait √©chou√© en 1981 et n‚Äôavait pas pu trouver de FPGA).  Chaque "noeud" poss√®de 2 pipelines pour les d√©clencheurs de bus - 0 et 1 √©tages - et lorsque vous entrez un message, il attend que le 0e √©tage soit vide, puis fusionne avec le 1er.  Les messages sont entr√©s sur le n≈ìud source et voyagent autour de l'anneau jusqu'√† ce qu'ils atteignent la cible, apr√®s quoi ils se retrouvent dans le tampon appropri√© et mettent √† jour l'indicateur de disponibilit√© des donn√©es.  Lorsque le n≈ìud de r√©ception lit le tampon, il entre de nouveau dans le message d'origine, qui continue de voyager autour de l'anneau jusqu'√† ce qu'il atteigne √† nouveau la source, renvoyant le ¬´cr√©dit¬ª.  Si vous envoyez le colis √† une adresse inexistante, le pr√™t sera rembours√© automatiquement apr√®s un cercle complet. <br><br>  √âtant donn√© que chaque arr√™t sur l'anneau se compose de deux √©tages de convoyeur et qu'il n'y a pas de contre-pression, chaque message ne prend pas plus de 2 * (nombre de n≈ìuds) cycles de livraison.  L'impl√©mentation actuelle a 17 n≈ìuds (16 CPU + contr√¥leur d'affichage / clavier), et elle fonctionne sur un temporisateur de 12 ns, il faut donc environ 400 ns pour d√©livrer un message et retourner un pr√™t.  Le contr√¥leur d'affichage peut envoyer du trafic avec un taux d'arriv√©e, de sorte que chaque CPU dispose d'une bande passante de 2 √† 2,5 Mb / s vers son terminal (le bus passe suffisamment pour fournir les 16 CPU), ce qui est beaucoup pour les terminaux. <br><br>  Dans la configuration actuelle, tout fonctionne bien, mais vous pouvez apporter des am√©liorations √©videntes: <br><br><ul><li>  Pour approfondir les tampons de r√©ception, ce qui augmentera le d√©bit des n≈ìuds - sur le FPGA, il existe de nombreux blocs libres de 1 Ko de RAM, qui prendront en charge 32 n≈ìuds avec 32 cr√©dits, de sorte que chaque processeur en th√©orie peut saturer le bus. </li><li>  Ajoutez la prise en charge du mode d'adresse.  L'ajout d'adresses 16 bits (ou plus) permettra un acc√®s direct √† la m√©moire (DMA) (et l'ajout de DMA √† chaque n≈ìud sera simple).  Le FPGA poss√®de une √©norme quantit√© de mat√©riel suppl√©mentaire (quelques m√©gaoctets de RAM statique et environ un gigaoctet de DDR3). </li><li>  Ajoutez le contr√¥le de flux (et la mise en m√©moire tampon) entre les n≈ìuds. </li></ul><br>  Mais tout cela peut attendre des temps meilleurs. <br><br><h2>  Nutrition! </h2><br>  Une carte de d√©bogage avec FPGA n√©cessite une alimentation d'entr√©e de 12 √† 20 V, un √©cran a besoin de 12 V et un clavier et un contr√¥leur ont besoin de 5 V. Il est pratique que le FPGA ait des contr√¥leurs de 3,3, 5 et 12 V, qui sont assez faciles √† connecter, donc Le FPGA est aliment√© directement par une batterie lithium-polym√®re √† 5000 mAh avec une tension de 14,4 V, puis distribue l'alimentation √† tous les autres appareils.  L'une des difficult√©s √©tait que je ne voulais pas d√©monter l'ordinateur portable √† chaque fois pour le charger, mais la batterie avait un connecteur d'alimentation + / - normal, ainsi qu'un connecteur ¬´d'√©quilibrage¬ª qui se connectait √† chaque cellule individuelle.  Ma solution imparfaite est que le bouton d'alimentation commute la connexion de la batterie entre l'alimentation FPGA et le connecteur de charge situ√© dans le logement ferm√© par un couvercle coulissant.  Pas tr√®s pratique, mais vous pouvez simplement faire glisser le couvercle et retirer les connecteurs √† partir de l√† pour les connecter √† la charge sans utiliser les cl√©s hexagonales. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/868/921/68d/86892168de9f84d1d7ab286b48ae5708.jpg"><br>  <i>La charge semble bizarre</i> <br><br>  Je n'ai pas test√© la batterie √† fond, mais elle dure au moins 3 heures (ce qui est plus que suffisant pour couvrir mes trajets en train).  Tr√®s probablement, il durera environ 6 heures sans aucune optimisation de la consommation.  Il ne prend pas en charge l'utilisation en m√™me temps que la charge, cependant, l'ordinateur portable fonctionne sur batterie suffisamment longtemps pour que ce ne soit pas un probl√®me. <br><br><h2>  Logement </h2><br>  Le cas de la conception ¬´hacker¬ª standard est une combinaison de contreplaqu√© de d√©coupe laser de 3 mm et de plastique imprim√© sur une imprimante 3D.  J'ai charg√© les charni√®res de l'√©cran √† ressort, donc en fait il ressemble √† un ordinateur portable ordinaire, quoique un peu lent.  Je voulais lui donner le look des ann√©es 1980, donc les coins sup√©rieurs de l'√©cran sont un peu comme Cray, et le faux support en cuir est fait sous les poignets.  Le bord du contreplaqu√© d√©coup√© au laser est tr√®s d√©sagr√©able pour les mains, donc ce support √©tait √©tonnamment fonctionnel. <br><br><h2>  La vitesse </h2><br>  Je n'ai pas essay√© un seul benchmark sp√©cifiquement pour CP / M (je suppose que oui, mais je ne l'ai pas sp√©cialement cherch√©).  Comme cette machine a √©t√© con√ßue pour √©crire des programmes en Turbo Pascal, j'ai essay√© plusieurs micro-tests de vitesse.  Il s'est av√©r√© 15 √† 35 K op√©rations en virgule flottante par seconde (en utilisant le type r√©el 48 bits dans TP), et environ 1 million d'op√©rations enti√®res par seconde (avec le type entier 16 bits).  Pas mal pour un processeur 8 bits et un environnement de programmation suffisamment pratique. <br><br>  Un projet int√©ressant pour l'avenir pourrait √™tre le d√©veloppement d'un acc√©l√©rateur pour les op√©rations en virgule flottante. <br><br><h2>  √âlimination FPGA </h2><br>  Toute la logique, comme je l'ai d√©j√† dit, est plut√¥t l√©g√®re et ne consomme qu'environ 7% des ressources de la puce (bien que 40% de la RAM totale du bloc et 100% de la RAM M144k). <br><br><ul><li>  ALUT multinationaux 31808/424960 (7%) </li><li>  ALUTES m√©moire 0/212 480 (0%) </li><li>  Registres logiques d√©di√©s 10,231 / 424,960 (2%) </li><li>  Utilisation logique 10% </li><li>  Total registres 10231 </li><li>  Nombre total de bits de m√©moire de bloc 9,005,056 / 21,233,664 (42%) </li><li>  √âl√©ments 18 bits du bloc DSP 0/1 024 (0%) </li></ul><br><h2>  Plans futurs </h2><br>  Dans mes plans imm√©diats (c'est-√†-dire que le fer est d√©j√† dans l'atelier, il suffit de trouver le temps de souder): <br><br><ul><li>  Colorez tout.  L'ordinateur portable est en contreplaqu√©, et je veux vraiment le recouvrir de quelque chose. </li><li>  Dispositif de positionnement du joystick  Connectez-le au contr√¥leur de clavier. </li><li>  Suivi de la batterie.  L'ADC sur le contr√¥leur de clavier facilite le suivi de la batterie, afin que je puisse comprendre √† quel niveau la charge. </li><li>  WiFi - J'ai ESP32 qui tra√Æne pour lancer Zimodem!  Avec le t√©l√©phone en mode point d'acc√®s, cela devrait me permettre d'aller en ligne en d√©placement.  Il existe de bonnes applications de terminal pour CP / M, mais ce serait bien d'√©crire quelque chose comme un client IRC ou un simple navigateur Web.  Il sera √©galement pratique d'utiliser le protocole de transfert de fichiers <a href="https://ru.wikipedia.org/wiki/Kermit_(%25D0%25BF%25D1%2580%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA%25D0%25BE%25D0%25BB)" rel="nofollow">Kermit</a> vers un ordinateur Linux moderne. </li><li>  Le port s√©rie, accessible de l'ext√©rieur, pour la connexion √† une autre machine (un connecteur a d√©j√† √©t√© imprim√© pour cela, il suffit de le souder). </li><li>  LED indiquant l'√©tat actuel.  Pour lui, il y a d√©j√† un trou √† l'avant - maintenant je pr√©vois de le connecter au signal d'acc√®s √† la carte SD. </li></ul><br>  √Ä plus long terme, j'attends avec impatience diverses id√©es de fer, qui seront amusantes √† exp√©rimenter avec: <br><br><ul><li>  Combien pouvez-vous overclocker le Z80?  La premi√®re √©tape consiste √† d√©lier la vitesse du processeur du pixel timer, cependant, il sera √©galement int√©ressant d'essayer d'appliquer des techniques informatiques modernes au Z80 (pipelines, changement de nom de registre, pr√©dicteur de branche, etc.). </li><li>  Il peut √™tre int√©ressant d'ajouter des acc√©l√©rateurs sp√©ciaux pour des choses comme les op√©rations en virgule flottante.  Il y a 1 024 blocs DSP inutilis√©s sur la puce, et je pense que personne n'a essay√© de construire un acc√©l√©rateur pour le format r√©el 48 bits dans TP. </li><li>  Utilisez du fer existant!  J'ai encore beaucoup de m√©moire inutilis√©e, √† savoir: <br><br><ul><li>  512 Mo de m√©moire SDRAM DDR3 avec un bus de donn√©es 64 bits </li><li>  128 Mo de m√©moire SDRAM DDR3 avec un bus de donn√©es 16 bits </li><li>  Deux m√©moires SRAM QDR II + 4 Mo avec bus de donn√©es 18 bits </li><li>  M√©moire flash de 64 Mo </li><li>  2 Mo de SSRAM </li></ul><br></li><li>  Am√©liorez la vid√©o!  La premi√®re √©tape consiste √† ajouter la prise en charge du terminal ¬´plein √©cran¬ª 160x50, et la possibilit√© de passer √† un terminal r√©gulier 80x25 2 fois.  L'utilisation d'une SSRAM externe ajoute simplement le mode 1280 √ó 800 @ 6 bits. </li><li>  D√©veloppez les capacit√©s du terminal actuel.  Je pense que je peux ajouter la compatibilit√© avec un terminal comme ADM-3A (et ajouter le support graphique), qui est utilis√© dans Kaypro / 84, alors j'aurai acc√®s √† une gamme plus large de logiciels (et je n'aurai pas √† porter DD9). </li></ul><br><h2>  R√©sum√© </h2><br>  Jusqu'√† pr√©sent, la voiture ne fonctionne que depuis quelques jours, mais je peux dire que j'aime vraiment tout.  L'√©cran est agr√©able et clair, le clavier est grand et confortable, le corps est encombrant, mais il p√®se peu (et tient dans un sac √† dos).  L'ordinateur portable √©tait m√™me √©tonnamment ergonomique pour travailler dans un train. <br><br>  Je pense que je suis sur la bonne voie.  La possibilit√© d'ouvrir un √©diteur de texte dans une fen√™tre pour prendre des notes tout en d√©boguant du code sur TP dans une autre est extr√™mement pratique (ou la possibilit√© de prendre des notes tout en jouant √† Zork!).  On estime qu'une telle approche de la cr√©ation d'ordinateurs multit√¢ches √† faible co√ªt bas√©s sur CP / M pourrait exister. <br><br><h2>  Vous voulez construire la m√™me chose? </h2><br>  Jusqu'√† pr√©sent, je n'ai pas de moyen facile d'obtenir des fichiers de la machine, donc la partie la plus utile du logiciel (serveur de fichiers CP / Net √©crit en Turbo Pascal) est pi√©g√©e.  Restez avec nous et restez √† l'√©coute (ou √©crivez-moi <a href="">un e</a> - <a href="">mail</a> si vous ne pouvez pas attendre du tout).<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä un moment donn√©, je rejoindrai probablement le 21e si√®cle et ouvrirai un compte sur github. </font><font style="vertical-align: inherit;">H√©las, tout repose sur ce tr√®s ¬´temps libre¬ª.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480290/">https://habr.com/ru/post/fr480290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480276/index.html">Entretien de jeu: strat√©gies d'embauche. Partie I</a></li>
<li><a href="../fr480280/index.html">√âtude de s√©curit√© TurboConf</a></li>
<li><a href="../fr480282/index.html">L'histoire de la startup de fitness Peloton: d'une valorisation de 8 milliards de dollars √† des publicit√©s infructueuses et des pr√©visions d'une baisse de 85% des stocks</a></li>
<li><a href="../fr480284/index.html">Mon (nano) exp√©rience avec l'API Yandex.Maps ou pourquoi ai-je besoin d'instructions</a></li>
<li><a href="../fr480288/index.html">Est-il possible de transmettre et de recevoir des informations sans restrictions sur la distance et la vitesse de la lumi√®re?</a></li>
<li><a href="../fr480294/index.html">Vision industrielle √† grande vitesse dans le dispositif de tri de pi√®ces LEGO polyvalent</a></li>
<li><a href="../fr480296/index.html">D√©veloppement r√©actif du bot Telegram</a></li>
<li><a href="../fr480300/index.html">En 2011, la question de savoir si Nginx appartient √† Igor Sysoev ou Rambler</a></li>
<li><a href="../fr480304/index.html">Inf√©rence de type dans jscodeshift et TypeScript</a></li>
<li><a href="../fr480306/index.html">Pourquoi battre la porte ferm√©e?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>