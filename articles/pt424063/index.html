<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õîÔ∏è üßë‚Äçü§ù‚Äçüßë ‚úåüèΩ Como nos matamos com um clique, colocando o site e a cobran√ßa no geocluster, ou vamos falar sobre redund√¢ncia novamente üîç üë©üèª‚Äçüíª üàØÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sim, eu tamb√©m sou um idiota. Mas isso eu n√£o esperava de mim. Parece que "n√£o √© o primeiro ano de casamento". Parece estar lendo um monte de artigos ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como nos matamos com um clique, colocando o site e a cobran√ßa no geocluster, ou vamos falar sobre redund√¢ncia novamente</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424063/"> Sim, eu tamb√©m sou um idiota.  Mas isso eu n√£o esperava de mim.  Parece que "n√£o √© o primeiro ano de casamento".  Parece estar lendo um monte de artigos inteligentes sobre toler√¢ncia a falhas, redund√¢ncia etc., algo razo√°vel uma vez que ele mesmo escreveu aqui.  Por mais de 10 anos, sou CEO de um provedor de hospedagem operando sob a marca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ua-hosting.company</a> e prestando servi√ßos de hospedagem e aluguel de servidores na Holanda, EUA, e h√° apenas uma semana no Reino Unido (n√£o pergunte por que o nome ua, a resposta pode ser encontrada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em nosso artigo autobiogr√°fico</a> ), fornecemos aos clientes solu√ß√µes com graus variados de complexidade, √†s vezes de forma que at√© n√≥s mesmos achamos dif√≠cil entender o que fizemos. <br><br>  Mas caramba ... Hoje eu me superei.  N√≥s mesmos demolimos completamente o site e o faturamento, com todas as transa√ß√µes, dados de clientes sobre servi√ßos e outras coisas, e foi minha culpa, eu mesmo disse "excluir".  Alguns de voc√™s j√° notaram isso.  Aconteceu hoje, sexta-feira √†s 11:20, hor√°rio padr√£o do leste dos EUA (EST).  Al√©m disso, nosso site e faturamento n√£o estavam hospedados no mesmo servidor e nem na nuvem, deixamos a nuvem do data center h√° dois meses em favor da nossa pr√≥pria solu√ß√£o.  Tudo isso foi localizado em um geo-cluster tolerante a falhas de dois servidores virtuais - nosso novo produto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VPS (KVM) com unidades dedicadas</a> , VPS <b>INDEPENDENTE</b> , localizados em dois continentes - na Europa e nos EUA.  Um em Amsterd√£ e outro em Manassas, perto de Washington, pelo fato de a DC In dois data centers confi√°veis.  Conte√∫do em que era duplicado constantemente e em tempo real, e a toler√¢ncia a falhas se baseava em um cluster DNS normal, as solicita√ß√µes podiam chegar a qualquer um dos servidores, qualquer um deles servido como MASTER, e em caso de inacessibilidade, ele assumia as tarefas do segundo. <br><br>  Eu pensei que isso s√≥ pode matar um meteorito, bem, ou algo semelhante ao global, que pode desativar dois data centers ao mesmo tempo.  Mas tudo acabou sendo mais simples. <a name="habracut"></a><br><br>  Podemos ser n√≥s mesmos, se somos idiotas.  No mundo, existem apenas duas coisas ilimitadas - o Universo e a estupidez humana, e se o primeiro √© controverso, o segundo se tornou √≥bvio. <br><br>  Sempre adotei o princ√≠pio da redund√¢ncia de som. N√£o sou uma daquelas pessoas que gritar√£o "perco 1000 d√≥lares por uma hora de inatividade", mas ao mesmo tempo pago 15 d√≥lares por toda a minha infraestrutura.  N√£o, certamente n√£o perco muito.  Embora, talvez, √†s vezes eu perco.  A maioria dos idiotas gritando sobre isso nem pensa que √†s vezes o tempo de inatividade por segundo pode custar US $ 1.000, US $ 10.000 ou at√© um milh√£o de d√≥lares em lucro a longo prazo.  Como  √â muito simples: neste momento, pode entrar um cliente que far√° seu primeiro pedido e, no futuro, trar√° esses milh√µes de d√≥lares, porque voc√™ sempre tem a oportunidade de provar sua singularidade e receber a recomenda√ß√£o dele.  E se ele vir o erro 504 ou "Sinto muito, mas o servidor est√° indispon√≠vel no momento", a transa√ß√£o pode n√£o ocorrer.  Isso aconteceu conosco, n√£o, n√£o um erro 504 durante a chamada de um visitante importante, mas o primeiro.  Puramente por acaso, eu me encontrei no lugar certo na hora certa, quando grandes clientes, como Dmitry Sukhanov, o criador do Kinopoisk, visitaram nosso site, embora este n√£o seja um exemplo muito bom, porque ele trabalhou conosco por apenas 2 anos, at√© A Yandex n√£o a comprou por US $ 60 milh√µes ou por quanto.  Ent√£o, foi Dmitry, e n√£o n√≥s, que conseguimos milh√µes aqui, mas ficamos felizes em cooperar com um projeto t√£o interessante e √∫til, e isso, por sua vez, nos fez um an√∫ncio e proporcionou muitos clientes novos e satisfeitos. <br><br>  Em geral, por que eu sou tudo isso.  As perdas e a redund√¢ncia necess√°ria devem ser avaliadas com sensibilidade.  Embora exista o risco de perder mais de um milh√£o de d√≥lares, √© necess√°rio analisar a probabilidade de um evento desse tipo.  Provavelmente, se Dmitry visse 1 erro de tempo 504, nada de cr√≠tico teria acontecido e ele voltou para n√≥s novamente.  Porque  Naquela √©poca, √©ramos provavelmente um dos poucos que podiam oferecer conectividade de mais de 1 Gb / s na Ucr√¢nia com alta qualidade e lat√™ncia m√≠nima para baixo custo, o que era extremamente importante para seus recursos naquele momento, a fim de garantir acesso de alta qualidade ao p√∫blico ucraniano. portal, pois o tr√°fego estrangeiro era de baixa qualidade e ainda caro.  Portanto, √© importante garantir a exclusividade da solu√ß√£o, pois o tempo de atividade n√£o ser√° muito cr√≠tico para voc√™.  E como somos √∫nicos - podemos nos permitir (mesmo agora), com milhares de clientes de servidor, ficar inativos por v√°rias horas ou at√© mais.  N√£o precisamos de nuvens tolerantes a falhas mega que ofere√ßam 99,9999% de tempo de atividade por muito dinheiro, porque mesmo que caiam e se caem, a pr√°tica as mostra h√° muito tempo, pois o problema que causou inacessibilidade provavelmente n√£o √© comum.  E eles n√£o ajudar√£o em caso de vulnerabilidade.  Eles n√£o v√£o ajudar. <br><br>  Por isso, constru√≠mos nossa decis√£o por n√≥s mesmos √© muito simples.  Pegamos dois VPS (KVM) nos n√≥s Dell R730xd, o mesmo VPS (KVM) que oferecemos aos nossos clientes, porque esse √© nosso princ√≠pio inicial - para dar √†s pessoas o que usamos: <br><br>  VPS (KVM) - 2 x Intel Dodeca-Core Xeon E5-2650 v4 (24 n√∫cleos) / 40GB / 4x240GB SSD RAID10 / Datatraffic - 40TB - a partir de US $ 99 / m√™s, e voc√™ pode <b>obter um desconto de 30% no primeiro pagamento</b> se encontrar uma promo√ß√£o c√≥digo em nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo de publicidade</a> . <br><br>  Um na Holanda e outro nos EUA.  Sim, nesses n√≥s, al√©m do site e do faturamento, existem mais 2 clientes reais, cada um dos quais pode influenciar a opera√ß√£o do site na teoria e n√£o na pr√°tica.  Por que - est√° escrito em um artigo publicit√°rio, n√£o entrarei em detalhes aqui uma segunda vez.  Agora, isso n√£o √© sobre isso.  Em geral, a solu√ß√£o n√£o √© pior do que servidores dedicados de n√≠vel de entrada e pode lidar com uma carga muito grande. <br><br>  Entre outras coisas, √© tolerante a falhas, os dados s√£o constantemente replicados em tempo real.  E se um servidor estiver indispon√≠vel, o segundo assumir√° a fun√ß√£o MASTER.  Idealmente, voc√™ pode fazer com que o tr√°fego do continente americano seja processado pelo servidor americano e da Europa, R√∫ssia e √Åsia - o servidor na Holanda. <br><br>  Vinculamos os servidores √† nossa conta em nosso faturamento WHMCS, um produto licenciado p√∫blico, mas adaptado para n√≥s, que √© usado por muitos provedores de hospedagem em todo o mundo, inclusive n√≥s, j√° que escrever nosso pr√≥prio sistema de contabilidade √© uma franca debilidade (no nosso caso) .  Especialmente nos casos em que a fun√ß√£o desejada √© implementada gravando seu pr√≥prio m√≥dulo no faturamento existente, o que aumenta sua toler√¢ncia a falhas, pois reduz o risco de vulnerabilidades cr√≠ticas.  Afinal, sozinho ou mesmo com uma equipe pequena, voc√™ n√£o poder√° escrever um sistema mais confi√°vel do que o existente, que foi escrito ao longo dos anos por um grupo de desenvolvedores, onde milhares de bugs j√° foram corrigidos e pelos quais agora os desenvolvedores est√£o pedindo apenas US $ 30 / m√™s por uma licen√ßa e recebem milh√µes de d√≥lares por ano que podem ser gastos, inclusive em outras melhorias. <br><br>  Falando em vulnerabilidades cr√≠ticas, nosso programador recentemente cometeu um erro ao escrever um dos m√≥dulos de servi√ßo, que tinha acesso a um banco de dados de cobran√ßa somente leitura, que foi descoberto por um especialista independente e nos pediu que pag√°ssemos US $ 550 por um bug encontrado, por ser uma vulnerabilidade SQL -inje√ß√£o: <br><br><blockquote>  A inje√ß√£o de SQL est√° entre os 10 principais OWASP, escrevi para voc√™ sobre a quantia de US $ 550, essa √© a quantia m√≠nima, j√° que o banco de dados sofre, comprometendo os dados do usu√°rio. <br><br>  Mas alguns montantes chegam a US $ 10.000 como recompensa, como √© o caso do vk.com. </blockquote><br>  Obviamente, apoiamos esse come√ßo e pagamos indeniza√ß√µes sem questionar.  Como nosso programador examinou os dados fornecidos e confirmou a exist√™ncia de um problema, justificativa do pentester.  Afinal, ainda n√£o mantemos nosso pr√≥prio pentester no estado, e este trabalho requer conhecimento e tempo consider√°veis, pois inclui uma s√©rie de estudos: <br><br><blockquote>  Auditoria de seguran√ßa de todo o recurso, e esta √© uma verifica√ß√£o de acordo com os seguintes par√¢metros, e nosso relat√≥rio no final da auditoria inclui: <br><br>  ‚Ä¢ inje√ß√£o de c√≥digo A1 <br>  ‚Ä¢ Autentica√ß√£o incorreta A2 e gerenciamento de sess√µes <br>  ‚Ä¢ Script A3 Crossite <br>  ‚Ä¢ Viola√ß√£o de acesso A4 <br>  ‚Ä¢ Configura√ß√£o insegura A5 <br>  ‚Ä¢ A6 vazamento de dados sens√≠veis <br>  ‚Ä¢ A7 prote√ß√£o insuficiente contra ataques <br>  ‚Ä¢ A8 falsifica√ß√£o de solicita√ß√£o entre sites <br>  ‚Ä¢ A9 Usando componentes com vulnerabilidades conhecidas <br>  ‚Ä¢ A10 Registro e monitoramento inadequados </blockquote><br>  Porque sim, a decis√£o foi tomada de maneira inequ√≠voca e r√°pida.  Al√©m disso, como observou Pentester, esses estudos aumentam a seguran√ßa da web como um todo: <br><blockquote>  Esse √© o meu hobby, se todo desenvolvedor como voc√™ tivesse um di√°logo com ca√ßadores de bugs, a Internet seria 80% segura. </blockquote><br>  Portanto, no geral, pagamos um pouco, especialmente se dividirmos o valor pelo n√∫mero de meses em que o funcion√°rio respons√°vel pelo teste de penetra√ß√£o n√£o foi mantido na equipe.  Muito obrigado ao Pentester pelo bug encontrado e pelo fato de ele ter demorado um pouco para n√≥s, somos muito gratos a ele.  Se algu√©m precisar de seus servi√ßos, entre em contato, forneceremos contatos com sua permiss√£o. <br><br>  Mas desta vez n√£o foi a vulnerabilidade que nos matou.  √âramos n√≥s e o recurso do produto WHMCS.  Em cada nota, instalamos um conveniente produto de gerenciamento de cont√™iner virtual - VM Manager, ao qual o WHMCS tem acesso para criar, pausar e excluir, al√©m de clientes - para gerenciar o cont√™iner virtual criado. <br><br><img src="https://habrastorage.org/files/607/98f/a00/60798fa001694b8f87c12d03c35cfe61.jpg" alt="imagem"><br><br>  Todos os dias, no WHMCS, recebemos dezenas ou mesmo centenas de pedidos que precisam ser aceitos (aceitos), exclu√≠dos ou marcados como Fraude se o cliente estiver tentando pagar por um pedido com cart√£o de cr√©dito roubado.  √Äs vezes, h√° um grande n√∫mero de pedidos e n√£o podemos determinar imediatamente qual status atribuir a ele, pois realizamos nossa verifica√ß√£o interna ou exigimos que o usu√°rio se identifique corretamente se suspeitarmos de seu pedido, e esses usu√°rios, √© claro, nem sempre respondem ou passam identifica√ß√£o com sucesso.  Portanto, periodicamente, acumulam-se mil ou dois pedidos n√£o ativados ou com status desconhecido, mais f√°ceis de excluir do que processar.  Quem realmente precisa - reordenar. <br><br>  H√° dois meses, decidimos abandonar completamente o produto de data center baseado em nuvem, quando come√ßamos a fornecer nossa pr√≥pria solu√ß√£o com o VM Manager, que permite colocar o sistema em um clique ou at√© na sua imagem: <br><br><img src="https://habrastorage.org/files/457/585/1f7/4575851f79d04242a0a3e0560e52a176.jpg" alt="imagem"><br><br>  E eles at√© o ofereceram nos SSDs NVMe PCIe, que s√£o uma ordem de magnitude mais r√°pida que os SSDs regulares para leitura e at√© tr√™s vezes para grava√ß√£o, a solu√ß√£o, como a nuvem, precisa ser atualizada, os servidores custam US $ 15 e incluem um conveniente painel de controle do VM Manager e ISP Manager 5, mediante solicita√ß√£o, suporte para atualiza√ß√£o com uma etapa m√≠nima de 5 GB de RAM DDR4, 60 GB NVMe PCIe SSD e 3 n√∫cleos E5-2650 v4 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">para um plano tarif√°rio mais alto</a> em Amsterd√£, Manassas e Londres: <br><br>  VPS (KVM) - E5-2650 v4 (3 n√∫cleos) / 5 GB DDR4 / 60 GB SSD NVMe / 1 Gbps 5 TB - US $ 15 / m√™s <br>  VPS (KVM) - E5-2650 v4 (6 n√∫cleos) / 10 GB DDR4 / 120 GB SSD NVMe / 1 Gbps 10 TB - US $ 30 / m√™s <br>  VPS (KVM) - E5-2650 v4 (9 n√∫cleos) / 15 GB DDR4 / 180 GB SSD NVMe / 1 Gbps 15 TB - US $ 45 / m√™s <br>  ... <br>  VPS (KVM) - E5-2650 v4 (24 n√∫cleos) / 40GB DDR4 / 480GB NVMe SSD / 1Gbps 40TB - US $ 120 / m√™s <br>  ... <br>  VPS (KVM) - E5-2650 v4 (24 n√∫cleos) / 65GB DDR4 / 780GB NVMe SSD / 1Gbps 65TB - US $ 195 / m√™s <br>  VPS (KVM) - E5-2650 v4 (24 n√∫cleos) / 70GB DDR4 / 840GB NVMe SSD / 1Gbps 70TB - US $ 210 / m√™s <br>  VPS (KVM) - E5-2650 v4 (24 n√∫cleos) / 75GB DDR4 / 900GB SSD NVMe / 1Gbps 75TB - US $ 225 / m√™s <br><br>  Portanto, n√£o faz sentido alugar uma grande parte da nuvem do data center e oferecer aos clientes os antigos processadores E3-1230, embora a partir de US $ 3,99 por m√™s tenha acabado.  Acreditamos que os clientes devem receber a mais alta qualidade e desempenho m√°ximo, a um pre√ßo m√≠nimo, sim, n√£o podemos oferecer um produto por US $ 3,99 e talvez n√£o atendamos √†s necessidades de alguns desenvolvedores que precisam de recursos m√≠nimos e desempenho, mas o n√≥ custa mais 7.000 euros e n√£o podemos, pelo menos por enquanto, colocar mais de 15 clientes nele, pois estamos prontos para garantir a qualidade.  E a qualidade implica n√£o apenas estabilidade, mas tamb√©m a m√°xima rela√ß√£o desempenho / pre√ßo e, em seguida, rela√ß√£o custo-benef√≠cio. <br><br>  Para comemorar, cancelamos toda a infraestrutura de nuvem (que √© milhares de VPS), pedimos 2 servidores virtuais independentes para n√≥s (sim, pagamos por nossos servidores), implantamos um site e faturamos h√° 2 meses em uma nova solu√ß√£o, como descrevemos tudo acima, trazido para o grupo de prote√ß√£o, para que o sistema n√£o pare, se voc√™ se esqueceu de pagar pontualmente ... Parece ter feito tudo. <br><br>  E hoje, ap√≥s 2 meses, decidimos "Cancelar" (n√£o excluir, existe um bot√£o assim, mas tentamos nunca excluir nada, para que haja sempre um hist√≥rico) Mais de 1000 pedidos pendentes que ainda n√£o receberam um status no faturamento do WHMCS .  Adivinhou?  Sim √© isso.  Eles me perguntaram - posso cancelar?  Eu confirmei "excluir". <br><br>  √Äs vezes, apesar da grande quantidade de recursos, j√° que a amostragem de dados √© grande e algum processo n√£o se encaixa no limite de tempo alocado, o WHMCS comete um erro 504, tudo √© feito e o faturamento continua a funcionar, mas aqui temos indisponibilidade.  O faturamento e o site n√£o est√£o mais dispon√≠veis.  N√£o entendemos imediatamente o motivo.  Mas ent√£o eles perceberam.  O pedido de nossos 2 VPS n√£o foi aceito (sim, n√≥s n√£o aceitamos nosso pedido!) E, como resultado, foi "Cancelado" pelo sistema, o que levou ao lan√ßamento do m√≥dulo e √† remo√ß√£o de dois cont√™ineres de uma s√≥ vez, supostamente n√£o criados, mas criados pelos virtuais, usando nosso amado VM Manager.  Tendo entrado em um dos n√≥s, como esperado, nossos administradores viram a imagem ‚ÄúAdeus‚Äù: <br><br><img src="https://habrastorage.org/webt/mq/wq/pn/mqwqpnutma-z0kdwsmevoax_tfo.png"><br><br>  O que √© isso - uma falha nos desenvolvedores do WHMCS, que leva √† remo√ß√£o de pedidos n√£o aceitos e, na verdade, criados com seu ID VPS, quando eles s√£o cancelados, ou nossa estupidez (do departamento de vendas) n√£o √© mais importante.  O resultado foi um - "Adeus ao site com cobran√ßa".  O painel acabou de limp√°-los.  E os administradores tinham apenas uma pergunta para n√≥s (vendas): <br><br><blockquote>  Naher crie um servi√ßo com seu site principal e cobran√ßa. <br>  E ent√£o tamb√©m a mate no inferno. </blockquote><br>  E, embora tiv√©ssemos backups, tamb√©m em duas regi√µes geograficamente distribu√≠das, me senti desconfort√°vel.  Como n√£o tinha certeza da atualiza√ß√£o dos backups, n√£o tinha certeza de que nossos administradores fizeram tudo certo, como foi originalmente prescrito naqueles.  a tarefa de backup do banco de dados a cada hora ou mais frequentemente, os dados foram atualizados e v√°rias vers√µes anteriores dos arquivos foram armazenadas.  Que os backups de algum erro de software n√£o pararam de ser executados (afinal, eu pessoalmente n√£o o controlei, por que devo ter certeza de que nossos administradores ficar√£o preocupados com nossos dados se eu tiver esse controle?).  Um monte de pensamentos negativos ... N√£o deixe o universo sobreviver a isso! <br><br>  J√° reuni a ideia de que pelo menos 1 hora, ou pior, n√£o haver√° transa√ß√µes, e voc√™ precisar√° restaurar os pagamentos dos clientes manualmente, comparar dados de transa√ß√µes anteriores e gravar nos titulares de contas que recriamos uma conta e pagamos por ela. , para nos mostrar do lado errado, para enviar uma notifica√ß√£o de que somos tolos e fizemos um mau funcionamento do software ... E se n√£o houver um novo backup - geralmente √© um cano, teria que ser muito longo e triste para restaurar tudo ... <br><br>  Nesse caso, temos uma tabela interna na qual muitos dados principais s√£o duplicados manualmente e que s√£o atualizados por n√≥s, o que elimina uma falha de software e a reescrita de dados incorretos.  Apesar da disponibilidade de backups, ainda usamos esse m√©todo.  Afinal, ningu√©m cancela a possibilidade de um zvezdets global. <br><br>  Felizmente, tudo acabou n√£o sendo t√£o ruim, e at√© isso.  um especialista que teve que resolver um problema e que no come√ßo anunciou: <br><br><blockquote>  A noite foi um sucesso, obrigado a todos. <br>  Eu fui busc√°-lo. </blockquote><br>  No entanto, a noite foi um sucesso.  Como inicialmente a solu√ß√£o oferecia o uso do lvm e um novo cont√™iner virtual ainda n√£o havia sido criado - era poss√≠vel restaurar os dados reais, embora com uma dan√ßa com um pandeiro: <br><br><blockquote>  Tudo atrav√©s do utilit√°rio lvm, usando seus comandos, restaurou o grupo de volumes virtuais, depois o virtual, ativou a parti√ß√£o, montou na pasta esquerda, criou o servidor e colocou os dados l√°.  Isso foi poss√≠vel de outras maneiras, mas essa op√ß√£o, no nosso caso, foi a mais r√°pida e espec√≠fica das configura√ß√µes do servidor virtual, cada uma com seu pr√≥prio ataque. </blockquote><br>  Que conclus√µes s√£o feitas?  Redund√¢ncia e redund√¢ncia devem incluir contabilidade de vulnerabilidades e o cen√°rio mais est√∫pido de desenvolvimento, quando tudo, mesmo os backups, podem ser destru√≠dos.  N√£o sofremos e n√£o sofremos grandes perdas apenas pelo fato de os dados n√£o terem sido completamente exclu√≠dos.  Se for necess√°rio restaurar a partir de backups, haver√° uma perda de transa√ß√µes por hora e uma perda significativa de tempo de trabalho.  Pareceu-nos que a probabilidade de os backups serem √∫teis ao usar um geocluster √© m√≠nima - est√°vamos errados.  N√£o levamos em conta que √© poss√≠vel excluir os dois servidores de uma s√≥ vez e que n√£o excluiremos os servidores, mas sim. <br><br>  √â sempre necess√°rio ter um armazenamento externo independente do seu sistema, com acesso, preferencialmente apenas por algum c√≥digo, que tamb√©m √© reservado, para garantir que os dados n√£o sejam perdidos.  No momento, apesar da presen√ßa de backups em nossa infraestrutura em duas regi√µes, considero seriamente a possibilidade de usar algo como o Amazon Glacier, embora o √∫ltimo seja muito caro.  De acordo com os administradores, tudo est√° bem l√° apenas em termos de marketing, mas quando voc√™ come√ßa a us√°-lo, voc√™ se depara com o fato de a solu√ß√£o ser bastante cara, porque voc√™ precisa pagar por cada solicita√ß√£o e cada arquivo que √© muito interessante considerar sua aplica√ß√£o aws-cli, especialmente se os dados precisam ser restaurados.  Recentemente, um cliente da Gr√£-Bretanha pediu para fazer uma reserva l√°, ap√≥s alguns meses de uso, ele recusou - acabou por ser muito caro.  Mas, ainda assim, precisamos determinar o que √© mais caro.                 ‚Äî   .    ‚Äî   ,   ,       .        ,     . <br><br> ,     ‚Äî     ,     ,  ,     .       , ,  ,   ,         ,       . <br><br> PS   ,   (  ,  EST ).    ,  ,    . ,    -      .         ,      ,    . ,    ‚Äî   ,     .       .       ! <br><br>   . <br><br> <b>VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps     </b>      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ,  30%    VPS  , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt424063/">https://habr.com/ru/post/pt424063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt424049/index.html">Apresentamos o livro "Harry Potter e os m√©todos do pensamento racional" √† Olimp√≠ada</a></li>
<li><a href="../pt424051/index.html">O manifesto do programador limpo ou o resumo do livro de c√≥digos curtos de Robert Martin</a></li>
<li><a href="../pt424053/index.html">S√©rie MicroSD feita de uma tela em branco</a></li>
<li><a href="../pt424057/index.html">Integra√ß√£o de aplicativos Web com Spring Cloud Contract</a></li>
<li><a href="../pt424061/index.html">Cinco anos depois, a pr√≥xima vers√£o do DOSBox foi lan√ßada sob o n√∫mero 0.74-2</a></li>
<li><a href="../pt424065/index.html">O Firefox instala extens√µes nos seus dispositivos para coletar dados sem o seu conhecimento ... novamente</a></li>
<li><a href="../pt424069/index.html">iFixit: iPhone XS e XS Max - c√≥pias quase exatas do iPhone X com capacidade de manuten√ß√£o 6 em 10</a></li>
<li><a href="../pt424071/index.html">Teoria da felicidade. Termodin√¢mica da desigualdade de classe</a></li>
<li><a href="../pt424073/index.html">Execu√ß√£o remota de c√≥digo no Mecanismo de Banco de Dados Microsoft JET</a></li>
<li><a href="../pt424077/index.html">A Fran√ßa exige tornar global o ‚Äúdireito ao esquecimento‚Äù - o que pode afetar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>