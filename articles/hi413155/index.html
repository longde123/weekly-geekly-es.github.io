<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯШ▓ ЁЯЪЗ ЁЯОЙ Google рдХреА рд╢реИрд▓ рд╢реИрд▓реА рдЧрд╛рдЗрдб (рд░реВрд╕реА рдореЗрдВ) ЁЯЧ╝ ЁЯМС ЁЯИБ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛ 
 рдХрд┐рд╕ рд╢реЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ 


 Bash рдПрдХрдорд╛рддреНрд░ рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рднрд╛рд╖рд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред 


 рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Google рдХреА рд╢реИрд▓ рд╢реИрд▓реА рдЧрд╛рдЗрдб (рд░реВрд╕реА рдореЗрдВ)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413155/"><h1 id="predislovie">  рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛ </h1><br><h3 id="kakoy-shell-ispolzovat">  рдХрд┐рд╕ рд╢реЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ </h3><br><p> <code>Bash</code> рдПрдХрдорд╛рддреНрд░ рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рднрд╛рд╖рд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ рдЭрдВрдбреЗ рдХреЗ рдиреНрдпреВрдирддрдо рд╕реЗрдЯ рдХреЗ рд╕рд╛рде <code>#!/bin/bash</code> рд╕рд╛рде рд╢реБрд░реВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╢реЗрд▓ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рд╕реЗрдЯ <code>set</code> рд▓рд┐рдП рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЖрдкрдХреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ <code>bash &lt;script_name&gt;</code> рд░реВрдк рдореЗрдВ рдХреЙрд▓ рдХрд░рдиреЗ рд╕реЗ рдЗрд╕рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рдЙрд▓реНрд▓рдВрдШрди рди рд╣реЛред </p><br><p>  рдмреИрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рднреА рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рдиреЗ рд╕реЗ рд╣рдореЗрдВ рдПрдХ рд╕реБрд╕рдВрдЧрдд рд╢реЗрд▓ рднрд╛рд╖рд╛ рдорд┐рд▓рддреА рд╣реИ рдЬреЛ рд╣рдорд╛рд░реЗ рд╕рднреА рдорд╢реАрдиреЛрдВ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрддреА рд╣реИред </p><br><p>  рдПрдХрдорд╛рддреНрд░ рдЕрдкрд╡рд╛рдж рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рдЙрди рд╢рд░реНрддреЛрдВ рд╕реЗ рд╕реАрдорд┐рдд рд╣реИрдВ, рдЬрд┐рдирдХреЗ рд▓рд┐рдП рдЖрдк рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╕реЛрд▓рд╛рд░рд┐рд╕ рдПрд╕рд╡реАрдЖрд░ 4 рдкреИрдХреЗрдЬ рд╣реЛрдЧрд╛, рдЬрд┐рд╕реЗ рдХрд┐рд╕реА рднреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рдмреЙрд░реНрди рд╢реЗрд▓ рдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </p><br><h3 id="kogda-ispolzovat-shell">  рд╢реИрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрдм рдХрд░рдирд╛ рд╣реИ </h3><br><p>  рд╢реЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЗрд╡рд▓ рдЫреЛрдЯреА рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдпрд╛ рд╕рд░рд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ-рд░реИрдкрд░ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рд╣рд╛рд▓рд╛рдБрдХрд┐ рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯрд┐рдВрдЧ рдПрдХ рд╡рд┐рдХрд╛рд╕ рднрд╛рд╖рд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреВрд░реЗ Google рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рд╢реИрд▓реА рдЧрд╛рдЗрдб рд╡реНрдпрд╛рдкрдХ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдкреНрд░рд╕реНрддрд╛рд╡ рдХреЗ рдмрдЬрд╛рдп рдЗрд╕рдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рдЕрдзрд┐рдХ рдорд╛рдиреНрдпрддрд╛ рд╣реИред </p><a name="habracut"></a><br><p>  рдХреБрдЫ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ: </p><br><ul><li>  рдпрджрд┐ рдЖрдк рдЕрдХреНрд╕рд░ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдХрдо рдбреЗрдЯрд╛ рд╣реЗрд░рдлреЗрд░ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╢реЗрд▓ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╡рд┐рдХрд▓реНрдк рд╣реИред </li><li>  рдпрджрд┐ рдкреНрд░рджрд░реНрд╢рди рдорд╛рдпрдиреЗ рд░рдЦрддрд╛ рд╣реИ, рддреЛ рдХреБрдЫ рдФрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рд▓реЗрдХрд┐рди рд╢реЗрд▓ рдирд╣реАрдВред </li><li>  рдпрджрд┐ рдЖрдк рдкрд╛рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреЛ <code>${PIPESTATUS}</code> рдЕрд╕рд╛рдЗрди рдХрд░рдиреЗ рд╕реЗ рдЕрдзрд┐рдХ рд╕рд░рдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдкрд╛рдпрдерди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  рдпрджрд┐ рдЖрдк рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦ рд░рд╣реЗ рд╣реИрдВ рдЬреЛ 100 рд▓рд╛рдЗрдиреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рд▓рдВрдмреА рд╣реИ, рддреЛ рдЖрдкрдХреЛ рд╢рд╛рдпрдж рдЗрд╕реЗ рдкрд╛рдпрдерди рдореЗрдВ рд▓рд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдврд╝ рд░рд╣реА рд╣реИрдВред  рдмрд╛рдж рдореЗрдВ рд╕рдордп рд▓реЗрдиреЗ рд╡рд╛рд▓реА рдкреБрдирд░реНрд▓реЗрдЦрди рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рдЕрдкрдиреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рднрд╛рд╖рд╛ рдореЗрдВ рд▓рд┐рдЦреЗрдВред </li></ul><br><h1 id="shell-fayly-i-vyzov-interpretatora">  рд╢реЗрд▓ рдлрд╛рдЗрд▓реЗрдВ рдФрд░ рджреБрднрд╛рд╖рд┐рдпрд╛ рдХреЙрд▓ </h1><br><h3 id="rasshireniya-faylov">  рдлрд╝рд╛рдЗрд▓ рдПрдХреНрд╕рдЯреЗрдВрд╢рди </h3><br><p>  рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдПрдХреНрд╕рдЯреЗрдВрд╢рди (рджреГрдврд╝рддрд╛ рд╕реЗ рдкрд╕рдВрджреАрджрд╛) рдпрд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПредред рдФрд░ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЗрд╕рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд┐рд╕ рднрд╛рд╖рд╛ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдпрд╣ рдЬрд╛рдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдФрд░ рд╢реЗрд▓ рдХреЛ рд╡рд┐рд╕реНрддрд╛рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЬрд╛рдирдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдпрд╣ рдХрд┐рд╕ рднрд╛рд╖рд╛ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдХрднреА-рдХрднреА рд╡рд┐рднрд┐рдиреНрди рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рд╕рдорд╛рди рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рд╣реЛрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдпрд╣ рдЖрдкрдХреЛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╕рдорд╛рди рд▓рдХреНрд╖реНрдпреЛрдВ рд╡рд╛рд▓реЗ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рдирд╛рдо рд╕реЗ рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд┐рднрд┐рдиреНрди рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рд▓рд┐рдЦрд┐рдд рдирд╛рдо рдПрдХ рднрд╛рд╖рд╛-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рддреНрдпрдп рдХреЗ рд╕рд╛рде рд╕рдорд╛рди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><h3 id="suidsgid">  SUID / SGID </h3><br><p>  рдПрд╕рдпреВрдЖрдИрдбреА рдФрд░ рдПрд╕рдЬреАрдЖрдИрдбреА тАЛтАЛрд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдкрд░ рдирд┐рд╖рд┐рджреНрдз рд╣реИрдВред </p><br><p>  рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╕реБрд░рдХреНрд╖рд╛ рдореБрджреНрджреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд SUID / SGID рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд▓рдЧрднрдЧ рдЕрд╕рдВрднрд╡ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐ bash SUID рдХреЗ рд▓реЙрдиреНрдЪ рдХреЛ рдЬрдЯрд┐рд▓ рдмрдирд╛рддрд╛ рд╣реИ, рдпрд╣ рдЕрднреА рднреА рдХреБрдЫ рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдкрд░ рд╕рдВрднрд╡ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЗрд╕рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдпрджрд┐ рдЖрдкрдХреЛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдмрдврд╝реА рд╣реБрдИ рдкрд╣реБрдБрдЪ рдХреЗ рд▓рд┐рдП <code>sudo</code> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><h1 id="okruzhenie">  рдкрд░реНрдпрд╛рд╡рд░рдг </h1><br><h3 id="stdout-vs-stderr">  рдПрд╕рдЯреАрдбреАрдЖрд░ рдмрдирд╛рдо рдПрд╕рдЯреАрдбреАрдЖрд░ </h3><br><p>  рд╕рднреА рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ <code>STDERR</code> рдХреЛ рднреЗрдЬреЗ рдЬрд╛рдиреЗ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐ рдХреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдорд╕реНрдпрд╛рдУрдВ рд╕реЗ рдЕрд▓рдЧ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред </p><br><p>  рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЕрдиреНрдп рд╕реНрдерд┐рддрд┐ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред </p><br><pre> <code class="bash hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">err</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"[</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(date +'%Y-%m-%dT%H:%M:%S%z')</span></span></span><span class="hljs-string">]: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$@</span></span></span><span class="hljs-string">"</span></span> &gt;&amp;2 } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ! do_something; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> err <span class="hljs-string"><span class="hljs-string">"Unable to do_something"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${E_DID_NOTHING}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre> <br><h1 id="kommentarii">  рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ </h1><br><h3 id="zagolovok-fayla">  рдлрд╝рд╛рдЗрд▓ рд╣реЗрдбрд░ </h3><br><p>  рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЙрд╕рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╡рд┐рд╡рд░рдг рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░реЗрдВред </p><br><p>  рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЯрд┐рдкреНрдкрдгреА рд╕реЗ рдПрдХ рд╢реАрд░реНрд╖рдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд┐рд╕рдореЗрдВ рдЗрд╕рдХреА рд╕рд╛рдордЧреНрд░реА рдХрд╛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг рднреА рд╢рд╛рдорд┐рд▓ рд╣реИред  рдХреЙрдкреАрд░рд╛рдЗрдЯ рд╕реВрдЪрдирд╛ рдФрд░ рд▓реЗрдЦрдХ рдХреА рдЬрд╛рдирдХрд╛рд░реА рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИред </p><br><p>  рдПрдХ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # # Perform hot backups of Oracle databases.</span></span></code> </pre> <br><h3 id="kommentarii-k-funkciyam">  рдлрд╝реАрдЪрд░ рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ </h3><br><p>  рдХреЛрдИ рднреА рдХрд╛рд░реНрдп рдЬреЛ рд╕реНрдкрд╖реНрдЯ рдФрд░ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдирд╣реАрдВ рд╣реИ, рдЙрд╕ рдкрд░ рдЯрд┐рдкреНрдкрдгреА рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред  рдкреБрд╕реНрддрдХрд╛рд▓рдп рдореЗрдВ рдХрд┐рд╕реА рднреА рдХрд╛рд░реНрдп рдХреЛ рдЙрд╕рдХреА рд▓рдВрдмрд╛рдИ рдпрд╛ рдЬрдЯрд┐рд▓рддрд╛ рдХреА рдкрд░рд╡рд╛рд╣ рдХрд┐рдП рдмрд┐рдирд╛ рдЯрд┐рдкреНрдкрдгреА рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдХреЛрдИ рдФрд░ рдЖрдкрдХреЗ рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ (рдФрд░ рдЖрддреНрдо-рд╕реБрдзрд╛рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛) рдХреЛ рдкрдврд╝рдХрд░ рдЕрдкрдиреЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ рдпрд╛ рдЕрдкрдиреЗ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдореЗрдВ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВред </p><br><p>  рд╕рднреА рдлрд╝реАрдЪрд░ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><ul><li>  рд╕рдорд╛рд░реЛрд╣ рд╡рд┐рд╡рд░рдг </li><li>  рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдФрд░ рд╕рдВрд╢реЛрдзрд┐рдд </li><li>  рддрд░реНрдХ рдкреНрд░рд╛рдкреНрдд рд╣реБрдП </li><li>  рдорд╛рди рд╡рд╛рдкрд╕ рдХрд░реЗрдВ рдЬреЛ рдЕрдВрддрд┐рдо рдХрдорд╛рдВрдб рдореЗрдВ рдорд╛рдирдХ рдирд┐рдХрд╛рд╕ рдХреЛрдб рд╕реЗ рдЕрд▓рдЧ рд╣реИрдВред </li></ul><br><p>  рдПрдХ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # # Perform hot backups of Oracle databases. export PATH='/usr/xpg4/bin:/usr/bin:/opt/csw/bin:/opt/goog/bin' ######################################## # Cleanup files from the backup dir # Globals: # BACKUP_DIR # ORACLE_SID # Arguments: # None # Returns: # None ######################################## cleanup() { ... }</span></span></code> </pre> <br><h3 id="kommentarii-po-realizacii">  рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ </h3><br><p>  рдЕрдкрдиреЗ рдХреЛрдб рдХреЗ рдЬрдЯрд┐рд▓, рдЧреИрд░-рд╕реНрдкрд╖реНрдЯ, рджрд┐рд▓рдЪрд╕реНрдк рдпрд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рднрд╛рдЧреЛрдВ рдкрд░ рдЯрд┐рдкреНрдкрдгреА рдХрд░реЗрдВред </p><br><p>  рдпрд╣ Google рдкрд░ рдХреЛрдб рдЯрд┐рдкреНрдкрдгреА рдХрд░рдиреЗ рдХрд╛ рд╕рд╛рдорд╛рдиреНрдп рдЕрднреНрдпрд╛рд╕ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рд░ рдмрд╛рдд рдкрд░ рдЯрд┐рдкреНрдкрдгреА рди рдХрд░реЗрдВред  рдпрджрд┐ рдХреЛрдИ рдЬрдЯрд┐рд▓ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рд╣реИ рдпрд╛ рдЖрдк рдХреБрдЫ рдЕрд╕рд╛рдорд╛рдиреНрдп рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдПрдХ рдЫреЛрдЯреА рдЯрд┐рдкреНрдкрдгреА рдЬреЛрдбрд╝реЗрдВред </p><br><h3 id="todo-kommentarii">  TODO рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ </h3><br><p>  рдХреЛрдб рдХреЗ рд▓рд┐рдП TODO рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреЛ рдЕрд╕реНрдерд╛рдпреА, рдЕрд▓реНрдкрдХрд╛рд▓рд┐рдХ рдпрд╛ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд╣реА рдирд╣реАрдВ рд╣реИред </p><br><p>  рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">C ++ рдореИрдиреБрдЕрд▓</a> рдореЗрдВ рдХрдиреНрд╡реЗрдВрд╢рди рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИред </p><br><p>  TODO рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ TODO рд╢рдмреНрдж рдХреЛ рдмрдбрд╝реЗ рдЕрдХреНрд╖рд░реЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЗрд╕рдХреЗ рдмрд╛рдж рдХреЛрд╖реНрдардХ рдореЗрдВ рдЖрдкрдХрд╛ рдирд╛рдо рд╣реЛрдЧрд╛ред  рдПрдХ рдмреГрд╣рджрд╛рдиреНрддреНрд░ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИред  рдЯреАрдУрдбреАрдУ рддрддреНрд╡ рдХреЗ рдмрдЧрд▓ рдореЗрдВ рдмрдЧ / рдЯрд┐рдХрдЯ рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рднреА рдмреЗрд╣рддрд░ рд╣реИред </p><br><p>  рдПрдХ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># TODO(mrmonkey): Handle the unlikely edge cases (bug ####)</span></span></code> </pre> <br><h1 id="formatirovanie">  рд╕реНрд╡рд░реВрдкрдг </h1><br><p>  рдпрджреНрдпрдкрд┐ рдЖрдкрдХреЛ рдЙрд╕ рд╢реИрд▓реА рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдкрд╛рджрд┐рдд рдХреА рдЬрд╛ рд░рд╣реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рд╣реИ, рдХрд┐рд╕реА рднреА рдирдП рдХреЛрдб рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><h3 id="otstupy">  рдЗрдВрдбреЗрдВрдЯ </h3><br><p>  рдЗрдВрдбреЗрдВрдЯ 2 рд░рд┐рдХреНрдд рд╕реНрдерд╛рдиред  рдХреЛрдИ рдЯреИрдм рдирд╣реАрдВред </p><br><p>  рдкрдардиреАрдпрддрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХреЗ рд▓рд┐рдП рдмреНрд▓реЙрдХ рдХреЗ рдмреАрдЪ рд░рд┐рдХреНрдд рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рдЗрдВрдбреЗрдВрдЯреЗрд╢рди рджреЛ рдЬрдЧрд╣ рд╣реИред  рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рдЖрдк рдХреНрдпрд╛ рдХрд░рддреЗ рд╣реИрдВ, рдЯреИрдм рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВред  рдореМрдЬреВрджрд╛ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП, рд╡рд░реНрддрдорд╛рди рдЗрдВрдбреЗрдВрдЯреЗрд╢рди рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд░рд╣реЗрдВред </p><br><h3 id="dlina-strok-i-dlina-znacheniy">  рд╕реНрдЯреНрд░рд┐рдВрдЧ рд▓рдВрдмрд╛рдИ рдФрд░ рдореВрд▓реНрдп рд▓рдВрдмрд╛рдИ </h3><br><p>  рдЕрдзрд┐рдХрддрдо рдкрдВрдХреНрддрд┐ рдХреА рд▓рдВрдмрд╛рдИ 80 рд╡рд░реНрдг рд╣реИред </p><br><p>  рдпрджрд┐ рдЖрдкрдХреЛ 80 рд╡рд░реНрдгреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рд▓рдВрдмреА рд▓рд╛рдЗрдиреЗрдВ рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдпрд╣ <code>here document</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдпрд╛, рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ, рддреЛ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд <code>newline</code> ред  рд╢рд╛рдмреНрджрд┐рдХ рдореВрд▓реНрдп рдЬреЛ 80 рд╡рд░реНрдгреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рд▓рдВрдмреЗ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЕрд▓рдЧ рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдпрдереЛрдЪрд┐рдд рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрддреНрдпрдзрд┐рдХ рдЕрдиреБрд╢рдВрд╕рд┐рдд рд╣реИ рдХрд┐ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдХрдорддрд░ рдмрдирд╛рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рдЦреЛрдЬреЗрдВред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  'here document's cat &lt;&lt;END; I am an exceptionally long string. END #  newlines   long_string="I am an exceptionally long string."</span></span></code> </pre> <br><h3 id="payplayny">  рдкрд╛рдЗрдкрд▓рд╛рдЗрди </h3><br><p>  рдпрджрд┐ рд╡реЗ рдПрдХ рд▓рд╛рдЗрди рдкрд░ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдпрджрд┐ рдПрдХ рд▓рд╛рдЗрди рдкрд░ рдПрдХ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдлрд┐рдЯ рдмреИрдарддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдПрдХ рд▓рд╛рдЗрди рдкрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдЗрд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдПрдХ рдирдИ рд▓рд╛рдЗрди рдкрд░ рд╣реЛ рдФрд░ рдЕрдЧрд▓реЗ рдЦрдВрдб рдХреЗ рд▓рд┐рдП 2 рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рджреНрд╡рд╛рд░рд╛ рдЗрдВрдбреЗрдВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПред  рдпрд╣ 'рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдВрдпреБрдХреНрдд рдХрдорд╛рди рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИред'  рд╕рд╛рде рд╣реА '' рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рддрд╛рд░реНрдХрд┐рдХ рдХрдиреЗрдХреНрд╢рди ||  рдФрд░ '&amp;&amp;'ред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      command1 | command2 #   command1 \ | command2 \ | command3 \ | command4</span></span></code> </pre> <br><h3 id="cikly">  рдЪрдХреНрд░ </h3><br><p>  рдЬрдЧрд╣ <code>; do</code>  <code>; do</code> рдФрд░ <code>; then</code>  <code>; then</code> рдЙрд╕реА рд▓рд╛рдЗрди рдкрд░, <code>while</code> рдпрд╛ рдЙрд╕рдХреЗ <code>for</code> ред </p><br><p>  рд╢реЗрд▓ рдореЗрдВ рдЪрдХреНрд░ рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдо рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдШреЛрд╖рд┐рдд рдХрд░рддреЗ рд╕рдордп рдШреБрдВрдШрд░рд╛рд▓реЗ рдмреНрд░реЗрд╕рд┐рдЬрд╝ рдХреЗ рд╕рд╛рде рд╕рдорд╛рди рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВред  рд╡рд╣ рд╣реИ <code>; then</code>  <code>; then</code> рдФрд░ <code>; do</code>  рдПрдХ рд╣реА рд▓рд╛рдЗрди рдкрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреИрд╕реЗ <code>if</code> / рдХреЗ <code>for</code> / <code>while</code> ред  <code>else</code> рдПрдХ рдЕрд▓рдЧ рд▓рд╛рдЗрди рдкрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдХреНрд▓реЛрдЬрд┐рдВрдЧ рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдЕрдкрдиреА рд▓рд╛рдЗрди рдкрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд╢реБрд░реБрдЖрддреА рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдХреЗ рд╕рд╛рде рд▓рдВрдмрд╡рдд рд╕рдВрд░реЗрдЦрд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдПрдХ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> dir <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">${dirs_to_cleanup}</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -d <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${dir}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${ORACLE_SID}</span></span></span><span class="hljs-string">"</span></span> ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> log_date <span class="hljs-string"><span class="hljs-string">"Cleaning up old files in </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${dir}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${ORACLE_SID}</span></span></span><span class="hljs-string">"</span></span> rm <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${dir}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${ORACLE_SID}</span></span></span><span class="hljs-string">/"</span></span>* <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"$?"</span></span> -ne 0 ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> error_message <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> mkdir -p <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${dir}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${ORACLE_SID}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"$?"</span></span> -ne 0 ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> error_message <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><h3 id="operator-case">  рдХреЗрд╕ рдХрд╛ рдмрдпрд╛рди </h3><br><ul><li>  2 рд╕реНрдерд╛рдиреЛрдВ рдореЗрдВ рдЕрд▓рдЧ рд╡рд┐рдХрд▓реНрдкред </li><li>  рд╕рд┐рдВрдЧрд▓ рд▓рд╛рдЗрди рд╡рд┐рдХрд▓реНрдк рдХреЛ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЗ рд╕рдорд╛рдкрди рдмреНрд░реИрдХреЗрдЯ рдХреЗ рдмрд╛рдж рдФрд░ рдкрд╣рд▓реЗ рдПрдХ рд╕реНрдерд╛рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ <code>;;</code>  ред </li><li>  рд▓рдВрдмреЗ рдпрд╛ рдмрд╣реБ-рдХрдорд╛рдВрдб рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдПрдХ рдЯреЗрдореНрдкрд▓реЗрдЯ, рдХрд╛рд░реНрдпреЛрдВ рдФрд░ <code>;;</code> рд╕рд╛рде рдХрдИ рд▓рд╛рдЗрдиреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП <code>;;</code>  рдЕрд▓рдЧ рд▓рд╛рдЗрдиреЛрдВ рдкрд░ред </li></ul><br><p>  рдкрддреНрд░рд╛рдЪрд╛рд░ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпрд╛рдБ <code>case</code> рдФрд░ <code>esac</code> рд╕реЗ рдПрдХ рд╕реНрддрд░ рдХрд╛ <code>esac</code> ред  рдмрд╣реБрд╕реНрддрд░реАрдп рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рднреА рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕реНрддрд░ рдкрд░ рд╕рдВрдХреЗрдд рд╣реЛрддреЗ рд╣реИрдВред  рднрд╛рд╡реЛрдВ рдореЗрдВ рднрд╛рд╡ рдбрд╛рд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдкреИрдЯрд░реНрди рдЦреБрд▓реЗ рдХреЛрд╖реНрдардХ рд╕реЗ рдкрд╣рд▓реЗ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдмрдЪреЗрдВ <code>&amp;;</code>  рдФрд░ <code>;;&amp;</code> рд╕рдВрдХреЗрддрди </p><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${expression}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> a) variable=<span class="hljs-string"><span class="hljs-string">"..."</span></span> some_command <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${variable}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${other_expr}</span></span></span><span class="hljs-string">"</span></span> ... ;; absolute) actions=<span class="hljs-string"><span class="hljs-string">"relative"</span></span> another_command <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${actions}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${other_expr}</span></span></span><span class="hljs-string">"</span></span> ... ;; *) error <span class="hljs-string"><span class="hljs-string">"Unexpected expression '</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${expression}</span></span></span><span class="hljs-string">'"</span></span> ;; <span class="hljs-keyword"><span class="hljs-keyword">esac</span></span></code> </pre> <br><p>  рд╕рд░рд▓ рдХрдорд╛рдВрдб рдХреЛ рдкреИрдЯрд░реНрди рдХреЗ рд╕рд╛рде рдПрдХ рд▓рд╛рдЗрди рдкрд░ рд░рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ <code>;;</code>  рдЬрдмрдХрд┐ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдкрдардиреАрдп рд╣реИред  рдпрд╣ рдЕрдХреНрд╕рд░ рдПрдХрд▓-рдкрддреНрд░ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред  рдЬрдм рдХреНрд░рд┐рдпрд╛рдПрдВ рдПрдХ рд▓рд╛рдЗрди рдкрд░ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИрдВ, рддреЛ рдЕрдкрдиреА рд▓рд╛рдЗрди рдореЗрдВ рдЯреЗрдореНрдкрд▓реЗрдЯ рдЫреЛрдбрд╝ рджреЗрдВ, рдЕрдЧрд▓реА рдХрд╛рд░реНрд░рд╡рд╛рдИ, рдлрд┐рд░ <code>;;</code>  рдЦреБрдж рдХреА рд▓рд╛рдЗрди рдореЗрдВ рднреАред  рдЬрдм рдпрд╣ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╕рдорд╛рди рд░реЗрдЦрд╛ рд╣реЛ, рддреЛ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ рд╕рдорд╛рдкрди рдХреЛрд╖реНрдардХ рдХреЗ рдмрд╛рдж рдФрд░ рдкрд╣рд▓реЗ рдПрдХ рд╕реНрдерд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ <code>;;</code>  ред </p><br><pre> <code class="bash hljs">verbose=<span class="hljs-string"><span class="hljs-string">'false'</span></span> aflag=<span class="hljs-string"><span class="hljs-string">''</span></span> bflag=<span class="hljs-string"><span class="hljs-string">''</span></span> files=<span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-built_in"><span class="hljs-built_in">getopts</span></span> <span class="hljs-string"><span class="hljs-string">'abf:v'</span></span> flag; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${flag}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> a) aflag=<span class="hljs-string"><span class="hljs-string">'true'</span></span> ;; b) bflag=<span class="hljs-string"><span class="hljs-string">'true'</span></span> ;; f) files=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${OPTARG}</span></span></span><span class="hljs-string">"</span></span> ;; v) verbose=<span class="hljs-string"><span class="hljs-string">'true'</span></span> ;; *) error <span class="hljs-string"><span class="hljs-string">"Unexpected option </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${flag}</span></span></span><span class="hljs-string">"</span></span> ;; <span class="hljs-keyword"><span class="hljs-keyword">esac</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><h3 id="rasshirenie-peremennyh">  рдЪрд░ рд╡рд┐рд╕реНрддрд╛рд░ </h3><br><p>  рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдХреЗ рдХреНрд░рдо рдореЗрдВ: рдирд┐рд░реАрдХреНрд╖рдг рдХрд░реЗрдВ рдХрд┐ рдкрд╣рд▓реЗ рд╕реЗ рдХреНрдпрд╛ рдЙрдкрдпреЛрдЧ рдореЗрдВ рд╣реИ;  рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрдиреЛрдВ рдореЗрдВ рд╕рдВрд▓рдЧреНрди рдЪрд░;  <code>"${var}"</code> <code>"$var"</code> рд╕реЗ рдЕрдзрд┐рдХ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдкрдпреЛрдЧ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдПрдХ рдЖрдБрдЦ рдХреЗ рд╕рд╛рдеред </p><br><p>  рдпреЗ рдмрд▓реНрдХрд┐ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╡рд┐рд╖рдп рдЕрдирд┐рд╡рд╛рд░реНрдп рд╡рд┐рдирд┐рдпрдорди рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рд╡рд┐рд╡рд╛рджрд╛рд╕реНрдкрдж рд╣реИред  рд╡реЗ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдХреЗ рдХреНрд░рдо рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рд╣реИрдВред </p><br><ol><li>  рдЙрд╕реА рд╢реИрд▓реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреЛ рдЖрдкрдХреЛ рдореМрдЬреВрджрд╛ рдХреЛрдб рдореЗрдВ рдорд┐рд▓рддреА рд╣реИред </li><li>  рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрдиреЛрдВ рдореЗрдВ рдЪрд░ рдбрд╛рд▓реЗрдВ, рдиреАрдЪреЗ рдХреЛрдЯреЗрд╢рди рдЕрдиреБрднрд╛рдЧ рджреЗрдЦреЗрдВред </li><li><p>  рдЬрдм рддрдХ рдХрдбрд╝рд╛рдИ рд╕реЗ рдЖрд╡рд╢реНрдпрдХ рди рд╣реЛ рдФрд░ рдЧрд╣рд░реЗ рднреНрд░рдо рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХрд▓ рд╡рд░реНрдгреЛрдВ рдХреЛ рд╢реЗрд▓ / рдкреЛрдЬрд┐рд╢рдирд▓ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рди рд░рдЦреЗрдВред <br>  рдЕрдиреНрдп рд╕рднреА рдЪрд░ рдХреЗ рд▓рд┐рдП рдШреБрдВрдШрд░рд╛рд▓реЗ рдмреНрд░реЗрд╕рд┐рдЬрд╝ рдХреЛ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджреЗрдВред </p><br><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#    #    '' : echo "Positional: $1" "$5" "$3" echo "Specials: !=$!, -=$-, _=$_. ?=$?, #=$# *=$* @=$@ \$=$$ ..." #   : echo "many parameters: ${10}" #    : # Output is "a0b0c0" set -- abc echo "${1}0${2}0${3}0" #     : echo "PATH=${PATH}, PWD=${PWD}, mine=${some_var}" while read f; do echo "file=${f}" done &lt; &lt;(ls -l /tmp) #    #   ,    , #     ,   shell echo a=$avar "b=$bvar" "PID=${$}" "${1}" #  : #    "${1}0${2}0${3}0",   "${10}${20}${30} set -- abc echo "$10$20$30"</span></span></code> </pre> <br><h1 id="kavychki">  рдЙрджреНрдзрд░рдг </h1><br><ul><li>  рд╣рдореЗрд╢рд╛ рдЙрди рдорд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬрд┐рдирдореЗрдВ рдЪрд░, рдХрдорд╛рдВрдб рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди, рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рдпрд╛ рд╢реЗрд▓ рдореЗрдЯрд╛рдЪреИрдХрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬрдм рддрдХ рдХрд┐ рдЖрдкрдХреЛ рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрдиреЛрдВ рдореЗрдВ рдирд╣реАрдВ рдореВрд▓реНрдпреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЙрдЬрд╛рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </li><li>  рдЙрди рдорд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрдиреЛрдВ рдХреЛ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджреЗрдВ рдЬреЛ "рд╢рдмреНрдж" рд╣реИрдВ (рдХрдорд╛рдВрдб рдкреИрд░рд╛рдореАрдЯрд░ рдпрд╛ рдкрде рдирд╛рдореЛрдВ рдХреЗ рд╡рд┐рдкрд░реАрдд) </li><li>  рдХрднреА рднреА рдкреВрд░реНрдгрд╛рдВрдХреЛрдВ рдХрд╛ рдЙрджреНрдзрд░рдг рди рджреЗрдВред </li><li>  рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдХреИрд╕реЗ рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрдиреЛрдВ рдореЗрдВ рдореИрдЪ рдкреИрдЯрд░реНрди рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ <code>[[</code> ред </li><li>  <code>"$@"</code> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ <code>$*</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░рдг рдирд╣реАрдВ рд╣реИред </li></ul><br></li></ol><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ''  ,     . # ""  ,   /. #   # "   " flag="$(some_command and its args "$@" 'quoted separately')" # "  " echo "${flag}" # "      " value=32 # "    ",      number="$(generate_number)" # "   ",    readonly USE_INTEGER='true' # "    - shell" echo 'Hello stranger, and well met. Earn lots of $$$' echo "Process $$: Done making \$\$\$." # "    " # ( ,  $1  ) grep -li Hugo /dev/null "$1" #    # "   ,    ": ccs     git send-email --to "${reviewers}" ${ccs:+"--cc" "${ccs}"} #   : $1    #       . grep -cP '([Ss]pecial|\|?characters*)$' ${1:+"$1"} #   , # "$@"   ,  # $*    # # * $*  $@   ,   #      ; # * "$@"     ,   #       ; #     ,      #   # * "$*"    ,    #     () , #        # ( 'man bash'  nit-grits ;-) set -- 1 "2 two" "3 three tres"; echo $# ; set -- "$*"; echo "$#, $@") set -- 1 "2 two" "3 three tres"; echo $# ; set -- "$@"; echo "$#, $@")</span></span></code> </pre> <br><h1 id="osobennosti-i-oshibki">  рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдФрд░ рддреНрд░реБрдЯрд┐рдпрд╛рдБ </h1><br><h3 id="podstanovka-kommand">  рдХрдорд╛рди рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди </h3><br><p>  рдмреИрдХрдЯрд┐рдХреНрд╕ рдХреЗ рдмрдЬрд╛рдп <code>$(command)</code> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><p>  рдиреЗрд╕реНрдЯреЗрдб рдмреИрдХрдЯрд┐рдХреНрд╕ рдХреЛ <code>\</code> _ рдХреЗ рд╕рд╛рде рдЖрдВрддрд░рд┐рдХ рдЙрджреНрдзрд░рдг рд╕реЗ рдмрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  <code>$ (command)</code> рдкреНрд░рд╛рд░реВрдк рдиреЗрд╕реНрдЯрд┐рдВрдЧ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдирд╣реАрдВ рдмрджрд▓рддрд╛ рд╣реИ рдФрд░ рдкрдврд╝рдиреЗ рдореЗрдВ рдЖрд╕рд╛рди рд╣реИред </p><br><p>  рдПрдХ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  : var="$(command "$(command1)")" #  : var="`command \`command1\``"</span></span></code> </pre> <br><h3 id="proverki--i-">  рдЬрд╛рдБрдЪ, <code>[</code> рдФрд░ <code>[[</code> </h3><br><p>  <code>[[ ... ]]</code> <code>test</code> , рдпрд╛ <code>/usr/bin/[</code> рддреБрд▓рдирд╛ <code>[[ ... ]]</code> рдЕрдзрд┐рдХ рдмреЗрд╣рддрд░ рд╣реИред </p><br><p>  <code>[[ ... ]]</code> рддреНрд░реБрдЯрд┐ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ <code>[[</code> рдФрд░ <code>]]</code> , рдФрд░ <code>[[ ... ]]</code> рдмреАрдЪ рдХреЛрдИ рдкрде рд╕рдВрдХрд▓реНрдк рдпрд╛ рд╢рдмреНрдж рдкреГрдердХреНрдХрд░рдг рдирд╣реАрдВ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЖрдк рдПрдХ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ <code>[ ... ]</code> рдирд╣реАрдВ рд╣реИред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  ,       #  `alnum`,     . #  ,       #  .  ,  # E14   https://tiswww.case.edu/php/chet/bash/FAQ if [[ "filename" =~ ^[[:alnum:]]+name ]]; then echo "Match" fi #     "f*" (    ) if [[ "filename" == "f*" ]]; then echo "Match" fi #    "too many arguments",   f*   #     if [ "filename" == f* ]; then echo "Match" fi</span></span></code> </pre> <br><h3 id="proverka-znacheniy">  рдорд╛рди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ </h3><br><p>  рдЬрд╣рд╛рдВ рд╕рдВрднрд╡ рд╣реЛ, рдЕрддрд┐рд░рд┐рдХреНрдд рдкрд╛рддреНрд░реЛрдВ рдХреЗ рдмрдЬрд╛рдп рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><p>  рдмреИрд╢ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╕реНрдорд╛рд░реНрдЯ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдкрд░рд┐рдгрд╛рдореА рдХреЛрдб рдХреЛ рдкрдврд╝рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ, рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд░реНрдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛, рдЦрд╛рд▓реА / рдЧреИрд░-рд░рд┐рдХреНрдд рдорд╛рди рдпрд╛ рдЦрд╛рд▓реА рдорд╛рди рдХреЗ рд▓рд┐рдП рдЪреЗрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  : if [[ "${my_var}" = "some_string" ]]; then do_something fi # -z (   ),  -n (    ): #      if [[ -z "${my_var}" ]]; then do_something fi #   ( ),   : if [[ "${my_var}" = "" ]]; then do_something fi #   : if [[ "${my_var}X" = "some_stringX" ]]; then do_something fi</span></span></code> </pre> <br><p>  рдЖрдк рдЬреЛ рдЬрд╛рдБрдЪ рд░рд╣реЗ рд╣реИрдВ, рдЙрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреНрд░рдо рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ <code>-z</code> рдпрд╛ <code>-n</code> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   if [[ -n "${my_var}" ]]; then do_something fi #  ,    ,  ${my_var} #     . if [[ "${my_var}" ]]; then do_something fi</span></span></code> </pre> <br><h3 id="vyrazheniya-podstanovki-dlya-imen-faylov">  рдлрд╝рд╛рдЗрд▓ рдирд╛рдо рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рднрд╛рд╡ </h3><br><p>  рдлрд╝рд╛рдЗрд▓ рдирд╛рдореЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд╛рдЗрд▓реНрдбрдХрд╛рд░реНрдб рдПрдХреНрд╕рдкреНрд░реЗрд╢рди рдмрдирд╛рддреЗ рд╕рдордп рд╕реНрдкрд╖реНрдЯ рдкрде рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><p>  рдЪреВрдВрдХрд┐ рдлрд╝рд╛рдЗрд▓ рдирд╛рдо <code>-</code> рдЪрд░рд┐рддреНрд░ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╡рд╛рдЗрд▓реНрдбрдХрд╛рд░реНрдб рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреЛ <code>./*</code> рдмрдЬрд╛рдпред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   : # -f -r somedir somefile #        force psa@bilby$ rm -v * removed directory: `somedir' removed `somefile' #   : psa@bilby$ rm -v ./* removed `./-f' removed `./-r' rm: cannot remove `./somedir': Is a directory removed `./somefile'</span></span></code> </pre> <br><h3 id="eval">  eval </h3><br><p>  <code>eval</code> рд╕реЗ рдмрдЪрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдПрд╡рд▓ рдЖрдкрдХреЛ рдЗрдирдкреБрдЯ рдореЗрдВ рдкрд╛рд░рд┐рдд рдЪрд░ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрдиреНрдп рдЪрд░ рднреА рд╕реЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЙрдиреНрд╣реЗрдВ рдЬрд╛рдВрдЪрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреЗ рдмрд┐рдирд╛ред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ? #   ?   ? eval $(set_my_variables) #  ,         ? variable="$(eval some_function)"</span></span></code> </pre> <br><h3 id="paypy-v-while">  рдореЗрдВ рдкрд╛рдЗрдк </h3><br><p>  рдЖрджреЗрд╢ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдпрд╛ рд▓реВрдк рдХреЗ <code>for</code> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, <code>while</code> рдкрд╛рдЗрдк рдореЗрдВред  рдЪрд░ <code>while</code> рдореЗрдВ рдмрджрд▓реЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЪрд░ рдЕрднрд┐рднрд╛рд╡рдХ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рдлреИрд▓рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд▓реВрдк рдХрдорд╛рдВрдб рдХреЛ рдПрдХ рдЙрдк-рд╢реЗрд▓ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  <code>while</code> рдкрд╛рдЗрдк рдореЗрдВ рдПрдХ рдирд┐рд╣рд┐рдд рдЙрдк-рд╢реЗрд▓ рддреНрд░реБрдЯрд┐ рдЯреНрд░реИрдХрд┐рдВрдЧ рдХреЛ рдореБрд╢реНрдХрд┐рд▓ рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><blockquote><pre> <code class="bash hljs">last_line=<span class="hljs-string"><span class="hljs-string">'NULL'</span></span> your_command | <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> line; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> last_line=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${line}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-comment"><span class="hljs-comment">#   'NULL' echo "${last_line}"</span></span></code> </pre> </blockquote><p>  рдПрдХ рд▓реВрдк рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдпрджрд┐ рдЖрдк рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реИрдВ рдХрд┐ рдЗрдирдкреБрдЯ рдореЗрдВ рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рдпрд╛ рд╡рд┐рд╢реЗрд╖ рд╡рд░реНрдг рдирд╣реАрдВ рд╣реЛрдВрдЧреЗ (рдЖрдорддреМрд░ рдкрд░ рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ рдХрд╛ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИ)ред </p><br><pre> <code class="bash hljs">total=0 <span class="hljs-comment"><span class="hljs-comment">#  ,       . for value in $(command); do total+="${value}" done</span></span></code> </pre> <br><p>  рдХрдорд╛рдВрдб рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдЖрдк рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдЙрдк-рд╢реЗрд▓ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдПрдХ рд╕реНрдкрд╖реНрдЯ рдЙрдк-рд╢реЗрд▓ рдореЗрдВ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ <code>while</code> рд▓рд┐рдП рдмреИрд╢ рдмрдирд╛рддрд╛ рд╣реИред </p><br><pre> <code class="bash hljs">total=0 last_file= <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> count filename; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> total+=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${count}</span></span></span><span class="hljs-string">"</span></span> last_file=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${filename}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> &lt; &lt;(your_command | uniq -c) <span class="hljs-comment"><span class="hljs-comment">#         # . echo "Total = ${total}" echo "Last one = ${last_file}"</span></span></code> </pre> <br><p>  рдРрд╕реЗ рдЫреЛрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬрд╣рд╛рдВ рдореВрд▓ рд╢реЗрд▓ рдореЗрдВ рдЬрдЯрд┐рд▓ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рдпрд╣ рддрдм рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИ рдЬрдм рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ "рдкрд╛рд░реНрд╕рд┐рдВрдЧ" рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рдХрднреА-рдХрднреА рдЬрд╛рдЧ рдЬреИрд╕реЗ рдЙрдкрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рд▓ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛрддрд╛ рд╣реИред  рдпрд╣ рддрдм рднреА рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЬрдм рдЖрдк рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдореВрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рдЪрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    awk: # awk '$3 == "nfs" { print $2 " maps to " $1 }' /proc/mounts cat /proc/mounts | while read src dest type opts rest; do if [[ ${type} == "nfs" ]]; then echo "NFS ${dest} maps to ${src}" fi done</span></span></code> </pre> <br><h1 id="soglashenie-o-nazvaniyah">  рдирд╛рдордХрд░рдг рд╕рдореНрдореЗрд▓рди </h1><br><h3 id="nazvaniya-funkciy">  рдХрд╛рд░реНрдп рдХрд╛ рдирд╛рдо </h3><br><p>  рд╢рдмреНрджреЛрдВ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдВрдбрд░рд╕реНрдХреЛрд░ рдХреЗ рд╕рд╛рде рдирд┐рдЪрд▓рд╛ рдорд╛рдорд▓рд╛ред  рдЕрд▓рдЧ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЗ рд╕рд╛рде <code>::</code> ред  рдлрд╝рдВрдХреНрд╢рди рдирд╛рдо рдХреЗ рдмрд╛рдж рдмреНрд░реИрдХреЗрдЯ рдЖрд╡рд╢реНрдпрдХ рд╣реИрдВред  рдлрд╝рдВрдХреНрд╢рди рдХреАрд╡рд░реНрдб рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдкреВрд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИред </p><br><p>  рдпрджрд┐ рдЖрдк рдЕрд▓рдЧ-рдЕрд▓рдЧ рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рддреЛ рд▓реЛрдЕрд░рдХреЗрд╕ рдФрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╢рдмреНрджреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдВрдбрд░рд╕реНрдХреЛрд░ рдХреЗ рд╕рд╛рде рдХрд░реЗрдВред  рдпрджрд┐ рдЖрдк рдкреИрдХреЗрдЬ рд▓рд┐рдЦ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдкреИрдХреЗрдЬ рдХреЗ рдирд╛рдореЛрдВ рдХреЛ <code>::</code> рдЕрд▓рдЧ рдХрд░реЗрдВред  рдмреНрд░реИрдХреЗрдЯ рдлрд╝рдВрдХреНрд╢рди рдирд╛рдо (Google рдкрд░ рдЕрдиреНрдп рднрд╛рд╖рд╛рдУрдВ рдХреА рддрд░рд╣) рдХреЗ рд╕рдорд╛рди рдкрдВрдХреНрддрд┐ рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдлрд╝рдВрдХреНрд╢рди рдирд╛рдо рдФрд░ рдмреНрд░реИрдХреЗрдЯ рдХреЗ рдмреАрдЪ рд╕реНрдерд╛рди рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   my_func() { ... } #   mypackage::my_func() { ... }</span></span></code> </pre> <br><p>  рдЬрдм рдлрд╝рдВрдХреНрд╢рди рдирд╛рдо рдХреЗ рдмрд╛рдж "()" рдЖрддрд╛ рд╣реИ, рддреЛ рдлрд╝рдВрдХреНрд╢рди рдХреАрд╡рд░реНрдб рдЕрдирд╛рд╡рд╢реНрдпрдХ рджрд┐рдЦрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдХреА рддреНрд╡рд░рд┐рдд рдкрд╣рдЪрд╛рди рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░рддрд╛ рд╣реИред </p><br><h3 id="nazvanie-peremennyh">  рдЪрд░ рдирд╛рдо </h3><br><p>  рдлрд╝рдВрдХреНрд╢рди рдирд╛рдореЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВред </p><br><p>  рд▓реВрдк рдХреЗ рд▓рд┐рдП рдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдирд╛рдо рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдХрд┐рд╕реА рднреА рдЪрд░ рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдирд╛рдорд┐рдд рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред </p><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> zone <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">${zones}</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> something_with <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${zone}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><h3 id="nazvaniya-konstanty-peremennyh-okruzheniya">  рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдирд┐рд░рдВрддрд░ рдирд╛рдо </h3><br><p>  рд╕рднреА рдмрдбрд╝реЗ рдЕрдХреНрд╖рд░реЛрдВ рдореЗрдВ, рдЕрдВрдбрд░рд╕реНрдХреЛрд░ рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдХрд┐рдП рдЧрдП, рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдШреЛрд╖рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред </p><br><p>  рд▓рдЧрд╛рддрд╛рд░ рдФрд░ рд╕рдм рдХреБрдЫ рдЬреЛ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЛ рдирд┐рд░реНрдпрд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдКрдкрд░реА рдорд╛рдорд▓реЗ рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  readonly PATH_TO_FILES='/some/path' # ,   declare -xr ORACLE_SID='PROD'</span></span></code> </pre> <br><p>  рдХреБрдЫ рдЪреАрдЬреЗрдВ рд╕реНрдерд┐рд░ рд░рд╣рддреА рд╣реИрдВ рдЬрдм рд╡реЗ рдкрд╣рд▓реА рдмрд╛рд░ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрддреА рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>getopts</code> рдорд╛рдзреНрдпрдо рд╕реЗ)ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, <code>getopts</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдпрд╛ рдПрдХ рд╢рд░реНрдд рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рд╕реНрдерд┐рд░ рд╕реЗрдЯ рдХрд░рдирд╛ рдХрд╛рдлреА рд╕рд╛рдорд╛рдиреНрдп рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдареАрдХ рдмрд╛рдж рдЗрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <code>declare</code> рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдЕрдВрджрд░ рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдЖрд╕рд╛рдиреА рд╕реЗ рдпрд╛ <code>export</code> рд╕рд┐рдлрд╛рд░рд┐рд╢ <code>export</code> рдЬрд╛рддреА рд╣реИред </p><br><pre> <code class="bash hljs">VERBOSE=<span class="hljs-string"><span class="hljs-string">'false'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-built_in"><span class="hljs-built_in">getopts</span></span> <span class="hljs-string"><span class="hljs-string">'v'</span></span> flag; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${flag}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> v) VERBOSE=<span class="hljs-string"><span class="hljs-string">'true'</span></span> ;; <span class="hljs-keyword"><span class="hljs-keyword">esac</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-built_in"><span class="hljs-built_in">readonly</span></span> VERBOSE</code> </pre> <br><h3 id="nazaniya-ishodnyh-faylov">  рд╕реНрд░реЛрдд рдлрд╝рд╛рдЗрд▓ рдирд╛рдо </h3><br><p>  рдирд┐рдЪрд▓реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдЕрд▓рдЧ рд╢рдмреНрджреЛрдВ рдореЗрдВ рдЕрдВрдбрд░рд╕реНрдХреЛрд░ рдХреЗ рд╕рд╛рдеред </p><br><p>  рдпрд╣ Google рдкрд░ рдХреЛрдб рдХреА рдЕрдиреНрдп рд╢реИрд▓рд┐рдпреЛрдВ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ: <code>maketemplate</code> рдпрд╛ <code>make_template</code> , рд▓реЗрдХрд┐рди <code>make-template</code> ред </p><br><h3 id="peremennye-tolko-dlya-chteniya">  рдХреЗрд╡рд▓ рдЪрд░ рдкрдврд╝реЗрдВ </h3><br><p>  рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╡реЗ рдХреЗрд╡рд▓ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдкрдврд╝реЗрдВ рдпрд╛ <code>declare -r</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><p>      shell,       .    ,    ,   . </p><br><pre> <code class="bash hljs">zip_version=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(dpkg --status zip | grep Version: | cut -d ' ' -f 2)</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -z <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${zip_version}</span></span></span><span class="hljs-string">"</span></span> ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> error_message <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">readonly</span></span> zip_version <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre> <br><h3 id="ispolzovanie-lokalnyh-peremennyh">    </h3><br><p>  ,   ,  <code>local</code> .        . </p><br><p> ,           ,  <code>local</code>   .           ,      . </p><br><p>       ,      ;  <code>local</code>   exit code   . </p><br><pre> <code class="bash hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">my_func2</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> name=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$1</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-comment"><span class="hljs-comment">#      : local my_var my_var="$(my_func)" || return #   : $?  exit code  'local',   my_func local my_var="$(my_func)" [[ $? -eq 0 ]] || return ... }</span></span></code> </pre> <br><h3 id="raspolozhenie-funkciy">   </h3><br><p>        .      . </p><br><p>     ,        .  ,  set   ,      . </p><br><p>      .             . </p><br><h3 id="main"> main </h3><br><p> ,  <code>main</code> ,     ,       . </p><br><p>       ,      <code>main</code>    .       ,         (  ,      ).          main: </p><br><pre> <code class="bash hljs">main <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$@</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><p> ,    ,      ,  <code>main</code> тАФ ,    . </p><br><h1 id="vyzov-komand">   </h1><br><h3 id="proverka-vozvraschaemyh-znacheniy">    </h3><br><p>         . </p><br><p>       <code>$?</code>      <code>if</code> ,   . </p><br><p> : </p><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ! mv <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${file_list}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${dest_dir}</span></span></span><span class="hljs-string">/"</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Unable to move </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${file_list}</span></span></span><span class="hljs-string"> to </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${dest_dir}</span></span></span><span class="hljs-string">"</span></span> &gt;&amp;2 <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${E_BAD_MOVE}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-comment"><span class="hljs-comment">#  mv "${file_list}" "${dest_dir}/" if [[ "$?" -ne 0 ]]; then echo "Unable to move ${file_list} to ${dest_dir}" &gt;&amp;2 exit "${E_BAD_MOVE}" fi Bash    `PIPESTATUS`,         .           ,   : ```bash tar -cf - ./* | ( cd "${dir}" &amp;&amp; tar -xf - ) if [[ "${PIPESTATUS[0]}" -ne 0 || "${PIPESTATUS[1]}" -ne 0 ]]; then echo "Unable to tar files to ${dir}" &gt;&amp;2 fi</span></span></code> </pre> <br><p> ,   <code>PIPESTATUS</code>  ,      -  ,            ,   <code>PIPESTATUS</code>       ( ,  <code>[</code>     <code>PIPESTATUS</code> ). </p><br><pre> <code class="bash hljs">tar -cf - ./* | ( <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${DIR}</span></span></span><span class="hljs-string">"</span></span> &amp;&amp; tar -xf - ) return_codes=(<span class="hljs-variable"><span class="hljs-variable">${PIPESTATUS[*]}</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${return_codes[0]}</span></span></span><span class="hljs-string">"</span></span> -ne 0 ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> do_something <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${return_codes[1]}</span></span></span><span class="hljs-string">"</span></span> -ne 0 ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> do_something_else <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre> <br><h3 id="vstroennye-funkcii-ili-vneshnie-kommandy">      </h3><br><p>       shell     ,  . </p><br><p>     ,       bash,       (    ,  <code>sed</code> ). </p><br><p> : </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  : addition=$((${X} + ${Y})) substitution="${string/#foo/bar}" #  : addition="$(expr ${X} + ${Y})" substitution="$(echo "${string}" | sed -e 's/^foo/bar/')"</span></span></code> </pre> <br><h1 id="vyvod">  рдирд┐рд╖реНрдХрд░реНрд╖ </h1><br><p>      . </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреГрдкрдпрд╛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ рдореИрдиреБрдЕрд▓</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЗ рдирд┐рдЪрд▓реЗ рднрд╛рдЧ рдореЗрдВ рдкрд╛рд░реНрдЯрд┐рдВрдЧ рд╡рд░реНрдбреНрд╕ рд╕реЗрдХреНрд╢рди рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдорд┐рдирдЯ рд▓реЗрдВ </font><font style="vertical-align: inherit;">ред</font></font></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi413155/">https://habr.com/ru/post/hi413155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi413143/index.html">рдмреЙрдмреА рдЕрд░реНрдмрди рд▓рд╛рдЗрдЯ: рдПрдХреНрд╕рдбреА рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд╛ рдиреНрдпреВ рдЕрд░реНрдмрди рдмреИрдХрдкреИрдХ</a></li>
<li><a href="../hi413145/index.html">рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рд╡реНрдпрд╡рд╕рд╛рдп рдХреЛ рдкреИрд╕рд╛ рдмрдирд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi413147/index.html">рдХреНрдпрд╛ Oracle рдХреЗ рдмрдЬрд╛рдп Tibero рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред рдФрд░ рдХреНрдпрд╛ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ</a></li>
<li><a href="../hi413149/index.html">рдбреЗрдЯрд╛ рд▓реЗрдХ рдЕрд╡рдзрд╛рд░рдгрд╛ рдореЗрдВ рд╡рд┐рддрд░рд┐рдд рдбреЗрдЯрд╛ рд╡реЗрдпрд░рд╣рд╛рдЙрд╕: рдЬрд╣рд╛рдВ рд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛рдП</a></li>
<li><a href="../hi413151/index.html">рдПрдирдПрд╕рдП рдиреЗ IoT рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдорд╛рдирдХ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдЖрдИрдПрд╕рдУ рдиреЗ рдЗрд╕реЗ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛</a></li>
<li><a href="../hi413157/index.html">рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдкрд╛рд╕рд╡рд░реНрдб рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi413159/index.html">рдбрд╛рд░реНрдХ рдпрд╛ рд▓рд╛рдЗрдЯ рдпреВрдЖрдИ? рдЕрдкрдиреЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рд░рдВрдЧ рдпреЛрдЬрдирд╛ рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП рдЯрд┐рдкреНрд╕</a></li>
<li><a href="../hi413161/index.html">рдЧрд┐рдд рдХрд╡рд┐рддрд╛</a></li>
<li><a href="../hi413163/index.html">HTTPS рдХрдордЬреЛрд░рд┐рдпреЛрдВред рднрд╛рдЧ реи</a></li>
<li><a href="../hi413165/index.html">рдПрд╕рдЖрд░рдЯреАрдкреА рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>