<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüé§ ü•ì üë©üèø‚Äçü§ù‚Äçüë®üèª Programmation Java fonctionnelle avec Vavr üöµüèΩ üë©üèæ ü§∂üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaucoup ont entendu parler de langages fonctionnels tels que Haskell et Clojure. Mais il y a des langues comme Scala, par exemple. Il combine √† la fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programmation Java fonctionnelle avec Vavr</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421839/">  Beaucoup ont entendu parler de langages fonctionnels tels que Haskell et Clojure.  Mais il y a des langues comme Scala, par exemple.  Il combine √† la fois la POO et une approche fonctionnelle.  Et le bon vieux Java?  Est-il possible d'√©crire des programmes dans un style fonctionnel et √† quel point cela peut faire mal?  Oui, il y a Java 8 et lambdas avec des flux.  C'est un grand pas pour la langue, mais ce n'est toujours pas suffisant.  Est-il possible de trouver quelque chose dans cette situation?  Il s'av√®re que oui. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/u2/tp/cr/u2tpcrdrjmcmw9yvj9ptnbsuiwo.jpeg"></div><br><a name="habracut"></a><br>  Pour commencer, essayons de d√©terminer ce que signifie l'√©criture de code dans un style fonctionnel.  Premi√®rement, nous devons op√©rer non pas avec des variables et des manipulations avec elles, mais avec des cha√Ænes de calculs.  Essentiellement, une s√©quence de fonctions.  De plus, nous devons avoir des structures de donn√©es sp√©ciales.  Par exemple, les collections Java standard ne conviennent pas.  Il sera bient√¥t clair pourquoi. <br><br>  Examinons plus en d√©tail les structures fonctionnelles.  Une telle structure doit satisfaire au moins deux conditions: <br><br><ul><li>  <b><i>immuable</i></b> - la structure doit √™tre immuable.  Cela signifie que nous fixons l'√©tat de l'objet au stade de la cr√©ation et le laissons tel quel jusqu'√† la fin de son existence.  Un exemple clair d'une violation de condition: ArrayList standard. </li><li>  <b>persistante</b> - la structure doit √™tre stock√©e en m√©moire aussi longtemps que possible.  Si nous avons cr√©√© un objet, au lieu d'en cr√©er un nouveau avec le m√™me √©tat, nous devrions utiliser celui qui est pr√™t.  Plus formellement, ces structures conservent tous leurs √©tats pr√©c√©dents lors de la modification.  Les r√©f√©rences √† ces conditions doivent rester pleinement op√©rationnelles. </li></ul><br>  De toute √©vidence, nous avons besoin d'une sorte de solution tierce.  Et il existe une telle solution: la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vavr</a> .  Aujourd'hui, c'est la biblioth√®que <i>Java</i> la plus populaire pour travailler dans un style fonctionnel.  Ensuite, je d√©crirai les principales fonctionnalit√©s de la biblioth√®que.  De nombreux, mais en aucun cas tous, exemples et descriptions ont √©t√© tir√©s de la documentation officielle. <br><br><h2>  Les principales structures de donn√©es de la biblioth√®que <b>vavr</b> </h2><br><h3>  Tuple </h3><br>  Les tuples sont l'une des structures de donn√©es fonctionnelles les plus simples et les plus simples.  Un tuple est un ensemble ordonn√© de longueur fixe.  Contrairement aux listes, un tuple peut contenir des donn√©es de tout type. <br><br><pre><code class="java hljs">Tuple tuple = Tuple.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"blablabla"</span></span>, .<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">42L</span></span>); <span class="hljs-comment"><span class="hljs-comment">// (1, blablabla, 0.0, 42)</span></span></code> </pre> <br>  Obtenir l'√©l√©ment souhait√© provient de l'appel du champ avec le num√©ro d'article dans le tuple. <br><br><pre> <code class="java hljs">((Tuple4) tuple)._1 <span class="hljs-comment"><span class="hljs-comment">// 1</span></span></code> </pre> <br>  Remarque: l'indexation de tuple commence √† 1!  De plus, pour obtenir l'√©l√©ment souhait√©, nous devons convertir notre objet en le type souhait√© avec l'ensemble de m√©thodes appropri√©.  Dans l'exemple ci-dessus, nous avons utilis√© un tuple de 4 √©l√©ments, ce qui signifie que la conversion doit √™tre de type <i>Tuple4</i> .  En fait, personne ne nous emp√™che de faire initialement le bon type. <br><br><pre> <code class="java hljs">Tuple4 tuple = Tuple.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"blablabla"</span></span>, .<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">42L</span></span>); <span class="hljs-comment"><span class="hljs-comment">// (1, blablabla, 0.0, 42) System.out.println(tuple._1); // 1</span></span></code> </pre> <br><h3>  Top 3 des collections Vavr </h3><br><h4>  Liste </h4><br>  Cr√©er une liste avec vavr est tr√®s simple.  Encore plus facile que sans <i>vavr</i> . <br><br><pre> <code class="java hljs">List.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br>  Que pouvons-nous faire avec une telle liste?  Eh bien, tout d'abord, nous pouvons le transformer en une liste <i>java</i> standard. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> containThree = List.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) .asJava() .stream() .anyMatch(x -&gt; x == <span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre><br>  Mais en fait, ce n'est pas tr√®s n√©cessaire, car  nous pouvons faire, par exemple, comme ceci: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> containThree = List.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) .find(x -&gt; x == <span class="hljs-number"><span class="hljs-number">1</span></span>) .isDefined();</code> </pre> <br>  En g√©n√©ral, la <i>liste de</i> biblioth√®ques <i>vavr</i> standard <i>contient de</i> nombreuses m√©thodes utiles.  Par exemple, il existe une fonction de convolution assez puissante qui vous permet de combiner une liste de valeurs par une r√®gle et un √©l√©ment neutre. <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   final int zero = 0; //   final BiFunction&lt;Integer, Integer, Integer&gt; combine = (x, y) -&gt; x + y; //   final int sum = List.of(1, 2, 3) .fold(zero, combine); //  </span></span></code> </pre> <br>  Il convient de noter ici un point important.  Nous avons des structures de donn√©es fonctionnelles, ce qui signifie que nous ne pouvons pas changer leur √©tat.  Comment notre liste est-elle mise en ≈ìuvre?  Les tableaux ne nous conviennent tout simplement pas. <br><br>  <b>Liste li√©e comme liste par d√©faut</b> <br><br>  Faisons une liste simplement li√©e avec des objets immuables.  Cela ressemblera √† ceci: <br><br><img src="https://habrastorage.org/webt/lr/4p/xn/lr4pxnezcvipnsgaownffgw6ewq.png" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><pre> <code class="java hljs">List list = List.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre> <br></div></div><br>  Chaque √©l√©ment de la liste a deux m√©thodes principales: obtenir l'√©l√©ment head (head) et tous les autres (tail). <br><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><pre> <code class="java hljs">list.head(); <span class="hljs-comment"><span class="hljs-comment">// 1 list.tail(); // List(2, 3)</span></span></code> </pre> <br></div></div><br>  Maintenant, si nous voulons changer le premier √©l√©ment de la liste (de 1 √† 0), alors nous devons cr√©er une nouvelle liste avec la r√©utilisation des pi√®ces finies. <br><br><img src="https://habrastorage.org/webt/hu/xc/lp/huxclpxqlaunelfqyqu259ayj9o.png" alt="image"><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> List tailList = list.tail(); <span class="hljs-comment"><span class="hljs-comment">//    tailList.prepend(0); //     </span></span></code> </pre> <br></div></div><br>  Et c'est tout!  √âtant donn√© que nos objets dans la feuille de calcul sont immuables, nous obtenons une collection thread-safe et r√©utilisable.  Les √©l√©ments de notre liste peuvent √™tre appliqu√©s n'importe o√π dans l'application et c'est compl√®tement s√ªr! <br><br><h4>  File d'attente </h4><br>  Une autre structure de donn√©es extr√™mement utile est la file d'attente.  Comment faire une file d'attente pour construire des programmes efficaces et fiables dans un style fonctionnel?  Par exemple, nous pouvons prendre des structures de donn√©es que nous connaissons d√©j√†: deux listes et un tuple. <br><br><img src="https://habrastorage.org/webt/bi/bp/sb/bibpsbx_odpxx2kdupxg0l4ufku.png" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><pre> <code class="java hljs">Queue&lt;Integer&gt; queue = Queue.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) .enqueue(<span class="hljs-number"><span class="hljs-number">4</span></span>) .enqueue(<span class="hljs-number"><span class="hljs-number">5</span></span>);</code> </pre> <br></div></div><br>  Lorsque le premier se termine, nous d√©veloppons le second et l'utilisons pour la lecture. <br><br><img src="https://habrastorage.org/webt/b5/ho/zz/b5hozzqnmnm8fyhoebj3g3d7c_0.png" alt="image"><br><br><img src="https://habrastorage.org/webt/ld/_e/ly/ld_ely_1i5buzwbadpirjf0f1gc.png" alt="image"><br><br>  Il est important de se rappeler que la file d'attente doit √™tre inchang√©e, comme toutes les autres structures.  Mais √† quoi sert une file d'attente qui ne change pas?  En fait, il y a une astuce.  En tant que valeur accept√©e de la file d'attente, nous obtenons un tuple de deux √©l√©ments.  Premi√®rement: l'√©l√©ment de file d'attente souhait√©, deuxi√®mement: ce qui est arriv√© √† la file d'attente sans cet √©l√©ment. <br><br><pre> <code class="java hljs">System.out.println(queue); <span class="hljs-comment"><span class="hljs-comment">// Queue(1, 2, 3, 4, 5) Tuple2&lt;Integer, Queue&lt;Integer&gt;&gt; tuple2 = queue.dequeue(); System.out.println(tuple2._1); // 1 System.out.println(tuple2._2); // Queue(2, 3, 4, 5)</span></span></code> </pre> <br><h4>  Streams </h4><br>  La prochaine structure de donn√©es importante est le flux.  Un flux est un flux d'ex√©cution de certaines actions sur un certain ensemble de valeurs, souvent abstrait. <br><br>  Quelqu'un peut dire que <i>Java 8 a</i> d√©j√† des flux √† part enti√®re et nous n'en avons pas besoin du tout.  En est-il ainsi? <br><br>  Pour commencer, assurons-nous que le <i>flux java</i> n'est pas une structure de donn√©es fonctionnelle.  V√©rifiez la structure pour la mutabilit√©.  Pour ce faire, cr√©ez un si petit flux: <br><pre> <code class="java hljs">IntStream standardStream = IntStream.range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>);</code> </pre> <br>  Nous allons trier tous les √©l√©ments du flux: <br><br><pre> <code class="java hljs">standardStream.forEach(System.out::print);</code> </pre> <br>  En r√©ponse, nous obtenons la sortie sur la console: <i>123456789</i> .  R√©p√©tons l'op√©ration de force brute: <br><br><pre> <code class="java hljs">standardStream.forEach(System.out::print);</code> </pre> <br>  Oups, l'erreur suivante s'est produite: <br><br><pre> <code class="java hljs">java.lang.IllegalStateException: stream has already been operated upon or closed</code> </pre><br>  Le fait est que les flux standard ne sont qu'une sorte d'abstraction sur un it√©rateur.  Bien que les flux ext√©rieurs semblent extr√™mement ind√©pendants et puissants, les inconv√©nients des it√©rateurs n'ont pas disparu. <br><br>  Par exemple, la d√©finition d'un flux ne dit rien sur la limitation du nombre d'√©l√©ments.  Malheureusement, il existe dans l'it√©rateur, ce qui signifie qu'il se trouve dans les flux standard. <br><br>  Heureusement, la biblioth√®que vavr r√©sout ces probl√®mes.  Assurez-vous de ceci: <br><br><pre> <code class="java hljs">Stream stream = Stream.range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); stream.forEach(System.out::print); stream.forEach(System.out::print);</code> </pre> <br>  En r√©ponse, nous obtenons <i>123456789123456789</i> .  Ce qui signifie que la premi√®re op√©ration n'a pas ¬´g√¢ch√©¬ª notre flux. <br><br>  Essayons de cr√©er un flux sans fin: <br><br>  Stream infiniteStream = Stream.from (1); <br>  System.out.println (infiniteStream);  // Stream (1,?) <br><br>  Remarque: lors de l'impression d'un objet, nous n'obtenons pas une structure infinie, mais le premier √©l√©ment et un point d'interrogation.  Le fait est que chaque √©l√©ment suivant du flux est g√©n√©r√© √† la vol√©e.  Cette approche est appel√©e initialisation paresseuse.  C'est lui qui vous permet de travailler en toute s√©curit√© avec de telles structures. <br><br>  Si vous n'avez jamais travaill√© avec des structures de donn√©es infinies, alors vous pensez probablement: pourquoi est-ce n√©cessaire?  Mais ils peuvent √™tre extr√™mement pratiques.  Nous √©crivons un flux qui renvoie un nombre arbitraire de nombres impairs, les convertit en cha√Æne et ajoute un espace: <br><br><pre> <code class="java hljs">Stream oddNumbers = Stream .from(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  1   2 .map(x -&gt; x + " "); //  //   oddNumbers.take(5) .forEach(System.out::print); // 1 3 5 7 9 oddNumbers.take(10) .forEach(System.out::print); // 1 3 5 7 9 11 13 15 17 19</span></span></code> </pre> <br>  Si simple. <br><br><h3>  Structure g√©n√©rale des collections </h3><br>  Apr√®s avoir discut√© des structures de base, il est temps de regarder l'architecture g√©n√©rale des collections fonctionnelles <i>vavr</i> : <br><br><img src="https://habrastorage.org/webt/m2/ae/wl/m2aewlwyky8-r-dktx1asgvxqgy.png"><br><br>  Chaque √©l√©ment de la structure peut √™tre utilis√© comme it√©rable: <br><br><pre> <code class="java hljs">StringBuilder builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String word : List.of(<span class="hljs-string"><span class="hljs-string">"one"</span></span>, <span class="hljs-string"><span class="hljs-string">"two"</span></span>, <span class="hljs-string"><span class="hljs-string">"tree"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (builder.length() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { builder.append(<span class="hljs-string"><span class="hljs-string">", "</span></span>); } builder.append(word); } System.out.println(builder.toString()); <span class="hljs-comment"><span class="hljs-comment">// one, two, tree</span></span></code> </pre> <br>  Mais vous devriez r√©fl√©chir √† deux fois et voir le dock avant d'utiliser pour.  La biblioth√®que vous permet de faciliter les choses famili√®res. <br><br><pre> <code class="java hljs">System.out.println(List.of(<span class="hljs-string"><span class="hljs-string">"one"</span></span>, <span class="hljs-string"><span class="hljs-string">"two"</span></span>, <span class="hljs-string"><span class="hljs-string">"tree"</span></span>).mkString(<span class="hljs-string"><span class="hljs-string">", "</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// one, two, tree</span></span></code> </pre> <br><h2>  Travailler avec des fonctions </h2><br>  La biblioth√®que a un certain nombre de fonctions (8 pi√®ces) et des m√©thodes utiles pour travailler avec elles.  Ce sont des interfaces fonctionnelles ordinaires avec de nombreuses m√©thodes int√©ressantes.  Le nom des fonctions d√©pend du nombre d'arguments accept√©s (de 0 √† 8).  Par exemple, <i>Function0</i> ne prend aucun argument, <i>Function1</i> prend un argument, <i>Function2 en</i> prend deux, etc. <br><br><pre> <code class="java hljs">Function2&lt;String, String, String&gt; combineName = (lastName, firstName) -&gt; firstName + <span class="hljs-string"><span class="hljs-string">" "</span></span> + lastName; System.out.println(combineName.apply(<span class="hljs-string"><span class="hljs-string">"Griffin"</span></span>, <span class="hljs-string"><span class="hljs-string">"Peter"</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// Peter Griffin</span></span></code> </pre> <br>  Dans les fonctions de la biblioth√®que vavr, nous pouvons faire beaucoup de choses sympas.  En termes de fonctionnalit√©, ils d√©passent de loin la fonction standard, la bi-fonction, etc.  Par exemple, le curry.  Le curry est la construction de fonctions en plusieurs parties.  Regardons un exemple: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    Function2&lt;String, String, String&gt; combineName = (lastName, firstName) -&gt; firstName + " " + lastName; //           Function1&lt;String, String&gt; makeGriffinName = combineName .curried() .apply("Griffin"); //      System.out.println(makeGriffinName.apply("Peter")); // Peter Griffin System.out.println(makeGriffinName.apply("Lois")); // Lois Griffin</span></span></code> </pre> <br>  Comme vous pouvez le voir, tr√®s succinctement.  La m√©thode au <i>curry</i> est extr√™mement simple, mais peut √™tre tr√®s utile. <br><br><div class="spoiler">  <b class="spoiler_title">Impl√©mentation de la m√©thode au curry</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Function1&lt;T1, Function1&lt;T2, R&gt;&gt; curried() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> t1 -&gt; t2 -&gt; apply(t1, t2); }</code> </pre><br></div></div><br>  Il existe de nombreuses autres m√©thodes utiles dans le jeu de <i>fonctions</i> .  Par exemple, vous pouvez mettre en cache le r√©sultat de retour d'une fonction: <br><br><pre> <code class="java hljs">Function0&lt;Double&gt; hashCache = Function0.of(Math::random).memoized(); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> randomValue1 = hashCache.apply(); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> randomValue2 = hashCache.apply(); System.out.println(randomValue1 == randomValue2); <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre> <br><br><h2>  Lutte contre les exceptions </h2><br>  Comme nous l'avons dit plus t√¥t, le processus de programmation doit √™tre s√ªr.  Pour cela, il faut √©viter divers effets √©trangers.  Les exceptions sont leurs g√©n√©rateurs explicites. <br><br>  Vous pouvez utiliser la classe <i>Try</i> pour g√©rer en toute s√©curit√© les exceptions dans un style fonctionnel.  En fait, c'est une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">monade</a> typique.  Il n'est pas n√©cessaire de se plonger dans la th√©orie de l'utilisation.  Regardez simplement un exemple simple: <br><br><pre> <code class="java hljs">Try.of(() -&gt; <span class="hljs-number"><span class="hljs-number">4</span></span> / <span class="hljs-number"><span class="hljs-number">0</span></span>) .onFailure(System.out::println) .onSuccess(System.out::println);</code> </pre> <br>  Comme vous pouvez le voir sur l'exemple, tout est assez simple.  Nous suspendons simplement l'√©v√©nement √† une erreur potentielle et ne le d√©passons pas des limites du calcul. <br><br><h2>  Correspondance de motifs </h2><br>  Il arrive souvent une situation dans laquelle nous devons v√©rifier la valeur d'une variable et mod√©liser le comportement du programme en fonction du r√©sultat.  Dans de telles situations, un merveilleux moteur de recherche de mod√®les vient √† la rescousse.  Vous n'avez plus besoin d'√©crire un tas de <i>sinon</i> , configurez simplement toute la logique en un seul endroit. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> io.vavr.API.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> io.vavr.Predicates.*; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PatternMatchingDemo</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ String s = Match(<span class="hljs-number"><span class="hljs-number">1993</span></span>).of( Case($(<span class="hljs-number"><span class="hljs-number">42</span></span>), () -&gt; <span class="hljs-string"><span class="hljs-string">"one"</span></span>), Case($(anyOf(isIn(<span class="hljs-number"><span class="hljs-number">1990</span></span>, <span class="hljs-number"><span class="hljs-number">1991</span></span>, <span class="hljs-number"><span class="hljs-number">1992</span></span>), is(<span class="hljs-number"><span class="hljs-number">1993</span></span>))), <span class="hljs-string"><span class="hljs-string">"two"</span></span>), Case($(), <span class="hljs-string"><span class="hljs-string">"?"</span></span>) ); System.out.println(s); <span class="hljs-comment"><span class="hljs-comment">// two } }</span></span></code> </pre> <br>  Veuillez noter que le cas est en majuscule, comme  case est un mot-cl√© et est d√©j√† pris. <br><br><h2>  Conclusion </h2><br>  √Ä mon avis, la biblioth√®que est tr√®s cool, mais cela vaut la peine de l'utiliser tr√®s soigneusement.  Elle peut exceller dans le d√©veloppement <i>√©v√©nementiel</i> .  Cependant, son utilisation excessive et irr√©fl√©chie dans la programmation imp√©rative standard bas√©e sur un pool de threads peut apporter beaucoup de maux de t√™te.  De plus, souvent dans nos projets, nous utilisons Spring et Hibernate, qui ne sont pas toujours pr√™ts pour une telle application.  Avant d'importer une biblioth√®que dans votre projet, vous devez comprendre clairement comment et pourquoi elle sera utilis√©e.  Ce dont je parlerai dans un de mes prochains articles. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr421839/">https://habr.com/ru/post/fr421839/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr421827/index.html">Que lire sur Java en ce moment?</a></li>
<li><a href="../fr421829/index.html">L'anomalie de Frango - une romance fantastique avec de vraies personnes de l'informatique</a></li>
<li><a href="../fr421833/index.html">Nous √©crivons notre programme le plus simple pour ARM Cortex-M3</a></li>
<li><a href="../fr421835/index.html">La Commission interinstitutions d√©veloppe une nouvelle technologie pour bloquer Telegram</a></li>
<li><a href="../fr421837/index.html">Cr√©er 1k d'intro Chaos pour ZX-Spectrum</a></li>
<li><a href="../fr421841/index.html">Robotaxi Waymo n'est pas tout √† fait pr√™t pour l'acc√®s aux voies publiques</a></li>
<li><a href="../fr421845/index.html">Que font r√©ellement les analystes de donn√©es? R√©sultats de 35 entretiens</a></li>
<li><a href="../fr421847/index.html">Sautez dans le cloud. Cr√©ation d'une solution IoT √©conomique sur NodeMCU + Azure IoT Hub</a></li>
<li><a href="../fr421849/index.html">Ev√©nements RH en TI en septembre 2018: My Circle Digest</a></li>
<li><a href="../fr421851/index.html">Probl√®mes de hibou et de globe: connexion de deux assemblys avec des espaces de noms et des noms de classe identiques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>