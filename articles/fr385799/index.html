<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏈 🍔 🖕🏿 Comment nous avons construit la quête en réalité 🛑 👩🏻‍🔧 📋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il n'est pas nécessaire d'expliquer encore une fois quelles sont les quêtes en réalité et avec quoi elles mangent. De plus, ce sujet a été traité plus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons construit la quête en réalité</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/385799/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'est pas nécessaire d'expliquer encore une fois quelles sont les quêtes en réalité et avec quoi elles mangent. De plus, ce sujet a été traité plus d'une fois sur Habré (et les Gimetimes) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1] </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2] </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[3]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Je vais vous dire comment nous avons construit «l’odyssée de l’espace» - la plus complexe sur le plan technique et, probablement, le budget le plus élevé des quêtes sur la claustrophobie. </font></font><br>
<br>
<img src="https://habrastorage.org/files/49d/2e4/5e8/49d2e45e83b344dbab333aa9d4de8518.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon la légende, une équipe de joueurs (de 2 à 4 personnes) sont des touristes spatiaux volant vers une galaxie voisine pour étudier les civilisations extraterrestres. Mais quelque chose a mal tourné, et maintenant les joueurs doivent sortir de cette situation en une heure en résolvant une variété d'énigmes avec de l'électricité, de l'air comprimé, des panneaux de commande d'ordinateur, des caméras vidéo et la réalité augmentée.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour me passer de spoilers, je ne dévoilerai pas les principes des puzzles, mais il y aura de nombreux détails techniques sur le fonctionnement de tout de l'intérieur. </font><font style="vertical-align: inherit;">Ou, par rapport aux joueurs, à l'extérieur.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons essayé de nous éloigner du concept de «chaque puzzle est un appareil indépendant». </font><font style="vertical-align: inherit;">La structure de l'électronique de quête est très similaire à une maison intelligente: beaucoup de modules regroupés par fonction (et non par logique de jeu), réseau de données et serveur. </font><font style="vertical-align: inherit;">Le serveur de jeu contrôle de manière centralisée tous les appareils de quête. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, voici à quoi ressemble la situation du point de vue du joueur:</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le joueur appuie sur un bouton</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la lumière s'allume</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et ça arrive vraiment: </font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le joueur appuie sur un bouton</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'unité d'entrée lit l'état du bouton</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le bloc d'entrée du serveur</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le serveur sélectionne l'action souhaitée conformément au script du jeu </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le serveur envoie une commande au bloc de sortie</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'unité de sortie alimente les appareils </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche vous permet de modifier par programmation la logique du jeu, de suivre son statut et, si nécessaire, d'intervenir pour que l'opérateur le contrôle manuellement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagramme structurel de la quête (augmentation du nombre de clics): </font><font style="vertical-align: inherit;">
le diagramme semble assez lourd et déroutant, mais nous examinerons ensuite chaque sous-système à tour de rôle. </font><font style="vertical-align: inherit;">Je pense que cela vaut la peine de garder l'histoire dans l'ordre chronologique, à mesure que la quête se construit.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/713/877/5f7/7138775f78034572b99b4834bd6c0009.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Début</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le travail sur la quête commence par un croquis du scénario, une salle vide et l'enthousiasme inépuisable des créateurs. </font><font style="vertical-align: inherit;">Progressivement, le script est envahi de détails, de designers - d'idées et de mises en page, d'ingénieurs - de diagrammes et de dessins, et des murs des pièces - de marquages ​​( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«il y aura une trappe», «puzzle», «à partir de là - il y aura de la poussière et de la poussière»</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Lorsque tout le monde est d'accord sur ce qu'ils vont construire exactement (au moins en termes généraux), le travail commence.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des murs</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un composite d'aluminium a été choisi comme matériau pour les murs. C'est un matériau assez intéressant: une couche de plastique (4 mm), enduite des deux côtés de fines couches d'aluminium. La face avant est enduite; sa couleur peut varier: du blanc au noir anthracite. Composite au toucher, froid comme du métal, ne donne pas l'impression de "plastique bon marché". Mais, contrairement au métal, il ne fait pas de bruit retentissant à l'impact. En bref, la tâche de "ramasser du matériel que la plupart des gens n'ont pas rencontré dans la vie ordinaire" est terminée.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les feuilles du pli composite sont pressées à la main, par conséquent, les cloisons sèches sont situées sous elles sur un cadre en acier (dans des endroits à géométrie complexe - un cadre en bois). </font><font style="vertical-align: inherit;">Le composite est facile à traiter: il peut être coupé, scié, fraisé. </font><font style="vertical-align: inherit;">Après avoir incisé la couche intérieure, la feuille peut être légèrement pliée. </font><font style="vertical-align: inherit;">Cela vous permet de construire des décorations complexes sans coutures et attaches visibles. </font><font style="vertical-align: inherit;">Nous avons généralement essayé d'éviter le matériel visible dans la mesure du possible. </font><font style="vertical-align: inherit;">Les murs avec des rangées de boulons et de rivets conviennent à l'atmosphère steampunk, mais pas au vaisseau spatial d'un avenir lointain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur les photographies, l'installation des murs et des décorations bat son plein. </font><font style="vertical-align: inherit;">La face avant du composite est recouverte d'un film protecteur qui ne sera retiré qu'avant le départ. </font><font style="vertical-align: inherit;">Dans les endroits où il y aura des puzzles et des éléments interactifs, les niches sont coupées à l'avance et le câblage est fait.</font></font><br>
<br>
<img src="https://habrastorage.org/files/245/a19/502/245a195024ab43898327b4d1d5b38e57.jpg"><br>
<br>
<img src="https://habrastorage.org/files/875/ca9/c23/875ca9c2345441b791d1393b8c429d55.jpg"><br>
<br>
<img src="https://habrastorage.org/files/493/ebd/e5c/493ebde5c5dd4a13a780653d690705bb.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les plafonds</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce que les joueurs voient au-dessus de leur tête est un faux plafond en tôle d'acier noire perforée. </font><font style="vertical-align: inherit;">Cette solution est très pratique car toutes les communications peuvent être cachées derrière le plafond. </font><font style="vertical-align: inherit;">Vous pouvez facilement organiser la climatisation et la ventilation, sans vous soucier du fait que les grilles dépassent dans les endroits les plus inappropriés. </font><font style="vertical-align: inherit;">Derrière le plafond se trouvent des haut-parleurs et des microphones. </font><font style="vertical-align: inherit;">Enfin, le plafond cache certains mécanismes de puzzle. </font><font style="vertical-align: inherit;">Pour que rien ne brille à travers le faux plafond, toutes les surfaces au-dessus sont peintes avec de la peinture noire mate. </font><font style="vertical-align: inherit;">Voici l'installation du câblage pour le plafond:</font></font><br>
<br>
<img src="https://habrastorage.org/files/4ae/50f/e96/4ae50fe96501489b87277fbfe77b72c6.jpg"><br>
<br>
<img src="https://habrastorage.org/files/106/2f4/bbe/1062f4bbebd744faae17285278e65fca.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planchers</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le sol est un «sandwich» de plusieurs couches. </font><font style="vertical-align: inherit;">De bas en haut: chape en béton, substrat, stratifié, linoléum foncé et enfin une tôle perforée noire, la même qu'au plafond. </font><font style="vertical-align: inherit;">Le linoléum réduit le grondement des marches sur le métal. </font><font style="vertical-align: inherit;">Dans la couche du stratifié, des rainures sont réalisées dans lesquelles se trouve le rétro-éclairage: un profil en aluminium avec des bandes LED. </font><font style="vertical-align: inherit;">Le profil est recouvert d'un diffuseur (il n'est pas encore installé sur la photo), dont la surface supérieure affleure le reste du sol. </font><font style="vertical-align: inherit;">Il n'y a pas de fentes dans les tôles, la lumière est visible à travers la perforation. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b2b/1df/73c/b2b1df73c11b47c2b6fdf48c895ee473.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'éclairage au sol, comme le reste, a deux groupes, blanc et rouge, qui commutent au cours de l'intrigue. </font><font style="vertical-align: inherit;">L'éclairage du sol joue un rôle décoratif, sa puissance est plusieurs fois inférieure à celle de l'éclairage des murs et des plafonds.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatisation </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La finition bat son plein, toutes les communications sont établies, il est temps de faire le matériel. </font><font style="vertical-align: inherit;">Voici à quoi ressemble la tresse de fils issue de la quête: </font></font><br>
<br>
<img src="https://habrastorage.org/files/1d1/44f/a63/1d144fa63696424fb79d2962156b4534.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les appareils de jeu peuvent être divisés en quatre catégories: ordinateurs, actionneurs, éclairage et puzzles.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des ordinateurs</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce qu'un vaisseau spatial sans un tas d'écrans et de terminaux de contrôle? Dans la quête, un total de 7 ordinateurs avec 9 moniteurs sont installés. Lorsque la logique des tâches s'inscrit dans le schéma «une application - un moniteur», les ordinateurs nettop sont utilisés: compacts, silencieux, échauffent un peu. Là où il est censé produire une image sur plusieurs moniteurs à la fois, il y a des ingénieurs système ordinaires avec des cartes vidéo multi-têtes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moniteurs - cadre ouvert, conçu pour les guichets automatiques et les terminaux de paiement, sont intégrés dans le paysage. Certains moniteurs sont tactiles, équipés d'écrans tactiles, les autres sont simplement des lunettes anti-vandalisme. Deux autres panneaux d'interface sont fabriqués sur la base de tablettes intégrées dans les murs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ordinateurs sont réunis dans un réseau local sur lequel toutes les applications de jeu communiquent avec le serveur. </font><font style="vertical-align: inherit;">Toutes les machines sont configurées avec un accès à distance, vous pouvez donc mettre à jour ou corriger quelque chose dans le logiciel au moins pendant le jeu. </font><font style="vertical-align: inherit;">Les tablettes Ethernet ne peuvent pas être connectées aux tablettes, elles accèdent donc au réseau via Wi-Fi. </font><font style="vertical-align: inherit;">Il n'était pas si facile de placer le point d'accès de manière à assurer une connexion normale. </font><font style="vertical-align: inherit;">La pièce a des murs épais et même un revêtement métallique fonctionne comme une cage de Faraday: le wifi n'est capté qu'en ligne de mire directe.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mécanismes exécutifs</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La catégorie suivante de quêtes est un élément matériel - des actionneurs qui doivent être contrôlés en mode marche-arrêt. </font><font style="vertical-align: inherit;">Il s'agit d'entraînements de porte, de serrures électromagnétiques, de vannes pneumatiques - un total d'une demi-douzaine de canaux. </font><font style="vertical-align: inherit;">Certaines charges fonctionnent à partir de 220 V, d'autres à partir de 12 V. Des modules d'automatisation industrielle sont utilisés pour contrôler tous ces mécanismes. </font></font><br>
<br>
<img src="https://habrastorage.org/files/9f0/f54/bd2/9f0f54bd24f64555881e2b12344c8177.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette boîte est un module de sortie discret. </font><font style="vertical-align: inherit;">Il accepte les commandes via l'interface RS-485 et dispose de huit sorties relais indépendantes. </font><font style="vertical-align: inherit;">Deux de ces modules desservent tous les actionneurs. </font><font style="vertical-align: inherit;">Les charges puissantes, telles que les moteurs, sont connectées via des relais intermédiaires. </font><font style="vertical-align: inherit;">Tous les modules sont connectés à un réseau et sont contrôlés par le serveur via un convertisseur USB / RS-485 utilisant le protocole MODBUS.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Éclairage</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un total d'environ 50 mètres de bandes LED illuminent le navire. Tout l'éclairage est divisé en principal (blanc) et d'urgence (rouge), ces groupes sont allumés à différents moments selon l'intrigue de la quête. Pour contrôler la lumière, les mêmes modules industriels ont été utilisés que pour les actionneurs, mais pas avec relais, mais avec sorties analogiques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le module dispose de 6 sorties, pour chacune desquelles il peut fournir une tension de 0 à 10 V par incréments de 0,1%. Ces signaux contrôlent les gradateurs multicanaux à travers lesquels l'éclairage est alimenté. Ainsi, nous avons la possibilité de modifier en douceur et indépendamment la luminosité de n'importe quel groupe de rétroéclairage à la commande du serveur. </font></font><br>
<br>
<img src="https://habrastorage.org/files/ecb/4bf/5c1/ecb4bf5c17df47d0b2318b142a6c69f3.jpg"><br>
<br>
<img src="https://habrastorage.org/files/7bb/c3f/347/7bbc3f347ab740cfb3d84e90fa352fca.jpg"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici à quoi ressemble une armoire d'automatisation entièrement montée: </font></font><br>
<br>
<img src="https://habrastorage.org/files/810/7da/05e/8107da05ea964a72b72f753d84a802ad.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. un bloc pour actionneurs; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. un bloc d'éclairage;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. modules de sortie discrets; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. alimentation pour l'électronique de commande (24 V); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Convertisseur RS-485 / USB; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. modules de sorties analogiques; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. gradateurs; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8. alimentation des bandes LED (12 V, situées derrière les gradateurs).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puzzles</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nombreux puzzles ont leur propre cerveau de microcontrôleur. Plus précisément, même le cervelet, car il transmet uniquement son état au serveur et en reçoit des commandes. Les modules de puzzle sont connectés au même bus MODBUS que les promomatics. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils l'ont pris comme une plate-forme pour des puzzles ... Qui a dit Arduino? Non, c'est un peu plus frais. Nous avons développé un tableau unifié spécialement pour la quête. Il comprend un noyau (contrôleur ATmega32), un convertisseur RS-485 / UART, une alimentation (entrée jusqu'à 36 V, sortie 5 V), plusieurs transistors de puissance pour contrôler diverses charges et quelques ampoules - clignotent pour </font><font style="vertical-align: inherit;">déboguer la </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beauté</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Les voici, dans un tas ordonné attendant le dessoudage des pièces: </font></font><br>
<br>
<img src="https://habrastorage.org/files/4ee/5a5/7f7/4ee5a57f758e459a877252aa2da72aa8.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici la planche assemblée:</font></font><br>
<br>
<img src="https://habrastorage.org/files/417/1d9/56b/4171d956b3394936b9bd7978cb1c36fd.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et voici à quoi cela ressemble dans son habitat naturel (l'un des puzzles du mauvais côté): </font></font><br>
<br>
<img src="https://habrastorage.org/files/758/034/85e/75803485e79b410586585b73918ce865.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
les cartes sont connectées au réseau à l'aide d'un câble à paire torsadée régulière, les données (RS-485) et l'alimentation (24 V) vont sur le même câble. </font><font style="vertical-align: inherit;">Au total, 8 planches ont été utilisées dans la quête. </font><font style="vertical-align: inherit;">Je répète qu'ils sont tous les mêmes, les puzzles ne diffèrent que par le schéma de connexion et le firmware. </font><font style="vertical-align: inherit;">Les planches ont connu un tel succès que notre prochaine quête (Studio d'enregistrement) est également basée sur elles.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Air</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des puzzles a besoin d'air comprimé, ce qui a provoqué une difficulté inattendue. </font><font style="vertical-align: inherit;">Le compresseur habituel est trop fort, il peut être entendu même dans la pièce voisine. </font><font style="vertical-align: inherit;">La solution a été trouvée sous la forme d'un compresseur dentaire qui, chez les personnes normales, alimente une perceuse en air. </font><font style="vertical-align: inherit;">Non pas qu'il soit très calme (il est généralement noyé par le bruit de la perceuse elle </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> même </font><s><font style="vertical-align: inherit;">et les cris du patient</font></s><font style="vertical-align: inherit;"> ), mais beaucoup plus silencieux que ceux de la construction. </font><font style="vertical-align: inherit;">Si le compresseur est caché dans les entrailles du navire et insonorisé en plus, il est presque inaudible. </font></font><br>
<br>
<img src="https://habrastorage.org/files/ffb/716/5ba/ffb7165bab4e4cb09db51a3a8eb3d228.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le compresseur est activé à l'avance pour augmenter la pression dans le récepteur au moment où les joueurs atteignent le puzzle aérien.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cabine d'équipe</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le cœur du navire est la cabine de l'équipe, elle est disponible pour les joueurs à partir de la seconde moitié du jeu. Une télécommande avec des moniteurs et un tas d'indicateurs lumineux étendus sur toute la largeur de la cabine. Au stade de la construction, tout semble beaucoup plus modeste: </font></font><br>
<br>
<img src="https://habrastorage.org/files/774/22e/b17/77422eb175504fbfb219578e5a3ead57.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
il y a deux écrans de projection au-dessus de la console, montrant le ciel étoilé pendant le jeu (ainsi que </font></font><abbr title="il n'y aura pas de spoilers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">██████████</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Les écrans sont en plexiglas avec un film translucide spécial collé dessus. Les projecteurs sont situés derrière les écrans, ce qui pose quelques problèmes, car il y a très peu d'espace. Heureusement, il existe des projecteurs à ultra-courte focale qui peuvent être accrochés presque près de l'écran. Étant donné que l'écran est situé à un angle, les supports de projection standard ont dû être modifiés sans pitié par un broyeur et suspendus au plafond avec des talons aiguilles, dans une position inclinée.</font></font><br>
<br>
<img src="https://habrastorage.org/files/730/0bd/2de/7300bd2de15d4521af4d9a3cecf0c962.png"><br>
<br>
<img src="https://habrastorage.org/files/e1c/f8e/67c/e1cf8e67c99045e2a2ef055d709624af.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les murs derrière les écrans ont été peints en noir mat pour éviter les reflets. </font><font style="vertical-align: inherit;">Lorsque les projecteurs sont éteints, rien n'est visible à travers les écrans:</font></font><br>
<br>
<img src="https://habrastorage.org/files/c6e/b30/786/c6eb307866374f1fb37475fe5a88fa28.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boutons tactiles</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que la télécommande ne ressemble pas à un morceau de plastique sans vie, ils ont décidé de mettre dessus des boutons et des ampoules plus différents qui ne servent à rien, mais créent un entourage. Nous avons un navire d'un avenir lointain, vous ne pouvez donc pas gâcher le design minimaliste avec des interrupteurs à bascule et des interrupteurs à couteau. Les boutons ont décidé de faire le toucher. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque capteur est une petite carte séparée sur laquelle un microcontrôleur (ATtiny13) et une LED RGB sont montés. La télécommande est constituée d'une feuille de plastique blanc et les capteurs sont montés sur la face inférieure de cette feuille. Le plastique est translucide, de sorte que la LED brille à travers, tandis que rien ne dépasse de l'extérieur. Le circuit réagit au toucher du panneau en modifiant la capacité de l'antenne. Une antenne est un morceau de fil fondu dans le panneau de l'intérieur. Voici à quoi ressemblent les modules capteurs et les caches d'antenne:</font></font><br>
<br>
<img src="https://habrastorage.org/files/4f6/ebc/108/4f6ebc108eeb4a909ff8617cad84e3fd.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque module est collé en place, connecté à l'antenne et à l'alimentation. </font><font style="vertical-align: inherit;">Un trou a été découpé pour chaque bouton, dans lequel il repose lorsque le panneau est mis en place: </font></font><br>
<br>
<img src="https://habrastorage.org/files/8c3/8c5/052/8c38c505216746faa686ae87e0f90cfe.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
il y a environ 100 de ces modules au total. </font><font style="vertical-align: inherit;">En raison de la production de masse, ils se sont avérés encore moins chers que les boutons mécaniques prêts à l'emploi avec rétro-éclairage (sans parler du toucher).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surveillance vidéo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les opérateurs surveillent en permanence la progression du jeu, prêts à intervenir en cas de problème. </font><font style="vertical-align: inherit;">Dans les locaux de la quête installé des caméras de surveillance IP dôme. </font><font style="vertical-align: inherit;">Le flux vidéo est transmis à l'ordinateur de l'opérateur et enregistré simultanément dans les archives. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les caméras ont leurs propres microphones intégrés, dont le son est également transmis aux archives. </font><font style="vertical-align: inherit;">Cependant, pour la surveillance en temps réel, il existe des microphones «bruissants» séparés. </font><font style="vertical-align: inherit;">Le signal qui en provient n'est pas numérisé, mais est transmis par le mélangeur à la salle d'opérateur. </font><font style="vertical-align: inherit;">Cela évite les retards, qui sont très désagréables lorsque l'opérateur communique avec les joueurs.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diffusion audio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La quête a deux systèmes de diffusion audio indépendants: l'un pour les sons de jeu et la musique de fond, le second pour les messages de l'opérateur. </font><font style="vertical-align: inherit;">Nous avons utilisé les enceintes actives habituelles (environ 20 watts par pièce), qui sont cachées derrière un faux plafond. </font><font style="vertical-align: inherit;">Comme l'expérience l'a montré, ce n'est pas la meilleure option. </font><font style="vertical-align: inherit;">Les haut-parleurs adorent attraper toutes sortes d'interférences et d'interférences (en particulier à partir de téléphones mobiles). </font><font style="vertical-align: inherit;">Il est préférable de mettre des haut-parleurs passifs au plafond et un amplificateur externe.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bouton d'aide</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les joueurs peuvent demander un indice à tout moment en cliquant sur un bouton spécial. </font><font style="vertical-align: inherit;">Dans ce cas, l'opérateur émet un signal. </font><font style="vertical-align: inherit;">Dans d'autres quêtes, ils utilisent souvent des appels sans fil pour cela - bon marché et joyeux. </font><font style="vertical-align: inherit;">Cette option ne nous convenait pas. </font><font style="vertical-align: inherit;">Premièrement, le bouton d'appel ne rentre pas à l'intérieur de l'engin spatial. </font><font style="vertical-align: inherit;">Deuxièmement, comme déjà mentionné, le revêtement mural atténue parfaitement tous les signaux radio. </font><font style="vertical-align: inherit;">J'ai dû monter un bouton avec un rétro-éclairage dans le mur et faire passer un câble séparé de celui-ci à la salle de caméra. </font></font><br>
<br>
<img src="https://habrastorage.org/files/4b8/6d7/e89/4b86d7e89bc047b49e4d8046530c4ca9.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici à quoi ressemble le lieu de travail de l'opérateur: </font></font><br>
<br>
<img src="https://habrastorage.org/files/f21/644/8f4/f216448f4b284cd88511f6ce4dabdf49.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
une image de caméras de surveillance est affichée sur un moniteur, la seconde sert à contrôler les jeux et à les administrer. </font><font style="vertical-align: inherit;">Le serveur dispose d'une interface Web, qui montre la progression du jeu, l'état de toutes les applications et appareils, ainsi que des boutons de contrôle manuel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compte rendu</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Près d'un an s'est écoulé depuis l'ouverture de l'Odyssée de l'espace, et quelques conclusions intermédiaires peuvent être tirées sur le travail de la quête. </font><font style="vertical-align: inherit;">Le premier mois ou deux après le lancement, il y a eu une période d'erreurs de capture. </font><font style="vertical-align: inherit;">Sans eux, nulle part, surtout dans un système matériel-logiciel aussi complexe. </font><font style="vertical-align: inherit;">La plupart des bugs ont été identifiés lors de la phase de test, avant l'ouverture officielle, mais plusieurs des erreurs les plus insidieuses ont patiemment attendu dans une embuscade.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au cours des prochains mois, la quête a réussi un «test de force». </font><font style="vertical-align: inherit;">C'est une chose de tout expérimenter par vous-même, et une autre - entre les mains impitoyables des joueurs. </font><font style="vertical-align: inherit;">Nous avons donc été surpris d'apprendre que l'un des puzzles n'a pas deux solutions, mais quatre. </font><font style="vertical-align: inherit;">Mais le plus souvent, les découvertes n'étaient pas si joyeuses. </font><font style="vertical-align: inherit;">Un par un, divers éléments ont échoué. </font><font style="vertical-align: inherit;">En partie à cause du développement de la ressource, en partie à cause du fait que les joueurs sont non seulement intelligents, mais aussi forts.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Progressivement, nous avons remplacé les pièces par des pièces plus durables, retravaillé certains éléments. </font><font style="vertical-align: inherit;">Plusieurs puzzles ont été entièrement refaits, y compris la conception et la mécanique du jeu. </font><font style="vertical-align: inherit;">Par exemple, dans l'une des tâches, il était nécessaire, à l'aide d'un endoscope, de trouver un indice caché. </font><font style="vertical-align: inherit;">Puis soudain, il s'est avéré qu'il y avait une tâche très similaire dans une autre quête. </font><font style="vertical-align: inherit;">Maintenant, nous n'avons pas d'endoscope, et au lieu de cela - un appareil complètement différent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, je vais vous raconter certains des cas les plus marquants de nos jeux.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrôle entièrement manuel</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la quête, toutes les portes sont automatiques. </font><font style="vertical-align: inherit;">Dans le bon sens, il était nécessaire de mettre des portes coulissantes pneumatiques (comme dans le métro), mais il n'y avait pas assez d'espace pour elles (et l'expérience en pneumatique). </font><font style="vertical-align: inherit;">En conséquence, ils ont mis des volets roulants motorisés. </font><font style="vertical-align: inherit;">À un moment donné, le relais qui contrôle l'une des portes est grillé. </font><font style="vertical-align: inherit;">Que faire ici est compréhensible: mettre un relais à semi-conducteurs plus puissant et meilleur. </font><font style="vertical-align: inherit;">Mais cela prend du temps, et les jeux continuent, le spectacle doit continuer. </font><font style="vertical-align: inherit;">En conséquence, l'opérateur reçoit un cavalier et des instructions spéciales: au bon moment, fermez ceci et ce contact dans le bouclier. </font><font style="vertical-align: inherit;">Le week-end a joué sur une telle commande manuelle.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise en garde! </font><font style="vertical-align: inherit;">Les portes se ferment</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout ne va pas bien avec ces portes. </font><font style="vertical-align: inherit;">Comme je l'ai dit, les joueurs sont parfois forts. </font><font style="vertical-align: inherit;">Et voici l'un de ces joueurs poddelyaet volet roulant et jerk soulève. </font><font style="vertical-align: inherit;">La toile se plie avec la lettre S quelque part à l'intérieur du décor et monte. </font><font style="vertical-align: inherit;">Après le jeu, l'opérateur essaie de ramener la quête à son état d'origine, donne l'ordre de fermer la porte - la porte ne se ferme pas. </font><font style="vertical-align: inherit;">Puis il prend la toile et la tire vers le bas. </font><font style="vertical-align: inherit;">Grognement! </font><font style="vertical-align: inherit;">Le battant de porte se met en place et se détache quelque part au-dessus, au niveau du lecteur lui-même. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le point essentiel de la situation est que vous ne pouvez accéder au lecteur que de l'intérieur, de la pièce où l'entrée est fermée par une toile déchirée. </font><font style="vertical-align: inherit;">Finalement, il a réussi à se soulever à 30 centimètres du sol et à y grimper, puis à coller un escabeau et des outils.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Règle de méchanceté</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À un certain moment de l'histoire, une trappe cachée s'ouvre, après quoi les joueurs trouvent un autre objet utile. L'entraînement du toit ouvrant est électrique, le toit ouvrant est équipé d'interrupteurs de fin de course «entièrement ouverts» et «complètement fermés», qui coupent le moteur. Une fois la remorque fermée, la position a été refusée. Le moteur s'arrête, plie légèrement la trappe et fait tourner l'une des pièces d'entraînement, ce qui bloque le fin de course en position ouverte. Navigué. Vous ne pouvez accéder au lecteur que par la trappe, il est fermé. Mais vous ne pouvez pas l'ouvrir, car le système pense que le hayon est déjà complètement ouvert (la remorque est bloquée) et n'alimente pas le moteur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luke a finalement réussi à s'ouvrir, gâchant légèrement la peau autour. </font><font style="vertical-align: inherit;">Le système de fin de course a été entièrement refait afin que cela ne se reproduise plus. </font><font style="vertical-align: inherit;">Et juste en cas d'incendie, un interrupteur à bascule a été fait, qui alimente le moteur en contournant les interrupteurs de fin de course. </font><font style="vertical-align: inherit;">Malheureusement, je ne pouvais pas le sortir de la quête sans démonter le demi-navire. </font><font style="vertical-align: inherit;">L'interrupteur à bascule était donc vissé dans le coin le plus éloigné et le plus sombre du plafond, dans l'espoir que personne ne le trouverait.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En vain, ils espéraient. </font><font style="vertical-align: inherit;">En moins de deux semaines, un joueur assez grand a trouvé cet interrupteur à bascule - et a d'ailleurs appuyé vers la fermeture de la trappe. </font><font style="vertical-align: inherit;">Le moteur a tiré, l'entraînement s'est désengagé dans un endroit spécialement conçu et la trappe s'est ouverte avec un accident. </font><font style="vertical-align: inherit;">Heureusement, personne n'a été blessé, les joueurs se sont échappés avec un léger sursaut. </font><font style="vertical-align: inherit;">Cet interrupteur à bascule est maintenant vissé avec une prise spéciale, mais vous ne pouvez pas vous détendre de toute façon - personne n'a annulé la loi de Murphy.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr385799/">https://habr.com/ru/post/fr385799/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr385783/index.html">De l'autre côté de la guerre. Dispositifs de cryptage allemands</a></li>
<li><a href="../fr385785/index.html">Google utilise le chiffre 26 comme caractère caché</a></li>
<li><a href="../fr385787/index.html">Revêtement en poudre de surfaces métalliques à l'aide d'un gril de four</a></li>
<li><a href="../fr385789/index.html">Le nouveau gadget d'ingénieurs russes a remporté le prestigieux prix international Red Dot Award 2015</a></li>
<li><a href="../fr385795/index.html">Pourquoi vous ne pouvez pas manquer la conférence "Internet des objets"</a></li>
<li><a href="../fr385803/index.html">12 gadgets insolites pour les touristes</a></li>
<li><a href="../fr385805/index.html">La dernière question est: que sommes-nous? Où allons-nous et tout ça</a></li>
<li><a href="../fr385809/index.html">Comment un véhicule sans pilote devrait-il se comporter s'il est impossible d'éviter des victimes à la suite d'un accident?</a></li>
<li><a href="../fr385813/index.html">Le mouvement des électrons individuels dans une molécule peut être contrôlé</a></li>
<li><a href="../fr385815/index.html">Bienvenue à Chicago: où même le cloud est taxé</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>