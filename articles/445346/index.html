<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüëß ‚å®Ô∏è üë®‚Äçüë®‚Äçüë¶‚Äçüë¶ C√≥mo escribir una API incorrecta üò§ ‚ö∞Ô∏è üî≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Escriba el c√≥digo como si estuviera acompa√±ado por un psic√≥pata violento que sepa d√≥nde vive. 


 Hola a todos! 


 Trabajo como l√≠der del equipo de D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo escribir una API incorrecta</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ostrovok/blog/445346/"><p>  <em>Escriba el c√≥digo como si estuviera acompa√±ado por un psic√≥pata violento que sepa d√≥nde vive.</em> </p><br><p>  Hola a todos! </p><br><p>  Trabajo como l√≠der del equipo de Desarrollo de Integraci√≥n en el servicio de reserva de hoteles en l√≠nea <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ostrovok.ru</a> y hoy me gustar√≠a compartir mi experiencia con varias API. </p><br><p><img src="https://habrastorage.org/webt/h_/fd/by/h_fdbyvhycgzkw8yvclfzzscquq.gif"></p><br><p>  Como desarrollador de un sistema que trabaja con proveedores externos, a menudo me encuentro con varias API, la mayor√≠a de las veces es SOAP / REST o algo similar a ellas.  Sin embargo, trabajar con muchos de ellos deja la impresi√≥n de que fueron escritos, no guiados por reglas t√©cnicas o sentido com√∫n, como si fuera del libro "Bad Advice" de Grigory Oster.  En este art√≠culo intentar√© describir tales casos al estilo de "malos consejos" y considerar ejemplos relacionados con XML.  Comentarios y discusi√≥n son bienvenidos. </p><a name="habracut"></a><br><h5 id="istoricheskaya-spravka">  Antecedentes historicos </h5><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SOAP</a> (del ingl√©s. Simple Object Access Protocol - un protocolo simple para acceder a objetos) - un protocolo para intercambiar mensajes estructurados en un entorno inform√°tico distribuido.  SOAP fue originalmente dise√±ado principalmente para implementar llamadas a procedimiento remoto (RPC).  Ahora el protocolo se usa para intercambiar mensajes arbitrarios en formato XML, y no solo para llamar a procedimientos. </p><br><h4 id="perehodim-k-primeram">  Ir a los ejemplos </h4><br><p>  <strong>1. Pasar xml a url</strong> </p><br><p>  ¬øQu√© quieren m√°s los usuarios de API?  Por supuesto, simplicidad, fiabilidad y concisi√≥n.  ¬°As√≠ que no leamos el cuerpo de la solicitud, sino aceptemos XML como informaci√≥n codificada en URL como un par√°metro de la ruta de solicitud!  Qu√© podr√≠a ser mejor: </p><br><pre><code class="python hljs">http://exapmple.com/xml/form.jsp?RequestName%<span class="hljs-number"><span class="hljs-number">3</span></span>DHotelRequest2%<span class="hljs-number"><span class="hljs-number">26</span></span>XML%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">3</span></span>C%<span class="hljs-number"><span class="hljs-number">3</span></span>Fxml%<span class="hljs-number"><span class="hljs-number">2</span></span>Bversion%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">221.0</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>Bencoding%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>UTF<span class="hljs-number"><span class="hljs-number">-8</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">3</span></span>F%<span class="hljs-number"><span class="hljs-number">3</span></span>E%<span class="hljs-number"><span class="hljs-number">0</span></span>A%<span class="hljs-number"><span class="hljs-number">3</span></span>CHotelRequest2%<span class="hljs-number"><span class="hljs-number">2</span></span>BBuyerId%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>test%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BUserId%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>test%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BPassword%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>test%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BLanguage%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>en%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BHotel%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span><span class="hljs-number"><span class="hljs-number">-100</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BProductCode%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">221</span></span>--%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BArrivalDate%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">2223.12</span></span><span class="hljs-number"><span class="hljs-number">.2018</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BDepartureDate%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">2224.12</span></span><span class="hljs-number"><span class="hljs-number">.2018</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BArrivalTime%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BDepartureTime%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BCurrency%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">222</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BWhereToPay%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">223</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BNumberOfGuests%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">220</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BNumberOfExtraBedsAdult%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">220</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BNumberOfExtraBedsChild%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">220</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BNumberOfExtraBedsInfant%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">220</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>B%<span class="hljs-number"><span class="hljs-number">2</span></span>F%<span class="hljs-number"><span class="hljs-number">3</span></span>E</code> </pre> <br><p>  Todo se vuelve simple, y no hay necesidad de restar un cuerpo de la consulta; nunca se sabe qu√© problemas puede haber con ella. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  No sabr√© por qu√© se hizo esto.  Los problemas aqu√≠ son los siguientes: muchos servidores tienen un l√≠mite en la longitud de la ruta de solicitud que puede atravesarlos.  Si el XML es grande en volumen de datos, entonces puede causar el error 413 Entity Too Large como uno de los escenarios.  Adem√°s, la cantidad de informaci√≥n est√° aumentando, ya que codificamos la URL antes de enviarla. </p></div></div><br><p>  <strong>2. Transferencia de informaci√≥n a trav√©s del anidamiento excesivo de objetos de datos</strong> </p><br><p>  Pensemos c√≥mo hacer que la informaci√≥n en las respuestas sea lo m√°s dif√≠cil posible.  ¬°Usemos estructuras anidadas, e incluso en diferentes formatos!  Apenas dicho que hecho </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">InnerRequest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RQ</span></span></span><span class="hljs-tag">&gt;</span></span>[{"someInfo":"base64Data"}] <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RQ</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">InnerRequest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  De hecho, el xml de nivel superior, dentro de √©l es otro xml, y dentro de √©l est√° json, en el que los datos se presentan en base64, y nuevamente json, ¬°y ya contendr√° la informaci√≥n que necesitamos!  Una gran soluci√≥n, casi como un cuento de hadas sobre la muerte de Koshchei, escondido en un huevo. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Uno de los inconvenientes m√°s notables es la desaceleraci√≥n en el an√°lisis de la respuesta hasta que se pasan todas las estructuras anidadas, y luego puede resultar que el c√≥digo de error est√© conectado en json, en lugar de en niveles m√°s altos.  Entiendo que codificar datos binarios en base64 dentro de xml / json es una pr√°ctica com√∫n, pero codificar un formato diferente dentro de un formato diferente ya est√° m√°s all√° del bien y del mal. </p></div></div><br><p>  <strong>3. Agregar informaci√≥n que no est√° relacionada con los datos de la solicitud y que no es v√°lida dentro del formato de datos</strong> </p><br><p>  Supongamos que XML nos llega en el cuerpo de la solicitud, lo procesamos y damos una respuesta.  Parece demasiado complicado para un sistema bien dise√±ado y muy cargado.  Obliguemos a los usuarios a enviar el tipo de datos en el cuerpo de la solicitud.  Como hacer esto  Justo en el cuerpo de la solicitud, por supuesto. </p><br><pre> <code class="xml hljs">XML= <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  De una manera tan simple, siempre sabremos que recibimos una solicitud en formato XML. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Resulta que debemos agregar m√°s bytes iniciales al cuerpo ya formado de la solicitud y solo despu√©s de eso ser√° posible realizar una solicitud.  Afortunado si no necesita cambiar los bytes iniciales seg√∫n el tipo de datos de solicitud.  En este caso, ser√≠a mejor usar el Encabezado http para indicar el tipo de datos y no cambiar el cuerpo de la solicitud. </p></div></div><br><p>  <strong>4. Duplicaci√≥n de datos sin necesidad</strong> </p><br><p>  Supongamos que tenemos informaci√≥n muy, muy importante en la estructura de la respuesta XML.  ¬øC√≥mo mostrarle esto al usuario?  Lo m√°s obvio: demostr√©moslo varias veces como parte de la respuesta, entonces definitivamente le prestar√° atenci√≥n. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Response</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Obj</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Info</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Important"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ObjSetting</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Info</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Important"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span><span class="hljs-tag">&gt;</span></span>SomeName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Info</span></span></span><span class="hljs-tag">&gt;</span></span>Important<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Info</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Obj</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Response</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Despu√©s de eso, el usuario final definitivamente prestar√° atenci√≥n al campo Informaci√≥n. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  En este caso, lo pens√© e incluso le pregunt√© a la compa√±√≠a que proporcion√≥ la API sobre el significado del campo Informaci√≥n y si la informaci√≥n en las etiquetas a diferentes niveles ser√≠a diferente.  La respuesta fue: no, no lo har√°, se duplican entre s√≠.  ¬øPor qu√© enga√±ar a los usuarios y dificultar la respuesta si esto no es necesario? </p></div></div><br><p>  <strong>5. Pasar par√°metros del mismo tipo individualmente, no una matriz</strong> </p><br><p>  En una de las API que utilizamos para buscar hoteles, hay campos que indican la edad de los hu√©spedes.  ¬øQu√© formato de presentaci√≥n se usa mejor para transmitir esta informaci√≥n?  Deje que el formato sea as√≠: cada edad ser√° una etiqueta XML obligatoria separada, y consideraremos el valor 0 como la ausencia de este par√°metro. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age1</span></span></span><span class="hljs-tag">&gt;</span></span>20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age2</span></span></span><span class="hljs-tag">&gt;</span></span>20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age3</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age4</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Aqu√≠ hay varios problemas a la vez: no extensibilidad, informaci√≥n redundante, adem√°s, la edad realmente puede ser cero si los invitados son ni√±os reci√©n nacidos.  En este caso, debe usar una matriz, en lugar de etiquetas con nombres √∫nicos. </p></div></div><br><p>  <strong>6. Reenviar informaci√≥n de solicitudes anteriores como parte de la cadena de llamadas API</strong> </p><br><p>  Es hora de pensar en la seguridad de nuestra API.  ¬øC√≥mo entendemos que el usuario recibe informaci√≥n de nuestras respuestas anteriores?  ¬°Que nos env√≠e nuestra respuesta, por supuesto! </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RequestInfo</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PreviosResp</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PreviosResp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Para continuar trabajando con la API, es necesario enviar toda la respuesta del sistema externo desde los pasos anteriores de la API, y no algunos datos importantes de la misma, o incluso un hash que definitivamente corresponder√° a esta respuesta.  Exceso de datos en todo su esplendor. </p></div></div><br><p>  <strong>7. No utilice marcadores de un error ocurrido, como una etiqueta de error o un c√≥digo http</strong> </p><br><p>  Hicimos nuestra hermosa API y la presentamos al mundo.  Pero una vez que algo sali√≥ mal y no pudimos formular una respuesta al usuario debido a un error interno.  ¬øQu√© hacer en este caso?  Simplemente proporcione una plantilla de respuesta, sin datos, sin c√≥digos de error o cualquier otra informaci√≥n.  ¬°Nadie deber√≠a saber que nuestra API ideal a veces puede no funcionar! <br>  Un ejemplo de tal respuesta: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Response</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImportantInfo</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Response</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  - con un c√≥digo de respuesta de 200 OK. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Acallar los errores cometidos es una muy mala pr√°ctica.  El problema es que todo parece que no hay problemas en la respuesta: no hay una etiqueta <code>&lt;Error&gt;</code> , el estado de http dice que todo est√° en orden.  En este caso, es necesario hacer una validaci√≥n adicional de la informaci√≥n recibida para que no haya consecuencias imprevistas en nuestro sistema. </p></div></div><br><p>  <strong>Conclusi√≥n</strong> <br>  A pesar de la gran cantidad de documentaci√≥n sobre el trabajo con tecnolog√≠as SOAP / XML y dise√±o de API, muchos problemas siguen siendo relevantes, y algunas soluciones son contrarias al sentido com√∫n.  Espero que con este art√≠culo pueda llamar la atenci√≥n de los desarrolladores sobre los enfoques menos exitosos para reducir su n√∫mero en el futuro. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/445346/">https://habr.com/ru/post/445346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445334/index.html">Tenemos DevOps Vamos a despedir a todos los probadores</a></li>
<li><a href="../445336/index.html">FlexiRemap¬Æ vs RAID</a></li>
<li><a href="../445338/index.html">Servidor DHCP + Mysql en Python</a></li>
<li><a href="../445340/index.html">Aumente la seguridad de la red utilizando un analizador en la nube</a></li>
<li><a href="../445344/index.html">Plataforma de comunicaciones unificadas OpenVox</a></li>
<li><a href="../445348/index.html">SNA Hackathon 2019: Simplify Architecture - Simplify Features</a></li>
<li><a href="../445350/index.html">Sonata: servidor de aprovisionamiento SIP</a></li>
<li><a href="../445352/index.html">Spark Structured Streaming Applications en Kubernetes. Experimenta FASTEN RUS</a></li>
<li><a href="../445354/index.html">Encontrar objetos en im√°genes</a></li>
<li><a href="../445356/index.html">Descripci√≥n general de la secci√≥n M√≥vil en DUMP-2019: m√°xima aplicada y √∫til en el trabajo diario</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>