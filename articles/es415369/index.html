<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèâ ü§πüèº ‚õµÔ∏è Precio de refactorizaci√≥n üë®üèø‚Äçüíª üëÉüèø üõçÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Subjetivamente: la refactorizaci√≥n es una "enfermedad" juvenil. Seg√∫n observaciones personales, en alg√∫n lugar despu√©s de 26 a√±os comienza a soltarse....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Precio de refactorizaci√≥n</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415369/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/2g/am/9h/2gam9hcz7vw9kp-513utyr0ezum.png" height="500"></div>  Subjetivamente: la refactorizaci√≥n es una "enfermedad" juvenil.  Seg√∫n observaciones personales, en alg√∫n lugar despu√©s de 26 a√±os comienza a soltarse.  Como en esa vieja frase: "El que no fue revolucionario en su juventud, no tiene coraz√≥n, el que no se vuelve conservador en la madurez, no tiene mente".  Por lo tanto, hasta que finalmente lo deje, tratar√© de describir los casos de usuario de refactorizaci√≥n y los posibles objetivos que se pueden lograr con √©l. <a name="habracut"></a><br><h2 id="vdohnoviteli">  Inspiradores </h2><br><p> Comenc√© a escribir despu√©s de la pr√≥xima visualizaci√≥n de la solicitud de extracci√≥n para m√°s de 150 archivos, donde la nueva funcionalidad y la refactorizaci√≥n del existente estaban ferozmente involucradas.  La refactorizaci√≥n no solo fue cosm√©tica, sino tambi√©n l√≥gica, lo que caus√≥ el mayor dolor.  Por ejemplo, en Ruby, la <code>amount == 0</code> reemplazada en <code>amount.zero?</code> por la <code>amount.zero?</code>  sin considerar que para el caso de <code>nil</code> en <code>amount</code> estas construcciones no son equivalentes.  Todo esto se explic√≥ aproximadamente de la siguiente manera: "pero seg√∫n el c√≥digo, ¬°se supone que el est√°ndar es as√≠!"  A la pregunta l√≥gica "¬øcu√°l es el prop√≥sito de seguir el c√≥digo al est√°ndar y, en general, cu√°l es su objetivo como desarrollador?"  el hombre se encerr√≥ y repiti√≥ un poco culpable "pero de acuerdo con el c√≥digo est√°ndar, tienes que escribir as√≠ ..." y parec√≠a un rubio en una tienda de ropa que no pod√≠a hacer frente al deseo <del>  refactor </del>  compra todo </p><br><h2 id="opredelenie">  Definici√≥n </h2><br><p>  El tema es delicado, por lo que debe prestar especial atenci√≥n a la pregunta "¬øqui√©n es qui√©n?"  Entonces, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">seg√∫n la wiki</a> , la refactorizaci√≥n es un proceso de cambio de la estructura interna de un programa que <u>no afecta su comportamiento externo</u> y est√° destinado a facilitar la comprensi√≥n de su trabajo. </p><br><p>  Por mi parte, quiero reducir los l√≠mites y definir la refactorizaci√≥n (en el peor sentido de la palabra) como cualquier cambio que no est√© directamente relacionado con el problema que se resuelve y que no cambie el comportamiento externo del sistema, sino que se realice como parte de la tarea original. </p><br><p>  Es decir, no quiero hablar sobre el cambio planeado en la base del c√≥digo, para el cual se ha delineado el alcance del trabajo y se han establecido objetivos espec√≠ficos, sino sobre las modificaciones espont√°neas que ocurren durante el desarrollo. </p><br><h2 id="cennost-produkta">  Valor del producto </h2><br><p>  Ahora comenzar√© desde lejos.  El c√≥digo fuente no es un objetivo ni un valor.  Por supuesto, est√©ticamente o art√≠sticamente, puede ser de alg√∫n inter√©s, pero estas son excepciones.  En general, el c√≥digo es una herramienta para crear un producto de software que cualquiera usa.  Por lo tanto, para empezar, ser√≠a bueno determinar cu√°les son los valores en el producto. </p><br><h3 id="pryamye-cennosti-produkta">  Valores directos del producto </h3><br><p>  Todo es simple aqu√≠.  Usan el producto, por lo que los valores directos son lo que el usuario claramente siente / ve / siente.  A saber: </p><br><ol><li>  todo tipo de funcionalidad del producto; </li><li>  usabilidad (UI / UX, rendimiento, tolerancia a fallos, etc.). </li></ol><br><p>  El segundo punto puede causar alguna discusi√≥n.  Despu√©s de todo, muchos creen que esto no es lo principal.  Dado que si la funcionalidad es buena, no importa en qu√© se envuelva.  Buenos ejemplos de funcionalidad sin una UI / UX sana: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Redmine</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SAP</a> .  Sin embargo, no estoy de acuerdo con esta mirada y en opini√≥n m√°s cercana al camarada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Alan Cooper</a> y su "Hospital psiqui√°trico en manos de pacientes". </p><br><h3 id="kosvennye-cennosti-produkta">  Valores indirectos del producto </h3><br><p>  Estos son valores que en s√≠ mismos no afectan al usuario.  Pero pueden "disparar" o "acumularse" y tener un impacto (de gravedad variable) en el producto o su funcionalidad. </p><br><ol><li>  Errores  Un caso l√≠mite de valores.  Son secundarios porque los valores en s√≠ mismos no llevan, sino que se toman de caracter√≠sticas vecinas. </li><li>  Limpieza  Se trata de legibilidad, modularidad, minimizaci√≥n de componentes entrantes, estandarizaci√≥n y unificaci√≥n de interfaces, etc. </li><li>  Documentaci√≥n  Se trata de c√≥digo y explicaciones para desarrolladores, no de descripciones comerciales o cuentas de usuario.  Est√° bien ilustrado por la frase de un campesino alegre de una de las entrevistas: "La l√≥gica en la base de datos est√° escrita como un libro". </li><li>  Escalabilidad / seguridad / seguridad.  El usuario no los ve hasta que sucede algo malo. </li></ol><br><h3 id="cennosti-dlya-razrabotchika">  Valores de desarrollador </h3><br><p>  Una categor√≠a muy importante que muchos pasan por alto, pero que siempre afecta el resultado. </p><br><ol><li>  C√≥digo por est√°ndar. </li><li>  Sangr√≠a en feng shui. </li><li>  Otras transacciones con conciencia.  Despu√©s de todo, el c√≥digo fue escrito, por lo que hay un resultado para el d√≠a y, por lo tanto, hay un beneficio. </li><li>  Cumplimiento del c√≥digo con el mundo interior. </li></ol><br><p>  Pero seamos honestos.  Todo esto no se trata de los valores asociados con el producto y el usuario final.  Se trata de psicolog√≠a y cucarachas personales. </p><br><h2 id="vzglyad-so-storony-biznesa">  Vista desde el lado de los negocios </h2><br><p>  En aras de la integridad, uno tendr√≠a que ver todo esto desde el lado de los negocios, y no un producto de software.  En este caso, la divisi√≥n en valores directos e indirectos se vuelve bastante banal: directa - obviamente trae dinero y puede dar una evaluaci√≥n cuantitativa inequ√≠voca;  indirectos: no aportan dinero y / o es muy dif√≠cil de cuantificar;  los valores para el desarrollador no aportan dinero de ninguna forma (tal vez incluso lo quiten). </p><br><p>  Por ejemplo </p><br><ul><li>  Una nueva caracter√≠stica con OAuth atornillando aument√≥ el n√∫mero de registros en un 10% y obtuvimos + 1k $. </li><li>  Dividimos el m√≥dulo de facturaci√≥n en varias partes independientes, seg√∫n el patr√≥n de responsabilidad √∫nica.  Parece que se hizo m√°s f√°cil de mantener, pero no fue posible medirlo. </li><li>  Pusimos la base del c√≥digo en l√≠nea con el c√≥digo est√°ndar y ... no recibimos nada. </li></ul><br><p>  Vale la pena se√±alar que, a partir de las estimaciones anteriores, las piernas crecen con la querida aceleraci√≥n comercial, la prisa general y la renuencia a dedicar tiempo a algo que no sea la funcionalidad y, posiblemente, una correcci√≥n de errores.  De hecho, los valores directos se pueden estimar y "vender", y los indirectos son muy dif√≠ciles o imposibles.  Y resulta que los valores indirectos se realizan, ya sea en virtud de una formaci√≥n en ingenier√≠a, o se entienden en un nivel intuitivo, o se descartan como "in√∫tiles". </p><br><p>  Para ser justos, aqu√≠ debemos recordar el concepto de habilitador, que "allana el camino" para la implementaci√≥n de la funci√≥n deseada, pero no tiene un beneficio obvio para el usuario.  Pero esa es otra historia. </p><br><h2 id="prichyom-tut-refaktoring">  ¬øY qu√© hay de refactorizar? </h2><br><p>  Al menos a pesar del hecho de que solo puede influir en los valores indirectos del producto.  Por lo tanto, el usuario no se sentir√° mejor por ninguna refactorizaci√≥n. </p><br><p>  Tambi√©n es importante recordar sobre la entrop√≠a.  Refactorizar siempre lo minimiza.  Para reducir la entrop√≠a, idealmente, necesita un equipo de arquitectos que minimice la entrop√≠a en la etapa de dise√±o.  Para citar una pieza del M√≠tico Hombre-Mes: </p><br><blockquote>  La programaci√≥n del sistema es un proceso que reduce la entrop√≠a y, por lo tanto, la metaestabilidad es inherente a ella.  El mantenimiento del programa es un proceso que aumenta la entrop√≠a, e incluso su mantenimiento m√°s h√°bil solo retrasa la ca√≠da del sistema en una obsolescencia irremediable. </blockquote><p>  Por lo tanto, si consideramos que la refactorizaci√≥n es parte del proceso de mantenimiento del programa, cuanto menor sea la refactorizaci√≥n, m√°s tiempo durar√° el c√≥digo sin tener que reescribirlo. </p><br><h2 id="kakie-celi-mogut-byt-u-refaktoringa">  ¬øQu√© objetivos puede tener la refactorizaci√≥n? </h2><br><p>  Perm√≠tame recordarle que estoy hablando de un cambio espont√°neo durante la implementaci√≥n de las funciones, y no de los cambios planificados.  En este caso, la definici√≥n del objetivo recae completamente en el desarrollador.  Debe hacerse la pregunta principal ‚Äú¬øpor qu√©?‚Äù, Responderla y luego avanzar hacia la meta deseada. </p><br><h3 id="za-entropiyu">  ¬°Por entrop√≠a! </h3><br><p>  Es dif√≠cil hacerlo t√∫ mismo.  Y sacar la revisi√≥n generalmente no es realista.  El objetivo es ciertamente bueno: despejar la cabeza de puente para nuevos logros, as√≠ como limpiar las toxinas y las toxinas acumuladas durante el tiempo de soporte del producto.  Pero palear un par de m√≥dulos desde cero sin perder nada en el camino no es una tarea f√°cil.  Debe resolverse junto con analistas de negocios y arquitectos, si los hay.  Muy pocas personas se arriesgan a hacer esto de forma voluntaria. </p><br><h3 id="za-dokumentaciyu">  Para la documentaci√≥n! </h3><br><p>  Ya es m√°s f√°cil.  Cambie el nombre de las variables / funciones seg√∫n el principio de "lo que est√° en la caja, luego en la caja", simplifique el dise√±o debido a las capacidades del lenguaje y las bibliotecas, agregue comentarios en lugares no obvios, etc.  Esto se puede hacer solo y, con el enfoque correcto, se puede hacer bien tanto para uno mismo en el futuro como para los colegas vecinos. </p><br><h3 id="za-bystrodeystvie">  Por la velocidad! </h3><br><p>  Para ser honesto, dicho trabajo debe destacarse como una tarea separada.  Dado que las capacidades actuales del sistema son suficientes para usted y no necesita hacer nada, o sabe exactamente qu√© y cu√°nto necesita acelerar. </p><br><p>  Todo entra en esta categor√≠a: desde la correcci√≥n inocuo de N + 1 hasta la aceleraci√≥n grave debido a cambios en los algoritmos de operaci√≥n.  Todo el problema es que la "paridad" de los errores siempre se encuentra a gran velocidad.  He aqu√≠ un ejemplo: en una transacci√≥n, los datos de la base de datos se env√≠an y en la misma transacci√≥n se establece una tarea en Sidekiq;  La cola de Sidekiq en Redis y la transacci√≥n no se aplica a ella;  cuando aumenta la velocidad de la cola, la tarea a veces se ejecuta antes de que se confirmen los datos;  Puede imaginarse las consecuencias y el proceso de depuraci√≥n usted mismo. </p><br><h3 id="za-refaktoring">  ¬°Para refactorizar! </h3><br><p>  Imagine que utiliz√≥ el servicio de limpieza de apartamentos.  Vinieron y comenzaron a limpiar, pero, en el camino, movieron todos los muebles del apartamento y delinearon las cortinas de la sala de estar a la ba√±era con el argumento "en tales condiciones, la limpiadora fue m√°s agradable para hacer su trabajo".  Imagen de "WTF?!"  te lo puedes imaginar t√∫ mismo. </p><br><p>  Espero que entiendas que no necesitas pensar en ti mismo, sino en qui√©n lo haces. </p><br><h2 id="smirenie-i-prinyatie">  Humildad y aceptaci√≥n </h2><br><p>  En conclusi√≥n, es necesario dar un "manual" sobre qu√© hacer antes de refactorizar.  Es cierto que esta no es una lista de TODO, sino m√°s bien una lista de hechos con los que debe aceptar y aceptar o no tomar medidas. </p><br><ol><li>  Estoy aumentando el n√∫mero de errores en el proyecto y puedo obtener una pandereta para ello. </li><li>  Me convierto en el propietario del c√≥digo refactorizado y, en primer lugar, me enviar√°n todas las preguntas sobre √©l. </li><li>  Por mis acciones no produzco nada de valor para el usuario final. </li></ol><br><p>  Una peque√±a explicaci√≥n </p><br><ol><li>  Cualquier cambio en el c√≥digo tiene una probabilidad distinta de cero de generar un error.  Y dado que esta acci√≥n no est√° conectada con la funcionalidad definitiva, simplemente produce errores sin generar valores centrales.  Es bueno estar al tanto de esto y no pretender ser mangueras cuando se le presentan preguntas. </li><li>  Las excusas como "anotate anterior" y similares son muy miserables, porque en el mismo github / gitlab no existe tal caracter√≠stica.  Adem√°s, el autor anterior confirm√≥ que todo funciona en su configuraci√≥n, y no es responsable de sus cambios y pierde parte de la imagen de lo que est√° sucediendo.  M√°s precisamente, se lo quitas junto con la responsabilidad. </li><li>  Al usuario realmente no le importa la refactorizaci√≥n, est√° interesado en la estabilidad y la funcionalidad, y la refactorizaci√≥n no se trata de eso. </li></ol><br><p>  Y de nuevo: si no est√° de acuerdo con al menos uno de los puntos, no comience a refactorizar.  Mejor lea a Habr, Lurk, beba t√© o, en el peor de los casos, corte la siguiente caracter√≠stica del tablero. </p><br><h2 id="konec">  El final </h2><br><p>  No juzgues estrictamente.  Si es posible, critique constructivamente.  Y siempre piense en el prop√≥sito de sus acciones.  Gracias </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es415369/">https://habr.com/ru/post/es415369/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es415359/index.html">PHP 8: qu√© esperar. Carta de Zeev Surasky</a></li>
<li><a href="../es415361/index.html">Firefox verificar√° las contrase√±as comprometidas utilizando el m√©todo de k-anonimizaci√≥n</a></li>
<li><a href="../es415363/index.html">India aumentar√° la producci√≥n de energ√≠a verde en 100 GW para 2022</a></li>
<li><a href="../es415365/index.html">Vamos! O un poco sobre el dise√±o de una interfaz de selector de fecha</a></li>
<li><a href="../es415367/index.html">¬øQu√© pasa si los extraterrestres resultan ser m√°quinas con inteligencia artificial?</a></li>
<li><a href="../es415371/index.html">Privacidad de criptomonedas</a></li>
<li><a href="../es415373/index.html">NumPy en Python. Parte 4</a></li>
<li><a href="../es415375/index.html">Ovejas Ocultas y Arqueolog√≠a Tipogr√°fica</a></li>
<li><a href="../es415377/index.html">C√≥mo funciona JS: clases y herencia, transpilaci√≥n en Babel y TypeScript</a></li>
<li><a href="../es415381/index.html">Juega con Kubernetes: servicio para un conocimiento pr√°ctico de los K8</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>