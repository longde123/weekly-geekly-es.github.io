<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•˜ ğŸ¤ğŸ¾ ğŸ”° LinOTPä¸¤å› ç´ æˆæƒæœåŠ¡å™¨ ğŸˆ ğŸ£ ğŸ‘‚ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä»Šå¤©ï¼Œæˆ‘æƒ³åˆ†äº«å¦‚ä½•é…ç½®ä¸¤å› ç´ èº«ä»½éªŒè¯æœåŠ¡å™¨ä»¥ä¿æŠ¤å…¬å¸ç½‘ç»œï¼Œç«™ç‚¹ï¼ŒæœåŠ¡ï¼Œsshã€‚ è¯¥æœåŠ¡å™¨å°†æ†ç»‘ä½¿ç”¨ï¼šLinOTP + FreeRadiusã€‚ 

 æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ 
 è¿™æ˜¯ä¸€ä¸ªå®Œå…¨å…è´¹ï¼Œæ–¹ä¾¿çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒåœ¨å…¶ç½‘ç»œå†…ç‹¬ç«‹äºç¬¬ä¸‰æ–¹æä¾›å•†ã€‚ 

 ä¸å…¶ä»–å¼€æºäº§å“ä¸åŒï¼Œæ­¤æœåŠ¡éå¸¸æ–¹ä¾¿ï¼Œéå¸¸ç›´è§‚ï¼Œå¹¶ä¸”è¿˜æ”¯...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LinOTPä¸¤å› ç´ æˆæƒæœåŠ¡å™¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462523/"><img src="https://habrastorage.org/webt/kj/44/5r/kj445ra0isuup3lhrfhn9tc5qre.png" alt="å›¾ç‰‡"><br><br> ä»Šå¤©ï¼Œæˆ‘æƒ³åˆ†äº«å¦‚ä½•é…ç½®ä¸¤å› ç´ èº«ä»½éªŒè¯æœåŠ¡å™¨ä»¥ä¿æŠ¤å…¬å¸ç½‘ç»œï¼Œç«™ç‚¹ï¼ŒæœåŠ¡ï¼Œsshã€‚ è¯¥æœåŠ¡å™¨å°†æ†ç»‘ä½¿ç”¨ï¼šLinOTP + FreeRadiusã€‚ <br><br> æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ <br> è¿™æ˜¯ä¸€ä¸ªå®Œå…¨å…è´¹ï¼Œæ–¹ä¾¿çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒåœ¨å…¶ç½‘ç»œå†…ç‹¬ç«‹äºç¬¬ä¸‰æ–¹æä¾›å•†ã€‚ <br><br> ä¸å…¶ä»–å¼€æºäº§å“ä¸åŒï¼Œæ­¤æœåŠ¡éå¸¸æ–¹ä¾¿ï¼Œéå¸¸ç›´è§‚ï¼Œå¹¶ä¸”è¿˜æ”¯æŒå¤§é‡åŠŸèƒ½å’Œç­–ç•¥ï¼ˆä¾‹å¦‚ï¼Œç™»å½•å+å¯†ç +ï¼ˆPIN + OTPTokenï¼‰ï¼‰ã€‚ é€šè¿‡APIï¼Œå®ƒä¸çŸ­ä¿¡å‘é€æœåŠ¡ï¼ˆLinOTP Config-&gt; Provider Config-&gt; SMS Providerï¼‰é›†æˆåœ¨ä¸€èµ·ï¼Œä¸ºè¯¸å¦‚Google Autentificatorä¹‹ç±»çš„ç§»åŠ¨åº”ç”¨ç¨‹åºç”Ÿæˆä»£ç ã€‚ æˆ‘è®¤ä¸ºå®ƒæ¯”<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ¬æ–‡ä¸­</a>è€ƒè™‘çš„æœåŠ¡æ›´æ–¹ä¾¿ã€‚ <br><br> è¯¥æœåŠ¡å™¨å¯ä»¥ä¸Cisco ASAï¼ŒOpenVPNæœåŠ¡å™¨ï¼ŒApache2ä»¥åŠå‡ ä¹æ‰€æœ‰æ”¯æŒé€šè¿‡RADIUSæœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯çš„ä¸œè¥¿ï¼ˆä¾‹å¦‚ï¼Œæ•°æ®ä¸­å¿ƒä¸­çš„SSHï¼‰é…åˆä½¿ç”¨ã€‚ <br><br> è¿™æ˜¯å¿…éœ€çš„ï¼š <br><br>  1ï¼‰Debian 8ï¼ˆjessieï¼‰- <b>å¿…éœ€ï¼</b>  ï¼ˆåœ¨æ–‡ç« æœ«å°¾ä»‹ç»äº†åœ¨debian 9ä¸Šçš„è¯•ç”¨å®‰è£…ï¼‰ <br><br> å¼€å§‹ï¼š <br><br> å®‰è£…Debian 8ã€‚ <br><a name="habracut"></a><br> æ·»åŠ LinOTPå­˜å‚¨åº“ï¼š <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># echo 'deb http://www.linotp.org/apt/debian jessie linotp' &gt; /etc/apt/sources.list.d/linotp.list</span></span></code> </pre> <br> æ·»åŠ å¯†é’¥ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># gpg --search-keys 913DFF12F86258E5</span></span></code> </pre> <br> æœ‰æ—¶ä½¿ç”¨â€œå…¨æ–°â€å®‰è£…ï¼Œåœ¨æ‰§è¡Œæ­¤å‘½ä»¤åï¼ŒDebianä¼šå‘å‡ºä»¥ä¸‹ä¿¡æ¯ï¼š <br><br><pre> <code class="plaintext hljs">gpg:   `/root/.gnupg' gpg:     `/root/.gnupg/gpg.conf' gpg: :   `/root/.gnupg/gpg.conf'       gpg:    `/root/.gnupg/secring.gpg' gpg:    `/root/.gnupg/pubring.gpg' gpg:     ( --keyserver) gpg:      :  URI</code> </pre><br> è¿™æ˜¯gnupgçš„åˆå§‹è®¾ç½®ã€‚ ä¸ç”¨æ‹…å¿ƒã€‚ åªéœ€å†æ¬¡è¿è¡Œå‘½ä»¤ã€‚ <br>  Debianaè¯¢é—®ï¼š <br><br><pre> <code class="plaintext hljs">gpg:  "913DFF12F86258E5"  hkp  keys.gnupg.net (1) LSE LinOTP2 Packaging &lt;linotp2@lsexperts.de&gt; 2048 bit RSA key F86258E5, : 2010-05-10 Keys 1-1 of 1 for "913DFF12F86258E5".  , N)   Q) &gt;</code> </pre> <br> ç­”ï¼š1 <br><br> ä¸‹ä¸€ä¸ªï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># gpg --export 913DFF12F86258E5 | apt-key add -</span></span></code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get update</span></span></code> </pre> <cut></cut><br> å®‰è£…mysqlã€‚ ä»ç†è®ºä¸Šè®²ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å…¶ä»–sqlæœåŠ¡å™¨ï¼Œä½†ä¸ºç®€å•èµ·è§ï¼Œæˆ‘å°†æŒ‰ç…§LinOTPçš„å»ºè®®ä½¿ç”¨å®ƒã€‚ <br><br>  ï¼ˆæœ‰å…³å…¶ä»–ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰å…³é‡æ–°é…ç½®LinOTPæ•°æ®åº“çš„ä¿¡æ¯ï¼Œå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">é“¾æ¥</a>çš„å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°ã€‚åœ¨åŒä¸€ä½ç½®ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹å‘½ä»¤ï¼šdpkg-reconfigure linotpä»¥æ›´æ”¹è®¾ç½®ï¼ˆå¦‚æœæ‚¨å·²ç»å®‰è£…äº†mysqlï¼‰ï¼‰ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install mysql-server</span></span></code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get update</span></span></code> </pre>  ï¼ˆå†æ¬¡æ£€æŸ¥æ›´æ–°ä¸ä¼šæœ‰ä¼¤å®³ï¼‰ <br> å®‰è£…LinOTPå’Œé™„åŠ æ¨¡å—ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install linotp</span></span></code> </pre> <br> æˆ‘ä»¬å›ç­”å®‰è£…ç¨‹åºçš„é—®é¢˜ï¼š <br> ä½¿ç”¨Apache2ï¼šæ˜¯ <br> ä¸ºç®¡ç†å‘˜Linotpåˆ›å»ºå¯†ç ï¼šâ€œ YourPasswordâ€ <br> ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼Ÿï¼šæ˜¯ <br> ä½¿ç”¨MySQLå—ï¼Ÿï¼šæ˜¯ <br> æ•°æ®åº“åœ¨å“ªé‡Œï¼šlocalhost <br> åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºLinOTPæ•°æ®åº“ï¼ˆæ•°æ®åº“åç§°ï¼‰ï¼šLinOTP2 <br> ä¸ºæ•°æ®åº“åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç”¨æˆ·ï¼šLinOTP2 <br> æˆ‘ä»¬ä¸ºç”¨æˆ·è®¾ç½®å¯†ç ï¼šâ€œ YourPasswordâ€ <br> æˆ‘ç°åœ¨åº”è¯¥å»ºç«‹ä¸€ä¸ªåŸºåœ°å—ï¼Ÿ  ï¼ˆç±»ä¼¼äºâ€œæ‚¨ç¡®å®šè¦...å—ï¼Ÿâ€ï¼‰ï¼šæ˜¯ <br> è¾“å…¥åœ¨å®‰è£…è¿‡ç¨‹ä¸­åˆ›å»ºçš„MySQLæ ¹å¯†ç ï¼šâ€œ YourPasswordâ€ <br> åšå®Œäº† <br><br>  ï¼ˆå¯é€‰ï¼Œæ— æ³•è®¾ç½®ï¼‰ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install linotp-adminclient-cli</span></span></code> </pre> <br>  ï¼ˆå¯é€‰ï¼Œæ— æ³•è®¾ç½®ï¼‰ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install libpam-linotp</span></span></code> </pre> <br> å› æ­¤ï¼Œæˆ‘ä»¬çš„Linotp Webç•Œé¢ç°åœ¨å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°ï¼š <br><br><pre> <code class="plaintext hljs">"&lt;b&gt;https&lt;/b&gt;: //IP_/manage"</code> </pre> <br> ç¨åï¼Œæˆ‘å°†åœ¨ç½‘ç»œç•Œé¢ä¸­è®¨è®ºè®¾ç½®ã€‚ <br><br> ç°åœ¨ï¼Œæœ€é‡è¦çš„æ˜¯ï¼ æå‡FreeRadiuså¹¶å°†å…¶é“¾æ¥åˆ°Linotpã€‚ <br><br> å®‰è£…FreeRadiuså’ŒLinOTPæ¨¡å— <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install freeradius linotp-freeradius-perl</span></span></code> </pre> <br> å¤‡ä»½å®¢æˆ·ç«¯å’Œâ€œç”¨æˆ·â€åŠå¾„é…ç½®ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># mv /etc/freeradius/clients.conf /etc/freeradius/clients.old</span></span></code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># mv /etc/freeradius/users /etc/freeradius/users.old</span></span></code> </pre> <br> åˆ›å»ºä¸€ä¸ªç©ºçš„å®¢æˆ·ç«¯æ–‡ä»¶ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># touch /etc/freeradius/clients.conf</span></span></code> </pre> <br> æˆ‘ä»¬ç¼–è¾‘æ–°çš„é…ç½®æ–‡ä»¶ï¼ˆå¯ä»¥ä»¥å¤‡ä»½é…ç½®ä¸ºä¾‹ï¼‰ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># nano /etc/freeradius/clients.conf</span></span></code> </pre> <br><pre> <code class="plaintext hljs">client 192.168.188.0/24 { secret = passwd #     }</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œåˆ›å»ºç”¨æˆ·æ–‡ä»¶ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># touch /etc/freeradius/users</span></span></code> </pre> <br> æˆ‘ä»¬ç¼–è¾‘æ–‡ä»¶ï¼Œå‘Šè¯‰åŠå¾„æˆ‘ä»¬å°†ä½¿ç”¨perlè¿›è¡Œèº«ä»½éªŒè¯ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># nano /etc/freeradius/users</span></span></code> </pre> <br><pre> <code class="plaintext hljs">DEFAULT Auth-type := perl</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œç¼–è¾‘æ–‡ä»¶/ etc / freeradius / modules / perl <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># nano /etc/freeradius/modules/perl</span></span></code> </pre> <br> æˆ‘ä»¬éœ€è¦åœ¨æ¨¡å—å‚æ•°ä¸­å†™å…¥perl linotpè„šæœ¬çš„è·¯å¾„ï¼š <br><br><pre> <code class="plaintext hljs">Perl { ....... ......... &lt;source lang="bash"&gt;module = /usr/lib/linotp/radius_linotp.pm</code> </pre> <br>  ..... <br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­è¯´æ˜ä»å“ªä¸ªï¼ˆåŸŸï¼Œæ•°æ®åº“æˆ–æ–‡ä»¶ï¼‰è·å–æ•°æ®ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># touch /etc/linotp2/rlm_perl.ini</span></span></code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># nano /etc/linotp2/rlm_perl.ini</span></span></code> </pre> <br><pre> <code class="plaintext hljs">URL=https://IP__LinOTP_(192.168.XX)/validate/simplecheck REALM=webusers1c RESCONF=LocalUser Debug=True SSL_CHECK=False</code> </pre> <br> æˆ‘åœ¨è¿™é‡Œè¦å¤šè®²ä¸€ç‚¹ï¼Œå› ä¸ºè¿™å¾ˆé‡è¦ï¼š <br><br> å¸¦æœ‰æ³¨é‡Šçš„æ–‡ä»¶çš„å®Œæ•´è¯´æ˜ï¼š <br>  linotpæœåŠ¡å™¨çš„IPï¼ˆæˆ‘ä»¬çš„LinOTPæœåŠ¡å™¨çš„IPåœ°å€ï¼‰ <br> ç½‘å€= httpsï¼š//172.17.14.103/validate/simplecheck <br>  ï¼ƒæˆ‘ä»¬å°†åœ¨LinOTP Webç•Œé¢ä¸­åˆ›å»ºçš„åŒºåŸŸã€‚ï¼‰ <br> é¢†åŸŸ=é‡è£…1 <br>  ï¼ƒåœ¨LinOTP Webmordä¸­åˆ›å»ºçš„juzverejç»„çš„åç§°ã€‚ <br>  RESCONF =å¹³é¢æ–‡ä»¶ <br>  #optionalï¼šå¦‚æœä¸€åˆ‡ä¼¼ä¹éƒ½æ­£å¸¸ï¼Œè¯·æ³¨é‡Šæ‰ <br> è°ƒè¯•=çœŸ <br>  #optionalï¼šå¦‚æœæ‚¨å…·æœ‰è‡ªç­¾åè¯ä¹¦ï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œå¦åˆ™è¯·æ³¨é‡Šæ‰ï¼ˆå¦‚æœæˆ‘ä»¬åˆ›å»ºè¯ä¹¦å¹¶æƒ³å¯¹å…¶è¿›è¡ŒéªŒè¯ï¼Œåˆ™ä½¿ç”¨SSLï¼‰ <br>  SSL_CHECK =å‡ <br><br> æ¥ä¸‹æ¥ï¼Œåˆ›å»ºæ–‡ä»¶/ etc / freeradius / sites-available / linotp <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># touch /etc/freeradius/sites-available/linotp</span></span></code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># nano /etc/freeradius/sites-available/linotp</span></span></code> </pre> <br> å¹¶å°†é…ç½®å¤åˆ¶åˆ°å…¶ä¸­ï¼ˆä¸è¦ç¼–è¾‘ä»»ä½•å†…å®¹ï¼‰ï¼š <br><br><pre> <code class="plaintext hljs">authorize { #normalizes maleformed client request before handed on to other modules (see '/etc/freeradius/modules/preprocess') preprocess # If you are using multiple kinds of realms, you probably # want to set "ignore_null = yes" for all of them. # Otherwise, when the first style of realm doesn't match, # the other styles won't be checked. #allows a list of realm (see '/etc/freeradius/modules/realm') IPASS #understands something like USER@REALM and can tell the components apart (see '/etc/freeradius/modules/realm') suffix #understands USER\REALM and can tell the components apart (see '/etc/freeradius/modules/realm') ntdomain # Read the 'users' file to learn about special configuration which should be applied for # certain users (see '/etc/freeradius/modules/files') files # allows to let authentification to expire (see '/etc/freeradius/modules/expiration') expiration # allows to define valid service-times (see '/etc/freeradius/modules/logintime') logintime # We got no radius_shortname_map! pap } #here the linotp perl module is called for further processing authenticate { perl }</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œå»ºç«‹ä¸€ä¸ªsimé“¾æ¥ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ln -s ../sites-available/linotp /etc/freeradius/sites-enabled</span></span></code> </pre> <br> å°±ä¸ªäººè€Œè¨€ï¼Œæˆ‘ä¼šæ€æ­»é»˜è®¤çš„åŠå¾„ç«™ç‚¹ï¼Œä½†æ˜¯å¦‚æœéœ€è¦å®ƒä»¬ï¼Œåˆ™å¯ä»¥ç¼–è¾‘å…¶é…ç½®æˆ–ç¦ç”¨å®ƒä»¬ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># rm /etc/freeradius/sites-enabled/default</span></span></code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># rm /etc/freeradius/sites-enabled/inner-tunnel</span></span></code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># service freeradius reload</span></span></code> </pre> <br> ç°åœ¨å›åˆ°ç½‘ç»œä¸Šï¼Œå¹¶è¿›è¡Œæ›´è¯¦ç»†çš„è€ƒè™‘ï¼š <br> åœ¨å³ä¸Šè§’ï¼Œå•å‡»LinOTP Config-&gt; UserIdResolvers-&gt; New <br> é€‰æ‹©æˆ‘ä»¬æƒ³è¦çš„ï¼šLDAPï¼ˆAD winï¼ŒLDAP sambaï¼‰æˆ–SQLï¼Œæˆ–æœ¬åœ°Flatfileç”¨æˆ·ã€‚ <br><br> å¡«å†™å¿…å¡«å­—æ®µã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œåˆ›å»ºREALMSï¼š <br> åœ¨å³ä¸Šè§’ï¼Œå•å‡»LinOTP Config-&gt; Realms-&gt; Newã€‚ <br> å¹¶ä¸ºæˆ‘ä»¬çš„REALMSå‘½åï¼Œå¹¶å•å‡»ä¹‹å‰åˆ›å»ºçš„UserIdResolversã€‚ <br><br> å¦‚æˆ‘ä¸Šé¢æ‰€è¿°ï¼ŒfreeRadiusåœ¨/etc/linotp2/rlm_perl.iniæ–‡ä»¶ä¸­éœ€è¦æ‰€æœ‰è¿™äº›æ•°æ®ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨å°šæœªè¿›è¡Œç¼–è¾‘ï¼Œè¯·ç«‹å³è¿›è¡Œæ“ä½œã€‚ <br><br> å·²é…ç½®æ‰€æœ‰æœåŠ¡å™¨ã€‚ <br><br> åŠ æ³•ï¼š <br><br>  <b>åœ¨Debian 9ä¸Šè®¾ç½®LinOTP</b> ï¼ˆæ„Ÿè°¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">prikhodkov</a> ï¼‰ <br>  ï¼ƒå°†LinOTPä¿¡æ¯åº“æ·»åŠ åˆ°/etc/apt/sources.list.d/linotp.listå¹¶æ›´æ–°èåœï¼š <br><br> å›å£°â€œ deb <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">linotp.org/apt/debian</a> Stretch linotpâ€&gt; /etc/apt/sources.list.d/linotp.list <br>  apt-getæ›´æ–° <br>  apt-get install dirmngr <br>  apt-key adv --recv-keys 913DFF12F86258E5 <br><br>  ï¼ƒåŸºæœ¬å®‰è£…å’Œé…ç½®mysqlæœåŠ¡å™¨ï¼š <br><br>  apt-getå®‰è£…mysql-server <br><br>  ï¼ƒå®‰è£…linotpå’Œfreeradiusè½¯ä»¶åŒ… <br><br>  apt-get install linotp linotp-adminclient-cli python-ldap freeradius python-passlib python-bcrypt git libio-all-lwp-perl libconfig-file-perl libtry-tiny-perl <br>  ï¼ƒåˆ›å»ºç¬¦å·é“¾æ¥åˆ°freeradiusé…ç½®æ–‡ä»¶ <br><br>  ln -s /etc/freeradius/3.0/sites-available / etc / freeradius / sites-available <br>  ln -s /etc/freeradius/3.0/sites-enabled / etc / freeradius / sites-enabled <br>  ln -s /etc/freeradius/3.0/clients.conf /etc/freeradius/clients.conf <br>  ln -s /etc/freeradius/3.0/users / etc / freeradius / users <br><br>  ï¼ƒå®‰è£…linotp-auth-freeradius-perlæ¨¡å— <br><br>  git clone <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">github.com/LinOTP/linotp-auth-freeradius-perl</a> <br>  cd linotp-auth-freeradius-perl / <br>  cp radius_linotp.pm /usr/share/linotp/radius_linotp.pm <br><br>  ï¼ƒæˆ‘ä»¬å°†linotpçš„freeradiusé…ç½®æ–‡ä»¶å¯¼å…¥æ­¤è¡¨å• <br><br> çŒ«/ etc / freeradius /æ”¯æŒç«™ç‚¹/ linotp <br><br> æœåŠ¡å™¨linotp { <br> å¬{ <br>  ipaddr = * <br> ç«¯å£= 1812 <br> ç±»å‹=èº«ä»½éªŒè¯ <br>  } <br> å¬{ <br>  ipaddr = * <br> ç«¯å£= 1813 <br> ç±»å‹= acct <br>  } <br> æˆæƒ{ <br> é¢„å¤„ç† <br> æ›´æ–°{ <br>  ï¼†æ§åˆ¶ï¼šèº«ä»½éªŒè¯ç±»å‹ï¼š= Perl <br>  } <br>  } <br> éªŒè¯{ <br> èº«ä»½éªŒè¯ç±»å‹çš„Perl { <br> ä½©å°” <br>  } <br>  } <br> ä¼šè®¡{ <br>  Unix <br>  } <br>  } <br>  ï¼ƒåœ¨å¯ç”¨äº†freeradiusçš„ç½‘ç«™ä¸­ï¼Œæˆ‘ä»¬ä»…ä¿ç•™linotp <br><br>  ls / etc / freeradius /å¯ç”¨äº†ç«™ç‚¹ <br> æ—è¯ºæ™® <br><br>  ï¼ƒæ·»åŠ å…è®¸æˆ‘ä»¬åœ¨freeradiusä¸Šè¿›è¡Œè¿æ¥çš„ä¸»æœº <br><br> çŒ«/etc/freeradius/clients.conf <br><br> å®¢æˆ·ç«¯host1 { <br>  ipaddr = IP_1 <br> ç½‘ç»œæ©ç = 32 <br> ç§˜å¯†='SECRET_1' <br>  } <br> å®¢æˆ·ç«¯host2 { <br>  ipaddr = IP_2 <br> ç½‘ç»œæ©ç = 32 <br> ç§˜å¯†='SECRET_2' <br>  } <br>  ï¼ƒä½œä¸ºç”¨æˆ·ç¾¤ï¼Œæˆ‘ä»¬ä½¿ç”¨perlè¿æ¥å™¨ <br><br> çŒ«/ etc / freeradius /ç”¨æˆ· <br><br> é»˜è®¤èº«ä»½éªŒè¯ç±»å‹ï¼š= perl <br>  } <br><br> çŒ«/etc/freeradius/3.0/mods-available/perl <br><br>  perl { <br> æ–‡ä»¶å= /usr/share/linotp/radius_linotp.pm <br>  func_authenticate =éªŒè¯ <br>  func_authorize =æˆæƒ <br><br>  } <br>  ï¼ƒåœ¨å¯ç”¨äº†modsçš„ç›®å½•ä¸­ï¼Œä»mods-availableç›®å½•ä¸­ä¸ºperlæ¨¡å—å»ºç«‹ç¬¦å·é“¾æ¥ï¼Œå¹¶åˆ é™¤eap <br><br>  ln -s /etc/freeradius/3.0/mods-available/perl /etc/freeradius/3.0/mods-enabled/perl <br>  rm /etc/freeradius/3.0/mods-enabled/eap <br><br>  ï¼ƒåˆ›å»ºauditkeyä»¥è¿è¡Œlinotp <br><br>  linotpåˆ›å»ºå®¡æ ¸å¯†é’¥-f linotp.ini <br>  ï¼ƒæˆ‘ä»¬åˆ›å»ºè¿æ¥å™¨çš„é…ç½®ä»¥æ£€æŸ¥DDåˆ°è¾¾åŠå¾„ <br><br> çŒ«/etc/linotp2/rlm_perl.ini <br><br>  URL = httpsï¼š// IP_LINOTP_SRV /éªŒè¯/ simplecheck <br> é¢†åŸŸ=é¢†åŸŸ <br>  RESCONF = LocalUser <br> è°ƒè¯•=çœŸ <br>  SSL_CHECK =å‡ <br><br> æˆ‘å°†åœ¨ä¸‹é¢è®¾ç½®ç³»ç»Ÿçš„å‡ ä¸ªé“¾æ¥ä¸­ä¿ç•™è¿™äº›é“¾æ¥ï¼Œè€Œè¿™äº›é“¾æ¥é€šå¸¸éœ€è¦é€šè¿‡ä¸¤å› ç´ èº«ä»½éªŒè¯æ¥ä¿æŠ¤ï¼š <br> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Apache2ä¸­</a>é…ç½®ä¸¤å› ç´ èº«ä»½éªŒè¯ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨Cisco ASA</a>è¿›è¡Œè®¾ç½®ï¼ˆåœ¨é‚£é‡Œä½¿ç”¨äº†å¦ä¸€ä¸ªä»¤ç‰Œç”ŸæˆæœåŠ¡å™¨ï¼Œä½†æ˜¯ASAæœ¬èº«çš„è®¾ç½®æ˜¯ç›¸åŒçš„ï¼‰ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…·æœ‰åŒé‡èº«ä»½éªŒè¯çš„VPN</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨sshä¸­</a>è®¾ç½®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸¤å› ç´ èº«ä»½éªŒè¯ï¼ˆåœ¨</a>é‚£é‡Œä¹Ÿä½¿ç”¨LinOTPï¼‰-æ„Ÿè°¢ä½œè€…ã€‚ æ‚¨è¿˜å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°æœ‰å…³é…ç½®LiOTPç­–ç•¥çš„æœ‰è¶£ä¿¡æ¯ã€‚ <br><br> æ­¤å¤–ï¼Œè®¸å¤šç«™ç‚¹çš„cmsæ”¯æŒä¸¤å› ç´ èº«ä»½éªŒè¯ï¼ˆå¯¹äºWordpressï¼ŒLinOTPç”šè‡³åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">github</a>ä¸Šéƒ½æœ‰å…¶è‡ªå·±çš„ç‰¹æ®Šæ¨¡å—ï¼‰ï¼Œä¾‹å¦‚ï¼Œå¦‚æœè¦åœ¨å…¬å¸ç½‘ç«™ä¸Šä¸ºå…¬å¸å‘˜å·¥åˆ›å»ºå®‰å…¨éƒ¨åˆ†ã€‚ <br> é‡è¦äº‹å®ï¼ è¯·å‹¿é€‰ä¸­â€œ Google autenteficatorâ€æ¡†ä»¥ä½¿ç”¨Google Authenticatorï¼ ç„¶åæ— æ³•è¯»å–QRç ...ï¼ˆå¥‡æ€ªçš„äº‹å®ï¼‰ <br><br> åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œä½¿ç”¨äº†ä»¥ä¸‹æ–‡ç« ä¸­çš„ä¿¡æ¯ï¼š <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">itnan.ru/post.php?c=1&amp;p=270571</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">www.digitalbears.net/?p=469</a> <br><br> æ„Ÿè°¢ä½œè€…ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN462523/">https://habr.com/ru/post/zh-CN462523/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN462509/index.html">äº§å“ç››ä¼š-æ‚¨è¦å‚åŠ çš„ITäº§å“ç®¡ç†ä¼šè®®</a></li>
<li><a href="../zh-CN462511/index.html">Google Playå³æœå³å¾—ã€‚ ç»ˆç”Ÿé‡æ„</a></li>
<li><a href="../zh-CN462513/index.html">æ¬è¿ï¼šå‡†å¤‡ï¼Œé€‰æ‹©ï¼Œå¼€å‘é¢†åŸŸ</a></li>
<li><a href="../zh-CN462515/index.html">ä½¿ç”¨ç³»ç»Ÿé”®ç›˜æ—¶çš„é”™è¯¯</a></li>
<li><a href="../zh-CN462519/index.html">ã€Šå¾®æœåŠ¡ã€‹ä¸€ä¹¦ã€‚ å¼€å‘å’Œé‡æ„æ¨¡å¼Â»</a></li>
<li><a href="../zh-CN462525/index.html">3CXæ¨å‡ºå…·æœ‰ç«¯åˆ°ç«¯è¯­éŸ³åŠ å¯†åŠŸèƒ½çš„é€‚ç”¨äºiOSå’ŒAndroidçš„æ–°å‹SIPè½¯ç”µè¯</a></li>
<li><a href="../zh-CN462527/index.html">SincNetç¥ç»ç½‘ç»œå¦‚ä½•é€šè¿‡åå‘ä¼ æ’­åˆ†é…å£°éŸ³çš„é‡è¦é¢‘ç‡</a></li>
<li><a href="../zh-CN462529/index.html">ç¾å›½å®‡èˆªå±€çš„æœˆçƒç«™æƒ³æ³•æ˜¯åäº‹</a></li>
<li><a href="../zh-CN462533/index.html">IntelliJ IDEA 2019.2ï¼šJava 13 Previewæ”¯æŒï¼Œæ€§èƒ½åˆ†æå·¥å…·ï¼Œæ–°çš„æœåŠ¡çª—å£ç­‰</a></li>
<li><a href="../zh-CN462537/index.html">äº‘è¿ç§»</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>