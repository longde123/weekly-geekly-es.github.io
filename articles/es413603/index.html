<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèø üë©‚Äçüë©‚Äçüëß üê± Generaci√≥n de C√≥digo en Uber ‚öóÔ∏è üíÉüèº üë®üèæ‚Äçüç≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cada uno de nosotros hace una tarea. Todos escriben c√≥digo repetitivo. Por qu√© ¬øNo es mejor automatizar este proceso y trabajar solo en tareas interes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Generaci√≥n de C√≥digo en Uber</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/e-Legion/blog/413603/">  Cada uno de nosotros hace una tarea.  Todos escriben c√≥digo repetitivo.  Por qu√©  ¬øNo es mejor automatizar este proceso y trabajar solo en tareas interesantes?  Lea este art√≠culo si desea que la computadora haga ese trabajo por usted. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/144/cb5/052/144cb5052ca1830f2aac609dc3cc93c0.jpg" alt="imagen"></a> <br><br>  <i>Este art√≠culo se basa en una transcripci√≥n de un informe de Zack Sweers, un desarrollador de aplicaciones m√≥viles de Uber, que habl√≥ en la conferencia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MBLT DEV</a> en 2017.</i> <i><br></i> <br><a name="habracut"></a>  Uber tiene alrededor de 300 desarrolladores de aplicaciones m√≥viles.  Trabajo en un equipo llamado "plataforma m√≥vil".  El trabajo de mi equipo es simplificar y mejorar el proceso de desarrollo de aplicaciones m√≥viles tanto como sea posible.  Principalmente trabajamos en marcos internos, bibliotecas, arquitecturas, etc.  Debido al gran personal, tenemos que hacer proyectos a gran escala que nuestros ingenieros necesitar√°n en el futuro.  Puede ser ma√±ana, o tal vez el pr√≥ximo mes o incluso un a√±o. <br><br><h3>  Generaci√≥n de c√≥digo para automatizaci√≥n </h3><br>  Me gustar√≠a demostrar el valor del proceso de generaci√≥n de c√≥digo, as√≠ como considerar algunos ejemplos pr√°cticos.  El proceso en s√≠ se parece a esto: <br><br><pre><code class="hljs python">FileSpec.builder(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"Presentation"</span></span>) .addComment(<span class="hljs-string"><span class="hljs-string">"Code generating your way to happiness."</span></span>) .addAnnotation(AnnotationSpec.builder(Author::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">) .</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">addMember</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-class"><span class="hljs-params"><span class="hljs-string">"name"</span></span></span></span><span class="hljs-class"><span class="hljs-params">, </span></span><span class="hljs-string"><span class="hljs-class"><span class="hljs-params"><span class="hljs-string">"%S"</span></span></span></span><span class="hljs-class"><span class="hljs-params">, </span></span><span class="hljs-string"><span class="hljs-class"><span class="hljs-params"><span class="hljs-string">"Zac Sweers"</span></span></span></span><span class="hljs-class"><span class="hljs-params">)</span></span></span><span class="hljs-class"> .</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">useSiteTarget</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(FILE)</span></span></span><span class="hljs-class"> .</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class">) .</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span></span></code> </pre> <br>  Este es un ejemplo del uso de Kotlin Poeta.  Kotlin Poet es una biblioteca con una buena API que genera c√≥digo Kotlin.  Entonces, ¬øqu√© vemos aqu√≠? <br><br><ol><li>  <b>FileSpec.builder</b> crea un archivo llamado " <b>Presentaci√≥n</b> ". </li><li>  <b>.addComment ()</b> - Agrega un comentario al c√≥digo generado. </li><li>  <b>.addAnnotation ()</b> - Agrega una anotaci√≥n de tipo <b>Autor</b> . </li><li>  <b>.addMember ()</b> - agrega una variable " <b>nombre</b> " con un par√°metro, en nuestro caso es " <b>Zac Sweers</b> ".  <b>% S</b> - tipo de par√°metro. </li><li>  <b>.useSiteTarget ()</b> - Instala SiteTarget. </li><li>  <b>.build ()</b> : completa la descripci√≥n del c√≥digo que se generar√°. </li></ol><br>  Despu√©s de la generaci√≥n del c√≥digo, se obtiene lo siguiente: <br><br><pre> <code class="hljs pgsql">Presentation.kt // Code generating your way <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> happiness. @file:Author(<span class="hljs-type"><span class="hljs-type">name</span></span> = "Zac Sweers")</code> </pre> <br>  El resultado de la generaci√≥n de c√≥digo es un archivo con el nombre, comentario, anotaci√≥n y nombre del autor.  La pregunta surge de inmediato: "¬øPor qu√© necesito generar este c√≥digo si puedo hacerlo en un par de pasos simples?"  S√≠, tienes raz√≥n, pero ¬øqu√© pasa si necesito miles de estos archivos con diferentes opciones de configuraci√≥n?  ¬øQu√© sucede si comenzamos a cambiar los valores en este c√≥digo?  ¬øQu√© pasa si tenemos muchas presentaciones?  ¬øQu√© pasa si tenemos muchas conferencias? <br><br><pre> <code class="hljs pgsql">conferences .flatMap { it.presentations } .onEach { (presentationName, <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>, author) -&gt; FileSpec.builder("", presentationName) .addComment(<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>) .addAnnotation(AnnotationSpec.builder(Author::<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>) .addMember("name", "%S", author) .useSiteTarget(FILE) .build()) .build() }</code> </pre><br>  Como resultado, llegaremos a la conclusi√≥n de que es simplemente imposible mantener tal cantidad de archivos manualmente, es necesario automatizar.  Por lo tanto, la primera ventaja de la generaci√≥n de c√≥digo es deshacerse del trabajo de rutina. <br><br><h3>  Generaci√≥n de c√≥digo sin errores </h3><br>  La segunda ventaja importante de la automatizaci√≥n es la operaci√≥n sin errores.  Todas las personas cometen errores.  Esto sucede especialmente a menudo cuando hacemos lo mismo.  Las computadoras, por el contrario, hacen un trabajo a la perfecci√≥n. <br><br>  Considere un ejemplo simple.  Hay una clase de persona: <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> firstName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> lastName: String)</code> </pre><br>  Supongamos que queremos agregarle serializaci√≥n en JSON.  Haremos esto usando la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Moshi</b></a> , ya que es bastante simple y genial para la demostraci√≥n.  Cree un PersonJsonAdapter y herede de JsonAdapter con un par√°metro de tipo Person: <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> firstName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> lastName: String) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PersonJsonAdapter</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">JsonAdapter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Person</span></span></span><span class="hljs-class">&gt;</span></span>() { }</code> </pre><br>  A continuaci√≥n, implementamos el m√©todo fromJson.  Proporciona un lector para leer informaci√≥n que finalmente se devolver√° a Persona.  Luego completamos los campos con el nombre y apellido y obtenemos el nuevo valor Persona: <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> firstName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> lastName: String) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PersonJsonAdapter</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">JsonAdapter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Person</span></span></span><span class="hljs-class">&gt;</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromJson</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(reader: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">JsonReader</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Person? { <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstName: String <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastName: String <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Person(firstName, lastName) } }</code> </pre><br>  A continuaci√≥n, observamos los datos en formato JSON, los verificamos y los ingresamos en los campos necesarios: <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> firstName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> lastName: String) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PersonJsonAdapter</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">JsonAdapter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Person</span></span></span><span class="hljs-class">&gt;</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromJson</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(reader: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">JsonReader</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Person? { <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstName: String <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastName: String <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (reader.hasNext()) { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (reader.nextName()) { <span class="hljs-string"><span class="hljs-string">"firstName"</span></span> -&gt; firstName = reader.nextString() <span class="hljs-string"><span class="hljs-string">"lastName"</span></span> -&gt; lastName = reader.nextString() } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Person(firstName, lastName) } }</code> </pre><br>  ¬øFuncionar√° esto?  S√≠, pero hay un matiz: los objetos que leemos deben estar contenidos dentro de JSON.  Para filtrar el exceso de datos que pueden provenir del servidor, agregue otra l√≠nea de c√≥digo: <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> firstName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> lastName: String) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PersonJsonAdapter</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">JsonAdapter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Person</span></span></span><span class="hljs-class">&gt;</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromJson</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(reader: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">JsonReader</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Person? { <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstName: String <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastName: String <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (reader.hasNext()) { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (reader.nextName()) { <span class="hljs-string"><span class="hljs-string">"firstName"</span></span> -&gt; firstName = reader.nextString() <span class="hljs-string"><span class="hljs-string">"lastName"</span></span> -&gt; lastName = reader.nextString() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; reader.skipValue() } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Person(firstName, lastName) } }</code> </pre><br>  En este punto, eludimos con √©xito el √°rea del c√≥digo de rutina.  En este ejemplo, solo dos campos de valor.  Sin embargo, este c√≥digo tiene un mont√≥n de secciones diferentes donde podr√≠a bloquearse repentinamente.  ¬øDe repente cometimos un error en el c√≥digo? <br><br>  Considere otro ejemplo: <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> firstName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> lastName: String) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">City</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> country: String) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vehicle</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> licensePlate: String) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Restaurant</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> address: Address) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Payment</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> cardNumber: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: String) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TipAmount</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> value: <span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rating</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numStars: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Correctness</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> confidence: <span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>)</code> </pre><br>  Si tiene al menos un problema cada 10 modelos m√°s o menos, esto significa que definitivamente tendr√° dificultades en esta √°rea.  Y este es el caso cuando la generaci√≥n de c√≥digo realmente puede ayudarlo.  Si hay muchas clases, no podr√° trabajar sin automatizaci√≥n, porque todas las personas permiten errores tipogr√°ficos.  Con la ayuda de la generaci√≥n de c√≥digo, todas las tareas se realizar√°n autom√°ticamente y sin errores. <br><br>  Hay otros beneficios para la generaci√≥n de c√≥digo.  Por ejemplo, proporciona informaci√≥n sobre el c√≥digo o le dice si algo sale mal.  La generaci√≥n de c√≥digo ser√° √∫til durante la fase de prueba.  Si usa el c√≥digo generado, puede ver c√≥mo se ver√° realmente el c√≥digo de trabajo.  Incluso puede ejecutar la generaci√≥n de c√≥digo durante las pruebas para simplificar su trabajo. <br><br>  Conclusi√≥n: vale la pena considerar la generaci√≥n de c√≥digo como una posible soluci√≥n para deshacerse de los errores. <br><br>  Ahora echemos un vistazo a las herramientas de software que ayudan con la generaci√≥n de c√≥digo. <br><br><h3>  Las herramientas </h3><br><ol><li>  Las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>bibliotecas</b></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>JavaPoet</b></a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>KotlinPoet</b></a> para Java y Kotlin, respectivamente.  Estos son los est√°ndares de generaci√≥n de c√≥digo. </li><li>  Patronaci√≥n  Un ejemplo popular de plantillas para Java es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Apache Velocity</b></a> , y para iOS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Handlebars</b></a> . </li><li>  <b>SPI</b> - Interfaz de procesador de servicio.  Est√° integrado en Java y le permite crear y aplicar una interfaz y luego declararla en un JAR.  Cuando se ejecuta el programa, puede obtener todas las implementaciones listas para usar de la interfaz. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Compile Testing</b></a> es una biblioteca de Google que ayuda con las pruebas de compilaci√≥n.  En t√©rminos de generaci√≥n de c√≥digo, esto significa: "Esto es lo que esperaba, pero esto es lo que finalmente obtuve".  La compilaci√≥n comenzar√° en la memoria, y luego el sistema le dir√° si este proceso se complet√≥ o qu√© errores ocurrieron.  Si la compilaci√≥n se ha completado, se le pedir√° que compare el resultado con sus expectativas.  La comparaci√≥n se basa en el c√≥digo compilado, as√≠ que no se preocupe por cosas como el formato del c√≥digo o cualquier otra cosa. </li></ol><br><h3>  Herramientas de compilaci√≥n de c√≥digo </h3><br>  Hay dos herramientas principales para construir c√≥digo: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Procesamiento de anotaciones</b></a> : puede escribir anotaciones en el c√≥digo y solicitar al programa informaci√≥n adicional sobre ellas.  El compilador proporcionar√° informaci√≥n incluso antes de que termine de trabajar con el c√≥digo fuente. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Gradle</b></a> es un sistema de ensamblaje de aplicaciones con muchos ganchos (gancho - intercepci√≥n de llamadas a funciones) en su ciclo de vida de ensamblaje de c√≥digo.  Es ampliamente utilizado en el desarrollo de Android.  Tambi√©n le permite aplicar la generaci√≥n de c√≥digo al c√≥digo fuente, que es independiente de la fuente actual. </li></ol><br>  Ahora considere algunos ejemplos. <br><br><h3>  Cuchillo de mantequilla </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Butter Knife</b></a> es una biblioteca desarrollada por Jake Wharton.  Es una figura bien conocida en la comunidad de desarrolladores.  La biblioteca es muy popular entre los desarrolladores de Android porque ayuda a evitar la gran cantidad de trabajo de rutina que casi todos enfrentan. <br><br>  Por lo general, inicializamos la vista de esta manera: <br><br><pre> <code class="java hljs">TextView title; ImageView icon; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ title = findViewById(R.id.title); icon = findViewById(R.id.icon); }</code> </pre><br>  Con Butterknife, se ver√° as√≠: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.title) TextView title; <span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.icon) ImageView icon; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ ButterKnife.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre><br>  Y podemos agregar f√°cilmente cualquier cantidad de vistas, mientras que el m√©todo onCreate no aumentar√° el c√≥digo repetitivo: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.title) TextView title; <span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.text) TextView text; <span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.icon) ImageView icon; <span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.button) Button button; <span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.next) Button next; <span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.back) Button back; <span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.open) Button open; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ ButterKnife.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre><br>  En lugar de hacer este enlace manualmente cada vez, simplemente agregue anotaciones @BindView a estos campos, as√≠ como los identificadores (ID) a los que est√°n asignados. <br><br>  Lo bueno de Butter Knife es que analizar√° el c√≥digo y generar√° todas sus secciones similares para usted.  Tambi√©n tiene una excelente escalabilidad para nuevos datos.  Por lo tanto, si aparecen nuevos datos, no hay necesidad de aplicar onCreate nuevamente o rastrear algo manualmente.  Esta biblioteca tambi√©n es excelente para eliminar datos. <br><br>  Entonces, ¬øc√≥mo se ve este sistema desde adentro?  La vista se busca por reconocimiento de c√≥digo, y este proceso se realiza en la etapa de procesamiento de anotaciones. <br><br>  Tenemos este campo: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BindView</span></span>(R.id.title) TextView title;</code> </pre><br>  A juzgar por estos datos, se utilizan en una determinada actividad de FooActivity: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// FooActivity @BindView(R.id.title) TextView title;</span></span></code> </pre><br>  Ella tiene su propio significado (R.id.title), que act√∫a como el objetivo.  Tenga en cuenta que durante el procesamiento de datos este objeto se convierte en un valor constante dentro del sistema: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// FooActivity @BindView(2131361859) TextView title;</span></span></code> </pre><br>  Esto es normal  Esto es a lo que Butter Knife deber√≠a tener acceso de todos modos.  Hay un componente TextView como tipo.  El campo en s√≠ se llama t√≠tulo.  Si, por ejemplo, hacemos una clase contenedor a partir de estos datos, obtenemos algo como esto: <br><br><pre> <code class="java hljs">ViewBinding( target = <span class="hljs-string"><span class="hljs-string">"FooActivity"</span></span>, id = <span class="hljs-number"><span class="hljs-number">2131361859</span></span>, name = <span class="hljs-string"><span class="hljs-string">"title"</span></span>, type = <span class="hljs-string"><span class="hljs-string">"field"</span></span>, viewType = TextView.class )</code> </pre><br>  Por lo tanto, todos estos datos se pueden obtener f√°cilmente durante su procesamiento.  Tambi√©n es muy similar a lo que hace Butter Knife dentro del sistema. <br><br>  Como resultado, esta clase se genera aqu√≠: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooActivity_ViewBinding</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Unbinder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FooActivity target; <span class="hljs-meta"><span class="hljs-meta">@UiThread</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FooActivity_ViewBinding</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FooActivity target, View source)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; target.title = Utils.findRequiredViewAsType(source, <span class="hljs-number"><span class="hljs-number">2131361859</span></span>, <span class="hljs-comment"><span class="hljs-comment">// R.id.title "field 'title'", TextView.class); } }</span></span></code> </pre><br>  Aqu√≠ vemos que todos estos datos se re√∫nen.  Como resultado, tenemos la clase de destino ViewBinding de la biblioteca Java de Underscore.  En el interior, este sistema est√° organizado de tal manera que cada vez que crea una instancia de la clase, realiza inmediatamente todo este enlace a la informaci√≥n (c√≥digo) que gener√≥.  Y todo esto se genera previamente de forma est√°tica durante el procesamiento de anotaciones, lo que significa que es t√©cnicamente correcto. <br><br>  Volvamos a nuestra tuber√≠a de software: <br><br><img src="https://habrastorage.org/webt/t3/d3/jv/t3d3jv5bxgx5q3occc3ldovxfjm.png"><br><br>  Durante el procesamiento de anotaciones, el sistema lee estas anotaciones y genera la clase ViewBinding.  Y luego, durante el m√©todo de enlace, realizamos una b√∫squeda id√©ntica para la misma clase de una manera simple: tomamos su nombre y agregamos el enlace de vista al final.  Por s√≠ misma, una secci√≥n con ViewBinding durante el procesamiento se sobrescribe en el √°rea especificada utilizando JavaPoet. <br><br><h3>  Rxbindings </h3><br>  RxBindings solo no es responsable de la generaci√≥n de c√≥digo.  No maneja anotaciones y no es un complemento de Gradle.  Esta es una biblioteca ordinaria.  Proporciona f√°bricas est√°ticas basadas en el principio de programaci√≥n reactiva para la API de Android.  Esto significa que, por ejemplo, si ha configurado SetOnClickListener, aparecer√° un m√©todo de clic que devolver√° una secuencia de eventos (Observables).  Act√∫a como un puente (patr√≥n de dise√±o). <br><br>  Pero en realidad hay generaci√≥n de c√≥digo en RxBinding: <br><br><img src="https://habrastorage.org/webt/ju/ty/bv/jutybv1ayxqhcfrs9l4virsivb8.png"><br><br>  En este directorio llamado buildSrc hay una tarea de Gradle llamada KotlinGenTask.  Esto significa que todo esto es realmente creado por la generaci√≥n de c√≥digo.  RxBinding tiene implementaciones de Java.  Ella tambi√©n tiene artefactos de Kotlin que contienen funciones de extensi√≥n para todos los tipos de objetivos.  Y todo esto est√° estrictamente sujeto a las reglas.  Por ejemplo, puede generar todas las funciones de extensi√≥n de Kotlin y no tiene que controlarlas individualmente. <br><br>  ¬øC√≥mo se ve realmente? <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Observable&lt;Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clicks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewClickObservable(view); }</code> </pre><br>  Aqu√≠ hay un m√©todo RxBinding completamente cl√°sico.  Los objetos observables se devuelven aqu√≠.  El m√©todo se llama clics.  Trabajar con eventos de clic se lleva a cabo "bajo el cap√≥".  Omitimos los fragmentos de c√≥digo adicionales para mantener la legibilidad del ejemplo.  En Kotlin, se ve as√≠: <br><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> View.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clicks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Observable&lt;Object&gt; = RxView.clicks(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre><br>  Esta funci√≥n de extensi√≥n devuelve objetos observables.  En la estructura interna del programa, llama directamente a la interfaz Java habitual para nosotros.  En Kotlin, debe cambiar esto a Tipo de unidad: <br><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> View.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clicks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>&gt; = RxView.clicks(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre><br>  Es decir, en Java, se ve as√≠: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Observable&lt;Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clicks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewClickObservable(view); }</code> </pre><br>  Y tambi√©n lo es el c√≥digo de Kotlin: <br><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> View.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clicks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>&gt; = RxView.clicks(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre><br>  Tenemos una clase RxView que contiene este m√©todo.  Podemos sustituir los datos correspondientes en el atributo de destino, en el atributo de nombre con el nombre del m√©todo y en el tipo que estamos expandiendo, as√≠ como en el tipo del valor de retorno.  Toda esta informaci√≥n ser√° suficiente para comenzar a escribir estos m√©todos: <br><br><pre> <code class="hljs pgsql">BindingMethod( target = "RxView", <span class="hljs-type"><span class="hljs-type">name</span></span> = "clicks", <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">View</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>, returnType = "Observable&lt;Unit&gt;" )</code> </pre><br>  Ahora podemos sustituir directamente estos fragmentos en el c√≥digo Kotlin generado dentro del programa.  Aqu√≠ est√° el resultado: <br><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> View.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clicks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>&gt; = RxView.clicks(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre><br><h3>  Servicio gen </h3><br>  Estamos trabajando en Service Gen en Uber.  Si trabaja en una empresa y maneja caracter√≠sticas generales y una interfaz de software com√∫n tanto para el lado del cliente como para el servidor, independientemente de si est√° desarrollando aplicaciones Android, iOS o web, no tiene sentido crear modelos y servicios manualmente para el trabajo en equipo <br><br>  Utilizamos la biblioteca <a href=""><b>AutoValue</b></a> de Google para modelos de objetos.  Procesa anotaciones, analiza datos y genera un c√≥digo hash de dos l√≠neas, el m√©todo equals () y otras implementaciones.  Ella tambi√©n es responsable de soportar extensiones. <br><br>  Tenemos un objeto de tipo Rider: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AutoValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rider</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">uuid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> Address </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">address</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Tenemos l√≠neas con ID, nombre, apellido y direcci√≥n.  Para trabajar con la red, utilizamos las bibliotecas Retrofit y OkHttp, y JSON como formato de datos.  Tambi√©n usamos RxJava para la programaci√≥n reactiva.  As√≠ es como se ve nuestro servicio API generado: <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UberService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@GET(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/rider"</span></span></span><span class="hljs-meta">)</span></span> Rider getRider() }</code> </pre><br>  Podemos escribir todo esto manualmente, si as√≠ lo deseamos.  Y durante un largo per√≠odo de tiempo, lo hicimos.  Pero lleva mucho tiempo.  Al final, cuesta mucho en t√©rminos de tiempo y dinero. <br><br><h3>  ¬øQu√© y c√≥mo hace Uber hoy? </h3><br>  La √∫ltima tarea de mi equipo es crear un editor de texto desde cero.  Decidimos dejar de escribir manualmente el c√≥digo que posteriormente llega a la red, por lo que usamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Thrift</b></a> .  Es algo as√≠ como un lenguaje de programaci√≥n y un protocolo al mismo tiempo.  Uber usa Thrift como lenguaje para especificaciones t√©cnicas. <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rider</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">required</span></span> string uuid; <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">required</span></span> string firstName; <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">required</span></span> string lastName; <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> <span class="hljs-type"><span class="hljs-type">Address</span></span> address; }</code> </pre><br>  En Thrift, definimos contratos de API entre el backend y el lado del cliente, y luego simplemente generamos el c√≥digo apropiado.  Usamos la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Thrifty</b></a> para analizar datos y JavaPoet para la generaci√≥n de c√≥digo.  Al final, generamos implementaciones usando AutoValue: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AutoValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rider</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">uuid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> Address </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">address</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Hacemos todo el trabajo en JSON.  Existe una extensi√≥n llamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>AutoValue Moshi</b></a> , que se puede agregar a las clases de AutoValue utilizando el m√©todo est√°tico jsonAdapter: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AutoValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rider</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">uuid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> Address </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">address</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> JsonAdapter&lt;Rider&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jsonAdapter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Moshi moshi)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AutoValue_Rider.JsonAdapter(moshi); } }</code> </pre> <br>  Thrift tambi√©n ayuda en el desarrollo de servicios: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">service</span></span> UberService { <span class="hljs-attribute"><span class="hljs-attribute">Rider</span></span> getRider() }</code> </pre><br>  Tambi√©n tenemos que agregar algunos metadatos aqu√≠ para hacernos saber qu√© resultado final queremos lograr: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">service</span></span> UberService { <span class="hljs-attribute"><span class="hljs-attribute">Rider</span></span> getRider() (path=<span class="hljs-string"><span class="hljs-string">"/rider"</span></span>) }</code> </pre><br>  Despu√©s de la generaci√≥n del c√≥digo, recibiremos nuestro servicio: <br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UberService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@GET</span></span>(<span class="hljs-string"><span class="hljs-string">"/rider"</span></span>) <span class="hljs-function"><span class="hljs-function">Single&lt;Rider&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRider</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Pero este es solo uno de los posibles resultados.  Un modelo  Como sabemos por experiencia, nadie ha usado solo un modelo.  Tenemos muchos modelos que generan c√≥digo para nuestros servicios: <br><br><pre> <code class="hljs rust"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rider</span></span></span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">City</span></span></span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vehicle</span></span></span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Restaurant</span></span></span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Payment</span></span></span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TipAmount</span></span></span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rating</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment">// And 6000 more</span></span></code> </pre><br>  Por el momento tenemos alrededor de 5-6 aplicaciones.  Y tienen muchos servicios.  Y todos pasan por la misma tuber√≠a de software.  Escribir todo esto a mano ser√≠a una locura. <br><br>  En la serializaci√≥n en JSON, el "adaptador" no necesita estar registrado en Moshi, y si usa JSON, entonces no necesita registrarse en JSON.  Tambi√©n es dudoso sugerir a los empleados que realicen la deserializaci√≥n reescribiendo el c√≥digo a trav√©s de un gr√°fico DI. <br><br>  Pero trabajamos con Java, por lo que podemos usar el patr√≥n Factory, que generamos a trav√©s de la biblioteca <b>Fractory</b> .  Podemos generar esto porque conocemos estos tipos antes de que ocurriera la compilaci√≥n.  Fractory genera un adaptador como este: <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ModelsAdapterFactory</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JsonAdapter</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Factory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> JsonAdapter&lt;?&gt; create(Type type, Set&lt;? extends Annotation&gt; annotations, Moshi moshi) { Class&lt;?&gt; rawType = Types.getRawType(type); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rawType.isAssignableFrom(Rider.class)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Rider.adapter(moshi); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rawType.isAssignableFrom(City.class)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> City.adapter(moshi); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rawType.isAssignableFrom(Vehicle.class)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Vehicle.adapter(moshi); } <span class="hljs-comment"><span class="hljs-comment">// Etc etc return null; } }</span></span></code> </pre><br>  El c√≥digo generado no se ve muy bien.  Si le duele el ojo, puede reescribirse manualmente. <br><br>  Aqu√≠ puede ver los tipos mencionados anteriormente con los nombres de los servicios.  El sistema determinar√° autom√°ticamente qu√© adaptadores seleccionar√° y los llamar√°.  Pero aqu√≠ nos enfrentamos a otro problema.  Tenemos 6000 de estos adaptadores.  Incluso si los divide entre ellos dentro de la misma plantilla, el modelo "Come" o "Conductor" caer√° en el modelo "Jinete" o estar√° en su aplicaci√≥n.  El c√≥digo se extender√°.  Despu√©s de cierto punto, ni siquiera puede caber en un archivo .dex.  Por lo tanto, debe separar de alguna manera los adaptadores: <br><br><img src="https://habrastorage.org/webt/ds/ul/tg/dsultg8mrgkboye3dvwmfcepdou.png"><br><br>  Finalmente, analizaremos el c√≥digo de antemano y crearemos un subproyecto de trabajo para √©l, como en Gradle: <br><br><img src="https://habrastorage.org/webt/-4/pj/fz/-4pjfzwuq-cwmdl8lil_cia4-pi.png"><br><br>  En la estructura interna, estas dependencias se convierten en dependencias de Gradle.  Los elementos que usan la aplicaci√≥n Rider ahora dependen de ella.  Con √©l, formar√°n los modelos que necesitan.  Como resultado, nuestra tarea se resolver√° y todo esto estar√° regulado por el sistema de ensamblaje de c√≥digo dentro del programa. <br><br>  Pero aqu√≠ nos enfrentamos a otro problema: ahora tenemos un n√∫mero n de modelos de f√°brica.  Todos ellos se compilan en varios objetos: <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> RiderModelFactory <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> GiftCardModelFactory <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> PricingModelFactory <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> DriverModelFactory <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> EATSModelFactory <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> PaymentsModelFactory</code> </pre><br>  En el proceso de procesamiento de anotaciones, no ser√° posible leer solo anotaciones a dependencias externas y generar c√≥digo adicional solo en ellas. <br><br>  Soluci√≥n: tenemos un poco de soporte en la biblioteca Fractory, que nos ayuda de una manera complicada.  Est√° contenido en el proceso de enlace de datos.  Introducimos metadatos usando el par√°metro classpath en el archivo Java para su almacenamiento adicional: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> RiderModelFactory // -&gt; <span class="hljs-type"><span class="hljs-type">json</span></span> // -&gt; ridermodelfactory-fractory.bin <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MyAppGlobalFactory // Delegates <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> discovered fractories</code> </pre><br>  Ahora, cada vez que necesite usarlos en la aplicaci√≥n, vaya al filtro del directorio classpath con estos archivos y luego extr√°igalos desde all√≠ en formato JSON para averiguar cu√°les de las dependencias est√°n disponibles. <br><br><h3>  C√≥mo todo encaja </h3><br><br><img src="https://habrastorage.org/webt/ih/nj/7i/ihnj7i5j631gcjbkgt-8u64h7l8.jpeg"><br><br>  Tenemos un <b>ahorro</b> .  Los datos de all√≠ van a <b>Thrifty</b> y pasan por el an√°lisis.  Luego pasan por un programa de generaci√≥n de c√≥digo que llamamos <b>Jenga</b> .  Produce archivos en formato Java.  Todo esto sucede incluso antes de la etapa preliminar de procesamiento o antes de la compilaci√≥n.  Y durante el proceso de compilaci√≥n, se procesan las anotaciones.  Es <b>el</b> turno <b>de AutoValue para</b> generar una implementaci√≥n.  Tambi√©n llama a <b>AutoValue Moshi</b> para proporcionar soporte JSON.  <b>Fractory</b> tambi√©n <b>est√° involucrado</b> .  Todo sucede durante el proceso de compilaci√≥n.  El proceso est√° precedido por un componente para crear el proyecto en s√≠, que genera principalmente subproyectos de <b>Gradle</b> . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora que ve la imagen completa, comienza a notar las herramientas que se mencionaron anteriormente. </font><font style="vertical-align: inherit;">Entonces, por ejemplo, est√° Gradle, creando plantillas, AutoValue, JavaPoet para la generaci√≥n de c√≥digo. </font><font style="vertical-align: inherit;">Todas las herramientas no solo son √∫tiles por s√≠ mismas, sino tambi√©n en combinaci√≥n entre s√≠.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Contras de la generaci√≥n de c√≥digo </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es necesario contar sobre las trampas. </font><font style="vertical-align: inherit;">El inconveniente m√°s obvio es hinchar el c√≥digo y perder el control del mismo. </font><font style="vertical-align: inherit;">Por ejemplo, Dagger ocupa aproximadamente el 10% de todo el c√≥digo en la aplicaci√≥n. </font><font style="vertical-align: inherit;">Los modelos ocupan una parte significativamente mayor, alrededor del 25%. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En Uber, intentamos resolver el problema desechando c√≥digo innecesario. </font><font style="vertical-align: inherit;">Tenemos que realizar un an√°lisis estad√≠stico del c√≥digo y comprender qu√© √°reas est√°n realmente involucradas en el trabajo. </font><font style="vertical-align: inherit;">Cuando lo descubramos, podemos hacer algunas transformaciones y ver qu√© sucede. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esperamos reducir la cantidad de modelos generados en aproximadamente un 40%. </font><font style="vertical-align: inherit;">Esto ayudar√° a acelerar la instalaci√≥n y el funcionamiento de las aplicaciones, adem√°s de ahorrarnos dinero.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√≥mo la generaci√≥n de c√≥digo afecta los plazos de desarrollo del proyecto </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La generaci√≥n de c√≥digo, por supuesto, acelera el desarrollo, pero el tiempo depende de las herramientas que utilice el equipo. </font><font style="vertical-align: inherit;">Por ejemplo, si est√° trabajando en Gradle, lo m√°s probable es que lo est√© haciendo a un ritmo medido. </font><font style="vertical-align: inherit;">El hecho es que Gradle genera modelos una vez al d√≠a, y no cuando el desarrollador lo desea.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Obtenga m√°s informaci√≥n sobre el desarrollo en Uber y otras compa√±√≠as importantes. </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El 28 de septiembre, la 5ta Conferencia Internacional de Desarrolladores M√≥viles </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MBLT DEV</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comienza en Mosc√∫ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">800 participantes, oradores principales, concursos y rompecabezas para aquellos que est√©n interesados ‚Äã‚Äãen el desarrollo de Android e iOS. </font><font style="vertical-align: inherit;">Los organizadores de la conferencia son e-Legion y RAEC. </font><font style="vertical-align: inherit;">Puede convertirse en un participante o socio de MBLT DEV 2018 </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">en el sitio web de la conferencia</font></a><font style="vertical-align: inherit;"> .</font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=http://"><img src="https://habrastorage.org/webt/yr/u2/x0/yru2x0-bqpghfoa6zqfrkyluuhq.jpeg"></a> <br><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Informar video </font></font></h3><br><iframe width="560" height="315" src="https://www.youtube.com/embed/GpMR_Zjnn_Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413603/">https://habr.com/ru/post/es413603/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413591/index.html">Rob√≥tica industrial: ¬°57 a√±os! Recordemos de d√≥nde viene el conteo</a></li>
<li><a href="../es413593/index.html">Continuando con la conquista del fondo del mar. Microsoft y su proyecto de centro de datos submarino Natick 2</a></li>
<li><a href="../es413597/index.html">"√öltimo recurso" o por qu√© se necesita el primer dise√±o de base de datos</a></li>
<li><a href="../es413599/index.html">Hay S.L.O.N.a en partes. Introducir ITAM y no ahogarse</a></li>
<li><a href="../es413601/index.html">¬øEl centro de datos de Microsoft calienta el mar?</a></li>
<li><a href="../es413605/index.html">Preg√∫ntele a Ethan: ¬øQu√© sucede cuando una estrella atraviesa el sistema solar?</a></li>
<li><a href="../es413607/index.html">Resumen de tecnolog√≠a financiera: las monedas digitales no amenazan el sistema financiero de la Federaci√≥n de Rusia; PayPal descubri√≥ cu√°nto gastan los jugadores en juegos</a></li>
<li><a href="../es413609/index.html">S√≠ndrome del impostor: qu√© es y c√≥mo deshacerse de √©l</a></li>
<li><a href="../es413611/index.html">C√≥mo CCTV atac√≥ los d√≠as de pirateo positivo: concurso CAMBreaker</a></li>
<li><a href="../es413613/index.html">Esta nave espacial se acercar√° m√°s al Sol que cualquier cosa que haya antes y no se derretir√°.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>