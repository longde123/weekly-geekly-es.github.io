<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•– ğŸ‘¨ğŸ¼â€ğŸ”§ ğŸ•— æˆ‘å¦‚ä½•ç¼–å†™æ ‡å‡†çš„C ++ 11åº“ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆboostå¦‚æ­¤ä»¤äººææƒ§ã€‚ ç¬¬4.2ç«  ğŸ‰ ğŸšµ ğŸš°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å…ˆå‰éƒ¨åˆ†çš„æ‘˜è¦ 
 ç”±äºä½¿ç”¨C ++ 11ç¼–è¯‘å™¨çš„èƒ½åŠ›å—åˆ°é™åˆ¶ï¼Œå¹¶ä¸”ç”±äºç¼ºä¹æ›¿ä»£æ€§ï¼Œboostå¸Œæœ›åœ¨ç¼–è¯‘å™¨éšé™„çš„C ++ 98 / C ++ 03åº“ä¹‹ä¸Šç¼–å†™è‡ªå·±çš„æ ‡å‡†C ++ 11åº“å®ç°ã€‚ 

 å®ç°äº†static_assert ï¼Œ noexcept ï¼Œ countof ï¼Œå¹¶ä¸”åœ¨è€ƒè™‘äº†æ‰€æœ‰éæ ‡å‡†å®šä¹‰...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘å¦‚ä½•ç¼–å†™æ ‡å‡†çš„C ++ 11åº“ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆboostå¦‚æ­¤ä»¤äººææƒ§ã€‚ ç¬¬4.2ç« </h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417949/"><img src="https://habrastorage.org/webt/lr/zq/if/lrzqifvfeajppx2fdvqbxnwf4ce.png" alt="æˆ‘ä»¬ç»§ç»­å†’é™©ã€‚" width="300" height="350" align="left"><h3> å…ˆå‰éƒ¨åˆ†çš„æ‘˜è¦ </h3><br> ç”±äºä½¿ç”¨C ++ 11ç¼–è¯‘å™¨çš„èƒ½åŠ›å—åˆ°é™åˆ¶ï¼Œå¹¶ä¸”ç”±äºç¼ºä¹æ›¿ä»£æ€§ï¼Œboostå¸Œæœ›åœ¨ç¼–è¯‘å™¨éšé™„çš„C ++ 98 / C ++ 03åº“ä¹‹ä¸Šç¼–å†™è‡ªå·±çš„æ ‡å‡†C ++ 11åº“å®ç°ã€‚ <br><br>  <b>å®ç°äº†static_assert</b> ï¼Œ <b>noexcept</b> ï¼Œ <b>countof</b> ï¼Œå¹¶ä¸”åœ¨è€ƒè™‘äº†æ‰€æœ‰éæ ‡å‡†å®šä¹‰å’Œç¼–è¯‘å™¨åŠŸèƒ½ä¹‹åï¼Œå‡ºç°äº†æœ‰å…³å½“å‰ç¼–è¯‘å™¨æ”¯æŒçš„åŠŸèƒ½çš„ä¿¡æ¯ã€‚  <b>åŒ…å«äº†</b>è‡ªå·±çš„<b>nullptr</b>å®ç°ï¼Œè¯¥å®ç°åœ¨ç¼–è¯‘é˜¶æ®µé€‰æ‹©ã€‚ <br><br> ç°åœ¨æ˜¯ä½¿ç”¨<b>type_traits</b>å’Œæ‰€æœ‰è¿™äº›â€œç‰¹æ®Šæ¨¡æ¿é­”æœ¯â€çš„æ—¶å€™äº†ã€‚ åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥äº†æˆ‘å¯¹æ ‡å‡†åº“æœ€ç®€å•æ¨¡æ¿çš„å®ç°ï¼Œä½†ç°åœ¨æˆ‘ä»¬å°†æ›´æ·±å…¥åœ°äº†è§£è¿™äº›æ¨¡æ¿ã€‚ <br><br> é“¾æ¥åˆ°GitHubï¼Œä¸ºä¸è€çƒ¦çš„è¯»è€…å’Œéè¯»è€…æä¾›ä»Šå¤©çš„ç»“æœï¼š <br><br><blockquote>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¬¢è¿æœ‰å»ºè®¾æ€§çš„æ‰¹è¯„å’Œæ‰¹è¯„</a></b> </blockquote><br> ç»§ç»­æ²‰æµ¸åœ¨â€œæ¨¡æ¿é­”æœ¯â€ C ++ä¸–ç•Œä¸­ã€‚ <br><a name="habracut"></a><br><h4> ç›®å½• </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼•è¨€</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬1ç« ã€‚Viam supervadet vadens</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2ç« ã€‚#ifndef __CPP11_SUPPORT__ï¼ƒå®šä¹‰__COMPILER_SPECIFIC_BUILT_IN_AND_MACRO_HELL__ #endif</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬3ç« ã€‚æ‰¾åˆ°ç†æƒ³çš„nullptrå®ç°</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬4ç« C ++æ¨¡æ¿é­”æœ¯</a> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.1æˆ‘ä»¬ä»å°å¤„ç€æ‰‹</a> <br>  .... <b>4.2å…³äºæ—¥å¿—ä¸ºæˆ‘ä»¬ç¼–è¯‘äº†å¤šå°‘ä¸ªå¥‡è¿¹èˆ¬çš„é”™è¯¯</b> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.3æŒ‡é’ˆå’Œæ‰€æœ‰æ‰€æœ‰</a> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.4æ¨¡æ¿åº“è¿˜éœ€è¦ä»€ä¹ˆ</a> <br> ç¬¬äº”ç«  <br>  ... <br><br><h3> ç¬¬4ç« ã€‚æ¨¡æ¿â€œé­”æœ¯â€ C ++ã€‚ å»¶ç»­æ€§ </h3><br><h4>  4.2å…³äºæ—¥å¿—ä¼šç¼–è¯‘å¤šå°‘ä¸ªå¥‡è¿¹èˆ¬çš„é”™è¯¯ </h4><br> åœ¨æœ¬ç« çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œ</a>ä»‹ç»äº†åŸºæœ¬çš„<b>type_traits</b>æ¨¡æ¿ï¼Œä½†æ˜¯å®Œæ•´æ¨¡æ¿ä¸­è¿˜ç¼ºå°‘ä¸€äº›æ¨¡æ¿ã€‚ <br><br> ä¾‹å¦‚ï¼Œä»…éœ€è¦<i>is_integral</i>å’Œ<i>is_floating_point</i>æ¨¡æ¿ï¼Œå®ƒä»¬å®é™…ä¸Šæ˜¯éå¸¸ç®€å•åœ°å®šä¹‰çš„-é€šè¿‡æ¯ç§å†…ç½®ç±»å‹çš„æ¨¡æ¿ä¸“ç”¨åŒ–ã€‚ è¿™é‡Œçš„é—®é¢˜ä»…ä¸<b>long long</b>çš„â€œå¤§â€ç±»å‹æœ‰å…³ã€‚ äº‹å®æ˜¯ï¼Œè¿™ç§å†…ç½®ç±»å‹ä»…ä»ç‰ˆæœ¬11å¼€å§‹å‡ºç°åœ¨C ++è¯­è¨€æ ‡å‡†ä¸­ã€‚ å‡è®¾è¿™ä¸€åˆ‡éƒ½å½’ç»“ä¸ºæ£€æŸ¥C ++æ ‡å‡†çš„ç‰ˆæœ¬ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ— è®ºå¦‚ä½•éƒ½å¾ˆéš¾ç¡®å®š</a> ï¼‰ï¼Œè¿™æ˜¯åˆä¹é€»è¾‘çš„ï¼Œä½†æ˜¯å½“æ—¶è¿˜æ²¡æœ‰ã€‚ <br><br><img src="https://habrastorage.org/webt/dx/16/xq/dx16xqz_rvfqcoffnocx80dae_w.jpeg" alt="å›¾ç‰‡" width="320" height="190" align="left"> å› ä¸ºè‡ª1999å¹´ä»¥æ¥å°±å­˜åœ¨C99 Cè¯­è¨€æ ‡å‡†ï¼Œå…¶ä¸­å­˜åœ¨<b>long long int</b>å’Œ<b>unsigned long long int</b>ç±»å‹ï¼ˆè‡ª1999å¹´ä»¥æ¥ï¼ï¼‰ï¼Œå¹¶ä¸”ç”±äºC ++è¯­è¨€å¯»æ±‚ä¿æŒä¸çº¯Cçš„å‘åå…¼å®¹æ€§ï¼Œå› æ­¤è®¸å¤šç¼–è¯‘å™¨ï¼ˆé€šå¸¸åœ¨C ++ 03æ ‡å‡†å‘å¸ƒä¹‹å‰å°±å°†å…¶æ·»åŠ ä¸ºåŸºæœ¬ç±»å‹ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæƒ…å†µæ˜¯å†…ç½®ç±»å‹å®é™…ä¸Šæ˜¯ï¼ˆæ¥è‡ªCï¼‰çš„ï¼Œä½†æ˜¯åœ¨C ++æ ‡å‡†ä¸­æ²¡æœ‰æè¿°ï¼Œå› æ­¤ä¸åº”å­˜åœ¨ã€‚ è¿™å°±ç»™æ ‡å‡†åº“çš„å®ç°å¢åŠ äº†ä¸€äº›æ··ä¹±ã€‚ ä½†æ˜¯è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ï¼š <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_floating_point</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> false_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_floating_point</span></span></span><span class="hljs-class">&lt;float&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_floating_point</span></span></span><span class="hljs-class">&lt;double&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_floating_point</span></span></span><span class="hljs-class">&lt;long double&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_floating_point</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> detail::_is_floating_point&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> remove_cv&lt;_Tp&gt;::type&gt; { };</code> </pre> <br> ä¸Šé¢çš„ä»£ç å¯¹æ‰€æœ‰å†…å®¹éƒ½å¾ˆæ¸…æ¥š-æˆ‘ä»¬ä¸“é—¨ä¸ºå¿…éœ€çš„æµ®ç‚¹ç±»å‹è®¾è®¡äº†æ¨¡æ¿ï¼Œå¹¶ä¸”åœ¨â€œæ¸…é™¤â€ç±»å‹ä¿®é¥°ç¬¦ä¹‹åï¼Œå¯¹ä¼ é€’ç»™æˆ‘ä»¬çš„ç±»å‹è¯´â€œæ˜¯â€æˆ–â€œå¦â€ã€‚ æ¥ä¸‹æ¥çš„æ˜¯æ•´æ•°ç±»å‹ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_integral_impl</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> false_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_integral_impl</span></span></span><span class="hljs-class">&lt;bool&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_integral_impl</span></span></span><span class="hljs-class">&lt;char&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_integral_impl</span></span></span><span class="hljs-class">&lt;wchar_t&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_integral_impl</span></span></span><span class="hljs-class">&lt;unsigned char&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_integral_impl</span></span></span><span class="hljs-class">&lt;unsigned short int&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_integral_impl</span></span></span><span class="hljs-class">&lt;unsigned int&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_integral_impl</span></span></span><span class="hljs-class">&lt;unsigned long int&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type {}; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> LLONG_MAX template</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;&gt; struct _is_integral_impl&lt;unsigned long long int&gt; : public true_type {}; #endif template&lt;&gt; struct _is_integral_impl&lt;signed char&gt; : public true_type {}; template&lt;&gt; struct _is_integral_impl&lt;short int&gt; : public true_type {}; template&lt;&gt; struct _is_integral_impl&lt;int&gt; : public true_type {}; template&lt;&gt; struct _is_integral_impl&lt;long int&gt; : public true_type {}; #ifdef LLONG_MAX template&lt;&gt; struct _is_integral_impl&lt;long long int&gt; : public true_type {}; #endif template &lt;class _Tp&gt; struct _is_integral : public _is_integral_impl&lt;_Tp&gt; {}; template&lt;&gt; struct _is_integral&lt;char16_t&gt; : public true_type {}; template&lt;&gt; struct _is_integral&lt;char32_t&gt; : public true_type {}; template&lt;&gt; struct _is_integral&lt;int64_t&gt; : public true_type {}; template&lt;&gt; struct _is_integral&lt;uint64_t&gt; : public true_type {}; } template &lt;class _Tp&gt; struct is_integral : public detail::_is_integral&lt;typename remove_cv&lt;_Tp&gt;::type&gt; { };</span></span></span></span></code> </pre><br> åœ¨è¿™é‡Œï¼Œæ‚¨éœ€è¦åœä¸‹æ¥æ€è€ƒä¸€ä¸‹ã€‚ å¯¹äºâ€œæ—§â€æ•´æ•°ç±»å‹ï¼Œä¾‹å¦‚<b>int</b> ï¼Œ <b>bool</b>ç­‰ã€‚ æˆ‘ä»¬åšä¸<i>is_floating_point</i>ç›¸åŒçš„ä¸“ä¸šåŒ–ã€‚ å¯¹äº<b>long</b>ç±»å‹çš„<b>long long int</b>åŠå…¶æ— ç¬¦å·çš„å¯¹ç­‰ç±»å‹ï¼Œåªæœ‰åœ¨C ++ 11ä¸­å®šä¹‰äº†LLONG_MAX <b>defineæ—¶</b> ï¼Œæˆ‘ä»¬æ‰å®šä¹‰é‡è½½ï¼ˆä½œä¸ºä¸C99å…¼å®¹çš„ç¬¬ä¸€ä¸ªC ++æ ‡å‡†ï¼‰ï¼Œå¹¶ä¸”åº”åœ¨<b>climits</b>å¤´æ–‡ä»¶ä¸­å°†å…¶å®šä¹‰ä¸º<b>max</b>å¯ä»¥è£…å…¥<b>long long int</b>ç±»å‹çš„å¯¹è±¡çš„å¤§é‡æ•°å­—ã€‚  <b>Climits</b>è¿˜å…·æœ‰å…¶ä»–ä¸€äº›å®å®šä¹‰ï¼ˆç”¨äºå°½å¯èƒ½å°çš„æ•°ç›®å’Œæ— ç¬¦å·ç­‰æ•ˆé¡¹ï¼‰ï¼Œä½†æ˜¯æˆ‘å†³å®šä½¿ç”¨æ­¤å®ï¼Œè¿™å¹¶ä¸é‡è¦ã€‚ é‡è¦çš„æ˜¯ï¼Œä¸boostä¸åŒï¼Œåœ¨è¿™ç§å®ç°ä¸­ï¼Œå°½ç®¡Cï¼ˆå¯èƒ½ï¼‰å­˜åœ¨äºç¼–è¯‘å™¨ä¸­ï¼Œä½†æ˜¯Cä¸­çš„â€œå¤§â€ç±»å‹å°†ä¸å®šä¹‰ä¸ºæ•´æ•°å¸¸é‡ã€‚ æ›´é‡è¦çš„æ˜¯ç±»å‹<b>char16_t</b>å’Œ<b>char32_t</b> ï¼Œå®ƒä»¬ä¹Ÿæ˜¯C ++ 11ä¸­å¼•å…¥çš„ï¼Œä½†å°šæœªåœ¨C99ä¸­äº¤ä»˜ï¼ˆå®ƒä»¬å·²ç»ä¸C ++åœ¨C11æ ‡å‡†ä¸­åŒæ—¶å‡ºç°ï¼‰ï¼Œå› æ­¤ï¼Œåœ¨æ—§æ ‡å‡†ä¸­ï¼Œå®ƒä»¬çš„å®šä¹‰å¯ä»¥åªèƒ½é€šè¿‡ç±»å‹åˆ«åï¼ˆä¾‹å¦‚ï¼Œ <b>typedef</b> <i>short char16_t</i> ï¼Œä½†ç¨åå†ä»‹ç»ï¼‰ã€‚ å¦‚æœæ˜¯è¿™æ ·ï¼Œä¸ºäº†ä½¿æ¨¡æ¿ä¸“ä¸šåŒ–èƒ½å¤Ÿæ­£ç¡®å¤„ç†å½“è¿™äº›ç±»å‹æ˜¯å•ç‹¬çš„ï¼ˆå†…ç½®ï¼‰ä»¥åŠé€šè¿‡<b>typedef</b>å®šä¹‰å®ƒä»¬æ—¶çš„æƒ…å†µï¼Œ <i>åˆ™è¿˜éœ€è¦</i>ä¸€å±‚æ¨¡æ¿ä¸“ä¸šåŒ–<i>ç»†èŠ‚:: _ is_integral</i> ã€‚ <br><br><blockquote> ä¸€ä¸ªæœ‰è¶£çš„äº‹å®æ˜¯ï¼Œåœ¨æŸäº›æ—§çš„ç¼–è¯‘å™¨ä¸­ï¼Œè¿™äº›Cå®³ç¾çš„â€œå¤§â€ç±»å‹ä¸æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•´æ•°å¸¸é‡</a> ã€‚ å¯ä»¥ç†è§£ï¼Œç”šè‡³å¯ä»¥åŸè°…ï¼Œå› ä¸ºå¯¹äºC ++ç›´åˆ°11ä¸ªæ ‡å‡†ï¼Œè¿™äº›ç±»å‹éƒ½æ˜¯éæ ‡å‡†çš„ï¼Œå› æ­¤é€šå¸¸ä¸åº”è¯¥å­˜åœ¨ã€‚ ä½†æ˜¯ï¼Œå¾ˆéš¾ç†è§£çš„æ˜¯ï¼Œæ®æ¨æµ‹ï¼ŒC ++ 11æ”¯æŒçš„æœ€æ–°çš„Embarcaderoåˆ›æ„C ++ç¼–è¯‘å™¨ï¼ˆEmbarcadero C ++ Builderï¼‰ä¸­çš„è¿™äº›ç±»å‹åœ¨å…¶32ä½ç¨‹åºé›†ä¸­ä»ç„¶ä¸æ˜¯<b>æ•´æ•°å¸¸æ•°</b> ï¼ˆå°±åƒ20å¹´å‰ä¸€æ ·ï¼‰ç„¶åæ˜¯Borlandä»ç„¶æ­£ç¡®ï¼‰ã€‚ æ˜¾ç„¶æ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼Œè¿™äº›32ä½ç¨‹åºé›†ä¸­ç¼ºå°‘å¤§å¤šæ•°æ ‡å‡†C ++ 11åº“ï¼ˆ#include ratioï¼ŸChronoï¼Ÿå°†èŠ±è´¹ï¼‰ã€‚  Embarcaderoä¼¼ä¹å†³å®šä»¥åº§å³é“­å¼ºè¡Œæ¨åŠ¨64ä½æ—¶ä»£ï¼šâ€œæ‚¨è¦C ++ 11è¿˜æ˜¯æ›´æ–°çš„æ ‡å‡†ï¼Ÿ å»ºç«‹ä¸€ä¸ª64ä½ç¨‹åºï¼ˆåªæœ‰clangï¼Œæˆ‘ä»¬çš„ç¼–è¯‘å™¨ä¸èƒ½ï¼‰ï¼â€ <br></blockquote><br> åœ¨å®Œæˆäº†åŸºæœ¬è¯­è¨€ç±»å‹çš„è®¨è®ºä¹‹åï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸€äº›æ›´ç®€å•çš„æ¨¡å¼ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç®€å•å›¾æ¡ˆ</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>, <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">:</span></span>:void_type&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">enable_if</span></span></span><span class="hljs-class"> {</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">enable_if</span></span></span><span class="hljs-class">&lt;true, _Tp&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_same</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> false_type { }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_same</span></span></span><span class="hljs-class">&lt;_Tp, _Tp&gt; :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> true_type<span class="hljs-comment"><span class="hljs-comment">//specialization { }; template &lt;class _Tp&gt; struct is_const : public false_type { }; template &lt;class _Tp&gt; struct is_const&lt;const _Tp&gt; : public true_type { }; template &lt;class _Tp&gt; struct is_const&lt;const volatile _Tp&gt; : public true_type { }; /// is_volatile template&lt;class&gt; struct is_volatile : public false_type { }; template&lt;class _Tp&gt; struct is_volatile&lt;volatile _Tp&gt; : public true_type { }; template&lt;class _Tp&gt; struct is_volatile&lt;const volatile _Tp&gt; : public true_type { };</span></span></code> </pre><br></div></div><br> æ­¤å¤„ä»…æ³¨æ„æ¨¡æ¿ä¸“é—¨é’ˆå¯¹æ‰€æœ‰ç±»å‹çš„ä¿®é¥°ç¬¦ï¼ˆä¾‹å¦‚<b>volatile</b>å’Œ<b>const volatile</b> ï¼‰çš„äº‹å®ï¼Œå› ä¸º ä¸€äº›ç¼–è¯‘å™¨åœ¨æ‰©å±•æ¨¡æ¿æ—¶å€¾å‘äºâ€œä¸¢å¤±â€ä¿®é¥°ç¬¦ä¹‹ä¸€ã€‚ <br><br> å¦å¤–ï¼Œæˆ‘ç€é‡å¼ºè°ƒäº†<i>is_signed</i>å’Œ<i>is_unsigned</i>çš„å®ç°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sign_unsign_chooser</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">signed_comparer</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> value = _Tp(<span class="hljs-number"><span class="hljs-number">-1</span></span>) &lt; _Tp(<span class="hljs-number"><span class="hljs-number">0</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">unsigned_comparer</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> value = _Tp(<span class="hljs-number"><span class="hljs-number">0</span></span>) &lt; _Tp(<span class="hljs-number"><span class="hljs-number">-1</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Val&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cat_base</span></span></span><span class="hljs-class"> :</span></span> integral_constant&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>, Val&gt; { <span class="hljs-comment"><span class="hljs-comment">// base class for type predicates }; template&lt;&gt; struct _sign_unsign_chooser&lt;true&gt;//integral { template&lt;class _Tp&gt; struct _signed : public _cat_base&lt;_signed_comparer&lt;typename remove_cv&lt;_Tp&gt;::type&gt;::value&gt; { }; template&lt;class _Tp&gt; struct _unsigned : public _cat_base&lt;_unsigned_comparer&lt;typename remove_cv&lt;_Tp&gt;::type&gt;::value&gt; { }; }; template&lt;&gt; struct _sign_unsign_chooser&lt;false&gt;//floating point { template&lt;class _Tp&gt; struct _signed : public is_floating_point&lt;_Tp&gt; { }; template&lt;class _Tp&gt; struct _unsigned : public false_type { }; }; } template&lt;class T&gt; struct is_signed { // determine whether T is a signed type static const bool value = detail::_sign_unsign_chooser&lt;is_integral&lt;T&gt;::value&gt;::template _signed&lt;T&gt;::value; typedef const bool value_type; typedef integral_constant&lt;bool, is_signed::value == bool(true)&gt; type; operator value_type() const { // return stored value return (value); } value_type operator()() const { // return stored value return (value); } }; template&lt;class T&gt; struct is_unsigned { // determine whether T is an unsigned type static const bool value = detail::_sign_unsign_chooser&lt;is_integral&lt;T&gt;::value&gt;::template _unsigned&lt;T&gt;::value; typedef const bool value_type; typedef integral_constant&lt;bool, is_unsigned::value == bool(true)&gt; type; operator value_type() const { // return stored value return (value); } value_type operator()() const { // return stored value return (value); } };</span></span></code> </pre><br> åœ¨å®ç°è¿™ä¸€éƒ¨åˆ†æ—¶ï¼Œæˆ‘ä¸Borland C ++ Builder 6.0å±•å¼€äº†ä¸å¹³ç­‰çš„ç«äº‰ï¼Œåè€…ä¸æƒ³ä½¿è¿™ä¸¤ä¸ªæ¨¡æ¿æˆä¸ºâ€œ <i>integral_constantâ€</i>çš„ç»§æ‰¿äººï¼Œè¿™æœ€ç»ˆå¯¼è‡´æ•°åä¸ªå†…éƒ¨ç¼–è¯‘å™¨é”™è¯¯â€œæ¨¡ä»¿â€äº†è¿™äº›æ¨¡æ¿çš„â€œ integrated_constantâ€è¡Œä¸ºã€‚ åœ¨è¿™é‡Œï¼Œä¹Ÿè®¸å€¼å¾—ç»§ç»­åŠªåŠ›ï¼Œå¹¶é€šè¿‡æ¨¡æ¿æå‡ºæŸç§ç±»å‹ä¸º<i>is_ * un * signedï¼šinteger_constant</i>çš„æ£˜æ‰‹æ´¾ç”Ÿï¼Œä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘æ²¡æœ‰ä¼˜å…ˆè€ƒè™‘æ¨è¿Ÿæ­¤ä»»åŠ¡ã€‚ ä¸Šé¢çš„ä»£ç éƒ¨åˆ†æœ‰è¶£çš„æ˜¯ï¼Œåœ¨ç¼–è¯‘æ—¶å¦‚ä½•ç¡®å®šç±»å‹æ˜¯æœªç­¾åçš„/å·²ç­¾åçš„ã€‚ é¦–å…ˆï¼Œæ‰€æœ‰éæ•´æ•°ç±»å‹éƒ½è¢«<i>æ ‡è®°ï¼Œ</i>å¯¹äºå®ƒä»¬ï¼Œæ¨¡æ¿è¿›å…¥å¸¦æœ‰æ¨¡æ¿å‚æ•°<b>false</b>çš„å•ç‹¬çš„ä¸“ç”¨åˆ†æ”¯<i>_sign_unsign_chooser</i> ï¼Œå¯¹äºæ ‡å‡†æµ®ç‚¹ç±»å‹ä»¥å¤–çš„æ‰€æœ‰ç±»å‹ï¼Œå…¶åè¿‡æ¥æ€»æ˜¯è¿”å›<i>value ==</i> <b>false</b> ï¼ˆå‡ºäºæ˜¾è€Œæ˜“è§çš„åŸå› ï¼Œå®ƒä»¬æ€»æ˜¯å¾ˆé‡è¦çš„ï¼Œå› æ­¤<i>_signed :: value</i>å°†ä¸º<b>true</b> ï¼‰ã€‚ å¯¹äºæ•´æ•°ç±»å‹ï¼Œå°†æ‰§è¡Œç®€å•ä½†æœ‰è¶£çš„æ£€æŸ¥ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹äº‹å®ï¼šå¯¹äºæ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå½“æ•°å­—å‡å°ç„¶åç»è¿‡æœ€å°å€¼ï¼ˆæ˜¾ç„¶ä¸º0ï¼‰æ—¶ï¼Œä¼šå‘ç”Ÿæº¢å‡ºï¼Œå¹¶ä¸”æ•°å­—å°†è·å¾—å…¶æœ€å¤§å¯èƒ½å€¼ã€‚ <br><br> è¿™ä¸ªäº‹å®æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ï¼Œè€Œä¸”å¯¹äºç¬¦å·ç±»å‹æº¢å‡º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ˜¯æœªå®šä¹‰çš„è¡Œä¸º</a> ï¼Œæ‚¨éœ€è¦æ³¨æ„ï¼ˆæ ¹æ®æ ‡å‡†ï¼Œæ‚¨ä¸èƒ½å°†<b>int</b>å˜é‡å‡å°åˆ°å°äº<b>INT_MINçš„äº‹å®ï¼Œ</b>å¹¶å¸Œæœ›ç”±äºæº¢å‡ºè€Œå¾—åˆ°<b>INT_MAX</b>è€Œä¸æ˜¯42æˆ–æ ¼å¼åŒ–çš„ç¡¬ç›˜ï¼‰ ï¼‰ <br><br> æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªäº‹å®å†™<i>_Tpï¼ˆ-1ï¼‰&lt;_Tpï¼ˆ0ï¼‰</i>æ¥æ£€æŸ¥â€œç¬¦å·â€ç±»å‹ï¼Œç„¶åå¯¹æ— ç¬¦å·ç±»å‹-1é€šè¿‡æº¢å‡ºå°†å…¶â€œè½¬æ¢â€ä¸ºè¯¥ç±»å‹çš„æœ€å¤§æ•°ç›®ï¼Œè€Œå¯¹äºæœ‰ç¬¦å·ç±»å‹ï¼Œå°†è¿›è¡Œè¿™ç§æ¯”è¾ƒè€Œä¸ä¼šå‘ç”Ÿæº¢å‡ºï¼Œ -1å°†ä¸0è¿›è¡Œæ¯”è¾ƒã€‚ <br><br> ä»Šå¤©çš„æœ€åä¸€ä¸ªï¼Œä½†ä¸æˆ‘åº“ä¸­çš„æœ€åä¸€ä¸ªâ€œæŠ€å·§â€ç›¸å»ç”šè¿œçš„æ˜¯<i>alignment_of</i>çš„å®ç°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alignment_of_trick</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c; _Tp t; _alignment_of_trick(); }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> A, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> S&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alignment_logic_helper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> value = A &lt; S ? A : S; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> A&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alignment_logic_helper</span></span></span><span class="hljs-class">&lt;A, 0&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> value = A; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> S&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alignment_logic_helper</span></span></span><span class="hljs-class">&lt;0, S&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> value = S; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class"> &gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alignment_of_impl</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> _MSC_VER &gt; 1400 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// // With MSVC both the build in __alignof operator // and following logic gets things wrong from time to time // Using a combination of the two seems to make the most of a bad job: // static const std::size_t value = (_alignment_logic_helper&lt; sizeof(_alignment_of_trick&lt;_Tp&gt;) - sizeof(_Tp), __alignof(_Tp) &gt;::value); #else static const std::size_t value = (_alignment_logic_helper&lt; sizeof(_alignment_of_trick&lt;_Tp&gt;) - sizeof(_Tp), sizeof(_Tp) &gt;::value); #endif typedef integral_constant&lt;std::size_t, std::size_t(_alignment_of_impl::value)&gt; type; private: typedef intern::type_traits_asserts check; typedef typename check::alignment_of_type_can_not_be_zero_assert&lt; _alignment_of_impl::value != 0 &gt;:: alignment_of_type_can_not_be_zero_assert_failed check1; // if you are there means aligment of type passed can not be calculated or compiler can not handle this situation (sorry, nothing can be done there) }; // borland compilers seem to be unable to handle long double correctly, so this will do the trick: struct _long_double_wrapper{ long double value; }; } template &lt;class _Tp&gt; struct alignment_of: public detail::_alignment_of_impl&lt;_Tp&gt;::type {}; template &lt;class _Tp&gt; struct alignment_of&lt;_Tp&amp;&gt;: public alignment_of&lt;_Tp*&gt; {}; template&lt;&gt; struct alignment_of&lt;long double&gt;: public alignment_of&lt;detail::_long_double_wrapper&gt; {};</span></span></span></span></code> </pre><br><blockquote>  Microsoftçš„Visual Studioåœ¨è¿™é‡Œå†æ¬¡è¡¨ç°å‡ºè‰²ï¼Œå³ä½¿æ‹¥æœ‰å†…ç½®çš„éæ ‡å‡†<b>__alignof</b>å†…ç½®å®ï¼Œä½¿ç”¨å®ƒæ—¶ä»ä¼šäº§ç”Ÿä¸æ­£ç¡®çš„ç»“æœã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å‡å‹è¯´æ˜</b> <div class="spoiler_text">  Visual C ++ç”¨æˆ·åº”æ³¨æ„ï¼ŒMSVCå¯¹â€œå¯¹é½â€æœ‰ä¸åŒçš„å®šä¹‰ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">align_t</span></span>; assert(boost::alignment_of&lt;<span class="hljs-keyword"><span class="hljs-keyword">align_t</span></span>&gt;::value % <span class="hljs-number"><span class="hljs-number">8</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">align_t</span></span> a; assert(((<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">uintptr_t</span></span>)&amp;a % <span class="hljs-number"><span class="hljs-number">8</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">align_t</span></span> a1; assert(((<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">uintptr_t</span></span>)&amp;a1 % <span class="hljs-number"><span class="hljs-number">8</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br> åœ¨æ­¤ä»£ç ä¸­ï¼Œå³ä½¿boost :: alignment_of &lt;align_t&gt;æŠ¥å‘Šalign_tå…·æœ‰8å­—èŠ‚å¯¹é½æ–¹å¼ï¼Œä½†ç”±äºa1ä¸åœ¨8å­—èŠ‚è¾¹ç•Œä¸Šå¯¹é½ï¼Œæœ€ç»ˆæ–­è¨€å¯¹äº32ä½æ„å»ºå°†å¤±è´¥ã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨MSVCå›ºæœ‰çš„__alignofä»£æ›¿boost :: alignment_ofï¼Œæˆ‘ä»¬ä»ç„¶ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚ å®é™…ä¸Šï¼Œå¯¹äºMSVCå¯¹é½è¦æ±‚ï¼ˆå’Œæ‰¿è¯ºï¼‰ä»…çœŸæ­£é€‚ç”¨äºåŠ¨æ€å­˜å‚¨ï¼Œä¸é€‚ç”¨äºå †æ ˆã€‚ <br></div></div><br></blockquote><br> è®©æˆ‘æé†’æ‚¨ä¸€ä¸‹<i>std :: alignment_of</i>æ¨¡æ¿åº”è¯¥æ€ä¹ˆåš-è¿”å›ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼è¡¨ç¤ºæ­¤ç±»å‹çš„å…ƒç´ åœ¨å†…å­˜ä¸­çš„æ”¾ç½®è¦æ±‚ã€‚ ç¨å¾®åˆ†æ•£æ³¨æ„åŠ›ï¼Œç„¶åæ¯ç§ç±»å‹çš„å…ƒç´ éƒ½ä¼šè¿›è¡ŒæŸç§å½¢å¼çš„å†…å­˜åˆ†é…ï¼Œå¹¶ä¸”å¦‚æœå®ƒå¯¹äºå…ƒç´ æ•°ç»„æ˜¯è¿ç»­çš„ï¼Œé‚£ä¹ˆä¾‹å¦‚ï¼Œç±»å¾ˆå¯èƒ½åœ¨ç±»çš„æˆå‘˜å…ƒç´ ä¹‹é—´å­˜åœ¨â€œç©ºæ´â€ï¼ˆ <b>sizeof</b>ç±»<b>struct</b> <i>{</i> <b>char</b> <i>a;}</i>å¾ˆå¯èƒ½ä¸ç­‰äº1ï¼Œå°½ç®¡é‡Œé¢çš„æ‰€æœ‰å†…å®¹éƒ½ä¸º1å­—èŠ‚ï¼Œå› ä¸ºåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ç¼–è¯‘å™¨ä¼šå°†å…¶å¯¹é½ä¸º1 + 3å­—èŠ‚ï¼‰ã€‚ <br><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬å†æ¬¡çœ‹ä¸€ä¸‹ä»£ç ã€‚ æˆ‘ä»¬å£°æ˜<i>_alignment_of_trick</i>ç»“æ„ï¼Œåœ¨å…¶ä¸­å°†è¦æ£€æŸ¥ç±»å‹çš„å…ƒç´ ï¼ˆå¸¦æœ‰â€œç¼©è¿›â€ï¼‰æ”¾å…¥1ä¸ªå­—èŠ‚çš„å†…å­˜ä¸­ã€‚ å¹¶é€šè¿‡ç®€å•åœ°ä»ç»“æœç»“æ„çš„å¤§å°ä¸­å‡å»è¦æ£€æŸ¥çš„ç±»å‹çš„å¤§å°æ¥æ£€æŸ¥å¯¹é½æ–¹å¼ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç¼–è¯‘å™¨å†³å®šåœ¨è¦æ£€æŸ¥çš„ç±»å‹çš„å…ƒç´ å’Œå…ˆå‰çš„<b>char</b>ä¹‹é—´â€œç²˜è´´â€ä¸€ä¸ªç©ºç™½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åœ¨ç»“æ„ä¸­è·å¾—ç±»å‹å¯¹é½å€¼ã€‚ <br><br> åŒæ ·ï¼Œè¿™é‡Œé¦–å…ˆé‡åˆ°é™æ€æ–­è¨€ä½œä¸ºç±»å‹ã€‚ å®ƒä»¬å£°æ˜ä¸ºï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> intern { <span class="hljs-comment"><span class="hljs-comment">// since we have no static_assert in pre-C++11 we just compile-time assert this way: struct type_traits_asserts { template&lt;bool&gt; struct make_signed_template_require_that_type_shall_be_a_possibly_cv_qualified_but_integral_type_assert; template&lt;bool&gt; struct make_unsigned_template_require_that_type_shall_be_a_possibly_cv_qualified_but_integral_type_assert; template&lt;bool&gt; struct not_allowed_arithmetic_type_assert; template&lt;bool&gt; struct alignment_of_type_can_not_be_zero_assert; }; template&lt;&gt; struct type_traits_asserts::make_signed_template_require_that_type_shall_be_a_possibly_cv_qualified_but_integral_type_assert&lt;true&gt; { typedef bool make_signed_template_require_that_type_shall_be_a_possibly_cv_qualified_but_integral_type_assert_failed; }; template&lt;&gt; struct type_traits_asserts::make_unsigned_template_require_that_type_shall_be_a_possibly_cv_qualified_but_integral_type_assert&lt;true&gt; { typedef bool make_unsigned_template_require_that_type_shall_be_a_possibly_cv_qualified_but_integral_type_assert_failed; }; template&lt;&gt; struct type_traits_asserts::not_allowed_arithmetic_type_assert&lt;true&gt; { typedef bool not_allowed_arithmetic_type_assert_failed; }; template&lt;&gt; struct type_traits_asserts::alignment_of_type_can_not_be_zero_assert&lt;true&gt; { typedef bool alignment_of_type_can_not_be_zero_assert_failed; }; }</span></span></code> </pre><br> å®é™…ä¸Šï¼Œéœ€è¦è¿™äº›ä¸“ç”¨æ¨¡æ¿æ¥æ›¿æ¢C ++ 11ä¸­ä½äºç±»å®šä¹‰å†…çš„<b>static_assert</b> ã€‚ è¿™ç§æ–­è¨€æ¯”<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2ç« ä¸­</a>çš„<b>STATIC_ASSERT</b>çš„å¸¸è§„å®ç°æ›´è½»å·§ï¼Œæ›´ä¸“ä¸šï¼Œå¹¶ä¸”å…è®¸æ‚¨ä¸è¦å°†å¤´æ–‡ä»¶<b>core.h</b>æ‹–åˆ°<b>type_traitsä¸­</b> ã€‚ <br><br><img src="https://habrastorage.org/webt/ky/ra/ey/kyraeyyd384lkegmbcap1xfwday.jpeg" alt="å›¾ç‰‡" width="330" height="200" align="left"> å›¾æ¡ˆå¾ˆå¤šå—ï¼Ÿ è¿˜ä¼šæœ‰æ›´å¤šï¼ æˆ‘ä»¬ç°åœ¨å°†å¯¹æ­¤è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œå› ä¸ºæœ‰å…³å°†æ¨¡æ¿ç¼–ç¨‹ä¸SFINAEæŠ€æœ¯ç›¸ç»“åˆçš„æœ‰è¶£æ•…äº‹ä»¥åŠä¸ºä»€ä¹ˆæˆ‘å¿…é¡»ç¼–å†™ä¸€ä¸ªå°å‹ä»£ç ç”Ÿæˆå™¨çš„æ•…äº‹å°†ç»§ç»­ä¸‹å»ã€‚ <br><br> è°¢è°¢æ‚¨çš„å…³æ³¨ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN417949/">https://habr.com/ru/post/zh-CN417949/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN417939/index.html">ä¼˜åŒ–äº†è¿ªå£«å°¼åŠ¨ç”»ç‰‡â€œ Moanaâ€ä¸­çš„åœºæ™¯æ¸²æŸ“ã€‚ ç¬¬4éƒ¨åˆ†å’Œç¬¬5éƒ¨åˆ†</a></li>
<li><a href="../zh-CN417941/index.html">æ°´å£¶é‡Œçš„æ°´åœ¨å“ªé‡Œæ¶ˆå¤±ï¼Ÿ</a></li>
<li><a href="../zh-CN417943/index.html">æ— æœåŠ¡å™¨å’ŒReact 2ï¼šçµå·§æ— æ¬ºè¯ˆ</a></li>
<li><a href="../zh-CN417945/index.html">æ´¾å…‹å¤ªé˜³èƒ½æ¢å¤´æœ‰å“ªäº›å·¥å…·</a></li>
<li><a href="../zh-CN417947/index.html">Webé¡¹ç›®çš„æ•°æ®å¯è§†åŒ–</a></li>
<li><a href="../zh-CN417951/index.html">ç¼–å†™Javaå‹å¥½çš„Kotlinä»£ç </a></li>
<li><a href="../zh-CN417953/index.html">è®¾è®¡FPGAçš„è¶‹åŠ¿ã€‚ ç¬”è¯‘</a></li>
<li><a href="../zh-CN417955/index.html">å¦‚ä½•æˆä¸ºç•Œé¢è®¾è®¡å¸ˆã€‚ æˆ‘ä»¬æ²¡æœ‰è¢«å‘ŠçŸ¥çš„å¿…è¦æŠ€èƒ½å’Œå¼ºå¤§å·¥å…·</a></li>
<li><a href="../zh-CN417957/index.html">å¼€æ”¾å¼ç½‘ç»œç ”è®¨ä¼šLinuxå®¹å™¨åŒ–æœºåˆ¶</a></li>
<li><a href="../zh-CN417959/index.html">10ä¸ªç•Œé¢è®¾è®¡æŠ€å·§</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>