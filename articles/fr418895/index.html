<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÜ üë©üèº‚Äçü§ù‚Äçüë®üèª üë§ Apprenez l'intelligence artificielle pour jouer √† un jeu üéØ üë®üèæ‚Äç‚úàÔ∏è üö£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, cher lecteur! 

 Dans cet article, nous allons d√©velopper un r√©seau de neurones qui peut passer √† un bon niveau un jeu cr√©√© sp√©cialement pour...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apprenez l'intelligence artificielle pour jouer √† un jeu</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418895/">  Bonjour, cher lecteur! <br><br>  Dans cet article, nous allons d√©velopper un r√©seau de neurones qui peut passer √† un bon niveau un jeu cr√©√© sp√©cialement pour lui. <br><br><img src="https://github.com/Ivan753/Learning/blob/master/ii_r.gif?raw=true"><br><br>  <i>Remarque: cet article n'explique pas le terme ¬´ <u>r√©seau de neurones</u> ¬ª et tout ce qui s'y rapporte, ni ne fournit des informations de base sur l' <u>entra√Ænement r√©seau √† l'aide de la m√©thode de trace</u> .</i>  <i>Nous vous recommandons de vous familiariser bri√®vement avec ces concepts avant de lire cet article.</i> <br><a name="habracut"></a><br><h2>  D√©but: description des r√®gles du jeu </h2><br>  <b>Le but</b> est d'attraper autant de cercles avec un bord vert que possible, en √©vitant les cercles avec du rouge. <br><cut></cut><br>  <b>Termes:</b> <br><cut></cut><br><ul><li>  Deux fois plus de cercles rouges volent sur le terrain que de cercles verts; </li><li>  Les cercles verts restent dans le champ, les cercles rouges volent hors du champ et sont √©limin√©s; </li><li>  Les cercles verts et rouges peuvent entrer en collision et se repousser avec leur propre esp√®ce; </li><li>  Joueur - une balle jaune sur l'√©cran, peut se d√©placer dans le champ. </li></ul><br>  Apr√®s avoir touch√© le ballon dispara√Æt et le joueur obtient les points correspondants. <br><cut></cut><br><h2>  Suivant: concevoir l'IA </h2><br><h3>  R√©cepteurs </h3><br>  Pour que l'IA puisse d√©cider o√π d√©placer le joueur, vous devez d'abord obtenir des donn√©es environnementales.  Pour ce faire, cr√©ez des <i>scanners</i> sp√©ciaux qui sont des lignes droites.  Le premier scanner est situ√© √† un angle de 180 degr√©s par rapport √† la limite inf√©rieure du champ. <br><cut></cut><br>  Il y en aura 68: les 32 premiers - r√©pondent aux bombes (cercles rouges), les 32 suivants - r√©pondent aux pommes (cercles verts), et les 4 derniers - re√ßoivent des donn√©es sur l'emplacement des limites du champ par rapport au joueur.  Appelons ces 68 scanners les <i>neurones d'entr√©e du</i> futur r√©seau neuronal (couche r√©ceptrice). <br><cut></cut><br>  La longueur des 64 premiers scanners est de 1000 pixels, les 4 restants correspondent √† la division du champ en deux selon la face de sym√©trie correspondante <br><img src="https://habrastorage.org/webt/xo/ae/fg/xoaefgbh6yrowfbpqpvrrf2sev0.png" alt="image">  Port√©e AI (1/4) <br><img src="https://habrastorage.org/webt/ga/fw/cl/gafwcl5ji8pot9v-roos8anxsk0.png" alt="image"><br><cut></cut><br>  Dans la figure: neurones d'entr√©e recevant des valeurs des scanners <br>  Les valeurs sur les scanners sont normalis√©es, c'est-√†-dire  r√©duit √† la plage [0, 1], et plus l'objet traversant le scanner est proche du lecteur, plus la valeur est transmise au scanner. <br><cut></cut><br><div class="spoiler">  <b class="spoiler_title">Algorithme de r√©ception de donn√©es par les scanners et son impl√©mentation sur JS</b> <div class="spoiler_text">  Ainsi, le scanner est direct.  Nous avons les coordonn√©es d'un de ses points (coordonn√©es du joueur) et l'angle par rapport √† l'axe OX, nous pouvons obtenir le deuxi√®me point en utilisant les fonctions trigonom√©triques sin et cos. <br><cut></cut><br>  De l√†, nous obtenons le vecteur directeur de la ligne, ce qui signifie que nous pouvons construire la forme canonique de l'√©quation de cette ligne. <br><cut></cut><br>  Pour obtenir la valeur sur le scanner, vous devez voir si une balle coupe cette ligne, ce qui signifie que vous devez pr√©senter l'√©quation de la ligne sous une forme param√©trique et remplacer tout cela dans les √©quations du cercle, s√©quentiellement pour chaque cercle du champ. <br><cut></cut><br>  Si nous apportons cette substitution √† une forme g√©n√©rale, nous obtenons une √©quation param√©trique par rapport √† a, b et c, o√π ces variables sont les coefficients de l'√©quation quadratique, √† partir du carr√©, respectivement. <br><cut></cut><br>  Nous invitons le lecteur √† se familiariser plus en d√©tail avec cet algorithme en utilisant les d√©finitions les plus simples de l'alg√®bre lin√©aire <br>  Ci-dessous le code des scanners <br><cut></cut><br><pre><code class="javascript hljs">Ball.scaners: { <span class="hljs-comment"><span class="hljs-comment">// length: 1000, i: [], //   get_data: function(){ //Ball.scaners.get_data /     var angl = 0; var x0 = Ball.x, var y0 = Ball.y; var l = Ball.scaners.length; for(let k = 0; k &lt; 32; k++){ x1 = l*Math.cos(angl), y1 = l*Math.sin(angl); Ball.scaners.i[k] = 0; for(i = 0; i &lt; bombs.length; i++){ if(((k &gt;= 0) &amp;&amp; (k &lt;= 8) &amp;&amp; (bombs[i].x &lt; x0) &amp;&amp; (bombs[i].y &lt; y0)) || ((k &gt;= 8) &amp;&amp; (k &lt;= 16) &amp;&amp; (bombs[i].x &gt; x0) &amp;&amp; (bombs[i].y &lt; y0)) || ((k &gt;= 16) &amp;&amp; (k &lt;= 24) &amp;&amp; (bombs[i].x &gt; x0) &amp;&amp; (bombs[i].y &gt; y0)) || ((k &gt;= 24) &amp;&amp; (k &lt;= 32) &amp;&amp; (bombs[i].x &lt; x0) &amp;&amp; (bombs[i].y &gt; y0))){ //    var x2 = bombs[i].x, y2 = bombs[i].y; var p = true; //    var pt = true; //     var t1, t2; var a = x1*x1 + y1*y1, b = 2*(x1*(x0 - x2) + y1*(y0 - y2)), c = (x0 - x2)*(x0 - x2) + (y0 - y2)*(y0 - y2) - bombs[i].r*bombs[i].r; //------------------------------    if((a == 0) &amp;&amp; (b != 0)){ t = -c/b; pt = false; } if((a == 0) &amp;&amp; (b == 0)){ p = false; } if((a != 0) &amp;&amp; (b != 0) &amp;&amp; (c == 0)){ t1 = 0; t2 = b/a; } if((a != 0) &amp;&amp; (b == 0) &amp;&amp; (c == 0)){ t1 = 0; pt = false; } if((a != 0) &amp;&amp; (b == 0) &amp;&amp; (c != 0)){ t1 = Math.sqrt(c/a); t2 = -Math.sqrt(c/a); } if((a != 0) &amp;&amp; (b != 0) &amp;&amp; (c != 0)){ var d = b*b - 4*a*c; if(d &gt; 0){ t1 = (-b + Math.sqrt(d))/(2*a); t2 = (-b - Math.sqrt(d))/(2*a); } if(d == 0){ t1 = -b/(2*a); } if(d &lt; 0){ p = false; } } //----------------------------------- if(p == true){ if(pt == true){ let x = t1*x1 + x0; let y = t1*y1 + y0; let l1 = Math.pow((x - Ball.x), 2)+Math.pow((y - Ball.y), 2); x = t2*x1 + x0; y = t2*y1 + y0; let l2 = Math.pow((x - Ball.x), 2)+Math.pow((y - Ball.y), 2); if(l1 &lt;= l2){ Ball.scaners.i[k] += 1 - l1/(l*l); }else{ Ball.scaners.i[k] += 1 - l2/(l*l); } }else{ let x = t1*x1 + x0; let y = t1*y1 + y0; Ball.scaners.i[k] += 1 - (Math.pow((x - Ball.x), 2)+Math.pow((y - Ball.y), 2))/(l*l); } }else{ Ball.scaners.i[k] += 0; } }else{ continue; } } angl += Math.PI/16; } //!---------------  for(k = 32; k &lt; 64; k++){ x1 = l*Math.cos(angl), y1 = l*Math.sin(angl); Ball.scaners.i[k] = 0; for(i = 0; i &lt; apples.length; i++){ if(((k &gt;= 32) &amp;&amp; (k &lt;= 40) &amp;&amp; (apples[i].x &lt; x0) &amp;&amp; (apples[i].y &lt; y0)) || ((k &gt;= 40) &amp;&amp; (k &lt;= 48) &amp;&amp; (apples[i].x &gt; x0) &amp;&amp; (apples[i].y &lt; y0)) || ((k &gt;= 48) &amp;&amp; (k &lt;= 56) &amp;&amp; (apples[i].x &gt; x0) &amp;&amp; (apples[i].y &gt; y0)) || ((k &gt;= 56) &amp;&amp; (k &lt;= 64) &amp;&amp; (apples[i].x &lt; x0) &amp;&amp; (apples[i].y &gt; y0))){ var x2 = apples[i].x, var y2 = apples[i].y; var p = true; //    var pt = true; //     var t1, t2; var a = x1*x1 + y1*y1, b = 2*(x1*(x0 - x2) + y1*(y0 - y2)), c = (x0 - x2)*(x0 - x2) + (y0 - y2)*(y0 - y2) - apples[i].r*apples[i].r; //------------------------------    if((a == 0) &amp;&amp; (b != 0)){ t = -c/b; pt = false; } if((a == 0) &amp;&amp; (b == 0)){ p = false; } if((a != 0) &amp;&amp; (b != 0) &amp;&amp; (c == 0)){ t1 = 0; t2 = b/a; } if((a != 0) &amp;&amp; (b == 0) &amp;&amp; (c == 0)){ t1 = 0; pt = false; } if((a != 0) &amp;&amp; (b == 0) &amp;&amp; (c != 0)){ t1 = Math.sqrt(c/a); t2 = -Math.sqrt(c/a); } if((a != 0) &amp;&amp; (b != 0) &amp;&amp; (c != 0)){ var d = b*b - 4*a*c; if(d &gt; 0){ t1 = (-b + Math.sqrt(d))/(2*a); t2 = (-b - Math.sqrt(d))/(2*a); } if(d == 0){ t1 = -b/(2*a); } if(d &lt; 0){ p = false; } } //----------------------------------- if(p == true){ if(pt == true){ let x = t1*x1 + x0; let y = t1*y1 + y0; let l1 = Math.pow((x - Ball.x), 2)+Math.pow((y - Ball.y), 2); x = t2*x1 + x0; y = t2*y1 + y0; let l2 = Math.pow((x - Ball.x), 2)+Math.pow((y - Ball.y), 2); if(l1 &lt;= l2){ Ball.scaners.i[k] += 1 - l1/(l*l); }else{ Ball.scaners.i[k] += 1 - l2/(l*l); } }else{ let x = t1*x1 + x0; let y = t1*y1 + y0; Ball.scaners.i[k] += 1 - (Math.pow((x - Ball.x), 2)+Math.pow((y - Ball.y), 2))/(l*l); } }else{ Ball.scaners.i[k] += 0; } }else{ continue; } } angl += Math.PI/16; } Ball.scaners.i[64] = (1000 - Ball.x) / 1000; //  Ball.scaners.i[65] = Ball.x / 1000; //  Ball.scaners.i[66] = (500 - Ball.y) / 500; //  Ball.scaners.i[67] = Ball.y / 500; //  } }</span></span></code> </pre> </div></div><br><h3>  Conception de r√©seaux de neurones </h3><br>  Il √©tait donc d'usage d'utiliser l'algorithme de tra√ßage (chemins de r√©f√©rence) pour la formation NS. <br>  <i>Remarque: afin de simplifier le processus d'apprentissage, la construction des matrices est omise.</i> <br><br>  Continuez: <br><br><ol><li>  En sortie du r√©seau, nous pr√©sentons 8 neurones responsables des directions: le premier est √† gauche, le second est √† gauche + haut, le troisi√®me est haut, le quatri√®me est haut + droit, le cinqui√®me est droit et ainsi de suite; </li><li>  Soit une valeur positive sur un neurone signifie que vous devez vous d√©placer dans la direction qui lui est attach√©e, et n√©gative - le contraire; </li><li>  Il est important pour nous de combiner en quelque sorte les valeurs des scanners qui sont au m√™me angle par rapport au bord inf√©rieur du champ.  Comme avec une sortie n√©gative, l'IA repoussera de cette direction, nous introduisons une couche suppl√©mentaire (cach√©e, entre l'entr√©e et la sortie), qui ajoutera les valeurs des neurones qui refl√®tent les scanners correspondants par paires, et nous prendrons les valeurs des neurones rouges avec un signe "-"; </li><li>  √âvidemment, le mouvement vers la gauche est principalement affect√© par les informations √† gauche du joueur (non seulement, mais cela sera pris en compte plus tard (*)) - cela signifie que nous connectons 8 neurones de la couche cach√©e situ√©e √† gauche avec le neurone charg√© de se d√©placer vers la gauche.  Nous √©tablissons les connexions comme suit: un poids correspondant √† un neurone correspondant √† un scanner situ√© parall√®lement √† la limite du champ est attribu√© √† 1, puis √† deux neurones voisins un poids √©gal √† 0,95, ceux voisins √† un poids unique de 0,9 et enfin, le dernier de ce secteur est de poids 0,8; </li><li>  Nous prenons √©galement en compte les neurones de fronti√®re: nous attirons les communications de ces neurones de fronti√®re vers les sorties qui peuvent influencer le mouvement des fronti√®res. </li><li>  Il en va de m√™me avec les sept neurones restants de la couche de sortie. </li></ol><br>  Apr√®s avoir termin√© l'algorithme ci-dessus, nous obtenons le r√©seau neuronal montr√© dans la figure ci-dessous <br><cut></cut><br><img src="https://habrastorage.org/webt/qq/ga/cy/qqgacy_wbvf6ya8dq-qgegokudm.png" alt="image"><br><cut></cut><br>  * Mais ce n'est pas tout.  Il est important d'interpr√©ter correctement le r√©sultat, √† savoir (Y est un tableau de neurones de sortie): <br><pre> <code class="javascript hljs"> Ball.vx = -(Y[<span class="hljs-number"><span class="hljs-number">0</span></span>] - Y[<span class="hljs-number"><span class="hljs-number">4</span></span>]) + (-(Y[<span class="hljs-number"><span class="hljs-number">1</span></span>] - Y[<span class="hljs-number"><span class="hljs-number">5</span></span>]) + (Y[<span class="hljs-number"><span class="hljs-number">3</span></span>] - Y[<span class="hljs-number"><span class="hljs-number">6</span></span>]))*<span class="hljs-number"><span class="hljs-number">0.5</span></span>; Ball.vy = -(Y[<span class="hljs-number"><span class="hljs-number">2</span></span>] - Y[<span class="hljs-number"><span class="hljs-number">6</span></span>]) + (-(Y[<span class="hljs-number"><span class="hljs-number">3</span></span>] - Y[<span class="hljs-number"><span class="hljs-number">7</span></span>]) + (Y[<span class="hljs-number"><span class="hljs-number">5</span></span>] - Y[<span class="hljs-number"><span class="hljs-number">1</span></span>]))*<span class="hljs-number"><span class="hljs-number">0.5</span></span>;</code> </pre><br><cut></cut><br>  Ainsi, nous avons cr√©√© et entra√Æn√© automatiquement le r√©seau de neurones qui sous-tend l'IA du joueur sur le gif en haut de l'article <br><cut></cut><br>  Le code est disponible (impl√©mentation du jeu et de l'IA) sur le lien: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien vers le github Ivan753 / Learning</a> <br><cut></cut><br>  C‚Äôest tout.  Merci de votre attention! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418895/">https://habr.com/ru/post/fr418895/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418883/index.html">GitLab sur NAS</a></li>
<li><a href="../fr418885/index.html">Crispr peut acc√©l√©rer les processus naturels et changer la fa√ßon dont les aliments sont cultiv√©s</a></li>
<li><a href="../fr418887/index.html">√Ä quelle vitesse l'univers se d√©veloppe-t-il?</a></li>
<li><a href="../fr418889/index.html">Guide de test manuel des applications: avantages, √©tapes et m√©thodologies</a></li>
<li><a href="../fr418891/index.html">Nous avons v√©rifi√© les codes source Android √† l'aide de PVS-Studio, ou personne n'est parfait</a></li>
<li><a href="../fr418897/index.html">CRDT: types de donn√©es r√©pliqu√©es sans conflit</a></li>
<li><a href="../fr418899/index.html">Premi√®res impressions et actions apr√®s la mise √† niveau de MySQL de la version 5.7 vers la version 8.0.11</a></li>
<li><a href="../fr418901/index.html">Les Russes ont remport√© la majorit√© des m√©dailles d'or √† l'Olympiade europ√©enne d'informatique eJOI 2018</a></li>
<li><a href="../fr418903/index.html">Scientifiques: il n'y a pas assez de CO‚ÇÇ sur Mars pour r√©chauffer l'atmosph√®re. L'explosion d'un p√¥le n'aidera pas</a></li>
<li><a href="../fr418905/index.html">Clavier en ligne dans les robots t√©l√©grammes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>