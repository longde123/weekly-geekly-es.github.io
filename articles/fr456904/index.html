<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>„ÄΩÔ∏è üë®üèΩ‚Äçüîß üôçüèø Test de charge d'un projet Web - pas d'argent üÜô üë®üèΩ‚Äçüöí üë®‚Äçüî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mes amis, bon apr√®s-midi! 

 Nous continuons la s√©rie de publications ¬´sans coupures¬ª sur des projets li√©s au d√©veloppement, souvent avec le pr√©fixe ¬´...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Test de charge d'un projet Web - pas d'argent</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bitrix/blog/456904/">  Mes amis, bon apr√®s-midi! <br><br>  Nous continuons la s√©rie de publications ¬´sans coupures¬ª sur des projets li√©s au d√©veloppement, souvent avec le pr√©fixe ¬´web¬ª.  Parlons aujourd'hui des tests de r√©sistance.  Le probl√®me est que souvent, ni le client ni le chef de projet ne comprennent pourquoi il est n√©cessaire, quels risques il peut r√©duire, comment l'organiser et comment, et cela, je pense, est difficile, d'interpr√©ter ses r√©sultats au profit de l'entreprise.  On verse du caf√© et c'est parti ... <br><a name="habracut"></a><br><h2>  Pourquoi tester en charge un projet Web? </h2><br>  Le fait est que m√™me si les autotests sont toujours en cours d'√©criture dans certains projets Web pour maintenir la qualit√©, peu de personnes sont impliqu√©es dans le contr√¥le des performances au stade du d√©veloppement.  Il est tr√®s rare de voir un projet web avec √† la fois des autotests et des benchmarks de code.  Plus souvent et pour des raisons raisonnables, les heuristiques suivantes sont respect√©es lors du d√©veloppement, qui pr√©sentent un bon rapport b√©n√©fice / co√ªt: <br><br><ul><li>  les requ√™tes √† MySQL (nous utiliserons cette base de donn√©es populaire comme exemple) passent par une API assez ad√©quate qui utilise des index (bien que nous ne voyions pas exactement comment les index sont utilis√©s par le planificateur, quelle est leur cardinalit√©) </li><li>  les r√©sultats de l'ex√©cution des requ√™tes de base de donn√©es et des morceaux de code lourds sont mis en cache </li><li>  le d√©veloppeur a v√©rifi√© 3,14 fois la construction de la page Web dans le navigateur et si cela ne ralentit pas l'≈ìil, alors tout va bien </li></ul><br>  L'heuristique fonctionne souvent bien, mais plus le projet est gros et lourd, plus le quelque chose <b>peut mal tourner</b> avec une probabilit√© exponentiellement croissante. <br><br>  Prenez la mise en cache.  Lors du d√©veloppement, il n'y a souvent pas de temps pour r√©fl√©chir √† la fr√©quence de reconstruction du cache.  Mais en vain.  Si la reconstruction d'un cache, par exemple, un catalogue de produits, prend beaucoup de temps et que le cache est r√©initialis√© lorsqu'un produit est ajout√©, la mise en cache fera plus de mal que de bien. <br><br>  C'est pourquoi, en passant, il n'est pas recommand√© d'utiliser le cache de requ√™te MySQL int√©gr√©, qui souffre d'un probl√®me similaire: si vous modifiez au moins un enregistrement de table, le cache de table est compl√®tement r√©initialis√© (imaginez une table de 100k lignes et l'absurdit√© de la situation devient √©vidente). <br><br>  Une situation similaire avec les requ√™tes MySQL.  Si les requ√™tes sont ex√©cut√©es par des index, alors, en g√©n√©ral, les requ√™tes seront ex√©cut√©es ... "plus rapidement".  Vous pouvez croire que le temps d'ex√©cution de ces requ√™tes d√©pend logarithmiquement de la quantit√© de donn√©es (O (log (n))).  Mais dans la pratique, il s'av√®re souvent que certaines requ√™tes affectent d'autres, en utilisant en m√™me temps les sous-syst√®mes g√©n√©raux de la base de donn√©es (tri sur un disque qui commence √† ralentir) et vous ne pouvez pas le pr√©dire imm√©diatement. <br><br>  De plus, souvent pendant le chargement, des fonctionnalit√©s int√©ressantes du syst√®me d'exploitation sont r√©v√©l√©es, en particulier un d√©bordement de la gamme de ports clients TCP / IP sortants lors d'un travail intensif avec memcached.  Ou apache est obstru√© par des demandes de traitement d'image, car  lors de la configuration, ils ont oubli√© de configurer leur traitement par le serveur proxy de mise en cache nginx. <br><br>  Parfois, ils oublient d'installer dans MySQL le chemin des tables temporaires sur un disque qui mappe les donn√©es √† la RAM ("/ dev / shm"), √† cause de quoi, lorsque la charge augmente, le serveur de base de donn√©es s'arr√™te √† partir de tri intensifs. <br><br>  De plus, lorsque des donn√©es sont ajout√©es au projet Web, dans un volume proche du combat, les requ√™tes et les algorithmes commencent √† afficher agressivement leur ¬´notation O¬ª: si le cart√©sien est invisible pour une petite quantit√© de donn√©es, puis lorsque le volume de combat appara√Æt, le serveur de base de donn√©es devient rouge √† cause de la tension. <br><br>  Il y a beaucoup plus d'exemples, arr√™tons-nous pour l'instant.  La principale chose √† comprendre est que les tests de charge sont n√©cessaires.  Parce qu'il est tr√®s co√ªteux, tr√®s long et √©conomiquement peu pratique de pr√©voir √† l'avance toutes les options possibles pour ¬´freiner¬ª un syst√®me Web de taille moyenne. <br><br><h2>  Comment identifier les cibles des tests de r√©sistance? </h2><br>  Ici, il est important de comprendre ce qui vous montre, √† vous et au client, le niveau de qualit√© du syst√®me Web pendant les tests de r√©sistance.  Il n'y a rien de mieux que des exemples concrets de cibles de tests de r√©sistance, bonnes et mauvaises: <br><br><ul><li>  <b>A fait 1 million de visites.</b>  <b>Temps moyen de cr√©ation d'une page Web = 1 sec.</b>  Qu'est-ce que cela montre?  Rien.  Combien de temps les tests de charge ont-ils dur√©?  Le temps d'ex√©cution d'une seule demande peut √™tre de 1 ms ou 600 secondes, et il n'est pas clair quelles proportions sont plus grandes.  Et combien d'erreurs √©taient pr√©sentes (la r√©ponse nginx dans le style "Erreur 50x") n'est pas claire non plus :-) </li><li>  <b>A fait 1 million de visites.</b>  <b>Temps de construction de la page Web m√©dian = 1 sec, le nombre d'erreurs HTTP est de 0,5%</b> Qu'est-ce que cela montre?  Jusqu'√† pr√©sent, un peu utile, mais en mieux.  La part des erreurs inad√©quates que le client peut attraper, nous savons d√©j√† que c'est g√©nial et vous pouvez commencer √† vous pr√©parer et √† aller √† la pharmacie.  La m√©diane est une m√©trique plus r√©sistante aux ¬´valeurs aberrantes¬ª que la moyenne (estimation plus ¬´robuste¬ª), elle est donc sans aucun doute meilleure que la moyenne arithm√©tique.  Mais rendons les mesures encore plus utiles. </li><li>  <b>1 million de visites ont √©t√© effectu√©es par jour.</b>  <b>25% des coups ont √©t√© faits en moins de 10 ms, 50% des coups ont √©t√© faits en moins de 1 seconde (c'est la m√©diane ou 50 centile), 75% des coups ont √©t√© faits en moins de 1,5 seconde, 95% des coups ont √©t√© faits en moins de 5 sec et le nombre d'erreurs HTTP est de 0,5%</b> C'est tout!  Nous voyons la proportion d'erreurs inad√©quates que le client peut d√©tecter, mais nous voyons √©galement la proportion de demandes qui sont ex√©cut√©es au-del√† d'un certain seuil. </li></ul><br>  Comme vous pouvez le voir, le choix de m√©triques ad√©quates pour √©valuer la vitesse d'un projet Web lors des tests de charge est tr√®s, tr√®s important.  Il n'y a qu'un seul principe - les mesures doivent √™tre absolument claires √† la fois pour le client et pour vous, et pour montrer clairement et clairement la qualit√©.  En fait, la mesure la plus √©vidente et la plus correcte est la distribution de la vitesse de traitement des appels dans le temps.  Si vous r√©ussissez √† le faire lors de vos tests de r√©sistance, ce sera super.  De plus, vous pouvez comparer 2 stress tests par la nature de la distribution des hits de temps et voir comment cela s'est am√©lior√© et o√π.  La visualisation, c'est le pouvoir! <br><br><h2>  Rien n'est clair: centiles, m√©dianes, quantiles, brouillons, distribution ... </h2><br>  Tout est simple!  Maintenant, je vais dessiner et montrer dans un bel environnement pour l'analyse des donn√©es: cahier Jupyter / Python. <br><br>  Disons que 10 visites ont √©t√© effectu√©es sur le site Web avec un tel d√©lai en millisecondes: <br><br><img src="https://habrastorage.org/webt/l-/e8/io/l-e8io0jdj8vupfnnzus5sjm54i.png"><br><br>  Triez maintenant le temps n√©cessaire pour terminer les hits dans l'ordre croissant: <br><br><img src="https://habrastorage.org/webt/tp/m8/ay/tpm8ayfzhwxc3et6n74glp3ngnm.png"><br><br>  Nous sommes √† un pas de la compr√©hension des m√©dian, 25e et 75e centels.  Tout est simple - nous divisons le graphique en deux et au milieu il y aura une ¬´m√©diane¬ª (num√©ro 1 sur le graphique).  Le premier trimestre du graphique correspondra au 25e centile (num√©ro 2 sur le graphique) et le troisi√®me trimestre correspondra au 75e centile (num√©ro 3 sur le graphique).  En cons√©quence, d'autres centiles sont obtenus (ou, comme on les appelle aussi, quantiles) - 90, 95, 99, etc.: <br><br><img src="https://habrastorage.org/webt/zf/2l/wu/zf2lwu3o2z9xl7_zb2srwk2ayqc.png"><br><br>  Et il ressemblera √† la distribution (histogramme) sur la dur√©e d'ex√©cution des hits ci-dessus.  Comme vous pouvez le voir, tout est tr√®s clair et simple: <br><br><img src="https://habrastorage.org/webt/ro/s8/yi/ros8yifhkgaa8phiovwj7xhffee.png"><br><br>  Et c'est ainsi que vous pouvez rapidement cr√©er une distribution (histogramme) bas√©e sur le journal des demandes de test de charge.  Modifiez votre format de journal: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash TOTAL=`cat /var/log/nginx.access.log | wc -l` echo "Total:" $TOTAL cat /var/log/nginx.access.log | awk -F'-&gt;' '{ $2=$2*1000; zone = int($2/100)*100; hits[zone]++; } \ END {for (z in hits) {printf("%8s ms: %8s,%6.2f% ",z,hits[z],hits[z]/total*100);{s="";a=0;while(a++&lt;int(hits[z]/total*100)) s=s"*";print s} } }' \ total="$TOTAL" - | sort -n</span></span></code> </pre> <br>  Et vous obtenez quelque chose comme √ßa: <br><br><img src="https://habrastorage.org/webt/yi/cw/kt/yicwktq5m-gspcpb81-q9o5mele.png"><br><br>  J'esp√®re que maintenant tout est devenu clair et en place.  Sinon, demandez dans les commentaires. <br><br><h2>  Temps de test de r√©sistance </h2><br>  Les gens demandent souvent - combien de temps devrait durer le test de charge d'un projet Web?  Il existe une heuristique simple - dans le syst√®me d'exploitation, les t√¢ches souvent planifi√©es sont effectu√©es une fois par jour: sauvegardes, rotation des journaux, etc., par cons√©quent, le temps pour effectuer des tests de charge ne doit pas √™tre inf√©rieur √†, correctement, une journ√©e.  Si le projet Web est bas√© sur Bitrix, la plate-forme a √©galement de nombreuses t√¢ches planifi√©es et il est conseill√© de charger le syst√®me Web pendant au moins une journ√©e. <br><br><h2>  √âquilibrage de charge </h2><br>  Si vous avez d√©j√† un site Web exploit√©, vous pouvez, oui, en prendre les journaux de visite et charger le nouveau syst√®me Web en les utilisant.  Mais souvent, ils r√©solvent le probl√®me du chargement uniquement du syst√®me Web d√©velopp√©.  Pour planifier l'√©quilibrage de charge, le mod√®le de division des cha√Ænes de visites potentielles en sites est souvent un bon choix.  Par exemple: <br><br><ul><li>  Accueil - Actualit√©s - Actualit√© d√©taill√©e = 50% </li><li>  Accueil - Aper√ßu du catalogue - Catalogue d√©taill√© = 30% </li><li>  Catalogue d√©taill√© - Aper√ßu du catalogue - Catalogue d√©taill√© = 15% </li><li>  R√©sultats de recherche - catalogue d√©taill√© = 5% </li></ul><br>  Dans le logiciel de cr√©ation d'une charge (nous utilisons souvent Jmeter), de nombreux flux de charge sont cr√©√©s pour chaque cha√Æne de sorte que, en tenant compte de l'intervalle entre les hits de la cha√Æne, le nombre total de hits de chaque cha√Æne par unit√© de temps soit corr√©l√© comme suit: 50%, 30%, 15%, 5% . <br><br>  Le calcul des intervalles et des flux de charge est facile √† faire dans Excel ou sur une feuille avec un crayon. <br><br><h2>  Structure de la cha√Æne de charge </h2><br>  Il est important de consid√©rer les caract√©ristiques du cycle de vie de l'utilisateur du syst√®me Web.  Souvent, les utilisateurs se connectent puis se rendent sur le site Web.  Pour ce faire, vous devez placer les actions menant √† l'autorisation au d√©but de la cha√Æne de charge: <br><br><img src="https://habrastorage.org/webt/lx/9a/5m/lx9a5m6lnnnjt0t4x0lk6avsn5e.png"><br><br>  Il est clair pour le cheval qu'il est impossible de tirer une seule page d√©taill√©e du catalogue pendant les tests de r√©sistance, il est donc utile de lire et de faire pivoter leur liste √† partir du fichier CSV: <br><br><img src="https://habrastorage.org/webt/7o/uz/py/7ouzpyccej3ec5s2cfgederegqe.png"><br><br>  Entre les hits, bien s√ªr, vous devez faire des pauses al√©atoires - nous nous rapprochons donc de la charge cr√©√©e par les vrais utilisateurs.  N'oubliez pas d'enregistrer et de renvoyer les valeurs des cookies au serveur: <br><br><img src="https://habrastorage.org/webt/j-/x-/wb/j-x-wbxmqntmtxflqp31azfk2ka.png"><br><br>  Les variables globales des cha√Ænes de charge, y compris leur nombre de threads, sont faciles √† configurer.  Certaines variables globales peuvent ensuite √™tre utilis√©es √† diff√©rents endroits des cha√Ænes de charge: <br><br><img src="https://habrastorage.org/webt/1z/gd/zb/1zgdzbx3p1i53-kzx69v5uypvbc.png"><br><br><img src="https://habrastorage.org/webt/ei/qu/x8/eiqux8vtg5i-pkdagldbiiy-0rs.png"><br><br><img src="https://habrastorage.org/webt/cu/mu/rx/cumurxiaukl1feoyc0ltyeyj2pe.png"><br><br><h2>  Comment mettre fin aux tests de r√©sistance en toute s√©curit√©? </h2><br>  Dans la pratique, presque toujours, le test de charge dans les premi√®res minutes ou heures plante le syst√®me web, tout commence √† fumer, puis br√ªle, le site ne s'ouvre pas, MySQL tombe dans un swap et ne se permet pas de se connecter, LA sur les serveurs approche 100, les d√©veloppeurs commencent √† s'ex√©cuter avec les mots ¬´cela n'aurait pas d√ª arriver¬ª, et les administrateurs syst√®me avec un sourire narquois r√©pondent g√©n√©ralement ¬´il y a de la justice dans la vie!¬ª  et commencez √† boire de la bi√®re dans la salle des serveurs. <br><br>  Mais pour comprendre pourquoi tout est tomb√© et ce qu'il faut r√©parer, afin de montrer au client les r√©sultats d'un test de charge ¬´r√©ussi¬ª en une journ√©e, vous devez d'abord activer l'enregistrement des principales mesures de la vie du syst√®me d'exploitation - c'est facile √† faire dans les produits gratuits de la classe munun / cacti. <br><br>  Je vais √©num√©rer ce qui se produit le plus souvent lors de l'effondrement d'un syst√®me Web et comment cela peut √™tre r√©solu. <br><br>  Tout d'abord, le serveur web apache ou php-fpm est "encombr√©" de requ√™tes: <br><br><img src="https://habrastorage.org/webt/tm/tv/pd/tmtvpdrhkkgk7vckhnxsglfb19m.png"><br><br>  Le plus souvent, cela se produit en raison de l'effondrement de MySQL - le nombre de flux de requ√™tes suspendus augmente: <br><br><img src="https://habrastorage.org/webt/ow/dm/f2/owdmf24wsw1zbm9ksfbgczezzv0.png"><br><br>  Quelle en est la raison?  Souvent d'en haut, ils oublient de restreindre le nombre de flux apache ou de requ√™te √† MySQL, ce qui provoque le d√©crochage des applications de la RAM dans un √©change lent avec des convulsions: <br><br><img src="https://habrastorage.org/webt/qq/dc/un/qqdcunmpuk0dbmuq0a1jfhqstas.png"><br><br>  Ici, vous pouvez voir l'activit√© soudaine lorsque vous travaillez avec un √©change, vous devez comprendre qui est tomb√© dans l'√©change et o√π: <br><br><img src="https://habrastorage.org/webt/jk/r4/6q/jkr46qtuyn9ttbbcxwav0iaxvhs.png"><br><br>  Cependant, le probl√®me est parfois du c√¥t√© du sous-syst√®me de disque lent.  Dans ce cas, LA augmente fortement et le pourcentage d'utilisation du disque approche 100 (graphique inf√©rieur droit): <br><br><img src="https://habrastorage.org/webt/rn/sk/od/rnskodj5gr0xot-bozw4haogwas.png"><br><br><img src="https://habrastorage.org/webt/sp/za/yq/spzayqb1ud73lnrn9wezocfvjv4.png"><br><br>  De toute √©vidence, je n'ai r√©v√©l√© qu'une partie de la chose la plus int√©ressante qui puisse commencer avec un projet Web pendant les tests de r√©sistance.  Mais l'essentiel est de d√©finir la bonne direction et de construire le bon processus.  Demandez dans les commentaires ce qui est apparu pendant le chargement, je vais essayer de vous aider. <br><br><h2>  Interpr√©tation des r√©sultats des tests de r√©sistance </h2><br>  Habituellement, apr√®s 5 √† 10 red√©marrages et ajustements, les tests de charge commencent leur vol et se terminent avec succ√®s.  Par cons√©quent, vous devriez avoir un ensemble de ces journaux √† peu pr√®s pour une analyse plus approfondie: <br><br><ul><li>  journal des demandes √† nginx avec l'heure de la demande du client (dans ce cas ce sera le logiciel de chargement), l'heure du proxy de nginx √† apache / php-fpm </li><li>  journal des erreurs nginx </li><li>  journal des demandes apache / php-fpm avec le temps de traitement des demandes et l'√©tat de la r√©ponse HTTP </li><li>  journal des erreurs apache / php-fpm </li><li>  Journal lent MySQL </li><li>  Journal des erreurs MySQL </li></ul><br>  De plus, il devrait y avoir des graphiques analytiques au cours de la derni√®re journ√©e sur l'utilisation du processeur, des disques, de MySQL, de la RAM, des travailleurs apache, etc.  (voir ci-dessus des exemples de graphiques munin). <br><br>  Avec ces artefacts, vous pouvez, √† l'aide d'un simple script awk au d√©but de la publication, cr√©er des distributions (histogrammes) sur ces journaux et calculer le nombre et les types d'erreurs HTTP.  En fait, vous pouvez g√©n√©rer un rapport sur le succ√®s des tests de r√©sistance sur ce contenu qui est tr√®s volumineux et utile pour les affaires et la prise de d√©cision: <br><blockquote>  Pendant la journ√©e a fait 1 million de visites.  25% des hits ont √©t√© effectu√©s en moins de 50 ms, 50% des hits ont √©t√© effectu√©s en moins de 0,5 sec (m√©diane), 75% des hits ont √©t√© effectu√©s en moins de 1 sec, 95% des hits ont √©t√© effectu√©s en moins de 5 sec, le nombre d'erreurs HTTP - 0,01%.  Donn√©es de test: catalogue, utilisateurs, actualit√©s, articles ont √©t√© inond√©s dans un volume proche de celui attendu.  <s>Un d√©veloppeur s'est suicid√©.</s> <br><br>  Cha√Ænes de charge: <br><br>  Accueil - Actualit√©s - Actualit√© d√©taill√©e = 50% <br>  Accueil - Aper√ßu du catalogue - Catalogue d√©taill√© = 30% <br>  Catalogue d√©taill√© - Aper√ßu du catalogue - Catalogue d√©taill√© = 15% <br>  R√©sultats de recherche - catalogue d√©taill√© = 5% <br><br>  Tableaux d'utilisation des ressources du serveur: <br>  ... <br></blockquote>  Il s'agit d'un bon rapport compr√©hensible sur les tests de charge du syst√®me Web.  Pour les amateurs de douleur aigu√´, vous pouvez toujours recommander lors des tests de charge d'inclure chaque minute d'import-export de donn√©es vers un site Web √† partir de syst√®mes de classe SAP, 1C, etc.  et des connexions synchrones sur des sockets TCP / IP avec des services d'√©change externes, par exemple, des crypto-monnaies :-) <br><br>  Mais, pour √™tre honn√™te, si l'importation-exportation est effectu√©e avec soin et honn√™tet√©, les tests de charge et dans ces conditions montreront des chiffres acceptables pour les entreprises. <br><br><h2>  D'o√π viennent les tests de r√©sistance? </h2><br>  Soit dit en passant, oui, nous n'avons pas soulign√© ce moment.  Pour des raisons triviales, le manque d'√©quilibre entre les travailleurs nginx - apache - mysql appara√Æt g√©n√©ralement.  C'est-√†-dire  les travailleurs ne sont pas limit√©s par le haut, par cons√©quent, 500 travailleurs (chacun parfois 100 Mo chacun) peuvent imm√©diatement monter dans apache et 500 threads avec des demandes arriveront imm√©diatement √† MySQL - ce qui provoquera une augmentation des erreurs HTTP 50x et un √©ventuel effondrement. <br><br>  Ici, il est recommand√© de limiter le nombre de travailleurs apache / php-fpm au nombre qui tient dans la RAM et, de m√™me, de limiter le nombre de threads dans MySQL pour se prot√©ger contre le d√©bordement de la RAM disponible.  L'id√©e est simple - laissez les clients attendre devant nginx, cela peut ralentir un peu sur les sockets TCP / IP asynchrones et non bloquants, qui ¬´cassent¬ª imm√©diatement dans apache / MySQL. <br><br>  Parmi les raisons les plus g√™nantes, il pourrait y avoir un PHP segfault.  Dans ce cas, vous devez activer la collecte coredump et utiliser gdb pour voir pourquoi cela se produit.  Dans la plupart des cas, le probl√®me peut √™tre contourn√© par la mise √† jour / configuration de PHP. <br><br><h2>  Ce qui reste dans les coulisses </h2><br>  Il y a des rumeurs persistantes selon lesquelles le frontend moderne pour le web a si activement v√©cu sa vie que les tests de charge classiques du backend pr√©sent√©s dans ce post ne couvrent plus tous les risques possibles de geler la construction d'une page web dans les entrailles d'Angular / React / Vue.js - donc <s>n'utilisez pas une face avant lourde et opaque, peu test√©e,</s> vous pouvez, si n√©cessaire, adapter les cha√Ænes de charge √† cette situation. <br><br>  Dans tous les cas, si les r√©sultats des tests de r√©sistance du back-end ont montr√© de bons chiffres et que le site Web continue de ralentir dans le navigateur, il est d√©j√† clair qui "frapper le visage rouge d'airain" :-) <br><br>  S√©rieusement, dans les prochains articles, nous esp√©rons couvrir ce sujet important. <br><br><h2>  R√©sum√© et conclusions </h2><br>  Total - rien n'est compliqu√© dans l'organisation et la r√©alisation de tests de charge d'un syst√®me Web utile pour le d√©veloppement et les affaires. <br><br>  Des tests de charge, correctement organis√©s, doivent toujours √™tre effectu√©s - sinon il y a un risque de rencontrer des probl√®mes majeurs pendant les op√©rations de combat, qui ne peuvent pas √™tre √©limin√©s en quelques jours. <br><br>  Pour effectuer des tests de r√©sistance, il est important d'attirer non seulement des d√©veloppeurs, mais √©galement des experts des syst√®mes d'exploitation et des administrateurs syst√®me exp√©riment√©s en mat√©riel, puis les probl√®mes de "tomber dans un √©change" ou de "d√©border de la plage locale d'adresses IP" ne provoqueront pas de saignement des yeux et d'√©vanouissement. <br><br>  Bonne chance mes amis et posez des questions dans les commentaires! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456904/">https://habr.com/ru/post/fr456904/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456892/index.html">Comment rechercher les vuln√©rabilit√©s des applications Web: comparer huit scanners populaires</a></li>
<li><a href="../fr456894/index.html">Docker et authentification via Nginx</a></li>
<li><a href="../fr456896/index.html">Identification des adresses IP r√©elles des utilisateurs du r√©seau Tor via un cache d√©form√©</a></li>
<li><a href="../fr456898/index.html">Multiplication rapide d'entiers √† l'aide de tables</a></li>
<li><a href="../fr456902/index.html">Notifications push s√©curis√©es: de la th√©orie √† la pratique</a></li>
<li><a href="../fr456908/index.html">Comment Telegram vous fusionne avec Rostelecom</a></li>
<li><a href="../fr456910/index.html">Internet project security.txt - apprendre √† conna√Ætre un autre fichier bien connu</a></li>
<li><a href="../fr456912/index.html">Comment cr√©er des sites en 2019</a></li>
<li><a href="../fr456920/index.html">Sony Xperia 1 en Russie - prix et bonus de pr√©commande</a></li>
<li><a href="../fr456922/index.html">Comment les processeurs sont con√ßus et fabriqu√©s: les bases de l'architecture informatique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>