<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘ğŸ¼ â™ï¸ ğŸ“‚ Bagaimana saya membuat Daur Ulang! VR ğŸˆ¸ ğŸ¯ ğŸ•‘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel sebelumnya, kami mencoba membuat adegan dasar dalam A-Frame untuk mencoba konsep dasar kerangka kerja dalam praktik. Pada artikel ini, sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana saya membuat Daur Ulang! VR</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443062/"><img src="https://habrastorage.org/webt/zw/1k/9x/zw1k9xfuttgxodgleuo-ksko4nq.png"><br><br>  Pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya,</a> kami mencoba membuat adegan dasar dalam A-Frame untuk mencoba konsep dasar kerangka kerja dalam praktik.  Pada artikel ini, saya ingin berbagi pengalaman saya dalam membuat game di A-Frame - Recycle!  VR  Repositori proyek tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan berikut</a> . <br><br><h2>  Daur ulang!? </h2><br>  Gagasan untuk membuat game muncul segera setelah saya mengetahui tentang Web VR.  Meskipun secara umum, saya percaya bahwa permainan di web dalam hal apa pun akan lebih rendah daripada proyek yang baik bahkan untuk perangkat seluler, belum lagi komputer pribadi dan konsol.  Tapi, menurut saya, permainan adalah ujian yang paling sulit.  Saya mulai berpikir tentang apa yang bisa saya lakukan.  Saya menonton proyek-proyek lain dan saya langsung dikejutkan oleh kesempatan untuk mengambil sesuatu menggunakan controller.  Dan karena saya telah terhubung dengan organisasi yang bergerak dalam pengumpulan sampah terpisah untuk beberapa waktu, jawabannya datang dengan sendirinya.  Daur ulang.  Kami mengambil sampah dan membuangnya ke tempat sampah.  Apa yang bisa lebih mudah.  Tetapi semuanya ternyata tidak begitu sederhana, dan ini, pada kenyataannya, akan dibahas lebih lanjut. <br><a name="habracut"></a><br><h2>  Temukan kerangka kerja </h2><br>  Pada saat dimulainya permainan, saya hanya tahu sekitar 2 kerangka kerja yang lebih atau kurang serius: Bereaksi 360, A-Frame.  Jelas, A-Frame paling cocok untuk membuat gim.  Ya, sekarang saya tahu bahwa masih ada mesin game PlayCanvas yang juga mendukung VR, tetapi sudah terlambat.  Apalagi, ternyata A-Frame juga tidak buruk untuk membuat game. <br><br><h2>  Di mana untuk memulai? </h2><br>  Saya mulai dengan mempelajari contoh-contoh game resmi dari pengembang A-Frame.  Manfaatnya tidak cukup.  A-Blast, A-Painter, Museum, Super Craft dan sekarang juga Gunters of Oasis.  Dari semua proyek yang disajikan, saya paling suka A-Blast - penembak di mana Anda harus bertarung dengan makhluk paling lucu di alam semesta.  Karena itu, saya ingin menjadikan game ini sebagai templat untuk saya.  Tapi itu tidak berhasil.  Dan alasan untuk ini adalah struktur permainan.  Tampak bagi saya bahwa dia terlalu berantakan dan tidak dipikirkan.  Mungkin lebih banyak tidak diperlukan, tetapi saya ingin melakukan sesuatu yang lebih nyaman dan lebih mudah dipahami. <br><br><h2>  Struktur </h2><br>  Struktur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">A-Blast</a> hanya mewakili satu titik masuk - file index.html, yang berisi satu adegan dengan semua aset, entitas game dasar, kontrol, dan semuanya secara umum. <br><br><img src="https://habrastorage.org/webt/_t/gy/cv/_tgycvogik29i2jemys2srlpuuy.png"><br><br>  Seperti yang dapat Anda lihat di tangkapan layar, di samping komponen dan sistem yang diperlukan (A-Frame menggunakan pola Entity Component System), ada juga peluru dan musuh - pada dasarnya sistem yang sama, tetapi untuk beberapa alasan memiliki pembungkus mereka sendiri.  Secara umum mengatakan bahwa kode ini tidak mudah dimengerti.  Jadi saya memutuskan untuk memikirkan bagaimana kode ini dapat disusun.  Gagasan pertama adalah memecah adegan menjadi bagian-bagian penyusunnya.  Mengapa router dan templat berguna, yang akan membuat ini atau itu bagian dari adegan.  Setelah mencari yang pertama dan kedua (tidak, tidak lima menit), saya tidak menemukan apa pun.  Meski saya pendukung aturan, jangan menulis sepeda, tapi kali ini saya harus menulis keputusan.  Meskipun, di suatu tempat dalam 2-3 minggu saya menemukan template dari Kevin Ngo.  Tapi sudah terlambat. <br><br><h2>  Router dan pola </h2><br><img src="https://habrastorage.org/webt/sp/bm/tn/spbmtnkznus5jjfffyvhjys6xvg.gif"><br><br>  Maka, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">a-frame-router-templates</a> memasuki adegan.  Apa yang bisa dia lakukan?  Seperti disebutkan di atas, tugas utamanya adalah membuat bagian-bagian yang diperlukan dari permainan, misalnya, layar judul, lapangan bermain, layar akhir permainan, dll.  Bagaimana cara melakukannya?  Pada prinsipnya, Anda dapat menemukan semua yang Anda butuhkan dalam dokumentasi untuk modul di github, tetapi singkatnya, kami memiliki yang berikut: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">router</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Routes --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"start-screen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"start-screen"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-field"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-field"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-over"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-over"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"how-to-play"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"how-to-play"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- End Routes --&gt;</span></span> ... <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Templates --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controls"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- End Templates --&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><ol><li>  Kami menambahkan komponen router ke tempat kejadian. </li><li>  Tambahkan-rute untuk setiap bagian dari aplikasi (frame adegan).  Satu rute untuk layar beranda, lainnya untuk lapangan bermain, dll. </li><li>  Berikan template secara langsung melalui template-a </li><li>  Jika perlu, kami mengubah rute melalui <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.el.systems.router.changeRoute(<span class="hljs-string"><span class="hljs-string">'game-field'</span></span>);</code> </pre> <br>  <b>Catatan</b> : contoh ini merujuk pada kode adegan, sehingga kita dapat memanggil sistem router secara langsung. </li><li>  Kami menetapkan dan menghubungkan template, kira-kira seperti ini: <br><br><pre> <code class="javascript hljs">AFRAME.registerTemplate(<span class="hljs-string"><span class="hljs-string">'game-field'</span></span>, <span class="hljs-string"><span class="hljs-string">` &lt;a-sub-assets&gt; &lt;a-asset-item id="glass" src="/assets/models/glass_bottle.gltf"&gt;&lt;/a-asset-item&gt; ... &lt;audio id="fail" src="/assets/sounds/fail.wav" preload&gt;&lt;/audio&gt; &lt;/a-sub-assets&gt; &lt;a-template name="button" options="text: EXIT; position: 0 1 4; rotation: 0 180 0; event: stop-game"&gt;&lt;/a-template&gt; &lt;a-entity id="indicator" indicator visible="false" position="0 1 -2" text="align: center; width: 4; color: #00A105; value: -1" &gt;&lt;/a-entity&gt; &lt;a-entity game-field-manager&gt;&lt;/a-entity&gt; `</span></span>);</code> </pre><br>  <b>Catatan:</b> a-sub-aset memungkinkan Anda memuat aset serta a-aset, tetapi hanya dengan perbedaan bahwa ada cek secara default dan jika aset sudah ditambahkan, itu tidak akan ditambahkan lagi ketika rute diubah. <br><br>  <b>Catatan 2:</b> Biasanya Anda dapat menggunakan templat hanya dengan string templat ES6.  Kalau tidak, itu bisa berubah menjadi "string" + var + "string", tidak keren.  Kevin, misalnya, memiliki dukungan untuk mesin templat.  Tapi mengapa menyulitkannya, kan? <br></li></ol><br>  Dengan demikian, Anda dapat membuat struktur aplikasi yang nyaman yang akan berisi yang berikut ini: <i>komponen, sistem, templat, status, libs</i> .  Tidak ada yang lebih dan semuanya ada di rak. <br><br><h2>  Memanipulasi benda </h2><br><img src="https://habrastorage.org/webt/zm/m1/i3/zmm1i3r-m5no1cptxljmjcwr88u.gif"><br><br>  Tugas pertama yang harus dipecahkan adalah manipulasi objek.  Saya membutuhkan fungsional seperti ambil - lempar.  Awalnya, saya mulai merenungkan cara membuat komponen seperti itu dari awal.  Murni pada tingkat filistin, refleksi seperti itu diperbolehkan: kami memiliki controller (dalam kasus desktop itu adalah kursor), ia memiliki posisi.  Kami juga memiliki objek tertentu, misalnya kubus, mereka juga memiliki posisi.  Dengan mengubah posisi pengontrol, kita harus mengubah posisi objek.  Apakah ini sederhana?  Jadi, sebenarnya, ya, tapi itu tidak akan berhasil.  Saya akan menyebutkan beberapa poin dari daftar yang sangat panjang untuk meyakinkan Anda tentang ini: <br><br><ul><li>  Kursor dalam A-Frame adalah keturunan dari kamera-dan memiliki koordinat relatif; </li><li>  Posisi pengontrol tidak cukup, Anda masih perlu mempertimbangkan orientasi, jarak ke objek, posisi kamera (pemain); </li><li>  Untuk objek dengan tubuh fisik, ini tidak akan berfungsi sama sekali, karena koordinat geometri terhubung dengan koordinat tubuh. </li></ul><br>  Bagus sekali bahwa Tuan Wil Murphy dan teman-temannya yang baik melakukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hal-hal-tangan-super</a> .  Intinya, perpustakaan ini mengandung semua komponen yang diperlukan: <br><br><ul><li>  <b>melayang</b>  Bimbingan  Arahkan pengontrol atau kursor ke zona tabrakan objek (biasanya seluruh objek) </li><li>  <b>grabbable</b> : Capture.  Ambil objek menggunakan tombol yang sesuai dan seret </li><li>  <b>merenggang</b> : Ambil dengan kedua tangan dan regang \ meremas </li><li>  <b>draggable \ dropable</b> : Pada dasarnya diperlukan untuk menentukan acara "item dilemparkan ke lokasi tertentu" </li></ul><br>  Anda dapat menemukan semua yang Anda butuhkan tentang pengaturan dan menghubungkan tangan-super dalam repositori yang disebutkan di atas.  Saya hanya ingin menarik sejumlah nuansa: <br><br><ul><li>  Buat mixin terpisah untuk tangan kanan dan kiri.  Pisahkan komponen berdasarkan jenis perangkat yang didukung.  Misalnya, di sebelah kanan, selain oculus-touch, vive-kontrol, windows-motion-kontrol, mungkin ada juga oculus-go-kontrol dan gear-vr-kontrol.  Tangan kiri harus disembunyikan untuk helm seluler BP.  Setiap pengontrol harus mengandung kedua tangan mixin dan komponen super tangan.  <a href="">Sebuah contoh</a> ; </li><li>  Jika Anda menentukan objek: .clsname untuk reycaster, jangan lupa untuk menambahkannya ke setiap elemen yang dapat diambil menggunakan pengontrol, jika tidak, satu acara untuk tangan super tidak akan gagal.  Tentu saja, jika <i>colliderEvent: raycaster-intersection</i> ; </li><li>  Menyeret dengan mouse memproyeksikan koordinat 2d ke dunia 3d, jadi lebih baik menggunakan kursor untuk desktop. </li></ul><br><h2>  Tambahkan fisika </h2><br>  Menambahkan fisika ke a-frame sebenarnya sangat sederhana.  Ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sistem khusus</a> untuk ini.  Itu ditambahkan ke adegan dan voila, fisika sudah ada di saku Anda. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physics</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"debug: false"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dynamic-body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 1 -2"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"floor"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">static-body</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>Mark</b> : <i>debug: true</i> memungkinkan kemampuan untuk melihat tubuh fisik yang terikat pada geometri.  Akan lebih mudah bila Anda perlu "menjabarkan" suatu objek. <br><br>  Bahkan, ini adalah pembungkus untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cannon.js</a> yang melakukan semua pekerjaan kotor membandingkan geometri dan tubuh fisik untuk Anda.  Sekali lagi, tentang cara kerja sistem ini, Anda dapat menemukannya di deskripsi repositori.  Dan saya ingin memikirkan satu hal yang penting untuk permainan saya. <br><br>  Saya perlu memastikan bahwa dengan menekan tombol ke tempat sampah gaya tertentu telah ditetapkan (semakin Anda menahan tombol, semakin besar gaya).  Ternyata, tugas ini tidak sesederhana seperti yang terlihat pada pandangan pertama.  Nah, apa yang begitu rumit?  - Anda berkata, kami melakukan <i>applyImpluse</i> dan voila.  Tidak juga ... Ini mengatur rotasi objek di sepanjang vektor yang diterapkan ke pusat tubuh.  Dengan menggunakan metode ini, kita hanya dapat meniru yule.  Meskipun, jika Anda mengatur vektor dengan sudut yang benar ke pesawat, Anda mungkin mendapatkan sesuatu yang mirip dengan dorongan.  Tapi ini bukan yang saya butuhkan. <br><br>  Ternyata, saya membutuhkan kecepatan ketika mengatur parameter ini, objek mulai bergerak ke arah tertentu.  Arah ini ditentukan oleh vektor.  Dan di sini kesenangan dimulai.  Bagaimana menemukan vektor ini?  Saya menemukan dua opsi: <br><br><ol><li>  Dapatkan angka empat controller (atau kamera untuk desktop), yang menggambarkan orientasinya dalam ruang.  Buat vektor V1 = &lt;1,1,1&gt;, kalikan dengan gaya lempar dan terapkan orientasi untuk semua ini. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> velocityVector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Vector3(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); velocityVector.multiplyScalar(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force); velocityVector.applyQuaternion(controllerQuaternion); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.grabbed.body.velocity.set(velocityVector.x, velocityVector.y, velocityVector.z);</code> </pre></li><li>  Cari posisi pengontrol (kursor) dan posisi objek yang dilemparkan.  Hitung vektor arah untuk dua titik.  Menormalkan vektor.  Dan gandakan dengan paksa. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> directionX = (trashPosition.x - zeroPosition.x); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> directionZ = (trashPosition.z - zeroPosition.z); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vectorsLength = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sqrt(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.pow(directionX, <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.pow(directionZ, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = (directionX / vectorsLength) * <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> y = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> z = (directionZ / vectorsLength) * <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.grabbed.body.velocity.set(x , y, z );</code> </pre></li></ol><br>  Saya memilih opsi kedua karena di dalamnya saya hanya dapat menghitung x dan z.  Dan atur sendiri, karena saya perlu membuang sepanjang busur sehingga sampah yang dibuang akan jatuh ke keranjang, meskipun pengguna memegang controller. <br><br><h2>  Beberapa kata tentang model </h2><br><img src="https://habrastorage.org/webt/vt/fl/e9/vtfle9xqpvbpak4i2su4fusxplk.png"><br><br>  Sejak awal, saya memutuskan untuk membuat game bergaya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">low-poly</a> .  Meskipun WebGL mampu menampilkan adegan yang relatif kompleks saat ini, kinerjanya masih kalah dengan perpustakaan canggih seperti DirectX, Vulkan, Mantle, dll. Itu juga semua tergantung pada kinerja perangkat pengguna.  Karena saya ingin fokus pada helm seluler BP yang lebih terjangkau (Oculus Go, Gear VR), saya pikir low-poly adalah salah satu dari sedikit solusi untuk membuat aplikasi atau game VR.  Meskipun, tentu saja, semuanya tergantung volume. <br><br>  Oke, low-poly sangat low-poly, tapi bagaimana melakukan itu semua?  Semuanya sangat sederhana, ada alat open source yang bagus - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Blender</a> .  Percayalah, ia mampu melakukan banyak hal, tetapi untuk tugas-tugas sederhana ia tidak begitu cocok.  Ada banyak materi pelatihan yang terkait dengan pemodelan di Blender dan tidak akan sulit menemukannya.  Saya hanya ingin memusatkan perhatian Anda pada sejumlah poin terkait pengembangan web: <br><br><ol><li>  Eksportir Three-js kedaluwarsa.  Perlu menemukan dan memasok <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">eksportir GLTF</a> .  GLTF adalah format khusus yang dirancang untuk web.  Dan ya, ini JSON. </li><li>  GLTF tidak mendukung Cycles Renderer, jadi Anda harus menggunakan Blender Renderer.  Dan ini berarti bahwa tidak akan ada simpul keren, transformasi warna, sorotan logam (dapat dilakukan secara berbeda). </li><li>  Anda hanya perlu mengekspor item yang dipilih.  Anda tidak perlu kamera dan lampu tambahan?  File&gt; Ekspor&gt; gltf 2.0.  Di menu sebelah kiri, Ekspor GLTF 2.0&gt; Ekspor hanya dipilih. </li><li>  Kami mulai mengekspor dari posisi &lt;0, 0, 0&gt; di Blender.  Lebih baik untuk skala di tempat yang sama, sehingga nanti Anda tidak menggunakan komponen skala dalam bingkai-a. </li><li>  Jika Anda menggambar ruang terbuka seperti di Daur Ulang!  VR, Anda perlu menambahkan objek hanya ke tempat pemain secara teoritis dapat melihat.  Di belakang, di belakang rumah, di Daur Ulang!  ada beberapa pohon dan hanya di tempat di mana pengguna dapat melihatnya.  Tidak perlu membebani tempat kejadian. </li><li>  Jika Anda perlu mengubah bahan model, Anda harus menunggu sampai memuat, dapatkan model itu sendiri, tarik semua node dari itu (GLTF berisi informasi tidak hanya tentang jerat) <br><br><pre> <code class="javascript hljs">e.detail.model.traverse(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.isMesh) { node.material.color = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Color(someColor); } });</code> </pre></li></ol><br><h2>  Kesimpulannya </h2><br>  Terima kasih atas perhatian Anda!  Saya mengingatkan Anda sekali lagi bahwa repositori proyek tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan berikut</a> .  Siapa pun yang ingin membawa sesuatu yang baru ke permainan ini - selamat datang. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id443062/">https://habr.com/ru/post/id443062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id443052/index.html">Jam tangan akurat dan cantik dari smartphone lama</a></li>
<li><a href="../id443054/index.html">Pilihan utilitas untuk programmer di Linux</a></li>
<li><a href="../id443056/index.html">Pasien HIV kedua mencapai remisi</a></li>
<li><a href="../id443058/index.html">Arsitektur bersih. Bagian I - Pendahuluan</a></li>
<li><a href="../id443060/index.html">Akankah Starship mencapai Mars?</a></li>
<li><a href="../id443064/index.html">Probe Israel terbang ke bulan</a></li>
<li><a href="../id443066/index.html">Socrates dalam cinta: yang benar-benar meletakkan dasar filsafat Barat</a></li>
<li><a href="../id443070/index.html">Tentang ide-ide prematur dan tepat waktu pada contoh saudara Gracchus</a></li>
<li><a href="../id443080/index.html">Hard drive di laptop dan desktop dapat menjadi sumber mendengarkan percakapan orang-orang terdekat</a></li>
<li><a href="../id443082/index.html">Mengapa Anda tidak melihat orang lain saat mempelajari satu bahasa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>