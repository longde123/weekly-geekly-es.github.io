<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛫 👋🏿 🤴🏿 محول JSON الخاص بك أو أكثر من ذلك بقليل حول ExpressionTrees ⚠️ 🎎 🚮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="التسلسل وإلغاء التسلسل هي عمليات نموذجية يعاملها المطور الحديث على أنها تافهة. نتواصل مع قواعد البيانات ، وننشئ طلبات HTTP ، ونستقبل البيانات من خلال ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>محول JSON الخاص بك أو أكثر من ذلك بقليل حول ExpressionTrees</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464525/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ud/qn/kd/udqnkdpyauh-0k7h5d-g_hgzrys.png"><br><br>  التسلسل وإلغاء التسلسل هي عمليات نموذجية يعاملها المطور الحديث على أنها تافهة.  نتواصل مع قواعد البيانات ، وننشئ طلبات HTTP ، ونستقبل البيانات من خلال واجهة برمجة تطبيقات REST ، وغالباً ما لا نفكر في كيفية عملها.  أقترح اليوم كتابة المسلسل و deserializer لـ JSON لمعرفة ما يوجد تحت الغطاء. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  تنصل </h2><br>  مثل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">آخر مرة</a> ، سألاحظ: سوف نكتب مسلسل بدائي ، قد يقول أحدهم ، دراجة.  إذا كنت بحاجة إلى حل جاهز ، فاستخدم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Json.NET</a> .  أصدر هؤلاء الأشخاص منتجًا رائعًا قابلاً للتخصيص بدرجة كبيرة ويمكنه فعل الكثير ويقوم <i>بالفعل بحل المشكلات</i> التي تنشأ عند العمل مع JSON.  استخدام الحل الخاص بك رائع حقًا ، ولكن فقط إذا كنت بحاجة إلى أقصى أداء أو تخصيص خاص أو إذا كنت تحب الدراجات بالطريقة التي أحبها. <br><br><h2 style=";text-align:right;direction:rtl">  مجال الموضوع </h2><br>  تتكون خدمة التحويل من JSON إلى تمثيل كائن من نظامين فرعيين على الأقل.  Deserializer هو نظام فرعي يقوم بتحويل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">JSON</a> (نص) صالح إلى تمثيل كائن داخل برنامجنا.  تتضمن عملية إلغاء التسلسل رمزية ، أي تحليل JSON إلى عناصر منطقية.  Serializer هو نظام فرعي يؤدي المهمة العكسية: يحول تمثيل الكائن للبيانات إلى JSON. <br><br>  غالبًا ما يرى المستهلك الواجهة التالية.  لقد قمت بتبسيطه عمدا لتسليط الضوء على الأساليب الرئيسية التي تستخدم في معظم الأحيان. <br><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IJsonConverter</span></span> { T Deserialize&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> json); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Serialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> source</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre> <br>  "تحت الغطاء" ، تتضمن إلغاء التسلسل رمزية (تحليل نص JSON) وبناء بعض البدائل التي تجعل من السهل إنشاء تمثيل كائن في وقت لاحق.  لأغراض التدريب ، سنقوم بتخطي بناء المواد الأولية الوسيطة (على سبيل المثال ، JObject ، JProperty من Json.NET) وسنقوم على الفور بكتابة البيانات إلى الكائن.  هذا ناقص ، لأنه يقلل من خيارات التخصيص ، لكن من المستحيل إنشاء مكتبة بأكملها في إطار مقال واحد. <br><br><h2 style=";text-align:right;direction:rtl">  tokenization </h2><br>  اسمحوا لي أن أذكرك بأن عملية الرمز المميز أو <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">التحليل المعجمي</a> هي تحليل للنص بهدف الحصول على تمثيل مختلف وأكثر دقة للبيانات الموجودة فيه.  عادةً ما يسمى هذا التمثيل <b>الرموز المميزة</b> أو الرموز المميزة.  لأغراض تحليل JSON ، يجب علينا إبراز الخصائص وقيمها ورموز بداية ونهاية البنى - أي الرموز المميزة التي يمكن تمثيلها على أنها JsonToken في الكود. <br><br>  <a href="">JsonToken</a> هو هيكل يحتوي على قيمة (نص) ، وكذلك نوع من الرمز المميز.  JSON تدوين صارم ، لذلك يمكن اختزال جميع أنواع الرموز إلى <a href="">التعداد التالي</a> .  بالطبع ، سيكون من الجيد أن تضيف إلى الرمز المميز إحداثياتها في البيانات الواردة (الصف والعمود) ، ولكن التصحيح خارج نطاق التنفيذ ، مما يعني أن JsonToken لا يحتوي على هذه البيانات. <br><br>  لذلك ، فإن أسهل طريقة لتحليل النص إلى الرموز هي قراءة كل حرف بالتتابع ومقارنته بالأنماط.  نحن بحاجة إلى فهم معنى هذا الرمز أو ذاك.  من المحتمل أن تبدأ الكلمة الأساسية (صواب ، خطأ ، خالية) مع هذا الحرف ، من الممكن أن تكون هذه هي بداية السطر (علامة اقتباس) ، أو ربما تكون هذه الشخصية بحد ذاتها رمزية ([،] ، {،}).  الفكرة العامة تبدو هكذا: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tokens = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;JsonToken&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; json.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ch = json[i]; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (ch) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'['</span></span>: tokens.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JsonToken(JsonTokenType.ArrayStart)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">']'</span></span>: tokens.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JsonToken(JsonTokenType.ArrayEnd)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'"'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> stringValue = ReadString(); tokens.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JsonToken(JsonTokenType.String, stringValue); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; ... } }</code> </pre><br>  بالنظر إلى الكود ، يبدو أنه يمكنك قراءة وفعل شيء على الفور مع بيانات القراءة.  لا تحتاج إلى تخزين ، يجب إرسالها على الفور إلى المستهلك.  وبالتالي ، يطالب IEnumerator معين ، والذي سيتم تحليل النص إلى أجزاء.  أولاً ، سيؤدي هذا إلى تقليل التخصيص ، نظرًا لأننا لسنا بحاجة إلى تخزين النتائج الوسيطة (مجموعة من الرموز المميزة).  ثانياً ، سنزيد من سرعة العمل - نعم ، في المثال الخاص بنا ، يمثل الإدخال سلسلة ، ولكن في الحالة الحقيقية ، سيتم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">استبداله بـ Stream</a> (من ملف أو شبكة) ، نقرأها بالتتابع. <br><br>  أعددت رمز <b>JsonTokenizer</b> ، والذي يمكن <a href="">العثور عليه هنا</a> .  الفكرة هي نفسها - الرمز المميز يمضي بالتتابع على طول الخط ، في محاولة لتحديد ما يشير إليه الرمز أو تسلسله.  إذا تبين أن الأمر مفهوم ، فسننشئ عنصر تحكم مميز ونقله إلى المستهلك.  إذا لم يكن الأمر واضحًا بعد ، فاقرأ. <br><br><h2 style=";text-align:right;direction:rtl">  التحضير لإلغاء تسلسل الكائنات </h2><br>  غالبًا ما يكون طلب تحويل البيانات من JSON عبارة عن استدعاء لطريقة Deserialize العامة ، حيث <b>TOUT</b> هو نوع البيانات الذي يجب تعيين الرموز المميزة JSON به.  حيث <a href="">Type</a> : حان الوقت لتطبيق <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Reflection</a> و <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ExpressionTrees</a> .  أساسيات العمل مع ExpressionTrees ، وكذلك لماذا تعد التعبيرات المترجمة أفضل من الانعكاس "العاري" ، لقد وصفت في مقالة سابقة حول <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">كيفية عمل AutoMapper</a> .  إذا كنت لا تعرف أي شيء عن Expression.Labmda.Compile () - أوصي بقراءته.  يبدو لي ، على سبيل المثال من مخطط الخرائط ، أنه تبين بشكل مفهوم. <br><br>  لذلك ، تستند خطة إنشاء deserializer كائن إلى معرفة أنه يمكننا الحصول على أنواع الخصائص من نوع TOut في أي وقت ، أي مجموعة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PropertyInfo</a> .  في الوقت نفسه ، يتم تحديد أنواع الممتلكات بترميز JSON: الأرقام والسلاسل والمصفوفات والكائنات.  حتى لو لم ننسَ لاغية ، فليس هذا كثيرًا كما يبدو للوهلة الأولى.  وإذا كان لكل نوع بدائي ، فسنضطر إلى إنشاء مصمم منفصل ، ثم بالنسبة للصفائف والأشياء ، يمكننا تكوين فصول عامة.  إذا كنت تعتقد قليلاً ، فيمكن تخفيض كل المتسللين (أو <b>المحولات</b> ) إلى الواجهة التالية: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IJsonConverter</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Deserialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">JsonTokenizer tokenizer</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Serialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span><span class="hljs-function"><span class="hljs-params">, StringBuilder builder</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre><br>  تعتبر شفرة المحول المكتوب بقوة للأنواع البدائية بسيطة قدر الإمكان: نقوم باستخراج JsonToken الحالي من الرمز المميز ونحوله إلى قيمة عن طريق التحليل.  على سبيل المثال ، float.Parse (currentToken.Value).  نلقي نظرة على <a href="">BoolConverter</a> أو <a href="">FloatConverter</a> - لا شيء معقد.  بعد ذلك ، إذا كنت بحاجة إلى deserializer عن منطقي؟  أو تطفو؟ ، ويمكن أيضا أن تضاف. <br><br><h2 style=";text-align:right;direction:rtl">  صف التسلسل </h2><br>  <a href="">شفرة الفئة العامة</a> لتحويل صفيف من JSON هي أيضًا بسيطة نسبيًا.  يتم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تحديدها</a> حسب نوع العنصر الذي يمكننا استخراج <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Type.GetElementType ()</a> .  تحديد أن نوعًا ما هو صفيف أمر بسيط أيضًا: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Type.IsArray</a> .  يأتي إلغاء تسلسل الصفيف إلى رمز tokenizer.MoveNext () حتى يتم الوصول إلى رمز نوع ArrayEnd.  إن إلغاء تسلسل عناصر الصفيف هو إلغاء تسلسل نوع عنصر الصفيف ، وبالتالي ، عند إنشاء ArrayConverter ، يتم تمرير عنصر إلغاء تسلسل العنصر إليه. <br><br>  في بعض الأحيان توجد صعوبات في إنشاء مثيل للتطبيقات العامة ، لذلك سوف أخبرك على الفور بكيفية القيام بذلك.  يسمح لك الانعكاس بإنشاء أنواع عامة في الوقت الفعلي ، مما يعني أنه يمكننا استخدام النوع الذي تم إنشاؤه كوسيطة لـ Activator.CreateInstance.  استفد من هذا: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">Type elementType = arrayType.GetElementType(); Type converterType = <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(ArrayConverter&lt;&gt;).MakeGenericType(elementType); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> converterInstance = Activator.CreateInstance(converterType, <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[] args);</code> </pre><br>  عند الانتهاء من الاستعدادات لإنشاء <a href="">مصمم إزالة</a> الكائنات ، يمكنك وضع كل رمز البنية التحتية المرتبطة بإنشاء وتخزين مواد <a href="">إزالة الملوثات</a> في واجهة <a href="">JConverter</a> .  سيكون مسؤولاً عن جميع عمليات التسلسل وإلغاء التسلسل JSON وهو متاح للمستهلكين كخدمة. <br><br><h2 style=";text-align:right;direction:rtl">  إلغاء تسلسل الأشياء </h2><br>  اسمحوا لي أن أذكرك أنه يمكنك الحصول على جميع خصائص النوع T مثل هذا: typeof (T) .GetProperties ().  لكل خاصية ، يمكنك استخراج <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PropertyInfo.PropertyType</a> ، مما سيتيح لنا الفرصة لإنشاء IJsonConverter مكتوب لتسلسل البيانات وإلغاء تسلسلها من نوع معين.  إذا كان نوع العقار عبارة عن صفيف ، فإننا نقوم بإنشاء مثيل لـ ArrayConverter أو العثور على واحد مناسب من بين الموجودات الحالية.  إذا كان نوع الخاصية نوعًا بدائيًا ، فسيتم بالفعل إنشاء مُزيلات (محولات) لهم في مُنشئ JConverter. <br><br>  يمكن عرض الكود الناتج في <a href="">ObjectConverter من</a> الفئة العامة.  يتم إنشاء المنشط في المنشئ الخاص به ، ويتم استخراج الخصائص من قاموس مُعد خصيصًا ، ويتم إنشاء طريقة لإزالة التسلسل لكل منها - الإجراء &lt;TObject ، JsonTokenizer&gt;.  هناك حاجة ، أولاً ، من أجل ربط IJsonConverter على الفور بالخاصية المطلوبة ، وثانياً ، لتجنب الملاكمة عند استخراج الأنواع البدائية وكتابتها.  تعرف كل طريقة لإلغاء التسلسل عن خاصية الكائن الصادر التي سيتم تسجيلها ، ويتم إلغاء كتابة القيمة بدقة وإرجاع القيمة بالضبط في النموذج المطلوب. <br><br>  الربط من IJsonConverter إلى خاصية كما يلي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">Type converterType = propertyValueConverter.GetType(); ConstantExpression Expression.Constant(propertyValueConverter, converterType); MethodInfo deserializeMethod = converterType.GetMethod(<span class="hljs-string"><span class="hljs-string">"Deserialize"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = Expression.Call(converter, deserializeMethod, tokenizer);</code> </pre><br>  يتم إنشاء ثابت <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Expression.Constant</a> مباشرة في التعبير ، الذي يخزن مرجعًا إلى مثيل deserializer لقيمة الخاصية.  هذا ليس بالضبط الثابت الذي نكتبه في "C # العادية" ، لأنه يمكن تخزين نوع مرجعي.  بعد ذلك ، يتم استرداد أسلوب Deserialize من نوع deserializer ، والذي يُرجع قيمة النوع المطلوب ، ثم يطلق عليه - <a href="">Expression.Call</a> .  وبالتالي ، نحصل على طريقة تعرف بالضبط أين وماذا نكتب.  يبقى وضعه في القاموس والاتصال به عندما يظهر رمز مميز من نوع الخاصية بالاسم المطلوب من الرمز المميز.  ميزة أخرى هي أن كل شيء يعمل بسرعة كبيرة. <br><br><h2 style=";text-align:right;direction:rtl">  كيف سريع </h2><br>  الدراجات ، كما لوحظ في البداية ، من المنطقي أن تكتب في عدة حالات: إذا كانت هذه محاولة لفهم كيفية عمل التكنولوجيا ، أو تحتاج إلى تحقيق بعض النتائج الخاصة.  على سبيل المثال ، السرعة.  يمكنك التأكد من أن deserializer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">يلغي</a> حقًا <a href="">الاختبارات</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المجهزة</a> (استخدم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">AutoFixture</a> للحصول على بيانات الاختبار).  بالمناسبة ، ربما لاحظت أنني كتبت أيضًا تسلسل الكائنات.  لكن بما أن المقالة اتضح أنها كبيرة جدًا ، فلن أصفها ، بل سأعطيها مقاييس.  نعم ، تمامًا كما في المقالة السابقة ، كتبت مقاييس باستخدام مكتبة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">BenchmarkDotNet</a> . <br><br>  بالطبع ، <a href="">قارنت</a> سرعة إلغاء التسلسل مع Newtonsoft (Json.NET) ، باعتباره الحل الأكثر شيوعًا والموصى به للعمل مع JSON.  علاوة على ذلك ، مباشرة على موقعه على شبكة الإنترنت: هو مكتوب: 50 ٪ أسرع من DataContractJsonSerializer ، و 250 ٪ أسرع من JavaScriptSerializer.  باختصار ، أردت أن أعرف كم ستفقد شفرتي.  لقد فاجأتني النتائج: لاحظ أن تخصيص البيانات أقل بثلاث مرات تقريبًا ، ومعدل إلغاء التسلسل أسرع مرتين تقريبًا. <br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  طريقة </th><th>  متوسط </th><th>  خطأ </th><th>  StdDev </th><th>  نسبة </th><th>  تخصيص </th></tr></thead><tbody><tr><td>  Newtonsoft </td><td>  75.39 مللي ثانية </td><td>  0.3027 مللي ثانية </td><td>  0.2364 مللي ثانية </td><td>  1.00 </td><td>  35.47 ميغابايت </td></tr><tr><td>  فيلو </td><td>  31.78 مللي ثانية </td><td>  0.1135 مللي ثانية </td><td>  0.1062 مللي ثانية </td><td>  0.42 </td><td>  12.36 ميغابايت </td></tr></tbody></table></div><br>  أسفرت مقارنة السرعة والتخصيص <a href="">أثناء تسلسل البيانات</a> عن نتائج أكثر إثارة للاهتمام.  اتضح أن مسلسل الدراجة خصص خمس مرات تقريبًا وعمل بشكل أسرع ثلاث مرات تقريبًا.  إذا كانت السرعة تضايقني حقًا (كثيرًا) ، فسيكون ذلك نجاحًا واضحًا. <br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  طريقة </th><th>  متوسط </th><th>  خطأ </th><th>  StdDev </th><th>  نسبة </th><th>  تخصيص </th></tr></thead><tbody><tr><td>  Newtonsoft </td><td>  54.83 مللي ثانية </td><td>  0.5582 مللي ثانية </td><td>  0.5222 مللي ثانية </td><td>  1.00 </td><td>  25.44 ميغابايت </td></tr><tr><td>  فيلو </td><td>  20.66 مللي ثانية </td><td>  0.0484 مللي ثانية </td><td>  0.0429 مللي ثانية </td><td>  0.38 </td><td>  5.93 ميغابايت </td></tr></tbody></table></div><br>  نعم ، عند قياس السرعة ، لم أستخدم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">التلميحات لزيادة الإنتاجية</a> المنشورة على موقع Json.NET الإلكتروني.  أخذت قياسات من خارج الصندوق ، أي وفقًا للسيناريو الأكثر شيوعًا: JsonConvert.DeserializeObject.  قد تكون هناك طرق أخرى لتحسين الأداء ، لكنني لا أعرف عنها. <br><br><h2 style=";text-align:right;direction:rtl">  النتائج </h2><br>  على الرغم من السرعة العالية نسبيًا للتسلسل وإلغاء التسلسل ، لا أوصي بالتخلي عن Json.NET لصالح الحل الخاص بي.  يتم احتساب الزيادة في السرعة بالميلي ثانية ، وهي "تغرق" بسهولة في تأخيرات الشبكة أو القرص أو الكود ، والتي توجد بشكل هرمي أعلى المكان الذي يتم فيه تطبيق التسلسل.  دعم مثل هذه الحلول الاحتكارية هو الجحيم ، حيث لا يُسمح إلا للمطورين الذين لديهم معرفة جيدة بالموضوع. <br><br>  نطاق هذه الدراجات هو التطبيقات المصممة بالكامل بهدف الحصول على أداء عالي ، أو مشاريع الحيوانات الأليفة حيث تفهم كيف تعمل هذه التقنية أو تلك.  آمل أن أكون قد ساعدتكم قليلاً في كل هذا. <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar464525/">https://habr.com/ru/post/ar464525/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar464511/index.html">كيفية جمع مجموعات المستخدمين في شكل رسوم بيانية في Grafana [+ صورة عامل ميناء مع مثال]</a></li>
<li><a href="../ar464513/index.html">واق من المطر: محول من تصميم XD</a></li>
<li><a href="../ar464515/index.html">كيفية جعل رسائل البريد الإلكتروني وليس الفوضى: نصائح عملية</a></li>
<li><a href="../ar464517/index.html">بطاقات كوبا الجديدة</a></li>
<li><a href="../ar464523/index.html">أنظمة الدفع (PSP) لتكنولوجيا المعلومات: نحن نلعب بشكل كبير</a></li>
<li><a href="../ar464529/index.html">للإعلان السياقي بأسماء المنافسين يمكن الآن تغريم 500000 روبل</a></li>
<li><a href="../ar464535/index.html">التفاصيل على الجهاز ووظائف السكوتر الكهربائي KickScooter T60</a></li>
<li><a href="../ar464537/index.html">اردوينو DIY شيطاني دائري</a></li>
<li><a href="../ar464539/index.html">الدراسات السريرية. كيفية الوصول إلى المجموعة التجريبية ، والحصول على علاج مجاني للسرطان ومساعدة العلم</a></li>
<li><a href="../ar464543/index.html">ما هو وما هو ليس في الذهاب. الجزء 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>