<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏿‍🤝‍🧑🏿 🚷 🕓 Conteneurs pour adultes (partie 03): 10 choses que vous n'avez pas besoin de faire avec des conteneurs 😯 📿 💭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous vous êtes finalement rendu à la merci des conteneurs et vous avez constaté qu'ils résolvent beaucoup de problèmes et présentent de nombreux avant...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Conteneurs pour adultes (partie 03): 10 choses que vous n'avez pas besoin de faire avec des conteneurs</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/421663/">  Vous vous êtes finalement rendu à la merci des conteneurs et vous avez constaté qu'ils résolvent beaucoup de problèmes et présentent de nombreux avantages: <br><br><ol><li>  Les conteneurs sont immuables: OS, bibliothèques, dossiers et applications - puisque tout cela est stocké directement dans le conteneur, vous êtes sûr à 100% que l'image testée en QA ira toujours en production.  Et cela fonctionnera exactement de la même manière. </li><li>  Conteneurs légers: Un conteneur ne perd pas de mémoire.  Au lieu de centaines de mégaoctets et gigaoctets, un conteneur n'a besoin que de mémoire pour le processus principal. </li><li>  Les conteneurs sont rapides: un conteneur démarre aussi rapidement qu'un processus Linux normal.  Pas des minutes, mais littéralement des secondes. </li></ol><br><img src="https://habrastorage.org/webt/kn/kz/0i/knkz0i3sesbhdq0nj4xvb8jxvsq.png" width="100%"><br><br>  Cependant, beaucoup croient encore que les conteneurs sont des machines virtuelles et oublient leur propriété la plus importante ... <br><a name="habracut"></a><br><h3>  Conteneurs éphémères </h3><br>  La jetabilité est la raison pour laquelle vous devriez changer votre approche sur la façon de manipuler les conteneurs. <br><br>  <b>Et voici ce qu'il ne faut en aucun cas faire pour ne pas perdre les avantages des conteneurs:</b> <br><br>  <b>1. Pas besoin de stocker des données à l'intérieur du conteneur.</b>  Pendant le cycle de vie, les conteneurs peuvent être suspendus, détruits, remplacés.  Si l'application s'exécute dans un conteneur, la version 1.0 de cette application devrait facilement passer à la version 1.1 sans perte de données et autres problèmes.  Par conséquent, si vous souhaitez enregistrer des données, elles doivent être écrites dessus.  Cependant, vous devez alors vous assurer que les deux conteneurs n'écrivent pas au même endroit afin de ne pas endommager les données.  Vérifiez donc que les applications écrivent correctement les données sur le stockage partagé. <br><br>  <b>2. Pas besoin de fractionner la livraison des applications.</b>  Certaines personnes pensent qu'un conteneur est la même machine virtuelle.  Et la plupart d'entre eux pensent que les applications doivent être déployées dans des conteneurs existants.  En fait, cela est également possible, en particulier dans la phase de développement, lorsque le débogage et le déploiement sont constants.  Mais ils ne doivent saisir le CD-ROM de livraison continue pour transfert au service AQ ou production que dans le cadre de leur propre image.  N'oubliez pas: les conteneurs sont inébranlables. <br><br>  <b>3. Pas besoin de créer de grandes images.</b>  Une grande image est plus difficile à diffuser.  Par conséquent, l'image ne doit inclure que les fichiers et les bibliothèques qui sont vraiment nécessaires pour démarrer le processus de demande.  Pas besoin d'installer des packages inutiles ou d'exécuter des mises à jour (mise à jour yum), qui créent une nouvelle couche dans l'image et y écrivent beaucoup de fichiers. <br><br>  <b>4. N'utilisez pas de conteneurs à une seule couche.</b>  Pour utiliser efficacement les systèmes de fichiers multicouches (multiniveaux), créez toujours des couches distinctes pour le système d'exploitation, pour la définition du nom d'utilisateur, pour la configuration et, enfin, pour l'application elle-même.  Il sera donc plus facile de recréer, de maintenir et de distribuer des images. <br><br>  <b>5. Pas besoin de créer des images à partir de conteneurs en cours d'exécution.</b>  En d'autres termes, n'utilisez pas la commande docker commit pour créer une image, car ces images ne seront pas reproductibles.  À la place, utilisez toujours un Dockerfile ou d'autres outils S2I (source-à-image) qui offrent une reproductibilité.  De plus, dans Dockerfile, vous pouvez facilement suivre les modifications si vous les stockez dans le référentiel source (git). <br><br>  <b>6. Pas besoin d'utiliser uniquement la dernière balise.</b>  Cette balise est quelque chose comme INSTANTANÉ pour les utilisateurs de Maven.  En raison de la nature multicouche du système de fichiers conteneur, les balises sont très utiles.  Cependant, vous pouvez vous attendre à une surprise désagréable lorsque, par exemple, après une pause de plusieurs mois, vous décidez de collecter une image et constatez soudainement que l'application ne démarre plus car la couche parent (FROM dans le langage Dockerfile) a été remplacée par une nouvelle version qui ne prend pas en charge la compatibilité descendante.  Ou parce que la mauvaise version a été récupérée du cache de génération que vous attendiez.  En outre, la dernière balise doit également être évitée lors du déploiement de conteneurs en production, car vous ne pourrez pas suivre la version de l'image qui est lancée. <br><br>  <b>7. Pas besoin d'exécuter plus d'un processus dans un conteneur.</b>  Les conteneurs sont parfaitement adaptés à un seul processus (démon http daemon, serveur d'applications, SGBD).  Sinon, vous pouvez rencontrer toutes sortes de problèmes, tels que creuser dans les journaux ou mettre à jour les processus séparément. <br><br>  <b>8. Pas besoin de stocker les informations d'identification dans une image - utilisez des variables d'environnement pour cela.</b>  Ne prescrire aucun identifiant et mot de passe dans l'image.  Utilisez plutôt des variables d'environnement pour extraire les données pertinentes de sources externes au conteneur.  L'image Postgres est un excellent exemple de la façon de procéder correctement. <br><br>  <b>9. Pas besoin d'exécuter des processus en tant que root.</b>  «Par défaut, les conteneurs Docker s'exécutent en tant que root.  (...) Cependant, à mesure que la technologie évolue, d'autres options de démarrage par défaut plus sûres peuvent apparaître.  Dans les conditions actuelles, l'exigence racine peut être considérée comme une menace et peut ne pas être fournie dans tous les environnements.  Pour spécifier un utilisateur autre que root, pour le compte duquel le conteneur sera lancé, la directive USER est utilisée »(Extrait de Guidance for Docker Image Authors) <br><br>  <b>10. Pas besoin de se fier aux adresses IP.</b>  Chaque conteneur a sa propre adresse IP interne, qui peut changer après le redémarrage du conteneur.  Si l'application ou le microservice doit communiquer avec un autre conteneur, utilisez des variables d'environnement pour transférer le nom d'hôte souhaité vers le numéro de port d'un conteneur à un autre. <br>  Tu te souviens?  Vous pouvez désormais l'utiliser en toute sécurité.  Et des conseils pratiques pour l'utilisation des conteneurs peuvent être trouvés sur notre blog. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr421663/">https://habr.com/ru/post/fr421663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr421649/index.html">«Top 3D Expo. Digital Education 2018 »21 septembre au Technopolis Moscou</a></li>
<li><a href="../fr421653/index.html">Aperçu et dispositif des compteurs électriques modernes</a></li>
<li><a href="../fr421655/index.html">Ingénieurs Jetpack: Alexander Fedorovich Andreev</a></li>
<li><a href="../fr421657/index.html">Croissance continue JSON</a></li>
<li><a href="../fr421659/index.html">Comment Microsoft a oublié la moitié du monde ou lu des messages d'erreur</a></li>
<li><a href="../fr421665/index.html">Android Jetpack: transformer des applications en fusées</a></li>
<li><a href="../fr421667/index.html">CJM Meetup in MegaFon - comment c'était et de quoi nous avons parlé (reportages vidéo)</a></li>
<li><a href="../fr421669/index.html">Le tribunal a interdit la distribution gratuite de fichiers CAO de qualité militaire, de sorte que le créateur a commencé à les vendre</a></li>
<li><a href="../fr421671/index.html">Cinq nanotechnologies de la nature qui peuvent nous inspirer de nouveaux développements</a></li>
<li><a href="../fr421675/index.html">Enfin, il y avait un problème que seuls les ordinateurs quantiques peuvent résoudre</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>