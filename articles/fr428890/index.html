<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§úüèæ ‚ôâÔ∏è üë©üèΩ‚Äçüíª Toute la v√©rit√© sur RTOS. Article # 18. Groupes d'indicateurs d'√©v√©nements: services d'assistance et structures de donn√©es üèπ üçé üëçüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article continue de d√©crire les groupes d'indicateurs d'√©v√©nements. 

 Articles pr√©c√©dents de la s√©rie: 

 Article # 17. Groupes de drapeaux d'√©v√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Toute la v√©rit√© sur RTOS. Article # 18. Groupes d'indicateurs d'√©v√©nements: services d'assistance et structures de donn√©es</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428890/"><img src="https://habrastorage.org/webt/uv/-u/8d/uv-u8dltglarzrr6lq6czxprtnk.jpeg"><br><br>  Cet article continue de d√©crire les groupes d'indicateurs d'√©v√©nements. <br><br>  Articles pr√©c√©dents de la s√©rie: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 17.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Groupes de drapeaux d'√©v√©nements: introduction et services de base</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 16.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Signaux</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 15.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partitions de m√©moire: services et structures de donn√©es</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 14.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sections de m√©moire: introduction et services de base</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 13.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Structures de donn√©es de t√¢che et appels d'API non pris en charge</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 12.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Services pour travailler avec des t√¢ches</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 11.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√¢ches: configuration et introduction √† l'API</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 10.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scheduler: fonctionnalit√©s avanc√©es et pr√©servation du contexte</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 9.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scheduler: impl√©mentation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 8.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nucleus SE: conception interne et d√©ploiement</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 7.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nucleus SE: Introduction</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Autres services RTOS</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Interaction et synchronisation des t√¢ches</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√¢ches, changement de contexte et interruptions</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√¢ches et planification</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RTOS: Structure et mode temps r√©el</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RTOS: introduction.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a> <br><a name="habracut"></a><br><h2>  Services d'assistance pour les groupes de drapeaux d'√©v√©nements </h2><br>  Nucleus RTOS dispose de trois appels d'API qui fournissent des fonctions d'assistance pour les groupes d'indicateurs d'√©v√©nements: r√©cup√©ration des informations de groupe, r√©cup√©ration des informations sur le nombre de groupes d'indicateurs d'√©v√©nements dans une application et r√©cup√©ration de pointeurs vers tous les groupes d'indicateurs d'√©v√©nements.  Les deux premiers d√©fis sont impl√©ment√©s dans Nucleus SE. <br><br><h3>  R√©cup√©ration des informations du groupe d'indicateurs d'√©v√©nements </h3><br>  Cet appel d'utilitaire renvoie des informations sur le groupe d'indicateurs d'√©v√©nements.  L'impl√©mentation de cet appel dans Nucleus SE diff√®re de l'impl√©mentation dans Nucleus RTOS en ce que moins d'informations sont renvoy√©es, car la d√©nomination d'objet et l'ordre de pause de t√¢che ne sont pas pris en charge, et la pause de t√¢che elle-m√™me peut √™tre d√©sactiv√©e. <br><br>  <b><i>Un appel pour r√©cup√©rer des informations sur le groupe d'√©v√©nements dans Nucleus RTOS</i></b> <br>  Prototype d'appel de service: <br>  <b>STATUS NU_Event_Group_Information (groupe NU_EVENT_GROUP *, nom CHAR *, UNSIGNED * event_flags, UNSIGNED * tasks_waiting, NU_TASK ** first_task);</b> <br><br>  Param√®tres: <br>  <b>group</b> - un pointeur vers un bloc de contr√¥le fourni par l'utilisateur pour un groupe de drapeaux d'√©v√©nements; <br>  <b>nom</b> - un pointeur vers la r√©gion √† 8 caract√®res pour le nom du groupe de drapeaux d'√©v√©nements, cela inclut √©galement le z√©ro de fin; <br>  <b>event_flags</b> - pointeur vers une variable qui prendra la valeur actuelle du groupe sp√©cifi√© de drapeaux d'√©v√©nements; <br>  <b>tasks_waiting</b> - un pointeur sur une variable qui prendra le nombre de t√¢ches suspendues dans ce groupe de drapeaux d'√©v√©nements; <br>  <b>first_task</b> - un pointeur vers une variable de type <b>NU_TASK</b> , qui prendra un pointeur vers la premi√®re t√¢che suspendue. <br><br>  Valeur de retour: <br>  <b>NU_SUCCESS</b> - l'appel s'est termin√© avec succ√®s; <br>  <b>NU_INVALID_GROUP</b> - pointeur non valide vers un groupe d'indicateurs d'√©v√©nements. <br><br>  <b><i>Un appel pour r√©cup√©rer des informations sur le groupe d'√©v√©nements dans Nucleus SE</i></b> <br>  Cet appel prend en charge la fonctionnalit√© principale de l'API RTOS Nucleus. <br><br>  Prototype d'appel de service: <br>  <b>STATUS NUSE_Event_Group_Information (groupe NUSE_EVENT_GROUP, U8 * event_flags, U8 * tasks_waiting, NUSE_TASK * first_task);</b> <br><br>  Param√®tres: <br>  <b>group</b> - l'index du groupe de drapeaux d'√©v√©nements pour lesquels des informations sont demand√©es; <br>  <b>event_flags</b> - pointeur vers une variable qui prendra la valeur actuelle du groupe sp√©cifi√© de drapeaux d'√©v√©nements; <br>  <b>tasks_waiting</b> - un pointeur sur une variable qui prendra le nombre de t√¢ches suspendues dans ce groupe d'indicateurs d'√©v√©nements (rien n'est retourn√© si la suspension des t√¢ches est d√©sactiv√©e); <br>  <b>first_task</b> - un pointeur vers une variable de type <b>NUSE_TASK</b> , qui prendra l'index de la premi√®re t√¢che suspendue (rien n'est retourn√© si la suspension des t√¢ches est d√©sactiv√©e). <br><br>  Valeur de retour: <br>  <b>NUSE_SUCCESS</b> - l'appel s'est termin√© avec succ√®s; <br>  <b>NUSE_INVALID_GROUP</b> - index de groupe d'indicateurs d'√©v√©nements non valide. <br><br>  <b><i>Impl√©mentation des informations sur les groupes d'√©v√©nements dans Nucleus SE</i></b> <br>  L'impl√©mentation de cet appel d'API est assez simple: <br><br><pre><code class="hljs pgsql">*event_flags = NUSE_Event_Group_Data[<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>]; #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> NUSE_BLOCKING_ENABLE *tasks_waiting = NUSE_Event_Group_Blocking_Count[<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (NUSE_Event_Group_Blocking_Count[<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>] != <span class="hljs-number"><span class="hljs-number">0</span></span>) { U8 <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>&lt;NUSE_TASK_NUMBER; <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((LONIB(NUSE_Task_Status[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>]) == NUSE_EVENT_SUSPEND) &amp;&amp; (HINIB(NUSE_Task_Status[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>]) == <span class="hljs-keyword"><span class="hljs-keyword">group</span></span>)) { *first_task = <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>; break; } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { *first_task = <span class="hljs-number"><span class="hljs-number">0</span></span>; } #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> *tasks_waiting = <span class="hljs-number"><span class="hljs-number">0</span></span>; *first_task = <span class="hljs-number"><span class="hljs-number">0</span></span>; #endif <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NUSE_SUCCESS;</code> </pre> <br>  La fonction renvoie la valeur du groupe de drapeaux d'√©v√©nements.  Ensuite, si les appels d'API bloquant les t√¢ches sont activ√©s, le nombre de t√¢ches en attente et l'index du premier d'entre eux sont renvoy√©s (sinon, ces deux param√®tres sont d√©finis sur z√©ro). <br><br><h3>  Obtention du nombre de groupes de drapeaux d'√©v√©nements </h3><br>  Cet appel d'utilitaire renvoie le nombre de groupes d'indicateurs d'√©v√©nements dans l'application.  Dans Nucleus RTOS, cette valeur change avec le temps et la valeur de retour indique le nombre actuel de groupes, tandis que dans Nucleus SE, cette valeur est d√©termin√©e lors de l'assemblage et ne change pas avec le temps. <br><br>  <b><i>Appel du compteur de groupes de drapeaux d'√©v√©nements dans Nucleus RTOS</i></b> <br>  Prototype d'appel de service: <br>  <b>UNSIGNED NU_Establised_Event_Groups (VOID);</b> <br><br>  Param√®tres: <br>  Sont absents. <br><br>  Valeur de retour: <br>  Nombre actuel de groupes d'indicateurs d'√©v√©nements cr√©√©s. <br><br>  <b><i>Appel du compteur de groupes de drapeaux d'√©v√©nements dans Nucleus SE</i></b> <br>  Prototype d'appel de service: <br>  <b>U8 NUSE_Event_Group_Count (void);</b> <br><br>  Param√®tres: <br>  Sont absents. <br><br>  Valeur de retour: <br>  Nombre de groupes d'indicateurs d'√©v√©nements configur√©s. <br><br>  <b><i>Impl√©mentation d'un compteur de groupes d'indicateurs d'√©v√©nements dans Nucleus SE</i></b> <br>  L'impl√©mentation de cet appel API est assez banale: la valeur du symbole <b>#define</b> <b>NUSE_EVENT_GROUP_NUMBER</b> est <b>retourn√©e</b> . <br><br><h2>  Structures de donn√©es </h2><br>  Comme tous les autres objets Nucleus SE, les groupes d'indicateurs d'√©v√©nements utilisent un ou deux tableaux de structures de donn√©es (les deux sont situ√©s dans la RAM), la taille des tableaux d√©pend du nombre de groupes d√©finis dans les param√®tres. <br><br>  Je recommande fortement que le code d'application n'utilise pas un acc√®s direct √† ces structures de donn√©es, mais s'y r√©f√®re via les fonctions API fournies.  Cela √©vitera l'incompatibilit√© avec les futures versions de Nucleus SE et les effets secondaires ind√©sirables, ainsi que simplifiera le portage de l'application vers Nucleus RTOS.  Pour une meilleure compr√©hension du code d'appel de service et du d√©bogage, un aper√ßu d√©taill√© des structures de donn√©es est fourni ci-dessous. <br><br><h3>  Donn√©es RAM </h3><br>  Ces donn√©es ont la structure suivante: <br>  <b>NUSE_Event_Group_Data []</b> - un tableau de donn√©es de type <b>U8</b> ayant un enregistrement pour chaque groupe de drapeaux configur√©;  il stocke les donn√©es d'indicateur d'√©v√©nement. <br>  <b>NUSE_Event_Group_Blocking_Count []</b> - un tableau de type <b>U8</b> contenant un compteur de t√¢ches bloqu√©es dans chaque groupe d'indicateurs d'√©v√©nements.  Ce tableau existe uniquement lorsque la fonctionnalit√© de verrouillage dans l'API est activ√©e. <br><br>  Ces structures de donn√©es sont initialis√©es avec des z√©ros dans la fonction <b>NUSE_Init_Event_Group () au</b> d√©marrage de Nucleus SE.  L'un des articles suivants fournira une description compl√®te des proc√©dures de d√©marrage de Nucleus SE. <br><br>  Voici une description de ces structures de donn√©es dans le fichier <b>nuse_init.c</b> : <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">RAM</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">U8</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">NUSE_Event_Group_Data</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[NUSE_EVENT_GROUP_NUMBER]</span></span>; <span class="hljs-selector-id"><span class="hljs-selector-id">#if</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">NUSE_BLOCKING_ENABLE</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">RAM</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">U8</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">NUSE_Event_Group_Blocking_Count</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[NUSE_EVENT_GROUP_NUMBER]</span></span>; <span class="hljs-selector-id"><span class="hljs-selector-id">#endif</span></span></code> </pre><br><h3>  Donn√©es ROM </h3><br>  Pour impl√©menter des groupes d'indicateurs d'√©v√©nements, les donn√©es de la ROM ne sont pas utilis√©es. <br><br><h3>  Taille de la m√©moire pour les groupes d'indicateurs d'√©v√©nements </h3><br>  Comme pour tous les objets du noyau Nucleus SE, la quantit√© de m√©moire requise pour les groupes d'indicateurs d'√©v√©nements est pr√©visible. <br><br>  La quantit√© de donn√©es dans la ROM pour tous les groupes d'indicateurs d'√©v√©nements dans l'application est 0. <br><br>  La quantit√© de m√©moire en RAM pour tous les groupes d'indicateurs d'√©v√©nements avec la fonctionnalit√© de verrouillage d'API activ√©e est <b>NUSE_EVENT_GROUP_NUMBER * 2</b> . <br><br>  Sinon, c'est <b>NUSE_EVENT_GROUP_NUMBER</b> . <br><br><h2>  Appels d'API non r√©alis√©s </h2><br>  Trois appels d'API pour les groupes d'indicateurs d'√©v√©nements qui peuvent √™tre trouv√©s dans Nucleus RTOS n'ont pas √©t√© impl√©ment√©s dans Nucleus SE. <br><br><h3>  Cr√©ation d'un groupe d'indicateurs d'√©v√©nements </h3><br>  Cet appel d'API cr√©e un groupe d'indicateurs d'√©v√©nements.  Nucleus SE n'a pas besoin de cet appel car les groupes d'indicateurs d'√©v√©nements sont cr√©√©s statiquement. <br><br>  Prototype d'appel de service: <br>  <b>STATUS NU_Create_Event_Group (groupe NU_EVENT_GROUP *, nom CHAR *);</b> <br><br>  Param√®tres: <br><br>  <b>group</b> - un pointeur vers un bloc de contr√¥le fourni par l'utilisateur pour un groupe de drapeaux d'√©v√©nements;  Utilis√© comme descripteur pour g√©rer des groupes d'indicateurs d'√©v√©nements dans d'autres appels d'API <br>  <b>nom</b> - un pointeur sur le nom √† 8 caract√®res du groupe de drapeaux d'√©v√©nements avec un octet nul de fin inclus dans cette zone. <br><br>  Valeur de retour: <br><br>  <b>NU_SUCCESS</b> - l'appel s'est termin√© avec succ√®s; <br>  <b>NU_INVALID_GROUP</b> - pointeur nul vers l'unit√© de contr√¥le du groupe d'indicateurs d'√©v√©nements ( <b>NULL</b> ) ou d√©j√† utilis√©. <br><br><h3>  Suppression d'un groupe de drapeaux d'√©v√©nements </h3><br>  Cet appel d'API supprime le groupe d'indicateurs d'√©v√©nements cr√©√© pr√©c√©demment.  Nucleus SE n'a pas besoin de cet appel car les groupes d'indicateurs d'√©v√©nements sont cr√©√©s statiquement et ne peuvent pas √™tre supprim√©s. <br><br>  Prototype d'appel de service: <br><br>  <b>STATUS NU_Delete_Event_Group (groupe NU_EVENT_GROUP *);</b> <br><br>  Param√®tres: <br><br>  <b>group</b> - un pointeur vers le bloc de contr√¥le du groupe de drapeaux d'√©v√©nements. <br><br>  Valeur de retour: <br><br>  <b>NU_SUCCESS</b> - l'appel s'est termin√© avec succ√®s; <br>  <b>NU_INVALID_GROUP</b> - pointeur non valide vers un groupe d'indicateurs d'√©v√©nements. <br><br><h3>  Pointeurs de groupes de drapeaux d'√©v√©nements </h3><br>  Cet appel d'API constitue une liste s√©quentielle de pointeurs vers tous les groupes d'indicateurs d'√©v√©nements du syst√®me.  Nucleus SE n'a pas besoin de cet appel car les groupes d'indicateurs d'√©v√©nements ont des index simples, pas des pointeurs. <br><br>  Prototype d'appel de service: <br><br>  <b>UNSIGNED NU_Event_Group_Pointers (NU_EVENT_GROUP * pointer_list, UNSIGNED maximum_pointers);</b> <br><br>  Param√®tres: <br><br>  <b>pointer_list</b> - un pointeur vers un tableau de pointeurs <b>NU_EVENT_GROUP</b> , ce tableau est rempli de pointeurs vers des groupes de drapeaux d'√©v√©nements cr√©√©s dans le syst√®me; <br>  <b>maximum_pointers</b> - le nombre maximum de pointeurs dans le tableau. <br><br>  Valeur de retour: <br><br>  Nombre de pointeurs <b>NU_EVENT_GROUP</b> dans le tableau. <br><br><h2>  Compatible avec Nucleus RTOS </h2><br>  Lors du d√©veloppement de Nucleus SE, mon objectif √©tait d'assurer le niveau maximum de compatibilit√© du code avec Nucleus RTOS.  Les groupes de drapeaux d'√©v√©nements ne faisaient pas exception et, du point de vue du d√©veloppeur, ils sont impl√©ment√©s presque de la m√™me mani√®re que dans Nucleus RTOS.  Il y a quelques incompatibilit√©s que j'ai consid√©r√©es comme valides, √©tant donn√© que le code final deviendra plus compr√©hensible et plus efficace en termes de quantit√© de m√©moire requise.  Sinon, les appels d'API Nucleus RTOS peuvent √™tre utilis√©s presque directement comme appels Nucleus SE. <br><br><h3>  Identificateurs d'objet </h3><br>  Dans Nucleus RTOS, tous les objets sont d√©crits par des structures de donn√©es (unit√©s de contr√¥le) d'un type sp√©cifique.  Un pointeur vers cette unit√© de contr√¥le est un identifiant pour un groupe de drapeaux d'√©v√©nements.  J'ai d√©cid√© que dans Nucleus SE, une approche diff√©rente est n√©cessaire pour une utilisation efficace de la m√©moire: tous les objets du noyau sont d√©crits par plusieurs tables en RAM et / ou ROM.  La taille de ces tables est d√©termin√©e par le nombre d'objets configur√©s de chaque type.  L'identifiant d'un objet particulier est l'index dans ce tableau.  J'ai donc d√©fini <b>NUSE_EVENT_GROUP</b> comme l'√©quivalent de <b>U8</b> , une variable de ce type (pas un pointeur) sert d'identifiant du groupe de drapeaux d'√©v√©nements.  Cette l√©g√®re incompatibilit√© est facile √† g√©rer si le code est port√© de Nucleus SE vers Nucleus RTOS et vice versa.  En r√®gle g√©n√©rale, aucune op√©ration n'est effectu√©e sur les identificateurs d'objet autres que le d√©placement et le stockage. <br><br>  Nucleus RTOS prend √©galement en charge la d√©nomination des groupes d'indicateurs d'√©v√©nements.  Ces noms sont utilis√©s uniquement pour le d√©bogage.  Je les ai exclus de Nucleus SE pour √©conomiser de la m√©moire. <br><br><h3>  Le nombre de drapeaux dans le groupe </h3><br>  Dans Nucleus RTOS, les groupes d'indicateurs d'√©v√©nements contiennent 32 indicateurs chacun, dans Nucleus SE j'ai r√©duit leur nombre √† huit, car cela est suffisant pour les applications simples et √©conomise de la RAM.  Nucleus SE peut √™tre facilement modifi√© si de plus grands groupes d'indicateurs d'√©v√©nements sont requis. <br><br><h3>  Fonction d'absorption des drapeaux </h3><br>  Nucleus RTOS a une fonction pour effacer (absorber) les drapeaux d'√©v√©nements apr√®s les avoir lus.  J'ai d√©cid√© d'exclure cette fonction de Nucleus SE pour simplifier le syst√®me, car l'absorption (suppression) des drapeaux se produit lorsque toutes les t√¢ches bloqu√©es ont re√ßu des drapeaux pour la lecture, ce qui serait difficile √† mettre en ≈ìuvre.  Si n√©cessaire, une t√¢che de lecture d'indicateur peut toujours les effacer √† l'aide d'un appel d'API distinct. <br><br><h3>  Appels d'API non r√©alis√©s </h3><br>  Nucleus RTOS prend en charge sept appels d'utilitaire pour travailler avec des groupes d'indicateurs d'√©v√©nements.  Parmi ceux-ci, trois ne sont pas impl√©ment√©s dans Nucleus SE.  Les d√©tails de ces d√©fis, ainsi que la d√©cision de les exclure de Nucleus SE, ont √©t√© d√©crits ci-dessus. <br>  Le prochain article se penchera sur les s√©maphores. <br><br>  <b>√Ä propos de l'auteur:</b> Colin Walls travaille dans l'industrie √©lectronique depuis plus de trente ans, consacrant la majeure partie de son temps au micrologiciel.  Il est maintenant ing√©nieur firmware chez Mentor Embedded (une division de Mentor Graphics).  Colin Walls intervient souvent lors de conf√©rences et s√©minaires, auteur de nombreux articles techniques et de deux livres sur le firmware.  Vit au Royaume-Uni.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Blog</a> professionnel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de Colin</a> , e-mail: colin_walls@mentor.com. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428890/">https://habr.com/ru/post/fr428890/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428876/index.html">Il n'y a pas de retour en arri√®re: l'exp√©rience personnelle du testeur</a></li>
<li><a href="../fr428878/index.html">Pig Flight, ou optimisation des interpr√®tes Bytecode</a></li>
<li><a href="../fr428880/index.html">Nouvelles m√©thodes d'authentification - une menace pour la vie priv√©e?</a></li>
<li><a href="../fr428882/index.html">Mobile Yandex. Blitz: nous analysons les t√¢ches</a></li>
<li><a href="../fr428888/index.html">qml: puissance et simplicit√©</a></li>
<li><a href="../fr428892/index.html">Comment cr√©er un jeu AI: un guide pour les d√©butants</a></li>
<li><a href="../fr428894/index.html">TVA sur les achats nationaux</a></li>
<li><a href="../fr428896/index.html">R√©seaux de neurones de censure Hentai</a></li>
<li><a href="../fr428898/index.html">Aspects probl√©matiques de la programmation en C ++</a></li>
<li><a href="../fr428900/index.html">Des robots √† roues commencent √† livrer des marchandises aux r√©sidents des √âtats-Unis et de la Grande-Bretagne</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>