<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÜüèΩ üë≤üèø ü•õ TypeScript Ausdruck Magie ü¶ä ‚óæÔ∏è üëÇüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TypeScript ist eine wirklich sch√∂ne Sprache. Das Arsenal verf√ºgt √ºber alles, was f√ºr eine qualitativ hochwertige Entwicklung notwendig ist. Und wenn p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TypeScript Ausdruck Magie</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465267/"> TypeScript ist eine wirklich sch√∂ne Sprache.  Das Arsenal verf√ºgt √ºber alles, was f√ºr eine qualitativ hochwertige Entwicklung notwendig ist.  Und wenn pl√∂tzlich jemand mit sexdramatischen Skizzen mit JavaScript vertraut ist, dann werde ich verstehen.  TypeScript hat eine Reihe von Annahmen, unerwartete Syntax und reizvolle Konstruktionen, die seine Sch√∂nheit, Form und F√ºllung mit neuer Bedeutung betonen.  Heute sprechen wir √ºber sie, √ºber diese Annahmen, √ºber die Magie der Ausdr√ºcke.  Wen k√ºmmert es, willkommen. <br><a name="habracut"></a><br><h2>  Ein bisschen Wahrheit </h2><br>  Richtig N1. <br><br>  Die meisten der unten beschriebenen Designs und unerwarteten Funde haben mich zuerst auf die Seiten von Stack Overflow, Github aufmerksam gemacht oder wurden von mir selbst erfunden.  Und erst dann d√§mmerte es - all das ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  Deshalb bitte ich Sie, im Voraus verst√§ndnisvoll zu behandeln, wenn Ihnen die angegebenen Ergebnisse banal erscheinen. <br><br>  Richtig N2. <br><br>  Der praktische Wert einiger Designs ist 0. <br><br>  Richtig N3. <br><br>  Beispiele wurden unter tsc Version 3.4.5 und Ziel es5 getestet.  Nur f√ºr den Fall, unter der Spoiler-Konfiguration <br><br><div class="spoiler">  <b class="spoiler_title">tsconfig.json</b> <div class="spoiler_text">  { <br>  "CompilerOptions": { <br>  "OutFile": "./target/result.js", <br>  "Modul": "amd", <br>  "Ziel": "es5", <br>  "Erkl√§rung": wahr, <br>  "NoImplicitAny": wahr, <br>  "NoImplicitReturns": true, <br>  "StrictNullChecks": wahr, <br>  "StrictPropertyInitialization": wahr, <br>  "ExperimentalDecorators": wahr, <br>  "EmitDecoratorMetadata": wahr, <br>  "PreserveConstEnums": wahr, <br>  "NoResolve": wahr, <br>  "SourceMap": wahr, <br>  "InlineSources": true <br>  }, <br>  "Einschlie√üen": [ <br>  "./src" <br>  ]] <br>  }} <br><br></div></div><br><h2>  Implementierung und Vererbung </h2><br>  <b>Suchen</b> : Im Abschnitt "Ger√§te" k√∂nnen Sie Schnittstellen, Typen und <i>Klassen</i> angeben.  Letzteres interessiert uns.  Details <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> <br><br><pre><code class="plaintext hljs">abstract class ClassA { abstract getA(): string; } abstract class ClassB { abstract getB(): string; } // , tsc     abstract class ClassC implements ClassA, ClassB { // ^  ,   implements  . abstract getA(): string; abstract getB(): string; }</code> </pre> <br>  Ich denke, TypeScript-Entwickler haben sich um die 'strengen Vertr√§ge' gek√ºmmert, die √ºber das Schl√ºsselwort class ausgef√ºhrt wurden.  Dar√ºber hinaus m√ºssen Klassen nicht abstrakt sein. <br><br>  <b>Suchen</b> : Ausdr√ºcke sind im erweiterten Bereich zul√§ssig.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Details</a>  Wenn Sie eine Frage stellen m√∂chten - ob es m√∂glich ist, von 2 Klassen zu erben, lautet die formale Antwort Nein.  Aber wenn Sie meinen, Funktionen zu exportieren - ja. <br><br><pre> <code class="plaintext hljs">class One { one = "__one__"; getOne(): string { return "one"; } } class Two { two = "__two__"; getTwo(): string { return "two"; } } //  ,    :   IDE (  )    . class BothTogether extends mix(One, Two) { // ^   ,    extends   info(): string { return "BothTogether: " + this.getOne() + " and " + this.getTwo() + ", one: " + this.one + ", two: " + this.two; // ^   IDE   ^  } } type FaceType&lt;T&gt; = { [K in keyof T]: T[K]; }; type Constructor&lt;T&gt; = { // prototype: T &amp; {[key: string]: any}; new(): T; }; // TODO:    ,   .       function mix&lt;O, T, Mix = O &amp; T&gt;(o: Constructor&lt;O&gt;, t: Constructor&lt;T&gt;): FaceType&lt;Mix&gt; &amp; Constructor&lt;Mix&gt; { function MixinClass(...args: any) { o.apply(this, args); t.apply(this, args); } const ignoreNamesFilter = (name: string) =&gt; ["constructor"].indexOf(name) === -1; [o, t].forEach(baseCtor =&gt; { Object.getOwnPropertyNames(baseCtor.prototype).filter(ignoreNamesFilter).forEach(name =&gt; { MixinClass.prototype[name] = baseCtor.prototype[name]; }); }); return MixinClass as any; } const bt = new BothTogether(); window.console.log(bt.info()); // &gt;&gt; BothTogether: one and two, one: __one__, two: __two__</code> </pre><br>  <b>Finden</b> : eine <i>tiefe</i> und gleichzeitig bedeutungslose Anonymit√§t. <br><br><pre> <code class="plaintext hljs">const lass = class extends class extends class extends class extends class {} {} {} {} {};</code> </pre><br>  Und wer schreibt die Wortklasse mit 4 erweitert im obigen Beispiel? <br><br><div class="spoiler">  <b class="spoiler_title">Wenn ja</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">// tslint:disable const Class = class Class extends class Class extends class Class extends class Class extends class Class {} {} {} {} {};</code> </pre></div></div><br>  Und mehr? <br><br><div class="spoiler">  <b class="spoiler_title">So</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">// tslint:disable const lass = class Class&lt;Class&gt; extends class Class extends class Class extends class Class extends class Class {} {} {} {} {};</code> </pre></div></div><br>  Nun, du verstehst es - es ist nur Klasse! <br><br><h2>  Ausrufezeichen - Unbegrenzter Operator und Modifikator </h2><br><br>  Wenn Sie die Kompilierungseinstellungen strictNullChecks und strictPropertyInitialization nicht verwenden, <br>  dann ist h√∂chstwahrscheinlich das Wissen √ºber das Ausrufezeichen in Ihrer N√§he vergangen ... Zus√§tzlich zum Hauptzweck werden ihm 2 weitere Rollen zugewiesen. <br><br>  <b>Suchen</b> : Ausrufezeichen als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nicht-Null-Assertionsoperator</a> <br><br>  Mit diesem Operator k√∂nnen Sie auf das Strukturfeld zugreifen, das null sein kann, ohne nach null zu suchen.  Ein Beispiel mit einer Erkl√§rung: <br><br><pre> <code class="plaintext hljs"> //     --strictNullChecks type OptType = { maybe?: { data: string; }; }; // ... function process(optType: OptType) { completeOptFields(optType); //   ,   completeOptFields    . window.console.log(optType.maybe!.data); // ^ -    ,    null //   !,    tsc: Object is possibly 'undefined' } function completeOptFields(optType: OptType) { if (!optType.maybe) { optType.maybe = { data: "some default info" }; } }</code> </pre><br>  Insgesamt k√∂nnen Sie mit diesem Operator unn√∂tige √úberpr√ºfungen auf Null im Code entfernen, wenn wir sicher sind, dass ... <br><br>  <b>Suchen</b> : Ausrufezeichen als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Modifikator f√ºr die Zusicherung einer bestimmten Zuweisung</a> <br><br>  Mit diesem Modifikator k√∂nnen wir die Klasseneigenschaft sp√§ter irgendwo im Code mit aktivierter Kompilierungsoption strictPropertyInitialization initialisieren.  Ein Beispiel mit einer Erkl√§rung: <br><br><pre> <code class="plaintext hljs">//     --strictPropertyInitialization class Field { foo!: number; // ^ // Notice this '!' modifier. // This is the "definite assignment assertion" constructor() { this.initialize(); } initialize() { this.foo = 0; // ^   } }</code> </pre><br>  Aber all diese Mini-Berechnungen √ºber das Ausrufezeichen w√§ren ohne einen Moment Humor nicht sinnvoll. <br><br>  Frage: Glauben Sie, dass der folgende Ausdruck kompiliert wird? <br><br><pre> <code class="plaintext hljs">//     --strictNullChecks type OptType = { maybe?: { data: string; }; }; function process(optType: OptType) { if (!!!optType.maybe!!!) { window.console.log("Just for fun"); } window.console.log(optType.maybe!!!!.data); }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  Ja </div></div><br><h2>  Typen </h2><br><br>  Jeder, der komplexe Typen schreibt, entdeckt viele interessante Dinge.  Also hatte ich Gl√ºck. <br><br>  <b>Suchen</b> : Ein Subtyp kann durch den Namen eines Feldes des Haupttyps referenziert werden. <br><br><pre> <code class="plaintext hljs">type Person = { id: string; name: string; address: { city: string; street: string; house: string; } }; type Address = Person["address"];</code> </pre><br>  Wenn Sie selbst Typen schreiben, ist dieser Deklarationsansatz kaum sinnvoll.  Es kommt jedoch vor, dass ein Typ aus einer externen Bibliothek stammt, ein Subtyp jedoch nicht. <br><br>  Ein Subtyp-Trick kann auch verwendet werden, um die Lesbarkeit des Codes zu verbessern.  Stellen Sie sich vor, Sie haben eine Basisklasse mit einem generischen Typ, von dem die Klassen erben.  Das folgende Beispiel zeigt, was gesagt wurde. <br><br><pre> <code class="plaintext hljs">class BaseDialog&lt;In, Out&gt; { show(params: In): Out {/**  .   return ... */ } } //  - class PersonDialogOld extends BaseDialog&lt;Person[], string&gt; {/**   */} //   class PersonDialog extends BaseDialog&lt;Person[], Person["id"]&gt; {/**   */}</code> </pre><br>  <b>Suchen</b> : Mit Hilfe des TypeScript-Typsystems ist es m√∂glich, einen kombinatorischen Satz generierter Typen mit Abdeckung der gew√ºnschten Funktionalit√§t zu erzielen.  Schwer zu sagen, ich wei√ü.  Ich habe lange √ºber diese Formulierung nachgedacht.  Ich werde Ihnen ein Beispiel der Builder-Vorlage als eine der bekanntesten zeigen.  Stellen Sie sich vor, Sie m√ºssen ein bestimmtes Objekt mit diesem Entwurfsmuster erstellen. <br><br><pre> <code class="plaintext hljs">class SimpleBuilder { private constructor() {} static create(): SimpleBuilder { return new SimpleBuilder(); } firstName(firstName: string): this { return this; } lastName(lastName: string): this { return this; } middleName(midleName: string): this { return this; } build(): string { return "what you needs"; } } const builder = SimpleBuilder.create(); //     . const result = builder.firstName("F").lastName("L").middleName("M").build();</code> </pre><br>  Sehen Sie sich noch nicht die redundante Erstellungsmethode, den privaten Konstruktor, und im Allgemeinen die Verwendung dieser Vorlage in ts an.  Konzentrieren Sie sich auf die Anrufkette.  Die Idee ist, dass aufgerufene Methoden nur einmal verwendet werden sollten.  Und Ihre IDE sollte sich dessen auch bewusst sein.  Mit anderen Worten, nach dem Aufrufen einer Methode in der Builder-Instanz sollte diese Methode aus der Liste der verf√ºgbaren Methoden ausgeschlossen werden.  Um diese Funktionalit√§t zu erreichen, hilft uns der Typ NarrowCallside. <br><br><pre> <code class="plaintext hljs">type ExcludeMethod&lt;T, K extends keyof T&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;; type NarrowCallside&lt;T&gt; = { [P in keyof T]: T[P] extends (...args: any) =&gt; T ? ReturnType&lt;T[P]&gt; extends T ? (...args: Parameters&lt;T[P]&gt;) =&gt; NarrowCallside&lt;ExcludeMethod&lt;T, P&gt;&gt; : T[P] : T[P]; }; class SimpleBuilder { private constructor() {} static create(): NarrowCallside&lt;SimpleBuilder&gt; { return new SimpleBuilder(); } firstName(firstName: string): this { return this; } lastName(lastName: string): this { return this; } middleName(midleName: string): this { return this; } build(): string { return "what you needs"; } } const builder = SimpleBuilder.create(); const result = builder.firstName("F") // ^ -    .lastName("L") // ^ -   lastName, middleName  build .middleName("M") // ^ -   middleName  build .build(); // ^ -    build</code> </pre><br>  <b>Suchen</b> : Mit dem TypeScript-Typsystem k√∂nnen Sie die Reihenfolge der Aufrufe steuern, indem Sie eine strikte Reihenfolge angeben.  Im folgenden Beispiel am Beispiel des DirectCallside-Typs wird dies demonstriert. <br><br><pre> <code class="plaintext hljs">type FilterKeys&lt;T&gt; = ({[P in keyof T]: T[P] extends (...args: any) =&gt; any ? ReturnType&lt;T[P]&gt; extends never ? never : P : never })[keyof T]; type FilterMethods&lt;T&gt; = Pick&lt;T, FilterKeys&lt;T&gt;&gt;; type BaseDirectCallside&lt;T, Direct extends any[]&gt; = FilterMethods&lt;{ [Key in keyof T]: T[Key] extends ((...args: any) =&gt; T) ? ((..._: Direct) =&gt; any) extends ((_: infer First, ..._1: infer Next) =&gt; any) ? First extends Key ? (...args: Parameters&lt;T[Key]&gt;) =&gt; BaseDirectCallside&lt;T, Next&gt; : never : never : T[Key] }&gt;; type DirectCallside&lt;T, P extends Array&lt;keyof T&gt;&gt; = BaseDirectCallside&lt;T, P&gt;; class StrongBuilder { private constructor() {} static create(): DirectCallside&lt;StrongBuilder, ["firstName", "lastName", "middleName"]&gt; { return new StrongBuilder() as any; } firstName(firstName: string): this { return this; } lastName(lastName: string): this { return this; } middleName(midleName: string): this { return this; } build(): string { return "what you needs"; } } const sBuilder = StrongBuilder.create(); const sResult = sBuilder.firstName("F") // ^ -   firstName  build .lastName("L") // ^ -   lastName  build .middleName("M") // ^ -   middleName  build .build(); // ^ -   build</code> </pre><br><h2>  Insgesamt </h2><br><br>  Dies sind alle meine interessanten Erkenntnisse zu TypeScript heute.  Vielen Dank f√ºr Ihre Aufmerksamkeit und bis bald. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de465267/">https://habr.com/ru/post/de465267/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de465255/index.html">Implementierung des WCF-Verbindungspools f√ºr .Net Core mithilfe von HttpClientFactory</a></li>
<li><a href="../de465257/index.html">"Vorsicht, FAS!": McDonald's Tricks, g√∂ttliches D√∂ner, falsches Clooney und etwas Stra√üenmagie</a></li>
<li><a href="../de465259/index.html">ValueTask <TResult> - warum, warum und wie?</a></li>
<li><a href="../de465261/index.html">Die magische Kraft von Makros oder wie man einem AVR-Assembler-Programmierer das Leben leichter macht</a></li>
<li><a href="../de465263/index.html">Sperren in PostgreSQL: 3. Sperrt andere Objekte</a></li>
<li><a href="../de465269/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 26. DNS und DHCP</a></li>
<li><a href="../de465271/index.html">Hacker stehlen und waschen Geld durch Lieferservice und Hotelreservierung.</a></li>
<li><a href="../de465273/index.html">Wie Microgaming-Softwareentwickler Benutzer vor Hacks sch√ºtzen</a></li>
<li><a href="../de465275/index.html">Alice bekommt Geschicklichkeit</a></li>
<li><a href="../de465277/index.html">Analysieren und Analysieren der Semantik f√ºr SEO: 5 kostenlose Google Sheets-Vorlagen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>