<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✝️ 👊🏻 🧑 Que devrions-nous construire notre carte de montage PCI-E 🤯 🏚️ 🧗🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il était une fois que j'assemblais un mini-ordinateur pour moi. Mais voici le malheur - la modélisation 3D, et quel péché à cacher - les jouets banaux...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Que devrions-nous construire notre carte de montage PCI-E</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435086/"><img src="https://habrastorage.org/webt/p2/bj/wm/p2bjwmqo6yot_eufjkklj-p9oqu.jpeg"><br><br>  Il était une fois que j'assemblais un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mini-ordinateur pour</a> moi.  Mais voici le malheur - la modélisation 3D, et quel péché à cacher - les jouets banaux ont fait beaucoup réfléchir à cette boîte, et moi - pour devenir nerveux.  Mais vous ne pouvez pas simplement y prendre et y connecter une carte vidéo - il y a un emplacement PCI-E X4, mais il n'y a pas d'espace dans le boîtier.  Et il ne pourra pas pourvoir à la nutrition (sinon parler de bouchons absolument budgétaires).  Quelles options pour résoudre ce problème sont sur le marché, ce qui ne me convenait pas et ce qui s'est finalement produit, je vais essayer de décrire dans cet article.  Je demande un chat qui n'a pas peur d'un <b>grand nombre de photos</b> ! <br><a name="habracut"></a><br><h4>  <font color="#9cc2ce">Prologue</font> </h4><br>  Pour connecter une carte vidéo, une carte de montage PCI-E à 4 lignes était nécessaire avec une alimentation supplémentaire avec la possibilité de la contrôler si l'alimentation est séparée.  Ainsi, les câbles de bouclage habituels et de nombreux câbles douloureusement familiers disparaissent immédiatement en raison de l'exploitation d'une colonne montante avec un câble USB comme interface. <br><br><img src="https://habrastorage.org/webt/z3/-v/qf/z3-vqfkmh5u-8rf9nk5d6btibjs.png"><br>  <font color="gray"><i>Produits en vrac avec une qualité de masse</i></font> <br><br>  Et voici une des requêtes plus ou moins satisfaisantes que l'on retrouve sur le vaste réseau: <br><br><ul><li>  <u>PE4C V4.1</u> - tout d'abord, la carte installée dans la fente ne correspondait évidemment pas à mon PC en termes de dimensions.  Et les câbles HDMI eux-mêmes sont assez durs, et il y en a 2!  Et le prix de ~ 140 $ ne me semblait pas tout à fait humain. <br><br><img src="https://habrastorage.org/webt/o_/6f/gp/o_6fgpmt7rycyfm4d6gzqdzrvq8.jpeg"><br></li></ul><br><ul><li>  <u>EXP GDC</u> - il y avait une version pour la fente pci-e x4, mais elle avait aussi un prix inhumain, 2 câbles HDMI déjà vus auparavant.  Maintenant, je ne trouve même plus sa photo - elle était rarement vendue en dehors de la Chine.  Mais pour le slot PCI-E x4, la carte est encore plus grande que le PE4C <br><br><img src="https://habrastorage.org/webt/5t/lh/5y/5tlh5y3hjqp6ubkdkoasdcbzwt0.jpeg"><br>  <font color="gray"><i>Version pour M2.</i></font>  <font color="gray"><i>Et pour un slot PCI-E normal, c'est comme si rien n'avait disparu</i></font> <br></li></ul><br><ul><li>  <u>Riser d'ADT-Link</u> - au moment de mon lancer n'était pas représenté.  Et maintenant, il n'y a pas beaucoup d'informations à leur sujet.  Mais il me semblait <s>extrêmement</s> étrange de faire varier tellement le prix de l'appareil en fonction de la longueur du câble. <br><br><img src="https://habrastorage.org/webt/wn/ae/nx/wnaenxuhmyhic2x2yeevmleii7g.jpeg"><br></li></ul><br>  Ne trouvant pas de solution convenable pour moi-même, j'ai dû choisir entre deux options - marquer ou le faire nous-mêmes.  Il est clair que pour la première option, l'article pourrait être complété à ce sujet, mais je continuerai probablement. <br><br><h4>  <font color="#9cc2ce">La conception</font> </h4><br>  Après avoir parlé dans diverses communautés dédiées à ce sujet, il a été décidé de rendre la carte de montage universelle, et pas seulement pour elle-même - afin qu'elle puisse se connecter à un ordinateur portable (via Mini Pci-E, M2 ou même MXM) et à un ordinateur dans l'emplacement x16 sans restriction à seulement 4 lignes de données ! <br><br>  Voici la liste des exigences que je me suis fixées: <br><br><ul><li>  L'alimentation n'est que de 12 volts.  3.3v recevoir sur la colonne montante elle-même à l'aide d'un convertisseur cc-cc. </li><li>  Gestion de l'alimentation quel que soit le type de bloc d'alimentation utilisé (géré par ATX ou bloc d'alimentation ordinaire à 12 V) </li><li>  Connexion de différents adaptateurs via des câbles détachables du même type (sans soudure). </li><li>  Divisez l'interface x16 en 4 groupes.  Ainsi, pour l'interface x1-x4 - 1 câble, x8 - 2 câbles et 4 câbles pour x16. </li><li>  Parfois, j'ai observé une situation où une carte vidéo connectée à un ordinateur portable via EXP GDC était alimentée par un ordinateur portable à 19 V (il y a un connecteur, vous devez le brancher) et déplacée pour ajouter une indication de la tension d'entrée dans la plage acceptable: 12 V ± 5%. </li></ul><br><h4>  <font color="#9cc2ce">Implémentation</font> </h4><br>  Liste de souhaits décrite, le courage s'est suffisamment accumulé - il est temps de mettre en œuvre!  Riser est essentiellement une rallonge.  Et le câble est sa partie principale.  En tant que tel, des variétés de câbles LVDS ont été utilisées - le soi-disant ensemble de câbles micro coaxiaux.  Ils sont souvent utilisés pour connecter des matrices d'affichage de divers appareils. <br><br><img src="https://habrastorage.org/webt/pj/er/0f/pjer0feihmdlcf3js7dpts-z_xw.png"><br>  <font color="gray"><i>Câble nu 18+</i></font> <br><br><img src="https://habrastorage.org/webt/sb/zy/ce/sbzycezhtq51c9qlmn1pow8wva8.png"><br>  <font color="gray"><i>30 noyaux et seulement 2 mm de diamètre</i></font> <br><br>  Bien qu'il soit extrêmement difficile de les trouver en vente libre, j'ai réussi à trouver un fabricant en Chine qui était prêt à fabriquer de tels câbles en toute quantité (même 1 pc) de n'importe quelle longueur et avec un connecteur approprié. <br><br>  Une fois le choix du câble d'interface terminé, j'ai enfin pu développer une carte de montage pour circuit imprimé et la sélection des composants.  Finalement, les cartes développées ont été commandées, les composants ont été achetés et tout a été assemblé: <br><br><img src="https://habrastorage.org/webt/vv/mo/qz/vvmoqzz8uiuk_tpq6kuu3j3gebo.jpeg"><br>  <font color="gray"><i>Haut de la planche</i></font> <br><br><img src="https://habrastorage.org/webt/r7/r1/sj/r7r1sjjqoryuinebpfp_vbta-co.jpeg"><br>  <font color="gray"><i>Planche inférieure</i></font> <br><br><ol><li>  Connecteur d'alimentation à 8 broches (courant maximal de 15 A), combiné avec le signal d'activation (pour les alimentations ATX) </li><li>  Le circuit d'affichage de la tension d'alimentation dans des limites acceptables (+ 12v ± 5%) sur le comparateur de fenêtre.  LED verte - la tension est normale, rouge - hors plage </li><li>  Gestion de l'alimentation - Mosfet dans le cas où la source d'alimentation est utilisée sans contrôle et le signal PS ON est émis.  Le signal de contrôle est une alimentation de 3,3 V sur l'hôte </li><li>  Diminuez DC \ DC pour obtenir 3,3 V </li><li>  Connecteur de refroidisseur </li><li>  Connecteurs LVDS pour câbles d'interface </li><li>  Emplacement PCI-E x16 </li><li>  Protection contre les courts-circuits et les surtensions - fusible et diode TVS. </li><li>  Connexion d'une alimentation supplémentaire à la carte vidéo </li></ol><br>  De l'autre côté du câble, la carte adaptateur pour l'emplacement du périphérique final: <br><br><img src="https://habrastorage.org/webt/yo/k4/mw/yok4mw0n4kfakoz02-wz0sdkyhc.jpeg"><br><br>  Un inconvénient important d'une telle solution (comme avec les analogues) est que vous ne pouvez pas connecter / déconnecter rapidement une carte de montage sans avoir à démonter un ordinateur portable / ordinateur.  Et les connecteurs eux-mêmes ne sont pas destinés à un usage externe et ont une faible résistance mécanique et de faibles ressources.  Par conséquent, j'ai également fabriqué ici un tel adaptateur avec des connecteurs plus fiables (le câble lui-même avec de tels connecteurs ne peut pas être fabriqué tout de suite ... pour un prix raisonnable): <br><br><img src="https://habrastorage.org/webt/j4/jz/ww/j4jzwwivpvc5wn2o_ifthhzvmcu.jpeg"><br>  <font color="gray"><i>Des connecteurs similaires ont été utilisés dans les stations d'accueil pour smartphones, tablettes et autres appareils.</i></font> <br><br><img src="https://habrastorage.org/webt/fw/o8/z5/fwo8z5ygz-xrb5rkktvomw-2ljg.jpeg"><br>  <font color="gray"><i>Connexion à l'aide de 2 câbles, et ces adaptateurs les connectent</i></font> <br><br><h4>  <font color="#9cc2ce">Test</font> </h4><br>  Tous les composants des cartes sont soudés, les câbles sont connectés - il est temps de croiser les doigts et de tester! <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/rr/0k/k-/rr0kk-g4bbpgdbyh5bqqt921ofw.jpeg"></a> <br>  <font color="gray"><i>Sur la photo est un prototype et présente des différences par rapport à la version finale.</i></font> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/lf/tm/bj/lftmbj8hmxxvdbe4kq8yy9uuqdo.jpeg"></a> <br>  <font color="gray"><i>Puisqu'ils se sont connectés avec 2 câbles d'interface, nous avons obtenu PCI-E x8.</i></font> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/lz/tf/hv/lztfhvmz7pevnyjetd92pqlytgq.jpeg"></a> <br>  <font color="gray"><i>Lors de la réussite de divers tests, il n'y a eu aucun problème et la carte vidéo a fonctionné de manière stable sous charge, et la fréquence du bus a augmenté (gen3)</i></font> <br><br>  Pour les tests, j'ai réussi à obtenir un ordinateur portable avec un emplacement M2 Key M avec prise en charge NVME - MSI GE62 6QD.  Mais pour le prototype, un adaptateur avec touches M + B a été conçu pour une plus grande polyvalence, il est donc possible d'utiliser seulement 2 lignes sur 4 disponibles: <br><br><img src="https://habrastorage.org/webt/9r/n5/4v/9rn54vaeb-xawf7yk2brqiyqric.jpeg"><br>  <font color="gray"><i>Comme il s'agissait d'un prototype, l'utilisation de ruban électrique et la suppression de courant continu / continu sur une carte distincte sont tout à fait appropriées</i></font> <br><br><img src="https://habrastorage.org/webt/fy/sz/sp/fyszspm12mxmhpjypn5tmcn8tig.jpeg"><br>  <font color="gray"><i>Démarrage d'un ordinateur portable avec EGPU.</i></font>  <font color="gray"><i>PSU démarre automatiquement lorsque vous allumez l'ordinateur portable</i></font> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ys/kc/vh/yskcvhwvjr4gpt4peovc6xez95s.jpeg"></a> <br>  <font color="gray"><i>En raison de la présence d'une carte graphique intégrée et discrète dans l'ordinateur portable, j'ai dû bricoler avec l'installation de pilotes</i></font> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/y1/xc/88/y1xc88bommcd9fphyak-6ypcvra.jpeg"></a> <br>  <font color="gray"><i>Travail sous charge</i></font> <br><br>  Malheureusement, ces glandes ont été à ma disposition pendant très peu de temps et je n'ai pas pu effectuer un test plus détaillé après avoir reçu la version finale de la colonne montante.  Il fallait donc se contenter uniquement d'un tel fer: <br><br><ul><li>  MP Asus Q87T </li><li>  CPU Core I3 4150T </li><li>  RAM 2 * 4 Go Crucial DDR3L SO-DIMM PC-12800 </li><li>  Wi-Fi / BT Intel Dual Band Wireless-AC 7260 </li><li>  SSD mSATA 120 Go Crucial M500 </li><li>  Disque dur 2,5 pouces Seagate Momentus 500 Go </li><li>  MSI RX 560 4Gb </li></ul><br><img src="https://habrastorage.org/webt/iy/7l/7u/iy7l7uysi3amdu4sobxmthwp4-y.jpeg"><br>  <font color="gray"><i>Pour le bien de ce que tout a vraiment commencé</i></font> <br><br>  Bien sûr, la configuration est loin d'être productive et elle n'a pas fonctionné dans divers tests pour obtenir un avantage significatif de la connexion via le bus x4 au lieu de x1.  Souvent, tout reposait sur un fer faible. <br><br><img src="https://habrastorage.org/webt/ah/7e/kg/ah7ekg0jws0yqnvyatvwh9-jwzi.png"><br>  <font color="gray"><i>Marge d'erreur</i></font> <br><br>  Les jeux de type MOBA (WOT, par exemple) ont montré de l'indifférence envers le bus sur cette configuration - s'il y a une quantité suffisante de mémoire vidéo, il n'est pas nécessaire de charger des données dans de petits emplacements fermés. <br><br>  Mais dans les jeux en ligne avec un monde ouvert, notamment dans les lieux de rassemblement de masse des joueurs, la différence est assez sensible.  Voici 3 mesures FPS dans Black Desert: <br><div class="scrollable-table"><table><tbody><tr><td>  Mesure </td><td>  min </td><td>  moyenne </td><td>  max </td></tr><tr><td colspan="4">  pci-e x4 gen1 ≈ pci-e x1 gen3 </td></tr><tr><td>  1 </td><td>  5 </td><td>  28 </td><td>  51 </td></tr><tr><td>  2 </td><td>  5 </td><td>  29 </td><td>  49 </td></tr><tr><td>  3 </td><td>  5 </td><td>  29 </td><td>  51 </td></tr><tr><td colspan="4">  pci-e x4 gen3 </td></tr><tr><td>  1 </td><td>  7 </td><td>  31 </td><td>  56 </td></tr><tr><td>  2 </td><td>  6 </td><td>  30 </td><td>  51 </td></tr><tr><td>  3 </td><td>  7 </td><td>  31 </td><td>  53 </td></tr></tbody></table></div><br><h4>  <font color="#9cc2ce">Plans et résultats</font> </h4><br>  Bien que le projet ait été conçu comme universel et pas seulement pour lui-même, il n'a pas trouvé beaucoup de popularité.  Pas du tout trouvé.  Cependant, j'ai obtenu ce que je voulais et une expérience et des connaissances inestimables.  Comme on dit, un résultat négatif est aussi un résultat! <br><br>  Ils me demandent également souvent pourquoi je n'ai pas essayé de mettre en œuvre la prise en charge de l'interface Thunderbolt3 désormais à la mode.  Le problème est que cette interface nécessitera une licence d'Intel.  Et ils ne se contenteront pas de fournir de la documentation pour les contrôleurs.  Il existe même un cercle restreint de développeurs de solutions sur Thunderbolt3 sous le patronage du même Intel.  Naturellement, ils ne m'ont pas accepté là-bas. <br><br>  Bien qu'il y ait eu des rumeurs selon lesquelles cette interface serait ouverte et accessible à tout le monde, mais pour le moment ce ne sont que des rumeurs et la norme est restée fermée.  Mais j'aimerais essayer de développer le projet dans ce sens. <br><br>  Il y avait pas mal de questions sur l'option de connexion au lieu des cartes vidéo MXM.  Il y avait des plans pour une telle option, mais j'ai dû l'abandonner pour deux raisons - les fonds pour la R&amp;D ont pris fin et je n'avais rien pour le tester. <br><br>  En général, je serai très heureux d'entendre les commentaires et suggestions des colporteurs.  Merci de votre attention! <br><br><h4>  <font color="#9cc2ce">PS</font> </h4><br>  Comme il s'agit généralement de ma première expérience dans le développement d'un appareil électronique, j'ai dû me tourner vers des personnes plus expérimentées à cet égard, je tiens donc à remercier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">chaleureusement NordicEnergy</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Paging</a> pour les conseils et les réponses à mes questions (parfois idiotes)! <br><br><h4>  <font color="red">Fichiers de projet</font> </h4></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr435086/">https://habr.com/ru/post/fr435086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr435076/index.html">Comment les spécialistes du marketing travaillant avec Google monétisent notre inconfort</a></li>
<li><a href="../fr435078/index.html">Et si l'intelligence artificielle rend les acteurs immortels?</a></li>
<li><a href="../fr435080/index.html">Guide: Thymeleaf + Spring. 2e partie</a></li>
<li><a href="../fr435082/index.html">Siloda Valley Yoda</a></li>
<li><a href="../fr435084/index.html">Comment travailler avec async / wait dans les boucles JavaScript</a></li>
<li><a href="../fr435088/index.html">Le géant chinois du streaming Tencent Music entre en bourse - qu'est-ce que cela signifie et à quoi les concurrents devraient-ils s'attendre</a></li>
<li><a href="../fr435094/index.html">Manette de jeu de Sega Mega Drive et Raspberry Pi Partie 2 (six derniers boutons)</a></li>
<li><a href="../fr435096/index.html">L'effet de la radio à tube chaud</a></li>
<li><a href="../fr435098/index.html">ADB vs Spy Cam & Mic</a></li>
<li><a href="../fr435102/index.html">Un peu sur l'analyse lexicale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>