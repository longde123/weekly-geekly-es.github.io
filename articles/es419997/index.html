<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äç‚öñÔ∏è üåõ üê∫ Analizando el patr√≥n "M√≥dulo" en JavaScript üë∂üèø üßîüèª üçâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Muchos lenguajes de programaci√≥n tienen mecanismos para ocultar, por ejemplo, m√©todos y propiedades de clases. JavaScript no tiene herramientas integr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analizando el patr√≥n "M√≥dulo" en JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/419997/">  Muchos lenguajes de programaci√≥n tienen mecanismos para ocultar, por ejemplo, m√©todos y propiedades de clases.  JavaScript no tiene herramientas integradas que permitan, sin esfuerzo adicional, lograr tales efectos.  Sin embargo, tales cosas pueden ser imitadas usando otras caracter√≠sticas del lenguaje. <br><br><div style="text-align:center;"><img src="http://images.clipartpanda.com/lego-clip-art-RcGeeg7cL.png" alt="imagen"></div><br>  El material, cuya traducci√≥n publicamos hoy, est√° dedicado al an√°lisis del patr√≥n de dise√±o "M√≥dulo", que le permite ocultar informaci√≥n privada en los cierres, dando acceso solo a lo que el desarrollador decidi√≥ hacer p√∫blico.  Este art√≠culo est√° destinado principalmente a programadores principiantes, a aquellos que parecen estar familiarizados con cosas como cierres y IIFE, pero que a√∫n no los han usado con mucha confianza. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">IIFE</font> </h2><br>  Puede controlar el alcance de las variables en JavaScript utilizando el patr√≥n "M√≥dulo".  Para crear un √°mbito privado, puede usar el cierre.  Como sabe, las funciones crean su propio alcance, cuyo contenido est√° separado del alcance global: <br><br><pre><code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">function</span></span> () { //      })()<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br>  Ante nosotros est√° la llamada funci√≥n de auto-invocaci√≥n ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IIFE</a> , Expresi√≥n de funci√≥n invocada inmediatamente, llamada inmediatamente expresi√≥n funcional).  Dicha funci√≥n se ejecuta inmediatamente despu√©s de su declaraci√≥n.  Es conveniente utilizar tales funciones para resolver un problema determinado que debe resolverse solo una vez, sin dejar nada superfluo en el √°mbito global.  Dentro de esta funci√≥n (as√≠ como dentro de otras funciones) se crea un √°mbito privado, inaccesible desde el exterior.  Es decir, si se declara otra funci√≥n dentro de este √°mbito, luego de que se ejecute IIFE, no ser√° posible acceder a ella. <br><br><pre> <code class="hljs actionscript">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myFunction = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-comment"><span class="hljs-comment">//     }; })();</span></span></code> </pre> <br>  Ahora intentemos acceder a la funci√≥n <code>myFunction</code> desde el texto principal del programa: <br><br><pre> <code class="hljs powershell">myFunction(); // Uncaught ReferenceError: my<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">Function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">not</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">defined</span></span></span></span></code> </pre> <br>  Como puede ver, como se esperaba, esta llamada conduce a un error.  Esto nos dice que esta funci√≥n no est√° disponible en el √°mbito desde el que intentamos acceder a ella.  De hecho, no se hace nada √∫til en los dos ejemplos anteriores.  Necesitamos estos ejemplos solo para prepararnos para el an√°lisis del patr√≥n "M√≥dulo". <br><br><h2>  <font color="#3AC1EF">Devolver un objeto del m√≥dulo IIFE y API</font> </h2><br>  ¬øC√≥mo asegurarse de que todav√≠a se puede acceder a una funci√≥n declarada dentro de otra funci√≥n?  De hecho, de lo que vamos a hablar ahora es del patr√≥n "M√≥dulo".  Considere el siguiente ejemplo. <br><br><pre> <code class="hljs lua">//   var Module = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   myMethod: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {     console.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(<span class="hljs-string"><span class="hljs-string">'myMethod has been called.'</span></span>);   } }; })(); //      Module.myMethod();</code> </pre> <br>  Puede notar que aqu√≠ se usa el mismo IIFE que antes, pero ahora la funci√≥n devuelve un objeto con un m√©todo, al que se puede acceder desde el √°mbito global.  Naturalmente, este m√©todo no puede ser llamado.  Cabe se√±alar que en este ejemplo no usamos las capacidades de cierre, hablaremos de esto a continuaci√≥n. <br><br>  Un objeto devuelto por IIFE es un objeto ordinario que puede tener muchos m√©todos y propiedades.  Forman una interfaz p√∫blica o API de m√≥dulo. <br><br><pre> <code class="hljs lua">//   var Module = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   myMethod: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {   },   someOtherMethod: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {   } }; })(); //      Module.myMethod(); Module.someOtherMethod();</code> </pre> <br><h2>  <font color="#3AC1EF">Variables privadas y funciones almacenadas en el cierre.</font> </h2><br>  Ahora es el momento de hablar sobre funciones y variables privadas.  Por ejemplo, pueden ser algunas funciones auxiliares que aseguran el funcionamiento de los mecanismos internos del m√≥dulo. <br><br>  Estas pueden ser variables temporales, o variables que desempe√±an el papel de almacenamiento de ciertos datos, cuyo acceso queremos controlar estrictamente.  Estamos interesados ‚Äã‚Äãen tal m√≥dulo de dispositivo, cuando solo lo que deber√≠a estar disponible para el mundo exterior, y todo lo dem√°s est√° oculto.  De hecho, todo lo que, en nuestro ejemplo, se declarar√° fuera del objeto devuelto por IIFE se volver√° privado. <br><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Module = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> privateMethod = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   publicMethod: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{   } }; })();</code> </pre> <br>  El m√©todo <code>publicMethod</code> de este ejemplo se puede llamar desde el exterior, pero la funci√≥n <code>privateMethod</code> no <code>privateMethod</code> , porque est√° en un √°mbito privado, en un cierre.  Son precisamente esas funciones, inaccesibles desde el exterior, las que pueden servir como mecanismos auxiliares de los m√≥dulos.  Se pueden usar para administrar estructuras de datos internas, para hacer algunas llamadas a ciertos servicios y en otras situaciones. <br><br>  Al trabajar con tales funciones, debe tener en cuenta que se puede acceder a ellas desde otras funciones declaradas en el mismo √°mbito, incluidos los m√©todos del objeto devuelto por IIFE, e incluso despu√©s de que el comando <code>return</code> devuelve ese objeto .  Es decir, los m√©todos p√∫blicos tienen acceso a funciones privadas, pueden interactuar con ellos, pero en el √°mbito global, estas funciones privadas no est√°n disponibles. <br><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Module = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> privateMethod = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   publicMethod: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{     <span class="hljs-comment"><span class="hljs-comment">//       privateMethod,      :     // privateMethod();   } }; })();</span></span></code> </pre> <br>  Gracias a esto, podemos proteger el c√≥digo de interferencias no autorizadas y proteger el alcance global de la contaminaci√≥n.  Si esto no se hace, entonces, por un lado, el funcionamiento de los mecanismos internos de los m√≥dulos puede interrumpirse accidental o deliberadamente, debido a que el c√≥digo externo se refiere a funciones o variables a las que no debe acceder.  Por otro lado, si no utiliza el enfoque descrito aqu√≠, muchas cosas innecesarias caen en el √°mbito global, lo que, por ejemplo, puede conducir a conflictos de nombres. <br><br>  Aqu√≠ hay un ejemplo de un objeto devuelto por IIFE que contiene m√©todos p√∫blicos y puede acceder a funciones privadas: <br><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Module = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myModule = {}; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> privateMethod = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }; myModule.publicMethod = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }; myModule.anotherPublicMethod = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myModule; <span class="hljs-comment"><span class="hljs-comment">//      })(); //   Module.publicMethod();</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Nombrar caracter√≠sticas privadas y p√∫blicas</font> </h2><br>  Hay un acuerdo, seg√∫n el cual al principio de los nombres de las funciones privadas se pone un gui√≥n bajo.  Esto permite, solo mirando el c√≥digo, comprender qu√© funciones son internas y cu√°les est√°n disponibles p√∫blicamente.  Por ejemplo, podr√≠a verse as√≠: <br><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Module = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _privateMethod = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> publicMethod = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   publicMethod: publicMethod, } })();</code> </pre> <br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  En este art√≠culo, examinamos un patr√≥n simple de "M√≥dulo", que, mediante el uso de un cierre formado por una expresi√≥n funcional llamada inmediatamente y devuelto desde una expresi√≥n de objeto, le permite crear m√©todos p√∫blicos y funciones privadas y estructuras de datos que no se pueden operar directamente desde el exterior.  Esta plantilla le permite ocultar los detalles de implementaci√≥n de los m√≥dulos, protegi√©ndolos de cambios accidentales o intencionales, y ayuda a mantener limpio el alcance global. <br><br>  <b>Estimados lectores!</b>  ¬øUtiliza el patr√≥n "M√≥dulo" en sus proyectos JS? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419997/">https://habr.com/ru/post/es419997/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419987/index.html">Lo que contar√°n las gotas de sangre: trigonometr√≠a de cr√≠menes</a></li>
<li><a href="../es419989/index.html">Nueva Zelanda proh√≠be las bolsas de pl√°stico</a></li>
<li><a href="../es419991/index.html">Drones aut√≥nomos llevar√°n bandadas de p√°jaros desde los aeropuertos</a></li>
<li><a href="../es419993/index.html">Entrevista TypeScript: 20 preguntas y respuestas</a></li>
<li><a href="../es419995/index.html">Un estudio de Ivy, el nuevo compilador angular</a></li>
<li><a href="../es419999/index.html">Uso compartido de autenticaci√≥n Yii1 / yii2</a></li>
<li><a href="../es420001/index.html">Presentamos 3CX v15.5 Actualizaci√≥n 6 BETA y Softphone del navegador WebRTC</a></li>
<li><a href="../es420003/index.html">Ventana con botones en JavaFX:</a></li>
<li><a href="../es420005/index.html">La videovigilancia no profesional del apartamento es entretenida y econ√≥mica</a></li>
<li><a href="../es420007/index.html">FidgetPen, l√°mpara extra√±a y cubos divisores: conociendo Allocacoc</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>