<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔦 🧣 📥 Développement par le test: améliorer les compétences 🕖 🀄️ 🚣🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les tests sont une compétence importante que tout développeur devrait posséder. Cependant, certains hésitent à le faire. 

 Chacun de nous est tombé s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Développement par le test: améliorer les compétences</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430128/"> Les tests sont une compétence importante que tout développeur devrait posséder.  Cependant, certains hésitent à le faire. <br><br>  Chacun de nous est tombé sur un développeur qui a affirmé que les tests sont inutiles, ils nécessitent trop d'efforts, et en effet son code est si excellent qu'aucun test n'est nécessaire.  Ne le croyez pas.  Les tests sont cruciaux. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab4/edf/d25/ab4edfd25cd910ea1823d5e0324ae042.jpg" alt="image"><br><br>  Les tests rendent votre code plus stable et réduisent le nombre de bugs.  Il vous semble que ce n'est pas le cas, car vous connaissez chaque partie de votre code.  Après tout, vous l'avez écrit, pourquoi d'autres tests? <br><br>  Supposons que vous créez une application météo.  Vous avez écrit le code pendant plusieurs jours ou semaines, vous connaissez donc le code de et vers. <br><a name="habracut"></a><br>  Imaginez maintenant que vous avez terminé de travailler sur l'application et que vous y reviendrez dans quelques mois.  Vous ne vous souviendrez pas de chaque détail de l'ancien code.  Vous le changez ... et l'enfer ... quelque chose est cassé.  Comment corrigez-vous cela?  Regardez chaque fichier que vous créez et configurez-le pour qu'il fonctionne à nouveau?  Ça peut marcher.  Mais changer ce fichier cassera autre chose. <br><br>  Prenons un autre exemple.  Après plusieurs mois de dur labeur, vous avez enfin obtenu le poste que vous vouliez depuis longtemps!  Vous rejoignez l'équipe et commencez à créer quelque chose.  Vous travaillez avec du code provenant d'autres développeurs et vice versa.  Et en un jour, tout tombe en panne.  Si l'équipe n'a pas intégré les tests dans leur application, je ne vous envie pas. <br><br>  Chaque équipe doit écrire des tests lorsqu'elle crée des logiciels ou des applications.  Vous ne voulez pas être une personne qui ne sait pas tester? <br><br>  Oui, l'écriture des tests prend du temps.  Oui, c'est difficile au début.  Oui, la création d'applications est plus intéressante.  Mais les tests sont importants et permettent de gagner du temps s'ils sont correctement mis en œuvre. <br><br>  Mon objectif aujourd'hui est d'améliorer les compétences de test.  Nous examinerons les tests unitaires et le développement à travers les tests avec Jest (outil de test JavaScript).  Bien sûr, il existe d'autres outils de test que vous pouvez utiliser, tels que Mocha et Chai. <br><br>  <b>Commençons!</b> <br><br><h3>  Tests unitaires </h3><br>  Lorsque vous décidez de tester l'application, vous êtes confronté à différents types de tests: tests unitaires (unit), tests d'intégration et tests fonctionnels.  Arrêtons-nous sur les tests unitaires. <br><br>  Les tests fonctionnels et d'intégration sont tout aussi importants, mais ils sont plus difficiles à configurer et à mettre en œuvre que les tests unitaires.  En un mot, le test unitaire consiste à tester de petites parties de votre code: fonctions, méthodes de classe, etc. Vous soumettez des données à l'entrée et confirmez que vous avez reçu le résultat attendu. <br><br>  <i>Avantages des tests unitaires:</i> <br><br><ul><li>  Rend le code plus stable; </li><li>  Facilite les changements dans l'implémentation d'une fonction sans changer son comportement; </li><li>  Documentez votre code.  Vous comprendrez bientôt pourquoi. </li><li>  Vous fait faire le bon design.  En effet, un code mal conçu est souvent plus difficile à tester. </li></ul><br>  <b>Développement de tests (TDD)</b> <br><br>  Pour comprendre et utiliser le développement par le biais de tests, n'oubliez pas ces 2 règles: <br><br><ol><li>  Écrivez un test qui échoue avant d'écrire le code. </li><li>  Ensuite, écrivez le code qui peut passer le test. </li></ol><br>  Lorsque nous utilisons TDD, nous parlons d'une boucle «rouge, verte, refactorisée». <br><br>  Rouge: vous écrivez un test qui a échoué sans écrire de code. <br><br>  Vert: écrivez le code le plus simple pouvant passer le test.  Même si le code vous semble le plus stupide. <br><br>  Refactor: refactoring de code, si nécessaire.  Ne vous inquiétez pas si vous changez le code et que vos tests unitaires échouent en cas de problème. <br><br><h3>  Structurer un fichier de test </h3><br>  Jest fournit des fonctions pour structurer les tests: <br><br>  <i>décrire:</i> utilisé pour regrouper vos tests et décrire le comportement de votre fonction / module / classe.  Cela prend deux paramètres.  La première est une ligne décrivant votre groupe.  La seconde est une fonction de rappel dans laquelle vous avez des cas de test ou des fonctions de hook. <br><br>  <i>it or test:</i> votre test unitaire.  Les paramètres sont les mêmes que ceux décrits.  Doit être descriptif.  Le choix du test dépend de vous, mais vous pouvez commencer par «Devrait». <br><br>  <i>beforeAll (afterAll): la</i> fonction hook s'exécute avant (et après) tous les tests.  Il prend un paramètre, qui est une fonction que vous exécuterez avant (et après) tous les tests. <br><br>  <i>beforeEach (afterEach):</i> fonction hook exécutée avant (et après) chaque test.  Il prend un paramètre, qui est la fonction que vous exécuterez avant (et après) chaque test. <br><br>  Avant de passer un test, vous devez savoir ce qui suit: <br><br>  Vous pouvez ignorer le test en utilisant <i>.skip</i> sur <i>describe</i> and <i>it</i> : <i>it.skip (...)</i> ou <i>describe.skip (...)</i> .  En utilisant <i>.skip</i> , vous dites à Jest d'ignorer le test ou le groupe. <br><br>  Vous pouvez choisir exactement les tests que vous souhaitez exécuter en utilisant <i>.only</i> sur <i>describe</i> et <i>it</i> : <i>it.only (...)</i> ou <i>describe.only (...)</i> .  Ceci est utile si vous avez beaucoup de tests et que vous souhaitez vous concentrer sur une seule chose ou «déboguer» vos tests. <br><br><h3>  Configuration de Jest </h3><br>  Pour vous montrer les fonctions de test que nous avons examinées ci-dessus, nous devons configurer Jest.  C'est très simple. <br><br>  Vous avez seulement besoin de Node.js et npm ou Yarn.  Assurez-vous que vous utilisez la dernière version de Node.js, car nous utiliserons ES6.  Créez un nouveau répertoire et initialisez-le. <br><br><pre><code class="plaintext hljs">mkdir test-example &amp;&amp; cd test-example npm init -y # OR yarn init -y</code> </pre> <br>  -y répond «oui» à toutes les questions npm ou fils.  Il devait créer un fichier package.json très simple. <br><br>  Ajoutez ensuite <i>Jest</i> à votre environnement de développement. <br><br><pre> <code class="plaintext hljs">yarn add jest --dev</code> </pre> <br>  Ajoutez ensuite le script suivant à votre <i>package.json</i> : <br><br><pre> <code class="plaintext hljs">"scripts": { "test": "jest" }</code> </pre> <br>  <i>test de fil</i> exécutera vos fichiers de test dans un répertoire.  Par défaut, Jest reconnaît les fichiers dans le répertoire __tests__ ou les fichiers se terminant par .spec.js ou .test.js. <br><br>  C’est tout.  Êtes-vous prêt à passer le premier test. <br><br><h3>  Matchers (échantillons) </h3><br>  Lorsque vous vérifiez quelque chose, vous avez besoin d'une entrée et du résultat attendu.  C'est pourquoi Jest fournit des échantillons pour tester nos valeurs: <br><br><pre> <code class="plaintext hljs">expect(input).matcher(output)</code> </pre> <br>  Jest a de nombreux échantillons, voici le plus important: <br><br>  toBe: compare l'égalité stricte (===). <br><br><pre> <code class="plaintext hljs">expect(1 + 1).toBe(2) let testsAreEssential = true expect(testAreEssential).toBe(true)</code> </pre> <br>  toEqual: compare les valeurs entre deux variables, tableaux ou objets. <br><br><pre> <code class="plaintext hljs">let arr = [1, 2] arr.push(3) expect(arr).toEqual([1, 2, 3]) let x= 1 x++ expect(x).toEqual(2)</code> </pre> <br>  toBeTruthy (toBeFalsy): indique si la valeur est vraie (ou fausse). <br><br><pre> <code class="plaintext hljs">expect(null).toBeFalsy() expect(undefined).toBeFalsy() expect(false).toBeFalsy() expect("Hello world").toBeTruthy() expect({foo: 'bar'}).toBeTruthy()</code> </pre> <br>  toContain: vérifie si un tableau contient un élément. <br><br><pre> <code class="plaintext hljs">expect(['Apple', 'Banana', 'Strawberry']).toContain('Apple')</code> </pre> <br>  toThrow: vérifie si une fonction provoque une erreur. <br><br><pre> <code class="plaintext hljs">function connect () { throw new ConnectionError() } expect(connect).toThrow(ConnectionError)</code> </pre> <br><h3>  Premiers tests </h3><br>  Nous allons maintenant écrire notre premier test et jouer avec nos fonctionnalités.  Créez d'abord un fichier example.spec.js dans votre répertoire et collez ce qui suit: <br><br><pre> <code class="plaintext hljs">describe('Example', () =&gt; { beforeAll(() =&gt; { console.log('running before all tests') }) afterAll(() =&gt; { console.log('running after all tests') }) beforeEach(() =&gt; { console.log('running before each test') }) afterEach(() =&gt; { console.log('running after each test') }) it('Should do something', () =&gt; { console.log('first test') }) it('Should do something else', () =&gt; { console.log('second test') }) })</code> </pre> <br>  Veuillez noter que nous n'avons pas besoin d'importer toutes les fonctions que nous utilisons.  Ils sont déjà fournis par Jest. <br><br>  Exécutez le <i>test de fil</i> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9dc/1a1/a75/9dc1a1a75508b0237c06dcf259895ba2.png" alt="image"><br><br>  Comme vous n'avez pas d'instructions dans les tests, elles réussiront.  Avez-vous vu différentes instructions console.log?  Vous devez mieux comprendre le fonctionnement de vos fonctions et scénarios de test. <br><br>  Maintenant, supprimez toutes les fonctions de hook et ajoutez <i>.skip</i> au premier test: <br><br><pre> <code class="plaintext hljs">describe('Example', () =&gt; { it.skip('Should do something', () =&gt; { console.log('first test') }) it('Should do something else', () =&gt; { console.log('second test') }) })</code> </pre> <br>  Exécutez <i>à</i> nouveau le <i>test de fil</i> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b84/838/421/b848384216694e15463eb07d0a19864a.png" alt="image"><br><br>  Ce n'est pas grave si le premier test ne fonctionne pas. <br><br>  Ajoutez un troisième test et utilisez <i>.only</i> : <br><br><pre> <code class="plaintext hljs">describe('Example', () =&gt; { it('Should do something', () =&gt; { console.log('first test') }) it('Should do something else', () =&gt; { console.log('second test') }) it.only('Should do that', () =&gt; { console.log('third test') }) })</code> </pre> <br>  <i>Exécutez à nouveau le test de fil</i> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bbe/7e7/4ba/bbe7e74ba45c7e52efafa9242f3bbbca.png" alt="image"><br><br>  Dans la deuxième partie de l'article, nous allons faire une implémentation simple de la pile en JavaScript en utilisant TDD. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430128/">https://habr.com/ru/post/fr430128/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430116/index.html">Les ordinateurs écrivent de la prose, mais restent inférieurs aux gens. Pourquoi?</a></li>
<li><a href="../fr430118/index.html">Unity3D: Modifier le délégué d'application iOS</a></li>
<li><a href="../fr430120/index.html">Apprivoisez la bête. Ce à quoi nous avons été confrontés lors du développement d'une application d'agenda personnel sur React Native</a></li>
<li><a href="../fr430122/index.html">Le workaholism est une condition douloureuse dont il n'est pas habituel de parler.</a></li>
<li><a href="../fr430126/index.html">Une autre liste de projets à pratiquer</a></li>
<li><a href="../fr430132/index.html">Ce que nous avons appris sur la sécurité Intel ME ces dernières années: 7 faits sur le mystérieux sous-système</a></li>
<li><a href="../fr430134/index.html">Algorithmes pour optimiser un robot de trading: un moyen efficace de trader un million rétroactivement</a></li>
<li><a href="../fr430136/index.html">Comment ils vont lancer Starlink - Internet par satellite à partir de Ilona Mask</a></li>
<li><a href="../fr430138/index.html">Optimiser un robot de trading: un algorithme génétique</a></li>
<li><a href="../fr430140/index.html">Cinq raisons de l'échec du référencement. Analyse de l'expérience de promotion infructueuse avec des exemples</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>