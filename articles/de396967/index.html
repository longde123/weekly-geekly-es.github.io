<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≥ üë®üèª‚Äçüíª ‚úåüèæ Media Player aus dem Schrank üòä üåÇ üë©‚Äçüë©‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Autor: Nikolai Khabarov
 
 Eines sch√∂nen Freitagabends beschloss ich, zu Hause einen Film anzusehen: Ich schaltete den Laptop ein, schloss das HDMI-Ka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Media Player aus dem Schrank</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/396967/"><img src="https://habrastorage.org/files/454/fd7/d95/454fd7d9552b452cb8cc2f285fdc88bc.png"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autor: Nikolai Khabarov</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Eines sch√∂nen Freitagabends beschloss ich, zu Hause einen Film anzusehen: Ich schaltete den Laptop ein, schloss das HDMI-Kabel √ºber den DisplayPort-Adapter an, nahm die Fernbedienung, schaltete den Fernseher ein und begann auf dem Laptop zu spielen. Und mir wurde klar, dass die Lautst√§rke am Fernseher nicht ausreichte - ich musste erneut nach der Fernbedienung suchen, um sie zu erh√∂hen ... Dann dachte ich: "Kann dieser Vorgang irgendwie vereinfacht werden?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Samstagmorgen war √§u√üerst fruchtbar. Ich habe beschlossen, meinen eigenen Netzwerk-Multimedia-Player so zu gestalten, wie ich es mir vorstelle. Fast alle Details wurden aus der Speisekammer entnommen, das Herz des Spielers ist der Raspberry Pi. Weitere Informationen dazu, was sich darin befindet und wie ein √§hnliches Ger√§t zusammengebaut wird, finden Sie unter dem Schnitt.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/files/a14/a2d/e46/a14a2de464df4a66bf1aa09eba6748ef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie der Beschreibung entnehmen k√∂nnen, sind meine Anforderungen an den Player √§u√üerst einfach: die F√§higkeit, Inhalte aus dem Netzwerk abzuspielen, Speicherplatz f√ºr mehrere hundert Gigabyte, die F√§higkeit, dieselbe Fernbedienung wie das Fernsehger√§t zu steuern; </font><font style="vertical-align: inherit;">Ein USB-Anschluss ist w√ºnschenswert, aber nicht erforderlich. </font><font style="vertical-align: inherit;">Gekaufte Android-Player verschwanden sofort, da solche Ger√§te im schlimmsten Sinne des Wortes gr√∂√ütenteils reines China sind und ich keine Lust hatte, mit Fehlern in ihnen zu k√§mpfen. </font><font style="vertical-align: inherit;">Dar√ºber hinaus ist nicht klar, wie die Steuerung eines solchen Ger√§ts √ºber eine Fernsehfernbedienung implementiert werden soll. Dar√ºber hinaus ist die grafische Oberfl√§che von Android im Prinzip eindeutig nicht f√ºr die Fernbedienung vorgesehen. </font><font style="vertical-align: inherit;">Daher begann die Suche nach M√ºll, aus dem man etwas machen kann.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir w√§hlen die Details aus</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst m√∂chte ich nur versuchen, die Machbarkeit der Herstellung des Endger√§ts zu verstehen. Daher werden wir zun√§chst ein Minimum an Details ber√ºcksichtigen und einen potenziellen Media Player ausprobieren, der in Betrieb ist. Wir gehen in die Speisekammer und graben buchst√§blich die Details aus, die wir brauchen: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Ein Computer mit einem HDMI-Ausgang. Der alte Raspberry Pi 1 ist f√ºr unsere Zwecke gut geeignet, Sie k√∂nnen auch den Raspberry Pi 2 verwenden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Stromversorgung f√ºr das Board - Micro-USB-Aufladung von einem alten Telefon ist geeignet. Sie k√∂nnen jedes "versuchen", aber es ist ratsam, eine Quelle mit einem Ausgangsstrom von 1A zu nehmen (ein Ampere f√ºr die Augen reicht f√ºr Pi 2, siehe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anforderungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. microSD-Karte mit 4 GB oder mehr.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. USB-Maus und / oder -Tastatur (drahtlos kann verwendet werden) und optional TSOP4836-Infrarotsignalempf√§nger oder √§hnliches. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. USB-WLAN-Adapter oder die M√∂glichkeit, ein Ethernet-Kabel mit Internet an die Karte anzuschlie√üen.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir setzen OpenElec ein, wir versuchen es</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An diesem Punkt werden wir OpenElec auf die kleinstm√∂gliche Weise ausf√ºhren. Sobald ich √ºber die Software f√ºr meinen Multimedia-Player nachdachte, erinnerte ich mich an die XBMC, die sp√§ter in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> umbenannt wurde </font><font style="vertical-align: inherit;">. Es bestand jedoch keine Lust, ein Betriebssystem zu installieren und dann Kodi zu konfigurieren. Also habe ich mich f√ºr Google entschieden und diese Assembly des GNU / Linux-Betriebssystems gefunden, auf der Kodi bereits installiert ist. Diese Assembly hei√üt OpenElec und ist ein Open Source-Projekt. Die offizielle Website ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openelec.tv.</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Daher laden wir das Installationsimage von der offiziellen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Website herunter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir w√§hlen die gew√ºnschte Version und die Plattform aus, auf der wir sie ausf√ºhren werden (in meinem Fall die stabile Version f√ºr Rasberry Pi), und laden das 'Diskimage' (Datei mit der Erweiterung .img.gz) herunter. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Packen Sie das Bild aus: </font><font style="vertical-align: inherit;">
Und schreiben Sie auf die Speicherkarte:</font></font><br>
<code> $ gunzip -d &lt; &gt;.img.gz<br>
</code><br><font style="vertical-align: inherit;"></font><br>
 <code>$ sudo dd if= &lt; &gt;.img of=/dev/mmblck0 bs=4M<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Korrigieren Sie / dev / mmblck0 - wenn sich mehr als eine Speicherkarte in Ihrem System befindet. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Achtung! Der Inhalt der Speicherkarte wird vollst√§ndig gel√∂scht.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Windows-Benutzer k√∂nnen das kostenlose </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Win32 Disk Imager-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dienstprogramm verwenden </font><font style="vertical-align: inherit;">. Das Dienstprogramm verf√ºgt √ºber eine grafische Oberfl√§che. W√§hlen Sie die Datei und die Speicherkarte aus und klicken Sie auf "Schreiben". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie nun sicher, dass mit dem Befehl alles auf die Karte geschrieben ist</font></font><br>
<code>$ sync<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oder entfernen Sie die Karte einfach durch sicheres Entfernen des Ger√§ts in der grafischen Oberfl√§che des Betriebssystems. Wir bekommen es physisch und legen es in den Raspberry Pi. Verbinden Sie anschlie√üend das Ethernet-Kabel mit dem Internet oder stecken Sie den USB-WLAN-Adapter ein. Schlie√üen Sie die Maus und das HDMI-Kabel an das Fernsehger√§t an. Wenn Sie eine Infrarot-Fernbedienung verwenden m√∂chten, m√ºssen Sie den IR-Empf√§nger an GPIO18 und die Prozessorleistung (3,3 V) anschlie√üen. Das endg√ºltige Anschlussdiagramm lautet wie folgt: </font></font><br>
<img src="https://habrastorage.org/files/6d3/6bf/259/6d36bf259da347bcb0a1e6818b949c99.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich f√ºr einen Infrarotempf√§nger entscheiden, gehen Sie vorsichtig damit um </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- stellen Sie sicher, dass die Pinbelegung Ihres Empf√§ngers korrekt ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles, jetzt k√∂nnen Sie die Umgebung selbst betrachten. Wir versorgen das Board mit Strom aus der Stromquelle. Nach dem Laden wird der Assistent f√ºr die Ersteinrichtung auf dem Bildschirm angezeigt:</font></font><br>
<img src="https://habrastorage.org/files/143/7e8/037/1437e803748c4fc3a275a1a5cacbc1bb.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hrend des Setups empfehle ich, den SSH-Zugriff sofort zu aktivieren. </font><font style="vertical-align: inherit;">Alle anderen Fragen sind trivial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen Sie mit der Maus und / oder der Tastatur mit der Umgebung des zuk√ºnftigen Spielers spielen. </font><font style="vertical-align: inherit;">Sie k√∂nnen versuchen, das Video in verschiedenen Formaten abzuspielen (Sie k√∂nnen ein USB-Flash-Laufwerk an freie Anschl√ºsse anschlie√üen) und im Allgemeinen verstehen, was was ist. </font><font style="vertical-align: inherit;">Es gibt verschiedene F√§lle f√ºr das Raspberry Pi-Board selbst. Vielleicht ist jemand auf minimalistische Weise mit allem zufrieden. Sie k√∂nnen beispielsweise eine drahtlose USB-Maus anschlie√üen und das Ger√§t verwenden. </font><font style="vertical-align: inherit;">Wir werden es weiter verbessern.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlie√üen Sie die IR-Fernbedienung an</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie keinen IR-Empf√§nger anschlie√üen m√∂chten, k√∂nnen Sie diesen Abschnitt einfach √ºberspringen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Fernbedienung verwenden zu k√∂nnen, m√ºssen wir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIRC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> konfigurieren </font><font style="vertical-align: inherit;">. Schalten wir zun√§chst das Modul ein, das √ºber den GPIO-Port direkt mit dem Empf√§nger zusammenarbeitet. F√ºgen Sie dazu der DeviceTree-Konfigurationsdatei eine Zeile hinzu. Wir melden uns √ºber SSH bei Ihrem Ger√§t an (haben Sie SSH w√§hrend der Ersteinrichtung aktiviert? Wenn nicht, k√∂nnen Sie dies in der grafischen Oberfl√§che des Systems selbst tun). </font><font style="vertical-align: inherit;">
Das Standardkennwort lautet openelec. F√ºgen Sie der Datei die ben√∂tigte Zeile hinzu: </font><font style="vertical-align: inherit;">
Ganz am Ende f√ºgen wir die Zeile hinzu und laden sie erneut: </font><font style="vertical-align: inherit;">
Jetzt m√ºssen wir sicherstellen, dass alles funktioniert und der LIRC Befehle von der Fernbedienung empfangen kann. Dazu stoppen wir LIRC und versuchen, Daten von der Fernbedienung abzurufen:</font></font><br>
<code>$ ssh root@ip_address<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<code># mount -o remount,rw /flash<br>
# nano /flash/config.txt<br>
</code><br><font style="vertical-align: inherit;"></font><br>
 <code> dtoverlay=lirc-rpi<br>
</code><br><font style="vertical-align: inherit;"></font><br>
 <code> # killall lircd<br>
 # mode2 -d /dev/lirc0<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir klicken auf eine beliebige Taste auf der Fernbedienung und leuchten auf dem Empf√§nger - ein Text, der die eingehenden Impulse beschreibt, sollte in der Konsole laufen. Jetzt sind wir √ºberzeugt, dass alles funktioniert, und wir k√∂nnen LIRC f√ºr die Verwendung Ihrer Fernbedienung schulen. Bitte beachten Sie, dass lircd w√§hrend des Konfigurationsprozesses gestoppt werden muss. Wir haben dies zuvor mit dem Befehl kill getan. Es gibt ein spezielles Dienstprogramm f√ºr die Schulung. Wir f√ºhren die folgenden Befehle aus, um es zu starten: </font><font style="vertical-align: inherit;">
Befolgen </font><font style="vertical-align: inherit;">Sie als </font><font style="vertical-align: inherit;">N√§chstes die Anweisungen auf dem Bildschirm. Zu Beginn werden Sie vom Dienstprogramm aufgefordert, die verschiedenen Tasten auf der Fernbedienung zu dr√ºcken, bis die Punkte auf dem Bildschirm ausgef√ºllt sind, um das Muster Ihrer Fernbedienung zu erfahren. Dann m√ºssen Sie mit Text angeben, welche Schaltfl√§che Sie LIRC beibringen m√∂chten, und auf den Empf√§nger leuchten. </font><font style="vertical-align: inherit;">
Ich empfehle, dass Sie mindestens die folgenden Schaltfl√§chen unterrichten: </font><font style="vertical-align: inherit;">
KEY_UP </font><font style="vertical-align: inherit;">
KEY_DOWN</font></font><br>
<code># cd /storage/.config<br>
# irrecord -d /dev/lirc0 lircd.conf<br>
</code><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_LEFT </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_RIGHT </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_OK </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_PLAY </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_EXIT </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_STOP </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_INFO </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_EPG </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die gesamte Liste der im System verf√ºgbaren Tasten kann √ºber den folgenden Befehl abgerufen werden: </font><font style="vertical-align: inherit;">
Auf der Fernbedienung k√∂nnen Sie eine beliebige f√ºr Sie geeignete Taste ausw√§hlen. Bei den meisten Fernsehger√§ten im HDMI-Modus tun die meisten Tasten nichts, was nat√ºrlich zur Hand ist. Aus diesem Grund sollten wir die Datei lircd.conf mit den Parametern Ihrer Fernbedienung abrufen. Wir starten die Karte neu und versuchen, die Fernbedienung zu verwenden. </font><font style="vertical-align: inherit;">
Sie k√∂nnen den Player auch ein- und ausschalten. Schlie√üen Sie dazu den Empf√§nger an den zweiten Pin des Raspberry PI GPIO1 f√ºr Raspberry PI 1 oder GPIO3 f√ºr Raspberry PI 2 an. Auf beiden Platinen befinden sich diese Pins an derselben Stelle am Platinenanschluss:</font></font><br>
<code> # irrecord -list namespace<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<img src="https://habrastorage.org/files/f81/505/c34/f81505c3453242c6afaaa75e72237b19.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie diesen Pin mit Masse verbinden, k√∂nnen Sie die Platine im ausgeschalteten Zustand aktivieren. Mit dieser Verbindung k√∂nnen Sie die Taste KEY_POWER programmieren. Der Player wird ausgeschaltet, wenn Sie darauf klicken, und er wird durch jedes Signal einer beliebigen Fernbedienung eingeschaltet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sammeln das Ger√§t ernsthafter</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich wollte ein gr√ºndlicheres Ger√§t mit dem Erscheinungsbild des Werksger√§ts erstellen und eine Festplatte hinzuf√ºgen. Ich schaute in die Speisekammer und fand einen alten Satellitenempf√§nger. Im Inneren gibt es bereits eine ausreichende Stromversorgung f√ºr alle Stromkomponenten, einen IR-Signalempf√§nger und einen Ausschalter an der R√ºckwand. Aufgrund der bereits installierten Sieben-Segment-Anzeige besteht auch die M√∂glichkeit, eine Uhr auf der Frontplatte anzubringen. Und nat√ºrlich ist der Fall selbst f√ºr unsere Zwecke gro√üartig. Der Satellitenempf√§nger kann durch einen alten DVD- oder VHS-Player ersetzt werden, auch wenn er nicht funktioniert.</font></font><br>
<i>,         ‚Äî   ,        .    /     ‚Äî     ,       220 .</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir √∂ffnen den Fall des Empf√§ngers / Videorecorders. Zun√§chst m√ºssen wir sicherstellen, dass das Netzteil einen 5-V-Ausgang hat, der die erforderliche Leistung abgeben kann. Dazu √ºberpr√ºfen wir mit einem Multimeter das Vorhandensein von 5 V und verfolgen dann, durch welche Komponenten diese 5 V erhalten werden. Wenn die Elementbasis des Gleichrichters und der Durchmesser der Transformatorwicklung des Netzteils 2-3 Ampere aushalten k√∂nnen, haben wir Gl√ºck - es gibt eine Quelle, andernfalls m√ºssen Sie die Quelle im Geh√§use gegen eine leistungsst√§rkere austauschen. Dann nehmen wir die Hauptplatine / das Bandlaufwerk / das optische Laufwerk heraus und senden es zur√ºck an die Speisekammer - es wird sich als n√ºtzlich erweisen. Im Inneren lassen wir nur die Netzteilplatine und die Platine mit einer Frontplatte, auf der sich ein IR-Empf√§nger befindet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie nun, wo Sie den Raspberry Pi selbst installieren m√∂chten. Die Auswahl hier ist recht einfach: Die Seite der Platine mit HDMI sollte au√üerhalb des Geh√§uses liegen, die Seite mit den USB-Anschl√ºssen muss innen angebracht werden, um interne Komponenten anzuschlie√üen. Au√üerdem ben√∂tigen wir zumindest einen gewissen Zugriff auf die microSD-Karte, falls die Firmware ge√§ndert wird. Am Geh√§use des Empf√§ngers befinden sich √ñffnungen f√ºr Cinch-Anschl√ºsse. Wir werden die Platine so platzieren, dass der HDMI-Anschluss von au√üen so gut wie m√∂glich zug√§nglich ist. Auf der gleichen Seite befinden sich die Ausg√§nge der Soundkarte und des Micro-USB, die im Peripheriemodus arbeiten. Wir sind nicht an diesen Anschl√ºssen interessiert, wir werden Strom von au√üen √ºber den GPIO-Hauptanschluss der Platine liefern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir markieren, wo Sie etwas zuschneiden m√ºssen, damit der HDMI-Anschluss von der Au√üenseite des Geh√§uses frei in die Platine eingef√ºhrt wird, und skizzieren vier L√∂cher f√ºr die Installation der Platine. Ich habe folgende Racks verwendet:</font></font><br>
<img src="https://habrastorage.org/files/29f/6ab/6c5/29f6ab6c5f4b4e2daf092489d0ba57a7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Racks des Motherboards st√∂rten, und ich entfernte sie mit Hilfe einer Zange. Manipulationen m√ºssen sorgf√§ltig durchgef√ºhrt werden. Mit einer unangenehmen Bewegung k√∂nnen Sie das Geh√§use selbst leicht biegen. Wir bohren, s√§gen, befestigen das Gestell mit geeigneten Schrauben und das Brett selbst daran. </font></font><br>
<img src="https://habrastorage.org/files/2bf/30d/ec7/2bf30dec733c4c6ca8db3c46d4beb367.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen Sie einen Platz f√ºr die Festplatte finden. Hier ist die Anforderung recht einfach: Sie m√ºssen einige freie Zentimeter von der Seite des SATA-Anschlusses im Geh√§use lassen, da dort ein Adapter eingesetzt wird. Die Festplatte hat Gewinde an der Unterseite und an den Seiten der Festplatte. Winchester muss leicht angehoben werden, damit es nicht auf dem Metall liegt. Ich habe das Problem sehr einfach gel√∂st - ich habe Schrauben genommen, die f√ºr das untere Gewinde geeignet sind, aber etwas l√§nger als n√∂tig, und den Abstand zwischen dem Geh√§use und der Festplatte mit gr√∂√üeren Muttern gelegt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen wir einen SATA-USB-Konverter oder einen alten Beh√§lter f√ºr die Festplatte finden, aus dem ein solcher Konverter herausgezogen werden kann. Ich hatte einen Container, aber leider stellte sich heraus, dass er nicht funktioniert. Ich musste zum Laden f√ºr den SATA USB Konverter laufen. Wir werden den USB-Anschluss in den Raspberry PI einstecken, aber um die Platine nicht mit sehr starken Str√∂men zu beladen, die die Festplatte ben√∂tigt, insbesondere wenn Sie die Spindel drehen, m√ºssen Sie zus√§tzliche Energie direkt vom Netzteil leiten. In meinem Fall hatte der Adapter ein Kabel mit zwei USB-Anschl√ºssen. Ich habe einen davon direkt an das Netzteil angeschlossen, indem ich den USB-Antwortanschluss in der N√§he des Netzteils verl√∂tet habe.</font></font><br>
<img src="https://habrastorage.org/files/f53/06a/235/f5306a2353de423592d7e82a33878e1c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zwei weitere Dinge, √ºber die Sie sofort nachdenken sollten. Der erste ist, wo und wie sich der externe USB-Anschluss befindet. Die zweite M√∂glichkeit besteht darin, den Wi-Fi-Adapter zu platzieren oder, wenn Sie nur eine Ethernet-Verbindung implementieren m√∂chten, den Ethernet-Anschluss an der Wand des Geh√§uses anzubringen (wenn Sie die Karte mit der Kante dieses Anschlusses am Geh√§use platzieren, k√∂nnen Sie keine USB-Ger√§te von innen anschlie√üen). Das Ethernet kann verl√§ngert werden, indem eine herk√∂mmliche Steckdose in das Geh√§use eingesetzt und ein kurzes Kabel mit einem Stecker gecrimpt wird.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es werden jetzt sehr kleine USB-WLAN-Dongles verkauft, aber Sie m√ºssen diese nicht in ein Metallgeh√§use stecken - das Signal kann schlecht √ºbertragen werden. Sie k√∂nnen ein kurzes USB-Verl√§ngerungskabel nehmen, den USB-Anschluss an der R√ºckseite des Geh√§uses anbringen und dort einstecken. Es gibt auch USB-Adapter mit abnehmbaren Antennen. Sie k√∂nnen den RMA-Anschluss an der R√ºckseite des Geh√§uses verl√§ngern und die Antenne dort anschrauben. Ich hatte einen ziemlich alten und daher einen ziemlich gro√üen USB-WLAN-Adapter mit einer Rundumantenne und einem Mini-USB-Eingang. Ich konnte es wegen seiner Gr√∂√üe nirgendwo hinstellen und entschied mich, es im Gesch√§ftsleben einzusetzen. Er entfernte das Geh√§use - seine Form erlaubte es nicht, die Antenne von au√üen anzubringen. Die Geb√ºhr war ziemlich hoch und ich musste sorgf√§ltig √ºber die Platzierung nachdenken. Gl√ºcklicherweise stellte sich heraus, dass es sehr d√ºnn war, und ich entschied mich, es √ºber die USB-Anschl√ºsse des Raspberry Pi zu stecken. Der RMA-Anschluss ist ausgefallenauf eine Mutter gedreht und in das Geh√§use ein hohes Rack f√ºr die Platine legen. Der Zugang zu USB blieb bestehen, und die Antenne wurde √ºber das Geh√§use angehoben. Gro√üartig!</font></font><br>
<img src="https://habrastorage.org/files/c1d/ed1/7c7/c1ded17c77d24ba0b3f44aadb5e88ae9.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen Sie das USB-Verl√§ngerungskabel irgendwie an der Vorderseite befestigen und sicherstellen, dass es nichts im Geh√§use st√∂rt. In meinem Fall hatte der Empf√§nger eine T√ºr f√ºr Zugangskarten, und ich beschloss, einen Stecker dahinter zu stecken - um keinen Staub zu sammeln! Deshalb habe ich es nicht zu sorgf√§ltig geschnitten und es hinten mit Hei√ükleber gef√ºllt.</font></font><br>
<img src="https://habrastorage.org/files/800/d2b/468/800d2b46858841028fdacbd45c9eee9a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interessanter ist die Situation mit der Frontplatte - es gibt viele M√∂glichkeiten, woraus sie besteht. Ich musste die dynamische Anzeige von Sieben-Segment-Indikatoren mithilfe von DMA implementieren (direkter Speicherzugriff, die direkte Implementierung der dynamischen Anzeige √ºber GPIO-Ports w√ºrde zu viele CPU-Ressourcen verbrauchen und die Helligkeit der Segmente w√§re aufgrund der Aktivit√§t des Betriebssystems ungleichm√§√üig). Dies ist jedoch bereits ein Thema f√ºr einen separaten Artikel, und au√üerdem k√∂nnen sich solche Boards radikal unterscheiden. Daher bieten wir hier das Recht, dem Leser unser kreatives Potenzial zu zeigen. Sie k√∂nnen den </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Quellcode der Implementierung f√ºr mein Board</font></a><font style="vertical-align: inherit;"> studieren</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Im einfachsten Fall k√∂nnen Sie einfach die zum IR-Empf√§nger f√ºhrenden Spuren abschneiden und mit drei Dr√§hten direkt darauf l√∂ten. </font><font style="vertical-align: inherit;">Ich stelle nur fest, dass ich ein IDE-Kabel verwendet habe, um es mit dem GPIO-Anschluss der Platine zu verbinden. Es passt perfekt auf den Raspberry Pi-Anschluss und die Dr√§hte k√∂nnen problemlos mit anderen Komponenten verl√∂tet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende habe ich so ein Ger√§t bekommen:</font></font><br>
<img src="https://habrastorage.org/files/1fd/936/99e/1fd93699eee74e1888e1fd8476e10135.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anpassen</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie beim Einschalten ein farbiges Quadrat in der oberen rechten Ecke des Bildschirms sehen, reicht der Strom f√ºr den Raspberry Pi nicht aus - entweder ein schwaches Netzteil, zu d√ºnne Kabel oder USB-Peripherieger√§te ben√∂tigen zu viel Strom. Im ersten Fall hilft es, nur das Netzteil durch ein leistungsf√§higeres zu ersetzen. Im zweiten Fall kann das Problem leicht gel√∂st werden, indem die Dr√§hte durch dickere ersetzt werden oder indem mehrere Kerne parallel verwendet werden. Im dritten Fall wird das Problem gel√∂st, indem USB-Ger√§te direkt von der Stromversorgung gespeist werden oder beispielsweise ein USB-Hub installiert wird, der eine externe Stromquelle anschlie√üen kann.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie werden wahrscheinlich auch sehen, dass Ihre Festplatte als externes Flash-Laufwerk an das System angeschlossen ist. Machen wir es zum Hauptspeicher im Betriebssystem. Beim ersten Start nutzt OpenElec automatisch den gesamten freien Speicherplatz auf der microSD-Karte f√ºr den Datenabschnitt, der dann als / storage bereitgestellt wird. Die erfolgreichste Entscheidung scheint mir, die gesamte Festplatte als / Speicher zu verwenden. Formatieren Sie dazu die Festplatte und erstellen Sie mit dem ext3 / 4-Dateisystem eine Partition darauf. Dies kann direkt auf dem Player mit den Dienstprogrammen parted und mkfs erfolgen. Mit den folgenden Befehlen wird der gesamte Inhalt der Festplatte gel√∂scht und eine ext4-Partition erstellt: </font><font style="vertical-align: inherit;">
Dazu m√ºssen Sie sich √ºber SSH beim Player anmelden. H√§ngen Sie dann die neue Partition irgendwo ein:</font></font><br>
<br>
<code># umount /dev/sda1<br>
 # parted /dev/sda<br>
 GNU Parted 3.2<br>
 Using /dev/sda<br>
 Welcome to GNU Parted! Type 'help' to view a list of commands.<br>
 (parted) mklabel GPT <br>
 mklabel GPT<br>
 Warning: The existing disk label on /dev/sda will be destroyed and all data on<br>
 this disk will be lost. Do you want to continue?<br>
 Yes/No? yes <br>
 yes<br>
 (parted) mkpart primary 2048s 100% <br>
 mkpart primary 2048s 100%<br>
 (parted) q <br>
 q<br>
 Information: You may need to update /etc/fstab.<br>
 # mkfs.ext4 /dev/sda1<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code># mkdir /tmp/hdd<br>
# mount /dev/sda1 /tmp/hdd<br>
</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kopieren Sie den gesamten Inhalt von / storage auf eine neue Partition, um den aktuellen Status </font><font style="vertical-align: inherit;">
beizubehalten </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">H√§ngen Sie die Partition aus und l√∂schen </font><font style="vertical-align: inherit;">
Sie </font><font style="vertical-align: inherit;">gegebenenfalls den Ordner: </font><font style="vertical-align: inherit;">Jetzt m√ºssen Sie angeben, welches Laufwerk beim Booten </font><font style="vertical-align: inherit;">bereitgestellt </font><font style="vertical-align: inherit;">werden soll. Sie k√∂nnen dies tun, indem Sie die Befehlszeile der Kernel-Parameter anpassen. Zuerst ermitteln wir jedoch die UUID der Partition unserer Festplatte: </font><font style="vertical-align: inherit;">
Kopieren Sie die UUID der Partition in die Zwischenablage. Stellen Sie nun das Dateisystem erneut mit der Kernelkonfiguration zum Schreiben bereit und beheben Sie es: </font><font style="vertical-align: inherit;">
Ersetzen </font><font style="vertical-align: inherit;">Sie </font><font style="vertical-align: inherit;">in der Datei den Datentr√§gerparameter durch die UUID unserer Datentr√§ger. Der Inhalt der Datei sollte ungef√§hr so ‚Äã‚Äãaussehen: </font><font style="vertical-align: inherit;">
Nach dem Neustart verwendet der Player die Festplatte als / Speicher, und der Abschnitt auf der Speicherkarte kann gel√∂scht werden, damit er beim Booten nicht automatisch bereitgestellt wird:</font></font><br>
 <code># cp -rf /storage/. /tmp/hdd<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
 <code># umount /dev/sda1<br>
# rmdir /tmp/hdd<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code># blkid /dev/sda1<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code># mount -o rw,remount /flash<br>
# nano /flash/cmdline.txt<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code>boot=/dev/mmcblk0p1 disk=UUID=95013338-89b1-43af-8471-9b30efc85d98 quiet<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code># parted -s /dev/mmcblk0 rm 2<br>
</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist so ein lustiges Wochenende, das ich hatte. </font><font style="vertical-align: inherit;">Vergessen Sie nicht, dass sich das GNU / Linux-Betriebssystem an Bord dieses Media Players befindet und Sie es nach Belieben selbst √§ndern / erg√§nzen k√∂nnen. </font><font style="vertical-align: inherit;">Sie k√∂nnen auch einige Aufgaben der Hausautomation mit demselben Ger√§t l√∂sen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und schlie√ülich ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Video der Rede des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Autors eines Artikels √ºber das Ger√§t. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habt eine sch√∂ne Aussicht!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de396967/">https://habr.com/ru/post/de396967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de396957/index.html">Kaufen Sie schnell und einfach in den USA mit Pochtoy.com (+ Geschenk f√ºr Leser)</a></li>
<li><a href="../de396959/index.html">Physik in der Tierwelt: elektrischer Aal und sein "Kraftwerk"</a></li>
<li><a href="../de396961/index.html">Wer baut einen Fusionsreaktor?</a></li>
<li><a href="../de396963/index.html">Wie kaufe ich ein gebrauchtes iPhone?</a></li>
<li><a href="../de396965/index.html">Abfangen eines Gespr√§chs am Telefon oder einfache Funksteuerung bei 39 MHz</a></li>
<li><a href="../de396969/index.html">Intel Jetzt Bruder in ARMs</a></li>
<li><a href="../de396971/index.html">Es wird vorgeschlagen, eine fl√ºgellose Eiderente mit Hilfe der Gentechnik wiederzubeleben.</a></li>
<li><a href="../de396973/index.html">Hersteller in den USA haben nicht das Recht, eine Garantie nach dem Entfernen des Garantieaufklebers abzulehnen. Was ist in Russland?</a></li>
<li><a href="../de396975/index.html">Computer im Auto, Jahr 2016</a></li>
<li><a href="../de396977/index.html">K√ºnstliche Intelligenz hat Sprachprobleme</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>