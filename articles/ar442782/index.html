<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐น ๐คธ๐ผ ๐ VShard - ุงูุชุญุฌูู ุงูุฃููู ูู Tarantool ๐ง๐พ ๐ ๐คฒ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุงู ุ ุงุณูู ููุงุฏูุณูุงู ุ ูุฃูุง ุนุถู ูู ูุฑูู ุชุทููุฑ Tarantool . Tarantool ูู DBMS ูุฎุงุฏู ุชุทุจูู ูู ูู ูุงุญุฏุฉ. ุงูููู ุณุฃุญูู ูุตุฉ ููู ูููุง ุจุชุทุจูู ุงูููุงุณ ุงูุฃููู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VShard - ุงูุชุญุฌูู ุงูุฃููู ูู Tarantool</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/442782/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/4p/e8/fo/4pe8foryc_t_l5joliydwpislhm.png"><br><br>  ูุฑุญุจุงู ุ ุงุณูู ููุงุฏูุณูุงู ุ ูุฃูุง ุนุถู ูู ูุฑูู ุชุทููุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Tarantool</a> .  Tarantool ูู DBMS ูุฎุงุฏู ุชุทุจูู ูู ูู ูุงุญุฏุฉ.  ุงูููู ุณุฃุญูู ูุตุฉ ููู ูููุง ุจุชุทุจูู ุงูููุงุณ ุงูุฃููู ูู ุชุงุฑุงูุชูู ุนู ุทุฑูู ูุญุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">VShard</a> . <br><br>  ุจุนุถ ุงููุนุฑูุฉ ุงูุฃุณุงุณูุฉ ุฃููุง. <br><br>  ููุงู ููุนุงู ูู ุงูุชุญุฌูู: ุฃููู ูุนููุฏู.  ูููุงู ููุนุงู ูู ุงูููุงุณ ุงูุฃููู: ุงููุณุฎ ุงููุชูุงุซู ูุงููุดุงุฑูุฉ.  ูุถูู ุงููุณุฎ ุงููุชูุงุซู ุชุญุฌูููุง ุญุณุงุจููุง ุจูููุง ูุชู ุงุณุชุฎุฏุงู ุงูุชุฏุฑุฌ ูุชุบููุฑ ุญุฌู ุงูุจูุงูุงุช. <br><br>  ุชูุณู ุงููุดุงุฑูุฉ ุฃูุถูุง ุฅูู ููุนูู: ุงููุดุงุฑูุฉ ุงููุงุฆูุฉ ุนูู ุงููุทุงู ูุงููุดุงุฑูุฉ ุงููุงุฆูุฉ ุนูู ุงูุชุฌุฒุฆุฉ. <br><br>  ุชุดูุฑ ุงููุดุงุฑูุฉ ุงููุณุชูุฏุฉ ุฅูู ุงููุทุงู ุฅูู ุฃู ุจุนุถ ููุงุชูุญ shard ูุชู ุญุณุงุจูุง ููู ุณุฌู ูุธุงู ุงููุฌููุนุฉ.  ูุชู ุฅุณูุงุท ููุงุชูุญ ุงููุทุน ุนูู ุฎุท ูุณุชููู ููุตูู ุฅูู ูุทุงูุงุช ูุชุฎุตูุตูุง ูุนูุฏ ูุนููุฉ ูุฎุชููุฉ. <br><br>  ุชููู ุนูููุฉ ุงูุชุฌุฒุฆุฉ ุงููุณุชูุฏุฉ ุฅูู ุงูุชุฌุฒุฆุฉ ุฃูู ุชุนููุฏูุง: ูุชู ุงุญุชุณุงุจ ุฏุงูุฉ ุชุฌุฒุฆุฉ ููู ุณุฌู ูู ูุชูุฉ.  ูุชู ุชุฎุตูุต ุงูุณุฌูุงุช ุงูุชู ููุง ููุณ ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ูููุณ ุงูุนูุฏุฉ ุงููุนููุฉ. <br><br>  ุณุฃุฑูุฒ ุนูู ุงูุชูุณุน ุงูุฃููู ุจุงุณุชุฎุฏุงู ุงูุชูุณูู ุงููุงุฆู ุนูู ุงูุชุฌุฒุฆุฉ. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุชุทุจูู ุฃูุฏู </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงู Tarantool Shard</a> ุงููุญุฏุฉ ุงูููุทูุฉ ุงูุฃุตููุฉ ููุชุญุฌูู ุงูุฃููู.  ูุงุณุชุฎุฏูุช ุทุฑููุฉ ุจุณูุทุฉ ูุจููุฉ ุนูู ุฃุณุงุณ ุงูุชุฌุฒุฆุฉ ูููุงุชูุญ ุดุงุฑุงุช ูุญุณูุจุฉ ุจูุงุณุทุฉ ุงูููุชุงุญ ุงูุฃุณุงุณู ูุฌููุน ุงูุณุฌูุงุช ูู ูุฌููุนุฉ. <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">function shard_function(primary_key) return guava(crc32(primary_key), shard_count) end</code> </pre> <br>  ููู ูู ุงูููุงูุฉ ุฃุตุจุญ Tarantool Shard ุบูุฑ ูุงุฏุฑ ุนูู ูุนุงูุฌุฉ ุงูููุงู ุงูุฌุฏูุฏุฉ. <br><br>  ุฃููุงู ุ ุฃุตุจุญ ุฃุญุฏ ูุชุทูุจุงุชูุง ุงูููุงุฆูุฉ ูู <b>ุงูููุงู</b> ุงููุถููู <b>ููุจูุงูุงุช ุฐุงุช ุงูุตูุฉ ุงูููุทููุฉ</b> .  ุจูุนูู ุขุฎุฑ ุ ุนูุฏูุง ูููู ูุฏููุง ุจูุงูุงุช ูุฑุชุจุทุฉ ููุทููุงู ุ ูุฑูุฏ ุฏุงุฆููุง ุชุฎุฒูููุง ุนูู ุนูุฏุฉ ูุนููุฉ ูุงุญุฏุฉ ุ ุจุบุถ ุงููุธุฑ ุนู ุทุจูููุฌูุง ุงููุชูุฉ ูุงูุชูุงุฒู ุจูู ุงูุชุบููุฑุงุช.  ูุง ูููู ุฃู ุชุถูู Tarantool Shard ุฐูู.  ูุชู ุญุณุงุจ ุงูุชุฌุฒุฆุฉ ููุท ูุน ุงูููุงุชูุญ ุงูุฃุณุงุณูุฉ ุ ูุจุงูุชุงูู ูููู ุฃู ุชุชุณุจุจ ุฅุนุงุฏุฉ ุงูุชูุงุฒู ูู ุงููุตู ุงููุคูุช ููุณุฌูุงุช ูุน ููุณ ุงูุชุฌุฒุฆุฉ ูุฃู ุงูุชุบููุฑุงุช ูุง ูุชู ุชูููุฐูุง ุฐุฑููุง. <br><br>  ููุงู ูุฐุง ุงูููุต ูู ุงูุจูุงูุงุช ุงููุญููุฉ ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ุจุงููุณุจุฉ ููุง.  ููุง ูุซุงู.  ูููุชุฑุถ ุฃู ููุงู ุจูููุง ูุงู ุฃุญุฏ ุงูุนููุงุก ุจูุชุญ ุญุณุงุจ ููู.  ูุฌุจ ุชุฎุฒูู ุงููุนูููุงุช ุงููุชุนููุฉ ุจุงูุญุณุงุจ ูุงูุนููู ูุนูุง ูุงุฏููุง ุญุชู ูููู ุงุณุชุฑุฏุงุฏูุง ูู ุทูุจ ูุงุญุฏ ุฃู ุชุบููุฑูุง ูู ูุนุงููุฉ ูุงุญุฏุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุฃุซูุงุก ุชุญููู ุงูุฃููุงู.  ุฅุฐุง ุงุณุชุฎุฏููุง ุงูุชูุงุณู ุงูุชูููุฏู ูู Tarantool Shard ุ ูุณุชููู ููุงู ููู ุฏุงูุฉ ุชุฌุฒุฆุฉ ูุฎุชููุฉ ููุญุณุงุจุงุช ูุงูุนููุงุก.  ูุฏ ุชูุชูู ุงูุจูุงูุงุช ุนูู ุนูุฏ ูุนููุฉ ูููุตูุฉ.  ูุฐุง ูุนูุฏ ุญููุง ููุงู ูู ูุฑุงุกุฉ ููุนุงูุฌุฉ ุจูุงูุงุช ุงูุนููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">format = {{'id', 'unsigned'}, {'email', 'string'}} box.schema.create_space('customer', {format = format}) format = {{'id', 'unsigned'}, {'customer_id', 'unsigned'}, {'balance', 'number'}} box.schema.create_space('account', {format = format})</code> </pre> <br>  ูู ุงููุซุงู ุฃุนูุงู ุ ูููู ุฃู ุชููู ุญููู ูุนุฑู ุงูุญุณุงุจุงุช ูุงูุนููู ุบูุฑ ูุชุณูุฉ.  ุฅููู ูุชุตููู ุจูุงุณุทุฉ ุงูุญูู customer_id ุงูุฎุงุต ุจุงูุญุณุงุจ ูุญูู ูุนุฑู ุงูุนููู.  ููุชูู ุญูู ุงููุนุฑูู ููุณู ููุฏ ุงูุชูุฑุฏ ููููุชุงุญ ุงูุฃุณุงุณู ููุญุณุงุจ.  ููุง ูููู ูุดุงุฑุฏ ุฃุฏุงุก ุงูุชุธููู ุจุฃู ุทุฑููุฉ ุฃุฎุฑู. <br><br>  ููุงู ูุดููุฉ ุฃุฎุฑู ุชุชูุซู ูู ุฅุนุงุฏุฉ <b>ุจุทูุฆุฉ ูุฅุนุงุฏุฉ ุงูุชูุฒูุน</b> ุ ููู ุงููุดููุฉ ุงูุฃุณุงุณูุฉ ูุฌููุน ุดุธุงูุง ุงูุชุฌุฒุฆุฉ.  ุฎูุงุตุฉ ุงูููู ูู ุฃูู ุนูุฏ ุชุบููุฑ ููููุงุช ุงููุชูุฉ ุ ุชุชุบูุฑ ูุธููุฉ shard ูุฃููุง ุชุนุชูุฏ ุนุงุฏุฉ ุนูู ุนุฏุฏ ุงูุนูุฏ.  ูุฐูู ุนูุฏูุง ุชุชุบูุฑ ุงููุธููุฉ ุ ูู ุงูุถุฑูุฑู ุงุณุชุนุฑุงุถ ุฌููุน ุงูุณุฌูุงุช ูู ุงููุฌููุนุฉ ูุฅุนุงุฏุฉ ุญุณุงุจ ุงููุธููุฉ.  ูุฏ ูููู ูู ุงูุถุฑูุฑู ุฃูุถูุง ููู ุจุนุถ ุงูุณุฌูุงุช.  ูุฃุซูุงุก ููู ุงูุจูุงูุงุช ุ ูุง ูุนุฑู ุญุชู ุฅุฐุง ูุงู ุงูุณุฌู ุงููุทููุจุ  ูู ุงูุทูุจ ุชู ุจุงููุนู ููู ุงูุจูุงูุงุช ุฃู ูุชู ููููุง ูู ุงูููุช ุงูุญุงูู.  ูุจุงูุชุงูู ุ ุฃุซูุงุก ุฅุนุงุฏุฉ ุงููุดุงุฑูุฉ ุ ูู ุงูุถุฑูุฑู ุชูุฏูู ุทูุจุงุช ูุฑุงุกุฉ ูุน ูู ูู ูุธุงุฆู shard ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ.  ุชุชู ูุนุงูุฌุฉ ุงูุทูุจุงุช ูุฑุชูู ุฃุจุทุฃ ุ ููุฐุง ุบูุฑ ููุจูู. <br><br>  ููุงู ูุดููุฉ ุฃุฎุฑู ูุน Tarantool Shard ููู ููุฉ ุชููุฑ ุงููุฑุงุกุงุช ูู ุญุงูุฉ ูุดู ุงูุนูุฏุฉ ูู ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุญู ุฌุฏูุฏ </h2><br>  ููุฏ ุฃูุดุฃูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Tarantool VShard</a> ูุญู ุงููุดููุงุช ุงูุซูุงุซุฉ ุงููุฐููุฑุฉ ุฃุนูุงู.  ูุชูุซู ุงูุงุฎุชูุงู ุงูุฑุฆูุณู ูู ุฃู ูุณุชูู ุชุฎุฒูู ุงูุจูุงูุงุช ุงูุฎุงุต ุจู ูููู ุธุงูุฑููุง ุ ุฃู ุฃู ุงููุณุชูุฏุนุงุช ุงููุนููุฉ ุชุณุชุถูู ูุฎุงุฒู ุงูุชุฑุงุถูุฉ ุ ููุชู ุชุฎุตูุต ุณุฌูุงุช ุงูุจูุงูุงุช ุนูู ุงููุณุชูุฏุนุงุช ุงูุงูุชุฑุงุถูุฉ.  ุชุณูู ูุฐู ุงููุณุชูุฏุนุงุช <i>ุงูุฏูุงุก</i> .  ููุณ ูุฏู ุงููุณุชุฎุฏู ูุง ูุฏุนู ููููู ุจุดุฃู ูุง ูู ููุฌูุฏ ุนูู ุนูุฏุฉ ูุนููุฉ ูุนููุฉ.  ุงูุฌุฑุงูุฉ ุนุจุงุฑุฉ ุนู ูุญุฏุฉ ุจูุงูุงุช ุบูุฑ ูุงุจูุฉ ููุชุฌุฒุฆุฉ ุงูุฐุฑูุฉ ุ ูุซู ูุฌููุนุฉ ูู ุงูุชูุณูู ุงูุชูููุฏู.  ูููู VShard ุฏุงุฆููุง ุจุชุฎุฒูู ูุฌููุนุฉ ูุงููุฉ ุนูู ุนูุฏุฉ ูุนููุฉ ูุงุญุฏุฉ ุ ูุฎูุงู ุฅุนุงุฏุฉ ุงููุดุงุฑูุฉ ุ ุชููู ุจุชุฑุญูู ูุงูุฉ ุงูุจูุงูุงุช ูู ูุฌููุนุฉ ูุงุญุฏุฉ ุชููุงุฆููุง.  ูุฐู ุงูุทุฑููุฉ ุชุถูู ุงูุจูุงูุงุช ุงููุญููุฉ.  ูุญู ููุท ูุถุน ุงูุจูุงูุงุช ูู ูุฌููุนุฉ ูุงุญุฏุฉ ุ ููููููุง ุฏุงุฆููุง ุงูุชุฃูุฏ ูู ุนุฏู ูุตููุง ุฃุซูุงุก ุชุบููุฑุงุช ุงููุชูุฉ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/42e/a4f/87b/42ea4f87b5c0f0b05bdf0e0c75b356fe.png"><br><br>  ููู ูุถุน ุงูุจูุงูุงุช ูู ุฏูู ูุงุญุฏุ  ุฏุนูุง ูุถูู ุญูู ูุนุฑู ุฌุฏูุฏ ููุฌุฏูู ุฅูู ุงูุฌุฏูู ูุนููููุง ุงููุตุฑูู.  ุฅุฐุง ูุงูุช ูููุฉ ูุฐุง ุงูุญูู ูู ููุณูุง ุจุงููุณุจุฉ ููุจูุงูุงุช ุฐุงุช ุงูุตูุฉ ุ ูุณุชููู ุฌููุน ุงูุณุฌูุงุช ูู ูุฌููุนุฉ ูุงุญุฏุฉ.  ุงูููุฒุฉ ูู ุฃูู ูููููุง ุชุฎุฒูู ุงูุณุฌูุงุช ุจููุณ ูุนุฑู ุงูุฌุฑุงูุฉ ูู ูุณุงูุงุช ูุฎุชููุฉ ุ ูุญุชู ูู ูุญุฑูุงุช ูุฎุชููุฉ.  ูุชู ุถูุงู ููุงู ุงูุจูุงูุงุช ุงุณุชูุงุฏูุง ุฅูู ูุนุฑู ุงูุฌุฑุงูุฉ ุจุบุถ ุงููุธุฑ ุนู ุทุฑููุฉ ุงูุชุฎุฒูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">format = {{'id', 'unsigned'}, {'email', 'string'}, {'bucket_id', 'unsigned'}} box.schema.create_space('customer', {format = format}) format = {{'id', 'unsigned'}, {'customer_id', 'unsigned'}, {'balance', 'number'}, {'bucket_id', 'unsigned'}} box.schema.create_space('account', {format = format})</code> </pre> <br>  ููุงุฐุง ูุฐุง ููู ุฌุฏุงุ  ุนูุฏ ุงุณุชุฎุฏุงู ุงูุชูุงุณู ุงูุชูููุฏู ุ ุณุชูุชุฏ ุงูุจูุงูุงุช ูุชุดูู ุงูุนุฏูุฏ ูู ุงููุณุชูุฏุนุงุช ุงููุงุฏูุฉ ุงูุญุงููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏููุง ุจูู ุ ูุชุนูู ุนูููุง ุงูุงุชุตุงู ุจูู ุนูุฏุฉ ุนูุฏ ุทูุจ ุฌููุน ุงูุญุณุงุจุงุช ูุนููู ูุนูู.  ุฅุฐู ุ ูุญุตู ุนูู ุชุนููุฏ ูุฑุงุกุฉ O (N) ุ ุญูุซ N ูู ุนุฏุฏ ุงููุณุชูุฏุนุงุช ุงููุงุฏูุฉ.  ุงููุง ุจุทูุฆุฉ ุจุฌููู. <br><br>  ูุชูุญ ุงุณุชุฎุฏุงู ุงูุฌุฑุงูุงุช ูุงููุญููุฉ ุจูุนุฑู ุงูุฌุฑุงูุงุช ูุฑุงุกุฉ ุงูุจูุงูุงุช ุงูุถุฑูุฑูุฉ ูู ุนูุฏุฉ ูุงุญุฏุฉ ุจุงุณุชุฎุฏุงู ุทูุจ ูุงุญุฏ - ุจุบุถ ุงููุธุฑ ุนู ุญุฌู ุงููุชูุฉ. <br><br><img src="https://habrastorage.org/webt/t7/_r/fm/t7_rfmxoroosmaoqbe8cskpsr0k.png"><br><br>  ูู VShard ุ ููููู ุญุณุงุจ ูุนุฑู ุงูุฌุฑุงูุฉ ูุชุนููููุง.  ุจุงููุณุจุฉ ูุจุนุถ ุงูุฃุดุฎุงุต ุ ูุฐู ููุฒุฉ ุ ุจูููุง ูุนุชุจุฑูุง ุงูุขุฎุฑูู ุนูุจูุง.  ุฃุนุชูุฏ ุฃู ุงููุฏุฑุฉ ุนูู ุงุฎุชูุงุฑ ุงููุธููุฉ ุงูุฎุงุตุฉ ุจู ูุญุณุงุจ ูุนุฑู ุงูุฌุฑุงูุฉ ุชุนุฏ ููุฒุฉ. <br><br>  ูุง ูู ุงููุฑู ุงูุฑุฆูุณู ุจูู ุงูุชูุงุณู ุงูุชูููุฏู ูุงููุดุงุฑูุฉ ุงูุงูุชุฑุงุถูุฉ ูุน ุงูุฌุฑุงูุงุชุ <br><br>  ูู ุงูุญุงูุฉ ุงูุฃููู ุ ุนูุฏูุง ูุบูุฑ ููููุงุช ูุธุงู ุงููุฌููุนุฉ ุ ููุฏููุง ุญุงูุชุงู: ุงูุญุงูุฉ ุงูุญุงููุฉ (ุงููุฏููุฉ) ูุงูุฃุฎุฑู ุงูุฌุฏูุฏุฉ ุงูุชู ุณูุชู ุชูููุฐูุง.  ูู ุนูููุฉ ุงูุงูุชูุงู ุ ูู ุงูุถุฑูุฑู ููุณ ููุท ุชุฑุญูู ุงูุจูุงูุงุช ุ ูููู ุฃูุถูุง ูุฅุนุงุฏุฉ ุญุณุงุจ ูุธููุฉ ุงูุชุฌุฒุฆุฉ ููู ุณุฌู.  ูุฐุง ููุณ ููุงุฆููุง ุฌุฏูุง ูุฃููุง ูู ุฃู ูุญุธุฉ ูุง ูุนุฑู ูุง ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ุงููุทููุจุฉ ูุฏ ุชู ุชุฑุญูููุง ุจุงููุนู ุฃู ูุง.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฐู ุงูุทุฑููุฉ ุบูุฑ ููุซููุฉ ุ ูุงูุชุบููุฑุงุช ููุณุช ุฐุฑูุฉ ุ ูุฃู ุงูุชุฑุญูู ุงูุฐุฑู ููุฌููุนุฉ ุงูุณุฌูุงุช ุงูุชู ููุง ููุณ ูููุฉ ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ูุฏ ูุชุทูุจ ุชุฎุฒูููุง ุฏุงุฆููุง ูุญุงูุฉ ุงูุชุฑุญูู ูู ุญุงูุฉ ุงูุญุงุฌุฉ ุฅูู ุงุณุชุฑุฏุงุฏ.  ูุชูุฌุฉ ูุฐูู ุ ููุงู ุชุนุงุฑุถุงุช ูุฃุฎุทุงุก ุ ููุฌุจ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุนูููุฉ ุนุฏุฉ ูุฑุงุช. <br><br>  ุงูุชูุงุณู ุงูุงูุชุฑุงุถู ุฃุจุณุท ุจูุซูุฑ.  ููุณ ูุฏููุง ุญุงูุชุงู ุนูููุฏูุชุงู ูุฎุชููุชุงู ุ  ููุณ ูุฏููุง ุณูู ุญุงูุฉ ุฏูู.  ุงููุชูุฉ ุฃูุซุฑ ูุฑููุฉ ุ ููู ุชูุชูู ุจุณูุงุณุฉ ูู ุญุงูุฉ ุฅูู ุฃุฎุฑู.  ููุงู ุฃูุซุฑ ูู ุฏููุชูู ุงูุขูุ  (ุบูุฑ ูุงุถุญ).  ูุน ุงูุงูุชูุงู ุงูุณูุณ ุ ูู ุงููููู ุชุบููุฑ ุงูููุงุฒูุฉ ุงูุณุฑูุนุฉ ุฃู ุฅุฒุงูุฉ ุงููุฎุงุฒู ุงููุถุงูุฉ ุญุฏูุซูุง.  ููุฐุง ูุนูู ุฃู ุงูุชุญูู ูู ุงูููุงุฒูุฉ ุฒุงุฏ ุจุดูู ูุจูุฑ ูุฃุตุจุญ ุฃูุซุฑ ุญุจูุจุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุงุณุชุฎุฏุงู </h2><br>  ุฏุนูุง ูููู ุฃููุง ุงุฎุชุฑูุง ูุธููุฉ ููุนุฑู ุงูุฌุฑุงูุงุช ููููุง ุจุชุญููู ุงููุซูุฑ ูู ุงูุจูุงูุงุช ูู ุงููุฌููุนุฉ ุจุญูุซ ูุง ูุชุจูู ูุฑุงุบ.  ููุฏ ุงูุขู ุฅุถุงูุฉ ุจุนุถ ุงูุนูุฏ ูููู ุงูุจูุงูุงุช ุฅูููุง ุชููุงุฆููุง.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูููู ุจูุง ุจูุง ูู VShard: ุฃููุงู ุ ูุจุฏุฃ ุนูุฏูุง ุฌุฏูุฏุฉ ููุฏูุฑ Tarantool ููุงู ุ ุซู ูููู ุจุชุญุฏูุซ ุชููุฆุฉ VShard ุงูุฎุงุตุฉ ุจูุง.  ุฃูู ูุญุชูู ุนูู ูุนูููุงุช ุญูู ูู ูููู ุงููุชูุฉ ุ ูู ูุณุฎุฉ ุทุจู ุงูุฃุตู ุ ูุฌููุนุงุช ุงููุณุฎ ุงููุชูุงุซูุฉ ุ ุงููุงุฌุณุชูุฑ ุ URIs ุงููุนููุฉ ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ.  ูุถูู ุงูุขู ุนูุฏูุง ุงูุฌุฏูุฏุฉ ุฅูู ููู ุงูุชูููู ุ ููุทุจููุง ุนูู ุฌููุน ุนูุฏ ูุธุงู ุงููุฌููุนุฉ ุจุงุณุชุฎุฏุงู VShard.storage.cfg. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function create_user(email) local customer_id = next_id() local bucket_id = crc32(customer_id) box.space.customer:insert(customer_id, email, bucket_id) end function add_account(customer_id) local id = next_id() local bucket_id = crc32(customer_id) box.space.account:insert(id, customer_id, 0, bucket_id) end</code> </pre> <br>  ููุง ุชุชุฐูุฑ ุ ุนูุฏ ุชุบููุฑ ุนุฏุฏ ุงูุนูุฏ ูู ุงูุชูุงุณู ุงูุชูููุฏู ุ ุชุชุบูุฑ ูุธููุฉ shard ููุณูุง ุฃูุถูุง.  ูุฐุง ูุง ูุญุฏุซ ูู VShard.  ูุฏููุง ููุง ุนุฏุฏูุง ุซุงุจุชูุง ูู ุงููุฎุงุฒู ุฃู ุงูุฏูุงุก ุงูุงูุชุฑุงุถูุฉ.  ูุฐุง ุซุงุจุช ุชุฎุชุงุฑู ุนูุฏ ุจุฏุก ุชุดุบูู ุงููุชูุฉ.  ูุฏ ูุจุฏู ุฃู ูุงุจููุฉ ุงูุชูุณุน ูุงุจูุฉ ููุชูููุฏ ุ ููููุง ูู ุงูุญูููุฉ ููุณุช ูุฐูู.  ููููู ุชุญุฏูุฏ ุนุฏุฏ ูุจูุฑ ูู ุงูุฌุฑุงูุงุช ูุนุดุฑุงุช ููุฆุงุช ุงูุขูุงู.  ุงูุดูุก ุงูููู ุงูุฐู ูุฌุจ ูุนุฑูุชู ูู ุฃูู ูุฌุจ ุฃู ูููู ููุงู ุนูู ุงูุฃูู ุชุฑุชูุจุงู ุจุญุฌู ุฃูุจุฑ ูู ุงูุฏูุงุฆู ูู ุงูุนุฏุฏ ุงูุฃูุตู ููุฌููุนุงุช ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุชู ุณูููู ูุฏูู ูู ุงููุฌููุนุฉ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/422/499/979/422499979e5b8c5728c3df2b967cf599.gif"><br><br>  ูุธุฑูุง ูุฃู ุนุฏุฏ ุงููุฎุงุฒู ุงูุธุงูุฑูุฉ ูุง ูุชุบูุฑ ุ ูุชุนุชูุฏ ูุธููุฉ shard ููุท ุนูู ูุฐู ุงููููุฉ ุ ูููููุง ุฅุถุงูุฉ ุงูุนุฏูุฏ ูู ุงููุฎุงุฒู ุงููุงุฏูุฉ ููุง ููุฏ ุฏูู ุฅุนุงุฏุฉ ุญุณุงุจ ูุธููุฉ shard. <br><br>  ูููู ูุชู ุชุฎุตูุต ุงูุฏูุงุก ูููุณุชูุฏุนุงุช ุงููุงุฏูุฉุ  ุฅุฐุง ุชู ุงุณุชุฏุนุงุก VShard.storage.cfg ุ ุชุณุชููุธ ุนูููุฉ ุฅุนุงุฏุฉ ุงูุชูุงุฒู ุนูู ุฅุญุฏู ุงูุนูุฏ.  ูุฐู ุนูููุฉ ุชุญููููุฉ ุชุญุณุจ ุงูุชูุงุฒู ุงููุซุงูู ูููุชูุฉ.  ุชูุชูู ุงูุนูููุฉ ุฅูู ูู ุนูุฏุฉ ูุนููุฉ ูุชุณุชุฑุฌุน ุนุฏุฏ ุงููุฌููุนุงุช ุ ุซู ุชููู ุจุฅูุดุงุก ูุณุงุฑุงุช ูุชุญุฑูุงุชูุง ูู ุฃุฌู ุชุญููู ุงูุชูุงุฒู ุจูู ุงูุชุฎุตูุต.  ุซู ูุฑุณู rebalancer ุงูุทุฑู ุฅูู ุงููุฎุงุฒู ุงููุญููุฉ ุ ูุงูุชู ุชุจุฏุฃ ุจุฏูุฑูุง ูู ุฅุฑุณุงู ุงูุฏูุงุก.  ูู ููุช ูุงุญู ุฅูู ุญุฏ ูุง ุ ุงููุชูุฉ ูุชูุงุฒูุฉ. <br><br>  ูู ุงููุดุฑูุนุงุช ุงููุงูุนูุฉ ุ ูุฏ ูุง ูุชู ุงููุตูู ุฅูู ุชูุงุฒู ูุซุงูู ุจูุฐู ุงูุณูููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุฃู ุชุญุชูู ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุนูู ุจูุงูุงุช ุฃูู ูู ุงููุฌููุนุฉ ุงูุฃุฎุฑู ูุฃููุง ุชุญุชูู ุนูู ุณุนุฉ ุชุฎุฒูู ุฃูู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฏ ูุนุชูุฏ VShard ุฃู ูู ุดูุก ูุชูุงุฒู ูููู ูู ุงููุงูุน ุงูุชุฎุฒูู ุงูุฃูู ุนูู ูุดู ุงูุชุญููู ุงูุฒุงุฆุฏ.  ููุชุตุฏู ููุฐุง ุ ูููุง ุจุชูููุฑ ุขููุฉ ูุชุตุญูุญ ููุงุนุฏ ุงูุชูุงุฒู ุนู ุทุฑูู ุงูุฃูุฒุงู.  ูููู ุชุนููู ูุฒู ูุฃู ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุฃู ุงูุชุฎุฒูู.  ุนูุฏูุง ููุฑุฑ rebalancer ุนุฏุฏ ุงูุฌุฑุงูุงุช ุงูุชู ูุฌุจ ุฅุฑุณุงููุง ูุฃูู ุ ูุฅูู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ <b>ุงูุนูุงูุงุช</b> ุจูู ุฌููุน ุฃุฒูุงุฌ ุงูุฃูุฒุงู. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู ูุฒู ูุญุฏุฉ ุชุฎุฒูู ูุงุญุฏุฉ 100 ูุงูุขุฎุฑ 200 ุ ูุณูู ูููู ุงูุชุฎุฒูู ุงูุซุงูู ุจุชุฎุฒูู ุถุนู ุนุฏุฏ ุงูุฌุฑุงูุงุช ูุซู ุงูุฃููู.  ูุฑุฌู ููุงุญุธุฉ ุฃููู ุฃุชุญุฏุซ ุชุญุฏูุฏุง ุนู <b>ุนูุงูุงุช</b> ุงููุฒู.  ุงูููู ุงููุทููุฉ ููุณ ููุง ุฃู ุชุฃุซูุฑ ุนูู ุงูุฅุทูุงู.  ุงุฎุชุฑุช ุงูุฃูุฒุงู ุจูุงุกู ุนูู ุชูุฒูุน 100ูช ูู ูุชูุฉ: ูุฐุง ูุฅู 30ูช ูู ูุญุฏุฉ ุชุฎุฒูู ูุงุญุฏุฉ ุณุชูุชุฌ 70ูช ูููุฌููุนุฉ ุงูุฃุฎุฑู.  ููููู ุฃู ุชุฃุฎุฐ ุณุนุฉ ุงูุชุฎุฒูู ุจุงูุฌูุฌุงุจุงูุช ูุฃุณุงุณ ุ ุฃู ููููู ููุงุณ ุงููุฒู ูู ุนุฏุฏ ุงููุฌููุนุงุช.  ุงูุดูุก ุงูุฃูุซุฑ ุฃูููุฉ ูู ุงูุญูุงุธ ุนูู ุงููุณุจุฉ ุงููุงุฒูุฉ. <br><br><img src="https://habrastorage.org/webt/sz/0v/gi/sz0vgicyunfvpamx3ic8enwsl58.png"><br><br>  ูุฐู ุงูุทุฑููุฉ ููุง ุชุฃุซูุฑ ุฌุงูุจู ูุซูุฑ ููุฅูุชูุงู: ุฅุฐุง ุชู ุชุฎุตูุต ูุญุฏุฉ ุชุฎุฒูู ุจุฏูู ูุฒู ุ ูุณูู ุชููู ูุญุฏุฉ ุฅุนุงุฏุฉ ุงูุชูุงุฒู ุจุฅุนุงุฏุฉ ุชูุฒูุน ูู ูุญุฏุงุช ุงูุชุฎุฒูู ุงูุฎุงุตุฉ ุจูุง.  ุจุนุฏ ุฐูู ุ ููููู ุฅุฒุงูุฉ ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุจุงููุงูู ูู ุงูุชูููู. <br><br><h2 style=";text-align:right;direction:rtl">  ูุฌุฑุฉ ุงูุฌุฑุงูุฉ ุงูุฐุฑูุฉ </h2><br>  ูุฏููุง ุฏูู.  ููุจู ุจุนุถ ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุ ููู ูุญุธุฉ ูุนููุฉ ุ ูุทูุจ rebalancer ุชุฑุญููู ุฅูู ูุญุฏุฉ ุชุฎุฒูู ุฃุฎุฑู.  ูุชููู ุงูุฏูู ุนู ูุจูู ุทูุจุงุช ุงููุชุงุจุฉ ุ ูุฅูุง ุณูุชู ุชุญุฏูุซู ุฃุซูุงุก ุงูุชุฑุญูู ุ ุซู ูุชู ุชุญุฏูุซู ูุฑุฉ ุฃุฎุฑู ุฃุซูุงุก ุชุฑุญูู ุงูุชุญุฏูุซ ุ ุซู ูุชู ุชุญุฏูุซ ุงูุชุญุฏูุซ ุ ููุง ุฅูู ุฐูู.  ูุฐูู ุ ูุชู ุญุธุฑ ุทูุจุงุช ุงููุชุงุจุฉ ุ ูููู ุงููุฑุงุกุฉ ูู ุงููุฌููุนุฉ ูุง ุฒุงูุช ููููุฉ.  ูุชู ุงูุขู ููู ุงูุจูุงูุงุช ุฅูู ุงููููุน ุงูุฌุฏูุฏ.  ุนูุฏ ุงูุชูุงู ุงูุชุฑุญูู ุ ูุจุฏุฃ ุงูุฌุฑุงูุฉ ูู ูุจูู ุงูุทูุจุงุช ูุฑุฉ ุฃุฎุฑู.  ูุง ูุฒุงู ููุฌูุฏูุง ูู ุงููููุน ุงููุฏูู ุ ูููู ุชู ูุถุน ุนูุงูุฉ ุนููู ูููุงูุฉ ุ ูุจุนุฏ ุฐูู ูููู ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุจุญุฐูู ูุทุนุฉ ูุทุนุฉ. <br><br>  ููุงู ุจุนุถ ุงูุจูุงูุงุช ุงูุฃูููุฉ ุงููุฎุฒูุฉ ูุนูููุง ุนูู ุงููุฑุต ุงูููุชุฑูุฉ ุจูู ูุฌููุนุฉ.  ูุชู ุชุฎุฒูู ุฌููุน ุงูุฎุทูุงุช ุงูููุถุญุฉ ุฃุนูุงู ุนูู ุงููุฑุต ุ ูุจุบุถ ุงููุธุฑ ุนูุง ูุญุฏุซ ููุชุฎุฒูู ุ ุณูุชู ุงุณุชุนุงุฏุฉ ุญุงูุฉ ุงูุฌุฑุงูุฉ ุชููุงุฆููุง. <br><br>  ูุฏ ูููู ูุฏูู ุจุนุถ ุงูุฃุณุฆูุฉ ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ูุงุฐุง ูุญุฏุซ ููุทูุจุงุช ุงูุชู ุชุนูู ูุน ุงููุฌููุนุฉ ุนูุฏูุง ุชุจุฏุฃ ุนูููุฉ ุงูุชุฑุญููุ</b> <br><br>  ููุฌุฏ ููุนุงู ูู ุงููุฑุงุฌุน ูู ุงูุจูุงูุงุช ุงููุตููุฉ ููู ูุฌููุนุฉ: RO ู RW.  ุนูุฏูุง ููุฏู ุงููุณุชุฎุฏู ุทูุจูุง ุฅูู ูุฌููุนุฉ ุ ูุดูุฑ ุฅูู ูุง ุฅุฐุง ูุงู ูุฌุจ ุฃู ูููู ุงูุนูู ูู ูุถุน ูููุฑุงุกุฉ ููุท ุฃู ูู ูุถุน ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ.  ููู ุทูุจ ุ ูุชู ุฒูุงุฏุฉ ุนุฏุงุฏ ุงููุฑุฌุน ุงูููุงุจู. <br><br>  ููุงุฐุง ูุญุชุงุฌ ุนุฏุงุฏุงุช ูุฑุฌุนูุฉ ูุทูุจุงุช ุงููุชุงุจุฉุ  ูููุชุฑุถ ุฃูู ูุชู ุชุฑุญูู ุฏูู ุ ููุฌุฃุฉ ูุฑูุฏ ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุญุฐูู.  ูุชุนุฑู ุฃุฏุงุฉ ุชุฌููุน ูุฌูุนู ุงูุจูุงูุงุช ุงูููููุฉ ุนูู ุฃู ุนุฏุงุฏ ุงููุฑุฌุน ุฃุนูู ูู ุงูุตูุฑ ูุจุงูุชุงูู ูู ูุชู ุญุฐู ุงูุฌุฑุงูุฉ.  ุนูุฏ ุงูุชูุงู ุฌููุน ุงูุทูุจุงุช ุ ูุณุชุทูุน ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุงูููุงู ุจุนููู. <br><br>  ูุถูู ุนุฏุงุฏ ุงููุฑุฌุน ูููุชุงุจุฉ ุฃูุถูุง ุนุฏู ุจุฏุก ุชุฑุญูู ุงููุฌููุนุฉ ุฅุฐุง ูุงู ููุงู ุทูุจ ูุชุงุจุฉ ูุงุญุฏ ุนูู ุงูุฃูู ููุฏ ุงููุนุงูุฌุฉ.  ูููู ุจุนุฏ ุฐูู ูุฑุฉ ุฃุฎุฑู ุ ูููู ุฃู ุชุฃุชู ุทูุจุงุช ุงููุชุงุจุฉ ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ุ ููู ูุชู ุชุฑุญูู ุงููุฌููุนุฉ.  ูุฐูู ุฅุฐุง ุฑุบุจ rebalancer ูู ููู ุงููุฌููุนุฉ ุ ูุณูุญุธุฑ ุงููุธุงู ุทูุจุงุช ุงููุชุงุจุฉ ุงูุฌุฏูุฏุฉ ุฃุซูุงุก ุงูุชุธุงุฑ ุงุณุชููุงู ุงูุทูุจุงุช ุงูุญุงููุฉ ุฎูุงู ูุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ.  ุฅุฐุง ูู ูุชู ุฅููุงู ุงูุทูุจุงุช ุฎูุงู ุงููููุฉ ุงููุญุฏุฏุฉ ุ ุณูุจุฏุฃ ุงููุธุงู ูู ูุจูู ุทูุจุงุช ุงููุชุงุจุฉ ุงูุฌุฏูุฏุฉ ูุฑุฉ ุฃุฎุฑู ุฃุซูุงุก ุชุฃุฌูู ุชุฑุญูู ุงููุฌููุนุฉ.  ุจูุฐู ุงูุทุฑููุฉ ุ ุณูุญุงูู rebalancer ุชุฑุญูู ุงููุฌููุนุฉ ุฅูู ุฃู ุชูุฌุญ ุนูููุฉ ุงูุชุฑุญูู. <br><br>  ูุญุชูู VShard ุนูู API bucket_ref ููุฎูุถ ุงููุณุชูู ูู ุญุงูุฉ ุงุญุชูุงุฌู ุฅูู ุฃูุซุฑ ูู ูุฌุฑุฏ ูุฏุฑุงุช ุนุงููุฉ ุงููุณุชูู.  ุฅุฐุง ููุช ุชุฑูุฏ ูุนู ุดูุก ูุง ุจููุณู ุ ููุฑุฌู ุงูุฑุฌูุน ุฅูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุฐู. </li><li style=";text-align:right;direction:rtl">  <b>ูู ูู ุงููููู ุชุฑู ุงูุณุฌูุงุช ุบูุฑ ูุญุธูุฑุฉุ</b> <br><br>  ุฑูู  ุฅุฐุง ูุงู ุงูุฏูู ูุญุชูู ุนูู ุจูุงูุงุช ูููุฉ ููุชุทูุจ ูุตูููุง ุฏุงุฆููุง ูููุชุงุจุฉ ุ ูุณูุชุนูู ุนููู ุญุธุฑ ุงูุชุฑุญูู ุชูุงููุง.  ูุฏููุง ูุธููุฉ bucket_pin ููููุงู ุจุฐูู.  ุฅูู ูุฑุจุท ุงูุฌุฑุงูุฉ ุจูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุญุงููุฉ ุจุญูุซ ูุง ูููู ูุฑุงุจุท ุงูููุงุฒูุฉ ุชุฑุญูู ุงูุฌุฑุงูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชููู ุงูุฏูุงุก ุงููุฌุงูุฑุฉ ูุงุฏุฑุฉ ุนูู ุงูุชุญุฑู ุฏูู ูููุฏ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b6a/848/fa7/b6a848fa775b0066ac6f69b73d97ed76.png"><br><br>  ูุนุฏ ุชุฃููู ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุฃุฏุงุฉ ุฃููู ูู bucket_pin.  ูุฐุง ูู ูุนุฏ ูุชู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูููู ูู ุงูุชูููู.  ูุคุฏู ููู ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุฅูู ุชุนุทูู ุชุฑุญูู ุฃู ูุฌููุนุฉ ุฏุงุฎู / ุฎุงุฑุฌ ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ.  ูุฐูู ุณุชููู ุฌููุน ุงูุจูุงูุงุช ูุชุงุญุฉ ุจุดูู ุฏุงุฆู ูููุชุงุจุฉ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/65b/744/39c/65b74439c5b5743eda1168bdb320f8f4.png"></li></ul><br><h2 style=";text-align:right;direction:rtl">  VShard.router </h2><br>  ูุชููู VShard ูู ูุญุฏุชูู ูุฑุนูุชูู: VShard.storage ู VShard.router.  ูููููุง ุฅูุดุงุก ูุชูุณูุน ูุทุงู ูุฐู ุจุดูู ูุณุชูู ุนูู ูุซูู ูุงุญุฏ.  ุนูุฏ ุทูุจ ูุธุงู ูุฌููุนุฉ ุ ูุง ูุนุฑู ููุงู ูุฌูุฏ ุฏูู ูุนูู ุ ูุณูููู VShard.router ุจุงูุจุญุซ ุนูู ุจูุงุณุทุฉ ูุนุฑู ุงูุฌุฑุงูุฉ ุจุงููุณุจุฉ ููุง. <br><br>  ุฏุนููุง ููุธุฑ ุฅูู ุงููุฑุงุก ูู ูุซุงููุง ุ ุงููุฌููุนุฉ ุงููุตุฑููุฉ ูุน ุญุณุงุจุงุช ุงูุนููุงุก.  ุฃูุฏ ุฃู ุฃููู ูุงุฏุฑูุง ุนูู ุงูุญุตูู ุนูู ุฌููุน ุญุณุงุจุงุช ุนููู ูุนูู ูู ุงููุฌููุนุฉ.  ูุฐุง ูุชุทูุจ ูุธููุฉ ููุงุณูุฉ ููุจุญุซ ุงููุญูู: <br><br><img src="https://habrastorage.org/webt/q4/om/pp/q4omppscsww5c-cshatc6bnvgky.png"><br><br>  ูุจุฏู ูุฌููุน ุญุณุงุจุงุช ุงูุนููู ูู ูุจู ูููุชู.  ุงูุขู ูุฌุจ ุฃู ุฃูุฑุฑ ุฃูู ูุฌุจ ุฃู ุฃููู ุจุชุดุบูู ุงููุธููุฉ.  ููุฐุง ุงูุบุฑุถ ุ ุฃููู ุจุญุณุงุจ ูุนุฑู ุงูุฌุฑุงูุฉ ุจูุงุณุทุฉ ูุนุฑู ุงูุนููู ูู ุทูุจู ุ ูุฃุทูุจ ูู VShard.router ุงุณุชุฏุนุงุก ุงููุธููุฉ ูู ูุญุฏุฉ ุงูุชุฎุฒูู ุญูุซ ููุฌุฏ ุงูุฌุฑุงูุฉ ุฐุงุช ูุนุฑู ุงูุฌุฑุงูุฉ ุงููุณุชูุฏูุฉ.  ุชุญุชูู ุงููุญุฏุฉ ุงููุฑุนูุฉ ุนูู ุฌุฏูู ุชูุฌูู ูุตู ููุงูุน ุงููุฌููุนุงุช ูู ูุฌููุนุงุช ุงููุณุฎ ุงููุชูุงุซูุฉ.  ูุนูุฏ VShard.router ุชูุฌูู ุทูุจู. <br><br>  ุจุงูุชุฃููุฏ ูุฏ ูุญุฏุซ ุฃู ูุจุฏุฃ ุงูุชูุณูู ูู ูุฐู ุงููุญุธุฉ ุจุงูุถุจุท ุ ูุฃู ุงูุฏูุงุก ุชุจุฏุฃ ูู ุงูุชุญุฑู.  ูููู ุงูููุฌู ุงูููุฌูุฏ ูู ุงูุฎูููุฉ ุจุชุญุฏูุซ ุงูุฌุฏูู ุชุฏุฑูุฌููุง ูู ูุฌููุนุงุช ูุจูุฑุฉ ุนู ุทุฑูู ุทูุจ ุฌุฏุงูู ุงูุฌุฑุฏู ุงูุญุงููุฉ ูู ุงููุณุชูุฏุนุงุช. <br><br>  ูุฏ ูุทูุจ ุญุชู ุฏูููุง ุชู ุชุฑุญููู ูุคุฎุฑูุง ุ ุญูุซ ูู ููู ุฌูุงุฒ ุงูุชูุฌูู ุจุนุฏ ุจุชุญุฏูุซ ุฌุฏูู ุงูุชูุฌูู ุงูุฎุงุต ุจู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุทูุจ ูุญุฏุฉ ุงูุชุฎุฒูู ุงููุฏููุฉ ุ ูุงูุชู ุฅูุง ุณุชุนูุฏ ุชูุฌูู ุฌูุงุฒ ุงูุชูุฌูู ุฅูู ูุญุฏุฉ ุชุฎุฒูู ุฃุฎุฑู ุ ุฃู ุณุชุณุชุฌูุจ ุจุจุณุงุทุฉ ุฃูู ูุง ูุญุชูู ุนูู ุงูุจูุงูุงุช ุงููุงุฒูุฉ.  ุจุนุฏ ุฐูู ุ ุณูู ููุฑ ุฌูุงุฒ ุงูุชูุฌูู ูู ุฎูุงู ูู ูุญุฏุฉ ุชุฎุฒูู ุจุญุซูุง ุนู ุงููุฌููุนุฉ ุงููุทููุจุฉ.  ููู ููุงุญุธ ุฎุทุฃู ูู ุฌุฏูู ุงูุชูุฌูู. <br><br><h2 style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงููุดู </h2><br>  ุฏุนููุง ูุชุฐูุฑ ูุดุงูููุง ุงูุฃูููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ูุญููุฉ ุงูุจูุงูุงุช.  ุญู ุนู ุทุฑูู ุงูุฏูุงุก. </li><li style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุงููุดุงุฑูุฉ ูู ุนูููุฉ ุงูุชุนุซุฑ ูุฅููุงู ูู ุดูุก.  ูููุง ุจุชูููุฐ ููู ุงูุจูุงูุงุช ุงูุฐุฑูุฉ ุนู ุทุฑูู ุงูุฏูุงุก ูุชุฎูุตูุง ูู ุฅุนุงุฏุฉ ุญุณุงุจ ูุธููุฉ ูุดุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงููุดู. </li></ul><br>  ุชุชู ูุนุงูุฌุฉ ุงููุดููุฉ ุงูุฃุฎูุฑุฉ ุจูุงุณุทุฉ VShard.router ุ ุงููุฏุนููุฉ ูู ุงููุธุงู ุงููุฑุนู ูุชุฌุงูุฒ ูุฑุงุกุฉ ุชููุงุฆูุฉ. <br><br>  ูู ููุช ูุขุฎุฑ ุ ูุฑุณู ุฌูุงุฒ ุงูุชูุฌูู ุงูุฃุตูุงุช ุงููุฎุฒูุฉ ูู ุงูุชูููู.  ูู ุนูู ุณุจูู ุงููุซุงู ุ ูุง ูููู ููููุฌู ุงุฎุชุจุงุฑ ุงุชุตุงู ูุงุญุฏ ูููู.  ูุญุชูู ุฌูุงุฒ ุงูุชูุฌูู ุนูู ุงุชุตุงู ูุณุฎ ุงุญุชูุงุทู ุณุงุฎู ููู ูุณุฎุฉ ูุชูุงุซูุฉ ุ ูุฐูู ุฅุฐุง ูุงูุช ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุงูุญุงููุฉ ูุง ุชุณุชุฌูุจ ุ ูุฅูู ูุชุญูู ููุท ุฅูู ูุณุฎุฉ ุฃุฎุฑู.  ุณุชุชู ูุนุงูุฌุฉ ุทูุจุงุช ุงููุฑุงุกุฉ ุจุดูู ุทุจูุนู ูุฃูู ูููููุง ูุฑุงุกุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ (ูููู ููุณ ุงููุชุงุจุฉ).  ููููููุง ุชุญุฏูุฏ ุฃููููุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ูุนุงูู ูุฌูุงุฒ ุงูุชูุฌูู ูุงุฎุชูุงุฑ ุชุฌุงูุฒ ุงููุดู ูููุฑุงุกุงุช.  ููุชู ุฐูู ุนู ุทุฑูู ุชูุณูู ุงูููุงุทู. <br><br><img src="https://habrastorage.org/webt/aw/iz/ry/awizryylhzk9h2rct_kxo1-jvpc.png"><br><br>  ูููู ุจุชุนููู ุฑูู ููุทูุฉ ููู ูุณุฎุฉ ูุชูุงุซูุฉ ููู ููุฌู ูุชุญุฏูุฏ ุฌุฏูู ุญูุซ ูุดูุฑ ุฅูู ุงููุณุงูุฉ ุจูู ูู ุฒูุฌ ูู ุงูููุงุทู.  ุนูุฏูุง ููุฑุฑ ุงูููุฌู ุงูููุงู ุงูุฐู ูุฌุจ ุฃู ูุฑุณู ููู ุทูุจ ูุฑุงุกุฉ ุ ูุฅูู ูุญุฏุฏ ูุณุฎุฉ ูุชูุงุซูุฉ ูู ุฃูุฑุจ ููุทูุฉ. <br><br>  ูุฐุง ูู ูุง ูุจุฏู ูู ุงูุชูููู: <br><br><img src="https://habrastorage.org/webt/2w/jx/cu/2wjxcuidtcghobukd3mxu02ms2y.png"><br><br>  ุจุดูู ุนุงู ุ ููููู ุทูุจ ุฃู ูุณุฎุฉ ูุชูุงุซูุฉ ุ ูููู ุฅุฐุง ูุงูุช ุงููุชูุฉ ูุจูุฑุฉ ููุนูุฏุฉ ูููุฒุนุฉ ุจุดูู ูุจูุฑ ุ ูุฅู ุชูุณูู ุงูููุงุทู ูููู ุฃู ูููู ูููุฏูุง ููุบุงูุฉ.  ูููู ุชุญุฏูุฏ ุฑููู ุงูุฎุงุฏู ุงููุฎุชููุฉ ูููุงุทู ุจุญูุซ ูุง ูุชู ุชุญููู ุงูุดุจูุฉ ุจุดูู ุฒุงุฆุฏ ุจูุงุณุทุฉ ุญุฑูุฉ ุงููุฑูุฑ.  ุจุฏูุงู ูู ุฐูู ุ ูููู ุชุญุฏูุฏ ููุงุท ูุนุฒููุฉ ุฌุบุฑุงููุง. <br><br>  ูุณุงุนุฏ ุชูุณูู ุงูููุงุทู ุฃูุถูุง ุนูุฏ ุฅุธูุงุฑ ุงููุณุฎ ุงููุชูุงุซูุฉ ุณููููุงุช ูุฎุชููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุชุญุชูู ูู ูุฌููุนุฉ ูุชูุงุซูุฉ ุนูู ูุณุฎุฉ ูุชูุงุซูุฉ ุงุญุชูุงุทูุฉ ูุงุญุฏุฉ ูุง ููุจุบู ุฃู ุชูุจู ุงูุทูุจุงุช ูููู ูุฌุจ ููุท ุชุฎุฒูู ูุณุฎุฉ ูู ุงูุจูุงูุงุช.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุถุนูุง ูู ููุทูุฉ ุจุนูุฏุฉ ุนู ุฌููุน ุฃุฌูุฒุฉ ุงูุชูุฌูู ูู ุงูุฌุฏูู ุญุชู ูุง ูููู ุงูููุฌู ุจูุนุงูุฌุฉ ูุฐู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ูุง ูู ููู ุฐูู ุถุฑูุฑููุง ุชูุงููุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุชุจ ุงููุดู </h2><br>  ููุฏ ุชุญุฏุซูุง ุจุงููุนู ุนู ูุฑุงุกุฉ ุงููุดู.  ูุงุฐุง ุนู ุงููุชุงุจุฉ ุงููุดู ุนูุฏ ุชุบููุฑ ุงูุณูุฏุ  ูู VShard ุ ุงูุตูุฑุฉ ููุณุช ูุฑุฏูุฉ ููุง ูุงูุช ูู ูุจู: ูู ูุชู ุชูููุฐ ุงูุงุฎุชูุงุฑ ุงูุฑุฆูุณู ุ ูุฐุง ุณูุชุนูู ุนูููุง ุงูููุงู ุจุฐูู ุจุฃููุณูุง.  ุนูุฏูุง ูุชู ุชุนููู ุณูุฏ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ูุฌุจ ุฃู ูุชููู ุงููุซูู ุงููุนูู ุฏูุฑ ุงููุนูู.  ุจุนุฏ ุฐูู ูููู ุจุชุญุฏูุซ ุงูุชูููู ุนู ุทุฑูู ุชุญุฏูุฏ master = false ููุณูุฏ ุงููุฏูู ุ ู master = true ููุชุทุจูู ุงูุฌุฏูุฏ ุ ูุชุทุจูู ุงูุชูููู ุนู ุทุฑูู VShard.storage.cfg ููุดุงุฑูุชู ูุน ูู ูุญุฏุฉ ุชุฎุฒูู.  ูู ุดูุก ุขุฎุฑ ูุชู ุชููุงุฆูุง.  ุชููู ุงููุนูู ุงููุฏูู ุนู ูุจูู ุทูุจุงุช ุงููุชุงุจุฉ ููุจุฏุฃ ุงููุฒุงููุฉ ูุน ุงูุฌุฏูุฏ ุ ูุฃูู ูุฏ ุชููู ููุงู ุจูุงูุงุช ุชู ุชุทุจูููุง ุจุงููุนู ุนูู ุงูุฑุฆูุณู ุงููุฏูู ูููู ููุณ ุนูู ุงูุฌุฏูุฏ.  ุจุนุฏ ุฐูู ุ ุณูุฏ ุฌุฏูุฏ ูู ุงููุณุคูู ููุจุฏุฃ ูู ูุจูู ุงูุทูุจุงุช ุ ูุงูุณูุฏ ุงููุฏูู ูู ูุณุฎุฉ ุทุจู ุงูุฃุตู.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุนูู ุจูุง ูุดู ุงููุชุงุจุฉ ูู VShard. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">replicas = new_cfg.sharding[uud].replicas replicas[old_master_uuid].master = false replicas[new_master_uuid].master = true vshard.storage.cfg(new_cfg)</code> </pre> <br><br><h2 style=";text-align:right;direction:rtl">  ููู ูููููุง ุชุชุจุน ูุฐู ุงูุฃุญุฏุงุซ ุงููุฎุชููุฉุ </h2><br>  VShard.storage.info ู VShard.router.info ูุงููุฉ. <br><br>  ูุนุฑุถ VShard.storage.info ุงููุนูููุงุช ูู ุนุฏุฉ ุฃูุณุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">vshard.storage.info() --- - replicasets: &lt;replicaset_2&gt;: uuid: &lt;replicaset_2&gt; master: uri: storage@127.0.0.1:3303 &lt;replicaset_1&gt;: uuid: &lt;replicaset_1&gt; master: missing bucket: receiving: 0 active: 0 total: 0 garbage: 0 pinned: 0 sending: 0 status: 2 replication: status: slave Alerts: - ['MISSING_MASTER', 'Master is not configured for ''replicaset &lt;replicaset_1&gt;']</code> </pre> <br>  ุงููุณู ุงูุฃูู ูุฎุตุต ูููุณุฎ ุงููุชูุงุซู.  ููุง ููููู ุฑุคูุฉ ุญุงูุฉ ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุญูุซ ูุชู ุงุณุชุฏุนุงุก ุงููุธููุฉ: ุชุฃุฎุฑ ุงููุณุฎ ุงููุชูุงุซู ููุง ุ ุงุชุตุงูุงุชูุง ุงููุชุงุญุฉ ูุบูุฑ ุงููุชุงุญุฉ ุ ุงูุชูููู ุงูุฑุฆูุณู ุ ุฅูุฎ. <br><br>  ูู ูุณู ุงูุฌุฑุงูุฉ ุ ููููู ุฃู ุชุฑู ูู ุงูููุช ุงููุนูู ุนุฏุฏ ุงูุฌุฑุงูุงุช ุงูุชู ูุชู ุชุฑุญูููุง ุฅูู / ูู ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุญุงููุฉ ุ ูุนุฏุฏ ุงูุฌุฑุงูุงุช ุงูุนุงููุฉ ูู ุงููุถุน ุงูุนุงุฏู ุ ูุนุฏุฏ ุงูุฌุฑุงูุงุช ุงููุญุฏุฏุฉ ูููุงูุฉ ุ ูุนุฏุฏ ุงูุฌุฑุงูุงุช ุงููุซุจุชุฉ. <br><br>  ูุนุฑุถ ูุณู ุงูุชูุจููุงุช ุงููุดููุงุช ุงูุชู ูุงู ุจุฅููุงู VShard ุชุญุฏูุฏูุง ุจููุณู: "ูู ูุชู ุชูููู ุงูุฑุฆูุณู ุ" "ููุฌุฏ ูุณุชูู ุบูุฑ ูุงูู ููุชูุฑุงุฑ" ุ "ุงูุฑุฆูุณู ููุฌูุฏ ุ ูููู ูุดูุช ุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ" ุ ุฅูุฎ. <br><br>  ูุงููุณู ุงูุฃุฎูุฑ (ู: ูู ูุฐุง "ุงููุถุน"ุ) ูู ุถูุก ูุชุญูู ุฅูู ุงูููู ุงูุฃุญูุฑ ุนูุฏูุง ุชุณูุก ุงูุฃููุฑ.  ุฅูู ุฑูู ูู ุตูุฑ ุฅูู ุซูุงุซุฉ ุ ุญูุซ ูููู ุงูุฑูู ุงูุฃุนูู ุฃุณูุฃ. <br><br>  ูุญุชูู VShard.router.info ุนูู ููุณ ุงูุฃูุณุงู ุ ููู ูุนูุงูุง ูุฎุชูู ุฅูู ุญุฏ ูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">vshard.router.info() --- - replicasets: &lt;replicaset_2&gt;: replica: &amp;0 status: available uri: storage@127.0.0.1:3303 uuid: 1e02ae8a-afc0-4e91-ba34-843a356b8ed7 bucket: available_rw: 500 uuid: &lt;replicaset_2&gt; master: *0 &lt;replicaset_1&gt;: replica: &amp;1 status: available uri: storage@127.0.0.1:3301 uuid: 8a274925-a26d-47fc-9e1b-af88ce939412 bucket: available_rw: 400 uuid: &lt;replicaset_1&gt; master: *1 bucket: unreachable: 0 available_ro: 800 unknown: 200 available_rw: 700 status: 1 alerts: - ['UNKNOWN_BUCKETS', '200 buckets are not discovered']</code> </pre> <br>  ุงููุณู ุงูุฃูู ูุฎุตุต ูููุณุฎ ุงููุชูุงุซู ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุง ูุญุชูู ุนูู ูุนูููุงุช ุญูู ุชุฃุฎุฑ ุงููุณุฎ ุงููุชูุงุซู ุ ููููู ูุญุชูู ุนูู ูุนูููุงุช ุญูู ุงูุชููุฑ: ุงุชุตุงูุงุช ุฌูุงุฒ ุงูุชูุฌูู ุจูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุ  ุงุชุตุงู ุณุงุฎู ูุงุชุตุงู ุงููุณุฎ ุงูุงุญุชูุงุทู ูู ุญุงูุฉ ูุดู ุณูุฏ.  ุงูุณูุฏ ุงููุญุฏุฏ ุ  ูุนุฏุฏ ุฏูุงุก RW ุงููุชุงุญุฉ ูุฏูู RO ูู ูู ูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ. <br><br>  ูุนุฑุถ ูุณู ุงูุฌุฑุงูุฉ ุงูุนุฏุฏ ุงูุฅุฌูุงูู ูุฏูุงุฆู ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ูููุฑุงุกุฉ ููุท ุงููุชููุฑุฉ ุญุงูููุง ููุฐุง ุงูููุฌู ุ  ุนุฏุฏ ุงูุฌุฑุงูุงุช ูุน ูููุน ุบูุฑ ูุนุฑูู ุ  ูุนุฏุฏ ุงููุฌููุนุงุช ูุน ูููุน ูุนุฑูู ูููู ุจุฏูู ุงุชุตุงู ุจูุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุถุฑูุฑูุฉ. <br><br>  ูุตู ูุณู ุงูุชูุจููุงุช ุจุดูู ุฑุฆูุณู ุงูุงุชุตุงูุงุช ูุฃุญุฏุงุซ ุชุฌุงูุฒ ุงููุดู ูุงูุฌุฑุงูุงุช ุบูุฑ ุงููุญุฏุฏุฉ. <br><br>  ูุฃุฎูุฑุง ุ ููุงู ุฃูุถุง ุญุงูุฉ ุจุณูุทุฉุ  ูุคุดุฑ ูู ุตูุฑ ุฅูู ุซูุงุซุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุงุฐุง ุชุญุชุงุฌ ูุงุณุชุฎุฏุงู VShardุ </h2><br>  ูุฌุจ ุนููู ุฃููุงู ุชุญุฏูุฏ ุนุฏุฏ ุซุงุจุช ูู ุงูุฌุฑุงูุงุช.  ููุงุฐุง ูุง ุชููู ููุท ุจุชุนููููุง ุนูู int32_maxุ  ูุธุฑูุง ูุฃูู ูุชู ุชุฎุฒูู ุงูุจูุงูุงุช ุงููุตููุฉ ูุน ูู ูุฌููุนุฉ ุ ู 30 ุจุงูุช ูู ุงูุชุฎุฒูู ู 16 ุจุงูุช ุนูู ุฌูุงุฒ ุงูุชูุฌูู.  ูููุง ุฒุงุฏ ุนุฏุฏ ุงูุฌุฑุงูุงุช ุงููุชููุฑุฉ ูุฏูู ุ ุณูุชู ุดุบู ูุณุงุญุฉ ุฃูุจุฑ ุจูุงุณุทุฉ ุงูุจูุงูุงุช ุงููุตููุฉ.  ูููู ูู ููุณ ุงูููุช ุ ุณูููู ุญุฌู ุงูุฌุฑุงูุฉ ุฃุตุบุฑ ุ ููุง ูุนูู ุฏูุฉ ุฃุนูู ูู ุงููุชูุฉ ูุณุฑุนุฉ ุชุฑุญูู ุฃุนูู ููู ูุฌููุนุฉ.  ูุฐูู ุนููู ุฃู ุชุฎุชุงุฑ ูุง ูู ุฃูุซุฑ ุฃูููุฉ ุจุงููุณุจุฉ ูู ููุณุชูู ูุงุจููุฉ ุงูุชูุณุน ุงููุงุฒูุฉ. <br><br>  ุซุงูููุง ุ ูุฌุจ ุนููู ุชุญุฏูุฏ ูุธููุฉ ุดุงุฑุจ ูุญุณุงุจ ูุนุฑู ุงูุฌุฑุงูุฉ.  ุงูููุงุนุฏ ูู ููุณูุง ุนูุฏ ุงุฎุชูุงุฑ ูุธููุฉ shard ูู ุงูุชูุงููุฏ ุงูุชูููุฏูุฉ ุ ุญูุซ ุฃู ุงูุฌุฑุงูุฉ ููุง ูู ููุณ ุนุฏุฏ ุซุงุจุช ูู ุงููุณุชูุฏุนุงุช ูู ุงูุชูุงููุฏ ุงูุชูููุฏูุฉ.  ูุฌุจ ุฃู ุชููู ุงููุธููุฉ ุจุชูุฒูุน ููู ุงููุฎุฑุฌุงุช ุจุงูุชุณุงูู ุ ูุฅูุง ููู ูููู ุชูุงุฒู ุญุฌู ุงูุฌุฑุงูุฉ ูุชูุงุฒูุงู ุ ููุนูู VShard ููุท ูุน ุนุฏุฏ ุงููุฌููุนุงุช.  ุฅุฐุง ูู ุชูุงุฒู ุจูู ูุธููุฉ shard ุ ูุณุชุถุทุฑ ุฅูู ุชุฑุญูู ุงูุจูุงูุงุช ูู ูุฌููุนุฉ ุฅูู ุฃุฎุฑู ุ ูุชุบููุฑ ูุธููุฉ shard.  ูุจุงูุชุงูู ุ ูุฌุจ ุฃู ุชุฎุชุงุฑ ุจุนูุงูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ููุฎุต </h2><br>  ูุถูู VShard: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญููุฉ ุงูุจูุงูุงุช </li><li style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุงูุฐุฑู </li><li style=";text-align:right;direction:rtl">  ูุฑููุฉ ุงููุชูุฉ ุงูุนููุง </li><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงููุดู ุงูุชููุงุฆู </li><li style=";text-align:right;direction:rtl">  ูุญุฏุงุช ุชุญูู ุฏูู ูุชุนุฏุฏุฉ. </li></ul><br>  VShard ููุฏ ุงูุชุทููุฑ ุงููุดุท.  ุจุนุถ ุงูููุงู ุงููุฎุทุทุฉ ูุฌุฑู ุชูููุฐูุง ุจุงููุนู.  ุงููููุฉ ุงูุฃููู ูู <b>ููุงุฒูุฉ ุชุญููู ุฌูุงุฒ ุงูุชูุฌูู</b> .  ุฅุฐุง ูุงูุช ููุงู ุทูุจุงุช ูุฑุงุกุฉ ูุซููุฉ ุ ูููุณ ูู ุงููุณุชุญุณู ุฏุงุฆููุง ุชูุฌูููุง ุฅูู ุงููุนูู.  ูุฌุจ ุฃู ููุงุฒู ุฌูุงุฒ ุงูุชูุฌูู ุจูู ุทูุจุงุช ุงููุณุฎ ุงููุชูุงุซูุฉ ูููุฑุงุกุฉ ุงููุฎุชููุฉ ูู ุชููุงุก ููุณู. <br><br>  ุงููููุฉ ุงูุซุงููุฉ ูู <b>ุงููุฌุฑุฉ ุฏูู ุฎุงููุฉ ูู ููู</b> .  ุชู ุจุงููุนู ุชูููุฐ ุฎูุงุฑุฒููุฉ ุชุณุงุนุฏ ูู ุงูุญูุงุธ ุนูู ุฅูุบุงุก ุญุธุฑ ุงููุฌููุนุงุช ุญุชู ุฃุซูุงุก ุงูุชุฑุญูู.  ุณูุชู ุญุธุฑ ุงููุฌููุนุฉ ููุท ูู ุงูููุงูุฉ ูุชูุซูู ุงูุชุฑุญูู ููุณู. <br><br>  ุงููููุฉ ุงูุซุงูุซุฉ ูู <b>ุงูุชุทุจูู ุงูุฐุฑู ููุชูููู</b> .  ูู ุบูุฑ ุงูููุงุณุจ ุฃู ุงูุฐุฑู ุชุทุจูู ุงูุชูููู ุจุดูู ูููุตู ูุฃู ุจุนุถ ุงูุณุนุฉ ุงูุชุฎุฒูููุฉ ูุฏ ูุง ุชููู ูุชุงุญุฉ ุ ูุฅุฐุง ูู ูุชู ุชุทุจูู ุงูุชูููู ุ ููุงุฐุง ููุนู ุจุนุฏ ุฐููุ  ูุฐุง ูู ุงูุณุจุจ ูู ุฃููุง ูุนูู ุนูู ุขููุฉ ูููู ุงูุชูููู ุงูุชููุงุฆู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar442782/">https://habr.com/ru/post/ar442782/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar442770/index.html">ูุธุฑุฉ ุนุงูุฉ ุนูู ูุงุณุญุงุช ุงูุจุงุฑููุฏ JavaScript</a></li>
<li><a href="../ar442772/index.html">ุงูุฑูุงุถูุงุช ูุนุงูู ุงูุจูุงูุงุช: ุงูุฃูุณุงู ุงููุงุฒูุฉ</a></li>
<li><a href="../ar442776/index.html">ุงูููุงุฑุณ ูู ุจูุณุชุฌุฑุณ - 3 (ุชุฌุฒุฆุฉ)</a></li>
<li><a href="../ar442778/index.html">ุชุนูู ุงูุฐูุงุจ: ูุฌููุนุฉ ูุฎุชุงุฑุฉ ูู ุชูุงุฑูุฑ ุงูููุฏูู</a></li>
<li><a href="../ar442780/index.html">ุงูููุงููู ุงูุฎุงุทุฆุฉ ุงูุฃูุซุฑ ุดููุนุง ูู ุงูููุฒูุงุก ุงูุดุนุจูุฉ</a></li>
<li><a href="../ar442784/index.html">BGP ุงูุงุฎุชุทุงู ุนู ุทุฑูู ุฅุถุงูุฉ ุงูุถุญูุฉ AS ุฅูู AS-SET ุงูููุงุฌู</a></li>
<li><a href="../ar442786/index.html">7 ูุตุงุฆุญ ูููุฏุฉ ูุงุณุชุฎุฏุงู ุงูุบุฑูุฉ</a></li>
<li><a href="../ar442788/index.html">ููุงุฐุง ูุญุชุงุฌ ุฅูู ูุธุงู ูุฑุงูุจุฉ ุนูู ุฑูุงูุฉ</a></li>
<li><a href="../ar442790/index.html">ุงูุชุณุฌูู ููุชูุญ ูู Allure Server Meetup ูู ุณุงู ุจุทุฑุณุจุฑุบ</a></li>
<li><a href="../ar442794/index.html">ูุญู ูุฏุนูู ูุญุถูุฑ ูุคุชูุฑ "ูููุฏุณ ุชูููููุฌูุง ุงููุนูููุงุช (IT) ูู ูุดุงุฑูุน ููุคุณุณุงุช ุชูููููุฌูุง ุงููุนูููุงุช"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>