<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôãüèΩ ü§æüèæ ‚ûï Mikrotik: r√©initialisation, sauvegardes et DualBoot üëÉüèº üéÖüèø üññüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Analyse de nombreux petits sujets relativement li√©s: r√©initialisation logicielle et mat√©rielle, fonction Protected RouterBoot, sauvegardes et exportat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mikrotik: r√©initialisation, sauvegardes et DualBoot</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419693/"><p>  Analyse de nombreux petits sujets relativement li√©s: r√©initialisation logicielle et mat√©rielle, fonction Protected RouterBoot, sauvegardes et exportation de configuration, division de la m√©moire flash en partitions. </p><a name="habracut"></a><br><h3 id="programmnyy-sbros-nastroek">  R√©initialisation logicielle </h3><br><p>  Si vous avez acc√®s au routeur depuis un utilisateur disposant de tous les droits, vous pouvez r√©initialiser tous les param√®tres via [Syst√®me] ‚Üí [R√©initialiser la configuration] </p><br><p><img src="https://habrastorage.org/webt/or/9a/id/or9aidpvbp7frp717hloovr0una.png"><br>  Qu'y a-t-il: </p><br><ul><li>  Conserver les param√®tres utilisateur - ne supprimez pas les comptes utilisateurs. </li><li>  Mode CAPS - apr√®s r√©initialisation, recherchez le contr√¥leur CAPsMAN. </li><li>  Aucune configuration par d√©faut - ne cr√©ez pas de configuration par d√©faut apr√®s une r√©initialisation. </li><li>  Ne pas sauvegarder - ne pas sauvegarder avant la r√©initialisation.  S'il n'est pas not√©, la sauvegarde cr√©√©e ne sera pas prot√©g√©e par mot de passe. </li><li>  Ex√©cuter apr√®s r√©initialisation - un script qui sera ex√©cut√© apr√®s la r√©initialisation et le red√©marrage du routeur. </li><li>  Lors d'une r√©initialisation, le contenu de la m√©moire flash n'est pas √©cras√©. </li></ul><br><p>  Option console: </p><br><pre><code class="hljs sql">/system <span class="hljs-keyword"><span class="hljs-keyword">reset</span></span>-configuration <span class="hljs-keyword"><span class="hljs-keyword">no</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">defaults</span></span>=yes <span class="hljs-keyword"><span class="hljs-keyword">skip</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">backup</span></span>=yes</code> </pre> <br><h3 id="apparatnyy-sbros-nastroek">  R√©initialisation mat√©rielle </h3><br><p>  Tout d√©pend du mod√®le du routeur, il y a trois options possibles: </p><br><p>  <strong>Il y a un bouton de r√©initialisation</strong> </p><br><p>  Tout d'abord, coupez l'alimentation, maintenez la touche de r√©initialisation enfonc√©e et allumez-la.  Communiqu√© par: </p><br><ul><li>  3 secondes (jusqu'√† ce que ACT clignote) - chargement √† partir d'un chargeur de d√©marrage de rechange.  Cela aide en cas d'√©chec lors de la mise √† jour du syst√®me ou du micrologiciel. </li><li>  <strong>5 secondes (ACT clignote) - r√©initialisation.</strong> </li><li>  10 secondes (ACT cesse de clignoter) - Recherche du contr√¥leur CAPsMAN. </li><li>  15 secondes (ACT d√©sactiv√©) - recherchez le serveur netinstall. </li></ul><br><p>  <strong>Zone de contact</strong> </p><br><p>  Le wiki affirme que tous les appareils sont √©quip√©s d'une plate-forme similaire.  Par int√©r√™t, j'ai ouvert RB491-2nD et n'en ai pas trouv√©. </p><br><p>  Technologie de r√©initialisation: coupez l'alimentation, fermez le pad (le bip √©met un grincement sifflant) et ne l√¢chez pas jusqu'√† ce qu'il soit compl√®tement charg√©. </p><br><p>  <strong>Cavalier</strong> </p><br><p>  Pr√©sent sur les anciens mod√®les. </p><br><p>  Technologie de r√©initialisation: coupez l'alimentation, fermez le cavalier, attendez la pleine charge, retirez le cavalier. </p><br><h3 id="protected-routerboot">  Routerboot prot√©g√© </h3><br><p>  Il peut y avoir une situation o√π, apr√®s avoir r√©initialis√© le routeur de quelqu'un d'autre (sinon vous le saurez), il ne se chargera pas au-del√† du "premier pic" - il s'agit d'un nouveau patch Mikrotik effa√ßant toute la m√©moire flash (y compris RouterOS), netinstall est requis pour la r√©cup√©ration. </p><br><p>  <strong>√Ä propos de RouterBoot</strong> </p><br><p>  RouterBoot est le chargeur de d√©marrage initial sur les appareils Mikrotik, il peut √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">interagi avec</a> via l'interface s√©rie et l'un des objectifs du Protected RouterBoot est d'emp√™cher les interf√©rences avec le processus de d√©marrage. </p><br><p>  Le chargeur est divis√© en deux parties: </p><br><ul><li>  R√©cup√©ration - livr√© avec l'appareil et correspond au firmware d'usine. </li><li>  Actuel - livr√© avec le package syst√®me, mais mis √† jour s√©par√©ment. </li></ul><br><p><img src="https://habrastorage.org/webt/3p/qx/xl/3pqxxl1t563pxmzjosgqqxcjjyq.png"><br>  Vous pouvez afficher les versions actuelles dans [Syst√®me] ‚Üí [RouterBoard].  Le bouton [Mettre √† niveau] met √† jour le chargeur de d√©marrage actuel.  Si le syst√®me fonctionne mal et d√©marre uniquement √† partir de la sauvegarde (comme d√©crit dans la section ci-dessus), dans [Param√®tres], vous pouvez explicitement sp√©cifier le chargeur de d√©marrage de r√©cup√©ration en tant que chargeur de d√©marrage permanent, l'option de mise √† niveau automatique pour mettre √† jour le chargeur de d√©marrage actuel avec RouterOS.  <i>Et puisque nous sommes ici, l'option Silent Boot coupe les sons pendant le d√©marrage.</i> </p><br><div class="spoiler">  <b class="spoiler_title">Option console</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">#   /<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> routerboard print /<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> routerboard setting print #   /<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> routerboard upgrade #    Recovery /<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> routerboard setting <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> force-backup-booter=yes #  beeper /<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> routerboard setting <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> silent-boot=yes</code> </pre> </div></div><br><p>  <strong>Sur quelles versions de microprogramme fonctionne Protected RouterBoot?</strong> </p><br><p>  Un travail garanti est promis pour les appareils avec Factory Firmware 3.24 et sup√©rieur, si votre appareil est plus ancien, alors la fonction peut √™tre activ√©e en mettant √† jour le firmware. </p><br><div class="spoiler">  <b class="spoiler_title">Mise √† jour du firmware de r√©cup√©ration sur RB951G</b> <div class="spoiler_text"><p>  Le forum et le wiki avertissent que tout est exp√©rimental et fait √† vos risques et p√©rils.  Lisez le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sujet</a> , il y a une liste de mod√®les et de fichiers de mise √† jour, je vais √©crire sur l'exemple du RB951G. </p><br><p>  L'erreur ressemble √† ceci: <br><img src="https://habrastorage.org/webt/n5/q7/oj/n5q7ojwxro3glijxy8c97sifr90.png"></p><br><p>  Pour commencer, t√©l√©chargez: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Package Dpk</a> pour son architecture. <br><img src="https://habrastorage.org/webt/fe/wx/m3/fewxm3tfbtbfpkxafrujegghf-w.png"></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">firmware</a> (√©l√©ment du firmware RouterBoot), pour les autres mod√®les, recherchez dans des endroits similaires. </li></ul><br><p>  Ils seront n√©cessaires plus tard. </p><br><p>  La mise √† jour du chargeur de d√©marrage ne fonctionnera que sur la version du firmware BugFix, vous devez donc revenir √† la version 6.40.x. <br>  <strong>Option 1</strong> <br>  [Syst√®me] ‚Üí [Packages] ‚Üí [Rechercher les mises √† jour] <br>  Cha√Æne: correction de bugs uniquement <br>  cliquez sur [T√©l√©charger et installer] <br>  Option console: </p><br><pre> <code class="hljs sql">/system package <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> channel=bugfix /<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> <span class="hljs-keyword"><span class="hljs-keyword">check</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>-updates /<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> <span class="hljs-keyword"><span class="hljs-keyword">install</span></span></code> </pre> <br><p><img src="https://habrastorage.org/webt/oq/w3/4s/oqw34sbz9yvbtv3sfvajrpwi95g.png"></p><br><p>  <strong>Option 2</strong> <br>  T√©l√©chargez la version requise (6.40.8 pour le moment) de RouterOS √† partir de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archive</a> , d√©compressez et copiez les packages n√©cessaires sur MikroTik. <br>  Suivant: [Syst√®me] ‚Üí [Packages] ‚Üí [R√©trograder] <br><br>  Option console: </p><br><pre> <code class="hljs perl">/<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> downgrade</code> </pre> <br><p>  R√©sultat: <br><img src="https://habrastorage.org/webt/bg/fs/kg/bgfskgu057hl_t2jnht5y8gyd9k.png"></p><br><p>  Nous revenons aux fichiers t√©l√©charg√©s pr√©c√©demment. <br>  Nous t√©l√©chargeons dans le fichier device.fwf * et commen√ßons la mise √† jour du firmware via: <br>  [Syst√®me] -&gt; [RouterBoard] -&gt; [Mise √† niveau] <br>  [Syst√®me] -&gt; [Red√©marrer] <br>  Option console: </p><br><pre> <code class="hljs pgsql">/<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> routerboard upgrade /<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> reboot</code> </pre> <br><p>  Apr√®s le red√©marrage, le micrologiciel actuel deviendra 3.41.  Supprimez le fichier fwf *. </p><br><p>  T√©l√©chargez le fichier .dpk * sur l'appareil et envoyez-le pour red√©marrer. <br>  Nous obtenons une version mise √† jour du firmware d'usine. <br><img src="https://habrastorage.org/webt/jo/1f/eq/jo1feqbrt32dsbxbpcknjffl-em.png"><br>  Vous pouvez maintenant mettre √† jour RouterOS vers la derni√®re version, apr√®s avoir mis √† jour le chargeur de d√©marrage et utiliser toutes les fonctionnalit√©s. </p></div></div><br><p>  [Syst√®me] ‚Üí [RouterBoard] ‚Üí [Param√®tres] </p><br><p><img src="https://habrastorage.org/webt/wh/p-/em/whp-emrf5eegbfwvrv0sq1cyn9o.png"><br>  <strong>Activez Protected RouterBoot = yes, qui est maintenant</strong> </p><br><ul><li>  L'interaction avec RouterBoot pendant la phase de d√©marrage ne sera pas possible. </li><li>  Le bouton R√©initialiser fonctionnera en un seul mode - √©craser la m√©moire flash.  Les options reformat-hold-button et reformat-hold-button-max d√©terminent les valeurs minimum et maximum pour le temps de maintien du bouton Reset.  Vous devez entrer dans l'intervalle d√©fini.  Le formatage de la m√©moire peut prendre jusqu'√† 5 minutes. </li><li>  Etherboot ne fonctionnera pas. </li><li>  La r√©initialisation par fermeture de contact sur la carte ne fonctionnera pas. </li></ul><br><p>  <em>Je ne vous exhorte pas √† inclure cette option sans faute, pensez par vous-m√™me quand vous en avez besoin et quand vous pouvez vous passer de telles mesures.</em> </p><br><h3 id="vosstanovlenie-proshivki-sredstvami-netinstall">  R√©cup√©ration du firmware √† l'aide de netinstall </h3><br><p>  Netinstall est un outil universel pour flasher et pr√©configurer les routeurs MikroTik.  Lorsqu'elle est utilis√©e, la m√©moire interne et la configuration sont format√©es, seuls les param√®tres de [Syst√®me] ‚Üí [RouterBOARD] resteront inchang√©s. </p><br><p>  Disponible pour Windows uniquement par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rence</a> .  Conflits avec certains pare-feu et antivirus (ajouter aux exceptions), il peut y avoir des probl√®mes lors du d√©marrage √† partir d'utilisateurs avec des droits limit√©s - ex√©cutez "De l'administrateur". </p><br><p>  <strong>Proc√©dure</strong> </p><br><ul><li>  Besoin de fichiers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de</a> firmware <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d'ici</a> .  vous pouvez prendre l'int√©gralit√© du principal, ou d√©compresser les packages n√©cessaires √† partir d'extra, seul le package syst√®me est requis. </li><li>  Connexion filaire avec un routeur.  De plus, le PC et le routeur doivent √™tre dans le m√™me segment de r√©seau, il est pr√©f√©rable de se connecter directement par c√¢ble. </li><li>  Ils recommandent de d√©connecter toutes les interfaces r√©seau inutiles sur le PC.  En pratique, cela ne pose g√©n√©ralement aucun probl√®me. </li><li>  Installez une adresse IP statique sur l'interface filaire √† laquelle le routeur est connect√©, par exemple: 192.168.100.1/24. </li><li>  Si le port √©tiquet√© Boot est pr√©sent sur Mikrotik, alors connectez-vous, sinon, au premier port. </li><li>  Nous d√©marrons Netinstall, dans [Net Booting], vous devez activer Boot Server Enabled et sp√©cifier ip √† partir du sous-r√©seau pr√©c√©demment s√©lectionn√©, par exemple: 192.168.100.10. </li></ul><br><p><img src="https://habrastorage.org/webt/fo/b7/rn/fob7rnhuascwhs0huicpqo0b-de.png"></p><br><ul><li>  Coupez l'alimentation de MikroTik, maintenez Reset et attendez 15 secondes (jusqu'√† ce que le routeur apparaisse dans Netinstall).  Si le bouton de r√©initialisation est manquant, fermez le plot de contact ou le cavalier. </li><li>  Dans [Parcourir], s√©lectionnez le r√©pertoire avec les fichiers RouterOS n√©cessaires, marquez ceux qui sont n√©cessaires. </li><li>  Cliquez sur [installer]. <br><img src="https://habrastorage.org/webt/th/lg/j4/thlgj4jj0f-twgcbfpwcske90si.png"></li></ul><br><p>  <strong>De quoi d'autre Netinstall est-il capable</strong> </p><br><ul><li>  Cl√© - la licence peut √™tre mise √† jour.  SoftID est requis pour commander une cl√©. </li><li>  Conserver l'ancienne configuration - enregistrez la configuration et restaurez-la apr√®s le micrologiciel. </li><li>  Adresse IP / masque de r√©seau et passerelle - configurez l'IP. </li><li>  D√©bit en bauds - d√©finissez la vitesse de l'interface s√©rie. </li><li>  Configurer le script - un script qui sera lanc√© apr√®s la couture. </li><li>  Appliquer la configuration par d√©faut - charge la configuration par d√©faut.  Cela fonctionne si les trois points pr√©c√©dents ne sont pas d√©finis. </li><li>  Flashfig - un utilitaire pour la personnalisation de masse de nouveaux appareils, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plus</a> . </li></ul><br><h3 id="bekap-i-eksport-konfiguracii-v-mikrotik">  Configuration de sauvegarde et d'exportation dans Mikrotik </h3><br><p>  <strong>Sauvegarde binaire</strong> </p><br><ul><li>  Il comprend une copie presque compl√®te (les fichiers, les certificats et les cl√©s IPSec ne sont pas transf√©r√©s) des param√®tres RouterOS. </li><li>  Seuls les comptes syst√®me sont chiffr√©s dans les sauvegardes. </li><li>  Non modifiable. </li><li>  La r√©cup√©ration √©crase la configuration actuelle. </li><li>  Il est conseill√© de restaurer sur un mod√®le Mikrotik similaire. </li><li>  Il est possible de restaurer sur des mod√®les autres que l'original.  Mais dans la sauvegarde binaire, les param√®tres d'interface sont li√©s √† l'ID interne et pendant la r√©cup√©ration, les num√©ros de port Ethernet r√©el et syst√®me seront m√©lang√©s.  S'il n'y a pas suffisamment d'interfaces physiques sur le nouveau p√©riph√©rique, les param√®tres seront restaur√©s, mais ils se r√©f√©reront √† inconnu. </li></ul><br><p>  Cr√©ations de sauvegarde: <br>  [Fichiers] ‚Üí [Sauvegarde] </p><br><p><img src="https://habrastorage.org/webt/ln/rk/30/lnrk30t0h5ar2xqsosvo7qjzx7o.png"></p><br><ul><li>  Nom - le nom du fichier.  la valeur par d√©faut sera -. <br>  Mot de passe - mot de passe.  Le mot de passe par d√©faut est l'utilisateur actuel. <br>  Ne pas crypter - ne crypte pas la sauvegarde. <br><br><p>  Option console: </p><br><pre> <code class="hljs objectivec">/system backup save <span class="hljs-meta"><span class="hljs-meta">#    # name=</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt;</span></span></span><span class="hljs-meta"> -  # password=</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt;</span></span></span><span class="hljs-meta"> -  # dont-encrypt=</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;yes|no&gt;</span></span></span><span class="hljs-meta"> -  </span></span></code> </pre> <br><p>  R√©cup√©ration: <br>  [Fichiers] ‚Üí [Mettez en surbrillance le fichier n√©cessaire] ‚Üí [Restaurer] </p><br><p><img src="https://habrastorage.org/webt/25/z6/pz/25z6pzb0e7bbfmu5dk0pqpzgj14.png"></p><br><p>  Option console: </p><br><pre> <code class="hljs pgsql">/<span class="hljs-keyword"><span class="hljs-keyword">system</span></span> backup <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>=&lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=&lt;&gt;</code> </pre> <br><p>  Facultatif: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.mikrotikpasswordrecovery.net/</a> - service d'extraction des comptes syst√®me d'une sauvegarde non chiffr√©e. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/BigNerd95/RouterOS-Backup-Tools</a> - un script non officiel pour le d√©ballage partiel de la sauvegarde. </li></ul><br><p>  <strong>Configuration d'exportation et d'importation</strong> </p><br><ul><li>  N'inclut pas les param√®tres utilisateur du syst√®me.  <a href="http://href=">Cliquez sur</a> </li><li>  Vous pouvez enregistrer (exporter) et charger (importer) uniquement √† partir de la console. </li><li>  Il est possible de copier √† la fois la configuration enti√®re et la partie. </li><li>  Non crypt√©. </li><li>  Vous pouvez √©diter. </li><li>  Lors du chargement (importation) de la configuration, le courant ne sera pas √©cras√©. </li><li>  Vous pouvez restaurer sur n'importe quel mod√®le, il n'y aura pas de confusion dans les interfaces, mais si les interfaces ne suffisent pas, les param√®tres correspondants ne seront pas restaur√©s. </li><li>  Dans les mises √† jour r√©centes, RouterOS a r√©par√© la r√©cup√©ration des scripts et des planificateurs.  Maintenant, ils sont restaur√©s sans erreur avec les utilisateurs sp√©cifi√©s, les utilisateurs eux-m√™mes ne seront pas cr√©√©s. </li></ul><br><p>  Options d'exportation: </p><br><ul><li>  compact - seules les diff√©rences par rapport √† la configuration par d√©faut.  Par d√©faut, RouterOS 6. Conflit avec verbose. </li><li>  verbose est la configuration la plus compl√®te.  Par d√©faut dans RouterOS 5. Conflit avec compact. </li><li>  sensible au masquage - n'exporte pas les mots de passe, les cl√©s, etc. </li><li>  laconique - ne cassez pas les lignes. <br>  l'exportation n'enregistre pas la configuration dans un fichier sauf si vous sp√©cifiez explicitement la cl√© file = &lt;nom de fichier&gt; l'extension rsc sera ajout√©e automatiquement. </li></ul><br><pre> <code class="hljs delphi">#    /<span class="hljs-keyword"><span class="hljs-keyword">export</span></span> #      /<span class="hljs-keyword"><span class="hljs-keyword">export</span></span> verbose <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>=config #   ip address   /ip address <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>=config-ip-add #     /import <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>=config.rsc</code> </pre> <br><h3 id="routeros-dualboot-v-mikrotikpartition">  RouterOS DualBoot dans Mikrotik (Partition) </h3><br><p>  Le lecteur flash peut √™tre divis√© en plusieurs sections et installer plusieurs copies de RouterOS (y compris diverses).  En cas d'√©chec du t√©l√©chargement √† partir de la section principale, la suivante sera charg√©e.  Cette fonction est disponible sur les appareils des s√©ries MIPS, PowerPC et CCR. </p><br><p>  Partitionnement: <br>  [Partition] ‚Üí [R√©partition] </p><br><p><img src="https://habrastorage.org/webt/nr/l4/u_/nrl4u_umddpkhf5w2xxbif4ygj4.png"></p><br><pre> <code class="hljs">/partitions repartition partitions=2</code> </pre> <br><p>  Vous devez sp√©cifier le nombre total de sections.  Il existe deux restrictions: le nombre maximal de partitions est de 8 et la taille minimale de partition: 32 Mo pour MIPS;  40 Mo pour PowerPC;  48 Mo pour CCR. </p><br><p>  La nouvelle section sera vide, vous devez y copier le firmware actuel via [Copier vers]. <br><img src="https://habrastorage.org/webt/tz/dn/4s/tzdn4s7juytv8vbp5q38klvbdfc.png"></p><br><pre> <code class="hljs pgsql">/partitions <span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span> part1</code> </pre> <br><p>  Les propri√©t√©s des partitions sont mieux visibles dans la console: Active (A) - √† partir de laquelle le prochain d√©marrage sera effectu√© et la partition √† partir de laquelle le syst√®me¬Æ a √©t√© d√©marr√©. </p><br><p><img src="https://habrastorage.org/webt/3u/8r/6z/3u8r6z-2hgyhnhtkvsioiqsclkc.png"><br>  La section active est modifi√©e dans ses propri√©t√©s √† l'aide du bouton [Activer].  L'option Fallback to est responsable de la s√©lection de la partition en cas d'√©chec du t√©l√©chargement. </p><br><pre> <code class="hljs pgsql">#    /partitions activate part1 #    /partitions <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> part1 fallback-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>=part0 #     bootp(netinstall) /partitions <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> part1 fallback-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>=etherboot</code> </pre> <br><p>  [Save Config To] - Enregistrez la configuration de la partition actuelle¬Æ vers la partition s√©lectionn√©e. <br>  [Restaurer la configuration depuis] - Enregistrez la configuration de la partition s√©lectionn√©e dans la version actuelle. </p><br><pre> <code class="hljs powershell">/partitions <span class="hljs-built_in"><span class="hljs-built_in">save-config</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span> part1 /partitions <span class="hljs-built_in"><span class="hljs-built_in">restore-config</span></span><span class="hljs-literal"><span class="hljs-literal">-from</span></span> part1</code> </pre> <br><p>  La fonctionnalit√© est int√©ressante, mais pr√©sente deux inconv√©nients: tous les routeurs ne sont pas √©quip√©s d'une quantit√© suffisante de m√©moire flash.  Les plantages de RouterOS, m√™me lors de la mise √† niveau, ne sont pas si courants. </p></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419693/">https://habr.com/ru/post/fr419693/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419679/index.html">Impl√©mentation de l'API Spring Framework √† partir de z√©ro. Proc√©dure pas √† pas pour les d√©butants. Partie 1</a></li>
<li><a href="../fr419683/index.html">Que signifient les m√©triques pour les √©quipes agiles?</a></li>
<li><a href="../fr419685/index.html">Les structures de donn√©es les plus importantes que vous devez savoir sur votre entretien de programmation</a></li>
<li><a href="../fr419687/index.html">Secret Keyboard Level 3 ou comment imprimer un long tiret</a></li>
<li><a href="../fr419689/index.html">I. D√©sadaptation. II. TDAH ou cr√©tin paresseux?</a></li>
<li><a href="../fr419695/index.html">Que faire juste apr√®s un voyage √† une conf√©rence d'affaires? Conseils de ISPsystem bizdedev</a></li>
<li><a href="../fr419697/index.html">Stade de t√©l√©communications "Yekaterinburg Arena": 20 kilom√®tres de c√¢ble √©pais</a></li>
<li><a href="../fr419699/index.html">Historique des tests du projet K: Kotlin & Spek</a></li>
<li><a href="../fr419701/index.html">Pourquoi, en pr√©sence d'alimentation √©lectrique, ai-je besoin d'une bonne vieille chaudi√®re √† charbon dans la voiture</a></li>
<li><a href="../fr419703/index.html">Enregistrement des dispositifs m√©dicaux: combien de souris souffriront dans le processus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>