<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∞üèΩ üß§ üìò TeamCity 2018.1: Novo DSL do Kotlin, modo de alta disponibilidade, integra√ß√£o aprimorada do Docker e Amazon S3 pronto para uso üíáüèº üßöüèΩ ‚§µÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Recentemente, lan√ßamos uma nova vers√£o do TeamCity - 2018.1. Este √© o primeiro grande lan√ßamento do nosso servidor de CI / CD este ano. E h√°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TeamCity 2018.1: Novo DSL do Kotlin, modo de alta disponibilidade, integra√ß√£o aprimorada do Docker e Amazon S3 pronto para uso</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/JetBrains/blog/416999/">  Ol√° Habr!  Recentemente, lan√ßamos uma nova vers√£o do TeamCity - 2018.1.  Este √© o primeiro grande lan√ßamento do nosso servidor de CI / CD este ano.  E h√° algo para olhar. <br><br>  A lista completa de mudan√ßas √©, como sempre, <a href="">impressionante</a> .  Mas aqui vamos nos concentrar em quatro caracter√≠sticas principais do lan√ßamento.  Vamos l√°! <br><br><img src="https://habrastorage.org/webt/ds/gs/rn/dsgsrns4kloe6pxtirfqd5uo5iw.png"><br><a name="habracut"></a><br><h2>  Nova DSC do TeamCity Kotlin </h2><br>  O TeamCity possui sua pr√≥pria DSL (Linguagem Espec√≠fica de Dom√≠nio), com a qual voc√™ pode descrever as configura√ß√µes dos projetos e criar configura√ß√µes no c√≥digo Kotlin, incorporando os princ√≠pios de Infraestrutura como C√≥digo.  Em 2018.1, reformulamos significativamente o formato deste DSL, tornando-o mais simples, mais conveniente e mais funcional. <br><br>  <strong>Mais f√°cil</strong> .  O formato DSL foi simplificado devido ao fato de o TeamCity n√£o precisar mais de um servidor uuid e um ID do projeto, ele aprendeu como ger√°-los independentemente do nome do projeto e criar configura√ß√µes.  Aqui, por exemplo, est√° todo o c√≥digo necess√°rio para descrever um simples projeto "Hello world" no TeamCity: <br><br><pre><code class="hljs pgsql">version = "2018.1" project{ buildType(HelloWorld) } <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> HelloWorld : BuildType({ <span class="hljs-type"><span class="hljs-type">name</span></span> = "Hellow world" steps { scriptContent = "echo 'Hello world!'" } })</code> </pre> <br>  <strong>Arquivo √∫nico</strong> .  Todo o c√≥digo para descrever as configura√ß√µes do TeamCity agora est√° armazenado em um arquivo - settings.kts, que deve ser adicionado ao diret√≥rio .teamcity. <br><br>  <strong>Portabilidade</strong> .  Como o c√≥digo agora n√£o tem liga√ß√£o a um servidor ou projeto espec√≠fico, ele pode ser reutilizado para outras instala√ß√µes ou projetos no mesmo servidor.  Apenas copie settings.kts para o reposit√≥rio apropriado. <br><br>  <strong>Crie projetos a partir de uma URL</strong> .  Para que o TeamCity leia e aplique as configura√ß√µes do c√≥digo, basta fornecer um link para o reposit√≥rio com .teamcity / settings.kts.  Todas as configura√ß√µes descritas ser√£o executadas automaticamente. <br><br>  Aqui est√° uma breve demonstra√ß√£o dos novos recursos Kotlin DSL da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">antonarhipov</a> (em ingl√™s): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/rpAbUDzf8Nk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Alta disponibilidade e somente leitura </h2><br>  Em 2018.1, tornou-se poss√≠vel iniciar o servidor no modo somente leitura.  Isso permite configurar um cluster TeamCity altamente acess√≠vel, composto por dois servidores TeamCity: o principal e o sobressalente, trabalhando no modo somente leitura.  Nesse caso, o servidor somente leitura ter√° acesso de leitura ao banco de dados e ao diret√≥rio de dados e aumentar√° constantemente as modifica√ß√µes de dados executadas pelo servidor principal.  No caso de uma falha do servidor principal, o servidor somente leitura aceitar√° todas as solicita√ß√µes.  √â importante entender que o servidor somente leitura somente poder√° mostrar o √∫ltimo estado no momento do colapso do servidor principal, mas n√£o permitir√° alterar esse estado. <br><br>  Isso vale para instala√ß√µes grandes, que s√£o importantes para ter acesso ininterrupto ao servidor de IC, durante falhas agendadas e durante atualiza√ß√µes agendadas. <br><br><h2>  Suporte aprimorado ao Docker </h2><br>  Anteriormente, escrevemos sobre o fato de o TeamCity suportar o Docker "pronto para uso": iniciando compila√ß√µes no cont√™iner, criando imagens do Docker, adicionando e removendo-as do reposit√≥rio, iniciando comandos do Docker, compondo o Docker. <br><br>  Esta vers√£o adiciona suporte para os corredores .NET CLI e Powershell, que permitem concluir essas etapas de compila√ß√£o dentro do cont√™iner do Docker. <br><br>  O pr√≥prio Docker runner tamb√©m foi atualizado: suporta nativamente build, push e outros. <br><br>  Como o suporte ao Docker funciona no TeamCity, voc√™ pode ver neste v√≠deo: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2JV83q1MgO8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Armazenar artefatos no Amazon S3 </h2><br>  O plugin TeamCity AWS S3 j√° existe h√° algum tempo, mas na vers√£o 2018.1 corrigimos muitos problemas e o inclu√≠mos na distribui√ß√£o principal.  A integra√ß√£o do S3 lida com artefatos de depend√™ncia e artefatos de limpeza com tanta eleg√¢ncia e √© t√£o integrada √† UI do TeamCity que um usu√°rio desavisado pode n√£o perceber que os artefatos est√£o armazenados no bucket do S3. <br><br>  Aqui est√° uma demonstra√ß√£o: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/B4jm85pFX1E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Outras melhorias </h2><br>  Entre outras melhorias, vale destacar um trabalho mais conveniente com as etapas de montagem herdadas dos modelos.  Agora, em particular, agora √© poss√≠vel definir etapas pr√© e p√≥s no modelo e indicar que as etapas de configura√ß√£o est√£o entre elas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6f/vl/f2/6fvlf24kchznxpbr_rtnof-cmhc.png" width="450"></div><br>  A nova vers√£o tamb√©m melhorou significativamente o trabalho com o feed NuGet.  Agora, ele pode ser ativado no n√≠vel de um projeto espec√≠fico, e n√£o globalmente em todo o servidor, o que causou problemas de desempenho no passado.  Como resultado, v√°rios feeds do NuGet em diferentes projetos agora s√£o suportados. <br><br><img src="https://habrastorage.org/webt/qv/nw/k_/qvnwk_idpxqu9fx3g9rgaf651ls.png"><br><br>  Se alguns de seus servi√ßos na rede funcionarem para certificados SSL que n√£o s√£o assinados por uma autoridade conhecida, em vez do processo bastante complicado de importar esses certificados para servidores e agentes Java, voc√™ pode simplesmente carreg√°-los no projeto do servidor raiz por meio de uma interface da web conveniente.  O servidor e os agentes come√ßar√£o imediatamente a usar os novos certificados. <br><br>  Recentemente, tivemos um webinar, durante o qual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">antonarhipov</a> demonstrou todas as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">op√ß√µes</a> acima em a√ß√£o.  Voc√™ pode v√™-lo na entrada: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/e37vNedsBeQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Voc√™ pode baixar (e executar na AWS, no Azure ou no cont√™iner Docker) a vers√£o mais recente do TeamCity 2018.1 em nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site</a> .  Deixe coment√°rios e sugest√µes sobre a nova vers√£o em nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rastreador de erros</a> . <br><br><blockquote>  Lembramos que o TeamCity Professional fornece <strong>100 compila√ß√µes de configura√ß√µes e 3 compila√ß√µes de um agente de forma</strong> totalmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>gratuita</strong></a> , sem restri√ß√µes de tempo e funcionalidade. </blockquote>  <em>Tenha uma boa constru√ß√£o!</em> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt416999/">https://habr.com/ru/post/pt416999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt416989/index.html">Rob√¥s bi√¥nicos Festo: aranhas e polvos nas f√°bricas do futuro?</a></li>
<li><a href="../pt416991/index.html">A grava√ß√£o de v√≠deo da tela n√£o √© t√£o secreta. Vers√µes de King Burger e Appsee</a></li>
<li><a href="../pt416993/index.html">Conhe√ßa Sofia: um rob√¥ quase indistingu√≠vel dos humanos</a></li>
<li><a href="../pt416995/index.html">Desafio UX: projetando um aplicativo de banco m√≥vel em 5 dias</a></li>
<li><a href="../pt416997/index.html">Pergunte a Ethan: A vida na Terra era poss√≠vel em qualquer outro lugar da nossa gal√°xia?</a></li>
<li><a href="../pt417001/index.html">Roedor de or√ßamento. Teste do Mouse Sem Fio Logitech B170</a></li>
<li><a href="../pt417003/index.html">As emo√ß√µes formam o idioma que usamos; mas um segundo idioma os ajuda a se locomover</a></li>
<li><a href="../pt417005/index.html">A hist√≥ria do aluno: sobre as desvantagens da educa√ß√£o em TI italiana, massas e vida com uma velha milanesa</a></li>
<li><a href="../pt417007/index.html">N√£o h√° leis da f√≠sica, apenas paisagem</a></li>
<li><a href="../pt417009/index.html">Como implementar a tecnologia de aprendizado de m√°quina em seus neg√≥cios</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>