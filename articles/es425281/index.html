<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïê üí¶ üéÖüèæ Pautas para llevar "a la condici√≥n" un clon del popular mini-enrutador chino Hame A15, tambi√©n conocido como "sin marca A5-V11" üêÇ ‚öæÔ∏è ü§ôüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si vi m√°s all√° de los dem√°s, fue porque estaba parado sobre los hombros de gigantes. 
 I. Newton 


 Creo que mucha gente conoce el peque√±o enrutador ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pautas para llevar "a la condici√≥n" un clon del popular mini-enrutador chino Hame A15, tambi√©n conocido como "sin marca A5-V11"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425281/"><p>  <i>Si vi m√°s all√° de los dem√°s, fue porque estaba parado sobre los hombros de gigantes.</i> <i><br></i>  <i><b>I. Newton</b></i> </p><br><p>  Creo que mucha gente conoce el peque√±o enrutador chino Hame A15 (o, mejor dicho, sus copias masivas, con TTX mejorado en comparaci√≥n con el original, est√° igualmente bien googleado por las palabras clave <b>3g / 4g enrutador</b> tanto en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">eBay</a> como en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">AliExpress</a> ).  Hoy quer√≠a contarles c√≥mo record√© un enrutador de $ 6.5 y gast√© $ 20 en √©l.  Por qu√©  Y por la misma raz√≥n por la cual las pulseras est√°n tejidas con cuentas, para entrenar la micromotricidad y la vista (los cuerpos componentes son principalmente 0402 :) En su mayor parte por inter√©s deportivo, aunque tambi√©n es importante que este enrutador sea hoy mi base favorita para varios proyectos (incluso a pesar de la dificultad de acceder al GPIO), en lugar de los "populares" NEXX WT3020F, TP-Link TL-MR3020, TP-Link TL-WR703N y otros.  La raz√≥n de esto es principalmente su tama√±o y la forma de la placa de circuito impreso, conveniente para incrustar en cualquier lugar (en la foto puede estimar el tama√±o).  En el futuro, para evitar la confusi√≥n de la terminolog√≠a, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">nombrar√©</a> el dispositivo que se muestra a continuaci√≥n como lo llama la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">wiki openwrt</a> : <b>A5-V11</b> . </p><br><img src="https://habrastorage.org/webt/xq/rw/n3/xqrwn3a7h_npbxhgw0xfajvcjh8.jpeg"><a name="habracut"></a><br><p>  El coraz√≥n de este dispositivo es el SoC Ralink RT5350F de 360 ‚Äã‚ÄãMHz, a bordo hay un host USB completo, 4 MB de memoria flash y 32 MB de SDRAM con una frecuencia de 166 MHz (esto es extra√±o por cierto, porque incluso el antiguo D-link DIR-320 a bordo ten√≠a un DDR m√°s r√°pido).  Algunos clones de clones tienen 16 MB de memoria y no son adecuados sin aumentar la RAM para las manipulaciones descritas en este art√≠culo. </p><br><p>  Como de costumbre, la siguiente imagen muestra el enrutador original Hame A15. </p><br><div class="spoiler">  <b class="spoiler_title">Original Hame A15</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/c51/593/bb2/c51593bb22f95c58a5bfbc7cbe9fe93b.jpg" alt="imagen"></div></div><br><p>  Y aqu√≠ est√° su copia china mejorada (al final del art√≠culo puede ver otra copia de la copia, pero 10 veces m√°s cara :). </p><br><div class="spoiler">  <b class="spoiler_title">Clon chino Hame A15</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b4c/a9b/96b/b4ca9b96b4217413d40e6fc99a4b0f91.jpg" alt="imagen"></div></div><br><p>  Los componentes internos del firmware ya estaban <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">iluminados</a> en el concentrador, por lo que no me detendr√© en las caracter√≠sticas del marcado.  Detalles de problemas y soluciones se describen en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">w3bsit3-dns.com</a> .  Hay mucha informaci√≥n, pero est√° incre√≠blemente dispersa.  Espero reunir puntos clave en este art√≠culo, basados ‚Äã‚Äãen la experiencia de los chicos: "gigantes de la producci√≥n de enrutadores" :) <br>  La respuesta a la pregunta "¬øpor qu√© este (enrutador) necesita un usuario sin experiencia" cita al usuario <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ded1971</a></b> : </p><br><blockquote>  Propiedades de consumo: enrutador 3G-WiFi vers√°til y compacto.  Es conveniente hacer viajes, conectar un m√≥dem 3G / 4G, organizar su red WiFi o usarlo como repetidor para mejorar WiFi, conecte Internet a un televisor inteligente si no hay WiFi incorporado.  En general, un mont√≥n de caracter√≠sticas √∫tiles para el dinero rid√≠culo. </blockquote><br><div class="spoiler">  <b class="spoiler_title">Bueno, una comparaci√≥n con el omnipresente y popularmente querido ES8266</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zi/e4/fu/zie4fug9lfi3y2pvxuvtubvfyga.jpeg"></div></div><br><h2>  <b>Primera parte, preparatoria</b> </h2><br><p>  Mientras el enrutador estaba en el correo, hubo tiempo para estudiar las cr√≠ticas de los felices propietarios.  Los principales problemas a los que se enfrentaron la mayor√≠a son los problemas de sobrecalentamiento del enrutador (y, en consecuencia, del "chip blade") y la inestabilidad de la alimentaci√≥n, cuando el enrutador no puede iniciarse durante mucho tiempo ("indicador": dos LED est√°n tenuemente iluminados, es imposible conectarse al dispositivo a trav√©s de Ethernet). <br>  Para combatir el primer problema, se decidi√≥ instalar un radiador en el chip.  Para hacer esto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ped√≠</a> peque√±os radiadores de aluminio de tama√±o 12x12x3 mm (exactamente el tama√±o del chip).  Se eligi√≥ la altura de 3 mm porque quer√≠a que el radiador que sobresal√≠a no se aferrara a los objetos (en una bolsa, por ejemplo) y el enrutador pudiera descansar establemente sobre la mesa. </p><br><div class="spoiler">  <b class="spoiler_title">As√≠ son los colocadores de radiadores ...</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hv/ut/of/hvutofqkpygjf6z584zuogpo1h8.jpeg"></div></div><br><p>  Para arreglar el radiador, decid√≠ usar adhesivo termofusible.  De los disponibles en nuestra √°rea, solo hab√≠a un Alsil-5 ‚Äú√∫nico‚Äù, que, a pesar de la conductividad t√©rmica bastante buena, no significa en absoluto almacenamiento a largo plazo.  Se seca en un par de d√≠as (y si tiene suerte, puede comprar ya seco).  Por lo tanto, en el mismo aliexpress, se ordenaron dos tipos de adhesivo termofusible para radiadores LED de alta potencia: <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Halnziye HY910</a></b> y <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Hcbonyx HC-910</a></b> . </p><br><div class="spoiler">  <b class="spoiler_title">Adhesivo de fusi√≥n en caliente vigoroso chino</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/t8/oz/3c/t8oz3cxfsxxdgescpbxqrixahea.jpeg"></div></div><br><p>  Las opiniones sobre ellos en foros especializados no son malas, aunque los expertos a√∫n recomiendan el uso de adhesivos de fusi√≥n en caliente epox√≠dicos de dos componentes, como <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Thermopox 85CT,</a></b> para tareas serias.  Pero ve a buscarlo todav√≠a ... <br>  Por si acaso, a continuaci√≥n dar√© caracter√≠sticas comparativas de las conductividades t√©rmicas del termofusible utilizado por m√≠, que se encuentra en Internet. </p><br><blockquote>  Hot Melt Halnziye HY910 - Conductividad t√©rmica 0.975W / mK <br>  Adhesivo termofusible Alsil-5 - conductividad t√©rmica 1.4-1.6W / mK <br>  Adhesivo termofusible Hcbonyx HC-910 - conductividad t√©rmica 1.7W / mK </blockquote><br><div class="spoiler">  <b class="spoiler_title">Y la foto general :)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dx/yn/w5/dxynw5hmybwxmhld-w_vnw9jjim.jpeg"></div></div><br><p>  Para instalar el radiador, tuve que cortar la carcasa (incluso para mejorar la transferencia de calor).  Para hacer todo con la mayor precisi√≥n posible, lo primero que hice fue dibujar las dimensiones del tablero en papel grueso, cortar un agujero para el chip y luego poner esta plantilla de cart√≥n en la caja.  Entonces todo es simple: dibuja los contornos del agujero con un l√°piz, c√≥rtalo con un cuchillo de oficina y muele el archivo. </p><br><img src="https://habrastorage.org/webt/9q/o-/nl/9qo-nlm0e9vzad5o_sfsifzcjh8.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Marcado y recorte de la carcasa de pl√°stico para el radiador 12x12</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/eh/1g/c-/eh1gc-i_lgdpe2tqwgqirx3re58.jpeg"><br><img src="https://habrastorage.org/webt/83/zi/i5/83zii5m42wo-pk-y8ieffpyqy4o.jpeg"><br><img src="https://habrastorage.org/webt/ps/im/5p/psim5pqhpvvxwdrqhayszjckn-k.jpeg"></div></div><br><p>  Paralelamente a la instalaci√≥n del radiador, <u>es necesario</u> soldar el condensador SMD de cer√°mica faltante <b>10 uF 6.3 V</b> al enrutador en el circuito convertidor de 3.3V.  (por recomendaci√≥n del usuario <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">return1</a></b> ).  La ubicaci√≥n de instalaci√≥n se muestra en la imagen: </p><br><img src="https://habrastorage.org/webt/el/nl/kq/elnlkqdn_wmebw8rhecg8pxdwqk.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Y aqu√≠ hay una placa con un condensador de 10 microfaradios de 6.3 V ya instalado</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/_h/zi/bw/_hzibwbg-ou98na-zzxksay1j2k.jpeg"></div></div><br><p>  Seg√∫n las revisiones, el consumo actual del dispositivo disminuye y se vuelve m√°s estable.  Presumiblemente, en el convertidor de 3.3V, aparecen ondas en la salida que desactivan el procesador.  El condensador suaviza estas ondas. </p><br><p>  <b>Importante!</b>  <u>Intente instalar el radiador y suelde el condensador ANTES de iniciar y operar el enrutador.</u>  De lo contrario, puede resultar que Borjomi sea demasiado tarde para beber ... </p><br><p>  Las personas resuelven el problema con la energ√≠a instalando chips de monitor de energ√≠a especializados, en lugar de la cadena RC est√°ndar del enrutador, por ejemplo, <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">KR1171SP28</a></b> , <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">DS1816</a></b> o <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">MAX809TTR</a></b> .  Inmediatamente me gust√≥ la opci√≥n de usar los supervisores de potencia Maxim.  Las dos tareas principales que los supervisores pueden resolver son mantener el controlador en el estado de reinicio hasta que el voltaje de suministro alcance el valor establecido y se estabilice, o reiniciar el controlador cuando el voltaje de suministro cae por debajo de un nivel cr√≠tico o cuando el voltaje cae de repente.  Adem√°s de las ventajas de este tipo de supervisor, se puede observar que no se requieren componentes adicionales para instalar el microcircuito, y en t√©rminos de tama√±o, este dispositivo semiconductor se coloca en el lugar de los elementos eliminados (s√≠, primero debe quitar las resistencias y condensadores que ya no son necesarios, y luego pasar por encima trenza sobre almohadillas). </p><br><img src="https://habrastorage.org/webt/am/hn/he/amhnhetbzfafmcqmfgi_o6glivu.jpeg"><br><p>  La b√∫squeda en aliexpress no arroj√≥ nada, pero s√≠ hizo una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">b√∫squeda</a> en el cat√°logo de CHIPiDIP, donde se encontraron los <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">moldeadores de</a></b> pulso <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">MAX809TEUR + T</a></b> (con un voltaje de reinicio de 3.08 voltios), uno de los cuales fue soldado con √©xito al enrutador. </p><br><img src="https://habrastorage.org/webt/tf/gh/jo/tfghjovrvng4-1fhq2zcvxdolym.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Configuraci√≥n del modelador de pulsos (reinicio) MAX809TEUR + T</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wx/mz/v8/wxmzv8tumrwenm-8dwdbzv7yss0.jpeg"><br><img src="https://habrastorage.org/webt/is/zf/es/iszfeso0wlsatspn29hw_bgc6ei.jpeg"><br><img src="https://habrastorage.org/webt/2s/mu/fb/2smufbcg314dg5sjpjgmd_r3p2e.jpeg"></div></div><br><p>  Por cierto, no puedo dejar de mencionar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">soldador USB</a> chino, sin el cual nunca hubiera convertido este procedimiento (incluso con un microondas elogiado ...). <br>  Para no desperdiciar un soldador, al mismo tiempo decid√≠ soldar un bloque de contacto a las almohadillas de contacto de la consola UART (talones) para simplificar la conexi√≥n con los cables Dupont de los dise√±adores de Arduino.  Las almohadillas de las almohadillas se combinan idealmente con un paso de contacto de 2 mm (el est√°ndar extendido de 2,54 mm ya es ancho)  Estos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">son</a> , por ejemplo.  Para que sea m√°s conveniente soldar, con la ayuda de unas pinzas, dobl√© los extremos de los contactos con la letra G y esta√±√© los puntos en la placa del enrutador. </p><br><div class="spoiler">  <b class="spoiler_title">Preparando la consola UART</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/5h/6z/qy/5h6zqycmpexzy4qouhlmy3rx8qu.jpeg"></div></div><br><p>  Luego fue suficiente para instalar el bloque en los talones y calentar ligeramente la uni√≥n hasta que la soldadura se derrita.  Es importante no exagerar (lo cual es f√°cil de hacer con un soldador potente), de lo contrario, los lechones simplemente pueden caerse por sobrecalentamiento.  En este caso, la imagen muestra los puntos de prueba de respaldo donde puede soldar. </p><br><img src="https://habrastorage.org/webt/gz/6i/ib/gz6iibr3eakny3pr1sacg2kcxl0.jpeg"><br><p>  Por cierto, puede soldar los contactos con otro m√©todo, pero el caso no se puede cerrar as√≠ como as√≠. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/5e7/b7c/02a/5e7b7c02ac8b291e046e30f39983fb6b.jpg" alt="Soldadura alternativa de contactos UART"><br><p>  Sobre esto, la parte preparatoria termin√≥ y la parte principal comenz√≥. </p><br><h2>  <b>Segunda parte, "Programador"</b> </h2><br><p>  Como mencion√© al principio del art√≠culo, el enrutador tiene poca memoria, solo 4 MB.  Por supuesto, alguien puede recordar el hecho de que "640 KB deber√≠an ser suficientes para todos".  Pero despu√©s de pasar una semana tratando de meter todos los paquetes necesarios (¬°y hay 8 MB (!)) En el openwrt autoensamblado para D-Link DIR-320, ahora s√© con certeza que no vale la pena guardarlo en la memoria.  Por lo tanto, se decidi√≥ cambiar el flash a uno m√°s potente y al mismo tiempo tener un costo razonable (para no ser m√°s costoso que el enrutador).  Para el reemplazo se requieren chips con una frecuencia efectiva (velocidad de reloj SPI) de al menos 100 MHz y un voltaje de suministro de 3.3 V. De los fabricantes: Winbond o cualquier otro (En = Eon, Mx = Macronix, Pm = PMC, At = Atmel).  De lo que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">openwrt.org</a> aconseja son <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">W25Q128BV</a></b> , MX25L128 (35F), S25FL128P, S25FL129P, GD25Q128C, GD25Q128CSIG.  El n√∫mero 128 en la marca nos dice que el volumen de la unidad flash es de 16 MB (128Mbit = 16Mb).  La elecci√≥n del tama√±o nominal se debe al hecho de que un programador chino barato de 24/25 chips de memoria CH341A (m√°s abajo) puede funcionar con ese volumen sin bailar con una pandereta.  Para los fan√°ticos, puedo decir que se pueden soldar 32 MB (por ejemplo, W25Q256FV, MX25L25635F, N25Q256A, MX25L25645GM2I-10G e incluso 64 MB (MX25L51245G, MT25QL512AB). Sin embargo, me gustar√≠a se√±alar que las etiquetas de precio para la memoria est√°n lejos de ser humanas para los m√≥dulos de 64 MB. Noto que hablando de chips de memoria SOLAMENTE en el paquete SOP8, como el m√°s conveniente para soldar, por supuesto, puede tomar chips en casos <a href="" rel="nofollow">WSON8</a> con almohadillas de contacto en lugar de patas, pero la soldadura lleva demasiado tiempo y el resultado puede no cumplir con las expectativas. <br>  Puede actualizar un chip de memoria de varias maneras diferentes, seg√∫n lo que est√© disponible: <br>  <b>a)</b> Hay un diodo / condensador y un puerto paralelo (el programador m√°s simple): miramos las instrucciones del firmware en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">sitio web checo</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">en ruso</a> . </p><br><div class="spoiler">  <b class="spoiler_title">As√≠ que este programador m√°s simple de un conector LPT y un par de detalles se parecen en la vida</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/75b/184/0b375b184a2556dc41d71edc6567a01a.jpg" alt="imagen"></div></div><br><p>  <b>b)</b> Hay cualquier Arduino (Pro, Micro, Nano, etc.): prepararemos un programador para nuestras unidades flash SPI de acuerdo con la siguiente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">receta</a> . <br>  <b>c)</b> Si hay una Raspberry Pi, mira <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">aqu√≠</a> <br>  <b>d)</b> Hay un programador USBASP "popular" (que una vez fue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escrito</a> en Habr√©) - lo estamos preparando de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">acuerdo con la receta No. 2</a> . <br>  <b>e)</b> Solo hay un deseo y un poco de dinero: compramos en aliexpress un programador chino CH341A para flash SPI 24/25 y comenzamos a trabajar en silencio. </p><br><p>  La unidad flash en s√≠ est√° conectada a los programadores de la siguiente manera: </p><br><div class="spoiler">  <b class="spoiler_title">Pinout de chip de memoria</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/dca/bff/40e/dcabff40e2b61ec33aa98f88f0409b42.jpg" alt="imagen"></div></div><br><p>  La unidad flash se puede soldar y conectar a las almohadillas / adaptadores del programador, o puede soldar los cables dupont ya mencionados de Arduino y conectar los cables al programador.  El "funcionamiento" del flash son los contactos <b>MISO</b> , <b>MOSI</b> , <b>CLK</b> , <b>CS</b> , <b>VCC</b> y <b>GND</b> .  Si la programaci√≥n se lleva a cabo sin quitar el microcircuito de la placa, lo mejor es soldar y elevar ligeramente el contacto VCC sobre el plano de la placa durante un tiempo.  Despu√©s de terminar el trabajo, presione el pie contra la placa y suelde. <br>  Como no ten√≠a ganas de buscar un puerto LPT, decid√≠ tomar la √∫ltima opci√≥n e) y comprar una pieza de hierro adicional en mi parque.  Esta cosa se llama <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">CH341A</a></b> y, curiosamente, es un programador basado en el chip CH341, detr√°s de la autor√≠a de la megacorporaci√≥n china "ampliamente conocida" <i>Jiangsu QinHeng Ltd.</i>  :) </p><br><div class="spoiler">  <b class="spoiler_title">Diagrama de circuito del programador</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f08/a0a/cfc/f08a0acfc6a62d2da36c2cb6ef343f75.png" alt="imagen"></div></div><br><p>  Cuando ordene <u>solo un</u> programador, le recomiendo que compre adicionalmente un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">adaptador</a> de cajas SOP8 / SOIC8 a cajas DIP y un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">clip</a> para trabajar con microcircuitos. </p><br><div class="spoiler">  <b class="spoiler_title">Adaptador y clip</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ue/_x/to/ue_xtorv84tzvamgbymbnqro7xs.jpeg"><br><img src="https://habrastorage.org/webt/oz/il/un/ozilun0uq6m46zsevdh1lrqkchs.jpeg"></div></div><br><p>  No puede perseguir peque√±os ahorros, pero compre un kit listo de inmediato, que consta de un programador y todos los adaptadores necesarios, luego, adem√°s de los dos adaptadores mencionados anteriormente, tambi√©n obtendr√° un adaptador para programar chips de 1.8 V. </p><br><div class="spoiler">  <b class="spoiler_title">Parece un kit listo para usar</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/yh/jk/tm/yhjktmqetzttqjomgedd3ntzi84.jpeg"></div></div><br><p>  Seg√∫n mi propia experiencia, dir√© que el clip de pinza para la ropa funciona cada dos veces y lo m√°s probable es que el chip tenga que soldarse y colocarse en el adaptador SOP8-DIP o incluso soldarse a las almohadillas en el programador. </p><br><p>  <u>Adem√°s</u> : finalmente lleg√≥ mi adaptador, o como se llama correctamente el <b>adaptador ZIF SOP8-DIP8 150 mil</b> .  Este adaptador es adecuado para microcircuitos con un ancho de carcasa de 150mil, un paso de clavijas de 1.27 mm.  Adem√°s de 150 mil, puede haber 200 mil, por lo que es importante prestar atenci√≥n a esto cuando ordene en subastas (tengo microchips y lo mismo, por lo tanto, hay dos adaptadores). </p><br><div class="spoiler">  <b class="spoiler_title">C√≥mo distinguir visualmente entre el adaptador ZIF 150 y 200 mil</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/i0/3r/e7/i03re7tib25lkpzkodmp_qantwg.jpeg"></div></div><br><p>  La pieza es incre√≠blemente conveniente, el microcircuito se sujeta f√°cilmente, de forma natural y muy clara (el sistema se parece a los alicates).  Para hacer esto, simplemente haga clic en la parte superior el√°stica de la caja, coloque el chip en las √°reas expuestas y libere esta parte de la caja.  Los contactos superiores con resorte se extienden cuando se sueltan y el microcircuito se sujeta autom√°ticamente (foto para mayor claridad, porque el microcircuito de 200 mil se encuentra en el adaptador de 150 mil, as√≠ que no lo pate√©, lo pegu√© a la mano).  Luego lo instalamos en el programador, mirando donde tenemos el pie 1 (un c√≠rculo en el chip).  Resulta as√≠: </p><br><img src="https://habrastorage.org/webt/nx/3g/ft/nx3gftuwoq2chvdsrzsv_fbeyrw.jpeg"><br><div class="spoiler">  <b class="spoiler_title">M√°s bellas im√°genes de SOIC8 SOP8 en el adaptador DIP8</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/tc/ex/za/tcexzaa6jeafqpqnot33s8uhz58.jpeg"><br><img src="https://habrastorage.org/webt/pk/cu/fx/pkcufxejj7qt1yile91pfcj1-fa.jpeg"><br><img src="https://habrastorage.org/webt/ti/m7/0r/tim70ro7wotbs7fqn4qxttbkeew.jpeg"><br><img src="https://habrastorage.org/webt/lv/rp/rj/lvrprjzm16nwaqssjls2hhz2use.jpeg"></div></div><br><p>  Dispar√© un chip de memoria nativo usando una estaci√≥n de soldadura de aire caliente, y para aquellos que no tienen dicho equipo, recomiendo encarecidamente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">usar el m√©todo de aleaci√≥n Rose</a> .  Despu√©s del trabajo, aseg√∫rese de quitar los restos de la aleaci√≥n Rose con una trenza del tablero y los microcircuitos, lejos del pecado. <br>  Conectamos el microcircuito eliminado al programador (para qui√©n c√≥mo y c√≥mo resulta).  Era demasiado flojo para soldar, honestamente intent√© pellizcar el clip, como resultado, las patas estaban muy planas por el resorte del clip.  Pero no ten√≠a la intenci√≥n de volver a soldar el flash de 4 MB, pero un buen contacto deber√≠a garantizar una lectura fluida.  Y as√≠ sucedi√≥.  Nota bene para aquellos que sueldan el microcircuito: mire cuidadosamente los n√∫meros en las tarjetas adaptadoras y suelde de acuerdo con ellas.  En el caso de un clip, el cable rojo en el bucle de la llave est√° en la pata n√∫mero 1. </p><br><img src="https://habrastorage.org/webt/l4/cr/g9/l4crg92dn4etg-xkngb70iewduy.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Capturado y exitosamente de ...</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/78/jt/hu/78jthurktjxlqllhydakdoxr5yw.jpeg"><br><img src="https://habrastorage.org/webt/ff/9l/os/ff9losgpei2qnttiqayqdwx8y-y.jpeg"><br><img src="https://habrastorage.org/webt/rv/wy/cc/rvwyccyq1zt2jzdccw9wihwl4je.jpeg"><br><img src="https://habrastorage.org/webt/gc/nj/wm/gcnjwmaue1x9hw3wb1nv_jdcofs.jpeg"></div></div><br><p> Habiendo lidiado con el hierro, tienes que lidiar con el software.  Como ya escrib√≠, en un centro este programador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aparece</a> peri√≥dicamente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en art√≠culos</a> .  Est√° claro que funciona sin problemas con todos los sistemas operativos modernos (por ejemplo, en Windows 10, los controladores se extraen autom√°ticamente de la red, y en Linux han estado en el n√∫cleo durante varios a√±os).  Pero, pero nunca se sabe lo que sucede, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">aqu√≠</a> puede encontrar controladores (para el modo Serie / Paralelo) como archivos separados por si acaso.  Para la programaci√≥n en Windows, la autor√≠a de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">software chino</a> de un determinado SkyGz se usa con mayor frecuencia.  Para Linux, hay proyectos abiertos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ch341prog</a> (SPI) y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ch341eepromtool</a> (I2C), puede usar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">flashrom</a> "folk".  Como uso Windows, y las revisiones sobre el "programa de China" para la mayor√≠a de los usuarios no son muy positivas (especialmente sobre las nuevas versiones 1.28 ... 1.30), de modo que el destino no se vea tentado, el chip se ley√≥ usando un programador <i>ruso</i> simple y confiable, <b>AsProgrammer.</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">versi√≥n 1.4.0</a> .  Por cierto, si algo repentinamente no le gust√≥ / no est√° claro, o por ejemplo, necesita agregar un nuevo microcircuito, puede escribir f√°cilmente en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">tema de "soporte t√©cnico"</a> y obtener comentarios r√°pidos. </p><br><div class="spoiler">  <b class="spoiler_title">Por qu√© NO vale la pena comprar memoria flash de m√°s de 16 MB</b> <div class="spoiler_text"><p>  Me permitir√© una ligera digresi√≥n y explicar√© mi renuencia a instalar una unidad flash de 32 MB (la diferencia de precio de 16 MB no es cr√≠tica).  El hecho es que ni en los programas chinos (versiones 1.29 o 1.30), ni en el mencionado soporte AsProgrammer para microchips ala W25Q256FV, MX25L25635F, N25Q256A, MX25L25645GM2I-10G.  Quiz√°s la raz√≥n de esto es que para un flash SPI, la cantidad m√°xima es de 128 MBit (el m√°ximo que se puede abordar con el modo de direccionamiento de 3 bytes adoptado por JEDEC).  Y aqu√≠ no hay tantas opciones.  Por ejemplo, puede escribir con el flash modificado desde la primera mitad del chip w25q256 (16 MB de tama√±o), como el chip w25q128 familiar para este programa de 16 MB y poner el cargador de arranque correcto (Breed, por ejemplo) y las secciones de f√°brica con informaci√≥n de "servicio" en este volumen (mac Direcci√≥n del enrutador, calibraci√≥n de wi-fi, etc.).  Y despu√©s de haber arrancado en modo de gestor de arranque (en caso de que √©l reconozca con √©xito el volumen completo del microcircuito), ser√≠a posible actualizar un firmware precompilado.  En general, puede comprar unidades flash para el futuro y esperar hasta que aparezca la compatibilidad con dichos vol√∫menes en versiones rotas de software chino para ch341a o cuando termine flashrom.  Para resumir, es mejor tomar 16 MB :) porque "cansado de alcanzar las estrellas, recoge lo que est√° debajo de tus pies". </p></div></div><br><p>  Trabajar con AsProgrammer es extremadamente simple, primero seleccione su microchip en el men√∫ "Chip" y luego haga clic en el bot√≥n "Leer".  Un par de minutos y un tugurio en nuestro bolsillo :) </p><br><div class="spoiler">  <b class="spoiler_title">Leer volcado del chip de f√°brica de 4 MB</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/fx/dr/wq/fxdrwq3lxdmgv1ckg3t_77njosu.jpeg"></div></div><br><p>  El flash completo de f√°brica consta de un gestor de arranque, un par de secciones para almacenar diferentes configuraciones y el firmware en s√≠. </p><br><div class="spoiler">  <b class="spoiler_title">Estructura de firmware de f√°brica de 4 MB</b> <div class="spoiler_text"><p>  0x00000000-0x00030000: "gestor de arranque" <br>  0x00030000-0x00040000: "Config" <br>  0x00040000-0x00050000: "F√°brica" <br>  0x00050000-0x0011282a: "Kernel" </p></div></div><br><p>  El archivo de volcado guardado debe abrirse en cualquier editor HEX (estoy acostumbrado a usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">WinHex</a> ) y en la direcci√≥n <b>105720</b> (la direcci√≥n en decimal, en hexadecimal ser√° 00019CF8) cambiamos <b>40 00</b> a <b>00 01</b> por un flash de 16 MB (bueno, o <b>80 00</b> si de repente decides ahorrar un centavo y comprar un chip de 8 MB).  Guardamos el firmware modificado para uso futuro.  Por cierto, la direcci√≥n 105720 no es un punto de alg√∫n tipo de archivo adjunto y es posible que se encuentren otros n√∫meros all√≠, especialmente si ya ha intentado desbloquear el gestor de arranque para el firmware openwrt, etc. Por lo tanto, si de repente no sucede nada, y el querido "40 00 "en la direcci√≥n 105720 no est√° visible, buscamos en el men√∫ del editor hexadecimal una b√∫squeda por valores HEX y dirigimos la combinaci√≥n de bytes clave" <b>00 00 16 40</b> "all√≠.  Conducir√° a los n√∫meros / direcci√≥n deseados. </p><br><div class="spoiler">  <b class="spoiler_title">Encontrar la codiciada combinaci√≥n 00 00 16 40</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/_c/js/3s/_cjs3slpz9l3l-pdbdo-m5uswnk.jpeg"></div></div><br><p>  ¬øPor qu√© se necesitaba esto?  Y luego, para que el gestor de arranque modificado le permita actualizar el enrutador a trav√©s de UART a trav√©s de TFTP, utilizando un firmware m√°s grande. <br>  Luego, llene el firmware guardado en una unidad flash m√°s grande precomprada comenzando en la direcci√≥n 0 (desde el principio).  En caso de una programaci√≥n exitosa, suelde el chip de memoria en su lugar y contin√∫e con el siguiente paso.  Por cierto, al programar un microcircuito comprado, sent√≠ pena por pellizcarlo con un clip y tuve que soldarlo al bloque :) </p><br><div class="spoiler">  <b class="spoiler_title">Descarga de firmware</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/cd/ju/nz/cdjunzkbafv25r_ejw8u8eigpkk.jpeg"></div></div><br><h2>  <b>Tercera parte, openwrt-shnaya</b> </h2><br><p>  El siguiente paso es crear su propia versi√≥n de openwrt.  Si no necesito ciertos paquetes espec√≠ficos que no se pueden encontrar en el firmware oficial actual (y "de los entusiastas"), puede descargar la primera versi√≥n disponible del firmware para su modelo de enrutador y cargarlo a trav√©s de microcircuitos de memoria grande modificados YA gestor de arranque o de la manera antigua para usar el programador anterior.  Pero necesito incorporar algunos paquetes poco caracter√≠sticos en el firmware de mi enrutador, as√≠ que tuve que ir por un camino m√°s complicado y construir openwrt para m√≠.  Este procedimiento est√° bastante bien descrito para muchos modelos de enrutadores (por ejemplo, para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tp-Link TL-WR741ND</a> en Habr√©, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Tp-Link TL-MR3020</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">D-Link DIR320A1</a> , miles de ellos ...), por lo tanto me limitar√© a una breve lista de los pasos principales (se pueden obtener m√°s detalles) mira <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">aqu√≠</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">aqu√≠</a> ). </p><br><p>  Si no hay una m√°quina * nix en casa, entonces lo primero que instalamos en VirtualBox es Ubuntu x64 (o algo as√≠). </p><br><p>  Actualizaci√≥n de informaci√≥n sobre paquetes instalados <br>  <i>sudo apt-get update</i> <br>  Instala lo necesario.  Para Ubuntu 16.04 LTS, se ve as√≠: <br>  <i>sudo apt-get install build-essential subversion mercurial libncurses5-dev zlib1g-dev gawk gcc-multilib flex git-core gettext libssl-dev descomprimir</i> </p><br><p>  Copie el c√≥digo fuente del firmware seleccionado a su computadora usando el comando <i>git clone</i> .  Debajo del spoiler: enlaces a las fuentes de diferentes versiones de openwrt. </p><br><div class="spoiler">  <b class="spoiler_title">Repositorios Git de proyectos OpenWrt y LEDE</b> <div class="spoiler_text"><p>  18/06/1 <br>  git clone git: //github.com/openwrt/openwrt.git -b v18.06.1 <br>  18/06/0 <br>  git clone git: //github.com/openwrt/openwrt.git -b v18.06.0 <br>  1 / 17.5 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.5 <br>  17/01/4 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.4 <br>  17/01/3 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.3 <br>  17/01/2 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.2 <br>  17/01/1 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.1 <br>  17/01 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.0 <br>  15/05/1 <br>  git clone git: //github.com/openwrt/archive.git -b v15.05.1 <br>  15.05 <br>  git clone git: //github.com/openwrt/archive.git -b v15.05 <br>  14/07 <br>  git clone git: //github.com/openwrt/archive.git -b v14.07 <br>  12.09 <br>  git clone git: //github.com/openwrt/archive.git -b v12.09 </p></div></div><br><p>  El bien descargado se implementar√° en el directorio openwrt.  Entramos con el <i>comando cd</i> , intercambiamos y actualizamos componentes adicionales con el comando <br>  <i>./scripts/feeds update -a &amp;&amp; ./scripts/feeds install ‚Äìa</i> <br>  Ahora es el momento de arreglar los "archivos importantes" para que el compilador pueda ensamblar correctamente el firmware para nuestra unidad flash ampliada, y no detenerse si de repente excede los 4 MB <s>prescritos</s> .  Para hacer esto, haga lo siguiente.  En el directorio descargado con fuentes openwrt en el archivo target / linux / ramips / dts / A5-V11.dts, reemplazamos con los valores indicados en la imagen a continuaci√≥n (utilic√© el nano editor, tambi√©n es posible a trav√©s de F4 en mc). </p><br><img src="https://habrastorage.org/webt/qp/c0/hj/qpc0hjzebofk0k71mxd1ojj-jae.jpeg" alt="Edici√≥n del archivo * .dts para aumentar la memoria (para el 15/05/1)"><br><p>  Guarde el archivo, ejec√∫telo en la consola <br>  <i>hacer defconfig</i> <br>  y aplique la configuraci√≥n est√°ndar para el perfil, luego <i>configure menuconfig</i> .  Aqu√≠ el punto clave principal es elegir el perfil correcto: </p><br><blockquote>  Sistema de destino: Ralink RT288x / RT3xxx <br>  Subtarget: placas basadas en RT3x5x / RT5350 <br>  Perfil de destino: A5-V11 </blockquote><p>  y luego, por analog√≠a con el ensamblado openwrt para otros enrutadores (proporcion√© los enlaces anteriores), modificamos el conjunto de paquetes de la manera que necesitamos y guardamos la configuraci√≥n (en el archivo <i>.config</i> ).  Por cierto, si planea cambiar las configuraciones con frecuencia, puede hacer una copia de seguridad del <i>comando scripts / diffconfig.sh&gt; mydiffconfig</i> cada vez, por lo que guardaremos nuestros cambios de configuraci√≥n en el archivo mydiffconfig cada vez.  Despu√©s de realizar la configuraci√≥n necesaria (y seleccionar todos los paquetes necesarios), comenzamos la compilaci√≥n con el comando <i>make</i> . <br>  Debido a la autocompilaci√≥n del n√∫cleo, es posible que muchos paquetes de repositorios oficiales no sean adecuados para la instalaci√≥n.  Esto debe tenerse en cuenta y, con mayor frecuencia, establecer el indicador "M" delante del paquete deseado.  Luego, estos paquetes se pueden encontrar en la carpeta openwrt / bin / ramips / packages y se cargan en alg√∫n servidor HTTP para crear su propio repositorio personal de <s>blackjack y ...</s> para OpenWRT :). <br>  Por cierto, record√© que es muy conveniente ejecutar el comando <i>make</i> de la siguiente forma: <br>  <i>hacer V = 99 2&gt; &amp; 1 |</i>  <i>tee build.log |</i>  <i>grep -i error</i> <br>  En este caso, el compilador guarda una copia detallada completa de la informaci√≥n de depuraci√≥n sobre el ensamblado en el archivo build.log en el directorio openwrt y muestra solo errores en la pantalla.  Luego, este registro se adjunta convenientemente a los foros para encontrar la causa del error o hacer una pregunta.  Adem√°s, es ideal para identificar paquetes en los que el compilador deja de funcionar.  Puede encontrar el texto mencionado en el registro buscando en el directorio con el comando <br>  <i>grep ‚ÄìHr "TEXTO" &lt;ruta al directorio de b√∫squeda&gt; |</i>  <i>corte ‚Äìd: -f1 |</i>  <i>ordenar -u</i> <br>  Pero sinceramente espero que la compilaci√≥n sea exitosa y no haya necesidad de buscar errores.  Despu√©s de completar el proceso, puede encontrar los archivos de firmware en la carpeta <i>bin</i> del directorio openwrt, algo as√≠ como <b>openwrt-ramips-rt305x-a5-v11-squashfs-sysupgrade.bin</b> .  Tomamos este archivo y vamos a la etapa final. </p><br><h2>  <b>Cuarta parte, consola</b> </h2><br><p>  Despu√©s de que el firmware se recopila en las entra√±as de la m√°quina virtual, todo lo que queda es soltarlo en el enrutador.  Me gusta la opci√≥n con UART (no es por nada que solde la almohadilla a las monedas de 5 centavos de contacto).  Para conectarse, necesita un adaptador USB a TTL UART, o al menos un cable de datos de un viejo Siemens.  Afortunadamente, ten√≠a un adaptador de este tipo en el chip FT232 (CP2102 y el ubicuo CH340 tambi√©n son adecuados).  El pinout pinout se muestra en la foto. </p><br><img src="https://habrastorage.org/webt/pf/he/uh/pfheuh5510zu26jo5vu5mdfhi4k.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Pinouts primarios y de respaldo para la consola UART</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gz/6i/ib/gz6iibr3eakny3pr1sacg2kcxl0.jpeg"></div></div><br><p>  Conectamos los contactos al adaptador de la siguiente manera: </p><br><blockquote>  Enrutador GND ‚Üí Adaptador GND <br>  Enrutador RX ‚Üí Resistencia 470 Ohm-1 kOhm ‚Üí Adaptador TX <br>  Enrutador TX ‚Üí Adaptador RX </blockquote><p>  Explicar√© por qu√© se necesita una resistencia.  Cuando encend√≠ el enrutador conectado al adaptador, se colg√≥ y comenz√≥ a calentarse. </p><br><div class="spoiler">  <b class="spoiler_title">Entonces todo est√° conectado ...</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ix/fc/ft/ixfcfttwh9-gsniex1hagvq4zys.jpeg"></div></div><br><p>  Al mismo tiempo, algo como </p><br><blockquote>  œür‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí1‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñíA‚ñí‚ñí (0‚ñí‚ñí‚ñí‚ñí‚ñí <br>  ? ‚ñí‚ñí‚ñí {‚ñíF‚ñí‚ñí‚ñí‚ñí‚ñí ^ ‚ñí‚ñíB‚ñí‚ñí‚ñíK”âSP @ ‚ñí (Y &lt;0‚ñí0‚ñí $ ‚ñí @ ‚ñí‚ñí‚ñí ‚ñí‚ñí‚ñí ÊÄò ‚ñí‚ñíff‚ñí‚ñí‚ñí‚ñí‚ñí`‚ñí‚ñí ‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñíx‚ñí‚ñíx‚ñí‚ñí‚ñí‚ñí‚ñíx ~ `‚ñí‚ñí ÊÄò ‚ñí‚ñí‚ñí‚ñí‚ñíx‚ñí‚ñíf‚ñí‚ñí‚ñí‚ñí‚ñíf‚ñí‚ñí`ff‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí ‚ñí‚ñífx‚ñí‚ñí‚ñíf ~ f‚ñíf‚ñí‚ñí`fxf‚ñí‚ñí‚ñí‚ñí`fx‚ñí‚ñí ~ ‚ñíx‚ñíf‚ñí‚ñíf ~ f‚ñí`‚ñíf‚ñífx‚ñí ~ ‚ñíf‚ñíxf‚ñí ~ ‚ñí‚ñífx ‚ñí‚ñíx‚ñí‚ñí‚ñíxx‚ñí‚ñí‚ñí‚ñíxx‚ñí‚ñí‚ñí‚ñíx‚ñí‚ñí‚ñíxf‚ñí‚ñí`x‚ñí‚ñí‚ñí‚ñí‚ñí‚ñífxf‚ñíx‚ñí‚ñí`‚ñí‚ñí‚ñíf‚ñí‚ñíf‚ñí‚ñíf‚ñífxx‚ñí x‚ñí Êûò ‚ñíx‚ñíf‚ñí‚ñí </blockquote><p>  La resistencia (puede conectar cualquiera, en el rango de 470 ohmios a 1 kOhm) solucion√≥ todo.  Y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">aqu√≠</a> , por ejemplo, el autor generalmente recomienda usar el chip aislador de se√±al digital <b>AduM1201</b> para conectarse al UART para el desacoplamiento.  Pero la resistencia fue suficiente para m√≠, lo que tambi√©n deseo para ti. </p><br><div class="spoiler">  <b class="spoiler_title">UART y AduM1201</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d5a/baf/390/d5abaf39038d0ddff09cd9d1323a7130.png" alt="imagen"></div></div><br><p>  Recibimos la se√±al del enrutador utilizando el programa de terminal en la PC.  De alguna manera no tuve √©xito con el favorito de Putty, y uso el excelente programa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Terminal</a> .  Seleccione el puerto COM virtual deseado (en el que se encuentra nuestro USB-UART), establezca los par√°metros: </p><br><blockquote>  Velocidad: 57600 <br>  Bits de datos: 8 <br>  Paridad: ninguna <br>  Bits de parada: 1 </blockquote><p>  Y haz clic en Conectar.  Ahora, cuando se suministra energ√≠a al enrutador, veremos los registros del cargador en la consola: </p><br><div class="spoiler">  <b class="spoiler_title">El cargador de arranque registra A5-V11 como est√°</b> <div class="spoiler_text"><p>  U-Boot 1.1.3 (11 de abril de 2013 - 00:10:51) <br>  Tarjeta: Ralink APSoC DRAM: 32 MB <br>  puntero de relocate_code en: 81fb4000 <br>  spi_wait_nsec: 42 <br>  ID del dispositivo spi: ef 40 18 0 0 (40180000) <br>  Advertencia: ID de chip no reconocido, ¬°actualice el gestor de arranque! <br>  raspi_read: desde: 30000 len: 1000 <br>  . *** Advertencia: CRC incorrecto, con entorno predeterminado <br>  ============================================== <br>  Versi√≥n Ralink UBoot: 3.6.0.0 </p><br><hr><br><p>  ASIC 5350_MP (Puerto 5 &lt;-&gt; Ninguno) <br>  DRAM_CONF_FROM: Arranque de fleje <br>  DRAM_TYPE: SDRAM <br>  DRAM_SIZE: 256 Mbits <br>  DRAM_WIDTH: 16 bits <br>  DRAM_TOTAL_WIDTH: 16 bits <br>  TOTAL_MEMORY_SIZE: 32 MBytes <br>  Componente Flash: SPI Flash <br>  Fecha: 11 de abril de 2013 Hora: 00: 10: 51 <br>  ============================================== <br>  icache: conjuntos: 256, formas: 4, l√≠neasz: 32, total: 32768 <br>  dcache: sets: 128, maneras: 4, linesz: 32, total: 16384 </p><br><h5 id="the-cpu-freq--360-mhz">  La frecuencia de la CPU = 360 MHZ </h5><br><p>  tama√±o de memoria estimado = 32 Mbytes <br>  Por favor, elija la operaci√≥n: <br>  1: Cargue el c√≥digo del sistema en SDRAM a trav√©s de TFTP. <br>  2: Cargue el c√≥digo del sistema y luego escriba en Flash a trav√©s de TFTP. <br>  3: Arranque del c√≥digo del sistema a trav√©s de Flash (predeterminado). <br>  4: interfaz de l√≠nea de comando de inicio Entr. <br>  7: Cargue el c√≥digo del cargador de arranque y luego escriba en Flash a trav√©s de serie. <br>  9: Cargue el c√≥digo del cargador de arranque y luego escriba en Flash a trav√©s de TFTP. <br>  4 3 2 1 <br>  Elegiste 3 <br>  0 0 <br>  3: C√≥digo del sistema de arranque del sistema a trav√©s de Flash. </p><br><h2 id="booting-image-at-bc050000-">  Imagen de arranque en bc050000 ... </h2><br><p>  raspi_read: desde: 50,000 len: 40 <br>  .  Nombre de imagen: MIPS OpenWrt Linux-3.7.5 <br>  Creado: 2013-04-11 14:41:22 UTC <br>  Tipo de imagen: MIPS Linux Kernel Image (lzma comprimido) <br>  Tama√±o de datos: 915849 Bytes = 894.4 kB <br>  Direcci√≥n de carga: 80000000 <br>  Punto de entrada: 80,000,000 <br>  raspi_read: desde: 50040 len: df989 <br>  ... Verificando suma de comprobaci√≥n ... OK <br>  Descomprimiendo la imagen del kernel ... OK <br>  Sin initrd </p><br><h2 id="transferring-control-to-linux-at-address-80000000-">  Transferencia de control a Linux (en la direcci√≥n 80000000) ... </h2><br><h2 id="giving-linux-memsize-in-mb-32">  Dando Linux memsize en MB, 32 </h2><br><p>  Iniciando kernel ... <br>  [0.000000] Linux versi√≥n 3.7.5 (lich @ lich-pc) (gcc versi√≥n 4.6.4 20121210 (prelanzamiento) (Linaro GCC 4.6-2012.12)) # 2 jue 11 de abril 22:41:02 CST 2013 <br>  [0.000000] bootconsole [early0] habilitado <br>  [0.000000] La revisi√≥n de la CPU es: 0001964c (MIPS 24KEc) <br>  [0.000000] Identificaci√≥n de Ralink RT5350: 1 rev: 3 funcionando a 360.00 MHz <br>  [0.000000] Mapa RAM f√≠sico determinado: <br>  [0.000000] memoria: 02000000 @ 00000000 (utilizable) <br>  [0.000000] Mapa de RAM f√≠sica definida por el usuario: <br>  [0.000000] memoria: 02000000 @ 00000000 (utilizable) <br>  [0.000000] Initrd no encontrado o vac√≠o - deshabilitando initrd <br>  [0.000000] Rangos de zona: <br>  [0.000000] Normal [mem 0x00000000-0x01ffffff] <br>  [0.000000] Inicio de zona m√≥vil para cada nodo <br>  [0.000000] Rangos de nodos de memoria temprana <br>  [0.000000] nodo 0: [mem 0x00000000-0x01ffffff] <br>  [0.000000] Cach√© de instrucciones primarias 32kB, VIPT, 4 v√≠as, tama√±o de l√≠nea 32 bytes. <br>  [0.000000] Cach√© de datos primarios 16kB, 4 v√≠as, VIPT, sin alias, tama√±o de l√≠nea 32 bytes <br>  [0.000000] Construy√≥ 1 listas de zonas en orden de Zona, agrupando la movilidad.  P√°ginas totales: 8128 <br>  [0.000000] L√≠nea de comando del n√∫cleo: placa = consola MPR-A1 = ttyS1,57600 mtdparts = spi0.0: 192k (u-boot) ro, 64k (u-boot-env) ro, 64k (factory) ro, 896k (kernel ), 2880k (rootfs), 3776k @ 0x50000 (firmware) rootfstype = squashfs, jffs2 mem = 32M <br>  [0.000000] Entradas de tabla hash PID: 128 (orden: -3, 512 bytes) <br>  [0.000000] Entradas de la tabla hash de cach√© de dentry: 4096 (orden: 2, 16384 bytes) <br>  [0.000000] Entradas de la tabla hash de Inode-cache: 2048 (orden: 1, 8192 bytes) <br>  [0.000000] __ex_table ya ordenada, omitiendo la ordenaci√≥n <br>  [0.000000] Escribiendo el registro ErrCtl = 00023ff6 <br>  [0.000000] Readback ErrCtl register = 00023ff6 <br>  [0.000000] Memoria: 29632k / 32768k disponible (1969k c√≥digo del n√∫cleo, 3136k reservado, 473k datos, 180k init, 0k highmem) <br>  [0.000000] SLUB: Genslabs = 9, HWalign = 32, Order = 0-3, MinObjects = 0, CPUs = 1, Nodes = 1 <br>  [0.000000] NR_IRQS: 48 <br>  [0.000000] consola [ttyS1] habilitada, consola de arranque deshabilitada <br>  [0.000000] consola [ttyS1] habilitada, consola de arranque deshabilitada <br>  [0.010000] Calibraci√≥n del bucle de retardo ... 239.61 BogoMIPS (lpj = 1198080) <br>  [0.080000] pid_max: predeterminado: 32768 m√≠nimo: 301 <br>  [0.080000] Entradas de la tabla hash Mount-cache: 512 <br>  [0.090000] NET: protocolo registrado familia 16 <br>  [0.100000] MIPS: la m√°quina es HAME MPR-A1 <br>  [0.130000] bio: crear losa &lt;bio-0&gt; en 0 <br>  [0.140000] Cambiando a clocksource MIPS <br>  [0.150000] NET: protocolo registrado familia 2 <br>  [0.160000] TCP estableci√≥ entradas de tabla hash: 1024 (orden: 1, 8192 bytes) <br>  [0.180000] Entradas de tabla hash de enlace TCP: 1024 (orden: 0, 4096 bytes) <br>  [0.190000] TCP: Tablas hash configuradas (establecido 1024 enlace 1024) <br>  [0.200000] TCP: reno registrado <br>  [0.210000] Entradas de tabla hash UDP: 256 (orden: 0, 4096 bytes) <br>  [0.220000] Entradas de tabla hash UDP-Lite: 256 (orden: 0, 4096 bytes) <br>  [0.230000] NET: protocolo registrado familia 1 <br>  [0.280000] squashfs: versi√≥n 4.0 (31/01/2009) Phillip Lougher <br>  [0.290000] jffs2: versi√≥n 2.2 (NAND) (RESUMEN) (LZMA) (RTIME) (CMODE_PRIORITY) ¬© 2001-2006 Red Hat, Inc. <br>  [0.320000] msgmni se ha establecido en 57 <br>  [0.320000] io planificador noop registrado <br>  [0.330000] Fecha l√≠mite del planificador io registrada (predeterminado) <br>  [0.340000] Serie: controlador 8250/16550, 2 puertos, uso compartido de IRQ deshabilitado <br>  [0.360000] serial8250: ttyS0 en MMIO 0x10000500 (irq = 13) es un 16550A <br>  [0.370000] serial8250: ttyS1 en MMIO 0x10000c00 (irq = 20) es un 16550A <br>  [0.390000] ramips-spi ramips-spi.0: el maestro no est√° en cola, esto est√° en desuso <br>  [0.410000] m25p80 spi0.0: encontrado w25q128, esperado pm25lq032 <br>  [0.420000] m25p80 spi0.0: w25q128 (16384 Kbytes) <br>  [0.430000] 6 cmdlineparticiones encontradas en el dispositivo MTD spi0.0 <br>  [0.440000] Creando 6 particiones MTD en "spi0.0": <br>  [0.450000] 0x000000000000-0x000000030000: "u-boot" <br>  [0.460000] 0x000000030000-0x000000040000: "u-boot-env" <br>  [0.480000] 0x000000040000-0x000000050000: "f√°brica" <br>  [0.490000] 0x000000050000-0x000000130000: "n√∫cleo" <br>  [0.500000] 0x000000130000-0x000000400000: "rootfs" <br>  [0.520000] mtd: partici√≥n "rootfs" configurada como sistema de archivos ra√≠z <br>  [0.530000] mtd: partici√≥n "rootfs_data" creada autom√°ticamente, ofs = 380000, len = 80000 <br>  [0.550000] 0x000000380000-0x000000400000: "rootfs_data" <br>  [0.560000] 0x000000050000-0x000000400000: "firmware" <br>  [0.580000] ramips-wdt ramips-wdt: el valor del tiempo de espera debe ser 0 &lt;tiempo de espera &lt;= 35, utilizando 35 <br>  [0.600000] TCP: c√∫bico registrado <br>  [0.610000] NET: familia de protocolos registrada 17 <br>  [0.620000] 8021q: Soporte de VLAN 802.1Q v1.8 <br>  [0.650000] VFS: ra√≠z montada (sistema de archivos squashfs) de solo lectura en el dispositivo 31: 4. <br>  [0.660000] Liberando memoria del n√∫cleo no utilizada: 180k liberados <br>  [5.100000] input: gpio-keys-polled como / devices / platform / gpio-keys-polled / input / input0 <br>  [5.210000] Bot√≥n Hotplug driver versi√≥n 0.4.1 </p><br><ul><li>  preinit - Presione la tecla [f] y presione [enter] para ingresar al modo a prueba de fallas </li></ul></div></div><br><p>  Al leer y mirar a trav√©s de los registros, es importante no perder el momento y cu√°ndo habr√° una l√≠nea de este tipo: </p><br><blockquote>  Por favor, elija la operaci√≥n: <br>  1: Cargue el c√≥digo del sistema en SDRAM a trav√©s de TFTP. <br>  <b>2: Cargue el c√≥digo del sistema y luego escriba en Flash a trav√©s de TFTP.</b> <br>  3: Arranque del c√≥digo del sistema a trav√©s de Flash (predeterminado). <br>  4: interfaz de l√≠nea de comando de inicio Entr. <br>  7: Cargue el c√≥digo del cargador de arranque y luego escriba en Flash a trav√©s de serie. <br>  9: Cargue el c√≥digo del cargador de arranque y luego escriba en Flash a trav√©s de TFTP. </blockquote><p>  Necesita tener tiempo r√°pidamente para presionar el n√∫mero "2".  Luego veremos lo siguiente: </p><br><blockquote>  Elegiste 2 <br>  2: System Load Linux Kernel luego escribe en Flash a trav√©s de TFTP. <br>  Advertencia !!!  Borre Linux en Flash y luego queme uno nuevo.  ¬øEst√°s seguro? (S / N) <br>  Ingrese los nuevos / o Ctrl-C para descartar <br>  IP del dispositivo de entrada (10.10.10.123) ==: 10.10.10.123 <br>  IP del servidor de entrada (10.10.10.3) ==: 10.10.10.3 <br>  Ingrese el nombre de archivo del kernel de Linux () ==: openwrt-ramips-rt305x-a5-v11-squashfs-sysupgrade.bin </blockquote><p>  Presione "Y" secuencialmente, ingrese, ingrese, "openwrt-ramips-rt305x-a5-v11-squashfs-sysupgrade.bin".  En este √∫ltimo caso, ser√° necesario registrar manualmente el nombre de nuestro firmware, que deber√° cargarse en el servidor tftp lanzado anteriormente.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Us√© el</a> programa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">TFTPD64</a> para este prop√≥sito.  Despu√©s de activar la descarga del firmware de la consola, debe conectar nuestro A5-V11 a una computadora cuya direcci√≥n IP coincida con la especificada en la consola.  Por cierto, para conectarme directamente (ala "unidad flash usb"), hice los adaptadores RJ45-RJ45.  Son muy convenientes para usar con un enrutador. </p><br><img src="https://habrastorage.org/webt/f0/w_/po/f0w_pobzhotseudg1x6xlvni1cm.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Adaptadores RJ45-RJ45 y su circuito</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/0k/t6/uo/0kt6uox6egepzraoly-dheq5tgk.jpeg"></div></div><br><p>  El enrutador se coser√° y despu√©s del reinicio estar√° listo para realizar nuevas misiones de combate.  Por cierto, si no fue posible flashear con la consola, volvemos a la parte del "programa" del art√≠culo y <i>flasheamos el firmware openwrt-ramips-rt305x-a5-v11-squashfs-sysupgrade.bin a</i> trav√©s del antiguo AsProgrammer, pero no desde la direcci√≥n 0, sino desde <b>327680</b> ( !). </p><br><p>  Adici√≥n: no puede jugar con la b√∫squeda de bytes y modificar el firmware nativo, pero llene el programador con un microchip chino Breed de un amigo Hackpascal en el nuevo chip, para nuestro V5 la √∫ltima opci√≥n encontrada es <a href="" rel="nofollow">breed-rt5350-hame-a5-r1163.bin</a> .  Y ya desde este mejor (en mi humilde opini√≥n) hasta la fecha, el gestor de arranque para flashear todo lo que necesita.  Todav√≠a hay todo tipo de cosas dignas de un art√≠culo separado, PERO, pero maldita sea, el firmware no tiene localizaciones, en chino.  Parece que los t√©rminos t√©cnicos son claros ... Pero el "sedimento permaneci√≥".  Los chinos, en principio, no hacen contacto :( </p><br><h2>  <b>Quinta parte, informaci√≥n ("Nota")</b> </h2><br><p>  Al final de la historia, me gustar√≠a decir algunas palabras sobre los dispositivos que hacen que el uso de nuestro A5-V11 sea m√°s c√≥modo. <br>  En primer lugar, este es un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">adaptador en</a> forma de U para un puerto USB.  Un dispositivo indispensable, cuando se comparte un enrutador con una unidad flash USB / lector de tarjetas / m√≥dem 3G-4g / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">sintonizador SDR</a> finalmente :) </p><br><img src="https://habrastorage.org/webt/bg/ap/5l/bgap5lzqe9lrpemvh0idnmjxvfk.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Entonces los adaptadores se ven en vivo</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/vv/f2/m2/vvf2m2qxfwjs8l9bt80r33am0su.jpeg"><br><img src="https://habrastorage.org/webt/ic/kh/ew/ickhewb9t5zk5hitjvwsm2pyha0.jpeg"><br><img src="https://habrastorage.org/webt/fl/s_/dn/fls_dnlec6lr9jvzox7zhvo75nc.jpeg"></div></div><br><p>  El segundo "hito" importante cuando se trabaja con el mini enrutador descrito es un concentrador USB.  S√≠, con un dise√±o muy complicado de puertos USB.  El <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">dise√±o</a> vertical <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">de este centro pasivo</a> est√° presionando para la compra de " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">hongos</a> " Bluetooth en algunos <b>CSR8510</b> .  Desde peque√±o, me gusta el concepto de PC industriales de Octagon ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">MicroPC</a> ) y sus ‚Äú <a href="" rel="nofollow">sandwiches</a> ‚Äù verticales de PC / 104.  Con el centro mencionado, existe la oportunidad de hacer algo similar (por cierto, si uno de los lectores encuentra algo similar interesante en la extensi√≥n de las subastas en l√≠nea, por favor comparta en los comentarios). </p><br><img src="https://habrastorage.org/webt/rs/ae/hb/rsaehbkntj8po2vaekbtbck1s3i.jpeg"><br><p>  Genesys Logic Inc. GL8506 Chip a bordo </p><br><img src="https://habrastorage.org/webt/ur/vv/ih/urvvihyci_7_ijtg72uh2d5ouxi.jpeg"><br><p>  En principio, en lugar de un puerto USB vertical, es bastante posible colocar el peque√±o llavero USB-Bluetooth descrito anteriormente o un <a href="" rel="nofollow">lector de tarjetas microSD en miniatura</a> . </p><br><img src="https://habrastorage.org/webt/ls/z0/zn/lsz0znl2rw0uduejkp2o5gxduw8.jpeg"><br><p>  Y parece un "s√°ndwich de microrouter" ya preparado :) </p><br><img src="https://habrastorage.org/webt/j2/wa/8i/j2wa8icidwqctodv-1w9583ugfk.jpeg"><br><div class="spoiler">  <b class="spoiler_title">M√°s s√°ndwiches de micro habr</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zs/ym/x0/zsymx0wxkbikcbpni875i18rlhq.jpeg"><br><img src="https://habrastorage.org/webt/cf/bo/gw/cfbogwlqtzkcyfvdp_vz1grduvs.jpeg"><br><img src="https://habrastorage.org/webt/kd/vr/fr/kdvrfrwe3g40asb4rnsnsjsuhzc.jpeg"><br><img src="https://habrastorage.org/webt/4w/s1/2m/4ws12mhhgwlzecini07eq2qkmdy.jpeg"><br><img src="https://habrastorage.org/webt/v8/2b/ld/v82blds9z3lvqocypuoxp53yiwa.jpeg"><br><img src="https://habrastorage.org/webt/9e/am/rx/9eamrxfi3uexeuwp_qmwc1mwhyu.jpeg"></div></div><br><p>  Y finalmente, lo m√°s delicioso.  Existe una oficina <b>en</b> Nueva Zelanda <b>CloudStore en el mundo</b> que es conocida por sus productos bajo la marca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Airconsole</a> .  Estos dispositivos son buenos, entre otras cosas, y el hecho de que son los √∫nicos legalmente y por un precio razonable para conectar todo tipo de registradores RS232 a iOS.    ,         ,   RS232.       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . <br>         :) </p><br><blockquote>        COM/USB ,           Moxa*, Perle*  Opengear*? AirConsole            ,       . </blockquote><p>  ,  .    .   " 10 " :) </p><br><div class="spoiler"> <b class="spoiler_title"> Airconsole Mini (69$)  Hame A15 (6.9$)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/_e/pu/8h/_epu8hgth9ljk2cxyasyeacupsg.png"><br><img src="https://img.tttcdn.com/product/xy/2000/2000/p/gu1/C/C1653B/C1653B-2-2ca5.jpg" alt="imagen"></div></div><br><div class="spoiler"> <b class="spoiler_title"> Airconsole Standart (79$)  Hame MPR-A1 (7.9$)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ov/7s/7q/ov7s7qphmxr9hoqlfjcd89ofmka.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/d5a/e07/9af/d5ae079af5f964aae4761175678f615c.jpg" alt="imagen"></div></div><br><div class="spoiler"> <b class="spoiler_title"> Airconsole XL (139$)  Hame MPR-A3 (13.9$)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/tn/zt/ct/tnztctmox0g_ninvh8fnmvklwdg.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/f71/488/a87/f71488a8733c9dc21cab501d272c16a5.jpg" alt="imagen"></div></div><br><p>   ,            ,    .      :)    .     " <i>  .       .       ,       .   .   </i> ". </p><br><p>       "  A5-V11    Airconsole".  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://go.mysku.ru/%3Fr%3D" rel="nofollow"></a>    Ham  6$  Airconsole  69$.  ,  Zyxel Keenetic 4G II   . </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Por cierto, si de repente entre los lectores hay propietarios del AirConsol original que ya los abri√≥, con gusto aceptar√© tableros de fotos como regalo y completar√© el art√≠culo :) </font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bueno, en principio, todo lo que quer√≠a decir. </font><font style="vertical-align: inherit;">Gran parte de lo que est√° escrito aqu√≠ es aplicable a otro hardware (compacto) y espero que sea √∫til para el "amplio p√∫blico" :)</font></font></p><br><p></p><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/s3/5l/vm/s35lvmfuuc9jd67i9gvfk5s67n0.jpeg"></a> </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ps Para los propietarios de NEXX WT3020F, TP-Link TL-MR3020, TP-Link TL-WR703N (es decir, todos los enrutadores con una carcasa bastante espaciosa) mencionados al comienzo del art√≠culo, un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concentrador de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bajo costo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">en el chip HS8836 que se</font></a><font style="vertical-align: inherit;"> muestra a continuaci√≥n </font><font style="vertical-align: inherit;">puede ser una opci√≥n muy conveniente para incrustar </font><font style="vertical-align: inherit;">:</font></font><p></p><br><img src="https://habrastorage.org/webt/lo/lu/gx/lolugxzv2bc1rsiwmf5zqlmywfw.jpeg"><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por si acaso, el circuito que se encuentra </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠ se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> muestra debajo del spoiler.</font></font></p><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagrama esquem√°tico de un hub chino de 3 puertos en el HS8836</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/p1/2k/vc/p12kvcaidomhqn1ebmdpkqmgozq.png"></div></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La ventaja principal, en mi opini√≥n, adem√°s del tama√±o en miniatura y el m√≠nimo de piezas, es el montaje de la placa con el controlador y los puertos USB a trav√©s de cables. </font><font style="vertical-align: inherit;">Para incrustar en el enrutador: un m√≠nimo de movimientos del cuerpo, aunque a√∫n puede instalar una placa de radiador de aluminio en el chip.</font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ri/is/cg/riiscgsvp47h89tva4u-zsyc-aq.jpeg"></div><br><p> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualizaci√≥n de 2019</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : tenemos en nuestras manos la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">refrigeraci√≥n de Walti</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Detalles debajo del spoiler</font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ap/0z/xz/ap0zxzmjdld3vt7c5k9j0xmwtww.jpeg"></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placa de enfriamiento externa</font></font></b> <div class="spoiler_text"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En primer lugar, encontr√© y cort√© una placa de aluminio adecuada con un grosor de 1 mm. </font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hj/x4/ob/hjx4obx6spy6wcwbggecbg_vipo.jpeg"></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Taladr√© agujeros para los tornillos M1 y cort√© el hilo en la placa (estaba esperando especialmente el toque en el M1) </font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cq/v4/dc/cqv4dcflobaax_7mb0lptzdtune.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/z1/nq/kc/z1nqkcsteyk6fxkhth4gmjsoxfw.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cq/tz/j9/cqtzj9ko1ei5ibzyh-ljkg_qws0.jpeg"></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent√© apretar m√°s las tuercas M1. </font><font style="vertical-align: inherit;">Aferrado a mi bolsillo, no me gust√≥, as√≠ que rechac√© esta idea y simplemente afil√© los extremos sobresalientes de los tornillos.</font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k8/on/zw/k8onzwkf21gc-aqcyfa8kumk6_a.jpeg"></div><br><p>      (  )     1,5    . </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0w/dr/av/0wdravnl7ywqj7grbomcgc1lqdy.jpeg"></div><br><p>       ‚Äî      </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gs/nv/bc/gsnvbcfktsoobwumeeqyztrftpo.jpeg"></div><br><p>        (  -  )   . </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4-/cr/pg/4-crpg09gmggmcswvsudmnugy1g.jpeg"></div><br><p>    ‚Äî  :). </p></div></div><br><p> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adici√≥n de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artem_kramov con</font></font></a></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> respecto a wifi roto al reemplazar flash. </font><font style="vertical-align: inherit;">Moral: mantenga un volcado completo y transfiera la secci√≥n de configuraci√≥n con la configuraci√≥n del m√≥dulo wifi</font></font></p><br><div class="spoiler">  <b class="spoiler_title">M√°s detalles</b> <div class="spoiler_text"><blockquote> <strong></strong> :   -  Wi-Fi     .  4  ,  ,   8   Wi-Fi ( ).  ,    ,    . <br> <strong></strong> :  ,       Config (    ),        Wi-Fi.       Breed,    .  ,  Ethernet,   Config    Wi-Fi  .        -  ,     ,   -        . </blockquote></div></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubicaci√≥n GPIO en el enrutador (tomada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></p><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A5-V11 GPIO (foto en la que se puede hacer clic)</font></font></b> <div class="spoiler_text"><blockquote> Cableado GPIO en A5-V11 <br><br>  Un ejemplo: <br>  22- - gpio 22 est√° vinculado a Gnd <br>  25+ - gpio 25 est√° vinculado a + 3.3V <br><br>  sda, scl es mejor usar en 21 y 26 (reemplace las resistencias con Gnd, ponga 10kŒ©).  Solo en estos, con el LCD 1602, 2004 conectado y la fuente de alimentaci√≥n, el enrutador se inicia normalmente, en otros gpios es necesario conectar la alimentaci√≥n del m√≥dulo un poco m√°s tarde, de lo contrario el enrutador no se inicia. <br><br>  A los 25 (w1) use el sensor ds1820, porque  ya est√° vinculado a + 3.3V a trav√©s de 4.7kOhm. <br><br>  Gpio 21 calcul√≥ primero que iba a salir por el pist√≥n, soldado al pist√≥n (nano), pero luego result√≥ que estaba sentado en el suelo a trav√©s de un ohmio de 1k por alguna raz√≥n.  Luego fue a este hilo y lo reemplaz√≥ con gpio 26 con 10kOhm. </blockquote><p></p><div style="text-align:center;"> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/zm/wr/jl/zmwrjlxicxzohywv_5vjrnvhgyo.jpeg"></a> </div><br><div style="text-align:center;"> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/jq/rl/hm/jqrlhmcjevpxpkvvcs4crfsfqgi.jpeg"></a> </div><p></p></div></div><br><hr><br><div class="spoiler">  <b class="spoiler_title">Fuentes utilizadas</b> <div class="spoiler_text"><ul><li>  http://skproj.ru/hame-mpr-a1-proshivka-openwrt-i-apgrejd-fleshki-na-16-ili-8-megabajt/?doing_wp_cron=1472313516.0620179176330566406250 </li><li>  http://w3bsit3-dns.com/forum/index.php?showtopic=884713&amp; </li><li>  https://github.com/nofeletru/UsbAsp-flash/releases/ </li><li>  http://forum.easyelectronics.ru/viewtopic.php?f=17&amp;t=10947 </li><li>  http://my-embedded.blogspot.com/2013/12/mini-4g-router-rt5350f.html </li><li>  http://eko.one.pl/?p=openwrt-gpio2 </li><li>  https://habr.com/post/238713/ </li><li>  https://nm-projects.de/2017/09/analysis-of-mini-3g4g-wifi-wireless-router-a5-v11/ </li><li>  https://tuxotronic.org/wiki/tools/flashrom/ </li><li>  http://srr.cherkessk.ru/owrt/help-owrt.html </li><li>  https://tuxotronic.org/wiki/openwrt/rt5350/build-firmware/ </li><li>  https://mysku.ru/blog/aliexpress/27796.html </li><li>  https://habr.com/post/247513/ </li></ul></div></div><br><p>  <u>Importante!</u>  Todas las actualizaciones y notas provisionales a partir de las cuales los art√≠culos habr se forman sin problemas ahora se pueden ver en mi canal de telegramas <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">lab66</a></b> .  Suscr√≠bete para no esperar el pr√≥ximo art√≠culo, sino para estar inmediatamente informado sobre toda la investigaci√≥n :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es425281/">https://habr.com/ru/post/es425281/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es425269/index.html">Hackathon GAZ: c√≥mo tocar al gigante automotor</a></li>
<li><a href="../es425271/index.html">WPA3 podr√≠a ser m√°s seguro: opini√≥n de expertos</a></li>
<li><a href="../es425273/index.html">Otra forma de usar docker-compose</a></li>
<li><a href="../es425275/index.html">12 consejos para escalar Node.js</a></li>
<li><a href="../es425279/index.html">C√≥mo entrevistar a Google: qu√© ser, qu√© no pasar</a></li>
<li><a href="../es425283/index.html">Localizaci√≥n infinita, o c√≥mo traducimos un mapa en tiempo real</a></li>
<li><a href="../es425285/index.html">Si no contratas a Jones, entonces no mereces a los se√±ores</a></li>
<li><a href="../es425287/index.html">Casas FIAS en PostgreSQL</a></li>
<li><a href="../es425289/index.html">Enfoque corporativo</a></li>
<li><a href="../es425291/index.html">Los resultados de la pasant√≠a de verano 2018: barrieron quinientos pita shawarma. Y sobrevivi√≥</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>