<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🚀 🐎 ⛷️ Autorisation locale sans mot de passe dans Ubuntu 🧗🏼 👩‍🏭 👘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous allons parler de la façon dont nous avons trouvé une autorisation locale sans mot de passe dans Ubuntu, qui, semble-t-il, ne sera ja...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Autorisation locale sans mot de passe dans Ubuntu</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acribia/blog/416425/"><img src="https://habrastorage.org/webt/ww/p0/1q/wwp01qrnhwpnkdwjvsmaexhp934.jpeg" alt="image"><br><br>  Aujourd'hui, nous allons parler de la façon dont nous avons trouvé une autorisation locale sans mot de passe dans Ubuntu, qui, semble-t-il, ne sera jamais fermée.  Comment tout s'est passé, lisez sous la coupe. <br><a name="habracut"></a><br>  Une belle soirée d'été, l'auteur de l'article a fermé le capot d'un ordinateur portable fonctionnel d'Ubuntu 16.04 Desktop à Unity et est rentré chez lui.  La soirée était si belle que j'ai décidé de prendre quelques jours de congé, j'ai envoyé un SMS à mon patron et il m'a laissé partir. <br><br>  Il s'est avéré que tous mes collègues n'ont pas passé la même merveilleuse soirée.  L'ordinateur portable de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">C4n</a> est tombé en panne, alors il m'a demandé de lui prêter le mien, mais avec son disque dur.  Bien sûr, j'ai permis. <br><br>  Avec cela, notre enquête fascinante a commencé. <br><br><h3>  Qu'est-il arrivé? </h3><br>  Le lendemain matin, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">c4n</a> a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">démonté</a> mon ordinateur portable et y a inséré mon disque dur.  Il a ouvert le couvercle et a vu, au lieu de commencer à charger son système d'exploitation, la fenêtre de connexion sur mon système.  Il était cliquable et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">c4n a</a> commencé à saisir des mots de passe aléatoires, mais en vain.  Frustré, il a appuyé sur le bouton d'alimentation, puis un <b>miracle</b> s'est produit. <br><br>  Au lieu de redémarrer l'ordinateur, je me suis connecté avec succès à <b>mon</b> système et les derniers programmes et documents que j'ai ouverts ont également été affichés.  Il est à noter que les documents n'étaient pas simplement montrés, ils travaillaient pour eux-mêmes!  Vous pouvez faire défiler les documents et parcourir les onglets du navigateur.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">c4n m'a</a> immédiatement pris une capture d'écran. <br><br><img src="https://habrastorage.org/webt/3b/_l/yn/3b_lynsdq6qitwise7xmcufn3lq.png" alt="image"><br>  <i>En fait, la capture d'écran était différente.</i>  <i>Lorsque je quitte le travail, je ne laisse pas KeePass ouvert et le site Web de l'entreprise.</i> <br><br>  Face à une autorisation locale sans mot de passe! <br><br>  Quand je suis sorti de vacances, je me suis demandé quelle était la faute de ce phénomène, s'il se reproduisait toujours et s'il se reproduisait toujours de la même façon, s'il était reproduit sur tous les systèmes. <br><br><h3>  Raisons </h3><br>  Il s'est avéré que la faute de ce phénomène était que lorsque le couvercle a été fermé, mon ordinateur portable n'est pas passé en veille prolongée, mais s'est mis en veille (c'est-à-dire qu'il a laissé la RAM sous tension), et après avoir ouvert le couvercle, le système d'exploitation chargé et les derniers fichiers sont restés dans la RAM, avec avec qui j'ai travaillé.  Le système d'exploitation ne sait pas que le disque dur a été retiré de l'ordinateur et continue de fonctionner jusqu'à ce que vous ayez besoin d'accéder au disque dur. <br><br>  Pourquoi il est possible de passer une autorisation reste un mystère pour nous.  Nous péchons sur le travail des modules <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PAM</a> (Pluggable Authentication Modules), <s>qui, très probablement, ne sont pas en RAM, et Ubuntu 16.04 traite incorrectement leur absence, mais nous avons alors réalisé que le problème était autre chose.</s> <br><br><h3>  Est-il toujours reproduit et toujours le même? </h3><br>  Nos expériences ont commencé avec Ubuntu 16.04.  Les actions étaient les suivantes: <br><br><ol><li>  Nous envoyons l'ordinateur en mode veille. </li><li>  Nous sortons le disque dur. </li><li>  Nous sortons l'ordinateur du mode veille. </li></ol><br>  De plus, comme il s'est avéré, il peut y avoir plusieurs options pour le comportement du système: <br><br><ol><li>  L'ordinateur affiche la fenêtre de connexion, entrez un mot de passe aléatoire =&gt; nous voyons des fenêtres utilisateur devant le bordereau (toutes les fenêtres fonctionnent). </li><li>  L'ordinateur affiche la fenêtre de connexion, entrez un mot de passe aléatoire =&gt; le système dit que le mot de passe est incorrect =&gt; appuyez une fois sur le bouton d'alimentation =&gt; nous voyons les fenêtres utilisateur avant le glissement (toutes les fenêtres fonctionnent). </li><li>  L'ordinateur affiche un écran noir (le curseur le survole), appuyez sur des touches aléatoires et Entrée =&gt; nous voyons des fenêtres utilisateur devant le bordereau (toutes les fenêtres fonctionnent). </li><li>  L'ordinateur affiche un écran noir (le curseur le survole), appuyez sur des touches aléatoires et Entrée =&gt; rien ne se passe =&gt; appuyez une fois sur le bouton d'alimentation =&gt; nous voyons les fenêtres utilisateur avant le glissement (toutes les fenêtres fonctionnent). </li></ol><br>  Très probablement, les éléments 3-4 sont similaires aux éléments 1-2, juste pour une raison quelconque, le graphique ne dessine pas de fenêtre de connexion. <br><br>  L'expérience a été effectuée plusieurs fois, et toutes les fois où il était possible d'accéder aux fenêtres de l'utilisateur, c'est-à-dire  la reproductibilité est de 100%.  C'est très cool pour un bug aussi étrange.  Certes, il convient de noter que seules les fenêtres actives sont disponibles, nous n'avons pas pu passer aux fenêtres réduites.  De plus, certaines fenêtres ont disparu après un certain temps, et parfois l'effet de journalisation a été observé, mais l'une des quatre méthodes d'entrée a permis de revenir. <br><br><h3>  PoC </h3><br>  Nous avons tourné une courte vidéo qui montre l'ensemble du processus d'attaque. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/cGu5AFCQ1Uw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Joue-t-il sur tous les systèmes? </h3><br>  La condition du test était la présence de toutes les dernières mises à jour du système.  Pourquoi avons-nous besoin d'un bug qui a longtemps été fermé? <br><br>  Pour commencer, il a été décidé de vérifier si le bogue est reproduit sur des PC ordinaires (pas des ordinateurs portables) avec Ubuntu 16.04 avec Unity.  Il y avait une théorie selon laquelle l'affichage de la fenêtre pouvait être en quelque sorte connecté à une carte vidéo.  Par conséquent, la vérification a été effectuée à partir d'un PC avec des cartes graphiques intégrées et discrètes, dans tous les cas, le résultat était le même - il remplit parfaitement le bogue. <br><br>  Ensuite, Ubuntu 16.04 avec GNOME.  Et ici, nous avons été déçus: je n'ai pas résolu le bug.  Parfois, en sortant d'un feuillet, le système a montré les dernières fenêtres pendant une demi-seconde (il est tout à fait possible de filmer une vidéo), les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chercheurs</a> l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ont signalé en 2011</a> , et il n'a pas été fermé jusqu'à présent. <br><br>  De plus, nous avons pris Arch avec Wayland et Xorg - la déception, ne fonctionne pas.  Debian 9 avec GNOME et encore déception.  Il n'a pas non plus fonctionné sur le nouveau Ubuntu 18.04 - sans surprise, car à ce moment-là, nous avons déjà commencé à soupçonner que le problème était dans Unity.  Par conséquent, nous avons décidé de prendre Ubuntu 14.04 pour les derniers tests, et de voir également ce qui se passe avec Ubuntu 18.04 si vous changez le gestionnaire de fenêtres de GNOME en Unity.  Sur Ubuntu 14.04, tout fonctionnait bien (bien que les fenêtres aient une durée de vie beaucoup plus courte que le 16/04).  Sur Ubuntu 18.04 avec Unity, après avoir quitté le bordereau, le système se bloque immédiatement et aucune autre expérience ne peut être effectuée. <br><br>  Conclusion: nous avons décidé que les versions d'Ubuntu avec Unity installé nativement sont vulnérables, c'est-à-dire  version <br><br><ul><li>  10.10 </li><li>  11.04 </li><li>  11.10 </li><li>  12.04 </li><li>  12.10 </li><li>  04/13 </li><li>  13.10 </li><li>  14.04 (testé par nos soins) </li><li>  14.10 </li><li>  15/04 </li><li>  15.10 </li><li>  04.16 (testé par nos soins) </li><li>  16.10 (testé par nos soins) </li><li>  04.17 (testé par nos soins) </li></ul><br>  Liste assez impressionnante, non?  Nous avons testé loin de tout.  Si quelqu'un a la possibilité de vérifier d'autres versions que nous n'avons pas testées, nous l'ajouterons volontiers au message. <br><br><h3>  Pourquoi pensons-nous que c'est mauvais </h3><br>  La vulnérabilité ne permet qu'un accès local aux données, et pas à tout le monde, mais uniquement à celles qui sont ouvertes dans les applications et déployées.  Cependant, cela est encore assez critique, car: <br><br><ol><li>  Les données utilisées peuvent ne pas être enregistrées sur le disque (par exemple, un document modifiable). </li><li>  Les données peuvent se trouver dans un répertoire personnel chiffré (par exemple, un fichier avec des mots de passe). </li><li>  Les données peuvent être sur un lecteur flash crypté. </li><li>  Les données peuvent nécessiter une autorisation supplémentaire (comme dans notre PoC avec KeePass). </li></ol><br>  En plus de cela, dans Unity, n'importe qui peut envoyer un ordinateur à un bordereau, simplement depuis l'écran de connexion (sans autorisation).  C'est-à-dire  c'est une situation assez réelle qu'une personne verrouille l'écran et quitte pour le déjeuner, à ce moment, l'attaquant envoie l'ordinateur dans un bordereau, sort le disque dur et regarde ce que la personne a fait avant de partir pour le déjeuner.  Après il reste à redémarrer l'ordinateur déjà avec le disque, et la personne ne devinera pas que ses données pourraient être compromises. <br><br>  Les sceptiques diront qu'un résultat similaire peut être facilement obtenu en effectuant une attaque de démarrage à froid, et les résultats seront encore meilleurs, mais à quelle fréquence l'un de vous porte-t-il un thermos avec quelques litres d'azote liquide? <br><br>  Nous avons décidé que le problème était critique et devait être écrit dans Ubuntu. <br><br><h3>  Comme nous écrivons dans Ubuntu </h3><br>  Pour obtenir un bug, nous avons dû nous inscrire sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">launchpad.net</a> , puis créer une description du bug et ajouter une vidéo depuis PoC.  Nous avons obtenu 406 points de classement et un badge feu de joie (quoi que cela signifie).  Ils ont commencé à attendre.  Nous avons commencé le bogue le 2018-06-18. <br><br>  Après une longue correspondance, le camarade Marc Deslauriers a terminé notre débat avec un message qui se résumait à: «Nous ne réglerons rien.  C'est la même chose que d'avoir un accès physique. " <br><br><img src="https://habrastorage.org/webt/4l/g5/as/4lg5asjshcflbqdjdp0cdz0-5hs.png" alt="image"><br><br>  Les tentatives de convaincre ont échoué.  Nous avons été envoyés à Total Ignorer pendant une semaine.  Après quoi nous avons été autorisés à publier cette étude: <br><br><img src="https://habrastorage.org/webt/8p/we/v8/8pwev8g0jgoohsxm_xptktmqv_g.png" alt="image"><br><br>  UPD: 9 juillet 2018, à 16 heures, nous avons décidé de rendre le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bug</a> public (merci <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">amarao</a> ).  Dans la discussion sur le tableau de bord, le bogue a été confirmé pour Mate 18.04, et pas seulement pour Unity.  La communauté insiste également sur le fait que le bogue existe et ne doit pas être ignoré. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416425/">https://habr.com/ru/post/fr416425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416415/index.html">Nous déplaçons tout dans l'ensemble de test Vivaldi 1.16.1230.3</a></li>
<li><a href="../fr416417/index.html">"Heavenly River" - La Chine créera une pluie artificielle d'une puissance sans précédent</a></li>
<li><a href="../fr416419/index.html">Générateur de grottes bidimensionnel aléatoire</a></li>
<li><a href="../fr416421/index.html">Une promenade dans la voie des stands, ou comment les technologies IaaS aident les équipes de course</a></li>
<li><a href="../fr416423/index.html">Comment les Russes ont pensé au processeur américain, ou un examen du DVR AdvoCam-FD8 Gold-II (GPS + GLONASS)</a></li>
<li><a href="../fr416427/index.html">Ce que nous lisons en juin: des nouvelles sur Angular, JWT, le scandale de la blockchain et un peu de zen</a></li>
<li><a href="../fr416429/index.html">Principes de conception prévus pour Jakarta EE</a></li>
<li><a href="../fr416431/index.html">Les meilleurs projets de blockchain. ICO juillet 2018 (vote)</a></li>
<li><a href="../fr416433/index.html">Demandez à Ethan: les pertes de rayonnement des étoiles peuvent-elles expliquer l'énergie sombre?</a></li>
<li><a href="../fr416435/index.html">Pourquoi le cerveau humain est-il si efficace?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>