<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ค โ๏ธ ๐ฉโ๐ฉโ๐งโ๐ง ุชูููุฐ ุงูููุฒุงุช ุงููุชุจููุฉ ูู PEG ๐จ๐ผโ๐จ ๐ ๐๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุจุนุฏ ุฃู ุฌูุนุช ุฌููุน ุฃุฌุฒุงุก ูููุฏ PEG-parser ูุนูุง ูู ุงูููุดูุฑ ุงูุณุงุจู ุ ุฃูุง ูุณุชุนุฏ ูุฅุธูุงุฑ ููููุฉ ุชูููุฐ ุจุนุถ ุงูุฃุดูุงุก ุงูุฃุฎุฑู ุงููุซูุฑุฉ ููุงูุชูุงู. 
 ุจูุซูู PEG ูุญูู ุณูุณ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูููุฐ ุงูููุฒุงุช ุงููุชุจููุฉ ูู PEG</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471992/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฃู ุฌูุนุช ุฌููุน ุฃุฌุฒุงุก ูููุฏ PEG-parser ูุนูุง ูู ุงูููุดูุฑ ุงูุณุงุจู ุ ุฃูุง ูุณุชุนุฏ ูุฅุธูุงุฑ ููููุฉ ุชูููุฐ ุจุนุถ ุงูุฃุดูุงุก ุงูุฃุฎุฑู ุงููุซูุฑุฉ ููุงูุชูุงู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุจูุซูู PEG ูุญูู ุณูุณูุฉ ุงููุญุชูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฒุนู ุงููุชุฏ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูููุฐ ูุญูู PEG</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PEG ุงููุญูู ุฌูู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PEG ูุญูู ุงูุชุตูุฑ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุณุงุฑ ุนูุฏู PEG ุงููุญูู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุถุงูุฉ ุฅุฌุฑุงุกุงุช ุฅูู ููุงุนุฏ PEG</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุนุฏ ุงูููููุฉ ูููุญูู PEG</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูููุฐ ุงูููุฒุงุช ุงููุชุจููุฉ ูู PEG</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PEG ุนูู ููุฑ ุงููุทูุฑ ุณุจุฑููุช</a> </li></ul></div></div><br><p style=";text-align:right;direction:rtl">  ุณููุธุฑ ูู ุงูููุฒุงุช ุงูุชุงููุฉ ูู PEG: </p><a name="habracut"></a><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> ุงูุนูุงุตุฑ ุงููุณูุงุฉ: <code>NAME=item</code> (ูููู ุงุณุชุฎุฏุงู ุงูุงุณู ูู ุงูุฅุฌุฑุงุก) </li><li style=";text-align:right;direction:rtl">  ุนูุงุตุฑ ุงููุธุงูุฉ: <code>&amp;item</code> (ุฅูุฌุงุจู) ู <code>!item</code> (ุณูุจู) </li><li style=";text-align:right;direction:rtl">  ุชุฌููุน ุงูุนูุงุตุฑ ุจูู ููุณูู: ( <code>item item ...</code> ) </li><li style=";text-align:right;direction:rtl">  ุงูุนูุงุตุฑ ุงูุงุฎุชูุงุฑูุฉ: <code>[item item ...]</code> <code>item?</code> </li><li style=";text-align:right;direction:rtl">  ุงูุนูุงุตุฑ ุงูููุฑุฑุฉ: <code>item*</code> (ุตูุฑ ุฃู ุฃูุซุฑ) <code>item+</code> (ูุงุญุฏ ุฃู ุฃูุซุฑ) </li></ul><br><h2 id="imenovannye-argumenty" style=";text-align:right;direction:rtl">  ุงูุญุฌุฌ ุงููุณูุงุฉ </h2><br><p style=";text-align:right;direction:rtl">  ููุจุฏุฃ ุจุงูุนูุงุตุฑ ุงููุณูุงุฉ.  ูุฐุง ููุงุณุจ ุนูุฏูุง ูููู ูุฏููุง ุงูุนุฏูุฏ ูููู ูู ุจุฏูู ูุงุญุฏ ูููุณ ุงููุงุนุฏุฉ ุ ุนูู ุณุจูู ุงููุซุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">expr: term '+' term</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููููุง ุงูุฑุฌูุน ุฅูู <code>term</code> ุงูุซุงูู ุนู ุทุฑูู ุฅุถุงูุฉ ุงูุฑูู <code>1</code> ุฅูู ุงุณู ุงููุชุบูุฑ ุ ุจุญูุซ ูุชุถุญ ูู ุงูุฅุฌุฑุงุก ูุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">expr: term '+' term { term + term1 }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุง ูุญุจ ุงูุฌููุน ุฐูู ุ ูุฃูุง ุดุฎุตูุงู ุฃูุถู ุฃู ุฃูุชุจ ุดูุฆูุง ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">expr: left=term '+' right=term { left + right }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุฏุนู ูุฐุง ุจุณูููุฉ ูู ููุงุนุฏ ุงูุชุนุฑูู ุนู ุทุฑูู ุชุบููุฑ ูุงุนุฏุฉ <code>item</code> ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">item: | NAME = atom { NamedItem(name.string, atom) } | atom { atom } atom: | NAME { name.string } | STRING { string.string }</code> </pre> <br><p style=";text-align:right;direction:rtl">  (ุญูุซ <code>atom</code> ููุณุช ุณูู ุนูุตุฑ ูุฏูู) </p><br><p style=";text-align:right;direction:rtl">  ูุชุทูุจ ุฐูู ููุง ุฅุถุงูุฉ ุชุนุฑูู ุงููุฆุฉ <code>grammar.py</code> ุฅูู <code>grammar.py</code> .  ุฅููุง ุฅุญุฏู ูุฆุงุช ุงูุจูุงูุงุช ุงูุชู ุฐูุฑุชูุง ุณุงุจููุง - ููุง ุฃูุถูุง ุณูุงุช <code>name</code> ูุงูุนูุตุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุฅุฌุฑุงุก ุชุบููุฑุงุช ุตุบูุฑุฉ ุนูู ูููุดุฆ ุงูุดูุฑุฉ ุ ูุงูุชู ุณุฃุชุฑููุง ูุชูุฑูู ูููุงุฑุฆ (ุฃู ููููู ุงููุธุฑ ูู ูุณุชูุฏุน ุงูุชุฎุฒูู ุงูุฎุงุต ุจู :-).  ุณูููู ุงูููุฏ ุงูุฐู ุชู ุฅูุดุงุคู ุงูุขู ุจุชุนููู ูุชูุฌุฉ ูุทุงุจูุฉ ูู ุนูุตุฑ ุฅูู ูุชุบูุฑ ุจุงูุงุณู ุงููุญุฏุฏ ุ ูููุณ ุจุงูุงุณู ุงูุฐู ุชู ุงูุญุตูู ุนููู ูู ุงุณู ูุงุนุฏุฉ ุงูุนูุตุฑ.  ุณูุนูู ูุฐุง ุฃูุถูุง ุนูู ุงูุนูุงุตุฑ ุฐุงุช ุงูุฑููุฒ ุงููููุฒุฉ (ุฅูุง ูู ุงููููุฐุฌ <code>NAME</code> ุฃู ุงูุฃุญุฑู ุงูุญุฑููุฉ ููุณูุณูุฉ ูุซู <code>':='</code> ). </p><br><h2 id="lookahead" style=";text-align:right;direction:rtl">  Lookahead </h2><br><p style=";text-align:right;direction:rtl">  ุชูููุง lookahead.  ุฑุจูุง ุตุงุฏูุช ูุฐุง ุงูููููู ูู ุชุนุจูุฑุงุช ููุชุธูุฉ.  ุฃุซูุงุก ูุงุฌูุฉ ุงูุจุญุซ ุงูุฃูุงููุฉ ุ ูููู ุฑูุถ ุงูุจุฏูู ุงููุนุฑุจ ุฃู ูุจููู ุนูู ุงูููุฑ ุ ุฏูู ุชุญุฑูู ูุคุดุฑ ุงูุฑูุฒ ุงููููุฒ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ูููู ุงุณุชุฎุฏุงู ูุงุฌูุฉ ุงูุจุญุซ ููุณููุฉ ุฃูุซุฑ ุฃูุงูุฉ ูุฅุฒุงูุฉ ุงูุงูุชุจุงุณ ูุน ุงุณุชุซูุงุกุงุช ุงููุญูู ุงููุบูู ุ ูุงูุชู ูุชุจุช ุนููุง ูู ููุงูุฉ ุณุงุจูุฉ.  ุจุฏูุงู ูู ุงูุณูุงุญ ููุฅุฌุฑุงุกุงุช ุจุฑูุถ ุจุฏูู ููุจูู ุจุงููุนู ูู ุฎูุงู ุฅุฑุฌุงุน ุจูุง ุ ูููููุง ุฅุถุงูุฉ ุชุนูููุฉ ูุจู <code>OP</code> ูุงุณุชุจุนุงุฏ <code>"}"</code> .  ุงููุงุนุฏุฉ ุงููุฏููุฉ ุชุจุฏู ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> | OP { None if op.string in ("{", "}") else op.string }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ูุดุจู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> | !"}" OP { op.string }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุคุฏู ูุฐุง ุฅูู ููู ูุนุงูุฌุฉ ุงูููุณ ุงููุฌุนุฏ ูู ุงูุฅุฌุฑุงุก ุฅูู ุงูููุงุนุฏ ุงููุญููุฉ ุ ุญูุซ ููุชูู.  ูุง ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู <code>"{"</code> ุ ูุฃูู ูุชูุงูู ูุน ุจุฏูู ุณุงุจู (ูู ุงููุงูุน ุ ูุฐุง ุตุญูุญ ุฃูุถูุง ุจุงููุณุจุฉ ููุฅุตุฏุงุฑ ุงููุฏูู ุ ูููู ูุณูุช ุฐูู :-). </p><br><p style=";text-align:right;direction:rtl">  ูุถูู ููุงุนุฏ ุงููุญู ู lookaheads ุฅูู ุงููุงุนุฏุฉ <code>item</code> ุงููุญู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">item: | NAME = atom { NamedItem(name.string, atom) } | atom { atom } | "&amp;" atom { Lookahead(atom, True) } | "!" atom { Lookahead(atom, False) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑุฉ ุฃุฎุฑู ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูุงุนุฏุฉ ุจูุงูุงุช Lookahead ุฅูู <code>grammar.py</code> (ูุงุณุชูุฑุงุฏูุง ุฅูู <code>@subheader</code> !) ูุชุนุฏูู ุงููููุฏ ููููุงู ุจุฅุถุงูุฉ ุทุฑููุฉ ุงููุณุงุนุฏ ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookahead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, positive, func, *args)</span></span></span><span class="hljs-function">:</span></span> mark = self.mark() ok = func(*args) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> self.reset(mark) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ok == positive</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุญุงูุชูุง ุ ูุจุฏู ุงูุฑูุฒ ุงูุฐู ุชู ุฅูุดุงุคู ููุฐุง ุงูุจุฏูู ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> self.lookahead(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, self.expect, <span class="hljs-string"><span class="hljs-string">"}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (op := self.expect(OP)) ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> op . string</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ูู ุฌุฒุก ุงูููุงุนุฏ ุฃุนูุงู ุ ูุง ูููู ุฃู ุชุญุตู lookahead ุนูู ุฃุณูุงุก ููุงุณุจุฉ.  ูุฐุง ุณูู ุงูุฅุตูุงุญ ุ ููู ูุง ูุฒุงู ูุฏู ููุฑุฉ ุนู ูุฏู ูุงุฆุฏุฉ ุฐูู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุจุงููุณุจุฉ ููุชููุนุงุช ุงูุณูุจูุฉ ุ ุณุชููู ุงููููุฉ ุฏุงุฆููุง ุจูุง. </p><br><h2 id="gruppirovka-v-skobkah" style=";text-align:right;direction:rtl">  ุงูุชุฌูุน ุจูู ููุณูู </h2><br><p style=";text-align:right;direction:rtl">  ุงูุขู ููููุฐ ูุฌููุนุงุช ุฐุงุช ุฃููุงุณ.  ุฃูุถู ููุงู ูุฅุถุงูุชูุง ุฅูู ุงููุฎุทุท ูู ูุงุนุฏุฉ <code>atom</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">atom: | NAME { name.string } | STRING { string.string } | "(" alts ")" { self.synthetic_rule(alts) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุชุบูุฑ ุงูุจุฏููุงู ุงูุฃููุงู.  ูุณุชุฎุฏู ุงูุฅุฌุฑุงุก ุงูุฎุงุต ุจุงูุจุฏูู ุงูุฌุฏูุฏ ุงุฎุชุฑุงููุง (ูุง ูุฒุงู ุชุทุจููู ุบูุฑ ููุณุฑ) ุ ููุง ูุณูุญ ูููุญูู ุงูููููุฉ ุจุฅุถุงูุฉ ููุงุนุฏ ุฌุฏูุฏุฉ ุฅูู ุงูููุงุนุฏ ุฃุซูุงุก ุงูุทูุฑุงู.  ูุฐู ุงูุฏุงูุฉ ุงููุณุงุนุฏ (ุงููุนุฑูุฉ ูู ูุญูู ุงูุชุนุฑูู) ุจุฅุฑุฌุงุน ุงุณู ูุงุฆู ุงููุงุนุฏุฉ ุงูุฌุฏูุฏ.  ุณุชุชููู ูู ุจุงุฏุฆุฉ ุซุงุจุชุฉ ูุชุจูุนุฉ ุจุฑูู ุ ููุง ูุฌุนูู ูุฑูุฏูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ <code>_synthetic_rule_1</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ุชุณุฃู ุนูุง ูุญุฏุซ ุฅุฐุง ุชู ุฅุณูุงุท ุงููุงุนุฏุฉ ุงูุงุตุทูุงุนูุฉ ูู ุงูููุงูุฉ.  ูุง ุฃุนุฑู ููููุฉ ุชุฌูุจ ุฐูู ุ ูููู ูุฌุจ ุฃูุง ุชููู ููุงู ุฃู ูุดุงูู - ูู ุฃุณูุฃ ุงูุญุงูุงุช ุณุชููู ููุงู ูุงุนุฏุฉ ุบูุฑ ูุณุชุฎุฏูุฉ ูู ุงูููุงุนุฏ.  ูุจูุถู ุงููุฐูุฑุฉ ุ ูู ูุชู ุชูููุฐ ุงูุฅุฌุฑุงุก ููุณู ูุฑุชูู ูููุณ ููุถุน ุงูุฅุฏุฎุงู ุ ูุฐูู ููุณุช ูุฐู ูุดููุฉ ุฃูุถูุง (ูููู ุญุชู ูู ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุณูููู ูุฏููุง ุญูู ููุช ูู ุฃุณูุฃ ุงูุญุงูุงุช). </p><br><p style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู <code>alts</code> ุฏุงุฎู ุงูุฃููุงุณ ูุนูู ุฃูู ูููููุง ุชุญุฏูุฏ ุดุฑูุท ุนููุฏู ููุญุฏุฏ ุฏุงุฎู ูุฌููุนุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ูุชุทุงุจู ุญู ุงูุฅุฌุฑุงุก ุงูุฌุฏูุฏ ุงูุฎุงุต ุจูุง ุนู ุทุฑูู ุงูุฎุทุฃ <code>{</code> ุ ูููููุง ุชุบููุฑ ุงูููู ุฅูู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> | !("{" | "}") OP { op.string }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุงูุฉ ุนูู ุฐูู ุ ูููู ุฃู ุชุญุชูู ุงููุฌููุนุงุช ุฃูุถูุง ุนูู ุฅุฌุฑุงุกุงุช!  ูุฐุง ูู ูุณุงุนุฏ ูู ุญู ุงููุดููุฉ ูุน ุงูุฅุฌุฑุงุกุงุช ุ ูููู ูู ุญุงูุงุช ุฃุฎุฑู ูุฏ ูููู ูููุฏูุง.  ููุธุฑูุง ูุฃููุง ูู ุฃู ุญุงู ูููู ุจุฅูุดุงุก ูุงุนุฏุฉ ุชุฑููุจูุฉ ุ ูุฅูู ูุง ูุชุทูุจ ุฃู ุนูู ุฅุถุงูู ูุชูููุฐู (ุจุงุณุชุซูุงุก ุชุทุจูู <code>synthetic_rule</code> :-). </p><br><h2 id="opcionalnye-elementy" style=";text-align:right;direction:rtl">  ุงูุนูุงุตุฑ ุงูุงุฎุชูุงุฑูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ููุง ูู ุงูุญุงู ูู pgen ุงููุฏูู ุ ุฃุณุชุฎุฏู ุงูุฃููุงุณ ุงููุฑุจุนุฉ ููุฅุดุงุฑุฉ ุฅูู ูุฌููุนุฉ ูู ุงูุฑููุฒ ุงููููุฒุฉ.  ูุฐุง ูู ุงูููุงู ุงูุฐู ุงุชุถุญ ุฃูู ูููุฏ.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ููุงุนุฏุฉ ุงููุญู ุงูุชู ุชุตู Python <code>for</code> loop ุงุณุชุฎุฏุงููุง ููุฅุดุงุฑุฉ ุฅูู ุฃู ุงูุชุฏุงุฏูุง <code>else</code> ูููู ุฃู ููุฌุฏ.  ููุฑุฉ ุฃุฎุฑู ูููููุง ุชูุณูุน ููุงุนุฏ ุงููุบุฉ <code>atom</code> ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">atom: | NAME { name.string } | STRING { string.string } | "(" alts ")" { self.synthetic_rule(alts) } | "[" alts "]" { Maybe(self.synthetic_rule(alts)) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง <code>Maybe</code> ููุงู ูุฆุฉ ุจูุงูุงุช ุฃุฎุฑู ุ ูุน ุณูุฉ <code>item</code> ูุงุญุฏ.  ูููู ุจุชุนุฏูู ูููุฏ ุงูุดูุฑุฉ ุจุญูุซ ูุง ุชูุดู ูุชูุฌุฉ ุงููุธููุฉ ุงูุชุฑููุจูุฉ ุฅุฐุง ูุงูุช ูุฐู ุงููููุฉ ุจูุง.  ููููุงู ุจุฐูู ุ ููููู ุฅุถุงูุฉ <code>or True</code> ูู ุงูุชูููุฐ.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุฃุฌู <code>[term]</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ((term := self.term()) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> term</code> </pre> <br><h2 id="povtoryayuschiesya-elementy" style=";text-align:right;direction:rtl">  ุงูุนูุงุตุฑ ุงูููุฑุฑุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุงูุชุจุฏูู ุฅูู ุงูุชูุฑุงุฑ ูู ูุธููุฉ PEG ูููุฏุฉ ุฃุฎุฑู (ูุชู ุงุณุชุนุงุฑ ุงูุชุฑููุฒ ูู ุงูุชุนุจูุฑุงุช ุงูุนุงุฏูุฉ ููุณุชุฎุฏู ุฃูุถูุง ูู pgen).  ููุงู ูููุฐุฌุงู: ุชุนูู ุฅุถุงูุฉ <code>*</code> ุฅูู ุฐุฑุฉ "ุตูุฑ ุฃู ุฃูุซุฑ ูู ุงูุชูุฑุงุฑ" ุ ุจูููุง ุชุนูู ุฅุถุงูุฉ <code>+</code> "ุชูุฑุงุฑ ูุงุญุฏ ุฃู ุฃูุซุฑ".  ูุฃุณุจุงุจ ุฃุฎุฑู ุ ุงุถุทุฑุฑุช ุฅูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูููุงุนุฏ ุงููุญููุฉ <code>item</code> <code>atom</code> ุ ูุน ุฅุถุงูุฉ ูุงุนุฏุฉ ูุณูุทุฉ ุ ูุงูุชู <code>molecule</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">item: | NAME '=' molecule { NamedItem(name.string, molecule) } | "&amp;" atom { Lookahead(atom) } | "!" atom { Lookahead(atom, False) } | molecule { molecule } molecule: | atom "?" { Maybe(atom) } | atom "*" { Loop(atom, False) } | atom "+" { Loop(atom, True) } | atom { atom } | "[" alts "]" { Maybe(self.synthetic_rule(alts)) } atom: | NAME { name.string } | STRING {string.string } | "(" alts ")" { self.synthetic_rule(alts) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุญุธ ุฃู ูุฐุง ููุฏู ุจูุงุก ุฌููุฉ ุจุฏูู ููุนูุงุตุฑ ุงูุงุฎุชูุงุฑูุฉ ( <code>atom?</code> ).  ูุง ูุชุทูุจ ุงูุฃูุฑ ุฌููุฏูุง ุฅุถุงููุฉ ููุชูููุฐ ุ ูุฃู ูุฐู ูุฌุฑุฏ ุทุฑููุฉ ุฃุฎุฑู ูุฅูุดุงุก ุนูุฏุฉ <code>Maybe</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุงูุช ุฅุนุงุฏุฉ ุชูุนูู ูุฐู ุงูููุงุนุฏ ุถุฑูุฑูุฉ ูุฃููู ูุง ุฃุฑุบุจ ูู ุฌุนู ุจุนุถ ุงูููุงูู ุตุงูุญุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชูุฑุงุฑ ุงูุงุฎุชูุงุฑู (ูุฃู ูุฐุง ูุฌุฑุฏ ุชูุฑุงุฑ ุตูุฑ ุฃู ุฃูุซุฑ) ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชูุฑุงุฑ (ุฏุงุฎูู ุณูู ููุชูุท ูู ุงูุชุทุงุจูุงุช ุ ูุฃู PEG ูุณุชุฎุฏู ุฏุงุฆููุง ุฎูุงุฑุฒููุฉ ุฌุดุนุฉ) </li><li style=";text-align:right;direction:rtl">  ุงูููู ุงูุงุฎุชูุงุฑูุฉ ุงููุชูุฑุฑุฉ (ูุงูุชู ูู ุดุฃููุง ููุงุทุนุฉ ุงูุชุญููู ุฅุฐุง ูุงู ุงูุนูุตุฑ ุงูุงุฎุชูุงุฑู ุบูุฑ ูุชุทุงุจู). </li></ul><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูุง ูุฒุงู ูุฐุง ุงูุญู ุบูุฑ ูุซุงูู ุ ุญูุซ ููููู ูุชุงุจุฉ ุดูุก ูุซู <code>(foo?)*</code> .  ุณูููู ูู ุงูุถุฑูุฑู ุฅุถุงูุฉ ูุญุต ููุฐุง ุงููููู ูู ููุดุฆ ุงููุญูู ุงููุบูู ุ ููููู ุณุฃูุนู ุฐูู ุฎุงุฑุฌ ุงูููุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชุญุชูู ูุฆุฉ ุจูุงูุงุช <code>Loop</code> ุนูู ุณูุชูู: <code>item</code> ูุบูุฑ <code>nonempty</code> .  ุณูุณุชุฎุฏู ุงูุฑูุฒ ุงูุฐู ุชู ุฅูุดุงุคู ุทุฑููุฉ ูุญูู ูุณุงุนุฏ <code>loop()</code> .  ุฅูู ูุดุงุจู ุฌุฏูุง <code>lookahead()</code> ุงูููุถุญุฉ ูุณุจููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, nonempty, func, *args)</span></span></span><span class="hljs-function">:</span></span> mark = self.mark() nodes = [] <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> node := func(*args) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: nodes.append(node) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(nodes) &gt;= nonempty: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nodes self.reset(mark) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ูููุฉ <code>nonempty</code> <code>False</code> (ุจูุนูู ุฃู ุงูููุงุนุฏ ูุงูุช <code>*</code> ) ุ ููู ูุคุฏู ุฐูู ุฅูู ุญุฏูุซ ุฎุทุฃ.  ูู ูุชู ุงูุนุซูุฑ ุนูู ุฅุฏุฎุงูุงุช ุ ูุณูุชู ุฅุฑุฌุงุน ูุงุฆูุฉ ูุงุฑุบุฉ.  ูุชุญููู ุฐูู ุ ูููู ุจุชุทุจูู ูููุฏ ุงููุญูู ุงููุบูู ุจุญูุซ <code>is not None</code> ุฅุถุงูุฉ ุจูุง.  ุณูุคุฏู ุงูุงุฎุชูุงุฑ ุงูุฃูุซุฑ ูุนููุฉ ูู ููุดูุฑ ุณุงุจู ุฅูู ุฅุฑุฌุงุน <code>False</code> ูู ุญุงูุฉ ูุฌูุฏ ูุงุฆูุฉ ูุงุฑุบุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุดูุก ููุฐุง ุงูููู!  ููุช ุณุฃูุงูุด ุนุงูู ุงูุชุดุบูู "cut" ( <code>~</code> ) ุงูููุฌูุฏ ูู TatSu ุ ููู ุญุชู ุงูุขู ูู ุชุชุญ ูู ุงููุฑุตุฉ ูููุงุฌูุชู.  ูุณุช ูุณุชุนุฏูุง ุญุชู ุงูุขู ูููุงูุดุชู - ููุซุงุฆู TatSu ูุง ุชูุฏู ุณูู ูุซุงู ุจุณูุท ููุชู ุจู ููููุงู.  ูู ุฃุฌุฏูุง ูู ูููุฏุงุช ุฃุฎุฑู ูู PEG-parsers ุ ูุฐูู ุ ุฑุจูุง ุ ูุฐู ุงูููุฒุฉ ูู TatSu ููุท.  ุฑุจูุง ูููุง ูุง ุณุฃููู ุนูู.  (ููู ุงูููุช ููุณู ุ ููุช ุจุชูููุฐูุง ููุท ูู ุญุงูุฉ ุ ุฃูุช ูุง ุชุนุฑู ุฃุจุฏุง. :-) </p><br><p style=";text-align:right;direction:rtl">  ุฃุนุชูุฏ ุฃู ุงูููุงูุฉ ุงูุชุงููุฉ ุณุชููู ุนู ุชุฌุฑุจุชู ูู ูุชุงุจุฉ ููุงุนุฏ PEG ุงูุชู ูููููุง ุชุญููู ููุงุนุฏ Python.  ุณูู ุฃุฎุจุฑูู ููู ุญุฏุซ ุณุจุงู ูุทูุฑู Python kernel ุ ุงูุฐู ูุงู ูู ููุฏู ูุฐุง ุงูุฃุณุจูุน ุจุฏุนู ููุฌูุณุชู ูู ุจูููุจุฑุฌ ูุฏุนู ูุงูู ูู PSF ูุจุนุถ ุงูุดุฑูุงุช ุงูุฃุฎุฑู (ุนูู ุณุจูู ุงููุซุงู ุ ุฏูุนุช Dropbox ูู ุงูููุฏู ูุงูุทูุฑุงู).  ุดูุฑ ุฎุงุต ูุฅูููู ููุฑูุงูุณ ูุจุงุจูู ุบุงูููุฏู ุณุงูุบุงุฏู ุ ุงูุฐูู ุณุงุนุฏูุง ูุซูุฑุง ูู ุชูููุฐ ุงูุฃุฏูุงุช ูุงูุงุฎุชุจุงุฑุงุช.  ุจุนุฏ ุฐูู ุ ุณููุชุจ ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก ุ ููู ุซู ุณูููู ุจุฅุถุงูุฉ ุฅุฌุฑุงุกุงุช ุฅูู ูุฐุง ุงููุญู ุญุชู ุชุชููู ูู ุฅูุดุงุก ุฃุดุฌุงุฑ AST ุงูุชู ูููู ุชุฌููุนูุง ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ูุฑูุฒ ุจุงูุช CPython.  ููุงู ุฃุดูุงุก ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุงููุณุชูุจู! </p><br><p style=";text-align:right;direction:rtl">  ุชุฑุฎูุต ููุฐู ุงูููุงูุฉ ูุฑูุฒ ุงุณุชุดูุฏ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CC BY-NC-SA 4.0</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar471992/">https://habr.com/ru/post/ar471992/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar471980/index.html">ุงููุญุชุงููู ุงููุงุชู. ุงููุตู ุงูุฑุงุจุน ุ ุงูููุงุฆู ...</a></li>
<li><a href="../ar471982/index.html">ููุงูุดุฉ ูุณุชูุจู PHP</a></li>
<li><a href="../ar471986/index.html">ุงููุณุงุฑ ุนูุฏู PEG ุงููุญูู</a></li>
<li><a href="../ar471988/index.html">ุฅุถุงูุฉ ุฅุฌุฑุงุกุงุช ุฅูู ููุงุนุฏ PEG</a></li>
<li><a href="../ar471990/index.html">ููุงุนุฏ ุงูููููุฉ ูููุญูู PEG</a></li>
<li><a href="../ar471994/index.html">ุงูุนูู ุนูู PEG ุนูู Core Developer Sprint</a></li>
<li><a href="../ar471998/index.html">F # 10: ููุงุฆู</a></li>
<li><a href="../ar472000/index.html">"ูู ุงูุฃูููุฉ ุจููุงู ุฃู ูุถุน ุงููุฌุชูุน ูุนุงููุฑ": ูุงุฑุดูู ููุณูุงูุง ุญูู ููุชููู</a></li>
<li><a href="../ar472002/index.html">ุญุฒูุฉ ุฅุนุงุฏุฉ ุงูุชุนุจุฆุฉ ูู ุงูุฏุฑุฌ</a></li>
<li><a href="../ar472004/index.html">Boost.Spirit ุ ุฃู ุฅุถุงูุฉ "ุงูุฑูุญุงููุฉ" ุฅูู ูุงุฆูุฉ ุงููุฑุดุญุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>