<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßöüèø üëØ üö™ Nueva generaci√≥n de mensajer√≠a descentralizada y red telef√≥nica üôè üåû üåò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cada vez que aparece un art√≠culo sobre un nuevo mensajero, la mayor√≠a de los usuarios de Habr est√°n interesados ‚Äã‚Äãen comentarios: ¬ømensajer√≠a instant√°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nueva generaci√≥n de mensajer√≠a descentralizada y red telef√≥nica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mobile_one/blog/420811/"><img src="https://habrastorage.org/webt/q0/kj/u6/q0kju6hj8o-ujapfibearqcsrhg.gif"><br><br>  Cada vez que aparece un art√≠culo sobre un nuevo mensajero, la mayor√≠a de los usuarios de Habr est√°n interesados ‚Äã‚Äãen comentarios: ¬ømensajer√≠a instant√°nea centralizada o descentralizada? <br><br>  Si no, entonces, "todos los chicos est√°n divergiendo". <br><br>  Muchos tambi√©n mencionan la descentralizaci√≥n de Skype como un ejemplo, lo que implica lo que era antes de 2011. <br><br>  Entonces, como delineador e introducci√≥n a la idea principal del art√≠culo, consideremos qu√© era Skype en sus a√±os dorados, antes de la compra de Microsoft. <br><a name="habracut"></a><br>  Entonces, aqu√≠ est√° la estructura de una red descentralizada peer-to-peer Skype: <br><br><img src="https://habrastorage.org/webt/cp/hf/gs/cphfgsjar-muqhcmrpjhlpx9ylu.jpeg"><br><br>  Como vemos, los clientes est√°n conectados principalmente a trav√©s del llamado supernodo. <br><br>  ¬øQu√© son los supernodos y por qu√© los necesitaba Skype? <br>  ¬øQu√© tan puro P2P? <br>  ¬øPor qu√© no pueden conectar usuarios directamente entre s√≠, ya que es P2P? <br><br><img src="https://habrastorage.org/webt/pz/uj/ch/pzujchomcbkonmn9uw5orujs0ns.jpeg"><br><br>  Para responder a la pregunta de por qu√© se necesitaba un supernodo, debe recordar qu√© era Skype en ese momento. <br><br>  Y √©l era un "marcador" entre los usuarios, primero con llamadas de audio, y luego con video. <br>  Y aqu√≠ hab√≠a un problema: la mayor√≠a de los usuarios se sentaban bajo NAT, y a veces bajo NAT doble, triple, y en tales condiciones es casi imposible establecer comunicaci√≥n de audio y especialmente de video si los conecta directamente. <br><br>  En t√©rminos generales, estos supernodos desempe√±aron el papel de una especie de servidor TURN, que se dedicaba a la se√±alizaci√≥n y la transmisi√≥n del tr√°fico, "perforando" NAT y conectando a los usuarios. <br>  Nuevamente, esto es importante principalmente para las llamadas de audio y video. <br><br>  Los nodos se convirtieron en computadoras con direcciones IP blancas, lo suficientemente potentes como para sentarse en canales anchos, a medida que el tr√°fico de medios de comunicaci√≥n los atravesaba. <br><br>  Adem√°s, se convirtieron en nodos, completamente inconscientes de esto: los usuarios de los nodos a veces solo m√°s tarde descubrieron que su computadora de repente comenz√≥ a consumir y dar una gran cantidad de tr√°fico. <br><br>  Todo esto se parec√≠a a alg√∫n tipo de virus, lo cual no es sorprendente: hab√≠a una opini√≥n de que Skype fue hecho por ex hackers que previamente hab√≠an hecho intercambiadores piratas y esto encajaba completamente en su enfoque para resolver problemas. <br><br>  Pero no profundizaremos en este tema. <br><br>  En cambio, veamos c√≥mo funciona ... comunicaciones telef√≥nicas regulares: <br><br><img src="https://habrastorage.org/webt/ay/ms/p0/aymsp0elsjby5pso--ejt92pwlc.gif"><br><br>  El diagrama anterior describe el principio de funcionamiento de la red telef√≥nica p√∫blica, la llamada PSTN o el t√©rmino internacional, PSTN (Red telef√≥nica p√∫blica conmutada). <br><br>  Y aunque este diagrama muestra lo que sucedi√≥ durante la √©poca dorada de PSTN (70s-80s-principios de los 90), todo funciona de la misma manera ahora. <br><br>  La tecnolog√≠a ha cambiado, los gigantes se han ido (Alcatel, Nortel, etc.), pero el principio en s√≠ ha permanecido. <br><br>  Mirando la figura, puede encontrar los nodos: estos son PBX de ciudad, a los que est√°n conectados ciertos suscriptores, que tienen prefijos de las PBX y supernodo correspondientes: PBX de larga distancia. <br><br>  Todos los nodos (ATS) pueden comunicarse entre s√≠ y suscriptores entre s√≠, solo a trav√©s de dichos nodos. <br><br>  ¬øResulta que la red PSTN tambi√©n es una red P2P descentralizada, construida de la misma manera que Skype (o viceversa)? <br><br>  Lo m√°s probable es que sea as√≠. <br><br>  Y esto es f√°cil de ver, por ejemplo, cuando una PBX tiene pocos canales de acceso a la PBX de otra ciudad, entonces en la hora pico (CNN - horas ocupadas) es dif√≠cil o imposible que los suscriptores de una PBX lleguen a otra, pero al mismo tiempo, los suscriptores de la misma Las PBX se pueden marcar entre s√≠ sin problemas. <br><br>  Ahora no hay tal problema, porque  Las estaciones est√°n conectadas entre s√≠ por amplios canales y en todas partes una figura, pero hasta ese momento esto hab√≠a sucedido todo el tiempo. <br><br>  Por lo tanto, hemos determinado que una red telef√≥nica moderna (PSTN o PSTN) es una red P2P descentralizada. <br><br>  Surge una pregunta natural: si se trata de P2P, ¬øpodemos ser miembros de esta red descentralizada (aumentar nuestro servidor, etc.)? <br><br>  Por supuesto! <br><br>  ¬øQu√© se necesita para esto y c√≥mo se hace (supongamos que tiene mucho dinero y que es una empresa relativamente grande)? <br><br>  Los pasos principales: <br><br>  - Debe convertirse en un operador de comunicaci√≥n local, regional o de larga distancia. <br>  Para hacer esto, debe obtener una licencia apropiada del regulador, aunque en algunos pa√≠ses esto no es obligatorio. <br><br>  Para simplificar, considere un ejemplo en el que desea convertirse en un operador de comunicaciones local, es decir,  elevar un nodo de ciudad simple. <br><br>  - Debe obtener un grupo de n√∫meros de tel√©fono asignados geogr√°ficamente al lugar donde coloca su nodo (central telef√≥nica). <br><br>  Esta piscina tambi√©n le da al regulador. <br><br>  Cita: <br><br>  <i>"... Existe una recomendaci√≥n del UIT-T, E.164, que define un plan com√∫n de numeraci√≥n de telecomunicaciones internacionales utilizado en redes telef√≥nicas p√∫blicas y algunas otras redes.</i>  <i>Los n√∫meros E.164 consonantes pueden tener un m√°ximo de 15 d√≠gitos y generalmente se escriben con el prefijo "+".</i> <i><br><br></i>  <i>Las "Reglas para la prestaci√≥n de servicios telef√≥nicos" rusas [2] definen el n√∫mero de suscriptor como "el n√∫mero asignado al suscriptor al concluir el contrato para la prestaci√≥n de servicios telef√≥nicos, mediante el cual el dispositivo suscriptor conectado a la red telef√≥nica se identifica cuando otros dispositivos suscriptores est√°n conectados a √©l".</i>  <i>En Rusia, el regulador en el campo de los n√∫meros de tel√©fono es el Ministerio de Comunicaciones (en particular, la Agencia Federal de Comunicaciones) ... "</i> <br><br>  - Una vez recibido el conjunto de n√∫meros, debe compilar y poner en servicio el nodo PSTN.  Omitiremos todos los detalles que necesita para tener SORM, etc. <br><br>  Todos estos son problemas de organizaci√≥n, no nos detendremos en ellos en detalle, especialmente porque tambi√©n son diferentes en diferentes pa√≠ses. <br><br>  En cambio, resumimos brevemente los puntos t√©cnicos. <br><br>  En primer lugar, ahora todos los operadores, tanto grandes como peque√±os, hacen estaciones en equipos VOIP. <br><br>  Es decir  se compra una estaci√≥n de hierro especializada con VOIP o se est√° creando un paquete de software: un servidor con un software especializado tipo Broadcom clase 5 o incluso un asterisco dopado hasta la clase 5, etc. <br><br>  Conectando suscriptores. <br><br>  Aqu√≠ tambi√©n todo es simple: se instalan puertas de enlace VOIP con puertos FXS, en los que los suscriptores pueden conectar tel√©fonos comunes o tel√©fonos IP, mini PBX IP para usuarios comerciales o clientes de software (por ejemplo, para centros de llamadas), etc. <br><br>  Algunas compa√±√≠as conectan a los usuarios usando PBX IP virtuales, porque PBX, pero el principio es el mismo. <br><br>  A continuaci√≥n, debe registrar su grupo de tel√©fonos con todos los participantes en esta red compartida; para esto, cada regulador u operador dominante env√≠a una carta oficial a cada propietario de otra estaci√≥n (nodo) en esta red compartida: haga una ruta con dichos n√∫meros a una PBX de nuestro nuevo colega. <br><br>  Y en consecuencia, debe registrar rutas salientes en su estaci√≥n (nodo) de acuerdo con ciertas reglas. <br><br>  Incluso en la Federaci√≥n de Rusia, existe una regla que establece que, al conectar a un suscriptor, debe tomar los datos del pasaporte, el registro, etc. <br><br>  En principio, casi todo lo hacen tambi√©n los operadores m√≥viles. <br><br>  Y luego comienza la parte comercial: gana dinero vendiendo dichos n√∫meros por una tarifa mensual y cobrando una tarifa por llamadas entre monta√±as o internacionales, que, a su vez, compra de un nodo superior, etc. <br><br>  <b>¬øPor qu√© estamos todos hablando con tanto detalle?</b> <br><br>  El hecho es que tenemos una plataforma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">(M1 Messenger)</a> , que, por un lado, es un mensajero descentralizado y, por otro lado, se puede definir como una red telef√≥nica de nueva generaci√≥n. <br><br>  <b>Y lo m√°s importante, para agregar un nodo a dicha red, no se necesitan licencias, ni obtener n√∫meros E164, ni ning√∫n otro permiso, porque no hay acceso a la PSTN.</b> <br><br>  Es decir  usted mismo puede ser agregado a dicha red absolutamente en cualquier momento, usted mismo y convertirse en un nodo independiente, un nodo en la red M1 Messenger. <br><br>  Puede agregar f√°cil y simplemente sus estaciones IP, peque√±as oficinas y grandes proveedores a esta plataforma, y ‚Äã‚Äãtodas las estaciones pueden comunicarse entre s√≠ y con los usuarios comunes del messenger: <br><br><img src="https://habrastorage.org/webt/yb/oa/go/yboagoggx3vn9i_fdexznw5pzye.png"><br><br>  Esta versatilidad se debe al hecho de que la plataforma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M1 Messenger</a> admite el protocolo SIP. <br><br>  Cada usuario recibe un inicio de sesi√≥n al registrarse, as√≠ como un SIP URI, es decir, recibe 2 identificadores a la vez. <br><br>  Gracias al inicio de sesi√≥n, la interacci√≥n se lleva a cabo dentro de los usuarios de messenger y las comunicaciones salientes hacia el exterior, es decir, a las IP PBX conectadas, y gracias al SIP URI, se puede acceder a cada usuario para las llamadas entrantes desde cualquier red compatible con SIP. <br><br>  Considera la figura. <br><br>  Aqu√≠ las PBX IP bajo las letras A, B y C est√°n conectadas a la plataforma a trav√©s del enlace troncal SIP, es decir, estas PBX est√°n registradas en la plataforma. <br><br>  El n√∫mero de conversaciones simult√°neas en dicho enlace troncal, as√≠ como el n√∫mero de enlaces troncales por IP PBX, no est√° limitado. <br><br>  Por lo tanto, los usuarios como IP PBX bajo la letra A pueden tener su numeraci√≥n interna, y para las llamadas a IP PBX bajo las letras B y C, usan su SIP URI. <br>  Las llamadas entrantes de otros intercambios o del mensajero pueden ser procesadas por dichos intercambios de dos maneras diferentes: <br><br>  - Como el √∫nico n√∫mero (n√∫mero de serie) que va, por ejemplo, al IVR est√°ndar y luego de acuerdo con el algoritmo establecido. <br><br>  - A cada usuario dentro de un IP PBX de un tercero se le puede asignar su propia troncal y enrutarlo mediante PBX. <br><br>  Por lo tanto, cada usuario de PBX puede recibir una llamada destinada solo para √©l por parte de los usuarios de la plataforma. <br><br>  Adem√°s, debido al hecho de que todos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">los</a> usuarios de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mensajer√≠a instant√°nea</a> reciben URI SIP a la vez, es f√°cil obtener n√∫meros entrantes de proveedores de n√∫meros virtuales (DID). <br><br>  El n√∫mero de n√∫meros entrantes asociados con el inicio de sesi√≥n tampoco est√° limitado. <br><br>  <b>Conexi√≥n de equipos.</b> <br><br>  Actualmente, pr√°cticamente no hay mensajeros que conecten el equipo a su red. <br><br>  El √∫ltimo fue Skype. <br><br>  Por ejemplo, en 2012, se anunci√≥ un tel√©fono DECT con soporte de Skype: <br><br><img src="https://habrastorage.org/webt/or/nf/lh/ornflhn9elizzvbpbx03pyvwopo.jpeg"><br><br>  Antes de esto, se vendi√≥ un tel√©fono de escritorio con soporte de Skype: <br><br><img src="https://habrastorage.org/webt/3n/cu/r5/3ncur5q_9xzklikfr7ioq-f7nqc.jpeg"><br><br>  Hace aproximadamente un a√±o, Skype anunci√≥ que no admitir√≠a dichos tel√©fonos y que de todos los usuarios que los compraron antes, todos se convirtieron en una calabaza. <br><br>  Por el contrario, se puede conectar absolutamente cualquier tel√©fono IP (incluido un tel√©fono de video) o una puerta de enlace VOIP a la plataforma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M1 Messenger</a> : <br><br><img src="https://habrastorage.org/webt/co/m3/kl/com3klkzkdb7xnrzeubliwh27im.jpeg"><br><br><img src="https://habrastorage.org/webt/yf/ym/f6/yfymf6z_qkeb68analedmwp_p-o.jpeg"><br><br><img src="https://habrastorage.org/webt/2i/cd/il/2icdilwhf5a9nz-3lrc504r81wg.jpeg"><br><br>  Esto no es un concepto; todo ya funciona. <br><br>  Por lo tanto, cualquier IP PBX puede conectarse a la plataforma, as√≠ como a cualquier equipo VOIP. <br><br>  Para conectarse, simplemente descargue el messenger, reg√≠strese y vaya a la pesta√±a del equipo SIP: <br><br><img src="https://habrastorage.org/webt/vn/u0/a1/vnu0a1frdqgmgwbl7iggnipj1zy.jpeg"><br><br>  Usando 3 par√°metros: inicio de sesi√≥n, contrase√±a y direcci√≥n del servidor: <br><br><img src="https://habrastorage.org/webt/9p/ud/cz/9pudczpigho6qsnfosqjpegi-tk.jpeg"><br><br>  Puede conectar IP PBX o cualquier hardware VOIP. <br><br>  Y usando SIP URI, como <b>digital login@sip1.m1online.net,</b> cualquier usuario o IP PBX conectado o equipo conectado puede recibir llamadas VOIP desde cualquier red VOIP, incluso si esta red no est√° conectada a la plataforma M1 (por ejemplo, proveedores de n√∫meros DID virtuales, etc. d.) <br><br>  Por lo tanto, se obtiene una red que no obedece a la regulaci√≥n en ning√∫n lado, pero que al mismo tiempo se puede conectar a IP PBX existentes, y no importa qu√© equipo se use, ya sea un peque√±o Atserisk o una PBX en caja o una estaci√≥n grande de un operador grande. <br><br>  Y lo m√°s interesante es que las llamadas en dicha red no se cobran en absoluto, y se realizan directamente, sin pasar por n√∫meros de tel√©fono emitidos oficialmente. <br><br>  Resulta una red de comunicaci√≥n, que no depende de nadie y que est√° abierta a la conexi√≥n de cualquier usuario, ya sean particulares, empresas con sus usuarios o grandes operadores. <br>  Sin reguladores, sin SORM, sin n√∫meros de tel√©fono e164 que pueda perder o quitarle. <br>  Y sin tarifas mensuales y tarifas por minuto de conversaci√≥n. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es420811/">https://habr.com/ru/post/es420811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es420797/index.html">El aprendizaje no puede posponerse</a></li>
<li><a href="../es420799/index.html">MPS 2018.2: Pruebas de generador, Complemento GitHub, Aspecto VCS, Notificaciones de migraci√≥n y m√°s</a></li>
<li><a href="../es420803/index.html">Lecciones de impresi√≥n 3D. Ahorro de pl√°stico al imprimir modelos no funcionales desde 3Dtool</a></li>
<li><a href="../es420805/index.html">[Traducci√≥n] Cu√°ndo usar flujos paralelos</a></li>
<li><a href="../es420809/index.html">Semana de la seguridad 31: Cincuenta sombras de inseguridad en Android</a></li>
<li><a href="../es420813/index.html">Redes de backstage en Kubernetes</a></li>
<li><a href="../es420815/index.html">C√≥mo "decodificar el mundo digital" hizo volar la sala: los 10 mejores informes de DotNext 2018 Piter</a></li>
<li><a href="../es420819/index.html">Las 10 mejores herramientas de Python para aprendizaje autom√°tico y ciencia de datos</a></li>
<li><a href="../es420821/index.html">Regla 10: 1 en programaci√≥n y escritura</a></li>
<li><a href="../es420825/index.html">Hoy ser√° el primer partido entre los profesionales de OpenAI y Dota 2 (la gente gan√≥). Entendemos c√≥mo funciona el bot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>