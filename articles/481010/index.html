<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游눉游 游냒 游눊游낖 16 consejos de desarrollo para Android en Kotlin. Parte 3 游 游녡游 游븸游낗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola de nuevo En previsi칩n del lanzamiento del curso b치sico sobre desarrollo de Android , compartimos la parte final del art칤culo "16 consejos de desa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>16 consejos de desarrollo para Android en Kotlin. Parte 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/481010/">  <i>Hola de nuevo</i>  <i>En previsi칩n del lanzamiento del <a href="https://otus.pw/kbuv/">curso b치sico sobre desarrollo de Android</a> , compartimos la parte final del art칤culo "16 consejos de desarrollo para Android en el idioma Kotlin".</i> <br><br><img src="https://habrastorage.org/webt/qn/xg/k9/qnxgk9qbhiou8yuqyxw3if0usme.png"><br><hr><br>  <a href="https://habr.com/ru/company/otus/blog/479406/">Lee la primera parte</a> <br>  <a href="https://habr.com/ru/company/otus/blog/480534/">Lee la segunda parte</a> <br><br><h3>  LATEINIT </h3><br>  Una de las caracter칤sticas principales de Kotlin es su compromiso con la seguridad cero.  La declaraci칩n de lateinit proporciona una manera f치cil de garantizar cero seguridad e inicializar la variable seg칰n lo requiera Android.  Esta caracter칤stica es excelente, sin embargo, debe acostumbrarse despu칠s de trabajar en Java.  Una idea es que el campo se declare inmediatamente con la capacidad de ser nulo: <br><br><pre><code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> total = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> toolbar: Toolbar? = <span class="hljs-literal"><span class="hljs-literal">null</span></span></code> </pre> <br><a name="habracut"></a><br>  Esta funci칩n de lenguaje puede causar dificultades al trabajar con dise침os de Android, porque no sabemos c칩mo declarar vistas antes de declarar el dise침o, porque no est치 claro d칩nde existir치n en <code>Activity</code> o <code>Fragment</code> .  Esto se compensa con pruebas adicionales para la posibilidad de un valor cero en cada lugar con el que interactuamos, pero este sigue siendo hemorroides.  Por lo tanto, es mejor usar el modificador <code>lateinit</code> : <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> toolbar: Toolbar</code> </pre> <br>  Ahora, como desarrollador, no debe consultar la Barra de herramientas hasta que se haya inicializado.  Esto funciona muy bien cuando se usa junto con una biblioteca como <a href="https://github.com/JakeWharton/butterknife">Butter Knife</a> : <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@BindView(R.id.toolbar)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> toolbar: Toolbar <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContentView(R.layout.activity_main) ButterKnife.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-comment"><span class="hljs-comment">//       toolbar toolbar.setTitle("Hello There") }</span></span></code> </pre> <br><h3>  Tipo de seguridad </h3><br>  Algunas convenciones de Android requieren una escritura segura porque la escritura regular no excluye errores de c칩digo.  Por ejemplo, una forma t칤pica de crear un fragmento en acci칩n implica verificar a trav칠s del FragmentManager para asegurarse de que ya existe.  Y solo si no es as칤, lo crea y lo agrega a la acci칩n.  Cuando veas c칩mo escribir en Kotlin por primera vez, puedes implementar esto de la siguiente manera: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> feedFragment: FeedFragment? = supportFragmentManager .findFragmentByTag(TAG_FEED_FRAGMENT) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> FeedFragment      .  <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>     ,     .   : <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> feedFragment: FeedFragment? = supportFragmentManager .findFragmentByTag(TAG_FEED_FRAGMENT) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? FeedFragment <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (feedFragment == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { feedFragment = FeedFragment.newInstance() supportFragmentManager.beginTransaction() .replace(R.id.root_fragment, feedFragment, TAG_FEED_FRAGMENT) .commit() }</code> </pre> <br><h3>  APROVECHAMIENTO </h3><br>  Aprovechar let le permite ejecutar un bloque si el valor del objeto no es cero.  Esto le permite evitar verificaciones nulas y hace que el c칩digo sea m치s legible.  En Java, se ve as칤: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentUser != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { text.setText(currentUser.name) }   Kotlin   : user?.let { println(it.name) }</code> </pre> <br>  Este c칩digo es mucho m치s legible, adem치s crea autom치ticamente una variable con un valor distinto de cero sin el riesgo de ponerlo a cero. <br><br><h3>  SNULLOREMPTY |  ISNULLORBLANK </h3><br>  Tenemos que verificar los campos muchas veces durante el desarrollo de la aplicaci칩n de Android.  Si logr칩 esto sin usar Kotlin, probablemente conozca la clase TextUtils en Android.  La clase TextUtils es la siguiente: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TextUtils.isEmpty(name)) { <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code> </pre> <br>  En este ejemplo, notar치 que el usuario puede establecer incluso solo espacios como nombre de usuario, y pasar치 la prueba.  <code>isNullOrEmpty</code> e <code>isNullOrBlank</code> est치n integrados en el lenguaje Kotlin, eliminan la necesidad de <code>TextUtils.isEmpty</code> ( <code>someString</code> ) y brindan el beneficio adicional de verificar solo espacios.  Si es necesario, puede usar algo como esto: <br><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">//       ... if (number.isNullOrEmpty()) { //     } //  ... if (name.isNullOrBlank()) { //     }</span></span></code> </pre> <br>  La comprobaci칩n de la correcci칩n de completar los campos a menudo se encuentra cuando el registro es necesario en la aplicaci칩n.  Estos m칠todos integrados son excelentes para verificar el campo y alertar al usuario si algo est치 mal.  Para verificaciones m치s complejas, puede usar m칠todos de extensi칩n, por ejemplo, para direcciones de correo electr칩nico: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> TextInputLayout.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValidForEmail</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> input = editText?.text.toString() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (input.isNullOrBlank()) { error = resources.getString(R.string.required) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (emailPattern.matcher(input).matches()) { error = resources.getString(R.string.invalid_email) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { error = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><h3>  Consejos para el avanzado </h3><br>  쯉ab칤a que puede usar expresiones lambda para crear c칩digo m치s limpio y conciso? <br><br>  Por ejemplo, cuando se trabaja en Java, es t칤pico tener una clase de escucha simple, como: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnClickListener</span></span></span><span class="hljs-class"> </span></span>{ void onClick(View v); }</code> </pre> <br>  Una caracter칤stica distintiva de Kotlin es que realiza conversiones SAM (M칠todo abstracto 칰nico) para clases Java.  Un escucha de clics en Java que se parece a: <br><br><pre> <code class="kotlin hljs">textView.setOnClickListener(new View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> void onClick(View view) { <span class="hljs-comment"><span class="hljs-comment">// -  } });  Kotlin     : textView.setOnClickListener { view -&gt; // -  }</span></span></code> </pre> <br>  Por extra침o que parezca, tal conversi칩n no es posible para las interfaces SAM creadas en Kotlin.  Esto puede sorprender e incluso decepcionar un poco a los nuevos usuarios de Kotlin.  Si se definiera la misma interfaz en Kotlin, el oyente se ver칤a as칤: <br><br><pre> <code class="kotlin hljs">view.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : OnClickListener { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">View</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// -  } })</span></span></code> </pre> <br>  Para acortar dicho c칩digo, puede escribir a sus oyentes en la clase de la siguiente manera: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onClickListener: ((View) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setOnClickListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(listener: (</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">view</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">View</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span>) { onClickListener = listener } <span class="hljs-comment"><span class="hljs-comment">//     onClickListener?.invoke(this)</span></span></code> </pre> <br>  Esto lo devolver치 a una sintaxis lambda simple que hace posible la conversi칩n autom치tica de SAM. <br><br><h3>  Conclusi칩n </h3><br>  Recopil칠 los trucos de vida m치s 칰tiles de todo lo que he aprendido desde que me interes칠 en el idioma Kotlin.  Espero que el conocimiento de estos consejos lo ayude significativamente a desarrollar sus propios proyectos. <br><br>  Eso es todo.  춰Nos vemos en el <a href="https://otus.pw/kbuv/">curso</a> ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/481010/">https://habr.com/ru/post/481010/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../480992/index.html">Sobre la profesi칩n de gerente de producto: 쯖칩mo lograr el ideal? (parte 2)</a></li>
<li><a href="../480996/index.html">Notas de Pentester: casos de caza - 2</a></li>
<li><a href="../480998/index.html">MERCH! MERCH! MERCH! y ... unicornios</a></li>
<li><a href="../481000/index.html">Computaci칩n sin servidor basada en OpenWhisk, parte 4</a></li>
<li><a href="../481004/index.html">Java Digest para el 18 de diciembre</a></li>
<li><a href="../481012/index.html">Lo que aprend칤 en 10 a침os en Stack Overflow</a></li>
<li><a href="../481014/index.html">Yo / NOSOTROS no somos anfitriones de Ayhor. O c칩mo escupir en la industria</a></li>
<li><a href="../481016/index.html">Experimento VonmoTrade. Parte 1: intercambios y tecnolog칤a moderna</a></li>
<li><a href="../481018/index.html">Y nuevamente sobre la protecci칩n de las infraestructuras virtuales.</a></li>
<li><a href="../481020/index.html">Escribir un simulador de escritura t치ctil usando JavaScript puro: Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>