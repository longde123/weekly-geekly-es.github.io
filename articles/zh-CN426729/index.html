<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€âœˆï¸ ğŸ‘ğŸ» ğŸš· TypeScripté­”æœ¯å­¦æ ¡ï¼šæ³›å‹å’Œç±»å‹æ‰©å±• ğŸœï¸ â“ ğŸ‘ŠğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘ä»¬ä»Šå¤©ç¿»è¯‘çš„æ–‡ç« çš„ä½œè€…è¯´TypeScriptéå¸¸æ£’ã€‚ åˆšå¼€å§‹ä½¿ç”¨TSæ—¶ï¼Œä»–çœŸçš„å¾ˆå–œæ¬¢è¿™ç§è¯­è¨€å›ºæœ‰çš„è‡ªç”±ã€‚ ç¨‹åºå‘˜åœ¨ä½¿ç”¨TSç‰¹å®šâ€‹â€‹çš„æœºåˆ¶ä¸ŠæŠ•å…¥çš„ç²¾åŠ›è¶Šå¤šï¼Œä»–å°†è·å¾—çš„åˆ©ç›Šå°±è¶Šå¤§ã€‚ ç„¶åï¼Œä»–ä»…å®šæœŸä½¿ç”¨ç±»å‹æ³¨é‡Šã€‚ æœ‰æ—¶ä»–ä¼šåˆ©ç”¨ä»£ç å®Œæˆå’Œç¼–è¯‘å™¨æç¤ºçš„æœºä¼šï¼Œä½†ä¸»è¦æ˜¯ä¾é è‡ªå·±å¯¹è§£å†³ä»»åŠ¡çš„çœ‹æ³•ã€‚ 

 éšç€æ—¶é—´...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TypeScripté­”æœ¯å­¦æ ¡ï¼šæ³›å‹å’Œç±»å‹æ‰©å±•</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/426729/">æˆ‘ä»¬ä»Šå¤©ç¿»è¯‘çš„æ–‡ç« çš„ä½œè€…è¯´TypeScriptéå¸¸æ£’ã€‚ åˆšå¼€å§‹ä½¿ç”¨TSæ—¶ï¼Œä»–çœŸçš„å¾ˆå–œæ¬¢è¿™ç§è¯­è¨€å›ºæœ‰çš„è‡ªç”±ã€‚ ç¨‹åºå‘˜åœ¨ä½¿ç”¨TSç‰¹å®šâ€‹â€‹çš„æœºåˆ¶ä¸ŠæŠ•å…¥çš„ç²¾åŠ›è¶Šå¤šï¼Œä»–å°†è·å¾—çš„åˆ©ç›Šå°±è¶Šå¤§ã€‚ ç„¶åï¼Œä»–ä»…å®šæœŸä½¿ç”¨ç±»å‹æ³¨é‡Šã€‚ æœ‰æ—¶ä»–ä¼šåˆ©ç”¨ä»£ç å®Œæˆå’Œç¼–è¯‘å™¨æç¤ºçš„æœºä¼šï¼Œä½†ä¸»è¦æ˜¯ä¾é è‡ªå·±å¯¹è§£å†³ä»»åŠ¡çš„çœ‹æ³•ã€‚ <br><br> éšç€æ—¶é—´çš„æµé€ï¼Œè¯¥ææ–™çš„ä½œè€…æ„è¯†åˆ°ï¼Œæ¯æ¬¡ç»•è¿‡åœ¨ç¼–è¯‘é˜¶æ®µæ£€æµ‹åˆ°çš„é”™è¯¯æ—¶ï¼Œä»–éƒ½ä¼šåœ¨ä»£ç ä¸­æ”¾ç½®ä¸€ä¸ªå®šæ—¶ç‚¸å¼¹ï¼Œè¯¥ç‚¸å¼¹å¯èƒ½åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´çˆ†ç‚¸ã€‚ æ¯æ¬¡ä»–ä½¿ç”¨<code>as any</code>ä¸€ç§ç®€å•çš„ç»“æ„æ¥â€œåŠªåŠ›â€è§£å†³é”™è¯¯æ—¶ï¼Œä»–éƒ½ä¸å¾—ä¸èŠ±å¾ˆå¤šæ—¶é—´è¿›è¡Œè‰°è‹¦çš„è°ƒè¯•ã€‚ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/8x/yn/4p/8xyn4p7bv34meq9s1o9k1i-hy0e.jpeg"></a> <br><br> ç»“æœï¼Œä»–å¾—å‡ºçš„ç»“è®ºæ˜¯æœ€å¥½ä¸è¦è¿™æ ·åšã€‚ ä»–ä¸ç¼–è¯‘å™¨äº¤äº†æœ‹å‹ï¼Œå¼€å§‹æ³¨æ„ä»–çš„æç¤ºã€‚ ç¼–è¯‘å™¨ä¼šåœ¨ä»£ç ä¸­å‘ç°é—®é¢˜ï¼Œå¹¶åœ¨å¯èƒ½é€ æˆçœŸæ­£å±å®³ä¹‹å‰å°±å°†å…¶æŠ¥å‘Šã€‚ è¯¥æ–‡ç« çš„ä½œè€…å°†è‡ªå·±è§†ä¸ºå¼€å‘äººå‘˜ï¼Œä»–æ„è¯†åˆ°ç¼–è¯‘å™¨æ˜¯ä»–æœ€å¥½çš„æœ‹å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¿æŠ¤ä»–å…å—è‡ªå·±çš„ä¾µå®³ã€‚ æ€èƒ½ä¸å›æƒ³èµ·é˜¿ä¸æ€Â·é‚“å¸ƒåˆ©å¤šçš„è¯ï¼šâ€œä¸æ•Œäººå¤§å£°è¯´è¯éœ€è¦å¾ˆå¤§çš„å‹‡æ°”ï¼Œä½†ä¸æœ‹å‹å¤§å£°è¯´è¯è‡³å°‘è¦æœ‰å‹‡æ°”ã€‚â€ <br><br> ä¸ç®¡ç¼–è¯‘å™¨æœ‰å¤šå¥½ï¼Œéƒ½ä¸æ€»æ˜¯å¾ˆå®¹æ˜“å–æ‚¦ã€‚ æœ‰æ—¶ï¼Œé¿å…ä½¿ç”¨<code>any</code>ç±»å‹éå¸¸å›°éš¾ã€‚ æœ‰æ—¶ä¼¼ä¹<code>any</code>éƒ½æ˜¯è§£å†³æŸäº›é—®é¢˜çš„å”¯ä¸€åˆç†æ–¹æ³•ã€‚ <br><br> æœ¬ææ–™é‡ç‚¹ä»‹ç»ä¸¤ç§æƒ…å†µã€‚ é€šè¿‡é¿å…åœ¨å…¶ä¸­ä½¿ç”¨<code>any</code>ç±»å‹ï¼Œå¯ä»¥ç¡®ä¿ä»£ç çš„ç±»å‹å®‰å…¨æ€§ï¼Œæ‰“å¼€å…¶é‡ç”¨çš„å¯èƒ½æ€§å¹¶ä½¿å…¶ç›´è§‚ã€‚ <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">æ³›å‹</font> </h2><br> å‡è®¾æˆ‘ä»¬æ­£åœ¨å¤„ç†å­¦æ ¡çš„æ•°æ®åº“ã€‚ æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„è¾…åŠ©å‡½æ•°<code>getBy</code> ã€‚ ä¸ºäº†è·å¾—ä»£è¡¨å­¦ç”Ÿå§“åçš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>getBy(model, "name", "Harry")</code>å½¢å¼çš„å‘½ä»¤<code>getBy(model, "name", "Harry")</code> ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ç§æœºåˆ¶çš„å®ç°ï¼ˆè¿™é‡Œï¼Œä¸ºäº†ä¸ä½¿ä»£ç å¤æ‚åŒ–ï¼Œæ•°æ®åº“ç”±ä¸€ä¸ªæ™®é€šæ•°ç»„è¡¨ç¤ºï¼‰ã€‚ <br><br><pre> <code class="hljs powershell">type Student = { name: string; age: number; hasScar: boolean; }; const students: Student[] = [ { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Harry"</span></span>, <span class="hljs-type"><span class="hljs-type">age</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-type"><span class="hljs-type">hasScar</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span> }, { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Ron"</span></span>, <span class="hljs-type"><span class="hljs-type">age</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-type"><span class="hljs-type">hasScar</span></span>: <span class="hljs-type"><span class="hljs-type">false</span></span> }, { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Hermione"</span></span>, <span class="hljs-type"><span class="hljs-type">age</span></span>: <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-type"><span class="hljs-type">hasScar</span></span>: <span class="hljs-type"><span class="hljs-type">false</span></span> } ]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model, prop, value)</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] }</code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å‡½æ•°ï¼Œä½†æ˜¯å®ƒä¸ä½¿ç”¨ç±»å‹æ³¨é‡Šï¼Œè€Œä¸”å®ƒä»¬çš„ç¼ºå¤±ä¹Ÿæ„å‘³ç€æ­¤ç±»å‡½æ•°ä¸èƒ½ç§°ä¸ºç±»å‹å®‰å…¨çš„ã€‚ ä¿®å¤å®ƒã€‚ <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model: Student[], prop: string, value)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Student</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || null } const result = getBy(students, <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hermione"</span></span>) // result: Student</code> </pre> <br> æ‰€ä»¥æˆ‘ä»¬çš„åŠŸèƒ½çœ‹èµ·æ¥å·²ç»å¥½å¤šäº†ã€‚ ç°åœ¨ï¼Œç¼–è¯‘å™¨çŸ¥é“é¢„æœŸçš„ç»“æœç±»å‹ï¼Œè¿™å°†åœ¨ä»¥åæ´¾ä¸Šç”¨åœºã€‚ ä½†æ˜¯ï¼Œä¸ºäº†å®ç°ä½¿ç”¨ç±»å‹çš„å®‰å…¨å·¥ä½œï¼Œæˆ‘ä»¬ç‰ºç‰²äº†é‡ç”¨è¯¥åŠŸèƒ½çš„å¯èƒ½æ€§ã€‚ å¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨å®ƒæ¥è·å–å…¶ä»–å®ä½“æ€ä¹ˆåŠï¼Ÿ ä¸å¯èƒ½ä¸èƒ½ä»¥ä»»ä½•æ–¹å¼æ”¹è¿›æ­¤åŠŸèƒ½ã€‚ ç¡®å®æ˜¯ã€‚ <br><br> ä¸å…¶ä»–å¼ºç±»å‹è¯­è¨€ä¸€æ ·ï¼Œåœ¨TypeScriptä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›å‹ï¼Œä¹Ÿç§°ä¸ºâ€œæ³›å‹â€ï¼Œâ€œé€šç”¨ç±»å‹â€ï¼Œâ€œæ³›åŒ–â€ã€‚ <br><br> æ³›å‹ç±»ä¼¼äºå¸¸è§„å˜é‡ï¼Œä½†æ˜¯å®ƒåŒ…å«ä¸€äº›ç±»å‹å®šä¹‰ï¼Œè€Œä¸æ˜¯æŸä¸ªå€¼ã€‚ æˆ‘ä»¬é‡å†™å‡½æ•°çš„ä»£ç ï¼Œä»¥ä¾¿ä½¿ç”¨é€šç”¨ç±»å‹<code>T</code>ä»£æ›¿<code>Student</code>ç±»å‹<code>T</code> <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBy</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model: T[], prop: string, value)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] } const result = getBy&lt;Student&gt;(students, <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hermione"</span></span>) // result: Student</code> </pre> <br> ç¾å¥³ï¼ ç°åœ¨ï¼Œè¯¥åŠŸèƒ½éå¸¸é€‚åˆé‡ç”¨ï¼Œè€Œç±»å‹å®‰å…¨æ€§ä»åœ¨æˆ‘ä»¬è¿™è¾¹ã€‚ è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µçš„æœ€åä¸€è¡Œä¸­ï¼Œä½¿ç”¨é€šç”¨<code>T</code>çš„<code>Student</code>ç±»å‹æ˜¯å¦‚ä½•æ˜ç¡®è®¾ç½®çš„ã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†ä½¿ç¤ºä¾‹å°½å¯èƒ½æ¸…æ™°ï¼Œä½†å®é™…ä¸Šï¼Œç¼–è¯‘å™¨å¯ä»¥ç‹¬ç«‹æ´¾ç”Ÿæ‰€éœ€çš„ç±»å‹ï¼Œå› æ­¤åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸è¿›è¡Œæ­¤ç±»ç±»å‹ä¼˜åŒ–ã€‚ <br><br> å› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬æœ‰äº†é€‚åˆé‡ç”¨çš„å¯é è¾…åŠ©å‡½æ•°ã€‚ ä½†æ˜¯ï¼Œå®ƒä»ç„¶å¯ä»¥æ”¹è¿›ã€‚ å¦‚æœè¾“å…¥ç¬¬äºŒä¸ªå‚æ•°æ—¶å‡ºé”™ï¼Œè€Œä¸æ˜¯<code>"name"</code>å‡ºç°<code>"naem"</code>æ€ä¹ˆåŠï¼Ÿ è¯¥å‡½æ•°çš„è¡Œä¸ºå°±åƒæ‚¨è¦æ‰¾çš„å­¦ç”Ÿæ ¹æœ¬ä¸åœ¨æ•°æ®åº“ä¸­ä¸€æ ·ï¼Œå¹¶ä¸”æœ€ä¸æ„‰å¿«çš„æ˜¯ï¼Œå®ƒä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯ã€‚ è¿™å¯èƒ½ä¼šå¯¼è‡´é•¿æœŸè°ƒè¯•ã€‚ <br><br> ä¸ºäº†é˜²æ­¢æ­¤ç±»é”™è¯¯ï¼Œæˆ‘ä»¬å¼•å…¥äº†å¦ä¸€ä¸ªé€šç”¨ç±»å‹<code>P</code> æ­¤å¤–ï¼Œå¿…é¡»å°†<code>P</code>ä½œä¸ºç±»å‹<code>T</code>çš„é”®ï¼Œå› æ­¤ï¼Œå¦‚æœåœ¨æ­¤å¤„ä½¿ç”¨<code>Student</code> ï¼Œåˆ™å¿…é¡»å°†<code>P</code>ä½œä¸ºå­—ç¬¦ä¸²<code>"name"</code> ï¼Œ <code>"age"</code>æˆ–<code>"hasScar"</code> ã€‚ è¿™æ˜¯æ“ä½œæ–¹æ³•ã€‚ <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBy</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">P</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyof</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model: T[], prop: P, value)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || null } const result = getBy(students, <span class="hljs-string"><span class="hljs-string">"naem"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hermione"</span></span>) // Error: Argument of type <span class="hljs-string"><span class="hljs-string">'"naem"'</span></span> is not assignable to <span class="hljs-keyword"><span class="hljs-keyword">parameter</span></span> of type <span class="hljs-string"><span class="hljs-string">'"name" | "age" | "hasScar"'</span></span>.</code> </pre> <br> ä½¿ç”¨æ³›å‹å’Œ<code>keyof</code>æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŠ€å·§ã€‚ å¦‚æœåœ¨æ”¯æŒTypeScriptçš„IDEä¸­ç¼–å†™ç¨‹åºï¼Œåˆ™é€šè¿‡è¾“å…¥å‚æ•°å¯ä»¥åˆ©ç”¨è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Œè¿™éå¸¸æ–¹ä¾¿ã€‚ <br><br> ä½†æ˜¯ï¼Œæˆ‘ä»¬å°šæœªå®Œæˆ<code>getBy</code>å‡½æ•°çš„å·¥ä½œã€‚ å¥¹æœ‰ç¬¬ä¸‰ä¸ªè®ºç‚¹ï¼Œæˆ‘ä»¬å°šæœªç¡®å®šã€‚ è¿™æ ¹æœ¬ä¸é€‚åˆæˆ‘ä»¬ã€‚ ç›´åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬ä»æ— æ³•é¢„å…ˆçŸ¥é“åº”è¯¥æ˜¯å“ªç§ç±»å‹ï¼Œå› ä¸ºå®ƒå–å†³äºæˆ‘ä»¬ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„å†…å®¹ã€‚ ä½†æ˜¯ç°åœ¨ï¼Œç”±äºæˆ‘ä»¬æ‹¥æœ‰ç±»å‹<code>P</code> ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŠ¨æ€åœ°æ¨æ–­å‡ºç¬¬ä¸‰ä¸ªå‚æ•°çš„ç±»å‹ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°çš„ç±»å‹æœ€ç»ˆå°†ä¸º<code>T[P]</code> ã€‚ ç»“æœï¼Œå¦‚æœ<code>T</code>æ˜¯<code>Student</code> ï¼Œå¹¶ä¸”<code>P</code>æ˜¯<code>"age"</code> ï¼Œåˆ™<code>T[P]</code>å°†æ˜¯<code>number</code>ç±»å‹ã€‚ <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> getBy&lt;T, P extends keyof T&gt;(model: T[], prop: P, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: T[P]): T | <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(item =&gt; item[prop] === <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> } const result = getBy(students, "age", "17") // Error: Argument <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'"17"'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> assignable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> parameter <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'number'</span></span>. const anotherResult = getBy(students, "hasScar", "true") // Error: Argument <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'"true"'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> assignable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> parameter <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'boolean'</span></span>. const yetAnotherResult = getBy(students, "name", "Harry") //     </code> </pre> <br> æˆ‘å¸Œæœ›ç°åœ¨æ‚¨å¯¹å¦‚ä½•åœ¨TypeScriptä¸­ä½¿ç”¨æ³›å‹æœ‰ä¸€ä¸ªç»å¯¹æ¸…æ™°çš„äº†è§£ï¼Œä½†æ˜¯å¦‚æœæ‚¨æƒ³å¯¹è¦ä½¿ç”¨æ­¤å¤„è®¨è®ºçš„ä»£ç è¿›è¡Œå®éªŒçš„æ‰€æœ‰å†…å®¹è¿›è¡Œå¾ˆå¥½çš„å®éªŒï¼Œåˆ™å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„æŸ¥çœ‹</a> ã€‚ <br><br><h2>  <font color="#3AC1EF">æ‰©å±•ç°æœ‰ç±»å‹</font> </h2><br> æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°éœ€è¦å‘æ— æ³•æ›´æ”¹å…¶ä»£ç çš„æ¥å£æ·»åŠ æ•°æ®æˆ–åŠŸèƒ½çš„éœ€æ±‚ã€‚ æ‚¨å¯èƒ½éœ€è¦æ›´æ”¹æ ‡å‡†å¯¹è±¡ï¼Œä¾‹å¦‚-å‘<code>window</code>å¯¹è±¡æ·»åŠ ä¸€äº›å±æ€§ï¼Œæˆ–æ‰©å±•æŸäº›å¤–éƒ¨åº“ï¼ˆå¦‚<code>Express</code>çš„è¡Œä¸ºã€‚ åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½æ— æ³•ç›´æ¥å½±å“è¦ä½¿ç”¨çš„å¯¹è±¡ã€‚ <br><br> æˆ‘ä»¬å°†é€šè¿‡å°†æ‚¨å·²ç»çŸ¥é“çš„<code>getBy</code>å‡½æ•°æ·»åŠ åˆ°<code>Array</code>åŸå‹ä¸­æ¥è§£å†³è¯¥é—®é¢˜ã€‚ è¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨æ­¤åŠŸèƒ½æ¥æ„å»ºæ›´å‡†ç¡®çš„å¥æ³•æ„é€ ã€‚ ç›®å‰ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨è®¨è®ºæ‰©å±•æ ‡å‡†å¯¹è±¡æ˜¯å¥½æ˜¯åï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¸»è¦ç›®æ ‡æ˜¯ç ”ç©¶æ‰€è€ƒè™‘çš„æ–¹æ³•ã€‚ <br><br> å¦‚æœæˆ‘ä»¬å°è¯•å‘<code>Array</code>åŸå‹æ·»åŠ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°†ä¸ä¼šéå¸¸å–œæ¬¢è¿™æ ·ï¼š <br><br><pre> <code class="hljs powershell">Array.prototype.getBy = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">P</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyof</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(   this: T[],   prop: P,   value: T[P] )</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || null; }; // Error: Property <span class="hljs-string"><span class="hljs-string">'getBy'</span></span> does not exist on type <span class="hljs-string"><span class="hljs-string">'any[]'</span></span>. const bestie = students.getBy(<span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Ron"</span></span>); // Error: Property <span class="hljs-string"><span class="hljs-string">'getBy'</span></span> does not exist on type <span class="hljs-string"><span class="hljs-string">'Student[]'</span></span>. const potionsTeacher = (teachers as any).getBy(<span class="hljs-string"><span class="hljs-string">"subject"</span></span>, <span class="hljs-string"><span class="hljs-string">"Potions"</span></span>) //  ...   ?</code> </pre> <br> å¦‚æœæˆ‘ä»¬å°è¯•é€šè¿‡å®šæœŸä½¿ç”¨<code>as any</code>ç»“æ„æ¥ä¿è¯ç¼–è¯‘å™¨çš„å®‰å…¨ï¼Œåˆ™å°†ä½¿æˆ‘ä»¬æ‰€è·å¾—çš„ä¸€åˆ‡æ— æ•ˆã€‚ ç¼–è¯‘å™¨å°†ä¿æŒæ²‰é»˜ï¼Œä½†æ˜¯æ‚¨å¯ä»¥å¿˜è®°ä½¿ç”¨ç±»å‹çš„å®‰å…¨å·¥ä½œã€‚ <br><br> æœ€å¥½æ‰©å±•<code>Array</code>ç±»å‹ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œæ­¤æ“ä½œä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆè®¨è®ºä¸€ä¸‹TypeScriptå¦‚ä½•å¤„ç†ä»£ç ä¸­å­˜åœ¨ç›¸åŒç±»å‹çš„ä¸¤ä¸ªæ¥å£æ—¶çš„æƒ…å†µã€‚ è¿™é‡Œé‡‡ç”¨äº†ä¸€ç§ç®€å•çš„è¡ŒåŠ¨æ–¹æ¡ˆã€‚ å¦‚æœå¯èƒ½ï¼Œå°†åˆå¹¶å¹¿å‘Šã€‚ å¦‚æœæ— æ³•å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ï¼Œç³»ç»Ÿå°†ç»™å‡ºé”™è¯¯ä¿¡æ¯ã€‚ <br><br> å› æ­¤ï¼Œæ­¤ä»£ç æœ‰æ•ˆï¼š <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Wand</span></span> { length: number } <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Wand</span></span> {   core: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myWand: Wand = { length: <span class="hljs-number"><span class="hljs-number">11</span></span>, core: <span class="hljs-string"><span class="hljs-string">"phoenix feather"</span></span> } <span class="hljs-comment"><span class="hljs-comment">//  !</span></span></code> </pre> <br> è€Œè¿™ä¸ªä¸æ˜¯ï¼š <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Wand</span></span> { length: number } <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Wand</span></span> {   length: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-comment"><span class="hljs-comment">// Error: Subsequent property declarations must have the same type.  Property 'length' must be of type 'number', but here has type 'string'.</span></span></code> </pre> <br> ç°åœ¨ï¼Œåœ¨å¤„ç†äº†è¿™ä¸ªé—®é¢˜ä¹‹åï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬é¢ä¸´ç€ä¸€ä¸ªç›¸å½“ç®€å•çš„ä»»åŠ¡ã€‚ å³ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å£°æ˜<code>Array&lt;T&gt;</code>æ¥å£å¹¶å‘å…¶æ·»åŠ <code>getBy</code>å‡½æ•°ã€‚ <br><br><pre> <code class="hljs powershell">interface Array&lt;T&gt; {  getBy&lt;P extends keyof T&gt;(prop: P, value: T[<span class="hljs-type"><span class="hljs-type">P</span></span>]): T | null; } Array.prototype.getBy = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">P</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyof</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(   this: T[],   prop: P,   value: T[P] )</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || null; }; const bestie = students.getBy(<span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Ron"</span></span>); //   ! const potionsTeacher = (teachers as any).getBy(<span class="hljs-string"><span class="hljs-string">"subject"</span></span>, <span class="hljs-string"><span class="hljs-string">"Potions"</span></span>) //    </code> </pre> <br> è¯·æ³¨æ„ï¼Œæ‚¨å¯èƒ½ä¼šåœ¨æ¨¡å—æ–‡ä»¶ä¸­ç¼–å†™å¤§å¤šæ•°ä»£ç ï¼Œå› æ­¤ï¼Œè¦æ›´æ”¹<code>Array</code>æ¥å£ï¼Œæ‚¨å°†éœ€è¦è®¿é—®å…¨å±€èŒƒå›´ã€‚ æ‚¨å¯ä»¥é€šè¿‡å°†ç±»å‹å®šä¹‰æ”¾ç½®åœ¨<code>declare global</code> ã€‚ ä¾‹å¦‚ï¼Œåƒè¿™æ ·ï¼š <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> {   interface <span class="hljs-keyword"><span class="hljs-keyword">Array</span></span>&lt;T&gt; {       getBy&lt;P extends keyof T&gt;(prop: P, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: T[P]): T | <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;   } }</code> </pre> <br> å¦‚æœè¦æ‰©å±•å¤–éƒ¨åº“çš„æ¥å£ï¼Œåˆ™å¾ˆå¯èƒ½éœ€è¦è®¿é—®è¯¥åº“çš„<code>namespace</code> ã€‚ è¿™æ˜¯ä¸€ä¸ªå¦‚ä½•å°†<code>userId</code>å­—æ®µæ·»åŠ åˆ°<code>Express</code>åº“ä¸­çš„<code>Request</code>çš„ç¤ºä¾‹ï¼š <br><br><pre> <code class="hljs cs">declare <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Express</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Request</span></span> {     userId: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>;   } } }</code> </pre> <br> æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>è¯•ç”¨æœ¬èŠ‚ä¸­çš„ä»£ç ã€‚ <br><br><h2>  <font color="#3AC1EF">æ€»ç»“</font> </h2><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†åœ¨TypeScriptä¸­ä½¿ç”¨æ³›å‹å’Œç±»å‹æ‰©å±•çš„æŠ€æœ¯ã€‚ æˆ‘ä»¬å¸Œæœ›æ‚¨ä»Šå¤©æ‰€å­¦åˆ°çš„å†…å®¹èƒ½å¤Ÿå¸®åŠ©æ‚¨ç¼–å†™å¯é ï¼Œå¯ç†è§£ä¸”ç±»å‹å®‰å…¨çš„ä»£ç ã€‚ <br><br>  <b>äº²çˆ±çš„è¯»è€…ä»¬ï¼</b> æ‚¨å¯¹TypeScriptä¸­çš„ä»»ä½•ç±»å‹æ„Ÿè§‰å¦‚ä½•ï¼Ÿ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN426729/">https://habr.com/ru/post/zh-CN426729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN426719/index.html">SIBURä¸Šçš„æ•°æ®ç§‘å­¦é»‘å®¢é©¬æ‹‰æ¾ï¼šè¿‡å»çš„æ ·å­</a></li>
<li><a href="../zh-CN426721/index.html">åœ¨äº§å“å¼€å‘è¿‡ç¨‹ä¸­é¿å…å¤±è´¥ï¼šRookeeçš„10æ¡å»ºè®®</a></li>
<li><a href="../zh-CN426723/index.html">å¾®è½¯å’Œåˆä½œä¼™ä¼´å¸Œæœ›åœ¨æœˆçƒä¸Šåˆ›é€ ä¸€ä¸ªæ—¶é—´èƒ¶å›Š</a></li>
<li><a href="../zh-CN426725/index.html">å½“æ‚¨ä¸æƒ³åšäº‹æƒ…æ—¶è¯¥æ€ä¹ˆåš</a></li>
<li><a href="../zh-CN426727/index.html">EMEï¼Ÿ CDMï¼Ÿ DRMï¼Ÿ CENCï¼Ÿ IDKï¼ æ‚¨éœ€è¦åœ¨æµè§ˆå™¨ä¸­åˆ¶ä½œè‡ªå·±çš„è§†é¢‘æ’­æ”¾å™¨</a></li>
<li><a href="../zh-CN426731/index.html">CSSï¼šborder-radiusçš„æœ‰è¶£åŠŸèƒ½</a></li>
<li><a href="../zh-CN426733/index.html">é“ä¸ä¼šå¤±è´¥ã€‚ æˆ‘æ¯å¤©å¦‚ä½•å‡†å¤‡æ•°åå°æœåŠ¡å™¨è¿›è¡Œæˆ˜æ–—</a></li>
<li><a href="../zh-CN426735/index.html">æ¬¢è¿æ¥åˆ°JETHACK Hackathon</a></li>
<li><a href="../zh-CN426737/index.html">ç®€è¦ä»‹ç»ç¥ç»å½¢æ€å¤„ç†å™¨çš„æ¶æ„ï¼šå†…éƒ¨å¤–è§‚</a></li>
<li><a href="../zh-CN426739/index.html">ä½¿ç”¨Nginxä»AWS S3ä»£ç†æ–‡ä»¶</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>