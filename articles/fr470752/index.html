<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤷🏻 🎯 🥕 Analyse des paiements Wechat 🙅🏻 🍆 🌡️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bien que le marché des paiements tiers en Chine soit extrêmement vaste, tout fabricant de téléphones, chaque opérateur mobile a ses portefeuilles élec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analyse des paiements Wechat</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470752/"> Bien que le marché des paiements tiers en Chine soit extrêmement vaste, tout fabricant de téléphones, chaque opérateur mobile a ses portefeuilles électroniques, et il y a des dizaines de noms dans leurs notes, il n'est pas exagéré de dire qu'en considérant les systèmes de paiement électronique, vous pouvez vous limiter à deux sociétés - Tencent et Alibaba .  Selon 3mbang, en 2018, Alipey détenait 52,5% du marché des paiements mobiles et Tensent - 36,7% (en nombre de transactions utilisant des terminaux mobiles).  Si nous considérons non seulement les téléphones, mais aussi tous les appareils électroniques, les statistiques semblent un peu différentes - 44,5% pour Alipey et 30,3% pour Tensent.  Dans tous les cas, avec la pensée «J'ai besoin de connecter des paiements électroniques», tout entrepreneur novice (ou avancé) aura ces deux noms en tête.  Et dans 99% des cas, cela suffira - qu'il s'agisse d'ouvrir une adresse IP pour le commerce de chaussures, un plateau de nouilles dans la rue ou un site sérieux avec des millions de visiteurs.  Tous les autres paiements - oui, ils sont souhaitables, ils ont leurs avantages, mais l'ensemble de base est les deux.  Nous les examinerons en détail. <br><a name="habracut"></a><br>  Naturellement, le sujet est trop étendu.  Et depuis les années, les deux réseaux se sont développés à l'échelle de produits énormes, indépendants et formant un système (du moins le fait que sur la base de Wechat - le messager-processeur, qui est le principal outil de paiement via Tencent - via le portefeuille), parle de leur importance pour l'existence de l'État Dans certaines régions, nous avons lancé un test de cartes d'identité électroniques, nous ne pourrons pas saisir l'immensité.Chaque réseau regorge de centaines de services connexes - de la livraison de nourriture et de la vente de coupons de réduction aux plateformes d'investissement  et un bureau des antécédents en matière de crédit.Nous examinerons tout cela du point de vue d'un homme d'affaires novice qui s'est rendu compte que sans paiements électroniques, il est voué à la ruine en 2019. Nous allons donc commencer ici et continuer dans les prochains articles. <br><br>  Ainsi, Wechat propose les solutions de paiement suivantes: <br><br> 付款 码 支付 - paiement par code de paiement.  L'utilisateur ouvre son wich sur une page avec un code de paiement personnel (contenant un code barre à 18 chiffres ou QR code), le vendeur, en lisant ce code, déduit le montant déterminé par lui du compte de l'utilisateur.  Autrement dit, du côté système, cela ressemble à ceci: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appid</span></span></span><span class="hljs-tag">&gt;</span></span>wx11112222aaaabbbb<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appid</span></span></span><span class="hljs-tag">&gt;</span></span> - ID       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attach</span></span></span><span class="hljs-tag">&gt;</span></span>-<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attach</span></span></span><span class="hljs-tag">&gt;</span></span> -   (  ) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">auth_code</span></span></span><span class="hljs-tag">&gt;</span></span>120269300684844649<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">auth_code</span></span></span><span class="hljs-tag">&gt;</span></span> -     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>-<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> -   -      <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">device_info</span></span></span><span class="hljs-tag">&gt;</span></span>1000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">device_info</span></span></span><span class="hljs-tag">&gt;</span></span> -    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goods_tag</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goods_tag</span></span></span><span class="hljs-tag">&gt;</span></span> -    ,     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mch_id</span></span></span><span class="hljs-tag">&gt;</span></span>10000100<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mch_id</span></span></span><span class="hljs-tag">&gt;</span></span> - ID  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nonce_str</span></span></span><span class="hljs-tag">&gt;</span></span>8aaee146b1dee7cec9100add9b96cbe2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nonce_str</span></span></span><span class="hljs-tag">&gt;</span></span> -     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">out_trade_no</span></span></span><span class="hljs-tag">&gt;</span></span>1415757673<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">out_trade_no</span></span></span><span class="hljs-tag">&gt;</span></span> -      <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">spbill_create_ip</span></span></span><span class="hljs-tag">&gt;</span></span>14.17.22.52<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">spbill_create_ip</span></span></span><span class="hljs-tag">&gt;</span></span> IP  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time_expire</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time_expire</span></span></span><span class="hljs-tag">&gt;</span></span> ,     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">total_fee</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">total_fee</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sign</span></span></span><span class="hljs-tag">&gt;</span></span>C29DB7DB1FD4136B84AE35604756362C<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sign</span></span></span><span class="hljs-tag">&gt;</span></span> - </code> </pre> <br>  Autrement dit, c'est le formulaire que le vendeur envoie à hachurer, et à chaque fois seul le montant et le code de paiement de l'acheteur y changent.  Et, en conséquence, le danger de la méthode est immédiatement visible pour tout le monde: <br><br><ol><li>  l'acheteur ne voit pas le montant tant qu'il n'est pas débité </li><li>  Après avoir appris le code de paiement, un vendeur sans scrupules peut débiter n'importe quel montant du compte de l'acheteur à tout moment à son insu. </li><li>  Néanmoins, comme le code est unique et change à chaque lancement de wichat, et que la notification du montant débité intervient dans la même seconde, la fraude avec ce type de paiement est assez problématique.  Cette méthode a pris racine dans presque tous les magasins hors ligne, terminaux en libre-service chez McDonalds et presque partout où vous pouvez installer un lecteur de codes-barres et où le client y a un accès physique. </li></ol><br><img src="https://habrastorage.org/webt/g5/7z/x7/g57zx7alaf4m4riynx_lrbnbwy8.png"><br><br>  Paiements autochtones.  Tout à fait à l'opposé de la première méthode, basée sur le fait que le vendeur génère un code QR avec ses données et le montant de la commande, et que l'acheteur via son Wechat le scanne et confirme le paiement.  Les avantages sont évidents: <br><br><ol><li>  l'acheteur voit le montant à payer jusqu'au paiement </li><li>  toutes les décisions sont prises par l'acheteur - il peut refuser de payer même après avoir scanné le code.  La décision de scanner / de ne pas scanner est également prise par lui. </li></ol><br>  Cette méthode a pris racine partout où il y a un écran sur lequel vous pouvez afficher le code QR mis à jour, tout d'abord, sur les sites Web de bureau.  Il peut également être trouvé dans des endroits où il n'y a qu'un seul produit de masse - par exemple, les billets d'entrée à Sky Park sont vendus via les paiements autochtones de Vichat. <br><br><img src="https://habrastorage.org/webt/9g/wp/md/9gwpmd1opikumijxxn93qvjmqyy.png"><br><br>  En substance, les paiements natifs sont un lien au format weixin: // wxpay qui s'ouvre dans le navigateur intégré de Wechat. <br><br>  Les inconvénients des deux méthodes ci-dessus sont le manque total de commentaires et le manque de possibilité de personnaliser les paiements pour un utilisateur particulier.  Autrement dit, si nous vendons simplement des billets d'entrée, cela nous suffit - nous voyons le paiement passé, nous émettons un billet, le prochain visiteur est approprié.  Mais si nous voulons donner à chaque utilisateur un ticket personnalisé (retirer son nom de Wichat), alors l'utilisation de tels paiements n'est pas possible - la communication entre le vendeur et l'acheteur se termine lorsque la commande est payée et confirmée.  Et le maximum que le vendeur verra est le message que l'utilisateur 123456789 en 12-31 a payé 20 yuans au vendeur 98765454321. Par conséquent, d'autres types de paiements gagnent en popularité.  Mais à leur sujet un peu plus tard. <br><br>  Paiements APP ou paiements dans des applications tierces.  Ici aussi, tout est extrêmement simple - le seul scénario d'utilisation de tels paiements est dans les applications mobiles.  L'application de distribution d'eau Nestlé, par exemple.  L'utilisateur commande de l'eau, clique sur «payer», l'application Nestlé appelle via la communication inter-applications l'application Wechat dans laquelle le paiement est effectué.  Une fois la transaction terminée, Wechat renvoie les informations à l'application Nestlé et l'informe que le paiement de la commande 12345 a réussi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j1/pi/sa/j1pisaznwobjydbtlv5rf644oxm.png" width="400"></div><br>  Paiements H5.  Il s'agit essentiellement d'une version mise à jour des paiements natifs.  Étant donné que le trafic mobile a prévalu sur le trafic des ordinateurs de bureau pendant un certain temps et que les paiements natifs n'ont pas pris racine sur les téléphones pour des raisons évidentes (principalement parce que pour scanner le code QR par le téléphone, sur l'écran dont il est affiché, si vous avez besoin d'un système de miroir complexe, ou d'un autre téléphone, ou de gestes d'une demi-heure de la série "enregistrer le code dans l'album, ouvrir qui, sélectionner numériser à partir de l'image), alors les paiements H5 sont apparus.  En fait, il s'agit simplement d'un lien au format weixin: // sur la page Web du produit, qui, lorsque vous cliquez dessus, vous propose de lancer wichat et, à la fin de la transaction, donne des informations à l'adresse de rappel <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fe/40/sh/fe40shestiwmlqkuxa6t3ndcdwy.png" width="400"></div><br>  Paiements JSAPI.  La première tentative de Wichat de tout combiner sous un même toit et d'effectuer toutes les transactions dans son navigateur intégré.  Il prend également en charge la génération de codes pour les paiements hors ligne, l'intégration dans les sites et le paiement dans les comptes publics.  La tentative a été franchement infructueuse et se trouve maintenant dans peu d'endroits.  Mais il est devenu une condition préalable à l'émergence de petites applications, qui sont légèrement inférieures. <br><br>  Bien sûr, il convient de mentionner deux types de paiements, qui ne sont pas de purs paiements, mais sont également très populaires: <br><br><ol><li>  Paiements-transferts.  Particulièrement populaire auprès des tangerines à roulettes et des marchands ambulants.  Le code QR personnel du propriétaire du portefeuille est imprimé, après avoir numérisé lequel un certain montant peut lui être transféré.  Ceci, en fait, est illégal, est poursuivi par la taxe et ainsi de suite, car l'accord de licence stipule expressément que les transferts ne peuvent pas être utilisés à des fins commerciales et pour payer des marchandises.  Sauf si le vendeur s'est inscrit intentionnellement en tant qu'entrepreneur individuel et a indiqué à Wechat qu'il utilisait son compte pour accepter des paiements pour des activités commerciales.  Mais les comptes IP (工 工商 户） sont un grand sujet distinct, inapproprié pour cet article, d'autant plus que seuls les citoyens des résidents de la RPC de la RPC peuvent s'enregistrer en tant qu'IP. </li><li>  Paiements via des agrégateurs.  Si le vendeur est trop paresseux pour s'inscrire auprès de chacun des systèmes de paiement, il peut s'inscrire auprès d'un agrégateur comme iapppay.com, imprimer son code QR et l'accrocher au-dessus de la caisse \ place sur le site.  Eh bien, bien sûr, tout se passera désormais du côté de l'agrégateur. </li><li>  Et enfin, le dernier et le plus agréable type de paiement est le paiement en 小 程序.  Vous pouvez à peu près traduire en russe comme «petites applications». 小 程序 sont essentiellement des pages Web qui fonctionnent uniquement à partir du navigateur intégré de Wichat.  Cas d'utilisation typique - un utilisateur scanne un code QR via vichata et entre dans l'application d'une certaine entreprise.  Après cela, il est utilisé comme un crédit de connexion, le développeur peut utiliser toute la puissance des API tierces pour accéder aux informations sur l'utilisateur, sa géolocalisation, les résultats des analyses de préférences et de loisirs, les requêtes sur Internet, etc. - vous ne vous souviendrez pas de tout.  Et dans sa candidature, il peut mettre en œuvre absolument tout, sans aucune restriction.  Et, en conséquence, ajoutez des paiements en un seul clic.  Autrement dit, si toutes les méthodes ci-dessus ont leurs limites compréhensibles, la conversion et la conservation dans l'application ne dépendent que de vous.  De nombreuses entreprises commençant par des applications simples sont maintenant devenues de gros monstres, dans l'application dont les gens passent plus de temps que sur n'importe quel site de divertissement. </li></ol><br>  À partir d'exemples de mise en œuvre possibles: <br><br><ul><li> 小 程序 KTV 同 乐 迪.  Une fois entré dans la pièce et scanné le code QR sur la table, vous pouvez commander des chansons, acheter plus de bière, participer à l'enquête et obtenir un rabais, trouver des filles partageant les mêmes idées et s'ennuyer, etc. depuis l'application Wichat. </li><li>  barbecue 聚 点 串 吧 - arrivé sur place et après avoir scanné le code QR sur la table, vous ne pouvez pas appeler le serveur, mais dans l'application, vous pouvez commander de la viande, participer à l'action pour la bière 2 + 1, remplir des informations vous concernant et obtenir une remise sur votre anniversaire, échanger points pour un coupon de réduction, etc.  etc. </li><li>  Naturellement, tout ne se limite pas à cela.  Mais il est bon que dans le cadre de l'une des deux plates-formes, vous puissiez liquider un nombre infini d'autres puces et opportunités connexes directement sur les paiements.  Chez Alipay, tout est à peu près la même chose, compte tenu de la différence qu'Alipay a initialement développée en tant que service de paiement (avec une nouvelle torsion des fonctions sociales), et Wechat était à l'origine une plate-forme sociale sur laquelle les paiements ont ensuite été vissés. </li></ul><br>  Mais en général, les deux plateformes se développent plus ou moins uniformément et offrent l'égalité des chances.  Nous parlerons des subtilités de l'intégration et de la connexion la prochaine fois. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470752/">https://habr.com/ru/post/fr470752/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470736/index.html">WWDC 2019: instruments personnalisés et symboles SF, ainsi que de nouvelles approches pour le développement d'applications iOS</a></li>
<li><a href="../fr470742/index.html">Équation de Navier-Stokes et simulation des fluides sur CUDA</a></li>
<li><a href="../fr470744/index.html">Les mathématiques révèlent les secrets de la rétroaction des cellules en direct</a></li>
<li><a href="../fr470746/index.html">Facebook fait de la conversation la prochaine interface populaire</a></li>
<li><a href="../fr470750/index.html">Amazon a attrapé les meilleurs produits</a></li>
<li><a href="../fr470754/index.html">Chatbot RASA: Expérience Parallels</a></li>
<li><a href="../fr470756/index.html">Création d'une application backend pour le chat en ligne Apollo, Node.js</a></li>
<li><a href="../fr470758/index.html">Aperçu de l'activité virale en septembre 2019</a></li>
<li><a href="../fr470772/index.html">TON: recommandations et bonnes pratiques</a></li>
<li><a href="../fr470774/index.html">Nouvelles annotations de type dans Python 3.8 (protocole, final, TypedDict, littéral)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>