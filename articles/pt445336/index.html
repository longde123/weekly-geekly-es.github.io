<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è≤Ô∏è ‚ÑπÔ∏è üëñ FlexiRemap¬Æ vs RAID üö∫ „äóÔ∏è üôãüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Os algoritmos RAID foram introduzidos ao p√∫blico em 1987. At√© hoje, eles continuam sendo a tecnologia mais popular para proteger e acelerar o acesso a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>FlexiRemap¬Æ vs RAID</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/accelstor/blog/445336/"><p>  Os algoritmos RAID foram introduzidos ao p√∫blico em 1987.  At√© hoje, eles continuam sendo a tecnologia mais popular para proteger e acelerar o acesso aos dados no campo de armazenamento de informa√ß√µes.  Mas a era da tecnologia de TI, que ultrapassou um marco de 30 anos, n√£o √© a maturidade, mas a velhice.  O motivo √© o progresso, inexoravelmente carregando novas oportunidades.  Nos momentos em que praticamente n√£o havia outras unidades al√©m do HDD, os algoritmos RAID tornaram poss√≠vel o uso mais eficiente dos recursos de armazenamento dispon√≠veis.  No entanto, com o advento do SSD, a situa√ß√£o mudou fundamentalmente.  Agora, o RAID ao trabalhar com SSDs j√° √© um "la√ßo" no desempenho deles.  Portanto, para liberar todo o potencial das caracter√≠sticas de velocidade do SSD, √© simplesmente necess√°ria uma abordagem completamente diferente para trabalhar com eles. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/xz/ny/fl/xznyflcrmta9iytkfrt6azk6ttq.jpeg"></div><a name="habracut"></a><br><p>  Al√©m das diferen√ßas √≥bvias entre o HDD e o SSD nos princ√≠pios operacionais, esses tipos de m√≠dia t√™m uma caracter√≠stica mais importante: qualquer disco r√≠gido pode sobrescrever qualquer dado com granularidade em um bloco (agora √© na maioria das vezes 4K).  Para SSDs, o processo de reescrita √© um procedimento muito mais complicado: </p><br><ul><li>  Os dados alterados s√£o copiados para um novo local.  Ao mesmo tempo, a granularidade √© o mesmo bloco, mas consiste em v√°rias p√°ginas e com um tamanho de 256 KB - 4 MB.  I.e.  ao alterar o mesmo 4KB, √© necess√°rio copiar incluindo todas as p√°ginas vizinhas, formando um √∫nico bloco. </li><li>  Marque os blocos "antigos" como n√£o utilizados e limpe-os com o coletor de lixo. </li></ul><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/wc/e4/6m/wce46mqg4-y_gaq_j91juzk0bg0.png"></div><br><p>  <i>Grava√ß√£o / substitui√ß√£o sequencial no SSD</i> </p><br><p>  No caso de grava√ß√£o / dublagem seq√ºencial, esse recurso do SSD n√£o desempenha um grande papel em termos de desempenho, porque  os blocos est√£o localizados nas proximidades e o coletor de lixo est√° realizando seu trabalho em segundo plano.  Mas na vida real, e mais ainda no segmento Enterprise para SSD, o acesso aleat√≥rio aos dados √© mais frequentemente usado.  E esses dados s√£o gravados em locais arbitr√°rios nas unidades. </p><br><p>  Quanto mais dados s√£o gravados no SSD, mais dif√≠cil √© para o coletor de lixo trabalhar, pois a fragmenta√ß√£o est√° crescendo rapidamente.  Como resultado, chega o momento em que o processo de limpeza da unidade deixa de ser "em segundo plano": o desempenho do SSD cai significativamente, porque  uma parte significativa √© retirada pelo Garbage Collector. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/9m/by/hx/9mbyhx6cjjeorfmu1rsohmcyq28.png"></div><br><p>  <i>Layout de dados reais no SSD para uso di√°rio</i> </p><br><p>  Para ilustrar o efeito do impacto do coletor de lixo, dependendo do modo de grava√ß√£o na unidade, √© poss√≠vel realizar testes simples: grava√ß√£o sequencial e aleat√≥ria em blocos de 4K a uma unidade de 100 GB.  (Fonte - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Micron</a> ) </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/my/bk/u4/mybku4ccwioysxazxa27eacj1yq.png"></div><br><p>  <i>Desempenho de grava√ß√£o sequencial</i> </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/nc/p6/dsncp6gfnotass9g9g1ork7atcu.png"></div><br><p>  <i>Desempenho de grava√ß√£o aleat√≥ria</i> </p><br><p>  Como voc√™ pode ver nos testes, a queda de desempenho pode atingir mais de duas vezes.  E esta √© apenas uma unidade.  No caso de usar SSDs como parte de um grupo RAID, o n√∫mero de opera√ß√µes de reescrita aumenta significativamente, gra√ßas ao trabalho com paridade. </p><br><p>  Em geral, gra√ßas a esses recursos do SSD, para eles existe um par√¢metro como um coeficiente de grava√ß√£o (amplifica√ß√£o de grava√ß√£o).  Essa √© a propor√ß√£o entre a quantidade de dados gravados na unidade e a quantidade de dados que o host realmente enviou.  E para o RAID5 mais popular, essa propor√ß√£o √© de ~ 3,5. </p><br><p>  Como resultado, os sistemas com RAID cl√°ssico basicamente usam SSDs apenas ~ 10% da velocidade real e apresentam uma escala ruim no desempenho, com um aumento no n√∫mero de unidades em mais de uma d√∫zia. </p><br><p>  Tamb√©m observamos que opera√ß√µes excessivas de grava√ß√£o n√£o apenas reduzem o desempenho dos SSDs, mas tamb√©m reduzem o recurso longe de ser infinito, reduzindo assim a vida √∫til da unidade. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A tecnologia FlexiRemap¬Æ</a> , que √© o n√∫cleo de todos os produtos AccelStor, foi desenvolvida como uma alternativa aos algoritmos RAID cl√°ssicos para trabalhar com SSDs.  A inova√ß√£o da tecnologia foi notada por v√°rias patentes e pr√™mios (inclusive no Flash Memory Summit 2016) e pelos resultados de testes independentes (por exemplo, SPC1). </p><br><p>  A ess√™ncia do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FlexiRemap¬Æ</a> √© converter todas as solicita√ß√µes de grava√ß√£o recebidas, e principalmente do tipo aleat√≥rio, em um conjunto de blocos o mais semelhante poss√≠vel √† grava√ß√£o seq√ºencial do ponto de vista da unidade.  Como resultado, a grava√ß√£o no SSD ocorre no modo mais confort√°vel para eles, e o desempenho final excede qualquer sistema com um RAID cl√°ssico. </p><br><p>  Todos os SSDs nos sistemas AccelStor s√£o divididos em dois grupos sim√©tricos FlexiRemap¬Æ.  O tamanho do grupo depende do modelo e √© de 5 a 11 unidades.  Para resili√™ncia dentro de um grupo, a paridade √© usada como RAID5.  Ambos os grupos s√£o usados ‚Äã‚Äãjuntos para formar um espa√ßo de armazenamento comum.  Portanto, a toler√¢ncia a falhas resultante ser√° semelhante a uma matriz RAID50 composta por dois grupos: o sistema √© capaz de suportar uma falha de at√© dois SSDs, mas n√£o mais que um em cada grupo FlexiRemap¬Æ. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/xy/ij/qxxyijh0huqx3civilqtwanvzdk.png"></div><br><p>  Todas as solicita√ß√µes de grava√ß√£o recebidas s√£o divididas em blocos 4K, que no modo round robin s√£o gravados nos dois grupos FlexiRemap¬Æ.  Al√©m disso, o sistema acompanha constantemente a demanda por blocos gravados, tentando registrar esses blocos o mais pr√≥ximo poss√≠vel um do outro.  Acontece um an√°logo virtual de lacrimejamento, se expresso em termos de armazenamento.  Nesse caso, o trabalho do coletor de lixo √© bastante facilitado: afinal, os blocos n√£o utilizados sempre estar√£o pr√≥ximos. </p><br><p>  Deve-se observar que os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sistemas AccelStor</a> , diferentemente dos produtos dos concorrentes, n√£o usam a funcionalidade de cache das solicita√ß√µes recebidas na RAM do controlador.  Todos os blocos de dados recebidos s√£o gravados imediatamente no SSD.  O host recebe a confirma√ß√£o da grava√ß√£o bem-sucedida somente ap√≥s o posicionamento f√≠sico dos dados nas unidades.  Somente tabelas de aloca√ß√£o de bloco no SSD s√£o armazenadas na RAM para acelerar o acesso e determinar onde gravar o pr√≥ximo bloco de dados.  Obviamente, para garantir a confiabilidade, c√≥pias dessas tabelas tamb√©m est√£o localizadas na pr√≥pria m√≠dia.  Como resultado, os sistemas AccelStor n√£o exigem nenhuma prote√ß√£o de cache na forma de bateria / capacitor (no entanto, existe a oportunidade de estabelecer uma conex√£o com o no-break para um desligamento "suave" em caso de problemas de energia). </p><br><p>  Gra√ßas a essa abordagem de organiza√ß√£o de grava√ß√µes, o coletor de lixo pode realmente trabalhar em segundo plano sem afetar significativamente a velocidade das unidades, o que, em √∫ltima an√°lise, permite a utiliza√ß√£o de at√© 90% do desempenho do SSD no sistema.  √â exatamente isso que √© o IOPS nos sistemas AccelStor em rela√ß√£o ao All Flash, com base nos algoritmos RAID. </p><br><p>  Outra caracter√≠stica importante da tecnologia FlexiRemap¬Æ √© a redu√ß√£o significativa nas opera√ß√µes redundantes de grava√ß√£o nos SSDs.  Portanto, o coeficiente de amplifica√ß√£o de grava√ß√£o para os sistemas AccelStor √© de apenas 1,3, o que na tradu√ß√£o para o idioma comum significa um aumento na vida √∫til das unidades em compara√ß√£o com o RAID5 em mais de 2,5 vezes! </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qe/zm/kf/qezmkfb5nltjqdh1xsqrqgsnaxm.png"></div><br><p>  Gra√ßas ao monitoramento constante pelo sistema da pol√≠tica de coloca√ß√£o de dados no SSD, todas as unidades se desgastam da mesma maneira.  Essa abordagem nos permite prever sua vida √∫til e sinalizar com anteced√™ncia ao administrador sobre o esgotamento do recurso de grava√ß√£o. </p><br><p>  √â claro que os SSDs podem falhar.  Nesse caso, o sistema come√ßar√° a ser reconstru√≠do imediatamente em uma das unidades hot spare.  Nesse caso, o grupo FlexiRemap¬Æ, que est√° em um estado degradado, entra no modo somente leitura e todas as solicita√ß√µes de grava√ß√£o s√£o enviadas para o segundo grupo.  Esse mecanismo de prote√ß√£o √© fornecido para acelerar a opera√ß√£o de reconstru√ß√£o e reduzir a probabilidade de falha de outra unidade dentro do mesmo grupo.  N√£o √© segredo que, durante a reconstru√ß√£o, todas as unidades do grupo experimentam um aumento de carga devido √† interfer√™ncia das opera√ß√µes de leitura, grava√ß√£o e restaura√ß√£o no hot spare.  Isso aumenta a probabilidade de outra unidade falhar.  E quanto mais opera√ß√µes de grava√ß√£o, mais demorar√° a reconstru√ß√£o. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qi/nv/mo/qinvmor3hiqo8133beft0yirjfe.png"></div><br><p>  Ap√≥s a conclus√£o do processo de recupera√ß√£o e o grupo FlexiRemap¬Æ retornar ao seu estado normal, haver√° um pequeno vi√©s no recurso de grava√ß√£o entre os dois grupos.  Portanto, para alinh√°-lo, as opera√ß√µes de grava√ß√£o subseq√ºentes geralmente caem no grupo restaurado (√© claro, de tal maneira que o desempenho final do sistema n√£o sofre muito). </p><br><blockquote>  √â imposs√≠vel aumentar o desempenho de todos os sistemas Flash com base nos algoritmos RAID acima de alguns valores (~ 280K IOPS @ grava√ß√£o aleat√≥ria 4K), mesmo ao usar sistemas de cache complexos.  A tecnologia FlexiRemap¬Æ, gra√ßas a uma abordagem completamente diferente para organizar o espa√ßo de armazenamento, n√£o apenas supera facilmente essa barreira, mas tamb√©m aumenta simultaneamente a vida √∫til dos SSDs.  Portanto, os sistemas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AccelStor</a> t√™m s√©rias vantagens entre os arrays All Flash em v√°rias frentes (IOPS / $, GB / $, TCO, ROI), tornando-os candidatos ideais para posi√ß√µes-chave nos datacenters de clientes para resolver tarefas com muitos recursos. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445336/">https://habr.com/ru/post/pt445336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445322/index.html">Grande variedade de recursos √∫teis para gerentes de produto</a></li>
<li><a href="../pt445326/index.html">Automa√ß√£o implac√°vel. Corte do Diretor</a></li>
<li><a href="../pt445328/index.html">Repensando a rob√≥tica infantil</a></li>
<li><a href="../pt445330/index.html">Criptografia em Java. Classe de assinatura</a></li>
<li><a href="../pt445334/index.html">Temos DevOps. Vamos demitir todos os testadores</a></li>
<li><a href="../pt445338/index.html">Servidor DHCP + Mysql em Python</a></li>
<li><a href="../pt445340/index.html">Aumente a seguran√ßa da rede usando um analisador de nuvem</a></li>
<li><a href="../pt445344/index.html">Plataforma de comunica√ß√µes unificadas OpenVox</a></li>
<li><a href="../pt445346/index.html">Como escrever uma API incorreta</a></li>
<li><a href="../pt445348/index.html">SNA Hackathon 2019: Simplifique a Arquitetura - Simplifique os Recursos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>