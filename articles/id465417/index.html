<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ñ∂Ô∏è üåè üë®üèª‚Äçüç≥ Plugin Volume Penyimpanan Kubernetes: Flexvolume ke CSI üîú ‚≠ïÔ∏è üß£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada hari-hari ketika Kubernetes masih v1.0.0, plugin volume ada. Mereka diperlukan untuk terhubung ke sistem Kubernetes untuk menyimpan data kontaine...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plugin Volume Penyimpanan Kubernetes: Flexvolume ke CSI</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/465417/"><img src="https://habrastorage.org/webt/sj/ie/we/sjieweu7inrj2_yn3mxvtxe8vrw.png"><br><br>  Pada hari-hari ketika Kubernetes masih v1.0.0, plugin volume ada.  Mereka diperlukan untuk terhubung ke sistem Kubernetes untuk menyimpan data kontainer persisten (permanen).  Jumlah mereka kecil, dan di antara yang pertama ada penyedia penyimpanan seperti GCE PD, Ceph, AWS EBS dan lainnya. <br><br>  Plug-in dikirimkan bersama dengan Kubernetes, yang untuknya mereka mendapatkan namanya - in-tree.  Namun, banyak dari set plug-in yang ada tidak cukup.  Para pengrajin menambahkan plugin sederhana ke inti Kubernet menggunakan patch, setelah itu mereka membangun Kubernet mereka sendiri dan meletakkannya di server mereka.  Namun seiring waktu, pengembang Kubernetes menyadari bahwa <i>ikan</i> itu tidak dapat dipecahkan.  Orang-orang membutuhkan <i>joran</i> .  Dan dalam rilis Kubernetes v1.2.0, muncul ... <a name="habracut"></a><br><br><h2>  Plugin Flexvolume: pancing minimal </h2><br>  Pengembang Kubernetes menciptakan plugin FlexVolume, yang merupakan pengikat logis variabel dan metode untuk bekerja dengan driver Flexvolume pihak ketiga. <br><br>  Mari kita berhenti dan melihat lebih dekat apa driver FlexVolume itu.  Ini adalah <b>file yang dapat dieksekusi</b> tertentu ( <b>file</b> biner, skrip Python, skrip Bash, dll.), Yang, ketika dieksekusi, mengambil argumen baris perintah dan mengembalikan pesan dengan bidang yang sebelumnya diketahui dalam format JSON.  Dengan konvensi, argumen baris perintah pertama selalu menjadi metode, dan argumen lainnya adalah parameternya. <br><br><img src="https://habrastorage.org/webt/ed/rp/2_/edrp2_n7i75s5meu4bgj5wmiydm.png"><br>  <i>Skema koneksi CIFS Berbagi di OpenShift.</i>  <i>Driver Flexvolume - Tepat di Tengah</i> <br><br>  <b>Seperangkat metode minimum</b> terlihat seperti ini: <br><br><pre><code class="cs hljs">flexvolume_driver mount <span class="hljs-meta"><span class="hljs-meta">#      pod' #   : { "status": "Success"/"Failure"/"Not supported", "message": "       ", } flexvolume_driver unmount #      pod' #   : { "status": "Success"/"Failure"/"Not supported", "message": "       ", } flexvolume_driver init #     #   : { "status": "Success"/"Failure"/"Not supported", "message": "       ", // ,     attach/deatach "capabilities":{"attach": True/False} }</span></span></code> </pre> <br>  Menggunakan metode <code>attach</code> dan <code>detach</code> akan menentukan skenario yang menurutnya di masa depan kubelet akan bertindak ketika pengemudi dipanggil.  Ada juga <code>expandfs</code> dan <code>expandfs</code> <code>expandvolume</code> khusus yang bertanggung jawab untuk mengubah ukuran volume secara dinamis. <br><br>  Sebagai contoh perubahan yang <code>expandvolume</code> metode <code>expandvolume</code> , dan dengan itu kemampuan untuk melakukan pengubahan ukuran volume secara real time, Anda dapat memeriksa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">permintaan tarik kami</a> di Operator Rook Ceph. <br><br>  Berikut adalah contoh implementasi driver Flexvolume untuk bekerja dengan NFS: <br><br><pre> <code class="bash hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usage</span></span></span></span>() { err <span class="hljs-string"><span class="hljs-string">"Invalid usage. Usage: "</span></span> err <span class="hljs-string"><span class="hljs-string">"\t</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$0</span></span></span><span class="hljs-string"> init"</span></span> err <span class="hljs-string"><span class="hljs-string">"\t</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$0</span></span></span><span class="hljs-string"> mount &lt;mount dir&gt; &lt;json params&gt;"</span></span> err <span class="hljs-string"><span class="hljs-string">"\t</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$0</span></span></span><span class="hljs-string"> unmount &lt;mount dir&gt;"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 1 } <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">err</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> -ne $* 1&gt;&amp;2 } <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> -ne $* &gt;&amp;1 } <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ismounted</span></span></span></span>() { MOUNT=`findmnt -n <span class="hljs-variable"><span class="hljs-variable">${MNTPATH}</span></span> 2&gt;/dev/null | cut -d<span class="hljs-string"><span class="hljs-string">' '</span></span> -f1` <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${MOUNT}</span></span></span><span class="hljs-string">"</span></span> == <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${MNTPATH}</span></span></span><span class="hljs-string">"</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"1"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"0"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> } <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">domount</span></span></span></span>() { MNTPATH=<span class="hljs-variable"><span class="hljs-variable">$1</span></span> NFS_SERVER=$(<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$2</span></span> | jq -r <span class="hljs-string"><span class="hljs-string">'.server'</span></span>) SHARE=$(<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$2</span></span> | jq -r <span class="hljs-string"><span class="hljs-string">'.share'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $(ismounted) -eq 1 ] ; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> <span class="hljs-string"><span class="hljs-string">'{"status": "Success"}'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 0 <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> mkdir -p <span class="hljs-variable"><span class="hljs-variable">${MNTPATH}</span></span> &amp;&gt; /dev/null mount -t nfs <span class="hljs-variable"><span class="hljs-variable">${NFS_SERVER}</span></span>:/<span class="hljs-variable"><span class="hljs-variable">${SHARE}</span></span> <span class="hljs-variable"><span class="hljs-variable">${MNTPATH}</span></span> &amp;&gt; /dev/null <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $? -ne 0 ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> err <span class="hljs-string"><span class="hljs-string">"{ \"status\": \"Failure\", \"message\": \"Failed to mount </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${NFS_SERVER}</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${SHARE}</span></span></span><span class="hljs-string"> at </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${MNTPATH}</span></span></span><span class="hljs-string">\"}"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 1 <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> <span class="hljs-string"><span class="hljs-string">'{"status": "Success"}'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 0 } <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unmount</span></span></span></span>() { MNTPATH=<span class="hljs-variable"><span class="hljs-variable">$1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $(ismounted) -eq 0 ] ; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> <span class="hljs-string"><span class="hljs-string">'{"status": "Success"}'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 0 <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> umount <span class="hljs-variable"><span class="hljs-variable">${MNTPATH}</span></span> &amp;&gt; /dev/null <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $? -ne 0 ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> err <span class="hljs-string"><span class="hljs-string">"{ \"status\": \"Failed\", \"message\": \"Failed to unmount volume at </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${MNTPATH}</span></span></span><span class="hljs-string">\"}"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 1 <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> <span class="hljs-string"><span class="hljs-string">'{"status": "Success"}'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 0 } op=<span class="hljs-variable"><span class="hljs-variable">$1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$op</span></span></span><span class="hljs-string">"</span></span> = <span class="hljs-string"><span class="hljs-string">"init"</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> <span class="hljs-string"><span class="hljs-string">'{"status": "Success", "capabilities": {"attach": false}}'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 0 <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ <span class="hljs-variable"><span class="hljs-variable">$#</span></span> -lt 2 ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> usage <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-built_in"><span class="hljs-built_in">shift</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$op</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> mount) domount $* ;; unmount) unmount $* ;; *) <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> <span class="hljs-string"><span class="hljs-string">'{"status": "Not supported"}'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 0 <span class="hljs-keyword"><span class="hljs-keyword">esac</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 1</code> </pre> <br>  Jadi, setelah menyiapkan file yang dapat dieksekusi yang sebenarnya, Anda perlu <b>mengeluarkan driver di kluster Kubernetes</b> .  Pengemudi harus terletak di setiap node cluster sesuai dengan jalur yang telah ditentukan.  Secara default telah dipilih: <br><br> <code>/usr/libexec/kubernetes/kubelet-plugins/volume/exec/__~_/</code> <br> <br>  ... tetapi menggunakan distribusi Kubernet yang berbeda (OpenShift, Rancher ...) jalurnya mungkin berbeda. <br><br><h2>  Masalah Flexvolume: bagaimana cara melemparkan pancing? </h2><br>  Menempatkan driver Flexvolume pada node cluster ternyata menjadi tugas yang tidak sepele.  Setelah melakukan operasi secara manual, mudah untuk menghadapi situasi ketika node baru muncul di cluster: karena penambahan node baru, penskalaan horizontal otomatis, atau, lebih buruk lagi, mengganti node karena kegagalan fungsi.  Dalam hal ini, tidak <b>mungkin untuk</b> bekerja dengan penyimpanan pada node-node ini sampai Anda secara manual menambahkan driver Flexvolume ke mereka dengan cara yang sama. <br><br>  Solusi untuk masalah ini adalah salah satu primitif Kubernetes - <code>DaemonSet</code> .  Ketika node baru muncul di cluster, secara otomatis akan mendapatkan pod dari DaemonSet kami, yang mana volume lokal dilampirkan di sepanjang jalan untuk menemukan driver Flexvolume.  Setelah pembuatan berhasil, pod menyalin file yang diperlukan agar driver dapat bekerja pada disk. <br><br>  Berikut adalah contoh DaemonSet untuk meletakkan plugin Flexvolume: <br><br><pre> <code class="1c hljs">apiVersion: extensions/v1beta1 kind: DaemonSet metadata: name: flex-set spec: template: metadata: name: flex-deploy labels: app: flex-deploy spec: containers: - image: &lt;deployment_image&gt; name: flex-deploy securityContext: privileged: true volumeMounts: - mountPath: /flexmnt name: flexvolume-mount volumes: - name: flexvolume-mount hostPath: path: &lt;host_driver_directory&gt;</code> </pre> <br>  ... dan contoh skrip Bash untuk meletakkan driver Flexvolume: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh set -o errexit set -o pipefail VENDOR=k8s.io DRIVER=nfs driver_dir=$VENDOR${VENDOR:+"~"}${DRIVER} if [ ! -d "/flexmnt/$driver_dir" ]; then mkdir "/flexmnt/$driver_dir" fi cp "/$DRIVER" "/flexmnt/$driver_dir/.$DRIVER" mv -f "/flexmnt/$driver_dir/.$DRIVER" "/flexmnt/$driver_dir/$DRIVER" while : ; do sleep 3600 done</span></span></code> </pre> <br>  Penting untuk tidak lupa bahwa operasi penyalinan <b>tidak bersifat atomik</b> .  Sangat mungkin kubelet akan mulai menggunakan driver sebelum proses persiapannya selesai, yang akan menyebabkan kesalahan dalam sistem.  Pendekatan yang benar adalah dengan menyalin file driver terlebih dahulu dengan nama yang berbeda, dan kemudian menggunakan operasi penggantian nama atom. <br><br><img src="https://habrastorage.org/webt/3k/zv/vd/3kzvvdbejy8mi47vpezfpjnqlus.png"><br>  <i>Skema bekerja dengan Ceph dalam pernyataan Rook: driver Flexvolume pada diagram ada di dalam agen Rook</i> <br><br>  Masalah berikutnya ketika menggunakan driver Flexvolume adalah bahwa untuk sebagian besar penyimpanan <b>, perangkat lunak yang diperlukan untuk ini harus diinstal</b> pada node cluster (misalnya, paket ceph-common untuk Ceph).  Awalnya, plugin Flexvolume tidak dirancang untuk mengimplementasikan sistem yang kompleks tersebut. <br><br>  Solusi asli untuk masalah ini dapat dilihat dalam penerapan driver Flexvolume dari operator Rook: <br><br>  Driver itu sendiri dirancang sebagai klien RPC.  Soket IPC untuk komunikasi terletak di direktori yang sama dengan driver itu sendiri.  Kami ingat bahwa untuk menyalin file driver sebaiknya menggunakan DaemonSet, yang menghubungkan direktori dengan driver sebagai volume.  Setelah menyalin file driver rook yang diperlukan, pod ini tidak mati, tetapi terhubung ke soket IPC melalui volume yang terpasang sebagai server RPC yang lengkap.  Paket ceph-common sudah diinstal di dalam wadah pod.  Soket IPC memberikan keyakinan bahwa kubelet akan berkomunikasi dengan pod tertentu yang terletak di node yang sama.  Semuanya cerdik itu sederhana! .. <br><br><h2>  Selamat tinggal, plugin kami yang penuh kasih sayang! </h2><br>  Pengembang Kubernetes telah menemukan bahwa jumlah plugin penyimpanan di dalam kernel adalah dua puluh.  Dan perubahan di masing-masing dari mereka entah bagaimana melewati siklus rilis Kubernetes penuh. <br><br>  Ternyata untuk menggunakan versi baru plugin untuk penyimpanan, <b>Anda perlu memperbarui seluruh cluster</b> .  Selain itu, Anda mungkin terkejut bahwa versi baru Kubernetes tiba-tiba menjadi tidak kompatibel dengan kernel Linux yang digunakan ... Dan karena itu, Anda menghapus air mata dan mengertakkan gigi Anda dan berkoordinasi dengan pihak berwenang dan pengguna waktu untuk memperbarui kernel Linux dan cluster Kubernetes.  Dengan kemungkinan downtime dalam penyediaan layanan. <br><br>  Situasinya lebih dari lucu, bukan?  Menjadi jelas bagi seluruh masyarakat bahwa pendekatan itu tidak berhasil.  Dengan keputusan yang kuat, pengembang Kubernetes mengumumkan bahwa plugin penyimpanan baru tidak akan lagi diterima ke dalam kernel.  Untuk yang lainnya, seperti yang telah kita ketahui, dalam penerapan plugin Flexvolume sejumlah kekurangan terungkap ... <br><br>  Sekali dan untuk semua, plugin yang ditambahkan terakhir untuk volume di Kubernetes, CSI, dipanggil untuk menutup masalah dengan gudang data yang persisten.  Versi alpha-nya, lebih umum disebut sebagai Out-of-Tree CSI Volume Plugins, diumumkan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kubernetes 1.9</a> . <br><br><h2>  Container Storage Interface, atau CSI 3000 spinning! </h2><br>  Pertama-tama, saya ingin mencatat bahwa CSI bukan hanya plugin volume, tetapi <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">standar</a></b> nyata <b>untuk membuat komponen khusus untuk bekerja dengan gudang data</b> .  Diasumsikan bahwa sistem orkestrasi wadah, seperti Kubernetes dan Mesos, harus "belajar" bagaimana bekerja dengan komponen yang diimplementasikan sesuai dengan standar ini.  Dan sekarang Kubernetes sudah belajar. <br><br>  Apakah perangkat plugin CSI di Kubernetes?  Plugin CSI bekerja dengan driver khusus ( <b>driver CSI</b> ) yang ditulis oleh pengembang pihak ketiga.  Pengandar CSI di Kubernetes setidaknya harus terdiri dari dua komponen (pod): <br><br><ul><li>  <b>Controller</b> - mengelola penyimpanan persisten eksternal.  Ini diimplementasikan sebagai server gRPC yang primitif <code>StatefulSet</code> digunakan. </li><li>  <b>Node</b> - bertanggung jawab untuk memasang toko persisten ke node cluster.  Ini juga diimplementasikan sebagai server gRPC, tetapi primitif <code>DaemonSet</code> digunakan untuk itu. </li></ul><br><img src="https://habrastorage.org/webt/4h/vs/af/4hvsafmhi2tmja8fvc_qtzkqtfc.png"><br>  <i>Alur Kerja Plugin Kubernetes CSI</i> <br><br>  Anda dapat mempelajari beberapa detail CSI lainnya, misalnya, dari artikel ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Understanding the CSI</a> ‚Äù, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terjemahan yang</a> kami terbitkan setahun yang lalu. <br><br><h3>  Keuntungan dari implementasi semacam itu </h3><br><ul><li>  Untuk hal-hal dasar - misalnya, untuk mendaftarkan driver untuk sebuah simpul - pengembang Kubernetes telah mengimplementasikan serangkaian kontainer.  Anda tidak perlu lagi membuat respons JSON dengan kemampuan sendiri, seperti yang dilakukan untuk plugin Flexvolume. </li><li>  Alih-alih "menyelipkan" node file yang dapat dieksekusi, kami sekarang meletakkan pod di cluster.  Inilah yang awalnya kami harapkan dari Kubernetes: semua proses terjadi di dalam kontainer yang digunakan menggunakan primitif Kubernetes. </li><li>  Untuk mengimplementasikan driver yang kompleks, Anda tidak perlu lagi mengembangkan server RPC dan klien RPC.  Klien untuk kami diimplementasikan oleh pengembang Kubernetes. </li><li>  Melewati argumen untuk bekerja dengan protokol gRPC jauh lebih mudah, fleksibel, dan lebih dapat diandalkan daripada meneruskannya melalui argumen baris perintah.  Untuk memahami cara menambahkan dukungan untuk metrik penggunaan volume ke CSI dengan menambahkan metode gRPC standar, Anda dapat memeriksa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">permintaan tarik kami</a> untuk driver vsphere-csi. </li><li>  Komunikasi berlangsung melalui soket IPC agar tidak bingung apakah pod kubelet mengirim permintaan atau tidak. </li></ul><br>  Apakah daftar ini mengingatkan Anda pada sesuatu?  Kelebihan CSI adalah <b>solusi untuk masalah</b> yang sangat tidak diperhitungkan saat mengembangkan plugin Flexvolume. <br><br><h2>  Kesimpulan </h2><br>  CSI sebagai standar untuk menerapkan plugin khusus untuk berinteraksi dengan gudang data telah diterima dengan sangat hangat oleh komunitas.  Selain itu, karena kelebihan dan fleksibilitasnya, driver CSI dibuat bahkan untuk repositori seperti Ceph atau AWS EBS, plugin untuk bekerja dengan yang ditambahkan dalam versi pertama Kubernetes. <br><br>  Pada awal 2019, plugin di dalam pohon <a href="">sudah tidak digunakan lagi</a> .  Direncanakan untuk terus mendukung plugin Flexvolume, tetapi tidak akan ada pengembangan fungsionalitas baru untuknya. <br><br>  Kami sendiri sudah memiliki pengalaman menggunakan ceph-csi, vsphere-csi dan siap untuk menambah daftar ini!  Sejauh ini, CSI berupaya dengan tugas yang diberikan padanya dengan keras, dan di sana kami menunggu dan melihat. <br><br>  Jangan lupa bahwa semua yang baru adalah yang sudah dipikirkan ulang dengan baik! <br><br><h2>  PS </h2><br>  Baca juga di blog kami: <br><br><ul><li>  "Kami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memahami Antarmuka Penyimpanan Kontainer (dalam Kubernet dan bukan hanya)</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Benteng atau bukan Benteng - itulah pertanyaannya</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mengenal versi alpha dari snapshot volume di Kubernetes</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id465417/">https://habr.com/ru/post/id465417/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id465401/index.html">5 Kegiatan untuk Mempercepat Pemecahan Masalah di Tim TI Apa Pun</a></li>
<li><a href="../id465403/index.html">Achtung! Kamera baru di jalan atau informasi terbaru tentang radar dan detektor radar</a></li>
<li><a href="../id465407/index.html">1. Tinjauan Umum tentang Sakelar Lapisan Perusahaan Ekstrim</a></li>
<li><a href="../id465409/index.html">Praktik Terbaik Vue.js Untuk Pengembangan Web</a></li>
<li><a href="../id465415/index.html">Kami berbicara tentang DevOps dalam bahasa yang dapat dipahami</a></li>
<li><a href="../id465419/index.html">Tomorrow di ITMO University: proses pendidikan, kompetisi, dan pendidikan di luar negeri - pilihan acara mendatang</a></li>
<li><a href="../id465423/index.html">Smart Manufacturing and Industry 4.0: Tiga Tren Teknologi Utama</a></li>
<li><a href="../id465425/index.html">Vepp - Server baru dan panel kontrol situs web ISPsystem</a></li>
<li><a href="../id465427/index.html">Analisis Kerangka Apache Dubbo RPC oleh PVS-Studio Static Code Analyzer</a></li>
<li><a href="../id465429/index.html">Namun C adalah bahasa tingkat rendah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>