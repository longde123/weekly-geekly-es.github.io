<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜ª ğŸš¹ ğŸ”† ä½¿ç”¨BuildBotçš„æŒç»­é›†æˆå®æ–½ç¤ºä¾‹ ğŸ‘©ğŸ¾â€âš–ï¸ ğŸš âš”ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ï¼ˆå›¾ç‰‡ç”±Computerizeråœ¨Pixabayä¸Šå‘å¸ƒï¼‰ 
 
 ä½ å¥½ 

 æˆ‘çš„åå­—å«Evgeny Cherkin ï¼Œæˆ‘æ˜¯PolymetalçŸ¿ä¸šå…¬å¸å¼€å‘å›¢é˜Ÿçš„ç¨‹åºå‘˜ã€‚ 

 åœ¨å¼€å§‹ä»»ä½•é‡å¤§é¡¹ç›®æ—¶ï¼Œæ‚¨éƒ½ä¼šå¼€å§‹æ€è€ƒï¼šâ€œå“ªç§è½¯ä»¶æœ€å¥½ç”¨äºç»´æŠ¤ï¼Ÿâ€ã€‚ ä¸‹ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒä¹‹å‰çš„ITé¡¹ç›®ç»å†äº†ä¸€ç³»åˆ—é˜¶æ®µã€‚ è¿™äº›æ­¥éª¤...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨BuildBotçš„æŒç»­é›†æˆå®æ–½ç¤ºä¾‹</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460501/"><img src="https://habrastorage.org/webt/jj/-4/-g/jj-4-gindpovkdi6rbmzxax4yqu.jpeg" alt="BuildBotè¯•ç”¨é…ç½®"><br>  <i>ï¼ˆå›¾ç‰‡ç”±<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Computerizer</a>åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pixabayä¸Šå‘å¸ƒï¼‰</a></i> <i><br></i> <br> ä½ å¥½ <br><br> æˆ‘çš„åå­—å«<b>Evgeny Cherkin</b> ï¼Œæˆ‘æ˜¯<b>Polymetal</b>çŸ¿ä¸šå…¬å¸å¼€å‘å›¢é˜Ÿçš„ç¨‹åºå‘˜ã€‚ <br><br> åœ¨å¼€å§‹ä»»ä½•é‡å¤§é¡¹ç›®æ—¶ï¼Œæ‚¨éƒ½ä¼šå¼€å§‹æ€è€ƒï¼šâ€œå“ªç§è½¯ä»¶æœ€å¥½ç”¨äºç»´æŠ¤ï¼Ÿâ€ã€‚ ä¸‹ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒä¹‹å‰çš„ITé¡¹ç›®ç»å†äº†ä¸€ç³»åˆ—é˜¶æ®µã€‚ è¿™äº›æ­¥éª¤çš„é“¾æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œé‚£å¾ˆå¥½ã€‚ å‘å¸ƒITé¡¹ç›®æ–°ç‰ˆæœ¬çš„è‡ªåŠ¨åŒ–è¿‡ç¨‹ç§°ä¸ºâ€œ <i>æŒç»­é›†æˆâ€</i> ã€‚  <b>äº‹å®</b>è¯æ˜ï¼Œ <b>BuildBot</b>å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¸®åŠ©ï¼Œå®ƒå¯ä»¥æ‰§è¡Œæ­¤è¿‡ç¨‹ã€‚ <br><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å†³å®šæ¦‚è¿°<b>BuildBot</b>çš„åŠŸèƒ½ã€‚ è¿™ä¸ªè½¯ä»¶èƒ½åšä»€ä¹ˆï¼Ÿ å¦‚ä½•æ¥è¿‘ä»–ï¼Œå¦‚ä½•ä¸ä»–å»ºç«‹æ­£å¸¸çš„æœ‰æ•ˆå·¥ä½œå…³ç³»ï¼Ÿ æ‚¨è¿˜å¯ä»¥é€šè¿‡åœ¨è®¡ç®—æœºä¸Šåˆ›å»ºä¸€ä¸ªç”¨äºç»„è£…å’Œæµ‹è¯•é¡¹ç›®çš„å·¥ä½œæœåŠ¡ï¼Œå°†æˆ‘ä»¬çš„ç»éªŒè¿ç”¨åˆ°è‡ªå·±èº«ä¸Šã€‚ <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">ç›®å½•å†…å®¹</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td colspan="4" align="center"><h3> ç›®å½•å†…å®¹ </h3></td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">1.ä¸ºä»€ä¹ˆæ˜¯BuildBotï¼Ÿ</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2. BuildMasteré¢†å¯¼çš„æ¦‚å¿µ</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3.å®‰è£…</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.ç¬¬ä¸€æ­¥</a> </td></tr><tr><td colspan="4" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.é…ç½®ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é€æ­¥é£Ÿè°±</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.1 BuildmasterConfig</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.2å·¥äºº</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.3 change_source</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.4æ’æ”¾è€…</a> </td></tr><tr><td colspan="2" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.5å»ºé€ å·¥å‚</a> </td><td colspan="2" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.6å»ºç­‘å•†</a> </td></tr><tr><td colspan="4" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">6.è‡ªå·±çš„é…ç½®ç¤ºä¾‹</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">6.1åœ¨é€šå¾€master.cfgçš„é€”ä¸­</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">6.2ä½¿ç”¨svn</a> </td><td colspan="2">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">6.3ç»™æ‚¨çš„ä¿¡ï¼šè®°è€…æœ‰æƒå£°æ˜</a> </td></tr><tr><td colspan="4" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘ä»¬åšåˆ°äº†ï¼</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­å–œä½ </a> </td></tr></tbody></table></div><br></div></div><br><a name="Why"></a><h3>  1.ä¸ºä»€ä¹ˆæ˜¯BuildBotï¼Ÿ </h3><hr><br> æ—©åœ¨habr-eæ—¶ï¼Œæˆ‘é‡åˆ°äº†æœ‰å…³ä½¿ç”¨<b>BuildBot</b>å®ç°<i>æŒç»­é›†æˆçš„</i> <b>æ–‡ç« </b> ã€‚ ä¾‹å¦‚ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™</a>æ˜¯æœ€æœ‰ç”¨çš„ã€‚ è¿˜æœ‰å¦ä¸€ä¸ªä¾‹å­- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ›´ç®€å•</a> ã€‚ è¿™äº›æ–‡ç« å¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‰‹å†Œä¸­çš„ç¤ºä¾‹</a>è¿›è¡Œè°ƒå‘³ï¼Œä¹‹åæ˜¯è‹±è¯­ã€‚ è½¿è·‘è½¦æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚ é˜…è¯»å®Œè¿™äº›æ–‡ç« ä¹‹åï¼Œæ‚¨å¯èƒ½ä¼šç«‹å³æƒ³è¦åœ¨<b>BuildBot</b>ä¸Šåšä¸€äº›äº‹æƒ…ã€‚ <br><br> åˆ«è¯´äº† æœ‰äººåœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿‡å—ï¼Ÿ äº‹å®æ˜¯ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®¸å¤šäººå·²å°†å…¶</a>åº”ç”¨äºä»»åŠ¡ä¸­ã€‚ æ‚¨å¯ä»¥åœ¨Googleä»£ç æ¡£æ¡ˆä¸­æ‰¾åˆ°ä½¿ç”¨<b>BuildBotçš„</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¤ºä¾‹</a> ã€‚ <br><br> é‚£ä¹ˆäººä»¬ä½¿ç”¨<b>buildbot</b>çš„é€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ æ¯•ç«Ÿï¼Œè¿˜æœ‰å…¶ä»–å·¥å…·ï¼š <b>CruiseControl</b>å’Œ<b>Jenkins</b> ã€‚ æˆ‘ä¼šè¿™æ ·å›ç­”ã€‚ å¯¹äºå¤§å¤šæ•°ä»»åŠ¡ï¼Œ <b>è©¹é‡‘æ–¯</b>ç¡®å®è¶³å¤Ÿäº†ã€‚  <b>BuildBot</b>åˆ™æ›´å…·é€‚åº”æ€§ï¼Œå¹¶ä¸”åœ¨é‚£é‡Œçš„ä»»åŠ¡åƒåœ¨<b>Jenkinsä¸­</b>ä¸€æ ·å®¹æ˜“è§£å†³ã€‚ é€‰æ‹©ä½  ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ç”¨äºå¼€å‘ç›®æ ‡é¡¹ç›®çš„å·¥å…·ï¼Œæ‰€ä»¥ä¸ºä»€ä¹ˆä¸é€‰æ‹©ä¸€ä¸ªå…è®¸æˆ‘ä»¬ä»ç®€å•çš„æ­¥éª¤å¼€å§‹ï¼Œè·å¾—å…·æœ‰äº¤äº’æ€§å’Œç‹¬ç‰¹ç•Œé¢çš„æ„å»ºç³»ç»Ÿçš„å·¥å…·ã€‚ <br><br> å¯¹äºé‚£äº›ç›®æ ‡é¡¹ç›®æ˜¯ç”¨pythonç¼–å†™çš„äººæ¥è¯´ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šâ€œä¸ºä»€ä¹ˆä¸é€‰æ‹©ä¸€ä¸ªåœ¨é¡¹ç›®æ‰€ç”¨è¯­è¨€æ–¹é¢å…·æœ‰æ¸…æ™°ç•Œé¢çš„é›†æˆç³»ç»Ÿï¼Ÿâ€ã€‚ ç„¶åæ˜¯æ—¶å€™ä»‹ç»<b>BuildBot</b>çš„å¥½å¤„äº†ã€‚ <br><blockquote> å› æ­¤ï¼Œæˆ‘ä»¬çš„â€œä¹å™¨å››é‡å¥â€ã€‚ æˆ‘è‡ªå·±å®šä¹‰äº†<b>BuildBot</b>çš„å››ä¸ªåŠŸèƒ½ï¼š <br><ol><li> è¿™æ˜¯GPLä¸‹çš„å¼€æºæ¡†æ¶ </li><li> è¿™æ˜¯ä½¿ç”¨pythonä½œä¸ºé…ç½®å·¥å…·å¹¶æè¿°äº†æ‰€éœ€çš„æ“ä½œã€‚ </li><li> è¿™æ˜¯ä»å‘ç”Ÿè£…é…çš„æœºå™¨æ¥æ”¶å“åº”çš„æœºä¼šã€‚ </li><li> è¿™äº›æœ€ç»ˆæ˜¯ä¸»æœºçš„æœ€ä½è¦æ±‚ã€‚ éƒ¨ç½²éœ€è¦ä½¿ç”¨pythonå’Œtwistedï¼Œå¹¶ä¸”ä¸éœ€è¦è™šæ‹Ÿæœºæˆ–javaæœºå™¨ã€‚ </li></ol><br></blockquote><a name="Concepts"></a><h3>  2. BuildMasteré¢†å¯¼çš„æ¦‚å¿µ </h3><hr><br><img src="https://habrastorage.org/webt/so/qs/u1/soqsu1skae_0xuktzdemfv-n3yq.png" alt="BuildBot BuildMaster"><br><br> ä»»åŠ¡åˆ†å‘æ¶æ„çš„ä¸­å¿ƒæ˜¯<b>BuildMaster</b> ã€‚ å®ƒæ˜¯ä¸€é¡¹æœåŠ¡ï¼š <br><br><ul><li>  <b>è·Ÿè¸ª</b>é¡¹ç›®æºä»£ç æ ‘ä¸­çš„æ›´æ”¹ </li><li>  <b>å‘é€</b>å·¥äººæœåŠ¡åº”æ‰§è¡Œä»¥æ„å»ºé¡¹ç›®å¹¶å¯¹å…¶è¿›è¡Œæµ‹è¯•<b>çš„</b>å‘½ä»¤ </li><li>  <b>é€šçŸ¥</b>ç”¨æˆ·æ‰€é‡‡å–æªæ–½çš„ç»“æœ </li></ul><br>  <b>BuildMasteræ˜¯</b>é€šè¿‡<i>master.cfg</i>æ–‡ä»¶é…ç½®çš„ã€‚ è¯¥æ–‡ä»¶ä½äº<b>BuildMaster</b>çš„æ ¹ç›®å½•ã€‚ ç¨åï¼Œæˆ‘å°†è¯´æ˜å¦‚ä½•åˆ›å»ºæ­¤æ ¹ã€‚  <i>master.cfg</i>æ–‡ä»¶<i>æœ¬èº«</i>åŒ…å«pythonï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨<b>BuildBot</b>è°ƒç”¨çš„è„šæœ¬ã€‚ <br><br> ä¸‹ä¸€ä¸ªæœ€é‡è¦çš„<b>BuildBot</b>ç§°ä¸º<b>Worker</b> ã€‚ æ­¤æœåŠ¡å¯ä»¥åœ¨å…·æœ‰ä¸åŒæ“ä½œç³»ç»Ÿçš„å…¶ä»–ä¸»æœºä¸Šè¿è¡Œï¼Œâ€‹â€‹ä¹Ÿå¯ä»¥åœ¨<b>BuildMaster</b>æ‰€åœ¨çš„ä½ç½®ä¸Š<b>è¿è¡Œ</b> ã€‚ å®ƒä¹Ÿå¯ä»¥å­˜åœ¨äºå…·æœ‰å…¶è‡ªå·±çš„ç¨‹åºåŒ…å’Œå˜é‡çš„ç»è¿‡ç‰¹æ®Šå‡†å¤‡çš„è™šæ‹Ÿç¯å¢ƒä¸­ã€‚ å¯ä»¥ä½¿ç”¨<i>vertualenvï¼Œvenv</i>ç­‰pythonå®ç”¨å·¥å…·å‡†å¤‡è¿™äº›è™šæ‹Ÿç¯å¢ƒã€‚ <br><br>  <b>BuildMaster</b>å°†å‘½ä»¤å¹¿æ’­ç»™æ¯ä¸ª<b>Worker</b> ï¼Œç„¶åç”±ä»–ä»¬æ‰§è¡Œå®ƒä»¬ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹å®è¯æ˜ï¼Œæ„å»ºå’Œæµ‹è¯•é¡¹ç›®çš„è¿‡ç¨‹å¯ä»¥è½¬åˆ°Windowsä¸‹çš„<b>Worker</b>ä»¥åŠLinuxä¸‹çš„å¦ä¸€ä¸ªWorkerã€‚ <br><br> é¡¹ç›®æºä»£ç <i>çš„æ£€å‡º</i>å‘ç”Ÿåœ¨æ¯ä¸ª<b>Workerä¸Š</b> ã€‚ <br><br><a name="Install"></a><h3>  3.å®‰è£… </h3><hr><br> æ‰€ä»¥èµ°å§ æˆ‘å°†ä½¿ç”¨Ubuntu 18.04ä½œä¸ºä¸»æœºã€‚ åœ¨å…¶ä¸Šï¼Œæˆ‘å°†æ”¾ç½®ä¸€ä¸ª<b>BuildMaster</b> -aå’Œä¸€ä¸ª<b>Worker</b> -aã€‚ ä½†é¦–å…ˆæ‚¨éœ€è¦å®‰è£…python3.7ï¼š <br><br><pre><code class="bash hljs">sudo apt-get update sudo apt-get install python3.7</code> </pre> <br> å¯¹äºéœ€è¦python3.7.2è€Œä¸æ˜¯3.7.1çš„ç”¨æˆ·ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š <br><br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get software-properties-common sudo add-apt-repository ppa:deadsnakes/ppa sudo apt-get install python3.7 sudo ln -fs /usr/bin/python3.7 /usr/bin/python3 pip3 install --upgrade pip</code> </pre><br> ä¸‹ä¸€æ­¥æ˜¯å®‰è£…<i>Twited</i>å’Œ<b>BuildBot</b>ä»¥åŠå¯ç”¨å…¶ä»–<b>BuildBot</b> -aåŠŸèƒ½çš„è½¯ä»¶åŒ…ã€‚ <br><br><pre> <code class="bash hljs">/*   sudo        /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/python3.7/dist-packages*/ <span class="hljs-comment"><span class="hljs-comment">#     Worker- sudo pip install twisted # twisted sudo pip install buildbot #BuildMaster #  pip install pysqlite3 #  sqllite    pip install jinja2 #framework  django,  web     pip install autobahn #Web c   BuildMaster-&gt;Worker pip install sqlalchemy sqlalchemy-migrate #     # Web  BuildBot-a pip install buildbot-www buildbot-grid-view buildbot-console-view buildbot-waterfall-view pip install python-dateutil #   web #         pip install buildbot-worker #Worker #  sudo pip install virtualenv # </span></span></code> </pre><br><a name="master"></a><h3>  4.ç¬¬ä¸€æ­¥ </h3><hr><br> æ˜¯æ—¶å€™åˆ›å»ºä¸€ä¸ª<b>BuildMasteräº†</b> ã€‚ æˆ‘ä»¬å°†æŠŠå®ƒæ”¾åœ¨æ–‡ä»¶å¤¹<i>/ home / habr / masterä¸­</i> ã€‚ <br><pre> <code class="bash hljs">mkdir master buildbot create-master master <span class="hljs-comment"><span class="hljs-comment">#    </span></span></code> </pre> <br><a name="createworker"></a> ä¸‹ä¸€æ­¥ã€‚ åˆ›å»ºä¸€ä¸ª<b>å·¥äºº</b> ã€‚ æˆ‘ä»¬å°†æŠŠå®ƒæ”¾åœ¨æ–‡ä»¶å¤¹<i>/ home / habr / workerä¸­</i> ã€‚ <br><pre> <code class="bash hljs">mkdir worker buildbot-worker create-worker --<span class="hljs-built_in"><span class="hljs-built_in">umask</span></span>=0o22 --keepalive=60 worker localhost:4000 yourWorkerName password</code> </pre><br> å¯åŠ¨<b>Workeræ—¶</b> ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†åœ¨<i>/ home / habr / workerä¸­</i>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«é¡¹ç›®çš„åç§°ï¼Œè¯¥åç§°åœ¨<i>master.cfgä¸­</i>æŒ‡å®šã€‚ ç„¶ååœ¨å¸¦æœ‰é¡¹ç›®åç§°çš„æ–‡ä»¶å¤¹ä¸­ï¼Œä»–å°†åˆ›å»º<i>æ„å»º</i>ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸­è¿›è¡Œ<i>ç­¾å‡º</i> ã€‚  <b>Worker</b>çš„å·¥ä½œç›®å½•å°†æ˜¯ç›®å½•<i>/ home / habr / yourProject / build</i> ã€‚ <br><br>  <b>é‡‘é’¥åŒ™</b> <br> ç°åœ¨ï¼Œå¯¹äºæˆ‘ä¹‹å‰å†™çš„å†…å®¹ï¼šç”±äºè¯¥è„šæœ¬æ²¡æœ‰è¿è¡Œæƒé™ï¼Œå› æ­¤å°†ä¸ä¼šæ‰§è¡Œ<b>Master</b>å°†è¦æ±‚<b>Worker</b>åœ¨è¯¥ç›®å½•ä¸­è¿œç¨‹æ‰§è¡Œçš„è„šæœ¬ã€‚ è¦è§£å†³è¿™ç§æƒ…å†µï¼Œæ‚¨éœ€è¦ä¸€æŠŠé’¥åŒ™ <a name="umask"></a>  <i>--umask = 0o22</i> ï¼Œè¿™ç¦æ­¢å†™å…¥è¯¥ç›®å½•ï¼Œä½†<i>ä¿ç•™</i>å¯åŠ¨æƒé™ã€‚ æˆ‘ä»¬åªéœ€è¦è¿™ä¸ªã€‚ <br><br>  <b>BuildMaster</b>å’Œ<b>Worker</b>ä¹‹é—´å»ºç«‹äº†è”ç³»ã€‚ ç¢°å·§å®ƒä¸­æ–­äº†ï¼Œ <b>Worker</b>ç­‰å¾…<b>BuildMaster</b>çš„å“åº”ä¸€æ®µæ—¶é—´ã€‚ å¦‚æœæœªæ”¶åˆ°å“åº”ï¼Œåˆ™é‡æ–°å¯åŠ¨è¿æ¥ã€‚ å¯†é’¥<b>--keepalive = 60</b>æ­£æ˜¯æ‚¨éœ€è¦æŒ‡ç¤º<i>è¿æ¥</i>é‡æ–°å¯åŠ¨ä¹‹åçš„æ—¶é—´ã€‚ <br><br><a name="Recept"></a><h3>  5.é…ç½®ã€‚ é€æ­¥é£Ÿè°± </h3><hr><br>  <b>BuildMaster</b>é…ç½®åœ¨æœºå™¨ç«¯å®Œæˆï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­è¿è¡Œäº†<i>create-master</i>å‘½ä»¤ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™æ˜¯ç›®å½•<i>/ home / habr / master</i> ã€‚  <i>master.cfg</i>é…ç½®æ–‡ä»¶å°šä¸å­˜åœ¨ï¼Œä½†æ˜¯å‘½ä»¤æœ¬èº«å·²ç»åˆ›å»ºäº†<i>master.cmg.sample</i>æ–‡ä»¶ã€‚ æ‚¨éœ€è¦å°†å…¶åœ¨<i>master.cfg.sampleä¸­</i>é‡å‘½åä¸º<i>master.cfg</i> <br><pre> <code class="bash hljs">mv master.cfg.sample master.cfg</code> </pre> <br>  <i>è®©æˆ‘ä»¬</i>æ‰“å¼€è¿™ä¸ª<i>master.cfg</i> ã€‚ æˆ‘ä»¬å°†åˆ†æå®ƒçš„ç»„æˆã€‚ ä¹‹åï¼Œæˆ‘ä»¬å°†å°è¯•åˆ¶ä½œè‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">master.cfg</b> <div class="spoiler_text"><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>].append(changes.GitPoller( <span class="hljs-string"><span class="hljs-string">'git://github.com/buildbot/hello-world.git'</span></span>, workdir=<span class="hljs-string"><span class="hljs-string">'gitpoller-workdir'</span></span>, branch=<span class="hljs-string"><span class="hljs-string">'master'</span></span>, pollInterval=<span class="hljs-number"><span class="hljs-number">300</span></span>)) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.SingleBranchScheduler( name=<span class="hljs-string"><span class="hljs-string">"all"</span></span>, change_filter=util.ChangeFilter(branch=<span class="hljs-string"><span class="hljs-string">'master'</span></span>), treeStableTimer=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>])) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.ForceScheduler( name=<span class="hljs-string"><span class="hljs-string">"force"</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>])) factory = util.BuildFactory() factory.addStep(steps.Git(repourl=<span class="hljs-string"><span class="hljs-string">'git://github.com/buildbot/hello-world.git'</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'incremental'</span></span>)) factory.addStep(steps.ShellCommand(command=[<span class="hljs-string"><span class="hljs-string">"trial"</span></span>, <span class="hljs-string"><span class="hljs-string">"hello"</span></span>], env={<span class="hljs-string"><span class="hljs-string">"PYTHONPATH"</span></span>: <span class="hljs-string"><span class="hljs-string">"."</span></span>})) c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>].append( util.BuilderConfig(name=<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>, workernames=[<span class="hljs-string"><span class="hljs-string">"example-worker"</span></span>], factory=factory)) c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'title'</span></span>] = <span class="hljs-string"><span class="hljs-string">"Hello World CI"</span></span> c[<span class="hljs-string"><span class="hljs-string">'titleURL'</span></span>] = <span class="hljs-string"><span class="hljs-string">"https://buildbot.github.io/hello-world/"</span></span> c[<span class="hljs-string"><span class="hljs-string">'buildbotURL'</span></span>] = <span class="hljs-string"><span class="hljs-string">"http://localhost:8010/"</span></span> c[<span class="hljs-string"><span class="hljs-string">'www'</span></span>] = dict(port=<span class="hljs-number"><span class="hljs-number">8010</span></span>, plugins=dict(waterfall_view={}, console_view={}, grid_view={})) c[<span class="hljs-string"><span class="hljs-string">'db'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'db_url'</span></span> : <span class="hljs-string"><span class="hljs-string">"sqlite:///state.sqlite"</span></span>, }</code> </pre><br></div></div><br><a name="BC"></a><h4>  <u>5.1 BuildmasterConfig</u> </h4><br><pre> <code class="python hljs">c = BuildmasterConfig = {}</code> </pre> <br>  <i>BuildmasterConfig-</i>é…ç½®æ–‡ä»¶çš„åŸºæœ¬å­—å…¸ã€‚ å®ƒå¿…é¡»åŒ…å«åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚ ä¸ºäº†æ˜“äºä½¿ç”¨ï¼Œåœ¨é…ç½®ä»£ç ä¸­è¾“å…¥äº†åˆ«å<i>â€œ câ€</i> ã€‚  <i>c [â€œ keyFromDistâ€]</i>ä¸­çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é”®</a>åæ˜¯ç”¨äºä¸<i>BuildMaster</i>è¿›è¡Œäº¤äº’çš„å›ºå®šå…ƒç´ ã€‚ åœ¨æ¯ä¸ªé”®ä¸‹ï¼Œå°†ç›¸åº”çš„å¯¹è±¡æ›¿æ¢ä¸ºä¸€ä¸ªå€¼ã€‚ <br><br><a name="Worker"></a><h4>  <u>5.2å·¥äºº</u> </h4><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'workers'</span></span>] = [worker.Worker(<span class="hljs-string"><span class="hljs-string">"example-worker"</span></span>, <span class="hljs-string"><span class="hljs-string">"pass"</span></span>)]</code> </pre> <br> è¿™æ¬¡æˆ‘ä»¬æŒ‡å‡ºäº†<b>BuildMaster</b> <b>å·¥äºº</b>åˆ—è¡¨ã€‚ æˆ‘ä»¬é€šè¿‡æŒ‡å®š<i>you-worker-name</i>å’Œ<i>password</i>åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šé¢</a>åˆ›å»ºäº†<b>Worker</b> ã€‚ ç°åœ¨å¿…é¡»æŒ‡å®šå®ƒä»¬ï¼Œè€Œä¸æ˜¯<i>example-worker</i>å’Œ<i>pass</i> ã€‚ <br><br><a name="CS"></a><h4>  <u>5.3 change_source</u> </h4><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>].append(changes.GitPoller( <span class="hljs-string"><span class="hljs-string">'git://github.com/buildbot/hello-world.git'</span></span>, workdir=<span class="hljs-string"><span class="hljs-string">'gitpoller-workdir'</span></span>, branch=<span class="hljs-string"><span class="hljs-string">'master'</span></span>, pollInterval=<span class="hljs-number"><span class="hljs-number">300</span></span>))</code> </pre><br>  <i>ä½¿ç”¨c</i>è¯å…¸<i>çš„change_source</i>é”®ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨å°†æ‚¨è¦æ”¾ç½®çš„é¡¹ç›®çš„æºä»£ç è½®è¯¢å­˜å‚¨åº“ã€‚ è¯¥ç¤ºä¾‹ä½¿ç”¨Gitå­˜å‚¨åº“ï¼Œè¯¥å­˜å‚¨åº“ä¼šå®šæœŸè½®è¯¢ã€‚ <br><br> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­˜å‚¨åº“çš„è·¯å¾„ã€‚ <br><br>  <i>workdir</i>æ˜¯æŒ‡å‘<b>Worker</b>ä¸€ä¾§çš„æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œç›¸å¯¹äº<i>/ home / habr / worker / yourProject / build</i>è·¯å¾„<i>ï¼Œ</i> gitå°†å­˜å‚¨ç‰ˆæœ¬åº“çš„æœ¬åœ°ç‰ˆæœ¬ã€‚ <br><br>  <i>åˆ†æ”¯</i>åŒ…å«å­˜å‚¨åº“ä¸­åº”ç›‘è§†çš„ç‰¹å®šåˆ†æ”¯ã€‚ <br><br>  <i>pollInterval</i>åŒ…å«<b>BuildMaster</b>å°†è½®è¯¢å­˜å‚¨åº“ä»¥æŸ¥æ‰¾æ›´æ”¹çš„ç§’æ•°ã€‚ <br><br> æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è·Ÿè¸ªé¡¹ç›®å­˜å‚¨åº“ä¸­çš„æ›´æ”¹ã€‚ <br><br> æœ€ç®€å•çš„æ–¹æ³•æ˜¯<i>Polling</i> ï¼Œè¿™æ„å‘³ç€<b>BuildMasterä¼š</b>å®šæœŸä½¿ç”¨å­˜å‚¨åº“è½®è¯¢æœåŠ¡å™¨ã€‚ å¦‚æœ<i>æäº¤</i>åæ˜ äº†å­˜å‚¨åº“ä¸­çš„æ›´æ”¹ï¼Œåˆ™<b>BuildMaster</b>ä¼š<b>ç¨æœ‰</b>å»¶è¿Ÿåœ°åˆ›å»ºä¸€ä¸ªå†…éƒ¨<i>Change</i>å¯¹è±¡ï¼Œå¹¶å°†å…¶å‘é€åˆ°<i>Scheduler</i>äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¯¥äº‹ä»¶å¤„ç†ç¨‹åºå°†å¼€å§‹åœ¨<i>Worker</i>ä¸Šæ„å»ºå’Œæµ‹è¯•é¡¹ç›®çš„æ­¥éª¤ã€‚ åœ¨è¿™äº›æ­¥éª¤ä¸­ï¼Œå°†æŒ‡ç¤ºå­˜å‚¨åº“çš„<i>æ›´æ–°</i> ã€‚ åœ¨<b>Worker</b>ä¸Šå°†åˆ›å»ºå­˜å‚¨åº“çš„æœ¬åœ°å‰¯æœ¬ã€‚ è¯¥è¿‡ç¨‹çš„è¯¦ç»†ä¿¡æ¯å°†åœ¨ä¸‹é¢çš„ä¸¤ä¸ªéƒ¨åˆ†<b>ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.4</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5.5</a> ï¼‰ä¸­</b>å…¬å¼€ã€‚ <br><br> è·Ÿè¸ªå­˜å‚¨åº“ä¸­çš„æ›´æ”¹çš„ä¸€ç§æ›´ä¸ºä¼˜é›…çš„æ–¹æ³•æ˜¯ç›´æ¥ä»å…¶æ‰€åœ¨çš„æœåŠ¡å™¨å‘<b>BuildMasterå‘é€</b>æœ‰å…³æ›´æ”¹é¡¹ç›®æºä»£ç çš„æ¶ˆæ¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€æ—¦å¼€å‘äººå‘˜è¿›è¡Œäº†<i>æäº¤</i> ï¼Œå…·æœ‰é¡¹ç›®å­˜å‚¨åº“çš„æœåŠ¡å™¨å°±ä¼šå‘<b>BuildMaster</b>å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚ ç„¶åï¼Œå°†é€šè¿‡åˆ›å»º<i>PBChangeSource</i>å¯¹è±¡æ¥æ‹¦æˆªè¯¥å¯¹è±¡ã€‚ æ­¤å¤–ï¼Œè¯¥å¯¹è±¡å°†è¢«ä¼ é€åˆ°<i>Scheduler</i> ï¼Œåè€…å°†æ¿€æ´»é¡¹ç›®çš„ç»„è£…å’Œæµ‹è¯•æ­¥éª¤ã€‚ è¯¥æ–¹æ³•çš„é‡è¦éƒ¨åˆ†æ˜¯ä½¿ç”¨å­˜å‚¨åº“ä¸­çš„æœåŠ¡å™¨<i>æŒ‚é’©</i>è„šæœ¬ã€‚ åœ¨è´Ÿè´£å¤„ç†<i>æäº¤</i>æœŸé—´æ“ä½œçš„<i>æŒ‚é’©</i>è„šæœ¬ä¸­ï¼Œæ‚¨éœ€è¦è°ƒç”¨<i>sendchange</i>å®ç”¨ç¨‹åºå¹¶æŒ‡å®š<i>BuildMaster</i>çš„ç½‘ç»œåœ°å€ã€‚ æ‚¨å¿…é¡»<i>æŒ‡å®š</i>å°†ä¾¦å¬<i>PBChangeSourceçš„</i>ç½‘ç»œç«¯å£ã€‚  <i>é¡ºä¾¿è¯´ä¸€å¥</i> ï¼Œ <i>PBChangeSourceæ˜¯BuildMasterçš„</i>ä¸€éƒ¨åˆ†ã€‚ æ­¤æ–¹æ³•åœ¨é¡¹ç›®å­˜å‚¨åº“æ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šéœ€è¦<i>admin</i> -aç‰¹æƒã€‚ é¦–å…ˆï¼Œæ‚¨éœ€è¦åˆ¶ä½œä¸€ä¸ªå¤‡ä»½å­˜å‚¨åº“ã€‚ <br><br><a name="shedulers"></a><h4>  <u>5.4æ’æ”¾è€…</u> </h4><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.SingleBranchScheduler( name=<span class="hljs-string"><span class="hljs-string">"all"</span></span>, change_filter=util.ChangeFilter(branch=<span class="hljs-string"><span class="hljs-string">'master'</span></span>), treeStableTimer=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>])) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.ForceScheduler( name=<span class="hljs-string"><span class="hljs-string">"force"</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>]))</code> </pre><br>  <i>è°ƒåº¦ç¨‹åº</i>æ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä½œä¸ºè§¦å‘å™¨è¿è¡Œé¡¹ç›®çš„æ•´ä¸ªç»„è£…å’Œæµ‹è¯•é“¾ã€‚ <br><img src="https://habrastorage.org/webt/sh/1j/jo/sh1jjoo3rog47fsyjgqgorizyfs.png" alt="Buildbotå¸è½½ç¨‹åº"><br><br> ç”±<i>change_source</i>è®°å½•çš„é‚£äº›æ›´æ”¹åœ¨<b>BuildBot</b> -aæ“ä½œæœŸé—´è¢«è½¬æ¢ä¸º<i>Change</i>å¯¹è±¡ï¼Œç°åœ¨æ¯ä¸ªåŸºäºå®ƒä»¬çš„<i>Sheduler</i>éƒ½ç”Ÿæˆäº†å¯åŠ¨é¡¹ç›®æ„å»ºè¿‡ç¨‹çš„è¯·æ±‚ã€‚ ä½†æ˜¯ï¼Œå®ƒä¹Ÿç¡®å®šä½•æ—¶å°†è¿™äº›è¯·æ±‚å‘é€åˆ°é˜Ÿåˆ—ã€‚ å¯¹è±¡ <a name="builder"></a>  <i>Builder</i>ä¿ç•™è¯·æ±‚é˜Ÿåˆ—ï¼Œå¹¶åœ¨å•ç‹¬çš„<b>Worker</b> -eä¸Šç›‘è§†å½“å‰ç¨‹åºé›†çš„çŠ¶æ€ã€‚  <b>BuildMaster</b> -eå’Œ<b>Worker</b> -eä¸Š<b>éƒ½</b>å­˜åœ¨<i>Builder</i> ã€‚ ä»–å°†ç‰¹å®šçš„<i>æ„å»º</i>ä»<b>BuildMaster</b>å‘é€åˆ°<b>Worker</b> ï¼Œå¿…é¡»éµå¾ªä¸€ç³»åˆ—æ­¥éª¤ã€‚ <br> æˆ‘ä»¬çœ‹åˆ°ï¼Œåœ¨æ­¤ç±»<i>è°ƒåº¦ç¨‹åº</i>çš„å½“å‰ç¤ºä¾‹ä¸­ï¼Œåˆ›å»ºäº†2ä»¶ã€‚ è€Œä¸”ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„ç±»å‹ã€‚ <br><br>  <i>SingleBranchScheduler</i>æ˜¯æœ€å—æ¬¢è¿çš„æ—¥ç¨‹è¡¨ç±»ä¹‹ä¸€ã€‚ å®ƒç›‘è§†ä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶ç”±å…¶ä¸­çš„è®°å½•æ›´æ”¹è§¦å‘ã€‚ å½“ä»–çœ‹åˆ°æ›´æ”¹æ—¶ï¼Œå¯ä»¥æ¨è¿Ÿå‘é€æ„é€ è¯·æ±‚ï¼ˆæ¨è¿Ÿç‰¹æ®Šå‚æ•°<i>treeStableTimerä¸­</i>æŒ‡å®šçš„æ—¶é—´æ®µï¼‰ã€‚ è¯¥<i>åç§°</i>æŒ‡å®šå°†åœ¨<b>BuildBot</b> -webç•Œé¢ä¸­æ˜¾ç¤ºçš„è°ƒåº¦çš„åç§°ã€‚ åœ¨<i>ChangeFilterä¸­</i>è®¾ç½®ä¸€ä¸ª<i>è¿‡æ»¤å™¨</i>åï¼Œåˆ†æ”¯ä¸­çš„æ›´æ”¹å°†é€šè¿‡è¯¥<i>è¿‡æ»¤å™¨</i>æç¤ºæ—¶é—´è¡¨ä»¥å‘é€æ„å»ºè¯·æ±‚ã€‚ åœ¨<i>builderNamesä¸­</i>æŒ‡å®šäº†åç§°<i>builder</i> -aï¼Œç¨åå†æŒ‡å®šã€‚ åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œè¯¥åç§°å°†ä¸é¡¹ç›®çš„åç§°ç›¸åŒï¼š <i>yourProject</i> ã€‚ <br><br>  <i>ForceScheduleræ˜¯ä¸€ä»¶</i>éå¸¸ç®€å•çš„äº‹æƒ…ã€‚ è¿™ç§ç±»å‹çš„è®¡åˆ’æ˜¯é€šè¿‡åœ¨<b>BuildBot</b> -webç•Œé¢ä¸Šå•å‡»é¼ æ ‡è§¦å‘çš„ã€‚ å‚æ•°ä¸<i>SingleBranchScheduler</i>å…·æœ‰ç›¸åŒçš„æœ¬è´¨ã€‚ <br><br>  <b>PS 3å·</b>  <b>çªç„¶æ´¾ä¸Šç”¨åœº</b> <br>  <i>å®šæœŸ</i>æ˜¯æŒ‰ç‰¹å®šçš„å›ºå®šé¢‘ç‡è§¦å‘çš„è®¡åˆ’ã€‚ çœ‹èµ·æ¥åƒè¿™æ ·çš„ç”µè¯ <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> buildbot.plugins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> schedulers nightly = schedulers.Periodic(name=<span class="hljs-string"><span class="hljs-string">"daily"</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"full-solaris"</span></span>], periodicBuildTimer=<span class="hljs-number"><span class="hljs-number">24</span></span>*<span class="hljs-number"><span class="hljs-number">60</span></span>*<span class="hljs-number"><span class="hljs-number">60</span></span>) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [nightly]</code> </pre><br><a name="buildfactory"></a><h4>  <u>5.5å»ºé€ å·¥å‚</u> </h4><br><pre> <code class="python hljs">factory = util.BuildFactory() factory.addStep(steps.Git(repourl=<span class="hljs-string"><span class="hljs-string">'git://github.com/buildbot/hello-world.git'</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'incremental'</span></span>)) factory.addStep(steps.ShellCommand(command=[<span class="hljs-string"><span class="hljs-string">"trial"</span></span>, <span class="hljs-string"><span class="hljs-string">"hello"</span></span>], env={<span class="hljs-string"><span class="hljs-string">"PYTHONPATH"</span></span>: <span class="hljs-string"><span class="hljs-string">"."</span></span>}))</code> </pre><br>  <i>PeriodicalBuildTimer</i>ä»¥ç§’ä¸ºå•ä½è®¾ç½®æ­¤å‘¨æœŸæ€§çš„æ—¶é—´ã€‚ <br><br>  <i>BuildFactory</i>åˆ›å»ºä¸€ä¸ªå…·ä½“çš„<i>æ„å»º</i> ï¼Œç„¶å<i>æ„å»ºå™¨</i>å°†å…¶å‘é€ç»™<b>Worker</b> ã€‚  <i>BuildFactory</i>æŒ‡ç¤º<b>Worker</b>åº”è¯¥éµå¾ªçš„æ­¥éª¤ã€‚ é€šè¿‡è°ƒç”¨<i>addStep</i>æ–¹æ³•æ·»åŠ æ­¥éª¤<i>ã€‚</i> <i><br></i> <br><br> åœ¨æ­¤ç¤ºä¾‹ä¸­æ·»åŠ çš„ç¬¬ä¸€æ­¥æ˜¯<i>git clean -d -f -f â€“x</i> ï¼Œç„¶åæ˜¯<i>git checkout</i> ã€‚ è¿™äº›åŠ¨ä½œåµŒå…¥åœ¨<i>æ–¹æ³•</i>å‚æ•°ä¸­ï¼Œè¯¥å‚æ•°æœªæ˜ç¡®æŒ‡å‡ºï¼Œä½†æš—å«äº†é»˜è®¤å€¼<i>fresh</i> ã€‚  <i>mode ='incremental'</i>å‚æ•°æŒ‡ç¤ºå®Œæˆå­˜å‚¨çš„ç›®å½•ä¸­çš„æ–‡ä»¶ï¼ˆå°½ç®¡ä»å­˜å‚¨åº“ä¸­ä¸¢å¤±ï¼‰ä¿æŒä¸å˜ã€‚ <br><br> æ·»åŠ çš„ç¬¬äºŒä¸ªæ­¥éª¤æ˜¯ä½¿ç”¨ç¯å¢ƒå˜é‡PATHONPATH = ...ä»ç›®å½•<i>/ home / habr / worker / yourProject / buildä¸­</i>ä½¿ç”¨å¸¦æœ‰å˜é‡<i>helloçš„hello</i>å‚æ•°è°ƒç”¨<i>è¯•éªŒ</i>è„šæœ¬ï¼Œå› æ­¤æ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„è„šæœ¬å¹¶åœ¨<b>Worker</b>ç«¯æ‰§è¡Œ-aé€šè¿‡<i>util.ShellCommand</i>æ­¥éª¤ã€‚ è¿™äº›è„šæœ¬å¯ä»¥ç›´æ¥æ”¾å…¥å­˜å‚¨åº“ä¸­ã€‚ ç„¶ååœ¨<i>å¼€ç¥¨</i>æœŸé—´ï¼Œä»–ä»¬å°†è½¬åˆ°<i>/ home / habr / worker / yourProject / build</i> ã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªâ€œ butsâ€ï¼š <br><ol><li> å¿…é¡»ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><i>--umaskå¼€å…³</i></a>åˆ›å»º<b>Worker</b> ï¼Œä»¥ä¾¿åœ¨<i>ç­¾å‡º</i> -aä¹‹åä¸ä¼šé˜»æ­¢æ‰§è¡Œæƒé™ã€‚ </li><li> å½“<i>git push</i>è¿™äº›è„šæœ¬æ—¶ï¼Œå¿…é¡»æŒ‡å®š<i>exacutable</i>å±æ€§ï¼Œä»¥ä¾¿ä½¿ç”¨<i>chechout</i> -e Gitä¸ä¼šå¤±å»æ‰§è¡Œè„šæœ¬çš„æƒåˆ©ã€‚ </li></ol><br><br><a name="builders"></a><h4>  <u>5.6å»ºç­‘å•†</u> </h4><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>].append(util.BuilderConfig(name=<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>, workernames=[<span class="hljs-string"><span class="hljs-string">"example-worker"</span></span>], factory=factory))</code> </pre><br> å…³äº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>æè¿°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†</a>ä»€ä¹ˆ<i>Builder</i> ã€‚ ç°åœ¨ï¼Œæˆ‘å°†è¯¦ç»†è®¨è®ºå¦‚ä½•åˆ›å»ºå®ƒã€‚  <i>BuilderConfig</i>æ˜¯æ„é€ å‡½æ•°<i>builder</i> ã€‚ æ‚¨å¯ä»¥åœ¨<i>c ['builders']ä¸­</i>æŒ‡å®šå¤šä¸ªæ­¤ç±»æ„é€ å‡½æ•°ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ç³»åˆ—æ„é€ <i>å™¨</i>ç±»å‹å¯¹è±¡çš„åˆ—è¡¨ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°†ç¨å¾®é‡å†™<b>BuildBotä¸­</b>çš„ç¤ºä¾‹ï¼Œä½¿å…¶æ›´æ¥è¿‘æˆ‘ä»¬çš„ä»»åŠ¡ã€‚ <br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>].append(util.BuilderConfig(name=<span class="hljs-string"><span class="hljs-string">"yourProject"</span></span>, workernames=[<span class="hljs-string"><span class="hljs-string">"yourWorkerName"</span></span>], factory=factory))</code> </pre><br> ç°åœ¨ï¼Œæˆ‘å°†ä»‹ç»å‚æ•°<i>BuilderConfig</i> ã€‚ <br><br>  <i>name</i>è®¾ç½®åç§°<i>æ„å»ºå™¨</i> -aã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º<i>yourProject</i> ã€‚ è¿™æ„å‘³ç€å°†åœ¨<b>Workerä¸Šåˆ›å»º</b>æ­¤è·¯å¾„<i>/ home / habr / worker / yourProject / build</i> ã€‚  <i>Sheduler</i>ç”¨è¯¥åç§°æœç´¢<i>æ„å»ºå™¨</i> ã€‚ <br><br>  <i>workernames</i>åŒ…å«ä¸€ä¸ª<b>Workers</b>åˆ—è¡¨ã€‚ æ¯ä¸ªéƒ½å¿…é¡»æ·»åŠ åˆ°<i>c ['workers']ä¸­</i> ã€‚ <br><br>  <i>factory</i>æ˜¯ä¸<i>æ„å»ºå™¨</i>å…³è”çš„ç‰¹å®š<i>æ„å»º</i> ã€‚ å®ƒå°†å‘<i>æ„å»ºå™¨</i>å‘é€ä¸€ä¸ª<i>æ„å»º</i>å¯¹è±¡ï¼Œä»¥å®Œæˆæ„æˆè¯¥<i>æ„å»º</i> -açš„æ‰€æœ‰æ­¥éª¤ã€‚ <br><br><a name="myconfig"></a><h3>  6.è‡ªå·±çš„é…ç½®ç¤ºä¾‹ </h3><hr><br> è¿™æ˜¯æˆ‘å»ºè®®é€šè¿‡<b>BuildBot</b>å®ç°çš„ç¤ºä¾‹é¡¹ç›®æ¶æ„ <b><br></b>  ã€‚ <br><br> æˆ‘ä»¬å°†ä½¿ç”¨<i>svn</i>ä½œä¸ºç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚ å­˜å‚¨åº“æœ¬èº«å°†ä½äºç‰¹å®šçš„äº‘ä¸­ã€‚ è¿™æ˜¯æ­¤äº‘çš„åœ°å€<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">svn.host/svn/yourProject/trunk</a></i> ã€‚ åœ¨<i>svn</i>ä¸‹çš„äº‘ä¸­ï¼Œæœ‰ä¸€ä¸ªç”¨æˆ·åï¼š <i>user</i> ï¼Œpasswdï¼š <i>å¯†ç </i>å¸æˆ·ã€‚ ä½œä¸º<i>build</i> -aæ­¥éª¤çš„è„šæœ¬ä¹Ÿå°†ä½äº<i>svn</i>åˆ†æ”¯çš„å•ç‹¬<i>buildbot / worker_linuxæ–‡ä»¶å¤¹ä¸­</i> ã€‚ è¿™äº›è„šæœ¬ä½äºå­˜å‚¨åº“ä¸­ï¼Œå¹¶ä¿å­˜äº†<i>å¯æ‰§è¡Œæ–‡ä»¶</i>å±æ€§ã€‚ <br><br>  <b>BuildMaster</b>å’Œ<b>Worker</b>åœ¨åŒä¸€<i>project.host</i>ä¸»æœºä¸Šå·¥ä½œã€‚  <b>BuildMaster</b>å°†å…¶æ–‡ä»¶å­˜å‚¨åœ¨<i>/ home / habr / master</i>æ–‡ä»¶å¤¹ä¸­ã€‚  <b>Worker</b>å­˜å‚¨ä»¥ä¸‹è·¯å¾„<i>/ home / habr / worker</i> ã€‚  <b>BuildMaster</b>å’Œ<b>Worker</b>è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ˜¯ä½¿ç”¨<b>BuildBot</b> -aåè®®ï¼ˆå³<i>â€œ pbâ€</i>åè®®ï¼‰é€šè¿‡4000ç«¯å£è¿›è¡Œçš„ã€‚ <br><br> ç›®æ ‡é¡¹ç›®å®Œå…¨ç”¨pythonç¼–å†™ã€‚ ä»»åŠ¡æ˜¯è·Ÿè¸ªå…¶æ›´æ”¹ï¼Œåˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç”Ÿæˆæ–‡æ¡£ï¼Œè¿›è¡Œæµ‹è¯•ã€‚ ä¸‡ä¸€å‘ç”Ÿæ•…éšœï¼Œæ‰€æœ‰å¼€å‘äººå‘˜éƒ½éœ€è¦å‘é‚®ä»¶å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œè¯´æ˜æ“ä½œå¤±è´¥ã€‚ <br><br> æˆ‘ä»¬å°†æŠŠ<b>BuildBot</b> Webæ˜ å°„è¿æ¥åˆ°<i>project.hostçš„</i>ç«¯å£80ã€‚ ä¿®è¡¥ç¨‹åºæ˜¯å¯é€‰çš„ã€‚  <i>æ‰­æ›²çš„</i>åº“å·²ç»æœ‰ä¸€ä¸ªWebæœåŠ¡å™¨ï¼Œ <b>BuildBot</b>ä½¿ç”¨å®ƒã€‚ <br><br>  <b>æˆ‘ä»¬</b>å°†ä½¿ç”¨<i>sqlite</i>å­˜å‚¨<b>BuildBotçš„</b>å†…éƒ¨ä¿¡æ¯ã€‚ <br><br> å¯¹äºé‚®ä»¶å‘é€ï¼Œæ‚¨éœ€è¦ä¸»æœº<i>smtp.your.domain-</i>å®ƒå…è®¸ä»<i>projectHost@your.domain</i>å‘é€ç”µå­é‚®ä»¶è€Œæ— éœ€èº«ä»½éªŒè¯ã€‚ åŒæ ·åœ¨ä¸»æœºâ€œ <i>smtp</i> â€ä¸Šï¼Œè¯¥åè®®åœ¨1025å¹´è¢«ä¾¦å¬ã€‚ <br><br> æ­¤è¿‡ç¨‹æ¶‰åŠä¸¤ä¸ªäººï¼š <i>admin</i>å’Œ<i>user</i> ã€‚  adminç®¡ç†<b>BuildBot</b> ã€‚ ç”¨æˆ·æ˜¯æäº¤æäº¤çš„<i>äºº</i> ã€‚ <br><br> å¯æ‰§è¡Œæ–‡ä»¶æ˜¯é€šè¿‡<i>pyinstaller</i>ç”Ÿæˆçš„ã€‚ æ–‡æ¡£æ˜¯é€šè¿‡<i>doxygen</i>ç”Ÿæˆçš„ã€‚ <br><br> å¯¹äºè¿™ç§æ¶æ„ï¼Œæˆ‘ç¼–å†™äº†è¿™ä¸ª<i>master.cfg</i> ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">master.cfg</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os, re <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> buildbot.plugins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> steps, util, schedulers, worker, changes, reporters c= BuildmasterConfig ={} c[<span class="hljs-string"><span class="hljs-string">'workers'</span></span>] = [ worker.Worker(<span class="hljs-string"><span class="hljs-string">'yourWorkerName'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span>) ] c[<span class="hljs-string"><span class="hljs-string">'protocols'</span></span>] = {<span class="hljs-string"><span class="hljs-string">'pb'</span></span>: {<span class="hljs-string"><span class="hljs-string">'port'</span></span>: <span class="hljs-number"><span class="hljs-number">4000</span></span>}} svn_poller = changes.SVNPoller(repourl=<span class="hljs-string"><span class="hljs-string">"https://svn.host/svn/yourProject/trunk"</span></span>, svnuser=<span class="hljs-string"><span class="hljs-string">"user"</span></span>, svnpasswd=<span class="hljs-string"><span class="hljs-string">"password"</span></span>, pollinterval=<span class="hljs-number"><span class="hljs-number">60</span></span>, split_file=util.svn.split_file_alwaystrunk ) c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = svn_poller hourlyscheduler = schedulers.SingleBranchScheduler( name=<span class="hljs-string"><span class="hljs-string">"your-project-schedulers"</span></span>, change_filter=util.ChangeFilter(branch=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>), builderNames=[<span class="hljs-string"><span class="hljs-string">"yourProject"</span></span>], properties = {<span class="hljs-string"><span class="hljs-string">'owner'</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>} ) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [hourlyscheduler] checkout = steps.SVN(repourl=<span class="hljs-string"><span class="hljs-string">'https://svn.host/svn/yourProject/trunk'</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'full'</span></span>, method=<span class="hljs-string"><span class="hljs-string">'fresh'</span></span>, username=<span class="hljs-string"><span class="hljs-string">"user"</span></span>, password=<span class="hljs-string"><span class="hljs-string">"password"</span></span>, haltOnFailure=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) projectHost_build = util.BuildFactory() cleanProject = steps.ShellCommand(name=<span class="hljs-string"><span class="hljs-string">"Clean"</span></span>, command=[<span class="hljs-string"><span class="hljs-string">"buildbot/worker_linux/pyinstaller_project"</span></span>, <span class="hljs-string"><span class="hljs-string">"clean"</span></span>] ) buildProject = steps.ShellCommand(name=<span class="hljs-string"><span class="hljs-string">"Build"</span></span>, command=[<span class="hljs-string"><span class="hljs-string">"buildbot/worker_linux/pyinstaller_project"</span></span>, <span class="hljs-string"><span class="hljs-string">"build"</span></span>] ) doxyProject = steps.ShellCommand(name=<span class="hljs-string"><span class="hljs-string">"Update Docs"</span></span>, command=[<span class="hljs-string"><span class="hljs-string">"buildbot/worker_linux/gendoc"</span></span>, []] ) testProject = steps.ShellCommand(name=<span class="hljs-string"><span class="hljs-string">"Tests"</span></span>, command=[<span class="hljs-string"><span class="hljs-string">"python"</span></span>,<span class="hljs-string"><span class="hljs-string">"tests/utest.py"</span></span>], env={<span class="hljs-string"><span class="hljs-string">'PYTHONPATH'</span></span>: <span class="hljs-string"><span class="hljs-string">'.'</span></span>} ) projectHost_build.addStep(checkout) projectHost_build.addStep(cleanProject) projectHost_build.addStep(buildProject) projectHost_build.addStep(doxyProject) projectHost_build.addStep(testProject) c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [ util.BuilderConfig(name=<span class="hljs-string"><span class="hljs-string">"yourProject"</span></span>, workername=<span class="hljs-string"><span class="hljs-string">'yourWorkerName'</span></span>, factory=projectHost_build) ] template_html=<span class="hljs-string"><span class="hljs-string">u'''\ &lt;h4&gt;  : {{ summary }}&lt;/h4&gt; &lt;p&gt;   : {{ workername }}&lt;/p&gt; &lt;p&gt;: {{ projects }}&lt;/p&gt; &lt;p&gt;         : {{ buildbot_url }}&lt;/p&gt; &lt;p&gt;         : {{ build_url }}&lt;/p&gt; &lt;p&gt; WinSCP     c ip:xxx.xx.xxx.xx.   habr/password,   executable    ~/worker/yourProject/build/dist.&lt;/p&gt; &lt;p&gt;&lt;b&gt;    Buildbot&lt;/b&gt;&lt;/p&gt; '''</span></span> sendMessageToAll = reporters.MailNotifier(fromaddr=<span class="hljs-string"><span class="hljs-string">"projectHost@your.domain"</span></span>, sendToInterestedUsers=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, lookup=<span class="hljs-string"><span class="hljs-string">"your.domain"</span></span>, relayhost=<span class="hljs-string"><span class="hljs-string">"smtp.your.domain"</span></span>, smtpPort=<span class="hljs-number"><span class="hljs-number">1025</span></span>, mode=<span class="hljs-string"><span class="hljs-string">"warnings"</span></span>, extraRecipients=[<span class="hljs-string"><span class="hljs-string">'user@your.domain'</span></span>], messageFormatter=reporters.MessageFormatter( template=template_html, template_type=<span class="hljs-string"><span class="hljs-string">'html'</span></span>, wantProperties=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, wantSteps=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ) c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>] = [sendMessageToAll] c[<span class="hljs-string"><span class="hljs-string">'title'</span></span>] = <span class="hljs-string"><span class="hljs-string">"The process of bulding"</span></span> c[<span class="hljs-string"><span class="hljs-string">'titleURL'</span></span>] = <span class="hljs-string"><span class="hljs-string">"http://project.host:80/"</span></span> c[<span class="hljs-string"><span class="hljs-string">'buildbotURL'</span></span>] = <span class="hljs-string"><span class="hljs-string">"http://project.host"</span></span> c[<span class="hljs-string"><span class="hljs-string">'www'</span></span>] = dict(port=<span class="hljs-number"><span class="hljs-number">80</span></span>, plugins=dict(waterfall_view={}, console_view={}, grid_view={})) c[<span class="hljs-string"><span class="hljs-string">'db'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'db_url'</span></span> : <span class="hljs-string"><span class="hljs-string">"sqlite:///state.sqlite"</span></span> }</code> </pre><br></div></div><br> é¦–å…ˆï¼Œæ‚¨éœ€è¦<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ›å»º</a> <b>BuildMaster</b>å’Œ<b>Worker</b> -aã€‚ ç„¶åå°†æ­¤<i>master.cfg</i>æ–‡ä»¶ç²˜è´´åˆ°<i>/ home / habr / masterä¸­</i> ã€‚ <br><br> ä¸‹ä¸€æ­¥æ˜¯å¯åŠ¨<b>BuildMaster</b>æœåŠ¡ <br><pre> <code class="bash hljs">sudo buildbot start /home/habr/master</code> </pre><br> ç„¶åå¯åŠ¨<b>Worker</b> -aæœåŠ¡ <br><pre> <code class="bash hljs">buildbot-worker start /home/habr/worker</code> </pre><br> åšå®Œäº†ï¼ ç°åœ¨ï¼Œ <b>Buildbot</b>å°†è·Ÿè¸ªæ›´æ”¹å¹¶åœ¨<i>svnä¸­çš„</i> <i>commit</i>ä¸Š<b>æ‰§è¡Œ</b> ï¼Œéµå¾ªä½¿ç”¨ä¸Šè¿°æ¶æ„æ„å»ºå’Œæµ‹è¯•é¡¹ç›®çš„æ­¥éª¤ã€‚ <br><br> ä¸‹é¢ï¼Œæˆ‘å°†æè¿°ä¸Šè¿°<i>master.cfgçš„</i>ä¸€äº›åŠŸèƒ½<i>ã€‚</i> <i><br></i> <br><br><a name="fails"></a><h4>  <u>6.1åœ¨é€šå¾€master.cfgçš„é€”ä¸­</u> </h4><br> åœ¨ç¼–å†™<i>master.cfgæ—¶ï¼Œä¼š</i>å‘ç”Ÿå¾ˆå¤šé”™è¯¯ï¼Œå› æ­¤æ‚¨éœ€è¦è¯»å–æ—¥å¿—æ–‡ä»¶ã€‚ å®ƒæ—¢å­˜å‚¨åœ¨<i>BuildMaster</i> -ecç»å¯¹è·¯å¾„<i>/home/habr/master/twistd.log</i>ä¸Šï¼Œåˆå­˜å‚¨åœ¨<b>Worker</b> -aä¾§ï¼Œç»å¯¹è·¯å¾„ä¸º<i>/home/habr/worker/twistd.log</i> ã€‚ å½“æ‚¨é˜…è¯»å¹¶ä¿®å¤é”™è¯¯æ—¶ï¼Œå°†éœ€è¦é‡æ–°å¯åŠ¨<b>BuildMaster</b> -aæœåŠ¡ã€‚ æ–¹æ³•å¦‚ä¸‹ï¼š <br><pre> <code class="bash hljs">sudo buildbot stop /home/habr/master sudo buildbot upgrade-master /home/habr/master sudo buildbot start /home/habr/master</code> </pre><br><a name="svn"></a><h4>  <u>6.2ä½¿ç”¨svn</u> </h4><br><pre> <code class="python hljs">svn_poller = changes.SVNPoller(repourl=<span class="hljs-string"><span class="hljs-string">"https://svn.host/svn/yourProject/trunk"</span></span>, svnuser=<span class="hljs-string"><span class="hljs-string">"user"</span></span>, svnpasswd=<span class="hljs-string"><span class="hljs-string">"password"</span></span>, pollinterval=<span class="hljs-number"><span class="hljs-number">60</span></span>, split_file=util.svn.split_file_alwaystrunk ) c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = svn_poller hourlyscheduler = schedulers.SingleBranchScheduler( name=<span class="hljs-string"><span class="hljs-string">"your-project-schedulers"</span></span>, change_filter=util.ChangeFilter(branch=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>), builderNames=[<span class="hljs-string"><span class="hljs-string">"yourProject"</span></span>], properties = {<span class="hljs-string"><span class="hljs-string">'owner'</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>} ) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [hourlyscheduler] checkout = steps.SVN(repourl=<span class="hljs-string"><span class="hljs-string">'https://svn.host/svn/yourProject/trunk'</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'full'</span></span>, method=<span class="hljs-string"><span class="hljs-string">'fresh'</span></span>, username=<span class="hljs-string"><span class="hljs-string">"user"</span></span>, password=<span class="hljs-string"><span class="hljs-string">"password"</span></span>, haltOnFailure=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre><br> é¦–å…ˆï¼Œçœ‹ä¸€ä¸‹<i>svn_poller</i> ã€‚ è¯¥æ¥å£ä¸æ¯åˆ†é’Ÿå®šæœŸè½®è¯¢å­˜å‚¨åº“çš„æ¥å£ç›¸åŒã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <i>svn_poller</i>ä»…è®¿é—®<i>ä¸­ç»§</i>åˆ†æ”¯ã€‚ ç¥ç§˜çš„å‚æ•°<i>split_file = util.svn.split_file_alwaystrunk</i>è®¾ç½®è§„åˆ™ï¼šå¦‚ä½•å°†<i>svn</i>æ–‡ä»¶å¤¹çš„ç»“æ„æ‹†åˆ†ä¸ºåˆ†æ”¯ã€‚ ä»–ä¸ºä»–ä»¬æä¾›äº†ç›¸å¯¹çš„æ–¹å¼ã€‚ åè¿‡æ¥ï¼Œ <i>split_file_alwaystrunk</i>é€šè¿‡è¯´åªæœ‰<i>ä¸»å¹²</i>åœ¨å­˜å‚¨åº“ä¸­æ¥ç®€åŒ–äº†è¿‡ç¨‹ã€‚ <br><br> åœ¨<i>Schedulersä¸­</i> ï¼Œ <i>æŒ‡å®šChangeFilter</i> ï¼Œå®ƒçœ‹åˆ°<i>Noneï¼Œ</i>å¹¶é€šè¿‡<i>split_file_alwaystrunk</i>æ ¹æ®æŒ‡å®šçš„å…³è”å°†<i>ä¸»å¹²</i>åˆ†æ”¯ä¸å…¶å…³è”ã€‚ å“åº”<i>ä¸»å¹²ä¸­çš„</i>æ›´æ”¹ï¼Œå®ƒå°†å¯åŠ¨åä¸º<i>yourProject</i>çš„<i>æ„å»ºå™¨</i> ã€‚ <br><br> éœ€è¦æ­¤å¤„çš„<i>å±æ€§</i> ï¼Œä»¥ä¾¿ç®¡ç†å‘˜ä½œä¸ºè¿‡ç¨‹çš„æ‰€æœ‰è€…ä»è£…é…å’Œæµ‹è¯•ç»“æœä¸­æ¥æ”¶æ–°é—»é€šè®¯ã€‚ <br><br>  <i>build</i> -a <i>checkout</i>æ­¥éª¤èƒ½å¤Ÿå®Œå…¨åˆ é™¤<b>Worker</b>å­˜å‚¨åº“çš„æœ¬åœ°ç‰ˆæœ¬ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚ ç„¶åæ‰§è¡Œå®Œæ•´çš„<i>svnæ›´æ–°</i> ã€‚ è¯¥æ¨¡å¼é€šè¿‡å‚æ•°<i>mode = full</i> ï¼Œ <i>method = freshè¿›è¡Œé…ç½®</i> ã€‚  <i>haltOnTailure</i>å‚æ•°æŒ‡ç¤ºï¼Œå¦‚æœ<i>svnæ›´æ–°</i> <i>ä¸æˆåŠŸ</i> ï¼Œåˆ™åº”æš‚åœæ•´ä¸ªç»„è£…å’Œæµ‹è¯•è¿‡ç¨‹ï¼Œå› ä¸ºè¿›ä¸€æ­¥çš„æ­¥éª¤æ²¡æœ‰æ„ä¹‰ã€‚ <br><br><a name="reporter"></a><h4>  <u>6.3ç»™æ‚¨çš„ä¿¡ï¼šè®°è€…æœ‰æƒå£°æ˜</u> </h4><br>  <i>è®°è€…</i>æ˜¯é‚®ä»¶é€šçŸ¥æœåŠ¡ã€‚ <br><pre> <code class="python hljs">template_html=<span class="hljs-string"><span class="hljs-string">u'''\ &lt;h4&gt;  : {{ summary }}&lt;/h4&gt; &lt;p&gt;   : {{ workername }}&lt;/p&gt; &lt;p&gt;: {{ projects }}&lt;/p&gt; &lt;p&gt;         : {{ buildbot_url }}&lt;/p&gt; &lt;p&gt;         : {{ build_url }}&lt;/p&gt; &lt;p&gt; WinSCP     c ip:xxx.xx.xxx.xx.   habr/password,   executable    ~/worker/yourProject/build/dist.&lt;/p&gt; &lt;p&gt;&lt;b&gt;    Buildbot&lt;/b&gt;&lt;/p&gt; '''</span></span> sendMessageToAll = reporters.MailNotifier(fromaddr=<span class="hljs-string"><span class="hljs-string">"projectHost@your.domain"</span></span>, sendToInterestedUsers=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, lookup=<span class="hljs-string"><span class="hljs-string">"your.domain"</span></span>, relayhost=<span class="hljs-string"><span class="hljs-string">"smtp.your.domain"</span></span>, smtpPort=<span class="hljs-number"><span class="hljs-number">1025</span></span>, mode=<span class="hljs-string"><span class="hljs-string">"warnings"</span></span>, extraRecipients=[<span class="hljs-string"><span class="hljs-string">'user@your.domain'</span></span>], messageFormatter=reporters.MessageFormatter( template=template_html, template_type=<span class="hljs-string"><span class="hljs-string">'html'</span></span>, wantProperties=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, wantSteps=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ) c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>] = [sendMessageToAll]</code> </pre><br> å®ƒå¯ä»¥é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¤šç§æ–¹å¼</a>å‘é€æ¶ˆæ¯ã€‚ <br><br>  <i>MailNotifier</i>ä½¿ç”¨é‚®ä»¶å‘é€é€šçŸ¥ã€‚ <br><br>  <i>template_html</i>è®¾ç½®æ–°é—»é€šè®¯çš„æ–‡æœ¬æ¨¡æ¿ã€‚ è¦åˆ›å»ºæ ‡è®°ï¼Œè¯·ä½¿ç”¨htmlã€‚ å®ƒæ˜¯ç”±<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><i>jinja2</i></a>å¼•æ“ä¿®æ”¹çš„ï¼ˆå¯ä»¥ä¸<i>django</i>è¿›è¡Œæ¯”è¾ƒï¼‰ã€‚  <b>BuildBot</b>å…·æœ‰ä¸€ç»„å˜é‡ï¼Œåœ¨å½¢æˆæ¶ˆæ¯æ–‡æœ¬çš„è¿‡ç¨‹ä¸­ï¼Œå°†å…¶å€¼æ›¿æ¢ä¸ºæ¨¡æ¿ã€‚ è¿™äº›å˜é‡åˆ»åœ¨{{doubleèŠ±æ‹¬å·}}ä¸­ã€‚ å› æ­¤ï¼Œä¾‹å¦‚ï¼Œ <i>æ‘˜è¦</i>æ˜¾ç¤ºå·²å®Œæˆæ“ä½œçš„çŠ¶æ€ï¼Œå³æˆåŠŸæˆ–å¤±è´¥ã€‚  <i>é¡¹ç›®</i>å°†è¾“å‡º<i>yourProject</i> ã€‚ å› æ­¤ï¼Œä½¿ç”¨<i>jinja2</i> ï¼Œ <i>BuildBot</i>å˜é‡å’Œpythonå­—ç¬¦ä¸²æ ¼å¼åŒ–ç¨‹åºä¸­çš„æ§åˆ¶å‘½ä»¤ï¼Œæ‚¨å¯ä»¥åˆ›å»ºéå¸¸æœ‰ç”¨çš„æ¶ˆæ¯ã€‚ <br><br>  <i>MailNotifier</i>åŒ…å«ä»¥ä¸‹å‚æ•°ã€‚ <br><br>  <i>fromaddr-</i>æ¯ä¸ªäººéƒ½å°†ä»å…¶æ¥æ”¶æ–°é—»é€šè®¯çš„åœ°å€ã€‚ <br><br>  <i>sendToInterestedUsers</i> = Trueå‘è¿›è¡Œæäº¤çš„æ‰€æœ‰è€…å’Œç”¨æˆ·å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚ <br><br>  <i>æŸ¥æ‰¾</i> -åç¼€æ·»åŠ åˆ°æ¥æ”¶æ—¶äº‹é€šè®¯çš„ç”¨æˆ·åä¸­ã€‚ å› æ­¤ï¼Œä½œä¸ºç”¨æˆ·çš„<i>ç®¡ç†å‘˜</i>å°†é€šè¿‡admin@your.domainæ¥æ”¶æ—¶äº‹é€šè®¯ã€‚ <br><br>  <i>relayhost</i>æŒ‡å®šæ‰“å¼€<i>smtp</i>æœåŠ¡å™¨çš„ä¸»æœºåï¼Œ <i>smptPort</i>æŒ‡å®š<i>smtp</i>æœåŠ¡å™¨ä¾¦å¬çš„ç«¯å£å·ã€‚ <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mode =â€œ warningâ€</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨ç¤ºåªæœ‰åœ¨è‡³å°‘ä¸€ä¸ª</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ„å»º</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¥éª¤</font><font style="vertical-align: inherit;">ä»¥å¤±è´¥æˆ–è­¦å‘ŠçŠ¶æ€ç»“æŸçš„æƒ…å†µä¸‹ï¼Œ</font><font style="vertical-align: inherit;">æ‰åº”è¿›è¡Œé‚®ä»¶å‘é€</font><font style="vertical-align: inherit;">ã€‚å¦‚æœæˆåŠŸï¼Œåˆ™ä¸éœ€è¦é‚®å¯„ã€‚</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extraRecipients</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…å«ä¸€ä¸ªåˆ—è¡¨ï¼Œé™¤äº†æ‰€æœ‰è€…å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æäº¤</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è€…ä¹‹å¤–ï¼Œè¿˜åº”å‘ä»–ä»¬å‘é€é‚®ä»¶</font><font style="vertical-align: inherit;">ã€‚</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">messageFormatter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå®šä¹‰æ¶ˆæ¯çš„æ ¼å¼ï¼Œå…¶æ¨¡æ¿ä»¥åŠ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jinja2ä¸­</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ç”¨çš„å˜é‡é›†</font><font style="vertical-align: inherit;">ã€‚è¯¸å¦‚</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wantProperties = True</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wantSteps = Trueä¹‹ç±»çš„å‚æ•°</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‡å®šäº†è¿™ç»„å¯ç”¨å˜é‡ã€‚</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸['services'] = [sendMessageToAll]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æä¾›æœåŠ¡åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…æ‹¬æˆ‘ä»¬çš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®°è€…</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><a name="goodboy"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬åšåˆ°äº†ï¼</font><font style="vertical-align: inherit;">æ­å–œä½ </font></font></h3><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬åˆ›å»ºäº†è‡ªå·±çš„é…ç½®ï¼Œå¹¶çœ‹åˆ°äº†</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BuildBotå…·å¤‡çš„åŠŸèƒ½</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘è®¤ä¸ºï¼Œè¿™è¶³ä»¥äº†è§£æ˜¯å¦éœ€è¦ä½¿ç”¨æ­¤å·¥å…·æ¥åˆ›å»ºæ‚¨çš„é¡¹ç›®ã€‚</font><font style="vertical-align: inherit;">ä»–å¯¹ä½ æ„Ÿå…´è¶£å—ï¼Ÿ</font><font style="vertical-align: inherit;">å®ƒä¼šä¸ºæ‚¨æ´¾ä¸Šç”¨åœºå—ï¼Ÿ</font><font style="vertical-align: inherit;">æ–¹ä¾¿å—ï¼Ÿ</font><font style="vertical-align: inherit;">ç„¶åï¼Œæˆ‘æœ‰å……åˆ†çš„ç†ç”±å†™è¿™ç¯‡æ–‡ç« ã€‚</font></font><br><br> è¿˜æœ‰ä¸€ä»¶äº‹ã€‚<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘å¸Œæœ›ä½¿ç”¨</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BuildBot</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„ä¸“ä¸šç¤¾åŒº</font><font style="vertical-align: inherit;">å˜å¾—æ›´å¹¿æ³›ï¼Œç¿»è¯‘æ‰‹å†Œå¹¶æä¾›æ›´å¤šç¤ºä¾‹ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è°¢è°¢å¤§å®¶çš„å…³æ³¨ã€‚</font><font style="vertical-align: inherit;">ç¥ä½ å¥½è¿</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN460501/">https://habr.com/ru/post/zh-CN460501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN460491/index.html">å…·æœ‰å‘é€å’Œç»˜å›¾åŠŸèƒ½çš„Arduinoæ¸©åº¦å’Œæ¹¿åº¦ä¼ æ„Ÿå™¨ï¼ˆç¬¬1éƒ¨åˆ†ï¼‰</a></li>
<li><a href="../zh-CN460493/index.html">80å¹´ä»£ç”¨äºPCçš„â€œæ€æ‰‹çº§åº”ç”¨â€ï¼šVisiCalcå’ŒWordStar</a></li>
<li><a href="../zh-CN460495/index.html">å®¹å™¨åˆ°ç®¡é“ï¼šCRI-Oç°åœ¨æ˜¯OpenShift Container Platform 4ä¸­çš„é»˜è®¤å®¹å™¨</a></li>
<li><a href="../zh-CN460497/index.html">é©¬å°”å¯å¤«é“¾åœ¨è’™ç‰¹å¡æ´›æ–¹æ³•ä¸­çš„ç›´è§‚ä½¿ç”¨</a></li>
<li><a href="../zh-CN460499/index.html">Dijkstraå¥–çš„ä¸‰ä½è·å¥–è€…ï¼šHydra 2019å’ŒSPTDC 2019å¦‚ä½•</a></li>
<li><a href="../zh-CN460503/index.html">Raspberry PI 3 B +çš„æ— çº¿é…ç½®</a></li>
<li><a href="../zh-CN460505/index.html">å¸å¼•ä¸‰ä¸ªåå­—æ¶ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆé¡¹ç›®å¦‚æ­¤éš¾ä»¥æŒ‰æ—¶å®Œæˆ</a></li>
<li><a href="../zh-CN460507/index.html">XENä¸æ±½è½¦çš„æœªæ¥ï¼šå¼€æºç®¡ç†ç¨‹åºå¦‚ä½•æˆä¸ºå•†ç”¨æ±½è½¦è§£å†³æ–¹æ¡ˆçš„ç«äº‰å¯¹æ‰‹</a></li>
<li><a href="../zh-CN460509/index.html">å±…æ°‘ä»£ç†å¦‚ä½•ä¸ºä¼ä¸šæä¾›å¸®åŠ©ï¼šåœ¨æ•°æ®æŒ–æ˜ä¸­ä½¿ç”¨Infaticaçš„çœŸå®æ¡ˆä¾‹</a></li>
<li><a href="../zh-CN460511/index.html">PHP-FPMè°ƒä¼˜ï¼šä½¿ç”¨pm staticå¯è·å¾—æœ€ä½³æ€§èƒ½</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>