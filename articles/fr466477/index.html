<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¨ üë¶üèæ üßëüèæ‚Äçü§ù‚ÄçüßëüèΩ Utilisation de PVS-Studio lors de la v√©rification de projets Unreal Engine sur le syst√®me d'exploitation Windows üíÖüèª üíû ü§∞üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article se concentre sur les sp√©cificit√©s de la v√©rification des projets Unreal Engine avec l'analyseur statique PVS-Studio sur le syst√®me d'explo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation de PVS-Studio lors de la v√©rification de projets Unreal Engine sur le syst√®me d'exploitation Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/466477/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/977/529/b80/977529b809b96ad36c8f2c766610263a.png" alt="Image 2"></div><br>  Cet article se concentre sur les sp√©cificit√©s de la v√©rification des projets Unreal Engine avec l'analyseur statique PVS-Studio sur le syst√®me d'exploitation Windows: comment installer l'analyseur, v√©rifier un projet, o√π et comment afficher un rapport d'erreur. <br><a name="habracut"></a><br>  Une partie int√©grante de la s√©rie de nos articles sont des sujets li√©s √† l'industrie du jeu.  V√©rifiez un moteur r√©el utilis√© dans les jeux AAA - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vous √™tes les bienvenus</a> , venez avec les meilleures erreurs dans l'industrie du jeu - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">allez-y</a> , trouvez des bugs dans l'un des moteurs de jeux les plus populaires Unreal Engine (UE) - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">assez facile</a> .  Dans le d√©veloppement de jeux, ainsi que dans toute autre application, la qualit√© du code est importante.  Les erreurs sont mieux d√©tect√©es le plus t√¥t possible et la meilleure option est de le faire automatiquement - c'est l√† que les analyseurs de code statique viennent en aide aux programmeurs. <br><br>  Dans cet article, je vais essayer de parler bri√®vement de la fa√ßon dont vous pouvez utiliser l'analyseur statique PVS-Studio pour v√©rifier les projets cr√©√©s dans UE.  PVS-Studio peut vous aider √† am√©liorer le code de votre projet en y trouvant des bogues, vous permettant ainsi de r√©duire le temps que vous passez sur la r√©vision du code. <br><br>  Veuillez noter que cet article est un ajout √† la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> existante sur l'analyse des projets UE et ne sert pas √† le remplacer, empruntant largement le contenu de la documentation. <br><br><h2>  Installation de PVS-Studio </h2><br>  La fa√ßon la plus simple d'installer l'analyseur PVS-Studio est de t√©l√©charger son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fichier d'installation</a> .  Pour pouvoir analyser les projets cr√©√©s dans UE, vous devez s√©lectionner les composants suivants lors de l'installation de PVS-Studio: "Surveillance du compilateur C et C ++" et "Int√©gration avec Microsoft Visual Studio (Visual C ++ / C #)".  Le dernier point est responsable de l'int√©gration du plugin PVS-Studio dans l'IDE de Visual Studio, √† travers lequel il est pratique de travailler avec le journal des erreurs et avec les param√®tres g√©n√©raux de l'analyseur lui-m√™me. <br><br>  Pour fonctionner pleinement avec PVS-Studio, vous devez saisir une licence.  Vous pouvez le faire en ouvrant Visual Studio (VS) IDE et en entrant la licence dans 'PVS-Studio | Options ... | Enregistrement'.  Dans VS 2019, le menu PVS-Studio a √©t√© d√©plac√© vers le menu 'Extensions', le chemin d'acc√®s √† la fen√™tre d'entr√©e de licence ressemble √† ceci: 'Extensions' | 'PVS-Studio | Options ... | Enregistrement'.  La licence est disponible sur notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site Web</a> . <br><br>  Pour construire des projets UE, un programme UnrealBuildTool (UBT) personnalis√© d'Epic Games est utilis√©, pas un syst√®me de construction standard, utilis√© dans VS (MSBuild).  √Ä cet √©gard, le plugin PVS-Studio n'est pas en mesure d'impl√©menter un sc√©nario habituel de v√©rification des projets C ++ / C #, cr√©√© dans VS: "PVS-Studio -&gt; V√©rifier -&gt; Projet actuel".  Il existe plusieurs solutions pour √©viter cette limitation. <br><br><h2>  Ex√©cution d'une analyse avec le syst√®me de surveillance de la compilation </h2><br>  La premi√®re et la plus simple pour v√©rifier un projet UE consiste √† utiliser le programme C et C ++ Compiler Monitoring (nomm√© Standalone.exe), situ√© dans le r√©pertoire d'installation de PVS-Studio.  Le principe de son travail est qu'il surveille les processus du compilateur qui correspondent au compilateur cible (dans ce cas, cl.exe) et rassemble toutes les informations n√©cessaires pour le pr√©traitement et l'analyse approfondie des fichiers source.  Apr√®s avoir ouvert la surveillance du compilateur C et C ++, utilisez le menu "Outils" et choisissez l'option "Analyser vos fichiers (C et C ++) ...".  Appuyez sur "D√©marrer la surveillance" et vous verrez la fen√™tre dans le coin inf√©rieur gauche vous indiquant que la surveillance des appels du compilateur est en cours: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d04/c56/21a/d04c5621a3674d9003777275c3698398.png" alt="Image 1"></div><br>  Ensuite, construisez votre projet UE et appuyez sur "Arr√™ter la surveillance". <br><br>  Apr√®s cela, l'analyse des fichiers source compil√©s commencera.  Le rapport des avertissements trouv√©s sera affich√© dans la fen√™tre "Sortie analyseur" du programme C et C ++ Compiler Monitoring. <br><br>  Une surveillance d'appels de compilateur similaire et une analyse ult√©rieure des fichiers d√©tect√©s peuvent √™tre effectu√©es √† l'aide du programme de console CLMonitor.exe, situ√© dans le m√™me dossier, o√π PVS-Studio a √©t√© install√©.  CLMonitor.exe a deux modes de fonctionnement: un mode serveur lorsque les lancements de processus (correspondant au compilateur cible) sont surveill√©s et un mode client (lorsque les fichiers source, d√©tect√©s au stade de la surveillance, sont analys√©s, suivi d'un rapport des r√©sultats d'analyse) .  Afin d'ex√©cuter CLMonitor.exe en mode serveur, ex√©cutez la commande suivante: <br><br><pre><code class="cpp hljs">CLMonitor.exe monitor</code> </pre> <br>  Apr√®s cela, g√©n√©rez votre projet UE et ex√©cutez la commande ci-dessous: <br><br><pre> <code class="cpp hljs">CLMonitor.exe analyze -l <span class="hljs-string"><span class="hljs-string">"c:\ptest.plog"</span></span></code> </pre> <br>  La commande "analyse" ex√©cute CLMonitor.exe en mode client et ferme l'instance en cours d'ex√©cution de ce programme, travaillant en mode serveur.  Apr√®s avoir ex√©cut√© cette commande, CLMonitor.exe commencera √† ex√©cuter l'analyse des fichiers.  Un param√®tre pour l'option "- l" est un chemin d'acc√®s au fichier, dans lequel les r√©sultats de l'analyseur seront √©crits. <br><br><h2>  Ex√©cution d'une analyse avec la cl√© -StaticAnalyzer = PVSStudio </h2><br>  Une approche diff√©rente et plus pratique pour analyser les projets UE est une int√©gration directe avec le syst√®me construit UBT.  Pour ce faire, ouvrez la fen√™tre de propri√©t√©s de votre projet UE dans VS et choisissez "NMake" dans la liste "Propri√©t√©s de configuration".  Ajoutez -StaticAnalyzer = PVSStudio dans le champ de texte de la propri√©t√© "Build Command Line".  Par exemple, la valeur du champ "Build Command Line" peut ressembler √† ceci: <br><br><pre> <code class="cpp hljs">C:\Program Files\Epic Games\UE_4<span class="hljs-number"><span class="hljs-number">.22</span></span>\Engine\Build\BatchFiles\Build.bat<span class="hljs-string"><span class="hljs-string">" MyProject Win64 DebugGame -Project="</span></span>$(SolutionDir)$(ProjectName).uproject<span class="hljs-string"><span class="hljs-string">" -WaitMutex -FromMsBuild -StaticAnalyzer=PVSStudio</span></span></code> </pre> <br>  Il convient de prendre en compte que lors de l'ex√©cution d'une construction de projet, il sera uniquement analys√©, pas construit.  Le sc√©nario dans lequel un projet est √† la fois construit et analys√© sera d√©crit ci-dessous.  Il convient √©galement de noter que seuls les fichiers source qui ont √©t√© modifi√©s depuis la derni√®re version du projet seront analys√©s.  La modification d'un fichier .h inclus n'est pas une raison pour effectuer l'analyse lors de la prochaine g√©n√©ration.  Pour effectuer une analyse compl√®te, vous devez ajouter le m√™me indicateur dans le champ de texte de la propri√©t√© "Rebuild All Command Line".  Maintenant, lors de la reconstruction du projet, vous obtiendrez le r√©sultat de l'analyse de l'ensemble du projet. <br><br><h2>  Ex√©cution de l'analyse via la modification des fichiers de package </h2><br>  Consid√©rons maintenant un autre sc√©nario de l'int√©gration de l'analyseur PVS-Studio dans le syst√®me de construction UBT.  Ce faisant, l'analyse d√©marre juste apr√®s avoir effectu√© une construction / reconstruction de projet.  En d'autres termes, vous obtenez √† la fois un projet construit et un fichier avec les r√©sultats d'analyse.  Vous avez peut-√™tre remarqu√© que le champ Build Command Line contient le chemin d'acc√®s au fichier de commandes Build.bat, qui, √† son tour, contient des instructions pour ex√©cuter UBT avec les arguments n√©cessaires.  Build.bat s'ex√©cute au tout d√©but de la g√©n√©ration. <br><br>  Le point est de changer le fichier batch afin qu'il puisse d'abord ex√©cuter UBT avec des arguments de construction standard, puis, si une g√©n√©ration se termine avec succ√®s, ex√©cutez le m√™me UBT, mais d√©j√† avec un indicateur suppl√©mentaire -StaticAnalyzer = PVSStudio.  Pour impl√©menter le sc√©nario ci-dessus, vous pouvez modifier le fichier de commandes Build.bat.  Il est encore pr√©f√©rable de cr√©er sa copie nomm√©e, par exemple, BuildAndAnalyze.bat.  Voici ce que vous devez faire pour impl√©menter le sc√©nario d√©crit.  Juste apr√®s la commande popd, ins√©rez les instructions suivantes: <br><br><pre> <code class="cpp hljs">SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS"</span></span> IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"0"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"2"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF DEFINED NEED_TO_PERFORM_ANALYSIS ( pushd <span class="hljs-string"><span class="hljs-string">"%~dp0\..\..\Source"</span></span> ECHO Running <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> analysis ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %* -StaticAnalyzer=PVSStudio -DEPLOY popd SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> )</code> </pre> <br>  Si l'indicateur -StaticAnalyzer = PVSStudio a √©t√© pr√©c√©demment install√© dans le champ Build Command Line dans les param√®tres 'Properties | Configuration Properties | NMake' du projet, il doit √™tre supprim√©. <br><br>  Le probl√®me avec cette approche est que seuls les fichiers qui ont √©t√© compil√©s lors de la g√©n√©ration seront analys√©s.  Autrement dit, vous ne recevrez pas de fichier de rapport avec une v√©rification compl√®te de votre projet.  De plus, toute modification apport√©e aux fichiers .h inclus ne sera pas non plus prise en compte.  Par cons√©quent, nous ne pouvons pas appeler cette analyse incr√©mentielle, car les modifications dans les fichiers d'en-t√™te ne d√©clencheront pas l'analyse lors de la prochaine g√©n√©ration.  Dans ce cas, vous pouvez reconstruire le projet, en obtenant le r√©sultat de l'analyse pour l'ensemble du projet.  Cependant, la g√©n√©ration compl√®te peut prendre du temps, vous pouvez donc suivre ce sc√©nario: cr√©er une g√©n√©ration, supprimer le fichier de cache ActionHistory.bin, ex√©cuter la g√©n√©ration avec l'indicateur -StaticAnalyzer = PVSStudio, restaurer le fichier de cache.  Le fichier ActionHistory.bin contient les informations n√©cessaires pour effectuer une g√©n√©ration incr√©mentielle ainsi que l'historique d'ex√©cution de l'analyseur pour les fichiers v√©rifi√©s. <br><br>  √Ä premi√®re vue, ce sc√©nario peut ne pas sembler le plus simple, nous vous fournirons donc un ensemble complet d'instructions sur la fa√ßon de modifier le fichier Build.bat d'origine.  Il convient de noter que ces modifications ne concernent que Unreal Engine version 4.21 et versions ult√©rieures.  Apr√®s la commande setlocal enabledelayedexpansion, d√©clarez les variables suivantes: <br><br><pre> <code class="cpp hljs">SET PROJECT_NAME=%<span class="hljs-number"><span class="hljs-number">1</span></span>% SET PLATFORM=%<span class="hljs-number"><span class="hljs-number">2</span></span>% SET UPROJECT_FILE=%~<span class="hljs-number"><span class="hljs-number">5</span></span> SET ACTIONHISTORY_FOLDER= %UPROJECT_FILE%\..\Intermediate\Build\%PLATFORM%\%PROJECT_NAME% SET ACTION_HISTORY=ActionHistory.bin SET ACTION_HISTORY_BAC=%ACTION_HISTORY%.bac SET ACTIONHISTORY_PATH=<span class="hljs-string"><span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY%"</span></span> SET ACTIONHISTORY_BAC_PATH= <span class="hljs-string"><span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY_BAC%"</span></span></code> </pre> <br>  Juste apr√®s l'instruction popd, ins√©rez ces commandes: <br><pre> <code class="cpp hljs">SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS="</span></span> IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"0"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"2"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF DEFINED NEED_TO_PERFORM_ANALYSIS ( pushd <span class="hljs-string"><span class="hljs-string">"%~dp0\..\..\Source"</span></span> ECHO Running <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> analysis IF EXIST %ACTIONHISTORY_PATH% ( ECHO Copying %ACTION_HISTORY% to %ACTION_HISTORY_BAC% COPY %ACTIONHISTORY_PATH% %ACTIONHISTORY_BAC_PATH% ECHO Removing %ACTION_HISTORY%: %ACTIONHISTORY_PATH% DEL %ACTIONHISTORY_PATH% ) ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %* -StaticAnalyzer=PVSStudio -DEPLOY popd SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> IF EXIST %ACTIONHISTORY_BAC_PATH% ( ECHO Recovering %ACTION_HISTORY% COPY %ACTIONHISTORY_BAC_PATH% %ACTIONHISTORY_PATH% ECHO Removing %ACTION_HISTORY_BAC%: %ACTIONHISTORY_BAC_PATH% DEL %ACTIONHISTORY_BAC_PATH% ) )</code> </pre> <br>  Notez que les variables PROJECT_NAME, PLATFORM et UPROJECT_FILE, n√©cessaires pour d√©terminer correctement le chemin d'acc√®s au fichier cache, obtiennent leurs valeurs √† partir des arguments de la ligne de commande de Build.bat.  Si vous avez un ordre diff√©rent de ces arguments, vous devez modifier de mani√®re appropri√©e l'initialisation des trois variables, d√©crites ci-dessus. <br><br><h2>  Analyse de projet incr√©mentielle via modification UBT </h2><br>  PVS-Studio est capable de travailler en mode d'analyse incr√©mentale.  L'analyse incr√©mentielle est destin√©e √† v√©rifier uniquement les fichiers qui ont √©t√© modifi√©s depuis la derni√®re g√©n√©ration.  En mode d'analyse incr√©mentielle, PVS-Studio s'ex√©cute automatiquement sur l'ordinateur d'un d√©veloppeur en mode arri√®re-plan juste apr√®s la compilation du code et analyse tous les fichiers modifi√©s.  Vous pouvez trouver un guide plus d√©taill√© sur l'utilisation de PVS-Studio en mode d'analyse incr√©mentielle dans notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br>  Avec l'impl√©mentation du mode d'analyse incr√©mentale pour les projets UE, tout est encore un peu plus compliqu√© que dans un sc√©nario standard.  Dans ce cas, pour pouvoir effectuer l'analyse incr√©mentielle (en tenant compte des changements dans les fichiers .h inclus), vous devrez introduire vous-m√™me les modifications dans le syst√®me UBT de g√©n√©ration.  Pour ce faire, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">acc√©dez</a> au r√©f√©rentiel UE sur github.com et clonez-le sur votre machine.  Pour personnaliser davantage le r√©f√©rentiel clon√©, vous devrez effectuer les √©tapes r√©pertori√©es dans la section "Mise en service et ex√©cution", sous-section "Windows".  Vous pouvez trouver cette section sur la premi√®re page du r√©f√©rentiel officiel de l'UE.  Une fois que vous avez configur√© votre r√©f√©rentiel, vous pouvez commencer √† apporter des modifications dans UBT.  Pour ce faire, suivez ce chemin d'acc√®s au r√©f√©rentiel clon√©: \ UnrealEngine \ Engine \ Source \ Programs \ UnrealBuildTool.  Ouvrez la solution UnrealBuildTool.sln et recherchez le fichier PVSToolChain.cs dans l'Explorateur de solutions.  Dans ce fichier, ajoutez les lignes de code suivantes dans la classe PVSApplicationSettings: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt; /// Whether need incremental analysis or not /// &lt;/summary&gt; public bool IncrementalAnalysis;</span></span></code> </pre> <br>  Cette ligne de code permet de d√©s√©rialiser l'option IncrementalAnalysis des fichiers de param√®tres PVS-Studio.  N'oubliez pas d'activer le mode d'analyse incr√©mentielle PVS-Studio lui-m√™me.  Pour ce faire, dans VS, ouvrez "Extensions" dans le menu principal, sous-menu "PVS-Studio", "Analyse apr√®s construction (fichiers modifi√©s uniquement)", "Activ√©".  Ajoutez maintenant les lignes de code suivantes juste apr√®s la d√©claration de la variable BaseFileName: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Get pvslog file FileReference OutputFileLocation = FileReference. Combine(OutputDir, BaseFileName + ".pvslog"); FileItem OutputFileItem = FileItem.GetItemByFileReference(OutputFileLocation); if (ApplicationSettings.IncrementalAnalysis &amp;&amp; OutputFileItem.Exists) { // Get object file FileReference ObjectFileLocation = FileReference. Combine(OutputDir, BaseFileName + ".obj"); FileItem ObjectFileItem = FileItem.GetItemByFileReference(ObjectFileLocation); if (ObjectFileItem.Exists &amp;&amp; (ObjectFileItem.LastWriteTimeUtc &lt; OutputFileItem.LastWriteTimeUtc)) { continue; } }</span></span></code> </pre> <br>  Supprimez ensuite les d√©clarations pr√©c√©dentes des variables OutputFileLocation et OutputFileItem ci-dessous. <br><br>  Lors de la construction du projet UE, un fichier objet .obj est g√©n√©r√© pour chaque fichier source .cpp.  Cette analyse incr√©mentielle consiste √† v√©rifier uniquement les fichiers source .cpp pour lesquels la date de cr√©ation / modification de leur fichier objet est post√©rieure √† celle du fichier de rapport .pvslog.  Un fichier .pvslog distinct est g√©n√©r√© pour chaque fichier source, √† l'avenir, tous les fichiers .pvslog seront fusionn√©s dans un fichier .pvslog final).  Une fois que vous avez apport√© les modifications ci-dessus, cr√©ez UBT et copiez le fichier binaire nouvellement construit √† l'emplacement de l'UBT d'origine. <br><br>  Maintenant que tout est pr√™t, vous recevrez un journal de rapport lors de la construction de votre projet UE, contenant les r√©sultats de l'analyseur uniquement pour les fichiers source compil√©s.  Gardez √† l'esprit qu'une telle modification de l'UBT n'a de sens que si vous avez modifi√© le fichier Build.bat de telle mani√®re qu'il a effectu√© la suppression du fichier cache ActionHistory.bin (une description d√©taill√©e de ce sc√©nario a √©t√© donn√©e ci-dessus).  Pour d√©sactiver le mode d'analyse incr√©mentielle, il suffit d'installer l'option "Analyse apr√®s construction (fichiers modifi√©s uniquement)" d√©crite ci-dessus dans le mode "D√©sactiv√©". <br><br>  Permettez-moi de vous rappeler une fois de plus: si vous avez install√© l'indicateur -StaticAnalyzer = PVSStudio dans le champ Build Command Line dans les param√®tres du projet 'Properties | Configuration Properties | NMake', il doit √™tre supprim√© dans ce sc√©nario. <br><br><h2>  Ouverture du fichier de rapport Analyzer et son chargement automatique dans Visual Studio </h2><br>  Par d√©faut lors de l'analyse du projet UE, un fichier de rapport ne sera pas affich√© dans la fen√™tre PVS-Studio dans VS.  Il est juste stock√© relativement au dossier du projet par le chemin suivant: \ YouProject \ Saved \ PVS-Studio \.  Pour ouvrir ce fichier dans VS, vous devez utiliser la commande suivante: 'PVS-Studio | Ouvrir / Enregistrer | Ouvrir le rapport d'analyse' et s√©lectionner le type de fichier 'Sortie non analys√©e'.  Vous pouvez √©galement ouvrir le rapport de fichier dans le programme Surveillance du compilateur C et C ++, en utilisant la commande suivante: 'Fichier | Ouvrir le journal PVS-Studio' et √©galement choisir le type de fichier 'Sortie non analys√©e'. <br><br>  Il existe une autre option plus pratique pour ouvrir le journal du rapport d'analyse, qui est son chargement automatique dans VS.  Pour qu'il se charge automatiquement dans la fen√™tre PVS-Studio dans VS une fois l'analyse termin√©e, vous devez activer l'option appropri√©e: 'PVS-Studio | Options | Param√®tres sp√©cifiques de l'analyseur | Enregistrer / charger (rapport de l'analyseur) | AutoloadUnrealEngineLog' . <br><br><h2>  T√©l√©chargez et essayez PVS-Studio </h2><br>  En tant qu'auteur de cet article, ainsi que l'une de ces personnes qui travaille directement sur la mise en ≈ìuvre et le support des fonctionnalit√©s de PVS-Studio li√©es √† l'analyse de projets, construites sur la base du moteur UE, je suis pr√™t √† aider les lecteurs .  Si vous rencontrez des probl√®mes pour utiliser PVS-Studio avec votre projet UE ou si vous avez des questions apr√®s avoir lu cet article, je serais heureux de discuter avec vous.  √âcrivez √† notre support, je recevrai des mails sur UE et les probl√®mes associ√©s.  Merci de votre attention. <br><br><h2>  Liens suppl√©mentaires </h2><br><ol><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un contr√¥le tant attendu du moteur Unreal 4</a> .  (14 avril 2014) </li><li>  Paul Eremeev, Svyatoslav Razmyslov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment l'√©quipe PVS-Studio a am√©lior√© le code d'Unreal Engine</a> .  (20 juin 2015) </li><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Analyse statique dans le cadre du processus de d√©veloppement dans Unreal Engine</a> .  (27 juin 2017) </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466477/">https://habr.com/ru/post/fr466477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466463/index.html">Comment nous avons cr√©√© un prototype d'application de r√©paration d'arr√™t</a></li>
<li><a href="../fr466465/index.html">Summ3r 0f H4ck 2019: r√©sultats de recherche</a></li>
<li><a href="../fr466467/index.html">Prise en charge des jetons jwt anonymes dans IdentityServer4 utilisant AnonymousIdentity</a></li>
<li><a href="../fr466473/index.html">Comment nous avons cr√©√© le syst√®me IoT pour g√©rer la consommation d'√©nergie solaire</a></li>
<li><a href="../fr466475/index.html">Comment transformer le trafic en ventes en utilisant les donn√©es des utilisateurs du site</a></li>
<li><a href="../fr466479/index.html">Utilisation de PVS-Studio lors de la v√©rification de projets Unreal Engine sur le syst√®me d'exploitation Windows</a></li>
<li><a href="../fr466485/index.html">Voitures √©lectriques des ann√©es 90. Partie 1. Fr√®res Citro√´n et Peugeot</a></li>
<li><a href="../fr466489/index.html">Des ing√©nieurs cor√©ens sugg√®rent d'utiliser Hololens comme alternative aux cloisons de bureau</a></li>
<li><a href="../fr466491/index.html">Projet d'entra√Ænement √† Godot - Pong (Partie 2) Cr√©ation et mise en place du ballon</a></li>
<li><a href="../fr466493/index.html">Docker: Pour commencer. Attention D√©ployer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>