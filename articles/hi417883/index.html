<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßõüèº üë®üèΩ‚Äçüé® üí≠ ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§¨‡§®‡§æ‡§®‡§æ üòæ üíº ü§Ωüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•Ä ‡§™‡§∏‡§Ç‡§¶ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•Å‡§ù‡•á ‡§Ø‡§π‡§æ‡§Ç ‡§è‡§ï ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡•á ‡§ó‡§Ø‡§æ‡•§ ‡§§‡•Å‡§∞‡§Ç‡§§ 2 ‡§ï‡§æ‡§∞‡§£‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è - ‡§∏‡§¨‡§∏‡•á ‡§™‡§π‡§≤‡•á, ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø ‡§Æ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§¨‡§®‡§æ‡§®‡§æ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417883/"><p> ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•Ä ‡§™‡§∏‡§Ç‡§¶ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•Å‡§ù‡•á ‡§Ø‡§π‡§æ‡§Ç ‡§è‡§ï ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡•á ‡§ó‡§Ø‡§æ‡•§  ‡§§‡•Å‡§∞‡§Ç‡§§ 2 ‡§ï‡§æ‡§∞‡§£‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è - ‡§∏‡§¨‡§∏‡•á ‡§™‡§π‡§≤‡•á, ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à <code>RingtonePreference</code> ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è <code>PreferenceFragmentCompat</code> FrakmentCompat ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§®‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ ‡§µ‡§ø‡§´‡§≤ ‡§π‡•ã ‡§ú‡§æ‡§è‡§ó‡§æ‡•§  ‡§î‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡•Ä ‡§¨‡§æ‡§§, ‡§Æ‡§æ‡§®‡§ï ‡§ß‡•Å‡§®‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ, ‡§Æ‡•Å‡§ù‡•á ‡§µ‡§π‡§æ‡§Ç ‡§ï‡•á ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•ã‡§Ç ‡§∏‡•á ‡§ï‡•Å‡§õ ‡§ß‡•ç‡§µ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§®‡§æ ‡§•‡§æ‡•§  ‡§á‡§∏‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡§æ ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§≤‡§ø‡§ñ‡§®‡§æ ‡§§‡§Ø ‡§π‡•Å‡§Ü‡•§ </p><a name="habracut"></a><br><p>  ‡§Æ‡•à‡§Ç ‡§è‡§ï ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§ï‡•á ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§á‡§∏ ‡§§‡§∞‡§π ‡§ï‡•á ‡§è‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§ï‡•á ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ: ‡§è‡§ï ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ "‡§™‡•ç‡§≤‡•á ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§®" ‡§¨‡§ü‡§® ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§ú‡§ø‡§∏ ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§ü ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§¨‡§ú‡§§‡•Ä ‡§π‡•à, ‡§î‡§∞ ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§≤‡§ø‡§Ç‡§ï: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uk/ff/ac/ukffacsdnpw3vc4zksyyredtd64.png"></div><br><p>  ‡§Æ‡•à‡§Ç ‡§á‡§® ‡§¶‡•ã ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§£‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ - ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§π‡§Æ‡•á‡§∂‡§æ ‡§ï‡•Ä ‡§§‡§∞‡§π ‡§π‡•à‡•§  ‡§¨‡§∏ ‡§Æ‡§æ‡§Æ‡§≤‡•á ‡§Æ‡•á‡§Ç, ‡§Ö‡§Ç‡§§ ‡§Æ‡•á‡§Ç ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡•ã‡§° ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∞‡§ø‡§™‡•â‡§ú‡§ø‡§ü‡§∞‡•Ä ‡§ï‡§æ ‡§è‡§ï ‡§≤‡§ø‡§Ç‡§ï ‡§π‡•ã‡§ó‡§æ‡•§ </p><br><p>  ‡§§‡•ã, ‡§Ü‡§á‡§è ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ï‡•á ‡§∏‡§æ‡§• xml ‡§´‡§º‡§æ‡§á‡§≤ ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• <code>res/xml</code> ‡§Æ‡•á‡§Ç <code>settings.xml</code> ‡§´‡§º‡§æ‡§á‡§≤ ‡§∞‡§ñ‡•á‡§Ç: </p><br><pre> <code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PreferenceScreen</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Preference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ringtone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Ringtone"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PreferenceScreen</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  ‡§î‡§∞ ‡§Ö‡§¨ ‡§á‡§® ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§ï‡•ã ‡§π‡§Æ‡§æ‡§∞‡•á ‡§ü‡•Å‡§ï‡§°‡§º‡•á ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç: </p><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SettingsFragment</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">PreferenceFragmentCompat</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreatePreferences</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, rootKey: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { setPreferencesFromResource(R.xml.settings, rootKey) } }</code> </pre> <br><p>  ‡§≤‡•â‡§®‡•ç‡§ö ‡§ï‡§∞‡•á‡§Ç, ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ñ‡•ã‡§≤‡•á‡§Ç, ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§¶‡•á‡§ñ‡•á‡§Ç: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jl/fq/b3/jlfqb3xnrjw_ndxb8nerqbnyqhi.png"></div><br><p>  ‡§™‡§∞‡§ø‡§ö‡§Ø ‡§Ø‡§π‡§æ‡§Ç ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§π‡§Æ ‡§≤‡•á‡§ñ ‡§ï‡•á ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø ‡§™‡§∞ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§Ø‡§π ‡§π‡•à: ‡§ú‡§¨ ‡§Ü‡§™ "‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§®‡•ç‡§∏" ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§è‡§ï ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡•Ä ‡§î‡§∞ ‡§ì‡§ï‡•á ‡§î‡§∞ ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç ‡§¨‡§ü‡§® ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ñ‡•Å‡§≤‡§§‡•Ä ‡§π‡•à, ‡§ú‡§¨ ‡§Ü‡§™ ‡§è‡§ï ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§Ø‡§π ‡§ñ‡•á‡§≤‡§§‡§æ ‡§π‡•à (‡§Æ‡§æ‡§®‡§ï <code>RingtonePreference</code> ‡§ï‡•á ‡§Æ‡§æ‡§Æ‡§≤‡•á ‡§Æ‡•á‡§Ç), ‡§ú‡§¨ ‡§Ü‡§™ ‡§ì‡§ï‡•á ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§Ø‡§π ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§∏‡§π‡•á‡§ú‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§ </p><br><p>  ‡§§‡•ã, ‡§è‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§ü‡•Å‡§ï‡§°‡§º‡§æ ‡§¨‡§®‡§æ‡§è‡§Å: </p><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RingtonePreferenceDialog</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DialogFragment</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> prefKey: String <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = arguments?.getString(ARG_PREF_KEY) ?: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"ARG_PREF_KEY not set"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> ARG_PREF_KEY = <span class="hljs-string"><span class="hljs-string">"ARG_PREF_KEY"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(prefKey: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: RingtonePreferenceDialog { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> fragment = RingtonePreferenceDialog() fragment.arguments = Bundle().apply { putString(ARG_PREF_KEY, prefKey) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fragment } } }</code> </pre> <br><p>  <code>prefKey</code> ‡§π‡§Æ ‡§â‡§∏ ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§ï‡•ã ‡§∏‡•ç‡§•‡§æ‡§®‡§æ‡§Ç‡§§‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡§ø‡§∏‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•ã ‡§®‡§ø‡§ï‡§æ‡§≤‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ, ‡§î‡§∞ ‡§µ‡§π‡§æ‡§Ç ‡§á‡§∏‡•á OK ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§ï‡§∞ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§ </p><br><p>  ‡§Ü‡§ó‡•á ‡§ï‡•á ‡§ï‡§æ‡§Æ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ‡•á‡§Ç ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§µ‡§∞‡•ç‡§ó <code>Ringtone</code> ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡•á ‡§π‡§Æ‡§æ‡§∞‡•á ‡§ü‡•Å‡§ï‡§°‡§º‡•á ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§ò‡•ã‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Ringtone</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> title: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> uri: Uri)</code> </pre> <br><p>  ‡§î‡§∞ ‡§è‡§ï ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§≤‡§ø‡§ñ‡•á‡§Ç ‡§ú‡•ã ‡§è‡§Ç‡§°‡•ç‡§∞‡•â‡§á‡§° ‡§Æ‡•á‡§Ç ‡§∏‡§≠‡•Ä ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§®‡§ø‡§π‡§ø‡§§ ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•ã ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§æ‡§≤ ‡§¶‡•á‡§ó‡§æ, ‡§î‡§∞ <code>Ringtone</code> ‡§∏‡•á ‡§∏‡•Ç‡§ö‡•Ä <code>Ringtone</code> ‡§µ‡§æ‡§™‡§∏ <code>Ringtone</code> : </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAndroidRingtones</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Ringtone&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> ringtoneManager = RingtoneManager(context) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> cursor = ringtoneManager.cursor <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> until cursor.count).map { cursor.moveToPosition(it) Ringtone( title = cursor.getString(RingtoneManager.TITLE_COLUMN_INDEX), uri = ringtoneManager.getRingtoneUri(it) ) } }</code> </pre> <br><p>  ‡§Ø‡§π‡§æ‡§Å <code>ringtoneManager.cursor</code> ‡§∏‡§≠‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡§∞‡•ç‡§∏‡§∞ ‡§≤‡•å‡§ü‡§æ‡§è‡§ó‡§æ, ‡§π‡§Æ ‡§¨‡§∏ ‡§∏‡§≠‡•Ä ‡§§‡§§‡•ç‡§µ‡•ã‡§Ç ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§µ‡§∞‡•ç‡§ó ‡§ï‡•á <code>Ringtone</code> (‡§Ø‡§π ‡§â‡§®‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§ß‡§ø‡§ï ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§ú‡§®‡§ï ‡§π‡•à) ‡§Æ‡•á‡§Ç ‡§Æ‡•à‡§™ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ </p><br><p>  ‡§™‡§π‡§≤‡•á, ‡§ö‡§≤‡•ã ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•Ä ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§®‡§ø‡§π‡§ø‡§§ ‡§∏‡•Ç‡§ö‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡§æ‡§Æ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç - ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§®‡§æ ‡§¨‡§π‡•Å‡§§ ‡§∏‡§∞‡§≤ ‡§π‡•ã‡§ó‡§æ‡•§  ‡§ê‡§∏‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, <code>onCreateDialog</code> ‡§µ‡§ø‡§ß‡§ø ‡§ï‡•ã ‡§ì‡§µ‡§∞‡§∞‡§æ‡§á‡§° ‡§ï‡§∞‡§ï‡•á ‡§è‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§¨‡§®‡§æ‡§è‡§Ç: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ringtones: List&lt;Ringtone&gt; = emptyList() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentUri: Uri? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateDialog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Dialog { ringtones = getAndroidRingtones() currentUri = getCurrentRingtoneUri() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> currentPosition = ringtones.indexOfFirst { currentUri == it.uri } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> AlertDialog.Builder(context!!) .setPositiveButton(android.R.string.ok) { _, _ -&gt; saveCurrentUri() } .setNegativeButton(android.R.string.cancel) { _, _ -&gt; dialog.dismiss() } .setSingleChoiceItems(adapter, currentPosition) { _, which -&gt; currentUri = ringtones[which].uri } .create() }</code> </pre> <br><p>  ‡§è‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§§‡§§‡•ç‡§µ‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡•Ä ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§è‡§°‡•á‡§™‡•ç‡§ü‡§∞ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à; ‡§á‡§∏‡•á ‡§®‡§ø‡§Æ‡•ç‡§®‡§æ‡§®‡•Å‡§∏‡§æ‡§∞ ‡§™‡§∞‡§ø‡§≠‡§æ‡§∑‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> val adapter by <span class="hljs-built_in"><span class="hljs-built_in">lazy</span></span> { <span class="hljs-type"><span class="hljs-type">SimpleAdapter</span></span>( context, ringtones.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> { mapOf(<span class="hljs-string"><span class="hljs-string">"title"</span></span> to it.title) }, <span class="hljs-type"><span class="hljs-type">R</span></span>.layout.simple_list_item_single_choice, arrayOf(<span class="hljs-string"><span class="hljs-string">"title"</span></span>), intArrayOf(<span class="hljs-type"><span class="hljs-type">R</span></span>.id.text1) ) }</code> </pre> <br><p>  ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•ã ‡§ö‡§Ø‡§®‡§ø‡§§ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•ã ‡§¨‡§ö‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§î‡§∞ ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§µ‡§ø‡§ß‡§ø ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à (‡§á‡§∏‡•á ‡§§‡§¨ ‡§¨‡•Å‡§≤‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ ‡§ú‡§¨ ‡§Ü‡§™ ‡§ì‡§ï‡•á ‡§¨‡§ü‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á): </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveCurrentUri</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { PreferenceManager.getDefaultSharedPreferences(context) .edit() .putString(prefKey, currentUri?.toString()) .apply() }</code> </pre> <br><p>  ‡§Ø‡§π ‡§π‡§Æ‡§æ‡§∞‡•á ‡§§‡§§‡•ç‡§µ ‡§ï‡•ã ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§∏‡•á ‡§¨‡§æ‡§Ç‡§ß‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡§Æ ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§´‡§æ‡§á‡§≤ ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•ã ‡§™‡§∞‡§ø‡§≠‡§æ‡§∑‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Preference.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">connectRingtoneDialog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fragmentManager: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">FragmentManager</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> = setOnPreferenceClickListener { RingtonePreferenceDialog.create(key).apply { fragmentManager?.let { show(it, <span class="hljs-string"><span class="hljs-string">"SOUND"</span></span>) } } <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  ‡§î‡§∞ <code>findPreference("ringtone").connectRingtoneDialog(fragmentManager)</code> ‡§π‡§Æ‡§æ‡§∞‡•á <code>SettingsFragment</code> <code>findPreference("ringtone").connectRingtoneDialog(fragmentManager)</code> , ‡§Ö‡§¨ ‡§á‡§∏‡•á ‡§á‡§∏ ‡§§‡§∞‡§π ‡§¶‡§ø‡§ñ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è: </p><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SettingsFragment</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">PreferenceFragmentCompat</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreatePreferences</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, rootKey: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { setPreferencesFromResource(R.xml.settings, rootKey) findPreference(<span class="hljs-string"><span class="hljs-string">"ringtone"</span></span>).connectRingtoneDialog(fragmentManager) } }</code> </pre> <br><p>  ‡§Ø‡§¶‡§ø ‡§π‡§Æ ‡§Ö‡§¨ ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ "‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§®‡•ç‡§∏" ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§π‡§Æ ‡§ï‡•Å‡§õ ‡§á‡§∏ ‡§§‡§∞‡§π ‡§¶‡•á‡§ñ‡•á‡§Ç‡§ó‡•á: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kx/ru/us/kxruusx71hm6tx7tja9wgbjahuy.png"></div><br><p>  ‡§Ö‡§¨ ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•ã‡§Ç ‡§∏‡•á ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•ã ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§  ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§æ‡§∏ <code>res/raw</code> ‡§´‡§º‡•ã‡§≤‡•ç‡§°‡§∞ ‡§Æ‡•á‡§Ç ‡§è‡§ï <code>sample.mp3</code> ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§π‡•à, ‡§î‡§∞ ‡§π‡§Æ ‡§á‡§∏‡•á ‡§∏‡•Ç‡§ö‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§ä‡§™‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§µ‡§∞‡•ç‡§ó ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§î‡§∞ ‡§µ‡§ø‡§ß‡§ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getResourceRingtones</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Ringtone&gt; = listOf( Ringtone( title = <span class="hljs-string"><span class="hljs-string">"Sample ringtone"</span></span>, uri = Uri.parse(<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ContentResolver.SCHEME_ANDROID_RESOURCE}</span></span></span><span class="hljs-string">://</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${context!!.packageName}</span></span></span><span class="hljs-string">/raw/sample"</span></span>) ) )</code> </pre> <br><p>  ‡§î‡§∞ <code>onCreateDialog</code> ‡§µ‡§ø‡§ß‡§ø ‡§Æ‡•á‡§Ç ‡§™‡§π‡§≤‡•Ä ‡§™‡§Ç‡§ï‡•ç‡§§‡§ø ‡§¨‡§¶‡§≤‡•á‡§Ç: </p><br><pre> <code class="hljs lisp">ringtones = getResourceRingtones() + getAndroidRingtones()</code> </pre> <br><p>  ‡§π‡§Æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§¶‡•á‡§ñ‡•ã, ‡§Ü‡§®‡§®‡•ç‡§¶‡§ø‡§§ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§á‡§§‡§®‡§æ ‡§∏‡§∞‡§≤ ‡§π‡•à: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nf/i3/ww/nfi3wwhi5lgf06iac1syf9euusc.png"></div><br><p>  ‡§Ø‡§π ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•á ‡§≤‡§ø‡§è "‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®" ‡§ú‡•ã‡§°‡§º‡§®‡§æ ‡§∞‡§π‡§§‡§æ ‡§π‡•à‡•§  ‡§ê‡§∏‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§è‡§ï ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> playingRingtone: android.media.<span class="hljs-type"><span class="hljs-type">Ringtone?</span></span> = null</code> </pre> <br><p>  ‡§î‡§∞ <code>setSingleChoiceItems</code> ‡§≤‡§ø‡§è ‡§ï‡•â‡§≤‡§¨‡•à‡§ï ‡§µ‡§ø‡§ß‡§ø ‡§ï‡•ã ‡§•‡•ã‡§°‡§º‡§æ ‡§¨‡§¶‡§≤‡•á‡§Ç: </p><br><pre> <code class="hljs vbscript">playingRingtone?.<span class="hljs-keyword"><span class="hljs-keyword">stop</span></span>() ringtones[which].also { currentUri = it.uri playingRingtone = it.uri?.<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { RingtoneManager.getRingtone(context, it) } playingRingtone?.play() }</code> </pre> <br><p>  ‡§Ø‡§π‡§æ‡§Ç ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à: ‡§π‡§Æ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•ã ‡§ñ‡•á‡§≤‡§®‡§æ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç (‡§Ø‡§¶‡§ø ‡§Ø‡§π ‡§∂‡•Ç‡§®‡•ç‡§Ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à), ‡§ö‡§Ø‡§®‡§ø‡§§ ‡§ï‡•ã ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§è‡§ï ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç, ‡§î‡§∞ ‡§™‡•ç‡§≤‡•á‡§¨‡•à‡§ï ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç‡•§  ‡§Ö‡§¨ ‡§ú‡§¨ ‡§Ü‡§™ ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§Ø‡§π ‡§ñ‡•á‡§≤ ‡§π‡•ã‡§ó‡§æ‡•§  ‡§°‡§æ‡§Ø‡§≤‡•â‡§ó ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§™‡•ç‡§≤‡•á‡§¨‡•à‡§ï ‡§ï‡•ã ‡§∞‡•ã‡§ï‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è <code>onPause</code> ‡§µ‡§ø‡§ß‡§ø ‡§ï‡•ã ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§™‡§∞‡§ø‡§≠‡§æ‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onPause() playingRingtone?.stop() }</code> </pre> <br><p>  ‡§ñ‡•à‡§∞, ‡§µ‡§π ‡§∏‡§¨ ‡§ú‡•ã ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§¨‡§ü‡§® ‡§ï‡•ã ‡§∞‡§ø‡§Ç‡§ó‡§ü‡•ã‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Ç‡§≤‡§ó‡•ç‡§® ‡§ï‡§∞‡§®‡§æ ‡§π‡•à, ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§á‡§∏ ‡§§‡§∞‡§π: </p><br><pre> <code class="hljs kotlin">findViewById&lt;Button&gt;(R.id.playRingtone).setOnClickListener { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> ringtone = PreferenceManager.getDefaultSharedPreferences(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) .getString(<span class="hljs-string"><span class="hljs-string">"ringtone"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>) ?.let { RingtoneManager.getRingtone(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, Uri.parse(it)) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ringtone == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"Select ringtone in settings"</span></span>, Toast.LENGTH_SHORT).show() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ringtone.play() } }</code> </pre> <br><p>  ‡§µ‡§π ‡§∏‡§¨ ‡§π‡•à‡•§  ‡§ú‡•à‡§∏‡§æ ‡§ï‡§ø ‡§µ‡§æ‡§¶‡§æ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§•‡§æ, ‡§Ø‡§π‡§æ‡§Ç ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§ï‡•ã‡§° ‡§≤‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">‡§π‡•à</a> ‡•§ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi417883/">https://habr.com/ru/post/hi417883/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi417873/index.html">‡§™‡•â‡§™‡§Ö‡§™ ‡§µ‡§ø‡§Ç‡§°‡•ã‡§ú ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§§‡§∞‡•Ä‡§ï‡•á</a></li>
<li><a href="../hi417875/index.html">‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§∞‡•á‡§≤ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§π‡•ã‡§≤ ‡§è‡§∏‡§™‡•Ä‡§è ‡§∏‡•á ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§≤‡§®‡§æ</a></li>
<li><a href="../hi417877/index.html">‡§ü‡§ø‡§Ç‡§°‡§∞ (‡§•‡•ã‡§°‡§º‡§æ) ‡§Ü‡§™‡§ï‡•á ‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•ã ‡§ï‡•à‡§∏‡•á ‡§õ‡•Å‡§™‡§æ‡§§‡§æ ‡§π‡•à</a></li>
<li><a href="../hi417879/index.html">Microsoft ‡§∏‡•á ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§Æ‡•á‡§Ç ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡•à‡§∏‡•á ‡§≤‡•á‡§Ç [‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§è‡§ï ‡§π‡§æ‡§≤‡§ø‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§Ø‡•ã‡§ó‡§ø‡§§‡§æ]</a></li>
<li><a href="../hi417881/index.html">‡§™‡§ø‡§õ‡§≤‡•á ‡§¶‡•ã ‡§∏‡§™‡•ç‡§§‡§æ‡§π ‡§∏‡•á 323 (8 ‡§ú‡•Å‡§≤‡§æ‡§à - 22, 2018) ‡§´‡•ç‡§∞‡§Ç‡§ü-‡§è‡§Ç‡§° ‡§ï‡•Ä ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§∏‡•á ‡§§‡§æ‡§ú‡§æ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§ï‡§æ ‡§™‡§æ‡§ö‡§®</a></li>
<li><a href="../hi417885/index.html">M ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§î‡§∞ V ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§î‡§∞ C ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§•‡•ã‡§°‡§º‡§æ</a></li>
<li><a href="../hi417887/index.html">‡§µ‡§ø‡§∂‡•á‡§∑ ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§ó‡•à‡§ú‡•á‡§ü: ‡§∏‡•ç‡§ü‡§∞‡•ç‡§≤‡§ø‡§Ç‡§ó‡§ø‡§ü ‡§µ‡•â‡§Ø‡§∏ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§∞, ‡§á‡§∏‡§ï‡§æ ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§™‡•ç‡§∞‡•ã‡§ü‡•ã‡§ü‡§æ‡§á‡§™ ‡§î‡§∞ ‡§¨‡•ã‡§≤‡•ç‡§° ‡§π‡§ø‡§∏‡•ç‡§ü‡•ã‡§∞‡§ø‡§ï‡§≤ ‡§Æ‡•â‡§°‡§≤‡§ø‡§Ç‡§ó</a></li>
<li><a href="../hi417889/index.html">‡§è‡§ï ‡§®‡§ï‡•ç‡§∂‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§®‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä‡§Ø ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π</a></li>
<li><a href="../hi417891/index.html">23 ‡§∏‡•á 29 ‡§ú‡•Å‡§≤‡§æ‡§à ‡§§‡§ï ‡§Æ‡§æ‡§∏‡•ç‡§ï‡•ã ‡§Æ‡•á‡§Ç ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ</a></li>
<li><a href="../hi417893/index.html">‡§ï‡•É‡§§‡•ç‡§∞‡§ø‡§Æ ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§®‡•Å‡§∏‡•ç‡§ñ‡§æ: ‡§®‡•à‡§®‡•ã‡§ü‡•ç‡§Ø‡•Ç‡§¨, ‡§™‡•â‡§≤‡•Ä‡§ë‡§ï‡•ç‡§∏‡•ã‡§Æ‡•à‡§ü‡§≤‡•á‡§ü ‡§î‡§∞ ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§è‡§ï ‡§ö‡•Å‡§ü‡§ï‡•Ä</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>