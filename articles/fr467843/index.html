<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾🏼 ⛹️ 😔 Comment économiser jusqu'à un demi-million de dollars en AWS? 👩🏿‍🤝‍👩🏻 👷🏼 🌚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous présente la traduction de l'article «Comment réduire vos coûts AWS? Économisez jusqu'à 500 000 $ avec ces directives! » auteur ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment économiser jusqu'à un demi-million de dollars en AWS?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467843/"> Bonjour, Habr!  Je vous présente la traduction de l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Comment réduire vos coûts AWS?</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Économisez jusqu'à 500 000 $ avec ces directives! »</a>  auteur George Batschinski. <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/0.png" alt="image"><br><br>  Dans cet article, nous détaillerons comment Back4App a réduit ses dépenses AWS de 55 492 $ par mois à 20 074 $ par mois et économisé 500 000 $ par an.  Nous décrirons les étapes pratiques basées sur notre propre expérience de réduction des coûts dans AWS et partagerons des conseils qui nous ont également été utiles. <br><a name="habracut"></a><br>  AWS continue d'innover et de dominer le marché du cloud.  Il a tellement grandi qu'il est devenu un élément clé de la stratégie d'Amazon.  Je suis enthousiasmé par AWS, mais les doutes sur la complexité et le coût du cloud m'ont conduit à optimiser l'utilisation du cloud.  Malgré le fait qu'AWS propose une liste sans cesse croissante de services spécialisés pour divers types de développement, ce n'est pas toujours le moyen le plus direct, le plus rapide ou le plus abordable.  Idéalement, dès que vous accédez au cloud, vous devez penser immédiatement à l'architecture afin de réduire les coûts.  Ce matériel aidera à accélérer l'optimisation des coûts et contient des cas réels que nous avons rencontrés lors de notre entreprise de réduction des coûts. <br><br>  Un bref aperçu de ce que vous trouverez dans cet article: <br><br><ul><li>  <b>Demandez des prêts auprès d'AWS et obtenez jusqu'à 100 000 $;</b> </li><li>  <b>Transférez le transfert de données vers Cloud Front et économisez jusqu'à 75%;</b> </li><li>  <b>Utilisez une adresse IP privée (pas Elastic IP) et arrêtez de payer pour le transfert de données entre les zones d'accès;</b> </li><li>  <b>Économisez jusqu'à 90% avec les instances ponctuelles;</b> </li><li>  <b>Économisez jusqu'à 75% en achetant des instances réservées sur AWS Marketplace;</b> </li><li>  <b>Obtenez des nœuds Elastic Cache réservés et économisez jusqu'à 77%;</b> </li><li>  <b>Réservez vos données dans S3, mais pas dans EBS et économisez jusqu'à 75%;</b> </li><li>  <b>Configurer la mise à l'échelle automatique pour les ressources inactives;</b> </li><li>  <b>Choisissez la région de la Virginie du Nord et éloignez-vous de Sao Paulo;</b> </li><li>  <b>Mettez à niveau vers de nouvelles générations d'instances et économisez jusqu'à 20%;</b> </li><li>  <b>Localisez le point de terminaison S3 dans votre VPC et activez le réseau amélioré sur EC2.</b> </li></ul><br>  Voici à quoi ressemblait notre compte AWS en janvier 2019. Le coût total du cloud est de 55 492 $. <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/1.png" alt="image"><br><br>  Voici à quoi ressemblait notre compte AWS en mai 2019. Le coût total était de 20 074 $. <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/2.png" alt="image"><br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/3.png" alt="image"><br><br><h2>  1. Prêts AWS </h2><br>  Tout d'abord!  Avant de commencer quoi que ce soit, assurez-vous que votre entreprise est éligible aux prêts AWS.  Voici comment vous pouvez obtenir ces prêts: <br><br><h3>  Demandez des prêts à AWS </h3><br>  C'était donc dans notre cas!  En 2016, notre entreprise a connu une croissance assez rapide.  Notre facture AWS a commencé à augmenter et nous n'avions ni idée ni temps pour optimiser l'utilisation d'AWS.  Comme nous n'avions pas de financement, nous avons réalisé que nous allions soit recevoir des prêts d'AWS, soit disparaître.  Nous avons préparé notre dossier pour notre compte de gestionnaires dans AWS, démontrant à quelle vitesse nous grandissons et les avantages pour AWS de nous soutenir sur notre site.  Nous lui avons montré que nous n'avions pas de financement et serions obligés d'aller sur Google Cloud (ils nous ont offert 100 000 $ de prêts pour la migration vers AWS) si nous ne recevions pas de prêts d'AWS.  La réponse a pris environ une semaine et AWS nous a fourni 100 000 $ pour une utilisation sur 12 mois.  C'était également une bonne affaire pour AWS!  Depuis l'expiration des prêts, nous avons dépensé plus de 750 000 $ avec AWS. <br><br><h3>  Crédits pour tester et lancer Proof Of Concept </h3><br>  Si vous avez l'intention de tester un nouveau service d'AWS ou le type d'instance, demandez des prêts à votre responsable de compte.  Le nombre de prêts dépendra de vos coûts mensuels et de l'effort global pour lancer POC.  Ces prêts ne sont généralement valables que pour trois mois, et vous devez vous assurer de la vitesse du POC.  Dans notre cas, nous avons pu obtenir 3 000 $ de prêts pour tester la famille d'instances i3. <br><br><h3>  Crédits de démarrage </h3><br>  Si vous avez fondé votre entreprise ou lancé une startup, c'est un excellent moyen d'avancer.  Le montant des prêts varie de 1 000 $ à 100 000 $, selon la façon dont vous présentez votre dossier AWS.  Il existe plusieurs façons d'obtenir ces prêts. <br><br><h4>  Accélérateurs </h4><br>  L'un des principaux avantages des accélérateurs de démarrage dans les bonus qu'ils fournissent.  L'un de ces bonus est les prêts des fournisseurs de cloud.  Le montant que vous pouvez recevoir dépend de l'accélérateur dans lequel vous êtes représenté.  Certains des meilleurs, par exemple, YC, Alchemist, Wayra et 500 Startups vous offriront 100 000 $ en prêts AWS.  Dans notre cas, nous avons été acceptés par Alchemist Accelerator et émis 100 000 $ en prêts.  Malheureusement, nous n'avons pas pu utiliser ces prêts, car auparavant nous avions déjà profité d'autres prêts.  Par exemple, si vous acceptez deux accélérateurs pour 100 000 $ chacun, vous ne pourrez pas utiliser 200 000 $, seulement 100 000 $. <br><br><h4>  Fonds de capital-risque et groupes d'anges </h4><br>  Certains groupes WF / Angel accordent des prêts dans le cadre du programme de bonus.  Dans notre cas, nous avons réussi à obtenir 10 000 $ de prêts à la commercialisation, valables deux ans auprès d'un de nos investisseurs.  Malheureusement, nous n'avons pas pu les utiliser.  Les entreprises ne peuvent pas utiliser les crédits promotionnels AWS si elles ont déjà reçu un montant de prêts égal ou supérieur. <br><br><h4>  Tous les principaux fournisseurs de cloud fournissent des prêts aux startups </h4><br>  Tous les principaux acteurs du marché du cloud proposent des prêts aux startups.  Avec AWS / Google, les prêts peuvent aller jusqu'à 100 000 $.  Chez Azure, vous pouvez obtenir 360 000 $ pour trois ans. <br><br><h2>  2. Réalisez des économies sur AWS </h2><br>  La partie facile est terminée et passons maintenant aux défis!  Il n'y a pas de pilule magique pour réduire les coûts dans AWS, vous devez travailler dur et suivre une procédure régulière pour surveiller les coûts!  Réduire les coûts du cloud devrait être votre routine quotidienne!  Imaginez combien vous économisez en 365 jours!  Le temps que vous investissez dépend de la taille de votre organisation et de vos coûts AWS.  Je passe environ 30 minutes par jour à surveiller mon compte et à prioriser les actions de réduction des coûts.  De plus, les ingénieurs de Back4App consacrent au moins 1 heure par jour à des initiatives de réduction des coûts. <br><br>  La première initiative que nous avons terminée: créer une feuille de calcul simple dans Excel pour hiérarchiser les initiatives de réduction des coûts. <br><br>  Les principaux critères par lesquels nous déterminons les économies: <br><br><ul><li>  Potentiel d'économies - Gains les plus élevés grâce aux économies </li><li>  Difficulté - À quel point est-il difficile d'appliquer l'effort et le travail requis </li><li>  Propriétaire - Qui exécutera l'action </li></ul><br>  Dans notre cas, les plus grandes économies sont l'utilisation d'Elastic Compute Cloud (EC2), et c'est le premier sujet que nous avons commencé à comprendre. <br><br><h2>  3. EC2 - Elastic Compute Cloud </h2><br><h3>  Désactivez les instances inutilisées </h3><br>  Le premier point à prendre pour réduire les coûts sur EC2 est de désactiver les instances inutilisées.  Il n'y a rien de compliqué, et la plupart du travail est assez simple.  Il vous suffit de faire une liste de toutes les instances, de charger le fichier Excel de l'exemple et de les définir.  Dans notre cas, nous avons divisé nos instances en 3 catégories principales: <br><br><ul><li>  Des instances qui doivent fonctionner en continu </li><li>  Instances pouvant être arrêtées </li><li>  Instances pouvant être supprimées </li></ul><br>  <b>N'arrêtez pas, mais supprimez les instances</b> <br><br>  Supprimez les instances inutilisées lorsque cela est possible!  Si vous les arrêtez, vous continuerez à payer pour utiliser EBS! <br><br><h3>  Réduisez les ressources excédentaires </h3><br>  Cette action est un peu plus compliquée et il est absolument nécessaire de sélectionner correctement la taille de l'instance.  Veuillez vous assurer d'évaluer au moins une semaine de données pour augmenter la probabilité d'un changement d'instance correct.  L'approche par laquelle nous avons contrôlé ce processus était de diviser les instances en 3 catégories principales: <br><br><ul><li>  Taille correcte </li><li>  Réduire la taille de l'instance </li><li>  Augmenter la taille de l'instance </li></ul><br>  La façon de vérifier les données historiques d'une instance est extrêmement simple.  Dans le panneau de configuration AWS, accédez à Services&gt; EC2&gt; Instances&gt; Exécution d'instances, sélectionnez Instance&gt; Surveillance.  Par exemple, vous pouvez vérifier la métrique d'utilisation du processeur. <br><br>  <b>Réduisez la taille des instances de manière séquentielle</b> <br><br>  Réduisez progressivement la taille de votre instance.  Par exemple, ne réduisez pas la taille de t2.xlarge à t2.medium.  Tout d'abord, réduisez-le de t2.2xlarge à t2.xlarge.  Regardez une semaine, vérifiez combien de ressources sont utilisées et répétez les étapes sur une nouvelle.  En effectuant ces étapes, vous minimiserez les risques d'erreurs ou de temps d'arrêt. <br><br><h3>  Utiliser des instances réservées </h3><br>  La réservation d'instances peut augmenter vos économies jusqu'à 70%.  Veuillez garder à l'esprit que lorsque vous réservez une instance, vous payez 24/7 pour la durée de la réservation.  Vous paierez, que vous utilisiez l'instance ou non. <br><br>  Il existe deux types de capacités redondantes: <br><br>  Standard - que vous pouvez vendre sur AWS Marketplace, vous ne pouvez pas le convertir en un autre type d'instance, moins cher que les instances convertibles. <br><br>  Convertible - Vous ne pourrez pas le vendre sur AWS Marketplace, mais vous pouvez le convertir en une instance d'un type différent, plus cher que les instances standard. <br><br>  <b>Les instances convertibles peuvent prêter à confusion</b> <br><br>  Les instances convertibles sont très difficiles!  Chaque fois que vous convertissez des instances, vous ne pouvez qu'augmenter la taille de l'instance.  Considérez la situation suivante: <br><br>  Vous acquérez t3.medium, une instance réservée convertible. <br>  Vous décidez de convertir t3.medium en instance m5.large. <br><br>  Vous réussirez certainement!  Après avoir utilisé l'instance m5.large pendant un certain temps, vous souhaiterez revenir à t3.medium. <br><br>  <b>Et c'est déjà impossible!</b> <br><br>  Vous ne pourrez pas réduire la consommation de l'instance convertible, mais seulement augmenter le montant que vous payez pour cela.  Alors s'il vous plaît, assurez-vous de commencer avec une petite instance réservée et de l'augmenter au fil du temps.  Ne commencez pas avec une grande instance, car vous ne pouvez pas réduire sa consommation ou la vendre sur AWS Marketplace'e.  <b>Si vous faites une erreur avec une instance réservée convertible, vous êtes abonné à un paiement mensuel de 12 ou 36 mois.</b>  Chez Back4App, nous obtenons toujours d'abord t2.nano et l'augmentons au besoin. <br><br>  Je préfère les instances réservées standard aux convertibles pour les raisons suivantes: <br><br><ul><li>  Ils sont moins chers </li><li>  Ils ont une liquidité plus élevée - ils peuvent être vendus à tout moment sur AWS Marketplace. </li><li>  Ils peuvent être achetés sur le AWS Marketplace à prix réduit. </li></ul><br><h3>  Utilisez AWS Marketplace pour les instances réservées </h3><br>  Les instances réservées sont excellentes, mais l'achat d'instances réservées sur AWS Marketplace est encore mieux! <br><br><h3>  AWS Marketplace peut être beaucoup moins cher </h3><br>  AWS Marketplace ressemble à un marché des valeurs mobilières!  Vous pouvez parfois acheter une instance réservée standard à un prix beaucoup plus abordable que d'acheter directement auprès d'AWS.  La raison est simple;  Les entreprises possèdent parfois des instances redondantes qui ne sont plus utilisées, mais continuent de les payer.  La baisse du prix de l'hébergement accélère le processus d'achat. <br><br>  Ici, je vais donner un exemple de ce qui s'est passé avec Back4App.  Je cherchais 4 instances réservées r4.large.  J'ai réussi à trouver des instances sur AWS Marketplace avec un taux effectif de 75% moins cher par rapport aux prix à la demande.  AWS a vendu le même type d'instances réservées, mais avec une remise de 62%. <br><br><h3>  AWS Marketplace propose des conditions d'achat flexibles </h3><br>  Un autre avantage d'AWS Marketplace est que vous pouvez acheter des instances avec une période d'utilisation flexible.  AWS lui-même ne propose que des options pour 12 et 36 mois pour l'achat d'instances réservées.  AWS Marketplace est beaucoup plus flexible!  Vous pouvez acheter, par exemple, des instances réservées pour 15 mois pour le même prix que pour 36 mois.  Certaines entreprises préfèrent les obligations à long terme (36 mois) et avant l'expiration de l'obligation, elles les vendent sur AWS Marketplace.  Le nouveau client n'utilisera l'instance que pour la période restante, par exemple: <br><br><ul><li>  Durée totale d'acquisition: 36 mois </li><li>  Acheteur initial: utilise l'instance pendant 21 mois </li><li>  Deuxième acheteur: l'achète sur la place de marché et l'utilise pendant les 15 mois restants. </li></ul><br>  La principale difficulté est de trouver les bonnes instances sur AWS Marketplace.  <b>Un excellent moyen de simplifier la recherche d'instances est de les rechercher dans plusieurs zones d'accès, et pas seulement dans celle où vous vous trouvez.</b>  Une fois que vous avez acquis une instance, vous pouvez la modifier et l'affecter à une autre zone d'accessibilité, ou la transformer en une instance régionale.  Ce n'est pas du tout difficile à faire, mais veuillez suivre les instructions ci-dessous: <br><br><ul><li>  Étape 1 - Accédez au tableau de bord des instances réservées </li><li>  Étape 2 - Cliquez sur Acheter des instances réservées </li><li>  Étape 3 - dans la catégorie d'offre, sélectionnez Standard </li><li>  Étape 4 - Dans le coin supérieur droit de la fenêtre contextuelle, sélectionnez «Afficher uniquement les offres réservant de la capacité» </li><li>  Étape 5 - Cliquez sur Rechercher </li><li>  Étape 6 - Obtenez une instance de la zone de disponibilité 1b </li><li>  Étape 7 - Attendez que l'instance devienne active </li><li>  Étape 8 - Sélectionnez l'instance qui a été achetée </li><li>  Étape 9 - Cliquez sur le bouton Actions </li><li>  Étape 10 - Cliquez sur Modifier les instances réservées </li><li>  Étape 11 - Portée - Modifier la zone ou la région de disponibilité </li><li>  Étape 12 - Cliquez sur Continuer </li><li>  Étape 13 - Cliquez sur Soumettre les modifications </li></ul><br>  En suivant ces étapes, vous pourrez acheter des instances réservées standard dans n'importe quelle zone de disponibilité et les modifier pour votre zone de disponibilité. <br><br><h3>  AWS Marketplace pour les entreprises en dehors des États-Unis </h3><br>  Précision importante pour les utilisateurs en dehors de la juridiction américaine.  Vous ne pouvez pas vendre des instances réservées standard sur la place de marché à moins d'avoir une entité juridique d'État.  Si votre entreprise trouve en dehors des États-Unis, vous pourrez acheter des instances sur Marketplace, mais vous ne pourrez pas les vendre. <br><br><h3>  Utiliser des instances ponctuelles </h3><br>  J'adore les instances Spot!  Vous pouvez économiser jusqu'à 90% en les utilisant, et cela ne nécessitera pas de gros investissements!  Le seul inconvénient des instances Spot est qu'AWS peut supprimer ces instances en un rien de temps ou après un avertissement de deux minutes.  À cet égard, ce type d'instances ne peut être utilisé que pour des charges tolérantes aux pannes ou flexibles. <br><br>  <b>Utilisez SpotInst pour exécuter des instances ponctuelles</b> <br><br>  Un moyen sûr d'exécuter des instances Spot et de minimiser les risques d'indisponibilité consiste à utiliser la plateforme SpotInst.  Ce service se connecte à votre compte AWS et gère la distribution des instances Spot.  Si l'instance est désactivée, le service la remplace par On Demand et évite les temps d'arrêt.  Les tarifs sont également assez intéressants, ils facturent 20% de ce qui a été économisé (entre la différence de prix du On-demand et du Spot). <br><br>  Un excellent scénario pour les instances Spot consiste à utiliser une copie des serveurs pour les bases de données ou pour les extensions d'application flexibles.  Utilisez SpotInst pour contrôler l'allocation des instances Spot, et vous ne rencontrerez probablement jamais de temps d'arrêt associés à l'utilisation de cette classe d'instances. <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/4.png" alt="image"><br><br><h3>  Mise à l'échelle automatique (ressources inactives, automatisation des instances EC2 de démarrage / arrêt) </h3><br>  AWS Auto Scaling surveille vos applications et ajuste automatiquement l'alimentation pour maintenir une alimentation stable et prévisible au moindre coût.  Vous pouvez configurer la mise à l'échelle automatique pour démarrer et arrêter automatiquement les instances EC2.  La mise à l'échelle automatique prend en compte les métriques de ressources telles que le processeur, les demandes d'API et les heures d'activation / désactivation. <br><br>  Pour minimiser les coûts, vous devez utiliser la mise à l'échelle automatique + les instances Spot + les instances réservées.  Regardons la situation réelle que nous avons rencontrée dans Back4App.  Les charges de travail changent tout au long de la journée.  Le nombre de demandes que nous recevons n'est pas uniforme et a des charges d'utilisation de pointe à certaines heures.  Pour résoudre ce problème, nous allouons des instances réservées à la limite de consommation minimale et les adaptons avec des instances ponctuelles.  La figure ci-dessous vous aide à comprendre la configuration.  Voici combien vous pouvez économiser: <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/5.png" alt="image"><br><br><ul><li>  Instances réservées: Chez Back4App, nous utilisons un mélange d'instances réservées standard mensuelles 12/36.  Nos économies médianes sont de 50% par rapport aux prix à la demande. </li><li>  Mise à l'échelle automatique: nous démarrons / arrêtons les instances en fonction du nombre total de demandes d'API reçues par chaque instance.  Nous avons trois périodes de pointe pendant la journée, et les économies par rapport aux ressources inactives qui fonctionneraient 24 heures à charge maximale sont d'environ 75%. </li><li>  Instances Spot: nous avons un mélange de deux familles d'instances qui fonctionnent sur Spotinst pour une disponibilité maximale.  Nos économies sont de 55% par rapport aux prix à la demande.  Ce sont nos économies, en tenant compte du montant total que nous payons SpotInst.  L'utilisation d'instances ponctuelles directement à partir d'AWS pourrait nous faire économiser environ 70%, mais augmenterait les risques.  Nous aimons jouer de façon mesurée et nous avons décidé de redonner une partie de nos économies à SpotInst. </li></ul><br>  <b>Ajuster l'échelle</b> <br><br>  Personnalisez votre mise à l'échelle verticale et horizontale (Cloudformation) <br><br><h3>  Choisissez la bonne région AWS à enregistrer </h3><br><ul><li>  Les prix varient selon les régions!  Choisissez le mauvais et vous paierez trop. </li><li>  Les régions les moins chères sont la Virginie du Nord, l'Ohio et l'Oregon. </li></ul><br>  Les plus chers: Sao Paulo, Sydney et Hong Kong <br>  Prenons l'exemple suivant: <br><br><ul><li>  4 instances t3.medium </li><li>  EBS 30 Go dédié à chaque instance </li><li>  1 To total de trafic </li></ul><br>  La même configuration sera 102% plus chère à Sao Paulo qu'en Virginie du Nord. <br><br><ul><li>  221,65 $ / mois en Virginie du Nord </li><li>  449,05 $ / mois à Sao Paulo </li></ul><br>  La centralisation des opérations dans une région présente également ses avantages. <br><br><ul><li>  Il est beaucoup plus facile de contrôler l'allocation des instances réservées. </li><li>  Les frais de trafic interrégionaux ne s'appliqueront pas </li></ul><br>  Chez Back4App, nous n'avons pas pu centraliser toutes les opérations en Virginie du Nord en raison de notre couverture commerciale et des exigences de nos clients.  Nous avons décidé de créer un cluster aux USA, en Europe et en Asie.  Nous avons centralisé nos opérations dans ces grappes et étendu chaque région autant que possible. <br><br><h3>  Mettre à jour les générations précédentes de ressources </h3><br>  AWS lance occasionnellement de nouveaux types d'instances.  Les nouvelles générations sont plus puissantes et moins chères. <br><br>  <b>L'ancienne génération d'instances</b> <br><br>  C4.large <br><br>  2 noyaux <br><br>  3,75 Go de mémoire <br><br>  0,100 USD / heure <br><br>  <b>La nouvelle génération d'instances</b> <br><br>  C5.large <br><br>  2 noyaux <br><br>  4 Go de mémoire <br><br>  0,085 USD / heure <br><br>  La nouvelle génération est 15% moins chère et 6% plus puissante! <br><br>  <b>Autoriser un réseau amélioré</b> <br><br>  Activez le réseau amélioré pour de meilleures performances d'instance! <br><br><h2>  4. EBS - Elastic Block Store </h2><br>  EBS fournit des volumes de stockage sécurisés à utiliser avec les instances EC2 dans le cloud AWS.   EBS    ,      ,     .        ,    .     General Purpose SSD  Magnetic. <br><br> <b>General Purpose SSD</b> <br><br> $ 0.10/- <br><br> <b>Magnetic</b> <br><br> $ 0.05/- <br><br><h3> EBS  – SSD x Magnetic </h3><br>        ,    . ,    Magnetic  SSD. <br><br><ul><li>  Magnetic  SSD ,   . </li><li>  SSD  ,   . </li></ul><br><h3> EBS  –    </h3><br>  ,    EBS –      .       . <br><br><h3>   –      EBS </h3><br>         EBS!         !        ,  !      EC2  EBS. <br><br> AWS     EBS,     .  ,    ,  ,   EBS   . <br><br>  ,     .  ,    10  t3.small     50GB SSD EBS . <br><br>    : <br><br><ul><li> EC2   = 10 x $ 15.23 = 152.30 </li><li> EBS  : 10 x 50  = 500  </li><li>   : $ 0.10- </li><li> EBS  : $ 50.00 </li><li>  : $ 182.30 </li></ul><br>    ,  EBS    32%   EC2      .    ,   . <br><br> <b>   </b> <br><br>       (ephemeral storage).  ,        EBS,          Reserved .  , ,         (   ),   Spot    . <br><br><h3>    </h3><br>   ,    –      . <br><br> <b> S3,    </b> <br><br> EBS    ,  S3!  ,      S3,    EBS. <b>,  ,     ,     .</b> <br><br><h2> 5.  Elastic Cache – Reserved Nodes </h2><br>  ,    reserved   Elastic Cache.   : <br><br><ul><li> 1   – 65%  </li><li> 3   – 77%  </li></ul><br>     EC2 .   reserved node,   : <br><br><ul><li>   Elastic Cache ( EC2 Reserved instances) </li><li>   Reserved Nodes </li><li>     «Purchase Reserved Node»   </li><li>  Redis  Memcached </li><li>    </li><li>     </li><li>  Offering Type (1  3 ) </li><li>  Next </li></ul><br>     Elastic Cache   ,    EC2.          . <br><br> <b> Elastic Cache  AWS Marketplace'</b> <br><br>  ,    Marketplace  Reserved Nodes!   ,       . <br><br><h2> 6.   </h2><br>      -   !    ,     ,    .  ,     . ,    ,    ,     , S3  ,  .. <br><br>  ,  Back4App        ,    . <br><br><h3>        AWS? </h3><br>   ,       . <br><br><h3>  S3 endpoint  Cloudflare   CDN . </h3><br> CDN (Content Delivery Network    )             ,    ,    . <br><br><h3>  IP –   IP     </h3><br>   !  AWS ,        EC2 ,       «Public IP/ Elastic IP Data Transfer».       Public  Elastic IP ,  Elastic Load Balancer   ,                .       ,       (   ),    IP  ,   . <br><br><h3>     – Availability Zone </h3><br>      ,    .       . <br><br><h3>  GraphQL API </h3><br>     GraphQL     ,  ,      .  REST    ,    ,    ; ,      .   –  GraphQL      . <br><br><h3>      </h3><br>   ,        .          . <br><br><h3>  CloudFront! </h3><br>    ,    !              –  .      . <br><br><h3>      ? </h3><br>          <br><br><ul><li> Cost Explorer </li><li>  </li></ul><br>  -   ,    ,   ,      . <br><br>      Cost Explorer,    My Billing Dashboard   Cost Explorer.   Spend by Service View    .      6 ,    . ,    Service     !        ,   . <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/6.png" alt="image"><br><br>           : <br><br><ul><li>  More Filters,    </li><li>  Usage Type Group </li><li>      </li><li>  Data Transfer – Inter AZ </li><li>  Data Transfer – Internet Out </li><li>  Data Transfer – Region to Region Out </li><li>  S3 Data Transfer Out </li><li>  Apply Filters </li></ul><br>        : <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/7.png" alt="image"><br><br>            ,  S3  EC2.  ,              . <br><br>         billing report.   My Billing Dashboard   Bills . <br><br>     : <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/8.png" alt="image"><br><br>  ,     ,      EC2.   Data Transfer     . <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/9.png" alt="image"><br><br>  ,       ( ,   , ). <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/10.png" alt="image"><br><br><h2> 7. CloudFront </h2><br>  On-demand  Cloudfront     .    100 Tb .    $ 0.060 / Gb,    15%          ELB. <br><br><h3>   Cloud Front &amp;    </h3><br>        ! AWS     CloudFront     ,      CloudFront   $0.02/Gb.      ,      AWS    ,    .    ,           CloudFront Private Contract. <br><br><h3> Amazon CloudFront SSL-Cert-Custom </h3><br> ,     .   $20  ,       Cloudflare  $25  .   Private &amp; Volume Pricing,      CDN (Cloud Delivery Network) ,       . <br><br><h2> 8. S3 – Simple Storage Service </h2><br>       S3 . <br><br><h3> S3 VPC endpoint </h3><br>   ,     –   S3 VPC endpoint. <b> S3 endpoint   VPC (Virtual Private Cloud)      S3       ,  AWS     ,       .</b>    ,          . <br><br><h3>         </h3><br>     : <br> <b>S3 Standard</b> <br><br> $ 0.023 /  <br><br> <b>:</b> <br><br><ul><li>     </li><li>       </li><li>   ,      </li></ul><br> <b>S3 Infrequent Access</b> <br><br> $ 0.0125 /  <br><br> <b>:</b> <br><br><ul><li>    ,        </li><li>     </li><li>   ,         </li></ul><br> <b>S3 One-Zone Infrequent Access</b> <br><br> $ 0.010 /  <br><br> <b>:</b> <br><br><ul><li>    </li><li>    </li><li>       </li></ul><br> <b>S3 Glacier</b> <br><br> $ 0.004 /  <br><br> <b>:</b> <br><br><ul><li> , ,        </li><li>     </li><li>            </li></ul><br> <b>S3 Glacier Deep Archive</b> <br><br> $ 0.00099 /  <br><br> <b>:</b> <br><br><ul><li>              ,       . </li><li>     12  </li><li>     </li></ul><br> <b>  S3 API  </b> <br><br> <b> ,   ,      ,      .</b>     !   ,    Back4App.        ,    .       S3 Standard      S3 Glacier  .   !    ,  AWS  $ 0.05   1000   Glacier!   ,    ,       ! <b>     ,       S3    .</b> <br><br><h3>     S3 </h3><br>        S3       .       S3 .       . <br><br><h2> 9.       AWS </h2><br>   4   : <br><br><ul><li> Basic –  </li><li> Developer — $ 29 /   3%     </li><li> Business — $ 100 /   10-3%  ,     </li><li> Enterprise — $ 15.000   </li></ul><br>    Business    .            ,   .       Enterprise,      . ( Enterprise , ,        .) <br><br> <b>    AWS</b> <br><br>         !              .  AWS      ! ,          GDPR   !           .     ,      . <br><br><h2> 10.    </h2><br>         .              ,    .       365 ! <br><br>         .        : <br><br><ul><li>   </li><li>  ,  : </li><li>  Billing &amp; Cost Management </li><li>   </li><li> Cost Explorer –     </li><li> Cost Explorer –  RI </li><li> Cost Explorer –  RI </li><li>  tag'  </li><li>  , ,    </li><li>        AWS </li><li>  CloudWatch  Trusted Advisor    </li><li>         </li></ul><br><h2> 11.   </h2><br>        .       ,      . <br>    Back4App ,      .  ,         .           . <br><br><h2> 12.  </h2><br>   ,      AWS!      ,  ,   ,    . <br><br>    ,       AWS. <br><br><ul><li> <b>  EC2 </b> </li><li> <b>  </b> </li><li> <b>    CloudFront</b> </li><li> <b>    </b> </li><li> <b>    enhanced network</b> </li><li> <b>   S3</b> </li><li> <b>   AWS Marketplace &amp; Elastic Cache Nodes</b> </li><li> <b>   Spot, Reserved  On-Demand </b> </li><li> <b> autoscaling</b> </li><li> <b>  S3 Standard,   Glacier</b> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr467843/">https://habr.com/ru/post/fr467843/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr467825/index.html">Algorithmes d'apprentissage automatique indispensables</a></li>
<li><a href="../fr467827/index.html">Comment nous avons fait notre petite unité à partir de zéro</a></li>
<li><a href="../fr467831/index.html">La voie épineuse de la programmation</a></li>
<li><a href="../fr467837/index.html">MCU «Terrible» à trois cents - un bref aperçu des microcontrôleurs coûtant moins de 0,1 $</a></li>
<li><a href="../fr467841/index.html">Rendez-vous plus facile: Entretien avec John Romero, développeur de Doom</a></li>
<li><a href="../fr467847/index.html">«L'évolution omnicanal de l'IoT» ou comment l'Internet des objets peut affecter l'omnicanal</a></li>
<li><a href="../fr467849/index.html">Peloton: prochain Apple ou autre arnaque?</a></li>
<li><a href="../fr467851/index.html">Vérifiez la qualité sans quitter la caisse</a></li>
<li><a href="../fr467853/index.html">Evolution de la carte de visite: de la carte à l'application</a></li>
<li><a href="../fr467855/index.html">Nouveau 2GIS: une carte complète de la Russie et la recherche de marchandises dans les magasins hors ligne</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>