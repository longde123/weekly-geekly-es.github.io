<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜó üë©üèø‚ÄçüöÄ üå† D√©but des tests du syst√®me SCADA int√©gr√© au programme FLProg üöã üíµ üö¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bon apr√®s-midi Pendant tr√®s longtemps, FLProg n'a eu aucune nouvelle. Cela est justifi√© par le fait que j'√©tais occup√© par la grande t√¢che de cr√©er un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©but des tests du syst√®me SCADA int√©gr√© au programme FLProg</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flprog/blog/407245/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/59/d7/62/59d7625889b3d409798548.jpeg"></div><br>  Bon apr√®s-midi  Pendant tr√®s longtemps, FLProg n'a eu aucune nouvelle.  Cela est justifi√© par le fait que j'√©tais occup√© par la grande t√¢che de cr√©er un syst√®me Scada int√©gr√© dans le programme.  Et donc la premi√®re <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">version b√™ta de ce syst√®me</a> est sortie. <br><br>  Au cours du processus de d√©veloppement, de temps en temps, je parlais du site Web du programme de la situation au travail. <br><br><div class="spoiler">  <b class="spoiler_title">Historique du syst√®me</b> <div class="spoiler_text">  Le premier rapport d'avancement du projet du 29 juin  2017 ann√©e <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9L9Iv2kZ5Js" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Le deuxi√®me rapport sur l'√©tat d'avancement du projet du 6 septembre  2017 ann√©e <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Ff9DyUDFYGc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br></div></div><a name="habracut"></a><br>  Je vais d'abord parler de l'id√©ologie du syst√®me. <br><br>  Actuellement, je n'ai pas trouv√© un seul syst√®me Scud qui me conviendrait en termes de niveau d'entr√©e et de facilit√© de cr√©ation de projets.  Presque tous sont des monstres con√ßus pour un usage industriel, et pour commencer √† les utiliser, vous devez suivre une formation s√©rieuse.  Et apr√®s la formation (par exemple, je suis un d√©veloppeur certifi√© sur WinCC), le d√©but du travail sur eux n√©cessite un temps consid√©rable.  En outre, leurs prix commencent √† des dizaines de milliers de roubles.  Il existe bien s√ªr des versions gratuites, mais le plus souvent elles sont limit√©es soit par un tr√®s petit nombre de tags, soit par la dur√©e de fonctionnement.  Il y a FreeScada.  Mais je ne comprenais toujours pas comment travailler avec elle.  Et si je ne pouvais pas faire cela, alors les gens qui ne sont pas familiers avec la programmation (qui sont la majorit√© des utilisateurs du programme) ne pourront pas faire face. <br><br>  De plus, dans tous les skads que j'ai envisag√©s pour cr√©er la logique de comportement du skad lui-m√™me, certains langages de programmation textuels sont utilis√©s.  Autrement dit, il est n√©cessaire d'√©tudier leur syntaxe, les r√®gles d'√©criture, un ensemble de commandes.  Cela contredit √©galement la devise du projet FLProg - ¬´Programmation pour les non-programmeurs¬ª. <br><br>  En g√©n√©ral, je voulais quelque chose de l√©ger, avec un seuil d'entr√©e bas et la possibilit√© de programmer la logique interne en utilisant la programmation visuelle.  Et bien s√ªr, c'est gratuit.  Rien de convenable n'a √©t√© trouv√©, ce qui signifie que nous allons r√©inventer notre v√©lo. <br><br><img src="https://habrastorage.org/webt/59/d7/6a/59d76afb2cd0e197199254.jpeg"><br><br>  Pour le concept de base, j'ai pris l'id√©e d'impl√©menter non pas un scad, mais de pr√©senter l'ordinateur comme un microprocesseur avec un √©cran, un clavier et une souris int√©gr√©s.  En cons√©quence, les principales parties du programme sont imm√©diatement apparues. <br><br>  <i><b>Editeur graphique</b></i> <br><br><img src="https://habrastorage.org/webt/59/d7/6e/59d76e97519dc556750212.jpeg"><br><br>  √Ä titre d'exemple, j'ai pris le programme WinCC tr√®s pr√©f√©r√© de Siemens, int√©gr√© au package TiaPortal.  Il a supprim√© ce que je n'aime pas √† ce sujet, a ajout√© ce qui me semble manquer, a pris un peu de Windows Paint, un peu de CorelDraw, un peu de moi.  Dans tous les autres skads que j'ai vus, j'√©tais le plus g√™n√© par la t√¢che rigide des tailles d'√©cran.  Lorsque ces √©crans √©taient affich√©s sur des moniteurs avec une r√©solution diff√©rente, soit des cadres noirs √©taient obtenus, soit certains √©l√©ments d√©passaient l'√©cran et √©taient simplement invisibles.  Cela s'applique pleinement, par exemple, au m√™me WinCC.  Je le vois au travail tous les jours.  Dans mon scud, la taille de l'√©cran est √©galement d√©finie, mais lors de la lecture d'un projet dans le lecteur, vous pouvez redimensionner la fen√™tre du programme, tandis que les √©l√©ments s'adapteront automatiquement √† la nouvelle taille.  Quelque chose comme la mise √† l'√©chelle, mais intelligente, sans perte de qualit√© (tous les widgets skada sont vectoriels). <br><br>  Jusqu'√† pr√©sent dans la premi√®re version b√™ta du programme de widgets.  Il s'agit d'un rectangle, d'un cercle, d'une polyligne, d'un texte.  De plus, il y a des contr√¥les.  Il s'agit d'un champ d'entr√©e / sortie, d'un simple bouton, d'un indicateur rond. <br><br>  Tous les widgets ont une animation.  En utilisant les variables attach√©es, ils peuvent changer dynamiquement leur position, visibilit√©, couleur de contour (qui a le contour), couleur de remplissage (qui peut remplir).  Un widget texte peut changer son texte, et un widget rectangle et un champ de saisie peuvent avoir un mode de remplissage dynamique (le niveau de remplissage change en fonction de la valeur de la variable li√©e). <br><br>  Il est √©galement possible de lier des √©v√©nements √† n'importe quel widget.  Il s'agit de survoler le widget, de d√©placer le curseur hors du widget, de cliquer sur le bouton de la souris, de rel√¢cher le bouton de la souris, de cliquer, de double-cliquer.  R√©actions possibles aux √©v√©nements - modification de la valeur d'une variable, inversion de la valeur d'une variable de type bool√©en, passage √† un autre √©cran, ouverture d'une bo√Æte de dialogue de service. <br><br>  Ce n'est certes pas beaucoup, mais pour la premi√®re version pour l'instant c'est suffisant.  De plus, le nombre de widgets et leurs capacit√©s augmenteront. <br><br><div class="spoiler">  <b class="spoiler_title">Petite d√©monstration</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/HX1PwgGGPi0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  <i><b>√âditeur de sch√©ma</b></i> <br><br><img src="https://habrastorage.org/webt/59/d7/6c/59d76ce001964207594915.jpeg"><br><br>  Ici, bien s√ªr, j'ai pris l'√©diteur FBD comme base, qui est utilis√© lors de la programmation du contr√¥leur dans le programme FLProg.  L'interface de l'√©diteur n'a pas beaucoup chang√©, ce qui permettra aux utilisateurs du programme de travailler facilement dans l'√©diteur du sch√©ma skad.  Mais le remplissage a radicalement chang√©.  Pendant le travail sur le programme FLProg (c'√©tait la cinqui√®me ann√©e d√©j√†), j'ai eu beaucoup d'id√©es sur l'optimisation du travail de l'√©diteur de programme et du compilateur.  J'ai appliqu√© toutes ces id√©es dans l'√©diteur de diagramme scada, et apr√®s l'avoir ex√©cut√©, je les transf√©rerai √©galement dans le programme principal.  En ce qui concerne le support du langage LAD dans le scad, je n'ai pas encore pris de d√©cision, s'il y a suffisamment d'utilisateurs int√©ress√©s, je le ferai. <br><br><div class="spoiler">  <b class="spoiler_title">Petite d√©monstration</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/oBL8kq7lwvY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  <i><b>Les communications</b></i> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/59/d7/6f/59d76f0706f34488928825.jpeg"></div><br>  Et bien s√ªr les communications, quel scad sans eux. <br><br><ol><li>  Protocole interne FLProg.  Il s'agit de l'√©change de variables de tout type via ComPort (pour un ordinateur) avec le port UART du microcontr√¥leur.  Il fonctionne rapidement, mais uniquement pour le microprogramme de contr√¥leur cr√©√© dans le programme FLProg. </li><li>  Modbus RTU, Modbus TCP, Modbus RTU sur TCP.  Vous pouvez cr√©er un nombre illimit√© de connexions √† l'aide de ces protocoles.  Les fonctions 1, 2, 3, 5, 6, 15, 16 sont prises en charge. Le pilote de protocole est auto-√©crit, les biblioth√®ques externes ne sont pas utilis√©es.  J'ai essay√© de me conformer autant que possible √† la norme Modbas.  Les tests montreront comment j'ai r√©ussi.  Il fonctionne sous Windows et Linux.  Cependant, pour Linux, il existe certaines limitations qui √©chappent √† mon contr√¥le.  Le fait est que Modbus TCP Slave soul√®ve un serveur TCP sur un port sp√©cifique.  Pour Modbus, le port standard est -502.  Mais sous Linux, les ports inf√©rieurs √† 1024 ne sont pas autoris√©s √† √™tre ouverts par un utilisateur normal.  Par cons√©quent, vous devez soit cr√©er un esclave sur le port avec un nombre plus √©lev√©, soit d√©marrer le lecteur √† partir de la racine (ce qui n'est pas bon).  Avec le ma√Ætre, puisqu'il est client, il n'y a pas de tels probl√®mes. </li></ol><br>  Pour toutes les communications, il est possible dans le processus d'ex√©cution d'activer, de d√©sactiver la connexion, de configurer enti√®rement la connexion, d'activer et de d√©sactiver l'interrogation des esclaves, de surveiller l'√©tat de la connexion, ainsi que l'√©tat de la connexion de l'esclave avec le ma√Ætre.  Bien s√ªr, pour chaque ma√Ætre et esclave, il existe des variables de service qui stockent le code de la derni√®re erreur lors de l'interrogation. <br><br>  √Ä tout moment pendant le d√©veloppement d'un projet, vous pouvez ouvrir ce projet pour ex√©cution et voir comment cela fonctionnera.  Pour jouer dans le lecteur, un fichier Runtime est cr√©√©. <br><br><div class="spoiler">  <b class="spoiler_title">Petite d√©monstration</b> <div class="spoiler_text">  R√©ception - transfert de variables via UART <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/PXFAKa-0kto" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Modbus RTU <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/C0fgSz1dHOY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Modbus RTU <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/NPVpnMCW1A4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  <i><b>Joueur</b></i> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/59/d7/6f/59d76fdb4a818159634284.jpeg"></div><br>  Le lecteur de fichiers d'ex√©cution est une application autonome.  Le package du lecteur comprend trois ex√©cutables pour Windows et deux pour Linux. <br><br>  Fichier <b>Start.exe</b> (version Windows uniquement).  Au d√©marrage, il recherche un fichier d'ex√©cution (extension .fsp) √† ses c√¥t√©s.  S'il le trouve, il le lance pour ex√©cution.  Si ce n'est pas le cas, il recherche les entr√©es du gestionnaire de projet.  Ces entr√©es recherchent le projet par d√©faut, qui est lanc√© pour ex√©cution.  Si les enregistrements du gestionnaire de projet ne sont pas trouv√©s, ou si le projet par d√©faut n'y est pas marqu√©, le gestionnaire lui-m√™me d√©marre.  √Ä l'aide du gestionnaire, vous pouvez rechercher des fichiers d'ex√©cution sur l'ordinateur, en faire une liste et en attribuer un par d√©faut.  Le fichier Start.exe ne peut pas √™tre renomm√© et aucun fichier d'ex√©cution (extension .fsp) ne peut y √™tre attach√©.  Vous ne pouvez pas supprimer ce fichier du package. <br><br>  Fichier <b>Pleer.exe.</b>  Le comportement est similaire au fichier Start.exe, mais il n'y a aucune restriction sur le changement de nom et la liaison des fichiers d'ex√©cution.  Si ces fonctions ne sont pas n√©cessaires, ce fichier peut √™tre supprim√© du package (cela ne s'applique qu'√† Windows, sous Linux, il s'agit du fichier de d√©marrage principal). <br><br>  Fichier <b>Manager.exe.</b>  Sert au lancement sans ambigu√Øt√© du chef de projet.  Si cette fonction n'est pas n√©cessaire, ce fichier peut √™tre supprim√© du package. <br><br>  Les fichiers restants dans le package sont directement le lecteur. <br><br><div class="spoiler">  <b class="spoiler_title">Petite d√©monstration</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/Y6sFRIE0l_0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br><h2>  <i><b>Entra√Ænement!</b></i> </h2><br><img src="https://habrastorage.org/webt/59/d7/71/59d7711ae933e454493160.jpeg"><br><br>  Le principal objectif du projet FLprog est d'attirer des jeunes vers la profession de programmeur industriel, d'ing√©nieur en √©lectronique et tout simplement dans la profession technique.  Il y a trop de programmeurs ordinaires et de directeurs des ventes dans notre pays.  Partout o√π vous crachez, soit un programmeur jouet pour un android, soit un programmeur web de pages de vente, soit un gestionnaire "avanc√©".  Mais vous ne trouverez pas un bon ajusteur ou d√©veloppeur d'un syst√®me automatis√© de gestion des incendies.  √Ä cet √©gard, je me r√©jouis de l'apparition de deux cercles de robotique, qui ont choisi FLProg comme programme de travail principal.  L'un dans la ville de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shatura</a> , l'autre √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mytishchi</a> (photo de ce cercle).  Dans cette optique, la scada a √©galement √©t√© d√©velopp√©e.  J'ai essay√© pour que tout enseignant puisse faire une application interactive, par exemple, pour d√©montrer le fonctionnement de la logique de base, sans difficult√©s, l'apprentissage des langages de programmation, les principes de construction de programmes.  De plus, avec l'aide de cette scada, il est possible d'effectuer n'importe quel travail de laboratoire sur la construction de circuits logiques, une formation sur la cr√©ation de syst√®mes d'automatisation industrielle. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ZGQ3LHhswnM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Je n'ai pas de cadeau d'enseignant, mais je pense qu'un vrai enseignant peut trouver le bon mat√©riel.  Eh bien, j'ai essay√© de fournir l'outil. <br><br><hr><br><img src="https://habrastorage.org/webt/59/d7/73/59d773a94997d692424605.jpeg" width="150" align="left">  Je dois imm√©diatement avertir que la version actuelle du programme est FORTEMENT test.  √âtant donn√© que le personnel du projet FLProg est compos√© d'une seule personne (moi), j'utilise sans vergogne les utilisateurs du programme en tant que service d'assurance qualit√©.  Et ils sont heureux de faire ce travail.  √Ä ce jour, de nombreuses erreurs ont √©t√© d√©tect√©es.  Par cons√©quent, dans un proche avenir, la version de test sera mise √† jour sur le serveur.  Le temps de test estim√© est d'un mois, apr√®s quoi une version stable sera publi√©e. <br><br>  Si ce sujet int√©ressera les lecteurs de Geektimes, je continuerai √† publier des articles avec une description plus d√©taill√©e des fonctions du programme. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr407245/">https://habr.com/ru/post/fr407245/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr407233/index.html">WSJ: les agences de renseignement russes d√©couvrent les outils secrets de la NSA gr√¢ce √† Kaspersky Anti-Virus</a></li>
<li><a href="../fr407235/index.html">Examen d'un smartphone peu co√ªteux avec un bon appareil photo pour ce prix. Nous √©tudions Xiaomi Mi 5X (alias A1)</a></li>
<li><a href="../fr407237/index.html">Les r√©sultats d'une nouvelle √©tude montrent qu'il y avait une atmosph√®re sur la Lune il y a des milliards d'ann√©es.</a></li>
<li><a href="../fr407241/index.html">Comment la plateforme en ligne pour apprendre l'anglais a √©t√© cr√©√©e</a></li>
<li><a href="../fr407243/index.html">Une nouvelle √©tude a r√©v√©l√© qu'environ 50% des nouveaux m√©dicaments contre le cancer sont inutiles.</a></li>
<li><a href="../fr407247/index.html">L'absurdit√© du prix Nobel de science</a></li>
<li><a href="../fr407249/index.html">Des moyens relativement fiables pour g√©n√©rer des revenus sur les √©changes de crypto-monnaie</a></li>
<li><a href="../fr407251/index.html">O√π va la moiti√© suppl√©mentaire du co√ªt: comment le trafic gris mange les budgets pour la publicit√© sur Internet</a></li>
<li><a href="../fr407253/index.html">Les ICO les plus absurdes selon CarTaxi</a></li>
<li><a href="../fr407257/index.html">Facteurs cosmophysiques dans des processus al√©atoires</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>