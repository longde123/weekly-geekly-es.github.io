<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤘🏽 🏟️ 🎽 متراصة لمئات إصدارات العملاء: كيف نكتب ونؤيد الاختبارات 👰 🕺🏻 💉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="مرحبا بالجميع! 

 أنا مطور خلفية في فريق خادم Badoo. في مؤتمر HighLoad العام الماضي ، قدمت عرضًا تقديميًا ، أريد أن أشارككم فيه نسخة نصية. ستكون هذه ا...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>متراصة لمئات إصدارات العملاء: كيف نكتب ونؤيد الاختبارات</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/443768/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tz/sv/jv/tzsvjvswjax_rsrd3fjcriulb-8.jpeg"><br><br>  مرحبا بالجميع! <br><br>  أنا مطور خلفية في فريق خادم Badoo.  في مؤتمر HighLoad العام الماضي ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">قدمت عرضًا تقديميًا</a> ، أريد أن أشارككم فيه نسخة نصية.  ستكون هذه المشاركة مفيدة للغاية لأولئك الذين يكتبون اختبارات للواجهة الخلفية وأن يواجهوا مشكلات في اختبار الكود القديم ، وكذلك لأولئك الذين يرغبون في اختبار منطق الأعمال المعقد. <br><br>  ماذا سنتحدث؟  أولاً ، سأتحدث باختصار عن عملية التطوير الخاصة بنا وكيف تؤثر على حاجتنا إلى الاختبارات والرغبة في كتابة هذه الاختبارات.  بعد ذلك سنذهب صعوداً وهبوطاً في هرم أتمتة الاختبار ، ونناقش أنواع الاختبارات التي نستخدمها ، ونتحدث عن الأدوات الموجودة داخل كل منها والمشكلات التي نحلها بمساعدتهم.  في النهاية ، فكر في كيفية الحفاظ على كل هذه الأشياء وتشغيلها. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  عملية التنمية لدينا </h2><br>  لقد أوضحنا عملية التطوير لدينا: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/er/hv/jr/erhvjrnkf7zncdxhlgjusogzmyk.png" width="600"></div><br>  لاعب الجولف هو مطور خلفية.  في مرحلة ما ، تصل إليه مهمة التطوير ، وعادة ما تكون في شكل وثيقتين: المتطلبات من جانب العمل ووثيقة فنية تصف التغييرات في بروتوكول التفاعل بين الواجهة الخلفية والعملاء (تطبيقات الهاتف المحمول والموقع). <br><br>  يكتب المطور الشفرة ويضعها موضع التنفيذ ، وقبل كل تطبيقات العميل.  جميع الوظائف محمية من قبل بعض العلامات المميزة أو اختبارات A / B ، وهذا موصوف في مستند فني.  بعد ذلك ، وفقًا للأولويات الحالية وخريطة طريق المنتج ، يتم إصدار تطبيقات العميل.  بالنسبة لنا ، مطوري الواجهة الخلفية ، لا يمكن التنبؤ به تمامًا عندما يتم تنفيذ ميزة معينة على العملاء.  دورة الإصدار لتطبيقات العملاء معقدة إلى حد ما وأطول من دورة عملنا ، وبالتالي فإن مديري المنتجات لدينا يمزجون أولوياتهم حرفيًا. <br><br>  تتمتع ثقافة التطوير التي تتبناها الشركة بأهمية كبيرة: المطور الخلفي مسؤول عن الميزة من لحظة تنفيذها على الواجهة الخلفية إلى التكامل الأخير على النظام الأساسي الأخير الذي كان من المخطط أصلاً تنفيذه لهذه الميزة. <br><br>  هذا الموقف ممكن: منذ ستة أشهر ، قمت بتطبيق بعض الميزات ، وفرق العملاء لم تنفذها لفترة طويلة ، لأن أولويات الشركة قد تغيرت ، وكنت مشغولة بالفعل بالعمل على مهام أخرى ، لديك مواعيد نهائية جديدة ، أولويات - وهنا يأتي زملائك يقولون: "هل تتذكر هذا الشيء الذي غسلته قبل ستة أشهر؟  إنها لا تعمل. "  وبدلاً من الانخراط في مهام جديدة ، يمكنك إخماد الحرائق. <br><br><img src="https://habrastorage.org/files/e22/ebe/15c/e22ebe15c2174a4d99ebf0da46fbe950.gif" width="600"><br><br>  لذلك ، لدى مطورينا حافزًا غير معتاد لمبرمجي PHP - للتأكد من وجود عدد قليل من المشاكل أثناء مرحلة التكامل. <br><br>  ماذا تريد أن تفعل أولاً وقبل كل شيء للتأكد من أن الميزة تعمل؟ <br><br>  بالطبع ، أول ما يتبادر إلى الذهن هو إجراء اختبار يدوي.  يمكنك التقاط التطبيق ، لكنه لا يعرف كيف - نظرًا لأن الميزة جديدة ، سيتولى العملاء العناية بها في غضون ستة أشهر.  حسنًا ، لا يوفر الاختبار اليدوي أي ضمان بأنه في الوقت الذي سينتقل من إصدار الواجهة الخلفية إلى بداية التكامل ، لن يكسر أحد أي شيء على العملاء. <br><br>  وهنا الاختبارات الآلية تأتي لمساعدتنا. <br><br><h2 style=";text-align:right;direction:rtl">  اختبارات الوحدة </h2><br>  أبسط الاختبارات التي نكتبها هي اختبارات الوحدة.  نستخدم لغة PHP كلغة رئيسية للواجهة الخلفية و PHPUnit كإطار لاختبار الوحدة.  بالنظر إلى المستقبل ، أقول إن جميع اختبارات الواجهة الخلفية مكتوبة على أساس هذا الإطار. <br><br>  اختبارات الوحدة التي غالبًا ما نقوم بتغطية بعض الأجزاء المعزولة الصغيرة من التعليمات البرمجية ، والتحقق من أداء الطرق أو الوظائف ، أي أننا نتحدث عن وحدات صغيرة من منطق الأعمال.  يجب ألا تتفاعل اختبارات الوحدة الخاصة بنا مع أي شيء ، أو الوصول إلى قواعد البيانات أو الخدمات. <br><br><h3 style=";text-align:right;direction:rtl">  Softmocks </h3><br>  الصعوبة الرئيسية التي تواجه المطورين عند كتابة اختبارات الوحدة هي رمز غير قابل للاختبار ، وهذا عادة ما يكون رمزًا قديمًا. <br><br>  مثال بسيط.  بادوو تبلغ من العمر 12 عامًا ، بمجرد أن كانت شركة صغيرة جدًا تم تطويرها بواسطة العديد من الأشخاص.  بدء التشغيل بنجاح كبير موجود دون أي اختبارات على الإطلاق.  ثم حصلنا على الحجم الكافي وأدركنا أنه لا يمكنك العيش بدون اختبارات.  ولكن بحلول هذا الوقت كان قد تم كتابة الكثير من التعليمات البرمجية التي عملت.  لا تعيد كتابتها فقط من أجل الاختبار!  لن يكون ذلك معقولًا جدًا من وجهة نظر العمل. <br><br>  لذلك ، قمنا بتطوير <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مكتبة</a> صغيرة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مفتوحة المصدر SoftMocks</a> ، مما يجعل عملية كتابة اختباراتنا أرخص وأسرع.  فهو يعترض جميع ملفات PHP / التضمين ويحل محل الملف المصدر مع تعديل المحتوى ، أي الكود المعاد كتابته.  هذا يسمح لنا بإنشاء بذرة لأي رمز.  تفاصيل كيف تعمل المكتبة. <br><br>  هذا هو ما يبدو للمطور: <br><br><pre style=";text-align:right;direction:rtl"><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//mock  \Badoo\SoftMocks::redefineConstant($constantName, $newValue); //mock  : , ,  \Badoo\SoftMocks::redefineMethod( $class, $method, $method_args, $fake_code ); //mock  \Badoo\SoftMocks::redefineFunction( $function, $function_args, $fake_code );</span></span></code> </pre> <br>  بمساعدة مثل هذه الإنشاءات البسيطة ، يمكننا إعادة تعريف كل ما نريده على مستوى العالم.  على وجه الخصوص ، يسمحون لنا بالتحايل على قيود صانع PHPUnit القياسي.  وهذا يعني أنه يمكننا السخرية من الأساليب الثابتة والخاصة وإعادة تحديد الثوابت والقيام بالكثير ، وهو أمر مستحيل في PHPUnit العادي. <br><br>  ومع ذلك ، واجهنا مشكلة: يبدو للمطورين أنه إذا كانت هناك SoftMocks ، فليست هناك حاجة لكتابة الكود الذي تم اختباره - يمكنك دائمًا "تمشيط" الكود مع mocks العالمية لدينا ، وسيعمل كل شيء بشكل جيد.  ولكن هذا النهج يؤدي إلى رمز أكثر تعقيدًا وتراكم "العكازات".  لذلك ، اعتمدنا عدة قواعد تسمح لنا بإبقاء الموقف تحت السيطرة: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يجب اختبار جميع الشفرات الجديدة بسهولة باستخدام أكواب PHPUnit القياسية.  إذا تم استيفاء هذا الشرط ، فسيكون الرمز قابلاً للاختبار ويمكنك بسهولة اختيار قطعة صغيرة واختبارها فقط. <br></li><li style=";text-align:right;direction:rtl">  يمكن استخدام SoftMocks مع الكود القديم المكتوب بطريقة غير مناسبة لاختبار الوحدة ، وكذلك في الحالات التي يكون فيها باهظ الثمن / طويل / يصعب القيام به بطريقة أخرى (أكد على ذلك). <br></li></ol><br>  تتم مراقبة الامتثال لهذه القواعد بعناية في مرحلة مراجعة التعليمات البرمجية. <br><br><h3 style=";text-align:right;direction:rtl">  اختبار طفرة </h3><br>  بشكل منفصل ، أود أن أقول عن جودة اختبارات الوحدة.  أعتقد أن العديد منكم يستخدمون مقاييس مثل تغطية الشفرة.  لكنها ، للأسف ، لا تجيب على سؤال واحد: "هل كتبت اختبارًا جيدًا للوحدة؟"  من المحتمل أن تكون قد كتبت مثل هذا الاختبار ، والذي لا يتحقق في الواقع من أي شيء ، لا يحتوي على تأكيد واحد ، ولكنه يولد تغطية رمز ممتازة.  بالطبع ، المثال مبالغ فيه ، لكن الوضع ليس بعيدًا عن الواقع. <br><br>  في الآونة الأخيرة ، بدأنا في تقديم اختبار طفري.  هذا مفهوم قديم إلى حد ما ، ولكنه ليس معروفًا.  الخوارزمية لمثل هذا الاختبار بسيطة للغاية: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  أخذ الرمز وتغطية الرمز ؛ <br></li><li style=";text-align:right;direction:rtl">  parsim والبدء في تغيير التعليمات البرمجية: صواب إلى false ،&gt; إلى&gt; = ، + إلى - (بشكل عام ، ضرر بكل طريقة) ؛ <br></li><li style=";text-align:right;direction:rtl">  لكل تغيير طفرة ، قم بتشغيل مجموعات الاختبار التي تغطي السلسلة التي تم تغييرها ؛ <br></li><li style=";text-align:right;direction:rtl">  إذا سقطت الاختبارات ، فهي جيدة ولا تسمح لنا حقًا بكسر الشفرة ؛ <br></li><li style=";text-align:right;direction:rtl">  إذا مرت الاختبارات ، على الأرجح ، فهي ليست فعالة بما يكفي ، على الرغم من التغطية ، وقد يكون من المفيد النظر إليها عن كثب ، لإعطاء بعض التأكيد (أو أن هناك منطقة لا يغطيها الاختبار). <br></li></ul><br>  هناك العديد من الأطر الجاهزة لـ PHP ، مثل Humbug و Infection.  لسوء الحظ ، لم يناسبونا ، لأنهم لا يتوافقون مع SoftMocks.  لذلك ، لقد كتبنا الأداة المساعدة لوحدة التحكم الخاصة بنا ، والتي تفعل الشيء نفسه ، لكننا نستخدم تنسيق تغطية الشفرة الداخلية الخاص بنا وأصدقاء لـ SoftMocks.  الآن يبدأ المطور العمل يدويًا ويحلل الاختبارات التي كتبها ، لكننا نعمل على إدخال الأداة في عملية التطوير الخاصة بنا. <br><br><h2 style=";text-align:right;direction:rtl">  اختبار التكامل </h2><br>  بمساعدة اختبارات التكامل ، نتحقق من التفاعل مع مختلف الخدمات وقواعد البيانات. <br><br>  لفهم القصة بشكل أكبر ، دعنا نطور عرضًا خياليًا ونغطيه بالاختبارات.  تخيل أن مديري منتجاتنا قرروا توزيع تذاكر المؤتمرات على أكثر المستخدمين تخصيصًا لدينا: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/72/us/3f/72us3fyuuclhm8c1erh3qk42yra.png" width="300"></div><br>  يجب أن يظهر العرض الترويجي إذا: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  المستخدم في الحقل "العمل" يشير إلى "مبرمج" ، <br></li><li style=";text-align:right;direction:rtl">  يشارك المستخدم في اختبار A / B HL18_promo ، <br></li><li style=";text-align:right;direction:rtl">  تم تسجيل المستخدم منذ أكثر من عامين. <br></li></ul><br>  بالضغط على زر "الحصول على تذكرة" ، يجب أن نحفظ بيانات هذا المستخدم في قائمة ما لنقلها إلى مديرينا الذين يقومون بتوزيع التذاكر. <br><br>  حتى في هذا المثال البسيط ، هناك شيء لا يمكن التحقق منه باستخدام اختبارات الوحدة - التفاعل مع قاعدة البيانات.  للقيام بذلك ، نحتاج إلى استخدام اختبارات التكامل. <br><br>  النظر في الطريقة القياسية لاختبار التفاعل قاعدة البيانات التي تقدمها PHPUnit: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  رفع قاعدة بيانات الاختبار. <br></li><li style=";text-align:right;direction:rtl">  نحن نستعد DataTables و DataSets. <br></li><li style=";text-align:right;direction:rtl">  قم بإجراء الاختبار. <br></li><li style=";text-align:right;direction:rtl">  نحن مسح قاعدة بيانات الاختبار. <br></li></ol><br>  ما الصعوبات التي تكمن في انتظار مثل هذا النهج؟ <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  تحتاج إلى دعم هياكل DataTables و DataSets.  إذا قمنا بتغيير تخطيط الجدول ، فمن الضروري عكس هذه التغييرات في الاختبار ، وهو أمر غير مناسب دائمًا ويتطلب وقتًا إضافيًا. <br></li><li style=";text-align:right;direction:rtl">  يستغرق وقتا طويلا لإعداد قاعدة البيانات.  في كل مرة عند إعداد الاختبار ، نحتاج إلى تحميل شيء ما هناك ، وإنشاء بعض الجداول ، وهذا طويل ومزعج إذا كان هناك الكثير من الاختبارات. <br></li><li style=";text-align:right;direction:rtl">  وأهم عيب: إجراء هذه الاختبارات بالتوازي يجعلها غير مستقرة.  بدأنا الاختبار A ، بدأ الكتابة إلى جدول الاختبار ، الذي أنشأه.  في الوقت نفسه ، أطلقنا الاختبار B ، الذي يريد العمل مع جدول الاختبار نفسه.  نتيجة لذلك ، تنشأ حالات انسداد متبادل وحالات أخرى غير متوقعة. <br></li></ul><br>  لتجنب هذه المشكلات ، قمنا بتطوير مكتبة صغيرة DBMocks الخاصة بنا. <br><br><h3 style=";text-align:right;direction:rtl">  DBMocks </h3><br>  مبدأ العملية على النحو التالي: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  بمساعدة SoftMocks ، نعترض كل الأغلفة التي نعمل من خلالها مع قواعد البيانات. <br></li><li style=";text-align:right;direction:rtl">  متى <br>  يتحول الاستعلام إلى صور وهمية ، ويحلل استعلام SQL ويسحب DB + TableName منه ، ويحصل على المضيف من الاتصال. <br></li><li style=";text-align:right;direction:rtl">  على نفس المضيف في tmpfs ، نقوم بإنشاء جدول مؤقت بنفس بنية الجدول الأصلي (نقوم بنسخ الهيكل باستخدام SHOW CREATE TABLE). <br></li><li style=";text-align:right;direction:rtl">  بعد ذلك ، سنقوم بإعادة توجيه جميع الطلبات التي ستظهر من خلال هذا النموذج إلى جدول مؤقت تم إنشاؤه حديثًا. <br></li></ol><br>  ماذا يعطينا هذا: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  لا حاجة لرعاية الهياكل باستمرار ؛ <br></li><li style=";text-align:right;direction:rtl">  لم تعد الاختبارات قادرة على إتلاف البيانات في جداول المصدر ، لأننا نعيد توجيهها إلى الجداول المؤقتة أثناء الطيران ؛ <br></li><li style=";text-align:right;direction:rtl">  ما زلنا نختبر التوافق مع إصدار MySQL الذي نعمل معه ، وإذا توقف الطلب فجأة عن أن يكون متوافقًا مع الإصدار الجديد ، فسوف يشاهده الاختبار ويتعطله. <br></li><li style=";text-align:right;direction:rtl">  والأهم من ذلك ، أن الاختبارات الآن معزولة ، وحتى إذا قمت بتشغيلها بشكل متوازٍ ، فسوف تنتشر مؤشرات الترابط في جداول مؤقتة مختلفة ، حيث نضيف مفتاحًا فريدًا لكل اختبار في أسماء جداول الاختبار. <br></li></ul><br><h2 style=";text-align:right;direction:rtl">  اختبار API </h2><br>  يوضح GIF الفرق بين اختبارات الوحدة وواجهة برمجة التطبيقات: <br><br><img src="https://habrastorage.org/webt/ho/zb/me/hozbmexeumir1wdsjsgnlobh5xs.gif"><br>  <i>القفل يعمل بشكل جيد ، لكنه متصل بالباب الخطأ.</i> <br><br>  تحاكي اختباراتنا جلسة عميل ، وتكون قادرة على إرسال الطلبات إلى الواجهة الخلفية ، بعد بروتوكولنا ، وتستجيب الواجهة الخلفية لهم كعميل حقيقي. <br><br><h3 style=";text-align:right;direction:rtl">  اختبار تجمع المستخدم </h3><br>  ما الذي نحتاجه لكتابة هذه الاختبارات بنجاح؟  دعنا نعود إلى شروط عرض عرضنا الترويجي: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  المستخدم في الحقل "العمل" يشير إلى "مبرمج" ، <br></li><li style=";text-align:right;direction:rtl">  يشارك المستخدم في اختبار A / B HL18_promo ، <br></li><li style=";text-align:right;direction:rtl">  تم تسجيل المستخدم منذ أكثر من عامين. <br></li></ul><br>  على ما يبدو ، هنا كل شيء عن المستخدم.  وفي الواقع ، تتطلب 99٪ من اختبارات واجهة برمجة التطبيقات (API) وجود مستخدم مسجل معتمد ، وهو موجود في جميع الخدمات وقواعد البيانات. <br><br>  أين يمكن الحصول عليها؟  يمكنك محاولة تسجيله في وقت الاختبار ، ولكن: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  أنها طويلة وتستهلك الموارد ؛ <br></li><li style=";text-align:right;direction:rtl">  بعد الانتهاء من الاختبار ، يجب إزالة هذا المستخدم بطريقة أو بأخرى ، وهي مهمة غير تافهة إذا كنا نتحدث عن مشاريع كبيرة ؛ <br></li><li style=";text-align:right;direction:rtl">  أخيرًا ، كما هو الحال في العديد من المشاريع الأخرى المحملة بدرجة عالية ، فإننا نقوم بالعديد من العمليات في الخلفية (إضافة مستخدم إلى خدمات مختلفة ، والنسخ المتماثل إلى مراكز البيانات الأخرى ، إلخ) ؛  لا تعرف الاختبارات أي شيء عن هذه العمليات ، لكن إذا كانت تعتمد ضمنيًا على نتائج تنفيذها ، فهناك خطر عدم الاستقرار. <br></li></ul><br><br>  قمنا بتطوير أداة تسمى "مجموعة اختبار المستخدمين".  يعتمد على فكرتين: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  نحن لا نسجل المستخدمين في كل مرة ، ولكن نستخدمها عدة مرات. <br></li><li style=";text-align:right;direction:rtl">  بعد الاختبار ، نقوم بإعادة تعيين بيانات المستخدم إلى حالتها الأصلية (في وقت التسجيل).  إذا لم يتم ذلك ، فستصبح الاختبارات غير مستقرة مع مرور الوقت ، لأنه سيتم "تلوث" المستخدمين بمعلومات من اختبارات أخرى. <br></li></ol><br><br>  يعمل شيء مثل هذا: <br><br><img src="https://habrastorage.org/webt/yg/db/p5/ygdbp5rwmfrbd2ssyiejb3bp8fs.png"><br><br>  في مرحلة ما ، أردنا تشغيل اختبارات واجهة برمجة التطبيقات في بيئة الإنتاج.  لماذا نريد هذا حتى؟  لأن البنية التحتية devel ليست هي نفسها الإنتاج. <br><br>  على الرغم من أننا نحاول تكرار البنية الأساسية للإنتاج باستمرار بحجم أقل ، إلا أن تطوير لن يكون نسخة كاملة منه.  للتأكد تمامًا من أن البنية الجديدة تلبي التوقعات ولا توجد أية مشكلات ، فإننا نقوم بتحميل الكود الجديد إلى مجموعة ما قبل الإنتاج ، والتي تعمل مع بيانات وخدمات الإنتاج ، ونجري اختبارات API الخاصة بنا هناك. <br><br>  في هذه الحالة ، من المهم للغاية التفكير في كيفية عزل مستخدمي الاختبار عن المستخدمين الحقيقيين. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ماذا سيحدث إذا بدأ مستخدمو الاختبار في الظهور بشكل حقيقي في تطبيقنا.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/gk/io/wg/gkiowghhl3b4hzazgj9u5e_wf4s.gif" width="300"></div><br></div></div><br>  كيفية عزل؟  كل من مستخدمينا لديه علامة <code>is_test_user</code> .  في مرحلة التسجيل ، يصبح <code>yes</code> أو <code>no</code> ، ولم يعد يتغير.  بواسطة هذه العلامة ، نعزل المستخدمين في جميع الخدمات.  من المهم أيضًا استبعاد مستخدمي الاختبار من تحليلات الأعمال ونتائج اختبار A / B حتى لا يشوهوا الإحصاءات. <br><br>  يمكنك الانتقال بطريقة أكثر بساطة: لقد بدأنا بحقيقة أن جميع مستخدمي الاختبار "تم نقلهم" إلى القارة القطبية الجنوبية.  إذا كان لديك خدمة جغرافية ، فهذه طريقة تعمل تمامًا. <br><br><h3 style=";text-align:right;direction:rtl">  QA API </h3><br>  لا نحتاج فقط إلى مستخدم - بل نحتاج إليه مع بعض المعلمات: للعمل كمبرمج ، والمشاركة في اختبار A / B معين وتم تسجيله منذ أكثر من عامين.  بالنسبة لمستخدمي الاختبار ، يمكننا بسهولة تعيين مهنة باستخدام واجهة برمجة تطبيقات الواجهة الخلفية الخاصة بنا ، ولكن الدخول في اختبارات A / B أمر محتمل.  وحالة التسجيل منذ أكثر من عامين يصعب عمومًا الوفاء بها ، لأننا لا نعرف متى ظهر المستخدم في المجموعة. <br><br>  لحل هذه المشكلات ، لدينا QA API.  هذا ، في الواقع ، هو الباب الخلفي للاختبار ، وهو عبارة عن طرق API موثقة جيدًا تسمح لك بإدارة بيانات المستخدم بسرعة وسهولة وتغيير حالتها وتجاوز البروتوكول الرئيسي لتواصلنا مع العملاء.  تتم كتابة الطرق بواسطة مطوري الواجهة الخلفية لمهندسي ضمان الجودة واستخدامها في اختبارات واجهة المستخدم وواجهة برمجة التطبيقات. <br><br>  لا يمكن تطبيق QA API إلا في حالة مستخدمي الاختبار: إذا لم يكن هناك علامة مقابلة ، فسوف يسقط الاختبار على الفور.  إليك إحدى طرق QA API التي تتيح لك تغيير تاريخ تسجيل المستخدم إلى تاريخ تعسفي: <br><br><img src="https://habrastorage.org/webt/gw/mf/ws/gwmfwsbej3rtmytvaxdoxbzrvaa.png"><br><br>  وستبدو ثلاث مكالمات من شأنها أن تسمح لك بتغيير بيانات مستخدم الاختبار بسرعة بحيث تلبي شروط عرض الترويجي: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  في حقل "العمل" يشار إلى "مبرمج": <br> <code>addUserWorkEducation?user_id=ID&amp;works[]=Badoo, <br> </code> <br> </li><li style=";text-align:right;direction:rtl">  يشارك المستخدم في اختبار A / B HL18_promo: <br> <code>forceSplitTest?user_id=ID&amp;test=HL18_promo</code> <br> </li><li style=";text-align:right;direction:rtl">  مسجل منذ أكثر من عامين: <br> <code>userCreatedChange?user_id=ID&amp;created=2016-09-01</code> <br> </li></ul><br><br>  لأن هذا هو الباب الخلفي ، لا بد من التفكير في الأمن.  لقد قمنا بحماية خدماتنا بعدة طرق: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  معزولة على مستوى الشبكة: لا يمكن الوصول إلى الخدمات إلا من شبكة المكاتب ؛ <br></li><li style=";text-align:right;direction:rtl">  مع كل طلب نمر سراً ، وبدون ذلك يستحيل الوصول إلى QA API حتى من شبكة المكاتب ؛ <br></li><li style=";text-align:right;direction:rtl">  طرق العمل فقط مع مستخدمي الاختبار. <br></li></ul><br><br><h3 style=";text-align:right;direction:rtl">  remotemocks </h3><br>  للعمل مع الخلفية البعيدة لاختبارات واجهة برمجة التطبيقات ، قد نحتاج إلى تهوية.  من اجل ماذا؟  على سبيل المثال ، إذا بدأ اختبار واجهة برمجة التطبيقات (API) في بيئة الإنتاج في الوصول إلى قاعدة بيانات ، فنحن بحاجة إلى التأكد من أن البيانات الموجودة بها قد تم محوها من بيانات الاختبار.  بالإضافة إلى ذلك ، تساعد mocks في جعل استجابة الاختبار أكثر ملاءمة للاختبار. <br><br>  لدينا ثلاثة نصوص: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jo/66/dc/jo66dczs4sbrfuzaohyqy7izy6e.png" width="300"></div><br><br>  Badoo هو تطبيق متعدد اللغات ، لدينا مكون تعريب معقد يسمح لك بترجمة وتلقي الترجمات لموقع المستخدم الحالي بسرعة.  يعمل المترجمون لدينا باستمرار على تحسين الترجمات وإجراء اختبارات A / B باستخدام الرموز ، والبحث عن صيغ أكثر نجاحًا.  وأثناء إجراء الاختبار ، لا يمكننا معرفة النص الذي سيتم إرجاعه بواسطة الخادم - يمكن أن يتغير في أي وقت.  ولكن يمكننا استخدام RemoteMocks للتحقق مما إذا كان قد تم الوصول إلى مكون الترجمة بشكل صحيح. <br><br>  كيف يعمل RemoteMocks؟  يطلب الاختبار من الجهة الخلفية تهيئةها لجلستها ، وعند استلام جميع الطلبات اللاحقة ، يتحقق الجزء الخلفي من mocks للدورة الحالية.  إذا كان الأمر كذلك ، فإنه ببساطة تهيئة لهم باستخدام SoftMocks. <br><br>  إذا كنا نرغب في إنشاء نموذج وهمي بعيد ، فإننا نشير إلى الفئة أو الطريقة التي يجب استبدالها ومعها.  سيتم تنفيذ جميع طلبات الواجهة اللاحقة مع مراعاة هذا النموذج: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;remoteInterceptMethod( \Promo\HighLoadConference::class, <span class="hljs-string"><span class="hljs-string">'saveUserEmailToDb'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> );</code> </pre><br>  حسنًا ، دعنا الآن نجمع اختبار واجهة برمجة التطبيقات: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//       $app_startup = [ 'supported_promo_blocks' =&gt; [\Mobile\Proto\Enum\PromoBlockType::GENERIC_PROMO] ]; $Client = $this-&gt;getLoginedConnection(BmaFunctionalConfig::USER_TYPE_NEW, $app_startup); //  $Client-&gt;getQaApiClient()-&gt;addUserWorkEducation(['Badoo, ']); $Client-&gt;getQaApiClient()-&gt;forceSplitTest('HL18_promo'); $Client-&gt;getQaApiClient()-&gt;userCreatedChange('2016-09-01'); //     $this-&gt;remoteInterceptMethod(\Promo\HighLoadConference::class, 'saveUserEmail', true); //,   ,   $Resp = $Client-&gt;ServerGetPromoBlocks([]); $this-&gt;assertTrue($Resp-&gt;hasMessageType('CLIENT_NEXT_PROMO_BLOCKS')); $PromoBlock = $Resp-&gt;CLIENT_NEXT_PROMO_BLOCKS; … //   CTA, ,   ,   $Resp = $Client-&gt;ServerPromoAccepted($PromoBlock-&gt;getPromoId()); $this-&gt;assertTrue($Resp-&gt;hasMessageType('CLIENT_ACKNOWLEDGE_COMMAND'));</span></span></code> </pre><br><br>  بهذه الطريقة البسيطة ، يمكننا اختبار أي وظيفة تتعلق بالتطوير في الواجهة الخلفية وتتطلب تغييرات في بروتوكول الهاتف المحمول. <br><br><h3 style=";text-align:right;direction:rtl">  قواعد استخدام اختبار API </h3><br>  يبدو أن كل شيء على ما يرام ، لكننا واجهنا مشكلةً مرةً أخرى: تبين أن اختبارات واجهة برمجة التطبيقات (API) كانت ملائمة جدًا للتطوير وكان هناك إغراء لاستخدامها في كل مكان.  نتيجة لذلك ، بمجرد أن أدركنا أننا بدأنا في حل المشكلات بمساعدة اختبارات API التي لم تكن مخصصة لها. <br><br>  لماذا هذا سيء؟  لأن اختبارات API بطيئة للغاية.  يذهبون إلى الشبكة ، وينتقلون إلى الواجهة الخلفية ، التي تلتقط الجلسة ، وتذهب إلى قاعدة البيانات ومجموعة من الخدمات.  لذلك ، قمنا بتطوير مجموعة من القواعد لاستخدام اختبارات API: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  والغرض من اختبارات API هو التحقق من بروتوكول التفاعل بين العميل والخادم ، وكذلك التكامل الصحيح للرمز الجديد ؛ <br><br></li><li style=";text-align:right;direction:rtl">  يجوز تغطية العمليات المعقدة معهم ، على سبيل المثال ، سلاسل الإجراءات ؛ <br></li><li style=";text-align:right;direction:rtl">  لا يمكن استخدامها لاختبار التباين الصغير في استجابة الخادم - هذه هي مهمة اختبارات الوحدة ؛ <br></li><li style=";text-align:right;direction:rtl">  أثناء مراجعة التعليمات البرمجية ، نتحقق من الاختبارات. <br></li></ul><br><h2 style=";text-align:right;direction:rtl">  اختبارات واجهة المستخدم </h2><br>  نظرًا لأننا نفكر في هرم الأتمتة ، سأخبرك قليلاً عن اختبارات واجهة المستخدم. <br><br>  لا يكتب مطورو Backend على Badoo اختبارات واجهة المستخدم - لهذا لدينا فريق متخصص في قسم ضمان الجودة.  نحن نغطي الميزة باختبارات واجهة المستخدم عندما يتم طرحها بالفعل وتثبيتها ، لأننا نعتقد أنه من غير المعقول إنفاق الموارد على التشغيل التلقائي باهظ الثمن للميزة ، والتي ربما لن تتجاوز اختبار A / B. <br><br>  نستخدم Calabash لاختبارات السيارات المتنقلة ، والسيلينيوم للويب.  يتحدث عن منصتنا للأتمتة والاختبار. <br><br><h2 style=";text-align:right;direction:rtl">  اختبار المدى </h2><br>  لدينا الآن 100000 وحدة اختبار و 6000 اختبار دمج و 14000 اختبار API.  إذا حاولت تشغيلها في مؤشر ترابط واحد ، فحتى على أقوى آلة لدينا ، سيستغرق التشغيل الكامل للجميع: وحدات - 40 دقيقة ، تكامل - 90 دقيقة ، اختبارات API - عشر ساعات.  انها طويلة جدا. <br><br><h3 style=";text-align:right;direction:rtl">  الموازاة </h3><br>  <i>تحدثنا عن تجربتنا في موازاة اختبارات وحدة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">في هذه المقالة</a> .</i> <br><br>  الحل الأول ، الذي يبدو واضحًا ، هو إجراء الاختبارات في عدة مؤشرات ترابط.  ولكن ذهبنا أبعد من ذلك وقدمنا ​​سحابة للإطلاق الموازي لتكون قادرة على توسيع نطاق موارد الأجهزة.  المبسطة ، أعماله تبدو مثل هذا: <br><br><img src="https://habrastorage.org/webt/2q/s8/v7/2qs8v7eoyhw_-e3iv-igmt_xui0.png"><br><br>  المهمة الأكثر إثارة للاهتمام هنا هي توزيع الاختبارات بين الخيوط ، أي تقسيمها إلى أجزاء. <br><br>  يمكنك تقسيمها بالتساوي ، لكن كل الاختبارات مختلفة ، لذلك قد يكون هناك تحيز قوي في وقت تنفيذ سلسلة الرسائل: لقد وصلت جميع الخيوط بالفعل ، وتوقف أحدهم لمدة نصف ساعة ، حيث كان "محظوظًا" مع اختبارات بطيئة جدًا. <br><br>  يمكنك بدء العديد من مؤشرات الترابط وإطعامهم الاختبارات واحدة تلو الأخرى.  في هذه الحالة ، يكون العيب أقل وضوحًا: هناك تكاليف عامة لتهيئة البيئة ، والتي ، مع عدد كبير من الاختبارات وهذا النهج ، تبدأ في لعب دور مهم. <br><br>  ماذا فعلنا؟  بدأنا في جمع الإحصائيات في الوقت المستغرق لتشغيل كل اختبار ، ثم بدأنا في تكوين مجموعات بطريقة ، وفقًا للإحصاءات ، لن يعمل مؤشر ترابط واحد لمدة تزيد عن 30 ثانية.  في الوقت نفسه ، نقوم بتجميع الاختبارات بإحكام في مجموعات لجعلها أصغر. <br><br>  ومع ذلك ، فإن نهجنا لديه أيضا عيب.  يرتبط باختبارات واجهة برمجة التطبيقات: فهي بطيئة للغاية وتستهلك الكثير من الموارد ، مما يمنع تنفيذ الاختبارات السريعة. <br><br>  لذلك ، قمنا بتقسيم السحابة إلى قسمين: في الجزء الأول ، يتم إطلاق اختبارات سريعة فقط ، وفي الجزء الثاني ، يمكن إطلاق كل من السرعة والبطء.  مع هذا النهج ، لدينا دائمًا قطعة من السحابة يمكنها التعامل مع الاختبارات السريعة. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/6z/py/0n/6zpy0n5tqvqmqjsf7huyqiu5ogo.png" width="600"></div><br><br>  نتيجة لذلك ، بدأت اختبارات الوحدة في العمل في دقيقة واحدة ، واختبارات التكامل في خمس دقائق ، واختبارات واجهة برمجة التطبيقات في 15 دقيقة.  أي أن التشغيل الكامل بدلاً من 12 ساعة لا يستغرق أكثر من 22 دقيقة. <br><br><h3 style=";text-align:right;direction:rtl">  تشغيل اختبار تغطية الرمز </h3><br>  لدينا متراصة معقدة كبيرة ، وبطريقة جيدة ، نحتاج إلى إجراء جميع الاختبارات باستمرار ، لأن التغيير في مكان ما يمكن أن يكسر شيئًا في مكان آخر.  هذا هو واحد من العيوب الرئيسية للعمارة متجانسة. <br><br>  في مرحلة ما ، توصلنا إلى أنك لا تحتاج إلى تشغيل جميع الاختبارات في كل مرة - يمكنك إجراء عمليات تشغيل بناءً على تغطية الشفرة: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  خذ فرقنا فرع. <br></li><li style=";text-align:right;direction:rtl">  نخلق قائمة من الملفات المعدلة. <br></li><li style=";text-align:right;direction:rtl">  لكل ملف نحصل على قائمة الاختبارات ، <br>  التي تغطيها. <br></li><li style=";text-align:right;direction:rtl">  من هذه الاختبارات نقوم بإنشاء مجموعة وتشغيلها في سحابة اختبار. <br></li></ol><br>  من أين تحصل على التغطية؟  نقوم بجمع البيانات مرة واحدة يوميًا عندما تكون البنية التحتية لبيئة التطوير في وضع الخمول.  انخفض عدد الاختبارات التي يتم إجراؤها بشكل ملحوظ ، فقد زادت سرعة تلقي الملاحظات منها بشكل كبير.  الربح! <br><br>  كانت المكافأة الإضافية هي القدرة على إجراء اختبارات للبقع.  على الرغم من حقيقة أن Badoo لم يكن من الشركات الناشئة منذ فترة طويلة ، إلا أنه لا يزال بإمكاننا تنفيذ التغييرات في الإنتاج بسرعة ، وسرعة الإصلاح السريع ، وميزات النشر ، وتغيير التكوين.  وكقاعدة عامة ، تعد سرعة طرح التصحيحات مهمة جدًا بالنسبة لنا.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أعطى النهج الجديد زيادة كبيرة في سرعة ردود الفعل من الاختبارات ، لأننا الآن لا نحتاج إلى الانتظار لفترة طويلة لتشغيل كامل. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ولكن من دون عيوب ، في أي مكان. </font><font style="vertical-align: inherit;">سنقوم بإطلاق الواجهة الخلفية مرتين في اليوم ، وستكون التغطية ذات صلة بالإصدار الأول فقط ، حتى الإنشاء الأول ، وبعد ذلك تبدأ في التراجع عن طريق إنشاء واحد. </font><font style="vertical-align: inherit;">لذلك ، بالنسبة للبنيات ، نقوم بتشغيل مجموعة اختبار كاملة. </font><font style="vertical-align: inherit;">بالنسبة لنا ، يعد هذا ضمانًا بأن تغطية الشفرة ليست بعيدة وأن يتم الانتهاء من جميع الاختبارات اللازمة. </font><font style="vertical-align: inherit;">أسوأ ما يمكن أن يحدث هو أننا سنخضع لبعض الاختبارات الساقطة في مرحلة الإنشاء ، وليس في المراحل السابقة. </font><font style="vertical-align: inherit;">ولكن هذا يحدث نادرا جدا.</font></font><br><br>         API-,      code coverage.         ,   ,    .       - ,  API-         . <br><br><h2 style=";text-align:right;direction:rtl">  استنتاج </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">       ,       .    - , , -    . <br></li><li style=";text-align:right;direction:rtl">   ≠ .    code review    ,   . <br></li><li style=";text-align:right;direction:rtl">       , ,     .         . <br></li><li style=";text-align:right;direction:rtl">   .              . <br></li><li style=";text-align:right;direction:rtl"> ,    !     ,         . <br></li></ul><br><br><blockquote style=";text-align:right;direction:rtl"> <b> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Badoo PHP Meetup 16 </a> .         PHP-.    ,   .   ! <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  12:00,  —   YouTube-</a></b> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar443768/">https://habr.com/ru/post/ar443768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar443754/index.html">حول مدى ملاءمة السيلينيوم WebDriverWait</a></li>
<li><a href="../ar443756/index.html">فئة التصميم: ما هو جيد؟</a></li>
<li><a href="../ar443758/index.html">التعرف السريع على رسومات الشعار المبتكرة: كيفية تكوين صداقات R و C ++ والشبكات العصبية</a></li>
<li><a href="../ar443764/index.html">ما يدخن المصمم: سلاح ناري غير عادي</a></li>
<li><a href="../ar443766/index.html">محاولة برمجة C ++ 20 للعقد الآن</a></li>
<li><a href="../ar443770/index.html">تصميم يحركه المجال: كائنات القيمة وكيان إطار عمليا في الممارسة</a></li>
<li><a href="../ar443772/index.html">الآثار: IBM ThinkPad T40 ، أول اتصال لاسلكي</a></li>
<li><a href="../ar443774/index.html">كيف تتدخل البيولوجيا العصبية في الانتخابات الرئاسية الأمريكية</a></li>
<li><a href="../ar443776/index.html">الصين تقدم نظام تجريبي للتعرف على الوجوه عند الدفع مقابل المترو</a></li>
<li><a href="../ar443780/index.html">مشروع MCDM. الجزء 1. مفهوم</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>