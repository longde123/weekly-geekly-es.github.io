<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ›… â¤´ï¸ ğŸ§˜ğŸ¿ Rumah pintar. Otak ğŸ“ â˜”ï¸ ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika semua kabel diletakkan, sakelar dipasang, panel listrik dibuat (semua ini dijelaskan di bagian pertama ), maka Anda dapat melanjutkan ke hal ya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rumah pintar. Otak</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/389053/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika semua kabel diletakkan, sakelar dipasang, panel listrik dibuat (semua ini dijelaskan di bagian </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pertama</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), maka Anda dapat melanjutkan ke hal yang paling menarik - memprogram pengontrol. </font><font style="vertical-align: inherit;">Karena saya tidak menggunakan pengontrol khusus untuk rumah pintar, tetapi pengontrol dari otomasi industri, saya harus memprogram dari awal - ada input, ada output, semuanya perlu diprogram - apa yang harus dilakukan dengan satu sentuhan tombol (beralih tanpa memperbaiki), bagaimana memprogram dimmer , skrip, dll.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/files/d51/9b1/ec6/d519b1ec687340b4b4c3fe277d656193.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi hal pertama yang pertama. </font><font style="vertical-align: inherit;">Awalnya, arsitektur rumah pintar saya termasuk komponen berikut:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengontrol industri Aries dari PLK110-32 (otak utama)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modul output analog MU110-6U (digunakan untuk mengontrol dimmer)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modul untuk memasukkan sinyal analog MV110-8A (ditambahkan kemudian untuk mengambil bacaan dari sensor).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua ini terhubung bersama melalui RS-485 dan tusuk Modbus RTU. </font><font style="vertical-align: inherit;">Pengontrol utama terhubung ke Ethernet untuk komunikasi dengan dunia luar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengontrol dari telepon, saya awalnya menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iridium Mobile</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang diberikan oleh pabrik kepada saya (ya, menggunakan posisi resmi saya untuk keperluan pribadi!). </font><font style="vertical-align: inherit;">Kemudian saya menggantinya dengan layanan web berdasarkan Node JS. </font><font style="vertical-align: inherit;">Kemudian juga ditambahkan bagian nirkabel berdasarkan z-wave. </font><font style="vertical-align: inherit;">Saya berencana untuk menulis tentang semua ini secara terpisah, tetapi untuk sekarang kita kembali ke domba kita.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pemrograman pengontrol dilakukan di lingkungan CoDeSys, yang mendukung 5 bahasa khusus, yang saya kuasai dua - FBD (Function Block Language) dan ST (bahasa mirip-Pascal). Sebenarnya, pada awalnya saya dianggap hanya puas dengan FBD, karena pemrograman dalam bahasa ini terlihat seperti bagan di editor. </font></font><br>
<br>
<img src="https://habrastorage.org/files/051/39e/537/05139e537062440e80517b51feea0f37.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi subrutin FBD (atau lebih tepatnya blok fungsi) memproses sakelar di koridor terlihat seperti ini. Selain menyalakan dan mematikan lampu di koridor, sakelar ini digunakan untuk mematikan lampu di seluruh apartemen. Satu tekan mengubah lampu di koridor, dan tekan lama (1 detik) mengaktifkan perintah untuk mematikan semua lampu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika semakin banyak fungsi dan kemampuan ditambahkan, saya sampai pada kesimpulan bahwa bahasa diagram fungsional sama sekali tidak nyaman - ternyata kode rumit, pemrograman lambat, dan debugging sangat merepotkan. Oleh karena itu, saya secara bertahap beralih ke bahasa ST dan saya tidak lagi beralih ke bahasa FBD. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai perbandingan, terlihat seperti ini adalah bagian dari blok fungsi dimmer dalam bahasa ST (setuju, ini adalah masalah yang sama sekali berbeda!):</font></font><br>
<br>
<img src="https://habrastorage.org/files/e72/8a1/3bc/e728a13bce1a4d19b3d38dd2399cd051.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena kita berbicara tentang dimmer, maka kita perlu membicarakannya secara khusus. Ternyata, tidak mudah menemukan dimmer (setrika) yang cocok untuk rumah pintar. Saya tidak mempertimbangkan semua jenis opsi outbred, karena semua fungsi dasar harus diimplementasikan pada teknologi kawat - saya menulis tentang ini sebelumnya. Tag harga untuk dimmer yang saya temui tidak membuat saya senang. Plus, itu perlu untuk memastikan kompatibilitas dengan rumah pintar saya. Awalnya saya memilih INSYTE LDD-400D, dikendalikan oleh ModBus, yang memungkinkan saya untuk menghubungkannya langsung ke controller tanpa modul tambahan, tetapi teman-teman yang menggunakannya dalam proyek mereka entah bagaimana tidak berbicara dengan baik tentang hal itu, dan sebagai hasilnya, saya memutuskan pertanyaan dengan dimmer jadi - menempatkan solid state relay.</font></font><br>
<br>
<img src="https://habrastorage.org/files/5a4/a34/c7d/5a4a34c7d252441b875ed92d7c646a67.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Relai dikendalikan (melalui modul output analog) dengan sinyal 0-10V dan output masing-masing 10-220V. Harap dicatat bahwa tegangan minimum pada output relai kondisi-padat bukan 0, tetapi 10V - pada tegangan ini, spiral lampu pijar bersinar dengan jelas. Masalah ini diselesaikan sebagai berikut: di samping relai keadaan-padat, sirkit juga berisi relai sedang (mekanis) biasa, dan pada tingkat program, bila perlu untuk benar-benar mematikan lampu, pengontrol mematikan relai perantara dan memutus sirkuit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesulitan kedua dengan organisasi meredupkan cahaya adalah bagaimana membuat antarmuka yang nyaman, dengan mempertimbangkan fakta bahwa saya menggunakan saklar konvensional tanpa memperbaiki sebagai kontrol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versi pertama antarmuka terlihat seperti ini (sekarang saya tidak ingat persis):</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tekan singkat - menyalakan atau mematikan lampu (lampu menyala pada tingkat kecerahan terakhir)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tekan lama saat lampu menyala - penurunan kecerahan secara bertahap, lalu melewati peningkatan nol</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tekan lama saat lampu mati - kenaikan halus dari nol</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ketuk ganda menyalakan lampu dengan kecerahan penuh.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya hidup dengan opsi ini selama beberapa bulan, tetapi kemudian saya sampai pada kesimpulan bahwa itu masih sangat tidak nyaman dan paling sering hanya 3 mode yang digunakan - lampu menyala, lampu mati atau lampu dihidupkan dengan kemarahan minimum. </font><font style="vertical-align: inherit;">Oleh karena itu, saya menerapkan opsi diskrit sederhana (yang masih sejauh ini):</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tekan singkat - nyalakan / matikan lampu (menyala dengan kecerahan penuh)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tekan lama - menyalakan lampu dengan kecerahan 25% dan beralih ke mode peredup;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setiap pers selanjutnya bergerak ke langkah berikutnya + 25%. </font><font style="vertical-align: inherit;">Keluar dari mode peredup - oleh batas waktu.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang saya katakan di posting sebelumnya, kontrol tombol tunggal tanpa memperbaiki masih bukan solusi terbaik. </font><font style="vertical-align: inherit;">Selain contoh dengan redup yang baru saja saya kutip, saya juga menerapkan skenario kompleks untuk menyalakan lampu di ruang tamu. </font><font style="vertical-align: inherit;">Kami lebih suka untuk tidak menggunakan lampu overhead di ruang tamu dan segera menyalakan lampu meja dan lampu di lemari. </font><font style="vertical-align: inherit;">Saya mengotomatiskan proses ini dan sekarang kontrol lampu di ruang tamu terlihat seperti ini:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satu klik (jika lampu mati) - menyalakan lampu dan lampu latar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satu klik (jika lampu menyala) - menyalakan atau mematikan lampu atas</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satu tekan segera setelah yang kedua (ketika lampu overhead dimatikan) - memadamkan lampu meja</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tekan lama - mematikan semua lampu di ruangan</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dua poin pertama dari skenario ini sangat cocok dari sudut pandang model perilaku. Poin terakhir dibuat dengan analogi dengan koridor. Paragraf ketiga sangat kontroversial dan tidak digunakan. Masalahnya adalah bahwa keluarga itu menggerutu, tetapi naskah ini adalah lorong, tetapi tidak ada satu tamu pun yang bisa mengatasi cahaya. Karena itu, untuk skrip Anda memerlukan panel sentuh atau tombol multi-fungsi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sistem CoDeSys memiliki kemampuan untuk membuat panel visualisasi dan kontrol. PLC110 tidak mendukung antarmuka web, oleh karena itu visualisasi hanya berfungsi di kompleks CoDeSys itu sendiri.</font></font><br>
<br>
<img src="https://habrastorage.org/files/619/9d0/00e/6199d000edcb47bd95137c5e2285ef6a.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginilah tampilan panel kontrol teknis rumah pintar saya. </font><font style="vertical-align: inherit;">Teknis, karena dalam kehidupan sehari-hari tidak ada yang menggunakannya. </font><font style="vertical-align: inherit;">Dengan satu pengecualian kecil, panel ini berfungsi sebagai antarmuka jarak jauh untuk mengelola rumah pintar. </font><font style="vertical-align: inherit;">Jika saya perlu melakukan sesuatu dari jarak jauh, maka saya pergi melalui TeamViewer ke server rumah saya dan menggunakan panel ini. </font><font style="vertical-align: inherit;">Kebutuhan seperti itu muncul sangat jarang, jadi saya bahkan tidak mengatur akses jarak jauh untuk layanan web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesimpulannya, pro dan kontra. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pro:</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keandalan - solusinya telah membuktikan dirinya dengan sangat baik (namun, itu dibangun di atas basis komponen, yang digunakan untuk otomasi industri). </font><font style="vertical-align: inherit;">Selama ini tidak ada kegagalan tunggal (!!!). </font><font style="vertical-align: inherit;">Bahkan setelah daya melonjak, sistem mulai tanpa masalah.</font></font></li>
<li>         (,       ,               ).</li>
</ul><br>
<b>      :</b><br>
<ul>
<li>         </li>
<li>      Modbus TCP â€”                     (     )</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang saya katakan di artikel pertama, sekarang saya akan melihat lebih dekat alternatif, tetapi jika seseorang tiba-tiba ingin mempelajari solusi ini, saya memposting kode sumber yang dibuat di CoDeSys di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">(hanya harap direndahkan dengan kualitas kode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bagian berikut - kontrol telepon dan solusi nirkabel.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id389053/">https://habr.com/ru/post/id389053/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id389041/index.html">Everykey: kunci universal untuk gadget Anda</a></li>
<li><a href="../id389043/index.html">Media Penyimpanan Evolusi Bagian 4: Solid State Drive</a></li>
<li><a href="../id389045/index.html">Elon Musk tidak takut dengan mobil listrik Apple: persaingan akan bermanfaat bagi industri</a></li>
<li><a href="../id389049/index.html">Konfigurasikan kontrol IR pada pendingin udara dari gadget atau "Siapkan kereta di musim panas"</a></li>
<li><a href="../id389051/index.html">CNET Smart Home: Gadget Testing Ground</a></li>
<li><a href="../id389057/index.html">CES 2016: Pengumuman LG dan Samsung untuk rumah pintar</a></li>
<li><a href="../id389063/index.html">Bagaimana mobil persegi tahun 80-an dirampingkan pada tahun 90-an</a></li>
<li><a href="../id389065/index.html">Penyelidikan fajar mengirim gambar rinci kawah Ceres</a></li>
<li><a href="../id389067/index.html">Peralatan Nirkabel NooLite dan Rumah Pintar (Bagian 1). Arduino</a></li>
<li><a href="../id389069/index.html">Remix OS, OS multi-jendela berbasis Android, sekarang tersedia untuk PC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>