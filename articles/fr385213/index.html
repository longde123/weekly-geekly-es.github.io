<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍥 💜 👩🏿‍🍳 Éviter l'usure de l'EEPROM 👩‍❤️‍💋‍👩 👨🏾‍🎤 🛠️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Résumé: Si vous mettez à jour périodiquement une valeur dans l'EEPROM toutes les quelques minutes (ou plusieurs secondes), vous pouvez rencontrer le p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Éviter l'usure de l'EEPROM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/385213/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Résumé: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous mettez à jour périodiquement une valeur dans l'EEPROM toutes les quelques minutes (ou plusieurs secondes), vous pouvez rencontrer le problème de l'usure des cellules EEPROM. </font><font style="vertical-align: inherit;">Pour éviter cela, vous devez réduire la fréquence des entrées dans la cellule. </font><font style="vertical-align: inherit;">Pour certains types d'EEPROM, même des vitesses d'enregistrement plus d'une fois par heure peuvent poser problème.</font></font></i><br>
<br>
<a name="habracut"></a><br>
<br>
<h2><font color="#cc0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque vous enregistrez des données, le temps passe vite</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'EEPROM est universellement utilisée pour enregistrer les paramètres et les journaux d'opérations dans les systèmes embarqués. Par exemple, vous pouvez souhaiter que la fonction de boîte noire enregistre les dernières données au moment d'un accident ou d'une panne de courant. J'ai vu des spécifications nécessitant l'enregistrement de ces données toutes les quelques secondes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais le problème est que l'EEPROM a une ressource de nombre record d'enregistrement. Après 100 000 ou un million d'enregistrements (selon la puce spécifique), certains de vos systèmes commenceront à rencontrer des problèmes de défaillance d'EEPROM. (Regardez dans la fiche technique pour un nombre spécifique. Si vous voulez libérer un grand nombre d'appareils, le «pire des cas» est probablement plus important que le «typique»). Un million d'enregistrements semble être un grand nombre, mais en fait, cela se terminera très rapidement. Regardons un exemple, en supposant que nous devons stocker la tension mesurée dans une cellule toutes les 15 secondes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 000 000 d'enregistrements avec un enregistrement en 15 secondes donnent des enregistrements par minute: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 000 000 / (4 * 60 minutes / heure * 24 heures / jour) = 173,6 jours. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes, votre EEPROM manquera de réserves d'un million d'enregistrements en moins de 6 mois.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ci-dessous est un graphique montrant le temps de porter (en années) basé sur la période de mise à jour d'une cellule EEPROM spécifique. </font><font style="vertical-align: inherit;">La limite pour un produit avec une espérance de vie de 10 ans est une mise à jour toutes les 5 minutes 15 secondes pour une puce avec une ressource de 1 million d'enregistrements. </font><font style="vertical-align: inherit;">Pour une EEPROM avec une ressource 100K, vous pouvez mettre à jour une cellule spécifique pas plus d'une fois toutes les 52 minutes. </font><font style="vertical-align: inherit;">Cela signifie que vous ne devez pas espérer mettre à jour la cellule toutes les quelques secondes si vous voulez que votre produit fonctionne pendant des années, pas des mois. </font><font style="vertical-align: inherit;">Les échelles ci-dessus linéairement, cependant, dans cet appareil, il existe également des facteurs secondaires, tels que la température et le mode d'accès.</font></font><br>
<br>
<img src="https://habrastorage.org/files/147/941/974/147941974f174f3e83e91e0ef92f0396.gif"><br>
<br>
<h2><font color="#cc0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diminuer la fréquence </font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La façon la plus simple de résoudre le problème est d'écrire simplement les données moins souvent. </font><font style="vertical-align: inherit;">Dans certains cas, la configuration système requise le permet. </font><font style="vertical-align: inherit;">Ou vous ne pouvez enregistrer qu'avec des changements majeurs. </font><font style="vertical-align: inherit;">Cependant, avec une entrée liée à un événement, soyez conscient d'un scénario possible dans lequel la valeur fluctuera constamment et déclenchera un flux d'événements qui entraînera l'usure de l'EEPROM. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Ce sera bien si vous pouvez déterminer combien de fois une EEPROM a été enregistrée. Mais cela nécessitera un compteur qui sera stocké dans l'EEPROM ... et le problème se transformera en un problème d'usure du compteur.)</font></font><br>
<br>
<h2><font color="#cc0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interruption de la réduction de la nutrition </font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certains processeurs ont une interruption de faible puissance qui peut être utilisée pour écrire la dernière valeur dans l'EEPROM, tandis que le système s'arrête en raison d'une perte de puissance. </font><font style="vertical-align: inherit;">En général, vous stockez la valeur d'intérêt dans la RAM et l'enregistrez dans l'EEPROM uniquement lorsque l'alimentation est coupée. </font><font style="vertical-align: inherit;">Ou peut-être écrivez-vous de temps en temps l'EEPROM et écrivez-en une autre dans le cadre de la procédure d'arrêt pour vous assurer que les données les plus récentes sont écrites. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de s'assurer qu'il existe un grand condensateur de puissance qui maintiendra une tension suffisante pour programmer l'EEPROM pendant une durée suffisamment longue. </font><font style="vertical-align: inherit;">Cela peut fonctionner si vous devez écrire une ou deux valeurs, mais pas un grand bloc de données. </font><font style="vertical-align: inherit;">Attention, il y a beaucoup de place pour l'erreur!</font></font><br>
<br>
<h2><font color="#cc0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tampon en anneau</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La solution classique au problème d'usure consiste à utiliser le tampon d'anneau FIFO contenant N dernières entrées de valeur. Vous devez également enregistrer un pointeur à la fin du tampon dans l'EEPROM. Cela réduit l'usure de l'EEPROM d'une valeur proportionnelle au nombre de copies dans ce tampon. Par exemple, si un tampon passe par 10 adresses différentes pour enregistrer une seule valeur, chaque cellule particulière est modifiée 10 fois moins et la ressource d'écriture augmente 10 fois. Vous aurez également besoin d'un compteur ou d'un horodatage distinct pour chacune des 10 copies, afin de pouvoir déterminer laquelle est la dernière au moment de l'arrêt. En d'autres termes, vous avez besoin de deux tampons, un pour la valeur et un pour le compteur. (Si vous enregistrez le compteur à la même adresse, cela entraînera sa détérioration, car il devrait augmenter à chaque cycle d'enregistrement.) L'inconvénient de cette méthode estque vous avez besoin de 10 fois plus d'espace pour obtenir une durée de vie 10 fois plus longue. Vous pouvez être intelligent et emballer le compteur avec les données. Si vous écrivez une grande quantité de données, l'ajout de quelques octets au compteur n'est pas un gros problème. Mais dans tous les cas, vous aurez besoin de beaucoup d'EEPROM.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atmel a préparé une note contenant tous les détails sanglants: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVR-101: Stockage EEPROM haute endurance: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.atmel.com/images/doc2526.pdf</font></font></a><br>
<br>
<h2><font color="#cc0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un cas particulier pour le compteur du nombre d'enregistrements </font></font><br>
</font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parfois, vous devez enregistrer le compteur, pas les valeurs elles-mêmes. Par exemple, vous souhaiterez peut-être connaître le nombre de fois que l'appareil a été allumé ou la durée de fonctionnement de votre appareil. Le pire des compteurs est qu'ils changent constamment le bit le moins significatif, usant plus rapidement les cellules EEPROM inférieures. Mais ici, il est possible d'appliquer quelques astuces. Il existe plusieurs idées intelligentes dans l'applet de Microchip, telles que l'utilisation d'un code Gray de sorte qu'un seul bit d'un compteur multi-octets change lorsque la valeur du compteur change. Ils recommandent également l'utilisation de codes correctifs pour compenser l'usure. (Je ne sais pas dans quelle mesure l'utilisation de tels codes sera efficace, car cela dépendra de l'indépendance des erreurs dans les bits des octets du compteur, utilisez à vos propres risques, environ Auteur). Voir l'annexe:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ww1.microchip.com/downloads/en/AppNotes/01449A.pdf</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Remarque: pour ceux qui souhaitent en savoir plus, Microchip a préparé un document contenant des informations détaillées sur la disposition des cellules EEPROM et leur usure avec des diagrammes: </font></font><br>
<a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ftp.microchip.com/tools /memory/total50/tutorial.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Faites-moi savoir si vous avez des idées intéressantes sur la façon de traiter l'usure des EEPROM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Source: Phil Koopman, Better Embedded System SW </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betterembsw.blogspot.ru/2015/07/avoiding-eeprom-wearout.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note du traducteur: ces dernières années, les puces EEPROM sont apparues avec une organisation d'effacement des pages (similaire aux puces FLASH), où il est possible d'adresser logiquement les cellules (lire, écrire et effacer) octet par bye, mais la puce efface la page entière de manière invisible pour l'utilisateur et la remplace par de nouvelles données. </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">Après avoir effacé les cellules à l'adresse 0, nous avons réellement effacé et réécrit les cellules avec les adresses 0 ... 255 (avec une taille de page de 256 octets), donc une astuce de tampon ne sera pas utile dans ce cas. </font><font style="vertical-align: inherit;">Lorsque la ressource d'enregistrement d'un tel microcircuit est épuisée, pas une cellule ne tombe en panne, mais la page entière. </font><font style="vertical-align: inherit;">Dans les fiches techniques de ces microcircuits, la ressource d'enregistrement est indiquée </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour la page</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et non pour une cellule spécifique. </font><font style="vertical-align: inherit;">Voir, par exemple, la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fiche technique</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur 25LC1024 de Microchip.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr385213/">https://habr.com/ru/post/fr385213/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr385199/index.html">Une liste de gènes a été obtenue, dont l'élimination entraîne une augmentation significative de la durée de vie des levures</a></li>
<li><a href="../fr385201/index.html">Les meilleures photos astronomiques de 2015</a></li>
<li><a href="../fr385205/index.html">Le Royaume-Uni et l'Espagne scannés par lidar</a></li>
<li><a href="../fr385207/index.html">Lockheed Martin lance la production de lasers de combat</a></li>
<li><a href="../fr385209/index.html">La technologie des onduleurs permettra une utilisation efficace de l'énergie de freinage des trains du métro de Londres</a></li>
<li><a href="../fr385215/index.html">Des systèmes de batteries Tesla seront installés dans des immeubles de bureaux en Californie</a></li>
<li><a href="../fr385217/index.html">Montre stupide</a></li>
<li><a href="../fr385219/index.html">Mozilla: Ошибка sec_error_unknown_issuer (мысли вслух)</a></li>
<li><a href="../fr385221/index.html">À quoi ressemble un micro-réseau métallique ultra-léger?</a></li>
<li><a href="../fr385225/index.html">Android 6.0 портировали на Nexus 10, Nexus 7 (2012)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>