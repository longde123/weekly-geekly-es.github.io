<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé© ‚úçüèΩ üå∑ Actualizar la biblioteca y el enemigo de SPPermission üë®üèø‚ÄçüöÄ ‚òÄÔ∏è üë©üèø‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- " Alg√∫n tipo de biblioteca, alguien actualizado ... ¬øQu√© tuvo que ver Haiter con eso?" ¬øPor qu√© yo, un excelente desarrollador, necesito dedicar tie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Actualizar la biblioteca y el enemigo de SPPermission</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430886/"> - " <i>Alg√∫n tipo de biblioteca, alguien actualizado ... ¬øQu√© tuvo que ver Haiter con eso?"</i>  <i>¬øPor qu√© yo, un excelente desarrollador, necesito dedicar tiempo a este art√≠culo?</i>  " <br><br>  Puedes pensar, mi querido amigo.  No hay necesidad de perder el tiempo.  Esta es solo una lectura vespertina con una parte de risas divertidas.  El texto tratar√° sobre la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RequestPermission</a> y su misterioso autor. <br><a name="habracut"></a><br>  Comencemos con lo principal: el cambio de marca.  La biblioteca ha cambiado de nombre a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SPPermission</a> .  No s√© si este es el caso o no, pero despu√©s de cambiar el nombre, ha estado colgando en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">parte superior de GitHub</a> como la segunda semana.  S√≠, existe una parte superior, es condicional, pero todav√≠a se pueden encontrar proyectos interesantes all√≠.  El autor (una persona misteriosa), actualiz√≥ los banners en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la p√°gina del proyecto</a> , una descripci√≥n, una gran secci√≥n del <i>donat</i> insertada.  ¬°Qu√© codicioso! <br><br>  Pero pasemos al proyecto en s√≠: <br><br><img src="https://habrastorage.org/webt/g8/b4/pb/g8b4pbkznhzv5e-fhz_rifcodpo.gif" width="600"><br><br>  Como puede ver en el enorme tama√±o de los gifs <i>(4 megabytes no ortodoxos)</i> , el proyecto solicita una lista de permisos, hay iconos, texto.  Incluso puedes decir que se ve bien. <br><br><h3>  Instalar </h3><br>  Simplemente puede arrastrar el c√≥digo fuente a su proyecto, esta es una carpeta de archivos estructurados.  Y no puede <s>sufrir tonter√≠as</s> para construir la biblioteca usando <i>SocoaPods</i> .  No contar√© los pros y los contras, no sobre este art√≠culo.  Agregue la l√≠nea al archivo <i>pod</i> : <br><br><pre><code class="ruby hljs">pod <span class="hljs-string"><span class="hljs-string">'SPPermission'</span></span></code> </pre> <br>  y actualizar las dependencias.  Lo m√°s probable es que este sea el paso m√°s dif√≠cil de todos) <br><br><h3>  Uso </h3><br>  Si acaba de arrastrar los archivos al proyecto, el m√≥dulo <i>SPPermission</i> ya <i>est√°</i> disponible.  Si <s>no sufri√≥ tonter√≠as,</s> us√≥ <i>ocoaPods</i> , entonces debe importar la biblioteca al controlador: <br><br><pre> <code class="plaintext hljs">import SPPermission</code> </pre><br>  Ahora en la funci√≥n <i>viewDidAppear</i> , llamamos a la siguiente construcci√≥n: <br><br><pre> <code class="plaintext hljs">override func viewDidAppear(_ animated: Bool) { super.viewDidAppear(animated) SPPermission.Dialog.request( with: [.camera, .calendar, .notification], on: self ) }</code> </pre><br>  Pasamos la lista de permisos y el controlador en el que presentaremos el cuadro de di√°logo.  Queda por comenzar el proyecto. <br><br><h3>  Personalizaci√≥n </h3><br>  Si usted, querido amigo, ha trabajado con tablas o colecciones, las palabras <i>Delegado</i> y <i>DataSource</i> no le asustar√°n.  Y si est√°s un poco obsesionado con los patrones, incluso gritar√°s: <br><br>  - " <i>¬°Guau!</i>  <i>Enfoque basado en protocolo!</i>  " <br><br>  Ya ves!  Ves?  Pero dije que no ser√≠a divertido.  Pero una vez que le√≠ esta l√≠nea, sigamos adelante. <br><br>  Comencemos con el protocolo <i>SPPermissionDialogDataSource</i> , √©l ser√° responsable de personalizar el cuadro de di√°logo y permitir√° integrar de manera m√°s leal la biblioteca en el proyecto.  Veamos los par√°metros: <br><br><pre> <code class="plaintext hljs">@objc public protocol SPPermissionDialogDataSource: class { @objc optional var dialogTitle: String { get } @objc optional var dialogSubtitle: String { get } @objc optional var dialogComment: String { get } @objc optional var allowTitle: String { get } @objc optional var allowedTitle: String { get } @objc optional var bottomComment: String { get } @objc optional var showCloseButton: Bool { get } @objc optional func name(for permission: SPPermissionType) -&gt; String? @objc optional func description(for permission: SPPermissionType) -&gt; String? @objc optional func image(for permission: SPPermissionType) -&gt; UIImage? }</code> </pre><br>  Para ser honesto, no veo ninguna raz√≥n para pensar en todos, ya que sus nombres est√°n hablando.  Analicemos <i>un</i> par de ambiguos: <i>bottomComment</i> y <i>showCloseButton</i> . <br><br>  El primer par√°metro es responsable del comentario debajo del cuadro de di√°logo, por ejemplo, puede poner el mensaje " <i>Deslizar para cerrar</i> ": <br><br><img src="https://habrastorage.org/webt/o3/ju/ol/o3juolykpylxcrkpb1jumil_t5s.jpeg"><br><br>  El segundo par√°metro, <i>showCloseButton</i> , es responsable del bot√≥n de cierre en la esquina superior derecha de la pantalla.  Tambi√©n tengo una foto con un ejemplo: <br><br><img src="https://habrastorage.org/webt/dx/8z/va/dx8zva68cc4b6zwllgs5yk95ps0.jpeg"><br><br>  Algunas funciones permiten que se devuelva <i>nil</i> , esto es necesario si no necesita personalizar todos los encabezados / iconos o texto.  Es suficiente devolver <i>nil</i> para dejar el valor predeterminado: <br><br><pre> <code class="plaintext hljs">func description(for permission: SPPermissionType) -&gt; String? { if permission == .calendar { return "" } lse { return nil } }</code> </pre><br>  Queda por pasar el objeto <i>DataSource</i> a la estructura principal: <br><br><pre> <code class="plaintext hljs">SPPermission.Dialog.request( with: [.camera, .calendar, .microphone, .notification], on: self, dataSource: self )</code> </pre><br><h3>  Delegado </h3><br>  Le permite rastrear algunos eventos.  Veamos el protocolo: <br><br><pre> <code class="plaintext hljs">@objc public protocol SPPermissionDialogDelegate: class { @objc optional func didHide() @objc optional func didAllow(permission: SPPermissionType) }</code> </pre><br>  Hmm, no mucho ... Y, ¬øqu√© m√°s se necesita?) No creo que valga la pena explicar a qu√© eventos se llamar√°n las funciones.  Los nombres est√°n hablando.  Le llamo la atenci√≥n, el delegado no debe olvidar indicar: <br><br><pre> <code class="plaintext hljs">SPPermission.Dialog.request( with: [.camera, .calendar, .microphone, .notification], on: self, delegate: self dataSource: self )</code> </pre><br><h3>  Permisos </h3><br><img src="https://habrastorage.org/webt/og/ow/qt/ogowqtraw3cz4vrwpjjupu4vmuo.jpeg"><br><br>  La lista se repondr√° si hay sugerencias o cr√≠ticas de la biblioteca, vale la pena crear un nuevo n√∫mero <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠.</a> <br><br><h3>  Bollos </h3><br>  Vale la pena prestar atenci√≥n a una funci√≥n √∫til: <br><br><pre> <code class="plaintext hljs">func isAllow(_ permission: SPPermissionType) -&gt; Bool</code> </pre><br>  Le informar√° si el usuario ha dado permiso.  Para aumentar la lealtad, se recomienda solicitar permisos no en un paquete, sino antes de su uso.  ¬°Y no m√°s de 3 ex!  Aunque me resulta dif√≠cil encontrar una situaci√≥n en la que necesite m√°s) Use esto: <br><br><pre> <code class="plaintext hljs">let isAvailableCamera = SPPermission.isAllow(.amera)</code> </pre><br><h3>  Por qu√© actualizar </h3><br>  La versi√≥n anterior se ve√≠a as√≠, y tal vez hace un a√±o no era nada: <br><br><img src="https://habrastorage.org/files/270/1d0/037/2701d00370d74987ae03348cc59d24b0.gif" width="600"><br><br>  En realidad, no lo actualic√© durante un a√±o (bueno, no finjas que no entendiste que era el autor de la biblioteca), pero m√°s recientemente, recib√≠ una carta ... aunque hablemos de esta historia un poco m√°s tarde.  ¬°Estamos haciendo negocios serios aqu√≠! <br><br><h3>  Arquitectura </h3><br>  Hace aproximadamente un a√±o, escrib√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un art√≠culo</a> en el que derrot√© directamente a los amantes del uso injustificado de la arquitectura.  Pero solo pens√© que s√≠, y el mensaje principal no fue escuchado.  Mi deseo de simplificar este a√±o no se ha detenido.  Cuando conceb√≠ el redise√±o, me di cuenta de que el proyecto tendr√≠a que reescribirse en su totalidad.  Este es un tipo de plataforma de perforaci√≥n con la capacidad de escuchar la radio, cortar vegetales y un calentador de media velocidad.  ¬°Lo vi un a√±o despu√©s!  Ahora me parece est√∫pido escribir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este art√≠culo</a> , teniendo un ejemplo tan complejo.  Probablemente en otro a√±o, lo har√© a√∫n m√°s f√°cil.  A ver) <br><br><h3>  Entonces, ¬øcu√°l es la historia? </h3><br>  El tutorial sobsna ha terminado y pasamos a charlar.  Hace unas semanas recib√≠ una carta pidi√©ndome que explicara c√≥mo funciona la biblioteca.  Era una pregunta extra√±a, y desde que abandon√© la biblioteca, simplemente respond√≠ con una plantilla: <br><br>  - ‚Äú <i>Querido amigo, ahora no soporto la biblioteca, no tengo tiempo libre.</i>  <i>Todo lo mejor</i> " <br><br>  Lo escrib√≠ bien, solo en Zabugorsk.  Y lo olvid√©.  Al entrar en la amapola, ¬°vi alrededor de una docena!  mensajes en la carpeta de spam.  Bueno, todo, obviamente, alg√∫n portal ha divergido, ahora, ¬øc√≥mo me doy de baja de su correo?  Y nnnet ... El mismo tipo me escribi√≥, solo que esta vez con ira.  En cartas aprend√≠ que no soy el autor de la biblioteca (por lo tanto, no puedo dec√≠rtelo), descubr√≠ que las personas como yo son las personas m√°s terribles (y tenemos que prohibir el registro en GitHub), descubr√≠ que quiero mucho dinero para mi in√∫til trabajo.  Dinero?  En la p√°gina anterior ni siquiera hab√≠a un formulario de dona.  Pero entend√≠ el punto, el hombre estaba enojado. <br><br>  Decid√≠ ayudar, pero no por amabilidad: estaba incre√≠blemente interesado en lo incre√≠ble que necesitaba ser personalizado, lo que provoc√≥ una gran ola de ira.  Result√≥ que estaba buscando un m√©todo que se llama cuando se cierra el cuadro de di√°logo.  ¬°No hab√≠a l√≠mite para mi risa a trav√©s de las l√°grimas!  El delegado fue descrito en la primera versi√≥n. <br><br>  ¬°La historia es triste, pero a√∫n m√°s triste!  Si si!  Le describ√≠ en detalle personalmente c√≥mo utilizar a los delegados, por as√≠ decirlo, el curso general.  No perd√≠ la oportunidad de divertirme y dije que todo esto estaba en la p√°gina principal del proyecto desde el principio.  Recib√≠ la respuesta ... pero quer√≠a llorar a√∫n m√°s: <br><br>  ‚Äú <i>Recientemente comenc√© a programar y no quiero entender la documentaci√≥n.</i>  <i>Adios</i> <br><br>  Me re√≠ por mucho tiempo. <br><br><h3>  Terminamos </h3><br>  Se ha presentado un breve programa educativo, para los atentos, dejar√© enlaces al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lapso de</a> tiempo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">con el dise√±o</a> (lamo sin escr√∫pulos las sangr√≠as y los colores de las aplicaciones electr√≥nicas) y un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tutorial</a> que mostrar√° todo lo que describ√≠ aqu√≠, pero con claridad. <br><br>  ¬°Todas las migraciones exitosas al nuevo Swift! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es430886/">https://habr.com/ru/post/es430886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es430876/index.html">Desarrollo a trav√©s de pruebas: mejora de habilidades</a></li>
<li><a href="../es430878/index.html">Disponible PhpStorm 2018.3</a></li>
<li><a href="../es430880/index.html">Otra implementaci√≥n de procesamiento de datos</a></li>
<li><a href="../es430882/index.html">Xiaomi Aqara Switch rehace de ZigBee a Z-Wave</a></li>
<li><a href="../es430884/index.html">F√°brica de impresi√≥n: por qu√© "LANIT-Integration" abri√≥ su propia "imprenta"</a></li>
<li><a href="../es430888/index.html">¬øQu√© tan seguro es usar paquetes R para trabajar con la API de sistemas de publicidad?</a></li>
<li><a href="../es430890/index.html">Donde √°gil es terrible, especialmente scrum</a></li>
<li><a href="../es430892/index.html">La combinaci√≥n del enfoque multiplataforma y nativo en el desarrollo de aplicaciones m√≥viles.</a></li>
<li><a href="../es430894/index.html">Situaci√≥n: las marcas gastan cada vez m√°s dinero en publicidad en podcasts: entendemos por qu√©</a></li>
<li><a href="../es430896/index.html">Linux Foundation ha establecido fondos para GraphQL y Ceph: por qu√© son necesarios y qu√© esperar de ellos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>