<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😓 🕺🏼 🍡 Fonctionnement d'Android, partie 4 👩‍👧‍👧 🐇 🙋🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour à tous! Nous avons pris le temps de poursuivre une série d'articles sur l'appareil interne Android. Dans cet article, je parlerai du processus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fonctionnement d'Android, partie 4</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/solarsecurity/blog/427431/"><p> <a href=""><img src="https://habrastorage.org/webt/jv/bc/cd/jvbccdismv6aavwbri8o5q9uu5o.png"></a> </p><br><p>  Bonjour à tous!  Nous avons pris le temps de poursuivre une série d'articles sur l'appareil interne Android.  Dans cet article, je parlerai du processus de démarrage Android, du contenu du système de fichiers, de la façon dont les données des utilisateurs et des applications sont stockées, de l'accès root, de la portabilité des versions d'Android et du problème de fragmentation. </p><a name="habracut"></a><br><p>  Articles de série: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement d'Android, partie 1</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement d'Android, partie 2</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement d'Android, partie 3</a> </li><li>  Fonctionnement d'Android, partie 4 </li><li>  ... </li></ul><br><h2 id="pakety">  Forfaits </h2><br><p> Comme je l'ai déjà dit, l'architecture Android est construite autour d'applications.  Ce sont les applications qui jouent un rôle clé dans le périphérique de nombreuses parties du système, c'est pour l'interaction harmonieuse des applications que les modèles d'activité et d'intention sont construits, et le modèle de sécurité Android est basé sur l'isolement des applications.  Et si le gestionnaire d'activité est engagé dans l'orchestration de l'interaction des composants d'application, le <strong>gestionnaire de packages</strong> est responsable de l'installation, de la mise à jour et de la gestion des droits des applications (gestionnaire de packages - vous pouvez l'appeler dans le shell avec la commande <code>pm</code> ). </p><br><p>  Comme son nom l'indique «gestionnaire de packages», à ce niveau, les applications sont souvent appelées <strong>packages</strong> .  Les packages sont distribués au format <strong>APK</strong> (package Android) - archives zip spéciales.  Chaque package a un <em>nom</em> (également appelé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ID d'application</a> ) qui identifie de manière unique cette application (mais pas sa version spécifique - au contraire, les noms des différentes versions du package doivent correspondre, sinon ils seront considérés comme des packages distincts).  Les noms de package sont généralement écrits en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>notation du nom DNS inverse</em></a> - par exemple, l'application YouTube utilise le nom de package <code>com.google.android.youtube</code> .  Souvent, le nom du package correspond à l'espace de noms utilisé dans son code Java, mais Android ne l'exige pas (en outre, les fichiers APK de l'application incluent généralement des bibliothèques tierces, dont l'espace de noms, bien sûr, n'a rien à voir avec les noms de packages, qui les utilisent). </p><br><p>  Chaque APK pendant l'assemblage doit être <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>signé par le</strong></a> développeur à l'aide d'une signature numérique.  Android vérifie la présence de cette signature lors de l'installation de l'application et lors de la mise à jour d'une application déjà installée, il compare en outre les clés publiques avec lesquelles l'ancienne et la nouvelle version sont signées;  ils doivent correspondre, ce qui garantit que la nouvelle version a été créée par le même développeur que l'ancienne.  (Si cette vérification n'était pas disponible, l'attaquant pourrait créer un package du même nom que l'application existante, convaincre l'utilisateur de l'installer en «mettant à jour» l'application, et accéder aux données de cette application.) </p><br><p>  La <strong>mise à jour du</strong> package lui-même est l'installation de sa nouvelle version au lieu de l'ancienne avec la préservation des données et autorisations reçues de l'utilisateur.  Vous pouvez également «rétrograder» les applications vers des versions plus anciennes, mais en même temps, par défaut, Android efface les données enregistrées par la nouvelle version, car l'ancienne version peut ne pas fonctionner avec les formats de données utilisés par la nouvelle version. </p><br><p>  Comme je l'ai déjà dit, le code de chaque application est généralement exécuté sous son propre utilisateur Unix (UID), ce qui garantit leur isolation mutuelle.  Plusieurs applications peuvent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">explicitement demander à</a> Android d'utiliser un UID commun pour elles, ce qui leur permettra d'accéder directement aux fichiers des autres et même, si vous le souhaitez, de s'exécuter dans le même processus. </p><br><p>  Bien que généralement un package corresponde à un fichier APK, Android prend en charge les packages composés de plusieurs APK (c'est ce qu'on appelle des APK <strong>fractionnés</strong> ou <strong>des APK fractionnés</strong> ).  C'est la base de telles fonctionnalités "magiques" d'Android, telles que le chargement dynamique de modules d'application supplémentaires (modules de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fonctionnalités dynamiques</a> ) et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Instant Run</a> dans Android Studio (mise à jour automatique du code d'application en cours d'exécution sans sa réinstallation complète et, dans de nombreux cas, même sans redémarrage). </p><br><p><img src="https://habrastorage.org/webt/jm/_x/0q/jm_x0qtvqsmt4-tj6-hxbcwzizi.png"></p><br><h2 id="faylovaya-sistema">  Système de fichiers </h2><br><p>  Le périphérique du système de fichiers est l'un des problèmes les plus importants et les plus intéressants de l'architecture du système d'exploitation, et le périphérique du système de fichiers dans Android ne fait pas exception. </p><br><p>  L'intérêt est, tout d'abord, quels systèmes de fichiers sont utilisés, c'est-à-dire dans quel format le contenu des fichiers est enregistré sur un disque conditionnel (dans le cas d'Android, c'est généralement une mémoire flash et des cartes SD) et comment le noyau du système prend en charge ce format .  Le noyau Linux utilisé dans Android, à un degré ou un autre, prend en charge un grand nombre de systèmes de fichiers différents - de ceux utilisés dans Windows FAT et NTFS et ceux utilisés à Darwin par le tristement célèbre HFS + et APFS moderne - au réseau 9pfs du Plan 9. Il existe de nombreux »Pour les systèmes de fichiers Linux - par exemple, Btrfs et la famille ext. </p><br><p>  Le standard de facto pour Linux est depuis longtemps <strong>ext4</strong> , utilisé par défaut par les distributions Linux les plus populaires.  Par conséquent, il n'y a rien d'inattendu dans le fait qu'il soit utilisé dans Android.  Certains assemblages (et certains passionnés) utilisent également <strong>F2FS</strong> (Flash-Friendly File System), optimisé spécifiquement pour la mémoire flash (cependant, avec ses avantages, tout n'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas si clair</a> ). </p><br><p>  Deuxièmement, la disposition dite du <strong>système de fichiers</strong> est intéressante - l'emplacement des dossiers et fichiers système et utilisateur dans le système de fichiers.  La disposition du système de fichiers dans «Linux ordinaire» mérite une description plus détaillée (qui peut être trouvée, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur ce lien</a> );  Je ne mentionnerai ici que quelques-uns des répertoires les plus importants: </p><br><ul><li>  <code>/home</code> stocke les dossiers personnels des utilisateurs;  ici, dans divers dossiers cachés ( <code>.cache</code> , <code>.cache</code> , <code>.config</code> et autres), les programmes stockent leurs paramètres, données et cache, spécifiques à l'utilisateur, </li><li>  <code>/boot</code> stocke le noyau Linux et l'image initramfs (système de fichiers de démarrage spécial), </li><li>  <code>/usr</code> (il serait plus logique d'appeler <code>/system</code> ) stocke la partie principale du système lui-même, y compris les bibliothèques, les fichiers exécutables, les fichiers de configuration, ainsi que les ressources - thèmes pour l'interface, icônes, contenu du manuel du système, etc., </li><li>  <code>/etc</code> (il serait plus logique d'appeler <code>/config</code> ) stocke les paramètres à l'échelle du système, </li><li>  <code>/dev</code> stocke les fichiers de périphérique et d'autres fichiers spéciaux (par exemple, le socket <code>/dev/log</code> ), </li><li>  <code>/var</code> stocke des données mutables - journaux, cache système, contenu de base de données, etc. </li></ul><br><p>  Android utilise une disposition de système de fichiers similaire mais sensiblement différente.  En voici quelques-unes des parties les plus importantes: </p><br><ul><li>  <code>/data</code> stocke des données mutables, </li><li>  Le noyau et l'image initramfs sont stockés sur une partition flash distincte, qui ne peut pas être montée sur le système de fichiers principal. </li><li>  <code>/system</code> correspond à <code>/usr</code> et stocke le système, </li><li>  <code>/vendor</code> - un analogue de <code>/system</code> conçu pour les fichiers spécifiques à cet assemblage Android, et non inclus dans l'Android "standard", </li><li>  <code>/dev</code> , comme dans "Linux normal", stocke les fichiers de périphériques et autres fichiers spéciaux. </li></ul><br><p>  Les plus intéressants de ces répertoires sont <code>/data</code> et <code>/system</code> .  Le contenu de <code>/system</code> décrit le système et contient la plupart de ses fichiers constitutifs.  <code>/system</code> est situé sur une section distincte de la mémoire flash, qui est montée par défaut en mode lecture seule;  généralement, les données ne changent que lorsque le système est mis à jour.  <code>/data</code> également dans une section distincte et décrit l'état modifiable d'un appareil particulier, y compris les paramètres utilisateur, les applications installées et leurs données, les caches, etc.  La suppression de toutes les données utilisateur, la soi-disant réinitialisation d'usine, avec ce schéma consiste simplement à supprimer le contenu de la section des <em>données</em> ;  un système intact reste installé dans la section <em>système</em> . </p><br><pre> <code class="markdown hljs"><span class="hljs-section"><span class="hljs-section"># mount | grep /system /dev/block/mmcblk0p14 on /system type ext4 (ro,seclabel,relatime,data=ordered) # mount | grep /data /dev/block/mmcblk0p24 on /data type ext4 (rw,seclabel,nosuid,nodev,noatime,noauto_da_alloc,data=writeback)</span></span></code> </pre> <br><p>  Les applications - à savoir, leurs APK, fichiers odex (code Java compilé à l'avance) et bibliothèques ELF - sont installées dans <code>/system/app</code> (pour les applications <code>/data/app</code> avec le système) ou dans <code>/data/app</code> (pour les installées par l'utilisateur) applications).  Lors de la création d'un assembly Android, chaque application préinstallée se voit attribuer un dossier portant le nom du formulaire <code>/system/app/Terminal</code> , et pour les applications installées par l'utilisateur lors de l'installation, des dossiers sont créés dont les noms commencent par le nom de leur package.  Par exemple, une application YouTube est enregistrée dans un dossier avec un nom comme <code>/data/app/com.google.android.youtube-bkJAtUtbTuzvAioW-LEStg==/</code> . </p><br><div class="spoiler">  <b class="spoiler_title">À propos de ce suffixe</b> <div class="spoiler_text"><p>  Le suffixe dans le nom des dossiers d'application est de 16 octets aléatoires encodés en Base64.  L'utilisation de ce suffixe empêche les autres applications de «deviner» le chemin vers une application dont elles ne devraient pas avoir connaissance.  En principe, la liste des applications installées sur l'appareil et les chemins d'accès à celles-ci ne sont pas un secret - elles peuvent être obtenues via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des API standard</a> - mais dans certains cas (notamment pour les applications instantanées) l'accès à ces données est restreint. </p><br><p>  Ce suffixe sert un autre objectif.  Chaque fois que l'application est mise à jour, le nouvel APK est installé dans le dossier avec un nouveau suffixe, après quoi l'ancien dossier est supprimé.  Avant la version 8.0 Oreo, c'était le but des suffixes, et au lieu d'octets aléatoires <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">,</a> <code>-1</code> et <code>-2</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilisés</a> alternativement (par exemple, <code>/data/app/com.google.android.youtube-2</code> pour YouTube). </p><br><p>  Le chemin d'accès complet au dossier d'application dans <code>/system/app</code> ou <code>/data/app</code> peut être obtenu à l'aide de l'API standard ou de la <code>pm path org.example.packagename</code> , qui affiche les chemins d'accès de tous les fichiers APK de l'application. </p><br><pre> <code class="markdown hljs"><span class="hljs-section"><span class="hljs-section"># pm path com.android.egg package:/system/app/EasterEgg/EasterEgg.apk</span></span></code> </pre> </div></div><br><p>  Étant donné que les <strong>applications préinstallées sont stockées dans la section <em>système</em></strong> (dont le contenu, je me souviens, ne change que lorsque le système est mis à jour), elles ne peuvent pas être supprimées (à la place, Android offre la possibilité de les "désactiver").  Néanmoins, la <em>mise à jour</em> des applications préinstallées est prise en charge - dans ce cas, un dossier dans <code>/data/app</code> est créé pour la nouvelle version et la version fournie avec le système reste dans <code>/system/app</code> .  Dans ce cas, l'utilisateur a la possibilité de "supprimer les mises à jour" d'une telle application, en revenant à la version depuis <code>/system/app</code> . </p><br><p>  Une autre caractéristique des applications préinstallées est qu'elles peuvent recevoir <strong>des autorisations «système» spéciales</strong> .  Par exemple, les applications tierces n'ont pas l'autorisation <code>DELETE_PACKAGES</code> , qui vous permet de supprimer d'autres applications, <code>REBOOT</code> , qui vous permet de redémarrer le système, et <code>READ_FRAME_BUFFER</code> , qui permet un accès direct au contenu de l'écran.  Ces autorisations ont <em>un niveau de protection de signature</em> , c'est-à-dire que l'application essayant d'y accéder doit être signée avec la même clé que l'application ou le service dans lequel elles sont implémentées - dans ce cas, puisque ces autorisations sont implémentées par le système, la clé avec laquelle elle est signée Version Android </p><br><p>  Pour stocker des données modifiables, chaque application se voit attribuer un dossier dans <code>/data/data</code> (par exemple, <code>/data/data/com.google.android.youtube</code> pour YouTube).  Seule l'application elle-même a accès à ce dossier, c'est-à-dire uniquement l'UID sous lequel cette application est lancée (si l'application utilise plusieurs UID ou si plusieurs applications utilisent un UID commun, tout peut être plus compliqué).  Dans ce dossier, les applications enregistrent les paramètres, le cache (dans les sous-dossiers <code>shared_prefs</code> et <code>cache</code> , respectivement) et toutes les autres données dont ils ont besoin: </p><br><pre> <code class="markdown hljs"><span class="hljs-section"><span class="hljs-section"># ls /data/data/com.google.android.youtube/ cache code_cache databases files lib no_backup shared_prefs # cat /data/data/com.google.android.youtube/shared_prefs/youtube.xml &lt;?xml version='1.0' encoding='utf-8' standalone='yes' ?&gt; &lt;map&gt; &lt;string name="user_account"&gt;username@gmail.com&lt;/string&gt; &lt;boolean name="h264_main_profile_supported7.1.2" value="true" /&gt; &lt;int name="last_manual_video_quality_selection_max" value="-2" /&gt; &lt;...&gt; &lt;/map&gt;</span></span></code> </pre> <br><p>  Le système connaît l'existence du dossier de <code>cache</code> et peut le nettoyer seul s'il n'y a pas assez d'espace.  Lorsque vous désinstallez l'application, le dossier entier de cette application est complètement supprimé et l'application ne laisse aucune trace.  Alternativement, les deux utilisateurs peuvent explicitement faire dans les paramètres: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/nz/a7/tw/nza7tw-1zno64k_jos3dtwoct9g.jpeg"></a> </p><br><p>  Ce stockage de données alloué à chaque application est appelé stockage interne. </p><br><p>  De plus, Android dispose d'un autre type de stockage - le stockage dit <strong>externe</strong> ( <strong>stockage</strong> externe - ce nom reflète l'idée originale que le stockage externe devrait être situé sur une carte SD externe insérée dans le téléphone).  En fait, le stockage externe joue le rôle du <strong>dossier</strong> de départ de l' <strong>utilisateur</strong> - des dossiers tels que Documents, Téléchargement, Musique et Images s'y trouvent, c'est le stockage externe que les gestionnaires de fichiers ouvrent comme dossier par défaut, il permet à l'ordinateur d'accéder au contenu du stockage externe lorsqu'il est connecté par câble. </p><br><pre> <code class="markdown hljs"><span class="hljs-section"><span class="hljs-section"># ls /sdcard Alarms Download Podcasts Android Movies Ringtones Books Music Subtitles DCIM Notifications bluetooth Documents Pictures</span></span></code> </pre> <br><p>  Contrairement au stockage interne, divisé en dossiers d'applications individuelles, le stockage externe est une «zone commune»: toute application qui a reçu l'autorisation appropriée de l'utilisateur y a un accès complet.  Comme je l'ai mentionné dans un article précédent, les applications telles que le gestionnaire de fichiers doivent demander cette autorisation;  et pour la plupart des autres applications, il est préférable d'utiliser l'intention avec l'action <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>ACTION_GET_CONTENT</code></a> , donnant à l'utilisateur la possibilité de choisir le fichier souhaité dans le gestionnaire de fichiers système. </p><br><p>  De nombreuses applications préfèrent enregistrer certains de leurs fichiers internes, qui sont volumineux (par exemple, un cache d'images téléchargées et de fichiers audio) dans un stockage externe.  Pour ce faire, Android alloue aux applications dans des dossiers de stockage externes avec des noms de la forme <code>Android/data/com.google.android.youtube</code> .  L'application elle <em>-</em> même <em>n'a pas besoin d'</em> autorisation pour accéder à l'intégralité du stockage externe pour accéder à ce dossier (puisque son UID est défini comme propriétaire de ce dossier), mais toute autre application qui a cette autorisation peut accéder à ce dossier, donc cela vaut vraiment la peine d'être utilisé Uniquement pour le stockage de données publiques et non critiques.  Lorsque vous désinstallez l'application, le système supprimera également son dossier spécial dans le stockage externe;  mais les fichiers créés par des applications dans un stockage externe en dehors de leur dossier spécial sont considérés comme appartenant à l'utilisateur et restent en place après la suppression de l'application qui les a créés. </p><br><p>  Comme je l'ai mentionné ci-dessus, il était initialement supposé que le stockage externe serait en fait situé sur une carte SD externe, car à ce moment-là, le volume des cartes SD était considérablement plus élevé que la quantité de mémoire intégrée dans les téléphones (dans le même HTC Dream, il n'était que de 256 mégaoctets, dont environ 90 mégaoctets ont été alloués à la section des <em>données</em> ).  Depuis lors, de nombreuses conditions ont changé;  les téléphones modernes n'ont souvent pas de fente pour carte SD, mais une énorme quantité de mémoire interne est installée par les normes mobiles (par exemple, dans le Samsung Galaxy Note 9, elle peut aller jusqu'à 512 <em>gigaoctets</em> ). </p><br><p>  Par conséquent, dans Android moderne, le stockage interne et externe sont presque toujours situés dans la mémoire interne.  Le chemin réel le long duquel le stockage externe est situé dans le système de fichiers prend la forme <code>/data/media/0</code> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un</a> stockage externe séparé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">est créé</a> pour chaque utilisateur du périphérique, et le numéro dans le chemin correspond au numéro d'utilisateur).  Pour des raisons de compatibilité, le stockage externe est également accessible via les <code>/sdcard</code> , <code>/mnt/sdcard</code> , <code>/storage/self/primary</code> , <code>/storage/emulated/0</code> , plusieurs chemins commençant par <code>/mnt/runtime/</code> et quelques autres. </p><br><p>  D'un autre côté, de nombreux appareils ont toujours un emplacement pour carte SD.  La carte SD insérée dans l'appareil Android peut être utilisée comme un disque externe ordinaire (sans la transformer en stockage interne ou externe du système) - enregistrez-y des fichiers, ouvrez des fichiers stockés dessus, utilisez-la pour transférer des fichiers vers d'autres appareils, etc.  De plus, Android vous permet «d'emprunter» une carte SD et d'y placer du stockage interne et externe (c'est ce qu'on appelle le stockage emprunté - <strong>stockage adopté</strong> ).  Dans le même temps, le système reformate la carte SD et chiffre son contenu - les données qui y sont stockées ne peuvent pas être lues en la connectant à un autre appareil. </p><br><p><img src="https://habrastorage.org/webt/rg/_o/ll/rg_ollklgpm44_ixtasfjhowl-a.png"></p><br><p>  Vous pouvez en savoir plus sur tout cela, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans cet article</a> et dans la documentation officielle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour les développeurs d'applications</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les créateurs d'assemblages Android</a> . </p><br><h2 id="zagruzka">  Chargement </h2><br><p>  L'approche traditionnelle de la sécurité des systèmes informatiques se limite à protéger le système contre les attaques logicielles.  On pense que <strong>si un attaquant a un accès physique à un ordinateur, le jeu est déjà perdu</strong> : il peut avoir un accès complet à toutes les données qui y sont stockées.  Pour ce faire, il lui suffit, par exemple, d'exécuter sur cet ordinateur un système d'exploitation arbitraire contrôlé par lui, qui lui permet de contourner toutes les restrictions imposées par le système "principal" de droits, ou de connecter directement le disque de données à un autre appareil.  Si vous le souhaitez, un attaquant peut laisser l'ordinateur en état de fonctionnement, mais corriger le système installé sur celui-ci, installer des portes dérobées arbitraires, des enregistreurs de frappe, etc. </p><br><p>  C'est la protection contre les attaques logicielles qui se concentre sur le modèle de restriction des droits des utilisateurs sous Unix (et la technologie sandbox de l'application basée sur celle-ci dans Android);  La restriction Unix en soi ne protège pas le système contre un utilisateur qui s'est rendu dans la salle des serveurs et a obtenu un accès physique à l'ordinateur.  Et si des serveurs multi-utilisateurs sérieux peuvent et doivent être protégés contre tout accès physique non autorisé aux ordinateurs personnels - et en particulier aux appareils mobiles - cette approche n'est tout simplement pas applicable. </p><br><p>  Il y a deux façons d'essayer d'améliorer la situation avec une protection contre un attaquant qui a obtenu un accès physique à l'appareil: </p><br><ul><li>  Premièrement, il est possible de <strong>crypter les données stockées sur un disque</strong> , empêchant ainsi un attaquant d'accéder aux données lui-même, même s'il a accès au contenu du disque. </li><li>  Deuxièmement, il est possible de <strong>limiter en</strong> quelque sorte <strong>la capacité de charger des systèmes d'exploitation arbitraires sur l'appareil</strong> , forçant un attaquant à passer par des procédures d'authentification et d'autorisation dans le système installé. </li></ul><br><p>  C'est à ces deux zones de protection que le modèle de démarrage sécurisé sous Android est associé. </p><br><h3 id="verified-boot">  Démarrage vérifié </h3><br><p>  Le processus de démarrage Android est conçu de sorte que, d'une part, il ne permet pas aux attaquants de charger un système d'exploitation arbitraire sur l'appareil, d'autre part, il permet aux utilisateurs d'installer des assemblages Android personnalisés (et d'autres systèmes). </p><br><p>  Tout d'abord, les appareils Android, contrairement aux ordinateurs de bureau, ne permettent généralement pas à un utilisateur (ou à un attaquant) de démarrer à partir d'un support externe;  à la place, le <strong>chargeur de démarrage</strong> installé sur le périphérique (chargeur de démarrage) démarre immédiatement.  Bootloader est un programme relativement simple dont les tâches (lors du chargement en mode normal) comprennent: </p><br><ul><li>  initialisation et configuration de Trusted Execution Environment (par exemple ARM TrustZone), </li><li>  trouver des partitions de mémoire interne qui stockent des images du noyau Linux et des initramfs, </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vérification de leur intégrité (intégrité) - sinon le téléchargement est interrompu par un message d'erreur - en vérifiant la signature numérique du constructeur, </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> charger le noyau et initramfs dans la mémoire et transférer le contrôle au noyau. </font></font></li></ul><br><h3 id="flashing-unlocking-fastboot-i-recovery"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Clignotement, déverrouillage, démarrage rapide et récupération </font></font></h3><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> De plus, le chargeur de démarrage prend en charge des fonctionnalités supplémentaires pour la mise à jour et la réinstallation du système. </font></font></p><br><p> -,       (Android)   ,  <strong>recovery</strong> .  recovery,    Android-  ,           ,    Android  <em> recovery</em> . </p><br><p>      «» bootloader',       —   ( <strong>flashing</strong> )           .   bootloader       ,   fastboot mode (   bootloader mode),        bootloader'      <strong>fastboot</strong> (    <code>fastboot</code>  Android SDK   ). </p><br><p>   bootloader'   .     ,   Samsung,    bootloader'a (Loke)        (Odin).    Odin          Samsung (   Odin),      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heimdall</a> . </p><br><p>      bootloader' (       ),      recovery   Android,    ,     : </p><br><pre> <code class="markdown hljs">$ fastboot flash recovery recovery.img $ fastboot flash boot boot.img $ fastboot flash system system.img</code> </pre> <br><p>      ;        : ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>  </strong></a> ,   bootloader'     Android,      ,      ,          ,      . </p><br><p>  ,    <strong> bootloader'</strong> (unlocking the bootloader,    OEM unlock) —   bootloader'    recovery,         (     ).        Android,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>LineageOS</strong></a> ( <strong>CyanogenMod</strong> ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Paranoid Android</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AOKP</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OmniROM</a>  . </p><br><p>   bootloader' -       ,         (  <em>data</em> ) <strong> </strong> .     ,   ,          (,      Google      ),   —    ,       . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/sb/_q/3k/sb_q3kyv1pigm9j1wmi2vhu7lwa.png"></a> </p><br><p>     recovery   bootloader   ,            . </p><br><p>   bootloader'         : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/rz/a6/sf/rza6sf4m3cprxkxymn41msgoaq0.jpeg"></a> </p><br><p>   recovery,    «» (flashaholics) — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TWRP</a> (Team Win Recovery Project).   -    «»,            zip-,           : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/fo/rr/o_/forro_lz3skkvzytylekedddcli.png"></a> </p><br><h3 id="shifrovanie-diska">   </h3><br><p>   Android     ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>file-based encryption</strong></a> ).       ext4  ,    Linux ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fscrypt</a> ),          . </p><br><p>       ,    <em>data</em> ,   ,            (credential encrypted storage).  ,          ,         .                ,     ,     . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/2f/4j/y8/2f4jy8m3qevncs1084-vvpqdku4.png"></a> </p><br><p>    credential encrypted storage  Android   device encrypted storage —     ,     (    Trusted Execution Environment). ,   ,     ,    .     ,   <strong>Direct Boot</strong> :           ;         ( )     device encrypted storage,        ,     . , Direct Boot        ,   ,      -      . </p><br><h2 id="root"> Root </h2><br><p>   root- —       « root» (UID 0,    <strong></strong> ). ,  root —    Unix-,  —     —       ,        . </p><br><p>       , Android     ,  <strong>        root-</strong> .       ,          «  »,  Android  « »,    root-     «»,  : </p><br><ul><li>    —      ,    APK   , </li><li>    : -, email-, ,  , ,   ,   ,       (      activity  intent',      ), </li><li>      (icon packs), </li><li>      ,     , </li><li>     (    Android-)        , </li><li>  ,    Android,      . </li></ul><br><p><img src="https://habrastorage.org/webt/np/pl/rh/npplrhnnumsl4ssb2vitzojmcqi.png"></p><br><p> ,   ,      , root-  .      root-        (   ),  <strong>   Android       root</strong> . ,     ,      Unix-;  shell,      <code>adb shell</code> ,        Unix- <em>shell</em> . </p><br><p>   , ,  root  : </p><br><ul><li> -, root-     Android  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong></strong></a> —    Android Studio     QEMU,             . <img src="https://habrastorage.org/getpro/habr/post_images/afa/9d4/6c3/afa9d46c303ccf673c839b29aff9fe97.gif"></li><li> -, root-        Android ( <strong>pre-rooted</strong> ROMs). </li><li> -,  <strong> bootloader'</strong> root-    Android   ,    ,   <code>su</code> ,  bootloader. </li><li>   , -, <strong>   ,   </strong> ,    root-,   (   root-          ). ,        2016 ,   root-  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dirty Cow</a> . </li></ul><br><p>     ? , root-       .  ,  root-,    ,   ,     .        — ,            .  ,     ,      <em>system</em> (     ). </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a> , root-   <strong>      </strong> —  ,       . </p><br><h3 id="problemy-root-dostupa">  root- </h3><br><blockquote> With great power comes great responsibility. </blockquote><p>       ,           .  ,  root-          . </p><br><p> ,         ,   .   ,   root-       , ,  ,    root-   .      root, ,  , ,  <strong>       </strong> —  ,   ,   ,    .. </p><br><p>        ,          Unix, Android   ,        —      .   <strong>   root-</strong> , ,        . , root-      Android,               . </p><br><p>   ,  <strong>    ,    root-</strong> ,                . ,  ,   , ,  ,       .  ,      — , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Pay</a> ( Android Pay) —  <strong>     root-</strong> ,    . </p><br><p><img src="https://habrastorage.org/webt/4h/qx/9g/4hqx9gfx2cobrrbikc6xhzzbobi.jpeg"></p><br><p> , -   Pokémon GO     root- , ,        . </p><br><h3 id="google-play-i-root-dostup"> Google Play  root- </h3><br><p> Google    Google Play Store  Google Play Services   ,  root- ,    Android     , , ,       ,          .   Play Store —     (   ,    )    Android,        . (   — , Amazon    Android   Fire OS    — Echo, Fire TV, Fire Phone, Kindle Fire Tablet —       Google).   root-       Android-. </p><br><p>     , Google   ,    root-,   Google Play (         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Open GApps</a> );   Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . </p><br><blockquote> Device manufacturers work with Google to certify that Android devices with Google apps installed are secure and will run apps correctly. To be certified, a device must pass Android compatibility tests. If you are unable to add a Google Account on your Android device, your Android device software might not have passed Android compatibility tests, or the device manufacturer has not submitted the results to Google to seek approval. As a result, your device is uncertified. This means that your device might not be secure. <br><br> If you are a User wanting to use custom ROMs on your device, please register your device by submitting your Google Services Framework Android ID below. </blockquote><br><h3 id="ogranichenie-dostupa-kroot">    root </h3><br><p>  «» Linux,     Unix-,   root- (   <code>sudo</code>  <code>su</code> )     ( ,   Unix- root,        )     (,    ).         ,            root-. </p><br><p> <a href=""> </a>  <code>su</code>  Android Open Source Project     ,     Unix- <em>shell</em> (  root),       root-.    <code>su</code>      , ,    ,     . </p><br><p>        ,     <code>su</code> .     <code>su</code>     ,        root-.         , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SuperSU</a> ;           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Magisk</a> . </p><br><p><img src="https://habrastorage.org/webt/ln/dk/s_/lndks_ju4haxlsnfbh8xpvofhek.png"></p><br><h3 id="magisk"> Magisk </h3><br><p>   Magisk —      ,       ,    <code>/system</code> ,        <em>system</em> (   <strong>systemless-ly</strong> ), <a href="">    «» Linux</a> .    <strong>Magisk Hide</strong> —        root-,         root-   Magisk   —    -            Google Pay,     root- . Magisk Hide         root-,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>SafetyNet</strong></a>  Google. </p><br><p>    <em> </em> ,  ,      Google Pay  root-        —      root-   . ,    root-, -            Google Pay.    ,       . </p><br><p> Magisk  systemless-    «»   <strong>Magisk Modules</strong> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>     Magisk.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">, </a> ,  root- Xposed  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ViPER</a> ,        . </p><br><h2 id="soc-drayvera-i-fragmentaciya"> SoC,    </h2><br><h3 id="sistemy-na-kristalle">    </h3><br><p>          <strong> </strong> ,       «»,      ,        — ,    —    (,    Wi-Fi ). </p><br><p>     ,   Android-    <strong>  </strong> (system on a chip, SoC).         —  ,   ,  -,  , LTE-, Bluetooth-  Wi-Fi-  .. —        .         ,     ,             ,        ,      ,          . </p><br><p> , ,       .      ,     «», , ,   ,       . ,  ,  -,      ,        ,  ,      . </p><br><h3 id="o-drayverah">   </h3><br><p>  —       Android —  SoC        .     ,    ,      —    LTE- —      .      , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">             ;  ,       </a> ,            . </p><br><p>    SoC (, Qualcomm)      Android- (, Sony  LG),       Android,     Android Open Source Project.   ,   Android,    ,       ,          . </p><br><p>     Android          Android-.         ,           Android.        Android     ,  ,            .             . </p><br><h3 id="fragmentaciya">  </h3><br><p>    ,   <strong></strong> :  Android       —      ,     .           Android,              . </p><br><p> ,    ,             ,     Android.         . </p><br><p> -,  <strong></strong> .       ,      .      ,     ,   ,  ,     . </p><br><p> -,        Android —    <strong>developer experience</strong> (DX,    user experience/UX).  ,              Android,    API — Android Framework, OpenGL/Vulkan   —      .   , ,   ,               Android —   ,   ,     . </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/aca/68a/fed/aca68afed91e22f1ab449a9b54c83ba5.jpg"></a> </p><br><h3 id="dont-stop-thinking-abouttomorrow"> Don't Stop Thinking About Tomorrow </h3><br><p>     Android-         . , Google      Nexus  Pixel   ,     Android.       Android      ,  ,   ,     . </p><br><p>  ,    ,   Android,    SoC. Android       «»  (, ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Android-x86</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RemixOS</a> ).   Android   ChromeOS,   Chromebook'  Android-   Linux-  -.   —    Android   —   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Anbox</a> ,   Android-  «» Linux-. (,  Android-     x86-,   ,     Java,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    .) </p><br><p><img src="https://habrastorage.org/webt/p4/6q/e0/p46qe0opbvxrwdru85-3py3pgw0.png"></p><br><p>    ,    Android          —   ,     Android  . </p><br><p>       —   <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> </strong>       Android.   ,  ,    .    ,      <strong> </strong> ,    Android           . </p><br><p>     .  2017  Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> <strong>Project Treble</strong> — ,    (     HAL, hardware abstraction layer)    (  ,    )    . Treble <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>     ,   ,     ,   —     —     . </p><br><p> <strong>Treble    </strong>        .  Treble      (Sony, Nokia, OnePlus, Oppo, Xiaomi, Essential  Vivo —      Google) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>  - Android Pie. Treble <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> Essential    Android Pie   Essential Phone <em>   </em> Android Pie.      Android —          -  — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>   ,  Treble,   ,         SoC. </p><br><p>  Treble   . Java   «write once, run everywhere»    —       Android-       . Treble —  ,        Android      SoC.    ,       ,   Treble.  ,        Android-  . </p><br><hr><br><p>         userspace Android:   init,  Zygote, Binder,   props. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr427431/">https://habr.com/ru/post/fr427431/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr427419/index.html">Que faire lorsque le processeur n'a rien à faire?</a></li>
<li><a href="../fr427421/index.html">Comment les sites de généalogie facilitent la capture des tueurs</a></li>
<li><a href="../fr427423/index.html">City2Share: voitures électriques et autonomes dans les pôles logistiques de Munich</a></li>
<li><a href="../fr427427/index.html">Comment ils arrivent à l'informatique: à propos des stagiaires et des joons (résultat du sondage «My Circle»)</a></li>
<li><a href="../fr427429/index.html">Framework GUI - par thread</a></li>
<li><a href="../fr427433/index.html">Équilibrage du trafic dans les réseaux IP de l'opérateur</a></li>
<li><a href="../fr427435/index.html">STM32H7 - réglage de l'horloge sans HAL</a></li>
<li><a href="../fr427437/index.html">Configuration des serveurs liés: serveur sql ms et teradata</a></li>
<li><a href="../fr427439/index.html">Toute la vérité sur RTOS. Article # 16. Signaux</a></li>
<li><a href="../fr427441/index.html">Convergence avec Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>