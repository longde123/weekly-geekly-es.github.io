<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéõÔ∏è ü§ôüèΩ ü•ì √úber Godot, GLSL und WebGL, Shader, die im Minispiel verwendet werden üë®üèæ‚Äçüé§ üëáüèª üí™üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Artikel handelt haupts√§chlich von GLSL-Shadern und wie ich sie in diesem Mini-Demo-Spiel verwendet habe. 

 Der Artikel ist in folgende Reihenfolg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√úber Godot, GLSL und WebGL, Shader, die im Minispiel verwendet werden</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467779/"><h1 id="statya-v-osnovnom-pro-glsl-sheydery-i-kak-ya-ih-ispolzoval-v-etoy-mini-demke-igre">  Der Artikel handelt haupts√§chlich von GLSL-Shadern und wie ich sie in diesem Mini-Demo-Spiel verwendet habe. </h1><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0jKyTBFrpjU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="statya-razbita-po-takoy-ocherednosti">  Der Artikel ist in folgende Reihenfolge unterteilt: </h3><br><ul><li>  Links und eine kurze Beschreibung. </li><li>  Eine sehr kurze Beschreibung der verwendeten Spielelogik und Godot-Funktionen. </li><li>  √úber die verwendeten Shader. </li><li>  Ein bisschen mehr √ºber Godot und seine Eigenschaften. </li><li>  WebGL2 funktioniert </li><li>  Multiplayer </li></ul><a name="habracut"></a><br><hr><br><h1 id="1-ssylki-i-opisanie">  1. Links und Beschreibung </h1><br><p>  <strong>Sie k√∂nnen die Win / Linux-Version</strong> √ºber den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zu itch.io herunterladen</a> </p><br><p>  <strong>Der Quellcode f√ºr das gesamte Spiel</strong> ist auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gitlab verf√ºgbar</a> . </p><br><h3 id="igrovoy-process">  Gameplay: </h3><br><p>  Minimal, dies ist kein vollst√§ndiges Spiel.  (kein Ton im Spiel) </p><br><p>  <em>Das Ziel des Spiels</em> ist es, die maximale Anzahl von Runden zu halten.  Runden beginnen, wenn die HP-Kugeln Null sind und keine Roboter im Spiel sind. </p><br><p>  Wenn Teile zerst√∂rt werden, erscheinen <em>einmal pro Runde</em> Boni, die die Geschwindigkeit der Schussanimation, den Schaden (nur in der Hauptsph√§re) und die Sprungh√∂he in den Farben Blau, Rot / Gr√ºn und Gelb angeben.  Bots geben auch einen Bonus, aber zuf√§llig.  Der Spielercharakter stellt in jeder neuen Runde + 1 PS wieder her. </p><br><hr><br><h1 id="2-logika-igry-i-ispolzuemye-resursy">  2. Die Logik des Spiels und die verwendeten Ressourcen </h1><br><p>  <strong>Verwendete Ressourcen:</strong> </p><br><p>  <strong>Blender wurde</strong> nur verwendet, um die Anzahl der Polygone auf Modellen zu reduzieren und um gebrochene Modellteile zu erstellen. </p><br><p>  Das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Futari-Addon-</a> Modul wird <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verwendet</a> .  (Ich werde unten dar√ºber schreiben) </p><br><p>  <strong>Im Spiel haben zwei Modelle Animationen.</strong> <br>  Bewegungen von Spielercharakteren, die ich in Godot, dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Originalmodell, gemacht habe</a> <br>  Das zweite Modell ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sphere-Bot</a> mit hochwertigen Animationen. </p><br><p>  Hier werden alle gebrauchsfertigen <strong>Modelle von Objekten von Drittanbietern</strong> <a href="">aufgelistet</a> . </p><br><h3 id="logika-igry-i-vozmozhnosti-godot">  Spielelogik und Godot-Funktionen: </h3><br><p>  Die Spielelogik ist nicht optimal, ich werde die Punkte auflisten, die normalerweise gemacht werden. </p><br><p>  F√ºr eine 3D-Szene wird nur ein Ansichtsfenster verwendet, und mehrere Ansichtsfenster (niedrige Aufl√∂sung), in denen orthogonale Kameras f√ºr 2D-Ansichtsfenster (ebenfalls niedrige Aufl√∂sung) vorhanden sind, in denen Multipass- / Feedback-Shader verarbeitet werden. Weitere Informationen hierzu finden Sie weiter unten. </p><br><p> <strong>Alle Texturen haben eine Mipmap</strong> und funktionieren sogar im Browser.  Es gibt zus√§tzliche Grafikeinstellungen <em>(Esc - Einstellungen)</em> .  Sie k√∂nnen beispielsweise eine <em>beliebige Aufl√∂sung f√ºr das Spiel</em> festlegen, bis zu <code>32x32</code> <code>320x240</code> <code>32x32</code> Pixel. Ich habe beispielsweise die Aufl√∂sung in den Einstellungen auf <code>320x240</code> , das Spiel in einem Browser ausgef√ºhrt und die maximale Anti-Aliasing- <em>MSAA</em> <code>320x240</code> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/998/719/596/998719596112cbdc46218a7df4c8561b.png"></a> </p><br><p>  <strong>Alle Lichtquellen arbeiten in Echtzeit</strong> , insgesamt gibt es 16. </p><br><p>  <strong>Der Boden und der Zaun</strong> sind die einfachsten Partikel, die dasselbe Modell viele Male duplizieren. Der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Code ist trivial</a> . </p><br><p>  Die Partikelrotationsmatrix (Bodenst√ºcke) in meinen Shadern ist nur ein kurzer Eintrag aus dieser Formel: </p><br><pre> <code class="plaintext hljs">mat4 rotationAxisAngle( vec3 v, float angle ) { float s = sin( angle ); float c = cos( angle ); float ic = 1.0 - c; return mat4( vx*vx*ic + c, vy*vx*ic - s*vz, vz*vx*ic + s*vy, 0.0, vx*vy*ic + s*vz, vy*vy*ic + c, vz*vy*ic - s*vx, 0.0, vx*vz*ic - s*vy, vy*vz*ic + s*vx, vz*vz*ic + c, 0.0, 0.0, 0.0, 0.0, 1.0 ); }</code> </pre> <br><p>  Zum Beispiel ist <code>v=vec3(0.0,0.0,1.0)</code> die Drehung entlang der <code>z</code> Achse und der <code>angle=PI/2.</code>  Ersetzen Sie sie und erhalten Sie die gew√ºnschte Runde. </p><br><h3 id="animaciya-razrushaemyh-blokov-schitaetsya-fizicheskim-dvizhkom-v-realnom-vremeni">  Die Animation zerst√∂rbarer Bl√∂cke wird als Echtzeit-Physik-Engine betrachtet </h3><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/gRd0oMq.mp4" type="video/mp4"></video></div></div></div><br><p>  <strong>Die Physik in Godot ist</strong> ziemlich begrenzt und verringert die <em>FPS</em> sogar bei einem Dutzend aktiver Objekte erheblich. <em>Daher</em> werden alle Kollisionen zwischen zerst√∂rten Teilen deaktiviert, andere festgelegt, Ebenen f√ºr die Physik festgelegt, die Anzahl der gleichzeitigen Zerst√∂rungen und die maximale Anzahl von Bots gleichzeitig begrenzt (sechs). </p><br><p>  <strong>Die Tr√§gheitsphysik und die Interaktion des Spielercharakters mit dynamischen Objekten.</strong>  Es ist standardm√§√üig in Godot deaktiviert, ich habe eine minimale Interaktion geschrieben, den Code in den Dateien: </p><br><p>  <a href="">Die</a> Funktion <a href="">bot_hit.gd _integrate_forces</a> und alles, was dazu aufgerufen wird, sind Bewegungen des Gegners <br>  <a href="">player_l.gd</a> Erstens <code>move_and_slide</code> Funktion <code>move_and_slide</code> die unendliche Tr√§gheit und die Funktion <code>process_collision</code> st√∂√üt Objekte ab. </p><br><p>  <strong>Das Vorladen (Preload)</strong> zu Beginn des Spiels wird verwendet, um Verz√∂gerungen beim ersten Erscheinen des Objekts zu vermeiden. Dies hilft jedoch, wenn Sie die <em>Schatten</em> (und einige andere Optionen) aktivieren, werden die Verz√∂gerungen beim ersten Erscheinen des Objekts erneut angezeigt.  Auch im Browser hilft dies aufgrund der Besonderheiten von Browsern, die mit Shadern arbeiten, nicht. </p><br><p>  Mehrere doppelte Objekte in einem und mehrere GIProbe, die Formen und Parameter von Lichtquellen <em>sollen</em> die Einschr√§nkungen von OpenGL oder die Einschr√§nkungen in Godot umgehen. </p><br><hr><br><h1 id="3-ispolzuemye-sheydery">  3. Gebrauchte Shader </h1><br><h3 id="panorama-okruzheniya">  Umweltpanorama: </h3><br><p>  Dieses Spiel verwendet ein statisches Panorama, das Bild wird von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Shader erhalten</a> <em>(c1 c2 Farben, ldir Position)</em> </p><br><pre> <code class="plaintext hljs">vec3 sky(vec3 d, vec3 c1, vec3 c2) { vec3 ldir = normalize(vec3(0.,0.,-1.)); vec3 col = mix(c1*100., c2*100., min(abs(dy)*2. + .5, 1.)) / 255.*.5; col *= (1. + vec3(1., .7, .3) / sqrt(length(d - ldir))*2.); //sun return clamp(col,vec3(0.),vec3(1.)); }</code> </pre> <br><p>  Um ein Panorama zu erhalten, entfernen Sie den Kommentar aus Zeile 57 <code>panorama_uv(fragCoord,ro,rd);</code>  und schreibe einen Kommentar in Zeile 58 </p><br><p>  Dynamische Panoramen f√ºr Godot in fr√ºheren Demos (YouTube und es gibt Links zum Code) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Panorama der Wolken</a> . <br>  In dieser Demo wurde das Panorama des Tag / Nacht-Zyklus mit der Bewegung der Wolken verwendet: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jTmppCifnYE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Ein weiteres Tag / Nacht-Panorama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zum Beispiel, auf Shadertoy habe</a> ich es nirgendwo benutzt </p><br><p>  Wenn Sie <strong>CubeMap f√ºr Godot in ein Panorama der Umgebung konvertieren m√ºssen</strong> , habe ich einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einfachen</a> <strong>Webkonverter erstellt</strong> . </p><br><h3 id="sovsem-prostye-sheydery">  Sehr einfache Shader: </h3><br><p>  <strong>Partikel-Shader bestimmen statisch ihre Position</strong> f√ºr die Animation oder nicht.  Zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">spawn.shader)</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/chYJ7iU.mp4" type="video/mp4"></video></div></div></div><br><p>  F√ºr <strong>ein zus√§tzliches Leuchten um Objekte</strong> , nicht nur B√§lle, ist dies eine Zeile von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gglow.shader</a> (Zahlen k√∂nnen nach Bedarf ge√§ndert werden) </p><br><pre> <code class="plaintext hljs">float intensity = pow(0.122 + max(dot(NORMAL, normalize(VIEW)),0.), 010.85);</code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/webt/gf/sj/dh/gfsjdhbifiw_x2hrnj5i2xdsuwq.png"></a> <a href=""><img src="https://habrastorage.org/webt/h9/e9/vn/h9e9vn13ugqh7vqxuuoxpzunlno.png"></a> </p><br><p>  <strong>Das Anzeigen von Textziffern in 3D</strong> , wie ich es in Godot verstehe, gibt es keine M√∂glichkeit daf√ºr (ohne ein zus√§tzliches FBO (Ansichtsfenster) zu <em>erstellen</em> ), so dass ein einfacher Shader Zahlen aus einer Textur <em>druckt</em> (so dass es sich um <em>Mipmapping handelt</em> ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Shader-Code</a> </p><br><h3 id="elementy-ui">  UI-Elemente: </h3><br><p>  Die benutzerdefinierte Form von UI-Panels f√ºr mich am einfachsten zu gestalten, liegt bei Shadern. Vielleicht <strong>stimmt das √ºberhaupt nicht</strong> .  Die richtige Methode wird <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier als Beispiel gezeigt</a> (im Abschnitt √ºber die Benutzeroberfl√§che). <br>  In diesem Spiel ist die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einfachste Animation der Hintergrund des Men√ºs</a> und die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anzeige ist HP</a> .  Oben, im Link zum Video des Tag / Nacht-Panoramas, wird es auch gemacht, es gibt Streifen an den Seiten und alle Animationen auf dem Shader. </p><br><h3 id="pro-modul-futari-addon">  √úber das Futari-Addon-Modul: </h3><br><p>  Es funktioniert fast genauso wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dieser Shader</a> f√ºr 2D-Partikel in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Videos</a> (siehe ab 1:41). </p><br><p>  Eine 2D-SDF-Karte aller Polygone wird zu Beginn einmal auf dem Video erstellt und die resultierende Textur wird einfach an die Partikel gesendet. Die Partikel selbst bauen sich an der aktuellen Position normal auf und √§ndern die Bewegung. </p><br><p>  <strong>futari-addon</strong> macht fast das gleiche, nur dass anstelle einer 2D- <strong>Texturkarte</strong> die Koordinaten von 3D-Kugeln und -Ebenen √ºbertragen werden, die entsprechend den Bedingungen im Partikel-Shader verarbeitet werden, sodass Sie ihre Position und andere Parameter frei √§ndern k√∂nnen. </p><br><p>  Plus, der Wind (in meinem 2D-Beispiel ist das Hinzuf√ºgen von Wind sehr einfach, da eine andere Textur mit + - Werten zur Geschwindigkeit beitr√§gt und die Partikel einfach den Geschwindigkeitswert dieser Karte an ihrer Position hinzuf√ºgen). </p><br><p>  <strong>Das Futari-Addon-Modul ist sehr gut</strong> , es wird verwendet, anstatt ein eigenes Partikelsystem zu erstellen. </p><br><h3 id="effekt-schita">  Schildeffekt: </h3><br><p>  Partikel, an die die Koordinaten des Aufpralls auf die Kugel und die Position des Spielers sowie die Ausl√∂schung √ºber den <em>Transformations-R√ºckkopplungspuffer</em> √ºbertragen werden.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Shader-</a> Code in der Datei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">en_m.shader</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/cdtVH5V.mp4" type="video/mp4"></video></div></div></div><br><h3 id="schit-u-botov">  Bots Shield: </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/ah/-f/ob/ah-fob8goggag27vzivk3-4kl00.png"></a> <a href=""><img src="https://habrastorage.org/webt/gq/fu/ac/gqfuacowtln68ajquams-xfr9zm.png"></a> <br>  Shader als dreidimensionales Ger√§usch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sheild.shader</a> funktioniert dank der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier originalen</a> <code>flow</code> Funktion im Wesentlichen alles <br>  Der Hintergrund wird durch <code>gl_FrontFacing</code> und dunkler und gr√ºner gemalt, nicht blau. <br>  Reaktion auf einen Schlag - der Schockereignis-Timer wird einfach √ºbertragen. </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/YWtZyJP.mp4" type="video/mp4"></video></div></div></div><br><hr><br><h1 id="sheydery-chitayuschie-svoy-proshlyy-kadr-ili-feedbackmultipass-sheydery">  Shader, die ihren letzten Frame lesen, oder Feedback / Multipass-Shader: </h1><br><p>  <strong>Fast alle Effekte werden mit dieser Logik erzielt.</strong> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einer der Shader aus dem Spiel</a> . <br>  Als Quelle habe ich eine <em>orthogonale Kamera eingestellt</em> , die Objekte in einer bestimmten Gruppe aus kurzer Entfernung aufnimmt (ohne die gesamte Szene zu verarbeiten). <br> <a href=""><img src="https://habrastorage.org/webt/zf/rd/xg/zfrdxgfctkb-ey1zpqoqiaoqvv8.png"></a>  . </p><br><h3 id="effekt-polya-lda">  Eisfeldeffekt: </h3><br><p>  Der Shader ist oben angegeben. In der Projektdatei befindet sich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ice_feedback.shader</a> und ein <em>Fragment-</em> Shader f√ºr die Ebene, der mithilfe einer einfachen Tiefenschleife die Illusion der Tiefe des Bodens erzeugt: </p><br><pre> <code class="plaintext hljs">while(current_depth &lt; depth){ ofs -= delta; depth = textureLod(texture_depth, ofs,0.0).r; current_depth += layer_depth; }</code> </pre> <br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/73beIUq.mp4" type="video/mp4"></video></div></div></div><br><h3 id="effekt-polya-chastic">  Partikelfeldeffekt: </h3><br><p>  Der Shader ist <em>der gleiche</em> , die <code>y</code> Koordinate (H√∂he) der Partikel entsprechend der Helligkeit der Farbe des Rahmenpuffers vom Shader, die Farbe auch entsprechend der Farbhelligkeit ( <em>ich habe den Partikel-Shader nicht separat</em> <code>floor/visible_/floor3/grass/grass</code> <em>, er befindet sich im Projekt im Objekt</em> <code>floor/visible_/floor3/grass/grass</code> ). </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/8zo6Lf9.mp4" type="video/mp4"></video></div></div></div><br><h3 id="dinamicheskaya-animaciya-flaga">  Dynamische Flaggenanimation: </h3><br><p>  Godot hat <em>SoftBody zum Animieren der Fabric, aber es ist eine CPU,</em> also habe ich sie nicht verwendet.  Ich habe einen vorgefertigten Code- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zum Original verwendet</a> .  Diese Flagge wird von drei B√§llen an der Seite gedr√ºckt und der Kopf des Charakters ist der vierte Ball. <br>  Die Logik des <em>Multipass-</em> Shaders, wie im obigen Beispiel, mit nur drei Achsen, dem <em>Multipass-</em> Code des Shader (1) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">flag.shader</a> , der Shader, der das Flag zeichnet, zeigt nur die Textur und √§ndert die Geometrie des plane (2) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">flag.shader</a> . </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/dVtroFS.mp4" type="video/mp4"></video></div></div></div><br><h3 id="poyavlenie-figur">  Aussehen der Figuren: </h3><br><p>  <strong>Formen haben kein UV, daher triplanares Textur-Mapping f√ºr das Textur-Mapping und Dreieck</strong> ( <em>Vertex</em> ), alles Code in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">cchess.shader</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/rTiCkef.mp4" type="video/mp4"></video></div></div></div><br><h3 id="animaciya-hitbox-a-krasnaya-ramka-kotoryy-nanosit-uron-personazhu-igrokai-sled-ot-ramki-chasticy-ochevidno">  Animation einer <em>Hitbox</em> (roter Rahmen), die dem Charakter des Spielers Schaden zuf√ºgt, und einer Spur aus dem Rahmen (Partikel sind offensichtlich): </h3><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterst√ºtzt kein HTML5-Video. <source src="https://i.imgur.com/r4pEvvw.mp4" type="video/mp4"></video></div></div></div><br><p>  Es wird nur der bereits angegebene Shader <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gglow.shader verwendet</a> . <br>  PS <em>Die gleiche Animation in einem Shader erstellt</em> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zu Shadertoy</a> </p><br><p>  <em>F√ºr Partikel werden nur zwei Texturen verwendet, ein Kreis und ein Quadrat.</em> </p><br><hr><br><h1 id="4-pro-godot-i-ego-osobennosti">  4. √úber Godot und seine Merkmale </h1><br><p>  <strong>Godot ist sehr gut und einfach (nicht f√ºr Anf√§nger).</strong>  <strong>Ich mochte Godot wirklich wegen seiner Eigenschaften.</strong> </p><br><p>  <em>Es gibt viele</em> Fehler, die Godot-Dokumentation ist unvollst√§ndig und manchmal aufgrund von Fehlern irref√ºhrend und zeigt keine kritischen Punkte an (f√ºr mich nicht offensichtlich), um zu verstehen, welche Godot den gesamten Quellcode viele Male neu lesen musste (der Code ist nicht gro√ü und gut geschrieben). <br>  Dies ist nur mein Eindruck, es kann falsch sein, ich m√∂chte niemanden irref√ºhren. </p><br><p>  Ich betone, dass selbst sehr kritische Fehler in Godot mit minimalem Aufwand durch GDScript in Godot selbst umgangen werden k√∂nnen.  Was ist zweifellos ein gro√ües Plus </p><br><p>  Ich stelle auch fest, dass Godot <em>in keiner Weise vor</em> den Besonderheiten externer Faktoren wie WASM in Browsern, ANGLE-Einschr√§nkungen, starken Einschr√§nkungen der Browser selbst und nat√ºrlich Dutzenden von Fehlern in Grafikkartentreibern <em>gesch√ºtzt</em> ist. All dies muss manuell umgangen werden. </p><br><p>  <strong>Verz√∂gerungen</strong> - es gibt ein gro√ües Problem mit dem Management, es ist 100% auf der Godot-Seite, ich habe es nicht behoben.  (Kontrollkeile w√§hrend der Kompilierung von FPS-Shadern und Verz√∂gerungen (z. B. in einem Browser)), es gibt auch andere Protokolle, die sich auf die Funktionen des 3D-Renderings in Godot beziehen. Einige davon habe ich umgeleitet, aber sie existieren noch / k√∂nnen es sein. </p><br><hr><br><h1 id="5-webgl2-rabotaet-tolko-v-linux">  5. WebGL2 funktioniert <del>  Nur Linux </del></h1><br><p>  <strong>Starten Sie das</strong> Spiel nicht √ºber den Link, wenn Sie Windows haben.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zur WebGL2 / WASM-Version.</a> </p><br><p>  <strong>Informationsupdate</strong> : Die WebGL-Version wurde in Windows 10 (nur in Firefox mit deaktiviertem ANGLE) auf einem superstarken PC (i9 / 16-GB-RAM / 8-GB-Video) gestartet, obwohl der Boden (aus irgendeinem Grund) nicht mehr gerendert wurde und der Firefox Speicher verliert (&gt; 16 GB) ) in f√ºnf Minuten ... es ist besser, nicht auf eigene Gefahr und Gefahr zu rennen </p><br><p>  Funktioniert nur unter <em>Chrome 76+ und Firefox</em> (Linux). </p><br><p><del>  Ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fehlerbericht (Link) wurde</a> √ºber Windows <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gesendet</a> . Wenn dies ein Browserfehler ist, reagiert Google nach 2 Monaten.  <em>Aber anscheinend ist dies ein Fehler in ANGLE, und dies wird mit ziemlicher Sicherheit nicht behoben.</em> </del><br>  Der Bugreport ist bereits geschlossen und ANGLE wird ebenfalls nicht bearbeitet.  <strong>Unter Windows funktioniert der Browser also nicht.</strong> </p><br><p>  Im Verlauf dieses Projekts wurde ein Fehler in Chrome behoben, aufgrund dessen Transformations-Feedback und meine letzte Demo <em>(√ºber dem Video mit einem Tag / Nacht-Panorama)</em> , die zuvor nicht funktioniert hatte, zu funktionieren begannen. </p><br><hr><br><h1 id="6-multipleer">  6. Multiplayer </h1><br><p>  Multiplayer hinzugef√ºgt, ausschlie√ülich zu Testzwecken (und Beispiel-Multiplayer in Godot).  Quellcode und Bin√§rversionen neben der Hauptversion auf dem Github und Juckreiz (Links am Anfang). </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Xc1GsZnVa9c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Wenn Godot 3.2 herauskommt, werde ich auch WebRTC f√ºr den Test hinzuf√ºgen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467779/">https://habr.com/ru/post/de467779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467765/index.html">Wi-Fi und viele andere Abk√ºrzungen. So erhalten Sie Daten auf Wi-Fi-Knoten in einer Android-Anwendung und schwellen nicht an</a></li>
<li><a href="../de467767/index.html">Weitere Annehmlichkeiten f√ºr JSON-RPC-Follower</a></li>
<li><a href="../de467769/index.html">Auf einer einzigen Bundesinformationsquelle, die Bev√∂lkerungsinformationen enth√§lt</a></li>
<li><a href="../de467773/index.html">Beschaffung ungew√∂hnlicher Ressourcen und Erstkontakt</a></li>
<li><a href="../de467775/index.html">5 Mythen √ºber das Gesch√§ft: Warum der Kunde falsch liegt und wie man Apple √ºbertrifft</a></li>
<li><a href="../de467781/index.html">C ++ - Kurs im CS Center, erster Teil</a></li>
<li><a href="../de467783/index.html">Wie kann ein IT-Profi in der Schweiz arbeiten und leben?</a></li>
<li><a href="../de467785/index.html">So optimieren Sie Pandas bei der Arbeit mit gro√üen Datenmengen (Aufsatz)</a></li>
<li><a href="../de467787/index.html">So richten Sie die Adressensuche nach Koordinaten ein (und wo erhalten Sie das erforderliche Verzeichnis)</a></li>
<li><a href="../de467789/index.html">Java 13 ist gerade eingetroffen. ZGC hat begonnen, Speicher gemeinsam zu nutzen, CDS selbst erinnert sich an Klassen und andere technische Wunder</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>