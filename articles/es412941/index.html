<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚Ü©Ô∏è üññüèΩ üëáüèæ Conferencia de Europa del Este de Java 2018: informes e impresiones üå¨Ô∏è üçå üí∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Publicado por Igor Masternaya, Desarrollador Senior, L√≠der de la Comunidad DataArt Java 

 Del 18 al 19 de mayo, JEEonf se celebr√≥ en Kiev, uno de los...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Conferencia de Europa del Este de Java 2018: informes e impresiones</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/412941/"><img src="https://habrastorage.org/webt/yg/-q/5j/yg-q5j1vqjcwmaqigggiuqll1yk.jpeg"><br><br>  <i>Publicado por Igor Masternaya, Desarrollador Senior, L√≠der de la Comunidad DataArt Java</i> <br><br>  Del 18 al 19 de mayo, JEEonf se celebr√≥ en Kiev, uno de los eventos m√°s esperados para toda la comunidad Java de Europa del Este.  DataArt se asoci√≥ con la conferencia.  Los oradores de todo el mundo hablaron en cuatro etapas: Volker Simonis, Representante de SAP en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JCP</a> y colaborador de OpenJDK, J√ºrgen H√∂ller, Ingeniero Jefe Pivotal, padre del querido Spring Framework, Klaus Ibsen, creador de Apache Camel, y Hugh McKee, evangelista en Lightbend. <br><br>  El horario estaba muy ocupado: en dos d√≠as m√°s de 50 actuaciones, 45 minutos cada una.  Descanso de 10 minutos y ejecutar un nuevo informe.  Ver√° todos los videos cuando aparezcan en la red.  Por lo tanto, describir√© brevemente los informes que encontr√© m√°s interesantes y que visit√© personalmente. <a name="habracut"></a><br><br><h3>  15 a√±os de primavera </h3><br>  La conferencia fue inaugurada por J√ºrgen H√∂ller.  Habl√≥ sobre los 15 a√±os (!) Historia del Spring Framework, desde las configuraciones XML "favoritas" en la versi√≥n 0.9 hasta el reactivo Spring WebFlux, que surgi√≥ de proyectos de investigaci√≥n influenciados por el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Manifiesto Reactivo</a> .  J√ºrgen habl√≥ sobre la coexistencia de Spring MVC y Spring WebFlux en Spring WEB, explic√≥ por qu√© decidieron no integrarlos en uno.  El punto es que la abstracci√≥n principal de Spring MVC es Servlet API 3.0 y bloqueo de E / S, mientras que Spring WebFlux usa la abstracci√≥n de flujos reactivos y E / S sin bloqueo.  Puede ejecutar su servicio en SpringWebFlux en cualquier servidor que admita IO sin bloqueo: Netty, nuevas versiones de Tomcat (&gt; 8.5), Jetty.  Crear controladores reactivos de WebFlux no es muy diferente de crearlos usando Spring MVC, pero todav√≠a hay diferencias.  Al procesar una solicitud de usuario, el controlador reactivo no la procesa en el sentido habitual, sino que crea una canalizaci√≥n para procesar la solicitud.  Dispatcher llama al m√©todo controlador, que crea una canalizaci√≥n e inmediatamente lo proporciona como una secuencia de editor.  La secuencia del editor en Reactive Spring se presenta como dos abstracciones: Flux / Mono.  Flux devuelve un flujo de objetos, mientras que Mono siempre devuelve un √∫nico objeto. <br><br>  J√ºrgen tambi√©n mencion√≥ la conveniencia de usar el estilo Java 8 al trabajar con Spring 5.0 y prometi√≥ un candidato de lanzamiento Spring 5.1 en julio de 2018 y un lanzamiento en septiembre, que admitir√° Java 11 y trabajar√° en el ajuste fino de las nuevas caracter√≠sticas de Spring 5.0 <br><br><h3>  Integraci√≥n Python / Java </h3><br>  Hubo muchos informes y fue dif√≠cil elegir el m√°s interesante en el siguiente espacio.  Las descripciones fueron igualmente interesantes, as√≠ que confi√© en mis instintos y decid√≠ escuchar a Tamas Rozman, el vicepresidente de BlackRock de Hungr√≠a.  Pero ser√≠a mejor si volviera a escuchar sobre Sourcing de eventos y CQRS.  A juzgar por la descripci√≥n, la compa√±√≠a se dedica a la ciencia de datos para un gran fondo de inversi√≥n.  El prop√≥sito del informe era mostrar c√≥mo crearon un sistema escalable y estable, igualmente conveniente para los analistas de datos con su Python, y para los desarrolladores de Java del sistema principal.  Sin embargo, me pareci√≥ dudoso que el sistema construido realmente resultara conveniente.  Para hacerse amigo de Python y Java, a los ingenieros de BlackRock se les ocurri√≥ la idea de iniciar un int√©rprete de Python como un proceso desde una aplicaci√≥n Java.  Llegaron a esto por varias razones: <br><ul><li>  Jython (Python en la JVM) no se ajustaba debido a la base de c√≥digo obsoleta 2.7 frente a CPython 3.6. </li><li>  Consideraron la opci√≥n de reescribir la l√≥gica de Data Science en Java como un proceso demasiado largo. </li><li>  Apache Spark decidi√≥ no tomarlo porque, como explic√≥ el orador, no se pueden mezclar cargas de trabajo escritas en Java y Python.  Aunque no est√° claro por qu√© UDF y UDFA no encajaban [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2</a> ].  Adem√°s, Spark no encajaba, porque ya ten√≠an alg√∫n tipo de marco de trabajo, y realmente no quer√≠an presentar uno nuevo.  Y result√≥ que tampoco tienen Big Data, y todo el procesamiento se reduce a estad√≠sticas sobre archivos pat√©ticos de 100 MB. </li></ul><br><br>  La comunicaci√≥n de Java con el proceso de Python se organiz√≥ utilizando archivos asignados en memoria (un archivo se usa como un archivo de datos de entrada) y comandos (el segundo archivo es la salida del proceso de Python).  Por lo tanto, la comunicaci√≥n era algo en forma de: <br><br><pre>  Java: calcExr |  1 + javaFunc (sqrt (36))
 Python: 1 + javaFunct | 6
 Java: 1 + √©xito | 64
 Python: √©xito |  65 </pre><br><br>  Los principales problemas de dicha integraci√≥n, Tamas llama la sobrecarga durante la serializaci√≥n y deserializaci√≥n de los par√°metros de entrada / salida. <br><br><img src="https://habrastorage.org/webt/zz/l9/vt/zzl9vtuqxaff5kn7rvdqtpgsbey.jpeg"><br><br><h3>  Java 10 App CDS </h3><br>  Despu√©s de una presentaci√≥n sobre las complejidades de ejecutar Python, realmente quer√≠a escuchar algo profundamente t√©cnico del mundo de Java.  As√≠ que fui al informe de Volker Simonis, en el que habl√≥ sobre la funci√≥n de intercambio de datos de la clase de aplicaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Java 10+</a> .  En el mundo moderno basado en microservicios en Docker, la capacidad de compartir Java Codecache y Metaspace acelera el inicio de la aplicaci√≥n y ahorra memoria.  La imagen muestra los resultados del lanzamiento de tomates dockerizados con un archivo compartido / compartido de clases de Tomcat.  Como puede ver, para el segundo proceso, algunas p√°ginas en la memoria ya est√°n marcadas como shared_clean, lo que significa que el proceso actual y al menos un proceso (el segundo tomcat en ejecuci√≥n) se refiere a ellas. <br><br><img src="https://habrastorage.org/webt/4b/wf/hc/4bwfhctgsicnp_ulp-r0fo08opm.png"><br><br>  Los detalles sobre c√≥mo jugar con CDS en OpenJDK 10 se pueden encontrar en: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">App CDS</a> .  Adem√°s de dividir las clases de aplicaci√≥n entre procesos, en el futuro se planea compartir cadenas internas en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JEP-250</a> . <br>  Limitaciones clave de AppCDS: <br><br>  No funciona con clases de hasta 1.5. <br><ul><li>  No puede usar clases cargadas desde archivos (solo archivos .jar). </li><li>  No se pueden usar las clases modificadas por el cargador de clases. </li><li>  Las clases cargadas por m√∫ltiples cargadores de clases se pueden reutilizar solo una vez. </li><li>  La reescritura de c√≥digo de bytes no funciona, lo que puede provocar ca√≠das de rendimiento de hasta el 2%.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JDK-8074345</a> </li></ul><br><br><img src="https://habrastorage.org/webt/ql/id/ll/qlidll3gw8_b91uclq8onav6s3g.jpeg"><br><br><h3>  Canal de procesamiento de lenguaje natural con Apache Spark </h3><br>  El informe sobre PNL y Apache Spark fue presentado por Vitaliy Kotlyarenko, ingeniero de Grammarly.  Vitaliy mostr√≥ c√≥mo prototipo Grammarly NLP-Jobs en Apache Zeppelin.  Un ejemplo fue la construcci√≥n de una tuber√≠a simple para el modelado tem√°tico basado en el algoritmo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">LDA</a> del archivo de Internet de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">rastreo com√∫n</a> .  Los resultados del modelado de temas se usaron para filtrar sitios con contenido inapropiado como un ejemplo de la funci√≥n de control parental.  Para crear la tuber√≠a, utilizamos los scripts Terraform y el cl√∫ster <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AWS EMR</a> Spark, que le permite implementar Spark Cluster con YARN en Amazon.  Esquem√°ticamente, la tuber√≠a se ve as√≠: <br><br><img src="https://habrastorage.org/webt/p6/m7/wp/p6m7wpmj43z9dyesvyjfptjf3z4.png"><br><br>  El prop√≥sito del informe era mostrar que el uso de marcos modernos para hacer un prototipo para tareas de ML es bastante simple, sin embargo, al usar bibliotecas est√°ndar, a√∫n se encuentra con dificultades.  Por ejemplo: <br><ul><li>  En el primer paso de leer archivos WARC usando la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HadoopInputFormat</a> , las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IllegalStateExceptions a</a> veces <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">fallaban</a> debido a encabezados de archivo incorrectos, la biblioteca tuvo que ser reescrita y se omitieron los archivos incorrectos. </li><li>  Las dependencias de guayaba, la biblioteca de definici√≥n de lenguaje, chocaron con las dependencias que Spark arrastra sobre s√≠.  Java 8 ayud√≥, con la ayuda de la cual fue posible lanzar dependencias de guayaba en la biblioteca utilizada. </li></ul><br><br>  Durante la demostraci√≥n, monitoreamos la ejecuci√≥n del trabajo utilizando la interfaz de usuario est√°ndar de Spark y el subsistema de monitoreo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ganglia</a> , que est√° disponible autom√°ticamente cuando se implementa en AWS EMR.  El autor se centr√≥ en la distribuci√≥n de carga del servidor del mapa de calor, que muestra la distribuci√≥n de carga entre los nodos en el cl√∫ster, y dio consejos generales sobre c√≥mo optimizar el trabajo de Spark Job: aumentar el n√∫mero de particiones, optimizar la serializaci√≥n de datos, analizar los registros de GC.  Puede leer m√°s sobre la optimizaci√≥n de Spark Jobs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Los archivos de origen para la demostraci√≥n se pueden encontrar en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github del</a> autor del informe. <br><br><h3>  Graal, Truffle, SubstrateVM y otras ventajas: ¬øqu√© son y por qu√© las necesita? </h3><br>  Lo m√°s esperado para m√≠ fue un informe de Oleg Chirukhin de JUG.ru.  √âl le dijo c√≥mo optimizar el c√≥digo terminado usando el Grial.  ¬øQu√© es el grial?  The Grail es una marca de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Oracle Labs</a> que combina el compilador JIT (justo a tiempo), el marco para escribir lenguajes DSL - Truffle - y el JVM especial ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SubstrateVM</a> ) - una m√°quina virtual universal <a href="">de mundo cerrado</a> para la que puede escribir en JavaScript, Ruby, Python, Java, Scala.  El informe se centr√≥ en el compilador JIT y sus pruebas en producci√≥n. <br><br>  Primero, recuerde el proceso de ejecuci√≥n de c√≥digo por la m√°quina Java y tenga en cuenta que Java ya tiene dos compiladores: C1 (compilador del cliente) y C2 (compilador del servidor).  Grail se puede usar como compilador C2. <br><br><img src="https://habrastorage.org/webt/3k/qk/lt/3kqklt1q02gtnej89a0wa2ttou0.png"><br><br>  Cuando se le pregunt√≥ por qu√© necesit√°bamos otro compilador, uno de los empleados de Oracle Labs, el Dr. Chris Seaton, respondi√≥ muy bien en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Comprender c√≥mo funciona Graal</a> .  En resumen, la idea original del proyecto Graal, as√≠ como del proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Metropolis</a> , es reescribir partes del c√≥digo JVM escrito en C ++ en Java.  Esto permitir√° en el futuro complementar convenientemente el c√≥digo.  Por ejemplo, una de las optimizaciones, P <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Artial Escape Analysis</a> , ya est√° en el Grial, pero no en el Hotspot, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">porque expandir el c√≥digo del Grial es mucho m√°s f√°cil que el c√≥digo C2</a> . <br><br>  Eso suena genial, pero ¬øc√≥mo funcionar√° esto en la pr√°ctica en mi proyecto?  Grial es adecuado para proyectos: <br><br><ul><li>  Que ensucia mucho, creando muchos objetos peque√±os. </li><li>  Escrito al estilo de Java 8, con un mont√≥n de secuencias y lambdas. </li><li>  Usando diferentes lenguajes: Ruby, Java, R. </li></ul><br><br>  Uno de los primeros en producci√≥n, el Grial comenz√≥ a usarse en Twitter.  Puede leer m√°s sobre esto en una entrevista con Christian Talinger, publicada en Habr√© ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">entrevista_1</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">entrevista_2</a> ).  All√≠, explica que al reemplazar C2 con Graal, Twitter comenz√≥ a ahorrar alrededor del 8% de la utilizaci√≥n de la CPU, lo cual es bastante bueno teniendo en cuenta el tama√±o de la organizaci√≥n. <br><br>  En la conferencia, tambi√©n pudimos verificar la velocidad de Graal al lanzar uno de los puntos de referencia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Scala</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Scala DaCapo</a> .  Como resultado, en Graal, el punto de referencia pas√≥ en ~ 7000 ms, y en una JVM normal en ~ 14000 ms.  Puede ver por qu√© sucedi√≥ esto mirando las pruebas de gclog.  El n√∫mero de fallas de asignaci√≥n cuando se usa Graal es significativamente menor que el de Hotspot.  Sin embargo, a√∫n no puede decir que el Grial ser√° la soluci√≥n a los problemas de rendimiento de su aplicaci√≥n Java.  Oleg tambi√©n mostr√≥ una historia de fracaso en su informe, comparando el trabajo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Apache Ignite</a> bajo el Grial y sin √©l, no hubo un cambio notable en el rendimiento. <br><br><img src="https://habrastorage.org/webt/wg/a9/9i/wga99iykqcg8ubellwz6_upyy9o.jpeg"><br><br><h3>  Dise√±o de microservicios tolerantes a fallas </h3><br>  Orkhan Gasimov ley√≥ otro informe sobre la arquitectura de microservicios a prueba de fallas de AppsFlyer.  Introdujo patrones de dise√±o populares para crear aplicaciones distribuidas.  Es posible que conozcamos muchos de ellos, pero caminar y recordar cada uno de ellos no le har√° ning√∫n da√±o. <br><br>  Los principales problemas de tolerancia a fallas de los servicios con los cuales los patrones descritos en el informe est√°n llamados a combatir son: red, cargas m√°ximas, mecanismos RPC de comunicaci√≥n entre servicios. <br>  Para resolver problemas con la red, cuando uno de los servicios ya no est√° disponible, necesitamos la capacidad de reemplazarlo r√°pidamente por otro igual.  En la pr√°ctica, esto se puede lograr con varias instancias del mismo servicio y una descripci√≥n de rutas alternativas a estas instancias, que es un patr√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descubrimiento de servicio</a> .  Participar en los servicios de <b>heartbeat</b> y registrar nuevos servicios ser√° una instancia separada: Service Registry.  Es habitual utilizar el conocido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Zookeeper</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥nsul</a> como Registro de Servicio.  Que, a su vez, tambi√©n tienen una naturaleza distribuida y soporte para la tolerancia a fallas. <br><br>  Una vez resueltos los problemas con la red, pasamos al problema de las cargas m√°ximas cuando algunos servicios est√°n bajo carga y procesamos las solicitudes mucho m√°s lentamente que el modo normal.  Para resolverlo, puede usar el patr√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Autoescalado</a> .  Asumir√° no solo la tarea de escalar autom√°ticamente los servicios altamente cargados, sino que tambi√©n detendr√° las instancias despu√©s del per√≠odo de carga m√°xima. <br><br>  El cap√≠tulo final del informe del autor fue una descripci√≥n de posibles problemas de comunicaci√≥n interna entre servicios RPC.  Urahan prest√≥ especial atenci√≥n a la tesis "El usuario no debe esperar un mensaje de error durante mucho tiempo".  Tal situaci√≥n puede surgir si su solicitud es procesada por la cadena de servicio y el problema est√° al final de la cadena: en consecuencia, el usuario puede esperar a que cada uno de los servicios de la cadena procese la solicitud y solo en la √∫ltima etapa recibe un error.  Lo peor de todo, si el servicio final est√° sobrecargado, y despu√©s de una larga espera, el cliente recibir√° un HTTP-ERROR sin sentido: 500. <br><br>  Para combatir tales situaciones, puede usar <b>Timeout</b> s, sin embargo, las solicitudes que a√∫n se pueden procesar correctamente pueden caer en el tiempo de espera.  Para hacer esto, la l√≥gica de tiempo de espera puede ser complicada y se puede agregar un valor de umbral especial para el n√∫mero de errores de servicio por intervalo de tiempo.  Cuando el n√∫mero de errores excede el valor umbral, entendemos que el servicio est√° bajo carga y consideramos que no est√° disponible, lo que le da el tiempo necesario para hacer frente a las tareas actuales.  Este enfoque describe el patr√≥n del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">disyuntor</a> .  Tambi√©n puede usar CircuitBreaker.html "&gt; Circuit Beaker como una m√©trica adicional para el monitoreo, que le permitir√° responder r√°pidamente a posibles problemas e identificar claramente qu√© cadenas de servicio los est√°n experimentando. Para hacer esto, cada llamada de servicio debe estar envuelta en un disyuntor. <br><br>  Tambi√©n en el informe, el autor record√≥ el patr√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">redundancia N-Modular</a> , dise√±ado para "procesar solicitudes m√°s r√°pido si es posible", y proporcion√≥ un hermoso ejemplo de su uso para validar la direcci√≥n de un cliente.  La solicitud en su sistema a trav√©s del cach√© de direcciones se envi√≥ de inmediato a varios proveedores de Geo Map, como resultado de lo cual gan√≥ la respuesta m√°s r√°pida. <br><br>  Adem√°s de los patrones descritos, se mencionaron los siguientes: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Patr√≥n de <b>ruta r√°pida</b></a> , que se puede aplicar, por ejemplo, al almacenar en cach√© los resultados de la consulta.  Entonces el acceso al cach√© es una ruta r√°pida. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Patr√≥n de <b>Kernel de error</b></a> : un patr√≥n del mundo de Akka que implica dividir una tarea en subtareas y delegar subtareas a actores intermedios.  De esta manera, se logra la flexibilidad de procesar errores de ejecuci√≥n de subtareas. </li><li>  <b>Instance Healer</b> , que supone la existencia de un servicio especial: un supervisor que administra otros servicios y responde a los cambios en su estado.  Por ejemplo, en caso de errores en el servicio, el supervisor puede reiniciar el servicio problem√°tico. </li></ul><br><br><img src="https://habrastorage.org/webt/am/ik/kr/amikkrgoxhuaajndqk1zgfhv12u.jpeg"><br><br><h3>  Abastecimiento de eventos en cl√∫ster y CQRS con Akka y Java </h3><br>  El √∫ltimo informe que quiero llamar su atenci√≥n fue le√≠do por uno de los evangelistas y arquitectos de Lightbend, Hugh McKee.  Lightbend (anteriormente Typesafe) es algo as√≠ como Oracle, pero para el lenguaje Scala.  La compa√±√≠a tambi√©n est√° desarrollando activamente el marco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Akka.io.</a>  En un informe, Hugh habl√≥ sobre la implementaci√≥n del popular <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enfoque CQRS</a> (Comandos de Responsabilidad de Consulta de Comando / SEGREGACI√ìN) en el marco de Akka.  Esquem√°ticamente, la arquitectura del sistema CQRS se ve as√≠: <br><br><img src="https://habrastorage.org/webt/n-/jy/in/n-jyin0xfhmrsqxlixxwh478ot0.png"><br><br>  Hugh tom√≥ un prototipo de banco como ejemplo de un sistema de trabajo.  Un cliente en la arquitectura CQRS realiza dos operaciones: consulta, comando.  Cada equipo (por ejemplo, una transacci√≥n bancaria que transfiere dinero de una cuenta a otra) genera un evento (un hecho consumado) que se registrar√° en EventStore (por ejemplo: Cassandra).  La agregaci√≥n de la cadena (depositar dinero en una cuenta, transferir de una cuenta a otra, retirar en un cajero autom√°tico) de eventos forma el estado actual del cliente, su saldo de dinero en la cuenta.  Las solicitudes para el estado actual van a un repositorio separado, una instant√°nea del repositorio de eventos, ya que no tiene sentido mantener un historial completo de una cuenta bancaria.  Es suficiente actualizar peri√≥dicamente el estado emitido para cada usuario. <br><br>  Este enfoque permite la recuperaci√≥n autom√°tica cuando se producen errores: para esto necesitamos obtener el √∫ltimo reparto del estado del usuario y aplicarle todos los eventos que ocurrieron antes de que ocurriera el error.  Debido a la presencia de dos almacenes, la arquitectura CQRS tolera bien las cargas pico (picos) emergentes.  Una gran cantidad de eventos cargar√° el Almac√©n de eventos, pero no afectar√° al Almac√©n de lectura, y los usuarios a√∫n podr√°n responder consultas a la base de datos. <br><br>  Volvamos a la creaci√≥n de prototipos del sistema bancario en Akka y CQRS.  Cada cliente del banco / cuenta / posible equipo en el sistema estar√° representado por un (!) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Actor</a> .  Un banco grande puede soportar cientos de miles de cuentas, y esto no ser√° un problema para Akka.  El marco listo para usar admite la agrupaci√≥n en cl√∫ster y se puede ejecutar en cientos de JVM.  Si una de las m√°quinas en el cl√∫ster falla, Akka proporciona mecanismos especiales que responden autom√°ticamente a tales situaciones: en nuestro caso, el actor del cliente se puede recrear nuevamente en cualquier m√°quina disponible en el cl√∫ster, y su estado se volver√° a leer desde el repositorio. <br><br>  No se crea un hilo separado para un actor; esto permite admitir decenas de miles de actores dentro de una sola JVM.  Al mismo tiempo, el actor garantiza que cada solicitud se procesar√° por separado (!) En el orden de recepci√≥n de las solicitudes.  Esta garant√≠a elimina autom√°ticamente las posibles condiciones de carrera al procesar las solicitudes.  Puede comprender el prototipo del sistema con m√°s detalle abriendo su c√≥digo utilizando los enlaces en GitHub.  Cada subproyecto muestra la implementaci√≥n de las etapas m√°s complejas de la construcci√≥n de un prototipo: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La agrupaci√≥n de actores distribuidos akka</a> es un ejemplo simple de la creaci√≥n de un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">grupo Akka '</a> a. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Akka cluster singleton</a> muestra c√≥mo implementar un patr√≥n de singleton en un entorno distribuido de Akka. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sharding distribuido de entidades akka cluster sharding</a> es un ejemplo de gesti√≥n de la distribuci√≥n de entidades en un cluster y el enrutamiento de solicitudes de clientes. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CQRS - Escribir persistencia akka lateral</a> - registrar eventos en el repositorio. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CQRS - Consulta de persistencia de lado akka de lectura</a> - procesamiento de solicitudes de clientes </li></ul>  avispas <br><br>  Los registros de todos los informes aparecer√°n en l√≠nea en unas pocas semanas.  Espero que este art√≠culo te ayude a determinar el orden de visualizaci√≥n, especialmente porque creo que vale la pena ver las actuaciones. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es412941/">https://habr.com/ru/post/es412941/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es412927/index.html">Qu√© ver el fin de semana: 5 pel√≠culas sobre hackers</a></li>
<li><a href="../es412929/index.html">Fintech digest: las leyes de criptomoneda aprobadas por la DG que no son consistentes con los expertos, las soluciones fintech se est√°n volviendo m√°s populares</a></li>
<li><a href="../es412933/index.html">Tesla abri√≥ parcialmente el c√≥digo fuente del Modelo S / X 2018.12</a></li>
<li><a href="../es412937/index.html">Hack de demostraci√≥n: PenTest Show mostrar√° lo f√°cil que es hackear la red de la oficina y los sistemas de seguridad para robar cualquier cosa</a></li>
<li><a href="../es412939/index.html">Probadores contra pruebas</a></li>
<li><a href="../es412945/index.html">Gerentes de dependencia</a></li>
<li><a href="../es412947/index.html">Pruebas de carga en la nube de Azure. ¬øC√≥mo probar una gran tienda en l√≠nea en condiciones cercanas a la real?</a></li>
<li><a href="../es412949/index.html">Los astr√≥logos anuncian la semana de desarrollo de iOS en Avito</a></li>
<li><a href="../es412951/index.html">DotVVM - Comunicaci√≥n entre cliente y servidor</a></li>
<li><a href="../es412953/index.html">Calibraci√≥n de c√°mara Intel RealSense d435 con OpenCV2 y ROS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>