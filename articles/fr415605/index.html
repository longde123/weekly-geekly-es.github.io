<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤵 🐘 🉑 Comment nous avons économisé le traitement des cartes avec Exadata 🧑🏽‍🤝‍🧑🏼 ✌🏾 🌐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au cours des 10 dernières années, VTB a connu une augmentation massive de la charge de calcul. Chaque année, il a augmenté une fois et demie et le vol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons économisé le traitement des cartes avec Exadata</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/415605/">  Au cours des 10 dernières années, VTB a connu une augmentation massive de la charge de calcul.  Chaque année, il a augmenté une fois et demie et le volume des titres de compétences - deux.  Les services de support ont fait de gros efforts, mais il n'a pas été facile de suivre ce rythme: les plans de requête s'éloignaient, l'espace disque s'épuisait, les mises à jour du code d'application consommaient toutes les ressources.  Dans cet article, nous vous montrerons comment résoudre le problème sans dépenser beaucoup sur un autre système IBM p. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a55/f47/8f9/a55f478f97c84c3363d6d9d206c78321.png"><br><a name="habracut"></a><br>  En 2013, le traitement des cartes, alors encore banque VTB24, était situé sur l'un des serveurs les plus puissants de l'époque - IBM System p.  Cela a été complété par des répliques pour différents rapports.  Les répliques de rapports reposaient sur des équipements supplémentaires: une base de données mise à jour tous les soirs pour les rapports quotidiens, des outils pour la réplique active d'Oracle Active Data Guard pour les rapports opérationnels et une base de données pour les rapports de la Banque centrale, que nous mettons à jour mensuellement. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/823/78d/d62/82378dd621f5bbda38616763295770db.png"><br><br>  Nous avons activement personnalisé la fonctionnalité des systèmes - la majeure partie du code d'application était occupée par des améliorations internes.  Dans le même temps, les données ont augmenté très rapidement.  En conséquence, le plan de requête pour quatre bases se détériorait régulièrement.  Les systèmes avant étaient lents.  D'un point de vue technique, il y avait une autre difficulté: la charge OLTP des transactions par carte était mélangée avec la charge DWH / DSS de fonctionnalités et de rapports personnalisés. <br><br>  Le moyen standard de sortir de cette situation est de vider les ressources et de basculer vers un sous-système de stockage de données plus raide.  Nous avons proposé une option plus intéressante - nous avons pris pour rapporter des répliques deux complexes matériels et logiciels Oracle Exadata optimisés pour le fonctionnement de la base de données. <br><br>  Le complexe de traitement a été divisé en zones «chaudes» et «chaudes».  La zone chaude n'a bougé nulle part avec IBM System p et seule sa base de données y a été conservée.  La zone «chaude» était une copie de la base de données principale sur Exadata.  Voici tous les rapports et fonctionnalités personnalisées.  Données répliquées à l'aide d'Oracle GoldenGate. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d73/b61/31b/d73b6131b164b4e2d9f564a683ff5098.png"><br><br>  Nous avons effectué des tests de répliques sur Exadata: en moyenne, les rapports sont devenus cinq fois plus rapides grâce à l'architecture et aux fonctionnalités du logiciel Oracle Exadata Storage - analyses intelligentes, index de stockage, filtres de floraison, etc.  Le temps de préparation des rapports pour la Banque centrale a été réduit d'un facteur dix, et maintenant certains rapports sont préparés en moins d'une heure.  La principale chose à faire pour optimiser les requêtes lors du portage vers Exadata était de supprimer les indices qui permettaient auparavant de travailler sur l'ancienne plate-forme. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/272/74c/6d7/27274c6d76d407783d1a4f84a5e69520.png"><br><br>  Nous avons réalisé une étude de faisabilité, comparant les options pour différents paramètres avec l'extension habituelle des systèmes actuels et avec l'implication de deux complexes Exadata. <br><br><ul><li>  <i>Performance.</i>  40 000 IOPS contre 400 000 IOPS chez Exadata.  La solution Oracle est orientée vers de grandes quantités de données, l'analyse complète de la table est beaucoup plus rapide. <br></li><li> <i>Options de personnalisation.</i>  Dans la solution standard, nous ne pouvons pas changer la structure des objets sans changer la base de données productive, cela est interdit par le vendeur.  Dans Exadata, nous pouvons supprimer les index inutiles, ajouter les index nécessaires et améliorer la réponse du système. <br></li><li>  <i>Mise à l'échelle.</i>  Exadata offre une augmentation linéaire de la productivité à un coût relativement inférieur. <br></li><li>  <i>Rapports.</i>  La vitesse de génération de rapports avec le complexe Exadata augmente de 5 fois et avec la mise à l'échelle des systèmes existants - de 1,5. <br></li><li>  <i>Service.</i>  L'infrastructure Oracle dispose d'un support technique unifié, d'un système de mise à jour unique pour les serveurs, les sous-systèmes de disques et l'infrastructure réseau.  Avec une mise à l'échelle normale, vous devez travailler avec différents fournisseurs - il y a plus de temps d'arrêt et tout autre inconvénient. <br></li><li>  <i>Coût.</i>  Exadata gagne ici. <br></li></ul><br>  Au début, la réplication GoldenGate s'est avérée être un point faible: dans le cas de transactions longues à la source, elle a pris du retard.  Nous avons résolu ce problème en mettant à jour et en affinant certains processus d'application.  Après cela, travailler avec Exadata ne nous a révélé que des avantages. <br><br>  Nous avons introduit des index et un partitionnement personnalisés, ce qui nous a permis d'augmenter les performances des fonctions personnalisées.  IBM ne permet pas cette optimisation. <br><br>  Le transfert des rapports analytiques vers la zone «chaude» a permis de réduire la profondeur de stockage des données historiques de la zone «chaude».  Cela a réduit le coût d'un stockage coûteux.  Géré pour accélérer l'insertion dans les index.  La suppression des données via le module de nettoyage a été filtrée au niveau GoldenGate, par conséquent, la réplique contenait de nouvelles données et toute l'histoire; <br>  Exadata utilise la compression de colonne hybride (HCC), ce qui économise considérablement l'espace disque.  Les données de plus d'un an sont compressées par la méthode d'archivage bas, de plus d'un mois par la méthode de compression avancée, les données plus récentes ne sont pas compressées pour augmenter la vitesse. <br><br>  Quant à la mise à niveau, il est plus efficace de remplacer des cellules de stockage entières dans Exadata par des cellules avec des disques plus spacieux et des processeurs puissants.  Mais vous pouvez utiliser des cellules de stockage de différentes versions dans le même système - Oracle le permet. <br>  Les rapports de traitement des cartes, mis en œuvre sur les technologies Oracle Exadata et Database, ont bien fonctionné jusqu'à présent, et de nouveaux systèmes bancaires sont construits sur le même principe. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr415605/">https://habr.com/ru/post/fr415605/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr415593/index.html">6 ans plus tard, une nouvelle version de la légendaire distribution de crash Hiren's BootCD</a></li>
<li><a href="../fr415595/index.html">Méthodes pour augmenter la rétention des joueurs en utilisant les jeux SLOT comme exemple: Partie 1</a></li>
<li><a href="../fr415597/index.html">Postfix - amavisd-new sans localhost ni serveur de messagerie d'une nouvelle façon</a></li>
<li><a href="../fr415599/index.html">L'Inde veut également obtenir de l'hélium-3</a></li>
<li><a href="../fr415601/index.html">Cluster Kubernetes HA avec containerd. Ou y a-t-il une vie sans docker?</a></li>
<li><a href="../fr415611/index.html">PKI: bibliothèques GCrypt et KSBA comme alternative à OpenSSL avec prise en charge de la cryptographie russe. Continuation</a></li>
<li><a href="../fr415613/index.html">Pourquoi vous ne devriez pas acheter de lustres à LED</a></li>
<li><a href="../fr415615/index.html">Interaction avec le serveur via l'API dans iOS sur Swift 3. Partie 2</a></li>
<li><a href="../fr415617/index.html">Utilisation de la bibliothèque FPC InternetPCools dans Delphi</a></li>
<li><a href="../fr415619/index.html">Apple et Samsung terminent une guerre des brevets de 7 ans</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>