<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüíº üïµüèª üçá Port√©e lexicale JavaScript et fermeture üë©üèæ‚Äçüíª üåù üï≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Traduction de l' environnement JavaScript, port√©e lexicale et fermetures . 

 Parlons de l'environnement. Notre immense plan√®te est une pour tous. Lor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Port√©e lexicale JavaScript et fermeture</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nix/blog/460861/"><img src="https://habrastorage.org/webt/gt/2d/tm/gt2dtmxt1qpzp2s6vulutjmsqtu.jpeg"><br><br>  <i>Traduction de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">environnement JavaScript, port√©e lexicale et fermetures</a> .</i> <br><br>  Parlons de l'environnement.  Notre immense plan√®te est une pour tous.  Lors de la construction d'une nouvelle usine chimique, il serait bon de l'isoler afin que tous les processus internes ne quittent pas ses fronti√®res.  On peut dire que l'environnement et le microclimat de cette plante sont isol√©s de l'environnement ext√©rieur. <br><br>  Le programme est organis√© de la m√™me mani√®re.  Ce que vous cr√©ez en externe - fonctions externes, instructions conditionnelles, boucles et autres blocs - est un environnement global externe. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/5d9/520/99a/5d952099ac1d37fa7363b686d4fb5706.png"><br><br>  L' <code>age</code> constant, la fonction <code>multiplier</code> et la variable de <code>result</code> trouvent dans l'environnement externe.  Ces composants ont une port√©e mondiale.  Une √©tendue est la zone dans laquelle un composant est disponible. <br><br>  Dans ce cas, <code>x</code> est une constante √† l'int√©rieur de la fonction <code>multiplier</code> .  Puisqu'il est √† l'int√©rieur d'un bloc de code, il s'agit d'une constante locale et non globale.  Il n'est visible qu'√† l'int√©rieur de la fonction, mais pas √† l'ext√©rieur - sa port√©e est locale. <br><br>  La fonction <code>multiplier</code> a un autre composant de la port√©e locale - c'est l'argument <code>num</code> .  La d√©finir est plus difficile qu'une constante ou une variable, mais elle se comporte √† peu pr√®s comme une variable locale. <br><br>  Nous n'avons pas d'acc√®s externe √† <code>x</code> - il ne semble pas exister: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8a9/b34/99d/8a9b3499d5d7e8ac27215dd0ddfbc25a.png"><br><br>  <code>console.log</code> appel√© <code>x</code> dans un environnement global dans lequel il n'est pas d√©fini.  En cons√©quence, nous avons obtenu une ReferenceError. <br><br>  Nous pouvons d√©finir <code>x</code> globalement: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/221/2ad/141/2212ad141fba03a6ae359f48c1b5e7f4.png"><br><br>  Nous avons un <code>x</code> global avec une valeur connue, mais le <code>x</code> local dans la fonction <code>multiplier</code> n'est encore visible que de l'int√©rieur.  Ces <code>x</code> ne sont connect√©s d'aucune fa√ßon - ils sont dans des environnements diff√©rents.  Malgr√© le m√™me nom, ils ne se m√©langent pas. <br><br>  Tout bloc de code entre accolades devient un environnement local.  Voici un exemple d'utilisation de <code>if</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96f/fa1/b6d/96ffa1b6d175b4a45ef36d5b4c85a53b.png"><br><br>  La m√™me chose se produit avec les boucles <code>while</code> et <code>for</code> . <br><br>  Donc local signifie invisible de l'ext√©rieur.  Autrement dit, le global est visible partout, m√™me √† l'int√©rieur des objets?  Oui! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/94d/7b9/076/94d7b907635aae8a948ef28c4bdf7bd3.png"><br><br>  La variable globale <code>a</code> a chang√© dans la fonction <code>changer</code> .  La fonction ne prend effet que lorsqu'elle est appel√©e, pas lorsqu'elle est d√©finie, donc initialement <code>a=0</code> , et lorsqu'elle est appel√©e, le <code>changer</code> prend la valeur <code>1</code> . <br><br>  Il est facile de succomber √† la tentation et de tout mettre dans une port√©e mondiale, en oubliant toutes les complexit√©s des environnements individuels - mais c'est une id√©e terrible.  Les variables globales rendent votre code extr√™mement fragile, n'importe quel √©l√©ment peut en casser un autre √† tout moment.  Par cons√©quent, n'utilisez pas la port√©e globale et gardez tout en place. <br><br><h2>  Partie II  Port√©e lexicale </h2><br>  Jetez un ≈ìil √† ce programme: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/52c/1e0/040/52c1e00405beb67af2a8d5865afd0b97.png"><br><br>  La fonction <code>multiplier</code> renvoie les r√©sultats de la multiplication <code>a</code> et <code>b</code> .  <code>a</code> donn√© en interne, mais <code>b</code> ne l' <code>b</code> pas. <br><br>  Lorsque vous essayez d'effectuer l'op√©ration de multiplication a <code>a*b</code> , JavaScript recherche les valeurs de <code>a</code> et <code>b</code> .  Il commence √† chercher √† l'int√©rieur, puis sort √† l'ext√©rieur, √©tudiant un domaine apr√®s l'autre, jusqu'√† ce qu'il trouve ce qu'il cherchait, ou ne comprenne pas qu'il est impossible de trouver. <br><br>  Par cons√©quent, dans cet exemple, JavaScript commence √† rechercher <code>a</code> √† l'int√©rieur de la zone locale - √† l'int√©rieur de la fonction <code>multiplier</code> .  Il trouve imm√©diatement la valeur et passe √† <code>b</code> .  <code>b</code> qu'il ne trouvera pas dans l'environnement local, il va donc au-del√†.  L√†, il apprend que <code>b</code> est <code>10</code> .  Donc, <code>a*b</code> devient <code>5*10</code> , puis <code>50</code> . <br><br>  Ce morceau de code pourrait √™tre √† l'int√©rieur d'une autre fonction, qui est √©galement √† l'int√©rieur d'une autre fonction.  Sans trouver <code>b</code> dans la premi√®re couche, JavaScript continuerait de rechercher de plus en plus de nouvelles et nouvelles couches. <br><br>  Veuillez noter que <code>a=7</code> n'affecte en rien le r√©sultat des calculs: la valeur de <code>a</code> √©t√© trouv√©e √† l'int√©rieur, par cons√©quent, le a externe ne joue aucun r√¥le. <br><br>  C'est ce qu'on appelle la port√©e lexicale.  La port√©e de tout composant est d√©termin√©e par l'emplacement de ce composant dans le code et les blocs imbriqu√©s ont acc√®s √† des zones externes. <br><br><h2>  Partie III.  Court-circuits </h2><br>  Les environnements et les √©tendues sont pris en charge par la plupart des langages de programmation, et ce m√©canisme permet l'introduction de fermetures.  La fermeture est intrins√®quement une fonction qui ¬´se souvient¬ª des entit√©s externes utilis√©es en interne. <br><br>  Avant de continuer, rappelons comment les fonctions sont cr√©√©es et utilis√©es: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/913/8ac/6ff/9138ac6ff7157ae64d83b27cb12ec49c.png"><br><br>  <code>f</code> est une fonction assez inutile qui renvoie toujours <code>0</code> .  L'ensemble se compose de deux parties - une constante et la fonction elle-m√™me. <br><br>  Il est important de se rappeler qu'il s'agit de composants distincts.  Le premier composant est une constante appel√©e <code>f</code> .  Sa valeur peut √™tre un nombre ou une valeur de cha√Æne.  Dans ce cas, la valeur est une fonction. <br><br>  Dans les le√ßons pr√©c√©dentes, nous avons cit√© une analogie: les constantes sont comme des feuilles de papier avec un nom d'un c√¥t√© et une valeur de l'autre.  Ainsi, <code>f</code> est un morceau de papier avec <code>f</code> √©crit d'un c√¥t√© et une description de la fonction en cours de lancement de l'autre. <br><br>  Lors de l'appel de cette fonction: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/839/cf7/58d/839cf758df8d6eda757f5453bd0a5973.png"><br><br>  Une nouvelle ¬´bo√Æte¬ª est cr√©√©e sur la base de la description d'une feuille de papier. <br><br>  Retour aux fermetures.  Voici un exemple de code. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3d/2e2/70e/c3d2e270e439532af643a25e78427321.png"><br><br>  La fonction <code>createPrinter</code> cr√©e une constante de <code>name</code> , puis une fonction appel√©e <code>printName</code> .  Les deux sont locaux √† la fonction <code>createPrinter</code> et ne sont disponibles qu'√† l'int√©rieur. <br><br>  <code>printName</code> lui-m√™me n'a <code>printName</code> composants locaux, mais il a acc√®s √† l'√©tendue o√π il est cr√©√© et √† l'environnement externe, o√π un <code>name</code> est attribu√© √† la constante. <br><br>  La fonction <code>createPrinter</code> renvoie la fonction <code>printName</code> .  Rappelez-vous que les d√©finitions de fonctions sont des descriptions de fonctions en cours d'ex√©cution; ce ne sont que des √©l√©ments de donn√©es, comme des nombres ou des cha√Ænes.  Par cons√©quent, nous pouvons retourner la d√©finition d'une fonction de la m√™me mani√®re que nous renvoyons des nombres. <br><br>  Dans la port√©e externe, nous cr√©ons la constante <code>myPrinter</code> et lui d√©finissons la valeur de retour en tant que <code>createPrinter</code> .  Une fonction est renvoy√©e, donc <code>myPrinter</code> devient √©galement une fonction.  Lorsque vous l'appelez, <code>King</code> appara√Ætra √† l'√©cran. <br><br>  Voici la chose amusante: la constante de <code>name</code> √©t√© cr√©√©e dans la fonction <code>createPrinter</code> .  La fonction a √©t√© appel√©e et ex√©cut√©e.  Comme vous le savez, lorsqu'une fonction a fini de fonctionner, elle cesse d'exister.  La bo√Æte magique dispara√Æt avec tout le contenu. <br><br>  Mais il a renvoy√© une autre fonction qui se souvenait en quelque sorte de la constante de <code>name</code> .  Ainsi, lors de l'appel de <code>myPrinter</code> nous avons obtenu <code>King</code> - la valeur dont la fonction se souvient, malgr√© le fait que cette zone n'existe plus. <br><br>  La fonction <code>createPrinter</code> par <code>createPrinter</code> est appel√©e fermeture.  Une fermeture est une combinaison d'une fonction et de l'environnement dans lequel elle a √©t√© d√©finie.  La fonction ¬´renfermait¬ª en soi certaines informations re√ßues dans le p√©rim√®tre. <br><br>  Cela peut sembler √©trange de JavaScript, mais une utilisation judicieuse des fermetures peut aider √† rendre le code plus agr√©able, propre et lisible.  Le principe du renvoi de fonctions, comme le renvoi de nombres et de valeurs de cha√Æne, vous donne plus de libert√© de man≈ìuvre. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr460861/">https://habr.com/ru/post/fr460861/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr460849/index.html">Partie 4. Un mod√®le de graphe pour calculer les fonctions logiques pour les processus parall√®les asynchrones</a></li>
<li><a href="../fr460851/index.html">SamsPcbGuide, Partie 10: Technologie - Soudage de composants sans plomb</a></li>
<li><a href="../fr460855/index.html">Comment utiliser PHP pour impl√©menter des microservices?</a></li>
<li><a href="../fr460857/index.html">Comment Namecoin Blockchain Research a pr√©dit les cyber-attaques RTM</a></li>
<li><a href="../fr460859/index.html">Conf√©rence IThink # 3 √† Kharkov - bas√©e sur la WWDC 2019</a></li>
<li><a href="../fr460863/index.html">D√©tails du crash de Cloudflare 2 juillet 2019</a></li>
<li><a href="../fr460865/index.html">Les gens sur la lune. Les sources</a></li>
<li><a href="../fr460867/index.html">Sourcery pour convertir automatiquement en structures d'objets Realm</a></li>
<li><a href="../fr460869/index.html">Reconnaissance d'objets en temps r√©el sur iOS √† l'aide de YOLOv3</a></li>
<li><a href="../fr460873/index.html">Pourquoi Turok: Dinosaur Hunter pour N64 a des ann√©es d'avance sur son temps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>