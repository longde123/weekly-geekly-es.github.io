<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â—¼ï¸ ğŸ’Ÿ ğŸ“Ÿ RESS - Arsitektur Baru untuk Aplikasi Seluler ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ ğŸ‘‚ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Berlawanan dengan judul provokatif, ini bukan arsitektur baru, tetapi upaya untuk menerjemahkan praktik yang sederhana dan telah teruji ke dalam bahas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RESS - Arsitektur Baru untuk Aplikasi Seluler</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424081/"><img src="https://habrastorage.org/webt/l5/ii/jr/l5iijromy0mesbjmvf1wqqn9bvc.png"><br><br><blockquote>  Berlawanan dengan judul provokatif, ini bukan arsitektur baru, tetapi upaya untuk menerjemahkan praktik yang sederhana dan telah teruji ke dalam bahasa Newspeak, yang dituturkan oleh komunitas Android modern </blockquote><h2>  Pendahuluan </h2><br>  Baru-baru ini, menjadi menyakitkan untuk melihat apa yang terjadi di dunia pengembangan platform mobile.  Astronotika arsitektur berkembang pesat, setiap hipster menganggapnya sebagai tugas untuk menciptakan arsitektur baru, dan untuk menyelesaikan tugas sederhana, alih-alih dua baris, masukkan beberapa kerangka kerja yang modis. <br><br>  Situs-situs ini telah mengisi tutorial tentang kerangka kerja trendi dan arsitektur canggih, tetapi bahkan tidak ada praktik terbaik untuk klien Android REST.  Meskipun ini adalah salah satu kasus aplikasi yang paling sering.  Saya ingin pendekatan yang normal untuk pengembangan pergi ke massa juga.  Karena itu, saya menulis artikel ini <br><a name="habracut"></a><br><h2>  Mengapa solusi yang ada buruk? </h2><br>  Secara umum, masalah MVP bermodel baru, VIPER dan sejenisnya persis sama, penulis mereka tidak tahu cara mendesain.  Dan pengikut mereka - bahkan lebih.  Dan karena itu mereka tidak mengerti hal-hal penting dan jelas.  Dan mereka terlibat dalam <b>teknik-over</b> konvensional. <br><br><h4>  1. Arsitekturnya harus sederhana </h4><br>  Semakin sederhana semakin baik.  Ini membuatnya lebih mudah untuk dipahami, lebih dapat diandalkan dan lebih fleksibel.  Orang bodoh mana pun dapat menyulitkan dan membuat banyak abstraksi, tetapi untuk melakukannya secara sederhana, Anda harus berpikir dengan hati-hati. <br><br><h4>  2. Over-engineering itu buruk </h4><br>  Anda perlu menambahkan level abstraksi baru hanya ketika yang lama tidak menyelesaikan masalah.  Setelah menambahkan level baru, sistem seharusnya menjadi <i>lebih mudah</i> dipahami, dan <i>lebih sedikit</i> kode.  Jika, misalnya, setelah itu Anda memiliki tiga bukannya satu file, dan sistem menjadi lebih rumit, maka Anda membuat kesalahan, dan jika dengan cara sederhana, Anda <i>menulis sampah</i> . <br><br>  Penggemar MVP, misalnya, dalam artikel mereka sendiri menulis dalam teks biasa bahwa MVP bodoh menyebabkan <i>komplikasi yang</i> signifikan <i>dari</i> sistem.  Dan mereka membenarkannya dengan fakta bahwa itu sangat <i>fleksibel</i> dan <i>lebih mudah dirawat</i> .  Tetapi, seperti yang kita ketahui dari paragraf 1, ini adalah hal-hal yang saling eksklusif. <br><br>  Sekarang tentang VIPER, lihat saja, misalnya, pada diagram dari artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Skema</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hq/zy/cf/hqzycfexvow0y3tvihtwgqllz-u.jpeg" alt="gambar"><br></div></div><br>  Dan ini untuk setiap layar!  Mata saya sakit.  Saya terutama bersimpati dengan mereka yang di tempat kerja harus berurusan dengan ini di luar kehendak mereka.  Bagi mereka yang memperkenalkannya sendiri, saya bersimpati dengan alasan yang <i>sedikit berbeda</i> . <br><br><h2>  Pendekatan baru </h2><br>  <i>Hei, aku juga ingin nama yang modis</i> .  Oleh karena itu, arsitektur yang diusulkan disebut <b>RESS</b> - <b>R</b> equest, <b>E</b> vent, <b>S</b> creen, <b>S</b> torage.  Surat-surat dan nama-nama itu dirinci begitu bodoh untuk mendapatkan kata yang bisa dibaca.  Nah, agar tidak membuat kebingungan dengan nama-nama yang sudah digunakan.  Nah, dengan REST yang selaras. <br><br>  Segera melakukan pemesanan, arsitektur ini untuk klien REST.  Untuk jenis aplikasi lain, mungkin tidak akan berfungsi. <br><br><img src="https://habrastorage.org/webt/ub/vd/jz/ubvdjz6pzobholewp2ecloxgski.png"><br><br><h3>  1. Penyimpanan </h3><br>  Gudang Data (dalam istilah lain Model, Repositori).  Kelas ini menyimpan data dan memprosesnya (menyimpan, memuat, menambahkan ke database, dll.), Serta semua data dari layanan REST pertama kali sampai di sini, diuraikan dan disimpan di sini. <br><br><h3>  2. Layar </h3><br>  Layar aplikasi, dalam kasus Android, ini adalah Aktivitas Anda.  Dalam istilah lain, ini adalah ViewController biasa seperti Apple MVC. <br><br><h3>  3. Permintaan </h3><br>  Kelas yang bertanggung jawab untuk mengirim permintaan ke layanan REST, serta menerima tanggapan dan memberi tahu tentang tanggapan komponen lain dari sistem. <br><br><h3>  4. Acara </h3><br>  Tautan antar komponen lainnya.  Misalnya, Permintaan mengirim acara tentang respons server kepada mereka yang berlangganan.  Dan Storage mengirim acara tentang perubahan data. <br><br>  Berikut ini adalah contoh implementasi yang disederhanakan.  Kode ditulis dengan asumsi dan tidak dicentang, sehingga mungkin ada kesalahan sintaks dan kesalahan ketik <br><br><div class="spoiler">  <b class="spoiler_title">Minta</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Request</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RequestListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApiMethod1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Json answer)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApiMethod2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Json answer)</span></span></span><span class="hljs-function"> </span></span>{} } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RequestTask</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AsyncTask</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RequestTask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String methodName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.methodName = methodName; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String methodName; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Void ... params)</span></span></span><span class="hljs-function"> </span></span>{ URL url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(Request.serverUrl + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + methodName); HttpURLConnection httpConnection = (HttpURLConnection)url.openConnection(); <span class="hljs-comment"><span class="hljs-comment">// ... //      // ... return result; } @Override protected void onPostExecute(String result) { // ... //  JSON  result // ... Requestr.onHandleAnswer(methodName, json); } } private static String serverUrl = "myserver.com"; private static List&lt;OnCompleteListener&gt; listeners = new ArrayList&lt;&gt;(); private static void onHandleAnswer(String methodName, Json json) { for(RequestListener listener : listeners) { if(methodName.equals("api/method1")) listener.onApiMethod1(json); else if(methodName.equals("api/method2")) listener.onApiMethod2(json); } } private static void makeRequest(String methodName) { new RequestTask(methodName).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR); } public static void registerListener(RequestListener listener) { listeners.add(listener); } public static void unregisterListener(RequestListener listener) { listeners.remove(listener); } public static void apiMethod1() { makeRequest("api/method1"); } public static void onApiMethod2() { makeRequest("api/method2"); } }</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Penyimpanan</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataStorage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onData1Changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onData2Changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> MyObject1 myObject1 = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;MyObject2&gt; myObjects2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">registerListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataListener listener)</span></span></span><span class="hljs-function"> </span></span>{ listeners.add(listener); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unregisterListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataListener listener)</span></span></span><span class="hljs-function"> </span></span>{ listeners.remove(listener); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMyObject1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myObject1; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;MyObject2&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMyObjects2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myObjects2; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Request.RequestListener listener = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Request.RequestListener() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T fromJson&lt;T&gt;(Json answer) { <span class="hljs-comment"><span class="hljs-comment">// ... //    JSON // ... return objectT; } @Override public void onApiMethod1(Json answer) { myObject1 = fromJson(answer); for(RequestListener listener : listeners) listener.data1Changed(); } @Override public void onApiMethod2(Json answer) { myObject2 = fromJson(myObjects2); for(RequestListener listener : listeners) listener.data2Changed(); } }; }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Layar</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataStorage</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Button button1; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Button button2; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); button1.setOnClickListener((View) -&gt; { Request.apiMethod1(); }); button2.setOnClickListener((View) -&gt; { Request.apiMethod2(); }); updateViews(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onPause(); DataStorage.unregisterListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onResume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onResume(); DataStorage.registerListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); updateViews(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ updateView1(); updateView2(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateView1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Object1 data = DataStorage.getObject1(); <span class="hljs-comment"><span class="hljs-comment">// ... //     // ... } private void updateView2() { List&lt;Object2&gt; data = DataStorage.getObjects2(); // ... //     // ... } @Override public void onData1Changed() { updateView1(); } @Override public void onData2Changed() { updateView2(); } }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Aplikasi</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(); Request.registerListener(DataStorage.listener); } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Semata yang sama, tetapi dalam hal RESS, untuk pemahaman</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/4o/g-/rz/4og-rzew3vn1ggqdykmdxgzsnx0.png"><br></div></div><br>  Ini berfungsi seperti ini: Ketika Anda mengklik tombol, metode yang diinginkan untuk Permintaan berkedut, Permintaan mengirim permintaan ke server, memproses respons dan memberi tahu DataStorage terlebih dahulu.  DataStorage mem-parsing respons dan menyimpan data di rumah.  Permintaan kemudian memberitahukan Layar yang sedang aktif, Layar mengambil data dari DataStorage dan memperbarui UI. <br><br>  Tanda layar dan berhenti berlangganan dari biasa-biasa saja di onResume dan onPause, masing-masing.  Ini juga memperbarui UI selain onResume.  Apa yang diberikannya?  Pemberitahuan datang hanya di Aktivitas aktif saat ini, tidak ada masalah dengan memproses permintaan di latar belakang atau memutar balik Kegiatan.  Aktivitas akan selalu terbarui.  Pemberitahuan tidak akan mencapai aktivitas latar belakang, dan ketika kembali ke status aktif, data akan diambil dari DataStorage.  Akibatnya, tidak ada masalah ketika Anda memutar layar dan membuat kembali Activity. <br><br>  Dan untuk semua ini, api default dari Android SDK sudah cukup. <br><br><h2>  Pertanyaan dan Jawaban untuk Kritik Masa Depan </h2><br><h4>  1. Apa untungnya? </h4><br>  Kesederhanaan yang nyata, fleksibilitas, kemampuan pemeliharaan, skalabilitas, dan ketergantungan minimum.  Anda selalu dapat menyulitkan bagian tertentu dari sistem jika perlu.  Terlalu banyak data?  Pisahkan DataStorage menjadi beberapa.  API REST layanan besar?  Buat beberapa Permintaan.  Apakah mendengarkan terlalu sederhana, canggung dan tidak modis?  Ambil EventBus.  Melihat curiga di sebuah salon di HttpConnection?  Nah, ambil Retrofit.  Berani Kegiatan dengan banyak fragmen?  Anggap saja setiap fragmen adalah Layar, atau pilah menjadi subkelas. <br><br><h4>  2. AsyncTask adalah orang jahat, ambil setidaknya Retrofit! </h4><br>  Hah?  Dan masalah apa yang ditimbulkannya dalam kode ini?  Kebocoran memori?  Tidak, di sini AsyncTask tidak menyimpan tautan ke aktivasi, tetapi hanya tautan ke metode statis.  Jawabannya hilang?  Tidak, jawabannya selalu datang ke DataStorage statis sampai aplikasi dimatikan.  Mencoba menyegarkan aktivitas saat jeda?  Tidak, notifikasi hanya datang dalam Aktivitas aktif. <br><br>  Dan bagaimana Retrofit dapat membantu di sini?  Lihat saja di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Penulis mengambil RxJava, Retrofit dan masih memahat kruk untuk memecahkan masalah yang tidak dimiliki RESS. <br><br><h4>  3. Layar adalah ViewController yang sama!  Perlu memisahkan logika dan presentasi, arrr! </h4><br>  Jatuhkan mantra ini.  Klien tipikal untuk layanan REST adalah satu tampilan besar untuk sisi server.  Semua logika bisnis Anda adalah mengatur keadaan yang tepat untuk bidang tombol atau teks.  Apa yang akan Anda bagikan di sana?  Katakanlah akan lebih mudah untuk mempertahankan?  Pertahankan 3 file dengan 3 ton kode, bukannya 1 file dengan 1 ton lebih mudah?  Ok  Dan jika kita memiliki aktivitas dengan 5 fragmen?  Ini sudah 3 x (5 +1) = 18 file. <br><br>  Pemisahan ke Controller dan View dalam kasus seperti itu hanya menghasilkan banyak kode yang tidak berarti, saatnya untuk mengakuinya.  Menambahkan fungsionalitas ke proyek dengan MVP sangat menyenangkan: apakah Anda ingin menambahkan penangan tombol?  Oke, perbaiki Presenter, Activity, dan View-interface.  Dalam RESS, untuk ini saya akan menulis beberapa baris kode dalam satu file. <br><br>  Tetapi dalam proyek-proyek besar, ViewController tumbuh dengan sangat buruk?  Jadi, Anda belum melihat proyek besar.  Klien REST Anda untuk situs berikutnya dengan 5 ribu baris adalah proyek kecil, dan 5 ribu baris di sana hanya karena ada 5 kelas di setiap layar.  Proyek yang benar-benar besar di RESS dengan 100+ layar dan beberapa tim yang terdiri dari 10 orang merasa hebat.  Cukup buat beberapa Permintaan dan Penyimpanan.  Dan Layar untuk layar tebal mengandung Layar tambahan untuk elemen UI besar, misalnya, fragmen yang sama.  Sebuah proyek pada MVP dengan skala yang sama hanya akan menenggelamkan banyak presenter, antarmuka, aktivasi, fragmen dan koneksi yang tidak jelas.  Dan transisi ke VIPER umumnya akan membuat seluruh tim berhenti suatu hari. <br><br><h2>  Kesimpulan </h2><br>  Saya harap artikel ini akan mendorong banyak pengembang untuk mempertimbangkan kembali pandangan mereka tentang arsitektur, bukan untuk menghasilkan abstraksi dan melihat solusi yang lebih sederhana dan lebih teruji waktu. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id424081/">https://habr.com/ru/post/id424081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id424065/index.html">Firefox memasang ekstensi di perangkat Anda untuk mengumpulkan data tanpa sepengetahuan Anda ... lagi</a></li>
<li><a href="../id424069/index.html">iFixit: iPhone XS dan XS Max - salinan yang hampir pasti dari iPhone X dengan rawatan 6 dari 10</a></li>
<li><a href="../id424071/index.html">Teori kebahagiaan. Termodinamika ketidaksetaraan kelas</a></li>
<li><a href="../id424073/index.html">Eksekusi kode jauh di Microsoft JET Database Engine</a></li>
<li><a href="../id424077/index.html">Perancis menuntut membuat "hak untuk dilupakan" global - apa yang bisa memengaruhi</a></li>
<li><a href="../id424083/index.html">Layanan untuk perdagangan di bursa Robinhood dituduh menjual data pada aplikasi pengguna ke pedagang frekuensi tinggi</a></li>
<li><a href="../id424085/index.html">Kami sedang mengembangkan modul prosesor NIOS II untuk IDA Pro</a></li>
<li><a href="../id424087/index.html">Perangkat Android yang dikendalikan Bluetooth yang dikontrol Arduino - siklus penuh (bagian 1)</a></li>
<li><a href="../id424089/index.html">Konferensi itu jahat. Atau bagus?</a></li>
<li><a href="../id424091/index.html">WiX.Py: kami mengumpulkan paket MSI "dalam tiga baris"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>