<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂ ‚úùÔ∏è üé¨ Entrans coding rANS ou comment √©crire votre propre archiveur üíé üëàüèΩ üê¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article peut int√©resser ceux qui sont engag√©s dans la compression de donn√©es ou qui souhaitent √©crire leur propre archiveur. 

  

 L'article est ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entrans coding rANS ou comment √©crire votre propre archiveur</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/playrix/blog/441814/">  Cet article peut int√©resser ceux qui sont engag√©s dans la compression de donn√©es ou qui souhaitent √©crire leur propre archiveur. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/jz/w8/xk/jzw8xkq1k6enudm8xozmna6m3ia.jpeg"></a> <br><br>  L'article est √©crit principalement sur les mat√©riaux du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">blog</a> , qui est maintenu par Fabian Giesen. <br><a name="habracut"></a><br><h2>  Pr√©sentation </h2><br>  La m√©thode de codage entropique rANS ( <b>r</b> ange + ANS) est le fr√®re de l'algorithme FSE, dont j'ai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parl√© plus t√¥t</a> .  L'abr√©viation ANS signifie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Asymmetric Numeral Systems</a> , et la plage de mots dans le nom indique la similitude de cette m√©thode avec le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">codage d'intervalle</a> .  L'auteur de rANS est <a href="">Yarek Duda</a> . <br><br>  La m√©thode rANS vous permet d'obtenir une compression presque optimale √† tr√®s grande vitesse.  Dans ce rANS n'est pas pire que FSE, ce qui n'est pas surprenant: les deux algorithmes sont bas√©s sur une base th√©orique commune.  Cependant, l'algorithme rANS est beaucoup plus simple √† mettre en ≈ìuvre que FSE. <br><br>  Il y aura d'abord une longue partie ¬´th√©orique¬ª, puis nous essaierons d'√©crire un simple archiveur. <br><br><h2>  Description de la m√©thode </h2><br>  Le fonctionnement de l'algorithme est d√©termin√© par les formules simples suivantes: <br><br>  <b>Encodage:</b> <code>C(s,x): x := (x / Fs) * M + Bs + (x % Fs)</code> <br>  <b>D√©codage:</b> <code>D(x): s = sym[x % M], x := Fs * (x / M) + (x % M) - Bs</code> <br><br>  Analysons-les en d√©tail. <br><br>  La fonction de codage <b>C (s, x)</b> re√ßoit le caract√®re <b>s</b> √† coder (que ce soit un entier) et l'√©tat actuel du codeur <b>x</b> (√©galement un entier). <br><br>  <b>F <sub>s</sub></b> - fr√©quence du symbole <b>s</b> .  La division par Fs ci-dessus est un entier. <br>  <b>M</b> est la somme des fr√©quences de tous les symboles de l'alphabet ( <b>M =</b> Œ£ <b>F <sub>s</sub></b> ). <br>  <b>En <sub>s</sub></b> , le d√©but de l'intervalle correspondant au caract√®re cod√© (dans la figure ci-dessous). <br>  <b>x</b> % <b>Fs</b> est le reste de la division de <b>x</b> par <b>F <sub>s</sub></b> . <br><br>  Le principe de fonctionnement est le m√™me qu'en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">codage arithm√©tique</a> : on prend le segment <b>[</b> 0, <b>M)</b> et on le divise en parties pour que chaque caract√®re <b>s</b> corresponde √† un intervalle de taille √©gale √† la fr√©quence du caract√®re <b>F <sub>s</sub></b> .  L'occurrence de la valeur <b>x% M</b> dans n'importe quel intervalle indique le codage du symbole correspondant. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6i/vl/ql/6ivlqldcqlkeuwsxu6fcypus39o.png"></div><br>  Au d√©but de l'encodage, initialisez <b>x avec</b> une valeur arbitraire appropri√©e, puis calculez la fonction <b>C (s, x)</b> pour tous les caract√®res encod√©s en s√©quence. <br><br>  Chaque calcul de la fonction <b>C (s, x)</b> augmente la valeur de <b>x</b> .  Quand il devient trop gros, vous devez vider les donn√©es en sortie: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (x &gt;= x_max) {   writeToStream(x % b); <span class="hljs-comment"><span class="hljs-comment">//     x /= b; //  x }</span></span></code> </pre> <br>  Cette √©tape est appel√©e <i>renormalisation</i> .  Apr√®s cela, vous pouvez continuer √† coder. <br><br>  Ci-dessus dans le code, de nouvelles constantes sont apparues: <b>x_max</b> et <b>b</b> .  En th√©orie, les nombres <b>M</b> , <b>b</b> et <b>x_max</b> sont li√©s par certaines relations, mais en pratique, il est plus efficace d'utiliser les valeurs suivantes si l'√©tat uint32 est utilis√© pour l'√©tat <code>x</code> : <br><br>  <b>M</b> = 2 ^ <b>k</b> , o√π <b>k</b> &lt;= 16 <br>  <b>b</b> = 2 ^ 16 (la moiti√© de la taille de uint32) <br><br>  Le choix de <b>M</b> = 2 ^ <b>k</b> est d√ª au fait qu'il y a division par <b>M</b> dans la fonction de d√©codage, de sorte que la division avec le reste peut √™tre remplac√©e par des op√©rations au niveau du bit. <br><br>  La valeur de <b>k</b> est choisie parmi les consid√©rations suivantes: plus elle est grande, plus la pr√©cision de <b>F <sub>s</sub></b> est √©lev√©e et plus la compression est efficace.  Dans ce cas, certains frais g√©n√©raux pour le stockage de la table de fr√©quences doivent √™tre pris en compte, il n'est donc pas toujours utile d'utiliser les valeurs maximales de <b>k</b> . <br><br>  La valeur de <b>x_max</b> doit √™tre telle qu'aucun d√©bordement ne se produise.  Sur la base de la fonction de codage, nous obtenons que <b>x</b> &lt; <b>uint32_max</b> * <b>Fs</b> / <b>M</b> ou d'une mani√®re l√©g√®rement diff√©rente: <b>x_max</b> &lt;= ( <b>b</b> * <b>L</b> ) * <b>Fs</b> / <b>M</b> , o√π <b>L</b> &lt;= <b>uint32_max</b> / <b>b</b> .  En code r√©el, la condition prend la forme x / b&gt; = L / M * Fs pour √©viter un d√©bordement dans les calculs. <br><br>  La valeur <b>b</b> = 2 ^ 16 (la moiti√© de la taille de uint32) est choisie de telle mani√®re que si <b>x</b> d√©passe <b>x_max</b> , alors une division par <b>b</b> suffit pour continuer √† fonctionner.  Par cons√©quent, la <code>while</code> se terminera apr√®s la premi√®re it√©ration, ce qui signifie qu'elle peut √™tre remplac√©e par un simple <code>if</code> . <br><br>  Par cons√©quent, la fonction de codage prend la forme suivante: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> RansState; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> RANS_L = <span class="hljs-number"><span class="hljs-number">1u</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">16</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> k = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   constexpr uint32_t RANS_M = 1u &lt;&lt; k; // M = 2^k //   s void RansEnc(RansState&amp; x, uint32_t s, RansOutBuf&amp; out) {   assert(x &gt;= RANS_L); //        uint32 Fs = freq[s]; //   s   uint32 Bs = range_start[s]; //   s   assert(Fs &gt; 0 &amp;&amp; Fs &lt;= RANS_M);     // renormalize   if ((x &gt;&gt; 16) &gt;= (RANS_L &gt;&gt; k) * Fs) { // x / b &gt;=  L / M * Fs       out.put( x &amp; 0xffff );       x &gt;&gt;= 16;   }   x = ((x / Fs) &lt;&lt; k) + Bs + (x % Fs); // C(s,x)     assert(x &gt;= RANS_L); //      }</span></span></code> </pre> <br>  √Ä la fin de l'encodage, vous devez enregistrer la valeur de <b>x</b> , car le d√©codage commencera √† partir de celui-ci.  Et oui, nous allons d√©coder de la fin au d√©but, c'est-√†-dire du dernier caract√®re cod√© au premier.  (Dans un article sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FSE,</a> ce point est expliqu√© de mani√®re suffisamment d√©taill√©e.) <br><br>  Je veux m'attarder un peu plus sur le fonctionnement de la formule d'encodage. <br><br><pre> <code class="cpp hljs">x := (x / Fs) * M + Bs + (x % Fs)</code> </pre> <br>  Apr√®s calcul ( <code>x / Fs) * M</code> , la variable <b>x</b> contient les <b>k</b> bits les moins significatifs (rappelons que <b>M</b> = 2 ^ <b>k</b> ).  L'ajout de <code>+ Bs + (x % Fs)</code> √©crit essentiellement sur ces bits une certaine valeur de l' <i>intervalle du</i> caract√®re <b>s</b> , car <b>Bs</b> est le d√©but de l'intervalle, et (x% Fs) est le nombre dans cet intervalle (la taille de l'intervalle est Fs).  Ainsi, lors du d√©codage, nous pouvons d√©terminer le caract√®re cod√© par l'intervalle dans lequel il tombe (x% M). <br><br>  <b>D√©codage</b> <br><br>  Passons √† la fonction de d√©codage. <br><br><pre> <code class="cpp hljs">D(x): s = sym[x % M], x := Fs * (x / M) + (x % M) - Bs</code> </pre> <br>  Comme nous l'avons d√©j√† compris plus haut, le caract√®re souhait√© <b>s</b> est d√©termin√© par le reste de la division <b>x</b> % <b>M.</b>  Dans quel intervalle la valeur (x% M) est tomb√©e, un tel caract√®re a √©t√© encod√©. <br><br>  Plus t√¥t, nous avons sp√©cifiquement d√©fini M = 2 ^ k pour simplifier la fonction de d√©codage.  Cela a fini comme ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> RansDecode(RansState&amp; x, RansInBuf&amp; in) {   assert(x &gt;= RANS_L); <span class="hljs-comment"><span class="hljs-comment">//       uint32_t x_mod = x &amp; (RANS_M - 1); // = x % M   //  ,    x_mod,     assert(x_mod &lt; dct.size());   uint32_t s = dct[x_mod]; //     uint32 Fs = freq[s]; //   s   uint32 Bs = range_start[s]; //    s   x = (x &gt;&gt; k) * Fs + x_mod - Bs;     // renormalize   if (x &lt; RANS_L) {       x = (x &lt;&lt; 16) | in.read16(); //  16    }     assert(x &gt;= RANS_L); //     return s; }</span></span></code> </pre> <br>  Le d√©codage commence par le m√™me <b>x</b> que celui obtenu √† la fin du codage.  Pour ce faire, il doit √™tre enregistr√© avec les donn√©es encod√©es. <br><br>  A la fin du d√©codage, l'√©tat du d√©codeur <b>x</b> doit √™tre exactement le m√™me que le codage.  En g√©n√©ral, √† chaque √©tape, <b>x</b> doit √™tre exactement le m√™me qu'√† l'√©tape de codage correspondante.  Ce fait aide beaucoup lors du d√©bogage. <br><br>  Comme vous pouvez le voir, le d√©codage fonctionne plus rapidement que l'encodage, car il n'y a pas d'op√©rations de division. <br><br>  Le moment le plus difficile dans la fonction de d√©codage est la m√©thode pour d√©terminer dans quel intervalle la valeur a chut√© (x% M). <br><br>  La m√©thode la plus simple et la plus rapide consiste √† utiliser la table <b>sym []</b> , taille <b>M.</b>  Dans ce cas, nous obtenons une table de la m√™me taille que dans l'algorithme FSE, √† la diff√©rence que dans rANS, la table n'est pas ¬´m√©lang√©e¬ª, les caract√®res sont en ordre et une telle table est beaucoup plus facile √† construire. <br><br>  Le principal inconv√©nient de cette approche est la taille de la table <b>sym</b> , qui cro√Æt de fa√ßon exponentielle avec l'augmentation de <b>k</b> . <br><br><h2>  M√©thode d'alias </h2><br>  Une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©thode d'alias a</a> √©t√© invent√©e pour d√©terminer plus efficacement le hit dans un intervalle.  Cette m√©thode vous permet de d√©terminer rapidement l'intervalle souhait√© √† l'aide de petites tables - par le nombre de caract√®res de l'alphabet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kv/v0/gu/kvv0guji6nfuxxr6mcjorxxsv9a.png"></div><br>  Une explication longue et longue peut √™tre trouv√©e ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fl√©chettes, D√©s et Pi√®ces</a> .  Je vais d√©crire l'essentiel de la m√©thode en bref: nous prenons un morceau de l'intervalle le plus long et l'attachons √† l'intervalle le plus court afin que la taille totale soit exactement <b>M</b> / <b>N</b> (o√π <b>N</b> est le nombre de caract√®res de l'alphabet).  Il s'av√®re que si vous le faites s√©quentiellement, vous vous retrouverez toujours avec <b>N</b> paires de taille <b>M</b> / <b>N.</b> <br><br>  Naturellement, <b>M</b> doit √™tre divisible par <b>N.</b>  Et si nous rappelons que nous avons <b>M</b> = 2 ^ <b>k</b> , alors la taille de l'alphabet s'av√®re √©galement √™tre une puissance de deux.  Ce n'est pas un probl√®me, car vous pouvez toujours compl√©ter l'alphabet √† la taille souhait√©e avec des caract√®res inutilis√©s avec une fr√©quence nulle. <br><br>  Le fait que l'intervalle de caract√®res soit divis√© en plusieurs parties complique un peu, mais pas beaucoup la proc√©dure de codage.  Si vous vous souvenez du FSE, les intervalles √©taient donc g√©n√©ralement r√©partis sur toute la gamme, comme si un m√©langeur fou avait travaill√© dessus, et rien ne fonctionnait =) <br><br>  Il n'est pas difficile de d√©terminer l'intervalle souhait√©: divisez <b>x</b> par <b>N</b> et tombez dans l'une des paires.  Ensuite, nous comparons le reste de la division de <b>x% N</b> avec la fronti√®re entre les segments d'une paire et tombons soit dans un intervalle soit dans un autre. <br><br><h2>  Nous essayons en pratique </h2><br>  Nous utiliserons le code de l' <a href="">exemple fini</a> . <br><br>  Nous prenons les donn√©es pour la compression du fichier: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> in_size; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>* in_bytes = read_file(<span class="hljs-string"><span class="hljs-string">"book1"</span></span>, &amp;in_size);</code> </pre> <br>  <b>1.</b> Vous devez d'abord d√©cider de <b>la structure des donn√©es</b> . <br><br>  Nous utilisons l'option la plus simple: nous allons coder un octet en utilisant l'alphabet [0 ... 255]. <br><br>  <b>2.</b> L'√©tape suivante consiste √† d√©terminer la <b>fr√©quence des caract√®res de l'</b> alphabet: <br><br>  (fonction <code>stats.count_freqs</code> ) <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; in_size; i++) {   freqs[in_bytes[i]]++; }</code> </pre> <br>  <b>3.</b> Donc, nous avons des fr√©quences de symboles, mais maintenant nous devons les <b>normaliser</b> , c'est-√†-dire r√©duire (ou augmenter) proportionnellement de sorte qu'au total nous obtenons M = 2 ^ k.  Ce n'est pas une t√¢che aussi simple que cela puisse para√Ætre, nous utilisons donc une fonction pr√™te √† l'emploi: <br><br><pre> <code class="plaintext hljs">stats.normalize_freqs(...);</code> </pre> <br>  Soit dit en passant, vous devez d√©terminer la valeur de <b>k</b> .  Puisque notre alphabet est compos√© de 256 caract√®res, <b>k</b> moins de 8 ne doit pas √™tre pris.  Tout d'abord, prenez le maximum - 16, puis essayez d'autres valeurs. <br><br>  <b>4.</b> Cr√©ez une <b>table d'alias</b> : <br><br><pre> <code class="cpp hljs">stats.make_alias_table();</code> </pre> <br>  <b>5. On</b> encode <b>depuis la fin</b> , puis on d√©code dans l'ordre normal. <br><br><pre> <code class="cpp hljs">RansState rans; <span class="hljs-comment"><span class="hljs-comment">//  rANS,    x RansEncInit(&amp;rans); //    uint8_t* ptr = out_buf + out_max_size; // *end* of output buffer for (size_t i = in_size; i &gt; 0; i--) { // NB: working in reverse!   int s = in_bytes[i - 1];   RansEncPutAlias(&amp;rans, &amp;ptr, &amp;stats, s, prob_bits); } //   .     . RansEncFlush(&amp;rans, &amp;ptr);</span></span></code> </pre> <br>  En outre, l'exemple par r√©f√©rence d√©code les donn√©es compress√©es √† l'aide de statistiques pr√©d√©finies.  Dans la vraie vie, pour le d√©codage, vous devez enregistrer un tableau de fr√©quences (statistiques) avec des donn√©es compress√©es.  Dans le cas le plus simple, vous devrez y d√©penser N * k bits. <br><br>  Comme promis ci-dessus, regardons les r√©sultats de compression pour diff√©rentes valeurs de k (dans le code, c'est <code>prob_bits</code> ), en tenant compte de l'augmentation de taille due √† l'enregistrement de la table des fr√©quences: <br><br>  ( <i>Taille</i> <i>originale</i> <i>du</i> <i>fichier</i> book1: 768771) <br>  k = 16: 435059 + 512 = 435571 octets <br>  k = <b>15</b> : 435078 + 480 = <b>435558</b> octets <br>  k = 14: 435113 + 448 = 435561 octets <br>  k = 13: 435239 + 416 = 435655 octets <br>  k = 12: 435603 + 384 = 435987 octets <br>  k = 11: 436530 + 352 = 436882 octets <br>  k = 10: 440895 + 320 = 441215 octets <br>  k = 9: 453418 + 288 = 453706 octets <br>  k = 8: 473126 + 256 = 473382 octets <br><br>  Vous pouvez voir que plus k est √©lev√©, meilleure est la compression.  Mais √† un certain point (√† k = 16), les frais g√©n√©raux de la table de fr√©quences commencent √† l'emporter sur les avantages d'une pr√©cision accrue.  Si vous compressez un fichier plus petit, cet effet appara√Ætra sur un k plus petit. <br><br>  Vous devez √©galement dire quelques mots sur l'astuce appel√©e "rANS entrelac√©s", qui est √©galement impl√©ment√©e <a href="">dans cet exemple</a> .  L'id√©e est qu'en utilisant alternativement deux variables d'√©tat ind√©pendantes, on utilise mieux le parall√©lisme du processeur.  En cons√©quence, le d√©codage est encore plus rapide. <br><br>  En conclusion, je tiens √† noter que la m√©thode de compression de fichier s√©lectionn√©e est trop simple.  Il ne prend pas en compte les caract√©ristiques des donn√©es, c'est pourquoi la compression est loin d'√™tre optimale.  Si vous regardez attentivement l'entr√©e, vous pouvez constater que certaines <i>combinaisons de lettres</i> sont plus courantes que d'autres et que certaines ne se produisent pas du tout.  En utilisant ce fait, la compression peut √™tre consid√©rablement am√©lior√©e.  Mais c'est un sujet pour un article s√©par√©. <br><br><h2>  Postface </h2><br>  Pourquoi √©crire votre propre archiveur alors qu'il existe de nombreux utilitaires √©prouv√©s?  La r√©ponse est assez simple: les archiveurs adapt√©s √† un format sp√©cifique se compressent beaucoup mieux. <br><br>  Lors du d√©veloppement de jeux sur <b>Playrix</b> , nous nous appuyons souvent sur la n√©cessit√© de r√©duire la taille de la build.  Les jeux √©voluent constamment, la quantit√© de contenu augmente et l'espace est limit√©. <br><br>  Une fois de plus <s>, en</s> regardant avec <s>envie</s> les ressources, nous avons r√©alis√© que certains fichiers peuvent √™tre compress√©s beaucoup mieux que zip, compte tenu de leur structure.  Au cours des exp√©riences, nous avons r√©ussi √† r√©duire consid√©rablement la taille de notre propre format d'animation, il y a aussi quelques changements dans la compression des fichiers graphiques. <br><br>  Lors du d√©veloppement d'algorithmes de compression, un codeur entropique universel, tel que rANS ou FSE, est un outil indispensable.  Il prend compl√®tement la t√¢che d'√©crire des caract√®res avec le moins de bits, permettant au d√©veloppeur de se concentrer sur les principaux d√©tails de l'algorithme.  Et cela fonctionne aussi tr√®s rapidement √† la fois en encodage et en d√©codage. <br><br>  J'esp√®re que cet article vous aidera √† vous familiariser avec rANS et √† l'utiliser dans vos projets. <br><br><h2>  Les r√©f√©rences </h2><br>  Vous pouvez voir ici des exemples de mise en ≈ìuvre de rANS (avec diff√©rentes options d'optimisation): <br><br>  Fabian Giesen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/rygorous/ryg_rans</a> <br><br>  Vous pouvez lire des d√©tails int√©ressants et des d√©tails sur le blog de Fabian (en anglais): <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notes RANS</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rANS avec des distributions de probabilit√©s statiques</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RANS en pratique</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441814/">https://habr.com/ru/post/fr441814/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441804/index.html">O√π enseigner la programmation aux enfants?</a></li>
<li><a href="../fr441806/index.html">VPN sans VPN ou une histoire sur l'utilisation non conventionnelle de SSH</a></li>
<li><a href="../fr441808/index.html">Nous vous invitons le 6 mars au ElixirLangMoscow Meetup # 9</a></li>
<li><a href="../fr441810/index.html">Eclipse pour microcontr√¥leurs (STM32) + d√©bogueur compatible avec les t√¢ches FreeRTOS</a></li>
<li><a href="../fr441812/index.html">Diffusion en direct de Meetup sur Acronis</a></li>
<li><a href="../fr441816/index.html">Les autorit√©s fran√ßaises infligent une amende de 4 milliards de dollars √† la banque UBS pour avoir aid√© ses clients √† √©viter les taxes</a></li>
<li><a href="../fr441818/index.html">Performance du site √©quilibr√©e. Partie 2: Optimisation technique</a></li>
<li><a href="../fr441820/index.html">Horror Devotion retir√© de Steam - la cause est encore une fois la col√®re de Winnie the Pooh, Xi Jinping et de la Chine pour les connotations politiques</a></li>
<li><a href="../fr441824/index.html">La gestion des incendies dans le cadre du travail du leader</a></li>
<li><a href="../fr441826/index.html">Ce qui se passe sur le march√© du streaming audio: discuter du d√©veloppement des plateformes de streaming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>