<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ë üìï üö∂üèº JS battle: como escrib√≠ mi eval () üßìüèº üèÆ üëé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Puedes recordar a Alexander Korotayev en la versi√≥n del navegador de "Heroes of Might and Magic": el descifrado de su informe sobre ella reuni√≥ una gr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JS battle: como escrib√≠ mi eval ()</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/436586/">  Puedes recordar a <b>Alexander Korotayev</b> en la versi√≥n del navegador de "Heroes of Might and Magic": el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descifrado de</a> su informe sobre ella reuni√≥ una gran cantidad de puntos de vista sobre Habr√©.  Y ahora hizo un juego centrado en los programadores: debes jugarlo con un c√≥digo JS. <br><br>  Esta vez, el desarrollo no llev√≥ semanas, sino semanas, pero sin desaf√≠os interesantes de todos modos, no podr√≠a funcionar.  ¬øC√≥mo hacer que el juego sea conveniente incluso para desarrolladores que no hayan tocado JavaScript anteriormente?  ¬øC√≥mo protegerse de formas simples de burlar un juego? <br><br><img src="https://habrastorage.org/webt/to/1i/n0/to1in00dneigddmemqzjqonebuy.png"><br><br>  Como resultado, Alexander nuevamente hizo un informe sobre HolyJS, y nosotros (los organizadores de la conferencia) nuevamente preparamos una versi√≥n de texto para Habr. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/TJ7TGk5WJ5k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Mi nombre es Alexander Korotaev, trabajo en Tinkoff.ru, estoy comprometido en el front-end.  Adem√°s, como parte de la comunidad Spb-frontend, ayudo a organizar mitaps.  Hago el podcast de Drinkcast, invitamos a personas interesantes y discutimos varios temas. <br><br>  ¬øCu√°l es la esencia del juguete?  Primero, debe elegir una unidad de las propuestas, este es un sistema RPG: cada unidad tiene sus propias fortalezas y debilidades.  Usted ve qu√© unidades eligi√≥ el enemigo y elige vengarse de √©l.  Luego, debes escribir en JavaScript un script para el comportamiento de tu ej√©rcito; en otras palabras, el script "lo que cada unidad debe hacer en el campo de batalla". <br><br>  Esto se hace en modo de depuraci√≥n: de hecho, debitas el c√≥digo, y luego ambos oponentes empujan su c√≥digo, y comienza la batalla entre las dos partes. <br><br>  Por lo tanto, puede ver c√≥mo dos scripts, dos l√≥gicas, dos algoritmos luchan entre s√≠.  Siempre quise hacer algo como esto, y ahora finalmente se implementa. <br><br>  En acci√≥n, todo se ve as√≠: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/LfgaRFnmkhk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  ¬øY c√≥mo era el trabajo en √©l?  Se dedic√≥ mucho trabajo a la documentaci√≥n.  Cuando un jugador se sienta en una computadora port√°til, ve la documentaci√≥n, en la que todo se describe con cierto detalle. <br><br>  Me tom√≥ mucho tiempo para su dise√±o, revisi√≥n y cuestionamiento entre las personas si es claro.  Como resultado, result√≥ claramente para sishnikov, javists y otros desarrolladores que no saben nada sobre JS.  Incluso puedes promocionar JavaScript con este juguete: "No da miedo, mira c√≥mo puedes escribir en √©l, incluso sucede algo divertido". <br><br><img src="https://habrastorage.org/webt/c3/9b/cf/c39bcfhakno9pvemjsm5rfj1_jo.png"><br><br>  Tuvimos un gran torneo en nuestra empresa, en el que pr√°cticamente cualquier programador en el que hemos participado. <br><br>  Desde el punto de vista tecnol√≥gico, utilic√© el motor de juegos m√°s popular del mundo de JS: Phaser.  El Ace Editor m√°s grande y m√°s utilizado.  Este es un editor en la web, muy similar a Sublime o VSCode, se puede incrustar en una p√°gina web.  Tambi√©n us√© RxJS para trabajar con interacciones asincr√≥nicas de diferentes usuarios y Preact para renderizar html.  De las tecnolog√≠as nativas, trabaj√≥ especialmente con trabajadores y websocket. <br><br><img src="https://habrastorage.org/webt/hr/7e/hj/hr7ehjcuxfyljukymq0yeiwsvou.png"><br><br><hr><br><h2>  Juegos para programadores </h2><br>  ¬øQu√© son los juegos para programadores en general?  En mi opini√≥n, estos son juegos en los que necesitas codificar, luego obtener un resultado divertido que se pueda comparar con alguien, esta es una batalla.  De estos juegos en l√≠nea disponibles, s√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Elevator Saga"</a> : escribes guiones para ascensores de acuerdo con ciertos par√°metros.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Screeps"</a> - sobre biolog√≠a, mol√©culas, escribir guiones para ellos. <br><br>  Tambi√©n hay juguetes que a veces se encuentran en conferencias.  El m√°s popular de ellos es "Code in the Dark", tambi√©n lo presentamos hoy.  Por cierto, "C√≥digo en la oscuridad" me inspir√≥ de alguna manera. <br><br><img src="https://habrastorage.org/webt/di/ri/xp/dirixpaaxzsners2q5wbecnqf_i.png"><br><br>  ¬øPor qu√© se hizo esto?  Obtuve la tarea de que necesitas crear algo genial con un stand en la conferencia, algo inusual.  No es que hubiera eychars con cuestionarios.  Est√° claro que todos quieren llamar la atenci√≥n y recolectar contactos.  Decidimos ir m√°s all√° y se nos ocurri√≥ algo genial y divertido para los programadores.  Me di cuenta de que los programadores quieren pelear, competir, y tenemos que darles esa oportunidad.  Es necesario crear un stand en el que vendr√°n y codificar√°n. <br><br>  Gamificaci√≥n  Hicimos esto no solo entre los programadores practicantes, sino tambi√©n entre los estudiantes.  Celebramos tales partidos en los institutos el d√≠a de la carrera.  Necesit√°bamos ver de alg√∫n modo qu√© tipo de tipos hab√≠a, adecuados para nosotros o no.  Utilizamos la gamificaci√≥n para atraer a las personas al proceso, para ver c√≥mo act√∫an, qu√© hacen.  Jugaron y se distrajeron, pero eso nos dio informaci√≥n.  Algunos empujaron el c√≥digo sin siquiera ejecutarlo una vez, y fue inmediatamente obvio que era demasiado temprano para el desarrollo. <br><br><img src="https://habrastorage.org/webt/zy/j7/-d/zyj7-dtcxgbzsnlm6eiakic1pri.png"><br><br>  C√≥mo se ve√≠a en la primera versi√≥n.  Era una pantalla principal y dos computadoras port√°tiles para jugadores.  Todo esto contact√≥ al servidor, el servidor almacen√≥ el estado y lo revolvi√≥ entre todos los clientes conectados.  Cada pantalla era un cliente conectado.  Las computadoras port√°tiles de los jugadores eran pantallas interactivas desde las cuales se pod√≠a cambiar este estado.  Las pantallas est√°n unidas r√≠gidamente a un servidor. <br><br><h2>  Falta de historia del tiempo </h2><br>  La primera historia que encontr√© en este desarrollo es la historia que tuve muy poco tiempo.  Literalmente, en cinco minutos surgi√≥ una idea, en cinco segundos se invent√≥ un nombre cuando se requer√≠a crear un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio</a> en GitHub.  Podr√≠a pasarlo todo solo cuatro horas por la noche, quit√°ndoselo incluso a mi esposa.  Como resultado, solo me quedaban tres semanas antes de la conferencia para darme cuenta de esto, al menos de alguna manera.  Todo comenz√≥ para que fuera necesario tener una idea en el marco de una lluvia de ideas, en cinco minutos naci√≥ la idea: "Escribamos alg√∫n tipo de inteligencia artificial para RPG en JS".  Es genial, divertido, puedo implementarlo. <br><br><img src="https://habrastorage.org/webt/un/tq/kh/untqkhyleylozw4th97etc8grc0.png"><br><br>  En la primera implementaci√≥n, la pantalla ten√≠a un editor de c√≥digo y una pantalla de batalla, en la cual estaba la batalla misma.  Phaser, Ace Editor y Node.js puro se utilizaron como servidor sin ning√∫n marco.  De lo que me arrepent√≠ m√°s tarde, sin embargo, pero luego no se requiri√≥ nada especial del servidor. <br><br><img src="https://habrastorage.org/webt/_g/lz/uz/_glzuzkixm5rkvgffsvxc6i0txi.png"><br><br>  Logr√© darme cuenta entonces de Renderer, quien pint√≥ la batalla en s√≠.  La parte m√°s dif√≠cil fue la caja de arena para el c√≥digo JS, es decir, una caja de arena en la que se supon√≠a que todo deb√≠a ejecutarse de forma aislada para cada jugador.  Tambi√©n hubo intercambio de estado que vino del servidor.  Los jugadores de alguna manera cambiaron de estado, lo arrojaron al servidor, el servidor envi√≥ el resto a los enchufes web.  El servidor era una fuente de verdad, y todos los clientes conectados confiaban en lo que proven√≠a del servidor. <br><br><h2>  Caja de arena </h2><br>  ¬øQu√© es tan dif√≠cil de implementar un sandbox?  El hecho es que el sandbox es el mundo entero para el c√≥digo en el que debe existir el c√≥digo.  Es decir, usted crea para √©l aproximadamente el mismo mundo que a su alrededor, pero solo consiste en algunas convenciones, a partir de una API con la que puede interactuar.  ¬øC√≥mo implementar esto en JS?  Parece que JS no es capaz de esto, est√° tan lleno de agujeros y es tan libre que simplemente no funcionar√° encerrar completamente el c√≥digo de usuario en una caja sin usar una m√°quina virtual separada con un sistema operativo separado. <br><br><img src="https://habrastorage.org/webt/gb/ok/yi/gbokyimz5h1piufn5yfoudov554.png"><br><br>  ¬øQu√© debe hacer el sandbox? <br><br>  Primero, como dije, a√≠sle el c√≥digo.  Debe ser un mundo del que no se pueda salir. <br><br>  Adem√°s, la API de administraci√≥n de la unidad debe arrojarse all√≠.  Los jugadores deben interactuar con el campo de batalla, moviendo unidades, dirigi√©ndolos, d√°ndoles un vector de ataque. <br>  Y cualquier acci√≥n de las unidades es as√≠ncrona, es decir, de alguna manera deber√≠a funcionar con c√≥digo as√≠ncrono. <br><br><img src="https://habrastorage.org/webt/or/q1/y1/orq1y1fcofatt5oz2qieinaixay.png"><br><br>  ¬øQu√© quer√≠a decir sobre la asincron√≠a?  El hecho es que en JS se implementa b√°sicamente mediante promesas.  Aqu√≠ todo est√° claro para todos, las promesas son una gran cosa, funcionan perfectamente, casi siempre hemos estado con nosotros.  Durante muchos a√±os, todos saben c√≥mo trabajar con ellos, pero este juguete no fue solo para javascripts.  ¬øImag√≠nese si comenzara a explicar a los javistas c√≥mo escribir un c√≥digo de batalla usando promesas?  C√≥mo hacer entonces, luego, entonces, por qu√© a veces no es necesario ... ¬øQu√© hacer con las condiciones o los bucles? <br><br><img src="https://habrastorage.org/webt/z2/qn/ir/z2qnirhdy_puuuliwdnfu0sxalg.png"><br><br>  Puede, por supuesto, ir de la mejor manera y tomar la sintaxis async / wait.  [Diapositiva 8:57] Pero, ¬øse imaginan tambi√©n c√≥mo los programadores que no utilizan JavaScript pueden explicar que deben esperar antes de casi todas las l√≠neas?  Como resultado, la mejor manera de trabajar con la asincron√≠a es no usarla en absoluto. <br><br><img src="https://habrastorage.org/webt/vm/yd/bi/vmydbi-ocp9npyl56wzqv-rnr4e.png"><br><br>  Cree el c√≥digo m√°s sincr√≥nico y la API m√°s simple, similar a casi cualquier lenguaje de programaci√≥n.  Hacemos un juguete no solo para las personas que escriben en JS, queremos que sea accesible para todos los que sepan codificar. <br><br><img src="https://habrastorage.org/webt/ng/et/2d/nget2dl8vrmwwi3y608ztrpn2pk.png"><br><br>  Todos necesitamos comenzar de alguna manera.  El usuario escribe el c√≥digo, y necesitamos ejecutarlo, mover las unidades en el mapa.  Lo primero que viene a la mente es que necesitamos eval () m√°s la declaraci√≥n no recomendada con, que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">no se recomienda para usar en MDN</a> .  Esto funcionar√°, pero hay problemas. <br><br><img src="https://habrastorage.org/webt/ca/18/5a/ca185aygesba1t6wuxfymhvkghi.png"><br><br>  Por ejemplo, tenemos un c√≥digo que destruye completamente nuestra idea, lo que nos impide hacer algo m√°s.  Este es un c√≥digo que bloquea la ejecuci√≥n.  Es necesario hacer algo para que el usuario no pueda bloquear la aplicaci√≥n.  Por ejemplo, un bucle sin fin puede romperlo todo.  Si alert () y prompt () a√∫n pueden redefinirse, entonces no podemos redefinir un bucle infinito en absoluto. <br><br><h2>  eval () es malvado </h2><br>  Entonces llegamos al punto donde eval () es malo.  No es de extra√±ar que se llame maldad, porque es una funci√≥n insidiosa que realmente incorpora todo lo m√°s libre y abierto que hay en JS, y nos deja completamente indefensos.  Con una funci√≥n simple, hacemos un gran agujero en nuestra aplicaci√≥n. <br><br><img src="https://habrastorage.org/webt/-e/1s/yv/-e1syve2mujeqy_vpnr3obdk7sk.png"><br><br>  Pero, ¬øy si te digo, <i>[en la voz de Steve Jobs]</i> que reinventamos eval ()? <br><br>  Evaluamos () en otras tecnolog√≠as, funciona casi igual que la evaluaci√≥n () que ya tenemos.  De hecho, tengo una funci√≥n eval () en mi c√≥digo, pero implementada usando Workers, la instrucci√≥n with y Proxy. <br><br><img src="https://habrastorage.org/webt/wf/gj/ox/wfgjoxy3qrjkfnrnpvq-o06xr8k.png"><br><br>  ¬øPor qu√© trabajadores?  El hecho es que crean un hilo de ejecuci√≥n separado, es decir, JS es de un solo hilo, pero gracias a los trabajadores podemos obtener otro hilo.  Esto nos da muchos beneficios.  Por ejemplo, dentro de los mismos bucles sin fin, podemos interrumpir el hilo creado a trav√©s del trabajador desde el hilo principal, tal vez esta es la raz√≥n principal por la que utilic√© trabajadores.  Si el trabajador logr√≥ trabajar m√°s r√°pido que en un segundo, lo consideramos exitoso, obtenemos su resultado.  Si no, entonces lo cortamos.  De hecho, el c√≥digo de usuario por alguna raz√≥n no funcion√≥, se produjeron algunos errores extra√±os o se ralentiz√≥ debido a un bucle infinito.  Muchos trataron de escribir hoy mientras (cierto), advert√≠ que esto no funcionar√≠a. <br><br><img src="https://habrastorage.org/webt/ee/en/va/eeenvauyaknpsa7hizr52fvkcwk.png"><br><br>  Para escribir a nuestro trabajador, solo necesitamos alimentar el script al constructor del trabajador, que se descargar√° a trav√©s de http.  Dentro del gui√≥n, necesitamos hacer un manejador de mensajes desde el hilo principal.  Usando la funci√≥n postMessage () dentro del trabajador, podemos enrutar mensajes al hilo principal.  De esta manera hacemos comunicaci√≥n entre los dos hilos.  Una API simple bastante conveniente, pero falta algo, es decir, el c√≥digo de usuario que debemos ejecutar en este trabajador.  Cada vez no generaremos un archivo de script en el servidor y lo enviaremos al trabajador. <br><br><img src="https://habrastorage.org/webt/u2/4h/ia/u24hian_cjbwwi-06mtfn6qldmo.png"><br><br>  Encontr√© una manera usando URL.createObjectURL ().  Hacemos un bloque y lo alimentamos al trabajador src.  Por lo tanto, descarga nuestro c√≥digo directamente de la l√≠nea.  Por cierto, de esta manera funciona con cualquier objeto en el DOM que tenga src - image funciona as√≠, por ejemplo, e incluso en un iframe puede cargar html simplemente gener√°ndolo desde una cadena.  Bastante genial y flexible, creo.  Tambi√©n podemos gestionar al trabajador simplemente pas√°ndole nuestro objeto especialmente generado desde la URL.  Tambi√©n podemos terminarlo y ya funciona como lo necesitamos, y creamos el primer sandbox. <br><br><img src="https://habrastorage.org/webt/mq/kp/mk/mqkpmkw8-ufofb05g8qb94-mzm4.png"><br><br>  Las interacciones asincr√≥nicas van m√°s all√°, porque cualquier trabajo con trabajadores es asincr√≥nico.  Enviamos un mensaje, y no podemos esperar sincr√≥nicamente el siguiente mensaje, el trabajador solo nos devuelve la instancia y podemos suscribirnos a los mensajes.  Capturamos el mensaje usando RxJS, creamos dos hilos: uno para un mensaje exitoso del trabajador, el segundo para completar por tiempo de espera.  Dos hilos que luego controlamos con su fusi√≥n. <br><br><img src="https://habrastorage.org/webt/-x/mt/ny/-xmtnyqc5ytkd6w2zkzdeqfgsws.png"><br><br>  RxJS tiene operadores que nos permiten trabajar con hilos.  De hecho, es como lodash para operaciones sincr√≥nicas.  Podemos indicar alguna funci√≥n y no pensar en c√≥mo se implementa en el interior, nos alivia del dolor de cabeza.  Necesitamos comenzar a pensar en hilos, el operador de fusi√≥n fusiona nuestros hilos, responde a cualquier mensaje.  Responder√° tanto al tiempo de espera como al mensaje.  Solo necesitamos el primer mensaje, respectivamente, despu√©s del primer mensaje que terminamos con el trabajador.  En caso de error, imprima este error; en caso de √©xito, lo resolvemos. <br><br><img src="https://habrastorage.org/webt/l0/fj/lr/l0fjlrbzawogdkbhwkwkci-1osi.png"><br><br>  Aqu√≠ todo es bastante simple.  Nuestro c√≥digo se vuelve declarativo, la complejidad de la asincron√≠a va a alguna parte.  Lo principal es aprender estos operadores. <br><br><img src="https://habrastorage.org/webt/mi/oc/ev/miocevejr1in0eyfg30wqmozb10.png"><br><br>  As√≠ es como trabajamos con la API de la Unidad.  Quer√≠a que la API de la unidad fuera lo m√°s simple posible.  Hablando de JS, muchas personas piensan que es dif√≠cil, hay que subir a alg√∫n lado, aprender algo.  Y quer√≠a hacerlo lo m√°s simple posible: todo en el √°rea global, solo existe el alcance de la API de la Unidad, nada m√°s.  Todo para la gesti√≥n de la unidad, incluso autocompletar. <br><br><img src="https://habrastorage.org/webt/nl/-c/v8/nl-cv8_2s_3134omu8mqeanuiis.png"><br><br>  [Diapositiva 15:20] La soluci√≥n sugiere que todo esto puede ser arrojado a lo muy prohibido con una declaraci√≥n.  Comprendamos por qu√© est√° prohibido. <br><br>  El hecho es que tiene sus problemas.  Por ejemplo, con, desafortunadamente, tiene fugas fuera del alcance que le agregamos, porque trata de mirar m√°s profundo que la API de la Unidad y mira dentro del alcance global. <br><br><img src="https://habrastorage.org/webt/tt/hw/gg/tthwggh1janwscz0t9poham_x44.png"><br>  Aqu√≠ el √∫ltimo ejemplo es especialmente genial, porque incluso un cuatro puede ser peligroso para nuestro c√≥digo, ya que todas estas funciones pueden ser realizadas por el c√≥digo de usuario.  El usuario puede hacer cualquier cosa.  Este es un juego para programadores, y les gusta explorar los problemas y las formas de piratear algo. <br><br><img src="https://habrastorage.org/webt/b4/e0/hb/b4e0hbfhxr1l7xn51miw-qk8bzk.png"><br><br>  Como dije, los √°mbitos son muy permeables, por lo que siempre hay un alcance global disponible.  No importa cu√°ntos √°mbitos apliquemos a nuestro c√≥digo personalizado, no importa cu√°ntos √°mbitos lo envuelvamos, el alcance global seguir√° siendo visible.  Y todo por culpa de. <br><br>  De hecho, no a√≠sla nada, solo nos agrega una nueva capa de abstracci√≥n, un nuevo alcance global.  Pero podemos cambiar este comportamiento con Proxy. <br><br><img src="https://habrastorage.org/webt/zz/ed/qq/zzedqqwgeq-gxquunu4_ypeatak.png"><br><br>  El hecho es que Proxy se ocupa de todas nuestras llamadas al objeto que se representan mediante la nueva API, y podemos controlar c√≥mo se comportan las nuevas solicitudes de datos en este objeto. <br><br><img src="https://habrastorage.org/webt/1u/lh/xa/1ulhxahfzy_yahdczgj7jbmacaw.png"><br><br>  De hecho, con obras bastante simples.  Cuando lo alimentamos con alg√∫n tipo de variable, verifica debajo del cap√≥ si esta variable est√° en el objeto (es decir, ejecuta el operador in), y si es as√≠, la ejecuta en el objeto, y si no, se ejecuta en el √°mbito superior, en Nuestro caso es global.  Es bastante simple aqu√≠.  Lo principal con lo que el proxy nos ayuda es que podemos anular este comportamiento. <br><br><img src="https://habrastorage.org/webt/c0/jg/ie/c0jgie64g9zgd4fukgnjadkj2g4.png"><br><br>  Existen los ganchos en Proxy.  Una cosa maravillosa que nos permite enviar cualquier solicitud al objeto.  Podemos cambiar el comportamiento de la solicitud de atributo, cambiar el comportamiento del trabajo de atributo y, lo m√°s importante, podemos cambiar el comportamiento de esto en el operador.  Hay un gancho, al que solo podemos volver verdadero.  Por lo tanto, tomamos y enga√±amos completamente nuestra declaraci√≥n, haciendo que nuestra API sea mucho m√°s segura que antes. <br><br><img src="https://habrastorage.org/webt/4w/-n/vy/4w-nvyhnsledhvcyl0tetw33hvq.png"><br><br>  Si intentamos ejecutar eval (), primero preguntar√° si eval () est√° en unitApi, responder√°n "s√≠" y obtendr√°n "undefined no es una funci√≥n".  ¬°Esta parece ser la primera vez que estoy contento con este error!  Este error es exactamente lo que deber√≠amos haber recibido.  Lo tomamos y le dijimos al usuario: "Lo siento, olv√≠date de todo lo que sab√≠as sobre el objeto de la ventana, esto ya no existe".  Ya hemos dejado algunos de los problemas, pero eso no es todo. <br><br><img src="https://habrastorage.org/webt/fo/yw/a2/foywa2mzbpbijvc3ndgpq-9tpxw.png"><br><br>  El hecho es que la declaraci√≥n with es la misma de JS, JS es din√°mica y un poco extra√±a.  Lo extra√±o es que no todo funciona como nos gustar√≠a, sin tener en cuenta las especificaciones.  El hecho es que tambi√©n funciona con propiedades prototipo.  Es decir, podemos curny alimentarlo con una matriz, ejecutar este c√≥digo oscuro.  Todas las funciones de matriz est√°n disponibles como globales en este √°mbito, lo que parece un poco extra√±o. <br><br><img src="https://habrastorage.org/webt/ih/2g/yr/ih2gyrz7isyixyvx7bswlamgvbe.png"><br><br>  Esto no es importante para nosotros, es importante para nosotros que el usuario pueda ejecutar valueOf () y obtener todo nuestro sandbox.  Toma y recoge directamente, mira lo que contiene.  Yo tampoco quer√≠a esto, as√≠ que se introdujo algo interesante en la especificaci√≥n: Symbol.unscopables.  Es decir, en la nueva especificaci√≥n para s√≠mbolos, Symbol.unscopables se introdujo espec√≠ficamente para la declaraci√≥n with, que est√° prohibida.  Porque creen que alguien m√°s lo est√° usando.  Por ejemplo yo! <br><br><img src="https://habrastorage.org/webt/fv/9o/ns/fv9ons58tbtnrnc5rp7biuexgfk.png"><br><br>  Por lo tanto, haremos otro interceptor, donde verificaremos espec√≠ficamente si este s√≠mbolo se encuentra en la lista de todos los atributos que no se pueden eliminar.  Si no, devu√©lvelo, pero si es as√≠, perd√≥n, no volveremos.  Nosotros tampoco lo usamos.  Y as√≠, con ni siquiera podemos obtener un prototipo de nuestro sandbox. <br><br><img src="https://habrastorage.org/webt/07/5h/tt/075httw1dt0ekhe37frcstztzri.png"><br><br>  Todav√≠a tenemos el entorno de los trabajadores.  Esto es algo que cuelga en un √°rea global y a√∫n es accesible.  El hecho es que si simplemente anula esto, estar√° disponible en el prototipo.  Casi todo se puede extraer a trav√©s del prototipo en JS.  Sorprendentemente, todos estos m√©todos todav√≠a est√°n disponibles a trav√©s del prototipo. <br><br><img src="https://habrastorage.org/webt/po/mt/fl/pomtflwlmxujubh-l8qzqqn2drg.png"><br><br>  Solo ten√≠a que tomar y limpiar todo esto.  Revisamos todas las llaves y lo limpiamos todo. <br><br><img src="https://habrastorage.org/webt/zg/9k/at/zg9katqtaothaqjip6trmosdig0.png"><br><br>  Y luego dejamos un peque√±o huevo de Pascua para el usuario, que todav√≠a intenta llamar a esto.  Tomamos la funci√≥n habitual, lo principal no es la funci√≥n de flecha, que tiene un alcance, y cambiamos su alcance a nuestro objeto, en el que dejamos un peque√±o huevo de Pascua para un usuario particularmente curioso que quiere mostrar algo de esto o de s√≠ mismo en la consola.  Creo que los huevos de Pascua son maravillosos y deben dejarse en el c√≥digo. <br><br><img src="https://habrastorage.org/webt/_s/7r/fq/_s7rfqdggfjikj2rjm7rcmhwja8.png"><br><br>  Resulta que se quedaron solo con nuestra Unidad API.  Bloqueamos completamente todo; de hecho, dejamos una lista blanca.  Necesitamos agregar aquellas API que son √∫tiles y necesarias.  Por ejemplo, la API de matem√°ticas, que tiene una funci√≥n aleatoria √∫til que muchas personas usan al escribir c√≥digo para unidades. <br><br>  Tambi√©n necesitamos consola y muchas otras funciones utilitarias que no tienen ninguna funci√≥n destructiva.  Creamos una lista de tiempo para nuestras API.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto es bueno, porque si cre√°ramos una lista negra, depender√≠amos de cualquier actualizaci√≥n del navegador que ocurra sin nuestro conocimiento. </font></font><br><br><img src="https://habrastorage.org/webt/nz/mc/0o/nzmc0or7a_svlqdlhcdg36_bzi8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al crear una lista blanca, podemos comenzar a usar try-catch en nuestro c√≥digo. </font><font style="vertical-align: inherit;">Nuestro c√≥digo envuelto ya detecta errores y puede enviarlos al usuario, lo cual es muy importante para la depuraci√≥n. </font></font><br><br><img src="https://habrastorage.org/webt/cl/pa/q1/clpaq1aarq_8svpxquxahgyrkym.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero el hecho es que los m√©todos de consola de Worker no se manifiestan en el c√≥digo de usuario. </font><font style="vertical-align: inherit;">Es decir, si abre la consola y entra en el entorno de trabajo, estar√°n disponibles, pero ser√≠a un error decirle al usuario "abra la consola y vea qu√© le sucedi√≥". </font><font style="vertical-align: inherit;">Decid√≠ hacer una consola amigable para el jugador, donde el jugador, incluso sin experiencia en JavaScript, pudiera ver de manera amigable lo que sucedi√≥.</font></font><br><br>  ,    , -   .      ,     .      ,         webpack   . <br><br><img src="https://habrastorage.org/webt/cl/pa/q1/clpaq1aarq_8svpxquxahgyrkym.png"><br><br>      patchMethod(),     ,     postMessage().    postMessage()   console log, error, warn, info.        ,    .  ,       &lt;div&gt;,      ,    ,      ,     ,        . <br><br><img src="https://habrastorage.org/webt/nf/oq/yw/nfoqywkngugbgug6i5wwv_tpuhy.png"><br><br>     ,      .      : -   -  ‚Äî   ,     ,  -     . , ,    promises.   ,        actions,       . <br><br><img src="https://habrastorage.org/webt/jl/np/2f/jlnp2fcxsgtmghti8wzt4iwzbki.png"><br><br>          actions.   ,     real-time ?   ,  real-time    workers    ,        worker,       .       - ,    .    ,    , .   ,      ,   .        . <br><br><img src="https://habrastorage.org/webt/lk/zb/xp/lkzbxpal1f_bkmcq1pyk5sto8ey.png"><br><br>     workers,       .  workers ,           .      ,   .  ,     ,    (   ,  ),            .  :    ‚Äî . <br><hr><br><h2>  Math.random() </h2><br>   ,   ,         ,     .      Math.random(). <br><br>     ,   ,      ,                   .   ,  Math.random()     - . <br><br><img src="https://habrastorage.org/webt/g5/xs/zj/g5xszjwvqxhjxp4slm1hfmdfct4.png"><br><br>  ,     ,        (   ), JS   ,        .         . <br><br><img src="https://habrastorage.org/webt/ds/ic/sy/dsicsy7ra1vb8fuzq6xkry7y9zg.png"><br><br>   ,              ,  ,          .       ,    - . <br><br>            ,      . ,        random(),     . <br><br><img src="https://habrastorage.org/webt/cp/ew/ou/cpewoullokdb8p903gddmmgguj8.png"><br><br>  ,  random()     ‚Äî  ¬´ ¬ª      ,      .    ,    -  ,     random() ,       .    -    ,     .   ,          ,  random()    . <br><br><img src="https://habrastorage.org/webt/hu/tp/ot/hutpotesuqtwdc_p7yqelekwpjk.png"><br><br>       .    ,   ,   random()  .   - seed          (  ,        ,   ). <br><br><img src="https://habrastorage.org/webt/of/xs/da/ofxsdamysx7gcyfjgctqw1o72o0.png"><br>     ,     .            ,      random().                  ,  random()     -. <br><br>  <a href=""></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todo el c√≥digo que se env√≠a al trabajador es necesario para que JS sea completamente seguro. </font><font style="vertical-align: inherit;">La "inserci√≥n" naranja es el mismo c√≥digo de usuario. </font><font style="vertical-align: inherit;">que se inyecta all√≠. </font><font style="vertical-align: inherit;">Esa es la cantidad de c√≥digo que necesita para que JS sea seguro. </font><font style="vertical-align: inherit;">Las API aleatorias () y de unidad tambi√©n se inyectan all√≠. </font><font style="vertical-align: inherit;">A trav√©s de inyecciones, recibo a√∫n m√°s c√≥digo que se env√≠a al trabajador.</font></font><br><hr><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Estado compartido: RxJS, servidor y clientes </font></font></h2><br>  Entonces descubrimos lo que tenemos con el cliente.  Ahora hablemos sobre compartir el estado, por qu√© es necesario y c√≥mo se organiz√≥.  Tenemos el estado almacenado en el servidor, el servidor debe confundirlo con los clientes conectados.  [Diapositiva 28:48] <br><br>  Tenemos cuatro roles de diferentes clientes que pueden conectarse al servidor: "usuario izquierdo", "usuario derecho", un espectador que mira la pantalla principal y un administrador que puede hacer cualquier cosa. <br><br>  La pantalla izquierda no puede cambiar el estado del jugador derecho, el espectador no puede cambiar nada y el administrador puede hacer todo. <br><br><img src="https://habrastorage.org/webt/qo/nw/xz/qonwxz54aiudwbywh6msiilucss.png"><br><br>  ¬øPor qu√© fue esto un problema?  Todo est√° organizado de manera bastante simple.  Cualquier cliente conectado puede lanzar una sesi√≥n, el servidor la acepta y fusiona con el estado, que est√° dentro del servidor y luego la distribuye a todos los clientes.  √âl busca a tientas cualquier cambio que se le ocurra.  Era necesario filtrarlo de alguna manera. <br><br><img src="https://habrastorage.org/webt/th/ol/vu/tholvuuygb9shbr5-de-aemuxs8.png"><br><br>  Primero, dir√© por qu√© el servidor tambi√©n tiene RxJS.  Todas las interacciones con dos o m√°s usuarios conectados se vuelven as√≠ncronas.  Debemos esperar los resultados de ambos usuarios.  Por ejemplo, ambos usuarios hicieron clic en el bot√≥n "Finalizar", debe esperar a que ambos hagan clic y solo luego realizar la acci√≥n.  Todo fue bastante sencillo en RxJS de esta manera: <br><br><img src="https://habrastorage.org/webt/xa/dp/6z/xadp6zds6_xaucjyb7hdrpskcmu.png"><br><br>  Nuevamente estamos operando con subprocesos, hay un flujo desde el socket, que se llama socket.  Para crear un hilo que monitoree solo al jugador izquierdo, simplemente tomamos y filtramos mensajes de este socket por el jugador izquierdo (y de manera similar con el derecho).  Luego podemos combinarlos usando el operador forkJoin (), que funciona como Promise.all () y es su an√°logo.  Esperamos ambas acciones y llamamos al m√©todo setState (), que establece nuestro estado en "listo".  Resulta que estamos esperando a ambos jugadores y cambiamos el estado del servidor.  En RxJS, esto sale lo m√°s declarativo posible, por eso lo us√©. <br><br>  Sigue habiendo un problema con el hecho de que los jugadores pueden cambiar de estado entre s√≠.  Se les debe prohibir hacer esto.  A√∫n as√≠, son programadores, hubo precedentes que alguien intent√≥.  Creemos clases separadas para ellos que se heredan del Cliente. <br><br><img src="https://habrastorage.org/webt/jz/9-/6v/jz9-6vskw2b3lqcf3fxasd2w4kq.png"><br><br>  Tendr√°n la l√≥gica b√°sica de la comunicaci√≥n del jugador con el servidor, y en cada clase en particular habr√° su l√≥gica personalizada para filtrar datos. <br><br>  El cliente es en realidad un grupo de conexiones, conexiones con clientes. <br><br><img src="https://habrastorage.org/webt/sc/qz/kl/scqzklyflx8hylw3stj7drudpdy.png"><br><br>  Simplemente los almacena y tiene la transmisi√≥n onUnsafeMessage, que es completamente insegura: no se puede confiar, estos son solo mensajes sin procesar del usuario que recibe.  Escribimos estos mensajes en bruto en la secuencia. <br><br>  Adem√°s, al implementar un reproductor espec√≠fico, tomamos esto enUnsafeMessage y lo filtramos. <br><br><img src="https://habrastorage.org/webt/yn/z0/1k/ynz01kbib00wt83k_5jwx5ix3ku.png"><br><br>  Necesitamos filtrar solo los datos que podemos obtener de este reproductor, en quien podemos confiar.  El jugador izquierdo solo puede cambiar el estado del jugador izquierdo, respectivamente, tomamos de todos los datos que puede enviar, solo el estado del jugador izquierdo.  Si no lo enviaste, est√° bien.  Si se env√≠a, tomamos.  Por lo tanto, de mensajes completamente inseguros, obtenemos mensajes seguros en los que podemos confiar cuando trabajamos en la habitaci√≥n. <br><br><img src="https://habrastorage.org/webt/g3/-a/dg/g3-adglwnncvagey8nojzmksixw.png"><br><br>  Tenemos salas de juegos que re√∫nen a jugadores.  Dentro de la sala, podemos escribir las funciones que pueden cambiar el estado directamente, simplemente suscribi√©ndose a estos flujos, en los que ya podemos confiar.  Nos abstraemos de un mont√≥n de cheques.  Hicimos las comprobaciones basadas en roles y las llamamos clases separadas.  Dividimos el c√≥digo de tal manera que dentro del controlador, donde se realizan las funciones importantes de cambio de estado, el c√≥digo se ha vuelto lo m√°s simple y declarativo posible. <br><br>  RxJS tambi√©n se usa en el cliente, est√° conectado al z√≥calo en el reverso, emite eventos y los redirige en todos los sentidos. <br><br>  En este caso, me gustar√≠a dar un ejemplo cuando necesito cambiar el ej√©rcito del adversario correcto. <br><br><img src="https://habrastorage.org/webt/qf/u8/oy/qfu8oy7syyrcekd2z424rxuhplw.png"><br><br>  Para suscribirse, creamos una secuencia desde el mismo socket y la filtramos.  Nos aseguramos de que este sea realmente el jugador correcto, y tomamos un mensaje de √©l sobre cu√°l es su ej√©rcito.  Si no hay tal mensaje, la transmisi√≥n no devolver√° nada, no habr√° un solo mensaje en √©l, permanecer√° en silencio hasta que el jugador cambie el ej√©rcito.  Inmediatamente resolvemos de manera declarativa el problema de filtrar eventos, no lo tenemos cursi. <br><br>  Y cuando algo ya ha venido de la secuencia, llamamos a la funci√≥n setState ().  Esto es bastante simple, el enfoque que nos permite hacer todo de manera transparente y declarativa.  Lo mismo por lo que asum√≠ el proyecto RxJS y en lo que me ayud√≥ mucho. <br><br><img src="https://habrastorage.org/webt/gy/p9/qc/gyp9qchh3hadurc4_vmg0vjj1u4.png"><br><br>  Creo secuencias que he nombrado claramente, con las que entiendo c√≥mo trabajar, todo es declarativo, se llaman las funciones necesarias, no hay problemas con muchos eventos if y de filtrado, todo esto lo hace RxJS. <br><br><h2>  Historia: de un jugador a multijugador </h2><br><br>  Entonces, la primera versi√≥n de mi juguete fue escrita.  Podemos decir que era un solo jugador, ya que solo dos jugadores pod√≠an jugarlo, el n√∫mero de clientes conectados fue fijo.  Ten√≠amos un jugador izquierdo, un jugador derecho y la pantalla detr√°s, todo esto conectado directamente al servidor.  Todo estaba recubierto, pero en tres semanas ya estaba hecho. <br><br>  Recib√≠ una nueva oferta: expandir el juguete para todos los programadores de la compa√±√≠a para que puedan abrirlo y jugarlo en sus computadoras.  Para que obtengamos una lista de l√≠deres, multijugador para que puedan jugar juntos.  Entonces me di cuenta de que ten√≠a muchas refactorizaciones. <br><br><img src="https://habrastorage.org/webt/qy/vs/-k/qyvs-khwziiaiv8xyfsnvcrlark.png"><br><br>  Result√≥ no ser tan dif√≠cil.  Simplemente combin√© todas las entidades que ten√≠a en habitaciones separadas.  Obtuve la esencia de "Room", que podr√≠a combinar todos los roles.  Ahora, no son los jugadores mismos quienes se comunican directamente con el servidor, sino las salas.  Las salas ya han enviado solicitudes directamente al servidor, reemplazando el estado, y el estado se ha separado para cada sala. <br><br><img src="https://habrastorage.org/webt/cc/au/tt/ccautts_bfhkftuja4joqqeg9vm.png"><br><br>  Tom√© y reescrib√≠ todo, agregu√© una lista de l√≠deres, otorgamos los mejores premios.  Solo era necesario tener una gran cantidad de usuarios, ya era imposible seguir a todos, era necesario escribir algo donde recolectar todos los datos. <br><br><h2>  JS Gamedev y sus problemas </h2><br><br>  Por lo tanto, me familiaric√© m√°s con JS-gamedev.  Di una vuelta sobre el √∫ltimo proyecto durante unos tres a√±os, descansando peri√≥dicamente.  Y aqu√≠ tuve las dos veces durante tres semanas.  Todos los d√≠as me sentaba e hac√≠a algo por las tardes. <br><br>  ¬øQu√© problemas hay en el desarrollo de juegos en JS?  Todo es diferente de nuestras aplicaciones comerciales, donde no es un problema escribir algo desde cero.  Adem√°s, mucho de eso es bienvenido: haremos lo nuestro, recordaremos las historias con NPM y nos iremos. <br><br><img src="https://habrastorage.org/webt/f6/6l/zc/f66lzct-hy9vzyyixqvuplcd2qk.png"><br><br>  Es imposible hacer esto en JS Gamedev, porque todas las tecnolog√≠as para mostrar gr√°ficos tienen un nivel tan bajo que no es rentable econ√≥micamente escribir algo en ellas.  Si tom√© este juguete y comenc√© a escribirlo desde cero en WebGL, tambi√©n me sentar√≠a detr√°s de √©l durante unos seis meses, solo tratando de descubrir algunos errores extra√±os.  El motor de juegos m√°s popular Phaser me quit√≥ estos problemas ... <br><br><img src="https://habrastorage.org/webt/x1/zs/aa/x1zsaafnaxys0r9tssldvcper38.png"><br><br>  ... y me agreg√≥ otros nuevos: 5 megabytes en un paquete.  Y no se pudo hacer nada al respecto; no sabe en absoluto qu√© es sacudir √°rboles.  Adem√°s, solo la √∫ltima versi√≥n de Phaser puede funcionar con paquetes web y paquetes.  Antes de esto, Phaser estaba conectado solo en la etiqueta html del script, era extra√±o para m√≠. <br><br>  Vengo de todo tipo de webpacks-scripts, y en el desarrollo de juegos JS, casi nada puede hacerlo.  Todos los m√≥dulos tienen una tipificaci√≥n extremadamente pobre o no lo tienen en absoluto, o b√°sicamente no saben c√≥mo usar webpack, fue necesario encontrar formas de envolverlo.  Al final result√≥ que, incluso Ace Editor en su forma pura no funciona con webpack en absoluto.  Para comenzar a trabajar, debe descargar un paquete separado donde ya est√° envuelto (llave). <br><br>  Fue casi lo mismo con Phaser, pero en la nueva versi√≥n lo hicieron m√°s o menos normalmente.  Segu√≠ escribiendo en Phaser y descubr√≠ c√≥mo hacer que todo funcionara con el paquete web de la forma en que sol√≠amos hacerlo: tanto la escritura como las pruebas podr√≠an adjuntarse a todo esto.  Descubr√≠ que puede tomar <a href="">PixiJS por</a> separado, que es un render de paquete web, y encontrar muchos m√≥dulos para √©l que est√°n listos para trabajar con √©l. <br><br><img src="https://habrastorage.org/webt/cz/cf/o7/czcfo7ib3-d7n3w-l1rpzxfo8cw.png"><br><br>  PixiJS es una gran biblioteca que puede renderizar en WebGL o en Canvas.  Adem√°s, incluso puede escribir c√≥digo como para Canvas, y se representar√° en WebGL.  Esta biblioteca puede renderizar 2D muy r√°pidamente.  Lo principal es saber c√≥mo funciona con la memoria, para no caer en una posici√≥n cuando la memoria ha terminado. <br><br>  Recomiendo por separado el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">impresionante</a> repositorio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pixijs</a> en GitHub, donde puedes encontrar diferentes m√≥dulos.  Sobre todo me gust√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">React-pixi</a> .  Simplemente podemos ignorar la resoluci√≥n de problemas con la vista cuando escribimos funciones imperativas directamente en el controlador para dibujar formas geom√©tricas, sprites, animaciones y m√°s.  Todos podemos marcar en JSX.  Venimos del mundo JSX con nuestra aplicaci√≥n comercial y podemos usarlos m√°s.  Para eso me encanta la abstracci√≥n.  React-pixi nos da esta abstracci√≥n familiar. <br><br>  Tambi√©n le aconsejo que tome tween.js, el mismo famoso motor de animaci√≥n de Phaser, que le permite realizar animaciones declarativas que son algo similares a las animaciones CSS: hacemos una transici√≥n entre estados, y tween.js decide por nosotros exactamente c√≥mo mover el objeto. <br><br><h2>  Tipos de jugadores: qui√©nes son y c√≥mo hacerse amigos de ellos </h2><br>  Me encontr√© con diferentes jugadores, y tambi√©n me gustar√≠a contarte sobre c√≥mo probar el juguete.  Reun√≠ colegas en una habitaci√≥n cerrada y no los dej√© salir hasta que terminaron el juego.  Desafortunadamente, no todos pudieron terminar el juego, porque al principio ten√≠a muchos errores.  Afortunadamente, comenc√© a probar tan pronto como apareci√≥ al menos un prototipo funcional.  Honestamente, la primera prueba fall√≥ porque un par de jugadores no comenzaron nada.  Fue una pena, pero me dio una patada que me permiti√≥ seguir adelante. <br><br>  Cuando tu juguete est√© listo, puedes ser recibido muy bien, o con una horca y antorchas.  Todas las personas esperan alg√∫n tipo de fan√°tico de los juegos, esperando la felicidad que les dar√°s.  Y les das algo que no funciona en absoluto, aunque parece funcionar para ti.  Cuando tienes un juguete en l√≠nea, hay incluso m√°s errores de este tipo. <br><br>  Como resultado, las personas m√°s agradables con las que me he encontrado son "investigadores" que siempre encuentran m√°s en su juguete de lo que realmente son.  Pueden complementarlo agradablemente con todo tipo de peque√±as cosas, lo que te lleva a agregar algo.  Pero, desafortunadamente, la comunicaci√≥n con estas personas no dio lo importante: la estabilidad del juguete. <br><br>  Hay jugadores comunes que vienen √∫nicamente por el fan√°tico.  Es posible que a veces ni siquiera se den cuenta de los errores, de alguna manera se les escapen en su camino hacia el placer. <br><br>  Otra categor√≠a son los recolectores de errores, para los cuales casi todo no funciona.  Debes ser amigo de esas personas, aunque hablar√°n mucho de negatividad.  Necesitamos entablar relaciones extra√±as con ellos: te lastiman y est√°s tratando de tomar algo √∫til para ti, "sent√©monos en tu computadora y veamos".  Necesitas trabajar con ellos, porque al final son estas personas las que har√°n que tu juego sea de calidad. <br><br>  Solo necesita probar en personas vivas.  Su ojo est√° borroso, y las pruebas ciertamente mostrar√°n lo que est√° oculto.  Est√°s desarrollando un juguete y buceando m√°s profundo, cortando algunas caracter√≠sticas, pero puede que ni siquiera sean necesarias.  Acude directamente a sus consumidores, les muestra y observa c√≥mo juegan, qu√© teclas presionan.  Esto le brinda un incentivo para hacer exactamente lo que necesita.  Ver√° que algunas personas presionan constantemente Ctrl + S, porque est√°n acostumbrados a guardar el c√≥digo; bueno, al menos haga que el c√≥digo se ejecute en Ctrl + S, el jugador se sentir√° m√°s c√≥modo.  Necesitas crear un ambiente c√≥modo para el jugador, para esto necesitas amarlo y seguirlo. <br><br>  La regla 80/20 funciona: realiza una demostraci√≥n el 20% del tiempo del desarrollo completo del juego, y para el jugador parece un juego completado al 80%.  La percepci√≥n funciona para que la mec√°nica b√°sica est√© lista, todo se mueva y funcione, lo que significa que el juego est√° casi listo y el desarrollador lo terminar√° pronto.  Pero en realidad, el desarrollador todav√≠a tiene una salida del 80%.  Como dije, durante mucho tiempo tuve que trabajar en la documentaci√≥n para que fuera comprensible para todos.  Se lo mostr√© a muchas personas que hablaron sus comentarios, los filtr√©, tratando de entender la esencia de las declaraciones.  Y me llev√≥ mucho tiempo buscar errores. <br><br>  Entonces, en el desarrollo de juegos, solo podr√≠a aconsejarle que haga demostraciones: deleitan a todos, no requieren mucho tiempo y nadie realmente espera nada de las demostraciones.  Terminar juegos es un proceso aburrido, pero comenzar es genial. <br><br>  Finalmente, te dejo enlaces: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Repositorio con un juego e instrucciones para el lanzamiento</a> (estar√© encantado de agrupar las solicitudes si encuentra errores) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Phaser</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">awesome-pixijs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Servidor de juegos multijugador Colyseus</a> (yo mismo escrib√≠ multijugador, y luego vi un servidor terminado con salas) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Editor de Ace</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Presentaci√≥n de este informe.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conferencias en ruso a las que puede enviar un informe</a> </li></ul><br><blockquote>  <b>HolyJS 2019 Piter</b> , una conferencia para desarrolladores de JavaScript, se llevar√° a cabo del 24 al 25 de mayo en San Petersburgo.  Los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primeros oradores</a> ya aparecieron en el sitio. <br>  Tambi√©n puede solicitar un informe, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Call for Papers est√°</a> abierto hasta el 11 de marzo. <br>  Los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">precios de las</a> entradas subir√°n el 1 de febrero. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es436586/">https://habr.com/ru/post/es436586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436568/index.html">Plataforma de video propia o c√≥mo tomar muchos recursos inform√°ticos. Parte 1</a></li>
<li><a href="../es436570/index.html">Programador Exorcismo</a></li>
<li><a href="../es436572/index.html">Skolkovo Cybersecurity Challenge 2019 Concurso del Proyecto de Ciberseguridad</a></li>
<li><a href="../es436578/index.html">Precio de seguridad personal para directores de grandes empresas de TI por a√±o</a></li>
<li><a href="../es436584/index.html">Ley de gesti√≥n de runet: implementaci√≥n de disposiciones y √°reas de responsabilidad</a></li>
<li><a href="../es436588/index.html">MegaSlerm en Mosc√∫ a principios de junio: primer anuncio y descuentos</a></li>
<li><a href="../es436590/index.html">Consejos para un cliente funcional. Presione Œî para leer</a></li>
<li><a href="../es436592/index.html">Back-end en componentes de archivo √∫nico VueJS</a></li>
<li><a href="../es436594/index.html">Adi√≥s Chevy Volt: Historias y leyendas del h√≠brido recargable</a></li>
<li><a href="../es436596/index.html">Los desarrolladores de pila completa est√°n de hecho atrapados en el nivel medio. Ah√≥rrate el sufrimiento, no sigas ese camino</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>