<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∫üèª ü§öüèΩ ‚ô†Ô∏è Data Mesh: como trabalhar com dados sem um mon√≥lito üìå üë®‚Äç‚úàÔ∏è üö°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! N√≥s da Dodo Pizza Engineering realmente amamos os dados (e quem n√£o gosta deles agora?). Agora haver√° uma hist√≥ria sobre como acumular todos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Data Mesh: como trabalhar com dados sem um mon√≥lito</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/475476/"><p>  Ol√° Habr!  N√≥s da Dodo Pizza Engineering realmente amamos os dados (e quem n√£o gosta deles agora?).  Agora haver√° uma hist√≥ria sobre como acumular todos os dados do mundo Dodo Pizza e dar a qualquer funcion√°rio da empresa acesso conveniente a esse conjunto de dados.  Desafio sob o asterisco: salve os nervos da equipe de engenharia de dados. </p><br><img src="https://habrastorage.org/webt/cn/bt/y8/cnbty8-s8axbhnzriavdi65eqy4.png"><a name="habracut"></a><br><p>  Como Plyushkins reais, salvamos todos os tipos de informa√ß√µes sobre o trabalho de nossas pizzarias: </p><br><ul><li>  lembre-se de todos os pedidos dos usu√°rios; </li><li>  sabemos quanto tempo levou para fazer a primeira pizza em Syktyvkar; </li><li>  Vemos quanto tempo a pizza esfria na prateleira de calor em Voronezh agora; </li><li>  armazenar dados em baixas de produtos; </li><li>  e muito, muito mais. </li></ul><br><p>  Atualmente, v√°rias equipes s√£o respons√°veis ‚Äã‚Äãpor trabalhar com dados na Dodo Pizza, uma delas √© a equipe de engenharia de dados.  Agora eles (isto √©, n√≥s) t√™m uma tarefa: dar a qualquer funcion√°rio da empresa acesso conveniente a esse conjunto de dados. </p><br><p>  Quando come√ßamos a pensar em como fazer isso e come√ßamos a discutir o problema, encontramos uma abordagem muito interessante para o gerenciamento de dados - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Data Mesh</a> (voc√™ encontrar√° um enorme artigo chique aqui).  Suas id√©ias se encaixaram muito bem em nossa id√©ia de como queremos construir nosso sistema.  O restante do artigo ser√° repensar a abordagem e como a vemos sendo implementada na Dodo Pizza Engineering. </p><br><h2 id="chto-my-imeem-v-vidu-pod-dannymi">  O que queremos dizer com "dados" </h2><br><p>  Para come√ßar, vamos decidir o que queremos dizer com dados na Dodo Pizza Engineering: </p><br><ul><li>  Eventos que enviam servi√ßos (temos um barramento comum constru√≠do usando o RabbitMQ); </li><li>  Registros dentro do banco de dados (para n√≥s, MySQL e CosmosDB); </li><li>  Clique em um aplicativo e site para celular. </li></ul><br><p>  Para que o neg√≥cio da Dodo Pizza use e conte com esses dados, √© importante que as seguintes condi√ß√µes sejam atendidas: </p><br><ul><li>  <strong>Eles devem ser hol√≠sticos.</strong>  Devemos ter certeza de que n√£o alteramos os dados no processo de processamento, armazenamento e exibi√ß√£o.  Se uma empresa n√£o puder confiar em nossos dados, ela n√£o ser√° √∫til. </li><li>  <strong>Eles devem ser marcados com hora e n√£o substitu√≠dos.</strong>  Isso significa que, a qualquer momento, queremos poder reverter os dados desse per√≠odo.  Por exemplo, descubra quantas pizzas foram vendidas em 8 de julho de 2018. </li><li>  <strong>Eles devem ser confi√°veis.</strong>  No processo de coleta e armazenamento de dados, devemos n√£o apenas perder a integridade, mas tamb√©m a confiabilidade.  N√£o podemos perder dados, intervalos de tempo, porque, juntamente com eles, perdemos a confian√ßa de nossos clientes (externos e internos). </li><li>  <strong>Eles devem estar com um esquema est√°vel - escrevemos solicita√ß√µes para esses dados.</strong>  N√≥s realmente n√£o queremos que eles mudem tanto com a altera√ß√£o do c√≥digo do aplicativo, com a refatora√ß√£o, que nossos pedidos param de funcionar.  Quem escreve os pedidos nunca saber√° que voc√™ fez a refatora√ß√£o at√© que tudo quebre.  Eu n√£o gostaria de saber sobre isso dos clientes. </li></ul><br><p>  Dados todos esses requisitos, chegamos √† conclus√£o de que os dados no Dodo s√£o um produto.  O mesmo que API de servi√ßo p√∫blico.  Dessa forma, a mesma equipe propriet√°ria do servi√ßo deve possuir os dados.  Al√©m disso, as altera√ß√µes no esquema de dados devem sempre ser compat√≠veis com vers√µes anteriores. </p><br><h2 id="tradicionnyy-podhod--data-lake">  Abordagem Tradicional - Data Lake </h2><br><p> Para resolver os problemas de armazenamento e processamento confi√°veis ‚Äã‚Äãde big data, existe uma abordagem tradicional adotada por muitas empresas que trabalham com esse pool de informa√ß√µes - o Data Lake.  Como parte dessa abordagem, os engenheiros de dados coletam informa√ß√µes de todos os componentes do sistema e as colocam em um grande armazenamento (pode ser, por exemplo, Hadoop, Azure Kusto, Apache Cassandra ou at√© mesmo uma r√©plica do MySQL se os dados forem quebrados). </p><br><p>  Al√©m disso, esses mesmos engenheiros escrevem solicita√ß√µes para esse armazenamento.  A implementa√ß√£o dessa abordagem na Dodo Pizza Engineering implica que a equipe de Engenharia de Dados possua o esquema de dados no reposit√≥rio anal√≠tico. </p><br><p>  Nesse cen√°rio, a equipe se torna gatos muito tristes e √© por isso: </p><br><ul><li>  Ela deve monitorar as altera√ß√µes em <strong>TODOS os</strong> servi√ßos da empresa.  E existem muitas delas e muitas altera√ß√µes (em m√©dia, mesclamos ~ 100 solicita√ß√µes pull por semana, enquanto muitos servi√ßos n√£o fazem solicita√ß√µes pull). </li><li>  Ao alterar o esquema de dados, o gerente de produto e a equipe que alteram o esquema de dados devem esperar at√© que a Engenharia de Dados complete o c√≥digo necess√°rio para que as altera√ß√µes sejam suportadas.  Al√©m disso, h√° muito tempo nos destacamos e a situa√ß√£o em que uma equipe est√° esperando por outra √© muito rara.  E n√£o queremos que isso se torne uma parte "normal" do processo de desenvolvimento. </li><li>  Ela deve estar imersa em <strong>todo o</strong> neg√≥cio da empresa.  Uma cadeia de pizzarias parece um neg√≥cio simples, mas apenas parece.  √â muito dif√≠cil reunir compet√™ncias suficientes em uma equipe para criar um modelo de dados adequado para toda a empresa. </li><li>  √â um √∫nico ponto de falha.  Cada vez que voc√™ precisa alterar os dados que o servi√ßo retorna ou gravar uma consulta, todas essas tarefas caem para a equipe de Engenharia de Dados.  Como resultado, a equipe tem uma lista de pend√™ncias sobrecarregada. </li></ul><br><blockquote>  Acontece que a equipe est√° no cruzamento de um grande n√∫mero de necessidades e √© improv√°vel que seja capaz de satisfaz√™-las.  Ao mesmo tempo, estar√° em constante press√£o e estresse de tempo.  N√≥s realmente n√£o queremos isso.  Portanto, voc√™ precisa pensar em como resolver esses problemas e, ao mesmo tempo, ter a oportunidade de analisar os dados. </blockquote><br><h2 id="peretekaya-ot-data-lake-k-data-mesh">  Fluindo do Data Lake para o Data Mesh </h2><br><p>  Felizmente, n√£o apenas nos perguntamos essa quest√£o.  De fato, um problema semelhante j√° foi resolvido na ind√∫stria (aleluia!).  Somente em outra √°rea: implanta√ß√£o de aplicativos.  Sim, estou falando da abordagem do DevOps, em que a equipe determina como implantar o produto que eles criaram. </p><br><p>  Uma abordagem semelhante √† solu√ß√£o de problemas do Data Lake foi sugerida por Zhamak Dehghani, consultor da ThoughtWorks.  Observando a Netflix e o Spotify resolverem esses problemas, ela escreveu um artigo incr√≠vel sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como ir al√©m de um lago de dados monol√≠tico para uma malha de dados distribu√≠dos</a> (o link para ele estava no in√≠cio do artigo).  As principais id√©ias que tiramos dela para n√≥s mesmos: </p><br><ul><li>  Divida o Data Lake grande em dom√≠nios de dados muito semelhantes aos dom√≠nios de design controlados por dom√≠nio.  Cada dom√≠nio √© um pequeno contexto delimitado. </li><li>  A equipe de recursos, respons√°vel pelos dom√≠nios DDD, tamb√©m √© respons√°vel pelos dom√≠nios de dados correspondentes.  Eles armazenam o circuito, fazem altera√ß√µes, carregam dados nele.  Ao mesmo tempo, eles mesmos sabem tudo: como alterar o carregamento de dados e n√£o quebrar nada quando o aplicativo √© alterado.  O conhecimento n√£o vai a lugar nenhum.  Para abrir os dados, eles n√£o precisam ir a lugar algum.  A pr√≥pria equipe conduz um ciclo de desenvolvimento completo, desde a altera√ß√£o de dados operacionais at√© o fornecimento de dados anal√≠ticos a terceiros.  Uma equipe possui tudo o que est√° associado ao dom√≠nio (o dom√≠nio comercial e o dom√≠nio de dados). </li><li>  Engenheiro de dados - uma fun√ß√£o dentro da equipe de recursos.  Isso n√£o precisa ser um indiv√≠duo, mas √© imperativo que a equipe possua essa compet√™ncia. </li></ul><br><h2 id="a-v-eto-vremya-komanda-data-engineering">  Enquanto isso, a equipe de engenharia de dados ... </h2><br><p>  Se voc√™ imagina que tudo isso √© realizado com o clique de um dedo, resta responder a duas perguntas: </p><br><p>  <strong>O que a equipe de Engenharia de Dados far√° agora?</strong>  A Dodo Pizza Engineering j√° possui uma equipe de plataforma / SRE.  Sua tarefa √© fornecer ferramentas aos desenvolvedores para facilitar a implanta√ß√£o de servi√ßos.  A equipe de engenharia de dados executar√° a mesma fun√ß√£o apenas para dados. </p><br><p>  Transformar dados operacionais em dados anal√≠ticos √© um processo complexo.  Tornar a an√°lise dispon√≠vel para toda a empresa √© ainda mais dif√≠cil.  √â a solu√ß√£o para esses problemas que a equipe de engenharia de dados tratar√°. </p><br><p>  Vamos fornecer √† equipe de recursos um conjunto conveniente de ferramentas e pr√°ticas com as quais eles podem publicar dados de seus servi√ßos para o resto da empresa.  Tamb√©m seremos respons√°veis ‚Äã‚Äãpelas partes gerais da infraestrutura do pipeline de dados (filas, armazenamento confi√°vel, clusters para realizar transforma√ß√µes nos dados). </p><br><p>  <strong>Como as habilidades de engenheiro de dados aparecer√£o na equipe de recursos?</strong>  A equipe de recursos est√° ficando mais dif√≠cil.  Obviamente, poder√≠amos tentar contratar um engenheiro de dados em cada uma de nossas equipes.  Mas √© muito dif√≠cil.  √â dif√≠cil encontrar uma pessoa com boa experi√™ncia em processamento de dados e convenc√™-la a trabalhar dentro de uma equipe de compras. </p><br><p>  A grande vantagem do Dodo √© que amamos o aprendizado interno.  Portanto, agora o nosso plano √© este: a equipe de Engenharia de Dados come√ßa a publicar os dados de alguns servi√ßos, gritos, picadas, mas continua a comer o cacto.  Assim que entendemos que temos um processo pronto para publica√ß√£o, come√ßamos a falar sobre isso na equipe de recursos. </p><br><p>  Temos v√°rias maneiras de fazer isso: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DevForum</a> , no qual informaremos como √© o processo que criamos, quais ferramentas existem e como us√°-las com mais efici√™ncia. </li><li>  Falar na DevForum nos ajudar√° a obter feedback dos desenvolvedores do produto.  Depois disso, poderemos unir equipes de produtos e ajud√°-los a resolver problemas com a publica√ß√£o de dados, organizar o treinamento para equipes. </li></ol><br><h2 id="potreblenie-dannyh">  Consumo de dados </h2><br><p>  Agora eu falei muito sobre a publica√ß√£o de dados.  Mas tamb√©m h√° consumo.  E esse problema? </p><br><p>  Temos uma equipe de BI maravilhosa que escreve relat√≥rios muito complexos para uma empresa de gerenciamento.  Dentro do Dodo IS, existem muitos relat√≥rios para nossos parceiros que os ajudam a gerenciar pizzarias.  Em nosso novo modelo, pensamos neles como consumidores de dados que possuem seus pr√≥prios dom√≠nios de dados.  E s√£o os consumidores que ser√£o respons√°veis ‚Äã‚Äãpor seus pr√≥prios dom√≠nios.  √Äs vezes, um dom√≠nio do consumidor pode ser descrito com uma √∫nica solicita√ß√£o ao reposit√≥rio anal√≠tico - e isso √© bom.  Mas entendemos que isso nem sempre funcionar√°.  √â por isso que queremos que a plataforma que criaremos para as equipes de produtos tamb√©m sejam usadas pelos consumidores de dados (porque, no caso de relat√≥rios dentro do Dodo IS, ser√£o apenas equipes). </p><br><p>  √â assim que vemos o trabalho com dados na Dodo Pizza Engineering.  Temos o prazer de ler seus pensamentos sobre isso nos coment√°rios. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475476/">https://habr.com/ru/post/pt475476/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475464/index.html">A maneira do arquiteto: certifica√ß√£o e imers√£o em produtos</a></li>
<li><a href="../pt475466/index.html">Intel Xeon E-2200. N√∫cleos de servidor, or√ßamento</a></li>
<li><a href="../pt475468/index.html">O que h√° de errado com o experimento da Microsoft sobre uma semana de 4 dias ou n√£o perco a cabe√ßa ao ver 40% de efici√™ncia</a></li>
<li><a href="../pt475472/index.html">Por que o gelo √© escorregadio: uma resposta cient√≠fica a uma pergunta infantil</a></li>
<li><a href="../pt475474/index.html">XML quase sempre √© mal aplicado</a></li>
<li><a href="../pt475478/index.html">Experi√™ncia Netflix: Netflix Inside</a></li>
<li><a href="../pt475480/index.html">O que voc√™ √© Como distinguimos a par√≥dia da humana - e at√© ganhamos</a></li>
<li><a href="../pt475482/index.html">Como a tarefa de teste se tornou uma biblioteca de produ√ß√£o</a></li>
<li><a href="../pt475486/index.html">AR-criadores: o surgimento de uma nova profiss√£o</a></li>
<li><a href="../pt475488/index.html">Apresentando o PyTorch: Deep Learning em processamento de linguagem natural</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>