<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง ๐๐ฝ ๐๐ฝ ููููุฉ ุชุตุญูุญ WebRTC โน๐พ ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู Voximplant ุ ูุณุชุฎุฏู WebRTC ููุฐ ุฅูุดุงุฆู: ุฃููุงู ูุจุฏูู ูู Flash ูููุงููุงุช ุงูุตูุช ูุงูููุฏูู ุ ุซู ูุจุฏูู ูุงูู. ููุฏ ูุตูุช ุงูุชูููููุฌูุง ุฅูู ูุณุงุฑ ุทููู ููุคูู ููุชุทู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููููุฉ ุชุตุญูุญ WebRTC</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/Voximplant/blog/417869/" style=";text-align:right;direction:rtl">  ูู Voximplant ุ ูุณุชุฎุฏู WebRTC ููุฐ ุฅูุดุงุฆู: ุฃููุงู ูุจุฏูู ูู Flash ูููุงููุงุช ุงูุตูุช ูุงูููุฏูู ุ ุซู ูุจุฏูู ูุงูู.  ููุฏ ูุตูุช ุงูุชูููููุฌูุง ุฅูู ูุณุงุฑ ุทููู ููุคูู ููุชุทููุฑ ุ ููุคุฎุฑุงู ููุท ุจุฏุฃุช ุฌููุน ุงููุชุตูุญุงุช ุงูุฑุฆูุณูุฉ ูู ุฏุนููุง ุ ูููุงู ุตุนูุจุงุช ูู ููู ุงูุดุงุดุฉ ุ ูุงูุนุฏูุฏ ูู ุชุฏููุงุช ุงูููุฏูู ุ ูุฃุญูุงููุง ูุชุนุทู ุงููุชุตูุญ ุจุจุณุงุทุฉ ุฅุฐุง ููุช ุจุฅููุงู ุชุดุบูู ุงูููุฏูู ูุชุดุบููู.  ุชุชูุญ ููุง ุงูุชุฌุฑุจุฉ ุงููุชุฑุงููุฉ ุชุฑุฌูุฉ ููุงูุงุช ูุซูุฑุฉ ููุงูุชูุงู ูู Habr ุ ูุงูููู ูููู ุงููููุฉ ุฅูู Lee Sylvester ูู Xirsys ุ ุงูุฐู ุณูุชุญุฏุซ ุนู ุชุตุญูุญ ุฃุฎุทุงุก ููุงููุงุช (ุงูููุฏูู) ูู Chrome ู Firefox ู Safari ู Edge.  ุชุตุญูุญ WebRTC ููุณ ุณููุงู ุ ุจู ูุฏููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนูููุงุช</a> ุฎุงุตุฉ ูุฅุฒุงูุฉ ุงูุณุฌูุงุช ูู ุงููุชุตูุญุงุช ุงูุดุงุฆุนุฉ.  ููุง ูุฏู ูู - ุณุชูุชุดู ุชุญุช ุงููุทุน (ุงูููุณุฏ: ุงููุซูุฑ ูู ูู ุดูุก ุ ุจูุง ูู ุฐูู WireShark). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/cf/yz/h0/cfyzh02gdgxjvmew9ifyv8p9iju.jpeg"></div><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุฌุงูุจ ุงููุธูู ูู WebRTC </h2><br>  ุฃุซูุงุก ุงูุนูู ูู Xirsys ุ ุฑุฃูุช ุจุนุถ ุงูุชุทุจููุงุช ุงูุฑุงุฆุนุฉ ุงูุชู ุชุณุชุฎุฏู WebRTC.  ูููู ุจูููุง ุชููู ูุฌููุนุฉ ุตุบูุฑุฉ ูู ุงููุทูุฑูู ุจุฅูุดุงุก ุฃุดูุงุก ุนุงููุฉ ุงูุชูููุฉ ุ ูุฅู ูุนุธู ุงููุจุฑูุฌูู ูุง ูููููู ุญุชู ุงูุจุฏุก ูู ุงุณุชุฎุฏุงู WebRTC.  ููุงุฐุงุ  ููู ุดูุก ุจุณูุท.  ุฅูู ูุนูุฏ. <br><br>  ุงููุซูุฑ ููุง ุนูู ุฏุฑุงูุฉ ุจุชุทุจูู ููุจ ูููุฐุฌู.  ูุซู ูุฐุง ุงูุชุทุจูู ูุฏูู ุนููู ูุฑุณู ุงูุทูุจุงุช ูุฎุงุฏู ูุณุชุฌูุจ ููุฐู ุงูุทูุจุงุช.  ุนูููุฉ ุจุณูุทุฉ ูุฎุทูุฉ ููููู ุงูุชูุจุค ุจูุง ุจุณูููุฉ.  ุฅุฐุง ุญุฏุซ ุฎุทุฃ ูุง ุ ูุฅููุง ุนุงุฏุฉ ูุง ูุนุฑู ุฃูู ููุธุฑ ุฅูู ุงูุณุฌูุงุช ููุง ูููู ุฃู ูุญุฏุซ.  ูููู ูุน WebRTC ุ ูู ุดูุก ููุณ ุจูุฐู ุงูุจุณุงุทุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุนุฏู ุงูุชุฒุงูู </h2><br>  ุฅุฐุง ููุช ูุฏ ูุชุจุช ุชุทุจูููุง ูุชุนุฏุฏ ุงูุฎููุท ุ ููู ุงููุญุชูู ุฃูู ุชุนุฑู ุนู ุงูุตุฏุงุน ุงูุฐู ูุญุฏุซู ูุฐุง ุงูุชุทููุฑ.  ุงูุฑุญูุงุช ุงูุฌููุฉ ูุงูุฐุงูุฑุฉ ุงูุณูุฆุฉ - ูููู ุบุงูุจูุง ูุง ุชููู ูุฌุฑุฏ ุฃุฎุทุงุก ูุตุนุจ ุงูุนุซูุฑ ุนูููุง. <br><br>  WebRTC ุบูุฑ ูุชุฒุงูู ูู ุงูุทุจูุนุฉ.  ููุฐุง ููุณ ุชุฒุงูู AJAX ุงูุจุณูุท ุนูู ุงูุฅุทูุงู.  ูุฑุณู ุงูุชูุงุธุฑ ุ ููุงู ุงูุนุฏูุฏ ูู ุทูุจุงุช AJAX ุงูุชู ุชู ุฅุทูุงููุง ูู ููุช ูุงุญุฏ ูุงูุชู ุชุญุงูู ุงูุชูููู ุจูู ุงูุจูุงูุงุช ุนูู ุฌูุงุฒู ููุจููุชุฑ.  ูุฐุง ูุง ูุฒุงู ุงูุชุฑููู. <br><br><h2 style=";text-align:right;direction:rtl">  NAT ุชุฌุงูุฒ ุญูู ุงูุฃูุบุงู </h2><br>  ูุฃุชู ุฅูุดุงุก ุชุทุจููุงุช ุงูููุจ ูุชุทููุฑ ุดูุก ูุนูู ุนูู ุงูุฎุงุฏู ููุณุชุฌูุจ ููุทูุจุงุช.  ุฃุณูุฃ ุดูุก ูููู ุฃู ูุญุฏุซ ูู ุงููููุฐ ุบูุฑ ุงูููุชูุญ ูู IPTables.  ูุชู ุนูุงุฌูุง ูู ุฏูููุชูู.  ูุง ููููู ุงูููู ุนู WebRTC. <br><br>  ุฎูุงุฏู ุงูููุจ ุ ููุง ุญุชู ุจุฑุงูุฌูุง ุ ูููู ุงูุฃุฌูุฒุฉ ุ ูู ุฃุฌูุฒุฉ ุฐุงุช ุนูุงููู IP ุนุงูุฉ.  ุฅููุง ูุตููุนุฉ ูุชููู ูุชุงุญุฉ ูู ุฃู ููุงู.  ููุชู WebRTC ูุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุจูุงูุงุช ูู ุฃุฌูุฒุฉ ููุจููุชุฑ ุงููุณุชุฎุฏููู.  ูุงูุชู ุนุงุฏุฉ ูุง ูููู ููุง ุนููุงู IP 192.168. ุดูุก ููุง ูุญุชุฑู ุจุฑุบุจุฉ ูู ุงูุงุณุชุฌุงุจุฉ ูุทูุจุงุช ุงูุดุจูุฉ. <br><br>  ูุนุฑู ูุคููู WebRTC ุนู ูุฐุง ุงูุฃูุฑ ุ ูุฐูู ุณูููู ุงููุญุฑู ุจุงููุฑุฒ ุนุจุฑ ุทุฑู ุงุชุตุงู ูุฎุชููุฉ ุ ูู ูุญุงููุฉ ูุฅูุดุงุก ุงุชุตุงู ุจูู ุฌูุงุฒู ููุจููุชุฑ ูู ูุชู ุชุตูููููุง ุจุดูู ูุจูุฑ ููุฐุง ุงูุบุฑุถ. <br><br><h2 style=";text-align:right;direction:rtl">  ูู ุฃูู ุชุจุฏุฃ ุงูุชุตุญูุญ </h2><br>  ูู ูุฐู ุงูููุงูุฉ ุฃุชุญุฏุซ ุนู ุงูุฃุฏูุงุช ุงูุฃุณุงุณูุฉ ูุญู ุงููุดุงูู ุงูุฃูุซุฑ ุดุนุจูุฉ.  ูููู ูุจู ุฐูู ุ ุฏุนูุง ูุฑู ููู ูููู WebRTC ุนุงุฏุฉู ุจุฅูุดุงุก ุงุชุตุงู. <br><br><h2 style=";text-align:right;direction:rtl">  ููู ููุดุฆ WebRTC ุงูุงุชุตุงู </h2><br>  ุชุชุทูุจ ุฌููุน ุงุชุตุงูุงุช WebRTC ุงููููู ูู ุงููุณุงุนุฏุฉ ูู ุจุฑูุชูููู ุงูุชุดููุฑ.  "ุงููููู ูู ุงููุณุงุนุฏุฉ" ูู ุฎุงุฏูู ูุงูุจุฑูุชูููู ุงูุฎุงุต ุจู ุงููุฐูู ุณูุชููู ุงููุชุตู ูู ุฎูุงูููุง ูู ุงูุงุชุตุงู ุจุงูุดุฎุต ุงูุฐู ูุชุตู ุจู ูุจู ุฅูุดุงุก ุงุชุตุงู ูุธูุฑ ุฅูู ูุธูุฑ. <br><br>  ุณูุณุชุฎุฏู WebRTC ุจุฑูุชูููู ุงูุชุดููุฑ ูููู ุงููุนูููุงุช ุญูู ุนูุงููู IP ุ ูุงููุฏุฑุฉ ุนูู ุงูุชูุงุท ูุชุดุบูู ุงูุตูุช ูุงูููุฏูู ุ ูุทุจูููุฌูุง ุงูุดุจูุฉ ุ ูุงูุจูุงูุงุช ุงููููููุฉ. <br><br>  ุงูุจุฑูุชูููู ุงูุดุงุฆุน ุงูุงุณุชุฎุฏุงู ูู COMET (ุฃู SIP - ููุงุญุธุฉ ุงููุชุฑุฌู) ููุขุฎุฐ ุงูููุจ.  ูุง ููุชุตุฑ WebRTC ุนูู ุงููุทูุฑูู ูุฃู ุดูุก ุ ูุฐูู ููููู ุงุณุชุฎุฏุงู ูุง ุชุฑูุฏ ุ ุนูู ุงูุฃูู ููู ุงูุจูุงูุงุช ูู ุฎูุงู ุงููููุฑุฉ ููุตู ุงููุณุฎ (ูุชู ุฐูู ูู ุฅุญุฏู ูุฑุด ุงูุนูู ุ ูุนูู - ูุฑุฉ ุฃุฎุฑู ูุชุฑุฌู).  ูุณูุญ ูู ุงูุชุดููุฑ ุงููุชุตู ุจุฌูุงุฒู ุงูููุจููุชุฑ ุจุจุฏุก ุงุชุตุงู ุจุงููุนู ุนุจุฑ WebRTC. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุนุฑุถ ูุงูุฅุฌุงุจุฉ </h4><br>  ุชุณุชุฎุฏู ุงุชุตุงูุงุช WebRTC "ุนุฑุถ" ู "ุฅุฌุงุจุฉ": <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุงูุงุชุตุงู ูุฎูู ูููุฑ ุฅูู "ุนุฑุถ" ุงูุฌุงูุจ ุงูุขุฎุฑ. </li><li style=";text-align:right;direction:rtl">  ูุชููู ุงูุทุฑู ุงูุขุฎุฑ "ุนุฑุถูุง" ุ ููุฎูู "ุงุณุชุฌุงุจุฉ" ูููุฑุฑูุง ูุฑุฉ ุฃุฎุฑู. </li><li style=";text-align:right;direction:rtl">  ูุชููู ุงูุจุงุฏุฆ ุงูุงุชุตุงู "ุฅุฌุงุจุฉ". </li></ol><br>  ูุฐุง ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ.  ูู ุงููุงุญูุฉ ุงูุนูููุฉ ุ ูุง ูุจุฏู ุชุจุงุฏู ุงููุฌุงููุงุช ุจูุฐู ุงูุจุณุงุทุฉ. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุจู ุฅุฑุณุงู "ุงูุนุฑุถ" ุ ูููู ุจุงุฏุฆ ุงูุงุชุตุงู ุจุฅูุดุงุก ูุซูู ูู <b>RTCPeerConnection</b> ููุชููู ููู ุญุฒูุฉ ุงููุต "SDP" (ุจุฑูุชูููู ูุตู ุงูุฌูุณุฉ) ุจุงุณุชุฎุฏุงู <b>rtcPeerConnection.createOffer ()</b> ุ  ุชุตู ูุฐู ุงูุญุฒูุฉ ุงููุฏุฑุฉ ุนูู ุงุณุชูุจุงู / ููู ุงูุตูุช ูุงูููุฏูู ูููุชุตูุญ. </li><li style=";text-align:right;direction:rtl">  ูุชู ุชุนููู ูุญุชููุงุช ุญุฒูุฉ SDP ุนูู ุฃููุง "ูุตู ููุฌุงูุจ ุงููุญูู ูู ุงูุงุชุตุงู" ุจุงุณุชุฎุฏุงู <b>rtcPeerConnection.setLocalDescription ()</b> . </li><li style=";text-align:right;direction:rtl">  ูุชู ุฅุฑุณุงู ุงูุญุฒูุฉ ุฅูู ุงูุฌุงูุจ ุงูุขุฎุฑ ุ ุญูุซ ูุชู ุชุนููู ูุญุชููุงุชูุง ุนูู ุฃููุง "ูุตู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุงุชุตุงู" ุจุงุณุชุฎุฏุงู <b>rtcPeerConnection.setRemoteDescription ()</b> . </li><li style=";text-align:right;direction:rtl">  ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุงุชุตุงู ุ ูุชู ุฅูุดุงุก ุญุฒูุฉ SDP ุงูุฎุงุตุฉ ุจู ุจุงุณุชุฎุฏุงู <b>rtcPeerConnection.createAnswer ()</b> ุ ููุชู ุชุนููู ูุญุชููุงุชูุง ุนูู ุฃููุง "ูุตู ููุฌุงูุจ ุงููุญูู ูู ุงูุงุชุตุงู". </li><li style=";text-align:right;direction:rtl">  ูุชู ุชูุฑูุฑ ุงูุญุฒูุฉ ุฅูู ุจุงุฏุฆ ุงูุงุชุตุงู ุ ุงูุฐู ูููู ุจุชุนููู ูุญุชููุงุชูุง ุนูู ุฃููุง "ูุตู ููุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุงุชุตุงู". </li></ol><br>  ูููุท ุจุนุฏ ูู ุงูุฅุฌุฑุงุกุงุช ุ ูุนุฑู ุงูุทุฑูุงู ุงููุชุตูุงู ูุฏุฑุงุช ุจุนุถููุง ุงูุจุนุถ ูุงุณุชูุจุงู ูุฅุฑุณุงู ุงูุตูุช / ุงูููุฏูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุงููุฑุดุญูู ICE </h4><br>  ููู ุงููุฏุฑุฉ ุนูู ุงูุนูู ูุน ูุณุงุฆู ุงูุฅุนูุงู ููุณุช ูุงููุฉ.  ุจุนุฏ ูู ุดูุก ุ ูู ุชูู ุงูุฃุทุฑุงู ุงููุชุนุงูุฏุฉ ุจุนุฏ ุฃู ุดูุก ุนู ุญุงูุฉ ุงูุดุจูุฉ. <br><br>  ููููู ูุนุฑูุฉ ุจุฑุงูุฌ ุชุฑููุฒ ุงูููุฏูู ุงูุชู ูุฏุนููุง ุงููุชุตูุญ ููุง ุฅุฐุง ูุงูุช ููุงู ูุงููุฑุง ุนูู ุงูููุจููุชุฑ ุงููุญููู ุนูู ุงูููุฑ ุชูุฑูุจูุง.  ูุณุชุบุฑู ุงูุฃูุฑ ููุชูุง ููุนุฑูุฉ ุนููุงู IP ุงูุฎุงุฑุฌู ูููุทู ุนูููุฉ NAT ุ ููุชู ุชุจุงุฏู ุงููุนูููุงุช ุญูู ุญุงูุฉ ุงูุดุจูุฉ ุนูุฏ ุชููู ูุฐู ุงููุนูููุงุช. <br><br>  ุจูุถู ุชูููุฉ Trickle ICE (ุบูุฑ ูุฏุนููุฉ ูู ุฌููุน ุงููุชุตูุญุงุช - ููุงุญุธุฉ ุงููุชุฑุฌู) ุ ูููู ุชุฃุณูุณ ุงูุงุชุตุงู ุจูู ุฌูุงุฒู WebRTC ูู ุฃู ููุช - ุจูุฌุฑุฏ ุงูุนุซูุฑ ุนูู "ูุฑุดุญ" ููุงุณุจ. <br><br>  ูุฌุจ ุนูู ุงููุทูุฑ ุงูุงุดุชุฑุงู ูู ุญุฏุซ <b>onicecandidate</b> (ุฌููุน ุงูุฃุญุฑู ุงูุตุบูุฑุฉ!) ูุชูุฑูุฑ ุญุฒู SDP ุงููุณุชููุฉ ุฅูู ุงูุฌุงูุจ ุงูุขุฎุฑ ุ ุญูุซ ููุฒู ุฅุฑุณุงููุง ุจูุงุณุทุฉ WebRTC ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <b>addIceCandidate</b> (ูููุง ุ ุงูููุงุฌุฃุฉ ุ ุงูุญุฑู ุงููุจูุฑ).  ูุนูู ูู ููุง ุงูุงุชุฌุงููู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงุชุตุงู </h2><br>  ูุณุชุฎุฏู WebRTC ุฃุดูุงุก ูุซู STUN (ุฌูุณุฉ ุนูู ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ูู NAT) ู TURN (ุงูุงุฌุชูุงุฒ ุจุงุณุชุฎุฏุงู ุงูุชุฑุญูู ุญูู NAT) ูุฅูุดุงุก ุงุชุตุงู.  ูุจุฏู ุงูุฃูุฑ ูุฎูููุง ุ ูููู ูู ุงููุงูุน ูุง ููุฌุฏ ุณูู ุจุฑูุชูููููู ููุดุจูุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ุฎุงุฏู STUN </h4><br>  ูุนุฏ ุฃูู ุจุฑูุชูููููู ุฃูุซุฑ ุชุนููุฏูุง ูู ุฎุงุฏู ุงูุตุฏู.  ุนูุฏ ุชูุตูู ุงููุดุงุฑููู ูุฑูุฏูู ูุตู ููููุฉ ุงูุงุชุตุงู ุจูู ุ ูุฅููู ุจุญุงุฌุฉ ุฅูู ุนููุงู IP ุงูุนุงู ุงูุฎุงุต ุจูู.  ูุนูู ุงูุฃุฑุฌุญ ูู ูููู ุนููุงู IP ุงูุฎุงุต ุจุงูููุจููุชุฑ ุ ูุงุฏุฑูุง ูุง ูุชู ุชุฎุตูุต ุงูุฃุฌูุฒุฉ ุงูุนุงูุฉ ูุฃุฌูุฒุฉ ุงููุณุชุฎุฏู.  ุชู ุงุฎุชุฑุงุน ุชูููุฉ NAT ุจุงููุงูู ุญุชู ูุง ูุชู ุนุฒููุง.  ููุงุณุชูุฑุงุฑ ูู ูุนุฑูุฉ ุนููุงูู ุงูุนุงู ุ ูููู ุงููุชุตูุญ ุจุชูุฏูู ุทูุจ ุฅูู ุฎุงุฏู STUN.  ุนูุฏ ุงููุฑูุฑ ุนุจุฑ NAT ุ ุชููู ุญุฒูุฉ ุงูุดุจูุฉ ุจุชุบููุฑ ุนููุงู ุงูุฅุฑุฌุงุน ุงูุฎุงุต ุจูุง ุฅูู ุงูุฌูููุฑ.  ุจุนุฏ ุงุณุชูุงู ุงูุญุฒูุฉ ูุน ุงูุทูุจ ุ ูููู ุฎุงุฏู STUN ุจูุณุฎ ุนููุงู ุงูุฅุฑุฌุงุน ุงูุฎุงุต ุจุงูุญุฒูุฉ ุฅูู ุญูููุชูุง ูุฅุฑุณุงููุง ูุฑุฉ ุฃุฎุฑู.  ุจุงููุฑูุฑ ุนุจุฑ NAT ูู ุงูุงุชุฌุงู ุงููุนุงูุณ ุ ุชููุฏ ุงูุญุฒูุฉ ุนููุงู IP ุงูุนุงู ุงูุฎุงุต ุจูุง ุ ูููู ุชุธู ูุณุฎุฉ ูู ูุฐุง ุงูุนููุงู ูู ุงูุญูููุฉ ุ ุญูุซ ูููู ูู WebRTC ูุฑุงุกุชูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qh/vo/8r/qhvo8rafhc4akmapxnb7vtni2pe.png"></div><br><h2 style=";text-align:right;direction:rtl">  ูู ุจุชุดุบูู ุงูุฎุงุฏู </h2><br>  ูุณุชุฎุฏู ุฎุงุฏู TURN ููุญู ุจุฑูุชูููู STUN.  ููุณ ุงูุญุฒู ุ ุงูุฑุคูุณ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุดูุก ุฌุฏูุฏ: <b>ุงูุฃูุฑ</b> .  ุงูุฎุงุฏู ูููู: ูุชุตู ููุง ุงูุนููุงุก ุจู ูู ุฎูุงู ูููุฐ <b>ุชุฎุตูุต</b> UDP <b>ููููููู</b> ุจูุงูุงุชูู ุนุจุฑ ุงูุฎุงุฏู. <br><br>  ุชู ุชุตููู ุฎูุงุฏู TURN ุจุญูุซ ูููู ูุจุงุฏุฆ ุงูุงุชุตุงู ููุฒุงุช ุฃูุซุฑ ูู ุงูุฌุงูุจ ุงูุขุฎุฑ.  ูุคุฏู ูุฐุง ุฅูู ุชุฃุซูุฑ ูุซูุฑ ููุงูุชูุงู ุนูุฏูุง ุชููู ุงูููุงููุฉ ูู ุฎูุงู ุฎุงุฏู TURN ูุงุฌุญุฉ ุฃู ุบูุฑ ูุงุฌุญุฉ ุ ุงุนุชูุงุฏูุง ุนูู ูู ูุชุตู ุจูู (ูุชุฐูุฑ ูู ูุชุฑุฌู Skype - note). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/07/j6/qq/07j6qqsbyc7fod_yx2vuk_9zctu.png"></div><br><h2 style=";text-align:right;direction:rtl">  ุชุตุญูุญ ุงูุฃุฎุทุงุก </h2><br>  ูุฐุง ุ ูุฑุฃุช ุญุชู ูุฐู ุงูููุฑุฉ.  ูุญู ุณุนุฏุงุก ุจุงููุชุฑุฌู ููุชุฐูุฑ ุฃู ุงูููุงูุฉ ุชุฏูุฑ ุญูู ุชุตุญูุญ ุฃุฎุทุงุก WebRTC.  ููู ูู ูุง ุณุจู ูู ุงูุญุฏ ุงูุฃุฏูู ุงูุถุฑูุฑู ุ ูุงูุฐู ุจุฏููู ูุง ููููู ุญุชู ุงูุจุฏุก.  ูููู ุฅุฐุง ุจุฏุฃุช ุ ููู ููู ูุฏูู ุญุธ ุบูุฑ ุฅูุณุงูู ุ ูุณูู ูููุณุฑ. <br><br>  ุณูู ูููุณุฑ ุจุนุฏุฉ ุทุฑู ูุฎุชููุฉ.  ุงูุฃูู ูู ููุต ุงูุงุชุตุงู.  ููุฏ ูุฑุฑุช ููุงู ูู ุฅุนุฏุงุฏุงุช ุฎุงุฏู STUN ู TURN ุฅูู ูู ูู WebRTCs ุ ูุณุงุนุฏุชูู ุนูู ุชุจุงุฏู ุงูุนุฑูุถ ูุงูุฅุฌุงุจุงุช ููุฑุดุญู ICE ุ ูููู ูุง ููุฌุฏ ููุฏูู ุฃู ุตูุช.  ูู ุฃูู ุชุจุฏุฃุ  ูุน ูุดุงูู ุงูุชุดุบูู ุงููุญููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุตุญูุญ ุฃุฎุทุงุก WebRTC ุงููุญูู </h2><br>  ููุง ูุชุจุช ุฃุนูุงู ุ ูุฅู ุงูุนูู ุงูุฑุฆูุณู ูู WebRTC ูุญุฏุซ ุนูู ุฌุงูุจ ุงููุชุตูุญ.  ุฎูุงุฏู STUN ู TURN ุจุณูุทุฉ ููุบุงูุฉ ุ ูุฐูู ุชุญุฏุซ ูุนุธู ุงููุดุงูู ูู ุดูุฑุฉ JavaScript ุงูุฎุงุตุฉ ุจู ุ ูุงูุชู ุชุนูู ูู ูุณุชุนุฑุถูู.  ุญุฒูู ููููู ุญูููู.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุฅุฐุง ุญุฏุซ ุงูุดูุก ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูุญูููุง ูู ุงููุชุตูุญุงุช ุ ูุณุชููู ูุฏูู ูุฑุตุฉ ูุจูุฑุฉ ูุชุตุญูุญ ุงูุฃุฎุทุงุก! <br><br>  ุฃูู ุดูุก ูุฌุจ ุงูุชุญูู ููู ูู ุฅุดุงุฑุงุชู.  ูู ุฑูุฒู ุงูุฐู ูููู ุชูููู ุงูุตูุช ูุน ุงูููุฏูู (ุนุฑุถ ุ ุฅุฌุงุจุฉ) ููุนูููุงุช ุญูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ (ูุฑุดุญุงุช ุงูุฌููุฏ) ุจูู ุงููุชุตูุญุงุช.  ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุงูุญุฒู ุงูุชู ุชู ุฅุฑุณุงููุง ูุงุณุชูุงููุง ูุฅุฑุณุงููุง WebRTC: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชููู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุงุชุตุงู ุนุฑุถุงุ  ูู ุชููู ุจุงุฏุฆ ุงูุงุชุตุงู ุฑุฏูุงุ  ูู ูุชู ุฅูุดุงุก ุงุชุตุงู ุฏูู ูุฐุง ุงูุญุฏ ุงูุฃุฏูู ูู ุชุจุงุฏู ุงููุฑุงูู ุ </li><li style=";text-align:right;direction:rtl">  ูู ูุฑุฑ WebRTC ุนูุฏ ุทุฑูู ุงูุงุชุตุงู ุงูุญุฒู ูุน ูุฑุดุญู ICEุ  ูู <b>ุงุณุชุจุฏูุช</b> ูุฐู ุงูุญุฒู <b>ููุฑุฑุชูุง</b> ุฅูู ุงูุฌุงูุจ ุงูุขุฎุฑ ุจุงุณุชุฎุฏุงู <b>addIceCandidate</b> ุ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ูู ุดูุก <b>ูุณูุฑ</b> ุนูู ูุง ูุฑุงู ูุน ุชุจุงุฏู ุงูุญุฒู ุ <b>ููู ุชู ุงุณุชุฏุนุงุก</b> ูุนุงูุฌ ุญุฏุซ <b>onaddstream</b> ููู ููุช ุจุชุซุจูุช ุงููุงุฆู ุงููุงุชุฌ ูู ุนูุตุฑ HTML ูุชุดุบูู ุงูููุฏูู (ุฃู ุงูุตูุช)ุ </li></ul><br>  ุฅุฐุง ูู ููู ุชุจุงุฏู ุงูุญุฒู ูุฑูุจูุง ุ ูููููู ุงูุฎูุถ ูู ุดุฌุงุนุฉ ุงูุฌูุณุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุฑูุชูููู ูุตู ุงูุฌูุณุฉ </h2><br>  ูุชู ุฅูุดุงุก ุญุฒู ุงูุนุฑูุถ ูุงูุฑุฏูุฏ ูุงููุฑุดุญ ICE ุจูุงุณุทุฉ WebRTC ุจุชูุณูู ูุต SDP.  ูููููุฉ ุงูุฃููู ุ ุชุจุฏู ูุญุชููุงุช ุงูุญุฒู ูุฎููุฉ ุ ูููู ูุน ุงููููู ูู ุงูุชุญุถูุฑ ุ ููููู ุงูุญุตูู ุนูู ุงููุซูุฑ ูู ุงูุงุณุชูุงุฏุฉ ูููุง ุฃุซูุงุก ุชุตุญูุญ ุงูุฃุฎุทุงุก.  ุชุตู ููููุจูุฏูุง SDP ุฌูุฏูุง ุ ูููู ูุฌุฏุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตููุง ุฃูุถู</a> ูู. <br><br>  ูุนุฏ ุงูุญูู ุฃูู ุญูู ูู ุญุฒู ICE SDP ุงููุฑุดุญุฉ.  ุจุงููุณุจุฉ ุฅูู WebRTC ุ ูููู ุฃู ูุญุชูู ุงูุญูู ุนูู ุฅุญุฏู ุงูููู ุงูุซูุงุซ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุถูู ุงูุทุจุงุน </li><li style=";text-align:right;direction:rtl">  ุงูุชุจ srflx ุ </li><li style=";text-align:right;direction:rtl">  ุชุชุงุจุน ุงููุชุงุจุฉ. </li></ul><br><h4 style=";text-align:right;direction:rtl">  ุงูุชุจ ูุถูู </h4><br>  ูุญุฏุฏ ููุน <b>ุงููุถูู</b> ูุฑุดุญ ICE ูุงุชุตุงู ูุญูู (ูุนุฏุฏ WebRTC ุงูุนุฏูุฏ ูู ุงููุฑุดุญูู ุนูู ุฃูู ุฅูุดุงุก ุงุชุตุงู ุ ููุง ููุนุฑู ููุฏููุง ุฃูููุง ุณูุธูุฑ - ููุงุญุธุฉ ูู ุงููุชุฑุฌู).  ูุง ูุชุทูุจ ูุซู ูุฐุง ุงูุงุชุตุงู ุฅูุง STUN ุฃู ุฎุงุฏู TURN ุ ุญูุซ ูููู ููุฃุฌูุฒุฉ ูู ุงูุดุจูุฉ ุงููุญููุฉ ุฅูุดุงุก ุงุชุตุงูุงุช ุงูุดุจูุฉ ูุจุงุดุฑุฉ.  ุนูุฏ ุชุตุญูุญ ุงูุฃุฎุทุงุก ูู ุงูุดุจูุฉ ุงููุญููุฉ ุ ูุง ุนููู ุณูู ุงูุชุญูู ูู ุฅุฑุณุงู ุญุฒู <b>ุงููุถูู</b> ูุชุตุญูุญูุง ูุงูุชุฃูุฏ ูู ุฃู ุงูุฃุฌูุฒุฉ ูููููุง ุฅุฑุณุงู ุญุฒู UDP ุฅูู ุจุนุถูุง ุงูุจุนุถ.  ุนูู ุงูุฑุบู ูู ูุฌูุฏ ุงุณุชุซูุงุกุงุช ุ ููุฏ ุฑุฃูุช ุนููููุง ุชููููุงุช ุงูุดุจูุฉ ุงูุชู ูุญุชุงุฌ ูููุง ุงููุชุตูุญ ุฅูู ุฎุงุฏู TURN ููุงุชุตุงู ... ุจููุณู. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุชุจ srflx </h4><br>  ูุฒูุฌ ุงูุฃุญุฑู "srflx" ูุฑูุฒ ุฅูู "ุฎุงุฏู ุงูุนูุงุณู" ูููุซู ูุฑุดุญู ุงูุงุชุตุงู ุจุงุณุชุฎุฏุงู ุนููุงู IP ุฎุงุฑุฌู ุ ุญูุซ ูููู ุฎุงุฏู STUN ูุงููุงู ููุงุชุตุงู (ุจุงุณุชุฎุฏุงู ุชูููุฉ ุงุฎุชุฑุงู NAT ุ ูุงูุชู ุชูุฌุญ ูู ุญูุงูู 80ูช ูู ุงูุญุงูุงุช ุ ูุงุญุธ ุงููุชุฑุฌู). <br><br><h4 style=";text-align:right;direction:rtl">  ุชุชุงุจุน ุงููุชุงุจุฉ </h4><br>  ูุดูุฑ "Relay" ุฅูู ุงูุงุชุตุงู ูู ุฎูุงู ุฎุงุฏู TURN ุ ูุงูุฐู ูููู ุฏุงุฆููุง ูุงุฌุญูุง ุชูุฑูุจูุง.  ูู ุงูููู ุฃู ุชุชุฐูุฑ ุฃู WebRTC ุบูุฑ ูุทููุจ ูุฅูุดุงุก ุซูุงุซ ุญุฒู ูุฎุชููุฉ ุชูุงููุง ูุน ุญูู "ุงูููุน" ุ  ุชุนุชูุฏ ููููุฉ ุงุฎุชูุงุฑ ุงููุฑุดุญูู ุนูู ุชุทุจูู WebRTC ูู ุฅุตุฏุงุฑ ูุชุตูุญ ูุนูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงุชุตุงู ุงูุฌูุงุฒ </h2><br>  ุชูุฏู Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุทุจูู ููุจ</a> ูุฎุตุตูุง ูุงุฎุชุจุงุฑ ุงุชุตุงูุงุช WebRTC ุนูู ุฌูุงุฒู.  ุงูุชุญ ุงูุตูุญุฉ ูุงููุฑ ุนูู ุฒุฑ "ุงุจุฏุฃ" ูุณูุญุงูู ุฑูุฒ ุฌุงูุง ุณูุฑูุจุช ุฅูุดุงุก ุงุชุตุงู ุจุฎุงุฏู Google ุจุงุณุชุฎุฏุงู ุงูุฅุดุงุฑุงุช ูุฎูุงุฏู STUN ู TURN ูู Google. <br><br><h2 style=";text-align:right;direction:rtl">  WebRTC ุงูุฏุงุฎููุฉ </h2><br>  ููุฏ ููุช ุจูุญุต ุฌููุน ุงูุญุฒู ุ ูุงูุชุญูู ูู ุงูุฑูุฒ ุ ูู ุดูุก ูุจุฏู ุนูู ูุง ูุฑุงู ุ ูููู ูุง ูุนููุ  ููุซู ูุฐู ุงูุญุงูุงุช ุ ุฒูุฏุช Google ูุชุตูุญ Chrome ุจูุณู ุฎุงุต ูุนุฑุถ ุงูุฃุฌุฒุงุก ุงูุฏุงุฎููุฉ ูู WebRTC ุฃุซูุงุก ุฅุนุฏุงุฏ ุงูุงุชุตุงู ูุจุนุถ ุงูุฑุณูู ุงูุจูุงููุฉ ุงูุฌูููุฉ ูู ุญุงูุฉ ูุฌุงุญ ุงูุงุชุตุงู.  ููุงุณุชุฎุฏุงู ุ ุงูุชุญ ุฑุงุจุทูุง ููููุง ุฎุงุตูุง ูู ุงููุชุตูุญ: <br><br> <code>chrome://webrtc-internals</code> <br> <br>  ุฅุฐุง ูุงู ูุฏูู ุจุงููุนู ุชุทุจูู ูุณุชุฎุฏู WebRTC ููุชูุญูุง ุ ูุณุชุฑู ุนูู ุงูููุฑ ูุฌููุนุฉ ูู ุงูุจูุงูุงุช ุงููููุฉ.  ุฎูุงู ุฐูู ุ ูุง ุนููู ุณูู ูุชุญ ุนูุงูุฉ ุชุจููุจ ุฃุฎุฑู ูููุงู ุดูุก ูุณุชุฎุฏู WebRTC.  ุชุนุฑุถ ุนูุงูุฉ ุงูุชุจููุจ ุฌููุน ุงูููุงููุงุช ุฅูู ูุงุฆู <b>RTCPeerConnection</b> ูุชุณูุญ ูู ุจุฑุคูุฉ ููููุฉ ุฅูุดุงุก ุงูุงุชุตุงู ูู ุงูููุช ุงููุนูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ICE </h2><br>  ูู ุงูุฌุฒุก ุงูุนููู ูู ุงูุตูุญุฉ ุชูุฌุฏ ุณูุณูุฉ ICE ุงูุชู ุชู ุงุณุชุฎุฏุงููุง ูุชููุฆุฉ ุงูุงุชุตุงู.  ุฅุฐุง ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชููููู ุ ูุณูููู ูุฐุง ูุฑุฆููุง ุนูู ุงูููุฑ (ุจูุงุณุทุฉ "ุณุทุฑ ICE" ูุดูุฑ ุงููุคูู ุฅูู ุชูููู ูุงุฆู RTCPeerConnection ุจูุงุฆูุฉ ูู ุฎูุงุฏู STUN ู TURN (ูุงุฆู 'iceServers') - ููุงุญุธุฉ ูู ุงููุชุฑุฌู).  ุฑุจูุง ูุง ุชูุฌุฏ ูุงุฆูุฉ ุจุงูุฎูุงุฏูุ  ูุฌุจ ุนููู ุชูููู ูุงุฆู RTCPeerConnection ูุจู ุฅุฌุฑุงุก ุงูููุงููุฉ ุงูุฃููู <b>ูุฅูุดุงุก createOffer</b> ุฃู <b>createAnswer</b> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/lo/hz/xo/lohzxoou7x8sbrhqfwuruhcwsw4.png"></div><br><h2 style=";text-align:right;direction:rtl">  ุฃุญุฏุงุซ RTCPeerConnection </h2><br>  ูุนุฑุถ ุงููุณู ุงูุฏุงุฎูู ุงูุชุงูู ุงูููุงููุงุช ุฅูู ุทุฑู <b>RTCPeerConnection</b> ูุงูุฃุญุฏุงุซ ุงููุณุชููุฉ ูู ุงููุงุฆู ุจุชุฑุชูุจ ุฒููู.  ูุชู ุชูููุฒ ุงูุฃุฎุทุงุก ุจุนูุงูุฉ ุจุงูููู ุงูุฃุญูุฑ.  ูุฑุฌู ููุงุญุธุฉ ุฃู <b>addIceCandidateFailed</b> ุงูุฃุญูุฑ <b>ููุณ ูู</b> ุงูุบุงูุจ ุนูุงูุฉ ุนูู ูุฌูุฏ ุฎุทุฃ ููุฏ ูุชู ุฅูุดุงุก ุงูุงุชุตุงู ุจุดูู ุทุจูุนู.  ุฅุฐุง ูุงู ุงูุงุชุตุงู ูุงุฌุญูุง ุ ูุณูููู ุงูุญุฏุซ ุงูุฃุฎูุฑ ูู ุงููุงุฆูุฉ ุนุจุงุฑุฉ ุนู ุญุฏุซ <b>iceconnectionstatechange</b> ุจูููุฉ <b>ูุงููุฉ</b> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุณู "ุฅุญุตุงุฆูุงุช" </h2><br>  ุงููุณู ุงูุชุงูู ุฐู ุตูุฉ ุนูุฏูุง ูุชู ุชุฃุณูุณ ุงูุงุชุตุงู ุจูุฌุงุญ.  ุฃูู ูุญุชูู ุนูู ุฅุญุตุงุกุงุช ุงูุจูุงูุงุช ุงููุฑุณูุฉ ูุชุฃุฎูุฑ ุงูุดุจูุฉ.  ุงูุฎูุงุฑุงู ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ููุง: <b>ssrc</b> ู <b>bweforvideo</b> . <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ssrc</b> ุ "ูุตุฏุฑ ุงูุจุซ" ุ ูููุฒ ูู ูู ูุณุงุฑุงุชู ุงูุตูุชูุฉ ูุงููุฑุฆูุฉ.  ูุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุจูุงูุงุช ูุงููุนููุงุช ุงููุฑุณูุฉ ูุซู ููุช <b>ุงูุฐูุงุจ ูุงูุฅูุงุจ</b> ุ </li><li style=";text-align:right;direction:rtl">  <b>ูุนุฑุถ bweforvideo</b> ุ BandWidth Estimate ุนุฑุถ ููุงุฉ ุงูุดุจูุฉ ุงููุณุชุฎุฏูุฉ. </li></ul><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/te/9e/wt/te9ewt2nl26jhbezdqj3_rkr8d4.png"></div><br><h2 style=";text-align:right;direction:rtl">  ุฏุงูุฉ GetStats </h2><br>  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ูู ุชุชููู ูู ุงููุตูู ุฅูู ุงูุตูุญุฉ ุงูุฏุงุฎููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ุชุญุฏุซ ูุดููุฉ ูุน ุงููุณุชุฎุฏู ุงูุฎุงุต ุจู.  ูู ูุฐู ุงูุญุงูุฉ ุ ููููู ุงูุญุตูู ุนูู ููุณ ุงูุจูุงูุงุช ุงูุชู <b>ุชุธูุฑูุง</b> ุงูุตูุญุฉ ุงูุฏุงุฎููุฉ ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุทุฑููุฉ <b>getStats</b> ุนูู ูุงุฆู <b>RTCPeerConnection</b> .  ุชุนูู ูุฐู ุงูุทุฑููุฉ ุนูู ุฅุนุฏุงุฏ ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู ุงูุชู ุณูุชุตู ุจูุง WebRTC ูู ูู ูุฑุฉ ูุญุฏุซ ูููุง ุดูุก ูุซูุฑ ููุงูุชูุงู.  ุชุญุตู ุงููุธููุฉ ุงููุทููุจุฉ ุนูู ูุงุฆู ูุญุชูู ุนูู ุงูุญููู ุงูุชู ุชุนุฑุถูุง ุงูุตูุญุฉ ุงูุฏุงุฎููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">rtcPeerConnection.getStats(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stats</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"lostpackets"</span></span>).innerText = stats.packetsLost; });</code> </pre><br>  ุฃุฏุงุฉ ุฃุฎุฑู ูููุฏุฉ ูู ุญุฏุซ <b>oniceconnectionstatechange</b> ููุงุฆู <b>RTCPeerConnection</b> .  ุณูุชููู ูุนุงูุฌ ุงูุฃุญุฏุงุซ ูุนูููุงุช ุชูุฏู ุงูุงุชุตุงู.  ุงูุฎูุงุฑุงุช ุงูููููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุฌุฏูุฏ</b> : ูุชููุน WebRTC ูุฑุดุญูู ูู ุงูุฌุงูุจ ุงูุซุงูู ูู ุงูุงุชุตุงู ุ ููุฌุจ ุฅุถุงูุชูู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <b>addIceCandidate</b> ุ </li><li style=";text-align:right;direction:rtl">  <b>ุงูุชุญูู</b> : ุชููู WebRTC ูุฑุดุญูู ูู ุงูุฌุงูุจ ุงูุซุงูู ูู ุงูุงุชุตุงู ุ ูููุงุฑููู ุจุงููุฑุดุญูู ุงููุญูููู ูููุฑุฑูุง ุงูุฎูุงุฑุงุช ุ </li><li style=";text-align:right;direction:rtl">  <b>ูุชุตู</b> : ูุชู ุงุฎุชูุงุฑ ุฒูุฌ ููุงุณุจ ูู ุงููุฑุดุญูู ููุชู ุชุฃุณูุณ ุงูุงุชุตุงู.  ูุดุงุฑ ุฅูู ุฃูู ุจุนุฏ ุฐูู ุ ูููู ูููุฑุดุญูู ุงูุงุณุชูุฑุงุฑ ูู ุงููุฏูู ุ ููููุง ูุจุฑูุชูููู Trickle ICE ุ </li><li style=";text-align:right;direction:rtl">  <b>ุงูุชูู</b> : ุชู ุงุณุชูุงู ุฌููุน ุงููุฑุดุญูู ูุฅูุงูุฉ ุงูุงุชุตุงู. </li><li style=";text-align:right;direction:rtl">  <b>ุบูุฑ ูุชุตู</b> : ุชู <b>ูุทุน ุงูุงุชุตุงู</b> .  ุนูู ุงููููุงุช ุบูุฑ ุงููุณุชูุฑุฉ WebRTC ูุงุฏุฑ ุนูู ุฅุนุงุฏุฉ ุชูุตูู ููุณู ุ ูุฑุงูุจ ุงูุนูู <b>ุงููุชุตู</b> ุ </li><li style=";text-align:right;direction:rtl">  <b>ูุบูู</b> : ุชู ูุทุน ุงูุงุชุตุงู ููู ูุนุฏ WebRTC ูุนูู ูุนู. </li></ul><br>  ุฅุฐุง ุงูุชูู ุงูุงุชุตุงู ูู ุงูุญุงูุฉ <b>ุงููุงุดูุฉ</b> ุ ููููููุง ูุญุต ุงููุฑุดุญูู ุงููุณุชูุจููู ูู ููุง ุงูุฌุงูุจูู ูููู ุณุจุจ ูุดู ุงูุงุชุตุงู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุฏู ุฃุญุฏ ุงูุฌุงูุจูู <b>ูุฑุดุญูู</b> <b>ูููุถูู</b> ู <b>srflx</b> ุ ูุฅู <b>ุงููุถูู</b> ุงูุขุฎุฑ <b>ูุงููุฑุญู</b> ุ ูููู ุงูุฃุฌูุฒุฉ ูุงูุช ุนูู ุดุจูุงุช ูุฎุชููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุณุชุทูู ุฃุณูุฏ ุจุฏูุงู ูู ุงูููุฏูู </h2><br>  ุบุงูุจูุง ูุง ูููู ููุงู ูููู ุนูุฏ ุฅูุดุงุก ุงูุงุชุตุงู ุ ูุชู ุฅุฑุณุงู ุงูุตูุช ุ ูููู ุจุฏูุงู ูู ุงูููุฏูู ุ ูููู ูุฏู ุฃุญุฏ ุงููุดุงุฑููู ุฃู ูููููุง ูุณุชุทูู ุฃุณูุฏ.  ูุญุฏุซ ูุฐุง ุบุงูุจูุง ุฅุฐุง ููุช ุจุชุนููู ูุงุฆู ุงูููุฏูู ุงููุณุชูู ุฅูู ุนูุตุฑ HTML ูุจู ุฃู ููุชูู ุงูุงุชุตุงู ุฅูู ุงูุญุงูุฉ <b>ุงูููุชููุฉ</b> . <br><br><h2 style=";text-align:right;direction:rtl">  ููููุฉ ูุฒุฉ ุนุตุง ูู ุงูุฎุงุฑุฌ </h2><br>  ุจุงูุฅุถุงูุฉ ุฅูู ูุงุฆู <b>RTCPeerConnection ููุณู ูุงูุฃุฌุฒุงุก</b> ุงูุฏุงุฎููุฉ ุงูุชู ูุนุฑุถูุง ุงููุณุชุนุฑุถ ุ ููููู ุงุณุชุฎุฏุงู ุฃุฏูุงุช ุชุญููู ุญุฒู ุงูุดุจูุฉ ูุซู Wireshark.  ูููู ููุฐู ุงูุฃุฏูุงุช ุนุฑุถ ุญุฒู ุจุฑูุชููููุงุช WebRTC ุงููุณุชุฎุฏูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุณูุนุฑุถ ูู Wireshark ูุญุชููุงุช ุญุฒู STUN ูู ุงููุงูุฐุฉ ุงูุฑุฆูุณูุฉ ุ ูููููู ุชุตููุชูุง ุนู ุทุฑูู ูุชุงุจุฉ ุงููููุฉ ุงูุฃุณุงุณูุฉ "stun" ูู ุญูู ุงูููุชุฑ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/c4/89/jf/c489jf68awl5u25fah6xnv8piee.png"></div><br>  ูุง ุงูุฐู ูุฌุจ ุงููุธุฑ ุฅููู ูู ุงุณุชุฌุงุจุงุช ุงูุฎุงุฏูุ  ุฅุฐุง ุฑุฃูุช ุฅุฌุงุจุงุช ูู ููุน <b>Binding ููุท</b> ุ ููุฐุง ูุนูู ุฃูู ูุชู ุฏุนู STUN (ููุงุด IP ุงูุฎุงุฑุฌู) ููุท ุ ููููู ูู WebRTC ุชูุฏูู ูุฑุดุญู <b>srflx</b> ููุท.  ุฅุฐุง ูุงูุช ุงูุฅุฌุงุจุงุช ุชุญุชูู ุนูู ุญุฒู ูุฎุตุตุฉ ูู TURN <b>ุชุฎุตูุต</b> ู <b>CreatePermission</b> ุ ูุณุชุชุงุญ ุงููุฑุตุฉ ูู WebRTC ููุญุงููุฉ ุงูุงุชุตุงู ุนุจุฑ ุฎุงุฏู ูููู.  ูุดูุฑ ูุญูู ุงูุญุฒูุฉ ุฅูู <b>ุชุฎุตูุต</b> ูุงุฌุญ ูุบูุฑ ูุงุฌุญ.  ุฅุฐุง ูู ููู ููุงู ูุงุญุฏ ูุงุฌุญ ุ ููู ุงููุฑุฌุญ ุฃู ูุชู ุชูุฑูุฑ ูุนููุงุช ุงููุตูู ุงูุฎุงุทุฆุฉ ุฅูู ุฎูุงุฏู TURN (ุงูุชู ุชุญูู ุฏุงุฆููุง ุจุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ - ููุงุญุธุฉ ุงููุชุฑุฌู). <br><br>  ุฅุฐุง ูุงู ููุงู ุญุฒูุฉ <b>ุงุณุชุฌุงุจุฉ ูุฌุงุญ CreatePermission</b> ูู ุงูุณุฌู ุ ูููููุง ุฃู ููุชุฑุถ ุฃู ูู ุดูุก ุนูู ูุง ูุฑุงู ูุน ุชููููุงุช STUN ู TURN.  ูุฅุฐุง ูุงู ููุงู ุฃูุถูุง ุญุฒูุฉ <b>ChannelBind</b> ุ ููุฏ ูุงู ูู ุงููููู ุฅูุดุงุก ุงุชุตุงู ุจุฎุงุฏู TURN ุจุณุฑุนุฉ ุนุงููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุถุงูุง ุงูุฎูููุฉ </h2><br>  ูู ููุงุฑุณุชู ุ ูุง ูููู ููุนุฏูุฏ ูู ุญููู WebRTC ุงูุชู ุชูุดุฆ ุงุชุตุงู WiFi ุงูุงุชุตุงู ุนุจุฑ 3G / 4G.  ูู ุงูุตุนุจ ุชุตุญูุญ ุงูุชุทุจูู ุงูุฐู ูุชู ุชุดุบููู ุนูู ุฌูุงุฒ ูุญููู: ููุณ ูุฏููุง ูุญูู ุญุฒู ุจุณูุท ูุซู Wireshark ุ ููุง ูููู ูู Safari ุฅุธูุงุฑ WebRTC ุงูุฏุงุฎููุฉ.  ููุชุฑุญ ุงูููุทู ุฃูู ุฅุฐุง ูุงู ุงูุชุทุจูู ูุนูู ุจุดูู ุฌูุฏ ุนุจุฑ WiFi ุ ูุฅู ุงููุดููุฉ ููุณุช ูู ุงูุชุทุจูู ููุณู ุ ูููู ูู ุงูุงุชุตุงู ุงูุฎููู.  ููููุฉ ุงูุชุตุญูุญุ  ุงุตุทุญุจ ุฌูุงุฒ ููุจููุชุฑ ูุญููู ููู ุจุชูุตูู ุฌูุงุฒ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3G</a> ุจู.  ูุฐูู ูุฏูู ูุญูู ุญุฒู ูุณุฌูุงุช ููุงุฆูุฉ ููููู ูู ุฎูุงููุง ุงูุนุซูุฑ ุนูู ุฌุฐุฑ ุฌููุน ุงููุดุงูู ูู ููุช ูุนููู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุงุณุชูุชุงุฌุงุช </h2><br>  ุชุตุญูุญ WebRTC ููุณ ุณููุงู ุ ูููู ุฅุฐุง ููุช ุชุจุญุซ ุฌูุฏูุง ุนูู ุงูุฅูุชุฑูุช ุ ูููููู ุงูุนุซูุฑ ุนูู ุงูุนุฏูุฏ ูู ุงูููุงูุงุช ูุงูุฃูุซูุฉ.  ุฅุฐุง ููุช ุชุนูู ูู ูุฌุงู ุงูุงุชุตุงูุงุช ูู ุงูููุช ุงููุนูู ุ ูุฃูุตูู ุจูุฑุงุกุฉ ููุงุตูุงุช RFC ูุจุฑูุชููููุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">STUN</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TURN</a> ูุชูููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">WebRTC</a> .  ุงููุณุชูุฏุงุช ูุจูุฑุฉ ุ ูููู ุงููุนูููุงุช ุงููุงุฑุฏุฉ ูููุง ุชุณุงุนุฏ ุนูู ุงุชุฎุงุฐ ูุฑุงุฑุงุช ููุซููุฉ ูุงูุฅุฌุงุจุฉ ุนูู ุงูุณุคุงู "ููุงุฐุง ูุง ูุฑู". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar417869/">https://habr.com/ru/post/ar417869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar417859/index.html">ุชูุงูู 3CX ูุน Microsoft Dynamics 365</a></li>
<li><a href="../ar417861/index.html">ููุท ุฑุฆูุณ ูุง ููุงูุฉ ููุง</a></li>
<li><a href="../ar417863/index.html">ุฃุทูุงู ุฃู ุชุฃูุฑ ูุฑูุจุงุ ูุฌูุฒ ูุฌูุณ ุงูุฃุฎูุงููุงุช ูู ุงูููููุฉ ุงููุชุญุฏุฉ ุงูููุฏุณุฉ ุงููุฑุงุซูุฉ ููุฃุฌูุฉ ุงูุจุดุฑูุฉ</a></li>
<li><a href="../ar417865/index.html">ุฅููุงููุฉ ุงููุตูู ุฅูู Android - ุฐุฆุจ ูู ููุงุจุณ ุงูุฃุบูุงูุ ูุญุงุถุฑุฉ ูุงูุฏูุณ</a></li>
<li><a href="../ar417867/index.html">ููููุฉ ุชูููู ูุฏุฉ ูุดุฑูุน ุชูููููุฌูุง ุงููุนูููุงุช ุ ูุนูุฏูุง ูุง ูุณุชุญู ุงูููุงู ุจู ุนูู ุงูุฅุทูุงู</a></li>
<li><a href="../ar417871/index.html">ุนูุฏ ุฎุท ุงูููุงูุฉ ููุณูุงุญุฉ ุชุญุช ุงููุฏุงุฑูุฉ</a></li>
<li><a href="../ar417873/index.html">ุทุฑู ุฅูุดุงุก ููุงูุฐ ููุจุซูุฉ</a></li>
<li><a href="../ar417875/index.html">ุงูุฎุฑูุฌ ูู ุณุจุง ุงูุฃุฑูุจ ุญูุฑุฉ ูุน ุงููุถุจุงู ุงูุญุฏูุซุฉ</a></li>
<li><a href="../ar417877/index.html">ููู ูุฎูู Tinder (ููููุงู) ูููุนู</a></li>
<li><a href="../ar417879/index.html">ููููุฉ ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช ูู Microsoft ูุฌุงููุง [ุนูู ุณุจูู ุงููุซุงู ุ ูุณุงุจูุฉ ุญุฏูุซุฉ]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>