<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☝🏽 🧔🏾 🅿️ iOS应用程序中自动续订订阅的收入计算困难 📁 👩🏾‍🤝‍👨🏼 🌮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="嗨，这是来自Apphud的 Renat。 如果您有一个具有可自动更新的订阅的应用程序，或者打算发布第一个带有订阅的应用程序，那么迟早您将面临如何正确地将收入从订阅转移到分析的问题。 让我们来谈谈。 
 为什么我需要考虑订阅销售的收入？ 


 必须考虑订阅收入，才能将其发送到不知道如何执行此操作的产...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>iOS应用程序中自动续订订阅的收入计算困难</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/apphud/blog/474440/"><p><img src="https://habrastorage.org/webt/y9/ml/fw/y9mlfw9vxvbqq9eedrpqnyegskc.png" alt="图片"></p><br><p>嗨，这是来自<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Apphud的</a> Renat。 如果您有一个具有可自动更新的订阅的应用程序，或者打算发布第一个带有订阅的应用程序，那么迟早您将面临如何正确地将收入从订阅转移到分析的问题。 让我们来谈谈。 <a name="habracut"></a></p><br><h2 id="dlya-chego-nuzhno-schitat-vyruchku-s-prodazh-podpisok"> 为什么我需要考虑订阅销售的收入？ </h2><br><p> 必须考虑订阅收入，才能将其发送到不知道如何执行此操作的产品分析和归因系统：振幅，混合面板，AppsFlyer，分支，调整。 您的服务器将非常方便您跟踪订阅事件：转换，续订，取消-并将其发送到您的分析中。 不幸的是，并非所有产品分析师都支持服务器到服务器API。 例如，Firebase或Flurry。 他们没有用于从服务器发送事件的API，并且它们不支持跟踪订阅。 正如他们所说，他们自己不，也不给别人。 </p><br><p> 在本文中，我将告诉您，如果您决定自己做，可能会遇到什么困难。 </p><br><h2 id="analitika-podpisok-v-app-store-connect-ne-daet-polnuyu-kartinu">  App Store Connect订阅分析不包含在内 </h2><br><p> 通常，App Store Connect中的分析根本不是分析。 您只能看到大局：转换，事件数量和保留率。 苹果甚至没有宣称自己是产品分析师的成熟竞争对手。  App Store Connect是原始的： </p><br><ul><li> 您无法将数据与用户和流量来源相关联。 </li><li> 您无法建立自己的渠道和图形； </li><li> 数据每天更新一次。 </li></ul><br><p><img src="https://habrastorage.org/webt/qw/c9/pw/qwc9pwldrp9fltzgu65r7cp5xvw.png" alt="图片"><br>  <em>App Store Connect订阅概述</em> </p><br><h2 id="pochemu-otpravlyat-vyruchku-s-podpisok-s-ios-ustroystva--plohaya-ideya"> 为什么从iOS设备发送订阅收入是个坏主意 </h2><br><p> 主要问题是，当应用程序未运行时，您无法发送订阅事件。 资金在每个订阅期开始时借记，尚不清楚用户何时启动该应用程序。 这可能一天，一周或永远不会发生。 在后一种情况下，什么也不会发送。 </p><br><h2 id="tipy-sobytiy"> 活动类型 </h2><br><p> 乍一看，仅两个事件就足够了：审判开始和资金注销。 实际上，有很多事件，并且经常发生。 您可以组成5个事件的集合，也可以从20个事件组成。这完全取决于您的需求。 </p><br><p> 以下是与订阅相关的事件的样本集。 </p><br><p>  <strong>续约</strong> <br>  <em>定期扩展，试用激活，注册介绍性和促销性优惠（免费和付费）。</em> </p><br><p>  <strong>常规订阅转换</strong> <br>  <em>转换试用，介绍性和付费促销优惠（免费和付费）。</em> </p><br><p>  <strong>期满</strong> <br>  <em>常规订阅到期，试用到期，付费介绍报价到期，免费促销报价到期，付费促销报价到期</em> </p><br><p>  <strong>退货</strong> <br>  <em>返回常规订阅，返回付费介绍性报价，返回付费促销性报价</em> </p><br><p>  <strong>其他活动</strong> <br>  <em>启用续订，禁用续订，过渡到宽限期，升级订阅</em> </p><br><p> 很多事情吧？  Apphud跟踪<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">19种</a>事件。 您可以为每个事件指定自己的名称，并在一个事件下合并一些费用。 </p><br><h2 id="slozhnosti-s-vychisleniem-ceny"> 定价挑战 </h2><br><p> 最大的困难是Apple支票不显示借方金额。 也许苹果有朝一日会将其添加到支票中，但是到目前为止，我们必须手动处理以下情况。 </p><br><h4 id="izmenenie-ceny"> 价格变动 </h4><br><p> 当增加订阅费用时，开发人员可以指示是否对新订阅者应用新价格。 如果您选择<em>申请</em> ，那么一切都很简单。 如果用户拒绝提高价格，订阅将简单地过期。 而且，如果您选择<em>不申请</em> ，则对于旧订户，必须使用他们最初订购的价格。  <em>StoreKit</em>不返回有关用户订购价格的信息，因此您需要将每个用户的价格存储在某个地方。 </p><br><h4 id="smena-podpiski"> 订阅变更 </h4><br><p> 通过订阅，用户自己可以在App Store应用程序的订阅设置中更改其持续时间和价格。 续订时需要检查产品标识符，并获取与其对应的价格。 订阅更改分为三种类型：降级，跨级别和升级。 关于此，我们<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在Habr上</a>撰写了另<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一篇文章</a> ，您也可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>阅读官方文档。 </p><br><h4 id="vozvrat-neispolzovannoy-chasti-podpiski"> 返回未使用的订购部分 </h4><br><p> 是的，它发生了。 对于跨级别和订阅升级，未使用的付费部分将退还给用户，并立即收取新订阅的费用。 </p><br><p><img src="https://habrastorage.org/webt/fg/kh/ki/fgkhkikqanfx27agq_p5sqjf8ze.jpeg" alt="图片"><br>  <em>Apphud中一个用户的示例，该用户通过返回未使用的部分来更改其订阅</em> </p><br><h4 id="raznye-ceny-dlya-raznyh-stran"> 不同国家的价格不同 </h4><br><p> 在App Store中，Connect可以为不同国家/地区的一项订阅创建不同的价格。 因此，您需要分别存储每个国家/地区的价格，并使用与用户所在国家/地区相对应的价格。 </p><br><h4 id="raznye-valyuty"> 不同货币 </h4><br><p> 并非所有产品分析师都支持货币换算。 必须将价格转换为基础货币（例如，美元），并仅在各处使用它。 在Apphud，我们会定期使用“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">开放汇率”</a>更新<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">汇率</a> 。 </p><br><h4 id="komissiya-apple"> 苹果委员会 </h4><br><p> 苹果的佣金是30％。 但是使用了一年的订阅后，苹果的佣金降低到了15％。 一个重要的细微差别：订阅中断超过60天会重置连续使用的日期。 </p><br><h4 id="vvodnoe-predlozhenie-ne-obyazatelno-vvodnoe"> 介绍性句子不一定是介绍性的 </h4><br><p> 这意味着，试用和付费介绍性优惠不仅可以在订阅开始时出现，而且如果用户之前没有草拟介绍性优惠，也可以在返回订阅时发布。 </p><br><h4 id="ceny-vvodnyh-predlozheniy"> 优惠价格 </h4><br><p> 必须在服务器上存储每个国家的价格和介绍性促销的类型：试用，预付款或使用的付款。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>阅读有关入门句子的更多信息。 </p><br><h4 id="promo-predlozheniya"> 促销优惠 </h4><br><p> 促销优惠可以交替使用，也可以互相替代，因为它们可以无限次使用。 有必要不仅存储主要订阅的价格，而且还存储每个国家/地区的所有促销优惠的价格。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>阅读有关促销优惠的更多信息。 </p><br><p><img src="https://habrastorage.org/webt/ii/vf/ud/iivfud47autqywvaxvsucnoziii.jpeg" alt="图片"><br>  <em>以Apphud中的用户为例，他们使用介绍性报价进行了注册，然后利用了促销性报价。</em> </p><br><h4 id="vozvraty"> 退货 </h4><br><p> 有必要计算产生收益的交易，并将负金额发送给分析师。 </p><br><h4 id="opredelenie-user-id-pri-zapuske-s-drugogo-ustroystva"> 从另一台设备启动时确定用户ID。 </h4><br><p> 用户可以从另一台设备启动该应用程序。 正确确定向其发送数据到分析的用户ID至关重要。 在某些情况下，您将不得不合并服务器上的用户。 续订必须使用正确的用户ID发送。 </p><br><h4 id="hranenie-chekov-polzovateley-i-proverka-po-raspisaniyu"> 用户支票存储和计划支票 </h4><br><p> 最后，您需要保存用户检查，并在预期的到期日期之前检查它们，并检查苹果在通知中发送的事件。 </p><br><h2 id="integracii-v-apphud">  Apphud中的集成 </h2><br><p>  Apphud的功能之一是集成，它允许通过我们的服务器将订阅事件发送到产品分析。 </p><br><h4 id="integracii-c-produktovymi-analitikami"> 产品分析师整合 </h4><br><p> 要启用与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Amplitude</a>或<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Mixpanel</a>集成，您需要在Apphud设置中添加API密钥。 </p><br><p> 将集成添加到您的分析之后，实时事件就会出现。 您可以找到ARPU，MRR，试用转换率，退订等。当然，所有这些都与应用程序中您自己的事件相关联。 同样，将为您提供每个用户的指标：用户花费的金额，交易次数及其他。 </p><br><p><img src="https://habrastorage.org/webt/vn/bd/p0/vnbdp0uymymj5a7nwvjgqochjhu.jpeg" alt="图片"><br>  <em>在Apphud中添加集成后在Mixpanel中的示例用户</em> </p><br><h4 id="integracii-s-sistemami-atribucii"> 与归因系统集成 </h4><br><p> 如果您要推广应用程序或计划这样做，那么将Apphud与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AppsFlyer</a>或<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Branch</a>集成在一起将有助于您跟踪广告系列的效果。 您可以按订阅和其他指标的总收入来比较流量渠道。 </p><br><p><img src="https://habrastorage.org/webt/qp/im/wi/qpimwi1ptwt5lftfd-pagf0l-me.jpeg" alt="图片"><br>  <em>分行不同流量渠道的订阅收入</em> </p><br><h4 id="integracii-s-messendzherami"> 与即时通讯程序集成 </h4><br><p> 您还可以通过<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Slack</a>或<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Telegram</a>实时接收有关新试用版或续订的信息。 整合将不超过一分钟。 </p><br><h2 id="zaklyuchenie"> 结论 </h2><br><p> 您自己很难计算出来自订阅的确切收入。 除了拥有自己的服务器之外，您还需要正确计算收费金额。 对于实施，您将花费大量时间和资源，值得在改善产品上花费。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Apphud</a>将帮助您正确计算订阅收入并将其发送到您的分析。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN474440/">https://habr.com/ru/post/zh-CN474440/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN474426/index.html">动画系列“数学界”</a></li>
<li><a href="../zh-CN474430/index.html">莫斯科DevOpsDays-社区为社区举办的会议</a></li>
<li><a href="../zh-CN474434/index.html">自己的Telegram机器人，用于在python和docker中跟踪其服务器的正常运行时间</a></li>
<li><a href="../zh-CN474436/index.html">由于政策原因，GitLab终止了从俄罗斯和中国招募工程师</a></li>
<li><a href="../zh-CN474438/index.html">简单，使用C ++。 Userver Basics-用于编写异步微服务的框架</a></li>
<li><a href="../zh-CN474442/index.html">爱尔兰延寿故事</a></li>
<li><a href="../zh-CN474444/index.html">针对开发人员的另外5个大胆的培训项目（层，Squeosh，计算器，网站抓取工具，音乐播放器）</a></li>
<li><a href="../zh-CN474448/index.html">计算机世界中学生的大脑有什么能力</a></li>
<li><a href="../zh-CN474450/index.html">停止为DNS使用非常小的TTL</a></li>
<li><a href="../zh-CN474452/index.html">Haxe秋季状态报告</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>