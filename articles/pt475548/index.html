<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ú® üåç ü§ΩüèΩ Matchmaking chato, sem desequil√≠brio e filas: um guia pr√°tico üòï üÜò üê®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Matchmaking √© o principal componente dos mais modernos jogos multiplayer. Quando um desenvolvedor o leva a s√©rio, acontece que os novatos encontram re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Matchmaking chato, sem desequil√≠brio e filas: um guia pr√°tico</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/475548/">  Matchmaking √© o principal componente dos mais modernos jogos multiplayer.  Quando um desenvolvedor o leva a s√©rio, acontece que os novatos encontram regularmente profissionais em batalha, e alguns jogadores precisam esperar para sempre apenas para entrar na partida.  Al√©m disso, √© dif√≠cil testar e analisar antes do lan√ßamento, porque voc√™ precisa considerar v√°rios fatores.  Como os jogadores s√£o distribu√≠dos geograficamente?  Quanto tempo eles est√£o prontos para esperar na fila?  Qual ping √© ideal para um jogo confort√°vel?  Esses e outros fatores afetam a qualidade do casamento. <br><br><img src="https://habrastorage.org/webt/7g/o6/x6/7go6x6m2omemdo-c_jfsmn8_iku.jpeg" alt="imagem"><br><br>  Neste artigo, discutiremos primeiro a pr√°tica geral de selecionar batalhas em jogos multiplayer e depois compartilharemos nossa pr√≥pria experi√™ncia na organiza√ß√£o de encontros para rob√¥s de guerra. <a name="habracut"></a><br><br><h3>  Quais crit√©rios escolher? </h3><br>  Ent√£o, o que determina uma boa correspond√™ncia?  Obviamente, isso depende dos recursos da plataforma e do g√™nero do jogo, mas, como regra, os desenvolvedores s√£o guiados pelos seguintes crit√©rios: <br><br><ul><li>  tempo de espera curto; </li><li>  ping baixo; </li><li>  a diferen√ßa m√≠nima na experi√™ncia, habilidades e progresso dos jogadores: aqui a experi√™ncia do jogo pode ser levada em considera√ß√£o tanto em geral quanto para uma classe espec√≠fica, se o jogo tiver uma divis√£o neles; </li><li>  oposi√ß√£o entre si - grupos pr√©-montados de atores que visam um trabalho coordenado; </li><li>  in√≠cio simult√¢neo da partida para todos os jogadores. </li></ul><br>  Outros requisitos s√£o poss√≠veis, por exemplo: <br><br><ul><li>  pegar jogadores que falam o mesmo idioma; </li><li>  leve em considera√ß√£o os resultados das √∫ltimas partidas do jogador, bem como o coeficiente de conformidade com a classifica√ß√£o: se um jogador perdeu as √∫ltimas partidas, ele pode estar fora de forma agora e, por algum tempo, deve facilitar os advers√°rios; </li><li>  fa√ßa matchmaking levando em considera√ß√£o a composi√ß√£o das equipes: se uma equipe n√£o possui, por exemplo, um tanque ou um curandeiro, procure por advers√°rios uma equipe com a mesma composi√ß√£o; </li><li>  reunir trolls, libr√©s e garras para que n√£o interfiram com outros jogadores; </li><li>  diversificar a composi√ß√£o dos jogadores para que as mesmas pessoas n√£o se encontrem em partidas diferentes com muita frequ√™ncia; </li><li>  re√∫na jogadores usando o bate-papo por voz. </li></ul><br>  Est√° longe de ser sempre poss√≠vel satisfazer simultaneamente todos esses requisitos.  Al√©m disso, um grande n√∫mero de requisitos sempre contraria o desejo de alcan√ßar um curto tempo de espera.  Mesmo que o jogo seja muito bem-sucedido e centenas de pessoas aguardem a partida a cada minuto, ainda pode n√£o haver tempo suficiente para atender a alguns requisitos.  Por exemplo, se voc√™ deseja encontrar outra equipe australiana satisfat√≥ria para uma equipe australiana como rival, o tempo de espera pode aumentar drasticamente. <br><br>  Nesse sentido, de todos os requisitos desejados, √© necess√°rio escolher o mais importante para um projeto espec√≠fico.  Encurtar esta lista levar√° a uma melhor conformidade com os requisitos restantes e a um menor tempo de espera. <br><br>  Al√©m disso, ao desenvolver jogos multiplayer, vale lembrar que a adi√ß√£o de v√°rios modos de jogo divide a base de jogadores em v√°rias filas e, portanto, leva a um aumento no tempo de espera e, consequentemente, a uma deteriora√ß√£o na qualidade das partidas.  Portanto, pense novamente antes de adicionar este ou aquele modo ao jogo e se vale a pena dar ao jogador a oportunidade de escolher entre eles. <br><br>  Reduzir o n√∫mero de requisitos para matchmaking n√£o √© a √∫nica maneira de reduzir o tempo de espera.  Por exemplo, voc√™ pode implementar o multiplayer no sistema Drop-In-Drop-Out, para que os usu√°rios possam entrar no jogo a qualquer momento e sair a qualquer momento.  Se isso n√£o for poss√≠vel, com uma curta dura√ß√£o de partidas, voc√™ poder√° permitir que o jogador jogue com bots no processo de espera.  Obviamente, isso n√£o resolver√° o problema da expectativa, mas pelo menos nos permitir√° passar o tempo. <br><br><h3>  Como avaliar a conformidade com os crit√©rios selecionados? </h3><br>  Portanto, temos um certo n√∫mero de jogadores, que devemos alocar para as partidas.  Como fazer melhor?  Qual √© prefer√≠vel: o mesmo n√≠vel de habilidades ou ping baixo?  Como podemos equilibrar esses requisitos para que as partes joguem uma contra a outra? <br><br>  Para compara√ß√£o, precisamos de uma certa m√©trica.  De alguma forma, todos esses crit√©rios devem convergir em um par√¢metro, pelo valor mais alto do qual o sistema pode realizar uma pesquisa.  Em seguida, chamaremos o placar da partida. <br><br>  Para obter o valor dessa avalia√ß√£o, voc√™ deve primeiro calcular os indicadores individuais.  Considere uma combina√ß√£o de fatores: <br><br><ul><li>  <b>Equipes com o mesmo n√≠vel de habilidade.</b>  Este √© o crit√©rio mais √≥bvio na cria√ß√£o de partidas.  Para cada jogo, o m√©todo de c√°lculo deste par√¢metro √© individual.  Uma das mais simples: pegue o n√≠vel m√©dio de experi√™ncia por equipe e compare-o com o mesmo valor para outra equipe.  Quanto maior a diferen√ßa, pior a correspond√™ncia e menor o indicador desejado. </li><li>  <b>Jogadores com o mesmo n√≠vel de habilidade.</b>  Mesmo que as duas equipes estejam perfeitamente equilibradas, mas consistam, por exemplo, em dois profissionais e um iniciante, o indicador m√©dio das habilidades das equipes ser√° o mesmo, mas uma boa partida ainda n√£o funcionar√°.  Portanto, introduzimos outro par√¢metro n√£o para a equipe como um todo, mas para cada jogador individualmente, ou a varia√ß√£o do n√≠vel de habilidades dentro da equipe. </li><li>  <b>Festa.</b>  Idealmente, um grupo tocando juntos por um longo tempo deve se opor a outro do mesmo grupo, e n√£o contra tr√™s jogadores separados.  √â f√°cil calcular: se um time est√° jogando h√° muito tempo, temos um indicador igual a 100%.  Se uma equipe de tr√™s jogar contra dois amigos e um jogador aleat√≥rio, obtemos 60%.  Se nenhum dos jogadores tivesse jogado um com o outro antes, o valor seria 0%. </li><li>  <b>Ping oponentes.</b>  Para cada usu√°rio, verificamos o ping com todos os tr√™s jogadores da equipe advers√°ria.  Quanto maior o ping, menor a pontua√ß√£o. </li><li>  <b>Variabilidade dos advers√°rios.</b>  Na busca de atender aos requisitos de maior prioridade, o sistema de organiza√ß√£o de partidas geralmente pode colocar as mesmas equipes umas contra as outras com as maiores taxas de correspond√™ncia.  Portanto, para que os jogadores n√£o fiquem entediados jogando constantemente com rostos familiares, vale a pena acompanhar quantas vezes eles se enfrentam nas partidas. </li></ul><br><img src="https://habrastorage.org/webt/a6/uo/r_/a6uor_z7okkjhfofrmmgmavks1g.png"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exemplo de uma partida</a> em que as equipes t√™m um indicador de 100% para uma festa, um bom indicador da habilidade m√©dia da equipe, mas uma fraca correla√ß√£o nas habilidades de jogadores individuais: na equipe azul, elas diferem significativamente</i> <br><br><h3>  Como levar em conta a ambiguidade dos crit√©rios? </h3><br>  Portanto, para cada um dos crit√©rios, temos uma pontua√ß√£o de 0% (coincid√™ncia muito ruim) a 100% (melhor), mas no final, precisamos obter apenas um n√∫mero.  Para isso, usaremos o valor m√©dio ponderado.  Em seguida, podemos definir a prioridade de import√¢ncia para cada crit√©rio. <br><br>  Ao calcular a estimativa, vale a pena considerar se queremos obter uma depend√™ncia linear dos par√¢metros.  Por exemplo, melhorar o ping de 210 ms para 200 ms vale a pena de 110 ms para 100 ms?  Ambas as op√ß√µes foram aprimoradas em 10 ms, mas o valor do ping em si √© duas vezes diferente. <br><br>  Curiosamente, no caso de alguns crit√©rios, √© mais f√°cil obter uma diferen√ßa significativa no desempenho do que no caso de outros.  Portanto, para ganhar 0% em termos de n√≠vel de habilidade, √© necess√°rio coletar tr√™s jogadores profissionais e tr√™s iniciantes na partida, o que √© extremamente raro.  No entanto, obter 0% pelo crit√©rio de party √© muito mais f√°cil, pois para isso voc√™ precisa ter uma equipe montada h√° muito tempo contra tr√™s jogadores solteiros.  Tamb√©m vale a pena considerar esse aspecto. <br><br><img src="https://habrastorage.org/webt/1n/sz/ts/1nsztsgg1rdifaad46pici69cpw.png"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exemplo de</a> como as equipes podem ser compostas de acordo com o n√≠vel de habilidade.</i>  <i>Verde e amarelo mostram ping entre jogadores</i> <br><br>  Agora, com base nos valores dos indicadores de cada um dos requisitos, podemos calcular a pontua√ß√£o final. <br><br>  Como esse n√∫mero √© o crit√©rio dominante, o algoritmo produz certas prefer√™ncias.  Se a troca de dois jogadores aumentar o par√¢metro de avalia√ß√£o de uma partida em 5%, mas reduzir em 10% em outra partida, o sistema n√£o far√° isso, porque em geral o resultado ser√° pior.  No entanto, em alguns casos, isso pode ser negligenciado.  Portanto, pode ser apropriado melhorar um indicador de 50% (o que √© muito ruim) para 55%, reduzindo o outro de 90% para 80% (o que ainda √© muito bom).  Isso pode ser alcan√ßado, por exemplo, calculando a raiz quadrada de todos os indicadores da avalia√ß√£o para o est√°gio m√©dio.  Assim, melhorar as partidas ruins se torna relativamente mais importante que as boas. <br><br><h3>  Como isso acontece nos rob√¥s de guerra? </h3><br>  Como estamos falando de um jogo para celular no qual tudo deve acontecer rapidamente, a principal prioridade √© o baixo tempo de espera antes de entrar na batalha.  Para isso, o sistema de matchmaking deve ser o mais simples poss√≠vel.  No momento, o casamenteiro War Robots leva em conta apenas a classifica√ß√£o de sele√ß√£o de jogadores (MMR) e tenta se concentrar nas partes, mas como elas n√£o s√£o comuns no jogo, esse crit√©rio √© secund√°rio: se voc√™ n√£o pode combinar partes da mesma for√ßa, o sistema tenta se combinar. algumas partes ou n√£o se concentram nesse crit√©rio.  E se um jogador sair da batalha, em seu lugar, ele pegar√° outro que atenda aos crit√©rios, mas apenas no in√≠cio da partida. <br><br>  A classifica√ß√£o da sele√ß√£o de jogadores depende do n√∫mero de vit√≥rias / derrotas e do lugar na equipe e, dependendo do resultado da partida, pode aumentar ou diminuir.  De acordo com esta classifica√ß√£o, os jogadores s√£o agrupados em ligas e divis√µes.  Dentro da divis√£o, o casamenteiro procura jogadores com a pontua√ß√£o mais pr√≥xima poss√≠vel, expandindo gradualmente o alcance da pesquisa e cobrindo tamb√©m as pr√≥ximas divis√µes.  Vale ressaltar que o casamenteiro tenta impedir os jogadores das ligas inferiores que subestimam sua classifica√ß√£o deliberadamente, seguindo-os de acordo com padr√µes caracter√≠sticos de comportamento: geralmente o n√∫mero de derrotas √© maior que o n√∫mero m√©dio de batalhas da liga por dia. <br><br><img src="https://habrastorage.org/webt/ei/ne/iw/eineiwpog5b5b10klcccmnp9ccm.png"><br>  <i>Os rob√¥s de guerra simplificados correspondem ao fluxograma correspondente</i> <br><br>  O sistema costumava funcionar errado.  O principal crit√©rio foi o poder de rob√¥s e armas e, a partir dos resultados das partidas, apenas os cinco √∫ltimos foram levados em considera√ß√£o.  O sistema estava mais vulner√°vel √† manipula√ß√£o.  Jogadores experientes poderiam estar na mesma batalha com os rec√©m-chegados, se eles mudassem suas armas para outras mais fracas, ou vice-versa, um novato no rob√¥ de primeiro n√≠vel poderia instalar a 12¬™ arma e acabar em uma batalha com profissionais, sem ter tempo para desenvolver a habilidade do jogo.  Nesse sentido, o sistema de classifica√ß√£o, com base na experi√™ncia real de vit√≥rias e derrotas, acabou sendo muito mais honesto, embora n√£o fosse poss√≠vel chegar a ele imediatamente: uma reorganiza√ß√£o completa do processo de matchmaking √© uma etapa radical, portanto, foram feitas primeiras tentativas para simplesmente definir as condi√ß√µes adicionais do sistema. <br><br>  O trabalho de otimiza√ß√£o e aprimoramento do matchmaking no War Robots est√° em andamento.  Talvez no futuro seja poss√≠vel combinar a antiga e a nova abordagem para encontrar correspond√™ncias, mas n√£o se esque√ßa que qualquer melhoria na qualidade da correspond√™ncia leva a um aumento no tempo de espera.  Portanto, o desenvolvimento de uma solu√ß√£o desse tipo ser√° aconselh√°vel apenas se n√£o afetar significativamente o desempenho do sistema. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475548/">https://habr.com/ru/post/pt475548/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475538/index.html">Onde come√ßa a cria√ß√£o de um mercado. Parte um</a></li>
<li><a href="../pt475540/index.html">Cuidado com as vulnerabilidades que trazem solu√ß√µes alternativas. Parte 1: FragmentSmack / SegmentSmack</a></li>
<li><a href="../pt475542/index.html">Como o marketing por email mudou desde 2013: 4 principais tend√™ncias e estat√≠sticas atuais</a></li>
<li><a href="../pt475544/index.html">Cat√°logos de produtos, servi√ßos e muito mais</a></li>
<li><a href="../pt475546/index.html">S√≠ndromes viciantes de TI</a></li>
<li><a href="../pt475550/index.html">Sistemas ac√∫sticos para salas abertas</a></li>
<li><a href="../pt475552/index.html">Algoritmos de aprendizado de m√°quina de teste de blitz: alimente seu conjunto de dados na biblioteca scikit-learn</a></li>
<li><a href="../pt475554/index.html">T√©cnicas de design de interface do usu√°rio que economizam tempo</a></li>
<li><a href="../pt475556/index.html">Mudan√ßa para Munique. O caminho dos escaladores da Amazon para o emprego dos sonhos da Amazon</a></li>
<li><a href="../pt475558/index.html">Dicion√°rio de TI ou o qu√™? Onde Para onde? Parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>