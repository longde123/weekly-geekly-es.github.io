<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ฟ ๐ ๐ธ ุงูุฑูุงุถูุงุช ูู Gamedev ุจุณูุทุฉ. ุงููุตูููุงุช ูุงูุชุญููุงุช ุฃูููู ๐ฟ ๐ ๐ฆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ุจุงูุฌููุน! ุงุณูู Grisha ูุฃูุง ูุคุณุณ CGDevs. ุงูููู ุฃุฑูุฏ ุฃู ุฃุณุชูุฑ ูู ููุถูุน ุงูุฑูุงุถูุงุช ูู ูุนุจุฉ ุฏูู. ูู ููุงู ุณุงุจู ุ ุฃุธูุฑูุง ุฃูุซูุฉ ุฃุณุงุณูุฉ ูุงุณุชุฎุฏุงู ุงููุชุฌูุงุช ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุฑูุงุถูุงุช ูู Gamedev ุจุณูุทุฉ. ุงููุตูููุงุช ูุงูุชุญููุงุช ุฃูููู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432544/" style=";text-align:right;direction:rtl"> ูุฑุญุจุง ุจุงูุฌููุน!  ุงุณูู Grisha ูุฃูุง ูุคุณุณ CGDevs.  ุงูููู ุฃุฑูุฏ ุฃู ุฃุณุชูุฑ ูู ููุถูุน ุงูุฑูุงุถูุงุช ูู ูุนุจุฉ ุฏูู.  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู ุณุงุจู</a> ุ ุฃุธูุฑูุง ุฃูุซูุฉ ุฃุณุงุณูุฉ ูุงุณุชุฎุฏุงู ุงููุชุฌูุงุช ูุงูุชูุงููุงุช ูู ูุดุงุฑูุน ุงููุญุฏุฉ ุ ูุงูุขู ุฏุนููุง ูุชุญุฏุซ ุนู ุงููุตูููุงุช ูุชุญููุงุช ุงููุฑุจ.  ุฅุฐุง ููุช ุถููุนุง ูู ูุตูููุฉ ุงูุญุณุงุจ ุ  ุฃูุช ุชุนุฑู ูุงููุฉ TRS ูููููุฉ ุงูุชุนุงูู ูุนูุง ุ  ูุง ูู ุชุญูู ุตุงุญุจ ุงูููุฒู - ุฑุจูุง ูู ุชุฌุฏ ุดูุฆูุง ุฌุฏูุฏูุง ูููุณู.  ุณูุชุญุฏุซ ูู ุณูุงู ุงูุฑุณููุงุช ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ.  ุฅุฐุง ููุช ููุชูุง ุจูุฐุง ุงูููุถูุน - ูุฑุญุจุง ุจูู ูู ุงููุท. <br><br><img src="https://habrastorage.org/webt/uv/qk/z8/uvqkz8zsqguqq3sl4c_clkwknx8.jpeg"><br><a name="habracut"></a><br>  ููุจุฏุฃ ุจูุงุญุฏ ูู ุฃูู ุงูููุงููู ูู ุณูุงู ุงูููุงูุฉ - <i>ุชุญูููุงุช ุงูุฃููุฉ</i> .  <i>ุฅู ุชุญููุงุช ุงูุฃููู</i> ูู ุ ูู ุฌููุฑูุง ุ ุชุญูู ูุธุงู ุงูุฅุญุฏุงุซูุงุช (ุฃู ุงููุถุงุก) ุนู ุทุฑูู ุถุฑุจ ุงููุชุฌู ุจูุตูููุฉ ุฎุงุตุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุงูุชุญููุงุช ูุซู ุงูุญุฑูุฉ ุ ุงูุฏูุฑุงู ุ ุงูุชุฏุฑุฌ ุ ุงูุงูุนูุงุณ ุ ุฅูุฎ. ุงูุฎุตุงุฆุต ุงูุฑุฆูุณูุฉ ููุชุญููุงุช ุงูุฐูุฑูุฉ ูู ุฃูู ุชุจูู ูู ููุณ ุงูููุงู (ูู ุงููุณุชุญูู ุฃู ุชุตูุน ูุชุฌููุง ุซูุงุฆู ุงูุฃุจุนุงุฏ ูู ุซูุงุฆู ุงูุฃุจุนุงุฏ) ูุฃูู ุฅุฐุง ูุงูุช ุงูุฎุทูุท ูุชูุงุทุนุฉ / ูุชูุงุฒูุฉ / ุชู ุดุทุจูุง ูุจู ุงูุชุญููู ุ ุซู ุณูุชู ุงูุงุญุชูุงุธ ุจูุฐู ุงูุฎุงุตูุฉ ุจุนุฏ ุงูุชุญููู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฏููู ุงููุซูุฑ ูู ุงูุฎุตุงุฆุต ุงูุฑูุงุถูุฉ ุงูุชู ุชุชุทูุจ ูุนุฑูุฉ ูุธุฑูุฉ ุงููุฌููุนุงุช ูุงููุฌููุนุงุช ูุงูุฌุจุฑ ุงูุฎุทู ุ ููุง ูุฌุนู ุงูุนูู ูุนูู ุฃุณูู. <br><br><h2 style=";text-align:right;direction:rtl">  ูุตูููุฉ TRS </h2><br>  ุงูููููู ุงูููู ุงูุซุงูู ูู ุฑุณููุงุช ุงูุญุงุณูุจ ูู <i>ูุตูููุฉ TRS</i> .  ุจุงุณุชุฎุฏุงูู ุ ููููู ูุตู ุงูุนูููุงุช ุงูุฃูุซุฑ ุดููุนูุง ุงููุณุชุฎุฏูุฉ ุนูุฏ ุงูุนูู ุจุงุณุชุฎุฏุงู ุฑุณููุงุช ุงูููุจููุชุฑ.  <i>ูุตูููุฉ TRS</i> ูู ุชุฑููุจุฉ ูู ุซูุงุซ ูุตูููุงุช ุชุญููู.  ูุตูููุงุช ุงูุฅุฒุงุญุฉ (ุงูุชุฑุฌูุฉ) ุ ุงูุฏูุฑุงู ุนูู ูู ูุญูุฑ (ุงูุฏูุฑุงู) ูุงูููุงุณ (ูููุงุณ). <br>  ุงููุง ุชุจุฏู ูุซู ูุฐุง. <br><br><img src="https://habrastorage.org/webt/9p/cv/lp/9pcvlphst8r4db6bwww36jdwtuo.png"><br><br>  ุญูุซ: <br>  <b>ุงูุฎุทูุฉ</b> ูู <i>t</i> = Vector3 ุฌุฏูุฏุฉ (ุฏ ุ ุญ ุ ู). <br>  <b>ุงูููุงุณ</b> - <i>s</i> = new Vector3 (Vector3 (a ุ e ุ i) .magnitude ุ Vector3 (bุ fุ j) .magnitudeุ Vector3 (cุ gุ k) .magnitude)ุ <br><br>  <b>ุงูุชูุงูุจ</b> ูู ูุตูููุฉ ูู ุงูุดูู: <br><br><img src="https://habrastorage.org/webt/in/4c/_n/in4c_nqanxcmlg4lah2colkjioo.png"><br><br>  ุงูุขู ุฏุนูุง ูุฐูุจ ููููุงู ูู ุณูุงู ุงููุญุฏุฉ.  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุตูููุฉ TRS ูู ุดูุก ูุฑูุญ ููุบุงูุฉ ุ ูููู ูุง ููุจุบู ุงุณุชุฎุฏุงููุง ูู ูู ููุงู.  ูุธุฑูุง ูุฃู ุงูุฅุดุงุฑุฉ ุงูุจุณูุทุฉ ูููุถุน ุฃู ุฅุถุงูุฉ ุงููุชุฌูุงุช ูู ุงููุญุฏุฉ ุณุชุนูู ุจุดูู ุฃุณุฑุน ุ ูููู ูู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุฒููุงุช ุงูุฑูุงุถูุฉ ุ ุชููู ุงููุตูููุงุช ุฃูุซุฑ ููุงุกูุฉู ูู ุงููุชุฌูุงุช ุนุฏุฉ ูุฑุงุช.  ูุชู ุชุทุจูู ูุธููุฉ TRS ูู ุงููุญุฏุฉ ุฅูู ุญุฏ ูุจูุฑ ูู ูุฆุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Matrix4x4</a> ุ ููููุง ููุณุช ููุงุฆูุฉ ูู ูุฌูุฉ ูุธุฑ ุงูุชุทุจูู.  ูุธุฑูุง ูุฃูู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชุทุจูู ุงููุตูููุฉ ูู ุฎูุงู ุงูุถุฑุจ ุ ููููู ุนููููุง ุชุฎุฒูู ุงููุนูููุงุช ุญูู ุงุชุฌุงู ุงููุงุฆู ุ ูุจุงููุณุจุฉ ูุจุนุถ ุงูุชุญูููุงุช ุ ุฃูุฏ ุฃู ุฃููู ูุงุฏุฑูุง ุนูู ุญุณุงุจ ููุณ ููุท ุงูููุถุน ุ ูููู ุฃูุถูุง ุชุบููุฑ ุงุชุฌุงู ุงููุงุฆู ููู (ุนูู ุณุจูู ุงููุซุงู ุ ุงูุงูุนูุงุณ ุงูุฐู ูุง ูุชู ุชุทุจููู ูู ุงููุญุฏุฉ) <br><br>  ูุชู ุชูููุฑ ุฌููุน ุงูุฃูุซูุฉ ุฃุฏูุงู ููุธุงู ุงูุฅุญุฏุงุซูุงุช ุงููุญูู (ููุนุชุจุฑ ุฃุตู GameObject ูู ุฃุตู ุงูุฅุญุฏุงุซูุงุช ุ ุญูุซ ููุน ุงููุงุฆู ุฏุงุฎููุง. ุฅุฐุง ูุงู ุงููุงุฆู ูู ุฌุฐุฑ ุงูุชุณูุณู ุงููุฑูู ูู ุงููุญุฏุฉ ุ ูููู ุงูุฃุตู ูู ุงูุนุงูู (0ุ0ุ0)). <br><br>  ูุธุฑูุง ูุงุณุชุฎุฏุงู ูุตูููุฉ TRS ุ ูููููุง ูุตู ููุถุน ูุงุฆู ูุง ูู ุงููุถุงุก ุ ูุญุชุงุฌ ุฅูู ุชุญูู ูู TRS ุฅูู ุงูููู ุงููุญุฏุฏุฉ ููููุถุน ุ ุงูุฏูุฑุงู ููููุงุณ ุงููุญุฏุฉ.  ููููุงู ุจุฐูู ุ ููููู ูุชุงุจุฉ ุทุฑู ุงูุชูุฏูุฏ ูููุฆุฉ Matrix4x4 <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุญุตูู ุนูู ุงููููู ุ ุงูุฏูุฑุงู ูุงูุญุฌู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExtractPosition</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Matrix4x4 matrix</span></span></span><span class="hljs-function">)</span></span> { Vector3 position; position.x = matrix.m03; position.y = matrix.m13; position.z = matrix.m23; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Quaternion </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExtractRotation</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Matrix4x4 matrix</span></span></span><span class="hljs-function">)</span></span> { Vector3 forward; forward.x = matrix.m02; forward.y = matrix.m12; forward.z = matrix.m22; Vector3 upwards; upwards.x = matrix.m01; upwards.y = matrix.m11; upwards.z = matrix.m21; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Quaternion.LookRotation(forward, upwards); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExtractScale</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Matrix4x4 matrix</span></span></span><span class="hljs-function">)</span></span> { Vector3 scale; scale.x = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m00, matrix.m10, matrix.m20, matrix.m30).magnitude; scale.y = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m01, matrix.m11, matrix.m21, matrix.m31).magnitude; scale.z = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m02, matrix.m12, matrix.m22, matrix.m32).magnitude; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scale; }</code> </pre> <br></div></div><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุฃุฌู ุงูุนูู ุงููุฑูุญ ุ ููููู ุชูููุฐ ุจุนุถ ููุญูุงุช ูุฆุฉ ุงูุชุญููู ููุนูู ูุน TRS ููู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุญููู ุงูุชูุณุน</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplyLocalTRS</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Transform tr, Matrix4x4 trs</span></span></span><span class="hljs-function">)</span></span> { tr.localPosition = trs.ExtractPosition(); tr.localRotation = trs.ExtractRotation(); tr.localScale = trs.ExtractScale(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matrix4x4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExtractLocalTRS</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Transform tr</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Matrix4x4.TRS(tr.localPosition, tr.localRotation, tr.localScale); }</code> </pre> <br></div></div><br>  ุนูู ูุฐุง ุ ูุฅู ูุฒุงูุง ุงููุญุฏุฉ ุชูุชูู ุ ุญูุซ ุฃู ุงููุตูููุงุช ูู ุงููุญุฏุฉ ุถุนููุฉ ุฌุฏูุง ูู ุงูุนูููุฉ.  ุชุชุทูุจ ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุฒููุงุช ุญุณุงุจ ูุตูููุฉ ุ ูุงูุฐู ูุง ูุชู ุชูููุฐู ูู ุงููุญุฏุฉ ุญุชู ูู ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ ุชูุงููุง ุ ูุซู ุฅุถุงูุฉ ุงููุตูููุงุช ููุตูููุงุช ุงูุถุฑุจ ุจูุงุณุทุฉ ุงูุนุฏุฏูุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุธุฑูุง ูุฎุตูุตูุฉ ุชูููุฐ ุงููุชุฌูุงุช ูู Unity3d ุ ููุงู ุฃูุถูุง ุนุฏุฏ ูู ุงูุฅุฒุนุงุฌ ุงููุฑุชุจุท ุจุญูููุฉ ุฃูู ููููู ุฅูุดุงุก ูุงูู 4 ร 4 ุ ูููู ูุง ููููู ุฅุฎุฑุงุฌ 1 ร 4 ูู ุงููุฑุจุน.  ูุธุฑูุง ูุฃููุง ุณูุชุญุฏุซ ุฃูุซุฑ ุนู ุชุญูู "ุตุงุญุจ ุงูููุฒู" ููุงูุนูุงุณุงุช ุ ูุฅููุง ูููุฐ ุฃููุงู ุงูุนูููุงุช ุงููุงุฒูุฉ ูุฐูู. <br><br>  ุชุนุฏ ุนูููุฉ ุฅุถุงูุฉ / ุทุฑุญ ูุถุฑุจ ุนุฏุฏูุฉ ุจุณูุทุฉ.  ูุจุฏู ุถุฎููุง ุฅูู ุญุฏ ูุง ุ ููู ูุง ููุฌุฏ ุดูุก ูุนูุฏ ููุง ุ ูุฃู ุงูุญุณุงุจ ุจุณูุท. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุนูููุงุช ุงููุตูููุฉ ุงูุฃุณุงุณูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matrix4x4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MutiplyByNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Matrix4x4 matrix, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Matrix4x4( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m00 * number, matrix.m10 * number, matrix.m20 * number, matrix.m30 * number), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m01 * number, matrix.m11 * number, matrix.m21 * number, matrix.m31 * number), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m02 * number, matrix.m12 * number, matrix.m22 * number, matrix.m32 * number), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m03 * number, matrix.m13 * number, matrix.m23 * number, matrix.m33 * number) ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matrix4x4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DivideByNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Matrix4x4 matrix, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Matrix4x4( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m00 / number, matrix.m10 / number, matrix.m20 / number, matrix.m30 / number), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m01 / number, matrix.m11 / number, matrix.m21 / number, matrix.m31 / number), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m02 / number, matrix.m12 / number, matrix.m22 / number, matrix.m32 / number), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m03 / number, matrix.m13 / number, matrix.m23 / number, matrix.m33 / number) ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matrix4x4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Plus</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Matrix4x4 matrix, Matrix4x4 matrixToAdding</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Matrix4x4( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m00 + matrixToAdding.m00, matrix.m10 + matrixToAdding.m10, matrix.m20 + matrixToAdding.m20, matrix.m30 + matrixToAdding.m30), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m01 + matrixToAdding.m01, matrix.m11 + matrixToAdding.m11, matrix.m21 + matrixToAdding.m21, matrix.m31 + matrixToAdding.m31), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m02 + matrixToAdding.m02, matrix.m12 + matrixToAdding.m12, matrix.m22 + matrixToAdding.m22, matrix.m32 + matrixToAdding.m32), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m03 + matrixToAdding.m03, matrix.m13 + matrixToAdding.m13, matrix.m23 + matrixToAdding.m23, matrix.m33 + matrixToAdding.m33) ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matrix4x4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Minus</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Matrix4x4 matrix, Matrix4x4 matrixToMinus</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Matrix4x4( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m00 - matrixToMinus.m00, matrix.m10 - matrixToMinus.m10, matrix.m20 - matrixToMinus.m20, matrix.m30 - matrixToMinus.m30), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m01 - matrixToMinus.m01, matrix.m11 - matrixToMinus.m11, matrix.m21 - matrixToMinus.m21, matrix.m31 - matrixToMinus.m31), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m02 - matrixToMinus.m02, matrix.m12 - matrixToMinus.m12, matrix.m22 - matrixToMinus.m22, matrix.m32 - matrixToMinus.m32), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(matrix.m03 - matrixToMinus.m03, matrix.m13 - matrixToMinus.m13, matrix.m23 - matrixToMinus.m23, matrix.m33 - matrixToMinus.m33) ); }</code> </pre> <br></div></div><br>  ูููู ููุชูููุฑ ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุชุดุบูู ุถุฑุจ ุงููุตูููุฉ ูู ุญุงูุฉ ูุนููุฉ.  ุถุฑุจ ูุชุฌู ุงูุจุนุฏ 4 ร 4 ร 1 ร 4 (ุชู ูููู) ุฅุฐุง ููุช ูุนุชุงุฏูุง ุนูู ูุตูููุฉ ุงูุฑูุงุถูุงุช ุ ูุฃูุช ุชุนูู ุฃูู ูุน ูุฐุง ุงูุถุฑุจ ุ ุณุชุญุชุงุฌ ุฅูู ุงููุธุฑ ุฅูู ุงูุฃุนุฏุงุฏ ุงููุตูู ููุจุนุฏ ุ ูุณุชุญุตู ุนูู ุงูุจุนุฏ ูู ุงููุตูููุฉ ูู ุงููุฎุฑุฌุงุช ุ ุฃู ูู ูุฐู ุงูุญุงูุฉ 4x4.  ููุงู ูุนูููุงุช ูุงููุฉ ุญูู ููููุฉ ูุถุงุนูุฉ ุงููุตูููุงุช ุ ูุฐูู ูู ูุฑุณู ูุฐุง.  ูููุง ููู ูุซุงู ูุญุงูุฉ ูุนููุฉ ุณุชููู ูููุฏุฉ ูู ุงููุณุชูุจู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุถุฑุจ ุงููุชุฌู ุจูุงุณุทุฉ ุงูููููู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matrix4x4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MultiplyVectorsTransposed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector4 vector, Vector4 transposeVector</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] vectorPoints = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] {vector.x, vector.y, vector.z, vector.w}, transposedVectorPoints = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] {transposeVector.x, transposeVector.y, transposeVector.z, transposeVector.w}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> matrixDimension = vectorPoints.Length; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] values = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[matrixDimension * matrixDimension]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; matrixDimension; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; matrixDimension; j++) { values[i + j * matrixDimension] = vectorPoints[i] * transposedVectorPoints[j]; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Matrix4x4( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(values[<span class="hljs-number"><span class="hljs-number">0</span></span>], values[<span class="hljs-number"><span class="hljs-number">1</span></span>], values[<span class="hljs-number"><span class="hljs-number">2</span></span>], values[<span class="hljs-number"><span class="hljs-number">3</span></span>]), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(values[<span class="hljs-number"><span class="hljs-number">4</span></span>], values[<span class="hljs-number"><span class="hljs-number">5</span></span>], values[<span class="hljs-number"><span class="hljs-number">6</span></span>], values[<span class="hljs-number"><span class="hljs-number">7</span></span>]), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(values[<span class="hljs-number"><span class="hljs-number">8</span></span>], values[<span class="hljs-number"><span class="hljs-number">9</span></span>], values[<span class="hljs-number"><span class="hljs-number">10</span></span>], values[<span class="hljs-number"><span class="hljs-number">11</span></span>]), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(values[<span class="hljs-number"><span class="hljs-number">12</span></span>], values[<span class="hljs-number"><span class="hljs-number">13</span></span>], values[<span class="hljs-number"><span class="hljs-number">14</span></span>], values[<span class="hljs-number"><span class="hljs-number">15</span></span>]) ); }</code> </pre> <br></div></div><br><h2 style=";text-align:right;direction:rtl">  ุชุญูู ุตุงุญุจ ุงูููุฒู </h2><br>  ุจุญุซูุง ุนู ููููุฉ ุนูุณ ูุงุฆู ูุณุจุฉ ุฅูู ุฃู ูุญูุฑ ุ ุบุงูุจูุง ูุง ุตุงุฏูุช ูุตูุญุฉ ููุถุน ูููุงุณ ุณูุจู ูู ุงูุงุชุฌุงู ุงูุถุฑูุฑู.  ูุฐู ูุตูุญุฉ ุณูุฆุฉ ููุบุงูุฉ ูู ุณูุงู ุงููุญุฏุฉ ุ ูุฃููุง ุชูุณุฑ ุงููุซูุฑ ูู ุงูุฃูุธูุฉ ูู ุงููุญุฑู (ุงูุฐุจุญ ุ ุงูุงุตุทุฏุงู ุ ุฅูุฎ.) ูู ุจุนุถ ุงูุฎูุงุฑุฒููุงุช ุ ูุชุญูู ูุฐุง ุฅูู ุญุณุงุจุงุช ุบูุฑ ุชุงููุฉ ุชูุงููุง ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุงูุชูููุฑ ุจุดูู ุชุงูู ูููุง ูุชุนูู ุจู Vector3.up ุฃู Vector3.forward ุ ูููู ูู ุงุชุฌุงู ุชุนุณูู.  ูู ูุชู ุชูููุฐ ุทุฑููุฉ ุงูุงูุนูุงุณ ูู ูุญุฏุฉ ุฎุงุฑุฌ ุงูุตูุฏูู ููุณู ุ ูุฐูู ููุช ุจุชุทุจูู <i>ุทุฑููุฉ Householder</i> . <br><br>  ูุง ูุณุชุฎุฏู <i>ุชุญููู Householder</i> ูู ุฑุณููุงุช ุงูููุจููุชุฑ ูุญุณุจ ุ ุจู ูู ูุฐุง ุงูุณูุงู ูู ุชุญูู ุฎุทู ูุนูุณ ูุงุฆููุง ูุชุนูููุง ุจูุณุชูู ููุฑ ุนุจุฑ "ุงูุฃุตู" ููุชู ุชุญุฏูุฏู ุจูุงุณุทุฉ ุงููุณุชูู ุงูุนุงุฏู ุฅูู ุงููุณุชูู.  ูู ุงูุนุฏูุฏ ูู ุงููุตุงุฏุฑ ุ ูุชู ูุตูู ุจุทุฑููุฉ ูุนูุฏุฉ ูุบูุฑ ูููููุฉ ุ ุนูู ุงูุฑุบู ูู ุฃู ุตูุบุชู ุฃูููุฉ. <br><br>  <i>H = I-2 * n * (n ^ T)</i> <br><br>  ุญูุซ <i>H</i> ูู ูุตูููุฉ ุงูุชุญููู ุ ูู ุญุงูุชูุง ูู Matrix4x4.identity ุ ู <i>n</i> = Vector4 ุฌุฏูุฏุฉ (planeNormal.x ุ planeNormal.y ุ planeNormal.z ุ 0).  ูุนูู ุงูุฑูุฒ T ุชุจุฏูู ุ ุฃู ุจุนุฏ ุถุฑุจ <i>n * (n ^ T)</i> ูุญุตู ุนูู ูุตูููุฉ 4 ร 4. <br><br>  ุณุชููู ุงูุฃุณุงููุจ ุงููุณุชุฎุฏูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู ูุณูููู ุงูุชุณุฌูู ูุถุบูุทูุง ููุบุงูุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุญูู ุตุงุญุจ ุงูููุฒู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matrix4x4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HouseholderReflection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Matrix4x4 matrix4X4, Vector3 planeNormal</span></span></span><span class="hljs-function">)</span></span> { planeNormal.Normalize(); Vector4 planeNormal4 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector4(planeNormal.x, planeNormal.y, planeNormal.z, <span class="hljs-number"><span class="hljs-number">0</span></span>); Matrix4x4 householderMatrix = Matrix4x4.identity.Minus( MultiplyVectorsTransposed(planeNormal4, planeNormal4).MutiplyByNumber(<span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> householderMatrix * matrix4X4; }</code> </pre> <br></div></div><br>  ูุงู: ุงููุณุชูู ุงูุทุจูุนู ูุฌุจ ุฃู ูููู ุทุจูุนููุง (ููู ููุทูู) ุ ูุงูุฅุญุฏุงุซู ุงูุฃุฎูุฑ n ูุฌุจ ุฃู ูููู 0 ุ ุจุญูุซ ูุง ูููู ููุงู ุฃู ุชุฃุซูุฑ ููุงูุชุฏุงุฏ ูู ุงูุงุชุฌุงู ุ ูุฃูู ูุนุชูุฏ ุนูู ุทูู ุงููุชุฌู n. <br><br>  ุงูุขู ููุฑุงุญุฉ ูู ุงููุญุฏุฉ ูุญู ูุทุจู ุทุฑููุฉ ุงูุชูุฏูุฏ ููุชุญูู <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุนูุงุณ ุงูุชุญููู ูู ูุธุงู ุงูุฅุญุฏุงุซูุงุช ุงููุญูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LocalReflect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Transform tr, Vector3 planeNormal</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> trs = tr.ExtractLocalTRS(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> reflected = trs.HouseholderReflection(planeNormal); tr.ApplyLocalTRS(reflected); }</code> </pre> <br></div></div><br>  ูุฐุง ูู ุดูุก ููุฐุง ุงูููู ุ ุฅุฐุง ูุงูุช ูุฐู ุงูุณูุณูุฉ ูู ุงูููุงูุงุช ุณุชุธู ูุซูุฑุฉ ููุงูุชูุงู ุ ูุณุฃูุดู ุฃูุถูุง ุนู ุชุทุจููุงุช ุงูุฑูุงุถูุงุช ุงูุฃุฎุฑู ูู ุชุทููุฑ ุงููุนุจุฉ.  ูุฐู ุงููุฑุฉ ูู ูููู ููุงู ุฃู ูุดุฑูุน ุ ุญูุซ ูุชู ูุถุน ุฌููุน ุงูููุฏ ูู ุงูููุงู ุ ูููู ุงููุดุฑูุน ูุน ุชุทุจูู ูุนูู ุณูููู ูู ุงูููุงู ุงูุชุงูู.  ูู ุงูุตูุฑุฉ ููููู ุชุฎููู ูุงุฐุง ุณุชููู ุงูููุงูุฉ ุงููุงุฏูุฉ. <br><br><img src="https://habrastorage.org/webt/ln/0u/iv/ln0uivbr1o7yxfbiwyyumcbbkc8.png"><br><br>  ุดูุฑุง ูุงูุชูุงููู! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar432544/">https://habr.com/ru/post/ar432544/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar432526/index.html">ุชูููู ุงููุดุงุฑูุน ุงูุฌุฏูุฏุฉ</a></li>
<li><a href="../ar432536/index.html">ููุนูุฉ ุงูููุงุก ูู ุงูููุฒู ูู ูุตู ุงูุดุชุงุก</a></li>
<li><a href="../ar432538/index.html">ุงูููุฒู ุงูุฐูู ุ ูุง ุฒูุช ุฌุนูุช ูู</a></li>
<li><a href="../ar432540/index.html">ุจุนุฏ 50 ุณูุฉ. ูุงูุฏุฉ ูู ุงูุนุฑูุถ</a></li>
<li><a href="../ar432542/index.html">ุทูุฑ ุงูุนููุงุก ุงูุตููููู ูุฑูุฉ ุญุฑุงุฑูุฉ ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงููุชุงุจุฉ</a></li>
<li><a href="../ar432546/index.html">ููุฎุต ุงูููุงุฏ ุงููุซูุฑุฉ ููุงูุชูุงู ููุทูุฑ ุงููุงุชู ุงููุญููู ุฑูู 278 (ูู 3 ุฅูู 9 ุฏูุณูุจุฑ)</a></li>
<li><a href="../ar432548/index.html">ูุซุงู ุนูู ุงุณุชุฎุฏุงู ููุชุจุฉ Java ูุฅูุดุงุก ุฑูุจูุช Telegram</a></li>
<li><a href="../ar432550/index.html">ุชูุฏูู 3CX v16 Alpha ู 3CX WebMeeting ุงููุญุฏุซุฉ</a></li>
<li><a href="../ar432552/index.html">"ุงูุนูู ูุชุตู." ุตูุบุฉ ุงููุนู</a></li>
<li><a href="../ar432554/index.html">ุฏูุบูุงุณ ุฅูุบูุจุงุฑุช: ุชุนุฒูุฒ ูุฌุชูุน "ุงูุฐูุงุก ุงูุฌูุงุนู"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>