<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∞üèΩ üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® ü•ú Die Option des wahlfreien Zugriffs auf die Einstellungen und Aufzeichnungen des Autokennzeichners von √ºberall im Internet ‚ò¶Ô∏è üõçÔ∏è üë©üèΩ‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Auto-DVRs sind seit langem eines der obligatorischen Attribute f√ºr jeden Autofahrer. Pers√∂nlich kann ich ohne √úbertreibung zu dem Schluss kommen, dass...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die Option des wahlfreien Zugriffs auf die Einstellungen und Aufzeichnungen des Autokennzeichners von √ºberall im Internet</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416323/">  Auto-DVRs sind seit langem eines der obligatorischen Attribute f√ºr jeden Autofahrer.  Pers√∂nlich kann ich ohne √úbertreibung zu dem Schluss kommen, dass ich mich ohne ein so einfaches Ger√§t hinter dem Lenkrad nicht sicher f√ºhlen kann.  Nat√ºrlich haben in den letzten 10 Jahren erhebliche Fortschritte erzielt: Heute gibt es bereits eine ganze Reihe von Herstellern auf dem Markt, die anst√§ndige Modelle herstellen, und wir als Fahrer haben bereits eine gro√üe Auswahl. <br><br>  Meine Wahl fiel auf den Neoline G-Tech X53-Registrar, und daf√ºr gab es mehrere Gr√ºnde: <br><br><ul><li>  Es ist mit zwei Kameras ausgestattet, von denen eine ein echtes FullHD-Bild liefert. </li><li>  Es wurde speziell f√ºr die verdeckte Installation entwickelt. </li><li>  Es wird vollst√§ndig √ºber WLAN √ºber die Anwendung auf dem Smartphone gesteuert, was im Zusammenhang mit diesem Artikel wichtig ist. Unter anderem erm√∂glicht es eine wirklich verdeckte Installation, ohne den Block regelm√§√üig erklimmen oder entfernen zu m√ºssen (z. B. um eine Aufzeichnung von einem USB-Flash-Laufwerk zu kopieren). </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h8/33/zt/h833ztw2p-hqt3krlhf7jnhekac.png"></div><br>  Dann kam, wie so oft, der Appetit mit dem Essen.  Nachdem ich den Rekorder in das Auto eingebaut hatte, sch√§tzte ich seine Bequemlichkeit, bekam einen Vorgeschmack und wollte Zugang zu seinen Aufzeichnungen nicht nur in der N√§he der Maschine haben, wo sein WiFi-Signal empfangen wird, sondern im <b>Allgemeinen √ºberall</b> .  Nun, oder zumindest zu Hause, f√ºr den Anfang. <br><br>  Nat√ºrlich gibt es in der Natur Registrar-Modelle, die Datens√§tze auf Befehl in der Cloud zusammenf√ºhren, aber sie binden den Benutzer an diese Cloud und zwingen ihn, daf√ºr zu zahlen, aber dies ist nicht meine Option.  Au√üerdem √ºberschnitt sich meine Wunschliste gut mit den Pl√§nen, einen WLAN-Router mit einem Modem im Auto zu installieren, sodass die Aufgabe durchaus machbar schien. <br><a name="habracut"></a><br>  Es wurde schnell klar, dass der Registrar keine dokumentierte API hat und der Zugriff darauf nur mit der nativen Anwendung f√ºr ein Smartphone m√∂glich ist.  Die Anwendung erwies sich wiederum als sehr skurril - sie funktioniert nur, wenn das Telefon mit dem WiFi-Registrar verbunden ist. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/yt/_3/mryt_3qkaoesppgkbdgl3ts8m88.png"></div><br>  Das hei√üt, ich musste verstehen, was die Anwendung von WiFi will, und sie dazu bringen, den Registrar an einem v√∂llig anderen Ort zu ‚Äûsehen‚Äú, um alle damit verbundenen technischen Probleme zu l√∂sen - im Allgemeinen liebe ich es so. <br><br>  Als Router, der das Internet √ºber WLAN in einem Auto verteilt, habe ich Mikrotik RBmAP2nD (mAP) mit einem Huawei e3372h-Modem verwendet (wenn Sie andere Budgetoptionen kennen, mit denen Sie die unten beschriebenen Konfigurationen implementieren k√∂nnen - schreiben Sie in die Kommentare).  Da der Registrar nur sein WLAN verteilen kann und keine Verbindung zu einem vorhandenen AP herstellen kann, musste ich den AP-Client konfigurieren, der eine Verbindung zu ihm herstellen sollte.  Und dann wurde schnell klar, dass die Arbeit von Mikrotik sowohl als AP als auch als AP-Client (auf der Slave-Schnittstelle) zu einer instabilen Verteilung von WiFi f√ºhrt. Daher wurde beschlossen, einen anderen mit dem Hauptrouter zu koppeln - Mikrotik RBmAPL-2nD (mAP lite). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3w/ol/xj/3wolxjn7mc3dbuxbnpnwrqf73zi.jpeg"></div><br><h3>  Cheat-Anwendung </h3><br>  Zu Beginn habe ich die Anwendung mit dem Registrar √ºber ein v√∂llig anderes WiFi-Netzwerk auf demselben Computer arbeiten lassen.  Unterwegs gelang es mir, die Fragen zu beantworten - wie die Anwendung das Netzwerk des Registrars erkennt und wie man es austrickst.  Auf dem Weg dorthin war es auch m√∂glich, noch mehr Komfort zu erzielen - um jetzt mit dem Registrar im Auto zu arbeiten, m√ºssen Sie nicht mehr auf das WLAN umsteigen, auf dem es kein Internet gibt. <br><br>  Ich werde nicht Dutzende von Experimenten im Detail beschreiben, bei denen ich zu einer funktionierenden L√∂sung gekommen bin. Ich beschreibe nur diese L√∂sung.  Was ben√∂tigt die Anwendung, um den WiFi-Registrar zu erkennen: <br><br><ol><li>  Die SSID sollte wie " <i>G-Tech X5X-120 ...</i> " aussehen, wobei anstelle der letzten Punkte beliebige Ziffern (Kleinbuchstaben) im Hexadezimalzahlensystem vorhanden sind.  Zum Beispiel habe ich " <i>G-Tech X5X-120aaa</i> " installiert und so weiter.  Vielleicht k√∂nnen Sie anstelle von ‚Äû120‚Äú auch etwas Eigenes einf√ºgen, ich habe es nicht ausprobiert. </li><li>  Die Client-Adresse muss √ºber DHCP bezogen werden, muss im Subnetz 192.168.100.0/24 sein, die Adresse des Servers (Registrar) = 192.168.100.1. </li></ol><br>  Der Rest ist nicht wichtig.  Ich habe nicht viele andere Dinge ausprobiert, aber ich wei√ü mit Sicherheit, dass: <br><br><ol><li>  Die MAC-Adresse des AP und des Servers spielt keine Rolle. </li><li>  Wenn sich entlang der Verkehrsroute Abschnitte mit einer reduzierten MTU (z. B. Tunnel) befinden, funktioniert die Verbindung einwandfrei. </li><li>  Das TCP-Fenster ist breit genug, damit das Herunterladen von Datens√§tzen auch bei 300 ms und h√∂her bei Pings nicht langsamer wird. </li></ol><br>  Was ist das Endergebnis? <br><br><ul><li>  Die Anwendung m√∂chte eine Adresse im Netzwerk 192.168.100.0/24 haben und eine Verbindung zur Adresse 192.168.100.1 herstellen. </li><li>  Die Adresse des Registrars lautet ebenfalls 192.168.100.1 und er m√∂chte, dass sich der Client im Netzwerk 192.168.100.0/24 befindet (er hat einfach keine Routen zu anderen). </li></ul><br>  Dies soll sich nicht √§ndern, aber wir m√∂chten lernen, wie die Anwendung und der Registrar verteilt werden.  Sie m√ºssen dem Router, der WLAN verteilt, die Adresse 192.168.100.1 zuweisen. Um die Probleme mit dem Verkehrsrouting zu l√∂sen, m√ºssen Sie ein Verbindungssubnetz eingeben und etwas Netzwerkzauber hinzuf√ºgen.  Zum Beispiel so: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-4/tn/z4/-4tnz4vvp_c9z71-t13dh357x9s.png"></div><br>  Beschreibung: <br><br><ul><li>  Die Anwendung l√§uft auf einem Smartphone, das mit dem R1-Router verbunden ist.  Das Smartphone empf√§ngt die Adresse √ºber DHCP, in unserem Beispiel 192.168.100.100. </li><li>  Die IP-Adresse von R1 auf der WiFi-Schnittstelle lautet 192.168.100.1 (wie von der Anwendung gew√ºnscht), auf der Ethernet-Schnittstelle 192.168.99.1 (dies ist ein Docking-Subnetz). </li><li>  Die R2-IP-Adresse auf der Ethernet-Schnittstelle lautet 192.168.99.2, auf der WiFi-Schnittstelle wird sie √ºber DHCP vom Registrar bezogen, in unserem Beispiel 192.168.100.150. </li><li>  Jeder Router f√ºhrt DNAT am Eingang und SNAT am Ausgang durch, sodass Pakete in jedem Subnetz Quell- und Zieladressen haben, die mit den Adressen der Edge-Router dieses Netzwerks √ºbereinstimmen. </li></ul><br>  Wie ist die Verbindung: <br><br><ol><li>  Die Anwendung stellt sicher, dass sie mit dem WLAN des Registrars verbunden ist, und stellt eine Verbindung mit der Adresse 192.168.100.1 her, sofern dies die Adresse des Registrars ist. </li><li>  R1 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.99.2 und auf der ausgehenden Schnittstelle - SNAT mit der Ersetzung der Quelladresse durch 192.168.99.1 ausgef√ºhrt wird. </li><li>  R2 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.100.1 und auf der ausgehenden Schnittstelle ausgef√ºhrt wird - Maskerade mit der Ersetzung der Quelladresse durch die vom Registrar √ºber DHCP empfangene Adresse. </li><li>  Der Registrar akzeptiert und verarbeitet die Verbindungsanforderung, die von der Adresse stammt, die er zuvor √ºber DHCP ausgegeben hat.  Welches war erforderlich. </li></ol><br>  Ein nachdenklicher Leser hat bereits eine Frage: F√ºr welche Art von Verkehr leite ich um?  Beginnend mit "Der gesamte Datenverkehr au√üer SSH" <b>und dem Aktivieren der</b> Protokollierung wurde mir klar, dass es <b>ausreicht, die TCP-Ports 7777, 7778 und 7779 umzuleiten</b> .  Die Anwendung ben√∂tigt nichts anderes, um mit dem Registrar zu arbeiten. <br><br><h3>  Wir leiten den Verkehr √ºber das Internet weiter </h3><br>  Als ich lernte, wie man die Anwendung austrickst, beseitigte ich das schwierigste Hindernis f√ºr das Hauptziel - den Zugriff auf Datens√§tze von √ºberall im Internet zu organisieren.  Damit die Anwendung, die an diesem ‚Äûbeliebigen Punkt‚Äú auf dem Telefon ausgef√ºhrt wird, eine Verbindung zum Registrar herstellen und ‚Äût√§uschen‚Äú kann, m√ºssen alle oben genannten Bedingungen erf√ºllt sein, was einige Einschr√§nkungen mit sich bringt.  An einer Adresse werden jedoch besonders h√§ufig Aufzeichnungen ben√∂tigt - sie sind zu Hause.  Hier beginnen wir mit einem Heimrouter. <br><br>  Zu Hause habe ich, wie Sie wahrscheinlich schon vermutet haben, auch Mikrotik.  Der externe Router hat eine ‚Äûwei√üe‚Äú IP-Adresse, mit der ich einen L2TP-Tunnel zwischen dem Auto- und dem Heimrouter erstellt und ein weiteres Docking-Subnetz zwischen ihnen organisiert habe.  Der oben beschriebenen Schaltung wurde ein weiterer Router hinzugef√ºgt, der nun wie folgt vereinfacht aussieht: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ji/mu/zb/jimuzbzw8kdjeetkljvp3aqt-bu.png"></div><br>  Beschreibung: <br><br><ul><li>  Die Anwendung l√§uft auf einem Smartphone, das mit dem R0-Heimrouter verbunden ist.  Das Smartphone empf√§ngt die Adresse √ºber DHCP, in unserem Beispiel 192.168.100.100. </li><li>  Die IP-Adresse von R0 auf der WiFi-Schnittstelle lautet 192.168.100.1 (wie von der Anwendung gew√ºnscht), auf der L2TP-Schnittstelle 192.168.98.1 (Docking-Subnetz 0). </li><li>  Die IP-Adresse R1 auf der L2TP-Schnittstelle lautet 192.168.98.2, auf der Ethernet-Schnittstelle 192.168.99.1 (Verbindungssubnetz 1). </li><li>  Die R2-IP-Adresse auf der Ethernet-Schnittstelle lautet 192.168.99.2, auf der WiFi-Schnittstelle wird sie √ºber DHCP vom Registrar bezogen, in unserem Beispiel 192.168.100.150. </li><li>  Jeder Router f√ºhrt DNAT am Eingang und SNAT am Ausgang durch, sodass Pakete in jedem Subnetz Quell- und Zieladressen haben, die mit den Adressen der Edge-Router dieses Netzwerks √ºbereinstimmen. </li></ul><br>  Wie ist die Verbindung: <br><br><ol><li>  Die Anwendung stellt sicher, dass sie mit dem WLAN des Registrars verbunden ist, und stellt eine Verbindung mit der Adresse 192.168.100.1 her, sofern dies die Adresse des Registrars ist. </li><li>  R0 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.98.2 und auf der ausgehenden Schnittstelle - SNAT mit der Ersetzung der Quelladresse durch 192.168.98.1 ausgef√ºhrt wird. </li><li>  R1 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.99.2 und auf der ausgehenden Schnittstelle - SNAT mit der Ersetzung der Quelladresse durch 192.168.99.1 ausgef√ºhrt wird. </li><li>  R2 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.100.1 und auf der ausgehenden Schnittstelle ausgef√ºhrt wird - Maskerade mit der Ersetzung der Quelladresse durch die vom Registrar √ºber DHCP empfangene Adresse. </li><li>  Der Registrar akzeptiert und verarbeitet die Verbindungsanforderung, die von der Adresse stammt, die er zuvor √ºber DHCP ausgegeben hat.  Welches war erforderlich. </li></ol><br><div class="spoiler">  <b class="spoiler_title">PS.</b> <div class="spoiler_text">  Mit Punkt 2 k√∂nnen Sie es etwas einfacher machen, wenn Sie DNAT sofort auf dem 99. statt auf dem 98. Subnetz ausf√ºhren und die Route √ºber R1 zum 99. Subnetz hinzuf√ºgen.  Aber ich beschreibe nur die allgemeine Idee und ein Beispiel f√ºr ihre Implementierung, und es gibt viele M√∂glichkeiten, all dies in ein bestehendes Netzwerk zu integrieren. <br></div></div><br><h3>  Woher bekommen wir Essen? </h3><br>  Router und ein Modem verbrauchen ein wenig, aber genug, um die Autobatterie in 3-4 Tagen auf Null zu bringen.  Daher ist es besser, sie bei Bedarf einzubeziehen.  Und um in das Konzept des ‚Äûjederzeitigen Zugriffs‚Äú zu passen, nutzte ich die Tatsache, dass der in meinem Auto installierte Starline A96-Alarm unter anderem √ºber ein GSM-Modul verf√ºgt, das die Aufnahme eines zus√§tzlichen Kanals auf Befehl einer Fernbedienung oder einer Smartphone-Anwendung programmiert und den mAP-Router eingeschaltet hat von einem zus√§tzlichen Kanal und mAP lite - √ºber PoE vom ersten.  Ich werde hier nicht im Detail dar√ºber sprechen, all dies ist leicht zu googeln, aber wenn Sie interessiert sind, schreiben Sie in die Kommentare. <br><br><h3>  Zusammenfassung </h3><br>  Nachdem ich das alles getan hatte, hatte ich die M√∂glichkeit, nicht nur Rekorderaufzeichnungen zu kopieren, w√§hrend ich zu Hause sa√ü, sondern auch Bilder von Kameras in Echtzeit anzusehen.  Unabh√§ngig davon, wo sich das Auto befindet, ist die Hauptsache, dass der Router √ºber eine Internetverbindung verf√ºgt.  Ist das nicht perfekt? <br><br>  Und mit einem angenehmen Bonus habe ich eine h√∂here Geschwindigkeit beim Kopieren von Videos als im Auto: 1,2-1,5 MBit / s gegen√ºber 1 MBit / s.  Ich wei√ü nicht warum. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yi/ro/js/yirojsw0zniqglhireevkolxiuk.png"></div><br><h3>  Wird es Konfigurationen geben? </h3><br>  Ehrlich gesagt glaube ich nicht, dass es jemandem einfallen w√ºrde, genau das zu tun, was beschrieben wird.  In jedem Fall wird die L√∂sung an das angepasst, was bereits verf√ºgbar ist.  Aber wenn Sie es wirklich brauchen - unten finden Sie die Nat-Regeln, nach denen 99% von allem, was oben besprochen wurde, implementiert sind. <br><br><div class="spoiler">  <b class="spoiler_title">R0</b> <div class="spoiler_text"><pre><code class="hljs sql">/ip firewall nat add action=src-nat chain=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> src-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.98</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.98</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">R1</b> <div class="spoiler_text"><pre> <code class="hljs sql">/ip firewall nat add action=masquerade chain=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=ether2 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">R2</b> <div class="spoiler_text"><pre> <code class="hljs sql">/ip firewall nat add action=dst-nat chain=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=ether1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1</code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de416323/">https://habr.com/ru/post/de416323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de416309/index.html">Verwendung von HDF5-Dateien in Python</a></li>
<li><a href="../de416313/index.html">Checkliste f√ºr die Analyse von Sicherheitsereignisprotokollen</a></li>
<li><a href="../de416315/index.html">ASP.NET Razor: L√∂sen einiger Architekturprobleme f√ºr das Ansichtsmodell</a></li>
<li><a href="../de416319/index.html">Hintergrund: IMEI- und Rossvyaz-Whitelists</a></li>
<li><a href="../de416321/index.html">Wie man ein Sprecher internationaler IT-Konferenzen wird</a></li>
<li><a href="../de416327/index.html">Was ist neu am neuen Standard 802.11ax (High Efficiency WLAN) und wann muss darauf gewartet werden?</a></li>
<li><a href="../de416329/index.html">Die R√ºckkehr der sowjetischen interplanetaren Station. Vorl√§ufige Prognose</a></li>
<li><a href="../de416331/index.html">Die Geschichte der Umgestaltung der Citimobil-Anwendung</a></li>
<li><a href="../de416333/index.html">New Wave: Warum die Wasserk√ºhlung im Rechenzentrum immer beliebter wird</a></li>
<li><a href="../de416335/index.html">Ein kleiner R√ºckblick auf die QCon 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>