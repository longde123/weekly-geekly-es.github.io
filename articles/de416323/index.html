<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤰🏽 👨‍❤️‍💋‍👨 🥜 Die Option des wahlfreien Zugriffs auf die Einstellungen und Aufzeichnungen des Autokennzeichners von überall im Internet ☦️ 🛍️ 👩🏽‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Auto-DVRs sind seit langem eines der obligatorischen Attribute für jeden Autofahrer. Persönlich kann ich ohne Übertreibung zu dem Schluss kommen, dass...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die Option des wahlfreien Zugriffs auf die Einstellungen und Aufzeichnungen des Autokennzeichners von überall im Internet</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416323/">  Auto-DVRs sind seit langem eines der obligatorischen Attribute für jeden Autofahrer.  Persönlich kann ich ohne Übertreibung zu dem Schluss kommen, dass ich mich ohne ein so einfaches Gerät hinter dem Lenkrad nicht sicher fühlen kann.  Natürlich haben in den letzten 10 Jahren erhebliche Fortschritte erzielt: Heute gibt es bereits eine ganze Reihe von Herstellern auf dem Markt, die anständige Modelle herstellen, und wir als Fahrer haben bereits eine große Auswahl. <br><br>  Meine Wahl fiel auf den Neoline G-Tech X53-Registrar, und dafür gab es mehrere Gründe: <br><br><ul><li>  Es ist mit zwei Kameras ausgestattet, von denen eine ein echtes FullHD-Bild liefert. </li><li>  Es wurde speziell für die verdeckte Installation entwickelt. </li><li>  Es wird vollständig über WLAN über die Anwendung auf dem Smartphone gesteuert, was im Zusammenhang mit diesem Artikel wichtig ist. Unter anderem ermöglicht es eine wirklich verdeckte Installation, ohne den Block regelmäßig erklimmen oder entfernen zu müssen (z. B. um eine Aufzeichnung von einem USB-Flash-Laufwerk zu kopieren). </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h8/33/zt/h833ztw2p-hqt3krlhf7jnhekac.png"></div><br>  Dann kam, wie so oft, der Appetit mit dem Essen.  Nachdem ich den Rekorder in das Auto eingebaut hatte, schätzte ich seine Bequemlichkeit, bekam einen Vorgeschmack und wollte Zugang zu seinen Aufzeichnungen nicht nur in der Nähe der Maschine haben, wo sein WiFi-Signal empfangen wird, sondern im <b>Allgemeinen überall</b> .  Nun, oder zumindest zu Hause, für den Anfang. <br><br>  Natürlich gibt es in der Natur Registrar-Modelle, die Datensätze auf Befehl in der Cloud zusammenführen, aber sie binden den Benutzer an diese Cloud und zwingen ihn, dafür zu zahlen, aber dies ist nicht meine Option.  Außerdem überschnitt sich meine Wunschliste gut mit den Plänen, einen WLAN-Router mit einem Modem im Auto zu installieren, sodass die Aufgabe durchaus machbar schien. <br><a name="habracut"></a><br>  Es wurde schnell klar, dass der Registrar keine dokumentierte API hat und der Zugriff darauf nur mit der nativen Anwendung für ein Smartphone möglich ist.  Die Anwendung erwies sich wiederum als sehr skurril - sie funktioniert nur, wenn das Telefon mit dem WiFi-Registrar verbunden ist. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/yt/_3/mryt_3qkaoesppgkbdgl3ts8m88.png"></div><br>  Das heißt, ich musste verstehen, was die Anwendung von WiFi will, und sie dazu bringen, den Registrar an einem völlig anderen Ort zu „sehen“, um alle damit verbundenen technischen Probleme zu lösen - im Allgemeinen liebe ich es so. <br><br>  Als Router, der das Internet über WLAN in einem Auto verteilt, habe ich Mikrotik RBmAP2nD (mAP) mit einem Huawei e3372h-Modem verwendet (wenn Sie andere Budgetoptionen kennen, mit denen Sie die unten beschriebenen Konfigurationen implementieren können - schreiben Sie in die Kommentare).  Da der Registrar nur sein WLAN verteilen kann und keine Verbindung zu einem vorhandenen AP herstellen kann, musste ich den AP-Client konfigurieren, der eine Verbindung zu ihm herstellen sollte.  Und dann wurde schnell klar, dass die Arbeit von Mikrotik sowohl als AP als auch als AP-Client (auf der Slave-Schnittstelle) zu einer instabilen Verteilung von WiFi führt. Daher wurde beschlossen, einen anderen mit dem Hauptrouter zu koppeln - Mikrotik RBmAPL-2nD (mAP lite). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3w/ol/xj/3wolxjn7mc3dbuxbnpnwrqf73zi.jpeg"></div><br><h3>  Cheat-Anwendung </h3><br>  Zu Beginn habe ich die Anwendung mit dem Registrar über ein völlig anderes WiFi-Netzwerk auf demselben Computer arbeiten lassen.  Unterwegs gelang es mir, die Fragen zu beantworten - wie die Anwendung das Netzwerk des Registrars erkennt und wie man es austrickst.  Auf dem Weg dorthin war es auch möglich, noch mehr Komfort zu erzielen - um jetzt mit dem Registrar im Auto zu arbeiten, müssen Sie nicht mehr auf das WLAN umsteigen, auf dem es kein Internet gibt. <br><br>  Ich werde nicht Dutzende von Experimenten im Detail beschreiben, bei denen ich zu einer funktionierenden Lösung gekommen bin. Ich beschreibe nur diese Lösung.  Was benötigt die Anwendung, um den WiFi-Registrar zu erkennen: <br><br><ol><li>  Die SSID sollte wie " <i>G-Tech X5X-120 ...</i> " aussehen, wobei anstelle der letzten Punkte beliebige Ziffern (Kleinbuchstaben) im Hexadezimalzahlensystem vorhanden sind.  Zum Beispiel habe ich " <i>G-Tech X5X-120aaa</i> " installiert und so weiter.  Vielleicht können Sie anstelle von „120“ auch etwas Eigenes einfügen, ich habe es nicht ausprobiert. </li><li>  Die Client-Adresse muss über DHCP bezogen werden, muss im Subnetz 192.168.100.0/24 sein, die Adresse des Servers (Registrar) = 192.168.100.1. </li></ol><br>  Der Rest ist nicht wichtig.  Ich habe nicht viele andere Dinge ausprobiert, aber ich weiß mit Sicherheit, dass: <br><br><ol><li>  Die MAC-Adresse des AP und des Servers spielt keine Rolle. </li><li>  Wenn sich entlang der Verkehrsroute Abschnitte mit einer reduzierten MTU (z. B. Tunnel) befinden, funktioniert die Verbindung einwandfrei. </li><li>  Das TCP-Fenster ist breit genug, damit das Herunterladen von Datensätzen auch bei 300 ms und höher bei Pings nicht langsamer wird. </li></ol><br>  Was ist das Endergebnis? <br><br><ul><li>  Die Anwendung möchte eine Adresse im Netzwerk 192.168.100.0/24 haben und eine Verbindung zur Adresse 192.168.100.1 herstellen. </li><li>  Die Adresse des Registrars lautet ebenfalls 192.168.100.1 und er möchte, dass sich der Client im Netzwerk 192.168.100.0/24 befindet (er hat einfach keine Routen zu anderen). </li></ul><br>  Dies soll sich nicht ändern, aber wir möchten lernen, wie die Anwendung und der Registrar verteilt werden.  Sie müssen dem Router, der WLAN verteilt, die Adresse 192.168.100.1 zuweisen. Um die Probleme mit dem Verkehrsrouting zu lösen, müssen Sie ein Verbindungssubnetz eingeben und etwas Netzwerkzauber hinzufügen.  Zum Beispiel so: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-4/tn/z4/-4tnz4vvp_c9z71-t13dh357x9s.png"></div><br>  Beschreibung: <br><br><ul><li>  Die Anwendung läuft auf einem Smartphone, das mit dem R1-Router verbunden ist.  Das Smartphone empfängt die Adresse über DHCP, in unserem Beispiel 192.168.100.100. </li><li>  Die IP-Adresse von R1 auf der WiFi-Schnittstelle lautet 192.168.100.1 (wie von der Anwendung gewünscht), auf der Ethernet-Schnittstelle 192.168.99.1 (dies ist ein Docking-Subnetz). </li><li>  Die R2-IP-Adresse auf der Ethernet-Schnittstelle lautet 192.168.99.2, auf der WiFi-Schnittstelle wird sie über DHCP vom Registrar bezogen, in unserem Beispiel 192.168.100.150. </li><li>  Jeder Router führt DNAT am Eingang und SNAT am Ausgang durch, sodass Pakete in jedem Subnetz Quell- und Zieladressen haben, die mit den Adressen der Edge-Router dieses Netzwerks übereinstimmen. </li></ul><br>  Wie ist die Verbindung: <br><br><ol><li>  Die Anwendung stellt sicher, dass sie mit dem WLAN des Registrars verbunden ist, und stellt eine Verbindung mit der Adresse 192.168.100.1 her, sofern dies die Adresse des Registrars ist. </li><li>  R1 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.99.2 und auf der ausgehenden Schnittstelle - SNAT mit der Ersetzung der Quelladresse durch 192.168.99.1 ausgeführt wird. </li><li>  R2 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.100.1 und auf der ausgehenden Schnittstelle ausgeführt wird - Maskerade mit der Ersetzung der Quelladresse durch die vom Registrar über DHCP empfangene Adresse. </li><li>  Der Registrar akzeptiert und verarbeitet die Verbindungsanforderung, die von der Adresse stammt, die er zuvor über DHCP ausgegeben hat.  Welches war erforderlich. </li></ol><br>  Ein nachdenklicher Leser hat bereits eine Frage: Für welche Art von Verkehr leite ich um?  Beginnend mit "Der gesamte Datenverkehr außer SSH" <b>und dem Aktivieren der</b> Protokollierung wurde mir klar, dass es <b>ausreicht, die TCP-Ports 7777, 7778 und 7779 umzuleiten</b> .  Die Anwendung benötigt nichts anderes, um mit dem Registrar zu arbeiten. <br><br><h3>  Wir leiten den Verkehr über das Internet weiter </h3><br>  Als ich lernte, wie man die Anwendung austrickst, beseitigte ich das schwierigste Hindernis für das Hauptziel - den Zugriff auf Datensätze von überall im Internet zu organisieren.  Damit die Anwendung, die an diesem „beliebigen Punkt“ auf dem Telefon ausgeführt wird, eine Verbindung zum Registrar herstellen und „täuschen“ kann, müssen alle oben genannten Bedingungen erfüllt sein, was einige Einschränkungen mit sich bringt.  An einer Adresse werden jedoch besonders häufig Aufzeichnungen benötigt - sie sind zu Hause.  Hier beginnen wir mit einem Heimrouter. <br><br>  Zu Hause habe ich, wie Sie wahrscheinlich schon vermutet haben, auch Mikrotik.  Der externe Router hat eine „weiße“ IP-Adresse, mit der ich einen L2TP-Tunnel zwischen dem Auto- und dem Heimrouter erstellt und ein weiteres Docking-Subnetz zwischen ihnen organisiert habe.  Der oben beschriebenen Schaltung wurde ein weiterer Router hinzugefügt, der nun wie folgt vereinfacht aussieht: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ji/mu/zb/jimuzbzw8kdjeetkljvp3aqt-bu.png"></div><br>  Beschreibung: <br><br><ul><li>  Die Anwendung läuft auf einem Smartphone, das mit dem R0-Heimrouter verbunden ist.  Das Smartphone empfängt die Adresse über DHCP, in unserem Beispiel 192.168.100.100. </li><li>  Die IP-Adresse von R0 auf der WiFi-Schnittstelle lautet 192.168.100.1 (wie von der Anwendung gewünscht), auf der L2TP-Schnittstelle 192.168.98.1 (Docking-Subnetz 0). </li><li>  Die IP-Adresse R1 auf der L2TP-Schnittstelle lautet 192.168.98.2, auf der Ethernet-Schnittstelle 192.168.99.1 (Verbindungssubnetz 1). </li><li>  Die R2-IP-Adresse auf der Ethernet-Schnittstelle lautet 192.168.99.2, auf der WiFi-Schnittstelle wird sie über DHCP vom Registrar bezogen, in unserem Beispiel 192.168.100.150. </li><li>  Jeder Router führt DNAT am Eingang und SNAT am Ausgang durch, sodass Pakete in jedem Subnetz Quell- und Zieladressen haben, die mit den Adressen der Edge-Router dieses Netzwerks übereinstimmen. </li></ul><br>  Wie ist die Verbindung: <br><br><ol><li>  Die Anwendung stellt sicher, dass sie mit dem WLAN des Registrars verbunden ist, und stellt eine Verbindung mit der Adresse 192.168.100.1 her, sofern dies die Adresse des Registrars ist. </li><li>  R0 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.98.2 und auf der ausgehenden Schnittstelle - SNAT mit der Ersetzung der Quelladresse durch 192.168.98.1 ausgeführt wird. </li><li>  R1 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.99.2 und auf der ausgehenden Schnittstelle - SNAT mit der Ersetzung der Quelladresse durch 192.168.99.1 ausgeführt wird. </li><li>  R2 akzeptiert die Verbindungsanforderung, die auf der eingehenden DNAT-Schnittstelle mit der Ersetzung der Zieladresse durch 192.168.100.1 und auf der ausgehenden Schnittstelle ausgeführt wird - Maskerade mit der Ersetzung der Quelladresse durch die vom Registrar über DHCP empfangene Adresse. </li><li>  Der Registrar akzeptiert und verarbeitet die Verbindungsanforderung, die von der Adresse stammt, die er zuvor über DHCP ausgegeben hat.  Welches war erforderlich. </li></ol><br><div class="spoiler">  <b class="spoiler_title">PS.</b> <div class="spoiler_text">  Mit Punkt 2 können Sie es etwas einfacher machen, wenn Sie DNAT sofort auf dem 99. statt auf dem 98. Subnetz ausführen und die Route über R1 zum 99. Subnetz hinzufügen.  Aber ich beschreibe nur die allgemeine Idee und ein Beispiel für ihre Implementierung, und es gibt viele Möglichkeiten, all dies in ein bestehendes Netzwerk zu integrieren. <br></div></div><br><h3>  Woher bekommen wir Essen? </h3><br>  Router und ein Modem verbrauchen ein wenig, aber genug, um die Autobatterie in 3-4 Tagen auf Null zu bringen.  Daher ist es besser, sie bei Bedarf einzubeziehen.  Und um in das Konzept des „jederzeitigen Zugriffs“ zu passen, nutzte ich die Tatsache, dass der in meinem Auto installierte Starline A96-Alarm unter anderem über ein GSM-Modul verfügt, das die Aufnahme eines zusätzlichen Kanals auf Befehl einer Fernbedienung oder einer Smartphone-Anwendung programmiert und den mAP-Router eingeschaltet hat von einem zusätzlichen Kanal und mAP lite - über PoE vom ersten.  Ich werde hier nicht im Detail darüber sprechen, all dies ist leicht zu googeln, aber wenn Sie interessiert sind, schreiben Sie in die Kommentare. <br><br><h3>  Zusammenfassung </h3><br>  Nachdem ich das alles getan hatte, hatte ich die Möglichkeit, nicht nur Rekorderaufzeichnungen zu kopieren, während ich zu Hause saß, sondern auch Bilder von Kameras in Echtzeit anzusehen.  Unabhängig davon, wo sich das Auto befindet, ist die Hauptsache, dass der Router über eine Internetverbindung verfügt.  Ist das nicht perfekt? <br><br>  Und mit einem angenehmen Bonus habe ich eine höhere Geschwindigkeit beim Kopieren von Videos als im Auto: 1,2-1,5 MBit / s gegenüber 1 MBit / s.  Ich weiß nicht warum. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yi/ro/js/yirojsw0zniqglhireevkolxiuk.png"></div><br><h3>  Wird es Konfigurationen geben? </h3><br>  Ehrlich gesagt glaube ich nicht, dass es jemandem einfallen würde, genau das zu tun, was beschrieben wird.  In jedem Fall wird die Lösung an das angepasst, was bereits verfügbar ist.  Aber wenn Sie es wirklich brauchen - unten finden Sie die Nat-Regeln, nach denen 99% von allem, was oben besprochen wurde, implementiert sind. <br><br><div class="spoiler">  <b class="spoiler_title">R0</b> <div class="spoiler_text"><pre><code class="hljs sql">/ip firewall nat add action=src-nat chain=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> src-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.98</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.98</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">R1</b> <div class="spoiler_text"><pre> <code class="hljs sql">/ip firewall nat add action=masquerade chain=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=ether2 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">R2</b> <div class="spoiler_text"><pre> <code class="hljs sql">/ip firewall nat add action=dst-nat chain=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=ether1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1</code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de416323/">https://habr.com/ru/post/de416323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de416309/index.html">Verwendung von HDF5-Dateien in Python</a></li>
<li><a href="../de416313/index.html">Checkliste für die Analyse von Sicherheitsereignisprotokollen</a></li>
<li><a href="../de416315/index.html">ASP.NET Razor: Lösen einiger Architekturprobleme für das Ansichtsmodell</a></li>
<li><a href="../de416319/index.html">Hintergrund: IMEI- und Rossvyaz-Whitelists</a></li>
<li><a href="../de416321/index.html">Wie man ein Sprecher internationaler IT-Konferenzen wird</a></li>
<li><a href="../de416327/index.html">Was ist neu am neuen Standard 802.11ax (High Efficiency WLAN) und wann muss darauf gewartet werden?</a></li>
<li><a href="../de416329/index.html">Die Rückkehr der sowjetischen interplanetaren Station. Vorläufige Prognose</a></li>
<li><a href="../de416331/index.html">Die Geschichte der Umgestaltung der Citimobil-Anwendung</a></li>
<li><a href="../de416333/index.html">New Wave: Warum die Wasserkühlung im Rechenzentrum immer beliebter wird</a></li>
<li><a href="../de416335/index.html">Ein kleiner Rückblick auf die QCon 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>