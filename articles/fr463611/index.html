<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôèüèø üÜï üë± Plugins fantastiques, vol. 2. Pratique üë©üèΩ‚Äçü§ù‚Äçüë©üèº ü§∞ üåå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ici vous pouvez lire le premier article avec la th√©orie de l'ing√©nierie des plug-ins. 


 Et dans cette partie, je vais vous dire quels probl√®mes nous...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plugins fantastiques, vol. 2. Pratique</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/463611/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici</a> vous pouvez lire le premier article avec la th√©orie de l'ing√©nierie des plug-ins. </p><br><p>  Et dans cette partie, je vais vous dire quels probl√®mes nous avons rencontr√©s lors de la cr√©ation du plugin et comment nous avons essay√© de les r√©soudre. <br><img src="https://habrastorage.org/webt/db/cn/c-/dbcnc-m5gfz68a0hpvnt2qjdcgw.png" alt="image"></p><a name="habracut"></a><br><h1 id="o-chem-budu-govorit">  De quoi vais-je parler? </h1><br><ul><li>  Partie pratique <br><ul><li>  Interface multipage </li><li>  DI dans les plugins </li><li>  G√©n√©ration de code </li><li>  Modification du code </li></ul></li><li>  Que faire ensuite? <br><ul><li>  Astuces </li><li>  FAQ </li></ul></li></ul><br><h2 id="mnogostranichnyy-ui">  Interface multipage </h2><br><p>  La premi√®re chose que nous devions faire √©tait de cr√©er une interface utilisateur multi-pages.  Nous avons cr√©√© le premier formulaire complexe avec un tas de coches, des champs de saisie.  Un peu plus tard, nous avons d√©cid√© d'ajouter la possibilit√© de s√©lectionner une liste de modules que l'utilisateur peut connecter au nouveau module.  Et nous voulons √©galement choisir les modules d'application auxquels nous pr√©voyons de connecter le module cr√©√©. </p><br><p>  Avoir autant de contr√¥les sur un seul formulaire n'est pas tr√®s pratique, ils ont donc fait trois pages distinctes, trois emporte-pi√®ces s√©par√©s.  En bref, la bo√Æte de dialogue Assistant. </p><br><p><img src="https://habrastorage.org/webt/hd/jw/wf/hdjwwfojlb6w7gj_sacdswi802g.png" alt="image"></p><br><p>  Mais comme cr√©er une interface utilisateur multi-pages dans des plugins est tr√®s douloureux, je voulais trouver quelque chose de pr√™t.  Et dans les entrailles d'IDEA, nous avons d√©couvert une classe appel√©e <em>WizardDialog</em> . </p><br><p><img src="https://habrastorage.org/webt/tl/gr/6z/tlgr6ztp3yro6-yyyqyhjsd55ky.png" alt="image"></p><br><p>  Il s'agit d'une classe wrapper sur une bo√Æte de dialogue standard, surveillant ind√©pendamment la progression de l'utilisateur dans l'assistant et affichant les boutons n√©cessaires (Pr√©c√©dent, Suivant, Terminer, etc.).  Un <em>WizardModel</em> sp√©cial <em>est</em> attach√© au <em>WizardDialog</em> , auquel des WizardSteps individuels sont ajout√©s.  Chaque <em>WizardStep</em> est un formulaire distinct. </p><br><p>  Dans sa forme la plus simple, la mise en ≈ìuvre du dialogue est la suivante: </p><br><div class="spoiler">  <b class="spoiler_title">Wizarddialog</b> <div class="spoiler_text"><pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardDialog</span></span></span></span>( model: MyWizardModel, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> onFinishButtonClickedListener: (MyWizardModel) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> ): WizardDialog&lt;MyWizardModel&gt;(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, model) { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onWizardGoalAchieved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onWizardGoalAchieved() onFinishButtonClickedListener.invoke(myModel) } }</code> </pre> </div></div><br><p>  <em>Nous allons h√©riter</em> de la classe <em>WizardDialog</em> , param√©trer avec la classe de notre <em>WizardModel</em> .  Cette classe a un rappel sp√©cial ( <em>onWizardGoalAchieved</em> ), qui nous indique que l'utilisateur est pass√© par l'assistant jusqu'√† la fin et a cliqu√© sur le bouton "Terminer". <br>  Il est important de noter qu'√† partir de cette classe, il est possible d'atteindre uniquement le <em>WizardModel</em> .  Cela signifie que toutes les donn√©es que l'utilisateur collectera lors du passage de l'assistant, vous devez les ajouter dans le <em>WizardModel</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Wizardmodel</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardModel</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WizardModel</span></span></span></span>(<span class="hljs-string"><span class="hljs-string">"Title for my wizard"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep1()) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep2()) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep3()) } }</code> </pre> </div></div><br><p>  Le mod√®le est le suivant: nous <em>h√©ritons de la</em> classe <em>WizardModel</em> et en utilisant la m√©thode <em>add</em> <em>int√©gr√©e, nous</em> <em>ajoutons</em> des <em>WizardSteps</em> s√©par√©s √† la bo√Æte de dialogue. </p><br><div class="spoiler">  <b class="spoiler_title">Wizardstep</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardStep1</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WizardStep</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MyWizardModel</span></span></span><span class="hljs-class">&gt;</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentPanel: JPanel <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(state: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">WizardNavigationState</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: JComponent { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contentPanel } }</code> </pre> </div></div><br><p>  <em>Les WizardSteps sont</em> √©galement simples: nous <em>h√©ritons de la</em> classe <em>WizardStep</em> , la param√©trons avec notre classe de mod√®le et, surtout, red√©finissons la m√©thode prepare, qui renvoie le composant racine de votre futur formulaire. </p><br><p>  En termes simples, cela ressemble vraiment √† ceci.  Mais dans le monde r√©el, votre formulaire ressemblera probablement √† quelque chose comme ceci: </p><br><p><img src="https://habrastorage.org/webt/as/6d/mc/as6dmcznqssdt7zwhdz7ndebuv8.png" alt="image"></p><br><p>  Ici, vous vous souvenez de ces moments o√π nous, dans le monde Android, ne savions pas encore ce qu'est l'architecture propre, MVP et avons √©crit tout le code en une seule activit√©.  Il y a un nouveau champ pour les batailles architecturales, et si vous voulez vous embrouiller, vous pouvez impl√©menter votre propre architecture pour les plugins. </p><br><h3 id="vyvod">  Conclusion </h3><br><p>  Si vous avez besoin d'une interface utilisateur multi-pages, utilisez <em>WizardDialog</em> - ce sera plus facile. </p><br><p>  Nous passons au sujet suivant - DI dans les plugins. </p><br><h2 id="di-v-plaginah">  DI dans les plugins </h2><br><p>  Pourquoi une injection de d√©pendance dans un plug-in peut-elle √™tre requise? <br>  La premi√®re raison est l'organisation de l'architecture √† l'int√©rieur du plugin. </p><br><p>  Il semblerait, pourquoi g√©n√©ralement observer une sorte d'architecture √† l'int√©rieur du plugin?  Un plug-in est une chose utilitaire, une fois que je l'ai √©crit, et c'est tout, j'ai oubli√©. <br>  Oui, mais non. <br>  Lorsque votre plugin grandit, lorsque vous √©crivez beaucoup de code, la question du code structur√© se pose d'elle-m√™me.  Ici, DI peut √™tre utile. </p><br><p>  La deuxi√®me raison, plus importante - avec l'aide de DI, vous pouvez atteindre les composants √©crits par les d√©veloppeurs d'autres plugins.  Il peut s'agir de bus d'√©v√©nements, d'enregistreurs et bien plus encore. </p><br><p>  Malgr√© le fait que vous √™tes libre d'utiliser n'importe quel framework DI (Spring, Dagger, etc.), √† l'int√©rieur d'IntelliJ IDEA il y a votre propre framework DI, qui est bas√© sur les trois premiers niveaux d'abstraction, dont j'ai d√©j√† parl√©: <em>Application</em> , <em>Project</em> et <em>Module</em> . </p><br><p><img src="https://habrastorage.org/webt/ix/kh/dk/ixkhdkerqkc0sapkdvgj5qsg_44.png" alt="image"></p><br><p>  Chacun de ces niveaux a sa propre abstraction appel√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>Composant</em></a> .  Le composant du niveau requis est cr√©√© par instance de l'objet de ce niveau.  Ainsi, <em>ApplicationComponent</em> est cr√©√© une fois pour chaque instance de la classe <em>Application</em> , de mani√®re similaire √† <em>ProjectComponent</em> pour <em>les</em> instances de <em>Project</em> , etc. </p><br><p>  Que faut-il faire pour utiliser le cadre DI? </p><br><p>  Tout d'abord, cr√©ez une classe qui impl√©mente l'un des composants d'interface n√©cessaires - par exemple, une classe qui impl√©mente <em>ApplicationComponent</em> , ou <em>ProjectComponent</em> , ou <em>ModuleComponent</em> .  Dans le m√™me temps, nous avons la possibilit√© d'injecter un objet du niveau dont nous mettons en ≈ìuvre l'interface.  Autrement dit, dans <em>ProjectComponent,</em> vous pouvez injecter un objet de la classe <em>Project</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Cr√©ation de classes de composants</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAppComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> application: Application, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherApplicationComponent: AnotherAppComponent ): ApplicationComponent <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyProjectComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherProjectComponent: AnotherProjectComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent: MyAppComponent ): ProjectComponent <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyModuleComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> module: Module, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherModuleComponent: AnotherModuleComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myProjectComponent: MyProjectComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent: MyAppComponent ): ModuleComponent</code> </pre> </div></div><br><p>  Deuxi√®mement, il est possible d'injecter d'autres composants du m√™me niveau ou plus.  C'est-√†-dire, par exemple, dans <em>ProjectComponent,</em> vous pouvez injecter d'autres <em>ProjectComponent</em> ou <em>ApplicationComponent</em> .  C'est l√† que vous pouvez acc√©der aux instances de composants "√©trangers". </p><br><p>  Dans le m√™me temps, IDEA garantit que l'ensemble du graphe de d√©pendances sera correctement assembl√©, tous les objets seront cr√©√©s dans le bon ordre et correctement initialis√©s. </p><br><p>  La prochaine chose √† faire est d'enregistrer le composant dans le fichier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>plugin.xml</em></a> .  D√®s que vous impl√©mentez l'une des interfaces de composant (par exemple, <em>ApplicationComponent</em> ), IDEA vous propose imm√©diatement d'enregistrer votre composant dans plugin.xml. </p><br><div class="spoiler">  <b class="spoiler_title">Enregistrer le composant dans plugin.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project-components</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">interface-class</span></span></span><span class="hljs-tag">&gt;</span></span> com.experiment.MyProjectComponent <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">interface-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">implementation-class</span></span></span><span class="hljs-tag">&gt;</span></span> com.experiments.MyProjectComponentImpl <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">implementation-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project-components</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Comment cela se fait-il?  Une <em>balise &lt;project-component&gt;</em> sp√©ciale appara√Æt ( <em>&lt;application-component&gt;</em> , <em>&lt;module-component&gt;</em> - selon le niveau).  Il y a une balise √† l'int√©rieur <em>, il en a deux autres: <em>&lt;interface-class&gt;</em> , o√π le nom d'interface de votre composant est indiqu√©, et <em>&lt;implementation-class&gt;</em> , o√π la classe d'impl√©mentation est indiqu√©e.</em>  <em>Une m√™me classe peut √™tre une interface d'un composant ou son impl√©mentation, vous pouvez donc le faire avec une seule <em>balise &lt;implementation-class&gt;</em> .</em> <br></p><p>  La derni√®re chose √† faire est d'obtenir le composant √† partir de l'objet correspondant, c'est-√†-dire que nous obtenons <em>ApplicationComponent √†</em> partir de l'instance <em>Application</em> , <em>ProjectComponent √†</em> partir de <em>Project</em> , etc. </p><br><div class="spoiler">  <b class="spoiler_title">Obtenez le composant</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent = application.getComponent(MyAppComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myProjectComponent</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">project</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getComponent</span></span></span></span>(MyProjectComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myModuleComponent</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getComponent</span></span></span></span>(MyModuleComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">)</span></span></code> </pre> </div></div><br><h3 id="vyvody">  Conclusions </h3><br><ol><li>  Il y a un framework DI dans IDEA - pas besoin de faire glisser quoi que ce soit par vous-m√™me: ni Dagger ni Spring.  Bien s√ªr, vous le pouvez. </li><li>  Avec cette DI, vous pouvez atteindre les composants pr√™ts √† l'emploi, et c'est le jus lui-m√™me. </li></ol><br><p>  Passons √† la troisi√®me t√¢che - la g√©n√©ration de code. </p><br><h2 id="generaciya-koda">  G√©n√©ration de code </h2><br><p>  Rappelez-vous, dans la liste de contr√¥le, nous avions pour t√¢che de g√©n√©rer un grand nombre de fichiers?  Chaque fois que nous cr√©ons un nouveau module, nous cr√©ons un tas de fichiers: interacteurs, pr√©sentateurs, fragments.  Lors de la cr√©ation d'un nouveau module, ces composants sont tr√®s similaires les uns aux autres, et j'aimerais apprendre √† g√©n√©rer ce framework automatiquement. </p><br><h3 id="shablony">  Patterns </h3><br><p>  Quelle est la fa√ßon la plus simple de g√©n√©rer une tonne de code similaire?  Utilisez des mod√®les.  Vous devez d'abord regarder vos mod√®les et comprendre quelles exigences sont mises en avant pour le g√©n√©rateur de code. </p><br><div class="spoiler">  <b class="spoiler_title">Un morceau du mod√®le de fichier build.gradle</b> <div class="spoiler_text"><pre> <code class="java hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.library'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isKotlinProject) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-kapt'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModuleWithUI) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> }&gt; }&gt; ... android { ... &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isMoxyEnabled) { kapt { arguments { arg(<span class="hljs-string"><span class="hljs-string">"moxyReflectorPackage"</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;include var="packageName"&gt;'</span></span>) } } }&gt; ... } ... dependencies { <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">':common'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">':core-utils'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(moduleName in enabledModules)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'&lt;include var="moduleName"&gt;'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }&gt; ... }</span></span></code> </pre> </div></div><br><p>  Premi√®rement: nous voulions pouvoir utiliser des conditions √† l'int√©rieur de ces mod√®les.  Je donne un exemple: si le plugin est en quelque sorte connect√© avec l'interface utilisateur, nous voulons connecter les <em>extensions</em> sp√©ciales <em>kotlin-android-extensions</em> Gradle-plugin. </p><br><div class="spoiler">  <b class="spoiler_title">Condition √† l'int√©rieur du mod√®le</b> <div class="spoiler_text"><pre> <code class="java hljs">&lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isKotlinProject) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-kapt'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModuleWithUI) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> }&gt; }&gt;</code> </pre> </div></div><br><p>  La deuxi√®me chose que nous voulons, c'est la possibilit√© d'utiliser une variable √† l'int√©rieur de ce mod√®le.  Par exemple, lorsque nous configurons kapt pour Moxy, nous voulons ins√©rer le nom du package comme argument dans le processeur d'annotation. </p><br><div class="spoiler">  <b class="spoiler_title">Remplacez la valeur de la variable √† l'int√©rieur du mod√®le</b> <div class="spoiler_text"><pre> <code class="java hljs">kapt { arguments { arg(<span class="hljs-string"><span class="hljs-string">"moxyReflectorPackage"</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;include var="packageName"&gt;'</span></span>) } }</code> </pre> </div></div><br><p>  Une autre chose dont nous avons besoin est la possibilit√© de g√©rer les boucles √† l'int√©rieur du mod√®le.  Rappelez-vous le formulaire dans lequel nous avons s√©lectionn√© la liste des modules que nous voulons connecter au nouveau module en cours de cr√©ation?  Nous voulons les contourner en boucle et ajouter la m√™me ligne. </p><br><div class="spoiler">  <b class="spoiler_title">Utilisez la boucle dans le mod√®le.</b> <div class="spoiler_text"><pre> <code class="java hljs">&lt;<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (moduleName in enabledModules) { <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'&lt;include var="moduleName"&gt;'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }&gt;</span></span></code> </pre> </div></div><br><p>  Ainsi, nous proposons trois conditions pour le g√©n√©rateur de code: </p><br><ul><li>  Nous voulons utiliser les conditions </li><li>  Possibilit√© de substituer des valeurs variables </li><li>  Nous avons besoin de boucles dans les mod√®les </li></ul><br><h3 id="generatory-koda">  G√©n√©rateurs de code </h3><br><p>  Quelles sont les options pour impl√©menter le g√©n√©rateur de code?  Vous pouvez, par exemple, √©crire votre propre g√©n√©rateur de code.  Par exemple, les gars d'Uber l'ont fait: ils ont √©crit leur propre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plug-in pour g√©n√©rer des riblets</a> (les soi-disant unit√©s architecturales).  Ils ont cr√©√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">leur propre langage de mod√®le</a> , dans lequel ils n'ont utilis√© que la possibilit√© d'ins√©rer des variables.  Ils ont amen√© les conditions au <a href="">niveau du g√©n√©rateur</a> .  Mais nous pensions que nous ne ferions pas cela. </p><br><p>  La deuxi√®me option consiste √† utiliser la classe d'utilitaires FileTemplateManager int√©gr√©e √† IDEA, mais je ne recommanderais pas de le faire.  Parce qu'il a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Velocity</a> comme moteur, ce qui a quelques probl√®mes avec la transmission d'objets Java vers des mod√®les.  De plus, <em>FileTemplateManager</em> ne peut pas g√©n√©rer de fichiers autres que Java ou XML √† partir de la bo√Æte.  Et nous devions g√©n√©rer des fichiers Groovy, Kotlin, Proguard et d'autres types de fichiers. </p><br><p>  La troisi√®me option √©tait ... <em>FreeMarker</em> .  Si vous avez des mod√®les <em>FreeMarker</em> pr√™ts √† l'emploi, ne vous pr√©cipitez pas pour les jeter - ils peuvent vous √™tre utiles √† l'int√©rieur du plugin. </p><br><p>  Que faut-il faire, quoi utiliser <em>FreeMarker</em> dans le plugin?  Tout d'abord, ajoutez des mod√®les de fichiers.  Vous pouvez cr√©er le dossier <em>/ templates</em> dans le dossier <em>/ resources</em> et y ajouter tous nos mod√®les pour tous les fichiers - pr√©sentateurs, fragments, etc. </p><br><p><img src="https://habrastorage.org/webt/gk/ww/fe/gkwwfelyl443hdze6vd6a99ecmw.png" alt="image"></p><br><p>  Apr√®s cela, vous devrez ajouter une d√©pendance √† la biblioth√®que FreeMarker.  √âtant donn√© que le plugin utilise Gradle, ajouter une d√©pendance est facile. </p><br><div class="spoiler">  <b class="spoiler_title">Ajouter une d√©pendance √† la biblioth√®que FreeMarker</b> <div class="spoiler_text"><pre> <code class="java hljs">dependencies { ... compile <span class="hljs-string"><span class="hljs-string">'org.freemarker:freemarker:2.3.28'</span></span> }</code> </pre> </div></div><br><p>  Apr√®s cela, configurez FreeMarker dans notre plugin.  Je vous conseille de simplement copier cette configuration ici - elle est tortur√©e, subie, copiez-la et tout fonctionne. </p><br><div class="spoiler">  <b class="spoiler_title">Configuration de FreeMarker</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplatesFactory</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project) : ProjectComponent { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> freeMarkerConfig <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> lazy { Configuration(Configuration.VERSION_2_3_28).apply { setClassForTemplateLoading( TemplatesFactory::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">"/templates" ) defaultEncoding = Charsets.UTF_8.name</span></span></span></span>() templateExceptionHandler = TemplateExceptionHandler.RETHROW_HANDLER logTemplateExceptions = <span class="hljs-literal"><span class="hljs-literal">false</span></span> wrapUncheckedExceptions = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } ...</code> </pre> </div></div><br><p>  Il est temps de cr√©er des fichiers √† l'aide de <em>FreeMarker</em> .  Pour ce faire, nous obtenons un mod√®le de la configuration par son nom et en utilisant un <em>FileWriter</em> normal, cr√©ez un fichier avec le texte souhait√© directement sur le disque. </p><br><div class="spoiler">  <b class="spoiler_title">Cr√©ation d'un fichier via FileWriter</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplatesFactory</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project) : ProjectComponent { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( pathToFile: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, templateFileName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">data</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Any&gt; )</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = freeMarkerConfig.getTemplate(templateFileName) FileWriter(pathToFile, <span class="hljs-literal"><span class="hljs-literal">false</span></span>).use { writer -&gt; template.process(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>, writer) } } }</code> </pre> </div></div><br><p>  Et la t√¢che semble √™tre r√©solue, mais non.  Dans la partie th√©orique, j'ai mentionn√© que l'ensemble de l'IDEA est impr√©gn√© de la structure PSI, et cela doit √™tre pris en compte.  Si vous cr√©ez des fichiers en contournant la structure PSI (par exemple, via FileWriter), IDEA ne comprendra tout simplement pas que vous avez cr√©√© quelque chose et n'affichera pas les fichiers dans l'arborescence du projet.  Nous avons attendu environ sept minutes avant que IDEA indexe et ne voie les fichiers cr√©√©s. </p><br><p>  Conclusion - faites-le bien, cr√©ez des fichiers, en tenant compte de la structure du PSI. </p><br><h3 id="sozdaem-psi-strukturu-dlya-faylov">  Cr√©er une structure PSI pour les fichiers </h3><br><p>  Pour commencer, <a href="">voyons la</a> structure des dossiers √† l'aide de <a href="">PsiDirectory</a> .  Le r√©pertoire de d√©marrage du projet peut √™tre obtenu en utilisant les fonctions d'extension <em>guessProjectDir</em> et <em>toPsiDirectory</em> : </p><br><div class="spoiler">  <b class="spoiler_title">Obtenez le projet PsiDirectory</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> projectPsiDirectory = project.guessProjectDir()?.toPsiDirectory(project)</code> </pre> </div></div><br><p>  Les r√©pertoires suivants peuvent √™tre trouv√©s √† l'aide de la m√©thode de classe <em>PsiDirectory</em> <em>findSubdirectory</em> , ou cr√©√©s √† l'aide de la m√©thode <em>createSubdirectory</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Rechercher et cr√©er PsiDirectory</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> coreModuleDir = projectPsiDirectory.findSubdirectory(<span class="hljs-string"><span class="hljs-string">"core"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newModulePsiDir = coreModuleDir.createSubdirectory(config.mainParams.moduleName)</code> </pre> </div></div><br><p>  Je vous recommande √©galement de cr√©er une <em>carte √†</em> partir de laquelle vous pouvez obtenir toutes les structures de dossiers <em>PsiDirectory √† l'</em> aide d'une cl√© de cha√Æne, puis d'ajouter les fichiers cr√©√©s √† l'un de ces dossiers. </p><br><div class="spoiler">  <b class="spoiler_title">Cr√©er une carte de structure de dossiers</b> <div class="spoiler_text"><p>  return mutableMapOf &lt;String, PsiDirectory?&gt; (). apply { <br>  this ["root"] = modulePsiDir <br>  this ["src"] = modulePsiDir.createSubdirectory ("src") <br>  this ["main"] = this ["src"]?. createSubdirectory ("main") <br>  this ["java"] = this ["main"]?. createSubdirectory ("java") <br>  this ["res"] = this ["main"]?. createSubdirectory ("res") </p><br><pre> <code class="plaintext hljs">//   PsiDirectory   package name: // ru.hh.feature_worknear ‚Üí ru / hh / feature_worknear createPackageNameFolder(config) // data this["data"] = this["package"]?.createSubdirectory("data") // ...</code> </pre> <br><p>  } </p></div></div><br><p>  Dossiers cr√©√©s.  Nous allons cr√©er des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PsiFiles √† l'</a> aide de <a href="">PsiFileFactory</a> .  Cette classe a une m√©thode sp√©ciale appel√©e <em>createFileFromText</em> .  La m√©thode accepte trois param√®tres en entr√©e: nom (String fileName), texte (String text) et type (FileType fileType) du fichier de sortie.  Deux des trois param√®tres indiquent clairement o√π l'obtenir: nous connaissons le nom nous-m√™mes, nous obtenons le texte de FreeMarker.  Et o√π trouver <em>FileType</em> ?  Et de quoi s'agit-il? </p><br><h3 id="filetype">  Type de fichier </h3><br><p>  <a href=""><em>FileType</em></a> est une classe sp√©ciale qui d√©signe le type de fichier.  Seuls deux FileType sont √† notre disposition dans la ¬´bo√Æte¬ª: JavaFileType et XmlFileType, respectivement pour les fichiers Java et les fichiers XML.  Mais la question se pose: o√π trouver les types pour le fichier <em>build.gradle</em> , pour les fichiers <em>Kotlin</em> , pour <em>Proguard</em> , pour <em>.gitignore</em> , enfin?! </p><br><p>  Premi√®rement, la plupart de ces <em>FileType</em> peuvent √™tre extraits d'autres plugins d√©j√† √©crits par quelqu'un.  GroovyFileType peut √™tre extrait du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin Groovy</a> , KotlinFileType du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin Kotlin</a> , Proguard du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin Android</a> . </p><br><p>  Comment ajouter la d√©pendance d'un autre plugin au n√¥tre?  Nous utilisons le <em>plugin gradle-intellij</em> .  Il ajoute un bloc intellij sp√©cial au fichier build.gradle du plugin, √† l'int√©rieur duquel se trouve une propri√©t√© sp√©ciale - <em>plugins</em> .  Dans cette propri√©t√©, vous pouvez lister la liste des identifiants de plugin dont nous voulons d√©pendre. </p><br><div class="spoiler">  <b class="spoiler_title">Ajouter des d√©pendances √† d'autres plugins</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// build.gradle  intellij { ‚Ä¶ plugins = ['android', 'Groovy', 'kotlin'] }</span></span></code> </pre> </div></div><br><p>  Nous r√©cup√©rons les cl√©s du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©p√¥t</a> officiel du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin JetBrains</a> .  Pour les plugins int√©gr√©s √† IDEA (qui sont Groovy, Kotlin et Android), le nom du dossier du plugin dans IDEA est suffisant.  Pour le reste, vous devez aller sur la page d'un plugin sp√©cifique dans le r√©f√©rentiel officiel des plugins JetBrains, la propri√©t√© <em>ID XML</em> du <em>plugin</em> y sera indiqu√©e, ainsi que la version (par exemple, voici la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page du plugin Docker</a> ).  En savoir plus sur la connexion d'autres plugins <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur GitHub</a> . </p><br><p>  Deuxi√®mement, vous devez ajouter une description de d√©pendance au fichier <em>plugin.xml</em> .  Cela se fait √† l'aide de la balise <em>.</em> <br></p><div class="spoiler">  <b class="spoiler_title">Nous connectons les plugins dans plugin.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.intellij.groovy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Apr√®s avoir synchronis√© le projet, nous resserrerons les d√©pendances des autres plugins et nous pourrons les utiliser. </p><br><p>  Mais que se passe-t-il si nous ne voulons pas d√©pendre d'autres plugins?  Dans ce cas, nous pouvons cr√©er un stub pour le type de fichier dont nous avons besoin.  Pour ce faire, cr√©ez d'abord une classe qui h√©ritera de la classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>Language</em></a> .  L'identifiant unique de notre langage de programmation sera transmis √† cette classe (dans notre cas - <strong>"ru.hh.plugins.Ignore"</strong> ). </p><br><div class="spoiler">  <b class="spoiler_title">Cr√©er une langue pour les fichiers GitIgnore</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IgnoreLanguage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">private</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">constructor</span></span></span></span>() : Language(<span class="hljs-string"><span class="hljs-string">"ru.hh.plugins.Ignore"</span></span>, <span class="hljs-string"><span class="hljs-string">"ignore"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>), InjectableLanguage { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> INSTANCE = IgnoreLanguage() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDisplayName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Ignore() (</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">)"</span></span> } }</code> </pre> </div></div><br><p>  Il y a une fonctionnalit√© ici: certains d√©veloppeurs ajoutent une ligne non unique comme identifiant.  Pour cette raison, l'int√©gration de votre plugin avec d'autres plugins peut se casser.  Nous sommes super, nous avons une ligne unique. </p><br><p>  La prochaine chose √† faire apr√®s avoir cr√©√© <em>Language</em> est de cr√©er un <em>FileType</em> .  Nous h√©ritons de la classe <em>LanguageFileType</em> , utilisons l'instance de langue que nous avons d√©finie pour initialiser, rempla√ßons certaines m√©thodes tr√®s simples.  C'est fait.  Nous pouvons maintenant utiliser le <em>FileType</em> nouvellement cr√©√©. </p><br><div class="spoiler">  <b class="spoiler_title">Cr√©ez votre propre FileType pour .gitignore</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IgnoreFileType</span></span></span></span>(language: Language) : LanguageFileType(language) { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> INSTANCE = IgnoreFileType(IgnoreLanguage.INSTANCE) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore file"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDescription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore files"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDefaultExtension</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIcon</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Icon? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre></div></div><br><h3 id="zavershaem-sozdanie-fayla">  Terminez la cr√©ation du fichier </h3><br><p>  Apr√®s avoir trouv√© tous les <em>FileType</em> n√©cessaires, je recommande de cr√©er un conteneur sp√©cial appel√© <em>TemplateData</em> - il contiendra toutes les donn√©es sur le mod√®le √† partir duquel vous souhaitez g√©n√©rer du code.  Il contiendra le nom du fichier mod√®le, le nom du fichier de <em>sortie</em> que vous obtenez apr√®s avoir g√©n√©r√© le code, le <em>FileType</em> souhait√© et enfin <em>PsiDirectory</em> , o√π vous ajoutez le fichier cr√©√©. </p><br><div class="spoiler">  <b class="spoiler_title">TemplateData</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplateData</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> templateFileName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFileName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFileType: FileType, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFilePsiDirectory: PsiDirectory? )</code> </pre> </div></div><br><p>  Ensuite, nous revenons √† <em>FreeMarker</em> - nous en obtenons le fichier mod√®le, en utilisant <em>StringWriter</em> nous obtenons le texte, dans <em>PsiFileFactory nous</em> g√©n√©rons le <em>PsiFile</em> avec le texte et le type souhait√©s.  Le fichier cr√©√© est ajout√© au r√©pertoire souhait√©. </p><br><div class="spoiler">  <b class="spoiler_title">Cr√©ez PsiFile dans le dossier souhait√©</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createFromTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">data</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">FileTemplateData</span></span></span></span><span class="hljs-function"><span class="hljs-params">, properties: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Any&gt;)</span></span></span></span>: PsiFile { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = freeMarkerConfig.getTemplate(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.templateFileName) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text = StringWriter().use { writer -&gt; template.process(properties, writer) writer.buffer.toString() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> psiFileFactory.createFileFromText(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.outputFileName, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.outputFileType, text) }</code> </pre> </div></div><br><p>  Ainsi, la structure PSI est prise en compte, et IDEA, ainsi que d'autres plugins, verront ce que nous avons fait.  Cela peut √™tre avantageux: par exemple, si le plugin pour Git voit que vous avez ajout√© un nouveau fichier, il affichera automatiquement une bo√Æte de dialogue vous demandant si vous souhaitez ajouter ces fichiers √† Git? </p><br><h3 id="vyvody-pro-generaciyu-koda">  Conclusions sur la g√©n√©ration de code </h3><br><ul><li>  Les fichiers texte peuvent √™tre g√©n√©r√©s par FreeMarker.  Tr√®s confortable. </li><li>  Lors de la g√©n√©ration de fichiers, vous devez tenir compte de la structure PSI, sinon tout ira mal. </li><li>  Si vous souhaitez g√©n√©rer des fichiers √† l'aide de PsiFileFactory, vous devrez trouver FileType quelque part. </li></ul><br><p>  Eh bien, nous passons maintenant √† la derni√®re, la partie pratique la plus d√©licieuse - il s'agit d'une modification du code. </p><br><h2 id="modifikaciya-koda">  Modification du code </h2><br><p>  En fait, cr√©er un plugin uniquement pour g√©n√©rer du code est un non-sens, car vous pouvez g√©n√©rer du code avec d'autres outils et le m√™me <em>FreeMarker</em> .  Mais ce que <em>FreeMarker</em> ne peut pas faire, c'est modifier le code. </p><br><p>  Notre liste de contr√¥le a plusieurs t√¢ches li√©es √† la modification du code, commen√ßons par la plus simple - la modification du fichier <em>settings.gradle</em> . </p><br><h3 id="modifikaciya-settingsgradle">  Modification settings.gradle </h3><br><p>  Permettez-moi de vous rappeler ce que nous voulons faire: nous devons ajouter quelques lignes √† ce fichier qui d√©criront le chemin d'acc√®s au module nouvellement cr√©√©: </p><br><div class="spoiler">  <b class="spoiler_title">Description du chemin d'acc√®s au module</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// settings.gradle include ':analytics project(':analytics').projectDir = new File(settingsDir, 'core/framework-metrics/analytics) ... include ':feature-worknear' project(':feature-worknear').projectDir = new File(settingsDir, 'feature/feature-worknear')</span></span></code> </pre> </div></div><br><p>  Je vous ai fait peur un peu plus t√¥t que vous devez toujours prendre en compte la structure PSI lorsque vous travaillez avec des fichiers, sinon <del>  tout va br√ªler </del>  ne fonctionnera pas.  En fait, dans les t√¢ches simples, telles que l'ajout de quelques lignes √† la fin d'un fichier, cela peut √™tre omis.  Vous pouvez ajouter quelques lignes au fichier en utilisant le fichier <em>java.io.File</em> habituel.  Pour ce faire, nous trouvons le chemin d'acc√®s au fichier, cr√©ons l'instance <em>java.io.File</em> et √† l'aide des fonctions d' <em>extension</em> Kotlin, ajoutez deux lignes √† la fin de ce fichier.  Vous pouvez le faire, IDEA verra vos modifications. </p><br><div class="spoiler">  <b class="spoiler_title">Ajout de lignes au fichier settings.gradle</b> <div class="spoiler_text"><p>  val projectBaseDirPath = project.basePath?: retour <br>  val settingsPathFile = projectBaseDirPath + "/settings.gradle" </p><br><p>  val settingsFile = File (settingsPathFile) </p><br><p>  settingsFile.appendText ("include ': $ moduleName'") <br>  settingsFile.appendText ( <br>  "project (': $ moduleName'). projectDir = new File (settingsDir, '$ folderPath')" <br>  ) </p></div></div><br><p>  Eh bien, id√©alement, bien s√ªr, c'est mieux gr√¢ce √† la structure PSI - c'est plus fiable. </p><br><h3 id="donastroyka-kapt-a-dlya-toothpick">  R√©glage Kapt pour cure-dents </h3><br><p>  Encore une fois, je vous rappelle le probl√®me: dans le module d'application, il y a un fichier <em>build.gradle</em> , et √† l'int√©rieur il y a des param√®tres pour le processeur d'annotation.  Et nous voulons ajouter un package de notre module cr√©√© √† un endroit sp√©cifique. </p><br><div class="spoiler">  <b class="spoiler_title">O√π et o√π? ..</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/jt/hv/1b/jthv1bxuiigvexnvwnrvzs41wh8.png" alt="image"></p></div></div><br><p>  Notre objectif est de trouver un <em>PsiElement</em> sp√©cifique, apr√®s quoi nous pr√©voyons d'ajouter notre ligne.  La recherche de l'√©l√©ment commence par la recherche du <em>PsiFile</em> , qui d√©signe le fichier <em>build.gradle</em> du module d'application.  Et pour cela, vous devez trouver le module dans lequel nous rechercherons le fichier. </p><br><div class="spoiler">  <b class="spoiler_title">Nous recherchons un module par nom</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = ModuleManager.getInstance(project) .modules.toList() .first { it.name == <span class="hljs-string"><span class="hljs-string">"headhunter-applicant"</span></span> }</code> </pre> </div></div><br><p>  Ensuite, en utilisant la classe utilitaire <em>FilenameIndex,</em> vous pouvez trouver <em>PsiFile</em> par son nom, en sp√©cifiant le module trouv√© comme zone de recherche. </p><br><div class="spoiler">  <b class="spoiler_title">Recherche de PsiFile par nom</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> buildGradlePsiFile = FilenameIndex.getFilesByName( appModule.project, <span class="hljs-string"><span class="hljs-string">"build.gradle"</span></span>, appModule.moduleContentScope ).first()</code> </pre> </div></div><br><p>  Apr√®s avoir trouv√© le PsiFile, nous pouvons commencer √† rechercher le PsiElement.   ,      ‚Äì <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PSI Viewer</a> .     IDEA  ,    PSI-  . </p><br><p><img src="https://habrastorage.org/webt/sd/nl/ac/sdnlac9nrqcqqt14wtrhohr9pf8.png" alt="image"></p><br><p>    -  (, build.gradle)        ,      PSI-   . </p><br><p><img src="https://habrastorage.org/webt/gt/et/xo/gtetxo8_4hbk0gzzfty7p_zmawu.png" alt="image"></p><br><p>    ‚Äì   ,        <em>PsiFile</em> -. </p><br><p>    .   <em>PsiFile</em> .            . </p><br><div class="spoiler"> <b class="spoiler_title">  PsiElement</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> toothpickRegistryPsiElement = buildGradlePsiFile.originalFile .collectDescendantsOfType&lt;GrAssignmentExpression&gt;() .firstOrNull { it.text.startsWith(<span class="hljs-string"><span class="hljs-string">"arguments"</span></span>) } ?.lastChild ?.children?.firstOrNull { it.text.startsWith(<span class="hljs-string"><span class="hljs-string">"toothpick_registry_children_package_names"</span></span>) } ?.collectDescendantsOfType&lt;GrListOrMap&gt;() ?.first() ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p><del>  ?.. </del>   ?          PSI-.        <em>GrAssignmentExpression</em> ,   ,    <em>arguments = [ ‚Ä¶ ]</em> .      ,      <em>toothpick_registry_children_package_names = [...]</em> ,       Groovy-. </p><br><p>    <em>PsiElement</em> ,   .            .      . </p><br><p>     PSI- ,       <em>PsiElementFactory</em>   ,    .  Java-?    Java-.   Groovy?  <em>GroovyPsiElementFactory</em> .  Et ainsi de suite. </p><br><p>  <em>PsiElementFactory</em>       .       Groovy  Kotlin ,        . </p><br><div class="spoiler"> <b class="spoiler_title"> PsiElement  package name</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> factory = GroovyPsiElementFactory.getInstance(buildGradlePsiFile.project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> packageName = config.mainParams.packageName <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newArgumentItem = factory.createStringLiteralForReference(packageName)</code> </pre> </div></div><br><p>         <em>PsiElement</em> . </p><br><div class="spoiler"> <b class="spoiler_title">   Map-</b> <div class="spoiler_text"><pre> <code class="kotlin hljs">targetPsiElement.add(newArgumentItem)</code> </pre> </div></div><br><h3 id="donastroyka-kapt-a-dlya-moxy-v-application-module">  kapt-  Moxy  application  </h3><br><p>    -,    , ‚Äì  kapt-  Moxy  application .  :          <em>@RegisterMoxyReflectorPackages</em> . </p><br><div class="spoiler"> <b class="spoiler_title">-?</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/us/17/in/us17inlvgteb4k9pmegkurtl7y8.png" alt="image"></p></div></div><br><p>         ,  :  <em>PsiFile</em> ,  <em>PsiElement</em> ,  ‚Ä¶      ,         <em>PsiElement</em> -. </p><br><p>     :  ,    <em>@RegisterMoxyReflectorPackages</em> ,       <em>value</em>  ,          . </p><br><p>    ,       . ,     <em>PsiManager</em> ,   <em>PsiClass</em>  . </p><br><div class="spoiler"> <b class="spoiler_title"> PsiClass  @RegisterMoxyReflectorPackages</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = ModuleManager.getInstance(project) .modules.toList() .first { it.name == <span class="hljs-string"><span class="hljs-string">"headhunter-applicant"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> psiManager = PsiManager.getInstance(appModule.project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotationPsiClass = ClassUtil.findPsiClass( psiManager, <span class="hljs-string"><span class="hljs-string">"com.arellomobile.mvp.RegisterMoxyReflectorPackages"</span></span> ) ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p>     <em>AnnotatedMembersSearch</em>   ,      . </p><br><div class="spoiler"> <b class="spoiler_title"> ,  </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotatedPsiClass = AnnotatedMembersSearch.search( annotationPsiClass, appModule.moduleContentScope ).findAll() ?.firstOrNull() ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p>  ,  <em>PsiElement</em>  ,        value.     ,      . </p><br><div class="spoiler"> <b class="spoiler_title">      </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotationPsiElement = (annotatedPsiClass .annotations .first() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> KtLightAnnotationForSourceEntry ).kotlinOrigin <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> packagesPsiElements = annotationPsiElement .collectDescendantsOfType&lt;KtValueArgumentList&gt;() .first() .collectDescendantsOfType&lt;KtValueArgument&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> updatedPackagesList = packagesPsiElements .mapTo(mutableListOf()) { it.text } .apply { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> += <span class="hljs-string"><span class="hljs-string">"\"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${config.packageName}</span></span></span><span class="hljs-string">\""</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newAnnotationValue = updatedPackagesList.joinToString(separator = <span class="hljs-string"><span class="hljs-string">",\n"</span></span>)</code> </pre> </div></div><br><p>   <em>KtPsiFactory</em>   <em>PsiElement</em> ‚Äì          . </p><br><div class="spoiler"> <b class="spoiler_title">      </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kotlinPsiFactory = KtPsiFactory(project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newAnnotationPsiElement = kotlinPsiFactory.createAnnotationEntry( <span class="hljs-string"><span class="hljs-string">"@RegisterMoxyReflectorPackages(\n</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$newAnnotationValue</span></span></span><span class="hljs-string">\n)"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> replaced = annotationPsiElement.replace(newAnnotationPsiElement)</code> </pre> </div></div><br><p>  . </p><br><p>     ?    code style.  ,      IDEA    : CodeStyleManager. </p><br><div class="spoiler"> <b class="spoiler_title"> code style</b> <div class="spoiler_text"><pre> <code class="kotlin hljs">CodeStyleManager.getInstance(module.project).reformat(replacedElement)</code> </pre> </div></div><br><p>    -  ,     . </p><br><h3 id="vyvody-1">  </h3><br><ul><li>     ,      PSI-,      . </li><li> ,  PSI     ,    ,    PsiElement-. </li></ul><br><h1 id="chto-delat-dalshe">   ? </h1><br><p>   . </p><br><ul><li>      ‚Äì    ,       . </li><li>       .       .   :            . </li><li>     ?      .  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   IDEA</a>   ,   .       ,        . ‚Äî   -  ,    GitHub  .  ,    ,  . </li><li>    -   ‚Äì    IntelliJ IDEA   .  ,   <em>Util</em>  <em>Manager</em> ,  ,    ,    . </li><li>   :     .  ,  <em>runIde</em> ,     IDEA,   .   ,           hh.ru,       . </li></ul><br><p>  C‚Äôest tout. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> ,  ,   ‚Äì . </p><br><h2 id="faq">  FAQ </h2><br><ul><li>       ? </li></ul><br><p>       ,       .      ,   2  3 . </p><br><ul><li>       IDEA   ,   -  ? </li></ul><br><p> ,    IDEA   IDEA SDK ,   deprecated,   ,  .   SDK-   ,   ,     . </p><br><ul><li>         ? </li></ul><br><p>    ‚Äì    gitignore .   -   . </p><br><ul><li>          ? </li></ul><br><p>      Android Studio  Mac OS,    Ubuntu,   . ,     Windows,    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463611/">https://habr.com/ru/post/fr463611/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463599/index.html">¬´C'est un cauchemar¬ª: des astronautes partagent leurs opinions sur les erreurs qu'Hollywood commet lors du tournage de films sur l'espace</a></li>
<li><a href="../fr463601/index.html">Journalisation des m√©thodes distincte en Java / logback</a></li>
<li><a href="../fr463605/index.html">L'intelligentsia technique - de l'espace lointain</a></li>
<li><a href="../fr463607/index.html">Alternative int√©gr√©e √† Redux avec React Context et crochets</a></li>
<li><a href="../fr463609/index.html">Syst√®me de recommandation pour Directum Club. Premi√®re partie, Collaborative</a></li>
<li><a href="../fr463613/index.html">Les images Docker peuvent √©galement √™tre construites dans werf en utilisant le Dockerfile habituel</a></li>
<li><a href="../fr463617/index.html">Caract√©ristiques du test du MMO mobile</a></li>
<li><a href="../fr463619/index.html">Travailler √† distance: notre exp√©rience</a></li>
<li><a href="../fr463623/index.html">Nous sommes s√©lectionn√©s dans la jungle des tests: nous construisons √† courte distance des luminaires aux tests</a></li>
<li><a href="../fr463625/index.html">Surveillance du r√©seau et d√©tection de l'activit√© r√©seau anormale √† l'aide des solutions Flowmon Networks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>