<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò¢ üé¢ üêÅ Proyeksi konflik perusahaan pada konektivitas jaringan üéì üëà üë®üèø‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Konflik perusahaan muncul pada 06/10/2019 karena peningkatan biaya pengiriman SMS ke pengguna jaringan Vimpelcom oleh Mail.RU Group. Sebagai tanggapan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Proyeksi konflik perusahaan pada konektivitas jaringan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456078/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cp/8x/ty/cp8xty7ejmoaj8gl7q7uhikmku0.png" alt="gambar"></div><br>  Konflik perusahaan muncul pada 06/10/2019 karena peningkatan biaya pengiriman SMS ke pengguna jaringan Vimpelcom oleh Mail.RU Group.  Sebagai tanggapan, Mail.RU Group berhenti untuk "melayani" saluran IP Rusia langsung ke jaringan Vimpelcom. <br><br>  Di bawah ini adalah analisis singkat dari situasi dari perspektif seorang insinyur jaringan. <br><br>  <b>Pembaruan</b> : 06/14/2019 18:45 - penekanan pada rute Rusia ke jaringan VimpelCom, kesimpulan yang disesuaikan, menambahkan penjelasan oleh <b>Sergey Kubasov (CIO Vkontakte)</b> . <br>  <b>Pembaruan</b> : 06/14/2019 19:48 - deskripsi metode untuk membatasi distribusi rute di sepanjang rute "pendek" Rusia melalui Rostelecom, MTS, RETN.NET ditambahkan .. <br>  <b>Pembaruan</b> : 06/15/2019 09:39 - Mail.ru memblokir Looking Glass-nya. <br>  <b>Pembaruan</b> : 06/18/2019 10:10 - Depyning selesai.  VimpelCom dan Mail.RU Group mengangkat sesi BGP langsung. <br><br><a name="habracut"></a><br>  Pendahuluan: <br>  VimpelCom memiliki sistem otonom AS3216, sisanya (8402 - Internet rumah, 16345 - Internet seluler) berada di 3216. <br><br>  Mail.RU Group - sistem otonom AS47541, AS47542 dan AS47764.  Generator konten utama adalah 47542, yang disebut  CDN VKONTAKTE (film, musik).  Semua sistem otonom saling independen (dari posisi sistem otonomi eksternal). <br><br>  Pertama, mari kita lihat situasi dari jaringan Vimpelcom.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Looking Glass Vimpelcom</a> akan membantu kami dalam hal ini. <br><br>  Kami melihat sistem otonom pertama - AS47541. <br><br><pre><code class="perl hljs"><span class="hljs-number"><span class="hljs-number">2914</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span> <span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span> (metric <span class="hljs-number"><span class="hljs-number">10500</span></span>) (<span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">30</span></span>, localpref <span class="hljs-number"><span class="hljs-number">87</span></span>, valid, internal, best, group-best, import-candidate, import suspect Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2865394342</span></span> Community: <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">410</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">1214</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">2213</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">3200</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3103</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">50078</span></span></code> </pre> <br>  AS-PATH berisi dua sistem otonom - 2914 (NTT) dan 47541 (VKONTAKTE-SPB-AS). <br>  Metrik localpref diatur ke 87, yang, seperti yang dijelaskan dalam DB RIPE untuk objek AS3216, sesuai dengan peering internasional. <br><blockquote>  ... <br>  komentar: Rute rekan internasional mendapatkan preferensi lokal di <br>  komentar: kisaran 81-89. <br>  ... </blockquote>  Komunitas 3216: 3000 dan 3216: 3103 (sumber - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RIPE DB untuk AS3216</a> ) juga mengonfirmasi informasi yang sama: <br><blockquote>  ... <br>  keterangan: 3216: 3000 Diterima dari uplink atau rekan internasional, khususnya: <br>  ... <br>  komentar: 3216: 3103 AMS-IX <br>  ... </blockquote>  Artinya, Vimpelcom melihat rute ke VKontakte melalui persimpangan Eropa. <br><br>  Mari kita lihat otonomi VKontakte lain - 47542 (VKONTAKTE-MSK-CDN-AS). <br><br><div class="spoiler">  <b class="spoiler_title">Semuanya mirip.</b> <div class="spoiler_text"><pre> <code class="perl hljs"> <span class="hljs-number"><span class="hljs-number">2914</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span> <span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span> (metric <span class="hljs-number"><span class="hljs-number">10500</span></span>) (<span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">30</span></span>, localpref <span class="hljs-number"><span class="hljs-number">87</span></span>, valid, internal, best, group-best, import-candidate, import suspect Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2865394338</span></span> Community: <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">410</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">1214</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">2213</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">3200</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3103</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">50078</span></span></code> </pre> <br></div></div><br>  Bagaimana dengan Mail.ru sendiri?  Mari kita lihat AS47764 (mailru-as). <br><br><pre> <code class="perl hljs"> <span class="hljs-number"><span class="hljs-number">3356</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span> <span class="hljs-number"><span class="hljs-number">194.67</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">215</span></span> (metric <span class="hljs-number"><span class="hljs-number">10501</span></span>) (<span class="hljs-number"><span class="hljs-number">194.67</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">215</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">0</span></span>, localpref <span class="hljs-number"><span class="hljs-number">77</span></span>, valid, internal, best, group-best, import-candidate Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2867605667</span></span> Community: <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3007</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">519</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">2094</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">50077</span></span></code> </pre> <br>  VimpelCom melihat Mail.ru melalui as3356 (uplink Level3, operator Tier1).  Informasi ini dikonfirmasi oleh localpref 77: <br><blockquote>  ... <br>  komentar: Rute Uplink mendapatkan preferensi lokal di kisaran 71-79. <br>  komentar: Pembaruan Terakhir: Februari 2012 ... </blockquote>  dan komunitas (3216: 3000 dan 3216: 3007): <br><blockquote>  ... <br>  keterangan: 3216: 3000 Diterima dari uplink atau rekan internasional, khususnya: <br>  ... <br>  komentar: 3216: 3007 Level 3 Komunikasi <br>  ... </blockquote><br>  Dari informasi yang diterima, dapat dilihat bahwa lalu lintas dari jaringan Vimpelcom di VKontakte dan MailRu didistribusikan melalui koneksi Eropa sesuai dengan rute yang diterima melalui protokol BGP.  Tidak ada rute alternatif melalui koneksi Rusia di Looking Glass.  Tidak ada langkah-langkah yang ditemukan untuk mengarahkan lalu lintas secara artifisial melalui rute yang diketahui lebih buruk. <br><br>  Dan bagaimana Grup Mail.ru melihat jaringan VimpelCom? <br>  Kami akan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Looking Glass from Mail</a> .  <b>Pembaruan</b> : pada pagi hari tanggal 06/15/2019 Looking Glass tidak berfungsi, ketika diminta kesalahan 500 dikeluarkan: <img src="https://habrastorage.org/getpro/habr/post_images/515/c79/93c/515c7993ccd0f3d6bd9a5a20d3078ee9.png" alt="gambar"><br><br>  Dari router dari AS47764 (mailru-as): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#6: Received by speaker 0 Advertised to peers (in unique update groups): 188.93.60.188 1299 1299 1273 3216 3216 217.20.147.250 (metric 100) from 217.20.147.250 (217.20.147.253) Origin IGP, metric 500, localpref 200, valid, internal, best, group-best Received Path ID 0, Local Path ID 0, version 1172721494 Community: 1299:20000 47764:701 47764:41100 47764:41108 47764:50077</span></span></code> </pre> <br><br>  AS-PATH berisi AS1299 (Telia, operator Tier1, uplink Mail.RU) dan as1273 (Vodafon, operator Tier1, uplink Vimpelcom). <br><br>  LocalPreference 200 adalah standar untuk antarmuka Mail.ru eksternal (https://net.mail.ru/bgp.html), dan MED 500 sesuai dengan semua yang diterima bukan dari antarmuka langsung, bukan dari IX-s, bukan dari yang peer-to-peer. <br><br>  Tetapi mengapa tidak ada rute lokal melalui operator telekomunikasi Rusia ??? <br>  Ya, tetapi prioritas mereka adalah "non-standar"! <br>  Inilah rute melalui Rostelecom (as12389): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#1: Received by speaker 0 Not advertised to any peer 12389 3216 46.61.178.149 from 46.61.178.149 (213.59.207.79) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 12389:5 12389:6 12389:1100 12389:1105 12389:1277 47764:701 47764:41100 47764:41104 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Ini melalui Megaphone (as31133): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#2: Received by speaker 0 Not advertised to any peer 31133 3216 78.25.77.41 from 78.25.77.41 (10.222.253.97) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 31133:300 31133:46170 47764:701 47764:41100 47764:41105 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Ini melalui RET.NO: <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#3: Received by speaker 0 Not advertised to any peer 9002 9002 3216 87.245.253.24 from 87.245.253.24 (87.245.225.1) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 9002:9002 9002:64667 47764:701 47764:41100 47764:41101 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Dan bahkan melalui MTS! <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#5: Received by speaker 0 Not advertised to any peer 8359 3216 212.188.61.105 from 212.188.61.105 (195.34.52.77) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 8359:200 8359:609 8359:5012 47764:701 47764:41100 47764:41103 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Metrik localpref untuk rute-rute Rusia ini diremehkan, yaitu, rute-rute tersebut terdegradasi dibandingkan dengan yang asing! <br><br>  Selain itu, <b>Grup Mail.Ru memiliki larangan</b> mendistribusikan prefiksnya ke VimpelCom melalui operator Rusia! <br><br>  RET.NO (http://lg.retn.net/): <br>  Pengumuman dari Mail.RU Group termasuk komunitas 3216: 65535. <br><div class="spoiler">  <b class="spoiler_title">Kesimpulan dari LG RET.NO</b> <div class="spoiler_text">  inet.0: 762737 tujuan, 1734826 rute (762708 aktif, penahanan 222780, 277 disembunyikan) <br>  94.100.176.0/20 (1 entri, 1 diumumkan) <br>  * Preferensi BGP: 170 / -201 <br>  ... <br>  ... <br>  Jalur AS: 47764 I <br>  Jalur AS: Direkam <br>  Komunitas: 3216: 65535 9002: 64667 9002: 65530 <br>  ... <br></div></div><br>  Vimpelcom tidak menerima rute yang ditandai oleh komunitas seperti itu di jaringannya.  Kutipan dari RIPE DB oleh AS3216: <br><blockquote>  ... <br>  komentar: Komisi internal ditugaskan hanya secara internal. <br>  keterangan: Mereka berada dalam kisaran 3216: 0000-3216: 4999 dan 3216: 6000-3216: 65535 <br>  komentar: dan selalu dihapus dari pembaruan yang masuk di perbatasan <br>  komentar: router. <br>  ... </blockquote><br>  Menuju Rostelecom (http://lg.ip.rt.ru) Mail.RU Group memberikan rute yang sama dengan komunitas 12389: 8350. <br><div class="spoiler">  <b class="spoiler_title">Kesimpulan dari LG Rostelecom</b> <div class="spoiler_text">  94.100.176.0/20 via 217.107.65.1 di eth0.9 [sr2 2019-06-13] * (100 /?) [AS47764i] <br>  Jenis: BGP unicast univ <br>  BGP.origin: IGP <br>  BGP.as_path: 47764 <br>  BGP.next_hop: 213.59.207.78 <br>  BGP.med: 0 <br>  BGP.local_pref: 850 <br>  BGP.comkita: (12389.1) (12389.1100) (12389.1105) (12389.1277) (12389.8350) (12389.8380) (12389.8380) (47764.1) (47764.40000) (47764.50077) <br>  BGP.originator_id: 213.59.207.78 <br>  BGP.cluster_list: 95.167.88.79 95.167.88.49 95.167.88.17 <br></div></div><br>  Menurut entri dalam RIPE DB untuk objek as12389, komunitas ini berarti "jangan mengumumkan di jaringan as3216": <blockquote>  ... <br>  komentar: |  12389: 835y Saat beriklan ke GoldenTelecom (AS3216) | <br>  ... <br>  komentar: |  ... y = 0 - jangan beriklan | <br>  ... </blockquote><br>  Demikian pula, menuju MTS (http://lg.mtu.ru): <div class="spoiler">  <b class="spoiler_title">Kesimpulan dari LG MTS</b> <div class="spoiler_text">  Entri tabel routing BGP untuk 94.100.176.0/20, versi 161717219 <br>  Jalur: (2 tersedia, terbaik # 1, tabel default) <br>  Multipath: eBGP <br>  Diiklankan ke grup pembaruan: <br>  6 <br>  47764, (diterima &amp; digunakan) <br>  195.34.52.77 (metrik 16) dari 195.34.52.181 (195.34.52.181) <br>  Asal IGP, metrik 0, localpref 140, valid, internal, terbaik <br>  Komunitas: 8359: 2120 8359: 2150 8359: 5500 8359: 55277 <br>  Pencetus: 195.34.52.77, Daftar kelompok: 83.59.83.59 <br>  47764, (diterima &amp; digunakan) <br>  195.34.52.77 (metrik 16) dari 195.34.52.182 (195.34.52.182) <br>  Asal IGP, metrik 0, localpref 140, valid, internal <br>  Komunitas: 8359: 2120 8359: 2150 8359: 5500 8359: 55277 <br>  Pencetus: 195.34.52.77, Daftar kelompok: 83.59.2.77 <br></div></div><br>  Komunitas 8359: 2120 berarti: <blockquote>  ... <br>  komentar: 8359: 212x saat mengumumkan ke Sovam (Beeline) <br>  ... <br>  komentar: x = 0 - jangan mengumumkan <br>  ... </blockquote><br>  Anda tidak dapat melihat pengumuman Grup Mail.RU terhadap Megafon - yang terakhir tidak memiliki Looking Glass. <br><br>  Mari kita lihat AS47541 (VKONTAKTE-SPB-AS). <br><br><div class="spoiler">  <b class="spoiler_title">Kesimpulannya terlalu besar.</b> <div class="spoiler_text"><pre> <code class="perl hljs"> Router: a9922-e-<span class="hljs-number"><span class="hljs-number">5</span></span> Command: show ip bgp <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> Last switch-over Thu Apr <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">04</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:09 <span class="hljs-number"><span class="hljs-number">2018</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> year, <span class="hljs-number"><span class="hljs-number">10</span></span> weeks, <span class="hljs-number"><span class="hljs-number">6</span></span> hours, <span class="hljs-number"><span class="hljs-number">9</span></span> minutes ago Fri Jun <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">34</span></span>:<span class="hljs-number"><span class="hljs-number">20.791</span></span> MSK BGP routing table entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">17</span></span> Versions: Process bRIB/RIB SendTblVer Speaker <span class="hljs-number"><span class="hljs-number">913059757</span></span> <span class="hljs-number"><span class="hljs-number">913059757</span></span> Last Modified: May <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">38.536</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>y03w Paths: (<span class="hljs-number"><span class="hljs-number">6</span></span> available, best <span class="hljs-comment"><span class="hljs-comment">#4) Advertised to update-groups (with more than one peer): 0.2 Advertised to peers (in unique update groups): 188.93.60.188 Path #1: Received by speaker 0 Not advertised to any peer 1299 1273 3216 3216 87.240.191.235 (metric 31) from 87.240.191.235 (87.240.191.235) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 1299:431 1299:4000 1299:20000 1299:20002 1299:20200 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41111 47541:50078 Path #2: Received by speaker 0 Not advertised to any peer 1299 1273 3216 3216 87.240.191.248 (metric 31) from 87.240.191.248 (87.240.191.248) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 1299:431 1299:4000 1299:20000 1299:20002 1299:20200 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41111 47541:50078 Path #3: Received by speaker 0 Not advertised to any peer 174 6762 3216 3216 87.240.191.249 (metric 31) from 87.240.191.249 (87.240.191.249) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 174:21100 174:22005 47541:701 47541:41100 47541:41108 47541:50078 Path #4: Received by speaker 0 Advertised to update-groups (with more than one peer): 0.2 Advertised to peers (in unique update groups): 188.93.60.188 174 6762 3216 3216 149.6.169.113 from 149.6.169.113 (38.28.1.236) Origin IGP, metric 5000, localpref 150, valid, external, best, group-best Received Path ID 0, Local Path ID 0, version 913059757 Community: 174:21100 174:22005 47541:701 47541:41100 47541:41108 47541:50078 Origin-AS validity: not-found Path #5: Received by speaker 0 Not advertised to any peer 1273 1273 3216 3216 195.89.114.197 from 195.89.114.197 (195.2.1.107) Origin IGP, metric 5005, localpref 150, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41110 47541:50078 Origin-AS validity: not-found Path #6: Received by speaker 0 Not advertised to any peer 3356 3356 3216 3216 3216 213.242.69.69 from 213.242.69.69 (4.69.177.130) Origin IGP, metric 5000, localpref 150, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 3356:2 3356:22 3356:100 3356:123 3356:503 3356:2067 47541:701 47541:41100 47541:41107 47541:50078 Origin-AS validity: not-found</span></span></code> </pre> </div></div><br>  AS-PATH menunjuk ke AS174 - Cogent (uplink Mail.RU, Tier1), kemudian AS6762 - Telecom Italia (uplink Vimpelcom).  Preferensi Lokal di mana saja 150, tetapi begitu juga pada semua sambungan eksternal, terlepas dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kebijakan tertulis</a> . <br><br>  Mari kita lihat AS47542 (VKONTAKTE-MSK-CDN-AS). <br><pre> <code class="perl hljs"> Router: mx96<span class="hljs-number"><span class="hljs-number">0</span></span>-m9-<span class="hljs-number"><span class="hljs-number">0</span></span> Command: op lg-sh-bgp prefix <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">87.240</span></span>.<span class="hljs-number"><span class="hljs-number">191.222</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Best <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">95.142</span></span>.<span class="hljs-number"><span class="hljs-number">204.251</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Inactive-reason: Interior &gt; Exterior &gt; Exterior via Interior</code> </pre> <br>  Dan dari router kedua: <pre> <code class="perl hljs"> Router: mx96<span class="hljs-number"><span class="hljs-number">0</span></span>-m9-<span class="hljs-number"><span class="hljs-number">1</span></span> Command: op lg-sh-bgp prefix <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">87.240</span></span>.<span class="hljs-number"><span class="hljs-number">191.224</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Best <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">95.142</span></span>.<span class="hljs-number"><span class="hljs-number">204.250</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Inactive-reason: Interior &gt; Exterior &gt; Exterior via Interior</code> </pre> <br>  Hanya rute default (0.0.0.0/0).  Situasi ini dijelaskan oleh seorang karyawan Mail.RU Group yang rakus, yang karenanya ia berterima kasih.  Singkatnya: segmen Moskow dari jaringan VKontakte adalah caching (bukan menghasilkan), yang tugasnya adalah mengoptimalkan kecepatan unduh konten populer yang diminta.  Merawat pengguna, ya. <br><br>  Jika tidak ada rute ke jaringan apa pun, maka jaringan ini tidak dilayani oleh server caching.  Jadi optimalisasi kecepatan unduh tidak berfungsi, dan pengguna menderita.  Tapi di sini perlu ditekankan - pengguna tidak hanya mereka sendiri, tetapi juga VimpelCom. <br><br>  <b>Kesimpulan:</b> <br><br><ol><li>  Dari Vimpelcom, lalu lintas menuju Grup Mail.RU didistribusikan secara alami.  Tidak ada pengalihan buatan melalui manipulasi Preferensi Lokal yang terdeteksi </li><li>  <b>Dari Mail.RU Group, ada manipulasi dengan awalan Vimpelcom</b> .  Pada rute yang ada menuju jaringan Vimpelcom melalui operator Rusia, prioritas diremehkan dibandingkan dengan rute melalui operator Tier1 asing. </li><li>  Manajer komunitas BGP telah ditambahkan ke rute yang ditransfer ke operator Rusia (MTS, Rostelecom, RETN.NET) dari Mail.RU Group untuk membatasi distribusi mereka ke Vimpelcom </li></ol><br>  Mengapa Mail.RU Group memprioritaskan rute melalui Eropa?  Mengapa Mail.RU Group melarang koneksi domestik singkat dengan Vimpelcom? <br><br>  Apakah lebih murah untuk mereka?  Mendorong lalu lintas melalui saluran asing dan membayar mata uang ke Tirani? <br>  Atau ada keinginan untuk mengarahkan lalu lintas sehingga tidak nyaman untuk mengambilnya, ya? <br>  Ini tidak dikenal oleh insinyur jaringan ... <br><br>  <b>Hasil Depyring:</b> <br>  06/17/2019 BGP-sesi antara Vimpelcom dan Mail.RU Group dimunculkan: <br>  AS47764 (Mail.RU): <br><img src="https://habrastorage.org/webt/8s/pl/gk/8splgktg26dnwc_4ihehoprx8-k.png" alt="gambar"><br><br>  AS47541 (Vk): <br><img src="https://habrastorage.org/getpro/habr/post_images/867/0b4/829/8670b482948ddb6df8d498e43d9dbd73.png" alt="gambar"><br><br>  AS47542 (Vk CDN): <br><img src="https://habrastorage.org/webt/vm/fc/8z/vmfc8zpjdbimpe1eox2qi7ojndi.png" alt="gambar"><br><br>  Siapa yang memulai pencabutan sesi tidak diketahui. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id456078/">https://habr.com/ru/post/id456078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id456060/index.html">Periksa informasi tentang ekstrak yang tidak dapat diandalkan dari register. Lem pdf dalam python</a></li>
<li><a href="../id456064/index.html">Oktober Pendekatan Keamanan Revolusioner</a></li>
<li><a href="../id456068/index.html">5 kesalahan memimpin pemula</a></li>
<li><a href="../id456070/index.html">Cara menarik pengguna ke portal swalayan</a></li>
<li><a href="../id456072/index.html">Dav1d - dekoder AV1 tercepat sekarang di Firefox secara default</a></li>
<li><a href="../id456084/index.html">Kubernet 1.15: Ikhtisar Sorotan</a></li>
<li><a href="../id456086/index.html">iOS Storyboards: analisis pro dan kontra, praktik terbaik</a></li>
<li><a href="../id456088/index.html">Masalah Analisis Data Besar</a></li>
<li><a href="../id456090/index.html">Pengantar Unit Testing in Unity</a></li>
<li><a href="../id456092/index.html">Tujuh tanda yang merisaukan bahwa Anda bergantung pada cuaca, meskipun Anda tidak mengira begitu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>