<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüöí ü§¶ üíô √Ä propos de Godot, GLSL et WebGL, shaders utilis√©s dans le mini-jeu ü•ù üàÇÔ∏è üë®üèª‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'article porte principalement sur les shaders GLSL et sur la fa√ßon dont je les ai utilis√©s dans ce mini-jeu de d√©monstration. 

 L'article est divis√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√Ä propos de Godot, GLSL et WebGL, shaders utilis√©s dans le mini-jeu</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467779/"><h1 id="statya-v-osnovnom-pro-glsl-sheydery-i-kak-ya-ih-ispolzoval-v-etoy-mini-demke-igre">  L'article porte principalement sur les shaders GLSL et sur la fa√ßon dont je les ai utilis√©s dans ce mini-jeu de d√©monstration. </h1><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0jKyTBFrpjU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="statya-razbita-po-takoy-ocherednosti">  L'article est divis√© dans l'ordre suivant: </h3><br><ul><li>  Liens et br√®ve description. </li><li>  Une tr√®s br√®ve description de la logique du jeu et des fonctionnalit√©s utilis√©es de Godot. </li><li>  √Ä propos des shaders utilis√©s. </li><li>  Un peu plus sur Godot et ses caract√©ristiques. </li><li>  WebGL2 fonctionne </li><li>  Multijoueur </li></ul><a name="habracut"></a><br><hr><br><h1 id="1-ssylki-i-opisanie">  1. Liens et description </h1><br><p>  <strong>Vous pouvez t√©l√©charger la version Win / Linux</strong> depuis le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien vers itch.io</a> </p><br><p>  <strong>Le code source de l'ensemble du jeu</strong> est disponible sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gitlab</a> . </p><br><h3 id="igrovoy-process">  Gameplay: </h3><br><p>  Minimal, ce n'est pas un jeu complet.  (pas de son dans le jeu) </p><br><p>  <em>Le but du jeu</em> est de tenir le nombre maximum de tours.  Les rounds commencent lorsque les sph√®res HP sont nulles et qu'il n'y a pas de robots dans le jeu. </p><br><p>  Lorsque les pi√®ces sont d√©truites, des bonus apparaissent, <em>une fois par tour</em> , donnent la vitesse de l'animation du tir, les d√©g√¢ts (uniquement dans la sph√®re principale) et la hauteur de saut, en couleur bleu, rouge / vert, jaune.  Les bots donnent √©galement un bonus mais au hasard.  Le personnage du joueur restaure +1 HP √† chaque nouveau tour. </p><br><hr><br><h1 id="2-logika-igry-i-ispolzuemye-resursy">  2. La logique du jeu et les ressources utilis√©es </h1><br><p>  <strong>Ressources utilis√©es:</strong> </p><br><p>  <strong>Blender a √©t√©</strong> utilis√© uniquement pour r√©duire le nombre de polygones sur les mod√®les et pour cr√©er des morceaux de mod√®les cass√©s. </p><br><p>  Le module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">futari-addon</a> est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilis√©</a> .  (J'√©crirai √† ce sujet ci-dessous) </p><br><p>  <strong>Dans le jeu, deux mod√®les ont des animations.</strong> <br>  Mouvements des <em>personnages que</em> j'ai faits √† Godot, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mod√®le original</a> <br>  Le deuxi√®me mod√®le est la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sph√®re-bot</a> qui a des animations de haute qualit√©. </p><br><p>  Tous les <strong>mod√®les d'objets tiers</strong> pr√™ts √† l'emploi <a href="">sont r√©pertori√©s ici</a> . </p><br><h3 id="logika-igry-i-vozmozhnosti-godot">  Logique de jeu et fonctionnalit√©s Godot: </h3><br><p>  La logique du jeu ne se fait pas de la meilleure fa√ßon, je vais lister les points qui se font normalement. </p><br><p>  Une seule fen√™tre est utilis√©e pour une sc√®ne 3D, et plusieurs fen√™tres (basse r√©solution) dans lesquelles se trouvent des cam√©ras orthogonales pour les fen√™tres 2D (√©galement basse r√©solution) dans lesquelles des ombrages Multipass / Feedback sont trait√©s, plus d'informations √† leur sujet ci-dessous. </p><br><p> <strong>Toutes les textures ont mipmap</strong> et fonctionnent m√™me dans le navigateur.  Il existe des param√®tres graphiques suppl√©mentaires <em>(Esc - Param√®tres)</em> .  Par exemple, vous pouvez d√©finir <em>n'importe quelle r√©solution pour le jeu</em> , jusqu'√† <code>32x32</code> pixels, par exemple, j'ai d√©fini une r√©solution de <code>320x240</code> dans les param√®tres, ex√©cut√© le jeu dans un navigateur et activ√© l'anti-aliasing <em>MSAA</em> maximal. <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/998/719/596/998719596112cbdc46218a7df4c8561b.png"></a> </p><br><p>  <strong>Toutes les sources lumineuses fonctionnent en temps r√©el</strong> , il y en a 16 au total. </p><br><p>  <strong>Le sol et la cl√¥ture</strong> sont les particules les plus simples qui reproduisent plusieurs fois le m√™me mod√®le, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code est trivial</a> . </p><br><p>  La matrice de rotation des particules (morceaux de sol) dans mes shaders n'est qu'une courte entr√©e de cette formule: </p><br><pre> <code class="plaintext hljs">mat4 rotationAxisAngle( vec3 v, float angle ) { float s = sin( angle ); float c = cos( angle ); float ic = 1.0 - c; return mat4( vx*vx*ic + c, vy*vx*ic - s*vz, vz*vx*ic + s*vy, 0.0, vx*vy*ic + s*vz, vy*vy*ic + c, vz*vy*ic - s*vx, 0.0, vx*vz*ic - s*vy, vy*vz*ic + s*vx, vz*vz*ic + c, 0.0, 0.0, 0.0, 0.0, 1.0 ); }</code> </pre> <br><p>  par exemple, <code>v=vec3(0.0,0.0,1.0)</code> est la rotation le long de l'axe <code>z</code> et l' <code>angle=PI/2.</code>  remplacez-les et obtenez le tour souhait√©. </p><br><h3 id="animaciya-razrushaemyh-blokov-schitaetsya-fizicheskim-dvizhkom-v-realnom-vremeni">  L'animation de blocs destructibles est consid√©r√©e comme un moteur physique en temps r√©el </h3><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/gRd0oMq.mp4" type="video/mp4"></video></div></div></div><br><p>  <strong>La physique √† Godot est</strong> assez limit√©e, et elle commence √† r√©duire consid√©rablement le <em>FPS</em> m√™me avec une douzaine d'objets actifs, donc toutes les collisions entre les pi√®ces d√©truites sont d√©sactiv√©es, et d'autres sont d√©finies, les niveaux pour la physique sont d√©finis, il y a aussi une limite au nombre de destructions simultan√©es et au nombre maximal de bots en m√™me temps (six). </p><br><p>  <strong>La physique de l'inertie et l'interaction du personnage du joueur avec des objets dynamiques.</strong>  Il est d√©sactiv√© par d√©faut dans Godot, j'ai √©crit une interaction minimale, le code dans les fichiers: </p><br><p>  fonction <a href="">bot_hit.gd _integrate_forces</a> et tout ce qui y est appel√© sont les mouvements de l'adversaire-bot <br>  <a href="">player_l.gd</a> tout d'abord, la fonction <code>move_and_slide</code> d√©sactive l'inertie infinie et la fonction <code>process_collision</code> repousse les objets. </p><br><p>  <strong>La pr√©charge (pr√©charge)</strong> au d√©but du jeu est utilis√©e pour √©viter le d√©calage lorsque l'objet appara√Æt pour la premi√®re fois, cela aide cependant lorsque vous activez les <em>ombres</em> (et certaines autres options), les d√©calages r√©apparaissent √† la premi√®re apparition de l'objet.  √âgalement dans le navigateur, cela n'aide pas en raison des particularit√©s des navigateurs travaillant avec des shaders. </p><br><p>  Plusieurs objets dupliqu√©s en un, et plusieurs GIProbe, les formes et param√®tres des sources lumineuses sont tous <em>destin√©s</em> , faits pour contourner les limitations d'OpenGL ou les restrictions de Godot. </p><br><hr><br><h1 id="3-ispolzuemye-sheydery">  3. Shaders utilis√©s </h1><br><h3 id="panorama-okruzheniya">  Panorama de l'environnement: </h3><br><p>  Ce jeu utilise un panorama statique, l'image est obtenue √† partir de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce shader</a> <em>(couleurs c1 c2, position ldir)</em> </p><br><pre> <code class="plaintext hljs">vec3 sky(vec3 d, vec3 c1, vec3 c2) { vec3 ldir = normalize(vec3(0.,0.,-1.)); vec3 col = mix(c1*100., c2*100., min(abs(dy)*2. + .5, 1.)) / 255.*.5; col *= (1. + vec3(1., .7, .3) / sqrt(length(d - ldir))*2.); //sun return clamp(col,vec3(0.),vec3(1.)); }</code> </pre> <br><p>  pour obtenir un panorama, supprimez le commentaire de la ligne 57 <code>panorama_uv(fragCoord,ro,rd);</code>  et mettez un commentaire √† la ligne 58 </p><br><p>  Panoramas dynamiques pour Godot dans les d√©mos pr√©c√©dentes (YouTube et il y a des liens vers le code) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">panorama des nuages</a> . <br>  Et le panorama du cycle jour / nuit avec le mouvement des nuages ‚Äã‚Äãa √©t√© utilis√© dans cette d√©mo: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jTmppCifnYE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  un autre panorama jour / nuit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">par exemple, sur shadertoy</a> je ne l'ai utilis√© nulle part </p><br><p>  Si vous avez besoin de <strong>convertir CubeMap en un panorama de l'environnement pour Godot</strong> , j'ai fait un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">simple convertisseur web</a> . </p><br><h3 id="sovsem-prostye-sheydery">  Shaders tr√®s simples: </h3><br><p>  <strong>Les shaders de particules d√©terminent statiquement leur position</strong> pour l'animation ou non.  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">spawn.shader)</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/chYJ7iU.mp4" type="video/mp4"></video></div></div></div><br><p>  Pour <strong>une lueur suppl√©mentaire autour des objets</strong> , pas seulement des balles, il s'agit d'une ligne de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gglow.shader</a> (les nombres peuvent √™tre modifi√©s au besoin) </p><br><pre> <code class="plaintext hljs">float intensity = pow(0.122 + max(dot(NORMAL, normalize(VIEW)),0.), 010.85);</code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/webt/gf/sj/dh/gfsjdhbifiw_x2hrnj5i2xdsuwq.png"></a> <a href=""><img src="https://habrastorage.org/webt/h9/e9/vn/h9e9vn13ugqh7vqxuuoxpzunlno.png"></a> </p><br><p>  <strong>Affichage de chiffres de texte en 3D</strong> , si je comprends bien dans Godot, il n'y a pas de moyen pour cela (sans cr√©er un FBO suppl√©mentaire (fen√™tre d'affichage)) donc un simple shader imprimant les num√©ros √† partir d'une texture (pour qu'il soit en <em>mipmapping</em> ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le code du shader</a> </p><br><h3 id="elementy-ui">  √âl√©ments de l'interface utilisateur: </h3><br><p>  Faire la forme personnalis√©e des panneaux d'interface utilisateur le plus facile pour moi est sur les shaders, peut <strong>-</strong> √™tre que <strong>ce n'est pas du tout correct</strong> .  La m√©thode correcte est pr√©sent√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici √† titre d'exemple</a> (dans la section sur l'interface utilisateur). <br>  Dans ce jeu, l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">animation</a> la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plus simple est l'arri√®re-plan du menu</a> et l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">indicateur est HP</a> .  Ci-dessus, dans le lien vers la vid√©o du panorama jour / nuit, c'est aussi fait, il y a des rayures sur les c√¥t√©s et toute l'animation sur le shader. </p><br><h3 id="pro-modul-futari-addon">  √Ä propos du module futari-addon: </h3><br><p>  Il fonctionne presque de la m√™me mani√®re que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce shader</a> pour les particules 2D en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©o</a> (voir √† partir de 1:41). </p><br><p>  Une carte 2D-SDF de tous les polygones est construite sur la vid√©o une fois au d√©but et la texture r√©sultante est simplement envoy√©e aux particules, les particules elles-m√™mes se construisent normalement dans la position actuelle et changent le mouvement. </p><br><p>  <strong>futari-addon</strong> fait presque la m√™me chose, mais au lieu d'une carte de texture 2D, les coordonn√©es des sph√®res et des plans 3D sont transmises, qui sont trait√©es en fonction de la condition dans le shader de particules, de sorte que vous pouvez modifier librement leur position et d'autres param√®tres. </p><br><p>  De plus, le vent (dans mon exemple 2D, l'ajout de vent est tr√®s simple, car une autre texture avec des valeurs + - √† la vitesse, et les particules ajoutent simplement la valeur de vitesse de cette carte √† sa position). </p><br><p>  <strong>Le module futari-addon est tr√®s bon</strong> , l'a utilis√© au lieu de cr√©er son propre syst√®me de particules. </p><br><h3 id="effekt-schita">  Effet de bouclier: </h3><br><p>  Particules auxquelles les coordonn√©es de l'impact sur la sph√®re et la position du joueur, et l'extinction sont transmises √† l'aide du tampon de <em>r√©troaction de transformation</em> .  Code de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">shader</a> dans le fichier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en_m.shader</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/cdtVH5V.mp4" type="video/mp4"></video></div></div></div><br><h3 id="schit-u-botov">  Bouclier des bots: </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/ah/-f/ob/ah-fob8goggag27vzivk3-4kl00.png"></a> <a href=""><img src="https://habrastorage.org/webt/gq/fu/ac/gqfuacowtln68ajquams-xfr9zm.png"></a> <br>  Shader comme un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sheild de</a> bruit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tridimensionnel.shader</a> essentiellement tout fonctionne gr√¢ce √† la fonction de <code>flow</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">originale ici</a> <br>  L'arri√®re-plan est d√©termin√© par <code>gl_FrontFacing</code> et est peint plus sombre et plus vert, pas bleu. <br>  R√©ponse √† un coup de poing - la minuterie d'√©v√©nement de choc est simplement transmise. </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/YWtZyJP.mp4" type="video/mp4"></video></div></div></div><br><hr><br><h1 id="sheydery-chitayuschie-svoy-proshlyy-kadr-ili-feedbackmultipass-sheydery">  Shaders lisant leur derni√®re image, ou shaders Feedback / Multipass: </h1><br><p>  <strong>Presque tous les effets sont r√©alis√©s en utilisant cette logique.</strong> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'un des shaders du jeu</a> . <br>  En tant que source, j'ai d√©fini une <em>cam√©ra orthogonale</em> qui prend des objets dans un certain groupe √† une courte distance (sans traiter la sc√®ne enti√®re) <br> <a href=""><img src="https://habrastorage.org/webt/zf/rd/xg/zfrdxgfctkb-ey1zpqoqiaoqvv8.png"></a>  . </p><br><h3 id="effekt-polya-lda">  Effet de champ de glace: </h3><br><p>  Le shader est indiqu√© ci-dessus, dans le fichier de projet est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ice_feedback.shader</a> , et un <em>fragment</em> shader pour le plan qui cr√©e l'illusion de la profondeur du sol √† l'aide d'une simple boucle de profondeur: </p><br><pre> <code class="plaintext hljs">while(current_depth &lt; depth){ ofs -= delta; depth = textureLod(texture_depth, ofs,0.0).r; current_depth += layer_depth; }</code> </pre> <br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/73beIUq.mp4" type="video/mp4"></video></div></div></div><br><h3 id="effekt-polya-chastic">  Effet de champ de particules: </h3><br><p>  Le shader est <em>le m√™me</em> , la coordonn√©e <code>y</code> (hauteur) des particules en fonction de la luminosit√© de la couleur du tampon de cadre du shader, la couleur √©galement en fonction de la luminosit√© de la couleur ( <em>je n'ai pas enregistr√© le shader de particules s√©par√©ment, il est dans le projet dans l'objet</em> <code>floor/visible_/floor3/grass/grass</code> ). </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/8zo6Lf9.mp4" type="video/mp4"></video></div></div></div><br><h3 id="dinamicheskaya-animaciya-flaga">  Animation de drapeau dynamique: </h3><br><p>  Godot a <em>SoftBody pour animer le tissu, mais c'est un CPU,</em> donc je ne l'ai pas utilis√©.  J'ai utilis√© un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien de</a> code pr√™t √† l'emploi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vers l'original</a> .  Ce drapeau est pouss√© de trois balles sur le c√¥t√© et la t√™te du personnage est la quatri√®me balle. <br>  La logique du shader <em>multipasse</em> , comme dans l'exemple ci-dessus, avec seulement trois axes, le code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">multipasse</a> du shader (1) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">flag.shader</a> , le shader qui dessine le flag montre juste la texture et change la g√©om√©trie de l'avion (2) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">flag.shader</a> . </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/dVtroFS.mp4" type="video/mp4"></video></div></div></div><br><h3 id="poyavlenie-figur">  Apparence des chiffres: </h3><br><p>  <strong>Les formes n'ont pas d'UV, donc tri-texture-texture-mapping pour texture mapping et triangling</strong> ( <em>vertex</em> ), tous les codes dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cchess.shader</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/rTiCkef.mp4" type="video/mp4"></video></div></div></div><br><h3 id="animaciya-hitbox-a-krasnaya-ramka-kotoryy-nanosit-uron-personazhu-igrokai-sled-ot-ramki-chasticy-ochevidno">  Animation d'une <em>hitbox</em> (cadre rouge) qui endommage le personnage du joueur, et une trace du cadre (les particules sont √©videntes): </h3><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.imgur.com/r4pEvvw.mp4" type="video/mp4"></video></div></div></div><br><p>  Il utilise uniquement le shader <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gglow.shader</a> d√©j√† sp√©cifi√©. <br>  PS <em>fait la m√™me animation dans un shader</em> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien vers shadertoy</a> </p><br><p>  <em>Pour les particules, seules deux textures sont utilis√©es, un cercle et un carr√©.</em> </p><br><hr><br><h1 id="4-pro-godot-i-ego-osobennosti">  4. √Ä propos de Godot et ses caract√©ristiques </h1><br><p>  <strong>Godot est tr√®s bon et simple (pas pour un d√©butant).</strong>  <strong>J'ai vraiment aim√© Godot pour ses fonctionnalit√©s.</strong> </p><br><p>  <em>Il y a beaucoup de</em> bugs, la documentation Godot est incompl√®te et parfois trompeuse √† cause d'erreurs et n'indiquant pas de points critiques (pas √©vident pour moi), afin de comprendre quel code source Godot a d√ª √™tre relu plusieurs fois (le code n'est pas volumineux et bien √©crit). <br>  C'est juste mon impression, cela peut √™tre erron√©, je ne veux induire personne en erreur. </p><br><p>  Je souligne que m√™me les bogues tr√®s critiques de Godot peuvent √™tre contourn√©s dans Godot lui-m√™me via GDScript, avec un minimum d'effort.  Ce qui est sans aucun doute un gros plus </p><br><p>  Je note √©galement que Godot n'est <em>en aucun cas prot√©g√©</em> contre les particularit√©s de facteurs externes, tels que WASM dans les navigateurs, restrictions ANGLE, fortes limitations des navigateurs eux-m√™mes, et bien s√ªr, des dizaines de bogues dans les pilotes de carte vid√©o, tout cela doit √™tre contourn√© manuellement. </p><br><p>  <strong>Retards</strong> - il y a un gros probl√®me de gestion, c'est 100% c√¥t√© Godot, je ne l'ai pas r√©gl√©.  (contr√¥le des coins lors de la compilation des shaders et d√©calages FPS (par exemple, dans le navigateur)), ainsi que d'autres d√©calages li√©s aux fonctionnalit√©s de rendu 3D dans Godot, j'ai fait un d√©tour de certains d'entre eux, mais ils existent toujours / peuvent √™tre. </p><br><hr><br><h1 id="5-webgl2-rabotaet-tolko-v-linux">  5. WebGL2 fonctionne <del>  Linux uniquement </del></h1><br><p>  <strong>Ne d√©marrez pas le</strong> jeu √† partir du lien si vous avez Windows.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien vers la version WebGL2 / WASM.</a> </p><br><p>  <strong>Mise √† jour des informations</strong> : la version WebGL a √©t√© lanc√©e dans Windows10 (uniquement dans Firefox, avec ANGLE d√©sactiv√©) sur un PC super puissant (i9 / 16gb ram / 8gb vid√©o), bien que le plancher ne soit plus rendu (pour une raison quelconque), et le firefox fuit la m√©moire (&gt; 16 Go ) en cinq minutes ... il vaut mieux ne pas courir, √† vos risques et p√©rils </p><br><p>  <em>Fonctionne</em> uniquement sur <em>Chrome 76+ et Firefox</em> (Linux). </p><br><p><del>  Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapport de bug (lien) a √©t√© envoy√© √†</a> propos de Windows, s'il s'agit d'un bug de navigateur, alors Google r√©agit apr√®s 2 mois.  <em>Mais apparemment, c'est un bug dans ANGLE, et ce n'est certainement pas correct.</em> </del><br>  Le rapport de bogue est d√©j√† ferm√© et ANGLE ne sera pas modifi√© non plus.  <strong>Donc, sous Windows, le navigateur ne fonctionnera pas.</strong> </p><br><p>  Au cours de ce projet, un bogue dans Chrome a √©t√© corrig√© en raison de quoi Transform-Feedback et ma derni√®re d√©mo <em>(ci-dessus la vid√©o avec un panorama jour / nuit)</em> , qui n'avait pas fonctionn√© auparavant, ont commenc√© √† fonctionner. </p><br><hr><br><h1 id="6-multipleer">  6. Multijoueur </h1><br><p>  Multijoueur ajout√©, exclusivement √† des fins de test (et exemple multijoueur dans Godot).  Code source et versions binaires √† c√¥t√© de la version principale sur github et itch (liens au d√©but). </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Xc1GsZnVa9c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  √Ä la sortie de Godot 3.2, j'ajouterai √©galement WebRTC pour le test. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr467779/">https://habr.com/ru/post/fr467779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr467763/index.html">Toute la v√©rit√© sur RTOS. Article # 33. Utilisation du syst√®me d'exploitation en temps r√©el Nucleus SE</a></li>
<li><a href="../fr467765/index.html">Wi-Fi et de nombreuses autres abr√©viations. Comment obtenir des donn√©es sur des n≈ìuds Wi-Fi dans une application Android et ne pas gonfler</a></li>
<li><a href="../fr467767/index.html">Plus d'√©quipements pour les abonn√©s JSON-RPC</a></li>
<li><a href="../fr467771/index.html">Comme un auto-rechargeur vert junior a √©crit son <s> hot </s>. Partie 2. CSS</a></li>
<li><a href="../fr467775/index.html">5 mythes sur les affaires: pourquoi le client a tort et comment d√©passer Apple</a></li>
<li><a href="../fr467781/index.html">Cours C ++ au centre CS, premi√®re partie</a></li>
<li><a href="../fr467783/index.html">Comment un informaticien peut-il travailler et vivre en Suisse</a></li>
<li><a href="../fr467785/index.html">Comment optimiser les pandas lorsque vous travaillez avec de grands ensembles de donn√©es (essai)</a></li>
<li><a href="../fr467787/index.html">Comment configurer la recherche d'adresses par coordonn√©es (et o√π trouver le r√©pertoire n√©cessaire)</a></li>
<li><a href="../fr467789/index.html">Java 13 vient d'arriver. ZGC a commenc√© √† partager la m√©moire, CDS se souvient des classes et d'autres merveilles techniques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>