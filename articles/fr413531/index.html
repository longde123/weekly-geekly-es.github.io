<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóûÔ∏è üôÜüèø üëâüèº Le livre "Unity pour le d√©veloppeur. Jeux multiplateformes mobiles ¬ª üëéüèΩ üö£üèø üíÖüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ce livre s'adresse √† tous ceux qui veulent cr√©er des jeux, mais qui n'ont pas d'exp√©rience de d√©veloppement pr√©alable. Unity prend en charge plusieurs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le livre "Unity pour le d√©veloppeur. Jeux multiplateformes mobiles ¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/413531/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/jb/cp/nf/jbcpnfxk76conc21ro289_v4fse.jpeg" align="left" alt="image"></a>  Ce livre s'adresse √† tous ceux qui veulent cr√©er des jeux, mais qui n'ont pas d'exp√©rience de d√©veloppement pr√©alable.  Unity prend en charge plusieurs langages de programmation.  Dans ce livre, nous utiliserons C #.  Avant de commencer √† cr√©er des jeux, vous devez comprendre les bases de leur conception, ainsi que le moteur de jeu Unity lui-m√™me, donc dans la premi√®re partie du livre, nous √©tudierons ces probl√®mes.  Dans les deuxi√®me et troisi√®me parties, nous examinerons respectivement le processus de cr√©ation de jeux bidimensionnels et tridimensionnels, et dans la quatri√®me partie, nous parlerons d'autres fonctionnalit√©s d'Unity, dont la connaissance vous sera utile. <br><a name="habracut"></a><br><h3>  6. La mise en ≈ìuvre du gameplay avec des pi√®ges et des objectifs </h3><br>  <b>Pi√®ges simples</b> <br><br>  La majeure partie de ce jeu consiste √† manipuler les touches de divers objets - pi√®ges, tr√©sors, points de sortie, etc.  Compte tenu de l'importance de d√©terminer quand toucher des objets sp√©cifiques, nous allons cr√©er un script commun qui g√©n√®re un √©v√©nement Unity lorsqu'un objet avec la balise ¬´Player¬ª les touche.  Cet √©v√©nement sera ensuite configur√© diff√©remment pour diff√©rents objets: les pi√®ges informeront le Game Manager que le gnome a subi des dommages, le tr√©sor signalera que le gnome a ramass√© le tr√©sor et le point de sortie est que le gnome a atteint la sortie. <br><br>  Cr√©ez maintenant un nouveau script C # dans un fichier appel√© SignalOnTouch.cs et ajoutez-y le code suivant: <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.Events;  //  UnityEvent,     "Player"  //  . [RequireComponent (typeof(Collider2D))] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SignalOnTouch : MonoBehaviour {  // UnityEvent      .  //     . <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> UnityEvent onTouch;   //    <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,      AudioSource. <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">bool</span></span> playAudioOnTouch = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;  //       ,  //  SendSignal. <span class="hljs-type"><span class="hljs-type">void</span></span> OnTriggerEnter2D(Collider2D collider) {  SendSignal (collider.gameObject); }   //      , //  SendSignal. <span class="hljs-type"><span class="hljs-type">void</span></span> OnCollisionEnter2D(Collision2D collision) {   SendSignal (collision.gameObject);  }    //    "Player"      //  UnityEvent,    .  <span class="hljs-type"><span class="hljs-type">void</span></span> SendSignal(GameObject objectThatHit) {   //    "Player"? <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (objectThatHit.CompareTag("Player")) {     //    ,     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (playAudioOnTouch) {  var audio = GetComponent&lt;AudioSource&gt;();   //     //     ,  //    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (audio &amp;&amp;     audio.gameObject.activeInHierarchy) audio.Play();   }   //      onTouch.Invoke();     }   }  }</code> </pre> <br>  La base de la classe SignalOnTouch est la m√©thode SendSignal, qui est appel√©e par les m√©thodes OnCollisionEnter2D et OnTriggerEnter2D.  Les deux derni√®res m√©thodes sont appel√©es par le moteur Unity lorsque l'objet touche le collisionneur ou lorsque l'objet tombe dans la port√©e du d√©clencheur.  La m√©thode SendSignal v√©rifie la balise de l'objet et, si elle stocke la cha√Æne "Player", g√©n√®re un √©v√©nement Unity. <br>  Maintenant que vous avez la classe SignalOnTouch, vous pouvez ajouter le premier pi√®ge. <br><br>  1. Importez des sprites d'objets.  Importez le contenu du dossier Sprites / Objects dans le projet. <br><br>  2. Ajoutez les pointes brunes.  Trouvez le sprite SpikesBrown et faites-le glisser dans la sc√®ne. <br><br>  3. Configurez l'objet avec des pointes.  Ajoutez les composants PolygonCollider2D et SignalOnTouch √† l'objet enrichi. <br><br>  Ajoutez une nouvelle fonction √† l'√©v√©nement SignalOnTouch.  Faites glisser le Game Manager dans le champ d'objet et s√©lectionnez la fonction GameManager.TrapTouched, comme indiqu√© sur la Fig.  6.1. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l9/en/37/l9en37qkgc1vqd2-rnj3ykvk88u.png" alt="image"></div><br>  4. Convertissez l'objet enrichi en mod√®le.  Faites glisser l'objet SpikesBrown du panneau Hi√©rarchie vers le dossier Level.  En cons√©quence, un mod√®le sera cr√©√© avec lequel vous pourrez cr√©er plusieurs copies de l'objet. <br><br>  5. Testez-le.  Lancez le jeu.  Faites que le gnome touche les pointes.  Ce gnome doit tomber et r√©appara√Ætre! <br><br><h3>  Tr√©sor et sortie </h3><br>  Apr√®s avoir ajout√© avec succ√®s le pi√®ge qui tue le gnome, il est temps d'ajouter l'opportunit√© de gagner la partie.  Pour ce faire, ajoutez deux nouveaux √©l√©ments: un tr√©sor et un point de sortie. <br><br>  Un tr√©sor est un sprite au fond d'un puits qui d√©tecte le toucher d'un gnome et envoie un signal au Game Manager.  Lorsque cela se produit, le gestionnaire de jeu dit au gnome qu'il a attrap√© le tr√©sor, apr√®s quoi le sprite avec l'image de la main vide du gnome est remplac√© par le sprite avec l'image de la main tenant le tr√©sor. <br><br>  Un point de sortie est un autre sprite situ√© en haut du puits.  Comme un tr√©sor, il d√©tecte une touche du gnome et en informe le gestionnaire de jeu.  Si √† ce moment le gnome d√©tient le tr√©sor, le joueur remporte la victoire dans le jeu. <br><br>  Le travail principal dans ces deux objets est effectu√© par le composant SignalOnTouch - lorsque le gnome atteint le point de sortie, la m√©thode ExitReached du gestionnaire de jeu doit √™tre appel√©e, et lorsque le gnome touche le tr√©sor, la m√©thode TreasureCollected doit √™tre appel√©e. <br><br>  Commen√ßons par cr√©er un point de sortie, puis ajoutons un tr√©sor. <br><br><h3>  Cr√©er un point de sortie </h3><br>  Tout d'abord, nous importons des sprites. <br><br>  1. Importer les sprites d'arri√®re-plan du niveau.  Copiez le dossier Sprites / Background du package t√©l√©charg√© avec des ressources dans le dossier Sprites du projet. <br><br>  2. Ajoutez un dessus de sprite.  Placez-le juste en dessous de l'objet Corde.  Ce sprite servira de point de sortie. <br><br>  3. Configurez l'image-objet.  Ajoutez le composant Box Collider 2D au sprite et cochez la case Is Trigger.  Cliquez sur le bouton Modifier le collisionneur et redimensionnez le collisionneur de sorte qu'il soit court et large, comme indiqu√© sur la Fig.  6.2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/30/rq/t6/30rqt6u6hfxppu6uexa1n0uewwg.png" alt="image"></div><br>  4. Configurez l'envoi d'un signal au gestionnaire de jeu au moment de toucher le sprite.  Ajoutez le composant SignalOnTouch au sprite.  Ajoutez un √©l√©ment √† la liste d'√©v√©nements du composant et connectez-le au Game Manager.  S√©lectionnez la fonction GameManager.ExitReached.  Maintenant, toucher le gnome de sortie appellera la m√©thode ExitReached du Game Manager. <br>  Ajoutez maintenant le tr√©sor. <br><br>  Le tr√©sor fonctionne comme ceci: par d√©faut, l'objet Tr√©sor affiche un sprite avec l'image du tr√©sor.  Lorsque le gnome le touche, la m√©thode TreasureCollected du Game Manager est appel√©e et un autre sprite s'affiche √† la place du tr√©sor, indiquant que le tr√©sor a √©t√© r√©cup√©r√©.  Lorsque le gnome meurt, l'objet Tr√©sor revient √† son √©tat d'origine et affiche √† nouveau l'image-objet avec l'image du tr√©sor. <br><br>  √âtant donn√© que le changement de sprites dans le jeu sera effectu√© assez souvent - vous le verrez lorsque nous am√©liorerons les graphismes - il est logique de cr√©er une classe universelle pour changer les sprites et de l'utiliser dans l'objet tr√©sor. <br><br>  Cr√©ez un nouveau script C # appel√© SpriteSwapper.cs.  Ajoutez-y le code suivant: <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/     . ,    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   ' '   ' '. public class SpriteSwapper : MonoBehaviour { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,   . public Sprite spriteToUse; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ,    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    . public SpriteRenderer spriteRenderer; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  .    ResetSprite. private Sprite originalSprite; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  . public void SwapSprite() { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      ... if (spriteToUse != spriteRenderer.sprite) { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    originalSprite originalSprite = spriteRenderer.sprite;  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    . spriteRenderer.sprite = spriteToUse; } } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   . public void ResetSprite() { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     ... if (originalSprite != null) {  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ...  . spriteRenderer.sprite = originalSprite; }  } }</span></span></code> </pre> <br>  La classe SpriteSwapper est con√ßue pour deux op√©rations: lorsque la m√©thode SwapSprite est appel√©e, un autre Sprite est transmis au visualiseur SpriteRenderer connect√© √† l'objet de jeu pour affichage.  Dans ce cas, le sprite d'origine est stock√© dans une variable.  Lorsque la m√©thode ResetSprite est appel√©e, le visualiseur re√ßoit le sprite d'origine √† afficher. <br>  Vous pouvez maintenant cr√©er et personnaliser l'objet Treasure. <br><br>  1. Ajoutez un sprite avec une image au tr√©sor.  Trouvez le sprite TreasurePresent et ajoutez-le √† la sc√®ne.  Placez-le pr√®s du fond, mais de telle mani√®re que le gnome puisse l'obtenir. <br><br>  2. Ajoutez un collisionneur pour le tr√©sor.  S√©lectionnez l'image-objet avec l'image du tr√©sor et ajoutez-y le composant Box Collider 2D.  Cochez la case Est un d√©clencheur. <br><br>  3. Ajoutez et configurez un script pour changer le sprite.  Ajoutez le composant SpriteSwapper.  Faites glisser l'image-objet avec l'image du tr√©sor dans le champ Rendu de l'image-objet de ce composant.  Trouvez ensuite le sprite TreasureAbsent et faites-le glisser dans le champ Sprite To Use du changeur de sprites. <br><br>  4. Ajoutez et configurez le composant d'envoi de signal en r√©ponse √† un tap.  Ajoutez le composant SignalOnTouch.  Ajoutez deux √©l√©ments √† la liste On Touch: <br><br><ul><li>  premier lien vers l'objet Game Manager et s√©lectionnez la m√©thode GameManager.TreasureCollected; </li><li>  associez le second au sprite au tr√©sor (c'est-√†-dire √† l'objet que vous configurez actuellement) et s√©lectionnez la m√©thode SpriteSwapper.SwapSprite. </li></ul><br>  5. Ajoutez et configurez le composant R√©initialisable.  Ajoutez un composant r√©initialisable √† l'objet.  Ajoutez un seul √©l√©ment √† la liste On Touch, s√©lectionnez la m√©thode SpriteSwapper.ResetSprite et associez-le √† l'objet Treasure. <br><br>  Par cons√©quent, les param√®tres du panneau d'inspection doivent ressembler √† ceux de la Fig.  6.3. <br><br>  6. Testez le jeu.  Lancez le jeu et touchez le tr√©sor.  √Ä ce moment, le tr√©sor dispara√Ætra;  si apr√®s cela le gnome meurt, le tr√©sor r√©appara√Ætra √† sa place apr√®s la cr√©ation du nouveau gnome. <br><br><h3>  Ajouter un arri√®re-plan </h3><br>  Actuellement, le jeu se d√©roule sur un fond bleu terne d√©fini par d√©faut dans Unity.  Dans cette section, nous ajouterons un arri√®re-plan temporaire, que nous remplacerons par un sprite d'arri√®re-plan lorsque nous commencerons √† am√©liorer la conception graphique du jeu. <br><br>  1. Ajoutez un rectangle d'arri√®re-plan.  Ouvrez le menu GameObject et s√©lectionnez Objet 3DÔÄ¥Quad (Objet 3DÔÄ¥Rectangle).  Nommez le nouvel objet Arri√®re-plan. <br><br>  2. D√©placez l'arri√®re-plan √† l'arri√®re-plan.  Pour √©viter la situation o√π un arri√®re-plan rectangulaire sera dessin√© au-dessus des sprites du jeu, d√©placez-le vers l'arri√®re-plan, loin de la cam√©ra.  Pour ce faire, d√©finissez la coordonn√©e Z du rectangle sur 10. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/__/ge/jp/__gejpqg6oyv_6qaf04vmhytn9a.png" alt="image"></div><br>  3. D√©finissez la largeur et la hauteur du rectangle d'arri√®re-plan.  Activez l'outil Rect en appuyant sur la touche T, puis utilisez les poign√©es pour d√©finir les dimensions du rectangle.  Le bord sup√©rieur de l'arri√®re-plan doit √™tre au m√™me niveau que le sprite en haut de la sc√®ne et le bas avec le tr√©sor (Fig. 6.4). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ef/sk/qf/efskqficuea12yni_biknneonqi.png" alt="image"></div><br>  4. Testez le jeu.  Apr√®s le d√©marrage, l'arri√®re-plan du terrain de jeu doit devenir gris fonc√©. <br><br>  ¬ªPlus d'informations sur le livre sont disponibles sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le site Web de l'√©diteur</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Contenu</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Extrait</a> <br><br>  20% de r√©duction sur les colporteurs - <b>Unity</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413531/">https://habr.com/ru/post/fr413531/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413519/index.html">Test comparatif des dispositifs anti-moustiques</a></li>
<li><a href="../fr413523/index.html">Pr√©sentation de l'utilisation de Universal Links: avantages et inconv√©nients</a></li>
<li><a href="../fr413525/index.html">Apprenez-moi √† interviewer</a></li>
<li><a href="../fr413527/index.html">Trois variantes du mot ¬´cacher¬ª en anglais et dans d'autres s√©ries synonymes</a></li>
<li><a href="../fr413529/index.html">Pourquoi les nouveaux appareils i-SENSYS peuvent √™tre appel√©s r√©volutionnaires</a></li>
<li><a href="../fr413539/index.html">Un contr√¥leur simple bas√© sur une logique floue. Cr√©ation et personnalisation</a></li>
<li><a href="../fr413543/index.html">Angular Cli 6: pourquoi vous en avez besoin et comment l'utiliser</a></li>
<li><a href="../fr413545/index.html">L'humour dans l'image de marque - pourquoi ce n'est pas toujours bon</a></li>
<li><a href="../fr413547/index.html">D√©couvrez 2 millions de sessions sans t√™te</a></li>
<li><a href="../fr413549/index.html">Cours de d√©veloppement Web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>