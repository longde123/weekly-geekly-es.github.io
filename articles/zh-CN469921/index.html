<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🎓 🎍 😢 [案例]平房村空气质量监测 🙌🏿 🧛 😠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文介绍了我们在开发解决方案中的经验，该解决方案使用生态传感器网络监控村庄的空气质量，并基于研华技术解决方案向用户实时提供信息。 

 智慧城市与空气污染问题 
 俄罗斯超过74％的人口居住在大城市，城市人口的增长仍在继续。 高人口密度和高产量伴随着大气质量的下降。 主要来源是：工业，热力和汽车运输...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[案例]平房村空气质量监测</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/advantech/blog/469921/"><img src="https://habrastorage.org/webt/5l/d9/fw/5ld9fwcehuzsqkhlfzg2mvxw6ns.png"><br><br> 本文介绍了我们在开发解决方案中的经验，该解决方案使用生态传感器网络监控村庄的空气质量，并基于研华技术解决方案向用户实时提供信息。 <br><a name="habracut"></a><br><h2> 智慧城市与空气污染问题 </h2><br> 俄罗斯超过74％的人口居住在大城市，城市人口的增长仍在继续。 高人口密度和高产量伴随着大气质量的下降。 主要来源是：工业，热力和汽车运输。 根据世界卫生组织的说法，最危险的污染物是细小的灰尘，因为它在呼吸时会进入肺部，并且终生不会排出体外。 <br><br> 根据NAFI在2019年的研究，大约<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">71％的公民认为</a>环境状况不成功，并将其归因于车辆和工业的排放。 问题在于及时确定当地的污染源。 <br><br> 国家计划“数字经济” 2019-2024年的任务之一。 通过引入主要用于国内发展的数字技术和平台解决方案，是对经济和社会领域（包括城市经济）优先领域的转变。 在该项目的框架内，于2019年3月4日，建筑和住房及公共服务部批准了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">智慧城市</a>标准，其中包含作为城市经济数字化一部分而实施的活动清单。 <br><br> 该标准意味着在28个方向上人口超过10万人的城市中实施解决方案，其中一个方向是“在线空气监测系统”，其中涉及采取措施来提高环境安全性，确保对空气质量状况的控制以及对城市预算收入的管理在环境保护方面，提高了城市对市民的吸引力。 <br> 在国家战略“生态”框架下，其<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">护照</a>得到了总统战略发展和国家项目理事会主席团于2018年12月24日的决定的批准，正在实施联邦项目“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">清洁空气</a> ”，旨在提高12个工业中心的大气质量根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RD 52.04.667-2005</a>的建议确定的空气污染程度达到“增加”水平。 <br><br> 根据该项目的任务1.5，预计将集成来自现代化状态观测网络，地区和本地系统的数据，以监测空气质量。 这样，可以根据由具有高空间分辨率的密集传感器网络获得的空气质量数据来识别本地空气污染源并控制排放。 <br> 但是，小城镇的居民不参与这些大型联邦项目，只能依靠自己的资源。 尽管远离工业中心的居民区的空气质量要高得多，但是，迅速发现当地污染源的问题与人口稠密地区一样严重。 <br><br><h2> 空气质量监测传感器网络 </h2><br> 在村庄的基础设施和群众娱乐场所放置生态传感器，可以使居民，地方政府和监管部门了解情况，从而确保空气质量控制，提高环境安全水平。 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-PaaS</a>数字平台，可以从生态传感器收集数据，分析其可变性并预测空气污染的风险。 所有这些都导致生活质量的提高以及村庄对居民和客人的吸引力。 <br> 实际上，传感器本身就是使用Advantech硬件实现的现实世界与数字世界之间的连接链接。 他们测量空气中的粉尘含量，温度，形成消息包，并根据LoRaWAN协议在868 MHz的范围内将其无线发送到基站，基站将数据打包成JSON文本消息，然后发送到MQTT协议<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-PaaS</a>数字平台，应用服务器已在此平台上进行处理。 <br><br><img src="https://habrastorage.org/webt/3m/ib/1b/3mib1bqieoa2npcfqeyqjjuckw4.png"><br><br> 作为LoRa网关，我们使用研华捷克分公司生产的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-6610</a>设备。 这是一种相当紧凑的设备，安装在DIN导轨或墙上，带有用于连接外部天线，LAN和电源的连接器。 实际上，在电源连接器的四个触点中，仅使用了两个：红色（+）和黑色（-）。 默认情况下，网关在路由器模式下运行，并且其LoRa模块处于关闭状态。 要激活设备，您需要通过以太网电缆连接到设备，并在浏览器的地址栏中指定网关设置Web界面可用的地址： <br><br><pre><code class="plaintext hljs">http://192.168.1.1</code> </pre> <br> 在授权请求中，指定默认参数（登录：root，密码：root）并进入如图所示的界面。 <br><br><img src="https://habrastorage.org/webt/um/zf/jb/umzfjbugn6snur0cilkv8x-6-ug.png"><br><br> 在这里，“用户模块”项最为重要，您可以通过它配置LoRa网关和本地Node-RED服务器。 我们转到LoRa网关的设置，在其中可以启用LoRa模块，指定LoRa网关无线电信道的频率，设置网络服务器操作参数并通过指定主机，端口，用户名和密码来配置向MQTT代理的消息传输。 <br><br><img src="https://habrastorage.org/webt/dp/5h/xl/dp5hxlfldh8dsopamlaulcmvnio.png"><br><br> 它仅将生态传感器绑定到LoRa网关。 为此，我们使用ABP（个性化激活）方法。 我们转到网络服务器设置面板： <br><br><pre> <code class="plaintext hljs">https://192.168.1.1:8443</code> </pre><br> 选择“设备激活的（节点）”，单击“ +创建”按钮，然后在出现的窗口中指定三个参数：NwkSKey（网络密钥），AppSKey（应用程序密钥），DevAddr（传感器地址）。 我们在生态传感器的设置中指示相同的参数。 <br><br><img src="https://habrastorage.org/webt/iw/lq/bt/iwlqbtkf1ueyflxf-nfivlbkvxu.png"><br><br> 要将<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-6610</a>连接到本地网络，必须将其置于DHCP客户端模式。 之后，设备将自己检测本地网络上的DHCP服务器以获得IP地址并连接到Internet。 这是通过主Web界面完成的：选择“ Configuration-LAN”菜单项，并在“ DHCP Client”字段中指示“ enabled”。 <br><br><img src="https://habrastorage.org/webt/u5/bc/vh/u5bcvhsnykhhso5aw1mtfwguw50.png"><br><br>  WISE-PaaS数字平台 <br><br> 今年年初，已知有150多个用于物联网的数字平台。 它们每个都有自己的特点，优点和缺点。 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-PaaS</a>平台可以解决收集传感器网络数据并将其可视化的问题。 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-PaaS</a>数字平台上来自传感器的数据处理分几个阶段进行： <br><br><ol><li>  MQTT代理从LoRa网关接收JSON消息并将其转发到应用程序； </li><li> 通过Python脚本接收JSON消息，进行数据处理并写入数据库； </li><li> 使用PostgreSQL DBMS记录，存储和提供数据； </li><li> 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-PaaS /仪表板进行</a>数据可视化； </li></ol><br><img src="https://habrastorage.org/webt/yx/an/r6/yxanr6be2wa_mgff3bpai0qot_w.png"><br><br> 在WISE-PaaS上创建新的虚拟空间时，默认情况下会启动MQTT代理RabbitMQ，并且在可用服务列表中可见。 代理参数（主机，端口，用户名，密码）可以通过Web界面获得。 <br><br> 要创建一个从MQTT代理接收度量数据并将其写入数据库的应用程序，可以根据研华公司准备的示例使用分步说明。 <br><br> 创建一个工作目录： <br><br><pre> <code class="plaintext hljs">mkdir ~/wisepaas/</code> </pre><br> 转到它： <br><br><pre> <code class="plaintext hljs">cd ~/wisepaas/</code> </pre><br> 我们正在用Github克隆一个示例，以检索MQTT数据并将数据写入PostgreSQL数据库： <br><br><pre> <code class="plaintext hljs">git clone https://github.com/WISE-PaaS/example-py-iothub-postgresql.git</code> </pre><br> 准备index.py可执行应用程序包括将几个参数的值更改为WISE-PaaS控制面板中指定的实际值。 <br><br><pre> <code class="plaintext hljs">… # MQTT(rabbitmq) service_name = 'p-rabbitmq-innoworks' … # Postgresql service_name = 'postgresql-innoworks' … schema = 'projectname' table = 'tablename' group = 'groupname' … def on_connect(client, userdata, flags, rc): client.subscribe("#") …</code> </pre><br>  <b>manifest.yml</b>文件包含应用程序参数：名称，可用RAM的大小，磁盘配额，应用程序启动命令，已使用服务的列表。 <br><br><pre> <code class="plaintext hljs">--- applications: - name: py-postgresql-meteolab memory: 256MB disk_quota: 256MB buildpack: python_buildpack command: python index.py services: - rabbitmq</code> </pre><br> 使用CloudFoundry客户端将密码为<b>password的</b>用户<b>user</b>连接到<i>api.wise-paas.io</i>服务器： <br><br><pre> <code class="plaintext hljs">cf login -a api.wise-paas.io -u user@advantech.com -p password</code> </pre><br> 验证客户端与CloudFoundry的连接性： <br><br><pre> <code class="plaintext hljs">cf target</code> </pre><br> 将应用程序复制到服务器而无需启动： <br><br><pre> <code class="plaintext hljs">cf push py-postgresql-meteolab --no-start</code> </pre><br> 通过组将应用程序绑定到数据库： <br><br><pre> <code class="plaintext hljs">cf bs py-postgresql-meteolab postgresql -c '{\"group\":\"groupname\"}'</code> </pre><br> 将应用程序绑定到MQTT代理： <br><br><pre> <code class="plaintext hljs">cf bs py-postgresql-meteolab rabbitmq</code> </pre><br> 在服务器上运行应用程序： <br><br><pre> <code class="plaintext hljs">cf start py-postgresql-meteolab</code> </pre><br> 通过检查应用程序执行日志来执行应用程序操作控制： <br><br><pre> <code class="plaintext hljs">cf logs py-postgresql-meteolab --recent</code> </pre><br> 将所有应用程序环境变量复制到本地JSON文件很方便： <br><br><pre> <code class="plaintext hljs">cf env py-postgresql-meteolab &gt; env.json</code> </pre><br> 创建虚拟空间时，默认情况下也会启动PostgreSQL服务器。 由于WISE-PaaS没有用于管理数据库的Web界面，因此有必要安装某种客户端，例如pgAdmin。 然后，创建数据库表，并控制使用Web界面从传感器记录数据的过程。 <br><br><img src="https://habrastorage.org/webt/7t/os/oz/7tosozwdaintudsirxy5clhnxok.png"><br><br><h2> 信息可视化工具 </h2><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-PaaS</a>数字平台包括<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WISE-PaaS / Dashboard</a> ，它允许您创建图形面板，其中包含任意数量的具有不同显示选项的块。 这可以是文本，图形，图表，地图等。 <br><br><img src="https://habrastorage.org/webt/jp/3o/pu/jp3opuvmvwbqog3bktzks0sk0b0.png"><br><br> 通过“编辑”菜单配置块。 显示数据的来源是对数据库的SQL查询。 另外，在“编辑”菜单中有各种可配置的选项可用于调整显示。 <br><br><img src="https://habrastorage.org/webt/p2/ua/0d/p2ua0diml_dngd9c5hp6xcliluc.png"><br><br><img src="https://habrastorage.org/webt/74/1q/bi/741qbivldz3qffr04whsao84gr8.png"><br><br> 为了进行更好的调整，您可以使用“面板JSON”，该面板允许您以JSON格式编辑设置。 有时这是必要的，因为所有参数都无法通过“编辑”面板进行编辑。 <br><br><img src="https://habrastorage.org/webt/pg/n-/py/pgn-pyyxx3fiiyyot7e_fmhgce4.png"><br><br> 每个面板都有通用设置。 在这里您可以设置面板名称，描述，分配标签，进行时间设置，更改背景。 <br><br><img src="https://habrastorage.org/webt/cf/pd/de/cfpddewibpt8qw-i4-v7s8tnmsc.png"><br><br> 此外，WISE-PaaS /仪表板具有所有面板的通用设置。 在这里，您可以添加数据源，管理组和用户，管理插件（添加，激活，删除），上传图像等等。 <br><br><img src="https://habrastorage.org/webt/ud/t8/5e/udt85evbclnn0gz1h7zssqyrb3q.png"><br><br><h2> 结论 </h2><br> 在平房村中使用空气质量监测系统，可以使您快速识别污染源，计划街道清洁并最终改善人们的生活质量。 将该系统与视频监控系统，访问控制和管理以及街道照明相集成，可让您创建“智能”数字解决方案，从而提高村舍运营的效率。 <br> 本文是由MeteoLab的团队（V.V. Chukin，T.A. Lipatov，A.Yu.Ermakov）根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Advantech AIoT Developer InnoWorks 2019竞赛</a>框架内的工作结果<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">编写的</a> 。 本文的作者总是很乐意通过<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">反馈表</a>回答问题并考虑建议，并将<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">研华WISE-PaaS</a>平台获得的经验应用于生产和员工发展的数字化转型项目中。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN469921/">https://habr.com/ru/post/zh-CN469921/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN469909/index.html">双屏，Windows 10X和新型Android智能手机：微软在Surface Event上展示的内容</a></li>
<li><a href="../zh-CN469911/index.html">DVR：现代设备之间的主要区别</a></li>
<li><a href="../zh-CN469913/index.html">硬币的两个面，名为“永恒”</a></li>
<li><a href="../zh-CN469915/index.html">使用PVS-Studio检查电报开放网络</a></li>
<li><a href="../zh-CN469917/index.html">PHP \ Python中的Fasttext。 第一步</a></li>
<li><a href="../zh-CN469923/index.html">Apple产品中的意外漏洞。 完全出乎意料</a></li>
<li><a href="../zh-CN469925/index.html">“ F＃比实体框架或WPF更难掌握”：Scott Vlashin访谈</a></li>
<li><a href="../zh-CN469927/index.html">开发者的十诫</a></li>
<li><a href="../zh-CN469931/index.html">什么是学习速度因素？它如何改善深度学习的特征？</a></li>
<li><a href="../zh-CN469935/index.html">课程“使用Wolfram技术进行有效工作的基础知识”：超过13个小时的视频讲座，理论和问题</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>