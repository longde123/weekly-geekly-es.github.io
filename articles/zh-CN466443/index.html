<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤴🏾 🐄 🤶🏾 ShIoTiny和世界：最小的模拟传感器或ADC ♌️ 🙎🏼 💰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="要点或本文的主题 


 关于ShIoTiny的一系列文章的续篇 -基于ESP8266芯片的可视可编程控制器。 该控制器的主要功能是能够通过在浏览器中绘制程序来对其进行编程。 


 本文介绍了模数转换的简要理论以及ShIoTiny ADC控制器的实际应用。 


 该系列中的先前文章。 


 S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny和世界：最小的模拟传感器或ADC</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466443/"><p><img src="https://habrastorage.org/webt/fr/no/k7/frnok7ogh51ujstrunvuo69naww.jpeg" alt="图片"></p><br><h3 id="osnovnye-tezisy-ili-o-chem-eta-statya"> 要点或本文的主题 </h3><br><p> 关于<strong>ShIoTiny</strong>的一系列文章的<strong>续篇</strong> -基于<strong>ESP8266</strong>芯片的可视可编程控制器。 该控制器的主要功能是能够通过在浏览器中绘制程序来对其进行编程。 </p><br><p> 本文介绍了模数转换的简要理论以及<strong>ShIoTiny</strong> ADC控制器的实际应用。 </p><br><p>  <strong>该系列中的先前文章。</strong> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ShIoTiny：小型自动化，物联网或“假期前六个月”</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ShIoTiny：绘图程序的节点，链接和事件或功能</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ShIoTiny：湿室通风（示例项目）</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ShIoTiny和周围的世界：将传感器连接到二进制输入，接触反弹和其他问题</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">项目现场</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">二进制固件，控制器电路和文档在这里</a> </p><a name="habracut"></a><br><h3 id="vstuplenie-ili-vmesto-sereznoy-teorii"> 介绍或代替严肃的理论 </h3><br><p> 在上<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一篇文章中，</a>我们检查了具有二进制输出的主要类型传感器到<strong>ShIoTiny</strong>控制器的二进制输入的<strong>连接</strong> 。 </p><br><p> 但是，正如大多数人以及学童和学生所知道的那样，有关周围世界的大部分信息都是各种物理性质的模拟量：光和声的力量，速度，气压，液位等。 </p><br><p> 几乎所有现代微处理器和微控制器都只能处理二进制表示形式的离散值。 </p><br><p> 对于那些还不知道模拟值与离散值有何不同的人，我将作简要说明。 谁都知道的人可以跳过它们。 我会立即进行预约-类比和简化都有余地。 这不是论文，而是手指上的简短解释。 </p><br><h3 id="analogovye-i-diskretnye-velichiny-professoram-akademikam-i-vunderkindam-mozhno-ne-chitat"> 模拟量和离散量（您不能读给教授，学者和极客） </h3><br><p> 每个人都在学校学习数学。 因此，我们转向它，并在模拟量与离散量和数字之间进行类比。 </p><br><p> 从数学的角度来看， <strong>模拟</strong>量是<strong>实</strong>数，定义在数字线给定线段上的任意点。 </p><br><p> 从数学的角度来看， <strong>离散</strong>值是<strong>整数</strong> 。 它仅在数字线给定线段的某些点定义。 </p><br><p> 下图示意性地显示了模拟和离散数量数字在数字线上的位置。 </p><br><p><img src="https://habrastorage.org/webt/_f/py/tm/_fpytmw_jsgmgxgr-1saubap86m.png" alt="图片"></p><br><p> 例如，考虑从<strong>-4</strong>到<strong>3</strong>的数字线段。 如您所见，用<strong>红</strong>点表示的<strong>离散</strong>数量-上的整数只有8件。 图中<strong>绿</strong>线显示<strong>的模拟</strong>值是无限的。 </p><br><p> 例如，我们有一定数量<strong>X</strong> ，其数量范围从<strong>0</strong>到<strong>127</strong> 。 如果我们将此数量表示为<strong>Analog</strong> ， <strong>则从</strong>理论上讲我们可以以任何精度表示它-例如， <strong>12.123455454980</strong>或<strong>126.00000000007</strong>或通常使用百万个小数位。 </p><br><p> 但是，一旦微控制器开始业务，并且<strong>X</strong>的值获得<strong>离散</strong>表示，那么即使从理论上讲也没有任何“无限精度”的说法。 精度受二进制数的限制，我们将其分配给数量<strong>X</strong>的表示形式<strong>。</strong> </p><br><p> 例如，我们取<strong>7</strong>位。 在这种情况下，我们可以用1的精度表示<strong>X</strong>的值。 即，可以指定<strong>X = 1</strong>或<strong>X = 112</strong> 。 但是<strong>X = 112.5</strong>已经无法显示-位深度不足。 如果我们将<strong>X</strong>的相同值表示为<strong>7</strong>而不是<strong>10</strong>位数，那么表示的精度将不是1，而是<strong>0.125</strong> 。 以这种形式，您可以想象<strong>X = 95.125</strong>或<strong>X = 112.5</strong> 。 但更确切地说，例如以<strong>X = 112.13</strong>的形式-该值无法表示。 </p><br><p> 如果您对我写分数值并同时将它们说成整数感到困惑，那么请记住，“离散点”可以放在数字行上，而不是以单位为单位，而是以<strong>0.5</strong>或<strong>0.125</strong>单位。 但是，就像过去一样，最终值将保留在任何细分市场中。 并且保留了离散量的所有属性。 </p><br><p>  <strong>离散</strong>值和<strong>模拟</strong>值之间<strong>的关键</strong>区别在于，在数字行的任何有限段上，将存在有限数量的离散（整数）值和无限数量的模拟（实数）值。 因此，我们获得了数量的离散表示始终具有有限的精度。 </p><br><p> 综上所述，我们得出了一个简单的<strong>结论</strong> 。 现实世界中大多数可测量的量都是<strong>模拟量</strong> 。 微控制器仅使用<strong>离散的</strong>数字表示形式工作。 因此，在使用微控制器处理任何模拟值之前，该值必须表示为离散值。 是的，并且采用二进制形式。 </p><br><p>  <strong><em>从模拟到数字的这种转换称为模拟到数字的转换</em></strong> 。 </p><br><h3 id="analogo-cifrovoy-preobrazovatel"> 模数转换器 </h3><br><p> 用于将模拟信号转换为数字的设备称为<strong>ADC</strong> （ <strong>模数转换器</strong> ）。 </p><br><p> 通常，这种设备具有一个或多个模拟输入，具有给定比特深度的模拟信号和数字输出（通常为8到16位）提供给该设备。 </p><br><p> 包括<strong>ESP8266</strong>在内的现代微控制器均具有内置ADC单元。 </p><br><p>  ADC通常具有什么特性， <strong>ESP8266 ADC</strong>特别具有什么特性？ </p><br><p>  <strong>第一个</strong>特性是ADC将哪种输入模拟值转换为输出数字代码。 通常，该值是ADC模拟输入端的电压。 因此，在我们的情况下。 但实际上，有些ADC具有电流输入。 </p><br><p> 在实践中需要ADC <strong>的第二个</strong>特性是ADC输入值的值范围。 在我们的情况下，这是ADC输入端的最小和最大电压值。 这些值分别为<strong>0V</strong>和<strong>1V</strong> 。  <strong>1V</strong>的输入范围似乎很小，但始终可以对大电压进行分压和减小，并且可以放大小电压。 </p><br><p>  ADC <strong>的第三个</strong> ，也许是最重要的特性是其容量。 该值确定转换的精度，或者（根据我们的类比）确定“离散”点在“实”数字线上放置的频率。 在我们的情况下，ADC的分辨率为<strong>10</strong> 。 这是什么意思？ 这意味着输出的数字代码由10个二进制数字表示，并且具有1024个值-从0到1023。 <br> 严格来说，值得记住的是，转换的精度不仅取决于位深度，还取决于许多其他参数，例如ADC的线性度。 但是，非常聪明的叔叔已经在非常聪明的书中对此进行了很多介绍，因此在本文中，我将为读者提供更多细节。 </p><br><p> 此外， <strong>ESP8266 ADC</strong>可以检测到溢出，即在输入端施加大于<strong>1V</strong>的电压的情况。 </p><br><p> 如果您看一本关于ADC的聪明的参考书，然后看那里，那么就会有很多其他特征。 所有这些都是必要和重要的，但是我们不会走太远了。  <strong>例如</strong> ，我们<em>不会涉及ADC的时间参数</em> ，因为我们认为在我们的情况下，测量值变化相当缓慢，并且ADC会“立即”将其转换为数字表示形式。 </p><br><p>  <strong>总结</strong>初步<strong>结果</strong> 。 <br>  <strong>ShIoTiny</strong>控制器的<strong>ESP8266</strong>内置有一个ADC。 </p><br><p>  <strong>ADC ESP8266</strong>的输入端施加<strong>0</strong>到<strong>1V</strong>的电压。 </p><br><p> 在<strong>ESP8266 ADC</strong>的输出端<strong>，</strong>我们得到一个与输入电压成比例的数字，范围为<strong>0</strong>到<strong>1023</strong> 。 电压<strong>0V</strong>对应于ADC输出处的代码<strong>0</strong> ，电压<strong>1V</strong>对应于ADC输出处的代码<strong>1023</strong> 。 </p><br><p> 从<strong>ShIoTiny中</strong>的ADC读取数据的速度约为<strong>每秒10次</strong> 。 </p><br><p>  ADC的硬件输入具有过压保护，类似于二进制输入<strong>Input1,2,3的保护方式</strong> （ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">请参见此处</a> ）。 </p><br><p>  <strong>ShIoTiny ADC硬件就是这样</strong> 。 </p><br><p> 现在让我们<strong>处理ADC1</strong>节点，该节点处理<strong>ESP8266</strong>硬件<strong>ADC的数据</strong> 。 </p><br><h3 id="programmnye-navoroty-ili-uzel-adc1"> 软件铃声或口哨ADC1 </h3><br><p> 在<strong>ElDraw</strong>编辑器的程序图中，模数转换器<strong>组件</strong>称为<strong>ADC1</strong> 。 </p><br><img src="https://habrastorage.org/webt/bt/wn/ub/btwnub4pibvpje98rsdylqdvizs.png"><br><p> 如前所述， <strong>ADC1</strong>节点<strong>每秒</strong>大约从<strong>ESP8266</strong>硬件<strong>ADC</strong>接收数据<strong>10次</strong> 。 但是指定的节点不会对此放松，而是开始处理此数据，甚至进行一点分析。 </p><br><p>  <strong>首先</strong> ，检查-ADC溢出了吗？ 那是-ADC输入的电压是否不超过<strong>1V</strong> ？ 如果检测到这种情况，则将<strong>ADC1</strong>节点的输出设置为<strong>NAN</strong> （ <strong>不是number</strong> ）。 </p><br><p>  <strong>其次</strong> ，如果没有溢出，则将ADC <strong>0..1023</strong>的输出值转换为ADC输入的电压值 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.116ex" height="1.817ex" viewBox="0 -520.7 1341.4 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-75" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6E" x="345" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>n</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-1"> u_ {in} </script>  -在<strong>0..1</strong>范围内的浮点数。 </p><br><p>  <strong>第三</strong> ，根据公式重新计算转换后的值<strong>0..1</strong> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi><mo>=</mo><mi>k</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.014ex" height="2.419ex" viewBox="0 -780.1 7755.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-58" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-3D" x="1130" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6B" x="2186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-63" x="2958" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-64" x="3391" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6F" x="3915" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-74" x="4400" y="0"></use><g transform="translate(4762,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-75" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6E" x="345" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-2B" x="6325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-62" x="7326" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi><mo>=</mo><mi>k</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> X = k \ cdot u_ {in} + b </script> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.116ex" height="1.817ex" viewBox="0 -520.7 1341.4 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-75" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6E" x="345" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>n</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> u_ {in} </script>  -ADC输入端的电压（从<strong>0</strong>到<strong>1V</strong> ）；  <strong>k</strong>是范围（ <strong>ADC范围</strong> ）， <strong>b</strong>是偏移量（ <strong>ADC offset</strong> ）。 最后，将获得的<strong>X值</strong>设置为<strong>ADC1</strong>节点的输出。 </p><br><p> 最后<strong>是第五名</strong> 。 如果<strong>X</strong>的值已更改指定百分比（从<strong>1</strong>到<strong>100％</strong> ），则ADC单元会生成事件，从而导致与其连接的节点的值转换。 这本质上是<strong>ADC灵敏度</strong>参数（ <strong>ADC变化，范围％</strong> ）。 毕竟，通常没有理由对“每次打喷嚏”做出反应，也就是说，对ADC低位的变化很小-它们经常“发出噪音”。 因此，灵敏度参数具有重要的现实意义。 </p><br><p> 提出了合理的问题-我们如何配置这些设置？ 在图表中的<strong>ADC1</strong>节点上单击鼠标右键，然后您会在其中看到一个设置窗口。 </p><br><p> 您可以在其中设置所需的一切。 对于我们的情况，将是如图所示的窗口。 </p><br><p><img src="https://habrastorage.org/webt/cn/so/ub/cnsoubc9q_rhu-2p6hlffcd_1ig.png" alt="图片"></p><br><p> 在此窗口中，您可以设置上述所有参数-ADC的范围，偏移和灵敏度。 </p><br><p> 如果未指定任何内容，则范围将为1。偏移量为零。 灵敏度为1％。 </p><br><p> 也就是说，实际上，默认情况下， <strong>ADC1</strong>节点的输出将是提供给ADC输入的模拟电压值。 </p><br><p> 如您所见， <strong>ADC1</strong>节点非常复杂。 为什么要完成所有这些？ <del> 是的，您，我亲爱的用户！ </del> 当然，我只是在开玩笑，作为一个恶意的自我主义者，我考虑了以前的经验，并试图使我的生活更轻松。 </p><br><p> 作为简单的工程师，我们希望这些值不是以“鹦鹉”的形式显示，而是以正常且易于理解的值（伏特，安培，千克或米）显示。 </p><br><p> 许多传感器发出“鹦鹉”中的值，希望智能微控制器将其重新计算为所需值。 </p><br><p> 为此，介绍了通过给定的函数对ADC的测量值进行转换的方法。 </p><br><p> 但是，像往常一样，看一次比听十次更好。 尝试一次比查看十次也更好。但这不是重点。 <br> 因此，我将举几个简单的例子：一个电源控制系统和一个基于具有<strong>4-20mA</strong>电流输出的传感器的温度测量系统。 </p><br><h3 id="kontrol-pitayuschey-seti"> 电源监控 </h3><br><p> 测量电压是一项常见的任务。 例如，我们要测量<strong>220V</strong>的电源电压。 如果我们的电力供应很差，那么任务是非常实际的。 我们不需要非常非常准确的更改。 当电压比标准高15％时，在<strong>ShIoTiny上</strong>触发<strong>Relay1</strong>就<strong>足够了</strong> ，而当电压比标准降低15％时， <strong>就可以</strong>触发<strong>Relay2</strong> 。 </p><br><p> 当然，我们不能将<strong>ShIoTIny</strong>控制器<strong>的ADC1</strong>输入插入插座。 怎么办 首先，必须将电压降低到可接受的水平<strong>-0..1V</strong> 。 其次，必须对其进行校正：我们的ADC无法测量交流电压。 </p><br><p> 网络中的电压可以低于标准电压也可以高于标准电压。 为简单起见，我们<strong>假设</strong> <strong>220V的</strong>电源电压将对应于ADC输入电压的<strong>0.5V</strong> 。 </p><br><p> 接下来，我们寻找输入电压<strong>约为220V</strong>时能给我们提供输出电压<strong>约3V的</strong>任何降压变压器，并组装下图所示的电路。 </p><br><br><p> 在这里， <strong>惊喜</strong>可以等待电子学的无知。 在整流器的输出端，不是​​突然出现<strong>3V</strong> DC电压，而是出现了<strong>4V</strong>以上的电压！ 实际上，一切都简单地解释了。 当我们测量交流电压时，电压表会向我们显示<strong>实际</strong>电压值。 当我们对这个电压进行整流时，在整流器的输出端会得到<strong>峰值</strong>电压值，对于正弦信号，该<strong>峰值</strong>约为<strong>1.41</strong> ，并且正好 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.791ex" height="2.298ex" viewBox="0 -728.2 2493.5 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-74" x="1631" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-32" x="1993" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-4"> \ sqrt 2 </script> 是目前的一倍。 因此，整流器输出处的“难以理解”的<strong>4.23V</strong> 。 </p><br><p> 最后，我们需要计算分压器，即电阻<strong>R1</strong>和<strong>R2</strong> 。 我们需要在分压器的输出端获得<strong>0.5V</strong>的电压，在其输入端获得<strong>4.23V</strong>的电压。 因此， <strong>4.23V</strong>的整流电压应除以<strong>8.46</strong>倍。 为此，设置电阻器<strong>R2 = 100欧姆</strong> ，电阻器<strong>R1 = 746欧姆</strong> 。 但这是理想的。 实际上，不存在电阻为<strong>746欧姆的</strong>电阻器。 是的，变压器不是特别准确。 因此，如果有人敢尝试此解决方案，我<strong>强烈建议您</strong>将电阻器<strong>R1 = 760欧姆</strong> ，然后将电阻<strong>R2</strong>调整为电阻<strong>180欧姆</strong>或<strong>220欧姆</strong> 。 然后，您可以使用电压表进行调整<strong>R2，</strong>以便在<strong>〜220V</strong>时，变压器初级绕组，分压器输出（或<strong>ADC1</strong>输入相同）上的电压<strong>= 0.5V</strong> 。 </p><br><p> 我们不仅测量电压，而且通过超出或降低电压来做某事。 例如，打开备用电源，以使某些设备不会烧坏或关闭。 </p><br><p> 因此，我们将画出最简单的程序方案，当电压比<strong>正常值高</strong> <strong>15％时</strong> ，使继电器<strong>Relay1工作</strong> ，而当电压比<strong>正常值</strong>降低<strong>15％时</strong> ，继电器<strong>Relay2起作用</strong> 。 此外，网络上的过电压或欠电压必须保持<strong>至少1分钟</strong>才能触发继电器。 这样可以防止在网络上经常出现的短电压峰值期间出现误报。 图中显示了实现我们想法的方案程序。 </p><br><p><img src="https://habrastorage.org/webt/vq/t0/bo/vqt0bo1gbldkrrwflef9j6e8ada.png" alt="图片"></p><br><p> 为了使该电路正常工作，必须在ADC参数的设置中将系数k（范围）设置为等于<strong>440</strong> ，如图所示。 </p><br><p><img src="https://habrastorage.org/webt/3a/iw/x8/3aiwx8bupssyh3wkvimax7bxnfe.png" alt="图片"></p><br><p> 系数为<strong>440</strong> ，ADC的输入端电压为<strong>0.5V时，</strong> <strong>ADC1</strong>节点的输出为<strong>220</strong> 。 那才是真正的电源电压！ </p><br><p> 这非常方便，因为它允许您立即以伏特为单位设置常数： <strong>220V + 15％</strong>为<strong>253V，</strong>而<strong>220V-15％</strong>为<strong>187V</strong> 。 如有必要，可以轻松更改这些值，而无需浪费时间计算并将电压转换为“鹦鹉​​”。 </p><br><h3 id="datchik-temperatury-4-20ma">  4-20mA温度传感器 </h3><br><p> 具有4-20mA电流输出的传感器在工业中非常普遍。 在日常生活中，您不会经常遇到他们。 然而，有人拥有它们，而这个人想要使他们适应事业。 </p><br><p>  ADC允许将此类传感器与<strong>ShIoTiny</strong>控制器结合使用。 </p><br><p> 为什么传感器输出电流精确到<strong>4-20mA</strong> ？ 我会解释。 </p><br><p> 电流输出在长线上运行良好。 说一公里。 他们不在乎导线的电阻：无论导线的电阻如何，电流在导线的整个长度上都是相同的。 </p><br><p> 初始电流值为<strong>4mA</strong> ，而不仅仅是缺少电流，这使得检测断线变得容易。 如果传感器是完整的，并且电线没有断线，那么总会有电流。 至少<strong>4mA</strong> 。 如果电线<strong>断开，</strong>则没有电流（ <strong>0mA</strong> ）。 </p><br><p> 假设我们有一个温度传感器，其电流输出为<strong>4-20mA</strong> ，测得的温度范围为<strong>-40C</strong>至<strong>+ 125C</strong> 。 我们想将其连接到<strong>ShIoTin</strong> 。 我们需要做的第一件事是将电流转换为电压。 进行这种转换的理想方法是使用常规电阻器。 </p><br><p> 由于ADC输入端的最大电压为<strong>1V</strong> ，线路中的最大电流为<strong>20mA</strong> ，因此很容易计算出将<strong>20mA</strong>转换为<strong>1V</strong>的电阻的电阻为<strong>50欧姆</strong> 。  （ <em>不知道欧姆定律-呆在家里！</em> ）。 </p><br><p> 如图所示，我们将连接传感器。 </p><br><p><img src="https://habrastorage.org/webt/7a/fq/og/7afqogxbvlo_0tb4ytycdnaynqm.png" alt="图片"></p><br><p> 传感器是与所测温度成比例的电流发生器。 通过将<strong>50欧姆的电阻</strong>与<strong>ADC1</strong>输入并联连接，以下电压值将在ADC输入端，具体取决于传感器电路中产生的电流： </p><br><ul><li> 电流<strong>小于4mA</strong> ，ADC输入电压小于<strong>0.2V-</strong>断线; </li><li> 电流从<strong>4mA到20mA</strong> ，电压从<strong>0.2V到1V-</strong>传感器正在工作； </li><li> 电流<strong>大于20mA</strong> ，输入电压<strong>大于1V-</strong>传感器故障。 传感器短路时，如果功率小于2W，则50欧姆电阻可能会烧坏。 </li></ul><br><p> 假设我们要测量温度并通过<strong>MQTT进行</strong>发布。 此外，我们将发布传感器的状态（开路，短路或一切正常）。 </p><br><p> 我们要做的第一件事是将“鹦鹉”中的值重新计算为度。 知道<strong>-40</strong> ° <strong>C的温度</strong>对应于<strong>4 mA的电流</strong>且ADC的输入端的电压为<strong>0.2 V</strong> ， <strong>+125°C的温度</strong>对应于<strong>20 mA的电流</strong>且ADC的输入端的电压为<strong>1</strong> <strong>V</strong> ，我们得到了系数<strong>k = 206.25</strong>和<strong>b = -81.25</strong> 。 如图所示，在ADC设置窗口中输入这些系数。 </p><br><p><img src="https://habrastorage.org/webt/pn/bn/ss/pnbnsso2veaouphppgibtzqx8do.png" alt="图片"></p><br><p> 谁想<strong>亲自</strong>验证<strong>k</strong>和<strong>b</strong>的计算的正确性- <strong>自己</strong>决定最简单的方程组： </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext mathcolor=&quot;red&quot;>\&amp;#x5F00;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x59CB;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>s</mi></mrow><mn>0.2</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>k</mi><mo>+</mo><mi>b</mi><mo>=</mo><mo>&amp;#x2212;</mo><mn>40</mn><mspace linebreak=&quot;newline&quot; /><mn>1</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>k</mi><mo>+</mo><mi>b</mi><mo>=</mo><mn>125</mn><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>n</mi><mi>d</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>s</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="76.867ex" height="5.551ex" viewBox="0 -832 33095.6 2390.2" role="img" focusable="false" style="vertical-align: -3.619ex; max-width: 638px;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(9972,0)"><g fill="red" stroke="red"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">开</text></g></g><g transform="translate(1330,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">始</text></g><g transform="translate(2160,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-61" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-73" x="963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-65" x="1432" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-73" x="1899" y="0"></use></g><g transform="translate(4528,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-32" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-63" x="6058" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-64" x="6491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6F" x="7015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-74" x="7500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6B" x="7862" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-2B" x="8606" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-62" x="9606" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-3D" x="10314" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-2212" x="11370" y="0"></use><g transform="translate(12148,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-34"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-30" x="500" y="0"></use></g></g><g transform="translate(10661,-1377)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-63" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-64" x="1184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6F" x="1707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-74" x="2193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6B" x="2554" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-2B" x="3298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-62" x="4298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-3D" x="5006" y="0"></use><g transform="translate(6062,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMAIN-35" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-65" x="7813" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-6E" x="8280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-64" x="8881" y="0"></use><g transform="translate(9404,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-61" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-73" x="963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-65" x="1432" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/466443/&amp;usg=ALkJrhh3hrSTCU8TWazkoNBtd4CfHCrwnw#MJMATHI-73" x="1899" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext mathcolor="red">\开</mtext><mrow class="MJX-TeXAtom-ORD"><mo>始</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi>c</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>s</mi></mrow><mn>0.2</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>k</mi><mo>+</mo><mi>b</mi><mo>=</mo><mo>−</mo><mn>40</mn><mspace linebreak="newline"></mspace><mn>1</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>k</mi><mo>+</mo><mi>b</mi><mo>=</mo><mn>125</mn><mtext>&nbsp;</mtext><mi>e</mi><mi>n</mi><mi>d</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>s</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> \开始{cases} 0.2 \ cdot k + b = -40 \\ 1 \ cdot k + b = 125 \ end {cases} </script></p><br><p> 好了，程序方案根本不会很复杂，如下图所示。 </p><br><p><img src="https://habrastorage.org/webt/nn/yg/u9/nnygu9gstcce-b58llm-k5fyxns.png" alt="图片"></p><br><p> 在一切正常且<strong>4-20mA</strong>温度传感器<strong>正常工作</strong>的情况下，温度<strong>将以/ t_sens</strong>的名称发布在<strong>MQTT</strong>服务器上。 症状也以<strong>/ sens_short</strong>和<strong>/ sens_break</strong>的名称<strong>发布</strong> 。 如果一切正常，那么事故的征兆为零。 </p><br><p> 如果<strong>断线</strong> ，则温度将低于<strong>-40C</strong> 。 在这种情况下， <strong>MQTT</strong>代理上的参数<strong>/ sens_break</strong>将作为一个单元发布。 </p><br><p> 如果线路中发生短路，则温度将超过<strong>+ 125C</strong> 。            <strong>1</strong>         <strong>NAN</strong> ( <strong>-</strong> ).     <strong>/sens_short</strong>  <strong>MQTT</strong>     . </p><br><p>        <strong>Relay3</strong> ,  , ,   . </p><br><p>    «» ,   , ,  200      . </p><br><h3 id="zaklyuchenie"> 结论 </h3><br><p>      <strong>ShIoTiny</strong>  ,      .      ,  . </p><br><p>  ,  -    «»  ,  - , -   . </p><br><p>   —     .      . </p><br><p>           : <strong>shiotiny@yandex.ru</strong> . </p><br><h3 id="ssylki"> 参考文献 </h3><br><p>        ,   ,     . </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">       <br></a> </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">- </a> </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   .      </a> </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">       <br></a> </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  :   4-20  –    </a> </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   ESPPOWER     ANDROID</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN466443/">https://habr.com/ru/post/zh-CN466443/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN466433/index.html">培训Cisco 200-125 CCNA v3.0。 第41天。DHCP侦听和非默认本机VLAN</a></li>
<li><a href="../zh-CN466435/index.html">培训Cisco 200-125 CCNA v3.0。 第42天。VLAN间路由和SVI</a></li>
<li><a href="../zh-CN466437/index.html">培训Cisco 200-125 CCNA v3.0。 第43天。路由协议距离向量和链接状态</a></li>
<li><a href="../zh-CN466439/index.html">检查一下自己：您可以回答ChGK几个问题？</a></li>
<li><a href="../zh-CN466441/index.html">Python错误代码：开发人员最常犯的10个错误</a></li>
<li><a href="../zh-CN466445/index.html">域之间信任之间的攻击</a></li>
<li><a href="../zh-CN466447/index.html">我们应该为CDN做什么？</a></li>
<li><a href="../zh-CN466449/index.html">培训Cisco 200-125 CCNA v3.0。 第44天。OSPF简介</a></li>
<li><a href="../zh-CN466451/index.html">Read_You不能_throw</a></li>
<li><a href="../zh-CN466453/index.html">培训Cisco 200-125 CCNA v3.0。 第45天。配置OSPF</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>