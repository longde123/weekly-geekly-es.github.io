<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¥üèΩ üóúÔ∏è üå∏ Nous d√©veloppons un bot Telegram pour suivre les films sur NodeJS et TypeScript üëèüèæ üï¥üèæ üèÇüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il vous est arriv√© que vous veniez au cin√©ma et que vous regardiez des bandes-annonces avant le d√©but du film, tandis que certains s'accrochent √† vous...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous d√©veloppons un bot Telegram pour suivre les films sur NodeJS et TypeScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443876/"><img src="https://habrastorage.org/webt/k8/du/50/k8du50aoufwmy7qczw9n6opy2mq.png"><br><br>  Il vous est arriv√© que vous veniez au cin√©ma et que vous regardiez des bandes-annonces avant le d√©but du film, tandis que certains s'accrochent √† vous assez fortement et vous vous promettez de regarder ce film sinon au cin√©ma, puis au moins plus tard, quand il sera disponible en t√©l√©chargement ?  J'ose sugg√©rer que oui.  Mais souvent, cela se termine par le fait que vous l'oubliez avec succ√®s et, dans le meilleur des cas, que vous trouviez accidentellement ce film en faisant d√©filer la liste des films d√©j√† sortis. <br><br>  J'ai souvent rencontr√© un tel probl√®me et j'ai d√©cid√© de le cr√©er avec Eve - Telegram-bot, ce qui m'aide √† ne pas oublier les sorties de mes films pr√©f√©r√©s.  Qu'est-ce que c'est, comment cela fonctionne et comment il a √©t√© d√©velopp√©, vous pouvez lire sous la coupe! <br><a name="habracut"></a><br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pr√©face</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pourquoi?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">S√©lection de technologies</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Telegraf.js</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Structure du projet</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Initialisation et lancement</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">G√©rer l'entr√©e utilisateur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Localisation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conclusion</a> </li></ul><br><a name="foreword"></a><h3>  Pr√©face </h3><br>  Cet article n'est pas un guide d√©taill√© sur la cr√©ation de robots Telegram.  Et m√™me si au cours de l'article je ferai souvent r√©f√©rence √† mon projet, le but de ce mat√©riel est une histoire de d√©veloppement en g√©n√©ral, √† savoir le choix des technologies, les points cl√©s et les √©cueils que j'ai rencontr√©s. <br><a name="why"></a><br><h3>  Pourquoi? </h3><br>  Donc, comme je l'ai √©crit ci-dessus, j'oublie souvent de regarder ces films dont j'ai aim√© la bande-annonce.  J'ai longtemps r√©fl√©chi √† la solution √† ce probl√®me.  La premi√®re chose qui m'est venue √† l'esprit a √©t√© la cr√©ation d'une application native pour smartphones, mais depuis  Je n'ai jamais fait cela auparavant, cela prendrait beaucoup de temps et non le fait que le r√©sultat final satisferait mes besoins, ainsi que les besoins des utilisateurs potentiels. <br><br>  L'id√©e suivante √©tait de cr√©er un PWA.  C‚Äôest une option assez int√©ressante pour se familiariser avec la technologie, mais j‚Äôai d√©cid√© de la laisser pour l‚Äôavenir.  En m√™me temps, j'utilise Telegram depuis longtemps et pendant tout ce temps, j'ai accumul√© un nombre suffisant de bots qui me rendent p√©riodiquement la vie un peu plus facile.  Finalement, apr√®s avoir pes√© tous les avantages et les inconv√©nients, j'ai d√©cid√© que cette plate-forme est parfaite pour cette id√©e. <br><a name="technologies"></a><br><h3>  S√©lection de technologies </h3><br>  Si vous passez par Github pour les bots Telegram, vous pouvez voir que la plupart d'entre eux sont √©crits en Python.  Python est vraiment un excellent langage et id√©al pour cette id√©e, mais je voulais impl√©menter ce projet sp√©cifiquement sur NodeJS + TypeScript.  En appliquant les filtres appropri√©s, je suis tomb√© sur 2 outils assez populaires: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">node-telegram-bot-api</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Telegraf.js</a> . <br><br>  Avant cette exp√©rience dans le d√©veloppement de robots, je n'en avais pas, donc lors du choix parmi ces deux, il n'√©tait pas clair quels param√®tres devraient √™tre examin√©s.  En cons√©quence, apr√®s avoir examin√© la documentation et examin√© les probl√®mes de chacune des biblioth√®ques, je me suis install√© sur Telegraf.js.  Le facteur d√©cisif a √©t√© la disponibilit√© des middlewares, qui sont con√ßus de la m√™me mani√®re que dans le cadre populaire d'Express.js.  Telegraf.js a √©galement un historique des mises √† jour plus fr√©quent et une documentation bien structur√©e, ce qui sugg√®re que les d√©veloppeurs font suffisamment d'efforts pour am√©liorer l'outil.  De plus, il contient des extraits pour TypeScript, ce qui est certainement un avantage pour la pile s√©lectionn√©e. <br><a name="telegraf"></a><br><h3>  Telegraf.js </h3><br>  Telegraf.js est la biblioth√®que principale sur laquelle le projet a √©t√© √©crit.  Il utilise plusieurs approches int√©ressantes qui vous permettent de cr√©er des bots complexes tout en conservant la simplicit√© du code.  Voici les m√©canismes les plus int√©ressants: <br><br><ul><li>  <b>Middlewares</b> - oui, ce sont les m√™mes middlewares disponibles dans Express.js.  Lorsque l'utilisateur envoie quelque chose au bot, le message passe d'abord par tous les middlewares enregistr√©s, puis il parvient au contr√¥leur.  Les middlewares peuvent modifier le contexte, ainsi que suspendre l'ex√©cution de la demande, par exemple, si un utilisateur r√©gulier essaie d'acc√©der √† la zone pour les administrateurs.  Telegraf.js fournit des middlewares extr√™mement utiles pr√™ts √† l'emploi, mais vous pouvez √©galement les utiliser vous-m√™me.  √Ä savoir les middlewares sont consid√©r√©s comme des caract√©ristiques tueuses de Telegraf.js </li><li>  <b>Sessions</b> - sessions qui peuvent stocker des informations qui ne sont pas li√©es au contr√¥leur.  Vous pouvez donner une analogie avec des variables globales accessibles depuis n'importe o√π dans le bot.  Une chose tr√®s pratique, qui est utilis√©e, par exemple, pour la localisation.  Il est possible de stocker des sessions dans diff√©rents modes - DB, redis, fichiers locaux, etc. </li><li>  <b>Webooks</b> - le bot peut fonctionner dans deux modes - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">polling long</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Webhooks</a> .  Et bien qu'ils fonctionnent tout aussi rapidement, il est pr√©f√©rable d'utiliser la deuxi√®me option dans un environnement de production.  Ainsi, le bot n'aura pas besoin de frapper sur le serveur Telegram, √† la place, il recevra lui-m√™me toutes les mises √† jour. <br><br>  <b>Important: Une</b> condition pr√©alable pour les Webhooks est la prise en charge du serveur SSL / TLS.  Assurez-vous √©galement que le port sur lequel Webhook s'ex√©cute est ouvert et accessible de l'ext√©rieur. </li><li>  <b>Balisage</b> - avec cette classe, vous pouvez apprendre au bot √† r√©pondre en balisage / balisage.  Ceci est important si, par exemple, vous cr√©ez un jeu HTML.  Cependant, dans mon projet, je ne l'ai utilis√© que pour le texte en gras / italique. </li><li>  <b>Stage</b> est un module extr√™mement int√©ressant qui m'a aid√© √† garder mes nerfs et quelques heures de d√©veloppement.  Ici, je vais dire plus en d√©tail. <br>  Le bot peut √©couter les messages de l'utilisateur et, selon le type ou le contenu du message, le rediriger vers l'un ou l'autre contr√¥leur, qui remplira sa fonction et enverra une r√©ponse √† l'utilisateur.  Cela ressemble √† ceci: <br><br><pre><code class="javascript hljs">bot.hears(<span class="hljs-string"><span class="hljs-string">'hello'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> ctx =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ctx.reply(<span class="hljs-string"><span class="hljs-string">'Hello!'</span></span>); });</code> </pre> <br>  Cela fonctionne simplement: si vous √©crivez bonjour au bot, il r√©pondra simplement bonjour!  Connaissant cet aspect du travail, essayons d'imaginer comment le bot peut fonctionner pour rechercher des films: <br><br><ol><li>  L'utilisateur √©crit qu'il veut aller √† la recherche de films; </li><li>  L'utilisateur pilote le nom du film; </li><li>  Le bot retourne une liste de films et invite l'utilisateur √† enregistrer le film s√©lectionn√© dans sa biblioth√®que; </li><li>  ... </li></ol><br>  Attention, une question!  Comment un bot peut-il distinguer quand un utilisateur lui √©crit qu'il veut commencer √† chercher un film et quand il √©crit le nom du film √† rechercher? <br><br>  <i>Oui, vous pouvez prendre n'importe quel texte envoy√© comme nom du film, mais nous voulons faire du bot avec <s>blackjack et hookers une</s> bonne interface.</i> <br><br>  Et ici, les sc√®nes (√©tapes) entrent en jeu!  Il sera plus facile √† dire par l'exemple ci-dessus.  Lorsque l'utilisateur dit vouloir aller √† la recherche de films, nous lan√ßons la sc√®ne.  √Ä l'int√©rieur de cette sc√®ne, il existe des gestionnaires de texte distincts - bot.hears (...).  Ainsi, tous les messages ult√©rieurs seront directement li√©s √† la recherche de films jusqu'√† ce que l'utilisateur √©crive un message pour quitter et quitter la sc√®ne.  Apr√®s cela, les gestionnaires √† l'int√©rieur de cette sc√®ne sont d√©sactiv√©s jusqu'√† ce que l'utilisateur y revienne.  Je d√©crirai ensuite comment j'ai utilis√© les sc√®nes pour rendre la gestion des √©v√©nements aussi simple que possible. <br></li></ul><br><a name="structure"></a><br><h3>  Structure du projet </h3><br>  On soup√ßonne que l'article se r√©v√©lera assez volumineux et, par cons√©quent, afin de ne pas l'√©tirer encore plus, j'oublierai certains points.  Par exemple, pour que le bot commence √† fonctionner, vous devez commencer par obtenir le jeton d'API Telegram Bot.  Vous pouvez lire comment proc√©der dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> officielle de Telegram ou dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> de Telegraf.js. <br><br>  La structure des fichiers du projet est la suivante: <br><br><div class="spoiler">  <b class="spoiler_title">Structure du projet</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/44/ps/n8/44psn8gqdploz320kpoh0yzmwxg.png"><br></div></div><br>  Cela fonctionne comme suit: <br><br><ul><li>  <b>src / controllers</b> - ce sont les sc√®nes m√™mes sur lesquelles il a √©t√© √©crit ci-dessus.  Dans ce projet, chaque sc√®ne est un contr√¥leur distinct qui traite les requ√™tes correspondantes. </li><li>  <b>src / locales</b> - traductions pour diff√©rentes langues.  Telegraf.js facilite l'ajout de localisation au bot √† l'aide de middlewares. </li><li>  <b>src / models</b> - mod√®les pour MongoDB. </li><li>  <b>src / types</b> - tippings pour TypeScript.  Malheureusement, toutes les biblioth√®ques utilis√©es dans le projet n'ont pas de synchronisation par d√©faut. </li><li>  <b>src / util</b> - diverses fonctions d'aide qui sont utilis√©es dans diff√©rentes parties du projet.  Ici, vous pouvez voir comment fonctionne la disponibilit√© du film pour le t√©l√©chargement, la gestion des sessions, la cr√©ation de claviers, les gestionnaires d'erreurs et bien plus encore. </li><li>  <b>src / bot.ts</b> - le fichier principal o√π se fait toute la pr√©paration et le lancement du bot. </li><li>  <b>src / telegram.ts</b> - dans ce cas, nous cr√©ons un objet de la classe Telegram √† partir de la biblioth√®que Telegraf.js.  En utilisant cet objet, nous pouvons d'abord envoyer des messages aux utilisateurs, en utilisant leur ID, et ne pas attendre qu'ils √©crivent quelque chose.  Par exemple, dans ce projet, nous envoyons √† l'utilisateur un message indiquant que le film qu'il suivait peut d√©j√† √™tre t√©l√©charg√©.  Bien s√ªr, cet objet offre beaucoup plus de fonctionnalit√©s. </li><li>  <b>Tout le reste</b> est des configurations pour diff√©rentes parties du projet qui ne seront pas discut√©es dans cet article. </li></ul><br><a name="start"></a><h3>  Initialisation et lancement </h3><br>  Lorsque nous avons compris la structure du projet, voyons comment le bot d√©marre r√©ellement.  Encore une fois, afin de raccourcir l'article, je n'ins√©rerai pas l'int√©gralit√© du code ici, mais je ne parlerai que des principaux moments, √† mon avis,.  Vous pouvez voir le code complet dans le r√©f√©rentiel, un lien vers lequel est disponible √† la fin de l'article. <br><br>  Tout commence par la connexion √† la base de donn√©es, qui stocke des informations sur les utilisateurs et les films qu'ils suivent.  Apr√®s une connexion r√©ussie, nous enregistrons toutes les sc√®nes utilis√©es dans le projet, d√©finissons les param√®tres de localisation et ajoutons plusieurs middlewares - sessions de traitement, localisation, configuration de sc√®nes, ainsi que plusieurs des n√¥tres.  L'un d'eux, par exemple, re√ßoit toutes les informations sur l'utilisateur conform√©ment √† son ID et les ajoute au contexte utilis√© dans les contr√¥leurs.  Enfin, apr√®s toutes les pr√©parations de base, nous lan√ßons le bot en mode d√©veloppement (polling long) ou production (Webhooks). <br><br>  <b>Important:</b> si vous utilisez diff√©rentes m√©thodes pour recevoir des mises √† jour (interrogation longue et Webhooks), puis lors du d√©marrage du bot en mode interrogation longue, supprimez d'abord le Webhook d'√©coute √† l'aide de la demande GET sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">api.telegram.org/botYOUR_TOKEN/deleteWebhook</a> .  Sinon, le bot risque de ne pas fonctionner correctement. <br><a name="userinput"></a><br><h3>  G√©rer l'entr√©e utilisateur </h3><br>  Hourra!  Le bot fonctionne, est connect√© √† la base de donn√©es et est pr√™t √† recevoir des messages des utilisateurs.  Mais comment le faire correctement? <br><br>  Tout d'abord, il sera pratique pour les utilisateurs d'utiliser le clavier Telegram int√©gr√©.  En fait, lorsque vous cliquez sur les boutons de ce clavier, des messages sont envoy√©s avec le contenu de ces boutons.  Ensuite, nous ajoutons simplement des gestionnaires pour ce texte et effectuons certaines actions. <br><br>  Le fichier <a href="">bot.ts contient de</a> tels gestionnaires.  √âtant donn√© que le bot prend en charge deux langues, les boutons peuvent √©galement contenir du texte diff√©rent - en russe et en anglais.  Telegraf-i18n a une fonction de correspondance qui peut g√©rer le fait de cliquer sur le m√™me bouton avec diff√©rentes langues. <br><br>  La plupart des gestionnaires de bot.ts remplissent une seule fonction - ils lancent l'utilisateur dans la sc√®ne correspondante.  Nous avons donc plusieurs sections - recherche de films, ma collection, les param√®tres et les contacts.  Chaque section a sa propre sc√®ne et son propre bouton, lorsque vous cliquez dessus, l'utilisateur se d√©place vers la sc√®ne correspondante. <br><br>  <b>Important:</b> assurez-vous d'ajouter un gestionnaire qui lib√©rera l'utilisateur de la sc√®ne, sinon il risque d'y rester pour toujours!  Il sera √©galement utile de faire une commande g√©n√©rale (/ saveme est utilis√©e dans le bot), qui sera ajout√©e √† chaque sc√®ne et au fichier principal.  Cette commande servira de sortie de n'importe quelle sc√®ne, ainsi que de r√©initialiser les param√®tres utilisateur. <br><br>  Et maintenant, l'utilisateur veut aller √† la recherche de films.  En cliquant sur le bouton appropri√©, nous le d√©pla√ßons vers la sc√®ne de recherche.  Pour plus de commodit√©, chaque sc√®ne a son propre dossier avec des fichiers, chacun remplissant une fonction sp√©cifique. <br><br>  √Ä l'int√©rieur de la sc√®ne, vous pouvez utiliser vos middlewares, qui se trouvent dans le fichier middlewares.ts.  Par exemple, en utilisant un middleware dans la sc√®ne de recherche, nous pouvons simplement transf√©rer toutes les informations sur le film dans les m√©thodes appropri√©es, plut√¥t que d'ex√©cuter la m√™me fonction √† chaque fois √† l'int√©rieur. <br><br>  Telegram poss√®de √©galement un clavier en ligne.  Vous avez peut-√™tre rencontr√© des messages avec des votes, sous lesquels se trouvent plusieurs boutons translucides, et lorsque vous cliquez sur l'un d'eux, le nombre de votes change.  Ces boutons sont le clavier en ligne <br><br><div class="spoiler">  <b class="spoiler_title">Voil√† √† quoi √ßa ressemble √† Eve</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gz/sn/-n/gzsn-nvolazzilaylnhy-ugacny.png"><br></div></div><br>  Chaque bouton contient des informations, lorsque vous cliquez sur le bouton, elles seront transmises au gestionnaire correspondant.  <b>La taille des informations transmises ne doit pas d√©passer 64 octets!</b>  Pour apprendre au bot √† √©couter les clics sur les boutons, nous devons les enregistrer √† l'aide de bot.action (/ trigger /, callback).  Le premier param√®tre contient toutes les donn√©es li√©es au bouton.  J'ai d√©cid√© d'utiliser quelque chose comme Actions de Redux, o√π un objet de la forme {a: actionName, p: payload} est attach√© √† chaque bouton.  Lors de l'enregistrement des √©couteurs, nous pouvons utiliser un simple RegExp, par exemple: bot.action (/ actionName /, callBack).  Tous les gestionnaires du clavier int√©gr√© se trouvent dans les fichiers actions.ts. <br><br>  De plus, dans certaines sc√®nes, il y a des fichiers helpers.ts, qui contiennent de petites fonctions prises l√†-bas afin de d√©charger les fichiers restants.  Pour la plupart, il existe des g√©n√©rateurs de clavier pour diverses actions de l'utilisateur. <br><a name="localization"></a><br><h3>  Localisation </h3><br>  Puisqu'il s'agit d'un sujet important, je pense qu'il vaut la peine d'√™tre mentionn√© s√©par√©ment.  Comme je l'ai dit plus t√¥t, Telegraf.js contient un assez grand nombre de middlewares, dont l'un est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">telegraf-i18n</a> .  Le r√©f√©rentiel contient des instructions d√©taill√©es et je n'ai eu aucun probl√®me particulier avec cela, mais n√©anmoins j'ajouterai quelques mots sur la fa√ßon dont cela fonctionne dans ce projet. <br><br>  Il existe un dossier de param√®tres r√©gionaux dans lequel se trouvent les fichiers de localisation, qui sont un objet JSON de la forme {"cl√©": "traduction"}.  De plus, partout o√π nous devons utiliser diff√©rentes langues, nous utilisons la m√©thode de cette biblioth√®que, o√π nous transf√©rons la traduction dont nous avons besoin par cl√©, et √† la sortie, nous obtenons la traduction correspondante.  Une session peut √™tre utilis√©e pour stocker des informations sur la langue s√©lectionn√©e par l'utilisateur.  Il convient √©galement de mentionner √† nouveau les boutons.  Il existe une fonction de correspondance dans la m√™me biblioth√®que, donc si le texte sur le bouton change en fonction de la langue, cette fonction vous aidera √† suspendre l'auditeur appropri√©. <br><br>  <b>Important:</b> si vous allez utiliser la localisation et √©crire un bot en TypeScript, n'oubliez pas d'ajouter le dossier de traduction √† tsconfig.json, sinon le code ne sera pas compil√©.  Par exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"include"</span></span>: [<span class="hljs-string"><span class="hljs-string">"src/locales/*.json"</span></span>]</code> </pre> <br><a name="conclusion"></a><h3>  Conclusion </h3><br>  Merci d'avoir lu jusqu'au bout!  Dans cet article, j'ai essay√© de d√©crire le processus de cr√©ation d'un bot Telegram dans son ensemble aussi d√©taill√© que possible, sans attachement fort √† mon projet.  J'esp√®re qu'apr√®s avoir lu cet article et √©tudi√© le code source d'Eve, vous pourrez facilement cr√©er un bot qui pourra vous aider. <br><br>  Comme promis, vous pouvez consulter le code source sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> et essayer Eve en action <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Je serai extr√™mement reconnaissant pour toute critique et suggestion d'am√©lioration. <br><br>  Je voudrais √©galement noter la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">section</a> dans la documentation Telegraf.js avec des projets open source int√©ressants que vous pouvez regarder et vous inspirer de l'architecture et des solutions.  √Ä mon tour, je veux mentionner l'un d'eux - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">The Guard Bot</a> .  Un bot vraiment grand et bien fait, d'o√π j'ai emprunt√© certaines des solutions pour mon d√©veloppement. <br><br>  Et pour le moment j'ai dit tout ce que je voulais, je serai heureux de r√©pondre √† vos questions, suggestions et commentaires! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443876/">https://habr.com/ru/post/fr443876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443862/index.html">Les serrures de voiture du procureur. Bestchange est de nouveau verrouill√©</a></li>
<li><a href="../fr443868/index.html">En tant que programmeur, je suis all√© au gymnase, et ce qui en est sorti</a></li>
<li><a href="../fr443870/index.html">Unity: √©dition de maillage proc√©dural</a></li>
<li><a href="../fr443872/index.html">Pr√©sentation des nouvelles fonctionnalit√©s de nanoCAD SPDS Steelwork version 1.2</a></li>
<li><a href="../fr443874/index.html">Comparaison des frameworks d'apprentissage en profondeur: TensorFlow, PyTorch, Keras, MXNet, Microsoft Cognitive Toolkit, Caffe, etc.</a></li>
<li><a href="../fr443878/index.html">DEV Labs 2019. Python pour r√©soudre des t√¢ches non triviales. Mitap en ligne</a></li>
<li><a href="../fr443882/index.html">MOSDROID # 15 Phosphorus: vid√©o de performance</a></li>
<li><a href="../fr443884/index.html">3 qualit√©s cl√©s d'un chef de produit performant: Anton Danilov</a></li>
<li><a href="../fr443886/index.html">R√©soudre une t√¢che √† partir d'une interview Google sur JavaScript: 4 fa√ßons diff√©rentes</a></li>
<li><a href="../fr443894/index.html">Le quatri√®me niveau du multi-univers de Max Tegmark</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>