<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‚ ğŸ‘¨ğŸ¾â€ğŸŒ¾ ğŸš Ketel WiFi di rumah, atau cara membuat ketel biasa benar-benar pintar ğŸ… ğŸ‚ ğŸ•¹ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata Pengantar
 
 Jika Anda membaca artikel saya sebelumnya ( Running line on Arduino ), maka Anda mungkin sudah tahu bahwa kami memiliki kesempatan u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ketel WiFi di rumah, atau cara membuat ketel biasa benar-benar pintar</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/393785/"><img src="https://habrastorage.org/files/13e/789/ac5/13e789ac5ab64c99bb2243540c6188bc.jpg" alt="gambar"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kata Pengantar</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda membaca artikel saya sebelumnya ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Running line on Arduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), maka Anda mungkin sudah tahu bahwa kami memiliki kesempatan untuk melakukan proyek kursus perangkat keras di universitas kami. </font><font style="vertical-align: inherit;">Dan saya, terinspirasi oleh pekerjaan saya sebelumnya, memutuskan untuk mencoba lagi melakukan sesuatu dengan tangan saya sendiri. </font><font style="vertical-align: inherit;">Hanya sekarang topiknya seharusnya lebih serius. </font><font style="vertical-align: inherit;">Ngomong-ngomong, saya mulai berpikir tentang apa yang harus dilakukan selama liburan musim dingin, yaitu sebelum semester. </font><font style="vertical-align: inherit;">Saya ingin melakukan sesuatu yang menarik dan bermanfaat sekaligus.</font></font><br>
<br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cari ide</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suatu kali, berpasangan dengan Fundamentals of Information Protection, kami memiliki topik yang berkaitan dengan kekayaan intelektual dan paten. Guru memberi kami tugas untuk mengeluarkan paten untuk perangkat apa pun sesuai dengan semua persyaratan dan menyebutkan ketel wifi sebagai contoh. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia berkata - dan lupa. Dan semua orang lupa, tetapi di kepala saya topik ini tetap ada. Dan ketika tiba saatnya untuk memikirkan apa yang harus dilakukan sebagai tugas kuliah di semester berikutnya, saya ingat tentang teko ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal pertama yang saya putuskan untuk dilihat adalah apa yang sudah dilakukan. Dan apa yang mengejutkan saya ketika saya melihat bahwa hanya ada tiga model boneka dengan dukungan kontrol WiFi yang dijual, dan kemudian dua dari mereka milik perusahaan yang sama. Ini adalah Smarter iKettle 1.0 dan 2.0 dan Russian Polaris PWK 1792CGL.</font></font><br>
<br>
<img src="https://psv4.vk.me/c615220/u9412861/docs/0ad68e7b3b82/imgonline-com-ua-twotoonefP6QyHRwpyGH.jpg?extra=DYIN0iLJbtamO0yymkG01568IjGjd-b5TPTlrxOGOg9GKUkRFG9qAbzX7whoNtLphkadbiiUq9AIz1X7jxfJ5trWX89OM_uDNpnwCw7j1tyXwPGFSsnL" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sangat menarik bahwa hampir setiap rumah memiliki ketel listrik biasa, dan ada beberapa yang pintar. </font><font style="vertical-align: inherit;">Membandingkan fitur yang ditawarkan oleh iKettle dan Polaris, saya membuat daftar yang paling penting. </font><font style="vertical-align: inherit;">Inilah yang terjadi:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menghidupkan / mematikan dari smartphone;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengaturan suhu apa pun untuk air pemanas;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kemampuan untuk mengetahui suhu saat ini;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">melacak volume air saat ini dalam ketel;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peringatan dan perlindungan terhadap pengaktifan dengan volume air yang kecil;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengatur waktu bangun otomatis;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemberitahuan kesiapan;</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampaknya terlihat nyata, saatnya turun ke bisnis.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cari komponen yang diperlukan</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena tidak mungkin membuat ketel yang sama sekali baru, diputuskan untuk memodifikasi ketel listrik biasa yang sudah jadi. Tepat di rumah ada ketel yatim dengan sakelar yang rusak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, fondasinya sudah ada di sana, pikirku. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang saya harus mulai mencari komponen untuk perangkat keras. Karena sudah ada sedikit pengalaman bekerja dengan Arduino, saya memutuskan untuk mengimplementasikan semuanya. Selain itu, Arduin sendiri dan modul untuk itu tidak mahal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena saya harus memasukkan seluruh bagian kendali ketel ke dalam ketel, pilihan jatuh pada Arduino Nano. Ini kecil dan memiliki antarmuka untuk menghubungkan kabel, tidak seperti Pro Mini, yang harus di-flash melalui UART.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/bd1/d8a/273/bd1d8a273b5189fb42cdd0834246dbc4.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komponen utama ketel wifi tentu saja adalah modul wifi. Mencari di Internet untuk sesuatu yang terjangkau dan banyak tutorial, berlari ke ESP8266. Yaitu, pada versi 01. Saya melihat itu murah (sekitar $ 2) dan ada banyak instruksi untuk menghubungkan. Berhenti di situ. Sedangkan untuk modul itu sendiri, frasa di sini bagus: murah dan ceria. Tetapi lebih lanjut tentang itu nanti. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/a39/db0/0e5/a39db00e5e05bc51f4c727c9b75ee18a.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengontrol suhu, kami membutuhkan semacam sensor suhu tahan air. Saya menemukan termistor tahan air NTC di aliexpress, yang dapat menahan suhu lebih dari 100 derajat. Saya juga menemukan contoh bekerja dengannya, jadi di sini saya segera memutuskan.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/205/649/1b9/2056491b9c4e3906446017711d069826.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu perlu untuk memutuskan bagaimana mengaktifkan ketel pada titik waktu tertentu, tentu saja, Anda bisa membuat jam program pada Arduino dan menghidupkan ketel ketika waktu bertepatan, tetapi ini akan bekerja tidak stabil, dan jika program diatur ulang secara tidak sengaja, semuanya akan salah. Oleh karena itu, jam waktu nyata datang untuk menyelamatkan di sini. Yaitu DS1307. Mereka memiliki kekuatan independen (dari baterai 3 V), dan ada juga chip memori EEPROM 32K bit pada modul yang saya hentikan, yang saya gunakan untuk menghemat waktu. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/f8b/6d4/3e1/f8b6d43e1e1ddcf1ab573ad49bec80f3.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh ya, karena ketel sekarang harus dihidupkan secara pemrograman, itu juga membutuhkan relay 1-saluran. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/be1/f74/46d/be1f7446d29e3cdcc3a226860e31d01d.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sedangkan untuk sensor level cair, itu harus dilakukan secara manual. Detail di bawah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari yang lain, beberapa resistor dari denominasi yang berbeda masih diperlukan, papan tempat memotong roti untuk tes, papan sirkuit untuk instalasi sebenarnya, kabel, besi solder dengan fluks dan solder, dan bagian terbesar dari kesabaran.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengembangan dimulai</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena proyek ini adalah ketel wifi, hal pertama yang saya inginkan dan perlu untuk berurusan dengan modul wifi. </font><font style="vertical-align: inherit;">Begitu bungkusan itu tiba, saya langsung membongkar dan mulai menghubungkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menemukan banyak contoh di Internet. </font><font style="vertical-align: inherit;">Semuanya sebagaimana mestinya, regulator tegangan 3,3 V, pembagi tegangan untuk RX dan TX. </font><font style="vertical-align: inherit;">Saya mengumpulkan semuanya dengan contoh, saya menghubungkannya - itu tidak terbang! </font><font style="vertical-align: inherit;">Banyak teks ditampilkan di monitor port COM, ternyata, modul itu terus direset. </font><font style="vertical-align: inherit;">Itu tidak menanggapi perintah AT yang dikirim. </font><font style="vertical-align: inherit;">Penulis artikelnya berfungsi, saya tidak.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada apa? Saya mencoba mencari skema koneksi lain, dan seterusnya, dan seterusnya, tetapi modul masih baik reset atau tidak menampilkan apa pun. Dan di mana-mana tertulis dalam font merah: "Jangan diterapkan pada modul 5 V, jika tidak maka akan gagal." Jadi mencari solusi kadang-kadang berlangsung di malam hari, saya sudah berpikir untuk membeli modul lain, tetapi memutuskan untuk memeriksa tegangan dengan multimeter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata ketika modul terhubung ke 3,3 V, tegangan turun di bawah 3,2 V. Tampaknya, well, oke, itu jatuh dan jatuh. Saya memutuskan untuk menyalakannya dari sumber listrik lain dan ternyata modul bekerja normal dengan tegangan di atasnya 3,2 V, dan di bawahnya tidak cukup dan terus-menerus diatur ulang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, dengan risiko dan risiko saya sendiri, saya menghubungkannya ke 5 V dan semuanya bekerja dan masih berfungsi dengan baik. </font></font><br>
<br>
<img src="https://habrastorage.org/files/d5d/17e/780/d5d17e7804c34c46a595c059100295e1.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada masalah dengan komponen lain.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah saya menemukan wifi, saya harus memutuskan apa yang harus dilakukan dengan sensor level cairan. Googling, saya menemukan sebuah artikel di mana penulis membuat sensor kelembaban tanah. Ketika tanah mengering, resistansi sensor meningkat dan tegangan di port analog Arduino meningkat. Dengan mendeteksi perubahan tegangan, penampilan cairan dapat dideteksi. Alih-alih dua kontak, 6 digunakan untuk menentukan tingkat cairan dalam proyek saya.Salah satunya terhubung ke output 5 V, dan sisanya ke input analog dan 10 kÎ© resistor ke GND. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut foto-foto tes. </font></font><br>
<br>
<img src="https://habrastorage.org/files/43c/536/5fd/43c5365fd8464326bf5b4eee5bfbe806.jpg"><br>
<img src="https://habrastorage.org/files/c99/d28/fee/c99d28fee740489a9b3893e4f9fdd418.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah sensor level apa hasilnya.</font></font><br>
<br>
<img src="https://habrastorage.org/files/b1e/2bb/10d/b1e2bb10db5f4e7ea647a746bc7e039c.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal berikutnya yang saya uji adalah jam waktu nyata. </font><font style="vertical-align: inherit;">Tetapi bekerja dengan mereka pada dasarnya sederhana. </font><font style="vertical-align: inherit;">Untuk mengatur waktu dan mendapatkan informasi tentang itu, saya menggunakan contoh eksklusif yang datang dengan perpustakaan untuk bekerja dengan DS1307. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasilnya, ketika semuanya dipasang di atas papan tempat memotong roti, kami mendapatkan persilangan antara kabel dan modul. </font><font style="vertical-align: inherit;">Omong-omong, di foto-foto ini ada sensor suhu lain.</font></font><br>
<br>
<img src="https://habrastorage.org/files/2f9/74d/288/2f974d288e8b43b0ab3612641a985f0e.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memulai</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang semua ini harus disolder di papan sirkuit. </font><font style="vertical-align: inherit;">Tidak ada yang istimewa untuk dikomentari, jadi hanya ada foto. </font><font style="vertical-align: inherit;">Seperti yang Anda lihat, tombol lain ditambahkan sehingga Anda dapat menghidupkan ketel tidak hanya dari smartphone, tetapi juga dengan cara biasa. </font></font><br>
<br>
<img src="https://habrastorage.org/files/98a/ad1/920/98aad19203204e46a644e52c9f905af0.jpg"><br>
<img src="https://habrastorage.org/files/995/592/45e/99559245edb048699172208c2584b689.jpg"><br>
<img src="https://habrastorage.org/files/2dd/594/23c/2dd59423cb0a447295593b52da781dd5.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, Anda harus meletakkan segala sesuatu di dalam ketel. </font></font><br>
<br>
<img src="https://habrastorage.org/files/9cb/50e/bf8/9cb50ebf8d05486babe76682ce68fddf.jpg"><br>
<img src="https://habrastorage.org/files/39d/b11/53b/39db1153b86c4592862b1b2f66531252.jpg"><br>
<img src="https://habrastorage.org/files/605/7db/1e6/6057db1e6ead493c81d399e164b399d4.jpg"><br>
<img src="https://habrastorage.org/files/853/6fc/00e/8536fc00ead6460ab5e581029bbdaf64.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sisipan asbes ditambahkan untuk melindungi semua bagian dalam dari panas berlebih. </font></font><br>
<br>
<img src="https://habrastorage.org/files/027/99a/f36/02799af362264b6682b3355bae815b9c.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Benar, case harus sedikit dinaikkan dengan insert plastik tambahan.</font></font><br>
<br>
<img src="https://habrastorage.org/files/ec3/06e/ab8/ec306eab83114666a94c62b33f9ce6f2.jpg"><br>
<img src="https://habrastorage.org/files/836/47b/9ac/83647b9ac23a43c7bd39ec57c4b2807c.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang, masuklah ke bagian seluler.</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adapun aplikasi, karena dikembangkan di bawah OS Android, pada awalnya direncanakan untuk menggunakan Android Studio. Tetapi untuk mempelajari teknologi baru, diputuskan untuk menggunakan platform yang siap pakai untuk mengembangkan program di bidang Internet hal. Akibatnya, pilihan jatuh pada produk Evothings - Evothings Studio. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/74f/e14/7b1/74fe147b1a99d6a7fd6dd0b6a01ac2a2.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut ini keunggulan utamanya: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Sejumlah besar contoh standar untuk bekerja dengan berbagai modul (Wifi, Bluetooth); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - pengembangan aplikasi menggunakan JS, HTML, CSS, yang memungkinkan Anda untuk menulis satu kode yang akan berfungsi sama di Android dan iOS, mis. mengikat hanya pada satu platform menghilang;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - kemudahan menguji aplikasi: aplikasi diinstal pada smartphone untuk melihat perkembangannya, dan semua pesan pengujian dan pesan kesalahan ditampilkan dalam program di komputer; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Sejumlah besar informasi di Internet tentang pengembangan menggunakan JS, HTML, CSS; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di Evothings Studio ini ada contoh menyalakan LED dengan mengirimkan permintaan menghidupkan melalui ESP8266. Saya memutuskan untuk mengambil contoh ini sebagai dasar, karena ada hal yang paling berharga bagi saya - komunikasi dengan modul WiFi melalui soket tcp. Dan serupa dengan bagaimana permintaan untuk menyalakan LED ditransmisikan, saya membuat permintaan untuk memperbarui sensor ketel, untuk mengatur waktu, mengatur suhu, dll.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lalu saya mengacaukan pemberitahuan tentang kesiapan dan sedikit air, manfaatnya adalah bahwa segala sesuatu di zaman kita mudah di-Google. </font><font style="vertical-align: inherit;">Hasilnya adalah aplikasi seperti itu (yang menyenangkan adalah melakukan antarmuka aplikasi menggunakan CSS):</font></font><br>
<br>
<img src="https://habrastorage.org/files/0b9/985/b2d/0b9985b2d0fb4c97bb36d4ebeb772ab6.jpg"><br>
<img src="https://habrastorage.org/files/431/aaa/445/431aaa44557d42de996527f587d8691f.jpg"><br>
<img src="https://habrastorage.org/files/e3a/f8d/fb1/e3af8dfb13764be2b2b9e9acbad28769.jpg"><br>
<img src="https://habrastorage.org/files/9c0/db4/c6e/9c0db4c6e1b44b0f86f725b5e75a265a.jpg"><br>
<img src="https://habrastorage.org/files/80a/7ff/90f/80a7ff90f43b46e197fdfc3594297e1a.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deskripsi singkat tentang interaksi ponsel cerdas dan ketel</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komunikasi antara server dan klien dilakukan menggunakan modul WiFi. Ketika Anda menghidupkan modul kontrol ketel, modul WiFi mulai mendistribusikan jaringan yang disebut artKettle. Ini dilakukan dengan menggunakan perintah AT di sisi server. Jadi, misalnya, untuk menempatkan modul ke mode titik akses, perlu mengirim perintah AT + CWMODE = 2. Selanjutnya, menggunakan perintah ini, Anda perlu menetapkan parameter jaringan, mengizinkan koneksi beberapa perangkat dan mendapatkan alamat ip wifi itu sendiri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari sisi klien, koneksi melalui port tertentu dan dengan alamat ip modul wifi menggunakan chrome.tcp.socket. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah menghubungkan klien ke server, Anda dapat mengontrol ketel dari ponsel cerdas Anda. Perhatikan contoh menyalakan ketel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika Anda mengklik tombol daya di aplikasi artKettle, fungsi yang sesuai dari dimasukkannya app.kettleOn () dipanggil. </font><font style="vertical-align: inherit;">Di dalam fungsi ini, dua baris ditransfer ke sisi server:</font></font><br>
<br>
<pre><code class="cpp hljs">app.sendString(<span class="hljs-string"><span class="hljs-string">'H'</span></span>);<font></font>
app.sendString(<span class="hljs-string"><span class="hljs-string">'U'</span></span>);
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya adalah pekerjaan yang sudah ada di pihak Arduino. </font><font style="vertical-align: inherit;">Setelah baris pertama tiba dengan karakter 'H', kode berikut dijalankan:</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(message.indexOf(<span class="hljs-string"><span class="hljs-string">"H"</span></span>) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; waterDetected())  {<font></font>
      digitalWrite(POWER_PIN, LOW); <font></font>
      IS_ON = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;<font></font>
      Serial.println(<span class="hljs-string"><span class="hljs-string">"ON"</span></span>);<font></font>
      sendCIPData(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"ON"</span></span>); <font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, ia memeriksa untuk melihat apakah ada air dalam ketel dengan memanggil metode waterDetected (). </font><font style="vertical-align: inherit;">Pertimbangkan pilihan saat air hadir dalam ketel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Level tegangan rendah diterapkan pada pin kontrol relai, yang sesuai dengan inklusi, yaitu. </font><font style="vertical-align: inherit;">sirkuit daya ditutup:</font></font><br>
<pre><code class="cpp hljs">digitalWrite(POWER_PIN, LOW); 
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian bendera diatur untuk menunjukkan bahwa ketel aktif, dan sebuah pesan pada output ke monitor port serial ditampilkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, sebuah fungsi dipanggil yang mentransmisikan pesan respon ke sisi klien bahwa seluruh inklusi berhasil:</font></font><br>
<br>
<pre><code class="cpp hljs">sendCIPData(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"ON"</span></span>);
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sisi klien, setelah memeriksa pesan yang masuk, tombol daya diatur ke status Nyala:</font></font><br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buf.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) == <span class="hljs-string"><span class="hljs-string">"ON"</span></span>) {<font></font>
	app.setButtonOn();<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, pesan teks diproses dengan karakter 'U' yang dikirim dari klien ke server. </font><font style="vertical-align: inherit;">Di sini, dengan cara yang mirip dengan inklusi, informasi tentang suhu saat ini dan volume cairan dalam ketel diperbarui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, komunikasi dua arah antara klien dan server diatur, sehingga salah satu dari mereka tahu tentang keadaan yang lain pada waktu tertentu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasil dari proyek pelatihan, sebuah modifikasi dikembangkan untuk ketel listrik konvensional, yang memungkinkan pengontrolan dari smartphone melalui wifi. Sekarang teko ini dapat dikaitkan dengan perwakilan dari Internet hal. Kami berhasil sepenuhnya mengimplementasikan semua fungsi, jadi sekarang ketel ini memiliki fitur berikut: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - hidup / mati dari telepon pintar; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - pengaturan suhu apa pun untuk air pemanas; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - kemampuan untuk mengetahui suhu saat ini; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Melacak volume air saat ini dalam ketel; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - peringatan dan perlindungan terhadap pengaktifan dengan volume air yang kecil; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - mengatur waktu untuk menghidupkan; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - pemberitahuan kesiapan;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kelebihan dari proyek yang diimplementasikan adalah aksesibilitas dari elemen dasar, karena semua yang Anda butuhkan dapat ditemukan di toko komponen elektronik, perpanjangan proyek. Karena ketel memiliki semua sensor yang diperlukan terpasang, ketel dapat dimodifikasi secara pemrograman dan dibuat tidak lebih buruk dari analog. Mengingat fleksibilitas dari modul wifi yang digunakan, Anda dapat menghubungkannya ke Internet dan mengatur kontrol ketel, berada di mana saja di dunia, dan menggunakan layanan online untuk memproses pesan SMS, Anda dapat mengatur inklusi melalui SMS. Yaitu proyek masih sangat diperluas, ada peluang untuk ini, tetapi mereka tidak dilaksanakan, karena mereka bukan bagian dari tujuan proyek yang sedang dikembangkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, ada kerugian pada proyek. </font><font style="vertical-align: inherit;">Yang pertama adalah pengoperasian modul Wifi yang tidak stabil. </font><font style="vertical-align: inherit;">Modul terkadang kehilangan jaringannya, mulai mengatur ulang pengaturan, atau tidak memproses sinyal yang masuk. </font><font style="vertical-align: inherit;">Selain itu, ini adalah masalah yang populer di kalangan pengguna modul ini. </font><font style="vertical-align: inherit;">Kelemahan kedua adalah kurangnya shutdown mekanis ketel. </font><font style="vertical-align: inherit;">Shutdown diimplementasikan dalam perangkat lunak, ketika titik didih tercapai, sirkuit terputus dengan bantuan relay. </font><font style="vertical-align: inherit;">Jika program tiba-tiba macet, ketel tidak dapat dimatikan. </font><font style="vertical-align: inherit;">Kelemahan ketiga adalah masalah pemantauan suhu pemanasan. </font><font style="vertical-align: inherit;">Jadi, misalnya, jika Anda mematikan ketel pada suhu 60 derajat, pemanas sepuluh akan terus mengeluarkan panas, dan setelah beberapa saat suhu air sudah sekitar 70 derajat. </font><font style="vertical-align: inherit;">Tetapi ini diperbaiki dengan membuat penyesuaian pada program.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id393785/">https://habr.com/ru/post/id393785/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id393775/index.html">Lumba-lumba menemukan dasar-dasar komunikasi bahasa</a></li>
<li><a href="../id393777/index.html">Passage of Mercury on the Sun - foto dan video</a></li>
<li><a href="../id393779/index.html">UEA berencana membuat gunung buatan untuk meningkatkan curah hujan</a></li>
<li><a href="../id393781/index.html">Ilmuwan dari NUST "MISiS" membuktikan kegagalan teori klasik struktur Bumi</a></li>
<li><a href="../id393783/index.html">Basis gerhana matahari dan bulan dari -1999 hingga +3000 tahun</a></li>
<li><a href="../id393787/index.html">Cara memperbaiki reaktor nuklir</a></li>
<li><a href="../id393791/index.html">Kota Swiss diizinkan membayar tagihan utilitas dalam bitcoin</a></li>
<li><a href="../id393795/index.html">Karena pemanasan global, beberapa bagian dari Timur Tengah dan Afrika Utara akan menjadi tidak dapat dihuni</a></li>
<li><a href="../id393797/index.html">Pra-pemesanan untuk konsol game Pyra dimulai</a></li>
<li><a href="../id393799/index.html">Menggunakan Amazon Echo, pemilik Tesla menunjukkan betapa mudahnya mendapatkan mobil untuk meninggalkan garasi.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>