<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌🏽 👨‍👨‍👧‍👧 ♻️ Perpanjang Fungsi WDS: Tambahkan Kemampuan Unduhan ke UEFI ⚡️ 🚶 ♨️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! 


 Artikel ini menjelaskan langkah-langkah yang harus Anda ikuti untuk menambahkan opsi boot UEFI ke WDS Anda. 


 Yaitu instruksi dal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Perpanjang Fungsi WDS: Tambahkan Kemampuan Unduhan ke UEFI</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448476/"><p>  Halo semuanya! </p><br><p>  Artikel ini menjelaskan langkah-langkah yang harus Anda ikuti untuk menambahkan opsi boot UEFI ke WDS Anda. </p><br><p>  Yaitu  instruksi dalam artikel ini mengasumsikan bahwa Anda sudah memiliki sesuatu seperti konfigurasi berikut: </p><br><pre><code class="plaintext hljs">1. Windows Server 2012R2 ( ) 2.   DHCP    WDS 3.   WDS 4. IIS 5.      Ubuntu</code> </pre> <br><p>  Juga, di sini dijelaskan tindakan yang tidak memberi saya hasil yang tepat. <br>  <em>Saya menggambarkan mereka, untuk memudahkan pencarian dan menghemat waktu Anda.</em> </p><br><h2 id="predislovie">  Kata Pengantar </h2><br><p>  Entah bagaimana dibuat di tempat kerja WDS dengan banyak barang, karena  lelah terus-menerus berlarian dengan sekelompok flash drive dan menimpa mereka. </p><br><p>  Omong-omong, artikel-artikel ini membantu saya: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tambahkan WDS Fleksibilitas</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menu boot PXE dengan System Configuration Manager</a> </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Ini terlihat seperti ini</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ux/kh/ku/uxkhkuhqfxpjw4hmhdhcshmrmzw.png"></p></div></div><br><p>  Dan semuanya baik-baik saja, gambar baru ditambahkan untuk memuat, gambar winPE ditumbuhi dengan fitur baru dan semuanya berfungsi. </p><br><p>  Tetapi, tidak berarti semua perangkat mendukung mode boot BIOS / Legacy, atau jika mereka mendukungnya, penyertaannya dapat ditempatkan di tempat yang sangat tidak jelas. </p><br><p>  Dan menginstal windows dalam mode lawas, ketika dimungkinkan untuk menginstal di UEFI, tidak keren. </p><br><p>  Pada akhirnya, saya memutuskan untuk menambahkan kemampuan untuk mengunggah ke UEFI, dan pergi ke Google. </p><br><p>  Tapi saya masih belum menemukan informasi terstruktur tentang cara mendapatkan WDS + UEFI yang berfungsi. <br>  Sebenarnya, itu sebabnya saya memutuskan untuk menulis artikel ini. </p><br><p>  Sebelum memulai, saya akan menjelaskan masalah yang paling memakan waktu. </p><br><div class="spoiler">  <b class="spoiler_title">Saat menambahkan UEFI ke WDS, situasi berikut ini, agak tidak jelas, adalah mungkin:</b> <div class="spoiler_text"><p>  Jika Anda menambahkan file boot ke WDS dan ketika Anda mencoba untuk boot ke perangkat <br>  di UEFI Anda melihat teks berikut: <br> <code>The selected boot device failed. Press &lt;Enter&gt; to Continue.</code> <br>  Atau <code>Boot Device Not Found</code> <br>  Namun memuat dalam warisan berfungsi untuk Anda. <br>  Maka salah satu opsi yang mungkin adalah tidak adanya file <strong>wdsmgfw.efi</strong> , <br>  jalur berikut: <code>%WDSpath%\Boot\x64\wdsmgfw.efi</code> </p><br><p>  Anda dapat mengambilnya di sini: <code>C:\Windows\System32\RemInst\boot\x64\wdsmgfw.efi</code> <br>  Atau, jika karena alasan tertentu Anda tidak memiliki file ini, saya mempostingnya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">google</a> . <br>  Untuk keputusan ini, terima kasih kepada teman-teman dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">reddit</a> . </p><br><p>  Dengan masalah ini, saya membunuh paling banyak sejak itu  Saya pikir masalahnya ada di suatu tempat di konfigurasi WDS atau DHCP. </p><br><p>  Kebijakan yang dikonfigurasikan dengan menambahkan Kelas Vendor untuk berbagai arsitektur dan mengkonfigurasi opsi DHCP 060, 066, 067. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Petunjuk</a> untuk mengonfigurasi kebijakan DHCP. </p><br><div class="spoiler">  <b class="spoiler_title">Arsitektur ASCII untuk mengkonfigurasi DHCP</b> <div class="spoiler_text"><p>  PXEClient: Arch: 00000 - BIOS / Legacy <br>  PXEClient: Arch: 00006 - UEFI x86 <br>  PXEClient: Arch: 00007 - UEFI x64 </p></div></div><br><p>  Juga, saya mencoba berbagai opsi untuk file boot <code>.efi</code> </p><br><ul><li>  syslinux </li><li>  grub 2 </li></ul><br><p>  Saya juga mencoba mencari masalah di Log Acara. <br> <code>win + r -&gt; eventvwr -&gt;     -&gt; Microsoft -&gt; Windows -&gt; Deployment-Services-Diagnostics</code> </p> <br><p>  Tapi, seperti yang saya katakan di atas, masalahnya terletak pada file <strong>wdsmgfw.efi</strong> . <br>  Entah saya tidak sengaja menghapusnya sendiri, atau tidak menyalin selama instalasi <br>  dan mengkonfigurasi WDS. </p></div></div><br><p>  Baiklah, mari kita mulai! </p><br><h2 id="instrukciya">  Instruksi manual </h2><br><h4 id="etap-1---proverka-rabotosposobnosti-wds">  Tahap 1 - Pemeriksaan Kesehatan WDS </h4><br><p>  Ambil perangkat atau mesin virtual apa pun yang mendukung UEFI boot melalui jaringan dan coba boot. </p><br><p>  Anda harus memiliki gambar berikut: </p><br><p><img src="https://habrastorage.org/webt/6z/1s/gb/6z1sgbqwvnlt0dm4hxvoykknlck.png"></p><br><p>  Jika demikian, maka baiklah, Anda dapat melanjutkan. <br>  Jika tidak, lihat apa yang saya tulis di bagian pendahuluan. </p><br><h4 id="etap-2---sborka-zagruzochnogo-fayla-ipxe">  Langkah 2 - Bangun File Boot iPXE </h4><br><p>  Jalankan Ubuntu yang sudah disiapkan sebelumnya, buka terminal dan masukkan baris ini: </p><br><pre> <code class="plaintext hljs">git clone https://git.ipxe.org/ipxe.git ipxe</code> </pre> <br><p><img src="https://habrastorage.org/webt/xx/rm/3m/xxrm3m6uw_ljjlenptc4pxq9spw.png"></p><br><p>  <em>Di sini saya ingin membuat komentar kecil tentang fakta bahwa Anda mungkin harus menambahkan paket di Ubuntu yang diperlukan untuk mengkompilasi C dan C ++.</em> <em><br></em>  <em>Saya baru saja menginstalnya.</em> </p><br><p>  Diunduh?  - Hebat! <br>  Sekarang Anda perlu membuat file konfigurasi untuk perakitan. <br>  Di terminal, tulis: </p><br><pre> <code class="plaintext hljs">cd ipxe/src gedit chain.ipxe</code> </pre> <br><p>  Dan rekatkan ke file ini, kode berikut, lalu simpan: </p><br><pre> <code class="plaintext hljs">#!ipxe dhcp chain http://%IP-address-your-IIS-server%/install.ipxe</code> </pre> <br><p>  Kami kembali ke terminal dan memulai kompilasi: </p><br><pre> <code class="plaintext hljs">make bin-x86_64-efi/ipxe.efi EMBED=chain.ipxe</code> </pre> <br><p><img src="https://habrastorage.org/webt/dv/ur/nz/dvurnzemv1eroll_0udqysn4jhw.png"></p><br><p>  Jika semuanya beres, maka Anda harus mendapatkan output berikut di terminal: </p><br><p><img src="https://habrastorage.org/webt/kn/cf/is/kncfisuctq18hs9dewvpfwd4ovg.png"></p><br><p>  Dan file <strong>ipxe.efi</strong> , di sepanjang jalan: <code>ipxe/src/bin-x86_64-efi/ipxe.efi</code> <br>  <em>Jika karena alasan tertentu Anda tidak dapat mengkompilasi sendiri,</em> <em><br></em>  <em>Saya melampirkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">file</a> saya.</em> <em><br></em>  <em>Ini dikompilasi untuk diunduh dari <code>http://192.168.0.100/install.ipxe</code></em> </p><br><p>  Itu semua dengan Ubuntu. </p><br><h4 id="etap-3---dobavlenie-ipxeefi-k-wds">  Tahap 3 - Menambahkan ipxe.efi ke WDS </h4><br><p>  Kami mengambil file yang kami terima di tahap kedua dan menyalin di sepanjang jalan: <br> <code>%WDSpath%\Boot\x64\%your-boot-folder%\EFI\BOOT\</code> <br>  Setelah mengubah nama menjadi BOOTX64.EFI. <br>  <em>Itu tidak perlu, itu hanya lebih nyaman.</em> </p><br><p>  Kemudian jalankan <strong>cmd</strong> sebagai administrator, dan tuliskan perintah berikut: </p><br><pre> <code class="plaintext hljs">wdsutil /set-server /bootprogram:Boot\x64\%your-boot-folder%\EFI\BOOT\BOOTX 64.EFI /architecture:x64uefi  wdsutil /set-server /N12bootprogram:Boot\x64\%your-boot-folder%\EFI\BOOT\BOOTX 64.EFI /architecture:x64uefi</code> </pre> <br><p>  Ini akan menginstal file yang dihasilkan untuk diunduh melalui WDS. </p><br><p>  Periksa konfigurasi: </p><br><pre> <code class="plaintext hljs">wdsutil /get-server /Show:Config</code> </pre> <br><p><img src="https://habrastorage.org/webt/a_/70/mo/a_70mobbjq86x8tlyvyw7ywuht8.png"></p><br><p>  <em>Saya juga menyalin file ipxe.efi, menamainya menjadi BOOTIA32.EFI, dan mengkonfigurasi unduhan untuknya, untuk berjaga-jaga.</em> <em><code>architecture:x86uefi</code> <br></em>  <em>Tetapi pada umumnya ini tidak masuk akal, karena</em>  <em>File Bootmgfw.efi tidak mendukung x86</em> </p><br><p>  Periksa apa yang terjadi. <br><img src="https://habrastorage.org/webt/nz/oz/pi/nzozpiqidmvmolqo3qf6fr1rurc.png"><br>  Nah, WDS mengirimkan file kami untuk diunduh dan, pada gilirannya, mencari konfigurasi di sepanjang jalur: <code>http://192.168.0.100/install.ipxe</code> </p><br><h4 id="etap-4---konfiguraciya-menyu">  Tahap 4 - Konfigurasi Menu </h4><br><p>  Kami pergi ke folder root situs Anda. <br>  Secara default adalah: <code>C:\inetpub\wwwroot</code> </p><br><p>  Buat file teks <strong>install.ipxe</strong> . </p><br><p>  Dan konfigurasikan sesuai dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> dan kebutuhan Anda. <br>  Ada juga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">deskripsi</a> tim berbahasa Rusia. <br>  Saya menggunakan instruksi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> ketika mengkonfigurasi WDS saya. </p><br><div class="spoiler">  <b class="spoiler_title">Contoh konfigurasi Install.ipxe</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#!ipxe :start menu Please choose an operating system to start/install item --gap Start Win PE item WinPE-x64 WinPE x64 item --gap ipxe shell item shell Drop to iPXE shell choose target &amp;&amp; goto ${target} :failed echo Booting failed, dropping to shell goto shell :shell echo Type 'exit' to get the back to the menu shell set menu-timeout 0 set submenu-timeout 0 goto start :WinPE-x64 kernel http://192.168.0.100/wimboot initrd http://192.168.0.100/peSE/Boot/bcd initrd http://192.168.0.100/peSE/Boot/boot.sdi initrd http://192.168.0.100/peSE/Boot/peSE64.wim boot || goto failed</code> </pre> </div></div><br><p>  Anda dapat membaca tentang konfigurasi untuk memuat winPE di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </p><br><h4 id="etap-5---mime-types">  Tahap 5 - jenis MIME </h4><br><p>  Setelah membuat menu dan menambahkan semua file yang diperlukan ke folder root IIS, <br>  Anda harus memberi akses kepada mereka. </p><br><p>  Karena  bahkan jika Anda mencoba mengunduh file dari browser, Anda akan mendapatkan kesalahan di alamatnya: <code>HTTP 404.3 - Not Found</code> . <br><img src="https://habrastorage.org/webt/4c/vi/13/4cvi1361vfaauyhjrikkgt3p7fw.png"></p><br><p>  Untuk melakukan ini, tambahkan tipe MIME di panel kontrol IIS, sesuai <br>  dengan ekstensi file yang akan Anda unduh melalui http. </p><br><p>  Saya tidak mencari jenis MIME yang lebih baik untuk tujuan ini, dan mengatur <code>application/octet-stream</code> , setelah itu semuanya bekerja. </p><br><p>  Untuk file yang tidak memiliki ekstensi, gunakan tanda titik. </p><br><p>  Seperti ini: </p><br><p><img src="https://habrastorage.org/webt/zx/5s/-m/zx5s-mjbkbw1vd5z_bwrl0irtyu.png"></p><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Pada akhirnya, kami mendapatkan kemampuan untuk boot melalui jaringan lokal melalui UEFI. </p><br><p>  Jika kami melakukan semuanya dengan benar, maka akan ada sesuatu seperti menu pilihan boot: </p><br><p><img src="https://habrastorage.org/webt/gw/rw/a4/gwrwa4osswfqlolnyur-xpvbm8g.png"></p><br><p>  Jika Anda sudah menyiapkan alat dasar dan Anda tidak akan repot dengan konfigurasi, maka dibutuhkan sekitar 10-20 menit untuk mengimplementasikan fitur ini. <br>  Butuh waktu 2 hari kerja, karena  harus banyak google. </p><br><p>  Implementasi yang sukses! </p><br><p>  Terima kasih atas perhatian Anda dan terima kasih banyak kepada orang-orang yang artikelnya membantu saya! <br>  Tentang Habr: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Ingtar</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Deeptown</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448476/">https://habr.com/ru/post/id448476/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448462/index.html">AppCode 2019.1: Swift 5, lampu latar ditingkatkan, navigasi dan pelengkapan otomatis, ekspresi bergerak dan banyak lagi</a></li>
<li><a href="../id448464/index.html">Implementasi multithreading PHP sederhana</a></li>
<li><a href="../id448470/index.html">Pemasaran Konten di AS, Amerika Latin dan Asia: Kiat, Tautan dan Alat yang Berguna untuk Promosi Anggaran</a></li>
<li><a href="../id448472/index.html">Bagaimana PROCESS_DUP_HANDLE berubah menjadi PROCESS_ALL_ACCESS</a></li>
<li><a href="../id448474/index.html">Kami mencari kebocoran memori dalam aplikasi Python</a></li>
<li><a href="../id448478/index.html">Misi Lunar "Bereshit" - penyebab awal kecelakaan diumumkan</a></li>
<li><a href="../id448480/index.html">Pengguna di Docker</a></li>
<li><a href="../id448482/index.html">Pengujian pabrik terhadap pusat data modular</a></li>
<li><a href="../id448484/index.html">Root mikroba</a></li>
<li><a href="../id448486/index.html">"Pada November 2018, kami keliru jatuh ke dalam spam di semua lini." Bagaimana saya menyimpan surat dari perusahaan dengan basis juta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>