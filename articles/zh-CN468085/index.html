<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍑 🗒️ 🧒🏾 这本书“ Safe DevOps。 高效的系统运行 ⛩️ 🔪 🙎🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="嗨，habrozhiteli！ 在云中运行的应用程序具有许多优势，但同时也面临特殊威胁。 DevOps团队的任务是评估这些风险，并增强系统对这些风险的防护。 该书基于作者的独特经验，并提供了最重要的战略解决方案来保护Web应用程序免受攻击，以防止入侵。 您将了解如何通过自动测试，连续交付和关键的De...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>这本书“ Safe DevOps。 高效的系统运行</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/468085/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/ve/lp/sc/velpscrkxhyi-ycjwxfywsc4hhw.jpeg" align="left" alt="图片"></a> 嗨，habrozhiteli！ 在云中运行的应用程序具有许多优势，但同时也面临特殊威胁。  DevOps团队的任务是评估这些风险，并增强系统对这些风险的防护。 该书基于作者的独特经验，并提供了最重要的战略解决方案来保护Web应用程序免受攻击，以防止入侵。 您将了解如何通过自动测试，连续交付和关键的DevOps流程来确保可靠性。 学习识别，评估和修复应用程序中存在的漏洞。 作者将帮助您在云配置中导航，以及应用流行的自动化工具。 需要Linux知识和标准DevOps实践的知识，例如CI，CD和单元测试。 <br><a name="habracut"></a><br><br><h3> 摘录。 第8章入侵和攻击检测的日志分析 </h3><br> 在本章中： <br><br><ul><li> 探索日志记录管道中的分析级组件。 </li><li> 使用字符串签名，统计信息和历史数据检测入侵和攻击。 </li><li> 管理以最佳方式通知用户的方法。 </li></ul><br> 在第7章中，您学习了如何创建一个日志管道，该管道从整个基础结构收集，传输，分析和存储日志，并提供对它们的访问。 多级管道创建了一个灵活的基础架构，其中来自各种来源的日志用于监视组织服务的活动。 第7章概述了所有级别的管道提供的功能。 在本章中，我们将专注于第三级（分析级），并深入探讨与检测服务的入侵和攻击有关的技术和代码示例。 <br><br>  Mozilla在编写本书时使用的日志记录管道类似于第7章中显示的日志管道。该管道用于在自然环境中监视Firefox客户端的状态（称为<i>遥测</i> ），处理应用程序和服务日志，并检测异常活动。 流水线的逻辑中心位于分析级别，由许多不断寻找异常内容的小程序组成。 这些小型程序没有处理日志事件的输入和输出的高级功能，因此它们将这项任务转移到专用数据中心-Hindsight程序（http://mng.bz/m4gg），该程序旨在执行分析数据流上插件的工作。 。 <br><br> 在本章中，我们将使用Hindsight阅读各种类型的杂志，并编写原始插件进行分析。 <br><br><blockquote><h4> 注意 </h4> 本章的示例日志和插件位于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">secure-devops.com/ch08/logging-pipeline</a> 。 您需要将该存储库复制到本地计算机，并获得Hindsight Docker容器才能运行示例。 </blockquote><br> 让我们开始描述如何安排分析级别的各个部分：Hindsight位于中间，收集和存储级别位于两侧。 然后，我们将讨论三种检测入侵和攻击的方法。 最简单的方法是使用字符串签名，其中包含有关已知攻击的信息以发送通知。 接下来，我们将统计模型和带有签名的方法进行比较，并了解这两种方法如何相互补充。 最后，让我们看一下应用历史用户活动数据来识别连接中可疑区域的方法。 <br><br> 本章的最后一部分是关于发送通知的。 您不太可能希望每天都收到来自分析级别的成千上万的通知，这会产生很多噪音，而不是有用的。 如果未更改此设置，则收件人将把通知视为垃圾邮件，并将其忽略。 在本章的最后一节中，我们将考虑组织通知发送的最佳实践，并讨论准确，有效地向管理员和最终用户发送通知的方法。 <br><br><h4>  8.2。 使用字符串签名检测攻击 </h4><br> 使用日志时，将使用字符串。 这意味着识别欺诈迹象的最简单方法是将日志与已知恶意行列表进行比较。 看起来似乎很简单，但是正是这些年从事安全行业。 在2000年代中期如此流行的Web应用程序防火墙（WAF）本质上是一个正则表达式存储库，将对发送到Web应用程序的每个请求进行检查。 <br><br><blockquote><p></p><h4> 不要依赖正则表达式 </h4> 我曾经在一家广泛使用这种保护的银行工作。 安全团队负责支持WAF，WAF保护各种在线服务，包括为客户提供的交易服务。 发送到此服务的每个Web请求在到达应用程序服务器之前都要经过数百个正则表达式。 一旦来自在线交易服务团队的开发人员决定查看这些正则表达式。 我不知道是什么促使工程师开始读取文件的内容，该文件主要包含斜杠，美元符号，星号，加号，方括号和括号，但他接管了。 在第418行的复杂正则表达式中的某个地方，他发现了“。+”的可疑组合。 两个无辜的字符使一切都可以轻松进行：此正则表达式类似于“允许一切”的值。 <br><br> 我们的骄傲是Web应用程序的防火墙要花费几千欧元，并得到整个团队的支持，它执行了数百次正则表达式检查，从而影响了性能，并使本来已经很复杂的系统的设计变得复杂，而所有这些都是为了跳过所有不受阻碍的事情。 当然，我们很快就解决了这个问题，但是从那时起，我对使用正则表达式确保安全性的信念就没有增加。 如果要在组织中实施这种类型的保护系统，请考虑其复杂性，以免发生这种情况。 </blockquote><br> 如果正确使用正则表达式可以成为强大的工具，但是它们很难编写，难以维护，随着时间的流逝甚至更加困难，并且大规模实现非常昂贵。 看一下正则表达式（（\％3C）| &lt;）（（\％2F）| \ /）* [a-z0-9 \％] +（（\％3E）|&gt;）。 您不会猜测它的用途，所以我将告诉您：它可用于在HTTP请求字符串中搜索注入，从而揭示了打开和关闭&lt;&gt;不等号字符及其内容的存在。 您将从攻击者那里收到这种类型的HTTP请求行，该攻击者试图将恶意JavaScript代码注入您的应用程序中，最终导致跨站点脚本攻击，我们将在第3章中进行讨论。 <br><br> 此正则表达式可用于识别包含注入尝试的可疑请求。 清单8.7显示了一个示例解析器，该解析器通过检查每个传输的NGINX访问日志中的正则表达式匹配来实现此目的。 正则表达式存储在本地xss变量中，使用rex.match（）函数将其值与每个Fields [request]值进行比较。 <br><br> 如果存在匹配项，则add_to_payload（）函数将发送一条通知，告知输出插件可以接收并传输到目标。 <br><br><blockquote><h3> 清单8.7。 一个插件，用于检测查询字符串中包含攻击迹象的日志消息 </h3><br><img src="https://habrastorage.org/webt/9g/_f/t_/9g_ft__g8xthelzokpz6afui150.png" alt="图片"></blockquote><br> 清单8.8显示了此插件的输出示例。 样本杂志产生了一些通知，其中一些结果被证明是误报。 发生这种情况的部分原因是示例日志是使用ZAP漏洞扫描程序人为创建的，并且还因为查询字符串不倾向于包含HTML标记。 特别是，此正则表达式的查找假阳性匹配率不会很高。 <br><br><blockquote><h3> 清单8.8。  XSS分析插件生成的通知示例 </h3><br><img src="https://habrastorage.org/webt/x_/kw/-t/x_kw-tqj6b3gf_n2gowqq6zurue.png" alt="图片"></blockquote><br> 这只是一种特定攻击类型的一个正则表达式。 为了使这种方法有用，您需要查找除正则表达式以外的内容。 对于初学者来说，您可以从各种来源收集签名，并且随着日志中发现越来越多的可疑符号，逐渐增加了数据库的大小。 <br><br> 清单8.9显示了XSS分析器的修改版本，该版本查找各种攻击迹象（http://mng.bz/62h8）。 该脚本显示了如何使用Lua表存储属性列表，并循环使用它来分析传入事件。 在此代码示例中，suspicious_terms表是一行简单的行，使用子字符串搜索正则表达式，这要快得多。  suspicious_terms表使用键值格式将标签与表达式一起存储，以便能够提醒您该表达式应该找到。 <br><br><h3> 清单8.9。 使用字符串和表达式搜索攻击迹象 </h3><br><img src="https://habrastorage.org/webt/-4/kt/nq/-4ktnqdffbwc1uidpjqdvcdj68a.png" alt="图片"><br><img src="https://habrastorage.org/webt/mv/na/ul/mvnaulm65owmhzjqiaxveziil84.png" alt="图片"><br><br> 您可以使用本章开头介绍的测试设置来运行此分析仪。 启动带有已安装目录的Docker容器，分析器的输出将写入output / payload / analysis.suspicious_signatures.alerts.txt。 该插件将发送数千条通知，这是预期的，因为这些日志是由ZAP漏洞扫描程序生成的。 这种方法可以被认为是成功的，但是您应该考虑它的缺陷。 <br><br><ul><li>  <i>正则表达式很难编写，甚至更难阅读</i> 。 您将犯下的错误不容易调查，并且需要数小时的痛苦调试。 该分析器中只有四个正则表达式，但是读取这部分代码已经很困难。 无论该工具使用正则表达式多么强大和有吸引力，我都不建议您经常使用它们。 </li><li>  <i>通过这种方法，生成了太多的通知</i> 。 开放到Internet的Web应用程序会收到很多异常流量，这些流量不是恶意的，而是恶意邮件。 即使误报率很低，为每个异常标志生成通知也会使任何安全团队疯狂数周。 异常流量是Internet上运行的服务的自然现象。 </li></ul><br> 您可以通过应用数学方法来解决这两个问题，并使此用于检测异常的完善系统变得不那么完美。 在下一节中，我们将研究如何克服阈值时使用统计方法发送通知，以减少异常检测逻辑中的噪声。 <br><br><h4> 关于作者 </h4><br> 在撰写本文时， <i>Julien Vehen正在</i>管理Firefox Mozilla的运营安全团队。 他负责创建，实施和运行Web服务安全策略，每天都有数百万Firefox用户与之交互。 朱利安（Julien）在2000年代初期致力于保护网络服务。 他开始在Linux中担任系统管理员，并于2007年获得了信息安全硕士学位。 <br><br>  »这本书的更多信息可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在出版商的网站上找到</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">目录</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">摘录</a> <br><br>  <b>小贩</b>优惠券可享受25％的折扣<b>-DevOps</b> <br><br> 支付纸质版本的书后，就会通过电子邮件发送电子书。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN468085/">https://habr.com/ru/post/zh-CN468085/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN468075/index.html">暹罗神经网络在搜索中的使用</a></li>
<li><a href="../zh-CN468077/index.html">以成人方式进行测试。 光谱分析</a></li>
<li><a href="../zh-CN468079/index.html">Google Analytics（分析）中的自定义维度为我们节省了不止一次</a></li>
<li><a href="../zh-CN468081/index.html">“匿名数据”或152-FZ中计划的内容</a></li>
<li><a href="../zh-CN468083/index.html">水壶里的Android Camera2 API</a></li>
<li><a href="../zh-CN468087/index.html">测试中的二等分法</a></li>
<li><a href="../zh-CN468089/index.html">基于版本的重新定义：在生产中可能吗？</a></li>
<li><a href="../zh-CN468091/index.html">关于建立单一数据库的法案，其中包含一读国家杜马通过的公民数据</a></li>
<li><a href="../zh-CN468093/index.html">产品中的硝酸盐：瑞士商店vs俄罗斯商店vs夏季小屋</a></li>
<li><a href="../zh-CN468097/index.html">Microsoft Edge-通用XSS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>