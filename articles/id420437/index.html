<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😘 🛌🏽 🎅🏾 Pengantar praktis untuk manajer paket untuk Kubernetes - Helm 😩 ⤴️ 🌬️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini adalah kelanjutan logis dari publikasi terbaru kami tentang sejarah manajer paket untuk Kubernetes - Helm . Kali ini kita akan membahas la...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengantar praktis untuk manajer paket untuk Kubernetes - Helm</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/420437/"><img src="https://habrastorage.org/webt/ff/1x/js/ff1xjsnvdlnfinirlwb-0p42tlo.png"><br><br>  Artikel ini adalah kelanjutan logis dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">publikasi terbaru</a> kami tentang sejarah manajer paket untuk Kubernetes - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>Helm</b></a> .  Kali ini kita akan membahas lagi masalah perangkat dan fungsi Helm saat ini ( <b>versi 2.x</b> ), serta grafik dan repositori yang dikelola, setelah itu kita akan beralih ke praktik pemasangan Helm di kluster Kubernetes dan menggunakan grafik. <a name="habracut"></a><br><br><h2>  Entri </h2><br>  <b>Helm adalah alat manajemen grafik.</b> <br><br>  <b>Bagan</b> menjelaskan set data yang diperlukan untuk membuat instantiate aplikasi di cluster Kubernetes.  Ini dapat memiliki bagan tersemat dan dapat digunakan baik untuk menggambarkan layanan penuh, terdiri dari banyak sumber daya dependen, dan untuk menggambarkan masing-masing komponen independen.  Sebagai contoh, grafik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">stable / gitlab-ce</a> menjelaskan solusi lengkap <a href="">menggunakan</a> grafik redis independen dan postgresql. <br><br>  Bagan dapat ditetapkan jumlah kali yang tidak terbatas di cluster yang sama.  Dengan demikian, deskripsi logika roll-out dari aplikasi di lingkungan yang berbeda dapat dan harus disimpan pada grafik yang sama. <br><br>  Sisi klien Helm bertanggung jawab untuk membuat bagan dan meneruskan parameter pengguna ke komponen Tiller yang terletak di kluster Kubernetes.  Pada gilirannya, Tiller bertanggung jawab atas siklus hidup dari contoh bagan yang diluncurkan, rilis.  <i>(Untuk berjaga-jaga, izinkan saya mengingatkan Anda bahwa pembaruan besar berikutnya untuk Helm - versi 3 - tidak lagi menggunakan Tiller.)</i> <br><br>  Dan sekarang - hal pertama yang pertama. <br><br><h2>  Instalasi dan Peningkatan </h2><br>  Helm mengharuskan Kubernetes bekerja.  Anda dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Minikube yang</a> diinstal secara lokal <i>(lihat juga “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Memulai Kubernet menggunakan Minikube</a> ”)</i> atau cluster lain yang tersedia. <br><br>  Mari kita mulai dengan instalasi klien: pilih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rilis</a> , unduh dan bongkar arsip untuk sistem Anda, transfer file yang dapat dieksekusi ... <br><br><pre><code class="bash hljs">$ curl https://storage.googleapis.com/kubernetes-helm/helm-v2.10.0-linux-amd64.tar.gz | tar -zxv $ sudo mv linux-amd64/helm /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/helm</code> </pre> <br>  Selanjutnya, instal Tiller di kluster.  Secara default, Tiller dipasang di <b><code>kubectl</code> konteks <code>kubectl</code></b> ( <code>kubectl config current-context</code> ), di <b>namespace <code>kube-system</code></b> , tetapi ini dapat diubah menggunakan opsi dan variabel lingkungan yang sesuai - mereka dijelaskan dalam bantuan ( <code>helm init --help</code> ).  Mari kita selesaikan instalasi dan lihat sumber daya yang dibuat di kluster: <br><br><pre> <code class="bash hljs">$ helm init <span class="hljs-variable"><span class="hljs-variable">$HELM_HOME</span></span> has been configured at /home/habr/.helm. (Use --client-only to suppress this message, or --upgrade to upgrade Tiller to the current version.) Happy Helming! $ kubectl get all --selector=name=tiller --namespace kube-system NAME READY STATUS RESTARTS AGE po/tiller-deploy-df4fdf55d-h5mvh 0/1 Running 0 5s NAME CLUSTER-IP EXTERNAL-IP PORT(S) AGE svc/tiller-deploy 10.107.191.68 &lt;none&gt; 44134/TCP 5s NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE deploy/tiller-deploy 1 1 1 0 5s NAME DESIRED CURRENT READY AGE rs/tiller-deploy-df4fdf55d 1 1 0 5s</code> </pre><br>  Sekarang Tiller dipasang di cluster dan siap untuk manajemen rilis, interaksi dengan API Kubernetes. <br><br>  <i><b>Catatan</b> : Selama instalasi dan peningkatan (opsi <code>--upgrade</code> ) Tiller, Anda dapat <b>menentukan gambar tertentu</b> daripada menggunakan rilis stabil terbaru secara default.</i>  <i>Nama gambar sewenang-wenang ditentukan oleh opsi <code>--tiller-image</code> , dan dengan opsi <code>--canary-image</code> , <code>--canary-image</code> akan digunakan ketika Tiller diluncurkan.</i>  <i>Gambar kenari memungkinkan Anda untuk menggunakan anakan, yang versinya sesuai dengan cabang utama.</i> <br><br>  Data layanan disimpan dalam sebuah cluster dalam sumber daya khusus, <code>ConfigMaps</code> , sehingga menghapus dan menginstal ulang Tiller tidak menyebabkan hilangnya data dari rilis yang diinstal sebelumnya. <br><br><h2>  Bagan Gudang </h2><br>  Chart Repository - Server HTTP untuk menyimpan dan mendistribusikan grafik.  Informasi tentang grafik dalam repositori disimpan dalam file <code>index.yaml</code> .  Ini juga menunjukkan dari mana setiap bagan dapat diambil.  Paling sering, grafik disimpan dengan file <code>index.yaml</code> , tetapi tidak ada yang mencegah mereka ditempatkan di server lain.  Biasanya struktur file turun ke bentuk datar: <br><br><pre> <code class="bash hljs">. ├── index.yaml ├── artifactory-7.3.0.tgz ├── docker-registry-1.5.2.tgz ... └── wordpress-2.1.10.tgz</code> </pre><br>  Secara default, Helm menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori grafik Kubernetes resmi</a> .  Ini berisi bagan terkini yang dirancang dengan cermat untuk memecahkan banyak masalah yang diterapkan.  Repositori ini disebut <b>stable</b> : <br><br><pre> <code class="bash hljs">$ helm repo list NAME URL stable https://kubernetes-charts.storage.googleapis.com</code> </pre><br>  Jika perlu, <b>membuat</b> repositori Anda sendiri tidak akan menjadi masalah.  Persyaratan server minimal, jadi, seperti kebanyakan repositori bagan publik, ini dapat di-host di Halaman GitHub.  Anda dapat membaca lebih lanjut tentang alat dan langkah-langkah yang diperlukan untuk ini dalam <a href="">dokumentasi</a> . <br><br>  Saat menggunakan repositori grafik, mereka dapat ditambahkan dan dihapus.  Agar versi bagan menjadi terbaru, Anda harus memperbarui indeks secara berkala.  Saya akan memberikan contoh untuk repositori <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bitnami</a> publik, yang sebagian besar grafiknya digunakan dalam repositori Helm resmi: <br><br><pre> <code class="bash hljs">$ helm repo add bitnami https://charts.bitnami.com/bitnami <span class="hljs-string"><span class="hljs-string">"bitnami"</span></span> has been added to your repositories $ helm repo update Hang tight <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> we grab the latest from your chart repositories... ...Successfully got an update from the <span class="hljs-string"><span class="hljs-string">"bitnami"</span></span> chart repository ...Successfully got an update from the <span class="hljs-string"><span class="hljs-string">"stable"</span></span> chart repository Update Complete. Happy Helming! $ helm repo remove bitnami <span class="hljs-string"><span class="hljs-string">"bitnami"</span></span> has been removed from your repositories</code> </pre><br>  Berikutnya - <b>cari</b> melalui repositori.  Panggilan <code>helm search</code> tanpa argumen menunjukkan semua grafik yang tersedia: <br><br><pre> <code class="bash hljs">$ helm search NAME CHART VERSION APP VERSION DESCRIPTION stable/acs-engine-autoscaler 2.2.0 2.1.1 Scales worker nodes within agent pools stable/aerospike 0.1.7 v3.14.1.2 A Helm chart <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Aerospike <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Kubernetes stable/anchore-engine 0.2.1 0.2.4 Anchore container analysis and policy evaluation engine s... stable/apm-server 0.1.0 6.2.4 The server receives data from the Elastic APM agents and ... stable/ark 1.2.1 0.9.1 A Helm chart <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ark stable/artifactory 7.3.0 6.1.0 Universal Repository Manager supporting all major packagi... ... stable/weave-cloud 0.2.2 0.2.0 Weave Cloud is a add-on to Kubernetes <span class="hljs-built_in"><span class="hljs-built_in">which</span></span> provides Cont... stable/weave-scope 0.9.3 1.6.5 A Helm chart <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the Weave Scope cluster visualizer. stable/wordpress 2.1.10 4.9.8 Web publishing platform <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> building blogs and websites. stable/xray 0.4.1 2.3.0 Universal component scan <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> security and license invento... stable/zeppelin 1.0.1 0.7.2 Web-based notebook that enables data-driven, interactive ... stable/zetcd 0.1.9 0.0.3 CoreOS zetcd Helm chart <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Kubernetes</code> </pre><br>  Di bidang <code>keywords</code> opsional di <code>Chart.yaml</code> pengembang menentukan tag yang digunakan untuk menyederhanakan pencarian di repositori grafik: <br><br><pre> <code class="bash hljs">$ helm search web NAME CHART VERSION APP VERSION DESCRIPTION stable/cerebro 0.3.1 0.8.1 A Helm chart <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Cerebro - a web admin tool that replaces... stable/chronograf 0.4.5 1.3 Open-source web application written <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Go and React.js th... stable/jasperreports 2.0.4 7.1.0 The JasperReports server can be used as a stand-alone or ... stable/joomla 2.0.9 3.8.12 PHP content management system (CMS) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> publishing web co... stable/kubernetes-dashboard 0.7.2 1.8.3 General-purpose web UI <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Kubernetes clusters stable/odoo 2.0.7 11.0.20180815 A suite of web based open <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> business apps. stable/phabricator 2.1.9 2018.34.0 Collection of open <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> web applications that <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> soft... stable/redmine 4.1.0 3.4.6 A flexible project management web application. stable/rethinkdb 0.1.4 0.1.0 The open-source database <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the realtime web stable/schema-registry-ui 0.1.0 v0.9.4 This is a web tool <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the confluentinc/schema-registry i... stable/superset 0.1.2 0.24.0 Apache Superset (incubating) is a modern, enterprise-read... stable/testlink 2.0.3 1.9.17 Web-based <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> management system that facilitates softwar... stable/tomcat 0.1.0 7 Deploy a basic tomcat application server with sidecar as ... stable/wordpress 2.1.10 4.9.8 Web publishing platform <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> building blogs and websites. ... $ helm search cms blog NAME CHART VERSION APP VERSION DESCRIPTION stable/drupal 1.1.3 8.5.6 One of the most versatile open <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> content management ... stable/joomla 2.0.9 3.8.12 PHP content management system (CMS) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> publishing web co... stable/wordpress 2.1.10 4.9.8 Web publishing platform <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> building blogs and websites</code> </pre> <br>  <i><b>Catatan:</b> Saat menggunakan perintah <code>helm search</code> , Anda mungkin menghadapi operasi beberapa filter yang tidak stabil: ketersediaan hasilnya tergantung pada urutan indikasi dan jumlah filter.</i> <br><br>  Setelah lingkaran pencarian mempersempit ke beberapa opsi, Anda dapat melanjutkan ke analisis yang lebih rinci dari grafik - menggunakan perintah <code>helm inspect</code> .  Ini menampilkan isi file grafik <code>Chart.yaml</code> , <code>values.yaml</code> dan <code>README.md</code> .  Setiap bagian dapat ditampilkan secara individual dengan argumen yang sesuai: <code>chart</code> , <code>values</code> dan <code>readme</code> . <br><br>  Dalam repositori resmi, bagan didokumentasikan dengan indah dan berisi contoh penggunaan, dan beberapa bagan bahkan memiliki konfigurasi siap pakai untuk <b>produksi</b> .  Sebagai contoh, <code>readme</code> baik disediakan oleh <a href="">stable / wordpress</a> <i>(untuk outputnya di konsol, lihat <code>helm inspect readme stable/wordpress</code> )</i> . <br><br>  Pencarian adalah cara yang baik untuk menemukan paket yang terjangkau.  Setelah paket ditemukan, Anda dapat menggunakannya untuk menginstal aplikasi di cluster. <br><br><h2>  Aplikasi pertama </h2><br>  Misalnya, bagan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">stabil / wordpress yang</a> sudah disebutkan dipilih. <br><br>  Ini menggunakan parameter yang dijelaskan dalam file <code>values.yaml</code> .  Anda dapat mengganti parameter dalam file YAML dan kemudian mentransfer file ini selama instalasi (opsi <code>-f</code> , <code>--values</code> ).  Selain itu, mereka dapat diganti secara langsung pada baris perintah (opsi <code>--set</code> , <code>--set-string</code> dan <code>--set-file</code> ).  Semua opsi tersedia untuk digunakan beberapa kali secara sewenang-wenang;  pada saat yang sama, mengesampingkan pada baris perintah didahulukan dari file dengan parameter. <br><br>  Saat mengatur grafik, Anda dapat mengatur nama rilis dengan opsi <code>--name</code> atau menggunakan nama acak yang dihasilkan oleh Helm. <br><br>  Atur bagan <a href="">konfigurasi untuk produksi</a> , ubah nama blog, nonaktifkan penyimpanan data WordPress di <code>PersistentVolumeClaim</code> <i>(untuk informasi lebih lanjut tentang penyimpanan persisten, lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi Kubernetes</a> )</i> : <br><br><pre> <code class="bash hljs">$ curl https://raw.githubusercontent.com/helm/charts/master/stable/wordpress/values-production.yaml --output values-production.yaml $ helm install --name habr --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"wordpressBlogName=Flant's Blog!"</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"persistence.enabled=false"</span></span> -f values-production.yaml stable/wordpress NAME: habr LAST DEPLOYED: Fri Aug 31 15:17:57 2018 NAMESPACE: default STATUS: DEPLOYED RESOURCES: ==&gt; v1/Secret NAME TYPE DATA AGE habr-mariadb Opaque 2 0s habr-wordpress Opaque 2 0s ==&gt; v1/ConfigMap NAME DATA AGE habr-mariadb-init-scripts 1 0s habr-mariadb 1 0s habr-mariadb-tests 1 0s ==&gt; v1/Service NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE habr-mariadb ClusterIP 10.111.7.232 &lt;none&gt; 3306/TCP 0s habr-wordpress ClusterIP 10.106.129.88 &lt;none&gt; 80/TCP,443/TCP 0s ==&gt; v1beta1/Deployment NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE habr-wordpress 3 3 3 0 0s ==&gt; v1beta1/StatefulSet NAME DESIRED CURRENT AGE habr-mariadb 1 1 0s ==&gt; v1beta1/Ingress NAME HOSTS ADDRESS PORTS AGE wordpress.local-habr wordpress.local 80, 443 0s ==&gt; v1/Pod(related) NAME READY STATUS RESTARTS AGE habr-wordpress-7955b95fd-hh7b9 0/1 ContainerCreating 0 0s habr-wordpress-7955b95fd-tgsxk 0/1 ContainerCreating 0 0s habr-wordpress-7955b95fd-xjz74 0/1 ContainerCreating 0 0s habr-mariadb-0 0/1 ContainerCreating 0 0s NOTES: 1. Get the WordPress URL: You should be able to access your new WordPress installation through https://wordpress.local/admin 2. Login with the following credentials to see your blog <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Username: user <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Password: $(kubectl get secret --namespace default habr-wordpress -o jsonpath=<span class="hljs-string"><span class="hljs-string">"{.data.wordpress-password}"</span></span> | base64 --decode)</code> </pre><br>  Jika Anda bekerja dengan kluster yang lengkap, Anda dapat mengikuti rekomendasi dari blok <i>CATATAN di</i> atas.  Jika Anda memiliki Minikube, buka situs di browser sebagai berikut: <br><br><pre> <code class="bash hljs">$ minikube service habr-wordpress Waiting, endpoint <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> service is not ready yet... Opening kubernetes service default/habr-wordpress <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> default browser...</code> </pre> <br>  Selamat, aplikasi ini ada di cluster! <br><br><img src="https://habrastorage.org/webt/on/bg/ub/onbgubke7d2hntrso3asemt5teq.png"><br><br>  Grafik terperinci dengan WordPress muncul di daftar semua rilis Helm: <br><br><pre> <code class="bash hljs">$ helm list NAME REVISION UPDATED STATUS CHART APP VERSION NAMESPACE habr 1 Fri Aug 31 15:17:57 2018 DEPLOYED wordpress-2.1.10 4.9.8 default</code> </pre><br>  Langkah selanjutnya adalah memperbarui rilis kami dan mengubah gambar dengan blog.  Sebagai contoh, tag lain dari repositori Docker yang sama ( <code>4.9.8-ol-7</code> ) akan digunakan: <br><br><pre> <code class="bash hljs">$ helm upgrade habr --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"image.tag=4.9.8-ol-7"</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"wordpressBlogName=Flant's Blog!"</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"persistence.enabled=false"</span></span> -f values-production.yaml stable/wordpress Release <span class="hljs-string"><span class="hljs-string">"habr"</span></span> has been upgraded. Happy Helming! LAST DEPLOYED: Fri Aug 31 15:21:08 2018 NAMESPACE: default STATUS: DEPLOYED RESOURCES: ==&gt; v1/Service NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE habr-mariadb ClusterIP 10.111.7.232 &lt;none&gt; 3306/TCP 3m habr-wordpress ClusterIP 10.106.129.88 &lt;none&gt; 80/TCP,443/TCP 3m ==&gt; v1beta1/Deployment NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE habr-wordpress 3 4 2 0 3m ==&gt; v1beta1/StatefulSet NAME DESIRED CURRENT AGE habr-mariadb 1 1 3m ==&gt; v1beta1/Ingress NAME HOSTS ADDRESS PORTS AGE wordpress.local-habr wordpress.local 80, 443 3m ==&gt; v1/Pod(related) NAME READY STATUS RESTARTS AGE habr-wordpress-66f4fd6b74-gqwhh 0/1 Pending 0 0s habr-wordpress-66f4fd6b74-mf6vj 0/1 Pending 0 0s habr-wordpress-7955b95fd-hh7b9 1/1 Running 2 3m habr-wordpress-7955b95fd-tgsxk 1/1 Running 2 3m habr-wordpress-7955b95fd-xjz74 0/1 Terminating 2 3m habr-mariadb-0 1/1 Running 0 3m ==&gt; v1/Secret NAME TYPE DATA AGE habr-mariadb Opaque 2 3m habr-wordpress Opaque 2 3m ==&gt; v1/ConfigMap NAME DATA AGE habr-mariadb-init-scripts 1 3m habr-mariadb 1 3m habr-mariadb-tests 1 3m NOTES: 1. Get the WordPress URL: You should be able to access your new WordPress installation through https://wordpress.local/admin 2. Login with the following credentials to see your blog <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Username: user <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Password: $(kubectl get secret --namespace default habr-wordpress -o jsonpath=<span class="hljs-string"><span class="hljs-string">"{.data.wordpress-password}"</span></span> | base64 --decode)</code> </pre><br>  Harap dicatat bahwa <b>ketika memperbarui</b> Anakan membandingkan bagan yang diterima dengan parameter dengan yang terakhir disimpan dan melakukan permintaan yang sesuai di Kubernetes API, dan status <b>saat ini dari sumber daya rilis tidak diperhitungkan</b> .  Penting untuk memahami fitur ini dan tidak membuat kesalahan: <br><br><ul><li>  Pembaruan tidak berbeda dari instalasi: klien Helm mengirimkan grafik Tiller bersama dengan parameter, jadi Anda harus berhati-hati dan ingat untuk menentukan parameter dan file dengan parameter yang ditetapkan selama instalasi (atau selama pembaruan sebelumnya) dan yang tidak boleh diabaikan.  Pada contoh di atas, ini adalah <code>--set "wordpressBlogName=Flant's Blog!" --set "persistence.enabled=false" -f values-production.yaml</code>  <code>--set "wordpressBlogName=Flant's Blog!" --set "persistence.enabled=false" -f values-production.yaml</code> . </li><li>  Aplikasi yang diluncurkan menggunakan Helm hanya boleh dilayani menggunakan Helm: perubahan manual yang dibuat menggunakan <code>kubectl</code> tidak akan diperhitungkan oleh Helm dan dapat menyebabkan konsekuensi yang tidak dapat diubah. </li></ul><br>  Oleh karena itu kesimpulan logis: <b>proses harus otomatis</b> , dan perubahan harus dilakukan hanya melalui komit ke repositori Git, mengubah file grafik dan file konfigurasi CI. <br><br>  Status komponen rilis aplikasi dalam sebuah cluster selalu dapat diperiksa sebagai berikut: <br><br><pre> <code class="bash hljs">$ helm status habr LAST DEPLOYED: Fri Aug 31 15:21:08 2018 NAMESPACE: default STATUS: DEPLOYED RESOURCES: ==&gt; v1/Secret NAME TYPE DATA AGE habr-mariadb Opaque 2 4m habr-wordpress Opaque 2 4m ==&gt; v1/ConfigMap NAME DATA AGE habr-mariadb-init-scripts 1 4m habr-mariadb 1 4m habr-mariadb-tests 1 4m ==&gt; v1/Service NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE habr-mariadb ClusterIP 10.111.7.232 &lt;none&gt; 3306/TCP 4m habr-wordpress ClusterIP 10.106.129.88 &lt;none&gt; 80/TCP,443/TCP 4m ==&gt; v1beta1/Deployment NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE habr-wordpress 3 4 2 3 4m ==&gt; v1beta1/StatefulSet NAME DESIRED CURRENT AGE habr-mariadb 1 1 4m ==&gt; v1beta1/Ingress NAME HOSTS ADDRESS PORTS AGE wordpress.local-habr wordpress.local 80, 443 4m ==&gt; v1/Pod(related) NAME READY STATUS RESTARTS AGE habr-wordpress-66f4fd6b74-gqwhh 0/1 Pending 0 1m habr-wordpress-66f4fd6b74-mf6vj 1/1 Running 0 1m habr-wordpress-7955b95fd-hh7b9 1/1 Running 3 4m habr-wordpress-7955b95fd-tgsxk 1/1 Running 3 4m habr-mariadb-0 1/1 Running 1 4m NOTES: 1. Get the WordPress URL: You should be able to access your new WordPress installation through https://wordpress.local/admin 2. Login with the following credentials to see your blog <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Username: user <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Password: $(kubectl get secret --namespace default habr-wordpress -o jsonpath=<span class="hljs-string"><span class="hljs-string">"{.data.wordpress-password}"</span></span> | base64 --decode)</code> </pre><br>  Helm memungkinkan Anda <b>memutar kembali ke revisi rilis spesifik</b> .  Saat ini ada dua revisi: <br><br><pre> <code class="bash hljs">$ helm <span class="hljs-built_in"><span class="hljs-built_in">history</span></span> habr REVISION UPDATED STATUS CHART DESCRIPTION 1 Fri Aug 31 15:17:57 2018 SUPERSEDED wordpress-2.1.10 Install complete 2 Fri Aug 31 15:21:08 2018 DEPLOYED wordpress-2.1.10 Upgrade complete</code> </pre><br>  Kembalikan aplikasi ke keadaan semula: <br><br><pre> <code class="bash hljs">$ helm rollback habr 1 Rollback was a success! Happy Helming!</code> </pre><br>  Sekarang riwayat revisi telah diisi ulang dengan satu catatan: <br><br><pre> <code class="plaintext hljs">$ helm history habr REVISION UPDATED STATUS CHART DESCRIPTION 1 Fri Aug 31 15:17:57 2018 SUPERSEDED wordpress-2.1.10 Install complete 2 Fri Aug 31 15:21:08 2018 SUPERSEDED wordpress-2.1.10 Upgrade complete 3 Fri Aug 31 15:25:06 2018 DEPLOYED wordpress-2.1.10 Rollback to 1</code> </pre><br>  Artikel hampir berakhir dan tidak diperlukan lagi? <br><br><pre> <code class="bash hljs">$ helm delete habr release <span class="hljs-string"><span class="hljs-string">"habr"</span></span> deleted</code> </pre><br>  Apakah itu benar-benar dihapus? .. <br><br>  <b>Perintah menghapus sumber daya Kubernetes yang terkait dengan rilis, tetapi bukan rilis itu sendiri</b> .  Semua informasi tentang rilis tetap tersedia, termasuk riwayatnya: <br><br><pre> <code class="bash hljs">$ helm list --all NAME REVISION UPDATED STATUS CHART APP VERSION NAMESPACE habr 3 Fri Aug 31 15:25:06 2018 DELETED wordpress-2.1.10 4.9.8 default</code> </pre><br><pre> <code class="bash hljs">$ helm <span class="hljs-built_in"><span class="hljs-built_in">history</span></span> habr REVISION UPDATED STATUS CHART DESCRIPTION 1 Fri Aug 31 15:17:57 2018 SUPERSEDED wordpress-2.1.10 Install complete 2 Fri Aug 31 15:21:08 2018 SUPERSEDED wordpress-2.1.10 Upgrade complete 3 Fri Aug 31 15:25:06 2018 DELETED wordpress-2.1.10 Deletion complete</code> </pre><br>  <i><b>Catatan</b> : Sesuai rencana, rilis jarak jauh dapat diputar kembali ke versi sebelumnya, tetapi dalam versi terbaru fitur ini tidak berfungsi - lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">edisi # 3722 untuk</a> detailnya.</i> <br><br>  Untuk menghapus rilis sepenuhnya, gunakan opsi <code>--purge</code> : <br><br><pre> <code class="bash hljs">$ helm delete --purge habr release <span class="hljs-string"><span class="hljs-string">"habr"</span></span> deleted</code> </pre><br><h2>  Meringkas </h2><br>  Artikel ini berbicara tentang arsitektur dasar Helm 2, komponen dan fungsinya, serta primitif dasar, bagan, rilis dan repositori bagan.  Kami memasang Helm di kluster Kubernetes dan memperoleh pemahaman tentang siklus hidup rilis dan perintah dasar untuk bekerja dengannya. <br><br>  Materi berikut dari seri ini akan dikhususkan untuk topik <b>membuat bagan Anda sendiri</b> - di dalamnya saya akan berbicara tentang struktur bagan, standardisasi dan alat debugging.  <b>DIPERBARUI</b> : Artikel baru tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan ini</a> . <br><br><h2>  PS </h2><br><ul><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Membuat paket untuk Kubernetes dengan Helm: struktur bagan dan templating</a> ”; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Package Manager untuk Kubernetes - Helm: Past, Present, Future</a> "; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Berlatihlah dengan dapp.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2. Penempatan gambar Docker di Kubernetes menggunakan Helm</a> "; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bangun dan instal aplikasi di Kubernet menggunakan dapp dan GitLab CI</a> ”; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Praktik CI / CD Terbaik dengan Kubernetes dan GitLab</a> ” <i>(ulasan dan laporan video)</i> . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id420437/">https://habr.com/ru/post/id420437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id420425/index.html">Teori dan praktik menggunakan HBase</a></li>
<li><a href="../id420429/index.html">GUNAKAN, MERAH, PgBouncer, pengaturan dan pemantauannya</a></li>
<li><a href="../id420431/index.html">Mars Panduan Praktis untuk Terraforming untuk Ibu Rumah Tangga</a></li>
<li><a href="../id420433/index.html">"Format Jumat": jalan musikal - apa itu dan mengapa mereka tidak ada di Rusia</a></li>
<li><a href="../id420435/index.html">Mulai cepat dengan ARM Mbed: pengembangan mikrokontroler modern untuk pemula</a></li>
<li><a href="../id420439/index.html">Intisari Fintech: investasi dalam fintech mencapai $ 57 miliar, kecepatan transaksi meningkat, dan biaya turun</a></li>
<li><a href="../id420441/index.html">10 kesalahan keamanan paling umum dalam Python dan cara menghindarinya</a></li>
<li><a href="../id420443/index.html">Pakar keamanan dunia maya telah menciptakan detektor skimmer - SkimReaper</a></li>
<li><a href="../id420447/index.html">Museum Sejarah Komputer - tempat di mana TI dicatat</a></li>
<li><a href="../id420451/index.html">Server di awan: bersiap-siap untuk diluncurkan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>