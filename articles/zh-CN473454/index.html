<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎶 🧜🏿 👩‍👧‍👧 通过Docker容器中的Selenoid使用Selenide进行测试自动化 🙌🏿 👇🏽 📛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文对初学者质量保证专家以及对诸如Selenide和Selenoid这样的流行测试框架的功能和功能感兴趣的人员很有用。 

 在这里，我们看一些有关Selenium的基础项目。 我们将看到如何将Selenium和TestNG连接到项目，这是Page Object的示例，其中包含页面元素和所用方法的描...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>通过Docker容器中的Selenoid使用Selenide进行测试自动化</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473454/"><p>本文对初学者质量保证专家以及对诸如Selenide和Selenoid这样的流行测试框架的功能和功能感兴趣的人员很有用。 <br><br> 在这里，我们看一些有关Selenium的基础项目。 我们将看到如何将<b>Selenium</b>和<b>TestNG</b>连接到项目，这是Page Object的示例，其中包含页面元素和所用方法的描述。 <br><br> 此外，熟悉<b>Selenide</b> ：我们将考虑框架本身，其主要功能和优点，并将Selenide添加到测试项目中。 考虑使用Selenide中可用的元素，检查和期望。 <br><br> 最后， <b>让我们将Selenoid</b>框架<b>连接</b>到我们的项目，以在<b>Docker</b>容器中及其外部运行测试。 <br><br><img src="https://habrastorage.org/webt/fq/0u/6m/fq0u6mqwmrsun_01cyazmpwa6yc.jpeg"><br><a name="habracut"></a><br><br>  <i>*本文是根据IntexSoft高级质量检查专家Nikita Kalinichenko的报告编写的。</i> <i><br></i>  <i>本文包含外部材料的链接。</i> <br></p><br><h3>  1.硒+ TestNG </h3><br> 我们正在考虑使用<b>Maven builder</b>的项目，因此可以在<i>pom.xml</i>文件中找到项目结构的描述。 为了使用<b>Selenium</b>和<b>TestNG</b> ，必须将适当的依赖项添加到我们的<i>pom.xml</i>文件中。 您可以在以下<i>依赖项</i>标签之间观察它们： <br><br><pre><code class="java hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>?&gt; &lt;project xmlns=<span class="hljs-string"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span> xmlns:xsi=<span class="hljs-string"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span> xsi:schemaLocation=<span class="hljs-string"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span>&gt; &lt;modelVersion&gt;<span class="hljs-number"><span class="hljs-number">4.0</span></span>.0&lt;/modelVersion&gt; &lt;groupId&gt;test&lt;/groupId&gt; &lt;artifactId&gt;test&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">1.0</span></span>-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt; &lt;artifactId&gt;selenium-java&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">3.141</span></span>.59&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.testing&lt;/groupId&gt; &lt;artifactId&gt;testing&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">6.14</span></span>.3&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt;</code> </pre> <br> 接下来，我们来看一个Page对象的示例： <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignUpPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebDriver driver; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SignUpPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WebDriver driver)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.driver = driver; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By emailFriend = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-email"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By confirmEmailFriend = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-confirm-email"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By passwordField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-password"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By displayNameField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-displayname"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By monthDropDown = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-month"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By dayField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-day"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By yearField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-year"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By shareCheckbox = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-thirdparty"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By registerButton = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-button-email-submit"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    email public SignUpPage typeEmail(String email) { //       driver.findElement(emailField).sendKeys(email); return this; } //    Confirm email public SignUpPage typeConfirmEmailFriend(String email) {...} //    password public SignUpPage typePassword(String Password) {...} //      public SignUpPage typeName(String name) {...} //   public SignUpPage setMonth(String month) {...} //    Day public SignUpPage typeDay(String day) {...} //    Year public SignUpPage typeYear(String year) {...}</span></span></code> </pre> <br> 如我们所见，在java文件的顶部是对变量的描述，该变量带有用于注册页面元素的定位符。 变量部分下方是直接与页面元素进行交互的方法。 <br><br> 让我们自己打开测试： <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    private WebDriver driver; //   private SignUpPage page; @BeforeMethod public void setUp() { //    geckodriver System.setProperty("webdriver.gecko.driver", "C:\\Users\\Nikita\\IdeaProjects\\autotests_examples\\drivers\\geckodriver.exe"); //   driver = new FirefoxDriver(); //  ,       driver.manage().timeouts().impicitlyWait(10, TimeUnit.SECONDS); // url      webdrivera get driver.get("https://www.spotify.com/us/signup/"); }</span></span></code> </pre> <br> 如您所见，在<b>BeforeMethod</b>批注中，我们描述了每种方法之前的内容。 <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">typeInvalidYear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//          driver page = new SignUpPage(driver); //  page.setMonth("December"); //  .typeDay("20") //  .typeYear("85") //  .setShare(true); //  ,    ; Assert.assertTrue(page.isErrorVisible("Please enter a valid year."));</span></span></code> </pre> <br>  <b>Test</b>注释<b>提供</b>了测试方法的代码。 <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AfterMethod</span></span> <span class="hljs-comment"><span class="hljs-comment">//,   public void tearDown() { driver.quit(); }</span></span></code> </pre><br>  <b>AfterMethod</b>注释包含应在每个方法之后执行的代码。 <br><br> 使用<b>Selenium</b>运行测试时，将发生以下情况： <br><br><ol><li> 打开一个单独的浏览器窗口 </li><li> 前往网址 </li><li> 测试代码执行 </li><li> 每次测试后关闭会话和浏览器窗口 </li></ol><br> 下一个测试将执行相同的操作。 应该提到的是，在Selenium上运行测试是一个相当耗费资源的过程。 <br><br><h3>  2.硒化物：什么，在哪里以及如何 </h3><br>  <b>硒化物</b>本身是什么，其主要特征和优点是什么？ <br><br> 简而言之， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Selenide</a>是Selenium WebDriver的包装，可以在编写测试时快速，轻松地使用它。  Selenide的核心是一种用于在浏览器中自动执行用户操作的工具，其重点是在以用户语言进行自动测试中实现业务逻辑的便利性和便捷性，而不会因使用“浏览器驱动程序”而引起的技术细节分心。 例如，在自动测试动态Web应用程序的过程中，我们不需要专注于满足元素的期望，也不需要专注于对元素执行高级操作。 <br><br> 硒化物的主要和主要优点： <br><br><ul><li> 简洁的jQuery风格的语法 </li><li> 自动解决Ajax的大多数问题，期望和超时 </li><li> 浏览器寿命管理 </li><li> 自动创建屏幕截图 </li></ul><br>  Selenide的目标是专注于测试的业务逻辑，而不是“浪费”精力在技术细节上。 <br><br><h4> 在Selenide上翻译项目 </h4><br> 为了连接Selenide并开始使用它，在<i>依赖</i>标签之间的<i>pom.xml</i>文件中，我们指定了对Selenide的依赖。 由于我们不再需要硒成瘾，因此只需删除它即可。 <br><br><pre> <code class="java hljs">&lt;dependency&gt; &lt;groupId&gt;com.codeborne&lt;/groupId&gt; &lt;artifactId&gt;selenide&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">5.2</span></span>.8&lt;/version&gt; &lt;/dependency&gt;</code> </pre> <br> 此外，为了在我们的项目中连接并开始使用Selenide，我们需要进行几次导入。 导入示例： <br><br>  <i>导入静态com.codeborne.selenide.Selenide。</i> <br>  <i>导入静态com.codeborne.selenide.Selectors。</i> <br>  <i>导入静态com.codeborne.selenide.Condition。*;</i> <br>  <i>导入静态com.codeborne.selenide.CollectionCondition。</i> <br><br> 有关如何使用其余项目构建器连接Selenide的更多信息，请参见Selenide文档的“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">快速入门”</a>部分。 <br><br><h4> 处理元素，检查和期望 </h4><br> 让我们继续进行Selenide的工作，并熟悉Selenide提供给我们的一些检查和期望。 <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignUpTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    private SignUpPage page; @BeforeClass public static void setUp() { //Property baseurl,     Configuration     url baseurl = "https://www.spotify.com"; //Property browser,     Configuration          browser = "chrome"; }</span></span></code> </pre> <br> 在测试文件中，由于不再需要<b>BeforeMethod</b>注释，所以将其替换为<b>BeforeClass</b>注释，因为Selenide不再需要编写Before和After方法-Selenide接管了AfterMethod函数。 我们只剩下<b>BeforeClass</b>注释来注册几个<i>属性</i> 。 <br><br> 在<b>BeforeClass</b>批注中<b>，</b>我们注册了一个<i>属性baseurl</i> ，它位于<i>配置</i>类中，并将作为基本url。 因此，不再需要在硒测试中使用的<i>driver.get</i> 。 在<i>属性浏览器中，</i>我们设置将在其上运行测试的浏览器。 <br><br> 在我们的测试项目中，我们可以完全放弃Selenium驱动程序，Selenide将处理它的所有工作，并将其封装在其类中。 我们将必须专注于测试本身的逻辑。 <br><br> 让我们继续在页面上使用Selenide： <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//       Selenide open public SignUpPage open() { //   Selenide.open (relativeOrAbsoluteUrl: "/us/signup/"); return this; } //    email public SignUpPage typeEmail(string Email) { //       $(emailFriend).sendKeys(email); return this; }</span></span></code> </pre> <br> 当您调用<i>open</i>方法时，Selenide会启动浏览器本身并打开页面。 他还确保浏览器最后关闭。 在硒油中。  <i>打开时，</i>我们可以使用<i>http</i>注册完整路径，或传递一些相对于baseurl的<i>相对URL</i> 。 因此，在Selenide方法中<i>，</i>我们指定了绝对路径作为<i>baseurl</i> 。  <i>打开</i> ，我们指定“ /”就足够了。 <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    email public SignUpPage typeEmail(String email) { //       $(emailField).sendKeys(email); return this; } //    Confirm email public SignUpPage typeConfirmEmailField(String email) { //       $(confirmEmailField).setValue(email); return this; }</span></span></code> </pre><br><p> 为了使用Selenide查找元素，我们需要指定<b>$</b>而不是Selenium中使用的<i>driver.findElement</i> 。 也就是说，使用一个字符长度的方法，我们可以直接找到元素本身。 默认情况下，搜索方法被接受为字符串，类似于jQuery JavaScript库。 <br><br> 为了使用Selenide查找元素列表，您需要指定两个<b>$$</b>字符。 而不是<i>List &lt;WebElement</i> ，我们规定了<i>ElementsCollection</i> ，它已经被其他方法扩展。 <br></p><br><p> 要使用元素，我们可以使用标准的Selenium方法<i>（sendKeys（））</i>和<i>setValue（）</i>或较短版本的<i>val（）</i> 。 <br></p><br><p> 如我们所见，基于名称，Selenide方法更易于理解。  <i>click（）</i>方法保持不变。 尽管Selenide有几种<i>click（）</i>方法<i>：contextClick（）</i> （模拟右键单击）， <i>doubleClick（）</i> （模拟元素上的双击）等。 已经找到元素后，我们可以使用其他定位器继续搜索。 </p><br><p>  Selenide <i>find（）</i>方法与Selenium <i>driver.findElement（By</i> <i>）</i>方法的不同之处在于，它可以立即接收CSS选择器，并且可以使用Selenide元素（而不是Web元素）进行操作。 基本上，Selenide元素更智能，其方法可以替代Selenium Web元素。 </p><br><p>  Selenide已经包含必须通过某个<i>动作</i>类或其他方式完成的方法。 它使您可以用所有人都可以理解的语言编写简洁而“美丽”的方法。  Selenide还具有很大的灵活性，因此我们可以使用Selenium的标准功能。 </p><br><p> 其他Selenide方法也可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">官方文档中</a>找到。 <br></p><br><p> 考虑一下Selenide为我们提供的广泛而易于理解的支票示例： </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,     page.getError("Please enter a valid year.").shouldBe(Condition.visible); //  ,      page.getError("When were you born?").shouldNotBe(Condition.visible); //       page.getErrors().shoildHave(CollectionCondition.size(6)); //      page.getErrorByNumber(3).shouldHave(Condition.text("Please enter your birth month."));</span></span></code> </pre><br><p>  Selenide验证方案允许我们获取一个元素，找到它并使用以下公式表示：should，shouldBe，shouldHave，shouldNot，shouldNotBe和ShouldNotHave。 验证方案简化为找到这些公式的元素并将其称为。 此外，在方括号中，我们指示应对应或不对应的状态，或某些属性。 </p><br><p> 根据逻辑和我们的需求，我们使用某些方法。 如果要检查元素是否存在，请使用should（exist）方法，如果要检查元素的可见性，请使用shouldBe（visible），依此类推。 实际上，我们仅使用三个公式：Should，shouldBe，shouldHave或它们的反面ShouldNot，shouldNotBe，shouldNotHave。 </p><br><p> 使用上述方法对硒元素进行元素检查或元素集合检查，并通过验证条件。 它们的作用是等待元素满足某些条件的时刻，而不只是对条件进行检查。 </p><br><p>  Selenide中的用语很合逻辑且可以理解。 我们可以使用开发环境的提示或逻辑假设来编写检查。 就其本身而言，我们总是可以查看文档中必要方法的实现代码，也可以查看方法本身的实现。 <br></p><br><h3> 测试中的自动屏幕截图 <br></h3><br><p> 对于<b>JUnit</b> ： <br><br> 要在每次测试失败后自动拍摄屏幕截图，可以导入并指定<b>Rule</b> <br></p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.codeborne.selenide.junit.screenShooter; <span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter makeScreenshotOnFailure = ScreenShooter.failledTests();</code> </pre><br> 但是实际上，这很初级，因为Selenide长期以来一直在测试失败时自动拍摄屏幕截图。 这对于分析我们的错误非常方便。 默认情况下，Selenide将屏幕快照放置在<i>build / reports / tests</i>文件夹中。 <br><br> 为了在每次测试（包括绿色）后自动拍摄屏幕截图，可以使用以下命令： <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter makeScreenshotOnFailure = ScreenShooter.failedTests().succeededTests();</code> </pre><br><p> 对于<b>TestNG，</b>我们还导入： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.codeborne.selenide.testng.ScreenShooter; <span class="hljs-meta"><span class="hljs-meta">@Listeners</span></span>({ ScreenShooter.class})</code> </pre><br><p> 要在绿色测试后拍摄屏幕截图，需要在运行测试之前调用以下命令： <br></p><br><pre> <code class="java hljs">ScreenShooter.captureSuccessfulTests = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre><br><p> 您还可以在一行中的任何地方截取屏幕截图： <br></p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> com.codeborne.selenide.selenide.screenshot; screenshot(<span class="hljs-string"><span class="hljs-string">"my_file_name"</span></span>);</code> </pre><br><p>  Selenide将创建两个文件： <i>my_file_name.png</i>和<i>my_file_name.html</i> <br><br></p><h3>  3. Docker：功能和优势 </h3><br><p> 让我们直接进入<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Docker</a>并考虑其优势： <br></p><br><ul><li> 加快了开发过程。 无需安装辅助工具；它们可以在容器中运行 </li><li> 方便的应用程序封装 </li><li> 清晰的监控 </li><li> 轻松缩放 </li></ul><br><p> 在谈论Docker时，应明确以下几点： </p><br><p>  <b>容器</b>是封装所需软件的可执行实例。 它由图像组成。 它可以很容易地删除并在短时间内重新创建。 </p><br><p>  <b>图像</b>是每个容器的基本元素。 </p><br><p>  <b>Docker Hub</b>是Docker Inc.提供的公共接口存储库。 它存储许多图像。 该资源是由Docker团队制作或与软件开发人员合作创建的“正式”映像的来源。 <br></p><br><h4> 安装Docker </h4><br><p> 要在Windows上使用Docker，我们请访问<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">https://hub.docker.com</a>并下载适用于Windows或MacOS的<b>Docker桌面</b>应用程序，然后再安装。 </p><br><p> 对于Ubuntu Linux，使用命令<i>sudo apt install docker.io</i>安装Docker。 </p><br><p> 接下来，您需要启动Docker并通过执行以下命令将其配置为在系统启动时自动启动： </p><br><ul><li>  <i>sudo systemctl启动docker</i> </li><li>  <i>sudo systemctl启用docker</i> </li></ul><br><br><h3>  4.硒素：特点和优点 </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Selenoid</a>是在Docker容器中运行隔离浏览器的服务器。 </p><br><p> 使用硒油的好处： </p><br><ul><li> 用于运行并行自动测试的统一环境 <br></li><li> 隔离的环境：每个浏览器都在单独的容器中运行，这使我们可以完全隔离浏览器的环境 <br></li><li> 可扩展性：环境不影响质量并连续测试 <br></li><li> 资源消耗和利用：Selenoid可让您保持较高的负载而无需额外的资源成本； 此外，它在会话结束后回收所有不活动的容器，从而不断保持所需的可用内存量。 <br></li><li> 安装：不需要花费很多时间，实际上只需一个命令即可完成安装 <br></li><li> 同时支持一个浏览器的多个版本：此选项仅在Selenoid中可用，为此您需要使用必要的浏览器创建多个容器 <br></li><li> 焦点：操作系统的工作方式是只有一个窗口可以成为焦点。 在同一台计算机上运行多个浏览器时，Windows可能开始争夺焦点。 由于每次测试都在单独的容器中进行，因此硒油没有这种问题 <br></li><li> 用户界面和日志：Selenoid允许您快速访问现有日志。 此外，可以与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ELK</a>堆栈集成，以更快地收集和分析当前文件。 <br></li></ul><br><p> 此外，Selenoid十分方便使用，并具有信息丰富的界面。 </p><br><h4> 安装硒油 </h4><br><p> 安装硒油的准备步骤： </p><br><ul><li> 需要安装并运行Docker，因为进一步讨论了Selenoid与Docker的结合使用。 <br></li><li> 安装Selenoid的最简单方法是下载Configuration Manager，它用于自动安装<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b>Aerokube</b></a>产品（即Selenoid） <br></li><li> 将下载的文件重命名为<i>cm.exe</i> （以便于交互） <br></li><li> 使用以下命令运行Selenoid： <br><br>  <i>./cm.exe电磁启动--vnc</i> <br>  <i>./cm.exe selenoid-ui启动</i> </li></ul><br>  <i>./cm.exe selenoid start -vnc</i>命令的结果是，图像将随VNC服务器一起加载，即可以实时查看浏览器屏幕的图像。 同样，在执行此命令期间，将下载最新版本的Selenoid以及容器，Web驱动程序可执行文件，配置文件，并且最后一步将立即启动Selenoid本身。 <br><br>  <i>使用</i>以下命令<i>./cm.exe selenoid-ui</i> start，我们下载并运行<b>Selenoid UI-</b>一个图形外壳，通过它可以实时查看测试进度，脚本执行的视频记录，配置文件示例，收集一些统计信息等。 d。 <br><br>  Selenoid默认在标准的Selenium 4444端口上运行，可以使用<i>--port开关</i>重新定义该端口。 <br><br>  Selenoid是为在大型Selenium群集中工作而创建的，因此没有内置的用户界面。 因此尝试打开 <br>  <s><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">本地主机</a></s>测试的端点<s>：4444 / wd / hub</s>将返回404错误。 <br><br><h4>  Selenoid UI统计信息和会话 </h4><br>  Selenoid UI可以从以下<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">网址</a>获得： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">http：//本地主机：8080 /</a> <br><br><img src="https://habrastorage.org/webt/_f/oy/rb/_foyrbnw27c5zmpypzanlfdzwdu.png"><br><p> 在这里，我们可以了解统计数据和会话。 查看当前配额使用情况，待处理的浏览器和队列本身。  Selenoid UI通过SSE接收更新，因此您无需刷新浏览器中的页面即可查看情况。 暂时中断后，页面内容将自动刷新。 <br></p><br><p> 如果我们正在谈论在各种设备上同时进行测试：例如，我们有一个具有实时聊天功能的跨平台Web应用程序，那么我们就可以同时测试它们之间的交互，这当然很方便。 </p><br><h4>  Selenoid UI的功能 </h4><br>  Selenoid UI还具有以下功能： <br><br><img src="https://habrastorage.org/webt/rv/0t/pj/rv0tpju5jxdgoyveokqbuhq5_la.png"><br><br> 我们可以从可用浏览器列表中选择一个浏览器，并且用户界面将为我们提供具有正确<i>功能</i>的示例设置。 屏幕截图显示了这些示例可用于多种语言。 <br><br><img src="https://habrastorage.org/webt/yq/fr/cl/yqfrclbbutpdlszforvqlyjl2tq.png"><br><br> 选择浏览器时，我们可以直接在界面中手动启动它。 在执行测试期间，可以实时连接到<i>vnc</i>端口并访问所需浏览器的屏幕，甚至可以干预执行自动测试的过程。 <br><br><h4> 日志和VNC </h4><br><p> 如果使用功能<i>enabaleVnc = true</i> ，那么您可以在页面上看到可用统计信息的列表。  VNC允许我们查看浏览器并与其进行交互。 虽然我们的日志将显示浏览器的所有操作。 </p><br>  VNC会话： <br><img src="https://habrastorage.org/webt/7p/pz/k1/7ppzk1cvnbmulvkndmifleukq1u.png"><br><br> 全屏VNC模式如下： <br><img src="https://habrastorage.org/webt/28/ot/4j/28ot4j3qmtke8tnzah8fsja-4eq.png"><br><br> 即使没有VNC，您也可以查看每个会话的Docker容器日志。 也就是说，例如，如果您在安装Selenoid本身时未使用--vnc标志，那么您将仅看到日志。 <br><img src="https://habrastorage.org/webt/bc/qx/cj/bcqxcjiqbxv5-agmiq60ejiohwi.png"><br><br> 也可以观看我们的测试视频。 您可以通过打开<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">http：//本地主机：4444 / video /</a>或转到Selenoid UI中的“视频”选项卡来访问视频文件。 <br><br><h4> 连接到Selenide Selenoid项目以在Docker容器中运行测试 </h4><br> 为了将Selenoid连接到<b>BeforeClass</b>批注，我们需要添加以下配置： <br><br><pre> <code class="java hljs">Configuration.remote = <span class="hljs-string"><span class="hljs-string">"http://localhost:4444/wd/hub"</span></span>; Configuration.browser = <span class="hljs-string"><span class="hljs-string">"chrome"</span></span>; Configuration.browserSize = <span class="hljs-string"><span class="hljs-string">"1920x1080"</span></span>; DesiredCapabilities capabilities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); capabilities.setCapability(capabilityName: <span class="hljs-string"><span class="hljs-string">"enableVNC"</span></span>, value: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); capabilities.setCapability(capabilityName: <span class="hljs-string"><span class="hljs-string">"enableVideo"</span></span>, value: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); Configuration.browserCapabilities = capabilities;</code> </pre> <br> 我们删除了<i>属性baseurl</i> ，该<i>属性</i>指示在哪个浏览器上运行了测试，因为现在我们使用该属性 <br>  <i>Configuration.browser =“ chrome”</i> ; <br><br> 在一个项目中，它看起来像这样： <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Url    Configuration.remote = "http://10.0.75.1:4444/wd/hub"; //     Configuration.browser = "chrome"; //   Configuration.browserSize = "1920x1080"; //   DesiredCapabilities,         - DesiredCapabilities capabilities = new DesiredCapabilities(); //         capabilities.setCapability(capabilityName: "enableVNC", value: true); //       capabilities.setCapability(capabilityName: "enableVideo", value: true); // Browser capabilities Configuration.browserCapabilities = capabilities;</span></span></code> </pre><br><h4>   Selenoid </h4><br><ul><li>     :  Selenoid      <i>Tmpfs</i> –   ,       .   ,  ,   ,      . </li><li> Selenoid     :          .           <i>Browser Capabilities</i> . </li><li>  :    Selenoid    Google Chrome      <i>true</i>     <i>Browser Capabilities</i> : <br><br> <i>ChromeOptions options = new ChromeOptions();</i> <br> <i>options.setCapability(“enableVideo”,true);</i> </li></ul><br><h4>  Selenoid  Docker </h4><br> Selenoid     ,   ,      . ,  Windows    Internet Explorer,     . Selenoid     “”   Selenium   Internet Explorer, Firefox  Chrome  Windows, ,   Selenoid  Internet Explorer. <br><br>    : <br><br> 1.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">IEDriverServer</a>     -  (   C: \) <br><br> 2.     <a href="" rel="nofollow">Selenoid</a> <br><br> 3.    <i>browsers.json</i> <br><br>   browsers.json: <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"internet explorer"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-string"><span class="hljs-string">"11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"11"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"image"</span></span>: [<span class="hljs-string"><span class="hljs-string">"C:\\IEDriverServer.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"--log-level=DEBUG"</span></span>] } } } }</code> </pre> <br><br> 4.  Selenoid: <br> <i>./selenoid_win_amd64.exe -conf ./browsers.json -disable-docker</i> <br><br> 5.  ,  endpoint <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">http://localhost:4444/wd/hub</a>   <i>capabilities</i> : <br> <i>browserName = internet explorer</i> <br> <i>version = 11</i> <br><br> 6.  ,   Chrome,     Chromedriver , ,  browsers.json <br><br> 7.   Selenoid     ,    Selenoid   <i>-capture-driver-logs</i> ,          . <br><br><h4>   </h4><br>    <b>Selenide + Selenoid</b>  <b>Docker</b>         .   ,                      ,       ,           . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN473454/">https://habr.com/ru/post/zh-CN473454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN473440/index.html">领导者必要的最低心理</a></li>
<li><a href="../zh-CN473442/index.html">肯定会出错，这很好，那就是：如何在三人一组的情况下赢得黑客马拉松</a></li>
<li><a href="../zh-CN473444/index.html">不竞争协议：主要是不要害怕</a></li>
<li><a href="../zh-CN473446/index.html">免费DevOops 2019和C ++ Russia 2019 Piter</a></li>
<li><a href="../zh-CN473452/index.html">人工智能机器人InterSystems IRIS</a></li>
<li><a href="../zh-CN473456/index.html">防御质量保证的最后一个领域：自动错误检测</a></li>
<li><a href="../zh-CN473460/index.html">关于数学问题</a></li>
<li><a href="../zh-CN473462/index.html">安全周44：NordVPN，TorGuard和Half Hack</a></li>
<li><a href="../zh-CN473468/index.html">了解贝叶斯定理</a></li>
<li><a href="../zh-CN473470/index.html">具有改进的合并请求和审核API依赖关系的GitLab 12.4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>