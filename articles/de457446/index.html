<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå™Ô∏è ü§Ω üí¥ Aufbau und Betrieb eines fehlertoleranten Anycast-Netzwerks üì∫ üë®üèª‚Äçüè´ üë©üèæ‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Das Folgende ist eine Transkription des Berichts von Evgeny error2407 Bogomazov (Netzwerk-F & E-Ingenieur) und Dmitry h8r Shemonaev (Leite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aufbau und Betrieb eines fehlertoleranten Anycast-Netzwerks</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/qrator/blog/457446/">  Hallo Habr!  Das Folgende ist eine Transkription des Berichts von Evgeny <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">error2407</a> Bogomazov (Netzwerk-F &amp; E-Ingenieur) und Dmitry <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">h8r</a> Shemonaev (Leiter des NOC) aus der Vergangenheit UPTIMEDAY.  Video am Ende des Beitrags. <br><br><img src="https://habrastorage.org/webt/h2/kk/hf/h2kkhfbh4bzqqwtsh2x1_vsxjrk.png"><br><blockquote>  Heute m√∂chten wir dar√ºber sprechen, welche Probleme beim Aufbau eines Anycast-Netzwerks auftreten.  Warum sind wir darauf gekommen und was machen wir dort? </blockquote><a name="habracut"></a><br><img src="https://habrastorage.org/webt/_f/pb/lr/_fpblrppj9--llxvsztbw-nrzpy.png"><br>  Bei Qrator Labs bauen wir unser eigenes Anycast-Netzwerk auf, um spezielle Probleme zu l√∂sen, die sich von denen ‚Äûnormaler‚Äú Telekommunikationsbetreiber unterscheiden.  Dementsprechend haben wir in diesen Regionen Pr√§senzpunkte - wir haben nur vergessen, Russland hier hinzuzuf√ºgen.  Und das bedeutet, dass wir viele Geschichten dar√ºber haben, wie man es macht und was nicht.  Heute werden wir einige davon mit Ihnen teilen. <br><br><img src="https://habrastorage.org/webt/ga/ai/xk/gaaixkdwusnkgwqc4h4wt_6kake.png"><br>  Was werden wir sagen, wenn man bedenkt, dass das Thema anfangs umfangreich ist?  Zuerst wollten wir nur Fragen und Antworten (Fragen und Antworten) machen, aber wir wurden trotzdem gebeten, den Bericht zu lesen.  Wenn wir also nichts erz√§hlen, aber definitiv keine Zeit haben, fangen Sie uns anschlie√üend am Rande. <br><br>  Im Rahmen des geplanten Versuchs werden wir versuchen, √ºber den Unterschied zwischen dem Balancing mit DNS und BGP zu sprechen.  Wie Sie neue Websites ausw√§hlen und worauf Sie achten m√ºssen, um sp√§tere Schmerzen zu vermeiden.  Wie man all dies unterst√ºtzt und wie viel diese schwierige Aufgabe Dmitry erz√§hlen wird. <br><img src="https://habrastorage.org/webt/ai/so/3s/aiso3sgur0rj7nwml4w5zjzilhe.png"><br>  Lassen Sie uns zun√§chst feststellen, wie vertraut Sie mit dem Thema sind. <br>  - Wie viele wissen, was Anycast ist und warum es ben√∂tigt wird?  (Etwa ein Drittel der H√§nde erhebt sich in der Halle) <br>  - Und wer ist mit DNS vertraut und hat den Server konfiguriert?  (ungef√§hr die gleiche Anzahl von H√§nden) <br>  - Und BGP (zwei H√§nde im Rahmen) <br><br>  Immer noch viel. <br><br>  - Nun, die letzte Frage - wer kennt NOC?  Wer hatte Probleme mit Lieferanten und wer versuchte sie zu l√∂sen?  (Die Hand des Systemadministrators Habr ist im Rahmen sichtbar) <br><br>  Gro√üartig.  In diesem Fall hoffe ich, dass das, was wir Ihnen sagen werden, auftaucht. <br><img src="https://habrastorage.org/webt/ei/zh/dc/eizhdckf0att6kbopdgn49ngwji.png"><br>  Bevor wir zu Anycast √ºbergehen, wollen wir sehen, warum es ben√∂tigt wird.  Sie haben eine Anwendung, mit der Sie Kundenanfragen bearbeiten m√∂chten.  Sie werden irgendwo gehostet - w√§hrend Sie nicht besonders dar√ºber nachdenken.  Kaufen Sie den DNS-Namen, l√∂sen Sie ihn auf und so weiter.  Dann unterschreiben Sie das Zertifikat, weil HTTPS.  Ihre Anwendung w√§chst. <br><img src="https://habrastorage.org/webt/yx/z8/kt/yxz8ktime7shqpt5sesf60mtw5k.png"><br>  Zuerst m√ºssen Sie die Last handhaben.  Wenn Ihre Anwendung gleichzeitig "schie√üt" - das hei√üt, sie wird sehr beliebt, kommen viel mehr Benutzer zu Ihnen.  Sie m√ºssen Eisen kaufen und die Last darauf ausgleichen. <br><br>  Dar√ºber hinaus k√∂nnen besonders anspruchsvolle Kunden mit den Worten auftauchen: "Leute, f√ºr diese Art von Geld sollten Sie immer und √ºberall verf√ºgbar sein!"  Dies f√ºhrt dazu, dass Sie die Redundanz von Rechenressourcen nicht nur f√ºr die Verarbeitung von Spitzenlasten, sondern einfach als Reserve festlegen. <br><br>  Dar√ºber hinaus wurde heute bereits in anderen F√§llen erw√§hnt, dass Sie die Dr√ºsen nicht in einem Rechenzentrum platzieren k√∂nnen. Es kann zu einer Naturkatastrophe kommen, was bedeutet, dass die Anwendung Ausfallzeiten hat, die finanzielle und andere Verluste verursachen.  Wenn Ihre Anwendung ausreichend gewachsen ist, sollten Sie sich daher bereits in mehreren Rechenzentren befinden, da dies sonst zu Problemen f√ºhren kann. <br><img src="https://habrastorage.org/webt/ak/ml/9l/akml9ljdopye_n4kf1u6lqrlq20.png"><br>  Das Problem hat eine Kehrseite: Wenn Ihre Anwendung zeitkritisch ist, wie bei Finanzanalysen oder im Handel, ist es wichtig, dass Sie Anfragen so schnell wie m√∂glich an Ihre Benutzer senden.  Die ber√ºchtigte Latenz, mit der zwei Punkte verbunden sind.  Die erste - wenn Sie eine Anfrage so schnell wie m√∂glich stellen m√∂chten, sollte die Anzahl der Anfragen und Antworten auf diese so gering wie m√∂glich sein.  Tatsache ist wiederum, dass, wenn der Benutzer zum ersten Mal eine Verbindung zu Ihnen herstellt, alles nicht funktioniert und er gezwungen ist, alle Kreise der H√∂lle zu durchlaufen.  Der zweite Punkt ist die Lichtgeschwindigkeit.  Ein Paket von Westeuropa nach Russland kann nicht schneller als eine bestimmte Anzahl von Millisekunden sein, es gibt nichts zu tun. <br><img src="https://habrastorage.org/webt/rv/8b/f0/rv8bf0jfbctzabai0cuqh6q18ni.png"><br>  Es ist notwendig, sich in mehreren Rechenzentren zu befinden, da wir Redundanz w√ºnschen und potenziellen Kunden n√§her stehen m√ºssen.  Wenn Ihre Hauptkundenregion beispielsweise Amerika ist, platzieren Sie Ihre Ger√§te dort, damit der Verkehr nicht durch andere L√§nder und Teile der Welt flie√üt. <br><br>  Es stellt sich heraus, dass Sie irgendwann in verschiedenen Teilen der Welt an verschiedenen Orten pr√§sent sein m√ºssen.  Und das ist immer noch kein Anycast. <br><img src="https://habrastorage.org/webt/ko/uv/q2/kouvq2rg2extkysj5rffo8btofe.png"><br>  Sie ben√∂tigen also einige Websites.  Irgendwie m√ºssen Sie sie ausw√§hlen, beide anfangs neu, und ihre Skalierbarkeit verstehen - bei √úberlastung m√ºssen Sie zus√§tzliche Hardware kaufen. <br><br>  Wenn Sie bereits mehrere Websites haben, m√ºssen Sie lernen, wie Sie Benutzer zwischen diesen verteilen.  Es gibt zwei St√ºhle: BGP und DNS. <br><img src="https://habrastorage.org/webt/ve/zp/aj/vezpajk-xzaj4g0_rohgo3ouhqi.png"><br>  Ab zwei Punkten beginnen wir mit dem letzten.  Und wieder zwei Hauptans√§tze.  Im ersten Fall haben verschiedene Sites unterschiedliche IP-Adressen. Wenn ein Benutzer eine Anfrage stellt, erh√§lt er die IP einer bestimmten Site und ordnet sie zu. <br><br>  Was entscheiden wir hier?  Wir m√∂chten, dass ein Benutzer aus einer bestimmten Region zu einer Site in derselben Region gelangt.  Die einfachste und d√ºmmste L√∂sung ist die Verwendung von GeoDNS.  Sie haben ein Verst√§ndnis f√ºr die Regionen, in denen sich Pr√§fixe befinden. Sie nehmen diese Daten, √ºbertragen sie auf den DNS-Server und ordnen die Benutzer entsprechend der richtigen Site zu, wenn die Quell-IP vom richtigen Pr√§fix stammt.  Aber es gibt ein Problem - Resolver.  Und ungef√§hr 15-20% der Anfragen kommen von Resolvern - das hei√üt, die Quell-IP wird 8.8.8.8 sein.  Wo soll man das hinstellen? <br><br>  Zu diesem Zweck gibt es EDNS, mit dem im Rahmen der Anforderung das urspr√ºngliche Client-Subnetz √ºbertragen werden kann, aus dem es stammt.  Wie Sie wissen, fand am 1. Februar 2019 der DNS-Flaggentag statt. Ab diesem Tag m√ºssen alle DNS-Server diese Erweiterung unterst√ºtzen. <br><br>  In diesem Beispiel k√∂nnen Sie entweder einen oder mehrere Standorte haben, an denen sich DNS-Server befinden, die Benutzer zuordnen - und die Server selbst k√∂nnen auf der ganzen Welt verteilt werden.  Und bereits im Rahmen von DNS besteht die M√∂glichkeit, Anycast zu verwenden - dar√ºber werden wir etwas sp√§ter sprechen. <br><br>  Im allgemeinen Schema ordnen Sie den Benutzer der ihm am n√§chsten gelegenen Site zu und geben die Adresse dieser bestimmten Site an.  Es wird weniger h√§ufig verwendet. <br><br>  Der dritte Ansatz bezieht sich auf die Tatsache, dass selbst wenn der Benutzer aus derselben Region stammt, in der sich die Site befindet, dies nicht bedeutet, dass das Problem der Verz√∂gerungen gel√∂st wurde.  Es kann noch rentabler sein, den Benutzer auf einen anderen Standort zu √ºbertragen, da die Region √ºberlastet werden kann, wenn alternative Routen verf√ºgbar sind.  W√§re es sch√∂n, das zu benutzen?  Leider gibt es derzeit fast keine L√∂sungen, um etwas √Ñhnliches zu tun.  Facebook hat irgendwie einen Bericht gezeigt, dass er das getan hat - aber es gibt keine Box, alles muss mit eigenen H√§nden gemacht werden. <br><img src="https://habrastorage.org/webt/6a/m1/qp/6am1qpmydhm7ztcbihnlxg9uxn4.png"><br>  Was haben wir mit DNS? <br><br>  Die Vorteile sind, dass verschiedenen Benutzern unterschiedliche Adressen zugewiesen werden k√∂nnen und ein bestimmter Benutzer an eine streng definierte Site gesendet werden kann - das hei√üt, Sie k√∂nnen mit einzelnen Benutzern arbeiten.  Nun, DNS ist einfach zu konfigurieren. <br><br>  Was sind die Nachteile?  Wenn Sie eine granulare Anpassung vornehmen, w√§chst die Konfiguration ziemlich schnell, was mit Ihren H√§nden nicht zu unterst√ºtzen ist.  Brauchen Sie Automatisierung.  Und wenn die Automatisierung falsch durchgef√ºhrt wird, bricht alles zusammen - wenn der DNS l√ºgt, kann auf die Anwendung nicht zugegriffen werden. <br><br>  Wenn Sie dagegen einen DNS-Ausgleich durchf√ºhren, wird der Benutzer einer bestimmten Site zugeordnet und seine IP wird anf√§llig.  Dies ist der Grund, warum wir zu Hause keinen DNS-Ausgleich verwenden, da in diesem Fall der gesamte Datenverkehr des Angriffs genau an einem Punkt flie√üen kann und ihn deaktiviert. <br><br>  Und wie bereits erw√§hnt, unterst√ºtzt DNS den sofortigen Latenzausgleich nicht.  Und es selbst zu tun ist sehr schwierig. <br><img src="https://habrastorage.org/webt/9k/on/ng/9konngtwrxyf4kmhqlj-gjytbnw.png"><br>  Kommen wir endlich zu den feineren Dingen, n√§mlich BGP anycast. <br><br>  Dies ist genau unser Fall.  Was ist der Punkt?  Alle Sites haben dieselbe IP oder geben dasselbe Pr√§fix an.  Der Benutzer ordnet die "n√§chstgelegene" Site zu.  Aus Sicht von BGP ‚Äûam n√§chsten‚Äú - ein solches Pr√§fix wird auf verschiedenen Routen angek√ºndigt. Wenn der Betreiber mehrere Routen zur beworbenen Site hat, w√§hlt er meistens die k√ºrzeste.  Wieder aus Sicht von BGP.  Bald werden wir erkl√§ren, warum das schlecht ist. <br><br>  BGP funktioniert auch mit der Verf√ºgbarkeit von Pr√§fixen, sodass Sie immer in einem Subnetz arbeiten und einzelne IPs nicht manipulieren k√∂nnen. <br><br>  Da von allen Sites dasselbe Pr√§fix angek√ºndigt wird, werden alle Benutzer aus derselben Region zu derselben Site weitergeleitet.  Der Angreifer hat keine M√∂glichkeit, die Last von einer Region in eine andere zu √ºbertragen. Sie m√ºssen also an jedem Ort so viel Energie gewinnen, wie der Betreiber, der diese Route gew√§hlt hat, m√∂chte.  Auch wenn Sie nicht punkten, kann es dennoch gesch√ºtzt werden. <br><br>  Das gleiche Pr√§fix wird angek√ºndigt - was k√∂nnte einfacher sein?  Es gibt aber auch Probleme. <br>  Das erste ist, dass Sie aufgrund der Notwendigkeit, weltweit dasselbe Pr√§fix anzuk√ºndigen, gezwungen sind, anbieterunabh√§ngige Adressen zu kaufen, die um ein Vielfaches teurer sind. <br><br>  Der zweite Grund ist die Tatsache, dass Benutzer aus einer Region nicht einfach in eine andere geworfen werden k√∂nnen, wenn pl√∂tzlich einige von ihnen unzul√§ssig sind oder um den Angriffsverkehr √ºber andere Websites zu diversifizieren, weil einige von ihnen verletzt sind.  Es gibt keine solchen Stifte. <br><br>  Das dritte Problem ist, dass es im Rahmen von BGP sehr einfach ist, die ‚Äûfalsche‚Äú Site und die ‚Äûfalschen‚Äú Anbieter auszuw√§hlen.  Es scheint Ihnen, dass Sie Redundanz und Verf√ºgbarkeit haben, aber in Wirklichkeit wird es weder das eine noch das andere geben. <br><img src="https://habrastorage.org/webt/mo/bq/tt/mobqttqpsg2o2yhh9yzydelt008.png"><br>  Sie haben mehrere Websites, zwischen denen Sie Benutzer verteilen m√∂chten.  Was sind die Handles, um eine bestimmte Region einzuschr√§nken und Benutzer zu einer bestimmten Site zu ziehen? <br><br>  Es gibt Geo Community.  Warum sind sie?  Ich m√∂chte Sie daran erinnern, dass Sie aus Sicht von BGP die n√§chstgelegene Route w√§hlen.  Und Sie haben einen Tier-1-Betreiber, zum Beispiel Level3, der weltweit √ºber einen eigenen Kofferraum verf√ºgt.  Der Level3-Client befindet sich in zwei Hoffnungen von Ihnen, wenn Sie direkt mit ihm verbunden sind.  Und ein lokaler Betreiber - in drei.  Dementsprechend ist ein Betreiber aus Amerika Ihnen n√§her als ein Betreiber aus Russland oder Europa, da dies aus Sicht von BGP so ist. <br><br>  Mit Geo Community k√∂nnen Sie die Region einschr√§nken, in der ein so gro√üer und internationaler Betreiber Ihre Route ank√ºndigt.  Das Problem ist auch, dass sie nicht immer verf√ºgbar sind (Geo Community). <br><br>  Wir haben mehrere F√§lle, wenn es um uns selbst ging.  Dim? <br><br>  (Dmitry Shemonaev ergreift das Wort) <br><img src="https://habrastorage.org/webt/no/w0/6i/now06iptknl3uf_utkuguxmotn0.png"><br><br>  Viele Betreiber bieten dies nicht an und sagen, dass wir nichts f√ºr Netzneutralit√§t, Freiheit usw. einschr√§nken werden.  Wir m√ºssen den Betreibern lange erkl√§ren, wer wir sind, warum wir es wollen und warum es f√ºr uns so wichtig ist, und auch erkl√§ren, warum dies nicht f√ºr die Neutralit√§t gilt, die sie im Sinn haben.  Manchmal funktioniert dies - und manchmal auch nicht, und wir lehnen es einfach ab, mit potenziell interessanten Betreibern zusammenzuarbeiten, da eine solche Zusammenarbeit zu weiteren Schmerzen beim Betrieb unseres Dienstes f√ºhren wird. <br><br>  Au√üerdem sto√üen wir h√§ufig auf die Tatsache, dass es eine Reihe von Betreibern gibt, die Eugene bereits erw√§hnt hat - dies sind Tier-1-Betreiber, die keinen Verkehr von irgendjemandem kaufen und nur Verkehr zwischen ihnen austauschen.  Daneben gibt es jedoch mindestens ein paar Dutzende von Betreibern, die nicht Tier-1 sind - sie kaufen Datenverkehr, haben aber gleichzeitig Netzwerke auf der ganzen Welt bereitgestellt.  Sie m√ºssen nicht weit gehen - von uns entfernt ist es Rostelecom oder ReTN, etwas weiter entfernt gibt es wunderbare Telekommunikationsunternehmen in Taipeh, China Unicom, Singtel und so weiter. <br><br>  Und in Asien waren wir ziemlich oft mit einer solchen Situation konfrontiert, dass wir anscheinend mehrere Standorte in Asien haben und aus Sicht dieser Region mit mehreren ziemlich gro√üen Betreibern verbunden sind.  Wir sind jedoch st√§ndig mit der Tatsache konfrontiert, dass der Verkehr aus Asien √ºber Europa zu unserem Standort gelangt oder eine Transatlantikreise unternimmt.  Aus Sicht von BGP ist dies f√ºr sich genommen ganz normal, da die Latenz nicht ber√ºcksichtigt wird.  Aber die Anwendung leidet unter solchen Bedingungen, auch ihre Benutzer - im Allgemeinen leidet jeder, aber aus Sicht von BGP ist alles in Ordnung. <br><br>  Und Sie m√ºssen einige √Ñnderungen mit Ihren H√§nden vornehmen, Reverse Engineering durchf√ºhren, wie das Routing dieses oder jenes Operators angeordnet ist, manchmal verhandeln, fragen, betteln, knien.  Tun Sie im Allgemeinen alles, um diese Probleme zu l√∂sen.  Damit ist unser NOC mit beneidenswerter Regelm√§√üigkeit konfrontiert. <br><br>  In der Regel erf√ºllen die Betreiber ihre Bed√ºrfnisse und sind in einigen F√§llen bereit, ein bestimmtes Set bereitzustellen ... Aber k√∂nnen diejenigen, die auf Gemeindeebene mit BGP gearbeitet haben, im Allgemeinen ihre H√§nde heben?  (L√§chelt) Gro√üartig!  Das hei√üt, die Betreiber sind bereit, eine Reihe von Community-Managern bereitzustellen, um beispielsweise die lokalen Pr√§ferenzen in einer bestimmten Region zu senken oder Pr√§fixe hinzuzuf√ºgen oder nicht gut anzuk√ºndigen oder etwas anderes. <br><br>  Dementsprechend gibt es zwei M√∂glichkeiten, die Last in BGP auszugleichen.  Das erste ist, wie es auf die Folie geschrieben wird, das sogenannte  steht vor.  Wir k√∂nnen uns den Pfad zu BGP als eine kleine Zeile vorstellen, in der autonome Systeme aufgelistet sind, √ºber die der Paketpfad vom Absender zum Empf√§nger verl√§uft.  Sie k√∂nnen diesem Pfad eine n-te Anzahl autonomer Systeme hinzuf√ºgen. Infolgedessen wird der Pfad erweitert und erh√§lt keine hohe Priorit√§t.  Dies ist eine frontale Methode, die nicht f√ºr alle Funktionen funktioniert. Wenn Sie ein Pr√§fix hinzuf√ºgen, ist es nicht granular, dh jeder sieht es im Kegel des Operators, in dem Sie diese Manipulation ausf√ºhren. <br><br>  Auf der anderen Seite gibt es auch die BGP-Community, die solche markiert, um zu verstehen, woher dieses oder jenes Pr√§fix kommt, wessen es sich in Bezug auf den Betreiber befindet - das hei√üt, ein Fest, ein Kunde oder ein Upstream - und auch an welchem ‚Äã‚ÄãOrt es genommen wird und usw.  Und es gibt Community-Manager, die zum Router zum Bediener gehen und bestimmte Aktionen mit diesem Pr√§fix ausf√ºhren. <br><br>  Die meisten Betreiber haben restriktive Communities.  Nehmen wir zum Beispiel den abstrakten russischen Operator, der im luftleeren Raum mit einer Reihe russischer Operatoren verbunden ist.  Einige von ihnen haben Peer-to-Peer-Beziehungen, die einen Parit√§tsaustausch des Datenverkehrs implizieren, und andere kaufen sie.  Dementsprechend bieten sie Community, um in diese Richtung voranzukommen, indem sie den AS-Pfad erweitern oder lokale Einstellungen nicht ank√ºndigen oder √§ndern.  Wenn Sie mit BGP arbeiten, schauen Sie sich die Community an und erfahren Sie, was der Antragsteller tun kann, um Ihr Lieferant zu werden.  Manchmal sind Communities versteckt und Sie m√ºssen entweder mit Betreibermanagern oder mit technischen Experten kommunizieren, um uns einen bestimmten unterst√ºtzten Satz zu zeigen. <br><br>  Standardm√§√üig wird die Community im Fall der europ√§ischen Region in RIPE DB beschrieben.  Das hei√üt, Sie stellen eine Anfrage an whois, die Nummern des autonomen Systems, und das Feld "Bemerkungen" gibt normalerweise an, was der Bediener in Bezug auf das Markieren und Verwalten der Community hat.  Nicht jeder hat dies, so oft muss man nach verschiedenen interessanten Orten suchen. <br><br>  Sobald Sie mit dem Betrieb von BGP beginnen, sagen Sie im Wesentlichen, dass das Netzwerk Teil Ihrer Anwendung ist und nicht abstrakt, sodass Sie die Risiken ber√ºcksichtigen m√ºssen. <br><br>  Zum Beispiel hatten wir einen Fall mit einem lettischen Finanzinstitut, dessen Pr√§fix, wenn es √ºber unser Netzwerk aufgenommen wurde, in etwa der H√§lfte von Lettland nicht mehr verf√ºgbar war.  Obwohl sich anscheinend nichts ge√§ndert hat - dasselbe Pr√§fix, das wir bei Tier-1-Betreibern in Europa ank√ºndigen -, scheint in Europa alles vorhanden zu sein, einschlie√ülich Redundanz.  Wir konnten uns jedoch nicht einmal vorstellen, dass etwa die H√§lfte der lettischen Betreiber als Grenzger√§te nicht das gesamte Volumen der Vollansicht (die gesamte BGP-Routing-Tabelle) verarbeiten konnte, das zu diesem Zeitpunkt etwa 650.000 Pr√§fixe umfasste.  Sie standen dort, na ja, wenn jemand wei√ü, was der Catalyst 3550 ist, war es genau dort, wo er stand, er konnte nur 12.000 Pr√§fixe.  Nun, sie haben eine bestimmte Anzahl von Pr√§fixen von IX'a erhalten, f√ºr die es nat√ºrlich keine Standardeinstellungen gab.  Zusammen mit diesem von einem anderen Betreiber - dem lettischen Fernsehen, dessen Pr√§fix im IX. Nicht / 24 war, sondern / 22, in dem dieses / 24 stand. <br><br>  Infolgedessen ging er an einen Ort, an dem er nicht wusste, wohin er ihn leiten sollte, und alles flog in die Leitung.  Um dies zu beheben, brauchten wir ungef√§hr zwei Tage und eine st√§ndige Korrespondenz mit den lettischen Betreibern, bis sie uns die Ausgabe von ihrem Grenzger√§t zeigten und wir nur den Hostnamen dort bemerkten.  Hallo allerseits, manchmal macht es so viel Spa√ü. <br><br>  Es gibt viele Betreiber mit altem Eisen.  Es gibt viele Betreiber mit einem seltsamen Verst√§ndnis daf√ºr, wie das Netzwerk funktionieren sollte.  Und jetzt ist dies auch Ihr Problem, wenn Sie mit BGP spielen wollen.  Letztendlich sind viele Bediener einbeinig (ein √ºberlegener Konnektivit√§tsanbieter), sodass sie ihre eigenen Kr√ºckens√§tze haben. <br><img src="https://habrastorage.org/webt/89/zx/is/89zxisdottw3dfx4cxkca1o1xt4.png"><br><br>  (Evgeny Bogomazov f√§hrt fort) <br><br><img src="https://habrastorage.org/webt/l-/dd/wa/l-ddwaj2uwwteduh5wupbhygz1i.png"><br><br>  Wie Sie sehen, kann auch dieses Thema f√ºr eine lange Zeit entwickelt werden und es ist schwierig, es innerhalb von 40 Minuten zu halten. <br><br>  Sie haben also Stifte, mit denen Sie die Region begrenzen m√∂chten.  Lassen Sie uns nun herausfinden, was Sie sich ansehen m√ºssen und was zu beachten ist, wenn Sie auf einer neuen Website untergebracht werden m√∂chten. <br><br>  Der beste Fall ist nicht, Ihre Hardware zu kaufen, sondern sich beim Hosting mit einer Cloud abzustimmen.  Dann k√∂nnen Sie ihm bereits zustimmen, dass Sie sich unabh√§ngig mit bestimmten Anbietern verbinden. <br><br>  Wenn Sie diese Route dennoch eingeschlagen haben, sollten Sie ungef√§hr verstehen, welche Region mit oder ohne Griffe zu dieser Site zusammengef√ºhrt wird.  Dazu m√ºssen Sie modellieren, oder besser gesagt, Sie m√ºssen verstehen, dass, wenn es mehrere Routen von verschiedenen Standorten gibt, welche als die beste ausgew√§hlt wird.  Zu diesem Zweck sollten Sie eine Vorstellung davon haben, wie BGP funktioniert und wie Routen in der aktuellen Situation zirkulieren. <br><br>  Zwei Hauptpunkte sind die L√§nge des Pfades, die durch Pr√§fixe und die lokale Pr√§ferenz beeinflusst wird. Dies besagt, dass Routen von Clients Routen von anderen vorzuziehen sind.  Im Prinzip reichen diese beiden Punkte aus, um zu verstehen, welche Region zusammengezogen wird und wo man aufsteht. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unter anderem sind einige Dinge zu beachten, n√§mlich welche Art von Konnektivit√§t Ihr Lieferant hat, zus√§tzlich die Tatsache, dass einige Lieferanten nicht miteinander kommunizieren (Peer-to-Peer-Kriege), und selbst wenn Sie sich mit der regionalen Tier-1 verbinden, bedeutet dies nicht, dass Alle lokalen Benutzer werden Sie sehen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine andere Sache, die oft vergessen wird, ist, dass die Konnektivit√§t in IPv4 und IPv6 v√∂llig unterschiedlich ist und nicht zueinander portierbar ist.</font></font><br><img src="https://habrastorage.org/webt/5w/1o/mo/5w1omookjlxi8nlba_jya-k0p-g.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und hier kommen wir zum Hauptpunkt. Beantwortung der Frage: "Wo soll ich aufstehen?" Die Wahl scheint offensichtlich zu sein. Wenn Sie Benutzer in der Region haben, erreichen Sie IX in dieser Region und es gibt nichts mehr zu denken. Es gibt Konnektivit√§t, die meisten Benutzer sollten theoretisch damit verbunden sein, und die meisten Inhaltsspezialisten, Unternehmen wie Yandex und andere, stellen zuerst eine Verbindung zu IXs und erst dann zu Lieferanten her. Lieferanten haben jedoch m√∂glicherweise eindeutige Kunden, einige Lieferanten selbst sind bei IX nicht anwesend, und daher k√∂nnen Sie diese Benutzer nicht an sich selbst weiterleiten - sie werden auf seltsame Weise zu Ihnen gehen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei der Auswahl der Lieferanten k√∂nnen Sie den Kopf nicht ausschalten. In einigen F√§llen f√ºhrte der falsche Ansatz zu einem Problem. Lieferanten sind unsere Wahl, denn wenn Sie nicht √ºber viele Ressourcen f√ºr die Verbindung verf√ºgen und zu den gr√∂√üten regionalen Akteuren gehen, erhalten Sie dieselbe Konnektivit√§t wie bei IX. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sag mir, wie ich die richtigen Lieferanten ausw√§hle, Dima. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(und wieder Dmitry Shemonaev)</font></font><br><br>  Okay<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stellen wir uns vor, wir haben einen Punkt und die Region, die uns interessiert, ist Russland. Wir haben einen Punkt in einem bedingt guten Rechenzentrum in Moskau, wir arbeiten mit unserem eigenen autonomen System, unseren eigenen Pr√§fixen und haben beschlossen, mit BGP anycast zu skalieren - stilvoll und modisch. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Unternehmen entschied zusammen mit technischen Kollegen, dass es von Wladiwostok nach Moskau eine sehr gro√üe RTT gibt, und das ist schlecht, das hei√üt nicht gut. Nehmen wir an, wir bleiben in Moskau und machen Nowosibirsk ein Ende. Alles wird besser, RTT wird nat√ºrlich fallen. Kaum gesagt als getan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies wirft die Frage nach einem Standort f√ºr Ger√§te auf, aber dies liegt etwas au√üerhalb des Rahmens unseres heutigen Gespr√§chs, aber die Frage nach der Auswahl eines Betreibers ist durchaus.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es scheint, dass die Wahl offensichtlich ist - in Moskau sind wir mit dem bedingten Moskvatelekom verbunden, bleiben wir auch in Nowosibirsk dabei. Ja, im Prinzip k√∂nnen wir uns auf das interne Routing des Anbieters verlassen, aber dies ist nicht immer korrekt. In diesem Fall legen wir alle Eier in einen Korb und m√ºssen verstehen, dass das Routing gem√§√ü dem IGP des Betreibers, gelinde gesagt, m√∂glicherweise nicht optimal ist, da es nicht immer klar ist was treibt es an. Manchmal ist es verst√§ndlich, manchmal ist es nicht sehr - jetzt geht es nicht darum, au√üerdem hat mir das Management verboten zu schw√∂ren, so dass ich einige Beispiele nicht im Detail erkennen kann.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moderne Trends sind so, dass sogar Moskvatelecom sagen kann, dass die Zeit f√ºr SDN gekommen ist, und jetzt werden wir einen wunderbaren Controller einsetzen, der das Netzwerk steuert. Und irgendwann kann ein solcher Controller dieses Netzwerk einfach zerst√∂ren. Nebenbei erinnere ich mich nicht an einen solchen Fall, insbesondere mit einem SDN-Controller, aber erst k√ºrzlich in Amerika √ºberlie√ü ein gro√üer Betreiber (CenturyLink) dem Netzwerkgott eine Netzwerkkarte, und das gesamte Netzwerk war in den USA instabil. Wegen einer Netzwerkkarte. Das NOC dieses Betreibers hat dieses Problem drei oder vier Tage lang behoben. Wegen einer Netzwerkkarte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie mit einem Betreiber verbunden sind, gratuliere ich Ihnen herzlich.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nun, dann haben sie entschieden - wir werden nicht mit einem bedingten Einzelbetreiber in Moskau und Nowosibirsk zusammenarbeiten. Hier - mit Moskvatelecom und dort - mit Novosibirsktelecom (alle Zuf√§lle sind zuf√§llig). Die Gr√∂√üe der Kundenkegel dieser beiden Telekommunikationsger√§te unterscheidet sich wie eine Schildkr√∂te von einem Elefanten, und Sie erhalten Ihren gesamten Datenverkehr dorthin, wo der Hauptkundenkegel f√§llt, dh zu Moskvatelecom in Moskau. Es ist immer ratsam, dass die Betreiber parit√§tisch sind und in dem Gebiet der Region, in der sich Ihr Interesse befindet, Peerings untereinander haben. In Russland hatten vor einigen Jahren die gr√∂√üten Betreiber wie Rostelecom und TTK Peerings in Moskau, St. Petersburg, Nischni Nowgorod, Nowosibirsk und anscheinend in Wladiwostok. Daher verlief der Verkehr zwischen diesen Betreibern plus oder minus optimal.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Bediener muss jedoch noch richtig ausgew√§hlt werden. Also hat er eine Community, also hat er ein NOC. All dies ist wirklich wichtig, denn letztes Jahr gab es einen wunderbaren Fall, in dem ein ziemlich gro√üer russischer Betreiber einige seiner Dienste testete und nachts viele Pr√§fixe aus der Stadt St. Petersburg mit der Einf√ºgung seines autonomen Systems in den Server der zweiten Route ank√ºndigte DE-CIX in Frankfurt. Er k√ºndigte es dort mit einer Blackhole-Community an.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infolgedessen waren viele Betreiber und Rechenzentren in St. Petersburg beispielsweise vom TTK-Netzwerk aus nicht erreichbar. Dies wirkte sich auch auf uns aus, aber wir konnten dies umgehen, da wir zwischen unseren Punkten ein eigenes Netzwerk haben, irgendwo √ºberlagert und irgendwo physisch, und den Verkehr vom Problembetreiber zu dem zur√ºckgeleitet haben, bei dem es keine Probleme gab. Im Allgemeinen √ºberwunden. Aber ich sage Ihnen dies, damit Sie wissen, dass das NOC des Betreibers angemessen sein muss, da in diesem Fall das NOC des T√§ters in der Nacht von Freitag auf Samstag nicht Kontakt aufgenommen hat, sondern erst am Montag aufgewacht ist. Dreit√§gige teilweise Unzug√§nglichkeit f√ºr eine Reihe von Betreibern. Besser dreimal √ºberlegen.</font></font><br><img src="https://habrastorage.org/webt/y9/tl/j7/y9tlj7bpbxs6ftkb8bq-d4vnvww.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommen wir zur√ºck zu NOC. Network Operations Center - ein Netzwerkverwaltungszentrum. Dies ist die Abteilung des Unternehmens, die mit dem Betrieb des Netzwerks, dem Netzwerkbetrieb usw. befasst ist. Antworten auf eine Reihe von Tickets, die bez√ºglich des Netzwerks eingegangen sind. Was m√∂chten Sie hinzuf√ºgen? Die Spezialisten, die in der Aichi-Summe in diesem Raum aufgewachsen sind, wissen wahrscheinlich alles Gute √ºber die √úberwachung. Das ist wirklich wichtig. In einigen F√§llen m√ºssen sehr spezifische Dinge √ºberwacht werden.</font></font><br><img src="https://habrastorage.org/webt/kc/6y/vq/kc6yvqtrzauok7myxr58bvlyces.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einige Benutzer beschweren sich m√∂glicherweise, dass "alles irgendwie schlecht ist" und k√∂nnen nicht die Diagnose stellen, die erforderlich ist, um mit der Arbeit zur Korrektur der Situation zu beginnen. Es gibt ein schlechtes Signal - und was und wo ist nicht klar. In diesem Fall versuchen wir, mit dem NOC des Operators in dem Client-Kegel zu interagieren, in dem sich dieser Benutzer befindet. Wenn dies nicht funktioniert, sehen wir uns die Korrelationen an - die M√∂glichkeit des RIPE Atlas-Projektknotens in diesem Kegel. Im Allgemeinen sammeln wir so gut wir k√∂nnen. Wir sind bereit f√ºr das, was sie uns nicht immer geben k√∂nnen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In einigen F√§llen ist es sinnvoll zu √ºberwachen, mit welcher Community dieses oder jenes Pr√§fix zu Ihrem Grenzrouter kommt, und eine historische Retrospektive zu sammeln, entschuldigen Sie die Tautologie. Zum Beispiel nehmen wir drei Betreiber: Megafon, Rostelecom und Transtelecom. Angenommen, alle haben einen Blick auf das Territorium der Russischen F√∂deration und Sie sind mit einem bedingten Rostelecom verbunden, oder es spielt keine Rolle. In diesem Fall sehen Sie die Pr√§fixe, in denen sich Ihre Benutzer befinden, mit einer Art Markierungsgemeinschaft. Sie k√∂nnen gesammelt, aufgezeichnet werden, und wenn etwas passiert, √§ndert sich die Community. Zum Beispiel erhalten Sie ein Pr√§fix mit der Community, dass dies ein Fest in Russland ist. Ja, gut aufgenommen. Und dann hat sich diese Gemeinschaft dahingehend ge√§ndert, dass dies ein Fest in Frankfurt ist.</font></font> Was bedeutet das?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dass diese Betreiber Peer-to-Peer-Beziehungen abgebrochen haben und Sie und Latenz nicht sehr gut abschneiden - Sie durchlaufen die europ√§ische Schleife. In diesem Fall k√∂nnen Sie etwas proaktiv tun, dies ist jedoch zeitaufw√§ndig und erfordert Entschlossenheit sowie andere Eigenschaften. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und wenn m√∂glich, automatisieren Sie alles - es war vor 10 Jahren schwierig, und jetzt gibt es viele Dienstprogramme wie Ansible, Chef, Puppet, die mit Netzwerkelementen interagieren k√∂nnen. Warum ist Automatisierung wichtig? Ich habe BGP schon sehr lange eingerichtet und die erste Regel lautet ungef√§hr so: ‚ÄûMit wem auch immer Sie Ihre BGP-Nachbarschaft einrichten, Sie werden nicht von einer sehr netten Person eingerichtet.‚Äú Aus Sicht dieser Person gilt diese Regel auch f√ºr Sie.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich pers√∂nlich hatte einen Fall, in dem ich alle Peerings von einer Grenze zur anderen in einem Samara-Operator √ºbertragen habe, dessen Namen wir nicht nennen werden. Ich hatte eine Verbindung mit einem gro√üen Inhaltsanbieter - einem Online-Kino - und ich hatte eine Verbindung mit der lokalen Tochter von Rostelecom. Nur mit dem Content Manager hatte ich eine Gigabyte-Verbindung und mit meiner Tochter eine mit 100 Megabyte. Und ich als angenehmer Mensch habe das alles nachts ertragen - ich schaue auf die Grafiken, auf den Hundert-Megabit-Joint und denke: ‚ÄûOh, wie zum Teufel!‚Äú Und dann schaue ich - dieser im Regiment, der im Regiment und ich denke (trifft mich auf die Stirn) - ich habe vergessen, Filter zu machen. Das soll von solchen Aktionen abgeschirmt werden, weil alle anderen akzeptiert haben, dass der Dreifachschlag nur durch Automatisierung gesch√ºtzt werden muss. Automatisierung ist der Feind von schlechten Menschen und ein Freund von guten. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dann bist du es, Zhenya. </font></font><br><img src="https://habrastorage.org/webt/_d/0b/v6/_d0bv6jjg1dic2gjmj9rdbp-azw.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Evgeny Bogomazov f√§hrt fort)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Also haben wir alle ersten Punkte besprochen. Aber bei jeder Sendung endet nicht alles, au√üer ihm m√ºssen Sie andere, zus√§tzliche Dinge im Auge behalten. </font></font><br><img src="https://habrastorage.org/webt/_n/ve/jn/_nvejncgp1tspvfwgu8nvozas8e.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mal sehen, was noch ist. Sie m√ºssen sehen, wie gut die Anwendung in die Verteilung integriert ist. Wenn mehrere Websites vorhanden sind, m√ºssen Sie in der Lage sein, Inhalte auf diesen Websites zu verteilen. Wenn dies nicht m√∂glich ist, gehen alle Benutzer unabh√§ngig von der Verteilung Ihres Systems zu der Site, auf der sich die Anwendung tats√§chlich befindet. Und genau RTT werden Sie nicht speichern.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie jedoch keine Benutzerdaten als solche haben, k√∂nnen Sie die Benutzeranwendung auf dieser Site platzieren - tun Sie es einfach. Wenn die Anwendung alles unterst√ºtzt, verwenden Sie Anycast-Clouds. Wenn Sie keine eigene Infrastruktur entwickeln m√∂chten, bringt dies viel Gewinn. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie bereits mehrere Websites haben und der Benutzer zu einer von ihnen kommt, kann dort etwas passieren. Nehmen wir an, es wird fallen oder die Links werden unterbrochen, sodass Benutzer zu einer anderen Website wechseln. Aber sie sollten es nicht bemerken. Daher sollten Sie in der Lage sein, diesen Datenverkehr so ‚Äã‚Äãschnell wie m√∂glich innerhalb des internen Anycast-Netzwerks zu √ºbertragen, und im Allgemeinen sollten Sie ein solches Problem als unvermeidlich betrachten. Daher ist es hilfreich, etwas in die Anwendung aufzunehmen, um sich auf eine solche Entwicklung von Ereignissen vorzubereiten.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie √ºber Gesch√§ftsmetriken f√ºr Anwendungen verf√ºgen, fordern Sie im Falle eines Ausfalls sofort die Netzwerk√ºberwachung an und erstellen Sie einen Bericht √ºber den Status des internen oder externen Netzwerks oder besser beider. Gesch√§ftskennzahlen fallen normalerweise, weil irgendwo etwas passiert ist, aber das ist nat√ºrlich eine Utopie - auch wenn wir dem noch nicht nahe gekommen sind. </font></font><br><img src="https://habrastorage.org/webt/ec/lq/mf/eclqmf8bbilulb74g7y9cmrhajs.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie haben ein externes Netzwerk, aber es gibt auch interne Standorte - diese m√ºssen miteinander kommunizieren. Gleichzeitig ben√∂tigen Sie keine eigene physische Infrastruktur - Sie k√∂nnen die Netzwerke von Drittanbietern verwenden. Die Hauptsache ist die Konfiguration virtueller Tunnel. Au√üerdem m√ºssen Sie das Routing des internen Netzwerks konfigurieren, da nicht alles auf BGP endet. Aufgrund der Art der Verkehrsverarbeitung verf√ºgen wir √ºber eigene Protokolle, Kommunikationsstile und Skripte.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie einige Sites haben, sollten Sie in der Lage sein, Konfigurationen an verschiedenen Orten gleichzeitig zu aktualisieren. Sie erhalten ein neues Pr√§fix - Sie m√ºssen es √ºberall ank√ºndigen, DNS aktualisiert - das gleiche. Im Kontext von SDNs m√ºssen Sie Daten von den Sites sammeln und irgendwo aggregieren und die √Ñnderungen, die aufgrund dieser Daten aufgetreten sind, wieder in die Sites √ºbertragen. </font></font><br><img src="https://habrastorage.org/webt/sc/nf/2g/scnf2gqwejhemq6z5xfdolrn1ki.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das letzte Element ist DNS. Das Beispiel mit Dyn war bezeichnend - wie Sie sich erinnern, wurde 2016 ein Angriff gegen sie durchgef√ºhrt, den sie nicht bew√§ltigen konnten, und eine sehr gro√üe Anzahl von in den USA beliebten Ressourcen war nicht mehr verf√ºgbar. DNS muss ebenfalls gesch√ºtzt werden, da Benutzer Ihre Anwendung sonst nicht im Netzwerk finden. DNS-Caches werden teilweise gespeichert, und es gibt interessante Arbeiten zu diesem Thema an der IETF, aber es h√§ngt immer davon ab, ob bestimmte DNS-Resolver dies unterst√ºtzen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In jedem Fall m√ºssen Sie √ºber ein sicheres DNS verf√ºgen. Dies ist die erste Phase, die ausgearbeitet werden muss, damit sich der Benutzer mit Ihrer Anwendung vertraut macht. Wenn Sie die Seite zum ersten Mal √∂ffnen, kommt es zus√§tzlich zu der bereits erw√§hnten RTT zu zus√§tzlichen Verz√∂gerungen bei DNS-Abfragen, und Sie m√ºssen darauf vorbereitet sein, dass die Seite des Benutzers zum ersten Mal f√ºr l√§ngere Zeit ge√∂ffnet wird und m√∂glicherweise von jemandem nicht toleriert wird. Wenn f√ºr Sie eine lange erste Entdeckung entscheidend ist, m√ºssen Sie auch den DNS beschleunigen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Fall von Anycast k√∂nnen Sie DNS-Antworten an Ihren Pr√§senzpunkten zwischenspeichern, da Sie diese Websites bereits haben und DNS-Antworten schnell genug eingehen. </font></font><br><img src="https://habrastorage.org/webt/cs/gk/dd/csgkddm43z94n7u_mbvf-cvqamu.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist das Problem? Nun, Latenz, gut, Ausgleich.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie bereits erw√§hnt, gibt es immer noch Natur. Zum Teil m√ºssen Sie an verschiedenen Orten platziert werden. Dies sollte nicht vergessen werden, obwohl das Risiko gering erscheint. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt auch eine Person und einen Zufallsfaktor. Daher sollten Sie alles so weit wie m√∂glich automatisieren, die gegossenen Konfigurationen testen und die √Ñnderungen √ºberwachen. Selbst wenn Sie etwas genommen haben, ist es gut, wenn Sie √Ñnderungen schnell und lokal vornehmen k√∂nnen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies sind 90% der F√§lle. Aber die restlichen 10% - dies ist, wenn die Konkurrenten beschlossen, Sie zu eliminieren. In diesem Fall haben Sie ernsthafte Probleme. Warum wird die "Reservierung" in einer separaten gro√üen Schrift hervorgehoben? Wenn Sie sich f√ºr eine Platzierung entscheiden, ben√∂tigen Sie eine sehr gro√üe Anzahl von Kan√§len auf Ihren Websites, was bedeutet, dass Sie mit einer gro√üen Anzahl von Anbietern verhandeln m√ºssen. Andernfalls k√∂nnen Sie dies bei der aktuellen durchschnittlichen Anzahl von Angriffen √ºberhaupt nicht tun.</font></font><br><img src="https://habrastorage.org/webt/x9/ii/bx/x9iibxwaeelggpxuhoteepdhxhy.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist also besser zu delegieren, als eigene Hardware zu kaufen. </font><font style="vertical-align: inherit;">Selbst ein Teil der Funktionalit√§t, die wir heute im Rahmen von anycast beschrieben haben, und die auftretenden Probleme sind leicht falsch zu l√∂sen. </font><font style="vertical-align: inherit;">Wenn es also die M√∂glichkeit gibt, diese Probleme nicht zu l√∂sen und sie an Au√üenstehende weiterzugeben, lohnt es sich wahrscheinlich, dies zu tun. </font><font style="vertical-align: inherit;">Andernfalls m√ºssen Sie die Frage, warum Sie all dies implementieren m√ºssen, genau beantworten. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenden Sie sich im Falle eines Angriffs den Wolken zu, die sich auf die L√∂sung solcher Probleme spezialisiert haben. </font><font style="vertical-align: inherit;">Na ja, oder du kannst trotzdem mit uns chatten.</font></font><br><br>  Vielen Dank!  Fragen? <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/htUvHjaNwvA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457446/">https://habr.com/ru/post/de457446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de457436/index.html">Golang Meetup Vol. 4 - 27. Juni, Nischni Nowgorod</a></li>
<li><a href="../de457438/index.html">Laden Sie VKontakte Audio √ºber Client js oder die Dateierweiterung .m3u8 herunter</a></li>
<li><a href="../de457440/index.html">ServiceLoader: Ein integriertes DI-Framework, von dem Sie vielleicht noch nie geh√∂rt haben</a></li>
<li><a href="../de457442/index.html">Lachsprojekt: Wie man der Internet-Zensur mit Proxies mit Benutzervertrauensniveau effektiv widersteht</a></li>
<li><a href="../de457444/index.html">AR-Brille in Aktion. Reale F√§lle, wie Augmented Reality in einer Vielzahl von Gesch√§ftsbereichen Anwendung fand</a></li>
<li><a href="../de457450/index.html">Top 10 Technologietrends in der Datenverarbeitung und -analyse im Jahr 2019 laut Gartner</a></li>
<li><a href="../de457458/index.html">Mobiler St√§nder f√ºr chinesische Werkzeugmaschinen. Oder wie man sie in einer Wohnung platziert</a></li>
<li><a href="../de457460/index.html">Linux-Kernel-Sicherheitskarte</a></li>
<li><a href="../de457462/index.html">Uber: √úberblick √ºber die wichtigsten Plattformverwaltungsalgorithmen</a></li>
<li><a href="../de457464/index.html">Deduplizierung von Anzeigen auf Yandex.Real Estate</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>