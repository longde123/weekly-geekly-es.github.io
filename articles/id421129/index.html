<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💩 👢 🏴 Cara mengurangi ulasan kode dari dua minggu menjadi beberapa jam. Pengalaman tim Yandex.Market 🚶🏿 🚩 ⛹🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Manusia adalah nilai utama dari setiap perusahaan. Keberhasilan semuanya tergantung pada bagaimana orang berkomunikasi satu sama lain, bagaimana merek...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara mengurangi ulasan kode dari dua minggu menjadi beberapa jam. Pengalaman tim Yandex.Market</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/421129/"><p>  Manusia adalah nilai utama dari setiap perusahaan.  Keberhasilan semuanya tergantung pada bagaimana orang berkomunikasi satu sama lain, bagaimana mereka mencapai tujuan bersama, dan pada kerja tim.  Keterampilan, proses, dan alat yang terus diasah memungkinkan Anda untuk bekerja lebih efisien. </p><br><p>  Kami di Pasar bekerja untuk memberikan fitur baru kepada pengguna kami secepat mungkin.  Untuk melakukan ini, kami terus-menerus mempelajari proses kami dan mengoptimalkan semua tahapan tugas.  Hari ini kami akan memberi tahu pembaca Habr tentang optimalisasi salah satunya, yaitu proses peninjauan kode. </p><br><p>  Pertama, Anda perlu membayangkan aliran apa dalam pembangunan yang telah kami adopsi: </p><br><img width="500" src="https://habrastorage.org/webt/rf/6j/9g/rf6j9gzwp6tqlwhuh33ha8kd3ww.png"><a name="habracut"></a><br><p>  Hal yang sama, hanya poin demi poin dan kata-kata: </p><br><ol><li>  Pengembang mengambil tugas. </li><li>  Membuatnya. </li><li>  Mengisi Github dan membuka PR. </li><li>  Melewati tinjauan kode. </li><li>  Mengumpulkan dudukan demo dan memberikannya kepada penguji. </li><li>  Penguji memeriksa demo stand. </li><li>  Tugas yang diverifikasi dikumpulkan dalam rilis. </li><li>  Menguji dalam rilis. </li><li>  Layout pada prod. </li><li>  Pengujian akhir dalam pertempuran. </li></ol><br><p>  Berdasarkan bidang tanggung jawab, tugas dibagi menjadi langkah-langkah berikut: </p><br><p>  1-5 - tanggung jawab pada pengembang; <br>  6-7 - tanggung jawab pada tester; <br>  8-10 - tanggung jawab pada master rilis. </p><br><p>  Jadi, mereka mulai menganalisis apa yang paling memakan waktu bagi kita.  Untungnya, ada alat analisis internal.  Semua orang mengandalkan apa yang akan memakan waktu paling lama, tentu saja, proses pengembangan itu sendiri (status "Dalam Pekerjaan") ... dan ternyata seperti itu.  Tapi satu saat yang paling mengejutkan kami.  Durasi rata-rata ulasan adalah dua minggu! </p><br><h3 id="deystvie-1-razbor-pr">  Langkah 1. Parsing PR </h3><br><p>  Mulai mempelajari permintaan tarik, mereka langsung menghadapi satu fakta yang sangat menarik.  Ternyata kami memiliki kuburan besar permintaan tarik tertutup.  Sebagian besar penulis PR ini tidak lagi bekerja untuk perusahaan, tetapi warisan mereka masih bersama kami.  Siapa yang belum pernah melihat dinosaurus, ini dia: </p><br><p><img src="https://habrastorage.org/webt/bf/tb/sn/bftbsnrsjrgehwgcyw4rp4-hxw8.png"></p><br><p>  Permintaan penarikan ini menambah kebisingan dan mengganggu analisis waktu peninjauan kode yang benar.  Dengan pikiran tenang, kami menutupnya.  Tinggal menghitung waktu.  Tapi itu masih di daerah 2-3 hari.  Itu tidak baik. </p><br><h3 id="deystvie-2-razborka-s-revyushnicey">  Langkah 2: Membongkar dengan Browner </h3><br><p> Reviewer adalah sistem yang dikembangkan di Yandex yang memanggil PR dua orang acak dengan keahlian dalam kode yang bisa berubah dan mempertimbangkan liburan dan absen.  Analisis PR mingguan mengungkapkan sekelompok orang yang terus-menerus menyeret keluar tinjauan kode.  Setelah mewawancarai kolega, kami menemukan masalah lain dalam proses kami.  Kolega mengeluh bahwa mereka menerima terlalu banyak permintaan tarik per hari dari cemburu, dan mereka tidak punya cukup waktu untuk pekerjaan utama mereka. </p><br><p>  Ini tidak sesuai dengan indikator kami: satu atau dua PR per hari per orang.  Penelitian ini mengarah ke Github, di mana kami memiliki tim peninjau yang terpisah.  Tim ini belum diperbarui selama beberapa tahun.  Sejak itu, jumlah karyawan meningkat dua kali lipat, tetapi tidak ada satu pun pendatang baru yang termasuk dalam tim peninjau.  Dengan kata lain, setengah dari tim tidak berpartisipasi dalam peninjauan kode sama sekali!  Memperbaiki kesalahpahaman yang menjengkelkan ini. </p><br><h3 id="deystvie-3-rasshirenie-instrumentov">  Langkah 3. Memperluas Alat </h3><br><p>  Pada tahap ini, kami mencoba untuk menyederhanakan kehidupan pengulas yang sudah sederhana, seperti yang kami pikirkan.  Alat-alat berikut ada di gudang front-end: </p><br><ul><li>  checker gaya kode; </li><li>  uji coba; </li><li>  berbagai pemeriksaan kutu buku dalam PR itu sendiri; </li><li>  revisionis; </li><li>  peringatan pada pelacak surat dan tugas. </li></ul><br><p>  Tampaknya semuanya ada di sana.  Ambil dan ulas! </p><br><p>  Hal pertama yang ternyata salah: proses peninjauan kode yang berbeda dalam repositori yang berbeda.  Kami menyatukan dan sekaligus membuktikan pembubuhan label untuk pencarian PR yang mudah melalui antarmuka Github. </p><br><p>  Hal kedua yang mereka perhatikan: surat bukanlah alat terbaik untuk melaporkan status ulasan kode dengan cepat.  Banyak, agar tidak terganggu dari pekerjaan, mem-parsing suratnya beberapa kali sehari.  Utusan adalah masalah yang sama sekali berbeda.  Reaksi terhadap pesan di messenger jauh lebih tinggi.  Dan diputuskan untuk menghubungkan bot ke messenger kami.  Bot mengirimkan peringatan tentang status ulasan kode untuk penulis permintaan tarik dan mendorong orang untuk meninjau.  Sangat nyaman </p><br><h3 id="deystvie-4-pervyy-sla">  Langkah 4. SLA Pertama </h3><br><p>  Sejalan dengan tindakan 2 dan 3, kami mulai bekerja sama dengan karyawan dan menjelaskan bahwa tinjauan kode tidak dapat dipisahkan dari tugas itu sendiri.  Mereka menjelaskan bahwa membawa ke "Terverifikasi" adalah tanggung jawab pengembang.  Selain itu, tanggung jawab tidak hanya untuk kolega, tetapi juga untuk pengguna!  Pengiriman cepat fitur ke penjualan - itulah yang ingin saya capai.  Dan tim bersimpati pada proses perbaikan. </p><br><p>  Pada tahap ini, ide pertama tinjauan kode ideal lahir.  Tentu saja, semua orang ingin itu terjadi dalam 5 menit, tetapi ini tidak selalu mungkin.  Mempertimbangkan bahwa kami memiliki tim multi-regional (dengan perbedaan waktu empat jam), kami sepakat bahwa SLA kami akan menjadi satu hari, yaitu.  24 jam  Perjanjian Tingkat Layanan ini diumumkan kepada semua karyawan dan, sambil menggosok-gosok tangan mereka, mulai menunggu hasilnya. </p><br><p>  Namun situasinya belum berubah.  Dalam minggu-minggu terbaik, setengah dari permintaan tarik masuk ke dalam 1 hari.  Sisanya keluar untuknya. </p><br><p><img src="https://habrastorage.org/webt/q_/x4/uf/q_x4ufuooovrwiesgfm1ckkz4jy.jpeg"></p><br><p>  Kami memiliki skrip kecil yang mengevaluasi ulasan kode waktu pada PR.  Kami mulai menyalahkan mereka setiap hari untuk semua PR yang mencari "tertinggal".  Hampir setiap hari ada paket seperti itu. </p><br><img src="https://habrastorage.org/webt/nz/de/ar/nzdearlygv--kzedy4kv4ytzhzc.png"><br><p>  Butuh waktu lama untuk mengurai mereka.  Paling sering, skrip itu sendiri secara tidak jujur ​​menghitung waktu peninjauan.  Dia tidak memperhitungkan bahwa beberapa PR dibuat di luar jam kerja (ya, beberapa orang yang memiliki ketrampilan tinggi suka bekerja selama satu atau dua jam di malam hari, datang kepada kami untuk bekerja!).  Semua ini memberi tahu kami bahwa alat pemantauan permintaan tarik kami bukan yang paling efektif, karena tidak jujur.  Saya harus menemukan alat baru. </p><br><h3 id="deystvie-5-treker-sla">  Langkah 5. Pelacak SLA </h3><br><p>  Bantuan datang dari tempat mereka tidak menunggu.  Rekan kami dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tracker</a> mengumumkan hal yang luar biasa: sekarang Anda dapat menginstal SLA di Pelacak itu sendiri.  Selain itu, Anda dapat mengonfigurasinya dengan sangat berbeda.  Timer tertentu dihidupkan oleh beberapa peristiwa dalam tugas.  Untuk beberapa acara, itu bisa berhenti.  Dan berhenti di beberapa acara.  Ya, inilah yang kami butuhkan! </p><br><p>  Mereka segera masuk ke studi rinci dokumentasi (omong-omong, ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dia</a> ) dan mengatur antrian kami (ada beberapa dari mereka, karena ada beberapa repositori).  Kami mengatur timer untuk menyala ketika beralih ke status "Need code review" dan berakhir ketika beralih ke status lain, kecuali untuk "Ada komentar" - ketika ia pergi, timer berhenti, mis.  tidak kehilangan waktu. </p><br><p><img src="https://habrastorage.org/webt/vz/wc/d4/vzwcd4k70ztjkev4awa_brvlcrs.png"></p><br><p>  Itu juga keren bahwa timer memperhitungkan jam kerja dan kalender!  Kami menetapkan bahwa 9 jam ditugaskan untuk peninjauan kode, mis.  satu hari kerja.  Dalam hal ini, peringatan dipicu 2 jam setelah dimulainya, atau jika tenggat waktu sembilan jam dilanggar.  Hasilnya adalah semacam pemantauan yang jujur.  Pada awalnya, kami menyalakan timer untuk percobaan, mengumpulkan satu paket bug dan diekspor ke Pelacak. </p><br><p>  Perlu dicatat bahwa timer diaktifkan hanya untuk tugas-tugas yang dibuat setelah implementasi timer itu sendiri.  Karena itu, efek instan tidak dapat dilihat.  Tetapi sudah pada tahap ini, dinamika positif dimulai.  Kami mendapat efek sebulan kemudian, ketika aliran tiket baru dengan timer mulai memadatkan yang lama.  Terlihat bahwa perkiraan waktu tinjauan kode terkonsentrasi di bidang pesan pengingat, mis.  menandai 2h dan 9h. </p><br><p>  Pada saat penulisan ini, kami memiliki 415 tugas di mana timer telah dimulai.  Dari jumlah tersebut, 29 melampaui batas sembilan jam.  Meskipun, jika Anda melihat lebih dekat, Anda juga akan menemukan tugas-tugas seperti itu, yang peninjauan kodenya selesai dalam waktu satu jam berikutnya.  Jika kita membuangnya juga, maka 17 tugas tetap ada.  Dan ini sekitar 4,1%! </p><br><p><img src="https://habrastorage.org/webt/qd/yc/5x/qdyc5xl1wddalhhxh0okmu6793e.png"></p><br><h3 id="itog-samuray-postoyanno-tochit-svoy-mech">  Hasilnya  Samurai terus menerus mengasah pedangnya </h3><br><p>  Melihat ke belakang dan mengingat kembali semua tindakan kita, satu kesimpulan dapat ditarik - semua cara adalah baik.  Semua langkah kami menghasilkan hasil yang diinginkan: lebih dari <strong>92% permintaan tarik mulai memuaskan SLA kami</strong> !  Tugas yang kurang dan kurang robek, review kode lebih cepat.  Perlahan, sedikit demi sedikit, <strong>75% dari tinjauan kode mulai masuk ke dalam 5 jam</strong> !  Dan dinamika untuk perbaikan masih positif.  Selain indikator numerik, kami mulai menerima lebih banyak umpan balik positif dari subkontraktor.  Bahkan lebih senang dengan kenyataan bahwa tim bereaksi terhadap seluruh proses ini.  Bahkan proses seperti akselerasi tinjauan kode semakin meningkatkan semangat tim.  Setiap peserta mulai memahami tanggung jawab yang dipikulnya di depan orang lain, karena kode ulasan cepat memungkinkan kami untuk memberi manfaat lebih cepat kepada pengguna kami. </p><br><p>  Tentu saja, 9h bukan impian utama, tetapi masih sukses.  Tapi di situ kita tidak berniat berhenti.  Kami terus memantau proses peninjauan kode dan menyelesaikan semua masalah teknis dan bahkan psikologis yang dihadapi karyawan sehingga proses kami seproduktif mungkin dan pada saat yang sama nyaman bagi tim. </p><br><h3 id="qa-a-chto-esli">  T&amp;J.  Bagaimana jika ...? </h3><br><p>  <strong>T</strong> : <em>Bagaimana jika saya pikir mereka memperhatikan saya?</em>  <em>Untuk apa timer ini?</em> <br>  <strong>A</strong> : Kami memantau tidak secara khusus untuk seseorang, tetapi untuk prosesnya.  Ada dua sisi permintaan tarik: penulis dan pengulas.  Jika pengulas mengeluarkan cek, maka penulis menderita.  Di sisi lain, itu juga tidak manusiawi untuk merobek inspektur dari pekerjaan segera.  Penting untuk menemukan keseimbangan agar kedua belah pihak merasa nyaman.  Pengatur waktu diperlukan bukan untuk menghukum seseorang, tetapi untuk merekam semua penyimpangan.  Sebagian besar penyimpangan ini tidak terjadi karena kesalahan pengulas, tetapi karena kesalahan masalah teknis.  Tantangannya adalah untuk memperbaiki masalah ini.  Sehingga orang lain tidak menemui mereka.  Perbaikan diri terus menerus </p><br><p>  <strong>T</strong> : <em>Dan bagaimana jika ada PR kompleks, 100500+ baris kode, dan ada "ubah hurufnya."</em>  <em>Dimana keadilannya?</em> <br>  <strong>A</strong> : Ya, ini benar.  Ketika kami mengerjakan ulasan kode standar, kami hanya membawanya sepanjang batas atas, mis.  review kode PR kompleks harus sesuai dengan SLA.  Tetapi pada saat yang sama, kami tidak memiliki tujuan untuk mengarahkan semua orang ke batas-batas ini.  Kami selalu bersimpati untuk menarik permintaan, di mana ada diskusi yang hidup dan bermanfaat, meskipun ada bilah yang rusak dalam satu hari. </p><br><p>  Kami memiliki rencana untuk nilai SLA pada titik penyimpanan.  1SP - 1h, 3SP - 5h, 5SP - 2d, misalnya.  Untungnya, Pelacak sudah mampu melakukan ini.  Kami belum siap untuk ini - kami masih memiliki jalan panjang. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id421129/">https://habr.com/ru/post/id421129/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id421119/index.html">Pengembangan SmartTV menyapu bawah air</a></li>
<li><a href="../id421121/index.html">Streaming video melalui browser dengan latensi sangat rendah (dan WebRTC!)</a></li>
<li><a href="../id421123/index.html">Intisari acara TI untuk bulan September</a></li>
<li><a href="../id421125/index.html">Kami mengelompokkan 600 juta pengguna secara real time setiap hari</a></li>
<li><a href="../id421127/index.html">Webinar Skillbox Friday: Desain & Pengembang</a></li>
<li><a href="../id421131/index.html">Kerentanan Penting Server 1Cloud</a></li>
<li><a href="../id421133/index.html">LINKa. Keyboard kertas. Tombol ekstra besar</a></li>
<li><a href="../id421135/index.html">Au / Ni / MgO: transfer panas berskala nano</a></li>
<li><a href="../id421137/index.html">Cara Kerja Chrome Tanpa Kepala</a></li>
<li><a href="../id421139/index.html">Frontend Conf - menjaga pengguna</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>