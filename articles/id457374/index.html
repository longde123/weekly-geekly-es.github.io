<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ¥ï¸ ğŸ¤¤ ğŸ§˜ğŸ½ Kurangi waktu pembangunan proyek Android Anda ğŸ‘¨ğŸ¼â€âš–ï¸ ğŸ¥ ğŸ§“ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selamat pagi Kami mulai Senin dengan materi, terjemahan yang disiapkan khusus untuk siswa kursus "Android-developer. Kursus Lanjutan . " 



 Baru-bar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kurangi waktu pembangunan proyek Android Anda</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/457374/">  Selamat pagi  Kami mulai Senin dengan materi, terjemahan yang disiapkan khusus untuk siswa kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Android-developer.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kursus Lanjutan</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"</a> <br><br><img src="https://habrastorage.org/webt/cq/gh/9u/cqgh9uzb-qlhdgfjiv_ayajrqde.png"><br><br>  Baru-baru ini saya memigrasi basis kode Android ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kure</a> di AndroidX.  Tampak bagi saya bahwa ini adalah kesempatan besar untuk bekerja pada kecepatan perakitan proyek.  Gradle selalu memiliki reputasi buruk karena kelambatan dan konsumsi sumber daya, tetapi saya sangat terkejut bahwa perubahan kecil pada konfigurasi perakitan dapat meningkatkan kecepatannya secara signifikan. <br><a name="habracut"></a><br>  Lihatlah metrik pemindaian perakitan sebelum / setelah optimisasi <br><br><img src="https://habrastorage.org/webt/2k/yw/2w/2kyw2wlroiairpx8iiriwjdbejq.jpeg"><br>  <i>sebelum optimasi</i> <br><br><img src="https://habrastorage.org/webt/ef/ss/u6/efssu62faz4yoi92zvmssa1pf0m.jpeg"><br>  <i>setelah optimasi ï¸ï¸</i> <br><br>  Menurun dari 5,5 menit menjadi <b>17 detik ??</b>  <b>Gila!</b> <br><br>  Tidak terlalu sulit untuk melakukan optimasi secara berlebihan untuk mengurangi waktu perakitan.  Tetapi untuk membuat pos tersebut dapat dipahami oleh para pemula, saya akan dengan sengaja fokus pada langkah-langkah kecil dan tidak menyakitkan yang telah saya ambil untuk lebih dekat dengan indikator ini. <br><br><h2>  Pertama-tama! </h2><br>  Sebelum Anda memulai optimasi, penting untuk menguji proyek kami untuk mengetahui berapa lama waktu yang dibutuhkan untuk membangunnya.  Gradle memiliki opsi pemindaian yang mudah digunakan yang dapat Anda gunakan untuk menganalisis kinerja tugas Anda.  Buka terminal di Android Studio dan jalankan perintah berikut: <br><br><pre><code class="kotlin hljs">./gradlew assembleDebug --scan</code> </pre> <br>  Setelah berhasil menyelesaikan perakitan, Anda akan diminta untuk menerima persyaratan layanan untuk mengunduh hasil pemindaian.  Masukkan <b>ya</b> untuk melanjutkan.  Setelah publikasi selesai, Anda akan menerima tautan ke terminal untuk memeriksa pemindaian.  Buka itu. <br><br>  <i>Ada beberapa opsi di situs ini, tetapi untuk singkatnya kami hanya akan mempertimbangkan apa yang paling penting.</i> <br><br>  Ringkasan menampilkan informasi ringkasan tentang tugas yang diselesaikan dan waktu penyelesaiannya.  Tetapi yang menarik bagi kami di sini adalah bagian <b>Kinerja</b> .  Itu rincian lebih rinci dari total waktu membangun, seperti yang ditunjukkan di bawah ini. <br><br><img src="https://habrastorage.org/webt/on/n_/he/onn_he0w_k-i5nkwr7jagda9mx4.jpeg"><br><br>  Di bagian Kinerja, ada tab <b>Pengaturan dan saran</b> yang memberikan rekomendasi untuk meningkatkan kecepatan build.  Mari lihat mereka. <br><br><img src="https://habrastorage.org/webt/g0/l0/bu/g0l0buxdn5wy1pfkxnuc0f9i0gc.jpeg"><br><br>  Di bagian ini, kita dapat menemukan beberapa perbaikan sederhana untuk meningkatkan kecepatan.  Jadi, mari kita lanjutkan dan terapkan koreksi ini di proyek kami. <br><br><h2>  Langkah # 1: Tingkatkan Alat </h2><br>  Tim Android terus meningkatkan dan mengembangkan sistem pembangunan.  Dengan demikian, dalam kebanyakan kasus, Anda bisa mendapatkan peningkatan yang signifikan dengan hanya menginstal versi terbaru dari toolkit ini. <br><br>  Selama refactoring ini, proyek kami berada pada <b>versi 3.2.1 dari</b> plugin Gradle untuk Android Studio ( <i>beberapa versi lebih tua dari rilis terakhir</i> ). <br><br>  Anda dapat mengikuti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan ini</a> untuk mendapatkan versi terbaru dari Plugin Gradle.  Pada saat penulisan ini, yang terbaru adalah <b>versi 3.4.0.</b> <br><br>  Tapi ada tangkapan di sini yang harus kita ingat: <br><br><img src="https://habrastorage.org/webt/v0/b9/j9/v0b9j9xfqws0eknr0khchb4aoi0.jpeg"><br><br>  <i>( <b>Catatan:</b> Saat menggunakan Gradle versi 5.0 atau lebih tinggi, ukuran default daemon Gradle berkurang dari 1 GB menjadi 512 MB. Ini dapat menyebabkan kinerja pembangunan yang buruk. Untuk mengganti pengaturan default ini, tentukan ukuran memori untuk daemon Gradle di gradle.properties proyek Anda.)</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://developer.android.com/studio/releases/gradle-plugin</a> <br><br>  <i>Saat menggunakan <b>Gradle 5.0 dan di atasnya,</b> kita perlu meningkatkan ukuran memori secara eksplisit agar kecepatan build kita tidak memburuk.</i>  <i>Kami akan kembali ke sini sebentar lagi.</i> <br><br>  Buka file <b>build.gradle</b> tingkat <b>atas</b> , yang akan Anda temukan di root proyek Anda, dan tambahkan baris berikut ke <b>bagian dependensi</b> : <br><br> <code>classpath 'com.android.tools.build:gradle:3.4.0'</code> <br> <br>  Anda juga perlu memperbarui <b>URL distribusi</b> di file properti Gradle Wrapper yang terletak di <code><b>gradle/wrapper/gradle-wrapper.properties</b></code> .  Perbarui URL sebagai berikut. <br><br>  ( <i>Tautan ini akan tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman plugin Android Gradle</a> .</i> ) <br><br> <code>distributionUrl=https\://services.gradle.org/distributions/gradle-5.1.1-all.zip</code> <br> <br>  Anda akan menemukan kesalahan saat menggunakan Kotlin jika versi plugin Kotlin Gradle kurang dari <b>1.3.0.</b>  Jika demikian, gunakan tooltip IDE untuk memperbarui plugin Gradle untuk Kotlin ke versi terbaru (pada saat penulisan ini, ini adalah <b>versi 1.3.31</b> ). <br><br>  Ok, mari kita jalankan build lagi dari terminal untuk melihat apakah kita telah melakukan perbaikan. <br><br><img src="https://habrastorage.org/webt/gg/lg/kf/gglgkfxrbccatt7ygkyswjrky28.jpeg"><br><br><h2>  Langkah # 2: Perbarui Konfigurasi </h2><br>  Jadi, kami dapat memotong sekitar 2,5 menit dari waktu pembuatan, tetapi ini masih belum cukup baik.  Setelah mempelajari build log di terminal, saya menemukan satu baris yang menarik bagi kami: <br><br><img src="https://habrastorage.org/webt/gr/fo/pv/grfopv6dg9wjtertgdxun5danku.jpeg"><br><br>  <i>(&gt; Tugas: aplikasi: compileDevelopDebugJavawithJavac</i> <i><br><br></i>  <i>Gradle dapat menonaktifkan kompilasi inkremental karena prosesor anotasi berikut tidak inkremental: butterknife-compiler-10.1.0.jar (com.jakewharton: butterknife-compiler: 10.1.0), dagger-compiler-2.9.jar (com.google. belati: belati-kompiler: 2.9).</i> <i><br><br></i>  <i>Pertimbangkan untuk menyetel flag android.enableSeparateAnnotationProcessing-true eksperimental dalam file gradle.properties untuk memulai pemrosesan anotasi dalam tugas yang terpisah dan melakukan kompilasi tambahan.)</i> <br><br>  Kompilasi tambahan pada dasarnya mencegah kompilasi boros dari seluruh set file sumber dan sebaliknya hanya mengkompilasi file-file yang telah dimodifikasi.  Dari log jelas bahwa kita tidak menggunakan fungsi ini.  Dia menyarankan agar kita menggunakan <code><b>android.enableSeparateAnnotationProcessing=true</b></code> , tetapi, dalam hal apa pun, kita tidak boleh menggunakan konfigurasi <i>â€œannotationProcessorâ€</i> karena Kotlin digunakan dalam proyek kami. <br><br>  Untungnya, <b>versi 1.3.30</b> Kotlin menambahkan dukungan untuk pemrosesan anotasi langkah-demi-langkah. <br><br><img src="https://habrastorage.org/webt/hq/ud/_r/hqud_rdvrv8fzj2z4fadmqbqtqc.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://kotlinlang.org/docs/reference/kapt.html</a> <br><br><h4>  (Pemrosesan anotasi tambahan (mulai 1.3.30) </h4><br>  Dimulai dengan versi 1.3.30, <code>kapt</code> mendukung pemrosesan anotasi tambahan sebagai fungsi eksperimental.  Saat ini, pemrosesan anotasi dapat dilakukan secara bertahap hanya jika semua prosesor anotasi yang digunakan bersifat inkremental. <br>  Untuk mengaktifkan pemrosesan anotasi tambahan, tambahkan baris ini ke file <code>gradle.properties</code> : <br><br> <code>kapt.incremental.apt=true</code> <br> <br>  Perhatikan bahwa pemrosesan anotasi tambahan mengharuskan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kompilasi tambahan</a> juga diaktifkan.) <br><br>  Jadi, mari kita mulai: <br><br><ol><li>  1. Ubah konfigurasi <b>AnnotationProcessor</b> ke <b>kapt</b> </li><li>  2. Aktifkan flag <b>pemrosesan anotasi inkremental</b> eksperimental </li></ol><br>  Buka file <code><b>build.gradle</b></code> modul Anda dan tambahkan baris berikut ke bagian atas file: <br><br> <code>apply plugin: 'kotlin-kapt'</code> <br> <br>  Kemudian, ubah semua konfigurasi anotasiProcessor di bagian dependensi untuk menggunakan kapt.  Sebagai contoh: <br><br> <code>// <br> annotationProcessor 'com.google.dagger:dagger-compiler:2.9' <br> // <br> kapt 'com.google.dagger:dagger-compiler:2.9'</code> <br> <br>  Sekarang buka file <b>gradle.properties yang</b> terletak di root proyek Anda dan tambahkan baris berikut: <br><br> <code>kapt.incremental.apt=true</code> <br> <br>  Mari kita jalankan build lagi. <br><br><img src="https://habrastorage.org/webt/wl/bg/xk/wlbgxkwt2nlgrhbf6a-nxj5_jkw.jpeg"><br><br>  Yah, sepertinya kami telah membuat beberapa kemajuan. <br><br><h2>  Langkah # 3: Gradle Properties </h2><br>  Kami berada pada tahap terakhir.  Ingat trik yang kami temui saat memperbarui versi plugin Gradle?  Ternyata versi Gradle yang lebih baru mengurangi ukuran memori yang digunakan menjadi 512 MB.  Ini untuk memastikan bahwa mesin yang lemah tidak mengkonsumsi terlalu banyak memori.  Saya memiliki komputer dengan 16 gigabytes RAM, jadi saya dapat memberi makan sekitar 2-3 gigs ke daemon Gradle, tetapi angka Anda dapat bervariasi. <br><br>  Buka file <b>gradle.properties yang</b> terletak di root proyek Anda dan tambahkan baris berikut.  Pastikan untuk memilih ukuran yang sesuai dengan kebutuhan dan spesifikasi komputer Anda. <br><br> <code>org.gradle.jvmargs=-Xmx3072m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</code> <br> <br>  Sementara kita melakukan ini, mari kita juga mengaktifkan majelis paralel dan penyetelan sesuai permintaan di properti. <br><br>  Ini adalah versi final file <code><b>gradle.properties</b></code> : <br><br><pre> <code class="kotlin hljs">org.gradle.jvmargs=-Xmx3072m -XX:MaxPermSize=<span class="hljs-number"><span class="hljs-number">512</span></span>m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-<span class="hljs-number"><span class="hljs-number">8</span></span> org.gradle.parallel=<span class="hljs-literal"><span class="hljs-literal">true</span></span> org.gradle.configureondemand=<span class="hljs-literal"><span class="hljs-literal">true</span></span> kapt.incremental.apt=<span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><br><ul><li>  <code>org.gradle.parallel</code> - flag ini memungkinkan Gradle untuk merakit modul dalam suatu proyek secara paralel, bukan secara berurutan.  Ini hanya berguna untuk proyek multi-modul. </li><li>  <code>org.gradle.configureondemand</code> - flag ini hanya mengonfigurasi modul-modul yang diperlukan untuk proyek, dan tidak mengumpulkan semuanya. </li></ul><br>  Setelah melakukan ini, mari kita lihat apa yang sekarang kita miliki indikator kecepatan perakitan: <br><br><img src="https://habrastorage.org/webt/42/g0/mu/42g0mugmqkhqo2ok7ynl-pqcf3e.jpeg"><br><img src="https://habrastorage.org/webt/3h/rb/p8/3hrbp8uyadmxzrzxioj6u6ghob4.jpeg"><br><br>  Itu dia! <br><br><h2>  Pengamatan penutup </h2><br>  Ini tidak berarti cakupan yang luas dari semua cara untuk mengoptimalkan kecepatan perakitan.  Ada banyak hal lain yang belum saya bahas dalam posting ini, seperti menggunakan minSdk 21 saat menggunakan MultiDex, pustaka pra-pengindeksan, menonaktifkan kompresi PNG, dll., Hanyalah beberapa di antaranya. <br><br>  Tetapi sebagian besar konfigurasi ini membutuhkan pemahaman yang lebih dalam tentang sistem build Android dan pengalaman bekerja dengan proyek multi-modul besar (di mana manfaatnya paling jelas).  Langkah-langkah yang saya sebutkan di atas mudah diterapkan bahkan oleh pengembang junior dan memiliki manfaat yang signifikan.  Saya harap ini membantu Anda meningkatkan kecepatan build! <br><br>  Sampai jumpa lagi, damai sejahtera untukmu! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id457374/">https://habr.com/ru/post/id457374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id457350/index.html">Mengapa osiloskop memerlukan dukungan kriptografi?</a></li>
<li><a href="../id457352/index.html">Kesimpulan informasi pada tampilan pembeli</a></li>
<li><a href="../id457354/index.html">Kebingungan Data untuk Tes Kinerja</a></li>
<li><a href="../id457362/index.html">Promosi dari RUVDS: siapkan server di musim panas</a></li>
<li><a href="../id457366/index.html">Seorang fanatik, sepotong besi atau penonton - gamer seperti apa Anda?</a></li>
<li><a href="../id457378/index.html">Bagaimana id Software menciptakan Wolfenstein 3D berdasarkan teknologi dari Commander Keen</a></li>
<li><a href="../id457380/index.html">OpenGL Ultramodern. Bagian 2</a></li>
<li><a href="../id457382/index.html">7 kebiasaan programmer berkinerja tinggi</a></li>
<li><a href="../id457386/index.html">Memperkenalkan Linux Virtual Interfaces: Tunnels</a></li>
<li><a href="../id457390/index.html">Madagaskar - pulau kontras</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>