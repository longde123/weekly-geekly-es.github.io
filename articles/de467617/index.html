<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçî üòü üßú Kaspresso: das Autotest-Framework, auf das Sie gewartet haben üóª üëçüèº üêµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jeder, der an Android-Autotests teilgenommen hat oder hat, wei√ü, was f√ºr ein Schmerz das ist. 
 Sie werden m√ºde von der Menge an Aufgaben und Probleme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kaspresso: das Autotest-Framework, auf das Sie gewartet haben</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/kaspersky/blog/467617/">  Jeder, der an Android-Autotests teilgenommen hat oder hat, wei√ü, was f√ºr ein Schmerz das ist. <br>  Sie werden m√ºde von der Menge an Aufgaben und Problemen, so dass Urlaub nicht hilft.  Die Leute k√ºndigten sogar wegen Autotests. <br><br>  Schmerz, Leiden und Qual f√ºhren unweigerlich zur Entstehung von etwas Neuem und Sch√∂nem.  Wir haben versucht, alle Rechen zusammenzustellen, auf die wir treten mussten, unsere Bem√ºhungen mit den Jungs von Avito und HH kombiniert und etwas geschaffen, das Ihre Beziehung zu Autotests unvergleichlich besser und fruchtbarer macht. <br><br>  Treffen Sie: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kaspresso</a> - das Autotest-Framework, auf das Sie gewartet haben! <br><br><img src="https://habrastorage.org/webt/dw/jh/9k/dwjh9kypjl637kxj8tiaxwjvtp0.png"><br><a name="habracut"></a><br>  Ich werde sofort feststellen, dass es im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Netzwerk</a> zwei Videos von ziemlich hoher Qualit√§t gibt, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kaspresso</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AdbServer gewidmet sind</a> (Hilfsprogramm f√ºr Kaspresso, aber gleichzeitig ein starkes und unabh√§ngiges Projekt): <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dmitry Movchan, Eugene Matsyuk - Wie man Autotests schreibt und nicht verr√ºckt wird</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Egor Kournikov - Das einzige, was Sie f√ºr UI-Tests ben√∂tigen</a> <br><br>  Sie beschreiben detailliert die Geschichte der Erstellung von Bibliotheken: Wie wir von der L√∂sung eines Problems zur L√∂sung eines anderen √ºbergegangen sind und was am Ende passiert ist.  Ich kann es nur empfehlen. <br><br>  Daher werde ich in diesem Artikel nur auf die wichtigsten Punkte und Chips eingehen, damit Sie schnell verstehen, worum es in diesem Framework geht und welche Aufgaben es l√∂st.  Mut und Details finden Sie im Video und in der Dokumentation. <br><br><h2>  Warum brauchen wir √ºberhaupt einen eigenen Rahmen? </h2><br>  Jeder Entwickler, der Autotests schreibt, stellt unweigerlich Fragen: <br><br><ol><li>  Wie fange ich an, Autotests zu schreiben? </li><li>  Welche Tools zur Auswahl? </li><li>  Was tun, wenn kein Werkzeug erforderlich ist? </li><li>  Was sind die Best Practices? </li></ol><br>  Hinzu kommt, dass jedes Team versucht, diese Probleme auf seine eigene Weise zu l√∂sen.  Infolgedessen gibt es keine einzige Antwort auf sie, es gibt keinen Ort, an dem man sehen kann, wie man es richtig macht.  Das Schreiben und Unterst√ºtzen von Autotests ist daher f√ºr Unternehmen teuer, was die Machbarkeit der Automatisierung als solche in Frage stellt. <br><br>  In der Zwischenzeit verfolgt die Testautomatisierung gute Ziele.  Damit haben Sie immer einen gr√ºnen und sofort einsatzbereiten Assistenten.  Dies bedeutet, dass Sie die Version schnell bereitstellen k√∂nnen. <br>  Das einzige Problem besteht darin, Antworten auf die oben genannten Fragen zu finden.  Aber sie sind f√ºr alle Teams fast gleich.  Warum also nicht ihre L√∂sung automatisieren? <br><br><h2>  Was wollen wir vom Framework? </h2><br>  Lassen Sie uns unsere Erwartungen an das Framework ein wenig offenbaren. <br><br><h3>  Gute Lesbarkeit </h3><br>  Standardm√§√üig steht uns in Android nur die Espresso-Bibliothek zur Verf√ºgung.  Es gibt nat√ºrlich Appium + Cucumber, mit dem Sie theoretisch Tests auf zwei Plattformen gleichzeitig schreiben k√∂nnen.  Aber die Community bewegt sich zuversichtlich in Richtung des allerersten Instruments.  Ich werde nicht alle Vor- und Nachteile der oben genannten Bibliotheken beschreiben: Das Netzwerk ist voll von Informationen dar√ºber.  Hier ist zum Beispiel einer der relativ neuen Links: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Appium vs Espresso.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was ist zu w√§hlen und wie zu verwenden?</a> <br><br>  Also, Espresso.  Kein schlechtes Werkzeug, aber seine API ist ein bisschen auf den Kopf gestellt.  Schauen Sie sich einen einfachen Code an: <br><br><pre><code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">espressoTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { onView(allOf(allOf(withId(R.id.espresso), isDescendantOfA(withId(R.id.coffee_variates))), isDescendantOfA(withId(R.id.content)))) .check(matches(withEffectiveVisibility(View.VISIBLE))) }</code> </pre> <br>  Du musst nachdenken, um es herauszufinden, oder? <br><br>  Die G√∂tter aus Thailand und Australien pr√§sentierten uns die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kakao-</a> Bibliothek, mit der Sie auf einen Blick verstehen k√∂nnen, was in Ihrem Test passiert.  Hier ist der gleiche Code, aber mit Kakao: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kakaoTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { mainScreen { myView.isVisible() } }</code> </pre><br>  Viel besser.  Stellen Sie sich jetzt vor, Sie h√§tten einen ganzen Testfall automatisiert.  Wie w√ºrde der Code aussehen? <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { MainScreen() { homeButton.click() } HomeScreen() { title { isVisible() hasAnyText() } } } }</code> </pre><br>  Das Hauptproblem besteht darin, dass es bei diesem Test schwierig ist, ihn mit dem von Ihnen automatisierten Testfall zu korrelieren.  Sie k√∂nnen nat√ºrlich Protokolle oder √§hnliches hinzuf√ºgen.  Oder geben Sie dsl ein, wodurch sich das Aussehen Ihrer Tests sofort √§ndert: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { step(‚Äú<span class="hljs-number"><span class="hljs-number">1</span></span>. Open Home screen‚Äù) { MainScreen() { homeButton.click() } } step(‚Äú<span class="hljs-number"><span class="hljs-number">2</span></span>. Check Home title‚Äù) { HomeScreen() { title { isVisible() hasAnyText() } } } } }</code> </pre><br>  Stimmen Sie zu, es sieht ganz anders aus. <br><br><h3>  Stabilit√§t </h3><br>  Jede Bibliothek f√ºr UI-Tests schl√§gt fehl.  Dieselbe Aktion kann 50 Mal erfolgreich und in der 51. Pause ohne ersichtlichen Grund ausgef√ºhrt werden.  Und beim 52. Lauf ist wieder alles in Ordnung.  Und ein solches "Flackern" kann Ihre Nerven anst√§ndig verw√∂hnen. <br><br>  Wir dachten, warum nicht versuchen, alle Aktionen von Kakao-Espresso abzufangen und dort bereits zus√§tzliches Verhalten hinzuzuf√ºgen, um solche zuf√§lligen Fehler zu behandeln. <br><br>  Auf diese Weise wurde <a href="">Version 2.1 der Kakao-Bibliothek</a> geboren, mit der Sie sich in alle Espresso-Anrufe integrieren k√∂nnen. <br><br>  Dar√ºber hinaus haben wir eigene Interceptors erstellt, mit denen Sie das Verhalten am Dial-Peer √§ndern oder beispielsweise einfach protokollieren k√∂nnen.  Dar√ºber hinaus sind diese Abfangj√§ger anpassbar, sodass Sie sie an Ihre Bed√ºrfnisse anpassen k√∂nnen.  Lesen Sie mehr im <a href="">Dock</a> . <br><br>  Insbesondere im Rahmen des Kampfes gegen schuppige Tests - wenn einige Ihrer Aktionen eine Ausnahme ausl√∂sten, wird Kaspresso Folgendes versuchen: <br><br><ul><li>  Scrollen.  M√∂glicherweise ist Ihre Ansicht auf dem Bildschirm einfach nicht sichtbar. </li><li>  Entfernen Sie den Systemdialog, der von Gott wei√ü wo kommen k√∂nnte. </li><li>  Wiederholen Sie einen unterbrochenen Anruf zwei Sekunden lang. </li></ul><br>  Mit diesen Schritten l√∂sen wir das Problem vollst√§ndig mit flockigen Tests! <br><br><h3>  Protokollierung </h3><br>  Eines der Hauptprobleme bei Autotests ist das Fehlen einer verst√§ndlichen Protokollierung, die insbesondere bei einem Absturz des Tests nicht ausreicht.  Setzen Sie sich und fragen Sie sich, was und wie hier gefallen ist. <br><br>  Dank des oben erw√§hnten Abfangens konnten wir ein ziemlich umfangreiches Protokollierungssystem aufbauen. <br><br>  Schauen wir uns ein Beispiel an: <br><br><img src="https://habrastorage.org/webt/03/nn/qg/03nnqgupdqnwa_i4jwyz1uqq6r0.png"><br><br><img src="https://habrastorage.org/webt/tq/az/3v/tqaz3vjsgpw0-ivylrfbnuqyiqa.png"><br><br>  Standardm√§√üig protokolliert Kaspresso alle Ihre Aktionen, w√§hlt jeden Schritt des Tests aus, zeigt die Ausf√ºhrungszeit an usw. <br><br><h3>  Volle Adb in Espresso-Tests </h3><br>  In Espresso-Tests ist adb zun√§chst nicht verf√ºgbar.  Ja, es gibt eine <i>ADB-Shell</i> , aber es gibt viel weniger Funktionen als in Full <i>ADB</i> .  Aber es gibt so viele Dinge, die sich bei Tests als n√ºtzlich erweisen k√∂nnen. <br><br>  Wir haben eine separate <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AdbServer-</a> Bibliothek erstellt, die die vollst√§ndige <i>ADB</i> f√ºr Ihre Tests <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zur√ºckgibt</a> !  Das obige Video zeigt, wie wir gek√§mpft haben und was wir daf√ºr durchgemacht haben ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eins</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zwei</a> ). <br><br><h3>  Arbeiten Sie mit Android OS </h3><br>  Die Besonderheiten der Tests bei Kaspersky Lab sind so, dass wir viel mit dem Betriebssystem Android arbeiten m√ºssen: einige Einstellungen vornehmen, Dateien auf das System hochladen usw. All dies veranlasste uns, unsere gesamte Arbeit mit dem System zu standardisieren und eine Reihe klarer Schnittstellen zu erstellen. Zugriff √ºber ein einziges <i>Ger√§t der</i> Einstiegspunktklasse. <br><br>  Was sind diese Schnittstellen und was machen sie?  Lassen Sie mich zur Veranschaulichung einige Folien aus Yegors Pr√§sentation geben: <br><br><img src="https://habrastorage.org/webt/ye/5w/po/ye5wpoo2z5ezglihfrlkpobobrs.png"><br><br><img src="https://habrastorage.org/webt/f-/tc/ow/f-tcowtztognmdjlaxkl9x6z9sg.png"><br><br><img src="https://habrastorage.org/webt/um/wj/te/umwjteh2qef3xv-4hw4xzkjkrh8.png"><br><br><img src="https://habrastorage.org/webt/qz/yy/qs/qzyyqsa4aeqaozts7uy367ryofw.png"><br><br>  Die Dokumentation finden Sie <a href="">hier</a> . <br><br>  Unter der Haube werden haupts√§chlich AdbServer und UiAutomator verwendet. <br>  Aber!  Wenn Sie pl√∂tzlich nicht mehr mit der Implementierung einer Schnittstelle zufrieden sind, k√∂nnen Sie Ihre Implementierung √ºber den Konfigurator festlegen. <br><br><h3>  Screenshot f√ºr DocLoc (Dokumentation und Lokalisierung) </h3><br>  Bei allen Projekten, bei denen eine Lokalisierung erfolgt, m√ºssen h√§ufig Screenshots in verschiedenen Sprachen erstellt werden, um sie dem √úbersetzer als Illustrationen zur Verf√ºgung zu stellen.  Schlie√ülich ist es sehr schwierig, eine korrekte √úbersetzung zu erstellen, ohne zu sehen, wo und wie eine bestimmte Zeile verwendet wird.  Deshalb m√∂chte ich schnell und sofort Screenshots in allen Sprachen machen k√∂nnen.  Einschlie√ülich Screenshots von Systemdialogen.  M√∂glicherweise ben√∂tigen Sie auch Screenshots auf √§lteren Bildschirmen und ohne globales Refactoring. <br><br>  All dies erm√∂glicht es Ihnen, Kaspresso sofort zuzubereiten.  Lesen Sie mehr in der <a href="">Dokumentation</a> . <br><br><h3>  Architektur und Best Practices </h3><br>  Eine der Hauptaufgaben von Kaspresso war es, eine solche DSL zu erstellen, die Sie zur richtigen Testarchitektur und zum richtigen Schreiben bringt. <br><br>  Zu diesem Thema wurden viele Exemplare besch√§digt, da Sie solche Regeln leider nirgendwo finden.  Sie k√∂nnen h√∂chstens Artikel auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Page Object finden</a> . <br><br>  Daher haben wir keine M√ºhe gescheut und diese Probleme in der <a href="">Dokumentation</a> sowie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video einmal</a> und im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zweiten Video hervorgehoben</a> . <br>  Dar√ºber hinaus schrieb Sasha Blinov einen ausgezeichneten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel √ºber das Kotlin DSL und elegante Tests</a> .  Die im Artikel beschriebenen dsl werden von Kaspresso bereitgestellt. <br><br>  Zur√ºck bei Mobius haben wir eine Option vorgeschlagen, wie die Auswirkungen von Autotests beschleunigt und schnell in PullRequest integriert werden k√∂nnen, um unvermeidliche Infrastrukturprobleme zu umgehen.  Wir sprechen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ausf√ºhrlicher dar√ºber. <br><br><h3>  So verbinden und konfigurieren Sie Kaspresso, wenn Sie bereits viele Tests haben </h3><br>  Der Hauptzauber ist, dass Sie nichts neu schreiben m√ºssen, wenn Sie bereits viele Tests in Kakao geschrieben haben und Kaspresso implementieren m√∂chten!  Erben Sie einfach Ihre Testklassen von der speziellen TestCase-Klasse.  Und alle! <br><br>  Es war: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  Es wurde: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  Wenn Ihnen die Vererbung nicht gef√§llt, verwenden Sie eine √§hnliche <i>TestRule-</i> Klasse. <br><br>  Wie bereits erw√§hnt, ist Kaspresso ein sehr flexibles und anpassbares Framework.  Alle Einstellungen sind √ºber die gleichnamige <i>Kaspresso-</i> Klasse verf√ºgbar. <br><br>  Die Standardeinstellung ist Standard.  Wenn Sie etwas anpassen m√∂chten, sieht es ungef√§hr so ‚Äã‚Äãaus: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>( Kaspresso.Builder.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().apply { viewBehaviorInterceptors.add(MyInterceptor()) flakySafetyParams.timeoutMs = <span class="hljs-number"><span class="hljs-number">1_000</span></span> } ) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  Das hei√üt, <i>Kaspresso.Builder</i> ist √ºber den <i>TestCase-</i> <i>Konstruktor</i> verf√ºgbar, in dem Sie alle erforderlichen Einstellungen vornehmen.  Details zum Konfigurator finden Sie in der <a href="">Dokumentation</a> . <br><br><h2>  Sofortige Pl√§ne </h2><br>  In naher Zukunft planen wir Folgendes hinzuzuf√ºgen: <br><br><h3>  Zeigen Sie Testschritte in Allure an (Hallo an die Jungs von HeadHunter) </h3><br>  Durch einen speziellen Abfangj√§ger bereiten wir Daten f√ºr den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Marathon vor</a> .  Auf diese Weise k√∂nnen wir Allure-Berichte folgender Art anzeigen: <br><br><img src="https://habrastorage.org/webt/ad/dm/ux/addmux7l65zlvxi0fxlr97wr_o0.jpeg"><br><br>  Details in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PR # 4</a> <br><br>  PS PR ist bereits in Version 1.0.1, jetzt bereiten wir die entsprechende PR in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Marathon vor</a> . <br>  Pss.  Es besteht die Idee, jedem Schritt ein bestimmtes St√ºck des Protokolls beizuf√ºgen und dem Schritt "gefallen" einen Screenshot hinzuzuf√ºgen. <br><br><h3>  Testen von Upgrade-Skripten </h3><br>  Oft ist es notwendig, die Richtigkeit von Anwendungsupgrades zu √ºberpr√ºfen.  Ja, einige der Pr√ºfungen k√∂nnen auf Komponententests √ºbertragen werden.  Wir m√∂chten aber f√ºr die gesamte Anwendung ruhig sein. <br><br>  Leider ist dies auf einem reinen Espresso nicht m√∂glich, da der Test fehlschl√§gt, wenn wir die getestete apk neu installieren.  Sie k√∂nnen irgendwie versuchen, mit dem L√§ufer zu tricksen, aber ich kann mir nur schwer vorstellen, wie solche Verbesserungen aussehen und wie stabil sie sein werden. <br>  Daher bereiten wir bei Kaspresso eine L√∂sung f√ºr dieses Problem vor, die auf UiAutomator basiert.  Oben sticht jedoch das gleiche bekannte DSL hervor, das Kakao sehr √§hnlich ist und die gleiche Unterst√ºtzung f√ºr das Intersepting bietet. <br><br><h2>  N√ºtzliche Links </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kaspresso</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AdbServer</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chat</a> , in dem wir immer gerne alle Ihre Fragen beantworten <br><br><h2>  Danksagung </h2><br>  Besonderer Dank geht an alle, die an der Entwicklung des Projekts beteiligt waren. <br>  Es war sehr schwierig, aber verdammt cool! <br><br><img src="https://habrastorage.org/webt/_l/vd/_u/_lvd_ux_onb1ft8uoo2eat8_5uo.png"><br><br><img src="https://habrastorage.org/webt/j2/bm/i1/j2bmi1ov0wicizc7iru0shunom0.png"><br><br><h2>  Anstelle einer Schlussfolgerung </h2><br>  Wir glauben, dass Kaspresso und AdbServer Ihr Leben verbessern werden. <br>  Wir freuen uns √ºber Ihr Feedback, Ihre Empfehlungen, Yishuyam und PulRequest! <br>  Und vergessen Sie bitte nicht, ein Sternchen zu setzen! <br><br>  PS Und ganz am Ende eine kleine Umfrage =) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467617/">https://habr.com/ru/post/de467617/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467605/index.html">Alles was Sie brauchen ist URL</a></li>
<li><a href="../de467607/index.html">Gest√§ndnis des Hafenhassers</a></li>
<li><a href="../de467609/index.html">Erstellen einer mobilen Anwendung in React Native</a></li>
<li><a href="../de467611/index.html">Algorithmen zur Erkennung von Bildumrissen</a></li>
<li><a href="../de467615/index.html">Wie man einen Python-Wrapper erstellt und nicht verr√ºckt wird</a></li>
<li><a href="../de467619/index.html">Aquafor Kr√ºge sind ein gutes Beispiel daf√ºr, wie Filter f√ºr die Wasseraufbereitung nicht ausgelegt werden k√∂nnen</a></li>
<li><a href="../de467621/index.html">Elasticsearch Moskau Treffen in Ozon</a></li>
<li><a href="../de467623/index.html">Native reagieren: Erstellen eines animierten Eingabefelds mithilfe der animierten API</a></li>
<li><a href="../de467625/index.html">10 Dienstleistungen zur Schaffung einer Standortstruktur im Jahr 2020</a></li>
<li><a href="../de467627/index.html">AZN-V als √úberwachungstechnologie f√ºr Drohnen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>