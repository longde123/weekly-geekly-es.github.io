<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì¶ üî´ üö∑ Diretrizes para trazer "√† condi√ß√£o" um clone do popular mini-roteador chin√™s Hame A15, tamb√©m conhecido como "sem marca A5-V11" üëÅ‚Äçüó® ü§¥üèº üèÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se eu via al√©m dos outros, era porque ficava nos ombros de gigantes. 
 I. Newton 


 Acho que muitas pessoas conhecem o pequeno roteador chin√™s Hame A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Diretrizes para trazer "√† condi√ß√£o" um clone do popular mini-roteador chin√™s Hame A15, tamb√©m conhecido como "sem marca A5-V11"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425281/"><p>  <i>Se eu via al√©m dos outros, era porque ficava nos ombros de gigantes.</i> <i><br></i>  <i><b>I. Newton</b></i> </p><br><p>  Acho que muitas pessoas conhecem o pequeno roteador chin√™s Hame A15 (ou melhor, c√≥pias em massa dele, com TTX aprimorado em compara√ß√£o com o original, s√£o igualmente pesquisadas pelas palavras-chave <b>roteador 3G / 4G</b> no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ebay</a> e no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">aliexpress</a> ).  Hoje eu queria contar como lembrei de um roteador de US $ 6,5 e gastei US $ 20 nele.  Porque  E pela mesma raz√£o pela qual as pulseiras s√£o feitas de mi√ßangas - para treinar micromotores e vis√£o (os corpos dos componentes s√£o principalmente 0402 :) Principalmente por uma quest√£o de interesse esportivo, embora seja importante que este roteador seja de longe a minha base favorita de v√°rios projetos (mesmo com a dificuldade de acessar o GPIO), em vez dos "populares" NEXX WT3020F, TP-Link TL-MR3020, TP-Link TL-WR703N e outros.  A raz√£o para isso √© principalmente o tamanho e o formato da placa de circuito impresso, conveniente para incorporar em qualquer lugar (na foto voc√™ pode estimar o tamanho).  No futuro, para evitar confus√£o de terminologia, vou nomear o dispositivo mostrado abaixo, como √© chamado pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">wiki openwrt</a> - <b>A5-V11</b> . </p><br><img src="https://habrastorage.org/webt/xq/rw/n3/xqrwn3a7h_npbxhgw0xfajvcjh8.jpeg"><a name="habracut"></a><br><p>  O cora√ß√£o deste dispositivo √© o SoC Ralink RT5350F de 360 ‚Äã‚ÄãMHz, a bordo, h√° um host USB completo, mem√≥ria flash de 4 MB e SDRAM de 32 MB com uma frequ√™ncia de 166 MHz (o que √© estranho, a prop√≥sito, porque mesmo o antigo D-link DIR-320 a bordo tinha um DDR mais r√°pido).  Alguns clones de clone t√™m 16 MB de mem√≥ria e n√£o s√£o adequados sem aumentar a RAM para as manipula√ß√µes descritas neste artigo. </p><br><p>  Como de costume, a imagem abaixo mostra o roteador Hame A15 original. </p><br><div class="spoiler">  <b class="spoiler_title">Original Hame A15</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/c51/593/bb2/c51593bb22f95c58a5bfbc7cbe9fe93b.jpg" alt="imagem"></div></div><br><p>  E aqui est√° sua c√≥pia melhorada em chin√™s (no final do artigo, voc√™ pode ver outra c√≥pia da c√≥pia, mas 10 vezes mais cara :). </p><br><div class="spoiler">  <b class="spoiler_title">Clone chin√™s Hame A15</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b4c/a9b/96b/b4ca9b96b4217413d40e6fc99a4b0f91.jpg" alt="imagem"></div></div><br><p>  Os internos do firmware j√° estavam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">iluminados</a> no hub, ent√£o n√£o vou me debru√ßar sobre os recursos da marca√ß√£o.  Detalhes dos problemas e solu√ß√µes s√£o descritos em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">w3bsit3-dns.com</a> .  H√° muita informa√ß√£o, mas √© incrivelmente dispersa.  Espero coletar pontos-chave neste artigo, com base na experi√™ncia dos caras - ‚Äúgigantes da produ√ß√£o de roteadores‚Äù :) <br>  A resposta para a pergunta "por que esse (roteador) precisa de um usu√°rio inexperiente" cita o usu√°rio <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ded1971</a></b> : </p><br><blockquote>  Propriedades do consumidor - roteador 3G-WiFi compacto e vers√°til.  √â conveniente fazer viagens, conectar um modem 3G / 4G, organizar sua rede Wi-Fi ou us√°-lo como repetidor para aprimorar o Wi-Fi, conectar a Internet a uma TV inteligente, se n√£o houver Wi-Fi embutido.  Em geral, um monte de recursos √∫teis por dinheiro rid√≠culo. </blockquote><br><div class="spoiler">  <b class="spoiler_title">Bem, uma compara√ß√£o com o ES8266 onipresente e popularmente amado</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zi/e4/fu/zie4fug9lfi3y2pvxuvtubvfyga.jpeg"></div></div><br><h2>  <b>Parte I, Preparat√≥ria</b> </h2><br><p>  Enquanto o roteador estava no correio, houve tempo para estudar as cr√≠ticas dos felizes propriet√°rios.  Os principais problemas enfrentados pela maioria s√£o os problemas de superaquecimento do roteador (e, consequentemente, do "chip blade") e instabilidade de energia, quando o roteador n√£o pode ser iniciado por um longo per√≠odo de tempo ("indicador" - dois LEDs est√£o fracamente acesos, √© imposs√≠vel conectar ao dispositivo via Ethernet). <br>  Para combater o primeiro problema, foi decidido instalar um radiador no chip.  Para fazer isso, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">encomendei</a> pequenos radiadores de alum√≠nio de tamanho 12x12x3 mm (exatamente o tamanho do chip).  A altura de 3 mm foi escolhida porque eu queria que o radiador saliente n√£o se agarrasse a objetos (em uma bolsa, por exemplo) e que o roteador pudesse estar deitado de forma est√°vel sobre a mesa. </p><br><div class="spoiler">  <b class="spoiler_title">√â assim que os placers dos radiadores se parecem ...</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hv/ut/of/hvutofqkpygjf6z584zuogpo1h8.jpeg"></div></div><br><p>  Para consertar o radiador, decidi usar hot melt.  Dos dispon√≠veis em nossa √°rea - havia apenas um Alsil-5 "√∫nico", que, apesar da condutividade t√©rmica razoavelmente boa, n√£o implica armazenamento de longo prazo.  Seca em alguns dias (e se voc√™ tiver sorte, pode comprar j√° seco).  Portanto, no mesmo aliexpress, foram solicitados dois tipos de adesivo hot-melt para radiadores de LED de alta pot√™ncia - <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Halnziye HY910</a></b> e <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Hcbonyx HC-910</a></b> . </p><br><div class="spoiler">  <b class="spoiler_title">Adesivo de fus√£o a quente vigoroso chin√™s</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/t8/oz/3c/t8oz3cxfsxxdgescpbxqrixahea.jpeg"></div></div><br><p>  As an√°lises sobre eles em f√≥runs especializados n√£o s√£o ruins, embora os especialistas ainda recomendem o uso de adesivos ep√≥xi a quente de dois componentes, como o <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Thermopox 85CT,</a></b> para tarefas s√©rias.  Mas v√° encontr√°-lo ainda ... <br>  Apenas por precau√ß√£o, apresentarei abaixo caracter√≠sticas comparativas das condutividades t√©rmicas do hot melt usado por mim, encontrado na Internet. </p><br><blockquote>  Hot melt Halnziye HY910 - Condutividade t√©rmica 0.975W / mK <br>  Adesivo de fus√£o a quente Alsil-5 - condutividade t√©rmica 1.4-1.6W / mK <br>  Hcbonyx HC-910 adesivo termofus√≠vel - condutividade t√©rmica 1.7W / mK </blockquote><br><div class="spoiler">  <b class="spoiler_title">E a foto geral :)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dx/yn/w5/dxynw5hmybwxmhld-w_vnw9jjim.jpeg"></div></div><br><p>  Para instalar o radiador, tive que cortar o gabinete (inclusive para melhorar a transfer√™ncia de calor).  Para fazer tudo com a maior precis√£o poss√≠vel, a primeira coisa que fiz foi desenhar as dimens√µes do cart√£o em papel grosso, fazer um buraco no chip e colocar esse modelo de papel√£o no estojo.  Ent√£o tudo √© simples - desenhe os contornos do buraco com um l√°pis, corte-o com uma faca de escrit√≥rio e triture a lima. </p><br><img src="https://habrastorage.org/webt/9q/o-/nl/9qo-nlm0e9vzad5o_sfsifzcjh8.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Marca√ß√£o e corte da caixa de pl√°stico do radiador 12x12</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/eh/1g/c-/eh1gc-i_lgdpe2tqwgqirx3re58.jpeg"><br><img src="https://habrastorage.org/webt/83/zi/i5/83zii5m42wo-pk-y8ieffpyqy4o.jpeg"><br><img src="https://habrastorage.org/webt/ps/im/5p/psim5pqhpvvxwdrqhayszjckn-k.jpeg"></div></div><br><p>  Paralelamente √† instala√ß√£o do radiador, <u>√© necess√°rio</u> soldar o capacitor SMD de cer√¢mica ausente <b>10 uF 6,3 V</b> ao roteador no circuito conversor de 3,3V.  (a conselho do usu√°rio <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">return1</a></b> ).  O local da instala√ß√£o √© mostrado na figura: </p><br><img src="https://habrastorage.org/webt/el/nl/kq/elnlkqdn_wmebw8rhecg8pxdwqk.jpeg"><br><div class="spoiler">  <b class="spoiler_title">E aqui est√° uma placa com um capacitor de 10 microfarads de 6,3 V j√° instalado</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/_h/zi/bw/_hzibwbg-ou98na-zzxksay1j2k.jpeg"></div></div><br><p>  Segundo as avalia√ß√µes, o consumo atual do dispositivo diminui e se torna mais est√°vel.  Presumivelmente, no conversor de 3,3V, ondula√ß√µes aparecem na sa√≠da que desabilitam o processador.  O capacitor suaviza essas ondula√ß√µes. </p><br><p>  <b>Importante!</b>  <u>Tente instalar o radiador e solde o capacitor ANTES de iniciar e operar o roteador.</u>  Caso contr√°rio, pode acontecer que Borjomi seja tarde demais para beber ... </p><br><p>  As pessoas resolvem o problema com a energia instalando chips de monitor de energia especializados, em vez da cadeia RC padr√£o do roteador, por exemplo, <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">KR1171SP28</a></b> , <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">DS1816</a></b> ou <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">MAX809TTR</a></b> .  Gostei imediatamente da op√ß√£o de usar os supervisores de energia da Maxim.  As duas tarefas principais que os supervisores podem resolver s√£o manter o controlador no estado de redefini√ß√£o at√© que a tens√£o de alimenta√ß√£o atinja o valor definido e estabilize, ou redefinir o controlador quando a tens√£o de alimenta√ß√£o cair abaixo de um n√≠vel cr√≠tico ou quando a tens√£o cair repentinamente.  Al√©m das vantagens desse tipo de supervisor, note-se que nenhum componente adicional √© necess√°rio para instalar o microcircuito e, em termos de tamanho, esse dispositivo semicondutor se encaixa nos elementos removidos (sim, voc√™ deve primeiro remover os resistores e capacitores que n√£o s√£o mais necess√°rios e depois passar por cima tran√ßa sobre almofadas). </p><br><img src="https://habrastorage.org/webt/am/hn/he/amhnhetbzfafmcqmfgi_o6glivu.jpeg"><br><p>  A pesquisa no aliexpress n√£o resultou em nada, mas fez uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">pesquisa</a> no cat√°logo CHIPiDIP, onde foram encontrados os <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">modeladores de</a></b> pulso <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">MAX809TEUR + T</a></b> ( <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">redefinidores</a></b> ) (com uma tens√£o de 3,08 volts), um dos quais foi soldado com sucesso ao roteador. </p><br><img src="https://habrastorage.org/webt/tf/gh/jo/tfghjovrvng4-1fhq2zcvxdolym.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Definir o modelador de pulsos (redefinir) MAX809TEUR + T</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wx/mz/v8/wxmzv8tumrwenm-8dwdbzv7yss0.jpeg"><br><img src="https://habrastorage.org/webt/is/zf/es/iszfeso0wlsatspn29hw_bgc6ei.jpeg"><br><img src="https://habrastorage.org/webt/2s/mu/fb/2smufbcg314dg5sjpjgmd_r3p2e.jpeg"></div></div><br><p>  A prop√≥sito, n√£o posso deixar de mencionar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ferro de solda USB</a> chin√™s, sem o qual eu nunca teria mudado esse procedimento (mesmo com um elogiado micro-ondas ...). <br>  Para n√£o desperdi√ßar um ferro de solda, ao mesmo tempo, decidi soldar um bloco de contato nas almofadas de contato do console UART (calcanhares) para simplificar a conex√£o com os fios duplos dos projetistas do Arduino.  Almofadas Almofadas idealmente combinadas com um passo de contato de 2 mm (2,54 mm comuns j√° s√£o largos).  Estes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">s√£o</a> , por exemplo.  Para tornar mais conveniente a solda, com a ajuda de uma pin√ßa, dobrei as extremidades dos contatos com a letra G e estanhei os pontos na placa do roteador. </p><br><div class="spoiler">  <b class="spoiler_title">Preparando o console do UART</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/5h/6z/qy/5h6zqycmpexzy4qouhlmy3rx8qu.jpeg"></div></div><br><p>  Depois, bastava instalar o bloco nos calcanhares e aquecer levemente a jun√ß√£o at√© a solda derreter.  √â importante n√£o exagerar (o que √© f√°cil de fazer com um ferro de soldar poderoso), caso contr√°rio os leit√µes podem simplesmente cair devido ao superaquecimento.  Nesse caso, a imagem mostra os pontos de teste de backup onde voc√™ pode soldar. </p><br><img src="https://habrastorage.org/webt/gz/6i/ib/gz6iibr3eakny3pr1sacg2kcxl0.jpeg"><br><p>  A prop√≥sito, voc√™ pode soldar os contatos com outro m√©todo, mas o caso n√£o pode ser fechado assim. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/5e7/b7c/02a/5e7b7c02ac8b291e046e30f39983fb6b.jpg" alt="Soldagem alternativa de contatos UART"><br><p>  Com isso, a parte preparat√≥ria terminou e a parte principal come√ßou. </p><br><h2>  <b>Parte Dois, "Programador"</b> </h2><br><p>  Como mencionei no in√≠cio do artigo, o roteador tem pouca mem√≥ria, apenas 4 MB.  Obviamente, algu√©m pode se lembrar do fato de que "640 KB deve ser suficiente para todos".  Mas, depois de passar uma semana tentando inserir todos os pacotes necess√°rios (e existem 8 MB (!)) No openwrt auto-montado do D-Link DIR-320, agora tenho certeza de que n√£o vale a pena economizar em mem√≥ria.  Portanto, foi decidido mudar o flash para um mais amplo e, ao mesmo tempo, com um custo razo√°vel (para n√£o ser mais caro que o pr√≥prio roteador).  S√£o necess√°rios chips com freq√º√™ncia efetiva (taxa de clock SPI) de pelo menos 100 MHz e tens√£o de alimenta√ß√£o de 3,3 V. Dos fabricantes - Winbond ou qualquer outro (En = Eon, Mx = Macronix, Pm = PMC, At = Atmel).  Pelo que a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">openwrt.org</a> aconselha s√£o <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">W25Q128BV</a></b> , MX25L128 (35F), S25FL128P, S25FL129P, GD25Q128C, GD25Q128CSIG.  O n√∫mero 128 na marca√ß√£o indica que o volume da unidade flash √© de 16 MB (128Mbit = 16Mb).  A escolha do tamanho nominal deve-se ao fato de que um programador chin√™s barato de chips de mem√≥ria CH341A 24/25 (sobre ele abaixo) pode trabalhar com esse volume sem dan√ßar com um pandeiro.  Para os f√£s, posso dizer que 32 MB podem ser soldados (por exemplo, W25Q256FV, MX25L25635F, N25Q256A, MX25L25645GM2I-10G e at√© 64 MB (MX25L51245G, MT25QL512AB). No entanto, gostaria de observar que os pre√ßos para mem√≥ria est√£o longe de serem humanos para os m√≥dulos de 64 MB. Observarei que falando sobre chips de mem√≥ria SOMENTE no pacote SOP8, que √© o mais conveniente para a soldagem, √© claro que voc√™ pode <a href="" rel="nofollow">usar</a> chips nos <a href="" rel="nofollow">gabinetes WSON8</a> com almofadas de contato em vez de pernas, mas a solda consome muito tempo e o resultado pode n√£o corresponder √†s expectativas. <br>  Voc√™ pode piscar um chip de mem√≥ria de v√°rias maneiras diferentes, dependendo do que est√° dispon√≠vel: <br>  <b>a)</b> H√° um diodo / capacitor e uma porta paralela (o programador mais simples) - examinamos as instru√ß√µes de firmware no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">site tcheco</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">em russo</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Portanto, esse programador mais simples de um conector LPT e alguns detalhes parece na vida</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/75b/184/0b375b184a2556dc41d71edc6567a01a.jpg" alt="imagem"></div></div><br><p>  <b>b)</b> Existe algum Arduino (Pro, Micro, Nano etc.) - prepararemos a partir deles um programador para nossos flash drives SPI, de acordo com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">receita</a> a seguir. <br>  <b>c)</b> Se houver um Raspberry Pi - veja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">aqui</a> <br>  <b>d)</b> Existe um programador USBASP "popular" (que j√° foi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">escrito</a> em Habr√©) - estamos preparando-o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">acordo com a receita n¬∫ 2</a> . <br>  <b>e)</b> H√° apenas um desejo e um pouco de dinheiro - compramos no aliexpress um programador chin√™s CH341A para flash 24/25 SPI e silenciosamente come√ßamos a trabalhar. </p><br><p>  A pr√≥pria unidade flash est√° conectada ao (s) programador (es) da seguinte forma: </p><br><div class="spoiler">  <b class="spoiler_title">Pinagem do chip de mem√≥ria</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/dca/bff/40e/dcabff40e2b61ec33aa98f88f0409b42.jpg" alt="imagem"></div></div><br><p>  A unidade flash pode ser soldada e conectada aos pads / adaptadores do programador, ou voc√™ pode soldar os fios Dupont j√° mencionados do Arduino e conectar os fios ao programador.  O "funcionamento" do flash s√£o os contatos <b>MISO</b> , <b>MOSI</b> , <b>CLK</b> , <b>CS</b> , <b>VCC</b> e <b>GND</b> .  Se a programa√ß√£o for realizada sem remover o microcircuito da placa, √© melhor dessoldar e aumentar levemente o contato VCC sobre o plano da placa por um tempo.  Depois de terminar o trabalho, pressione o p√© na placa e solde-o. <br>  Como n√£o queria procurar uma porta LPT, decidi agir na √∫ltima op√ß√£o e) e comprar um peda√ßo de ferro adicional no meu parque.  Essa pe√ßa √© chamada <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">CH341A</a></b> e, curiosamente, √© um programador baseado no chip CH341, por tr√°s da cria√ß√£o da megacorpora√ß√£o chinesa "amplamente conhecida" <i>Jiangsu QinHeng Ltd.</i>  :) </p><br><div class="spoiler">  <b class="spoiler_title">Diagrama do circuito do programador</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f08/a0a/cfc/f08a0acfc6a62d2da36c2cb6ef343f75.png" alt="imagem"></div></div><br><p>  Ao solicitar <u>apenas um</u> programador, recomendo fortemente que voc√™ compre um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">adaptador</a> de caixas SOP8 / SOIC8 para caixas DIP e um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">clipe</a> para trabalhar com microcircuitos. </p><br><div class="spoiler">  <b class="spoiler_title">Adaptador e clipe</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ue/_x/to/ue_xtorv84tzvamgbymbnqro7xs.jpeg"><br><img src="https://habrastorage.org/webt/oz/il/un/ozilun0uq6m46zsevdh1lrqkchs.jpeg"></div></div><br><p>  Voc√™ n√£o pode obter economias escassas, mas compre imediatamente um kit pronto, composto por um programador e todos os adaptadores necess√°rios; al√©m dos dois adaptadores mencionados acima, voc√™ tamb√©m ter√° um adaptador para programar chips de 1,8 V. </p><br><div class="spoiler">  <b class="spoiler_title">Parece um kit pronto</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/yh/jk/tm/yhjktmqetzttqjomgedd3ntzi84.jpeg"></div></div><br><p>  Pela minha pr√≥pria experi√™ncia, direi que o clipe do prendedor de roupa funciona todas as vezes e, muito provavelmente, o chip ter√° que ser retirado da solda e colocado no adaptador SOP8-DIP ou mesmo soldado √†s almofadas do pr√≥prio programador. </p><br><p>  <u>Al√©m disso</u> : finalmente meu adaptador veio, ou como √© chamado corretamente de <b>adaptador ZIF SOP8-DIP8 150 mil</b> .  Este adaptador √© adequado para microcircuitos com uma largura de caixa de 150mil, um passo de pinos de 1,27 mm.  Al√©m de 150 mil, pode haver 200 mil, por isso √© importante prestar aten√ß√£o nisso ao fazer pedidos em leil√µes (eu tenho microchips e o mesmo, portanto, existem dois adaptadores). </p><br><div class="spoiler">  <b class="spoiler_title">Como distinguir visualmente entre o adaptador ZIF 150 e 200 mil</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/i0/3r/e7/i03re7tib25lkpzkodmp_qantwg.jpeg"></div></div><br><p>  A pe√ßa √© incrivelmente conveniente, o microcircuito √© preso facilmente, naturalmente e com muita clareza (o sistema se assemelha a um alicate).  Para fazer isso, basta clicar na parte superior el√°stica do gabinete, colocar o chip nas √°reas expostas e soltar essa parte do gabinete de volta.  Os contatos superiores com mola se estendem quando liberados e o microcircuito se prende automaticamente (foto para maior clareza, porque o microcircuito de 200 mil est√° no adaptador de 150 mil, por isso n√£o o chutei, prendi na m√£o).  Em seguida, instalamos no programador, procurando onde temos o p√© 1 (um c√≠rculo no chip).  Acontece assim: </p><br><img src="https://habrastorage.org/webt/nx/3g/ft/nx3gftuwoq2chvdsrzsv_fbeyrw.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Imagens mais bonitas do SOIC8 SOP8 no adaptador DIP8</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/tc/ex/za/tcexzaa6jeafqpqnot33s8uhz58.jpeg"><br><img src="https://habrastorage.org/webt/pk/cu/fx/pkcufxejj7qt1yile91pfcj1-fa.jpeg"><br><img src="https://habrastorage.org/webt/ti/m7/0r/tim70ro7wotbs7fqn4qxttbkeew.jpeg"><br><img src="https://habrastorage.org/webt/lv/rp/rj/lvrprjzm16nwaqssjls2hhz2use.jpeg"></div></div><br><p>  Filmei um chip de mem√≥ria nativo usando uma esta√ß√£o de solda a ar quente e, para aqueles que n√£o possuem esse equipamento, recomendo o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">uso do m√©todo da liga Rose</a> .  Ap√≥s o trabalho, remova os restos da liga Rose com uma tran√ßa da placa e dos microcircuitos, longe do pecado. <br>  Conectamos o microcircuito removido ao programador (para quem, como e como √© o resultado).  Eu estava com pregui√ßa de soldar, sinceramente tentei apertar o clipe, como resultado, as pernas estavam muito achatadas pela mola do clipe.  Mas n√£o pretendia soldar o flash de 4 MB, mas um bom contato deve garantir uma leitura suave.  E assim aconteceu.  Nota bene para quem solda o microcircuito - observe cuidadosamente os n√∫meros nas placas adaptadoras e solda de acordo com eles.  No caso de um clipe, o fio vermelho no la√ßo da chave est√° no n√∫mero da perna 1. </p><br><img src="https://habrastorage.org/webt/l4/cr/g9/l4crg92dn4etg-xkngb70iewduy.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Capturado e com sucesso de ...</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/78/jt/hu/78jthurktjxlqllhydakdoxr5yw.jpeg"><br><img src="https://habrastorage.org/webt/ff/9l/os/ff9losgpei2qnttiqayqdwx8y-y.jpeg"><br><img src="https://habrastorage.org/webt/rv/wy/cc/rvwyccyq1zt2jzdccw9wihwl4je.jpeg"><br><img src="https://habrastorage.org/webt/gc/nj/wm/gcnjwmaue1x9hw3wb1nv_jdcofs.jpeg"></div></div><br><p> Depois de lidar com o ferro, voc√™ precisa lidar com o software.  Como j√° escrevi, em um hub esse programador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aparece</a> periodicamente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em artigos</a> .  √â claro que funciona sem problemas com todos os sistemas operacionais modernos (por exemplo, os drivers do Windows 10 s√£o automaticamente retirados da rede e, no Linux, eles est√£o no kernel h√° v√°rios anos).  Mas, mas voc√™ nunca sabe o que acontece, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">aqui</a> voc√™ pode encontrar drivers (para o modo Serial / Paralelo) como arquivos separados por precau√ß√£o.  Para programa√ß√£o no Windows, a autoria de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">software chinesa</a> de um determinado SkyGz √© mais frequentemente usada.  Para Linux, existem projetos abertos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ch341prog</a> (SPI) e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ch341eepromtool</a> (I2C), voc√™ pode usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">flashrom</a> "folk".  Como eu uso o Windows, e as cr√≠ticas sobre o "programa da China" para a maioria dos usu√°rios n√£o s√£o muito positivas (especialmente sobre as novas vers√µes de 1,28 ... 1,30), para que o destino n√£o seja tentado, o chip foi lido usando um programador <i>russo</i> simples e confi√°vel <b>AsProgrammer</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">vers√£o 1.4.0</a> .  A prop√≥sito, se algo de repente n√£o gostar de algo / n√£o estiver claro, ou por exemplo, voc√™ precisar adicionar um novo microcircuito, poder√° escrever facilmente no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">t√≥pico "suporte t√©cnico"</a> e obter feedback r√°pido. </p><br><div class="spoiler">  <b class="spoiler_title">Por que N√ÉO vale a pena comprar mem√≥ria flash com mais de 16 MB</b> <div class="spoiler_text"><p>  Permitirei-me uma pequena digress√£o e explicarei minha relut√¢ncia em instalar uma unidade flash de 32 MB (a diferen√ßa de pre√ßo de 16 MB n√£o √© cr√≠tica).  O fato √© que nem nos programas chineses (vers√µes 1.29 ou 1.30), nem no mencionado suporte AsProgrammer para microchips ala W25Q256FV, MX25L25635F, N25Q256A, MX25L25645GM2I-10G.  Talvez a raz√£o para isso seja que, para um flash SPI, o valor m√°ximo seja de 128 MBit (o m√°ximo que pode ser endere√ßado com o modo de endere√ßamento de 3 bytes adotado pelo JEDEC).  E aqui n√£o h√° tantas op√ß√µes.  Por exemplo, voc√™ pode escrever com o flashrom modificado a primeira metade do chip w25q256 (tamanho de 16 MB), como o chip w25q128 familiar a este programa com 16 MB e colocar o gerenciador de inicializa√ß√£o correto (Breed, por exemplo) e as se√ß√µes de f√°brica com informa√ß√µes de "servi√ßo" nesse volume (mac Endere√ßo do roteador, calibra√ß√£o de wi-fi, etc.).  E j√° tendo inicializado no modo bootloader (em caso de reconhecimento bem-sucedido por ele de todo o volume do microcircuito), seria poss√≠vel exibir o firmware compilado com anteced√™ncia a partir dele.  Geralmente, voc√™ pode comprar unidades flash para o futuro e aguardar at√© que o suporte para esses volumes apare√ßa em vers√µes quebradas do software chin√™s para ch341a ou quando o flashrom estiver conclu√≠do.  Para resumir, √© melhor levar 16 MB :) porque "cansado de alcan√ßar as estrelas, pegue o que est√° sob seus p√©s". </p></div></div><br><p>  Trabalhar com o AsProgrammer √© extremamente simples, primeiro selecione seu microchip no menu "Chip" e depois clique no bot√£o "Ler".  Alguns minutos e um dep√≥sito no nosso bolso :) </p><br><div class="spoiler">  <b class="spoiler_title">Ler dump do chip de 4 MB da f√°brica</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/fx/dr/wq/fxdrwq3lxdmgv1ckg3t_77njosu.jpeg"></div></div><br><p>  O flash completo de f√°brica consiste em um gerenciador de inicializa√ß√£o, um par de se√ß√µes para armazenar diferentes configura√ß√µes e o pr√≥prio firmware. </p><br><div class="spoiler">  <b class="spoiler_title">Estrutura de firmware de f√°brica de 4 MB</b> <div class="spoiler_text"><p>  0x00000000-0x00030000: "Carregador de inicializa√ß√£o" <br>  0x00030000-0x00040000: "Configura√ß√£o" <br>  0x00040000-0x00050000: "F√°brica" <br>  0x00050000-0x0011282a: "Kernel" </p></div></div><br><p>  O arquivo de despejo salvo deve ser aberto em qualquer editor HEX (estou acostumado a usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">WinHex</a> ) e no endere√ßo <b>105720</b> (o endere√ßo em decimal, em hexadecimal ser√° 00019CF8), alteramos <b>40 00</b> para <b>00 01</b> para 16 MB flash (bem, ou <b>80 00</b> se de repente, voc√™ decide economizar um centavo e comprar um chip de 8 MB).  Salvamos o firmware modificado para uso futuro.  A prop√≥sito, o endere√ßo 105720 n√£o √© um ponto de algum tipo de anexo e outros n√∫meros podem estar localizados l√°, especialmente se voc√™ j√° tentou desbloquear o gerenciador de inicializa√ß√£o para o firmware openwrt, etc. Portanto, se nada acontecer, o valor estimado ‚Äú40 00 "no endere√ßo 105720 n√£o est√° vis√≠vel, procuramos no menu do editor hexadecimal uma busca por valores HEX e acionamos a combina√ß√£o de bytes de teclas" <b>00 00 16 40</b> "l√°.  Isso levar√° aos n√∫meros / endere√ßos desejados. </p><br><div class="spoiler">  <b class="spoiler_title">Encontrar a combina√ß√£o desejada 00 00 16 40</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/_c/js/3s/_cjs3slpz9l3l-pdbdo-m5uswnk.jpeg"></div></div><br><p>  Por que isso foi necess√°rio?  E ent√£o, para que o carregador de inicializa√ß√£o modificado permita que voc√™ fa√ßa o flash do roteador via UART via TFTP, usando um firmware maior. <br>  Em seguida, preencha o firmware salvo em uma unidade flash maior pr√©-adquirida, come√ßando no endere√ßo 0 (desde o in√≠cio).  No caso de uma programa√ß√£o bem-sucedida, solde o chip de mem√≥ria no lugar e passe para a pr√≥xima etapa.  A prop√≥sito, ao programar um microcircuito adquirido, senti pena de beliscar com um clipe e tive que sold√°-lo no bloco :) </p><br><div class="spoiler">  <b class="spoiler_title">Download do firmware</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/cd/ju/nz/cdjunzkbafv25r_ejw8u8eigpkk.jpeg"></div></div><br><h2>  <b>Parte Tr√™s, openwrt-shnaya</b> </h2><br><p>  O pr√≥ximo passo √© criar sua pr√≥pria vers√£o do openwrt.  Se eu n√£o precisasse de alguns pacotes espec√≠ficos que n√£o podem ser encontrados no firmware sysupgrade oficial (e "de entusiastas") existente, basta baixar a primeira vers√£o dispon√≠vel do firmware para o seu modelo de roteador e carreg√°-lo atrav√©s dos chips de mem√≥ria grandes J√Å modificados gerenciador de inicializa√ß√£o ou da maneira antiga de usar o programador acima.  Mas eu preciso incorporar alguns pacotes n√£o caracter√≠sticos no firmware do meu roteador, ent√£o tive que seguir um caminho mais complicado e criar o openwrt para mim.  Este procedimento √© bastante bem descrito para muitos modelos de roteadores (por exemplo, para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tp-Link TL-WR741ND</a> em Habr√©, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Tp-Link TL-MR3020</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">D-Link DIR320A1</a> , milhares deles ...), portanto, vou me limitar a uma breve lista das principais etapas (mais detalhes podem ser encontrados). olhe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">aqui</a> ). </p><br><p>  Se n√£o houver uma m√°quina * nix em casa, a primeira coisa que instalamos no VirtualBox √© o Ubuntu x64 (ou algo assim). </p><br><p>  Atualizando informa√ß√µes sobre pacotes instalados <br>  <i>sudo apt-get update</i> <br>  Instale o necess√°rio.  Para o Ubuntu 16.04 LTS, √© assim: <br>  <i>sudo apt-get install subvers√£o essencial para compila√ß√£o libncurses5-dev zlib1g-dev gawk gcc-multilib flex git-core gettext libssl-dev descompactar</i> </p><br><p>  Copie o c√≥digo-fonte do firmware selecionado para o seu computador usando o comando <i>git clone</i> .  Sob o spoiler - links para as fontes de diferentes vers√µes do openwrt. </p><br><div class="spoiler">  <b class="spoiler_title">Reposit√≥rios Git de projetos OpenWrt e LEDE</b> <div class="spoiler_text"><p>  18/06/1 <br>  git clone git: //github.com/openwrt/openwrt.git -b v18.06.1 <br>  18/06/0 <br>  git clone git: //github.com/openwrt/openwrt.git -b v18.06.0 <br>  1 / 17,5 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.5 <br>  17/01/4 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.4 <br>  17/01/3 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.3 <br>  17/01/2 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.2 <br>  17/01/1 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.1 <br>  17/01 <br>  git clone git: //github.com/openwrt/openwrt.git -b v17.01.0 <br>  15/05/1 <br>  git clone git: //github.com/openwrt/archive.git -b v15.05.1 <br>  15,05 <br>  git clone git: //github.com/openwrt/archive.git -b v15.05 <br>  14/07 <br>  git clone git: //github.com/openwrt/archive.git -b v14.07 <br>  12,09 <br>  git clone git: //github.com/openwrt/archive.git -b v12.09 </p></div></div><br><p>  A mercadoria baixada ser√° implantada no diret√≥rio openwrt.  Entramos nele com o <i>comando cd</i> , trocamos e atualizamos componentes adicionais com o comando <br>  <i>Atualiza√ß√£o de ./scripts/feeds -a &amp;&amp; ./scripts/feeds install ‚Äìa</i> <br>  Agora √© a hora de corrigir os "arquivos importantes" para que o compilador possa montar corretamente o firmware da nossa unidade flash ampliada e n√£o parar se, de repente, exceder os 4 MB <s>prescritos</s> .  Para fazer isso, fa√ßa o seguinte.  No diret√≥rio baixado com fontes openwrt no arquivo target / linux / ramips / dts / A5-V11.dts, substitu√≠mos pelos valores indicados na figura abaixo (usei o editor nano, tamb√©m √© poss√≠vel atrav√©s de F4 em mc). </p><br><img src="https://habrastorage.org/webt/qp/c0/hj/qpc0hjzebofk0k71mxd1ojj-jae.jpeg" alt="Editando o arquivo * .dts para aumentar a mem√≥ria (em 15/05/1)"><br><p>  Salve o arquivo, execute no console <br>  <i>make defconfig</i> <br>  e aplique as configura√ß√µes padr√£o para o perfil e <i>fa√ßa menuconfig</i> .  Aqui, o ponto principal √© escolher o perfil certo: </p><br><blockquote>  Sistema de destino: Ralink RT288x / RT3xxx <br>  Subtarget: placas baseadas em RT3x5x / RT5350 <br>  Perfil do Alvo: A5-V11 </blockquote><p>  e ent√£o - por analogia com o assembly openwrt para outros roteadores (forneci os links acima), modificamos o conjunto de pacotes da maneira que precisamos e salvamos a configura√ß√£o (no arquivo <i>.config</i> ).  A prop√≥sito, se voc√™ planeja alterar as configura√ß√µes com frequ√™ncia, √© poss√≠vel fazer backup dos <i>comandos scripts / diffconfig.sh&gt; mydiffconfig a</i> cada vez, para salvar as altera√ß√µes de configura√ß√£o no arquivo mydiffconfig a cada vez.  Depois de fazer a configura√ß√£o necess√°ria (e selecionar todos os pacotes necess√°rios), iniciamos a constru√ß√£o com o comando <i>make</i> . <br>  Devido √† auto-compila√ß√£o do kernel, voc√™ pode achar que muitos pacotes de reposit√≥rios oficiais n√£o s√£o adequados para instala√ß√£o.  Isso deve ser levado em considera√ß√£o e, com mais frequ√™ncia, defina a bandeira "M" na frente da embalagem desejada.  Esses pacotes podem ser encontrados na pasta openwrt / bin / ramips / packages e carregados em algum servidor HTTP para criar seu pr√≥prio reposit√≥rio pessoal de <s>blackjack e ...</s> para o OpenWRT :). <br>  A prop√≥sito, lembrei que √© muito conveniente executar o comando <i>make</i> no seguinte formato: <br>  <i>fa√ßa V = 99 2&gt; &amp; 1 |</i>  <i>tee build.log |</i>  <i>erro grep -i</i> <br>  Nesse caso, o compilador salva uma c√≥pia detalhada completa das informa√ß√µes de depura√ß√£o sobre o assembly no arquivo build.log no diret√≥rio openwrt e exibe apenas erros na tela.  Em seguida, esse log √© convenientemente anexado aos f√≥runs para encontrar a causa do erro ou fazer uma pergunta.  Al√©m disso, √© √≥timo para identificar pacotes nos quais o compilador para de funcionar.  Voc√™ pode encontrar o texto mencionado no log pesquisando o diret√≥rio usando o comando <br>  <i>grep ‚ÄìHr "TEXT" &lt;caminho para o diret√≥rio de pesquisa&gt; |</i>  <i>cut ‚Äìd: -f1 |</i>  <i>classificar -u</i> <br>  Mas sinceramente espero que a compila√ß√£o seja bem-sucedida e n√£o seja necess√°rio procurar erros.  Ap√≥s a conclus√£o do processo, voc√™ poder√° encontrar os arquivos de firmware na pasta <i>bin</i> do diret√≥rio openwrt, algo como <b>openwrt-ramips-rt305x-a5-v11-squashfs-sysupgrade.bin</b> .  Pegamos esse arquivo e vamos para a fase final. </p><br><h2>  <b>Parte Quatro, Console</b> </h2><br><p>  Depois que o firmware √© coletado nas entranhas da m√°quina virtual, resta apenas coloc√°-lo no roteador.  Gosto da op√ß√£o com o UART (n√£o √© por acaso que soldei o pad aos n√≠quel de contato).  Para conectar, voc√™ precisa de um adaptador USB para TTL UART ou de pelo menos um cabo de dados de uma Siemens antiga.  Felizmente, eu tinha esse adaptador no chip FT232 (o CP2102 e o onipresente CH340 tamb√©m s√£o adequados).  A pinagem da pinagem √© mostrada na foto. </p><br><img src="https://habrastorage.org/webt/pf/he/uh/pfheuh5510zu26jo5vu5mdfhi4k.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Pinagem prim√°ria e de backup para o console UART</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gz/6i/ib/gz6iibr3eakny3pr1sacg2kcxl0.jpeg"></div></div><br><p>  Conectamos os contatos ao adaptador da seguinte maneira: </p><br><blockquote>  Roteador GND ‚Üí adaptador GND <br>  Roteador RX ‚Üí resistor de 470 Ohm-1 kOhm ‚Üí adaptador TX <br>  Roteador TX ‚Üí Adaptador RX </blockquote><p>  Vou explicar por que um resistor √© necess√°rio.  Quando liguei o roteador conectado ao adaptador, ele travou e come√ßou a aquecer. </p><br><div class="spoiler">  <b class="spoiler_title">Ent√£o, tudo conectado ...</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ix/fc/ft/ixfcfttwh9-gsniex1hagvq4zys.jpeg"></div></div><br><p>  Ao mesmo tempo, algo como </p><br><blockquote>  œür‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí1‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñíA‚ñí‚ñí (0‚ñí‚ñí‚ñí‚ñí‚ñí <br>  ? ‚ñí‚ñí‚ñí {‚ñíF‚ñí‚ñí‚ñí‚ñí‚ñí ^ ‚ñí‚ñíB‚ñí‚ñí‚ñíK”âSP @ ‚ñí (Y &lt;0‚ñí0‚ñí $ ‚ñí @ ‚ñí‚ñí‚ñí ‚ñí‚ñí‚ñí ÊÄòff‚ñí‚ñí`‚ñí‚ñí ‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñíx‚ñí‚ñíx‚ñí‚ñí‚ñí‚ñí‚ñíx ~ `‚ñí‚ñí ÊÄòx‚ñí‚ñíf‚ñí‚ñí‚ñí‚ñí‚ñíf‚ñí‚ñí`ff‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí Fx‚ñí‚ñí‚ñíf ~ f‚ñíf‚ñí‚ñí`fxf‚ñí‚ñí‚ñí‚ñí`fx‚ñí‚ñí ~ ‚ñíx‚ñíf‚ñí‚ñíf ~ f‚ñí`‚ñíf‚ñífx‚ñí ~ ‚ñíf‚ñíxf‚ñí ~ ‚ñí‚ñífx ‚ñí‚ñíx‚ñí‚ñí‚ñíxx‚ñí‚ñí‚ñí‚ñíxx‚ñí‚ñí‚ñí‚ñíx‚ñí‚ñí‚ñíxf‚ñí‚ñí`x‚ñí‚ñí‚ñí‚ñí‚ñí‚ñífxf‚ñíx‚ñí‚ñí`‚ñí‚ñí‚ñíf‚ñí‚ñíf‚ñí‚ñíf‚ñífxx‚ñí x‚ñí Êûò ‚ñíx‚ñíf‚ñí‚ñí </blockquote><p>  O resistor (voc√™ pode conectar qualquer um, na faixa de 470 Ohms a 1 kOhm) consertou tudo.  E <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">aqui</a> , por exemplo, o autor geralmente recomenda o uso do chip isolador de sinal digital <b>AduM1201</b> para conectar-se ao UART para desacoplamento.  Mas o resistor foi suficiente para mim, o que tamb√©m desejo para voc√™. </p><br><div class="spoiler">  <b class="spoiler_title">UART e AduM1201</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d5a/baf/390/d5abaf39038d0ddff09cd9d1323a7130.png" alt="imagem"></div></div><br><p>  Recebemos o sinal do roteador usando o programa do terminal no PC.  De alguma forma, n√£o obtive sucesso com o favorito de Putty e uso o excelente programa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Terminal</a> .  Selecione a porta COM virtual desejada (na qual nosso USB-UART fica), defina os par√¢metros: </p><br><blockquote>  Velocidade: 57600 <br>  Bits de dados: 8 <br>  Paridade: Nenhuma <br>  Bits de parada: 1 </blockquote><p>  E clique em Conectar.  Agora, quando a energia for fornecida ao roteador, veremos os logs do carregador no console: </p><br><div class="spoiler">  <b class="spoiler_title">O carregador de inicializa√ß√£o registra o A5-V11 como est√°</b> <div class="spoiler_text"><p>  U-Boot 1.1.3 (11 de abril de 2013 - 00:10:51) <br>  Placa: Ralink APSoC DRAM: 32 MB <br>  relocate_code Ponteiro em: 81fb4000 <br>  spi_wait_nsec: 42 <br>  ID do dispositivo spi: ef 40 18 0 0 (40180000) <br>  Aviso: ID de chip n√£o reconhecido, atualize o gerenciador de inicializa√ß√£o! <br>  raspi_read: from: 30000 len: 1000 <br>  . *** Aviso - CRC ruim, usando o ambiente padr√£o <br>  ============================================== <br>  Ralink UBoot Vers√£o: 3.6.0.0 </p><br><hr><br><p>  ASIC 5350_MP (Porta5 &lt;-&gt; Nenhuma) <br>  DRAM_CONF_FROM: Corre√ß√£o de inicializa√ß√£o <br>  DRAM_TYPE: SDRAM <br>  DRAM_SIZE: 256 Mbits <br>  DRAM_WIDTH: 16 bits <br>  DRAM_TOTAL_WIDTH: 16 bits <br>  TOTAL_MEMORY_SIZE: 32 MBytes <br>  Componente Flash: SPI Flash <br>  Data: 11 de abril de 2013 Hora: 00: 10: 51 <br>  ============================================== <br>  icache: sets: 256, ways: 4, linesz: 32, total: 32768 <br>  dcache: sets: 128, ways: 4, linesz: 32, total: 16384 </p><br><h5 id="the-cpu-freq--360-mhz">  A frequ√™ncia da CPU = 360 MHZ </h5><br><p>  estimar o tamanho da mem√≥ria = 32 Mbytes <br>  Por favor, escolha a opera√ß√£o: <br>  1: Carrega o c√≥digo do sistema na SDRAM via TFTP. <br>  2: Carregue o c√≥digo do sistema e grave no Flash via TFTP. <br>  3: Inicialize o c√≥digo do sistema via Flash (padr√£o). <br>  4: Interface de linha de comando de inicializa√ß√£o Entr. <br>  7: Carregue o c√≥digo do Boot Loader e grave no Flash via Serial. <br>  9: Carregue o c√≥digo do carregador de inicializa√ß√£o e grave no Flash via TFTP. <br>  4 3 2 1 <br>  Voc√™ escolheu 3 <br>  0 0 <br>  3: C√≥digo do sistema de inicializa√ß√£o do sistema via Flash. </p><br><h2 id="booting-image-at-bc050000-">  A inicializar imagem em bc050000 ... </h2><br><p>  raspi_read: from: 50,000 len: 40 <br>  .  Nome da imagem: MIPS OpenWrt Linux-3.7.5 <br>  Criado: 2013-04-11 14:41:22 UTC <br>  Tipo de imagem: Imagem do Kernel do MIPS Linux (lzma compactado) <br>  Tamanho dos dados: 915849 Bytes = 894,4 kB <br>  Endere√ßo de carga: 80000000 <br>  Ponto de Entrada: 80.000.000 <br>  raspi_read: from: 50040 len: df989 <br>  ... Verificando soma de verifica√ß√£o ... OK <br>  Descompactando a imagem do kernel ... OK <br>  Sem initrd </p><br><h2 id="transferring-control-to-linux-at-address-80000000-">  Transferindo controle para Linux (no endere√ßo 80000000) ... </h2><br><h2 id="giving-linux-memsize-in-mb-32">  Dando linux memsize em MB, 32 </h2><br><p>  Iniciando o kernel ... <br>  [0.000000] Linux vers√£o 3.7.5 (lich @ lich-pc) (vers√£o gcc 4.6.4 20121210 (pr√©-lan√ßamento) (Linaro GCC 4.6-2012.12)) # 2 qui 11 abr abr 22:41:02 CST 2013 <br>  [0.000000] console de inicializa√ß√£o [early0] ativado <br>  [0.000000] A revis√£o da CPU √©: 0001964c (MIPS 24KEc) <br>  [0.000000] Ralink RT5350 id: 1 rev: 3 rodando a 360,00 MHz <br>  [0.000000] Mapa f√≠sico determinado da RAM: <br>  [0.000000] mem√≥ria: 02000000 @ 00000000 (utiliz√°vel) <br>  [0.000000] Mapa de RAM f√≠sica definido pelo usu√°rio: <br>  [0.000000] mem√≥ria: 02000000 @ 00000000 (utiliz√°vel) <br>  [0.000000] Initrd n√£o encontrado ou vazio - desativando o initrd <br>  [0,000000] Faixas de zona: <br>  [0.000000] Normal [mem 0x00000000-0x01ffffff] <br>  [0.000000] In√≠cio da zona m√≥vel para cada n√≥ <br>  [0.000000] Intervalos de n√≥s de mem√≥ria anteriores <br>  [0.000000] n√≥ 0: [mem 0x00000000-0x01ffffff] <br>  [0.000000] Cache de instru√ß√µes principal 32kB, VIPT, de 4 vias, tamanho de linha 32 bytes. <br>  [0.000000] Cache de dados prim√°rio 16kB, 4 vias, VIPT, sem aliases, tamanho de linha 32 bytes <br>  [0.000000] Criou 1 zonelists na ordem da Zona, agrupamento de mobilidade.  Total de p√°ginas: 8128 <br>  [0.000000] Linha de comando do kernel: board = console MPR-A1 = ttyS1.57600 mtdparts = spi0.0: 192k (u-boot) ro, 64k (u-boot-env) ro, 64k (f√°brica) ro, 64k (f√°brica) ro, 896k (kernel ), 2880k (rootfs), 3776k @ 0x50000 (firmware) rootfstype = squashfs, jffs2 mem = 32M <br>  [0.000000] Entradas da tabela de hash PID: 128 (ordem: -3, 512 bytes) <br>  [0.000000] Entradas da tabela de hash do cache de dentry: 4096 (ordem: 2, 16384 bytes) <br>  [0.000000] Entradas da tabela de hash de cache de inode: 2048 (ordem: 1, 8192 bytes) <br>  [0.000000] __ex_table j√° classificado, ignorando a classifica√ß√£o <br>  [0.000000] Gravando o registro ErrCtl = 00023ff6 <br>  [0.000000] Registro ErrCtl Readback = 00023ff6 <br>  [0.000000] Mem√≥ria: 29632k / 32768k dispon√≠vel (c√≥digo do kernel 1969k, 3136k reservados, 473k dados, 180k init, 0k highmem) <br>  [0.000000] SLUB: Genslabs = 9, HWalign = 32, Order = 0-3, MinObjects = 0, CPUs = 1, N√≥s = 1 <br>  [0.000000] NR_IRQS: 48 <br>  [0.000000] console [ttyS1] ativado, console de inicializa√ß√£o desativado <br>  [0.000000] console [ttyS1] ativado, console de inicializa√ß√£o desativado <br>  [0.010000] Calibrando o loop de atraso ... 239,61 BogoMIPS (lpj = 1198080) <br>  [0,080000] pid_max: padr√£o: 32768 m√≠nimo: 301 <br>  [0.080000] Entradas da tabela de hash do cache de montagem: 512 <br>  [0.090000] NET: fam√≠lia de protocolos registrados 16 <br>  [0.100000] MIPS: a m√°quina √© HAME MPR-A1 <br>  [0,130000] bio: crie uma laje &lt;bio-0&gt; em 0 <br>  [0.140000] Mudando para fontes de rel√≥gio MIPS <br>  [0.150000] NET: fam√≠lia de protocolos registrados 2 <br>  [0.160000] Entradas da tabela de hash estabelecidas pelo TCP: 1024 (ordem: 1, 8192 bytes) <br>  [0.180000] Entradas da tabela de hash de liga√ß√£o TCP: 1024 (ordem: 0, 4096 bytes) <br>  [0.190000] TCP: tabelas de hash configuradas (liga√ß√£o 1024 estabelecida 1024) <br>  [0.200000] TCP: reno registrado <br>  [0.210000] Entradas da tabela de hash UDP: 256 (ordem: 0, 4096 bytes) <br>  [0.220000] Entradas da tabela de hash UDP-Lite: 256 (ordem: 0, 4096 bytes) <br>  [0.230000] NET: fam√≠lia de protocolos registrados 1 <br>  [0.280000] squashfs: vers√£o 4.0 (31/01/2009) Phillip Lougher <br>  [0.290000] jffs2: vers√£o 2.2 (NAND) (RESUMO) (LZMA) (RTIME) (CMODE_PRIORITY) ¬© 2001-2006 Red Hat, Inc. <br>  [0.320000] msgmni foi definido como 57 <br>  [0,320000] agendador io noop registrado <br>  [0,330000] prazo do agendador io registrado (padr√£o) <br>  [0.340000] Serial: driver 8250/16550, 2 portas, compartilhamento de IRQ desativado <br>  [0,360000] serial8250: ttyS0 no MMIO 0x10000500 (irq = 13) √© um 16550A <br>  [0,370000] serial8250: ttyS1 no MMIO 0x10000c00 (irq = 20) √© um 16550A <br>  [0.390000] ramips-spi ramips-spi.0: o mestre n√£o est√° na fila, est√° obsoleto <br>  [0.410000] m25p80 spi0.0: encontrado w25q128, esperado pm25lq032 <br>  [0.420000] m25p80 spi0.0: w25q128 (16384 Kbytes) <br>  [0,430000] parti√ß√µes de 6 cmdlinepart encontradas no dispositivo MTD spi0.0 <br>  [0.440000] Criando 6 parti√ß√µes MTD no "spi0.0": <br>  [0.450000] 0x000000000000-0x000000030000: "u-boot" <br>  [0.460000] 0x000000030000-0x000000040000: "u-boot-env" <br>  [0.480000] 0x000000040000-0x000000050000: "f√°brica" <br>  [0.490000] 0x000000050000-0x000000130000: "kernel" <br>  [0.500000] 0x000000130000-0x000000400000: "rootfs" <br>  [0.520000] mtd: parti√ß√£o "rootfs" definida como sistema de arquivos raiz <br>  [0.530000] mtd: parti√ß√£o "rootfs_data" criada automaticamente, ofs = 380000, len = 80000 <br>  [0.550000] 0x000000380000-0x000000400000: "rootfs_data" <br>  [0.560000] 0x000000050000-0x000000400000: "firmware" <br>  [0.580000] ramips-wdt ramips-wdt: o valor do tempo limite deve ser 0 &lt;timeout &lt;= 35, usando 35 <br>  [0.600000] TCP: c√∫bico registrado <br>  [0.610000] NET: fam√≠lia de protocolos registrados 17 <br>  [0.620000] 8021q: suporte a VLAN 802.1Q v1.8 <br>  [0.650000] VFS: raiz montada (sistema de arquivos squashfs) somente leitura no dispositivo 31: 4. <br>  [0.660000] Liberando mem√≥ria do kernel n√£o utilizada: 180k liberados <br>  [5.100000] input: gpio-keys-polled como / devices / platform / gpio-keys-polled / input / input0 <br>  [5.210000] Bot√£o Driver Hotplug vers√£o 0.4.1 </p><br><ul><li>  preinit - Pressione a tecla [f] e pressione [enter] para entrar no modo √† prova de falhas </li></ul></div></div><br><p>  Ao ler e examinar os logs, √© importante n√£o perder o momento e quando haver√° uma linha assim: </p><br><blockquote>  Por favor, escolha a opera√ß√£o: <br>  1: Carrega o c√≥digo do sistema na SDRAM via TFTP. <br>  <b>2: Carregue o c√≥digo do sistema e grave no Flash via TFTP.</b> <br>  3: Inicialize o c√≥digo do sistema via Flash (padr√£o). <br>  4: Interface de linha de comando de inicializa√ß√£o Entr. <br>  7: Carregue o c√≥digo do Boot Loader e grave no Flash via Serial. <br>  9: Carregue o c√≥digo do carregador de inicializa√ß√£o e grave no Flash via TFTP. </blockquote><p>  Voc√™ precisa ter tempo para pressionar rapidamente o n√∫mero "2".  Ent√£o veremos o seguinte: </p><br><blockquote>  Voc√™ escolheu 2 <br>  2: System Load Linux Kernel, em seguida, grave no Flash via TFTP. <br>  Aten√ß√£o !!!  Apague o Linux no Flash e grave um novo.  Voc√™ tem certeza? (S / N) <br>  Insira novos / ou Ctrl-C para descartar <br>  IP do dispositivo de entrada (10.10.10.123) ==: 10.10.10.123 <br>  IP do servidor de entrada (10.10.10.3) ==: 10.10.10.3 <br>  Nome do arquivo do kernel do Linux de entrada () ==: openwrt-ramips-rt305x-a5-v11-squashfs-sysupgrade.bin </blockquote><p>  Pressione "Y" sequencialmente, digite, digite "openwrt-ramips-rt305x-a5-v11-squashfs-sysupgrade.bin".  Neste √∫ltimo caso, ser√° necess√°rio registrar manualmente o nome do nosso firmware, que precisar√° ser carregado no servidor tftp lan√ßado anteriormente.  Eu usei o programa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">TFTPD64</a> para esse fim.  Ap√≥s ativar o download do firmware do console, voc√™ precisa conectar o A5-V11 a um computador cujo endere√ßo IP corresponda ao especificado no console.  A prop√≥sito, para conectar diretamente (ala "usb flash drive"), eu mesmo fiz os adaptadores RJ45-RJ45.  Eles s√£o muito convenientes de usar com um roteador. </p><br><img src="https://habrastorage.org/webt/f0/w_/po/f0w_pobzhotseudg1x6xlvni1cm.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Adaptadores RJ45-RJ45 e seu circuito</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/0k/t6/uo/0kt6uox6egepzraoly-dheq5tgk.jpeg"></div></div><br><p>  O roteador ser√° costurado e, ap√≥s a reinicializa√ß√£o, estar√° pronto para realizar novas miss√µes de combate.  A prop√≥sito, se n√£o foi poss√≠vel atualizar com o console, retornamos √† parte "program" do artigo e <i>atualizamos o firmware openwrt-ramips-rt305x-a5-v11-squashfs-sysupgrade.bin</i> atrav√©s do bom e velho AsProgrammer, mas n√£o do endere√ßo 0, mas do <b>327680</b> ( !). </p><br><p>  Al√©m disso: voc√™ n√£o pode mexer na busca de bytes e modificar o firmware nativo, mas preencha o programador com um microchip chin√™s Breed de um amigo Hackpascal no novo chip. Para o nosso V5, a √∫ltima op√ß√£o encontrada √© <a href="" rel="nofollow">breed-rt5350-hame-a5-r1163.bin</a> .  E j√° deste melhor (IMHO) at√© √† data, o carregador de inicializa√ß√£o para piscar tudo o que voc√™ precisa.  Ainda existem todos os tipos de itens dignos de um artigo separado, MAS, mas caramba, o firmware n√£o tem absolutamente nenhuma localiza√ß√£o, apenas em chin√™s.  Parece que os termos t√©cnicos s√£o claros ... Mas o "sedimento permaneceu".  Os chineses, em princ√≠pio, n√£o fazem contato :( </p><br><h2>  <b>Parte Cinco, Informa√ß√µes ("Nota")</b> </h2><br><p>  No final da hist√≥ria, gostaria de dizer algumas palavras sobre os dispositivos que tornam o uso do nosso A5-V11 mais confort√°vel. <br>  Primeiro de tudo, este √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">adaptador em</a> forma de U para uma porta USB.  Um dispositivo indispens√°vel, ao compartilhar um roteador com uma unidade flash USB / leitor de cart√£o / modem 3G-4g / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">sintonizador SDR</a> finalmente :) </p><br><img src="https://habrastorage.org/webt/bg/ap/5l/bgap5lzqe9lrpemvh0idnmjxvfk.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Portanto, os adaptadores parecem ativos</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/vv/f2/m2/vvf2m2qxfwjs8l9bt80r33am0su.jpeg"><br><img src="https://habrastorage.org/webt/ic/kh/ew/ickhewb9t5zk5hitjvwsm2pyha0.jpeg"><br><img src="https://habrastorage.org/webt/fl/s_/dn/fls_dnlec6lr9jvzox7zhvo75nc.jpeg"></div></div><br><p>  O segundo "marco" importante ao trabalhar com o mini-roteador descrito √© um hub USB.  Sim, com um layout muito complicado de portas USB.  O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">layout</a> vertical <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">deste hub passivo</a> est√° impulsionando a compra do " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">fungo</a> " Bluetooth em alguns <b>CSR8510</b> .  Desde a inf√¢ncia, gosto do conceito de PCs industriais da Octagon - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">MicroPC</a> - e seus ‚Äú <a href="" rel="nofollow">sandu√≠ches</a> ‚Äù verticais para PC / 104.  Com o hub mencionado, h√° uma oportunidade de fazer algo semelhante (a prop√≥sito, se um dos leitores encontrar algo semelhante interessante nas extens√µes dos leil√µes on-line - compartilhe nos coment√°rios). </p><br><img src="https://habrastorage.org/webt/rs/ae/hb/rsaehbkntj8po2vaekbtbck1s3i.jpeg"><br><p>  Chip Genesys Logic Inc. GL8506 a bordo </p><br><img src="https://habrastorage.org/webt/ur/vv/ih/urvvihyci_7_ijtg72uh2d5ouxi.jpeg"><br><p>  Em princ√≠pio, em vez de uma porta USB vertical, √© bem poss√≠vel colocar o pequeno chaveiro USB-Bluetooth descrito acima ou um <a href="" rel="nofollow">leitor de cart√£o microSD miniatura</a> . </p><br><img src="https://habrastorage.org/webt/ls/z0/zn/lsz0znl2rw0uduejkp2o5gxduw8.jpeg"><br><p>  E parece um "sandu√≠che microrrouter" pronto :) </p><br><img src="https://habrastorage.org/webt/j2/wa/8i/j2wa8icidwqctodv-1w9583ugfk.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Mais sandu√≠ches de micro-habr</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zs/ym/x0/zsymx0wxkbikcbpni875i18rlhq.jpeg"><br><img src="https://habrastorage.org/webt/cf/bo/gw/cfbogwlqtzkcyfvdp_vz1grduvs.jpeg"><br><img src="https://habrastorage.org/webt/kd/vr/fr/kdvrfrwe3g40asb4rnsnsjsuhzc.jpeg"><br><img src="https://habrastorage.org/webt/4w/s1/2m/4ws12mhhgwlzecini07eq2qkmdy.jpeg"><br><img src="https://habrastorage.org/webt/v8/2b/ld/v82blds9z3lvqocypuoxp53yiwa.jpeg"><br><img src="https://habrastorage.org/webt/9e/am/rx/9eamrxfi3uexeuwp_qmwc1mwhyu.jpeg"></div></div><br><p>  E, finalmente, o mais delicioso.  Existe um escrit√≥rio <b>na</b> Nova Zel√¢ndia <b>CloudStore no mundo</b> que √© conhecido por seus produtos com a marca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Airconsole</a> .  Esses dispositivos s√£o bons, entre outras coisas, e o fato de serem os √∫nicos absolutamente legalmente e por um pre√ßo razo√°vel a conectar todos os tipos de registradores RS232 ao iOS.    ,         ,   RS232.       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . <br>         :) </p><br><blockquote>        COM/USB ,           Moxa*, Perle*  Opengear*? AirConsole            ,       . </blockquote><p>  ,  .    .   " 10 " :) </p><br><div class="spoiler"> <b class="spoiler_title"> Airconsole Mini (69$)  Hame A15 (6.9$)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/_e/pu/8h/_epu8hgth9ljk2cxyasyeacupsg.png"><br><img src="https://img.tttcdn.com/product/xy/2000/2000/p/gu1/C/C1653B/C1653B-2-2ca5.jpg" alt="imagem"></div></div><br><div class="spoiler"> <b class="spoiler_title"> Airconsole Standart (79$)  Hame MPR-A1 (7.9$)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ov/7s/7q/ov7s7qphmxr9hoqlfjcd89ofmka.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/d5a/e07/9af/d5ae079af5f964aae4761175678f615c.jpg" alt="imagem"></div></div><br><div class="spoiler"> <b class="spoiler_title"> Airconsole XL (139$)  Hame MPR-A3 (13.9$)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/tn/zt/ct/tnztctmox0g_ninvh8fnmvklwdg.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/f71/488/a87/f71488a8733c9dc21cab501d272c16a5.jpg" alt="imagem"></div></div><br><p>   ,            ,    .      :)    .     " <i>  .       .       ,       .   .   </i> ". </p><br><p>       "  A5-V11    Airconsole".  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"></a>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://go.mysku.ru/%3Fr%3D" rel="nofollow"></a>    Ham  6$  Airconsole  69$.  ,  Zyxel Keenetic 4G II   . </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A prop√≥sito, se de repente, entre os leitores, houver propriet√°rios do AirConsol original que j√° os abriram, terei prazer em aceitar pain√©is de fotos como presente e concluir o artigo :) </font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bem, em princ√≠pio, tudo o que eu queria dizer. </font><font style="vertical-align: inherit;">Muito do que est√° escrito aqui √© aplic√°vel a outro hardware (compacto) e espero que seja √∫til para o "amplo p√∫blico leitor" :)</font></font></p><br><p></p><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/s3/5l/vm/s35lvmfuuc9jd67i9gvfk5s67n0.jpeg"></a> </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ps Para os propriet√°rios do NEXX WT3020F, TP-Link TL-MR3020, TP-Link TL-WR703N (ou seja, todos os roteadores com uma caixa bastante espa√ßosa) mencionados no in√≠cio do artigo, um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hub de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baixo custo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">no chip HS8836</font></a><font style="vertical-align: inherit;"> mostrado abaixo </font><font style="vertical-align: inherit;">pode ser uma op√ß√£o muito conveniente para incorporar </font><font style="vertical-align: inherit;">:</font></font><p></p><br><img src="https://habrastorage.org/webt/lo/lu/gx/lolugxzv2bc1rsiwmf5zqlmywfw.jpeg"><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por precau√ß√£o, o circuito encontrado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui √©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mostrado sob o spoiler.</font></font></p><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagrama esquem√°tico de um hub chin√™s de 3 portas no HS8836</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/p1/2k/vc/p12kvcaidomhqn1ebmdpkqmgozq.png"></div></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A principal vantagem, na minha opini√£o, al√©m do tamanho miniatura e do m√≠nimo de pe√ßas, √© a montagem da placa com o controlador e as portas USB via fios. </font><font style="vertical-align: inherit;">Para incorporar no roteador - um m√≠nimo de movimentos do corpo, embora voc√™ ainda possa instalar uma placa de radiador de alum√≠nio no chip.</font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ri/is/cg/riiscgsvp47h89tva4u-zsyc-aq.jpeg"></div><br><p> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atualiza√ß√£o a partir de 2019</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : temos as m√£os no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Walti Cooling</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Detalhes sob o spoiler</font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ap/0z/xz/ap0zxzmjdld3vt7c5k9j0xmwtww.jpeg"></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placa de refrigera√ß√£o externa</font></font></b> <div class="spoiler_text"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Primeiro, encontrei e cortei uma placa de alum√≠nio adequada com uma espessura de 1 mm </font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hj/x4/ob/hjx4obx6spy6wcwbggecbg_vipo.jpeg"></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Furei os furos para os parafusos M1 e cortei a rosca na placa (estava esperando especialmente a torneira no M1) </font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cq/v4/dc/cqv4dcflobaax_7mb0lptzdtune.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/z1/nq/kc/z1nqkcsteyk6fxkhth4gmjsoxfw.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cq/tz/j9/cqtzj9ko1ei5ibzyh-ljkg_qws0.jpeg"></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentou apertar ainda mais as porcas M1. </font><font style="vertical-align: inherit;">Segurando no meu bolso, n√£o gostei, ent√£o recusei essa ideia e simplesmente afiei as pontas salientes dos parafusos.</font></font></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k8/on/zw/k8onzwkf21gc-aqcyfa8kumk6_a.jpeg"></div><br><p>      (  )     1,5    . </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0w/dr/av/0wdravnl7ywqj7grbomcgc1lqdy.jpeg"></div><br><p>       ‚Äî      </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gs/nv/bc/gsnvbcfktsoobwumeeqyztrftpo.jpeg"></div><br><p>        (  -  )   . </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4-/cr/pg/4-crpg09gmggmcswvsudmnugy1g.jpeg"></div><br><p>    ‚Äî  :). </p></div></div><br><p> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adi√ß√£o de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artem_kramov em</font></font></a></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rela√ß√£o a wifi quebrado ao substituir o flash. </font><font style="vertical-align: inherit;">Moral - mantenha um despejo completo e transfira a se√ß√£o de configura√ß√£o com as configura√ß√µes do m√≥dulo wifi</font></font></p><br><div class="spoiler">  <b class="spoiler_title">Mais detalhes</b> <div class="spoiler_text"><blockquote> <strong></strong> :   -  Wi-Fi     .  4  ,  ,   8   Wi-Fi ( ).  ,    ,    . <br> <strong></strong> :  ,       Config (    ),        Wi-Fi.       Breed,    .  ,  Ethernet,   Config    Wi-Fi  .        -  ,     ,   -        . </blockquote></div></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Localiza√ß√£o GPIO no roteador (retirada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">daqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></p><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A5-V11 GPIO (foto clic√°vel)</font></font></b> <div class="spoiler_text"><blockquote> Fia√ß√£o GPIO no A5-V11 <br><br>  Um exemplo: <br>  22- - gpio 22 est√° vinculado a Gnd <br>  25+ - gpio 25 est√° ligado a + 3.3V <br><br>  sda, scl √© melhor usar nos 21 e 26 (substitua os resistores por Gnd, coloque 10kŒ©).  Somente nesses dispositivos, com o LCD 1602, 2004 conectado e a fonte de alimenta√ß√£o, o roteador inicia normalmente; em outros gpios, √© necess√°rio conectar a alimenta√ß√£o do m√≥dulo um pouco mais tarde, caso contr√°rio, o roteador n√£o inicia. <br><br>  Em 25 (w1), use o sensor ds1820, porque  ele j√° est√° vinculado a + 3.3V a 4.7kOhm. <br><br>  Gpio 21 primeiro calculou que estava saindo para o pist√£o, soldado ao pist√£o (nano), mas depois descobriu-se que ele estava sentado no ch√£o por um ohm de 1k por algum motivo.  Ent√£o ele foi para esse t√≥pico e o substituiu pelo gpio 26 por 10kOhm. </blockquote><p></p><div style="text-align:center;"> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/zm/wr/jl/zmwrjlxicxzohywv_5vjrnvhgyo.jpeg"></a> </div><br><div style="text-align:center;"> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/jq/rl/hm/jqrlhmcjevpxpkvvcs4crfsfqgi.jpeg"></a> </div><p></p></div></div><br><hr><br><div class="spoiler">  <b class="spoiler_title">Fontes utilizadas</b> <div class="spoiler_text"><ul><li>  http://skproj.ru/hame-mpr-a1-proshivka-openwrt-i-apgrejd-fleshki-na-16-ili-8-megabajt/?doing_wp_cron=1472313516.0620179176330566406250 </li><li>  http://w3bsit3-dns.com/forum/index.php?showtopic=884713&amp; </li><li>  https://github.com/nofeletru/UsbAsp-flash/releases/ </li><li>  http://forum.easyelectronics.ru/viewtopic.php?f=17&amp;t=10947 </li><li>  http://my-embedded.blogspot.com/2013/12/mini-4g-router-rt5350f.html </li><li>  http://eko.one.pl/?p=openwrt-gpio2 </li><li>  https://habr.com/post/238713/ </li><li>  https://nm-projects.de/2017/09/analysis-of-mini-3g4g-wifi-wireless-router-a5-v11/ </li><li>  https://tuxotronic.org/wiki/tools/flashrom/ </li><li>  http://srr.cherkessk.ru/owrt/help-owrt.html </li><li>  https://tuxotronic.org/wiki/openwrt/rt5350/build-firmware/ </li><li>  https://mysku.ru/blog/aliexpress/27796.html </li><li>  https://habr.com/post/247513/ </li></ul></div></div><br><p>  <u>Importante!</u>  Todas as atualiza√ß√µes e notas provis√≥rias a partir das quais os artigos de habr s√£o formados sem problemas podem agora ser vistas no meu <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">laborat√≥rio de</a></b> canais de telegrama66.  Assine para n√£o esperar o pr√≥ximo artigo, mas para saber imediatamente sobre toda a pesquisa :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425281/">https://habr.com/ru/post/pt425281/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425269/index.html">Hackathon GAZ - como tocar o gigante dos autom√≥veis</a></li>
<li><a href="../pt425271/index.html">WPA3 poderia ser mais seguro: opini√£o de especialistas</a></li>
<li><a href="../pt425273/index.html">Outra maneira de usar o docker-compose</a></li>
<li><a href="../pt425275/index.html">12 dicas para dimensionar o Node.js</a></li>
<li><a href="../pt425279/index.html">Como entrevistar o Google: o que ser, o que n√£o passar</a></li>
<li><a href="../pt425283/index.html">Localiza√ß√£o infinita ou como traduzimos um mapa em tempo real</a></li>
<li><a href="../pt425285/index.html">Se voc√™ n√£o contrata o Jones, n√£o merece os senhores</a></li>
<li><a href="../pt425287/index.html">Casas FIAS no PostgreSQL</a></li>
<li><a href="../pt425289/index.html">Foco corporativo</a></li>
<li><a href="../pt425291/index.html">Os resultados do est√°gio de ver√£o de 2018: varreram quinhentos pita shawarma. E sobreviveu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>