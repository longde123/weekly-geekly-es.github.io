<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☑️ 👩🏽 📟 1C开发人员故事：admin 👍🏻 🕺🏽 🤝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="所有1C开发人员都以一种或另一种方式与IT服务以及直接与系统管理员紧密交互。 但这种互动并非总是顺利进行。 我想告诉你一些有趣的故事。 

 高速通讯通道 
 我们的大多数客户都拥有庞大的IT部门。 通常，客户的专家负责备份信息数据库。 但是有相对较小的组织。 特别是对他们来说，我们有一项服务，据我...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>1C开发人员故事：admin</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449946/"> 所有1C开发人员都以一种或另一种方式与IT服务以及直接与系统管理员紧密交互。 但这种互动并非总是顺利进行。 我想告诉你一些有趣的故事。 <br><a name="habracut"></a><br><h2> 高速通讯通道 </h2><br> 我们的大多数客户都拥有庞大的IT部门。 通常，客户的专家负责备份信息数据库。 但是有相对较小的组织。 特别是对他们来说，我们有一项服务，据我们处理与备份所有1C有关的所有问题。 关于这个公司的故事将在这个故事中讨论。 <br><br> 一个新客户支持1C，此外，合同中有一个条款规定我们负责备份，尽管他们有自己的系统管理员。 客户端服务器数据库，如DBMS-MS SQL。 这是一个相当标准的情况，但仍然有一个警告：主要基础很大，但同时每月的增长很小。 也就是说，数据库包含许多历史数据。 鉴于这种特殊性，我制定了如下的备份维护计划：在每个月的第一个星期六进行一次完整备份，这非常重要，然后每晚进行差异备份-数量相对较少，每小时复制一次事务日志。 此外，完整副本和差异副本，不仅将它们复制到网络资源，还另外上传到我们的FTP服务器。 这是提供此服务的强制性要求。 <br><br> 所有这些均已成功配置，投入运行并总体上正常运行。 <br><br> 但是几个月后，系统管理员在此组织中进行了更改。 新的系统管理员开始根据现代趋势逐步重建公司的IT基础架构。 特别是出现了虚拟化，磁盘架，访问无处不在等所有情况，在通常情况下，这当然会让他们高兴。 但是它并不总是和他一起顺利进行，1C的性能经常出现问题，这在我们的支持下引起了一些分歧和误解。 另外，应该指出的是，我们与他的关系总体上发展得很冷淡，有些紧张，只有在出现任何问题的情况下，这种紧张程度才会增加。 <br><br> 但是一天早晨，事实证明该客户端的服务器不可用。 我打电话给系统管理员，以查明发生了什么，并收到类似“我们的服务器已崩溃，我们正在处理它，这取决于您”。 好吧，那行得通。 因此情况得到了控制。 午餐后，我以管理员的声音再次打来电话，我已经感到疲倦和冷漠，而不是发怒。 试图澄清发生了什么，我们可以以某种方式提供帮助吗？ 对话显示以下内容： <br><br> 他将服务器迁移到新的存储系统，并进行了一次突袭。 但是出了点问题，几天后，这次突击行动就崩溃了。 控制器烧坏了，或者磁盘发生了什么，我都不记得了，但是所有信息都无法挽回地丢失了。 最主要的是，在任何迁移过程中，带有备份的网络资源也位于同一磁盘阵列上。 也就是说，生产基础本身及其所有备份都丢失了。 现在该怎么办还不清楚。 <br><br> 我说，冷静。 我们有您的夜间备份。 答案是沉默，据我了解，我只是救了一个人的性命。 我们开始讨论如何将此副本转移到刚刚部署的新服务器上。 但是这里出现了一个问题。 <br><br> 还记得我说的完整备份很大吗？ 我每月有一次这样做是有原因的。 事实是，该公司是一家小型工厂，位于远离城市的地方，他们所拥有的互联网非常方便。 到星期一早上，也就是周末，这个悲伤的副本已经有时间上传到我们的FTP服务器。 但是没有办法等待一两天，直到它加载到相反的方向。 经过几次失败的拖动尝试，管理员从新服务器上卸下了直接硬盘驱动器，发现一辆有驾驶员的汽车，并迅速赶往我们的办公室，因为我们仍在同一城市。 <br><br> 当我们站在服务器机房等待复制文件时，我们第一次见面，可以说是“现场”，喝了一杯咖啡，在非正式的环境中交谈。 我对他的悲伤表示同情，并以一整盘备用螺丝将其寄回，以便尽快恢复公司已停止的工作。 <br><br> 随后，我们对IT部门的所有应用程序都得到了快速解决，没有更多分歧。 <br><br><h2> 与系统管理员联系 </h2><br> 一次，只有一个客户端，很长一段时间我都无法发布1C来通过IIS进行Web访问。 这似乎是一项普通的任务，但在这里并没有妨碍。 连接了本地系统管理员，尝试了不同的设置和配置文件。 网路上的1C通常并不想运作。 域安全策略，本地复杂防火墙或其他问题出了点问题。 在第N次迭代中，管理员使用以下单词删除了指向我的链接： <br><br>  -按照此说明重试。 那里的一切都很详细。 如果仍无法解决，请写信给该网站的作者，也许他会帮忙。 <br> 我说：“不，这无济于事。” <br>  -为什么？ <br>  -我是这个网站的作者...（ <br><br> 结果，他们毫无问题地启动了Apache。  IIS无法获胜。 <br><br><h2> 更深 </h2><br> 我们有一个客户-一家小型制造企业。 他们有一个服务器，例如1：终端服务器+应用程序服务器+数据库服务器，这是一种特殊的“经典” 3。 他们在一些基于软启动器的行业配置中工作，系统中大约有15-20个用户，并且系统性能原则上适合所有人。 <br><br> 时间流逝，一切工作或多或少稳定。 但是欧洲对俄罗斯实施了制裁，结果俄国人开始主要购买国内产品，这家公司的情况变得艰难。 用户数量已增加到50-60人，开设了新的分支机构，工作流程也是如此。 现在，当前的服务器已停止应对急剧增加的负载，并且正如他们所说的，“ 1C开始”“慢下来”。 在高峰时间，文档被保留了几分钟，阻塞的错误逐渐消失，表格打开了很长时间，以及其他所有相关服务。 本地系统管理员排除了所有问题，说：“这是您的1C，必须弄清楚。” 我们曾一再建议对系统进行性能审核，但这并未达到审核的目的。 客户只是询问有关故障排除的建议。 <br><br> 好吧，我坐下来写了一封相当大的信，说有必要将终端服务器和应用程序服务器的角色与DBMS分开（原则上，我们之前已经重复过这句话）。 我写了关于终端服务器上的DFSS，关于共享内存，扔到权威资源的链接，甚至提供了一些硬件选项的文章。 这封信达到了公司的权力，并以“执行”解决方案返回给IT部门，大体上破冰了。 <br><br> 一段时间后，管理员向我发送了新服务器的IP地址和登录凭据。 他说，MS SQL和1C服务器的组件已部署在此处，您需要传输数据库，但到目前为止，仅传输到DBMS服务器，因为1C密钥存在一些问题。 <br><br> 确实，所有服务都进来了，服务器不是很强大，好吧，我认为总比没有好。 到目前为止，我将转移数据库，至少以某种方式减轻当前服务器的负担。 在协商的时间内，他执行了所有传输，但情况没有改变-所有相同的性能问题。 当然，很奇怪，让我们在1C集群中注册碱基，我们将看到。 <br><br> 需要几天的时间，密钥尚未转移。 我对问题所在很感兴趣，那里的一切似乎都很简单-我从一台服务器上将其删除，将其固定在另一台服务器上，安装了驱动程序，并准备就绪。 管理员做出回应，并说了一些有关端口转发，虚拟服务器等的内容。 <br><br> 嗯...虚拟服务器？ 似乎从来没有任何虚拟化，而实际上没有。……我记得一个众所周知的问题，即无法将1C服务器密钥转发到Windows Server 2008中Hyper-V上的虚拟机。这里开始引起一些怀疑…… <br><br> 我打开服务器管理器-角色-出现了一个新角色-Hyper-V。 我去了Hyper-V管理器，看到一个虚拟机，我正在连接...真的...我们的新数据库服务器... <br><br> 恩，什么？ 当局的指示和我的建议已得到执行，角色被分开。 任务可以关闭。 <br><br> 一段时间后，危机就发生了，新分支必须关闭，负载减少，系统性能或多或少可以容忍。 <br><br> 好吧，当然，他们不能将服务器密钥转发到虚拟机。 结果，一切都保持原样：物理服务器上的终端服务器+ 1C群集，虚拟服务器中同一位置的数据库服务器。 <br><br> 好的，这会是某种Sharashkin办公室吗？ 不会吧 一家知名公司，其产品可能在各种色带和Auchanov的相应部门中都知道并见过。 <br><br><h2> 硬盘假期时间表 </h2><br> 一家雄心勃勃的大公司计划<s>接管世界</s> ，再次收购了一家小公司，目的是将其合并为大型公司。 在此馆藏的所有部门中，用户都在其数据库中工作，但配置相同。 因此，我们开始了一个小项目，在该系统中包括一个新单元。 <br><br> 首先，有必要部署战斗和测试基地。 开发人员收到用于连接的数据，登录到服务器，看到已安装的MS SQL，1C服务器，看到2个逻辑驱动器：250 GB C驱动器和1TB D驱动器。 好吧，“ C”是一个系统，“ D”是数据，开发人员在逻辑上决定并部署那里的所有数据库。 我什至制定了维护计划，包括备份，以防万一（尽管我们对此不负责）。 真正的备份在“ D”上成型。 将来，计划在一些单独的网络资源上进行重新配置。 <br><br> 该项目启动了，顾问们进行了有关如何在新系统中工作的培训，转移了剩余的食品，进行了一些小改进，并且用户已经在新的信息库中开始工作。 <br><br> 一切进展顺利，直到星期一的一个早晨发现数据库驱动器已消失。 服务器上根本没有“ D”，仅此而已。 <br><br> 进一步的调查表明：实际上，该“服务器”是本地系统管理员的工作计算机。 没错，服务器操作系统仍在上面。 该管理员的个人USB磁盘已插入服务器。 管理员带着他自己的螺丝去度假，目的是在旅途中泵送胶片。 <br><br> 感谢上帝，他没有设法删除数据库文件，也没有设法恢复工作数据库。 <br><br> 值得注意的是，总体上，每个人都对位于USB驱动器上的系统的性能感到满意。 没有人抱怨1C的任何不令人满意的工作。 后来，大型项目开始了，将所有信息数据库转移到具有超级服务器，存储超过一百万卢布的存储，复杂的虚拟化管理程序以及所有分支机构难以忍受的1C制动器的单个集中式平台。 <br><br> 但这是一个完全不同的故事... <br><br><h2>  PS另请参见： </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">1C开发人员故事：Epicafe</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN449946/">https://habr.com/ru/post/zh-CN449946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN449936/index.html">为什么在跨国团队中很难工作？</a></li>
<li><a href="../zh-CN449938/index.html">开发人员与业务</a></li>
<li><a href="../zh-CN449940/index.html">如何将16 GB的内存压缩到不支持此数量的主板上</a></li>
<li><a href="../zh-CN449942/index.html">我们如何测试从传统知识到后期制作的功能，并保持团队内部的友好关系</a></li>
<li><a href="../zh-CN449944/index.html">Docker：错误提示</a></li>
<li><a href="../zh-CN449948/index.html">JavaScript：7个有用的小东西</a></li>
<li><a href="../zh-CN449952/index.html">在gitlab.com上配置连续投放</a></li>
<li><a href="../zh-CN449954/index.html">在CentOS 7上安装Zimbra开源版</a></li>
<li><a href="../zh-CN449956/index.html">AI @ MIPT：人类基因组数学模型的大数据</a></li>
<li><a href="../zh-CN449960/index.html">为UDB开发时的灵感来源</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>