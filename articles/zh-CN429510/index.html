<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš© ğŸ‘¨ğŸ»â€ğŸ¨ ğŸš é€‚ç”¨äºåˆå­¦è€…çš„ArduPilotã€‚ åœ¨BeagleBone Blueä¸Šå®‰è£…å’Œé…ç½® ğŸš ğŸ“Ÿ ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘ä»¬ä¸æ¥è‡ªå“ˆå‹ƒï¼ˆHabrï¼‰å¿—è¶£ç›¸æŠ•çš„å›¢é˜Ÿï¼ˆ æ‚¨å¯ä»¥åŠ å…¥ ï¼‰ä¸€èµ·å¼€å‘äº†ä¸€ç§æœºå™¨äººï¼Œç”¨äºåœ¨ç»ƒä¹ åœºä¸Šæ”¶é›†é«˜å°”å¤«çƒ ã€‚ è¿™æ˜¯ä¸€ä¸ªé«˜åº¦ä¸“ä¸šåŒ–çš„æœåŠ¡æœºå™¨äººï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è®¡åˆ’åŒæ—¶å¼€å‘ä¸€ä¸ªè½¯ä»¶å’Œç¡¬ä»¶å¤åˆä½“ï¼Œä»¥åå¯å°†å…¶ç”¨ä½œå…¶ä»–æœåŠ¡æœºå™¨äººå’ŒUGVçš„åŸºç¡€ã€‚ 



 åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœæ­¢ä½¿ç”¨è¯¥è½¯ä»¶ã€‚ åœ¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é€‚ç”¨äºåˆå­¦è€…çš„ArduPilotã€‚ åœ¨BeagleBone Blueä¸Šå®‰è£…å’Œé…ç½®</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/robogazon/blog/429510/">æˆ‘ä»¬ä¸æ¥è‡ªå“ˆå‹ƒï¼ˆHabrï¼‰å¿—è¶£ç›¸æŠ•çš„å›¢é˜Ÿï¼ˆ <b>æ‚¨å¯ä»¥åŠ å…¥</b> ï¼‰ä¸€èµ·å¼€å‘äº†ä¸€ç§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœºå™¨äººï¼Œç”¨äº</a>åœ¨ç»ƒä¹ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœºä¸Šæ”¶é›†é«˜å°”å¤«çƒ</a> ã€‚ è¿™æ˜¯ä¸€ä¸ªé«˜åº¦ä¸“ä¸šåŒ–çš„æœåŠ¡æœºå™¨äººï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è®¡åˆ’åŒæ—¶å¼€å‘ä¸€ä¸ªè½¯ä»¶å’Œç¡¬ä»¶å¤åˆä½“ï¼Œä»¥åå¯å°†å…¶ç”¨ä½œå…¶ä»–æœåŠ¡æœºå™¨äººå’Œ<b>UGV</b>çš„åŸºç¡€ã€‚ <br><br><img src="https://habrastorage.org/webt/3x/wy/of/3xwyof39bhwkwbvvqoyjqmxdmay.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œ</a>æˆ‘ä»¬æè¿°äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœæ­¢ä½¿ç”¨è¯¥è½¯ä»¶ã€‚ åœ¨è®¾ç½®é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†æ–‡ç« ä¸­</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¿¡æ¯</a> ã€‚ å®é™…ä¸Šï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æä¾›æ­¤ç®€è¦æŒ‡å—çš„ç¿»è¯‘ï¼Œä¹Ÿè®¸å¯¹æŸäººæœ‰ç”¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨åˆ¶é€ ç¬¬ä¸€ä¸ªæˆ–ä¸‹ä¸€ä¸ªæœºå™¨äººã€‚ <br><a name="habracut"></a><br> åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘æƒ³å¼ºè°ƒä¸€ç‚¹ï¼Œå€¼å¾—ä½¿ç”¨BeagleBone Blueï¼ˆå®ƒä»ç„¶æ˜¯è“è‰²ï¼‰ã€‚ é€šå¸¸ï¼Œæˆ‘ä»¬å°†è¿æ¥å¾ˆå¤šä¸å¯¼èˆªç›¸å…³çš„å¤–å›´è®¾å¤‡ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„åŠŸèƒ½ï¼Œå®ƒä»¬å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚ <br><br><h2> ç¬¬1éƒ¨åˆ†ã€‚å‡†å¤‡BeagleBone </h2><br> è½¬åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://rcn-ee.net/rootfs/bb.org/testing/</a>å¹¶é€‰æ‹©å…·æœ‰æœ€æ–°æ—¥æœŸçš„ç›®å½•ã€‚ ç„¶åæ‰“å¼€<b>stretch-console</b>å­ç›®å½•ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å°†çœ‹åˆ°å‡ ä¸ªæ–‡ä»¶ã€‚ ä¸‹è½½åä¸º<b>â€œ bone-debian-VV-console-armhf-20YY-MM-DD-1gb.img.xzâ€çš„æ–‡ä»¶</b> ã€‚ è¿™æ˜¯ä»…åŒ…å«å¿…éœ€å“çš„æœ€å°Debianå‘è¡Œç‰ˆã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯IoTæ˜ åƒï¼ˆIoT =ç‰©è”ç½‘ï¼‰ï¼Œå®ƒé™„å¸¦æœ‰å…¶ä»–è½¯ä»¶ï¼Œå¦‚æœæ‚¨ä¸ç†Ÿæ‚‰Linuxï¼Œå¯ä»¥ä½¿å·¥ä½œæ›´èˆ’é€‚ã€‚ å¯ä»åŒä¸€ç«™ç‚¹è·å¾—ã€‚ <br><br> æˆ‘ä»¬ä½¿ç”¨ï¼š <a href="">https</a> : <a href="">//rcn-ee.net/rootfs/bb.org/testing/2018-10-07/stretch-console/bone-debian-9.5-console-armhf-2018-10-07-1gb.img .xz</a> ã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œæ‚¨å°†éœ€è¦åœ¨microSDå¡ä¸Šåˆ·æ–°å›¾åƒã€‚ æ— è®ºæ‚¨ä½¿ç”¨Linuxè¿˜æ˜¯Windowsï¼Œæˆ‘éƒ½å¼ºçƒˆå»ºè®®æ‚¨ä½¿ç”¨ä¸€ä¸ªåä¸ºEtcherçš„ç¨‹åºæ¥å®Œæˆæ­¤ä»»åŠ¡ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://etcher.io/</a> ï¼‰ã€‚ <br><br> ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä»microSDå¡ä¸‹è½½BeagleBone Blueã€‚ è¿™è¶…å‡ºäº†æœ¬æ–‡æ¡£çš„èŒƒå›´ï¼Œæ— æ³•è¯¦ç»†æè¿°æ‰€æœ‰äº¤äº’æ–¹æ³•ï¼Œä½†æ˜¯é€šå¸¸å¯ä»¥é€šè¿‡å¾®å‹USBç”µç¼†æˆ–SSHï¼ˆè¿æ¥åˆ°â€œ debian@192.168.7.2â€ï¼Œå¯†ç â€œ temppwdâ€ï¼‰æˆ–é€šè¿‡COM-portï¼ˆå°†Debianç”¨æˆ·'ï¼Œå¯†ç 'temppwdï¼‰æ’å…¥minicomæˆ–PuTTYä¹‹ç±»çš„ç¨‹åºä¸­ã€‚ é€šè¿‡COMç«¯å£åˆ°Linuxæ§åˆ¶å°çš„æ­¤è¿æ¥ã€‚  BBBæ„å»ºä¸­çš„UART1å§‹ç»ˆç»‘å®šåˆ°æ§åˆ¶å°ï¼Œé¦–å…ˆç»‘å®šåˆ°U-bootï¼Œç„¶åç»‘å®šåˆ°Linuxã€‚ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šä¿¡æ¯ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//beagleboard.org/blue</a> <br><br>  Windows 10é™„å¸¦BeagleBoneé©±åŠ¨ç¨‹åºã€‚åœ¨Linuxä¸­ï¼Œå¯èƒ½æ— æ³•é€‰æ‹©BBBä½œä¸ºé€šç”¨USB COMç«¯å£ã€‚ å¦‚æœæ‚¨é‡åˆ°é—®é¢˜ï¼Œè¯·å°è¯•ï¼š <br><br><pre><code class="bash hljs">sudo -s cat &gt;/etc/udev/rules.d/73-beaglebone.rules &lt;&lt;EOF ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"usb"</span></span>, ENV{DEVTYPE}==<span class="hljs-string"><span class="hljs-string">"usb_interface"</span></span>, ATTRS{idVendor}==<span class="hljs-string"><span class="hljs-string">"0403"</span></span>, ATTRS{idProduct}==<span class="hljs-string"><span class="hljs-string">"a6d0"</span></span>, DRIVER==<span class="hljs-string"><span class="hljs-string">""</span></span>, RUN+=<span class="hljs-string"><span class="hljs-string">"/sbin/modprobe -b ftdi_sio"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"drivers"</span></span>, ENV{DEVPATH}==<span class="hljs-string"><span class="hljs-string">"/bus/usb-serial/drivers/ftdi_sio"</span></span>, ATTR{new_id}=<span class="hljs-string"><span class="hljs-string">"0403 a6d0"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"ttyUSB*"</span></span>, ATTRS{interface}==<span class="hljs-string"><span class="hljs-string">"BeagleBone"</span></span>, ATTRS{bInterfaceNumber}==<span class="hljs-string"><span class="hljs-string">"00"</span></span>, SYMLINK+=<span class="hljs-string"><span class="hljs-string">"beaglebone-jtag"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"ttyUSB*"</span></span>, ATTRS{interface}==<span class="hljs-string"><span class="hljs-string">"BeagleBone"</span></span>, ATTRS{bInterfaceNumber}==<span class="hljs-string"><span class="hljs-string">"01"</span></span>, SYMLINK+=<span class="hljs-string"><span class="hljs-string">"beaglebone-serial"</span></span> EOF udevadm control --reload-rules <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span></code> </pre> <br> å¸Œæœ›æ‚¨ç°åœ¨å·²ç™»å½•åˆ°å‘½ä»¤è¡Œã€‚ æˆ‘ä»¬å°†ä»å…è®¸debianç”¨æˆ·æ‰§è¡Œsudoå¼€å§‹ï¼Œè€Œä¸å¿…æ¯æ¬¡ï¼ˆéšåï¼‰è¾“å…¥å¯†ç ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"debian ALL=(ALL) NOPASSWD: ALL"</span></span> | sudo tee -a /etc/sudoers.d/debian &gt;/dev/null</code> </pre><br> ä¸‹ä¸€é¡¹å·¥ä½œæ˜¯ä½¿ç”¨å¯è´Ÿæ‹…çš„äº’è”ç½‘è¿æ¥æ¥æ›´æ–°å’Œå®‰è£…è½¯ä»¶ï¼Œå› æ­¤è¯¥è®¾ç½®connmanè¿›è¡ŒWi-Fiæ¥å…¥äº†ã€‚ æˆ‘è¿™æ ·åšæ˜¯å› ä¸ºå®ƒå°†ä¸ºå°†æ¥çš„å·¥ä½œæä¾›ä¾¿åˆ©ã€‚ é¦–å…ˆï¼Œè®°ä¸‹è·¯ç”±å™¨çš„SSIDå’ŒWiFiå¯†ç ã€‚ ç„¶åè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š <br><br><pre> <code class="bash hljs"> sudo -s connmanctl services | grep <span class="hljs-string"><span class="hljs-string">'&lt;your SSID&gt;'</span></span> | grep -Po <span class="hljs-string"><span class="hljs-string">'wifi_[^ ]+'</span></span></code> </pre><br> ç­”æ¡ˆå°†ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼šâ€œ wifi_38d279e099a8_4254487562142d4355434b_managed_pskâ€ã€‚ å¦‚æœæ‚¨çœ‹ä¸åˆ°ä»»ä½•å†…å®¹ï¼Œè¯·é‡è¯•-æ‚¨å¯èƒ½è¾“å…¥äº†é”™å­—ã€‚ <br><br> ç°åœ¨ï¼Œä½¿ç”¨æ­¤ç½‘ç»œIDï¼Œæˆ‘ä»¬å°†ä½¿ç”¨catç›´æ¥ä»é”®ç›˜ï¼ˆstdinï¼‰è¾“å…¥æ–‡ä»¶ï¼Œä¸€æ¬¡ä¸€è¡Œï¼š <br><br><pre> <code class="bash hljs"> cat &gt;/var/lib/connman/wifi.config [service_&lt;your <span class="hljs-built_in"><span class="hljs-built_in">hash</span></span>&gt;] Type = wifi Security = wpa2 Name = &lt;your SSID&gt; Passphrase = &lt;your WiFi password&gt;</code> </pre><br> é‡è¦ï¼ åœ¨æŒ‰Ctrl + Cä¹‹å‰ï¼Œè¯·ç¡®ä¿æŒ‰Enterï¼Œå¦åˆ™æ•´ä¸ªå½“å‰è¡Œå°†ä¸¢å¤±ã€‚ <br> æŒ‰Ctrl-Cé€€å‡ºï¼Œç„¶åé”®å…¥ï¼šexit <br><br> å¯è§çš„ç»¿è‰²LEDæŒ‡ç¤ºç¯å°†ç‚¹äº®ï¼Œè¡¨ç¤ºWi-Fiå·²å¼€å¯ã€‚  BBBlueå·²è¿æ¥åˆ°è·¯ç”±å™¨ï¼Œæ‚¨çš„Wi-Fiç½‘ç»œä¸Šçš„IPåœ°å€å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ‰¾åˆ°ï¼š <br><br><pre> <code class="bash hljs">ip addr show wlan0</code> </pre><br> å¦‚æœç”±äºæŸç§åŸå› æ‚¨ä¸èƒ½ç›´æ¥è¯·æ±‚BBBlueï¼Œè¯·ä½¿ç”¨å…¶ä»–å®ç”¨ç¨‹åºï¼Œä¾‹å¦‚nmapï¼ˆsudo nmap 192.168.0.0/24ï¼‰æˆ–ç™»å½•åˆ°è·¯ç”±å™¨å¹¶ä»¥å…¶ä»–æ–¹å¼æŸ¥æ‰¾é‚£é‡Œçš„IPåœ°å€ã€‚ <br><br> ç°åœ¨ï¼Œå°è¯•ä½¿ç”¨SSHçš„Wi-Fi IPåœ°å€é€šè¿‡SSHè¿æ¥ã€‚ è¯·è®°ä½ï¼Œ192.168.7.2ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚ <br><br> å¦‚æœæ— æ³•ä½¿WiFiä¸connmanä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…åªæ˜¯ä¸æƒ³ä½¿ç”¨connmanï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ã€‚ é¦–å…ˆï¼Œé”®å…¥ï¼šsudo systemctl disable connmanã€‚ ç„¶åï¼Œä½¿ç”¨æ‚¨çš„SSIDå’ŒWiFiå¯†ç ï¼Œç¼–è¾‘/ etc / network / interfaces <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># The loopback network interface. auto lo iface lo inet loopback # WiFi w/ onboard device (dynamic IP). auto wlan0 iface wlan0 inet dhcp wpa-ssid "&lt;your SSID&gt;" wpa-psk "&lt;your WiFi password&gt;" dns-nameservers 8.8.8.8 1.1.1.1 # Ethernet/RNDIS gadget (g_ether). # Used by: /opt/scripts/boot/autoconfigure_usb0.sh iface usb0 inet static address 192.168.7.2 netmask 255.255.255.252 network 192.168.7.0 gateway 192.168.7.1</span></span></code> </pre><br> ç°åœ¨ä½¿ç”¨ä»¥ä¸‹<b>å‘½ä»¤é‡æ–°</b>åŠ è½½BBBlueï¼š <b>sudo reboot</b> <br><br> ç™»å½•åï¼Œè¾“å…¥ï¼šsudo ifup wlan0ã€‚ ç»¿è‰²LEDåº”è¯¥ç‚¹äº®ã€‚ <br><br> å¦‚æœå¸Œæœ›BBå…·æœ‰é™æ€IPï¼ˆä¾‹å¦‚192.168.0.99ï¼‰ï¼Œè¯·æ›´æ”¹â€œï¼ƒWiFi w /æ¿è½½è®¾å¤‡ï¼ˆåŠ¨æ€IPï¼‰ã€‚â€éƒ¨åˆ†/ etc / network / interfaceè¯»å–ä¸ºï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># WiFi w/ onboard device (static IP). auto wlan0 iface wlan0 inet static wpa-ssid "&lt;your SSID&gt;" wpa-psk "&lt;your WiFi password&gt;" address 192.168.0.99 # &lt;--- The desired static IP address of the BBBlue. netmask 255.255.255.0 gateway 192.168.0.1 # &lt;--- The address of your router. dns-nameservers 8.8.8.8 1.1.1.1</span></span></code> </pre><br> æ›´æ–°å’Œå®‰è£…æ‰€æœ‰å¿…è¦çš„æ”¯æŒç¨‹åºï¼š <br><br><pre> <code class="bash hljs">sudo apt-get -y update sudo apt-get -y dist-upgrade sudo apt-get install -y cpufrequtils git</code> </pre><br> æ›´æ–°è„šæœ¬ï¼šcd / opt /è„šæœ¬ï¼†ï¼†git pull <br><br>  <b>å®æ—¶å†…æ ¸å½“å‰åŒ…å«é”™è¯¯ï¼</b>  <b>ä½¿ç”¨ä»¥ä¸‹ä¿®å¤ç¨‹åºï¼šæŒ‡å®šTiå®æ—¶å†…æ ¸4_4ã€‚</b>  <b>ä¸è¦ä½¿ç”¨4_14ã€‚</b> <br><br><pre> <code class="bash hljs">sudo /opt/scripts/tools/update_kernel.sh --ti-rt-channel --lts-4_4 sudo sed -i <span class="hljs-string"><span class="hljs-string">'s|uboot_overlay_pru=/lib/firmware/AM335X-PRU-RPROC-4-14-TI-00A0.dtbo|#uboot_overlay_pru=/lib/firmware/AM335X-PRU-RPROC-4-14-TI-00A0.dtbo|g'</span></span> /boot/uEnv.txt sudo sed -i <span class="hljs-string"><span class="hljs-string">'s|#uboot_overlay_pru=/lib/firmware/AM335X-PRU-RPROC-4-4-TI-00A0.dtbo|uboot_overlay_pru=/lib/firmware/AM335X-PRU-RPROC-4-4-TI-00A0.dtbo|g'</span></span> /boot/uEnv.txt</code> </pre><br> æœ€åï¼Œå°†am335x-bone blue.dtbï¼ˆä»æ­¤å­˜å‚¨åº“ä¸­çš„binç›®å½•å¤åˆ¶ï¼‰å¤åˆ¶åˆ°/boot/dtbs/4.4.113-ti-rt-r149 <br><br> åœ¨è‡ªåŠ¨è¿è¡Œæ—¶å®‰è£…è„šæœ¬ <br><br><pre> <code class="bash hljs">sudo sed -i <span class="hljs-string"><span class="hljs-string">'s/#dtb=/dtb=am335x-boneblue.dtb/g'</span></span> /boot/uEnv.txt</code> </pre><br> è®¾å®šé¢‘ç‡ <br><br><pre> <code class="bash hljs">sudo sed -i <span class="hljs-string"><span class="hljs-string">'s/GOVERNOR="ondemand"/GOVERNOR="performance"/g'</span></span> /etc/init.d/cpufrequtils</code> </pre><br> é…ç½®bb-wl18xx-wlan0.service <br><br><pre> <code class="bash hljs">sudo sed -i <span class="hljs-string"><span class="hljs-string">'s/RestartSec=5/RestartSec=1/g'</span></span> /lib/systemd/system/bb-wl18xx-wlan0.service</code> </pre><br> é…ç½®bb-wl18xx-wlan0.service <br><br><pre> <code class="bash hljs">sudo sed -i <span class="hljs-string"><span class="hljs-string">'s/RestartSec=5/RestartSec=1/g'</span></span> /lib/systemd/system/bb-wl18xx-wlan0.service</code> </pre><br> ç¦ç”¨è“ç‰™ï¼ˆå¯é€‰ï¼‰ <br><br><pre> <code class="bash hljs">sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> bb-wl18xx-bluetooth.service</code> </pre><br> æ‰©å±•ç°æœ‰çš„microSDå¡åˆ†åŒºï¼ˆ/ dev / mmcblk0p1ï¼‰ï¼š <br><br><pre> <code class="bash hljs">sudo /opt/scripts/tools/grow_partition.sh</code> </pre><br> ç«‹å³é‡å¯ï¼š <br><br><pre> <code class="bash hljs">sudo reboot</code> </pre><br><h2> ç¬¬2éƒ¨åˆ†ã€‚åœ¨BeagleBoneä¸Šå®‰è£…ArduPilot </h2><br> å½“BeagleBoneé‡æ–°å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€äº›æ–‡æœ¬æ–‡ä»¶ã€‚ é¦–å…ˆï¼Œå®Œå–„ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œ/ etc / default / ardupilotï¼š <br>  <i>ï¼ˆæç¤ºï¼šè¾“å…¥sudoedit / etc / default / ardupilotå¹¶æ’å…¥æ‚¨è‡ªå·±çš„ç›®æ ‡IPåœ°å€ï¼Œä¾‹å¦‚192.168.0.13ï¼‰</i> <br><br><pre> <code class="bash hljs">TELEM1=<span class="hljs-string"><span class="hljs-string">"-C /dev/ttyO1"</span></span> TELEM2=<span class="hljs-string"><span class="hljs-string">"-A udp:&lt;target IP address&gt;:14550"</span></span> GPS=<span class="hljs-string"><span class="hljs-string">"-B /dev/ttyS2"</span></span></code> </pre><br> è¿™æ˜¯ç›¸å½“å…¸å‹çš„é…ç½®ã€‚ <br><br> è¿™æ˜¯å¯åŠ¨å‚æ•°-Cä¸ºBBBlueä¸­çš„UART1æ˜ å°„ArduPilotçš„â€œ Telem1â€ä¸²è¡Œç«¯å£ï¼ˆSERIAL1ï¼Œé»˜è®¤ä¸º57600ï¼‰ã€‚ ä¾‹å¦‚ï¼Œæˆ‘æœ‰ä¸€ä¸ª868x RFDesignæ— çº¿ç”µè¿æ¥åˆ°UART1ã€‚ è¿™æ˜¯æˆ‘çš„æ— äººæœºçš„åŒå‘æ•°æ®é€šé“ã€‚ å®ƒå‘åŸºç«™å‘é€å„ç§é¥æµ‹æ•°æ®ï¼Œå¹¶ä»åŸºç«™æ¥æ”¶RTKå‘½ä»¤å’Œå·®åˆ†æ ¡æ­£ã€‚ <br><br> è¿™æ˜¯å¯åŠ¨å‚æ•°-Aæ˜ å°„ArduPilotçš„â€œæ§åˆ¶å°â€ä¸²è¡Œç«¯å£ï¼ˆSERIAL0ï¼Œé»˜è®¤ä¸º115200ï¼‰ï¼Œåè®®ï¼Œç›®æ ‡IPåœ°å€å’Œå¯é€‰ç«¯å£å·ã€‚ ä¾‹å¦‚ï¼Œè¿™ä½¿æˆ‘å¯ä»¥é€šè¿‡Wi-Fiæ¥æ”¶MAVLinkæ•°æ®ä»¥è¿›è¡Œæµ‹è¯•ã€‚ çœŸçš„å¾ˆæœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å› ä¸ºæ•°æ®å¯ä»¥ç«‹å³è½¬åˆ°Mission Plannerå’ŒQGroundControlã€‚ <br><br><img src="https://habrastorage.org/webt/3d/d7/m1/3dd7m1ilxlbkd3elqxnddq_1rcm.jpeg" alt="å›¾ç‰‡"><br><br> è¿™æ˜¯å¯åŠ¨å‚æ•°-Bæ˜ å°„ArduPilotçš„â€œ GPSâ€ä¸²è¡Œç«¯å£ï¼ˆSERIAL3ï¼Œé»˜è®¤ä¸º57600ï¼‰ä¸Uart2 BBBlueï¼ˆUARTï¼Œåœ¨æ¿ä¸Šæœ¬èº«æ ‡è®°ä¸ºâ€œ GPSâ€ï¼‰ã€‚ ä¾‹å¦‚ï¼Œæˆ‘æœ‰ä¸€ä¸ªè¿æ¥åˆ°UART2çš„U-blox NEO-M8Pã€‚ <br><br> è¿˜æœ‰å…¶ä»–å¯èƒ½æ€§-è¿˜æœ‰å…¶ä»–å¯åŠ¨é€‰é¡¹ï¼Œå…·æœ‰é¢„å®šä¹‰çš„ç«¯å£é€Ÿåº¦å’Œç«¯å£æœ¬èº«ï¼š <br><br><pre> <code class="bash hljs">Switch -A --&gt; <span class="hljs-string"><span class="hljs-string">"Console"</span></span>, SERIAL0, default 115200 Switch -B --&gt; <span class="hljs-string"><span class="hljs-string">"GPS"</span></span>, SERIAL3, default 57600 Switch -C --&gt; <span class="hljs-string"><span class="hljs-string">"Telem1"</span></span>, SERIAL1, default 57600 Switch -D --&gt; <span class="hljs-string"><span class="hljs-string">"Telem2"</span></span>, SERIAL2, default 38400 Switch -E --&gt; Unnamed, SERIAL4, default 38400 Switch -F --&gt; Unnamed, SERIAL5, default 57600</code> </pre><br> æœ‰å…³å„ç§ä¸²è¡Œç«¯å£çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ArduPilotå®˜æ–¹æ–‡æ¡£ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http</a> ://ardupilot.org/plane/docs/parameters.html?highlight=parameters <br><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»ºArduPilot systemdæœåŠ¡æ–‡ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªç”¨äºArduCopterï¼Œå³/lib/systemd/system/arducopter.serviceï¼š <br><br><pre> <code class="bash hljs">[Unit] Description=ArduCopter Service After=networking.service StartLimitIntervalSec=0 Conflicts=arduplane.service ardurover.service antennatracker.service [Service] EnvironmentFile=/etc/default/ardupilot ExecStartPre=/usr/bin/ardupilot/aphw ExecStart=/usr/bin/ardupilot/arducopter <span class="hljs-variable"><span class="hljs-variable">$TELEM1</span></span> <span class="hljs-variable"><span class="hljs-variable">$TELEM2</span></span> <span class="hljs-variable"><span class="hljs-variable">$GPS</span></span> Restart=on-failure RestartSec=1 [Install] WantedBy=multi-user.target</code> </pre><br> ä¸€ä¸ªç”¨äºArduPlaneçš„/lib/systemd/system/arduplane.serviceï¼š <br><br><pre> <code class="bash hljs">[Unit] Description=ArduPlane Service After=networking.service StartLimitIntervalSec=0 Conflicts=arducopter.service ardurover.service antennatracker.service [Service] EnvironmentFile=/etc/default/ardupilot ExecStartPre=/usr/bin/ardupilot/aphw ExecStart=/usr/bin/ardupilot/arduplane <span class="hljs-variable"><span class="hljs-variable">$TELEM1</span></span> <span class="hljs-variable"><span class="hljs-variable">$TELEM2</span></span> <span class="hljs-variable"><span class="hljs-variable">$GPS</span></span> Restart=on-failure RestartSec=1 [Install] WantedBy=multi-user.target</code> </pre><br> ä¸€ä¸ªç”¨äºArduRoverçš„/lib/systemd/system/ardurover.serviceï¼š <br><br><pre> <code class="bash hljs">[Unit] Description=ArduRover Service After=networking.service StartLimitIntervalSec=0 Conflicts=arducopter.service arduplane.service antennatracker.service [Service] EnvironmentFile=/etc/default/ardupilot ExecStartPre=/usr/bin/ardupilot/aphw ExecStart=/usr/bin/ardupilot/ardurover <span class="hljs-variable"><span class="hljs-variable">$TELEM1</span></span> <span class="hljs-variable"><span class="hljs-variable">$TELEM2</span></span> <span class="hljs-variable"><span class="hljs-variable">$GPS</span></span> Restart=on-failure RestartSec=1 [Install] WantedBy=multi-user.target</code> </pre><br> é‚£AntennaTrackerå‘¢ï¼Ÿ åˆ›å»º/lib/systemd/system/antennatracker.serviceï¼š <br><br><pre> <code class="bash hljs">[Unit] Description=AntennaTracker Service After=networking.service StartLimitIntervalSec=0 Conflicts=arducopter.service arduplane.service ardurover.service [Service] EnvironmentFile=/etc/default/ardupilot ExecStartPre=/usr/bin/ardupilot/aphw ExecStart=/usr/bin/ardupilot/antennatracker <span class="hljs-variable"><span class="hljs-variable">$TELEM1</span></span> <span class="hljs-variable"><span class="hljs-variable">$TELEM2</span></span> <span class="hljs-variable"><span class="hljs-variable">$GPS</span></span> Restart=on-failure RestartSec=1 [Install] WantedBy=multi-user.target</code> </pre><br> æˆ‘ä»¬å»sudoæ–‡ä»¶å¤¹mkdir -p / usr / bin / ardupilot <br><br> ä¸ºArduPilotåˆ›å»ºä¸€ä¸ªé“é…ç½®æ–‡ä»¶ï¼Œ/ usr / bin / ardupilot / aphwï¼Œè¯¥æ–‡ä»¶åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¹‹å‰è¿è¡Œã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # aphw # ArduPilot hardware configuration. /bin/echo 80 &gt;/sys/class/gpio/export /bin/echo out &gt;/sys/class/gpio/gpio80/direction /bin/echo 1 &gt;/sys/class/gpio/gpio80/value /bin/echo pruecapin_pu &gt;/sys/devices/platform/ocp/ocp:P8_15_pinmux/state</span></span></code> </pre><br>  5-7è¡ŒåŒ…æ‹¬BBBlue + 5Vä¼ºæœç”µæºï¼Œå³ä½¿ç”¨ä¼ºæœå™¨æ—¶ã€‚  ESCä¸éœ€è¦ã€‚ <br><br> ç¬¬8è¡ŒåŒ…æ‹¬PRUã€‚ <br><br> ä½¿ç”¨sudo chmod 0755 / usr / bin / ardupilot / aphwè®¾ç½®æ­¤æ–‡ä»¶çš„æƒé™ã€‚ <br><br> å·®ä¸å¤šå‘ç”Ÿäº†ï¼ ç°åœ¨ï¼Œæ‚¨åº”è¯¥è·å¾—ä¸“é—¨ä¸ºArm BBBlueä½“ç³»ç»“æ„åˆ›å»ºçš„æœ€æ–°ArduCopterï¼ŒArduPlaneç­‰å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬æ”¾åœ¨/ usr / bin / ardupilotç›®å½•ä¸­ã€‚  Mirko Deneckeå°†å®ƒä»¬ä¸Šä¼ åˆ°ä»–çš„ç½‘ç«™ä¸Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http</a> ://bbbmini.org/download/blue/ <br><br> å¤åˆ¶åˆ°æ­¤å­˜å‚¨åº“ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//github.com/imfatant/test/blob/master/bin/</a> <br><br> ä¸è¦å¿˜è®°è®¾ç½®æƒé™ï¼šsudo chmod 0755 / usr / bin / ardupilot / a * <br><br> å¦‚æœæ‚¨å‘ç°éœ€è¦ä»æºä»£ç è¿›è¡Œç¼–è¯‘ï¼Œè¯·ä¸è¦å®³æ€•-å¹¶ä¸æ˜¯é‚£ä¹ˆå›°éš¾ã€‚ æ­¤å¤–ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„ArduPilotè½¯ä»¶ã€‚ <br><br> åœ¨BBBlueæœ¬èº«ä¸Šæ”¶é›†å®ƒä»¬å°†èŠ±è´¹å¤ªå¤šæ—¶é—´ã€‚  Patrick Poirieråœ¨ä»–çš„ç½‘ç«™ä¸Šè§£é‡Šäº†BBBMINIï¼ˆåŸºäºé»‘è‰²BeagleBoneï¼‰çš„è¿‡ç¨‹ã€‚ è¿™æ˜¯ç‰¹å®šäºBBBlueçš„è¿‡ç¨‹ï¼Œå‡å®šæ‚¨å·²ç»å®Œæˆäº†æ‰€æœ‰æ­¥éª¤ï¼Œå¹¶ä¸”ä½äº/ home / debianç›®å½•ä¸­ï¼š <br><br><pre> <code class="bash hljs">sudo apt-get install g++ make pkg-config python python-dev python-lxml python-pip sudo pip install future git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/ArduPilot/ardupilot <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ardupilot git checkout Copter-3.6 <span class="hljs-comment"><span class="hljs-comment"># &lt;-- For ArduCopter. git submodule update --init --recursive ./waf configure --board=blue # &lt;-- BeagleBone Blue. ./waf sudo cp ./build/blue/bin/a* /usr/bin/ardupilot</span></span></code> </pre><br>  Patrickè¿˜æä¾›äº†åœ¨Ubuntuä¸­ç›¸å¯¹å¼ºå¤§çš„x64å°å¼PCä¸Šäº¤å‰ç¼–è¯‘å®ƒä»¬çš„è¯´æ˜ï¼Œè¿™è¦å¿«å¾—å¤šã€‚ <br><br> æ ¹æ®æ‚¨éœ€è¦çš„è½¯ä»¶é€‰é¡¹ <br>  sudo systemctlå¯ç”¨arducopter.service <br> æˆ– <br>  sudo systemctlå¯ç”¨arduplane.service <br> æˆ– <br>  sudo systemctlå¯ç”¨ardurover.service <br> æˆ– <br>  sudo systemctlå¯ç”¨Antennatracker.service <br><br> é‡æ–°å¯åŠ¨åï¼Œæ‚¨çš„ArduPilotåº”è¯¥ä¼šè‡ªåŠ¨å¯åŠ¨ã€‚ æ‚¨å°†çœ‹åˆ°é—ªçƒçš„çº¢è‰²LEDï¼ <br><br> æ‚¨å¯ä»¥ç­¾å‡ºsystemctlï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.freedesktop.org/software/systemd/man/systemctl.html</a> ï¼‰ã€‚ ä¸€äº›æœ‰ç”¨çš„ç¤ºä¾‹å‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> ... sudo systemctl start ... sudo systemctl stop ...</code> </pre><br><h3> ç¬¬3éƒ¨åˆ†ã€‚è¿æ¥å¤–å›´è®¾å¤‡ </h3><br><img src="https://habrastorage.org/webt/fx/xo/ae/fxxoaey0otck_4ti6yl0p1dzbgu.jpeg" alt="å›¾ç‰‡"><br><br> åŸºæœ¬çš„æœ€ä½é…ç½®å¯èƒ½åŒ…æ‹¬ï¼š <br><br><ul><li>  R / Cæ¥æ”¶å™¨ã€‚ </li><li>  GPSæ¥æ”¶å™¨ï¼ˆå¸¦æˆ–ä¸å¸¦é›†æˆæŒ‡å—é’ˆï¼‰ã€‚ </li><li> ç”¨äºåŒå‘æ•°æ®é€šé“çš„æ— çº¿ç”µè°ƒåˆ¶è§£è°ƒå™¨ï¼Œå°¤å…¶æ˜¯åœ¨é•¿è·ç¦»ä¸Šã€‚ </li><li>  ï¼ˆå¦‚æœå¯ç”¨2.4 GHzï¼Œåˆ™å†…ç½®WiFi BBBlueéå¸¸é€‚åˆåœ¨è¿‘è·ç¦»è¿›è¡Œè°ƒè¯•å’Œæµ‹è¯•ï¼Œä½†å¯¹äºæ›´æœ‰è¶£çš„äº‹æƒ…ï¼Œå»ºè®®ä½¿ç”¨ä¸“ç”¨çš„åŒå‘æ•°æ®ä¿¡é“ã€‚ä¹Ÿè¯·è®°ä½ä½¿ç”¨æ‰€æœ‰è¿™äº›å…ƒç´ çš„å¤©çº¿çš„ç±»å‹å’Œä½ç½®ã€‚ ï¼‰ </li></ul><br> å…³äºæ‰€éœ€çš„è¿æ¥å™¨ï¼Œç”µç¼†å’Œå·¥å…·çš„å‡ å¥è¯ã€‚ æˆ‘å°†æä¾›ä¸€äº›å»ºè®®ï¼Œå¦åˆ™ï¼Œå¦‚æœæ‚¨æ˜¯åˆå­¦è€…ï¼Œåˆ™å¯ä»¥èŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼Œç²¾åŠ›å’Œé‡‘é’±ã€‚ æœ€å¸¸ç”¨çš„è¿æ¥å™¨ç±»å‹æ˜¯JST-SH 1.0 mmã€‚ æ‚¨å¿…é¡»è´­ä¹°4ä½å’Œ6ä½å°ºå¯¸å’Œå‹æ¥è§¦ç‚¹çš„å¤šä¸ªæ¯è¿æ¥å™¨ã€‚ ç„¶åè·å¾—å‡ ç±³ä¸åŒé¢œè‰²çš„ç”µçº¿ã€‚ <br><br> å› æ­¤ï¼Œå›åˆ°è¿æ¥å¤–å›´è®¾å¤‡ï¼š <br><br><img src="https://habrastorage.org/webt/h4/mq/7k/h4mq7kn51qxgbc4orkk4ghmluoo.jpeg"><br><br> é¥æ§æ¥æ”¶å™¨ï¼šå¯ä»¥åœ¨ä»»ä½•+ 5Vè§¦ç‚¹å’ŒGNDå¤„å…³é—­ã€‚ å‰©ä¸‹çš„å°±æ˜¯å°†æ¥æ”¶å™¨çš„SBUSè¾“å‡ºï¼ŒDSMè¾“å‡ºæˆ–PPMè¾“å‡ºè¿æ¥åˆ°å›¾ä¸­æ ‡è®°çš„ä¸¤ä¸ªSBUSå¼•è„šä¹‹ä¸€ã€‚ ä»¥ä¸‹æ¥æ”¶å™¨å·²ç»è¿‡æµ‹è¯•å¹¶ä¸”æ­£åœ¨è¿è¡Œï¼š <br><br>  FrSkyï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.frsky-rc.com/</a> ï¼‰ï¼šR-XSRï¼ŒXR4SBï¼ŒX6Rï¼ŒX8Rï¼ŒR9 Slimå’ŒR9 Miniï¼ˆæ¬§ç›ŸLBT 868 MHzå’Œé€šç”¨915 MHzå›ºä»¶ï¼‰ã€‚ <br><br>  Spektrumï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.spektrumrc.com/</a> ï¼‰ï¼šå¸¦æœ‰PPM / SRXL / Remote Rxçš„AR7700 DSMXã€‚ <br><br>  TBSï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://team-blacksheep.com/</a> ï¼‰ï¼šå¸¦æœ‰Nano Rxçš„â€œå®Œå…¨â€äº¤ç«ï¼ˆRxè®¾ç½®ä¸ºSBUSæ¨¡å¼ï¼‰ã€‚ <br><br> é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä»–ä»¬è°ˆè®ºäº†å¾ˆå¤šæœ‰å…³â€œå€’ç½®SBUSâ€çš„é—®é¢˜ã€‚ å®é™…ä¸Šï¼ŒSBUSåªæ˜¯Futabaå‘æ˜å¹¶ç”±FrSkyå¤åˆ¶çš„ä¸²è¡Œæ•°æ®ä¼ è¾“åè®®ã€‚ ä¸â€œæ ‡å‡†â€ UARTç›¸æ¯”ï¼Œå®ƒæ˜¯é¢ å€’çš„ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒArdupilot Blueå¸Œæœ›æ­¤SBUSä¿¡å·åç›¸ï¼Œå› æ­¤ä¸éœ€è¦ä¿¡å·åç›¸å™¨ã€‚ <br><br>  GPSæ¥æ”¶å™¨ï¼šå¤§å¤šæ•°äººéƒ½ä½¿ç”¨u-bloxæ¥æ”¶å™¨ï¼Œå°¤å…¶æ˜¯NEO-M8Nå’ŒNEO-M8Pã€‚  NEO-M8Nä»·æ ¼ä½å»‰ï¼Œé€šå¸¸ä»¥ç£ç›˜å½¢å¼ä»HobbyKingç­‰ä¸­å›½å…¬å¸è·å¾—ã€‚ æ–¹ä¾¿åœ°ï¼Œå®ƒä»¬åŒ…å«æ¥æ”¶å™¨æœ¬èº«ï¼Œä¸€ä¸ªéå¸¸å°çš„é™¶ç“·è´´ç‰‡å¤©çº¿ï¼Œå¹¶ä¸”é€šå¸¸åŒ…æ‹¬ä¸€ä¸ªæŒ‡å—é’ˆã€‚ å°½ç®¡BBBlueå·²ç»å…·æœ‰å†…ç½®æŒ‡å—é’ˆï¼ˆAKM AK8963ï¼‰ï¼Œä½†å¯ä»¥å°†ArduPiloté…ç½®ä¸ºä½¿ç”¨æ­¤â€œå¤–éƒ¨â€æŒ‡å—é’ˆè€Œä¸æ˜¯å…¶è‡ªèº«ï¼Œä»¥é˜²æ­¢å¹²æ‰°ã€‚ <br><br>  NEO-M8Pæ˜¯NEO-M8Nçš„ï¼ˆæ›´ï¼‰æ˜‚è´µçš„æ›¿ä»£æ–¹æ¡ˆã€‚ è¯¥æ¥æ”¶å™¨æ”¯æŒä¸€ç§ç§°ä¸ºâ€œ RTKâ€æˆ–å®æ—¶è¿åŠ¨å­¦çš„å·¥ä½œæ¨¡å¼ï¼Œå¯ä»¥å®æ—¶å®ç°å‡ å˜ç±³çš„å®šä½ç²¾åº¦ã€‚ ä½†æ˜¯ï¼Œè¿™ç§æ¼”ç¤ºçš„ä»·æ ¼æ˜¯NEO-M8Nçš„10å€å·¦å³ï¼Œè€Œä¸”æ²¡æœ‰åŸºç«™ã€‚ åœ¨æ‰‹å†Œçš„åé¢ï¼Œæˆ‘å°†å¯¹M8Pè¿›è¡Œä¸“é—¨çš„è¯´æ˜ã€‚ <br><br>  I2C ArduPiloté…ç½®æ–‡ä»¶ï¼š/var/APM/{ArduCopter.stg,ArduPlane.stg,APMrover2.stg,AntennaTracker.stg} <br><br><pre> <code class="bash hljs">sudo apt-get install i2c-tools sudo i2cdetect -r -y 0 sudo i2cdetect -r -y 1 sudo i2cdetect -r -y 2</code> </pre><br><pre> <code class="bash hljs">$ sudo i2cdetect -r -y 2 0 1 2 3 4 5 6 7 8 9 abcdef 00: -- -- -- -- -- -- -- -- -- 0c -- -- -- 10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 60: -- -- -- -- -- -- -- -- 68 -- -- -- -- -- -- -- 70: -- -- -- -- -- -- 76 --</code> </pre><br>  68 = InvenSense MPU-9250 IMUï¼ˆæ¿è½½ï¼‰ï¼Œ0c = AKM AK8963æŒ‡å—é’ˆï¼ˆæ¿è½½ï¼‰ï¼Œ76 = Bosch BMP280æ°”å‹è®¡ï¼ˆæ¿è½½ï¼‰ã€‚ <br><br><pre> <code class="bash hljs">$ sudo i2cdetect -r -y 1 0 1 2 3 4 5 6 7 8 9 abcdef 00: -- -- -- -- -- -- -- -- -- -- -- -- -- 10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- 1e -- 20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 70: -- -- -- -- -- -- -- --</code> </pre><br>  1e =éœå°¼éŸ¦å°”HMC5843æŒ‡å—é’ˆï¼ˆå¤–éƒ¨ï¼‰-é€šå¸¸é›†æˆåˆ°åŸºäºu-blox NEO-M8Nçš„GPSæ¨¡å—ä¸­ã€‚ <br><br><h2> åœ°é¢æ§åˆ¶ç«™ï¼ˆGCSï¼‰è½¯ä»¶å…¥é—¨ </h2><br> ä¸‹è½½é€‚ç”¨äºWindowsçš„ä»»ä½•ä»»åŠ¡è®¡åˆ’ç¨‹åºï¼ˆhttp://firmware.ardupilot.org/Tools/MissionPlanner/MissionPlanner-latest.msiï¼‰æˆ–é€‚ç”¨äºLinuxå’ŒWindowsçš„QGroundControlï¼ˆhttp://qgroundcontrol.com/ï¼‰ã€‚ è¿™ä¸¤ä¸ªç¨‹åºéƒ½å°†è¿æ¥åˆ°é€šè¿‡ç½‘ç»œï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡UDPç«¯å£14550ï¼‰æˆ–COMç«¯å£è¿›å…¥çš„MAVLinkæ•°æ®æµã€‚ <br><br><h2> é€‰é… </h2><br> ç»™åŸºäºæ— äººæœºçš„bbblueé…å¤‡è“ç‰™æ‰¬å£°å™¨ä¼šå¾ˆæœ‰è¶£ï¼Œå‰ææ˜¯è“ç‰™RFä¼ è¾“ä¸ä¼šå¹²æ‰°ä»»ä½•å…¶ä»–ç³»ç»Ÿã€‚  BlueZ / PulseAudio / ALSAä¸Šæœ‰å¤§é‡ä¿¡æ¯ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯ï¼Œå®ƒå½’ç»“ä¸ºéå¸¸ç®€å•çš„å†…å®¹ã€‚ <br><br>  aï¼‰é¦–å…ˆå®‰è£…å¿…è¦çš„è½¯ä»¶ï¼ˆä½¿ç”¨æ§åˆ¶å°æˆ–IoTæ˜ åƒï¼‰ï¼š <br><br><pre> <code class="bash hljs"> sudo apt-get install -y bluetooth pulseaudio pulseaudio-module-bluetooth alsa-utils</code> </pre><br>  bï¼‰å¯ç”¨è“ç‰™ï¼ˆå¦‚æœç¦ç”¨ï¼‰ï¼šsudo systemctlå¯ç”¨bb-wl18xx-bluetooth.service <br><br>  cï¼‰ç¼–è¾‘/etc/pulse/default.paï¼š <br><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">### Automatically suspend sinks/sources that become idle for too long # load-module module-suspend-on-idle</span></span></code> </pre><br>  dï¼‰é‡æ–°å¯åŠ¨ï¼šsudoé‡æ–°å¯åŠ¨ <br><br>  eï¼‰åŠ è½½BBBlueä¹‹åï¼Œä»¥è¿æ¥æ¨¡å¼æ‰“å¼€Bluetoothåˆ—ï¼š <br><br><pre> <code class="bash hljs"> bluetoothctl scan on agent on default-agent pair &lt;Bluetooth speaker<span class="hljs-string"><span class="hljs-string">'s MAC address&gt; # &lt;--- eg AB:58:EC:5C:0C:03 connect &lt;Bluetooth speaker'</span></span>s MAC address&gt; <span class="hljs-comment"><span class="hljs-comment"># &lt;--- Sometimes unnecessary. trust &lt;Bluetooth speaker's MAC address&gt; scan off exit</span></span></code> </pre><br>  fï¼‰æœ€åï¼š <br><br><pre> <code class="bash hljs"> pulseaudio --start <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"connect &lt;Bluetooth speaker's MAC address&gt;"</span></span> | bluetoothctl pactl list <span class="hljs-comment"><span class="hljs-comment"># &lt;--- Use this to check that your Bluetooth speaker has been picked up by PulseAudio. pacmd set-card-profile 0 a2dp_sink aplay /usr/share/sounds/alsa/Front_Center.wav</span></span></code> </pre><br> ä»…æ­¤è€Œå·²ï¼ é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœæ‚¨è¦ä½¿ç”¨è¯­éŸ³åˆæˆå™¨ï¼Œæˆ‘å»ºè®®æ‚¨ä½¿ç”¨Festivalã€‚ <br><br> å¦‚æœæ‚¨æƒ³æä¾›å¸®åŠ©-è¯·åœ¨LANæˆ–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VK</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">FBä¸­</a>ç»™æˆ‘å†™ä¿¡ã€‚ <br><br><img src="https://habrastorage.org/webt/mt/lh/91/mtlh91x8jag1t-ibt_np3uayuke.jpeg" alt="å›¾ç‰‡">  <a href="">habrastorage.org/webt/mt/lh/91/mtlh91x8jag1t-ibt_np3uayuke.jpeg</a> <br><br> æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œè¯¢é—®å’Œå®Œå…¨æ‰¹è¯„æˆ‘ä»¬ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN429510/">https://habr.com/ru/post/zh-CN429510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN429500/index.html">â€œåšç”Ÿæ„çš„æ—¶é—´â€ç»ˆäºé£é€</a></li>
<li><a href="../zh-CN429502/index.html">å‘å±•äº¤å‰ç«äº‰åŠ›æ˜¯å¦å€¼å¾—</a></li>
<li><a href="../zh-CN429504/index.html">å¦‚ä½•è°ƒç”¨éŸ³é¢‘vkæ–¹æ³•</a></li>
<li><a href="../zh-CN429506/index.html">æˆ‘ä»¬ç€çœ¼äºæ–°ç‰ˆGmail</a></li>
<li><a href="../zh-CN429508/index.html">æŠ¥å‘Šæ‘˜è¦â€œå¦‚ä½•æˆä¸ºæ•°æ®åº“ä¸“å®¶â€ï¼ˆHL2018ï¼ŒData Egretï¼ŒIlya Kosmodemyanskyï¼‰</a></li>
<li><a href="../zh-CN429512/index.html">11æœˆ12æ—¥è‡³18æ—¥åœ¨è«æ–¯ç§‘ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
<li><a href="../zh-CN429514/index.html">å¾®è½¯å‘Šè¯‰ç”¨æˆ·å¦‚ä½•é€šè¿‡æ³„æ¼çš„ç¡¬ä»¶åŠ å¯†è§£å†³SSDä¸Šçš„æ•°æ®å®‰å…¨æ€§é—®é¢˜</a></li>
<li><a href="../zh-CN429522/index.html">è®¾è®¡æœåŠ¡æœºå™¨äººã€‚ é—®é¢˜é™ˆè¿°ï¼Œè§£å†³æ–¹æ¡ˆæ¶æ„</a></li>
<li><a href="../zh-CN429524/index.html">æ­£ç¡®çš„JSON APIæˆ–JSON RPC</a></li>
<li><a href="../zh-CN429528/index.html">ä¸Šå‘¨ç¬¬338å¤©ï¼ˆ2018å¹´11æœˆ5æ—¥è‡³11æ—¥ï¼‰çš„å‰ç«¯ä¸–ç•Œæ‘˜è¦</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>