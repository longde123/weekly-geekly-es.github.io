<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úçüèæ üë®üèΩ‚Äçüîß üôÖ Atlassian Confluence: erweiterbar in Python üîà ü§πüèª üíÖüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Alfastrakhovanie verwenden wir aktiv das "Wiki", dessen Motor Atlassian Confluence ist. Als ich das erste Mal ernsthaft darauf stie√ü (um Inhalte da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Atlassian Confluence: erweiterbar in Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/alfastrah/blog/460929/"><p>  In Alfastrakhovanie verwenden wir aktiv das "Wiki", dessen Motor Atlassian Confluence ist.  Als ich das erste Mal ernsthaft darauf stie√ü (um Inhalte darin zu erstellen), fehlte mir die ‚ÄûDynamik‚Äú darin - ich wollte in der Lage sein, Teile von Seiten programmgesteuert zu bilden, mit anderen Systemen zu interagieren usw. </p><br><p>  F√ºr einige Zeit schlug er seinen Kopf gegen verschiedene W√§nde, aber dann sah er, dass "es nicht eine Wand im Haus gab".  Ich m√∂chte meine Erfahrungen teilen - wie kann ich Confluence Lautsprecher hinzuf√ºgen?  Ich hoffe, dass dies f√ºr diejenigen n√ºtzlich sein wird, die es verwenden.  Und wie immer an alle Neugierigen. </p><a name="habracut"></a><br><h2 id="dinamichnyy-viki">  Dynamisches Wiki </h2><br><p>  Zun√§chst schl√§gt Confluence einen universellen Weg vor, um seine Funktionalit√§t zu erweitern - Plugins.  Wahrscheinlich ist er gut, es gibt nur einen Nachteil - eine hohe Einstiegsschwelle (Sie m√ºssen viel lernen). </p><br><p>  Nach einem kurzen Gedanken (im Hinblick auf Platzstandards) gab es zwei recht einfache M√∂glichkeiten, die Funktionalit√§t zu erweitern: das Standardmakro "HTML" und "HTML Include". In diesem Artikel werde ich mich n√§her auf Letzteres konzentrieren. </p><br><p>  F√ºr diese Methoden gibt es ein Funktionsprinzip: HTML-Code ist in die Confluence-Seite eingebettet, kann statisch sein (was beispielsweise auch f√ºr nicht standardm√§√üige Seitenformatierungen interessant sein kann) und dynamisch sein (einschlie√ülich Serverkomponenten). </p><br><h2 id="primer-zapros-na-soglasovanie">  Beispiel: Abstimmungsanforderung </h2><br><p>  Schauen wir uns den vorgeschlagenen Weg an, um die Funktionen von Confluence anhand eines einfachen Beispiels zu erweitern - einer Dokumentgenehmigungsliste. </p><br><p>  Was wir tun m√∂chten: F√ºgen Sie der Seite eine Liste der Koordinierungen hinzu, damit jeder sehen kann, wer das Dokument koordinieren soll, ob und wann dies vereinbart wurde. </p><br><p>  Der Einfachheit halber machen wir das Listenelement zu einer Schaltfl√§che und schreiben den Namen des Koordinators hinein.  Die Schaltfl√§che ist aktiv, wenn die Seite vom Koordinator angezeigt wird, und in allen anderen F√§llen nicht aktiv. </p><br><p> Nach der Genehmigung wird die Schaltfl√§che "wird keine Schaltfl√§che mehr sein" - anstelle einer Schaltfl√§che nach der Genehmigung wird auf der Seite die Tatsache der Genehmigung in Form eines Textes (Name des Genehmigenden und Datum der Genehmigung) angezeigt.  In der meisten Entwurfsversion (ohne Design) sieht es ungef√§hr so ‚Äã‚Äãaus: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/3cf/285/175/3cf2851757c85ff0c8994dde698ec5d7.png" alt="Bild"></p><br><h3 id="shema-vzaimodeystviya">  Interaktionsschema </h3><br><p><img src="https://habrastorage.org/getpro/habr/post_images/600/48b/a4c/60048ba4cdef1ccdd55a355cb8bf3c19.png" alt="Bild"></p><br><p>  Kommentare - wie es funktioniert: </p><br><ul><li>  Die Seite in Confluence enth√§lt mehrere Makros "html include" - tats√§chlich HTTP-GET-Anforderungen mit Parametern (wir werden unten genauer darauf eingehen). </li><li>  Beim Rendern einer Seite werden diese Anforderungen (Python-Skripte) auf dem Anwendungsserver ausgef√ºhrt. Das Ergebnis (generierter HTML-Code) wird auf der Seite gezeichnet </li><li>  Im Verlauf seiner Arbeit kontaktiert das Skript beispielsweise die Datenbank mit dem Verlauf der Seitensignatur, wenn die Seite noch nicht vom Unterzeichner "signiert" wurde - HTML enth√§lt eine Schaltfl√§che (alles wie oben beschrieben). </li><li>  Wenn Sie auf die Schaltfl√§che klicken, erfolgt das Senden - ein anderes Python-Skript wird aufgerufen (ein Skript zum Verarbeiten der Tatsache der Abstimmung). </li><li>  Dieses Skript speichert Informationen √ºber die Tatsache der Anmeldung in der Datenbank und leitet den Benutzer zur√ºck zur urspr√ºnglichen Seite (beim Rendern wird die Tatsache der Unterzeichnung ber√ºcksichtigt - klicken Sie auf die Schaltfl√§che "Anmelden"). </li></ul><br><p>  Versuchen wir, den Code etwas klarer zu formulieren. </p><br><p>  Wir m√ºssen also zwei Skripte erstellen </p><br><ul><li>  das Skript f√ºr die Bildung des "Zeichen" -Buttons (ich werde es das Skript "Button" nennen) </li><li>  ein Skript zur Ermittlung der Signatur (Reaktion auf einen Knopfdruck - ich werde das Skript "Handler" nennen) </li></ul><br><p>  Lassen Sie uns sie erstellen, beginnen Sie mit der Schaltfl√§che. </p><br><h4 id="skript-knopka">  Skript-Schaltfl√§che </h4><br><p>  Schematisch, wie das Schaltfl√§chenskript funktioniert: </p><br><pre><code class="python hljs">date = getSignDate() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> date: <span class="hljs-comment"><span class="hljs-comment">#       . else: if user==signee: #    else: #  inactive </span></span></code> </pre> <br><p>  Das Skript sollte ein g√ºltiges HTML-Dokument sein, dessen Hauptteil in der minimalsten Form ein Formular ist </p><br><ul><li>  Aktion des Formulars enth√§lt die URL des Skripts "Handler" </li><li>  Die aktive Schaltfl√§che ist Senden </li><li>  Versteckte Formularfelder enthalten zus√§tzliche Parameter f√ºr den Handler (in unserem Fall den Seitennamen und die Anmeldung des Unterzeichners). </li></ul><br><p>  Eine ungef√§hre Ansicht des Skripts (der K√ºrze <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">halber habe</a> ich alles Unn√∂tige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">weggeworfen</a> - siehe den vollst√§ndigen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arbeitscode</a> auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a> ) </p><br><pre> <code class="python hljs">form = cgi.FieldStorage() signee = form[<span class="hljs-string"><span class="hljs-string">"signee"</span></span>].value <span class="hljs-comment"><span class="hljs-comment">#   (  ) actual = form["actual"].value #    id = form["id"].value #  ,    resHtml = """ &lt;!DOCTYPE HTML&gt; &lt;html&gt; &lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;&lt;/head&gt; &lt;body&gt; &lt;form name="input" action="http://172.16.108.216/misc/sign_proc.py" method="get"&gt; """ server, token = wikiLogin() #   Confluence userName = getUserName(token, signee) #        res = getSignDate(id, signee) #     if res: #    resHtml += "&lt;p&gt; ({0}, {1})&lt;/p&gt;".format(userName, res) #   else: #    if signee.lower() == actual.lower(): #      -   resHtml += '&lt;input type="hidden" name="id" value="{0}"&gt;'.format(id) resHtml += '&lt;input type="hidden" name="signee" value="{0}"&gt;'.format(signee) resHtml += "   &lt;input type=\"submit\" value=\"{0}\"&gt;".format(userName) else: #      -    resHtml += "   &lt;input disabled type=\"submit\" value=\"{0}\"&gt;".format(userName) resHtml += "&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;" #   HTML sys.stdout.buffer.write(b'Content-Type: text/html;charset=utf-8\n\n') sys.stdout.buffer.write(resHtml.encode("utf-8"))</span></span></code> </pre> <br><h4 id="skript-obrabotchik">  Skript "Handler" </h4><br><p>  Die Aufgabe des Handlers ist sehr einfach - das Dr√ºcken der Schaltfl√§che "Zustimmen" zu beheben.  Leiten Sie dann zur√ºck zu der Seite, von der die Anfrage stammt. Beim Rendern der Seite wird die Tatsache der Koordination bereits ber√ºcksichtigt (siehe Beschreibung oben). </p><br><p>  Ein Beispiel (abgek√ºrzt) Skript "Handler" (die Vollversion - siehe Github) </p><br><pre> <code class="python hljs">form = cgi.FieldStorage() signee = form[<span class="hljs-string"><span class="hljs-string">"signee"</span></span>].value <span class="hljs-comment"><span class="hljs-comment">#   id = form["id"].value #  ,    addSignDate(id, signee) #    resHtml = """ &lt;html&gt; &lt;head&gt; &lt;meta http-equiv="refresh" content="5;url=http://wiki.alfastrah.ru/display/DIT/{0}"&gt; &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt; &lt;title&gt; &lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt;    &lt;b&gt;{0}&lt;/b&gt;  &lt;b&gt;{1}&lt;/b&gt; . &lt;br&gt;      ...&lt;/p&gt; &lt;/body&gt; &lt;/html&gt; """.format(id, signee) sys.stdout.buffer.write(b'Content-Type: text/html;charset=utf-8\n\n') sys.stdout.buffer.write(resHtml.encode("utf-8"))</span></span></code> </pre> <br><h4 id="stranica-v-confluence">  Seite im Zusammenfluss </h4><br><p>  Die Seite in Confluence enth√§lt drei HTML-Makro-Include mit unterschiedlichen Parametern (siehe Code unten) und sieht in der einfachsten Version folgenderma√üen aus: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/7ba/788/498/7ba788498511262c7e13618503eae77e.png" alt="Bild"></p><br><p>  Seitencode im Wiki-Markup-Format - hier sehen Sie die Parameter </p><br><pre> <code class="plaintext hljs">&lt;h1&gt; &lt;/h1&gt; &lt;p&gt; ,  &lt;/p&gt; &lt;h1&gt; &lt;/h1&gt; &lt;ul&gt; &lt;li&gt; &lt;ac:structured-macro ac:macro-id="..." ac:name="html-include" ac:schema-version="1"&gt; &lt;ac:parameter ac:name="url"&gt; &lt;ri:url ri:value="http://z14-0510-wiksap.vesta.ru/misc/sign_btn.py?signee=boss&amp;amp;actual=korolevmv&amp;amp;id=wikitools_sign"/&gt; &lt;/ac:parameter&gt; &lt;/ac:structured-macro&gt; &lt;/li&gt; &lt;li&gt; &lt;ac:structured-macro ac:macro-id="..." ac:name="html-include" ac:schema-version="1"&gt; &lt;ac:parameter ac:name="url"&gt; &lt;ri:url ri:value="http://z14-0510-wiksap.vesta.ru/misc/sign_btn.py?signee=korolevmv&amp;amp;actual=korolevmv&amp;amp;id=wikitools_sign"/&gt; &lt;/ac:parameter&gt; &lt;/ac:structured-macro&gt; &lt;/li&gt; &lt;li&gt; &lt;ac:structured-macro ac:macro-id="..." ac:name="html-include" ac:schema-version="1"&gt; &lt;ac:parameter ac:name="url"&gt; &lt;ri:url ri:value="http://z14-0510-wiksap.vesta.ru/misc/sign_btn.py?signee=maxvar&amp;amp;actual=korolevmv&amp;amp;id=wikitools_sign"/&gt; &lt;/ac:parameter&gt; &lt;/ac:structured-macro&gt; &lt;/li&gt; &lt;/ul&gt;</code> </pre> <br><h3 id="nemnogo-o-nastroyke">  Ein bisschen √ºber das Einrichten </h3><br><p>  Damit das beschriebene Schema funktioniert, muss Folgendes ber√ºcksichtigt werden </p><br><h4 id="nalichie-makrosa-html-include">  Verf√ºgbarkeit von HTML Include-Makro </h4><br><p>  Manchmal ‚Äûverstecken‚Äú Administratoren es - es gibt viele zus√§tzliche Probleme (die andere Seite der M√∂glichkeiten). </p><br><p>  Dieses Makro ist kostenlos und Teil von Confluence. Wenn Sie noch kein Makro haben, wenden Sie sich an die Administratoren. Lassen Sie sie nachsehen ... </p><br><h4 id="belye-spiski-confluence">  Confluence White Lists </h4><br><p>  Confluence f√ºhrt keine Skripte aus, die auf unbekannten Quellen gehostet werden. Der Host, auf dem das Skript gehostet wird, sollte sich in den sogenannten "wei√üen Listen" befinden (wenden Sie sich an die Administratoren).  Dies gilt nur f√ºr das Skript "button" - das Skript des Handlers wird bereits von der Schaltfl√§che aufgerufen, die Confluence-Einschr√§nkungen gelten nicht f√ºr dieses. </p><br><h4 id="vypolnimost-skriptov">  Skriptausf√ºhrung </h4><br><p>  Skripte (Schaltfl√§chen und ein Handler) m√ºssen ausf√ºhrbar sein - kopieren Sie die URL in den Browser, sie sollte funktionieren und HTML generieren. Wenn dies nicht geschehen ist, debuggen Sie sie. </p><br><h4 id="oshibki-v-skriptah">  Skriptfehler </h4><br><p>  Wenn eines der Skripte mit einem Fehler abst√ºrzt - Sie werden nichts Gutes sehen, debuggen Sie ordnungsgem√§√ü, bevor Sie es in Confluence ver√∂ffentlichen. </p><br><h2 id="parametry-skriptov">  Skriptoptionen </h2><br><p>  Ein anfragender Verstand k√∂nnte auf Skriptparameter achten - einerseits sind sie redundant (z. B. der Name der Seite, auf der die Genehmigungsschaltfl√§che platziert ist - ist bekannt, warum sie ausf√ºllen?).  Andererseits sind sie unsicher (der ‚ÄûAngreifer‚Äú in unserem Beispiel kann den Namen des Genehmigenden in seinen eigenen √§ndern oder die Abstimmungsschaltfl√§che √ºberhaupt l√∂schen). </p><br><p>  Redundanz kann durch Benutzermakros "√ºberwunden" werden (ich habe mich lange gefragt - wie k√∂nnen sie praktisch n√ºtzlich sein? Ich werde kurz in einem separaten Artikel schreiben).  Die Sicherheit in Confluence wird durch den Seitenverlauf gew√§hrleistet - alle "Bewegungen" werden aufgezeichnet, Sie k√∂nnen alles √§ndern, in Confluence bleibt ein wunderbarer "Audit-Trail", mit dem Sie detailliert verstehen k√∂nnen, wer was und wann ge√§ndert hat. </p><br><h2 id="vzaimodeystvie-so-stranicey">  Seiteninteraktion </h2><br><p>  In unserer Praxis gab es F√§lle, in denen wir den Seitencode analysieren mussten, um Daten zu sammeln (so haben wir beispielsweise das Projektportfolio verwaltet).  Es ist m√∂glich und nicht einmal zu schwierig.  Evolution√§r sind wir zu dem Schluss gekommen, dass, wenn einige Informationen auf einer Seite nur f√ºr Code ben√∂tigt werden, der diese Informationen interpretiert, diese Informationen leichter sofort im Code selbst formuliert werden k√∂nnen (z. B. in Form von JSON): Das Bearbeiten im Seitenbearbeitungsmodus ist recht einfach wird vom Programm gezeichnet, aber die Einsparungen beim Parsen und die erh√∂hte Zuverl√§ssigkeit sind erheblich. </p><br><h2 id="esche-primery">  Weitere Beispiele </h2><br><p>  Warum sonst haben wir diese Makros (als Ideen - pl√∂tzlich erweist sich etwas als n√ºtzlich) sehr kurz verwendet </p><br><p>  Seitendesign: Wenn Sie die Seite nicht standardisiert gestalten m√∂chten - Markup mit CSS, das im HTML-Block enthalten ist </p><br><p>  <strong>Ferienkalender</strong> : Wir verwenden einen einfachen JS-Kalender, f√ºllen ihn mit Daten von JSON, die wir direkt im Seitencode bearbeiten. Wir erhalten einen sch√∂nen Teller mit aufgeschl√ºsselten Ferien (Jahr, Monat, Woche). </p><br><p>  <strong>Drucken von Aufgabenkarten f√ºr ein Scrum Board</strong> : Wir legen die Parameter (Aufgabennummern in Jira und zus√§tzliche Attribute) im Formular direkt auf der Wiki-Seite (im HTML-Block) fest. Die Serverseite formt die Karten in einer Form, die zum Senden an einen Drucker geeignet ist. </p><br><p>  <strong>Projektportfoliomanagement</strong> : Wir hatten eine solche Idee.  Die Karten wurden direkt im Wiki bewertet (die Scor-Karte ist eine speziell gekennzeichnete Seite). Diese Karten sammelten einen Gro√üblockplan, der wundersch√∂n in Form eines Gantt-Diagramms gezeichnet wurde. </p><br><p>  <strong>Glossar</strong> : Die M√∂glichkeit, Begriffe - Erkl√§rungen f√ºr einzelne W√∂rter einer Seite - aus einem gemeinsamen W√∂rterbuch zu visualisieren und W√∂rterbucheintr√§ge in Form von "Popups" auszugeben.  Das W√∂rterbuch selbst wird automatisch am Ende der Seite gesammelt. </p><br><p>  Diagramme: Wenn Sie ein einfaches Diagramm zeichnen m√ºssen, k√∂nnen Sie dies ganz einfach tun, indem Sie den HTML-Block in eines der Standardpakete (Google Charts, HighCharts usw.) einbetten. </p><br><p>  <strong>Tabellen</strong> : Auf jede Tabelle in Confluence k√∂nnen Sie Datatable "h√§ngen" - wir erhalten eine gefilterte Tabelle mit "Paginierung", sehr sch√∂n und praktisch. </p><br><p>  Die Liste kann lange genug fortgesetzt werden. W√§hrend des Betriebs wurde eine erhebliche Unannehmlichkeit festgestellt: Fehler im Servercode werden schlecht abgefangen - 500 Fehler werden schlecht visualisiert und enthalten praktisch keine Informationen.  Ansonsten experimentieren Sie - es ist sicher genug. </p><br><h2 id="chut-podytozhim">  Zusammenfassend </h2><br><p>  Mit der oben beschriebenen einfachen Methode zur Erh√∂hung der Dynamik von Confluence k√∂nnen Sie viele verschiedene Probleme l√∂sen.  F√ºr die Verwendung sind keine speziellen Werkzeuge und F√§higkeiten erforderlich.  Die Verwendung ist sicher genug.  Ich empfehle es. </p><br><p>  Im n√§chsten Artikel werde ich √ºber die Erfahrungen mit der Verwendung benutzerdefinierter Makros in Confluence sprechen, die meiner Meinung nach mit ihrer Hilfe wirklich verbessert werden k√∂nnen. </p><br><p>  Beim Programmieren ist alles m√∂glich - nur eine Frage der Zeit und der Motivation. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de460929/">https://habr.com/ru/post/de460929/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de460911/index.html">Gutes tun, Schlechtes tun: Mit Go b√∂sen Code schreiben, Teil 2</a></li>
<li><a href="../de460913/index.html">Fototour durch das Museum des Physik- und Energieinstituts in Obninsk</a></li>
<li><a href="../de460915/index.html">Praktisches Datenbankverwaltungssystem</a></li>
<li><a href="../de460923/index.html">Yandex-Testaufgabe</a></li>
<li><a href="../de460925/index.html">Online-Spiel mit echten RC-Robotern in Tschernobyl. Teil 2</a></li>
<li><a href="../de460931/index.html">√úber Dekorateure in Python</a></li>
<li><a href="../de460933/index.html">Sicherheitswoche 30: Datenschutz, Technologie und Gesellschaft</a></li>
<li><a href="../de460935/index.html">Erste Schritte mit dem PVS-Studio Static Analyzer f√ºr Visual C #</a></li>
<li><a href="../de460939/index.html">Longrid √ºber die Geschichte des russischen Bergbaus und die Haltung der Regulierungsbeh√∂rden dazu</a></li>
<li><a href="../de460941/index.html">Gesch√§fts-E-Mail-Kompromiss: Keine Verteidigung gegen Angriffe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>