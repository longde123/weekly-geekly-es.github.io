<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âœŒï¸ ğŸ‘¸ğŸ¿ ğŸ‘¦ğŸ¾ æ’åºæ··ä¹± ğŸœï¸ ğŸ›¶ ğŸ¤±ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ­£å¦‚å®è·µæ‰€è¡¨æ˜çš„é‚£æ ·ï¼Œå‡ºç°é—®é¢˜çš„ç»å¤§éƒ¨åˆ†ä¸æ˜¯å› ä¸ºè§£å†³æ–¹æ¡ˆæœ¬èº«ï¼Œè€Œæ˜¯å› ä¸ºç³»ç»Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚ å¦‚æœç³»ç»Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ··ä¹±ï¼Œé‚£ä¹ˆï¼Œç”±äºæ‚¨æ²¡æœ‰å°è¯•å¾ˆå¥½åœ°ç¼–å†™å•ä¸ªç»„ä»¶ï¼Œå› æ­¤æ•´ä¸ªç³»ç»Ÿå°†å‘ç”Ÿæ•…éšœã€‚ 


 æ³¨æ„äº‹é¡¹ é‡Œé¢çš„è‡ªè¡Œè½¦ã€‚ 
 é—®é¢˜æˆ–é—®é¢˜é™ˆè¿° 


 ä¸ä¹…å‰ï¼Œå®ƒç¢°å·§åœ¨ä¸€å®¶å…¬å¸çš„é¡¹ç›®ä¸Šå·¥ä½œï¼Œè¯¥...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ’åºæ··ä¹±</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442380/"><p>æ­£å¦‚å®è·µæ‰€è¡¨æ˜çš„é‚£æ ·ï¼Œå‡ºç°é—®é¢˜çš„ç»å¤§éƒ¨åˆ†ä¸æ˜¯å› ä¸ºè§£å†³æ–¹æ¡ˆæœ¬èº«ï¼Œè€Œæ˜¯å› ä¸ºç³»ç»Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚ å¦‚æœç³»ç»Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ··ä¹±ï¼Œé‚£ä¹ˆï¼Œç”±äºæ‚¨æ²¡æœ‰å°è¯•å¾ˆå¥½åœ°ç¼–å†™å•ä¸ªç»„ä»¶ï¼Œå› æ­¤æ•´ä¸ªç³»ç»Ÿå°†å‘ç”Ÿæ•…éšœã€‚ </p><br><p> æ³¨æ„äº‹é¡¹ é‡Œé¢çš„è‡ªè¡Œè½¦ã€‚ </p><a name="habracut"></a><br><h1 id="problematika-ili-postanovka-zadachi"> é—®é¢˜æˆ–é—®é¢˜é™ˆè¿° </h1><br><p> ä¸ä¹…å‰ï¼Œå®ƒç¢°å·§åœ¨ä¸€å®¶å…¬å¸çš„é¡¹ç›®ä¸Šå·¥ä½œï¼Œè¯¥å…¬å¸å°†CRMï¼ŒERMç³»ç»Ÿå’Œè¡ç”Ÿäº§å“ä¹‹ç±»çš„ä¹è¶£å¸¦ç»™äº†å¤§ä¼—ã€‚ æ­¤å¤–ï¼Œè¯¥å…¬å¸å‘å¸ƒäº†ä¸€ç§ç›¸å½“å…¨é¢çš„äº§å“ï¼Œä»æ”¶é“¶æœºè½¯ä»¶åˆ°å‘¼å«ä¸­å¿ƒï¼Œå¯ä»¥ç§Ÿç”¨æœ€å¤š200äººçš„è¯åŠ¡å‘˜ã€‚ </p><br><p> æˆ‘æœ¬äººè‡´åŠ›äºå‘¼å«ä¸­å¿ƒçš„å‰ç«¯åº”ç”¨ç¨‹åºã€‚ </p><br><p> ä¸éš¾æƒ³è±¡ï¼Œæ­£æ˜¯æ¥è‡ªæ‰€æœ‰ç³»ç»Ÿç»„ä»¶çš„ä¿¡æ¯æ‰æµå…¥æ“ä½œå‘˜çš„åº”ç”¨ç¨‹åºã€‚ è€Œä¸”ï¼Œå¦‚æœæˆ‘ä»¬è€ƒè™‘åˆ°å®ƒä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„æ“ä½œå‘˜ï¼Œè€Œæ˜¯ä¸€ä¸ªç»ç†å’Œç®¡ç†å‘˜çš„äº‹å®ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥æƒ³è±¡åº”ç”¨ç¨‹åºåº”è¯¥â€œæ¶ˆåŒ–â€å¹¶ç›¸äº’å…³è”çš„é€šä¿¡å’Œä¿¡æ¯é‡ã€‚ </p><br><p> å½“è¯¥é¡¹ç›®å·²ç»å¯åŠ¨ç”šè‡³è¿è¡Œç¨³å®šæ—¶ï¼Œç³»ç»Ÿçš„é€æ˜æ€§é—®é¢˜å°±å‡ºç°äº†ã€‚ </p><br><p> è¿™å°±æ˜¯é‡ç‚¹ã€‚ æœ‰å¾ˆå¤šç»„ä»¶ï¼Œå®ƒä»¬éƒ½ä½¿ç”¨å…¶æ•°æ®æºã€‚ ä½†æ˜¯å‡ ä¹æ‰€æœ‰è¿™äº›ç»„ä»¶éƒ½æ›¾ç»è¢«ç¼–å†™ä¸ºç‹¬ç«‹äº§å“ã€‚ é‚£ä¸æ˜¯ä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç»„æˆéƒ¨åˆ†ï¼Œè€Œæ˜¯ä½œä¸ºå•ç‹¬çš„é”€å”®å†³å®šã€‚ ç»“æœï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰å•ä¸€çš„ï¼ˆç³»ç»Ÿï¼‰APIï¼Œä¹Ÿæ²¡æœ‰å…±åŒçš„é€šä¿¡æ ‡å‡†ã€‚ </p><br><p> æˆ‘ä¼šè§£é‡Šã€‚ æŸäº›ç»„ä»¶å‘é€JSONï¼Œâ€œæŸäººâ€å‘é€å¸¦æœ‰é”®çš„è¡Œï¼šé‡Œé¢çš„å€¼ï¼Œâ€œæŸäººâ€é€šå¸¸å‘é€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶éšä¾¿ä½¿ç”¨å®ƒã€‚ ä½†æ˜¯ï¼Œå‘¼å«ä¸­å¿ƒçš„æœ€ç»ˆåº”ç”¨ç¨‹åºå¿…é¡»å®Œå…¨æŒæ¡å¹¶ä»¥æŸç§æ–¹å¼å¤„ç†å®ƒã€‚ å—¯ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œç³»ç»Ÿä¸­æ²¡æœ‰é“¾æ¥å¯ä»¥è¯†åˆ«å‡ºæ•°æ®æ ¼å¼/ç»“æ„å·²æ›´æ”¹ã€‚ å¦‚æœæŸä¸ªç»„ä»¶æ˜¨å¤©å‘é€äº†JSONï¼Œè€Œä»Šå¤©å†³å®šå‘é€äºŒè¿›åˆ¶æ–‡ä»¶-æ²¡äººä¼šçœ‹åˆ°è¿™ä¸€ç‚¹ã€‚ ä»…æœ€ç»ˆåº”ç”¨ç¨‹åºå°†æŒ‰é¢„æœŸå¼€å§‹å´©æºƒã€‚ </p><br><p> å¾ˆå¿«å°±å˜å¾—æ¸…æ¥šäº†ï¼ˆå› ä¸ºæˆ‘å‘¨å›´çš„äººï¼Œè€Œä¸æ˜¯æˆ‘ï¼Œå› ä¸ºæˆ‘åœ¨è®¾è®¡é˜¶æ®µå°±è°ˆåˆ°äº†è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œç»„ä»¶ä¹‹é—´ç¼ºä¹â€œç»Ÿä¸€çš„é€šä¿¡è¯­è¨€â€ä¼šå¯¼è‡´ä¸¥é‡çš„é—®é¢˜ã€‚ </p><br><p> æœ€ç®€å•çš„æƒ…å†µæ˜¯å®¢æˆ·ç«¯è¦æ±‚æ›´æ”¹æŸäº›æ•°æ®é›†ã€‚ ä¾‹å¦‚ï¼Œä»–ä»¬å°†ä»»åŠ¡åˆ†ç»™å¹´è½»äººï¼Œåè€…â€œæŒæœ‰â€ç”¨äºå¤„ç†å•†å“/æœåŠ¡æ•°æ®åº“çš„ç»„ä»¶ã€‚ ä»–å®Œæˆäº†è‡ªå·±çš„å·¥ä½œï¼Œå®ç°äº†æ–°çš„æ•°æ®é›†ï¼Œå¯¹ä»–è€Œè¨€ï¼Œæ··è›‹ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚ ä½†æ˜¯ï¼Œæ›´æ–°ä¹‹åçš„ç¬¬äºŒå¤©â€¦â€¦å“¦â€¦â€¦å‘¼å«ä¸­å¿ƒä¸­çš„åº”ç”¨ç¨‹åºçªç„¶å¼€å§‹æ— æ³•æ­£å¸¸å·¥ä½œã€‚ </p><br><p> æ‚¨å¯èƒ½å·²ç»çŒœåˆ°äº†ã€‚ æˆ‘ä»¬çš„è‹±é›„ä¸ä»…æ›´æ”¹äº†æ•°æ®é›†ï¼Œè¿˜æ›´æ”¹äº†å…¶ç»„ä»¶å‘é€åˆ°ç³»ç»Ÿçš„æ•°æ®ç»“æ„ã€‚ ç»“æœï¼Œå‘¼å«ä¸­å¿ƒåº”ç”¨ç¨‹åºæ ¹æœ¬æ— æ³•å†ä½¿ç”¨æ­¤ç»„ä»¶ï¼Œå¹¶ä¸”å…¶ä»–ä¾èµ–é¡¹æ²¿é“¾é£è¡Œã€‚ </p><br><p> ä»–ä»¬å¼€å§‹è€ƒè™‘æˆ‘ä»¬å®é™…ä¸Šæƒ³èµ°çš„è·¯ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ä¸ºå¯èƒ½çš„è§£å†³æ–¹æ¡ˆåˆ¶å®šäº†ä»¥ä¸‹è¦æ±‚ï¼š </p><br><p>  <strong>é¦–å…ˆ</strong> ï¼Œæ•°æ®ç»“æ„ä¸­çš„ä»»ä½•æ›´æ”¹åº”ç«‹å³åœ¨ç³»ç»Ÿä¸­â€œçªå‡ºæ˜¾ç¤ºâ€ã€‚ å¦‚æœæœ‰äººåœ¨æŸå¤„è¿›è¡Œäº†æ›´æ”¹ï¼Œè€Œè¿™äº›æ›´æ”¹ä¸ç³»ç»Ÿçš„é¢„æœŸä¸å…¼å®¹ï¼Œåˆ™åœ¨ç»„ä»¶æµ‹è¯•é˜¶æ®µåº”å‘ç”Ÿä¸€ä¸ªé”™è¯¯ï¼Œè¯¥é”™è¯¯å·²è¢«æ›´æ”¹ã€‚ </p><br><p>  <strong>ç¬¬äºŒä¸ª</strong> ã€‚ ä¸ä»…åº”åœ¨ç¼–è¯‘æœŸé—´æ£€æŸ¥æ•°æ®ç±»å‹ï¼Œè¿˜åº”åœ¨è¿è¡Œæ—¶æ£€æŸ¥æ•°æ®ç±»å‹ã€‚ </p><br><p>  <strong>ç¬¬ä¸‰</strong> ã€‚ ç”±äºå¤§é‡å…·æœ‰å®Œå…¨ä¸åŒæŠ€èƒ½æ°´å¹³çš„äººå‘˜åœ¨ç»„ä»¶ä¸Šå·¥ä½œï¼Œå› æ­¤æè¿°è¯­è¨€åº”è¯¥æ›´ç®€å•ã€‚ </p><br><p>  <strong>ç¬¬å››</strong> ã€‚ æ— è®ºé‡‡ç”¨å“ªç§è§£å†³æ–¹æ¡ˆï¼Œéƒ½åº”å°½å¯èƒ½æ–¹ä¾¿åœ°ä½¿ç”¨å®ƒã€‚ å¦‚æœå¯èƒ½ï¼ŒIDEåº”å°½å¯èƒ½çªå‡ºæ˜¾ç¤ºã€‚ </p><br><p> é¦–å…ˆæƒ³åˆ°çš„æ˜¯å®ç°protobufã€‚ ç®€å•ï¼Œæ˜“è¯»ä¸”å®¹æ˜“ã€‚ ä¸¥æ ¼çš„æ•°æ®é”®å…¥ã€‚ è¿™ä¼¼ä¹æ˜¯åŒ»ç”Ÿå‘½ä»¤çš„ã€‚ ä½†å¯æƒœï¼Œå¹¶éæ‰€æœ‰protobufè¯­æ³•çœ‹èµ·æ¥éƒ½å¾ˆç®€å•ã€‚ æ­¤å¤–ï¼Œå³ä½¿æ˜¯å·²ç¼–è¯‘çš„åè®®ä¹Ÿéœ€è¦é™„åŠ çš„åº“ï¼Œä½†æ˜¯protobufä¸æ”¯æŒJavascriptï¼Œè¿™æ˜¯ç¤¾åŒºå·¥ä½œçš„ç»“æœã€‚ æ€»çš„æ¥è¯´ï¼Œä»–ä»¬æ‹’ç»äº†ã€‚ </p><br><p> ç„¶åå‡ºç°äº†ç”¨JSONæè¿°åè®®çš„æƒ³æ³•ã€‚ å¥½å§ï¼Œæœ‰å¤šå°‘å®¹æ˜“ï¼Ÿ </p><br><p> å¥½å§ï¼Œç„¶åæˆ‘è¾èŒäº†ã€‚ åœ¨è¿™ä¸ªèŒä½ä¸Šæœ¬è¯¥å®Œæˆçš„ï¼Œå› ä¸ºåœ¨æˆ‘ç¦»å¼€åï¼Œæ²¡æœ‰å…¶ä»–äººå¼€å§‹ç‰¹åˆ«å…³æ³¨è¿™ä¸ªé—®é¢˜ã€‚ </p><br><p> ä½†æ˜¯ï¼Œè€ƒè™‘åˆ°å‡ ä¸ªä¸ªäººé¡¹ç›®ï¼Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡é—®é¢˜å†æ¬¡å‘æŒ¥äº†å…¨éƒ¨æ½œåŠ›ï¼Œæˆ‘å†³å®šè‡ªå·±å¼€å§‹å®æ–½è¯¥æƒ³æ³•ã€‚ ä¸‹é¢å°†è®¨è®ºä»€ä¹ˆã€‚ </p><br><p> å› æ­¤ï¼Œæˆ‘æè¯·æ‚¨æ³¨æ„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ceres</a>é¡¹ç›®ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š </p><br><ul><li> åè®®ç”Ÿæˆå™¨ </li><li> æä¾›è€… </li><li> å®¢æˆ· </li><li> å®æ–½è¿è¾“ </li></ul><br><h1 id="protokol"> åè®®ä¹¦ </h1><br><p> æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯åšåˆ°ï¼š </p><br><ul><li> åœ¨ç³»ç»Ÿä¸­è®¾ç½®æ¶ˆæ¯ç»“æ„å¾ˆå®¹æ˜“ã€‚ </li><li> ç¡®å®šæ‰€æœ‰æ¶ˆæ¯å­—æ®µçš„æ•°æ®ç±»å‹å¾ˆå®¹æ˜“ã€‚ </li><li> å¯ä»¥å®šä¹‰è¾…åŠ©å®ä½“å¹¶å¼•ç”¨å®ƒä»¬ã€‚ </li><li> å½“ç„¶ï¼ŒIDEä¼šçªå‡ºæ˜¾ç¤ºæ‰€æœ‰è¿™äº›å†…å®¹ </li></ul><br><p> æˆ‘è®¤ä¸ºï¼Œä»¥ä¸€ç§å®Œå…¨è‡ªç„¶çš„æ–¹å¼ï¼Œä½œä¸ºå°†åè®®è½¬æ¢æˆçš„è¯­è¨€ï¼ŒTypescriptè¢«é€‰æ‹©ä¸ºéçº¯Javascriptã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåè®®ç”Ÿæˆå™¨æ‰€åšçš„åªæ˜¯å°†JSONè½¬æ¢ä¸ºTypescriptã€‚ </p><br><p> è¦æè¿°ç³»ç»Ÿä¸­å¯ç”¨çš„æ¶ˆæ¯ï¼Œæ‚¨åªéœ€çŸ¥é“ä»€ä¹ˆæ˜¯JSONã€‚ æˆ‘æ•¢è‚¯å®šï¼Œæ²¡æœ‰äººæœ‰ä»»ä½•é—®é¢˜ã€‚ </p><br><p> é™¤äº†æä¾›Hello Worldä¹‹å¤–ï¼Œæˆ‘è¿˜æä¾›äº†ä¸å°‘è®²ç©¶çš„ç¤ºä¾‹-èŠå¤©ã€‚ </p><br><pre><code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"Events"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"NewMessage"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"message"</span></span>: <span class="hljs-string"><span class="hljs-string">"ChatMessage"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"UsersListUpdated"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"users"</span></span>: <span class="hljs-string"><span class="hljs-string">"Array&lt;User&gt;"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"Requests"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"GetUsers"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"AddUser"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"user"</span></span>: <span class="hljs-string"><span class="hljs-string">"User"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"Responses"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"UsersList"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"users"</span></span>: <span class="hljs-string"><span class="hljs-string">"Array&lt;User&gt;"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"AddUserResult"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"error?"</span></span>: <span class="hljs-string"><span class="hljs-string">"asciiString"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"ChatMessage"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"nickname"</span></span>: <span class="hljs-string"><span class="hljs-string">"asciiString"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"message"</span></span>: <span class="hljs-string"><span class="hljs-string">"utf8String"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"created"</span></span>: <span class="hljs-string"><span class="hljs-string">"datetime"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"User"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"nickname"</span></span>: <span class="hljs-string"><span class="hljs-string">"asciiString"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.1"</span></span> }</code> </pre> <br><p> ä¸€åˆ‡éƒ½éå¸¸ç®€å•ã€‚ æˆ‘ä»¬æœ‰å‡ ä¸ªNewMessageå’ŒUsersListUpdatedäº‹ä»¶ã€‚ ä»¥åŠå‡ ä¸ªUsersListå’ŒAddUserResultè¯·æ±‚ã€‚ è¿˜æœ‰ä¸¤ä¸ªå®ä½“ï¼šChatMessageå’ŒUserã€‚ </p><br><p> å¦‚æ‚¨æ‰€è§ï¼Œæè¿°éå¸¸é€æ˜ä¸”æ˜“äºç†è§£ã€‚ å…³äºè§„åˆ™çš„ä¸€äº›çŸ¥è¯†ã€‚ </p><br><ul><li>  JSONä¸­çš„å¯¹è±¡å°†æˆä¸ºç”Ÿæˆçš„åè®®ä¸­çš„ç±» </li><li> å±æ€§å€¼æ˜¯æ•°æ®ç±»å‹å®šä¹‰æˆ–å¯¹ç±»ï¼ˆå®ä½“ï¼‰çš„å¼•ç”¨ </li><li> ä»ç”Ÿæˆåè®®çš„è§’åº¦æ¥çœ‹ï¼ŒåµŒå¥—å¯¹è±¡å°†æˆä¸ºâ€œåµŒå¥—â€ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåµŒå¥—å¯¹è±¡å°†ç»§æ‰¿å…¶çˆ¶çº§çš„æ‰€æœ‰å±æ€§ã€‚ </li></ul><br><p> ç°åœ¨ï¼Œæ‚¨éœ€è¦åšçš„å°±æ˜¯ç”Ÿæˆä¸€ä¸ªåè®®ä»¥å¼€å§‹ä½¿ç”¨å®ƒã€‚ </p><br><pre> <code class="bash hljs">npm install ceres.protocol -g ceres.protocol -s chat.protocol.json -o chat.protocol.ts -r</code> </pre> <br><p> ç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°äº†Typescriptç”Ÿæˆçš„åè®®ã€‚ æˆ‘ä»¬è¿æ¥å¹¶ä½¿ç”¨ï¼š </p><br><img src="https://habrastorage.org/getpro/habr/post_images/c1b/826/96a/c1b82696aecdf2ccc5b5ededd9e7818b.gif" alt="å›¾ç‰‡"><br><p> å› æ­¤ï¼Œè¯¥åè®®å·²ç»ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€äº›å¸®åŠ©ï¼š </p><br><ul><li>  IDEçªå‡ºæ˜¾ç¤ºäº†åè®®ä¸­çš„å†…å®¹ã€‚  IDEè¿˜çªå‡ºæ˜¾ç¤ºäº†æ‰€æœ‰é¢„æœŸçš„å±æ€§ã€‚ </li><li>  Typescriptï¼Œå®ƒè‚¯å®šä¼šå‘Šè¯‰æˆ‘ä»¬æ•°æ®ç±»å‹æ˜¯å¦æœ‰é—®é¢˜ã€‚ å½“ç„¶ï¼Œè¿™æ˜¯åœ¨å¼€å‘é˜¶æ®µå®Œæˆçš„ï¼Œä½†æ˜¯åè®®æœ¬èº«å·²ç»åœ¨è¿è¡Œæ—¶æ£€æŸ¥æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”å¦‚æœæ£€æµ‹åˆ°è¿è§„ï¼Œåˆ™å¼•å‘å¼‚å¸¸ </li><li> é€šå¸¸ï¼Œæ‚¨å¯ä»¥å¿˜è®°éªŒè¯ã€‚ è¯¥åè®®å°†è¿›è¡Œæ‰€æœ‰å¿…è¦çš„æ£€æŸ¥ã€‚ </li><li> ç”Ÿæˆçš„åè®®ä¸éœ€è¦ä»»ä½•å…¶ä»–åº“ã€‚ ä»–éœ€è¦å·¥ä½œçš„æ‰€æœ‰å†…å®¹ï¼Œå·²ç»åŒ…å«åœ¨å†…ã€‚ è€Œä¸”éå¸¸æ–¹ä¾¿ã€‚ </li></ul><br><blockquote> æ˜¯çš„ï¼Œè‡³å°‘å¯ä»¥è¯´ï¼Œæ‰€ç”Ÿæˆåè®®çš„å¤§å°å¯èƒ½ä¼šè®©æ‚¨æ„Ÿåˆ°æƒŠè®¶ã€‚ ä½†æ˜¯ï¼Œä¸è¦å¿˜äº†å‹ç¼©ï¼Œç”Ÿæˆçš„åè®®æ–‡ä»¶å¾ˆé€‚åˆè‡ªå·±ä½¿ç”¨ã€‚ </blockquote><p> ç°åœ¨æˆ‘ä»¬å¯ä»¥â€œæ‰“åŒ…â€é‚®ä»¶å¹¶å‘é€ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Protocol <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../protocol/protocol.chat'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> message: Protocol.ChatMessage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Protocol.ChatMessage({ <span class="hljs-attr"><span class="hljs-attr">nickname</span></span>: <span class="hljs-string"><span class="hljs-string">'noname'</span></span>, <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>, <span class="hljs-attr"><span class="hljs-attr">created</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>() }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> packet: <span class="hljs-built_in"><span class="hljs-built_in">Uint8Array</span></span> = message.stringify(); <span class="hljs-comment"><span class="hljs-comment">// Send packet somewhere</span></span></code> </pre> <br><p> åœ¨æ­¤å¤„è¿›è¡Œä¿ç•™å¾ˆé‡è¦ï¼Œæ•°æ®åŒ…å°†æ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œä»æµé‡è´Ÿè½½çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯éå¸¸å¥½çš„ä¸”æ­£ç¡®çš„ï¼Œå› ä¸ºå‘é€ç›¸åŒçš„JSONâ€œæˆæœ¬â€å½“ç„¶ä¼šæ›´æ˜‚è´µã€‚ ä½†æ˜¯ï¼Œè¯¥åè®®æœ‰ä¸€ä¸ªçªé—¨-åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œå®ƒå°†ç”Ÿæˆå¯è¯»çš„JSONï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å¯ä»¥â€œæŸ¥çœ‹â€æµé‡å¹¶æŸ¥çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ </p><br><p> è¿™æ˜¯åœ¨è¿è¡Œæ—¶ç›´æ¥å®Œæˆçš„ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Protocol <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../protocol/protocol.chat'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> message: Protocol.ChatMessage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Protocol.ChatMessage({ <span class="hljs-attr"><span class="hljs-attr">nickname</span></span>: <span class="hljs-string"><span class="hljs-string">'noname'</span></span>, <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>, <span class="hljs-attr"><span class="hljs-attr">created</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>() }); <span class="hljs-comment"><span class="hljs-comment">// Switch to debug mode Protocol.Protocol.state.debug(true); // Now packet will be present as JSON string const packet: string = message.stringify(); // Send packet somewhere</span></span></code> </pre> <br><p> åœ¨æœåŠ¡å™¨ï¼ˆæˆ–ä»»ä½•å…¶ä»–æ”¶ä»¶äººï¼‰ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å°†é‚®ä»¶æ‹†åŒ…ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Protocol <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../protocol/protocol.chat'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> smth = Protocol.parse(packet); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (smth <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// Oops. Something wrong with this packet. } if (Protocol.ChatMessage.instanceOf(smth) === true) { // This is chat message }</span></span></code> </pre> <br><p> è¯¥åè®®æ”¯æŒæ‰€æœ‰ä¸»è¦æ•°æ®ç±»å‹ï¼š </p><br><table><thead><tr><th> å‹å¼ </th><th> ä»·å€¼è§‚ </th><th> å†…å®¹æè¿° </th><th> å¤§å°ï¼Œå­—èŠ‚ </th></tr></thead><tbody><tr><td>  utf8String </td><td></td><td>  UTF8ç¼–ç çš„å­—ç¬¦ä¸² </td><td>  X </td></tr><tr><td>  asciiString </td><td></td><td>  ASCIIå­—ç¬¦ä¸² </td><td>  1ä¸ªå­—ç¬¦-1ä¸ªå­—èŠ‚ </td></tr><tr><td>  int8 </td><td>  -128è‡³127 </td><td></td><td>  1ä¸ª </td></tr><tr><td>  int16 </td><td>  -32768è‡³32767 </td><td></td><td>  2 </td></tr><tr><td>  int32 </td><td>  -2147483648è‡³2147483647 </td><td></td><td>  4 </td></tr><tr><td>  uint8 </td><td>  0è‡³255 </td><td></td><td>  1ä¸ª </td></tr><tr><td>  uint16 </td><td>  0è‡³65535 </td><td></td><td>  2 </td></tr><tr><td>  uint32 </td><td>  0è‡³4294967295 </td><td></td><td>  4 </td></tr><tr><td>  float32 </td><td>  1.2x10 <sup>-38</sup>è‡³3.4x10 <sup>38</sup> </td><td></td><td>  4 </td></tr><tr><td>  float64 </td><td>  <sup>5.0x10 -324</sup>è‡³<sup>1.8x10</sup> <sup>308</sup> </td><td></td><td>  8 </td></tr><tr><td> å¸ƒå°”å€¼ </td><td></td><td></td><td>  1ä¸ª </td></tr></tbody></table><br><p> åœ¨åè®®ä¸­ï¼Œè¿™äº›æ•°æ®ç±»å‹ç§°ä¸ºåŸå§‹æ•°æ®ã€‚ ä½†æ˜¯ï¼Œè¯¥åè®®çš„å¦ä¸€ä¸ªåŠŸèƒ½æ˜¯å®ƒå…è®¸æ‚¨æ·»åŠ è‡ªå·±çš„æ•°æ®ç±»å‹ï¼ˆç§°ä¸ºâ€œå…¶ä»–æ•°æ®ç±»å‹â€ï¼‰ã€‚ </p><br><p> ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°<strong>ChatMessage</strong>å…·æœ‰ä¸€ä¸ªå¸¦æœ‰<strong>æ—¥æœŸæ—¶é—´</strong>æ•°æ®ç±»å‹çš„<strong>åˆ›å»º</strong>å­—æ®µã€‚ åœ¨åº”ç”¨ç¨‹åºçº§åˆ«-æ­¤ç±»å‹å¯¹åº”äº<strong>Date</strong> ï¼Œå¹¶ä¸”åè®®å†…éƒ¨å°†å…¶å­˜å‚¨ä¸º<strong>uint32</strong> ï¼ˆå¹¶å‘é€ï¼‰ã€‚ </p><br><p> å°†ç±»å‹æ·»åŠ åˆ°åè®®ä¸­éå¸¸ç®€å•ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦å…·æœ‰<strong>ç”µå­é‚®ä»¶</strong>æ•°æ®ç±»å‹ï¼Œè¯·å¯¹åè®®ä¸­çš„ä»¥ä¸‹æ¶ˆæ¯è¯´ï¼š </p><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"User"</span></span>: { <span class="hljs-string"><span class="hljs-string">"nickname"</span></span>: <span class="hljs-string"><span class="hljs-string">"asciiString"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"email"</span></span> }, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.1"</span></span> }</code> </pre> <br><p> æ‚¨æ‰€éœ€è¦åšçš„å°±æ˜¯ä¸ºç”µå­é‚®ä»¶ç±»å‹ç¼–å†™ä¸€ä¸ªå®šä¹‰ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AdvancedTypes: { [key:string]: any} = { <span class="hljs-attr"><span class="hljs-attr">email</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// Binary type or primitive type binaryType : 'asciiString', // Initialization value. This value is used as default value init : '""', // Parse value. We should not do any extra decode operations with it parse : (value: string) =&gt; { return value; }, // Also we should not do any encoding operations with it serialize : (value: string) =&gt; { return value; }, // Typescript type tsType : 'string', // Validation function to valid value validate : (value: string) =&gt; { if (typeof value !== 'string'){ return false; } if (value.trim() === '') { // Initialization value is "''", so we allow use empty string. return true; } const validationRegExp = /^(([^&lt;&gt;()\[\]\\.,;:\s@"]+(\.[^&lt;&gt;()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/gi; return validationRegExp.test(value); }, } };</span></span></code> </pre> <br><p> ä»…æ­¤è€Œå·²ã€‚ é€šè¿‡ç”Ÿæˆåè®®ï¼Œæˆ‘ä»¬è·å¾—äº†å¯¹æ–°<strong>ç”µå­é‚®ä»¶</strong>æ•°æ®ç±»å‹çš„æ”¯æŒã€‚ å½“æˆ‘ä»¬å°è¯•ä½¿ç”¨é”™è¯¯çš„åœ°å€åˆ›å»ºå®ä½“æ—¶ï¼Œä¼šå‡ºç°é”™è¯¯ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> user: Protocol.User = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Protocol.User({ <span class="hljs-attr"><span class="hljs-attr">nickname</span></span>: <span class="hljs-string"><span class="hljs-string">'Brad'</span></span>, <span class="hljs-attr"><span class="hljs-attr">email</span></span>: <span class="hljs-string"><span class="hljs-string">'not_valid_email'</span></span> }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(user);</code> </pre> <br><p> å–”... </p><br><pre> <code class="bash hljs">Error: Cannot create class of <span class="hljs-string"><span class="hljs-string">"User"</span></span> due error(s): - Property <span class="hljs-string"><span class="hljs-string">"email"</span></span> has wrong value; validation was failed with value <span class="hljs-string"><span class="hljs-string">"not_valid_email"</span></span>.</code> </pre> <br><p> å› æ­¤ï¼Œè¯¥åè®®æ ¹æœ¬ä¸å…è®¸â€œä¸è‰¯â€æ•°æ®è¿›å…¥ç³»ç»Ÿã€‚ </p><br><p> è¯·æ³¨æ„ï¼Œåœ¨å®šä¹‰æ–°çš„æ•°æ®ç±»å‹æ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šäº†å‡ ä¸ªå…³é”®å±æ€§ï¼š </p><br><ul><li>  <strong>binaryType-</strong>å¯¹åŸå§‹æ•°æ®ç±»å‹çš„å¼•ç”¨ï¼Œåº”ç”¨äºå­˜å‚¨ï¼Œç¼–ç /è§£ç æ•°æ®ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æŒ‡ç¤ºè¯¥åœ°å€æ˜¯ä¸€ä¸ªasciiå­—ç¬¦ä¸²ã€‚ </li><li>  <strong>tsType</strong>æ˜¯å¯¹Javascriptç±»å‹çš„å¼•ç”¨ï¼Œå³åœ¨Javascriptç¯å¢ƒä¸­åº”å¦‚ä½•è¡¨ç¤ºæ•°æ®ç±»å‹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ­£åœ¨è°ˆè®º<strong>å­—ç¬¦ä¸²</strong> </li><li> è¿˜å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä»…åœ¨ç”Ÿæˆåè®®æ—¶æ‰éœ€è¦å®šä¹‰æ–°çš„æ•°æ®ç±»å‹ã€‚ åœ¨è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬è·å¾—äº†å·²åŒ…å«æ–°æ•°æ®ç±»å‹çš„ç”Ÿæˆåè®®ã€‚ </li></ul><br><blockquote> æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ceres.protocolä¸Š</a>æŸ¥çœ‹æœ‰å…³æ‰€æœ‰åè®®åŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ã€‚ </blockquote><br><h1 id="provayder-i-klient"> æä¾›è€…å’Œå®¢æˆ· </h1><br><p> æ€»çš„æ¥è¯´ï¼Œåè®®æœ¬èº«å¯ä»¥ç”¨äºç»„ç»‡é€šä¿¡ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è°ˆè®ºçš„æ˜¯æµè§ˆå™¨å’Œnodejsï¼Œåˆ™æä¾›ç¨‹åºå’Œå®¢æˆ·ç«¯éƒ½å¯ç”¨ã€‚ </p><br><h2 id="klient"> é¡¾å®¢ </h2><br><h3 id="sozdanie"> åˆ›ä½œ </h3><br><p> è¦åˆ›å»ºå®¢æˆ·ç«¯ï¼Œæ‚¨éœ€è¦å®¢æˆ·ç«¯å’Œä¼ è¾“ã€‚ </p><br><p> å®‰è£…æ–¹å¼ </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Install consumer (client) npm install ceres.consumer --save # Install transport npm install ceres.consumer.browser.ws --save</span></span></code> </pre> <br><p> åˆ›ä½œ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Transport, { ConnectionParameters } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ceres.consumer.browser.ws'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Consumer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ceres.consumer'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Create transport const transport:Transport = new Transport(new ConnectionParameters({ host: 'http://localhost', port: 3005, wsHost: 'ws://localhost', wsPort: 3005, })); // Create consumer const consumer: Consumer = new Consumer(transport);</span></span></code> </pre> <br><blockquote> å®¢æˆ·ç«¯å’Œæä¾›è€…éƒ½æ˜¯ä¸“é—¨ä¸ºåè®®è®¾è®¡çš„ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä»…é€‚ç”¨äºåè®®ï¼ˆceres.protocolï¼‰ã€‚ </blockquote><br><h3 id="sobytiya"> å¤§äº‹è®° </h3><br><p> åˆ›å»ºå®¢æˆ·ç«¯åï¼Œå¼€å‘äººå‘˜å¯ä»¥è®¢é˜…äº‹ä»¶ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Protocol <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../protocol/protocol.chat'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Transport, { ConnectionParameters } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ceres.consumer.browser.ws'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Consumer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ceres.consumer'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Create transport const transport:Transport = new Transport(new ConnectionParameters({ host: 'http://localhost', port: 3005, wsHost: 'ws://localhost', wsPort: 3005, })); // Create consumer const consumer: Consumer = new Consumer(transport); // Subscribe to event consumer.subscribe(Protocol.Events.NewMessage, (message: Protocol.Events.NewMessage) =&gt; { console.log(`New message came: ${message.message}`); }).then(() =&gt; { console.log('Subscription to "NewMessage" is done'); }).catch((error: Error) =&gt; { console.log(`Fail to subscribe to "NewMessage" due error: ${error.message}`); });</span></span></code> </pre> <br><p> è¯·æ³¨æ„ï¼Œåªæœ‰åœ¨æ¶ˆæ¯æ•°æ®å®Œå…¨æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯æ‰ä¼šè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºã€‚ æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå—åˆ°ä¿æŠ¤ä»¥é˜²æ­¢é”™è¯¯æ•°æ®ï¼Œå¹¶ä¸”<strong>NewMessage</strong>äº‹ä»¶å¤„ç†ç¨‹åºå°†å§‹ç»ˆä»¥<strong>Protocol.Events.NewMessage</strong>å®ä¾‹ä½œä¸ºå‚æ•°æ¥è°ƒç”¨ã€‚ </p><br><p> å½“ç„¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç”Ÿæˆäº‹ä»¶ã€‚ </p><br><pre> <code class="javascript hljs">consumer.emit(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Protocol.Events.NewMessage({ <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'This is new message'</span></span> })).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`New message was sent`</span></span>); }).catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error: </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Error</span></span></span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Fail to send message due error: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${error.message}</span></span></span><span class="hljs-string">`</span></span>); });</code> </pre> <br><p> è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹æŒ‡å®šäº‹ä»¶åç§°ï¼Œæˆ‘ä»¬åªæ˜¯ä½¿ç”¨åè®®ä¸­æŒ‡å‘ç±»çš„é“¾æ¥ï¼Œæˆ–è€…ä¼ é€’å®ƒçš„å®ä¾‹ã€‚ </p><br><p> æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æŒ‡å®šç±»å‹ä¸º<code>{ [key: string]: string }</code>çš„ç®€å•å¯¹è±¡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå°†æ¶ˆæ¯å‘é€ç»™æœ‰é™çš„ä¸€ç»„æ”¶ä»¶äººã€‚ åœ¨ceresä¸­ï¼Œæ­¤å¯¹è±¡ç§°ä¸º<strong>query</strong> ã€‚ </p><br><pre> <code class="javascript hljs">consumer.emit( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Protocol.Events.NewMessage({ <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'This is new message'</span></span> }), { <span class="hljs-attr"><span class="hljs-attr">location</span></span>: <span class="hljs-string"><span class="hljs-string">"UK"</span></span> } ).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`New message was sent`</span></span>); }).catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error: </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Error</span></span></span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Fail to send message due error: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${error.message}</span></span></span><span class="hljs-string">`</span></span>); });</code> </pre> <br><p> å› æ­¤ï¼Œé€šè¿‡å¦å¤–æŒ‡ç¤º<code>{ location: "UK" }</code> ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿åªæœ‰å·²å°†è‡ªå·±çš„ä½ç½®æ ‡è¯†ä¸ºè‹±å›½çš„å®¢æˆ·æ‰èƒ½æ”¶åˆ°æ­¤æ¶ˆæ¯ã€‚ </p><br><p> è¦å°†å®¢æˆ·ç«¯æœ¬èº«ä¸ç‰¹å®š<strong>æŸ¥è¯¢</strong>ç›¸å…³è”ï¼Œæ‚¨åªéœ€è°ƒç”¨<strong>ref</strong>æ–¹æ³•ï¼š </p><br><pre> <code class="javascript hljs">consumer.ref({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">'12345678'</span></span>, <span class="hljs-attr"><span class="hljs-attr">location</span></span>: <span class="hljs-string"><span class="hljs-string">'UK'</span></span> }).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Client successfully bound with query`</span></span>); });</code> </pre> <br><p> åœ¨å°†å®¢æˆ·ç«¯ä¸<strong>æŸ¥è¯¢</strong>è¿æ¥åï¼Œä»–å°±æœ‰æœºä¼šæ¥æ”¶â€œä¸ªäººâ€æˆ–â€œç»„â€æ¶ˆæ¯ã€‚ </p><br><h3 id="zaprosy"> å’¨è¯¢å¤„ </h3><br><p> æˆ‘ä»¬ä¹Ÿå¯ä»¥æå‡ºè¦æ±‚ </p><br><pre> <code class="javascript hljs">consumer.request( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Protocol.Requests.GetUsers(), <span class="hljs-comment"><span class="hljs-comment">// Request Protocol.Responses.UsersList // Expected response ).then((response: Protocol.Responses.UsersList) =&gt; { console.log(`Available users: ${response.users}`); }).catch((error: Error) =&gt; { console.log(`Fail to get users list due error: ${error.message}`); });</span></span></code> </pre> <br><p> å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œæˆ‘ä»¬æŒ‡å®šäº†é¢„æœŸçš„ç»“æœï¼ˆ <strong>Protocol.Responses.UsersList</strong> ï¼‰ï¼Œè¿™æ„å‘³ç€ä»…å½“å“åº”æ˜¯<strong>UsersList</strong>çš„å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬çš„è¯·æ±‚æ‰ä¼šæˆåŠŸå®Œæˆï¼Œåœ¨æ‰€æœ‰å…¶ä»–æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†â€œè½å…¥â€èµ¶ä¸Š åŒæ ·ï¼Œè¿™å¯ä»¥ç¡®ä¿æˆ‘ä»¬é¿å…å¤„ç†ä¸æ­£ç¡®çš„æ•°æ®ã€‚ </p><br><p> å®¢æˆ·æœ¬äººä¹Ÿå¯ä»¥ä¸å¯ä»¥å¤„ç†è¯·æ±‚çš„äººå‘˜äº¤è°ˆã€‚ ä¸ºæ­¤ï¼Œæ‚¨åªéœ€è¦â€œç¡®å®šâ€è‡ªå·±ä¸ºè¯¥è¯·æ±‚çš„â€œè´Ÿè´£äººâ€å³å¯ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRequestGetUsers</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">request: Protocol.Requests.GetUsers, callback: (error: Error | null, results : any </span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">any</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Get user list somehow const users: Protocol.User[] = []; // Prepare response const response = new Protocol.Responses.UsersList({ users: users }); // Send response callback(null, response); // Or send error // callback(new Error(`Something is wrong`)) }; consumer.listenRequest(Protocol.Requests.GetUsers, processRequestGetUsers, { location: "UK" }).then(() =&gt; { console.log(`Consumer starts listen request "GetUsers"`); });</span></span></code> </pre> <br><p> æ³¨æ„ï¼Œå¯é€‰åœ°ï¼Œä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªå¯ç”¨äºæ ‡è¯†å®¢æˆ·ç«¯çš„<strong>æŸ¥è¯¢</strong>å¯¹è±¡ã€‚ å› æ­¤ï¼Œå¦‚æœæœ‰äººå‘é€å¸¦æœ‰æŸ¥è¯¢çš„<strong>æŸ¥è¯¢</strong> ï¼Œä¾‹å¦‚<code>{ location: "RU" }</code> ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å®¢æˆ·å°†ä¸ä¼šæ”¶åˆ°è¿™æ ·çš„è¯·æ±‚ï¼Œå› ä¸ºä»–çš„æŸ¥è¯¢<code>{ location: "UK" }</code> ã€‚ </p><br><p>  <strong>æŸ¥è¯¢</strong>å¯ä»¥åŒ…å«æ— é™æ•°é‡çš„å±æ€§ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä»¥ä¸‹å†…å®¹ </p><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">location</span></span>: <span class="hljs-string"><span class="hljs-string">"UK"</span></span>, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"managers"</span></span> }</code> </pre> <br><p> ç„¶åï¼Œé™¤äº†å®Œæ•´çš„<strong>æŸ¥è¯¢</strong>åŒ¹é…å¤–ï¼Œæˆ‘ä»¬è¿˜å°†æˆåŠŸå¤„ç†ä»¥ä¸‹æŸ¥è¯¢ï¼š </p><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">location</span></span>: <span class="hljs-string"><span class="hljs-string">"UK"</span></span> }</code> </pre> <br><p> æˆ– </p><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"managers"</span></span> }</code> </pre> <br><h2 id="provayder"> æä¾›è€… </h2><br><h3 id="sozdanie-1"> åˆ›ä½œ </h3><br><p> è¦åˆ›å»ºæä¾›ç¨‹åºï¼ˆä»¥åŠåˆ›å»ºå®¢æˆ·ç«¯ï¼‰ï¼Œæ‚¨éœ€è¦æä¾›ç¨‹åºå’Œä¼ è¾“ã€‚ </p><br><p> å®‰è£…æ–¹å¼ </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Install provider npm install ceres.provider --save # Install transport npm install ceres.provider.node.ws --save</span></span></code> </pre> <br><p> åˆ›ä½œ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Transport, { ConnectionParameters } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ceres.provider.node.ws'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Provider <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ceres.provider'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Create transport const transport:Transport = new Transport(new ConnectionParameters({ port: 3005 })); // Create provider const provider: Provider = new Provider(transport);</span></span></code> </pre> <br><p> ä»åˆ›å»ºæä¾›ç¨‹åºçš„é‚£ä¸€åˆ»èµ·ï¼Œå®ƒå°±å¯ä»¥æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥ã€‚ </p><br><h3 id="sobytiya-1"> å¤§äº‹è®° </h3><br><p> ä¸å®¢æˆ·ç«¯ä¸€æ ·ï¼Œæä¾›ç¨‹åºä¹Ÿå¯ä»¥â€œç›‘å¬â€æ¶ˆæ¯å¹¶ç”Ÿæˆæ¶ˆæ¯ã€‚ </p><br><p> å€¾å¬ </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Subscribe to event provider.subscribe(Protocol.Events.NewMessage, (message: Protocol.Events.NewMessage) =&gt; { console.log(`New message came: ${message.message}`); });</span></span></code> </pre> <br><p> äº§ç”Ÿ </p><br><pre> <code class="javascript hljs">provider.emit(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Protocol.Events.NewMessage({ <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'This message from provider'</span></span> }));</code> </pre> <br><h3 id="zaprosy-1"> å’¨è¯¢å¤„ </h3><br><p> å½“ç„¶ï¼Œæä¾›è€…å¯ä»¥ï¼ˆå¹¶ä¸”åº”è¯¥ï¼‰â€œç›‘å¬â€è¯·æ±‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRequestGetUsers</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">request: Protocol.Requests.GetUsers, clientID: string, callback: (error: Error | null, results : any </span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">any</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Request from client </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${clientId}</span></span></span><span class="hljs-string"> was gotten.`</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Get user list somehow const users: Protocol.User[] = []; // Prepare response const response = new Protocol.Responses.UsersList({ users: users }); // Send response callback(null, response); // Or send error // callback(new Error(`Something is wrong`)) }; provider.listenRequest(Protocol.Requests.GetUsers, processRequestGetUsers).then(() =&gt; { console.log(`Consumer starts listen request "GetUsers"`); });</span></span></code> </pre> <br><p> ä¸å®¢æˆ·ç«¯åªæœ‰ä¸€ä¸ªåŒºåˆ«ï¼Œæä¾›è€…é™¤è¯·æ±‚æ­£æ–‡å¤–è¿˜å°†æ”¶åˆ°å”¯ä¸€çš„<strong>clientId</strong> ï¼Œè¯¥<strong>ID</strong>å°†è‡ªåŠ¨åˆ†é…ç»™æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ã€‚ </p><br><h1 id="primer"> ä¾‹å­ </h1><br><p> å®é™…ä¸Šï¼Œæˆ‘çœŸçš„ä¸æƒ³è®©æ‚¨ä»æ–‡æ¡£æ‘˜å½•ä¸­æ„Ÿåˆ°æ— èŠï¼Œæˆ‘ç›¸ä¿¡åªè¦çœ‹ä¸€å°æ®µä»£ç ï¼Œå¯¹æ‚¨æ¥è¯´å°±ä¼šæ›´åŠ å®¹æ˜“å’Œæœ‰è¶£ã€‚ </p><br><p> æ‚¨å¯ä»¥é€šè¿‡ä¸‹è½½<a href="">æºä»£ç </a>å¹¶æ‰§è¡Œå‡ ä¸ªç®€å•çš„æ“ä½œæ¥è½»æ¾å®‰è£…èŠå¤©ç¤ºä¾‹ </p><br><p> å®¢æˆ·ç«¯å®‰è£…å’Œå¯åŠ¨ </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> chat/client npm install npm start</code> </pre> <br><p> å®¢æˆ·ç«¯å°†åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">httpï¼š// localhostï¼š3000ä¸Š</a>å¯ç”¨ã€‚ ç«‹å³ä¸å®¢æˆ·ç«¯æ‰“å¼€å‡ ä¸ªé€‰é¡¹å¡ï¼Œä»¥æŸ¥çœ‹â€œé€šä¿¡â€ã€‚ </p><br><p> æä¾›ç¨‹åºï¼ˆæœåŠ¡å™¨ï¼‰çš„å®‰è£…å’Œå¯åŠ¨ </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> chat/server npm install ts-node ./server.ts</code> </pre> <br><p> æˆ‘ç¡®å®šæ‚¨ç†Ÿæ‚‰<strong>ts-node</strong>ç¨‹åºåŒ…ï¼Œä½†å¦‚æœä¸ç†Ÿæ‚‰ï¼Œå®ƒå°†å…è®¸æ‚¨è¿è¡ŒTSæ–‡ä»¶ã€‚ å¦‚æœæ‚¨ä¸æƒ³å®‰è£…ï¼Œè¯·ç¼–è¯‘æœåŠ¡å™¨ï¼Œç„¶åè¿è¡ŒJSæ–‡ä»¶ã€‚ </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> chat/server npm run build node ./build/server/server.js</code> </pre> <br><h1 id="sho-opyat"> ä»€ä¹ˆå•Š å†æ¬¡ï¼Ÿ </h1><br><p> ç”±äºä»Protobufåˆ°BMWçš„é“æ†Joynrï¼Œå·²ç»æœ‰è®¸å¤šå¯è¡Œçš„è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤äººä»¬é¢„æƒ³ç€ä¸ºä»€ä¹ˆè¦å‘æ˜å¦ä¸€è¾†è‡ªè¡Œè½¦çš„é—®é¢˜ï¼Œæˆ‘åªèƒ½è¯´è¿™å¯¹æˆ‘å¾ˆæœ‰è¶£ã€‚ æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯åœ¨æ²¡æœ‰å·¥ä½œçš„æƒ…å†µä¸‹ï¼Œä»…é ä¸ªäººä¸»åŠ¨å®Œæˆçš„ï¼Œè¿™æ˜¯æˆ‘çš„ä¸šä½™æ—¶é—´ã€‚ </p><br><p> è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ‚¨çš„åé¦ˆå¯¹æˆ‘<strong>ç‰¹åˆ«é‡è¦</strong> ã€‚ ä¸ºäº†ä»¥æŸç§æ–¹å¼æ¿€åŠ±æ‚¨ï¼Œæˆ‘å¯ä»¥ä¿è¯ï¼Œå¯¹äºgithubä¸Šçš„æ¯ä¸ªæ˜Ÿæ˜Ÿï¼Œæˆ‘éƒ½ä¼šæŠšæ‘¸å®ƒçš„ä»“é¼ ï¼ˆä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œæˆ‘ä¸å–œæ¬¢å®ƒï¼‰ã€‚ å¯¹äºå‰å­ï¼Œå‘ƒï¼Œæˆ‘è¦æŠ“ä»–çš„pussiko ... brrrrã€‚ </p><br><p>  <em>ä»“é¼ ä¸æ˜¯æˆ‘çš„ï¼Œå„¿å­çš„ä»“é¼ </em> ã€‚ </p><br><p> å¦å¤–ï¼Œè¯¥é¡¹ç›®å°†åœ¨å‡ å‘¨å†…å¯¹æˆ‘ä»¥å‰çš„åŒäº‹ï¼ˆæˆ‘åœ¨å¸–å­å¼€å¤´æåˆ°å¹¶ä¸”å¯¹alfaç‰ˆæœ¬æ„Ÿå…´è¶£çš„äººï¼‰è¿›è¡Œæµ‹è¯•ã€‚ ç›®æ ‡æ˜¯è°ƒè¯•å¹¶åœ¨å¤šä¸ªç»„ä»¶ä¸Šè¿è¡Œã€‚ æˆ‘çœŸçš„å¸Œæœ›å®ƒèƒ½èµ·ä½œç”¨ã€‚ </p><br><h1 id="ssylki-i-pakety"> é“¾æ¥å’ŒåŒ…è£… </h1><br><p> è¯¥é¡¹ç›®ç”±ä¸¤ä¸ªå­˜å‚¨åº“æ‰˜ç®¡ </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ceres</a>æ¥æºï¼šceres.providerï¼Œceres.consumerå’Œä»Šå¤©å¯ç”¨çš„æ‰€æœ‰äº¤é€šå·¥å…·ã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ceres.protocol</a>åè®®ç”Ÿæˆå™¨æº </li></ul><br><p>  NPMä»¥ä¸‹è½¯ä»¶åŒ…å¯ç”¨ </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ceres.protocol</a>åè®®ç”Ÿæˆå™¨ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ceres.provider</a>æä¾›è€… </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¶ˆè´¹</a>å®¢æˆ· </li><li> åŸºäºé•¿è½®è¯¢çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ceres.provider.node.longpoll</a>ä¼ è¾“æä¾›ç¨‹åº </li><li>  <a href="">ceres.provider.node.ws</a>åŸºäºWeb Socketçš„æä¾›ç¨‹åºçš„ä¼ è¾“ </li><li> åŸºäºé•¿è½®è¯¢çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ceres.consumer.browser.longpoll</a>å®¢æˆ·ç«¯ä¼ è¾“ </li><li>  <a href="">ceres.consumer.browser.ws</a>åŸºäºWebå¥—æ¥å­—çš„å®¢æˆ·ç«¯ä¼ è¾“ </li></ul><br><p> å¥½åˆè½»ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442380/">https://habr.com/ru/post/zh-CN442380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442370/index.html">ä»â€œ node_modulesâ€æ–‡ä»¶å¤¹ä¸­å»¶è¿ŸåŠ è½½åŠŸèƒ½æ¨¡å—</a></li>
<li><a href="../zh-CN442372/index.html">åœ¨è¯­è¨€ç¯å¢ƒä¸­è¿›è¡Œå¯é çš„ç¼–ç¨‹ã€‚ ç¬¬2éƒ¨åˆ†-æŒ‘æˆ˜è€…</a></li>
<li><a href="../zh-CN442374/index.html">åŸºäºDSPçš„å‡å‹è½¬æ¢å™¨çš„å¼€å‘ï¼šå·¥ä½œåŸç†ï¼Œè®¡ç®—ï¼ŒåŸå‹è®¾è®¡</a></li>
<li><a href="../zh-CN442376/index.html">é›¶å”®åœ°å—å¯†åº¦</a></li>
<li><a href="../zh-CN442378/index.html">åœ¨Booking comç•Œé¢ä¸­å•å‡»ä¸€ä¸‹å¯èƒ½ä¼šç ´åå‡æœŸæˆ–ä¸ºä»€ä¹ˆå·¥ä½œè¯„åˆ†ç³»ç»Ÿå¾ˆé‡è¦</a></li>
<li><a href="../zh-CN442384/index.html">æ‰©å±•æ ‡å‡†éŸ³é¢‘ç³»ç»Ÿçš„åŠŸèƒ½</a></li>
<li><a href="../zh-CN442386/index.html">Thymeleafï¼šæ–¹è¨€å¸ƒå±€+ Spring Boot 2</a></li>
<li><a href="../zh-CN442392/index.html">NodeJSè®°å½•æ­£ç¡®</a></li>
<li><a href="../zh-CN442396/index.html">3æœˆ4æ—¥è‡³3æœˆ10æ—¥åœ¨è«æ–¯ç§‘ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
<li><a href="../zh-CN442402/index.html">æœ€é‡è¦çš„ã€‚ ä¸å¤–éƒ¨æœåŠ¡é›†æˆ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>