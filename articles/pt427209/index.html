<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòï ‚ú¥Ô∏è üîÜ GeoPuzzle - fa√ßa o mundo pe√ßa por pe√ßa üöµüèΩ üôéüèΩ üßúüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eu quero falar sobre um projeto que vem sendo desenvolvido nos √∫ltimos dois anos. √â chamado GeoPuzzle e √© um jogo de quebra-cabe√ßa no mapa pol√≠tico do...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GeoPuzzle - fa√ßa o mundo pe√ßa por pe√ßa</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427209/"><img src="https://habrastorage.org/webt/yi/rt/rr/yirtrrid9bdhlygy86tfho1fg8g.png" alt="imagem"><br><br>  Eu quero falar sobre um projeto que vem sendo desenvolvido nos √∫ltimos dois anos.  √â chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GeoPuzzle</a> e √© um jogo de quebra-cabe√ßa no mapa pol√≠tico do mundo.  O objetivo √© colocar peda√ßos do pa√≠s em seu lugar.  A ideia foi identificada no artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Quebra-cabe√ßa Mercator para especialistas em geografia"</a> , que tamb√©m tocava tetris de pa√≠ses (ainda no DOS) na inf√¢ncia, mas n√£o me lembro do nome do programa.  Fiquei t√£o inspirado com a ideia que queria criar um produto completo, interessante n√£o apenas para crian√ßas em idade escolar, mas tamb√©m para especialistas em geografia.  O desenvolvimento do projeto pode ser observado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> . <br><a name="habracut"></a><br><h2>  Prot√≥tipo </h2><br>  O artigo ‚ÄúPuzzle Mercator para especialistas em geografia‚Äù foi publicado em 8 de fevereiro de 2013, mas ap√≥s 4 meses eu tinha um prot√≥tipo pronto, no qual os pol√≠gonos de todos os pa√≠ses do mundo estavam reunidos.  Um pouco mais tarde, adicionei as regi√µes da R√∫ssia e dos Estados Unidos e fiz a escolha da posi√ß√£o inicial no mapa para pol√≠gonos aleatoriamente.  Descrevi o processo de desenvolvimento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no meu blog</a> , publiquei o c√≥digo-fonte no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> .  E √© isso - preso.  Eu tenho muito menos tempo livre, minha motiva√ß√£o se foi (nenhuma decis√£o foi tomada) e a complexidade aumentou exponencialmente.  Era um projeto de estima√ß√£o, e a tarefa principal era aprender algo novo, ent√£o fiquei um pouco pervertido com a tecnologia.  No cliente, √© claro, javascript (com o qual eu n√£o trabalhei muito), o script ruby ‚Äã‚Äã(novamente, uma nova linguagem para mim) foi respons√°vel pela prepara√ß√£o dos dados, mas no servidor houve erro (eu queria tentar algo puramente funcional).  Sa√≠da completa da zona de conforto: era dif√≠cil trabalhar diretamente com objetos PostGIS, a dor de converter seq√º√™ncias para erlang, configurar o YAWS era uma quest√£o completamente diferente ... No est√°gio seguinte, percebi que n√£o conseguia lidar com todo esse zool√≥gico para criar um produto completo e sa√≠ pense por alguns anos. <br><br><h2>  GeoPuzzle </h2><br><img src="https://habrastorage.org/webt/k3/rp/5d/k3rp5dfmluyjvoqm0tffbva4b_g.gif" alt="imagem"><br><br>  O site funcionou todo esse tempo, as pessoas chegaram at√© l√°, mas eu realmente queria adicionar mais um pequeno detalhe: exibir pelo menos algumas informa√ß√µes sobre o pol√≠gono rec√©m-descoberto.  Assim, planejei passar as f√©rias de Ano Novo em 2017 com benef√≠cios.  Devido a problemas no prot√≥tipo, decidi reescrever tudo e tornar o produto em algo familiar - Django.  Fora da caixa, existem coisas que simplificaram bastante minha vida, por exemplo, o painel de administra√ß√£o e o trabalho com o PostGIS atrav√©s do ORM.  Mas para iniciantes, era necess√°rio recriar a funcionalidade que j√° funcionava.  Levou apenas algumas noites e a maior parte do tempo foi gasta carregando dados de arquivos KML.  N√£o tanto o processo de importa√ß√£o em si, como a prepara√ß√£o e restaura√ß√£o de meus conhecimentos sobre como trabalhar com eles.  A prop√≥sito, peguei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pol√≠gonos</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gadm.org</a> na √©poca.  Isso funcionou muito bem para os pa√≠ses, mas havia alguns problemas com a precis√£o das regi√µes, por isso tirei um tempo para esse problema. <br><br><div class="spoiler">  <b class="spoiler_title">Algumas palavras sobre n√≠veis administrativos em dados geogr√°ficos (n√≠veis).</b> <div class="spoiler_text">  Todos os pa√≠ses est√£o divididos em v√°rias regi√µes, que s√£o divididas em partes ainda menores.  No total, existem 12 camadas nessa hierarquia. <br><br>  Por exemplo, para a R√∫ssia: <br><br><ul><li>  R√∫ssia (2) -&gt; Distrito Federal do Sul (3) -&gt; Territ√≥rio de Krasnodar (4) -&gt; Distrito de Vyselkovsky (6) -&gt; art.  Aldeias (8) </li><li>  R√∫ssia (2) -&gt; Distrito Federal do Sul (3) -&gt; Territ√≥rio de Krasnodar (4) -&gt; Krasnodar (6) -&gt; Distrito de Prikubansky (9) -&gt; Kopanskaya (10) </li><li>  Fran√ßa (2) -&gt; Metr√≥pole de Fran√ßa (3) -&gt; Regi√£o da Normandia (4) -&gt; Departamento de Orne (6) -&gt; cant√£o de Donfron (7) -&gt; munic√≠pio de Donfron-en-Poiret (8) -&gt; Donfron (9) </li></ul><br>  As unidades territoriais em diferentes pa√≠ses s√£o chamadas √† sua maneira, mas deduzi para mim esta divis√£o: Pa√≠s (2) -&gt; Regi√£o (4) -&gt; Distrito (6).  Divis√£o administrativa adicional deixada para mais tarde. <br></div></div><br><h2>  Desenvolvimento do projeto </h2><br>  Naquela √©poca, o aplicativo era apenas uma cole√ß√£o de p√°ginas HTML com um m√≠nimo de CSS.  Queria verificar rapidamente a ideia e n√£o me preocupar com o design.  A ideia acabou sendo realiz√°vel, e √© hora de criar uma bela concha para ela.  Porque  N√£o tenho nenhum senso de beleza na interface do usu√°rio e, em seguida, no Bootstrap para me ajudar.  N√£o h√° interface, mas ela apareceu e at√© adaptada para dispositivos m√≥veis.  Mas esse foi apenas o primeiro passo para colocar a interface em ordem. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como √© aprender o JavaScript em 2016</a> ?!  Quando o c√≥digo √© compilado em outro dialeto, ele √© modelado, colado para que depois possa ser cortado em peda√ßos.  Eu, como back-end, fiquei assustado, mas a complexidade da parte do cliente foi planejada o suficiente, o que exigiu o uso de uma estrutura ou biblioteca.  Decidi sobre o React por dois motivos: n√£o precisava do SPA, mas de um conjunto de componentes para p√°ginas diferentes, e queria ver rapidamente o resultado.  Mas antes de come√ßar a programar, voc√™ tinha que configurar o ambiente.  Agora eu entendo o front-end familiar, que disse que configurou o Webpack por 2 dias.  Acontece que n√£o era uma piada. <br><br>  Naquele momento, sucumbi √† persuas√£o e implementei a l√≥gica do aplicativo usando o Redux.  Talvez isso n√£o tenha sido um erro, porque  permiss√£o para entrar rapidamente no t√≥pico.  Regras formais me permitiram escrever um c√≥digo e garantir que ele funcionasse sem olhar sob o cap√¥.  O Redux usando seu middleware me abstraiu da intera√ß√£o de rede, o que me permitiu verificar as respostas ao servidor.  Sim, at√© o momento, o cliente trabalhava por conta pr√≥pria - uma solicita√ß√£o do ajax retirava todos os dados necess√°rios e verificava as respostas por conta pr√≥pria.  O usu√°rio pode trapacear olhando os dados que v√™m do servidor.  Al√©m disso, ao carregar, os dados chegaram, necess√°rios somente ap√≥s a resposta correta.  Ap√≥s a implementa√ß√£o da verifica√ß√£o via soquetes da Web, o processo se tornou ideologicamente mais correto - a resposta verifica o c√≥digo que n√£o est√° dispon√≠vel para o cliente.  Para o usu√°rio, isso ainda parecia instant√¢neo: enviar os pontos extremos do pol√≠gono para o servidor, verificar se eles entraram no quadrado com um erro, compactar os dados para a caixa de informa√ß√µes e o pol√≠gono detalhado em json e transferi-lo para o cliente - caber em ~ 200ms. <br><br><img src="https://habrastorage.org/webt/va/s_/kz/vas_kzccg7izp3-lys7pztcfktm.png" alt="imagem"><br><br>  Tendo aprendido todo o poder do javascript, √© dif√≠cil parar.  Imediatamente houve id√©ias para adicionar anima√ß√µes, dobrar blocos, piscar e novas vers√µes de jogos.  Um deles √© o "Quiz", no qual voc√™ deve adivinhar o pa√≠s por nome, bandeira, bras√£o ou capital.  √â verdade que, durante o processo de teste, algumas regi√µes n√£o tinham bandeiras, enquanto outras n√£o tinham capital; portanto, alguns pa√≠ses tiveram que ficar ocultos da lista de regi√µes dispon√≠veis.  Ao mesmo tempo, um modo de jogo apareceu no mapa f√≠sico do mundo - sem as fronteiras dos pa√≠ses, para profissionais reais. <br><br><h2>  Fontes de dados abertas </h2><br>  H√° ~ 50.000 pol√≠gonos no jogo agora, e quero agradecer muito a grandes projetos como Wikipedia e Open Street Map, sem os quais seria imposs√≠vel encher a base.  O requisito fundamental era receber e atualizar dados de fontes abertas, ou seja, sem edi√ß√£o manual, porque  Eu n√£o quero fazer l√≥gica de sincroniza√ß√£o complexa.  Como resultado, obtive 2 scripts que podem atualizar caixas de informa√ß√µes e pol√≠gonos. <br><br><h3>  Wikipedia e SPARQL </h3><br><img src="https://habrastorage.org/webt/vh/-l/-9/vh-l-9bii6guq-jufnz3lcxtkia.png" alt="imagem"><br><br>  Qual √© o maior banco de dados de pa√≠ses e regi√µes?  Wikipedia!  Inicialmente, eu queria mostrar aos usu√°rios toda a caixa de informa√ß√µes, mas logo abandonei essa ideia.  Sim, havia coisas importantes como nomes, bandeiras, capitais e outras coisas, mas tamb√©m havia muito lixo (c√≥digo telef√¥nico, forma de governo, PIB ...).  Tentei analisar j√° coletados, mas descobri que eles t√™m uma estrutura diferente.  Isso acabou sendo um desastre: os custos de m√£o-de-obra para implementa√ß√£o aumentaram muitas vezes.  Era hora de parar e pensar.  No dia seguinte, aprendi sobre a exist√™ncia de uma linguagem de consulta especial - SPARQL.  Na apar√™ncia, ele se assemelha ao SQL - tamb√©m declarativo, com as palavras-chave <code>SELECT</code> , <code>WHERE</code> , <code>ORDER BY</code> , mas funciona de uma maneira completamente diferente.  Um pequeno exemplo que retorna uma lista de estados com mai√∫sculas em ingl√™s e russo: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> ?country ?capital ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> { ?country wdt:P31 wd:Q3624078 . <span class="hljs-keyword"><span class="hljs-keyword">FILTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> {?country wdt:P31 wd:Q3024240} OPTIONAL { ?country wdt:P36/rdfs:label ?capital } . BIND(lang(?capital) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> (?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> = <span class="hljs-string"><span class="hljs-string">'ru'</span></span> || ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> = <span class="hljs-string"><span class="hljs-string">'en'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> ?capital</code> </pre><br>  Parece selvagem, n√£o √© ?!  Confira <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  At√© escrevi uma pequena <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nota no meu blog</a> para estruturar minha experi√™ncia e ajudar a entrar no t√≥pico, porque  Existem poucos materiais detalhados na Internet.  Voc√™ pode aprender a ler esses pedidos rapidamente, mas levei um fim de semana inteiro para escrever algo significativo.  Muita "m√°gica" da <code>wd:Q3624078</code> e outros atributos.  Voc√™ precisa saber que <code>wdt:P31</code> √© uma "entidade" e <code>wd:Q3624078</code> √© um "estado soberano".  Pessoas desconhecidas come√ßam com um ponto de interroga√ß√£o e o atendimento da solicita√ß√£o consiste na busca de triplos fatos que satisfizessem as condi√ß√µes.  Por exemplo <code>?country wdt:P31 wd:Q3024240</code> - ‚Äúencontre todos os objetos que s√£o estados hist√≥ricos‚Äù;  e ent√£o o mesmo objeto participa de outros triplos <code>?country wdt:P36/rdfs:label ?capital</code> - de onde vem o capital. <br><br>  Cerca de uma semana depois, eu tinha a primeira vers√£o do script pronta, que baixava informa√ß√µes regionais da Wikipedia.  E ent√£o outro problema ficou claro - desta vez com dados.  Alguns svg n√£o come√ßaram com <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code> E n√£o foram reconhecidos pelo navegador como imagens v√°lidas.  Felizmente, o arquivo de origem pode ser editado.  N√£o h√° nada complicado em se registrar no wikipedia.org, mas voc√™ se encontra imediatamente em uma casa de banhos por um dia.  Aqui est√° a prote√ß√£o deles contra rob√¥s.  Ent√£o, na noite seguinte, eu governei o XML e fiquei feliz com a simplicidade, e bandeiras e emblemas apareceram no mapa. <br><br><h3>  Pol√≠gonos </h3><br><img src="https://habrastorage.org/webt/gd/g7/t-/gdg7t-ssoht6cbt3kifldfm_bvk.png" alt="imagem"><br><br>  Se, por fatos, formos √† Wikipedia, depois aos dados geogr√°ficos - no Open Street Map.  Seria legal pegar uma c√≥pia local, aprender o idioma dos pedidos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">passagem superior</a> , mas n√£o consigo nem imaginar quanto tempo levaria.  E voc√™ tamb√©m precisa tirar a hierarquia de algum lugar ... Felizmente, uma pessoa am√°vel j√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">resolveu esse problema para mim</a> .  O servi√ßo ainda fornece uma API para recuperar informa√ß√µes.  Consegui fazer o download de todos os pol√≠gonos at√© o n√≠vel 6, inclusive (distrito), e preencher tudo no Postgres, um pouco mais de 2 Gb.  N√£o foi sem aventuras - alguns pol√≠gonos eram t√£o grandes (por exemplo, o Canad√° pesa mais de 100 Mb em um GeoJSON compactado) que o servidor travou ou n√£o respondeu.  Eu tive que ignorar esses momentos manualmente.  Baixei todas as crian√ßas e as fundei no QGIS.  A prop√≥sito, este √© outro exemplo de um projeto de c√≥digo aberto que me ajudou muito. <br><br><h2>  Problemas de Big Data </h2><br>  Ent√£o, eu tenho um banco de dados com dados, inicio o jogo e ... e espero ... novamente eu espero ... apareceu!  Tentei arrastar o pol√≠gono - ele est√° morto, Jim!  O Chrome n√£o conseguiu lidar com esse volume de pontos e caiu.  A estrat√©gia da testa n√£o funciona mais, √© hora de pensar.  O mais √≥bvio √© reduzir os detalhes dos pol√≠gonos.  Derivou empiricamente uma f√≥rmula que depende da √°rea da figura - ela melhorou.  Em um computador em funcionamento, o algoritmo funcionou em tempo real, enquanto o servidor √© severamente limitado em recursos.  Redis conectados, ficou melhor j√° no servidor.  Mas os pol√≠gonos truncados s√£o bons para o Drag'n'Drop e, quando definidos no lugar certo, as bordas n√£o coincidem com as que desenham mapas do Google.  Bem, isso pode ser contornado atrav√©s da aplica√ß√£o de uma f√≥rmula n√£o t√£o agressiva para reduzir os detalhes.  Como j√° existem 2 caches, por que n√£o tentar armazenar em cache tudo o que √© poss√≠vel ?!  As caixas de informa√ß√µes (em dois idiomas) voaram para Redis, as bordas pelas quais a resposta √© calculada, o centro do pol√≠gono e as p√°ginas est√°ticas do site.  Como resultado, o jogo come√ßou a funcionar muito mais r√°pido e muita carga de trabalho foi removida do Postgres, que teoricamente poderia ser o gargalo.  Menos - o aplicativo n√£o funciona sem o Redis. <br><br><h2>  Primeira implanta√ß√£o </h2><br>  Portanto, √© hora de mostrar o projeto aos amigos para obter feedback.  Restou apenas um pouco: gerar sitemap.xml, adicionar robots.txt, conectar m√©tricas, adicionar bot√µes sociais.  redes e ... implantar!  Escolhi a AWS como hospedagem, pois  esperava caber nos recursos livres fornecidos.  E esta √© uma pilha muito boa para um projeto iniciante: <br><br><ul><li>  servidor de aplicativos (t2.micro: 1xCPU, 1 Gb de RAM, 20 Gb SSD) </li><li>  banco de dados (db.t2.micro: 1xCPU, 1 Gb de RAM, 20 Gb SSD) </li><li>  armazenamento de arquivos com CDN (5 Gb S3, 50 Gb de tr√°fego) </li><li>  servidor de armazenamento em cache (cache.t2.micro: 1xCPU, 0,5 Gb de RAM) </li><li>  Elasticsearch + Kibana (t2.small.elasticsearch: 1xCPU, 2 Gb de RAM) </li></ul><br>  Esta √© apenas uma lista do que eu consegui usar.  Ao longo do caminho, decidi elaborar meu rake <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">na forma de artigos</a> , mas rapidamente morri.  O tempo passa decentemente, mas n√£o est√° claro se algu√©m precisa dele. <br><br>  Como resultado, paguei pelo ano de servi√ßo algo da ordem de US $ 10, e at√© mesmo por estupidez.  Mas aqui o per√≠odo de teste chegou ao fim e eu tive que me mudar, porque  o custo de possuir toda essa economia come√ßou a se aproximar de v√°rias centenas de d√≥lares.  Tarifas comparadas e liquidadas na DigitalOcean.  Por enquanto, tenho m√°quinas suficientes com 2 GB de RAM para tudo (servidor de aplicativos, banco de dados e cache), mas deixei as estat√≠sticas e CDN na AWS.  Agora descobri que o DO tamb√©m recebeu um CDN e armazenamento por US $ 5 / m√™s, por isso faz sentido pensar em mudar essa parte tamb√©m. <br><br><h2>  Transferir para c√≥digo aberto </h2><br>  Na noite de janeiro, recebi uma carta de uma escola dinamarquesa.  Sua ess√™ncia se resume ao fato de que eles t√™m US $ 100 e querem dar para mim.  Mas h√° uma condi√ß√£o - o c√≥digo fonte do projeto deve estar aberto.  At√© aquele momento, eu nem tinha pensado em c√≥digo aberto.  Algumas noites foram pensando e escolhendo uma licen√ßa.  Como resultado, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">carreguei as fontes no Github</a> sob a licen√ßa GPLv3 e recebi os US $ 100 prometidos.  Isso aumentou muito a motiva√ß√£o - meu projeto foi realmente √∫til!  E corri para o pr√≥ximo objetivo - o editor do jogo.  Para que todos possam criar seus pr√≥prios quebra-cabe√ßas.  Por exemplo, ‚ÄúPa√≠ses participantes da Segunda Guerra Mundial‚Äù, ‚ÄúDistritos do territ√≥rio de Krasnodar‚Äù, ‚ÄúPa√≠ses sem litoral‚Äù ... Mas, para isso, eram necess√°rios o registro e uma conta pessoal primitiva.  Como resultado, o desenvolvimento se arrastou por longos 3 meses.  Durante esse per√≠odo, escrevi uma √°rvore de regi√µes que puxavam dados pelo ajax, conectavam a localiza√ß√£o, aprendiam a salvar um mapa do Google como uma imagem para gerar visualiza√ß√µes e reduzir o redux.  Sim, ele me ajudou a lidar com os dados desde o in√≠cio, mas agora √© mais prov√°vel que interfira.  Eu teria que arrastar redutores para desenhar pol√≠gonos no mapa, junto com o c√≥digo que trataria do movimento deles.  Felizmente, remover a liga√ß√£o ao estado global levou apenas alguns dias e mover o c√≥digo para o local at√© simplificou o aplicativo.  E, claro, esta √© uma boa experi√™ncia :) <br><br><h3>  Conex√£o de Servi√ßo </h3><br>  Acontece que muitos servi√ßos pagos fornecem seus servi√ßos gratuitamente para projetos de c√≥digo aberto.  Vou listar apenas aqueles que eu conectei aos meus. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sentinela</a> .  Penso que este servi√ßo para detectar erros √© familiar a todos.  Quando acabei de implantar o projeto, o registro consistia no envio de um rastreamento de pilha para o correio.  Isso funcionou apenas para o back-end, mas eu tamb√©m queria acompanhar os bugs no front-end.  E n√£o em v√£o - acabei o limite de mensagens gr√°tis em apenas duas semanas.  A maioria dos erros ocorreu nas entranhas da biblioteca de mapas do Google, o que, √† primeira vista, √© muito estranho.  Durante a investiga√ß√£o, tudo foi culpa minha.  As corre√ß√µes duraram mais de um m√™s, mas foi uma pr√°tica muito √∫til de manipula√ß√£o de erros javascript. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">crowdin.com</a> - localiza√ß√£o.  Eu pretendo tornar o projeto acess√≠vel a todos.  Incluindo que as infoboxes foram mostradas em sua l√≠ngua nativa.  Preench√™-los da Wikipedia n√£o √© um problema, mas por consist√™ncia, eu tamb√©m gostaria de ter uma interface no mesmo idioma e, at√© agora, ela foi traduzida apenas para russo e ingl√™s. <br><br><img src="https://habrastorage.org/webt/rq/c-/e7/rqc-e7xybyag2pgp9iaylqfobp4.png" alt="imagem"><br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CircleCI</a> .  Nenhum projeto moderno pode ficar sem CI / CD, testes e implanta√ß√£o autom√°tica.  Escolhi o CircleCI apenas porque j√° trabalhei com o TravisCI quando escrevi a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">biblioteca para trabalhar com o Yandex.Disk</a> .  Tive a impress√£o de que √© mais adequado para testar bibliotecas, pois  √© f√°cil definir a matriz de ambientes em que o c√≥digo deve ser testado.  Mas com os testes em si, tenho um problema - n√£o h√° tantos quantos gostar√≠amos, embora a infraestrutura j√° esteja pronta. <br><br><img src="https://habrastorage.org/webt/39/og/14/39og14nvsqwi9mkruslrydqjhh0.png" alt="imagem"><br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Macac√£o</a> .  Servi√ßo de visualiza√ß√£o de cobertura de c√≥digo.  Capaz de tamb√©m fornecer um r√≥tulo para inser√ß√£o no projeto README.md. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SonarQube</a> .  Colheitadeira para controle de qualidade do c√≥digo.  Ele verifica o c√≥digo de acordo com uma variedade de regras, considera a complexidade ciclom√°tica, monitora a cobertura por testes e at√© reconhece a duplica√ß√£o de c√≥digo!  Um servi√ßo muito interessante, que ainda n√£o tive tempo de entender completamente. <br><br><img src="https://habrastorage.org/webt/og/lk/gp/oglkgp9ndcldy3r14m5iojv9_xi.png" alt="imagem"><br><br>  - rob√¥s do Github.  At√© o momento, apenas o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dependabot est√°</a> conectado, o que atualiza as depend√™ncias. <br><br><img src="https://habrastorage.org/webt/r1/eh/9j/r1eh9jidp-k_nzmyhplghbdpsiq.png" alt="imagem"><br><br>  Sugiro nos coment√°rios que compartilhem a lista de servi√ßos e bots em seus projetos. <br><br><h2>  Bugs </h2><br>  A an√°lise de bugs e problemas merece um artigo separado.  Havia engra√ßado, complexo e dif√≠cil de consertar (portanto, Chukotka sempre fica em seu lugar).  Atualmente, existe um que realmente incomoda os usu√°rios.  Quando uma resposta √© recebida, os pol√≠gonos s√£o exclu√≠dos e recriados (na biblioteca react-google-maps) e, se nesse momento o usu√°rio arrastou alguns, o mapa do Google continua assumindo que o processo ainda n√£o foi conclu√≠do.  Parece que, no processo de arrastar e soltar, o pol√≠gono desaparece e voc√™ n√£o pode mais pegar nenhum outro.  √â claro que voc√™ pode bloquear o processamento da resposta no processo de arrastar e soltar, mas isso garante a morte do jogo multiplayer, cuja implementa√ß√£o eu estou trabalhando atualmente.  Tentei encontrar uma maneira de interromper o arrastar e soltar programaticamente, mas, no final, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">levantei uma pergunta no StackOverflow</a> e um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bug no Google Maps,</a> na esperan√ßa de que eles prestassem aten√ß√£o.  At√© ent√£o, ele adicionou um bot√£o "o jogo est√° quebrado!", Que reinicializa o mapa inteiro, mas n√£o redefine o resultado. <br><br><h2>  O que vem a seguir? </h2><br><ol><li>  Design.  Admito que, com isso, tudo est√° completamente ruim.  √â necess√°rio contratar um designer e um designer de layout, porque eu pr√≥prio n√£o sou amigo de layouts e layouts. </li><li>  Monetiza√ß√£o.  Inicialmente, n√£o planejei nada.  O projeto √© dedicado √† educa√ß√£o b√°sica, que na minha opini√£o deve ser acess√≠vel a todos.  Fiquei muito inspirado por uma carta de uma escola dinamarquesa, mas quase um ano se passou e, durante esse per√≠odo, houve apenas uma transfer√™ncia de US $ 5.  Bem, eu n√£o acreditava que pudesse pagar pelo servidor.  No entanto, ele come√ßou uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">campanha no Patreon de</a> qualquer maneira.  Ao mesmo tempo, voc√™ provavelmente pode pensar em introduzir oportunidades pagas para professores ou organiza√ß√µes.  Por exemplo, tenho experi√™ncia na integra√ß√£o com o Learning Management Systems - um conjunto de plataformas que permitem a cria√ß√£o de cursos e s√£o muito populares na Europa e nos EUA.  Pelo que entendi, mesmo que o c√≥digo-fonte tamb√©m esteja sob a GPL no Github, isso n√£o me impede, como autor, de desenvolver uma vers√£o comercial paralela. </li><li>  Telefones celulares.  Quero liberar um aplicativo para iOS / Android.  A julgar pela m√©trica Yandex, um quarto dos usu√°rios tenta tocar em um telefone ou tablet, mas acontece que eles t√™m dificuldade. </li><li>  Desenvolvimento.  Todo o trabalho √© feito no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> .  Quero continuar desenvolvendo o projeto, mas faz√™-lo sozinho √© dif√≠cil.  Os planos incluem adicionar multijogador, fazer tags, classifica√ß√µes e filtros no Workshop, adicionar pol√≠gonos para um mapa f√≠sico (montanhas, mares, pen√≠nsulas).  Ainda h√° muitas coisas interessantes, ent√£o um dos objetivos do artigo √© encontrar pessoas com a mesma opini√£o.  Outra op√ß√£o √© ir √† funda√ß√£o, por exemplo, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Python Software Foundation</a> e obter uma concess√£o. </li></ol><br>  Aqui est√° o que est√° no momento.  Obrigado por ler at√© o fim!  Voc√™ pode jogar aqui - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">geopuzzle.org</a> e ver o c√≥digo fonte no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> . <br><br><blockquote><img src="https://habrastorage.org/webt/jy/sd/rr/jysdrr7tqgfjt50wtcshw89ctho.png" align="left"><h3>  Minuto de cuidados UFO </h3><br>  Esse material pode causar sentimentos conflitantes; portanto, antes de escrever um coment√°rio, atualize algo importante em sua mem√≥ria: <br><br><div class="spoiler">  <b class="spoiler_title">Como escrever um coment√°rio e sobreviver</b> <div class="spoiler_text"><ul><li>  N√£o escreva coment√°rios ofensivos, n√£o seja pessoal. </li><li>  Abster-se de linguagem obscena e comportamento t√≥xico (mesmo de forma velada). </li><li>  Para denunciar coment√°rios que violam as regras do site, use o bot√£o "Denunciar" (se dispon√≠vel) ou o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">formul√°rio de coment√°rios</a> . </li></ul><br>  O que fazer se: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">menos karma</a> |  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conta bloqueada</a> <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C√≥digo dos autores Habr</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">habraetiket</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vers√£o completa das regras do site</a> </div></div></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427209/">https://habr.com/ru/post/pt427209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427195/index.html">Amanh√£ come√ßaremos a mat√°-lo, ou por que precisamos de engenheiros</a></li>
<li><a href="../pt427199/index.html">Familiaridade com o classificador eletromec√¢nico de cart√µes perfurados (excurs√£o ao in√≠cio do s√©culo XX)</a></li>
<li><a href="../pt427203/index.html">‚ÄúLight Music‚Äù: fale sobre quatro ferramentas eletr√¥nicas incomuns com fotoc√©lulas</a></li>
<li><a href="../pt427205/index.html">Habrakvest em homenagem ao 20¬∫ anivers√°rio do Grupo Mail.Ru: vencedores e respostas</a></li>
<li><a href="../pt427207/index.html">Funcion√°rios da Rockstar defendem empresa ap√≥s cr√≠ticas por semanas de trabalho de 100 horas</a></li>
<li><a href="../pt427211/index.html">Electron √© um flash para desktop</a></li>
<li><a href="../pt427215/index.html">Os microsservi√ßos precisam crescer, n√£o come√ßar com eles</a></li>
<li><a href="../pt427217/index.html">An√°lise de desempenho de servidores WSGI: parte dois</a></li>
<li><a href="../pt427219/index.html">Mensagens in√∫teis e sem bloqueio adiadas no MPI: an√°lise de luz e tutorial para aqueles que est√£o um pouco "no assunto"</a></li>
<li><a href="../pt427221/index.html">O que eu percebi no caminho para o meu sonho de intelig√™ncia artificial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>