<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎹 💊 🎆 RASA Chatbot：Parallels体验 👦 🤒 👆🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="聊天机器人行业正在蓬勃发展。 刚开始他们很愚蠢，可以与用户进行对话，领导并提供可能的答案。 然后，机器人变得更聪明了，并开始要求用户输入文本，以使答案中没有关键字。 机器学习的发展导致人们也可以通过语音与机器人通信。 但是，大多数解决方案与对话图的相同构造及其通过关键字在其节点之间的过渡没有很大的距...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RASA Chatbot：Parallels体验</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/parallels/blog/470754/"><img src="https://habrastorage.org/webt/v-/c5/a0/v-c5a0h7xtstdf2m4u5ivyr1gli.jpeg"><br><br> 聊天机器人行业正在蓬勃发展。 刚开始他们很愚蠢，可以与用户进行对话，领导并提供可能的答案。 然后，机器人变得更聪明了，并开始要求用户输入文本，以使答案中没有关键字。 机器学习的发展导致人们也可以通过语音与机器人通信。 但是，大多数解决方案与对话图的相同构造及其通过关键字在其节点之间的过渡没有很大的距离。 <a name="habracut"></a><br><br> 最近，在Parallels，我们决定优化一些内部流程，并创建一个满足自己需要的机器人作为实验。 经过短暂的搜索，我们决定尝试使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RASA</a>开源项目。 根据开发人员自己的说法，他们制作了第三代聊天机器人。 也就是说，该机器人不仅可以绕过状态图，还可以保存和使用前一个对话框的上下文。 迄今为止，现代聊天机器人的最佳插图如下所示： <br><br><img src="https://habrastorage.org/webt/wi/d6/ks/wid6ksu-v47injjfrc2gvccl2uw.png"><br><br> 也就是说，聊天机器人只是一组用于从图形中的一个点移动到另一个点的经过验证的规则。 如果您查看市场巨头的现有解决方案，则实际上与那里的规则集没有什么大不同。 粗略地说，这个集合看起来像这样： <br><br> 在XXX点的对话。 <br> 如果用户输入带有['buy'，'ticket']字样的报价，请转到“在哪里问” <br> 如果用户输入的报价为['buy'，'cutlet']，请转到“从以下地方询问” <br><br> 如果用户输入：“我想买一张去波尔图的票，”他们仍然会问他“你要去哪里？”，这显然是垃圾。 为了使对话更加人性化，您必须添加新的规则，以在有位置指示的情况下进行操作。 <br> 然后添加有关指示时间和地点的操作规则，依此类推。 <br><br> 这套规则会足够快地增长，但这并不是最坏的事情，所有“正确”的方式都可以得到描述，改进和完善。 <br><br> 最让人不愉快的是，与机器人不同，一个人是一个无法预测的生物，可以随时开始提出完全不同的要求。 也就是说，在机器人已经准备好预订机票的时候，人们可能会问“顺便问一下，天气怎么样？” 或“尽管不是，我想开车兜风，路要走多久？” <br><br> 但是，他也可以在选择城市之后，但在选择出发时间甚至选择他想去的地方之前询问。 基于状态机的漫游器将卡住，其机械伪脚将令人不安地抽搐，从而使用户感到沮丧。 <br><br> 在这里您可以（并且应该）使用机器学习。 但是随后出现了新问题：例如，如果您使用强化训练来预测到图形点的过渡，则会出现问题：在哪里可以获取此训练的数据，谁来评估答案的质量？ <br><br> 用户不太可能同意教您的机器人，并且如实践所示，用户社区可能根本不教您想要什么以及社会认为像样的机器人。 此外，该机器人在初始阶段将完全无法响应，这将使用户感到紧张，并且在原则上不会破坏此类支持。 <br><br> 在分析并考虑了现有机器人的所有缺点之后，RASA开发人员试图解决以下问题： <br><br><ul><li> 来自用户的任何输入都经过“意图确定”，即，使用机器学习输入的文本被映射到一个（或几个）意图。 另外，如有必要，实体与文本隔离，并添加到机器人的内存中。 </li><li> 除了使用的意图确定模型外，此过程与其他漫游器相似。 </li><li> 根据上下文使用机器学习来预测机器人的下一个动作，即机器人的先前动作，意图和内存状态。 </li><li> 同时，初始培训不需要太多数据，即使没有特定的示例和规则，该机器人也可以完全预测要执行的操作。 </li></ul><br> 更详细地考虑工作机制。 <br><br><h3>  <font color="#cc0000">拉萨国家大学</font> </h3><br> 让我们从机器人赖以生存的第一条鲸鱼开始。 这是一种自然语言理解，包括两个主要部分：意图的确定和实体的识别。 <br><br>  <b>目的检测</b> <br> 意向确定基于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Tensorflow</a>上实施的Facebook改进算法StarSpace。 在这种情况下，不使用单词的矢量表示的预训练模型，这使您可以规避这些表示的限制。 <br><br> 例如，在RASA算法中确定意图对于任何语言以及您在培训示例中指定的任何特定单词都适用。 当通过预先训练的矢量表示形式（例如GloVe或word2vec）实施时，该机器人的本地化及其在高度专业化领域的应用将带来足够的麻烦。 <br><br> 该算法在通过单词袋对句子进行矢量化并比较它们的“相似性”的基础上工作。 使用单词袋将意图和意图本身的示例转换为向量，并将其馈送到相应神经网络的输入中。 在神经网络的输出处，针对该特定单词集（相同的嵌入）获得一个向量。 <br><br> 训练以这样的方式进行：以两个相似矢量和k个相似矢量之间的成对距离（余弦或矢量乘积）之和的形式最小化损失函数。 因此，在训练之后，某个向量将与每个意图相关联。 <br><br> 收到用户输入后，提案将进行类似的矢量化处理，并遍历经过训练的模型。 此后，计算从所得向量到所有意图向量的距离。 对结果进行排名，突出显示最可能的意图并消除负值，即完全不同。 <br><br> 除了上述包子之外，这种方法还可以使您自动从提案中区分出多个意图。 例如：“是的，我了解这一点。 但是我现在怎么回家？” 识别为“ intent_confirm + intent_how_to_drive”，它使您可以与该机器人建立更人性化的对话框。 <br><br> 顺便说一句，在培训之前，您可以通过混合现有示例来增加示例数量，从而从示例中创建人工语句。 <br><br><h3>  <font color="#cc0000">RASA实体识别</font> </h3><br>  NLU的第二部分是从文本中提取实体。 例如，一个用户写道：“我想和两个朋友一起去一家中餐馆”，该机器人不仅必须突出意图，还必须突出对应的数据。 也就是说，请记住，餐厅里的菜应该是中国菜，游客人数是三。 <br><br> 为此，使用了基于条件随机场的方法，该方法已经在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">哈布雷（Habré）</a>上的某处进行了介绍，因此我不再赘述。 希望的人可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在Stanford网站上</a>阅读有关此算法<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的信息</a> 。 <br><br> 此外，我注意到您可以从基于模板的文本，文本（例如城市名称）中获取实体，以及连接到单独的Facebook Duckling服务，这也总有一天会写得很好。 <br><br><h3>  <font color="#cc0000">RASA的故事</font> </h3><br>  RASA Core所基于的第二条蓝鲸是故事。 故事的一般本质是与机器人进行真实对话的示例，其格式为意图反应。 基于这些故事，训练了循环神经网络（LSTM），该神经网络将先前的消息历史记录映射到所需的操作。 这使您不必严格设置对话框图，也不必确定所有可能的状态和它们之间的过渡。 <br><br> 通过足够数量的示例，网络将充分预测过渡的下一个状态，而不管是否存在特定示例。 不幸的是，有关此故事的确切数目尚不清楚，并且所有可以作为指导的是开发人员的短语：“越多越好”。 <br><br> 要训​​练系统，而不仅仅是在此处记录一些发明的对话框，还可以使用交互式训练。 <br><br> 有两种选择： <br>  1.让许多工程师与机器人进行对话，纠正错误的预测，对实体的错误定义以及对故事进行预测的动作。 <br><br>  2.将对话保存到数据库中，然后继续使用经过专门培训的工程师查看用户无法解决他的问题（即切换到某个人，或者漫游器承认他的无助且无法回答）的那些对话框。 <br><br> 为了理解故事的机制，最简单的方法是解析一些简单的例子。 假设在餐厅预订餐桌，这是开发人员在“源代码示例”部分中提供的示例。 首先，我们将确定我们的意图，然后我们将讲述两个故事。 <br><br> 意图及其示例： <br><br>  Intent_hello <br><ul><li> 你好 </li><li> 你好 </li><li> 阿罗哈 </li><li> 早安 </li></ul><br>  ... <br>  Intent_thanks <br><ul><li> 谢谢啦 </li><li> 好啊 </li><li> 谢谢啦 </li></ul><br>  ... <br>  Intent_request <br><ul><li> 再见跳过 </li></ul><br>  Intent_inform <br><ul><li> 再见跳过 </li></ul><br> 接下来，您需要放置机器人的内存，即确定将记录用户需求的插槽。 定义插槽： <br><br> 美食： <br> 类型：未完成 <br> 自动填充：false <br>  num_people： <br> 类型：未完成 <br> 自动填充：false <br><br> 现在，我们将展示一些示例（一小部分）以说明上面省略的意图。 示例中的括号是用于训练Ner_CRF的数据，格式为[实体]（存储的变量名称：我们存储的内容）。 <br><br>  intent_request_restaurant <br><ul><li> 我正在寻找餐厅 </li><li> 我可以为[六个人]获取[瑞典式]（美食）食物吗？（num_people：6） </li><li> 一家供应[加勒比]（美食）食品的餐厅 </li><li> 像餐厅一样的身份证 </li><li> 我正在寻找一家供应[地中海式]（美食）食品的餐厅 </li></ul><br>  intent_inform <br><ul><li>  [2]（人数） </li><li> 为[三]（人数：3）人 </li><li> 仅仅[一个]（人数：1）人 </li><li> 怎么样[东方东方]（美食） </li><li> 那（印度）美食呢？ </li><li> 呃，[土耳其]（美食）类型的食物怎么样 </li><li> 嗯（英语）（美食） </li></ul><br> 现在我们确定主要路径的历史： <br><br>  *打招呼 <br>  -utter_greet <br>  * Intent_request <br>  -restaurant_form <br>  -形式{“ name”：“ restaurant_form”} <br>  -形式{“ name”：null} <br>  -action_book_restaurant <br>  *谢谢 <br>  -utter_noworries <br><br> 这就是完美世界的完美机器人。 如果用户在第一句话中立即指出了所有必要的数据，则将保留一个表。 例如，他写道：“我想在西班牙餐厅预订5个人的桌子”。 在这种情况下，num_people将为5，并且美食-西班牙文，这足以使漫游器可以对预订进行进一步的操作。 <br><br> 但是，如果查看示例，您会发现数据并不总是以所需的数量出现，有时甚至根本不存在。 因此出现了非核心对话。 <br><br> 假设请求中没有关于厨房的数据，即类似于以下对话框： <br> 你好 <br> 你好 <br> 我想预定五个人的餐厅 <br>  ... <br><br> 为了使其正确完成，您需要确定以下表单的历史记录： <br>  *打招呼 <br>  -utter_greet <br>  * Intent_request <br>  -restaurant_form <br>  -形式{“ name”：“ restaurant_form”} <br>  -广告位{“ requested_slot”：“ num_people”} <br>  -utter_ask_coven <br>  *形式：告知{“美食”：“墨西哥”} <br>  -广告位{“美食”：“墨西哥”} <br>  -形式：restaurant_form <br>  ... <br><br> 最好的部分是，如果您为多个厨房创建故事，那么遇到陌生人时，该机器人会自行预测下一步的行动，尽管不确定。 同时，如果您创建了一个类似的故事，但是在其中填充了“ cuisine”（烹饪）插槽而不是“ num_people”（插槽）插槽，则该漫游器绝对不会在乎将以何种顺序提供有关表保留参数的信息。 <br><br> 有两种方法可以阻止试图引导机器人通过正确途径进行的任何尝试：识别可能的故事以谈论“什么都不做”，或者阻止所有尝试进行此类对话的尝试-回答值得重新做生意。 <br><br> 由于我们公司正处于进入聊天机器人世界的惊人旅程的开始，因此有可能会有新的文章介绍我们收集的耙子和所做的事情。 敬请期待！ <br><br><img src="https://habrastorage.org/webt/23/uz/eq/23uzeqjeu53ummt2ywqdlaiubmi.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN470754/">https://habr.com/ru/post/zh-CN470754/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN470742/index.html">CUDA上的Navier-Stokes方程和流体模拟</a></li>
<li><a href="../zh-CN470744/index.html">数学揭示了活细胞反馈的秘密</a></li>
<li><a href="../zh-CN470746/index.html">Facebook使对话成为下一个受欢迎的界面</a></li>
<li><a href="../zh-CN470750/index.html">亚马逊抓住了热门产品</a></li>
<li><a href="../zh-CN470752/index.html">解析微信支付</a></li>
<li><a href="../zh-CN470756/index.html">为Apollo在线聊天Node.js创建一个后端应用程序</a></li>
<li><a href="../zh-CN470758/index.html">2019年9月病毒活动概述</a></li>
<li><a href="../zh-CN470772/index.html">TON：建议和最佳做法</a></li>
<li><a href="../zh-CN470774/index.html">Python 3.8中的新类型注释（协议，最终，TypedDict，文字）</a></li>
<li><a href="../zh-CN470778/index.html">希捷ST2000DM008驱动器评测：快速的“两个”而不会过高的价格</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>