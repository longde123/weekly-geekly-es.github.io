<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🔬 🌏 🛢️ Carte de débogage à usage spécial 🔛 🉐 🐲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Présentation 
 Lors du développement d'un appareil pour tester son circuit électrique, une carte de débogage est généralement utilisée. Nos développeu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Carte de débogage à usage spécial</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/readyforsky/blog/429822/"><h3>  Présentation </h3><br>  Lors du développement d'un appareil pour tester son circuit électrique, une carte de débogage est généralement utilisée.  Nos développeurs ne font pas exception ici, le bénéfice des aspects positifs de cette approche est évident: les coûts sont inférieurs à la production d'un prototype ou d'un lot de test.  Et si des erreurs apparaissent dans le processus ou si de nouvelles solutions apparaissent pour certaines tâches, elles sont beaucoup plus faciles à appliquer. <br><br>  Cependant, bien souvent, nous étions confrontés au fait que les débogages proposés sur le marché nécessitaient un raffinement important et / ou des modules supplémentaires.  En même temps, des restrictions supplémentaires sont apparues en fonction d'un appareil particulier.  Si nous développons une carte de contrôle et un module sans fil à partir de zéro, alors l'ordre relatif est sur la planche à pain. <br><br>  Les problèmes commencent lorsqu'un deuxième scénario, plus fréquent, se déroule, et nous avons affaire à la modernisation d'une technique déjà développée.  En raison du principal facteur limitant - le prix final du produit - la modification du circuit électrique doit être minime.  Au stade de l'aménagement, de nombreuses «fermes collectives» bien-aimées doivent être créées. <br><br><img src="https://habrastorage.org/webt/l_/p8/xs/l_p8xs1np6taptdzshxddikzogg.jpeg"><br>  <i><font color="gray"><a href="">Source</a></font></i> <br><br><h3>  Que faire </h3><a name="habracut"></a><br>  Les tableaux de commande des appareils électroménagers sont généralement simples et peu technologiques - leur base imprimée est monocouche, d'un côté, elle n'a pas de métallisation et de masque.  La simplicité de ces cartes est déterminée par le prix final des appareils eux-mêmes - plus la production d'équipement est compliquée, plus elle devra être chère.  Il est clair que le consommateur de masse ne voudra pas et ne paiera pas trop cher pour des complications. <br><br><img src="https://habrastorage.org/webt/ad/lw/qh/adlwqhcadvh5rkhk_-yjjq4sbu0.jpeg"><br>  <i><font color="gray">Représentant typique du tableau de commande des appareils ménagers</font></i> <br><br>  Au cours du travail, nous avons fait apparaître plusieurs modules sans fil standard de RM2 à RM10.  Ces modules, basés sur la solution SoC, agissent comme un contrôleur central et vous permettent également de contrôler l'appareil dans les airs. <br><br>  Cette gamme de modules sans fil est conçue de manière à pouvoir être installée sur la carte de commande, en la modifiant au minimum.  Pour assurer une vitesse de développement élevée, il était urgent de fabriquer une carte de débogage, dans laquelle il y aurait déjà tout ce qui est nécessaire pour les appareils ménagers intelligents. <br><br>  Un autre argument en faveur de la publication du tableau de débogage a été l'ouverture de la plate-forme Ready for Sky pour les développeurs tiers.  Nous avons commencé à recevoir des suggestions et des demandes par e-mail pour permettre aux développeurs indépendants ou aux développeurs DIY d'accéder à la plateforme.  Une offre similaire est venue même dans le PM de Khabrov. <br><br><h3>  Débogage </h3><br>  Nous l'avons donc fait - la première version du RFS-DEV001.  Le cœur de la carte de débogage est le module RM10.  Basé sur la puce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nRF52832</a> , conforme à la norme Bluetooth 5, il prend en charge les réseaux maillés et Bluetooth Low Energy.  En outre, une horloge en temps réel est placée sur le débogage, trois options d'alimentation sont implémentées (batterie, USB à partir d'un PC, externe à partir d'une source d'alimentation).  Deux boutons, un buzzer et une diode RGB pour signaler et clignoter.  Tous les composants de la carte sont sélectionnés parmi ceux qui sont maintenant utilisés dans la production de masse d'appareils électroménagers. <br><br>  En plus de tester le schéma de contrôle, le développeur sera en mesure de déterminer et d'optimiser immédiatement le coût des composants, ce qui affectera finalement le prix de son appareil intelligent. <br><br><img src="https://habrastorage.org/webt/qj/xn/oj/qjxnojqwddazdxnzgy3gj6len-m.jpeg"><br><br>  Le tableau sera pratique pour les kiosques de bricolage, parmi lesquels il y a aussi ceux pour qui la programmation n'est pas un point fort ou qui commencent tout juste à apprendre.  Nous avons vu une opportunité de faciliter leur travail, par exemple, pour rendre la carte Arduino compatible.  Il est clair qu'il s'agit d'un format amateur et éducatif, mais son utilisation, d'une part, n'annule pas le travail professionnel avec le débogage, et d'autre part, améliore considérablement la commodité des spécialistes entrant dans la profession. <br><br>  Il serait tout à fait possible de répartir la redevance entre les universités et les écoles techniques spécialisées pour l'enseignement des étudiants juniors, contribuant ainsi aux futurs spécialistes. <br><br><div class="spoiler">  <b class="spoiler_title">Liste des plug-ins de travail garantis</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Capteur de</a> pression atmosphérique et de température <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BMP180</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Capteur de</a> pression atmosphérique et de température <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BMP280</a> </li><li>  Capteur d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">humidité</a> </li><li>  Capteur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IR</a> </li><li>  Capteur de gaz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MQ-135</a> </li><li>  Capteur de gaz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MQ-9</a> </li><li>  Capteur de mouvement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HC-SR505</a> </li><li>  Capteur de mouvement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HC-SR04</a> </li><li>  Capteur d'inclinaison <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SW-520D</a> </li><li>  Accéléromètre, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">magnétomètre MPU9250</a> </li><li>  Accéléromètre, magnétomètre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GY-85</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Capteur de</a> lumière et de proximité <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AP3216</a> </li><li>  Capteur d'intensité lumineuse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GY-2561</a> </li><li>  Module de reconnaissance de gestes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">APDS-9960</a> </li><li>  Module de commande de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moteur pas à pas de blindage de moteur Arduino</a> </li><li>  Module de connexion add.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Blindage hôte</a> USB <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Arduino USB</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Blindage de relais Arduino 4</a> </li><li>  Module de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">carte SD sans fil</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Module</a> GSM (GPRS) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SIM900</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Émetteur-</a> récepteur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LC12S</a> </li><li>  Module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NRF905</a> 433/868 MHz </li><li>  Module IR <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">XY-MK-5V</a> </li><li>  Module RFID / NFC <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PN532</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Affichage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Affichage</a> </li><li>  Module GPS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MIKROE-1032 GPS Click</a> </li><li>  Module GLONASS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MIKROE-1895 GNSS3</a> </li><li>  Module clavier 4x4 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MIKROE-86</a> </li><li>  Réseau de diodes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MIKROE-1881</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Blindage Adafruit NeoPixel pour</a> réseau de diodes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Arduino</a> </li><li>  Dans le même temps, nous prévoyons de sortir nos modules, également sur la base de composants utilisés dans la production de masse.  Si vous avez des idées ou des suggestions, écrivez dans les commentaires les modules dont vous pourriez avoir besoin. </li></ul><br></div></div><br><img src="https://habrastorage.org/webt/3c/wq/2t/3cwq2tm-xkqr-djumc_doqtksba.jpeg"><br><br><h3>  API </h3><br>  Étant donné que le débogage ne sera pas un élément utile de textolite sans code de programme, il vaut la peine de parler un peu de l'API, qui est conçue pour permettre au développeur de se concentrer sur les fonctionnalités de son appareil dans le cadre de l'ouverture de la plateforme, en faisant abstraction de nombreux paramètres Bluetooth, etc. <br><br>  Ainsi, l'API R4S se compose de: <br><br><ul><li>  un ensemble de bibliothèques qui fournissent le fonctionnement de services typiques et spécifiques, par exemple, la bibliothèque principale contenant les paramètres Bluetooth de base et les bibliothèques axées sur la fonctionnalité des appareils; </li><li>  des exemples d'appareils ou de fonctions implémentés sur l'API; </li><li>  pilotes pour les périphériques connectés à la carte de débogage, voir la liste ci-dessus. </li></ul><br>  Vous pouvez jeter un coup d'œil aux capacités de l'API en utilisant l'exemple de la création d'effets d'éclairage à l'aide d'une lampe LED grâce à un changement en douceur de la luminosité à l'aide des courbes de Bézier. <br><br><img src="https://habrastorage.org/webt/fj/fs/3l/fjfs3lzggmwwcwgcl5fx2cezsbu.gif"><br>  <i><font color="gray">Après avoir basculé en mode peyring, l'ampoule changera en douceur la couleur de la lueur</font></i> <br><br>  Dans le fichier principal, vous devrez déterminer indépendamment les informations de base, par exemple, les informations sur le firmware, déclarer les paramètres (emplacement du chargeur de démarrage, tampon pour la mise à jour du firmware, etc.). <br><br><pre><code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/** Firmware information structure */</span></span> R4S_FW_INFO_DEF(application, <span class="hljs-number"><span class="hljs-number">0x26000</span></span>) = { .version = { .major = <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** Product version (major) */</span></span> .minor = <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** Product version (minor) */</span></span> }, .name = { <span class="hljs-comment"><span class="hljs-comment">/** Device name */</span></span> .name = "RGB Lightbulb", .len = sizeof("RGB Lightbulb") - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-comment"><span class="hljs-comment">/** Without \0 symbol at the end*/</span></span> } }; <span class="hljs-comment"><span class="hljs-comment">/** The init structure with the device information wich required for ReadyForSky library. */</span></span> R4S_CONFIG_DEF(r4s_init_conf) = { .p_fw_info = &amp;application, .production_key = <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** * The production key allows integrating the device into ReadyForSky infrastructure. * Contact support to get the production key for your device. */</span></span> .bootloader = { .start_address = <span class="hljs-number"><span class="hljs-number">0x7B000</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** Bootloader start address */</span></span> .mbr_param_page = <span class="hljs-number"><span class="hljs-number">0x7f000</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** MBR param page address */</span></span> .fw_upgrade_buf = { <span class="hljs-comment"><span class="hljs-comment">/** The firmware upgrade buffer is used for background flashing. * The region size should more than softdevice + bootloader + application size + 4096 */</span></span> .p_api = &amp;nrf_fstorage_sd, <span class="hljs-comment"><span class="hljs-comment">/** fstorage api */</span></span> .start_addr = <span class="hljs-number"><span class="hljs-number">0x35000</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** start address of firmware upgrade buffer */</span></span> .end_addr = <span class="hljs-number"><span class="hljs-number">0x78000</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** end address of firmware upgrade buffer */</span></span> .chunk_size = <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** default chunk size */</span></span> } }, .company_info = { .p_company_name = "Imperium of Mankind", }, .watchdog = { .timeout_ms = <span class="hljs-number"><span class="hljs-number">5000</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** If loop or priority will not finish after 5 seconds watchdog will reset microcontroller automatically */</span></span> }, .low_power_mode_enable = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** Low power ble settings */</span></span> }</code> </pre> <br>  Le développement de l'appareil est similaire au développement d'Arduino.  Il y a une fonction de configuration pour initialiser les modules principaux et boucle où le traitement a lieu.  La fonctionnalité de l'application elle-même est divisée en modules - en fonction des différentes opérations effectuées. <br><br><pre> <code class="hljs java"><span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@brief</span></span></span><span class="hljs-comment"> Application initialisation * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> none */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">app_setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ m_pairing_init(m_led_ctrl_pairing_handler); m_led_ctrl_init(); } <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@brief</span></span></span><span class="hljs-comment"> Application loop * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> true - sleep is not allowed * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> false - All modules have completed operation, the mcu can enter into sleep mode. (the next loop iteration will be after any interrupt) */</span></span> <span class="hljs-function"><span class="hljs-function">bool </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">app_loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NRF_LOG_PROCESS(); }</code> </pre><br>  Une fois les ressources déclarées dans le fichier («m_resources.c») - par exemple, les animations d'ampoule, les affectations de broches (plusieurs groupes de LED), les couleurs, etc., la bibliothèque déterminera elle-même le reste des paramètres. <br><br><pre> <code class="hljs mel"><span class="hljs-comment"><span class="hljs-comment">/** Animation timer definition for m_rgb */</span></span> APP_TIMER_DEF(animation_timer_id); <span class="hljs-comment"><span class="hljs-comment">/** Leds pin map for m_rgb*/</span></span> static const r4s_rgb_ctrl_led_t m_leds_map[LEDS_COUNT] = { { .<span class="hljs-keyword"><span class="hljs-keyword">color</span></span> = { .red_pin = RED_LEDS_0_PIN, .green_pin = GREEN_LEDS_0_PIN, .blue_pin = BLUE_LEDS_0_PIN, } }, { .<span class="hljs-keyword"><span class="hljs-keyword">color</span></span> = { .red_pin = RED_LEDS_1_PIN, .green_pin = GREEN_LEDS_1_PIN, .blue_pin = BLUE_LEDS_1_PIN, } }, { .<span class="hljs-keyword"><span class="hljs-keyword">color</span></span> = { .red_pin = RED_LEDS_2_PIN, .green_pin = GREEN_LEDS_2_PIN, .blue_pin = BLUE_LEDS_2_PIN, } }, }; <span class="hljs-comment"><span class="hljs-comment">/** PWM map for m_rgb */</span></span> static const r4s_rgb_ctrl_pwm_map_elem_t m_pwm_map[LEDS_COUNT] = { { .<span class="hljs-keyword"><span class="hljs-keyword">color</span></span> = { .p_pwm_red = &amp;pwm0, .p_pwm_green = &amp;pwm0, .p_pwm_blue = &amp;pwm0, } }, { .<span class="hljs-keyword"><span class="hljs-keyword">color</span></span> = { .p_pwm_red = &amp;pwm1, .p_pwm_green = &amp;pwm1, .p_pwm_blue = &amp;pwm1, } }, { .<span class="hljs-keyword"><span class="hljs-keyword">color</span></span> = { .p_pwm_red = &amp;pwm2, .p_pwm_green = &amp;pwm2, .p_pwm_blue = &amp;pwm2, } }, }; <span class="hljs-comment"><span class="hljs-comment">/** RGB lamp definition */</span></span> R4S_RGB_CTRL_DEF(m_rgb, m_leds_map, m_pwm_map, &amp;animation_timer_id, LEDS_COUNT, <span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre><br>  Après le collage, l'application reçoit des données que l'appareil peut faire, une ampoule dans notre cas, et affiche les informations pertinentes. <br><br><img src="https://habrastorage.org/webt/v9/pt/n7/v9ptn7wkq4rorl-xsajelyco_1g.png" width="350" height="500"><br><br>  De plus, grâce à l'application, vous pouvez contrôler les paramètres - intensité, couleur, température, etc. <br><br><img src="https://habrastorage.org/webt/fi/pb/1j/fipb1jnryioge5-h8dwtiik0llu.gif"><br>  <font color="gray"><i>Maintenant, le code est en cours d'élaboration sur le débogage du prototype, alors laissez la différence entre la carte et les images supérieures ne vous dérange pas.</i></font> <br><br>  Les fonctionnalités supplémentaires incluent: <br><br><ul><li>  Multiconnect - plusieurs smartphones connectés simultanément au module.  Cette fonctionnalité peut potentiellement provoquer des problèmes lorsque vous essayez de contrôler l'appareil en même temps.  Nous avons essayé de prévenir ces problèmes, y compris par le biais de notifications sur tous les smartphones connectés - si un paramètre change avec un téléphone, les informations sur la nouvelle valeur du paramètre seront immédiatement envoyées au reste; </li><li>  Clignotement rapide - la taille du paquet transmis via Bluetooth dépend du <abbr title="Unité de transmission maximale">MTU</abbr> .  Avec une augmentation de MTU, le processus de clignotement ira plus vite à mesure que la taille du paquet augmentera; </li><li>  Une liste des erreurs typiques déterminées par la fonction du microcontrôleur.  Si une erreur est détectée, un texte comme «Pas assez de mémoire pour le périphérique logiciel.  Pour plus d'informations, activez le débogage sdm. ". </li></ul><br>  Pour travailler avec le débogage, une application d'ingénierie R4S sera publiée avec les mêmes capacités que la normale, mais c'est à travers elle que la carte est contrôlée.  En principe, grâce à une application d'ingénierie, vous pouvez gérer les appareils assemblés dans votre appartement - une belle pièce pour le bricolage.  Cela devrait aider les développeurs novices à prendre en charge l'appareil.  Dans l'application principale R4S, un tel appareil apparaîtra après coordination et contrôle qualité de notre part. <br><br>  Nous utiliserons également le débogage dans le travail quotidien de l'entreprise, y compris lors de la formation de nouveaux employés.  Habrovchane, comme vous le pensez, va décoller?  Seriez-vous intéressé à travailler avec un tel débogage? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429822/">https://habr.com/ru/post/fr429822/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429812/index.html">Apple: le coprocesseur T2 peut bloquer la réparation bricolage des nouveaux MacBook et MacMini</a></li>
<li><a href="../fr429814/index.html">Lorsque Java meurt enfin, que faire et que va-t-il arriver à JPoint</a></li>
<li><a href="../fr429816/index.html">OpenSceneGraph: construire à partir des sources et de Hello World</a></li>
<li><a href="../fr429818/index.html">Intel Vision Accelerator - Deep Learning dans chaque maison</a></li>
<li><a href="../fr429820/index.html">Le protocole HTTP sur QUIC devient officiellement HTTP / 3</a></li>
<li><a href="../fr429824/index.html">CI pour frontend: Gitlab, Traefik, Docker</a></li>
<li><a href="../fr429826/index.html">«Batteries» portables: micro-supercondensateurs textiles à base de PEDOT-Cl</a></li>
<li><a href="../fr429828/index.html">(Pas seulement) étudiant de première année: Université. Instruction 2.0</a></li>
<li><a href="../fr429832/index.html">Traduction du livre d'Andrew Un, Passion for Machine Learning, chapitres 28-29</a></li>
<li><a href="../fr429836/index.html">Au revoir, Electron. Bonjour bureau PWA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>