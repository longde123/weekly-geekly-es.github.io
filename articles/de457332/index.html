<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèΩ üïµüèø üë®üèª‚Äçüî¨ Wie kann man schnell interessante Warnungen sehen, die vom PVS-Studio Analyzer f√ºr C- und C ++ - Code generiert wurden? üÜë üïï üéôÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Von Zeit zu Zeit fragen Programmierer, die sich mit dem PVS-Studio-Codeanalysator vertraut machen: ‚ÄûGibt es eine Liste von Warnungen, die Fehler genau...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie kann man schnell interessante Warnungen sehen, die vom PVS-Studio Analyzer f√ºr C- und C ++ - Code generiert wurden?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/457332/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df3/c29/8f2/df3c298f21cb71d0c7c699b7e27269d3.png"></div><br>  Von Zeit zu Zeit fragen Programmierer, die sich mit dem PVS-Studio-Codeanalysator vertraut machen: ‚ÄûGibt es eine Liste von Warnungen, die Fehler genau anzeigen?‚Äú  Es gibt keine solche Liste, da sich uninteressante (falsche) Warnungen in einem Projekt und in einem anderen als sehr wichtig und n√ºtzlich herausstellen.  Es ist jedoch durchaus m√∂glich, den Analysator mit den interessantesten Warnungen bekannt zu machen.  Schauen wir uns dieses Thema genauer an. <br><a name="habracut"></a><br>  Das Problem ist, dass der Programmierer beim ersten Start in der Regel eine Vielzahl von Warnungen erh√§lt, in denen er ‚Äûertrinkt‚Äú.  Nat√ºrlich hat er den Wunsch, sich mit den interessantesten Warnungen vertraut zu machen, um zu verstehen, ob er die ganze Zeit √ºberhaupt verbringen sollte.  Gro√üartig, hier sind drei einfache Schritte, mit denen Sie die interessantesten positiven Aspekte kennenlernen k√∂nnen. <br><br><h2>  Schritt 1 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/648/436/d98/648436d98521380495f1c9f8ee384646.png"></div><br><br>  Deaktivieren Sie alle Arten von Warnungen mit Ausnahme von Allgemein (GA).  Ein h√§ufiger Fehler: Aktivieren Sie alle Arten von Warnungen.  F√ºr unerfahrene Benutzer scheint es, dass je mehr Sie es einschalten, desto besser.  Es ist nicht so!  Es gibt Diagnoses√§tze wie 64-Bit-√úberpr√ºfungen und MISRA-Regeln, die nur mit einer klaren Vorstellung davon verwendet werden sollten, was es ist und wie mit ihnen gearbeitet werden soll.  Wenn Sie beispielsweise die MISRA-Diagnose f√ºr ein gew√∂hnliches Anwendungsprogramm aktivieren, ertrinken Sie in Zehntausenden, Tausenden oder Hunderttausenden von Nachrichten wie: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V2506</a> .  Misra.  Eine Funktion sollte am Ende einen einzigen Austrittspunkt haben. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V2507</a> .  Misra.  Der Hauptteil einer Anweisung loop \ conditional sollte in geschweiften Klammern stehen. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V2523</a> .  Misra.  Alle Ganzzahlkonstanten vom Typ ohne Vorzeichen sollten das Suffix 'u' oder 'U' haben. </li></ul><br>  Die meisten MISRA-Warnungen weisen nicht auf Fehler hin, aber Code riecht.  Nat√ºrlich beginnt eine Person, Fragen zu stellen.  Wie kann man in der Masse all dieser Warnungen etwas Interessantes finden?  Diagnose unter welchen Zahlen sollte er suchen?  Das sind die falschen Fragen.  Sie m√ºssen nur das MISRA-Kit deaktivieren.  Dies ist der Standard zum Schreiben von Qualit√§tscode f√ºr eingebettete Ger√§te.  Das Wesentliche des Standards: Den Code extrem einfach und verst√§ndlich zu machen.  Versuchen Sie nicht, es dort anzuwenden, wo es unangemessen ist. <br><br>  Hinweis  Ja, der MISRA-Standard enth√§lt Regeln, mit denen echte Fehler identifiziert werden sollen.  Beispiel: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V2538</a> - Der Wert der nicht initialisierten Variablen sollte nicht verwendet werden.  Aber haben Sie keine Angst, den MISRA-Standard zu deaktivieren.  Sie werden nichts verlieren.  Echte Fehler werden weiterhin in der Allzweckdiagnose (GA) gefunden.  Beispielsweise wird dank der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V614-</a> Diagnose eine nicht initialisierte Variable gefunden. <br><br><h2>  Schritt 2 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f30/9c1/d2f/f309c1d2fed7a2736170dad987cd4460.png"></div><br><br>  Jeder statische Analysator erzeugt beim ersten Start falsch positive Ergebnisse und erfordert eine bestimmte Konfiguration.  Damit kann man nichts anfangen, aber es ist nicht so be√§ngstigend, wie es scheinen mag.  Selbst eine einfache schnelle Einrichtung erm√∂glicht es Ihnen, die meisten falschen Warnungen zu entfernen und sich mit einem bereits angemessenen Bericht vertraut zu machen.  Wir werden nicht n√§her darauf eingehen, da ich zum Beispiel in diesem Artikel viele Male dar√ºber geschrieben habe: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eigenschaften des PVS-Studio-Analysators am Beispiel der EFL-Kernbibliotheken, 10-15% der falsch positiven Ergebnisse</a> ." <br><br>  Verbringen Sie ein wenig Zeit damit, explizit irrelevante Warnungen zu deaktivieren und Fehlalarme aufgrund von Makros zu bek√§mpfen.  Makros sind im Allgemeinen die Hauptursache f√ºr Fehlalarme, da √ºberall dort eine Warnung angezeigt wird, wo ein fehlgeschlagenes Makro verwendet wird.  Um Warnungen in Makros zu unterdr√ºcken, k√∂nnen spezielle Kommentare neben deren Deklaration eingef√ºgt werden.  Das Format zum Schreiben von Kommentaren wird in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> n√§her erl√§utert. <br><br>  Ja, die Ersteinrichtung dauert etwas, verbessert jedoch die Wahrnehmung des Berichts erheblich, indem st√∂rende Ger√§usche vermieden werden.  Nehmen Sie sich daf√ºr etwas Zeit.  Wenn es irgendwelche Schwierigkeiten oder Fragen gibt, sind wir immer bereit zu helfen und schlagen vor, wie der Analysator am besten konfiguriert werden kann.  F√ºhlen Sie sich frei zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">schreiben</a> und uns Fragen zu stellen. <br><br><h2>  Schritt 3 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f87/0ec/c49/f870ecc49989743ae8caea3c745e602e.png"></div><br><br>  Beginnen Sie mit dem Lernen von Warnungen ab Stufe 1.  Und erst dann schauen Sie sich 2 und 3 an. Warnstufen sind nichts anderes als die Zuverl√§ssigkeit der Warnung.  Warnungen der Stufe 1 weisen eher auf einen echten Fehler als auf 2 hin. <br><br>  Wir k√∂nnen sagen, dass Sie bei Auswahl von ‚ÄûWatch Level 1‚Äú die Taste ‚ÄûWatch the Interestest Error‚Äú dr√ºcken. <br><br>  Die Klassifizierung von PVS-Studio-Warnungen nach Ebenen wird im Artikel ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie und warum statische Analyseger√§te mit falsch positiven Ergebnissen umgehen</a> ‚Äú ausf√ºhrlicher beschrieben. <br><br><h2>  Warum gibt es noch keine Liste? </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df2/95f/70b/df295f70b19562c12916ec578022829f.png"></div><br><br>  Eine Idee mit einer Liste der n√ºtzlichsten Warnungen mag jedoch immer noch vern√ºnftig erscheinen.  Lassen Sie mich anhand eines praktischen Beispiels zeigen, dass der Nutzen der Diagnostik relativ ist und vom Projekt abh√§ngt. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beachten</a> Sie die Warnung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V550</a> .  Eine Warnung zeigt einen m√∂glichen Fehler an, da der Operator == oder! = Zum Vergleichen von Gleitkommazahlen verwendet wird. <br><br>  Die meisten Entwickler, mit denen ich gesprochen habe, glauben, dass diese Diagnose von geringem Nutzen ist, und schalten sie aus, da alle positiven Ergebnisse f√ºr ihr Projekt falsch sind.  Und deshalb hat diese Diagnose eine geringe Zuverl√§ssigkeit und befindet sich auf der 3. Ebene. <br><br>  In der Tat werden in den meisten Anwendungen die Float / Double-Typen in sehr einfachen Algorithmen verwendet.  Und oft wird ein Vergleich mit einer Konstante nur verwendet, um zu √ºberpr√ºfen, ob ein Standardwert festgelegt ist oder ob er sich ge√§ndert hat.  In diesem Fall ist eine genaue √úberpr√ºfung durchaus angebracht.  Ich werde dies mit Pseudocode erkl√§ren. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> value = <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsUserInputNewValue()) value = GetUserValue(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value == <span class="hljs-number"><span class="hljs-number">1.0f</span></span>) DefaultBehavior(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Foo(value);</code> </pre> <br>  Hier ist der Vergleich <i>(Wert == 1.0f)</i> korrekt und sicher. <br><br>  Bedeutet dies, dass der V550 eine uninteressante Diagnose ist?  Nein.  Es h√§ngt alles vom Projekt ab.  Ich zitiere ein Fragment aus dem Artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie wir die statische Analyse in unserem Projekt eines Trainingssimulators f√ºr endovaskul√§re Chirurgie getestet haben</a> ", der von einem unserer Benutzer geschrieben wurde. <br><br>  Worauf der statische Analysator hier unsere Aufmerksamkeit lenkt: <br><br>  V550 Ein ungerader genauer Vergleich: t! = 0. Es ist wahrscheinlich besser, einen Vergleich mit definierter Genauigkeit zu verwenden: fabs (A - B)&gt; Epsilon.  objectextractpart.cpp 3401 <br><br><pre> <code class="cpp hljs">D3DXVECTOR3 N = VectorMultiplication( VectorMultiplication(V-VP, VN), VN); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Qsqrt(Scalar(N, N)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { N/=t; V = V - N * DistPointToSurface(V, VP, N); }</code> </pre> <br>  √Ñhnliche Fehler werden in dieser Bibliothek h√§ufig wiederholt.  Ich werde nicht sagen, dass mich das √ºberrascht hat.  Bereits zuvor bin ich in diesem Projekt auf falsche Arbeit mit Gleitkommazahlen gesto√üen.  Es gab jedoch keine Ressourcen, um die Quellen daf√ºr systematisch zu √ºberpr√ºfen.  Den Ergebnissen der √úberpr√ºfung zufolge wurde klar, dass Sie dem Entwickler etwas zum Lesen geben m√ºssen, um seinen Horizont in Bezug auf die Arbeit mit Gleitkommazahlen zu erweitern.  Ich warf ihm Links zu ein paar guten Artikeln.  Schauen wir uns das Ergebnis an.  Es ist schwer eindeutig zu sagen, ob dieser Fehler echte Fehlfunktionen im Programm verursacht.  Die aktuelle L√∂sung stellt eine Reihe von Anforderungen an das anf√§ngliche polygonale Netzwerk von Arterien, entlang derer die Ausbreitung einer r√∂ntgendichten Substanz simuliert wird.  Wenn die Anforderungen nicht erf√ºllt sind, kann das Programm abst√ºrzen oder offensichtlich falsch funktionieren.  Einige dieser Anforderungen werden analytisch und andere empirisch ermittelt.  Es ist m√∂glich, dass dieser zweite Teil der Anforderungen nur durch falsche Arbeit mit Gleitkommazahlen entsteht.  Es ist zu beachten, dass nicht alle gefundenen F√§lle eines exakten Vergleichs von Gleitkommazahlen ein Fehler waren. <br><br>  Wie Sie sehen, ist das, was bei einigen Projekten nicht interessant ist, f√ºr andere von Interesse.  Dies macht es unm√∂glich, eine Liste der "interessantesten" zu erstellen. <br><br>  Hinweis  Es ist m√∂glich, die Warnstufe √ºber die Einstellungen einzustellen.  Wenn Sie beispielsweise der Meinung sind, dass die V550-Diagnose besondere Aufmerksamkeit verdient, k√∂nnen Sie sie von der dritten in die erste Ebene verschieben.  Diese Art von Einstellungen wird in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation beschrieben</a> (siehe "So stellen Sie Ihren Pegel f√ºr bestimmte Diagnosen ein"). <br><br><h2>  Fazit </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37d/d9e/ecd/37dd9eecd44e33d66c2993ad552e11f7.png"></div><br><br>  Jetzt wissen Sie, wie Sie mit dem Studium der Warnungen des Analysators beginnen k√∂nnen, wenn Sie die interessantesten ber√ºcksichtigen.  Vergessen Sie nicht, in der Dokumentation nachzuschauen, um sich mit der detaillierten Beschreibung der Warnungen vertraut zu machen.  Manchmal kommt es vor, dass hinter einer auf den ersten Blick unscheinbaren Warnung die H√∂lle steckt.  Ein Beispiel f√ºr eine solche Diagnose: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V597</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V1026</a> .  Vielen Dank f√ºr Ihre Aufmerksamkeit. <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> </p><br><br>  Wenn Sie diesen Artikel einem englischsprachigen Publikum zug√§nglich machen m√∂chten, verwenden Sie bitte den Link zur √úbersetzung: Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie kann man schnell interessante Warnungen des PVS-Studio-Analysators f√ºr C- und C ++ - Code √ºberpr√ºfen?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457332/">https://habr.com/ru/post/de457332/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de457316/index.html">Wie das Rollenspiel in der realen Welt f√ºr G√§ste Armeniens mit Reisen durch die H√§lfte des Landes arrangiert wird</a></li>
<li><a href="../de457324/index.html">Digitale Veranstaltungen in Moskau vom 24. bis 30. Juni</a></li>
<li><a href="../de457326/index.html">Failover-Cluster PostgreSQL + Patroni. Implementierungserfahrung</a></li>
<li><a href="../de457328/index.html">Kategorien anstelle von Verzeichnissen oder das semantische Dateisystem f√ºr Linux</a></li>
<li><a href="../de457330/index.html">Wie kann man schnell interessante Warnungen des PVS-Studio-Analysators f√ºr C- und C ++ - Code √ºberpr√ºfen?</a></li>
<li><a href="../de457334/index.html">TacacsGUI, Konfigurationsmanager</a></li>
<li><a href="../de457336/index.html">Die Folgen einer vorzeitigen Entfernung von Weisheitsz√§hnen</a></li>
<li><a href="../de457338/index.html">Blitz mit Ilya Krasinsky: Wie man schlechte Hypothesen aufstellt, warum ein Produkt ablehnt und wie man mit einem Minimum an Action w√§chst?</a></li>
<li><a href="../de457340/index.html">10 PostCSS-Plugins, die Ihre Layoutzeit sparen</a></li>
<li><a href="../de457342/index.html">Zeichen von oben: Wie wir Kartographen vor unn√∂tiger Arbeit und roten Augen retteten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>