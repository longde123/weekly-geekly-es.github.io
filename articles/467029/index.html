<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëâüèæ üèÇüèΩ ‚öîÔ∏è Grigory Petrov: trabajando con una red en Ruby üéóÔ∏è üëΩ üöµüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El 28 de septiembre, en la conferencia Evrone RubyRussia DevRel, Grigory Petrov hablar√° sobre c√≥mo se comunican los microservicios. En la entrevista d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grigory Petrov: trabajando con una red en Ruby</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/railsclub/blog/467029/"> El 28 de septiembre, en la conferencia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Evrone RubyRussia</a> DevRel, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Grigory Petrov</a> hablar√° sobre c√≥mo se comunican los microservicios.  En la entrevista de hoy, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ivan Solovyov</a> habl√≥ con Grigory sobre el tema de su pr√≥ximo discurso y no solo sobre eso. <br><br><img src="https://habrastorage.org/webt/ad/kk/zw/adkkzw_mzi2qkhsckkinvqcsi_w.jpeg" alt="imagen"><br><br>  <b>Cu√©ntanos sobre ti, ¬øqu√© haces en Evrone?</b> <br><a name="habracut"></a><br>  Estoy involucrado en las relaciones con los desarrolladores: esto es algo entre DevRel y Technology Evangelist, un desarrollador que puede hablar en conferencias.  Trabaje como Robin Hood: comun√≠quese con los equipos de desarrollo dentro de la empresa, recopile varias cosas interesantes de lo que hacen y hable sobre esto en las conferencias.  Ruby Russia ser√° una de las primeras conferencias donde hablar√© en nombre de la empresa. <br><br>  <b>Te conozco como uno de los organizadores de varias conferencias de Python.</b>  <b>¬øDime c√≥mo llegaste al mundo de Ruby?</b> <br><br>  Nunca he dejado el mundo de Ruby.  Una de mis primeras conferencias fue Python vs Ruby.  Hace muchos a√±os, cuando escrib√≠ en C ++, necesitaba mecanismos de automatizaci√≥n de alto nivel para cualquier prueba, generaci√≥n de documentaci√≥n.  Luego escrib√≠ en Python y Ruby, y un poco en PHP.  Estaba buscando las mejores formas de resolver los problemas que ten√≠a. <br><br>  <b>¬øCu√°nto se tomar√° prestado su informe de los equipos de desarrollo dentro de la empresa?</b>  <b>S√© que escribiste en muchos idiomas: Ruby, Python, PHP, TypeScript, JavaScript, C ++ y no solo.</b> <br><br>  El informe tratar√° sobre la comunicaci√≥n de microservicios entre ellos a trav√©s de la red, los protocolos utilizados para esto y las dificultades emergentes.  De hecho, tengo una larga relaci√≥n con la red.  Hice Radmin, esta es una herramienta de red para control remoto.  El proyecto NPTV (en el que tambi√©n trabaj√© DevRel) es una televisi√≥n interactiva que utilizaba activamente la red y controlaba Ruby.  Voximplant (donde estudi√© DevRel nuevamente) es una telefon√≠a programable donde conoc√≠ a VoIP.  La cuadr√≠cula est√° muy cerca de m√≠.  Podr√≠a hacer un informe basado en mi experiencia, pero de esta manera no aportar√≠a el m√°ximo valor a los invitados de la conferencia, pero quiero tener el m√°ximo beneficio.  Durante la preparaci√≥n inicial del informe, entrevist√© a varios equipos de Evrone.  La compa√±√≠a se dedica al desarrollo personalizado de software complejo y de alta calidad, muchos equipos est√°n trabajando en varios proyectos.  Llamamos a Zoom y hablamos durante una hora o m√°s.  Discutieron qu√© y c√≥mo lo hacen, qu√© dificultades, qu√© pilas usan.  Mi informe ser√° la mitad sobre la cuadr√≠cula, los protocolos de red, la complejidad y la aplicaci√≥n, y la mitad sobre c√≥mo es utilizado en Ruby por diferentes equipos. <br><br>  <b>Tienes mucha comunicaci√≥n con los desarrolladores.</b>  <b>¬øQu√© tan espec√≠fico crees que es trabajar con una red en Ruby?</b> <br><br>  La red consta de varias partes.  En primer lugar, el trabajo del lenguaje de programaci√≥n y su ecosistema directamente con bytes transmitidos a trav√©s de la red.  La pila de red de nivel m√°s bajo.  Por ejemplo, el mismo JS y Node usan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">libuv</a> , un modelo asincr√≥nico.  Hay una transmisi√≥n principal, y eventualmente trabajas con la red.  Tienes corutinas para esto.  Haces muchas expectativas, esperas para recibir los datos, haces la espera para que se env√≠en los datos.  Este hilo √∫nico proporciona miles y decenas de miles de consultas por segundo. <br><br>  Sobre esta base, se desarrollan marcos, cualesquiera que sean.  Por ejemplo, JS no tiene marcos serios para trabajar con la grilla (¬°por lo cual puedes felicitarlo!).  Con la excepci√≥n de express.js, que dif√≠cilmente es un marco completo.  Python cambi√≥ a un modelo similar, y el framework Django m√°s popular permaneci√≥ en el modelo anterior.  Ahora hay una especie de discordia: un marco sincr√≥nico que intenta propagarse mediante el bloqueo de subprocesos, procesos con un GIL sobresaliendo y, por otro lado, hay algunas cosas nuevas que intentan funcionar en un modelo asincr√≥nico, por ejemplo, los canales Django.  Ruby todav√≠a est√° en el modelo s√≠ncrono y se propaga por procesos.  Por lo tanto, aqu√≠ est√° el ecosistema correspondiente, los enfoques y las posiciones muy fuertes de Rails. <br><br>  ¬øCu√°l es el poder de Ruby?  En primer lugar, en DSL, lenguaje espec√≠fico de dominio.  Cuando hablamos de la grilla, Ruby juega mejor en el campo donde es m√°s fuerte.  Cuando usamos GraphQL, significa que las bibliotecas para usar GraphQL est√°n en todas partes.  En Ruby, usar√°n una muy buena sintaxis DSL para definir el esquema.  Y la integraci√≥n entre estas sintaxis DSL y la sintaxis ORM DSL en ActiveRecord.  Esto es exactamente lo que podemos esperar de Ruby.  Al mismo tiempo, no tendremos ninguna operaci√≥n asincr√≥nica (espera), seremos escalados por los procesos y tendremos los requisitos del servidor correspondientes. <br><br>  <b>Su informe indic√≥ varios protocolos de interacci√≥n.</b>  <b>El mismo JSON: API, etc.</b>  <b>¬øDe qu√© manera ve un mayor desarrollo, todos nos deslizaremos en GraphQL?</b> <br><br>  Una pregunta muy resonante.  En mi opini√≥n, comenz√≥ con el hecho de que la cuadr√≠cula es lenta.  Las aplicaciones al principio son simples.  Como regla general, todas las aplicaciones, tanto Ruby, Python como Node, usan puntos finales HTTP regulares para la comunicaci√≥n.  En el interior usan alg√∫n tipo de carga √∫til.  Anteriormente XML, ahora JSON.  Les va bien durante los primeros meses o a√±os, como si tuvieran suerte.  Luego, el negocio comienza a hacer preguntas complejas.  Por ejemplo, necesita obtener algunos usuarios y para cada usuario obtener una lista de las empresas en las que trabaja.  Aqu√≠ surge el problema: si solo usa el punto final, entonces ser√°n varias decenas o cientos de solicitudes, y la cuadr√≠cula es pausada: solicitud, respuesta, paquetes perdidos.  Ser√° monstruosamente lento y ser√° necesario transmitir muchos datos a trav√©s de la red.  100 veces m√°s que los datos requeridos.  Nuestro sistema colapsa, a medida que los sistemas de automatizaci√≥n de grandes empresas colapsan bajo tales solicitudes, que en 10 a√±os se convierten en monstruos, donde minutos, horas pueden ser una pregunta complicada desde la interfaz.  Todo este tiempo, la base de datos en el back-end resolver√° un mont√≥n de solicitudes id√©nticas, y un mont√≥n de solicitudes id√©nticas perseguir√° a trav√©s de la red.  Tratamos de resolverlo de diferentes maneras. <br><br>  <b>¬øDar ejemplos reales de tales problemas?</b> <br><br>  Facebook fue particularmente distinguido, tienen este problema es muy grave: hay muchos datos sobre los que les gusta hacer consultas complejas.  Por ejemplo: mu√©strame a los que comentaron esta publicaci√≥n y a sus amigos.  Para no hacer millones de solicitudes, Facebook usa diferentes opciones.  Por ejemplo, FQL, Facebook Query Language.  Habiendo recopilado toda su experiencia, crearon GraphQL, algo que le permite hacer consultas similares a SQL en el cliente.  Pero esto no es SQL, porque no podemos adjuntarnos a bases de datos, sino una consulta en t√©rminos de la API de back-end.  Env√≠as una solicitud y obtienes una respuesta (o c√≥mo va). <br><br>  El segundo gran problema es qu√© hacer si queremos obtener una gran cantidad de datos del backend.  Por ejemplo, cinco mil usuarios o un registro en 10mb.  Es aterrador hacerlo todo con una solicitud-respuesta http.  Porque si la malla se colapsa, la solicitud tendr√° que repetirse en su totalidad, y esto puede durar para siempre.  Volviendo a Facebook: hicieron GraphQL, una muleta sobre la red.  Y luego otras personas hicieron HTTP / 2, lo que resuelve el problema de la red.  HTTP / 2 realiza una conexi√≥n asincr√≥nica, dentro de la cual podemos hacer muchas solicitudes peque√±as.  HTTP / 2 combate GraphQL si el servidor GraphQL no tiene mucha magia para optimizar el n√∫mero de consultas a la base de datos en el back-end.  Y en la charla, hablaremos sobre lo que Ruby ofrece para esta magia.  Con HTTP / 2, GraphQL puede no ser necesario.  Podemos hacer 100 solicitudes HTTP / 2 a nuestro punto final, y desde el punto de vista de bytes, esto no ser√° una sobrecarga mayor que si usamos GraphQL.  Google Protocol Buffers y gRPC abordan este problema desde el tercer extremo.  Utilizan protocolos de transporte binarios, principalmente HTTP / 2, ofrecen un cierto esquema para api.  Aqu√≠ compiten con el RESTO habitual. <br><br>  En la pr√°ctica, en la mayor√≠a de las empresas que usan JSON, el programador Vasya se sienta y escribe este JSON con sus manos.  Seis meses despu√©s, Vasya se entera de que la fecha y la hora se pueden transmitir de cien maneras diferentes.  ¬°Comienza el horror!  Pero si los buenos desarrolladores se sientan en la empresa, escriben no solo JSON, sino que usan alg√∫n tipo de est√°ndar.  Usando OpenAPI o JSON Schema, todas estas cosas interesantes que compiten con gRPC.  Todo este zool√≥gico moderno resuelve algunos problemas expresados.  Y lo que suceder√° con este zool√≥gico en el futuro, no puedo predecirlo en absoluto.  Pero invito a los desarrolladores a que vengan y discutan este tema: lo que nos espera en el pr√≥ximo a√±o, 3, 5, 10 y cu√°l es la disposici√≥n de las fuerzas ahora. <br><br>  <b>¬øHablemos sobre el futuro de Ruby como lenguaje de programaci√≥n?</b> <br><br>  Es dif√≠cil predecir el futuro.  Realmente me gustar√≠a ver buenos tipos en Ruby.  Ruby 3 se encuentra ahora en la etapa inicial de implementaci√≥n de tipos.  Me gustar√≠a que esta sintaxis sea hermosa.  Vi las propuestas, mi calva se puso de punta.  Horrible, sintaxis muy detallada que nadie usar√°. <br><br>  <b>¬øPor qu√© piensas eso?</b> <br><br>  Soy un neurofisi√≥logo aficionado.  El pensamiento intuitivo que todos tienen le gusta tomar todo tipo de decisiones extra√±as.  Si, por ejemplo, necesita escribir muchas cartas, entonces esto es malo.  Estos tipos pueden ser mega-geniales, pero debido al hecho de que tiene que escribir una vez y media m√°s c√≥digo, sentiremos la emoci√≥n "No quiero".  Y somos muy sensibles a nuestras emociones, por lo que nadie lo usar√°.  Realmente me gusta la forma en que se transmitieron los tipos en Python y TypeScript: a trav√©s de los dos puntos.  Esto da una sobrecarga m√≠nima.  Escribimos un identificador - buscado.  S√© con certeza que habr√° un n√∫mero, debes poner una trampa.  El desarrollador escribe dos puntos y eso es todo, la trampa est√° instalada.  Despu√©s de un par de semanas, cuando accidentalmente pasa una lista o l√≠nea all√≠, la trampa funcionar√° y ahorrar√° al desarrollador varias horas o semanas de depuraci√≥n. <br><br>  <b>¬øQu√© m√°s te gustar√≠a ver en Ruby?</b> <br><br>  En los √∫ltimos a√±os, he visto mucha asincron√≠a con las rutinas.  Realmente me gusta esto porque el c√≥digo as√≠ncrono con corutinas es f√°cil de leer.  Es comprensible, le permite agrupar cosas complejas en una sintaxis simple.  Esto est√° bien implementado en el √∫ltimo Python y bien implementado en JavaScript.  Realmente me gustar√≠a que Ruby trajera algo as√≠ ... En realidad, Ruby tiene fibra.  Ser√≠a genial agregar algo como Node para que pueda escribir aplicaciones as√≠ncronas de Ruby utilizando fibras u otras primitivas.  Y bajo el cap√≥, usar√≠a libuv u otras primitivas del sistema operativo para trabajar con la red. <br><br>  O pondr√≠a algo en las corrientes.  Usar√≠a algo para cumplir competitivamente todas estas solicitudes de red, solicitudes de bases de datos, solicitudes de sistema de archivos.  Y solo escribir√≠a corutina al nivel de peque√±os trozos de c√≥digo que se ejecutan en una solicitud o temporizador entrante, luego dar√≠a comandos y esperar√≠a su ejecuci√≥n.  M√°s all√° del cap√≥, mucha magia, todo esto se hace en paralelo, consume un enorme autom√≥vil de Amazon en un 100% y tiene decenas de miles de solicitudes por segundo.  En el caso de Go, cientos de miles de consultas por segundo. <br><br>  <b>De vuelta a los tipos.</b>  <b>Probablemente sea la introducci√≥n gradual de tipos, ¬øGradual Typing?</b> <br><br>  Gradual Typing es un mega cohete que se agreg√≥ por primera vez a Python.  Lo hicimos para que los tipos se puedan agregar un poco.  En mi opini√≥n, ha surgido todo un paradigma de desarrollo cuando al principio el c√≥digo se escribe muy r√°pidamente sin tipos, y luego, cuando el desarrollador ve que alguna parte del c√≥digo se ha estabilizado, los tipos comienzan a agregarse a esta parte del c√≥digo.  Es donde se ha estabilizado y es necesario colocar trampas para que en el futuro no se rompa nada sobre esta estabilizada.  Ser√≠a genial si hicieran algo similar para Ruby. <br><br>  <b>¬øQu√© pregunta quieres hacerle a Yukihiro Matsumoto en la conferencia?</b> <br><br>  He estado estudiando japon√©s durante 4 a√±os, y mi japon√©s probablemente sea suficiente para decirle "gracias".  Voy a entrenar! <br><br>  <b>¬°Nos vemos en RubyRussia!</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Reg√≠strese</a> , se espera el pr√≥ximo aumento de precios despu√©s del 15 de septiembre, 700 participantes ya est√°n con nosotros. <br><br>  Y gracias tradicionales a las empresas que nos apoyan: <br><br>  Organizador - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Evrone</a> <br>  Socio general - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Toptal</a> <br>  Gold Partner - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gett</a> <br>  Silver Partners - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JetBrains</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bookmate</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cashwagon</a> <br>  Socio de bronce - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">InSales</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/467029/">https://habr.com/ru/post/467029/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../467017/index.html">¬øQu√© es HED / MRSD y para qu√© sirve?</a></li>
<li><a href="../467019/index.html">Dise√±o de paneles de control para el sitio de comercio electr√≥nico de an√°lisis web. Parte 3: Canal SEO</a></li>
<li><a href="../467021/index.html">C√≥mo se comunica el robot de conciencia con los clientes</a></li>
<li><a href="../467023/index.html">Creamos un complemento en Grafana para monitorear k8s: ya en la tienda oficial de Grafana</a></li>
<li><a href="../467025/index.html">Sobre el modelo de red en juegos para principiantes</a></li>
<li><a href="../467033/index.html">Una selecci√≥n de documentos t√©cnicos geniales de Chaos Communication Camp 2019</a></li>
<li><a href="../467035/index.html">Dise√±o de paneles de control para el sitio de comercio electr√≥nico de an√°lisis web. Parte 4: Canal de Youtube</a></li>
<li><a href="../467037/index.html">Factoring: c√≥mo obtener dinero para sillas</a></li>
<li><a href="../467039/index.html">C√≥mo realizar una revisi√≥n de c√≥digo</a></li>
<li><a href="../467041/index.html">C√≥mo digitalizamos Kazajst√°n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>