<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçú üôåüèæ üÖæÔ∏è Toda a verdade sobre o RTOS. Artigo # 27 Hora do sistema üëêüèΩ ü§¥üèª üê±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O conceito de tempo no contexto do RTOS foi introduzido em um dos artigos anteriores , juntamente com a id√©ia de fun√ß√µes relacionadas ao tempo dispon√≠...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Toda a verdade sobre o RTOS. Artigo # 27 Hora do sistema</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454272/">  O conceito de tempo no contexto do RTOS foi introduzido em um dos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigos anteriores</a> , juntamente com a id√©ia de fun√ß√µes relacionadas ao tempo dispon√≠veis no RTOS. <br><br><img src="https://habrastorage.org/webt/u0/4z/bl/u04zbllomewnuxhei-ydrxmaeew.jpeg"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Artigos anteriores da s√©rie:</b> <div class="spoiler_text"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 26.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Canais: servi√ßos auxiliares e estruturas de dados</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 25.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Canais de Dados: Introdu√ß√£o e Servi√ßos B√°sicos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 24.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Filas: servi√ßos auxiliares e estruturas de dados</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 23.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Filas: introdu√ß√£o e servi√ßos b√°sicos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 22.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Caixas de correio: servi√ßos auxiliares e estruturas de dados</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 21.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Caixas de correio: Introdu√ß√£o e servi√ßos b√°sicos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 20.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sem√°foros: Servi√ßos Auxiliares e Estruturas de Dados</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 19.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sem√°foros: introdu√ß√£o e servi√ßos b√°sicos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo # 18</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Grupos de Sinalizadores de Eventos: Servi√ßos Auxiliares e Estruturas de Dados</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 17.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Grupos de Sinalizadores de Eventos: Introdu√ß√£o e Servi√ßos B√°sicos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 16.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Signals</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 15.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parti√ß√µes de mem√≥ria: servi√ßos e estruturas de dados</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 14.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Se√ß√µes de mem√≥ria: introdu√ß√£o e servi√ßos b√°sicos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 13.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Estruturas de dados da tarefa e chamadas de API n√£o suportadas</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 12.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Servi√ßos para trabalhar com tarefas</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 11.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tarefas: configura√ß√£o e introdu√ß√£o √† API</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 10.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Agendador: recursos avan√ßados e preserva√ß√£o de contexto</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 9.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Agendador: implementa√ß√£o</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 8.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">N√∫cleo SE: Projeto Interno e Implanta√ß√£o</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo # 7</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">N√∫cleo SE: Introdu√ß√£o</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Outros servi√ßos RTOS</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Intera√ß√£o e sincroniza√ß√£o de tarefas</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tarefas, altern√¢ncia de contexto e interrup√ß√µes</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo # 3</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tarefas e planejamento</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RTOS: estrutura e modo em tempo real</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RTOS: introdu√ß√£o.</a> <br></div></div><br><h3>  Tick ‚Äã‚Äãtimer </h3><br>  Todas as fun√ß√µes relacionadas ao tempo s√£o controladas por um rel√≥gio de hardware.  Este √© um oscilador simples que gera solicita√ß√µes de interrup√ß√£o em intervalos regulares.  Para que os n√∫meros do rel√≥gio fa√ßam sentido para os aplicativos, √© necess√°rio saber a frequ√™ncia do gerador. <br><br><h3>  Manipula√ß√£o de interrup√ß√£o do temporizador </h3><br>  As interrup√ß√µes geradas pelo timer de hardware devem ser reparadas de maneira espec√≠fica no manipulador de interrup√ß√µes (Interrupt Service Routine, ISR), que implementa todas as fun√ß√µes RTOS relacionadas ao tempo.  Os detalhes do manipulador de interrup√ß√£o do timer no Nucleus SE ser√£o discutidos em um dos seguintes artigos. <br><br><h3>  Fun√ß√µes relacionadas ao tempo </h3><br>  O n√∫cleo RTOS e o n√∫cleo SE cont√™m v√°rios mecanismos relacionados ao tempo: <br><br><ul><li>  <b>Clock do sistema (Tick clock)</b> : um contador simples que √© incrementado usando um manipulador de interrup√ß√£o do timer.  O Nucleus RTOS e o Nucleus SE possuem um contador de 32 bits e as tarefas possuem mecanismos para ler e escrever seu valor.  No Nucleus SE, um rel√≥gio √© opcional. </li><li>  <b>Temporizadores de aplicativos</b> : o Nucleus RTOS e o Nucleus SE suportam objetos de timer.  Seu uso e implementa√ß√£o no Nucleus SE ser√£o discutidos em mais detalhes no pr√≥ximo artigo. </li><li>  <b>Agendamento de</b> intervalo de tempo: no Nucleus RTOS, tarefas com a mesma prioridade s√£o executadas usando o algoritmo Round-robin, mas voc√™ tamb√©m pode usar o intervalo de tempo.  No Nucleus SE, um agendador de divis√£o de tempo √© opcional;  isso foi discutido em detalhes em artigos anteriores (uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vis√£o geral do agendador TS (intervalo de tempo)</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TS no Nucleus SE</a> ). </li><li>  <b>Suspender uma tarefa (suspens√£o da tarefa)</b> : uma tarefa pode pausar-se ("adormecer") por um per√≠odo fixo de tempo.  Esse mecanismo j√° foi descrito em detalhes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anteriormente</a> . </li><li>  Tempo <b>limite das chamadas da API</b> : no Nucleus RTOS e no Nucleus SE, algumas chamadas de API permitem pausar uma tarefa enquanto aguarda a disponibilidade de um recurso.  A pausa pode ser indefinida ou, no caso do Nucleus RTOS, um per√≠odo de tempo limite opcional (per√≠odo de espera) pode ser indicado.  O Nucleus SE n√£o suporta tempos limite de chamada da API. </li></ul><br><h3>  Precis√£o </h3><br>  E agora vale a pena falar brevemente sobre a precis√£o do timer do sistema. <br><br>  A precis√£o das fun√ß√µes de tempo depende diretamente da frequ√™ncia do gerador de rel√≥gio.  Por exemplo, se pulsos chegarem a cada 10 milissegundos e a tarefa de aplica√ß√£o precisar de um atraso de 100 milissegundos, obviamente precisar√° de 10 pulsos.  No entanto, n√£o se sabe quando o impulso anterior foi recebido: poderia ter acontecido h√° apenas 10 milissegundos atr√°s.  Portanto, um atraso de 100 milissegundos pode levar at√© 110 milissegundos. <br><br>  Uma maneira √≥bvia de resolver esse problema √© aumentar a frequ√™ncia do gerador.  Se os pulsos seguirem a intervalos de 1 milissegundo, um atraso de 100 milissegundos nunca levar√° mais de cento e um milissegundos.  A desvantagem dessa solu√ß√£o √© que o manipulador de interrup√ß√£o do timer levar√° 10 vezes mais tempo do processador, o que ser√° excessivo.  O projetista do sistema deve encontrar um equil√≠brio entre a precis√£o necess√°ria do timer e a pot√™ncia dispon√≠vel do processador. <br><br><h2>  Configura√ß√£o da hora do sistema </h2><br>  Como na maioria dos objetos do Nucleus SE, as configura√ß√µes de hora do sistema s√£o <b>geralmente</b> controladas pelas diretivas <b>#define</b> no arquivo <b>nuse_config.h</b> .  O par√¢metro principal √© <b>NUSE_SYSTEM_TIME_SUPPORT</b> , que ativa o mecanismo de suporte de hor√°rio do sistema.  Voc√™ n√£o precisa especificar o n√∫mero de objetos: a hora do sistema est√° ativada ou n√£o. <br><br>  A escolha de um valor diferente de zero √© o principal ativador da hora do sistema.  Este par√¢metro √© usado ao definir estruturas de dados, que ser√£o discutidas em detalhes posteriormente neste artigo.  Al√©m disso, um valor diferente de zero ativa as configura√ß√µes da API. <br><br><h3>  Ativa√ß√£o de API </h3><br>  Cada fun√ß√£o de API (chamada de utilit√°rio) no Nucleus SE possui uma diretiva #define de ativa√ß√£o no arquivo nuse_config.h.  Para a hora do sistema, esses s√≠mbolos s√£o: <br>  <b>NUSE_CLOCK_SET</b> <br>  <b>NUSE_CLOCK_RETRIEVE</b> <br><br>  Por padr√£o, eles s√£o definidos como <b>FALSE</b> , portanto, todas as chamadas de servi√ßo s√£o desativadas, bloqueando a inclus√£o do c√≥digo que as implementa.  Para configurar a hora do sistema no aplicativo, √© necess√°rio selecionar as chamadas de servi√ßo da API necess√°rias e defini-las como <b>TRUE</b> . <br><br>  A seguir, um trecho de c√≥digo do arquivo nuse_config.h padr√£o. <br><br><pre><code class="plaintext hljs">#define NUSE_SYSTEM_TIME_SUPPORT FALSE /*    */ #define NUSE_CLOCK_SET FALSE /*   */ #define NUSE_CLOCK_RETRIEVE FALSE /*    */</code> </pre> <br>  Se voc√™ tentar usar a chamada de servi√ßo da API do hor√°rio do sistema quando o ativador do hor√°rio do sistema estiver desligado, ocorrer√° um erro de compila√ß√£o.  Se o seu c√≥digo usar uma chamada de API que n√£o foi ativada, ocorrer√° um erro de layout porque o c√≥digo de implementa√ß√£o n√£o foi inclu√≠do no aplicativo. <br><br><h2>  Chamadas do System Time Utility </h2><br>  O Nucleus RTOS suporta duas chamadas de utilidade relacionadas √† hora do sistema e fornece a seguinte funcionalidade: <br><br><ul><li>  Configurando o valor da hora do sistema.  O n√∫cleo SE √© implementado na fun√ß√£o <b>NUSE_Clock_Set ()</b> . </li><li>  Obtendo o valor da hora do sistema.  O n√∫cleo SE √© implementado na fun√ß√£o <b>NUSE_Clock_Retrieve ()</b> . </li></ul><br>  Considere a implementa√ß√£o de cada uma dessas chamadas em mais detalhes. <br><br><h2>  Chamadas de servi√ßo para definir e obter a hora do sistema </h2><br>  Com a hora do sistema, voc√™ s√≥ pode executar opera√ß√µes de configura√ß√£o para um determinado valor e obten√ß√£o do valor atual.  O Nucleus RTOS e o Nucleus SE fornecem duas chamadas API b√°sicas para implementar essas opera√ß√µes. <br><br>  A interpreta√ß√£o do valor da hora do sistema depende da aplica√ß√£o, pois √© essencialmente um contador do n√∫mero de "ciclos de rel√≥gio" que ocorreram desde a √∫ltima redefini√ß√£o do contador.  Para usar essas informa√ß√µes, a frequ√™ncia do gerador deve ser conhecida. <br><br><h3>  Ajuste de tempo </h3><br>  Qualquer tarefa pode definir a hora do sistema chamando esta fun√ß√£o da API. <br><br>  <b><i>Chamada para definir a hora do sistema no Nucleus RTOS</i></b> <br><br>  Prot√≥tipo de chamada de servi√ßo: <br>  <b>VOID NU_Set_Clock (UNSIGNED new_value);</b> <br><br>  Par√¢metros: <br>  <b>new_value</b> - valor a ser atribu√≠do √† hora do sistema <br><br>  Valor de retorno: nenhum. <br><br>  <b><i>Ligue para definir a hora do sistema no Nucleus SE</i></b> <br>  Essa chamada de API suporta a funcionalidade principal da API do Nucleus RTOS. <br><br>  Prot√≥tipo de chamada de servi√ßo: <br>  <b>void NUSE_Clock_Set (U32 new_value);</b> <br><br>  Par√¢metros: <br>  <b>new_value</b> - valor a ser atribu√≠do √† hora do sistema <br><br>  Valor de retorno: nenhum <br><br>  <b><i>Implementa√ß√£o da defini√ß√£o de hor√°rio no N√∫cleo SE</i></b> <br>  O c√≥digo √© muito simples.  O valor fornecido √© gravado em <b>NUSE_Tick_Clock</b> dentro da se√ß√£o cr√≠tica. <br><br><h3>  Obtendo hora do sistema </h3><br>  Uma tarefa pode obter o valor da hora do sistema usando esta fun√ß√£o da API. <br><br>  <b><i>Ligue para obter a hora do sistema no Nucleus RTOS</i></b> <br><br>  Prot√≥tipo de chamada de servi√ßo: <br>  <b>NU_Retrieve_Clock N√ÉO ASSINADO (VOID);</b> <br><br>  Par√¢metros: Nenhum <br><br>  Valor de retorno: valor atual da hora do sistema <br><br>  <b><i>Ligando para obter a hora do sistema no Nucleus SE</i></b> <br>  Prot√≥tipo de chamada de servi√ßo: <br>  <b>U32 NUSE_Clock_Retrieve (nulo);</b> <br><br>  Par√¢metros: Nenhum <br><br>  Valor de retorno: valor atual da hora do sistema <br><br>  <b><i>Implementa√ß√£o da aquisi√ß√£o de tempo no N√∫cleo SE</i></b> <br>  O c√≥digo √© muito simples.  A fun√ß√£o retorna o valor <b>NUSE_Tick_Clock</b> obtido na se√ß√£o cr√≠tica. <br><br><h2>  Estruturas de dados </h2><br>  A hora do sistema usa uma estrutura de dados (localizada na RAM), que √© uma palavra de 32 bits. <br><br>  Eu recomendo fortemente que o c√≥digo do aplicativo n√£o use acesso direto a essa estrutura de dados, mas acesse-o atrav√©s das fun√ß√µes de API fornecidas.  Isso evitar√° a incompatibilidade com vers√µes futuras do Nucleus SE e efeitos colaterais indesejados, al√©m de simplificar a portabilidade de aplicativos para o Nucleus RTOS.  Detalhes das estruturas de dados s√£o fornecidos abaixo para simplificar o entendimento do c√≥digo de chamada de servi√ßo e da depura√ß√£o. <br><br><h3>  Dados RAM </h3><br>  Estrutura de dados: <br>  <b>NUSE_Tick_Clock</b> - uma vari√°vel do tipo <b>U32</b> , que armazena o contador do rel√≥gio da hora do sistema. <br><br>  Essa estrutura de dados √© inicializada em zero pela fun√ß√£o <b>NUSE_Init_Task ()</b> quando o Nucleus SE √© iniciado.  Um dos artigos a seguir conter√° uma descri√ß√£o completa dos procedimentos de inicializa√ß√£o do Nucleus SE. <br><br><h3>  Dados ROM </h3><br>  N√£o h√° estruturas de dados associadas √† hora do sistema na ROM. <br><br><h3>  A quantidade de mem√≥ria para a hora do sistema </h3><br>  Como todos os outros objetos do Nucleus SE, a quantidade de mem√≥ria necess√°ria para o tempo do sistema √© previs√≠vel. <br><br>  A quantidade de mem√≥ria na ROM √© 0. <br><br>  A quantidade de mem√≥ria na RAM (em bytes) √© sempre 4. <br><br><h2>  Chamadas de API n√£o realizadas </h2><br>  Todas as chamadas de servi√ßo da API do Nucleus RTOS em tempo de sistema t√™m um equivalente no Nucleus SE. <br><br><h3>  Compat√≠vel com Nucleus PLUS </h3><br>  Como com todos os outros objetos do Nucleus SE, meu objetivo era garantir que o c√≥digo do aplicativo seja o mais compat√≠vel poss√≠vel com o Nucleus RTOS.  A hora do sistema n√£o √© exce√ß√£o e, do ponto de vista do usu√°rio, √© implementada da mesma maneira que no Nucleus RTOS.  As chamadas da API do Nucleus RTOS podem ser portadas diretamente para o Nucleus SE. <br><br>  No artigo a seguir, consideraremos os temporizadores de software. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt454272/">https://habr.com/ru/post/pt454272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt454256/index.html">O que h√° de errado com nossa TI</a></li>
<li><a href="../pt454260/index.html">Dia das Crian√ßas com C√≥digo Ruim</a></li>
<li><a href="../pt454262/index.html">Por que todo cientista de dados deve conhecer o Dask</a></li>
<li><a href="../pt454264/index.html">4 canais sens√≠veis do Youtube sobre entrevistas t√©cnicas</a></li>
<li><a href="../pt454266/index.html">Dell e Alienware na Computex 2019: fale sobre as principais inova√ß√µes</a></li>
<li><a href="../pt454274/index.html">Luz, c√¢mera ... nuvem: como as nuvens mudam a ind√∫stria cinematogr√°fica</a></li>
<li><a href="../pt454278/index.html">Seguro cibern√©tico no mercado russo</a></li>
<li><a href="../pt454280/index.html">Desenvolvimento remoto no VS Code: sua vida nunca mais ser√° a mesma</a></li>
<li><a href="../pt454284/index.html">Desculpe, eu n√£o vou trabalhar porque √© inverno</a></li>
<li><a href="../pt454290/index.html">Princ√≠pio de responsabilidade √∫nica. N√£o √© t√£o simples quanto parece</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>