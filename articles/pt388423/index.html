<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÄÔ∏è üòø üï∞Ô∏è Compara√ß√£o de codecs HEVC da MSU. Como melhorar os resultados üöµüèΩ üîë üöπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em outubro de 2015, outro relat√≥rio de compara√ß√£o de codec foi lan√ßado no VMiK da Universidade Estadual de Moscou, desta vez incluindo v√°rios codecs H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Compara√ß√£o de codecs HEVC da MSU. Como melhorar os resultados</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/388423/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em outubro de 2015, outro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">relat√≥rio de compara√ß√£o de codec</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foi lan√ßado </font><font style="vertical-align: inherit;">no VMiK da Universidade Estadual de Moscou, desta vez incluindo v√°rios codecs HEVC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ponto de partida do estudo foi que notamos uma diferen√ßa nas predefini√ß√µes nos testes para AVC e HEVC - para AVC, foi utilizado um perfil r√°pido n√£o modificado com um GOP, e para HEVC, um modificado com v√°rios GOPs. Ao mesmo tempo, para o √∫nico arquivo ‚ÄúApple Tree‚Äù descrito no relat√≥rio aberto, o codificador x264 mostrou-se melhor que x265 quando foi rapidamente transcodificado nos gr√°ficos da depend√™ncia do SSIM na taxa de bits, sem levar em considera√ß√£o a velocidade de codifica√ß√£o. A quest√£o surgiu imediatamente: talvez essas op√ß√µes ou outras √≥bvias possam mudar esse quadro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O relat√≥rio compara predefini√ß√µes, mas n√£o fornece recomenda√ß√µes para corrigi-las. </font><font style="vertical-align: inherit;">Neste artigo, fizemos uma compara√ß√£o semelhante e fizemos recomenda√ß√µes para modificar as predefini√ß√µes do codificador x265. </font><font style="vertical-align: inherit;">Para uma sequ√™ncia de v√≠deo semelhante √† estudada na vers√£o gratuita do relat√≥rio, as altera√ß√µes propostas nos par√¢metros de codifica√ß√£o podem melhorar a efici√™ncia da compacta√ß√£o, enquanto reabilitam o codificador x265 ao plotar o relat√≥rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As predefini√ß√µes modificadas n√£o reivindicam universalidade, o teste em um grande n√∫mero de sequ√™ncias de v√≠deo est√° al√©m do escopo deste estudo. </font><font style="vertical-align: inherit;">No entanto, eles podem ser recomendados como ponto de partida ao procurar oportunidades para aumentar a efici√™ncia da codifica√ß√£o do x265.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre o projeto</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tarefa de codifica√ß√£o de v√≠deo no processamento multim√≠dia, seja de transmiss√£o, edi√ß√£o ou edi√ß√£o, armazenamento, surge constantemente tanto no desenvolvimento de aplicativos e servi√ßos quanto na configura√ß√£o no momento do uso. Devido ao grande n√∫mero de codecs de v√≠deo populares, mesmo frequentemente do mesmo tipo, n√£o √© f√°cil escolher o melhor deles e definir as configura√ß√µes corretas. Provavelmente, guiado por essas considera√ß√µes, no laborat√≥rio de computa√ß√£o gr√°fica e multim√≠dia da faculdade de matem√°tica e cibern√©tica computacional (VMiK) da Universidade Estadual de Moscou desde os anos 2000, o trabalho est√° em andamento em um projeto para comparar codecs de v√≠deo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outubro de 2015, foi publicado um relat√≥rio de compara√ß√£o de codecs que inclu√≠a alguns codecs no formato HEVC, al√©m de v√°rios outros que est√£o atualmente em desenvolvimento ativo. </font><font style="vertical-align: inherit;">Como "refer√™ncia" adotou o compressor x264. </font><font style="vertical-align: inherit;">Um dos interessantes no relat√≥rio √© o compressor x265, e vamos estud√°-lo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ferramenta de an√°lise, usaremos o SolveigMM Zond 265, o analisador de arquivos HEVC / H.265 e AVC / H.264.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0d9/39c/b29/0d939cb290d31812d91d9a2747360002.png" alt="imagem"><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todos para comparar codecs e selecionar par√¢metros</font></font></h3><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s descrevemos a t√©cnica. </font><font style="vertical-align: inherit;">A compara√ß√£o no relat√≥rio √© realizada de acordo com a velocidade de qualidade de taxa de bits do crit√©rio (SSIM, PSNR) O procedimento descrito no relat√≥rio para comparar a taxa de taxa de bits / m√©trica de qualidade (par√°grafo C.4) √© o seguinte. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selecionamos v√°rios valores de taxa de bits (por exemplo, 7 valores: 1, 2, 4, 6, 8, 10 e 12 Mbps); para eles, consideramos as m√©tricas de qualidade necess√°rias para cada codec. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Marcamos os valores obtidos no gr√°fico: m√©trica da qualidade (eixo da abcissa) - taxa de bits (eixo das ordenadas).</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interpolar linearmente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selecionamos o intervalo mais amplo no qual todos os gr√°ficos s√£o definidos e encontramos a √°rea em todos os gr√°ficos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">medida da qualidade de um</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> codec (ou predefini√ß√£o) espec√≠fico, levamos a propor√ß√£o de sua √°rea para a √°rea do codec de refer√™ncia. </font><font style="vertical-align: inherit;">Quanto menor o n√∫mero, mais eficiente o codec.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a refer√™ncia, selecione x265 com a predefini√ß√£o selecionada no relat√≥rio (tabela 1). </font><font style="vertical-align: inherit;">O relat√≥rio n√£o usa a vers√£o mais recente do compressor, pode ser encontrado aqui: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x265 1.5 + 460-ac85c775620f</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">No entanto, ao usar a vers√£o mais recente, nada muda fundamentalmente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As predefini√ß√µes de compressor usadas s√£o mostradas na tabela 1 (para a plataforma de desktop).</font></font><br>
<br>
<table border="1">
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rasgando</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x265 -p veryslow --bitrate% BITRATE_KBPS %% SOURCE_FILE% -o% TARGET_FILE% --input-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Codifica√ß√£o universal</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x265 -p medium --bitrate% BITRATE_KBPS %% SOURCE_FILE% -o% TARGET_FILE% --put-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recodifica√ß√£o r√°pida</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x265 -p ultrafast --ref 3 --bitrate% BITRATE_KBPS %% SOURCE_FILE% -o% TARGET_FILE% --input-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 1. Configura√ß√µes do compressor x265 do relat√≥rio "Compara√ß√£o de codec de v√≠deo HEUC HEVC" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obter recomenda√ß√µes para modificar predefini√ß√µes, testamos todas as configura√ß√µes em que elas consistem - qual a contribui√ß√£o de cada componente para a qualidade e velocidade. </font><font style="vertical-align: inherit;">O plano aqui √© o seguinte.</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codificamos o arquivo, alterando cada par√¢metro da predefini√ß√£o: de transcodifica√ß√£o r√°pida para universal, de universal para "rasgar". </font><font style="vertical-align: inherit;">Ao mesmo tempo, economizamos o tempo de codifica√ß√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculamos a medida de qualidade (como a √°rea indicada acima) e o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tempo de codifica√ß√£o relativo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (o valor m√≠nimo de codifica√ß√£o FPS para o arquivo "par√¢metro modificado predefinido" em rela√ß√£o a todos os valores de taxa de bits selecionados).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na tabela que consiste em um par√¢metro vari√°vel, medida de qualidade, FPS m√≠nimo, selecionamos os par√¢metros que podem ser usados ‚Äã‚Äãpara melhorar as predefini√ß√µes.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s nos restringimos aos par√¢metros de predefini√ß√µes para codifica√ß√£o universal e para "ripar" (Tabela 2), revelando os par√¢metros "-p m√©dio" e "-p ultra-r√°pido". </font><font style="vertical-align: inherit;">Adicione a eles mais dois ausentes no relat√≥rio: ‚Äú--keyint -1 --tune ssim‚Äù. </font><font style="vertical-align: inherit;">N√≥s suplementaremos os par√¢metros listados com predefini√ß√µes para transcodifica√ß√£o r√°pida e universal, respectivamente.</font></font><br>
<table border="1">
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Codifica√ß√£o universal</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> --rc-lookahead 20 --scenecut 40 --ctu 64 --min-cu-size 8 --bframes 4 --b-adap 2 --subme 1 --me hex --early-skip --sao - signhide --weightp --rd 3 --aq-force 1.0 --aq-mode 1 --cutree --no-fast-intra</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rasgando</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> --weightb --amp --rect --rc-lookahead 40 --frames 8 --tu-inter-depth 3 --tu-intra-depth 3 --rd 6 --rdoq 2 --psy-rdoq 1.0 - -subme 4 --max-merge 4 --me star --ref 5 --b-intra --lookahead-slice 0</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 2. Par√¢metros candidatos para modificar as predefini√ß√µes do relat√≥rio MSU HEVC Video Codec Comparison </font></font><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O link de download para a sequ√™ncia de teste da Apple Tree (Fig. 1), usado na vers√£o gratuita do relat√≥rio, n√£o est√° especificado. </font><font style="vertical-align: inherit;">Escolheremos um similar, usando seu recurso principal - um close-up, um grande n√∫mero de pequenos detalhes. </font><font style="vertical-align: inherit;">Por exemplo, ‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://download.blender.org/peach/bigbuckbunny_movies/big_buck_bunny_1080p_h264.mov"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">big_buck_bunny_1080p_h264.mov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù, um intervalo de 338 quadros a partir de 24 segundos: </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ffmpeg -i big_buck_bunny_1080p_h264.mov -ss 00:00:24 -frames: v 338 -c: v rawvideo -pix_fmt yuv420p sample.yuv </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/fce/39d/479/fce39d4793eb54f88cff9eac8dfdf7cd.png" alt="imagem"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 1. Caracter√≠sticas da sequ√™ncia Apple Tree ‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para n√£o gastar muito tempo escrevendo os n√∫meros necess√°rios da interface do Zond 265 ao implementar as tr√™s etapas do plano indicado acima, √© conveniente usar sua capacidade de trabalhar na linha de comando (tabela 3):</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
zond265_x64% COMPRESSED_FILE% -iref% REFERENCE_420P_FILE% -nowait -report t = qualidade, statstream qm = SSIM o =% TARGET_CSV_FILE% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma lista de todos os par√¢metros e sua descri√ß√£o detalhada podem ser encontrados na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p√°gina de documenta√ß√£o do Zond 265</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<table border="1">
<tbody>
<tr>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par√¢metro</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descri√ß√£o do produto</font></font></b><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -iref</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Definindo o arquivo YUV de refer√™ncia</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -relat√≥rio</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Especificando o modo de opera√ß√£o do Zond 265 na linha de comando</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t = qualidade, statstream</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aqui, a gera√ß√£o de dois relat√≥rios √© selecionada: qualidade e estat√≠sticas no fluxo de v√≠deo</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qm = SSIM</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> M√©trica de qualidade para c√°lculo</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Caminho para o arquivo de relat√≥rio CSV</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -nowait</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sem pausas, o pr√≥prio Zond 265 deve ir de um arquivo para outro sem demora</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 3. Par√¢metros de linha de comando do Zond 265 necess√°rios para compilar um script </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√£o dois scripts para o Python 2.7: um para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codificar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 266 arquivos (20 configura√ß√µes para o primeiro, 18 configura√ß√µes para o segundo preset, com 7 taxas de bits: 1, 2, 4, 6, 8, 10, 12 Mbps), o segundo para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">relat√≥rios em formato CSV</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (arquivo - a propor√ß√£o da codifica√ß√£o FPS para a configura√ß√£o de refer√™ncia - a propor√ß√£o da m√©trica SSIM para a configura√ß√£o de refer√™ncia). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como pode ser visto nas tabelas de relat√≥rio do fragmento do arquivo " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">big_buck_bunny_1080p_h264.mov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " (tabelas 5 e 6), √© poss√≠vel modificar a configura√ß√£o, por exemplo, conforme mostrado na tabela 4. Lembre-se de melhorar a efici√™ncia</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o valor da medida de qualidade deve ser menor que um e o valor do tempo de codifica√ß√£o relativo deve ser mais de um. </font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O teste foi realizado em um computador com a seguinte configura√ß√£o: Intel Core i7-2600@3,4 GHz, 16 GB de RAM. </font><font style="vertical-align: inherit;">A maior melhoria na qualidade √© fornecida pelo par√¢metro "--min-cu-size 8" para a configura√ß√£o da codifica√ß√£o r√°pida, para codifica√ß√£o universal o par√¢metro "--rdoq-level 2" (mas tamb√©m retarda a codifica√ß√£o acima de tudo).</font></font><br>
<br>
<table border="1">
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recodifica√ß√£o r√°pida</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x265 -p ultrafast --ref 3 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--rc-lookahead 20 --min-cu-size 8 --bframes 4 - skip anterior --cutree --tune ssim</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> --bitrate% BITRATE_KBPS %% SOURCE_FILE% -o% TARGET_FILE% --put-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Codifica√ß√£o universal</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x265 -p medium </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--weightb --bframes 8 --tu-intra-depth 3 - psy-rdoq 1.0 --b-intra --lookahead-slice 0 --tune ssim</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> --bitrate% BITRATE_KBPS %% SOURCE_FILE% - o% TARGET_FILE% - rendimento% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 4. Modifica√ß√£o das predefini√ß√µes do relat√≥rio MSU HEVC Video Codec Comparison para aumentar a efici√™ncia da codifica√ß√£o na mesma taxa de codifica√ß√£o</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 5. Relat√≥rio sobre modifica√ß√£o da predefini√ß√£o de recodifica√ß√£o r√°pida</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/cd2/c6c/693/cd2c6c6931161d0287d11906ed36079f.png" alt="image"><br>
 5.      <br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 6. Relat√≥rio sobre modifica√ß√£o da predefini√ß√£o de codifica√ß√£o universal</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/537/4cd/30b/5374cd30b05c3e7b1ecb2b7440595213.png" alt="image"><br>
 6.      <br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â f√°cil verificar a escolha correta das op√ß√µes, executando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o script de codifica√ß√£o com as predefini√ß√µes modificadas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tabela 7).</font></font><br>
<br>
<table border="1">
<tbody>
<tr>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medida de qualidade</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tempo relativo de codifica√ß√£o</font></font></b><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodifica√ß√£o r√°pida (refer√™ncia)</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 1</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 1</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodifica√ß√£o r√°pida, modificada</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,69</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,97</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodifica√ß√£o Universal (refer√™ncia)</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 1</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 1</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodifica√ß√£o Universal Modificada</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,85</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,94</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 7. Efici√™ncia de codifica√ß√£o usando predefini√ß√µes modificadas em rela√ß√£o √†s predefini√ß√µes do relat√≥rio "Compara√ß√£o de codec de v√≠deo HEUC HEVC da MSU" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar ver o que as altera√ß√µes nas op√ß√µes influenciaram - abriremos no Zond 265 um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquivo codificado pela predefini√ß√£o alterada ao transcodificar rapidamente a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> taxa de bits de 8 Mbps e compar√°-la com o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquivo, predefini√ß√£o inalterada codificada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. O tamanho da unidade m√°xima de codifica√ß√£o permanece o mesmo e √© 32x32 (√°rea ‚Äú--ctu 32‚Äù). Mas o tamanho do bloco m√≠nimo diminuiu de 16 para 8 (a √°rea ‚Äú--min-cu-size 8‚Äù), foi esse par√¢metro que deu o maior aumento na qualidade. O n√∫mero de quadros B aumentou de 3 para 4 (√°rea ‚Äú- quadros 4‚Äù), mas o n√∫mero m√°ximo de quadros ‚Äúde refer√™ncia‚Äù aumentou (√°rea ‚Äú- ref 4‚Äù). A √°rea SSIM mostra os gr√°ficos m√°ximos de SSIM / PSNR para tr√™s componentes: brilho (Luma) e dois componentes de cores (Cb, Cr). Eles aumentaram de 0.9623-0.9966 para 0.9771-0.9991. Os par√¢metros adicionais restantes (--rc-lookahead 20 --early-skip --cutree) afetam o algoritmo de codifica√ß√£o, e n√£o o tipo do v√≠deo resultante, isso √© refletido principalmente na velocidade de codifica√ß√£o (consulte a Tabela 5). Deve-se notarvisualmente, a imagem do quadro decodificado mudou - os artefatos de codifica√ß√£o agora n√£o s√£o vis√≠veis.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/f83/d2d/cde/f83d2dcde165b09e33f3245131682ce2.png" alt="imagem"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 2. Captura de tela do arquivo Zond 265 codificado usando a configura√ß√£o corrigida da codifica√ß√£o r√°pida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma forma, voc√™ pode verificar os par√¢metros do arquivo codificado com a </font><font style="vertical-align: inherit;">predefini√ß√£o de codifica√ß√£o universal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modificada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inalterada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Figura 3). O tamanho das parti√ß√µes m√≠nimas de TU n√£o mudou e permaneceu igual a 4x4 (√°rea ‚Äú- intra-profundidade 3‚Äù), o n√∫mero de quadros B permaneceu inalterado e igual a 3 (√°rea ‚Äú- quadros 3‚Äù). O SSIM aumentou de 0.9789-0.9994 para 0.9811-0.9992. Comparado √† configura√ß√£o r√°pida de transcodifica√ß√£o, o tamanho m√°ximo do bloco aumentado tornou-se igual a 64x64 (√°rea ‚Äú--ctu 64‚Äù), um filtro SAO (√°rea ‚Äú--sao‚Äù) foi adicionado.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/52b/042/875/52b0428750f30b018f10aa48187e42f3.png" alt="imagem"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 3. Captura de tela do arquivo Zond 265 codificado usando a configura√ß√£o de codifica√ß√£o universal corrigida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, com base nos testes, √© proposta uma lista de op√ß√µes para melhorar a efici√™ncia da codifica√ß√£o (aprimorando a m√©trica SSIM com a mesma velocidade de taxa de bits e de codifica√ß√£o) para configura√ß√µes de codifica√ß√£o r√°pida e universal. </font><font style="vertical-align: inherit;">Usando as altera√ß√µes propostas para um arquivo com um grande n√∫mero de pequenos detalhes, o valor da "medida de qualidade" integral do relat√≥rio "Compara√ß√£o de codec de v√≠deo HEUC MSU" melhorou em 31% para convers√£o r√°pida e em 15% com convers√£o universal, e a velocidade de codifica√ß√£o n√£o mudou significativamente. </font><font style="vertical-align: inherit;">Porque </font><font style="vertical-align: inherit;">Como o teste foi realizado para cada op√ß√£o separadamente, na pr√°tica, voc√™ pode selecionar e usar apenas algumas op√ß√µes convenientes, e n√£o toda a lista proposta.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refer√™ncias</font></font></h3><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HEVC Video Codecs Comparison</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Blender Foundation | www.blender.org</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Zond 265 home page</a></li>
</ol></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt388423/">https://habr.com/ru/post/pt388423/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt388413/index.html">–°–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã–µ –ª–∞–º–ø—ã X-Flash</a></li>
<li><a href="../pt388415/index.html">MP8036multi: exemplo de termostato</a></li>
<li><a href="../pt388417/index.html">Esporte vs fitness: Fitbit Charge HR e Polar M400</a></li>
<li><a href="../pt388419/index.html">Fusar: como transformar seu capacete em um capacete inteligente</a></li>
<li><a href="../pt388421/index.html">OpenCL nas tarefas di√°rias</a></li>
<li><a href="../pt388425/index.html">NX 1 √© a impressora 3D mais r√°pida. Vis√£o geral do revolucion√°rio no mundo da impress√£o 3D</a></li>
<li><a href="../pt388429/index.html">Peter Malkin: "Eu queria que n√£o tivesse vergonha dos √∫ltimos anos"</a></li>
<li><a href="../pt388431/index.html">BitNotarize sugere usar blockchain em vez de cart√≥rio</a></li>
<li><a href="../pt388433/index.html">F√≠sicos propuseram uma maneira de extrair informa√ß√µes de um buraco negro</a></li>
<li><a href="../pt388435/index.html">Como fizemos um an√°logo de Oculus Rift</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>