<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ°Ô∏è üë®üèø‚Äçüîß üë©üèº‚Äçüé® Transforma√ß√£o de processos de desenvolvimento e entrega para um aplicativo herdado üïú üó°Ô∏è üë∂üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nossa equipe √© respons√°vel pela opera√ß√£o e desenvolvimento de um grande produto corporativo. 
 No in√≠cio de 2017, interrompendo uma grande implementa√ß...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transforma√ß√£o de processos de desenvolvimento e entrega para um aplicativo herdado</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427111/"><p>  Nossa equipe √© respons√°vel pela opera√ß√£o e desenvolvimento de um grande produto corporativo. <br>  No in√≠cio de 2017, interrompendo uma grande implementa√ß√£o e relendo as ‚Äúli√ß√µes aprendidas‚Äù, decidimos firmemente revisar o desenvolvimento e a entrega de nosso aplicativo.  Est√°vamos preocupados com a baixa velocidade e qualidade da entrega, n√£o nos permitindo fornecer o n√≠vel de servi√ßo que os clientes esperam de n√≥s. </p><br><p>  Era hora de passar das palavras para as a√ß√µes - para mudar os processos. </p><br><p>  Este artigo falar√° brevemente sobre onde come√ßamos, o que fizemos, qual √© a situa√ß√£o agora, que dificuldades encontramos, o que temos que deixar para tr√°s e o que mais planejamos fazer. </p><a name="habracut"></a><br><h1 id="nachalo">  Iniciar </h1><br><h3 id="nemnogo-o-sisteme">  Um pouco sobre o sistema </h3><br><p>  O aplicativo √© um exemplo cl√°ssico de um aplicativo corporativo monol√≠tico do "vazamento arquitet√¥nico dos anos 2000": </p><br><ul><li>  Operado e desenvolvido ao longo de 15 anos. </li><li>  √â um conjunto de meia d√∫zia de WinForms, servi√ßos Windows e aplicativos ASP .Net vinculados a um √∫nico banco de dados MS SQL. </li><li>  Tamanho da base de c√≥digo: ~ 1MLOC para C #, ~ 9000 objetos de banco de dados.  Grande parte da l√≥gica de neg√≥cios √© executada no lado do banco de dados. </li><li>  O aplicativo consiste em ~ 250 + solu√ß√µes para criar um cliente win / web (uma solu√ß√£o por grupo de formul√°rios relacionados).  Este √© um legado do processo de desenvolvimento anterior e da arquitetura do cliente. </li><li>  O aplicativo suporta v√°rios tipos de processos (clientes) alterando a configura√ß√£o interna: definindo processos, permiss√µes, campos flex√≠veis etc. nas tabelas de configura√ß√£o do banco de dados do sistema.  Ao mesmo tempo, a base de c√≥digo do aplicativo √© a mesma para todos os clientes. </li><li>  O aplicativo √© implantado e suportado em mais de 25 sites (cada site √© uma inst√¢ncia independente do sistema) e atende a um total de v√°rios milhares de usu√°rios finais em diferentes fusos hor√°rios. </li></ul><br><h3 id="process-dostavki-do-transformacii">  Processo de entrega antes da transforma√ß√£o </h3><br><ol><li>  O desenvolvimento e a montagem da aplica√ß√£o final e de seus componentes s√£o realizados pelo contratado. </li><li>  o c√≥digo foi armazenado na lateral do contratante (vers√£o local do MS TFS).  O c√≥digo √© transmitido ao cliente mensalmente na forma de um arquivo da vers√£o atual da ramifica√ß√£o do reposit√≥rio principal. </li><li>  a entrega foi realizada com a entrega de "atualiza√ß√µes delta": para o aplicativo (conjunto de dll, exe etc.) e componentes do banco de dados (conjunto de scripts sql create / alter).  O aplicativo foi constru√≠do e os pacotes delta preparados pelo contratado. </li><li>  o processo de implanta√ß√£o foi suportado pelo sistema de transporte, as altera√ß√µes foram aplicadas automaticamente. </li></ol><br><p>  A entrega √© realizada como parte dos lan√ßamentos mensais (como eu organizei, eu lhe disse anteriormente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ). </p><br><h3 id="suschestvovavshie-problemy">  Problemas existentes </h3><br><p>  <em>Falta de controle</em> </p><br><ul><li>  Apesar da propriedade formal do c√≥digo, a montagem real do aplicativo pelo cliente era imposs√≠vel. </li><li>  Como resultado, √© imposs√≠vel verificar a operacionalidade do c√≥digo transmitido ao cliente. </li><li>  altera√ß√µes no c√≥digo - n√£o transparentes para o cliente.  N√£o √© poss√≠vel corresponder √†s altera√ß√µes solicitadas e reais no produto. </li><li>  a an√°lise de c√≥digo √© dif√≠cil para SQL e imposs√≠vel para componentes C # </li></ul><br><p>  <em>Entrada de trabalho e erros</em> </p><br><ul><li>  A prepara√ß√£o de "pacotes delta" √© um procedimento demorado para o desenvolvimento, uma fonte de erros e certos custos do projeto. </li><li>  A implanta√ß√£o de um aplicativo Delta Packet requer o rastreamento da ordem dos pacotes.  Um erro de pacote fora de ordem √© um grande problema de implanta√ß√£o e uma fonte significativa de incidentes. </li><li>  Regress√µes ocorrem regularmente: erros que parecem ter sido reparados e corre√ß√µes implementadas no produto apareceram novamente. </li></ul><br><p>  <em>Limita√ß√µes</em> </p><br><ul><li>  a capacidade de restaurar o estado do sistema em um momento no passado (altera√ß√µes de revers√£o) est√° praticamente ausente. </li><li>  a capacidade de escalar efetivamente os recursos de desenvolvimento e testes iniciais, atraindo funcion√°rios dos clientes, est√° praticamente ausente. </li></ul><br><h3 id="ozhidaemye-rezultaty">  Resultados esperados </h3><br><p>  No in√≠cio do projeto, estabelecemos metas √≥bvias para resolvermos os problemas identificados acima. </p><br><ul><li>  Transferir reposit√≥rio de c√≥digos para o controle do cliente </li><li>  Mova o processo de cria√ß√£o do aplicativo para o lado do cliente </li><li>  Modifique o processo de distribui√ß√£o das mudan√ßas, abandonando o ‚Äúdelta das mudan√ßas‚Äù em favor de uma atualiza√ß√£o completa </li></ul><br><p>  Al√©m disso, usando as solu√ß√µes obtidas quando os dois primeiros objetivos foram alcan√ßados, calculamos: </p><br><ul><li>  Melhore a qualidade t√©cnica das solu√ß√µes resultantes atrav√©s do controle de c√≥digo </li><li>  Aumente o envolvimento e a usabilidade do teste, fornecendo a implanta√ß√£o de autoatendimento. </li></ul><br><h1 id="etapy-bolshogo-puti">  Etapas de um longo caminho </h1><br><h3 id="analiz-tekuschego-sostoyaniya-processov-razrabotki">  An√°lise do estado atual dos processos de desenvolvimento </h3><br><p>  Primeiro passo: analise o processo de desenvolvimento do contratado existente.  Isso ajudou a planejar as altera√ß√µes para, se poss√≠vel, n√£o interromper o trabalho. </p><br><p>  Infelizmente, o conhecimento do processo de desenvolvimento mostrou que, no entendimento da ind√∫stria de TI, atualmente, o processo estava ausente. </p><br><ol><li>  O c√≥digo do banco de dados e a l√≥gica de neg√≥cios para ele n√£o foram atualizados no reposit√≥rio.  O principal motivo: a falta de ferramentas que implementam o assembly a partir do c√≥digo no reposit√≥rio e a implanta√ß√£o do resultado.  Portanto, o c√≥digo no reposit√≥rio √© apenas documenta√ß√£o. </li><li>  A vers√£o "real" do c√≥digo do banco de dados est√° no "banco de dados de desenvolvimento" comum, no qual dezenas de desenvolvedores trabalham. </li><li>  O c√≥digo do aplicativo cliente (C #, ASP.NET) foi mantido no reposit√≥rio, mas a qualidade e a pontualidade das confirma√ß√µes n√£o eram garantidas. </li><li>  A montagem dos componentes (n√£o toda a aplica√ß√£o) foi realizada nas esta√ß√µes do desenvolvedor.  N√£o est√° totalmente claro como o c√≥digo foi atualizado antes da montagem.  O componente montado foi disposto em uma pasta compartilhada compartilhada.  A partir da√≠, um "pacote delta" foi formado para o cliente. </li><li>  A completa falta de pr√°tica de manter ramos de desenvolvimento.  Por sinais indiretos, suspeitamos disso por um longo tempo - mas depois de mergulhar no processo, tudo ficou √≥bvio. </li></ol><br><h3 id="perehod-na-novyy-repozitoriy-i-sistemu-kontrolya-versiy">  Mudando para um novo reposit√≥rio e sistema de controle de vers√£o </h3><br><p>  A depend√™ncia das plataformas e padr√µes corporativos da MS determinou a escolha do ambiente de desenvolvimento - Team Foundation Server. <br>  No entanto, quando iniciamos o projeto diretamente (abril de 2017), a vers√£o do Visual Studio Team Services foi lan√ßada.  O produto parecia muito interessante, foi designado como uma dire√ß√£o estrat√©gica para o MS, oferecendo reposit√≥rios git, montagem e implanta√ß√£o para on-prem e cloud. </p><br><p>  O TFS corporativo no local ficou para tr√°s da vers√£o e funcionalidade do VSTS, a migra√ß√£o para a nova vers√£o estava apenas no processo de discuss√£o.  N√£o quer√≠amos esperar.  Decidimos mudar imediatamente para o VSTS, pois isso reduzia nossos custos indiretos de suporte √† plataforma e nos fornecia controle total sobre como e o que fazemos. </p><br><p>  No momento do in√≠cio das altera√ß√µes, a equipe de desenvolvimento possu√≠a experi√™ncia com o TFSVC, o c√≥digo do aplicativo era armazenado em um reposit√≥rio desse tipo.  Por outro lado, o GIT h√° muito se tornou o padr√£o para a comunidade de TI - os clientes e consultores terceirizados recomendaram a mudan√ßa para esse sistema. <br>  Quer√≠amos que a equipe de desenvolvimento estivesse envolvida na decis√£o sobre um novo sistema de controle de vers√£o e fizesse uma escolha informada. </p><br><p>  Implementamos dois projetos no VSTS com reposit√≥rios diferentes - TFSVC e GIT.  Foi definido um conjunto de cen√°rios, proposto para testar e avaliar a usabilidade em cada um dos sistemas. </p><br><p>  Entre os cen√°rios avaliados estavam: </p><br><ul><li>  Criar e mesclar ramifica√ß√µes </li><li>  Organiza√ß√£o de trabalho conjunto (em um ou diferentes ramos) </li><li>  Alterar opera√ß√µes da cadeia (confirmar, desfazer) </li><li>  Integra√ß√£o de terceiros </li><li>  A capacidade de continuar trabalhando quando o servidor n√£o est√° dispon√≠vel. </li></ul><br><p>  Como resultado, como esperado, o GIT foi escolhido, e at√© agora ningu√©m se arrependeu. </p><br><p>  Como um processo, come√ßamos a usar o GitFlow.  Esse processo forneceu controle suficiente sobre as altera√ß√µes e permitiu a entrega de lan√ßamentos, como estamos acostumados. </p><br><ol><li>  Defendemos o ramo de desenvolvimento com uma pol√≠tica que exigia que todas as altera√ß√µes passassem por solicita√ß√µes de recebimento. </li><li>  Tentamos aderir √† pr√°tica de "um ticket - uma requisi√ß√£o pull".  Altera√ß√µes de tickets diferentes nunca s√£o combinadas em uma altera√ß√£o.  Tentamos fazer o poss√≠vel para testar a ramifica√ß√£o de recursos para evitar a situa√ß√£o com corre√ß√µes nas solicita√ß√µes de pull subsequentes. </li><li>  Ao mesclar no desenvolvimento, todas as altera√ß√µes s√£o mescladas em uma √∫nica confirma√ß√£o (squash). </li><li>  As ramifica√ß√µes de libera√ß√£o s√£o criadas a partir do desenvolvimento. </li><li>  Se necess√°rio, na ramifica√ß√£o da vers√£o, voc√™ pode adicionar as altera√ß√µes mais recentes seletivamente (sele√ß√£o de cereja) ou todas (rebase).  N√£o realizamos a corre√ß√£o diretamente no ramo de lan√ßamento. </li><li>  Depois de implantar a vers√£o mais recente no produto, ela passa a ser dominada por for√ßa de envio (apenas algumas pessoas t√™m esse direito) </li></ol><br><h3 id="avtomatizaciya-sborki-produkta">  Automa√ß√£o de montagem de produtos </h3><br><p>  A aplica√ß√£o era um grande n√∫mero de montagens, centenas de solu√ß√µes.  Como se constatou durante a auditoria do processo, tudo isso foi coletado separadamente e ‚Äúmanualmente‚Äù. <br>  No primeiro est√°gio, decidimos n√£o refazer tudo do zero (para n√£o interromper a entrega existente), mas "agrupar" o assembly em um conjunto de scripts msbuild - um script por componente. <br>  Assim, rapidamente obtivemos scripts que executavam todos os artefatos intermedi√°rios necess√°rios e, no final, o produto final. </p><br><p>  Uma hist√≥ria separada √© um design de banco de dados.  Infelizmente, o sistema cont√©m v√°rios componentes CLR que n√£o foram bem estruturados.  As depend√™ncias n√£o permitem uma base de implanta√ß√£o simples com conte√∫do.  No momento, isso est√° sendo resolvido por um script de pr√©-implanta√ß√£o. <br>  Al√©m disso, devido ao cen√°rio desigual do sistema (as vers√µes 2008 e 2014 do SQL Server foram instaladas em diferentes pontos), foi necess√°rio organizar a montagem do projeto base para as vers√µes 2.0 e 4.0 do .Net. </p><br><p>  Depois que todos os scripts estavam prontos e testados, eles foram usados ‚Äã‚Äãno script de constru√ß√£o VSTS. </p><br><p>  Imediatamente antes do in√≠cio da montagem, as vers√µes de todos os produtos foram atualizadas para um n√∫mero padr√£o comum, incluindo o n√∫mero de constru√ß√£o da constru√ß√£o.  O mesmo n√∫mero foi armazenado no script p√≥s-implanta√ß√£o.  Assim, todos os componentes - o banco de dados e todos os aplicativos clientes - sa√≠ram consistentes e igualmente numerados. </p><br><h3 id="razvertyvaniya-na-testovyy-stend">  Implanta√ß√£o na bancada de testes </h3><br><p>  Depois que a vers√£o inicial do processo de compila√ß√£o foi conclu√≠da, prosseguimos com a prepara√ß√£o do script de implanta√ß√£o. </p><br><p>  Espera-se que o banco de dados tenha sido o mais problem√°tico. </p><br><p>  A implanta√ß√£o de uma c√≥pia "superior" de um banco de dados real revelou muitos conflitos entre a montagem e o estado dos sistemas reais: </p><br><ul><li>  Vers√µes inconsistentes no GIT e no sistema real </li><li>  Esquemas de banco de dados pertencentes a usu√°rios que foram planejados para serem exclu√≠dos. </li></ul><br><h3 id="stabilizaciya-processa-razrabotki">  Estabiliza√ß√£o do processo de desenvolvimento </h3><br><p>  √â claro que √© estranho falar sobre isso, e mais ainda escrever aqui, mas a mudan√ßa mais s√©ria para os desenvolvedores foi a introdu√ß√£o do princ√≠pio "se isso n√£o est√° no git, isso n√£o existe".  Anteriormente, o c√≥digo era confirmado "para reportar ao cliente".  Agora - sem isso, √© imposs√≠vel entregar qualquer coisa. </p><br><p>  O mais dif√≠cil foi com o c√≥digo do banco de dados.  Ap√≥s mudar para a implanta√ß√£o do banco de dados a partir do reposit√≥rio, atrav√©s da montagem e implanta√ß√£o usando o sqlpackage, a abordagem "delta" foi substitu√≠da pela abordagem "estado desejado".  Pacotes eram coisa do passado; tudo tinha que ser implantado automaticamente. </p><br><p>  Mas!  At√© a transi√ß√£o completa para o novo processo de implanta√ß√£o, as altera√ß√µes ainda precisavam ser entregues.  E era necess√°rio fazer isso da maneira antiga - "atualiza√ß√µes delta". </p><br><p>  Enfrentamos a tarefa de garantir consist√™ncia completa e constante do estado do sistema ao entregar pacotes delta e o conte√∫do do reposit√≥rio. </p><br><p>  Para isso, organizamos o seguinte processo: </p><br><ol><li>  Regularmente, o c√≥digo do reposit√≥rio era coletado e implantado em um banco de dados "modelo" vazio. </li><li>  Com base na base "modelo", um autoteste especial estava sendo preparado.  Para cada objeto do banco de dados "modelo", as somas de verifica√ß√£o foram calculadas.  O autoteste cont√©m todas essas somas de verifica√ß√£o e, na inicializa√ß√£o, calcula as somas de verifica√ß√£o dos objetos correspondentes do banco de dados "verificado".  Qualquer discrep√¢ncia na composi√ß√£o dos objetos ou em suas somas de verifica√ß√£o leva a uma queda no teste. </li><li>  O teste de "queda" proibiu automaticamente a transfer√™ncia de pacotes do ambiente de teste mais abaixo no cen√°rio.  Essa integra√ß√£o j√° foi implementada no sistema de transporte anterior. </li></ol><br><p>  Assim, usando o controle autom√°tico, foi poss√≠vel atualizar relativamente r√°pido o c√≥digo do banco de dados do produto no git e mant√™-lo sem esfor√ßo adicional por parte da equipe do projeto.  Ao mesmo tempo, os desenvolvedores come√ßaram a se acostumar com a necessidade de confirmar o c√≥digo de maneira correta e oportuna no reposit√≥rio. </p><br><h3 id="razvertyvanie-produkta-na-okruzheniya-integracionnyh-testov">  Implanta√ß√£o do produto em ambientes de teste de integra√ß√£o </h3><br><p>  Ap√≥s concluir o est√°gio anterior, prosseguimos diretamente para a implanta√ß√£o do aplicativo em um ambiente de teste.  Paramos completamente de aplicar pacotes delta aos sistemas de teste e mudamos para a implanta√ß√£o autom√°tica usando o VSTS. </p><br><p>  A partir desse momento, toda a equipe come√ßou a receber os primeiros frutos dos esfor√ßos gastos anteriormente: a implanta√ß√£o ocorreu sem nenhum esfor√ßo adicional.  O c√≥digo personalizado foi coletado, implementado e testado automaticamente. </p><br><p>  Infelizmente, como entendemos posteriormente, o "alinhamento do reposit√≥rio" levou ao fato de termos uma vers√£o da vers√£o est√°vel do "develop", mas a vers√£o da "produ√ß√£o" ainda estava indispon√≠vel.  E, portanto, n√£o havia nada al√©m do ambiente de teste com QAS e PRD. </p><br><p>  O c√≥digo do aplicativo no lado do banco de dados pode ser comparado ao c√≥digo produtivo e entender as diferen√ßas.  N√£o havia nada com o qual comparar aplicativos clientes - havia apenas uma vers√£o produtiva atualizada na forma de um conjunto de arquivos execut√°veis ‚Äã‚Äãe, a partir do qual eles foram criados, era imposs√≠vel ter certeza. </p><br><h3 id="testirovanie-produkta-kak-rezultata-avtomaticheskoy-sborki">  Testando o produto como resultado da montagem autom√°tica </h3><br><p>  Ap√≥s alterar a abordagem de montagem, o produto passou por extensos testes de regress√£o.  Era necess√°rio ter certeza de que o aplicativo estava funcionando e nada foi perdido. <br>  Ao testar, ficou mais f√°cil com a funcionalidade localizada ao lado do banco de dados.  Felizmente, desenvolvemos um conjunto significativo de autotestes que cobrem √°reas cr√≠ticas. </p><br><p>  Mas n√£o houve testes para C # - portanto, tudo foi verificado manualmente.  Foi uma quantidade significativa de trabalho e a verifica√ß√£o levou algum tempo. </p><br><h3 id="pryzhok-very---pilotnoe-razvertyvanie-na-produktiv">  Salto de f√© - implanta√ß√£o produtiva piloto </h3><br><p>  Apesar dos testes, a implanta√ß√£o em um produto pela primeira vez foi assustadora. </p><br><p>  Tivemos sorte - t√≠nhamos acabado de planejar a pr√≥xima implanta√ß√£o do sistema em um novo site.  E decidimos usar essa chance para uma implanta√ß√£o piloto. <br>  Os usu√°rios n√£o viram, os poss√≠veis erros da nova montagem foram f√°ceis de corrigir, o trabalho produtivo real ainda n√£o foi iniciado. </p><br><p>  Implementamos o sistema e, por v√°rias semanas, ele estava no modo pr√©-produtivo (carga baixa, um determinado padr√£o de uso que pode ser ignorado no produto).  Durante esse per√≠odo, v√°rios defeitos que foram perdidos durante o teste foram revelados.  Eles foram corrigidos conforme foram encontrados e a nova vers√£o foi lan√ßada imediatamente para verifica√ß√£o. </p><br><p>  Ap√≥s o lan√ßamento oficial e uma semana de suporte p√≥s-lan√ßamento, anunciamos que esta √© a primeira c√≥pia montada e entregue "de uma nova maneira". </p><br><p>  Esta vers√£o do assembly tornou-se a primeira vers√£o est√°vel da ramifica√ß√£o principal, foi pendurada com tags fisrt_deployment (n√£o solicitamos √≠cones com um hash do commit). </p><br><h3 id="masshtabirovanie-razvertyvaniya-na-ves-produktivnyy-landshaft">  Escale a implanta√ß√£o em todo um cen√°rio produtivo </h3><br><p>  Como James Bond disse: "A segunda vez √© muito mais simples".  Ap√≥s o sucesso da implanta√ß√£o piloto, conectamos rapidamente as inst√¢ncias restantes de sistemas de um tipo semelhante. </p><br><p>  Mas o sistema possui v√°rios tipos de uso - uma funcionalidade pode ser usada para um tipo e n√£o usada em outros casos.  Consequentemente, a funcionalidade testada na implementa√ß√£o do primeiro tipo n√£o garantiu necessariamente o sucesso para outros casos. </p><br><p>  Para testar a funcionalidade dos demais tipos de uso, come√ßamos a usar projetos ativos que estavam em desenvolvimento.  A id√©ia era semelhante e a primeira implanta√ß√£o - come√ßamos a usar montagens autom√°ticas, "deslizando" para os usu√°rios junto com a funcionalidade de design.  Assim, os usu√°rios, trabalhando com a vers√£o "projeto" do produto, ao mesmo tempo verificaram a funcionalidade antiga. </p><br><p>  O dimensionamento em si revelou problemas t√©cnicos inesperados: </p><br><p>  <em>Cen√°rio n√£o homog√™neo do sistema</em> <br>  Al√©m de implantar diretamente o aplicativo, tivemos que primeiro cuidar para que tudo acontecesse em todos os lugares - vers√µes .Net, Powershell e m√≥dulos.  Tudo levou bastante tempo. </p><br><p>  <em>Conex√£o de rede</em> <br>  Em alguns sites, a conex√£o de rede simplesmente n√£o permitia bombear todos os componentes da montagem.  Houve tempos limite, danos durante a transfer√™ncia.  Verificamos e tentamos muitas coisas - sem muito sucesso. </p><br><p>  Eu tive que me debru√ßar sobre a seguinte solu√ß√£o: o script de compila√ß√£o foi finalizado para que todos os resultados fossem compactados em um arquivo grande, que foi cortado em pequenos fragmentos (2 mb cada).  Finalizamos o cen√°rio de implanta√ß√£o para eliminar a simultaneidade ao fazer o download de artefatos, aceitamos todos os fragmentos de 2 megabytes e restauramos deles o que j√° pode ser expandido. </p><br><p>  <em>Conflito com antiv√≠rus</em> <br>  Outro problema estranho que encontramos √© um conflito entre o software antiv√≠rus e uma das etapas de implanta√ß√£o: quando todos os tipos de arquivos "suspeitos", como .js, .dll, s√£o extra√≠dos dos arquivos de artefatos, o antiv√≠rus come√ßa a observ√°-los de perto.  E o mais estranho √© que o antiv√≠rus come√ßa a correr para o arquivo antes do final da descompacta√ß√£o e o processo de descompacta√ß√£o cai com a mensagem "o arquivo est√° ocupado por outro processo".  Enquanto estamos lutando com isso, excluindo a pasta local com artefatos da verifica√ß√£o, n√£o √© muito bom, mas n√£o criamos mais nada. </p><br><h3 id="uluchshenie-processov">  Melhoria de processo </h3><br><p>      ,    "   " ‚Äî   . </p><br><ul><li>        (service-now.com)  VSTS      Work Items.     develop ‚Äî       . </li><li>  CI   feature .      ‚Äî        </li><li>            "self-service"      </li><li>         ‚Äî     .        ,            . </li><li>      :    , CI/CD        ,      </li><li>         (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ) </li><li>   -    (   )     .        ‚Äî    ,      . </li><li>     VSTS     ,        ,     . </li></ul><br><h1 id="itogi">  Sum√°rio </h1><br><h3 id="tekuschaya-situaciya">   </h3><br><ul><li>        MS VisualStudio Team Services (   ‚Äî Azure Devops)  .    ‚Äî GIT </li><li>          (/) </li><li>    git / GitFlow    . </li><li>   code review    . </li><li>     CI.       ,    feature ,     . </li><li>          . ,           . </li><li>          (  )    ‚Äî     . -      . </li><li>  -      1 .      -  . </li><li>   ""     . </li></ul><br><h3 id="vremya-po-etapam">    </h3><br><table><thead><tr><th> ‚Ññ </th><th>   </th><th>  </th></tr></thead><tbody><tr><td>  1 </td><td>    ‚Äî     ,        </td><td> 6  </td></tr><tr><td>  2 </td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Desde a primeira implanta√ß√£o at√© um ambiente de teste - da primeira vers√£o piloto a uma produ√ß√£o </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 meses </font></font></td></tr><tr><td>  3 </td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Da implanta√ß√£o piloto √† produtividade, √† primeira vers√£o para todas as inst√¢ncias </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5 meses </font></font></td></tr></tbody></table><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dura√ß√£o total - 14 meses </font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A dura√ß√£o, especialmente na fase final, foi amplamente determinada pela coordena√ß√£o e um calend√°rio acordado para a manuten√ß√£o do sistema. </font></font></p><br><h3 id="trudozatraty"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Custos trabalhistas </font></font></h3><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O custo total dos funcion√°rios envolvidos do cliente e da organiza√ß√£o contratante para todo o trabalho relacionado √† mudan√ßa √© de aproximadamente 250 pessoas * dias. </font></font></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427111/">https://habr.com/ru/post/pt427111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427097/index.html">O aplicativo m√≥vel ajuda a detectar depress√£o e outros problemas psicol√≥gicos nos est√°gios iniciais.</a></li>
<li><a href="../pt427101/index.html">O Google planeja cobrar dos fabricantes de dispositivos m√≥veis at√© US $ 40 por cada dispositivo vendido</a></li>
<li><a href="../pt427105/index.html">Aprenda a aprender: a educa√ß√£o continuada √© a chave para a competitividade na era da economia digital</a></li>
<li><a href="../pt427107/index.html">Parsim X12 "no joelho"</a></li>
<li><a href="../pt427109/index.html">Pirataria no espa√ßo - o delicioso Delta-V e os barcos a vapor furtivos de hidrog√™nio - parte 1</a></li>
<li><a href="../pt427113/index.html">Matrizes de portas program√°veis: como elas ajudam as redes 5G</a></li>
<li><a href="../pt427117/index.html">Salas de reuni√£o com base no Asterisk</a></li>
<li><a href="../pt427123/index.html">Jogo de Turing</a></li>
<li><a href="../pt427129/index.html">Intelig√™ncia contra amea√ßas - uma abordagem moderna para seguran√ßa da informa√ß√£o</a></li>
<li><a href="../pt427131/index.html">Familiaridade com Audiomania: 15 materiais tem√°ticos sobre produ√ß√£o, design, escrit√≥rios e empresas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>