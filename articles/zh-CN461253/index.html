<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“¥ ğŸ‘ğŸ¿ ğŸ¤« å¦‚ä½•åœ¨Cå’ŒC ++ä¸­æ”¾çºµè‡ªå·±ã€‚ Haiku OSé£Ÿè°± ğŸ¥‡ ğŸ› ğŸ‘‹ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å…³äºPVS-Studioé™æ€åˆ†æä»ªå’ŒHaiku OSä»£ç å¦‚ä½•ç›¸é‡çš„æ•…äº‹å¯ä»¥è¿½æº¯åˆ°2015å¹´ã€‚å¯¹äºä¸¤ä¸ªé¡¹ç›®çš„å›¢é˜Ÿæ¥è¯´ï¼Œè¿™éƒ½æ˜¯ä¸€æ¬¡æ¿€åŠ¨äººå¿ƒçš„å®éªŒå’Œæœ‰ç›Šçš„ç»éªŒã€‚ ä¸ºä»€ä¹ˆè¦è¿›è¡Œå®éªŒï¼Ÿ é‚£æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰é€‚ç”¨äºLinuxçš„åˆ†æä»ªï¼Œå¹¶ä¸”ä¹Ÿå°†å†æœ‰ä¸€å¹´åŠçš„æ—¶é—´ã€‚ æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬å›¢é˜Ÿçš„å‘çƒ§å‹çš„åŠªåŠ›å¾—åˆ°äº†å›æŠ¥ï¼šæˆ‘ä»¬ä¸Hai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•åœ¨Cå’ŒC ++ä¸­æ”¾çºµè‡ªå·±ã€‚ Haiku OSé£Ÿè°±</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/461253/"> å…³äºPVS-Studioé™æ€åˆ†æä»ªå’ŒHaiku OSä»£ç å¦‚ä½•ç›¸é‡çš„æ•…äº‹å¯ä»¥è¿½æº¯åˆ°2015å¹´ã€‚å¯¹äºä¸¤ä¸ªé¡¹ç›®çš„å›¢é˜Ÿæ¥è¯´ï¼Œè¿™éƒ½æ˜¯ä¸€æ¬¡æ¿€åŠ¨äººå¿ƒçš„å®éªŒå’Œæœ‰ç›Šçš„ç»éªŒã€‚ ä¸ºä»€ä¹ˆè¦è¿›è¡Œå®éªŒï¼Ÿ é‚£æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰é€‚ç”¨äºLinuxçš„åˆ†æä»ªï¼Œå¹¶ä¸”ä¹Ÿå°†å†æœ‰ä¸€å¹´åŠçš„æ—¶é—´ã€‚ æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬å›¢é˜Ÿçš„å‘çƒ§å‹çš„åŠªåŠ›å¾—åˆ°äº†å›æŠ¥ï¼šæˆ‘ä»¬ä¸Haikuå¼€å‘äººå‘˜èšé›†åœ¨ä¸€èµ·ï¼Œæé«˜äº†ä»£ç è´¨é‡ï¼Œåˆ©ç”¨å¼€å‘äººå‘˜åˆ¶ä½œçš„ç½•è§é”™è¯¯æ‰©å¤§äº†é”™è¯¯åŸºç¡€ï¼Œå¹¶å®Œå–„äº†åˆ†æå™¨ã€‚ ç°åœ¨ï¼Œæ‚¨å¯ä»¥è½»æ¾å¿«æ·åœ°æ£€æŸ¥Haikuä»£ç ä¸­çš„é”™è¯¯ã€‚ <br><div style="text-align:center;"><img src="https://import.viva64.com/docx/blog/0644_Haiku_3/image1.png" alt="å›¾ç‰‡1"></div><br><a name="habracut"></a><br><h2> å¼•è¨€ </h2><br> äº†è§£æˆ‘ä»¬æ•…äº‹çš„ä¸»è¦ç‰¹å¾-å¸¦æœ‰å¼€æ”¾æºä»£ç çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Haiku</a>å’Œé’ˆå¯¹Cï¼ŒC ++ï¼ŒCï¼ƒå’ŒJavaçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PVS-Studio</a>é™æ€åˆ†æå™¨ã€‚  4.5å¹´å‰ï¼Œå½“æˆ‘ä»¬æ·±å…¥ç ”ç©¶é¡¹ç›®åˆ†ææ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å¤„ç†å·²ç¼–è¯‘çš„å¯æ‰§è¡Œåˆ†æå™¨æ–‡ä»¶ã€‚ ç”¨äºè§£æç¼–è¯‘å™¨å‚æ•°ï¼Œè¿è¡Œé¢„å¤„ç†å™¨ï¼Œå¹¶è¡Œåˆ†æç­‰çš„æ‰€æœ‰åŸºç¡€ç»“æ„å‡æ¥è‡ªç”¨Cï¼ƒç¼–å†™çš„å®ç”¨ç¨‹åº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Compiler Monitoring UI</a> ã€‚ è¯¥å®ç”¨ç¨‹åºå·²éƒ¨åˆ†ç§»æ¤åˆ°è¦åœ¨Linuxä¸Šè¿è¡Œçš„Monoå¹³å°ã€‚  Haikué¡¹ç›®æ˜¯åœ¨Windowsä»¥å¤–çš„å„ç§æ“ä½œç³»ç»Ÿä¸‹ä½¿ç”¨äº¤å‰ç¼–è¯‘å™¨æ„å»ºçš„ã€‚ æˆ‘æƒ³å†æ¬¡æåˆ°ä¸Haikuå¤§æ¥¼ç›¸å…³çš„ä¾¿åˆ©æ€§å’Œæ–‡æ¡£å®Œæ•´æ€§ã€‚ æˆ‘è¿˜è¦æ„Ÿè°¢Haikuå¼€å‘äººå‘˜åœ¨æ„å»ºé¡¹ç›®ä¸­æ‰€æä¾›çš„å¸®åŠ©ã€‚ <br><br> ç°åœ¨æ‰§è¡Œåˆ†æè¦ç®€å•å¾—å¤šã€‚ è¿™æ˜¯ç”¨äºæ„å»ºå’Œåˆ†æé¡¹ç›®çš„æ‰€æœ‰å‘½ä»¤çš„åˆ—è¡¨ï¼š <br><br><pre><code class="cpp hljs">cd /opt git clone https:<span class="hljs-comment"><span class="hljs-comment">//review.haiku-os.org/buildtools git clone https://review.haiku-os.org/haiku cd ./haiku mkdir generated.x86_64; cd generated.x86_64 ../configure --distro-compatibility official -j12 \ --build-cross-tools x86_64 ../../buildtools cd ../../buildtools/jam make all cd /opt/haiku/generated.x86_64 pvs-studio-analyzer trace -- /opt/buildtools/jam/bin.linuxx86/jam \ -q -j1 @nightly-anyboot pvs-studio-analyzer analyze -l /mnt/svn/PVS-Studio.lic -r /opt/haiku \ -C x86_64-unknown-haiku-gcc -o /opt/haiku/haiku.log -j12</span></span></code> </pre> <br> é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œé¡¹ç›®åˆ†ææ˜¯åœ¨Dockerå®¹å™¨ä¸­å®ç°çš„ã€‚ æœ€è¿‘ï¼Œæˆ‘ä»¬å‡†å¤‡äº†æœ‰å…³è¯¥ä¸»é¢˜çš„æ–°æ–‡æ¡£ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨Dockerä¸­è¿è¡ŒPVS-Studio</a> ã€‚ å¯¹äºæŸäº›å…¬å¸æ¥è¯´ï¼Œè¿™å¯ä»¥éå¸¸è½»æ¾åœ°å°†é™æ€åˆ†ææŠ€æœ¯åº”ç”¨äºå…¶é¡¹ç›®ã€‚ <br><br><h2> æœªåˆå§‹åŒ–çš„å˜é‡ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V614ä½¿ç”¨äº†</a>æœªåˆå§‹åŒ–çš„å˜é‡â€œ rvalâ€ã€‚  1727å¹´ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">auto_fetch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argv[])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> argpos; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rval; <span class="hljs-comment"><span class="hljs-comment">// &lt;= argpos = 0; if (sigsetjmp(toplevel, 1)) { if (connected) disconnect(0, NULL); if (rval &gt; 0) // &lt;= rval = argpos + 1; return (rval); } .... }</span></span></code> </pre> <br>  <i>rval</i>å˜é‡å°šæœªåœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œå› æ­¤å°†å…¶ä¸nullå€¼è¿›è¡Œæ¯”è¾ƒå°†å¯¼è‡´ä¸ç¡®å®šçš„ç»“æœã€‚ å¦‚æœæƒ…å†µå¤±è´¥ï¼Œåˆ™<i>rval</i>å˜é‡çš„ä¸ç¡®å®šå€¼å¯ä»¥æˆä¸º<i>auto_fetch</i>å‡½æ•°çš„è¿”å›å€¼ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V614ä½¿ç”¨äº†</a>æœªåˆå§‹åŒ–çš„æŒ‡é’ˆâ€œ resâ€ã€‚ å‘½ä»¤.c 2873 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">addrinfo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ai_flags; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ai_family; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ai_socktype; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ai_protocol; <span class="hljs-keyword"><span class="hljs-keyword">socklen_t</span></span> ai_addrlen; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *ai_canonname; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sockaddr</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ai_addr</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">addrinfo</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ai_next</span></span></span><span class="hljs-class">;</span></span> }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sourceroute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct addrinfo *ai, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *arg, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **cpp, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *lenp, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *protop, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *optp)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buf[<span class="hljs-number"><span class="hljs-number">1024</span></span> + ALIGNBYTES]; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *cp, *cp2, *lsrp, *ep; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sockaddr_in</span></span></span><span class="hljs-class"> *_</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sin</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> INET6 struct sockaddr_in6 *sin6; struct ip6_rthdr *rth; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> struct addrinfo hints, *res; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// &lt;= int error; char c; if (cpp == NULL || lenp == NULL) return -1; if (*cpp != NULL) { switch (res-&gt;ai_family) { // &lt;= case AF_INET: if (*lenp &lt; 7) return -1; break; .... } } .... }</span></span></span></span></code> </pre> <br> è¿™æ˜¯ä½¿ç”¨æœªåˆå§‹åŒ–å˜é‡çš„ç±»ä¼¼æƒ…å†µï¼Œé™¤äº†<i>res</i>æ˜¯æ­¤å¤„å‘ç”Ÿçš„æœªåˆå§‹åŒ–æŒ‡é’ˆã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V506</a>æŒ‡å‘æœ¬åœ°å˜é‡â€œå½’ä¸€åŒ–â€çš„æŒ‡é’ˆå­˜å‚¨åœ¨è¯¥å˜é‡èŒƒå›´ä¹‹å¤–ã€‚ è¿™æ ·çš„æŒ‡é’ˆå°†å˜ä¸ºæ— æ•ˆã€‚  TextView.cpp 5596 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> BTextView::_ApplyStyleRange(...., <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> BFont* font, ....) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (font != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { BFont normalized = *font; _NormalizeFont(&amp;normalized); font = &amp;normalized; } .... fStyles-&gt;SetStyleRange(fromOffset, toOffset, fText-&gt;Length(), mode, font, color); }</code> </pre> <br> ç¨‹åºå‘˜å¯èƒ½éœ€è¦ä½¿ç”¨ä¸­é—´å˜é‡æ¥æ ‡å‡†åŒ–å¯¹è±¡ã€‚ ä½†æ˜¯ç°åœ¨ï¼Œ <i>å­—ä½“</i>æŒ‡é’ˆåŒ…å«æŒ‡å‘<i>è§„èŒƒåŒ–</i>å¯¹è±¡çš„æŒ‡é’ˆï¼Œåœ¨é€€å‡ºåˆ›å»ºä¸´æ—¶å¯¹è±¡çš„èŒƒå›´åï¼Œè¯¥å¯¹è±¡å°†è¢«åˆ é™¤ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V603</a>å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 27 <br><br><pre> <code class="cpp hljs">int8 BUnicodeChar::Type(uint32 c) { BUnicodeChar(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> u_charType(c); }</code> </pre> <br> åœ¨C ++ç¨‹åºå‘˜ä¸­ï¼Œä¸€ä¸ªéå¸¸æ™®éçš„é”™è¯¯æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°çš„è°ƒç”¨æ¥åˆå§‹åŒ–/ä½¿ç±»å­—æ®µæ— æ•ˆã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ä¼šå¯¹ç±»å­—æ®µè¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯ä¼šåˆ›å»ºæ­¤ç±»çš„ä¸€ä¸ªæ–°çš„æœªå‘½åå¯¹è±¡ï¼Œç„¶åç«‹å³é”€æ¯è¯¥å¯¹è±¡ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œé¡¹ç›®ä¸­æœ‰å¾ˆå¤šè¿™æ ·çš„åœ°æ–¹ï¼š <br><br><ul><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 37 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 49 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 58 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 67 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 77 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 89 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 103 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 115 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 126 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 142 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 152 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 163 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 186 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 196 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 206 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 214 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 222 </li><li>  V603å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªè¢«ä½¿ç”¨ã€‚ å¦‚æœè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™åº”ä½¿ç”¨'this-&gt; BUnicodeChar :: BUnicodeCharï¼ˆ....ï¼‰'ã€‚  UnicodeChar.cpp 230 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V670</a>æœªåˆå§‹åŒ–çš„ç±»æˆå‘˜'fPatternHandler'ç”¨äºåˆå§‹åŒ–'fInternal'æˆå‘˜ã€‚ è¯·è®°ä½ï¼Œæˆå‘˜æ˜¯æŒ‰ç…§ç±»å†…å£°æ˜çš„é¡ºåºè¿›è¡Œåˆå§‹åŒ–çš„ã€‚  Painter.cpp 184 <br><br><pre> <code class="cpp hljs">Painter::Painter() : fInternal(fPatternHandler), .... fPatternHandler(), .... { .... }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Painter</span></span></span><span class="hljs-class"> {</span></span> .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">mutable</span></span> PainterAggInterface fInternal; <span class="hljs-comment"><span class="hljs-comment">// line 336 bool fSubpixelPrecise : 1; bool fValidClipping : 1; bool fDrawingText : 1; bool fAttached : 1; bool fIdentityTransform : 1; Transformable fTransform; float fPenSize; const BRegion* fClippingRegion; drawing_mode fDrawingMode; source_alpha fAlphaSrcMode; alpha_function fAlphaFncMode; cap_mode fLineCapMode; join_mode fLineJoinMode; float fMiterLimit; PatternHandler fPatternHandler; // line 355 mutable AGGTextRenderer fTextRenderer; };</span></span></code> </pre> <br> é”™è¯¯åˆå§‹åŒ–çš„å¦ä¸€ä¸ªç¤ºä¾‹ã€‚ ç±»å­—æ®µæŒ‰ç…§å…¶åœ¨ç±»æœ¬èº«ä¸­çš„å£°æ˜é¡ºåºè¿›è¡Œåˆå§‹åŒ–ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ <i>fInternal</i>å­—æ®µå°†æ˜¯ç¬¬ä¸€ä¸ªä½¿ç”¨æœªåˆå§‹åŒ–çš„<i>fPatternHandler</i>å€¼åˆå§‹åŒ–çš„<i>å­—æ®µ</i> ã€‚ <br><br><h2> å¯ç–‘çš„#define </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V523'then</a> 'è¯­å¥ç­‰æ•ˆäº'else'è¯­å¥ã€‚  subr_gtaskqueue.c 191 <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TQ_LOCK(tq) \ do { \ </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ((tq)-&gt;tq_spin) \ mtx_lock_spin(&amp;(tq)-&gt;tq_mutex); \ </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> \ mtx_lock(&amp;(tq)-&gt;tq_mutex); \ } while (0) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TQ_ASSERT_LOCKED(tq) mtx_assert(&amp;(tq)-&gt;tq_mutex, MA_OWNED) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TQ_UNLOCK(tq) \ do { \ </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ((tq)-&gt;tq_spin) \ mtx_unlock_spin(&amp;(tq)-&gt;tq_mutex); \ </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> \ mtx_unlock(&amp;(tq)-&gt;tq_mutex); \ } while (0) void grouptask_block(struct grouptask *grouptask) { .... TQ_LOCK(queue); gtask-&gt;ta_flags |= TASK_NOENQUEUE; gtaskqueue_drain_locked(queue, gtask); TQ_UNLOCK(queue); }</span></span></code> </pre> <br> åœ¨æŸ¥çœ‹é¢„å¤„ç†å™¨ç»“æœä¹‹å‰ï¼Œæ­¤ä»£ç æ®µçœ‹èµ·æ¥å¹¶ä¸å¯ç–‘ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">grouptask_block</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct grouptask *grouptask)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>)-&gt;tq_spin) mtx_lock(&amp;(<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>)-&gt;tq_mutex); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> mtx_lock(&amp;(<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>)-&gt;tq_mutex); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span>); gtask-&gt;ta_flags |= <span class="hljs-number"><span class="hljs-number">0x4</span></span>; gtaskqueue_drain_locked(<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>, gtask); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>)-&gt;tq_spin) mtx_unlock(&amp;(<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>)-&gt;tq_mutex); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> mtx_unlock(&amp;(<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>)-&gt;tq_mutex); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span>); }</code> </pre> <br> åˆ†æå™¨æ˜¯æ­£ç¡®çš„<i>-if</i>å’Œ<i>else</i>åˆ†æ”¯ç›¸åŒã€‚ ä½†æ˜¯<i>mtx_lock_spin</i>å’Œ<i>mtx_unlock_spin</i>å‡½æ•°åœ¨å“ªé‡Œï¼Ÿ å®<i>TQ_LOCK</i> ï¼Œ <i>TQ_UNLOCK</i>å’Œ<i>grouptask_block</i>å‡½æ•°å‡ ä¹åœ¨å½¼æ­¤ç›¸é‚»çš„ä¸€ä¸ªæ–‡ä»¶ä¸­å£°æ˜ï¼Œä½†æ˜¯ä»ç„¶åœ¨æ­¤å¤„çš„æŸä¸ªä½ç½®è¿›è¡Œäº†æ›¿æ¢ã€‚ <br><br> æœç´¢æ–‡ä»¶ä»…å¯¼è‡´å…·æœ‰ä»¥ä¸‹å†…å®¹çš„<i>mutex.h</i> ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* on FreeBSD these are different functions */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> mtx_lock_spin(x) mtx_lock(x) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> mtx_unlock_spin(x) mtx_unlock(x)</span></span></code> </pre> <br> é¡¹ç›®å¼€å‘äººå‘˜åº”æ£€æŸ¥è¿™ç§æ›¿æ¢æ˜¯å¦æ­£ç¡®ã€‚ æˆ‘åœ¨Linuxä¸Šæ£€æŸ¥äº†è¿™ä¸ªé¡¹ç›®ï¼Œè¿™ç§æ›¿æ¢å¯¹æˆ‘æ¥è¯´ä¼¼ä¹å¾ˆå¯ç–‘ã€‚ <br><br><h2> è‡ªç”±åŠŸèƒ½çš„é”™è¯¯ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V575</a>ç©ºæŒ‡é’ˆä¼ é€’åˆ°â€œå…è´¹â€åŠŸèƒ½ã€‚ æ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•°ã€‚  setmime.cpp 727 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MimeType::_PurgeProperties() { fShort.Truncate(<span class="hljs-number"><span class="hljs-number">0</span></span>); fLong.Truncate(<span class="hljs-number"><span class="hljs-number">0</span></span>); fPrefApp.Truncate(<span class="hljs-number"><span class="hljs-number">0</span></span>); fPrefAppSig.Truncate(<span class="hljs-number"><span class="hljs-number">0</span></span>); fSniffRule.Truncate(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> fSmallIcon; fSmallIcon = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> fBigIcon; fBigIcon = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; fVectorIcon = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= free(fVectorIcon); // &lt;= fExtensions.clear(); fAttributes.clear(); }</span></span></code> </pre> <br> æ‚¨å¯ä»¥åœ¨<i>free</i>å‡½æ•°ä¸­ä¼ é€’nullæŒ‡é’ˆï¼Œä½†æ˜¯è¿™ç§ç”¨æ³•è‚¯å®šæ˜¯å¯ç–‘çš„ã€‚ å› æ­¤ï¼Œåˆ†æå™¨å‘ç°æ··åˆçš„ä»£ç è¡Œã€‚ é¦–å…ˆï¼Œåªæœ‰åœ¨åˆ†é…äº†<i>NULL</i>ä¹‹åï¼Œä»£ç ä½œè€…æ‰å¿…é¡»é€šè¿‡<i>fVectorIcon</i>æŒ‡é’ˆé‡Šæ”¾å†…å­˜ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V575</a>ç©ºæŒ‡é’ˆä¼ é€’åˆ°â€œå…è´¹â€åŠŸèƒ½ã€‚ æ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•°ã€‚  driver_settings.cpp 461 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> settings_handle * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load_driver_settings_from_file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> file, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *driverName)</span></span></span><span class="hljs-function"> </span></span>{ .... handle = new_settings(text, driverName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (handle != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// everything went fine! return handle; } free(handle); // &lt;= .... }</span></span></code> </pre> <br> è¿™æ˜¯å°†ç©ºæŒ‡é’ˆæ˜¾å¼ä¼ é€’ç»™<i>free</i>å‡½æ•°çš„å¦ä¸€ä¸ªç¤ºä¾‹ã€‚ è¯¥è¡Œå¯ä»¥åˆ é™¤ï¼Œå› ä¸ºå‡½æ•°åœ¨æˆåŠŸè·å–æŒ‡é’ˆåé€€å‡ºã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V575</a>ç©ºæŒ‡é’ˆä¼ é€’åˆ°â€œå…è´¹â€åŠŸèƒ½ã€‚ æ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•°ã€‚  PackageFileHeapWriter.cpp 166 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* _GetBuffer() { .... <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* buffer = <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(fBufferSize); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> &amp;&amp; !fBuffers.AddItem(buffer)) { <span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(buffer); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::bad_alloc(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> buffer; }</code> </pre> <br> æœ‰äººåœ¨è¿™é‡ŒçŠ¯äº†ä¸€ä¸ªé”™è¯¯ã€‚ å¿…é¡»ä½¿ç”¨||è¿ç®—ç¬¦ä»£æ›¿&amp;&amp;ã€‚ ä»…åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå†…å­˜åˆ†é…ï¼ˆä½¿ç”¨<i>malloc</i>å‡½æ•°ï¼‰å¤±è´¥ï¼Œåˆ™å°†æŠ›å‡º<i>std :: bad_allocï¼ˆï¼‰</i>å¼‚å¸¸ã€‚ <br><br><h2> åˆ é™¤è¿ç®—ç¬¦é”™è¯¯ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V611</a>ä½¿ç”¨â€œ new T []â€è¿ç®—ç¬¦åˆ†é…äº†å†…å­˜ï¼Œä½†ä½¿ç”¨â€œ deleteâ€è¿ç®—ç¬¦é‡Šæ”¾äº†å†…å­˜ã€‚ è€ƒè™‘æ£€æŸ¥æ­¤ä»£ç ã€‚ æœ€å¥½ä½¿ç”¨'delete [] fMsg;'ã€‚ é”™è¯¯cpp 65 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Err</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *fMsg; <span class="hljs-keyword"><span class="hljs-keyword">ssize_t</span></span> fPos; }; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Err::Unset() { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> fMsg; <span class="hljs-comment"><span class="hljs-comment">// &lt;= fMsg = __null; fPos = -1; } void Err::SetMsg(const char *msg) { if (fMsg) { delete fMsg; // &lt;= fMsg = __null; } if (msg) { fMsg = new(std::nothrow) char[strlen(msg)+1]; // &lt;= if (fMsg) strcpy(fMsg, msg); } }</span></span></code> </pre> <br>  <i>fMsg</i>æŒ‡é’ˆç”¨äºä¸ºå­—ç¬¦æ•°ç»„åˆ†é…å†…å­˜ã€‚  <i>delete</i>è¿ç®—ç¬¦ç”¨äºé‡Šæ”¾å†…å­˜ï¼Œè€Œä¸æ˜¯<i>delete []</i> ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V611</a>ä½¿ç”¨â€œ newâ€è¿ç®—ç¬¦åˆ†é…äº†å†…å­˜ï¼Œä½†ä½¿ç”¨â€œ freeâ€åŠŸèƒ½é‡Šæ”¾äº†å†…å­˜ã€‚ è€ƒè™‘æ£€æŸ¥â€œ wrapperPoolâ€å˜é‡åé¢çš„æ“ä½œé€»è¾‘ã€‚  vm_page.cpp 3080 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">status_t</span></span> vm_page_write_modified_page_range(....) { .... PageWriteWrapper* wrapperPool = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>(malloc_flags(allocationFlags)) PageWriteWrapper[maxPages + <span class="hljs-number"><span class="hljs-number">1</span></span>]; PageWriteWrapper** wrappers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>(malloc_flags(allocationFlags)) PageWriteWrapper*[maxPages]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (wrapperPool == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || wrappers == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(wrapperPool); <span class="hljs-comment"><span class="hljs-comment">// &lt;= free(wrappers); // &lt;= wrapperPool = stackWrappersPool; wrappers = stackWrappers; maxPages = 1; } .... }</span></span></code> </pre> <br> è¿™é‡Œçš„<i>malloc_flags</i>æ˜¯ä¸€ä¸ªè°ƒç”¨<i>malloc</i>çš„å‡½æ•°ã€‚ ç„¶åï¼Œ <i>placement-new</i>åœ¨æ­¤å¤„æ„é€ å¯¹è±¡ã€‚ ç”±äº<i>PageWriteWrapper</i>ç±»æ˜¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°çš„ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PageWriteWrapper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: PageWriteWrapper(); ~PageWriteWrapper(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vm_page* page)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Done</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">status_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> result)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: vm_page* fPage; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VMCache</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fCache</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> fIsActive; }; PageWriteWrapper::PageWriteWrapper() : fIsActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>) { } PageWriteWrapper::~PageWriteWrapper() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fIsActive) panic(<span class="hljs-string"><span class="hljs-string">"page write wrapper going out of scope but isn't completed"</span></span>); }</code> </pre> <br> ç”±äºä½¿ç”¨äº†<i>free</i>å‡½æ•°æ¥é‡Šæ”¾å†…å­˜ï¼Œå› æ­¤ä¸ä¼šè°ƒç”¨æ­¤ç±»çš„å¯¹è±¡ææ„å‡½æ•°ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V611</a>ä½¿ç”¨â€œ new T []â€è¿ç®—ç¬¦åˆ†é…äº†å†…å­˜ï¼Œä½†ä½¿ç”¨â€œ deleteâ€è¿ç®—ç¬¦é‡Šæ”¾äº†å†…å­˜ã€‚ è€ƒè™‘æ£€æŸ¥æ­¤ä»£ç ã€‚ æœ€å¥½ä½¿ç”¨'delete [] fOutBuffer;'ã€‚ æ£€æŸ¥è¡Œï¼š26ï¼Œ45ã€‚PCL6Rasterizer.h 26 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PCL6Rasterizer</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Rasterizer { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: .... ~PCL6Rasterizer() { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> fOutBuffer; fOutBuffer = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeBuffer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ fOutBuffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> uchar[fOutBufferSize]; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: uchar* fOutBuffer; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fOutBufferSize; };</code> </pre> <br> ä½¿ç”¨<i>delete</i>è¿ç®—ç¬¦è€Œä¸æ˜¯<i>delete []</i>æ˜¯ä¸€ä¸ªå¸¸è§é”™è¯¯<i>ã€‚</i> ç¼–å†™ç±»æ—¶æœ€å®¹æ˜“çŠ¯é”™è¯¯ï¼Œå› ä¸ºææ„å‡½æ•°çš„ä»£ç é€šå¸¸ç¦»å­˜å‚¨ä½ç½®å¾ˆè¿œã€‚ åœ¨è¿™é‡Œï¼Œç¨‹åºå‘˜é”™è¯¯åœ°é‡Šæ”¾äº†<i>fOutBuffer</i>æŒ‡é’ˆåœ¨ææ„å‡½æ•°ä¸­å­˜å‚¨çš„å†…å­˜ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V772</a>ä¸ºç©ºæŒ‡é’ˆè°ƒç”¨â€œåˆ é™¤â€è¿ç®—ç¬¦å°†å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚ å“ˆå¸Œè¡¨.cpp 207 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Hashtable::MakeEmpty(int8 keyMode,int8 valueMode) { .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (entry = fTable[index]; entry; entry = next) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (keyMode) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> HASH_EMPTY_DELETE: <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> destructors are not called! delete (void*)entry-&gt;key; break; case HASH_EMPTY_FREE: free((void*)entry-&gt;key); break; } switch (valueMode) { case HASH_EMPTY_DELETE: // </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> destructors are not called! delete entry-&gt;value; break; case HASH_EMPTY_FREE: free(entry-&gt;value); break; } next = entry-&gt;next; delete entry; } .... }</span></span></code> </pre> <br> é™¤äº†åœ¨<i>delete</i> / <i>delete []</i>å’Œ<i>free</i>ä¹‹é—´é€‰æ‹©é”™è¯¯ä¹‹å¤–ï¼Œå½“æ‚¨å°è¯•é€šè¿‡æŒ‡å‘voidç±»å‹çš„æŒ‡é’ˆ<i>ï¼ˆvoid *ï¼‰</i>æ¸…é™¤å†…å­˜æ—¶ï¼Œä¹Ÿä¼šé‡åˆ°æœªå®šä¹‰çš„è¡Œä¸ºã€‚ <br><br><h2> æ²¡æœ‰è¿”å›å€¼çš„åŠŸèƒ½ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V591</a>éæ— æ•ˆå‡½æ•°åº”è¿”å›ä¸€ä¸ªå€¼ã€‚  h 228 <br><br><pre> <code class="cpp hljs">BReference&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>=(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> BReference&lt;<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Type&gt;&amp; other) { fReference = other.fReference; }</code> </pre> <br> é‡è½½çš„èµ‹å€¼è¿ç®—ç¬¦ç¼ºå°‘è¿”å›å€¼ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ“ä½œå‘˜å°†è¿”å›ä¸€ä¸ªéšæœºå€¼ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å¥‡æ€ªçš„é”™è¯¯ã€‚ <br><br> è¿™æ˜¯æ­¤ç±»çš„å…¶ä»–ä»£ç ç‰‡æ®µä¸­çš„ç±»ä¼¼é—®é¢˜ï¼š <br><br><ul><li>  V591éæ— æ•ˆå‡½æ•°åº”è¿”å›ä¸€ä¸ªå€¼ã€‚  h 233 </li><li>  V591éæ— æ•ˆå‡½æ•°åº”è¿”å›ä¸€ä¸ªå€¼ã€‚  h 239 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V591</a>éæ— æ•ˆå‡½æ•°åº”è¿”å›ä¸€ä¸ªå€¼ã€‚  main.c 1010 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">errx</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, ...)</span></span></span><span class="hljs-function"> </span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getoptionvalue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">option</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">c</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (name == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) errx(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"getoptionvalue() invoked with NULL name"</span></span>); c = getoption(name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (c-&gt;value); errx(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"getoptionvalue() invoked with unknown option '%s'"</span></span>, name); <span class="hljs-comment"><span class="hljs-comment">/* NOTREACHED */</span></span> }</code> </pre> <br> ç”¨æˆ·è¯„è®ºNOTREACHEDåœ¨è¿™é‡Œä¸ä»£è¡¨ä»»ä½•å«ä¹‰ã€‚ æ‚¨éœ€è¦å°†å‡½æ•°æ³¨é‡Šä¸ºnoreturnï¼Œä»¥ä¾¿ä¸ºæ­¤ç±»æƒ…å†µæ­£ç¡®ç¼–å†™ä»£ç ã€‚ ä¸ºæ­¤ï¼Œæ²¡æœ‰è¿”å›å±æ€§ï¼šæ ‡å‡†å±æ€§å’Œç‰¹å®šäºç¼–è¯‘å™¨çš„å±æ€§ã€‚ é¦–å…ˆï¼Œç¼–è¯‘å™¨ä¼šè€ƒè™‘è¿™äº›å±æ€§ï¼Œä»¥è¿›è¡Œé€‚å½“çš„ä»£ç ç”Ÿæˆæˆ–ä½¿ç”¨è­¦å‘Šé€šçŸ¥æŸäº›ç±»å‹çš„é”™è¯¯ã€‚ å„ç§é™æ€åˆ†æå·¥å…·è¿˜è€ƒè™‘äº†å±æ€§ï¼Œä»¥æé«˜åˆ†æè´¨é‡ã€‚ <br><br><h2> å¤„ç†å¼‚å¸¸ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V596</a>å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æœªä½¿ç”¨ã€‚  'throw'å…³é”®å­—å¯èƒ½ä¸¢å¤±ï¼šthrow ParseExceptionï¼ˆFOOï¼‰;  Response.cpp 659 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Response::ExtractNumber(BDataIO&amp; stream) { BString <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> = ExtractString(stream); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* end; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> number = strtoul(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.String(), (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>**)&amp;end, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (end == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || end[<span class="hljs-number"><span class="hljs-number">0</span></span>] != <span class="hljs-string"><span class="hljs-string">'\0'</span></span>) ParseException(<span class="hljs-string"><span class="hljs-string">"Invalid number!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> number; }</code> </pre> <br> æ­¤å¤„ä¸å°å¿ƒå¿˜è®°äº†å…³é”®å­—<i>throw</i> ã€‚ å› æ­¤ï¼Œå½“é€€å‡ºèŒƒå›´æ—¶ï¼Œå°†ä»…é”€æ¯æ­¤ç±»çš„å¯¹è±¡ï¼Œè€Œä¸ä¼šç”Ÿæˆ<i>ParseException</i>å¼‚å¸¸ã€‚ ä¹‹åï¼Œè¯¥åŠŸèƒ½å°†ç»§ç»­å·¥ä½œï¼Œå°±å¥½åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿä¸€æ ·ï¼Œå¥½åƒå·²ç»è¾“å…¥äº†æ­£ç¡®çš„æ•°å­—ä¸€æ ·ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V1022</a>æŒ‡é’ˆæŠ›å‡ºå¼‚å¸¸ã€‚ è€ƒè™‘æ”¹ä¸ºæŒ‰å€¼æ‰”æ‰å®ƒã€‚  gensyscallinfos.cpp 316 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">** argv)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Main().Run(argc, argv); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception&amp; exception) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= fprintf(stderr, "%s\n", exception.what()); return 1; } } int Run(int argc, char** argv) { .... _ParseSyscalls(argv[1]); .... } void _ParseSyscalls(const char* filename) { ifstream file(filename, ifstream::in); if (!file.is_open()) throw new IOException(string("Failed to open '") + filename + "'."); // &lt;= .... }</span></span></code> </pre> <br> åˆ†æå™¨æ£€æµ‹åˆ°æŒ‡é’ˆæŠ›å‡ºçš„<i>IOException</i>å¼‚å¸¸ã€‚ æŠ›å‡ºæŒ‡é’ˆå°†å¯¼è‡´ä»¥ä¸‹äº‹å®ï¼šä¸ä¼šæ•è·å¼‚å¸¸ã€‚ å› æ­¤ï¼Œè¯¥å¼‚å¸¸æœ€ç»ˆè¢«å¼•ç”¨æ•è·ã€‚ å¦å¤–ï¼Œä½¿ç”¨æŒ‡é’ˆä¼šè¿«ä½¿æ•è·æ–¹è°ƒç”¨<i>delete</i>è¿ç®—ç¬¦ä»¥ç ´ååˆ›å»ºçš„å¯¹è±¡ï¼Œè€Œè¿™å°šæœªå®Œæˆã€‚ <br><br> å…¶ä»–ä¸€äº›æœ‰é—®é¢˜çš„ä»£ç ç‰‡æ®µï¼š <br><br><ul><li>  V1022æŒ‡é’ˆæŠ›å‡ºå¼‚å¸¸ã€‚ è€ƒè™‘æ”¹ä¸ºæŒ‰å€¼æ‰”æ‰å®ƒã€‚  gensyscallinfos.cpp 347 </li><li>  V1022æŒ‡é’ˆæŠ›å‡ºå¼‚å¸¸ã€‚ è€ƒè™‘æ”¹ä¸ºæŒ‰å€¼æ‰”æ‰å®ƒã€‚  gensyscallinfos.cpp 413 </li></ul><br><h2> æ­£å¼å®‰å…¨ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V597</a>ç¼–è¯‘å™¨å¯èƒ½ä¼šåˆ é™¤â€œ memsetâ€å‡½æ•°è°ƒç”¨ï¼Œè¯¥å‡½æ•°è°ƒç”¨ç”¨äºåˆ·æ–°â€œ f_keyâ€å¯¹è±¡ã€‚  memset_sï¼ˆï¼‰å‡½æ•°åº”ç”¨äºæ“¦é™¤ç§æœ‰æ•°æ®ã€‚  dst_api.c 1018 <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> SAFE_FREE #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SAFE_FREE(a) \ do{</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(a != NULL){memset(a,0, sizeof(*a)); free(a); a=NULL;}} while (0) .... #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> DST_KEY * dst_free_key(DST_KEY *f_key) { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (f_key == NULL) return (f_key); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (f_key-&gt;dk_func &amp;&amp; f_key-&gt;dk_func-&gt;destroy) f_key-&gt;dk_KEY_struct = f_key-&gt;dk_func-&gt;destroy(f_key-&gt;dk_KEY_struct); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { EREPORT((</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"dst_free_key(): Unknown key alg %d\n"</span></span></span><span class="hljs-meta">, f_key-&gt;dk_alg)); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (f_key-&gt;dk_KEY_struct) { free(f_key-&gt;dk_KEY_struct); f_key-&gt;dk_KEY_struct = NULL; } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (f_key-&gt;dk_key_name) SAFE_FREE(f_key-&gt;dk_key_name); SAFE_FREE(f_key); return (NULL); }</span></span></code> </pre> <br> åˆ†æä»ªå·²æ£€æµ‹åˆ°å¯ç–‘ä»£ç ï¼Œç›®çš„æ˜¯å®‰å…¨æ¸…é™¤ç§æœ‰æ•°æ®ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œ <i>SAFE_FREE</i>å®æ‰©å±•ä¸º<i>memset</i> ï¼Œ <i>å…è´¹</i>è°ƒç”¨å’Œ<i>NULL</i>åˆ†é…å¹¶ä¸èƒ½ä½¿ä»£ç æ›´å®‰å…¨ï¼Œå› ä¸ºåœ¨ä½¿ç”¨<i>O2è¿›è¡Œ</i>ä¼˜åŒ–æ—¶ï¼Œç¼–è¯‘å™¨å·²å°†å…¶å…¨éƒ¨åˆ é™¤ã€‚ <br><br> é¡ºä¾¿è¯´ä¸€å¥ï¼Œå®ƒä¸è¿‡æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CWE-14</a> ï¼šæ¸…é™¤ä»£ç è€Œæ¸…é™¤ç¼“å†²åŒºçš„ç¼–è¯‘å™¨ã€‚ <br><br> è¿™æ˜¯å®é™…ä¸Šä¸æ¸…é™¤ç¼“å†²åŒºçš„åœ°æ–¹åˆ—è¡¨ï¼š <br><br><ul><li>  V597ç¼–è¯‘å™¨å¯ä»¥åˆ é™¤â€œå†…å­˜é›†â€å‡½æ•°è°ƒç”¨ï¼Œè¯¥å‡½æ•°è°ƒç”¨ç”¨äºåˆ·æ–°â€œ encoded_blockâ€ç¼“å†²åŒºã€‚  memset_sï¼ˆï¼‰å‡½æ•°åº”ç”¨äºæ“¦é™¤ç§æœ‰æ•°æ®ã€‚  dst_api.c 446 </li><li>  V597ç¼–è¯‘å™¨å¯ä»¥åˆ é™¤â€œå†…å­˜é›†â€å‡½æ•°è°ƒç”¨ï¼Œè¯¥å‡½æ•°è°ƒç”¨ç”¨äºåˆ·æ–°â€œ key_stâ€å¯¹è±¡ã€‚  memset_sï¼ˆï¼‰å‡½æ•°åº”ç”¨äºæ“¦é™¤ç§æœ‰æ•°æ®ã€‚  dst_api.c 685 </li><li>  V597ç¼–è¯‘å™¨å¯ä»¥åˆ é™¤â€œå†…å­˜é›†â€å‡½æ•°è°ƒç”¨ï¼Œè¯¥å‡½æ•°è°ƒç”¨ç”¨äºåˆ·æ–°â€œ in_buffâ€ç¼“å†²åŒºã€‚  memset_sï¼ˆï¼‰å‡½æ•°åº”ç”¨äºæ“¦é™¤ç§æœ‰æ•°æ®ã€‚  dst_api.c 916 </li><li>  V597ç¼–è¯‘å™¨å¯ä»¥åˆ é™¤â€œå†…å­˜é›†â€å‡½æ•°è°ƒç”¨ï¼Œè¯¥å‡½æ•°è°ƒç”¨ç”¨äºåˆ·æ–°â€œ ceâ€å¯¹è±¡ã€‚  memset_sï¼ˆï¼‰å‡½æ•°åº”ç”¨äºæ“¦é™¤ç§æœ‰æ•°æ®ã€‚  fs_cache.c 1078 </li></ul><br><h2> ä¸æ— ç¬¦å·å˜é‡çš„æ¯”è¾ƒ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V547</a>è¡¨è¾¾å¼â€œå‰©ä½™&lt;0â€å§‹ç»ˆä¸ºfalseã€‚ æ— ç¬¦å·ç±»å‹å€¼æ°¸è¿œä¸ä¼šå°äº0ã€‚DwarfFile.cpp 1947 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">status_t</span></span> DwarfFile::_UnwindCallFrame(....) { .... uint64 remaining = lengthOffset + length - dataReader.Offset(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (remaining &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> B_BAD_DATA; .... }</code> </pre> <br> åˆ†æå™¨å‘ç°æ— ç¬¦å·å˜é‡ä¸è´Ÿå€¼çš„æ˜¾å¼æ¯”è¾ƒã€‚ ä¹Ÿè®¸ï¼Œåº”è¯¥åªå°†<i>å‰©ä½™çš„</i>å˜é‡ä¸nullè¿›è¡Œæ¯”è¾ƒï¼Œæˆ–è€…å®æ–½æº¢å‡ºæ£€æŸ¥ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V547</a>è¡¨è¾¾å¼â€œ sleepï¼ˆï¼ˆunsignedï¼‰secsï¼‰&lt;0â€å§‹ç»ˆä¸ºfalseã€‚ æ— ç¬¦å·ç±»å‹å€¼æ°¸è¿œä¸ä¼šå°äº0ã€‚misc.cpp 56 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">status_t</span></span> snooze(<span class="hljs-keyword"><span class="hljs-keyword">bigtime_t</span></span> amount) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (amount &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> B_OK; int64 secs = amount / <span class="hljs-number"><span class="hljs-number">1000000L</span></span>L; int64 usecs = amount % <span class="hljs-number"><span class="hljs-number">1000000L</span></span>L; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (secs &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sleep((<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span>)secs) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment">// &lt;= return errno; } if (usecs &gt; 0) { if (usleep((useconds_t)usecs) &lt; 0) return errno; } return B_OK; }</span></span></code> </pre> <br> ä¸ºäº†å¾—åˆ°é”™è¯¯çš„è¦ç‚¹ï¼Œè®©æˆ‘ä»¬å¤„ç†<i>ä¸€ä¸‹sleep</i>å’Œ<i>usleep</i>å‡½æ•°çš„ç­¾åï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sleep</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> __seconds)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usleep</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">__useconds_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> __useconds)</span></span></span></span>;</code> </pre> <br> å¦‚æˆ‘ä»¬æ‰€è§ï¼Œ <i>sleep</i>å‡½æ•°è¿”å›æ— ç¬¦å·å€¼ï¼Œå¹¶ä¸”åœ¨ä»£ç ä¸­çš„ç”¨æ³•ä¸æ­£ç¡®ã€‚ <br><br><h2> å±é™©çš„æŒ‡é’ˆ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V774</a>é‡Šæ”¾å†…å­˜åä½¿ç”¨äº†â€œè®¾å¤‡â€æŒ‡é’ˆã€‚  xhci.cpp 1572 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> XHCI::FreeDevice(Device *device) { uint8 slot = fPortSlots[device-&gt;HubPort()]; TRACE(<span class="hljs-string"><span class="hljs-string">"FreeDevice() port %d slot %d\n"</span></span>, device-&gt;HubPort(), slot); <span class="hljs-comment"><span class="hljs-comment">// Delete the device first, so it cleans up its pipes and tells us // what we need to destroy before we tear down our internal state. delete device; DisableSlot(slot); fDcba-&gt;baseAddress[slot] = 0; fPortSlots[device-&gt;HubPort()] = 0; // &lt;= delete_area(fDevices[slot].trb_area); delete_area(fDevices[slot].input_ctx_area); delete_area(fDevices[slot].device_ctx_area); memset(&amp;fDevices[slot], 0, sizeof(xhci_device)); fDevices[slot].state = XHCI_STATE_DISABLED; }</span></span></code> </pre> <br>  <i>è®¾å¤‡</i>å¯¹è±¡ç”±<i>åˆ é™¤</i>æ“ä½œå‘˜é‡Šæ”¾ã€‚ å¯¹äº<i>FreeDevice</i>å‡½æ•°ï¼Œè¿™æ˜¯å¾ˆåˆé€»è¾‘çš„ã€‚ ä½†æ˜¯ï¼Œç”±äºæŸç§åŸå› ï¼Œè¦é‡Šæ”¾å…¶ä»–èµ„æºï¼Œå¯ä»¥è§£å†³å·²ç»åˆ é™¤çš„å¯¹è±¡ã€‚ <br><br> è¿™æ ·çš„ä»£ç éå¸¸å±é™©ï¼Œå¯ä»¥åœ¨å…¶ä»–å‡ ä¸ªåœ°æ–¹ä½¿ç”¨ï¼š <br><br><ul><li>  V774é‡Šæ”¾å†…å­˜åä½¿ç”¨äº†â€œè‡ªæˆ‘â€æŒ‡é’ˆã€‚ ç¬¬884ç«  </li><li>  V774é‡Šæ”¾å†…å­˜åä½¿ç”¨äº†â€œå­—ç¬¦ä¸²â€æŒ‡é’ˆã€‚  RemoteView.cpp 1269 </li><li>  V774é‡Šæ”¾å†…å­˜åä½¿ç”¨äº†â€œ bsâ€æŒ‡é’ˆã€‚  mkntfs.c 4291 </li><li>  V774é‡Šæ”¾å†…å­˜åä½¿ç”¨äº†â€œ bsâ€æŒ‡é’ˆã€‚  mkntfs.c 4308 </li><li>  V774åœ¨é‡æ–°åˆ†é…å†…å­˜åä½¿ç”¨äº†â€œ alâ€æŒ‡é’ˆã€‚  inode.c 1155 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V522</a>å¯èƒ½ä¼š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å–æ¶ˆ</a>å¼•ç”¨ç©ºæŒ‡é’ˆâ€œæ•°æ®â€ã€‚ ç©ºæŒ‡é’ˆå°†ä¼ é€’ç»™â€œ malo_hal_send_helperâ€å‡½æ•°ã€‚ æ£€æŸ¥ç¬¬ä¸‰ä¸ªè®ºç‚¹ã€‚ æ£€æŸ¥è¡Œï¼š350ã€394ã€‚if_malohal.c 350 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">malo_hal_fwload_helper</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct malo_hal *mh, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *helper)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-comment"><span class="hljs-comment">/* tell the card we're done and... */</span></span> error = malo_hal_send_helper(mh, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, MALO_NOWAIT); <span class="hljs-comment"><span class="hljs-comment">// &lt;= NULL .... } static int malo_hal_send_helper(struct malo_hal *mh, int bsize, const void *data, size_t dsize, int waitfor) { mh-&gt;mh_cmdbuf[0] = htole16(MALO_HOSTCMD_CODE_DNLD); mh-&gt;mh_cmdbuf[1] = htole16(bsize); memcpy(&amp;mh-&gt;mh_cmdbuf[4], data , dsize); // &lt;= data .... }</span></span></code> </pre> <br> è·¨è¿‡ç¨‹åˆ†ææ­ç¤ºäº†å°†<i>NULL</i>ä¼ é€’ç»™è¯¥å‡½æ•°å¹¶æœ€ç»ˆåœ¨<i>memcpy</i>å‡½æ•°ä¸­å–æ¶ˆå¼•ç”¨å…·æœ‰è¯¥å€¼çš„<i>æ•°æ®</i>æŒ‡é’ˆçš„æƒ…å†µã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V773</a>åœ¨ä¸é‡Šæ”¾'inputFileFile'æŒ‡é’ˆçš„æƒ…å†µä¸‹é€€å‡ºäº†è¯¥å‡½æ•°ã€‚ å¯èƒ½å‘ç”Ÿå†…å­˜æ³„æ¼ã€‚  command_recompress.cpp 119 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">command_recompress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params">* argv)</span></span></span><span class="hljs-function"> </span></span>{ .... BFile* inputFileFile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BFile; error = inputFileFile-&gt;SetTo(inputPackageFileName, O_RDONLY); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error != B_OK) { <span class="hljs-built_in"><span class="hljs-built_in">fprintf</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">stderr</span></span>, <span class="hljs-string"><span class="hljs-string">"Error: Failed to open input file \"%s\": %s\n"</span></span>, inputPackageFileName, strerror(error)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } inputFile = inputFileFile; .... }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PVS-Studioå¯ä»¥æ£€æµ‹åˆ°å†…å­˜æ³„æ¼</a> ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™ä¸ä¼šé‡Šæ”¾å†…å­˜ã€‚ æœ‰äººå¯èƒ½ä¼šè®¤ä¸ºï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‚¨ä¸åº”è¯¥ä¸ºå†…å­˜é‡Šæ”¾è€Œçƒ¦æ¼ï¼Œå› ä¸ºç¨‹åºä»ç„¶ä¼šç»“æŸã€‚ ä½†è¿™å¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚ è®¸å¤šç¨‹åºéƒ½éœ€è¦æ­£ç¡®å¤„ç†é”™è¯¯å¹¶ç»§ç»­å·¥ä½œã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V595</a>åœ¨å¯¹nullptrè¿›è¡ŒéªŒè¯ä¹‹å‰ï¼Œå·²ä½¿ç”¨â€œ fReplyâ€æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š49ï¼Œ52ã€‚ReplyBuilder.cpp 49 <br><br><pre> <code class="cpp hljs">RPC::CallbackReply* ReplyBuilder::Reply() { fReply-&gt;Stream().InsertUInt(fStatusPosition, _HaikuErrorToNFS4(fStatus)); fReply-&gt;Stream().InsertUInt(fOpCountPosition, fOpCount); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fReply == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || fReply-&gt;Stream().Error() == B_OK) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fReply; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; }</code> </pre> <br> åœ¨æ£€æŸ¥æŒ‡é’ˆä¹‹å‰å…ˆè§£é™¤å¼•ç”¨æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„é”™è¯¯ã€‚ åœ¨é¡¹ç›®ä¸­ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V595</a>è¯Šæ–­å‡ ä¹æ€»æ˜¯å ä¸»å¯¼åœ°ä½ã€‚ æ­¤ä»£ç æ®µåŒ…å«<i>fReply</i>æŒ‡é’ˆçš„å±é™©ç”¨æ³•ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V595</a>åœ¨å¯¹nullptrè¿›è¡ŒéªŒè¯ä¹‹å‰ï¼Œå·²ä½¿ç”¨äº†'mq'æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š782ã€786ã€‚oce_queue.c 782 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">oce_mq_free</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct oce_mq *mq)</span></span></span><span class="hljs-function"> </span></span>{ POCE_SOFTC sc = (POCE_SOFTC) mq-&gt;parent; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">oce_mbx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mbx</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mbx_destroy_common_mq</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fwcmd</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!mq) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; .... }</code> </pre> <br> ä¸€ä¸ªç±»ä¼¼çš„ä¾‹å­ã€‚  <i>mg</i>æŒ‡é’ˆåœ¨æ£€æŸ¥ä¸ºç©ºä¹‹å‰è¦å–æ¶ˆå¼•ç”¨å‡ è¡Œã€‚ é¡¹ç›®ä¸­æœ‰å¾ˆå¤šç±»ä¼¼çš„åœ°æ–¹ã€‚ åœ¨æŸäº›ä»£ç ç‰‡æ®µä¸­ï¼ŒæŒ‡é’ˆçš„ç”¨æ³•å’Œæ£€æŸ¥å½¼æ­¤ç›¸è·ç”šè¿œï¼Œå› æ­¤åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨åªä¼šæ‰¾åˆ°å‡ ä¸ªè¿™æ ·çš„ç¤ºä¾‹ã€‚ æ¬¢è¿å¼€å‘äººå‘˜åœ¨å®Œæ•´çš„åˆ†æå™¨æŠ¥å‘Šä¸­æŸ¥çœ‹å…¶ä»–ç¤ºä¾‹ã€‚ <br><br><h2> æ‚é¡¹ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V645'strncat</a> 'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 101 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dump_acpi_namespace</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(acpi_ns_device_info *device, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *root, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> indenting)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> output[<span class="hljs-number"><span class="hljs-number">320</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> tabs[<span class="hljs-number"><span class="hljs-number">255</span></span>] = <span class="hljs-string"><span class="hljs-string">""</span></span>; .... strlcat(tabs, <span class="hljs-string"><span class="hljs-string">"|--- "</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(tabs)); .... <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (....) { uint32 type = device-&gt;acpi-&gt;get_object_type(result); <span class="hljs-built_in"><span class="hljs-built_in">snprintf</span></span>(output, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(output), <span class="hljs-string"><span class="hljs-string">"%s%s"</span></span>, tabs, result + depth); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ACPI_TYPE_INTEGER: <span class="hljs-built_in"><span class="hljs-built_in">strncat</span></span>(output, <span class="hljs-string"><span class="hljs-string">" INTEGER"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(output)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ACPI_TYPE_STRING: <span class="hljs-built_in"><span class="hljs-built_in">strncat</span></span>(output, <span class="hljs-string"><span class="hljs-string">" STRING"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(output)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; .... } .... } .... }</code> </pre> <br> å¯¹äºä¸ç†Ÿæ‚‰è¿™äº›åŠŸèƒ½æè¿°çš„äººæ¥è¯´ï¼Œ <i>strlcat</i>å’Œ<i>strncat</i>å‡½æ•°ä¹‹é—´çš„åŒºåˆ«ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚  <i>strlcat</i>å‡½æ•°å°†æ•´ä¸ªç¼“å†²åŒºçš„å¤§å°ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè€Œ<i>strncat</i>å‡½æ•°-ç¼“å†²åŒºä¸­çš„å¯ç”¨ç©ºé—´çš„å¤§å°ï¼Œè¿™éœ€è¦åœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰è¯„ä¼°æ‰€éœ€çš„å€¼ã€‚ ä½†æ˜¯å¼€å‘äººå‘˜ç»å¸¸å¿˜è®°æˆ–ä¸çŸ¥é“ã€‚ å°†æ•´ä¸ªç¼“å†²åŒºå¤§å°ä¼ é€’ç»™<i>strncat</i>å‡½æ•°å¯èƒ½ä¼šå¯¼è‡´ç¼“å†²åŒºæº¢å‡ºï¼Œå› ä¸ºè¯¥å‡½æ•°ä¼šå°†æ­¤å€¼è§†ä¸ºè¦å¤åˆ¶çš„å¯æ¥å—å­—ç¬¦æ•°ã€‚  <i>strlcat</i>å‡½æ•°æ²¡æœ‰è¿™æ ·çš„é—®é¢˜ã€‚ ä½†æ˜¯æ‚¨å¿…é¡»ä¼ é€’å­—ç¬¦ä¸²ï¼Œå¹¶ä»¥terminal nullç»“å°¾ï¼Œä»¥ä½¿å…¶æ­£å¸¸å·¥ä½œã€‚ <br><br> è¿™æ˜¯å¸¦æœ‰å­—ç¬¦ä¸²çš„å±é™©åœºæ‰€çš„å®Œæ•´åˆ—è¡¨ï¼š <br><br><ul><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 104 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 107 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 110 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 113 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 118 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 119 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 120 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 123 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 126 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 129 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 132 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 135 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 138 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 141 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'è¾“å‡º'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚ å‘½åç©ºé—´è½¬å‚¨.cpp 144 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'features_string'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚  VirtioDevice.cpp 283 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'features_string'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚  VirtioDevice.cpp 284 </li><li>  V645'strncat'å‡½æ•°è°ƒç”¨å¯èƒ½å¯¼è‡´'features_string'ç¼“å†²åŒºæº¢å‡ºã€‚ è¾¹ç•Œä¸åº”åŒ…å«ç¼“å†²åŒºçš„å¤§å°ï¼Œè€Œåº”åŒ…å«å¯ä»¥å®¹çº³çš„å¤šä¸ªå­—ç¬¦ã€‚  VirtioDevice.cpp 285 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V792</a>ä½äºæ“ä½œå‘˜'|'å³è¾¹çš„'SetDecoratorSettings'åŠŸèƒ½ ä¸ç®¡å·¦æ“ä½œæ•°çš„å€¼å¦‚ä½•ï¼Œéƒ½ä¼šè¢«è°ƒç”¨ã€‚ ä¹Ÿè®¸æœ€å¥½ä½¿ç”¨â€œ ||â€ã€‚ æ¡Œé¢ä¾¦å¬å™¨.cpp 324 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DesktopListener</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DoublyLinkedListLinkImpl&lt;DesktopListener&gt; { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetDecoratorSettings</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Window* window, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> BMessage&amp; settings)</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; .... }; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> DesktopObservable::SetDecoratorSettings(Window* window, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> BMessage&amp; settings) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fWeAreInvoking) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-function"><span class="hljs-function">InvokeGuard </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invokeGuard</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fWeAreInvoking)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> changed = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (DesktopListener* listener = fDesktopListenerList.First(); listener != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; listener = fDesktopListenerList.GetNext(listener)) changed = changed | listener-&gt;SetDecoratorSettings(window, settings); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> changed; }</code> </pre> <br> æœ€å¯èƒ½æ˜¯â€œ |â€ å’Œ'||' æ“ä½œå‘˜ä¸€å¤´é›¾æ°´ã€‚ æ­¤é”™è¯¯å¯¼è‡´ä¸å¿…è¦åœ°è°ƒç”¨<i>SetDecoratorSettings</i>å‡½æ•°ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V627</a>è€ƒè™‘æ£€æŸ¥è¡¨è¾¾å¼ã€‚  sizeofï¼ˆï¼‰çš„å‚æ•°æ˜¯æ‰©å±•ä¸ºæ•°å­—çš„å®ã€‚ è®¾å¤‡72 <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PCI_line_size 0x0c </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* (1 byte) cache line size in 32 bit words */</span></span></span><span class="hljs-meta"> static status_t wb840_open(const char* name, uint32 flags, void** cookie) { .... data-&gt;wb_cachesize = gPci-&gt;read_pci_config(data-&gt;pciInfo-&gt;bus, data-&gt;pciInfo-&gt;device, data-&gt;pciInfo-&gt;function, PCI_line_size, sizeof(PCI_line_size)) &amp; 0xff; .... }</span></span></code> </pre> <br> å°†<i>0x0c</i>å€¼ä¼ é€’ç»™<i>sizeof</i>è¿ç®—ç¬¦çœ‹èµ·æ¥å¾ˆå¯ç–‘ã€‚ ä¹Ÿè®¸ï¼Œä½œè€…åº”è¯¥å·²ç»è¯„ä¼°äº†å¯¹è±¡çš„å¤§å°ï¼Œä¾‹å¦‚<i>data</i> ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V562</a>æ¯”è¾ƒå¸ƒå°”ç±»å‹å€¼å’Œ18ï¼š0x12 == IsProfessionalSpdifï¼ˆï¼‰ã€‚ ç¬¬533ç«  <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> BOOL; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> BOOL </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsProfessionalSpdif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ECHOSTATUS_DSP_DEAD 0x12 ECHOSTATUS CEchoGals::ProcessMixerFunction(....) { .... </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ( ECHOSTATUS_DSP_DEAD == IsProfessionalSpdif() ) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// &lt;= { Status = ECHOSTATUS_DSP_DEAD; } else { pMixerFunction-&gt;Data.bProfSpdif = IsProfessionalSpdif(); } .... }</span></span></span></span></code> </pre> <br>  <i>IsProfessionalSpdif</i>å‡½æ•°è¿”å›<i>å¸ƒå°”</i>ç±»å‹å€¼ã€‚ è¿™æ ·åšæ—¶ï¼Œå°†å‡½æ•°çš„ç»“æœä¸æ¡ä»¶ä¸­çš„æ•°å­—<i>0x12</i>è¿›è¡Œæ¯”è¾ƒã€‚ <br><br><h2> ç»“è®º </h2><br> ç”±äºæˆ‘ä»¬æ­£å¿™äºå‘å¸ƒJavaçš„PVS-Studioï¼Œå› æ­¤æˆ‘ä»¬é”™è¿‡äº†å»å¹´ç§‹å¤©å‘å¸ƒçš„ç¬¬ä¸€ä¸ªHaiku betaã€‚ ç¼–ç¨‹é”™è¯¯çš„æœ¬è´¨ä»ç„¶æ˜¯ï¼Œå¦‚æœæ‚¨ä¸æœç´¢å®ƒä»¬å¹¶ä¸”ä¸æ³¨æ„ä»£ç è´¨é‡ï¼Œå®ƒä»¬ä¹Ÿä¸ä¼šæ¶ˆå¤±ã€‚ é¡¹ç›®å¼€å‘äººå‘˜ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Coverity Scan</a> ï¼Œä½†æ˜¯æœ€è¿‘ä¸€æ¬¡è¿è¡Œæ˜¯åœ¨ä¸¤å¹´å‰ã€‚ è¿™ä¸€å®šä¼šè®©Haikuç”¨æˆ·ä¸é«˜å…´ã€‚ å°½ç®¡åˆ†ææ˜¯åœ¨2014å¹´ä½¿ç”¨Coverityè¿›è¡Œé…ç½®çš„ï¼Œä½†è¿™å¹¶æ²¡æœ‰é˜»æ­¢æˆ‘ä»¬åœ¨2015å¹´æ’°å†™ä¸¤ç¯‡å…³äºé”™è¯¯æ£€æŸ¥çš„é•¿ç¯‡æ–‡ç« ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">éƒ¨åˆ†</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2éƒ¨åˆ†</a> ï¼‰ <br><br>  Haikuå¯¹é”™è¯¯çš„å¦ä¸€ç§è¯„è®ºå³å°†å‘å¸ƒï¼Œå³å°†è¯»å®Œè¿™ç¯‡æ–‡ç« çš„äººä¸€å¬åˆ°åº•ã€‚ å®Œæ•´çš„åˆ†æå™¨æŠ¥å‘Šå°†åœ¨å‘å¸ƒæ­¤é”™è¯¯è¯„è®ºä¹‹å‰å‘é€ç»™å¼€å‘äººå‘˜ï¼Œå› æ­¤åœ¨é˜…è¯»æœ¬æ–‡æ—¶ï¼ŒæŸäº›é”™è¯¯å¯èƒ½å·²ä¿®å¤ã€‚ ä¸ºäº†åœ¨æ–‡ç« ä¹‹é—´èŠ±è´¹æ—¶é—´ï¼Œæˆ‘å»ºè®®ä¸ºæ‚¨çš„é¡¹ç›®ä¸‹è½½å¹¶å°è¯•ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PVS-Studio</a> ã€‚ <br><br> æ‚¨æƒ³å°è¯•Haikuå—ï¼Ÿ  Haikuå¼€å‘äººå‘˜é‚€è¯·æ‚¨åŠ å…¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç”µæŠ¥é¢‘é“</a> ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461253/">https://habr.com/ru/post/zh-CN461253/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461241/index.html">åœ°çƒç‰©ç†å­¦ä¸­çš„Wolfram Mathematica</a></li>
<li><a href="../zh-CN461243/index.html">ä¸è¦å»éæ´²èµ°èµ°ï¼šBlack Continentä¸Šçš„äº’è”ç½‘å®¡æŸ¥æƒ…å†µå¦‚ä½•</a></li>
<li><a href="../zh-CN461247/index.html">50ä¸ªæœ‰å…³é˜…è¯»ï¼Œæ”¶å¬å’Œè§‚çœ‹äº§å“ç®¡ç†çš„æœ€ä½³èµ„æ–™</a></li>
<li><a href="../zh-CN461249/index.html">ä¸ºç”µå½±è¿·ç¼–å†™ä¸€ä¸ªAndroidåº”ç”¨-ç¬¬2éƒ¨åˆ†ï¼ˆè®¾è®¡ï¼‰</a></li>
<li><a href="../zh-CN461251/index.html">æœ±è‰å¨…Â·åŸƒæ–‡æ–¯çš„ç²¾é€‰æœ‰ç”¨å¹»ç¯ç‰‡</a></li>
<li><a href="../zh-CN461255/index.html">å¦‚ä½•åœ¨Cå’ŒC ++ä¸­æ”¾çºµè‡ªå·±ã€‚ Haiku OSé£Ÿè°±é›†</a></li>
<li><a href="../zh-CN461257/index.html">å¦‚ä½•ä½¿ç”¨Seleniumé€šè¿‡æµ‹è¯•è‡ªåŠ¨åŒ–è®¡ç®—ROIï¼Ÿ</a></li>
<li><a href="../zh-CN461259/index.html">å‚¨å­˜æ´¾å¯¹ï¼Œ8æœˆ8æ—¥ï¼Œè«æ–¯ç§‘</a></li>
<li><a href="../zh-CN461261/index.html">æœ‰å…³RRCäº§å“çš„æœ‰ç”¨çš„RRCç½‘ç»œç ”è®¨ä¼šæ¸…å•</a></li>
<li><a href="../zh-CN461265/index.html">å…³äºåœ¨å¾®æ§åˆ¶å™¨é¡¹ç›®ä¸­æ»¥ç”¨æ“ä½œç³»ç»Ÿçš„ä½¿ç”¨</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>