<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ä üëºüèª üë®üèæ‚Äçüé® Mecanismo de Presentaci√≥n - Magia Cubana Especial üñ±Ô∏è üßòüèª üëºüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vistas, o vistas, es uno de los conceptos de la plataforma CUBA, no el m√°s com√∫n en el mundo de los marcos web. Comprenderlo significa salvarse de err...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mecanismo de Presentaci√≥n - Magia Cubana Especial</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/425765/"><p><img src="https://habrastorage.org/webt/ro/89/bc/ro89bcf9p8amjxin9ca0ksoctf8.jpeg" alt="CPAP"></p><br><p>  Vistas, o vistas, es uno de los conceptos de la plataforma CUBA, no el m√°s com√∫n en el mundo de los marcos web.  Comprenderlo significa salvarse de errores est√∫pidos cuando, debido a la carga incompleta de datos, la aplicaci√≥n deja de funcionar de repente.  Veamos qu√© son las representaciones (juego de palabras) y por qu√© es realmente conveniente. </p><br><h3 id="problema-nezagruzhennyh-dannyh">  El problema de los datos descargados </h3><br><p>  Tomemos un tema m√°s simple y consideremos el problema usando su ejemplo.  Supongamos que tenemos una entidad de <em>Cliente</em> que se refiere a una entidad de Tipo de <em>Cliente</em> en una relaci√≥n de muchos a uno, en otras palabras, el comprador tiene un enlace a un cierto tipo que lo describe: por ejemplo, "vaca de efectivo", "pargo", etc.  La entidad <em>CustomerType</em> tiene un atributo de <em>nombre</em> en el que se almacena el nombre del tipo. </p><br><p>  Y, probablemente, todos los reci√©n llegados (o incluso usuarios avanzados) en CUBA tarde o temprano recibieron este error: </p><br><p><code>IllegalStateException: Cannot get unfetched attribute [type] from detached object com.rtcab.cev.entity.Customer-e703700d-c977-bd8e-1a40-74afd88915af [detached].</code> </p> <br><p><img src="https://habrastorage.org/webt/-x/ss/fm/-xssfm8nzwvf86jcicyrelm5nby.png" alt="No se puede obtener el error de atributo no recuperado en CUBA UI"></p><br><p>  Adm√≠telo, ¬øtambi√©n lo viste con tus propios ojos?  Yo ... s√≠, en cien situaciones diferentes.  En este art√≠culo, examinaremos la causa de este problema, por qu√© existe y c√≥mo resolverlo. <br>  Para empezar, una peque√±a introducci√≥n al concepto de puntos de vista. </p><br><h3 id="chto-takoe-predstavlenie">  ¬øQu√© es una vista? </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Una vista</a> en CUBA es esencialmente una colecci√≥n de columnas en una base de datos que deben cargarse juntas en una sola consulta. </p><a name="habracut"></a><br><p>  Supongamos que queremos crear una interfaz de usuario con una tabla de clientes, donde la primera columna es el nombre del cliente, y la segunda es el nombre del tipo del atributo <em>customerType</em> (como en la captura de pantalla anterior).  Es l√≥gico suponer que en este modelo de datos tendremos dos tablas separadas en la base de datos, una para la entidad <em>Cliente</em> y la otra para <em>CustomerType</em> .  La consulta <code>SELECT * from CEV_CUSTOMER</code> nos devolver√° datos de una sola tabla ( <code>name</code> atributo, etc.).  Obviamente, para obtener datos tambi√©n de otras tablas, usaremos JOIN. </p><br><p>  En el caso de usar consultas SQL cl√°sicas usando JOIN, la jerarqu√≠a de asociaciones (atributos de referencia) se expande desde el gr√°fico a una lista plana. <br>  <em>Nota del traductor: en</em> otras palabras, las relaciones entre las tablas se borran y el resultado se presenta en una √∫nica matriz de datos que representa la uni√≥n de las tablas. </p><br><p>  En el caso de CUBA, se utiliza ORM, que no pierde informaci√≥n sobre las relaciones entre entidades y presenta el resultado de la consulta en forma de un gr√°fico integral de los datos solicitados.  En este caso, JPQL, un objeto an√°logo de SQL, se utiliza como lenguaje de consulta. </p><br><p>  Sin embargo, los datos a√∫n deben descargarse de alguna manera de la base de datos y transformarse en un gr√°fico de entidad.  Para esto, el mecanismo de mapeo relacional de objetos (que es JPA) tiene dos enfoques principales para las consultas a la base de datos. </p><br><h3 id="lazy-loading-vs-eager-fetching">  Carga perezosa vs.  b√∫squeda ansiosa </h3><br><p>  La carga diferida y la carga codiciosa son dos posibles estrategias para obtener datos de la base de datos.  La diferencia fundamental entre los dos es cuando se cargan los datos de las tablas vinculadas.  Un peque√±o ejemplo para una mejor comprensi√≥n: </p><br><p>  ¬øRecuerdas la escena del libro "El hobbit o viaje redondo", donde un grupo de gnomos en compa√±√≠a de Gandalf y Bilbo est√°n tratando de pedir pasar la noche en la casa de Beorn?  Gandalf orden√≥ que los enanos aparecieran estrictamente por turno y solo despu√©s de que accedi√≥ cuidadosamente con Beorn y comenz√≥ a presentarlos uno a la vez para no sorprender al propietario por la necesidad de acomodar a 15 invitados a la vez. </p><br><p><img src="https://habrastorage.org/webt/ys/pm/ql/yspmqlsytd5vmefxszi9xeqqduc.jpeg" alt="Gandalf y los enanos en la casa de Beorn"></p><br><p>  Entonces, Gandalf y los gnomos en la casa de Beorn ... Esto probablemente no sea lo primero que se les ocurra al pensar en descargas perezosas y codiciosas, pero definitivamente hay similitudes.  Gandalf actu√≥ sabiamente aqu√≠, ya que era consciente de las limitaciones.  Se puede decir que elige conscientemente la carga lenta de los gnomos, ya que entendi√≥ que descargar todos los datos a la vez ser√≠a una operaci√≥n demasiado pesada para esta base de datos.  Sin embargo, despu√©s del octavo gnomo, Gandalf cambi√≥ a una carga codiciosa y carg√≥ un mont√≥n de los gnomos restantes, porque not√≥ que los accesos demasiado frecuentes a la base de datos comienzan a ponerla nerviosa. </p><br><p>  La moraleja es que tanto la carga perezosa como la codiciosa tienen sus pros y sus contras.  Usted decide qu√© aplicar en cada situaci√≥n espec√≠fica. </p><br><h3 id="problema-zaprosa-n1">  Solicitar problema N + 1 </h3><br><p>  El problema de la consulta N + 1 a menudo surge si est√° utilizando sin pensar la carga diferida donde quiera que vaya.  Para ilustrar, veamos un fragmento de c√≥digo de Grails.  Esto no significa que en Grails todo se cargue perezosamente (de hecho, usted elige el m√©todo de arranque).  En Grails, una consulta a la base de datos por defecto devuelve instancias de entidad con todos los atributos de su tabla.  B√°sicamente, se ejecuta <code>SELECT * FROM Pet</code> . </p><br><p>  Si desea profundizar en las relaciones entre entidades, debe hacerlo despu√©s de factum.  Aqu√≠ hay un ejemplo: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> getPetOwnerNamesForPets(String nameOfPet) { def pets = Pet.findAll(sort:"name") { <span class="hljs-type"><span class="hljs-type">name</span></span> == nameOfPet } def ownerNames = [] pets.<span class="hljs-keyword"><span class="hljs-keyword">each</span></span> { ownerNames &lt;&lt; it.<span class="hljs-keyword"><span class="hljs-keyword">owner</span></span>.name } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ownerNames.<span class="hljs-keyword"><span class="hljs-keyword">join</span></span>(", ") }</code> </pre> <br><p>  El gr√°fico se <code>it.owner.name</code> aqu√≠ por una sola l√≠nea: <code>it.owner.name</code> .  Propietario es una relaci√≥n que no se carg√≥ en la solicitud original ( <code>Pet.findAll</code> ).  Por lo tanto, cada vez que se llama a esta l√≠nea, GORM har√° algo como <code>SELECT * FROM Person WHERE id='‚Ä¶'</code> .  Agua pura carga perezosa. </p><br><p>  Si calcula el n√∫mero total de consultas SQL, obtiene N (un propietario para cada llamada <code>it.owner</code> ) + 1 (para el <code>Pet.findAll</code> original).  Si desea profundizar en el gr√°fico de entidades relacionadas, es probable que su base de datos encuentre r√°pidamente sus l√≠mites. </p><br><p>  Como desarrollador, es poco probable que se d√© cuenta de esto, porque desde su punto de vista simplemente est√° recorriendo el gr√°fico de objetos.  Este anidamiento oculto en una l√≠nea corta causa dolor real a la base de datos y hace que la carga diferida sea a veces peligrosa. </p><br><p>  Desarrollando una analog√≠a de pasatiempo, el problema de N + 1 podr√≠a manifestarse de la siguiente manera: imagine que Gandalf no puede almacenar los nombres de gnomos en su memoria.  Por lo tanto, presentando a los enanos uno por uno, se ve obligado a retroceder a su grupo y preguntarle al enano por su nombre.  Con esta informaci√≥n, vuelve a Beorn y representa a Thorin.  Luego repite esta maniobra para Bifur, Bofur, Fili, Kili, Dori, Nori, Ori, Oin, Gloyn, Balin, Dvalin y Bombur. </p><br><p><img src="https://habrastorage.org/webt/fw/g_/vs/fwg_vscjob0zb0yzrn7dhrj2o_s.jpeg" alt="Enanos N + 1 Problema"></p><br><p>  Es f√°cil imaginar que tal escenario ser√≠a improbable: ¬øqu√© destinatario querr√≠a esperar la informaci√≥n solicitada durante tanto tiempo?  Por lo tanto, no debe utilizar este enfoque sin pensar y confiar ciegamente en la configuraci√≥n predeterminada de su mapeador de persistencia. </p><br><h3 id="reshaem-problemu-zaprosov-n1-s-pomoschyu-cuba-views">  Resolviendo el problema de las consultas N + 1 usando vistas CUBA </h3><br><p>  En CUBA, lo m√°s probable es que nunca encuentre el problema de consulta N + 1, ya que la plataforma decidi√≥ no utilizar la carga diferida oculta.  En cambio, CUBA introdujo el concepto de representaciones.  Las vistas son una descripci√≥n de qu√© atributos deben seleccionarse y cargarse junto con las instancias de entidad.  Algo como </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> pet.name, person.name <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Pet pet <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> Person person <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> pet.owner == person.id</code> </pre> <br><p>  Por un lado, la vista describe las columnas que deben cargarse desde la tabla principal ( <em>Pet</em> ) (en lugar de cargar todos los atributos a trav√©s de *), por otro lado, describe las columnas que deben cargarse desde las tablas c-JOIN. </p><br><p>  Puede imaginar la vista CUBA como vista SQL para OR-Mapper: el principio de funcionamiento es aproximadamente el mismo. </p><br><p>  En la plataforma CUBA, no puede invocar una consulta a trav√©s del DataManager sin usar view.  La documentaci√≥n proporciona un ejemplo: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> DataManager dataManager; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Book </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadBookById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UUID bookId)</span></span></span><span class="hljs-function"> </span></span>{ LoadContext&lt;Book&gt; loadContext = LoadContext.create(Book.class) .setId(bookId).setView(<span class="hljs-string"><span class="hljs-string">"book.edit"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dataManager.load(loadContext); }</code> </pre> <br><p>  Aqu√≠ queremos descargar el libro por su ID.  El <code>setView("book.edit")</code> , al crear un contexto de carga, indica con qu√© vista se debe cargar el libro desde la base de datos.  En caso de que no pase ninguna vista, el administrador de datos utiliza una de las tres vistas est√°ndar que tiene cada entidad: la <em>vista local</em> .  Local aqu√≠ se refiere a atributos que no hacen referencia a otras tablas, todo es simple. </p><br><h3 id="reshenie-problemy-s-illegalstateexception-cherez-views">  Resolviendo el problema con IllegalStateException a trav√©s de vistas </h3><br><p>  Ahora que conocemos un poco el concepto de representaciones, volvamos al primer ejemplo desde el comienzo del art√≠culo e intentemos evitar que se produzca una excepci√≥n. </p><br><p>  El mensaje <em>IllegalStateException: No se puede obtener el atributo no recuperado [] del objeto separado</em> solo significa que est√° intentando mostrar alg√∫n atributo que no est√° incluido en la vista con la que se carga la entidad. </p><br><p>  Como puede ver, en el descriptor de la pantalla de navegaci√≥n utilic√© la <em>vista local</em> , y este es todo el problema: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dsContext</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupDatasource</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"customersDs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.rtcab.cev.entity.Customer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_local"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[select e from cev$Customer e]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupDatasource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dsContext</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Para deshacerse del error, primero debe incluir el tipo de cliente en la vista.  Como no podemos cambiar la vista predeterminada de <em>_local</em> , podemos crear la nuestra.  En Studio, esto se puede hacer, por ejemplo, de la siguiente manera (haga clic derecho en las entidades&gt; crear vista): </p><br><p><img src="https://habrastorage.org/webt/ki/oz/vy/kiozvyydas04xj9ypswst8afvxo.png" alt="Crear una vista en Studio"></p><br><p>  directamente en el descriptor <a href="">views.xml</a> de nuestra aplicaci√≥n: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.rtcab.cev.entity.Customer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">extends</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_local"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"customer-view"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_minimal"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Despu√©s de eso, cambiamos el enlace a la vista en la pantalla de exploraci√≥n, as√≠: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupDatasource</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"customersDs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.rtcab.cev.entity.Customer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"customer-view"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[select e from cev$Customer e]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupDatasource</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Esto resuelve completamente el problema, y ‚Äã‚Äãahora los datos del enlace se muestran en la pantalla de visualizaci√≥n del cliente. </p><br><h3 id="predstavlenie-_minimal-i-ponyatie-instance-name">  _Vista m√≠nima y nombre de instancia </h3><br><p>  Lo que vale la pena mencionar en el contexto de las vistas es la vista <em>m√≠nima</em> .  La vista local tiene una definici√≥n muy clara: incluye todos los atributos de la entidad, que son atributos directos de la tabla (que no son claves for√°neas). </p><br><p>  La definici√≥n de una representaci√≥n m√≠nima no es tan obvia, pero tambi√©n bastante clara. </p><br><p>  CUBA tiene el concepto de un nombre de instancia de entidad: nombre de instancia.  El nombre de la instancia es el equivalente del m√©todo <code>toString()</code> en un buen Java antiguo.  Esta es una representaci√≥n de cadena de una entidad para mostrar en una interfaz de usuario y para usar en enlaces.  El nombre de la instancia se establece utilizando la anotaci√≥n de la entidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NamePattern</a> . </p><br><p>  Se usa as√≠: <code>@NamePattern("%s (%s)|name,code")</code> .  Tenemos dos resultados: </p><br><h4 id="imya-ekzemplyara-opredelyaet-otobrazhenie-suschnosti-v-ui">  El nombre de la instancia define la asignaci√≥n de la entidad a la IU </h4><br><p>  En primer lugar, el nombre de la instancia determina qu√© y en qu√© orden se mostrar√° en la interfaz de usuario si una entidad se refiere a otra entidad (como <em>Cliente se</em> refiere a <em>CustomerType</em> ). </p><br><p>  En nuestro caso, el tipo de cliente se mostrar√° como el nombre de la instancia <em>CustomerType</em> , a la que se agrega el c√≥digo entre par√©ntesis.  Si no se establece el nombre de la instancia, se mostrar√° el nombre de la clase de entidad y el ID de la instancia espec√≠fica; acuerde que esto no es lo que el usuario desea ver.  Vea las capturas de pantalla de antes y despu√©s a continuaci√≥n para ver ejemplos de ambos casos. </p><br><p><img src="https://habrastorage.org/webt/wa/gd/u8/wagdu8lfbckngwhi2swjhgj8mxe.png" alt="Referencia a una entidad para la que no se especifica ning√∫n nombre de instancia"></p><br><p><img src="https://habrastorage.org/webt/uy/7f/ok/uy7fokvhqcl9m5jx0ui1ju2v4l0.png" alt="Una referencia de entidad con el nombre de instancia dado"></p><br><h4 id="imya-ekzemplyara-opredelyaet-atributy-minimalnogo-predstavleniya">  El nombre de instancia define los atributos m√≠nimos de vista </h4><br><p>  La segunda cosa que afecta la anotaci√≥n NamePattern es: todos los atributos especificados despu√©s de la barra vertical forman autom√°ticamente una vista <em>m√≠nima</em> .  A primera vista, esto parece obvio, porque los datos de alguna forma deben mostrarse en la interfaz de usuario, lo que significa que primero debe descargarlos de la base de datos.  Aunque, para ser sincero, rara vez pienso en este hecho. </p><br><p>  Es importante se√±alar aqu√≠ que la representaci√≥n m√≠nima, si se compara con la local, puede contener referencias a otras entidades.  Por ejemplo, para el comprador del ejemplo anterior, configur√© un nombre de instancia, que incluye un atributo local de la entidad del <em>Cliente</em> ( <code>name</code> ) y un atributo de referencia ( <code>type</code> ): </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@NamePattern</span></span>(<span class="hljs-string"><span class="hljs-string">"%s - %s|name,type"</span></span>)</code> </pre> <br><p>  La representaci√≥n m√≠nima se puede utilizar de forma recursiva: (Cliente [Nombre de instancia] -&gt; Tipo de cliente [Nombre de instancia]) </p><br><p>  <em>Nota del traductor:</em> desde la publicaci√≥n del art√≠culo, ha aparecido otra vista del sistema: <code>_base</code> view, que incluye todos los atributos locales que no son del sistema y los atributos especificados en la anotaci√≥n @NamePattern (es decir, realmente <code>_minimal</code> + <code>_local</code> ). </p><br><h3 id="zaklyuchenie">  Conclusi√≥n </h3><br><p>  En conclusi√≥n, resumimos el tema m√°s importante.  Gracias a las vistas, en CUBA podemos indicar expl√≠citamente qu√© se debe cargar desde la base de datos.  Las vistas determinan qu√© se cargar√° con avidez, mientras que la mayor√≠a de los otros frameworks realizan de forma encubierta la carga diferida. </p><br><p>  Las representaciones pueden parecer un mecanismo engorroso, pero a la larga se justifican. </p><br><p>  Espero haber logrado explicar de manera accesible cu√°les son realmente estas misteriosas vistas.  Por supuesto, hay escenarios m√°s avanzados para su uso, as√≠ como dificultades para trabajar con representaciones en general y con representaciones m√≠nimas en particular, pero de alguna manera escribir√© sobre esto en una publicaci√≥n separada. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es425765/">https://habr.com/ru/post/es425765/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es425753/index.html">RIP de Google+</a></li>
<li><a href="../es425755/index.html">Desarrollo: New Generation Messenger (Parte 3). Aplicaciones de escritorio</a></li>
<li><a href="../es425759/index.html">Nuevas aventuras de Cyborg en Alemania</a></li>
<li><a href="../es425761/index.html">Prueba de DevDay Pro: grabaci√≥n de informes</a></li>
<li><a href="../es425763/index.html">PHP Excel Templator (motor de plantillas PHP para Excel) o c√≥mo escribimos c√≥digo duro para Excel antes</a></li>
<li><a href="../es425767/index.html">Splunk 7.2 ¬øQu√© hay de nuevo? SmartStore, gesti√≥n de carga y m√°s ...</a></li>
<li><a href="../es425769/index.html">C√≥mo ense√±ar a MySQL a mirar hacia el pasado</a></li>
<li><a href="../es425771/index.html">El principio de menor acci√≥n en mec√°nica anal√≠tica.</a></li>
<li><a href="../es425773/index.html">C√≥mo controlamos a los empleados remotos</a></li>
<li><a href="../es425775/index.html">Automatizaci√≥n de la industria del sexo o servicios p√∫blicos en alem√°n.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>