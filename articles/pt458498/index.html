<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèº üèáüèΩ üë©üèø‚Äç‚öïÔ∏è Diretrizes pr√°ticas para o desenvolvimento de aplicativos React em larga escala. Parte 2: gerenciamento de estado, roteamento üíáüèæ üëºüèº ‚úäüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje publicamos a segunda parte da tradu√ß√£o do material, que √© dedicada ao desenvolvimento de aplica√ß√µes React em larga escala. Aqui, falaremos sobre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Diretrizes pr√°ticas para o desenvolvimento de aplicativos React em larga escala. Parte 2: gerenciamento de estado, roteamento</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458498/">  Hoje publicamos a segunda parte da tradu√ß√£o do material, que √© dedicada ao desenvolvimento de aplica√ß√µes React em larga escala.  Aqui, falaremos sobre o gerenciamento do estado dos aplicativos, roteamento e desenvolvimento de interface. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/be/rk/zj/berkzjayeeo2ap1yvpeeunb3b6e.png"></a> <br><br>  Parte 1: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Diretrizes pr√°ticas para o desenvolvimento de aplicativos React em larga escala.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Planejamento, a√ß√µes, fontes de dados e APIs</a> <br><br>  Parte 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Diretrizes pr√°ticas para o desenvolvimento de aplicativos React em larga escala.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2: gerenciamento de estado, roteamento</a> <br><br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Gerenciamento de estado de aplicativos, integra√ß√£o Redux, organiza√ß√£o de roteamento</font> </h2><br>  Aqui, falaremos sobre como voc√™ pode estender a funcionalidade do Redux para poder executar opera√ß√µes complexas no aplicativo.  Se esses mecanismos forem mal implementados, eles podem violar o padr√£o usado no design do reposit√≥rio. <br><br>  As <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√µes de gerador de</a> JavaScript podem resolver muitos dos problemas associados √† programa√ß√£o ass√≠ncrona.  O fato √© que essas fun√ß√µes podem ser iniciadas e interrompidas a pedido do programador.  O middleware Redux-saga usa esse conceito para gerenciar aspectos problem√°ticos de um aplicativo.  Em particular, estamos falando em resolver esses problemas, que n√£o podem ser resolvidos com a ajuda de redutores, apresentados na forma de fun√ß√µes puras. <br><br><h3>  <font color="#3AC1EF">OlvingResolver tarefas que n√£o podem ser resolvidas com fun√ß√µes puras</font> </h3><br>  Considere o seguinte cen√°rio.  Voc√™ foi convidado a trabalhar em um aplicativo desenvolvido para uma empresa que trabalha no mercado imobili√°rio.  O cliente deseja obter um site novo e melhor.  √Ä sua disposi√ß√£o, existe uma API REST, voc√™ tem layouts de todas as p√°ginas preparadas usando o Zapier, delineou um plano de aplicativo.  Mas ent√£o surgiu um grande problema. <br><br>  A empresa cliente h√° muito tempo usa um determinado sistema de gerenciamento de conte√∫do (CMS).  Os funcion√°rios da empresa est√£o bem cientes desse sistema; portanto, o cliente n√£o deseja mudar para um novo CMS apenas para facilitar a grava√ß√£o de novas postagens em um blog corporativo.  Al√©m disso, voc√™ tamb√©m precisa copiar as publica√ß√µes existentes do blog para um novo site, e isso tamb√©m pode levar a um problema. <br><br>  O bom √© que o CMS usado pelo cliente possui uma API conveniente por meio da qual voc√™ pode acessar as publica√ß√µes do blog.  Por√©m, se voc√™ criou um agente para trabalhar com essa API, a situa√ß√£o √© complicada pelo fato de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ela</a> estar localizada em um determinado servidor no qual os dados s√£o apresentados de maneira alguma conforme necess√°rio. <br><br>  Este √© um exemplo de problema, algo que pode poluir o c√≥digo do aplicativo, pois aqui voc√™ deve incluir nos mecanismos do projeto para trabalhar com a nova API usada para baixar postagens do blog.  Voc√™ pode lidar com esta situa√ß√£o com redux-saga. <br>  Veja o diagrama a seguir.  √â assim que nosso aplicativo e API interagem.  Fazemos o download de publica√ß√µes em segundo plano usando redux-saga. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56e/2b9/fdf/56e2b9fdfc5ea809c842a39cfed53bfe.jpg"></div><br>  <i><font color="#999999">Diagrama de aplicativo usando armazenamento Redux e redux-saga</font></i> <br><br>  Aqui, o componente despacha a a√ß√£o <code>GET.BLOGS</code> .  Como o aplicativo usa redux-saga, essa solicita√ß√£o ser√° interceptada.  Depois disso, a fun√ß√£o do gerador far√° o download dos dados do armazenamento de dados em segundo plano e atualizar√° o estado do aplicativo suportado pelo Redux. <br><br>  Aqui est√° um exemplo de como a fun√ß√£o geradora para carregar publica√ß√µes (tais fun√ß√µes s√£o chamadas de ‚Äúsagas‚Äù) pode parecer na situa√ß√£o descrita.  Sagas podem ser usados ‚Äã‚Äãem outros cen√°rios.  Por exemplo, para organizar o armazenamento de dados do usu√°rio (digamos, podem ser tokens), pois esse √© outro exemplo de uma tarefa para a qual fun√ß√µes puras n√£o s√£o adequadas. <br><br><pre> <code class="javascript hljs">... function* fetchPosts(action) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === WP_POSTS.LIST.REQUESTED) {   <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> call(wpGet, {       <span class="hljs-attr"><span class="hljs-attr">model</span></span>: WP_POSTS.MODEL,       <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>: APPLICATION_JSON,       <span class="hljs-attr"><span class="hljs-attr">query</span></span>: action.payload.query,     });     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.error) {       <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({         <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.FAILED,         <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: response.error.response.data.msg,       });       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;         <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({       <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.SUCCESS,       <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: {         <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: response.data,         <span class="hljs-attr"><span class="hljs-attr">total</span></span>: response.headers[<span class="hljs-string"><span class="hljs-string">'x-wp-total'</span></span>],         <span class="hljs-attr"><span class="hljs-attr">query</span></span>: action.payload.query,       },       <span class="hljs-attr"><span class="hljs-attr">view</span></span>: action.view,     });   } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) {     <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.FAILED, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: e.message });  ...</code> </pre> <br>  A saga apresentada aqui espera a√ß√µes como <code>WP_POSTS.LIST.REQUESTED</code> .  Ao receber essa a√ß√£o, ele carrega dados da API.  Depois de receber os dados, ela envia outra a√ß√£o - <code>WP_POSTS.LIST.SUCCESS</code> .  Seu processamento leva √† atualiza√ß√£o do reposit√≥rio usando o redutor apropriado. <br><br><h3>  <font color="#3AC1EF">‚ñç Introdu√ß√£o de redutores</font> </h3><br>  Ao desenvolver aplicativos grandes, √© imposs√≠vel planejar com anteced√™ncia o dispositivo de todos os modelos necess√°rios.  Al√©m disso, √† medida que o tamanho da aplica√ß√£o aumenta, o uso da tecnologia de introdu√ß√£o de redutores ajuda a economizar uma grande quantidade de horas de trabalho.  Essa t√©cnica permite que os desenvolvedores adicionem novos redutores ao sistema sem reescrever o reposit√≥rio inteiro. <br><br>  Existem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bibliotecas</a> projetadas para criar reposit√≥rios din√¢micos do Redux.  No entanto, prefiro o mecanismo de introdu√ß√£o de redutores, pois ele oferece ao desenvolvedor um certo n√≠vel de flexibilidade.  Por exemplo, um aplicativo existente pode ser equipado com esse mecanismo sem a necessidade de reorganizar seriamente o aplicativo. <br><br>  A introdu√ß√£o de redutores √© uma forma de separa√ß√£o de c√≥digo.  A comunidade de desenvolvedores do React est√° adotando entusiasticamente essa tecnologia.  Usarei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esse</a> trecho de c√≥digo para demonstrar a apar√™ncia e os recursos do mecanismo de implementa√ß√£o dos redutores. <br><br>  Primeiro, vejamos sua integra√ß√£o com o Redux: <br><br><pre> <code class="javascript hljs">... const withConnect = connect( mapStateToProps, mapDispatchToProps, ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> withReducer = injectReducer({ <span class="hljs-attr"><span class="hljs-attr">key</span></span>: BLOG_VIEW, <span class="hljs-attr"><span class="hljs-attr">reducer</span></span>: blogReducer, }); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlogPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{  ... } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> compose( withReducer, withConnect, )(BlogPage);</code> </pre> <br>  Este c√≥digo faz parte do arquivo <code>BlogPage.js</code> que cont√©m o componente do aplicativo. <br><br>  Aqui n√≥s, no comando export, n√£o usamos a fun√ß√£o <code>connect</code> , mas a fun√ß√£o <code>compose</code> .  Essa √© uma das fun√ß√µes da biblioteca Redux que permite compor v√°rias fun√ß√µes.  A lista de fun√ß√µes passadas para <code>compose</code> deve ser lida da direita para a esquerda ou de baixo para cima. <br><br>  Voc√™ pode aprender com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> do Redux que a fun√ß√£o de <code>compose</code> permite criar transforma√ß√µes de fun√ß√µes profundamente aninhadas.  Nesse caso, o programador fica livre da necessidade de usar estruturas muito longas.  Essas constru√ß√µes se parecem com linhas de c√≥digo que representam chamadas para algumas fun√ß√µes, passando-lhes os resultados de chamadas para outras fun√ß√µes como argumentos.  A documenta√ß√£o observa que a fun√ß√£o de <code>compose</code> deve ser usada com cautela. <br><br>  A fun√ß√£o mais √† direita em uma composi√ß√£o pode receber muitos argumentos, mas apenas um argumento pode ser passado para as fun√ß√µes a seguir.  Como resultado, chamando a fun√ß√£o que resultou do uso de <code>compose</code> , passamos a ela o que √© necess√°rio das fun√ß√µes originais, que est√£o √† direita de todas as outras.  Por isso, passamos a fun√ß√£o de composi√ß√£o para a fun√ß√£o <code>withConnect</code> como o √∫ltimo par√¢metro.  Como resultado, a fun√ß√£o de <code>compose</code> pode ser usada como a fun√ß√£o de <code>connect</code> . <br><br><h3>  <font color="#3AC1EF">‚ñç Roteamento e Redux</font> </h3><br>  Existem v√°rias ferramentas usadas para resolver problemas de roteamento em aplicativos.  Nesta se√ß√£o, no entanto, focaremos a biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">react-router-dom</a> .  Expandiremos seus recursos para que ele possa trabalhar com o Redux. <br><br>  Na maioria das vezes, o roteador React √© usado assim: o componente raiz √© <code>BrowserRouter</code> tag <code>BrowserRouter</code> e os cont√™ineres filhos s√£o <code>withRouter()</code> m√©todo <code>withRouter()</code> e exportados ( <a href="">aqui est√°</a> um exemplo). <br><br>  Com essa abordagem, o componente filho recebe, por meio do mecanismo de <code>props</code> , um objeto de <code>history</code> cont√©m algumas propriedades espec√≠ficas da sess√£o do usu√°rio atual.  Existem alguns m√©todos neste objeto que podem ser usados ‚Äã‚Äãpara controlar a navega√ß√£o. <br><br>  Essa op√ß√£o de roteamento pode causar problemas em aplicativos grandes.  Isso se deve ao fato de eles n√£o terem um objeto <code>history</code> centralizado.  Al√©m disso, os componentes que n√£o s√£o renderizados com <code>&lt;Route&gt;</code> n√£o podem funcionar com o objeto de <code>history</code> .  Aqui est√° um exemplo usando <code>&lt;Route&gt;</code> : <br><br><pre> <code class="javascript hljs">&lt;Route path=<span class="hljs-string"><span class="hljs-string">"/"</span></span> exact component={HomePage} /&gt;</code> </pre> <br>  Para resolver esse problema, usaremos a biblioteca de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">roteador de rea√ß√£o conectada</a> , que nos permitir√° estabelecer o roteamento usando o m√©todo de <code>dispatch</code> .  A integra√ß√£o dessa biblioteca no projeto exigir√° algumas modifica√ß√µes.  Em particular, ser√° necess√°rio criar um novo redutor projetado especificamente para rotas (isso √© bastante √≥bvio) e tamb√©m adicionar alguns mecanismos auxiliares ao sistema. <br><br>  Ap√≥s a conclus√£o de sua configura√ß√£o, o novo sistema de roteamento pode ser usado atrav√©s do Redux.  Portanto, a navega√ß√£o no aplicativo pode ser implementada enviando a√ß√µes. <br><br>  Para tirar proveito dos recursos da biblioteca de roteador de rea√ß√£o conectado no componente, simplesmente mapeamos o m√©todo de <code>dispatch</code> para o reposit√≥rio, fazendo isso de acordo com as necessidades do aplicativo.  Aqui est√° um exemplo de c√≥digo que demonstra o uso da biblioteca de roteador de rea√ß√£o conectado (para que esse c√≥digo funcione, voc√™ precisa que o restante do sistema esteja configurado para usar o roteador de rea√ß√£o-conectado). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { push } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'connected-react-router'</span></span> ... const mapDispatchToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch</span></span></span><span class="hljs-function"> =&gt;</span></span> ({  <span class="hljs-attr"><span class="hljs-attr">goTo</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">payload</span></span></span><span class="hljs-function"> =&gt;</span></span> {    dispatch(push(payload.path));  }, }); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DemoComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{  render() {    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">      &lt;Child        onClick={          (</span></span></span><span class="hljs-function">) =&gt;</span></span> {            <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.goTo({ <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">`/gallery/`</span></span>});                      <span class="hljs-regexp"><span class="hljs-regexp">/&gt;    } ...</span></span></code> </pre> <br>  Aqui, o m√©todo <code>goTo</code> despacha uma a√ß√£o que envia a URL necess√°ria <code>goTo</code> pilha de hist√≥rico <code>goTo</code> navegador.  Anteriormente, o m√©todo <code>goTo</code> era <code>goTo</code> para o reposit√≥rio.  Portanto, esse m√©todo √© passado para o <code>DemoComponent</code> no objeto <code>props</code> . <br><br><h2>  <font color="#3AC1EF">Interface de usu√°rio din√¢mica e necessidades de um aplicativo em crescimento</font> </h2><br>  Com o tempo, apesar da presen√ßa de um back-end adequado para o aplicativo e de uma parte do cliente de alta qualidade, alguns elementos da interface do usu√°rio come√ßam a ter um efeito ruim sobre os usu√°rios.  Isso se deve √† implementa√ß√£o irracional dos componentes, que, √† primeira vista, parece muito simples.  Nesta se√ß√£o, discutiremos recomenda√ß√µes para a cria√ß√£o de alguns widgets.  Sua implementa√ß√£o correta, conforme o aplicativo cresce, fica mais complicada. <br><br><h3>  <font color="#3AC1EF">Loading Carregamento lento e React.Suspense</font> </h3><br>  A melhor parte da natureza ass√≠ncrona do JavaScript √© que ele tira proveito de todo o potencial do navegador.  Talvez o verdadeiro bem seja que, para iniciar um determinado processo, voc√™ n√£o precise esperar pela conclus√£o da tarefa anterior.  No entanto, os desenvolvedores n√£o podem influenciar a rede e a velocidade com que os v√°rios materiais necess√°rios para o funcionamento dos sites s√£o carregados. <br><br>  Os subsistemas de rede s√£o geralmente considerados n√£o confi√°veis ‚Äã‚Äãe propensos a erros. <br><br>  O desenvolvedor, em um esfor√ßo para tornar sua aplica√ß√£o o mais alta qualidade poss√≠vel, pode sujeit√°-la a muitas verifica√ß√µes e obter sua aprova√ß√£o com √™xito.  Mas ainda existem algumas coisas, como o status da conex√£o de rede ou o tempo de resposta do servidor, que o desenvolvedor n√£o pode influenciar. <br><br>  Mas os criadores do software n√£o procuram justificar o trabalho de baixa qualidade dos aplicativos com frases como "esse n√£o √© o meu neg√≥cio".  Eles descobriram maneiras interessantes de lidar com problemas de rede. <br><br>  Em algumas partes do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativo front-end,</a> pode ser necess√°rio mostrar alguns materiais de backup (como carregar muito mais r√°pido que os materiais reais).  Isso evitar√° que o usu√°rio contemple a "contra√ß√£o" das p√°ginas de carregamento ou, pior ainda, sobre esses √≠cones. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f47/123/d6a/f47123d6ab6e8e85a0d445742e33031c.png"></div><br>  <i><font color="#999999">√â melhor que os usu√°rios n√£o vejam algo assim.</font></i> <br><br>  A tecnologia React Suspense permite que voc√™ lide com esses problemas.  Por exemplo, permite exibir um determinado indicador durante o carregamento de dados.  Embora isso tamb√©m possa ser feito manualmente, definindo a propriedade <code>isLoaded</code> como <code>true</code> , o uso da API Suspense torna o c√≥digo muito mais limpo. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> voc√™ pode assistir a um bom v√≠deo sobre o Suspense, no qual Jared Palmer apresenta o p√∫blico a essa tecnologia e mostra alguns de seus recursos usando um exemplo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativo real</a> . <br><br>  Veja como o aplicativo funciona sem usar o Suspense. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d49/7bc/734/d497bc7344af043e19445fa8299a35d0.gif"></div><br>  <i><font color="#999999">Aplicativo no qual o Suspense n√£o √© usado</font></i> <br><br>  Equipar um componente com suporte ao Suspense √© muito mais f√°cil do que usar o <code>isLoaded</code> todo o <code>isLoaded</code> .  Vamos come√ßar colocando o cont√™iner de <code>App</code> pai no <code>React.StrictMode</code> .  Garantimos que, entre os m√≥dulos React usados ‚Äã‚Äãno aplicativo, n√£o haja aqueles que sejam considerados obsoletos. <br><br><pre> <code class="javascript hljs">&lt;React.Suspense fallback={&lt;Spinner size=<span class="hljs-string"><span class="hljs-string">"large"</span></span> /&gt;}&gt;  &lt;ArtistDetails id={this.props.id}/&gt;  &lt;ArtistTopTracks /&gt;  &lt;ArtistAlbums id={this.props.id}/&gt; &lt;/React.Suspense&gt;</code> </pre> <br>  Os componentes envolvidos nas tags <code>React.Suspense</code> , durante o carregamento do conte√∫do principal, carregam e exibem o que √© especificado na propriedade <code>fallback</code> .  Devemos nos esfor√ßar para garantir que os componentes usados ‚Äã‚Äãna propriedade <code>fallback</code> tenham o menor volume poss√≠vel e sejam organizados da maneira mais simples poss√≠vel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b9/d1c/54e/9b9d1c54ea0a5d7c26ea7e0a7bbdebee.gif"></div><br>  <i><font color="#999999">Aplicativo que usa Suspense</font></i> <br><br><h3>  <font color="#3AC1EF">Components Componentes adapt√°veis</font> </h3><br>  Em aplicativos front-end grandes, a manifesta√ß√£o de padr√µes repetidos √© comum.  Ao mesmo tempo, no in√≠cio do trabalho, isso pode ser quase completamente √≥bvio.  N√£o h√° nada a ser feito sobre isso, mas voc√™ deve ter se deparado com isso. <br><br>  Por exemplo, existem dois modelos no aplicativo.  Um deles √© destinado √† descri√ß√£o de pistas de corrida e o segundo - √† descri√ß√£o de carros.  A p√°gina da lista de carros usa elementos quadrados.  Cada um deles cont√©m uma imagem e uma breve descri√ß√£o. <br><br>  A lista de rastreamento usa elementos semelhantes.  Sua principal caracter√≠stica √© que, al√©m da imagem e descri√ß√£o da pista, eles tamb√©m t√™m um pequeno campo indicando se √© poss√≠vel para os espectadores de uma corrida nessa pista comprar algo para comer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6c9/8b3/8ab/6c98b38ab2cf0c2670751908581d26d0.png"></div><br>  <i><font color="#999999">Elemento para a descri√ß√£o do carro e elemento para a descri√ß√£o da pista</font></i> <br><br>  Esses dois componentes s√£o ligeiramente diferentes um do outro em termos de estilo (eles t√™m cores de fundo diferentes).  O componente que descreve a rota cont√©m algumas informa√ß√µes adicionais sobre o objeto do mundo real que descreve, enquanto o componente que simboliza o carro n√£o possui essas informa√ß√µes.  Este exemplo mostra apenas dois modelos.  Em uma aplica√ß√£o grande, muitos modelos semelhantes podem ser digitados, diferindo apenas em pequenas coisas. <br><br>  A cria√ß√£o de componentes independentes separados para cada uma dessas entidades √© contr√°ria ao senso comum. <br><br>  Um programador pode economizar a necessidade de escrever fragmentos de c√≥digo que se repetem quase completamente.  Isso pode ser feito atrav√©s do desenvolvimento de componentes adaptativos.  No decorrer do trabalho, eles levam em considera√ß√£o o ambiente em que foram carregados.  Considere a barra de pesquisa de um determinado aplicativo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a27/334/4e5/a273344e57f1ea8aa88269f8dad8e7dd.png"></div><br>  <i><font color="#999999">Barra de pesquisa</font></i> <br><br>  Ser√° usado em muitas p√°ginas.  Ao mesmo tempo, pequenas altera√ß√µes ser√£o feitas na apar√™ncia e na ordem do trabalho em p√°ginas diferentes.  Por exemplo, na p√°gina inicial do projeto, ele ser√° um pouco maior do que em outras p√°ginas.  Para resolver esse problema, voc√™ pode criar um √∫nico componente que ser√° exibido de acordo com as propriedades transferidas para ele. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> propTypes = {  <span class="hljs-attr"><span class="hljs-attr">open</span></span>: PropTypes.bool.isRequired,  <span class="hljs-attr"><span class="hljs-attr">setOpen</span></span>: PropTypes.func.isRequired,  <span class="hljs-attr"><span class="hljs-attr">goTo</span></span>: PropTypes.func.isRequired, };</code> </pre> <br>  Usando essa t√©cnica, voc√™ pode controlar o uso de classes HTML ao renderizar esses elementos, o que permite influenciar a apar√™ncia deles. <br><br>  Outra situa√ß√£o interessante na qual componentes adaptativos podem encontrar aplica√ß√£o √© o mecanismo para dividir certos materiais em p√°ginas.  Uma barra de navega√ß√£o pode estar presente em todas as p√°ginas do aplicativo.  As inst√¢ncias deste painel em cada uma das p√°ginas ser√£o quase exatamente as mesmas das outras p√°ginas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c86/7ee/d8d/c867eed8d85f120940a321d95fc274f2.png"></div><br>  <i><font color="#999999">Painel de pagina√ß√£o</font></i> <br><br>  Suponha que um determinado aplicativo precise de um painel semelhante.  Ao trabalhar neste aplicativo, os desenvolvedores cumprem os requisitos articulados oportunos.  Em tal situa√ß√£o, o componente adaptativo usado para dividir o material em p√°ginas precisa apenas passar algumas propriedades.  Este √© o <code>URL</code> e o n√∫mero de elementos por p√°gina. <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>  O ecossistema React se tornou t√£o maduro hoje em dia que √© improv√°vel que algu√©m precise ‚Äúinventar uma bicicleta‚Äù em qualquer est√°gio do desenvolvimento de aplicativos.  Embora isso esteja nas m√£os dos desenvolvedores, leva ao fato de que fica dif√≠cil escolher exatamente o que funciona bem para cada projeto espec√≠fico. <br><br>  Cada projeto √© √∫nico em termos de escopo e funcionalidade.  N√£o h√° uma abordagem √∫nica ou regra universal no desenvolvimento de aplicativos React.  Portanto, antes de iniciar o desenvolvimento, √© importante planejar corretamente. <br><br>  Ao planejar, √© muito f√°cil entender quais ferramentas s√£o criadas diretamente para o projeto e quais claramente n√£o s√£o adequadas para ele, sendo muito grandes para ele.  Por exemplo, um aplicativo que consiste em 2 a 3 p√°ginas e executa muito poucas solicita√ß√µes para determinadas APIs n√£o precisa de reposit√≥rios de dados semelhantes aos de que falamos.  Estou pronto para ir ainda mais longe nessas considera√ß√µes e dizer que em pequenos projetos voc√™ n√£o precisa usar o Redux. <br>  No est√°gio de planejamento do aplicativo, ao desenhar layouts de suas p√°ginas, √© f√°cil ver que muitos componentes semelhantes s√£o usados ‚Äã‚Äãnessas p√°ginas.  Se voc√™ tentar reutilizar o c√≥digo desses componentes ou se esfor√ßar para escrever componentes universais, isso ajudar√° a economizar muito tempo e esfor√ßo. <br><br>  E, finalmente, gostaria de observar que os dados s√£o o n√∫cleo de qualquer aplicativo.  E os aplicativos React n√£o s√£o exce√ß√£o.  √Ä medida que a escala do aplicativo aumenta, os volumes de dados processados ‚Äã‚Äãaumentam, mecanismos de software adicionais para trabalhar com eles aparecem.  Algo assim, se o aplicativo foi mal projetado, pode facilmente "esmagar" os programadores, preenchendo-os com tarefas complexas e confusas.  Se, no decorrer do planejamento, as quest√µes do uso de data warehouses fossem decididas com anteced√™ncia, se a ordem do trabalho das a√ß√µes, redutores e quedas fosse pensada com anteced√™ncia, o trabalho no aplicativo seria muito mais f√°cil. <br><br>  <b>Caros leitores!</b>  Se voc√™ conhece alguma biblioteca ou metodologia de desenvolvimento com bom desempenho ao criar aplicativos React em larga escala, compartilhe-os. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458498/">https://habr.com/ru/post/pt458498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458488/index.html">Data Science Digest (julho de 2019)</a></li>
<li><a href="../pt458490/index.html">Segure-se firmemente ao volante ... Nosso projeto para monitorar a condi√ß√£o dos motoristas</a></li>
<li><a href="../pt458492/index.html">‚ÄúSempre acreditamos na concorr√™ncia e no direito de escolher um usu√°rio‚Äù ¬© Yandex</a></li>
<li><a href="../pt458494/index.html">Um exemplo pr√°tico de uso das fun√ß√µes de renderiza√ß√£o do Vue: cria√ß√£o de uma grade tipogr√°fica para um sistema de design</a></li>
<li><a href="../pt458496/index.html">Diretrizes pr√°ticas para o desenvolvimento de aplicativos React em larga escala. Planejamento, a√ß√µes, fontes de dados e APIs</a></li>
<li><a href="../pt458500/index.html">Metamorfose do teste redux-saga</a></li>
<li><a href="../pt458502/index.html">O principal segredo para o desenvolvimento de boas aplica√ß√µes de el√©trons</a></li>
<li><a href="../pt458504/index.html">13 npm truques para economizar tempo</a></li>
<li><a href="../pt458506/index.html">N√£o Portal 3, mas pr√≥ximo: teletransporte qu√¢ntico de informa√ß√µes dentro de um diamante</a></li>
<li><a href="../pt458508/index.html">Um olhar por dentro: p√≥s-gradua√ß√£o na EPFL. Parte 4.2: o lado financeiro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>