<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚶🏼 🏇🏽 👩🏿‍⚕️ Diretrizes práticas para o desenvolvimento de aplicativos React em larga escala. Parte 2: gerenciamento de estado, roteamento 💇🏾 👼🏼 ✊🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje publicamos a segunda parte da tradução do material, que é dedicada ao desenvolvimento de aplicações React em larga escala. Aqui, falaremos sobre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Diretrizes práticas para o desenvolvimento de aplicativos React em larga escala. Parte 2: gerenciamento de estado, roteamento</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458498/">  Hoje publicamos a segunda parte da tradução do material, que é dedicada ao desenvolvimento de aplicações React em larga escala.  Aqui, falaremos sobre o gerenciamento do estado dos aplicativos, roteamento e desenvolvimento de interface. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/be/rk/zj/berkzjayeeo2ap1yvpeeunb3b6e.png"></a> <br><br>  Parte 1: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Diretrizes práticas para o desenvolvimento de aplicativos React em larga escala.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Planejamento, ações, fontes de dados e APIs</a> <br><br>  Parte 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Diretrizes práticas para o desenvolvimento de aplicativos React em larga escala.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2: gerenciamento de estado, roteamento</a> <br><br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Gerenciamento de estado de aplicativos, integração Redux, organização de roteamento</font> </h2><br>  Aqui, falaremos sobre como você pode estender a funcionalidade do Redux para poder executar operações complexas no aplicativo.  Se esses mecanismos forem mal implementados, eles podem violar o padrão usado no design do repositório. <br><br>  As <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">funções de gerador de</a> JavaScript podem resolver muitos dos problemas associados à programação assíncrona.  O fato é que essas funções podem ser iniciadas e interrompidas a pedido do programador.  O middleware Redux-saga usa esse conceito para gerenciar aspectos problemáticos de um aplicativo.  Em particular, estamos falando em resolver esses problemas, que não podem ser resolvidos com a ajuda de redutores, apresentados na forma de funções puras. <br><br><h3>  <font color="#3AC1EF">OlvingResolver tarefas que não podem ser resolvidas com funções puras</font> </h3><br>  Considere o seguinte cenário.  Você foi convidado a trabalhar em um aplicativo desenvolvido para uma empresa que trabalha no mercado imobiliário.  O cliente deseja obter um site novo e melhor.  À sua disposição, existe uma API REST, você tem layouts de todas as páginas preparadas usando o Zapier, delineou um plano de aplicativo.  Mas então surgiu um grande problema. <br><br>  A empresa cliente há muito tempo usa um determinado sistema de gerenciamento de conteúdo (CMS).  Os funcionários da empresa estão bem cientes desse sistema; portanto, o cliente não deseja mudar para um novo CMS apenas para facilitar a gravação de novas postagens em um blog corporativo.  Além disso, você também precisa copiar as publicações existentes do blog para um novo site, e isso também pode levar a um problema. <br><br>  O bom é que o CMS usado pelo cliente possui uma API conveniente por meio da qual você pode acessar as publicações do blog.  Porém, se você criou um agente para trabalhar com essa API, a situação é complicada pelo fato de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ela</a> estar localizada em um determinado servidor no qual os dados são apresentados de maneira alguma conforme necessário. <br><br>  Este é um exemplo de problema, algo que pode poluir o código do aplicativo, pois aqui você deve incluir nos mecanismos do projeto para trabalhar com a nova API usada para baixar postagens do blog.  Você pode lidar com esta situação com redux-saga. <br>  Veja o diagrama a seguir.  É assim que nosso aplicativo e API interagem.  Fazemos o download de publicações em segundo plano usando redux-saga. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56e/2b9/fdf/56e2b9fdfc5ea809c842a39cfed53bfe.jpg"></div><br>  <i><font color="#999999">Diagrama de aplicativo usando armazenamento Redux e redux-saga</font></i> <br><br>  Aqui, o componente despacha a ação <code>GET.BLOGS</code> .  Como o aplicativo usa redux-saga, essa solicitação será interceptada.  Depois disso, a função do gerador fará o download dos dados do armazenamento de dados em segundo plano e atualizará o estado do aplicativo suportado pelo Redux. <br><br>  Aqui está um exemplo de como a função geradora para carregar publicações (tais funções são chamadas de “sagas”) pode parecer na situação descrita.  Sagas podem ser usados ​​em outros cenários.  Por exemplo, para organizar o armazenamento de dados do usuário (digamos, podem ser tokens), pois esse é outro exemplo de uma tarefa para a qual funções puras não são adequadas. <br><br><pre> <code class="javascript hljs">... function* fetchPosts(action) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === WP_POSTS.LIST.REQUESTED) {   <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> call(wpGet, {       <span class="hljs-attr"><span class="hljs-attr">model</span></span>: WP_POSTS.MODEL,       <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>: APPLICATION_JSON,       <span class="hljs-attr"><span class="hljs-attr">query</span></span>: action.payload.query,     });     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.error) {       <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({         <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.FAILED,         <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: response.error.response.data.msg,       });       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;         <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({       <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.SUCCESS,       <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: {         <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: response.data,         <span class="hljs-attr"><span class="hljs-attr">total</span></span>: response.headers[<span class="hljs-string"><span class="hljs-string">'x-wp-total'</span></span>],         <span class="hljs-attr"><span class="hljs-attr">query</span></span>: action.payload.query,       },       <span class="hljs-attr"><span class="hljs-attr">view</span></span>: action.view,     });   } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) {     <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.FAILED, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: e.message });  ...</code> </pre> <br>  A saga apresentada aqui espera ações como <code>WP_POSTS.LIST.REQUESTED</code> .  Ao receber essa ação, ele carrega dados da API.  Depois de receber os dados, ela envia outra ação - <code>WP_POSTS.LIST.SUCCESS</code> .  Seu processamento leva à atualização do repositório usando o redutor apropriado. <br><br><h3>  <font color="#3AC1EF">▍ Introdução de redutores</font> </h3><br>  Ao desenvolver aplicativos grandes, é impossível planejar com antecedência o dispositivo de todos os modelos necessários.  Além disso, à medida que o tamanho da aplicação aumenta, o uso da tecnologia de introdução de redutores ajuda a economizar uma grande quantidade de horas de trabalho.  Essa técnica permite que os desenvolvedores adicionem novos redutores ao sistema sem reescrever o repositório inteiro. <br><br>  Existem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bibliotecas</a> projetadas para criar repositórios dinâmicos do Redux.  No entanto, prefiro o mecanismo de introdução de redutores, pois ele oferece ao desenvolvedor um certo nível de flexibilidade.  Por exemplo, um aplicativo existente pode ser equipado com esse mecanismo sem a necessidade de reorganizar seriamente o aplicativo. <br><br>  A introdução de redutores é uma forma de separação de código.  A comunidade de desenvolvedores do React está adotando entusiasticamente essa tecnologia.  Usarei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esse</a> trecho de código para demonstrar a aparência e os recursos do mecanismo de implementação dos redutores. <br><br>  Primeiro, vejamos sua integração com o Redux: <br><br><pre> <code class="javascript hljs">... const withConnect = connect( mapStateToProps, mapDispatchToProps, ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> withReducer = injectReducer({ <span class="hljs-attr"><span class="hljs-attr">key</span></span>: BLOG_VIEW, <span class="hljs-attr"><span class="hljs-attr">reducer</span></span>: blogReducer, }); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlogPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{  ... } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> compose( withReducer, withConnect, )(BlogPage);</code> </pre> <br>  Este código faz parte do arquivo <code>BlogPage.js</code> que contém o componente do aplicativo. <br><br>  Aqui nós, no comando export, não usamos a função <code>connect</code> , mas a função <code>compose</code> .  Essa é uma das funções da biblioteca Redux que permite compor várias funções.  A lista de funções passadas para <code>compose</code> deve ser lida da direita para a esquerda ou de baixo para cima. <br><br>  Você pode aprender com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documentação</a> do Redux que a função de <code>compose</code> permite criar transformações de funções profundamente aninhadas.  Nesse caso, o programador fica livre da necessidade de usar estruturas muito longas.  Essas construções se parecem com linhas de código que representam chamadas para algumas funções, passando-lhes os resultados de chamadas para outras funções como argumentos.  A documentação observa que a função de <code>compose</code> deve ser usada com cautela. <br><br>  A função mais à direita em uma composição pode receber muitos argumentos, mas apenas um argumento pode ser passado para as funções a seguir.  Como resultado, chamando a função que resultou do uso de <code>compose</code> , passamos a ela o que é necessário das funções originais, que estão à direita de todas as outras.  Por isso, passamos a função de composição para a função <code>withConnect</code> como o último parâmetro.  Como resultado, a função de <code>compose</code> pode ser usada como a função de <code>connect</code> . <br><br><h3>  <font color="#3AC1EF">▍ Roteamento e Redux</font> </h3><br>  Existem várias ferramentas usadas para resolver problemas de roteamento em aplicativos.  Nesta seção, no entanto, focaremos a biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">react-router-dom</a> .  Expandiremos seus recursos para que ele possa trabalhar com o Redux. <br><br>  Na maioria das vezes, o roteador React é usado assim: o componente raiz é <code>BrowserRouter</code> tag <code>BrowserRouter</code> e os contêineres filhos são <code>withRouter()</code> método <code>withRouter()</code> e exportados ( <a href="">aqui está</a> um exemplo). <br><br>  Com essa abordagem, o componente filho recebe, por meio do mecanismo de <code>props</code> , um objeto de <code>history</code> contém algumas propriedades específicas da sessão do usuário atual.  Existem alguns métodos neste objeto que podem ser usados ​​para controlar a navegação. <br><br>  Essa opção de roteamento pode causar problemas em aplicativos grandes.  Isso se deve ao fato de eles não terem um objeto <code>history</code> centralizado.  Além disso, os componentes que não são renderizados com <code>&lt;Route&gt;</code> não podem funcionar com o objeto de <code>history</code> .  Aqui está um exemplo usando <code>&lt;Route&gt;</code> : <br><br><pre> <code class="javascript hljs">&lt;Route path=<span class="hljs-string"><span class="hljs-string">"/"</span></span> exact component={HomePage} /&gt;</code> </pre> <br>  Para resolver esse problema, usaremos a biblioteca de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">roteador de reação conectada</a> , que nos permitirá estabelecer o roteamento usando o método de <code>dispatch</code> .  A integração dessa biblioteca no projeto exigirá algumas modificações.  Em particular, será necessário criar um novo redutor projetado especificamente para rotas (isso é bastante óbvio) e também adicionar alguns mecanismos auxiliares ao sistema. <br><br>  Após a conclusão de sua configuração, o novo sistema de roteamento pode ser usado através do Redux.  Portanto, a navegação no aplicativo pode ser implementada enviando ações. <br><br>  Para tirar proveito dos recursos da biblioteca de roteador de reação conectado no componente, simplesmente mapeamos o método de <code>dispatch</code> para o repositório, fazendo isso de acordo com as necessidades do aplicativo.  Aqui está um exemplo de código que demonstra o uso da biblioteca de roteador de reação conectado (para que esse código funcione, você precisa que o restante do sistema esteja configurado para usar o roteador de reação-conectado). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { push } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'connected-react-router'</span></span> ... const mapDispatchToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch</span></span></span><span class="hljs-function"> =&gt;</span></span> ({  <span class="hljs-attr"><span class="hljs-attr">goTo</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">payload</span></span></span><span class="hljs-function"> =&gt;</span></span> {    dispatch(push(payload.path));  }, }); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DemoComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{  render() {    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">      &lt;Child        onClick={          (</span></span></span><span class="hljs-function">) =&gt;</span></span> {            <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.goTo({ <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">`/gallery/`</span></span>});                      <span class="hljs-regexp"><span class="hljs-regexp">/&gt;    } ...</span></span></code> </pre> <br>  Aqui, o método <code>goTo</code> despacha uma ação que envia a URL necessária <code>goTo</code> pilha de histórico <code>goTo</code> navegador.  Anteriormente, o método <code>goTo</code> era <code>goTo</code> para o repositório.  Portanto, esse método é passado para o <code>DemoComponent</code> no objeto <code>props</code> . <br><br><h2>  <font color="#3AC1EF">Interface de usuário dinâmica e necessidades de um aplicativo em crescimento</font> </h2><br>  Com o tempo, apesar da presença de um back-end adequado para o aplicativo e de uma parte do cliente de alta qualidade, alguns elementos da interface do usuário começam a ter um efeito ruim sobre os usuários.  Isso se deve à implementação irracional dos componentes, que, à primeira vista, parece muito simples.  Nesta seção, discutiremos recomendações para a criação de alguns widgets.  Sua implementação correta, conforme o aplicativo cresce, fica mais complicada. <br><br><h3>  <font color="#3AC1EF">Loading Carregamento lento e React.Suspense</font> </h3><br>  A melhor parte da natureza assíncrona do JavaScript é que ele tira proveito de todo o potencial do navegador.  Talvez o verdadeiro bem seja que, para iniciar um determinado processo, você não precise esperar pela conclusão da tarefa anterior.  No entanto, os desenvolvedores não podem influenciar a rede e a velocidade com que os vários materiais necessários para o funcionamento dos sites são carregados. <br><br>  Os subsistemas de rede são geralmente considerados não confiáveis ​​e propensos a erros. <br><br>  O desenvolvedor, em um esforço para tornar sua aplicação o mais alta qualidade possível, pode sujeitá-la a muitas verificações e obter sua aprovação com êxito.  Mas ainda existem algumas coisas, como o status da conexão de rede ou o tempo de resposta do servidor, que o desenvolvedor não pode influenciar. <br><br>  Mas os criadores do software não procuram justificar o trabalho de baixa qualidade dos aplicativos com frases como "esse não é o meu negócio".  Eles descobriram maneiras interessantes de lidar com problemas de rede. <br><br>  Em algumas partes do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativo front-end,</a> pode ser necessário mostrar alguns materiais de backup (como carregar muito mais rápido que os materiais reais).  Isso evitará que o usuário contemple a "contração" das páginas de carregamento ou, pior ainda, sobre esses ícones. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f47/123/d6a/f47123d6ab6e8e85a0d445742e33031c.png"></div><br>  <i><font color="#999999">É melhor que os usuários não vejam algo assim.</font></i> <br><br>  A tecnologia React Suspense permite que você lide com esses problemas.  Por exemplo, permite exibir um determinado indicador durante o carregamento de dados.  Embora isso também possa ser feito manualmente, definindo a propriedade <code>isLoaded</code> como <code>true</code> , o uso da API Suspense torna o código muito mais limpo. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> você pode assistir a um bom vídeo sobre o Suspense, no qual Jared Palmer apresenta o público a essa tecnologia e mostra alguns de seus recursos usando um exemplo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativo real</a> . <br><br>  Veja como o aplicativo funciona sem usar o Suspense. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d49/7bc/734/d497bc7344af043e19445fa8299a35d0.gif"></div><br>  <i><font color="#999999">Aplicativo no qual o Suspense não é usado</font></i> <br><br>  Equipar um componente com suporte ao Suspense é muito mais fácil do que usar o <code>isLoaded</code> todo o <code>isLoaded</code> .  Vamos começar colocando o contêiner de <code>App</code> pai no <code>React.StrictMode</code> .  Garantimos que, entre os módulos React usados ​​no aplicativo, não haja aqueles que sejam considerados obsoletos. <br><br><pre> <code class="javascript hljs">&lt;React.Suspense fallback={&lt;Spinner size=<span class="hljs-string"><span class="hljs-string">"large"</span></span> /&gt;}&gt;  &lt;ArtistDetails id={this.props.id}/&gt;  &lt;ArtistTopTracks /&gt;  &lt;ArtistAlbums id={this.props.id}/&gt; &lt;/React.Suspense&gt;</code> </pre> <br>  Os componentes envolvidos nas tags <code>React.Suspense</code> , durante o carregamento do conteúdo principal, carregam e exibem o que é especificado na propriedade <code>fallback</code> .  Devemos nos esforçar para garantir que os componentes usados ​​na propriedade <code>fallback</code> tenham o menor volume possível e sejam organizados da maneira mais simples possível. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b9/d1c/54e/9b9d1c54ea0a5d7c26ea7e0a7bbdebee.gif"></div><br>  <i><font color="#999999">Aplicativo que usa Suspense</font></i> <br><br><h3>  <font color="#3AC1EF">Components Componentes adaptáveis</font> </h3><br>  Em aplicativos front-end grandes, a manifestação de padrões repetidos é comum.  Ao mesmo tempo, no início do trabalho, isso pode ser quase completamente óbvio.  Não há nada a ser feito sobre isso, mas você deve ter se deparado com isso. <br><br>  Por exemplo, existem dois modelos no aplicativo.  Um deles é destinado à descrição de pistas de corrida e o segundo - à descrição de carros.  A página da lista de carros usa elementos quadrados.  Cada um deles contém uma imagem e uma breve descrição. <br><br>  A lista de rastreamento usa elementos semelhantes.  Sua principal característica é que, além da imagem e descrição da pista, eles também têm um pequeno campo indicando se é possível para os espectadores de uma corrida nessa pista comprar algo para comer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6c9/8b3/8ab/6c98b38ab2cf0c2670751908581d26d0.png"></div><br>  <i><font color="#999999">Elemento para a descrição do carro e elemento para a descrição da pista</font></i> <br><br>  Esses dois componentes são ligeiramente diferentes um do outro em termos de estilo (eles têm cores de fundo diferentes).  O componente que descreve a rota contém algumas informações adicionais sobre o objeto do mundo real que descreve, enquanto o componente que simboliza o carro não possui essas informações.  Este exemplo mostra apenas dois modelos.  Em uma aplicação grande, muitos modelos semelhantes podem ser digitados, diferindo apenas em pequenas coisas. <br><br>  A criação de componentes independentes separados para cada uma dessas entidades é contrária ao senso comum. <br><br>  Um programador pode economizar a necessidade de escrever fragmentos de código que se repetem quase completamente.  Isso pode ser feito através do desenvolvimento de componentes adaptativos.  No decorrer do trabalho, eles levam em consideração o ambiente em que foram carregados.  Considere a barra de pesquisa de um determinado aplicativo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a27/334/4e5/a273344e57f1ea8aa88269f8dad8e7dd.png"></div><br>  <i><font color="#999999">Barra de pesquisa</font></i> <br><br>  Será usado em muitas páginas.  Ao mesmo tempo, pequenas alterações serão feitas na aparência e na ordem do trabalho em páginas diferentes.  Por exemplo, na página inicial do projeto, ele será um pouco maior do que em outras páginas.  Para resolver esse problema, você pode criar um único componente que será exibido de acordo com as propriedades transferidas para ele. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> propTypes = {  <span class="hljs-attr"><span class="hljs-attr">open</span></span>: PropTypes.bool.isRequired,  <span class="hljs-attr"><span class="hljs-attr">setOpen</span></span>: PropTypes.func.isRequired,  <span class="hljs-attr"><span class="hljs-attr">goTo</span></span>: PropTypes.func.isRequired, };</code> </pre> <br>  Usando essa técnica, você pode controlar o uso de classes HTML ao renderizar esses elementos, o que permite influenciar a aparência deles. <br><br>  Outra situação interessante na qual componentes adaptativos podem encontrar aplicação é o mecanismo para dividir certos materiais em páginas.  Uma barra de navegação pode estar presente em todas as páginas do aplicativo.  As instâncias deste painel em cada uma das páginas serão quase exatamente as mesmas das outras páginas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c86/7ee/d8d/c867eed8d85f120940a321d95fc274f2.png"></div><br>  <i><font color="#999999">Painel de paginação</font></i> <br><br>  Suponha que um determinado aplicativo precise de um painel semelhante.  Ao trabalhar neste aplicativo, os desenvolvedores cumprem os requisitos articulados oportunos.  Em tal situação, o componente adaptativo usado para dividir o material em páginas precisa apenas passar algumas propriedades.  Este é o <code>URL</code> e o número de elementos por página. <br><br><h2>  <font color="#3AC1EF">Sumário</font> </h2><br>  O ecossistema React se tornou tão maduro hoje em dia que é improvável que alguém precise “inventar uma bicicleta” em qualquer estágio do desenvolvimento de aplicativos.  Embora isso esteja nas mãos dos desenvolvedores, leva ao fato de que fica difícil escolher exatamente o que funciona bem para cada projeto específico. <br><br>  Cada projeto é único em termos de escopo e funcionalidade.  Não há uma abordagem única ou regra universal no desenvolvimento de aplicativos React.  Portanto, antes de iniciar o desenvolvimento, é importante planejar corretamente. <br><br>  Ao planejar, é muito fácil entender quais ferramentas são criadas diretamente para o projeto e quais claramente não são adequadas para ele, sendo muito grandes para ele.  Por exemplo, um aplicativo que consiste em 2 a 3 páginas e executa muito poucas solicitações para determinadas APIs não precisa de repositórios de dados semelhantes aos de que falamos.  Estou pronto para ir ainda mais longe nessas considerações e dizer que em pequenos projetos você não precisa usar o Redux. <br>  No estágio de planejamento do aplicativo, ao desenhar layouts de suas páginas, é fácil ver que muitos componentes semelhantes são usados ​​nessas páginas.  Se você tentar reutilizar o código desses componentes ou se esforçar para escrever componentes universais, isso ajudará a economizar muito tempo e esforço. <br><br>  E, finalmente, gostaria de observar que os dados são o núcleo de qualquer aplicativo.  E os aplicativos React não são exceção.  À medida que a escala do aplicativo aumenta, os volumes de dados processados ​​aumentam, mecanismos de software adicionais para trabalhar com eles aparecem.  Algo assim, se o aplicativo foi mal projetado, pode facilmente "esmagar" os programadores, preenchendo-os com tarefas complexas e confusas.  Se, no decorrer do planejamento, as questões do uso de data warehouses fossem decididas com antecedência, se a ordem do trabalho das ações, redutores e quedas fosse pensada com antecedência, o trabalho no aplicativo seria muito mais fácil. <br><br>  <b>Caros leitores!</b>  Se você conhece alguma biblioteca ou metodologia de desenvolvimento com bom desempenho ao criar aplicativos React em larga escala, compartilhe-os. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458498/">https://habr.com/ru/post/pt458498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458488/index.html">Data Science Digest (julho de 2019)</a></li>
<li><a href="../pt458490/index.html">Segure-se firmemente ao volante ... Nosso projeto para monitorar a condição dos motoristas</a></li>
<li><a href="../pt458492/index.html">“Sempre acreditamos na concorrência e no direito de escolher um usuário” © Yandex</a></li>
<li><a href="../pt458494/index.html">Um exemplo prático de uso das funções de renderização do Vue: criação de uma grade tipográfica para um sistema de design</a></li>
<li><a href="../pt458496/index.html">Diretrizes práticas para o desenvolvimento de aplicativos React em larga escala. Planejamento, ações, fontes de dados e APIs</a></li>
<li><a href="../pt458500/index.html">Metamorfose do teste redux-saga</a></li>
<li><a href="../pt458502/index.html">O principal segredo para o desenvolvimento de boas aplicações de elétrons</a></li>
<li><a href="../pt458504/index.html">13 npm truques para economizar tempo</a></li>
<li><a href="../pt458506/index.html">Não Portal 3, mas próximo: teletransporte quântico de informações dentro de um diamante</a></li>
<li><a href="../pt458508/index.html">Um olhar por dentro: pós-graduação na EPFL. Parte 4.2: o lado financeiro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>