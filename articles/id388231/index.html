<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÅÔ∏è üë©üèø‚Äç‚úàÔ∏è üìÆ Protokol MQTT dan proyek klien terbuka MQTT pada Delphi üçí üíû üàÇÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Protokol MQTT digunakan untuk pengiriman pesan di Internet. Pertama-tama, ini menarik karena didukung oleh penyedia layanan cloud terbesar, seperti IB...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Protokol MQTT dan proyek klien terbuka MQTT pada Delphi</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/388231/"><img align="left" src="https://habrastorage.org/files/335/d26/6d4/335d266d4c4943fcb2b3dd3c3aec0cef.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Protokol </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> digunakan untuk </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">pengiriman</font></a><font style="vertical-align: inherit;"> pesan di Internet. </font><font style="vertical-align: inherit;">Pertama-tama, ini menarik karena didukung oleh penyedia layanan cloud terbesar, seperti IBM, Microsoft, Amazon. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat memperoleh akun di layanan ini secara gratis, mengatur layanan untuk menerima pesan MQTT di sana dan menonton kehidupan perangkat Anda melalui layanan ini, misalnya, di rumah pintar. </font><font style="vertical-align: inherit;">Juga, melalui layanan ini, perangkat dapat berkomunikasi satu sama lain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Demonstrasi koneksi klien ke layanan MQTT dari IBM Bluemix cloud disertakan.</font></font><br>
<br>
<a name="habracut"></a><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deskripsi singkat.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MQTT sangat primitif: dengan header pendek, tanpa kontrol integritas, itu tidak memaksakan pembatasan pada struktur, pengkodean atau skema data. </font><font style="vertical-align: inherit;">Satu-satunya persyaratan data dalam setiap paket adalah bahwa mereka harus disertai oleh pengenal untuk saluran informasi. </font><font style="vertical-align: inherit;">Pengidentifikasi ini dalam spesifikasi disebut Nama Topik atau topik yang lebih sederhana. </font><font style="vertical-align: inherit;">Data dikirim ke paket melalui TCP. </font><font style="vertical-align: inherit;">Jumlah data dalam suatu paket dapat dari satu byte ke 268.435.455 byte. </font><font style="vertical-align: inherit;">Sangat fleksibel! </font><font style="vertical-align: inherit;">Meskipun layanan cloud publik memberlakukan batasan yang lebih ketat, hingga beberapa kilobyte.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Protokol MQTT membutuhkan broker data. </font><font style="vertical-align: inherit;">Ini adalah ide sentral dari teknologi. </font><font style="vertical-align: inherit;">Semua perangkat mengirim data hanya ke broker dan hanya menerima data darinya. </font><font style="vertical-align: inherit;">Broker adalah program yang bertindak sebagai server TCP dengan basis data dinamis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basis data pialang khususnya berisi tabel dengan semua paket yang diterima dengan pengindeksan berdasarkan topik paket ini. </font><font style="vertical-align: inherit;">Setelah menerima paket, broker mengirimnya ke semua perangkat di jaringan sesuai dengan langganan mereka. </font><font style="vertical-align: inherit;">Agar perangkat dapat menerima sesuatu dari broker, itu harus berlangganan ke topik. </font><font style="vertical-align: inherit;">Topik muncul secara dinamis pada saat berlangganan atau pada saat kedatangan paket dengan topik ini. </font><font style="vertical-align: inherit;">Anda juga dapat berhenti berlangganan dari topik. </font><font style="vertical-align: inherit;">Dengan demikian, topik adalah mekanisme yang nyaman untuk mengatur hubungan dari berbagai jenis: satu ke banyak, banyak ke satu, dan banyak ke banyak. </font><font style="vertical-align: inherit;">Jika paket tidak memiliki pelanggan, maka itu dibuang. </font><font style="vertical-align: inherit;">Jika pelanggan tidak terhubung, paket itu segera dihapus dalam database broker, atau menunggu pelanggan untuk terhubung untuk beberapa waktu yang ditentukan dalam konfigurasi. </font><font style="vertical-align: inherit;">Perilaku ditentukan oleh atribut QoS paket.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa lagi yang penting di sini.</font></font></h1> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Perangkat adalah yang pertama kali melakukan kontak dengan broker. Yaitu perangkat mungkin terletak di belakang penerjemah alamat jaringan (NAT) dan mungkin tidak memiliki alamat IP statis dan ini tidak akan mengganggu komunikasi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ SSL dapat digunakan untuk mengenkripsi lalu lintas. Tetapi Anda dapat bekerja tanpa SSL bahkan dengan layanan IBM, yang membuat proses debug lebih mudah. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Dalam kasus yang sangat sulit, broker MQTT memungkinkan Anda untuk terhubung melalui mereka melalui protokol WebSocket pada port 80. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Port protokol MQTT standar juga dapat diubah secara sewenang-wenang. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Baik klien / klien dengan antarmuka pengguna grafis dan broker dapat ditemukan di komputer yang sama. Yaitu solusinya dapat benar-benar lokal dan skala ke global dengan satu klik.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Pialang yang berbeda dapat terhubung satu sama lain dengan berlangganan pesan satu sama lain. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Konsep topik sangat cocok dengan teknologi database NoSQL. </font><font style="vertical-align: inherit;">Untuk tujuan yang sama, layanan cloud mendorong pengguna untuk menggunakan penyandian data JSON.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buka proyek</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pilihan broker MQTT cukup besar. Tapi anehnya praktis tidak ada klien yang nyaman dengan antarmuka pengguna jendela di bawah Windows. Dan klien seperti ini untuk menguasai protokol MQTT sangat diperlukan karena ada banyak nuansa praktis pekerjaan pialang di luar spesifikasi dan semuanya harus dipelajari dan diuji. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diputuskan untuk mengimplementasikan klien MQTT di Delphi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Google untuk Delphi hanya dapat menawarkan komponen TMQTTClient. Tapi ini komponen lama dan tidak berfungsi. Sebagian besar klien lain yang ditulis dalam Java, Erlang, Haskell, Javscript dalam Delphi sangat sulit untuk diintegrasikan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ditemukan satu-satunya proyek yang cocok - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ditulis dalam C-i murni. </font><font style="vertical-align: inherit;">Ini mengkompilasi untuk sistem operasi yang berbeda. </font><font style="vertical-align: inherit;">Ini memiliki skrip pembuatan proyek untuk Visual Studio. </font><font style="vertical-align: inherit;">Di pintu keluar di bawah Windows kami mendapatkan file dll dengan implementasi fungsi klien dan broker. </font><font style="vertical-align: inherit;">Penggunaan C sangat menggembirakan dalam hal kecepatan. </font><font style="vertical-align: inherit;">Dan perpustakaan dinamis yang ditulis dalam C mudah terhubung ke program Delphi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Delphi sendiri, diwakili oleh Embarcadero RAD Studio XE8, adalah alat yang sangat kuat untuk membuat antarmuka pengguna yang fleksibel dan nyaman untuk Windows, terutama jika dilengkapi dengan DevExpress, TeeChart, RxLib, FireDAC, dll.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alat yang diperlukan</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membutuhkan lingkungan pengembangan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS Visual Studio 2015</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ini akan mengkompilasi proyek </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan semua proyek pendukung di mana </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bergantung </font><font style="vertical-align: inherit;">. Atau, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dapat dikompilasi menggunakan paket </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cygwin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi Visual Studio tampak lebih nyaman. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghasilkan file proyek Visual Studio, Anda perlu mengunduh dan menginstal utilitas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cmake</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sumber </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmake.org</font></font></a></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dan tentu saja Anda membutuhkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAD Studio XE8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selain itu, di RAD Studio, </font><font style="vertical-align: inherit;">versi </font><font style="vertical-align: inherit;">paket komponen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevExpress VCL yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak lebih rendah dari </font><b><font style="vertical-align: inherit;">14.2.2</font></b><font style="vertical-align: inherit;"> harus diinstal</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Meskipun ini tidak terlalu penting, desain antarmuka pengguna dapat dengan mudah dibuat ulang untuk komponen Studio RAD standar.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prosedur Instalasi Perangkat Lunak</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mosquitto bergantung pada beberapa proyek pihak ketiga, yaitu: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL v 1.0.2e</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sumber - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://slproweb.com/download/Win32OpenSSL-1_0_2e.exe</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Ä¢ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pthreads v 2.9.1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sumber - </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ftp://sourceware.org/pub/pthreads-win32/pthreads-w32-2-9-1-release.zip</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Ä¢ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Libwebsockets v 1.4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sumber - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/warmcat/libwebsockets</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Unduh proyek-proyek ini. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak mengkompilasi </font><b><font style="vertical-align: inherit;">OpenSSL</font></b><font style="vertical-align: inherit;"> , tetapi segera mengambil dua file yang diperlukan dari sana: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libeay32.dll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssleay32.dll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari direktori </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sering terjadi bahwa mereka sudah diinstal pada komputer dari proyek lain. Ini harus diperiksa. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pthreads</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami juga tidak mengkompilasi, tetapi mengambil file </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pthreadVC2.dll yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sudah dikompilasi </font><font style="vertical-align: inherit;">dari direktori </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dll \ x86</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Libwebsockets</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hadir tanpa file yang telah dikompilasi dan tanpa proyek untuk Visual Studio, tetapi ia memiliki file konfigurasi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMakeLists.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam hal ini, menggunakan utilitas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cmake</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><b><font style="vertical-align: inherit;">kami</font></b><font style="vertical-align: inherit;"> membuat file proyek Visual Studio dalam direktori terpisah (libwebsockets_VS_proj direktori). Dan kemudian membuka file proyek yang dihasilkan di Visual Studio yang kami kompilasi. Kami </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mendapatkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><b><font style="vertical-align: inherit;">websockets.dll yang</font></b><font style="vertical-align: inherit;"> kami </font><b><font style="vertical-align: inherit;">butuhkan</font></b><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah semua langkah sebelumnya, Anda dapat mengkompilasi proyek </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Di sini, Anda juga harus terlebih dahulu membuat file proyek Visual Studio (direktori Mosquitto_VS_proj) dari file konfigurasi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMakeLists.txt yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dilampirkan </font><font style="vertical-align: inherit;">. Proyek yang dihasilkan tidak cukup berfungsi, Anda harus mengubah jalur ke beberapa file dan pustaka header eksternal, menyertakan beberapa makro dalam proyek, dan sedikit memodifikasi kode sumber. Akibatnya, kami mendapatkan file </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mosquitto.dll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk kesederhanaan, semua file dan struktur direktori dengan proyek-proyek tersebut terkandung dalam file arsip yang dilampirkan pada artikel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bersama dengan pustaka klien, kompilasi proyek </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memberi kami file yang dapat dieksekusi dari broker MQTT - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mosquitto.exe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, kami segera mendapatkan klien dan broker MQTT, yaitu </font><font style="vertical-align: inherit;">hampir semua yang Anda butuhkan untuk mengatur Internet yang efektif.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membuat Proyek Klien MQTT di Delphi</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengintegrasikan pustaka </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mosquitto.dll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke dalam Delphi, </font><b><font style="vertical-align: inherit;">Anda</font></b><font style="vertical-align: inherit;"> perlu membuat modul deklarasi fungsi pustaka pada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Object Pascal</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Untuk melakukan hal ini, konversi file telah dilakukan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mosquitto.h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berkas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MOSQUITTO.PAS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek klien sangat sederhana, hanya terdiri dari 4 file sumber. </font><font style="vertical-align: inherit;">Klien menunjukkan menghubungkan dan memutus hubungan, membentuk surat wasiat ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Will</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), mengirimkan data dengan paket </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUBLISH ke</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> broker, menerima data dengan paket </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUBLISH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari broker, berlangganan dan berhenti berlangganan.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program menyimpan semua atribut koneksi, yang dirujuk oleh istilah profil dalam tabel profil yang disimpan di disk. </font><font style="vertical-align: inherit;">Log paket yang diterima dan dikirim </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUBLISH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> juga disimpan ke disk secara terpisah </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metode Penggunaan Pelanggan</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jalankan file </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMQTTC.exe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam rangka untuk memiliki seseorang untuk berkomunikasi tim broker uji coba </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run_mosquitto.cmd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam direktori </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto_1_4_5_bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Untuk kenyamanan, broker dikonfigurasi untuk terhubung tanpa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan verifikasi kata sandi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isi kolom seperti pada tangkapan layar. </font></font><br>
<br>
<img width="1000" src="https://habrastorage.org/files/6df/303/805/6df303805cb246feb6acc16236e0277a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kata sandi dan nama pengguna adalah opsional. Di navigator, klik tombol komit untuk menyimpan data di tabel. Kemudian klik tombol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connect</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah koneksi, terbitkan dan berlangganan perintah menjadi tersedia. Perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PING</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> klien </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mosquitto</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menghasilkan secara otomatis.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar klien mendapatkan sesuatu, sekali lagi Anda harus menjalankan program </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMQTTC.exe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan pengidentifikasi klien yang berbeda dan berlangganan satu klien untuk menerima data dari yang lain.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terhubung ke IBM Bluemix</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal pertama yang harus dilakukan adalah mendapatkan akun di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Setelah menerima akun, kita pergi ke panel kontrol kami di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Di sini Anda harus segera beralih ke wilayah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS Selatan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Untuk melakukan ini, klik ikon akun di sudut kanan atas dan ubah nilainya di bidang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wilayah</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ada tiga wilayah secara total, tetapi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS Selatan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memberi Anda kesempatan untuk mengalami sebagian besar layanan. Selanjutnya, buat </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spasi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Layar akan terlihat seperti gambar di bawah ini. Di sini, organisasi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDEMSYS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Space </font></font></b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDEMSYS SPACE dibuat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img width="800" src="https://habrastorage.org/files/e8e/a9d/daf/e8ea9ddaf89c47b299f6766b5012948c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang klik pada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KATALOG</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di menu atas. Kami turun ke bawah dan memilih</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet of Things Foundation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img width="800" src="https://habrastorage.org/files/b34/edd/4d1/b34edd4d15b848cb9a70d5b53a218538.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak mengubah bidang yang diusulkan secara default dan klik </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat </font></font></b><br>
<img width="800" src="https://habrastorage.org/files/615/b4f/d12/615b4fd125b44adebeba93ec77725d8e.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet of Things Foundation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ini adalah layanan yang menyertakan broker </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan antarmuka pengguna untuk itu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah membuat di jendela yang muncul, klik tombol berlabel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luncurkan dasbor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img width="800" src="https://habrastorage.org/files/b9e/00f/6e1/b9e00f6e1f7d4381ab7d95220998f722.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah panel kontrol IoT. Sekarang kita perlu membuat perangkat. Klik </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambah perangkat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam dialog yang muncul, buat jenis perangkat ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat jenis perangkat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Beri nama Type1, jangan mengisi bidang yang tersisa untuk kesederhanaan. Klik Berikutnya -&gt; Selanjutnya -&gt; Buat -&gt; Selanjutnya. Beri nama ke perangkat Device1. Next Next -&gt; Next -&gt; Next -&gt; Tambah. Hasilnya, kita mendapatkan jendela berikut:</font></font><br>
<img width="800" src="https://habrastorage.org/files/ce8/dcc/0b2/ce8dcc0b2a7f41d39f1545be3a0ee014.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya di sini kita memiliki semua syarat untuk sambungan dari perangkat pertama kami ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> broker </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menguji apakah klien kami dapat terhubung ke sana. Masukkan detail di jendela klien. </font></font><br>
<img width="1000" src="https://habrastorage.org/files/23e/469/94b/23e46994b94b4621b8aeb93a17fd5c5e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, klien berhasil terhubung ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Di sini Anda harus memperhatikan nama host. Dimulai dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID Organisasi yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diperoleh saat membuat </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet of Things Foundation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kolom </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User ID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> juga komposit dan dikodekan sebagai: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : &lt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organization ID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;: &lt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Device Type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;: &lt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Device ID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;. Bidang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nama Pengguna</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berisi string tetap</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">use-token-auth</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Topik pesan untuk broker </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tidak seperti broker </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak dapat berisi data sewenang-wenang. </font><font style="vertical-align: inherit;">Mereka dikodekan menurut aturan tertentu. </font><font style="vertical-align: inherit;">Aturan-aturan ini harus dipelajari dalam dokumentasi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet of Things Foundation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tangkapan layar menunjukkan salah satu topik yang mungkin valid. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repositori Proyek: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Indemsys/Delphi_MQTT_mosquitto</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id388231/">https://habr.com/ru/post/id388231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id388221/index.html">Seagate: Winchesters akan tinggal bersama kami selama 20 tahun lagi</a></li>
<li><a href="../id388223/index.html">Memoar robot manusiawi, bab 1-2, upaya kedua</a></li>
<li><a href="../id388225/index.html">Apa itu kristalografi evolusioner dan mengapa masa depan di belakangnya. Hampir rumit</a></li>
<li><a href="../id388227/index.html">Penelitian infografis: e-shop Tahun Baru online</a></li>
<li><a href="../id388229/index.html">Menggunakan iRidium untuk mengontrol sistem otomasi berdasarkan protokol Z-Wave</a></li>
<li><a href="../id388233/index.html">Bepergian melintasi Rusia mikro-elektronik (bagian akademik)</a></li>
<li><a href="../id388235/index.html">Volkswagen mengusulkan langkah-langkah perbaikan untuk mesin diesel yang diadopsi oleh pejabat Eropa</a></li>
<li><a href="../id388237/index.html">Polisi Inggris membentuk "geng karaoke" dari tiga penggemar karaoke tua</a></li>
<li><a href="../id388241/index.html">Mengapa perusahaan melakukan IPO: Pro dan Kontra</a></li>
<li><a href="../id388243/index.html">Pengawasan rumah dan penglihatan jarak jauh melalui Internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>