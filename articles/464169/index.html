<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõãÔ∏è ‚óΩÔ∏è üôçüèø Para argumentar: habiendo le√≠do hasta el final, comprender√° c√≥mo y por qu√© funciona exactamente GC üèä üë®üèª‚Äçüè´ üë®‚Äçüë®‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dir√© de inmediato: nunca espero una respuesta detallada a esta pregunta sobre la seguridad social. Esto es est√∫pido y en mi caso ego√≠sta. Sin embargo,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Para argumentar: habiendo le√≠do hasta el final, comprender√° c√≥mo y por qu√© funciona exactamente GC</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/clrium/blog/464169/"><p> Dir√© de inmediato: nunca espero una respuesta detallada a esta pregunta sobre la seguridad social.  Esto es est√∫pido y en mi caso ego√≠sta.  Sin embargo, en mi opini√≥n, adem√°s del inter√©s general en la plataforma, es muy √∫til saber c√≥mo funciona, porque  Esto elimina una serie de problemas.  Por ejemplo, excluye la opci√≥n cuando el desarrollador cree que <code>Dispose</code> se llama autom√°ticamente y no necesita llamarlo usted mismo.  O si el desarrollador tiene m√°s experiencia, lo ayuda autom√°ticamente, a nivel de memoria muscular, a escribir el c√≥digo que conduce a la menor cantidad de problemas. </p><br><p>  Otra pregunta que subjetivamente no me gusta es c√≥mo se explica su trabajo.  Por lo tanto, propongo un enfoque alternativo descrito en mi libro, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">.NET Platform Architecture</a> . </p><br><p>  Si vamos a comprender a fondo por qu√© se eligieron estos dos algoritmos de administraci√≥n de memoria: Barrido y Compacto, tendremos que considerar docenas de algoritmos de administraci√≥n de memoria que existen en el mundo: comenzando con diccionarios ordinarios y terminando con estructuras muy complejas sin bloqueo.  En cambio, dejando nuestros pensamientos sobre lo que es √∫til, simplemente <em>justificamos la</em> elecci√≥n y, por lo tanto, <em>entendemos</em> por qu√© la elecci√≥n se hizo de esa manera.  Ya no miramos el folleto de lanzamiento de refuerzo: tenemos en nuestras manos un conjunto completo de documentaci√≥n. </p><br><p>  La disputa es mutuamente beneficiosa: si no est√° clara, corregir√© los puntos poco claros del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">libro</a> , una peque√±a parte del cual es el texto dado. </p><br><p><img src="https://habrastorage.org/webt/sv/sw/_g/svsw_gfzggr2i1wk94ah_itbmqi.jpeg"></p><a name="habracut"></a><br><blockquote>  Eleg√≠ el formato del argumento para que sientas que los arquitectos de la plataforma y yo hemos llegado a las mismas conclusiones a las que llegaron los verdaderos arquitectos en la sede de Microsoft en Redmond. </blockquote><p>  En funci√≥n de la clasificaci√≥n de los objetos asignados en funci√≥n de su tama√±o, puede dividir el espacio para la asignaci√≥n de memoria en dos grandes secciones: un lugar con objetos de tama√±o inferior a un cierto umbral y un lugar con un tama√±o superior a este umbral y ver qu√© diferencia se puede hacer en la gesti√≥n de estos grupos (seg√∫n su tama√±o) y lo que viene de ello. </p><br><p>  Si consideramos la gesti√≥n de objetos " <em>peque√±os</em> " convencionalmente, podemos ver que si nos adherimos a la idea de almacenar informaci√≥n sobre cada objeto, nos resultar√° muy costoso mantener estructuras de datos de gesti√≥n de memoria que almacenar√°n enlaces a cada uno de esos objetos.  Al final, puede resultar que para almacenar informaci√≥n sobre un objeto, necesitar√° tanta memoria como el objeto en s√≠.  En cambio, debe considerar: si durante la recolecci√≥n de basura bailamos desde las ra√≠ces, profundizando en el gr√°fico a trav√©s de los campos salientes del objeto, y necesitamos un pasaje lineal a lo largo del mont√≥n solo para identificar objetos basura, ¬øes necesario que almacenemos informaci√≥n sobre cada objeto en los algoritmos de administraci√≥n de memoria?  La respuesta es obvia: no hay necesidad de esto.  Por lo tanto, podemos tratar de proceder del hecho de que no debemos almacenar dicha informaci√≥n: podemos pasar por un grupo linealmente, conociendo el tama√±o de cada objeto y moviendo el puntero cada vez por el tama√±o del siguiente objeto. </p><br><blockquote>  No hay estructuras de datos adicionales en el mont√≥n que mantienen punteros a cada objeto que controla el mont√≥n. </blockquote><p>  Sin embargo, cuando ya no necesitemos memoria, debemos liberarla.  Y al liberar memoria, nos resulta dif√≠cil confiar en el paso lineal del mont√≥n: es largo y no es efectivo.  Como resultado, llegamos a la conclusi√≥n de que necesitamos de alguna manera almacenar informaci√≥n sobre √°reas de memoria libre. </p><br><blockquote>  El mont√≥n tiene listas de memoria libre. </blockquote><p>  Si, como decidimos, almacenar informaci√≥n sobre √°reas libres, y al tiempo que liberamos memoria, estas √°reas eran demasiado peque√±as, entonces, ante todo, llegamos al mismo problema de almacenar informaci√≥n sobre √°reas libres que encontramos al considerar las ocupadas (si en los lados del objeto ocupado se liber√≥, para almacenar informaci√≥n sobre el mismo, es necesario en el peor de los casos 2/3 de su tama√±o. Puntero + tama√±o versus SyncBlockIndex + VMT + alg√∫n campo - en el caso del objeto).  Esto nuevamente suena un desperdicio, debes admitir: no siempre es buena suerte liberar un grupo de objetos que se siguen.  Por lo general, se liberan de manera ca√≥tica.  Pero a diferencia de los sitios ocupados, que no necesitamos buscar linealmente, necesitamos buscar sitios gratuitos porque cuando asignamos memoria, es posible que los necesitemos nuevamente.  Por lo tanto, surge un deseo completamente natural de reducir la fragmentaci√≥n y exprimir el mont√≥n, moviendo todas las √°reas ocupadas a lugares libres, formando as√≠ un √°rea grande del √°rea libre donde se puede asignar memoria. </p><br><blockquote>  De aqu√≠ nace la idea del algoritmo de compactaci√≥n. </blockquote><p>  Pero espera, dices.  Despu√©s de todo, esta operaci√≥n puede ser muy dif√≠cil.  Imagina que liberaste un objeto al principio del mont√≥n.  ¬øY qu√©, dices, necesitas mover todo?  Bueno, por supuesto, puedes so√±ar con el tema de las instrucciones vectoriales de la CPU, que puedes usar para copiar una gran √°rea ocupada de memoria.  Pero esto es solo el comienzo del trabajo.  Tambi√©n debemos fijar todos los punteros desde los campos de objetos a los objetos que han sufrido movimientos.  Esta operaci√≥n puede llevar mucho tiempo.  No, debemos proceder de otra cosa.  Por ejemplo, dividiendo todo el segmento de la memoria de almacenamiento din√°mico en sectores y trabajando con ellos por separado.  Si trabajamos por separado en cada sector (para la previsibilidad y la escalabilidad de esta previsibilidad, preferiblemente, tama√±os fijos), la idea de compresi√≥n no parece tan pesada: es suficiente para comprimir un solo sector e incluso puede comenzar a hablar sobre el tiempo que lleva comprimir uno de esos sectores . </p><br><p>  Ahora queda por entender sobre qu√© base dividir en sectores.  Aqu√≠ debemos pasar a la segunda clasificaci√≥n, que se introduce en la plataforma: el intercambio de memoria, basado en el tiempo de vida de sus elementos individuales. </p><br><p>  La divisi√≥n es simple: si tenemos en cuenta que asignaremos memoria a medida que aumenten las direcciones, los primeros objetos seleccionados se convertir√°n en los m√°s antiguos y los que est√©n en las direcciones principales se convertir√°n en los m√°s j√≥venes.  Adem√°s, al ser inteligente, puede llegar a la conclusi√≥n de que en las aplicaciones los objetos se dividen en dos grupos: aquellos que fueron creados para una larga vida y aquellos que fueron creados para vivir muy poco.  Por ejemplo, para almacenar temporalmente punteros a otros objetos en forma de colecci√≥n.  O los mismos objetos DTO.  En consecuencia, de vez en cuando, al apretar un mont√≥n, obtenemos una serie de objetos de larga vida, en las direcciones m√°s bajas y varios de corta duraci√≥n, en las personas mayores. </p><br><blockquote>  As√≠ hemos recibido <em>generaciones</em> . </blockquote><p>  Dividiendo la memoria en generaciones, tenemos la oportunidad de mirar con menos frecuencia los objetos de la generaci√≥n anterior, que se est√°n volviendo cada vez m√°s. </p><br><p>  Pero surge otra pregunta: si solo tenemos dos generaciones, tendremos problemas.  O intentaremos hacer que GC funcione sin enmascaramiento r√°pido: luego, el tama√±o de la generaci√≥n m√°s joven, intentaremos hacer el tama√±o m√≠nimo.  Como resultado, los objetos fallar√°n accidentalmente en la generaci√≥n anterior (si el GC funcion√≥ "en este momento, durante una asignaci√≥n furiosa de memoria para muchos objetos").  O, para minimizar la falla accidental, aumentaremos el tama√±o de la generaci√≥n m√°s joven.  Entonces, el GC en la generaci√≥n m√°s joven funcionar√° lo suficiente, ralentizando y ralentizando la aplicaci√≥n. </p><br><p>  La salida es la introducci√≥n de la generaci√≥n "media".  Adolescente  En otras palabras, si vive hasta la adolescencia, es m√°s probable que viva hasta la vejez.  La esencia de su introducci√≥n es lograr un equilibrio entre <em>obtener la generaci√≥n m√°s joven</em> y <em>m√°s peque√±a</em> y la <em>generaci√≥n</em> <em>m√°s estable m√°s antigua</em> , donde es mejor no tocar nada.  Esta es una zona donde el destino de los objetos a√∫n no se ha decidido.  La primera generaci√≥n (no olvidemos lo que pensamos desde cero) tambi√©n se crea peque√±a y GC se ve con menos frecuencia all√≠.  Por lo tanto, GC permite que los objetos que est√°n en la primera generaci√≥n temporal no entren en la generaci√≥n anterior, lo cual es extremadamente dif√≠cil de recolectar. </p><br><blockquote>  Entonces tenemos la idea de tres generaciones. </blockquote><p>  La siguiente capa de optimizaci√≥n es un intento de rechazar la compresi√≥n.  Despu√©s de todo, si no lo haces, nos deshacemos de una gran capa de trabajo.  Volvamos al tema de los sitios gratuitos. </p><br><p>  Si despu√©s de haber utilizado toda la memoria disponible en el mont√≥n y se ha llamado a GC, existe un deseo natural de rechazar la compresi√≥n a favor de asignar m√°s memoria dentro de las secciones liberadas si su tama√±o es suficiente para acomodar un cierto n√∫mero de objetos.  Aqu√≠ llegamos a la idea de un segundo algoritmo para liberar memoria en el GC, llamado <code>Sweep</code> : no comprimimos memoria, usamos vac√≠os de objetos liberados para colocar nuevos objetos </p><br><blockquote>  As√≠ que describimos y justificamos todos los conceptos b√°sicos de los algoritmos de GC. </blockquote><p>  Entonces, despu√©s de dos d√≠as, podemos sacar algunas conclusiones.  Seg√∫n tengo entendido, la mayor√≠a de las personas entienden la mayor parte del texto, o incluso la totalidad.  Algunas personas respondieron que no entend√≠an, algunas, respectivamente, entendieron parcialmente.  La disputa fue ganada por un equipo de lectores, aunque con un ligero margen, como dicen.  Pero, como dije, todos se beneficiar√°n de esto: el texto ser√° enmendado y complementado.  Adem√°s, actualizado en ambos lugares: tanto en el libro como aqu√≠, en el art√≠culo. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/97f/1d3/cf0/97f1d3cf0e2a6bf007066eb60a789c31.png"></a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/464169/">https://habr.com/ru/post/464169/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../464151/index.html">Victor Vyalichkin: "Libertad, igualdad, fraternidad est√°n solo en OpenStreetMap, donde todo est√° siempre a la vista"</a></li>
<li><a href="../464155/index.html">La IA ayuda a estudiar animales en √Åfrica</a></li>
<li><a href="../464161/index.html">SPAM y GDRP: ¬øc√≥mo hacer listas de correo "all√≠"?</a></li>
<li><a href="../464163/index.html">Esta palabra clave en JavaScript. Manual completo *</a></li>
<li><a href="../464165/index.html">Habr Weekly # 14 / Acerca de las reglas de comunicaci√≥n en los chats grupales, los monopolios y la protecci√≥n de los ni√±os contra la informaci√≥n peligrosa.</a></li>
<li><a href="../464171/index.html">Actualizaci√≥n de software de seguridad</a></li>
<li><a href="../464173/index.html">"Maldita galera", o donde las piernas crecen de la oficina lloriqueando</a></li>
<li><a href="../464177/index.html">El libro "Kotlin. Programaci√≥n para profesionales "</a></li>
<li><a href="../464179/index.html">Un standup en Yandex.Taxi, o lo que necesitas para ense√±arle al desarrollador del backend</a></li>
<li><a href="../464181/index.html">Poco: automatizaci√≥n de UI basada en Python para juegos m√≥viles como parte de AirTest IDE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>