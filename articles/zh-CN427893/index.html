<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ‡ ğŸš¼ ğŸšµğŸ½ Omega 2ä¸Šçš„è¡€è…¥èæ‹‰æˆ–ä¸‡åœ£èŠ‚ä¸Šçš„Pythonä»¤äººçª’æ¯ ğŸš„ ğŸº ğŸ‘©ğŸ»â€âš–ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¿™ä¸ªå‡æœŸæˆ‘ä»æ¥ä¸äº†è§£ã€‚ ä½†æ˜¯è¿™ä¸ªæƒ³æ³•è¯ç”Ÿäº†ã€‚ åˆ¶ä½œä¸€ä¸ªä»¤äººæ¯›éª¨æ‚šç„¶çš„å¨ƒå¨ƒï¼Œå®ƒçš„çœ¼ç›ä¼šé—ªé—ªå‘å…‰ï¼Œå‘å‡ºä»¤äººæ¯›éª¨æ‚šç„¶çš„å£°éŸ³ã€‚ 

 åœ¨æ­¤ä¹‹ä¸‹ï¼Œä¸€ä¸ªå‡‰çˆ½çš„å­©å­ä»¬çš„è„‘è¢‹ï¼ˆæ„Ÿè°¢å®‰ä¸œï¼‰å’Œæ¥è‡ªæ´‹è‘±çš„æ¯”èµ›å¸å¼•äº†ä¸€äº›ç‰¹æ®Šçš„é²¸é±¼ï¼Œè¿™æ˜¯è‰¯å¿ƒä¸å…è®¸æˆ‘è´­ä¹°çš„ã€‚ å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä¼šæ ¹æ®ä¸Šä¸€ç¯‡æ–‡ç« çš„ç»éªŒï¼Œåœ¨æ¬§ç±³èŒ„2ä¸Šä¸ºå¥³å­©è...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Omega 2ä¸Šçš„è¡€è…¥èæ‹‰æˆ–ä¸‡åœ£èŠ‚ä¸Šçš„Pythonä»¤äººçª’æ¯</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427893/">è¿™ä¸ªå‡æœŸæˆ‘ä»æ¥ä¸äº†è§£ã€‚ ä½†æ˜¯è¿™ä¸ªæƒ³æ³•è¯ç”Ÿäº†ã€‚ åˆ¶ä½œä¸€ä¸ªä»¤äººæ¯›éª¨æ‚šç„¶çš„å¨ƒå¨ƒï¼Œå®ƒçš„çœ¼ç›ä¼šé—ªé—ªå‘å…‰ï¼Œå‘å‡ºä»¤äººæ¯›éª¨æ‚šç„¶çš„å£°éŸ³ã€‚ <br><br><img src="https://habrastorage.org/webt/v_/j7/ng/v_j7ngyryzuvabfo6rnfi58atsu.gif" alt="å›¾ç‰‡" width="400" align="left"> åœ¨æ­¤ä¹‹ä¸‹ï¼Œä¸€ä¸ªå‡‰çˆ½çš„å­©å­ä»¬çš„è„‘è¢‹ï¼ˆæ„Ÿè°¢å®‰ä¸œï¼‰å’Œæ¥è‡ªæ´‹è‘±çš„æ¯”èµ›å¸å¼•äº†ä¸€äº›ç‰¹æ®Šçš„é²¸é±¼ï¼Œè¿™æ˜¯è‰¯å¿ƒä¸å…è®¸æˆ‘è´­ä¹°çš„ã€‚ å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä¼šæ ¹æ®ä¸Šä¸€ç¯‡æ–‡ç« çš„ç»éªŒï¼Œåœ¨æ¬§ç±³èŒ„2ä¸Šä¸ºå¥³å­©èæ‹‰ï¼ˆLolaï¼‰åšåŠ¨ã€‚ <br><br> è¯·å¯¹å¦‚ä½•é‡å¤è¿™æ ·çš„äº‹æƒ…æ„Ÿå…´è¶£çš„æ¯ä¸ªäººæ³¨æ„ã€‚ <br><a name="habracut"></a><br> æˆ‘ä»¬å°†éœ€è¦ï¼šä¸¤ä¸ªLEDï¼Œä¸€ä¸ªæ‰¬å£°å™¨ï¼Œä¸€ä¸ª12ä¼ç”µæºï¼Œä¸€ä¸ªè¿åŠ¨ä¼ æ„Ÿå™¨ï¼ˆä»…éœ€è¦12ä¼ï¼‰ï¼Œä¸€ä¸ª3.3ä¼ç”µæºè½¬æ¢å™¨ï¼Œä¸€ä¸ª5ä¼ç”µæºè½¬æ¢å™¨ï¼Œä¸€ä¸ªç®€å•çš„æ”¾å¤§å™¨ï¼ˆä»»ä½•å…·æœ‰3-12ä¼ç”µæºçš„Dç±»ï¼‰å’ŒOmega2ã€‚ä»ç„¶å¯ä»¥é€‰æ‹©ä½¿ç”¨USBé—ªå­˜é©±åŠ¨å™¨æˆ–sdå¡æ¥æ‰©å±•ç£ç›˜ç©ºé—´ã€‚ <br><br> æˆ‘ä»¬æ‰“å¼€ç©å¶ï¼Œç„¶åç”¨çƒ­ç†”èƒ¶å°†LEDæ”¾å…¥çœ¼ç›ï¼Œå°†æ‰¬å£°å™¨æ”¾å…¥å£éƒ¨ã€‚ æˆ‘ä»¬å°†é…çº¿è¾“å‡ºåˆ°Omega 2 <s>è„‘éƒ¨</s>åŒºåŸŸï¼Œå°†æ‰¬å£°å™¨ç„Šæ¥åˆ°æ”¾å¤§å™¨ï¼Œå°†LEDè¿æ¥åˆ°åœºæ•ˆåº”æ™¶ä½“ç®¡...é€šå¸¸ï¼Œæˆ‘ä»¬ç»„è£…ä»¥ä¸‹ç”µè·¯ã€‚ <br><br><img src="https://habrastorage.org/webt/kr/cu/oy/krcuoy7-0pdep9pj8wyl99hkou8.jpeg" alt="å›¾ç‰‡"><br><br> å¯ä»¥ä½¿ç”¨5ä¼å’Œ12ä¼çš„åŒç”µæºä»£æ›¿5ä¼è½¬æ¢å™¨ï¼Œè¯¥ç”µæºå°±è¿‘ä¸€äº›ã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œè½¬åˆ°è½¯ä»¶è®¾ç½®ã€‚ å¦‚æœè¦ä½¿ç”¨i2så£°éŸ³ï¼Œè¯·åœ¨omegaä¸Šå®‰è£…b193å›ºä»¶ï¼Œå› ä¸ºè¿›ä¸€æ­¥çš„i2sæ— æ³•æ­£å¸¸å·¥ä½œã€‚ å¦‚æœæ²¡æœ‰ï¼Œæ‚¨å¯ä»¥å°†å£°å¡æ’å…¥USBï¼Œç„¶å<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸ºæœ¬æŒ‡å—</a>é…ç½®å£°éŸ³ã€‚ å¦‚æœæ‚¨æŒ‰ç…§æˆ‘çš„æ–¹å¼åšï¼Œé‚£ä¹ˆæˆ‘åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™é‡Œ</a>å†™<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†</a>æœ‰å…³ä½¿ç”¨i2så£°éŸ³çš„ä¿¡æ¯ã€‚ æˆ‘ä»¬è¿æ¥åˆ°wifiå¹¶å¢åŠ äº†omega 2ç£ç›˜ç©ºé—´ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>çš„æ‰‹å†Œä¸­å¯¹æ­¤è¿›è¡Œäº†è¯¦ç»†è¯´æ˜ã€‚ <br><br><pre><code class="hljs sql">opkg <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> opkg <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> alsa-utils mpg123 python pyOnionGpio nano</code> </pre> <br> ç°åœ¨ï¼Œæˆ‘ä»¬çš„omegaå·²ç»å‡ ä¹å¯ä»¥è¯´è¯äº†ï¼Œå¹¶ä¸”ä»…èƒ½ä¸ºè¯¥ä¸šåŠ¡ç¼–å†™Pythonä»£ç ã€‚ é€»è¾‘å¾ˆç®€å•ã€‚ è¿åŠ¨ä¼ æ„Ÿå™¨æ‰“å¼€ä¸¤ä¸ªGPIOä¹‹é—´çš„ç”µè·¯ã€‚ å¯¹äºç¬¬ä¸€ä¸ªï¼Œæˆ‘ä»¬åœ¨æ‰“å¼€æ—¶è¾“å…¥é€»è¾‘å•å…ƒï¼ˆæˆ‘æœ‰15ä¸ªè¾“å‡ºï¼‰ï¼Œæˆ‘ä»¬è¯»å–äº†ç¬¬äºŒä¸ªå€¼ï¼ˆæˆ‘ä½¿ç”¨17ä¸ªè¾“å‡ºï¼‰ã€‚ å½“ä¸º0æ—¶ï¼ˆå› ä¸ºPIRä¼ æ„Ÿå™¨å·²è§¦å‘å¹¶æ‰“å¼€çº¿è·¯ï¼‰ï¼Œæˆ‘ä»¬å¼€å§‹æ’­æ”¾å¯æ€•çš„å£°éŸ³å¹¶é—ªçƒLEDã€‚ å…¶ä½™æ—¶é—´æˆ‘ä»¬ä¿æŒæ²‰é»˜ï¼Œä¸ç¢°ä»»ä½•äººã€‚ æ‰€æœ‰è¿™äº›çš„å®ç°çœ‹èµ·æ¥åƒè¿™æ ·ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> onionGpio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> subprocess <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random gpioOut = onionGpio.OnionGpio(<span class="hljs-number"><span class="hljs-number">15</span></span>) gpioOut.setOutputDirection(<span class="hljs-number"><span class="hljs-number">0</span></span>) gpioOut.setValue(<span class="hljs-number"><span class="hljs-number">1</span></span>) gpioObj = onionGpio.OnionGpio(<span class="hljs-number"><span class="hljs-number">17</span></span>) status = gpioObj.setInputDirection() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-comment"><span class="hljs-comment">#   value = gpioObj.getValue() #   if int(value)==0: cmd = "fast-gpio pwm 18 " + str(random.randint(5,15)) + " 50" subprocess.call(cmd, shell=True) cmd = "fast-gpio pwm 19 " + str(random.randint(2,10)) + " 50" subprocess.call(cmd, stdout=subprocess.PIPE, shell=True) cmd = "mpg123 -f 256 -C /mnt/sda1/" + str(random.randint(1,6)) + ".mp3" subprocess.call(cmd, shell=True) #   else: subprocess.call("fast-gpio set 18 0", shell=True) subprocess.call("fast-gpio set 19 0", shell=True)</span></span></code> </pre><br> ä»¤äººæ¯›éª¨æ‚šç„¶çš„å£°éŸ³æ–‡ä»¶ä»¥1.mp3ã€2.mp3çš„åç§°æ·»åŠ åˆ°/ mnt / sda1ï¼Œæˆ‘æœ‰6ä¸ªï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯éšæœºæ‰“å¼€çš„ã€‚  Omega 2çš„PWMè¾“å‡ºçš„é¢‘ç‡ä¹Ÿåˆ†åˆ«åœ¨å·¦çœ¼å’Œå³çœ¼ä¸‹éšæœºæ‰“å¼€ã€‚ å¯ä»¥ä½¿ç”¨ç¡¬ä»¶PWMï¼Œä½†æ˜¯è¿™é‡Œå¯èƒ½çš„é¢‘ç‡ä¸ç¨³å®šæ˜¯ä¸€ä¸ªåŠ å·ã€‚ ç„¶åæˆ‘ä»¬é€šè¿‡è¿è¡Œå‘½ä»¤<code>nano /etc/rc.local</code>åœ¨rc.localä¸­å†™ä¸¤è¡Œ <br><br><pre> <code class="hljs pgsql">omega2-ctrl gpiomux <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> i2s i2s python /mnt/sda1/<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>.py</code> </pre><br> æˆ‘æƒ³æ‚¨çŒœåˆ°äº†æˆ‘ä¸Šé¢å¼•ç”¨çš„è„šæœ¬ï¼Œå› æ­¤éœ€è¦å°†å…¶ä¿å­˜åœ¨ç›®å½•/ mnt / sda1ä¸‹ï¼Œåç§°ä¸º<i>start.py</i> ã€‚ <br><br> ä¸‹ä¸€æ­¥æ˜¯æœ€åä¸€æ­¥ã€‚ æœ€æœ‰åˆ›æ„çš„ã€‚ åŒ–å¦† æˆ‘åªæ˜¯é—®æˆ‘çš„å¦»å­ï¼ˆéª—å­ï¼‰ï¼Œå¥¹ç¡®å®å¾ˆé…·ã€‚ éå¸¸æ„Ÿè°¢ï¼ <br><br><img src="https://habrastorage.org/webt/tn/me/zh/tnmezhhstxnqumqhaeey7ni-vlu.jpeg" alt="å›¾ç‰‡"><br><br> æ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„è§†é¢‘ä¸­æŸ¥çœ‹å£°éŸ³çš„æ‰€æœ‰è¿ä½œæ–¹å¼ã€‚ è€å®è¯´ï¼Œåœ¨é»‘æš—ä¸­ï¼Œèæ‹‰çš„ã€Šç”·æ€§å¿ƒçµçš„é£Ÿè€…ã€‹çœ‹èµ·æ¥ä»¤äººæ¯›éª¨æ‚šç„¶ã€‚ å¸Œæœ›æ‚¨å–œæ¬¢ã€‚ æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼ <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/f-GnMWJSe6k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> æ‚¨åšäº†ä»€ä¹ˆå¯æ€•çš„è‡ªåˆ¶äº§å“ï¼Ÿ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN427893/">https://habr.com/ru/post/zh-CN427893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN427877/index.html">Rockstarç¼–ç¨‹è¯­è¨€ï¼šå½“ä»£ç çœ‹èµ·æ¥åƒæ‘‡æ»šæ–‡æœ¬æ—¶</a></li>
<li><a href="../zh-CN427879/index.html">æˆ‘å¦‚ä½•ä»Pythonåˆ‡æ¢åˆ°Juliaï¼ˆä»¥åŠä¸ºä»€ä¹ˆï¼‰</a></li>
<li><a href="../zh-CN427883/index.html">è™šæ‹ŸåŒ–ï¼Œå®¹å™¨å’ŒKubernetesç®€ä»‹ï¼š18ç§äº‘èµ„æº</a></li>
<li><a href="../zh-CN427889/index.html">é”™ï¼Œé”™ï¼Œé”™ï¼ ç¼“è§£DDoSçš„æ–¹æ³•</a></li>
<li><a href="../zh-CN427891/index.html">æ€ç§‘WebExä¼šè®®å¹³å°ä¸­çš„æ¼æ´å¯èƒ½ä½¿æ•°ç™¾ä¸‡äººå—åˆ°æ”»å‡»</a></li>
<li><a href="../zh-CN427895/index.html">ä»å¯åˆ†å‰²çš„æ•°æ®åº“ä¸­åˆ é™¤æ•°æ®</a></li>
<li><a href="../zh-CN427897/index.html">è§£æç£å…±æŒ¯æˆåƒä»ªIIï¼šMRIä¸­çš„è¶…ææ–™</a></li>
<li><a href="../zh-CN427899/index.html">JsonWriterSax-ç”¨äºåˆ›å»ºJSONçš„åº“</a></li>
<li><a href="../zh-CN427901/index.html">å¦‚ä½•ä¸ä½¿ç”¨Node.js Stream API</a></li>
<li><a href="../zh-CN427905/index.html">é»‘å®¢çœ¼ä¸­çš„é£Ÿç‰©å¼€é‡‡æˆ–åå­—è·¯å£</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>