<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚣 🌐 🕵🏾 Crea una aplicación de Android. Tarea con un asterisco 🧜🏿 🥜 🔚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! En el verano, hablé en el Summer Droid Meetup con un informe sobre la creación de una aplicación de Android. La versión del video se puede ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crea una aplicación de Android. Tarea con un asterisco</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/469771/"><img src="https://habrastorage.org/webt/-b/02/yh/-b02yhihv1wljls_lzryoh__sbe.png"><br><br>  Hola Habr!  En el verano, hablé en el Summer Droid Meetup con un informe sobre la creación de una aplicación de Android.  La versión del video se puede encontrar aquí: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habr.com/ru/company/funcorp/blog/462825</a> .  Y para aquellos que les gusta leer más, acabo de escribir este artículo. <br><br>  Se trata de lo que es: una aplicación de Android.  Recopilaremos de diferentes maneras ¡Hola, mundo !: comience desde la consola y vea qué sucede bajo el capó de los sistemas de compilación, luego regrese al pasado, recuerde a Maven y aprenda sobre las soluciones modernas de Bazel y Buck.  Y finalmente, todo esto es comparable. <br><a name="habracut"></a><br>  Pensamos en un posible cambio en el sistema de ensamblaje cuando comenzamos un nuevo proyecto.  Nos pareció que esta es una buena oportunidad para buscar algunas alternativas a Gradle.  Además, es más fácil hacer esto al principio que traducir un proyecto existente.  Los siguientes defectos de Gradle nos llevaron a este paso: <br><br><ul><li>  definitivamente tiene problemas con el ensamblaje incremental, aunque puede ver el progreso en esta dirección; </li><li>  le va mal con proyectos monolíticos muy grandes; </li><li>  sucede que un demonio comienza por mucho tiempo; </li><li>  exigente en la máquina en la que se está ejecutando. </li></ul><br><h2>  APK </h2><br>  En primer lugar, recuerde en qué consiste la aplicación de Android: código compilado, recursos y AndroidManifest.xml. <br><br><img src="https://habrastorage.org/webt/pe/do/sm/pedosmtvfcqralxv1td9d4xcjg0.jpeg"><br><br>  Las fuentes están en el archivo classes.dex (puede haber varios archivos, dependiendo del tamaño de la aplicación) en un formato dex especial con el que la máquina virtual Android puede trabajar.  Hoy es ART, en dispositivos más antiguos: Dalvik.  Además, puede encontrar la carpeta lib, donde las fuentes nativas están organizadas en subcarpetas.  Se nombrarán según la arquitectura del procesador de destino, por ejemplo x86, arm, etc.  Si usa exoplayer, entonces probablemente tenga lib.  Y la carpeta aidl, que contiene interfaces de comunicación entre procesos.  Serán útiles si necesita acceder a un servicio que se ejecuta en otro proceso.  Dichas interfaces se utilizan tanto en Android como en GooglePlayServices. <br><br>  Varios recursos no compilados como imágenes están en la carpeta res.  Todos los recursos compilados, como estilos, líneas, etc., se fusionan en un archivo resource.arsc.  En la carpeta de activos, por regla general, colocan todo lo que no cabe en los recursos, por ejemplo, fuentes personalizadas. <br><br>  Además de todo esto, el APK contiene AndroidManifest.xml.  En él, describimos varios componentes de la aplicación, como Actividad, Servicio, diferentes permisos, etc.  Se encuentra en forma binaria, y para mirar dentro, primero tendrá que convertirse en un archivo legible para humanos. <br><br><h2>  CONSOLA </h2><br>  Ahora que sabemos en qué consiste la aplicación, podemos intentar construir Hello, world!  desde la consola utilizando las herramientas que proporciona el SDK de Android.  Este es un paso bastante importante para comprender cómo funcionan los sistemas de compilación, porque todos dependen de estas utilidades en un grado u otro.  Como el proyecto está escrito en Kotlin, necesitamos su compilador para la línea de comando.  Es fácil de descargar por separado. <br><br>  El ensamblaje de la aplicación se puede dividir en los siguientes pasos: <br><br><ul><li>  Descargue y descomprima todas las bibliotecas de las que depende el proyecto.  En mi caso, esta es la biblioteca de compatibilidad con versiones anteriores de appcompat, que, a su vez, depende de appcompat-core, por lo que también la bombeamos; </li><li>  generar R.java.  Esta maravillosa clase contiene los identificadores de todos los recursos en la aplicación y se usa para acceder a ellos en código; </li><li>  compilamos las fuentes en bytecode y las traducimos a Dex, porque la máquina virtual de Android no sabe cómo trabajar con el bytecode habitual; </li><li>  empaquetamos todo en el APK, pero primero alineamos todos los recursos incompresibles, como las imágenes, en relación con el comienzo del archivo.  Esto permite que el precio de un aumento completamente insignificante en el tamaño del APK acelere significativamente su trabajo.  Por lo tanto, el sistema puede asignar recursos directamente a RAM utilizando la función mmap (). </li><li>  Firma la solicitud.  Este procedimiento protege la integridad del APK y confirma la autoría.  Y gracias a esto, por ejemplo, Play Market puede verificar que usted haya creado la aplicación. </li></ul><br><div class="spoiler">  <b class="spoiler_title">construir script</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">preparedir</span></span></span></span>() { rm -r -f <span class="hljs-variable"><span class="hljs-variable">$1</span></span> mkdir <span class="hljs-variable"><span class="hljs-variable">$1</span></span> } PROJ=<span class="hljs-string"><span class="hljs-string">"src/main"</span></span> LIBS=<span class="hljs-string"><span class="hljs-string">"libs"</span></span> LIBS_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$LIBS</span></span></span><span class="hljs-string">/out"</span></span> BUILD_TOOLS=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_HOME</span></span></span><span class="hljs-string">/build-tools/28.0.3"</span></span> ANDROID_JAR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_HOME</span></span></span><span class="hljs-string">/platforms/android-28/android.jar"</span></span> DEBUG_KEYSTORE=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo ~)</span></span></span><span class="hljs-string">/.android/debug.keystore"</span></span> GEN_DIR=<span class="hljs-string"><span class="hljs-string">"build/generated"</span></span> KOTLIN_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GEN_DIR</span></span></span><span class="hljs-string">/kotlin"</span></span> DEX_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GEN_DIR</span></span></span><span class="hljs-string">/dex"</span></span> OUT_DIR=<span class="hljs-string"><span class="hljs-string">"out"</span></span> libs_res=<span class="hljs-string"><span class="hljs-string">""</span></span> libs_classes=<span class="hljs-string"><span class="hljs-string">""</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$LIBS_OUT_DIR</span></span> aars=$(ls -p <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span> | grep -v /) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> filename <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$aars</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> DESTINATION=<span class="hljs-variable"><span class="hljs-variable">$LIBS_OUT_DIR</span></span>/<span class="hljs-variable"><span class="hljs-variable">${filename%.*}</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"unpacking </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$filename</span></span></span><span class="hljs-string"> into </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">"</span></span> unzip -o -q <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span>/<span class="hljs-variable"><span class="hljs-variable">$filename</span></span> -d <span class="hljs-variable"><span class="hljs-variable">$DESTINATION</span></span> libs_res=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_res</span></span></span><span class="hljs-string"> -S </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">/res"</span></span> libs_classes=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_classes</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">/classes.jar"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt package -f -m \ -J <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> \ -M <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/AndroidManifest.xml \ -S <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/res \ <span class="hljs-variable"><span class="hljs-variable">$libs_res</span></span> \ -I <span class="hljs-variable"><span class="hljs-variable">$ANDROID_JAR</span></span> --auto-add-overlay preparedir <span class="hljs-variable"><span class="hljs-variable">$KOTLIN_OUT_DIR</span></span> compiledKotlin=<span class="hljs-variable"><span class="hljs-variable">$KOTLIN_OUT_DIR</span></span>/compiled.jar kotlinc <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/java <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> -include-runtime \ -cp <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_JAR</span></span></span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_classes</span></span></span><span class="hljs-string">"</span></span>\ -d <span class="hljs-variable"><span class="hljs-variable">$compiledKotlin</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$DEX_OUT_DIR</span></span> dex=<span class="hljs-variable"><span class="hljs-variable">$DEX_OUT_DIR</span></span>/classes.dex <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/dx --dex --output=<span class="hljs-variable"><span class="hljs-variable">$dex</span></span> <span class="hljs-variable"><span class="hljs-variable">$compiledKotlin</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span> unaligned_apk=<span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span>/unaligned.apk <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt package -f -m \ -F <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> \ -M <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/AndroidManifest.xml \ -S <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/res \ <span class="hljs-variable"><span class="hljs-variable">$libs_res</span></span> \ -I <span class="hljs-variable"><span class="hljs-variable">$ANDROID_JAR</span></span> --auto-add-overlay cp <span class="hljs-variable"><span class="hljs-variable">$dex</span></span> . <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt add <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> classes.dex rm classes.dex aligned_apk=<span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span>/aligned.apk <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/zipalign -f 4 <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> <span class="hljs-variable"><span class="hljs-variable">$aligned_apk</span></span> <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/apksigner sign --ks <span class="hljs-variable"><span class="hljs-variable">$DEBUG_KEYSTORE</span></span> <span class="hljs-variable"><span class="hljs-variable">$aligned_apk</span></span></code> </pre> <br></div></div><br>  Según las figuras, resulta que un ensamblaje limpio tarda 7 segundos y el ensamblaje incremental no se queda atrás, porque no almacenamos en caché nada y reconstruimos todo cada vez. <br><br><h2>  Maven </h2><br>  Fue desarrollado por los chicos de la Apache Software Foundation para construir proyectos Java.  Las configuraciones de compilación se describen en XML.  Las primeras revisiones de Maven fueron recopiladas por Ant, y ahora han cambiado a la última versión estable. <br><br>  Pros de Maven: <br><br><ul><li>  Admite artefactos de ensamblaje de almacenamiento en caché, es decir  la construcción incremental debería ser más rápida que limpia; </li><li>  capaz de resolver dependencias de terceros.  Es decir  Cuando especifica una dependencia en una biblioteca de terceros en la configuración de Maven o Gradle, no necesita preocuparse de qué depende; </li><li>  Hay un montón de documentación detallada porque ha estado en el mercado durante bastante tiempo. </li><li>  y puede ser un mecanismo de compilación familiar si recientemente llegaste al mundo del desarrollo de Android desde el backend. </li></ul><br>  Contras de Maven: <br><br><ul><li>  Depende de la versión de Java instalada en la máquina en la que se realiza el ensamblaje; </li><li>  El complemento de Android ahora es compatible con desarrolladores externos: personalmente, considero que esto es un inconveniente muy significativo, porque un día pueden dejar de hacerlo; <br></li><li>  XML no es muy adecuado para describir configuraciones de compilación debido a su redundancia y complejidad; </li><li>  bueno, y como veremos más adelante, funciona más lento que Gradle, al menos en un proyecto de prueba. </li></ul><br>  Para compilar, necesitamos crear pom.xml, que contiene una descripción de nuestro proyecto.  En el encabezado, indique la información básica sobre el artefacto recopilado, así como la versión de Kotlin. <br><br><div class="spoiler">  <b class="spoiler_title">build config pom.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.example<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>myapplication<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>My Application<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.41<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.google.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.1.1.4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>process-sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.simpligility.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>android-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>28<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buildTools</span></span></span><span class="hljs-tag">&gt;</span></span>28.0.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buildTools</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnNonStandardStructure</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnNonStandardStructure</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  En términos de números, no todo es demasiado color de rosa.  Un ensamblaje limpio tarda unos 12 segundos, mientras que uno incremental - 10. Esto significa que Maven de alguna manera reutiliza artefactos de ensamblajes anteriores o, en mi opinión, es más probable que el complemento para construir un proyecto de Android impida que lo haga. <br><br>  Ahora están usando todo esto, creo, en primer lugar, los creadores del complemento son los chicos de la simplificación.  No se pudo encontrar información más confiable sobre este tema. <br><br><h2>  Bazel </h2><br>  Los ingenieros en las entrañas de Google inventaron a Bazel para construir sus proyectos y relativamente recientemente lo transfirieron a código abierto.  Para la descripción de las configuraciones de construcción, se usan Skylark o Starlark similares a Python, ambos nombres tienen un lugar para estar.  Se ensambla utilizando su propia versión estable más reciente. <br><br>  Pros de Bazel: <br><br><ul><li>  Soporte para diferentes lenguajes de programación.  Si cree en la documentación, entonces él sabe cómo recopilar proyectos para iOs, Android o incluso un back-end; </li><li>  Puede almacenar en caché los artefactos recopilados previamente </li><li>  capaz de trabajar con dependencias Maven; </li><li>  Bazel tiene muy buen apoyo, en mi opinión, para proyectos distribuidos.  Puede especificar revisiones específicas de repositorios git como dependencias, y las descargará y las almacenará en caché durante el proceso de compilación.  Para admitir la escalabilidad, Bazel puede, por ejemplo, distribuir varios objetivos en servidores de compilación basados ​​en la nube, lo que le permite construir rápidamente proyectos voluminosos. </li></ul><br>  Contras de Bazel: <br><br><ul><li>  todo este encanto es muy difícil de mantener, porque las configuraciones de compilación son muy detalladas y describen el ensamblaje en un nivel bajo; </li><li>  entre otras cosas, parece que Bazel ahora se está desarrollando activamente.  Debido a esto, algunos ejemplos no se recopilan, y los que se recopilan pueden usar la funcionalidad obsoleta, que está marcada como obsoleta; </li><li>  la documentación ahora también deja mucho que desear, especialmente cuando se compara con Gradle; </li><li>  En proyectos pequeños, el calentamiento y el análisis de configuraciones de compilación pueden llevar más tiempo que el ensamblaje en sí, lo cual no es bueno, en mi opinión. </li></ul><br>  Conceptualmente, la configuración básica de Bazel consiste en WORKSPACE, donde describimos todo tipo de cosas globales para un proyecto, y BUILD, que contiene objetivos directamente para el ensamblaje. <br>  Describamos el ESPACIO DE TRABAJO.  Como tenemos un proyecto de Android, lo primero que configuramos es el SDK de Android.  Además, aquí se importa una regla para descargar configuraciones.  Luego, dado que el proyecto está escrito en Kotlin, debemos especificar las reglas para ello.  Aquí hacemos esto, haciendo referencia a una revisión específica directamente desde el repositorio de git. <br><br><div class="spoiler">  <b class="spoiler_title">Espacio de trabajo</b> <div class="spoiler_text"><pre> <code class="python hljs">android_sdk_repository( name = <span class="hljs-string"><span class="hljs-string">"androidsdk"</span></span>, api_level = <span class="hljs-number"><span class="hljs-number">28</span></span>, build_tools_version = <span class="hljs-string"><span class="hljs-string">"28.0.3"</span></span> ) load(<span class="hljs-string"><span class="hljs-string">"@bazel_tools//tools/build_defs/repo:http.bzl"</span></span>, <span class="hljs-string"><span class="hljs-string">"http_archive"</span></span>) <span class="hljs-comment"><span class="hljs-comment"># # KOTLIN RULES # RULES_KOTLIN_VERSION = "990fcc53689c8b58b3229c7f628f843a60cb9f5c" http_archive( name = "io_bazel_rules_kotlin", url = "https://github.com/bazelbuild/rules_kotlin/archive/%s.zip" % RULES_KOTLIN_VERSION, strip_prefix = "rules_kotlin-%s" % RULES_KOTLIN_VERSION ) load("@io_bazel_rules_kotlin//kotlin:kotlin.bzl", "kotlin_repositories", "kt_register_toolchains") kotlin_repositories() kt_register_toolchains()</span></span></code> </pre><br></div></div><br>  Ahora comencemos con el BUILD. <br><br>  Primero importamos la regla para ensamblar Kotlin y describimos lo que queremos recolectar.  En nuestro caso, esta es una aplicación de Android, por lo que usamos android_binary, donde configuramos el manifiesto, SDK mínimo, etc.  Nuestra aplicación dependerá de la fuente, por lo que los mencionamos en los departamentos y pasamos a lo que son y dónde encontrarlos.  El código también dependerá de los recursos y la biblioteca appcompat.  Para los recursos, utilizamos el objetivo habitual para ensamblar fuentes de Android, pero solo le asignamos recursos sin clases de Java.  Y describimos un par de reglas que importan bibliotecas de terceros.  También menciona appcompat_core, del cual depende appcompat. <br><br><div class="spoiler">  <b class="spoiler_title">Construir</b> <div class="spoiler_text"><pre> <code class="python hljs">load(<span class="hljs-string"><span class="hljs-string">"@io_bazel_rules_kotlin//kotlin:kotlin.bzl"</span></span>, <span class="hljs-string"><span class="hljs-string">"kt_android_library"</span></span>) android_binary( name = <span class="hljs-string"><span class="hljs-string">"app"</span></span>, custom_package = <span class="hljs-string"><span class="hljs-string">"com.example.myapplication"</span></span>, manifest = <span class="hljs-string"><span class="hljs-string">"src/main/AndroidManifest.xml"</span></span>, manifest_values = { <span class="hljs-string"><span class="hljs-string">"minSdkVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"15"</span></span>, }, deps = [ <span class="hljs-string"><span class="hljs-string">":lib"</span></span>, ], ) kt_android_library( name = <span class="hljs-string"><span class="hljs-string">"lib"</span></span>, srcs = glob([<span class="hljs-string"><span class="hljs-string">"src/main/java/**/*"</span></span>]), deps = [ <span class="hljs-string"><span class="hljs-string">":res"</span></span>, <span class="hljs-string"><span class="hljs-string">":appcompat"</span></span>, ], ) android_library( name = <span class="hljs-string"><span class="hljs-string">"res"</span></span>, resource_files = glob([<span class="hljs-string"><span class="hljs-string">"src/main/res/**/*"</span></span>]), manifest = <span class="hljs-string"><span class="hljs-string">"src/main/AndroidManifest.xml"</span></span>, custom_package = <span class="hljs-string"><span class="hljs-string">"com.example.myapplication"</span></span>, ) aar_import( name = <span class="hljs-string"><span class="hljs-string">"appcompat"</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/appcompat.aar"</span></span>, deps = [ <span class="hljs-string"><span class="hljs-string">":appcompat_core"</span></span>, ] ) aar_import( name = <span class="hljs-string"><span class="hljs-string">"appcompat_core"</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/core.aar"</span></span>, )</code> </pre><br></div></div><br>  En números para un proyecto tan pequeño, todo parece triste.  Más de medio minuto para una construcción limpia ¡Hola, mundo!  - mucho  El tiempo de construcción incremental también está lejos de ser perfecto. <br><br>  Bazel es utilizado por sus creadores (Google) para algunos de sus proyectos, incluidos los servidores, así como Dropbox y Huawei, que recopilan aplicaciones móviles para ellos.  Y el famoso Dagger 2 también irá a Bazel. <br><br><h2>  Dólar </h2><br>  Fue inventado por desertores de Google a Facebook.  Usó Python para describir las configuraciones, y luego migró a Skylark mencionado hoy.  Él va, de repente, usando el sistema Ant. <br><br>  Buck Pros: <br><br><ul><li>  admite diferentes lenguajes de programación y puede compilar Andriod e iOS; </li><li>  Puede almacenar en caché los artefactos recopilados previamente </li><li>  Buck hizo su propia implementación de dex, que funciona más rápido que la estándar y se cuelga con el demonio del sistema.  Entonces ahorran tiempo en la inicialización de dex.  Los ingenieros realmente han optimizado mucho.  Por ejemplo, Buck no recopila código que depende de la biblioteca si la interfaz no ha cambiado al cambiar las partes internas de la biblioteca.  De manera similar para los recursos: si los identificadores no han cambiado, al cambiar los recursos, el código no se vuelve a ensamblar. </li><li>  Hay un complemento que puede ocultar a Buck detrás de la configuración de Gredlovsky.  Es decir  obtienes algo como un proyecto normal de Gradle, que en realidad se construye a través de Buck. </li></ul><br>  Contras de dinero: <br><br><ul><li>  Es tan difícil de mantener como Bazel.  Es decir  aquí también es necesario describir reglas de bajo nivel que describan claramente el proceso de ensamblaje; </li><li>  entre otras cosas, Buck no puede resolver las dependencias de Maven por sí solo. </li></ul><br>  Entonces, ¿qué significa la configuración de ensamblaje de Hello, world!  a través de dinero?  Aquí describimos un archivo de configuración, donde indicamos que queremos construir un proyecto de Android que se firmará con una clave de depuración.  La aplicación también dependerá de la fuente - lib en la matriz deps.  Luego viene el objetivo con la configuración de firma.  Estoy usando una clave de débito que viene con el SDK de Android.  Inmediatamente después de que sigue al objetivo, que recogerá las fuentes de Kotlin para nosotros.  Al igual que Bazel, depende de los recursos y las bibliotecas de compatibilidad. <br><br>  Los describimos  Hay un objetivo separado para los recursos en Buck, por lo que las bicicletas no son útiles.  Las siguientes son las reglas para las bibliotecas de terceros descargadas. <br><br><div class="spoiler">  <b class="spoiler_title">Construir</b> <div class="spoiler_text"><pre> <code class="python hljs">android_binary( name = <span class="hljs-string"><span class="hljs-string">'app'</span></span>, manifest = <span class="hljs-string"><span class="hljs-string">'src/main/AndroidManifest.xml'</span></span>, manifest_entries = { <span class="hljs-string"><span class="hljs-string">'min_sdk_version'</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span>, }, keystore = <span class="hljs-string"><span class="hljs-string">':debug_keystore'</span></span>, deps = [ <span class="hljs-string"><span class="hljs-string">':lib'</span></span>, ], ) keystore( name = <span class="hljs-string"><span class="hljs-string">'debug_keystore'</span></span>, store = <span class="hljs-string"><span class="hljs-string">'debug.keystore'</span></span>, properties = <span class="hljs-string"><span class="hljs-string">'debug.keystore.properties'</span></span>, ) android_library( name = <span class="hljs-string"><span class="hljs-string">'lib'</span></span>, srcs = glob([<span class="hljs-string"><span class="hljs-string">'src/main/java/*.kt'</span></span>]), deps = [ <span class="hljs-string"><span class="hljs-string">':res'</span></span>, <span class="hljs-string"><span class="hljs-string">':compat'</span></span>, <span class="hljs-string"><span class="hljs-string">':compat_core'</span></span>, ], language = <span class="hljs-string"><span class="hljs-string">'kotlin'</span></span>, ) android_resource( name = <span class="hljs-string"><span class="hljs-string">'res'</span></span>, res = <span class="hljs-string"><span class="hljs-string">"src/main/res"</span></span>, package = <span class="hljs-string"><span class="hljs-string">'com.example.myapplication'</span></span>, ) android_prebuilt_aar( name = <span class="hljs-string"><span class="hljs-string">'compat'</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/appcompat.aar"</span></span>, ) android_prebuilt_aar( name = <span class="hljs-string"><span class="hljs-string">'compat_core'</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/core.aar"</span></span>, )</code> </pre><br></div></div><br>  Todo esto va muy rápido.  Un conjunto limpio tarda un poco más de 7 segundos, mientras que un conjunto incremental es completamente invisible 200 milisegundos.  Creo que este es un muy buen resultado. <br><br>  Esto es lo que hace Facebook.  Además de su aplicación insignia, recopilan Facebook Messenger para ellos.  Y Uber, que creó el complemento para Gradle y Airbnb con Lyft. <br><br><h2>  Conclusiones </h2><br>  Ahora que hemos hablado sobre cada sistema de compilación, podemos compararlos entre sí usando el ejemplo ¡Hola, mundo!  El conjunto de la consola agrada con su estabilidad.  El tiempo de ejecución del script desde el terminal puede considerarse la referencia para el ensamblaje de compilaciones limpias, porque los costos de terceros para analizar scripts son mínimos aquí.  En este caso, llamaría a Maven un extraño obvio para un aumento extremadamente insignificante en el ensamblaje incremental.  Bazel analiza las configuraciones durante mucho tiempo e inicializa: existe la idea de que de alguna manera almacena en caché los resultados de la inicialización, porque su construcción incremental es mucho más rápida que la limpieza.  Buck es el líder indiscutible de esta colección.  Montaje muy rápido tanto limpio como incremental. <br><br><img src="https://habrastorage.org/webt/br/f3/_p/brf3_pzmfeixbecyexdghd5ivfs.jpeg"><br><br>  Ahora compare los pros y los contras.  No incluiré a Maven en la comparación, porque claramente pierde ante Gradle y casi nunca se usa en el mercado.  Combino a Buck y Bazel, porque tienen aproximadamente las mismas ventajas y desventajas. <br><br>  Entonces, sobre Gradle: <br><br><ul><li>  Lo primero y, en mi opinión, lo más importante es que es simple.  Muy simple; </li><li>  listo para usar, descarga y descarga dependencias; </li><li>  para él hay muchos entrenamientos y documentación diferentes; </li><li>  activamente apoyado por Google y la comunidad.  Gran integración con Android Studio, la herramienta de desarrollo insignia actual.  Y todas las nuevas características para crear una aplicación de Android aparecen por primera vez en Gradle. </li></ul><br>  Sobre Buck / Bazel: <br><br><ul><li>  Definitivamente puede ser muy rápido en comparación con Gradle.  Creo que esto es especialmente notable en proyectos muy grandes. </li><li>  Puede mantener un proyecto en el que habrá códigos fuente de iOS y Android, y ensamblarlos con un sistema de compilación.  Esto permite que algunas partes de la aplicación tienten entre plataformas.  Por ejemplo, así es como va el cromo; </li><li>  obligado a describir las dependencias en detalle y, por lo tanto, literalmente obligar al desarrollador a ser multi-modular. </li></ul><br>  No te olvides de los contras. <br><br>  Gradle paga por su simplicidad al ser lento e ineficiente. <br>  Buck / Bazel, por el contrario, debido a su velocidad, sufre la necesidad de describir el proceso de compilación en las configuraciones con más detalle.  Bueno, dado que aparecieron en el mercado relativamente recientemente, no hay mucha documentación y varias hojas de trucos. <br><br><h2>  iFUNNY </h2><br>  Quizás tengas una pregunta sobre cómo recolectamos iFunny.  Como muchos, usando Gradle.  Y hay razones para esto: <br><br><ol><li>  Todavía no está claro qué tipo de ganancia en velocidad de ensamblaje nos dará.  Una compilación limpia de iFunny tarda casi 3 minutos, y es incremental, aproximadamente un minuto, lo que en realidad no es muy largo. </li><li>  Las configuraciones de compilación de Buck o Bazel son más difíciles de mantener.  En el caso de Buck, también debe controlar la relevancia de las bibliotecas conectadas y las bibliotecas de las que dependen. </li><li>  Es muy costoso transferir un proyecto existente de Gradle a Buck / Bazel, especialmente en condiciones de ganancias incomprensibles. </li></ol><br>  Si su proyecto demorará más de 45 minutos y hay aproximadamente 20 personas en el equipo de desarrollo de Android, entonces tiene sentido pensar en cambiar el sistema de compilación.  Si tú y tu amigo están aserrando una startup, entonces usa Gradle y deja estos pensamientos. <br><br><img src="https://habrastorage.org/webt/ah/po/1o/ahpo1oen8smqi1ks_fdqfqeydea.jpeg"><br><br>  ¡Estaré encantado de discutir las perspectivas de alternativas a Gradle en los comentarios! <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace al proyecto</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/469771/">https://habr.com/ru/post/469771/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../469755/index.html">Cómo ser un buen programador</a></li>
<li><a href="../469757/index.html">Tecnología AR al servicio de la pintura.</a></li>
<li><a href="../469761/index.html">¿Cómo implementar análisis y no romper la aplicación?</a></li>
<li><a href="../469765/index.html">Los elogios se relajan y la crítica ofende: cómo evaluar el trabajo de otra persona, para que todos estén bien</a></li>
<li><a href="../469767/index.html">Cómo elegimos ServiceDesk. Parte 1</a></li>
<li><a href="../469775/index.html">Dibujar un sonido</a></li>
<li><a href="../469779/index.html">Meetup de Outdoor Future London Academy</a></li>
<li><a href="../469783/index.html">¿Por qué el futuro de la entrega aún puede estar detrás de las aeronaves?</a></li>
<li><a href="../469785/index.html">Intel's Use NUC - Gana el concurso NUC. Resultados y ganadores</a></li>
<li><a href="../469797/index.html">Solución Veeam PN y sus nuevas características en la versión 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>