<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>  叼 Crea una aplicaci贸n de Android. Tarea con un asterisco   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! En el verano, habl茅 en el Summer Droid Meetup con un informe sobre la creaci贸n de una aplicaci贸n de Android. La versi贸n del video se puede ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crea una aplicaci贸n de Android. Tarea con un asterisco</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/469771/"><img src="https://habrastorage.org/webt/-b/02/yh/-b02yhihv1wljls_lzryoh__sbe.png"><br><br>  Hola Habr!  En el verano, habl茅 en el Summer Droid Meetup con un informe sobre la creaci贸n de una aplicaci贸n de Android.  La versi贸n del video se puede encontrar aqu铆: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habr.com/ru/company/funcorp/blog/462825</a> .  Y para aquellos que les gusta leer m谩s, acabo de escribir este art铆culo. <br><br>  Se trata de lo que es: una aplicaci贸n de Android.  Recopilaremos de diferentes maneras 隆Hola, mundo !: comience desde la consola y vea qu茅 sucede bajo el cap贸 de los sistemas de compilaci贸n, luego regrese al pasado, recuerde a Maven y aprenda sobre las soluciones modernas de Bazel y Buck.  Y finalmente, todo esto es comparable. <br><a name="habracut"></a><br>  Pensamos en un posible cambio en el sistema de ensamblaje cuando comenzamos un nuevo proyecto.  Nos pareci贸 que esta es una buena oportunidad para buscar algunas alternativas a Gradle.  Adem谩s, es m谩s f谩cil hacer esto al principio que traducir un proyecto existente.  Los siguientes defectos de Gradle nos llevaron a este paso: <br><br><ul><li>  definitivamente tiene problemas con el ensamblaje incremental, aunque puede ver el progreso en esta direcci贸n; </li><li>  le va mal con proyectos monol铆ticos muy grandes; </li><li>  sucede que un demonio comienza por mucho tiempo; </li><li>  exigente en la m谩quina en la que se est谩 ejecutando. </li></ul><br><h2>  APK </h2><br>  En primer lugar, recuerde en qu茅 consiste la aplicaci贸n de Android: c贸digo compilado, recursos y AndroidManifest.xml. <br><br><img src="https://habrastorage.org/webt/pe/do/sm/pedosmtvfcqralxv1td9d4xcjg0.jpeg"><br><br>  Las fuentes est谩n en el archivo classes.dex (puede haber varios archivos, dependiendo del tama帽o de la aplicaci贸n) en un formato dex especial con el que la m谩quina virtual Android puede trabajar.  Hoy es ART, en dispositivos m谩s antiguos: Dalvik.  Adem谩s, puede encontrar la carpeta lib, donde las fuentes nativas est谩n organizadas en subcarpetas.  Se nombrar谩n seg煤n la arquitectura del procesador de destino, por ejemplo x86, arm, etc.  Si usa exoplayer, entonces probablemente tenga lib.  Y la carpeta aidl, que contiene interfaces de comunicaci贸n entre procesos.  Ser谩n 煤tiles si necesita acceder a un servicio que se ejecuta en otro proceso.  Dichas interfaces se utilizan tanto en Android como en GooglePlayServices. <br><br>  Varios recursos no compilados como im谩genes est谩n en la carpeta res.  Todos los recursos compilados, como estilos, l铆neas, etc., se fusionan en un archivo resource.arsc.  En la carpeta de activos, por regla general, colocan todo lo que no cabe en los recursos, por ejemplo, fuentes personalizadas. <br><br>  Adem谩s de todo esto, el APK contiene AndroidManifest.xml.  En 茅l, describimos varios componentes de la aplicaci贸n, como Actividad, Servicio, diferentes permisos, etc.  Se encuentra en forma binaria, y para mirar dentro, primero tendr谩 que convertirse en un archivo legible para humanos. <br><br><h2>  CONSOLA </h2><br>  Ahora que sabemos en qu茅 consiste la aplicaci贸n, podemos intentar construir Hello, world!  desde la consola utilizando las herramientas que proporciona el SDK de Android.  Este es un paso bastante importante para comprender c贸mo funcionan los sistemas de compilaci贸n, porque todos dependen de estas utilidades en un grado u otro.  Como el proyecto est谩 escrito en Kotlin, necesitamos su compilador para la l铆nea de comando.  Es f谩cil de descargar por separado. <br><br>  El ensamblaje de la aplicaci贸n se puede dividir en los siguientes pasos: <br><br><ul><li>  Descargue y descomprima todas las bibliotecas de las que depende el proyecto.  En mi caso, esta es la biblioteca de compatibilidad con versiones anteriores de appcompat, que, a su vez, depende de appcompat-core, por lo que tambi茅n la bombeamos; </li><li>  generar R.java.  Esta maravillosa clase contiene los identificadores de todos los recursos en la aplicaci贸n y se usa para acceder a ellos en c贸digo; </li><li>  compilamos las fuentes en bytecode y las traducimos a Dex, porque la m谩quina virtual de Android no sabe c贸mo trabajar con el bytecode habitual; </li><li>  empaquetamos todo en el APK, pero primero alineamos todos los recursos incompresibles, como las im谩genes, en relaci贸n con el comienzo del archivo.  Esto permite que el precio de un aumento completamente insignificante en el tama帽o del APK acelere significativamente su trabajo.  Por lo tanto, el sistema puede asignar recursos directamente a RAM utilizando la funci贸n mmap (). </li><li>  Firma la solicitud.  Este procedimiento protege la integridad del APK y confirma la autor铆a.  Y gracias a esto, por ejemplo, Play Market puede verificar que usted haya creado la aplicaci贸n. </li></ul><br><div class="spoiler">  <b class="spoiler_title">construir script</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">preparedir</span></span></span></span>() { rm -r -f <span class="hljs-variable"><span class="hljs-variable">$1</span></span> mkdir <span class="hljs-variable"><span class="hljs-variable">$1</span></span> } PROJ=<span class="hljs-string"><span class="hljs-string">"src/main"</span></span> LIBS=<span class="hljs-string"><span class="hljs-string">"libs"</span></span> LIBS_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$LIBS</span></span></span><span class="hljs-string">/out"</span></span> BUILD_TOOLS=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_HOME</span></span></span><span class="hljs-string">/build-tools/28.0.3"</span></span> ANDROID_JAR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_HOME</span></span></span><span class="hljs-string">/platforms/android-28/android.jar"</span></span> DEBUG_KEYSTORE=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo ~)</span></span></span><span class="hljs-string">/.android/debug.keystore"</span></span> GEN_DIR=<span class="hljs-string"><span class="hljs-string">"build/generated"</span></span> KOTLIN_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GEN_DIR</span></span></span><span class="hljs-string">/kotlin"</span></span> DEX_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GEN_DIR</span></span></span><span class="hljs-string">/dex"</span></span> OUT_DIR=<span class="hljs-string"><span class="hljs-string">"out"</span></span> libs_res=<span class="hljs-string"><span class="hljs-string">""</span></span> libs_classes=<span class="hljs-string"><span class="hljs-string">""</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$LIBS_OUT_DIR</span></span> aars=$(ls -p <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span> | grep -v /) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> filename <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$aars</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> DESTINATION=<span class="hljs-variable"><span class="hljs-variable">$LIBS_OUT_DIR</span></span>/<span class="hljs-variable"><span class="hljs-variable">${filename%.*}</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"unpacking </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$filename</span></span></span><span class="hljs-string"> into </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">"</span></span> unzip -o -q <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span>/<span class="hljs-variable"><span class="hljs-variable">$filename</span></span> -d <span class="hljs-variable"><span class="hljs-variable">$DESTINATION</span></span> libs_res=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_res</span></span></span><span class="hljs-string"> -S </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">/res"</span></span> libs_classes=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_classes</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">/classes.jar"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt package -f -m \ -J <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> \ -M <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/AndroidManifest.xml \ -S <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/res \ <span class="hljs-variable"><span class="hljs-variable">$libs_res</span></span> \ -I <span class="hljs-variable"><span class="hljs-variable">$ANDROID_JAR</span></span> --auto-add-overlay preparedir <span class="hljs-variable"><span class="hljs-variable">$KOTLIN_OUT_DIR</span></span> compiledKotlin=<span class="hljs-variable"><span class="hljs-variable">$KOTLIN_OUT_DIR</span></span>/compiled.jar kotlinc <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/java <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> -include-runtime \ -cp <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_JAR</span></span></span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_classes</span></span></span><span class="hljs-string">"</span></span>\ -d <span class="hljs-variable"><span class="hljs-variable">$compiledKotlin</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$DEX_OUT_DIR</span></span> dex=<span class="hljs-variable"><span class="hljs-variable">$DEX_OUT_DIR</span></span>/classes.dex <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/dx --dex --output=<span class="hljs-variable"><span class="hljs-variable">$dex</span></span> <span class="hljs-variable"><span class="hljs-variable">$compiledKotlin</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span> unaligned_apk=<span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span>/unaligned.apk <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt package -f -m \ -F <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> \ -M <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/AndroidManifest.xml \ -S <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/res \ <span class="hljs-variable"><span class="hljs-variable">$libs_res</span></span> \ -I <span class="hljs-variable"><span class="hljs-variable">$ANDROID_JAR</span></span> --auto-add-overlay cp <span class="hljs-variable"><span class="hljs-variable">$dex</span></span> . <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt add <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> classes.dex rm classes.dex aligned_apk=<span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span>/aligned.apk <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/zipalign -f 4 <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> <span class="hljs-variable"><span class="hljs-variable">$aligned_apk</span></span> <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/apksigner sign --ks <span class="hljs-variable"><span class="hljs-variable">$DEBUG_KEYSTORE</span></span> <span class="hljs-variable"><span class="hljs-variable">$aligned_apk</span></span></code> </pre> <br></div></div><br>  Seg煤n las figuras, resulta que un ensamblaje limpio tarda 7 segundos y el ensamblaje incremental no se queda atr谩s, porque no almacenamos en cach茅 nada y reconstruimos todo cada vez. <br><br><h2>  Maven </h2><br>  Fue desarrollado por los chicos de la Apache Software Foundation para construir proyectos Java.  Las configuraciones de compilaci贸n se describen en XML.  Las primeras revisiones de Maven fueron recopiladas por Ant, y ahora han cambiado a la 煤ltima versi贸n estable. <br><br>  Pros de Maven: <br><br><ul><li>  Admite artefactos de ensamblaje de almacenamiento en cach茅, es decir  la construcci贸n incremental deber铆a ser m谩s r谩pida que limpia; </li><li>  capaz de resolver dependencias de terceros.  Es decir  Cuando especifica una dependencia en una biblioteca de terceros en la configuraci贸n de Maven o Gradle, no necesita preocuparse de qu茅 depende; </li><li>  Hay un mont贸n de documentaci贸n detallada porque ha estado en el mercado durante bastante tiempo. </li><li>  y puede ser un mecanismo de compilaci贸n familiar si recientemente llegaste al mundo del desarrollo de Android desde el backend. </li></ul><br>  Contras de Maven: <br><br><ul><li>  Depende de la versi贸n de Java instalada en la m谩quina en la que se realiza el ensamblaje; </li><li>  El complemento de Android ahora es compatible con desarrolladores externos: personalmente, considero que esto es un inconveniente muy significativo, porque un d铆a pueden dejar de hacerlo; <br></li><li>  XML no es muy adecuado para describir configuraciones de compilaci贸n debido a su redundancia y complejidad; </li><li>  bueno, y como veremos m谩s adelante, funciona m谩s lento que Gradle, al menos en un proyecto de prueba. </li></ul><br>  Para compilar, necesitamos crear pom.xml, que contiene una descripci贸n de nuestro proyecto.  En el encabezado, indique la informaci贸n b谩sica sobre el artefacto recopilado, as铆 como la versi贸n de Kotlin. <br><br><div class="spoiler">  <b class="spoiler_title">build config pom.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.example<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>myapplication<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>My Application<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.41<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.google.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.1.1.4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>process-sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.simpligility.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>android-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>28<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buildTools</span></span></span><span class="hljs-tag">&gt;</span></span>28.0.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buildTools</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnNonStandardStructure</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnNonStandardStructure</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  En t茅rminos de n煤meros, no todo es demasiado color de rosa.  Un ensamblaje limpio tarda unos 12 segundos, mientras que uno incremental - 10. Esto significa que Maven de alguna manera reutiliza artefactos de ensamblajes anteriores o, en mi opini贸n, es m谩s probable que el complemento para construir un proyecto de Android impida que lo haga. <br><br>  Ahora est谩n usando todo esto, creo, en primer lugar, los creadores del complemento son los chicos de la simplificaci贸n.  No se pudo encontrar informaci贸n m谩s confiable sobre este tema. <br><br><h2>  Bazel </h2><br>  Los ingenieros en las entra帽as de Google inventaron a Bazel para construir sus proyectos y relativamente recientemente lo transfirieron a c贸digo abierto.  Para la descripci贸n de las configuraciones de construcci贸n, se usan Skylark o Starlark similares a Python, ambos nombres tienen un lugar para estar.  Se ensambla utilizando su propia versi贸n estable m谩s reciente. <br><br>  Pros de Bazel: <br><br><ul><li>  Soporte para diferentes lenguajes de programaci贸n.  Si cree en la documentaci贸n, entonces 茅l sabe c贸mo recopilar proyectos para iOs, Android o incluso un back-end; </li><li>  Puede almacenar en cach茅 los artefactos recopilados previamente </li><li>  capaz de trabajar con dependencias Maven; </li><li>  Bazel tiene muy buen apoyo, en mi opini贸n, para proyectos distribuidos.  Puede especificar revisiones espec铆ficas de repositorios git como dependencias, y las descargar谩 y las almacenar谩 en cach茅 durante el proceso de compilaci贸n.  Para admitir la escalabilidad, Bazel puede, por ejemplo, distribuir varios objetivos en servidores de compilaci贸n basados en la nube, lo que le permite construir r谩pidamente proyectos voluminosos. </li></ul><br>  Contras de Bazel: <br><br><ul><li>  todo este encanto es muy dif铆cil de mantener, porque las configuraciones de compilaci贸n son muy detalladas y describen el ensamblaje en un nivel bajo; </li><li>  entre otras cosas, parece que Bazel ahora se est谩 desarrollando activamente.  Debido a esto, algunos ejemplos no se recopilan, y los que se recopilan pueden usar la funcionalidad obsoleta, que est谩 marcada como obsoleta; </li><li>  la documentaci贸n ahora tambi茅n deja mucho que desear, especialmente cuando se compara con Gradle; </li><li>  En proyectos peque帽os, el calentamiento y el an谩lisis de configuraciones de compilaci贸n pueden llevar m谩s tiempo que el ensamblaje en s铆, lo cual no es bueno, en mi opini贸n. </li></ul><br>  Conceptualmente, la configuraci贸n b谩sica de Bazel consiste en WORKSPACE, donde describimos todo tipo de cosas globales para un proyecto, y BUILD, que contiene objetivos directamente para el ensamblaje. <br>  Describamos el ESPACIO DE TRABAJO.  Como tenemos un proyecto de Android, lo primero que configuramos es el SDK de Android.  Adem谩s, aqu铆 se importa una regla para descargar configuraciones.  Luego, dado que el proyecto est谩 escrito en Kotlin, debemos especificar las reglas para ello.  Aqu铆 hacemos esto, haciendo referencia a una revisi贸n espec铆fica directamente desde el repositorio de git. <br><br><div class="spoiler">  <b class="spoiler_title">Espacio de trabajo</b> <div class="spoiler_text"><pre> <code class="python hljs">android_sdk_repository( name = <span class="hljs-string"><span class="hljs-string">"androidsdk"</span></span>, api_level = <span class="hljs-number"><span class="hljs-number">28</span></span>, build_tools_version = <span class="hljs-string"><span class="hljs-string">"28.0.3"</span></span> ) load(<span class="hljs-string"><span class="hljs-string">"@bazel_tools//tools/build_defs/repo:http.bzl"</span></span>, <span class="hljs-string"><span class="hljs-string">"http_archive"</span></span>) <span class="hljs-comment"><span class="hljs-comment"># # KOTLIN RULES # RULES_KOTLIN_VERSION = "990fcc53689c8b58b3229c7f628f843a60cb9f5c" http_archive( name = "io_bazel_rules_kotlin", url = "https://github.com/bazelbuild/rules_kotlin/archive/%s.zip" % RULES_KOTLIN_VERSION, strip_prefix = "rules_kotlin-%s" % RULES_KOTLIN_VERSION ) load("@io_bazel_rules_kotlin//kotlin:kotlin.bzl", "kotlin_repositories", "kt_register_toolchains") kotlin_repositories() kt_register_toolchains()</span></span></code> </pre><br></div></div><br>  Ahora comencemos con el BUILD. <br><br>  Primero importamos la regla para ensamblar Kotlin y describimos lo que queremos recolectar.  En nuestro caso, esta es una aplicaci贸n de Android, por lo que usamos android_binary, donde configuramos el manifiesto, SDK m铆nimo, etc.  Nuestra aplicaci贸n depender谩 de la fuente, por lo que los mencionamos en los departamentos y pasamos a lo que son y d贸nde encontrarlos.  El c贸digo tambi茅n depender谩 de los recursos y la biblioteca appcompat.  Para los recursos, utilizamos el objetivo habitual para ensamblar fuentes de Android, pero solo le asignamos recursos sin clases de Java.  Y describimos un par de reglas que importan bibliotecas de terceros.  Tambi茅n menciona appcompat_core, del cual depende appcompat. <br><br><div class="spoiler">  <b class="spoiler_title">Construir</b> <div class="spoiler_text"><pre> <code class="python hljs">load(<span class="hljs-string"><span class="hljs-string">"@io_bazel_rules_kotlin//kotlin:kotlin.bzl"</span></span>, <span class="hljs-string"><span class="hljs-string">"kt_android_library"</span></span>) android_binary( name = <span class="hljs-string"><span class="hljs-string">"app"</span></span>, custom_package = <span class="hljs-string"><span class="hljs-string">"com.example.myapplication"</span></span>, manifest = <span class="hljs-string"><span class="hljs-string">"src/main/AndroidManifest.xml"</span></span>, manifest_values = { <span class="hljs-string"><span class="hljs-string">"minSdkVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"15"</span></span>, }, deps = [ <span class="hljs-string"><span class="hljs-string">":lib"</span></span>, ], ) kt_android_library( name = <span class="hljs-string"><span class="hljs-string">"lib"</span></span>, srcs = glob([<span class="hljs-string"><span class="hljs-string">"src/main/java/**/*"</span></span>]), deps = [ <span class="hljs-string"><span class="hljs-string">":res"</span></span>, <span class="hljs-string"><span class="hljs-string">":appcompat"</span></span>, ], ) android_library( name = <span class="hljs-string"><span class="hljs-string">"res"</span></span>, resource_files = glob([<span class="hljs-string"><span class="hljs-string">"src/main/res/**/*"</span></span>]), manifest = <span class="hljs-string"><span class="hljs-string">"src/main/AndroidManifest.xml"</span></span>, custom_package = <span class="hljs-string"><span class="hljs-string">"com.example.myapplication"</span></span>, ) aar_import( name = <span class="hljs-string"><span class="hljs-string">"appcompat"</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/appcompat.aar"</span></span>, deps = [ <span class="hljs-string"><span class="hljs-string">":appcompat_core"</span></span>, ] ) aar_import( name = <span class="hljs-string"><span class="hljs-string">"appcompat_core"</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/core.aar"</span></span>, )</code> </pre><br></div></div><br>  En n煤meros para un proyecto tan peque帽o, todo parece triste.  M谩s de medio minuto para una construcci贸n limpia 隆Hola, mundo!  - mucho  El tiempo de construcci贸n incremental tambi茅n est谩 lejos de ser perfecto. <br><br>  Bazel es utilizado por sus creadores (Google) para algunos de sus proyectos, incluidos los servidores, as铆 como Dropbox y Huawei, que recopilan aplicaciones m贸viles para ellos.  Y el famoso Dagger 2 tambi茅n ir谩 a Bazel. <br><br><h2>  D贸lar </h2><br>  Fue inventado por desertores de Google a Facebook.  Us贸 Python para describir las configuraciones, y luego migr贸 a Skylark mencionado hoy.  l va, de repente, usando el sistema Ant. <br><br>  Buck Pros: <br><br><ul><li>  admite diferentes lenguajes de programaci贸n y puede compilar Andriod e iOS; </li><li>  Puede almacenar en cach茅 los artefactos recopilados previamente </li><li>  Buck hizo su propia implementaci贸n de dex, que funciona m谩s r谩pido que la est谩ndar y se cuelga con el demonio del sistema.  Entonces ahorran tiempo en la inicializaci贸n de dex.  Los ingenieros realmente han optimizado mucho.  Por ejemplo, Buck no recopila c贸digo que depende de la biblioteca si la interfaz no ha cambiado al cambiar las partes internas de la biblioteca.  De manera similar para los recursos: si los identificadores no han cambiado, al cambiar los recursos, el c贸digo no se vuelve a ensamblar. </li><li>  Hay un complemento que puede ocultar a Buck detr谩s de la configuraci贸n de Gredlovsky.  Es decir  obtienes algo como un proyecto normal de Gradle, que en realidad se construye a trav茅s de Buck. </li></ul><br>  Contras de dinero: <br><br><ul><li>  Es tan dif铆cil de mantener como Bazel.  Es decir  aqu铆 tambi茅n es necesario describir reglas de bajo nivel que describan claramente el proceso de ensamblaje; </li><li>  entre otras cosas, Buck no puede resolver las dependencias de Maven por s铆 solo. </li></ul><br>  Entonces, 驴qu茅 significa la configuraci贸n de ensamblaje de Hello, world!  a trav茅s de dinero?  Aqu铆 describimos un archivo de configuraci贸n, donde indicamos que queremos construir un proyecto de Android que se firmar谩 con una clave de depuraci贸n.  La aplicaci贸n tambi茅n depender谩 de la fuente - lib en la matriz deps.  Luego viene el objetivo con la configuraci贸n de firma.  Estoy usando una clave de d茅bito que viene con el SDK de Android.  Inmediatamente despu茅s de que sigue al objetivo, que recoger谩 las fuentes de Kotlin para nosotros.  Al igual que Bazel, depende de los recursos y las bibliotecas de compatibilidad. <br><br>  Los describimos  Hay un objetivo separado para los recursos en Buck, por lo que las bicicletas no son 煤tiles.  Las siguientes son las reglas para las bibliotecas de terceros descargadas. <br><br><div class="spoiler">  <b class="spoiler_title">Construir</b> <div class="spoiler_text"><pre> <code class="python hljs">android_binary( name = <span class="hljs-string"><span class="hljs-string">'app'</span></span>, manifest = <span class="hljs-string"><span class="hljs-string">'src/main/AndroidManifest.xml'</span></span>, manifest_entries = { <span class="hljs-string"><span class="hljs-string">'min_sdk_version'</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span>, }, keystore = <span class="hljs-string"><span class="hljs-string">':debug_keystore'</span></span>, deps = [ <span class="hljs-string"><span class="hljs-string">':lib'</span></span>, ], ) keystore( name = <span class="hljs-string"><span class="hljs-string">'debug_keystore'</span></span>, store = <span class="hljs-string"><span class="hljs-string">'debug.keystore'</span></span>, properties = <span class="hljs-string"><span class="hljs-string">'debug.keystore.properties'</span></span>, ) android_library( name = <span class="hljs-string"><span class="hljs-string">'lib'</span></span>, srcs = glob([<span class="hljs-string"><span class="hljs-string">'src/main/java/*.kt'</span></span>]), deps = [ <span class="hljs-string"><span class="hljs-string">':res'</span></span>, <span class="hljs-string"><span class="hljs-string">':compat'</span></span>, <span class="hljs-string"><span class="hljs-string">':compat_core'</span></span>, ], language = <span class="hljs-string"><span class="hljs-string">'kotlin'</span></span>, ) android_resource( name = <span class="hljs-string"><span class="hljs-string">'res'</span></span>, res = <span class="hljs-string"><span class="hljs-string">"src/main/res"</span></span>, package = <span class="hljs-string"><span class="hljs-string">'com.example.myapplication'</span></span>, ) android_prebuilt_aar( name = <span class="hljs-string"><span class="hljs-string">'compat'</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/appcompat.aar"</span></span>, ) android_prebuilt_aar( name = <span class="hljs-string"><span class="hljs-string">'compat_core'</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/core.aar"</span></span>, )</code> </pre><br></div></div><br>  Todo esto va muy r谩pido.  Un conjunto limpio tarda un poco m谩s de 7 segundos, mientras que un conjunto incremental es completamente invisible 200 milisegundos.  Creo que este es un muy buen resultado. <br><br>  Esto es lo que hace Facebook.  Adem谩s de su aplicaci贸n insignia, recopilan Facebook Messenger para ellos.  Y Uber, que cre贸 el complemento para Gradle y Airbnb con Lyft. <br><br><h2>  Conclusiones </h2><br>  Ahora que hemos hablado sobre cada sistema de compilaci贸n, podemos compararlos entre s铆 usando el ejemplo 隆Hola, mundo!  El conjunto de la consola agrada con su estabilidad.  El tiempo de ejecuci贸n del script desde el terminal puede considerarse la referencia para el ensamblaje de compilaciones limpias, porque los costos de terceros para analizar scripts son m铆nimos aqu铆.  En este caso, llamar铆a a Maven un extra帽o obvio para un aumento extremadamente insignificante en el ensamblaje incremental.  Bazel analiza las configuraciones durante mucho tiempo e inicializa: existe la idea de que de alguna manera almacena en cach茅 los resultados de la inicializaci贸n, porque su construcci贸n incremental es mucho m谩s r谩pida que la limpieza.  Buck es el l铆der indiscutible de esta colecci贸n.  Montaje muy r谩pido tanto limpio como incremental. <br><br><img src="https://habrastorage.org/webt/br/f3/_p/brf3_pzmfeixbecyexdghd5ivfs.jpeg"><br><br>  Ahora compare los pros y los contras.  No incluir茅 a Maven en la comparaci贸n, porque claramente pierde ante Gradle y casi nunca se usa en el mercado.  Combino a Buck y Bazel, porque tienen aproximadamente las mismas ventajas y desventajas. <br><br>  Entonces, sobre Gradle: <br><br><ul><li>  Lo primero y, en mi opini贸n, lo m谩s importante es que es simple.  Muy simple; </li><li>  listo para usar, descarga y descarga dependencias; </li><li>  para 茅l hay muchos entrenamientos y documentaci贸n diferentes; </li><li>  activamente apoyado por Google y la comunidad.  Gran integraci贸n con Android Studio, la herramienta de desarrollo insignia actual.  Y todas las nuevas caracter铆sticas para crear una aplicaci贸n de Android aparecen por primera vez en Gradle. </li></ul><br>  Sobre Buck / Bazel: <br><br><ul><li>  Definitivamente puede ser muy r谩pido en comparaci贸n con Gradle.  Creo que esto es especialmente notable en proyectos muy grandes. </li><li>  Puede mantener un proyecto en el que habr谩 c贸digos fuente de iOS y Android, y ensamblarlos con un sistema de compilaci贸n.  Esto permite que algunas partes de la aplicaci贸n tienten entre plataformas.  Por ejemplo, as铆 es como va el cromo; </li><li>  obligado a describir las dependencias en detalle y, por lo tanto, literalmente obligar al desarrollador a ser multi-modular. </li></ul><br>  No te olvides de los contras. <br><br>  Gradle paga por su simplicidad al ser lento e ineficiente. <br>  Buck / Bazel, por el contrario, debido a su velocidad, sufre la necesidad de describir el proceso de compilaci贸n en las configuraciones con m谩s detalle.  Bueno, dado que aparecieron en el mercado relativamente recientemente, no hay mucha documentaci贸n y varias hojas de trucos. <br><br><h2>  iFUNNY </h2><br>  Quiz谩s tengas una pregunta sobre c贸mo recolectamos iFunny.  Como muchos, usando Gradle.  Y hay razones para esto: <br><br><ol><li>  Todav铆a no est谩 claro qu茅 tipo de ganancia en velocidad de ensamblaje nos dar谩.  Una compilaci贸n limpia de iFunny tarda casi 3 minutos, y es incremental, aproximadamente un minuto, lo que en realidad no es muy largo. </li><li>  Las configuraciones de compilaci贸n de Buck o Bazel son m谩s dif铆ciles de mantener.  En el caso de Buck, tambi茅n debe controlar la relevancia de las bibliotecas conectadas y las bibliotecas de las que dependen. </li><li>  Es muy costoso transferir un proyecto existente de Gradle a Buck / Bazel, especialmente en condiciones de ganancias incomprensibles. </li></ol><br>  Si su proyecto demorar谩 m谩s de 45 minutos y hay aproximadamente 20 personas en el equipo de desarrollo de Android, entonces tiene sentido pensar en cambiar el sistema de compilaci贸n.  Si t煤 y tu amigo est谩n aserrando una startup, entonces usa Gradle y deja estos pensamientos. <br><br><img src="https://habrastorage.org/webt/ah/po/1o/ahpo1oen8smqi1ks_fdqfqeydea.jpeg"><br><br>  隆Estar茅 encantado de discutir las perspectivas de alternativas a Gradle en los comentarios! <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace al proyecto</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/469771/">https://habr.com/ru/post/469771/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../469755/index.html">C贸mo ser un buen programador</a></li>
<li><a href="../469757/index.html">Tecnolog铆a AR al servicio de la pintura.</a></li>
<li><a href="../469761/index.html">驴C贸mo implementar an谩lisis y no romper la aplicaci贸n?</a></li>
<li><a href="../469765/index.html">Los elogios se relajan y la cr铆tica ofende: c贸mo evaluar el trabajo de otra persona, para que todos est茅n bien</a></li>
<li><a href="../469767/index.html">C贸mo elegimos ServiceDesk. Parte 1</a></li>
<li><a href="../469775/index.html">Dibujar un sonido</a></li>
<li><a href="../469779/index.html">Meetup de Outdoor Future London Academy</a></li>
<li><a href="../469783/index.html">驴Por qu茅 el futuro de la entrega a煤n puede estar detr谩s de las aeronaves?</a></li>
<li><a href="../469785/index.html">Intel's Use NUC - Gana el concurso NUC. Resultados y ganadores</a></li>
<li><a href="../469797/index.html">Soluci贸n Veeam PN y sus nuevas caracter铆sticas en la versi贸n 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>