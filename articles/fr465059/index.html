<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍐 🚶🏾 🏌️ PoE à une distance de plus de 200 mètres. Surveillance et redémarrage automatique des clients PoE 🙌🏻 👩🏽‍🤝‍👨🏼 👨🏿‍🎨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans ma pratique, allumer l'appareil et en obtenir une image à une distance considérable du commutateur n'était pas une tâche facile. Surtout quand à ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PoE à une distance de plus de 200 mètres. Surveillance et redémarrage automatique des clients PoE</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465059/"> Dans ma pratique, allumer l'appareil et en obtenir une image à une distance considérable du commutateur n'était pas une tâche facile.  Surtout quand à partir d'une seule pièce de fer, les réseaux vont à plusieurs caméras à différentes distances. <br><br>  Tout appareil complexe malomalski se bloque périodiquement.  Quelque chose de moins, et quelque chose de plus souvent, et c'est un dogme.  Le plus souvent, cela est résolu ... à droite ... avec ceci: <br><br><img src="https://habrastorage.org/webt/hy/pf/jo/hypfjos5dm4rr-h1v5rcexpjjgw.png"><br><br>  Et si de l'autre côté du tube vous n'avez pas les bonnes mains, vous devrez arracher votre cinquième point de la chaise et aller / rouler / voler vers l'appareil. <br><br>  Particulièrement désagréable si cet appareil se trouve quelque part sous le toit ou sur un pilier ... ou dans un bureau distant. <br><br>  L'épargne est le principal fléau de l'administration à distance.  Parfois, le menotteur-ma trouve un appareil photo / interrupteur / routeur sur aliexpress et explique pourquoi ce morceau de fer coûte 700 roubles, et que vous offrez plus de 5k peut être une tâche écrasante.  Surtout si cet appareil est déjà disponible et qu'ils se tournent vers vous sur le principe «pourquoi ça ne marche pas pour nous?».  Le client a toujours raison, surtout lorsqu'il appelle, le moins possible.  Et cela signifie que c'est le <s>g ***</s> très chinois <s>d'un</s> mauvais appareil qui devrait avoir une certaine indépendance et il est conseillé de "kicker" automatiquement avant que le client ne le remarque. <br><br>  Les commutateurs PoE gérés sont prêts à sauver la situation et heureusement, ils sont présentés en grand nombre sur le marché. <br><br>  Et ici, le problème est le numéro un: par qui ou plutôt que de surveiller, afin de pousser la commande de réinitialisation de l'alimentation sur le port du commutateur PoE dans le cas d'un périphérique collant.  L'augmentation et la configuration du serveur sont des gestes et du matériel supplémentaires. <br><br>  Disons que j'en ai dans l'établissement: un total de 15 caméras, un DVR et ... c'est tout.  Dans le même temps, 7 sont situés à moins de 100 m, 5 à 150 et 3 à 200 m. Il est nécessaire de simplifier les infrastructures pour que les gens ne viennent dans cet établissement que préventivement. <br><br>  La solution est assez simple - la présence d'un commutateur PoE qui peut surveiller les caméras et réinitialiser l'alimentation sur le port, ainsi que «atteindre» sur le câble à une distance de plus de 200 mètres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«sans une seule coupure».</a> <br><a name="habracut"></a><br><h2>  Mikrotik </h2><br>  Avec deux certificats (MTCNA et MTCRE), mes yeux sont d'abord tombés sur Mikrotik.  Le choix des modèles avec un indice P de ce fabricant est petit, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">celui-ci.</a> <br><img src="https://habrastorage.org/webt/sg/q2/hq/sgq2hqudeihfxmcgyiok3jl64u8.png"><br>  À mon humble avis, trop petit ensemble de paramètres.  Que se passe-t-il si la caméra réfléchit et manque quelques pings?  - redémarrez! <br><br>  Et si la caméra venait de mourir?  Mikrotik le coupera à chaque minute? .. <br><br>  Dans ma pratique, il y avait un grand nombre de défauts CCR sur l'alimentation.  Et quel est l'intérêt d'un commutateur PoE s'il présente un risque élevé de panne de courant après six mois? .. <br><br>  De plus, je n'ai pas trouvé d'informations selon lesquelles Mikrotik peut fonctionner avec des fils d'une longueur d'au moins 150 mètres ... <br><br><h2>  Zyxel </h2><br>  En étudiant des représentants de fournisseurs concurrents, je suis tombé sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Habré</a> .  Commutateur de la série Zyxel GS1350.  Cela coûte beaucoup plus cher que Mikrotik, mais en même temps je n'ai pas remarqué de problème avec Zyxel avec des alimentations "faibles". <br><br>  Zuksel positionne les commutateurs GS1350 comme, créés spécialement pour les systèmes de vidéosurveillance.  Les commutateurs déterminent que la caméra est «bloquée» et la redémarrent avec alimentation. <br><br><h3>  Méthode de détection de gel </h3><br>  Avant de commencer à me familiariser avec cet appareil, j'imaginais que le switch analyse le type de trafic et dès la fin du flux vidéo, le switch réinitialise l'alimentation ... <br>  Mais tout s'est avéré beaucoup plus simple. <br><br><img src="https://habrastorage.org/webt/uz/qh/d2/uzqhd217kl3eg58j88peugcggdw.png" alt="image"><br><br>  <b>«Auto PD Recovery»</b> peut fonctionner en deux modes: <br><br><ol><li>  <b>LLDP</b> , c'est-à-dire que l'appareil lui-même fournit des informations sur lui-même, sauf si, bien sûr, l'appareil le prend en charge.  LLDP la réponse est venue - le morceau de fer signifie "est vivant".  S'il n'y a pas de réponse, «coupez» la nourriture de force et attendez une réponse. </li><li>  <b>Ping</b> .  C'est beaucoup plus facile?  Ping - Pas de réponse - Rebut! </li></ol><br>  Le nombre de pings sans réponse, le temps de réinitialisation et le nombre de coupures d'alimentation sont définis.  Ce qui est assez logique, car il ne sert à rien de «donner un coup de pied» à un morceau de fer s'il n'a pas démarré la troisième fois. <br><br>  Mais je n'ai pas compris: qu'est-ce qui se spécialise ICI dans les caméscopes? <br>  De cette façon, vous pouvez surveiller n'importe quel périphérique réseau.  Même un qui ne prend pas en charge PoE. <br><br><div class="spoiler">  <b class="spoiler_title">Nous commandons un tel gadget avec aliexpress et tout appareil réseau avec nous se transforme en PoE.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wu/se/5c/wuse5cqgam78h7w4sbvqqt2xwui.png"><br></div></div><br>  Si le gadget se bloque, le commutateur réinitialisera l'alimentation sur le port et dans les journaux, nous verrons quelque chose comme ceci: <br><br><pre><code class="plaintext hljs">233 Sep 07 17:24:41 DE interface: Port 4 - ReoLink link up 100M/F 234 Sep 07 17:24:39 DE interface: Port 4 - ReoLink link down 235 Sep 07 17:24:32 DE interface: Port 4 - ReoLink link up 100M/F 236 Sep 07 17:24:30 DE interface: Port 4 - ReoLink link down 237 Sep 07 17:24:26 NO system: PethPse Port 4 - ReoLink OnOff Trap, Port Detection Status is Delivering Power 238 Sep 07 17:24:24 DE interface: Port 4 - ReoLink link up 100M/F 239 Sep 07 17:24:04 NO system: PethPse Port 4 - ReoLink OnOff Trap, Port Detection Status is Disabled 240 Sep 07 17:24:02 DE interface: Port 4 - ReoLink link down 241 Sep 07 17:24:01 WA interface: Port 4 - ReoLink PD failure is detected and reboot due to Auto PD Recovery (ping mode)</code> </pre> <br><h3>  Longueur de câble maximale. </h3><br>  La page <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Zyxel</a> dit: <br><blockquote>  L'utilisation du mode de portée étendue dans ces commutateurs permet d'augmenter la distance maximale aux appareils alimentés jusqu'à 250 mètres. <br></blockquote>  Nous sommes habitués à être sceptiques à l'égard de toute brochure. <br><br>  J'ai appuyé sur les deux extrémités de la nouvelle baie (305 mètres) et coincé l'un dans l'appareil photo et l'autre dans l'interrupteur.  La caméra n'a pas décollé ... Il semble normal ^ _ ^ <br><br>  Il s'assit, gratta une citrouille - entra dans les réglages, vérifia la « <b>plage étendue</b> », et ... dix secondes de silence - roulement de tambour ... la caméra commença à fonctionner!  305 MÈTRES! <br><img src="https://habrastorage.org/webt/t8/xv/nr/t8xvnrnnbquv4nkcqzvqbmkznz8.png"><br><div class="spoiler">  <b class="spoiler_title">Aucune perte de paquets!</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zb/zn/lc/zbznlcqtny5ouo0ilblsmwvibzi.png"><br></div></div><img src="https://habrastorage.org/webt/pw/0m/8q/pw0m8qeqsjesbtcwxkfxtepdnz8.png"><br><br>  <b>Ainsi, le commutateur de la série GS1350 n'a pas atteint les 250 déclarés, mais déjà 305 mètres!</b> <br><br>  Certes, la triche réside peut-être aussi dans la qualité du câble: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rexant FTP Cat.6 et coûte près de 12k roubles</a> <br><br><img src="https://habrastorage.org/webt/p2/ii/xv/p2iixved3talreoo8q7lbgpdz_8.jpeg"><br><br><img src="https://habrastorage.org/webt/io/ub/ye/ioubyekgsc4pt52_4low5oadz0w.jpeg"><br><br>  Si une longueur plus longue est requise, il est possible de joindre plusieurs morceaux de câble à travers un répéteur.  À la fin, vous pouvez également connecter un autre commutateur Poe pour connecter plusieurs périphériques. <br><br>  Par exemple, via UPVEL UP-215SGE <i>(je n'ai pas vérifié sa fiabilité. Je suis juste tombé entre les mains.)</i> Il est lui-même alimenté par PoE et alimenté par PoE. <br><br><img src="https://habrastorage.org/webt/_g/ut/va/_gutvasu3jawrn9203eijaatxlq.jpeg"><br><br>  Mais il s'agit d'un sujet distinct pour des conditions spécifiques car il nécessite une conception tenant compte de tous les facteurs. <br><br>  Lorsque l'option «Plage étendue» est activée, le port définit automatiquement le protocole 802.3at et définit le budget d'alimentation à 33 W. <br><br>  Mais il vaut la peine de donner la priorité au cas où tous les consommateurs commencent à manger activement ... Les ports avec une faible priorité, en cas de manque d'alimentation sur le commutateur, recevront la capacité demandée en dernier. <br><br><h3>  Protection contre la foudre </h3><br>  La deuxième question lors de la mise à l'air libre des appareils est la protection contre les surtensions. <br><blockquote>  Valeur ESD / Protection contre les surtensions: <br>  ESD - 15 kV / 8 kV (Air / Contact); <br>  Surtension - 4 kV (port Ethernet). <br><br>  Remarque  ESD - Protection ESD, Surge - <br>  protection contre les surtensions.  En cas de décharge statique dans l'air jusqu'à 15 <br>  kilovolt, ou électrostatique 8 kV avec contact étroit, ou un saut temporaire <br>  tensions jusqu'à 4 kilovolts - le commutateur a de bonnes chances de survivre à une telle <br>  troubles. </blockquote>  Eh bien, sur le cas, il y a où fixer la mise à la terre. <br>  J'espère que je n'ai pas à vérifier ça ^ _ ^ <br><br>  <b>PoE continu</b> <br><br>  Il fournit de l'énergie même si l'appareil ne répond pas.  Par défaut, cette option est activée.  N'oubliez pas de cocher cette option avant de mettre à jour le firmware des caméras.  Sinon ça peut être désagréable ... <br><br><img src="https://habrastorage.org/webt/46/dm/5c/46dm5ceki8ksfsvhd-j3-udfzvg.png"><br><br><h3>  Cisco comme CLI </h3><br>  Pour les fans de consoles, ainsi que pour automatiser la configuration, vous pouvez utiliser la CLI familière dans le style de Cisco. <br><br><img src="https://habrastorage.org/webt/77/7n/tx/777ntx2b_abhp1booiwqbawteoa.png"><br><br>  Si vous n'utilisez pas, par exemple, telnet / snmp et d'autres protocoles, je vous recommande de les désactiver pour augmenter la sécurité de l'appareil. <br><br><h3>  Pas sans une mouche dans la pommade ... </h3><br>  Il y a un élément de menu Cloud Management sur le commutateur <br><br><img src="https://habrastorage.org/webt/pi/ky/yh/pikyyhlvwitgg0qslvmy-oq8c6w.png"><br><br>  Mais lorsque vous essayez de vous inscrire, nous obtenons ceci <br><br><img src="https://habrastorage.org/webt/gb/dx/yu/gbdxyujj3d1wnzdc05qnafg0xxm.png"><br><br>  Pour le moment, la prise en charge de ces appareils sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nebula</a> n'est pas encore incluse.  Le constructeur promet de les ajouter en 2020.  En même temps, il ne sera pas nécessaire de mettre à jour le firmware du commutateur! <br><br><h3>  Conclusion </h3><br>  Le Zyxel GS1350 est jusqu'à présent le seul interrupteur qui a satisfait mes demandes: <br><br><ul><li>  géré avec un ensemble standard de fonctionnalités </li><li>  longueur de câble 200+ mètres sans joints </li><li>  surveillance et redémarrage des consommateurs PoE </li><li>  simplicité et flexibilité de configuration. </li></ul><br>  Il existe peut-être d'autres solutions sur le marché qui couvriront mes besoins, mais je ne les ai pas encore trouvées. <br><br>  J'invite ceux qui souhaitent discuter de l'article sur Telegram à mes chats créés: <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@zyxelru</a> - Chat thématique sur Zyxel <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@router_os</a> - Chat thématique sur Mikrotik </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465059/">https://habr.com/ru/post/fr465059/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465045/index.html">Kali Linux NetHunter sur Android: pourquoi et comment installer</a></li>
<li><a href="../fr465047/index.html">Tests unitaires dans SGBD - comment nous le faisons dans Sportmaster, deuxième partie</a></li>
<li><a href="../fr465049/index.html">10 livres sur la gestion de projet Agile à emporter avec vous en 2020</a></li>
<li><a href="../fr465055/index.html">Six compétences pour faire passer votre carrière en Data Science au niveau supérieur.</a></li>
<li><a href="../fr465057/index.html">Conteneurs et fenêtres. De Hello World à Kubernetes. Première partie, introduction</a></li>
<li><a href="../fr465061/index.html">Pourquoi au lieu d'une semaine de travail de quatre jours, il vaut mieux penser à une journée de travail de six heures</a></li>
<li><a href="../fr465063/index.html">Les 10 erreurs les plus courantes lors de l'utilisation de la plate-forme Spring. 2e partie</a></li>
<li><a href="../fr465069/index.html">Nouveau dans Hadoop: découvrez les différents formats de fichiers dans Hadoop</a></li>
<li><a href="../fr465071/index.html">TechTrain 2019 IT festival: comment JUG.ru, JUGNsk et JUG.MSK y ont participé</a></li>
<li><a href="../fr465073/index.html">Ne sautez pas! Transitions interruptibles dans iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>