<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóíÔ∏è üë®üèø‚Äçüî¨ üçó Param√®tres d'authentification dans Veeam Backup pour Microsoft Office 365 v3 üë©üèº‚Äçüåæ ‚ô¶Ô∏è ‚õ≤Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la r√©cente version 3.0 de Veeam Backup pour Microsoft Office 365 , entre autres innovations, il prend en charge une m√©thode d'authentification mo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Param√®tres d'authentification dans Veeam Backup pour Microsoft Office 365 v3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/454924/">  Dans la r√©cente version 3.0 de <b>Veeam Backup <i>pour Microsoft Office 365</i></b> , entre autres innovations, il prend en charge une m√©thode d'authentification moderne pour travailler avec des donn√©es cloud.  Il utilise l'authentification √† l'aide de l'application Azure et d'un compte de service configur√© avec l'authentification multifacteur (MFA). <br><br><img src="https://habrastorage.org/webt/yf/cq/9p/yfcq9pstszziwyruwzbj82x5x2s.png"><br><br>  Dans cet article, nous expliquerons bri√®vement comment cr√©er les entit√©s n√©cessaires √† une telle authentification et configurer leurs param√®tres dans Microsoft Office 365. <br><a name="habracut"></a><br><h1>  Comment √ßa marche </h1><br>  Pour l'authentification avec le cloud Office 365, Veeam utilise l'application Azure Active Directory et un compte de service configur√© avec l'authentification multifacteur (MFA). <br><br><ul><li>  L'application permet √† Veeam Backup <i>pour Microsoft Office 365 d'</i> utiliser l' <b>API Microsoft Graph</b> pour r√©cup√©rer les donn√©es d'organisation Microsoft Office 365. Cette application doit √™tre pr√©enregistr√©e sur le portail Azure Active Directory, qui sera d√©crit ci-dessous. </li><li>  Le compte de service sera utilis√© pour se connecter aux services EWS et PowerShell. </li></ul><br>  Par cons√©quent, lorsque vous ajoutez une organisation √† l'infrastructure Veeam Backup <i>pour Microsoft Office 365</i> , vous devrez effectuer les op√©rations suivantes: <br><br><ol><li>  √Ä l'√©tape des <b>param√®tres de connexion Office 365</b> de l' <b>Assistant Ajout d'organisation,</b> s√©lectionnez <b>Authentification moderne</b> . </li><li>  √Ä l'√©tape des <b>informations d'identification Exchange Online</b> , vous devez sp√©cifier √† la fois l'ID d'application Azure Active Directory (ainsi que son certificat ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">secret</a> ) ainsi que le nom d'utilisateur et le mot de passe du compte d'application ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mot de passe d'application</a> ): </li></ol><br><br><img src="https://habrastorage.org/webt/xw/5v/xi/xw5vxikmiguexdwm14rpopiupmc.png"><br><br>  O√π obtenir ces m√™mes certificat, secret et mot de passe de l'application?  - certains utilisateurs nous le demandent.  C'est ce que nous allons expliquer ci-dessous. <br><br><h2>  Soit dit en passant, si <i>l'authentification moderne est</i> s√©lectionn√©e, cela signifie-t-il que les protocoles d'authentification de base seront compl√®tement d√©sactiv√©s du processus? </h2><br>  Veeam Backup <i>pour Microsoft Office 365</i> v3 prend enti√®rement en charge les m√©thodes d'authentification modernes, mais avec cela, il utilise √©galement un certain nombre de protocoles de base pour pouvoir fonctionner avec l'API Office 365. <br><br>  Pour eux, vous devez v√©rifier les param√®tres suivants: <br><br><ul><li>  Pour travailler avec <i>Exchange Online PowerShell,</i> vous devez activer le param√®tre <b>AllowBasicAuthPowershell</b> pour le compte de service Veeam - cela est n√©cessaire pour obtenir des informations sur le nombre d'utilisateurs sous licence, de bo√Ætes aux lettres, etc.  Pour plus de s√©curit√©, vous pouvez l'activer pour un seul compte, et non pour l'ensemble de l'organisation, comme expliqu√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> - en particulier, cela ne peut √™tre fait que pour la comptabilit√© Veeam. </li><li>  <i>Exchange Online PowerShell</i> fonctionne √©galement avec le <i>service Web Exchange Web Services</i> (EWS). Pour ce faire, activez le param√®tre <b>AllowBasicAuthWebServices</b> .  En principe, cette option est facultative, c'est-√†-dire qu'il n'est pas n√©cessaire de l'activer pour une organisation Office 365 - Veeam Backup pour Microsoft Office 365 peut s'en passer, mais dans ce cas, lorsque vous ajoutez une organisation, vous devrez utiliser un certificat d'application, pas un secret. </li><li>  Pour prot√©ger les fichiers texte, les images, les vid√©os, le contenu dynamique et tout autre contenu t√©l√©charg√© sur les pages des sites SharePoint Online, vous devez activer le param√®tre <b>LegacyAuthProtocolsEnabled</b> , en le d√©finissant sur <i>$ True</i> .  Ce param√®tre s'appliquera √† l'organisation dans son ensemble;  il est n√©cessaire pour le fonctionnement de services individuels, par exemple pour ASMX. </li></ul><br><h1>  Ainsi, nous obtenons l'ID, le secret et le certificat de l'application </h1><br>  Tout cela doit √™tre obtenu sur le portail <b>Office 365 Azure Active Directory</b> lors de l'inscription d'une nouvelle application dans Azure Active Directory. <br><br>  Pour enregistrer une application, vous devez suivre ces √©tapes: <br><br><ol><li>  Connectez-vous au <b>Centre d'administration Microsoft Office 365</b> avec un compte d' <i>administrateur global, d'administrateur d'</i> <i>application</i> ou d' <i>administrateur d'application cloud</i> et acc√©dez au <b>centre d'administration Azure Active Directory</b> . <br></li><li>  Dans la section <b>Inscriptions d'applications</b> , cliquez sur <b>Nouvelle inscription</b> : <br><br><img src="https://habrastorage.org/webt/tn/0f/8b/tn0f8b89xx87bhc53chx6ewydea.png"><br></li><li>  Saisissez le nom de l'application, sp√©cifiez les types de comptes <b>pris en charge</b> (types de comptes qui fonctionneront avec l'application - nous avons ¬´Comptes dans ce r√©pertoire organisationnel uniquement¬ª, c'est-√†-dire les comptes uniquement dans le r√©pertoire de cette organisation), puis cliquez sur <b>Enregistrer</b> : <br><br><img src="https://habrastorage.org/webt/2v/3i/k5/2v3ik51t0_2auk9bkeymcdzvwdk.png"><br></li></ol><br>  Maintenant, l'ID d'application appara√Ætra dans les param√®tres qui sont visibles dans la fen√™tre <b>Pr√©sentation</b> . <br>  Mais ce n'est pas tout - pour terminer le processus de configuration, vous devez effectuer quelques √©tapes suppl√©mentaires.  L'application doit fournir les autorisations n√©cessaires pour travailler avec l'API. <br><ol><li>  Dans la section <b>API d'appel</b> , cliquez sur <b>Afficher les autorisations d'API</b> : <br><br><img src="https://habrastorage.org/webt/aw/tb/kn/awtbkn78vr8lsqfpvc60auhgwlc.png"><br></li><li>  Dans la fen√™tre qui s'ouvre, nous verrons les autorisations accord√©es √† notre application.  Par d√©faut, une seule autorisation d'acc√®s √† Microsoft Graph est configur√©e pour cela - c'est <i>User.Read</i> .  Il peut √™tre retir√© en toute s√©curit√©, car  Il n'est pas requis pour notre application.  Cliquez ensuite sur <b>Ajouter une autorisation</b> : <br><br><img src="https://habrastorage.org/webt/ui/wk/9r/uiwk9rkh9ejxgatpfclpguo2jsi.png"><br></li><li>  Ensuite, dans la section <b>S√©lectionnez une API</b> , s√©lectionnez <b>Microsoft Graph</b> : <br><br><img src="https://habrastorage.org/webt/ke/rd/50/kerd502zltf5ut_i0pkyplx-y2q.png"><br></li><li>  Il peut y avoir deux types d'autorisations pour les applications Azure AD: il s'agit des <i>autorisations</i> <i>d√©l√©gu√©es</i> ou d' <i>application</i> (attribu√©es √† l'application).  La premi√®re option ( <i>autorisations d√©l√©gu√©es</i> ) n√©cessite un utilisateur connect√© qui fournira les autorisations n√©cessaires chaque fois qu'un appel API est effectu√©.  Dans la version avec les <i>autorisations d'application,</i> elles sont accord√©es par l'administrateur une fois (le consentement est donn√© - le consentement de l'administrateur).  Veeam Backup pour Microsoft Office 365 n√©cessite l'attribution d' <i>autorisations d'application</i> : s√©lectionnez <i>Directory.Read.All</i> (pour lire les donn√©es dans un r√©pertoire) et <i>Group.Read.All</i> (pour lire les donn√©es de groupe) dans la liste des autorisations, puis cliquez sur <b>Ajouter des autorisations</b> : <br><br><img src="https://habrastorage.org/webt/8v/dp/an/8vdpanl-smklajxsjc8z5m1oijy.png"><br>  <i>Remarque:</i> Si vous souhaitez utiliser le certificat d'application au lieu d'un secret, vous devez en outre s√©lectionner quelques API suppl√©mentaires et les autorisations correspondantes: <br><br><ul><li>  <b>Acc√®s</b> et autorisation de l' <b>API Microsoft Exchange Online</b> <i>Utilisez les services Web Exchange avec un acc√®s complet √† toutes les bo√Ætes aux lettres</i> </li><li>  <b>Acc√®s</b> et autorisation de l' <b>API Microsoft SharePoint Online</b> <i>Ayez un contr√¥le total sur toutes les collections de sites</i> <i><br></i> <br></li></ul><br>  √Ä la fin de la configuration, vous devez √©mettre un consentement d'administrateur (consentement d' <i>administrateur</i> ) pour l'ensemble du client, c'est-√†-dire pour toute l'organisation cliente avec laquelle les donn√©es fonctionneront.  En savoir plus sur ce m√©canisme dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un article Microsoft</a> . <br><br>  Dans la section <b>Autorisations API</b> , cliquez sur <b>Accorder le consentement administrateur pour &lt;nom du locataire&gt;</b> .  Pour confirmer, cliquez sur <b>Oui</b> : <br><br><img src="https://habrastorage.org/webt/-j/zm/b9/-jzmb9vxcrvvqcef0e7_smdadnu.png"><br><br>  Vous pouvez maintenant commencer √† configurer le secret ou le certificat de l'application. <br><br><ol><li>  Tout de m√™me, dans la section <b>Inscriptions d'applications</b> , s√©lectionnez l'application nouvellement cr√©√©e, puis cliquez sur <b>Certificats et secrets</b> et s√©lectionnez <b>Nouveau secret client</b> ou <b>T√©l√©charger un certificat</b> . <br><br><img src="https://habrastorage.org/webt/ei/ou/_g/eiou_gsd8dkpvbp0iu48qt18_88.png"><br></li><li>  Pour un secret, vous devez entrer une description et une date d'expiration.  Veuillez noter que le code secret doit √™tre copi√© imm√©diatement, car il ne sera plus affich√© - et vous devrez le sp√©cifier dans l'assistant Ajouter une organisation (c'est l√† que nous avons commenc√© toute cette explication): <br><br><img src="https://habrastorage.org/webt/l7/qx/jd/l7qxjdn57diux3steubgsf7kj7u.png"><br></li></ol><br>  Hourra, cette partie de l'extraction des param√®tres n√©cessaires est termin√©e!  Continuons. <br><br><h1>  Obtenez le mot de passe de l'application </h1><br>  Si vous disposez d√©j√† d'un compte pour utiliser MFA lorsque vous travaillez avec Office 365 et qu'il poss√®de tous les r√¥les et autorisations requis pour Veeam Backup <i>pour Microsoft Office 365</i> , vous pouvez cr√©er un nouveau mot de passe d'application: <br><br><ol><li>  Vous devez vous connecter √† Office 365 avec ce compte et passer un contr√¥le de s√©curit√© suppl√©mentaire.  Acc√©dez aux param√®tres utilisateur et cliquez sur les param√®tres de <b>votre application</b> : <br><br><img src="https://habrastorage.org/webt/gr/br/tl/grbrtlwuntoyiy6ftsh9qgapeby.png"><br></li><li>  Vous serez redirig√© vers la page <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://portal.office.com/account</a> , o√π vous devrez vous rendre dans la section <b>S√©curit√© et confidentialit√©</b> et y s√©lectionner <b>Cr√©er et g√©rer les mots de passe des applications</b> : <br><br><img src="https://habrastorage.org/webt/fm/74/1n/fm741nkphovlpffd8qsptffwiww.png"><br></li><li>  Cr√©ez un nouveau mot de passe d'application, copiez-le dans le presse-papiers et entrez dans l'assistant Ajouter une organisation. <br><br>  <i>Remarque: Il est</i> recommand√© d'utiliser le mot de passe de l'application une seule fois, et si n√©cessaire, vous pouvez simplement g√©n√©rer un nouveau mot de passe comme d√©crit ci-dessus. <br><br><img src="https://habrastorage.org/webt/8a/sd/tz/8asdtzohdccbuexdpdh2mfubhw4.png"><br></li></ol><br>  Vous disposez d√©sormais d'un ensemble complet d'options que vous pouvez sp√©cifier lors de l'ajout d'une organisation Office 365 √† Veeam Backup <i>pour Microsoft Office 365</i> .  N'oubliez pas de vous assurer que vous avez sp√©cifi√© l'option de d√©ploiement correcte ( <b>Microsoft Office 365</b> ) et la m√©thode d'authentification correcte (dans notre cas, <b>l'authentification moderne</b> ). <br><br>  <i>Remarque:</i> N'oubliez pas que vous pouvez utiliser des comptes diff√©rents ou identiques pour acc√©der √† Exchange Online et SharePoint Online (avec OneDrive Entreprise). <br>  Si vous pr√©voyez d'utiliser plusieurs applications pour ex√©cuter Exchange Online et SharePoint Online, veillez √† pr√©-enregistrer ces applications en suivant la proc√©dure de cet article. <br><br><h1>  Liens annexes </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article sur Habr√© sur la d√©cision de Veeam Backup pour Microsoft Office 365</a> </li><li>  Vous pouvez t√©l√©charger une version d'essai de l'√©dition commerciale de la solution √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'ici.</a> </li><li>  Vous pouvez t√©l√©charger ici l'√©dition gratuite de Community Edition <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Manuel d'utilisation (en anglais)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nouvelles fonctionnalit√©s de la version 3.0 (vid√©o en russe)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article de Microsoft sur la d√©sactivation de l'authentification de base dans Office 365</a> </li></ul></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454924/">https://habr.com/ru/post/fr454924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454914/index.html">Nous utilisons Yii2. Nous √©crivons un autre CMS ou une tentative d'acc√©l√©rer consid√©rablement le d√©veloppement avec un minimum de frais g√©n√©raux</a></li>
<li><a href="../fr454916/index.html">Architecture de r√©seau neuronal pour impl√©menter l'algorithme RL avec la possibilit√© de d√©finir simultan√©ment des actions en cours d'ex√©cution</a></li>
<li><a href="../fr454918/index.html">Comment combiner le dos de deux d√©taillants sur SAP en 12 heures</a></li>
<li><a href="../fr454920/index.html">Performances frontales: analyse des mesures importantes</a></li>
<li><a href="../fr454922/index.html">Contes sur les clients √©trangers et leurs caract√©ristiques du travail en Russie apr√®s la loi PD</a></li>
<li><a href="../fr454926/index.html">Tout ce que vous saviez sur word2vec n'est pas vrai</a></li>
<li><a href="../fr454928/index.html">Fa√ßon de contourner l'√©cran de verrouillage de Windows sur les sessions RDP</a></li>
<li><a href="../fr454932/index.html">Investissements et logiciels: 5 terminaux de trading pour n√©gocier en bourse</a></li>
<li><a href="../fr454936/index.html">Vivaldi: le blocage des publicit√©s devrait √™tre le choix de l'utilisateur</a></li>
<li><a href="../fr454938/index.html">D√©veloppement de son propre noyau pour l'int√©gration dans un syst√®me de processeur bas√© sur FPGA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>