<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò± üíµ üíÉüèº Anmerkung des Frontend-Architekten Nr. 1. Sie k√∂nnen Redux nicht einfach herunterladen und verwenden. ‚úãüèæ üë©‚Äçüë©‚Äçüë¶ üò¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Haftungsausschluss 
 Sehr geehrter Leser! Wenn Sie keine Ahnung haben, was React und Redux sind, macht es keinen Sinn, weiterzulesen, weiterer technis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Anmerkung des Frontend-Architekten Nr. 1. Sie k√∂nnen Redux nicht einfach herunterladen und verwenden.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445966/"><h4>  Haftungsausschluss </h4><br>  Sehr geehrter Leser!  Wenn Sie keine Ahnung haben, was React und Redux sind, macht es keinen Sinn, weiterzulesen, weiterer technischer Unsinn.  Um zu verstehen, wof√ºr diese Notiz gedacht ist, muss ich ernsthaft mit diesen Bibliotheken arbeiten. Trotz der Tatsache, dass ich versuchen werde, klar zu schreiben, handelt es sich bei diesem Artikel nicht um einen Einstiegsartikel.  Und dies ist eine pers√∂nliche Erfahrung und Meinung, die auf der Praxis basiert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a1/1ef/58a/4a11ef58abb70667a79ec9f1dc266d81.jpg" alt="Bild"></div><br><h4>  Was ist falsch an der Verwendung von Redux? </h4><br>  Dann habe ich beschlossen zu schreiben, aber was ist eigentlich falsch daran, Redux in meinem Projekt und Tausenden anderen zu verwenden?  Ich schreibe seit April 2016 (drei Jahre) React / Redux-Anwendungen.  Es ist Zeit, bereits einige interessante Dinge zu entdecken ... Und dann gab es Vortr√§ge und Berichte, die sich speziell an Anf√§nger richteten, aber es gab keinen R√ºckblick f√ºr Erwachsene und keine Retrospektive.  In der Zwischenzeit setzt jemand Sternchen in Pakete, die pr√ºfen, ob Sie nicht 13 pro Stunde sind. Ich werde die Mauer der vorherrschenden Stereotypen durchbrechen. <br><a name="habracut"></a><br><h4>  Redux wird aber nicht ben√∂tigt! </h4><br>  Sie sagen, und in gewisser Weise werden Sie Recht haben.  Sie k√∂nnen es seit 2018 nicht mehr verwenden - es gibt eine Menge Artikel zu diesem Thema im Internet, aber bis jetzt erhalten Sie mit der "Nichtbenutzung" eine Kollektivfarm. Im Folgenden wird klar, warum.  Und die Anzahl der Alternativen ist nicht skalierbar und noch mehr. <br><br>  Wir verwenden Redux, da es ein akzeptierter Standard ist (zumindest f√ºr die Reaktion). Die Vorhersehbarkeit und Zuverl√§ssigkeit von Redux sind uns wichtig.  Aber wir vermissen es ernsthaft, eigentlich darin <br><br><h4>  Anspruch </h4><br>  Um klar zu machen, was die Behauptung √ºber die Punkte ist, m√ºssen Sie wahrscheinlich zuerst in die Vergangenheit zur√ºckkehren, zu den Urspr√ºngen, wie Sie m√∂chten, n√§mlich die Dokumentation des glorreichen Redux √∂ffnen und die Postulate lesen.  Ich werde nur den ersten von ihnen betrachten.  Wenn es f√ºr Sie interessant sein wird - teilen Sie die Kommentare mit, ich werde viele weitere Punkte analysieren. <br><br><h4>  Die einzige Quelle der Wahrheit ... </h4><br>  Hier haben wir einen Hinterhalt.  Nat√ºrlich hei√üt es, dass es eine Geschichte geben kann, Redux erkl√§rt auf diese Weise seinen Unterschied zur Flussarchitektur.  Aber wenn Sie breiter schauen: Wird die Regel in einem realen Projekt eingehalten?  Sie werden sagen: ganz.  Ich deklariere (deklariere) 1 Seite, √ºbertrage sie an den Anbieter und dann ... <br><br>  Technisch wird der Prozess korrekt beschrieben.  Aber ich kann sagen, dass Menschen Wahrnehmungs- und Logikverzerrungen ausgesetzt sind, und da Programmierer immer noch Menschen sind ... Nun, Sie verstehen, wohin ich f√ºhre (wenn Sie nicht verstanden haben: Programmierer neigen zu Wahrnehmungs-, Logik- usw. Verzerrungen). <br>  Die Hauptverzerrung dabei ist, dass ich, wie viele meiner Kollegen, daran gew√∂hnt bin, dass es keine anderen gibt, wenn wir den Begriff "Speichern" nicht in Bezug auf etwas anderes als Redux verwenden. <br><br><h4>  Und hier kommt die Reaktion </h4><br>  Ein technisches Merkmal namens interner Zustand wollte auf dieses Postulat spucken.  Es wird einfach an jedem geeigneten Ort ein Speicher vom Typ interner Zustand erstellt.  Es gibt eine Komponente - es gibt einen Status, der √ºber einen Mechanismus zum Aktualisieren und Beeinflussen der Komponente verf√ºgt.  Der Unterschied in der Verwendung (Speicherstatus, Aktualisierung und Broadcast-√Ñnderungen) ist nahezu unsichtbar.  Sie k√∂nnen Einw√§nde erheben: Es ist nicht ganz klar, warum Ihnen der Komponentenstatus nicht gef√§llt.  Er ist nicht wie Redakteure, wie k√∂nnen sie √ºberhaupt verglichen werden!  Es ist intern, welche Flags dort gespeichert werden sollen. <br><br>  Verstehen Sie, dass sich das Wesentliche nicht dadurch √§ndert, dass Sie das Element umbenennen.  Es gibt einen Vorschlaghammer Montag, dies macht es nicht zum Wochentag.  Ja, beide Montage sind hart, andere Tage und Vorschlaghammer sind einfacher.  Aber nach seinem Namen h√∂rt der Vorschlaghammer nicht auf, ein Schlaginstrument zu sein. <br><br>  Das Ausma√ü der Redux- und Zustandsreaktionskomponente ist unterschiedlich, aber die Essenz, wenn sie heute verwendet wird, ist eine. <br><br>  Ich werde es so erkl√§ren: In den meisten F√§llen gehen die Daten aus dem internen Zustand der Komponente √ºber Requisiten an das Kind, aber egal wie offensichtlich es ist, Redux-Daten gehen, wenn sie in React integriert sind, auch √ºber Requisiten an die Komponenten.  Aus der Sicht der Komponente, die Requisiten akzeptiert, spielt es keine Rolle, was sich drau√üen befindet.  Das hei√üt, f√ºr den Endbenutzer - diesen Redux-Speicher, diesen internen Status - ist derselbe. <br><br>  Dieser interne Status h√§ngt m√∂glicherweise auch nicht von den Requisiten der Komponente ab, in der er deklariert ist.  Dann bekommen wir Isolation, die einen solchen internen Zustand zu einem noch gr√∂√üeren Gesch√§ft macht, als Sie sich vorstellen k√∂nnen. <br><br>  Damit es wirklich intern ist, sollte es nur die Komponente betreffen, in der es deklariert ist, ohne dass die untergeordneten Komponenten undicht werden.  Ist es schwierig  Ganz, weil seine Bedeutung fast v√∂llig verloren geht.  Dies ist ein weiteres Zeichen daf√ºr, dass der interne Status ein Gesch√§ft ist.  Schlie√ülich haben wir einfach einen Punkt aus dem Zweck entfernt, ‚Äûden Status zu speichern, √Ñnderungen zu aktualisieren und zu senden‚Äú - die √Ñnderungen zu senden.  Alles, der Staat ist verloren. <br><br>  Das hei√üt, das Hauptproblem bei einem internen Status besteht darin, dass er mit Redux um Daten konkurriert, auf lange Sicht verliert und Mist macht.  Wir haben alle Arten von Techniken wie das Aufheben des Status (dies ist der Zeitpunkt, an dem das Geschwister des Host-Elements ben√∂tigt wird, sodass der Status-Teil und die gesamte Logik der Arbeit damit dem √ºbergeordneten Element √ºbergeben werden, wobei viel Zeit f√ºr das Umschreiben und Testen der Arbeitslogik aufgewendet wird) usw. Fehler und Overhead treten auf in Verbesserungen und viel Freude.  Dies ist all das Rauschen, das unsere Software in der Entwicklungsphase verdirbt.  Wir haben noch keinen Umsatz erreicht, aber die Software ist schon so. <br><br>  Das hei√üt, trotz aller Anzeichen und Probleme haben wir mehr als eine Geschichte und viele damit verbundene Probleme.  Das Letzte wird wahrscheinlich das Folgende sein: <br><br>  Ich liebe Redux auch f√ºr die Art von Devtools, die es hat.  Als ich anfing, verwendeten wir einen Logger, der einfach alle Aktionen konsolidierte, ohne jedoch ein vollst√§ndiges Bild davon zu geben, was geschah.  Nun - das ist der Hauptassistent und Freund.  Bei React sind sie ebenfalls vertreten.  Im Allgemeinen ist devtools der Grund, warum jeder Pubsub weit von Redux entfernt ist.  Wie eine Ameise f√ºr einen Blauwal. <br><br>  <b>Probleme</b> (es gibt keine DNA-Beweise): <br><br><ol><li>  Das √Ñndern des internen Zustands durch React Devtools f√ºhrt manchmal nicht zu einem Update oder dem gew√ºnschten Ergebnis - ich s√ºndige bei der Integration mit Redux. </li><li>  Der interne Zustand unterbricht den Zeitverlauf in Redux-Devtools.  Die Superfunktion mit Zeitreisen, die √ºber die Redux-Architektur verf√ºgbar sind, funktioniert dank der reaktionsf√§higen internen Zustandsarchitektur nicht.  Der interne Zustand k√ºmmerte sich einfach nicht um eine √Ñnderung des Redux, er hat seinen eigenen Zustand.  Timetravel funktioniert einfach nicht.  Einige Elemente werden einfach nicht aktualisiert, teilweise aktualisiert usw. All dieses Epos mit asynchroner Codesynchronisation im Abfluss. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/991/8fd/5c2/9918fd5c23836212a6d11fc1b75351be.jpg" alt="Bild"></div><br><h4>  Ein Beispiel nat√ºrlich aus der Praxis gesaugt </h4><br>  Sie arbeiten an einem neuen Projekt f√ºr Sie, oder Ihr Kollege hat vor einem Jahr einige Funktionen geschrieben, und jetzt m√ºssen Sie es erweitern.  Im Allgemeinen besteht die Aufgabe darin, den Code eines anderen zu finalisieren.  Sie beginnen zu untersuchen und verstehen, dass die Editoren keine Daten enthalten.  Es gibt keine Aktionen, Reduzierungen im Code, die die Daten speichern, die Sie ben√∂tigen.  Und du beginnst die Reise durch den Baum der Komponenten auf der Suche nach dem Schatz und findest sie (!!!) sogar ein paar St√ºcke.  Sie fragen Kollegen, aber die Antwort ist Standard: Ich kann mich nicht erinnern, schneller an den Staat geschrieben zu haben, wir hatten keine Zeit und so weiter.  Sie gehen zur Quelle und verstehen, dass der aktuelle Status keine √úberarbeitung beinhaltet.  Sie schreiben funktionierenden, getesteten Code neu, um √Ñnderungen vorzunehmen und neue Funktionen hinzuzuf√ºgen. <br><br>  <i>Das Vorhandensein einer sch√§dlichen Alternative in Form eines inneren Zustands tut seine schmutzige Tat.</i>  <i>Immerhin ist es jetzt billig und es spielt keine Rolle, was in einem Jahr passiert.</i> <br><br><h4>  Nur wenige Metaphern </h4><br>  Es sieht aus wie schlechtes Essen - es scheint lecker und billig zu sein, aber nach ein oder drei Jahren h√∂rt der Magen-Darm-Trakt auf zu gehorchen und lebt sein eigenes Leben.  Sie investieren viel Zeit und Geld in die Wiederherstellung Ihrer fr√ºheren Gesundheit und schaffen dies nicht immer. <br><br>  <b>Redux und React Internal State sind Wettbewerber</b> als gro√üe und kleine Unternehmen in einer Nische.  Das Hauptprodukt sind Daten und Einfluss.  Software ist der Verbraucher ihrer Produkte.  Es gibt viele Analogien, aber das Wesentliche bleibt dasselbe - wenn wir Software entwickeln, brauchen wir keinen Wettbewerb. <br><br>  <i><b>Wir sind die ‚ÄûDiktatoren‚Äú des Programmcodes, und jeglicher Wettbewerb sollte unterdr√ºckt werden, der freie Markt sollte verboten werden und die Planwirtschaft und das staatliche Monopol sollten den Verbraucher dominieren.</b></i> <br><br>  √Ñhm, etwas langweilte mich.  Im Allgemeinen sollte alles nach Plan verlaufen.  Wir haben Sprints, Releases und mehr, und die Software hat begrenzte Kosten und eine Lebensdauer / Markteintritt.  Dies ist sehr wichtig, und wir k√∂nnen den Aufstand auf dem Schiff, den Aufstand der Bibliotheken, nicht zulassen. <br><br><h4>  Die Schlussfolgerung ist einfach. </h4><br>  Verwenden Sie keine anderen Repositorys mit Redux.  Ausnahmen k√∂nnen nur sehr Einzelf√§lle machen.  Zum Beispiel Komponenten, die im Prinzip nicht durch Redux ohne die entsprechende Schicht gesteuert werden und diese nicht beeinflussen. <br><br><h4>  Beispiel </h4><br>  Ich habe das eigenst√§ndige Modul in einer Filiale entwickelt und das Gesch√§ft in einer anderen umgestaltet. Im Allgemeinen ist mein Ansatz zur Verwaltung des Gesch√§fts und des Status ein separates Thema f√ºr die Ver√∂ffentlichung.  Ich habe mit dem Refactoring des Moduls begonnen, aber zum Zeitpunkt des Beginns und des Endes des Schreibens des Moduls ist das Refactoring des Tests und des Assistenten nicht verschwunden.  Refactoring ist umfangreich und erfordert einen durchdachten R√ºckgriff, der geplant werden muss - im Allgemeinen k√∂nnen Sie nicht einfach ein Refactoring durchf√ºhren. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a39/bb2/c5f/a39bb2c5f0b89a7d9085521f74967e38.jpg" alt="Bild"></div><br>  Da ich √ºber die bevorstehenden √Ñnderungen im Gesch√§ft Bescheid wusste, habe ich es nicht verwendet, um eine neue Funktion zu entwickeln.  Dies w√ºrde die Kosten f√ºr die zeitweise Aktualisierung abgebrochener Umgestaltungen und Tests erh√∂hen. <br>  Was ich getan habe: Ich habe mich f√ºr ein Minimum an Daten angemeldet.  Daten und ihre Struktur haben nicht unter Refactoring gelitten, der Code, der sie generiert hat, hat gelitten, wurde gespeichert usw. Ich habe kein Byte an die Editoren geschrieben.  Ich √ºberpr√ºfe, ob der Benutzer angemeldet ist und noch ein paar Felder. <br><br>  F√ºr meine Bed√ºrfnisse habe ich PubSub mit Kan√§len und einer einfachen API gewaschen.  Ja, ja, Pubsab.  Mangel an normalen schmerzhaften Schmerzen.  Zeitreise - Schmerz.  Im Allgemeinen plane ich, eine Erweiterung f√ºr Chrome in Form von Devtools zu schreiben, und es ist m√∂glich, die Neuimplementierung als Konkurrent von Redux auf dem Github zu ver√∂ffentlichen.  Ich habe eine Menge Beschwerden √ºber Redux, die ich in diesem Artikel nicht ansprechen werde, aber PubSub hat sie praktisch nicht.  Neben der Tatsache, dass ich mich an Redux Logger erinnerte ... <br><br>  Das Modul verf√ºgt also √ºber einen eigenen Speicher, eine eigene Verbindung zum Server. <br><br>  Das hei√üt, Redux wirkt sich √ºberhaupt nicht auf das Modul aus, kann diesen Speicher praktisch nicht beeinflussen (es gibt nur drei Felder im Abonnement), aber das Modul und PubSub wirken sich in keiner Weise auf Redux aus.  Diese Trennung schlie√üt den Wettbewerb aus. <br><br>  Die Frage "Wo sollen die Daten gespeichert werden?"  Bei der Entwicklung des Moduls bin ich noch nie darauf gesto√üen.  Aber wenn es um Redux gegen internen Zustand geht - f√ºr viele stellt sich diese Frage fast st√§ndig.  Ich habe beschlossen, diese Frage ein f√ºr alle Mal zu beantworten. <br><br>  <b>Meine architektonische Meinung ist:</b> <b><br><br></b>  <b>Speichern Sie Daten nur in Redux (alles in allem, sogar "intern"). Wenn sie mit Ihrem Reaktionsprojekt als Haupt-Repository verbunden sind, verwenden Sie keine Repositorys, die mit diesem konkurrieren.</b>  Dies erh√∂ht die Zuverl√§ssigkeit und Wirkung dieser Bibliothek und ihrer Devtools (Zeiterfassung und Verfolgung aller Daten in Schritten beschleunigen die Entwicklung und Suche nach m√∂glichen Problemen - synchrone √Ñnderungen sind steiler und leichter asynchron). <br><br>  <i>Vielleicht lohnt es sich, eine Bibliothek hinzuzuf√ºgen, die den internen Zustand vollst√§ndig von der Entwicklung ausschlie√üt?</i>  <i>Oder ersetzt der interne Zustand zum Beispiel durch eine Auswahl aus Redux?</i>  Ich habe vor einem solchen Jahr angefangen, einen zu schreiben, bin zu 90 Prozent fertig geworden und habe sogar einen Bericht erstellt.  Was sagst du  Brauchen Sie die? <br><br>  Ich hoffe dir hat diese Notiz gefallen :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de445966/">https://habr.com/ru/post/de445966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de445952/index.html">Eine Billion kleiner Singles</a></li>
<li><a href="../de445954/index.html">AI-Beschleuniger von HSE, MTS und Rostelecom</a></li>
<li><a href="../de445958/index.html">SPDS GraphiCS - Fassaden- und Dachsystem</a></li>
<li><a href="../de445962/index.html">Praktikum in IT: Sicht des Managers</a></li>
<li><a href="../de445964/index.html">MEPhI wird eine Olympiade zur Informationssicherheit f√ºr Studenten veranstalten: wie man teilnimmt und was es gibt</a></li>
<li><a href="../de445970/index.html">Wie LANIT Engineering- und IT-Systeme mit einem Handelszentrum in der Sberbank ausstattete</a></li>
<li><a href="../de445972/index.html">Gepfl√ºgte Feld-Bigdata in Medizin und Pharmazie</a></li>
<li><a href="../de445974/index.html">Wie man einen Neuling bef√∂rdert und nichts kaputt macht</a></li>
<li><a href="../de445976/index.html">PhpStorm 2019.1: Debuggen Sie Twig- und Blade-Vorlagen, suchen Sie nach totem Code, verbessern Sie die automatische Vervollst√§ndigung und vieles mehr</a></li>
<li><a href="../de445978/index.html">Igel √ºberqueren: OpenJDK-11 + GraalVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>