<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ú üë®üèø‚Äçüöí üìö Detalles de GraphQL: qu√©, c√≥mo y por qu√© üèáüèø üßëüèæ‚Äçü§ù‚Äçüßëüèº ‚ùé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="GraphQL es ahora, sin exagerar, este es el √∫ltimo p√≠o del modo IT. Y si a√∫n no sabe qu√© tipo de tecnolog√≠a es, c√≥mo usarla y por qu√© puede serle √∫til,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Detalles de GraphQL: qu√©, c√≥mo y por qu√©</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/445268/">  GraphQL es ahora, sin exagerar, este es el √∫ltimo p√≠o del modo IT.  Y si a√∫n no sabe qu√© tipo de tecnolog√≠a es, c√≥mo usarla y por qu√© puede serle √∫til, entonces el art√≠culo que publicamos hoy est√° escrito para usted.  Aqu√≠ repasaremos los conceptos b√°sicos de GraphQL usando un ejemplo de implementaci√≥n de un esquema de datos para la API de una empresa de palomitas de ma√≠z.  En particular, hablemos sobre los tipos de datos, consultas y mutaciones. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/c7/oq/a1/c7oqa1w2b00akzatd2womwb_daw.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">¬øQu√© es GraphQL?</font> </h2><br>  GraphQL es un lenguaje de consulta utilizado por las aplicaciones cliente para trabajar con datos.  GraphQL est√° asociado con un concepto como un "esquema"; esto es lo que le permite organizar la creaci√≥n, lectura, actualizaci√≥n y eliminaci√≥n de datos en su aplicaci√≥n (es decir, tenemos cuatro funciones b√°sicas que se utilizan al trabajar con almacenes de datos, a las que generalmente se hace referencia con el acr√≥nimo CRUD) - Crear, leer, actualizar, eliminar). <br><br>  Se dijo anteriormente que GraphQL se utiliza para trabajar con datos en "su aplicaci√≥n" y no "en su base de datos".  El hecho es que GraphQL es un sistema independiente de las fuentes de datos, es decir, no importa d√≥nde est√© organizado para organizar su trabajo. <br><br>  Si observa, sin saber nada sobre GraphQL, sobre el nombre de esta tecnolog√≠a, puede parecer que nos enfrentamos a algo muy complicado y confuso.  El nombre de la tecnolog√≠a tiene la palabra "Gr√°fico".  ¬øSignifica esto que para dominarlo, debe aprender a trabajar con bases de datos de gr√°ficos?  Y el hecho de que el nombre contenga "QL" (que puede significar "lenguaje de consulta", es decir, "lenguaje de consulta"), ¬øsignifica que aquellos que quieran usar GraphQL tendr√°n que aprender un lenguaje de programaci√≥n completamente nuevo? <br><br>  Estos temores no est√°n completamente justificados.  Para tranquilizarlo, esta es la cruel verdad acerca de esta tecnolog√≠a: simplemente embellece las solicitudes <code>GET</code> o <code>POST</code> .  Si bien GraphQL, en general, presenta algunos conceptos nuevos relacionados con la organizaci√≥n de datos y la interacci√≥n con ellos, los mecanismos internos de esta tecnolog√≠a se basan en las buenas solicitudes HTTP. <br><br><h2>  <font color="#3AC1EF">Repensar la tecnolog√≠a REST</font> </h2><br>  La flexibilidad es lo que diferencia a la tecnolog√≠a GraphQL de la conocida tecnolog√≠a REST.  Cuando se utiliza REST, si todo se hace correctamente, los puntos finales generalmente se crean teniendo en cuenta las caracter√≠sticas de un determinado recurso o tipo de datos de aplicaci√≥n. <br><br>  Por ejemplo, cuando se realiza una solicitud <code>GET</code> al punto final <code>/api/v1/flavors</code> se espera que env√≠e una respuesta similar a esta: <br><br><pre> <code class="plaintext hljs">[ {  "id": 1,   "name": "The Lazy Person's Movie Theater",   "description": "That elusive flavor that you begrudgingly carted yourself to the theater for, now in the comfort of your own home, you slob!" }, {   "id": 2,   "name": "What's Wrong With You Caramel",   "description": "You're a crazy person that likes sweet popcorn. Congratulations." }, {   "id": 3,   "name": "Gnarly Chili Lime",   "description": "The kind of popcorn you make when you need a good smack in the face."} ]</code> </pre> <br>  No hay nada catastr√≥ficamente incorrecto con esta respuesta, pero pensemos en la interfaz de usuario, o m√°s bien, en c√≥mo pretendemos consumir estos datos. <br><br>  Si queremos mostrar una lista simple en la interfaz que contiene solo los nombres de los tipos de palomitas de ma√≠z disponibles (y nada m√°s), entonces esta lista puede parecerse a la que se muestra a continuaci√≥n. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a89/0fd/c56/a890fdc56389815233584327e76011c1.png"></div><br>  <i><font color="#999999">Lista de tipos de palomitas de ma√≠z</font></i> <br><br>  Se puede ver que aqu√≠ estamos en una situaci√≥n dif√≠cil.  Podemos decidir no utilizar el campo de <code>description</code> , pero ¬øvamos a sentarnos y fingir que no enviamos este campo al cliente?  ¬øQu√© m√°s podemos hacer?  Y cuando, despu√©s de unos meses, nos pregunten por qu√© la aplicaci√≥n es tan lenta para los usuarios, solo tenemos que dejar al tipo y ya no nos reuniremos con la administraci√≥n de la empresa para la que hicimos esta aplicaci√≥n. <br><br>  De hecho, el hecho de que el servidor env√≠e datos innecesarios en respuesta a una solicitud del cliente no es completamente culpa nuestra.  REST es un mecanismo de adquisici√≥n de datos que se puede comparar con un restaurante en el que el camarero le pregunta al visitante: "¬øQu√© quieres?", Y, sin prestar especial atenci√≥n a sus deseos, le dice: "Te traer√© lo que tenemos" . <br><br>  Si descartamos los chistes, en aplicaciones reales esto puede conducir a situaciones problem√°ticas.  Por ejemplo, podemos mostrar diversa informaci√≥n adicional sobre cada tipo de palomitas de ma√≠z, como informaci√≥n sobre precios, informaci√≥n sobre el fabricante o informaci√≥n nutricional ("¬°Palomitas de ma√≠z veganas!").  Al mismo tiempo, los puntos finales REST inflexibles hacen que sea muy dif√≠cil obtener datos espec√≠ficos sobre tipos espec√≠ficos de palomitas de ma√≠z, lo que lleva a una carga irrazonablemente alta en los sistemas y al hecho de que las soluciones resultantes est√°n lejos de aquellas de las que los desarrolladores podr√≠an estar orgullosos. <br><br><h2>  <font color="#3AC1EF">C√≥mo la tecnolog√≠a GraphQL mejora para qu√© se utiliz√≥ la tecnolog√≠a REST</font> </h2><br>  Un an√°lisis superficial de la situaci√≥n descrita anteriormente puede parecer que solo somos un problema menor.  "¬øQu√© tiene de malo enviar al cliente datos innecesarios?"  Para comprender en qu√© medida los "datos innecesarios" pueden ser un gran problema, recuerde que GraphQL fue desarrollado por Facebook.  Esta empresa tiene que atender millones de solicitudes por segundo. <br><br>  ¬øQu√© significa esto?  Y el hecho de que con tales vol√∫menes cada peque√±a cosa importa. <br><br>  GraphQL, si continuamos la analog√≠a con un restaurante, en lugar de "llevar" al visitante "lo que es", trae exactamente lo que el visitante ordena. <br><br>  Podemos obtener una respuesta de GraphQL que se centra en el contexto en el que se utilizan los datos.  En este caso, no necesitamos agregar puntos de acceso "√∫nicos" al sistema, realizar muchas solicitudes o escribir estructuras condicionales de varios pisos. <br><br><h2>  <font color="#3AC1EF">¬øC√≥mo funciona GraphQL?</font> </h2><br>  Como ya dijimos, GraphQL se basa en simples solicitudes <code>GET</code> o <code>POST</code> para transmitir datos al cliente y recibirlos de √©l.  Si consideramos esta idea con m√°s detalle, resulta que hay dos tipos de consultas en GraphQL.  El primer tipo incluye solicitudes de lectura de datos, que en la terminolog√≠a de GraphQL simplemente se llaman consultas y se refieren a la letra R (lectura, lectura) del acr√≥nimo CRUD.  Las consultas del segundo tipo son solicitudes de modificaci√≥n de datos, que se llaman mutaciones en GraphQL.  Se relacionan con los cuadros de eje C, U y D del acr√≥nimo CRUD, es decir, los usan para crear, crear, actualizar y eliminar registros. <br><br>  Todas estas solicitudes y mutaciones se env√≠an a la URL del servidor GraphQL, que, por ejemplo, puede verse como <code>https://myapp.com/graphql</code> , en forma de solicitudes <code>GET</code> o <code>POST</code> .  Hablaremos m√°s sobre esto a continuaci√≥n. <br><br><h2>  <font color="#3AC1EF">Consultas GraphQL</font> </h2><br>  Las consultas GraphQL son entidades que representan una solicitud al servidor para recibir ciertos datos.  Por ejemplo, tenemos una determinada interfaz de usuario que queremos llenar con datos.  Para estos datos, recurrimos al servidor, ejecutando la solicitud.  Cuando se usan las API REST tradicionales, nuestra solicitud toma la forma de una solicitud GET.  Cuando se trabaja con GraphQL, se utiliza una nueva sintaxis de consulta: <br><br><pre> <code class="plaintext hljs">{ flavors {   name } }</code> </pre> <br>  ¬øEso es JSON?  O un objeto de JavaScript?  Ni lo uno ni lo otro.  Como ya hemos dicho, en nombre de la tecnolog√≠a GraphQL, las dos √∫ltimas letras, QL, significan "lenguaje de consulta", es decir, el lenguaje de consulta.  Este es, literalmente, un nuevo lenguaje para escribir solicitudes de datos.  Todo esto suena como una descripci√≥n de algo bastante complicado, pero de hecho no hay nada complicado aqu√≠.  Analicemos la consulta anterior: <br><br><pre> <code class="plaintext hljs">{ //    ,   . }</code> </pre> <br>  Todas las solicitudes comienzan con una "solicitud ra√≠z", y lo que necesita obtener durante la ejecuci√≥n de la solicitud se denomina campo.  Para evitar confusiones, es mejor llamar a estas entidades "campos de consulta en el esquema".  Si ese nombre no le parece claro, espere un poco, a continuaci√≥n hablaremos m√°s sobre el esquema.  Aqu√≠, en la consulta ra√≠z, solicitamos el campo de <code>flavors</code> . <br><br><pre> <code class="plaintext hljs">{ flavors {   //  ,        flavor. } }</code> </pre> <br>  Al solicitar un determinado campo, tambi√©n debemos indicar los campos anidados que deben recibirse para cada objeto que viene en respuesta a la solicitud (incluso si se espera que solo un objeto venga en respuesta a la solicitud). <br><br><pre> <code class="plaintext hljs">{ flavors {   name } }</code> </pre> <br>  ¬øCu√°l ser√° el resultado?  Despu√©s de enviar una solicitud de este tipo al servidor GraphQL, obtendremos una respuesta ordenada bien formada como la siguiente: <br><br><pre> <code class="plaintext hljs">{ "data": {   "flavors": [     { "name": "The Lazy Person's Movie Theater" },     { "name": "What's Wrong With You Caramel" },     { "name": "Gnarly Chili Lime" }   ] } }</code> </pre> <br>  Tenga en cuenta que no hay nada superfluo.  Para hacerlo m√°s claro, aqu√≠ hay otra solicitud que se ejecuta para obtener datos en otra p√°gina de la aplicaci√≥n: <br><br><pre> <code class="plaintext hljs">{ flavors {   id   name   description } }</code> </pre> <br>  En respuesta a esta solicitud, obtenemos lo siguiente: <br><br><pre> <code class="plaintext hljs">{ "data": {   "flavors": [     { "id": 1, "name": "The Lazy Person's Movie Theater", description: "That elusive flavor that you begrudgingly carted yourself to the theater for, now in the comfort of your own home, you slob!" },     { "id": 2, "name": "What's Wrong With You Caramel", description: "You're a crazy person that likes sweet popcorn. Congratulations." },     { "id": 3, "name": "Gnarly Chili Lime", description: "A friend told me this would taste good. It didn't. It burned my kernels. I haven't had the heart to tell him." }   ] } }</code> </pre> <br>  Como puede ver, GraphQL es una tecnolog√≠a muy poderosa.  Pasamos al mismo punto final, y las respuestas a las solicitudes corresponden exactamente a lo que se necesita para llenar la p√°gina desde la que se ejecutan estas solicitudes. <br><br>  Si necesitamos obtener solo un objeto de <code>flavor</code> , entonces podemos aprovechar el hecho de que GraphQL puede trabajar con argumentos: <br><br><pre> <code class="plaintext hljs">{ flavors(id: "1") {   id   name   description } }</code> </pre> <br>  Aqu√≠ establecemos r√≠gidamente el identificador espec√≠fico ( <code>id</code> ) del objeto en el c√≥digo, la informaci√≥n sobre la que necesitamos, pero en tales casos podemos usar identificadores din√°micos: <br><br><pre> <code class="plaintext hljs">query getFlavor($id: ID) { flavors(id: $id) {   id   name   description } }</code> </pre> <br>  Aqu√≠, en la primera l√≠nea, le damos un nombre a la solicitud (el nombre se elige arbitrariamente, <code>getFlavor</code> se puede reemplazar con algo como <code>pizza</code> , y la solicitud seguir√° siendo operativa) y declaramos las variables que la solicitud espera.  En este caso, se supone que el identificador ( <code>id</code> ) de la <code>ID</code> tipo escalar se pasar√° a la solicitud (hablaremos de los tipos a continuaci√≥n). <br><br>  Independientemente de si <code>id</code> utiliza una <code>id</code> est√°tica o din√°mica al ejecutar una solicitud, as√≠ es como se ver√° la respuesta a una solicitud similar: <br><br><pre> <code class="plaintext hljs">{ "data": {   "flavors": [     { "id": 1, "name": "The Lazy Person's Movie Theater", description: "That elusive flavor that you begrudgingly carted yourself to the theater for, now in the comfort of your own home, you slob!" }   ] } }</code> </pre> <br>  Como puede ver, todo est√° organizado de manera muy conveniente.  Probablemente est√© empezando a pensar en usar GraphQL en su propio proyecto.  Y, aunque de lo que ya hemos hablado se ve maravilloso, la belleza de GraphQL realmente se manifiesta donde funciona con campos anidados.  Supongamos que en nuestro esquema hay otro campo llamado <code>nutrition</code> que contiene informaci√≥n sobre el valor nutricional de los diferentes tipos de palomitas de ma√≠z: <br><br><pre> <code class="plaintext hljs">{ flavors {   id   name   nutrition {     calories     fat     sodium   } } }</code> </pre> <br>  Puede parecer que en nuestro almac√©n de datos, cada objeto de <code>flavor</code> contendr√° un objeto de <code>nutrition</code> anidado.  Pero esto no es del todo cierto.  Con GraphQL, puede combinar llamadas a fuentes de datos independientes pero relacionadas en una sola consulta, lo que le permite recibir respuestas que brindan la conveniencia de trabajar con datos incrustados sin la necesidad de desnormalizar la base de datos: <br><br><pre> <code class="plaintext hljs">{ "data": {   "flavors": [     {       "id": 1,       "name": "The Lazy Person's Movie Theater",       "nutrition": {         "calories": 500,         "fat": 12,         "sodium": 1000       }     },     ...   ] } }</code> </pre> <br>  Esto puede aumentar significativamente la productividad del programador y la velocidad del sistema. <br><br>  Hasta ahora, hemos hablado de solicitudes de lectura.  ¬øQu√© pasa con las solicitudes de actualizaci√≥n de datos?  ¬øUsarlos nos da la misma conveniencia? <br><br><h2>  <font color="#3AC1EF">Mutaciones GraphQL</font> </h2><br>  Si bien las consultas GraphQL cargan datos, las mutaciones son responsables de realizar cambios en los datos.  Las mutaciones se pueden usar en forma del mecanismo b√°sico RPC (Llamada a procedimiento remoto) para resolver diversas tareas, como enviar datos de usuario a una API de terceros. <br><br>  Al describir mutaciones, se usa una sintaxis que se asemeja a la que usamos al generar consultas: <br><br><pre> <code class="plaintext hljs">mutation updateFlavor($id: ID!, $name: String, $description: String) { updateFlavor(id: $id, name: $name, description: $description) {   id   name   description } }</code> </pre> <br>  Aqu√≠ declaramos la mutaci√≥n <code>updateFlavor</code> , especificando algunas variables: <code>id</code> , <code>name</code> y <code>description</code> .  Actuando de acuerdo con el mismo esquema que se utiliza para describir las consultas, "dibujamos" campos variables (mutaci√≥n ra√≠z) usando la palabra clave de <code>mutation</code> , seguido de un nombre que describe la mutaci√≥n y un conjunto de variables que son necesarias para formar la solicitud de cambio de datos correspondiente. <br><br>  Estas variables incluyen lo que estamos tratando de cambiar o qu√© mutaci√≥n queremos causar.  Tenga en cuenta tambi√©n que despu√©s de la mutaci√≥n, podemos solicitar la devoluci√≥n de algunos campos. <br><br>  En este caso, necesitamos obtener, despu√©s de cambiar el registro, los campos <code>id</code> , <code>name</code> y <code>description</code> .  Esto puede ser √∫til al desarrollar algo como interfaces optimistas, eliminando la necesidad de cumplir una solicitud para recibir datos modificados despu√©s de cambiarlos. <br><br><h2>  <font color="#3AC1EF">Dise√±ando un esquema y conect√°ndolo a un servidor GraphQL</font> </h2><br>  Hasta ahora, hemos hablado sobre c√≥mo funciona GraphQL en el cliente y c√≥mo ejecutan las consultas.  Ahora hablemos sobre c√≥mo responder a estas solicitudes. <br><br><h3>  <font color="#3AC1EF">‚ñç Servidor gr√°fico</font> </h3><br>  Para ejecutar una consulta GraphQL, necesita un servidor GraphQL al que pueda enviar dicha consulta.  Un servidor GraphQL es un servidor HTTP normal (si escribe en JavaScript, puede ser un servidor creado con Express o Hapi), al que se adjunta un diagrama GraphQL. <br><br><pre> <code class="plaintext hljs">import express from 'express' import graphqlHTTP from 'express-graphql' import schema from './schema' const app = express() app.use('/graphql', graphqlHTTP({ schema: schema, graphiql: true })) app.listen(4000)</code> </pre> <br>  Al "unir" un esquema, nos referimos a un mecanismo que pasa las solicitudes recibidas del cliente a trav√©s del esquema y devuelve las respuestas.  Es como un filtro de aire a trav√©s del cual el aire ingresa a la habitaci√≥n. <br><br>  El proceso de "filtrado" est√° asociado con solicitudes o mutaciones enviadas por el cliente al servidor.  Tanto las consultas como las mutaciones se resuelven utilizando funciones relacionadas con los campos definidos en la consulta ra√≠z o en la mutaci√≥n ra√≠z del esquema. <br><br>  Lo anterior es un marco de ejemplo de servidor HTTP creado utilizando la biblioteca Express JavaScript.  Usando la funci√≥n <code>express-graphql</code> de Facebook, "adjuntamos" el esquema (se supone que se describe en un archivo separado) y ejecutamos el servidor en el puerto 4000. Es decir, los clientes, hablando sobre el uso local de este servidor, podr√°n enviar solicitudes direcci√≥n <code>http://localhost:4000/graphql</code> . <br><br><h3>  <font color="#3AC1EF">‚ñç Tipos de datos y resolvers</font> </h3><br>  Para garantizar el funcionamiento del servidor GraphQL, debe preparar el esquema y adjuntarlo. <br><br>  Recuerde que hablamos sobre declarar campos en una consulta ra√≠z o en una mutaci√≥n ra√≠z anterior. <br><br><pre> <code class="plaintext hljs">import gql from 'graphql-tag' import mongodb from '/path/to/mongodb' //  -  . ,  `mongodb`     MongoDB. const schema = { typeDefs: gql`   type Nutrition {     flavorId: ID     calories: Int     fat: Int     sodium: Int   }   type Flavor {     id: ID     name: String     description: String     nutrition: Nutrition   }   type Query {     flavors(id: ID): [Flavor]   }   type Mutation {     updateFlavor(id: ID!, name: String, description: String): Flavor   } `, resolvers: {   Query: {     flavors: (parent, args) =&gt; {       // ,  args  ,  { id: '1' }       return mongodb.collection('flavors').find(args).toArray()     },   },   Mutation: {     updateFlavor: (parent, args) =&gt; {       // ,  args    { id: '1', name: 'Movie Theater Clone', description: 'Bring the movie theater taste home!' }       //  .       mongodb.collection('flavors').update(args)       //  flavor  .       return mongodb.collection('flavors').findOne(args.id)     },   },   Flavor: {     nutrition: (parent) =&gt; {       return mongodb.collection('nutrition').findOne({         flavorId: parent.id,       })     }   }, }, } export default schema</code> </pre> <br>  La definici√≥n de campos en un esquema GraphQL consta de dos partes: desde declaraciones de tipo ( <code>typeDefs</code> ) y <code>resolver</code> .  La <code>typeDefs</code> contiene declaraciones de tipo para los datos utilizados en la aplicaci√≥n.  Por ejemplo, anteriormente hablamos sobre una solicitud para obtener una lista de objetos de <code>flavor</code> del servidor.  Para realizar una solicitud similar a nuestro servidor, debe realizar los siguientes tres pasos: <br><br><ol><li>  Indique al esquema c√≥mo se ven los datos del objeto de <code>flavor</code> (en el ejemplo anterior, se ve como un anuncio de <code>type Flavor</code> ). </li><li>  Declare el campo en el campo ra√≠z de <code>type Query</code> (esta es la propiedad de <code>flavors</code> del <code>type Query</code> valor). </li><li>  Declare una funci√≥n de reconocimiento de objetos <code>resolvers.Query</code> escrita de acuerdo con los campos declarados en el campo ra√≠z de <code>type Query</code> . </li></ol><br>  Ahora prestemos atenci√≥n a <code>typeDefs</code> .  Aqu√≠ damos la informaci√≥n del esquema sobre la forma de nuestros datos.  En otras palabras, le contamos a GraphQL sobre las diversas propiedades que pueden estar contenidas en entidades del tipo correspondiente. <br><br><pre> <code class="plaintext hljs">type Flavor { id: ID name: String description: String nutrition: Nutrition }</code> </pre> <br>  Una declaraci√≥n de <code>type Flavor</code> indica que un objeto de <code>flavor</code> puede contener un campo de <code>ID</code> de tipo <code>ID</code> , un campo de <code>name</code> de tipo <code>String</code> , un campo de <code>description</code> de tipo <code>String</code> y un campo de <code>nutrition</code> de tipo <code>Nutrition</code> . <br><br>  En el caso de la <code>nutrition</code> usamos aqu√≠ el nombre de un tipo diferente declarado en <code>typeDefs</code> .  Aqu√≠, el <code>type Nutrition</code> construcci√≥n <code>type Nutrition</code> describe la forma de datos nutricionales de las palomitas de ma√≠z. <br><br>  Preste atenci√≥n al hecho de que aqu√≠, como al comienzo de este material, estamos hablando de una "aplicaci√≥n" y no de una "base de datos".  En el ejemplo anterior, se supone que tenemos una base de datos, pero los datos en la aplicaci√≥n pueden provenir de cualquier fuente.  Incluso podr√≠a ser una API de terceros o un archivo est√°tico. <br><br>  Tal como lo hicimos en la declaraci√≥n de <code>type Flavor</code> , aqu√≠ especificamos los nombres de los campos que estar√°n contenidos en <code>nutrition</code> objetos de <code>nutrition</code> , usando, como tipos de datos de estos campos (propiedades), lo que en GraphQL se llama tipos de datos escalares.  Al momento de escribir esto, GraphQL soportaba <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">5 tipos de datos escalares incorporados</a> : <br><br><ul><li>  <code>Int</code> : entero de 32 bits con signo. </li><li>  <code>Float</code> : un n√∫mero de coma flotante de doble precisi√≥n con un signo. </li><li>  <code>String</code> : una secuencia de caracteres codificados en UTF-8. </li><li>  <code>Boolean</code> : Booleano <code>true</code> o <code>false</code> . </li><li>  <code>ID</code> : un identificador √∫nico que a menudo se usa para cargar objetos repetidamente o como una clave en la memoria cach√©.  Los valores de <code>ID</code> de tipo <code>ID</code> serializan de la misma manera que las cadenas, sin embargo, una indicaci√≥n de que un tipo de <code>ID</code> tiene un valor se enfatiza por el hecho de que este valor no est√° destinado a mostrarse a las personas, sino para su uso en programas. </li></ul><br>  Adem√°s de estos tipos escalares, tambi√©n podemos asignar propiedades a los tipos que definimos nosotros mismos.  Esto es exactamente lo que hicimos asignando la propiedad <code>nutrition</code> descrita en el <code>type Flavor</code> , tipo Construcci√≥n de <code>Nutrition</code> . <br><br><pre> <code class="plaintext hljs">type Query { flavors(id: ID): [Flavor] }</code> </pre> <br>  En el <code>type Query</code> construcci√≥n <code>type Query</code> , que describe el tipo ra√≠z de <code>Query</code> (la "consulta ra√≠z" de la que hablamos anteriormente), declaramos el nombre del campo que se puede solicitar.  Al declarar este campo, adem√°s, junto con el tipo de datos que esperamos devolver, especificamos los argumentos que pueden venir en la solicitud. <br><br>  En este ejemplo, esperamos una posible recepci√≥n del argumento <code>id</code> de una <code>ID</code> tipo escalar.  En respuesta a dicha solicitud, se espera una matriz de objetos cuyo dispositivo se asemeja a un dispositivo del tipo <code>Flavor</code> . <br><br><h3>  <font color="#3AC1EF">‚ñçConectar el reconocedor de consultas</font> </h3><br> ,    <code>type Query</code>    <code>field</code> ,    ,   -. <br><br>  ‚Äî  ,  GraphQL,   , ¬´¬ª.      <code>resolvers</code> ,     <code>Query</code> ,   ,      <code>flavors</code> ,   .        <code>flavors</code> ,     <code>type Query</code> . <br><br><pre> <code class="plaintext hljs">typeDefs: gql`‚Ä¶`, resolvers: { Query: {   flavors: (parent, args) =&gt; {     // ,  args    { id: '1' }     return mongodb.collection('flavors').find(args).toArray()   }, }, ‚Ä¶ },</code> </pre> <br>  -   .  <code>parent</code> ‚Äî   ,   ,  <code>args</code>      ,   .      <code>context</code> ,      .       ¬´¬ª  ( ‚Äî        ,       ). <br><br>     ,    ,   .   GraphQL ¬´ ¬ª          . , ,      . <br><br>  GraphQL      ,      ,    .    JSON-,  JSON-,  (  GraphQL   ). <br><br>    -   <code>flavors</code>   MongoDB,  <code>args</code> (    )   <code>.find()</code>   ,        ,   . <br><br><h3> <font color="#3AC1EF">‚ñç    </font> </h3><br>     -,   GraphQL,  , ,   ,      <code>nutrition</code> .   ,  ,   <code>Nutrition</code> , ,   ,      ,   <code>flavor</code> .      ,       /  . <br><br>    GraphQL  ,  <code>type Flavor</code>      <code>nutrition</code>   <code>type Nutrition</code> ,          .  ,    ,      <code>flavor</code> . <br><br><pre> <code class="plaintext hljs">typeDefs: gql`   type Nutrition {     flavorId: ID     calories: Int     fat: Int     sodium: Int   }   type Flavor {     [‚Ä¶]     nutrition: Nutrition   }   type Query {‚Ä¶}   type Mutation {‚Ä¶} `, resolvers: {   Query: {     flavors: (parent, args) =&gt; {‚Ä¶},   },   Mutation: {‚Ä¶},   Flavor: {     nutrition: (parent) =&gt; {       return mongodb.collection('nutrition').findOne({         flavorId: parent.id,       })     }   }, },</code> </pre> <br>      <code>resolvers</code>  ,   ,      <code>Query</code> , <code>Mutation</code>  <code>Flavor</code> .   ,      <code>typeDefs</code> . <br><br>     <code>Flavors</code> ,  ,   <code>nutrition</code>     -.       ,        <code>Flavor</code> .  ,   : ¬´ ,     <code>nutrition</code>     ,  <code>type Flavor</code> ¬ª. <br><br>         MongoDB,      ,     <code>parent</code> ,  -. ,     <code>parent</code> ,   ,    ,   <code>flavors</code> . ,      <code>flavor</code> ,    : <br><br><pre> <code class="plaintext hljs">{ flavors {   id   name   nutrition {     calories   } } }</code> </pre> <br>   <code>flavor</code> ,   <code>flavors</code> ,     <code>nutrition</code> ,        <code>parent</code> .     ,  ,  ,    MongoDB,   <code>parent.id</code> ,    <code>id</code>  <code>flavor</code> ,       . <br><br>  <code>parent.id</code>      ,     <code>nutrition</code>   <code>flavorId</code> ,     <code>flavor</code> . <br><br><h3> <font color="#3AC1EF">‚ñç </font> </h3><br> ,      ,     .   ,          .      <code>type Mutation</code> ,   ,       <code>updateFlavor</code> ,  ,   . <br><br><pre> <code class="plaintext hljs">type Mutation { updateFlavor(id: ID!, name: String, description: String): Flavor }</code> </pre> <br>     : ¬´ ,   <code>updateFlavor</code>  <code>id</code>  <code>ID</code> ( , <code>!</code> ,  GraphQL  ,    ), <code>name</code>  <code>String</code>  <code>description</code>  <code>String</code> ¬ª.  ,         ,     <code>Flavor</code> (  ‚Äî ,    <code>id</code> , <code>name</code> , <code>description</code> , , , <code>nutrition</code> ). <br><br><pre> <code class="plaintext hljs">{ typeDefs: gql`‚Ä¶`, resolvers: {   Mutation: {     updateFlavor: (parent, args) =&gt; {       // ,  args    { id: '1', name: 'Movie Theater Clone', description: 'Bring the movie theater taste home!' }       //  .       mongodb.collection('flavors').update(         { id: args.id },         {           $set: {             ...args,           },         },       )       //  flavor  .       return mongodb.collection('flavors').findOne(args.id)     },   }, }, }</code> </pre> <br>  -   <code>updateFlavor</code>    ,      :       ,    ,   ‚Äî ,      <code>flavor</code> . <br><br>    ,               ,       <code>flavor</code>     .   ? <br><br>   ,          ,        .     ,     <code>flavor</code> ,     . <br><br>      <code>args</code> ? , . ,          ,   ,      100%   ,         .       ,    ,  ,     ,      ,    . <br><br><h2> <font color="#3AC1EF">    GraphQL?</font> </h2><br>  ,      ,    ,     ,   , GraphQL-API. <br><br>        ,     GraphQL      ,      .  ,         .        ,    .  , ,   ,   GraphQL      REST      .  ,   ,           ,     GraphQL. <br><br><h3> <font color="#3AC1EF">‚ñç    ,   </font> </h3><br>     ,       HTTP-,  ,      ,   ,   ‚Äî  .       GraphQL       ,  ,    ,     ,     (            ). <br><br>        ,  ,     ( ‚Äî         ),  GraphQL      . <br><br><h3> <font color="#3AC1EF">‚ñç    ,    ,       </font> </h3><br>  ,       ,    ¬´ ¬ª.      , ,   ,   .        .   GraphQL         . <br><br><h3> <font color="#3AC1EF">‚ñç     ,       </font> </h3><br>          REST API,          :  ,    . ,      -,   iOS  Android,   API  .    ,  , ,   , ¬´   ¬ª    . <br><br>    ,   ,   ,   HTTP,              API (, ,   ). <br><br><h3> <font color="#3AC1EF">‚ñç   GraphQL ‚Äî   ?        REST API    GraphQL?</font> </h3><br> , .   . ,  ,   GraphQL     .       GraphQL,     .       ,      ,      ,           .     ,      ,     . <br><br> ,  GraphQL  ,  ,      ,  .    GraphQL    ,      Apollo  Relay,       . <br><br> GraphQL ‚Äî ,  ,   .   <code>graphql</code> (     <code>express-graphql</code> ,    ) ‚Äî      .  ,   GraphQL      -  .      ,     -,   ,  ,     ,    . <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>   ,   GraphQL    ,           . GraphQL      ,    , ,  .  , ,       ,        ,       GraphQL. <br><br> ,       : GraphQL   .              GraphQL  . ,     GraphQL,      ,  , ,  ,  ,  ,  . <br><br>  ‚Äî   ,  GraphQL ‚Äî ,   ,   .  GraphQL       ,   .    ,  GraphQL ‚Äî  ,  , ,  .           .  ,       ,      ,   ,     ,      ,      GraphQL. <br><br>  <b>Estimados lectores!</b>        GraphQL ‚Äî     ,         . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/445268/">https://habr.com/ru/post/445268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445258/index.html">C√≥mo eliminar de forma segura sus datos de su tel√©fono inteligente Android antes de venderlos</a></li>
<li><a href="../445260/index.html">¬øLos robots alguna vez se reconocer√°n realmente a s√≠ mismos? Los cient√≠ficos se est√°n moviendo en esta direcci√≥n.</a></li>
<li><a href="../445262/index.html">GeekUniversity abre reclutamiento en el departamento de an√°lisis de Big Data</a></li>
<li><a href="../445264/index.html">Precarga, captaci√≥n previa y otras etiquetas</a></li>
<li><a href="../445266/index.html">GeekBrains junto con Rostelecom llevar√°n a cabo IoT Hackathon</a></li>
<li><a href="../445270/index.html">[marcador] Bash para principiantes: 21 comandos √∫tiles</a></li>
<li><a href="../445272/index.html">JavaScript es el mejor lenguaje de programaci√≥n para principiantes. Entonces, ¬øes o no?</a></li>
<li><a href="../445274/index.html">Cuando "Zo√´"! == "Zo√´", o por qu√© necesita normalizar cadenas Unicode</a></li>
<li><a href="../445276/index.html">Gu√≠a completa de efectos de uso</a></li>
<li><a href="../445278/index.html">C√≥mo crear un juego si nunca eres un artista</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>