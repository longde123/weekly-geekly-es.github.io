<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏖️ ⛹🏿 🦍 Modifikasi modul penghalang GSM Doorhan untuk kontrol Internet ☑️ 🦋 🐴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini, diputuskan untuk memasang penghalang dengan kontrol melalui GSM di gedung apartemen. Alasan dan perlunya solusi ini berada di luar ruan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Modifikasi modul penghalang GSM Doorhan untuk kontrol Internet</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415805/"><img src="https://habrastorage.org/webt/zr/za/t9/zrzat9esz7qihwci7atehv_qxeu.png"><br><br>  Baru-baru ini, diputuskan untuk memasang penghalang dengan kontrol melalui GSM di gedung apartemen.  Alasan dan perlunya solusi ini berada di luar ruang lingkup artikel, tetapi saya ingin menulis tentang bagaimana, "pada lutut saya" Saya membuat antarmuka untuk mengendalikan modul melalui Internet.  Dan bahkan sedikit dengan blackjack, mengelola basis mobil dari ponsel dan foto-foto momen masuk dari kamera jalanan.  Mungkin seseorang ingin memperkenalkannya di rumah. <br><br>  Saya akan memperingatkan Anda bahwa artikel tersebut tidak menggambarkan solusi yang sudah jadi di luar kotak, melainkan bukti konsep. <br><a name="habracut"></a><br><h3>  Bagian 1. Mengapa controller seperti itu </h3><br>  Sebelum memasang modul GSM, beberapa tinjauan pasar terhadap sistem tersebut telah dilakukan.  Saya ingin mendapatkan solusi yang murah, andal, dan terbukti.  Nah, sehingga "installer" memiliki installer, mereka memiliki beberapa pengalaman bekerja dengannya, dll. <br><br>  Installer yang dapat dipilih menawarkan ESIM 110/120 untuk ~ 12000r dengan akses Internet, atau Doorhan GSM untuk ~ 6000r dengan kontrol atau konfigurasi SMS melalui kabel USB. <br><br>  Pilihan untuk "membuat perangkat Anda dari modul arduino + gsm seharga $ 3" ​​tidak dipertimbangkan, jadi solusinya harus benar-benar andal dan teruji.  Bayangkan seseorang tidak bisa menelepon ke rumah?  Maka Anda akan mendapatkan semua masalah. <br><br>  Saya juga tidak ingin lotre dengan pembelian perangkat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di Cina pada Ali</a> , lagi untuk menghindari masalah dengan keandalan.  Meskipun harga mulai dari 1500r. <br><br>  Kelemahan dari ESIM120, selain biaya x2, adalah bahwa GPRS Internet digunakan untuk mengakses Internet.  Untuk beberapa orang, ini mungkin merupakan nilai tambah, tetapi dalam kasus kami ini membawa biaya komunikasi seluler - Anda harus mengambil tarif dengan Internet.  Sekarang, tarif tanpa biaya bulanan terhubung ke kartu SIM, dan untuk mencegah nomor tersebut diblokir, saya berencana menghubungkan beberapa jenis langganan berbayar dari akun pribadi operator setiap 2-3 bulan untuk 2-3 rubel per hari, selama satu hari.  Misalnya, "cuaca", "lelucon" atau apa lagi yang berguna untuk penghalang) <br><br>  Tentang Doorhan GSM, saya tahu bahwa selain mengelola melalui SMS (tidak terlalu menarik), terhubung melalui USB ke komputer dan melalui perangkat lunaknya sendiri memungkinkan Anda untuk mengelola basis angka. <br><br><h3>  Bagian 2. Kontrol penerusan </h3><br>  Karena direncanakan untuk memasang unit kontrol penghalang 20 meter dari ruangan tempat perekam video IP rumah dan pusat komunikasi penyedia Internet lokal, diputuskan untuk mengambil Doorhan dan "membangun" USB melalui router seperti TP-Link MR3020 senilai 1200 rubel, OpenWRT dan program dari proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">USBIP</a> <br><br>  Ternyata menjadi sedikit lebih sederhana dengan router - Saya menemukan ASUS WL500gP lama di nampan, yang tidak sangat cocok untuk Internet dengan standar saat ini, tetapi memiliki 2 port USB.  Dia menggunakannya. <br><br>  Untuk usbip, saya harus menginstal versi lama OpenWRT, 12 September, karena modul kernel ini tidak berfungsi pada yang baru.  Saya tidak akan menjelaskan koneksi router ke jaringan.  Jika seseorang tidak memilikinya di jaringan lokal, ada opsi dengan penerusan porta, UPNP, atau pengaturan VPN sesuai selera Anda. <br><br>  Instal kmod-usbip-server dan verifikasi bahwa Anda dapat mengekspor dari kami <br><br><pre><code class="bash hljs">root@OpenWrt:~<span class="hljs-comment"><span class="hljs-comment"># opkg install kmod-usbip-server root@OpenWrt:~# usbip list -l Local USB devices ================= - busid 1-1 (0424:2502) 1-1:1.0 -&gt; hub - busid 1-1.1 (1a86:7523) 1-1.1:1.0 -&gt; ch341</span></span></code> </pre> <br>  Kami membutuhkan perangkat busid, 1-1.1 di mana pengontrol GSM kami yang terhubung berada.  Ke depan, ternyata ini adalah COM-&gt; USB converter dangkal pada chip CH341 <br><br>  Kami melakukan: <br><br><pre> <code class="hljs ruby">root@OpenWrt<span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment">#usbipd -D root</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@OpenWrt</span></span></span><span class="hljs-comment">:~#usbip bind -b 1-1.1 bind device on busid 1-1.1: complete</span></span></code> </pre><br>  dan dalam dmesg <br><br><pre> <code class="bash hljs"> usbip-host 1-1.1:1.0: usbip-host: register new device (bus 1 dev 57 ifn 0)</code> </pre><br>  Di komputer dengan Windows, instal driver USBIP dan jalankan <br><br><pre> <code class="dos hljs">usbip -a <span class="hljs-number"><span class="hljs-number">10</span></span>.<span class="hljs-number"><span class="hljs-number">16</span></span>.<span class="hljs-number"><span class="hljs-number">19</span></span>.<span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  di mana 10.16.19.19 Alamat IP router kami dengan OpenWRT.  Tentu saja, pertama Anda perlu membuka akses baik dari IP Anda ke router di firewall, atau terhubung dari jaringan lokal, atau salah satu dari 1000 opsi lain dari VPN ke P2P. <br><br>  Jika semuanya berjalan dengan baik, maka Windows dengan senang hati menyatakan bahwa perangkat USB-to-Serial Converter CH340 baru telah terdeteksi, kami memberinya driver dan port COM muncul di sistem. <br><br>  Sekarang kita dapat menjalankan program dari kit dengan controller dan mengatur angka-angka dalam database sambil duduk di rumah di sofa <br><br><img src="https://habrastorage.org/webt/4r/ag/oc/4ragoc7u7b1rgfyvjwuxod9fgdu.png"><br><br><h3>  Bagian 3. Kontrol Masuk </h3><br>  Setelah saya mengatur pekerjaan dengan controller di komputer rumah saya dan mencatat nomor pengguna, saya memutuskan untuk menggali lebih dalam dengan apa yang tersedia pada port COM. <br><br>  Ternyata GSM-module controller secara berkala mengirimkan perintah AT dengan level sinyal ke konsol, dan juga menulis nomor telepon dari mana panggilan diterima saat melakukan panggilan.  Itu tidak berfungsi untuk mengelola modul AT, tampaknya mereka tidak disiarkan dari modul pengontrol ke modul modem. <br><br><img src="https://habrastorage.org/webt/sk/e0/zx/ske0zxaobnmlpfryp5t1k8ldfgs.png"><br><br>  Lagipula ini cukup menarik.  Saat mengerjakan ide dengan pengontrol GSM, saya berharap bahwa panggilan ini akan direkam dalam detail operator.  Tetapi karena tidak ada koneksi yang terjadi, tidak ada catatan dalam pencarian.  Sekarang Anda dapat langsung dari controller untuk mengumpulkan log orang yang membuka penghalang.  Atau siapa yang mencoba melakukan ini. <br><br>  Untuk melakukan ini, instal kmod-usb-serial-ch341 pada OpenWRT, nonaktifkan terjemahan USBIP dengan perintah usbip unbind -b 1-1.1 dan lakukan insmod ch341. <br><br>  Setelah itu, tepat di router, Anda dapat terhubung ke / dev / ttyUSB0 dan menonton apa yang terjadi dengan panggilan di controller. <br><br>  Untuk memproses data, sebagai permulaan, saya menulis sebuah skrip sederhana yang menggunakan curl untuk mengirim data tentang panggilan masuk ke server eksternal dengan PHP untuk memproses dan menyimpan ke database.  Anda dapat menulis ke file lokal dengan kesuksesan yang sama, meskipun memori pada router tidak tebal. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh cat /dev/ttyUSB0 | while read DATA; do if echo $DATA | grep -q CLIP ; then curl --silent --output /dev/null --data "data=$DATA" http://1.2.3.4:8081/border.php fi done</span></span></code> </pre><br>  Di server, saya membuat database di mysql dan beberapa piring: dengan nomor telepon penduduk kami, dan dengan log panggilan.  Menjadi mungkin untuk membandingkan siapa yang membuka penghalang pada jam berapa, dan apakah mereka mencoba menggunakannya dari angka yang tidak diketahui. <br><br>  Gagasan kedua yang muncul di benak saya adalah membuat hubungan antara acara membuka penghalang dan foto acara ini.  Masalahnya, seperti yang saya sebutkan di atas, di sekitar rumah ada kamera AHD yang menulis ke perekam dengan akses ke aliran melalui IP.  Selain itu, salah satu kamera secara khusus diputar ke penghalang, untuk mengantisipasi bahwa mereka akan memecahkannya. <br><br>  Saya tidak dapat menemukan cara menghapus jpeg dari registrar China kami, meskipun di banyak kamera ada URL Pratinjau.  Oleh karena itu, saya berbicara langsung - pada saat panggilan saya mendapatkan RTSP dan menjadikannya JPG. <br><br><pre> <code class="bash hljs">ffmpeg -i <span class="hljs-string"><span class="hljs-string">"rtsp://2.3.4.5:554/user=user&amp;password=password&amp;channel=1&amp;stream=0.sdp?"</span></span> -y -f image2 -t 0.001 -ss 00:00:3 -s 1280*720 /tmp/screenshot.jpg</code> </pre> <br>  Dengan kesuksesan yang sama, dimungkinkan untuk menulis klip kecil di mp4, tetapi saya menemukan ini berlebihan. <br>  Foto memutuskan untuk menyimpan gumpalan di MySQL.  Solusi kinerja begitu-begitu, tetapi "menyeret" proyek akan lebih mudah, Anda tidak perlu menyalin database dan file, semuanya ada di database.  Dan beban pada dirinya pada dasarnya tidak ada. <br><br>  Akibatnya, log entri terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/xg/53/g5/xg53g5nxegvogrwkccgei-5khwm.jpeg"><br><br><h3>  Bagian 4. Memuat angka dari database SQL di situs ke controller </h3><br>  Jika Anda membaca dengan seksama, Anda mungkin memperhatikan bahwa untuk mendaftarkan entri, port USB router berfungsi dalam mode Serial-to-USB converter, dan untuk bekerja dengan basis data nomor di dalam controller, saya harus "mendorong" melalui USBIP ke komputer di rumah saya dan menambahkannya melalui program Windows perubahan.  Ini sangat tidak nyaman, Anda harus melakukan unbind / bind dan bahkan menjalankan konsol usbip di komputer di rumah Anda.  Nah, Anda hanya bisa melakukan ini dari rumah (well, sekali lagi, RDP / VPN, dan sebagainya), dan terutama bukan dari ponsel.  Dipanaskan dua kali lipat bahwa basis data angka harus dipertahankan baik dalam format mdb (program untuk pengontrol dapat mengunggah data dalam Access) dan dalam versi web. <br><br>  Googling yang lancar dari protokol GSM Doorhan tidak bekerja.  Saya tidak mengecualikan bahwa ini adalah semacam perangkat Cina di bawah merek Doorhan.  Karena itu, ia mempersenjatai diri dengan monitor (sniffer) untuk port COM dan mengambil beberapa dump ketika bekerja dari aplikasi asli. <br><br><img src="https://habrastorage.org/webt/ni/3u/u-/ni3uu-5expfpjazyacjotzm7r1q.png"><br><br>  Punya sesuatu seperti: <br>  Memory <code>aa 02 09 00 00 03 e8 01 00 00 00 00 ee</code> Command <code>aa 02 09 00 00 03 e8 01 00 00 00 00 ee</code> <br>  Jawabannya adalah bahwa semuanya berjalan dengan baik <code>aa 20 00 ee</code> <br>  Tim mencatat satu nomor +79999999999 <br> <code>aa 03 10 00 01 2b 37 39 39 39 39 39 39 39 39 39 39 00 00 ee</code> <br> <br>  Dari mana ia membuat kesimpulan sebagai berikut: <br>  mulai dari pengiriman AA, akhir pengiriman EE <br>  Jawabannya adalah bahwa tim diterima 20 00 <br>  Perintah untuk mulai merekam angka 03. Kemudian muncul jumlah angka dalam paket.  Bisa dari 1 hingga 5, yaitu, untuk satu paket, Anda dapat mengirim beberapa nomor sekaligus dalam satu baris, menyelesaikan paket dengan perintah EE, dan mendapatkan satu konfirmasi per blok. <br><br>  Setelah perintah untuk mulai merekam, ada 2 byte (yang kedua tepat, yang pertama mungkin akan digunakan ketika jumlah angka lebih dari 256 tetapi tidak memeriksa) yang menunjukkan nomor seri catatan dalam sel.  Artinya, jika Anda menulis ke memori kosong, maka pertama adalah 1, lalu 2, dan seterusnya.  Kemudian muncul 14 byte nomor telepon.  Karena angka kami “dimasukkan” dalam 12 byte (+79999999999), 2 byte terakhir ditempati oleh nol.  Mungkin untuk semua jenis format internasional seperti +10.  Ini tidak akurat, saya tidak menggali lebih dalam, karena data ini cukup. <br><br>  Pengiriman dengan byte EE berakhir. <br><br>  Dengan nomor seri sel, situasinya tidak sepenuhnya jelas.  Katakanlah 10 angka ditulis ke controller, memori tidak dihapus.  Jika Anda mengirim perintah "tulis angka di sel 5", maka angka di sel ini setelah pengurangan kontrol tidak akan berubah, tetapi controller akan mencatat 11 angka, dan tanggal 11 akan kosong.  Dan jika Anda memberi perintah "tulis nomor di sel 11", maka itu akan ditulis untuk itu.  Ini mungkin karena perintah ADD dan REPLACE (tambah dan ubah), yang dapat dikirim melalui SMS.  Tetapi karena aplikasi asli hanya menyelesaikan penghapusan dan penulisan ulang daftar, hipotesis tidak dapat diverifikasi.  Oleh karena itu, ia juga membuat versinya dengan mengirimkan perintah write erase dan sequential ke satu nomor (untuk kesederhanaan). <br><br>  Jadi, kami datang untuk menulis perintah untuk mengelola daftar pelanggan ke controller melalui port serial.  Tapi port ada di router, dan database dengan pengguna di server eksternal.  Tentu saja, Anda dapat mentransfernya ke router (Anda mendapatkan solusi lengkap "di luar kotak"), tapi saya terlalu malas.  Saya pergi ke arah lain - saya melempar / dev / ttyUSB0 pada tcp menggunakan paket ser2net, yang ada dalam paket openwrt. <br><br>  Config /etc/ser2net.conf sederhana untuk tidak senonoh <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">3333</span></span><span class="hljs-symbol"><span class="hljs-symbol">:raw</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/dev/ttyUSB0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">9600</span></span>,remctl</code> </pre> <br>  Setelah memulai ser2net, Anda dapat terhubung ke router telnet pada port 3333 dan memeriksa hasilnya. <br><br>  Saya ingin membuat reservasi: setelah memulai kembali router, cat / dev / ttyUSB0 tidak bekerja secara tiba-tiba.  Tentu saja itu berhasil, tetapi saya menulis sampah ke konsol.  Saya ingat bahwa selama percobaan di router saya menjalankan minicom, yang mungkin melakukan inisialisasi port.  Hanya pengaturan mode 9600 8n1 tidak bekerja, jadi saya melihat dengan stty pengaturan port mana yang dalam keadaan "berfungsi" dan memasukkan inisialisasi dalam rc.local <br><br><pre> <code class="hljs powershell">stty <span class="hljs-operator"><span class="hljs-operator">-F</span></span> /dev/ttyUSB0 <span class="hljs-number"><span class="hljs-number">9600</span></span> ignbrk <span class="hljs-literal"><span class="hljs-literal">-brkint</span></span> <span class="hljs-literal"><span class="hljs-literal">-icrnl</span></span> <span class="hljs-literal"><span class="hljs-literal">-imaxbel</span></span> <span class="hljs-literal"><span class="hljs-literal">-opost</span></span> <span class="hljs-literal"><span class="hljs-literal">-onlcr</span></span> <span class="hljs-literal"><span class="hljs-literal">-isig</span></span> <span class="hljs-literal"><span class="hljs-literal">-icanon</span></span> <span class="hljs-literal"><span class="hljs-literal">-iexten</span></span> <span class="hljs-literal"><span class="hljs-literal">-echo</span></span> <span class="hljs-literal"><span class="hljs-literal">-echoe</span></span> <span class="hljs-literal"><span class="hljs-literal">-echok</span></span> <span class="hljs-literal"><span class="hljs-literal">-echoctl</span></span> <span class="hljs-literal"><span class="hljs-literal">-echoke</span></span></code> </pre> <br>  Tentunya sesuatu yang berlebihan, pembaca akan memperbaikinya.  Nah, jika Anda menentukan parameter port di ser2net.conf, maka Anda tidak bisa meletakkan paket stty di router. <br><br>  Sebagai hasil dari manipulasi ini di server dengan antarmuka WEB, konsol pengendali menjadi tersedia bagi kami.  Karenanya, kami akan sedikit menulis ulang kode pemrosesan panggilan.  Saya menulis dalam PHP.  Sayang sekali menunjukkan semua kode (pada akhirnya saya bukan seorang programmer, saya menggunakan sisipan dari tutorial), jadi intinya adalah: <br><br><pre> <code class="php hljs"> $re = <span class="hljs-string"><span class="hljs-string">'/CLIP: ".(7\d{10})"/m'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    while (1) { $f=@fsockopen('tcp://10.16.19.19',3333, $errno, $errstr); //   while ($f &amp;&amp; $str=fread($f, 100)) { $test=preg_match($re, $str, $matches); if ($test) process_call($matches[1]); // ,       //           ,  ,   $f sync_phones($f); } if ($f) fclose($f); //-    sleep(5); // 5     }</span></span></code> </pre><br>  Saya pikir semua orang mengimplementasikan process_call sesukanya, dari menulis informasi ke file log, hingga membuat entri foto / video dan mengirimkannya melalui bot Telegram ke ponsel pasangannya, serta tim ke pembuat kopi atau untuk menghangatkan borsch. <br><br>  Saya akan membahas sync_phones secara lebih terperinci, karena mengimplementasikan algoritma yang sangat “non-publik” dari pengontrol-pintu Doorhan GSM.  Dan ya, wajah kecil, saya menggunakan mysql bukan pdo atau mysqli. <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sync_phones</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($f)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*   config   update.   -  val=1,        .     ,       mysql,     */</span></span> $result=mysql_query(<span class="hljs-string"><span class="hljs-string">"SELECT * FROM config WHERE name='update' AND val=1"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mysql_num_rows($result)==<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; $init = pack(<span class="hljs-string"><span class="hljs-string">'H*'</span></span>,<span class="hljs-string"><span class="hljs-string">'aa1100ee'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//-        $clear = pack('H*','aa0209000003e80100000000ee'); //    (   -) $logfile=fopen("/tmp/border.log","a"); fwrite($logfile,"Update started at ".date('Ymd H:i:s')."\n"); fwrite($f,$init); sleep(1); $ans=fread($f, 40); fwrite($logfile,"Send init. Answer ".bin2hex ( $ans )."\n"); fwrite($f,$clear); sleep(1); $ans=fread($f, 40); fwrite($logfile,"Send clear. Answer ".bin2hex ( $ans )."\n"); $result=mysql_query("SELECT * FROM phones ORDER BY pid"); //  , select     ,      $n=1; while($row=mysql_fetch_array($result)) { $start = 'aa0310'; $pos = sprintf("%04x",$n); $phone = bin2hex('+'.$row['phone']).'0000'; $end = 'ee'; // "" $send=$start.$pos.$phone.$end; $bin=pack('H*',$send); fwrite($f,$bin); $ans=fread($f, 40); fwrite($logfile,"Write {$n} phone {$row['phone']}. Answer ".bin2hex ( $ans )."\n"); $n++; } fwrite($logfile,"End update\n"); fclose($logfile); //   "" ,   ,  .   ,     mysql_query("UPDATE config SET val=0,result='".bin2hex ( $ans )."',updated=NOW() WHERE name='update'"); } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> <br><h3>  Bagian 5. Kesimpulan </h3><br>  Sebagai hasilnya, saya menerima (menulis) antarmuka WEB untuk penghalang, di mana saya dapat pergi melalui browser seluler, menambah / menghapus / mengubah jumlah penghuni rumah kami di sana, membuat catatan, dengan mengacu pada apartemen, nama, nomor telepon, nomor mobil.  Ada foto-foto mobil, log entri melalui penghalang dengan foto.  Di masa depan, menurut log, saya akan melihat siapa yang menciptakan beban terbesar pada penghalang - dia akan membayar untuk perbaikan :) <br><br>  Nah, bonusnya adalah titik WIFI di tempat parkir dekat rumah. <br><br>  Harga masalah adalah 0 rubel dan hari libur di komputer. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id415805/">https://habr.com/ru/post/id415805/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id415791/index.html">Optimalisasi kontrak pintar. Bagaimana Jenis Soliditas Mempengaruhi Biaya Transaksi</a></li>
<li><a href="../id415793/index.html">Panduan pemesanan domain lengkap</a></li>
<li><a href="../id415795/index.html">Menulis Snapchat UI di Swift</a></li>
<li><a href="../id415797/index.html">Ekspresi reguler + pemrograman logis. Apa hasilnya?</a></li>
<li><a href="../id415801/index.html">Google: AI "telepon" kami tidak cukup baik untuk berbahaya</a></li>
<li><a href="../id415809/index.html">Cara menggunakan kedelai, requireejs, backbone js dalam plugin untuk Atlassian Jira</a></li>
<li><a href="../id415811/index.html">AI, tentu saja praktis. Tinjauan jaringan saraf untuk klasifikasi gambar</a></li>
<li><a href="../id415813/index.html">Beberapa catatan tentang kondisi Cloud Gaming saat ini</a></li>
<li><a href="../id415815/index.html">Di garis depan sains: analisis artikel arxiv.org</a></li>
<li><a href="../id415817/index.html">Kami meng-overclock cadangan. Kuliah Yandex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>