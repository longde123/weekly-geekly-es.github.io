<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🎓 🤰🏿 👐🏼 光学流量计算中的深度学习 👨‍✈️ 🉐 🙋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="随着许多不同的神经网络体系结构的出现，许多经典的计算机视觉技术已成为过去。 人们越来越少地使用SIFT和HOG进行对象检测，使用MBH进行动作识别，如果使用它们，则更像是为相应网格制作的手工标志。 今天，我们将探讨经典的CV问题之一，在经典的CV问题中，经典的方法仍然占据主导地位，而DL体系结构则懒...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>光学流量计算中的深度学习</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ods/blog/446726/"> 随着许多不同的神经网络体系结构的出现，许多经典的计算机视觉技术已成为过去。 人们越来越少地使用SIFT和HOG进行对象检测，使用MBH进行动作识别，如果使用它们，则更像是为相应网格制作的手工标志。 今天，我们将探讨经典的CV问题之一，在经典的CV问题中，经典的方法仍然占据主导地位，而DL体系结构则懒洋洋地将它们吸入头部。 <br><br><img src="https://habrastorage.org/webt/6z/eh/72/6zeh726hjzbg1t7k20ob4wy9_o4.png"><br><a name="habracut"></a><br><h2> 光流估计 </h2><br> 计算两个图像之间（通常是视频的相邻帧之间）的光流的任务是构造一个矢量场 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="2.057ex" viewBox="0 -780.1 763.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-4F" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> O </script> 同样大小 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>i</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>j</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.317ex" height="2.419ex" viewBox="0 -780.1 4011.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-4F" x="0" y="0"></use><g transform="translate(763,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="1593" y="0"></use><g transform="translate(1938,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="2768" y="0"></use><g transform="translate(3181,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>i</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>j</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-2"> O（i，j）</script> 将对应于视在像素位移矢量 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>i</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>j</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.544ex" height="2.419ex" viewBox="0 -780.1 3248 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="829" y="0"></use><g transform="translate(1175,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="2005" y="0"></use><g transform="translate(2417,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>i</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>j</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-3">（i，j）</script> 从第一帧到第二帧。 通过在视频的所有相邻帧之间构造这样的矢量场，我们可以获得某些对象如何在视频上移动的完整图片。 换句话说，这是跟踪视频中所有像素的任务。 光学流的使用极为广泛-例如，在动作识别任务中，此类矢量场使您可以专注于视频上发生的运动并远离其上下文[7]。 视觉测距，视频压缩，后处理（例如，添加慢动作效果）等更常见的应用。 <br><br><img src="https://habrastorage.org/webt/pf/hx/t6/pfhxt6t_fawwqjyxiptno85zyge.png" width="720" height="360"><br><br> 存在一些模棱两可的余地-从数学的角度来看，什么才算是可见的偏差？ 通常，假定像素值从一帧到下一帧没有变化，换句话说： <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>i</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>j</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>=</mo><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>i</mi><mo>+</mo><msub><mi>u</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>j</mi><mo>+</mo><msub><mi>u</mi><mi>j</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>t</mi><mo>+</mo><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="42.044ex" height="2.66ex" viewBox="0 -780.1 18102.2 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="0" y="0"></use><g transform="translate(504,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="1334" y="0"></use><g transform="translate(1679,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="2509" y="0"></use><g transform="translate(2922,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-74" x="3752" y="0"></use><g transform="translate(4113,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-3D" x="5221" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="6277" y="0"></use><g transform="translate(6782,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="7612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2B" x="8180" y="0"></use><g transform="translate(9180,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="809" y="-213"></use></g><g transform="translate(10097,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="10927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2B" x="11562" y="0"></use><g transform="translate(12563,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="809" y="-213"></use></g><g transform="translate(13527,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-74" x="14357" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2B" x="14941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-31" x="15941" y="0"></use><g transform="translate(16442,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><g transform="translate(17272,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>i</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>j</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>=</mo><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>i</mi><mo>+</mo><msub><mi>u</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>j</mi><mo>+</mo><msub><mi>u</mi><mi>j</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>t</mi><mo>+</mo><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> I（i，j，t）= I（i + u_i，j + u_j，t + 1），</script></p> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>i</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>j</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.311ex" height="2.419ex" viewBox="0 -780.1 4439.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="829" y="0"></use><g transform="translate(1175,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="2005" y="0"></use><g transform="translate(2417,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-74" x="3247" y="0"></use><g transform="translate(3609,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>i</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>j</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-5">（i，j，t）</script>  -坐标中的像素强度 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>i</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>j</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.544ex" height="2.419ex" viewBox="0 -780.1 3248 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="829" y="0"></use><g transform="translate(1175,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="2005" y="0"></use><g transform="translate(2417,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>i</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>j</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-6">（i，j）</script> 然后光流 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><msub><mi>u</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>u</mi><mi>j</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.152ex" height="2.66ex" viewBox="0 -780.1 4370.9 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text><g transform="translate(829,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="809" y="-213"></use></g><g transform="translate(1746,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(2576,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="809" y="-213"></use></g><g transform="translate(3540,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><msub><mi>u</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><msub><mi>u</mi><mi>j</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-7">（u_i，u_j）</script> 显示此像素已移至下一个时间点的位置（即下一帧）。 <br><br> 在图片中看起来像这样： <br><br><img src="https://habrastorage.org/webt/55/pv/ql/55pvqliwe25q4uz58mc9vhf5z9m.gif"><br><br><img src="https://habrastorage.org/webt/vk/5b/wr/vk5bwroklj2xdi_ncrk-zihvhic.gif"><br><br> 用向量直接可视化向量字段是可视的，但并不总是方便的，因此第二种常见方法是使用颜色可视化： <br><br><img src="https://habrastorage.org/webt/eb/lc/a2/eblca2o7vwo_d0wtyw8gm9axdte.gif"><br><br><img src="https://habrastorage.org/webt/v4/fp/pe/v4fppenisw4sf3psqncsmg_7xqm.gif"><br><br> 该图片中的每种颜色编码一个特定的向量。 为简单起见，裁剪了长度超过20的矢量，并且可以通过颜色从下图中恢复矢量本身： <br><br><img src="https://habrastorage.org/webt/wa/fo/eh/wafoeh4p14ei82ascjk7te6i0go.png" width="320" height="320"><br><br><div class="spoiler">  <b class="spoiler_title">更多的猫流！</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/4l/mo/nt/4lmont9w39gboi9b127uvnnkxqw.gif"><br><img src="https://habrastorage.org/webt/ki/-p/z4/ki-pz4kopzo9dlhzxc9u01kbkmk.gif"><br><img src="https://habrastorage.org/webt/v1/tb/xw/v1tbxwqp0sxnugfok07tksnzmds.gif"><br><img src="https://habrastorage.org/webt/pn/vj/ds/pnvjdsmzb1ikdyk3koiyfmlbp68.gif"><br><img src="https://habrastorage.org/webt/w4/wd/z-/w4wdz-cvvu21hust2ldrueki_cw.gif"><br><img src="https://habrastorage.org/webt/fx/xz/wy/fxxzwyibq5qcpaapl4tcj0f2mju.gif"><br><img src="https://habrastorage.org/webt/lo/kj/0w/lokj0wamraallgkyt1el0udou0e.gif"><br><img src="https://habrastorage.org/webt/ui/2k/ac/ui2kacgkblcf9c_5u5hkdelnxfg.gif"><br><img src="https://habrastorage.org/webt/hc/g0/me/hcg0mecxdbevoasfbcrsavhnbte.gif"><br><img src="https://habrastorage.org/webt/f3/gr/32/f3gr32ufn8t4rhuoecwnjhqy2l0.gif"><br><img src="https://habrastorage.org/webt/yr/dm/4t/yrdm4t_qnwmpoeurnwyhawdxgqw.gif"><br><img src="https://habrastorage.org/webt/p3/rb/qi/p3rbqiggl8o5tptv21ydinm5wfw.gif"><br></div></div><br> 古典方法已经达到了相当好的精度，有时要付出代价。 我们将考虑过去4年中神经网络在解决此问题方面所取得的进展。 <br><br><h2> 数据和指标 </h2><br> 在我们的故事开始时（即2015年），用两个词来说明哪些数据集可用并广受欢迎，以及它们如何衡量所得算法的质量。 <br><br><h5> 米德尔伯里 </h5><br> 一个由8对具有小偏移量的图像组成的微小数据集，尽管如此，有时甚至仍在验证算法中使用该数据集来计算光通量。 <br><br><img src="https://habrastorage.org/webt/nc/oo/tt/ncoott5vvw5zietkw5vz6xixzpa.png"><br><br><h5> 小猫咪 </h5><br> 这是为自动驾驶汽车应用标记的数据集，并使用LIDAR技术进行了组装。 它被广泛用于验证光流计算算法，并且包含许多相当复杂的情况，并且帧之间存在急剧的过渡。 <br><br><img src="https://habrastorage.org/webt/nc/6c/82/nc6c824qepdccm51ynf1uc9ip5i.jpeg"><br><br><h5> 辛特尔 </h5><br> 另一个非常常见的基准，是在公开基础上创建的，并以Blender动画片Sintel绘制为两个版本，分别指定为“干净”和“最终”。 第二个要复杂得多，因为 计算光通量的算法包含许多大气效应，噪声，模糊和其他问题。 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ZmiBI4tPk_o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h5> 珍珠棉 </h5><br> 光流计算任务的标准误差函数是端点误差或EPE。 这只是在所有像素上平均的计算算法与真实光通量之间的欧几里得距离。 <br><br><h2>  Flownet（2015年） </h2><br> 早在2015年开始为计算光通量而着手构建神经网络架构时，作者（来自慕尼黑大学和弗莱堡大学）就面临两个问题：该任务没有大量标记的数据集，而手动标记则很困难（尝试标记我的移动位置）下一帧图像的每个像素）。 此任务与之前借助CNN架构解决的所有任务有很大不同。 实际上，这是逐像素回归的任务，这使其类似于分割任务（逐像素分类），但是除了一个图像之外，我们有两个输入，直观上，这些符号必须以某种方式显示两个图像之间的差异。 作为第一个迭代，决定简单地弹出两个RGB帧作为输入（实际上已经接收到6通道图像），在这两个帧之间我们要计算光流，并采用U-net作为具有许多更改的体系结构。 该网络称为FlowNetS（S代表简单）： <br><br><img src="https://habrastorage.org/webt/pv/tw/ss/pvtwssodmmsjy6a58kmlvovgp80.png"><br><br><img src="https://habrastorage.org/webt/uj/tl/g-/ujtlg-sweodxqqisb9kjehzd_2a.png"><br><br> 从图中可以看出，编码器并不引人注目，解码器在一些方面与经典选项有所不同： <br><br><ol><li> 光流的预测不仅从最后一级开始，而且从所有其他水平开始。 为了获得第i级解码器的地面真值，只需将原始目标（即光流）减小（几乎与图像相同）到所需分辨率，并且在第i级获得的谓词就更进一步，t即，它与从该级别出现的功能图串联在一起。 训练损耗的一般功能是解码器所有级别的损耗的加权总和，而权重本身越大，则级别越接近网络输出。 作者没有给出为什么这样做的解释，但是最有可能的原因是这样的事实，即在早期水平上可以更好地检测到尖锐的运动，因此低分辨率光流中的矢量不会太大。 </li><li> 该图显示图像的输入分辨率为384x512，而输出则小四倍。 作者注意到，如果通过简单的双线性插值将此输出增加到384x512，则将获得与附加两个以上级别的解码器相同的质量。 您也可以使用变分方法[2]，以证明质量（质量表中的+ v）。 </li><li> 与在U-net中一样，来自编码器的属性卡被发送到解码器并进行连接，如图所示。 </li></ol><br><img src="https://habrastorage.org/webt/n3/hv/wt/n3hvwta--ipyc3rvgod2w1lfrnu.png"><br><br> 要了解作者如何尝试改善基线，您需要知道图像之间的相关性以及为什么它在计算光通量时有用。 因此，拥有两个图像并知道第二个是相对于第一帧的视频中的下一帧，我们可以尝试将第一帧上该点周围的区域（我们要查找到第二帧的偏移）与第二个图像中相同大小的区域进行比较。 此外，假设每单位时间的偏移量不能太大，则只能在起始点的某个邻域中考虑比较。 为此，使用互相关。 让我们举例说明。 <br><br> 以视频的两个相邻帧为例，我们要确定某个点从第一帧移到第二帧的位置。 假设此点附近的某些区域以相同的方式移动。 实际上，视频中的相邻像素通常会偏移在一起，例如 在视觉上，很可能是一个对象的一部分。 例如，可以在差分方法中积极使用此假设，可以在[5]，[6]中更详细地阅读。 <br><br><pre><code class="python hljs">fig, ax = plt.subplots(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) ax[<span class="hljs-number"><span class="hljs-number">0</span></span>].imshow(frame1) ax[<span class="hljs-number"><span class="hljs-number">1</span></span>].imshow(frame2);</code> </pre> <br><img src="https://habrastorage.org/webt/an/it/s5/anits5i5bvq4kreaodhtn1xtxeg.png"><br><br> 让我们尝试在小猫爪子的中心点，然后在第二帧找到它。 在其周围占据一些区域。 <br><br><pre> <code class="python hljs">patch1 = frame1[<span class="hljs-number"><span class="hljs-number">90</span></span>:<span class="hljs-number"><span class="hljs-number">190</span></span>, <span class="hljs-number"><span class="hljs-number">140</span></span>:<span class="hljs-number"><span class="hljs-number">250</span></span>] plt.imshow(patch1);</code> </pre> <br><img src="https://habrastorage.org/webt/mr/he/rg/mrherghnedxhdep1yus3wvrtym8.png"><br><br> 我们计算该区域（在英国文学中经常从第一张图片写模板或补丁）与第二张图片之间的相关性。 模板将简单地“遍历”第二张图像，并在其自身与第二张图像中相同大小的片段之间计算以下值： <br><br><img src="https://habrastorage.org/webt/iz/jz/vi/izjzvibw_g1nqwnpttrby6qtax8.png"><br><br> 该值的值越大，则模板看起来越像第二张图像中的相应片段。 使用OpenCV，可以这样进行： <br><br><pre> <code class="python hljs">corr = cv2.matchTemplate(frame2, patch1, cv2.TM_CCORR_NORMED) plt.imshow(corr, cmap=<span class="hljs-string"><span class="hljs-string">'gray'</span></span>);</code> </pre><br> 更多细节可以在[7]中找到。 <br><br> 结果如下： <br><br><img src="https://habrastorage.org/webt/k0/k_/ph/k0k_phkyfonxwflqwatxrw6hynu.png"><br><br> 我们看到一个清晰的峰，用白色表示。 在第二帧找到它： <br><br><pre> <code class="python hljs">min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(corr) h, w, _ = patch1.shape top_left = max_loc bottom_right = (top_left[<span class="hljs-number"><span class="hljs-number">0</span></span>] + w, top_left[<span class="hljs-number"><span class="hljs-number">1</span></span>] + h) frame2_copy = frame2.copy() cv2.rectangle(frame2_copy, top_left, bottom_right, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) plt.imshow(frame2_copy);</code> </pre> <br><img src="https://habrastorage.org/webt/bo/11/v9/bo11v9zepjhqgzm5f_b6ckbrmbs.png"><br><br> 我们看到正确找到了脚，根据这些数据，我们可以了解脚从第一帧移动到第二帧的方向，并计算出相应的光通量。 另外，事实证明，该操作对光度畸变具有相当的抵抗力，即 如果第二帧的亮度急剧上升，则图像之间的互相关峰值将保持在原位。 <br><br> 考虑到以上所有内容，作者决定将所谓的相关层引入其体系结构，但决定不根据输入图像来考虑相关性，而是根据经过多层编码器后的属性映射来考虑。 出于明显的原因，该层没有学习参数，尽管其本质上与卷积相似，但是在这里我们不使用权重，而是使用第二张图像的某些区域来代替滤镜： <br><br><img src="https://habrastorage.org/webt/j2/xx/bg/j2xxbga6vl1jvffhsbjzndhkul4.png"><br><br> 奇怪的是，这个技巧并没有显着改善本文作者的质量，但是，它更成功地应用于了进一步的工作中，在[9]中，作者能够证明通过稍微改变训练参数可以使FlowNetC更好地工作。 <br><br> 作者以一种非常优雅的方式解决了缺少数据集的问题：他们以1024×768的分辨率从Flickr上以主题为“城市”，“风景”，“山”刮下了964张图像，并以512×384的背景作为裁剪背景，然后抛出了一些图像。开放式渲染3D模型中的椅子。 然后，将各种仿射变换独立地应用于椅子和背景，它们用于成对生成第二张图像以及它们之间的光流。 结果如下： <br><br><img src="https://habrastorage.org/webt/4y/s7/qn/4ys7qnoa1fn9s8kaw_kclb_dtig.png"><br><br><img src="https://habrastorage.org/webt/07/y2/k5/07y2k5ryvqboyvz6w8udnenc5fq.png"><br><br> 一个有趣的结果是，使用这样的综合数据集可以使来自另一个域的数据获得相对较高的质量。 当然，对相应数据的微调被证明具有更高的质量（下表中的+ ft）： <br><br><img src="https://habrastorage.org/webt/vu/wz/vt/vuwzvtxwgfrwsl5okrh_bgrk9ao.png"><br><br> 真实视频的结果可以在这里看到： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/k_wkDLJ8lJE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2> 间谍网（2016） </h2><br> 在随后的许多文章中，作者试图通过解决对突然运动的认识不佳的问题来提高质量。 直观地，如果运动的矢量明显超出激活的接受范围，则该运动将不会被网络捕获。 建议解决此问题的原因有三点：较大的卷积，金字塔和将一个图像从一对“扭曲”到光流中。 一切都井井有条。 <br><br> 因此，如果我们有几个图像中的对象发生了急剧移动（超过10个像素），那么我们可以简单地将图像缩小（减少6倍或更多倍）。 偏移的绝对值将大大降低，并且网络更有可能“捕获”它，尤其是当其卷积大于偏移本身时（在这种情况下，使用7x7卷积）。 <br><br><img src="https://habrastorage.org/webt/ec/-w/c4/ec-wc4u9vfdfqhcw-auhrcbmdqo.jpeg"><br><br> 但是，在缩小图像时，我们丢失了许多重要的细节，因此我们应该进入金字塔的下一个层次，在该金字塔中图像的大小已经很大，同时以某种方式考虑了我们在计算较小尺寸的光通量时收到的信息。 这是使用翘曲运算符完成的，该运算符根据可用的光通量近似值（在先前级别获得）重新计数第一张图像。 这种情况下的一种改进是，根据光通量的近似“推”的第一个图像将比原始图像更接近第二个图像，也就是说，我们再次减小了光通量的绝对值，我们需要对其进行预测（回想一下，值较小更好地检测到运动，因为它们完全包含在一个卷积中。 从数学的角度来看，具有位图图像I和光通量V的近似值，翘曲算子可以描述如下： <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>w</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>=</mo><msub><mi>I</mi><mi>w</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mspace width=&quot;thickmathspace&quot; /><mspace width=&quot;thickmathspace&quot; /><msub><mi>I</mi><mi>w</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>=</mo><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>x</mi><mo>+</mo><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="47.968ex" height="2.419ex" viewBox="0 -780.1 20652.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-77" x="0" y="0"></use><g transform="translate(716,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="1546" y="0"></use><g transform="translate(2050,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-56" x="2880" y="0"></use><g transform="translate(3650,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-3D" x="4758" y="0"></use><g transform="translate(5814,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-77" x="622" y="-213"></use></g><g transform="translate(6861,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(8247,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-77" x="622" y="-213"></use></g><g transform="translate(9294,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-78" x="10124" y="0"></use><g transform="translate(10696,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-3D" x="11804" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="12860" y="0"></use><g transform="translate(13365,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-78" x="14195" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2B" x="14990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-56" x="15990" y="0"></use><g transform="translate(16760,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-78" x="17590" y="0"></use><g transform="translate(18162,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><g transform="translate(18992,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><g transform="translate(19822,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>w</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>V</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>=</mo><msub><mi>I</mi><mi>w</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mspace width="thickmathspace"></mspace><mspace width="thickmathspace"></mspace><msub><mi>I</mi><mi>w</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>=</mo><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>x</mi><mo>+</mo><mi>V</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> w（I，V）= I_w，\; \; I_w（x）= I（x + V（x）），</script></p> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>i</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>j</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.972ex" height="2.419ex" viewBox="0 -780.1 5154.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-3D" x="850" y="0"></use><g transform="translate(1906,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="2736" y="0"></use><g transform="translate(3082,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6A" x="3912" y="0"></use><g transform="translate(4324,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>i</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>j</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-9"> x =（i，j）</script>  ，即 图片中的特定点 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x6211;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.928ex" height="2.298ex" viewBox="0 -780.1 830 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">我</text></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>我</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-10">我</script>  -图片本身 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.057ex" viewBox="0 -780.1 769.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> V </script>  -光流 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>I</mi><mi>w</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.432ex" height="2.419ex" viewBox="0 -780.1 1047.1 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-77" x="622" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>I</mi><mi>w</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-12"> I_w </script>  -产生的图像“包裹”在光流中。 <br><br> 如何在CNN架构中应用所有这些？ 我们确定金字塔等级 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> k </script> 以及将每个后续图像从最后一个图像开始缩小的因子 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> n </script>  。 表示为 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mo>&amp;#x2217;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.266ex" height="2.298ex" viewBox="0 -780.1 3128.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-64" x="0" y="0"></use><g transform="translate(523,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2217" x="1575" y="0"></use><g transform="translate(2298,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mo>∗</mo><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-15"> d（*）</script> 和 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mo>&amp;#x2217;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.38ex" height="2.298ex" viewBox="0 -780.1 3177.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-75" x="0" y="0"></use><g transform="translate(572,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2217" x="1624" y="0"></use><g transform="translate(2347,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mo>∗</mo><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-16"> u（*）</script> 图像或光通量的下采样和上采样功能就是这个因素。 <br><br> 我们还将获得一套CNN-ok { <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>G</mi><mn>0</mn></msub><mo>.</mo><mo>.</mo><mo>.</mo><msub><mi>G</mi><mi>k</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.898ex" height="2.419ex" viewBox="0 -780.1 3831.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-30" x="1112" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2E" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2E" x="1685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2E" x="2130" y="0"></use><g transform="translate(2575,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="1112" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>G</mi><mn>0</mn></msub><mo>.</mo><mo>.</mo><mo>.</mo><msub><mi>G</mi><mi>k</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-17"> G_0 ... G_k </script>  }，每个金字塔等级。 然后 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>G</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.626ex" height="2.419ex" viewBox="0 -780.1 1130.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="1112" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>G</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-18"> G_i </script>  -th网络将接受带有 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x6211;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.928ex" height="2.298ex" viewBox="0 -780.1 830 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">我</text></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>我</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-19">我</script> 金字塔能级和光通量 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>G</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.727ex" height="2.539ex" viewBox="0 -780.1 2035.2 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><g transform="translate(786,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-31" x="1124" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>G</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-20"> G_ {i-1} </script> 级别（ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>G</mi><mn>0</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.881ex" height="2.419ex" viewBox="0 -780.1 1240.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-30" x="1112" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>G</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-21"> G_0 </script> 只会接受零的张量）。 在这种情况下，我们将图像中的一个发送到扭曲层以减小它们之间的差异，并且我们将不会预测此级别的光通量，而是需要将其值添加到前一个级别的增加（上采样）的光通量中以获得该光通量在这个水平上。 在公式中，它看起来像这样： <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>v</mi><mi>k</mi></msub><mo>=</mo><msub><mi>G</mi><mi>k</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><msubsup><mi>I</mi><mi>k</mi><mn>1</mn></msubsup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>w</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><msubsup><mi>I</mi><mi>k</mi><mn>2</mn></msubsup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><msub><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="40.276ex" height="3.021ex" viewBox="0 -883.9 17341 1300.8" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="686" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-3D" x="1232" y="0"></use><g transform="translate(2288,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="1112" y="-213"></use></g><g transform="translate(3543,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(4373,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-31" x="740" y="488"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="622" y="-463"></use></g><g transform="translate(5351,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-77" x="6181" y="0"></use><g transform="translate(6897,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(7727,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-32" x="740" y="488"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="622" y="-463"></use></g><g transform="translate(8705,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-75" x="9535" y="0"></use><g transform="translate(10107,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(10937,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-56" x="0" y="0"></use><g transform="translate(583,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2212" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-31" x="1300" y="0"></use></g></g><g transform="translate(12894,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><g transform="translate(13724,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(14554,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-56" x="0" y="0"></use><g transform="translate(583,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2212" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-31" x="1300" y="0"></use></g></g><g transform="translate(16511,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>v</mi><mi>k</mi></msub><mo>=</mo><msub><mi>G</mi><mi>k</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><msubsup><mi>I</mi><mi>k</mi><mn>1</mn></msubsup><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>w</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><msubsup><mi>I</mi><mi>k</mi><mn>2</mn></msubsup><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><msub><mi>V</mi><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><msub><mi>V</mi><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-22"> v_k = G_k（I_k ^ 1，w（I_k ^ 2，u（V_ {k-1}），V_ {k-1}）</script></p><br> 为了获得光流本身，我们只需添加网络谓词和上一级的增加的流： <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>V</mi><mi>k</mi></msub><mo>=</mo><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><msub><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>+</mo><msub><mi>v</mi><mi>k</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.329ex" height="2.539ex" viewBox="0 -780.1 8752.6 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="825" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-3D" x="1330" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-75" x="2386" y="0"></use><g transform="translate(2958,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(3788,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-56" x="0" y="0"></use><g transform="translate(583,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2212" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-31" x="1300" y="0"></use></g></g><g transform="translate(5745,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-2B" x="6797" y="0"></use><g transform="translate(7798,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6B" x="686" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>V</mi><mi>k</mi></msub><mo>=</mo><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><msub><mi>V</mi><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>+</mo><msub><mi>v</mi><mi>k</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-23"> V_k = u（V_ {k-1}）+ v_k</script></p> 要在此级别获得网络的地面真理，我们需要执行相反的操作-从先前的金字塔级别中减去目标的谓词（减少至所需级别）。 从示意图上看，它看起来像这样： <br><br><img src="https://habrastorage.org/webt/yh/sa/_1/yhsa_1bbklhllkzucdplckzkgk4.png"><br><br> 这种方法的优点是我们可以独立地教授每个级别。 作者从0级开始训练，随后的每个网络都使用前一个参数初始化。 由于每个网络 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>G</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.626ex" height="2.419ex" viewBox="0 -780.1 1130.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="1112" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>G</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-24"> G_i </script> 与大图像中光通量的完整计算相比，解决此问题要简单得多，因此可以减少参数。 如此之大，以至于现在整个整体都可以安装在移动设备上： <br><br><img src="https://habrastorage.org/webt/hc/8o/hs/hc8ohs8qo36ifqfzlrxio5c6gas.png"><br><br> 集成本身如下（一个三层金字塔的示例）： <br><br><img src="https://habrastorage.org/webt/x1/5e/n1/x15en1dysqgqcbfs9qlmwqse7da.png"><br><br> 直接谈论架构仍有待探讨 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>G</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.626ex" height="2.419ex" viewBox="0 -780.1 1130.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="1112" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>G</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-25"> G_i </script> 网络并盘点。 每个网络 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>G</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.626ex" height="2.419ex" viewBox="0 -780.1 1130.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-69" x="1112" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>G</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-26"> G_i </script> 由5个卷积层组成，每个卷积层都以ReLU激活结束，最后一层除外（预测光流）。 每层过滤器的数量分别为{ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>32</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mn>64</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mn>32</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mn>16</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.173ex" height="2.298ex" viewBox="0 -780.1 7824.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-32" x="500" y="0"></use><g transform="translate(1001,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(1830,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-34" x="500" y="0"></use></g><g transform="translate(2831,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(3661,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-32" x="500" y="0"></use></g><g transform="translate(4662,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(5492,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-36" x="500" y="0"></use></g><g transform="translate(6493,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMAIN-32" x="7323" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>32</mn><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mn>64</mn><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mn>32</mn><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mn>16</mn><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-27"> 32，64，32，16，2 </script>  }。 神经网络的输入（图像，“包裹”在光流中的第二个图像以及光流本身）仅根据通道的大小进行连接，因此它们的输入张量为8。结果令人印象深刻： <br><br><img src="https://habrastorage.org/webt/sm/gf/s5/smgfs5juy2q0nnpv4gptlatevlw.png"><br><br><h2>  PWC-Net（2018） </h2><br> 受德国同事的成功启发，NVIDIA的员工决定运用他们的经验（和视频卡）进一步改善结果。 他们的工作主要基于先前模型（SpyNet）的思想，因此PWC-Net还将按顺序处理金字塔，但处理卷积金字塔，而不是原始图像。 <br><br> 使用原始像素强度来计算光通量并不总是合理的，因为 亮度/对比度的急剧变化将打破我们的假设，即像素从一帧移至下一帧而不会发生变化，并且算法将无法抵抗这种变化。 在用于计算光通量的经典算法中，使用了各种变换来缓解这种情况，在这种情况下，作者决定为模型提供机会自己学习这种变换。 因此，代替了PWC-Net中的图像金字塔，而是使用了卷积金字塔（因此Pwc-Net中的第一个字母），即 只是来自不同CNN图层的要素地图，在此称为要素金字塔提取器。 <br><br> 然后，一切都几乎像在SpyNet中一样，就在您提交给被称为光流估算器的CNN之前，您需要的一切，即： <br><br><ul><li> 图片（在这种情况下，是来自要素金字塔提取器的要素地图）， </li><li> 在上一级计算的上采样光通量， </li><li> 第二张图像被“包裹”（记住翘曲层，因此是pWc-Net中的第二个字母）进入该光流， </li></ul><br> 在“包装的”第二帧和通常的第一帧之间（再次提醒您，这里使用带有特征金字塔提取器的功能卡代替原始图像）考虑了所谓的成本量（因此pwC-Net中的第三个字母）先前考虑的两个图像之间的相关性。 <br><br><img src="https://habrastorage.org/webt/mh/f1/rl/mhf1rlctjqtb8pwymdzzlju1dpa.png"><br><br> 最终的联系是上下文网络，该上下文网络在光流量估算器之后立即添加，并扮演了对计算出的光流进行训练后处理的角色。 可以在扰流板下或原始文章中查看建筑细节。 <br><br><div class="spoiler">  <b class="spoiler_title">贴心细节</b> <div class="spoiler_text"> 因此，特征金字塔提取器对两个图像具有相同的权重，对于每个卷积，将泄漏ReLU用作非线性。 为了降低每个后续级别的特征图的分辨率，使用了跨度为2的卷积，并且 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msubsup><mi>c</mi><mi>t</mi><mi>l</mi></msubsup></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.833ex" height="3.037ex" viewBox="0 -950 789.1 1307.5" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6C" x="613" y="500"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-74" x="613" y="-395"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>c</mi><mi>t</mi><mi>l</mi></msubsup></math></span></span><script type="math/tex" id="MathJax-Element-28"> c_t ^ l </script> 表示图像特征图 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-29-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.84ex" height="1.936ex" viewBox="0 -713 361.5 833.5" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-74" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-29"> t </script> 在水平 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.074ex" viewBox="0 -772.3 298.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/446726/&amp;usg=ALkJrhh0eNT-konUrH8qOu3SZPsQzf9cDQ#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi></math></span></span><script type="math/tex" id="MathJax-Element-30"> l </script>  。 <br><br><img src="https://habrastorage.org/webt/er/m5/r3/erm5r3r3hriaukcisvezaosvfcu.png"><br><br> 金字塔第二层的光流估算器（例如）。 这里没有什么异常，每个卷积都以泄漏的ReLU结束，除了最后一个可预测光流的ReLU。 <br><br><img src="https://habrastorage.org/webt/rm/n4/jw/rmn4jwq6vf31ml4xe7-tnyyqkno.png"><br><br> 上下文网络仍处于金字塔的第二层，该网络使用具有相同泄漏ReLU激活的扩张卷积，但最后一层除外。 它使用相同的光流量估算器从该层的末端接收由光流量估算器计算的光流量以及来自第二层的属性。 每个块中的最后一位数字表示膨胀常数。 <br><br><img src="https://habrastorage.org/webt/yj/wj/6r/yjwj6r38by_6fx3bxym5civ0pwu.png"><br><br></div></div><br> 结果更加令人印象深刻： <br><br><img src="https://habrastorage.org/webt/iy/8c/h3/iy8ch3ploolmtrinveqzokfehdo.png"><br><br> 与其他CNN计算光流的方法相比，PWC-Net在质量和参数数量之间取得了平衡： <br><br><img src="https://habrastorage.org/webt/te/3c/6n/te3c6n3jziiqxwv9cggfowif27u.png"><br><br> 作者自己也做了一个精彩的演讲，他们在讨论模型本身及其实验时： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vVU8XV0Ac_0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2> 结论 </h2><br> 解决光流计数问题的体系结构的演变是一个很好的例子，说明了CNN体系结构的进步以及如何将它们与经典方法结合起来可以产生最佳效果。 尽管经典的简历方法仍在质量上取胜，但最近的结果使人们希望这是可以解决的... <br><br><h2> 来源和链接 </h2><br>  1. FlowNet：使用卷积网络学习光流： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">代码</a> 。 <br>  2.大位移光流：变量运动估计中的描述符匹配： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> 。 <br>  3.使用空间金字塔网络进行光流估计： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">代码</a> 。 <br>  4. PWC-Net：使用金字塔，翘曲和成本量进行光流的CNN： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">代码</a> 。 <br>  5.您想了解有关光流的知识，但不好意思问： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> 。 <br>  6.通过卢卡斯-加拿大方法计算光通量。 理论： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> 。 <br>  7.与OpenCVP匹配的模板： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">dock</a> 。 <br>  8. Qu Vadis，动作识别？ 新模型和动力学数据集： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> 。 <br>  9. FlowNet 2.0：借助深层网络进行光流估计的演进： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">代码</a> 。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN446726/">https://habr.com/ru/post/zh-CN446726/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN446714/index.html">来自IT世界的好奇变态-4</a></li>
<li><a href="../zh-CN446716/index.html">世界末日的意识和争论</a></li>
<li><a href="../zh-CN446718/index.html">回顾CodeFest 2019最有趣的报告：True Engineering版本</a></li>
<li><a href="../zh-CN446722/index.html">测试将显示：如何为实施思科ISE做准备，并了解所需的系统功能</a></li>
<li><a href="../zh-CN446724/index.html">iOS开发人员如何通过云计算提高竞争力</a></li>
<li><a href="../zh-CN446728/index.html">无线充电的接收功率如何根据手机的位置而变化</a></li>
<li><a href="../zh-CN446730/index.html">DUMP的后端部分：无服务器，Postgres和Go，.NET Core，GraphQL等</a></li>
<li><a href="../zh-CN446732/index.html">op足类将无济于事：蚂蚁幼体坑陷阱的研究和数学建模</a></li>
<li><a href="../zh-CN446736/index.html">Oracle APEX 报告书</a></li>
<li><a href="../zh-CN446738/index.html">文本的自然语言处理基础</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>