<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¶ üßöüèø üß† La vie avant l'ex√©cution. Rapport Yandex üî≥ ‚¨ÜÔ∏è ‚õπüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un grand projet, la t√¢che d'identifier les modifications pour l'utilisateur final par des diff√©rences dans le code frontal de l'application peut ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La vie avant l'ex√©cution. Rapport Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/454470/">  Dans un grand projet, la t√¢che d'identifier les modifications pour l'utilisateur final par des diff√©rences dans le code frontal de l'application peut survenir.  Le d√©veloppeur de Yandex.Market Nikita Sidorov @nickshevr a expliqu√© comment nous avons r√©solu ce probl√®me en utilisant la biblioth√®que Diffector, comment cr√©er et analyser le graphique du module dans les applications Node.js et comment trouver les d√©fauts dans le code avant son lancement. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/qw/uu/uy/qwuuuy_de8impvpifwc9qdflrka.jpeg"></a> <br><br>  - Aujourd'hui, je vais essayer d'√™tre aussi franc avec vous que possible. <a name="habracut"></a>  Je travaille sur Yandex.Market depuis un peu plus d'un an et demi.  Je fais la m√™me quantit√© de web, et j'ai commenc√© √† remarquer des changements en moi-m√™me, vous pouvez aussi les remarquer.  Ma longueur moyenne de cheveux a augment√© et la barbe a commenc√© √† appara√Ætre.  Et vous savez, aujourd'hui, j'ai regard√© mes coll√®gues: chez Sergei Berezhnoy <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">veged</a> , chez Vova Grinenko <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">tadatuta</a> , et j'ai r√©alis√© - c'est un bon crit√®re pour ce que j'ai presque m√ªri en tant que v√©ritable d√©veloppeur front-end. <br><br>  Et en arrivant √† cette prestation de serment, j'ai d√©cid√© de vous parler de la vie, de celle √† laquelle nous participons tous.  Surtout sur la vie avant l'ex√©cution.  Maintenant, je vais vous expliquer de quoi tout cela sera question. <br><br><img src="https://habrastorage.org/webt/cy/-_/bm/cy-_bmshiyn9hj20-9dbgekd7fo.jpeg"><br><br>  Et la vie?  √Ä propos de la dur√©e de vie du code, bien s√ªr.  Le code est ce que nous faisons.  Permettez-moi de vous rappeler que j'ai d√©cid√© d'√™tre sinc√®re avec vous ici, afin que la premi√®re diapositive soit aussi simple que possible.  J'ai pris la v√©rit√©, la premi√®re √©tape - l'adoption, vous voyez, personne ne contestera cet axiome. <br><br><img src="https://habrastorage.org/webt/p5/si/5n/p5si5n0oneks__xee8nrdwtfbt8.jpeg"><br><br>  Et puis j'ai r√©alis√© que je devrais le modifier, mais pour que ce soit clair.  Que ce soit une sorte d'acceptation des exigences.  Tout code commence par le fait que vous examinez la t√¢che et essayez d'accepter les exigences qui vous d√©finissent. <br><br><img src="https://habrastorage.org/webt/kv/g0/qx/kvg0qxlxoatcyd7mtxhhcbhvsqa.jpeg"><br><br>  Apr√®s cela, bien s√ªr, nous commen√ßons la phase d'√©criture - nous √©crivons notre code.  Ensuite, nous le couvrons avec des tests, nous v√©rifions nous-m√™mes son efficacit√©.  Apr√®s cela, nous v√©rifions d√©j√† si notre application fonctionne avec notre code dans son ensemble.  Apr√®s cela, nous le donnons au testeur - laissez-le v√©rifier.  Que pensez-vous apr√®s √ßa?  Je vous le rappelle, la vie avant l'ex√©cution.  Pensez-vous que le runtime suit cela?  En fait, √ßa se passe comme √ßa.  Et ce n'est pas une erreur dans la pr√©sentation.  Tr√®s souvent, √† n'importe quelle √©tape des v√©rifications - et il y en a peut-√™tre beaucoup plus que je ne l'ai indiqu√© - vous pouvez avoir un coup de fil pour r√©√©crire.  D'accord, cela peut √™tre un gros probl√®me.  Cela peut ralentir la livraison de certaines fonctionnalit√©s en production et, en principe, vous ralentir en tant que d√©veloppeur, car le ticket vous attendra.  Et ici tout passe, passe.  Il y a encore M fois pour N v√©rifications, et alors seulement le code parvient √† l'utilisateur dans le navigateur.  Mais c'est notre objectif.  Notre objectif est d'√©crire du code qui sera vraiment disponible pour l'utilisateur et qui fonctionnera vraiment √† son avantage. <br><br>  Aujourd'hui, nous allons parler de la premi√®re partie.  Sur ce qui se passe avant, mais pas vraiment sur les tests. <br><br><img src="https://habrastorage.org/webt/cd/lo/of/cdlooffg2v4i0j6gmel3c16g0r8.jpeg"><br><br>  Au fait, cela ressemble √† quelque chose comme √ßa.  J'ai pris notre tour dans le tracker, r√©cup√©r√© le mien, compt√© la m√©diane.  Il s'av√®re que mes tickets sont beaucoup moins en d√©veloppement qu'en v√©rification.  Et comme vous le savez, plus le test est long, plus il y a de chances que goto apparaisse au d√©but ou goto apparaisse √† la fin - et je ne veux pas du tout le faire. <br><br>  Et aussi, si vous faites attention, il y a deux mots sur la diapositive ici - d√©veloppement (c'est ce que nous, les d√©veloppeurs faisons) et v√©rification (nous le faisons, mais aussi les testeurs).  Par cons√©quent, le probl√®me est pertinent, en fait, pour les testeurs. <br><br><img src="https://habrastorage.org/webt/fm/sc/qc/fmscqcprnl87tudqe7yqg1p9nky.jpeg"><br><br>  L'objectif est plut√¥t prosa√Øque.  En g√©n√©ral, j'aime dire que la vie doit √™tre simplifi√©e: nous travaillons d√©j√† beaucoup avec vous.  L'objectif ressemble √† ceci, mais vous devez admettre qu'il est plut√¥t √©ph√©m√®re, alors mettons en √©vidence certains crit√®res de base dont l'objectif peut d√©pendre. <br><br>  Bien s√ªr, moins il y a de code, plus c'est facile pour nous.  Plus vite nous aurons des contr√¥les CI, plus vite nous r√©aliserons si nous avons raison ou non.  Autrement dit, localement, il peut g√©n√©ralement commencer pour toujours.  Vitesse de v√©rification - cela s'applique directement au testeur.  Si notre application est volumineuse et doit √™tre v√©rifi√©e dans son int√©gralit√©, c'est un temps √©norme.  La vitesse de lib√©ration d√©pend de tout cela.  Y compris, il est impossible de lib√©rer jusqu'√† ce que nous ayons pass√© tous les contr√¥les et jusqu'√† ce que nous comprenions que le code est exactement celui que nous voulons. <br><br>  Pour r√©soudre certains des probl√®mes dont nous parlons, analysons le graphe de d√©pendance des modules de notre langage de programmation.  Et, en fait, d√©crivons-le. <br><br><img src="https://habrastorage.org/webt/cm/ry/c-/cmryc-ofgxh240_-rjepob2g3ui.jpeg"><br><br>  Le graphique est orient√©: il a des ar√™tes avec des directions.  Aux n≈ìuds du graphe, nous n'aurons que les modules du langage dont nous parlons.  Les c√¥tes sont un type sp√©cifique de liaison.  Il existe plusieurs types de communication. <br><br><img src="https://habrastorage.org/webt/7h/2a/ob/7h2aobcl3tntwcoton3qr5qmaoo.jpeg"><br><br>  Regardons un exemple banal.  Il y a le fichier A. Ici, quelque chose du fichier B est import√© dedans, et c'est une telle relation entre les n≈ìuds. <br><br><img src="https://habrastorage.org/webt/mn/xn/vb/mnxnvbajewbedo_drzafbppqnda.jpeg"><br><br>  La m√™me chose se produira si vous remplacez l'importation par require.  En fait, tout n'est pas si simple ici. <br><br><img src="https://habrastorage.org/webt/fl/1x/ub/fl1xub0n5kpjz6nh3ais7trybk4.jpeg"><br><br>  Je sugg√®re, puisque nous parlons du type de d√©pendance, d'envisager au moins deux types - pour acc√©l√©rer votre pipeline, pour acc√©l√©rer la travers√©e du graphe.  Il est n√©cessaire de surveiller non seulement le module d√©pendant, mais √©galement le module d√©pendant.  Je propose d'appeler le module A - le parent, B - l'enfant, et je vous conseille de garder les liens toujours comme une double liste cha√Æn√©e.  Cela vous simplifiera la vie, je vous informe √† l'avance. <br><br>  Une fois que nous avons en quelque sorte d√©crit le graphique, convenons de la fa√ßon dont nous allons le construire. <br><br><img src="https://habrastorage.org/webt/oi/ir/lf/oiirlfsr0tciu_thxadfismnutm.jpeg"><br><br>  Il y a deux fa√ßons.  Soit votre outil pr√©f√©r√© dans votre langage de programmation pr√©f√©r√© en utilisant le m√™me AST (arbres de syntaxe abstraite) ou des habitu√©s.  Quel est le profit ici?  Le fait qu'ici, vous n'√™tes li√© √† personne, mais en m√™me temps, vous devez tout mettre en ≈ìuvre vous-m√™me.  Vous devrez d√©crire tous les types de connexions de toutes ces choses et technologies que vous utilisez, que ce soit un collecteur CSS s√©par√©, quelque chose d'autre comme √ßa.  Mais vous avez une totale libert√© de vol, pour ainsi dire. <br><br>  De plus, la deuxi√®me option, je vais aussi la promouvoir un peu, c'est une option juste pour la plupart des gens qui ont d√©j√† un syst√®me de build configur√©.  Le fait est que le syst√®me d'assemblage collecte un graphique en fonction de la conception, par d√©faut. <br><br><img src="https://habrastorage.org/webt/xc/gk/wk/xcgkwkeunrz5vi_eri49mqub7c0.jpeg"><br><br>  Regardons l'un des syst√®mes d'assemblage les plus populaires de Yandex, c'est le webpack.  Ici, j'ai donn√© un exemple de la fa√ßon dont vous pouvez collecter le r√©sultat complet de webpack dans un fichier s√©par√©, qui peut ensuite √™tre envoy√© √† notre ou √† un autre analyseur.  Il le recueille avec l'aide d'AST, la biblioth√®que de glands est utilis√©e.  Vous l'avez peut-√™tre remarqu√©e quand quelque chose est tomb√©.  J'ai remarqu√©. <br><br>  Et quels sont les avantages.  Le fait est que lorsque vous avez d√©crit votre syst√®me de construction, vous avez absolument honn√™tement demand√© √† entrer.  Ce sont les fichiers √† partir desquels vos d√©pendances sont d√©roul√©es, les points de contournement initiaux.  C'est bien, car vous n'avez pas besoin de les r√©enregistrer.  En outre, webpack et babel, et tout cela, et gland, y compris, ce n'est toujours pas votre maintien.  Et donc, toutes sortes de nouvelles fonctionnalit√©s du langage, toutes sortes de bugs et tout le reste, sont corrig√©es plus rapidement que si vous l'avez fait, surtout si vous n'avez pas une tr√®s grande √©quipe.  Oui, m√™me si c'est gros, ce n'est pas aussi gros que l'open source. <br><br>  C'est √† la fois un plus et un moins, en fait.  C'est comme si un double tranchant (√©p√©e √† double tranchant) √©tait obtenu.  Le fait est que ce graphique est construit lors de l'assemblage.  C‚Äôest plut√¥t bien, c‚Äôest-√†-dire que nous pouvons assembler le projet et r√©utiliser imm√©diatement le r√©sultat de l‚Äôassemblage.  Mais que se passe-t-il si nous ne voulons pas assembler un projet, mais voulons simplement obtenir ce graphique? <br><br>  Et un inconv√©nient majeur, en fait.  Si vous avez des choses personnalis√©es connect√©es, nous parlerons beaucoup plus tard des connexions, alors le syst√®me de construction ne vous laissera pas faire cela.  Ou, vous devrez l'int√©grer, comme votre plugin webpack. <br><br><img src="https://habrastorage.org/webt/x0/c4/ye/x0c4yefpe8-w1hgcfeit-n50v8g.jpeg"><br><br>  Prenons un exemple sp√©cifique.  J'ai ex√©cut√© une commande sur ma projection, o√π il n'y a que trois fichiers, et j'ai obtenu cette sortie.  Et cela, je ne montre qu'une seule cl√©, qui s'appelle modules.  Nous parlons juste avec vous du graphe de d√©pendance des modules, donc nous regardons les modules, tout est logique. <br><br><img src="https://habrastorage.org/webt/d_/ky/58/d_ky58s8cbrozt6bzoohxfzvzea.jpeg"><br><br>  Beaucoup d'informations, mais nous n'avons pas besoin de tout.  Laissez quelques points et parlons-en.  Supposons que nous consid√©rons le premier module.  Il a un nom, il y a des raisons.  Les raisons ne sont que la connexion, en fait, avec des modules ¬´d√©pendants¬ª, il s'av√®re que ceux qui importent ce module pour eux-m√™mes.  Ce sont les donn√©es de base pour construire un graphique dessus. <br><br><img src="https://habrastorage.org/webt/ld/of/e3/ldofe3q3cyna7bav1ltegf1zwyw.jpeg"><br><br>  De plus, veuillez pr√™ter attention aux exportations utilis√©es et aux exportations fournies.  Nous en parlerons un peu plus tard.  Mais ce sont aussi des choses tr√®s importantes. <br><br><img src="https://habrastorage.org/webt/ld/of/e3/ldofe3q3cyna7bav1ltegf1zwyw.jpeg"><br><br><img src="https://habrastorage.org/webt/me/db/80/medb80ytkohl1ee0ryh-zaoubak.jpeg"><br><br>  Et si vous d√©crivez votre d√©cision, vous devez parler des types de connexions qui se produisent entre les modules.  Autrement dit, nous avons, bien s√ªr, notre syst√®me de modules √† l'int√©rieur de notre langage: que ce soit des modules cjs ou des modules esm.  En outre, vous devez accepter que nous puissions avoir une connexion entre les fichiers dans le syst√®me de fichiers au niveau du syst√®me de fichiers lui-m√™me.  Ce sont une sorte de cadres: une sorte de cadre va, selon la fa√ßon dont les papas sont. <br><br><img src="https://habrastorage.org/webt/9k/cz/hv/9kczhv-gdxjdxwomdj7czjeuqxk.jpeg"><br><br>  Et un exemple aussi banal - si vous avez √©crit le c√¥t√© serveur de Node, alors vous pouvez souvent voir un package npm populaire comme Config.  Il vous permet de d√©finir tr√®s facilement vos configurations. <br><br><img src="https://habrastorage.org/webt/4d/94/oz/4d94ozf6xvfugnjkxvnsuylgnq4.jpeg"><br><br>  Pour l'utiliser, vous devez obtenir le dossier config, o√π vous avez NODE_PATH, et sp√©cifier plusieurs fichiers JavaScript - juste pour y pr√©senter la configuration pour diff√©rents environnements.  √Ä titre d'exemple, j'ai cr√©√© un papa, sp√©cifi√© par d√©faut, le d√©veloppement et la production. <br><br><img src="https://habrastorage.org/webt/mk/b8/ms/mkb8mse2x2bim9kv6ps4dwdkmg0.jpeg"><br><br>  Et, en fait, toute la configuration fonctionne comme ceci.  Autrement dit, lorsque vous √©crivez require ('config'), il lit simplement le module √† l'int√©rieur de lui-m√™me et prend le nom du module de la variable d'environnement.  Comme vous le comprenez, il n'√©tait pas clair que ces fichiers soient utilis√©s d'une mani√®re ou d'une autre, car il n'y a pas d'import / besoin direct, webpack ne le reconna√Ætrait m√™me pas. <br><br><img src="https://habrastorage.org/webt/bk/pr/wv/bkprwvhuxqslrha7tz5x7nddawo.jpeg"><br><h5>  <sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien depuis la diapositive</a></sub></sup> </h5><br>  Aujourd'hui, nous avons √©galement parl√© de l'injection de d√©pendance.  Je n'√©tais pas quelque chose qui m'inspirait, mais √† l'appui, j'ai regard√© l'une des biblioth√®ques ici.  Il est appel√© inverser JS.  Comme vous pouvez le voir, il fournit une syntaxe plut√¥t personnalis√©e: lazyInject, nameProvider, et le voici.  Et, vous devez admettre, ce n'est pas clair de quel type de fournisseur il s'agit, quel type de module il injecte vraiment ici.  Et nous en avons besoin et nous devons le comprendre.  Autrement dit, le syst√®me de build ne sera pas r√©solu et nous devrons le faire nous-m√™mes. <br><br>  Supposons que nous ayons construit un graphique, et je vous sugg√®re de commencer par le stocker quelque part.  Qu'est-ce qui nous permettra de faire cela?  Cela nous permettra de faire une sorte d'analyse heuristique, de jouer un peu de Data Science, et de le faire, en nous concentrant sur une tranche de temps. <br><br><img src="https://habrastorage.org/webt/gx/uv/t1/gxuvt1vsmjz1rkihuwoc_t93nua.jpeg"><br><br>  Quelle est l'id√©e?  Voici, en effet, directement nos donn√©es.  Nous venons tout juste de mettre en ≈ìuvre notre syst√®me de conception dans Yandex.Market et, en particulier, nous avons impl√©ment√© une biblioth√®que de composants dans le cadre de ce syst√®me de conception.  Et ici, vous pouvez voir: nous consid√©rons le nombre d'importations, le composant React de notre biblioth√®que, le composant commun.  Et vous pouvez distribuer dans des r√©pertoires.  Dans ce cas, nous avons un tel r√©f√©rentiel non mono, et donc nous avons platform.desktop, platform.touch et src. <br><br>  Que pouvons-nous penser quand nous voyons ces chiffres?  Nous pouvons √©mettre l'hypoth√®se que la commande tactile ne semble pas augmenter l'utilisation de composants communs.  Cela signifie que les composants sont mauvais pour le mobile - de mauvaise qualit√© ou que la commande tactile est paresseuse.  Mais est-ce vraiment le cas? <br><br><img src="https://habrastorage.org/webt/u9/k_/gf/u9k_gfggsknyqnwdnmustdmsy1g.jpeg"><br><br>  Si nous regardons dans une p√©riode plus longue, dans un laps de temps plus long, cela nous permet de ne faire que le stockage des graphiques apr√®s chaque version, alors nous comprendrons qu'en fait, tout est ok pour le toucher, l'indicateur y grandit.  Pour src, c'est encore mieux, pour le bureau, il s'av√®re que non. <br><br><img src="https://habrastorage.org/webt/o4/k-/ro/o4k-ronqjbk7g6w_p3mmph2uywe.jpeg"><br><br>  Il y avait encore une question de l'auditoire comment expliquer l'importance aux gestionnaires.  Voici le nombre total d'importations de biblioth√®ques, √©galement en fonction du temps.  Quels managers n'aiment pas les graphiques?  Vous pouvez cr√©er un tel calendrier et voir que l'utilisation de la biblioth√®que augmente, ce qui signifie que c'est au moins une chose utile. <br><br>  Une de mes parties pr√©f√©r√©es.  Je vais le couvrir assez bri√®vement.  Il s'agit d'une recherche de d√©fauts dans le graphique.  Aujourd'hui, je voulais vous parler de deux types de d√©fauts: il s'agit d'une d√©pendance cyclique des modules et de certains modules inutilis√©s, c'est-√†-dire d'un probl√®me d'√©limination du code mort. <br><br><img src="https://habrastorage.org/webt/pv/zz/kc/pvzzkcqb1xx6dk5ko7slsrz2iia.jpeg"><br><br>  Commen√ßons par la d√©pendance circulaire. <br><br><img src="https://habrastorage.org/webt/2g/nx/u3/2gnxu3ruhrjtdjhhwfmeomypv-e.jpeg"><br><br>  Tout semble assez simple ici.  Vous avez d√©j√† un graphe orient√©, il vous suffit d'y trouver une boucle.  Je vais vous expliquer pourquoi j'en parle.  Le fait est qu'avant d'√©crire, fondamentalement, le c√¥t√© serveur sur Node.js, et nous n'utilisions, en principe, aucun webpack / babel, rien.  Autrement dit, ils ont lanc√© en l'√©tat.  Et il y avait besoin.  Qui se souvient de la diff√©rence entre l'importation et l'exigence?  Tout est correct.  Si vous avez mal √©crit le code, mais je l'ai vraiment fait, vous pouvez d√©couvrir sur votre serveur que votre module est dans une sorte de d√©pendance cyclique uniquement lorsqu'une demande vient des utilisateurs, ou qu'un autre √©v√©nement fonctionnera.  C'est un probl√®me plut√¥t mondial.  Jusqu'√† l'ex√©cution ne comprends pas.  Autrement dit, l'importation est beaucoup mieux, il n'y aura pas un tel probl√®me. <br><br><img src="https://habrastorage.org/webt/ss/ly/az/sslyazi877vucvcpjj21kth7vle.jpeg"><br><br>  Ensuite, prenez tout algorithme que vous aimez.  Ici, j'ai pris un algorithme assez simple.  Nous devons trouver un sommet qui n'a qu'un seul type d'ar√™tes - entrantes ou sortantes.  S'il existe un tel sommet, nous le supprimons, supprimons les bords et, en fait, continuons ce processus, nous trouverons et prouverons qu'il y avait un cycle de cinq cycles dans ce graphique. <br><br>  D'accord, si vous le regardez par code, c'est-√†-dire que vous pouvez toujours trouver un cycle de deux ou trois longueurs, mais c'est plus irr√©aliste, et nous avions vraiment un cycle de sept dans le projet, mais pas en production. <br><br><img src="https://habrastorage.org/webt/yj/cz/kb/yjczkbpye4suwsuhgvmw-ku1azu.jpeg"><br><br>  √Ä propos des modules inutilis√©s.  Il existe √©galement un algorithme plut√¥t trivial.  Nous devons mettre en √©vidence les composants connect√©s dans notre graphique, et simplement regarder, trouver ces composants, qui n'incluent aucun des n≈ìuds d'entr√©e.  Dans ce cas, c'est cette composante de la connectivit√©, les deux sommets, il s'av√®re, les deux n≈ìuds.  Appel√© ensuite entry.js.  En fait, quel que soit son nom, c'est ce que vous avez d√©crit dans les moyens de configuration de l'assemblage d'entr√©e. <br><br><img src="https://habrastorage.org/webt/u3/g9/yo/u3g9yo0xtwjegnyxpe-gb1xpk_0.jpeg"><br><br>  Mais il existe une autre approche.  Si vous n'avez pas collect√© le graphique et que vous avez juste un syst√®me de construction, alors comment est-ce le moyen le moins cher de le faire?  Marquons simplement tous les fichiers entr√©s dans l'assemblage pendant l'assemblage.  Marquez-les et cr√©ez-en plusieurs.  Apr√®s cela, nous devrions obtenir une grande partie de tous les fichiers que vous avez dans le projet et simplement les soustraire.  C'est une op√©ration tr√®s simple. <br><br><img src="https://habrastorage.org/webt/e2/yc/zn/e2yczn1scag0kmnvd97aqvdg_hc.jpeg"><br><br>  Et maintenant, je ne vous dis pas seulement quelque chose de th√©orique, j'ai √©t√© inspir√©, je suis venu √† mon projet et je l'ai fait.  Et attention!  Je n'ai m√™me pas supprim√© node_modules.  Je l'ai laiss√© comme point de croissance pour le prochain examen.  Et, en bref, j'√©tais tellement inspir√© par moi-m√™me que j'ai d√©cid√© de faire en quelque sorte cette diapositive, de la r√©organiser.  Laisse √ßa comme √ßa, parce que c'est vraiment cool! <br><br>  Bon nombre, pouvez-vous imaginer comment tout s'est bien pass√©?  Et puis j'ai √©t√© conduit dans une telle steppe que je me suis senti comme un designer et j'ai pens√© que c'√©tait une r√©alisation que j'aimerais ajouter au cadre.  Et, comme vous le savez, je me suis lev√©, j'ai regard√© et j'ai r√©alis√© que je n'√©tais probablement pas un designer, mais bien un d√©veloppeur web.  Mais je ne suis pas idiot.  J'ai pris ce cadre, ajout√© √† mon site pour les amulettes SEO. <br><br><img src="https://habrastorage.org/webt/ji/14/nq/ji14nqwj-qsydqvw-ennrzkonqi.jpeg"><br><br>  Vous pouvez utiliser, m√™me le lien est.  Et pour que vous ne pensiez pas que je vous trompe - nous sommes francs aujourd'hui - j'ai vraiment regard√© les critiques.  Je pense que vous pouvez les croire. <br><br><img src="https://habrastorage.org/webt/j0/0j/9v/j00j9vldpwzp39028m0uojaoxia.jpeg"><br><br>  Eh bien, pour √™tre honn√™te, cela ressemblait √† quelque chose comme √ßa.  J'ai vu une nouvelle biblioth√®que d'hypoth√®ques thanos-js, je l'ai prise, j'ai cr√©√© une demande de pool.  En secret, j'ai des droits d'administrateur dans notre r√©f√©rentiel.  Et j'ai pris et confondu le ma√Ætre.  Comment aimez-vous √ßa?  Eh bien, vous et moi sommes francs, et en fait, tout cela ressemblait √† √ßa.  Si quelqu'un ne le sait pas, thanos-js est une biblioth√®que qui supprime simplement 50% de votre code au hasard. <br><br><img src="https://habrastorage.org/webt/nt/0g/q1/nt0gq16vrnioiabs2sgcyj51qve.jpeg"><br><br>  En fait, j'ai utilis√© la biblioth√®que de toute fa√ßon, mais la biblioth√®que s'appelle diff√©remment.  C'est ce qu'on appelle un diffuseur, et maintenant nous allons en parler avec vous.  Et ici, je voudrais noter que la demande de pool est assez importante, moins 44 000 lignes de code, et vous pouvez imaginer - elle a pass√© le test la premi√®re fois.  Autrement dit, ce dont je parle peut vraiment fonctionner. <br><br><img src="https://habrastorage.org/webt/ue/2i/5w/ue2i5wil5tev67r5vcrzbjsyzmq.jpeg"><br><br>  Diffuseur  En fait, il est engag√© non seulement dans la t√¢che de suppression des modules inutilis√©s, de recherche de d√©fauts dans le graphe, mais √©galement dans une t√¢che plus importante.  Ce que j'ai initialement d√©clar√© √©tait d'aider le d√©veloppeur et le testeur, nous allons maintenant en parler.  Et cela fonctionne quelque chose comme √ßa. <br><br>  Nous obtenons une liste des fichiers modifi√©s en utilisant le syst√®me de contr√¥le de version.  Nous avons d√©j√† construit un graphe - le diffecteur le construit.  Et pour chacun de ces fichiers modifi√©s, nous recherchons le chemin d'acc√®s √† l'entr√©e et marquons l'entr√©e modifi√©e.  Et l'entr√©e correspondra aux pages d'application que l'utilisateur verra.  Mais c'est assez logique. <br><br>  Et qu'est-ce que cela nous donne?  Pour les tests - nous savons quelles pages de l'application ont chang√©.  Nous pouvons dire au testeur que seuls eux valent la peine d'√™tre test√©s.  Nous pouvons √©galement dire √† notre ci-job, qui ex√©cute des autotests, que seules ces pages valent la peine d'√™tre test√©es.  Et pour les d√©veloppeurs, tout est beaucoup plus simple, car maintenant les testeurs ne vous √©crivent pas et ne vous demandent pas: "Pourquoi avez-vous besoin de tester?" <br><br><img src="https://habrastorage.org/webt/wb/jr/se/wbjrsedhjgtn7xkmh7xzxurf5z4.jpeg"><br><br>  Regardons un exemple de fonctionnement du diffecteur.  Ici, nous avons un certain r√©pertoire, pages.desktop / *.  Il contient juste une liste des pages elles-m√™mes.  Et les pages sont √©galement d√©crites par plusieurs fichiers.  Le contr√¥leur est le c√¥t√© serveur de la page.  La vue est une sorte de r√©action.  Et deps, cela vient d'un autre syst√®me de build.  Nous avons non seulement webpack, mais aussi ENB. <br><br><img src="https://habrastorage.org/webt/iq/dv/qo/iqdvqoq5yf4xpfpfqnl9ozxmwws.jpeg"><br><br>  Et j'ai apport√© quelques modifications au projet, √† un fichier vide, dont vous avez vu la structure.  C'est ce que le diffecteur me donne.  Je viens de le d√©marrer, diffector est une application en ligne de commande.  Je l'ai lanc√©, il me dit que j'ai chang√© une page, qui s'appelle BindBonusPage. <br><br><img src="https://habrastorage.org/webt/vy/na/y3/vynay3b95xwzhuuawbjwz7jpbfm.jpeg"><br><br>  Je peux √©galement l'ex√©cuter en mode verbeux, voir un rapport plus d√©taill√© et vraiment voir que cela fonctionne au moins dans un cas aussi simple.  Comme nous le voyons, dans notre BindBonusPage, le fichier d'index et le contr√¥leur ont chang√©. <br><br>  Mais voyons ce qui se passe si nous changeons autre chose. <br><br><img src="https://habrastorage.org/webt/dd/rh/tl/ddrhtl_drtw2aqq5rt36r4ncqiu.jpeg"><br><br>  J'ai chang√© autre chose.  Et le diffecteur m'a dit que j'avais chang√© neuf pages.  Et cela ne me fait plus plaisir, comme s‚Äôil ne voulait pas vraiment m‚Äôaider. <br><br><img src="https://habrastorage.org/webt/ew/qh/ce/ewqhceogxq9z42d5zxl4yvfcyvy.jpeg"><br><br>  Voyons pourquoi?  Il montre maintenant les raisons pour lesquelles cette page a √©t√© consid√©r√©e comme modifi√©e.    ,     .  -    uikit. <br><br><img src="https://habrastorage.org/webt/li/wd/ws/liwdwsd_ujkbc-abp18vcmceaim.jpeg"><br><br>    diff.        .  ,    diffector  .          ,    - ,       . <br><br><img src="https://habrastorage.org/webt/zj/kf/uy/zjkfuy1ybdcht1hbuxktaznup2g.jpeg"><br><br>  , , .     ,   ,           entry, , ,       test-scope,     .     . <br><br> . ,    , ,  ,    . <br><br><img src="https://habrastorage.org/webt/pb/ep/ks/pbepksc2lwyezimbbytd6ngbujs.jpeg"><br><br>        .    - ,   .   ‚Äî i18n,    ,    .  , ,  ,         .   ,    ,   - . <br><br>      ?           ,     , , , ,     . <br><br><img src="https://habrastorage.org/webt/zg/07/au/zg07aumxne59rvavifrhtxyi0p8.jpeg"><br><br>   - .     ,      B  ,  ,   -2    .       .        ,  esm. <br><br><img src="https://habrastorage.org/webt/4o/io/d0/4oiod0-nkygafo_zp6ztfh2txju.jpeg"><br><br>      . <br><br><img src="https://habrastorage.org/webt/th/ic/zz/thiczzasr1ggt87bgqy_ddhxlym.jpeg"><br><br>    . <br><br><img src="https://habrastorage.org/webt/vp/sh/4o/vpsh4ozm_pfjbgakddnvri-bzey.jpeg"><br><br> ,     value,          .       ,     ,     .        ,        . <br><br> ,       AST,  ,         250  ,   ,     . ,   ,     -  ,     ,     . <br><br><img src="https://habrastorage.org/webt/yg/og/9p/ygog9p0lhvoiffbm6ilak-b7db8.jpeg"><br><br>  ,     - GlobalContext  - ,   .    ,     modify,    , ?   ,  -   GlobalContext.    .       . ,    side effects. ,  ,   webpack,   ,    .  ,      webpack sideEffects: true,       .     . <br><br><img src="https://habrastorage.org/webt/ov/wn/ph/ovwnphvbkewixae0ypihcambj1k.jpeg"><br><br>    ,   - -       . ,   .      diffector,        . ,   ,      .       ‚Äî ,      .   ,   . <br><br>   ,     ,   diff, expand, log,   ,     ,      ,   . <br><br><img src="https://habrastorage.org/webt/tr/3s/qa/tr3sqaezwkxap8pdbrjuh-jjewe.jpeg"><br><br>  , .        D,  diff.      ,   , ,   .    ,   ,     .          ,   ,    .        . <br><br> ,   ,     .          .    . ,  ‚Äî   ,    .      .    .        ,     , , ,   ,      .      .       ,         . <br><br>    ‚Äî     diffector ?    ,     ,   ,    . <br><br><img src="https://habrastorage.org/webt/pq/rf/lf/pqrflfrep6fp0ffzhsntxw_lbm0.jpeg"><br><br>     - ,    ,     . <br><br><img src="https://habrastorage.org/webt/1k/qs/u4/1kqsu4cuurzk-8ib7n4sus4b8-g.jpeg"><br><br>       , ,      entry.        entry.     diffector. <br><br><img src="https://habrastorage.org/webt/3a/t4/gi/3at4giub3oqpahtey5yznumq1xy.jpeg"><br><br>     .    -.      ,    . <br><br><img src="https://habrastorage.org/webt/rt/s1/nc/rts1ncwpwfo2gchhdglbx5ogevs.jpeg"><br><br>  ,   entry     -,   . <br><br><img src="https://habrastorage.org/webt/cz/6i/lr/cz6ilrthse-hs0awccmuxizen0g.jpeg"><br><br>    .   diffector.      .  ,    ,  -    ,       -.   ,  .   : ,  BindBonusPage,    -,     .    .   , , -  .   . <br><br><img src="https://habrastorage.org/webt/ev/wx/va/evwxvahpj0honucu2yysxvtow6s.jpeg"><br><br><img src="https://habrastorage.org/webt/c5/9j/o6/c59jo6uyprhncjcrlnwevxrx4eu.jpeg"><br><br>    ‚Äî    CI.      .    :   ,   ,          . <br><br><img src="https://habrastorage.org/webt/7r/14/j9/7r14j90rvxqce-tuqobcjwrdewc.jpeg"><br><br>  ,    . 43  ‚Äî   testing,     ,     . <br><br><img src="https://habrastorage.org/webt/bz/-w/9r/bz-w9rnatawaxbqdjdlqws7ppki.jpeg"><br><br>    .  , ,      . <br><br><img src="https://habrastorage.org/webt/fq/jw/gl/fqjwglsxt9v3qdpby861svprpve.jpeg"><br><br>    ,          .   :       ,      ,      .  ,     ,      ,     ,         ,   .    ,    ,     - . <br><br><img src="https://habrastorage.org/webt/pk/oy/pg/pkoypg3-8saqxh-endw9soc-t-o.jpeg"><br><br> . , ,      ,      .      - ,        -   ,   , ,   .         . <br><br>  ,       ,   ,      output   .    ,     .    ‚Äî .   ‚Äî      .  Je vous remercie! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454470/">https://habr.com/ru/post/fr454470/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454456/index.html">Formation Cisco 200-125 CCNA v3.0. Jour 7. FAQ</a></li>
<li><a href="../fr454458/index.html">Tests m√©tamorphiques: pourquoi presque personne ne conna√Æt cette technique prometteuse</a></li>
<li><a href="../fr454460/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 300 (27 mai - 2 juin)</a></li>
<li><a href="../fr454462/index.html">Photogramme sans papier photo</a></li>
<li><a href="../fr454464/index.html">D√©veloppement de tests visuels bas√©s sur Gemini et Storybook</a></li>
<li><a href="../fr454472/index.html">Ce que vous devez savoir sur le dernier correctif de routeur de Cisco</a></li>
<li><a href="../fr454474/index.html">√âv√©nements num√©riques √† Moscou du 3 au 9 juin</a></li>
<li><a href="../fr454476/index.html">Meilleures pratiques Node.js - Conseils sur la structure du projet</a></li>
<li><a href="../fr454478/index.html">Annonce de l'extension des outils Azure IoT Edge (pr√©version)</a></li>
<li><a href="../fr454482/index.html">Une le√ßon am√®re dans l'industrie de l'IA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>