<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ค ๐ฌ ๐คพ๐ฟ ุฃููุงุน ูุฑุฌุนูุฉ .NET ููุงุจู ุฃููุงุน ุงููููุฉ. ุงูุฌุฒุก 2 ๐ฅ ๐๐ฟ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุน ุงููุงุฆู ุงูุฃุณุงุณู ูุชูููุฐ ุงููุงุฌูุงุช. ุงูููุงููุฉ 


 ูุจุฏู ุฃููุง ูุตููุง ุฅูู ุงูุฌุญูู ูุงููุงุก ุงูุนุงูู ููููููุง ุชุธููู ุฃู ููุงุจูุฉ ุ ุญุชู ุชูู ุงูููุงุจูุฉ ููุฑูู .NET CLR. ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฃููุงุน ูุฑุฌุนูุฉ .NET ููุงุจู ุฃููุงุน ุงููููุฉ. ุงูุฌุฒุก 2</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/clrium/blog/439490/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img width="350" align="left" src="https://habrastorage.org/webt/vh/7j/tq/vh7jtqhzbne4h3rjhprca2pruhu.png"></a> </p><br><h2 id="the-object-base-type-and-implementation-of-interfaces-boxing" style=";text-align:right;direction:rtl">  ููุน ุงููุงุฆู ุงูุฃุณุงุณู ูุชูููุฐ ุงููุงุฌูุงุช.  ุงูููุงููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุฃููุง ูุตููุง ุฅูู ุงูุฌุญูู ูุงููุงุก ุงูุนุงูู ููููููุง ุชุธููู ุฃู ููุงุจูุฉ ุ ุญุชู ุชูู ุงูููุงุจูุฉ ููุฑูู .NET CLR.  ููุน ุฐูู ุ ุฏุนููุง ูุง ูุชุณุฑุน ูู microsoft.com ูุงูุจุญุซ ุนู ุงููุธุงุฆู ุงูุดุงุบุฑุฉ.  ุงูุขู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ููู ููู ุชุฑุซ ุฃููุงุน ุงูููู ูุงุฆููุง ุฅุฐุง ูู ุชุชุถูู ุฃู ุฅุดุงุฑุฉ ุฅูู SyncBlockIndex ุ ูููุณ ูุคุดุฑูุง ุฅูู ุฌุฏูู ุงูุฃุณุงููุจ ุงูุงูุชุฑุงุถูุฉ.  ุณููุถุญ ูุฐุง ุชูุงููุง ูุธุงู ุฃููุงุนูุง ูุณุชุฌุฏ ุฌููุน ุฃุฌุฒุงุก ุงูุฃูุบุงุฒ ุฃูุงูููุง.  ููุน ุฐูู ุ ุณูุญุชุงุฌ ุฅูู ุฃูุซุฑ ูู ุฌููุฉ ูุงุญุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ุฏุนููุง ูุชุฐูุฑ ูุฑุฉ ุฃุฎุฑู ููู ูุชู ุชุฎุตูุต ุฃููุงุน ุงูููู ูู ุงูุฐุงูุฑุฉ.  ูุญุตููู ุนูู ููุงู ูู ุงูุฐุงูุฑุฉ ูู ููุงููู ุงูุตุญูุญ.  ุชุญุตู ุฃููุงุน ุงููุฑุงุฌุน ุนูู ุชุฎุตูุต ุนูู ูููุฉ ุงููุงุฆูุงุช ุงูุตุบูุฑุฉ ูุงููุจูุฑุฉ.  ูู ุฏุงุฆูุง ุฅุนุทุงุก ุฅุดุงุฑุฉ ุฅูู ุงูููุงู ุนูู ุงููููุฉ ุญูุซ ุงููุงุฆู.  ูุญุชูู ูู ููุน ูููุฉ ุนูู ุฃุณุงููุจ ูุซู ToString ู Equals ู GetHashCode.  ุฅููุง ุธุงูุฑูุฉ ููููู ุชุฌุงูุฒูุง ุ ูููู ูุง ุชุณูุญ ุจุชูุงุฑุซ ููุน ูููุฉ ุนุจุฑ ุชุฌุงูุฒ ุงูุฃุณุงููุจ.  ุฅุฐุง ุงุณุชุฎุฏูุช ุฃููุงุน ุงูููู ุฃุณุงููุจ ูุงุจูุฉ ููุงุณุชุจุฏุงู ุ ูุณุชุญุชุงุฌ ุฅูู ุฌุฏูู ุฃุณุงููุจ ุธุงูุฑูุฉ ูุชูุฌูู ุงูููุงููุงุช.  ูุฐุง ูู ุดุฃูู ุฃู ูุคุฏู ุฅูู ูุดุงูู ููู ุงูููุงูู ุฅูู ุนุงูู ุบูุฑ ููุฏุงุฑ: ุณุชุฐูุจ ุงูุญููู ุงูุฅุถุงููุฉ ุฅูู ููุงู.  ูุชูุฌุฉ ูุฐูู ุ ููุงู ุฃูุตุงู ูุฃุณุงููุจ ุฃููุงุน ุงููููุฉ ูู ููุงู ูุง ุ ููู ูุง ููููู ุงููุตูู ุฅูููุง ูุจุงุดุฑุฉ ุนุจุฑ ุฌุฏูู ุงูุฃุณุงููุจ ุงูุงูุชุฑุงุถูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุฏ ูุฌูุจ ููุฑุฉ ุฃู ููุฉ ุงูููุฑุงุซ ูุตุทูุนุฉ </p><br><blockquote style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tu/qf/aq/tuqfaqcncvjtdmb_uxgcbbzyr9o.png" align="left">  ุชูุช ุชุฑุฌูุฉ ูุฐุง ุงููุตู ูู ุงููุบุฉ ุงูุฑูุณูุฉ ุจุงูุงุดุชุฑุงู ูุน ูุคูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุฑุฌููู ูุญุชุฑููู</a> .  ููููู ูุณุงุนุฏุชูุง ูู ุงูุชุฑุฌูุฉ ูู ุงูุฑูุณูุฉ ุฃู ุงูุฅูุฌููุฒูุฉ ุฅูู ุฃู ูุบุฉ ุฃุฎุฑู ุ ูู ุงูููุงู ุงูุฃูู ุฅูู ุงูุตูููุฉ ุฃู ุงูุฃููุงููุฉ. <br><br>  ูุฃูุถูุง ุ ุฅุฐุง ููุช ุชุฑูุฏ ุดูุฑุงู ููุง ุ ูุฅู ุฃูุถู ุทุฑููุฉ ููููุงู ุจุฐูู ูู ููุญูุง ูุฌููุง ุนูู github ุฃู ูุชุฎุฒูู ุงููุณุชูุฏุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/5n/wo/6u/5nwo6uvyk2eafkzdd0cdofjqm-0.png" width="22"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github / sidristij / dotnetbook</a> . <br></blockquote><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุฏ ูุฌูุจ ููุฑุฉ ุฃู ููุฉ ุงูููุฑุงุซ ูุตุทูุนุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุงู ููุฑุงุซ ูู ูุงุฆู ุ ูููู ููุณ ูุจุงุดุฑุฉ ุ </li><li style=";text-align:right;direction:rtl"> ููุงู ToString ุ ูุณุงูู ู GetHashCode ุฏุงุฎู ููุน ุฃุณุงุณู.  ูู ุฃููุงุน ุงูููู ูุฐู ุงูุทุฑู ููุง ุณููููุง ุงูุฎุงุต.  ูุฐุง ูุนูู ุฃูู ุชู ุชุฌุงูุฒ ุงูุฃุณุงููุจ ูููุง ูุชุนูู <code>object</code> ุ </li><li style=";text-align:right;direction:rtl">  ุนูุงูุฉ ุนูู ุฐูู ุ ุฅุฐุง ููุช ุจุฅููุงุก ููุน ุนูู <code>object</code> ุ ููุฏูู ุงูุญู ุงููุงูู ูู ุงูุงุชุตุงู ุจู ToString ู Equals ู GetHashCode ุ </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ุงุณุชุฏุนุงุก ุทุฑููุฉ ูุซูู ูููุน ูููุฉ ุ ุชุญุตู ุงูุทุฑููุฉ ุนูู ุจููุฉ ุฃุฎุฑู ูู ูุณุฎุฉ ูู ูุณุฎุฉ ุฃุตููุฉ.  ูุฐุง ูุนูู ุฃู ุงุณุชุฏุนุงุก ุฃุณููุจ ูุซูู ูุดุจู ุงุณุชุฏุนุงุก ุฃุณููุจ ุซุงุจุช: <code>Method(ref structInstance, newInternalFieldValue)</code> .  ูู ุงููุงูุน ุ ูุฐู ุงูุฏุนูุฉ ุชุชุฌุงูุฒ <code>this</code> ุ ูุน ุงุณุชุซูุงุก ูุงุญุฏ ุ ูููู.  ูุฌุจ ุนูู JIT ุฃู ุชููู ุจุชุฌููุน ูุต ุฃุญุฏ ุงูุฃุณุงููุจ ุ ูุฐูู ูู ูููู ูู ุงูุถุฑูุฑู ุฅุฒุงุญุฉ ุญููู ุงูุจููุฉ ุ ูุงูููุฒ ููู ุงููุคุดุฑ ุฅูู ุฌุฏูู ุงูุฃุณุงููุจ ุงูุงูุชุฑุงุถูุฉ ุ ูุงูุฐู ูุง ููุฌุฏ ูู ุงูุจููุฉ.  <em>ุฅูู ููุฌูุฏ ูุฃููุงุน ุงููููุฉ ูู ููุงู ุขุฎุฑ</em> . </li></ul><br><p style=";text-align:right;direction:rtl">  ุชุฎุชูู ุงูุฃููุงุน ูู ุงูุณููู ุ ููู ูุฐุง ุงูุงุฎุชูุงู ููุณ ูุจูุฑูุง ุนูู ูุณุชูู ุงูุชูููุฐ ูู CLR.  ุณูู ูุชุญุฏุซ ุนู ุฐูู ูู ููุช ูุงุญู ููููุง. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุชุจ ุงูุณุทุฑ ุงูุชุงูู ูู ุจุฑูุงูุฌูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var obj = (object)10;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุณูุญ ููุง ุจุงูุชุนุงูู ูุน ุงูุฑูู 10 ุจุงุณุชุฎุฏุงู ูุฆุฉ ุฃุณุงุณูุฉ.  ููุฐุง ูุง ูุณูู ุงูููุงููุฉ.  ูุฐุง ูุนูู ุฃู ูุฏููุง VMT ูุงุณุชุฏุนุงุก ุงูุฃุณุงููุจ ุงูุงูุชุฑุงุถูุฉ ูุซู ToString () ุ Equals ู GetHashCode.  ูู ุงููุงูุน ุ ุชููู ุงูููุงููุฉ ุจุฅูุดุงุก ูุณุฎุฉ ูู ููุน ุงููููุฉ ุ ูููู ููุณ ูุคุดุฑูุง ุฅูู ุงูุฃุตู.  ูุฐุง ูุฃูู ูููููุง ุชุฎุฒูู ุงููููุฉ ุงูุฃุตููุฉ ูู ูู ููุงู: ุนูู ุงูููุฏุณ ุฃู ูุญูู ููุตู ุฏุฑุงุณู.  ุฅุฐุง ูุถุนูุงูุง ุนูู ููุน ูุงุฆู ุ ููููููุง ุชุฎุฒูู ูุฑุฌุน ููุฐู ุงููููุฉ ุทุงููุง ูุฑูุฏ.  ุนูุฏูุง ูุญุฏุซ ุงูููุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฎุตุต CLR ูุณุงุญุฉ ุนูู ุงููููุฉ ูุจููุฉ + SyncBlockIndex + VMT ูููุน ุงููููุฉ (ููุงุชุตุงู ุจู ToString ู GetHashCode ู Equals) ุ </li><li style=";text-align:right;direction:rtl">  ูุณุฎ ูุซูู ููุน ุงููููุฉ ููุงู. </li></ul><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูุฏููุง ูุชุบูุฑ ูุฑุฌุนู ูููุน ุงููููุฉ.  ุญุตูุช ุงูุจููุฉ ุนูู <strong>ููุณ ูุฌููุนุฉ ุญููู ุงููุธุงู ุชูุงููุง ูููุน ูุฑุฌุนู</strong> ุ <br>  ุชุตุจุญ ููุน ูุฑุฌุนู ูุงูู ุจุนุฏ ุงูููุงููุฉ.  ุฃุตุจุญ ุงููููู ูุฆุฉ.  ุฏุนูุง ูุณูููุง ุดููุจุฉ .NET.  ูุฐุง ุงุณู ุนุงุฏู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุธุฑ ููุท ุฅูู ูุง ูุญุฏุซ ุฅุฐุง ููุช ุชุณุชุฎุฏู ุจููุฉ ุชููุฐ ูุงุฌูุฉ ุจุงุณุชุฎุฏุงู ููุณ ุงููุงุฌูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">struct Foo : IBoo { int x; void Boo() { x = 666; } } IBoo boo = new Foo(); boo.Boo();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ููุดุฆ ูุซูู Foo ุ ุชุฐูุจ ูููุชู ุฅูู ุงูููุฏุณ ูู ุงููุงูุน.  ุซู ูุถุน ูุฐุง ุงููุชุบูุฑ ูู ูุชุบูุฑ ููุน ุงููุงุฌูุฉ ูุงููููู ูู ูุชุบูุฑ ููุน ูุฑุฌุนู.  ุจุนุฏ ุฐูู ุ ููุงู ุงูููุงููุฉ ููุฏููุง ููุน ุงููุงุฆู ููุฎุฑุฌ.  ูููู ูุชุบูุฑ ููุน ุงููุงุฌูุฉ.  ููุฐุง ูุนูู ุฃููุง ุจุญุงุฌุฉ ุฅูู ุชุญููู ููุน.  ูุฐูู ุ ุชุญุฏุซ ุงูููุงููุฉ ุจุทุฑููุฉ ูุซู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">IBoo boo = (IBoo)(box_to_object)new Foo(); boo.Boo();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชุงุจุฉ ูุฐุง ุงูุฑูุฒ ุบูุฑ ูุนุงู.  ุณูููู ุนููู ุชุบููุฑ ูุณุฎุฉ ุจุฏูุงู ูู ูุณุฎุฉ ุฃุตููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">void Main() { var foo = new Foo(); foo.a = 1; Console.WriteLite(foo.a); // -&gt; 1 IBoo boo = foo; boo.Boo(); // looks like changing foo.a to 10 Console.WriteLite(foo.a); // -&gt; 1 } struct Foo: IBoo { public int a; public void Boo() { a = 10; } } interface IBoo { void Boo(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุฑุฉ ุงูุฃููู ุงูุชู ููุธุฑ ูููุง ุฅูู ุงูููุฏ ุ ูุง ูุชุนูู ุนูููุง ูุนุฑูุฉ ูุง ูุชุนุงูู ูุนู ูู ุงูููุฏ <em>ุจุฎูุงู</em> ุงูููุฏ <em>ุงูุฎุงุต ุจูุง</em> ูุฑุคูุฉ ูุงุฌูุฉ ูุณุชุฎุฏููู ูู IBoo.  ูุฐุง ูุฌุนููุง ูุนุชูุฏ ุฃู ูู ูู ุทุจูุฉ ูููุณุช ุจููุฉ.  ุซู ูุง ููุฌุฏ ุชูุณูู ุจุตุฑู ูู ุงูููุงูู ูุงูุทุจูุงุช ุ ููุง ูุฌุนููุง ูููุฑ ูู <br>  ูุฌุจ ุฃู ุชุญุตู ูุชุงุฆุฌ ุชุนุฏูู ุงููุงุฌูุฉ ุนูู foo ุ ููู ูุง ูุง ูุญุฏุซ ูุฃู boo ูู ูุณุฎุฉ ูู foo.  ูุฐุง ูุถูู.  ูู ุฑุฃูู ุ ูุฌุจ ุฃู ูุญุตู ูุฐุง ุงูุฑูุฒ ุนูู ุชุนูููุงุช ุ ุญุชู ูุชููู ุงููุทูุฑูู ุงูุขุฎุฑูู ูู ุงูุชุนุงูู ูุนู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุดูุก ุงูุซุงูู ูุชุนูู ุจุงูุฃููุงุฑ ุงูุณุงุจูุฉ ุงูุชู ูููู ุฃู ูููุงูุง ูู ููุน ูุงุฆู ุฅูู IBoo.  ูุฐุง ุฏููู ุขุฎุฑ ุนูู ุฃู ููุน ุงููููุฉ ุงููุญุงุตุฑ ูู ูุชุบูุฑ ูุฑุฌุนู ูููุน ุงููููุฉ.  ุฃู ุ ูู ุงูุฃููุงุน ูู ูุธุงู ุฃููุงุน ูู ุฃููุงุน ูุฑุฌุนูุฉ.  ูููููุง ููุท ุงูุนูู ูุน ุงูููุงูู ููุง ูู ุงูุญุงู ูุน ุฃููุงุน ุงูููู ุ ูุชูุฑูุฑ ูููุชูุง ุจุงููุงูู.  ุงูุชุฑุงุฌุน ุนู ูุคุดุฑ ุฅูู ูุงุฆู ููุง ุณุชููู ูู ุนุงูู C ++. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุงุนุชุฑุงุถ ุนูู ุฃูู ุฅุฐุง ูุงู ูุฐุง ุตุญูุญูุง ุ ูุณูุจุฏู ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var referenceToInteger = (IInt32)10;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุญุตู ุนูู ูุงุฆู ููุท ุ ูููู ุฃูุถูุง ูุฑุฌุน ููุชูุจ ูููุน ูููุฉ ูุญุงุตุฑ.  ุณูุคุฏู ุฐูู ุฅูู ุชุฏููุฑ ุงูููุฑุฉ ุงููุงููุฉ ูุฃููุงุน ุงูููู (ุฃู ุณูุงูุฉ ูููุชูุง) ููุง ูุชูุญ ุชุญุณูููุง ูุจูุฑูุง ุ ุงุณุชูุงุฏูุง ุฅูู ุฎุตุงุฆุตูุง.  ุฏุนูุง ููุฒุน ูุฐู ุงูููุฑุฉ! </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">public sealed class Boxed&lt;T&gt; { public T Value; [MethodImpl(MethodImplOptions.AggressiveInlining)] public override bool Equals(object obj) { return Value.Equals(obj); } [MethodImpl(MethodImplOptions.AggressiveInlining)] public override string ToString() { return Value.ToString(); } [MethodImpl(MethodImplOptions.AggressiveInlining)] public override int GetHashCode() { return Value.GetHashCode(); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏููุง ุชูุงุธุฑูุฉ ูุงููุฉ ููููุงููุฉ.  ููุน ุฐูู ุ ูููููุง ุชุบููุฑ ูุญุชููุงุชู ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุฃุณุงููุจ ุงููุซูู.  ุณุชุคุซุฑ ูุฐู ุงูุชุบููุฑุงุช ุนูู ุฌููุน ุงูุฃุฌุฒุงุก ูุน ุงูุฅุดุงุฑุฉ ุฅูู ุจููุฉ ุงูุจูุงูุงุช ูุฐู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var typedBoxing = new Boxed&lt;int&gt; { Value = 10 }; var pureBoxing = (object)10;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุจุฏูู ุงูุฃูู ููุณ ุฌุฐุงุจุง ููุบุงูุฉ.  ุจุฏูุง ูู ุตุจ ููุน ูุฎูู ูุฑุงุก.  ุงูุณุทุฑ ุงูุซุงูู ุฃูุถู ุจูุซูุฑ ุ ููู ุงูุฎุทูู ูุชุทุงุจูุงู ุชูุฑูุจูุง.  ุงููุฑู ุงููุญูุฏ ูู ุฃูู ูุง ููุฌุฏ ุชูุธูู ููุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุงูุฃุตูุงุฑ ุฃุซูุงุก ุงูููุงููุฉ ุงููุนุชุงุฏุฉ ุจุนุฏ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุนูู ุงููููุฉ.  ุงููููู ุงูุถุฑูุฑู ูุฃุฎุฐ ุงูุฐุงูุฑุฉ ูุจุงุดุฑุฉ ูู ุญูู ูุญุชุงุฌ ุงูุจุฏูู ุงูุฃูู ุฅูู ุงูุชูุธูู.  ูุฐุง ูุฌุนููุง ุชุนูู ููุชุฑุฉ ุฃุทูู ูู ุงูููุงููุฉ ุงููุนุชุงุฏุฉ ุจูุณุจุฉ 10 ูช. </p><br><p style=";text-align:right;direction:rtl">  ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุงุณุชุฏุนุงุก ุจุนุถ ุงูุฃุณุงููุจ ููููุฉ ูุญุงุตุฑ ูุฏููุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">struct Foo { public int x; public void ChangeTo(int newx) { x = newx; } } var boxed = new Boxed&lt;Foo&gt; { Value = new Foo { x = 5 } }; boxed.Value.ChangeTo(10); var unboxed = boxed.Value;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏููุง ุฃุฏุงุฉ ุฌุฏูุฏุฉ.  ุฏุนููุง ูููุฑ ูููุง ูููููุง ุงูููุงู ุจู. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุนูู ููุน <code>Boxed&lt;T&gt;</code> ุนูู ููุณ ุงูููุน ุงููุนุชุงุฏ: ูุฎุตุต ุงูุฐุงูุฑุฉ ุนูู ุงููููุฉ ุ ูููุฑุฑ ุงููููุฉ ููุณูุญ ุจุงูุญุตูู ุนูููุง ุ ูู ุฎูุงู ุงูููุงู ุจููุน ูู unbox. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ููุฏุช ุฅุดุงุฑุฉ ุฅูู ูููู ูุญุงุตุฑ ุ ูุณูุฌูุนู GC ุ </li><li style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูููููุง ุงูุขู ุงูุนูู ูุน ููุน ูุญุงุตุฑ ุ ุฃู ุงุณุชุฏุนุงุก ุฃุณุงููุจูุง ุ </li><li style=";text-align:right;direction:rtl">  ุฃูุถูุง ุ ูููููุง ุงุณุชุจุฏุงู ูุซูู ูููุน ุงููููุฉ ูู SOH / LOH ูุฃุญุฏ ุงูุฃููุงุน ุงูุฃุฎุฑู.  ูู ูุชููู ูู ุงูููุงู ุจุฐูู ูู ูุจู ุ ุญูุซ ุณูุชุนูู ุนูููุง ุงูููุงู ุจุฅูุบุงุก ุชุซุจูุช ุนูุจุชู ูุชุบููุฑ ููููู ุฅูู ูููู ุขุฎุฑ ูุฅุนุงุฏุฉ ุงูููุงููุฉ ุ ูุน ุฅุนุทุงุก ุฅุดุงุฑุฉ ุฌุฏูุฏุฉ ููุนููุงุก. </li></ul><br><p style=";text-align:right;direction:rtl">  ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูู ุงูููุงููุฉ ูู ุฎูู ุญุฑูุฉ ุงููุฑูุฑ ูู ุงูุฐุงูุฑุฉ.  ุญุฑูุฉ ูุฑูุฑ ุนุฏุฏ ุบูุฑ ูุนุฑูู ูู ุงููุงุฆูุงุช ุ ูุงูุชู ูููู ุฃู ูุจูู ุฌุฒุก ูููุง ุญุชู ุงูุฌูู ุงูุฃูู ุ ุญูุซ ููุงุฌู ูุดููุงุช ูู ุฌูุน ุงูููุงูุฉ.  ุณูููู ููุงู ุงููุซูุฑ ูู ุงูููุงูุฉ ููููู ุฃู ูุชุฌูุจูุง.  ูููู ุนูุฏูุง ูููู ูุฏููุง ุญุฑูุฉ ุงูุฃุดูุงุก ูุตูุฑุฉ ุงูุฃุฌู ุ ูุฅู ุงูุญู ุงูุฃูู ูู ุชุฌููุน.  ูุฐุง ูู ููุงูุฉ ูุซุงููุฉ ูุดููุจุฉ .NET. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var pool = new Pool&lt;Boxed&lt;Foo&gt;&gt;(maxCount:1000); var boxed = pool.Box(10); boxed.Value=70; // use boxed value here pool.Free(boxed);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุงูุขู ููููุงููุฉ ุงูุนูู ุจุงุณุชุฎุฏุงู ูุฌููุนุฉ ุ ููุง ููุบู ุญุฑูุฉ ุงูุฐุงูุฑุฉ ุฃุซูุงุก ุงูููุงููุฉ.  ูููููุง ุญุชู ุฃู ูุฌุนู ุงูุฃุดูุงุก ุชุนูุฏ ุฅูู ุงูุญูุงุฉ ูู ุทุฑููุฉ ูุถุน ุงูููุณุงุช ุงูุฃุฎูุฑุฉ ูุชุถุน ููุณูุง ูู ุญูุงู ุงูุณุจุงุญุฉ.  ูุฏ ูููู ูุฐุง ูููุฏูุง ุนูุฏูุง ุชูุชูู ุงูุจููุฉ ุงููุนุจุฃุฉ ุฅูู ุฑูุฒ ุบูุฑ ูุชุฒุงูู ุจุฎูุงู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู ููุง ููููู ููููุง ุนูุฏูุง ุชุตุจุญ ุบูุฑ ุถุฑูุฑูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุนูุฏ ููุณู ุฅูู ุงูุชุฌูุน ุฎูุงู GC. </p><br><p style=";text-align:right;direction:rtl">  ููุฎุชุชู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ุงูููุงููุฉ ุนุฑุถูุฉ ููุง ูุฌุจ ุฃู ุชุญุฏุซ ุ ููุง ุชุฌุนููุง ุชุญุฏุซ.  ูููู ุฃู ูุคุฏู ุฅูู ูุดุงูู ูู ุงูุฃุฏุงุก. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ุงูููุงููุฉ ุถุฑูุฑูุฉ ูููุฏุณุฉ ุงููุธุงู ุ ููุฏ ุชููู ููุงู ูุชุบูุฑุงุช.  ุฅุฐุง ูุงูุช ุญุฑูุฉ ุงูููุงูู ุงููุนุจุฃุฉ ุตุบูุฑุฉ ูุบูุฑ ูุฑุฆูุฉ ุชูุฑูุจูุง ุ ูููููู ุงุณุชุฎุฏุงู ุงูููุงููุฉ.  ุฅุฐุง ูุงูุช ุญุฑูุฉ ุงููุฑูุฑ ูุฑุฆูุฉ ุ ููุฏ ุชุฑุบุจ ูู ุงูููุงู ุจุชุฌููุน ุงูููุงููุฉ ุ ุจุงุณุชุฎุฏุงู ุฃุญุฏ ุงูุญููู ุงููุฐููุฑุฉ ุฃุนูุงู.  ุชููู ุจุนุถ ุงูููุงุฑุฏ ุ ูููู ูุฌุนู GC ูุนูู ุฏูู ุชุญููู ุฒุงุฆุฏ ุ </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุงูุฉ ุ ุฏุนููุง ููุธุฑ ุฅูู ุฑูุฒ ุบูุฑ ุนููู ุชูุงููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">static unsafe void Main() { // here we create boxed int object boxed = 10; // here we get the address of a pointer to a VMT var address = (void**)EntityPtr.ToPointerWithOffset(boxed); unsafe { // here we get a Virtual Methods Table address var structVmt = typeof(SimpleIntHolder).TypeHandle.Value.ToPointer(); // change the VMT address of the integer passed to Heap into a VMT SimpleIntHolder, turning Int into a structure *address = structVmt; } var structure = (IGetterByInterface)boxed; Console.WriteLine(structure.GetByInterface()); } interface IGetterByInterface { int GetByInterface(); } struct SimpleIntHolder : IGetterByInterface { public int value; int IGetterByInterface.GetByInterface() { return value; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู ุงูุฑูุฒ ูุธููุฉ ุตุบูุฑุฉ ุ ูุงูุชู ูููู ุฃู ุชุญุตู ุนูู ูุคุดุฑ ูู ูุฑุฌุน ุฅูู ูุงุฆู.  ุงูููุชุจุฉ ูุชุงุญุฉ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนููุงู ุฌูุซุจ</a> .  ููุถุญ ูุฐุง ุงููุซุงู ุฃู ุงูููุงููุฉ ุงููุนุชุงุฏุฉ ุชุชุญูู ุฅูู ููุน ูุฑุฌุนู ููุชูุจ.  ุฏุนูุง ูุฐูุจ <br>  ุฅููุงุก ูุธุฑุฉ ุนูู ุงูุฎุทูุงุช ูู ุงูุนูููุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุงูููุงููุฉ ูุนุฏุฏ ุตุญูุญ. </li><li style=";text-align:right;direction:rtl">  ุงูุญุตูู ุนูู ุนููุงู ูุงุฆู ุชู ุงูุญุตูู ุนูููุง (ุนููุงู Int32 VMT) </li><li style=";text-align:right;direction:rtl">  ุงูุญุตูู ุนูู VMT ูู SimpleIntHolder </li><li style=";text-align:right;direction:rtl">  ุงุณุชุจุฏุงู VMT ุนุฏุฏ ุตุญูุญ ูุญุงุตุฑ ุฅูู VMT ูู ุจููุฉ. </li><li style=";text-align:right;direction:rtl">  ุฌุนู unboxing ูู ููุน ุงููููู </li><li style=";text-align:right;direction:rtl">  ุนุฑุถ ูููุฉ ุงูุญูู ุนูู ุงูุดุงุดุฉ ุ ูุงูุญุตูู ุนูู Int32 ุ ูุงู <br>  ูุญุงุตุฑ. </li></ol><br><p style=";text-align:right;direction:rtl">  ุฃูุนู ุฐูู ุนุจุฑ ุงููุงุฌูุฉ ุนู ูุตุฏ ููุง ุฃุฑูุฏ ุฃู ุฃุซุจุช ุฃููุง ุณุชูุฌุญ <br>  ุจูุฐู ุงูุทุฑููุฉ. </p><br><h3 id="nullablet" style=";text-align:right;direction:rtl">  ูุงุบูุฉ \ &lt;T&gt; </h3><br><p style=";text-align:right;direction:rtl">  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุณููู ุงูููุงููุฉ ูุน ุฃููุงุน ุงูููู Nullable.  ุชุนุฏ ูุฐู ุงูููุฒุฉ ูุฃููุงุน ุงููููุฉ Nullable ุฌุฐุงุจุฉ ููุบุงูุฉ ุญูุซ ุฃู ุงูููุงููุฉ ูู ููุน ุงููููุฉ ุงูุชู ุชุนุชุจุฑ ููุนุง ูู ุงูุฅุฑุฌุงุน ูุงุบูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">int? x = 5; int? y = null; var boxedX = (object)x; // -&gt; 5 var boxedY = (object)y; // -&gt; null</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูููุฏูุง ุฅูู ุงุณุชูุชุงุฌ ุบุฑูุจ: ุญูุซ ุฃู null ููุณ ูุฏูู ููุน ุ ูุฅู <br>  ุงูุทุฑููุฉ ุงููุญูุฏุฉ ููุญุตูู ุนูู ููุน ูุฎุชูู ุนู ุงูููุน ุงููุนุจุฃ ูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">int? x = null; var pseudoBoxed = (object)x; double? y = (double?)pseudoBoxed;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนูู ุงูุฑูุฒ ููุฌุฑุฏ ุฃูู ููููู ุฅููุงุก ููุน ุนูู ุฃู ุดูุก ุชุฑูุฏู <br>  ูุน ูุงุฑุบุฉ. </p><br><h2 id="going-deeper-in-boxing" style=";text-align:right;direction:rtl">  ุงูุฐูุงุจ ุฃุนูู ูู ุงูููุงููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ุฃูุฏ ุฅุฎุจุงุฑู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจููุน System.Enum</a> .  ูู ุงูููุทูู ุฃู ูููู ูุฐุง ููุน ูููุฉ ูุฃูู ุชุนุฏุงุฏ ูุนุชุงุฏ: ุชุณููุฉ ุงูุฃุฑูุงู ุจุงูุฃุณูุงุก ุจูุบุฉ ุจุฑูุฌุฉ.  ููุน ุฐูู ุ System.Enum ูู ููุน ุงููุฑุฌุน.  ูุชู ุชูุงุฑุซ ูุงูุฉ ุฃููุงุน ุจูุงูุงุช ุงูุชุนุฏุงุฏ ุ ุงููุนุฑูุฉ ูู ูุฌุงูู ููุฐูู ูู .NET Framework ูู System.Enum.  ุฅูู ููุน ุจูุงูุงุช ุงููุตู.  ุนูุงูุฉ ุนูู ุฐูู ุ ุฅููุง ูุฆุฉ ูุฌุฑุฏุฉ ุ ููุฑูุซุฉ ูู <code>System.ValueType</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> [Serializable] [System.Runtime.InteropServices.ComVisible(true)] public abstract class Enum : ValueType, IComparable, IFormattable, IConvertible { // ... }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุนูู ุฐูู ุฃูู ูุชู ุชุฎุตูุต ุฌููุน ุงูุชุนุฏุงุฏุงุช ุนูู SOH ูุนูุฏูุง ูุณุชุฎุฏููุง ุ ูุฅููุง ูุฒูุฏ ูู ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ู GCุ  ูู ุงููุงูุน ูุง ุ ููุง ูุณุชุฎุฏููุง ููุท.  ุจุนุฏ ุฐูู ุ ููุชุฑุถ ุฃู ููุงู ูุฌููุนุฉ ูู ุงูุชุนุฏุงุฏุงุช ูู ููุงู ูุง ููุญุตู ุนูู ุญุงูุงุชูู ููุท.  ูุง ุ ูุฑุฉ ุฃุฎุฑู.  ููููู ุงุณุชุฎุฏุงู ุงูุชุนุฏุงุฏุงุช ูู ุงูููุงูู ุฃุซูุงุก ุงูุชูุธูู.  ุงูุชุนุฏุงุฏุงุช ูู ุงูุฃุฑูุงู ุงููุนุชุงุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุญูููุฉ ูู ุฃู CLR ุชููู ุจุงุฎุชุฑุงู ุจููุฉ ููุน ุงูุจูุงูุงุช ุนูุฏ ุชูููููุง ุฅุฐุง ูุงู ููุงู ุชุนุฏุงุฏ <a href="">ูุญูู ูุฆุฉ ุฅูู ููุน ูููุฉ</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// Check to see if the class is a valuetype; but we don't want to mark System.Enum // as a ValueType. To accomplish this, the check takes advantage of the fact // that System.ValueType and System.Enum are loaded one immediately after the // other in that order, and so if the parent MethodTable is System.ValueType and // the System.Enum MethodTable is unset, then we must be building System.Enum and // so we don't mark it as a ValueType. if(HasParent() &amp;&amp; ((g_pEnumClass != NULL &amp;&amp; GetParentMethodTable() == g_pValueTypeClass) || GetParentMethodTable() == g_pEnumClass)) { bmtProp-&gt;fIsValueClass = true; HRESULT hr = GetMDImport()-&gt;GetCustomAttributeByName(bmtInternal-&gt;pType-&gt;GetTypeDefToken(), g_CompilerServicesUnsafeValueTypeAttribute, NULL, NULL); IfFailThrow(hr); if (hr == S_OK) { SetUnsafeValueClass(); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงุฐุง ุชูุนู ูุฐุงุ  ุนูู ูุฌู ุงูุฎุตูุต ุ ูุฃู ููุฑุฉ ุงููุฑุงุซุฉ - ููููุงู ุจุชุนุฏุงุฏ ูุฎุตุต ุ ุชุญุชุงุฌ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูู ุชุญุฏูุฏ ุฃุณูุงุก ุงูููู ุงููุญุชููุฉ.  ููุน ุฐูู ุ ููู ุงููุณุชุญูู ุฃู ุชุฑุซ ุฃููุงุน ุงูููู.  ูุฐูู ุ ุตููู ุงููุทูุฑูู ููููู ููุนูุง ูุฑุฌุนููุง ููููู ุชุญูููู ุฅูู ููุน ูููุฉ ุนูุฏ ุงูุชุญููู ุงูุจุฑูุฌู. </p><br><h2 id="what-if-you-want-to-see-boxing-personally" style=";text-align:right;direction:rtl">  ูุงุฐุง ูู ููุช ุชุฑูุฏ ุฃู ุชุฑู ุงูููุงููุฉ ุดุฎุตููุงุ </h2><br><p style=";text-align:right;direction:rtl">  ูุญุณู ุงูุญุธ ุ ููุณ ุนููู ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ูู ุงูุดูุฑุฉ ูุงูุฏุฎูู ุฅูู ุบุงุจุฉ ุงูููุฏ.  ูุฏููุง ูุตูุต .NET ุงูุฃุณุงุณูุฉ ุจุงููุงูู ูุงูุนุฏูุฏ ูููุง ูุชุทุงุจู ูู ุญูุซ .NET Framework CLR ู CoreCLR.  ููููู ุงูููุฑ ุนูู ุงูุฑูุงุจุท ุฃุฏูุงู ูุฑุคูุฉ ุชูููุฐ ุงูููุงููุฉ ุนูู ุงูููุฑ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุงู ูุฌููุนุฉ ูููุตูุฉ ูู ุงูุชุญุณููุงุช ูุณุชุฎุฏู ูู ูููุง ุฃ <br>  ููุน ูุญุฏุฏ ูู ุงููุนุงูุฌ: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <em><a href="">JIT_BoxFastMP_InlineGetThread</a></em> <br>  (AMD64 - ูุชุนุฏุฏ ุงููุนุงูุฌุงุช ุฃู ุฎุงุฏู GC ุ ุงูุชุฎุฒูู ุงููุญูู ููุคุดุฑ ุงูุชุฑุงุจุท ุงูุถููู) </li><li style=";text-align:right;direction:rtl">  <em><a href="">JIT_BoxFastMP</a></em> <br>  (AMD64 - ูุชุนุฏุฏ ุงููุนุงูุฌุงุช ุฃู ุฎุงุฏู GC) </li><li style=";text-align:right;direction:rtl">  <em><a href="">JIT_BoxFastUP</a></em> <br>  (AMD64 - ูุนุงูุฌ ูุงุญุฏ ุฃู ูุญุทุฉ ุนูู GC) </li><li style=";text-align:right;direction:rtl">  <em><a href="">JIT_TrialAlloc :: GenBox (..)</a></em> <br>  (x86) ูุชุตู ูู ุฎูุงู JitHelpers </li></ul></li><li style=";text-align:right;direction:rtl">  ูู ุงูุญุงูุงุช ุงูุนุงูุฉ ุ ุชููู JIT ุจุชุถููู ุงุณุชุฏุนุงุก ูุธููุฉ ุงููุณุงุนุฏ <br>  <a href="">ุงููุชุฑุฌู :: impImportAndPushBox (..)</a> </li><li style=";text-align:right;direction:rtl">  ุฅุตุฏุงุฑ ุนุงู ูุณุชุฎุฏู ุฃูู ุงูุฃูุซู <br>  <a href="">MethodTable :: ุตูุฏูู (..)</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ูุชู ุงุณุชุฏุนุงุก [CopyValueClassUnchecked (..)] <br>  ( <a href="">https://github.com/dotnet/coreclr/blob/master/src/vm/object.cpp#L1514-L1581</a> ). <br>  ููุถุญ ุงูููุฏ ุงูุฎุงุต ุจู ุณุจุจ ุฃูุถู ุงุฎุชูุงุฑ ุจููุงุช ุฐุงุช ุญุฌู ูุตู ุฅูู 8 ุจุงูุช. </li></ul></li></ul><br><p style=";text-align:right;direction:rtl">  ููุง ุ ูุชู ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงููุญูุฏุฉ ููู ุงูุนูุจุฉ: <br>  <em><a href="">JIT_Unbox (..)</a></em> ุ ููู ุนุจุงุฑุฉ ุนู ูุฌููุน ุญูู <em><a href="">JIT_Unbox_Helper (..)</a></em> . </p><br><p style=";text-align:right;direction:rtl">  ุฃูุถูุง ุ ูู ุงููุซูุฑ ููุงูุชูุงู ุฃูู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://stackoverflow.com/questions/3743762/unboxing-does-not-create-a-copy-of-the-value-is-this-right</a> ) ุ ูุฅู ุฅูุบุงุก ุงูุชุฎุฒูู ูุง ูุนูู ุงููุณุฎ ุงูุจูุงูุงุช ุฅูู ุงููููุฉ.  ุงูููุงููุฉ ุชุนูู ุชูุฑูุฑ ูุคุดุฑ ุฅูู ุงููููุฉ ุฃุซูุงุก ุงุฎุชุจุงุฑ ุชูุงูู ุงูุฃููุงุน.  ุณูุญุฏุฏ ุดูุฑุฉ ุดูุฑุฉ IL ุงูุชู ุชูู ุฅูุบุงุก ุชุญุฏูุฏ ุงูุฅุฌุฑุงุกุงุช ุงูุฅุฌุฑุงุกุงุช ุจูุฐุง ุงูุนููุงู.  ูุฏ ูุชู ูุณุฎ ุงูุจูุงูุงุช ุฅูู ูุชุบูุฑ ูุญูู ุฃู ููุฏุณ ูุงุณุชุฏุนุงุก ุทุฑููุฉ.  ุฎูุงู ุฐูู ุ ุณูููู ูุฏููุง ูุณุฎุฉ ูุฒุฏูุฌุฉ.  ุฃููุงู ุนูุฏ ุงููุณุฎ ูู ุงููููุฉ ุฅูู ููุงู ูุง ุ ุซู ุงููุณุฎ ุฅูู ุงูููุงู ุงูููุตูุฏ. </p><br><h2 id="questions" style=";text-align:right;direction:rtl">  ุฃุณุฆูุฉ </h2><br><h3 id="why-net-clr-cant-do-pooling-for-boxing-itself" style=";text-align:right;direction:rtl">  ููุงุฐุง ูุง ูููู ูู .NET CLR ุงูููุงู ุจุชุฌููุน ุฃูุนุงุจ ุงูููุงููุฉุ </h3><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชุญุฏุซูุง ุฅูู ุฃู ูุทูุฑ ุฌุงูุง ุ ูุณูู ูุนุฑู ุดูุฆูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฌููุน ุฃููุงุน ุงูููู ูู Java ูุญุงุตุฑ ุ ููุง ูุนูู ุฃููุง ููุณุช ุฃููุงุน ูููุฉ ุจุดูู ุฃุณุงุณู.  ุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ ูู ุฃูุถุง ูุญุงุตุฑ. </li><li style=";text-align:right;direction:rtl">  ูุณุจุจ ุงูุชุญุณูู ูุชู ุฃุฎุฐ ุฌููุน ุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ ูู -128 ุฅูู 127 ูู ูุฌููุนุฉ ุงููุงุฆูุงุช. </li></ul><br><p style=";text-align:right;direction:rtl">  ูููุงุฐุง ูุง ูุญุฏุซ ูุฐุง ูู .NET CLR ุฃุซูุงุก ุงูููุงููุฉุ  ุงููุง ุจุณูุทุฉ.  ูุธุฑูุง ูุฃูู ูููููุง ุชุบููุฑ ูุญุชูู ููุน ูููุฉ ูุญุงุตุฑ ุ ูููููุง ุงูููุงู ุจูุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">object x = 1; x.GetType().GetField("m_value", BindingFlags.Instance | BindingFlags.NonPublic).SetValue(x, 138); Console.WriteLine(x); // -&gt; 138</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃู ูุซู ูุฐุง (C ++ / CLI): </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object^ obj)</span></span></span><span class="hljs-function"> </span></span>{ Int32^ i = (Int32^)obj; *i = <span class="hljs-number"><span class="hljs-number">138</span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชุนุงูููุง ูุน ุงูุชุฌููุน ุ ูุณูููู ุจุชุบููุฑ ูู ุงูุทูุจุงุช ูู ุงูุชุทุจูู ุฅูู 138 ุ ููุฐุง ููุณ ุฌูุฏูุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุงูู ูู ุฌููุฑ ุฃููุงุน ุงูููู ูู .NET.  ุฅููู ูุชุนุงูููู ูุน ุงููููุฉ ุ ููุฐุง ูุนูู ุฃููู ูุนูููู ุจุดูู ุฃุณุฑุน.  ุงูููุงููุฉ ูุงุฏุฑุฉ ูุฅุถุงูุฉ ุฃุฑูุงู ูุญุงุตุฑุฉ ุชูุชูู ุฅูู ุนุงูู ุงูุฎูุงู ูุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ุงูุณูุฆุฉ.  ูุฐุง ุบูุฑ ูููุฏ ุนูู ุงูุฅุทูุงู. </p><br><h3 id="why-it-is-not-possible-to-do-boxing-on-stack-instead-of-the-heap-when-you-call-a-method-that-takes-an-object-type-which-is-a-value-type-in-fact" style=";text-align:right;direction:rtl">  ููุงุฐุง ูุง ูููู ุนูู ุงูููุงููุฉ ุนูู ุงูููุฏุณ ุจุฏูุงู ูู ุงููููุฉ ุ ุนูุฏ ุงุณุชุฏุนุงุก ุทุฑููุฉ ุชุฃุฎุฐ ููุน ูุงุฆู ุ ููู ููุน ูููุฉ ูู ุงููุงูุนุ </h3><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุฅุฌุฑุงุก ููุงููุฉ ููุน ุงููููุฉ ุนูู ุงูููุฏุณ ูุณูุฐูุจ ุงููุฑุฌุน ุฅูู ุงููููุฉ ุ ููููู ุฃู ูุฐูุจ ุงููุฑุฌุน ุงูููุฌูุฏ ุฏุงุฎู ุงูุทุฑููุฉ ุฅูู ููุงู ุขุฎุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูููู ูุทุฑููุฉ ูุง ุฃู ุชุถุน ุงููุฑุฌุน ูู ุญูู ูุฆุฉ ูุง.  ุณุชุชููู ุงูุทุฑููุฉ ุจุนุฏ ุฐูู ุ ููุง ุณุชุชููู ุงูุทุฑููุฉ ุงูุชู ุตูุนุช ุงูููุงููุฉ.  ูุชูุฌุฉ ูุฐูู ุ ุณูู ูุดูุฑ ุงููุฑุฌุน ุฅูู ูุณุงุญุฉ ููุชุฉ ุนูู ุงูููุฏุณ. </p><br><h3 id="why-it-is-not-possible-to-use-value-type-as-a-field" style=";text-align:right;direction:rtl">  ููุงุฐุง ูุง ูููู ุงุณุชุฎุฏุงู ููุน ุงููููุฉ ูุญููุ </h3><br><p style=";text-align:right;direction:rtl">  ูู ุจุนุถ ุงูุฃุญูุงู ูุฑูุฏ ุงุณุชุฎุฏุงู ุงููููู ูุญูู ููููู ุขุฎุฑ ูุณุชุฎุฏู ุงูุฃูู.  ุฃู ุฃุจุณุท: ุงุณุชุฎุฏุงู ุงููููู ูุญูู ูููู.  ูุง ุชุณุฃููู ููุงุฐุง ูุฐุง ูููู ุฃู ูููู ูููุฏุง.  ูุง ูููู.  ุฅุฐุง ููุช ุชุณุชุฎุฏู ุจููุฉ ูุญูู ููุง ุฃู ูู ุฎูุงู ุงูุชุจุนูุฉ ูุน ุจููุฉ ุฃุฎุฑู ุ ูุฅูู ุชูุดุฆ ุชูุฑุงุฑุง ุ ููุง ูุนูู ุจููุฉ ุญุฌู ูุง ุญุตุฑ ูู.  ููุน ุฐูู ุ ูุญุชูู .NET Framework ุนูู ุจุนุถ ุงูุฃูุงูู ุญูุซ ููููู ุงูููุงู ุจุฐูู.  ูุซุงู ุนูู ุฐูู <code>System.Char</code> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงูุฐู ูุญุชูู ุนูู ููุณู</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">public struct Char : IComparable, IConvertible { // Member Variables internal char m_value; //... }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชู ุชุตููู ุฌููุน ุฃููุงุน CLR ุงูุจุฏุงุฆูุฉ ุจูุฐู ุงูุทุฑููุฉ.  ูุญู ุ ูุฌุฑุฏ ุจุดุฑ ุ ูุง ูุณุชุทูุน ุชูููุฐ ูุฐุง ุงูุณููู.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุญู ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฐูู: ูุชู ุฐูู ูุฅุนุทุงุก ุฃููุงุน ุจุฏุงุฆูุฉ ุฑูุญ OOP ูู CLR. </p><br><blockquote style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tu/qf/aq/tuqfaqcncvjtdmb_uxgcbbzyr9o.png" align="left">  ุชูุช ุชุฑุฌูุฉ ูุฐุง ุงููุณุชุญุถุฑ ูู ุงูุฑูุณูุฉ ุฅูู ูุบุฉ ุงููุคูู ูู ูุจู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุชุฑุฌููู ุงููุญุชุฑููู</a> .  ููููู ูุณุงุนุฏุชูุง ูู ุฅูุดุงุก ูุณุฎุฉ ูุชุฑุฌูุฉ ูู ูุฐุง ุงููุต ุฅูู ุฃู ูุบุฉ ุฃุฎุฑู ุจูุง ูู ุฐูู ุงูุตูููุฉ ุฃู ุงูุฃููุงููุฉ ุจุงุณุชุฎุฏุงู ุงูุฅุตุฏุงุฑุงุช ุงูุฑูุณูุฉ ูุงูุฅูุฌููุฒูุฉ ูู ุงููุต ููุตุฏุฑ. <br><br>  ูุฃูุถูุง ุ ุฅุฐุง ููุช ุชุฑูุฏ ุฃู ุชููู "ุดูุฑูุง" ุ ูุฅู ุฃูุถู ุทุฑููุฉ ููููู ุงุฎุชูุงุฑูุง ูู ููุญูุง ูุฌููุง ุนูู github ุฃู ูุณุชูุฏุน forking <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/5n/wo/6u/5nwo6uvyk2eafkzdd0cdofjqm-0.png" width="22"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/sidristij/dotnetbook</a> <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar439490/">https://habr.com/ru/post/ar439490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar439480/index.html">ุชุถูุน ุฃู ููุงุฐุง ูุชุจุงุทุฃ CRM ู CRMุ</a></li>
<li><a href="../ar439482/index.html">devleads - (un) ุงูุฏุงูุน ุงููุงูู</a></li>
<li><a href="../ar439484/index.html">ุงูุญุตูู ุนูู ุชุนุฏุงุฏ ุงูุจูุงูุงุช ูู ููุธูุฑ Automapper</a></li>
<li><a href="../ar439486/index.html">ุฃููุงุน ูุฑุฌุนูุฉ .NET ููุงุจู ุฃููุงุน ุงููููุฉ. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar439488/index.html">ุชุณุฌูู ููุฏูู QA Meetup</a></li>
<li><a href="../ar439492/index.html">10 ูุตุงุฆุญ ููููู ูุงุฆุฏ ุฌูุฏ ููุชูููููุฌูุง</a></li>
<li><a href="../ar439496/index.html">ููู ูุชู ุฅุนุฏุงุฏ ุงูููุงุชูุฑ ููุงู: ุนูุฏูุง ูุชุญุฏุซ ุงูุนููู ูุงููุทูุฑ ุจูุบุงุช ูุฎุชููุฉ</a></li>
<li><a href="../ar439498/index.html">ุนูู ุฃู ุงูุฃุฌูุฒุฉ ูุชุญููู ุฑูุญ ุถุฎูุฉ ูู ุงููุนูููุงุชุ</a></li>
<li><a href="../ar439500/index.html">ููุงุฐุง ุฃุตุจุญุช ูููุฉ ุงูุชุญูู ูุนูุฏุฉ ููุบุงูุฉ</a></li>
<li><a href="../ar439502/index.html">ุณููู ุบูุฑ ูุญุฏุฏ ูุญูููุฉ ุบูุฑ ูุญุฏุฏุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>