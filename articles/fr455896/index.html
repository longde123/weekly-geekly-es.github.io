<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐩 👩🏿‍🏭 👆 AvaloniaUI: fonctionnalités sur l'exemple de MessageBox 👨🏾‍💻 🗄️ 🧠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Avalonia ui est un cadre délicieux auquel vous souhaitez revenir encore et encore. Revenons donc à nouveau et examinons certaines fonctionnalités avec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AvaloniaUI: fonctionnalités sur l'exemple de MessageBox</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455896/">  Avalonia ui est un cadre délicieux auquel vous souhaitez revenir encore et encore.  Revenons donc à nouveau et examinons certaines fonctionnalités avec ma boîte de message. <br><br><img src="https://habrastorage.org/webt/y_/cb/jx/y_cbjxf3-xfwmgvgg90q0rdchw0.png"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Qui est Avalonia?</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/c0/fg/l2/c0fgl2hozvuddheowo7_0a59iek.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Avalonia</a> est un framework multiplateforme qui vous permet de développer des interfaces graphiques sur toutes les plateformes pertinentes. <br><br>  Dans sa structure, il est incroyablement proche de wpf: xaml similaire, liants similaires.  Il existe même un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tutoriel</a> officiel pour les développeurs wpf. <br><br>  Avalonia se distingue par le fait que sur chacun des systèmes il fait référence aux interfaces natives: Win32, MonoMac, X11 ... <br></div></div><br><div class="spoiler"> <b class="spoiler_title">Ce qui est apparu dans la version mise à jour</b> <div class="spoiler_text"><ol><li>  Prend en charge 13 icônes de message différentes. </li><li>  Possibilité de copier le corps du message à l'aide de la combinaison de touches Cntrl + C. </li><li>  Ajuster la taille de la fenêtre à son contenu. </li><li>  Un système de style simplifié qui permet à ceux qui souhaitent facilement participer au développement et au support de nouveaux. </li><li>  En remplaçant TextBlock par TextBox, maintenant le texte dans la fenêtre peut être sélectionné. </li><li>  L'architecture elle-même a été entièrement repensée. </li></ol><br><img src="https://habrastorage.org/webt/fb/3s/0i/fb3s0i1-_zb8pqa9sjakdsaoxyi.jpeg"><br><br>  La documentation peut être trouvée sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gitlab</a> . <br><br>  Le package lui-même peut être téléchargé depuis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nuget</a> . <br></div></div><br><h3>  Parlons des fonctionnalités et des puces avalonia </h3><br>  Évidemment, s'il y a des comparaisons, alors il sera comparé à wpf. <br><br>  La première chose qui attire votre attention après les frameworks ms est la possibilité de lier des commandes à des méthodes.  Oui, fonctionnellement, cela donne moins d'opportunités, mais en réponse simplifie l'approche de développement d'un modèle de vue. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding RunTheThing}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hello World"</span></span></span><span class="hljs-tag">&gt;</span></span> Do the thing! <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RunTheThing</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> parameter</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Code for executing the command here. }</span></span></code> </pre> <br>  Avalonia est également construit à l'aide d'extensions réactives, ce qui vous permet de travailler avec des événements du framework en tant qu'objets de la première classe en utilisant la syntaxe déclarative des requêtes LINQ - vous permettant d'écrire du code concis et lisible. <br><br>  Mais en allant un peu plus loin, tout ne devient pas si rose et évident, et la documentation n'a pas encore été évoquée (mais vous pouvez aider). <br><br><h3>  Reliure à l'image </h3><br>  Le problème que j'ai rencontré presque immédiatement lors de la mise à jour de mon projet était de savoir comment afficher les images sur ma fenêtre. <br><br>  Tout d'abord, vous devez enregistrer un répertoire avec des images en tant que ressource Avalonia, car il est important que tout utilisateur affiche des icônes et soit emballé avec tout le code. <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AvaloniaResource</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Assets\*"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Maintenant, dans la balise d'image, vous pouvez facilement définir l'image sélectionnée. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Image</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Source</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Assets/error.ico"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Mais lorsque vous utilisez vm Source, les images ne peuvent pas être simplement attachées à une chaîne, mais Bitmap doit être utilisé. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Image</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Source</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding ImagePath}"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Bitmap ImagePath { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  Et en conséquence, nous devons maintenant extraire notre image des ressources.  Pourquoi utiliser le localisateur Avalonia? <br><br><pre> <code class="cs hljs">ImagePath = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bitmap(AvaloniaLocator.Current.GetService&lt;IAssetLoader&gt;() .Open(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">$" avares://ASSEMBLYNAME/relative/project/path/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{ImageName}</span></span></span><span class="hljs-string">.ico"</span></span>)));</code> </pre> <br>  Il convient de noter que pour les ressources intégrées lors de la compilation de uri, le préfixe <b>resm: // est utilisé</b> , et pour avalonia - <b>avares: //</b> . <br><br><h3>  Dessin </h3><br>  Les formes en avalonie et en wpf sont similaires, mais les propriétés publiques sont différentes.  Par conséquent, le téléchargement d'images svg et leur conversion à l'aide de mskam en ms xaml ne pouvaient pas être utilisés immédiatement. <br><br>  Personnage personnalisé <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PathGeometry</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Figures</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M30 53 C15.641 53 4 41.359 4 27S15.641 1 30 1s26 11.641 26 26c0 7.135-2.874 13.599-7.528 18.297"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FillRule</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NonZero"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Se transforme en: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GeometryDrawing</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Brush</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#FF50C8EF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Geometry</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M30 53 C15.641 53 4 41.359 4 27S15.641 1 30 1s26 11.641 26 26c0 7.135-2.874 13.599-7.528 18.297"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Une ligne: <br><br><pre> <code class="cs hljs">&lt;Line X1=<span class="hljs-string"><span class="hljs-string">"25"</span></span> Y1=<span class="hljs-string"><span class="hljs-string">"37"</span></span> X2=<span class="hljs-string"><span class="hljs-string">"25"</span></span> Y2=<span class="hljs-string"><span class="hljs-string">"39"</span></span> StrokeThickness=<span class="hljs-string"><span class="hljs-string">"2"</span></span> Stroke=<span class="hljs-string"><span class="hljs-string">"#FFFFFFFF"</span></span> StrokeMiterLimit=<span class="hljs-string"><span class="hljs-string">"10"</span></span> StrokeStartLineCap=<span class="hljs-string"><span class="hljs-string">"Round"</span></span> StrokeEndLineCap=<span class="hljs-string"><span class="hljs-string">"Round"</span></span>/&gt;</code> </pre> <br>  Se transforme en: <br><br><pre> <code class="cs hljs">&lt;Line StartPoint=<span class="hljs-string"><span class="hljs-string">"25,37"</span></span> EndPoint=<span class="hljs-string"><span class="hljs-string">"25,39"</span></span> StrokeThickness=<span class="hljs-string"><span class="hljs-string">"2"</span></span> Stroke=<span class="hljs-string"><span class="hljs-string">"#FFFFFFFF"</span></span> StrokeStartLineCap=<span class="hljs-string"><span class="hljs-string">"Round"</span></span> StrokeEndLineCap=<span class="hljs-string"><span class="hljs-string">"Round"</span></span>/&gt;</code> </pre> <br><h3>  Les styles </h3><br>  A propos des styles eux-mêmes est assez dit dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> .  Il est à noter que ce sont des styles familiers avec un peu de CSS.  Je voulais montrer comment appliquer le style à partir d'un fichier séparé.  Tout d'abord, tous les fichiers xaml doivent être des ressources d'avalonia. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AvaloniaResource</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"**\*.xaml"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SubType</span></span></span><span class="hljs-tag">&gt;</span></span>Designer<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SubType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AvaloniaResource</span></span></span><span class="hljs-tag">&gt;</span></span> ..... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Deuxièmement, les styles sont appliqués de la même manière que les ressources d'image en utilisant uri et locator. <br><br><pre> <code class="cs hljs">YourControl.Styles.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StyleInclude(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">"avares://ASSEMBLYNAME/relative/project/path.xaml"</span></span>)){Source = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">"avares://ASSEMBLYNAME/relative/project/path.xaml"</span></span>)});</code> </pre> <br><h3>  De jolies petites choses </h3><br>  TextBox a la propriété Watermark.  Cela vous permet de ne pas rechercher de packages tiers et de ne pas bloquer TextBlock au-dessus de TextBox, qui peut être lu dans de nombreux didacticiels pour wpf. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Watermark</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Street address"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Et tous les classeurs utilisent PropertyChanged par défaut pour déclencher la mise à jour d'une propriété associée. <br><br><h3>  En conclusion </h3><br>  Je suggère à tout le monde d'essayer ce cadre intéressant.  Merci aux utilisateurs d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Artyom Gorchakov</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nikita Tsukanov</a> . <br><br>  Et je vous rappelle que l'avalonie a un soutien confortable et incroyable chez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Gitter</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr455896/">https://habr.com/ru/post/fr455896/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr455886/index.html">Donnez un nom à l'étoile et à l'exoplanète dans le système HAT-P-3</a></li>
<li><a href="../fr455888/index.html">Internet pour le résident d'été. Partie 3. Les Russes arrivent</a></li>
<li><a href="../fr455890/index.html">La vérité sur les paiements sans contact dans les bracelets de fitness</a></li>
<li><a href="../fr455892/index.html">Comment un programmeur peut-il déménager aux Pays-Bas</a></li>
<li><a href="../fr455894/index.html">Tendances en ligne 2019</a></li>
<li><a href="../fr455898/index.html">Les temps sombres arrivent</a></li>
<li><a href="../fr455902/index.html">Comment venir au paradis et devenir pilote</a></li>
<li><a href="../fr455906/index.html">Ce que vous devez savoir pour un développement efficace sur le cadre angulaire</a></li>
<li><a href="../fr455908/index.html">Yandex pour les aveugles et les malvoyants</a></li>
<li><a href="../fr455912/index.html">Comment commencer à recevoir un revenu passif ou au moins protéger votre argent: 5 façons réelles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>