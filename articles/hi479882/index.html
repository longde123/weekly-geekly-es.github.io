<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯзСЁЯП╝тАНЁЯдЭтАНЁЯзСЁЯП╝ ЁЯПн ЁЯЫ│я╕П рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкрд░ рдЬрд╛рдПрдВ ЁЯдУ ЁЯСитАНЁЯСжтАНЁЯСж ЁЯСЙЁЯП╝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╕рднреА рдХреЛ рдирдорд╕реНрдХрд╛рд░! рдЧреЛ рдкрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреЗ рдкрд╛рдВрдЪ рд╕рд╛рд▓ рдмрд╛рдж, рдореИрдВрдиреЗ рдЦреБрдж рдХреЛ рдХрд╛рдлреА рдкрд╛рдпрд╛ 
 рдХрд╛рд░реНрдпрдХреНрд░рдо рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдПрдХ рдкреНрд░рдмрд▓ рд╕рдорд░реНрдердХред рдЗрд╕рдореЗрдВ 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкрд░ рдЬрд╛рдПрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479882/"><p><img src="https://habrastorage.org/webt/8g/-t/pl/8g-tplxpugbs2hslzi5n0rxri_i.jpeg" alt="рдЭрдВрдбреЗ рдХреЗ рд╕рд╛рде рдЧреЛрдлрд░"></p><br><p>  рд╕рднреА рдХреЛ рдирдорд╕реНрдХрд╛рд░!  рдЧреЛ рдкрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреЗ рдкрд╛рдВрдЪ рд╕рд╛рд▓ рдмрд╛рдж, рдореИрдВрдиреЗ рдЦреБрдж рдХреЛ рдХрд╛рдлреА рдкрд╛рдпрд╛ <br>  рдХрд╛рд░реНрдпрдХреНрд░рдо рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдПрдХ рдкреНрд░рдмрд▓ рд╕рдорд░реНрдердХред  рдЗрд╕рдореЗрдВ <br>  рдореИрдВ рд▓реЗрдЦ рдореЗрдВ рдЙрдирдХреЗ рдореБрдЦреНрдп рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рдкреНрд░рдХрдЯ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛, рд╕рд╛рде рд╣реА рд╕рд╛рде рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ рд╣рд┐рд╕реНрд╕рд╛ рднреА рдмрддрд╛рдКрдВрдЧрд╛ <br>  рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдЬреЛ рдЗрди рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рд▓реЗрдЦ рдмрд╣реБрдд рд╡реНрдпрдХреНрддрд┐рдкрд░рдХ рд╣реИ рдФрд░ рдЙрджреНрджреЗрд╢реНрдпрдкреВрд░реНрдг рд╣реЛрдиреЗ рдХрд╛ рджрд┐рдЦрд╛рд╡рд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ <br>  рд╕рдЪ рддреЛ рдпрд╣ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдпрд╣ рд╕рдореБрджрд╛рдп рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдХрдо рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реИ <br>  рдРрд╕реЗ рддреБрдЪреНрдЫ рдХрд╛рд░реНрдп рдкрд░ рд╕рдордп рд╡реНрдпрддреАрдд рд╣реЛрддрд╛ рд╣реИред </p><a name="habracut"></a><br><h2 id="o-chem-rech">  рдХреНрдпрд╛ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реЛ </h2><br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди, рдореЗрд░реА рд░рд╛рдп рдореЗрдВ, рд╣рдорд╛рд░реЗ рдХреЗ рдЪрд░ рдХреА рдкрд░рд┐рднрд╛рд╖рд╛ рд╣реИ <br>  рдРрд╕реЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдЬрд┐рдирдХреЗ рдореВрд▓реНрдп рд╣рдо рдмрд╛рд╣рд░ рд╕реЗ рдкрд╣рд▓реЗ рд╣реА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br>  рдпрд╣ рддрд░реНрдХ рдпрд╛ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдкреИрд░рд╛рдореАрдЯрд░, рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, <br>  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдбрд┐рд╕реНрдХ рдкрд░ рдпрд╛ рдХрд╣реАрдВ рднреА рдиреЗрдЯрд╡рд░реНрдХ, рдбреЗрдЯрд╛рдмреЗрд╕ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ <br>  рдбреЗрдЯрд╛ рдФрд░ рдЗрддрдиреЗ рдкрд░ред </p><br><p> рдЪреВрдВрдХрд┐ рдЧреЛ рдПрдХ рджреГрдврд╝рддрд╛ рд╕реЗ рд╕реНрдерд┐рд░ рдЯрд╛рдЗрдк рдХреА рдЧрдИ рднрд╛рд╖рд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЪрд╛рд╣реЗрдВрдЧреЗ <br>  рдЕрдкрдиреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, рдЗрд╕ рддрд░рд╣ рдХреЗ рдЪрд░ рдХреЗ рд▓рд┐рдП рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред </p><br><p>  рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдУрдкрди-рд╕реЛрд░реНрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдпрд╛ рдлреНрд░реЗрдорд╡рд░реНрдХ рднреА рд╣реИрдВ, <br>  рдРрд╕реА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ред  рдЙрдирдореЗрдВ рд╕реЗ рдЬреНрдпрд╛рджрд╛рддрд░ рдЕрдкрдиреА рджреГрд╖реНрдЯрд┐ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВред <br>  рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИред </p><br><p>  рдореИрдВ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдХрдо рд╕рд╛рдорд╛рдиреНрдп рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ред <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореБрдЭреЗ рд╕рдмрд╕реЗ рд╕рд░рд▓ рд▓рдЧрддрд╛ рд╣реИред </p><br>
<h2 id="paket-flag">  <code>flag</code> рдкреИрдХреЗрдЬ </h2><br><p>  рд╣рд╛рдВ, рдпрд╣ рдордЬрд╛рдХ рдирд╣реАрдВ рд╣реИ рдФрд░ рдореИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╣рд░ рдЪреАрдЬ рдкрд░ рдЖрдкрдХрд╛ рдзреНрдпрд╛рди рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ <br>  рдкреНрд░рд╕рд┐рджреНрдз рдЧреЛ рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдкреИрдХреЗрдЬред </p><br><p>  рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ, <code>flag</code> рдХрдорд╛рдВрдб рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЙрдкрдХрд░рдг рд╣реИ <br>  рд▓рд╛рдЗрдиреЗрдВ рдФрд░ рдирд╣реАрдВред  рд▓реЗрдХрд┐рди рдЗрд╕ рдкреИрдХреЗрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ <strong>рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ</strong> рд░реВрдк рдореЗрдВ рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <strong>рд╣реИред</strong> <strong><br></strong>  рд╣рдорд╛рд░реЗ рдХрд╛рд░реНрдпрдХреНрд░рдо <strong>рдХреЗ</strong> рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ <strong>рдирд┐рд░реНрдзрд╛рд░рдг</strong> ред  рдФрд░ рдЪрд░реНрдЪрд╛ рдХрд┐рдП рдЧрдП рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ <br>  <code>flag</code> рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЙрд╕ рддрд░рд╣ рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╣рдо рдЯрд╛рдЗрдк рдХрд┐рдП рдЧрдП рдкреИрд░рд╛рдореАрдЯрд░ рд░рдЦрдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗред <br>  <code>flag</code> рдкреИрдХреЗрдЬ рд╕рдмрд╕реЗ рдмреБрдирд┐рдпрд╛рджреА рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдРрд╕рд╛ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред <br>  - <code>flag.String()</code> , <code>flag.Int()</code> рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ <code>flag.Duration()</code> ред <code>flag.Duration()</code> ред </p><br><p>  рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП, рдЬреИрд╕реЗ <code>[]string</code> рдпрд╛ <code>time.Time</code> рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ <br>  <code>flag.Value</code> , рдЬреЛ рдЖрдкрдХреЛ рдпрд╣ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ <code>flag.Value</code> рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗ рдорд╛рди <code>flag.Value</code> рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ <br>  <em>рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡</em> ред </p><br><p>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЯрд╛рдЗрдк <code>time.Time</code> рдХрд╛ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдЗрд╕ рддрд░рд╣ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// TimeValue is an implementation of flag.Value interface. type TimeValue struct { P *time.Time Layout string } func (t *TimeValue) Set(s string) error { v, err := time.Parse(t.Layout, s) if err == nil { (*tP) = v } return err } func (t *TimeValue) String() string { return tPFormat(t.Layout) }</span></span></code> </pre> <br><p>  рдкреИрдХреЗрдЬ рдХреА рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рдВрдкрддреНрддрд┐ <strong>рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп</strong> рдореЗрдВ рдЗрд╕рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рд╣реИ - <code>flag</code> рд╣реИ <br>  <em>рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХрд╛ рдорд╛рдирдХ рддрд░реАрдХрд╛</em> , рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдЗрд╕рдХреА рд╕рдВрднрд╛рд╡рдирд╛ <br>  рд╡рд┐рднрд┐рдиреНрди рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдФрд░ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЗ рдмреАрдЪ рдЙрдкрдпреЛрдЧ рджреВрд╕рд░реЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╣реИ <br>  рд╕рдореБрджрд╛рдп рдореЗрдВ рдкреБрд╕реНрддрдХрд╛рд▓рдпред </p><br><h2 id="pochemu-ne-ispolzuyut-flag">  <code>flag</code> рдЗрд╕реНрддреЗрдорд╛рд▓ рдХреНрдпреЛрдВ рдирд╣реАрдВ? </h2><br><p>  рдпрд╣ рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЕрдиреНрдп рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рджреЛ рдХрд╛рд░рдгреЛрдВ рд╕реЗ рдореМрдЬреВрдж рд╣реИрдВ: </p><br><ul><li>  рдкреИрд░рд╛рдореАрдЯрд░ рди рдХреЗрд╡рд▓ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рд╕реЗ рдкрдврд╝реЗ рдЬрд╛рддреЗ рд╣реИрдВ </li><li>  рдореИрдВ рдорд╛рдкрджрдВрдбреЛрдВ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ </li></ul><br><p>  рдпрджрд┐ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкрдврд╝рдирд╛, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдлрд╝рд╛рдЗрд▓реЛрдВ рд╕реЗ, рд╕рдм рдХреБрдЫ рдЕрдзрд┐рдХ рдпрд╛ рдХрдо рд╕реНрдкрд╖реНрдЯ рд╣реИ (рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ) <br>  рдпрд╣ рдмрд╛рдж рдореЗрдВ), рдлрд┐рд░ рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рд╢рдмреНрдж рд╕реАрдзреЗ рдХрд╣рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ <br>  рдЕрдмред </p><br><p>  рдореЗрд░реА рд░рд╛рдп рдореЗрдВ, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ <br>  рд╕рдВрд░рдЪрдирд╛рдПрдБ рдЬрд┐рдирдХреЗ рдХреНрд╖реЗрддреНрд░ рдЕрдиреНрдп рд╕рдВрд░рдЪрдирд╛рдПрдБ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд╛рд░реНрдпрдХреНрд░рдо <br>  рдЖрдЧреЗ: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> AppConfig <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Port <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Database <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Endpoint <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Timeout time.Duration } ... }</code> </pre> <br><p>  рдФрд░ рдпрд╣ рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдХреНрдпреЛрдВ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдореМрдЬреВрдж рд╣реИ <br>  рдЪреМрдЦрдЯреЗ рдЬреЛ рдЖрдкрдХреЛ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред </p><br><p>  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ <code>flag</code> рдХреЛ рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br>  рдпрд╣ рдЖрд╕рд╛рдиреА рд╕реЗ рдХреЛрдб рдХреА рдХреБрдЫ рдкрдВрдХреНрддрд┐рдпреЛрдВ (рдпрд╛ рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп) рдХреЗ рд╕рд╛рде рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ <br>  <code>flagutil</code> , рдЬрд┐рд╕рдХреА рдЪрд░реНрдЪрд╛ рдиреАрдЪреЗ рдХреА рдЧрдИ рд╣реИ)ред </p><br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдЖрдк рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрддреЗ рд╣реИрдВ, рддреЛ рдРрд╕реА рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдЕрд╕реНрддрд┐рддреНрд╡ рдПрдХ рдордЬрдмреВрдд рд╣реЛрддрд╛ рд╣реИ <br>  рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдШрдЯрдХреЛрдВ рдХреЗ рдмреАрдЪ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреАред </p><br><h2 id="strukturnaya-konfiguraciya">  рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рд╡рд┐рдиреНрдпрд╛рд╕ </h2><br><p>  рд╡рд┐рдЪрд╛рд░ рд╕рдВрд░рдЪрдирд╛ рдХреА рдкрд░рд╡рд╛рд╣ рдХрд┐рдП рдмрд┐рдирд╛ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ рд╣реИ <br>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдФрд░ рдЬрд╣рд╛рдБ рддрдХ рд╕рдВрднрд╡ рд╣реЛ, рдЬрд╣рд╛рдБ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдпрд╛рдиреА <br>  рд╕реАрдзреЗ рдкреИрдХреЗрдЬ рд╕реНрддрд░ рдкрд░ред </p><br><p>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреБрдЫ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИ (рдбреЗрдЯрд╛рдмреЗрд╕, <br>  рдПрдкреАрдЖрдИ рдпрд╛ рдЬреЛ рдХреБрдЫ рднреА рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ) </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> yoogle <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Endpoint <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Timeout time.Duration } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">New</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c *Config)</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Client</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  <code>yoogle.Config</code> рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдкреЙрдкреНрдпреБрд▓реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ <br>  рдкреНрд░рд╛рдкреНрдд <code>*flag.FlagSet</code> рдореЗрдВ рд╕рдВрд░рдЪрдирд╛ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рддрд╛ рд╣реИред <code>*flag.FlagSet</code> ред </p><br><p>  рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рд╕рдорд╛рд░реЛрд╣ <code>yoogle</code> рдкреИрдХреЗрдЬ <code>yoogle</code> рдпрд╛ рдПрдХ рдкреИрдХреЗрдЬ рдореЗрдВ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ <br>  <code>yooglecfg</code> (рддреГрддреАрдп-рдкрдХреНрд╖ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдРрд╕рд╛ рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ <br>  рдХрд╣реАрдВ рдФрд░): </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> yooglecfg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"flag"</span></span> <span class="hljs-string"><span class="hljs-string">"app/yoogle"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Export</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(flag *flag.FlagSet)</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yoogle</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Config</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c yoogle.Config flag.StringVar(&amp;c.Endpoint, <span class="hljs-string"><span class="hljs-string">"endpoint"</span></span>, <span class="hljs-string"><span class="hljs-string">"https://example.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"endpoint for our API"</span></span>, ) flag.DurationVar(&amp;c.Timeout, <span class="hljs-string"><span class="hljs-string">"timeout"</span></span>, time.Second, <span class="hljs-string"><span class="hljs-string">"timeout for operations"</span></span>, ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;c }</code> </pre> <br><p>  <code>flag</code> рдкреИрдХреЗрдЬ рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <br>  рдЖрд╡рд╢реНрдпрдХ <code>flag.FlagSet</code> рддрд░реАрдХреЗ: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> yooglecfg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"app/yoogle"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> FlagSet <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { StringVar(p *<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, name, value, desc <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Export</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(flag FlagSet)</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yoogle</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Config</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c yoogle.Config flag.StringVar(&amp;c.Endpoint, <span class="hljs-string"><span class="hljs-string">"endpoint"</span></span>, <span class="hljs-string"><span class="hljs-string">"https://example.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"endpoint for our API"</span></span>, ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;c }</code> </pre> <br><p>  рдФрд░ рдЕрдЧрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рдорд╛рдиреЛрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдмреАрдЪ) рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ <br>  рдХреБрдЫ рдХрд╛ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ), рдлрд╝рдВрдХреНрд╢рди <code>yooglecfg.Export()</code> рд╡рд╛рдкрд╕ рдЖ рд╕рдХрддрд╛ рд╣реИ <br>  рд╕рднреА рдорд╛рдиреЛрдВ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреЗ <strong>рдмрд╛рдж</strong> рдХрд╣рд╛ <strong>рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛</strong> рдирд┐рд░реНрдорд╛рдг рдХрд╛рд░реНрдп <br>  рд╡рд┐рдиреНрдпрд╛рд╕: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> yooglecfg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"app/yoogle"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> FlagSet <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { StringVar(p *<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, name, value, desc <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Export</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(flag FlagSet)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yoogle</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Config</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> algorithm <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> flag.StringVar(&amp;algorithm, <span class="hljs-string"><span class="hljs-string">"algorithm"</span></span>, <span class="hljs-string"><span class="hljs-string">"quick"</span></span>, <span class="hljs-string"><span class="hljs-string">"algorithm used to do something"</span></span>, ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c yoogle.Config <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yoogle</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Config</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> algorithm { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"quick"</span></span>: c.Impl = quick.New() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"merge"</span></span>: c.Impl = merge.New() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"bubble"</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span>(...) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c } }</code> </pre> <br><blockquote>  рдирд┐рд░реНрдпрд╛рдд рдлрд╝рдВрдХреНрд╢рди рдЖрдкрдХреЛ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдЬрд╛рдиреЗ рдмрд┐рдирд╛ рдкреИрдХреЗрдЬ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ <br>  рдХрд╛рд░реНрдпрдХреНрд░рдо рд╡рд┐рдиреНрдпрд╛рд╕ рдФрд░ рдЙрдирдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдХреИрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред </blockquote><br><h2 id="githubcomgobwasflagutilflagutil">  <a href="https://github.com/gobwas/flagutil">github.com/gobwas/flagutil</a> </h2><br><p>  рд╣рдордиреЗ рдПрдХ рдмрдбрд╝реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдФрд░ рд╣рдорд╛рд░реЗ рдкреИрд░рд╛рдореАрдЯрд░ рдмрдирд╛рдП <br>  рд╕реНрд╡рддрдВрддреНрд░, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрднреА рддрдХ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЙрди рд╕рднреА рдХреЛ рдПрдХ рд╕рд╛рде рдХреИрд╕реЗ рд▓рд╛рдпрд╛ рдЬрд╛рдП рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рдП <br>  рдорд╛рдиред </p><br><p>  рдпрд╣ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдерд╛ рдХрд┐ <code>flagutil</code> рдкреИрдХреЗрдЬ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛ред </p><br><h3 id="sobiraem-parametry-vmeste">  рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдПрдХ рд╕рд╛рде рд░рдЦрдирд╛ </h3><br><p>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рд╕рднреА рдорд╛рдкрджрдВрдбреЛрдВ, рдЗрд╕рдХреЗ рдкреИрдХреЗрдЬ рдФрд░ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЛ рдЙрдирдХреЗ рдЙрдкрд╕рд░реНрдЧ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВ <br>  рдФрд░ рдкреИрдХреЗрдЬ рд╕реНрддрд░ рдкрд░ рдПрдХрддреНрд░ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"flag"</span></span> <span class="hljs-string"><span class="hljs-string">"app/yoogle"</span></span> <span class="hljs-string"><span class="hljs-string">"app/yooglecfg"</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/gobwas/flagutil"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { flags := flag.NewFlagSet(<span class="hljs-string"><span class="hljs-string">"my-app"</span></span>, flag.ExitOnError) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> port <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> flag.IntVar(&amp;port, <span class="hljs-string"><span class="hljs-string">"port"</span></span>, <span class="hljs-number"><span class="hljs-number">4050</span></span>, <span class="hljs-string"><span class="hljs-string">"port to bind to"</span></span>, ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> config *yoogle.Config flagutil.Subset(flags, <span class="hljs-string"><span class="hljs-string">"yoogle"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sub *flag.FlagSet)</span></span></span></span> { config = yooglecfg.Export(sub) }) }</code> </pre> <br><p>  <code>flagutil.Subset()</code> рдлрд╝рдВрдХреНрд╢рди рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: рдпрд╣ рдПрдХ рдЙрдкрд╕рд░реНрдЧ рдЬреЛрдбрд╝рддрд╛ рд╣реИ <br>  ( <code>"yoogle"</code> ) рдХреЙрд▓рдмреИрдХ рдХреЗ рдЕрдВрджрд░ <code>sub</code> рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рд╕рднреА рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд▓рд┐рдПред </p><br><p>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдЪрд▓рд╛рдирд╛ рдЕрдм рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="bash hljs">app -port 4050 -yoogle.endpoint https://example.com -yoogle.timeout 10s</code> </pre> <br><h3 id="poluchaem-znacheniya-parametrov">  рдкреИрд░рд╛рдореАрдЯрд░ рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </h3><br><p>  <code>flag.FlagSet</code> рдЕрдВрджрд░ рд╕рднреА рдкреИрд░рд╛рдореАрдЯрд░ред <code>flag.FlagSet</code> рдореЗрдВ <code>flag.FlagSet</code> рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реЛрддрд╛ рд╣реИред <code>flag.Value</code> , <br>  рдЬрд┐рд╕рдореЗрдВ рдПрдХ <code>Set(string) error</code> рд╡рд┐рдзрд┐ рд╣реИ - рдЕрд░реНрдерд╛рдд, рдпрд╣ рдПрдХ рдЕрд╡рд╕рд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ <br>  <em>рдорд╛рди рдХрд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡</em> рд╕реЗрдЯ рдХрд░рдирд╛ред </p><br><p>  рдпрд╣ рдХреБрдВрдЬреА-рдореВрд▓реНрдп рдЬреЛрдбрд╝реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рд╕реА рднреА рд╕реНрд░реЛрдд рд╕реЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд░рд╣рддрд╛ рд╣реИ рдФрд░ <br>  рдПрдХ <code>flag.Set(key, value)</code> рдмрдирд╛рдУред <code>flag.Set(key, value)</code> рдХреЙрд▓ рдХрд░реЗрдВред </p><br><blockquote>  рдпрд╣ рд╣рдореЗрдВ рдХрдорд╛рдВрдб рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд╕рд┐рдВрдЯреИрдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рджреЗрддрд╛ рд╣реИ <br>  <code>flag</code> рдкреИрдХреЗрдЬ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд▓рд╛рдЗрдиреЗрдВред  рдЖрдк рддрд░реНрдХреЛрдВ рдХреЛ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ, <br>  рдЙрджрд╛ред <a href="https://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html">рдкреЙрдЬрд╝рд┐рдХреНрд╕ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рддрд░реНрдХреЛрдВ рдХреА</a> рддрд░рд╣ред </blockquote><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { flags := flag.NewFlagSet(<span class="hljs-string"><span class="hljs-string">"my-app"</span></span>, flag.ExitOnError) <span class="hljs-comment"><span class="hljs-comment">// ... flags.String( "config", "/etc/app/config.json", "path to configuration file", ) flagutil.Parse(flags, // First, use posix arguments syntax instead of `flag`. // Just to illustrate that it is possible. flagutil.WithParser(&amp;pargs.Parser{ Args: os.Args[1:], }), // Then lookup for "config" flag value and try to // parse its value as a json configuration file. flagutil.WithParser(&amp;file.Parser{ PathFlag: "config", Syntax: &amp;json.Syntax{}, }), ) }</span></span></code> </pre> <br><p>  рддрджрдиреБрд╕рд╛рд░, <code>config.json</code> рдлрд╝рд╛рдЗрд▓ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддреА рд╣реИ: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"port"</span></span>: <span class="hljs-number"><span class="hljs-number">4050</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yoogle"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"endpoint"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://example.com"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"10s"</span></span> ... } }</code> </pre> <br><h2 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><p>  рдмреЗрд╢рдХ, рдореИрдВ рдЗрд╕ рддрд░рд╣ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреА рдмрд╛рдд рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдкрд╣рд▓рд╛ рд╡реНрдпрдХреНрддрд┐ рдирд╣реАрдВ рд╣реВрдВред  рдмрд╣реБрдд рд╕реЗ <br>  рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рд╡рд┐рдЪрд╛рд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рддрд░рд╣ рд╕реЗ рдпрд╛ рдХрд┐рд╕реА рдФрд░ рдХрдИ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдЬрдм рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ <br>  рдореИрдВрдиреЗ MailRu рдореЗрдВ рдХрд╛рдо рдХрд┐рдпрд╛ред </p><br><p>  рддреЛ, рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдХреЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рд╕рдордп рдмрд░реНрдмрд╛рдж рди рдХрд░реЗрдВ <br>  рдЕрдЧрд▓реЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдврд╛рдВрдЪреЗ рдХрд╛ рдЕрдзреНрдпрдпрди (рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд▓реЗрдЦрди) рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╣реИ <br>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд: </p><br><ul><li>  <code>flag</code> рдЙрдкрдпреЛрдЧ рдкреИрд░рд╛рдореАрдЯрд░ <strong>рдкрд░рд┐рднрд╛рд╖рд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ</strong> рд░реВрдк рдореЗрдВ <strong>рдХрд░реЗрдВ</strong> <br>  рдХрд╛рд░реНрдпрдХреНрд░рдо </li><li>  рд╕рдВрд░рдЪрдирд╛ рдХреЗ рдЬреНрдЮрд╛рди рдХреЗ рдмрд┐рдирд╛, рдкреНрд░рддреНрдпреЗрдХ рдкреИрдХреЗрдЬ рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдЕрд▓рдЧ рд╕реЗ рдирд┐рд░реНрдпрд╛рдд рдХрд░реЗрдВ рдФрд░ <br>  рдмрд╛рдж рдореЗрдВ рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ </li><li>  рдорд╛рди, рдЙрдкрд╕рд░реНрдЧ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕рдВрд░рдЪрдирд╛ рдХреЛ <code>main</code> рд╕реЗ рдкрдврд╝рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ </li></ul><br><p>  <code>flagutil</code> рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдореЗрд░реЗ рдкрд░рд┐рдЪрд┐рдд <code>flagutil</code> рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реЗ <code>flagutil</code> <br>  <a href="https://github.com/peterbourgon/ff">рдкреАрдЯрд░рдмрд░реНрдЧрдмрд░реНрдЧ / рдПрдлрдПрдл</a> - рдФрд░ рдореИрдВ <code>flagutil</code> рдирд╣реАрдВ <code>flagutil</code> , рдЕрдЧрд░ рдХреБрдЫ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ <br>  рдЙрдкрдпреЛрдЧ рдореЗрдВ рд╡рд┐рд╕рдВрдЧрддрд┐рдпрд╛рдВред </p><br><p>  рдЖрдкрдХрд╛ рдзреНрдпрд╛рди рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж! </p><br><h2 id="ssylki">  рд╕рдВрджрд░реНрдн </h2><br><ul><li>  <a href="https://gbws.io/articles/configuration-in-go/">рд▓реЗрдЦ рдХрд╛ рдЕрдВрдЧреНрд░реЗрдЬреА рд╕рдВрд╕реНрдХрд░рдг</a> </li><li>  <a href="https://golang.org/pkg/flag/">golang.org/pkg/flag</a> </li><li>  <a href="https://github.com/gobwas/flagutil">github.com/gobwas/flagutil</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi479882/">https://habr.com/ru/post/hi479882/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi479870/index.html">рд╣рдо рдЬрд╛рдиреЗ рдкрд░ рд░реВрдкрд░реЗрдЦрд╛ рдФрд░ рдХрд╛рд░реНрдп рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдмрджрд▓рддреЗ рд╣реИрдВ - рдФрд░ рди рдХреЗрд╡рд▓ред PHP NN рдХреЗ рджреВрд╕рд░реЗ mitap рдкрд░ рдХреНрдпрд╛ рд╣реЛрдЧрд╛</a></li>
<li><a href="../hi479874/index.html">рдореИрдВ рдереЙрдЯрд╡рд░реНрдХреНрд╕ рдпрд╛ рдПрдХ рдЕрдиреБрдХрд░рдгреАрдп рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░ рдореЗрдВ рдХреИрд╕реЗ рдЖрдпрд╛</a></li>
<li><a href="../hi479876/index.html">рдХреНрдпрд╛ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдореЗрдВ рддрдХрд┐рдП рдХреА рдЬрд░реВрд░рдд рд╣реЛрддреА рд╣реИ?</a></li>
<li><a href="../hi479878/index.html">рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреЗ рд╕рд╛рде рд╡рд╛рдИ-рдлрд╛рдИ рдХреЗ рд▓рд┐рдП рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рдЯреАрдХреЗ</a></li>
<li><a href="../hi479880/index.html">рдмреНрд▓реВрдкреНрд░рд┐рдВрдЯ рдХреЗ рд╕рд╛рде рд╕реБрдВрджрд░ рдЙрдкрдЪрд╛рд░ рднрд╡рди рдмрдирд╛рдПрдВ</a></li>
<li><a href="../hi479884/index.html">рдПрдХрддрд╛ рдХреЗ рд▓рд┐рдП рдХрд╕реНрдЯрдо рд╕реАрдЖрдИ / рд╕реАрдбреА</a></li>
<li><a href="../hi479886/index.html">рджреГрд╖реНрдЯрд┐ рдХреЗ рдмрдЬрд╛рдп рд╕реБрдирдирд╛: рдЕрдВрдзреЗрд░реЗ рдХреЗ рдЕрдиреБрдХреВрд▓ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдорд╕реНрддрд┐рд╖реНрдХ рдХреЗ рдиреНрдпреВрд░реЙрдиреНрд╕ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╕рдВрдЧрдард┐рдд рдХрд░рдирд╛</a></li>
<li><a href="../hi479888/index.html">рдЙрдЪреНрдЪ рдЧрддрд┐ рд▓рдЪреАрд▓рд╛ рд╕рдВрдкреАрдбрд╝рди (рдЬрд╛рд░реА)</a></li>
<li><a href="../hi479890/index.html">рд╕рдорд╕реНрдпрд╛рдУрдВ рдФрд░ рдЗрдВрдЯрд░рдиреЗрдЯ рдСрдл рдерд┐рдВрдЧреНрд╕ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рдХрд╛рд░реНрдп</a></li>
<li><a href="../hi479892/index.html">рдЧреНрд░реИрдбрд▓ рдкреНрд▓рдЧрдЗрдиреНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, рд╡рд┐рддрд░рд┐рдд рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рди рдХреА рдирд┐рдЧрд░рд╛рдиреА: Yandex.Money рдореЗрдЯрд╛реИрдк рд╕реЗ рд╡реАрдбрд┐рдпреЛ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>