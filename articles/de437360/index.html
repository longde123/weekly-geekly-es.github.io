<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•Å üë©üèæ‚Äçü§ù‚Äçüë©üèº üßëüèø‚Äçü§ù‚Äçüßëüèæ Herunterladen von Controllern ohne Verwendung einer Arduino IDE-Konsole üë©‚Äçüîß üë≤üèº ‚úäüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einf√ºhrung 

 Wenn Sie mit Controllern eines verteilten Systems arbeiten, m√ºssen Sie die Controller h√§ufig neu starten. Die Verwendung der Arduino IDE...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Herunterladen von Controllern ohne Verwendung einer Arduino IDE-Konsole</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437360/">  <b>Einf√ºhrung</b> <br><br>  Wenn Sie mit Controllern eines verteilten Systems arbeiten, m√ºssen Sie die Controller h√§ufig neu starten.  Die Verwendung der Arduino IDE-Konsole zum Neustart durch den Kunden ist nicht sehr praktisch, da f√ºr jeden Controllertyp die Art der Karte und die COM-Port-Nummern konfiguriert (oder √ºberpr√ºft) werden m√ºssen. Diese Arbeiten sollten von mit der IDE vertrauten Mitarbeitern durchgef√ºhrt werden, und nicht jeder Kunde m√∂chte wissen, dass das System aufgebaut ist auf Arduino-Controllern. <br><br>  In dieser Arbeit betrachten wir die Optionen zum Herunterladen von Controllern (Arduino auf Atmega328 und Atmega32u4 und einem kompatiblen Teensy-Controller) in separaten Befehlen und √ºber eine Batch-Datei ohne Verwendung der IDE. <br><a name="habracut"></a><br>  <b>Anordnung der USB-COM-Kommunikationskarten Arduino</b> <br><br>  Je nach Organisation des seriellen Kommunikationskanals k√∂nnen Arduino-Karten in Karten mit einem USB-UART-Konverter und Karten mit Mikrocontrollern unterteilt werden, die die USB-Kommunikation ohne externe Konverter unterst√ºtzen.  Die ersten umfassen Arduino UNO, Arduino NANO, Arduino Mini, Arduino UNO Ethernet und Arduino UNO WiFi-Karten, die auf <b>Atmega328-</b> Mikrocontrollern basieren.  Die zweiten sind Arduino Leonardo, Arduino Micro, Arduino Yun Mini, Arduino Industrial 101 und Arduino Leonardo Ethernet-Karten mit <b>Atmega32u4-</b> Controllern [1]. <br><br>  <b>Laden Sie Arduino Controller (Atmega328) mit avrdude.exe herunter</b> <br><br>  Das Herunterladen der <b>Hex-</b> Datei auf den Arduino-Controller kann mit <b>avrdude.exe erfolgen</b> .  Dieses Programm ist Teil des IDE-Konsolenpakets, z. B. Arduino Version 1.8.5.  Der Loader avrdude.exe wird vom Dienstprogramm cmd oder der <b>Eingabeaufforderung</b> gestartet, die wie in Abbildung 1 dargestellt gestartet werden. <br><br><img src="https://habrastorage.org/webt/wl/ss/2z/wlss2zwbdi6n07hyhpnq0dil3cs.png"><br>  <i><b>Abbildung 1</b></i>  <i>Ein Beispiel f√ºr die Ausf√ºhrung des Dienstprogramms "Eingabeaufforderung".</i> <br><br>  F√ºhren Sie die folgende Sequenz aus, um ein Beispiel f√ºr das Schreiben eines Befehls zum Laden von <b>Hex-</b> Code in einen Arduino-Controller auf Ihrem Computer zu erhalten. <br><br>  ‚Ä¢ Verbinden Sie Arduino <br>  ‚Ä¢ Laden Sie die Arduino IDE herunter <br>  ‚Ä¢ W√§hlen Sie einen Arduino-Board-Typ aus dem Men√º&gt; Extras&gt; Board&gt; <br>  ‚Ä¢ W√§hlen Sie den COM-Anschluss auf der Karte aus dem Men√º&gt; Extras&gt; Anschluss&gt; <br>  ‚Ä¢ Setzen Sie das Upload-Flag auf der Registerkarte Einstellungen: Arduino IDE-Men√º&gt; Datei&gt; Einstellungen&gt; Ausf√ºhrliche Ausgabe w√§hrend&gt; Upload anzeigen <br>  ‚Ä¢ Startmen√º&gt; Skizze&gt; Hochladen <br>  ‚Ä¢ <b>Suchen</b> Sie nach Abschluss des Downloads im Ausgabefenster der Arduino IDE-Konsole den Befehl mit <b>avrdude</b> . Er sieht beispielsweise folgenderma√üen aus: <br><br><pre><code class="dos hljs"><span class="hljs-function"><span class="hljs-function">C:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Program</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Files</span></span></span><span class="hljs-function"> (</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x86</span></span></span><span class="hljs-function">)\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Arduino</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hardware</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tools</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avr</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bin</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avrdude</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CC</span></span></span><span class="hljs-function">:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Program</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Files</span></span></span><span class="hljs-function"> (</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x86</span></span></span><span class="hljs-function">)\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Arduino</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hardware</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tools</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avr</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">etc</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avrdude.conf</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">v</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">patmega328p</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">carduino</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PCOM3</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b115200</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">D</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Uflash:w</span></span></span><span class="hljs-function">:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">C</span></span></span><span class="hljs-function">:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Users</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">user</span></span></span><span class="hljs-function">-2\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AppData</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Local</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Temp</span></span></span><span class="hljs-function">\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arduino_build_628118</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Blink.ino.hex:i</span></span></span></span></code> </pre> <br>  Um den <b>Befehl avrdude</b> mit dem Dienstprogramm Eingabeaufforderung auszuf√ºhren, m√ºssen doppelte Anf√ºhrungszeichen in den Befehl eingegeben werden, wie unten gezeigt. <br><br><pre> <code class="dos hljs">"C:\Program Files (x86)\Arduino\hardware\tools\avr/bin/&lt;b&gt;avrdude&lt;/b&gt;" -"CC:\Program Files (x86)\Arduino\hardware\tools\avr/etc/avrdude.conf" -v -patmega328p -carduino -PCOM3 -b115200 -D -Uflash:w:C:\Users\user-<span class="hljs-number"><span class="hljs-number">2</span></span>\AppData\Local\Temp\arduino_build_628118/Blink.ino.hex:i</code> </pre> <br>  Mit dem obigen Befehl k√∂nnen <b>Hex-</b> Programme in einen Arduino-Controller mit einem Atmega328-Chip und einem separaten USB-UART-Konverter geladen werden.  Bei Controllern mit Atmega32u4, die USB-Kommunikation ohne Hardwarekonverter unterst√ºtzen, sind zus√§tzliche Schritte erforderlich, um den Befehl auszuf√ºhren, die im entsprechenden Abschnitt beschrieben werden. <br><br>  Da das kompilierte Programm - die Hex-Datei im Ordner f√ºr tempor√§re Dateien gespeichert ist, w√§hrend die IDE-Konsole ge√∂ffnet ist (.. \ AppData \ Local \ Temp \ ..), ist es besser, die Hex-Datei in einen separaten Ordner zu kopieren, den Bootloader avrdude.exe und die Datei avrdude.conf dort zu kopieren . <br><br>  Nachdem Sie die Dateien (Abbildung 2) beispielsweise in den Ordner C: \ ArdIDE verschoben haben, hat der Download-Befehl mit den aktualisierten Dateizugriffspfaden die in Abbildung 3 gezeigte Form. <br><br><img src="https://habrastorage.org/webt/3y/a9/qu/3ya9quyk39sfe7b4wrimctn1oj4.png" alt="Bild"><br>  <i><b>Abbildung 2</b></i>  <i>Platzieren des Bootloaders und der Hex-Datei in einem separaten Ordner.</i> <br><br><img src="https://habrastorage.org/webt/db/z8/o4/dbz8o4hd_gxxctq5eylpqfy5fpi.png" alt="Bild"><br>  <i><b>Abbildung 3</b></i>  <i>Starten des avrdude-Bootloaders mit der Eingabeaufforderung.</i> <br><br>  <b>Teensy-Controller wird mit dem Loader teensy_post_compile.exe geladen</b> <br>  Nach der Installation der <b>Teensyduino-</b> Software f√ºr die <b>Teensy-</b> Controller werden die entsprechenden Controller in der Ger√§teliste der Arduino IDE-Konsole angezeigt (siehe Abbildung 4). <br><br><img src="https://habrastorage.org/webt/d1/i9/fm/d1i9fmfdets2d189mht-nin6fuk.png" alt="Bild"><br>  <i><b>Abbildung 4</b></i>  <i>Liste der Teensy-Controller in der Arduino IDE-Konsole.</i> <br><br>  Ein Beispiel f√ºr das Schreiben eines Befehls zum Laden von Hex-Code in einen <b>Teensy-</b> Controller erhalten Sie, indem Sie die oben f√ºr Arduino-Controller gezeigte Reihenfolge <b>befolgen</b> .  Im Ausgabefenster m√ºssen Sie das Bootloader-Beispiel finden - den Befehl <b>teensy_post_compile</b> .  Zum Offline-Download k√∂nnen Sie die erforderlichen Dateien beispielsweise in einen separaten Ordner kopieren, wie unten gezeigt.  Die Dateien teensy_post_compile, teensy_post_compile.exe und teensy.exe k√∂nnen dem Arduino-Paket entnommen werden, das durch die Teensy-Anwendung erg√§nzt wird. <br><br><img src="https://habrastorage.org/webt/vl/gg/0l/vlgg0lyhdxajm9sao25nkywshgw.png" alt="Bild"><br><br>  Im Folgenden finden Sie Beispiele f√ºr Befehle zum Herunterladen der Hex-Dateien Blink_1.ino und Blink_2.ino auf zwei Teensy-Controller, die √ºber einen USB-Hub an einen Computer angeschlossen sind. <br><br><pre> <code class="dos hljs">"C:\TnsIDE/teensy_post_compile" -file=Blink_2.ino "-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>=C:\TnsIDE" "-tools=C:\TnsIDE" -board=TEENSY31 -reboot -port=usb:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>A0000/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> -portlabel=COM19 (Teensy <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>) Serial -portprotocol=Teensy</code> </pre> <br><pre> <code class="dos hljs">"C:\TnsIDE/teensy_post_compile" -file=Blink_1.ino "-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>=C:\TnsIDE" "-tools=C:\TnsIDE" -board=TEENSY31 -reboot -port=usb:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>A0000/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> -portlabel=COM23 (Teensy <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>) Serial -portprotocol=Teensy</code> </pre> <br>  In diesen Eintr√§gen werden die Hub-Ports als usb: 0 / 1A0000 / 0/1/1/1 und usb: 0 / 1A0000 / 0/1/1/2 bezeichnet. <br><br>  <b>Laden Sie Arduino Controller (Atmega32U4) mit avrdude.exe herunter</b> <br><br>  Arduino UNO-, Leonardo-, Micro- usw. Karten basieren auf dem ATmega32U4-Mikrocontroller.  Dieser Mikrocontroller verf√ºgt √ºber einen eingebauten USB-Kanal (Full Speed ‚Äã‚ÄãUSB 2.0). Daher unterscheidet sich das Herunterladen von Programmen von dem in Betracht gezogenen Laden in ATmega328-Mikrocontroller √ºber einen zus√§tzlichen USB-UART-Konverter. <br><br>  Die COM-Portnummer des Arduino-Controllers ist beispielsweise in der Ger√§temanagerliste aufgef√ºhrt. <br><br><img src="https://habrastorage.org/webt/is/1f/l1/is1fl1gua3m9pqumjbm_ewjcznc.png" alt="Bild"><br><br>  Wenn der virtuelle COM-Port des Arduino pro Micro-Controllers ge√∂ffnet wird (mit einer √úbertragungsfrequenz von 1200, ..., 9600, ... 115200 Baud), wird der Controller zur√ºckgesetzt und das Anwenderprogramm gestartet.  In der MATLAB-Umgebung lautet das Programm zur Erstellung virtueller Ports wie folgt. <br><br><pre> <code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">% create port. s=serial('COM15','Baudrate',9600); % 115200 fopen(s);</span></span></code> </pre> <br>  Nach dem Schlie√üen des virtuellen COM-Ports mit einer Frequenz ungleich 1200 Baud, wie unten gezeigt <br><br><pre> <code class="matlab hljs">fclose(s); delete(s); clear s</code> </pre> <br>  Das Anwenderprogramm der Steuerung wird ausgef√ºhrt. <br><br>  Das Zur√ºcksetzen des Controllers und das Starten des Controller-Bootloaders erfolgt nach dem √ñffnen und Schlie√üen des COM-Ports mit einer Frequenz von 12000 Baud durch die externe Umgebung, z. B. MATLAB, wie unten gezeigt. <br><br><pre> <code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">% create port. s=serial('COM15','Baudrate',1200); % 115200 fopen(s); pause(1.5); fclose(s); delete(s); clear s</span></span></code> </pre><br>  Dieselbe Operation kann mit dem Befehl <b>mode</b> ausgef√ºhrt werden, wie in Abbildung 5 dargestellt. <br><br><img src="https://habrastorage.org/webt/-h/ur/s6/-hurs6ijb6cerpwn77rcapxe0ja.png" alt="Bild"><br>  <i><b>Abbildung 5</b></i>  <i>Ausf√ºhren des Modusbefehls in der Eingabeaufforderung.</i>  <i>Der Befehl legt die √úbertragungsfrequenz f√ºr den COM15-Port auf 1200 Baud fest, wodurch der Controller zur√ºckgesetzt und der Bootloader gestartet wird. Au√üerdem werden die virtuellen Portnummern des Controllers in der Ger√§teliste vor√ºbergehend ge√§ndert.</i> <br><br>  Nach dem Schlie√üen des Ports (Befehl fclose (s)) erstellt der Controller Loader einen eigenen virtuellen (CDC) Port, der in der Ger√§temanagerliste mit einer neuen Nummer f√ºr ca. 8 Sekunden angezeigt wird. <br><br><img src="https://habrastorage.org/webt/yf/ft/xr/yfftxr16gynamwlmykfujcv7e9w.png" alt="Bild"><br><br>  Nach dem Zeitpunkt des Bestehens des neuen virtuellen Ports (8 Sekunden) wird der COM-Port mit der urspr√ºnglichen Nummer in die Liste der Ger√§te-Manager zur√ºckgegeben. <br><br><img src="https://habrastorage.org/webt/ma/rn/zp/marnzpy8381ca1qibgndsvrwqva.png" alt="Bild"><br><br>  W√§hrend des Bestehens des neuen COM-Ports kann das Benutzerprogramm √ºber diesen mit dem Beispielbefehl <b>avrdude</b> der Arduino IDE-Konsole auf den Controller heruntergeladen werden.  Das Abrufen eines Beispielbefehls f√ºr den avrdude-Bootloader in einer Arduino-IDE √§hnelt der obigen Option f√ºr Atmega328-Mikrocontroller.  Der erstellte virtuelle Port verschwindet aus der Liste der Ger√§te, nachdem die Karte neu gestartet und der COM-Port mit der urspr√ºnglichen Nummer wieder in die Liste aufgenommen wurde. <br><br>  Der Bootloader kann auch durch Verbinden des RST-Pins der Arduino-Platine mit GND-Masse gestartet werden. <br>  Wenn das automatische Zur√ºcksetzen des Controllers (durch Erstellen und Deaktivieren des COM-Ports mit einer Frequenz von 1200 Baud) nicht funktioniert, kann das Laden von Ger√§ten (Arduino Leonardo, Arduino Pro Micro) auf Basis des ATmega32U4-Mikrocontrollers in der folgenden Reihenfolge √ºber die Arduino IDE-Konsole durchgef√ºhrt werden. <br><br>  1. Halten Sie die Reset-Taste gedr√ºckt (oder schlie√üen Sie den RST-Pin gegen Masse kurz).  Die serielle USB-Verbindung wird getrennt.  Der COM-Port des Controllers verschwindet aus der Liste der Ger√§te-Manager. <br><br>  2. Dr√ºcken Sie die Taste <img src="https://habrastorage.org/webt/ct/el/-_/ctel-_2i_bs4uuoxpuwb_vvbecy.png" alt="Bild">  Laden Sie die Arduino-IDE (Strg + U) hoch.  Abbildung 6 zeigt den Anfangszustand des Ger√§te-Managers (links) und der Arduino-IDE (rechts) zu diesem Zeitpunkt <br><img src="https://habrastorage.org/webt/tt/hg/pp/tthgpp3zk28gngzwuhitxzxmcam.png" alt="Bild"><br>  <i><b>Abbildung 6</b></i>  <i>Die COM-Portnummer im Ger√§te-Manager und eine Anzeige des Programmkompilierungsprozesses in der Arduino IDE-Konsole.</i> <br><br>  3. Warten Sie, bis die Statusanzeige das Kompilieren von ‚ÄûKompilieren‚Äú abgeschlossen hat, und fahren Sie mit dem Herunterladen von ‚ÄûHochladen‚Äú fort, wie in Abbildung 7 dargestellt. <br><br><img src="https://habrastorage.org/webt/qd/zq/rl/qdzqrlrq4o3aj3whqvmul_ctvpu.png" alt="Bild"><br>  <i><b>Abbildung 7</b></i>  <i>Die Nummer des neuen tempor√§ren COM-Ports im Ger√§te-Manager und eine Anzeige des Programmladevorgangs in der Arduino IDE-Konsole.</i> <br><br>  4. Lassen Sie die Taste ‚ÄûReset‚Äú los (√∂ffnen Sie den RST-Pin).  Die USB-Verbindung wird wiederhergestellt.  Download l√§uft.  Der Indikator zeigt das Ende des Uploads mit der Phrase Fertig Upload an (siehe Abbildung 8). <br><br><img src="https://habrastorage.org/webt/ij/9m/76/ij9m76fez8yzm1x-utxv5tsmqgo.png" alt="Bild"><br>  <i><b>Abbildung 8</b></i>  <i>Die COM-Portnummer im Ger√§te-Manager und ein Hinweis auf den Abschluss des Programmladens in der Arduino IDE-Konsole.</i> <br><br>  <b>Herunterladen von Controllern √ºber eine Batch- (Befehls-) Bat-Datei</b> <br><br>  Das Offline-Laden (ohne Verwendung der Arduino IDE-Konsole) kann mithilfe einer Batch-Datei (Batch-Datei) erfolgen.  Ein Beispiel f√ºr eine Batch-Datei (mit der Erweiterung bat) zum Herunterladen von HEX-Dateien auf zwei Arduino Pro Micro-Controller (Atmega32u4), die √ºber den ersten Hub mit dem Computer verbunden sind, auf zwei Teensy-Controller, die √ºber den zweiten Hub mit dem Computer verbunden sind, und auf den Arduino UNO-Controller (Atmega328). unten.  Die heruntergeladenen HEX-Dateien und alle daf√ºr erforderlichen Programme wurden zuvor in dem in Abbildung 9 gezeigten freigegebenen Ordner abgelegt. <br><br><img src="https://habrastorage.org/webt/ik/s8/7j/iks87jfpuuccla8c9jfubiidypg.png" alt="Bild"><br>  <i><b>Abbildung 9</b></i>  <i>Beispielinhalt eines Ordners zum Offline-Laden von 5 Controllern: Arduino Pro Micro (Atmega32u4), Teensy und Arduino UNO (Atmega328)</i> <i><br></i> <br>  Die Batchdatei mcLoad.bat zum Offline-Laden von f√ºnf Controllern ist unten dargestellt.  Vor dem Laden der Arduino Pro Micro-Controller werden Verz√∂gerungen von einer Sekunde (TIMEOUT / T 1 / NOBREAK) hinzugef√ºgt.  Vor dem Laden des zweiten Teensy-Controllers wird eine Verz√∂gerung von 2 Sekunden eingegeben.  Nachdem alle Controller vollst√§ndig geladen wurden, wird das Programmfenster Teensy.exe geschlossen. <br><br><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> OFF <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> UPLOAD: Arduino Pro Micro <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span> COM42 BAUD=<span class="hljs-number"><span class="hljs-number">12000</span></span> TIMEOUT /T <span class="hljs-number"><span class="hljs-number">1</span></span> /NOBREAK avrdude -Cavrdude.conf -v -patmega32u4 -cavr109 -PCOM45 -b57600 -D -Uflash:w:micro.ino.hex:i <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> UPLOAD: Arduino Pro Micro <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span> COM43 BAUD=<span class="hljs-number"><span class="hljs-number">12000</span></span> TIMEOUT /T <span class="hljs-number"><span class="hljs-number">1</span></span> /NOBREAK avrdude -Cavrdude.conf -v -patmega32u4 -cavr109 -PCOM44 -b57600 -D -Uflash:w:micro.ino.hex:i <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> UPLOAD: Arduino UNO avrdude -Cavrdude.conf -v -patmega328p -carduino -PCOM3 -b115200 -D -Uflash:w: BlinkUNO.ino.hex:i <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> UPLOAD: Teensy <span class="hljs-number"><span class="hljs-number">1</span></span> "C:\mcLOAD/teensy_post_compile" -file=Blink_1_Teensy.ino "-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>=C:\mcLOAD" "-tools=C:\mcLOAD" -board=TEENSY31 -reboot -port=usb:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>A0000/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> -portlabel=COM23 (Teensy <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>) Serial -portprotocol=Teensy <span class="hljs-built_in"><span class="hljs-built_in">REM</span></span> Delay <span class="hljs-number"><span class="hljs-number">2</span></span> seconds: TIMEOUT /T <span class="hljs-number"><span class="hljs-number">2</span></span> /NOBREAK <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> UPLOAD: Teensy <span class="hljs-number"><span class="hljs-number">2</span></span> "C:\mcLOAD/teensy_post_compile" -file=Blink_2_Teensy.ino "-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>=C:\mcLOAD" "-tools=C:\mcLOAD" -board=TEENSY31 -reboot -port=usb:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>A0000/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> -portlabel=COM19 (Teensy <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>) Serial -portprotocol=Teensy <span class="hljs-built_in"><span class="hljs-built_in">REM</span></span> Close Teensy.exe <span class="hljs-built_in"><span class="hljs-built_in">taskkill</span></span> /f /IM Teensy.exe</code> </pre> <br>  Das Trennen des Controllers von der USB-Leitung wirkt sich nicht auf das Laden der verbleibenden Controller aus. <br><br>  Um den Arduino-Namen aus der Liste der Ger√§te-Manager auszuschlie√üen, z. B. "Arduino UNO (COMX)", k√∂nnen Sie Programme wie RegOwnersahipEx oder Hardware-Klone von Arduino-Controllern, z. B. WAVGAT, verwenden, die in der Liste der Ger√§te als "USB-SERIAL CH340 (COMX" angegeben sind) ) ‚Äù. <br><br>  <b>Bibliografische Liste</b> <br><br>  1. Vergleich der Arduino-Boards (Tabelle) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">digitrode.ru/arduino-comparison.html</a> <br>  2. Arduino Micro, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">shop.pimoroni.com/products/arduino-micro</a> <br>  3. Dr.  Bob Davidov.  Computersteuerungstechnologien in technischen Systemen portalnp.ru/author/bobdavidov. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de437360/">https://habr.com/ru/post/de437360/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de437350/index.html">Ein Auto im Zeitalter der Multifunktionalit√§t. Welche Conversions sind m√∂glich?</a></li>
<li><a href="../de437352/index.html">Quantencomputer in Spielen oder ernsthaft verr√ºckt werden</a></li>
<li><a href="../de437354/index.html">Schw√§chen Sie die N√ºsse, Teil 2: die Abstimmungsperiode f√ºr Ver√∂ffentlichungen und andere √Ñnderungen</a></li>
<li><a href="../de437356/index.html">Was ist mit der SSD im Jahr 2018 passiert?</a></li>
<li><a href="../de437358/index.html">Produktkompatibilit√§tsmanagement</a></li>
<li><a href="../de437364/index.html">Die Kontrolle √ºber Tele2 kostet Rostelecom 240 Milliarden Rubel</a></li>
<li><a href="../de437366/index.html">Wie man eine Fabrik hackt: Funksteuerungssysteme als schwaches Glied in der modernen Produktion</a></li>
<li><a href="../de437368/index.html">MOSDROID # 15 Phosphor</a></li>
<li><a href="../de437372/index.html">Drei einfache Tricks zum Reduzieren von Docker-Bildern</a></li>
<li><a href="../de437374/index.html">Facebook-Nutzer vermieten ihre Konten mit Geld und kostenlosen Laptops</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>