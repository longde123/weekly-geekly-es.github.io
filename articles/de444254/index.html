<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✂️ 🎅🏼 👩🏿‍🤝‍👨🏽 Serveranalysesysteme 👩🏿‍🔬 👨🏼‍🌾 🖥️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dies ist der zweite Teil einer Artikelserie über Analysesysteme ( Link zu Teil 1 ). 



 Heute besteht kein Zweifel daran, dass eine genaue Datenverar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Serveranalysesysteme</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444254/"> Dies ist der zweite Teil einer Artikelserie über Analysesysteme ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zu Teil 1</a> ). <br><br><img src="https://habrastorage.org/webt/bn/xe/4l/bnxe4lnwruhoopwd582keuoybrc.png" alt="Bild"><br><br>  Heute besteht kein Zweifel daran, dass eine genaue Datenverarbeitung und Interpretation der Ergebnisse nahezu jeder Art von Geschäft helfen kann.  In dieser Hinsicht werden Analysesysteme zunehmend mit Parametern belastet, die Anzahl der Trigger und Benutzerereignisse in Anwendungen nimmt zu. <br><br>  Aus diesem Grund geben Unternehmen ihren Analysten immer mehr „Rohdaten“ zur Analyse und verwandeln sie in die richtigen Entscheidungen.  Die Bedeutung eines Analysesystems für ein Unternehmen sollte nicht unterschätzt werden, und das System selbst muss zuverlässig und nachhaltig sein. <br><a name="habracut"></a><br><h2>  Kundenanalyse </h2><br>  Client Analytics ist ein Dienst, den ein Unternehmen über das offizielle SDK mit seiner Website oder Anwendung verbindet, in seine eigene Codebasis integriert und Ereignisauslöser auswählt.  Dieser Ansatz hat einen offensichtlichen Nachteil: Alle gesammelten Daten können aufgrund der Einschränkungen eines ausgewählten Dienstes nicht vollständig wie gewünscht verarbeitet werden.  In einem System ist es beispielsweise nicht einfach, MapReduce-Aufgaben auszuführen, in einem anderen System können Sie Ihr Modell nicht ausführen.  Ein weiterer Nachteil wird eine regelmäßige (beeindruckende) Rechnung für Dienstleistungen sein. <br>  Es gibt viele Client-Analytics-Lösungen auf dem Markt, aber früher oder später sehen sich Analysten mit der Tatsache konfrontiert, dass es keinen universellen Service gibt, der für eine Aufgabe geeignet ist (während die Preise für all diese Services ständig steigen).  In dieser Situation entscheiden sich Unternehmen häufig dafür, ein eigenes Analysesystem mit allen erforderlichen benutzerdefinierten Einstellungen und Funktionen zu erstellen. <br><br><h2>  Serveranalyse </h2><br>  Server Analytics ist ein Dienst, der intern in einem Unternehmen auf eigenen Servern und (normalerweise) aus eigener Kraft bereitgestellt werden kann.  In diesem Modell werden alle Benutzerereignisse auf internen Servern gespeichert, sodass Entwickler verschiedene Datenbanken zum Speichern ausprobieren und die bequemste Architektur auswählen können.  Und selbst wenn Sie für einige Aufgaben weiterhin Client-Analysen von Drittanbietern verwenden möchten, ist dies weiterhin möglich. <br>  Serveranalysen können auf zwei Arten bereitgestellt werden.  Erstens: Wählen Sie einige Open Source-Dienstprogramme aus, stellen Sie sie auf Ihren Computern bereit und entwickeln Sie Geschäftslogik. <br><br><table><tbody><tr><td>  <b>Vorteile</b> </td><td>  <b>Nachteile</b> </td></tr><tr><td>  Sie können alles anpassen </td><td>  Oft ist es sehr schwierig und es werden einzelne Entwickler benötigt. </td></tr></tbody></table><br>  Zweitens: Nehmen Sie SaaS-Dienste (Amazon, Google, Azure), anstatt sie selbst bereitzustellen.  Weitere Informationen zu SaaS finden Sie im dritten Teil. <br><br><table><tbody><tr><td>  <b>Vorteile</b> </td><td>  <b>Nachteile</b> </td></tr><tr><td>  Bei mittleren Mengen mag es billiger sein, aber bei großem Wachstum wird es immer noch zu teuer </td><td>  Kann nicht alle Parameter steuern </td></tr><tr><td>  Die Verwaltung wird vollständig auf die Schultern des Dienstleisters übertragen </td><td>  Es ist nicht immer bekannt, was sich im Service befindet (möglicherweise wird es nicht benötigt). </td></tr></tbody></table><br><h2>  So sammeln Sie Serveranalysen </h2><br>  Wenn wir keine Client-Analysen mehr verwenden und keine eigenen zusammenstellen möchten, müssen wir zunächst über die Architektur des neuen Systems nachdenken.  Im Folgenden werde ich Ihnen Schritt für Schritt erklären, was zu beachten ist, warum die einzelnen Schritte erforderlich sind und welche Tools Sie verwenden können. <br><br><h3>  1. Datenerfassung </h3><br>  Genau wie bei der Kundenanalyse wählen Unternehmensanalysten zunächst die Arten von Ereignissen aus, die sie in Zukunft untersuchen möchten, und sammeln sie in einer Liste.  Normalerweise finden diese Ereignisse in einer bestimmten Reihenfolge statt, die als „Ereignismuster“ bezeichnet wird. <br><br>  Stellen Sie sich als nächstes vor, dass eine mobile Anwendung (Website) reguläre Benutzer (Geräte) und viele Server hat.  Um Ereignisse sicher von Geräten auf Server zu übertragen, wird eine Zwischenschicht benötigt.  Abhängig von der Architektur können mehrere unterschiedliche Ereigniswarteschlangen auftreten. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apache Kafka</a> ist eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pub / Sub-Warteschlange</a> , die als Warteschlange zum Sammeln von Ereignissen verwendet wird. <br><blockquote>  Laut einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beitrag über Kvor</a> aus dem Jahr 2014 hat der Schöpfer von Apache Kafka beschlossen, die Software nach Franz Kafka zu benennen, weil „es sich um ein für die Aufnahme optimiertes System handelt“ und weil er Kafkas Werke liebte.  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wikipedia</a> </blockquote><br>  In unserem Beispiel gibt es viele Datenproduzenten und deren Verbraucher (Geräte und Server), und Kafka hilft dabei, sie miteinander zu verbinden.  Die Verbraucher werden in den nächsten Schritten ausführlicher beschrieben, wo sie die Hauptakteure sein werden.  Jetzt betrachten wir nur Datenproduzenten (Ereignisse). <br><br>  Kafka kapselt die Konzepte von Warteschlange und Partition. Insbesondere ist es besser, an anderer Stelle darüber zu lesen (z. B. in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> ).  Stellen Sie sich vor, eine mobile Anwendung wird für zwei verschiedene Betriebssysteme gestartet, ohne auf Details einzugehen.  Anschließend erstellt jede Version einen eigenen Ereignisstrom.  Produzenten senden Events an Kafka, sie werden in einer geeigneten Warteschlange aufgezeichnet. <br><img src="https://habrastorage.org/webt/79/bi/0o/79bi0ooejp8zfiw4siua1gkhagu.png" alt="Warteschlangen bei Kafka"><br>  (Bild <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von hier</a> ) <br><br>  Gleichzeitig können Sie mit Kafka Teile lesen und den Ablauf von Ereignissen mit Mini-Fledermäusen verarbeiten.  Kafka ist ein sehr praktisches Tool, das sich gut an wachsende Anforderungen anpassen lässt (z. B. durch Geolokalisierung von Ereignissen). <br><br>  Normalerweise reicht eine Scherbe aus, aber aufgrund der Skalierung wird es (wie immer) schwieriger.  Wahrscheinlich wird niemand nur einen physischen Shard in der Produktion verwenden wollen, da die Architektur fehlertolerant sein muss.  Neben Kafka gibt es noch eine weitere bekannte Lösung - RabbitMQ.  Wir haben es in der Produktion nicht als Warteschlange für Ereignisanalysen verwendet (wenn Sie eine solche Erfahrung haben, teilen Sie uns dies in den Kommentaren mit!).  Sie verwendeten jedoch AWS Kinesis. <br><br>  Bevor wir mit dem nächsten Schritt fortfahren, müssen wir eine weitere zusätzliche Ebene des Systems erwähnen - die Speicherung von Rohprotokollen.  Dies ist keine erforderliche Ebene, aber es ist nützlich, wenn etwas schief geht und die Warteschlangen der Ereignisse in Kafka zurückgesetzt werden.  Die Speicherung von Rohprotokollen erfordert keine komplizierte und teure Lösung. Sie können sie einfach irgendwo in der richtigen Reihenfolge (auch auf einer Festplatte) aufzeichnen. <br><img src="https://habrastorage.org/webt/yt/tn/we/yttnwe1yfgconmy3z4frdmnypmc.jpeg" alt="Ereignisse kommen in Einklang"><br><h3>  2. Verarbeitung von Ereignisströmen </h3><br>  Nachdem wir alle Ereignisse vorbereitet und in geeignete Warteschlangen gestellt haben, fahren wir mit dem Verarbeitungsschritt fort.  Hier werde ich über die beiden häufigsten Verarbeitungsoptionen sprechen. <br><br>  Die erste Option besteht darin, Spark Streaming auf einem Apache-System zu aktivieren.  Alle Apache-Produkte leben in HDFS, einem sicheren Dateireplikations-Dateisystem.  Spark Streaming ist ein benutzerfreundliches Tool, das Streaming-Daten verarbeitet und gut skaliert.  Die Wartung kann jedoch etwas schwierig sein. <br><br>  Eine andere Möglichkeit besteht darin, einen eigenen Ereignishandler zu erstellen.  Dazu müssen Sie beispielsweise eine Python-Anwendung schreiben, im Docker erstellen und die Kafka-Warteschlange abonnieren.  Wenn Trigger auf den Handlern im Docker eintreffen, wird die Verarbeitung gestartet.  Bei dieser Methode müssen Sie ständig Anwendungen ausführen. <br><br>  Angenommen, wir haben eine der oben beschriebenen Optionen ausgewählt und fahren mit der Verarbeitung selbst fort.  Prozessoren sollten zunächst die Gültigkeit der Daten überprüfen, Müll und "defekte" Ereignisse filtern.  Zur Validierung verwenden wir normalerweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cerberus</a> .  Danach können Sie eine Datenzuordnung vornehmen: Daten aus verschiedenen Quellen werden normalisiert und standardisiert, um dem allgemeinen Etikett hinzugefügt zu werden. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/os/iu/m8/osium8y24ypxtq-bk3oesiszhc4.jpeg" alt="Ereignisse kommen zum Handler"></div><br><h3>  3. Datenbank </h3><br>  Der dritte Schritt besteht darin, normalisierte Ereignisse aufrechtzuerhalten.  Wenn wir mit einem vorgefertigten Analysesystem arbeiten, müssen wir uns häufig mit ihnen in Verbindung setzen. Daher ist es wichtig, eine geeignete Datenbank auszuwählen. <br><br>  Wenn die Daten gut in ein festes Schema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">passen</a> , können Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Clickhouse</a> oder eine andere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spaltendatenbank</a> auswählen.  Aggregationen funktionieren also sehr schnell.  Der Nachteil ist, dass das Schema starr festgelegt ist und daher das Falten beliebiger Objekte ohne Verfeinerung fehlschlägt (z. B. wenn ein nicht standardmäßiges Ereignis auftritt).  Aber man kann sehr schnell zählen. <br><br>  Für unstrukturierte Daten können Sie NoSQL verwenden, z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apache Cassandra</a> .  Es funktioniert auf HDFS, ist gut repliziert, Sie können viele Instanzen auslösen, fehlertolerant. <br><br>  Sie können etwas Einfacheres aufnehmen, zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MongoDB</a> .  Es ist ziemlich langsam und für kleine Mengen.  Das Plus ist aber, dass es sehr einfach und daher zum Starten geeignet ist. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zc/z0/54/zcz054-gr2mczuf_dns72caehec.jpeg" alt="Bild"></div><br><h3>  4. Aggregationen </h3><br>  Nachdem wir alle Ereignisse sorgfältig gespeichert haben, möchten wir alle wichtigen Informationen aus dem Stapel sammeln und die Datenbank aktualisieren.  Weltweit möchten wir relevante Dashboards und Metriken erhalten.  Zum Beispiel von Ereignissen, um ein Benutzerprofil zu sammeln und das Verhalten irgendwie zu messen.  Ereignisse werden aggregiert, gesammelt und erneut gespeichert (bereits in Benutzertabellen).  Gleichzeitig können Sie das System so aufbauen, dass Sie auch einen Filter mit dem Aggregator-Koordinator verbinden: Sammeln Sie Benutzer nur von einem bestimmten Ereignistyp. <br><br>  Wenn danach jemand im Team nur Analysen auf hoher Ebene benötigt, können Sie externe Analysesysteme anschließen.  Sie können Mixpanel wieder einnehmen.  Da es aber recht teuer ist, werden nicht alle Benutzerereignisse dorthin gesendet, sondern nur das, was benötigt wird.  Dazu müssen Sie einen Koordinator erstellen, der einige Rohereignisse oder etwas, das wir zuvor selbst aggregiert haben, an externe Systeme, APIs oder Werbeplattformen überträgt. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pj/fn/ck/pjfnckuoonpbyua_5d3qbhyegfa.jpeg" alt="Bild"></div><br><h3>  5. Frontend </h3><br>  Sie müssen das Frontend mit dem erstellten System verbinden.  Ein gutes Beispiel ist der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Redash-</a> Service, eine GUI für Datenbanken, mit deren Hilfe Panels erstellt werden können.  Wie die Interaktion funktioniert: <br><br><ol><li>  Der Benutzer führt eine SQL-Abfrage durch. </li><li>  Als Antwort erhält eine Tablette. </li><li>  Für sie erstellt sie eine 'neue Visualisierung' und erhält einen schönen Zeitplan, der bereits für sich selbst gespeichert werden kann. </li></ol><br>  Visualisierungen im Dienst werden automatisch aktualisiert. Sie können Ihre Überwachung konfigurieren und verfolgen.  Redash ist kostenlos, wenn Sie selbst gehostet werden und wie SaaS 50 US-Dollar pro Monat kostet. <br><img src="https://habrastorage.org/webt/mn/tv/vb/mntvvbd4vacpm4r6qvujl6xwc8s.jpeg" alt="Bild"><br><h2>  Fazit </h2><br>  Nachdem Sie alle oben genannten Schritte ausgeführt haben, erstellen Sie Ihre Serveranalyse.  Bitte beachten Sie, dass dies nicht so einfach ist wie das einfache Verbinden von Client-Analysen, da alles unabhängig konfiguriert werden muss.  Bevor Sie Ihr eigenes System erstellen, sollten Sie daher die Notwendigkeit eines seriösen Analysesystems mit den Ressourcen vergleichen, die Sie bereit sind, diesem System zu widmen. <br>  Wenn Sie alles berechnet haben und festgestellt haben, dass die Kosten zu hoch sind, werde ich im nächsten Teil darüber sprechen, wie Sie eine billigere Version der Serveranalyse erstellen können. <br><br>  Danke fürs Lesen!  Ich freue mich über Fragen in den Kommentaren. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de444254/">https://habr.com/ru/post/de444254/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de444244/index.html">Bewegung durch Raum und Zeit</a></li>
<li><a href="../de444246/index.html">Überprüfen von FreeRDP mit PVS-Studio</a></li>
<li><a href="../de444248/index.html">Kopfloses Testen in einem Browser. Vorteile und Nachteile</a></li>
<li><a href="../de444250/index.html">Sind die Leute nicht bereit für Bitcoin oder Bitcoin für die Massenadoption?</a></li>
<li><a href="../de444252/index.html">AMD kündigt seine 3D-Chip-Architektur an, um mit Intel Foveros 3D Schritt zu halten</a></li>
<li><a href="../de444256/index.html">Mein erster Sharp PC3000 Reader</a></li>
<li><a href="../de444260/index.html">Wir entwickeln ein System zur Bewertung der Arbeit von Support-Mitarbeitern</a></li>
<li><a href="../de444262/index.html">Markdown2pdf-Quellcode für Linux</a></li>
<li><a href="../de444264/index.html">Wie man ein Committer wird und braucht man es wirklich?</a></li>
<li><a href="../de444268/index.html">Sicherheitswoche 12: Tastaturangriffe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>