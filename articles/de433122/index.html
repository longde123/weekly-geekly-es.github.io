<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßìüèº üë©üèº‚Äçüç≥ üõÑ React-Hot-Loader v4.6 üèüÔ∏è üé´ ‚úçüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor ungef√§hr einem Monat kam React Hooks heraus und sofort wurde klar, dass React-Hot-Loader alles Himbeeren verdirbt und nicht nur nicht sehr kompati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>React-Hot-Loader v4.6</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433122/"><p>  Vor ungef√§hr einem Monat kam React Hooks heraus und sofort wurde klar, dass React-Hot-Loader alles Himbeeren verdirbt und nicht nur nicht sehr kompatibel mit ihnen ist, sondern auch den Rest des Codes bricht.  Im Allgemeinen war es ein hei√üer Monat ... </p><br><img src="https://habrastorage.org/getpro/habr/post_images/ded/f4c/580/dedf4c580aaf859a99afd5cec7cddbdd.png" alt="Hei√ü"><br><br><h1 id="chto-vnutri">  Was ist drin? </h1><br><ul><li>  Neue API f√ºr HMR </li><li>  Volle Unterst√ºtzung f√ºr React 16.6 - React.lazy, React.memo und forwardRef </li><li>  Nat√ºrlich Haken </li><li>  Reagieren (was auch immer das bedeutet) </li><li>  Webpack Plugin </li><li>  Automagic ErrorBoundaries </li><li>  Rein rendern </li><li>  "Prinzipien" </li></ul><a name="habracut"></a><br><h1 id="novyy-api-dlya-hmr">  Neue API f√ºr HMR </h1><br><p> Hier hat sich fast nichts ge√§ndert - es war <code>hot</code> - blieb <code>hot</code> .  Gerade k√ºrzer und schlauer geworden: </p><br><blockquote>  Vorher <br><pre> <code class="plaintext hljs">import {hot} from 'react-hot-loader'; .... export default hot(module)(MyComponent)</code> </pre> <br><br>  Jetzt <br><pre> <code class="plaintext hljs">import {hot} from 'react-hot-loader/root'; .... export default hot(MyComponent)</code> </pre> <br></blockquote><p>  Tats√§chlich ist der neue <code>hot</code> nur der alte, der in zwei Teile geteilt ist.  Infolgedessen ist es m√∂glich, Situationen zu erkennen, in denen der erste Teil aufgerufen wurde und der zweite nicht ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Details</a> ). </p><br><h1 id="react-166support">  Reagiere auf 16.6 Unterst√ºtzung </h1><br><p>  <code>forwardRef</code> funktioniert einfach (niemand hat gesagt, dass es vorher nicht funktioniert hat), <code>memo</code> wird aktualisiert, obwohl es <code>memo</code> , aber <code>lazy</code> gelernt, seine Interna erneut zu importieren. </p><br><p>  Und nat√ºrlich funktioniert alles direkt aus dem Sarg. </p><br><h1 id="react-hookssupport">  Hakenunterst√ºtzung reagieren </h1><br><p>  Nach der Ver√∂ffentlichung von 16.7 wurde klar, dass das Problem mit Hooks.  Leider waren so gro√üe Projekte wie StoryBook ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Problem</a> ) und Gatsby ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Problem</a> ) von dieser Katastrophe betroffen. </p><br><p>  Das Problem ergab sich aus der Natur von React-Hot-Loader. Um React auszutricksen und die Zerst√∂rung der alten Version des Baums zu verhindern, verpackt HotLoader jede Komponente in einen Wrapper, der nur die Verkn√ºpfung zur "echten" Komponente in sich selbst √§ndert. <br>  Nat√ºrlich waren die SFCs in Komponenten eingewickelt, und alles war kaputt. </p><br><blockquote>  Tats√§chlich haben sich SFCs mit SFCs umgedreht, die eine Instanz der Klasse zur√ºckgegeben haben.  Eine sehr undokumentierte "Werks" -Reaktionsfunktion. </blockquote><p>  Die Community fand schnell einen Ausweg (an den ich selbst nicht <code>{pureSFC: true}</code> gedacht hatte), gl√ºcklicherweise musste ich nur eine Option √§ndern - <code>{pureSFC: true}</code> , und RHL w√ºrde in eine einfachere Betriebsart wechseln, die zuvor aufgrund eines Problems mit deep- deaktiviert war. Force-Update, das wir jetzt auch aktualisiert haben. </p><br><h1 id="react-hot-dom">  React-Hot-Dom </h1><br><p>  Bei Hot-Loader ging es schon immer darum, React zu <em>hacken.</em> Dazu wurde <code>createElement</code> √ºberladen und "Proxy" -Komponenten zur√ºckgegeben, um die Pr√ºfung in <code>React-Dom</code> auszutricksen.  Jetzt wird Hot-Loader genau diesen Check hacken :) Es funktioniert erstaunlich. </p><br><p>  Leider bietet die Reaktion selbst keine API daf√ºr, daher haben wir ein spezielles Paket ver√∂ffentlicht - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hotloader / React-Dom</a> mit allen erforderlichen Patches. </p><br><p>  Das Setzen eines Patches ist einfach: </p><br><pre> <code class="plaintext hljs">// this would always work yarn add @hot-loader/react-dom@npm:react-dom // or change your webpack config alias: { 'react-dom': '@hot-loader/react-dom' } // or do the same with package.json to enable it in parcel</code> </pre> <br><p>  F√ºr diejenigen, die keine Linksh√§nder-Pakete installieren m√∂chten, wird das Bundle mit einem Webpack-Loader geliefert, der speziell Ihre Version von react-dom patcht. </p><br><h1 id="webpack-loader">  Webpack-Lader </h1><br><p>  Der gleiche Webpack-Loader, den wir in Version 4 genagelt haben, ist wieder zu uns zur√ºckgekehrt.  Warum? </p><br><ul><li>  Um schnell auf node_modules zuzugreifen und weitere Codeinformationen bereitzustellen </li><li>  React-Dom patchen </li><li>  F√ºr diejenigen, die Babel nicht m√∂gen </li></ul><br><h1 id="automagic-errorboundaries">  Automagic ErrorBoundaries </h1><br><p>  Fehler w√§hrend der Entwicklung sind eine Lieblingssache, aber niemand mochte Fehler + React-Hot-Loader - es hat einfach nicht sehr gut funktioniert und manchmal hat es √ºberhaupt nicht funktioniert. </p><br><p>  Ab Version 4.6 f√ºgt React-Hot-Loader allen Komponenten vor dem Start des Updates componentDidCatch hinzu und entfernt es nach dem Update.  Fehler k√∂nnen abgefangen und "just-in-place" angezeigt werden. </p><br><p>  Es scheint eine Kleinigkeit zu sein, aber diese Kleinigkeit ver√§ndert den gesamten Entwicklungsprozess.  Und nat√ºrlich ist alles auf Ihren Geschmack abgestimmt. <br><img src="https://habrastorage.org/webt/rj/mx/0h/rjmx0hevxbrs3hgst4-wsmraoyk.gif" alt="Fehlerberichterstatter"></p><br><h1 id="pure-render">  "Reines" Rendern </h1><br><p>  Dieses Problem war schon immer bei Hot-Loader.  Bis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sie ihre Nase steckten</a> .  Kurz gesagt - in React Dev Tools k√∂nnen Sie mit der rechten Maustaste auf das Men√º klicken und direkt zur Komponente springen ... Genauer gesagt (es war) k√∂nnen Sie dies nicht tun </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/adb/b4f/122/adbb4f12205909c2cdbc052105520136.gif" alt="Entwicklungswerkzeuge"></p><br><p>  Jetzt gibt es die <code>pureRender</code> Option, sofern sie standardm√§√üig <code>pureRender</code> ist, wodurch einige Nebenwirkungen aus der Komponente entfernt werden, die zu diesem Problem f√ºhren. </p><br><p>  Leider funktioniert dies nur f√ºr "klassenbasierte" Komponenten, f√ºr SFC ist ein Patch in React-Dom erforderlich, der oben erw√§hnt wurde. </p><br><p>  Im Prinzip besteht jetzt die M√∂glichkeit, das Vorhandensein von HotLoader im System praktisch zu verbergen. </p><br><h1 id="principles">  Prinzipien </h1><br><p>  Vor einer Woche ver√∂ffentlichte Dan Abramov seine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wunschliste f√ºr Hotloader</a> - 22 Prinzipien, die ein Hotloader erf√ºllen muss, um ‚Äûrichtig‚Äú zu sein, wenn nicht wei√ü und flauschig. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Derzeit sind</a> 14 Punkte zu 100% und weitere 4 bis 50% abgeschlossen.  Insgesamt - 17 von 22. Im Prinzip nicht schlecht, und es ist klar, was getan werden muss, um den Rest zu erledigen. <br>  Wer wei√ü, vielleicht kehrt Dan danach zum Projekt zur√ºck. </p><br><h1 id="tak-chto">  Na und </h1><br><ul><li>  Aktualisieren Sie einfach Ihren Hot Loader! </li><li>  Ersetzen Sie die alte <code>hot</code> durch die neue <code>hot</code> , ich wei√ü, es klingt seltsam, aber Sie verstehen mich. </li><li>  versuche irgendwie zu reagieren.  Dies ist nicht so notwendig, ohne diesen Schritt wird alles gut funktionieren - aber es wird sehr gut damit sein. </li><li>  das ist alles  Es sollte funktionieren.  Probieren Sie es einfach aus. </li></ul><br><p>  Mit dir war Ô∏è </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/gaearon/react-hot-loader</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433122/">https://habr.com/ru/post/de433122/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433110/index.html">Erstellen von Hochleistungsorganisationen: Die strategische Bedeutung von Collaboration-Software</a></li>
<li><a href="../de433112/index.html">Unterhaltsames JavaScript: Schneetag</a></li>
<li><a href="../de433114/index.html">PMP-Zertifizierung: Vorbereitung auf die Pendlerpr√ºfung</a></li>
<li><a href="../de433116/index.html">Flammenwerfer, Weihnachtsmann auf einem Panzer, Bigfoot, Baba Yaga auf Endurica (und m√∂glicherweise ein Jetpack) - alles f√ºr Kinder f√ºr das neue Jahr</a></li>
<li><a href="../de433118/index.html">Benchmark-Tests und schnelle Analyse von Permutationsalgorithmen</a></li>
<li><a href="../de433126/index.html">Zabbix Review: So organisieren Sie eine Code√ºberpr√ºfung zur √úberwachung der Konfiguration</a></li>
<li><a href="../de433128/index.html">Was IT-Profis spielen und was nicht (Bulletin 2018)</a></li>
<li><a href="../de433130/index.html">M√∂ge Gewalt mit uns sein: unsere eigene Immunit√§t gegen Krebs</a></li>
<li><a href="../de433132/index.html">"Testerkalender" f√ºr Dezember. Versuchen Sie einen anderen Ansatz</a></li>
<li><a href="../de433136/index.html">System.Transactions-Infrastruktur in der .NET-Welt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>