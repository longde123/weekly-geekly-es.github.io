<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔯 💿 🍗 Actualiza tus lanzamientos ⚕️ 🚐 🤳🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Henry Ford dijo una vez: "El mejor auto es un auto nuevo". Entonces, en el grupo de compañías Tinkoff pensamos en los lanzamientos de software. La ine...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Actualiza tus lanzamientos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/472434/"><p><img src="https://habrastorage.org/webt/gk/69/t-/gk69t-xi2-9rxwwn8xmp_gz1lo0.png"></p><br><p>  Henry Ford dijo una vez: "El mejor auto es un auto nuevo".  Entonces, en el grupo de compañías Tinkoff pensamos en los lanzamientos de software.  La inercia en el proceso de entrega de características y soluciones urgentes tarde o temprano conduce a una gran deuda técnica para el cliente y, a menudo, termina con el estancamiento del proyecto en su conjunto. </p><br><p>  Garantizar un indicador de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tiempo de comercialización</a> elevado mientras se mantiene la calidad no es una tarea fácil.  Desde mi punto de vista, es imposible construir inmediatamente rieles en los que sea posible entregar cambios rápida y convenientemente muchos meses después del inicio.  El crecimiento de un proyecto generalmente va acompañado de un aumento en la cantidad de personas que trabajan en él, lo que significa que crea una fuente potencial de caos en sus lanzamientos. </p><br><p>  No vale la pena considerar nuestra experiencia como instrucciones para el éxito, pero varias ideas me parecieron lo suficientemente interesantes como para compartirlas con usted.  Empecemos </p><a name="habracut"></a><br><p>  El punto de partida de nuestra historia es técnicamente el siguiente.  El sistema consta de varios servicios, cuya base de código es revisada por unas 30 personas, varios equipos que están divididos por áreas de negocio, por ejemplo, servicio a personas físicas y jurídicas.  Intentaré ignorar los detalles técnicos y arquitectónicos del proyecto para centrarme en el proceso de lanzamiento en sí. </p><br><p>  Trabajamos en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gitflow</a> , por lo que el artículo será principalmente interesante para aquellos que eligieron este método de entrega en particular. </p><br><h3 id="problemy">  Los problemas </h3><br><p>  El primer problema que encontramos está relacionado con <strong>la automatización insuficiente de los procesos</strong> .  La implementación de todas las actividades de lanzamiento en nuestro equipo está vinculada al rol de un administrador de lanzamiento (RM). </p><br><p>  Aquí hay algunos de ellos: </p><br><ol><li>  Dejar ramas de lanzamiento y crear etiquetas. </li><li>  Fusionarse con master y desarrollar sucursales. </li><li>  Cree y despliegue artefactos que se incluyen en la versión. </li><li>  Comunicación con especialistas involucrados en el proceso, por ejemplo, con QA o administradores. </li></ol><br><p>  Estas tareas rutinarias requieren más y más recursos a medida que el proyecto se expande (en nuestro caso, un aumento en el número de servicios), por lo que el primer paso es automatizar todo lo que se puede automatizar.  Nos integramos con la herramienta CI / CD para desviar y fusionar ramas de lanzamiento, lanzar compilaciones de prueba e implementar artefactos con el botón;  con herramienta de seguimiento de tareas y mensajería corporativa para la notificación oportuna del participante responsable del siguiente paso; por ejemplo, cambie el estado de la tarea y configure el enlace para enviar una notificación. </p><br><div class="spoiler">  <b class="spoiler_title">Trabajos de automatización de Gitflow</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/5j/d9/jj/5jd9jjsprv33w-m1my1mahamqam.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Un ejemplo de notificación en un messenger</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ui/cs/0v/uics0vc4rqqacwoi3ax1nq029oi.png"></p></div></div><br><p>  El administrador de versiones aún tendrá que resolver manualmente los posibles conflictos derivados de la fusión de sucursales, pero las versiones rápidas y frecuentes deberían reducir su número a nada. </p><br><p>  El siguiente problema es la <strong>prueba</strong> . </p><br><p>  Uno de los criterios de compilación para nosotros es la ejecución exitosa de las pruebas.  Es habitual dividir las pruebas en al menos dos tipos: unidad e integración. </p><br><p>  <strong>Las pruebas unitarias le</strong> permiten verificar la corrección de los módulos individuales del código fuente del programa, que en la práctica se reduce a verificar uno o más métodos que tienen una conexión lógica obvia. </p><br><p>  <strong>Las pruebas de integración</strong> generalmente verifican la operatividad de una cascada completa de dichos módulos, es decir, el funcionamiento de una característica completa en el lado del cliente.  Por ejemplo, si se implementó una interfaz de descanso en una tarea, verificaremos la operatividad de la autorización, la deserialización de la solicitud en sí, la validez de los campos transmitidos, la integración con otros servicios y bases de datos, así como la lógica de negocios en sí.  A primera vista, puede parecer que tales pruebas son muy autosuficientes y pueden cubrir todas las áreas problemáticas potenciales.  No es necesario comprender cómo funciona cada ladrillo individual, y la interfaz llamada encapsula toda la lógica para obtener una respuesta simple en la salida: si funciona o no. </p><br><p>  De hecho, crean una serie de problemas diferidos, estos son algunos de ellos: </p><br><ol><li>  La participación de una gran cantidad de componentes probados afecta proporcionalmente el tiempo de montaje y la ejecución de tales pruebas. </li><li>  Encapsular la lógica de la prueba a menudo lleva al hecho de que es difícil garantizar la exactitud del resultado de la prueba.  A menudo personalizamos la prueba para el resultado, y aún más a menudo el resultado coincide con las expectativas debido a los efectos secundarios aleatorios. </li><li>  La relevancia de los datos de prueba se pierde. </li><li>  Las integraciones con sistemas de terceros, especialmente en entornos de prueba, a menudo caen.  Esto niega el tiempo dedicado a la ejecución, ya que no siempre es obvio: esta es una caída o falla temporal causada por nuestros cambios. </li></ol><br><p>  Para la mayoría de los problemas, ya se ha encontrado una solución.  Pero, como de costumbre, las soluciones no vienen sin restricciones adicionales o nuevos problemas. </p><br><p>  Elegir las pruebas correctas para usted e implementarlas correctamente es una tarea muy difícil.  Además, es importante lograr un equilibrio entre la calidad de la cobertura y la velocidad de construcción para optimizar sus lanzamientos. </p><br><p>  En nuestro caso, nos decidimos por un híbrido.  Continuamos planteando todos los componentes necesarios para una prueba de características completas, lavando simultáneamente todas las integraciones posibles.  Para guardar los contratos de API, utilizamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pact</a> y para verificar la integración con la base de datos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Testcontainers</a> . </p><br><p>  Como resultado, este enfoque para escribir pruebas resultó en una solución al tercer problema: <strong>mucho tiempo para la prueba manual de una tarea</strong> .  La estabilidad de las pruebas híbridas ha llevado a la idea de atraer a un ingeniero de control de calidad en la etapa de especificar la tarea para compilar los casos de prueba; esto permitirá que se omitan en la etapa de prueba manual.  La integración con productos útiles como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">TestRail</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Allure se</a> ha convertido en una especie de puente entre el desarrollador y el probador.  Se crea un contrato, cuya ejecución se refleja paso a paso en el informe generado durante el ensamblaje de prueba. </p><br><div class="spoiler">  <b class="spoiler_title">TestRail.</b>  <b class="spoiler_title">Detalles de compilación de prueba</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/nk/wv/kc/nkwvkcxtmk1j_sxutjmni2rganu.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">TestRail.</b>  <b class="spoiler_title">Casos de prueba implementados por el desarrollador</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ha/oh/5r/haoh5rijpl5xjg6arorfgwdnkzi.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Encanto</b>  <b class="spoiler_title">Informe de compilación de prueba automática</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/1f/w2/cy/1fw2cyotmhbopjohdm47y7spkaq.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Encanto</b>  <b class="spoiler_title">Información para cada prueba en ejecución y detalles de ejecución paso a paso.</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/g_/q-/os/g_q-osvljwhuecjhtkta1avthwk.png"></p></div></div><br><p>  Queda por conectar los informes a su herramienta de seguimiento de tareas para el seguimiento transparente de tareas.  Una historia clara también reducirá el tiempo que lleva compilar e implementar pruebas para futuras tareas relacionadas. </p><br><div class="spoiler">  <b class="spoiler_title">Jira</b>  <b class="spoiler_title">Casos de prueba conectados automáticamente a la tarea</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fr/66/dv/fr66dvaumtfhdc56iw5tnezg4vk.png"></p></div></div><br><p>  De esta manera, los ingenieros de control de calidad ahorran suficiente tiempo para concentrarse en probar casos excepcionales e integrarse con otros sistemas. </p><br><p>  El último problema está relacionado con esto.  Para las pruebas manuales, todas las tareas se fusionan desde las ramas de características en desarrollar y lanzar una implementación en el banco de pruebas. </p><br><p>  En primer lugar, con este enfoque, no se puede hablar de pruebas puras de la función, ya que en paralelo los cambios relacionados de otros desarrolladores pueden desarrollarse. </p><br><p>  En segundo lugar, al liberar la rama de lanzamiento, puede resultar que el control de calidad no haya tenido tiempo de probar algunas de las tareas.  Hay una opción: revertir los cambios afectados por estas tareas o ralentizar el lanzamiento hasta el final de la prueba. </p><br><p>  Tendrá que hacer esa elección todo el tiempo, a menos que <strong>aísle su entorno de prueba</strong> .  Es importante que no haya cambios en el componente bajo prueba que no sean los realizados por la tarea.  En nuestro caso, necesitamos poder recoger uno o más servicios cuyas sucursales hayan recibido cambios y administrar el enrutamiento dentro del clúster enviando solo las solicitudes que necesitamos de QA a estas instancias.  La tarea es complicada si ya se utilizan mecanismos de equilibrio en el clúster, que también deben tenerse en cuenta. </p><br><p>  Al aprovechar esta oportunidad, comenzamos a realizar pruebas manuales directamente en ramas de características separadas: implementar el servicio deseado durante la prueba, integrándolo en el entorno general de forma aislada.  Al fusionar solo tareas preparadas en la rama de desarrollo y deshacernos de los bloqueos, nosotros mismos comenzamos a determinar qué cambios deberían incluirse en el lanzamiento y cuáles no. </p><br><p>  Vale la pena señalar que es poco probable que tal solución se convierta en una bala de plata para aquellos equipos que realizan cambios en casi los mismos archivos.  En este caso, el almacenamiento de características es inversamente proporcional al número de conflictos que surgen durante la fusión.  En la práctica, con lanzamientos bastante frecuentes, esto ocurre extremadamente raramente en un equipo con cincuenta desarrolladores. </p><br><h3 id="vmesto-vyvoda">  En lugar de salida </h3><br><p>  En resumen, podemos identificar los principales enfoques que pueden ayudar a acelerar los lanzamientos: </p><br><ol><li>  Automatización de operaciones rutinarias. </li><li>  Transparencia de procesos para todos los involucrados. </li><li>  El equilibrio necesario entre velocidad y calidad en la escritura de pruebas automatizadas. </li><li>  Tiempo reducido para pruebas manuales. </li><li>  Aislamiento del entorno para pruebas. </li></ol><br><p>  Es importante comprender que en la elección de varios enfoques, principios y estrategias siempre vale la pena comenzar desde el contexto de su problema.  Hay muchas formas igualmente confiables y más sofisticadas para acelerar la entrega de su software al cliente.  Un intento de responder a las nuevas dificultades emergentes ha llevado a las conclusiones descritas anteriormente.  Para nosotros, fueron el primer paso hacia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un enfoque más audaz para lanzar lanzamientos</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472434/">https://habr.com/ru/post/472434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472422/index.html">Sber X RamblerFront & Meet Up</a></li>
<li><a href="../472426/index.html">Semana de la seguridad 43: la vida secreta de IoT Hanipots</a></li>
<li><a href="../472428/index.html">Operador de kubernetes de Tarantool</a></li>
<li><a href="../472430/index.html">Cómo elegimos la base de componentes para un hogar inteligente: sobre sensores y un controlador</a></li>
<li><a href="../472432/index.html">Python 3.8: ¿Qué hay de nuevo y cómo usarlo?</a></li>
<li><a href="../472438/index.html">Cómo se usan los proxies en la seguridad de la información: 6 casos de uso práctico</a></li>
<li><a href="../472440/index.html">Un día en Joker 2019</a></li>
<li><a href="../472442/index.html">La situación: todos hablan del regreso de los formatos de audio olvidados: por qué están destinados a seguir siendo un nicho</a></li>
<li><a href="../472444/index.html">Los mejores productos parten de problemas reales: Intercomunicador sobre trabajos por hacer. Parte 3 final</a></li>
<li><a href="../472446/index.html">Cómo hacer la coloración correcta del código en "Habré" y por qué es tan difícil</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>