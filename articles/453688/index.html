<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÜüèº üîµ üë©üèø‚Äçüîß Java no solo es una empresa sangrienta, sino tambi√©n aplicaciones r√°pidas sensibles a la latencia üî™ üî¶ ü§ü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hago comercio algor√≠tmico en Raiffeisenbank. Esta es un √°rea bastante espec√≠fica del sector bancario. Creamos una plataforma de negociaci√≥n que funcio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java no solo es una empresa sangrienta, sino tambi√©n aplicaciones r√°pidas sensibles a la latencia</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/453688/">  Hago comercio algor√≠tmico en Raiffeisenbank.  Esta es un √°rea bastante espec√≠fica del sector bancario.  Creamos una plataforma de negociaci√≥n que funciona con retrasos bajos y predecibles.  El √©xito de la aplicaci√≥n depende, entre otras cosas, de la velocidad de la aplicaci√≥n, por lo que tenemos que lidiar con toda la pila involucrada en el comercio: canales de red privados, hardware especial, configuraci√≥n del sistema operativo y una JVM especial, y, por supuesto, la aplicaci√≥n misma.  No podemos dejar de optimizar exclusivamente la aplicaci√≥n en s√≠ misma: el sistema operativo o la configuraci√≥n de red no son menos importantes.  Esto requiere experiencia t√©cnica y erudici√≥n para comprender c√≥mo fluyen los datos a trav√©s de toda la pila y d√≥nde puede haber un retraso. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b8/ff/7v/b8ff7vpvqcp4qpvadbihv_uztq0.jpeg"></div><a name="habracut"></a><br>  No todas las organizaciones / bancos pueden permitirse el desarrollo de esta clase de software.  Pero tuve la suerte de que tal proyecto se lanz√≥ dentro de los muros de Raiffeisenbank, y ten√≠a una especializaci√≥n adecuada: me especialic√© en el rendimiento del c√≥digo en el Laboratorio Intel Mosc√∫ Compiler.  Creamos compiladores para C, C ++ y Fortran.  En Raiffeisenbank, me cambi√© a Java.  Si antes hice alg√∫n tipo de herramienta que mucha gente us√≥ entonces, ahora me he movido al otro lado de las barricadas y estoy involucrado en el an√°lisis aplicado del rendimiento no solo del c√≥digo, sino de toda la pila de aplicaciones.  Regularmente, la forma de investigar un problema de rendimiento va mucho m√°s all√° del c√≥digo, por ejemplo, en la configuraci√≥n del n√∫cleo o de la red. <br><br><h3>  <b>Java no es para alta carga?</b> </h3><br>  Se cree ampliamente que Java no es muy adecuado para el desarrollo de sistemas altamente cargados. <br>  Esto solo se puede acordar parcialmente.  Java es hermoso en muchos aspectos.  Si lo comparamos con un lenguaje como C ++, entonces su sobrecarga potencial puede ser mayor, pero a veces soluciones funcionalmente similares en C ++ pueden funcionar m√°s lentamente.  Hay optimizaciones que funcionan autom√°ticamente en Java, pero no funcionan en C ++, y viceversa.  En cuanto a la calidad del c√≥digo que viene despu√©s del compilador JIT de Java, quiero creer que el rendimiento ser√° inferior a lo que podr√≠a lograr en el pico, no m√°s de varias veces.  Pero al mismo tiempo obtengo un desarrollo muy r√°pido, excelentes herramientas y una amplia selecci√≥n de componentes listos para usar. <br><br>  Seamos realistas: en el mundo C ++, los entornos de desarrollo (IDE) est√°n significativamente detr√°s de IntelliJ y Eclipse.  Si un desarrollador utiliza cualquiera de estos entornos, la velocidad de depuraci√≥n, la b√∫squeda de errores y la escritura de l√≥gica compleja es un orden de magnitud mayor.  Como resultado, resulta que es m√°s f√°cil archivar Java en los lugares correctos para que funcione lo suficientemente r√°pido como para hacer todo desde cero y durante mucho tiempo en C ++.  Lo m√°s divertido es que, al escribir c√≥digo competitivo, los enfoques de sincronizaci√≥n tanto en Java como en C ++ son muy similares: son primitivos a nivel del sistema operativo (por ejemplo, <i>sincronizado / std :: mutex</i> ) o primitivos de hierro ( <i>Atomic * / std :: atomic &lt;*&gt;</i> ) .  Y es muy importante ver esta similitud. <br><br>  En general, estamos desarrollando una aplicaci√≥n sin carga alta)) <br><br><h3>  <b>¬øCu√°l es la diferencia entre la aplicaci√≥n de alta carga y baja latencia?</b> <br></h3><br>  El t√©rmino alta carga no refleja completamente los detalles de nuestro trabajo: estamos involucrados en <i>sistemas sensibles a la latencia</i> .  Cual es la diferencia  Para sistemas altamente cargados, es importante trabajar en promedio con bastante rapidez, haciendo un uso completo de los recursos de hardware.  En la pr√°ctica, esto significa que cada cent√©sima / mil√©sima /../th millon√©sima solicitud al sistema puede funcionar muy lentamente, porque nos centramos en valores promedio y no siempre tenemos en cuenta que nuestros usuarios sufren frenos de manera significativa. <br><br>  Estamos involucrados en sistemas para los cuales el nivel de retraso es cr√≠tico.  Nuestra tarea es asegurar que el sistema siempre tenga una respuesta predecible.  Los <i>sistemas</i> potencialmente <i>sensibles a la latencia</i> pueden no estar muy cargados si los eventos ocurren con poca frecuencia, pero se requiere un tiempo de respuesta garantizado.  Y eso no facilita su desarrollo.  ¬°Todo lo contrario!  Los peligros acechan en todas partes.  La abrumadora mayor√≠a de los componentes del hardware y software moderno est√°n orientados hacia un buen trabajo "en promedio", es decir.  para el <i>rendimiento</i> <br><br>  Tomar al menos estructuras de datos.  Usamos tablas hash, y si ocurre un nuevo hash de toda la estructura de datos en una ruta cr√≠tica, esto puede conducir a frenos tangibles para un usuario espec√≠fico en una sola solicitud.  O compilador JIT: optimiza el patr√≥n de c√≥digo ejecutado con mayor frecuencia, pesimizando el patr√≥n de c√≥digo que rara vez se ejecuta.  ¬°Pero la velocidad de este caso raro en particular puede ser muy importante para nosotros! <br><br>  ¬øTal vez este c√≥digo procesa un tipo raro de pedidos?  ¬øO alguna situaci√≥n de mercado inusual que necesita una respuesta r√°pida?  Tratamos de asegurarnos de que la reacci√≥n de nuestro sistema a estos eventos potencialmente raros tome un tiempo predecible y, preferiblemente, muy corto. <br><br><h3>  <b>¬øC√≥mo lograr un tiempo de reacci√≥n predecible?</b> </h3><br>  Esta pregunta no se puede responder en dos frases.  En una primera aproximaci√≥n, es importante entender si hay alg√∫n tipo de sincronizaci√≥n: <i>sincronizada, reentrantlock</i> o algo de <i>java.util.concurrent</i> .  A menudo tienes que usar la sincronizaci√≥n en busy-spin'ah.  Usar cualquier primitiva de sincronizaci√≥n siempre es un compromiso.  Y es importante comprender c√≥mo funcionan estas primitivas de sincronizaci√≥n y qu√© compensaciones conllevan.  Tambi√©n es importante evaluar cu√°nta basura genera un fragmento de c√≥digo en particular.  La mejor manera de combatir el recolector de basura es no activarlo.  Cuanto menos generemos basura, menos a menudo ejecutaremos un recolector de basura, y m√°s tiempo funcionar√° el sistema sin su intervenci√≥n. <br><br>  Tambi√©n utilizamos una amplia gama de herramientas diferentes que nos permiten analizar no solo los indicadores promedio.  Tenemos que analizar muy cuidadosamente cu√°n lentamente funciona el sistema cada cent√©sima vez, cada mil√©sima vez.  Obviamente, estos indicadores ser√°n peores que la mediana o el promedio.  Pero es muy importante para nosotros saber cu√°nto.  Y herramientas como <i>Grafana</i> , <i>Prometheus</i> , <i>histogramas HDR</i> y <i>JMH</i> ayudan a mostrar esto. <br><br><h3>  <b>¬øPuedo eliminar inseguro?</b> <b><br></b> </h3><br>  A menudo tienes que usar lo que los apologistas llaman una API indocumentada.  Estoy hablando del famoso inseguro.  Creo que inseguro se ha convertido en una parte de facto de la API p√∫blica de las m√°quinas Java.  No tiene sentido negarlo.  Inseguro utiliza muchos proyectos que todos utilizamos activamente.  Y si lo rechazamos, ¬øqu√© pasar√° con estos proyectos?  O vivir√°n en la versi√≥n anterior de Java, o nuevamente tendr√°n que gastar mucha energ√≠a para reescribir todo esto.  ¬øLa comunidad est√° lista para esto?  ¬øEst√° listo para perder potencialmente decenas de por ciento de productividad?  Y lo m√°s importante, ¬øa cambio de qu√©? <br><br>  Indirectamente, mi opini√≥n confirma una <i>eliminaci√≥n muy ordenada de los</i> m√©todos de inseguro: en Java11 se eliminaron los m√©todos m√°s in√∫tiles de inseguro.  Creo que hasta que al menos la mitad de todos los proyectos que usan Unsafe se muevan a otra cosa, Unsafe estar√° disponible de una forma u otra. <br><br><h3>  <b>Hay una opini√≥n: Banco + Java = empresa sangrienta osificada?</b> <br></h3><br>  Nuestro equipo no tiene tales horrores.  En Spring, probablemente escribimos diez l√≠neas, y por m√≠)) Tratamos de no usar grandes tecnolog√≠as.  Preferimos hacerlo peque√±o, ordenado y r√°pido, para que podamos realizarlo, controlarlo y, si es necesario, modificarlo.  Esto √∫ltimo es muy importante para los sistemas (como el nuestro), que tienen requisitos no est√°ndar, que pueden diferir de los requisitos del 90% de los usuarios del marco.  Y en el caso de utilizar un marco grande, no podremos transmitir nuestras necesidades a la comunidad o corregir el comportamiento de forma independiente. <br><br>  En mi opini√≥n, los desarrolladores siempre deber√≠an poder usar todas las herramientas disponibles.  Llegu√© al mundo Java desde C ++ y estoy muy impresionado por la divisi√≥n de la comunidad en aquellos que desarrollan el <i>tiempo de ejecuci√≥n de la</i> m√°quina / compilador virtual o la m√°quina virtual en s√≠ y en los desarrolladores de aplicaciones.  Esto se ve claramente en el c√≥digo de clase JDK est√°ndar.  A menudo, los autores de JDK usan una API diferente.  Potencialmente, esto significa que no podemos lograr el m√°ximo rendimiento.  En general, creo que usar la misma API para escribir tanto la biblioteca est√°ndar como el c√≥digo de la aplicaci√≥n es un excelente indicador de la madurez de la plataforma. <br><br><h3>  <b>Una cosa mas</b> </h3><br>  Creo que es muy importante que todos los desarrolladores sepan c√≥mo, si no toda la pila, al menos la mitad funciona: c√≥digo Java, c√≥digo de bytes, componentes internos del tiempo de ejecuci√≥n y ensamblador de la m√°quina virtual, hardware, sistema operativo, red.  Esto permite una visi√≥n m√°s amplia de los problemas. <br>  El rendimiento tambi√©n vale la pena mencionar.  Es muy importante no centrarse en el promedio y mirar siempre los percentiles medios y altos (lo peor de las mediciones 10/100/1000 / ...). <br><br>  Hablar√© de todo esto en una <b>reuni√≥n del Grupo de Usuarios de Java el 30 de mayo</b> en San Petersburgo.  Reuni√≥n con Sergei Melnikov, solo soy yo)) Puedes registrarte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  <b>¬øDe qu√© vamos a hablar?</b> <br><br><ol><li>  Acerca de la creaci√≥n de perfiles y el uso del perfilador est√°ndar de Linux y perf: c√≥mo vivir con ellos, qu√© miden y c√≥mo interpretar sus resultados.  Esta ser√° una introducci√≥n a los perfiles generales, con consejos, trucos para la vida, c√≥mo exprimir todo lo posible de los perfiladores para que perfilen con la m√°xima precisi√≥n y frecuencia. </li><li>  Acerca de las caracter√≠sticas del equipo para obtener un perfil a√∫n m√°s detallado y ver el perfil de eventos raros.  Por ejemplo, cuando su c√≥digo se ejecuta 10 veces m√°s lento cada cent√©sima vez.  Ning√∫n perfilador dir√° sobre esto.  Escribiremos nuestro peque√±o generador de perfiles utilizando el mecanismo est√°ndar del kernel de Linux e intentaremos ver el perfil de alg√∫n evento raro. </li></ol><br>  Venga a la reuni√≥n, ser√° una gran noche, habr√° muchas historias interesantes sobre nuestra plataforma y sobre nuestro idioma favorito. <br><br>  Hasta luego;) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/453688/">https://habr.com/ru/post/453688/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453672/index.html">CardInfo: API para determinar el logotipo, los colores del banco y otras cosas por n√∫mero de tarjeta</a></li>
<li><a href="../453676/index.html">Conexi√≥n a Windows a trav√©s de SSH como en Linux</a></li>
<li><a href="../453678/index.html">C√≥mo ver la reverberaci√≥n o la transmisi√≥n de video por sonido a trav√©s del agua - 2</a></li>
<li><a href="../453682/index.html">Desarrollo del "firmware" m√°s simple para FPGAs instalados en Redd. Parte 2. C√≥digo del programa</a></li>
<li><a href="../453686/index.html">Semana de la seguridad 22: estad√≠sticas de amenazas, troyanos bancarios y haza√±as populares</a></li>
<li><a href="../453692/index.html">Shaders 3D para principiantes: efectos</a></li>
<li><a href="../453694/index.html">Con√©ctese a Windows a trav√©s de SSH como en Linux</a></li>
<li><a href="../453696/index.html">Enlace angular de dos v√≠as, un poco m√°s de comprensi√≥n</a></li>
<li><a href="../453698/index.html">Informaci√≥n cu√°ntica en la conciencia cu√°ntica</a></li>
<li><a href="../453700/index.html">Lecciones sobre SDL 2: Lecci√≥n 1 - Hola, SDL 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>