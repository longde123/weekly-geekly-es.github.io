<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏩 🏝️ 👩🏾‍🤝‍👨🏿 Bagaimana saya bergumul dengan Transisi Elemen Bersama dan menulis perpustakaan opensource pertama saya 🗞️ 🕕 😷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tidak ada kisah yang lebih menyedihkan di dunia 
 dari kisah ViewPager'e dan SET'e 




 Saya ingin memperingatkan bahwa pembuatnya adalah android pem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana saya bergumul dengan Transisi Elemen Bersama dan menulis perpustakaan opensource pertama saya</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451116/"><p>  <i>Tidak ada kisah yang lebih menyedihkan di dunia</i> <i><br></i>  <i>dari kisah <abbr title="sebuah buku yang memungkinkan Anda untuk menggulir layar aplikasi ke kiri dan kanan dengan gesekan">ViewPager'e</abbr> dan <abbr title="Shared Element Transition - memindahkan elemen antar layar di android">SET'e</abbr></i> <br></p><br><div style="text-align:center;"><img title="Gambar untuk menarik perhatian. Tentang betapa sulitnya itu di open source untuk pertama kalinya atau tentang di mana backend dapat membawa Anda. Bukan saya di foto" src="https://habrastorage.org/webt/xy/9_/-m/xy9_-mwralsvfgpectslixhktbw.jpeg"></div><br><p>  Saya ingin memperingatkan bahwa pembuatnya adalah android pemula, jadi artikelnya mengandung begitu banyak ketidakakuratan teknis sehingga Anda sebaiknya diperingatkan bahwa pernyataan yang secara teknis andal dapat muncul dalam artikel tersebut. </p><br><h2 id="kuda-privodit-bekend">  Di mana backend mengarah </h2><br><p>  Sepanjang hidupku aku melihat backend.  Awal tahun 2019, sudah ada satu proyek yang sangat ambisius, tetapi belum selesai.  Perjalanan sia-sia ke Zurich untuk wawancara dengan satu perusahaan pencarian.  Musim dingin, tanah, tidak ada mood.  Tidak ada kekuatan dan keinginan untuk menarik proyek lebih jauh. </p><br><p>  Saya ingin melupakan backend mengerikan ini selamanya.  Untungnya, takdir memberi saya ide - itu adalah aplikasi mobile.  Fitur utamanya adalah penggunaan kamera yang tidak standar.  Pekerjaan mulai mendidih.  Butuh sedikit waktu, dan sekarang prototipe sudah siap.  Rilis proyek sudah dekat dan semuanya baik-baik saja dan proporsional, sampai saya memutuskan untuk membuat pengguna " <em>nyaman</em> ". </p><a name="habracut"></a><br><h2 id="viewpager-i-shared-element-transition-ischem-puti-primireniya">  ViewPager dan Transisi Elemen Bersama.  Kami mencari rekonsiliasi </h2><br><p> Tidak ada yang ingin mengklik tombol menu kecil pada tahun 2019, baik kanan dan kiri mereka ingin menggesek layar.  Dikatakan - dilakukan, dilakukan - rusak.  Jadi <abbr title="sebuah buku yang memungkinkan Anda untuk menggulir layar aplikasi ke kiri dan kanan dengan gesekan"><code>ViewPager</code></abbr> pertama kali muncul di proyek saya (saya telah menguraikan beberapa istilah untuk backend yang sama dengan saya - hanya memindahkan kursor).  Dan <abbr title="teknologi untuk memindahkan elemen antarmuka antar layar di android">Transisi Elemen Bersama</abbr> (selanjutnya SET atau transisi) - elemen tanda tangan <abbr title="frasa yang perlu Anda masukkan lebih sering jika Anda menulis artikel tentang pengembangan android">Desain Material</abbr> , dengan tegas menolak untuk bekerja dengan <code>ViewPager</code> , membuat saya memiliki pilihan: gesekan, atau animasi transisi yang indah di antara layar.  Saya tidak ingin menolak yang satu atau yang lain.  Jadi pencarian saya dimulai. </p><br><p>  Jam belajar: puluhan topik di forum dan pertanyaan yang belum terjawab di StackOverflow.  Tidak peduli apa yang saya buka, saya ditawari untuk melakukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">transisi dari <abbr title="Analogue ListView - daftar yang menampilkan beberapa item lain di layar">RecyclerView</abbr> ke ViewPager</a> atau "melampirkan pisang raja <code>Fragment.postponeEnterTransition()</code> ". <br><br></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7l/qu/r_/7lqur_jrf31n12aqmqefruovwbo.png"></div><br><p>  Obat tradisional tidak membantu, dan saya memutuskan untuk mendamaikan <code>ViewPager</code> dan <code>Shared Element Transition</code> sendiri. </p><br><h2 id="viewpager-pervaya-krov">  ViewPager: Darah Pertama </h2><br><p>  Saya mulai berpikir: "Masalahnya muncul pada saat pengguna berpindah dari satu halaman ke halaman lain ...".  Dan kemudian saya sadar: "Anda tidak akan memiliki masalah dengan <em>SET</em> selama perubahan halaman, jika Anda tidak mengubah halaman". </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tu/qa/ss/tuqasspx-ir0-tuk-fo4qk3m9fa.jpeg"></div><br><p>  Kita dapat melakukan <em>transisi</em> pada halaman yang sama, dan kemudian hanya mengganti halaman saat ini dengan halaman target di <code>ViewPager</code> . </p><br><p>  Pertama, buat <abbr title="elemen yang lengkap secara logis yang merangkum presentasi dan logika untuk digunakan lebih lanjut dalam antarmuka. Artikel ini hanya isi layar aplikasi.">fragmen</abbr> yang dengannya kita akan bekerja. </p><br><pre> <code class="java hljs">SmallPictureFragment small_picture_fragment = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SmallPictureFragment(); BigPictureFragment big_picture_fragment = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BigPictureFragment();</code> </pre> <br><p>  Mari kita coba ubah fragmen di halaman saat ini ke yang lain. </p><br><pre> <code class="java hljs">FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction(); <span class="hljs-comment"><span class="hljs-comment">//  View      int fragmentContId = previousFragment.getView().getParent().getId(); //         fragmentTransaction.replace(fragmentContId, nextFragment); fragmentTransaction.commit();</span></span></code> </pre> <br><p>  Kami meluncurkan aplikasi dan ... dengan lancar beralih ke layar kosong.  Apa alasannya </p><br><p>  Ternyata wadah dari setiap halaman adalah <code>ViewPager</code> itu sendiri, tanpa perantara seperti <code>Page1Container</code> , <code>Page2Container</code> .  Oleh karena itu, hanya mengubah satu halaman ke halaman lainnya tidak berfungsi, seluruh halaman akan diganti. </p><br><p>  Nah, untuk mengubah konten setiap halaman secara terpisah, kami membuat beberapa fragmen wadah untuk setiap halaman. </p><br><pre> <code class="java hljs">RootSmallPictureFragment root_small_pic_fragment = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RootSmallPictureFragment(); RootBigPictureFragment root_big_pic_fragment = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RootBigPictureFragment();</code> </pre> <br><p>  Sesuatu tidak akan mulai lagi. </p><br><blockquote>  java.lang.IllegalStateException: Tidak dapat mengubah ID kontainer fragmen BigPictureFragment {...}: tadinya 2131165289 sekarang 2131165290 </blockquote><p>  Kami tidak dapat melampirkan fragmen halaman kedua ( <code>BigPictureFragment</code> ) ke yang pertama, karena sudah terlampir pada wadah halaman kedua. </p><br><p>  Setelah mengepalkan gigi, kami menambahkan lebih banyak fragmen ganda. </p><br><pre> <code class="plaintext hljs">SmallPictureFragment small_picture_fragment_fake = new SmallPictureFragment(); BigPictureFragment big_picture_fragment_fake = new BigPictureFragment();</code> </pre> <br><p>  <strong>Menghasilkan!</strong>  Kode transisi yang pernah saya salin dari bentangan GitHub sudah berisi animasi <em>fade in</em> dan <em>fade out</em> .  Oleh karena itu, sebelum <em>transisi,</em> semua elemen statis dari fragmen pertama menghilang, lalu gambar bergerak, dan baru kemudian elemen-elemen halaman kedua muncul.  Bagi pengguna, ini terlihat seperti perpindahan nyata antar halaman. </p><br><p>  Semua animasi telah berlalu, tetapi ada satu masalah.  Pengguna masih di halaman pertama, tetapi harus di halaman kedua. </p><br><p>  Untuk memperbaikinya, kami dengan hati-hati mengganti halaman <code>ViewPager</code> terlihat <code>ViewPager</code> yang kedua.  Dan kemudian kita mengembalikan konten halaman pertama ke keadaan awal. </p><br><pre> <code class="java hljs"> handler.postDelayed( () -&gt; { <span class="hljs-comment"><span class="hljs-comment">//       activity.viewPager.setCurrentItem(nextPage, false); FragmentTransaction transaction = fragmentManager.beginTransaction(); //   . //       //    Shared Element Transition transaction.replace(fragmentContainer, previousFragment); transaction.commitAllowingStateLoss(); }, //      ,     FADE_DEFAULT_TIME + MOVE_DEFAULT_TIME + FADE_DEFAULT_TIME ); }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Apa hasilnya?</b>  <b class="spoiler_title">(animasi - 2,7 mb)</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/kc/cz/vy/kcczvylf6a4kekytbyrtbyzk7w4.gif"></div></div></div><br><div class="spoiler">  <b class="spoiler_title">Seluruh kode sumber</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/9d51e1c92585b75ec19f156c14562a5f.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-13f839f7454b3a5b3bfbfd6d1e34ec9d.css"><div id="gist96065161" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-fragmenttransitionutil-java" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-java ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-fragmenttransitionutil-java-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-fragmenttransitionutil-java-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">FragmentTransitionUtil</span> {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-fragmenttransitionutil-java-LC2" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-fragmenttransitionutil-java-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">long</span> <span class="pl-c1">FADE_DEFAULT_TIME</span> <span class="pl-k">=</span> <span class="pl-c1">500</span>;</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-fragmenttransitionutil-java-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">long</span> <span class="pl-c1">MOVE_DEFAULT_TIME</span> <span class="pl-k">=</span> <span class="pl-c1">1000</span>;</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-fragmenttransitionutil-java-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-fragmenttransitionutil-java-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">perform</span>(</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-fragmenttransitionutil-java-LC7" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">MainActivity</span> <span class="pl-v">activity</span>,</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-fragmenttransitionutil-java-LC8" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">Fragment</span> <span class="pl-v">previousFragment</span>,</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-fragmenttransitionutil-java-LC9" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">Fragment</span> <span class="pl-v">nextFragment</span>,</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-fragmenttransitionutil-java-LC10" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">Map&lt;<span class="pl-smi">View</span>, <span class="pl-smi">String</span>&gt;</span> <span class="pl-v">sharedElements</span>,</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-fragmenttransitionutil-java-LC11" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">int</span> <span class="pl-v">nextPage</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-fragmenttransitionutil-java-LC12" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-fragmenttransitionutil-java-LC13" class="blob-code blob-code-inner js-file-line">    ) {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-fragmenttransitionutil-java-LC14" class="blob-code blob-code-inner js-file-line">        <span class="pl-smi">FragmentManager</span> fragmentManager <span class="pl-k">=</span> activity<span class="pl-k">.</span>getSupportFragmentManager();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-fragmenttransitionutil-java-LC15" class="blob-code blob-code-inner js-file-line">        <span class="pl-smi">FragmentTransaction</span> fragmentTransaction <span class="pl-k">=</span> fragmentManager<span class="pl-k">.</span>beginTransaction();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-fragmenttransitionutil-java-LC16" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-fragmenttransitionutil-java-LC17" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> (previousFragment <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-fragmenttransitionutil-java-LC18" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-fragmenttransitionutil-java-LC19" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"><span class="pl-c">//</span> 1. Exit for Previous Fragment</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-fragmenttransitionutil-java-LC20" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">Fade</span> exitFade <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Fade</span>();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-fragmenttransitionutil-java-LC21" class="blob-code blob-code-inner js-file-line">            exitFade<span class="pl-k">.</span>setDuration(<span class="pl-c1">FADE_DEFAULT_TIME</span>);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-fragmenttransitionutil-java-LC22" class="blob-code blob-code-inner js-file-line">            previousFragment<span class="pl-k">.</span>setExitTransition(exitFade);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-fragmenttransitionutil-java-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-fragmenttransitionutil-java-LC24" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"><span class="pl-c">//</span> 2. Shared Elements Transition</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-fragmenttransitionutil-java-LC25" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">TransitionSet</span> enterTransitionSet <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">TransitionSet</span>();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-fragmenttransitionutil-java-LC26" class="blob-code blob-code-inner js-file-line">            enterTransitionSet<span class="pl-k">.</span>addTransition(</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-fragmenttransitionutil-java-LC27" class="blob-code blob-code-inner js-file-line">                    <span class="pl-k">new</span> <span class="pl-smi">TransitionSet</span>() {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-fragmenttransitionutil-java-LC28" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-fragmenttransitionutil-java-LC29" class="blob-code blob-code-inner js-file-line">                        {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-fragmenttransitionutil-java-LC30" class="blob-code blob-code-inner js-file-line">                            setOrdering(<span class="pl-c1">ORDERING_TOGETHER</span>);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-fragmenttransitionutil-java-LC31" class="blob-code blob-code-inner js-file-line">                            addTransition(<span class="pl-k">new</span> <span class="pl-smi">ChangeBounds</span>())<span class="pl-c1">.</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-fragmenttransitionutil-java-LC32" class="blob-code blob-code-inner js-file-line">                            addTransition(<span class="pl-k">new</span> <span class="pl-smi">ChangeTransform</span>())<span class="pl-c1">.</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-fragmenttransitionutil-java-LC33" class="blob-code blob-code-inner js-file-line">                            addTransition(<span class="pl-k">new</span> <span class="pl-smi">ChangeImageTransform</span>());</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-fragmenttransitionutil-java-LC34" class="blob-code blob-code-inner js-file-line">                        }</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-fragmenttransitionutil-java-LC35" class="blob-code blob-code-inner js-file-line">                    }</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-fragmenttransitionutil-java-LC36" class="blob-code blob-code-inner js-file-line">            );</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-fragmenttransitionutil-java-LC37" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-fragmenttransitionutil-java-LC38" class="blob-code blob-code-inner js-file-line">            enterTransitionSet<span class="pl-k">.</span>setDuration(<span class="pl-c1">MOVE_DEFAULT_TIME</span>);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="file-fragmenttransitionutil-java-LC39" class="blob-code blob-code-inner js-file-line">            enterTransitionSet<span class="pl-k">.</span>setStartDelay(<span class="pl-c1">FADE_DEFAULT_TIME</span>);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="file-fragmenttransitionutil-java-LC40" class="blob-code blob-code-inner js-file-line">            nextFragment<span class="pl-k">.</span>setSharedElementEnterTransition(enterTransitionSet);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="file-fragmenttransitionutil-java-LC41" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="file-fragmenttransitionutil-java-LC42" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"><span class="pl-c">//</span> 3. Enter Transition for New Fragment</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L43" class="blob-num js-line-number" data-line-number="43"></td>
        <td id="file-fragmenttransitionutil-java-LC43" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">Fade</span> enterFade <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Fade</span>();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L44" class="blob-num js-line-number" data-line-number="44"></td>
        <td id="file-fragmenttransitionutil-java-LC44" class="blob-code blob-code-inner js-file-line">            enterFade<span class="pl-k">.</span>setStartDelay(<span class="pl-c1">MOVE_DEFAULT_TIME</span> <span class="pl-k">+</span> <span class="pl-c1">FADE_DEFAULT_TIME</span>);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L45" class="blob-num js-line-number" data-line-number="45"></td>
        <td id="file-fragmenttransitionutil-java-LC45" class="blob-code blob-code-inner js-file-line">            enterFade<span class="pl-k">.</span>setDuration(<span class="pl-c1">FADE_DEFAULT_TIME</span>);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L46" class="blob-num js-line-number" data-line-number="46"></td>
        <td id="file-fragmenttransitionutil-java-LC46" class="blob-code blob-code-inner js-file-line">            nextFragment<span class="pl-k">.</span>setEnterTransition(enterFade);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L47" class="blob-num js-line-number" data-line-number="47"></td>
        <td id="file-fragmenttransitionutil-java-LC47" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L48" class="blob-num js-line-number" data-line-number="48"></td>
        <td id="file-fragmenttransitionutil-java-LC48" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">if</span> (<span class="pl-smi">Build</span><span class="pl-c1"><span class="pl-k">.</span>VERSION<span class="pl-k">.</span>SDK_INT</span> <span class="pl-k">&gt;=</span> <span class="pl-smi">Build</span><span class="pl-c1"><span class="pl-k">.</span>VERSION_CODES<span class="pl-k">.</span>LOLLIPOP</span>) {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L49" class="blob-num js-line-number" data-line-number="49"></td>
        <td id="file-fragmenttransitionutil-java-LC49" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">if</span> (sharedElements <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L50" class="blob-num js-line-number" data-line-number="50"></td>
        <td id="file-fragmenttransitionutil-java-LC50" class="blob-code blob-code-inner js-file-line">                    <span class="pl-k">for</span> (<span class="pl-smi">Map</span><span class="pl-k">.</span><span class="pl-k">Entry&lt;<span class="pl-smi">View</span>, <span class="pl-smi">String</span>&gt;</span> viewStringEntry <span class="pl-k">:</span> sharedElements<span class="pl-k">.</span>entrySet()) {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L51" class="blob-num js-line-number" data-line-number="51"></td>
        <td id="file-fragmenttransitionutil-java-LC51" class="blob-code blob-code-inner js-file-line">                        <span class="pl-smi">View</span> view <span class="pl-k">=</span> viewStringEntry<span class="pl-k">.</span>getKey();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L52" class="blob-num js-line-number" data-line-number="52"></td>
        <td id="file-fragmenttransitionutil-java-LC52" class="blob-code blob-code-inner js-file-line">                        <span class="pl-smi">String</span> transName <span class="pl-k">=</span> viewStringEntry<span class="pl-k">.</span>getValue();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L53" class="blob-num js-line-number" data-line-number="53"></td>
        <td id="file-fragmenttransitionutil-java-LC53" class="blob-code blob-code-inner js-file-line">                        view<span class="pl-k">.</span>setTransitionName(transName);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L54" class="blob-num js-line-number" data-line-number="54"></td>
        <td id="file-fragmenttransitionutil-java-LC54" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L55" class="blob-num js-line-number" data-line-number="55"></td>
        <td id="file-fragmenttransitionutil-java-LC55" class="blob-code blob-code-inner js-file-line">                        fragmentTransaction<span class="pl-k">.</span>addSharedElement(</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L56" class="blob-num js-line-number" data-line-number="56"></td>
        <td id="file-fragmenttransitionutil-java-LC56" class="blob-code blob-code-inner js-file-line">                                view,</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L57" class="blob-num js-line-number" data-line-number="57"></td>
        <td id="file-fragmenttransitionutil-java-LC57" class="blob-code blob-code-inner js-file-line">                                transName</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L58" class="blob-num js-line-number" data-line-number="58"></td>
        <td id="file-fragmenttransitionutil-java-LC58" class="blob-code blob-code-inner js-file-line">                        );</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L59" class="blob-num js-line-number" data-line-number="59"></td>
        <td id="file-fragmenttransitionutil-java-LC59" class="blob-code blob-code-inner js-file-line">                    }</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L60" class="blob-num js-line-number" data-line-number="60"></td>
        <td id="file-fragmenttransitionutil-java-LC60" class="blob-code blob-code-inner js-file-line">                }</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L61" class="blob-num js-line-number" data-line-number="61"></td>
        <td id="file-fragmenttransitionutil-java-LC61" class="blob-code blob-code-inner js-file-line">            }</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L62" class="blob-num js-line-number" data-line-number="62"></td>
        <td id="file-fragmenttransitionutil-java-LC62" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L63" class="blob-num js-line-number" data-line-number="63"></td>
        <td id="file-fragmenttransitionutil-java-LC63" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">int</span> fragmentContId <span class="pl-k">=</span> ((<span class="pl-smi">ViewGroup</span>) previousFragment<span class="pl-k">.</span>getView()<span class="pl-k">.</span>getParent())<span class="pl-k">.</span>getId();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L64" class="blob-num js-line-number" data-line-number="64"></td>
        <td id="file-fragmenttransitionutil-java-LC64" class="blob-code blob-code-inner js-file-line">            fragmentTransaction<span class="pl-k">.</span>replace(fragmentContId, nextFragment);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L65" class="blob-num js-line-number" data-line-number="65"></td>
        <td id="file-fragmenttransitionutil-java-LC65" class="blob-code blob-code-inner js-file-line">            fragmentTransaction<span class="pl-k">.</span>commit();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L66" class="blob-num js-line-number" data-line-number="66"></td>
        <td id="file-fragmenttransitionutil-java-LC66" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L67" class="blob-num js-line-number" data-line-number="67"></td>
        <td id="file-fragmenttransitionutil-java-LC67" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L68" class="blob-num js-line-number" data-line-number="68"></td>
        <td id="file-fragmenttransitionutil-java-LC68" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">final</span> <span class="pl-smi">Handler</span> handler <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Handler</span>();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L69" class="blob-num js-line-number" data-line-number="69"></td>
        <td id="file-fragmenttransitionutil-java-LC69" class="blob-code blob-code-inner js-file-line">            handler<span class="pl-k">.</span>postDelayed(</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L70" class="blob-num js-line-number" data-line-number="70"></td>
        <td id="file-fragmenttransitionutil-java-LC70" class="blob-code blob-code-inner js-file-line">                    () <span class="pl-k">-</span><span class="pl-k">&gt;</span> {</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L71" class="blob-num js-line-number" data-line-number="71"></td>
        <td id="file-fragmenttransitionutil-java-LC71" class="blob-code blob-code-inner js-file-line">                        <span class="pl-c"><span class="pl-c">//</span> Stealthy changing page visible to user. He won’t notice!</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L72" class="blob-num js-line-number" data-line-number="72"></td>
        <td id="file-fragmenttransitionutil-java-LC72" class="blob-code blob-code-inner js-file-line">                        activity<span class="pl-k">.</span>viewPager<span class="pl-k">.</span>setCurrentItem(nextPage, <span class="pl-c1">false</span>);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L73" class="blob-num js-line-number" data-line-number="73"></td>
        <td id="file-fragmenttransitionutil-java-LC73" class="blob-code blob-code-inner js-file-line">                        <span class="pl-smi">FragmentTransaction</span> transaction <span class="pl-k">=</span> fragmentManager<span class="pl-k">.</span>beginTransaction();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L74" class="blob-num js-line-number" data-line-number="74"></td>
        <td id="file-fragmenttransitionutil-java-LC74" class="blob-code blob-code-inner js-file-line">                        <span class="pl-c"><span class="pl-c">//</span> Restore previous fragment. It contains inappropriate view now</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L75" class="blob-num js-line-number" data-line-number="75"></td>
        <td id="file-fragmenttransitionutil-java-LC75" class="blob-code blob-code-inner js-file-line">                        transaction<span class="pl-k">.</span>replace(fragmentContId, previousFragment);</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L76" class="blob-num js-line-number" data-line-number="76"></td>
        <td id="file-fragmenttransitionutil-java-LC76" class="blob-code blob-code-inner js-file-line">                        transaction<span class="pl-k">.</span>commitAllowingStateLoss();</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L77" class="blob-num js-line-number" data-line-number="77"></td>
        <td id="file-fragmenttransitionutil-java-LC77" class="blob-code blob-code-inner js-file-line">                    },</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L78" class="blob-num js-line-number" data-line-number="78"></td>
        <td id="file-fragmenttransitionutil-java-LC78" class="blob-code blob-code-inner js-file-line">                    <span class="pl-c1">FADE_DEFAULT_TIME</span> <span class="pl-k">+</span> <span class="pl-c1">MOVE_DEFAULT_TIME</span> <span class="pl-k">+</span> <span class="pl-c1">FADE_DEFAULT_TIME</span></td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L79" class="blob-num js-line-number" data-line-number="79"></td>
        <td id="file-fragmenttransitionutil-java-LC79" class="blob-code blob-code-inner js-file-line">            );</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L80" class="blob-num js-line-number" data-line-number="80"></td>
        <td id="file-fragmenttransitionutil-java-LC80" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L81" class="blob-num js-line-number" data-line-number="81"></td>
        <td id="file-fragmenttransitionutil-java-LC81" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L82" class="blob-num js-line-number" data-line-number="82"></td>
        <td id="file-fragmenttransitionutil-java-LC82" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L83" class="blob-num js-line-number" data-line-number="83"></td>
        <td id="file-fragmenttransitionutil-java-LC83" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L84" class="blob-num js-line-number" data-line-number="84"></td>
        <td id="file-fragmenttransitionutil-java-LC84" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-fragmenttransitionutil-java-L85" class="blob-num js-line-number" data-line-number="85"></td>
        <td id="file-fragmenttransitionutil-java-LC85" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">FragmentTransitionUtil.java</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div></div></div><br><p>  Proyek ini dapat dilihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> . </p><br><p>  <strong>Untuk meringkas.</strong>  Kode mulai terlihat jauh lebih solid: daripada 2 fragmen awal, saya mendapat sebanyak 6, instruksi muncul di dalamnya yang mengontrol kinerja, mengganti fragmen pada waktu yang tepat.  Dan ini hanya di demo. </p><br><p>  Dalam proyek yang sama, satu demi satu dalam kode, cadangan mulai muncul di tempat-tempat yang paling tak terduga.  Mereka tidak membiarkan aplikasi berantakan ketika pengguna mengklik tombol dari halaman "salah" atau membatasi kerja latar belakang dari duplikat fragmen. </p><br><p>  Ternyata android tidak memiliki panggilan balik untuk menyelesaikan <em>transisi</em> , dan waktu pelaksanaannya sangat sewenang-wenang dan tergantung pada banyak faktor (misalnya, seberapa cepat <code>RecyclerView</code> memuat dalam fragmen yang dihasilkan).  Hal ini menyebabkan fakta bahwa penggantian fragmen di <code>handler.postDelayed()</code> sering dieksekusi terlalu cepat atau terlambat, yang hanya memperburuk masalah sebelumnya. </p><br><p>  Sorotan terakhir adalah bahwa selama animasi, pengguna cukup menggesek ke halaman lain dan menonton dua layar kembar, setelah itu aplikasi juga menariknya ke layar yang diinginkan. </p><br><div class="spoiler">  <b class="spoiler_title">Artefak yang menarik dari pendekatan ini (animasi - 2,7 mb)</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/lo/p2/3h/lop23hzo-o-cglifsb1aljyey-g.gif"></div></div></div><br><p>  Keadaan ini tidak cocok untukku, dan aku, penuh kemarahan yang saleh, mulai mencari solusi lain. </p><br><h2 id="kak-sdelat-shared-element-transition-v-viewpager-pravilno">  Cara membuat Transisi Elemen Bersama di Viewpager dengan benar </h2><br><h3 id="probuem-pagetransformer">  Mencoba PageTransformer </h3><br><p>  Masih belum ada jawaban di Internet, dan saya berpikir: bagaimana lagi transisi ini dapat dihidupkan.  Sesuatu dalam subkorteks kesadaran berbisik kepada saya: "Gunakan <abbr title="kelas yang memungkinkan individu yang sangat keras kepala untuk mengganti animasi pembalikan halaman default"><code>PageTransformer</code></abbr> , Luke."  Gagasan itu tampak menjanjikan bagi saya dan saya memutuskan untuk mendengarkan. </p><br><p>  Idenya adalah membuat <code>PageTransformer</code> , yang, tidak seperti <em>Android SET</em> , tidak akan membutuhkan pengulangan beberapa <code>setTransitionName(transitionName)</code> dan <code>FragmentTransaction.addSharedElement(sharedElement,name)</code> di kedua sisi transisi.  Ini akan memindahkan elemen setelah babatan dan memiliki antarmuka yang sederhana seperti: </p><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addSharedTransition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fromViewId, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toViewId)</span></span></span></span></code> </pre> <br><p>  Kami melanjutkan ke pengembangan.  Saya akan menyimpan data dari metode <code>addSharedTransition(fromId, toId)</code> ke <code>Set</code> from <code>Pair</code> dan mendapatkannya dalam metode <code>PageTransfomer</code> </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/**     ,   ,     */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transformPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull View page, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span></span></code> </pre> <br><p>  Di dalam, saya akan melihat semua pasangan <code>View</code> tersimpan, di antaranya saya perlu membuat animasi.  Dan saya akan mencoba memfilternya sehingga hanya elemen yang terlihat yang dianimasikan. </p><br><p>  Pertama, mari kita periksa apakah elemen yang perlu dianimasikan telah dibuat.  Kami bukan pemilih, dan jika <code>View</code> tidak dibuat sebelum dimulainya animasi, kami tidak akan memecah seluruh animasi (seperti <em>Transisi Elemen Bersama</em> ), tetapi mengambilnya ketika elemen dibuat. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Pair&lt;Integer,Integer&gt; idPair : sharedElementIds) { Integer fromViewId = idPair.first; Integer toViewId = idPair.second; View fromView = activity.findViewById(fromViewId); View toView = activity.findViewById(toViewId); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fromView != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; toView != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) {</code> </pre> <br><p>  Saya menemukan halaman-halaman di mana gerakan itu terjadi (bagaimana saya menentukan nomor halaman akan dijelaskan di bawah). </p><br><pre> <code class="java hljs">View fromPage = pages.get(fromPageNumber); View toPage = pages.get(toPageNumber);</code> </pre> <br><p>  Jika kedua halaman sudah dibuat, maka saya sedang mencari sepasang <code>View</code> pada mereka, yang perlu saya menghidupkan. </p><br><pre> <code class="java hljs">If (fromPage != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; toPage != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { fromView = fromPage.findViewById(fromViewId); toView = toPage.findViewById(toViewId);</code> </pre> <br><p>  Pada tahap ini, kami memilih View, yang terletak pada halaman di mana pengguna menggulir. </p><br><p>  Saatnya untuk mendapatkan banyak variabel.  Saya menghitung poin referensi: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//         //     float fromX = fromView.getX() - fromView.getTranslationX(); float fromY = fromView.getY() - fromView.getTranslationY(); float toX = toView.getX() - toView.getTranslationX(); float toY = toView.getY() - toView.getTranslationY(); float deltaX = toX - fromX; float deltaY = toY - fromY; //      float fromWidth = fromView.getWidth(); float fromHeight = fromView.getHeight(); float toWidth = toView.getWidth(); float toHeight = toView.getHeight(); float deltaWidth = toWidth - fromWidth; float deltaHeight = toHeight - fromHeight; //       boolean slideToTheRight = toPageNumber &gt; fromPageNumber;</span></span></code> </pre> <br><p>  Dalam cuplikan terakhir, saya mengatur <code>slideToTheRight</code> , dan sudah dalam hal ini akan berguna bagi saya.  Terjemahan masuk tergantung padanya, yang menentukan <code>View</code> akan terbang ke tempatnya atau di suatu tempat di luar layar. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> pageWidth = getScreenWidth(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sign = slideToTheRight ? <span class="hljs-number"><span class="hljs-number">1</span></span> : -<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> translationY = (deltaY + deltaHeight / <span class="hljs-number"><span class="hljs-number">2</span></span>) * sign * (-position); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> translationX = (deltaX + sign * pageWidth + deltaWidth / <span class="hljs-number"><span class="hljs-number">2</span></span>) * sign * (-position);</code> </pre> <br><p>  Menariknya, rumus offset untuk <code>X</code> dan <code>Y</code> untuk kedua <code>View</code> , pada halaman awal dan halaman yang dihasilkan, ternyata sama, meskipun ada beberapa offset awal. </p><br><p>  Tetapi dengan skalanya, sayangnya, trik ini tidak akan berhasil - Anda perlu mempertimbangkan apakah <code>View</code> ini <code>View</code> awal atau akhir dari animasi. </p><br><p>  Ini mungkin mengejutkan bagi seseorang, tetapi <code>transformPage(@NonNull View page, float position)</code> dipanggil berkali-kali: untuk setiap halaman yang di-cache (ukuran cache dapat disesuaikan).  Dan, agar tidak menggambar ulang tampilan animasi beberapa kali, untuk setiap panggilan ke <code>transformPage()</code> , kami hanya mengubah yang ada di <code>page</code> saat ini. </p><br><div class="spoiler">  <b class="spoiler_title">Kami mengatur posisi dan skala elemen animasi</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   View     if (page.findViewById(fromId) != null) { //      fromView.setTranslationX(translationX); fromView.setTranslationY(translationY); / /   float scaleX = (fromWidth == 0) ? 1 : //  View   , //        (fromWidth + deltaWidth * sign * (-position)) / fromWidth; float scaleY = (fromHeight == 0) ? 1 : //  View   , //        (fromHeight + deltaHeight * sign * (-position)) / fromHeight; fromView.setScaleX(scaleX); fromView.setScaleY(scaleY); } //   View     if (page.findViewById(toId) != null) { toView.setTranslationX(translationX); toView.setTranslationY(translationY); float scaleX = (toWidth == 0) ? 1 : (toWidth + deltaWidth * sign * (-position)) / toWidth; float scaleY = (toHeight == 0) ? 1 : (toHeight + deltaHeight * sign * (-position)) / toHeight; toView.setScaleX(scaleX); toView.setScaleY(scaleY); }</span></span></code> </pre> </div></div><br><h3 id="vybiraem-stranicy-dlya-risovaniya-animacii">  Pilih halaman untuk menggambar animasi </h3><br><p>  <code>ViewPager</code> tidak terburu-buru untuk berbagi informasi antara halaman mana yang sedang bergulir.  Seperti yang saya janjikan, sekarang saya akan memberi tahu Anda bagaimana kami mendapatkan informasi ini.  Di <code>PageTransformer</code> kami <code>PageTransformer</code> kami mengimplementasikan antarmuka <code>ViewPager.OnPageChangeListener</code> lain.  Setelah mempelajari output <code>onPageScrolled()</code> melalui <code>System.out.println()</code> saya sampai pada rumus berikut: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrolled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> positionOffset, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> positionOffsetPixels )</span></span></span><span class="hljs-function"> </span></span>{ Set&lt;Integer&gt; visiblePages = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;&gt;(); visiblePages.add(position); visiblePages.add(positionOffset &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> ? position + <span class="hljs-number"><span class="hljs-number">1</span></span> : position - <span class="hljs-number"><span class="hljs-number">1</span></span>); visiblePages.remove(fromPageNumber); toPageNumber = visiblePages.iterator().next(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pages == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || toPageNumber &gt;= pages.size()) toPageNumber = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageSelected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.position = position; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrollStateChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (state == SCROLL_STATE_IDLE) { <span class="hljs-comment"><span class="hljs-comment">//      ,    fromPageNumber = position; resetViewPositions(); } }</span></span></code> </pre> <br><p>  Itu saja.  <strong>Kami berhasil!</strong>  Animasi memonitor gerakan pengguna.  Mengapa memilih antara gesek dan <em>Transisi Elemen Bersama</em> , saat Anda dapat meninggalkan semuanya. </p><br><p>  Saat menulis artikel ini, saya menambahkan efek dari hilangnya elemen statis - itu masih sangat kasar, sehingga belum ditambahkan ke perpustakaan. </p><br><div class="spoiler">  <b class="spoiler_title">Lihat apa yang terjadi pada akhirnya (animasi - 2,4 mb)</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qe/38/ac/qe38acszfutvrpyu2cru-pbwjwq.gif"></div></div></div><br><div class="spoiler">  <b class="spoiler_title">Seluruh kode sumber</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/0bca6b1317e2827c668f0791d73cc7c8.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-13f839f7454b3a5b3bfbfd6d1e34ec9d.css"><div id="gist96067891" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-sharedelementpagetransformer-java" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-java ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-sharedelementpagetransformer-java-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-sharedelementpagetransformer-java-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">/**</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-sharedelementpagetransformer-java-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * PageTransformer that allows you to do shared element transitions between pages in ViewPager.</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-sharedelementpagetransformer-java-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * It requires view pager sides match screen sides to function properly. I.e. ViewPager page width</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-sharedelementpagetransformer-java-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * must be equal to screen width. &lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-sharedelementpagetransformer-java-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> *     Usage:&lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-sharedelementpagetransformer-java-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> *         &lt;<span class="pl-ent">code</span>&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-sharedelementpagetransformer-java-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> *                  sharedElementPageTransformer.addSharedTransition(R.id.FirstPageTextView, R.id.SecondPageTextView)&lt;/code&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-sharedelementpagetransformer-java-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> *         &lt;/code&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-sharedelementpagetransformer-java-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> *</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-sharedelementpagetransformer-java-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> *</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-sharedelementpagetransformer-java-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> <span class="pl-c">*/</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-sharedelementpagetransformer-java-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SharedElementPageTransformer</span> <span class="pl-k">implements</span> <span class="pl-e">ViewPager</span>.<span class="pl-e">PageTransformer</span>, <span class="pl-e">ViewPager</span>.<span class="pl-e">OnPageChangeListener</span> {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-sharedelementpagetransformer-java-LC13" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">/*</span>* Android need the correction while view scaling for some reason<span class="pl-c">*/</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-sharedelementpagetransformer-java-LC14" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">float</span> <span class="pl-c1">MAGICAL_ANDROID_RENDERING_SCALE</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-sharedelementpagetransformer-java-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>    private static float MAGICAL_ANDROID_RENDERING_SCALE = 0.995f;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-sharedelementpagetransformer-java-LC16" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-sharedelementpagetransformer-java-LC17" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">//</span> External variables</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-sharedelementpagetransformer-java-LC18" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-sharedelementpagetransformer-java-LC19" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">Activity</span> activity;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-sharedelementpagetransformer-java-LC20" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">List&lt;<span class="pl-smi">Fragment</span>&gt;</span> fragments;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-sharedelementpagetransformer-java-LC21" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">Set&lt;<span class="pl-k">Pair&lt;<span class="pl-smi">Integer</span>,<span class="pl-smi">Integer</span>&gt;</span>&gt;</span> sharedElementIds <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">HashSet&lt;&gt;</span>();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-sharedelementpagetransformer-java-LC22" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-sharedelementpagetransformer-java-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-sharedelementpagetransformer-java-LC24" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-sharedelementpagetransformer-java-LC25" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">//</span>Internal variables</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-sharedelementpagetransformer-java-LC26" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-sharedelementpagetransformer-java-LC27" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">List&lt;<span class="pl-smi">View</span>&gt;</span> pages;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-sharedelementpagetransformer-java-LC28" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">Map&lt;<span class="pl-smi">View</span>, <span class="pl-smi">Integer</span>&gt;</span> pageToNumber <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">HashMap&lt;&gt;</span>();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-sharedelementpagetransformer-java-LC29" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-sharedelementpagetransformer-java-LC30" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-smi">Integer</span> fromPageNumber <span class="pl-k">=</span> <span class="pl-c1">0</span>;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-sharedelementpagetransformer-java-LC31" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-smi">Integer</span> toPageNumber;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-sharedelementpagetransformer-java-LC32" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-sharedelementpagetransformer-java-LC33" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">/*</span>* current view pager position <span class="pl-c">*/</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-sharedelementpagetransformer-java-LC34" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">int</span> position;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-sharedelementpagetransformer-java-LC35" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-sharedelementpagetransformer-java-LC36" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">/**</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-sharedelementpagetransformer-java-LC37" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * <span class="pl-k">@param</span> activity activity that hosts view pager</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-sharedelementpagetransformer-java-LC38" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * <span class="pl-k">@param</span> fragments fragment that are in view pager in the SAME ORDER</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="file-sharedelementpagetransformer-java-LC39" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     <span class="pl-c">*/</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="file-sharedelementpagetransformer-java-LC40" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-en">SharedElementPageTransformer</span>(<span class="pl-smi">Activity</span> <span class="pl-v">activity</span>, <span class="pl-k">List&lt;<span class="pl-smi">Fragment</span>&gt;</span> <span class="pl-v">fragments</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="file-sharedelementpagetransformer-java-LC41" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">this</span><span class="pl-k">.</span>activity <span class="pl-k">=</span> activity;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="file-sharedelementpagetransformer-java-LC42" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">this</span><span class="pl-k">.</span>fragments <span class="pl-k">=</span> fragments;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L43" class="blob-num js-line-number" data-line-number="43"></td>
        <td id="file-sharedelementpagetransformer-java-LC43" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L44" class="blob-num js-line-number" data-line-number="44"></td>
        <td id="file-sharedelementpagetransformer-java-LC44" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L45" class="blob-num js-line-number" data-line-number="45"></td>
        <td id="file-sharedelementpagetransformer-java-LC45" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L46" class="blob-num js-line-number" data-line-number="46"></td>
        <td id="file-sharedelementpagetransformer-java-LC46" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">@Override</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L47" class="blob-num js-line-number" data-line-number="47"></td>
        <td id="file-sharedelementpagetransformer-java-LC47" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">transformPage</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">View</span> <span class="pl-v">page</span>, <span class="pl-k">float</span> <span class="pl-v">position</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L48" class="blob-num js-line-number" data-line-number="48"></td>
        <td id="file-sharedelementpagetransformer-java-LC48" class="blob-code blob-code-inner js-file-line">        updatePageCache();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L49" class="blob-num js-line-number" data-line-number="49"></td>
        <td id="file-sharedelementpagetransformer-java-LC49" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> (fromPageNumber <span class="pl-k">==</span> <span class="pl-c1">null</span> <span class="pl-k">||</span> toPageNumber <span class="pl-k">==</span> <span class="pl-c1">null</span>) <span class="pl-k">return</span>;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L50" class="blob-num js-line-number" data-line-number="50"></td>
        <td id="file-sharedelementpagetransformer-java-LC50" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L51" class="blob-num js-line-number" data-line-number="51"></td>
        <td id="file-sharedelementpagetransformer-java-LC51" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">for</span> (<span class="pl-k">Pair&lt;<span class="pl-smi">Integer</span>,<span class="pl-smi">Integer</span>&gt;</span> idPair <span class="pl-k">:</span> sharedElementIds) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L52" class="blob-num js-line-number" data-line-number="52"></td>
        <td id="file-sharedelementpagetransformer-java-LC52" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">Integer</span> fromViewId <span class="pl-k">=</span> idPair<span class="pl-k">.</span>first;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L53" class="blob-num js-line-number" data-line-number="53"></td>
        <td id="file-sharedelementpagetransformer-java-LC53" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">Integer</span> toViewId <span class="pl-k">=</span> idPair<span class="pl-k">.</span>second;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L54" class="blob-num js-line-number" data-line-number="54"></td>
        <td id="file-sharedelementpagetransformer-java-LC54" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L55" class="blob-num js-line-number" data-line-number="55"></td>
        <td id="file-sharedelementpagetransformer-java-LC55" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">View</span> fromView <span class="pl-k">=</span> activity<span class="pl-k">.</span>findViewById(fromViewId);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L56" class="blob-num js-line-number" data-line-number="56"></td>
        <td id="file-sharedelementpagetransformer-java-LC56" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">View</span> toView <span class="pl-k">=</span> activity<span class="pl-k">.</span>findViewById(toViewId);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L57" class="blob-num js-line-number" data-line-number="57"></td>
        <td id="file-sharedelementpagetransformer-java-LC57" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L58" class="blob-num js-line-number" data-line-number="58"></td>
        <td id="file-sharedelementpagetransformer-java-LC58" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">if</span> (fromView <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">&amp;&amp;</span> toView <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L59" class="blob-num js-line-number" data-line-number="59"></td>
        <td id="file-sharedelementpagetransformer-java-LC59" class="blob-code blob-code-inner js-file-line">                <span class="pl-c"><span class="pl-c">//</span>Looking if current Shared element transition matches visible pages</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L60" class="blob-num js-line-number" data-line-number="60"></td>
        <td id="file-sharedelementpagetransformer-java-LC60" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L61" class="blob-num js-line-number" data-line-number="61"></td>
        <td id="file-sharedelementpagetransformer-java-LC61" class="blob-code blob-code-inner js-file-line">                <span class="pl-smi">View</span> fromPage <span class="pl-k">=</span> pages<span class="pl-k">.</span>get(fromPageNumber);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L62" class="blob-num js-line-number" data-line-number="62"></td>
        <td id="file-sharedelementpagetransformer-java-LC62" class="blob-code blob-code-inner js-file-line">                <span class="pl-smi">View</span> toPage <span class="pl-k">=</span> pages<span class="pl-k">.</span>get(toPageNumber);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L63" class="blob-num js-line-number" data-line-number="63"></td>
        <td id="file-sharedelementpagetransformer-java-LC63" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L64" class="blob-num js-line-number" data-line-number="64"></td>
        <td id="file-sharedelementpagetransformer-java-LC64" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">if</span> (fromPage <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">&amp;&amp;</span> toPage <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L65" class="blob-num js-line-number" data-line-number="65"></td>
        <td id="file-sharedelementpagetransformer-java-LC65" class="blob-code blob-code-inner js-file-line">                    fromView <span class="pl-k">=</span> fromPage<span class="pl-k">.</span>findViewById(fromViewId);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L66" class="blob-num js-line-number" data-line-number="66"></td>
        <td id="file-sharedelementpagetransformer-java-LC66" class="blob-code blob-code-inner js-file-line">                    toView <span class="pl-k">=</span> toPage<span class="pl-k">.</span>findViewById(toViewId);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L67" class="blob-num js-line-number" data-line-number="67"></td>
        <td id="file-sharedelementpagetransformer-java-LC67" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L68" class="blob-num js-line-number" data-line-number="68"></td>
        <td id="file-sharedelementpagetransformer-java-LC68" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L69" class="blob-num js-line-number" data-line-number="69"></td>
        <td id="file-sharedelementpagetransformer-java-LC69" class="blob-code blob-code-inner js-file-line">                    <span class="pl-c"><span class="pl-c">//</span> if both views are on pages user drag between apply transformation</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L70" class="blob-num js-line-number" data-line-number="70"></td>
        <td id="file-sharedelementpagetransformer-java-LC70" class="blob-code blob-code-inner js-file-line">                    <span class="pl-k">if</span> (</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L71" class="blob-num js-line-number" data-line-number="71"></td>
        <td id="file-sharedelementpagetransformer-java-LC71" class="blob-code blob-code-inner js-file-line">                            fromView <span class="pl-k">!=</span> <span class="pl-c1">null</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L72" class="blob-num js-line-number" data-line-number="72"></td>
        <td id="file-sharedelementpagetransformer-java-LC72" class="blob-code blob-code-inner js-file-line">                                    <span class="pl-k">&amp;&amp;</span> toView <span class="pl-k">!=</span> <span class="pl-c1">null</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L73" class="blob-num js-line-number" data-line-number="73"></td>
        <td id="file-sharedelementpagetransformer-java-LC73" class="blob-code blob-code-inner js-file-line">                    ) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L74" class="blob-num js-line-number" data-line-number="74"></td>
        <td id="file-sharedelementpagetransformer-java-LC74" class="blob-code blob-code-inner js-file-line">                        <span class="pl-c"><span class="pl-c">//</span> saving shared element position on the screen</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L75" class="blob-num js-line-number" data-line-number="75"></td>
        <td id="file-sharedelementpagetransformer-java-LC75" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> fromX <span class="pl-k">=</span> fromView<span class="pl-k">.</span>getX() <span class="pl-k">-</span> fromView<span class="pl-k">.</span>getTranslationX();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L76" class="blob-num js-line-number" data-line-number="76"></td>
        <td id="file-sharedelementpagetransformer-java-LC76" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> fromY <span class="pl-k">=</span> fromView<span class="pl-k">.</span>getY() <span class="pl-k">-</span> fromView<span class="pl-k">.</span>getTranslationY();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L77" class="blob-num js-line-number" data-line-number="77"></td>
        <td id="file-sharedelementpagetransformer-java-LC77" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> toX <span class="pl-k">=</span> toView<span class="pl-k">.</span>getX() <span class="pl-k">-</span> toView<span class="pl-k">.</span>getTranslationX();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L78" class="blob-num js-line-number" data-line-number="78"></td>
        <td id="file-sharedelementpagetransformer-java-LC78" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> toY <span class="pl-k">=</span> toView<span class="pl-k">.</span>getY() <span class="pl-k">-</span> toView<span class="pl-k">.</span>getTranslationY();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L79" class="blob-num js-line-number" data-line-number="79"></td>
        <td id="file-sharedelementpagetransformer-java-LC79" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> deltaX <span class="pl-k">=</span> toX <span class="pl-k">-</span> fromX;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L80" class="blob-num js-line-number" data-line-number="80"></td>
        <td id="file-sharedelementpagetransformer-java-LC80" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> deltaY <span class="pl-k">=</span> toY <span class="pl-k">-</span> fromY;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L81" class="blob-num js-line-number" data-line-number="81"></td>
        <td id="file-sharedelementpagetransformer-java-LC81" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L82" class="blob-num js-line-number" data-line-number="82"></td>
        <td id="file-sharedelementpagetransformer-java-LC82" class="blob-code blob-code-inner js-file-line">                        <span class="pl-c"><span class="pl-c">//</span> scaling</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L83" class="blob-num js-line-number" data-line-number="83"></td>
        <td id="file-sharedelementpagetransformer-java-LC83" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> fromWidth <span class="pl-k">=</span> fromView<span class="pl-k">.</span>getWidth();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L84" class="blob-num js-line-number" data-line-number="84"></td>
        <td id="file-sharedelementpagetransformer-java-LC84" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> fromHeight <span class="pl-k">=</span> fromView<span class="pl-k">.</span>getHeight();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L85" class="blob-num js-line-number" data-line-number="85"></td>
        <td id="file-sharedelementpagetransformer-java-LC85" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> toWidth <span class="pl-k">=</span> toView<span class="pl-k">.</span>getWidth();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L86" class="blob-num js-line-number" data-line-number="86"></td>
        <td id="file-sharedelementpagetransformer-java-LC86" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> toHeight <span class="pl-k">=</span> toView<span class="pl-k">.</span>getHeight();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L87" class="blob-num js-line-number" data-line-number="87"></td>
        <td id="file-sharedelementpagetransformer-java-LC87" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> deltaWidth <span class="pl-k">=</span> toWidth <span class="pl-k">-</span> fromWidth;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L88" class="blob-num js-line-number" data-line-number="88"></td>
        <td id="file-sharedelementpagetransformer-java-LC88" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">float</span> deltaHeight <span class="pl-k">=</span> toHeight <span class="pl-k">-</span> fromHeight;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L89" class="blob-num js-line-number" data-line-number="89"></td>
        <td id="file-sharedelementpagetransformer-java-LC89" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L90" class="blob-num js-line-number" data-line-number="90"></td>
        <td id="file-sharedelementpagetransformer-java-LC90" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L91" class="blob-num js-line-number" data-line-number="91"></td>
        <td id="file-sharedelementpagetransformer-java-LC91" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">int</span> fromId <span class="pl-k">=</span> fromView<span class="pl-k">.</span>getId();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L92" class="blob-num js-line-number" data-line-number="92"></td>
        <td id="file-sharedelementpagetransformer-java-LC92" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">int</span> toId <span class="pl-k">=</span> toView<span class="pl-k">.</span>getId();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L93" class="blob-num js-line-number" data-line-number="93"></td>
        <td id="file-sharedelementpagetransformer-java-LC93" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L94" class="blob-num js-line-number" data-line-number="94"></td>
        <td id="file-sharedelementpagetransformer-java-LC94" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">boolean</span> slideToTheRight <span class="pl-k">=</span> toPageNumber <span class="pl-k">&gt;</span> fromPageNumber;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L95" class="blob-num js-line-number" data-line-number="95"></td>
        <td id="file-sharedelementpagetransformer-java-LC95" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L96" class="blob-num js-line-number" data-line-number="96"></td>
        <td id="file-sharedelementpagetransformer-java-LC96" class="blob-code blob-code-inner js-file-line">                        <span class="pl-k">if</span> (position <span class="pl-k">&lt;=</span> <span class="pl-k">-</span><span class="pl-c1">1</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L97" class="blob-num js-line-number" data-line-number="97"></td>
        <td id="file-sharedelementpagetransformer-java-LC97" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L98" class="blob-num js-line-number" data-line-number="98"></td>
        <td id="file-sharedelementpagetransformer-java-LC98" class="blob-code blob-code-inner js-file-line">                        } <span class="pl-k">else</span> <span class="pl-k">if</span> (position <span class="pl-k">&lt;</span> <span class="pl-c1">1</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L99" class="blob-num js-line-number" data-line-number="99"></td>
        <td id="file-sharedelementpagetransformer-java-LC99" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L100" class="blob-num js-line-number" data-line-number="100"></td>
        <td id="file-sharedelementpagetransformer-java-LC100" class="blob-code blob-code-inner js-file-line">                            <span class="pl-k">float</span> pageWidth <span class="pl-k">=</span> getSceenWidth();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L101" class="blob-num js-line-number" data-line-number="101"></td>
        <td id="file-sharedelementpagetransformer-java-LC101" class="blob-code blob-code-inner js-file-line">                            <span class="pl-k">float</span> sign <span class="pl-k">=</span> slideToTheRight <span class="pl-k">?</span> <span class="pl-c1">1</span> <span class="pl-k">:</span> <span class="pl-k">-</span><span class="pl-c1">1</span>;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L102" class="blob-num js-line-number" data-line-number="102"></td>
        <td id="file-sharedelementpagetransformer-java-LC102" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L103" class="blob-num js-line-number" data-line-number="103"></td>
        <td id="file-sharedelementpagetransformer-java-LC103" class="blob-code blob-code-inner js-file-line">                            <span class="pl-k">float</span> translationY <span class="pl-k">=</span> (deltaY <span class="pl-k">+</span> deltaHeight <span class="pl-k">/</span> <span class="pl-c1">2</span>) <span class="pl-k">*</span> sign <span class="pl-k">*</span> (<span class="pl-k">-</span>position);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L104" class="blob-num js-line-number" data-line-number="104"></td>
        <td id="file-sharedelementpagetransformer-java-LC104" class="blob-code blob-code-inner js-file-line">                            <span class="pl-k">float</span> translationX <span class="pl-k">=</span> (deltaX <span class="pl-k">+</span> sign <span class="pl-k">*</span> pageWidth <span class="pl-k">+</span> deltaWidth <span class="pl-k">/</span> <span class="pl-c1">2</span>) <span class="pl-k">*</span> sign <span class="pl-k">*</span> (<span class="pl-k">-</span>position);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L105" class="blob-num js-line-number" data-line-number="105"></td>
        <td id="file-sharedelementpagetransformer-java-LC105" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L106" class="blob-num js-line-number" data-line-number="106"></td>
        <td id="file-sharedelementpagetransformer-java-LC106" class="blob-code blob-code-inner js-file-line">                            <span class="pl-k">if</span> (page<span class="pl-k">.</span>findViewById(fromId) <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L107" class="blob-num js-line-number" data-line-number="107"></td>
        <td id="file-sharedelementpagetransformer-java-LC107" class="blob-code blob-code-inner js-file-line">                                fromView<span class="pl-k">.</span>setTranslationX(translationX);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L108" class="blob-num js-line-number" data-line-number="108"></td>
        <td id="file-sharedelementpagetransformer-java-LC108" class="blob-code blob-code-inner js-file-line">                                fromView<span class="pl-k">.</span>setTranslationY(translationY);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L109" class="blob-num js-line-number" data-line-number="109"></td>
        <td id="file-sharedelementpagetransformer-java-LC109" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L110" class="blob-num js-line-number" data-line-number="110"></td>
        <td id="file-sharedelementpagetransformer-java-LC110" class="blob-code blob-code-inner js-file-line">                                <span class="pl-k">float</span> scaleX <span class="pl-k">=</span> (fromWidth <span class="pl-k">==</span> <span class="pl-c1">0</span>) <span class="pl-k">?</span> <span class="pl-c1">1</span> <span class="pl-k">:</span> (fromWidth <span class="pl-k">+</span> deltaWidth <span class="pl-k">*</span> sign <span class="pl-k">*</span> (<span class="pl-k">-</span>position)) <span class="pl-k">/</span> fromWidth;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L111" class="blob-num js-line-number" data-line-number="111"></td>
        <td id="file-sharedelementpagetransformer-java-LC111" class="blob-code blob-code-inner js-file-line">                                <span class="pl-k">float</span> scaleY <span class="pl-k">=</span> (fromHeight <span class="pl-k">==</span> <span class="pl-c1">0</span>) <span class="pl-k">?</span> <span class="pl-c1">1</span> <span class="pl-k">:</span> (fromHeight <span class="pl-k">+</span> deltaHeight <span class="pl-k">*</span> sign <span class="pl-k">*</span> (<span class="pl-k">-</span>position)) <span class="pl-k">/</span> fromHeight;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L112" class="blob-num js-line-number" data-line-number="112"></td>
        <td id="file-sharedelementpagetransformer-java-LC112" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L113" class="blob-num js-line-number" data-line-number="113"></td>
        <td id="file-sharedelementpagetransformer-java-LC113" class="blob-code blob-code-inner js-file-line">                                fromView<span class="pl-k">.</span>setScaleX(scaleX);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L114" class="blob-num js-line-number" data-line-number="114"></td>
        <td id="file-sharedelementpagetransformer-java-LC114" class="blob-code blob-code-inner js-file-line">                                fromView<span class="pl-k">.</span>setScaleY(scaleY <span class="pl-k">*</span> <span class="pl-c1">MAGICAL_ANDROID_RENDERING_SCALE</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L115" class="blob-num js-line-number" data-line-number="115"></td>
        <td id="file-sharedelementpagetransformer-java-LC115" class="blob-code blob-code-inner js-file-line">                            }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L116" class="blob-num js-line-number" data-line-number="116"></td>
        <td id="file-sharedelementpagetransformer-java-LC116" class="blob-code blob-code-inner js-file-line">                            <span class="pl-k">if</span> (page<span class="pl-k">.</span>findViewById(toId) <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L117" class="blob-num js-line-number" data-line-number="117"></td>
        <td id="file-sharedelementpagetransformer-java-LC117" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L118" class="blob-num js-line-number" data-line-number="118"></td>
        <td id="file-sharedelementpagetransformer-java-LC118" class="blob-code blob-code-inner js-file-line">                                toView<span class="pl-k">.</span>setTranslationX(translationX);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L119" class="blob-num js-line-number" data-line-number="119"></td>
        <td id="file-sharedelementpagetransformer-java-LC119" class="blob-code blob-code-inner js-file-line">                                toView<span class="pl-k">.</span>setTranslationY(translationY);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L120" class="blob-num js-line-number" data-line-number="120"></td>
        <td id="file-sharedelementpagetransformer-java-LC120" class="blob-code blob-code-inner js-file-line">                                <span class="pl-k">float</span> scaleX <span class="pl-k">=</span> (toWidth <span class="pl-k">==</span> <span class="pl-c1">0</span>) <span class="pl-k">?</span> <span class="pl-c1">1</span> <span class="pl-k">:</span> (toWidth <span class="pl-k">+</span> deltaWidth <span class="pl-k">*</span> sign <span class="pl-k">*</span> (<span class="pl-k">-</span>position)) <span class="pl-k">/</span> toWidth;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L121" class="blob-num js-line-number" data-line-number="121"></td>
        <td id="file-sharedelementpagetransformer-java-LC121" class="blob-code blob-code-inner js-file-line">                                <span class="pl-k">float</span> scaleY <span class="pl-k">=</span> (toHeight <span class="pl-k">==</span> <span class="pl-c1">0</span>) <span class="pl-k">?</span> <span class="pl-c1">1</span> <span class="pl-k">:</span>(toHeight <span class="pl-k">+</span> deltaHeight <span class="pl-k">*</span> sign <span class="pl-k">*</span> (<span class="pl-k">-</span>position)) <span class="pl-k">/</span> toHeight;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L122" class="blob-num js-line-number" data-line-number="122"></td>
        <td id="file-sharedelementpagetransformer-java-LC122" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L123" class="blob-num js-line-number" data-line-number="123"></td>
        <td id="file-sharedelementpagetransformer-java-LC123" class="blob-code blob-code-inner js-file-line">                                toView<span class="pl-k">.</span>setScaleX(scaleX);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L124" class="blob-num js-line-number" data-line-number="124"></td>
        <td id="file-sharedelementpagetransformer-java-LC124" class="blob-code blob-code-inner js-file-line">                                toView<span class="pl-k">.</span>setScaleY(scaleY);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L125" class="blob-num js-line-number" data-line-number="125"></td>
        <td id="file-sharedelementpagetransformer-java-LC125" class="blob-code blob-code-inner js-file-line">                            }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L126" class="blob-num js-line-number" data-line-number="126"></td>
        <td id="file-sharedelementpagetransformer-java-LC126" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L127" class="blob-num js-line-number" data-line-number="127"></td>
        <td id="file-sharedelementpagetransformer-java-LC127" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L128" class="blob-num js-line-number" data-line-number="128"></td>
        <td id="file-sharedelementpagetransformer-java-LC128" class="blob-code blob-code-inner js-file-line">                        } <span class="pl-k">else</span> {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L129" class="blob-num js-line-number" data-line-number="129"></td>
        <td id="file-sharedelementpagetransformer-java-LC129" class="blob-code blob-code-inner js-file-line">                        }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L130" class="blob-num js-line-number" data-line-number="130"></td>
        <td id="file-sharedelementpagetransformer-java-LC130" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L131" class="blob-num js-line-number" data-line-number="131"></td>
        <td id="file-sharedelementpagetransformer-java-LC131" class="blob-code blob-code-inner js-file-line">                    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L132" class="blob-num js-line-number" data-line-number="132"></td>
        <td id="file-sharedelementpagetransformer-java-LC132" class="blob-code blob-code-inner js-file-line">                }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L133" class="blob-num js-line-number" data-line-number="133"></td>
        <td id="file-sharedelementpagetransformer-java-LC133" class="blob-code blob-code-inner js-file-line">            }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L134" class="blob-num js-line-number" data-line-number="134"></td>
        <td id="file-sharedelementpagetransformer-java-LC134" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L135" class="blob-num js-line-number" data-line-number="135"></td>
        <td id="file-sharedelementpagetransformer-java-LC135" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L136" class="blob-num js-line-number" data-line-number="136"></td>
        <td id="file-sharedelementpagetransformer-java-LC136" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L137" class="blob-num js-line-number" data-line-number="137"></td>
        <td id="file-sharedelementpagetransformer-java-LC137" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">float</span> <span class="pl-en">getSceenWidth</span>() {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L138" class="blob-num js-line-number" data-line-number="138"></td>
        <td id="file-sharedelementpagetransformer-java-LC138" class="blob-code blob-code-inner js-file-line">        <span class="pl-smi">Point</span> outSize <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Point</span>();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L139" class="blob-num js-line-number" data-line-number="139"></td>
        <td id="file-sharedelementpagetransformer-java-LC139" class="blob-code blob-code-inner js-file-line">        activity<span class="pl-k">.</span>getWindowManager()<span class="pl-k">.</span>getDefaultDisplay()<span class="pl-k">.</span>getSize(outSize);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L140" class="blob-num js-line-number" data-line-number="140"></td>
        <td id="file-sharedelementpagetransformer-java-LC140" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> outSize<span class="pl-k">.</span>x;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L141" class="blob-num js-line-number" data-line-number="141"></td>
        <td id="file-sharedelementpagetransformer-java-LC141" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L142" class="blob-num js-line-number" data-line-number="142"></td>
        <td id="file-sharedelementpagetransformer-java-LC142" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L143" class="blob-num js-line-number" data-line-number="143"></td>
        <td id="file-sharedelementpagetransformer-java-LC143" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">/**</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L144" class="blob-num js-line-number" data-line-number="144"></td>
        <td id="file-sharedelementpagetransformer-java-LC144" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * Creating page cache array to determine if shared element on</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L145" class="blob-num js-line-number" data-line-number="145"></td>
        <td id="file-sharedelementpagetransformer-java-LC145" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * currently visible page</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L146" class="blob-num js-line-number" data-line-number="146"></td>
        <td id="file-sharedelementpagetransformer-java-LC146" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     <span class="pl-c">*/</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L147" class="blob-num js-line-number" data-line-number="147"></td>
        <td id="file-sharedelementpagetransformer-java-LC147" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">updatePageCache</span>() {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L148" class="blob-num js-line-number" data-line-number="148"></td>
        <td id="file-sharedelementpagetransformer-java-LC148" class="blob-code blob-code-inner js-file-line">        pages <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">ArrayList&lt;&gt;</span>();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L149" class="blob-num js-line-number" data-line-number="149"></td>
        <td id="file-sharedelementpagetransformer-java-LC149" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L150" class="blob-num js-line-number" data-line-number="150"></td>
        <td id="file-sharedelementpagetransformer-java-LC150" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> fragments<span class="pl-k">.</span>size(); i<span class="pl-k">++</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L151" class="blob-num js-line-number" data-line-number="151"></td>
        <td id="file-sharedelementpagetransformer-java-LC151" class="blob-code blob-code-inner js-file-line">            <span class="pl-smi">View</span> pageView <span class="pl-k">=</span> fragments<span class="pl-k">.</span>get(i)<span class="pl-k">.</span>getView();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L152" class="blob-num js-line-number" data-line-number="152"></td>
        <td id="file-sharedelementpagetransformer-java-LC152" class="blob-code blob-code-inner js-file-line">            pages<span class="pl-k">.</span>add(pageView);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L153" class="blob-num js-line-number" data-line-number="153"></td>
        <td id="file-sharedelementpagetransformer-java-LC153" class="blob-code blob-code-inner js-file-line">            pageToNumber<span class="pl-k">.</span>put(pageView, i);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L154" class="blob-num js-line-number" data-line-number="154"></td>
        <td id="file-sharedelementpagetransformer-java-LC154" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L155" class="blob-num js-line-number" data-line-number="155"></td>
        <td id="file-sharedelementpagetransformer-java-LC155" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L156" class="blob-num js-line-number" data-line-number="156"></td>
        <td id="file-sharedelementpagetransformer-java-LC156" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L157" class="blob-num js-line-number" data-line-number="157"></td>
        <td id="file-sharedelementpagetransformer-java-LC157" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L158" class="blob-num js-line-number" data-line-number="158"></td>
        <td id="file-sharedelementpagetransformer-java-LC158" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L159" class="blob-num js-line-number" data-line-number="159"></td>
        <td id="file-sharedelementpagetransformer-java-LC159" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">@Override</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L160" class="blob-num js-line-number" data-line-number="160"></td>
        <td id="file-sharedelementpagetransformer-java-LC160" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onPageScrolled</span>(<span class="pl-k">int</span> <span class="pl-v">position</span>, <span class="pl-k">float</span> <span class="pl-v">positionOffset</span>, <span class="pl-k">int</span> <span class="pl-v">positionOffsetPixels</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L161" class="blob-num js-line-number" data-line-number="161"></td>
        <td id="file-sharedelementpagetransformer-java-LC161" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">Set&lt;<span class="pl-smi">Integer</span>&gt;</span> visiblePages <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">HashSet&lt;&gt;</span>();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L162" class="blob-num js-line-number" data-line-number="162"></td>
        <td id="file-sharedelementpagetransformer-java-LC162" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L163" class="blob-num js-line-number" data-line-number="163"></td>
        <td id="file-sharedelementpagetransformer-java-LC163" class="blob-code blob-code-inner js-file-line">        visiblePages<span class="pl-k">.</span>add(position);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L164" class="blob-num js-line-number" data-line-number="164"></td>
        <td id="file-sharedelementpagetransformer-java-LC164" class="blob-code blob-code-inner js-file-line">        visiblePages<span class="pl-k">.</span>add(positionOffset <span class="pl-k">&gt;=</span> <span class="pl-c1">0</span> <span class="pl-k">?</span> position <span class="pl-k">+</span> <span class="pl-c1">1</span> <span class="pl-k">:</span> position <span class="pl-k">-</span> <span class="pl-c1">1</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L165" class="blob-num js-line-number" data-line-number="165"></td>
        <td id="file-sharedelementpagetransformer-java-LC165" class="blob-code blob-code-inner js-file-line">        visiblePages<span class="pl-k">.</span>remove(fromPageNumber);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L166" class="blob-num js-line-number" data-line-number="166"></td>
        <td id="file-sharedelementpagetransformer-java-LC166" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L167" class="blob-num js-line-number" data-line-number="167"></td>
        <td id="file-sharedelementpagetransformer-java-LC167" class="blob-code blob-code-inner js-file-line">        toPageNumber <span class="pl-k">=</span> visiblePages<span class="pl-k">.</span>iterator()<span class="pl-k">.</span>next();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L168" class="blob-num js-line-number" data-line-number="168"></td>
        <td id="file-sharedelementpagetransformer-java-LC168" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L169" class="blob-num js-line-number" data-line-number="169"></td>
        <td id="file-sharedelementpagetransformer-java-LC169" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> (pages <span class="pl-k">==</span> <span class="pl-c1">null</span> <span class="pl-k">||</span> toPageNumber <span class="pl-k">&gt;=</span> pages<span class="pl-k">.</span>size()) toPageNumber <span class="pl-k">=</span> <span class="pl-c1">null</span>;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L170" class="blob-num js-line-number" data-line-number="170"></td>
        <td id="file-sharedelementpagetransformer-java-LC170" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L171" class="blob-num js-line-number" data-line-number="171"></td>
        <td id="file-sharedelementpagetransformer-java-LC171" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L172" class="blob-num js-line-number" data-line-number="172"></td>
        <td id="file-sharedelementpagetransformer-java-LC172" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L173" class="blob-num js-line-number" data-line-number="173"></td>
        <td id="file-sharedelementpagetransformer-java-LC173" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">@Override</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L174" class="blob-num js-line-number" data-line-number="174"></td>
        <td id="file-sharedelementpagetransformer-java-LC174" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onPageSelected</span>(<span class="pl-k">int</span> <span class="pl-v">position</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L175" class="blob-num js-line-number" data-line-number="175"></td>
        <td id="file-sharedelementpagetransformer-java-LC175" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">this</span><span class="pl-k">.</span>position <span class="pl-k">=</span> position;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L176" class="blob-num js-line-number" data-line-number="176"></td>
        <td id="file-sharedelementpagetransformer-java-LC176" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L177" class="blob-num js-line-number" data-line-number="177"></td>
        <td id="file-sharedelementpagetransformer-java-LC177" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L178" class="blob-num js-line-number" data-line-number="178"></td>
        <td id="file-sharedelementpagetransformer-java-LC178" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">@Override</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L179" class="blob-num js-line-number" data-line-number="179"></td>
        <td id="file-sharedelementpagetransformer-java-LC179" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onPageScrollStateChanged</span>(<span class="pl-k">int</span> <span class="pl-v">state</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L180" class="blob-num js-line-number" data-line-number="180"></td>
        <td id="file-sharedelementpagetransformer-java-LC180" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> (state <span class="pl-k">==</span> <span class="pl-c1">SCROLL_STATE_IDLE</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L181" class="blob-num js-line-number" data-line-number="181"></td>
        <td id="file-sharedelementpagetransformer-java-LC181" class="blob-code blob-code-inner js-file-line">            fromPageNumber <span class="pl-k">=</span> position;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L182" class="blob-num js-line-number" data-line-number="182"></td>
        <td id="file-sharedelementpagetransformer-java-LC182" class="blob-code blob-code-inner js-file-line">            resetViewPositions();</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L183" class="blob-num js-line-number" data-line-number="183"></td>
        <td id="file-sharedelementpagetransformer-java-LC183" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L184" class="blob-num js-line-number" data-line-number="184"></td>
        <td id="file-sharedelementpagetransformer-java-LC184" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L185" class="blob-num js-line-number" data-line-number="185"></td>
        <td id="file-sharedelementpagetransformer-java-LC185" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L186" class="blob-num js-line-number" data-line-number="186"></td>
        <td id="file-sharedelementpagetransformer-java-LC186" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L187" class="blob-num js-line-number" data-line-number="187"></td>
        <td id="file-sharedelementpagetransformer-java-LC187" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">resetViewPositions</span>() {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L188" class="blob-num js-line-number" data-line-number="188"></td>
        <td id="file-sharedelementpagetransformer-java-LC188" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">for</span> (<span class="pl-k">Pair&lt;<span class="pl-smi">Integer</span>, <span class="pl-smi">Integer</span>&gt;</span> idPair <span class="pl-k">:</span> sharedElementIds) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L189" class="blob-num js-line-number" data-line-number="189"></td>
        <td id="file-sharedelementpagetransformer-java-LC189" class="blob-code blob-code-inner js-file-line">                <span class="pl-smi">View</span> sharedElement <span class="pl-k">=</span> activity<span class="pl-k">.</span>findViewById(idPair<span class="pl-k">.</span>first);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L190" class="blob-num js-line-number" data-line-number="190"></td>
        <td id="file-sharedelementpagetransformer-java-LC190" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">if</span>(sharedElement <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L191" class="blob-num js-line-number" data-line-number="191"></td>
        <td id="file-sharedelementpagetransformer-java-LC191" class="blob-code blob-code-inner js-file-line">                    sharedElement<span class="pl-k">.</span>setTranslationX(<span class="pl-c1">0</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L192" class="blob-num js-line-number" data-line-number="192"></td>
        <td id="file-sharedelementpagetransformer-java-LC192" class="blob-code blob-code-inner js-file-line">                    sharedElement<span class="pl-k">.</span>setTranslationY(<span class="pl-c1">0</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L193" class="blob-num js-line-number" data-line-number="193"></td>
        <td id="file-sharedelementpagetransformer-java-LC193" class="blob-code blob-code-inner js-file-line">                    sharedElement<span class="pl-k">.</span>setScaleX(<span class="pl-c1">1</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L194" class="blob-num js-line-number" data-line-number="194"></td>
        <td id="file-sharedelementpagetransformer-java-LC194" class="blob-code blob-code-inner js-file-line">                    sharedElement<span class="pl-k">.</span>setScaleY(<span class="pl-c1">1</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L195" class="blob-num js-line-number" data-line-number="195"></td>
        <td id="file-sharedelementpagetransformer-java-LC195" class="blob-code blob-code-inner js-file-line">                }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L196" class="blob-num js-line-number" data-line-number="196"></td>
        <td id="file-sharedelementpagetransformer-java-LC196" class="blob-code blob-code-inner js-file-line">                sharedElement <span class="pl-k">=</span> activity<span class="pl-k">.</span>findViewById(idPair<span class="pl-k">.</span>second);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L197" class="blob-num js-line-number" data-line-number="197"></td>
        <td id="file-sharedelementpagetransformer-java-LC197" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">if</span>(sharedElement <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L198" class="blob-num js-line-number" data-line-number="198"></td>
        <td id="file-sharedelementpagetransformer-java-LC198" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L199" class="blob-num js-line-number" data-line-number="199"></td>
        <td id="file-sharedelementpagetransformer-java-LC199" class="blob-code blob-code-inner js-file-line">                    sharedElement<span class="pl-k">.</span>setTranslationX(<span class="pl-c1">0</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L200" class="blob-num js-line-number" data-line-number="200"></td>
        <td id="file-sharedelementpagetransformer-java-LC200" class="blob-code blob-code-inner js-file-line">                    sharedElement<span class="pl-k">.</span>setTranslationY(<span class="pl-c1">0</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L201" class="blob-num js-line-number" data-line-number="201"></td>
        <td id="file-sharedelementpagetransformer-java-LC201" class="blob-code blob-code-inner js-file-line">                    sharedElement<span class="pl-k">.</span>setScaleX(<span class="pl-c1">1</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L202" class="blob-num js-line-number" data-line-number="202"></td>
        <td id="file-sharedelementpagetransformer-java-LC202" class="blob-code blob-code-inner js-file-line">                    sharedElement<span class="pl-k">.</span>setScaleY(<span class="pl-c1">1</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L203" class="blob-num js-line-number" data-line-number="203"></td>
        <td id="file-sharedelementpagetransformer-java-LC203" class="blob-code blob-code-inner js-file-line">                }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L204" class="blob-num js-line-number" data-line-number="204"></td>
        <td id="file-sharedelementpagetransformer-java-LC204" class="blob-code blob-code-inner js-file-line">            }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L205" class="blob-num js-line-number" data-line-number="205"></td>
        <td id="file-sharedelementpagetransformer-java-LC205" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L206" class="blob-num js-line-number" data-line-number="206"></td>
        <td id="file-sharedelementpagetransformer-java-LC206" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L207" class="blob-num js-line-number" data-line-number="207"></td>
        <td id="file-sharedelementpagetransformer-java-LC207" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L208" class="blob-num js-line-number" data-line-number="208"></td>
        <td id="file-sharedelementpagetransformer-java-LC208" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">/**</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L209" class="blob-num js-line-number" data-line-number="209"></td>
        <td id="file-sharedelementpagetransformer-java-LC209" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * Set up shared element transition from element with &lt;<span class="pl-ent">code</span>&gt;fromViewId&lt;/code&gt; to</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L210" class="blob-num js-line-number" data-line-number="210"></td>
        <td id="file-sharedelementpagetransformer-java-LC210" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * element with &lt;<span class="pl-ent">code</span>&gt;toViewId&lt;/code&gt;. Note that you can setup each transition</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L211" class="blob-num js-line-number" data-line-number="211"></td>
        <td id="file-sharedelementpagetransformer-java-LC211" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * direction separately. e.g. &lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L212" class="blob-num js-line-number" data-line-number="212"></td>
        <td id="file-sharedelementpagetransformer-java-LC212" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * &lt;<span class="pl-ent">code</span>&gt;addSharedTransition(R.id.FirstPageTextView, R.id.SecondPageTextView)&lt;/code&gt;&lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L213" class="blob-num js-line-number" data-line-number="213"></td>
        <td id="file-sharedelementpagetransformer-java-LC213" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * and&lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L214" class="blob-num js-line-number" data-line-number="214"></td>
        <td id="file-sharedelementpagetransformer-java-LC214" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * &lt;<span class="pl-ent">code</span>&gt;addSharedTransition(R.id.SecondPageTextView, R.id.FirstPageTextView)&lt;/code&gt;&lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L215" class="blob-num js-line-number" data-line-number="215"></td>
        <td id="file-sharedelementpagetransformer-java-LC215" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * are different.</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L216" class="blob-num js-line-number" data-line-number="216"></td>
        <td id="file-sharedelementpagetransformer-java-LC216" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * <span class="pl-k">@param</span> fromViewId</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L217" class="blob-num js-line-number" data-line-number="217"></td>
        <td id="file-sharedelementpagetransformer-java-LC217" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * <span class="pl-k">@param</span> toViewId</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L218" class="blob-num js-line-number" data-line-number="218"></td>
        <td id="file-sharedelementpagetransformer-java-LC218" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     <span class="pl-c">*/</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L219" class="blob-num js-line-number" data-line-number="219"></td>
        <td id="file-sharedelementpagetransformer-java-LC219" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">addSharedTransition</span>(<span class="pl-k">int</span> <span class="pl-v">fromViewId</span>, <span class="pl-k">int</span> <span class="pl-v">toViewId</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L220" class="blob-num js-line-number" data-line-number="220"></td>
        <td id="file-sharedelementpagetransformer-java-LC220" class="blob-code blob-code-inner js-file-line">        addSharedTransition(fromViewId, toViewId, <span class="pl-c1">false</span>);</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L221" class="blob-num js-line-number" data-line-number="221"></td>
        <td id="file-sharedelementpagetransformer-java-LC221" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L222" class="blob-num js-line-number" data-line-number="222"></td>
        <td id="file-sharedelementpagetransformer-java-LC222" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L223" class="blob-num js-line-number" data-line-number="223"></td>
        <td id="file-sharedelementpagetransformer-java-LC223" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">/**</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L224" class="blob-num js-line-number" data-line-number="224"></td>
        <td id="file-sharedelementpagetransformer-java-LC224" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * Set up shared element transition from element with &lt;<span class="pl-ent">code</span>&gt;fromViewId&lt;/code&gt; to</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L225" class="blob-num js-line-number" data-line-number="225"></td>
        <td id="file-sharedelementpagetransformer-java-LC225" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * element with &lt;<span class="pl-ent">code</span>&gt;toViewId&lt;/code&gt;. Note that you can setup each transition</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L226" class="blob-num js-line-number" data-line-number="226"></td>
        <td id="file-sharedelementpagetransformer-java-LC226" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * direction separately. e.g. &lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L227" class="blob-num js-line-number" data-line-number="227"></td>
        <td id="file-sharedelementpagetransformer-java-LC227" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * &lt;<span class="pl-ent">code</span>&gt;addSharedTransition(R.id.FirstPageTextView, R.id.SecondPageTextView)&lt;/code&gt;&lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L228" class="blob-num js-line-number" data-line-number="228"></td>
        <td id="file-sharedelementpagetransformer-java-LC228" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * and&lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L229" class="blob-num js-line-number" data-line-number="229"></td>
        <td id="file-sharedelementpagetransformer-java-LC229" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * &lt;<span class="pl-ent">code</span>&gt;addSharedTransition(R.id.SecondPageTextView, R.id.FirstPageTextView)&lt;/code&gt;&lt;<span class="pl-ent">br</span>/&gt;</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L230" class="blob-num js-line-number" data-line-number="230"></td>
        <td id="file-sharedelementpagetransformer-java-LC230" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * are different.</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L231" class="blob-num js-line-number" data-line-number="231"></td>
        <td id="file-sharedelementpagetransformer-java-LC231" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * <span class="pl-k">@param</span> fromViewId</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L232" class="blob-num js-line-number" data-line-number="232"></td>
        <td id="file-sharedelementpagetransformer-java-LC232" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * <span class="pl-k">@param</span> toViewId</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L233" class="blob-num js-line-number" data-line-number="233"></td>
        <td id="file-sharedelementpagetransformer-java-LC233" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * <span class="pl-k">@param</span> bothDirections to include backward transition from toViewId to fromViewId aswell</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L234" class="blob-num js-line-number" data-line-number="234"></td>
        <td id="file-sharedelementpagetransformer-java-LC234" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     <span class="pl-c">*/</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L235" class="blob-num js-line-number" data-line-number="235"></td>
        <td id="file-sharedelementpagetransformer-java-LC235" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">addSharedTransition</span>(<span class="pl-k">int</span> <span class="pl-v">fromViewId</span>, <span class="pl-k">int</span> <span class="pl-v">toViewId</span>, <span class="pl-k">boolean</span> <span class="pl-v">bothDirections</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L236" class="blob-num js-line-number" data-line-number="236"></td>
        <td id="file-sharedelementpagetransformer-java-LC236" class="blob-code blob-code-inner js-file-line">        sharedElementIds<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-k">Pair&lt;&gt;</span>(fromViewId, toViewId));</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L237" class="blob-num js-line-number" data-line-number="237"></td>
        <td id="file-sharedelementpagetransformer-java-LC237" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span>(bothDirections) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L238" class="blob-num js-line-number" data-line-number="238"></td>
        <td id="file-sharedelementpagetransformer-java-LC238" class="blob-code blob-code-inner js-file-line">            sharedElementIds<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-k">Pair&lt;&gt;</span>(toViewId, fromViewId));</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L239" class="blob-num js-line-number" data-line-number="239"></td>
        <td id="file-sharedelementpagetransformer-java-LC239" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L240" class="blob-num js-line-number" data-line-number="240"></td>
        <td id="file-sharedelementpagetransformer-java-LC240" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L241" class="blob-num js-line-number" data-line-number="241"></td>
        <td id="file-sharedelementpagetransformer-java-LC241" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">/**</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L242" class="blob-num js-line-number" data-line-number="242"></td>
        <td id="file-sharedelementpagetransformer-java-LC242" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * In case there is "ladder" appears between while transition.</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L243" class="blob-num js-line-number" data-line-number="243"></td>
        <td id="file-sharedelementpagetransformer-java-LC243" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * You may try to tune that magical scale to get rid of it.</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L244" class="blob-num js-line-number" data-line-number="244"></td>
        <td id="file-sharedelementpagetransformer-java-LC244" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * <span class="pl-k">@param</span> magicalAndroidRenderingScale float between 0 and infinity. Typically very close to 1.0</span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L245" class="blob-num js-line-number" data-line-number="245"></td>
        <td id="file-sharedelementpagetransformer-java-LC245" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     <span class="pl-c">*/</span></span></td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L246" class="blob-num js-line-number" data-line-number="246"></td>
        <td id="file-sharedelementpagetransformer-java-LC246" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">setMagicalAndroidRenderingScale</span>(<span class="pl-k">float</span> <span class="pl-v">magicalAndroidRenderingScale</span>) {</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L247" class="blob-num js-line-number" data-line-number="247"></td>
        <td id="file-sharedelementpagetransformer-java-LC247" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">MAGICAL_ANDROID_RENDERING_SCALE</span> <span class="pl-k">=</span> magicalAndroidRenderingScale;</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L248" class="blob-num js-line-number" data-line-number="248"></td>
        <td id="file-sharedelementpagetransformer-java-LC248" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-sharedelementpagetransformer-java-L249" class="blob-num js-line-number" data-line-number="249"></td>
        <td id="file-sharedelementpagetransformer-java-LC249" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">SharedElementPageTransformer.java</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div></div></div><br><h3 id="kak-vyglyadit-rabota-s-bibliotekoy">  Seperti apa fungsinya dengan perpustakaan </h3><br><p>  Konfigurasi ini ternyata cukup ringkas. </p><br><div class="spoiler">  <b class="spoiler_title">Pengaturan lengkap untuk contoh kita terlihat seperti ini</b> <div class="spoiler_text"><pre> <code class="java hljs">ArrayList&lt;Fragment&gt; fragments = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); fragments.add(hello_fragment); fragments.add(small_picture_fragment); fragments.add(big_picture_fragment); SharedElementPageTransformer transformer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SharedElementPageTransformer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, fragments); transformer.addSharedTransition(R.id.smallPic_image_cat2, R.id.bigPic_image_cat, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); transformer.addSharedTransition(R.id.smallPic_text_label3, R.id.bigPic_text_label, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); transformer.addSharedTransition(R.id.hello_text, R.id.smallPic_text_label3, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); viewPager.setPageTransformer(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, transformer); viewPager.addOnPageChangeListener(transformer);</code> </pre></div></div><br><p>  <code>onClick</code> , termasuk semua transisi, mungkin terlihat seperti ini: </p><br><pre> <code class="java hljs">smallCatImageView.setOnClickListener( v -&gt; activity.viewPager.setCurrentItem(<span class="hljs-number"><span class="hljs-number">2</span></span>) );</code> </pre> <br><p>  Agar kode tidak hilang, saya meletakkan perpustakaan di repositori <em>JCenter</em> dan di <em>GitHub</em> .  Jadi saya menghubungi dunia opensource.  Anda dapat mencobanya di proyek Anda hanya dengan menambahkan </p><br><pre> <code class="java hljs">dependencies { <span class="hljs-comment"><span class="hljs-comment">//... implementation 'com.github.kirillgerasimov:shared-element-view-pager:0.0.2-alpha' }</span></span></code> </pre> <br><p>  Semua sumber tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> </p><br><h3 id="zaklyuchenie">  Kesimpulan </h3><br><p>  Sekalipun Internet tidak tahu jawabannya, ini tidak berarti tidak.  Cari solusi, coba sampai berhasil.  Mungkin Anda akan menjadi yang pertama untuk mencapai bagian bawah ini dan membaginya dengan komunitas. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id451116/">https://habr.com/ru/post/id451116/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id451104/index.html">Ekstensi browser Intelligent Speaker yang membaca artikel: menambahkan suara dari Microsoft Azure</a></li>
<li><a href="../id451106/index.html">Ekstensi browser Intelligent Speaker yang membacakan teks untuk Anda: menambahkan suara Microsoft (hanya dari AWS Polly)</a></li>
<li><a href="../id451110/index.html">Alarm berbunyi</a></li>
<li><a href="../id451112/index.html">Menulis Jetpack</a></li>
<li><a href="../id451114/index.html">Mikroba asli dan penelitian produk di toko</a></li>
<li><a href="../id451118/index.html">Pengujian bukan untuk pemula</a></li>
<li><a href="../id451120/index.html">Tentang tantangan memindahkan Sel Mati ke platform seluler</a></li>
<li><a href="../id451124/index.html">Pengembangan protein di cloud menggunakan Python dan Transcriptic atau Cara membuat protein apa saja seharga $ 360</a></li>
<li><a href="../id451126/index.html">Kotak Alat untuk Peneliti - Edisi Satu: Organisasi Mandiri dan Visualisasi Data</a></li>
<li><a href="../id451130/index.html">Swift: ARC dan manajemen memori</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>