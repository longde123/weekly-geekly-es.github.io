<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯд▒ЁЯП╜ ЁЯдЮЁЯП┐ ЁЯСМЁЯП╝ рдХреЛрдгреАрдп рдкрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╡рд┐рдиреНрдпрд╛рд╕ред рд╕рд░реНрд╡реЛрддреНрддрдо рдЕрднреНрдпрд╛рд╕ ЁЯЩЗЁЯП╛ ЁЯЫМЁЯП┐ ЁЯСиЁЯП╜тАНЁЯФм</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рд▓рдХреНрд╖реНрдпреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХреИрд╕реЗ рдХрд░реЗрдВ 


 рдЬрдм рдЖрдкрдиреЗ рдХреЛрдгреАрдп CLI рдпрд╛ Nrwl Nx рдЯреВрд▓реНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдХреЛрдгреАрдп рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдмрдирд╛рдпрд╛, рддреЛ рдЖрдкрдХреЗ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдХреЛрдгреАрдп рдкрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╡рд┐рдиреНрдпрд╛рд╕ред рд╕рд░реНрд╡реЛрддреНрддрдо рдЕрднреНрдпрд╛рд╕</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477214/"><h2 id="kak-upravlyat-faylami-konfiguracii-sredy-i-celyami">  рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рд▓рдХреНрд╖реНрдпреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХреИрд╕реЗ рдХрд░реЗрдВ </h2><br><p>  рдЬрдм рдЖрдкрдиреЗ <a href="https://cli.angular.io/">рдХреЛрдгреАрдп CLI</a> рдпрд╛ <a href="https://nx.dev/angular">Nrwl Nx рдЯреВрд▓реНрд╕</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдХреЛрдгреАрдп рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдмрдирд╛рдпрд╛, рддреЛ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╣рдореЗрд╢рд╛ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рд╣реЛрддрд╛ рд╣реИ: </p><br><pre><code class="plaintext hljs">&lt;APP_FOLDER&gt;/src/environments/ тФФтФАтФАenvironment.ts тФФтФАтФАenvironment.prod.ts</code> </pre> <a name="habracut"></a><br><p>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк <strong>environment.prod.ts</strong> рдХрд╛ рдирд╛рдо рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ рднреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ рдХрд┐ <strong>environment.qa.ts</strong> рдпрд╛ <strong>environment.staging.ts</strong> ред </p><br><pre> <code class="plaintext hljs">&lt;APP_FOLDER&gt;/src/environments/ тФФтФАтФАenvironment.ts тФФтФАтФАenvironment.prod.ts тФФтФАтФАenvironment.qa.ts тФФтФАтФАenvironment.staging.ts</code> </pre> <br><p>  <strong>Environment.ts</strong> рдлрд╝рд╛рдЗрд▓ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИред  рд╢реЗрд╖ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <strong>angular.json</strong> рдХреЛ рдЦреЛрд▓рдирд╛ <strong>рд╣реЛрдЧрд╛</strong> рдФрд░ <strong>рдлрд╝рд╛рдЗрд▓</strong> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ <strong>рдмрд┐рд▓реНрдб</strong> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ <strong>рд╕реЗрд╡рд╛</strong> рдФрд░ <strong>e2e</strong> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдмреНрд▓реЙрдХ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"architect"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"build"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"configurations"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"production"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"fileReplacements"</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">"replace"</span></span>:<span class="hljs-string"><span class="hljs-string">"&lt;APP_FOLDER&gt;/src/environments/environment.ts"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"with"</span></span>:<span class="hljs-string"><span class="hljs-string">"&lt;APP_FOLDER&gt;/src/environments/environment.production.ts"</span></span> } ] }, <span class="hljs-attr"><span class="hljs-attr">"staging"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"fileReplacements"</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">"replace"</span></span>:<span class="hljs-string"><span class="hljs-string">"&lt;APP_FOLDER&gt;/src/environments/environment.ts"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"with"</span></span>:<span class="hljs-string"><span class="hljs-string">"&lt;APP_FOLDER&gt;/src/environments/environment.staging.ts"</span></span> } ] } } }, <span class="hljs-attr"><span class="hljs-attr">"serve"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"configurations"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"production"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"browserTarget"</span></span>:<span class="hljs-string"><span class="hljs-string">"app-name:build:production"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"staging"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"browserTarget"</span></span>:<span class="hljs-string"><span class="hljs-string">"app-name:build:staging"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"e2e"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"configurations"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"production"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"browserTarget"</span></span>:<span class="hljs-string"><span class="hljs-string">"app-name:serve:production"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"staging"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"browserTarget"</span></span>:<span class="hljs-string"><span class="hljs-string">"app-name:serve:staging"</span></span> } } } } }</code> </pre> <br><p>  рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рд╕рд╛рде рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдиреЗ рдпрд╛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрдорд╛рдВрдбреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">ng build --configuration=staging ng start --configuration=staging ng e2e --configuration=staging  ng build --prod     ng build --configuration=production</code> </pre> <br><h2 id="sozdayte-interfeys-dlya-environment-faylov">  рдкрд░реНрдпрд╛рд╡рд░рдг рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛рдПрдБ </h2><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// environment-interface.ts export interface EnvironmentInterface { production: boolean; apiUrl: string; } // environment.ts export const environment: EnvironmentInterface = { production: false, apiUrl: 'https://api.url', };</span></span></code> </pre> <br><h2 id="ne-ispolzuyte-environment-fayly-napryamuyu-tolko-cherez-di">  рд╕реАрдзреЗ рдкрд░реНрдпрд╛рд╡рд░рдг рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВ, рдХреЗрд╡рд▓ рдбреАрдЖрдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ </h2><br><p>  рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ рдФрд░ рдкреНрд░рддреНрдпрдХреНрд╖ рдЖрдпрд╛рдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдУрдУрдкреА рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдЙрд▓реНрд▓рдВрдШрди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреА рдХрдХреНрд╖рд╛рдУрдВ рдХреА рдкрд░реАрдХреНрд╖рдг рдХреНрд╖рдорддрд╛ рдХреЛ рдЬрдЯрд┐рд▓ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдРрд╕реА рд╕реЗрд╡рд╛ рдмрдирд╛рдирд╛ рдмреЗрд╣рддрд░ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдкрдХреЗ рдШрдЯрдХреЛрдВ рдФрд░ рдЕрдиреНрдп рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╡рд╛рд▓реА рдРрд╕реА рд╕реЗрд╡рд╛ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдпрд╣рд╛рдВ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ENVIRONMENT = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectionToken&lt;{ [key: string]: any }&gt;(<span class="hljs-string"><span class="hljs-string">'environment'</span></span>); @Injectable({ <span class="hljs-attr"><span class="hljs-attr">providedIn</span></span>: <span class="hljs-string"><span class="hljs-string">'root'</span></span>, }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EnvironmentService</span></span></span><span class="hljs-class"> </span></span>{ private readonly environment: any; <span class="hljs-comment"><span class="hljs-comment">// We need @Optional to be able start app without providing environment file constructor(@Optional() @Inject(ENVIRONMENT) environment: any) { this.environment = environment !== null ? environment : {}; } getValue(key: string, defaultValue?: any): any { return this.environment[key] || defaultValue; } } @NgModule({ imports: [ BrowserModule, HttpClientModule, AppRoutingModule, ], declarations: [ AppComponent, ], // We declare environment as provider to be able to easy test our service providers: [{ provide: ENVIRONMENT, useValue: environment }], bootstrap: [AppComponent], }) export class AppModule { }</span></span></code> </pre> <br><h2 id="otdelyayte-konfiguraciyu-okruzheniya-i-biznes-logiki">  рдЕрдкрдиреЗ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдФрд░ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдХреЛ рдЕрд▓рдЧ рдХрд░реЗрдВ </h2><br><p>  рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдХреЗрд╡рд▓ рдЧреБрдг рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдкрд░реНрдпрд╛рд╡рд░рдг рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП <strong>рдПрдкреАрдпреВрдЖрд░рдПрд▓</strong> ред  рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рдкрд░реНрдпрд╛рд╡рд░рдг рд╡рд┐рдиреНрдпрд╛рд╕ рдореЗрдВ рджреЛ рдЧреБрдг рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> environment = { <span class="hljs-attr"><span class="hljs-attr">production</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">apiUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'https://api.url'</span></span>, };</code> </pre> <br><p>  рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рднреА рдЖрдк <strong>рдбрд┐рдмрдЧреЛрдб</strong> рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдкрддреНрддрд┐ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ <strong>: рд╕рд╣реА</strong> рдореЛрдб <strong>рдбреАрдмрдЧ</strong> рдпрд╛ рдЖрдк рд╕рд░реНрд╡рд░ рдХрд╛ рдирд╛рдо рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди <strong>рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ: 'рдХреНрдпреВрдП'</strong> рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдордд рднреВрд▓реЛ рдХрд┐ рдпрд╣ рдмрд╣реБрдд рдмреБрд░рд╛ рдЕрднреНрдпрд╛рд╕ рд╣реИ рдпрджрд┐ рдЖрдкрдХрд╛ рдХреЛрдб рд╕рд░реНрд╡рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдХрд╣ рд░рд╣рд╛ рд╣реИ рдЬрд┐рд╕ рдкрд░ рд╡рд╣ рдЪрд▓ рд░рд╣рд╛ рд╣реИ ред </p><br><p>  рдХрд┐рд╕реА рднреА рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдпрд╛ рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рди рдХрд░реЗрдВред </p><br><p>  рдЕрдиреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдЬреИрд╕реЗ рдХрд┐ <strong>maxItemsOnPage</strong> рдпрд╛ <strong>GalleryAnimationSpeed</strong> рдХреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реНрдерд╛рди рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди. <strong>service.ts</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЙрдЪрд┐рдд рд╣реИ <strong>,</strong> рдЬреЛ рдХреБрдЫ рд╕рдорд╛рдкрди рдмрд┐рдВрджреБ рд╕реЗ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рд╕рдВрдкрддреНрддрд┐ рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ рдмрд╕ config.json рд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><h4 id="1-asinhronnyy-podhod-ispolzuyte-kogda-konfiguraciya-mozhet-izmenitsya-v-rantayme">  1. рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг (рдЙрдкрдпреЛрдЧ рдЬрдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд░рдирдЯрд╛рдЗрдо рдореЗрдВ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИ) </h4><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// assets/config.json { "galleryAnimationSpeed": 5000 } // configuration.service.ts // ------------------------------------------------------ @Injectable({ providedIn: 'root', }) export class ConfigurationService { private configurationSubject = new ReplaySubject&lt;any&gt;(1); constructor(private httpClient: HttpClient) { this.load(); } // method can be used to refresh configuration load(): void { this.httpClient.get('/assets/config.json') .pipe( catchError(() =&gt; of(null)), filter(Boolean), ) .subscribe((configuration: any) =&gt; this.configurationSubject.next(configuration)); } getValue(key: string, defaultValue?: any): Observable&lt;any&gt; { return this.configurationSubject .pipe( map((configuration: any) =&gt; configuration[key] || defaultValue), ); } } // app.component.ts // ------------------------------------------------------ @Component({ selector: 'app-root', changeDetection: ChangeDetectionStrategy.OnPush, templateUrl: './app.component.html', styleUrls: ['./app.component.scss'] }) export class AppComponent { galleryAnimationSpeed$: Observable&lt;number&gt;; constructor(private configurationService: ConfigurationService) { this.galleryAnimationSpeed$ = this.configurationService.getValue('galleryAnimationSpeed', 3000); interval(10000).subscribe(() =&gt; this.configurationService.load()); } }</span></span></code> </pre> <br><h4 id="2-sinhronnyy-podhod-ispolzuyte-kogda-konfiguraciya-pochti-nikogda-ne-menyaetsya">  2. рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг (рдЙрдкрдпреЛрдЧ рдЬрдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд▓рдЧрднрдЧ рдХрднреА рдирд╣реАрдВ рдмрджрд▓рддрд╛ рд╣реИ) </h4><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// assets/config.json { "galleryAnimationSpeed": 5000 } // configuration.service.ts // ------------------------------------------------------ @Injectable({ providedIn: 'root', }) export class ConfigurationService { private configuration = {}; constructor(private httpClient: HttpClient) { } load(): Observable&lt;void&gt; { return this.httpClient.get('/assets/config.json') .pipe( tap((configuration: any) =&gt; this.configuration = configuration), mapTo(undefined), ); } getValue(key: string, defaultValue?: any): any { return this.configuration[key] || defaultValue; } } // app.module.ts // ------------------------------------------------------ export function initApp(configurationService: ConfigurationService) { return () =&gt; configurationService.load().toPromise(); } @NgModule({ imports: [ BrowserModule, HttpClientModule, AppRoutingModule, ], declarations: [ AppComponent, ], providers: [ { provide: APP_INITIALIZER, useFactory: initApp, multi: true, deps: [ConfigurationService] } ], bootstrap: [AppComponent], }) export class AppModule { } // app.component.ts // ------------------------------------------------------ @Component({ selector: 'app-root', changeDetection: ChangeDetectionStrategy.OnPush, templateUrl: './app.component.html', styleUrls: ['./app.component.scss'] }) export class AppComponent { galleryAnimationSpeed: number; constructor(private configurationService: ConfigurationService) { this.galleryAnimationSpeed = this.configurationService.getValue('galleryAnimationSpeed', 3000); } }</span></span></code> </pre> <br><h2 id="podmenyayte-environment-peremennye-vo-vremya-deploya-ili-v-rantayme">  рддреИрдирд╛рддреА рдпрд╛ рд░рдирдЯрд╛рдЗрдо рдХреЗ рджреМрд░рд╛рди рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЛ рдмрджрд▓реЗрдВ </h2><br><p>  рдХрдИ рдЯреАрдореЛрдВ рдиреЗ рдирд┐рдпрдо рдХрд╛ рдЙрд▓реНрд▓рдВрдШрди рдХрд░рддреЗ рд╣реБрдП "рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдирд┐рд░реНрдорд┐рдд рдмрд┐рд▓реНрдб рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдкреНрд░рддреНрдпреЗрдХ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рдЖрд╡реЗрджрди рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдХреЗ" рдПрдХ рдмрд╛рд░ рдирд┐рд░реНрдорд╛рдг рдХрд░реЗрдВ, рдХрдИ рдХреЛ рддреИрдирд╛рдд рдХрд░реЗрдВ "ред </p><br><p>  рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЕрд╕реЗрдВрдмрд▓реА рди рдмрдирд╛рдПрдВ, рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдХреЗрд╡рд▓ рдПрдХ рдЙрддреНрдкрд╛рджрди рдЕрд╕реЗрдВрдмрд▓реА рдФрд░ рд╡рд┐рдХрд▓реНрдк рдорд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХреЗ рджреМрд░рд╛рди рдпрд╛ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ: </p><br><h4 id="zamenit-znacheniya-pleysholderami-v-environment-faylah-kotorye-budut-zameneny-v-itogovoy-sborke-vo-vremya-deploya">  рдкрд░реНрдпрд╛рд╡рд░рдг рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░реНрд╕ рдХреЗ рд╕рд╛рде рдореВрд▓реНрдпреЛрдВ рдХреЛ рдмрджрд▓реЗрдВ рдЬреЛ рддреИрдирд╛рддреА рдХреЗ рджреМрд░рд╛рди рдЕрдВрддрд┐рдо рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдореЗрдВ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> environment = { <span class="hljs-attr"><span class="hljs-attr">production</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">apiUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'APPLICATION_API_URL'</span></span>, };</code> </pre> <br><p>  рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХреЗ рджреМрд░рд╛рди, рд╕реНрдЯреНрд░рд┐рдВрдЧ <strong>APPLICATION_API_URL</strong> рдХреЛ рдПрдкреАрдЖрдИ рд╕рд░реНрд╡рд░ рдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкрддреЗ рд╕реЗ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><h4 id="ispolzovat-globalnye-peremennye-i-inzhektit-konfig-fayly-s-pomoschyu-docker-volumes">  рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдбреЙрдХ рд╡реЙрд▓реНрдпреВрдо рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░реЗрдВ </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> environment = { <span class="hljs-attr"><span class="hljs-attr">production</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">apiUrl</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.APPLICATION_API_URL, }; <span class="hljs-comment"><span class="hljs-comment">// in index.html before angular app bundles &lt;script src="environment.js"&gt;&lt;/script&gt;</span></span></code> </pre> <br><p>  рд▓реЗрдЦ рдкрд░ рдЖрдкрдХрд╛ рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдореБрдЭреЗ рд░рдЪрдирд╛рддреНрдордХ рдЖрд▓реЛрдЪрдирд╛ рдФрд░ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдкрд░ рдЦреБрд╢реА рд╣реЛрдЧреАред </p><br><hr><br><p>  <a href="https://medium.com/most-wanted-experts">рдордзреНрдпрдо</a> , <a href="https://t.me/most_wanted_experts">рдЯреЗрд▓реАрдЧреНрд░рд╛рдо</a> рдпрд╛ <a href="https://twitter.com/MostWantedXpert">рдЯреНрд╡рд┐рдЯрд░</a> рдкрд░ рднреА рд╣рдорд╛рд░реЗ рд╕рдореБрджрд╛рдп рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi477214/">https://habr.com/ru/post/hi477214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi477202/index.html"># 323 рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП рджрд┐рд▓рдЪрд╕реНрдк рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдкрд╛рдЪрди (18 рдирд╡рдВрдмрд░ рдХреЛ - 24)</a></li>
<li><a href="../hi477204/index.html">рдорд╛рд░реНрдХреЗрдЯрд┐рдВрдЧ рдореЗрдВ AI рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рджрд┐рдорд╛рдЧ рдореЗрдВ рдЖрдиреЗ рджреЗрдВ</a></li>
<li><a href="../hi477206/index.html">рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди рдорд╛рдВрдЧ, рд╕реАрд╕реА рдкрд░ рд▓реЛрдб, рдЙрддреНрдкрд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╢реЛрдВ рдФрд░ рд╡рд┐рд╕рдВрдЧрддрд┐рдпреЛрдВ рдХреЛ рдЦреЛрдЬрдиреЗ рдореЗрдВ рд╕рдордп рд╢реНрд░реГрдВрдЦрд▓рд╛</a></li>
<li><a href="../hi477208/index.html">рдЗрдВрдЯреЗрд▓ OpenVINO рд╣реИрдХрдереЙрди, рдкреБрд░рд╕реНрдХрд╛рд░ рдкреВрд▓ рдореЗрдВ рдЖрдордВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ - 180 000 рд░реВрдмрд▓</a></li>
<li><a href="../hi477210/index.html">рдореЗрд░рд╛ рд░реЛрдирд╛ рдпрд╛рд░реЛрд╕реНрд▓рд╛рд╡рдирд╛</a></li>
<li><a href="../hi477222/index.html">рд╕реВрддреНрд░ рдФрд░ рдЖрд▓рд╕реА рд╕рдВрдпреЛрдЬрдХ</a></li>
<li><a href="../hi477224/index.html">"рд╢реЛрд░ рдорд╛рд░рддрд╛ рд╣реИ": рдзреНрд╡рдирд┐ рдкреНрд░рджреВрд╖рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЖрдкрдХреЛ рдХреНрдпрд╛ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рд┐рдП</a></li>
<li><a href="../hi477226/index.html">рдЖрд╕рд╛рди рдФрд░ рд╕рд╣реА рдХреЗ рдмреАрдЪ рдХрд╛ рдЪреБрдирд╛рд╡</a></li>
<li><a href="../hi477228/index.html">Vue 3 рддреЗрдЬ рд╣реЛ рдЬрд╛рдПрдЧрд╛</a></li>
<li><a href="../hi477230/index.html">рд╢реИрдХреНрд╖рд┐рдХ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕: рдЫрд╛рддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓рд╛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдХрдВрдкреНрдпреВрдЯрд░, рд╢реИрдХреНрд╖рд┐рдХ рдЦреЗрд▓ рдФрд░ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>