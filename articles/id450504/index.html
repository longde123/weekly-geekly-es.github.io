<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧔🏿 🍂 🤸🏽 Cara membuat aplikasi dari situs dan menaruhnya di Google Play dalam beberapa jam. Bagian 1/2: Aplikasi Web Progresif ✒️ 🅾️ 👩🏿‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mungkin semua orang yang dekat dengan pengembangan web telah mendengar tentang Aplikasi Web Progresif. Aku berharap kamu bisa! Teknologi ini secara vi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara membuat aplikasi dari situs dan menaruhnya di Google Play dalam beberapa jam. Bagian 1/2: Aplikasi Web Progresif</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/450504/"><img src="https://habrastorage.org/webt/qp/6r/fv/qp6rfvsvw7jfgzexsn2tqlcsxfm.png"><br><br>  Mungkin semua orang yang dekat dengan pengembangan web telah mendengar tentang Aplikasi Web Progresif.  Aku berharap kamu bisa!  Teknologi ini secara virtual menyeimbangkan pengembangan web dan seluler dalam hal distribusi produk dan keterlibatan pengguna. <br><br>  Ya, antarmuka modern yang ditulis, misalnya, dalam Bereaksi, berfungsi sebagai aplikasi.  Tetapi aplikasi ini hanya diunduh ke browser dan diluncurkan darinya.  Ini adalah hambatan besar yang selalu dimiliki pengembangan ponsel.  Mari kita berpikir, daripada dari sudut pandang pengguna biasa, "aplikasi" berbeda dari "situs".  Segera terlintas dalam pikiran bahwa aplikasi itu ada di telepon, dan situs itu ada di komputer.  Tapi ada browser seluler, jadi situsnya ada di ponsel juga.  Lalu ada 3 perbedaan signifikan: <br><a name="habracut"></a><br><ol><li>  Ikon aplikasi ada di layar utama smartphone. <br></li><li>  Aplikasi terbuka di jendela terpisah. <br></li><li>  Aplikasi mengirimkan pemberitahuan push. <br></li></ol><br>  Semua 3 poin dihapus berkat Aplikasi Web Progresif atau PWA.  Sekarang, pergi ke situs dari browser seluler, kita bisa "mengunduhnya", setelah itu kita akan melihat ikon di layar utama.  Selain itu, saat memulai, layar splash muncul, seperti pada aplikasi seluler, dan jika diinginkan, Anda dapat mengonfigurasi pengiriman pemberitahuan push. <br><br>  Dan sepertinya semuanya baik-baik saja!  Namun sayang, selama lebih dari 10 tahun era ponsel, pengguna terlalu terbiasa mencari aplikasi di Google Play dan App Store.  Melanggar kebiasaan pengguna adalah tugas tanpa pamrih, dan karena itu orang-orang dari Google (ngomong-ngomong, Google adalah pengembang PWA) memutuskan bahwa jika gunung tidak pergi ke Magomed, maka ... Secara umum, baru-baru ini, pada 6 Februari 2019, mereka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menyediakan penggunaan Aktivitas Web Tepercaya</a> untuk Perhitungan aplikasi web di Google Play. <br><br>  Artikel dua bagian akan menunjukkan kepada Anda cara mendapatkan jalur lengkap dari situs web biasa ke aplikasi di Google Play hanya dalam hitungan jam.  Semua ini akan ditampilkan pada contoh layanan nyata - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Skorochtets</a> . <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><u>Cara membuat aplikasi dari situs dan menaruhnya di Google Play dalam beberapa jam.</u></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><u>Bagian 1/2: Aplikasi Web Progresif</u></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><u>Cara membuat aplikasi dari situs dan menaruhnya di Google Play dalam beberapa jam.</u></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><u>Bagian 2/2: Aktivitas Web Tepercaya</u></a> </li></ol><br><br><h1>  Mercusuar </h1><br>  Di pintu masuk, kami memiliki situs web dengan tata letak seluler: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/330/2db/7bf/3302db7bf5f02c8dd48ebeb089ebbe7b.jpg" width="400"></div><br>  Langkah pertama adalah memasang ekstensi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mercusuar</a> di Google Chrome di komputer kantor Anda.  Ini adalah alat untuk menganalisis situs secara umum dan untuk memeriksa kepatuhan dengan standar Aplikasi Web Progresif pada khususnya. <br><br>  Selanjutnya, buka situs web kami, yang merupakan pertempuran atau diluncurkan secara lokal, dan buat laporan untuk itu menggunakan Mercusuar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/308/930/eaf/308930eaf740ff668775f027adeeb319.png" width="400"></div><br>  Di bagian Aplikasi Web Progresif dalam laporan, Anda akan melihat sesuatu seperti berikut: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/49e/88f/e73/49e88fe7310fb29ea8eaeea2e0560445.png"><br><br>  Lihatlah bagian Installable.  Pertama, jika Anda menjalankan situs secara lokal, dan Anda harus melakukannya selama pengembangan dan pengujian, Anda perlu menggunakan domain host lokal dan tidak ada yang lain.  Ini akan memenuhi persyaratan "Gunakan HTTPS", atau lebih tepatnya, Mercusuar hanya akan menutup mata untuk itu dan Anda akan dapat sepenuhnya menguji PWA Anda. <br><br>  Selain persyaratan HTTPS agar aplikasi kita berubah menjadi PWA dan dapat diinstal, Anda harus menghubungkan pekerja layanan dan manifes aplikasi Web ke situs.  Ayo lakukan. <br><br><h1>  Pekerja layanan </h1><br>  Teknologi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pekerja layanan</a> memungkinkan situs Anda untuk online bahkan ketika server sedang down.  Ini adalah perantara antara klien dan server yang memotong setiap permintaan dan, dalam hal ini, membuka data dari cache sebagai jawaban. <br><br>  Agar PWA berfungsi, implementasi pekerja layanan dasar sudah cukup, yang terlihat seperti ini: <br><br>  service-worker.js <br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   true  production var doCache = true; //   var CACHE_NAME = 'my-pwa-cache-v2'; //    self.addEventListener('activate', event =&gt; { const cacheWhitelist = [CACHE_NAME]; event.waitUntil( caches.keys() .then(keyList =&gt; Promise.all(keyList.map(key =&gt; { if (!cacheWhitelist.includes(key)) { console.log('Deleting cache: ' + key) return caches.delete(key); } })) ) ); }); // 'install' ,      PWA self.addEventListener('install', function(event) { if (doCache) { event.waitUntil( caches.open(CACHE_NAME) .then(function(cache) { //     ( ) fetch('/static/reader/manifest.json') .then(response =&gt; { response.json() }) .then(assets =&gt; { //        const urlsToCache = [ '/app/', ........ '/static/core/logo.svg*', ] cache.addAll(urlsToCache) console.log('cached'); }) }) ); } }); //   , -         ,    self.addEventListener('fetch', function(event) { if (doCache) { event.respondWith( caches.match(event.request).then(function(response) { return response || fetch(event.request); }) ); } });</span></span></code> </pre> <br>  Penangan untuk tiga acara diimplementasikan di sini: <code>install</code> , <code>activate</code> , dan <code>fetch</code> .  Segera setelah pengguna membuka situs di mana ada pekerja layanan, acara pemasangan dimunculkan.  Ini adalah prosedur untuk memasang pekerja layanan di browser pengguna.  Dalam penangannya di array <code>urlsToCache</code> Anda dapat menentukan halaman situs yang akan di-cache, termasuk statika.  Kemudian <code>activate</code> disebut, yang membersihkan sumber daya yang digunakan dalam versi sebelumnya dari skrip pekerja layanan.  Dan sekarang pekerja layanan telah berhasil diinstal, itu akan mencegat setiap peristiwa <code>fetch</code> dan mencari sumber daya yang diminta dalam cache sebelum pergi ke server untuk mereka. <br><br>  Agar semua ini berfungsi, Anda perlu menambahkan skrip untuk mendaftarkan pekerja layanan dalam file html.  Karena Skorochtets adalah aplikasi satu halaman (SPA), ia memiliki satu html tunggal, yang setelah menambahkan skrip yang ditentukan terlihat seperti ini: <br><br>  index.html <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"root"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/build/app.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'serviceWorker'</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">in</span></span></span><span class="javascript"> navigator) { </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'load'</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ navigator.serviceWorker.register(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'/service-worker.js'</span></span></span><span class="javascript">).then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">registration</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">// Registration was successful console.log('ServiceWorker registration successful with scope: ', registration.scope); }, function(err) { // registration failed :( console.log('ServiceWorker registration failed: ', err); }).catch(function(err) { console.log(err) }); }); } else { console.log('service worker is not supported'); } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Fungsi <code>navigator.serviceWorker.register('/service-worker.js')</code> mengambil sebagai argumen URL tempat file pekerja layanan tersebut berada.  Tidak masalah apa nama file itu, tetapi penting bahwa itu terletak di root domain.  Kemudian seluruh domain akan menjadi ruang lingkup pekerja layanan dan akan menerima <code>fetch</code> acara dari halaman mana pun. <br><br>  Dengan demikian, setelah menemukan file pekerja layanan di <a href="">skorochtec.ru/service-worker.js</a> dan menambahkan skrip yang diperlukan dalam html, kita mendapatkan gambar berikut dalam laporan Mercusuar: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ae/e54/f5a/7aee54f5afb99e56c536300a272a94a0.png"><br><br>  Jika kita bandingkan dengan laporan sebelumnya, sekarang kita sudah puas dengan poin kedua dan situs merespons 200 bahkan offline, dan juga dalam paragraf 5 kita melihat bahwa seorang pekerja layanan telah terdeteksi, tetapi halaman awal hilang.  Informasi tentang halaman awal dan tidak hanya ditunjukkan di Web App Manifest, mari kita tambahkan! <br><br><h1>  Manifes aplikasi web </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Manifes</a> memberikan informasi tentang aplikasi kita: nama pendek dan panjang, ikon semua ukuran, halaman mulai, warna, dan orientasi. <br><br>  manifes. json <br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"icons"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>:<span class="hljs-string"><span class="hljs-string">"/static/core/manifest/logo-pwa-16.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"16x16"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>:<span class="hljs-string"><span class="hljs-string">"/static/core/manifest/logo-pwa-32.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"32x32"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>:<span class="hljs-string"><span class="hljs-string">"/static/core/manifest/logo-pwa-48.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"48x48"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>:<span class="hljs-string"><span class="hljs-string">"/static/core/manifest/logo-pwa-72.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"72x72"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>:<span class="hljs-string"><span class="hljs-string">"/static/core/manifest/logo-pwa-96.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"96x96"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>:<span class="hljs-string"><span class="hljs-string">"/static/core/manifest/logo-pwa-144.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"144x144"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>:<span class="hljs-string"><span class="hljs-string">"/static/core/manifest/logo-pwa-192.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"192x192"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>:<span class="hljs-string"><span class="hljs-string">"/static/core/manifest/logo-pwa-512.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"512x512"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"start_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"/app/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background_color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#7ACCE5"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"theme_color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#7ACCE5"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"orientation"</span></span>: <span class="hljs-string"><span class="hljs-string">"any"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"display"</span></span>: <span class="hljs-string"><span class="hljs-string">"standalone"</span></span> }</code> </pre> <br>  Variabel terakhir menunjukkan bahwa itu akan menjadi aplikasi yang terpisah.  File manifes harus berada di situs (tidak harus di root) dan memasukkannya ke dalam html: <br><br>  index.html <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Add manifest --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{% static "</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">core</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">manifest</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">manifest.json</span></span></span><span class="hljs-tag">" %}"&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Tell the browser it's a PWA --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"root"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/build/app.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'serviceWorker'</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">in</span></span></span><span class="javascript"> navigator) { </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'load'</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ navigator.serviceWorker.register(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'/service-worker.js'</span></span></span><span class="javascript">).then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">registration</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">// Registration was successful console.log('ServiceWorker registration successful with scope: ', registration.scope); }, function(err) { // registration failed :( console.log('ServiceWorker registration failed: ', err); }).catch(function(err) { console.log(err) }); }); } else { console.log('service worker is not supported'); } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Mari kita menganalisis situs web Lighthouse lagi: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0f6/81f/411/0f681f41101fb338efbd166904462b69.png"><br><br>  Hore!  Sekarang kami tidak hanya memiliki situs web, tetapi Aplikasi Web Progresif!  Anda mungkin telah memperhatikan bahwa kecepatan pengunduhan telah meningkat secara dramatis.  Ini tidak ada hubungannya dengan apa yang kami lakukan, saya hanya mengganti perakitan pengembangan aplikasi Bereaksi dengan produksi, sehingga laporan akan terlihat seindah mungkin. <br><br>  Baiklah, kita pergi ke situs dari mobile Chrome dan apa yang kita lihat? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b35/65a/ac9/b3565aac9825d0080986720cdc9d9231.jpg" width="400"></div><br>  Ya!  Anda bisa membuka sampanye!  Tambahkan aplikasi ke layar utama: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ba2/97b/e53/ba297be532bbf6881e561aad65ae95d3.jpg" width="400"></div><br><br>  Sebagai bonus, kami mendapatkan screen saver startup yang dirangkai dari ikon nama, background_color dan 512x512 dalam array ikon yang ditentukan dalam manifes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e62/684/7e6/e626847e6ed596232f86c46738659178.jpg" width="400"></div><br>  Sayangnya, warna teks dipilih secara otomatis, yang dalam kasus Skorotchetsa sedikit merusak gaya. <br><br>  Nah, aplikasi itu sendiri: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bd6/105/230/bd61052307b6b7a6492174c74f67d4fa.jpg" width="400"></div><br><h1>  Keterbatasan </h1><br>  PWA saat ini hanya didukung di Chrome dan Safari (dimulai dengan iOS versi 11.3).  Apalagi, Safari mendukung teknologi ini "dengan tenang."  Pengguna dapat menambahkan aplikasi ke layar utama, tetapi hanya tidak ada pesan tentang ini, tidak seperti Chrome. <br><br><h1>  Kiat dan trik yang bermanfaat </h1><br><h3>  1. Proposal untuk instalasi di Safari </h3><br>  Karena Apple tidak melakukan ini (kami berharap kami belum melakukannya), kami harus mengimplementasikannya "dengan tangan".  Ternyata seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e37/997/fff/e37997fffe093504de191c6ccff7bcb9.jpg" width="400"></div><br>  Diimplementasikan oleh kode JavaScript berikut: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isIos = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> userAgent = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.navigator.userAgent.toLowerCase(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-regexp"><span class="hljs-regexp">/iphone|ipad|ipod/</span></span>.test( userAgent ); }; <span class="hljs-comment"><span class="hljs-comment">// ,        const isInStandaloneMode = () =&gt; ('standalone' in window.navigator) &amp;&amp; (window.navigator.standalone); //     iOS   ,    if (isIos() &amp;&amp; !isInStandaloneMode()) { this.setState({ isShown: true }); //   React }</span></span></code> </pre> <br><h3>  2. Pelacakan instalasi </h3><br>  Ini hanya berfungsi di Google Chrome.  Anda perlu menambahkan skrip ke html yang menangkap acara yang diinstal dan, misalnya, mengirim pesan tentang ini ke server Anda: <br><br><pre> <code class="javascript hljs">&lt;script&gt; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'appinstalled'</span></span>, (evt) =&gt; { fetch(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">your_url</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">, { method: 'GET', credentials: 'include', }); }); </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><h3>  3. Pilihan start_url yang benar </h3><br>  Pastikan untuk menjaga bahwa url dari semua halaman aplikasi adalah kelanjutan dari <code>start_url</code> ditentukan dalam manifes.  Karena jika Anda menentukan <code>"start_url": "/app/"</code> dan kemudian pengguna pergi ke halaman, katakan, "/ books /", maka bilah alamat browser akan segera menampilkan dirinya dan semua pengalaman pengguna akan rusak.  Selain itu, seseorang akan merasa dicurangi: dia berpikir bahwa dia menggunakan aplikasi, dan ini adalah browser yang disamarkan.  Dan bahkan <code>theme_color</code> dari manifes, yang akan mewarnai antarmuka browser dalam warna perusahaan Anda, tidak akan disimpan. <br><br>  Dalam kasus Skorotchetsa, semua halaman yang terkait dengan aplikasi dimulai dengan / app /, jadi tidak ada insiden seperti itu. <br><br><h1>  Apa selanjutnya </h1><br>  Nah, sekarang Anda tahu cara menjangkau pengguna di layar utama smartphone melalui situs Anda.  Tapi ini hanya salah satu pintu, dan kemungkinan besar bukan pintu depan.  Bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kedua</a> akan memberi tahu Anda cara masuk melalui pintu depan: Anda akan belajar cara meletakkan aplikasi web progresif di Google Play. <br><br><h1>  Tautan yang bermanfaat </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengantar Aplikasi Web Progresif (Offline Pertama) - Bagian 1</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengantar Aplikasi Web Progresif (Pemuatan Instan) - Bagian 2</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengantar Aplikasi Web Progresif (Pemberitahuan Push) - Bagian 3</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mengembangkan Aplikasi Web Progresif pertama Anda dengan React</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">9 rahasia PWA yang menakjubkan</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi Web Progresif di iOS ada di sini</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi Web Progresif dengan React.js: Bagian I - Pendahuluan</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi Web Progresif dengan React.js: Bagian 2 - Kinerja Pemuatan Halaman</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi Web Progresif dengan React.js: Bagian 3 - Dukungan offline dan ketahanan jaringan</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi Web Progresif dengan React.js: Bagian 4 - Peningkatan Progresif</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Studi Kasus Performa Aplikasi Web Proaktif Dan Preaktif: Treebo</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id450504/">https://habr.com/ru/post/id450504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id450490/index.html">Kesepakatan $ 6,9 miliar: mengapa pengembang GPU membeli produsen peralatan jaringan</a></li>
<li><a href="../id450492/index.html">Pekerjaan sosial dan desain terbuka. Pendahuluan</a></li>
<li><a href="../id450494/index.html">Bagaimana terjemahan dari istilah trunk bergantung pada vendor switch?</a></li>
<li><a href="../id450498/index.html">Bagaimana cara memeras waktu?</a></li>
<li><a href="../id450500/index.html">Pengembangan Komputer Self-Driving Penuh</a></li>
<li><a href="../id450506/index.html">Cara membuat aplikasi dari situs dan menaruhnya di Google Play dalam beberapa jam. Bagian 2/2: Aktivitas Web Tepercaya</a></li>
<li><a href="../id450508/index.html">Joe Armstrong tentang Elixir, Erlang, FP dan OOP</a></li>
<li><a href="../id450510/index.html">Lima masalah dalam operasi dan proses dukungan dari sistem TI Highload</a></li>
<li><a href="../id450514/index.html">CVT vs negara</a></li>
<li><a href="../id450516/index.html">Tanda Tangan MacOS Berkualitas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>