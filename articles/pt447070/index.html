<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚ÄçüöÄ üìÅ üë©‚Äçüë©‚Äçüëß‚Äçüëß AERODISK ENGINE N2 Testes de colis√£o com armazenamento, Teste de for√ßa üë®üèæ‚Äçüî¨ üç∑ ü§£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! Com este artigo, o AERODISK abre um blog sobre Habr√©. Viva, camaradas! 


 Em artigos anteriores sobre o Habr, foram consideradas quest√µe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AERODISK ENGINE N2 Testes de colis√£o com armazenamento, Teste de for√ßa</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/aerodisk/blog/447070/"><p><img src="https://habrastorage.org/webt/vw/lz/ss/vwlzssiugbxwzzvjzgil6jm6nhu.jpeg"></p><br><p>  Ol√° pessoal!  Com este artigo, o AERODISK abre um blog sobre Habr√©.  Viva, camaradas! </p><br><p>  Em artigos anteriores sobre o Habr, foram consideradas quest√µes sobre a arquitetura e a configura√ß√£o b√°sica dos sistemas de armazenamento.  Neste artigo, consideraremos uma pergunta que n√£o foi abordada anteriormente, mas que frequentemente foi perguntada sobre a toler√¢ncia a falhas dos sistemas de armazenamento do AERODISK ENGINE.  Nossa equipe far√° tudo para que o sistema de armazenamento AERODISK pare de funcionar, ou seja,  quebrando ela. </p><a name="habracut"></a><br><p>  Acontece que artigos sobre a hist√≥ria da nossa empresa, sobre nossos produtos, bem como um exemplo de implementa√ß√£o bem-sucedida, j√° est√£o presentes na Habr√©, pelos quais <u>muitos agradecem aos nossos parceiros - empresas TS Solution e Softline.</u> </p><br><p>  Portanto, n√£o treinarei habilidades de gerenciamento de copiar e colar aqui, mas simplesmente fornecer links para os originais destes artigos: </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Artigo n¬∫ 1.</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Sobre a hist√≥ria da empresa e a arquitetura do sistema de armazenamento AERODISK ENGINE</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Artigo No. 2.</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Sobre como configurar rapidamente o armazenamento do AERODISK ENGINE</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Artigo No. 3</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Um projeto interessante sobre a implementa√ß√£o de videovigil√¢ncia de grande porte na Copa do Mundo de 2018, no √¢mbito do projeto Cidade Segura</strong></a> </li></ul><br><p>  Eu tamb√©m quero compartilhar as boas not√≠cias.  Mas vou come√ßar, √© claro, com o problema.  N√≥s, como jovens fornecedores, entre outros custos, enfrentamos o tempo todo o fato de que muitos engenheiros e administradores s√£o brega, n√£o sabem como operar adequadamente nossos sistemas de armazenamento. <br>  √â claro que o gerenciamento da maioria dos sistemas de armazenamento parece aproximadamente o mesmo do ponto de vista do administrador, mas cada fabricante tem suas pr√≥prias caracter√≠sticas.  E n√£o somos exce√ß√£o. </p><br><p>  Portanto, para simplificar a tarefa de treinar profissionais de TI, decidimos dedicar este ano √† educa√ß√£o gratuita.  Para fazer isso, em muitas grandes cidades da R√∫ssia, estamos abrindo uma rede de Centros de Compet√™ncia AERODISK nos quais qualquer especialista t√©cnico interessado poder√° fazer um curso totalmente gratuito e receber um certificado de administra√ß√£o de armazenamento do AERODISK ENGINE. </p><br><p>  Em cada Competence Center, instalaremos um suporte de demonstra√ß√£o completo do sistema de armazenamento AERODISK e um servidor f√≠sico no qual nosso professor realizar√° o treinamento em per√≠odo integral.  Publicaremos a programa√ß√£o dos Centros de Compet√™ncia assim que aparecerem, mas agora abrimos um centro em Nizhny Novgorod e a cidade de Krasnodar √© a pr√≥xima da fila.  Voc√™ pode se inscrever para o treinamento usando os links abaixo.  Trago as informa√ß√µes atualmente conhecidas sobre cidades e datas: </p><br><ul><li>  <strong>Nizhny Novgorod</strong> (J√Å TRABALHA - voc√™ pode se registrar aqui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://aerodisk.promo/nn/</a> ); <br>  At√© 16 de abril de 2019, voc√™ pode visitar o centro a qualquer momento e, em 16 de abril de 2019, ser√° organizado um grande curso de treinamento. </li><li>  <strong>Krasnodar</strong> (EM BREVE - inscreva-se aqui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://aerodisk.promo/krsnd/</a> ); <br>  De 9 a 25 de abril de 2019, voc√™ pode visitar o centro a qualquer momento e, em 25 de abril de 2019, ser√° organizado um grande curso de treinamento. </li><li>  <strong>Ecaterimburgo</strong> (EM BREVE ABERTURA, siga as informa√ß√µes em nosso site ou em Habr√©); <br>  Maio a junho de 2019. </li><li>  <strong>Novosibirsk</strong> (siga as informa√ß√µes em nosso site ou em Habr√©); <br>  Outubro 2019 </li><li>  <strong>Krasnoyarsk</strong> (siga as informa√ß√µes em nosso site ou em Habr√©); <br>  Novembro 2019 </li></ul><br><p>  E, √© claro, se Moscou n√£o est√° longe de voc√™, a qualquer momento voc√™ pode visitar nosso escrit√≥rio em Moscou e receber treinamento semelhante. </p><br><p>  S√≥ isso.  Amarrado ao marketing, v√° para a t√©cnica! </p><br><p>  Na Habr√©, publicaremos regularmente artigos t√©cnicos sobre nossos produtos, testes de estresse, compara√ß√µes, recursos de uso e implementa√ß√µes interessantes. </p><br><h2>  AERODISK ENGINE N2 Testes de colis√£o com armazenamento, Teste de for√ßa </h2><br><p>  <b>ACHTUNG!</b>  <em>Depois de ler o artigo, voc√™ pode dizer: bem, √© claro, o fornecedor verificar√° a si pr√≥prio para que tudo funcione "estrondosamente", condi√ß√µes de efeito estufa, etc.</em>  <em>Eu vou responder: nada disso!</em>  <em>Ao contr√°rio de nossos concorrentes estrangeiros, estamos aqui, perto de voc√™, e voc√™ sempre pode vir at√© n√≥s (em Moscou ou em qualquer Comit√™ Central) e testar nosso sistema de armazenamento de qualquer maneira.</em>  <em>Portanto, n√£o fazemos muito sentido ajustar os resultados √† imagem ideal do mundo, porque</em>  <em>somos muito f√°ceis de verificar.</em>  <em>Para <s>quem tem pregui√ßa de andar</s> e n√£o tem tempo, podemos organizar testes remotos.</em>  <em>Temos um laborat√≥rio especial para isso.</em>  <em>Contato.</em> </p><br><p>  <strong>ACHTUNG-2!</strong>  <em>Este teste n√£o √© um teste de carga porque</em>  <em>aqui estamos preocupados apenas com a toler√¢ncia a falhas.</em>  <em>Dentro de algumas semanas, prepararemos uma posi√ß√£o mais poderosa e realizaremos testes de carga dos sistemas de armazenamento, publicando os resultados aqui (a prop√≥sito, os desejos de testes s√£o aceitos).</em> </p><br><p>  Ent√£o, vamos quebrar. </p><br><h3>  Suporte de teste </h3><br><p>  Nosso suporte consiste no seguinte ferro: </p><br><ul><li>  1 x armazenamento Aerodisk Engine N2 (2 controladores, cache de 64 GB, portas 8xFC 8Gb / s, 4x portas Ethernet 10Gb / s SFP +, 4x portas Ethernet 1Gb / s);  Os seguintes discos est√£o instalados no sistema de armazenamento: </li><li>  4 x disco SSD SAS de 900 GB; </li><li>  12 x SAS 10k drives 1,2 TB; </li><li>  1 x servidor f√≠sico com Windows Server 2016 (2xXeon E5 2667 v3, 96GB RAM, portas 2xFC 8Gb / s, 2x portas Ethernet 10Gb / s SFP +); </li><li>  2 x switch SAN 8G; </li><li>  2 x switch LAN 10G; </li></ul><br><p>  Conectamos o servidor ao armazenamento via comutadores via FC e Ethernet 10G.  Esquema do estande abaixo. </p><br><img src="https://habrastorage.org/webt/vd/b7/lb/vdb7lbehpksnfqj0ssv46rwfcta.png" alt="imagem"><br><p>  Os componentes necess√°rios, como o iniciador MPIO e iSCSI, est√£o instalados no Windows Server. <br>  As zonas s√£o configuradas nos comutadores FC, as VLANs correspondentes s√£o configuradas nos comutadores LAN e o MTU 9000 √© instalado nas portas, comutadores e host de armazenamento (como fazer tudo isso √© descrito em nossa documenta√ß√£o, portanto, n√£o descreveremos esse processo aqui). </p><br><h3>  Metodologia de teste </h3><br><p>  O plano de teste de colis√£o √© o seguinte: </p><br><ul><li>  FC e verifica√ß√£o de falha na porta Ethernet. </li><li>  Verifica√ß√£o de falha de energia. </li><li>  Verificando falha do controlador. </li><li>  Verifique a falha do disco em um grupo / pool. </li></ul><br><p>  Todos os testes ser√£o realizados em condi√ß√µes de carga sint√©tica, que ser√£o gerados com o IOMETER.  Paralelamente, executaremos os mesmos testes, mas em condi√ß√µes de copiar arquivos grandes para o sistema de armazenamento. </p><br><p>  A configura√ß√£o do IOmeter √© a seguinte: </p><br><ul><li>  Leitura / Grava√ß√£o - 70/30 </li><li>  Bloco - 128k (decidimos molhar o sistema de armazenamento com blocos grandes) </li><li>  O n√∫mero de encadeamentos √© 128 (que √© muito semelhante √† carga de trabalho) </li><li>  Aleat√≥rio completo </li><li>  N√∫mero de trabalhadores - 4 (2 para FC, 2 para iSCSI) </li></ul><br><img src="https://habrastorage.org/webt/th/p7/94/thp7947ybxy0k63hkq4_b-o7bnc.png"><br><img src="https://habrastorage.org/webt/jz/pm/wl/jzpmwldtif_cvydlavihoj2muby.png"><br><br>  <b>O teste tem as seguintes tarefas:</b> <br><ol><li>  Certifique-se de que a carga sint√©tica e o processo de c√≥pia n√£o sejam interrompidos e n√£o causem erros em v√°rios modos de falha. </li><li>  Certifique-se de que o processo de alternar portas, controladores etc. seja suficientemente automatizado e n√£o exija a√ß√µes do administrador em caso de falhas (ou seja, com failover, √© claro, n√£o se fala em failback). </li><li>  Verifique se as informa√ß√µes s√£o exibidas corretamente nos logs. </li></ol><br><h3>  Prepara√ß√£o de host e armazenamento </h3><br><p>  Configuramos o acesso ao bloco no armazenamento usando as portas FC e Ethernet (FC e iSCSI, respectivamente).  Como fazer isso, os caras da TS Solution descreveram em detalhes em um artigo anterior ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://habr.com/en/company/tssolution/blog/432876/</a> ).  Bem e, √© claro, ningu√©m cancelou manuais e cursos. </p><br><p>  Montamos um grupo h√≠brido usando todas as unidades que temos.  2 discos SSD s√£o adicionados ao cache, 2 discos SSD s√£o adicionados como um n√≠vel de armazenamento adicional (camada Online).  Agrupamos 12 discos SAS10k em RAID-60P (paridade tripla) para verificar a falha de tr√™s discos em um grupo ao mesmo tempo.  Um disco foi deixado para a AutoCorre√ß√£o. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/zq/9i/yp/zq9iyp63dnbgws4d6tljrqdauao.png"></a> </p><br><p>  Conectamos dois LUNs (um no FC, um no iSCSI). </p><br><img src="https://habrastorage.org/webt/au/ep/3o/auep3oxzc5aye2vvimnopowk0mk.png"><br><p>  Ambos os LUNs pertencem ao controlador Engine-0. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/zb/bc/up/zbbcupqx0qx2khjxkftflnpxb14.png"></a> </p><br><h3>  Iniciar o teste </h3><br><p>  Ligue o IOMETER com a configura√ß√£o acima. </p><br><img src="https://habrastorage.org/webt/sv/tq/zm/svtqzmxa23agepb4llmphniye2y.png"><br><p>  Corrigimos a largura de banda de 1,8 GB / se um atraso de 3 milissegundos.  N√£o h√° erros (contagem total de erros). </p><br><p>  Ao mesmo tempo, a partir da unidade local "C" do nosso host, simultaneamente come√ßamos a copiar dois grandes arquivos de 100 GB para o armazenamento FC e iSCSI LUN (unidades E e G no Windows), usando outras interfaces. </p><br><p>  Acima est√° o processo de c√≥pia para o LUN FC, abaixo est√° o iSCSI. </p><br><img src="https://habrastorage.org/webt/uy/en/hs/uyenhsu8kfolew7ys9zdxytixds.png"><br><br><h3>  Teste n¬∫ 1. Desativando portas de E / S </h3><br><p>  N√≥s nos aproximamos da parte traseira do sistema de armazenamento))) e, com um movimento do pulso, retiramos todos os cabos FC e Ethernet 10G do controlador Engine-0.  Como se uma faxineira com uma esfregona passasse e decidisse lavar o ch√£o exatamente onde <del>  ranho mentiroso </del>  cabos estavam mentindo (ou seja, o controlador continua funcionando, mas as portas de E / S est√£o mortas). </p><br><img src="https://habrastorage.org/webt/sw/ok/56/swok56qvdezrj1c13dmwibj2miu.jpeg"><br><p>  Observamos o IOMETER e a c√≥pia de arquivos.  A largura de banda caiu para 0,5 GB / s, mas retornou rapidamente ao n√≠vel anterior (em cerca de 4-5 segundos).  N√£o h√° erros. </p><br><img src="https://habrastorage.org/webt/es/7f/ng/es7fngm-y2jgf2alxdzbmqcmg8y.png"><br><p>  A c√≥pia dos arquivos n√£o foi interrompida, h√° uma diminui√ß√£o na velocidade, mas √© completamente acr√≠tica (de 840 MB / s caiu para 720 MB / s).  A c√≥pia n√£o parou. </p><br><p>  Examinamos os logs do sistema de armazenamento e vemos uma mensagem sobre a indisponibilidade de portas e a movimenta√ß√£o autom√°tica do grupo. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/i0/z7/pv/i0z7pvkfpnjjzs3itnkertzq58c.png"></a> </p><br><p>  Al√©m disso, o painel nos diz que nem tudo √© muito bom com as portas FC. </p><br><img src="https://habrastorage.org/webt/rs/h_/ev/rsh_evhm1pt0nzbwtoyselmpcv4.png"><br><p>  As portas de E / S de armazenamento falharam com <strong>sucesso.</strong> </p><br><h3 id="test--2-otklyuchenie-kontrollera-shd">  Teste n√∫mero 2. Desativando o controlador de armazenamento </h3><br><p>  Quase imediatamente (depois de conectar os cabos novamente ao sistema de armazenamento), decidimos terminar o armazenamento puxando o controlador para fora do chassi. </p><br><p>  Novamente, abordamos o sistema de armazenamento por tr√°s (gostamos))) e desta vez retiramos o controlador Engine-1, que neste momento √© o propriet√°rio do RDG (para o qual o grupo mudou). </p><br><p>  A situa√ß√£o no IOmeter √© a seguinte.  A sa√≠da de entrada parou por cerca de 5 segundos.  Erros n√£o se acumulam. </p><br><img src="https://habrastorage.org/webt/bz/ve/gr/bzvegryvez7_ba9vegtf3f9fdbc.png"><br><p>  Ap√≥s 5 segundos, a E / S foi retomada, com aproximadamente as mesmas taxas de taxa de transfer√™ncia, mas com atrasos de 35 milissegundos (os atrasos foram corrigidos ap√≥s alguns minutos).  Como pode ser visto nas capturas de tela, o valor da contagem total de erros √© 0, ou seja, n√£o houve erros de grava√ß√£o ou leitura. </p><br><img src="https://habrastorage.org/webt/kr/-_/ym/kr-_ymrz1ri4ihrlvzq-ggdzuqw.png"><br><p>  N√≥s olhamos para copiar nossos arquivos.  Como voc√™ pode ver, ele n√£o interrompeu, houve uma pequena queda no desempenho, mas, em geral, tudo voltou aos mesmos ~ 800 MB / s. </p><br><img src="https://habrastorage.org/webt/aw/3v/-2/aw3v-2qgghdkeurdw69fb1gzpas.png"><br><p>  N√≥s vamos ao sistema de armazenamento e vemos abusos no painel de informa√ß√µes que o controlador Engine-1 n√£o est√° dispon√≠vel (√© claro, n√≥s batemos nele). </p><br><img src="https://habrastorage.org/webt/8a/-a/th/8a-athpryrmgg972g0us7zpcrbc.png"><br><p>  Tamb√©m vemos uma entrada semelhante nos logs. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/20/3c/j_/203cj_pltjuab6nqituqfooel8s.png"></a> </p><br><p>  A falha do controlador de armazenamento tamb√©m sobreviveu com <strong>sucesso.</strong> </p><br><h3 id="test--3-otklyuchenie-bloka-pitaniya">  Teste n√∫mero 3. Desconectando a fonte de alimenta√ß√£o. </h3><br><p>  Por precau√ß√£o, come√ßamos a copiar os arquivos novamente, mas o IOMETER n√£o parou. <br>  N√≥s puxamos a BP-Schnick. </p><br><img src="https://habrastorage.org/webt/vm/ze/_o/vmze_okexjlv5n-voldjt0mik-s.jpeg"><br><p>  Outro alerta foi adicionado ao armazenamento no painel de informa√ß√µes. </p><br><img src="https://habrastorage.org/webt/8o/ym/lr/8oymlratdbsngvztm2z52cv3v4g.png"><br><p>  Tamb√©m vemos no menu sensores que os sensores associados √† fonte de alimenta√ß√£o removida ficam vermelhos. </p><br><img src="https://habrastorage.org/webt/m_/rr/zw/m_rrzwbyfqjd3-eeo9mgawbm8kq.png"><br><p>  SHD continua a trabalhar.  A falha do BP-Schnick n√£o afeta a opera√ß√£o do sistema de armazenamento de forma alguma, do ponto de vista do host, a velocidade da c√≥pia e os indicadores IOMETER permaneceram inalterados. </p><br><p>  Teste de falha de energia conclu√≠do com <strong>sucesso.</strong> </p><br><p>  Antes do teste final, decidimos trazer um pouco de vida √† SHD, colocar o controlador e o BP-shnik novamente e tamb√©m colocar as coisas em ordem com os cabos, que a SHD nos informou com √≠cones verdes em seu painel de sa√∫de. </p><br><img src="https://habrastorage.org/webt/zp/gm/fp/zpgmfpl2_rwhn6iowq5sriglb2a.png"><br><br><h3 id="test--4-otkaz-tryoh-diskov-v-gruppe">  N√∫mero do teste 4. Falha em tr√™s discos no grupo </h3><br><p>  Antes deste teste, realizamos uma etapa preparat√≥ria adicional.  O fato √© que o armazenamento ENGINE fornece uma coisa muito √∫til - diferentes pol√≠ticas de reconstru√ß√£o (reconstru√ß√£o).  Anteriormente, a TS Solution escrevia sobre esse recurso, mas lembra sua ess√™ncia.  O administrador de armazenamento pode especificar a prioridade da aloca√ß√£o de recursos durante a reconstru√ß√£o.  Ou na dire√ß√£o do desempenho de E / S, ou seja, uma reconstru√ß√£o mais longa, mas n√£o h√° redu√ß√£o no desempenho.  Ou na dire√ß√£o da velocidade de reconstru√ß√£o, mas o desempenho ser√° reduzido.  Ou uma op√ß√£o equilibrada.  Como o desempenho do armazenamento durante a reconstru√ß√£o de um grupo de discos √© sempre uma dor de cabe√ßa para o administrador, testaremos a pol√≠tica com um vi√©s na dire√ß√£o do desempenho de E / S e em detrimento da velocidade da reconstru√ß√£o. </p><br><img src="https://habrastorage.org/webt/8k/zn/kw/8kznkwmg0cwy_2bde0jafjknsbw.png"><br><p>  <strong>Agora verifique a falha das unidades.</strong>  Tamb√©m habilitamos a grava√ß√£o em LUNs (arquivos e IOMETER).  Como temos um grupo de paridade tripla (RAID-60P), isso significa que o sistema deve suportar a falha de tr√™s discos e, ap√≥s a falha, ele deve funcionar com substitui√ß√£o autom√°tica, um disco deve ficar no RDG no lugar de um dos com falha e a reconstru√ß√£o deve come√ßar nele. </p><br><p>  N√≥s come√ßamos.  Primeiro, atrav√©s da interface de armazenamento, destaque os discos que queremos extrair (para n√£o perder e n√£o puxar o disco de substitui√ß√£o autom√°tica). </p><br><p> <a href=""><img src="https://habrastorage.org/webt/65/uw/jm/65uwjm8dhk9hw2znrqwwendgrse.png"></a> </p><br><p>  Verifique a indica√ß√£o no ferro.  Tudo est√° bem, vemos as tr√™s unidades destacadas. </p><br><img src="https://habrastorage.org/webt/da/-h/tc/da-htc08d-p2gjbx6ewbq_itfay.jpeg"><br><p>  E retire esses tr√™s discos. </p><br><img src="https://habrastorage.org/webt/om/l0/vn/oml0vntroubzlzesyecekjzdxy4.jpeg"><br><p>  N√≥s olhamos para o anfitri√£o.  E a√≠ ... nada de especial aconteceu. </p><br><img src="https://habrastorage.org/webt/6n/yt/dt/6nytdttcprx0vdzzy4pac6aq87g.png"><br><img src="https://habrastorage.org/webt/9n/_8/nv/9n_8nvme4niskzv2ej2snvvjs0o.png"><br><p>  Os indicadores de c√≥pia (eles s√£o mais altos do que no in√≠cio, porque o cache foi aquecido) e o IOMETER n√£o mudam muito ao puxar discos e iniciar a reconstru√ß√£o (dentro de 5 a 10%). </p><br><p>  N√≥s olhamos para o armazenamento. </p><br><img src="https://habrastorage.org/webt/my/px/e3/mypxe3hllsk-w3kp_pimqivdbnu.png"><br><p>  No status do grupo, vemos que o processo de reconstru√ß√£o come√ßou e est√° pr√≥ximo da conclus√£o. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/jr/on/o5/jrono5wwt7mxpxmznkrmhqugzim.png"></a> </p><br><p>  O esqueleto RDG mostra que 2 discos est√£o no status vermelho e um j√° foi substitu√≠do.  O disco de AutoCorre√ß√£o n√£o est√° mais l√°, substituiu o terceiro disco com falha.  O Rebild foi executado por v√°rios minutos, a grava√ß√£o do arquivo n√£o foi interrompida quando tr√™s discos falharam, o desempenho de E / S n√£o mudou muito. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/_u/gj/-i/_ugj-izftgd1ka7nuyd4bph8miw.png"></a> </p><br><img src="https://habrastorage.org/webt/xw/2i/af/xw2iafiq60i63kvrd6aecyxzg0i.png"><br><p>  O teste de falha da unidade foi definitivamente <strong>bem-sucedido.</strong> </p><br><h3 id="zaklyuchenie">  Conclus√£o </h3><br><p>  Por isso, decidimos parar o abuso de sistemas de armazenamento.  Para resumir: </p><br><ul><li>  Verifica√ß√£o de falha de porta FC - bem-sucedida </li><li>  Verifica√ß√£o de falha na porta Ethernet - bem-sucedida </li><li>  Verifica√ß√£o de falha do controlador - bem-sucedida </li><li>  Verifica√ß√£o de falha de energia - bem-sucedida </li><li>  Verifique a falha do disco no grupo \ pool - com √™xito </li></ul><br><p>  Nenhuma das falhas interrompeu a grava√ß√£o e n√£o causou erros de carga sint√©ticos; o rebaixamento do desempenho, √© claro, foi (e sabemos como derrotar isso, o que faremos em breve), mas, considerando que s√£o segundos, √© bastante aceit√°vel.  Conclus√£o: a toler√¢ncia a falhas de todos os componentes de armazenamento do AERODISK trabalhados no n√≠vel, n√£o h√° pontos de falha. </p><br><p>  Obviamente, na estrutura de um artigo, n√£o podemos testar todos os cen√°rios de falha, mas tentamos cobrir os mais populares.  Portanto, envie seus coment√°rios, desejos para as seguintes publica√ß√µes e, √© claro, cr√≠ticas adequadas.  Teremos o maior prazer em discutir (e melhor vir para o treinamento, apenas no caso de duplicar a programa√ß√£o)!  At√© novos testes! </p><br><ul><li>  <strong>Nizhny Novgorod</strong> (J√Å TRABALHA - voc√™ pode se registrar aqui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://aerodisk.promo/nn/</a> ); <br>  At√© 16 de abril de 2019, voc√™ pode visitar o centro a qualquer momento e, em 16 de abril de 2019, ser√° organizado um grande curso de treinamento. </li><li>  <strong>Krasnodar</strong> (EM BREVE - inscreva-se aqui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://aerodisk.promo/krsnd/</a> ); <br>  De 9 a 25 de abril de 2019, voc√™ pode visitar o centro a qualquer momento e, em 25 de abril de 2019, ser√° organizado um grande curso de treinamento. </li><li>  <strong>Ecaterimburgo</strong> (EM BREVE ABERTURA, siga as informa√ß√µes em nosso site ou em Habr√©); <br>  Maio a junho de 2019. </li><li>  <strong>Novosibirsk</strong> (siga as informa√ß√µes em nosso site ou em Habr√©); <br>  Outubro 2019 </li><li>  <strong>Krasnoyarsk</strong> (siga as informa√ß√µes em nosso site ou em Habr√©); <br>  Novembro 2019 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447070/">https://habr.com/ru/post/pt447070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt447056/index.html">Como os homens loucos s√£o calculados - 2: O brilho e a pobreza do diagn√≥stico patopsicol√≥gico</a></li>
<li><a href="../pt447058/index.html">Novo balanceador de carga da CPU do MIT</a></li>
<li><a href="../pt447062/index.html">Hist√≥ria da Tecnologia de √Åudio: Sintetizadores e Samplers</a></li>
<li><a href="../pt447064/index.html">Conhe√ßa o Manual de conformidade de licen√ßas de c√≥digo-fonte aberto</a></li>
<li><a href="../pt447068/index.html">Compare cadeias semelhantes</a></li>
<li><a href="../pt447072/index.html">‚ÄúFiz tudo - foi uma hist√≥ria engra√ßada‚Äù: um podcast sobre marketing de conte√∫do e uma carreira na m√≠dia de TI</a></li>
<li><a href="../pt447074/index.html">Estamos escrevendo o primeiro microsservi√ßo no Node.js com comunica√ß√£o atrav√©s do RabbitMQ</a></li>
<li><a href="../pt447076/index.html">OWASP Russia Meetup - Apresenta√ß√µes de grava√ß√£o</a></li>
<li><a href="../pt447078/index.html">Flightradar24 - como funciona? Parte 2, protocolo ADS-B</a></li>
<li><a href="../pt447080/index.html">Redes para os menores. Parte oh √© isso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>