<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–– ğŸ‘ğŸ¼ ğŸ“ Pemrograman yang mudah: Papan Kanban untuk GitLab dalam satu hari kerja ğŸš— ğŸ§€ ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Senin kerja dimulai dengan dialog berikut: 

 Pemimpin (P): Tidak jelas dalam tim Anda siapa yang melakukan apa. 
 I (I): Ya, kami tidak memiliki alat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pemrograman yang mudah: Papan Kanban untuk GitLab dalam satu hari kerja</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lanit/blog/462855/"><blockquote>  Senin kerja dimulai dengan dialog berikut: <br><br>  Pemimpin (P): Tidak jelas dalam tim Anda siapa yang melakukan apa. <br>  I (I): Ya, kami tidak memiliki alat yang akan mencerminkan gambaran umum pekerjaan pada tugas.  Ada papan kanban di hitlab, tetapi mereka hanya dalam konteks proyek dan grup.  Papan kanban biasa akan menyelesaikan masalah. <br>  R: Lalu buat papan. <br>  Saya: Pagi itu akan siap. </blockquote><br>  Cepat <s>atau lambat,</s> momen itu datang dalam kehidupan seorang pemimpin tim pemula ketika dia menyadari bahwa timnya membutuhkan papan kanban.  Ini menghilangkan kecemasan tentang kontrol proses pengembangan dan memberikan kepercayaan di masa depan.  Biasanya masalah ini diselesaikan dengan permintaan terendah kepada manajer untuk membeli papan magnetik, satu set stiker multi-warna dan beberapa spidol untuk papan tulis.  Baik, atau menggunakan layanan seperti Jira.  Tetapi tim kami memiliki satu pengembang di remote, dan gitlab di sirkuit tertutup (tidak tersedia dari Internet karena alasan keamanan informasi), jadi saya harus memilih yang paling sederhana dari dua solusi yang mungkin: <br><br>  a) pembuatan lengan mekanis dan pengontrol untuknya, yang akan menempel ulang stiker pada jarak jauh, sementara agar tidak menyulitkan keputusan, kita harus menulis pada stiker untuk kolega kita yang tidak dapat diakses, yang tidak adil; <br>  b) implementasi dewan kanban perangkat lunak yang akan mengumpulkan semua tugas dari hitlab kami. <br><br>  Tentu saja, jiwa berbaring di tabung papan fisik.  Saya bahkan mulai berpikir tentang menggunakan DualShock 4 sebagai pengontrol lengan mekanis, tetapi saya sendiri yang menetapkan batas waktu keesokan paginya, jadi saya harus bertahan dengan solusi perangkat lunak tanpa jiwa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/py/y1/nr/pyy1nr-n2oomevtit82fe-6hkk4.jpeg"></div><a name="habracut"></a><br>  Sebelum mulai menggambarkan bagian teknis dari cerita ini, saya akan berbicara tentang bagaimana kami menggunakan gitlab di Ontla.  Grup-grup di hitlab yang kami miliki berhubungan dengan pelanggan internal / eksternal atau proyek besar yang terpisah, dan proyek tersebut adalah tempat penyimpanan untuk kode layanan tertentu.  Sebagai contoh, kami memiliki grup panel kontrol penagihan di mana empat proyek adalah layanan dan aplikasi web, dan ada grup pemasaran di mana ada proyek untuk situs web perusahaan, layanan mikro untuk integrasi dengan amoCRM, semua jenis halaman arahan dan sebagainya.  Saat ini kami memiliki sembilan grup aktif, dan ada lebih sedikit programmer, sehingga semua programmer berpartisipasi dalam semua grup. <br><br>  Dan yang kami butuhkan adalah halaman dengan semua tugas dari hitlab, dari semua grup dan proyek, tetapi fungsi ini di GitLab, sayangnya, tidak.  Google cepat tidak membantu menemukan solusi mandiri <br><br><h2>  Kami akan membutuhkan: </h2><br>  - backend pada Node.js - untuk mengumpulkan tugas dengan GitLab dan mentransfernya ke klien; <br>  - klien di Vue.js - untuk melakukannya dengan cepat dan indah; <br>  - bumbui semuanya dengan TypeScript, tentu saja! <br>  - PostgreSQL - di mana kami akan menyimpan informasi tentang tugas dan posisinya di papan tulis; <br>  - 8 jam waktu kerja; <br>  - Suasana hati yang baik. <br><br>  Kondisi yang paling penting adalah pengembangan harus mudah dan menyenangkan, sebut saja "pemrograman mudah". <br><br><h2>  Kebun binatang </h2><br>  Untuk alasan yang jelas, saya tidak dapat menggunakan proyek dan tugas dari hitlab perusahaan kami untuk mengilustrasikan artikel tentang HabrÃ©, jadi saya menggunakan hitlab saya, dengan monyet dan buaya.  Ya, ini adalah gitlab untuk kebun binatang fiksi, tetapi akan ada tugas yang tidak kalah serius dari pada gitlab lainnya.  Lihatlah daftar proyek: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ie/z3/wj/iez3wjnmgipdeidl53j1jlwmgrk.jpeg"></div><br><h2>  karkas </h2><br>  Selama bertahun-tahun pembangunan, saya telah mengembangkan visi saya sendiri tentang bagaimana aplikasi backend pada Node.js harus dibangun, dan pendekatan ini mengambil bentuk kerangka kerja - seperangkat file.  Untuk membuat proyek baru, saya hanya menyalin direktori dengan templat.  Ini tidak bisa berlangsung selamanya, dan saya membuat paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">karcass</a> npm (nama bangkai sudah diambil oleh penggemar sepeda yang sama seperti yang saya lakukan), yang mengotomatiskan proses menciptakan dasar untuk aplikasi: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rk/uz/8f/rkuz8fkc3bpzr4dksqgerrganjo.gif"></div><br>  Sekarang kita perlu berurusan dengan penerimaan dan penyimpanan kelompok, proyek, tugas dan, tentu saja, pemain. <br><br><h2>  TypeORM </h2><br><blockquote>  <i>"Aku melihat beberapa entitas ..."</i> <br>  <sup>- dari diskusi di forum paranormal</sup> </blockquote><br>  Karena kita perlu mempresentasikan data dari gitlab dalam bentuk yang nyaman bagi kita, maka dalam proses antara mengumpulkan data ini dan mempresentasikannya, kita perlu menyimpannya.  Baru-baru ini, saya menemukan perpustakaan yang luar biasa untuk bekerja dengan database, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">TypeORM,</a> luar biasa untuk ekosistem JS.  Itu masih hijau, tetapi memiliki setiap kesempatan untuk mengusir Sekuel dari tahta. <br><br>  Dalam beberapa puluh menit, migrasi dan kelas untuk <a href="">pengguna</a> , <a href="">grup</a> , <a href="">proyek</a> , dan <a href="">tugas</a> muncul.  Ini salah satunya: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Entity, PrimaryColumn, Column } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'typeorm'</span></span> @Entity({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'group'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Group</span></span></span><span class="hljs-class"> </span></span>{ @PrimaryColumn(<span class="hljs-string"><span class="hljs-string">'integer'</span></span>) public id!: number @Column(<span class="hljs-string"><span class="hljs-string">'varchar'</span></span>) public name!: string @Column(<span class="hljs-string"><span class="hljs-string">'varchar'</span></span>) public url!: string }</code> </pre> <br>  Dan untuk membuat migrasi, saya kembali membuat asisten <a href="">sepeda CreateMigrationCommand</a> .  Perintah ini sangat mudah digunakan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/am/s4/du/ams4duyc_iym2w-mwe3lkkgdmkq.gif"></div><br>  Di kelas Issue, selain bidang yang menyimpan data dari Gitlab, kami menambahkan bidang yang menjadi dasar seluruh keributan dimulai, yaitu, menunjukkan posisi tugas pada papan kanban: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Issue</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> @Column(<span class="hljs-string"><span class="hljs-string">'varchar'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'kanban_status'</span></span> }) public kanbanStatus?: <span class="hljs-string"><span class="hljs-string">'new'</span></span>|<span class="hljs-string"><span class="hljs-string">'planed'</span></span>|<span class="hljs-string"><span class="hljs-string">'working'</span></span>|<span class="hljs-string"><span class="hljs-string">'checking'</span></span>|<span class="hljs-string"><span class="hljs-string">'done'</span></span> @Column(<span class="hljs-string"><span class="hljs-string">'int'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'kanban_order'</span></span> }) public kanbanOrder?: number }</code> </pre> <br><h2>  Kami butuh informasi </h2><br>  Ketika saya pertama kali mulai berkenalan dengan GitLab, bagi saya itu tampak seperti produk sederhana (baca â€œbenciâ€), tetapi bekerja dengannya setiap hari, saya menyadari betapa salahnya saya.  Jadi kali ini saya terkejut - ternyata GitLab memiliki API yang sangat kaya yang mencakup hampir semua fungsi yang tersedia melalui antarmuka pengguna.  Tetapi untuk menyelesaikan masalah kami, Anda hanya perlu empat metode, yang namanya berbicara sendiri: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">/ pengguna</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">/ grup</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">/ proyek</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">/ proyek /: id / masalah</a> .  GitlabService akan bertanggung jawab atas interaksi langsung dengan GitLab, dan kelas-kelas lain akan mengaksesnya.  Misalnya, penerapan metode updateGroups dari kelas GroupService terlihat seperti ini: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GroupService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> updateGroups() { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.app.gitlabService.getGroups()) { <span class="hljs-comment"><span class="hljs-comment">// &lt;=     GitlabService let group = await this.getGroup(data.id) if (!group) { group = this.groupRepository.create({ id: data.id, }) } group.name = data.name group.url = data.web_url await this.groupRepository.save(group) } } /* ... */ }</span></span></code> </pre> <br>  Perintah <a href="">updateProjectsCommand</a> akan bertanggung jawab untuk pengoperasian memperoleh informasi dari gitab dan memperbarui informasi yang relevan di basis data kami, yang dapat dipanggil dari konsol, tetapi aplikasi kami akan meluncurkannya sendiri dengan frekuensi yang ditentukan dalam konfigurasi: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> protected initCron() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.gitlab.updateInterval) { setInterval(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateProjectsCommand) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateProjectsCommand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UpdateProjectsCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateProjectsCommand.execute() }, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.gitlab.updateInterval * <span class="hljs-number"><span class="hljs-number">1000</span></span>) } } <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }</code> </pre> <br>  Kami tidak akan membuat kode angka, warna, dan nama kolom di papan tulis, tetapi membuatnya dapat disesuaikan di config.js.  Kami memiliki lima dari mereka, tetapi untuk seseorang, mungkin hanya dua yang diperlukan dan warna asam: <br><br><pre> <code class="javascript hljs">columns: [ { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: <span class="hljs-string"><span class="hljs-string">'new'</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'rgb(255, 255, 219)'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: <span class="hljs-string"><span class="hljs-string">'planed'</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'rgb(236, 236, 191)'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: <span class="hljs-string"><span class="hljs-string">'working'</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'rgb(253, 214, 162)'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: <span class="hljs-string"><span class="hljs-string">'checking'</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'rgb(162, 226, 253)'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: <span class="hljs-string"><span class="hljs-string">'done'</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'rgb(162, 253, 200)'</span></span> }, ],</code> </pre> <br>  Yang utama adalah setidaknya harus ada dua, jika tidak aplikasi tidak akan mulai. <br><br>  Untuk berinteraksi dengan bagian depan, kita membutuhkan metode yang menerima tugas dari database dan mengurutkannya menjadi "kolom": <br><br><div class="spoiler">  <b class="spoiler_title">Tampilkan IssueService.ts</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IssueService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> getKanban() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> issues = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.issueRepository.find({ <span class="hljs-attr"><span class="hljs-attr">where</span></span>: { <span class="hljs-attr"><span class="hljs-attr">updatedTimestamp</span></span>: MoreThanOrEqual(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().getTimestamp() - <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">24</span></span> * <span class="hljs-number"><span class="hljs-number">30</span></span>) }, <span class="hljs-attr"><span class="hljs-attr">order</span></span>: { <span class="hljs-attr"><span class="hljs-attr">kanbanOrder</span></span>: <span class="hljs-string"><span class="hljs-string">'ASC'</span></span>, <span class="hljs-attr"><span class="hljs-attr">updatedTimestamp</span></span>: <span class="hljs-string"><span class="hljs-string">'DESC'</span></span> }, }) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> keys = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.app.config.columns.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c.key) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result: { [key: string]: Issue[] } = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ki = keys.length - <span class="hljs-number"><span class="hljs-number">1</span></span>; ki &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; ki--) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> key = keys[ki] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ki === keys.length - <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//        result[key] = issues.filter(i =&gt; i.closed) } else if (ki === 0) { // ,  ,    ,    result[key] = issues } else { result[key] = issues.filter(i =&gt; i.kanbanStatus === key) } issues = issues.filter(i =&gt; !result[key].includes(i)) //     } return result } /* ... */ }</span></span></code> </pre> </div></div><br>  Dan pengontrol yang menyimpan posisi tugas baru: <br><br><div class="spoiler">  <b class="spoiler_title">Tampilkan IssueController.ts</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IssueController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> kanbanUpdate(data: IQueryData) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> keys = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.app.config.columns.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c.key) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> data.params <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">issues</span></span>: number[] }[]) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (keys.indexOf(c.key) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> c.issues) { index++ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> issue = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.app.issueService.getIssue(i) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!issue) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } issue.kanbanStatus = c.key issue.kanbanOrder = index <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.app.issueService.issueRepository.save(issue) } } } }</code> </pre> </div></div><br>  Stosh.  Kami mengumpulkan informasi dari GitLab, menyiapkan data untuk menampilkan papan, bahkan tahu cara menyimpan posisi tugas yang diperbarui di papan tulis.  Satu-satunya yang tersisa adalah membuat papan itu sendiri.  Dan di sini kita dipersenjatai dengan alat yang ampuh: <br><br><h2>  Vue CLI - Alih-alih Seribu Kata </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rt/re/r8/rtrer806kqdf2v9vkv_noeu-iyq.gif"></div><br><h2>  TSX </h2><br>  Untuk memfasilitasi refactoring, menemukan bug, linting dan ketenangan pikiran lainnya, kami menggunakan templat tsx yang hampir semuanya didukung oleh Vue.js.  Misalnya, komponen terpenting di papan kami, komponen presentasi tugas: <br><br><div class="spoiler">  <b class="spoiler_title">Tampilkan kode Issue.tsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Vue, Component, Prop, Watch } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue-property-decorator'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./Issue.css'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { CreateElement, VNode } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span> interface IIssue { <span class="hljs-attr"><span class="hljs-attr">groupId</span></span>: number groupName: string groupUrl: string projectName: string projectUrl: string url: string title: string executor: { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: string } spent: number estimate: number } @Component <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vue</span></span></span><span class="hljs-class"> </span></span>{ @Prop() public issue!: IIssue public issueValue!: IIssue public selectUser = <span class="hljs-literal"><span class="hljs-literal">false</span></span> @Watch(<span class="hljs-string"><span class="hljs-string">'issue'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">immediate</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) public onIssueChange() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.issueValue = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.issue } <span class="hljs-comment"><span class="hljs-comment">// eslint-disable-next-line @typescript-eslint/no-unused-vars public render(h: CreateElement): VNode { return &lt;div class="kvcIssue"&gt; &lt;div class="kvciTitle"&gt; { this.issueValue.groupId ? &lt;small&gt;&lt;a href={ this.issueValue.groupUrl } target="_blank"&gt; { this.issueValue.groupName } &lt;/a&gt; / &lt;/small&gt; : undefined } &lt;a href={ this.issueValue.projectUrl } target="_blank"&gt;{ this.issueValue.projectName }&lt;/a&gt; &lt;/div&gt; &lt;div class="kvciText"&gt;&lt;a href={ this.issueValue.url } target="_blank"&gt;{ this.issueValue.title }&lt;/a&gt;&lt;/div&gt; &lt;div class={ ['kvciExecutor', this.issueValue.executor ? '' : 'none'] }&gt; &lt;span class="timeTd"&gt; &lt;span title=" "&gt;{ this.issueValue.spent.time() }&lt;/span&gt; / &lt;span title=" "&gt; { this.issueValue.estimate.time() }&lt;/span&gt; &lt;/span&gt; { this.issueValue.executor ? &lt;span class="kvcieUser" style={ { background: this.issueValue.executor.color } }&gt; { this.issueValue.executor.name } &lt;/span&gt; : &lt;span class="kvcieSelect"&gt; &lt;/span&gt; } &lt;/div&gt; &lt;/div&gt; } }</span></span></code> </pre> </div></div><br>  Komponen ini menampilkan bilah tugas.  Perhatikan bahwa tugas sebenarnya telah menghabiskan waktu dan merencanakan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/hm/xg/pvhmxgsviyekg9e0ajxc8rszmje.png"></div><br>  Ada juga <a href="">komponen Column.tsx</a> dan <a href="">Kanban.tsx</a> .  Hanya tiga komponen yang menyediakan presentasi tugas di papan tulis: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f_/cg/rz/f_cgrz6koa31rvzod4afs4ivv1o.gif"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Vue.Draggable</a> , yang kakinya tumbuh dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SortableJS</a> , bertanggung jawab untuk memindahkan tugas di papan tulis.  Sangat mudah digunakan: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Draggable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vuedraggable'</span></span> <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vue</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> public render(h: CreateElement): VNode { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> &lt;Draggable <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"kvcIssues"</span></span> vModel={ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.issuesValue } group={ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'issues'</span></span>, <span class="hljs-attr"><span class="hljs-attr">pull</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">put</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } onEnd={ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onDrag } onAdd={ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onDrag } &gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.issuesValue.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;Issue key={ i.id } issue={ i } /&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/Draggable&gt; /</span></span>* ... *<span class="hljs-regexp"><span class="hljs-regexp">/ } }</span></span></code> </pre> <br>  Tentunya Anda memperhatikan bahwa setiap pengguna memiliki warna sendiri, yang digunakan untuk menampilkan login.  Ini sangat mudah - di antara banyak tugas, Anda dapat dengan cepat menemukan sendiri.  Ada dua cara untuk mencapai "multicolority": untuk mengatur warna dengan tangan untuk setiap pengguna atau untuk menghasilkannya berdasarkan sesuatu. <br><br><h2>  Beri saya nama pengguna Anda dan saya akan memberi tahu Anda warna apa yang Anda miliki </h2><br>  Pembuat warna dari kelas Pengguna bertanggung jawab untuk pembuatan warna.  Saya secara khusus mengimplementasikan fungsi ini di backend, karena saya membutuhkan kriptografi, dan merupakan kejahatan untuk menyeret seluruh perpustakaan ke depan untuk tugas sekecil itu.  Dan itu lebih tepat ketika bagian belakang, dan bukan bagian depan, bertanggung jawab atas karakteristik entitas: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> public get color() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hash = crypto.createHash(<span class="hljs-string"><span class="hljs-string">'md5'</span></span>).update(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.username).digest() <span class="hljs-comment"><span class="hljs-comment">//  md5       .     -   . const result: number[] = [] for (let i = 0; i &lt; 3; i++) { result.push(Math.round(200 - hash[i] / 255 * 150)) //      ,     ,       } return `rgb(${result.join(', ')})` } }</span></span></code> </pre> <br>  Bagi mereka yang ingin tahu warna apa yang ditakdirkan untuk mereka, saya tidak terlalu malas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">untuk memotong cuplikan pada CodePen</a> . <br><br><h2>  Itu semua </h2><br><blockquote>  Bekerja pada hari Selasa dimulai dengan dialog berikut: <br><br>  R: Baiklah, bagaimana papannya, siap? .. <br>  Saya: Ya, di sini. <br>  R: Oh, keren! </blockquote><br>  Hasil dari "hari kerja" saya ada di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/onlanta/kanban</a> .  Anda tidak hanya dapat melihatnya, menyentuhnya, tetapi juga menggunakannya (instruksi di sana).  Dan Anda dapat membangun pelacak waktu penuh untuk hitlab, yang kami lakukan di perusahaan. <br><br>  Mengapa saya memutuskan untuk menulis catatan ini?  Ini adalah salah satu momen cerah baru-baru ini dalam aktivitas profesional saya, ketika tugas itu penting, menarik, dan pada saat yang sama cukup sederhana, dan solusinya ternyata mudah dan elegan.  Saya sarankan di komentar untuk mengingat tugas serupa dari latihan Anda. <br><br><div class="spoiler">  <b class="spoiler_title">Nah, di mana kita tanpa lowongan.</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Insinyur Sistem Terkemuka VMware</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengembang tumpukan penuh</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Arsitek sistem</a> </li></ul></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id462855/">https://habr.com/ru/post/id462855/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id462845/index.html">Pijat untuk otak Anda: bicara tentang ASMR</a></li>
<li><a href="../id462847/index.html">Webinar Hewlett Packard Enterprise pada Agustus-Oktober 2019</a></li>
<li><a href="../id462849/index.html">Sesuatu tentang inode</a></li>
<li><a href="../id462851/index.html">Kami membuat layanan cloud untuk mengelola persediaan (Angular + Firebase)</a></li>
<li><a href="../id462853/index.html">Memperbarui statistik pada replika sekunder dari Grup yang Tersedia</a></li>
<li><a href="../id462859/index.html">Bagaimana perusahaan bus Eropa beroperasi di Rusia: bagaimana bus dan penumpang berbeda</a></li>
<li><a href="../id462863/index.html">21 Agustus menyiarkan Pertemuan Zabbix Moscow # 5</a></li>
<li><a href="../id462867/index.html">Memilih Skema Warna untuk Aplikasi Anda: Cara Membuatnya Sederhana?</a></li>
<li><a href="../id462869/index.html">Sistem Manajemen Proyek Agilean</a></li>
<li><a href="../id462875/index.html">Cara mengurangi biaya dan memberikan dukungan TI yang optimal untuk model bisnis. Kami mencari â€œjalan tengah keselamatanâ€</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>