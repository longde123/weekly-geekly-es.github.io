<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🎓 💂 👵🏿 Cómo plantear un proyecto de prueba en Windows 10 (Pepino + capibara + selenio-webdriver) 👨🏿‍🤝‍👨🏾 🗺️ 👨🏽‍🎨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El artículo está diseñado para familiarizarse con la autoevaluación y la implementación del entorno en Windows 10 y está destinado a aquellos que cono...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cómo plantear un proyecto de prueba en Windows 10 (Pepino + capibara + selenio-webdriver)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423123/">  El artículo está diseñado para familiarizarse con la autoevaluación y la implementación del entorno en Windows 10 y está destinado a aquellos que conocen un poco sobre <b>Cucumber + Capybara + Selenium-webdriver</b> .  La idea del artículo surgió debido a las diferencias en el entorno de implementación en Windows 10 y Linux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ww/rj/s-/wwrjs-iwpbsztyvj1ocolretoz0.jpeg"></div><br>  Algunas palabras sobre la gema (bibliotecas) de pepino + Carpincho + Selenio-webdriver que se necesitan para ejecutar y completar pruebas de IU con pruebas. <br><br><h4>  Pepino </h4><br>  ucumber es una gema que le permite escribir pruebas en el lenguaje humano.  Para hacer esto, use la notación Gherkin, que define la estructura y las reglas para escribir guiones.  Los detalles se pueden leer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b2/n_/ly/b2n_lym6xgyjm1tmbqlrj2ikhvs.jpeg"></div><br><h4>  Carpincho </h4><br>  Carpincho es una joya que le permite buscar / hacer clic / ... para los elementos del navegador.  Es decir  Es el enlace entre los pasos de Cucumber de la prueba y el controlador web (instancia del navegador llamado).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aquí</a> puedes ver los métodos de esta gema. <br><br><h4>  Selenio-webdriver </h4><br>  Selenium-webdriver es una herramienta para automatizar las acciones de un navegador web.  En esencia, esta es la instancia del navegador. <br><a name="habracut"></a><br><h4>  Acciones preliminares </h4><br><div class="spoiler">  <b class="spoiler_title">Descripción de acciones preliminares</b> <div class="spoiler_text">  Por conveniencia, usaremos RubyMine.  Puede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descargar una versión de prueba</a> durante 30 días. <br><br>  Descarga Firefox y Chrome para ejecutar las pruebas. <br><br>  Descargue e instale Git (sistema de control de versiones o VCS similar, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio oficial</a> ).  Pero Git es necesario cuando ya tiene un proyecto o desea almacenar su código en un sistema Git. <br></div></div><br><h4>  Así que empecemos </h4><br>  Ya tenemos instalado RubyMine. <br><br><ol><li>  Necesita instalar el lenguaje Ruby en sí.  Para hacer esto, vaya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> e instale RubyInstaller.  Elegí la última versión (RubyInstaller 2.5.1-2) con el paquete DevKit.  A través de este paquete de configuración, puede ejecutar pruebas desde la consola, como en Linux, así como administrar gemas de manera flexible. </li><li>  El paquete RubyInstaller está instalado y estamos pasando a la configuración. <br>  Si queremos crear un nuevo proyecto, entonces abra RubyMine y cree un proyecto vacío, indicando el Ruby instalado. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h4/nm/tf/h4nmtfigi9avbshzxmctt1go0v4.jpeg"></div></li><li>  A continuación, debemos crear esta estructura de carpetas y archivos de acuerdo con la anotación. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kg/mv/qp/kgmvqptts6xoxwmvblc-tu0q-ca.jpeg"></div><br>  Descrito en detalle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> </li><li>  Gemfile: contiene una lista de gemas que se usan en el proyecto <br><br><div class="spoiler">  <b class="spoiler_title">Aquí están los contenidos de nuestro archivo de gemas, con las gemas más básicas para las pruebas de IU</b> <div class="spoiler_text"><blockquote><pre><code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">source</span></span> <span class="hljs-string"><span class="hljs-string">'https://rubygems.org'</span></span> gem <span class="hljs-string"><span class="hljs-string">'cucumber'</span></span> gem <span class="hljs-string"><span class="hljs-string">'capybara'</span></span> gem <span class="hljs-string"><span class="hljs-string">'selenium-webdriver'</span></span> gem <span class="hljs-string"><span class="hljs-string">'chromedriver-helper'</span></span></code> </pre> </blockquote><br></div></div><br>  Estas 4 gemas deben especificarse en el Gemfile. <br>  gem 'chromedriver-helper': controlador de Chrome que permite ejecutar pruebas en Chrome <br>  Con este gemfile necesitas instalar nuestras gemas seleccionadas.  Instalar en Windows es más fácil desde la interfaz de RubyMine: <b>Herramientas -&gt; Bundler -&gt; Menú de instalación</b> .  Bundler también es una gema, pero sirve para controlar gemas.  Pero también puede hacerlo desde la línea de comandos, que se encuentra en el menú del programa bajo el nombre Iniciar símbolo del sistema ... <br>  Por cierto, usando esta línea de comando puedes ejecutar pruebas sin pasar por RubyMine. <br></li><li>  El archivo env.rb es el archivo rb clave para ejecutar pruebas de IU.  Al inicializar variables y archivos de prueba, será env.rb el primero.  Es el registro del navegador en el que se ejecutarán las pruebas.  Un ejemplo listo de env.rb donde Chrome, Firefox está registrado, o comprendamos que no necesitamos un navegador para ejecutar las pruebas. <br>  Casos en los que no se necesita un navegador: verificamos las solicitudes de descanso, las pruebas de integración, aunque se cree que las pruebas de Cucumber no son adecuadas para esto. <br><br><div class="spoiler">  <b class="spoiler_title">Escribiendo env.rb</b> <div class="spoiler_text"><blockquote><pre> <code class="hljs ruby"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'capybara/cucumber'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'selenium-webdriver'</span></span> Capybara.register_driver <span class="hljs-symbol"><span class="hljs-symbol">:driver</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|app|</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ENV[<span class="hljs-string"><span class="hljs-string">'DRIVER'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">'chrome'</span></span> Capybara::Selenium::Driver.new(app, <span class="hljs-symbol"><span class="hljs-symbol">:browser</span></span> =&gt; <span class="hljs-symbol"><span class="hljs-symbol">:chrome</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">'without_browser'</span></span> Capybara.default_driver = <span class="hljs-symbol"><span class="hljs-symbol">:mechanize</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> client = Selenium::WebDriver::Remote::Http::Default.new Capybara::Selenium::Driver.new(app, <span class="hljs-symbol"><span class="hljs-symbol">:browser</span></span> =&gt; <span class="hljs-symbol"><span class="hljs-symbol">:firefox</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">port:</span></span> <span class="hljs-number"><span class="hljs-number">10000</span></span> + Random.rand(<span class="hljs-number"><span class="hljs-number">1000</span></span>), <span class="hljs-symbol"><span class="hljs-symbol">http_client:</span></span> client) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> Capybara.default_driver = <span class="hljs-symbol"><span class="hljs-symbol">:driver</span></span> Capybara.default_selector = <span class="hljs-symbol"><span class="hljs-symbol">:xpath</span></span></code> </pre> </blockquote><br></div></div><br>  Además, aquí está el problema de las versiones de Firefox. <br>  Si ha instalado la versión 46 o inferior de Firefox, para ejecutar las pruebas correctamente, necesita la versión de gema 'capybara' 2.53.4 'o inferior. <br><br>  Si la versión de Firefox es superior a 46, entonces funciona en otros principios basados ​​en el "geckodriver" y, por lo tanto, para ejecutar las pruebas correctamente, debe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">instalar geckodriver</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Una excursión a las razones por las cuales se necesita geckodriver</b> <div class="spoiler_text">  Antes de la versión 47, el controlador de automatización de Firefox era solo una extensión que se incluía con cada cliente.  Pero esta extensión se ha eliminado debido a un cambio de política que ahora requiere que todas las extensiones estén firmadas por Mozilla. <br><br>  Marionette es el nuevo controlador que se incluye con Firefox.  Este controlador tiene su propio protocolo, que es incompatible con el protocolo Selenium / WebDriver. <br><br>  Geckodriver es un servidor de aplicaciones que implementa el protocolo Selenium / WebDriver.  Traduce los comandos de Selenium y los redirige al controlador Marionette. <br></div></div><br>  <b>Un matiz importante</b> , después de instalar "geckodriver", es necesario prescribir las rutas del sistema para que nuestro "geckodriver" se encuentre al ejecutar env.rb. <br><br><div class="spoiler">  <b class="spoiler_title">rutas del sistema</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/na/qm/jd/naqmjdhlfa_o9xn8jqax-oqmkfk.jpeg"><br></div></div><br></li><li>  A continuación, solo queda escribir una prueba de prueba y ejecutarla en Chrome, Firefox y sin un navegador :).  Por ejemplo, escribiremos algunos pasos para ingresar el correo mail.ru <br><br><div class="spoiler">  <b class="spoiler_title">Descripción de pasos</b> <div class="spoiler_text"><blockquote><pre> <code class="hljs pgsql"># <span class="hljs-keyword"><span class="hljs-keyword">encoding</span></span>: UTF<span class="hljs-number"><span class="hljs-number">-8</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>: ru Given(/^   "(.*?)"$/) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> |page| visit page <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> Given(/^  "(.*?)"   c id "(.*?)"$/) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> |<span class="hljs-type"><span class="hljs-type">text</span></span>, field_id| find("//input[@id='#{field_id}']").<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(<span class="hljs-type"><span class="hljs-type">text</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> Given(/^  "(.*?)"     id "(.*?)"$/) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> |<span class="hljs-type"><span class="hljs-type">text</span></span>, select_id| find("//select[@id='#{select_id}']/option[text()='#{text}']").click <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> Given(/^    "(.*?)"$/) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> |<span class="hljs-type"><span class="hljs-type">text</span></span>| find("//input[@value='#{text}']").click <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> Given(/^ (\d+) (?:|)$/) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> |sec| sleep sec.to_i <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </blockquote><br></div></div><br></li><li>  Así como la prueba de pepino en sí <br><br><div class="spoiler">  <b class="spoiler_title">test.feature</b> <div class="spoiler_text"><blockquote><pre> <code class="hljs swift"># encoding: <span class="hljs-type"><span class="hljs-type">UTF</span></span>-<span class="hljs-number"><span class="hljs-number">8</span></span> # language: ru :   :       <span class="hljs-string"><span class="hljs-string">"https://mail.ru/"</span></span>    <span class="hljs-string"><span class="hljs-string">"dorian.grey.2019"</span></span>   <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> id <span class="hljs-string"><span class="hljs-string">"mailbox:login"</span></span>    <span class="hljs-string"><span class="hljs-string">"********"</span></span>   <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> id <span class="hljs-string"><span class="hljs-string">"mailbox:password"</span></span>    <span class="hljs-string"><span class="hljs-string">"@inbox.ru"</span></span>     id <span class="hljs-string"><span class="hljs-string">"mailbox:domain"</span></span>      <span class="hljs-string"><span class="hljs-string">""</span></span>   <span class="hljs-number"><span class="hljs-number">5</span></span> </code> </pre> </blockquote><br></div></div><br></li><li>  Solo queda verificar todos nuestros esfuerzos y disfrutar del funcionamiento exitoso de las pruebas de IU (en el ejemplo 1 de la prueba) :).  El último ajuste que queda es la configuración de ejecución de prueba.  Vaya al menú RubyMine -&gt; Editar configuraciones -&gt; Opciones de corredor - Aquí solo seleccionamos el controlador :) <br>  ENV ['DRIVER'] de env.rb esta es la configuración de inicio.  Y solo necesitamos especificar “DRIVER = firefox” o “DRIVER = chrome” en las Opciones del corredor. <br></li></ol><br>  Lanzamos <br><br><img src="https://habrastorage.org/webt/fy/dg/7i/fydg7ieltbsbgugy2teio6e6btu.jpeg"><br><br>  ¡Eso es todo, exitosas pruebas de pepino para ti! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es423123/">https://habr.com/ru/post/es423123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es423109/index.html">Qué presentó Apple y qué piensan los desarrolladores de iOS al respecto</a></li>
<li><a href="../es423115/index.html">Efectos mejorados con el modo de fusión de capa de fondo CSS</a></li>
<li><a href="../es423117/index.html">Vive más tiempo o envejece más lento: un enfoque tecnológico para la vejez</a></li>
<li><a href="../es423119/index.html">DIY TTL arcade machine ... en 2018</a></li>
<li><a href="../es423121/index.html">Brainfuck de bajo nivel</a></li>
<li><a href="../es423125/index.html">Aplicaciones de geocompartimiento</a></li>
<li><a href="../es423127/index.html">Plutón es considerado un planeta</a></li>
<li><a href="../es423129/index.html">Mitos y excusas que te impiden aprender inglés</a></li>
<li><a href="../es423131/index.html">TL; DR del libro "El arte de la ciencia y la ingeniería", de Richard Hamming</a></li>
<li><a href="../es423133/index.html">Interfaz proactiva: rediseño de la página de búsqueda de suicidios de Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>