<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•å üñ±Ô∏è üîº Architecture de l'interface utilisateur Web: un pass√© en bois, un pr√©sent √©trange et un brillant avenir ‚ôìÔ∏è üöà üò•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La communaut√© moderne des d√©veloppeurs est d√©sormais plus que jamais soumise √† la mode et aux tendances, et cela est particuli√®rement vrai pour le mon...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Architecture de l'interface utilisateur Web: un pass√© en bois, un pr√©sent √©trange et un brillant avenir</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456794/"><img src="https://habrastorage.org/webt/g1/rr/97/g1rr97vliagp-2dndxhmubahvrg.png" alt="image"><br><br>  La communaut√© moderne des d√©veloppeurs est d√©sormais plus que jamais soumise √† la mode et aux tendances, et cela est particuli√®rement vrai pour le monde du d√©veloppement front-end.  Nos cadres et nos nouvelles pratiques sont la principale valeur, et la plupart des CV, des offres d'emploi et des programmes de conf√©rence consistent √† les r√©pertorier.  Et bien que le d√©veloppement d'id√©es et d'outils ne soit pas n√©gatif en soi, en raison du d√©sir constant des d√©veloppeurs de suivre les tendances insaisissables, nous avons commenc√© √† oublier l'importance des connaissances th√©oriques g√©n√©rales sur l'architecture d'application. <br><br>  La pr√©valence de la valeur de r√©glage sur la connaissance de la th√©orie et des meilleures pratiques a conduit au fait que la plupart des nouveaux projets ont aujourd'hui un niveau de maintenance extr√™mement faible, cr√©ant ainsi des inconv√©nients importants pour les d√©veloppeurs (la complexit√© constamment √©lev√©e de l'√©tude et de la modification du code) et pour les clients (taux bas et co√ªt de d√©veloppement √©lev√©). <br><br>  Afin d'influencer au moins d'une mani√®re ou d'une autre la situation actuelle, je voudrais aujourd'hui vous expliquer ce qu'est une bonne architecture, comment elle s'applique aux interfaces Web et, surtout, comment elle √©volue au fil du temps. <br><br>  <i><b>NB</b> : Comme exemples dans l'article, seuls les cadres que l'auteur a trait√©s directement seront utilis√©s, et une attention particuli√®re sera accord√©e √† React et Redux ici.</i>  <i>Mais, malgr√© cela, bon nombre des id√©es et des principes d√©crits ici sont de nature g√©n√©rale et peuvent √™tre plus ou moins correctement projet√©s sur d'autres technologies de d√©veloppement d'interface.</i> <br><br><a name="habracut"></a><h2>  Architecture pour les nuls </h2><br>  Commen√ßons par le terme lui-m√™me.  En termes simples, l'architecture de tout syst√®me est la d√©finition de ses composants et le sch√©ma d'interaction entre eux.  Il s'agit d'une sorte de fondement conceptuel au-dessus duquel la mise en ≈ìuvre sera construite ult√©rieurement. <br><br>  La t√¢che de l'architecture est de satisfaire aux exigences externes du syst√®me con√ßu.  Ces exigences varient d'un projet √† l'autre et peuvent √™tre assez sp√©cifiques, mais dans le cas g√©n√©ral elles visent √† faciliter les processus de modification et d'extension des solutions d√©velopp√©es. <br><br>  Quant √† la qualit√© de l'architecture, elle s'exprime g√©n√©ralement dans les propri√©t√©s suivantes: <br><br>  - <b>Accompagnement</b> : la pr√©disposition d√©j√† mentionn√©e du syst√®me √† √©tudier et √† modifier (la difficult√© de d√©tecter et de corriger les erreurs, d'√©tendre les fonctionnalit√©s, d'adapter la solution √† un autre environnement ou conditions) <br>  - <b>Rempla√ßabilit√©</b> : la possibilit√© de modifier la mise en ≈ìuvre de n'importe quel √©l√©ment du syst√®me sans affecter les autres √©l√©ments <br>  - <b>Testabilit√©</b> : la capacit√© de v√©rifier le bon fonctionnement de l'√©l√©ment (la capacit√© de contr√¥ler l'√©l√©ment et d'observer son √©tat) <br>  - <b>Portabilit√©</b> : la capacit√© de r√©utiliser un √©l√©ment dans d'autres syst√®mes <br>  - <b>Facilit√© d'utilisation</b> : le degr√© global de commodit√© du syst√®me lorsqu'il est utilis√© par l'utilisateur final <br><br>  Une mention distincte est √©galement faite de l'un des principes cl√©s de la construction d'une architecture de qualit√©: le principe de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©paration des pr√©occupations</a> .  Elle consiste dans le fait que tout √©l√©ment du syst√®me doit √™tre exclusivement responsable d'une seule t√¢che (appliqu√©e, accessoirement, au code d'application: voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">principe de responsabilit√© unique</a> ). <br><br>  Maintenant que nous avons une id√©e du concept d'architecture, voyons quels mod√®les de conception architecturale peuvent nous offrir dans le contexte des interfaces. <br><br><h2>  Les trois mots les plus importants </h2><br>  MVC (Model-View-Controller) est l'un des mod√®les de d√©veloppement d'interface les plus connus, dont le concept cl√© est de diviser la logique d'interface en trois parties distinctes: <br><br>  1. <b>Mod√®le</b> - est responsable de la r√©ception, du stockage et du traitement des donn√©es <br>  2. <b>Vue</b> - responsable de la visualisation des donn√©es <br>  3. <b>Contr√¥leur</b> - contr√¥le le mod√®le et la vue <br><br>  Ce mod√®le comprend √©galement une description du sch√©ma d'interaction entre eux, mais ici, cette information sera omise du fait qu'apr√®s un certain temps, le grand public a √©t√© pr√©sent√© avec une modification am√©lior√©e de ce mod√®le appel√© MVP (Model-View-Presenter), qui ce sch√©ma original interaction grandement simplifi√©e: <br><br><img src="https://habrastorage.org/webt/sv/j_/r2/svj_r22lb39syciykkximzlk-vy.png" alt="image"><br><br>  Comme nous parlons sp√©cifiquement des interfaces Web, nous avons utilis√© un autre √©l√©ment assez important qui accompagne g√©n√©ralement la mise en ≈ìuvre de ces mod√®les - un routeur.  Sa t√¢che est de lire l'URL et d'appeler les pr√©sentateurs qui lui sont associ√©s. <br><br>  Le sch√©ma ci-dessus fonctionne comme suit: <br><br>  1. Le routeur lit l'URL et appelle le pr√©sentateur associ√© <br>  2-5.  Le pr√©sentateur se tourne vers Model et en obtient les donn√©es n√©cessaires. <br>  6. Le pr√©sentateur transf√®re les donn√©es du mod√®le vers la vue, ce qui impl√©mente sa visualisation. <br>  7. Lors de l'interaction de l'utilisateur avec l'interface, View en informe le pr√©sentateur, ce qui nous ram√®ne au deuxi√®me point <br><br>  Comme la pratique l'a montr√©, MVC et MVP ne sont pas une architecture id√©ale et universelle, mais ils font encore une chose tr√®s importante - ils indiquent trois domaines de responsabilit√© cl√©s, sans lesquels aucune interface ne peut √™tre impl√©ment√©e sous une forme ou une autre. <br><br>  <i>NB: Dans l'ensemble, les concepts de contr√¥leur et de pr√©sentateur signifient la m√™me chose, et la diff√©rence de nom n'est n√©cessaire que pour diff√©rencier les mod√®les mentionn√©s, qui ne diff√®rent que dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mise</a> en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">≈ìuvre des communications</a> .</i> <br><br><h2>  MVC et rendu serveur </h2><br>  Malgr√© le fait que MVC est un mod√®le pour impl√©menter un client, il trouve √©galement son application sur le serveur.  De plus, c'est dans le cadre du serveur qu'il est le plus simple de d√©montrer les principes de son fonctionnement. <br><br>  Dans les cas o√π il s'agit de sites d'informations classiques, o√π la t√¢che du serveur web est de g√©n√©rer des pages HTML pour l'utilisateur, MVC nous permet √©galement d'organiser une architecture d'application assez concise: <br><br>  - Le routeur lit les donn√©es de la requ√™te HTTP re√ßue <i>(GET / user-profile / 1)</i> et appelle le contr√¥leur associ√© <i>(UsersController.getProfilePage (1))</i> <br>  - Le contr√¥leur appelle le mod√®le pour obtenir les informations n√©cessaires de la base de donn√©es <i>(UsersModel.get (1))</i> <br>  - Le contr√¥leur transmet les donn√©es re√ßues √† View <i>(View.render ('users / profile', user))</i> et en re√ßoit le balisage HTML, qui les retransmet au client <br><br>  Dans ce cas, View est g√©n√©ralement impl√©ment√© comme suit: <br><br><img src="https://habrastorage.org/webt/1j/q6/_f/1jq6_frux0usp6akgw91lj3bq5o.png" alt="image"><br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> templates = { <span class="hljs-string"><span class="hljs-string">'users/profile'</span></span>: <span class="hljs-string"><span class="hljs-string">` &lt;div class="user-profile"&gt; &lt;h2&gt;{{ name}}&lt;/h2&gt; &lt;p&gt;E-mail: {{ email }}&lt;/p&gt; &lt;p&gt; Projects: {{#each projects}} &lt;a href="/projects/{{id}}"&gt;{{name}}&lt;/a&gt; {{/each}} &lt;/p&gt; &lt;a href=/user-profile/1/edit&gt;Edit&lt;/a&gt; &lt;/div&gt; `</span></span> }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ render(templateName, data) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> htmlMarkup = TemplateEngine.render(templates[templateName], data); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> htmlMarkup; } }</code> </pre> <br>  <i>NB: Le code ci-dessus est intentionnellement simplifi√© pour √™tre utilis√© comme exemple.</i>  <i>Dans les projets r√©els, les mod√®les sont export√©s vers des fichiers s√©par√©s et passent par l'√©tape de compilation avant utilisation (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Handlebars.compile ()</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">_.template ()</a> ).</i> <br><br>  Ici, les moteurs dits de mod√®le sont utilis√©s, qui nous fournissent des outils pour une description pratique des mod√®les de texte et des m√©canismes pour y substituer des donn√©es r√©elles. <br><br>  Une telle approche de la mise en ≈ìuvre de View d√©montre non seulement une s√©paration id√©ale des responsabilit√©s, mais fournit √©galement un degr√© √©lev√© de testabilit√©: pour v√©rifier l'exactitude de l'affichage, il nous suffit de comparer la ligne de r√©f√©rence avec la ligne que nous avons obtenue du moteur de mod√®le. <br><br>  Ainsi, en utilisant MVC, nous obtenons une architecture presque parfaite, o√π chacun de ses √©l√©ments a un objectif tr√®s sp√©cifique, une connectivit√© minimale et √©galement un niveau √©lev√© de testabilit√© et de portabilit√©. <br><br>  Quant √† l'approche avec la g√©n√©ration de balisage HTML √† l'aide d'outils serveur, en raison du faible UX, cette approche a progressivement commenc√© √† √™tre remplac√©e par SPA. <br><br><h2>  Backbone et MVP </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Backbone.js a</a> √©t√© l'un des premiers frameworks √† apporter pleinement la logique d'affichage au client.  L'impl√©mentation de Router, Presenter et Model est assez standard, mais la nouvelle impl√©mentation de View m√©rite notre attention: <br><br><img src="https://habrastorage.org/webt/e6/iv/ye/e6ivye6jq6mo0gq_r1re8fua5uq.png" alt="image"><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> UserProfile = Backbone.View.extend({ <span class="hljs-attr"><span class="hljs-attr">tagName</span></span>: <span class="hljs-string"><span class="hljs-string">'div'</span></span>, <span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'user-profile'</span></span>, <span class="hljs-attr"><span class="hljs-attr">events</span></span>: { <span class="hljs-string"><span class="hljs-string">'click .button.edit'</span></span>: <span class="hljs-string"><span class="hljs-string">'openEditDialog'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">openEditDialog</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... }, initialize: function() { this.listenTo(this.model, 'change', this.render); }, template: _.template(` &lt;h2&gt;&lt;%= name %&gt;&lt;/h2&gt; &lt;p&gt;E-mail: &lt;%= email %&gt;&lt;/p&gt; &lt;p&gt; Projects: &lt;% _.each(projects, project =&gt; { %&gt; &lt;a href="/projects/&lt;%= project.id %&gt;"&gt;&lt;%= project.name %&gt;&lt;/a&gt; &lt;% }) %&gt; &lt;/p&gt; &lt;button class="edit"&gt;Edit&lt;/button&gt; `), render: function() { this.$el.html(this.template(this.model.attributes)); } });</span></span></code> </pre><br>  De toute √©vidence, la mise en ≈ìuvre de la cartographie est devenue beaucoup plus compliqu√©e - l'√©coute des √©v√©nements du mod√®le et du DOM, ainsi que la logique de leur traitement, a √©t√© ajout√©e √† la normalisation √©l√©mentaire.  De plus, pour afficher les changements dans l'interface, il est hautement souhaitable de ne pas restituer compl√®tement la vue, mais de faire un travail plus fin avec des √©l√©ments DOM sp√©cifiques (g√©n√©ralement en utilisant jQuery), ce qui n√©cessitait d'√©crire beaucoup de code suppl√©mentaire. <br><br>  En raison de la complication g√©n√©rale de l'impl√©mentation de View, ses tests sont devenus plus compliqu√©s - puisque maintenant nous travaillons directement avec l'arborescence DOM, pour les tests, nous devons utiliser des outils suppl√©mentaires qui fournissent ou √©mulent l'environnement du navigateur. <br><br>  Et les probl√®mes avec la nouvelle impl√©mentation de View ne se sont pas arr√™t√©s l√†: <br><br>  En plus de ce qui pr√©c√®de, il est assez difficile √† utiliser imbriqu√© dans chaque autre vue.  Au fil du temps, ce probl√®me a √©t√© r√©solu avec l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Regions</a> dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Marionette.js</a> , mais avant cela, les d√©veloppeurs devaient inventer leurs propres astuces pour r√©soudre ce probl√®me plut√¥t simple et souvent survenu. <br><br>  Et le dernier.  Les interfaces ainsi d√©velopp√©es √©taient pr√©dispos√©es aux donn√©es d√©synchronis√©es - puisque tous les mod√®les existaient isol√©s au niveau de diff√©rents pr√©sentateurs, puis lors du changement de donn√©es dans une partie de l'interface, ils ne se mettaient g√©n√©ralement pas √† jour dans une autre. <br><br>  Mais, malgr√© ces probl√®mes, cette approche √©tait plus que viable, et le d√©veloppement mentionn√© pr√©c√©demment de Backbone sous la forme de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Marionette</a> peut toujours √™tre appliqu√© avec succ√®s pour le d√©veloppement de SPA. <br><br><h2>  R√©agir et annuler </h2><br>  C'est difficile √† croire, mais au moment de sa sortie initiale, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React.js a</a> suscit√© beaucoup de scepticisme parmi la communaut√© des d√©veloppeurs.  Ce scepticisme √©tait si grand que pendant longtemps le texte suivant a √©t√© publi√© sur le site officiel: <br><br><blockquote>  Donnez-lui cinq minutes <br>  React d√©fie beaucoup de sagesse conventionnelle, et √† premi√®re vue, certaines id√©es peuvent sembler folles. </blockquote><br>  Et cela malgr√© le fait que, contrairement √† la plupart de ses concurrents et pr√©d√©cesseurs, React n'√©tait pas un cadre √† part enti√®re et n'√©tait qu'une petite biblioth√®que pour faciliter l'affichage des donn√©es dans le DOM: <br><br><blockquote>  React est une biblioth√®que JavaScript pour cr√©er des interfaces utilisateur par Facebook et Instagram.  Beaucoup de gens choisissent de penser √† React comme le V dans MVC. <br></blockquote><br>  Le concept principal que React nous offre est le concept d'un composant, qui, en fait, nous offre une nouvelle fa√ßon d'impl√©menter View: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ handleEdit() { <span class="hljs-comment"><span class="hljs-comment">// .. } render() { const { name, email, projects } = this.props; return ( &lt;div className="user-profile"&gt; &lt;h2&gt;{name}&lt;/h2&gt; &lt;p&gt;E-mail: {email}&lt;/p&gt; &lt;p&gt; Projects: { projects.map(project =&gt; &lt;a href="/projects/{project.id}"&gt;{project.name}&lt;/a&gt;) } &lt;/p&gt; &lt;button onClick={this.handleEdit}&gt;Edit&lt;/button&gt; &lt;/div&gt; ); } }</span></span></code> </pre> <br>  React √©tait incroyablement agr√©able √† utiliser.  Parmi ses avantages ind√©niables figuraient √† ce jour: <br><br>  1) <b>D√©claration et r√©activit√©</b> .  Il n'est plus n√©cessaire de mettre √† jour manuellement le DOM lors de la modification des donn√©es affich√©es. <br><br>  2) <b>La composition des composants</b> .  Construire et explorer l'arborescence de View est devenu une action compl√®tement √©l√©mentaire. <br><br>  Mais, malheureusement, React a un certain nombre de probl√®mes.  L'un des plus importants est le fait que React n'est pas un framework √† part enti√®re et, par cons√©quent, ne nous offre aucun type d'architecture d'application ou d'outils √† part enti√®re pour sa mise en ≈ìuvre. <br><br>  Pourquoi est-ce √©crit en d√©fauts?  Oui, parce que maintenant React est la solution la plus populaire pour d√©velopper des applications Web ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">preuve</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une autre preuve</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">et une autre preuve</a> ), c'est un point d'entr√©e pour les nouveaux d√©veloppeurs front-end, mais en m√™me temps n'offre ni ne promeut aucun l'architecture, ni les approches et les meilleures pratiques pour la construction d'applications compl√®tes.  De plus, il invente et promeut ses propres approches personnalis√©es comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HOC</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Hooks</a> , qui ne sont pas utilis√©es en dehors de l'√©cosyst√®me React.  Par cons√©quent, chaque application React r√©sout les probl√®mes typiques √† sa mani√®re et ne le fait g√©n√©ralement pas de la mani√®re la plus correcte. <br><br>  Ce probl√®me peut √™tre d√©montr√© √† l'aide de l'une des erreurs les plus courantes des d√©veloppeurs React, qui consiste en l'abus de composants: <br><br><blockquote>  Si le seul outil dont vous disposez est un marteau, tout commence √† ressembler √† un clou. </blockquote><br>  Avec leur aide, les d√©veloppeurs r√©solvent une gamme de t√¢ches compl√®tement impensable qui vont bien au-del√† de la port√©e de la visualisation des donn√©es.  En fait, avec l'aide de composants, ils impl√©mentent absolument tout - des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">requ√™tes multim√©dias</a> du CSS au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">routage</a> . <br><br><h2>  React et Redux </h2><br>  Le r√©tablissement de l'ordre dans la structure des applications React a √©t√© grandement facilit√© par l'apparition et la vulgarisation de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux</a> .  Si React est une vue de MVP, Redux nous a propos√© une variante assez pratique de Model. <br><br>  L'id√©e principale de Redux est le transfert de donn√©es et la logique de travailler avec elles dans un seul entrep√¥t de donn√©es centralis√© - le soi-disant magasin.  Cette approche r√©sout compl√®tement le probl√®me de duplication et de d√©synchronisation des donn√©es, dont nous avons parl√© un peu plus t√¥t, et offre √©galement de nombreuses autres commodit√©s, qui incluent, entre autres, la facilit√© d'√©tudier l'√©tat actuel des donn√©es dans l'application. <br><br>  Une autre caract√©ristique tout aussi importante est le mode de communication entre le Store et les autres parties de l'application.  Au lieu d'acc√©der directement au magasin ou √† ses donn√©es, il nous est propos√© d'utiliser les soi-disant actions (objets simples d√©crivant l'√©v√©nement ou la commande), qui fournissent un faible niveau de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">couplage l√¢che</a> entre le magasin et la source de l'√©v√©nement, augmentant ainsi consid√©rablement le degr√© de maintenabilit√© du projet.  Ainsi, Redux oblige non seulement les d√©veloppeurs √† utiliser des approches architecturales plus correctes, mais vous permet √©galement de profiter de divers avantages de la recherche d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©v√©nements</a> - maintenant, dans le processus de d√©bogage, nous pouvons facilement afficher l'historique des actions dans l'application, leur impact sur les donn√©es et, si n√©cessaire, toutes ces informations peuvent √™tre export√©es , ce qui est √©galement extr√™mement utile lors de l'analyse des erreurs de production. <br><br>  Le sch√©ma g√©n√©ral de l'application utilisant React / Redux peut √™tre repr√©sent√© comme suit: <br><br><img src="https://habrastorage.org/webt/rw/x6/8f/rwx68f3sxe_rrnh609ul6rmgrsw.png" alt="image"><br><br>  Les composants React sont toujours responsables de l'affichage des donn√©es.  Id√©alement, ces composants doivent √™tre propres et fonctionnels, mais si n√©cessaire, ils peuvent bien avoir un √©tat local et une logique associ√©e (par exemple, pour impl√©menter le masquage / affichage d'un √©l√©ment sp√©cifique ou le pr√©traitement de base d'une action utilisateur). <br><br>  Lorsqu'un utilisateur effectue une action dans l'interface, le composant appelle simplement la fonction de gestionnaire correspondante, qu'il re√ßoit de l'ext√©rieur avec les donn√©es √† afficher. <br><br>  Les composants dits conteneurs agissent en tant que pr√©sentateurs pour nous - ce sont eux qui exercent un contr√¥le sur les composants d'affichage et leur interaction avec les donn√©es.  Ils sont cr√©√©s √† l'aide de la fonction de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">connexion</a> , qui √©tend les fonctionnalit√©s du composant qui lui est transmis, en ajoutant un abonnement pour modifier les donn√©es dans le magasin et en nous permettant de d√©terminer les donn√©es et les gestionnaires d'√©v√©nements qui doivent lui √™tre transmis. <br><br>  Et si tout est clair avec les donn√©es ici (nous mappons simplement les donn√©es du stockage aux ¬´accessoires¬ª attendus), alors je voudrais m'attarder sur les gestionnaires d'√©v√©nements plus en d√©tail - ils envoient non seulement des actions au magasin, mais peuvent √©galement contenir une logique suppl√©mentaire pour le traitement de l'√©v√©nement - par exemple, inclure la cr√©ation de branches, effectuer des redirections automatiques et effectuer tout autre travail sp√©cifique au pr√©sentateur. <br><br>  Un autre point important concernant les composants de conteneur: du fait qu'ils sont cr√©√©s via le HOC, les d√©veloppeurs d√©crivent assez souvent les composants d'affichage et les composants de conteneur dans un seul module et exportent uniquement le conteneur.  Ce n'est pas la bonne approche, car pour la possibilit√© de tester et de r√©utiliser le composant d'affichage, il doit √™tre compl√®tement s√©par√© du conteneur et de pr√©f√©rence retir√© dans un fichier s√©par√©. <br><br>  Eh bien, la derni√®re chose que nous n'avons pas encore envisag√©e est le magasin.  Il nous sert d'impl√©mentation plut√¥t sp√©cifique du mod√®le et se compose de plusieurs composants: State (un objet contenant toutes nos donn√©es), Middleware (un ensemble de fonctions qui pr√©traitent toutes les Actions re√ßues), Reducer (une fonction qui modifie les donn√©es dans State) et certains ou un gestionnaire d'effets secondaires charg√© d'ex√©cuter des op√©rations asynchrones (acc√®s √† des syst√®mes externes, etc.). <br><br>  Le probl√®me le plus courant ici est la forme de notre √âtat.  Officiellement, Redux ne nous impose aucune restriction et ne donne aucune recommandation quant √† ce que devrait √™tre cet objet.  Les d√©veloppeurs peuvent y stocker absolument toutes les donn√©es (y compris l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©tat des formulaires</a> et des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">informations du routeur</a> ), ces donn√©es peuvent √™tre de tout type (il n'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas interdit</a> de stocker m√™me des fonctions et des instances d'objets) et ont n'importe quel niveau d'imbrication.  En fait, cela conduit √† nouveau au fait que d'un projet √† l'autre, nous obtenons une approche compl√®tement diff√©rente de l'utilisation de l'√âtat, ce qui provoque une fois de plus une certaine confusion. <br><br>  Pour commencer, nous convenons que nous n'avons pas √† conserver absolument toutes les donn√©es d'application dans l'√âtat - cela est clairement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">indiqu√© par la documentation</a> .  Bien que le stockage d'une partie des donn√©es √† l'int√©rieur de l'√©tat des composants cr√©e certains inconv√©nients lors de la navigation dans l'historique des actions pendant le processus de d√©bogage (l'√©tat interne des composants reste toujours inchang√©), le transfert de ces donn√©es √† l'√âtat cr√©e encore plus de difficult√©s - cela augmente consid√©rablement sa taille et n√©cessite la cr√©ation de plus Actions et r√©ducteurs. <br><br>  En ce qui concerne le stockage de toute autre donn√©e locale dans State, nous avons g√©n√©ralement affaire √† une configuration d'interface g√©n√©rale, qui est un ensemble de paires cl√©-valeur.  Dans ce cas, nous pouvons facilement le faire avec un objet simple et un r√©ducteur pour celui-ci. <br><br>  Et si nous parlons de stockage de donn√©es provenant de sources externes, alors sur la base du fait que dans le d√©veloppement d'interfaces dans la grande majorit√© des cas, nous avons affaire √† un CRUD classique, alors pour stocker des donn√©es √† partir du serveur, il est logique de traiter l'√âtat comme un SGBDR: les cl√©s sont le nom et derri√®re eux se trouvent des tableaux d'objets charg√©s ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sans imbrication</a> ) et des informations facultatives (par exemple, le nombre total d'enregistrements sur le serveur pour cr√©er la pagination).  La forme g√©n√©rale de ces donn√©es doit √™tre la plus uniforme possible - cela nous permettra de simplifier la cr√©ation de r√©ducteurs pour chaque type de ressource: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getModelReducer = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modelName</span></span></span><span class="hljs-function"> =&gt;</span></span> (models = [], action) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isModelAction = modelActionTypes.includes(action.type); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModelAction &amp;&amp; action.modelName === modelName) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'ADD_MODELS'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> collection.add(action.models, models); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'CHANGE_MODEL'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> collection.change(action.model, models); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'REMOVE_MODEL'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> collection.remove(action.model, models); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'RESET_STATE'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> models; };</code> </pre> <br>  Eh bien, un autre point que je voudrais aborder dans le contexte de l'utilisation de Redux est la mise en ≈ìuvre des effets secondaires. <br><br>  Tout d'abord, oubliez compl√®tement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux Thunk</a> - la transformation des actions propos√©es par lui en fonctions avec effets secondaires, bien que ce soit une solution de travail, mais elle m√©lange les concepts de base de notre architecture et r√©duit √† n√©ant ses avantages.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux Saga</a> nous offre une approche beaucoup plus correcte de la mise en ≈ìuvre des effets secondaires, bien qu'il y ait des questions concernant sa mise en ≈ìuvre technique. <br><br>  Ensuite - essayez d'unifier autant que possible vos effets secondaires qui acc√®dent au serveur.  Comme le formulaire d'√©tat et les r√©ducteurs, nous pouvons presque toujours impl√©menter la logique de cr√©ation de requ√™tes vers le serveur √† l'aide d'un seul gestionnaire.  Par exemple, dans le cas de l'API RESTful, cela peut √™tre r√©alis√© en √©coutant des actions g√©n√©ralis√©es comme: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'CREATE_MODEL'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: { <span class="hljs-attr"><span class="hljs-attr">model</span></span>: <span class="hljs-string"><span class="hljs-string">'reviews'</span></span>, <span class="hljs-attr"><span class="hljs-attr">attributes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span> } } }</code> </pre><br>  ... et en cr√©ant sur eux les m√™mes requ√™tes HTTP g√©n√©ralis√©es: <br><br><pre> <code class="plaintext hljs">POST /api/reviews { title: '...', text: '...' }</code> </pre> <br>  En suivant consciemment tous les conseils ci-dessus, vous pouvez obtenir, sinon une architecture id√©ale, au moins pr√®s d'elle. <br><br><h2>  Un avenir radieux </h2><br>  Le d√©veloppement moderne des interfaces Web a vraiment franchi une √©tape importante et nous vivons maintenant √† une √©poque o√π une partie importante des principaux probl√®mes ont d√©j√† √©t√© r√©solus d'une mani√®re ou d'une autre.  Mais cela ne signifie pas du tout qu'√† l'avenir il n'y aura pas de nouvelles r√©volutions. <br><br>  Si vous essayez de regarder vers l'avenir, nous verrons tr√®s probablement ce qui suit: <br><br>  <b>1. Approche par composants sans JSX</b> <br><br>  Le concept de composants s'est av√©r√© extr√™mement efficace et, tr√®s probablement, nous verrons leur vulgarisation encore plus grande.  Mais JSX lui-m√™me peut et doit mourir.  Oui, c'est vraiment tr√®s pratique √† utiliser, mais, n√©anmoins, ce n'est ni un standard g√©n√©ralement accept√© ni un code JS valide.  Les biblioth√®ques d'impl√©mentation d'interfaces, aussi performantes soient-elles, ne doivent pas inventer de nouvelles normes, qui doivent ensuite √™tre impl√©ment√©es √† maintes reprises dans toutes les bo√Ætes √† outils de d√©veloppement possibles. <br><br>  <b>2. Conteneurs d'√âtat sans Redux</b> <br><br>  L'utilisation d'un entrep√¥t de donn√©es centralis√©, propos√© par Redux, a √©galement √©t√© une solution extr√™mement r√©ussie et devrait √† l'avenir devenir une sorte de norme dans le d√©veloppement des interfaces, mais son architecture interne et sa mise en ≈ìuvre pourraient bien subir certaines modifications et simplifications. <br><br>  <b>3. Am√©lioration de l'interchangeabilit√© des biblioth√®ques</b> <br><br>  Je crois qu'avec le temps, la communaut√© des d√©veloppeurs front-end r√©alisera les avantages de maximiser l'interchangeabilit√© des biblioth√®ques et cessera de s'enfermer dans leurs petits √©cosyst√®mes.  Tous les composants des applications - routeurs, conteneurs d'√©tat, etc. - devraient √™tre extr√™mement universels et leur remplacement ne devrait pas n√©cessiter une refactorisation en masse ou une r√©√©criture de l'application √† partir de z√©ro. <br><br><h2>  Pourquoi tout √ßa? </h2><br>  Si nous essayons de g√©n√©raliser les informations pr√©sent√©es ci-dessus et de les r√©duire √† une forme plus simple et plus courte, alors nous obtenons quelques points assez g√©n√©raux: <br><br>  - Pour r√©ussir le d√©veloppement d'applications, la connaissance du langage et du framework ne suffit pas, il convient de pr√™ter attention aux √©l√©ments th√©oriques g√©n√©raux: architecture d'application, meilleures pratiques et mod√®les de conception. <br><br>  "La seule constante est le changement."  Les approches du travail du sol et du d√©veloppement continueront de changer, de sorte que les grands projets √† longue dur√©e de vie doivent accorder une attention appropri√©e √† l'architecture - sans elle, l'introduction de nouveaux outils et pratiques sera extr√™mement difficile. <br><br>  Et c'est probablement tout pour moi.  Un grand merci √† tous ceux qui ont trouv√© la force de lire l'article jusqu'au bout.  Si vous avez des questions ou des commentaires, je vous invite √† commenter. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456794/">https://habr.com/ru/post/fr456794/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456774/index.html">Ce que je manque √† Java apr√®s avoir travaill√© avec Kotlin / Scala</a></li>
<li><a href="../fr456780/index.html">9 fa√ßons de stimuler l'efficacit√© du d√©veloppeur d'applications mobiles</a></li>
<li><a href="../fr456782/index.html">Conception orient√©e mod√®le - comment ne pas r√©p√©ter Tchernobyl</a></li>
<li><a href="../fr456790/index.html">R√©sum√© des nouvelles de PostgreSQL. Num√©ro 16</a></li>
<li><a href="../fr456792/index.html">D√©ployer le cluster Kubernetes sur OpenStack avec Kubespray</a></li>
<li><a href="../fr456796/index.html">Svalbard - nouveau nom pour le projet Have I Been Pwned avant la vente</a></li>
<li><a href="../fr456798/index.html">Tutoriels SDL 2: Le√ßon 5 - Textures</a></li>
<li><a href="../fr456804/index.html">Suivez l'argent: comment le groupe RTM a commenc√© √† cacher les adresses des serveurs C&C dans un portefeuille crypt√©</a></li>
<li><a href="../fr456806/index.html">Un robot de tous les soucis</a></li>
<li><a href="../fr456808/index.html">Comment am√©liorer les performances des applications Web frontales: cinq conseils</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>