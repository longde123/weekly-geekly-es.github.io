<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😓 💃🏾 👨🏾‍🍳 Geständnisse eines Testers: Wie ich in einem Konkurrenten IDS stöberte 👩🏾‍🤝‍👨🏼 〽️ 🌼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kein sich selbst respektierendes UTM-Netzwerksicherheits-Gateway kann ohne ein Intrusion Detection System (IDS) auskommen. Eine andere Sache ist, dass...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Geständnisse eines Testers: Wie ich in einem Konkurrenten IDS stöberte</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/smart_soft/blog/421893/">  Kein sich selbst respektierendes UTM-Netzwerksicherheits-Gateway kann ohne ein Intrusion Detection System (IDS) auskommen.  Eine andere Sache ist, dass der Hersteller häufig die Option für ein Häkchen angibt, um mit der Konkurrenz mithalten zu können.  Ich weiß aus meiner Erfahrung als Tester, wie dies geschieht - es scheint IDS zu geben, aber tatsächlich ist es nicht gut.  Als mir angeboten wurde, eine relativ kostengünstige UTM-Hardware zu testen, schlug ich daher vor, zunächst die OWL zu „vertreiben“. <br><br><img src="https://habrastorage.org/webt/om/x9/vb/omx9vbdtha8doiwq72xhixgx1ps.png"><br>  <i>UTM-Teil des Verkehrsinspektors Next Generation S100 und Cisco 2960G Switch</i> <br><br><a name="habracut"></a><br>  Wenn Sie Erfahrung mit IDS haben, ist es interessant, dies in den Kommentaren zum Artikel zu lesen.  Es ist ratsam - nicht über teure Hardware (es ist klar, dass es einigen Cisco NGFW für eine Million gut geht), sondern über Lösungen, die günstiger sind.  Ich denke, Lokalka-Administratoren und potenzielle Benutzer von Netzwerk-Gateways werden gespannt sein, wer mit IDS arbeitet und ob es sich lohnt, zu einem hohen Preis zu kaufen, wenn Sie nach dem Tanzen mit einem Tamburin dasselbe für weniger Geld erreichen können. <br><br>  In diesem Test geht es um das S100-Modell - den günstigsten Preis in der Traffic Inspector Next Generation-Reihe (Zahlen bedeuten, dass es für 100 Teilnehmer ausgelegt ist).  Hier ist ihre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beschreibung auf der offiziellen Website &gt;&gt;&gt;</a> .  Kurz gesagt, die Hardware enthält beispielsweise einen Netzwerkfilter, ein VPN, einen Ressourcenblocker und natürlich IDS. <br><br>  Ich schlage eine einfache Testmethode vor - wir überprüfen den Durchsatz und bauen die Abhängigkeit der Anzahl verworfener Pakete von der Verkehrsintensität in Schritten von 50, 100, 150 und 200 Mbit / s auf.  Warum machen wir solche Intervalle?  Wir beginnen mit 100 Mbit / s - der beliebtesten Client-Anfrage - und verschieben Plus und Minus, um zu sehen, was in mehr oder weniger geladenen Modi sowie im Extremmodus 200 Mbit / s passiert. <br><br>  Die Lebenserfahrung zeigt mir, dass der S100 bei allen aktiven Regeln möglicherweise nicht zieht. Daher empfehle ich, das beschriebene Verfahren in drei Modi auszuführen: zuerst, wenn alle Regeln aktiv sind, dann mit ausgeschaltetem Teil der Regeln (nennen wir es Gruppe Nr. 1) und schließlich nur, wenn er aktiv ist nur ein paar Regeln (nennen wir es Gruppe Nr. 2).  Wir bilden folgende Regelgruppen: <br><br>  - Gruppe Nr. 0: Nun, das ist verständlich, alle Regeln ohne Ausnahme. <br>  - Gruppe Nr. 1: Regelgruppe "Emerging Threads" (Ich kenne die Regeln seit dem Testen von IDS Snort, mit Ausnahme der Regeln für Emerging Games). <br>  - Gruppe Nr. 2: Eine Gruppe von Regeln, die ich für IDS als einfach bindend betrachte (siehe unten), einschließlich der Hinzufügung von P2P-Regeln, da ich aus eigener Erfahrung weiß, wie große Unternehmen sich negativ auf die Tatsache auswirken, dass ihre Mitarbeiter Unternehmen aktiv nutzen Netzwerk zum Herunterladen Ihrer Lieblingssendungen. <br><br>  Das Testen ist mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dienstprogramm tcpreplay möglich</a> .  Mit diesem Dienstprogramm können Sie aufgezeichneten Netzwerkverkehr mit einer bestimmten Geschwindigkeit wiedergeben.  Befehl: <b>tcpreplay –i &lt;Schnittstelle&gt; -l 0 testTI.pcap</b> .  Die Datei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">testTI.pcap</a> enthält 1 146 313 Pakete (wir wählen ein solches Volume so, dass einerseits gute Statistiken vorliegen, andererseits die Zeit zum „Ausführen“ nicht zu lang wäre, in unserem Fall nicht mehr als 15 Minuten).  Darüber hinaus starten wir, wie gesagt, einen Torrent-Tracker. <br><br>  Prüfstandslayout: <br><br><img src="https://habrastorage.org/webt/bx/b-/qr/bxb-qrz2b5eaz-jhjihskbabadq.png"><br><br>  Wenn jemand Fragen zur Testmethode hat, bin ich bereit, diese in den Kommentaren zu beantworten. <br><br>  Also die Ergebnisse. <br><br>  <b>Gruppe 0</b> <br><br>  Beim Testen eines vollständigen Satzes werden alle Regeln geladen, von denen 30 bis 305 vorhanden sind. <br><br>  Beim Testen verwenden wir die Standard-IDS-Einstellungen: <br><br><img src="https://habrastorage.org/webt/kl/2b/w9/kl2bw9dxrpimxfk_7lpbjzzen_i.png"><br><br>  Wir beginnen mit 100 Mbit / s zu testen und verstehen, dass das Stück Eisen kaum ziehen kann: Von 114.000 Paketen werden 109.000 weggeworfen!  Es macht also keinen Sinn, bei 150 und noch mehr bei 200 Mb / s zu testen.  Im Gegenteil, ich schlage vor, dem Gerät eine Chance zu geben und einen zusätzlichen Test mit 10 Mb / s durchzuführen.  Das Ergebnis in der Tabelle: <br><br><img src="https://habrastorage.org/webt/vp/sx/it/vpsxitlg8-miyc34mch3w_r4v2m.png"><br><br>  Hinweis: <br><br>  kernel_packets - gesendete Pakete; <br>  kernel_drops - verworfene Pakete.  Wie Sie sehen können, treten bei Standardeinstellungen und einem vollständigen Regelsatz große Paketverluste auf (&gt; 30% im Vergleich zu kernel_packets).  Hoffen wir, dass die Optimierung der Regeln für Einstellungen die Situation ändert. <br>  decoder_packets - die Anzahl der Pakete, die das System korrekt verarbeitet hat; <br>  detect_alerts - Anzahl der erkannten Angriffe.  Der Großteil der Angriffe ist vom Typ Fragmented Package, es wurden jedoch auch die Torrent Tracker Detection-Angriffe identifiziert. <br><br>  <b>Gruppennummer 1</b> <br><br>  Offensichtlich ist die Hardware nicht für die Verwendung als vollwertiges, leistungsstarkes IDS optimiert, aber es gibt Handlungsspielraum, nämlich die Möglichkeit, den Suchmechanismus für Routen zu ändern, den Download von Paketinhalten (Nutzdaten) zu deaktivieren und Regelgruppen und bestimmte Paketgruppen zu deaktivieren.  Ein kleines Experimentieren mit den Einstellungen - und wir kommen zu der Option, die ich in der folgenden Abbildung vorstelle. <br><br><img src="https://habrastorage.org/webt/df/l_/hb/dfl_hbxxcotwty1uf6bfmzwrs6i.jpeg"><br><br>  Die Liste der aktiven Regeln, die wir verlassen: <br><br><img src="https://habrastorage.org/webt/a4/nv/ls/a4nvls33gssilc3plyf-kgatbt8.png"><br><br>  Testergebnis: <br><br><img src="https://habrastorage.org/webt/ek/tq/6p/ektq6poxykowllmgy2xtbcnwehi.png"><br><br>  Wie Sie sehen, hat sich das Bild mit dieser Regelgruppe erheblich verbessert (der Prozentsatz der verworfenen Pakete hat sich mehrmals verringert).  Ein Angriff wie "Erkennen eines Torrent-Trackers" wurde erfolgreich erkannt ("Fragmentierte Paket" -Angriffe wurden nicht mehr angezeigt). <br><br>  <b>Gruppennummer 2</b> <br><br>  Die Einstellungen sind gleich.  Liste der aktiven Regeln: <br><br><img src="https://habrastorage.org/webt/vi/g3/rd/vig3rdsn16jezodfjmaiavvymh8.png"><br><br>  Das Ergebnis in der Tabelle: <br><br><img src="https://habrastorage.org/webt/dc/yw/8a/dcyw8ak_y7bhtj0a3uqyz3lmiu0.png"><br>  <i>Hier ist das Bild der Bearbeitung von Paketen noch besser, was zu erwarten ist.</i> <br><br>  <b>Zusammenfassung</b> <br><br>  Die endgültige Ergebnistabelle, ausgedrückt als Prozentsatz von kernel_drops relativ zu kernel_packets, ist unten dargestellt: <br><br><img src="https://habrastorage.org/webt/pl/fi/j9/plfij9pmoyi6nllbdkjzjquxlcu.png"><br><br>  Grafisch ist das Ergebnis wie folgt: <br><br><img src="https://habrastorage.org/webt/n6/ig/7b/n6ig7bt4vdkfeiyftkivflro9k8.png"><br><br>  Wie Sie sehen, wirkt sich die Anzahl der aktiven Regeln und Einstellungen direkt auf die Effizienz aus.  Es ist nicht sinnvoll, die Einstellungen auf das Maximum und alle Regeln gleichzeitig einzuschalten - die Verluste gehen sogar um 10 Mb / s sofort aus dem Rahmen.  In optimierten Modi fühlt sich die Hardware bis zu 100 Mbit / s normal an, aber die Verluste nehmen bei intensiverem Datenverkehr stark zu.  Für die Verwendung im Büro reichen jedoch 100 Mbit / s aus.  Wenn Sie das Gerät mit dieser Geschwindigkeit fahren und die Regeln auswählen, können Sie ein recht zufriedenstellendes IDS erzielen. <br><br>  Um alle Regeln nutzen zu können, sind möglicherweise Verbesserungen erforderlich, um den pf_ring-Mechanismus (https://www.ntop.org/products/packet-capture/pf_ring/) als Mechanismus zum Übertragen eines Pakets aus dem Netzwerkschnittstellenpuffer in den Benutzerbereich zu verwenden.  Um dies zu tun, müssen Sie mehrere Instanzen von Suricata verwenden, die natürlich Ressourcen aus anderen Prozessen beanspruchen, aber vielleicht ist das Spiel die Kerze wert. <br><br>  Ich wiederhole, dass meiner Meinung nach der Hauptzweck des getesteten Geräts eine Firewall ist und die IDS-Option eine Hilfsoption ist.  Ehrlich gesagt war ich bereit für die Tatsache, dass die Hardware ausfallen wird.  Es stellte sich heraus, dass mit einer gewissen Guttawahrnehmung des Systemadministrators das Intrusion Detection-System im S100 voll funktionsfähig ist. <br><br>  PS Wie oben erwähnt, fordere ich die Leser auf, über ihre Erfahrungen mit der Verwendung von IDS in relativ kostengünstigen Lösungen zu schreiben. <br><br>  Der PPS-Test wird im Konto des Herstellers veröffentlicht, da ich mich nicht selbst "glänzen" möchte.  Trotzdem bin ich bereit, alle Fragen und Debatten in den Kommentaren zu beantworten, aber auch nicht in meinem eigenen Namen :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de421893/">https://habr.com/ru/post/de421893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de421879/index.html">BottomAppBar-Implementierung. Teil 1: Materialkomponenten für Android</a></li>
<li><a href="../de421883/index.html">Videoberichte von CocoaHeads @ FunCorp mitap</a></li>
<li><a href="../de421887/index.html">Die Verzeichnisstruktur für das Projekt (insbesondere auf Flask)</a></li>
<li><a href="../de421889/index.html">Skillbox Friday Webinare: Entwicklung für Anfänger</a></li>
<li><a href="../de421891/index.html">Hintergrund: 4-tägige Arbeitswoche - eine echte Chance oder eine Fantasie?</a></li>
<li><a href="../de421895/index.html">Stoppen Sie die Entwicklung von Software mit einem gewissen Spielraum</a></li>
<li><a href="../de421897/index.html">Red Hogwarts. Serie 10. Studenten - Metallurge</a></li>
<li><a href="../de421899/index.html">Tester's Way: Wo fange ich an, Automatisierung zu lernen?</a></li>
<li><a href="../de421901/index.html">Versuchen Sie nicht, die Probleme von morgen vorherzusagen</a></li>
<li><a href="../de421903/index.html">TiKV - verteilte Schlüsselwertdatenbank für Cloud Native</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>