<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👀 🕗 🛏️ Kami mengumumkan dukungan untuk modul ECMAScript di Node.js 🏂🏼 🍨 🚠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Node.js 13.2.0 dilengkapi dengan dukungan ECMAScript untuk modul yang dikenal dengan sintaksis impor dan ekspornya. Sebelumnya, fungsi ini berada di b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami mengumumkan dukungan untuk modul ECMAScript di Node.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477168/"><p> Node.js 13.2.0 dilengkapi dengan dukungan <a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/" rel="nofollow">ECMAScript</a> untuk <a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/" rel="nofollow">modul yang</a> dikenal dengan sintaksis impor dan ekspornya.  Sebelumnya, fungsi ini berada di belakang <code>--experimental-modules</code> , yang tidak lagi diperlukan.  Namun, implementasinya masih eksperimental dan dapat berubah. </p><br><p>  <em>Dari penerjemah: fitur yang ditunggu-tunggu ini akhirnya akan memungkinkan kita untuk menggunakan sintaksis modular standar yang sudah tersedia di peramban modern, dan sekarang juga di Node.js tanpa flag dan transpiler</em> </p><a name="habracut"></a><br><h2 id="aktivaciya">  Aktivasi </h2><br><p>  Node.js akan memproses kode sebagai modul ES dalam kasus berikut: </p><br><ul><li>  File dengan ekstensi <code>.mjs</code> </li><li>  File dengan ekstensi <code>.js</code> atau tanpa ekstensi sama sekali, asalkan paket <code>package.json</code> paling dekat dengannya berisi nilai <code>"type": "module"</code> </li><li>  Kode melewati argumen <code>—-eval</code> atau STDIN, bersama dengan <code>—-input-type=module</code> </li></ul><br><p>  Dalam semua kasus lain, kode tersebut akan dianggap sebagai CommonJS.  Ini berlaku untuk file <code>.js</code> tanpa <code>"type": "module"</code> di <code>package.json</code> terdekat dan kode yang melewati baris perintah tanpa menentukan <code>--input-type</code> .  Ini dilakukan untuk menjaga kompatibilitas ke belakang.  Namun, karena kita sekarang memiliki dua jenis modul, CommonJS dan ES, akan lebih baik untuk menentukan jenis modul secara eksplisit. </p><br><p>  Anda dapat secara eksplisit menandai kode Anda sebagai CommonJS dengan fitur-fitur berikut: </p><br><ul><li>  File dengan ekstensi <code>.cjs</code> </li><li>  File dengan ekstensi <code>.js</code> atau tanpa ekstensi sama sekali, dengan ketentuan bahwa paket parent terdekat. <code>package.json</code> berisi nilai <code>"type": "“commonjs”"</code> </li><li>  Kode dikirimkan melalui argumen <code>--eval</code> atau STDIN dengan flag eksplisit <code>--input-type=commonjs</code> </li></ul><br><p>  Untuk mempelajari lebih lanjut tentang fitur-fitur ini, lihat bagian dokumentasi <a href="https://nodejs.org/api/esm.html" rel="nofollow">"Cakupan Paket dan Ekstensi File"</a> dan <a href="https://nodejs.org/api/esm.html" rel="nofollow"><code>  --input-type</code></a> </p><br><h2 id="sintaksis-import-i-export">  Impor dan ekspor sintaksis </h2><br><p>  Dalam konteks modul ES, Anda dapat menggunakan <code>import</code> , menunjuk ke file Javascript lainnya.  Mereka dapat ditentukan dalam salah satu format berikut: </p><br><ul><li>  URL relatif: <code>"./file.mjs"</code> </li><li>  URL absolut <code>file://</code> c <code>file://</code> , misalnya, <code>"file:///opt/app/file.mjs"</code> </li><li>  Nama Paket: <code>"es-module-package"</code> </li><li>  Path ke file di dalam paket: <code>"es-module-package/lib/file.mjs"</code> </li></ul><br><p>  Dalam impor, Anda dapat menggunakan default ( <code>import _ from "es-module-package"</code> ) dan nilai-nilai yang disebut ( <code>import { shuffle } from "es-module-package"</code> ), serta mengimpor semuanya sebagai satu namespace ( <code>import * as fs from "fs"</code> ).  Semua paket Node.js bawaan, seperti <code>fs</code> atau <code>path</code> , mendukung ketiga jenis impor. </p><br><p>  Impor yang mengarah ke kode CommonJS (yaitu, semua JavaScript saat ini yang ditulis untuk Node.js <a href="https://nodejs.org/api/modules.html" rel="nofollow"><code> require</code> <code>module.exports</code> dan <code>module.exports</code></a> ) hanya dapat menggunakan opsi default ( <code>import _ from "commonjs-package"</code> ). </p><br><p>  Mengimpor format file lain seperti JSON dan WASM tetap bersifat eksperimental, dan masing-masing memerlukan flag <a href="https://nodejs.org/api/esm.html" rel="nofollow"><code>--experimental-json-modules</code></a> dan <a href="https://nodejs.org/api/esm.html" rel="nofollow"><code>--experimental-wasm-modules</code></a> .  Namun, Anda dapat mengunduh file-file ini menggunakan <a href="https://nodejs.org/api/modules.html" rel="nofollow"><code>module.createRequire</code></a> API, yang tersedia tanpa flag tambahan. </p><br><p>  Dalam modul ES Anda, Anda dapat menggunakan kata kunci ekspor untuk mengekspor nilai default dan bernama. </p><br><p>  Ekspresi dinamis dengan <code>import()</code> dapat digunakan untuk memuat modul ES baik dari kode CommonJS atau ES.  Perhatikan bahwa <code>import()</code> tidak mengembalikan modul tetapi janjinya (Janji). </p><br><p>  <a href="https://nodejs.org/api/esm.html" rel="nofollow"><code>import.meta.url</code></a> tersedia di modul, yang berisi URL absolut dari modul ES saat ini. </p><br><h2 id="fayly-i-novoe-pole-type-v-packagejson">  File dan bidang "ketik" baru di package.json </h2><br><p>  Tambahkan <code>"type": "module"</code> ke package.json dari proyek Anda, dan Node.js akan mulai menganggap semua file <code>.js</code> proyek Anda sebagai modul ES. </p><br><p>  Jika beberapa file proyek Anda masih menggunakan CommonJS dan Anda tidak dapat memigrasi seluruh proyek sekaligus, Anda bisa menggunakan ekstensi <code>.cjs</code> untuk kode ini, atau meletakkannya di direktori terpisah dan menambahkan <code>package.json</code> berisi <code>{ "type": "commonjs" }</code> , yang memberi tahu Node.js bahwa itu harus diperlakukan sebagai CommonJS. </p><br><p>  Untuk setiap file yang diunduh, Node.js akan melihat <code>package.json</code> di direktori yang berisi itu, lalu naik satu tingkat, dan seterusnya hingga mencapai direktori root.  Mekanisme ini mirip dengan cara <a href="https://babeljs.io/docs/en/config-files" rel="nofollow"><code> Babel  .babelrc</code> file <code> Babel  .babelrc</code></a> .  Pendekatan ini memungkinkan Node.js untuk menggunakan <code>package.json</code> sebagai sumber dari berbagai metadata tentang paket dan konfigurasi, mirip dengan cara kerjanya di Babel dan alat-alat lainnya. </p><br><p>  Kami merekomendasikan bahwa semua pengembang paket menentukan bidang <code>type</code> , bahkan jika <code>commonjs</code> ditulis di <code>commonjs</code> . </p><br><h2 id="vhodnye-tochki-paketa-i-pole-exports-v-packagejson">  Poin entri paket dan bidang "ekspor" di package.json </h2><br><p>  Sekarang kami memiliki dua bidang untuk menentukan <a href="https://nodejs.org/api/esm.html" rel="nofollow">titik masuk</a> ke dalam paket: <code>main</code> dan <a href="https://nodejs.org/api/esm.html" rel="nofollow"><code>exports</code></a> .  Bidang <code>main</code> didukung oleh semua versi Node.js, tetapi kemampuannya terbatas: dengan itu Anda hanya dapat menetapkan satu titik masuk utama dalam paket.  Bidang <code>exports</code> baru juga memungkinkan Anda untuk menentukan titik masuk utama, serta jalur tambahan.  Ini memberikan enkapsulasi tambahan untuk paket-paket di mana hanya jalur <code>exports</code> eksplisit yang tersedia untuk impor dari luar paket.  <code>exports</code> berlaku untuk kedua jenis modul, CommonJS dan ES, tidak peduli apakah mereka digunakan melalui permintaan atau <code>import</code> . </p><br><p>  Fungsi ini akan memungkinkan impor tipe <code>pkg/feature</code> untuk menunjuk ke jalur nyata seperti <code>./node_modules/pkg/esm/feature.js</code> .  Juga, Node.js akan melempar kesalahan jika impor merujuk ke <code>pkg/esm/feature.js</code> yang tidak ditentukan dalam <code>exports</code> . </p><br><p>  Tambahan, masih eksperimental, fitur, <a href="https://nodejs.org/api/esm.html" rel="nofollow">ekspor bersyarat</a> menyediakan kemampuan untuk mengekspor file yang berbeda untuk lingkungan yang berbeda.  Ini akan memungkinkan paket untuk memberikan kode CommonJS untuk memanggil wajib <code>require("pkg")</code> dan kode modul ES untuk diimpor melalui <code>import "pkg"</code> , meskipun menulis paket seperti itu bukan tanpa <a href="https://nodejs.org/api/esm.html" rel="nofollow">masalah lain</a> .  Anda dapat mengaktifkan ekspor bersyarat dengan <code>—-experimental-conditional-exports</code> . </p><br><h2 id="osnovnye-grabli-novyh-moduley">  Penggaruk utama dari modul baru </h2><br><h3 id="obyazatelnoe-ukazanie-rasshireniy-faylov">  Ekstensi file yang diperlukan </h3><br><p>  Saat menggunakan impor, Anda harus menentukan ekstensi file.  Saat mengimpor file indeks dari direktori, Anda juga harus menentukan path untuk file tersebut, yaitu, "./startup/index.js". </p><br><p>  Perilaku ini bertepatan dengan bagaimana impor bekerja di browser ketika mengakses server biasa tanpa konfigurasi tambahan. </p><br><h3 id="bolshe-nedostupny-require-exports-moduleexports-__filename-__dirname">  <code>module.exports</code> , <code>exports</code> , <code>module.exports</code> , <code>__filename</code> , <code>__dirname</code> </h3><br><p>  Nilai-nilai ini dari CommonJS tidak tersedia dalam konteks modul ES.  Namun, <code>require</code> dapat diimpor ke modul ES melalui <a href="https://nodejs.org/api/modules.html" rel="nofollow"><code>module.createRequire()</code></a> .  Setara dengan <code>__filename</code> dan <code>__dirname</code> dapat diperoleh dari <a href="https://nodejs.org/api/esm.html" rel="nofollow"><code>import.meta.url</code></a> . </p><br><h2 id="sozdanie-paketov">  Membuat paket </h2><br><p>  Saat ini, kami menyarankan agar penulis paket menggunakan modul CommonJS atau ES sepenuhnya untuk proyek Node.js mereka.  Kelompok kerja modul untuk Node.js terus mencari cara untuk meningkatkan dukungan untuk paket ganda, dengan CommonJS untuk pengguna lama dan modul ES untuk yang baru.  <a href="https://nodejs.org/api/esm.html" rel="nofollow">Ekspor bersyarat</a> sekarang eksperimental dan kami berharap untuk meluncurkan fungsionalitas ini atau alternatifnya pada akhir Januari 2020, atau bahkan lebih awal. </p><br><p>  Untuk mempelajari lebih lanjut tentang ini, lihat contoh dan rekomendasi kami untuk membuat <a href="https://nodejs.org/api/esm.html" rel="nofollow">paket Modul CommonJS / ES ganda.</a> </p><br><h2 id="chto-budet-dalshe">  Apa yang akan terjadi selanjutnya? </h2><br><p>  <strong>Loader.</strong>  Pekerjaan berlanjut pada API untuk menulis loader kustom, untuk mengimplementasikan transpirasi modul dalam runtime, mendefinisikan kembali jalur impor (paket atau file individual), dan menginstruksikan kode.  API eksperimental, tersedia di bawah <a href="https://nodejs.org/api/esm.html" rel="nofollow"><code>—-experimental-loader</code></a> , akan mengalami perubahan signifikan sebelum kami menghapusnya dari flag. </p><br><p>  <strong>Paket modul Dual CommonJS / ES.</strong>  Kami ingin memberikan cara standar untuk menerbitkan paket yang dapat digunakan baik melalui persyaratan di CommonJS maupun melalui <code>import</code> dalam modul ES.  Kami memiliki informasi lebih lanjut tentang ini <a href="https://nodejs.org/api/esm.html" rel="nofollow">dalam dokumentasi</a> .  Kami berencana untuk menyelesaikan pekerjaan dan menarik dari bendera pada akhir Januari 2020, jika tidak sebelumnya. </p><br><p>  Itu saja!  Kami berharap dukungan ECMAScript untuk modul membawa Node.js lebih dekat ke standar JavaScript dan membawa fitur baru untuk kompatibilitas di seluruh ekosistem JavaScript.  Alur kerja untuk meningkatkan dukungan modul sedang dilakukan secara publik di sini: <a href="https://github.com/nodejs/modules" rel="nofollow">https://github.com/nodejs/modules</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id477168/">https://habr.com/ru/post/id477168/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id477156/index.html">“Ke mana mencari pengetahuan”: ceramah ilmiah dan konferensi teknologi di Universitas ITMO</a></li>
<li><a href="../id477158/index.html">Jam epigenetik penuaan - tetapi masih, mereka terus berdetak! ...</a></li>
<li><a href="../id477160/index.html">Manual singkat untuk siswa dari bahasa asing</a></li>
<li><a href="../id477164/index.html">“Game ritme yang patut diketahui”: proyek mana yang mengeluarkan suara dan menjadikannya bagian dari genre</a></li>
<li><a href="../id477166/index.html">Berita dari dunia OpenStreetMap No. 486 (11/05/2019 - 11/11/2019)</a></li>
<li><a href="../id477170/index.html">Bagaimana saya pergi ke pertemuan di Sekolah 21</a></li>
<li><a href="../id477176/index.html">Alat apa yang akan membantu memenuhi GDPR</a></li>
<li><a href="../id477178/index.html">Pemrograman modern: melihat setelah 25 tahun istirahat atau ketika saya menulis bot untuk Telegram</a></li>
<li><a href="../id477180/index.html">Latar Belakang: apa itu QoE dan mengapa penyedia harus bekerja dengannya</a></li>
<li><a href="../id477182/index.html">[Di dermaga] Berkibar. Bagian 2. Untuk pengembang iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>