<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçë ‚ÄºÔ∏è üë©üèø‚Äçü§ù‚Äçüë®üèª Soluci√≥n universal para UITableViewRowAction y UIContextualAction üìÇ üåê ‚ÜîÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Muchos se han encontrado con el problema de implementar una hermosa asignaci√≥n de botones para UITableViewCell cuando se desplazan hacia la izquierda....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Soluci√≥n universal para UITableViewRowAction y UIContextualAction</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/414019/"><img src="https://habrastorage.org/webt/ij/w5/3b/ijw53blhrl4aftmlr8hv6iymiu8.jpeg"><br><br>  Muchos se han encontrado con el problema de implementar una hermosa asignaci√≥n de botones para UITableViewCell cuando se desplazan hacia la izquierda.  Algunos usaron la funcionalidad est√°ndar "fuera de la caja", otros se molestaron con su propia implementaci√≥n, mientras que otros lo hicieron con caracteres Unicode.  En este art√≠culo, le dir√© c√≥mo lograr la m√°xima personalizaci√≥n de UITableViewRowAction. <br><a name="habracut"></a><br>  Primero, una peque√±a teor√≠a: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">UITableViewRowAction</a> es una clase que permite al usuario realizar ciertas acciones con una celda determinada (como ‚Äúeliminar‚Äù, ‚Äúcambiar‚Äù, etc.) al mover una celda hacia la izquierda.  Cada instancia de esta clase representa una acci√≥n para ejecutar e incluye texto, estilo y un controlador de clics.  El SDK de iOS nos permite personalizar UITableViewRowAction de la siguiente manera: <br><br><pre><code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">convenience</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(style: <span class="hljs-type"><span class="hljs-type">UITableViewRowActionStyle</span></span>, title: <span class="hljs-type"><span class="hljs-type">String?</span></span>, handler: @escaping (<span class="hljs-type"><span class="hljs-type">UITableViewRowAction</span></span>, <span class="hljs-type"><span class="hljs-type">IndexPath</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Swift</span></span>.<span class="hljs-type"><span class="hljs-type">Void</span></span>)</code> </pre> <br>  Tambi√©n puede establecer backgroundColor. <br><br><h3>  M√©todos existentes </h3><br>  Considere los ejemplos de implementaci√≥n existentes, o lo que encontr√© en Internet. <br>  <strong>M√©todo n√∫mero 1</strong> .  Utilice la funcionalidad "fuera de la caja".  Esto es suficiente para usar botones comunes con texto y fondo.  Se ve demasiado simple y aburrido: <br><img src="https://habrastorage.org/webt/nw/1a/zu/nw1azubhwsv2ak9tpiaq39jamma.jpeg"><br><br>  <strong>M√©todo n√∫mero 2</strong> .  Establezca backgroundColor usando <em>UIColor (patternImage: UIImage)</em> .  Esto lograr√° belleza, pero privar√° la versatilidad, agregar√° una serie de restricciones y dificultades.  Dado que el ancho de UITableViewRowAction se calcula por el tama√±o del texto, debe especificar el <em>t√≠tulo</em> como un conjunto de caracteres de espacio en blanco de cierto ancho.  No podremos utilizar este m√©todo para celdas con alturas din√°micas.  Si la celda aumenta de altura, se ver√° as√≠: <br><br><img src="https://habrastorage.org/webt/ni/k3/fm/nik3fmelwkdx6vzqc0f1k_ipxhm.jpeg"><br><br>  <strong>M√©todo n√∫mero 3</strong> .  Utiliza caracteres Unicode.  No es necesario calcular el tama√±o del texto con espacios, y este m√©todo es adecuado para celdas con altura din√°mica.  Se ve bien: <br><br><img src="https://habrastorage.org/webt/jy/f7/j8/jyf7j8qnr-dupmrdtiycimemysa.jpeg"><br><br>  Pero si queremos hacer el texto debajo del √≠cono, este m√©todo no nos conviene. <br><br>  <strong>M√©todo n√∫mero 4</strong> .  Use CoreGraphics para representar los componentes de la interfaz de usuario.  La idea es dibujar manualmente una imagen con la disposici√≥n de elementos deseada (texto e imagen).  En este caso, debe calcular los tama√±os y las coordenadas para la ubicaci√≥n de cada elemento.  Con este m√©todo, podemos hacer tanto texto como una imagen, organiz√°ndolos seg√∫n lo necesitemos.  Pero este m√©todo es dif√≠cil de implementar.  Queremos algo m√°s simple. <br><br>  <strong>Otras implementaciones</strong> .  Hay algunas soluciones m√°s preparadas.  Usan su propia implementaci√≥n de la celda con la adici√≥n de ScrollView y otra l√≥gica.  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SwipeCellKit</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MGSwipeTableCell</a> .  Pero estas soluciones no permiten lograr un comportamiento est√°ndar de iOS; cubren solo una celda, a diferencia de UITableViewRowAction, que se crea en el delegado de la tabla.  Por ejemplo, usando una de estas soluciones, si abre acciones para el desplazamiento a la izquierda para varias celdas, tendr√° que cerrar manualmente estas acciones en cada una de ellas, lo cual es extremadamente inconveniente.  Para hacer esto, debe agregar su propia l√≥gica para controlar las acciones abiertas en un deslizamiento.  Queremos crear una soluci√≥n simple que no requiera costos adicionales, como si estuvi√©ramos utilizando la implementaci√≥n est√°ndar de UITableViewRowAction. <br><br><h3>  Empecemos </h3><br>  Intentemos crear una soluci√≥n universal que le permita hacer UITableViewRowAction con cualquier dise√±o que necesitemos. <br><br>  Cree nuestra clase descendiente de UITableViewRowAction y defina el m√©todo de creaci√≥n de la instancia principal: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">RowActionTapHandler</span></span> = (<span class="hljs-type"><span class="hljs-type">RowAction</span></span>, <span class="hljs-type"><span class="hljs-type">IndexPath</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RowAction</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableViewRowAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rowAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with actionHandler: @escaping RowActionTapHandler)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rowAction = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(style: .<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, title: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { action, indexPath <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> action = action <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">RowAction</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } actionHandler(action, indexPath) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rowAction } }</code> </pre><br>  Dado que UITableViewRowAction no tiene un inicializador primario, por conveniencia podemos crear un m√©todo est√°tico en el que creamos un UITableViewRowAction de manera est√°ndar y arrojamos un actionHandler para manejar el clic. <br><br>  Ahora intentemos lograr la personalizaci√≥n universal del bot√≥n UITableViewRowAction.  La idea es obtener el aspecto del bot√≥n desde la vista final de UIView (que se puede configurar en un xib normal).  Por lo tanto, podemos hacer un bot√≥n de cualquier tipo, en funci√≥n de las preferencias individuales (cualquier fuente del texto, tama√±o y disposici√≥n de los elementos, etc.). <br><br>  Tenemos dos cosas que podemos cambiar en UITableViewRowAction: <em>backgroundColor</em> y <em>title</em> .  Por el momento, la √∫nica forma de cambiar el aspecto del bot√≥n UITableViewRowAction es cambiar la propiedad backgroundColor.  Por lo tanto, nuestro objetivo es transformar: UIView -&gt; UIImage -&gt; UIColor.  Podemos obtener el color usando la imagen de la siguiente manera: <em>UIColor (patternImage: UIImage)</em> .  Y podemos obtener la imagen de UIView al representarla con el marco est√°ndar CoreGraphics. <br><br>  Pero primero, decidiremos c√≥mo establecer el tama√±o del bot√≥n: "listo para usar" no existe esta funcionalidad, y el tama√±o en UITableViewRowAction se calcula por el tama√±o del texto del campo de t√≠tulo. <br><br>  Despu√©s de realizar experimentos (midiendo el ancho calculado y real del bot√≥n), encontr√© un car√°cter Unicode en blanco que tiene el menor ancho distinto de cero: <em>U + 200A</em> <br><br>  Lo usaremos y crearemos una constante: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Constants</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> placeholderSymbol = <span class="hljs-string"><span class="hljs-string">"\u{200A}"</span></span> }</code> </pre><br>  Escribiremos una funci√≥n para obtener una cadena de caracteres de espacio en blanco correspondiente al tama√±o que necesitamos: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> placeholderSymbolWidth: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> flt_max = <span class="hljs-type"><span class="hljs-type">CGFloat</span></span>.greatestFiniteMagnitude <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> maxSize = <span class="hljs-type"><span class="hljs-type">CGSize</span></span>(width: flt_max, height: flt_max) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> attributes = [<span class="hljs-type"><span class="hljs-type">NSFontAttributeName</span></span> : <span class="hljs-type"><span class="hljs-type">UIFont</span></span>.systemFont(ofSize: <span class="hljs-type"><span class="hljs-type">UIFont</span></span>.systemFontSize)] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> boundingRect = <span class="hljs-type"><span class="hljs-type">Constants</span></span>.placeholderSymbol.boundingRect(with: maxSize, options: .usesLineFragmentOrigin, attributes: attributes, context: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> boundingRect.width }() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">emptyTitle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size: CGSize)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> usefulWidth = size.width - <span class="hljs-type"><span class="hljs-type">Constants</span></span>.minimalActionWidth usefulWidth = usefulWidth &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : usefulWidth <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> countOfSymbols = <span class="hljs-type"><span class="hljs-type">Int</span></span>(floor(usefulWidth * <span class="hljs-type"><span class="hljs-type">Constants</span></span>.shiftFactor / <span class="hljs-type"><span class="hljs-type">RowAction</span></span>.placeholderSymbolWidth)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">String</span></span>(repeating: <span class="hljs-type"><span class="hljs-type">Constants</span></span>.placeholderSymbol, <span class="hljs-built_in"><span class="hljs-built_in">count</span></span>: countOfSymbols) }</code> </pre><br>  La variable <em>placeholderSymbolWidth</em> obtiene el ancho de nuestro car√°cter Unicode, y la funci√≥n <em>emptyTitle (for size: CGSize) -&gt; String</em> calcula el n√∫mero de caracteres de espacios en blanco correspondientes al tama√±o del <em>tama√±o</em> y devuelve una cadena de estos caracteres.  La f√≥rmula anterior usa la constante <em>shiftFactor</em> .  Este es el coeficiente de desviaci√≥n del ancho del valor nominal.  El hecho es que a medida que aumenta el ancho de UITableViewRowAction, aumenta un peque√±o error (es decir, el ancho real del bot√≥n difiere del ancho calculado por la f√≥rmula habitual).  Para evitar esto, usamos esta constante, derivada experimentalmente. <br><br>  Adem√°s, UITableViewRowAction tiene un ancho m√≠nimo de 30 (por ejemplo, si establece title = "").  Este ancho es el m√≠nimo requerido para la sangr√≠a a la izquierda y derecha del t√≠tulo. <br>  Actualiza nuestras constantes: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Constants</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> placeholderSymbol = <span class="hljs-string"><span class="hljs-string">"\u{200A}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> minimalActionWidth: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> = <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shiftFactor: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> = <span class="hljs-number"><span class="hljs-number">1.1</span></span> }</code> </pre><br>  Ahora obtengamos la imagen del UIView.  Escribiremos la siguiente funci√≥n: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(from view: UIView)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIImage?</span></span> { <span class="hljs-type"><span class="hljs-type">UIGraphicsBeginImageContextWithOptions</span></span>(view.bounds.size, view.isOpaque, <span class="hljs-type"><span class="hljs-type">UIScreen</span></span>.main.scale) <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> context = <span class="hljs-type"><span class="hljs-type">UIGraphicsGetCurrentContext</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">assertionFailure</span></span>(<span class="hljs-string"><span class="hljs-string">"Something wrong with CoreGraphics image context"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } context.setFillColor(<span class="hljs-type"><span class="hljs-type">UIColor</span></span>.white.cgColor) context.fill(<span class="hljs-type"><span class="hljs-type">CGRect</span></span>(origin: .zero, size: view.bounds.size)) view.layer.render(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: context) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> img = <span class="hljs-type"><span class="hljs-type">UIGraphicsGetImageFromCurrentImageContext</span></span>() <span class="hljs-type"><span class="hljs-type">UIGraphicsEndImageContext</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> img }</code> </pre><br>  Esta funci√≥n convierte nuestra <em>vista</em> en una imagen.  En este caso, el tama√±o de la imagen corresponde al tama√±o de la <em>vista</em> . <br><br>  El √∫ltimo paso permanece, donde implementamos el m√©todo para configurar UITableViewRowAction usando UIView: <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupForCell</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with view: UIView)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> img = image(from: view) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.title = emptyTitle(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: img.size) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.backgroundColor = <span class="hljs-type"><span class="hljs-type">UIColor</span></span>(patternImage: img) }</code> </pre><br>  Aqu√≠ usamos las funciones escritas anteriormente para configurar nuestro bot√≥n y establecer el <em>color de fondo</em> usando la imagen resultante. <br><br>  Eso es todo  Tenemos una soluci√≥n universal para UITableViewRowAction y ahora podemos personalizarla de cualquier manera usando UIView. <br><br><img src="https://habrastorage.org/webt/vq/om/jh/vqomjhu5tyowfttayuyddmgqqwu.jpeg"><br><br>  A partir de iOS 11, Apple ha agregado una nueva clase para la acci√≥n de deslizar las celdas de la tabla: UIContextualAction.  Le permite especificar de inmediato la imagen que se mostrar√° en la acci√≥n en el deslizamiento (esto es lo que nos hemos perdido durante todos estos a√±os de uso de UITableViewRowAction).  Se supon√≠a que deb√≠a hacernos la vida m√°s f√°cil, pero adem√°s de una nueva oportunidad, cre√≥ problemas adicionales.  Esta clase impone restricciones en el tama√±o de la imagen, no permite el uso de texto e imagen, y adem√°s, la imagen debe tener un formato especial (imagen de plantilla).  Por lo tanto, finalic√© mi soluci√≥n para admitir acciones de deslizamiento en iOS 11. Ahora, para crear un UITableViewRowAction o UIContextualAction, primero debe crear la f√°brica RowActionFactory, configurarla utilizando nuestra vista (como lo hicimos anteriormente en el <em>m√©todo setupForCell (con vista: UIView))</em> y devolver la entidad que necesitamos: UITableViewRowAction o UIContextualAction (utilizando los <em>m√©todos rowAction ()</em> o <em>contextualAction (para indexPath: IndexPath),</em> respectivamente).  El siguiente es un ejemplo del uso de RowActionFactory: <br><br><pre> <code class="hljs julia"><span class="hljs-meta"><span class="hljs-meta">@available</span></span>(iOS <span class="hljs-number"><span class="hljs-number">11.0</span></span>, *) func tableView(_ tableView: UITableView, trailingSwipeActionsConfigurationForRowAt indexPath: IndexPath) -&gt; UISwipeActionsConfiguration? { var contextualActions: [UIContextualAction] = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> actionType <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rowActionTypes { // actionType -     <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rowActionFactory = RowActionFactory { (indexPath) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tableView.setEditing(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rowActionView = &lt;...&gt; //  UIView     rowActionFactory.setupForCell(with: rowActionView) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> contextualAction = rowActionFactory.contextualAction(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: indexPath) { contextualActions.append(contextualAction) } } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> swipeActionsConfiguration = UISwipeActionsConfiguration(actions: contextualActions) swipeActionsConfiguration.performsFirstActionWithFullSwipe = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> swipeActionsConfiguration }</code> </pre><br>  La soluci√≥n final se puede encontrar aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">TCSCustomRowActionFactory (github.com)</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es414019/">https://habr.com/ru/post/es414019/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413999/index.html">Lo que ha estado sucediendo con los precios en la nube en los √∫ltimos a√±os</a></li>
<li><a href="../es414001/index.html">C√≥mo sobrevivir en un mundo cambiante de desarrollo</a></li>
<li><a href="../es414003/index.html">Los trenes son diferentes. Muy</a></li>
<li><a href="../es414009/index.html">Los 8 mejores recursos para la pr√°ctica de programaci√≥n en 2018</a></li>
<li><a href="../es414011/index.html">Puedo convertirme en Apple, y t√∫ tambi√©n</a></li>
<li><a href="../es414023/index.html">Preg√∫ntele a Ethan: ¬øQu√© tan r√°pido podr√≠a haber aparecido la vida en el universo?</a></li>
<li><a href="../es414025/index.html">Los empleadores rastrean computadoras, viajes al ba√±o y ahora tambi√©n emociones; ¬øTu jefe te sigue?</a></li>
<li><a href="../es414027/index.html">¬øPueden mis amigos ser considerados verdaderos amigos?</a></li>
<li><a href="../es414029/index.html">Luz misteriosa alrededor de una estrella reci√©n formada, y lo que los astr√≥nomos piensan al respecto</a></li>
<li><a href="../es414031/index.html">Tras la reuni√≥n "Nuevas funciones de PostgreSQL 11"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>