<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíæ ü•Å üëßüèª Soul Mikrotik contra ILV sin alma y el mismo proveedor üôèüèø üßôüèª üêµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El art√≠culo describe una forma de obtener acceso a recursos que caen err√≥neamente bajo la distribuci√≥n de bollos por Roskomnadzor (en adelante RKN). E...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Soul Mikrotik contra ILV sin alma y el mismo proveedor</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467471/">  El art√≠culo describe una forma de obtener acceso a recursos que caen err√≥neamente bajo la distribuci√≥n de bollos por Roskomnadzor (en adelante RKN).  Est√° atrapado por error.  Somos ciudadanos respetuosos de la ley y no vamos a donde nuestras agencias gubernamentales nos lo proh√≠ben.  Entonces, si de repente decides usar el m√©todo para buscar alg√∫n tipo de recursos bloqueados "legalmente", la dura espada de la justicia probablemente volar√° por encima de tu cabeza y no tengo la culpa, ¬°porque ahora te lo advert√≠! <br><a name="habracut"></a><br>  El problema surgi√≥ inesperadamente cuando nuestra oficina central se mud√≥ a otro lugar y, como resultado, cambi√≥ de proveedor.  Los empleados en masa comenzaron a quejarse de que no pod√≠an acceder a los sitios donde antes ten√≠an acceso.  Al mismo tiempo, desde nuestras otras oficinas con otros proveedores, los sitios a√∫n estaban disponibles. <br><br>  Durante alg√∫n tiempo, debido a la molestia de mudarme, ignor√© el problema, pero cuando el departamento de contabilidad comenz√≥ a quejarse (¬øtambi√©n tiene importancia el departamento de contabilidad despu√©s de la administraci√≥n de la empresa?), Tuve que resolverlo. <br><br>  En primer lugar, la sospecha recay√≥ en problemas con MTU y MSS.  Pero con ellos, afortunadamente, todo result√≥ en orden.  Encontr√© un dominio problem√°tico basado en ILV, tambi√©n est√° bien, el dominio est√° limpio.  Abr√≠ el sitio a trav√©s de las puertas de enlace de otras sucursales (3 proveedores diferentes), se abre.  Pero a trav√©s de nuestro proveedor para el dominio de IP, incluso los pings no van.  Y luego supuse romper el dominio del problema de IP de ILV.  ¬øYa adivinaste que IP estaba en la base de datos? <br><br>  Pero donde, entonces, hay una redirecci√≥n a una p√°gina que indica que este recurso est√° bloqueado, etc.  etc., preguntas.  Y pregunt√©.  Al principio, realmente intent√© abrir varios sitios donde antes, cuando era posible, todos est√°bamos buscando algo para ver o descargar.  Y asegur√°ndome de que no haya advertencias sobre el bloqueo en estos sitios, llam√© al proveedor. <br><br>  El proveedor me escuch√≥, admiti√≥ que hay un problema, pero no hay advertencias. <br><br>  Simpatizaba con mi situaci√≥n, pero me negaba a corregir algo.  Al igual, cumplimos con el requisito de bloqueo, pero no hay requisitos de notificaci√≥n.  En el que nos despedimos. <br><br>  Por supuesto, ten√≠a el deseo de luchar con el proveedor, pero la pereza y la falta de tiempo libre empujaron profundamente este deseo.  Sobre el mismo lugar donde envi√© a un proveedor con Internet en mi coraz√≥n, a donde el sol no brilla. <br><br>  El problema ten√≠a que resolverse de alguna manera.  Nuestra empresa utiliza Mikrotiki como enrutadores de puertas de enlace, sin importar cu√°les, el enrutador del sistema operativo es el mismo para todos.  Despu√©s de hurgar en Habr√©, encontr√© algunos art√≠culos sobre c√≥mo evitar los bloqueos de ILV, generar y cargar la base de datos de ILV en Mikrotik.  Al mismo tiempo, el enrutamiento bloque√≥ el tr√°fico a aquellas puertas de enlace donde no hay bloqueos.  En aras del inter√©s, prob√© este m√©todo.  Funciona, pero no se adapta. <br>  En primer lugar, el volumen base de 60,000 ip (a principios del verano de 2019) envi√≥ a mi Mikrotik a un coma profundo.  El enrutador CHR OS con una gran capacidad de memoria y varios n√∫cleos se sinti√≥ un poco mejor, pero dej√≥ en claro que con una actitud tan concienzuda del ILV hacia sus deberes, no durar√≠a mucho. <br><br>  En segundo lugar, se obtuvo acceso a todos los recursos bloqueados, incluidos los bloqueados por motivos "legales".  Que yo, como ciudadano respetuoso de la ley, tampoco me conven√≠a. <br><br>  Pero la idea misma de dirigir el tr√°fico a los sitios permitidos a trav√©s de esas puertas de enlace donde no est√° bloqueada est√° atrapada en mi mente. <br><br>  ¬øQu√© podemos hacer para esto? <br><br>  Lo primero que viene a la mente es averiguar la direcci√≥n IP del recurso y determinar la puerta de enlace para enrutarlo.  No es una opci√≥n, un recurso puede tener varias ip y pueden cambiar, a veces a menudo.  Cansado de sumar. <br><br>  El segundo es analizar la IP usando la Capa 7 en el firewall, ingres√°ndolas en la lista de direcciones.  Ya es mejor, pero la capa 7 tiene una caracter√≠stica desagradable.  Si hay varias reglas, entonces comienza a relacionarse con los recursos del procesador de la misma manera que algunas esposas se relacionan con el salario de su esposo.  Como resultado, las disputas, los esc√°ndalos y otros problemas comienzan en la familia. <br><br>  Dirigir todo el tr√°fico a trav√©s de la puerta de enlace remota tambi√©n es perjudicial. <br><br>  Afortunadamente, en el MUM de septiembre, uno de los oradores revel√≥ un terrible secreto.  Resulta que Mikrotiki ha aprendido durante alg√∫n tiempo a analizar un dominio IP directamente desde su nombre en la hoja de direcciones, ¬°agregando IP a la misma hoja!  Armado con la informaci√≥n que recib√≠, finalmente resolv√≠ el problema. <br><br>  A continuaci√≥n se muestra una soluci√≥n de ejemplo: <br><br>  1. Creamos en el firewall la hoja de direcciones con el dominio deseado. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" title="subir foto"><img src="https://habrastorage.org/getpro/habr/post_images/2d2/80f/c04/2d280fc0483cd7b2f29ac5a25760b845.png" alt="alist.png"></a> <br><br>  2. En Firewall \ Mangle, cree una regla, cadena: prerouting, avanzado: Dst.Address list = el nombre de nuestra hoja, acci√≥n: marcar enrutamiento, New Routing Mark = nombre de marca <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" title="compartir fotos"><img src="https://habrastorage.org/getpro/habr/post_images/77e/27b/c92/77e27bc9239c0dc916ea08a37809f116.png" alt="Si"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" title="subir selfie"><img src="https://habrastorage.org/getpro/habr/post_images/71b/9d8/0a4/71b9d80a4ec662ed262743b089292ff5.png" alt="Si"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" title="alojamiento de im√°genes"><img src="https://habrastorage.org/getpro/habr/post_images/622/462/778/6224627781f3e0ee32df90b9160d7636.png" alt="Si"></a> <br><br>  3. Vamos a IP \ Rutas.  Crea una nueva ruta predeterminada.  Direcci√≥n Dst = 0.0.0.0 / 0, Gateway = IP Gateway, Marca de enrutamiento = Su marca <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" title="subir foto"><img src="https://habrastorage.org/getpro/habr/post_images/681/514/307/6815143074027220adef8abc76be0a8b.png" alt="route.png"></a> <br><br>  Eso es todo.  Ahora su Mikrotik analizar√° la direcci√≥n IP del dominio deseado en la hoja de direcciones que se le ocurri√≥ para esto, marcar√° las rutas a esta direcci√≥n IP y las enviar√° a trav√©s de la puerta de enlace que necesita.  ¬øTienes una puerta de enlace de respaldo?  Sonrie <br><br>  Fue hecho en el firmware 6.45.5 <br><br>  Gracias por su atencion <cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/467471/">https://habr.com/ru/post/467471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../467457/index.html">El camino desde la cirug√≠a hasta el desarrollo de juegos o la primera experiencia de desarrollo m√≥vil en Unity</a></li>
<li><a href="../467459/index.html">C√≥mo un microcontrolador puede leer datos a 1.6 Gbps</a></li>
<li><a href="../467461/index.html">RubyRussia 2019. Julian Pokrovsky: c√≥mo optimizar un monolito</a></li>
<li><a href="../467463/index.html">Solo divisi√≥n, o c√≥mo crear una teor√≠a matem√°tica y ganar $ 400K con ella. Serie tres, final</a></li>
<li><a href="../467465/index.html">¬øLa nube salvar√° los tel√©fonos inteligentes con un presupuesto ultrabajo?</a></li>
<li><a href="../467473/index.html">Y m√°s sobre tipos</a></li>
<li><a href="../467475/index.html">Devuelva Thread.Abort () a .NET Core. Entrega de aplicaciones con su versi√≥n de CoreCLR y CoreFX</a></li>
<li><a href="../467477/index.html">Kubernetes 1.16: Aspectos destacados</a></li>
<li><a href="../467479/index.html">Kir Shatrov: Shopify comenz√≥ con Rails y aqu√≠ les encanta este marco.</a></li>
<li><a href="../467485/index.html">Resoluci√≥n de problemas con pwnable.kr 23 - calculadora md5. Nos ocupamos de Stack Canary. Conexi√≥n de bibliotecas C en python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>