<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùî üí• ü¶Ü Die R√ºckseite des Neuromancers. Teil 4: Sound, Animation, Huffman, Github ‚úçüèø üé∏ üö¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, wie Sie bereits verstanden haben, ist dies eine Fortsetzung meiner Geschichte des Reverse Engineering und der Portierung von Neuromant. 

 Die ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die R√ºckseite des Neuromancers. Teil 4: Sound, Animation, Huffman, Github</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417639/"><p>  Hallo, wie Sie bereits verstanden haben, ist dies eine Fortsetzung meiner Geschichte des Reverse Engineering und der Portierung von Neuromant. </p><br><img src="https://habrastorage.org/webt/-g/ru/d_/-grud_xhetuzh4znt4rbkeakxyi.png"><br><blockquote> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die R√ºckseite des Neuromancers.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1: Sprites</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die R√ºckseite des Neuromancers.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2: Schriftart rendern</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die R√ºckseite des Neuromancers.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3: Fertiges Rendern, mach das Spiel</a> </blockquote><p>  Beginnen wir heute mit zwei guten Nachrichten: </p><br><ul><li>  Erstens bin ich nicht mehr allein - der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">viiri-</a> Benutzer hat sich bereits dem Projekt angeschlossen und bereits einen bedeutenden Beitrag geleistet. </li><li>  Zweitens haben wir jetzt ein offenes Repository auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Github</em></a> . </li></ul><br><p>  Im Allgemeinen laufen die Dinge sehr gut, und vielleicht werden wir bald zumindest einen spielbaren Build bekommen.  Und lassen Sie uns wie √ºblich unter dem Schnitt dar√ºber sprechen, was und <em>wie</em> im Moment erreicht wurde. </p><a name="habracut"></a><br><hr><br><p>  Er begann sich mit Ger√§uschen zu besch√§ftigen.  Leider gab es unter den Spielressourcen nichts √Ñhnliches wie Audio, und da ich keine Ahnung hatte, wie die Musik unter <em>MS-DOS</em> funktioniert, war es √§u√üerst unklar, wo ich anfangen sollte.  Nachdem ich ein wenig √ºber alle Arten von <em>SoundBlaster</em> gelesen hatte, war das Beste, was ich mir <em>ausgedacht habe</em> , den zerlegten Code zu scrollen, in der Hoffnung, einige bekannte Signaturen zu sehen.  Und wer sucht, findet er normalerweise, auch wenn er nicht ganz das ist, wonach er gesucht hat (Kommentare von <em>Ida</em> ): </p><br><pre><code class="hljs vhdl">sub_20416: ... mov ax, [si+<span class="hljs-number"><span class="hljs-number">8</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>h, al ; <span class="hljs-number"><span class="hljs-number">8253</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>). mov al, ah <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>h, al ; Timer <span class="hljs-number"><span class="hljs-number">8253</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>). mov bx, [si+<span class="hljs-number"><span class="hljs-number">0</span></span>Ah] <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> bl, <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h ; PC/XT PPI <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> B bits: ; <span class="hljs-number"><span class="hljs-number">0</span></span>: Tmr <span class="hljs-number"><span class="hljs-number">2</span></span> gate ‚ïê‚ï¶‚ïê‚ñ∫ <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-number"><span class="hljs-number">03</span></span>H=spkr <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ; <span class="hljs-number"><span class="hljs-number">1</span></span>: Tmr <span class="hljs-number"><span class="hljs-number">2</span></span> data ‚ïê‚ïù <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>fcH=spkr OFF ; <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>=read high switches ; <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable RAM parity checking ; <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable I/O channel check ; <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=hold keyboard clock low ; <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable kbrd <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">0</span></span>FCh <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, bl <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ; PC/XT PPI <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> B bits: ; <span class="hljs-number"><span class="hljs-number">0</span></span>: Tmr <span class="hljs-number"><span class="hljs-number">2</span></span> gate ‚ïê‚ï¶‚ïê‚ñ∫ <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-number"><span class="hljs-number">03</span></span>H=spkr <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ; <span class="hljs-number"><span class="hljs-number">1</span></span>: Tmr <span class="hljs-number"><span class="hljs-number">2</span></span> data ‚ïê‚ïù <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>fcH=spkr OFF ; <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>=read high switches ; <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable RAM parity checking ; <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable I/O channel check ; <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=hold keyboard clock low ; <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable kbrd</code> </pre> <br><p>  Nachdem ich diesen <em>Timer 8253-5 durchgesehen hatte, stie√ü</em> ich auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel</a> , der der erste Schl√ºssel zum Verst√§ndnis des Geschehens war.  Im Folgenden werde ich versuchen zu erkl√§ren, was was ist. </p><br><p>  In der √Ñra von <em>IBM-PC</em> , also vor dem Aufkommen erschwinglicher Soundkarten, war der sogenannte <em>PC-Lautsprecher</em> , auch als ‚ÄûPiepser‚Äú bekannt, das am h√§ufigsten verwendete Ger√§t zur Klangwiedergabe.  Dieses Ger√§t ist nichts anderes als ein normaler Lautsprecher, der in den meisten F√§llen √ºber einen vierpoligen Anschluss mit dem Motherboard verbunden ist.  Der Piepser erm√∂glichte es der Idee, einen Rechteckimpuls mit zwei Pegeln (entsprechend zwei Spannungspegeln, normalerweise 0 V und + 5 V) zu reproduzieren, und wurde √ºber den 61. Port des <em>PPI-</em> Controllers <em>(Programmable Peripheral Interface)</em> gesteuert.  Insbesondere sind die ersten beiden Bits des an den Port gesendeten Werts f√ºr die Steuerung des ‚ÄûLautsprechers‚Äú verantwortlich (siehe Kommentare zu den Zeilen <code>in al, 61h</code> und <code>out 61h, al</code> ). </p><br><p>  Wie ich bereits sagte (mit etwas anderen Worten), kann sich unser Sprecher in zwei Zust√§nden befinden - <em>"in"</em> und <em>"out"</em> ( <em>"niedrig" - "hoch"</em> , <em>"aus" - "ein"</em> , <em>"aus" - "ein")</em> . was auch immer).  Um <em>einen</em> Impuls zu erzeugen, muss der aktuelle Zustand in den entgegengesetzten und nach einiger Zeit zur√ºck ge√§ndert werden.  Dies kann direkt erfolgen, indem das erste Bit (Anzahl von Grund auf neu) von Port 61 wie folgt manipuliert wird: </p><br><pre> <code class="hljs vhdl">PULSE: <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h ;    <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">11111100</span></span>b ;    ... <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, <span class="hljs-number"><span class="hljs-number">00000010</span></span>b ;     ... ; ,        <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ;    <span class="hljs-number"><span class="hljs-number">61</span></span>-  mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span> ;   DELAY: <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> DELAY ;    <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h ;    <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">11111100</span></span>b ;     <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ;    <span class="hljs-number"><span class="hljs-number">61</span></span>- </code> </pre> <br><p>  Das Ergebnis der Ausf√ºhrung dieses Codes sieht folgenderma√üen aus: </p><br><pre> <code class="hljs delphi"> loop DELAY +<span class="hljs-number"><span class="hljs-number">5</span></span>V +----------------------+ ! ! <span class="hljs-number"><span class="hljs-number">0</span></span>V ---+ +-------------------------- <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, <span class="hljs-number"><span class="hljs-number">00000010</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">11111100</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al</code> </pre> <br><p>  <em>Wenn</em> wir <em>PULSE</em> mit einer Verz√∂gerung wiederholen, erhalten wir ein rechteckiges Signal: </p><br><pre> <code class="hljs erlang-repl"> mov dx, <span class="hljs-number"><span class="hljs-number">100</span></span> ;  <span class="hljs-number"><span class="hljs-number">100</span></span>  PULSE: ... mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span> WAIT: loop WAIT dec dx jnz PULSE PULSE +<span class="hljs-number"><span class="hljs-number">5</span></span>V +---------+ +---------+ +---------+ ! ! ! ! ! ! <span class="hljs-number"><span class="hljs-number">0</span></span>V ---+ +---------+ +---------+ +--- loop WAIT</code> </pre><br><p>  Wenn wir im ersten Fall kaum etwas geh√∂rt h√§tten, erhalten wir im zweiten Fall einen Frequenzton, abh√§ngig von der Geschwindigkeit der Maschine, auf der dieser Code ausgef√ºhrt wird.  Das ist gro√üartig, aber mit gewissen Schwierigkeiten verbunden.  In jedem Fall gibt es eine bequemere M√∂glichkeit, den Lautsprecher zu steuern. </p><br><p>  Hier kommt der <em>spielprogrammierbare</em> Dreikanal-Timer - <em>Intel 8253</em> , dessen zweiter Kanal (ab Null) mit dem Piepser verbunden ist.  Dieser Timer empf√§ngt ein Signal vom <em>Intel 8254-</em> Takt, sendet 1193180 Impulse pro Sekunde (~ 1,193 MHz) und kann nach einer bestimmten Anzahl von Impulsen f√ºr eine bestimmte Reaktion programmiert werden.  Eine dieser Reaktionen ist das Senden eines Rechteckimpulses an den Lautsprecher.  Mit anderen Worten, <em>8253</em> kann in Form eines Generators eines rechteckigen Signals mit einstellbarer Frequenz arbeiten, was es relativ einfach macht, verschiedene Soundeffekte auf dem Lautsprecher zu synthetisieren.  Und hier ist was Sie daf√ºr brauchen: </p><br><ol><li>  Stellen Sie den zweiten Kanal des Timers auf den rechteckigen Signalerzeugungsmodus.  Schreiben Sie dazu einen speziellen Einzelbyte-Wert in Port 43 ( <em>8253 Mode / Command Register</em> ).  In meinem Fall ist dies <code>10110110B</code> (weitere Details <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ): </li></ol><br><pre> <code class="markdown hljs">Bits Usage 6 and 7 Select channel : 1 0 = Channel 2 4 and 5 Access mode : 1 1 = Access mode: lobyte/hibyte 1 to 3 Operating mode : 0 1 1 = Mode 3 (square wave generator) 0 BCD/Binary mode: 0 = 16-bit binary</code> </pre> <br><ol><li><p>  Stellen Sie die gew√ºnschte Frequenz auf dem zweiten Kanal ein.  Dazu senden wir byteweise vom j√ºngsten zum √§ltesten einen Wert von <code>1193180 / freq</code> an den 42. Port ( <em>8253 Channel 2-Datenport</em> ), wobei <code>freq</code> der erforderliche Frequenzwert in Hertz ist. </p><br></li><li><p>  Lassen Sie den Lautsprecher Impulse vom Timer empfangen.  Setzen Sie dazu die ersten beiden Bits des Wertes in Port 61 ( <em>PPI</em> ) auf Eins.  Tatsache ist, dass wenn das Nullbit auf 1 gesetzt ist, das erste als ‚ÄûSchalter‚Äú interpretiert wird: </p><br></li></ol><br><pre> <code class="markdown hljs">Bit 0 Effect ----------------------------------------------------------------- 0 The state of the speaker will follow bit 1 of port 61h 1 The speaker will be connected to PIT channel 2, bit 1 is used as switch ie 0 = not connected, 1 = connected.</code> </pre> <br><p>  Als Ergebnis haben wir folgendes Bild: </p><br><pre> <code class="hljs vhdl"> mov al, <span class="hljs-number"><span class="hljs-number">10110110</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">43</span></span>h, al ;   mov ax, <span class="hljs-number"><span class="hljs-number">02E9</span></span>Bh ; <span class="hljs-number"><span class="hljs-number">1193180</span></span> / <span class="hljs-number"><span class="hljs-number">100</span></span> = ~<span class="hljs-number"><span class="hljs-number">0</span></span>x2E9B <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>h, al ;      mov al, ah <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>h, al ;      <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h ;    <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, <span class="hljs-number"><span class="hljs-number">00000011</span></span>b ;      <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ;   ... ;       ~<span class="hljs-number"><span class="hljs-number">100</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">11111100</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ;  </code> </pre> <br><p>  Und genau das tut der Code, den ich ganz am Anfang zitiert habe (mit Ausnahme der Initialisierung, aber ich habe ihn in einer anderen Funktion gefunden): Bei <code>si + 8</code> wird ein Frequenzteiler an Port 42 gesendet, und bei <code>si + 0Ah</code> - Lautsprecherstatus ( <em>‚ÄûEin‚Äú - ‚ÄûAus‚Äú</em> ), aufgezeichnet in Port 61. </p><br><p>  Der Wiedergabemechanismus ist einfach und unkompliziert, aber dann musste man sich mit Timings befassen.  Nachdem ich den Code in der N√§he studiert hatte, sah ich, dass in derselben Funktion, in der der Timer initialisiert wird ( <code>sub_2037A</code> , dann <code>init_8253</code> ), der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">achte Interrupt-</a> Handler durch die Funktion <code>sub_20416</code> wird (im Folgenden - <code>play_sample</code> ).  Es wurde schnell klar, dass dieser Interrupt ungef√§hr 18,2 Mal pro Sekunde generiert wird und dazu dient, die Systemzeit zu aktualisieren.  Das Ersetzen des Handlers dieses Interrupts ist eine g√§ngige Praxis, wenn Sie 18 Mal pro Sekunde eine Aktion ausf√ºhren m√ºssen (tats√§chlich muss der urspr√ºngliche Handler auch innerhalb des Hooks aufgerufen werden, da sonst die Systemzeit stoppt).  Auf dieser Grundlage stellt sich heraus, dass die n√§chste Frequenz alle <code>(1 / 18.2) * 1000 ~ 55</code> an den Generator <code>(1 / 18.2) * 1000 ~ 55</code> . </p><br><p>  Der Plan war folgender: </p><br><ul><li>  <code>play_sample</code> einen Haltepunkt in die Funktion <code>play_sample</code> in die Zeile, in der der n√§chste Frequenzteiler extrahiert wird. </li><li>  Berechnen Sie die Frequenz nach der Formel <code>freq = 1193180 / divisor</code> ; </li><li>  Erzeugen von <code>freq</code> ms quadratischem Frequenzfrequenzsignal in einer Art Audio-Editor (ich habe <em>Adobe Audition verwendet</em> ); </li><li>  Wiederholen Sie die ersten drei Schritte, bis sich mindestens 3 Sekunden angesammelt haben. </li></ul><br><p>  Also habe ich den Anfang der Melodie aus dem Hauptmen√º bekommen, aber einige Zeit 10 langsamer als n√∂tig gespielt.  Dann habe ich die Dauer des ‚ÄûSamples‚Äú von 55 ms auf 5 ms reduziert - es wurde viel besser, aber das ist immer noch nicht so.  Das Timing-Problem blieb offen, bis ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesen Artikel fand</a> .  Es stellte sich heraus, dass der achte Interrupt durch Einspeisung desselben <em>8253</em> erzeugt wird, dessen <em>Nullkanal</em> mit dem Interrupt-Controller ( <em>PIC</em> ) verbunden ist.  Wenn die Maschine startet, setzt das <em>BIOS</em> den Kanal auf Null, um Impulse mit einer Frequenz von ~ 18,2 Hz zu erzeugen (dh alle ~ 54,9 ms wird ein Interrupt erzeugt).  Der Nullkanal kann jedoch so umprogrammiert werden, dass er Impulse mit einer h√∂heren Frequenz erzeugt. Dazu m√ºssen Sie analog zum zweiten Kanal einen Wert von <code>1193180 / freq</code> in den 40. Port schreiben, wobei <code>freq</code> der erforderliche Frequenzwert in Hertz ist.  Dies geschieht in der Funktion <code>init_8253</code> , nur anfangs habe ich nicht darauf geachtet: </p><br><pre> <code class="hljs objectivec">init_8253: ... mov al, <span class="hljs-number"><span class="hljs-number">0</span></span>B6h ; <span class="hljs-number"><span class="hljs-number">10110110</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">43</span></span>h, al ; Timer <span class="hljs-number"><span class="hljs-number">8253</span></span><span class="hljs-number"><span class="hljs-number">-5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>). mov ax, <span class="hljs-number"><span class="hljs-number">13</span></span>B1h <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">40</span></span>h, al ; Timer <span class="hljs-number"><span class="hljs-number">8253</span></span><span class="hljs-number"><span class="hljs-number">-5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>). mov al, ah <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">40</span></span>h, al ; Timer <span class="hljs-number"><span class="hljs-number">8253</span></span><span class="hljs-number"><span class="hljs-number">-5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>).</code> </pre> <br><p>  Der Wert <code>13B1h</code> in die Frequenz √ºbersetzt: <code>1193180 / 13B1h ~ 236.7</code> , dann erhalten wir ungef√§hr <code>(1 / 236.7) * 1000 ~ 4.2</code> pro "Probe".  Das Puzzle hat sich entwickelt. </p><br><p>  Dann ist es eine Frage der Technologie, eine Funktion zu implementieren, die Soundtracks aus dem Spiel extrahiert.  Aber hier ist die Sache, die Werte der Frequenzteiler, die im 42. Port aufgezeichnet sind, werden nicht explizit gespeichert.  Sie werden durch einen kniffligen Algorithmus berechnet, dessen Eingabedaten und Arbeitsbereich direkt in der ausf√ºhrbaren Datei des Spiels liegen (im siebten Segment laut <em>Ida</em> ).  Von den Merkmalen gibt es auch keine Anzeichen f√ºr das Ende des Titels. Wenn nichts mehr zu spielen ist, erzeugt der Algorithmus unendlich einen Nullzustand des Lautsprechers.  Aber ich habe mich nicht darum gek√ºmmert und wie im Fall des Dekomprimierungsalgorithmus ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erster Teil</a> ) habe ich nur die Funktion zum Einstellen der Spur f√ºr die Wiedergabe und den Algorithmus zum Erhalten der n√§chsten Frequenz auf den 64-Bit-Assembler portiert (und das siebte Segment vollst√§ndig √ºbernommen). </p><br><p>  Und es hat funktioniert.  Danach habe ich die Soundtrack-Generierungsfunktionen f√ºr die ausgew√§hlte Spur implementiert ( <em>PCM, 44100 Hz, 8 Bit, Mono</em> ; habe so etwas wie einen Generator gemacht, der im Lautsprecheremulator in <em>DosBox verwendet wird</em> ).  Ich habe das Problem mit dem Zeichen des Endes mit einem einfachen Z√§hler der Stille gel√∂st: eine Sekunde gez√§hlt - wir vervollst√§ndigen den Algorithmus.  Wenn ich die resultierende Spur in den <em>WAV-</em> Header einwickle und das Ergebnis in einer Datei speichere, habe ich genau die Spur aus dem Hauptmen√º erhalten.  Und 13 weitere Titel, die Sie unten anh√∂ren k√∂nnen <em>[oder im Ressourcen-Viewer, der jetzt √ºber einen integrierten Player verf√ºgt und jeden Titel in .WAV speichern kann]</em> : </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <em>[Als ich das Problem studierte, lernte ich fortgeschrittenere ‚ÄûPiepser‚Äú -Techniken kennen, beispielsweise die Verwendung der Pulsweitenmodulation f√ºr die PCM-Klangwiedergabe von schlechter Qualit√§t.</em>  <em>Am Ende dieses Artikels werde ich eine Liste von Materialien bereitstellen, aus denen Sie mehr erfahren k√∂nnen.]</em> </p><br><hr><br><p>  Im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zweiten Teil</a> , als verschiedene Ressourcenformate ber√ºcksichtigt wurden, schlug ich vor, dass <em>.ANH-</em> Dateien Animationen f√ºr Standorthintergr√ºnde <em>enthalten</em> ( <em>dh</em> f√ºr in <em>.PIC</em> gespeicherte <em>Bilder</em> ).  <em>[Das ist so.]</em> Nachdem ich mit dem Sound fertig war, beschloss ich, ihn auszuprobieren.  Rein unter der Annahme, dass die Animation direkt auf das im Speicher gespeicherte Hintergrundbild angewendet wird (nicht im <em>Videospeicher</em> , sondern in der <em>Sprite-Kette</em> ), habe ich mich entschlossen, diesen Speicher vor bzw. nach dem Anwenden der Animation zu sichern (schauen Sie, wo der Cursor nach oben zeigt Buchstabenfolge 'S'): </p><br><p><img src="https://habrastorage.org/webt/zp/9a/qn/zp9aqnvcvi-gn3pp0t1puzvhpti.gif" width="32%" height="32%"><img src="https://habrastorage.org/webt/jz/9l/ig/jz9ligummo9j_xwwatid-s0vcri.png" width="32%" height="32%"><img src="https://habrastorage.org/webt/sz/pd/uy/szpduyzc7lgsqum_np9sbvrq4qo.png" width="32%" height="32%"></p><br><pre> <code class="markdown hljs">3DE6:0E26 03 B4 44 B3 ... ;   3DE6:0E26 03 BC CC B3 ... ;  </code> </pre> <br><p>  Genau das, was ich erwartet hatte - die dunkelrote Farbe (0x4) √§nderte sich zu hellrot (0xC).  Jetzt k√∂nnen Sie versuchen, den Haltepunkt <code>3DE6:0E28</code> , um den Wert an der Adresse zu √§ndern, z. B. <code>3DE6:0E28</code> und mit etwas Gl√ºck eine umgekehrte Ablaufverfolgung durchf√ºhren.  <em>[Ich hatte Gl√ºck.]</em> Der Haltepunkt f√ºhrte mich zu einer Zeile, die den Wert an der angegebenen Adresse direkt √§ndert: <code>xor es:[bx], al</code> .  Nachdem ich die Umgebung untersucht hatte, baute ich leicht eine Kette von Anrufen von der Hauptschleife bis zu diesem Punkt auf: <code>sub_1231E (xor es:[bx], al) &lt;- sub_12222 &lt;- sub_105F6 &lt;- sub_1038F ( )</code> . </p><br><p>  Ich werde nicht n√§her darauf eingehen, wie ich den Animationsprozess umgekehrt habe.  Dies ist eine ziemlich routinem√§√üige und methodische Arbeit, aber nicht sehr schwierig, wenn die Grenzen klar abgegrenzt sind (der empfangene Backtrack sind diese Grenzen).  Aber ich kann nicht anders, als dar√ºber zu sprechen, was am Ende passiert ist. </p><br><p>  Zun√§chst zum <em>.ANH-</em> Format.  Tats√§chlich handelt es sich um eine Reihe von Containern, und das erste Wort in der <em>ANH-</em> Datei ist die Anzahl der darin enthaltenen Container: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">anh_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> anh_entries; <span class="hljs-comment"><span class="hljs-comment">/* first entry hdr */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>;</code> </pre> <br><p>  Der Container selbst ist eine separat aufgenommene Animation des Hintergrundelements.  Sie k√∂nnen einen Header f√ºr den Container ausw√§hlen, der seine Bytegr√∂√üe und die Anzahl der Frames in der Animation enth√§lt, die er darstellt.  Neben dem Header befinden sich die Werte der Dauer (Verz√∂gerung) des n√§chsten Frames und des Versatzes der Bytes des Frames selbst relativ zu den Bytes des ersten Frames.  Die Anzahl solcher Paare entspricht offensichtlich der Anzahl der Frames: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">anh_entry_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> entry_size; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> total_frames; <span class="hljs-comment"><span class="hljs-comment">/* anh_frame_data_t first_frame_data */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* another frames data */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* anh_frame_hdr first_frame_hdr */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* another frames */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">anh_frame_data_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> frame_sleep; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> frame_offset; } <span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *anh; <span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span> *hdr = (<span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>*)anh; <span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span> *entry = (<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>*)(anh + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> u = <span class="hljs-number"><span class="hljs-number">0</span></span>; u &lt; anh-&gt;anh_entries; u++) { <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *p = (<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>*)entry; <span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span> *first_frame_data = (<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>*)(p + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *first_frame_bytes = p + (entry-&gt;total_frames * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; entry-&gt;total_frames; k++) { <span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span> *frame_data = first_frame_data + k; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *frame_bytes = first_frame_bytes + frame_data-&gt;frame_offset; ... } <span class="hljs-comment"><span class="hljs-comment">/* plus 2 bytes of padding */</span></span> p += (entry-&gt;entry_size + <span class="hljs-number"><span class="hljs-number">2</span></span>); entry = (<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>*)p; }</code> </pre><br><p>  Ein separater Frame besteht aus einem 4-Byte-Header, der seine linearen Abmessungen und Verschiebungen relativ zum Hintergrundbild sowie die Frame-Pixel enth√§lt, die von dem Algorithmus codiert wurden, der mir bereits durch <em>Run Length bekannt ist</em> : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">anh_frame_hdr</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> bg_x_offt; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> bg_y_offt; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> frame_width; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> frame_height; <span class="hljs-comment"><span class="hljs-comment">/* rle encoded frame bytes */</span></span> };</code> </pre> <br><p>  Die ‚Äû√úberlagerung‚Äú des Rahmens auf dem Hintergrund kann folgenderma√üen aussehen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *level_bg; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> frame_pix[<span class="hljs-number"><span class="hljs-number">8192</span></span>]; anh_frame_hdr *hdr = (anh_frame_hdr*)frame_bytes; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> frame_len = hdr-&gt;frame_width * hdr-&gt;frame_height; decode_rle(frame + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(anh_frame_hdr), frame_len, frame_pix); <span class="hljs-comment"><span class="hljs-comment">/* 0xFB4E - some magic value, have no idea what is it */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> bg_offt = (hdr-&gt;bg_y_offt * <span class="hljs-number"><span class="hljs-number">152</span></span>) + hdr-&gt;bg_x_offt + <span class="hljs-number"><span class="hljs-number">0xFB4E</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> bg_skip = <span class="hljs-number"><span class="hljs-number">152</span></span> - hdr-&gt;frame_width; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *p1 = frame_pix, *p2 = level_bg; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> i = hdr-&gt;frame_height; i != <span class="hljs-number"><span class="hljs-number">0</span></span>; i--) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> j = hdr-&gt;frame_width; j != <span class="hljs-number"><span class="hljs-number">0</span></span>; j--) { *p2++ ^= *p1++; } p2 += bg_skip; }</code> </pre> <br><p>  Dies ist das <em>.ANH-Format</em> , aber es gibt eine andere Struktur, mit der alles funktioniert: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bg_animation_control_table_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> total_frames; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *first_frame_data; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *first_frame_bytes; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> sleep; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> curr_frame; } <span class="hljs-keyword"><span class="hljs-keyword">bg_animation_control_table_t</span></span>;</code> </pre> <br><p>  Im Spiel selbst wird ein Array von mindestens vier Strukturen dieser Art global deklariert.  Nach dem Laden der n√§chsten <em>ANH-</em> Datei wird die Anzahl der darin enthaltenen Animationen ebenfalls in einer globalen Variablen gespeichert, und die Elemente des Arrays werden wie folgt initialisiert: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *anh; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> g_anim_amount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bg_animation_control_table_t</span></span> g_anim_ctl[<span class="hljs-number"><span class="hljs-number">4</span></span>]; ... <span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span> *hdr = (<span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>*)anh; <span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span> *entry = (<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>*)(anh + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>)); g_anim_amount = hdr-&gt;anh_entries; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> u = <span class="hljs-number"><span class="hljs-number">0</span></span>; u &lt; g_anim_amount; u++) { <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *p = (<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>*)entry; g_anim_ctl[u].total_frames = entry-&gt;total_frames; g_anim_ctl[u].first_frame_data = p + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>); g_anim_ctl[u].first_frame_bytes = g_anim_ctl[u].first_frame_data + (entry-&gt;total_frames * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>)); g_anim_ctl[u].sleep = *(<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span>*)(g_animation_control[u].first_frame_data); g_anim_ctl[u].curr_frame = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* plus 2 bytes of padding */</span></span> p += (entry-&gt;entry_size + <span class="hljs-number"><span class="hljs-number">2</span></span>); entry = (<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>*)p; }</code> </pre><br><p>  Wenden Sie zum Schluss die Animationen an: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> u = <span class="hljs-number"><span class="hljs-number">0</span></span>; u &lt; g_anim_amount; u++) { <span class="hljs-keyword"><span class="hljs-keyword">bg_animation_control_table_t</span></span> *anim = &amp;g_anim_ctl[u]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (anim-&gt;sleep-- == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span> *data = (<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>*)anim-&gt;first_frame_data + anim-&gt;curr_frame; <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (++anim-&gt;curr_frame == anim-&gt;total_frames) { anim-&gt;curr_frame = <span class="hljs-number"><span class="hljs-number">0</span></span>; data = (<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>*)anim-&gt;first_frame_data; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { data++; } anim-&gt;sleep = data-&gt;frame_sleep; } }</code> </pre> <br><p>  Und wir erhalten Folgendes <em>[Sie k√∂nnen viel mehr im Ressourcen-Viewer sehen]</em> : </p><br><div class="spoiler">  <b class="spoiler_title">R2.ANH.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/p7/lv/fn/p7lvfn5ytpjm5nsoctsumdncuaa.gif"></div></div><br><div class="spoiler">  <b class="spoiler_title">R6.ANH.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j6/nb/xp/j6nbxpj29jlrikbmjl8f62s4xmc.gif"></div></div><br><p>  Derzeit gibt es einige Probleme mit der Animation.  Das erste ist, dass ich in meinem Code alle verf√ºgbaren Animationen wiedergebe, aber das Original sucht nach einigen globalen Flags, die angeben, ob durch die n√§chste gescrollt werden soll.  Und das zweite, weil einige Animationen dem Bildschirm Objekte hinzuf√ºgen, die urspr√ºnglich nicht vorhanden waren.  Und da sich die Frames im Hintergrund ‚Äûstreiten‚Äú, verschwindet das Objekt bei jedem zweiten Kreis mit einem zyklischen Bildlauf einfach.  Hier zum Beispiel, wie es aussehen k√∂nnte: </p><br><div class="spoiler">  <b class="spoiler_title">R53.ANH.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/d3/5l/iu/d35liujvu6ash9gcdrecvoq9kuc.gif"></div></div><br><p>  Aber jetzt lassen wir es so wie es ist. </p><br><hr><br><p>  Erinnern Sie sich an den unbekannten Dekomprimierungsalgorithmus aus dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Teil</a> ?  Nachdem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">viiri</a> kaum mit der Entwicklung verbunden war, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">bestimmte er</a> nicht nur, um welche Art von Algorithmus es sich handelte, sondern schrieb auch eine eigene Version des Decoders und ersetzte das schreckliche dreizeilige St√ºck Assembler in der Codebasis.  In diesem Zusammenhang bat ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">viiri</a> , einen kurzen Aufsatz √ºber die geleistete Arbeit zu schreiben.  Was getan wurde, aber bevor ich es gebe, m√ºssen ein paar Worte √ºber die Theorie gesagt werden. </p><br><p>  Um Ressourcen zu komprimieren, verwendeten die Entwickler <em>von Neuromancer</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>den Huffman-Code</em></a> .  Dies ist eine der ersten effektiven Methoden zum Codieren von Informationen mithilfe von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Pr√§fixcodes</em></a> .  In der Codierungstheorie werden Codes mit einem Wort variabler L√§nge und solche, bei denen kein Codewort ein Pr√§fix eines anderen ist, <em>Pr√§fixcodes genannt</em> .  Das hei√üt, wenn das Wort <em>"a"</em> im Pr√§fixcode enthalten ist, ist das Wort <em>"ab"</em> im Code nicht vorhanden.  Mit dieser Eigenschaft k√∂nnen Sie die von einem solchen Code codierte Nachricht eindeutig in W√∂rter aufteilen. </p><br><p>  Die Idee des Huffman-Algorithmus besteht darin, dass wir, wenn wir die Wahrscheinlichkeit des Auftretens von Zeichen eines bestimmten Alphabets in der Nachricht kennen, das Verfahren zum Konstruieren von Codes variabler L√§nge beschreiben k√∂nnen, die aus einer ganzzahligen Anzahl von Bits bestehen.  Symbole mit einer h√∂heren Eintrittswahrscheinlichkeit erhalten k√ºrzere Codes und Symbole mit einer geringeren Wahrscheinlichkeit l√§ngere Codes.  Im Allgemeinen wird die Codierungsprozedur darauf reduziert, den optimalen Codebaum zu erstellen und auf seiner Basis das Nachrichtensymbol dem entsprechenden Code zuzuordnen.  Mit der Pr√§fix-Eigenschaft des empfangenen Codes k√∂nnen Sie die komprimierte Nachricht eindeutig dekodieren. </p><br><div class="spoiler">  <b class="spoiler_title">Huffman.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/fa/is/hb/faishbcvf0flxiao-mfmnx3llvu.gif"></div></div><br><p>  Der Algorithmus hat einen wesentlichen Nachteil (in der Tat nicht einen, aber jetzt ist nur dieser wichtig).  Tatsache ist, dass der Decodierer die Tabelle der H√§ufigkeit des Auftretens von Zeichen, die vom Codierer verwendet werden, kennen muss, um den Inhalt einer komprimierten Nachricht wiederherzustellen.  In dieser Hinsicht muss zusammen mit der codierten Nachricht entweder eine Wahrscheinlichkeitstabelle oder der Codebaum selbst (eine im Spiel verwendete Option) √ºbertragen werden.  Die Gr√∂√üe zus√§tzlicher Daten kann relativ gro√ü sein, was die Komprimierungseffizienz erheblich beeinflusst. </p><br><p>  Etwas dar√ºber, wie Sie damit umgehen k√∂nnen, sowie √ºber Ihren Decoder und den im Spiel implementierten, sagt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">viiri</a> : </p><br><blockquote>  Es ist erw√§hnenswert, dass das gesamte Spiel vollst√§ndig von Hand in Assembler geschrieben wurde, sodass der Code interessante L√∂sungen, Tricks und Optimierungen enth√§lt. <br><br>  Nach den Verfahren.  Die Funktion <code>sub_1ff94</code> ( <code>build_code_table</code> ) wird ben√∂tigt, um einen komprimierten Huffman-Baum aus einer Datei zu laden.  Um einen statischen Huffman (manchmal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dynamisch</a> , und diese Anforderung gilt nicht f√ºr ihn) zu dekodieren, muss zusammen mit der Nachricht ein Codebaum √ºbertragen werden, bei dem Huffman-Codes realen Zeichencodes zugeordnet werden.  Dieser Baum ist gro√ü genug und daher w√§re es sch√∂n, ihn irgendwie effizient zu speichern.  Am korrektesten ist es, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kanonische Codes</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MOAR</a> ) zu verwenden.  Aufgrund ihrer Eigenschaften gibt es eine sehr interessante und effektive M√∂glichkeit, den Baum zu speichern (verwendet bei der Implementierung der <em>Deflate-</em> Komprimierungsmethode des <em>PKZip-</em> Archivierers).  Im Spiel werden jedoch keine kanonischen Codes verwendet, sondern es wird eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">direkte Baumdurchquerung</a> durchgef√ºhrt und f√ºr jedes Scheitelpunktbit wird 0 in den Ausgabestream geschrieben, wenn der Knoten kein Blatt ist, oder Bit 1, wenn der Knoten ein Blatt ist, und dann sind die n√§chsten 8 Bits der Zeichencode in diesem Knoten.  Beim Dekodieren wird eine √§hnliche Baumdurchquerung durchgef√ºhrt, die wir im Spiel sehen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Es</a> gibt ein Beispiel und eine Erkl√§rung. </blockquote><br><div class="spoiler">  <b class="spoiler_title">build_code_table</b> <div class="spoiler_text"><pre> <code class="hljs sql">build_code_table proc near <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> getbit ;     jb short loc_1FFA9 ;   ... shl dx, 1 inc bx <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> build_code_table ;  build_code_table    or dl, 1 <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> build_code_table ;  build_code_table    shr dx, 1 dec bx ret loc_1FFA9: <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> sub_1FFC2 ;      (8 ) ... ;     ret sub_1FF94 endp sub_1FFC2 proc near sub di, di mov ch, 8 loc_1FFC6: <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> getbit rcl di, <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">dec</span></span> ch jnz <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> loc_1FFC6 retn sub_1FFC2 endp</code> </pre> </div></div><br><blockquote>  <code>getbit</code> ( <code>sub_1ffd0</code> ) liest ein Bit aus dem Eingabestream.  Ihre Analyse l√§sst den Schluss zu, dass einzelne Bits aus dem 16-Bit- <code>lodsw</code> extrahiert werden, dessen Wert durch den <code>lodsw</code> , der zwei Bytes aus dem Stream l√§dt, aus dem Speicher geladen wird. Da der <em>Intel-Prozessor jedoch</em> eine <em>Little-Endian-</em> Bytereihenfolge hat, ordnet <code>xchg</code> die H√§lfte des Registers neu an.  Ferner ist die Reihenfolge der Bits im Strom etwas unlogisch - das erste ist nicht das kleinste, sondern das h√∂chstwertige Bit.   ,   <code>shl</code>      ,        <code>jb</code> . </blockquote><br><div class="spoiler"> <b class="spoiler_title">getbit</b> <div class="spoiler_text"><pre> <code class="hljs delphi">getbit proc <span class="hljs-keyword"><span class="hljs-keyword">near</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> cl, cl jz short loc_1FFD9 dec cl <span class="hljs-keyword"><span class="hljs-keyword">shl</span></span> ax, <span class="hljs-number"><span class="hljs-number">1</span></span> retn loc_1FFD9: cmp si, <span class="hljs-number"><span class="hljs-number">27</span></span>B6h jz short loc_1FFE7 ;   lodsw xchg al, ah mov cl, <span class="hljs-number"><span class="hljs-number">0</span></span>Fh <span class="hljs-keyword"><span class="hljs-keyword">shl</span></span> ax, <span class="hljs-number"><span class="hljs-number">1</span></span> retn loc_1FFE7: call sub_202FC ;      lodsw xchg al, ah mov cl, <span class="hljs-number"><span class="hljs-number">0</span></span>Fh <span class="hljs-keyword"><span class="hljs-keyword">shl</span></span> ax, <span class="hljs-number"><span class="hljs-number">1</span></span> retn getbit endp</code> </pre> </div></div><br><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">viiri</a>  ,    : </p><br><div class="spoiler"> <b class="spoiler_title">huffman_decompress</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">node_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> value; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">node_t</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">, *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class">;</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *g_src = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getbits</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numbits)</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> uint32_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getl_le</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*       4-    */</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> node_t* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build_tree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span> *node = (<span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span>*)<span class="hljs-built_in"><span class="hljs-built_in">calloc</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getbits(<span class="hljs-number"><span class="hljs-number">1</span></span>)) { node-&gt;right = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; node-&gt;left = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; node-&gt;value = getbits(<span class="hljs-number"><span class="hljs-number">8</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { node-&gt;right = build_tree(); node-&gt;left = build_tree(); node-&gt;value = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">huffman_decompress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *src, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *dst)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length, i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span> *root, *node; g_src = src; length = getl_le(); node = root = build_tree(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (i &lt; length) { node = getbits(<span class="hljs-number"><span class="hljs-number">1</span></span>) ? node-&gt;left : node-&gt;right; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!node-&gt;left) { dst[i++] = node-&gt;value; node = root; } } ... }</code> </pre></div></div><br><p>       : </p><br><blockquote>    <code>build_code_table</code>    .     ,         ,                .     ,                 .     ,           ,    ,       ‚Äî   (    <code>huffman_decompress</code> ). <br><br>     ?  Richtig!       !  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> ,   .       ( <em> </em> ):          . ,         3- ,         <em>N</em>  ,  <em>(3 ‚Äî N)</em>     . </blockquote><p>       <code>ABCD</code> : <code>A - 0b, B - 10b, C - 110b, D - 111b</code> .       (  ),      ,     : </p><br><table><thead><tr><th>  Code </th><th>  L√§nge </th><th>  </th></tr></thead><tbody><tr><td> <strong>0</strong> 00b </td><td>  1 </td><td>  A. </td></tr><tr><td> <strong>10</strong> 0b </td><td>  2 </td><td>  B. </td></tr><tr><td> <strong>110</strong> b </td><td>  3 </td><td>  C. </td></tr><tr><td> <strong>111</strong> b </td><td>  3 </td><td>  D. </td></tr></tbody></table><br><p>       ,               .  , , ,      <code>010b</code> ‚Äî     .       .  ,   'A'   <code>0b</code> ,     <em> </em>  ,    .     : </p><br><table><thead><tr><th>  Index </th><th>  Code </th><th>  L√§nge </th><th>  </th></tr></thead><tbody><tr><td>  0 </td><td> <strong>0</strong> 00b </td><td>  1 </td><td>  A. </td></tr><tr><td>  1 </td><td> <strong>0</strong> 01b </td><td>  1 </td><td>  A. </td></tr><tr><td>  2 </td><td> <strong>0</strong> 10b </td><td>  1 </td><td>  A. </td></tr><tr><td>  3 </td><td> <strong>0</strong> 11b </td><td>  1 </td><td>  A. </td></tr><tr><td>  4 </td><td> <strong>10</strong> 0b </td><td>  2 </td><td>  B. </td></tr><tr><td>  5 </td><td> <strong>10</strong> 1b </td><td>  2 </td><td>  B. </td></tr><tr><td>  6 </td><td> <strong>110</strong> b </td><td>  3 </td><td>  C. </td></tr><tr><td>  7 </td><td> <strong>111</strong> b </td><td>  3 </td><td>  D. </td></tr></tbody></table><br><p> ,    <code>011010111b</code> : </p><br><ul><li>     : <code>011b</code> ; </li><li>  ,   <code>011b (3)</code> ,   <code>A</code> ,     ; </li><li>   <code>011b</code>    1, ,                 : <code>110b</code> ; </li><li>  ,   <code>110b (6)</code> ,   <code></code> ,     ; </li><li>   ,     . </li></ul><br><p>  ¬´¬ª     8- .      256 .          8 .   ,    ,  : </p><br><blockquote>           :      ‚Äî  ,          .   ,    .   4 ‚Äî   32- . </blockquote><p>     ,   .  . </p><br><hr><br><p>       ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>github</em></a> .     ,       ,     ,   -   <em>[ ,    README.md]</em> . </p><br><p>  ,    ,     2015- : </p><br><ul><li> <em>LibNeuroRoutines (, MASM)</em> ‚Äî ,       ,    .    ( <code>neuro_routines.h</code> )           ,   .     , : <br><ul><li>   ( <code>huffman_decompression.c</code> , <code>decompression.c</code> ); </li><li>    ( <code>cp437.c</code> ); </li><li>     ( <code>dialog.c</code> ); </li><li>    ( <code>audio.c</code> ). </li></ul></li><li> <em>NeuromancerWin64 ()</em> ‚Äî     .                .     ,       <em>¬´¬ª</em> ,    ,       .       <em>CSFML</em> ( <em>SFML</em>   <em>C</em> ). </li><li> <em>ResourceBrowser (C++)</em> ‚Äî  .    <em>MFC</em> -,         <em>.DAT</em> -.    : <br><ul><li>     <em>BMP (8bpp)</em>  ( <em>IMH</em> , <em>PIC</em> ); </li><li>   ( <em>ANH</em> ); </li><li>     <em>WAV (PCM, 44100Hz, 8bps, mono)</em>  ( <em>SOUND</em> ). </li></ul></li></ul><br><p>    <em>LibNeuroRoutines</em>   .    <em>LibNeuroRoutines</em>  <em>CSFML</em> ( <em>ResourceBrowser</em>   <em>SFML</em>   ). </p><br><p>       64- <em>Windows</em>     .   ,   <em>LibNeuroRoutines</em>  64- <em>MASM (Microsoft Macro Assembler)</em> .   ‚Äî    ,      64- . ,      <em>NASM</em>  <em>FASM</em> ,    ,             .      <em>VS 2015</em> ‚Äî <em>MASM</em>   . </p><br><p>      ,   .         <em>C</em> .     ,           (  ,   <em>MFC</em> ). </p><br><p>   ,       .   - ,      . </p><br><hr><br><p>           .  ? ,  .            ,   .    - ,      . ,    ,     ,     .  (). </p><br><ol><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Make sound from the speaker using assembly</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Programming the PC Speaker</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PC Speaker</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Programmable Interval Timer</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Making C Sing</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beyond Beep-Boop: Mastering the PC Speaker</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417639/">https://habr.com/ru/post/de417639/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417621/index.html">Was ist passiert, als wir die Ausstellung geknackt haben?</a></li>
<li><a href="../de417627/index.html">Hyper CRM oder Mini ERP? Das Gesch√§ft ist durcheinander</a></li>
<li><a href="../de417629/index.html">Delphi und C ++ Builder Community Edition</a></li>
<li><a href="../de417631/index.html">CSS Grid Video Tutorial</a></li>
<li><a href="../de417637/index.html">Entwicklung eines Editors zum Erstellen von Websites / Landungen (Erfahrung)</a></li>
<li><a href="../de417641/index.html">10 Sommerkurse f√ºr maschinelles Lernen</a></li>
<li><a href="../de417643/index.html">Ritter des Umhangs und Rootkits: Was gibt es √ºber Hacker zu sehen? Fernsehsendungen</a></li>
<li><a href="../de417645/index.html">Programmierwettbewerb: Handel (Zwischenergebnisse und Ank√ºndigungen)</a></li>
<li><a href="../de417647/index.html">Eine Gesetzesvorlage zum Schutz personenbezogener Daten in Wei√ürussland - was ‚Äûdrin‚Äú ist</a></li>
<li><a href="../de417649/index.html">OpenAI √ºberwindet signifikante AI-Einschr√§nkungen f√ºr Dota 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>