<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐คฒ๐ป ๐๐พ ูุญูุธ ุนูู ูุญุฏุฉ ุชุญูู RAID ุ ุฃู ููููุฉ ุฅุทุนุงู Varia ุจุงุณุชุฎุฏุงู Iops ๐คฐ ๐ค ๐๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุนุตุฑ ุงูุฎุฏูุงุช ุงูุณุญุงุจูุฉ ูุฏููุง ุ AWS Lambda ูุงูุงุณุชุถุงูุฉ ุงููุดุชุฑูุฉ ุงูุฃุฎุฑู ูููุงุฑุฏ ุงูุญูุณุจุฉ ุบูุฑ ุงูููููุณุฉ ุชูุงููุง ุ ุฃุญูุงููุง ุฃุฑูุฏ ุงููููู ูู ุจูุฏู. ุจุงูุฅุถุงูุฉ ุฅูู ุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุญูุธ ุนูู ูุญุฏุฉ ุชุญูู RAID ุ ุฃู ููููุฉ ุฅุทุนุงู Varia ุจุงุณุชุฎุฏุงู Iops</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423513/" style=";text-align:right;direction:rtl"><img align="right" src="https://habrastorage.org/webt/tk/12/jd/tk12jdebhacj1uexhpnwt0bbzo0.jpeg">  ูู ุนุตุฑ ุงูุฎุฏูุงุช ุงูุณุญุงุจูุฉ ูุฏููุง ุ AWS Lambda <s>ูุงูุงุณุชุถุงูุฉ ุงููุดุชุฑูุฉ</s> ุงูุฃุฎุฑู ูููุงุฑุฏ ุงูุญูุณุจุฉ ุบูุฑ ุงูููููุณุฉ ุชูุงููุง ุ ุฃุญูุงููุง ุฃุฑูุฏ ุงููููู ูู ุจูุฏู.  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฑุบุจุฉ ุ ูู ุจุนุถ ุงูุฃุญูุงู ุ ููุงู ุญุงุฌุฉ ุฃูุถูุง ุฅูู ุชุญุฑูู ููุชุฌ ุจุฑูุงูุฌ ุฃู ุขุฎุฑ ุจุนูุงูุฉ ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุชูุงููู ุงููุธุงู ุงูุฃุณุงุณู.  ููููู ุฏุงุฆููุง ุงูุนุซูุฑ ุนูู ุจุนุถ ุงููุนุฏุงุช ุงูุฒุงุฆุฏุฉ ุ ูุฃุญูุงููุง ูุชุจูู ุฃูู ูุชู ุชุฌููุน ูู ุดูุก ูุชุดุบููู.  ุฅุฐุง ูุงูุช ูุฐู ุงูููุงุฆุถ ุชูุซู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูุน 4-6 ููู ุนูู ุงูุฃูู ูุฐุงูุฑุฉ ูู 64 ุฌูุฌุงุจุงูุช - ุจุดูู ุนุงู ููุชุงุฒ ุ ููููู ุฃุฎุฐ ESXi ูุงูุนูู ูุน ุฃู ุดูุก.  ูุดููุฉ ูุงุญุฏุฉ: ูุน ุณุนุฉ ุงููุฑุต ุนูู ุงูุฃุฌูุฒุฉ ุงูููุฒููุฉ ูู VMWare - ูุง ุดูุก ุนูู ุงูุฅุทูุงู.  ุฃุฏุงุก ูุญุฑูุงุช ุงูุฃูุฑุงุต ุงูุตูุจุฉ ุงููุฑุฏูุฉ ุงููุญููุฉ ููุฎูุถุฉ ุ ูููุฏุงู ูุญุชููุงุช ุจุฑุบู ูุงุญุฏ ูู ูุฑุงุบ ูู ุงููุฑู ุงูุญุงุฏู ูุงูุนุดุฑูู ูุดุจู ุงูุชุฑุญูุจ.  ุฏุนููุง ูุญุงูู ุชูุตูู ุดูุก ูุง ุนุจุฑ ุงูุดุจูุฉ. <br><br>  TL ุ DR&gt; ุฌูุนูุฉ ุ ููุงุฒูุฉ ุ ุญุฏ rr ุ ูุฐุง ูู ุดูุก. <br><a name="habracut"></a><br>  ูู ุงููุงูุน ุ ูุง ูุชุนูู ุงููุต ุฃุฏูุงู ุจุญูููุฉ ุฃู ูุฐุง ูููู ุจุดูู ุนุงู ุฃู ููุน ูู ุงูุฎุจุฑุฉ.  ุงูุฅูุชุฑูุช ูููุก ุจุงูููุงูุงุช ุงูุฎุงุตุฉ ุจุงูุฏูู (ุฑุงุฌุน ููุง ุ ุซู ุงูุชุงูู ุ ุงูุชุงูู ุ ุชู) ุญูู ููููุฉ ุฅุฑุณุงู ุณุนุฉ ูุฑุต iSCSI.  ุฃูุง ุฃูุชุจ ููุท ูู ุฃุฌู ุงุณุชุจุนุงุฏ "ุฃุฎุทุงุก ุงููุงุฌูู" ููุดุงุฑูุฉ ุงููุญุธุงุช ุงูุชู "ูุณูุฑ ูููุง ูู ุดูุก ุจุดูู ุฎุงุทุฆ" (ูุณูู ูุฐูุจ ุ ูุงู ููุฑูู ุนูู ุญู) ุ ูุนูุฏูุง ุชุญุงูู ุชุญููู ุงูุญู ุ ูุฅูู ุจุจุณุงุทุฉ ูุชุนุทู. <br><br>  ูุฐุง ุ ุณูุญุงูู ุฎูู "ูุฑุงูุจูุง ุงูููุฒูู" ุจูุฌููุนุฉ ุฃูุฑุงุต ุฎุงุฑุฌูุฉ ูุชุตูุฉ ุนุจุฑ ุงูุดุจูุฉ.  ูุธุฑูุง ูุฃู ูู ุดูุก ูุฏูุฑ ุญูููุง "ุจุดูู ุบูุฑ ูููู" ุ ููููู ุฃูุฑุงุต FreeNAS ู 4 ุฃูุฑุงุต SATA ุ ูุงูุชู ุชุชู ุฎุฏูุชูุง ุจูุงุณุทุฉ ูุชูุณุท โโ3 ุฌูุฌุง ูุฑุชุฒ 45 ูุงูููุชุฑ ูู ุงููุฆุฉ.  ูุญู ููุธุฑ ุฅูู Ebay ุ ููุฃููุงู ูุงุจูุฉ ููููุงุฑูุฉ ูุน ูุญุฏุฉ ุชุญูู RAID ุงููุณุชุฎุฏูุฉ ุ ูุณุญุจูู ุจุถุน ุจุทุงูุงุช ุดุจูุฉ i350-T4 ูู ููุงู.  ูุฐู ูู ูุญููุงุช ุฌูุฌุงุจุช ุฃุฑุจุนุฉ ููุงูุฐ ูู Intel.  ููููุง ููู ุ ุณูู ูุฑุจุท ุงูุชุฎุฒูู ุจุจุฑูุงูุฌ Hypervisor. <br><br>  ุนุฏ ููููุง.  ูุจูุบ ูุชูุณุท โโุณุฑุนุฉ ููู ุงูุจูุงูุงุช ููุฑุต SATA ูุชูุณุท โโ160-180 ููุฌุงุจุงูุช / ุซุงููุฉ ูุน ุนุฑุถ ูุงุฌูุฉ 6 ุฌูุฌุงุจุช / ุซุงููุฉ.  ูู ุงููุงูุน ุ ูุง ูุชุฌุงูุฒ ูุนุฏู ููู ุงูุจูุงูุงุช ุงููุนูู ูู HDD 2 Gb / s.  ูุฐุง ููุณ ุฑูููุง ูุจูุฑูุง ุ ูุธุฑูุง ูุฃููุง ูุฎุทุท ููุชูุงุตู ุนูู 4 ููุงูุฐ ุฌูุฌุงุจุช (ููููุฉ ุชุญููู 4x1Gbps ุฅูู 4Gbps - ุณููุงูุด ุฃูุซุฑ).  ูู ุดูุก ุจุณุฑุนุงุช ูุตูู ุนุดูุงุฆูุฉ ุฃุณูุฃ ุจูุซูุฑ - ููุง ูู ุดูุก ููุน ุชูุฑูุจูุง ูู ูุณุชูู ุงูุฃูุฑุงุต ุงููุฑูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/7y/cn/re/7ycnrez1dwgdr_nsgkti4zjdsjw.png"></div><br>  ูุธุฑูุง ูุฃู ููู ุชุนุฑูู ุชุญููู ุงููุฑุต ููุนุฏูุฏ ูู ุฃูุธูุฉ ุชุดุบูู ุงูุถูู ุจุนูุฏูุง ุนู ุงูุฎุทูุฉ ุ ุฃูุฏ ุฃู ุฃุฑู ุงููุฒูุฏ ูู ุงูุฃุฑูุงู ุงูููุชุนุฉ.  ูุชุตุญูุญ ุงููุถุน ูู ูุธุงู ุงููููุงุช ุงูุฎุงุต ุจุจุฑูุงูุฌ hypervisor (VMFS v6) ุ ูุจูุบ ุญุฌู ุงููุชูุฉ 1 ููุบุง ุจุงูุช ุ ููุง ูุณุงุนุฏ ุนูู ุถุบุท ุงูุนุฏูุฏ ูู ุงูุนูููุงุช ุงูุนุดูุงุฆูุฉ ููุณุฑุน ุงููุตูู ุฅูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุฃูุฑุงุต ุงูุงูุชุฑุงุถูุฉ.  ูููู ุญุชู ูุน ูุฐุง ุ ูู ูููู ุงููุฑุต ุงููุนูู ูุงุญุฏูุง ูุงูููุง ููุชุนุงูู ูุน ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูู ุฌููุน "ุงูุถููู". <br><br>  ุณุฃุญุฌุฒ ุนูู ุงูููุฑ - ูู ุดูุก ุณูููู ุฃูุซุฑ ููุทููุฉ ุฅุฐุง ูุงู ูุฏูู ุฃูุซุฑ ูู ูุญููู "ุดุจูุฉ ุงูุชุฎุฒูู".  ูููู ูู ESXi ุจุชุฑุฎูุต ุฃุญุงุฏู ุงููุนุงูุฌ ุงูุงุชุตุงู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃูุฑุงุต ุงููุญููุฉ ุ ุจููุนูู ูู ุงูุชุฎุฒูู - NFS ู iSCSI.  ูุชุถูู NFS ุงููุตูู ุนูู ูุณุชูู ุงูููู ููู ุฃูุถูุง ุฌูุฏ ุจุทุฑููุชู ุงูุฎุงุตุฉ.  ุนูู ุฐูู ุ ููููู ูุดุฑ ุงูุถููู ุบูุฑ ุงููุชุณุงูููู ูู ุฃุฏุงุก ุงููุฑุต.  ุฅูู ููู ุฏูุงุนู ุณุฑูุฑู ุฃู ุงููุณุฎ ุงูุงุญุชูุงุทู ููู.  ููููู ูุชุญ ููุณ ูุฑุฉ NFS ูู ููุงู ุขุฎุฑ ููุณุฎ ููุทุงุช vm.  ุจุดูู ุนุงู ุ ูุน ูุงุฌูุฉ ุดุจูุฉ ูุงุญุฏุฉ (ุฅุฐุง ูู ุชูู 10GE ุ ุจุงูุทุจุน) - NFS ูู ุงุฎุชูุงุฑู. <br><br>  ISCSI ูู ุงูุนุฏูุฏ ูู ุงููุฒุงูุง ุนูู NFS.  ูู ุฃุฌู ุชุญููููุง ุจุงููุงูู ุ ูููุง ุจุงููุนู ุจุงูุงุณุชุนุฏุงุฏ - ุจุนุฏ ุฃู ูููุง ุจุงููุนู ุจุชุฑููุจ 4 ููุงูุฐ ุฌูุฌุงุจุช ูุดุจูุฉ ุงูุชุฎุฒูู.  ููู ูุญุฏุซ ุชูุณูุน ุงููุทุงู ุงูุชุฑุฏุฏู ููุดุจูุฉ ุนุงุฏุฉ ุจุณุฑุนุฉ ูุงุฌูุฉ ูุนุฑููุฉุ  ูุฐุง ุตุญูุญ ุ ุงูุชุฌููุน.  ูููู ูู ุฃุฌู ุงูุงุณุชุฎุฏุงู ุงููุงูู ููููุงุฉ ุงููุฌูุนุฉ ุ ููุงู ุญุงุฌุฉ ุฅูู ุนุฏุฏ ูู ุงูุดุฑูุท ุ ููุฐุง ุฃูุซุฑ ููุงุกูุฉ ููุชูุงุตู ุจูู ุงููุญููุงุช ุฃู ููุตูุฉ ุดุจูุฉ ููุฑุทุฉ.  ูููุฑ ุชูููุฐ ุจุฑูุชูููู iSCSI ูุธููุฉ ูุซู ุชุนุฏุฏ ุงููุณุงุฑุงุช (ุญุฑููุง ุ ุงูุนุฏูุฏ ูู ุงููุณุงุฑุงุช) - ุงููุฏุฑุฉ ุนูู ุชูุตูู ููุณ ุงูุญุฌู ูู ุฎูุงู ูุงุฌูุงุช ุดุจูุฉ ูุฎุชููุฉ.  ุจุงูุทุจุน ุ ุญูู ุฅููุงููุฉ ููุงุฒูุฉ ุงูุชุญููู ููุงู ุฃูุถูุง ุ ุนูู ุงูุฑุบู ูู ุฃู ุงูุบุฑุถ ุงูุฑุฆูุณู ูู ุงูุชุณุงูุญ ูุน ุฎุทุฃ ุดุจูุฉ ุงูุชุฎุฒูู.  (ูู ุงูุฅูุตุงู ุ ูุฏุนู NFSv4.1 ุฑุจุท ุงูุฌูุณุฉ ุงุณุชูุงุฏูุง ุฅูู ุงูุณุญุฑ ุงูุฃูุซุฑ ุชูุฏููุง ูุซู RDMA ู MPTCP ุ ูููู ูุฐู ูุญุงููุฉ ูุชุญููู ูุดุงูู ุงููุตูู ุฅูู ุงูููู <s>ูู ุฑุฃุณ</s> ูุคูู <s>ุฅูู ุญุงูุฉ ุตุญูุฉ</s> ุฅูู ูุณุชููุงุช ุฃูู.) <br><br>  ูุฐุง ุ ุจุฏุงูุฉ ุณููุดุฑ ูุฏููุง.  ูุนุชูุฏ ุฃู FreeNAS ูุซุจุช ุ ุนููุงู IP ุงูุฎุงุต ุจุงูุฅุฏุงุฑุฉ ูุดุญู ุจุงูุชุธุงู ูุงุฌูุฉ ุงูููุจ ุฅูููุง ุ ููุทุน ุงูุตููู ู zvol ุนููู ุจูุง ูุชูู ุชูุงููุง ูุน ููุงุนุงุชูุง ุงูุฏุงุฎููุฉ.  ูู ุญุงูุชูุง ุ ูุฐุง ูู ูุญุฑู ุฃูุฑุงุต 4 ร 500 ุฌูุฌุงุจุงูุช ูุฏูุฌ ูู raidz1 (ุงูุฐู ูุนุทู 1.3 ุชูุฑุงุจุงูุช ูู ุงูุณุนุฉ ุงููุนุงูุฉ ููุท) ุ ู zvol ุจุญุฌู 1 ุชูุฑุงุจุงูุช ุจุงูุถุจุท.  ุณูููู ุจุชููุฆุฉ ูุงุฌูุงุช ุดุจูุฉ i350 ุ ูู ุฃุฌู ุงูุจุณุงุทุฉ ุ ููุจู ุฃู ููุชูู ุงูุฌููุน ุฅูู ุดุจูุงุช ูุฑุนูุฉ ูุฎุชููุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/3f/ci/-b/3fci-bzni4siodupm_admdf8nfe.png"></div><br>  ุซู ูููู ุจุชูููู ูุฑุฉ iSCSI ุจุงุณุชุฎุฏุงู ุทุฑููุฉ "ุงูุชุงูู ุ ุงูุชุงูู ุ ุชู".  ุนูุฏ ุชูููู ุงูุจูุงุจุฉ ุงูุฅููุชุฑูููุฉ ุ ูุง ุชูุณ ุฅุถุงูุฉ ุฌููุน ูุงุฌูุงุช ุงูุดุจูุฉ ุงููุฎุตุตุฉ ูู iSCSI ููุงู.  ูุฌุจ ุฃู ูุจุฏู ุดูุก ูุซู ุงูุตูุฑ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/uk/4w/hu/uk4whuf8w2gxvts-vxu-3oupyn8.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yq/pp/wg/yqppwgzsqzxkxkffbatxbgxiiy0.png"></div><br>  ุณุชุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงูุงูุชูุงู ุฅูู ุญุฏ ูุง ูุชุญุฏูุฏ ุงููุฏู - ุนูุฏ ุชูุฏูู ูุญุฏุฉ ุชุฎุฒูู ุ ูู ุงูุถุฑูุฑู ูุฑุถ ุญุฌู ูุชูุฉ 512 ุจุงูุช.  ุจุฏูู ูุฐุง ุ ุฑูุถ ุงูุจุงุฏุฆ ESXi ุชุญุฏูุฏ ุงููุฌูุฏุงุช ุงููุนุฑูุถุฉ ุนูู ุงูุฅุทูุงู.  ูู ุฃุฌู ุงูุฅุฎูุงุต ุ ูู ุงูุฃูุถู ุชุนุทูู ุฃุญุฌุงู probros ูููุชูุฉ ุงููุงุฏูุฉ (ูุงูุชู ููุณุช ุนูู zvol ููุง ูููู ุฐูู) ูุชูููู ูุถุน ุฏุนู Xen. <br>  ูุน FreeNAS ูู ุงูููุช ุงูุญุงูู. <br><br>  ูู ูุงุญูุฉ ESXi ุ ูุตุนุจ ุฅูุดุงุก ุดุจูุฉ.  ูุฑุฉ ุฃุฎุฑู ุ ูุนุชูุฏ ุฃูู ุชู ุชุซุจูุช ุจุฑูุงูุฌ Hypervisor ููุณู ูุฅุฏุงุฑุชู ุนูู ูููุฐ ูููุตู.  ุณุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ 4 ูุงุฌูุงุช VM Kernel ุชูุชูู ุฅูู 4 ูุฌููุนุงุช ููุงูุฐ ูุฎุชููุฉ ูู 4 ูุญููุงุช ุงูุชุฑุงุถูุฉ ูุฎุชููุฉ.  ููู ูู ูุฐู ุงูููุงุชูุญ ูููุฐูุง ุงููุนูู ูููุตูุฉ ุงูุตุงุนุฏุฉ.  ูุฃุฎุฐ ุนูุงููู vmk # ุ ุจุงูุทุจุน ุ ูู ุงูุดุจูุงุช ุงููุฑุนูุฉ ุงูููุงุจูุฉ ุ ุนูู ูุญู ูุดุงุจู ูุชูููู ููุงูุฐ ุงูุชุฎุฒูู.  ูุนุฏ ุชุฑุชูุจ ุชุนููู ุงูุนูุงููู ููููุง ุจุดูู ุนุงู - ุฅูุง ุฃู ูููู ุจุชูุตูู ุจุทุงูุงุช ูููุฐ ุฅูู ุขุฎุฑ ุจุฏูู ููุชุงุญ ุ ุฃู ููุฏู ุฑูุงุจุท ูุฎุชููุฉ ูุดุจูุงุช ูุฎุชููุฉ (ุญุณููุง ุ ูุฐุง ุฅุฐุง ูุงู ุจุทุฑููุฉ ููุจุงูุบูู) ุ ูุฐุง ูุฅู ูุทุงุจูุฉ ุงููููุฐ ุงููุนูู ูููุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qe/hq/ox/qehqoxnpinkpxs1fy2ajiamu7om.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/cn/vr/q1/cnvrq1slbat9sqajuqy0wvudadi.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/3x/ml/1b/3xml1bfwyrzwqqkzmin3pwz4ltw.png"></div><br>  ุนูุฏ ุฅูุดุงุก ุดุจูุฉ ูู iSCSI ุ ูููู ุงูุชูุงููุง ุฎุงุตูุง ููุนููุฉ MTU.  ูุฐุง ูู ุงูุญุงู ุชูุงููุง ุนูุฏูุง ูููู "ุงูุญุฌู ููููุง" - ูุญู ูุฃุฎุฐ ุงูุญุฏ ุงูุฃูุตู ุงูุฐู ูููู ูุฌููุน ููููุงุช ุงูุดุจูุฉ ุชุซุจูุชู.  ุฅุฐุง ูุงูุช ุงูุจุทุงูุงุช ูุชุตูุฉ ูุจุงุดุฑุฉ ุ ููููู ุชูุฌูู mtu 9000 ุนูู ููุง ุงูุฌุงูุจูู ุ ุนูู ESXi ู FreeNAS.  ููุน ุฐูู ุ ุณุชุฏุนู ุงูููุงุชูุญ ุงูุนุงุฏูุฉ ูุฐู ุงููููุฉ.  ูููู ping ุ ููุฑู ุฃู ุงูุดุจูุฉ ุทุจูุนูุฉ ุ ูุชูุฑุฑ ุญุฒู ุงูุญุฌู ุงููุทููุจ.  ุนุธูู.  ุฃุดุนููุง ุงููุงุฑ ูู ุงูุจุงุฏุฆ. <br><br>  ูู ุจุชุดุบูู iSCSI ุ ุฃุถู ุนูุงููู IP ุฅูู ูุณู ุงูุชูููู ุงูุฏููุงูููู (ุงูุชุฎุฒูู -&gt; ุงููุญููุงุช -&gt; ุชูููู iSCSI -&gt; ุงูุฃูุฏุงู ุงูุฏููุงููููุฉ).  ุจุนุฏ ุงูุญูุธ ุ ุณูุชู ุงุณุชุทูุงุน ุจูุงุจุงุช iSCSI ุนูู ูุฐู ุงูุนูุงููู ุ ุณูุญุฏุฏ ุงูุจุงุฏุฆ ุฃู ูู ูุงุญุฏ ูููู ูุฏูู ููุณ ุงูุญุฌู ููุชุตู ุจู ูู ุฌููุน ุงูุนูุงููู ุงููุชุงุญุฉ (ููุณ ุงููุณุงุฑ ุงููุชุนุฏุฏ).  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุฎุฒู ุจูุงูุงุช ุนูู ุงูุฌูุงุฒ ุงูุฐู ูุธูุฑ. <br><br>  ุจุนุฏ ุฐูู ุ ููููู ุทุฑุญ ุงูุฌูุงุฒ ุงูุธุงูุฑู ูููุงุณ ูุง ุญุตููุง ุนููู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/4t/hf/bd/4thfbd-txhgteetxgb6zs3gggjo.png"></div><br>  ูุชุงุฆุฌ ููุณุช ูุซูุฑุฉ ููุฅุนุฌุงุจ.  ุงูุชุญ ูุญุฏุฉ ุงูุชุฎุฒูู ุ ูุงุนุฑุถ ุญุงูุฉ ุงูุดุจูุฉ ุงูุญุงููุฉ ููู ุจุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช. <br><br> <code>root@freenas:~ # systat -ifstat</code> <br> <div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฐุง ูุฑูุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="hljs sql"> /0 /1 /2 /3 /4 /5 /6 /7 /8 /9 /10 <span class="hljs-keyword"><span class="hljs-keyword">Load</span></span> Average <span class="hljs-keyword"><span class="hljs-keyword">Interface</span></span> Traffic Peak Total lo0 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.319</span></span> KB/s <span class="hljs-number"><span class="hljs-number">0.893</span></span> KB/s <span class="hljs-number"><span class="hljs-number">3.041</span></span> MB <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">0.319</span></span> KB/s <span class="hljs-number"><span class="hljs-number">0.893</span></span> KB/s <span class="hljs-number"><span class="hljs-number">3.041</span></span> MB alc0 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.478</span></span> KB/s <span class="hljs-number"><span class="hljs-number">1.233</span></span> KB/s <span class="hljs-number"><span class="hljs-number">3.934</span></span> MB <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">0.412</span></span> KB/s <span class="hljs-number"><span class="hljs-number">1.083</span></span> KB/s <span class="hljs-number"><span class="hljs-number">2.207</span></span> MB igb3 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.046</span></span> KB/s <span class="hljs-number"><span class="hljs-number">0.105</span></span> KB/s <span class="hljs-number"><span class="hljs-number">181.434</span></span> KB <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">0.073</span></span> KB/s <span class="hljs-number"><span class="hljs-number">0.196</span></span> KB/s <span class="hljs-number"><span class="hljs-number">578.396</span></span> KB igb2 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.046</span></span> KB/s <span class="hljs-number"><span class="hljs-number">0.105</span></span> KB/s <span class="hljs-number"><span class="hljs-number">120.963</span></span> KB <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">0.096</span></span> KB/s <span class="hljs-number"><span class="hljs-number">0.174</span></span> KB/s <span class="hljs-number"><span class="hljs-number">517.221</span></span> KB igb1 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">4.964</span></span> MB/s <span class="hljs-number"><span class="hljs-number">121.255</span></span> MB/s <span class="hljs-number"><span class="hljs-number">10.837</span></span> GB <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">6.426</span></span> MB/s <span class="hljs-number"><span class="hljs-number">120.881</span></span> MB/s <span class="hljs-number"><span class="hljs-number">3.003</span></span> GB igb0 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.046</span></span> KB/s <span class="hljs-number"><span class="hljs-number">0.105</span></span> KB/s <span class="hljs-number"><span class="hljs-number">139.123</span></span> KB <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">0.073</span></span> KB/s <span class="hljs-number"><span class="hljs-number">0.210</span></span> KB/s <span class="hljs-number"><span class="hljs-number">869.938</span></span> KB</code> </pre><br></div></div><br>  ุชู ุงุณุชุฎุฏุงู ูุงุญุฏ ููุท ูู ููุงูุฐ ุงูุดุจูุฉ ุงูุฃุฑุจุนุฉ (igb1).  ูุญุฏุซ ูุฐุง ูุฃู ุขููุฉ ุงูููุงุฒูุฉ ุงูุชู ูุชู ุชูููุฑูุง ุงูุชุฑุงุถููุง ูููุณุงุฑุงุช ุงููุชุนุฏุฏุฉ ุชุญุฏุฏ ููุณ ุงููุญูู ูุน ูู ุญุฒูุฉ ุจูุงูุงุช.  ูุญู ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ูู ุดูุก. <br>  ูุญู ูุชุตููู ุจุจุฑูุงูุฌ Hypervisor ุนุจุฑ SSH ูุงูุฃูุฑ. <br>  ุฃููุงู ุ ุฏุนูุง ูุฑู ูุง ูู ูุนุฑู ุงูููุฑ ูุน ุชุนุฏุฏ ุงููุณุงุฑุงุช ุ ูููู ูุนูู: <br><br> <code>[root@localhost:~] esxcfg-mpath -b <br> naa.6589cfc000000b478db42ca922bb9308 : FreeNAS iSCSI Disk (naa.6589cfc000000b478db42ca922bb9308) <br> <br> [root@localhost:~] esxcli storage nmp device list -d naa.6589cfc000000b478db42ca922bb9308 | grep PSP <br> Path Selection Policy: VMW_PSP_MRU</code> <br> <br>  ุณูุงุณุฉ ุงุฎุชูุงุฑ ุงููุณุงุฑ ูู MRU ุ ููู ุงูุฃุญุฏุซ ุงุณุชุฎุฏุงููุง.  ุชูุชูู ุฌููุน ุงูุจูุงูุงุช ุฅูู ููุณ ุงููููุฐ ุ ููุง ุชุชู ุฅุนุงุฏุฉ ุชุญุฏูุฏ ุงููุณุงุฑ ุฅูุง ูู ุญุงูุฉ ุนุฏู ุชููุฑ ุงุชุตุงู ุงูุดุจูุฉ.  ูุชุญูู ุฅูู Round-robin ุ ุญูุซ ุชุชุบูุฑ ุฌููุน ุงููุงุฌูุงุช ุจุฏูุฑูุง ุจุนุฏ ุนุฏุฏ ูุนูู ูู ุงูุนูููุงุช: <br><br> <code>[root@localhost:~] esxcli storage nmp device set -d naa.6589cfc000000b478db42ca922bb9308 -P VMW_PSP_RR</code> <br> <br>  ูุนูุฏ ุชุดุบูู ESXi ูููุชุญ ุงููุฑุงูุจุฉ ููุฌุฑู ุงูุงุฎุชุจุงุฑุงุช.  ูุฑู ุฃู ุงูุญูู ูุชู ุชูุฒูุนู ุจุงูุชุณุงูู ุนุจุฑ ูุญููุงุช ุงูุดุจูุฉ (ุนูู ุงูุฃูู ููู ุงูุฐุฑูุฉ ุ ููุดุท ุฃูุซุฑ ูู ุงููุงุฒู) ุ ููุง ุฃู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุฃูุซุฑ ูุชุนุฉ. <br><br><img align="right" src="https://habrastorage.org/webt/pg/au/ov/pgauovsykzwhnis_ustnqqp-d_y.png"><pre style=";text-align:right;direction:rtl"> <code class="hljs delphi"> <span class="hljs-keyword"><span class="hljs-keyword">Interface</span></span> Peak igb3 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">43.233</span></span> MB/s <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">46.170</span></span> MB/s igb2 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">42.806</span></span> MB/s <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">45.773</span></span> MB/s igb1 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">43.495</span></span> MB/s <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">45.489</span></span> MB/s igb0 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">43.208</span></span> MB/s <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">46.079</span></span> MB/s</code> </pre> <br>  ููุงู ุจุนุถ ุงูุงูุญุฑุงูุงุช ุนูู ุงูููุงูุฐ ุ ููุฑุฌุน ุฐูู ุฅูู ุญุฏูุฏ ููุฌ ุชุญุฏูุฏ ุงููุณุงุฑ - ุนุฏุฏ ุงูุนูููุงุช ุฃู ุงูุจุงูุช ุ ูุจุนุฏ ุฐูู ูุญุฏุซ ุงูุชุญูู ุฅูู ูููุฐ ุขุฎุฑ.  ุจุดูู ุงูุชุฑุงุถู ุ 1000 IOPS ุ ุฃู ุฅุฐุง ูุงู ุชุจุงุฏู ุงูุจูุงูุงุช ุถูู 999 ุนูููุฉ ุ ูุณูุชู ุนุจุฑ ูููุฐ ุดุจูุฉ ูุงุญุฏ.  ููููู ุชุบููุฑ ูููุงุฑูุฉ ูุงุฎุชูุงุฑ ุงููููุฉ ุงูููุงุณุจุฉ.  ูุง ููููู ุงูุชุบููุฑ ุ ุงูุงูุชุฑุงุถู ูุงูู ููุนุธู ุงูููุงู. <br><br>  ูุฃุฎุฐ ุงูููุงุณุงุช ูุงูุงุฎุชุจุงุฑ ูุงูุนูู.  ุชุชููู ุงููุชุงุฆุฌ ุจุดูู ูุจูุฑ ุนูู ุฅููุงูุงุช ูุญุฑู ุฃูุฑุงุต ูุงุญุฏ ุ ูุฐูู ูุฏ ูุง ุชููู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุฎุงุตุฉ ุจูุง ูุฑููุฉ ูู ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ.  ุณุชุนุชูุฏ ุงูุณุฑุนุงุช ุงููุงุชุฌุฉ ูุงูุชุณุงูุญ ุงูุฎุงุทุฆ ููุตููู ุนูู ุงูุฃุฌูุฒุฉ ูููููุฉ ุชูููู ูุญุฏุฉ ุงูุชุฎุฒูู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar423513/">https://habr.com/ru/post/ar423513/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar423501/index.html">ุจุญุซ ูุฅูุดุงุก ููุท ูุฑุฆู ููุดุฑูุน ุชุตููู</a></li>
<li><a href="../ar423503/index.html">ุชุฌุฑุจุชู ูู ุงูุญุฑูุฉ ูุงูุนูุด ูุงูุฏุฑุงุณุฉ ูู ุฃููุงููุง</a></li>
<li><a href="../ar423505/index.html">ุชุจูุน ุฒููุฑุจูุฑุฌ ุฃุณูู ููุณุจูู ููุงุจู 13 ูููุงุฑ ุฏููุงุฑ ุญุชู "ูุง ูุถุทุฑ ุฃุทูุงููุง ุฅูู ุงููุฑุถ"</a></li>
<li><a href="../ar423507/index.html">ููููุฉ ุญูุธ ุงูุฐุงูุฑุฉ ูู ุนูุงูุงุช ุชุจููุจ ุงููุชุตูุญ ุ ูููู ูุง ุชููุฏ ูุญุชููุงุชูุง. ุชุฌุฑุจุฉ ูุฑูู Yandex.Browser</a></li>
<li><a href="../ar423511/index.html">ุงุนุชุฑุงุถ ุชุซุจูุช Firefox ู Chrome ุนูู Windows 10</a></li>
<li><a href="../ar423515/index.html">ูู ุฌูุฏ ุฌุงู ุฃู ูููู ุฃู ููุณุฑ O ูู ุงูุตูุจุฉ</a></li>
<li><a href="../ar423519/index.html">Wandering Monster: ููููุฉ ุงูุชุฎูุต ูู ุงููุดุงูู ุนูู ุงูุฎุฑูุทุฉ</a></li>
<li><a href="../ar423521/index.html">ุณุจุน ููุงุนุฏ ุฃุณุงุณูุฉ ููุชุฌุฑุจุฉ ูุน ููุงูุน ุงูููุจ</a></li>
<li><a href="../ar423523/index.html">ุฌูุงุฒ ุงุณุชุดุนุงุฑ ูุฏูุฌ ุ ูุน ุชูุถูู ูุดุนุฑุงุก</a></li>
<li><a href="../ar423527/index.html">ุชุฌูุน ุชุทุจููุงุช ุงูุฃุทูุงู ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ ุนูู ูุทุงู ูุงุณุน ูุชูุฑุฑูุง ุฅูู ุฃุทุฑุงู ุซุงูุซุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>