<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•à üë©üèæ‚Äçü§ù‚Äçüë®üèΩ ü§±üèæ DevOps en d√©veloppement: automatisation du code d'application web ‚úÖ ‚öõÔ∏è ü§úüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, cher Habrazhiteli! 

 Aujourd'hui, DevOps est sur la bonne voie. Dans presque toutes les conf√©rences sur l'automatisation, vous pouvez entend...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DevOps en d√©veloppement: automatisation du code d'application web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456146/">  Bonjour, cher Habrazhiteli! <br><br>  Aujourd'hui, DevOps est sur la bonne voie.  Dans presque toutes les conf√©rences sur l'automatisation, vous pouvez entendre le conf√©rencier dire ¬´nous avons mis en ≈ìuvre DevOps ici et l√†, appliqu√© ceci et cela, il est devenu beaucoup plus facile de mener des projets, etc., etc.¬ª.  Et c'est louable.  Mais, en r√®gle g√©n√©rale, la mise en ≈ìuvre de DevOps dans de nombreuses entreprises se termine au stade de l'automatisation des op√©rations informatiques, et tr√®s peu de gens parlent de la mise en ≈ìuvre de DevOps directement dans le processus de d√©veloppement lui-m√™me. <br><br>  Je voudrais corriger ce petit malentendu.  DevOps peut entrer dans le d√©veloppement gr√¢ce √† la formalisation de la base de code, par exemple, lors de l'√©criture d'une interface graphique pour l'API REST. <br><br>  Dans cet article, je voudrais partager avec vous la solution au cas non standard que notre entreprise a rencontr√© - nous avons pu automatiser la formation de l'interface de l'application Web.  Je vais vous expliquer comment nous en sommes arriv√©s √† cette t√¢che et ce que nous avons utilis√© pour la r√©soudre.  Nous ne pensons pas que notre approche est la seule vraie, mais nous l'aimons vraiment. <br><br>  J'esp√®re que ce mat√©riel vous sera int√©ressant et utile. <br><br>  Eh bien, commen√ßons! <br><a name="habracut"></a><br><h2>  Contexte </h2><br>  Cette histoire a commenc√© il y a environ un an: c'√©tait une belle journ√©e d'√©t√© et notre service de d√©veloppement cr√©ait la prochaine application web.  √Ä l'ordre du jour √©tait la t√¢che d'introduire une nouvelle fonctionnalit√© dans l'application - il √©tait n√©cessaire d'ajouter la possibilit√© de cr√©er des crochets personnalis√©s. <br><br><img src="https://habrastorage.org/webt/qi/lf/ot/qilfotaamoa_fpuerti3np8chlm.png" alt="Le processus d'ajout de nouvelles fonctionnalit√©s sur l'architecture ancienne"><br><br>  √Ä cette √©poque, l'architecture de notre application Web a √©t√© construite de telle mani√®re que pour impl√©menter une nouvelle fonctionnalit√©, nous devions faire ce qui suit: <br><br><ol><li>  Au back-end: cr√©er un mod√®le pour une nouvelle entit√© (hooks), d√©crire les champs de ce mod√®le, d√©crire toute la logique des actions que le mod√®le peut effectuer, etc. <br></li><li>  A l'avant-plan: cr√©ez une classe de pr√©sentation qui correspond au nouveau mod√®le dans l'API, d√©crivez manuellement tous les champs de ce mod√®le, ajoutez tous les types d'actions que cette vue peut ex√©cuter, etc. <br></li></ol><br>  Il s'av√®re que nous avons simultan√©ment √† la fois √† deux endroits, il a fallu faire des changements tr√®s similaires dans le code, d'une mani√®re ou d'une autre, en se "dupliquant".  Et cela, comme vous le savez, n'est pas bon, car avec d'autres modifications, les d√©veloppeurs devraient apporter des modifications au m√™me endroit, √† deux endroits en m√™me temps. <br><br>  Supposons que nous devons changer le type du champ "nom" de "cha√Æne" en "zone de texte".  Pour ce faire, nous devrons effectuer cette modification dans le code du mod√®le sur le serveur, puis apporter des modifications similaires au code de pr√©sentation sur le client. <br><br>  C'est trop compliqu√©? <br><br>  Auparavant, nous avons tol√©r√© ce fait, car de nombreuses applications n'√©taient pas tr√®s volumineuses et il y avait une place pour ¬´dupliquer¬ª le code sur le serveur et le client.  Mais ce m√™me jour d'√©t√©, avant l'introduction de la nouvelle fonctionnalit√©, quelque chose a cliqu√© en nous, et nous avons r√©alis√© que nous ne pouvions plus travailler comme √ßa.  L'approche actuelle √©tait tr√®s d√©raisonnable et exigeait beaucoup de temps et de travail.  De plus, la ¬´duplication¬ª de code sur le back-end et le front-end pourrait conduire √† des bugs inattendus √† l'avenir: les d√©veloppeurs pourraient apporter des modifications sur le serveur et oublier de faire des changements similaires sur le client, et alors tout ne se passerait pas bien selon plan. <br><br><h2>  Comment √©viter la duplication de code?  Rechercher une solution </h2><br>  Nous avons commenc√© √† nous demander comment optimiser le processus d'introduction de nouvelles fonctionnalit√©s. <br><br>  Nous nous sommes pos√© la question: "Peut-on imm√©diatement √©viter de dupliquer les changements de repr√©sentation du mod√®le en front-end'e, apr√®s tout changement de sa structure en back-end'e?" <br><br>  Nous avons pens√© et r√©pondu: "Non, nous ne pouvons pas." <br><br>  Puis nous nous sommes pos√© une autre question: "OK, quelle est donc la raison d'une telle duplication de code?" <br><br>  Et puis cela nous est apparu: le probl√®me, en fait, est que notre front-end ne re√ßoit pas de donn√©es sur la structure actuelle de l'API.  Le front-end ne sait rien des mod√®les qui existent dans l'API jusqu'√† ce que nous en informions nous-m√™mes. <br><br>  Et puis nous avons eu l'id√©e: que faire si nous construisons l'architecture d'application de telle mani√®re que: <br><br><ul><li>  Front-end re√ßu de l'API non seulement les donn√©es du mod√®le, mais aussi la structure de ces mod√®les; </li><li>  Repr√©sentations frontales form√©es dynamiquement bas√©es sur la structure des mod√®les; </li><li>  Tout changement dans la structure de l'API √©tait automatiquement affich√© sur le front-end. </li></ul><br>  La mise en ≈ìuvre d'une nouvelle fonctionnalit√© prendra beaucoup moins de temps, car elle ne n√©cessitera des modifications que du c√¥t√© back-end, et le front-end ramassera automatiquement tout et le pr√©sentera correctement √† l'utilisateur. <br><br><h2>  La polyvalence de la nouvelle architecture </h2><br>  Et puis, nous avons d√©cid√© de penser un peu plus largement: la nouvelle architecture ne convient-elle qu'√† notre application actuelle, ou pouvons-nous l'utiliser ailleurs? <br><br><img src="https://habrastorage.org/webt/og/ay/ju/ogayjuenpbmvwxxlrxpm09banza.png" alt="Fonctionnalit√©s communes √† de nombreuses applications web"><br><br>  En effet, d'une mani√®re ou d'une autre, presque toutes les applications ont une fonctionnalit√© similaire: <br><br><ul><li>  presque toutes les applications ont des utilisateurs, et √† cet √©gard, il est n√©cessaire d'avoir des fonctionnalit√©s associ√©es √† l'enregistrement et √† l'autorisation des utilisateurs; </li><li>  presque toutes les applications ont plusieurs types de vues: il y a une vue pour visualiser une liste d'objets d'un mod√®le, il y a une vue pour voir un enregistrement d√©taill√© d'un seul objet de mod√®le individuel; </li><li>  presque tous les mod√®les ont des attributs similaires dans le type: donn√©es de cha√Æne, nombres, etc., et √† cet √©gard, vous devez √™tre en mesure de travailler avec eux √† la fois sur le back-end et sur le front-end. </li></ul><br>  Et puisque notre entreprise r√©alise souvent le d√©veloppement d'applications Web personnalis√©es, nous avons pens√©: pourquoi devons-nous r√©inventer la roue √† chaque fois et d√©velopper √† chaque fois des fonctionnalit√©s similaires, si vous pouvez √©crire une fois un cadre qui d√©crirait toutes les bases, communes √† beaucoup applications, choses, puis, en cr√©ant un nouveau projet, utilisez des d√©veloppements pr√™ts √† l'emploi comme d√©pendances et, si n√©cessaire, modifiez-les de mani√®re d√©clarative dans un nouveau projet. <br><br>  Ainsi, au cours d'une longue discussion, nous avons eu l'id√©e de cr√©er des VSTUtils - un cadre qui: <br><br><ol><li>  Il contenait les fonctionnalit√©s de base, les plus similaires √† la plupart des applications; </li><li>  Autoris√© √† g√©n√©rer un frontal √† la vol√©e, en fonction de la structure de l'API. </li></ol><br><h2>  Comment se faire des amis back-end et front-end? </h2><br>  Eh bien, nous devons le faire, nous avons pens√©.  Nous avions d√©j√† un back-end, un front-end aussi, mais ni le serveur ni le client ne disposaient d'un outil qui pouvait rapporter ou recevoir des donn√©es sur la structure de l'API. <br><br>  Dans la recherche d'une solution √† ce probl√®me, notre regard est tomb√© sur la sp√©cification <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenAPI</a> , qui, bas√©e sur la description des mod√®les et les relations entre eux, g√©n√®re un √©norme JSON contenant toutes ces informations. <br><br>  Et nous pensions que, en th√©orie, lors de l'initialisation de l'application sur le client, le frontal peut recevoir ce JSON de l'API et cr√©er toutes les vues n√©cessaires sur sa base.  Il ne reste plus qu'√† apprendre √† notre front-end √† faire tout cela. <br><br>  Et apr√®s un certain temps, nous lui avons appris. <br><br><h2>  Version 1.0 - ce qui en est sorti </h2><br>  L'architecture du framework VSTUtils des premi√®res versions se composait de 3 parties conditionnelles et ressemblait √† ceci: <br><br><ol><li>  <b>Arri√®re:</b> <br><ul><li>  <u>Django et Python</u> sont tous des logiques li√©es au mod√®le.  Sur la base du mod√®le Django de base, nous avons cr√©√© plusieurs classes de mod√®les VSTUtils principaux.  Toutes les actions que ces mod√®les peuvent effectuer sont impl√©ment√©es √† l'aide de Python; <br></li><li>  <u>Django REST Framework</u> - G√©n√©ration d'API REST.  Sur la base de la description des mod√®les, une API REST est form√©e, gr√¢ce √† laquelle le serveur et le client communiquent; <br></li></ul></li><li>  <b>Intercouche entre back-end et front-end:</b> <br><ul><li>  <u>OpenAPI</u> - G√©n√©ration JSON avec une description de la structure de l'API.  Une fois que tous les mod√®les ont √©t√© d√©crits sur le serveur principal, des vues sont cr√©√©es pour eux.  L'ajout de chacune des vues introduit les informations n√©cessaires dans le JSON r√©sultant: <br><div class="spoiler">  <b class="spoiler_title">Exemple JSON - Sch√©ma OpenAPI</b> <div class="spoiler_text"><pre><code class="json hljs">{ // ,     (, ), //   -  , //  -     . definitions: { //    Hook. Hook: { // ,     (, ), //   -   , //  -       (,    ..). properties: { id: { title: <span class="hljs-string"><span class="hljs-string">"Id"</span></span>, type: <span class="hljs-string"><span class="hljs-string">"integer"</span></span>, readOnly: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }, name: { title: <span class="hljs-string"><span class="hljs-string">"Name"</span></span>, type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, minLength:<span class="hljs-number"><span class="hljs-number">1</span></span>, maxLength: <span class="hljs-number"><span class="hljs-number">512</span></span>, }, type: { title: <span class="hljs-string"><span class="hljs-string">"Type"</span></span>, type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, enum: [<span class="hljs-string"><span class="hljs-string">"HTTP"</span></span>,<span class="hljs-string"><span class="hljs-string">"SCRIPT"</span></span>], }, when: { title: <span class="hljs-string"><span class="hljs-string">"When"</span></span>, type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, enum: [<span class="hljs-string"><span class="hljs-string">"on_object_add"</span></span>,<span class="hljs-string"><span class="hljs-string">"on_object_upd"</span></span>,<span class="hljs-string"><span class="hljs-string">"on_object_del"</span></span>], }, enable: { title:<span class="hljs-string"><span class="hljs-string">"Enable"</span></span>, type:<span class="hljs-string"><span class="hljs-string">"boolean"</span></span>, }, recipients: { title: <span class="hljs-string"><span class="hljs-string">"Recipients"</span></span>, type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, minLength: <span class="hljs-number"><span class="hljs-number">1</span></span>, } }, // ,     ,    . required: [<span class="hljs-string"><span class="hljs-string">"type"</span></span>,<span class="hljs-string"><span class="hljs-string">"recipients"</span></span>], } }, // ,     (, ), //   -   ( URL), //  -     . paths: { //      '/hook/'. '/hook/': { //    get    /hook/. //  ,       Hook. get: { operationId: <span class="hljs-string"><span class="hljs-string">"hook_list"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"Return all hooks."</span></span>, // ,       ,     . parameters: [ { name: <span class="hljs-string"><span class="hljs-string">"id"</span></span>, in: <span class="hljs-string"><span class="hljs-string">"query"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"A unique integer value (or comma separated list) identifying this instance."</span></span>, required: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, }, { name: <span class="hljs-string"><span class="hljs-string">"name"</span></span>, in: <span class="hljs-string"><span class="hljs-string">"query"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"A name string value (or comma separated list) of instance."</span></span>, required: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, }, { name: <span class="hljs-string"><span class="hljs-string">"type"</span></span>, in: <span class="hljs-string"><span class="hljs-string">"query"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"Instance type."</span></span>, required: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, }, ], // ,     (, ), //   -   ; //  -   . responses: { 200: { description: <span class="hljs-string"><span class="hljs-string">"Action accepted."</span></span>, schema: { properties: { results: { type: <span class="hljs-string"><span class="hljs-string">"array"</span></span>, items: { //   ,       . $ref: <span class="hljs-string"><span class="hljs-string">"#/definitions/Hook"</span></span>, }, }, }, }, }, 400: { description: <span class="hljs-string"><span class="hljs-string">"Validation error or some data error."</span></span>, schema: { $ref: <span class="hljs-string"><span class="hljs-string">"#/definitions/Error"</span></span>, }, }, 401: { // ... }, 403: { // ... }, 404: { // ... }, }, tags: [<span class="hljs-string"><span class="hljs-string">"hook"</span></span>], }, //    post    /hook/. //  ,       Hook. post: { operationId: <span class="hljs-string"><span class="hljs-string">"hook_add"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"Create a new hook."</span></span>, parameters: [ { name: <span class="hljs-string"><span class="hljs-string">"data"</span></span>, in: <span class="hljs-string"><span class="hljs-string">"body"</span></span>, required: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, schema: { $ref: <span class="hljs-string"><span class="hljs-string">"#/definitions/Hook"</span></span>, }, }, ], responses: { 201: { description: <span class="hljs-string"><span class="hljs-string">"Action accepted."</span></span>, schema: { $ref: <span class="hljs-string"><span class="hljs-string">"#/definitions/Hook"</span></span>, }, }, 400: { description: <span class="hljs-string"><span class="hljs-string">"Validation error or some data error."</span></span>, schema: { $ref: <span class="hljs-string"><span class="hljs-string">"#/definitions/Error"</span></span>, }, }, 401: { // ... }, 403: { // ... }, 404: { // ... }, }, tags: [<span class="hljs-string"><span class="hljs-string">"hook"</span></span>], }, } } }</code> </pre> </div></div></li></ul></li><li>  <b>Front-end:</b> <br><ul><li>  <u>JavaScript</u> est un m√©canisme qui analyse un sch√©ma OpenAPI et g√©n√®re des vues.  Ce m√©canisme est lanc√© une fois, lorsque l'application est initialis√©e sur le client.  En envoyant une demande √† l'API, il re√ßoit le JSON demand√© en r√©ponse avec une description de la structure de l'API et, en l'analysant, cr√©e tous les objets JS n√©cessaires contenant les param√®tres des repr√©sentations du mod√®le.  Cette demande d'API est assez lourde, nous la mettons en cache et la demandons √† nouveau uniquement lors de la mise √† jour de la version de l'application; </li><li>  <u>Librairies JavaScript SPA</u> - rendu des vues et routage entre elles.  Ces biblioth√®ques ont √©t√© √©crites par l'un de nos d√©veloppeurs front-end.  Lorsqu'un utilisateur acc√®de √† une page particuli√®re, le moteur de rendu dessine la page en fonction des param√®tres stock√©s dans les objets de repr√©sentation JS. </li></ul></li></ol><br>  Ainsi, ce que nous avons: nous avons un back-end qui d√©crit toute la logique associ√©e aux mod√®les.  OpenAPI entre ensuite dans le jeu qui, sur la base de la description des mod√®les, g√©n√®re du JSON avec une description de la structure de l'API.  Ensuite, le b√¢ton est transmis au client qui, en analysant l'OpenAPI JSON g√©n√©r√©, g√©n√®re automatiquement une interface Web. <br><br><h2>  Int√©gration de fonctionnalit√©s dans l'application sur la nouvelle architecture - comment cela fonctionne </h2><br>  Rappelez-vous la t√¢che d'ajouter des crochets personnalis√©s?  Voici comment nous l'impl√©menterions dans une application bas√©e sur VSTUtils: <br><br><img src="https://habrastorage.org/webt/ud/yr/af/udyrafi5o5grqlzqovkat8ursko.png" alt="Le processus d'ajout de nouvelles fonctionnalit√©s √† la nouvelle architecture"><br><br>  Maintenant, gr√¢ce √† VSTUtils, nous n'avons plus besoin d'√©crire quoi que ce soit √† partir de z√©ro.  Voici ce que nous faisons pour ajouter la possibilit√© de cr√©er des crochets personnalis√©s: <br><br><ol><li>  √Ä l'arri√®re-plan: nous prenons et h√©ritons de la classe la plus appropri√©e dans VSTUtils, ajoutons de nouvelles fonctionnalit√©s sp√©cifiques au nouveau mod√®le; </li><li>  √Ä l'avant: <br><ul><li>  si la vue de ce mod√®le n'est pas diff√©rente de la vue de base de VSTUtils, alors nous ne faisons rien, tout s'affiche automatiquement correctement; </li><li>  si vous avez besoin de changer le comportement de la vue d'une mani√®re ou d'une autre, en utilisant le m√©canisme du signal, nous d√©veloppons ou modifions compl√®tement le comportement de base de la vue. <br></li></ul></li></ol><br>  En cons√©quence, nous avons obtenu une assez bonne solution, nous avons atteint notre objectif, notre front-end est devenu auto-g√©n√©r√©.  Le processus d'introduction de nouvelles fonctionnalit√©s dans les projets existants s'est sensiblement acc√©l√©r√©: les versions ont commenc√© √† √™tre publi√©es toutes les 2 semaines, alors que nous publions auparavant des versions tous les 2 √† 3 mois avec un nombre beaucoup plus r√©duit de nouvelles fonctionnalit√©s.  Je voudrais noter que l'√©quipe de d√©veloppement est rest√©e la m√™me, c'est la nouvelle architecture d'application qui nous a donn√© les fruits. <br><br><h2>  Version 1.0 - nos coeurs exigent le changement </h2><br>  Mais, comme vous le savez, il n'y a pas de limite √† la perfection, et VSTUtils n'a pas fait exception. <br><br>  Malgr√© le fait que nous ayons pu automatiser la formation du front-end, le r√©sultat n'a pas √©t√© la solution directe que nous souhaitions √† l'origine. <br><br>  L'architecture d'application c√¥t√© client n'a pas √©t√© bien pens√©e et s'est av√©r√©e moins flexible que possible: <br><br><ul><li>  le processus d'introduction de surcharges fonctionnelles n'√©tait pas toujours commode; </li><li>  Le m√©canisme d'analyse d'OpenAPI n'√©tait pas optimal; </li><li>  le rendu des repr√©sentations et le routage entre elles ont √©t√© effectu√©s √† l'aide de biblioth√®ques auto-√©crites, ce qui ne nous convenait pas non plus pour plusieurs raisons: <br><ul><li>  Ces biblioth√®ques n'√©taient pas couvertes par des tests; </li><li>  il n'y avait aucune documentation pour ces biblioth√®ques; </li><li>  ils n‚Äôavaient pas de communaut√© - en cas de d√©tection de bugs ou de d√©part de l‚Äôemploy√© qui les avait √©crit, le support de ce code serait tr√®s difficile. </li></ul></li></ul><br>  Et comme dans notre entreprise, nous adh√©rons √† l'approche DevOps et essayons de standardiser et de formaliser notre code autant que possible, en f√©vrier de cette ann√©e, nous avons d√©cid√© de proc√©der √† une refactorisation globale du framework frontal VSTUtils.  Nous avions plusieurs t√¢ches: <br><br><ul><li>  pour former non seulement des classes de pr√©sentation au d√©but, mais aussi des classes mod√®les - nous avons r√©alis√© qu'il serait plus correct de s√©parer les donn√©es (et leur structure) de leur pr√©sentation.  De plus, la pr√©sence de plusieurs abstractions sous la forme d'une repr√©sentation et d'un mod√®le faciliterait grandement l'ajout de surcharges de la fonctionnalit√© de base dans les projets bas√©s sur VSTUtils; </li><li>  utiliser un framework test√© avec une grande communaut√© (Angular, React, Vue) pour le rendu et le routage - cela nous permettra de donner tout le mal de t√™te avec le support du code li√© au rendu et au routage √† l'int√©rieur de notre application. </li></ul><br><h2>  Refactoring - choix du framework JS </h2><br>  Parmi les frameworks JS les plus populaires: Angular, React, Vue, notre choix s'est port√© sur Vue car: <br><br><ul><li>  La base de code de Vue p√®se moins que React et Angular; <br><br>  <i>Tableau de comparaison de la taille du framework Gzipped</i> <br><div class="scrollable-table"><table><tbody><tr><th>  Cadre </th><th>  Taille, kb </th></tr><tr><td>  Angulaire 2 </td><td>  111 </td></tr><tr><td>  Angulaire 2 + RX </td><td>  143 </td></tr><tr><td>  Angulaire 1.4.5 </td><td>  51 </td></tr><tr><td>  React 0.14.5 + React DOM </td><td>  40 </td></tr><tr><td>  React 0.14.5 + React DOM + Redux </td><td>  42 </td></tr><tr><td>  React 15.3.0 + React DOM </td><td>  43 </td></tr><tr><td>  Vue 2.4.2 </td><td>  21 </td></tr></tbody></table></div></li><li>  Le processus de rendu de page de Vue prend <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moins de</a> temps que React et Angular; <br><img src="https://habrastorage.org/webt/lo/eu/6m/loeu6mow9u1qbcz3nbanmldjmwu.png" alt="comparer la vitesse de rendu des pages avec diff√©rents cadres javascript par rapport au javascript pur"></li><li>  Le seuil d'entr√©e dans Vue est beaucoup plus bas que dans React et Angular; </li><li>  Syntaxe nativement compr√©hensible des mod√®les; </li><li>  Documentation √©l√©gante et d√©taill√©e disponible en plusieurs langues, dont le russe; </li><li>  Un √©cosyst√®me d√©velopp√© qui fournit, en plus de la biblioth√®que principale Vue, des biblioth√®ques de routage et de cr√©ation d'un entrep√¥t de donn√©es r√©actif. </li></ul><br><h2>  Version 2.0 - le r√©sultat du refactoring frontal </h2><br>  Le processus de refactoring global du front-end de VSTUtils a pris environ 4 mois et c'est ce que nous avons fini avec: <br><br><img src="https://habrastorage.org/webt/6a/wr/9k/6awr9kuruhmeq9gey-isefn_21u.png" alt="nouvelle architecture fron-end VSTUtils"><br><br>  Le framework frontal VSTUtils se compose toujours de deux grands blocs: le premier traite de l'analyse du sch√©ma OpenAPI, le second du rendu des vues et du routage entre eux, mais ces deux blocs ont subi un certain nombre de changements importants. <br><br>  Le m√©canisme qui analyse le sch√©ma OpenAPI a √©t√© compl√®tement r√©√©crit.  L'approche pour analyser ce sch√©ma a chang√©.  Nous avons essay√© de rendre l'architecture frontale aussi similaire que possible √† l'architecture back-end.  Maintenant, c√¥t√© client, nous n'avons pas seulement une seule abstraction sous forme de repr√©sentations, maintenant nous avons √©galement des abstractions sous forme de mod√®les et de QuerySets: <br><br><ul><li>  les objets de la classe Model et ses descendants sont des objets correspondant aux abstractions c√¥t√© serveur des mod√®les Django.  Les objets de ce type contiennent des donn√©es sur la structure du mod√®le (nom du mod√®le, champs du mod√®le, etc.); </li><li>  les objets de la classe QuerySet et ses descendants sont des objets correspondant √† l'abstraction Django QuerySets c√¥t√© serveur.  Les objets de ce type contiennent des m√©thodes qui vous permettent d'effectuer des requ√™tes API (ajouter, modifier, recevoir, supprimer des donn√©es d'objets de mod√®le); </li><li>  objets de la classe View - objets qui stockent des informations sur la fa√ßon de repr√©senter le mod√®le sur une page particuli√®re, quel mod√®le utiliser pour ¬´rendre¬ª la page, √† quelles autres repr√©sentations des mod√®les cette page peut se lier, etc. </li></ul><br>  L'unit√© responsable du rendu et du routage a √©galement consid√©rablement chang√©.  Nous avons abandonn√© les biblioth√®ques JS SPA auto-√©crites au profit de Vue.js.  Nous avons d√©velopp√© nos propres composants Vue qui composent toutes les pages de notre application web.  Le routage entre les vues se fait √† l'aide de la biblioth√®que vue-router, et nous utilisons vuex comme stockage r√©actif de l'√©tat de l'application. <br><br>  Je voudrais √©galement noter que du c√¥t√© frontal, l'impl√©mentation des classes Model, QuerySet et View ne d√©pend pas des moyens de rendu et de routage, c'est-√†-dire si nous voulons soudainement passer de Vue √† un autre cadre, par exemple, React ou quelque chose de nouveau, alors tout ce que nous devons faire est de r√©√©crire les composants Vue dans les composants du nouveau framework, r√©√©crire le routeur, le r√©f√©rentiel, et c'est tout - le framework VSTUtils fonctionnera √† nouveau.  L'impl√©mentation des classes Model, QuerySet et View restera la m√™me, car elle ne d√©pend pas de Vue.js.  Nous pensons que c'est une tr√®s bonne aide pour d'√©ventuels changements futurs. <br><br><h2>  Pour r√©sumer </h2><br>  Ainsi, la r√©ticence √† √©crire du code ¬´en double¬ª a entra√Æn√© la t√¢che d'automatiser la formation du front-end d'une application Web, qui a √©t√© r√©solue en cr√©ant le framework VSTUtils.  Nous avons r√©ussi √† construire l'architecture de l'application Web afin que le back-end et le front-end se compl√®tent harmonieusement et que tout changement dans la structure de l'API soit automatiquement d√©tect√© et affich√© correctement sur le client. <br><br>  Les avantages que nous avons retir√©s de la formalisation de l'architecture de l'application Web: <br><br><ul><li>  Les versions d'applications fonctionnant sur la base de VSTUtils ont commenc√© √† sortir 2 fois plus souvent.  Cela est d√ª au fait que maintenant pour introduire une nouvelle fonctionnalit√©, souvent, nous devons ajouter du code uniquement sur le back-end, le front-end sera g√©n√©r√© automatiquement - cela fait gagner du temps; </li><li>  Mise √† jour simplifi√©e des fonctionnalit√©s de base.  Puisque maintenant toutes les fonctionnalit√©s de base sont assembl√©es dans un cadre, afin de mettre √† jour certaines d√©pendances importantes ou d'apporter une am√©lioration aux fonctionnalit√©s de base, nous devons effectuer des corrections uniquement en un seul endroit - dans la base de code VSTUtils.  Lors de la mise √† jour de la version de VSTUtils dans les projets enfants, toutes les innovations seront automatiquement r√©cup√©r√©es; </li><li>  Trouver de nouveaux employ√©s est devenu plus facile.  D'accord, il est beaucoup plus facile de trouver un d√©veloppeur pour une pile technologique formalis√©e (Django, Vue) que de rechercher une personne qui accepte de travailler avec un enregistreur inconnu.  R√©sultats de recherche pour les d√©veloppeurs qui ont mentionn√© Django ou Vue sur HeadHunter dans leurs CV (dans toutes les r√©gions): <br><ul><li>  Django - 3 454 curriculum vitae ont √©t√© trouv√©s pour 3 136 candidats; </li><li>  Vue - 4 092 CV ont √©t√© trouv√©s pour 3 747 demandeurs d'emploi. </li></ul></li></ul><br>  Les inconv√©nients d'une telle formalisation de l'architecture d'une application Web sont les suivants: <br><br><ul><li>  En raison de l'analyse du sch√©ma OpenAPI, l'initialisation de l'application sur le client prend un peu plus de temps qu'auparavant (environ 20 √† 30 millisecondes de plus); </li><li>  Indexation de recherche sans importance.  Le fait est que pour le moment nous n'utilisons pas le rendu de serveur dans le cadre de VSTUtils, et tout le contenu de l'application est form√© dans la forme finale d√©j√† sur le client.  Mais pour nos projets, des r√©sultats de recherche souvent √©lev√©s ne sont pas n√©cessaires et pour nous, ce n'est pas si critique. </li></ul><br>  Sur ce mon histoire se termine, merci de votre attention! <br><br><h2>  Liens utiles </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sp√©cification OpenAPI</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©f√©rentiel VSTUtils</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un exemple de projet cr√©√© sur la base de VSTUtils</a> . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456146/">https://habr.com/ru/post/fr456146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456132/index.html">√Ä propos de l'enregistrement de bogues ou de la recherche d'un chat</a></li>
<li><a href="../fr456134/index.html">Faites confiance mais v√©rifiez! Comment tester votre mod√®le √† l'aide du cloud IBM (Watson OpenScale)</a></li>
<li><a href="../fr456136/index.html">Pourquoi faisons-nous Enterprise Service Mesh?</a></li>
<li><a href="../fr456140/index.html">D√©couvrez Codeception 3.0</a></li>
<li><a href="../fr456144/index.html">KubeCon EU 2019: 10 r√©sultats cl√©s</a></li>
<li><a href="../fr456148/index.html">News de la semaine: Facebook refuse Huawei dans les applications, Aurora OS au lieu d'Android, sanctions mini√®res</a></li>
<li><a href="../fr456150/index.html">Petite petite joie # 4: Radon - la qualit√© du code mesur√©e en chiffres</a></li>
<li><a href="../fr456152/index.html">Mod√®les de conception de niveaux pour les jeux 2D</a></li>
<li><a href="../fr456154/index.html">Fonctionnalit√©s UX de base et MVP lors de la cr√©ation d'un produit</a></li>
<li><a href="../fr456156/index.html">C'est pourquoi l'alg√®bre scolaire est n√©cessaire.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>