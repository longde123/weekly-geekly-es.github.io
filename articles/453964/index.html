<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëºüèº üí∂ ü§¥üèΩ OOP en el lenguaje R (parte 1): clases S3 üë©üèº‚Äç‚öñÔ∏è üôéüèΩ ü§ûüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R es un lenguaje orientado a objetos. En √©l, absolutamente todo es un objeto, comenzando por funciones y terminando con tablas. 


 A su vez, cada obj...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OOP en el lenguaje R (parte 1): clases S3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453964/"><p>  R es un lenguaje orientado a objetos.  En √©l, absolutamente todo es un objeto, comenzando por funciones y terminando con tablas. </p><br><p>  A su vez, cada objeto en R pertenece a una clase.  De hecho, en el mundo que nos rodea, la situaci√≥n es casi la misma.  Estamos rodeados de objetos, y cada objeto puede atribuirse a una clase.  Una clase determina el conjunto de propiedades y acciones que se pueden realizar con este objeto. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6c5/79c/992/6c579c992140a44ceb85c0359165ec15.jpg" alt="imagen"></p><a name="habracut"></a><br><p> Por ejemplo, en cualquier cocina hay una mesa y una estufa.  Y la mesa de la cocina y la estufa se pueden llamar equipos de cocina.  Las propiedades de la tabla, como regla, est√°n limitadas por sus dimensiones, color y material del que est√° hecha.  La estufa tiene una gama m√°s amplia de propiedades, al menos potencia, ser√° obligatorio el n√∫mero de quemadores y el tipo de estufa (el√©ctrica o de gas). </p><br><p>  Las acciones que se pueden realizar en los objetos se denominan sus m√©todos.  Para la tabla y el plato, respectivamente, el conjunto de m√©todos tambi√©n ser√° diferente.  Puede cenar en la mesa, puede cocinar en ella, pero es imposible tratar los alimentos con calor, para lo cual generalmente se usa una estufa. <br><img src="https://habrastorage.org/getpro/habr/post_images/8f8/8a9/06d/8f88a906d52701c8a5059106b2148fca.jpg" alt="imagen"></p><br><h2 id="soderzhanie">  Contenido </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Propiedades de clase</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Funciones generalizadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øQu√© es una clase S3 y c√≥mo crear tu propia clase?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Funciones de asignaci√≥n a clases S3 personalizadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desarrollo de m√©todos personalizados para la funci√≥n de impresi√≥n gen√©rica.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Crear una funci√≥n generalizada y m√©todos para ello.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Herencia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cuando puedes usar tus propias clases</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conclusi√≥n</a> </li></ul><br><h2 id="svoystva-klassov">  Propiedades de clase </h2><br><p>  En R, cada objeto tambi√©n pertenece a una clase.  Dependiendo de la clase, tiene un cierto conjunto de propiedades y m√©todos.  En t√©rminos de programaci√≥n orientada a objetos (OOP), la posibilidad de combinar similares en un conjunto de propiedades y m√©todos de objetos en grupos (clases) se denomina <strong>encapsulaci√≥n</strong> . </p><br><p>  Un vector es la clase m√°s simple de objetos en R; tiene la propiedad de longitud.  Por ejemplo, tomaremos las <em>letras</em> vectoriales incorporadas. </p><br><pre><code class="plaintext hljs">length(letters)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 26</code> </pre> <br><p>  Usando la funci√≥n de <code>length</code> , obtuvimos la longitud del vector de <em>letras</em> .  Ahora intentemos aplicar la misma funci√≥n al marco de fecha incorporado del <em>iris</em> . </p><br><pre> <code class="plaintext hljs">length(iris)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 5</code> </pre> <br><p>  La funci√≥n de <code>length</code> , aplicable a las tablas, devuelve el n√∫mero de columnas. </p><br><p>  Las tablas tambi√©n tienen otra propiedad, dimensi√≥n. </p><br><pre> <code class="plaintext hljs">dim(iris)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 150 5</code> </pre> <br><p>  La funci√≥n de <code>dim</code> en el ejemplo anterior muestra informaci√≥n de que hay 150 filas y 5 columnas en la tabla de <em>iris</em> . </p><br><p>  A su vez, el vector no tiene dimensi√≥n. </p><br><pre> <code class="plaintext hljs">dim(letters)</code> </pre><br><pre> <code class="plaintext hljs">NULL</code> </pre> <br><p>  Por lo tanto, nos aseguramos de que los objetos de diferentes clases tengan un conjunto diferente de propiedades. </p><br><h2 id="obobschyonnye-funkcii">  Funciones generalizadas </h2><br><p>  R tiene muchas funciones gen√©ricas: <code>print</code> , <code>plot</code> , <code>summary</code> , etc.  Estas funciones funcionan de manera diferente con objetos de diferentes clases. </p><br><p>  Tomemos, por ejemplo, la funci√≥n de <code>plot</code> .  Ejec√∫telo pasando la tabla del <em>iris</em> como argumento principal. </p><br><p> <code>plot(iris)</code> </p> <br><p>  <strong>Resultado:</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0ae/432/7ba/0ae4327babecab1c6f76a19b311450d3.png" alt="El resultado de la funci√≥n de trazado"></p><br><p>  Ahora intentemos pasar a la funci√≥n de <code>plot</code> un vector de 100 n√∫meros aleatorios que tengan una distribuci√≥n normal. </p><br><p> <code>plot(rnorm(100, 50, 30))</code> </p> <br><p>  <strong>Resultado:</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4f7/c3e/85d/4f7c3e85d80cbcdf4484d201bd17ec99.png" alt="El resultado de la funci√≥n de trazado"></p><br><p>  Obtuvimos diferentes gr√°ficos, en el primer caso, la matriz de correlaci√≥n, en el segundo, el diagrama de dispersi√≥n, en el que se muestra el √≠ndice de observaci√≥n a lo largo del eje xy su valor a lo largo del eje y. </p><br><p>  Por lo tanto, la funci√≥n de <code>plot</code> puede adaptarse para trabajar con diferentes clases.  Si volvemos a la terminolog√≠a de OOP, la capacidad de determinar la clase de un objeto entrante y realizar diversas acciones con objetos de diferentes clases se llama <strong>polimorfismo</strong> .  Esto se debe al hecho de que esta funci√≥n es solo un contenedor para una variedad de m√©todos escritos para trabajar con diferentes clases.  Puede verificar esto con el siguiente comando: </p><br><pre> <code class="plaintext hljs">body(plot)</code> </pre> <br><pre> <code class="plaintext hljs">UseMethod("plot")</code> </pre> <br><p>  El comando <code>body</code> imprime el cuerpo de la funci√≥n en la consola R.  Como puede ver, el cuerpo de la funci√≥n cuerpo consta de un solo <code>UseMethod("plot")</code> . </p><br><p>  Es decir  la funci√≥n de <code>plot</code> , solo inicia uno de los muchos m√©todos escritos en √©l, dependiendo de la clase del objeto que se le pasa.  Vea una lista de todos sus m√©todos de la siguiente manera. </p><br><pre> <code class="plaintext hljs">methods(plot)</code> </pre> <br><pre> <code class="plaintext hljs"> [1] plot.acf* plot.data.frame* plot.decomposed.ts* [4] plot.default plot.dendrogram* plot.density* [7] plot.ecdf plot.factor* plot.formula* [10] plot.function plot.hclust* plot.histogram* [13] plot.HoltWinters* plot.isoreg* plot.lm* [16] plot.medpolish* plot.mlm* plot.ppr* [19] plot.prcomp* plot.princomp* plot.profile.nls* [22] plot.raster* plot.spec* plot.stepfun [25] plot.stl* plot.table* plot.ts [28] plot.tskernel* plot.TukeyHSD*</code> </pre> <br><p>  El resultado indica que la funci√≥n de trazado tiene 29 m√©todos, entre los cuales hay <em>plot.default</em> , que funciona de manera predeterminada si la funci√≥n recibe un objeto de una clase desconocida en la entrada. </p><br><p>  Usando la funci√≥n de <code>methods</code> , tambi√©n puede obtener un conjunto de todas las funciones generalizadas que tienen un m√©todo escrito para cualquier clase. </p><br><pre> <code class="plaintext hljs">methods(, "data.frame")</code> </pre> <br><pre> <code class="plaintext hljs"> [1] $&lt;- [ [[ [[&lt;- [5] [&lt;- aggregate anyDuplicated as.data.frame [9] as.list as.matrix by cbind [13] coerce dim dimnames dimnames&lt;- [17] droplevels duplicated edit format [21] formula head initialize is.na [25] Math merge na.exclude na.omit [29] Ops plot print prompt [33] rbind row.names row.names&lt;- rowsum [37] show slotsFromS3 split split&lt;- [41] stack str subset summary [45] Summary t tail transform [49] type.convert unique unstack within</code> </pre> <br><h2 id="chto-takoe-s3-klass-i-kak-sozdat-sobstvennyy-klass">  ¬øQu√© es una clase S3 y c√≥mo crear tu propia clase? </h2><br><p>  Hay varias clases en R que puedes crear t√∫ mismo.  Uno de los m√°s populares es S3. </p><br><p>  Esta clase es una lista en la que se almacenan varias propiedades de la clase que cre√≥.  Para crear su propia clase, simplemente cree una <em>lista</em> y as√≠gnele un nombre de clase. </p><br><p>  El libro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"The Art of Programming in R"</a> da un ejemplo de la clase de <em>empleado</em> , que almacena informaci√≥n sobre el empleado.  Como ejemplo de este art√≠culo, tambi√©n decid√≠ tomar un objeto para almacenar informaci√≥n sobre los empleados.  Pero lo hizo m√°s complejo y funcional. </p><br><pre> <code class="plaintext hljs">#    employee1 &lt;- list(name = "Oleg", surname = "Petrov", salary = 1500, salary_datetime = Sys.Date(), previous_sallary = NULL, update = Sys.time()) #    class(employee1) &lt;- "emp"</code> </pre> <br><p>  Por lo tanto, creamos nuestra propia clase, que almacena los siguientes datos en su estructura: </p><br><ul><li>  Nombre del empleado </li><li>  Apellido del empleado </li><li>  Salario </li><li>  El momento en que se estableci√≥ el salario. </li><li>  Salario anterior </li><li>  Fecha y hora de la √∫ltima actualizaci√≥n de informaci√≥n. </li></ul><br><p>  Despu√©s de eso, con el comando <code>class(employee1) &lt;- "emp"</code> asignamos la clase <em>emp</em> al objeto. </p><br><p>  Para la conveniencia de crear objetos de clase <em>emp,</em> puede escribir una funci√≥n. </p><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de funci√≥n para crear objetos de clase emp</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#     create_employee &lt;- function(name, surname, salary, salary_datetime = Sys.Date(), update = Sys.time()) { out &lt;- list(name = name, surname = surname, salary = salary, salary_datetime = salary_datetime, previous_sallary = NULL, update = update) class(out) &lt;- "emp" return(out) } #    emp    create_employee employee1 &lt;- create_employee("Oleg", "Petrov", 1500) #     class(employee1)</code> </pre> <br><pre> <code class="plaintext hljs">[1] "emp"</code> </pre> </div></div><br><h2 id="funkcii-prisvaivaniya-znacheniy-polzovatelskim-s3-klassam">  Funciones de asignaci√≥n a clases S3 personalizadas </h2><br><p>  Entonces, creamos nuestro propio <em>emprendimiento de</em> clase, pero hasta ahora esto no nos ha dado nada.  Veamos por qu√© creamos nuestra propia clase y qu√© podemos hacer con ella. </p><br><p>  En primer lugar, puede escribir funciones de asignaci√≥n para la clase creada. </p><br><div class="spoiler">  <b class="spoiler_title">Funci√≥n de asignaci√≥n para [</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">"[&lt;-.emp" &lt;- function(x, i, value) { if ( i == "salary" || i == 3 ) { cat(x$name, x$surname, "has changed salary from", x$salary, "to", value) x$previous_sallary &lt;- x$salary x$salary &lt;- value x$salary_datetime &lt;- Sys.Date() x$update &lt;- Sys.time() } else { cat( "You can`t change anything except salary" ) } return(x) }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Funci√≥n de asignaci√≥n para [[</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">"[[&lt;-.emp" &lt;- function(x, i, value) { if ( i == "salary" || i == 3 ) { cat(x$name, x$surname, "has changed salary from", x$salary, "to", value) x$previous_sallary &lt;- x$salary x$salary &lt;- value x$salary_datetime &lt;- Sys.Date() x$update &lt;- Sys.time() } else { cat( "You can`t change anything except salary" ) } return(x) }</code> </pre> </div></div><br><p>  Las funciones de asignaci√≥n en la creaci√≥n siempre se indican entre comillas, y se ven as√≠: <code>"[&lt;-. " / "[[&lt;-. "</code> .  Y tienen 3 argumentos requeridos. </p><br><ul><li>  <strong>x</strong> : el objeto al que se asignar√° el valor; </li><li>  <strong>i</strong> - Nombre / √≠ndice del elemento del objeto (nombre, apellido, salario, salario-fecha-hora, previo_sallar, actualizar); </li><li>  <strong>valor</strong> : el valor asignado. </li></ul><br><p>  Adem√°s, en el cuerpo de la funci√≥n, escribe c√≥mo deben cambiar los elementos de su clase.  En mi caso, quiero que el usuario pueda cambiar solo el salario <em>(elemento de</em> salario <em>, cuyo √≠ndice es 3)</em> .  Por lo tanto, dentro de la funci√≥n, escribo un cheque <code>if ( i == "salary" || i == 3 )</code> .  Si el usuario intenta editar otras propiedades, recibe el mensaje <code>"You can't change anything except salary"</code> . </p><br><p>  Cuando se <em>cambia el</em> elemento de <em>salario,</em> se muestra <em>un</em> mensaje que contiene el nombre y el apellido del empleado, su nivel de salario actual y nuevo.  El salario actual se pasa a la propiedad <em>anterior_sallary</em> y <em>se le</em> asigna un nuevo valor.  Los valores de las propiedades <em>salary_datetime</em> y <em>update</em> tambi√©n se actualizan. </p><br><p>  Ahora puedes intentar cambiar el salario. </p><br><pre> <code class="plaintext hljs">employee1["salary"] &lt;- 1750</code> </pre> <br><pre> <code class="plaintext hljs">Oleg Petrov has changed salary from 1500 to 1750</code> </pre> <br><h2 id="razrabotka-sobstvennyh-metodov-dlya-obobschyonnyh-funkciy">  Desarrollo de m√©todos personalizados para funciones gen√©ricas. </h2><br><p>  Anteriormente, ya aprendi√≥ que en R hay funciones generalizadas que cambian su comportamiento dependiendo de la clase recibida en la entrada del objeto. </p><br><p>  Puede agregar sus m√©todos a funciones generalizadas existentes e incluso crear sus propias funciones generalizadas. </p><br><p>  Una de las funciones gen√©ricas m√°s utilizadas es <code>print</code> .  Esta funci√≥n se activa cada vez que llama a un objeto por su nombre.  Ahora la salida de impresi√≥n del objeto de clase <em>emp</em> que creamos se ve as√≠: </p><br><pre> <code class="plaintext hljs">$name [1] "Oleg" $surname [1] "Petrov" $salary [1] 1750 $salary_datetime [1] "2019-05-29" $previous_sallary [1] 1500 $update [1] "2019-05-29 11:13:25 EEST"</code> </pre><br><p>  Escribamos nuestro m√©todo para la funci√≥n de impresi√≥n. </p><br><pre> <code class="plaintext hljs">print.emp &lt;- function(x) { cat("Name:", x$name, x$surname, "\n", "Current salary:", x$salary, "\n", "Days from last udpate:", Sys.Date() - x$salary_datetime, "\n", "Previous salary:", x$previous_sallary) }</code> </pre> <br><p>  Ahora la funci√≥n de impresi√≥n puede imprimir objetos de nuestra clase <em>emp</em> .  Simplemente ingrese el nombre del objeto en la consola y obtenga el siguiente resultado. </p><br><pre> <code class="plaintext hljs">employee1</code> </pre> <br><pre> <code class="plaintext hljs">Name: Oleg Petrov Current salary: 1750 Days from last udpate: 0 Previous salary: 1500</code> </pre> <br><h2 id="sozdanie-obobschyonnoy-funkcii-i-metodov">  Crear funciones y m√©todos gen√©ricos </h2><br><p>  La mayor√≠a de las funciones gen√©ricas en el interior se ven iguales y solo usan la funci√≥n <code>UseMethod</code> . </p><br><pre> <code class="plaintext hljs">#   get_salary &lt;- function(x, ...) { UseMethod("get_salary") }</code> </pre> <br><p>  Ahora escribiremos dos m√©todos para √©l, uno para trabajar con objetos de la clase <em>emp</em> , el segundo m√©todo se lanzar√° por defecto para objetos de todas las otras clases, para trabajar con los cuales nuestra funci√≥n generalizada no tiene un m√©todo escrito por separado. </p><br><pre> <code class="plaintext hljs">#      emp get_salary.emp &lt;- function(x) x$salary #      get_salary.default &lt;- function(x) cat("Work only with emp class objects")</code> </pre> <br><p>  El nombre del m√©todo consiste en el nombre de la funci√≥n y la clase de objetos que procesar√° este m√©todo.  El m√©todo <em>predeterminado</em> se ejecutar√° cada vez que pase un objeto de clase en el que el m√©todo no est√° escrito. </p><br><pre> <code class="plaintext hljs">get_salary(employee1)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 1750</code> </pre> <br><pre> <code class="plaintext hljs">get_salary(iris)</code> </pre> <br><pre> <code class="plaintext hljs">Work only with emp class objects</code> </pre> <br><h2 id="nasledovanie">  Herencia </h2><br><p>  Otro t√©rmino que encontrar√° cuando aprenda la programaci√≥n orientada a objetos. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/816/718/892/8167188925cafe5b3224398c7d78b51d.png" alt="imagen"></p><br><p>  Todo lo que se muestra en la imagen se puede clasificar como una clase de <em>transporte</em> .  De hecho, todos estos objetos tienen un m√©todo com√∫n: movimiento y propiedades comunes, por ejemplo, la velocidad.  Sin embargo, los 6 objetos se pueden dividir en tres subclases: tierra, agua y aire.  En este caso, la subclase heredar√° las propiedades de la clase principal, pero tambi√©n tendr√° propiedades y m√©todos adicionales.  Una propiedad similar en el marco de la programaci√≥n orientada a objetos se llama <strong>herencia</strong> . </p><br><p>  En nuestro ejemplo, podemos asignar trabajadores remotos a una subclase separada de <em>remote_emp</em> .  Dichos empleados tendr√°n una propiedad adicional: ciudad de residencia. </p><br><pre> <code class="plaintext hljs">#    employee2 &lt;- list(name = "Ivan", surname = "Ivanov", salary = 500, salary_datetime = Sys.Date(), previous_sallary = NULL, update = Sys.time(), city = "Moscow") #    remote_emp class(employee2) &lt;- c("remote_emp", "emp") #    class(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">[1] "remote_emp" "emp"</code> </pre> <br><p>  Cuando asignamos una clase, creamos una subclase, usamos un vector en el que el primer elemento es el nombre de la subclase, seguido del nombre de la clase padre. </p><br><p>  En el caso de la <strong>herencia,</strong> todas las funciones y m√©todos generalizados escritos para trabajar con la clase padre funcionar√°n correctamente con sus subclases. </p><br><pre> <code class="plaintext hljs">#    remote_emp   employee2</code> </pre> <br><pre> <code class="plaintext hljs">Name: Ivan Ivanov Current salary: 500 Days from last udpate: 0 Previous salary:</code> </pre> <br><pre> <code class="plaintext hljs">#   salary   remote_emp get_salary(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 500</code> </pre> <br><p>  Pero puede desarrollar m√©todos por separado para cada subclase. </p><br><pre> <code class="plaintext hljs">#     salary   remote_emp get_salary.remote_emp &lt;- function(x) { cat(x$surname, "remote from", x$city, "\n") return(x$salary) }</code> </pre> <br><pre> <code class="plaintext hljs">#   salary   remote_emp get_salary(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">Ivanov remote from Moscow [1] 500</code> </pre> <br><p>  Funciona de la siguiente manera.  Primero, la funci√≥n gen√©rica busca un m√©todo escrito para la subclase <em>remote_emp</em> , si no lo encuentra, va m√°s all√° y busca un m√©todo escrito para la clase padre <em>emp</em> . </p><br><h2 id="kogda-vam-mogut-prigoditsya-sobstvennye-klassy">  Cuando puedes usar tus propias clases </h2><br><p>  Es poco probable que la funcionalidad de crear sus propias clases S3 sea √∫til para aquellos que reci√©n comienzan su viaje en el dominio del lenguaje R. </p><br><p>  Personalmente, fueron √∫tiles para desarrollar el paquete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">rfacebookstat</a> .  El hecho es que en la API de Facebook, el par√°metro <em>action_breakdowns</em> existe para cargar eventos y responder a publicaciones publicitarias en varios grupos. </p><br><p>  Al usar tales agrupaciones, obtiene una respuesta en forma de estructura JSON en el siguiente formato: </p><br><pre> <code class="plaintext hljs">{ "action_name": "like", "action_type": "post_reaction", "value": 6 } { "action_type": "comment", "value": 4 }</code> </pre> <br><p>  El n√∫mero y el nombre de los elementos para diferentes <em>action_breakdowns es</em> diferente, por lo que para cada uno debe escribir su propio analizador.  Para resolver este problema, utilic√© la funcionalidad para crear clases S3 personalizadas y una funci√≥n generalizada con un conjunto de m√©todos. </p><br><p>  Al solicitar estad√≠sticas sobre eventos con agrupaciones, dependiendo de los valores de los argumentos, se defini√≥ una clase que se asign√≥ a la respuesta recibida de la API.  La respuesta se pas√≥ a una funci√≥n gen√©rica y, seg√∫n la clase especificada anteriormente, se determin√≥ un m√©todo que analizaba el resultado.  A qui√©n le importa profundizar en los detalles de la implementaci√≥n, <a href="">aqu√≠</a> puede encontrar el c√≥digo para crear una funci√≥n y m√©todos generalizados, y <a href="">aqu√≠ est√°</a> su uso. </p><br><p>  En mi caso, utilic√© clases y m√©todos para procesarlos exclusivamente dentro del paquete.  Si generalmente necesita proporcionar al usuario del paquete una interfaz para trabajar con las clases que cre√≥, entonces todos los m√©todos deben incluirse como directiva <code>S3method</code> en el archivo <code>S3method</code> , de la siguiente manera. </p><br><pre> <code class="plaintext hljs">S3method(_,) S3method("[&lt;-",emp) S3method("[[&lt;-",emp) S3method("print",emp)</code> </pre> <br><h2 id="zaklyuchenie">  Conclusi√≥n </h2><br><p>  Como queda claro en el t√≠tulo del art√≠culo, esta es solo la primera parte, porque  en R, adem√°s de las clases <em>S3</em> , hay otros: <em>S4</em> , <em>R5</em> ( <em>RC</em> ), <em>R6</em> .  En el futuro intentar√© escribir sobre cada una de estas implementaciones de OOP.  Sin embargo, cualquier persona con un nivel de ingl√©s que les permita leer libros libremente, entonces Headley Wickham es bastante sucinto, y con ejemplos cubrieron este tema en su libro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Advanced R"</a> . </p><br><p>  Si de repente en un art√≠culo me perd√≠ alguna informaci√≥n importante sobre las clases S3, te agradecer√© que escribas sobre esto en los comentarios. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/453964/">https://habr.com/ru/post/453964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453952/index.html">"La solicitud ha madurado": Alexei Fedorov sobre una nueva conferencia sobre sistemas distribuidos</a></li>
<li><a href="../453956/index.html">Datos del museo Art. Terminal de video ADM-3A. El auto es pesado, confiable, masacre</a></li>
<li><a href="../453958/index.html">Monorepositorios: por favor</a></li>
<li><a href="../453960/index.html">Global DevOps Bootcamp 2019 en Mosc√∫</a></li>
<li><a href="../453962/index.html">RxSwift y Coroutines en Kotlin: desarrollo m√≥vil opcional de AGIMA y GeekBrains</a></li>
<li><a href="../453968/index.html">Desaprender pr√°cticas de revisi√≥n de c√≥digos t√≥xicos</a></li>
<li><a href="../453970/index.html">Escribimos el proxy Reverse socks5 en powershell. Parte 2</a></li>
<li><a href="../453972/index.html">Los arque√≥logos recrean un pin de dos mil a√±os de antig√ºedad mediante impresi√≥n y escaneo 3D</a></li>
<li><a href="../453974/index.html">Competencia de sistemas ML en material ling√º√≠stico. ¬øC√≥mo aprendimos a llenar los espacios en blanco?</a></li>
<li><a href="../453976/index.html">Programa educativo econ√≥mico para especialistas en TI.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>