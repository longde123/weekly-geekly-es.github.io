<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüî¨ ü§±üèΩ üî§ ARIES PLC110 [M02] -MS4, HMI, OPC und SCADA oder wie sehr eine Person Kamillentee ben√∂tigt. Teil 1 üò≠ ‚úÇÔ∏è üëçüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guten Tag, liebe Leser dieses Artikels. Ich schreibe dies in einem Bewertungsformat 

 Kleine Warnung  Ich m√∂chte Sie warnen, dass ich Ihnen, wenn Sie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ARIES PLC110 [M02] -MS4, HMI, OPC und SCADA oder wie sehr eine Person Kamillentee ben√∂tigt. Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469407/">  Guten Tag, liebe Leser dieses Artikels.  Ich schreibe dies in einem Bewertungsformat <br><br><div class="spoiler">  <b class="spoiler_title">Kleine Warnung</b> <div class="spoiler_text">  Ich m√∂chte Sie warnen, dass ich Ihnen, wenn Sie sofort verstanden haben, worum es in der Rede in der √úberschrift ging, empfehle, den ersten Artikel (eigentlich den SPS-Kern) in einen Punkt aus der Preiskategorie einen Schritt h√∂her zu √§ndern. <br>  Kein Sparen kostet subjektiv so viele Nerven. <br></div></div><br>  F√ºr diejenigen, die keine Angst vor einem kleinen grauen Haar und der Amplitude einer nerv√∂sen Zecke haben, werde ich sp√§ter ausf√ºhrlich beschreiben, wie dieses technologische Wunder geschaffen wurde.  In diesem Artikel eine kurze Analyse des Projekts mit einem gewissen Grad an Kritik. <br><br><h2>  Herkunft.  Erkl√§rung des Problems </h2><br>  Eigentlich arbeite ich in einem Konstruktionsb√ºro und wir testen Automatisierungsger√§te f√ºr die Integration in unsere schl√ºsselfertigen Anlagen.  Vor kurzem wurde die Widderausr√ºstung im Lager empfangen und es wurde beschlossen, einen Pr√ºfstand daraus zu montieren: <br><a name="habracut"></a><br><ul><li>  PLC110 [M02] -MS4 (MasterSCADA 4D-Ausf√ºhrungsumgebung) </li><li>  Bedienfeld SP307 </li><li>  Universelles Eingangsmodul f√ºr analoge Signale MV110-224.2A </li><li>  Modul zur Eingabe von Signalen von Dehnungsmessstreifen MV110-4TD </li><li>  Modul elektrisch MV110-220.3M </li></ul><br>  <b>Die Struktur des Systems</b> wurde mit der Abgrenzung der Netzwerke nach ihrem Zweck gew√§hlt: <br><br><ol><li>  Modbus RTU basierend auf RS-485 - Kommunikation zwischen SPS und Slaves (Module, Frequenzdiagramme, intelligente Sensoren, Bedienfeld SP307), SPS-Master-Netzwerk. </li><li>  Ethernet-basiertes Modbus TCP - Kommunikation zwischen verschiedenen SPS untereinander und mit dem OPC-Server </li><li>  Der PC-Server der OPC- und SCADA-Systeme ist gleichzeitig ein Gateway zwischen zwei verschiedenen Netzwerken (Corporate LAN des Unternehmens und Modbus TCP-Netzwerk von Controllern (zwei Netzwerkadapter mit Datenrouting unter Verwendung von Standard-Windows-Tools)). </li><li>  Das Unternehmens-LAN verf√ºgt √ºber einen Proxyserver √ºber einen Internetzugang </li></ol><br>  Die Struktur des Systems im Allgemeinen ist in der folgenden Abbildung dargestellt: <br><br><img src="https://habrastorage.org/webt/0-/tj/wi/0-tjwifiyylqt8avwveavbpvrwe.jpeg"><br><br><h2>  Die integrierte Funktionalit√§t </h2><br><ul><li>  Datenerfassung und Umleitung von der SPS zum OPC-Server </li><li>  Lokale Verwaltung und √úberwachung √ºber das HMI-Panel </li><li>  Verwaltung und √úberwachung von SCADA √ºber den OPC-Server </li><li>  Verwaltung von jedem PC aus dem Unternehmens-LAN und √ºber das Internet mit einem SCADA-Client </li><li>  Verbindung von mobilen OPC-Monitoren √ºber LAN und Internet </li><li>  Nat√ºrlich Berichte archivieren und generieren </li></ul><br>  Es scheint, dass sie nichts verpasst haben.  Es gibt eine allgemeine Beschreibung des Systems und nun tats√§chlich zum Thema (ich werde die L√∂sungen in den Artikeln mit der Implementierung jedes Knotens beschreiben): <br><br><h2>  Schwierigkeiten </h2><br>  <b>1. SPS-Dokumentation</b> <br><br>  Der Beta-Test der deklarierten SPS auf dem MasterSCADA 4D-Kern wurde 2012 vom Hersteller festgelegt.  Trotz dieser beeindruckenden Zeit des Bestehens des Konzepts verf√ºgt der Entwickler 2019 lediglich √ºber einen Programmierleitfaden auf 28 (!?) Seiten, auf denen weniger n√ºtzliche Informationen enthalten sind, sowie Screenshots im Handbuch von MasterSCADA 3D, mit denen es ziemlich lustig ist vorausgesetzt, die Schnittstelle hat sich ge√§ndert. <br><br>  Ebenfalls aktiv unterst√ºtzt von drei Adepten und einem Verkaufsleiter ist ein Forenthread in 20 Themen. <br><br>  <b>2. Architektur von SPS-Modulen</b> <br><br>  Dies ist ein separates Diskussionsthema.  Kurz gesagt: Die SPS kommuniziert mit Modulen wie mit Modbus RTU-Slave-Ger√§ten, die zuerst vom Dienstprogramm konfiguriert werden m√ºssen, indem sie jeweils separat √ºber einen RS-485-Konverter an einen PC angeschlossen werden. <br><br>  Intelligente Onkel wissen nat√ºrlich wahrscheinlich, wie man dies ohne einen Konverter √ºber die SPS macht, indem sie die Module nacheinander mit dem Netzwerk verbinden und die erforderlichen Register schreiben, aber dies bringt Erfahrung und eine Menge Schmerz mit sich. <br><br>  F√ºr einen Entwickler, der eine solche Architektur zum ersten Mal gesehen hat, ist sie √ºberhaupt nicht benutzerfreundlich. <br>  Au√üerdem fallen alle analogen Module aus unbekannten Gr√ºnden aus und nehmen das gesamte RS-485-Netzwerk in Terra Incognita mit, aber ich m√∂chte auch separat dar√ºber sprechen, nat√ºrlich ein ganzes Epos.  Das Problem ist √ºbrigens ungef√§hr 10 Jahre alt, der Hersteller lacht √ºber <i>"Wir m√ºssen zugeben, dass die Vorlagen fehlgeschlagen sind"</i> , aber dies ist die einzige Schnittstelle f√ºr die Kommunikation mit Modulen, und die Leute haben ihre Modbus RTU-Implementierungen schon lange geschrieben. <br><br>  <i><b>In der Zwischenzeit ging Kamillentee aus ... Die</b> Sonne ging bei Sonnenuntergang unter</i> <br><br>  <b>3. IDE MasterSCADA</b> <br><br>  Wir werden nicht √ºber Grafikwerkzeuge sprechen, ich habe nicht viel getestet, aber ich werde sofort sagen, dass es mir nicht gefallen hat. <br><br>  <i><b>Wir sprechen √ºber die Implementierung des Datenaustauschs und der Sprachen der IEC-Norm:</b></i> <br><br>  Die physischen Eing√§nge der Controller-Pins sind keine globalen Variablen und k√∂nnen von keinem Teil des Programms aus durch Schreiben eines Alias, z. B. "DI1", aufgerufen werden.  In jedem Programm sollten Sie es mit Handles ziehen, dort wird eine lokale Variable gebildet, die den Wert erbt oder √ºbergibt.  Das hei√üt,  Das Wesentliche der SPS ist meiner Ansicht nach ein wenig verloren: Das Ger√§t sollte die Programmierung der Logik der physischen Kan√§le auf den Pegel <b>‚ÄûWenn der Eingang DI1 funktioniert hat - schalten Sie den Ausgang DO1 ein‚Äú</b> <b>vereinfachen</b> , und es sieht so aus: <b>‚ÄûEingang DI1 - Variable LI1 - Variable LO1 - Ausgang DO1‚Äú</b> , Auch aufgrund der Unkenntnis dieses IDE-Prinzips kann man die entz√ºckende Warnung ‚ÄûBoolesche-Boolesche Transformation ist unm√∂glich‚Äú abfangen (h√∂chstwahrscheinlich ist diese ein Zeiger, aber ich pr√§sentiere sie den Sch√∂pfern als harmonischer). <br><br>  Die Sprachbibliotheken ST, FBD, SFC sind ziemlich umfangreich und es gibt eine Auswahl f√ºr die Programmierfreundlichkeit. Diese Komponenten sind jedoch keine Funktionen, sondern Klassen, in denen Methoden gen√§ht werden, und zweitens gibt es zum gr√∂√üten Teil keine Hilfe bei der Beschreibung der Funktionalit√§t und der Datentypen.  Die Persistenz f√ºhrte mich zu den CodeSys-Kernbibliotheken, in denen all diese Funktionen √ºbernommen wurden und deren Hilfe half. <br><br>  <b>4. Tauschen Sie mit dem SP307-Bedienfeld aus</b> <br><br>  Eine interessante Veranstaltung f√ºr diejenigen, die ein paar Tage nirgendwo verbringen k√∂nnen. <br><br>  Standard-GUI-Tests (HMI oder SCADA) bestehen f√ºr mich aus 6 Tests: <br><br><ol><li>  Diskretes Signal lesen </li><li>  Diskrete Signalaufzeichnung </li><li>  Ganzzahligen Wert lesen </li><li>  Schreiben eines ganzzahligen Werts </li><li>  Realen Wert lesen </li><li>  Aufzeichnung eines Materialwertes </li></ol><br>  Dementsprechend zeichne ich 6 primitive Komponenten auf den Bildschirm und √ºberpr√ºfe jede Reihenfolge <br>  Der Austausch ist genau der gleiche wie bei den Modulen, jedoch √ºber einen separaten RS-232/485-SPS-Port und scheint stabiler zu sein.  Da das HMI ein Slave ist, habe ich ihm bez√ºglich der √Ñnderung geschrieben und es mit einer Abfrage von 500 ms gelesen, um die Aktionen des Bedieners nicht zu verpassen. <br><br>  Die ersten 4 Punkte waren ausgezeichnet, aber 5 und 6 verursachten Probleme. <br><br>  Wir senden Daten vom Typ Single Float, auf dem Bildschirm zeigen wir sie an und stellen fest, dass die Daten nicht identisch sind, obwohl alle Ausgabeeinstellungen (Float, Dimension 1-Register usw.) korrekt sind.  Es w√§re falsch zu sagen, dass der Pr√§zedenzfall nicht in der Dokumentation beschrieben ist, aber versuchen Sie herauszufinden, in welchem ‚Äã‚Äãund wo es von der Seite lustig ist. <br><br>  Nach einer hysterischen Aufz√§hlung aller Einstellungen in Bezug auf die Daten selbst und deren Senden <b>schreiben wir an den technischen Support. Die Antwort lautet durchschnittlich 5-6 Kalendertage. Wir arbeiten gem√§√ü dem Standard-Skript f√ºr den technischen Support dich selbst</b> . <b>"</b> <br><br>  √úbrigens habe ich beschlossen, ein H√§kchen an einer absolut unangemessenen Stelle mit einer absolut unzureichenden Signatur anzubringen. <br><br>  Die Bildschirmfunktion <b>beinhaltet nicht die Eingabe eines analogen Signals im Format ‚ÄûRunner‚Äú</b> , sondern kann nur in Zahlen in das Textfeld eingegeben werden.  Das ist einfach erstaunlich. Entweder schreiben wir die "¬±" -Tasten und das Skript selbst oder wir geben eine Zahl √ºber die Tastatur ein. Wir vergessen die Soft-Steuerung eines Laufwerks. <br><br>  Ich werde den Artikel nicht √ºberladen, daher werde ich die Probleme mit der oberen Ebene in Teil 2 beschreiben. <br><br>  <b>Zusammenfassend</b> m√∂chte ich <b>festhalten,</b> dass ich genug Freiheit und viel Zeit hatte, um diese Probleme zu l√∂sen, die auf den ersten Blick l√§cherlich erscheinen, dem Opfer aber viel Schmerz bereiten.  Unter zeitlich begrenzten Bedingungen sind solche Probleme kritisch. <br><br>  PS: Alle hier vorgestellten Thesen sind subjektiv und nur ein Versuch, die Unvorbereiteten zu warnen und die Hersteller nicht zu diskriminieren. Bitte behandeln Sie diesen Artikel unter diesem Gesichtspunkt. <br><br>  <b>Der zweite Teil ist schon da: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><u>Klicken</u></a></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469407/">https://habr.com/ru/post/de469407/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469395/index.html">Wo und wie werden Mehrspalten verwendet (CSS-Spalten)</a></li>
<li><a href="../de469399/index.html">Wi-Fi im Arkhangelskoye Museum-Estate</a></li>
<li><a href="../de469401/index.html">3CX WebMeeting Service Update, Elastix Online Converter und neue Video-Tutorials</a></li>
<li><a href="../de469403/index.html">Wir interviewen einen Kandidaten f√ºr die Position des Senior Software Developer</a></li>
<li><a href="../de469405/index.html">Deep Learning ist jetzt in Java</a></li>
<li><a href="../de469409/index.html">Linux-Profilerstellung mit Performance Analyzer</a></li>
<li><a href="../de469411/index.html">RE: Schmerz und Tr√§nen in Svelte 3</a></li>
<li><a href="../de469413/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 382 (22. - 29. September 2019)</a></li>
<li><a href="../de469415/index.html">Transaktionsisolationsstufen f√ºr die Kleinsten</a></li>
<li><a href="../de469417/index.html">Verteilt JA oder verteilt NEIN? Interview f√ºr diejenigen, die f√ºr sechs Monate keinen Entwickler finden k√∂nnen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>