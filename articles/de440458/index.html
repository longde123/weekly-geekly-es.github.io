<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåª üíù üå•Ô∏è Vorhersage des VoIP-Netzwerkstatus basierend auf Textprotokolldateien des SIP-Anwendungsservers üë®üèΩ‚Äçüíº üéñÔ∏è üë©üèΩ‚Äçü§ù‚Äçüë©üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die √úberwachung des Status des VoIP-Signalisierungsnetzwerks ist eine der wichtigen Bedingungen, unter denen der UCaaS-Anbieter seinen Kunden ein gara...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vorhersage des VoIP-Netzwerkstatus basierend auf Textprotokolldateien des SIP-Anwendungsservers</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dins/blog/440458/"><p>  Die √úberwachung des Status des VoIP-Signalisierungsnetzwerks ist eine der wichtigen Bedingungen, unter denen der UCaaS-Anbieter seinen Kunden ein garantiertes Qualit√§tsniveau f√ºr Dienste wie Audio- und Videoanrufe, Faxempfang und -√ºbertragung bieten kann.  Typischerweise wird eine solche Steuerung unter Verwendung verschiedener √úberwachungssysteme, Verkehrserfassung und -analyse, CDR-Analyse durchgef√ºhrt.  Einige der Parameter des Signalnetzwerks sind ziemlich schwierig und mit den angegebenen Methoden oft nicht zu bewerten. </p><a name="habracut"></a><br><p>  Eine m√∂gliche Quelle f√ºr wichtige Informationen √ºber den Status eines VoIP-Signalisierungsnetzwerks ist der SIP Application Server (SIP AS), eines der Hauptelemente bei der Verarbeitung von Anrufen in einem VoIP-Netzwerk.  Mit SIP AS-Protokolldateien k√∂nnen Sie unter anderem die folgenden Parameter eines VoIP-Signalisierungsnetzwerks auswerten: </p><br><ul><li>  L√§nge des SIP-Dialogs </li><li>  Das Zeitintervall zwischen dem Senden einer Anforderung und dem Empfangen einer endg√ºltigen Antwort (Anforderungsantwortzeit, RRT) f√ºr verschiedene Arten von SIP-Anforderungen </li><li>  Die Anzahl der erneuten √úbertragungen von Nachrichten (Neu√ºbertragungen, RTR) f√ºr verschiedene Arten von SIP-Nachrichten </li></ul><br><p>  Nicht nur die Werte dieser Parameter sind wichtig, sondern auch die Verteilung dieser Parameter sowie ihre zeitlichen √Ñnderungen.  Informationen √ºber die √Ñnderung der Parameterwerte im Laufe der Zeit erm√∂glichen die Vorhersage m√∂glicher Probleme in einem VoIP-Netzwerk.  Diese Informationen k√∂nnen auch als eine der Datenquellen f√ºr verschiedene Algorithmen f√ºr maschinelles Lernen (maschinelles Lernen, ML) dienen, die es erm√∂glichen, √Ñnderungen von Parametern nicht nur abh√§ngig von der Zeit, sondern auch von anderen Faktoren vorherzusagen. </p><br><p>  Abh√§ngig von der Signallast kann SIP AS Protokolldateien im Textformat von bis zu mehreren zehn GB pro Tag generieren.  Die Analyse von Textdateien eines solchen Volumes ist eine ressourcenintensive Aufgabe.  Als eine der m√∂glichen Optionen k√∂nnen verschiedene Python-Tools f√ºr diese Analyse verwendet werden.  Beispielsweise bietet die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pandas-</a> Bibliothek sehr praktische Werkzeuge zum Verarbeiten und Analysieren verschiedener Daten, insbesondere von Datenrahmen (DF).  Der in diesem Artikel verwendete Code ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> verf√ºgbar. <br>  Die folgenden Schritte werden zum Analysieren von SIP AS-Protokolldateien vorgeschlagen: </p><br><ol><li>  √ñffnen Sie die Protokolldatei zum Lesen.  Wenn SIP AS mehrere Protokolldateien erstellt hat, sollten diese in derselben Reihenfolge ge√∂ffnet werden, in der sie erstellt wurden. </li><li>  Daten zeilenweise lesen.  Dies ist erforderlich, um RAM zu sparen, wenn mit Dateien mit Einheiten von mehreren zehn GB gearbeitet wird </li><li>  Markieren Sie SIP-Nachrichten zwischen bestimmten Zeichenfolgen - Trennzeichen </li><li>  Erstellen Sie eine Liste mit W√∂rterb√ºchern.  Jedes der W√∂rterb√ºcher besteht wiederum aus einem Zeitstempel (Schl√ºssel) und der eigentlichen SIP-Nachricht (Wert) in Form einer Liste </li><li>  Speichern Sie diese Liste auf dem Festplatten- oder Netzwerkspeicher, z. B. als Pickle-Datei.  Diese Datei wird sp√§ter zum Erstellen verschiedener DFs verwendet. </li><li>  Erstellen Sie einen DF aus einer gespeicherten Pickle-Datei, die die f√ºr die weitere Analyse erforderlichen Informationen enth√§lt (SIP DF). </li></ol><br><p>  In diesem speziellen Fall wurde ein SIP-DF erstellt, der die folgenden Spalten enth√§lt: </p><br><ul><li>  Zeitstempel - Zeitstempel von SIP AS hinzugef√ºgt </li><li>  Anruf-ID - Anruf-ID der SIP-Konversation </li><li> CSeq_num, CSeq_meth - Daten aus dem 'CSeq'-SIP-Header </li><li>  Richtung - Nachricht empfangen (Rx &lt;-) oder gesendet (Tx-&gt;), SIP AS wird hinzugef√ºgt </li><li>  SIP-Methode - SIP-Methode von SIP Request-Line </li><li>  Src Dst IP - IP-Adresse, von der die Nachricht gesendet oder empfangen wurde </li></ul><br><p><img src="https://habrastorage.org/webt/9e/pq/x4/9epqx4i7nfowaxkmfuji7cqusau.png" alt="Bild"></p><br><p>  Abb.  1. Parameter von SIP DF, erhalten aus einer Pickle-Datei von ungef√§hr 3 GB </p><br><p><img src="https://habrastorage.org/webt/mm/xg/fs/mmxgfsyxywnoeszied6n7tiyc6g.png" alt="Bild"></p><br><p>  Abb.  2. Inhalt von SIP DF </p><br><p>  Mit einem √§hnlichen SIP-DF k√∂nnen Sie verschiedene Parameter eines VoIP-Signalisierungsnetzwerks auswerten.  Alle folgenden Beispiele stammen aus einem g√ºltigen VoIP-Netzwerk.  IP-Adressen und andere Daten, die Informationen zum angegebenen Netzwerk enthalten k√∂nnen, wurden ge√§ndert. </p><br><h4 id="1-dlina-sip-dialoga">  1. Die L√§nge des SIP-Dialogs </h4><br><p><img src="https://habrastorage.org/webt/tg/fp/g2/tgfpg2yil79lpysldretfmpwg6g.png" alt="Bild"><br><img src="https://habrastorage.org/webt/ae/fy/i2/aefyi2ndnytapmictjqm0ifart0.png" alt="Bild"><br>  Abb.  3. L√§nge des DF- und SIP-Dialogs </p><br><p>  F√ºr jeden Fall eines langen SIP-Dialogs k√∂nnen Sie den Anruf anhand des Anruf-ID-Werts ermitteln und anschlie√üend anhand von Textprotokollen das Szenario dieses Anrufs analysieren.  Trotz der relativ geringen Anzahl von Anrufen, f√ºr die die L√§nge der SIP-Konversation zehn bis Hunderte von Nachrichten betr√§gt, m√ºssen die Szenarien dieser Anrufe untersucht werden.  Die Untersuchung solcher Anrufe ergab die folgenden Quellen f√ºr lange SIP-Dialoge: </p><br><ul><li>  √úbertragung von mehreren Dutzend Gruppen einer bestimmten Struktur, bestehend aus DTMF-Zeichen, nach Einrichtung einer Sprachsitzung.  Dies ist ein Sprachanrufszenario, in dem Authentifizierung, Autorisierung und Informationsaustausch zwischen dem anrufenden und dem angerufenen Teilnehmer stattfinden. </li><li>  Videoanrufe, bei denen eine sehr gro√üe Anzahl von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FIR</a> -Anforderungen (Full Intra-Frame Request) festgestellt wurde.  Dies weist insbesondere auf ein Telefonsoftwareproblem oder den Verlust von RTP-Paketen w√§hrend Videoanrufen hin. </li></ul><br><p>  Lange SIP-Dialoge k√∂nnen auch aufgrund einer Fehlfunktion des VoIP-Ger√§ts angezeigt werden. Versuche, PIN-Codes √ºber ein IVR-Men√º auszuw√§hlen (Senden einer gro√üen Anzahl von DTMF-Sequenzen).  In jedem Fall ist es erforderlich, die Anzahl langer SIP-Gespr√§che zu √ºberwachen, da mit zunehmender Anzahl solcher Dialoge eine zus√§tzliche nutzlose Signallast auf die Elemente des VoIP-Netzwerks auftreten kann. </p><br><h4 id="2-rrt">  2. RRT </h4><br><p>  Sie wird f√ºr empfangene und gesendete INFO- und INVITE-Anforderungen separat berechnet.  Beachten Sie, dass bei der Verarbeitung einer gro√üen Anzahl von Aufrufen dieselben CSeq-Werte f√ºr verschiedene Dialoge auftreten k√∂nnen.  Es kann davon ausgegangen werden, dass die Verteilung der RRT-Werte f√ºr die gesendeten Anforderungen ungef√§hr gleich sein sollte, die absoluten Werte sich aufgrund der unterschiedlichen Gr√∂√üe und des unterschiedlichen Inhalts der INFO- und INVITE-Anforderungen und folglich der unterschiedlichen Verarbeitungszeiten dieser Anforderungen durch Netzwerkelemente unterscheiden sollten. </p><br><p><img src="https://habrastorage.org/webt/rd/d3/2q/rdd32qczrh2glgsxgxhqsx0g9ia.png" alt="Bild"><br>  Abb.  3. RRT f√ºr INFO-Anforderungen, die von SIP AS empfangen wurden <br>  Die Erh√∂hung der RRT-Werte in diesem Fall weist auf m√∂gliche Probleme bei der Virtualisierung hin, eine Erh√∂hung der Belastung von SIP AS.  Mit Call-ID und CSeq_num k√∂nnen Sie die RRT-Werte f√ºr jeden Fall √ºberpr√ºfen. </p><br><p><img src="https://habrastorage.org/webt/ht/a0/yw/hta0ywhl6nfznqymdgzl4eo7_fc.png" alt="Bild"><br>  Abb.  4. RRT f√ºr INFO-Anforderungen, die von SIP AS gesendet werden.  Die RRT in der Grafik ist auf 500 ms begrenzt. Dies ist der Standardwert f√ºr den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SIP T1-</a> Timer. </p><br><p><img src="https://habrastorage.org/webt/kn/d3/wf/knd3wfmcqfmwij1wk4jgqlmax24.png" alt="Bild"><br>  Abb.  5. RRT f√ºr von SIP AS gesendete INVITE-Anfragen.  Wie erwartet ist die Verteilung ungef√§hr dieselbe wie bei INFO-Abfragen. </p><br><h4 id="3-rtr">  3. RTR </h4><br><p>  Ein wichtiger Parameter, der den Status eines VoIP-Signalisierungsnetzwerks kennzeichnet. </p><br><p><img src="https://habrastorage.org/webt/yl/v3/h5/ylv3h5eqljf3prx1p9oqogs4fr0.png" alt="Bild"><br>  Abb.  6. Der Prozentsatz der erneuten √úbertragung von INFO- bzw. INVITE-Anforderungen.  RTRs, die einmal oder mehrmals auftreten, werden ber√ºcksichtigt. </p><br><p>  Zus√§tzlich zu den beschriebenen Beispielen k√∂nnen andere Daten unter Verwendung von DF erhalten werden, zum Beispiel: </p><br><ul><li>  Korrigieren Sie den SIP AS-Lastausgleich f√ºr ausgehende Nachrichten.  Dazu m√ºssen Sie die Anzahl der gesendeten Nachrichten (Tx) an verschiedene IP-Adressen (SrcDst IP) mit groupby () z√§hlen. Count () - √§hnlich der Funktion retransmits_counter_tx ().  Der Unterschied in der Anzahl der Nachrichten √ºber 15-20% weist auf eine falsche Lastverteilung hin </li><li>  Die Anzahl der fehlgeschlagenen Anrufweiterleitungen.  Zu diesem Zweck k√∂nnen Sie einen separaten DF erstellen, der nur REFER-Dialoge sowie die erforderlichen √úberschriften und Felder aus den Nachrichten dieser Dialoge enth√§lt </li><li>  Die Abh√§ngigkeit der Parameter von der Zeit.  Wenn Sie den Durchschnittswert eines der Parameter, z. B. RRT, √ºber mehrere Monate erfassen, k√∂nnen Sie basierend auf den Daten eine Zeitreihe (Zeitreihe, TS) erstellen.  Mithilfe verschiedener Bibliotheken f√ºr die TS-Analyse, z. B. Statistikmodelle, k√∂nnen Sie den Trend, die Saisonalit√§t und andere TS-Parameter bestimmen.  Die Daten aus dieser Prognose k√∂nnen verwendet werden, um die Architektur des VoIP-Netzwerks anzupassen. </li></ul><br><h4 id="zaklyuchenie">  Fazit </h4><br><p>  SIP AS-Textprotokolldateien sind eine wichtige Informationsquelle √ºber den aktuellen Status eines VoIP-Netzwerks.  Dar√ºber hinaus k√∂nnen die nach entsprechender Verarbeitung dieser Informationen erhaltenen Daten zur Vorhersage des Zustands eines VoIP-Netzwerks verwendet werden, insbesondere unter Verwendung von ML-Verfahren. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440458/">https://habr.com/ru/post/de440458/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440444/index.html">Warteschlangenbasierte Systeme</a></li>
<li><a href="../de440446/index.html">TDMS Fair Workflow Webinar-Reihe</a></li>
<li><a href="../de440448/index.html">Was die Geschichte mit dem obdachlosen Programmierer beendete</a></li>
<li><a href="../de440450/index.html">Es gibt einen Rubel f√ºr die Eingabe, aber es gibt keinen Ausweg: Wie Dateien von Drittanbietern in die Blockchain gelangen und was dagegen zu tun ist</a></li>
<li><a href="../de440454/index.html">Paul Graham: Was ich von Hacker News gelernt habe</a></li>
<li><a href="../de440460/index.html">Wie die sieben Mount- und Blade-Modder ein Spielestudio geschaffen haben</a></li>
<li><a href="../de440462/index.html">Top 7 Content-Marketing-Strategien, die Sie 2019 nicht verpassen sollten</a></li>
<li><a href="../de440464/index.html">Arbeiten Sie mit dem Dienst Digital Ocean Managed Databases in .NET Core</a></li>
<li><a href="../de440466/index.html">Web-UART-Fernbedienung</a></li>
<li><a href="../de440468/index.html">2 mal mehr, 10 mal schneller, rund um die Uhr - alles zum Wohle der Menschen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>