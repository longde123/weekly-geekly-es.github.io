<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ï üñïüèø üçæ Le jour o√π Dodo IS s'est arr√™t√©. Script synchrone üéø ‚úäüèø üèôÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dodo IS est un syst√®me mondial qui vous aide √† g√©rer efficacement votre entreprise chez Dodo Pizza. Il r√©sout les probl√®mes de commande de pizza, aide...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le jour o√π Dodo IS s'est arr√™t√©. Script synchrone</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/440676/">  Dodo IS est un syst√®me mondial qui vous aide √† g√©rer efficacement votre entreprise chez Dodo Pizza.  Il r√©sout les probl√®mes de commande de pizza, aide le franchis√© √† suivre l'entreprise, am√©liore l'efficacit√© des employ√©s et parfois tombe.  Le dernier est le pire pour nous.  Chaque minute de telles chutes entra√Æne une perte de profits, une insatisfaction des utilisateurs et des nuits blanches de d√©veloppeurs. <br><br>  Mais maintenant, nous dormons mieux.  Nous avons appris √† reconna√Ætre les sc√©narios d'apocalypse syst√©mique et √† les traiter.  Ci-dessous, je vais vous expliquer comment nous assurons la stabilit√© du syst√®me. <br><img src="https://habrastorage.org/webt/cj/_g/bz/cj_gbzxwy6ky8m_qqomj46f4nf4.png"><br><a name="habracut"></a><blockquote> <b>Une s√©rie d'articles sur l'effondrement du syst√®me Dodo IS *</b> : <br>  1. Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jour o√π Dodo IS s'est arr√™t√©.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Script synchrone.</a> <br>  2. Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jour o√π Dodo IS s'est arr√™t√©.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Script asynchrone.</a> <br><br>  * Les <i>mat√©riaux ont √©t√© √©crits sur la base de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ma performance √† DotNext 2018 √† Moscou</a></i> . </blockquote><br><h2>  Dodo est </h2><br>  Le syst√®me est un grand avantage concurrentiel de notre franchise, car les franchis√©s ont un mod√®le commercial pr√™t √† l'emploi.  Ce sont ERP, HRM et CRM, tout en un. <br><br>  Le syst√®me est apparu quelques mois apr√®s l'ouverture de la premi√®re pizzeria.  Il est utilis√© par les gestionnaires, les clients, les caissiers, les cuisiniers, les clients myst√®res, les employ√©s des centres d'appels - c'est tout.  Classiquement, Dodo IS est divis√© en deux parties.  Le premier est destin√© aux clients.  Cela comprend un site Web, une application mobile, un centre de contact.  Deuxi√®me partenaire franchis√©, il permet de g√©rer les pizzerias.  Gr√¢ce au syst√®me, les factures des fournisseurs, la gestion du personnel, les personnes qui travaillent, la comptabilit√© de paie automatique, la formation en ligne du personnel, la certification des gestionnaires, un syst√®me de contr√¥le de la qualit√© et les acheteurs myst√®res transitent par le syst√®me. <br><br><h2>  Performances du syst√®me </h2><br>  Performances du syst√®me Dodo IS = fiabilit√© = tol√©rance aux pannes / r√©cup√©ration.  Arr√™tons-nous sur chacun des points. <br><br><h4>  Fiabilit√© </h4><br>  Nous n'avons pas de grands calculs math√©matiques: nous devons traiter un certain nombre de commandes, il y a certaines zones de livraison.  Le nombre de clients ne varie pas particuli√®rement.  Bien s√ªr, nous serons heureux quand il grandira, mais cela se produit rarement par grandes rafales.  Pour nous, les performances se r√©sument au peu de pannes, √† la fiabilit√© du syst√®me. <br><br><h4>  Tol√©rance aux pannes </h4><br>  Un composant peut d√©pendre d'un autre composant.  Si une erreur se produit dans un syst√®me, l'autre sous-syst√®me ne doit pas tomber. <br><br><h4>  La r√©silience </h4><br>  Des pannes de composants individuels se produisent chaque jour.  C'est normal.  Il est important de savoir √† quelle vitesse nous pouvons nous remettre d'un √©chec. <br><br><h2>  Sc√©nario de d√©faillance du syst√®me synchrone </h2><br><h4>  Qu'est ce que c'est </h4><br>  L'instinct d'une grande entreprise est de servir de nombreux clients en m√™me temps.  Tout comme il est impossible de travailler pour une pizzeria de cuisine travaillant pour la livraison de la m√™me mani√®re qu'une femme au foyer dans une cuisine √† domicile, un code con√ßu pour une ex√©cution synchrone ne peut pas fonctionner correctement pour un service client de masse sur un serveur. <br><br>  Il existe une diff√©rence fondamentale entre l'ex√©cution d'un algorithme dans une seule instance et l'ex√©cution du m√™me algorithme qu'un serveur dans un service de masse. <br><br>  Jetez un oeil √† l'image ci-dessous.  √Ä gauche, nous voyons comment les demandes se produisent entre deux services.  Ce sont des appels RPC.  La demande suivante se termine apr√®s la pr√©c√©dente.  De toute √©vidence, cette approche n'est pas √©volutive - des commandes suppl√©mentaires sont align√©es. <br><br>  Pour servir de nombreuses commandes, nous avons besoin de la bonne option: <br><br><img src="https://habrastorage.org/webt/ce/ux/u0/ceuxu0aoqpmcgvnuvj0oboctjdm.png"><br><br>  Le fonctionnement du blocage de code dans une application synchrone est fortement affect√© par le mod√®le de multithreading utilis√©, √† savoir le multit√¢che pr√©emptif.  Elle seule peut conduire √† des √©checs. <br><br>  Le multit√¢che simplifi√© et pr√©emptif pourrait √™tre illustr√© comme suit: <br><br><img src="https://habrastorage.org/webt/k_/i3/pi/k_i3piihcieztws0hjgt-l6jw1q.png"><br><br>  Les blocs de couleur sont le vrai travail que fait le CPU, et nous voyons que le travail utile indiqu√© par le vert dans le diagramme est assez petit dans le contexte g√©n√©ral.  Nous devons √©veiller le flux, l'endormir, et cela est au-dessus.  Un tel sommeil / r√©veil se produit pendant la synchronisation sur toutes les primitives de synchronisation. <br><br>  De toute √©vidence, les performances du processeur diminueront si vous diluez le travail utile avec un grand nombre de synchronisations.  Dans quelle mesure le multit√¢che pr√©emptif peut-il affecter les performances? <br><br>  Consid√©rez les r√©sultats d'un test synth√©tique: <br><br><img src="https://habrastorage.org/webt/k5/vo/bh/k5vobhcdjza0tu5-gz5nkmxb2yu.png"><br><br>  Si l'intervalle de flux entre les synchronisations est d'environ 1 000 nanosecondes, l'efficacit√© est assez faible, m√™me si le nombre de threads est √©gal au nombre de c≈ìurs.  Dans ce cas, l'efficacit√© est d'environ 25%.  Si le nombre de threads est 4 fois sup√©rieur, l'efficacit√© chute consid√©rablement, √† 0,5%. <br><br>  Pensez-y, dans le cloud, vous avez command√© une machine virtuelle avec 72 c≈ìurs.  Cela co√ªte de l'argent et vous utilisez moins de la moiti√© d'un c≈ìur.  C'est exactement ce qui peut arriver dans une application multi-thread. <br><br>  S'il y a moins de t√¢ches, mais que leur dur√©e est plus longue, l'efficacit√© augmente.  Nous voyons qu'√† 5000 op√©rations par seconde, dans les deux cas, l'efficacit√© est de 80 √† 90%.  Pour un syst√®me multiprocesseur, c'est tr√®s bien. <br><br><img src="https://habrastorage.org/webt/mk/h0/ku/mkh0kui8a2xqylkxs4obdexrpms.png"><br><br>  Dans nos applications r√©elles, la dur√©e d'une op√©ration entre les synchronisations se situe quelque part entre les deux, donc le probl√®me est urgent. <br><br><h4>  Que se passe-t-il? </h4><br>  Faites attention au r√©sultat des tests de r√©sistance.  Dans ce cas, il s'agissait des ¬´tests d'extrusion¬ª. <br><br><img src="https://habrastorage.org/webt/bs/cc/pu/bsccpuz17k6921f54mhkjzg3p_k.png"><br><br>  L'essence du test est qu'en utilisant un support de charge, nous soumettons de plus en plus de demandes artificielles au syst√®me, essayons de passer autant de commandes que possible par minute.  Nous essayons de trouver la limite apr√®s laquelle l'application refusera de r√©pondre aux demandes au-del√† de ses capacit√©s.  Intuitivement, nous nous attendons √† ce que le syst√®me fonctionne √† la limite, rejetant les demandes suppl√©mentaires.  C'est exactement ce qui se passerait dans la vraie vie, par exemple - lorsque vous servez dans un restaurant bond√© de clients.  Mais il se passe autre chose.  Les clients ont pass√© plus de commandes et le syst√®me a commenc√© √† servir moins.  Le syst√®me a commenc√© √† servir si peu de commandes qu'il peut √™tre consid√©r√© comme une panne compl√®te, une panne.  Cela se produit avec de nombreuses applications, mais devrait-il en √™tre ainsi? <br><br>  Dans le deuxi√®me graphique, le temps de traitement d'une demande augmente, pendant cet intervalle, moins de demandes sont trait√©es.  Les demandes arriv√©es plus t√¥t sont trait√©es bien plus tard. <br><br><img src="https://habrastorage.org/webt/au/ho/9y/auho9yjcdbtb8gqqbjytppvyuc0.png"><br><br>  Pourquoi l'application s'arr√™te-t-elle?  Il y avait un algorithme, √ßa a march√©.  On le d√©marre depuis notre machine locale, √ßa marche tr√®s vite.  Nous pensons que si nous prenons une machine cent fois plus puissante et ex√©cutons cent requ√™tes identiques, elles doivent √™tre ex√©cut√©es en m√™me temps.  Il s'av√®re que les demandes de diff√©rents clients entrent en collision.  Entre eux, des conflits surviennent et il s'agit d'un probl√®me fondamental dans les applications distribu√©es.  Des demandes s√©par√©es se battent pour des ressources. <br><br><h2>  Comment trouver un probl√®me </h2><br>  Si le serveur ne fonctionne pas, nous essaierons tout d'abord de trouver et de r√©soudre les probl√®mes triviaux des verrous √† l'int√©rieur de l'application, dans la base de donn√©es et lors des E / S sur les fichiers.  Il y a encore toute une classe de probl√®mes dans le r√©seautage, mais jusqu'√† pr√©sent, nous nous limiterons √† ces trois, cela suffit pour apprendre √† reconna√Ætre des probl√®mes similaires, et nous nous int√©ressons principalement aux probl√®mes qui causent la Contention - la lutte pour les ressources. <br><br><h4>  Verrous en cours </h4><br>  Voici une demande typique dans une application de blocage. <br><img src="https://habrastorage.org/webt/xn/za/vw/xnzavw3w6riwwwnd9tblut9pj0m.png"><br>  Il s'agit d'une variante du diagramme de s√©quence qui d√©crit l'algorithme d'interaction du code d'application et de la base de donn√©es √† la suite d'une op√©ration conditionnelle.  Nous voyons qu'un appel r√©seau est en cours, puis quelque chose se passe dans la base de donn√©es - la base de donn√©es est l√©g√®rement utilis√©e.  Ensuite, une autre demande est faite.  Pour toute la p√©riode, une transaction dans la base de donn√©es et une cl√© commune √† toutes les requ√™tes sont utilis√©es.  Il peut s'agir de deux clients diff√©rents ou de deux commandes diff√©rentes, mais d'un m√™me objet de menu de restaurant, stock√© dans la m√™me base de donn√©es que les commandes clients.  Nous travaillons en utilisant une transaction pour la coh√©rence; deux requ√™tes ont Contention sur la cl√© de l'objet commun. <br><br>  Voyons comment √ßa √©volue. <br><img src="https://habrastorage.org/webt/ej/wl/s1/ejwls1dfpfr0hzq-ysxsvakwm9m.png"><br>  Le fil dort la plupart du temps.  En fait, il ne fait rien.  Nous avons un verrou qui interf√®re avec d'autres processus.  Le plus ennuyeux est que l'op√©ration la moins utile dans une transaction qui a verrouill√© une cl√© se produit au tout d√©but.  Il allonge les transactions de port√©e dans le temps. <br><br>  Nous allons nous battre de cette fa√ßon. <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fallback = FallbackPolicy&lt;OptionalData&gt; .Handle&lt;OperationCancelledException&gt;() .FallbackAsync&lt;OptionalData&gt;(OptionalData.Default); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionalDataTask = fallback .ExecuteAsync(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> CalculateOptionalDataAsync()); <span class="hljs-comment"><span class="hljs-comment">//‚Ä¶ var required = await CalculateRequiredData(); var optional = await optionalDataTask; var price = CalculatePriceAsync(optional, required);</span></span></code> </pre> <br>  C'est la coh√©rence √©ventuelle.  Nous supposons que certaines de nos donn√©es peuvent √™tre moins r√©centes.  Pour ce faire, nous devons travailler diff√©remment avec le code.  Nous devons accepter que les donn√©es sont d'une qualit√© diff√©rente.  Nous ne regarderons pas ce qui s'est pass√© auparavant - le gestionnaire a chang√© quelque chose dans le menu ou le client a cliqu√© sur le bouton ¬´Commander¬ª.  Pour nous, peu importe qui a appuy√© sur le bouton deux secondes plus t√¥t.  Et pour les affaires, il n'y a pas de diff√©rence. <br><br>  Il n'y a aucune diff√©rence, nous pouvons faire une telle chose.  Appelez-le conditionnellement facultatifData.  Autrement dit, une valeur dont nous pouvons nous passer.  Nous avons un repli - la valeur que nous prenons du cache ou passons une valeur par d√©faut.  Et pour l'op√©ration la plus importante (la variable requise) nous attendrons.  Nous l'attendrons fermement, et alors seulement nous attendrons une r√©ponse aux demandes de donn√©es facultatives.  Cela nous permettra d'acc√©l√©rer le travail.  Il y a un autre point important - cette op√©ration peut ne pas √™tre effectu√©e du tout pour une raison quelconque.  Supposons que le code de cette op√©ration ne soit pas optimal et qu'il existe actuellement un bogue.  Si l'op√©ration a √©chou√©, faites un repli.  Et puis nous travaillons avec cela comme avec le sens habituel. <br><br><h4>  Serrures DB </h4><br>  Nous obtenons approximativement la m√™me disposition lorsque nous avons r√©√©crit sur async et chang√© le mod√®le de coh√©rence. <br><img src="https://habrastorage.org/webt/aw/lq/xv/awlqxvspzylkqut1gklosn6pooi.png"><br>  Ce qui importe ici, ce n'est pas que la demande soit devenue plus rapide dans le temps.  L'important, c'est que nous n'avons pas de Contention.  Si nous ajoutons des demandes, alors seul le c√¥t√© gauche de l'image est satur√© de nous. <br><img src="https://habrastorage.org/webt/_y/to/gz/_ytogzwl2pvkvzuxjy6mt365xnm.png"><br><br>  Il s'agit d'une demande de blocage.  Ici, les threads se chevauchent et les cl√©s sur lesquelles se produit la contention.  √Ä droite, nous n'avons aucune transaction dans la base de donn√©es et elles sont ex√©cut√©es tranquillement.  Le bon cas peut fonctionner ind√©finiment dans ce mode.  Gauche entra√Ænera le crash du serveur. <br><br><h4>  Sync io </h4><br>  Parfois, nous avons besoin de journaux de fichiers.  √âtonnamment, le syst√®me d'enregistrement peut donner lieu √† de telles d√©faillances d√©sagr√©ables.  Latence sur le disque dans Azure - 5 millisecondes.  Si nous √©crivons un fichier dans une rang√©e, ce n'est que 200 requ√™tes par seconde.  √áa y est, l'application s'est arr√™t√©e. <br><img src="https://habrastorage.org/webt/4f/ye/oz/4fyeozpwhurta8vmpo6qelgvot4.png"><br><br>  C'est juste que vos cheveux se terminent lorsque vous voyez cela - plus de 2000 threads ont √©t√© cr√©√©s dans l'application.  78% de tous les threads sont la m√™me pile d'appels.  Ils se sont arr√™t√©s au m√™me endroit et tentent d'entrer dans le moniteur.  Ce moniteur d√©limite l'acc√®s au fichier o√π nous nous connectons tous.  Bien s√ªr, cela doit √™tre coup√©. <br><img src="https://habrastorage.org/webt/ga/7f/27/ga7f27rhtreou-lssvsrcfjcvzo.png"><br>  Voici ce que vous devez faire dans NLog pour le configurer.  Nous cr√©ons une cible asynchrone et y √©crivons.  Et la cible asynchrone √©crit dans le vrai fichier.  Bien s√ªr, nous pouvons perdre une certaine quantit√© de messages dans le journal, mais qu'est-ce qui est plus important pour les entreprises?  Lorsque le syst√®me est tomb√© pendant 10 minutes, nous avons perdu un million de roubles.  Il est probablement pr√©f√©rable de perdre plusieurs messages dans le journal de service, qui ont √©chou√© et red√©marr√©. <br><br><h2>  Tout va tr√®s mal </h2><br>  La contention est un gros probl√®me dans les applications multithread, qui ne vous permet pas simplement de mettre √† l'√©chelle une application monothread.  Les sources de conflits doivent √™tre en mesure d'identifier et d'√©liminer.  Un grand nombre de threads sont d√©sastreux pour les applications et les appels bloquants doivent √™tre r√©√©crits en async. <br><br>  J'ai d√ª r√©√©crire beaucoup d'h√©ritage en bloquant les appels sur async, j'ai moi-m√™me souvent initi√© une telle mise √† niveau.  Tr√®s souvent, quelqu'un arrive et demande: ¬´√âcoutez, nous r√©√©crivons depuis deux semaines maintenant, presque tous en mode asynchrone.  Et combien cela fonctionnera plus vite? "  Les gars, je vais vous bouleverser - √ßa ne marchera pas plus vite.  Cela deviendra encore plus lent.  Apr√®s tout, le TPL est un mod√®le comp√©titif au-dessus d'un autre - le multit√¢che coop√©ratif plut√¥t que le multit√¢che pr√©emptif, et c'est une surcharge.  Dans l'un de nos projets - environ + 5% d'utilisation du CPU et de charge sur GC. <br><br>  Il y a une autre mauvaise nouvelle: l'application peut fonctionner bien pire apr√®s une simple r√©√©criture sur async, sans se rendre compte des fonctionnalit√©s du mod√®le concurrentiel.  Je parlerai de ces fonctionnalit√©s en d√©tail dans le prochain article. <br><br>  Cela soul√®ve la question - est-il n√©cessaire de r√©√©crire? <br><br>  Le code synchrone est r√©√©crit sur async afin de d√©bloquer le mod√®le de concurrence et de se d√©barrasser du mod√®le multit√¢che pr√©emptif.  Nous avons vu que le nombre de threads peut nuire aux performances, vous devez donc vous lib√©rer de la n√©cessit√© d'augmenter le nombre de threads pour augmenter la concurrence.  M√™me si nous avons Legacy, et nous ne voulons pas r√©√©crire ce code - c'est la principale raison de le r√©√©crire. <br><br>  La bonne nouvelle √† la fin est que nous savons maintenant quelque chose sur la fa√ßon de se d√©barrasser des probl√®mes triviaux de Contention de blocage de code.  Si vous rencontrez de tels probl√®mes dans votre application de blocage, il est temps de vous en d√©barrasser avant de r√©√©crire sur async, car ils ne dispara√Ætront pas d'eux-m√™mes. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440676/">https://habr.com/ru/post/fr440676/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440662/index.html">Tutoriel React Partie 18: La sixi√®me phase de travail sur une application TODO</a></li>
<li><a href="../fr440666/index.html">Classification des dessins manuscrits. Signaler dans Yandex</a></li>
<li><a href="../fr440670/index.html">La Banque centrale a publi√© des recommandations sur la protection cryptographique d'EBS</a></li>
<li><a href="../fr440672/index.html">M√©thodes de rationalit√© et tapis de pri√®re du Maghreb</a></li>
<li><a href="../fr440674/index.html">Utilisation de diagrammes de dispersion pour visualiser les donn√©es</a></li>
<li><a href="../fr440678/index.html">Routeur CNC de bricolage. Sciences humaines pour les sciences humaines. 2e partie</a></li>
<li><a href="../fr440680/index.html">Comment regarder demain igrofikuyuchi</a></li>
<li><a href="../fr440682/index.html">- Et vous faites du gaz l√†-bas dans l'industrie p√©trochimique, non?</a></li>
<li><a href="../fr440688/index.html">PR in IT: comment vivre, o√π aller?</a></li>
<li><a href="../fr440690/index.html">Fonctionnalit√©s de travail avec Mesh dans Unity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>