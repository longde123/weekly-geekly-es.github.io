<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👧🏼 🤖 🎗️ Java中的新关键字 🙏🏿 📣 ✌🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在不久的将来，新功能将以Java语言出现，目前正在Valhalla，Panama和Loom项目下进行开发。 扩展语言不是一件容易的事，尤其是不是强调向后兼容性的语言。 因此，为了使它们顺利地集成到Java中，语言架构师必须解决累积的基本问题。 

 昨天（1月8日），作为Oracle Java语言架...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java中的新关键字</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435540/">在不久的将来，新功能将以Java语言出现，目前正在Valhalla，Panama和Loom项目下进行开发。 扩展语言不是一件容易的事，尤其是不是强调向后兼容性的语言。 因此，为了使它们顺利地集成到Java中，语言架构师必须解决累积的基本问题。 <br><br> 昨天（1月8日），作为Oracle Java语言架构师在Oracle工作的Brian Goetz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在</a> Project Amber邮件列表中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">写</a>了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一封信“船长，我们需要更多关键字！”。</a> 他提出了一种方法来解决向语言添加新关键字的问题。 结果，关键字可能以<i>非null</i> ， <i>non-final</i> ， <i>final</i> <i>-final</i>和<i>this-return等语言显示</i> （完整的列表在帖子末尾的空白处等待着您）。 <br><br> 由于过去在语言中很少出现此问题，因此他们通常对此不怎么考虑，而是“试图尽快摆脱困境”。 由于将来现有方法的缺点，因此它们的应用将成问题，因此，决定提前进行工作。 建议的解决方案：尝试扩​​展可用作关键字的词汇形式集：允许使用连字符分隔的关键字，这些连字符将使用一个（或多个）现有关键字或保留的标识符。 <br><br> 重要说明：Brown指出，仅提供新关键字作为说明性示例，您不应专注于它们。 但是，很明显，我们已经收到了关于该语言的语法将来可能如何变化的深思熟虑的演示-作者在信中提到，该思想将有助于向Java添加许多理想的缺少的语言构造。 <br><a name="habracut"></a><br><h3>  “旧”方法 </h3><br> 如您所知，如今在Java语言中有50个关键字（ <i>keyword</i> ），被禁止用作变量的标识符。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JLS语言规范的第3.9节中提供了</a>完整列表。 自从该语言的第一个版本以来，此列表变化不大-在版本4中仅添加<i>assert</i> ，在5中<i>枚举</i> ，在9中添加<i>_</i> 。除了它们之外，还存在“保留标识符” <i>-true</i> ， <i>false</i>和<i>null-</i>行为类似于关键字方式。 <br><br> 当开发人员需要在语言中添加新的关键字时，他们必须采用以下方法之一。 <br><br><ul><li> 强制所有权转移：我们将以前是标识符的词转换为关键字（例如<i>assert</i> ）。 </li><li> 处置：现有的关键字开始以从未使用过的方式使用（例如注释值或默认方法使用default）。 </li><li> 不用它：找到一种不需要新关键字的语法使用方法-例如，对注释使用<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">接口</a></i>而不是<i>注释</i> -或完全放弃该功能。 </li><li> 创建可见性：使用英勇的语言成就（ <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">受限关键字，保留类型名称</a></i> ）来创建上下文相关<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">关键字</a></i>的错觉。 </li></ul><br> 从原则上讲，通常可以使用这些方法中的任何一种，但是每种方法都有其缺点，并且对于严重的语言全面扩展而言，仅这些方法显然是不够的-对于将来的创新，有必要消除无法完全扩展语言语法的能力。 <br><br><h4> 新增关键字 </h4><br> 以下是反对“公正”采用和增加新词的论点。 <br><br><ul><li> 所选关键字越方便和受欢迎，它在程序源代码中出现的频率就越高，这将增加该语言的不兼容性（例如，当<i>assert</i>单词出现在Java SE 1.4中时，所有测试框架都停止工作）。 </li><li> 开发人员消除这种代码不兼容的成本，从小的（重新命名局部变量）到致命的（当接口方法或公共类型无效时）的成本差别很大。 </li><li> 语言开发人员最可能使用的词是流行的标识符（例如<i>value</i> ， <i>var</i>或<i>method</i> ）； </li><li> 如果您选择源代码中很少使用的单词，并且与之发生的冲突更少，那么您将必须使用诸如<i>通常_but_not_always_final之</i>类的<i>结构</i> ，自然希望避免使用该语言。 </li><li> 但是，如果您选择了很少使用的单词，那么使用该方法的频率就太高了-破坏兼容性不是很好，并且没有那么多成功的组合。 </li></ul><br><h4> 重用“旧”关键字 </h4><br> 关于“仅仅”继续使用这些词语，有一些考虑。 <br><br><ul><li> 在许多编程语言中都发现了在不同上下文中重用关键字的先例（Java的一个示例是使用（ <i>（ab）use</i> ） <i>final</i>来表示“不可更改”，“不可重新定义”和“不可扩展”）。 </li><li> 有时，这种方法很有意义并且本身就可以实现，但通常不是优先事项。 </li><li> 随着时间的流逝，对一组关键字的要求集会不断扩大，这可能会变得很有趣-没有人愿意在其代码中使用<i>null final</i> 。 </li><li> 如果您觉得后者有些夸张，请记住，在研究<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JEP 325时，他们</a>认真建议使用<i>新的switch</i>结构来描述具有不同语义的<i>开关</i> -如果您以同样的方式继续，十年后我们可以<i>新新开关</i> 。 </li></ul><br> 如何在没有新关键字的情况下生活？ 正如某些人所暗示的，完全停止参与语言的发展是可能的。 但这并不严重，也不适合其他人的意见，因为开发人员对语言的新功能有着浓厚的兴趣。 <br><br><h4> 内容相关关键字 </h4><br> 乍一看， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">用来在</a>代码中提供特定含义但不是保留字（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在C＃中使用</a> ）的上下文关键字似乎是相同的“魔杖”，但在这里Brian会根据实践提出自己的使用观点（例如，Java 10中的<i>var</i>实现，不是关键字，而是<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">保留类型name</a></i> ）。 为了换取添加新关键字而不必“破坏”现有程序的错觉，我们增加了语言的复杂性和失真性。 <br><br> 规范编写者，编译器和IDE很难使用上下文关键字。 在涉及一种或两种特殊情况的情况下，这不会引起问题，但是当它们开始在任何地方使用时，将转化为更高的支持代码成本或错误的尾巴。 <br><br> 可以忽略这一点-他们说，这不是语言用户的问题，而是语言创建者以及编写编译器和IDE的人的问题。 但实际上，每个人都在受苦。 对于IDE来说，这可能是一个严重的问题：需要更多的输入来猜测开发人员要输入的内容-上下文关键字或标识符。 结果，用户在语法突出显示，自动完成和重构功能方面的工作变得越来越差。 <br><br> 您可以使用此工具，但请谨慎操作。 <br><br><h3> 舌头变形 </h3><br> 看来，这些方法所带来的问题-笨拙的语法，不必要的生活复杂性和错误-原则上，我们可以忍受。 但是还有另一个不是最明显的问题-使用关键字的细微差别导致语言本身的设计失真。 <br><br> 对于Java开发人员而言，如今写<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">接口</a></i>而不是<i>注释</i>是司空见惯的，但是每个人都同意使用友好的术语<i>注释</i>而不是@和“ old”关键字的组合会更合乎逻辑。 <br><br> 另一个示例：可用修饰符集（公共，私有，静态，最终等）不能称为complete-我们不能说<i>不是final</i>或<i>static的</i>任何内容。 反过来，这意味着您无法创建默认情况下变量或类为<i>final</i>或成员默认情况下为<i>静态</i>的功能，因为无法指示我们要放弃此修饰符。 <br><br> 对于使用该语言的人来说，这个问题并不那么明显-但是该语言本身的作者由于渴望进一步开发它，而不断遇到它，因此我们所有人都必须为做出这样的决定而付出代价（显式地，隐式地）。 <br><br> 以上所有结论本身就说明了这一点：我们需要另一个关键字来源。 <br><br><h3> 拟议的解决方案 </h3><br> 在该语言的实验功能中，使用一种语法来预先指定新的关键字，其中新的关键字本身前面带有两个下划线（例如，在原型<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Valhalla项目中</a>为<i>__ByValue</i> ）。 做出此决定的原因是可以理解的-您需要指出这是一个临时替换，将来您需要为此做出最终语法的决定，与此同时，您可以轻松避免与现有代码的冲突。 有人建议对新关键字使用类似的格式-从一个或两个下划线开始-但这种解决方案不能称得上漂亮，因为在这种情况下，普通和新关键字会引起混淆。 <br><br> 因此，建议使用使用连字符构造的关键字，该关键字将使用一个或多个“旧”关键字或保留的标识符。 <br><br> 与<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">受限制的关键字</a></i>不同，此方法将产生更少的解析问题，因为（以下为示例） <i>not-null</i>不能与减法表达式混淆，并且词法分析器始终可以确定<i>ab是</i>三个标记还是一个标记。 因此，我们为创建与现有源代码或彼此不大可能冲突的关键字提供了新的机会。 最重要的是，它们更有可能具有有意义的名称，因为该语言的创建者想要添加到Java中的大部分内容都基于现有的语言构造，例如<i>non-null</i> 。 <br><br> 作为新关键字的示例，给出了新关键字位置的可能候选者（我记得作者认为，此列表目前仅是说明性的）： <br><br>  - <i>非null</i> ; <br>  - <i>非决赛</i> <br>  <i>-package-private</i> （默认情况下，该类成员的访问级别的修饰符，当前未以任何方式指示）； <br>  - <i>公众阅读</i> （公开阅读，私人记录）； <br>  - <i>空检查</i> ； <br>  - <i>静态类型</i> （ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Valhalla</a>必需的概念；表示与类的特定专业相关的静态信息，而不是与类本身有关的静态信息）； <br>  - <i>默认值</i> <br>  - <i>最终决赛</i> （现在应该使用“ <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">稳定”</a></i>注释完成）， <br>  - <i>半决赛</i> （作为<i>密封</i>的替代）； <br>  - <i>穷举开关</i> ; <br>  - <i>枚举类</i> ， <i>注释类</i> ， <i>记录类</i> （语言作者可以使用这些关键字来代替<i>枚举</i>和<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">接口）</a></i> （如果有机会的话）； <br>  - <i>此类</i> （描述当前类的类文字）； <br>  - <i>此返回</i> （通常要求添加一种方法来将setter / method-builder标记为返回其接收者）。 <br><br> 当然，还有其他词法方案的变体，根据这些变体，有可能组合关键字，以使它们与源代码已经编写的关键字最小地重叠。 提议的连字符对于汽车和人类都足够可读。 <br><br> 可以理解的是，这种方法绝不排除与之前使用过的方法一起使用的可能性，而是将与它们一起使用。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN435540/">https://habr.com/ru/post/zh-CN435540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN435530/index.html">付费订阅-移动设备上自动连接的依赖性</a></li>
<li><a href="../zh-CN435532/index.html">Tornado vs Aiohttp：深入了解异步框架</a></li>
<li><a href="../zh-CN435534/index.html">数据科学：入门级书籍</a></li>
<li><a href="../zh-CN435536/index.html">人形机器人：拟人化机制的优点和问题</a></li>
<li><a href="../zh-CN435538/index.html">2018年，德国接收到的“绿色”能源多于燃煤发电</a></li>
<li><a href="../zh-CN435542/index.html">文凭的游戏开发和辩护或“我是如何用一块石头先烤煎饼杀死两只鸟的”</a></li>
<li><a href="../zh-CN435544/index.html">Innopolis University员工获得了Facebook资助</a></li>
<li><a href="../zh-CN435546/index.html">实用技巧，示例和SSH隧道</a></li>
<li><a href="../zh-CN435548/index.html">入侵公共服务-如果确实需要，则可以</a></li>
<li><a href="../zh-CN435550/index.html">GitLab 11.6发布了具有无服务器功能和Kubernetes集群的组</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>