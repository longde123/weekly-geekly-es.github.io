<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👯 👨🏼‍🔬 👩🏾‍🤝‍👨🏿 Comment nous avons créé le système IoT pour gérer la consommation d'énergie solaire 👐🏾 👩🏾‍🤝‍👨🏻 🐂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si vous n'avez aucune idée de l'architecture de développement et de la conception mécanique / électrique derrière les solutions IoT, elles pourraient ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons créé le système IoT pour gérer la consommation d'énergie solaire</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466473/"><p>  Si vous n'avez aucune idée de l'architecture de développement et de la conception mécanique / électrique derrière les solutions IoT, elles pourraient sembler "avoir des qualités ou des pouvoirs apparemment surnaturels".  Par exemple, si vous montrez un système IoT fonctionnel aux gens du XVIIIe siècle, ils penseraient que c'est magique. Cet article est en quelque sorte en train de briser ce mythe.  Ou, pour le dire plus techniquement, sur des conseils pour affiner le développement de l'IoT pour un projet génial dans le domaine de la gestion de l'énergie solaire. <a name="habracut"></a></p><br><p>  <strong>Spoiler</strong> : pas de sorts, seulement des idées analytiques pour développer un service rapide et facile. </p><br><p>  <strong>Avertissement</strong> : Nous n'offrons pas de solution universelle (elle n'existe tout simplement pas), partagez simplement les choses que nous trouvons sérieuses.  Ces points peuvent être des caractéristiques tueuses alors qu'au contraire leur négligence peut les tuer.  Jeu de mots prévu;) </p><br><h2>  Présentation du système IoT pour visualiser et optimiser la consommation d'énergie solaire </h2><br><p>  Nous avons eu le plaisir de travailler sur un projet d'amélioration de la consommation d'énergie auto-générée.  Le noyau réside dans la visualisation et l'optimisation de l'utilisation des systèmes photovoltaïques (PV) pour les entreprises d'installation et les clients finaux.  Ainsi, lorsque <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Solar Manager</a> est installé en tant que hub central pour distribuer l'énergie solaire produite entre les appareils domestiques, vous utilisez un maximum d'énergie auto-produite. </p><br><p><img src="https://habrastorage.org/webt/hs/a8/er/hsa8erddmbqfskqctn9bp4vpcps.png"></p><br><p>  Nous avons déjà écrit sur la perspective commerciale de l'utilisation de l'énergie solaire, et nous allons maintenant nous plonger dans les défis technologiques et les conseils de développement. </p><br><h2>  Prérequis absolu </h2><br><p>  Avant de commencer, soyons clairs.  Il y a une chose qui s'applique à chaque projet, qu'il s'agisse d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">système IoT</a> ou d'un simple atterrissage. </p><br><p>  Ne commencez jamais la mise en œuvre avant d'avoir une compréhension complète de ce que vous voulez réaliser (et toutes les personnes impliquées le font). </p><br><p>  Rien de tel n'est évident.  Non, il n'y a pas de télépathes et personne ne lit vos pensées.  Clarifiez, discutez, assurez-vous d'être sur la même longueur d'onde. </p><br><p><img src="https://habrastorage.org/webt/-0/fg/cq/-0fgcqs7t8r5jqfhgani-esuyg8.png"></p><br><p>  Bien sûr, si vous ne voulez pas dépenser deux fois plus de temps et d'argent. </p><br><h2>  La mission </h2><br><p>  Alors, qu'est-ce que nous avons comme entrées?  Connectivité flexible et micrologiciel distant centralisé, 5 rôles d'utilisateur avec différents UX et ensembles d'autorisations, conversion et analyse des données, énorme quantité de demandes et, comme cerise sur le gâteau, traçage de nombreuses données de valeur temporelle sur les graphiques. </p><br><h2>  Défis et spécificités de la mise en œuvre du système IoT pour la consommation d'énergie </h2><br><p>  En matière de développement, 3 choses importent le plus: la stabilité, la pertinence et la rapidité.  Surtout lorsque le projet nécessite une architecture monolithique.  C'est pourquoi la logique globale, tous les flux d'utilisateurs et la conception de la base de données doivent être aussi simples et optimisés que possible.  Soyons honnêtes, en 2019, personne ne veut attendre 40 secondes car `` vos données sont en cours de traitement ''.  Voici donc la liste de questions / réponses pour les plateformes IoT auxquelles nous nous référons: </p><br><ul><li>  L'architecture correspond-elle aux exigences et aux spécifications? </li><li>  Comment allez-vous convertir, traiter et analyser les données collectées? </li><li>  Quelles sont les relations les plus optimales entre les couches parent-enfant MVC / MVP?  Peuvent-ils alors être mis à l'échelle sans être interrompus? </li><li>  Existe-t-il des modules qui exécutent des fonctions similaires / adjacentes?  Peuvent-ils être réunis en un seul module polyvalent?  Est-ce que cela introduira ou réduira la complexité? </li><li>  La communication entre les étapes est-elle optimale? </li><li>  Comment mettre en cache des données avant de les visualiser? </li><li>  L'expérience utilisateur (UX) est-elle simple et évidente pour chaque rôle d'utilisateur? </li></ul><br><p>  Divisez ce qui doit être distribué, unissez ce qui est similaire.  Ne confondez pas cela, cependant, avec la création d'énormes classes qui (devraient) résoudre plusieurs tâches.  Au lieu de cela, créez-en de petits pour une seule tâche.  Pour les tâches complexes, créez plusieurs classes qui résolvent chacune une sous-tâche et une autre qui les utilise. </p><br><ul><li><h3 id="architect-iot-solutions-smart">  Architecte des solutions IoT intelligentes </h3><br></li></ul><br><p>  Smart désigne ici la création d'une architecture de projet rapide, évolutive, optimisée et durable qui s'adapte aux exigences du projet.  Les questions fondamentales qui se sont posées à ce stade: </p><br><ol><li>  Quel est le flux d'architecture le plus simple et le plus direct? </li><li>  Comment simplifier l'expérience utilisateur pour chaque rôle? </li><li>  Pouvons-nous réviser l'architecture initiale pour une meilleure évolutivité et optimisation des performances? </li></ol><br><p>  Pour les applications Web, cela implique la conception du contrôleur de vue du modèle hiérarchique (HMVC).  Par exemple, pour mieux allouer les ressources et fournir une réponse plus rapide, utilisez les connexions entre l'API, le serveur principal, le serveur principal et le serveur Edge.  Configurez la communication cloud-local, le stockage et le transfert de données afin d'obtenir rapidement la bonne réponse (bonjour, Captain Obvious!). </p><br><p><img src="https://habrastorage.org/webt/w4/6k/ct/w46kctha0qwbzkf1drtq6thgdcy.png"></p><br><ul><li><h3 id="design-database-with-performance-in-mind">  Concevoir une base de données en pensant aux performances </h3><br></li></ul><br><p>  Ne sous-estimez jamais l'importance de réfléchir à la conception de la base de données (DB).  Cela s'applique également aux relations entre les collections de la base de données.  Vous avez beaucoup d'entités, qui interagissent de différentes manières, il est donc crucial de garder toutes les connexions logiques associées en un seul endroit. </p><br><p>  Donc, lorsque vous avez la structure initiale à portée de main, déterminez: </p><br><ol><li>  Est-ce (un à un, un à plusieurs, plusieurs à plusieurs) le type de relation optimal pour cette collection?  Résout-il la tâche le plus efficacement? </li><li>  Dans quelle mesure cela correspond-il à la tâche sur un écran spécifique? </li><li>  Cela s'intègre-t-il bien dans l'architecture générale du projet? </li></ol><br><p>  Optimisez la logique derrière chaque module et assurez-vous que l'architecture générale est préservée.  Réfléchissez à l'ensemble des autorisations.  Réfléchissez ensuite et optimisez.  N'oubliez pas de définir les types de connexion de sorte que pour chaque tâche, vous ayez toutes les informations nécessaires au même endroit et gérez correctement les demandes. </p><br><p>  Par exemple, imaginez que votre base de données est un restaurant-minute.  Vous avez beaucoup de clients, vous devez servir de la nourriture rapidement et précisément ce qu'ils ont commandé.  Ou bien votre entreprise est finie.  C'est exactement la même chose pour les bases de données.  Oui, il existe des dizaines de collections et vous avez besoin de données de 7 à 8 d'entre elles simultanément.  Concevez donc les relations de manière à ce qu'elles soient logiquement connectées et renvoyez la réponse rapidement. </p><br><p>  Le système IoT est comme un restaurant.  Ne faites pas attendre les clients. </p><br><ul><li><h3 id="how-to-plot-gazillion-of-data">  Comment tracer [gazillion] de données </h3><br></li></ul><br><p>  Rappelez-vous les moments où les sites étaient chargés pendant quelques minutes?  Nous avons vu des applications où les tableaux de bord se chargent encore plus lentement.  Et c'est un non-non. </p><br><p>  Les graphiques sont une nouvelle norme.  La visualisation des données est couramment utilisée dans SCADA, IoT et tous les projets analytiques et pour une raison.  Voir les pics de consommation d'énergie, les tendances du marché, le CO2 dans l'air et tout autre élément que vous pouvez mesurer (généralement au fil du temps) donne une impression vivante.  Vous voyez, vous comprenez, vous agissez.  Avec la présentation textuelle de tableaux de données massifs, votre œil se brouillera en un rien de temps. </p><br><p>  Le défi consiste donc à tracer rapidement des graphiques avec un grand nombre de paires valeur-temps.  Avant que les utilisateurs ne voient les données sur le graphique, le système doit déterminer tous les points pour les tracer.  Nous avons eu beaucoup de brainstorming pour déterminer comment mettre en cache les données afin que le traçage d'un graphique avec 50K + paires de données-valeur prenne moins de 2 secondes. </p><br><p><img src="https://habrastorage.org/webt/an/fb/xx/anfbxx4z6vhsqm4c3wzbi2pxpfu.png"></p><br><h2>  De zéro à la production et au-delà </h2><br><p>  Outre l'application Web, nous développons également des applications iOS et Android pour une installation, une surveillance et un accès en déplacement. </p><br><p>  La chose importante à retenir lorsque vous travaillez sur des systèmes IoT est de maintenir la simplicité et l'évolutivité.  L'architecture IoT typique à 5 étapes doit être bien pensée pour ne pas apporter de complexité redondante. </p><br><p>  Au fur et à mesure que chaque produit évolue, vous devez réfléchir aux moyens de superposer de nouvelles fonctionnalités sans interrompre les fonctionnalités existantes.  Et, bien sûr, n'oubliez jamais les tests unitaires. </p><br><h2>  Moins d'un an après le lancement </h2><br><p>  Depuis son lancement en octobre 2018, le Solar Manager est adopté et utilisé par les plus grandes entreprises photovoltaïques grossistes et installateurs en Suisse. </p><br><p>  En examinant et en optimisant les habitudes de consommation d'énergie, les consommateurs tirent le meilleur parti de leurs PV et économisent ainsi des coûts.  À une échelle plus globale et selon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Deloitte</a> , une telle solution rend l'énergie solaire compétitive par rapport aux sources d'énergie traditionnelles.  Cela, à son tour, le rend attrayant pour d'autres consommateurs résidentiels et entreprises.  Et, finalement, cela ne semble-t-il pas être la base d'une ville intelligente que nous attendons tous? </p><br><h2>  Derrière le succès de tout projet IoT </h2><br><p>  Il n'y a pas de «guide ultime» pour créer un produit réussi.  Tout d'abord, chaque projet est unique et apporte ses propres défis.  Deuxièmement, même si vous avez réalisé un tas de projets dans le domaine, la technologie et les exigences du marché évoluent.  Donc, l'expérience que vous avez d'il y a 2 ou même six mois pourrait ne plus être pertinente maintenant. </p><br><p>  Vous pouvez également consulter notre GitHub pour de nombreux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">instruments open-source</a> gratuits <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour le développement IoT.</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466473/">https://habr.com/ru/post/fr466473/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466459/index.html">Tests d'intégration parallèle Postgresql dans l'application GO</a></li>
<li><a href="../fr466461/index.html">Sommet Zabbix 2019: à quoi s'attendre cette année</a></li>
<li><a href="../fr466463/index.html">Comment nous avons créé un prototype d'application de réparation d'arrêt</a></li>
<li><a href="../fr466465/index.html">Summ3r 0f H4ck 2019: résultats de recherche</a></li>
<li><a href="../fr466467/index.html">Prise en charge des jetons jwt anonymes dans IdentityServer4 utilisant AnonymousIdentity</a></li>
<li><a href="../fr466475/index.html">Comment transformer le trafic en ventes en utilisant les données des utilisateurs du site</a></li>
<li><a href="../fr466477/index.html">Utilisation de PVS-Studio lors de la vérification de projets Unreal Engine sur le système d'exploitation Windows</a></li>
<li><a href="../fr466479/index.html">Utilisation de PVS-Studio lors de la vérification de projets Unreal Engine sur le système d'exploitation Windows</a></li>
<li><a href="../fr466485/index.html">Voitures électriques des années 90. Partie 1. Frères Citroën et Peugeot</a></li>
<li><a href="../fr466489/index.html">Des ingénieurs coréens suggèrent d'utiliser Hololens comme alternative aux cloisons de bureau</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>