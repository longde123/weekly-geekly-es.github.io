<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСйЁЯП╛тАНЁЯдЭтАНЁЯСйЁЯП╝ тШ╕я╕П тЫ╣ЁЯП┐ рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд╕рд╛рде рдЙрдкрд╕рд░реНрдЧ рдкреЗрдбрд╝ ЁЯСЙЁЯП╜ ЁЯПК ЁЯРЬ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЗрддрдиреА рджреЗрд░ рдкрд╣рд▓реЗ рдореБрдЭреЗ рдПрдХ рдРрд╕реА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдиреНрдп рд▓реЛрдЧреЛрдВ рджреНрд╡рд╛рд░рд╛ рд▓рд╛рдЧреВ рдХреА рдЧрдИ рдереА рдФрд░ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рд╣реБрдИ рдереА, рд▓реЗрдХрд┐рди рдХреБрдЫ рд╡рд┐...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд╕рд╛рде рдЙрдкрд╕рд░реНрдЧ рдкреЗрдбрд╝</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479244/"> рдЗрддрдиреА рджреЗрд░ рдкрд╣рд▓реЗ рдореБрдЭреЗ рдПрдХ рдРрд╕реА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдиреНрдп рд▓реЛрдЧреЛрдВ рджреНрд╡рд╛рд░рд╛ рд▓рд╛рдЧреВ рдХреА рдЧрдИ рдереА рдФрд░ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рд╣реБрдИ рдереА, рд▓реЗрдХрд┐рди рдХреБрдЫ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рдереАред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреБрдВрдЬреА рдпрд╛ рдХреБрдВрдЬреА рдХреЗ рдХрдИ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╡рд░реНрдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЦреЛрдЬ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЗ рд╕рд╛рде рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреА рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред  рдХреБрдВрдЬреА рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐, рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рдФрд░ рд╕рдВрдЦреНрдпрд╛рдУрдВ рдореЗрдВ рд▓реИрдЯрд┐рди рдЕрдХреНрд╖рд░реЛрдВ рдХреА рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реИред <br><br>  рдЕрдиреНрдп рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реВрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛, рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рднрд╕реНрдо рд╕реНрдореГрддрд┐ рдкрд░ред  рдФрд░ рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЙрдкрд╕рд░реНрдЧ рд╡реГрдХреНрд╖ рдХрд╛ рдПрдХ рдФрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЕрддрд┐рд░реЗрдХ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред <a name="habracut"></a><br><br>  рд╡рд┐рдЪрд╛рд░ рд╢рд╛рдпрдж <a href="https://habr.com/ru/company/badoo/blog/451938/">рдЗрд╕ рд▓реЗрдЦ</a> рд╕реЗ рдкреНрд░реЗрд░рд┐рдд рдерд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдиреЛрдб рдореЗрдВ рдмрд╛рдж рдХреЗ рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдВрдХ рдХреЛ рдЕрдиреБрдХреНрд░рдорд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br>  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдПрдХ рдиреЛрдб рдореЗрдВ рд▓рд┐рдВрдХ рдХреА рд╕рдВрдЦреНрдпрд╛ 63 рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ (рдкреНрд░рддреНрдпреЗрдХ рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ рдПрдХ рд╕реНрдерд╛рди рдХреЗ рд╕рд╛рде 10 рдЕрдВрдХ, 26 рдкрддреНрд░)ред  рдЗрд╕рд▓рд┐рдП, рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдкрд░ 64-рдмрд┐рдЯ рдирдВрдмрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕реЗрдЯ рдмрд┐рдЯ рдХрд╛ рдЕрд░реНрде рд╣реИ, рд╕рдВрдмрдВрдзрд┐рдд рдкреНрд░рддреАрдХ рдФрд░ рдиреЛрдб (рдЙрдкрдкреНрд░рдХрд╛рд░) рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ред <br><br>  рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рдореЗрдВ рд╡рд┐рддрд░рдг рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ: 0 рд╕реЗ 9 рддрдХ рдХреА рд╕рдВрдЦреНрдпрд╛ 0 рд╕реЗ 9 рдмрд┐рдЯреНрд╕ рдкрд░ рдХрдмреНрдЬрд╛, 10 рд╕реЗ 35 рдмрд┐рдЯреНрд╕ рд╕реЗ рдПрдЬрд╝ рдЕрдХреНрд╖рд░, 36 рд╕реЗ 62 рдмрд┐рдЯреНрд╕ рддрдХ рдПрдЬрд╝реЗрдб рдЕрдХреНрд╖рд░ рдФрд░ 63 рдмрд┐рдЯреНрд╕ рдкрд░ рдПрдХ рдЬрдЧрд╣ рд╣реЛрддреА рд╣реИред  рдмрд┐рдЯ рд╕рдВрдЦреНрдпрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, ASCII рд╡рд░реНрдг рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрдЦреНрдпрд╛ рд╕реЗ рдШрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╡рд░реНрдгреЛрдВ рдХреА рдкреНрд░рддреНрдпреЗрдХ рд╢реНрд░реЗрдгреА рдХреЗ рд▓рд┐рдП, рд╕рдВрдЦреНрдпрд╛ рднрд┐рдиреНрди рд╣реЛрддреА рд╣реИ: рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП 48 (ASCII рдХреЛрдб рдореЗрдВ рдЕрдВрдХреЛрдВ рдХреА рд╕реАрдорд╛ 48 рд╕реЗ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ), рдЕрдХреНрд╖рд░ a 87 рдХреЗ рд▓рд┐рдП (рдЕрдХреНрд╖рд░реЛрдВ рдХреА рд╢реНрд░реЗрдгреА az рдХреА рд╢реБрд░реБрдЖрдд рдорд╛рдЗрдирд╕ 10 рдмрд┐рдЯреНрд╕ рд╕реЗ рд╣реЛрддреА рд╣реИ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА 10 рдЕрдВрдХреЛрдВ рдФрд░ рдЗрд╕реА рддрд░рд╣ рд╕реЗ рд╡реНрдпрд╛рдкреНрдд рд╣реИ)ред <br><br>  рдиреАрдЪреЗ рджреА рдЧрдИ рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><div class="scrollable-table"><table><tbody><tr><th colspan="14">  рдЪрд░рд┐рддреНрд░ рд╡рд┐рддрд░рдг </th></tr><tr><td>  рдкреНрд░рддреАрдХ </td><td>  0 </td><td>  1 </td><td>  ... </td><td>  9 </td><td>  рдПрдХ </td><td>  рдЦ </td><td>  ... </td><td>  z </td><td>  рдПрдХ </td><td>  рдмреА </td><td>  ... </td><td>  рдЬреЗрдб </td><td>  рдЕрдВрддрд░рд┐рдХреНрд╖ рдмрд╛рд░ </td></tr><tr><td>  рдмрд┐рдЯ рд╕рдВрдЦреНрдпрд╛ </td><td>  0 </td><td>  1 </td><td>  ... </td><td>  9 </td><td>  10 </td><td>  11 </td><td>  ... </td><td>  35 </td><td>  36 </td><td>  37 </td><td>  ... </td><td>  61 </td><td>  62 </td></tr></tbody></table></div><br>  рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдХреЛрдб рджреНрд╡рд╛рд░рд╛ рдиреЛрдб рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Trie <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { rw sync.RWMutex characters <span class="hljs-keyword"><span class="hljs-keyword">uint64</span></span> subTries []*Trie data <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} }</code> </pre> <br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдирд┐рдореНрди рд╡рд░реНрдгреЛрдВ рдХреЗ рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдЙрдк-рд▓рд┐рдВрдХ рдХреЗ рд╕рд╛рде рдПрдХ рдЯреБрдХрдбрд╝рд╛ рдФрд░ рдбреЗрдЯрд╛ рд╕реНрд╡рдпрдВред  рдореИрдВ рдЦреЛрдЬ, рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдФрд░ рд╡рд┐рд▓реЛрдкрди рддрдВрддреНрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ред <br><br>  рдЗрдирдкреБрдЯ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╕рдордп, рдХреБрдВрдЬреА рдкреНрд░рддреАрдХрд╛рддреНрдордХ рд░реВрдк рд╕реЗ рдкреЗрдбрд╝ рд╕реЗ рдЧреБрдЬрд░рддреА рд╣реИ, рд░реВрдЯ рдиреЛрдб рд╕реЗ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИред  рдЕрдкрдиреЗ ASCII рдХреЛрдб рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдг рдХреЗ рд▓рд┐рдП, рдмрд┐рдЯ рд╕рдВрдЦреНрдпрд╛ рдХреА рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИ, рдФрд░ рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЛ рд▓рд┐рдВрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд┐рдВрдХ (рд╕рдмрдЯреНрд░реА) рдХреЗ рд╕реНрд▓рд╛рдЗрд╕ рдореЗрдВ рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИред  рд╕реВрдЪрдХрд╛рдВрдХ рдореВрд▓реНрдп рд╡рд╛рдВрдЫрд┐рдд рдмрд┐рдЯ рд╕реЗ рдкрд╣рд▓реЗ рдмрд┐рдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдРрд╕рд╛ рд╕реВрдЪрдХрд╛рдВрдХ рд╣реИ: 00 ... 101ред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рдореЗрдВ рдирдВрдмрд░ 0 рдФрд░ 2 рд╣реИрдВред рдлрд┐рд░ рдирдВрдмрд░ 0 рдХреЗ рд▓рд┐рдП рдЗрдВрдбреЗрдХреНрд╕ рд╢реВрдиреНрдп рд╣реЛрдЧрд╛, рдФрд░ рдирдВрдмрд░ 2 рдХреЗ рд▓рд┐рдП рдпрд╣ 1 рд╣реЛрдЧрд╛, рдпрд╛рдиреА, рд╕рдмрдЯреНрд░реАрдЬрд╝ рдЙрдк-рд╕реАрд░реАрдЬрд╝ [0] рдФрд░ рд╕рдмрдЯреНрд░реАрдЬрд╝: 1 рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП 2 рд▓рд┐рдВрдХ рд╕реНрдЯреЛрд░ рдХрд░реЗрдЧрд╛ред ред <br><br>  рд╡рд░реНрдг рдХреЗ рд▓рд┐рдП рдмрд┐рдЯ рд╕рдВрдЦреНрдпрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calcBitNum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(char </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">rune</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint64</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// Characters az use bit positions 10-35 if char &gt; 96 &amp;&amp; char &lt; 123 { return uint64(char - 87), true } // Characters AZ use bit positions 36-61 if char &gt; 64 &amp;&amp; char &lt; 91 { return uint64(char - 29), true } // digits 0-9 use bit positions 0-9 if char &gt; 47 &amp;&amp; char &lt; 58 { return uint64(char - 48), true } // space uses 62 bit position if char == 32 { return 62, true } return 0, false }</span></span></code> </pre> <br>  рд╡рд░реНрдг рдХреЗ рд▓рд┐рдП рдиреЛрдб рдЗрдВрдбреЗрдХреНрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(trie *Trie)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSubTreeIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(bitNum </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint64</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { shifted := trie.characters &lt;&lt; (<span class="hljs-number"><span class="hljs-number">64</span></span> - bitNum) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bits.OnesCount64(shifted) }</code> </pre> <br>  рджрд┐рдП рдЧрдП рд╡рд░реНрдг рдХреЗ рд▓рд┐рдП рдиреЛрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдХреЛрдб: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(trie *Trie)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSubTrie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(char </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">rune</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint64</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, *Trie)</span></span></span></span> { bitNum, _ := calcBitNum(char) subTrieId := trie.getSubTreeIndex(bitNum) <span class="hljs-comment"><span class="hljs-comment">// There is no subTrie under given character since the corresponding bit is zero if trie.characters&amp;(1&lt;&lt;bitNum) == 0 { return bitNum, subTrieId, nil } return bitNum, subTrieId, trie.subTries[subTrieId] }</span></span></code> </pre> <br><h4>  рдбрд╛рд▓рдиреЗ </h4><br>  рдПрдХ рддрддреНрд╡ рдХреЛ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреЗрдбрд╝ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдХреЛрдИ рд╡рд░реНрдг (рдФрд░ рдЗрд╕рд▓рд┐рдП рд╕рднреА рдмрд╛рдж рд╡рд╛рд▓реЗ) рдЧрд╛рдпрдм рд╣реИ, рддреЛ рдЗрд╕реЗ рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рдореЗрдВ рдбрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдПрдХ рд╕рдмрдЯреНрд░реА рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИ, рдЬрд┐рд╕ рд▓рд┐рдВрдХ рдХреЛ рд╕реНрд▓рд╛рдЗрд╕ рд╕рдмрдЯреНрд░реАрдЬрд╝ рдХреЗ рд╕рд╣реА рд╕реНрдерд╛рди рдкрд░ рдбрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ (рд╕рд╣реА рдЬрдЧрд╣ рдмрд┐рдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реЗ рд╡рд╛рдВрдЫрд┐рдд рддрдХ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ)ред  рдЬрдм рд╡реЗ рдХреБрдВрдЬреА рдХреЗ рдЕрдВрддрд┐рдо рд╡рд░реНрдг рддрдХ рдкрд╣реБрдБрдЪрддреЗ рд╣реИрдВ, рддреЛ рдбреЗрдЯрд╛ рдХреЛ рдЕрдВрддрд┐рдо рдЙрдкрдкреНрд░рдХрд╛рд░ рдореЗрдВ рдбрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><h4>  рдЦреЛрдЬ </h4><br>  рдЦреЛрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХреБрдВрдЬреА рдкреЗрдбрд╝ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рддреАрдХрд╛рддреНрдордХ рд░реВрдк рд╕реЗ "рдЪрд▓рддреА рд╣реИ"ред  рдЬреИрд╕реЗ рд╣реА рдпрд╣ рдЦрддреНрдо рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдкрд░рд┐рдгрд╛рдо рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдХреБрдВрдЬреА рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдбреЗрдЯрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдЧреЗ рдЙрдкрдкреНрд░рдХрд╛рд░ рд╣реИрдВ, рддреЛ рдкрд░рд┐рдгрд╛рдо рдмрд╛рдж рдХреЗ рд╕рднреА рдЙрдкрдкреНрд░рдХрд╛рд░реЛрдВ рд╕реЗ рдЪреБрдиреЗ рдЧрдП рд╣реИрдВ рдЬрд┐рдирдХреЗ рдкрд╛рд╕ рдбреЗрдЯрд╛ рд╣реИред  рд▓реМрдЯрд╛рдП рдЧрдП рдбреЗрдЯрд╛ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рд╕реАрдорд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╕рдВрдкреВрд░реНрдг рдХреБрдВрдЬреА рдХреЗ рд╕рдВрдпреЛрдЧ рд╕реЗ рдПрдХрд▓ рдиреЛрдб рдХреА рдЦреЛрдЬ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рдпрд╛ рдХрдИ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╡рд░реНрдгреЛрдВ рдХреЗ рд╕рдВрдпреЛрдЧ рд╕реЗ рдиреЛрдбреНрд╕ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реИред <br><br><h4>  рдирд┐рд╖реНрдХрд╛рд╕рди </h4><br>  рдирд┐рд╖реНрдХрд╛рд╕рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрд╛рдХреА рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ (рдЕрдкреЗрдХреНрд╖рд╛ рдХреЗ рдЕрдиреБрд░реВрдк) рдирд┐рдХрд▓реАред  рдПрдХ рдХреБрдВрдЬреА рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреЗрдбрд╝ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рджреМрд░рд╛рди рдиреЛрдбреНрд╕ рдЬрд┐рдирдХреЗ рдкрд╛рд╕ рдбреЗрдЯрд╛ рдирд╣реАрдВ рд╣реИ, рдПрдХ рдЕрд▓рдЧ рд╕реНрд▓рд╛рдЗрд╕ рдореЗрдВ рджрд░реНрдЬ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдпрджрд┐ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдиреЛрдб рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕реНрд▓рд╛рдЗрд╕ рд╢реВрдиреНрдп рдкрд░ рд░реАрд╕реЗрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдкреЗрдбрд╝ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдорд╛рд░реНрдЧ рдЖрдЧреЗ рдЬрд╛рд░реА рд░рд╣рддрд╛ рд╣реИред  рдпрд╣реА рд╣реИ, рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдиреЛрдбреНрд╕ рдХреЗ рд╕реНрд▓рд╛рдЗрд╕ рдореЗрдВ рдиреЛрдбреНрд╕ рдХрд╛ рдЕрдиреБрдХреНрд░рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрд┐рд╕рдореЗрдВ рдбреЗрдЯрд╛ рдирд╣реАрдВ рд╣реИред  рдпрджрд┐ рдЕрдВрдд рдореЗрдВ рдЯреБрдХрдбрд╝рд╛ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рд░рд┐рд╡рд░реНрд╕ рдСрд░реНрдбрд░ рдореЗрдВ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рдмрд┐рдЯреНрд╕ рдХреЛ рдмрд┐рдЯрдореИрдк рдЗрдВрдбреЗрдХреНрд╕ рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдиреЛрдбреНрд╕ рд╣рдЯрд╛ рджрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред <br><br><h4>  рдкрд░рд┐рдгрд╛рдо </h4><br>  рдкрд░рд┐рдгрд╛рдо рдПрдХ рдЙрдкрд╕рд░реНрдЧ рд╡реГрдХреНрд╖ рд╣реИ рдЬреЛ рдЧрддрд┐ рдФрд░ рд╕реНрдореГрддрд┐ рдЦрдкрдд рдореЗрдВ рдЕрдиреНрдп рд╕рдордХрдХреНрд╖реЛрдВ рд╕реЗ рдмреЗрд╣рддрд░ рд╣реИ (рдФрд╕рддрди, рд╕реНрдореГрддрд┐ рдореЗрдВ 30% рдХрдо рдФрд░ рдЕрдзрд┐рдХ рддреЗрдЬ)ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рдПрдХ рдкреЗрдбрд╝ рдХреЗ рд╕рд╛рде рдмрд╣реБрдкрд░рдд рд╕рдВрдЪрд╛рд▓рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЖрд▓рд╕реА рдирд╣реАрдВ рдерд╛, рдЬреЛ рдЙрддреНрдкрд╛рджрдХрддрд╛ рдмрдврд╝рд╛рддрд╛ рд╣реИ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЦреЛрдЬ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВред  рдмреЗрд╢рдХ, рд╕рдорд╛рдзрд╛рди рдХрд╛рдлреА рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИ (рд▓реИрдЯрд┐рди рд╡рд░реНрдг, рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдкреНрд░рдореБрдЦ рдШрдЯрдХреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╕реНрдерд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рд╕реАрдорд╛)ред <br><br>  рдЙрдкрд╕рд░реНрдЧ рд╡реГрдХреНрд╖ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдЗрд╕ рд╕рдорд╛рдзрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдХ рд╢рдмреНрджрдХреЛрд╢, рдЦреЛрдЬ рд╕реВрдЪрдХрд╛рдВрдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдореИрдВрдиреЗ рдХреЛрдб рдбрд╛рд▓рдиреЗ, рдЦреЛрдЬ рдХрд░рдиреЗ рдФрд░ рд╣рдЯрд╛рдиреЗ рдХрд╛ рд╣рд╡рд╛рд▓рд╛ рдирд╣реАрдВ рджрд┐рдпрд╛, рдЗрд╕рд▓рд┐рдП рд▓реЗрдЦ рдХреЛ рдЕрд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕реНрд░реЛрдд рдХреЛрдб <a href="https://github.com/maratig/go-trie">рдЬреАрдердм рдкрд░</a> рдЙрдкрд▓рдмреНрдз рд╣реИред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi479244/">https://habr.com/ru/post/hi479244/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi479234/index.html">OpenStreetMap рд╕рдВред 488 (11/19/2019 - 11/25/2019) рдХреА рджреБрдирд┐рдпрд╛ рд╕реЗ рд╕рдорд╛рдЪрд╛рд░</a></li>
<li><a href="../hi479236/index.html">Kivyред Android рдФрд░ рдХреЛрдИ рдЬрд╛рджреВ рдХреЗ рд▓рд┐рдП рдкреИрдХреЗрдЬ рдмрдирд╛рдПрдБ</a></li>
<li><a href="../hi479238/index.html">рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╡рд╣ рдирд╣реАрдВ рд╣реИ рдЬреЛ рд╣рдореЗрдВ рдмрддрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi479240/index.html">рдЬрд┐рд╕ рдХреЛрдб рдореЗрдВ рд╣рдо рд░рд╣рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi479242/index.html">рд╣рдо YouTube рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдпреИрдВрдбреЗрдХреНрд╕ рд╕реНрдЯреЗрд╢рди рдХреЛ рдЕрдВрддрд┐рдо рд░реВрдк рджреЗ рд░рд╣реЗ рд╣реИрдВ</a></li>
<li><a href="../hi479246/index.html">рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдФрд░ рдкреЗрд╢реЗрд╡рд░ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП 11 рджрд┐рд╢рд╛рдПрдВ</a></li>
<li><a href="../hi479248/index.html">рдорд┐рдЯрдк "рдХрд╛рд░реНрд░рд╡рд╛рдИ рдореЗрдВ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕!" - рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдирд┐рд░реНрдорд╛рдг рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрднрд╡</a></li>
<li><a href="../hi479250/index.html">рдореИрдВрдиреЗ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдХреИрд╕реЗ рд╕реАрдЦрд╛ - рдПрдХ рд╢реБрд░реБрдЖрддреА рдЕрдиреБрднрд╡</a></li>
<li><a href="../hi479252/index.html">рд╕реВрдЪреА рдХреА рд╕рдордЭ рдмрдирд╛рдо рдорд╛рдирдЪрд┐рддреНрд░</a></li>
<li><a href="../hi479256/index.html">рджреЛ рд╢рд╛рдореЛрдВ рдореЗрдВ рдПрд╕реНрдЯреНрд░реЛрдХреНрд░реИрдХрд░ рдХреЗ рдорджреНрджреЗрдирдЬрд░ - тАЛтАЛрдореЗрд░рд╛ рдЕрдиреБрднрд╡</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>