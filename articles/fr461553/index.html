<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø ‚èπÔ∏è ‚úçüèΩ Exp√©rience dans l'automatisation des tests visuels de r√©gression dans Java + Selenium Webdriver + aShot üåßÔ∏è üßõüèº üë®‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour 

 Dans cet article, je voudrais parler de mon exp√©rience dans l'automatisation des tests de r√©gression visuelle. 

 Pr√©sentation 
 J'ai d√©cid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Exp√©rience dans l'automatisation des tests visuels de r√©gression dans Java + Selenium Webdriver + aShot</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461553/"> Bonjour <br><br>  Dans cet article, je voudrais parler de mon exp√©rience dans l'automatisation des tests de r√©gression visuelle. <br><a name="habracut"></a><br><h2>  Pr√©sentation </h2><br>  J'ai d√©cid√© de faire l'automatisation des tests visuels apr√®s avoir accidentellement d√©couvert un petit bug dans la mise en page.  Le projet a modifi√© la conception d'une page et les modifications ont touch√© les pages non li√©es aux t√¢ches. <br><br>  Ayant d√©cid√© que la v√©rification manuelle de l'apparence des pages du site n'√©tait pas une option, j'ai commenc√© l'automatisation. <br><br>  Nous avions besoin d'une solution simple avec des rapports pratiques.  Pour pouvoir √©crire des autotests sans aucune restriction, comparez les captures d'√©cran des pages et des √©l√©ments du site et utilisez diff√©rents navigateurs. <br><br>  Apr√®s une courte recherche d'une solution / structure pr√™te √† l'emploi, il a √©t√© d√©cid√© qu'il serait plus facile d'√©crire votre propre solution avec la fonctionnalit√© et le format de rapports n√©cessaires.  Parmi les options que j'ai vues, seul le cadre Galen semblait convenir, mais je l'ai trouv√© apr√®s avoir √©crit ma solution. <br><br>  Apr√®s avoir impl√©ment√© et test√© les autotests, j'ai d√©cid√© d'affiner un peu les tests et de cr√©er un projet distinct, afin de pouvoir l'utiliser plus tard sur d'autres sites et projets. <br><br><h3>  √Ä propos du projet </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VisualRegressionBoilerplate</a> est un projet relativement simple avec une structure sp√©cifique. <br><br>  Quelque chose comme un mod√®le / projet standard pour les autotests visuels. <br><br>  Le projet est destin√© aux petits sites / projets.  Pour ceux qui ont besoin d'une solution simple, sans frameworks complexes. <br><br><h3>  Les possibilit√©s </h3><br><ul><li>  Comparaison des captures d'√©cran des pages du site.  Vous pouvez sp√©cifier un ou plusieurs √©l√©ments ignor√©s. </li><li>  Comparaison des captures d'√©cran des √©l√©ments du site. </li><li>  Les tests peuvent √™tre ex√©cut√©s avec diff√©rentes largeurs d'√©cran: <b>mobile</b> - 360 px, <b>tablette</b> - 768 px, <b>ordinateur de bureau</b> - 1920 px </li><li>  Par d√©faut, deux navigateurs sont disponibles - <b>chrome</b> et <b>firefox</b> + les m√™mes navigateurs en mode <b>sans t√™te</b> . </li><li>  G√©n√©rateur de rapports - 4 captures d'√©cran sont cr√©√©es pour chaque test - actuel, attendu, diff√©rence, gif.  S'il n'y a pas de captures d'√©cran attendues, les captures d'√©cran r√©elles seront enregistr√©es comme pr√©vu. </li></ul><br><img src="https://habrastorage.org/webt/4w/uz/x5/4wuzx5j7efs31fouutwixretvi0.png"><br><br><h3>  Technologies utilis√©es </h3><br><ul><li>  Java </li><li>  Testng </li><li>  Maven </li><li>  Webdriver de s√©l√©nium </li><li>  aShot - une biblioth√®que pour comparer des images </li></ul><br><h3>  Comment commencer √† travailler avec un projet </h3><br><ol><li>  Installez java, maven, navigateurs. </li><li>  Dans le constructeur de la classe <b>DriverWrapper</b> , <b>vous</b> pouvez ajouter ou supprimer des navigateurs si n√©cessaire </li><li>  La classe <b>TestConfig</b> stocke tous les param√®tres du projet - navigateur, taille de fen√™tre de navigateur par d√©faut, etc.  Ici, vous pouvez ajouter ou modifier des param√®tres. </li><li>  Dans la classe <b>BasePage</b> , d√©finissez l'adresse du site test√©.  Vous pouvez d√©finir une adresse diff√©rente pour diff√©rents environnements (dev, stage, prod).  <b>BasePage</b> et les autres classes du module d' <b>application</b> sont un exemple du mod√®le d' <b>objet de page</b> .  Son utilisation est facultative. </li><li>  Examinez la classe de test <b>TestExample</b> et cr√©ez vos propres classes de test comme exemple. </li><li>  Ajouter de nouvelles classes de test √† <b>testng.xml</b> </li><li>  Ex√©cutez des tests avec les param√®tres n√©cessaires via <b>maven</b> </li><li>  V√©rifier le rapport dans le dossier de <b>rapport</b> </li></ol><br>  Dans le projet <b>README</b> , tout est d√©crit plus en d√©tail. <br><br><h3>  Comment √©crire des tests </h3><br>  En g√©n√©ral, comme vous le souhaitez.  Il n'y a aucune restriction.  Vous pouvez utiliser le mod√®le d' <b>objet de page</b> ou autre chose. <br><br>  Il vous suffit d'utiliser les fonctions suivantes pour comparer les captures d'√©cran: <br><br>  <b>Pour les pages:</b> <br><br>  Comparaison des captures d'√©cran de page: <br><br><pre><code class="java hljs">comparePageScreenshots(<span class="hljs-string"><span class="hljs-string">"index_page"</span></span>);</code> </pre> <br>  Comparaison des captures d'√©cran de page avec ignorer un √©l√©ment: <br><br><pre> <code class="java hljs">comparePageScreenshots(<span class="hljs-string"><span class="hljs-string">"index_page_ignored_element"</span></span>, IndexPage.MACKBOOK_BLOCK);</code> </pre> <br>  Comparaison des captures d'√©cran de la page en ignorant plusieurs √©l√©ments: <br><br><pre> <code class="java hljs"> comparePageScreenshots(<span class="hljs-string"><span class="hljs-string">"index_page_ignored_element"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[]{<span class="hljs-string"><span class="hljs-string">"section.panel.features.dark"</span></span>, <span class="hljs-string"><span class="hljs-string">"div.macbook"</span></span>});</code> </pre> <br>  Comparaison des captures d'√©cran de l'√©l√©ment de page - l'√©l√©ment peut √™tre recherch√© par le localisateur CSS <br><br><pre> <code class="java hljs">compareElementScreenshots(<span class="hljs-string"><span class="hljs-string">"index_page_element"</span></span>, IndexPage.FORGE_BLOCK);</code> </pre> <br>  Ou vous pouvez passer un objet de classe <b>WebElement</b> <br><br><pre> <code class="java hljs">compareElementScreenshots(<span class="hljs-string"><span class="hljs-string">"index_page_element"</span></span>, driver.findElement(By.cssSelector(<span class="hljs-string"><span class="hljs-string">"a.full.forge"</span></span>)));</code> </pre> <br><h3>  Probl√®mes possibles </h3><br><ul><li>  Les tests peuvent √©chouer en raison du contenu dynamique de la page.  Le probl√®me est r√©solu en ignorant les √©l√©ments avec un contenu dynamique. </li><li>  Les tests peuvent √©chouer en raison d'une diff√©rence de quelques pixels.  Vous pouvez <b>r√©soudre</b> ce <b>probl√®me</b> en modifiant le param√®tre - <b>TestConfig.allowableDiffSize</b> . </li><li>  Parfois, toutes les images ou certains √©l√©ments du site n'ont pas le temps de se charger.  Pour r√©soudre ce probl√®me, j'ai √©crit la fonction <b>preparePageForScreenshot ()</b> dans laquelle, en utilisant javaScript, la page d√©file de haut en bas.  Mais cela n'aide pas toujours. </li></ul><br><h3>  R√©sum√© </h3><br>  √Ä l'heure actuelle, le projet compte environ 50 tests - pages et diff√©rents √©l√©ments de page. <br>  Gr√¢ce au script bash, des autotests sont lanc√©s et le site est test√© imm√©diatement en trois extensions (mobile, tablette, bureau). <br><br>  Il y a quelques probl√®mes dus au contenu dynamique et au fait que certains √©l√©ments du site n'ont pas toujours le temps de se charger √† temps, mais les autotests peuvent faire face √† leur t√¢che. <br><br>  Toute modification de la mise en page est imm√©diatement visible. <br><br>  Lien vers le r√©f√©rentiel du projet - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VisualRegressionBoilerplate</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461553/">https://habr.com/ru/post/fr461553/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461533/index.html">Visualisation du sommeil de la premi√®re ann√©e de l'enfant sur les motifs de la couverture</a></li>
<li><a href="../fr461535/index.html">C ++, FIX, Oracle et PL / SQL: ce qu'un informaticien doit savoir pour obtenir un emploi en finance + de r√©elles opportunit√©s d'emploi</a></li>
<li><a href="../fr461537/index.html">Analyse. Fonctionnement des proxys SOCKS: avantages, inconv√©nients, diff√©rences par rapport aux autres technologies</a></li>
<li><a href="../fr461545/index.html">Texturation, ou ce que vous devez savoir pour devenir un artiste de surface. Partie 5. Syst√®me de mat√©riaux</a></li>
<li><a href="../fr461547/index.html">Syst√®me d'information m√©dicale (MIS) en tant que produit</a></li>
<li><a href="../fr461555/index.html">Visualisations des feuilles de calcul Google</a></li>
<li><a href="../fr461561/index.html">Minuterie Arduino</a></li>
<li><a href="../fr461563/index.html">Sabre laser laser √† vapeur de cuivre fait maison - Partie 3 finale</a></li>
<li><a href="../fr461565/index.html">Les 5 commandements du d√©veloppeur TypeScript</a></li>
<li><a href="../fr461567/index.html">SQL Des puzzles divertissants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>