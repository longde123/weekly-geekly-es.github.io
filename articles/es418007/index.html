<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧙🏾 🚝 🎶 Desarrollo multiplataforma con .NET, programación reactiva, patrón MVVM y generación de código 🌉 🧔🏿 👋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy en día, la plataforma .NET es una herramienta verdaderamente universal: con su ayuda puede resolver una amplia gama de tareas, incluido el desarro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrollo multiplataforma con .NET, programación reactiva, patrón MVVM y generación de código</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418007/"><img src="https://habrastorage.org/getpro/habr/post_images/721/7e2/016/7217e20165dadee3752fd746b8de07ad.png" alt="MVVM reactivo y estándar .NET"><br><br>  Hoy en día, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">la plataforma .NET</a> es una herramienta verdaderamente universal: con su ayuda puede resolver una amplia gama de tareas, incluido el desarrollo de aplicaciones para sistemas operativos populares, como Windows, Linux, MacOS, Android e iOS.  En este artículo, veremos la arquitectura de las aplicaciones .NET multiplataforma utilizando el patrón de diseño MVVM y la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">programación reactiva</a> .  Nos familiarizaremos con las bibliotecas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReactiveUI</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Fody</a> , aprenderemos cómo implementar la interfaz INotifyPropertyChanged usando atributos, tocaremos los conceptos básicos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">AvaloniaUI</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Xamarin Forms</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Universal Windows Platform</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Windows Presentation Foundation</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">.NET Standard</a> , y aprenderemos herramientas efectivas para probar modelos de capas y modelos de presentación de aplicaciones. <br><br>  El material es una adaptación de los artículos " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">MVVM reactivo para la plataforma .NET</a> " y " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Aplicaciones .NET multiplataforma a través del enfoque MVVM reactivo</a> ", publicado por el autor anteriormente en el recurso Medio.  El código de muestra está <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">disponible en GitHub</a> . <a name="habracut"></a><br><br><h2>  Introduccion  Arquitectura MVVM y .NET multiplataforma </h2><br>  Al desarrollar aplicaciones multiplataforma en la plataforma .NET, debe escribir código portátil y compatible.  Si trabaja con marcos que usan dialectos XAML, como UWP, WPF, Xamarin Forms y AvaloniaUI, esto se puede lograr utilizando el patrón de diseño MVVM, la programación reactiva y la estrategia de separación de código estándar .NET.  Este enfoque mejora la portabilidad de las aplicaciones al permitir a los desarrolladores utilizar una base de código común y bibliotecas de software comunes en varios sistemas operativos. <br><br>  Echaremos un vistazo más de cerca a cada una de las capas de una aplicación construida sobre la base de la arquitectura MVVM: el modelo, la vista y el modelo de vista.  La capa del modelo representa servicios de dominio, objetos de transferencia de datos, entidades de bases de datos, repositorios: toda la lógica empresarial de nuestro programa.  La vista es responsable de mostrar los elementos de la interfaz de usuario en la pantalla y depende del sistema operativo específico, y el modelo de presentación permite que las dos capas descritas anteriormente interactúen, adaptando la capa del modelo para interactuar con el usuario humano. <br><br>  La arquitectura MVVM proporciona la división de responsabilidades entre las tres capas de software de la aplicación, por lo que estas capas se pueden colocar en ensamblajes separados dirigidos a .NET Standard.  La especificación formal de .NET Standard permite a los desarrolladores crear bibliotecas portátiles que se pueden usar en diversas implementaciones de .NET con un único conjunto unificado de API.  Siguiendo estrictamente la arquitectura MVVM y la estrategia de separación de código estándar .NET, podremos usar capas de modelos y modelos de presentación listos para usar al desarrollar la interfaz de usuario para varias plataformas y sistemas operativos. <br><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/e8c/e6d/17a/e8ce6d17a5c3bc292d8feed8becec691.png" alt="imagen"><br><br>  Si escribimos una aplicación para el sistema operativo Windows utilizando Windows Presentation Foundation, podemos portarla fácilmente a otros marcos, como, por ejemplo, Avalonia UI o Xamarin Forms, y nuestra aplicación funcionará en plataformas como iOS, Android, Linux, OSX y la interfaz de usuario serán lo único que deberá escribirse desde cero. <br><br><h2>  Implementación tradicional de MVVM </h2><br>  Los modelos de presentación generalmente incluyen propiedades y comandos a los que se pueden vincular elementos de marcado XAML.  Para que los enlaces de datos funcionen, el modelo de vista debe implementar la interfaz INotifyPropertyChanged y publicar el evento PropertyChanged siempre que cambie alguna de las propiedades del modelo de vista.  Una implementación simple podría verse así: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; Clear = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Command(() =&gt; Name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICommand Clear { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Greeting =&gt; <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{Name}</span></span></span><span class="hljs-string">!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; name; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (name == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; name = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; OnPropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(Name)); OnPropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(Greeting)); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> PropertyChangedEventHandler PropertyChanged; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { PropertyChanged?.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(name)); } }</code> </pre> <br>  XAML que describe la interfaz de usuario de la aplicación: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Greeting, Mode=OneWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Clear"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Clear}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Y funciona!  Cuando el usuario ingresa su nombre en el cuadro de texto, el siguiente texto cambia instantáneamente, saludando al usuario. <br><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/67a/ade/f99/67aadef9917bff7744a9e36ffded3253.png" alt="Muestra de unión de MVVM"><br><br>  Pero espera un momento!  Nuestra interfaz de usuario solo necesita dos propiedades sincronizadas y un comando, ¿por qué necesitamos escribir más de veinte líneas de código para que nuestra aplicación funcione correctamente?  ¿Qué sucede si decidimos agregar más propiedades que reflejen el estado de nuestro modelo de vista?  El código se hará más grande, el código se volverá más complicado y complicado.  ¡Y todavía tenemos que apoyarlo! <br><br><h2>  Receta # 1.  Plantilla de observador.  Captadores y colocadores cortos.  IU reactiva </h2><br>  De hecho, el problema de la implementación detallada y confusa de la interfaz INotifyPropertyChanged no es nuevo y existen varias soluciones.  Lo primero que debe prestar atención a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReactiveUI</a> .  Este es un marco MVVM reactivo, funcional y multiplataforma que permite a los desarrolladores de .NET usar extensiones reactivas al desarrollar modelos de presentación. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Las extensiones reactivas</a> son una implementación del patrón de diseño de Observer definido por las interfaces de la biblioteca estándar .NET: IObserver e IObservable.  La biblioteca también incluye más de cincuenta operadores que le permiten convertir flujos de eventos (filtrarlos, combinarlos y agruparlos) utilizando una sintaxis similar al lenguaje de consulta estructurado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">LINQ</a> .  Lea más sobre las extensiones de chorro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> . <br><br>  ReactiveUI también proporciona una clase base que implementa INotifyPropertyChanged - ReactiveObject.  Reescribamos nuestro código de muestra utilizando las características proporcionadas por el marco. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ReactiveViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ReactiveObject</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReactiveViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Clear = ReactiveCommand.Create(() =&gt; Name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue(x =&gt; x.Name) .Select(name =&gt; <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string">!"</span></span>) .ToProperty(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, x =&gt; x.Greeting, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> greeting); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveCommand Clear { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ObservableAsPropertyHelper&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; greeting; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Greeting =&gt; greeting.Value; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; name; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.RaiseAndSetIfChanged(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> name, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } }</code> </pre> <br>  Tal modelo de presentación hace exactamente lo mismo que el anterior, pero el código que contiene es más pequeño, es más predecible y todas las relaciones entre las propiedades del modelo de presentación se describen en un solo lugar utilizando la sintaxis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">LINQ to Observable</a> .  Por supuesto, podríamos detenernos aquí, pero todavía hay bastante código: tenemos que implementar explícitamente getters, setters y campos. <br><br><h2>  Receta # 2.  Encapsulación INotifyPropertyChanged.  Propiedad reactiva </h2><br>  Una solución alternativa es utilizar la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReactiveProperty</a> , que proporciona clases de contenedor que son responsables de enviar notificaciones a la interfaz de usuario.  Con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReactiveProperty,</a> el modelo de vista no tiene que implementar ninguna interfaz; en cambio, cada propiedad implementa INotifyPropertyChanged.  Dichas propiedades reactivas también implementan IObservable, lo que significa que podemos suscribirnos a sus cambios como si estuviéramos usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReactiveUI</a> .  Cambie nuestro modelo de vista usando ReactiveProperty. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ReactivePropertyViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReadOnlyReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; Greeting { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveCommand Clear { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReactivePropertyViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Clear = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactiveCommand(); Name = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); Clear.Subscribe(() =&gt; Name.Value = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); Greeting = Name .Select(name =&gt; <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string">!"</span></span>) .ToReadOnlyReactiveProperty(); } }</code> </pre> <br>  Solo necesitamos declarar e inicializar las propiedades reactivas y describir las relaciones entre ellas.  No es necesario escribir ningún código repetitivo aparte de los inicializadores de propiedades.  Pero este enfoque tiene un inconveniente: debemos cambiar nuestro XAML para que funcionen los enlaces de datos.  Las propiedades reactivas son envoltorios, por lo que la interfaz de usuario debe estar vinculada a la propiedad propia de cada envoltorio. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Name.Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Greeting.Value, Mode=OneWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Clear"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Clear}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h2>  Receta # 3.  Cambiar el ensamblaje en tiempo de compilación.  PropertyChanged.Fody + ReactiveUI </h2><br>  En un modelo de presentación típico, cada propiedad pública debería poder enviar notificaciones a la interfaz de usuario cuando cambie su valor.  Con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">PropertyChanged.Fody</a> , no tiene que preocuparse por eso.  Lo único que se requiere del desarrollador es marcar la clase de modelo de vista con el atributo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">AddINotifyPropertyChangedInterface</a> , y el código responsable de publicar el evento PropertyChanged se agregará automáticamente a los establecedores después de que se construya el proyecto, junto con la implementación de la interfaz INotifyPropertyChanged, si falta uno.  Si es necesario, convierta nuestras propiedades en secuencias de valores cambiantes, siempre podemos usar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">método de</a> extensión <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">WhenAnyValue</a> de la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReactiveUI</a> .  ¡Reescribamos nuestra muestra por tercera vez y veamos cuánto más conciso será nuestro modelo de presentación! <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AddINotifyPropertyChangedInterface</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FodyReactiveViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveCommand Clear { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Greeting { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FodyReactiveViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Clear = ReactiveCommand.Create(() =&gt; Name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue(x =&gt; x.Name) .Select(name =&gt; <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string">!"</span></span>) .Subscribe(x =&gt; Greeting = x); } }</code> </pre> <br>  Fody cambia el código IL del proyecto en tiempo de compilación.  El complemento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">PropertyChanged.Fody</a> busca todas las clases marcadas con el atributo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">AddINotifyPropertyChangedInterface</a> o implementa la interfaz INotifyPropertyChanged, y edita los establecedores de dichas clases.  Puede obtener más información sobre cómo funciona la generación de código y qué otras tareas se pueden resolver del informe de Andrei Kurosh " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Reflexión.Emitir. Práctica de uso</a> ". <br><br>  Aunque PropertyChanged.Fody nos permite escribir código limpio y expresivo, las versiones heredadas de .NET Framework, incluidas 4.5.1 y posteriores, ya no son compatibles.  Esto significa que, de hecho, puede intentar usar ReactiveUI y Fody en su proyecto, ¡pero bajo su propio riesgo y teniendo en cuenta que todos los errores encontrados nunca se solucionarán!  Las versiones para .NET Core son compatibles de acuerdo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">con la política de soporte de Microsoft</a> . <br><br><h2>  De la teoría a la práctica.  Validación de formularios con ReactiveUI y PropertyChanged.Fody </h2><br>  Ahora estamos listos para escribir nuestro primer modelo de presentación reactiva.  Imaginemos que estamos desarrollando un complejo sistema multiusuario, mientras pensamos en UX y queremos recopilar comentarios de nuestros clientes.  Cuando un usuario nos envía un mensaje, necesitamos saber si se trata de un informe de error o una sugerencia para mejorar el sistema, también queremos agrupar las revisiones en categorías.  Los usuarios no deben enviar cartas hasta que completen toda la información necesaria correctamente.  Un modelo de presentación que satisfaga las condiciones enumeradas anteriormente puede verse así: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AddINotifyPropertyChangedInterface</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FeedbackViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveCommand&lt;Unit, Unit&gt; Submit { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasErrors { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Title { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TitleLength =&gt; Title.Length; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TitleLengthMax =&gt; <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Message { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MessageLength =&gt; Message.Length; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MessageLengthMax =&gt; <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Section { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Issue { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Idea { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FeedbackViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IService service</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue(x =&gt; x.Idea) .Where(selected =&gt; selected) .Subscribe(x =&gt; Issue = <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue(x =&gt; x.Issue) .Where(selected =&gt; selected) .Subscribe(x =&gt; Idea = <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> valid = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue( x =&gt; x.Title, x =&gt; x.Message, x =&gt; x.Issue, x =&gt; x.Idea, x =&gt; x.Section, (title, message, issue, idea, section) =&gt; !<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(message) &amp;&amp; !<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(title) &amp;&amp; (idea || issue) &amp;&amp; section &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>); valid.Subscribe(x =&gt; HasErrors = !x); Submit = ReactiveCommand.Create( () =&gt; service.Send(Title, Message), valid ); } }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Marcamos</a> nuestro modelo de vista con el atributo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">AddINotifyPropertyChangedInterface</a> , por lo que todas las propiedades notificarán a la interfaz de usuario de un cambio en sus valores.  Usando el método <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">WhenAnyValue</a> , nos suscribiremos a los cambios en estas propiedades y actualizaremos otras propiedades.  El equipo responsable de enviar el formulario permanecerá apagado hasta que el usuario complete el formulario correctamente.  Guardaremos nuestro código en la biblioteca de clases dirigida al estándar .NET y pasaremos a las pruebas. <br><br><h2>  Prueba de modelo de unidad </h2><br>  Las pruebas son una parte importante del proceso de desarrollo de software.  Con las pruebas, podremos confiar en nuestro código y dejar de tener miedo de refactorizarlo; después de todo, para verificar el funcionamiento correcto del programa, será suficiente ejecutar las pruebas y asegurarnos de que se completen con éxito.  Una aplicación que utiliza la arquitectura MVVM consta de tres capas, dos de las cuales contienen lógica independiente de la plataforma, y ​​podemos probarla utilizando .NET Core y el marco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">XUnit</a> . <br><br>  Para crear mobs y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">stubs</a> , la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">NSubstitute</a> es útil para nosotros, que proporciona una API conveniente para describir las reacciones a las acciones del sistema y los valores devueltos por "objetos falsos". <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sumService = Substitute.For&lt;ISumService&gt;(); sumService.Sum(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>).Returns(<span class="hljs-number"><span class="hljs-number">4</span></span>);</code> </pre> <br>  Para mejorar la legibilidad del código y los mensajes de error en nuestras pruebas, utilizamos la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">FluentAssertions</a> .  Con él, no solo tendremos que recordar qué argumento en Assert.Equal cuenta el valor real y cuál es el valor esperado, ¡sino que nuestro IDE escribirá el código por nosotros! <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fibs = fibService.GetFibs(<span class="hljs-number"><span class="hljs-number">10</span></span>); fibs.Should().NotBeEmpty(<span class="hljs-string"><span class="hljs-string">"because we've requested ten fibs"</span></span>); fibs.First().Should().Be(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  Escribamos una prueba para nuestro modelo de presentación. <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Fact</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShouldValidateFormAndSendFeedback</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    , //    . var service = Substitute.For&lt;IService&gt;(); var feedback = new FeedbackViewModel(service); feedback.HasErrors.Should().BeTrue(); //   . feedback.Message = "Message!"; feedback.Title = "Title!"; feedback.Section = 0; feedback.Idea = true; feedback.HasErrors.Should().BeFalse(); //    , //   Send()  IService  //    . feedback.Submit.Execute().Subscribe(); service.Received(1).Send("Title!", "Message!"); }</span></span></code> </pre> <br><br><h2>  IU para la plataforma universal de Windows </h2><br>  Ok, ahora nuestro modelo de presentación está probado y estamos seguros de que todo funciona como se esperaba.  El proceso de desarrollo de la capa de presentación de nuestra aplicación es bastante simple: necesitamos crear un nuevo proyecto de Plataforma universal de Windows dependiente de la plataforma y agregar un enlace a la biblioteca .NET Standard que contenga la lógica independiente de la plataforma de nuestra aplicación.  A continuación, lo pequeño es declarar los controles en XAML, vincular sus propiedades a las propiedades del modelo de vista y recordar <a href="" rel="nofollow">especificar el contexto de datos de</a> cualquier manera conveniente.  ¡Hagámoslo! <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"300"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Feedback"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource TitleTextBlockStyle}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">PlaceholderText</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Title"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MaxLength</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding TitleLengthMax}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource CaptionTextBlockStyle}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding TitleLength, Mode=OneWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"letters used from"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding TitleLengthMax}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">PlaceholderText</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Message"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MaxLength</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding MessageLengthMax}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Message, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource CaptionTextBlockStyle}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding MessageLength, Mode=OneWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"letters used from"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding MessageLengthMax}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SelectedIndex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Section, Mode=TwoWay}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"User Interface"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Audio"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Video"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Voice"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CheckBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Idea"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsChecked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Idea, Mode=TwoWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CheckBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Issue"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsChecked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Issue, Mode=TwoWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Visibility</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding HasErrors}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Please, fill in all the form fields."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Foreground</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{ThemeResource AccentBrush}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Send Feedback"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Submit}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Finalmente, nuestro formulario está listo. <br><br><img width="400" src="https://habrastorage.org/getpro/habr/post_images/cd7/9b1/990/cd79b19908c84db79f04635d12a1e169.png" alt="uwp mvvm sample"><br><br><h2>  IU para Xamarin.Forms </h2><br>  Para que la aplicación funcione en dispositivos móviles con sistemas operativos Android e iOS, debe crear un nuevo proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Xamarin.Forms</a> y <a href="" rel="nofollow">describir la interfaz de usuario</a> utilizando controles Xamarin adaptados para dispositivos móviles. <br><br><img width="400" src="https://habrastorage.org/getpro/habr/post_images/b02/aee/c7f/b02aeec7ff72844a70ca2279d50ec016.png" alt="Muestra mvvm de xamarin.forms"><br><br><h2>  IU para Avalonia </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Avalonia</a> es un framework .NET multiplataforma que utiliza el dialecto XAML familiar para los desarrolladores de WPF, UWP o Xamarin.Forms.  Avalonia es compatible con Windows, Linux y OSX y está siendo desarrollado por una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">comunidad de entusiastas de GitHub</a> .  Para trabajar con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReactiveUI,</a> debe instalar el paquete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Avalonia.ReactiveUI</a> .  <a href="" rel="nofollow">Describa la capa de presentación</a> en Avalonia XAML! <br><br><img width="350" src="https://habrastorage.org/getpro/habr/post_images/974/67d/ea8/97467dea8abc6ba4988c8fbdc904b673.png" alt="muestra mvvm de avalonia"><br><br><h2>  Conclusión </h2><br>  Como podemos ver, .NET en 2018 nos permite escribir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">software verdaderamente multiplataforma</a> : usando UWP, Xamarin.Forms, WPF y AvaloniaUI, podemos proporcionar soporte para nuestros sistemas operativos de aplicaciones Android, iOS, Windows, Linux, OSX.  Los patrones y bibliotecas de diseño de MVVM, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReactiveUI</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Fody,</a> pueden simplificar y acelerar el proceso de desarrollo al escribir código claro, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">fácil de</a> mantener y portátil.  La infraestructura desarrollada, la documentación detallada y el buen soporte en los editores de código hacen que la plataforma .NET sea cada vez más atractiva para los desarrolladores de software. <br><br>  Si está escribiendo aplicaciones de escritorio o móviles en .NET y aún no está familiarizado con ReactiveUI, asegúrese de prestarle atención: el marco utiliza <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">uno de los clientes GitHub más populares para iOS</a> , la extensión <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Visual Studio para GitHub</a> , el cliente git <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Atitian SourceTree</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Slack para Windows 10 Móvil</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La serie de artículos sobre ReactiveUI en Habré</a> puede convertirse en un excelente punto de partida.  Para los desarrolladores de Xamarin, el curso " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Creación de una aplicación iOS con C #</a> " de uno de los autores de ReactiveUI probablemente será útil.  Puede obtener más información <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sobre la</a> experiencia de desarrollo en AvaloniaUI <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el artículo sobre Egram</a> , un cliente alternativo para Telegram en .NET Core. <br><br>  Las fuentes de la aplicación multiplataforma descrita en el artículo y que demuestran las posibilidades de validar formularios con ReactiveUI y Fody <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">se pueden encontrar en GitHub</a> .  Un ejemplo de una aplicación multiplataforma que se ejecuta en Windows, Linux, macOS y Android, y que demuestra el uso de ReactiveUI, ReactiveUI.Fody y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Akavache</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">también</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">está</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">disponible en GitHub</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es418007/">https://habr.com/ru/post/es418007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es417995/index.html">Cambios planeados a FZ-152</a></li>
<li><a href="../es417997/index.html">Comience con usted mismo, o 60 días Kubuntu</a></li>
<li><a href="../es417999/index.html">Inglés: Perspectiva del ingeniero</a></li>
<li><a href="../es418001/index.html">5 modelos de trabajo en equipo efectivo</a></li>
<li><a href="../es418005/index.html">Los desarrolladores de software no están de acuerdo con la definición de "hardware especial" del FSB</a></li>
<li><a href="../es418009/index.html">Node.js y representación del servidor en Airbnb</a></li>
<li><a href="../es418011/index.html">Páginas individuales y SEO. Secretos de optimización</a></li>
<li><a href="../es418013/index.html">El Intel Core i7-8086K (parte 3)</a></li>
<li><a href="../es418015/index.html">Nuevo Vasyuki. Desarrollo innovador de Moscú hasta 2100</a></li>
<li><a href="../es418017/index.html">Análisis del comportamiento del troyano Pegasus en la red.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>