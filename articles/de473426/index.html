<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≥ ‚òØÔ∏è üåã Automatisierung von End-2-End-Tests eines integrierten Informationssystems. Teil 1. Organisatorisch üò† üñïüèΩ üë¥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mit diesem Artikel er√∂ffnen wir eine Reihe von Ver√∂ffentlichungen dar√ºber, wie wir den Prozess des manuellen Testens eines gro√üen Informationssystems ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatisierung von End-2-End-Tests eines integrierten Informationssystems. Teil 1. Organisatorisch</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lanit/blog/473426/">  Mit diesem Artikel er√∂ffnen wir eine Reihe von Ver√∂ffentlichungen dar√ºber, wie wir den Prozess des manuellen Testens eines gro√üen Informationssystems in einem der Hauptprojekte von LANIT automatisiert haben und was daraus entstanden ist. <br><br>  <i>Der erste Teil - organisatorisch und verwaltungstechnisch - sollte in erster Linie f√ºr diejenigen n√ºtzlich sein, die f√ºr das Testen der Automatisierung verantwortlich sind und solche Systeme als Ganzes erstellen.</i>  <i>Projektmanager, Gruppenleiter und Eigent√ºmer von funktionalen und automatischen Testdiensten, die sich <b>alle mit der Frage besch√§ftigen, wie ein kosteng√ºnstiger End-2-End-Test ihres IT-Systems erstellt werden kann, finden hier einen konkreten Plan und eine konkrete Methodik.</b></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f3/664/45f/8f366445ff952429d3a43ff7911ef34d.jpg"></div>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a></i> <br><a name="habracut"></a><br><h1>  Teil 1 - Organisation und Management.  Warum brauchten wir Automatisierung?  Organisation des Entwicklungs- und Managementprozesses.  Organisation der Nutzung </h1><br>  Am Anfang gab es ein gro√ües und komplexes Informationssystem (wir werden es das ‚ÄûSystem‚Äú nennen) mit zahlreichen komplexen, langen und miteinander verbundenen Gesch√§ftsszenarien.  Alle Skripte wurden als E2E √ºber Webschnittstellen ausschlie√ülich im manuellen Modus getestet (es gab mehr als eineinhalb Tausend solcher Szenarien mit nur der kritischsten Priorit√§t).  Dar√ºber hinaus mussten alle diese Szenarien mindestens einmal w√§hrend der Regression jeder neuen Version oder jedes neuen Hotfixes vor dem n√§chsten Bereitstellungsupdate f√ºr das Produkt abgeschlossen werden. <br><br>  Zu einem bestimmten Zeitpunkt, als es v√∂llig unertr√§glich wurde, im manuellen Modus mit der Maus zu klicken, beschlossen wir, alles zu automatisieren.  Dies haben sie durch die Entwicklung eines separaten Dienstes auf der Basis von Java + Selen + Selenid + Selenoid getan, der auch als <b>"Test-Framework"</b> oder einfach <b>"Autotests" bezeichnet wird</b> . <br><br>  In der Vergangenheit wurde der Test-Framework-Code von zwei Teams entwickelt.  Zun√§chst erstellte das erste Team einen Prototyp mit ein paar Dutzend Szenarien.  Dann skalierte das zweite Team f√ºr ein Jahr den Prototyp sowohl in der Breite (Anzahl der Tests) als auch in der Tiefe (typische Codierungs- und Implementierungsmuster wurden eingef√ºhrt). <br><br>  Ich bin das Team und der Teamleiter des zweiten Teams, das das Prototyp-Framework f√ºr die Skalierung √ºbernommen hat (im Mai 2018). <br><br>  Zum Zeitpunkt dieses Schreibens war die vor einem Jahr festgelegte Aufgabe abgeschlossen und das Projektteam erhielt einen stabilen Automatisierungsservice.  Es war nicht umsonst, dass ich den <u><b>Service</b></u> hervorhob, da die Aufgabe urspr√ºnglich nicht darin bestand, eine Anwendung zu entwickeln, sondern einen Service-Service zum Testen der Automatisierung f√ºr eine Gruppe von ‚ÄûFunktionstests‚Äú bereitzustellen.  Diese Funktion hat in der Folge die Organisation der Entwicklung und die Architektur des Testframeworks stark beeinflusst. <br><br><blockquote><h2>  Zusammenfassung </h2><br>  Etwa 1.500 Testszenarien wurden automatisiert: In jedem Test wurden 200 bis 2000 Benutzeroperationen durchgef√ºhrt. <br><br>  Die Gesamtkapazit√§t des Dienstes betr√§gt bis zu 60 gleichzeitig arbeitende Browser, und dies ist nicht die Grenze (die Anzahl kann aufgrund virtueller Maschinen um das F√ºnffache erh√∂ht werden). <br>  Die Gesamtdauer einer vollst√§ndigen Regression betr√§gt nicht mehr als 3 Stunden, und der PreQA-Test betr√§gt weniger als eine Stunde. <br><br>  Eine umfangreiche Palette von Funktionen wurde implementiert: <br><br><ul><li>  lokale Nutzung (Echtzeitausf√ºhrung) und Remote (√ºber Bambuspl√§ne); </li><li>  Begrenzung der Zusammensetzung laufender Tests durch Filter; </li><li>  einen detaillierten Bericht mit den Ergebnissen jedes Schritts des Testszenarios (√ºber das Allure-Framework); </li><li>  Herunterladen und Hochladen von Dateien von / in den Browser, gefolgt von der √úberpr√ºfung der Ergebnisse ihrer Verarbeitung hinsichtlich Format und Inhalt der Dateien; </li><li>  Abrechnung und Steuerung der asynchronen Natur der Winkelschnittstelle.  Einschlie√ülich der Kontrolle von blockierten Anforderungen (ausstehende Anforderung) zwischen Angular- und REST-Diensten; </li><li>  Kontrolle von Browserprotokollen; </li><li>  Video-Testaufzeichnung; </li><li>  Entfernen des Schnappschusses der Seite zum Zeitpunkt des "Sturzes" des Tests; </li><li>  Ereignis√ºbertragung in ELK; </li><li>  viel mehr √ºber die kleinen Dinge ... </li></ul><br></blockquote><br><h1>  Warum wurde das alles gebraucht? </h1><br>  Zu Beginn war der Zweck des Systems recht einfach und klar. <br><br>  Stellen Sie sich vor, Sie verf√ºgen √ºber ein gro√ües Registrierungssystem f√ºr die Verwaltung einer Vielzahl von Dokumenten und deren Lebenszyklus, die einige hundert Gesch√§ftsprozesse bereitstellen.  Dar√ºber hinaus gibt es Millionen von Menschen, Lieferanten - Zehntausende, Dienstleistungen - Tausende, komplexe Dokumente, einschlie√ülich Framework und Vorlage, und die Bereitstellung von Gesch√§ftsprozessen wird auf Hunderte verschiedener Arten bereitgestellt ... <br><br>  All dies f√ºhrt zu anderthalb Tausend Testszenarien, und dies ist nur die h√∂chste Priorit√§t und nur positiv. <br><br>  W√§hrend des Automatisierungsprozesses wurden verschiedene Nuancen entdeckt, die die Verwendung verschiedener L√∂sungen erforderten. <br><br>  Beispielsweise kann ein Skript bis zu Hunderte von separaten Vorg√§ngen enthalten, darunter interessante wie: ‚ÄûLaden Sie eine EXCEL-Datei mit Daten herunter und √ºberpr√ºfen Sie, ob das System jeden Datensatz aus der Datei verarbeitet‚Äú (um dieses Problem zu l√∂sen, waren mehrere Schritte erforderlich, um die Daten vorzubereiten und das Ergebnis des Ladens zu √ºberpr√ºfen System).  Und jetzt f√ºgen wir die Einschr√§nkung der Wiederverwendung von Testdaten hinzu: Die Testdaten f√ºr den erfolgreichen Abschluss der meisten Testszenarien sollten "frisch" sein und zuvor nicht in √§hnlichen Szenarien verwendet werden (w√§hrend der Tests √§ndert sich der Status der Daten im System, sodass sie nicht wiederverwendet werden k√∂nnen die gleichen Schecks). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/242/0a7/ccc/2420a7ccc161bb7ee6537a73cd6bd33a.jpg"></div>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> <br><br>  Irgendwann schien das manuelle Testen des Systems als Teil der Regression nicht mehr kosteng√ºnstig und schnell genug zu sein, und sie beschlossen, es √ºber die Webbenutzeroberfl√§che zu automatisieren. <br><br>  Mit anderen Worten, die Funktionstestgruppe √∂ffnet die "Seite", w√§hlt die "Testgruppe" aus und dr√ºckt die "Ausf√ºhren" -Taste (wir haben Bamboo verwendet).  Dann emulieren Autotests (im Folgenden als Autotests bezeichnet. Das erstellte Produkt zum Testen im Allgemeinen festlegen) automatisch die Aktionen der Benutzer im System √ºber den Browser (dr√ºcken Sie die erforderlichen Schaltfl√§chen, geben Sie Werte in die Felder ein usw.) und zeigen Sie nach Abschluss einen detaillierten Bericht √ºber alle an Schritte und abgeschlossene Aktionen und Ergebnisse der √úberpr√ºfung (Entsprechung der erwarteten Reaktion des Systems auf sein tats√§chliches Verhalten). <br><br>  Insgesamt ist der Zweck von Autotests die Automatisierung manueller E2E-Tests.  Dies ist ein ‚Äûexternes‚Äú System, das nicht am Entwicklungsprozess des zu testenden Systems teilnimmt und in keiner Weise mit den von den Entwicklern verwendeten Einheiten- oder Integrationstests verbunden ist. <br><br><h2>  Ziele </h2><br>  Es war notwendig, die Arbeitskosten f√ºr die Durchf√ºhrung von End-2-End-Tests erheblich zu senken und die Geschwindigkeit vollst√§ndiger und reduzierter Regressionen in Bezug auf das Volumen zu erh√∂hen. <br><br><div class="spoiler">  <b class="spoiler_title">Zus√§tzliche Ziele</b> <div class="spoiler_text"><ul><li>  Gew√§hrleistung einer hohen Entwicklungsgeschwindigkeit von Autotests mit einem hohen Ma√ü an Autonomie (die Notwendigkeit einer vorl√§ufigen Bef√ºllung mit Testdaten der Systemst√§nde / Einrichtung von Autotests f√ºr jeden Stand sollte minimiert werden); </li><li>  Optimierung der Ausgaben (Zeit und Finanzen) f√ºr die Kommunikation zwischen Automatisierungs-, Funktionstest- und Systementwicklungsteams; </li><li>  Minimieren Sie das Risiko von Diskrepanzen zwischen den tats√§chlich implementierten Autotests und den anf√§nglichen Erwartungen des Funktionstestteams (das Funktionstestteam sollte den Ergebnissen der AutoTests unbedingt vertrauen). </li></ul></div></div><br><h2>  Die Aufgaben </h2><br>  Die Hauptaufgabe der Entwicklung wurde sehr einfach formuliert - in den n√§chsten 6 Monaten 1000 Testszenarien mit h√∂chster Priorit√§t zu automatisieren. <br><br>  Die vorhergesagte Anzahl grundlegender Testaktionen lag zwischen 100 und 300, was uns ungef√§hr 200.000 Testmethoden mit 10 bis 20 Codezeilen ergab, ohne die allgemeinen und zus√§tzlichen Klassen von Helfern, Datenanbietern und Datenmodellen zu ber√ºcksichtigen. <br><br>  So stellte sich heraus, dass unter Ber√ºcksichtigung der Zeitbeschr√§nkungen (130 Arbeitstage) mindestens 10 Tests pro Tag durchgef√ºhrt werden mussten und gleichzeitig die Relevanz der durchgef√ºhrten Selbsttests unter Ber√ºcksichtigung der im System auftretenden √Ñnderungen sichergestellt werden musste (das System entwickelt sich aktiv). <br><br>  Nach Sch√§tzungen von Experten betrug der Arbeitsaufwand f√ºr die Entwicklung eines Autotests 4 bis 8 Stunden.  Wir haben also mindestens ein Team von 5 Personen (in Wirklichkeit hatte das Team auf dem H√∂hepunkt der Entwicklung von Autotests mehr als 10 Automatisierungsingenieure). <br><br>  Verst√§ndlich waren auch die Aufgaben, die gel√∂st werden mussten. <br><br><ul><li>  <b>Prozesse und Befehle konfigurieren:</b> </li><li>  Definieren Sie den Prozess der Interaktion mit dem Kunden (Funktionstestgruppe), legen Sie das Testfallbeschreibungsformat als Eingabe f√ºr das Automatisierungsteam fest. </li><li>  den Entwicklungs- und Wartungsprozess organisieren; </li><li>  ein Team bilden. <br></li><li>  <b>Entwickeln Sie Autotests mit den folgenden Funktionen:</b> </li><li>  Klicken Sie automatisch auf die Schaltfl√§chen im Browser und √ºberpr√ºfen Sie vorab, ob Elemente und die erforderlichen Informationen auf der Seite vorhanden sind. </li><li>  Arbeiten mit komplexen Elementen wie Yandex.Map; </li><li>  um das Laden automatisch generierter Dateien in das System sicherzustellen, um das Herunterladen von Dateien vom System mit √úberpr√ºfung ihres Formats und Inhalts sicherzustellen. </li><li>  Stellen Sie einen Datensatz aus den Browser-Screenshots, Videos und internen Protokollen bereit. </li><li>  Um die Integration in externe Systeme wie einen Mailserver zu erm√∂glichen, √ºberpr√ºft das Task Tracking System (JIRA) die Integrationsprozesse zwischen dem getesteten System und externen Systemen. </li><li>  Bereitstellung eines dokumentierten Berichts √ºber alle ergriffenen Ma√ünahmen, einschlie√ülich einer Anzeige der eingegebenen und √ºberpr√ºften Werte sowie aller erforderlichen Investitionen. </li><li>  F√ºhren Sie im parallelen Modus Tests mit dem erforderlichen Volumen durch. </li><li>  Stellen Sie Autotests in der vorhandenen Infrastruktur bereit. </li><li>  Verfeinern Sie die bereits automatisierten Testskripte des Konsonantenzielkonzepts (Verfeinerungsgeschwindigkeit - etwa 50 Tests pro Woche Sprint). </li></ul><br>  Wie ich in der Einleitung erw√§hnt habe, hatten wir zu Beginn einen funktionierenden MVP-Prototyp, der von einem anderen Team implementiert wurde. Dieser musste von 20 auf 1000 Tests erh√∂ht werden, um neue Funktionen hinzuzuf√ºgen und eine akzeptable Skalierbarkeit und Flexibilit√§t bei √Ñnderungen sicherzustellen. <br><br>  Das Vorhandensein eines funktionierenden Prototyps am Eingang gab uns einen technologischen Stapel, der Folgendes umfasste: Java SE8, JUnit4, Selen + Selenid + Selenoid, Bambus als ‚ÄûL√§ufer‚Äú von Tests und als ‚ÄûErbauer‚Äú von Allure-Berichten.  Da der Prototyp einwandfrei funktionierte und die erforderlichen Grundfunktionen bereitstellte, haben wir beschlossen, den technologischen Stack nicht zu √§ndern, sondern uns auf die Entwicklung der Skalierbarkeit der L√∂sung, die Erh√∂hung der Stabilit√§t und die Entwicklung fehlender erforderlicher Funktionen zu konzentrieren. <br><br>  Grunds√§tzlich sah alles machbar und optimistisch aus.  Dar√ºber hinaus haben wir die Aufgaben zu einem bestimmten Zeitpunkt vollst√§ndig bew√§ltigt. <br><br>  Im Folgenden werden die einzelnen technologischen und prozessualen Aspekte der Entwicklung von AutoTests beschrieben. <br><br><h1>  Beschreibung der Autotests.  User Stories und Features </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/345/e52/429/345e524291244a67e411a344257eafa8.png"></div>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> <br><br>  Autotests implementieren die folgenden User Stories im Kontext ihrer Verwendung durch die Testgruppe: <br><br><ul><li>  manuelle Testautomatisierung; </li><li>  automatische vollst√§ndige Regression; </li><li>  Qualit√§tskontrolle von Baugruppen in der CI \ CD-Kette. </li></ul><br>  Die Implementierungsdetails und Architekturentscheidungen werden in <b>Teil 2 - Technisch</b> er√∂rtert <b>.</b>  <b>Architektur und technischer Stack.</b>  <b>Implementierungsdetails und technische √úberraschungen</b> . <br><br><h2>  Automatisches und manuelles Testen (User Stories) </h2><br>  Als Tester m√∂chte ich den Ziel-E2E-Test durchf√ºhren, der ohne meine direkte Teilnahme (im automatischen Modus) durchgef√ºhrt wird, und mir einen detaillierten Bericht im Kontext der durchgef√ºhrten Schritte einschlie√ülich der eingegebenen Daten und der erhaltenen Ergebnisse sowie Folgendes zur Verf√ºgung stellen. <br><br><ul><li>  Vor Beginn des Tests sollten verschiedene Zielst√§nde ausgew√§hlt werden k√∂nnen. </li><li>  sollte in der Lage sein, die Zusammensetzung der laufenden Tests von allen implementierten zu verwalten; </li><li>  Am Ende des Tests m√ºssen Sie ein Video des Tests vom Browserbildschirm abrufen. </li><li>  Wenn der Test abst√ºrzt, m√ºssen Sie einen Screenshot des aktiven Browserfensters erhalten. </li></ul><br><h2>  Automatische vollst√§ndige Regression </h2><br>  Als Testgruppe m√∂chte ich alle Tests jeden Abend auf einem bestimmten Pr√ºfstand im automatischen Modus durchf√ºhren, einschlie√ülich aller Funktionen des "automatischen manuellen Tests". <br><br><h2>  Qualit√§tskontrolle der Baugruppe in der CI \ CD-Kette </h2><br>  Als Testgruppe m√∂chte ich automatische Tests der bereitgestellten Aktualisierungen des Systems auf einem dedizierten preQA-Stand durchf√ºhren, bevor ich die Ziel-Testst√§nde f√ºr die Funktionstests aktualisiere, die sp√§ter f√ºr Funktionstests verwendet wurden. <br><br><h1>  Grundfunktionen implementiert </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/347/92c/432/34792c43244275202d123378b2b6b72e.jpg"></div>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> <br><br>  Hier finden Sie eine kurze √úbersicht √ºber die wichtigsten implementierten Funktionen von AutoTests, die sich als wichtig oder einfach n√ºtzlich erwiesen haben.  Details zur Implementierung einiger interessanter Funktionen finden Sie im zweiten Teil des Artikels. <br><br><h2>  Lokale und Remote-Verwendung </h2><br>  Die Funktion bot zwei Optionen zum Ausf√ºhren von Autotests - lokal und remote. <br><br>  Im lokalen Modus f√ºhrte der Tester den erforderlichen Autotest an seinem Arbeitsplatz durch und konnte gleichzeitig beobachten, was im Browser geschah.  Der Start erfolgte durch das "gr√ºne Dreieck" in IntelliJ IIDEA -).  Die Funktion war zu Beginn des Projekts sehr n√ºtzlich f√ºr Debugging und Demonstrationen, wird aber jetzt nur noch von den Entwicklern von Autotests verwendet. <br><br>  Im Remote-Modus startet der Tester den Autotest √ºber die Schnittstelle des Bamboo-Plans mit den Parametern der Zusammensetzung der laufenden Tests, einem Stand und einigen anderen Parametern. <br><br>  <i>Die Funktion wurde mit der Umgebungsvariablen MODE = REMOTE | LOCAL implementiert, je nachdem, welcher lokale oder entfernte Webbrowser in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Selenoid-</a> Cloud initialisiert wurde.</i> <br><br><h2>  Begrenzung der Zusammensetzung laufender Tests nach Filter </h2><br>  Die Funktion erm√∂glicht es, die Zusammensetzung der laufenden Tests im Remote-Verwendungsmodus f√ºr Benutzer zu beschr√§nken und die Testzeit zu verk√ºrzen.  Es wird eine zweistufige Filtration verwendet.  Der erste Schritt blockiert die Ausf√ºhrung von Tests basierend auf der Variablen FILTER_BLOCK und wird haupts√§chlich verwendet, um gro√üe Gruppen von Tests von der Ausf√ºhrung auszuschlie√üen.  Im zweiten Schritt werden nur Tests √ºbersprungen, die mit der Variablen FILTER √ºbereinstimmen. <br><br>  Der Wert der Filter wird als Satz regul√§rer Ausdr√ºcke REGEXP1, ..., REGEXPN angegeben, die nach dem Prinzip "ODER" angewendet werden. <br><br>  Beim Starten im manuellen Modus wurde der Tester aufgefordert, eine spezielle Umgebungsvariable als Liste regul√§rer Ausdr√ºcke festzulegen, die auf die spezielle Annotation @ Filter (String value) anwendbar sind, mit der alle Testmethoden in den Testklassen kommentiert wurden.  F√ºr jeden Test ist diese Anmerkung eindeutig und basiert auf einer Reihe von Tags, die durch einen Unterstrich getrennt sind.  Wir verwenden die folgende Mindestvorlage SUBSYSTEM_FUNCTION_TEST-ID_ {DEFAULT}, wobei das DEFAULT-Tag f√ºr Tests vorgesehen ist, die in der automatischen Nachtregression enthalten sind. <br><br>  <i>Die Funktion wird durch eine benutzerdefinierte Erweiterung der Klasse org.junit.runners.BlockJUnit4ClassRunner implementiert (Details werden in Teil 2-1 der Fortsetzung dieses Artikels angegeben).</i> <br><br><h2>  Dokumentation des Berichts mit den Ergebnissen f√ºr alle Schritte </h2><br>  Die Testergebnisse werden f√ºr alle Testaktionen (Schritte) mit allen erforderlichen Informationen angezeigt, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die</a> im Allure Framework <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verf√ºgbar sind</a> .  Sie aufzulisten macht keinen Sinn.  Sowohl auf der offiziellen Website als auch im gesamten Internet gibt es gen√ºgend Informationen.  Es gab keine √úberraschungen bei der Verwendung des Allure Frameworks, und im Allgemeinen empfehle ich es zur Verwendung. <br><br>  Die Hauptfunktionen sind: <br><br><ul><li>  Anzeige jedes Testschritts (der Name des Schritts entspricht seinem Namen in der Testspezifikation - Testskript); </li><li>  Anzeigen von Schrittparametern in einer f√ºr Menschen lesbaren Form (durch die erforderliche Implementierung der toString-Methode aller √ºbertragenen Werte); </li><li>  Anh√§ngen von Screenshots, Videos und verschiedenen zus√§tzlichen Dateien an den Bericht; </li><li>  Klassifizierung von Tests nach Typen und Subsystemen sowie Verkn√ºpfung des Autotests mit der Testspezifikation im Test Link-Testfallmanagementsystem durch Verwendung spezieller Anmerkungen. </li></ul><br><h2>  Laden Sie Dateien vom / in den Browser herunter und laden Sie sie hoch, um sie anschlie√üend zu √ºberpr√ºfen und zu analysieren </h2><br>  Das Arbeiten mit Dateien ist ein √§u√üerst wichtiger Aspekt von Testskripten.  Es war notwendig, sowohl verschiedene Dateien hochzuladen als auch herunterzuladen. <br><br>  <b>Das Herunterladen von Dateien</b> implizierte zun√§chst das Laden dynamisch generierter EXCEL-Dateien in das System gem√§√ü dem Kontext der Ausf√ºhrung des Testskripts.  Der Download wurde mit Standardmethoden implementiert, die von Selen-Tools bereitgestellt wurden. <br><br>  <b>Das Hochladen von Dateien</b> implizierte das Herunterladen von Dateien durch Dr√ºcken der Schaltfl√§che im Browser in ein lokales Verzeichnis und die anschlie√üende √úbertragung dieser Datei auf den Server, auf dem die AutoTests ausgef√ºhrt wurden (den Server, auf dem der Remote-Bamboo-Agent installiert war).  Au√üerdem wurde diese Datei analysiert und hinsichtlich Format und Inhalt analysiert.  Die Hauptdateitypen waren EXCEL- und PDF-Dateien. <br><br>  Die Implementierung dieser Funktion stellte sich als nicht triviale Aufgabe heraus, vor allem aufgrund des Mangels an Standardfunktionen f√ºr die Dateiverwaltung: Derzeit wird die Funktion nur f√ºr den Chrome-Browser √ºber die Service-Seite "chrome: // downloads /" implementiert. <br><br>  Ich werde Sie im zweiten Teil ausf√ºhrlich √ºber die Implementierungsdetails informieren. <br><br><h2>  Abrechnung und Kontrolle der Asynchronit√§t der Angular-Schnittstelle.  Ausstehende Anforderungssteuerung zwischen Angular- und REST-Diensten </h2><br>  Da das Objekt unserer Tests auf Angular basierte, mussten wir lernen, mit der Asynchronit√§t des Frontends und der Zeit√ºberschreitungen zu ‚Äûk√§mpfen‚Äú. <br><br>  Im Allgemeinen verwenden wir zus√§tzlich zu org.openqa.selenium.support.ui.FluentWait eine speziell entwickelte Wartemethode, die Javascript auf ‚Äûunvollst√§ndige‚Äú Interaktionen mit Front-End-REST-Diensten √ºberpr√ºft. Basierend auf diesem dynamischen Zeitlimit erhalten Tests Informationen dar√ºber, ob sie folgen sollen dann etwas l√§nger warten. <br><br>  Unter dem Gesichtspunkt der Funktionalit√§t konnten wir den Zeitaufwand f√ºr die Durchf√ºhrung der Tests erheblich reduzieren, da statische Erwartungen abgelehnt wurden, bei denen es nicht m√∂glich ist, den Abschluss der Operation anders zu bestimmen.  Dar√ºber hinaus konnten wir so ‚Äûh√§ngende‚Äú REST-Services mit Leistungsproblemen definieren.  Sie haben beispielsweise einen REST-Service abgefangen, f√ºr den die Anzahl der auf der Seite angezeigten Eintr√§ge auf 10.000 Elemente festgelegt wurde. <br><br>  Informationen √ºber den "eingefrorenen" REST-Dienst mit allen Parametern seines Aufrufs, aufgrund derer der Test aus infrastrukturellen Gr√ºnden "f√§llt", werden zu den Ergebnissen des abgebrochenen Tests hinzugef√ºgt und zus√§tzlich als Ereignis in ELK gesendet.  Auf diese Weise k√∂nnen Sie die erkannten Probleme sofort an die entsprechenden Entwicklungsteams des Systems √ºbertragen. <br><br><h2>  Browser-Protokollsteuerung </h2><br>  Die Browser-Protokollsteuerungsfunktion wurde hinzugef√ºgt, um Fehler auf den SEVERE-Level-Seiten zu steuern und zus√§tzliche Informationen f√ºr abgebrochene Tests zu erhalten, z. B. um Fehler wie "... Ressource konnte nicht geladen werden: Der Server hat mit dem Status 500 (Interner Serverfehler) geantwortet" zu √ºberwachen. <br><br>  Die Zusammensetzung der Seitenverarbeitungsfehler im Browser wird auf jedes Testergebnis angewendet und zus√§tzlich als Ereignisse im ELK entladen. <br><br><h2>  Videoaufzeichnung des Tests und Entfernen des Schnappschusses der Seite zum Zeitpunkt des "Sturzes" des Tests </h2><br>  Funktionen werden implementiert, um das Diagnostizieren und Parsen von abgelegten Tests zu vereinfachen. <br><br>  Die Videoaufzeichnung wird f√ºr den ausgew√§hlten Remote-Testlaufmodus separat aktiviert.  Das Video wird als Anhang zu den Ergebnissen im Allure-Bericht angeh√§ngt. <br>  Ein Screenshot wird automatisch erstellt, wenn der Test abst√ºrzt, und die Ergebnisse werden auch auf den Allure-Bericht angewendet. <br><br><h2>  Weitergabe von Ereignissen an ELK </h2><br>  Die Funktion zum Senden von Ereignissen an ELK ist implementiert, um eine statistische Analyse des allgemeinen Verhaltens von AutoTests und der Stabilit√§t des Testobjekts zu erm√∂glichen.  Im Moment wurden das Senden von Ereignissen √ºber den Abschluss von Tests mit den Ergebnissen und der Dauer sowie Browserfehler der SEVERE-Ebene und aufgezeichnete "eingefrorene" REST-Services implementiert. <br><br><h1>  Entwicklungsorganisation </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ee/a24/368/2eea243683bc7a87f0453db38b6c7947.jpg"></div>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> <br><br><h2>  Entwicklungsteam </h2><br>  Wir brauchten also mindestens 5 Entwickler.  F√ºgen Sie eine weitere Person hinzu, um ungeplante Abwesenheiten auszugleichen.  Wir erhalten 6. Plus einen Teamleiter, der f√ºr die Querschnittsfunktionalit√§t und die Code√ºberpr√ºfung verantwortlich ist. <br><br>  Daher mussten 6 Java-Entwickler hinzugezogen werden (in Wirklichkeit waren auf dem H√∂hepunkt der Entwicklung von Autotests mehr als 10 Automatisierungsingenieure im Team). <br><br>  Angesichts der allgemeinen Marktlage und eines relativ einfachen technologischen Stacks bestand das Team haupts√§chlich aus Praktikanten, von denen die meisten entweder gerade ihren Abschluss an einer Universit√§t gemacht hatten oder im letzten Jahr waren.  Tats√§chlich suchten wir Leute mit Grundkenntnissen in Java.  Bevorzugt wurden manuelle Testspezialisten, die Programmierer werden m√∂chten, und motivierte Kandidaten mit (unbedeutender) Entwicklungserfahrung, die k√ºnftig Programmierer werden wollten. <br><br>             ,           (    <b> 2 ‚Äì .    .     </b> ). <br><br>    ,           ,             .        CodeRush .    . <br><br><h2>   </h2><br>       . ,    , ¬´¬ª        . <br><br>           () .    code review   merge request ( GitLab).   code review   ¬´¬ª    (  )       . <br><br>     ‚Äì           .           /   ,         . <br><br> ode review   , ,      ()   -   ,    . ode review  . <br><br>     code review         ,        . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/08f/c89/1c7/08fc891c7ccd91d6e6c2235c06149a69.jpg" align="left" width="300">  :     ,      ,      ,     ,         .        ,     ,    ,    / . <br><br>      ¬´ ¬ª,      -   -.         -. <br><br>                   ,               .    sprint retrospective event. <br><br><h2>     </h2><br>         - ( )    ,      stakeholder  . <br><br>        ‚Äì    .   ,            ,          .   ,      -    .       . <br><br>        - ( ,      . .),          .     () ,       ¬´ ¬ª / ¬´ ¬ª ( ,      ,            ). <br><br>  -             -   ( :    -  ‚Äì ,   - ,   ‚Äî ,    ).  ,       -       /  :    ¬´ -      (  )¬ª. <br><br>      -  ,     - (-)      - (¬´¬ª ).     ¬´¬ª -          -  ¬´     X¬ª ( ,       -). <br><br><h2>   </h2><br>     ,    .      master,    -. -   -         code review. <br><br>     ,        ‚Äì     ,        . <br><br>  Eigenschaften: <br><br> <b>(+)</b>        ; <br> <b>(+)</b>              ; <br> <b>(+)</b>  ¬´¬ª      ; <br> <b>(-)</b>      (); <br> <b>(-)</b>       hotfix . <br><br>       . <br><br>  <b>Entwickler</b> <br><br><ul><li>      MASTER. </li><li>  . </li><li>      FEATURE . </li><li>           ,   ¬´   ¬ª  rebase. </li><li> <b>     Gitlab   merge request    .  merge request- :</b> </li><li>  ‚Äî       ¬´Jira¬ª; </li><li>  ‚Äî       Bamboo. </li></ul><br> <b>GateKeeper ( )</b> <br><br><ul><li>         Bamboo. </li><li>          . </li><li>  (merge) FEATURE  DEVELOP,            . </li><li>    . </li></ul><br><hr><br> <i><b>          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">kotalesssk</a> . <br><br>    1,      , .         2.</b> <br><br>   ‚Äì  ‚Äì        UI end-2-end    -.           ,   -          .            UI -     .   ,      .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de473426/">https://habr.com/ru/post/de473426/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de473412/index.html">Erstellen eines Plugins f√ºr Clang Static Analyzer zur Suche nach Ganzzahl√ºberl√§ufen</a></li>
<li><a href="../de473416/index.html">ZeroNights 2019 Konferenzprogramm</a></li>
<li><a href="../de473418/index.html">OSCP - Offensive Sicherheit</a></li>
<li><a href="../de473420/index.html">Wir er√∂ffnen die Saison der PHP-Meetups am 2. November in Nischni Nowgorod</a></li>
<li><a href="../de473424/index.html">ARM k√ºndigte die Grafikl√∂sungen Mali-G57 Valhall und Mali-D37 sowie die Neuroprozessoren Ethos-N57 und N37 an</a></li>
<li><a href="../de473430/index.html">FAQ zur Arbeit des Assistenten</a></li>
<li><a href="../de473432/index.html">Drei der besten Saint TeamLead Conf-Berichte</a></li>
<li><a href="../de473434/index.html">Ein systematischer Ansatz in T√ºrkist√∂nen an Bord der June</a></li>
<li><a href="../de473436/index.html">Transformation Management als Kompetenz</a></li>
<li><a href="../de473438/index.html">Wie chinesische Strategien bei der Arbeit helfen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>