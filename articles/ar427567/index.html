<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คต๐ฟ ๐ ๐บ๐ฟ ุฎุฑุงุฆุท ูุณุฏุณ ูู ุงููุญุฏุฉ: ุฏูุฑุฉ ุงูููุงู ุ ุงูุชุขูู ุ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุ ุฎุฑูุทุฉ ุฃุณุทูุงููุฉ ๐ด โ๏ธ ๐ง</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุฃุฌุฒุงุก 1-3: ุงูุดุจูุฉ ูุงูุฃููุงู ูุงุฑุชูุงุนุงุช ุงูุฎููุฉ 

 ุงูุฃุฌุฒุงุก 4-7: ุงููุทุจุงุช ูุงูุฃููุงุฑ ูุงูุทุฑู 

 ุงูุฃุฌุฒุงุก 8-11: ุงููุงุก ูุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ูุงูุฃุณูุงุฑ 

 ุงูุฃุฌุฒุงุก 12-1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฎุฑุงุฆุท ูุณุฏุณ ูู ุงููุญุฏุฉ: ุฏูุฑุฉ ุงูููุงู ุ ุงูุชุขูู ุ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุ ุฎุฑูุทุฉ ุฃุณุทูุงููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427567/" style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 1-3: ุงูุดุจูุฉ ูุงูุฃููุงู ูุงุฑุชูุงุนุงุช ุงูุฎููุฉ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 4-7: ุงููุทุจุงุช ูุงูุฃููุงุฑ ูุงูุทุฑู</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 8-11: ุงููุงุก ูุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ูุงูุฃุณูุงุฑ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 12-15: ุงูุญูุธ ูุงูุชุญููู ุ ุงูููุงู ุ ุงููุณุงูุงุช</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 16-19: ุฅูุฌุงุฏ ุงูุทุฑูู ููุฑู ุงููุงุนุจูู ูุงูุฑุณูู ุงููุชุญุฑูุฉ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 20-23: ุถุจุงุจ ุงูุญุฑุจ ุ ุจุญุซ ุงูุฎุฑุงุฆุท ุ ุงูุฌูู ุงูุฅุฌุฑุงุฆู</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 24-27: ุฏูุฑุฉ ุงููุงุก ุ ุงูุชุขูู ุ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุ ุงูุฎุฑูุทุฉ ุงูุฃุณุทูุงููุฉ</a> <br><br><h1 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 24: ุงูููุงุทู ูุงูุชุขูู </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃุถู ุญุฏูุง ูู ุงูููุงู ุญูู ุงูุฎุฑูุทุฉ. </li><li style=";text-align:right;direction:rtl">  ููุณู ุงูุฎุฑูุทุฉ ุฅูู ุนุฏุฉ ููุงุทู. </li><li style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู ุงูุชุขูู ููุทุน ุงูููุญุฏุฑุงุช. </li><li style=";text-align:right;direction:rtl">  ููุชูู ุงูุฃุฑุถ ูุชุฎููู ุงูุฅุบุงุซุฉ. </li></ul><br>  ูู ุงูุฌุฒุก ุงูุณุงุจู ุ ูุถุนูุง ุงูุฃุณุณ ูุชูููุฏ ุงูุฎุฑูุทุฉ ุงูุฅุฌุฑุงุฆูุฉ.  ูุฐู ุงููุฑุฉ ุณูุญุฏ ูู ุงูุฃูุงูู ุงูุชู ูููู ุฃู ุชุญุฏุซ ูููุง ุงูุฃุฑุถ ููุนูู ุนูููุง ุจุงูุชุขูู. <br><br>  ุชู ุฅูุดุงุก ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูู Unity 2017.1.0. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5ac/6a5/30c/5ac6a530cef3718f9031abe862364093.jpg"></div><br>  <i>ูุตู ุงูุฃุฑุถ ูุชูุนูููุง.</i> <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุญุฏ ุงูุฎุฑูุทุฉ </h2><br>  ูุธุฑูุง ูุฃููุง ูุฑูุน ูุณุงุญุงุช ุงูุฃุฑุงุถู ุจุดูู ุนุดูุงุฆู ุ ููุฏ ูุญุฏุซ ุฃู ุชูุงูุณ ุญุงูุฉ ุงูุฎุฑูุทุฉ.  ูุฏ ูููู ูุฐุง ุบูุฑ ูุฑุบูุจ ููู.  ุชุญุชูู ุงูุฎุฑูุทุฉ ุงููุญุฏูุฏุฉ ุงูููุงู ุนูู ุญุงุฌุฒ ุทุจูุนู ูููุน ุงููุงุนุจูู ูู ุงูุงูุชุฑุงุจ ูู ุงูุญุงูุฉ.  ูุฐูู ุ ุณูููู ูู ุงูุฌูุฏ ุฃู ูููุน ุงูุฃุฑุถ ูู ุงูุงุฑุชูุงุน ููู ูุณุชูู ุงูููุงู ุจุงููุฑุจ ูู ุญุงูุฉ ุงูุฎุฑูุทุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุญุฌู ุงูุญุฏูุฏ </h3><br>  ูุง ูุฏู ูุฑุจ ุงูุฃุฑุถ ูู ุญุงูุฉ ุงูุฎุฑูุทุฉุ  ูุง ุชูุฌุฏ ุฅุฌุงุจุฉ ุตุญูุญุฉ ููุฐุง ุงูุณุคุงู ุ ูุฐูู ุณูุฌุนู ูุฐู ุงููุนููุฉ ูุงุจูุฉ ููุชุฎุตูุต.  ุณูุถูู <code>HexMapGenerator</code> ูููู <code>HexMapGenerator</code> ุ ุฃุญุฏููุง ููุญุฏูุฏ ุนูู ุทูู ุงูุญูุงู ุนูู ุทูู ุงููุญูุฑ X ุ ูุงูุขุฎุฑ ููุญุฏูุฏ ุนูู ุทูู ุงููุญูุฑ Z. ูุฐุง ูููููุง ุงุณุชุฎุฏุงู ุญุฏ ุฃูุณุน ูู ุฃุญุฏ ุงูุฃุจุนุงุฏ ุ ุฃู ุญุชู ุฅูุดุงุก ุญุฏ ูู ุจูุนุฏ ูุงุญุฏ ููุท.  ููุณุชุฎุฏู ูุงุตู ุฒููู ูู 0 ุฅูู 10 ุจูููุฉ ุงูุชุฑุงุถูุฉ 5. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0, 10)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mapBorderX = <span class="hljs-number"><span class="hljs-number">5</span></span>; [Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mapBorderZ = <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/694/8ab/c74/6948abc743e881596bdea5656e562943.png"></div><br>  <i>ุชุนููู ุฃุดุฑุทุฉ ุชูุฑูุฑ ุงูุญุฏูุฏ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ูุญู ูููุฏ ูุฑุงูุฒ ููุงุทู ุงูุฃุฑุงุถู </h3><br>  ุจุฏูู ุญุฏูุฏ ุ ุฌููุน ุงูุฎูุงูุง ุตุงูุญุฉ.  ุนูุฏูุง ุชููู ููุงู ุญุฏูุฏ ุ ูุฒุฏุงุฏ ุงูุญุฏ ุงูุฃุฏูู ูู ุฅุญุฏุงุซูุงุช ุงูุฅุฒุงุญุฉ ุงููุณููุญ ุจูุง ุ ูููุฎูุถ โโุงูุญุฏ ุงูุฃูุตู ููุฅุญุฏุงุซูุงุช ุงููุณููุญ ุจูุง.  ูุธุฑูุง ูุฃูู ูุฅูุดุงุก ุงููุฎุทุทุงุช ุ ุณูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุงููุงุตู ุงูุฒููู ุงููุณููุญ ุจู ุ ุฏุนูุง ูุชุชุจุนู ุจุงุณุชุฎุฏุงู ุฃุฑุจุนุฉ ุญููู ุตุญูุญุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> xMin, xMax, zMin, zMax;</code> </pre> <br>  ูููู ุจุชููุฆุฉ ุงููููุฏ ูู <code>GenerateMap</code> ูุจู ุฅูุดุงุก ุงูุณูุดู.  ูุณุชุฎุฏู ูุฐู ุงูููู ููุนููุงุช ููููุงููุงุช <code>Random.Range</code> ุ ูุฐุง ูุฅู ุงูุงุฑุชูุงุนุงุช ุงุณุชุซูุงุฆูุฉ ุจุงููุนู.  ุจุฏูู ุญุฏ ุ ููู ุชุณุงูู ุนุฏุฏ ุฎูุงูุง ุงูููุงุณ ุ ูุจุงูุชุงูู ุ ููุณุช ูุงูุต 1. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { grid.GetCell(i).WaterLevel = waterLevel; } xMin = mapBorderX; xMax = x - mapBorderX; zMin = mapBorderZ; zMax = z - mapBorderZ; CreateLand(); โฆ }</code> </pre> <br>  ูู ูุญุธุฑ ุจุดูู ุตุงุฑู ุธููุฑ ุงูุฃุฑุถ ุฎุงุฑุฌ ุญุฏูุฏ ุงูุญุฏูุฏ ุ ูุฃู ุฐูู ุณูุฎูู ุญูุงููุง ููุทูุนุฉ ุจุดูู ุญุงุฏ.  ุจุฏูุงู ูู ุฐูู ุ ุณููุชุตุฑ ููุท ุนูู ุงูุฎูุงูุง ุงููุณุชุฎุฏูุฉ ูุจุฏุก ุฅูุดุงุก ูุทุน ุงูุฃุฑุถ.  ุฃู ุฃู ุงููุฑุงูุฒ ุงูุชูุฑูุจูุฉ ููููุงูุน ุณุชููู ูุญุฏูุฏุฉ ุ ููู ุฃุฌุฒุงุก ูู ุงูููุงูุน ุณุชููู ูุงุฏุฑุฉ ุนูู ุชุฌุงูุฒ ุงูููุทูุฉ ุงูุญุฏูุฏูุฉ.  ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุนุฏูู <code>GetRandomCell</code> ุจุญูุซ ุชุญุฏุฏ ุฎููุฉ ูู ูุทุงู ุงูุฅุฒุงุญุงุช ุงููุณููุญ ุจูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRandomCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// return grid.GetCell(Random.Range(0, cellCount)); return grid.GetCell(Random.Range(xMin, xMax), Random.Range(zMin, zMax)); }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7a8/bbf/24b/7a8bbf24b1d46d9b97e8e9c01652fdfd.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a31/0cf/aa2/a310cfaa2bec1cbe019a08c14218c7fd.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7f1/799/f50/7f1799f5058c0d1e435bfc3c42133b9c.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/93a/c4b/1b7/93ac4b1b771eaa896b6c494b69c18b92.jpg"></div><br>  <i>ุญุฏูุฏ ุงูุฎุฑูุทุฉ ูู 0 ร 0 ู 5 ร 5 ู 10 ร 10 ู 0 ร 10.</i> <br><br>  ุนูุฏูุง ูุชู ุชุนููู ุฌููุน ูุนููุงุช ุงูุฎุฑูุทุฉ ุนูู ููููุง ุงูุงูุชุฑุงุถูุฉ ุ ูุฅู ุญุฏูุฏ ุงูุญุฌู 5 ุณุชุญูู ุญุงูุฉ ุงูุฎุฑูุทุฉ ุจุดูู ููุซูู ูู ููุณ ุงูุฃุฑุถ.  ููุน ุฐูู ุ ูุฐุง ุบูุฑ ูุถููู.  ูููู ุฃู ุชูุชุฑุจ ุงูุฃุฑุถ ุฃุญูุงููุง ูู ุงูุญุงูุฉ ุ ูุฃุญูุงููุง ุชููุณูุง ูู ุนุฏุฉ ุฃูุงูู. <br><br>  ุชุนุชูุฏ ุงุญุชูุงููุฉ ุนุจูุฑ ุงูุฃุฑุถ ููุญุฏูุฏ ุจุฃููููุง ุนูู ุญุฌู ุงูุญุฏูุฏ ูุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงููููุน.  ุจุฏูู ุชุฑุฏุฏ ุ ุชุจูู ุงูุฃูุณุงู ุณุฏุงุณูุฉ.  ูุณุฏุณ ูุงูู ูุน ูุตู ุงููุทุฑ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>r</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.049ex" height="1.455ex" viewBox="0 -520.7 451.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> r </script>  ูุญุชูู ุนูู <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mn>3</mn><mi>r</mi><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.32ex" height="2.539ex" viewBox="0 -935.7 5304.3 1093.4" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-33" x="0" y="0"></use><g transform="translate(500,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-32" x="638" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="1628" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-33" x="2628" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="3129" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="3803" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-31" x="4803" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mn>3</mn><mi>r</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-2"> 3r ^ 2 + 3r + 1 </script>  ุงูุฎูุงูุง.  ุฅุฐุง ูุงูุช ููุงู ูุณุฏุณุงุช ูุตู ูุทุฑูุง ูุณุงูู ุญุฌู ุงูุญุฏูุฏ ุ ููููููุง ุนุจูุฑูุง.  ูุญุชูู ุงูุณุฏุงุณู ุงููุงูู ุจูุตู ูุทุฑ 5 ุนูู 91 ุฎููุฉ.  ูุธุฑูุง ูุฃู ุงูุญุฏ ุงูุฃูุตู ุงูุชุฑุงุถููุง ูู 100 ุฎููุฉ ููู ูุณู ุ ููุฐุง ูุนูู ุฃู ุงูุฃุฑุถ ุณุชููู ูุงุฏุฑุฉ ุนูู ูุฏ ุฌุณุฑ ุนุจุฑ 5 ุฎูุงูุง ุ ุฎุงุตุฉ ุฅุฐุง ูุงูุช ููุงู ุงูุชุฒุงุฒุงุช.  ูููุน ุญุฏูุซ ุฐูู ุ ููููู ุฅูุง ุชูููู ุงูุญุฌู ุงูุฃูุตู ูููุทุนุฉ ุฃู ุฒูุงุฏุฉ ุญุฌู ุงูุญุฏูุฏ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููู ูุชู ุงุดุชูุงู ุตูุบุฉ ุนุฏุฏ ุงูุฎูุงูุง ูู ุงูููุทูุฉ ุงูุณุฏุงุณูุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุน ูุตู ูุทุฑ 0 ุ ูุชุนุงูู ูุน ุฎููุฉ ูุงุญุฏุฉ.  ุฌุงุก ูู 1. ูุน ูุตู ูุทุฑูุง 1 ุญูู ุงููุฑูุฒ ุ ููุงู ุณุช ุฎูุงูุง ุฅุถุงููุฉ ุ ููุฐุง ูู <math></math><img src="https://habrastorage.org/getpro/habr/formulas/3d5/233/62b/3d523362b8144ab01c2baba35b9f944b.svg" alt="6 ุฏููุงุฑุงุช + 1 ุฏููุงุฑ" data-tex="inline">  .  ูููู ุงุนุชุจุงุฑ ูุฐู ุงูุฎูุงูุง ุงูุณุชุฉ ููุงูุงุช ุณุชุฉ ูุซูุซุงุช ุชูุงูุณ ุงููุฑูุฒ.  ูุน ูุตู ูุทุฑ 2 ุ ูุถุงู ุตู ุซุงู ุฅูู ูุฐู ุงููุซูุซุงุช ุ ุฃู ูุชู ุงูุญุตูู ุนูู ุฎููุชูู ุฅุถุงููุชูู ุนูู ุงููุซูุซ ุ ูุฅุฌูุงูููุง <math></math><img src="https://habrastorage.org/getpro/habr/formulas/b2c/53c/716/b2c53c716a83a485635ae30c3ef658b6.svg" alt="6 ุฏููุงุฑุงุช (1 + 2) + 1 ุฏููุงุฑ" data-tex="inline">  .  ูุน ูุตู ูุทุฑ 3 ุ ูุชู ุฅุถุงูุฉ ุตู ุซุงูุซ ุ ุฃู ุซูุงุซ ุฎูุงูุง ุฃุฎุฑู ููู ูุซูุซ ุ ูุฅุฌูุงูููุง <math></math><img src="https://habrastorage.org/getpro/habr/formulas/e72/090/171/e72090171bfbb337a90a1382abe33aab.svg" alt="6 ุฏููุงุฑุงุช (1 + 2 + 3) + 1 ุฏููุงุฑ" data-tex="inline">  .  ูููุฐุง ุฏูุงููู.  ุฃู ุ ุจุดูู ุนุงู ุ ุชุจุฏู ุงูุตูุบุฉ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>6</mn><mo stretchy=&quot;false&quot;>(</mo><mi>s</mi><mi>u</mi><msub><mi>m</mi><mo stretchy=&quot;false&quot;>(</mo></msub><mi>i</mi><mo>=</mo><mn>1</mn><msup><mo stretchy=&quot;false&quot;>)</mo><mi>r</mi></msup><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mn>1</mn><mo>=</mo><mn>6</mn><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>2</mn><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mn>1</mn><mo>=</mo><mn>3</mn><mi>r</mi><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mn>1</mn><mo>=</mo><mn>3</mn><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mn>3</mn><mi>r</mi><mo>+</mo><mn>1</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="73.759ex" height="3.312ex" viewBox="0 -950 31757.4 1426" role="img" focusable="false" aria-hidden="true" style="vertical-align: -1.106ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-36" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-73" x="890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-75" x="1359" y="0"></use><g transform="translate(1932,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-28" x="1242" y="-264"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-69" x="3185" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-3D" x="3809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-31" x="4865" y="0"></use><g transform="translate(5365,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="550" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-69" x="6174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-29" x="6520" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="7131" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-31" x="8132" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-3D" x="8910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-36" x="9967" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-28" x="10467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-28" x="10857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="11246" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-28" x="11698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="12087" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="12761" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-31" x="13762" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-29" x="14262" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-29" x="14652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2F" x="15041" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-32" x="15542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-29" x="16042" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="16654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-31" x="17655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-3D" x="18433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-33" x="19489" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="19990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-28" x="20441" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="20831" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="21504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-31" x="22505" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-29" x="23006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="23617" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-31" x="24618" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-3D" x="25396" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-33" x="26453" y="0"></use><g transform="translate(26953,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-32" x="638" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="28081" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-33" x="29081" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMATHI-72" x="29582" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-2B" x="30256" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/427567/&amp;usg=ALkJrhiGLUHtSIfXosgQiepAf7peubeVlQ#MJMAIN-31" x="31256" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>6</mn><mo stretchy="false">(</mo><mi>s</mi><mi>u</mi><msub><mi>m</mi><mo stretchy="false">(</mo></msub><mi>i</mi><mo>=</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>r</mi></msup><mi>i</mi><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo>=</mo><mn>6</mn><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">(</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo>=</mo><mn>3</mn><mi>r</mi><mo stretchy="false">(</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo>=</mo><mn>3</mn><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mn>3</mn><mi>r</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-3"> 6 (sum_ (i = 1) ^ r i) +1 = 6 ((r (r + 1)) / 2) +1 = 3r (r + 1) + 1 = 3r ^ 2 + 3r + 1 </script>  . </div></div><br>  ูุฑุคูุฉ ูุฐุง ุจุดูู ุฃูุซุฑ ูุถูุญูุง ุ ูููููุง ุถุจุท ุญุฌู ุงูุญุฏูุฏ ุนูู 200. ูุธุฑูุง ูุฃู ุงูุณุฏุงุณู ุงููุงูู ุจูุตู ูุทุฑ 8 ูุญุชูู ุนูู 217 ุฎููุฉ ุ ููู ุงููุฑุฌุญ ุฃู ุชูุงูุณ ุงูุฃุฑุถ ุญุงูุฉ ุงูุฎุฑูุทุฉ.  ุนูู ุงูุฃูู ุฅุฐุง ููุช ุชุณุชุฎุฏู ูููุฉ ุญุฌู ุงูุญุฏูุฏ ุงูุงูุชุฑุงุถูุฉ (5).  ุฅุฐุง ููุช ุจุฒูุงุฏุฉ ุงูุญุฏ ุฅูู 10 ุ ูุณูู ููุฎูุถ โโุงูุงุญุชูุงู ุจุดูู ูุจูุฑ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/74b/75d/eb0/74b75deb060d9bdae2f74c1db4de287e.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ffa/7ce/e96/ffa7cee967f81ba9fe4ddc6718519d9a.jpg"></div><br>  <i>ุชุจูุบ ูุณุงุญุฉ ุงูุฃุฑุถ 200 ูุทุนุฉ ุซุงุจุชุฉ ุ ูุญุฏูุฏ ุงูุฎุฑูุทุฉ 5 ู 10.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุจุงูุฌูุง </h3><br>  ูุงุญุธ ุฃูู ุนูุฏ ุฒูุงุฏุฉ ุญุฏูุฏ ุงูุฎุฑูุทุฉ ูุงูุงุญุชูุงุธ ุจููุณ ุงููุณุจุฉ ุงููุฆููุฉ ูู ุงูุฃุฑุถ ุ ูุฅููุง ูุฌุจุฑ ุงูุฃุฑุถ ุนูู ุชุดููู ููุทูุฉ ุฃุตุบุฑ.  ููุชูุฌุฉ ูุฐูู ุ ูู ุงููุฑุฌุญ ุฃู ุชุคุฏู ุงูุฎุฑูุทุฉ ุงููุจูุฑุฉ ุงูุชุฑุงุถููุง ุฅูู ุฅูุดุงุก ูุชูุฉ ูุจูุฑุฉ ูุงุญุฏุฉ ูู ุงูุฃุฑุถ - ุงููุงุฑุฉ ุงูุนุธููุฉ ุจุงูุฌูุง - ุฑุจูุง ูุน ุนุฏุฉ ุฌุฒุฑ ุตุบูุฑุฉ.  ูุน ุฒูุงุฏุฉ ุญุฌู ุงูุญุฏูุฏ ุ ูุฒุฏุงุฏ ุงุญุชูุงู ุญุฏูุซ ุฐูู ุ ูุนูุฏ ููู ูุนููุฉ ููุงุฏ ูููู ูุถููููุง ุฃู ูุญุตู ุนูู ูุงุฑุฉ ุนุธูู.  ููุน ุฐูู ุ ุนูุฏูุง ุชููู ุงููุณุจุฉ ุงููุฆููุฉ ููุฃุฑุถ ูุจูุฑุฉ ุฌุฏูุง ุ ุชูุชูุฆ ูุนุธู ุงูููุงุทู ุงููุชุงุญุฉ ููุชูุฌุฉ ูุฐูู ูุญุตู ุนูู ูุชูุฉ ูุณุชุทููุฉ ุชูุฑูุจูุง ูู ุงูุฃุฑุถ.  ูููุน ุญุฏูุซ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชูููู ุงููุณุจุฉ ุงููุฆููุฉ ููุฃุฑุถ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e1b/d84/209/e1bd8420915ccc74cd3470409b9a4236.jpg"></div><br>  <i>40ูช ุณูุดู ุจุญุฏ ุจุทุงูุฉ 10.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูู ุฃูู ุฌุงุก ุงุณู ุจุงูุฌูุงุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุงู ูุฐุง ุงุณู ุขุฎุฑ ูุงุฑุฉ ุนุธูู ูุนุฑููุฉ ูุงูุช ููุฌูุฏุฉ ุนูู ุงูุฃุฑุถ ููุฐ ุณููุงุช ุนุฏูุฏุฉ.  ูุชููู ุงูุงุณู ูู ุงููููุงุช ุงููููุงููุฉ ุนููู ู Gaia ุ ููุง ูุนูู ุดูุฆุง ูุซู "ูู ุงูุทุจูุนุฉ" ุฃู "ูู ุงูุฃุฑุถ". </div></div><br><br><h3 style=";text-align:right;direction:rtl">  ูุญูู ูู ุจุทุงูุงุช ูุณุชุญููุฉ </h3><br>  ูููู ุจุชูููุฏ ุงููุณุงุญุฉ ุงูููุงุณุจุฉ ูู ุงูุฃุฑุถ ูู ุฎูุงู ุงูุงุณุชูุฑุงุฑ ูู ุฑูุน ุงูุฃุฑุถ ุญุชู ูุตู ุฅูู ุงููุชูุฉ ุงูุฃุฑุถูุฉ ุงููุทููุจุฉ.  ูุฐุง ูุนูู ูุฃูู ุนุงุฌูุงู ุฃู ุขุฌูุงู ุณูู ูุฑูุน ูู ุฎููุฉ ุนูู ูุณุชูู ุงููุงุก.  ููุน ุฐูู ุ ุนูุฏ ุงุณุชุฎุฏุงู ุญุฏูุฏ ุงูุฎุฑูุทุฉ ุ ูุง ูููููุง ุงููุตูู ุฅูู ูู ุฎููุฉ.  ุนูุฏูุง ุชููู ููุงู ุญุงุฌุฉ ุฅูู ูุณุจุฉ ุนุงููุฉ ุฌุฏูุง ูู ุงูุฃุฑุถ ุ ุณูุคุฏู ุฐูู ุฅูู "ูุญุงููุงุช ูุฅุฎูุงูุงุช" ูุง ููุงูุฉ ููุง ูููููุฏ ูุฑูุน ุงููุฒูุฏ ูู ุงูุฃุฑุงุถู ุ ูุณูู ูุตุจุญ ุนุงูููุง ูู ุฏูุฑุฉ ูุง ููุงูุฉ ููุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุชู ุชุฌููุฏ ุงูุชุทุจูู ุ ูููู ูุฐุง ูุง ูุฌุจ ุฃู ูุญุฏุซ. <br><br>  ูุง ูููููุง ุงูุนุซูุฑ ุนูู ุชููููุงุช ูุณุชุญููุฉ ุจุดูู ููุซูู ูุณุจููุง ุ ูููู ูููููุง ุญูุงูุฉ ุฃููุณูุง ูู ุงูุฏูุฑุงุช ุงูุชู ูุง ููุงูุฉ ููุง.  <code>CreateLand</code> ุจุจุณุงุทุฉ ุนุฏุฏ ุงูุฏูุฑุงุช ุงูุชู ุชู ุชูููุฐูุง ูู <code>CreateLand</code> .  ุฅุฐุง ูุงู ููุงู ุงููุซูุฑ ูู ุงูุชูุฑุงุฑุงุช ุ ููู ุงููุฑุฌุญ ุฃููุง ุนุงูููู ููุฌุจ ุฃู ูุชููู. <br><br>  ุจุงููุณุจุฉ ููุฎุฑูุทุฉ ุงููุจูุฑุฉ ุ ุชุจุฏู ุขูุงู ุงูุชูุฑุงุฑุงุช ููุจููุฉ ุ ูุนุดุฑุฉ ุขูุงู ุชูุฑุงุฑ ุชุจุฏู ุณุฎููุฉ ุจุงููุนู.  ูุฐูู ุฏุนููุง ูุณุชุฎุฏู ูุฐู ุงููููุฉ ูููุทุฉ ุฅููุงุก. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateLand</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> landBudget = Mathf.RoundToInt(cellCount * landPercentage * <span class="hljs-number"><span class="hljs-number">0.01f</span></span>); <span class="hljs-comment"><span class="hljs-comment">// while (landBudget &gt; 0) { for (int guard = 0; landBudget &gt; 0 &amp;&amp; guard &lt; 10000; guard++) { int chunkSize = Random.Range(chunkSizeMin, chunkSizeMax - 1); โฆ } }</span></span></code> </pre> <br>  ุฅุฐุง ุญุตููุง ุนูู ุฎุฑูุทุฉ ุชุงููุฉ ุ ูุฅู ุฅุฌุฑุงุก 10000 ุชูุฑุงุฑ ูู ูุณุชุบุฑู ุงููุซูุฑ ูู ุงูููุช ุ ูุฃู ุงูุนุฏูุฏ ูู ุงูุฎูุงูุง ุณุชุตู ุจุณุฑุนุฉ ุฅูู ุฃูุตู ุงุฑุชูุงุน ุ ููุง ุณูููุน ุงูููุงุทู ุงูุฌุฏูุฏุฉ ูู ุงูููู. <br><br>  ุญุชู ุจุนุฏ ูุณุฑ ุงูุญููุฉ ุ ูุง ุฒููุง ูุญุตู ุนูู ุงูุฎุฑูุทุฉ ุงูุตุญูุญุฉ.  ูุง ุชุญุชูู ุนูู ุงููููุฉ ุงูููุงุณุจุฉ ูู ุงูุณูุดู ููู ุชุจุฏู ูุซูุฑุฉ ููุงูุชูุงู.  ุฏุนููุง ูุนุฑุถ ุฅุดุนุงุฑูุง ุญูู ูุฐุง ูู ูุญุฏุฉ ุงูุชุญูู ุ ููุง ูุชูุญ ููุง ูุนุฑูุฉ ุงูุฃุฑุถ ุงููุชุจููุฉ ุงูุชู ูุดููุง ูู ุฅููุงููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateLand</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (landBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"Failed to use up "</span></span> + landBudget + <span class="hljs-string"><span class="hljs-string">" land budget."</span></span>); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ab5/87f/f4f/ab587ff4f560fe6c1c0d7d5a547ae2b7.jpg"></div><br>  <i>95ูช ูู ุงูุฃุฑุงุถู ุจุญุฏ ุจุทุงูุฉ 10 ูุง ูููููุง ุฅููุงู ุงููุจูุบ ุจุงููุงูู.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ูุง ุชุฒุงู ุงูุจุทุงูุฉ ุงููุงุดูุฉ ูุชุจุงููุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุชููุน ุงูุฎุท ุงูุณุงุญูู ุ ูุฃูู ุนูุฏูุง ุชุตุจุญ ุงููุฑุชูุนุงุช ุฏุงุฎู ููุทูุฉ ุงูุฅูุดุงุก ุนุงููุฉ ุฌุฏูุง ุ ูุง ุชุณูุญ ููุงุทู ุฌุฏูุฏุฉ ููุง ุจุงูููู ุฅูู ุงูุฎุงุฑุฌ.  ูุง ูุณูุญ ููุณ ุงููุจุฏุฃ ุจููู ุงูุฃุฑุงุถู ุฅูู ูุณุงุญุงุช ุตุบูุฑุฉ ูู ุงูุฃุฑุถ ุ ุญุชู ุชุตู ุฅูู ุฃูุตู ุงุฑุชูุงุน ูุชุชุญูู ุจุจุณุงุทุฉ ุฅูู ููููุฏุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฒูุฏ ุงูุชุจุงูู ุนูุฏ ุฎูุถ ุงููุคุงูุฑุงุช. </div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ุชูุณูู ุงูุจุทุงูุฉ </h2><br>  ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ูุฏููุง ุญุฏูุฏ ุงูุฎุฑูุทุฉ ุ ูููุง ุจุชูุณูู ุงูุฎุฑูุทุฉ ุจุดูู ุฃุณุงุณู ุฅูู ููุทูุชูู ูููุตูุชูู: ููุทูุฉ ุงูุญุฏูุฏ ูุงูููุทูุฉ ุงูุชู ุชู ุฅูุดุงุก ูุทุน ุงูุฃุฑุถ ูููุง.  ูุธุฑูุง ูุฃู ููุทูุฉ ุงูุฎูู ููุท ูู ุงููููุฉ ุจุงููุณุจุฉ ููุง ุ ูููููุง ุงุนุชุจุงุฑ ูุฐู ุงูุญุงูุฉ ุญุงูุฉ ูุน ููุทูุฉ ูุงุญุฏุฉ.  ุงูููุทูุฉ ุจุจุณุงุทุฉ ูุง ุชุบุทู ุงูุฎุฑูุทุฉ ุจุฃููููุง.  ูููู ุฅุฐุง ูุงู ูุฐุง ูุณุชุญูููุง ุ ููุง ุดูุก ูููุนูุง ูู ุชูุณูู ุงูุฎุฑูุทุฉ ุฅูู ุนุฏุฉ ููุงุทู ุบูุฑ ูุชุตูุฉ ุจุฅูุดุงุก ุงูุฃุฑุงุถู.  ุณูุณูุญ ุฐูู ุจุชูููู ุงููุชู ุงูุฃุฑุถูุฉ ุจุดูู ูุณุชูู ุนู ุจุนุถูุง ุงูุจุนุถ ุ ูุชุนููู ูุงุฑุงุช ูุฎุชููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ููุทูุฉ ุงูุฎุฑูุทุฉ </h3><br>  ููุจุฏุฃ ุจูุตู ููุทูุฉ ูุงุญุฏุฉ ูู ุงูุฎุฑูุทุฉ ุจุงูุจููุฉ.  ุณูุคุฏู ูุฐุง ุฅูู ุชุจุณูุท ุนูููุง ูุน ุงูุนุฏูุฏ ูู ุงูููุงุทู.  ูููู ุจุฅูุดุงุก ุจููุฉ <code>MapRegion</code> ููุฐุง ุ ูุงูุชู ุชุญุชูู ุจุจุณุงุทุฉ ุนูู ุงูุญููู ุงูุญุฏูุฏูุฉ ููููุทูุฉ.  ูุธุฑูุง ูุฃููุง ูู ูุณุชุฎุฏู ูุฐู ุงูุจููุฉ ุฎุงุฑุฌ <code>HexMapGenerator</code> ุ ููููููุง ุชุนุฑูููุง ุฏุงุฎู ูุฐู ุงููุฆุฉ <code>HexMapGenerator</code> ุฏุงุฎููุฉ ุฎุงุตุฉ.  ุซู ูููู ุงุณุชุจุฏุงู ุฃุฑุจุนุฉ ุญููู ุตุญูุญุฉ <code>MapRegion</code> ูุงุญุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// int xMin, xMax, zMin, zMax; struct MapRegion { public int xMin, xMax, zMin, zMax; } MapRegion region;</span></span></code> </pre> <br>  ููู ูุนูู ูู ุดูุก ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุจุงุฏุฆุฉ <code>region.</code> ุฅูู ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุญููู ูู <code>GenerateMap</code> <code>region.</code>  . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> region.xMin = mapBorderX; region.xMax = x - mapBorderX; region.zMin = mapBorderZ; region.zMax = z - mapBorderZ;</code> </pre> <br>  ูุฃูุถุง ูู <code>GetRandomCell</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRandomCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> grid.GetCell( Random.Range(region.xMin, region.xMax), Random.Range(region.zMin, region.zMax) ); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุนุฏุฉ ููุงุทู </h3><br>  ูุฏุนู ููุงุทู ูุชุนุฏุฏุฉ ุ <code>MapRegion</code> ุญูู <code>MapRegion</code> ุจูุงุฆูุฉ ููุงุทู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// MapRegion region; List&lt;MapRegion&gt; regions;</span></span></code> </pre> <br>  ูู ูุฐู ุงููุฑุญูุฉ ุ ุณูููู ูู ุงูุฌูุฏ ุฅุถุงูุฉ ุทุฑููุฉ ูููุตูุฉ ูุฅูุดุงุก ููุงุทู.  ูุฌุจ ุฃู ูููู ุจุฅูุดุงุก ุงููุงุฆูุฉ ุงููุทููุจุฉ ุฃู ูุณุญูุง ุฅุฐุง ูุงูุช ููุฌูุฏุฉ ุจุงููุนู.  ุจุนุฏ ุฐูู ุ ุณูุญุฏุฏ ููุทูุฉ ูุงุญุฏุฉ ุ ููุง ูุนููุง ูู ูุจู ุ ููุถูููุง ุฅูู ุงููุงุฆูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRegions</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (regions == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { regions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;MapRegion&gt;(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { regions.Clear(); } MapRegion region; region.xMin = mapBorderX; region.xMax = grid.cellCountX - mapBorderX; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); }</code> </pre> <br>  ุณูู ูุณูู ูุฐู ุงูุทุฑููุฉ ูู <code>GenerateMap</code> ุ ููู ูููู ุจุฅูุดุงุก ุงูููุทูุฉ ูุจุงุดุฑุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// region.xMin = mapBorderX; // region.xMax = x - mapBorderX; // region.zMin = mapBorderZ; // region.zMax = z - mapBorderZ; CreateRegions(); CreateLand();</span></span></code> </pre> <br>  ุญุชู ุชุชููู <code>GetRandomCell</code> ุงูุนูู ูุน ููุทูุฉ ุนุดูุงุฆูุฉ ุ ูู <code>MapRegion</code> ุงููุนููุฉ <code>MapRegion</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRandomCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MapRegion region</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> grid.GetCell( Random.Range(region.xMin, region.xMax), Random.Range(region.zMin, region.zMax) ); }</code> </pre> <br>  ุงูุขู ูุฌุจ ุฃู ุชูุฑุฑ <code>SinkTerrain</code> ู <code>SinkTerrain</code> ุงูููุทูุฉ ุงูููุงุจูุฉ ุฅูู <code>GetRandomCell</code> .  ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ูู ูููู ุฃูุถูุง ุฅูู ูุนููุฉ ููุทูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RaiseTerrain</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> chunkSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> budget, MapRegion region</span></span></span><span class="hljs-function">)</span></span> { searchFrontierPhase += <span class="hljs-number"><span class="hljs-number">1</span></span>; HexCell firstCell = GetRandomCell(region); โฆ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SinkTerrain</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> chunkSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> budget, MapRegion region</span></span></span><span class="hljs-function">)</span></span> { searchFrontierPhase += <span class="hljs-number"><span class="hljs-number">1</span></span>; HexCell firstCell = GetRandomCell(region); โฆ }</code> </pre> <br>  ูุฌุจ ุฃู ุชุญุฏุฏ ุทุฑููุฉ <code>CreateLand</code> ููู ููุทูุฉ ุฑูุน ุงูุฃูุณุงู ุฃู ุฎูุถูุง.  ูููุงุฒูุฉ ุงูุฃุฑุถ ุจูู ุงูููุงุทู ุ ุณูููู ุจุจุณุงุทุฉ ุจุงูุชุฌูู ูู ูุงุฆูุฉ ุงูููุงุทู ูู ุงูุฏูุฑุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateLand</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> landBudget = Mathf.RoundToInt(cellCount * landPercentage * <span class="hljs-number"><span class="hljs-number">0.01f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> guard = <span class="hljs-number"><span class="hljs-number">0</span></span>; landBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; guard &lt; <span class="hljs-number"><span class="hljs-number">10000</span></span>; guard++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; regions.Count; i++) { MapRegion region = regions[i]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> chunkSize = Random.Range(chunkSizeMin, chunkSizeMax - <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; sinkProbability) { landBudget = SinkTerrain(chunkSize, landBudget, region); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { landBudget = RaiseTerrain(chunkSize, landBudget, region); } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (landBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"Failed to use up "</span></span> + landBudget + <span class="hljs-string"><span class="hljs-string">" land budget."</span></span>); } }</code> </pre> <br>  ููุน ุฐูู ุ ูุง ุฒููุง ุจุญุงุฌุฉ ุฅูู ุฌุนู ุชุฎููุถ ูุทุน ุงูุฃุฑุงุถู ููุฒุนุฉ ุจุงูุชุณุงูู.  ูููู ุงูููุงู ุจุฐูู ุฃุซูุงุก ุชุญุฏูุฏ ุฌููุน ุงูููุงุทู ูุง ุฅุฐุง ูุงู ุณูุชู ุญุฐููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> guard = <span class="hljs-number"><span class="hljs-number">0</span></span>; landBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; guard &lt; <span class="hljs-number"><span class="hljs-number">10000</span></span>; guard++) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> sink = Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; sinkProbability; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; regions.Count; i++) { MapRegion region = regions[i]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> chunkSize = Random.Range(chunkSizeMin, chunkSizeMax - <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">// if (Random.value &lt; sinkProbability) { if (sink) { landBudget = SinkTerrain(chunkSize, landBudget, region); } else { landBudget = RaiseTerrain(chunkSize, landBudget, region); } } }</span></span></code> </pre> <br>  ุฃุฎูุฑูุง ุ ูู ุฃุฌู ุงุณุชุฎุฏุงู ูุงูู ูุณุงุญุฉ ุงูุฃุฑุถ ุชูุงููุง ุ ูุญุชุงุฌ ุฅูู ุฅููุงู ุงูุนูููุฉ ุจูุฌุฑุฏ ูุตูู ุงููุจูุบ ุฅูู ุงูุตูุฑ.  ูููู ุฃู ูุญุฏุซ ูุฐุง ูู ุฃู ูุฑุญูุฉ ูู ุฏูุฑุฉ ุงูููุทูุฉ.  ูุฐูู ุ ูููู ุจููู ุงูุงุฎุชูุงุฑ ุงููุญุตู ูู ุงูุตูุฑ ุฅูู ุงูุญููุฉ ุงูุฏุงุฎููุฉ.  ูู ุงููุงูุน ุ ูุง ูููููุง ุฅุฌุฑุงุก ูุฐุง ุงููุญุต ุฅูุง ุจุนุฏ ุฑูุน ุงูุฃุฑุถ ุ ูุฃูู ุนูุฏ ุงูุชุฎููุถ ุ ูุง ูุชู ุฅููุงู ุงููุจูุบ ุฃุจุฏูุง.  ุฅุฐุง ุงูุชูููุง ุ ูููููุง ุงูุฎุฑูุฌ ุนูู ุงูููุฑ ูู ุทุฑููุฉ <code>CreateLand</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// for (int guard = 0; landBudget &gt; 0 &amp;&amp; guard &lt; 10000; guard++) { for (int guard = 0; guard &lt; 10000; guard++) { bool sink = Random.value &lt; sinkProbability; for (int i = 0; i &lt; regions.Count; i++) { MapRegion region = regions[i]; int chunkSize = Random.Range(chunkSizeMin, chunkSizeMax - 1); if (sink) { landBudget = SinkTerrain(chunkSize, landBudget, region); } else { landBudget = RaiseTerrain(chunkSize, landBudget, region); if (landBudget == 0) { return; } } } }</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ููุทูุชูู </h3><br>  ุนูู ุงูุฑุบู ูู ุฃู ูุฏููุง ุงูุขู ุฏุนู ุงูุนุฏูุฏ ูู ุงูููุงุทู ุ ูุง ุฒููุง ูุทูุจ ููุทูุฉ ูุงุญุฏุฉ ููุท.  ุฏุนูุง ูุบูุฑ <code>CreateRegions</code> ุจุญูุซ ุชูุณู ุงูุฎุฑูุทุฉ ุฅูู ูุตู ุฑุฃุณู.  ููููุงู ุจุฐูู ุ ูููุง ุจุชุฎููุถ ูููุฉ <code>xMax</code> ููููุทูุฉ ุงููุถุงูุฉ ุฅูู ุงููุตู.  ุซู ูุณุชุฎุฏู ููุณ ุงููููุฉ ูู <code>xMin</code> ูุฑุฉ ุฃุฎุฑู ุงููููุฉ ุงูุฃุตููุฉ ูู <code>xMax</code> ุ <code>xMax</code> ูููุทูุฉ ุซุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> MapRegion region; region.xMin = mapBorderX; region.xMax = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span>; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); region.xMin = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span>; region.xMax = grid.cellCountX - mapBorderX; regions.Add(region);</code> </pre> <br>  ูู ูุญุฏุซ ุฅูุดุงุก ุงูุจุทุงูุงุช ูู ูุฐู ุงููุฑุญูุฉ ุฃู ูุฑู.  ุนูู ุงูุฑุบู ูู ุฃููุง ุญุฏุฏูุง ููุทูุชูู ุ ุฅูุง ุฃูููุง ูุญุชูุงู ููุณ ุงูููุทูุฉ ูุซู ููุทูุฉ ูุฏููุฉ ูุงุญุฏุฉ.  ูุชูุฑูููุง ุนู ุจุนุถูุง ุ ุชุญุชุงุฌ ุฅูู ุชุฑู ูุณุงูุฉ ูุงุฑุบุฉ ุจููููุง.  ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฅุถุงูุฉ ุดุฑูุท ุชูุฑูุฑ ุฅูู ุญุฏูุฏ ุงูููุทูุฉ ุ ุจุงุณุชุฎุฏุงู ููุณ ุงููุงุตู ุงูุฒููู ูุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูุญุฏูุฏ ุงูุฎุฑูุทุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0, 10)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> regionBorder = <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9ff/cd2/cd0/9ffcd2cd0f4068caf622e433c503715d.png"></div><br>  <i>ุดุฑูุท ุชูุฑูุฑ ุญุฏูุฏ ุงูููุทูุฉ.</i> <br><br>  ูุธุฑูุง ูุฃู ุงูุฃุฑุถ ูููู ุชุดููููุง ุนูู ุฌุงูุจู ุงููุณุงุญุฉ ุจูู ุงูููุงุทู ุ ูุฅู ุงุญุชูุงู ุฅูุดุงุก ุฌุณูุฑ ุจุฑูุฉ ุนูุฏ ุญูุงู ุงูุฎุฑูุทุฉ ุณูุฒุฏุงุฏ.  ูููุน ุฐูู ุ ูุณุชุฎุฏู ุญุฏูุฏ ุงูููุทูุฉ ูุชุญุฏูุฏ ููุทูุฉ ุฎุงููุฉ ูู ุงูุฃุฑุถ ุจูู ุฎุท ุงูุชูุณูู ูุงูููุทูุฉ ุงูุชู ูููู ุฃู ุชุจุฏุฃ ูููุง ุงููุคุงูุฑุงุช.  ูุฐุง ูุนูู ุฃู ุงููุณุงูุฉ ุจูู ุงูููุงุทู ุงููุฌุงูุฑุฉ ุฃูุจุฑ ูู ุญุฌู ุญุฏูุฏ ุงูููุทูุฉ. <br><br>  ูุชุทุจูู ุญุฏูุฏ ุงูููุทูุฉ ูุฐู ุ <code>xMax</code> ููููุทูุฉ ุงูุฃููู ูุฃุถู ุงูููุทูุฉ ุงูุซุงููุฉ ุฅูู <code>xMin</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> MapRegion region; region.xMin = mapBorderX; region.xMax = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); region.xMin = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> + regionBorder; region.xMax = grid.cellCountX - mapBorderX; regions.Add(region);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1e5/1f6/476/1e51f6476894662d55f7ca9748dc7fa5.jpg"></div><br>  <i>ุชููุณู ุงูุฎุฑูุทุฉ ุฑุฃุณููุง ุฅูู ููุทูุชูู.</i> <br><br>  ุจุงุณุชุฎุฏุงู ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ุ ุณูุชู ุฅูุดุงุก ููุทูุชูู ูููุตูุชูู ุจุดูู ููุญูุธ ุ ููุน ุฐูู ุ ููุง ูู ุงูุญุงู ูู ููุทูุฉ ูุงุญุฏุฉ ูุญุฏูุฏ ุฎุฑูุทุฉ ูุจูุฑุฉ ุ ูุง ูุถูู ุงุณุชูุงู ูุชูุชู ุฃุฑุถ ุจุงูุถุจุท.  ูู ูุนุธู ุงูุฃุญูุงู ุณุชููู ูุงุฑุชูู ูุจูุฑุชูู ุ ุฑุจูุง ูุน ุนุฏุฉ ุฌุฒุฑ.  ูููู ูู ุจุนุถ ุงูุฃุญูุงู ูููู ุฅูุดุงุก ุฌุฒูุฑุชูู ูุจูุฑุชูู ุฃู ุฃูุซุฑ ูู ุงูููุทูุฉ.  ูุฃุญูุงููุง ูููู ุฑุจุท ูุงุฑุชูู ุจูุงุณุทุฉ ุจุฑุฒุฎ. <br><br>  ุจุงูุทุจุน ุ ูููููุง ุชูุณูู ุงูุฎุฑูุทุฉ ุฃููููุง ุฃูุถูุง ุ ูุชุบููุฑ ููุฌ ููุงุณ X ู Z. ุฏุนูุง ูุฎุชุงุฑ ุนุดูุงุฆููุง ุฃุญุฏ ุงุชุฌุงููู ูุญุชูููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> MapRegion region; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) { region.xMin = mapBorderX; region.xMax = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); region.xMin = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> + regionBorder; region.xMax = grid.cellCountX - mapBorderX; regions.Add(region); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { region.xMin = mapBorderX; region.xMax = grid.cellCountX - mapBorderX; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; regions.Add(region); region.zMin = grid.cellCountZ / <span class="hljs-number"><span class="hljs-number">2</span></span> + regionBorder; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f23/970/c91/f23970c91cdd9c539ebdc8c7fdbba05f.jpg"></div><br>  <i>ุงูุฎุฑูุทุฉ ููุณูุฉ ุฃูููุงู ุฅูู ููุทูุชูู.</i> <br><br>  ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏู ุฎุฑูุทุฉ ูุงุณุนุฉ ุ ูุณูุชู ุฅูุดุงุก ููุงุทู ุฃูุณุน ูุฃุฑูุน ูุน ุงููุตู ุงูุฃููู.  ููุชูุฌุฉ ูุฐูู ุ ูู ุงููุฑุฌุญ ุฃู ุชุดูู ูุฐู ุงูููุงุทู ุนุฏุฉ ูุชู ุฃุฑุถูุฉ ููุณูุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃุฑุจุน ููุงุทู </h3><br>  ุฏุนููุง ูุฌุนู ุนุฏุฏ ุงูููุงุทู ูุงุจูุงู ููุชุฎุตูุต ุ ูุฃูุดุฆ ุงูุฏุนู ูู 1 ุฅูู 4 ููุงุทู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(1, 4)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> regionCount = <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/918/49e/2a4/91849e2a4ffe6091b8d4fdf0d78b0c45.png"></div><br>  <i>ุงูููุฒูู ูุนุฏุฏ ุงูููุงุทู.</i> <br><br>  ูููููุง ุงุณุชุฎุฏุงู <code>switch</code> ูุชุญุฏูุฏ ุชูููุฐ ุฑูุฒ ุงูููุทูุฉ ุงูููุงุจูุฉ.  ูุจุฏุฃ ุจุชูุฑุงุฑ ุฑูุฒ ููุทูุฉ ูุงุญุฏุฉ ุ ูุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ุงูุชุฑุงุถููุง ุ ูุชุฑู ุฑูุฒ ููุทูุชูู ููุญุงูุฉ 2. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> MapRegion region; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (regionCount) { <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: region.xMin = mapBorderX; region.xMax = grid.cellCountX - mapBorderX; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) { region.xMin = mapBorderX; region.xMax = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); region.xMin = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> + regionBorder; region.xMax = grid.cellCountX - mapBorderX; regions.Add(region); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { region.xMin = mapBorderX; region.xMax = grid.cellCountX - mapBorderX; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; regions.Add(region); region.zMin = grid.cellCountZ / <span class="hljs-number"><span class="hljs-number">2</span></span> + regionBorder; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุง ูู ุจูุงู ุงูุชุจุฏููุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุฐุง ุจุฏูู ููุชุงุจุฉ ุณูุณูุฉ ูู ุนุจุงุฑุงุช if-else-if-else.  ูุชู ุชุทุจูู ุฑูุฒ ุงูุชุจุฏูู ุนูู ุงููุชุบูุฑ ุ ููุชู ุงุณุชุฎุฏุงู ุงูุชุณููุงุช ููุฅุดุงุฑุฉ ุฅูู ุงูุฑูุฒ ุงูุฐู ูุฌุจ ุชูููุฐู.  ููุงู ุฃูุถูุง ุชุณููุฉ <code>default</code> ุ ูุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ููุชูุฉ ุฃุฎุฑู ุฃุฎุฑู.  ูุฌุจ ุฃู ููุชูู ูู ุฎูุงุฑ ุฅูุง ุจุจูุงู <code>break</code> ุฃู <code>return</code> . <br><br>  ูุฅุจูุงุก ูุชูุฉ <code>switch</code> ูุงุจูุฉ ูููุฑุงุกุฉ ุ ูู ุงูุฃูุถู ุนุงุฏุฉู ุฃู ุชููู ุฌููุน ุงูุญุงูุงุช ูุตูุฑุฉ ุ ุจุดูู ูุซุงูู ูุน ุจูุงู ูุงุญุฏ ุฃู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ.  ูู ุฃูุนู ุฐูู ููุซุงู ูุฑูุฒ ุงูููุทูุฉ ุ ูููู ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฅูุดุงุก ููุงุทู ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุ ูุฅููู ุฃูุตูู ุจุงุณุชุฎุฏุงู ุทุฑู ูููุตูุฉ.  ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (regionCount) { <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: CreateOneRegion(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: CreateTwoRegions(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: CreateThreeRegions(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: CreateFourRegions(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre> </div></div><br>  ุชุชุดุงุจู ุซูุงุซ ููุงุทู ูุน ููุทูุชูู ุ ูุชู ุงุณุชุฎุฏุงู ุงูุซูุซูู ููุท ุจุฏูุงู ูู ุงููุตู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณููุดุฆ ุงููุณู ุงูุฃููู ููุงุทู ุถููุฉ ุฌุฏูุง ุ ูุฐูู ุฃูุดุฃูุง ุฏุนููุง ูููุณู ุงูุฑุฃุณู ููุท.  ูุงุญุธ ุฃููุง ูุชูุฌุฉ ูุฐูู ุถุงุนููุง ูุณุงุญุฉ ุงูุญุฏูุฏ ูู ุงูููุทูุฉ ุ ูุฐุง ูุฅู ูุณุงุญุฉ ุฅูุดุงุก ุฃูุณุงู ุฌุฏูุฏุฉ ุฃูู ููุง ูู ุนููู ูู ููุทูุชูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (regionCount) { <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: โฆ <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: โฆ <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: region.xMin = mapBorderX; region.xMax = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">3</span></span> - regionBorder; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); region.xMin = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">3</span></span> + regionBorder; region.xMax = grid.cellCountX * <span class="hljs-number"><span class="hljs-number">2</span></span> / <span class="hljs-number"><span class="hljs-number">3</span></span> - regionBorder; regions.Add(region); region.xMin = grid.cellCountX * <span class="hljs-number"><span class="hljs-number">2</span></span> / <span class="hljs-number"><span class="hljs-number">3</span></span> + regionBorder; region.xMax = grid.cellCountX - mapBorderX; regions.Add(region); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/234/2e7/cc8/2342e7cc8cb524f4f9db803d5359a78e.jpg"></div><br>  <i>ุซูุงุซ ููุงุทู.</i> <br><br>  ูููู ุฅูุดุงุก ุฃุฑุจุน ููุงุทู ูู ุฎูุงู ุงูุฌูุน ุจูู ุงููุตู ุงูุฃููู ูุงูุฑุฃุณู ูุฅุถุงูุฉ ููุทูุฉ ูุงุญุฏุฉ ุฅูู ูู ุฑูู ูู ุฃุฑูุงู ุงูุฎุฑูุทุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (regionCount) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: region.xMin = mapBorderX; region.xMax = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; regions.Add(region); region.xMin = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> + regionBorder; region.xMax = grid.cellCountX - mapBorderX; regions.Add(region); region.zMin = grid.cellCountZ / <span class="hljs-number"><span class="hljs-number">2</span></span> + regionBorder; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); region.xMin = mapBorderX; region.xMax = grid.cellCountX / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; regions.Add(region); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/551/b72/a0c/551b72a0ca2f12a5636828faa4c3febc.jpg"></div><br>  <i>ุฃุฑุจุน ููุงุทู.</i> <br><br>  ุงูููุฌ ุงููุณุชุฎุฏู ููุง ูู ุฃุจุณุท ุทุฑููุฉ ูุชูุณูู ุงูุฎุฑูุทุฉ.  ุฅูู ูููุฏ ููุณ ุงูููุงุทู ุชูุฑูุจูุง ุญุณุจ ูุณุงุญุฉ ุงูุฃุฑุถ ุ ููุชู ุงูุชุญูู ูู ุชููุจูุง ุจูุงุณุทุฉ ูุนููุงุช ุฃุฎุฑู ูุชูููุฏ ุงูุฎุฑุงุฆุท.  ููุน ุฐูู ุ ุณูููู ูู ุงููุงุถุญ ุฏุงุฆููุง ุฃู ุงูุจุทุงูุฉ ููุณูุฉ ุฅูู ุฎุทูุท ูุณุชูููุฉ.  ูููุง ุงุญุชุฌูุง ุฅูู ุงููุฒูุฏ ูู ุงูุชุญูู ุ ูููุง ูุงูุช ุงููุชูุฌุฉ ุฃูู ุนุถููุฉ.  ูุฐูู ุ ูุฐุง ุฃูุฑ ุทุจูุนู ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ููุงุทู ูุชุณุงููุฉ ุชูุฑูุจูุง ููุนุจ.  ูููู ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุฃูุซุฑ ุงูุฃุฑุงุถู ุชููุนูุง ูุบูุฑ ูุญุฏูุฏุฉ ุ ูุณูุชุนูู ุนููู ุฌุนููุง ุจูุณุงุนุฏุฉ ููุทูุฉ ูุงุญุฏุฉ. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููุงู ุทุฑู ุฃุฎุฑู ูุชูุณูู ุงูุฎุฑูุทุฉ.  ูุง ูููููุง ุฃู ููุชุตุฑ ููุท ุนูู ุงูุฎุทูุท ุงููุณุชูููุฉ.  ูุง ูุชุนูู ุนูููุง ุญุชู ุงุณุชุฎุฏุงู ููุงุทู ูู ููุณ ุงูุญุฌู ุ ููุฐูู ุชุบุทูุฉ ุงูุฎุฑูุทุฉ ุจุฃููููุง ูุนูู.  ูููููุง ุชุฑู ุซููุจ.  ููููู ุฃูุถูุง ุงูุณูุงุญ ุจุชูุงุทุนุงุช ุงูููุงุทู ุฃู ุชุบููุฑ ุชูุฒูุน ุงูุฃุฑุงุถู ุจูู ุงูููุงุทู.  ููููู ุฃูุถูุง ุชุนููู ูุนููุงุช ุงููููุฏ ุงูุฎุงุตุฉ ุจู ููู ููุทูุฉ (ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุฃูุซุฑ ุชุนููุฏูุง) ุ ุนูู ุณุจูู ุงููุซุงู ุ ููููู ูุฏูู ูุงุฑุฉ ูุจูุฑุฉ ูุฃุฑุฎุจูู ุนูู ุงูุฎุฑูุทุฉ. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ุชุขูู </h2><br>  ุญุชู ุงูุขู ุ ุชุจุฏู ุฌููุน ุงูุจุทุงูุงุช ุงูุชู ุฃูุดุฃูุงูุง ููุญุฉ ูููุณูุฑุฉ ุฅูู ุญุฏ ูุง.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ุชุจุฏู ุงูุฑุงุญุฉ ุงูุญููููุฉ ูุซู ูุฐุง ุ ูููู ุจูุฑูุฑ ุงูููุช ุชุตุจุญ ุฃูุซุฑ ุณูุงุณุฉ ูุณูุงุณุฉ ุ ูุฃุฌุฒุงุฆูุง ุงูุญุงุฏุฉ ุชุตุจุญ ุจุงูุชุฉ ุจุณุจุจ ุงูุชุขูู. </font><font style="vertical-align: inherit;">ูุชุญุณูู ุงูุฎุฑุงุฆุท ุ ูููููุง ุชุทุจูู ุนูููุฉ ุงูุชุขูู ูุฐู. </font><font style="vertical-align: inherit;">ุณููุนู ุฐูู ุจุนุฏ ุฅูุดุงุก ุงูุฃุฑุถ ุงููุนุฑุฉ ุ ุจุทุฑููุฉ ูููุตูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { โฆ CreateRegions(); CreateLand(); ErodeLand(); SetTerrainType(); โฆ } โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ErodeLand</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {}</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุจุฉ ุงูุชุขูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ูุฑ ุงูููุช ุ ูููุง ุฒุงุฏ ุงูุชุขูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฑูุฏ ุฃูุง ูููู ุงูุชุขูู ุฏุงุฆููุง ุ ูููู ูุงุจููุง ููุชุฎุตูุต. </font><font style="vertical-align: inherit;">ูุญุฏ ุฃุฏูู ุ ุงูุชุขูู ูู ุตูุฑ ุ ููู ูุง ูุชูุงูู ูุน ุงูุฎุฑุงุฆุท ุงูุชู ุชู ุฅูุดุงุคูุง ูู ููุช ุณุงุจู. </font><font style="vertical-align: inherit;">ูู ุงูุญุฏ ุงูุฃูุตู ููุชุขูู ุดุงูู ุ ุฃู ุฃู ุงูุชุทุจูู ุงูุฅุถุงูู ูููู ุงูุชุขูู ูู ูุบูุฑ ุงูุชุถุงุฑูุณ. </font><font style="vertical-align: inherit;">ุจูุนูู ุ ูุฌุจ ุฃู ุชููู ูุนููุฉ ุงูุชุขูู ูุณุจุฉ ูู 0 ุฅูู 100 ุ ูุจุดูู ุงูุชุฑุงุถู ุณูุฃุฎุฐ 50.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0, 100)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> erosionPercentage = <span class="hljs-number"><span class="hljs-number">50</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c4e/efe/e5e/c4eefee5e18aeee36f16e6aee98a27fe.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูู ุงูุชุขูู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุจุญุซ ุนู ุงูุฎูุงูุง ุงููุฏูุฑุฉ ููุชุขูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุขูู ูุฌุนู ุงูุฑุงุญุฉ ุฃูุซุฑ ุณูุงุณุฉ. ูู ุญุงูุชูุง ุ ุงูุฃุฌุฒุงุก ุงูุญุงุฏุฉ ุงููุญูุฏุฉ ูู ุงูููุญุฏุฑุงุช. ูุฐูู ุ ุณูููููู ูุฏูุง ูุนูููุฉ ุงูุชุขูู. ูู ุญุงูุฉ ูุฌูุฏ ุฌุฑู ุ ูุฌุจ ุฃู ูููู ุงูุชุขูู ููู ุญุชู ูุชุญูู ูู ุงูููุงูุฉ ุฅูู ููุญุฏุฑ. ูู ููุฏุฆ ุงูููุญุฏุฑุงุช ุ ูุฃู ูุฐุง ุณูุคุฏู ุฅูู ุชุถุงุฑูุณ ูููุฉ. ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ูู ุฃุนูู ุงูููุญุฏุฑุงุช ุ ูุฎูุถ ุงุฑุชูุงุนูุง. ุณุชููู ูุฐู ุงูุฎูุงูุง ุนุฑุถุฉ ููุชุขูู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ููุดุฆ ุทุฑููุฉ ุชุญุฏุฏ ูุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ูููู ุฃู ุชููู ุนุฑุถุฉ ููุชุขูู. </font><font style="vertical-align: inherit;">ูุญุฏุฏ ูุฐุง ุนู ุทุฑูู ูุญุต ุฌูุฑุงู ุงูุฎููุฉ ุญุชู ูุฌุฏ ูุฑู ุงุฑุชูุงุน ูุจูุฑ ุจูุง ููู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูููุญุฏุฑุงุช ุชุชุทูุจ ุงุฎุชูุงููุง ุนูู ุงูุฃูู ููุณุชูู ูุงุญุฏ ุฃู ูุณุชูููู ูู ุงูุงุฑุชูุงุน ุ ูุฅู ุงูุฎููุฉ ุนุฑุถุฉ ููุชุขูู ุฅุฐุง ูุงู ูุงุญุฏ ุฃู ุฃูุซุฑ ูู ุฌูุฑุงููุง ุนูู ุงูุฃูู ุฎุทูุชูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ููุงู ูุซู ูุฐุง ุงูุฌุงุฑ ุ ููุง ูููู ููุฎููุฉ ุฃู ุชุชุนุฑุถ ููุชุขูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsErodible</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> erodibleElevation = cell.Elevation - <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor &amp;&amp; neighbor.Elevation &lt;= erodibleElevation) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ </font></font><code>ErodeLand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏูุฑุงู ุนุจุฑ ุฌููุน ุงูุฎูุงูุง ููุชุงุจุฉ ุฌููุน ุงูุฎูุงูุง ุงููุนุฑุถุฉ ููุชุขูู ุฅูู ูุงุฆูุฉ ูุคูุชุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ErodeLand</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { List&lt;HexCell&gt; erodibleCells = ListPool&lt;HexCell&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { HexCell cell = grid.GetCell(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsErodible(cell)) { erodibleCells.Add(cell); } } ListPool&lt;HexCell&gt;.Add(erodibleCells); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุฌุฑุฏ ุฃู ูุนุฑู ุงูุนุฏุฏ ุงูุฅุฌูุงูู ููุฎูุงูุง ุงููุนุฑุถุฉ ููุชุขูู ุ ูููููุง ุงุณุชุฎุฏุงู ุงููุณุจุฉ ุงููุฆููุฉ ููุชุขูู ูุชุญุฏูุฏ ุนุฏุฏ ุงูุฎูุงูุง ุงููุนุฑุถุฉ ููุชุขูู ุงููุชุจููุฉ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงูุช ุงููุณุจุฉ 50 ุ ููุฌุจ ุนูููุง ุชุขูู ุงูุฎูุงูุง ุญุชู ูุจูู ูุตู ุงููููุฉ ุงูุฃุตููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงููุณุจุฉ ุงููุฆููุฉ 100 ุ ููู ูุชููู ุญุชู ูุฏูุฑ ุฌููุน ุงูุฎูุงูุง ุงููุนุฑุถุฉ ููุชุขูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ErodeLand</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { List&lt;HexCell&gt; erodibleCells = ListPool&lt;HexCell&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> targetErodibleCount = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(erodibleCells.Count * (<span class="hljs-number"><span class="hljs-number">100</span></span> - erosionPercentage) * <span class="hljs-number"><span class="hljs-number">0.01f</span></span>); ListPool&lt;HexCell&gt;.Add(erodibleCells); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุง ูุฌุจ ุฃู ูุนุชุจุฑ ููุท ุงูุฎูุงูุง ุงููุนุฑุถุฉ ูุชุขูู ุงูุฃุฑุถุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     .    ,       ,     . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฎููุถ ุงูุฎููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจููุงุฑุจุฉ ุณุงุฐุฌุฉ ูููุชุฑุถ ุฃู ุงูุฎูุงุถูุง ุจุณูุทูุง ูู ุงุฑุชูุงุน ุชุขูู ุงูุฎูุงูุง ุงููุฏูุฑุฉ ูู ูุฌุนููุง ุนุฑุถุฉ ููุชุขูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฐุง ุตุญูุญูุง ุ ููููููุง ููุท ุฃุฎุฐ ุฎูุงูุง ุนุดูุงุฆูุฉ ูู ุงููุงุฆูุฉ ุ ูุชูููู ุงุฑุชูุงุนูุง ุ ุซู ุฅุฒุงูุชูุง ูู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ููุฑุฑ ูุฐู ุงูุนูููุฉ ุญุชู ูุตู ุฅูู ุงูุนุฏุฏ ุงููุทููุจ ูู ุงูุฎูุงูุง ุงููุนุฑุถุฉ ููุชุขูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> targetErodibleCount = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(erodibleCells.Count * (<span class="hljs-number"><span class="hljs-number">100</span></span> - erosionPercentage) * <span class="hljs-number"><span class="hljs-number">0.01f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (erodibleCells.Count &gt; targetErodibleCount) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, erodibleCells.Count); HexCell cell = erodibleCells[index]; cell.Elevation -= <span class="hljs-number"><span class="hljs-number">1</span></span>; erodibleCells.Remove(cell); } ListPool&lt;HexCell&gt;.Add(erodibleCells);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุน ุงูุจุญุซ ุงููุทููุจ </font></font><code>erodibleCells.Remove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุณูููู ุจุงููุชุงุจุฉ ููู ุงูุฎููุฉ ุงูุญุงููุฉ ูู ุงููุงุฆูุฉ ุงูุฃุฎูุฑุฉ ุ ุซู ูุญุฐู ุงูุนูุตุฑ ุงูุฃุฎูุฑ. </font><font style="vertical-align: inherit;">ูุง ุฒููุง ูุง ููุชู ุจุชุฑุชูุจูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// erodibleCells.Remove(cell); erodibleCells[index] = erodibleCells[erodibleCells.Count - 1]; erodibleCells.RemoveAt(erodibleCells.Count - 1);</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/50e/050/66c/50e05066c444e6854c622b865fde2726.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/14d/fca/6b4/14dfca6b41ce23cdeb3e5fc4d5307eba.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุฐุงุฌุฉ ุงูุฎูุงุถ 0 ูช ู 100 ูช ูู ุงูุฎูุงูุง ุงููุนุฑุถุฉ ููุชุขูู ุ ุฎุฑูุทุฉ ุงูุจุฐูุฑ 1957632474.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุจุน ุงูุชุขูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญ ููุง ููุฌูุง ุงูุณุงุฐุฌ ุจุชุทุจูู ุงูุชุขูู ุ ูููู ููุณ ุจุงูุฏุฑุฌุฉ ุงูุตุญูุญุฉ. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูุฃู ุงูุฎููุฉ ุจุนุฏ ุงูุฎูุงุถ ูุงุญุฏ ูู ุงูุงุฑุชูุงุน ูููู ุฃู ุชุธู ุนุฑุถุฉ ููุชุขูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ูุฒูู ุฎููุฉ ูู ุงููุงุฆูุฉ ุฅูุง ุนูุฏูุง ูุง ุชููู ุนุฑุถุฉ ููุชุขูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsErodible(cell)) { erodibleCells[index] = erodibleCells[erodibleCells.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>]; erodibleCells.RemoveAt(erodibleCells.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/281/0a9/779/2810a9779b056865ad4490f9b00fa50f.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุขูู 100 ูช ูุน ุงูุญูุงุธ ุนูู ุงูุฎูุงูุง ุงููุนุฑุถุฉ ููุชุขูู ูู ุงููุงุฆูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ูุญุตู ุนูู ุชุขูู ุฃููู ุจูุซูุฑ ุ ูููู ุนูุฏ ุงุณุชุฎุฏุงู 100 ูช ูุง ุฒููุง ูุง ูุชุฎูุต ูู ุฌููุน ุงูููุญุฏุฑุงุช. </font><font style="vertical-align: inherit;">ูุงูุณุจุจ ูู ุฃูู ุจุนุฏ ุชูููู ุงุฑุชูุงุน ุงูุฎููุฉ ุ ูุฏ ูุตุจุญ ุฃุญุฏ ุฌูุฑุงููุง ุนุฑุถุฉ ููุชุขูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููุชูุฌุฉ ูุฐูู ุ ูุฏ ูููู ูุฏููุง ุฎูุงูุง ุฃูุซุฑ ุนุฑุถุฉ ููุชุขูู ููุง ูุงูุช ุนููู ูู ุงูุฃุตู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฎูุถ ุงูุฎููุฉ ุ ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุฌููุน ุฌูุฑุงููุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงููุง ุงูุขู ุนุฑุถุฉ ููุชุขูู ุ ููููู ููุณูุง ูุฏุฑุฌูู ูู ุงููุงุฆูุฉ ุจุนุฏ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุฅุถุงูุชูู ููุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsErodible(cell)) { erodibleCells[index] = erodibleCells[erodibleCells.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>]; erodibleCells.RemoveAt(erodibleCells.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( neighbor &amp;&amp; IsErodible(neighbor) &amp;&amp; !erodibleCells.Contains(neighbor) ) { erodibleCells.Add(neighbor); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b2a/894/ed5/b2a894ed5274286b00046050963388f5.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุญุฐู ุฌููุน ุงูุฎูุงูุง ุงููุชุขููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูููุฐ ุงููุซูุฑ ูู ุงูุฃุฑุถ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููู ุฃู ุชุณุชูุฑ ุนูููุฉ ุงูุชุขูู ุญุชู ุชุฎุชูู ุฌููุน ุงูููุญุฏุฑุงุช. ูุฐุง ูุคุซุฑ ุจุดูู ูุจูุฑ ุนูู ุงูุฃุฑุถ. ุงุฎุชูุช ูุนุธู ูุชูุฉ ุงูุฃุฑุถ ูุญุตููุง ุนูู ุฃูู ุจูุซูุฑ ูู ุงููุณุจุฉ ุงููุฆููุฉ ููุฃุฑุถ ุงููุทููุจุฉ. ุญุฏุซ ุฐูู ูุฃููุง ูุฒูู ุงูุฃุฑุถ ูู ุงูุฎุฑูุทุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุขูู ุงูุญูููู ูุง ูุฏูุฑ ุงููุงุฏุฉ. ุชุฃุฎุฐูุง ูู ููุงู ูุชุถุนูุง ูู ููุงู ุขุฎุฑ. ูููููุง ุฃู ููุนู ููุณ ุงูุดูุก. ูุน ุงูุฎูุงุถ ูู ุฎููุฉ ูุงุญุฏุฉ ุ ูุฌุจ ุนูููุง ุชุฑุจูุฉ ุฃุญุฏ ุฌูุฑุงููุง. ูู ุงููุงูุน ุ ูุชู ููู ูุณุชูู ูุงุญุฏ ูู ุงูุงุฑุชูุงุน ุฅูู ุฎููุฉ ุฃูู. ูุคุฏู ุฐูู ุฅูู ุชูููุฑ ุฅุฌูุงูู ุงุฑุชูุงุนุงุช ุงูุฎุฑูุทุฉ ุ ูุน ุชูุนูููุง ุจุจุณุงุทุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญููู ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ููุงู ููู ููุชุฌุงุช ุงูุชุขูู. </font><font style="vertical-align: inherit;">ุณูููู ูุฐุง ูุฏููุง ููุชุขูู. </font><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ุทุฑููุฉ ูุชุญุฏูุฏ ููุทุฉ ุงููุฏู ููุฎููุฉ ุงูุชู ุณูุชู ุชุขูููุง. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฐู ุงูุฎููุฉ ุชุญุชูู ุนูู ูุงุตู ุ ุณูููู ูู ุงูููุทูู ุชุญุฏูุฏ ุงูุฎููุฉ ุงูููุฌูุฏุฉ ุชุญุช ูุฐุง ุงููุงุตู ููุฏู. </font><font style="vertical-align: inherit;">ููู ุงูุฎููุฉ ุงููุนุฑุถุฉ ููุชุขูู ูููู ุฃู ูููู ููุง ุนุฏุฉ ููุงุตู ุ ูุฐูู ุณูู ูุชุญูู ูู ุฌููุน ุงูุฌูุฑุงู ููุถุน ุฌููุน ุงููุฑุดุญูู ุนูู ูุงุฆูุฉ ูุคูุชุฉ ุ ุซู ุณูุฎุชุงุฑ ูุงุญุฏุฉ ูููู ุจุดูู ุนุดูุงุฆู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetErosionTarget</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { List&lt;HexCell&gt; candidates = ListPool&lt;HexCell&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> erodibleElevation = cell.Elevation - <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor &amp;&amp; neighbor.Elevation &lt;= erodibleElevation) { candidates.Add(neighbor); } } HexCell target = candidates[Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, candidates.Count)]; ListPool&lt;HexCell&gt;.Add(candidates); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> target; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>ErodeLand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุฏ ุงูุฎููุฉ ุงููุฏู ูุจุงุดุฑุฉ ุจุนุฏ ุชุญุฏูุฏ ุฎููุฉ ุงูุชุขูู. </font><font style="vertical-align: inherit;">ุซู ูููุต ููุฒูุฏ ุงุฑุชูุงุนุงุช ุงูุฎููุฉ ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ุนูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุฏ ุชุตุจุญ ุงูุฎููุฉ ุงููุณุชูุฏูุฉ ููุณูุง ุนุฑุถุฉ ููุชุขูู ุ ูููู ูุชู ุญู ูุฐุง ุงููุถุน ุนูุฏูุง ูุชุญูู ูู ุฌูุฑุงู ุงูุฎููุฉ ุงููุชุขููุฉ ุญุฏูุซูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell cell = erodibleCells[index]; HexCell targetCell = GetErosionTarget(cell); cell.Elevation -= <span class="hljs-number"><span class="hljs-number">1</span></span>; targetCell.Elevation += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsErodible(cell)) { erodibleCells[index] = erodibleCells[erodibleCells.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>]; erodibleCells.RemoveAt(erodibleCells.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ุฑูุนูุง ุงูุฎููุฉ ุงููุณุชูุฏูุฉ ุ ููุฏ ูุง ูุชุนุฑุถ ุฌุฒุก ูู ุฌูุฑุงู ูุฐู ุงูุฎููุฉ ููุชุขูู. </font><font style="vertical-align: inherit;">ูู ุงูุถุฑูุฑู ุงูุงูุชูุงู ุญูููู ูุงูุชุญูู ููุง ุฅุฐุง ูุงููุง ุนุฑุถุฉ ููุชุขูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฐูู ุ ููููู ูู ุงููุงุฆูุฉ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุฅุฒุงูุชูู ูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); โฆ } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = targetCell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( neighbor &amp;&amp; !IsErodible(neighbor) &amp;&amp; erodibleCells.Contains(neighbor) ) { erodibleCells.Remove(neighbor); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d71/84f/0b4/d7184f0b4a2dd34853b56e0024ef2b6c.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุขูู 100 ูช ูุน ุงูุญูุงุธ ุนูู ูุชูุฉ ุงูุฃุฑุถ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ููุชุขูู ุงูุขู ุฃู ูุฎูู ุงูุชุถุงุฑูุณ ุจุดูู ุฃูุถู ุจูุซูุฑ ุ ููุฎูุถ ุจุนุถ ุงูููุงุทู ููุฑูุน ููุงุทู ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ูููู ุฃู ุชุฒูุฏ ูุชูุฉ ุงูุฃุฑุถ ูุชุถูู. </font><font style="vertical-align: inherit;">ูุฐุง ูููู ุฃู ูุบูุฑ ุงููุณุจุฉ ุงููุฆููุฉ ููุฃุฑุถ ุจูุณุจุฉ ุนุฏุฉ ูู ุงููุงุฆุฉ ูู ุงุชุฌุงู ุฃู ุขุฎุฑ ุ ูููู ูุงุฏุฑุง ูุง ุชุญุฏุซ ุงูุญุฑุงูุงุช ุฎุทูุฑุฉ. </font><font style="vertical-align: inherit;">ุฃู ุฃูู ูููุง ุฒุงุฏ ุชุขูู ุงูุชุฑุจุฉ ุ ูู ุงูุชุญูู ูู ุงููุณุจุฉ ุงููุฆููุฉ ุงููุงุชุฌุฉ ูู ุงูุฃุฑุถ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุขูู ูุนุฌู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ูุณูุง ุจุญุงุฌุฉ ุฅูู ุงูุงูุชูุงู ุญููุง ุจูุงุนููุฉ ุฎูุงุฑุฒููุฉ ุงูุชุขูู ุ ูููููุง ุฅุฌุฑุงุก ุชุญุณููุงุช ุจุณูุทุฉ ุนูููุง. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ูุงุญุธ ุฃููุง ูุชุญูู ุจุดูู ุตุฑูุญ ููุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุงูุชู ูููุง ุจุชุขูููุง ูููู ุฃู ุชุชุขูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุฅููุง ูู ุงูุฃุณุงุณ ูุฒููู ูู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููููู ุชุฎุทู ุงูุชุญูู ูู ูุฐู ุงูุฎููุฉ ุนูุฏ ุนุจูุฑ ุฌูุฑุงู ุงูุฎููุฉ ุงููุณุชูุฏูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = targetCell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( neighbor &amp;&amp; neighbor != cell &amp;&amp; !IsErodible(neighbor) &amp;&amp; erodibleCells.Contains(neighbor) ) { erodibleCells.Remove(neighbor); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูููุง ุ ููุง ุจุญุงุฌุฉ ุฅูู ุงูุชุญูู ูู ุฌูุฑุงู ุงูุฎููุฉ ุงููุณุชูุฏูุฉ ููุท ุนูุฏูุง ูููู ููุงู ูุงุตู ุจููููุง ุ ูููู ูุฐุง ููุณ ุถุฑูุฑููุง ุงูุขู. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ููุท ุนูุฏูุง ูููู ุงูุฌุงุฑ ุงูุขู ุฃุนูู ุจุฎุทูุฉ ูู ุงูุฎููุฉ ุงููุณุชูุฏูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููู ุงููุคูุฏ ุฃู ูููู ุงูุฌุงุฑ ูู ุงููุงุฆูุฉ ุ ูุฐูู ูุง ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุฐูู ุ ุฃู ูููููุง ุชุฎุทู ุงูุจุญุซ ุบูุฑ ุงูุถุฑูุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell neighbor = targetCell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( neighbor &amp;&amp; neighbor != cell &amp;&amp; neighbor.Elevation == targetCell.Elevation + <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; !IsErodible(neighbor) <span class="hljs-comment"><span class="hljs-comment">// &amp;&amp; erodibleCells.Contains(neighbor) ) { erodibleCells.Remove(neighbor); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูุซูุง ุ ูููููุง ุงุณุชุฎุฏุงู ุฎุฏุนุฉ ููุงุซูุฉ ุนูุฏ ุงูุชุญูู ูู ุฌูุฑุงู ุงูุฎููุฉ ุงููุนุฑุถุฉ ููุชุขูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ุงูุขู ุฌุฑู ุจููููุง ุ ูุฅู ุงูุฌุงุฑ ุนุฑุถุฉ ููุชุขูู. </font><font style="vertical-align: inherit;">ููุนุฑูุฉ ุฐูู ุ ูุณูุง ุจุญุงุฌุฉ ููุงุชุตุงู </font></font><code>IsErodible</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( neighbor &amp;&amp; neighbor.Elevation == cell.Elevation + <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; <span class="hljs-comment"><span class="hljs-comment">// IsErodible(neighbor) &amp;&amp; !erodibleCells.Contains(neighbor) ) { erodibleCells.Add(neighbor); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุง ุฒููุง ุจุญุงุฌุฉ ุฅูู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุงููุณุชูุฏูุฉ ุนุฑุถุฉ ููุชุขูู ุ ูููู ุงูุฏูุฑุฉ ุงูููุถุญุฉ ุฃุนูุงู ูู ุชุนุฏ ุชูุนู ุฐูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููู ุจูุฐุง ุจุดูู ุตุฑูุญ ููุฎููุฉ ุงููุณุชูุฏูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsErodible(cell)) { erodibleCells[index] = erodibleCells[erodibleCells.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>]; erodibleCells.RemoveAt(erodibleCells.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsErodible(targetCell) &amp;&amp; !erodibleCells.Contains(targetCell)) { erodibleCells.Add(targetCell); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุชุทุจูู ุงูุชุนุฑูุฉ ุจุณุฑุนุฉ ูุงููุฉ ูุจุงููุณุจุฉ ุงููุฆููุฉ ุงููุทููุจุฉ ุจุงููุณุจุฉ ุฅูู ุงูุนุฏุฏ ุงูุฃููู ููููุญุฏุฑุงุช ุงูุชู ุชู ุฅูุดุงุคูุง. </font><font style="vertical-align: inherit;">ูุงุญุธ ุฃูู ูุธุฑูุง ูุฃููุง ูููุง ุจุชุบููุฑ ุงูููุงู ุงูุฐู ุชูุช ููู ุฅุถุงูุฉ ุงูุฎููุฉ ุงููุณุชูุฏูุฉ ุฅูู ุงููุงุฆูุฉ ุงููุนุฑุถุฉ ููุชุขูู ุจุดูู ุทููู ุ ููุฏ ุชุบูุฑุช ุงููุชูุฌุฉ ููููุงู ุนู ุงููุชูุฌุฉ ูุจู ุงูุชุญุณููุงุช.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4a6/a0d/71e/4a6a0d71eea3d1ef119b2f4f984a9b99.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/28d/979/289/28d9792899367fdccb50f36b79801935.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7af/921/6af/7af9216af64111dbe0c15898db4560ce.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/31b/7d9/ae5/31b7d9ae505297269bbd5442fdff17c8.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุขูู 25ูช ู 50ูช ู 75ูช ู 100ูช. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃูุถูุง ุฃูู ุนูู ุงูุฑุบู ูู ุงูุดูู ุงููุชุบูุฑ ููุณุงุญู ุ ูุฅู ุงููููู ูู ูุชุบูุฑ ุจุดูู ุฃุณุงุณู. </font><font style="vertical-align: inherit;">ุนุงุฏุฉ ูุง ุชุธู ุงููุชู ุงูุฃุฑุถูุฉ ูุชุตูุฉ ุฃู ูููุตูุฉ. </font><font style="vertical-align: inherit;">ููุท ุงูุฌุฒุฑ ุงูุตุบูุฑุฉ ูููู ุฃู ุชุบุฑู ุจุงููุงูู. </font><font style="vertical-align: inherit;">ุชู ุชุฎููู ุชูุงุตูู ุงูุฅุบุงุซุฉ ุ ููู ุงูุฃุดูุงู ุงูุนุงูุฉ ุชุจูู ููุง ูู. </font><font style="vertical-align: inherit;">ูุฏ ูุฎุชูู ุงูููุตู ุงูุถูู ุฃู ูููู ููููุงู. </font><font style="vertical-align: inherit;">ูุฏ ุชููุฃ ูุฌูุฉ ุตุบูุฑุฉ ุฃู ุชุชูุณุน ููููุงู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฅู ุงูุชุขูู ูู ููุชุตู ุจููุฉ ุงูููุงุทู ุงูููุณูุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2cd/c53/824/2cdc53824832438c924e2832d9759b06.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุฒุงู ุฃุฑุจุน ููุงุทู ูุชุขููุฉ ุชูุงููุง ูููุตูุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 25: ุฏูุฑุฉ ุงูููุงู </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฑุถ ุจูุงูุงุช ุงูุฎุฑูุทุฉ ุงูุฃูููุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุดูู ููุงุฎ ุงูุฎูุงูุง. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ูุญุงูุงุฉ ุฌุฒุฆูุฉ ูุฏูุฑุฉ ุงูููุงู. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐุง ุงูุฌุฒุก ุณูุถูู ุงูุฑุทูุจุฉ ุนูู ุงูุฃุฑุถ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุฅูุดุงุก ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูู Unity 2017.3.0.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2ae/fbe/dae/2aefbedae7b2c65cd86bbd2b4ccc3050.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุฏูุฑุฉ ุงูููุงู ูุชุญุฏูุฏ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุบููู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ูุฐู ุงูููุทุฉ ุ ุชุบูุฑุช ุฎูุงุฑุฒููุฉ ุฅูุดุงุก ุงูุฎุฑูุทุฉ ุงุฑุชูุงุน ุงูุฎููุฉ ููุท. </font><font style="vertical-align: inherit;">ูุงู ุงูุงุฎุชูุงู ุงูุฃูุจุฑ ุจูู ุงูุฎูุงูุง ูู ูุง ุฅุฐุง ูุงูุช ููู ุฃู ุชุญุช ุงููุงุก. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูููููุง ุชุญุฏูุฏ ุฃููุงุน ูุฎุชููุฉ ูู ุงูุชุถุงุฑูุณ ุ ุฅูุง ุฃููุง ูุฌุฑุฏ ุชุตูุฑ ุจุณูุท ููุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ุณูููู ูู ุงูุฃูุถู ุชุญุฏูุฏ ุฃููุงุน ุงูุฅุบุงุซุฉ ุ ุจุงููุธุฑ ุฅูู ุงูููุงุฎ ุงููุญูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฎ ุงูุฃุฑุถ ูุธุงู ูุนูุฏ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฅูุดุงุก ูุญุงูุงุฉ ููุงุฎูุฉ ูุงูุนูุฉ. </font><font style="vertical-align: inherit;">ุณูุญุชุงุฌ ุฅูู ุดูุก ูุจุฏู ุทุจูุนููุง ุจูุง ููู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ุฃูู ุฏูุฑุฉ ูู ุงูููุงุฎ ูู ุฏูุฑุฉ ุงูููุงู ุ ูุฃู ุงููุจุงุชุงุช ูุงูุญููุงูุงุช ุชุญุชุงุฌ ุฅูู ุงููุงุก ุงูุณุงุฆู ููุจูุงุก ุนูู ููุฏ ุงูุญูุงุฉ. </font><font style="vertical-align: inherit;">ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูููุฉ ุฌุฏูุง ุฃูุถูุง ุ ูููู ูู ุงูููุช ุงูุญุงูู ุ ูุฑูุฒ ุนูู ุงููุงุก ุ ููุชุฑู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุงูุนุงูููุฉ ุซุงุจุชุฉ ูุชุบูุฑ ุงูุฑุทูุจุฉ ููุท.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุตู ุฏูุฑุฉ ุงููุงุก ุญุฑูุฉ ุงููุงุก ูู ุงูุจูุฆุฉ. </font><font style="vertical-align: inherit;">ุจุจุณุงุทุฉ ุ ุชุชุจุฎุฑ ุงูุฃุญูุงุถ ุ ููุง ูุคุฏู ุฅูู ุชูููู ุงูุณุญุจ ุงูุชู ุชูุทุฑ ุ ูุงูุชู ุชุชุฏูู ูุฑุฉ ุฃุฎุฑู ุฅูู ุงูุฃุญูุงุถ. </font><font style="vertical-align: inherit;">ููุงู ุงูุนุฏูุฏ ูู ุงูุฌูุงูุจ ุงูุฃุฎุฑู ูููุธุงู ุ ูููู ูุญุงูุงุฉ ูุฐู ุงูุฎุทูุงุช ูุฏ ุชููู ูุงููุฉ ุจุงููุนู ูุฅูุดุงุก ุชูุฒูุน ุทุจูุนู ุงููุธูุฑ ููููุงู ุนูู ุงูุฎุฑูุทุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุตูุฑ ุงูุจูุงูุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุฃู ูุจุฏุฃ ูู ูุฐู ุงููุญุงูุงุฉ ุ ุณูููู ูู ุงููููุฏ ุฑุคูุฉ ุงูุจูุงูุงุช ุฐุงุช ุงูุตูุฉ ูุจุงุดุฑุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุณูููู ุจุชุบููุฑ ุชุธููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุถุงุฑูุณ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุถูู ุฎุงุตูุฉ ูุงุจูุฉ ููุชุญููู ุฅูููุง ุ ูุงูุชู ูููู ุชุญููููุง ุฅูู ูุถุน ุชุตูุฑ ุงูุจูุงูุงุช ุ ูุงูุฐู ูุนุฑุถ ุจูุงูุงุช ุงูุฎุฑูุทุฉ ุงูุฃูููุฉ ุจุฏูุงู ูู ููุงุฏ ุงูุฅุบุงุซุฉ ุงููุนุชุงุฏุฉ. </font><font style="vertical-align: inherit;">ูููู ุชูููุฐ ุฐูู ุจุงุณุชุฎุฏุงู ุฎุงุตูุฉ ุชุนููู ูุน ุณูุฉ ูุงุจูุฉ ููุชุญููู ุชุญุฏุฏ ุงููููุฉ ุงูุฃุณุงุณูุฉ. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณุชุธูุฑ ูู ููุชุด ุงูููุงุฏ ูุนูู ูุชุญูู ูู ุชุนุฑูู ุงููููุฉ ุงูุฑุฆูุณูุฉ. </font><font style="vertical-align: inherit;">ุงุณู ุงูุนูุงุฑ ููุณู ููุณ ูููุง ุ ูุญู ููุชููู ููุท ุจุงููููุฉ ุงูุฑุฆูุณูุฉ. </font><font style="vertical-align: inherit;">ูุญู ูุณุชุฎุฏู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHOW_MAP_DATA</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"> <span class="hljs-section"><span class="hljs-section">Properties</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">_Color</span></span> (<span class="hljs-string"><span class="hljs-string">"Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) _MainTex (<span class="hljs-string"><span class="hljs-string">"Terrain Texture Array"</span></span>, 2DArray) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} <span class="hljs-attribute"><span class="hljs-attribute">_GridTex</span></span> (<span class="hljs-string"><span class="hljs-string">"Grid Texture"</span></span>, 2D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} <span class="hljs-attribute"><span class="hljs-attribute">_Glossiness</span></span> (<span class="hljs-string"><span class="hljs-string">"Smoothness"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span> _Specular (<span class="hljs-string"><span class="hljs-string">"Specular"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>) _BackgroundColor (<span class="hljs-string"><span class="hljs-string">"Background Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>) [Toggle(SHOW_MAP_DATA)] _ShowMapData (<span class="hljs-string"><span class="hljs-string">"Show Map Data"</span></span>, Float) = <span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/452/32b/3e0/45232b3e0a72da1320457492c006613c.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุงูุชุจุฏูู ูุนุฑุถ ุจูุงูุงุช ุงูุฎุฑูุทุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูุธููุฉ ุชุธููู ูุชูููู ุฏุนู ุงููููุงุช ุงูุฑุฆูุณูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs cs"> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> multi_compile _ GRID_ON #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> multi_compile _ HEX_MAP_EDIT_MODE #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> shader_feature SHOW_MAP_DATA</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุฌุนููุง ุชุนุฑุถ ุชุนููู ูุงุญุฏ ุ ููุง ูู ุงูุญุงู ูุน ุจููุฉ ุจูุงูุงุช ุงูุฅุบุงุซุฉ. </font><font style="vertical-align: inherit;">ูุชูููุฐ ุฐูู ุ ุณูุถูู </font></font><code>Input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููุงู </font><font style="vertical-align: inherit;">ุฅูู ุงูุจููุฉ </font></font><code>mapData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุชู ุชุญุฏูุฏ ุงููููุฉ ุงูุฑุฆูุณูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">struct</span></span> Input { <span class="hljs-attribute"><span class="hljs-attribute">float4</span></span> color : COLOR; <span class="hljs-attribute"><span class="hljs-attribute">float3</span></span> worldPos; <span class="hljs-attribute"><span class="hljs-attribute">float3</span></span> terrain; <span class="hljs-attribute"><span class="hljs-attribute">float4</span></span> visibility; <span class="hljs-comment"><span class="hljs-comment">#if defined(SHOW_MAP_DATA) float mapData; #endif };</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุฑูุงูุฌ ุงูููุฉ ุ ูุณุชุฎุฏู ุงูููุงุฉ Z ููุฐู ุงูุฎูุงูุง ูููุฆูุง </font></font><code>mapData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุจูู ุงูุฎูุงูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs cs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vert</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">inout appdata_full v, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Input data</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(SHOW_MAP_DATA) data.mapData = cell0.z * v.color.x + cell1.z * v.color.y + cell2.z * v.color.z; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุนุฑุถ ุจูุงูุงุช ุงูุฎููุฉ ุ ุงุณุชุฎุฏููุง ูุจุงุดุฑุฉู ูุฌุฒุก ูู ุงูุจูุงุถ ุจุฏูุงู ูู ุงูููู ุงููุนุชุงุฏ. </font><font style="vertical-align: inherit;">ุงุถุฑุจูุง ูู ุงูุดุจูุฉ ุญุชู ุชุธู ุงูุดุจูุฉ ููุฏ ุงูุชุดุบูู ุนูุฏ ุนุฑุถ ุงูุจูุงูุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandardSpecular o) { โฆ o.Albedo = c.rgb * grid * _Color * explored; #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> defined(SHOW_MAP_DATA) o.Albedo = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.mapData * grid; #endif โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงูุน ูููู ุงูุจูุงูุงุช ุฅูู ุชุธููู. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุฅูู </font></font><code>HexCellShaderData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุชู ุชูุชุจ ุดูุฆูุง ุฅูู ููุงุฉ ุจูุงูุงุช ุงููููุณ ุงูุฃุฒุฑู. </font><font style="vertical-align: inherit;">ุงูุจูุงูุงุช ุนุจุงุฑุฉ ุนู ูููุฉ ุนุงุฆูุฉ ูุงุญุฏุฉ ุชูุชุตุฑ ุนูู 0-1.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetMapData</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data</span></span></span><span class="hljs-function">)</span></span> { cellTextureData[cell.Index].b = data &lt; <span class="hljs-number"><span class="hljs-number">0f</span></span> ? (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)<span class="hljs-number"><span class="hljs-number">0</span></span> : (data &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span> ? (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)(data * <span class="hljs-number"><span class="hljs-number">255f</span></span>) : (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)<span class="hljs-number"><span class="hljs-number">255</span></span>); enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุคุซุฑ ูุฐุง ุงููุฑุงุฑ ุนูู ูุธุงู ุงูุจุญุซ. </font><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงู ูููุฉ ุจูุงูุงุช ุงูููุงุฉ ุงูุฒุฑูุงุก 255 ููุฅุดุงุฑุฉ ุฅูู ุฃู ุฑุคูุฉ ุงูุฎููุฉ ููุฏ ุงูุงูุชูุงู. </font><font style="vertical-align: inherit;">ููู ูุณุชูุฑ ูุฐุง ุงููุธุงู ูู ุงูุนูู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูููุฉ ุงูุจุงูุช 254 ูุญุฏ ุฃูุตู. ูุงุญุธ ุฃู ุญุฑูุฉ ุงูููุฑุฒุฉ ุณุชูุญู ุฌููุน ุจูุงูุงุช ุงูุจุทุงูุฉ ุ ููู ูุฐุง ููุงุณุจูุง ุ ูุฃููุง ุชูุณุชุฎุฏู ูุชุตุญูุญ ุฃุฎุทุงุก ุฅูุดุงุก ุงูุจุทุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> cellTextureData[cell.Index].b = data &lt; <span class="hljs-number"><span class="hljs-number">0f</span></span> ? (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)<span class="hljs-number"><span class="hljs-number">0</span></span> : (data &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span> ? (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)(data * <span class="hljs-number"><span class="hljs-number">254f</span></span>) : (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)<span class="hljs-number"><span class="hljs-number">254</span></span>);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ ุจููุณ ุงูุงุณู ููู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณุชููู ุงูุทูุจ ุฅูู ุจูุงูุงุช ุชุธููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetMapData</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data</span></span></span><span class="hljs-function">)</span></span> { ShaderData.SetMapData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, data); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุญูู ูู ุชุดุบูู ุงูููุฏ ุ ูููู ุจุชุบููุฑู </font></font><code>HexMapGenerator.SetTerrainType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ูููู ุจุชุนููู ุจูุงูุงุช ูู ุฎููุฉ ุนูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุชุตูุฑ ุงูุงุฑุชูุงุน ุงููุญูู ูู ุนุฏุฏ ุตุญูุญ ุฅูู ุชุนููู ูู ุงููุงุตู ุงูุฒููู 0-1. </font><font style="vertical-align: inherit;">ูุชู ุฐูู ุนู ุทุฑูู ุทุฑุญ ุงูุญุฏ ุงูุฃุฏูู ููุงุฑุชูุงุน ูู ุงุฑุชูุงุน ุงูุฎููุฉ ุ ูุชุจูุนูุง ุจูุณูุฉ ุงูุญุฏ ุงูุฃูุตู ููุงุฑุชูุงุน ูุทุฑูุญูุง ููู ุงูุญุฏ ุงูุฃุฏูู. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฌุนู ุงููุงุตูุฉ ุนุงุฆูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { โฆ cell.SetMapData( (cell.Elevation - elevationMinimum) / (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(elevationMaximum - elevationMinimum) ); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุขู ุงูุชุจุฏูู ุจูู ุงูุชุถุงุฑูุณ ุงูุนุงุฏูุฉ ูุชุตูุฑ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู </font><font style="vertical-align: inherit;">ูุฑุจุน ุงูุงุฎุชูุงุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุธูุงุฑ ุจูุงูุงุช ุงูุฎุฑูุทุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุตู ูุงุฏุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุถุงุฑูุณ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/577/473/f28/577473f28d08f986124e6459a13a3714.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d60/c8a/85a/d60c8a85ae315fd509a4f6451629d8dc.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ 1208905299 ุ ุงูุชุถุงุฑูุณ ุงูุทุจูุนูุฉ ูุชุตูุฑ ุงููุฑุชูุนุงุช.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎูู ุงูููุงุฎ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุงูุงุฉ ุงูููุงุฎ ุ ูุญุชุงุฌ ุฅูู ุชุชุจุน ุงูุจูุงูุงุช ุงูููุงุฎูุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุฎุฑูุทุฉ ุชุชููู ูู ุฎูุงูุง ูููุตูุฉ ุ ููู ูููุง ููุงุฎูุง ุงููุญูู. </font><font style="vertical-align: inherit;">ุฅูุดุงุก ูููู </font></font><code>ClimateData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฎุฒูู ุฌููุน ุงูุจูุงูุงุช ุฐุงุช ุงูุตูุฉ. </font><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ููููู ุฅุถุงูุฉ ุงูุจูุงูุงุช ุฅูู ุงูุฎูุงูุง ููุณูุง ุ ูููููุง ุณูุณุชุฎุฏููุง ููุท ุนูุฏ ุฅูุดุงุก ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูููู ุจุญูุธูุง ุจุดูู ูููุตู. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ูููููุง ุชุญุฏูุฏ ูุฐุง ุงููููู ุฏุงุฎูููุง </font></font><code>HexMapGenerator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุซู </font></font><code>MapRegion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูุจุฏุฃ ุจุชุชุจุน ุงูุณุญุจ ููุท ุ ูุงูุชู ูููู ุชูููุฐูุง ุจุงุณุชุฎุฏุงู ุญูู ุนุงุฆู ูุงุญุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> ClimateData { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> clouds; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุถู ูุงุฆูุฉ ูุชุชุจุน ุจูุงูุงุช ุงูููุงุฎ ูุฌููุน ุงูุฎูุงูุง. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> List&lt;ClimateData&gt; climate = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ClimateData&gt;();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุทุฑููุฉ ูุฅูุดุงุก ุฎุฑูุทุฉ ููุงุฎูุฉ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชุจุฏุฃ ุจูุณุญ ูุงุฆูุฉ ุงูููุงุทู ุงูููุงุฎูุฉ ุ ุซู ุฅุถุงูุฉ ุนูุตุฑ ูุงุญุฏ ููู ุฎููุฉ. </font><font style="vertical-align: inherit;">ุงูุจูุงูุงุช ุงูููุงุฎูุฉ ุงูุฃูููุฉ ูู ุจุจุณุงุทุฉ ุตูุฑ ุ ููููู ุชุญููู ุฐูู ุจุงุณุชุฎุฏุงู ูููุดุฆ ููุงุณู </font></font><code>ClimateData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateClimate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { climate.Clear(); ClimateData initialData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClimateData(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { climate.Add(initialData); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุชููุฆุฉ ุงูููุงุฎ ุจุนุฏ ุงูุชุนุฑุถ ูุชุขูู ุงูุชุฑุจุฉ ูุจู ุชุญุฏูุฏ ุฃููุงุน ุงูุฅุบุงุซุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุญุฏุซ ุงูุชุนุฑูุฉ ุจุดูู ุฑุฆูุณู ุจุณุจุจ ุญุฑูุฉ ุงูููุงุก ูุงููุงุก ุ ุงูุชู ูู ุฌุฒุก ูู ุงูููุงุฎ ุ ููููุง ูู ูุญุงูู ุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { โฆ CreateRegions(); CreateLand(); ErodeLand(); CreateClimate(); SetTerrainType(); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุบููุฑ </font></font><code>SetTerrainType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ูุชููู ูู ุฑุคูุฉ ุจูุงูุงุช ุงูุณุญุงุจุฉ ุจุฏูุงู ูู ุงุฑุชูุงุน ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ุณุชุจุฏู ูุจุทุงูุฉ ุณูุฏุงุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { โฆ cell.SetMapData(climate[i].clouds); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบูุฑ ุงูููุงุฎ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุฃููู ูู ูุญุงูุงุฉ ุงูููุงุฎ ูู ุงูุชุจุฎุฑ. </font><font style="vertical-align: inherit;">ูุง ููุฏุงุฑ ุงููุงุก ุงูุฐู ูุฌุจ ุฃู ูุชุจุฎุฑุ </font><font style="vertical-align: inherit;">ูููุชุญูู ูู ูุฐู ุงููููุฉ ุจุงุณุชุฎุฏุงู ุดุฑูุท ุงูุชูุฑูุฑ. </font><font style="vertical-align: inherit;">ุงููููุฉ 0 ุชุนูู ุนุฏู ุงูุชุจุฎุฑ ุ 1 - ุงูุชุจุฎุฑ ุงูุฃูุตู. </font><font style="vertical-align: inherit;">ุงูุชุฑุงุถููุง ุ ูุณุชุฎุฏู 0.5.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> evaporation = <span class="hljs-number"><span class="hljs-number">0.5f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6af/d8e/ae8/6afd8eae8a1bbb6be361c29d32cc5b99.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูู ุงูุชุจุฎุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ุทุฑููุฉ ุฃุฎุฑู ุฎุงุตุฉ ูุชุดููู ููุงุฎ ุฎููุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ูุนุทููุง ูุคุดุฑ ุงูุฎููุฉ ููุนููุฉ ููุณุชุฎุฏููุง ููุญุตูู ุนูู ุงูุฎููุฉ ุงูููุงุจูุฉ ูุจูุงูุงุช ุงูููุงุฎ ุงูุฎุงุตุฉ ุจูุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุชุญุช ุงููุงุก ุ ููุญู ูุชุนุงูู ูุน ุฎุฒุงู ูุฌุจ ุฃู ูุชุจุฎุฑ. </font><font style="vertical-align: inherit;">ูููู ุนูู ุงูููุฑ ุจุชุญููู ุงูุจุฎุงุฑ ุฅูู ุณุญุจ (ูุชุฌุงูููู ููุงุท ุงูุชูุซู ูุงูุชูุงุซู) ุ ูุฐูู ุณูุถูู ุงูุชุจุฎุฑ ูุจุงุดุฑุฉ ุฅูู ูููุฉ ุณุญุจ ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ุงูุงูุชูุงุก ูู ุฐูู ุ ุงูุณุฎ ุจูุงูุงุช ุงูููุงุฎ ุฅูู ุงููุงุฆูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EvolveClimate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cellIndex</span></span></span><span class="hljs-function">)</span></span> { HexCell cell = grid.GetCell(cellIndex); ClimateData cellClimate = climate[cellIndex]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IsUnderwater) { cellClimate.clouds += evaporation; } climate[cellIndex] = cellClimate; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ููู ุฎููุฉ ูู </font></font><code>CreateClimate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateClimate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { EvolveClimate(i); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฐุง ูุง ูููู. </font><font style="vertical-align: inherit;">ูุฅูุดุงุก ูุญุงูุงุฉ ูุนูุฏุฉ ุ ูุญุชุงุฌ ุฅูู ุชุดููู ููุงุฎ ุงูุฎูุงูุง ุนุฏุฉ ูุฑุงุช. </font><font style="vertical-align: inherit;">ูููุง ูููุง ุจูุฐุง ุ ูููุง ูุงูุช ุงููุชูุฌุฉ ุฃูุถู. </font><font style="vertical-align: inherit;">ุฏุนูุง ููุท ูุฎุชุงุฑ ูููุฉ ุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ุฃุณุชุฎุฏู 40 ุฏูุฑุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cycle = <span class="hljs-number"><span class="hljs-number">0</span></span>; cycle &lt; <span class="hljs-number"><span class="hljs-number">40</span></span>; cycle++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { EvolveClimate(i); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฐ ุฐูู ุงูุญูู ููุญู ูุฒูุฏ ููุท ูู ูููุฉ ุงูุณุญุจ ููู ุงูุฎูุงูุง ุงููุบููุฑุฉ ุจุงููุงุก ุ ููุชูุฌุฉ ูุฐูู ูุญุตู ุนูู ุฃุฑุถ ุณูุฏุงุก ูุฎุฒุงูุงุช ุจูุถุงุก. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3e7/e1c/5dc/3e7e1c5dc9ce75197a94e8ffcd6d8275.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจุฎุฑ ููู ุงููุงุก.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุงุซุฑ ุงูุณุญุจ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชููู ุงูุบููู ุจุงุณุชูุฑุงุฑ ูู ููุงู ูุงุญุฏ ุ ุฎุงุตุฉ ุนูุฏูุง ูุชุจุฎุฑ ุงููุฒูุฏ ูุงููุฒูุฏ ูู ุงููุงุก. </font><font style="vertical-align: inherit;">ูุฑู ุงูุถุบุท ูุฌุนู ุงูููุงุก ูุชุญุฑู ุ ูุงูุฐู ูุชุฌูู ูู ุดูู ุฑูุญ ุ ููุง ูุฌุนู ุงูุบููู ุชุชุญุฑู ุฃูุถูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ููุงู ุงุชุฌุงู ููููู ููุฑูุงุญ ุ ูุณุชุชูุฒุน ุบููู ุงูุฎูุงูุง ูู ุงููุชูุณุท โโุจุงูุชุณุงูู ูู ุฌููุน ุงูุงุชุฌุงูุงุช ุ ูุณุชุธูุฑ ูู ุงูุฎูุงูุง ุงููุฌุงูุฑุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ุฅูุดุงุก ุณุญุจ ุฌุฏูุฏุฉ ูู ุงูุฏูุฑุฉ ุงูุชุงููุฉ ุ ุฏุนูุง ููุฒุน ุฌููุน ุงูุณุญุจ ูู ุงูุฎููุฉ ุฅูู ุฌูุฑุงููุง. </font><font style="vertical-align: inherit;">ุฃู ุฃู ูู ุฌุงุฑ ูุญุตู ุนูู ุณุฏุณ ูู ุณุญุจ ุงูุฎููุฉ ุ ูุจุนุฏ ุฐูู ูููู ููุงู ุงูุฎูุงุถ ูุญูู ุฅูู ุงูุตูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IsUnderwater) { cellClimate.clouds += evaporation; } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cloudDispersal = cellClimate.clouds * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">6f</span></span>); cellClimate.clouds = <span class="hljs-number"><span class="hljs-number">0f</span></span>; climate[cellIndex] = cellClimate;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฅุถุงูุฉ ุงูุณุญุจ ุจุงููุนู ุฅูู ุฌูุฑุงูู ุ ุชุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ุญูููู ูู ุญููุฉ ุ ูุงูุญุตูู ุนูู ุจูุงูุงุชูู ุงูููุงุฎูุฉ ุ ูุฒูุงุฏุฉ ูููุฉ ุงูุณุญุจ ููุณุฎูุง ูุฑุฉ ุฃุฎุฑู ุฅูู ุงููุงุฆูุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cloudDispersal = cellClimate.clouds * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">6f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!neighbor) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } ClimateData neighborClimate = climate[neighbor.Index]; neighborClimate.clouds += cloudDispersal; climate[neighbor.Index] = neighborClimate; } cellClimate.clouds = <span class="hljs-number"><span class="hljs-number">0f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e6a/0e3/437/e6a0e34379d984582c020fde8f1db546.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุงุซุฑ ุงูุบููู.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุคุฏู ูุฐุง ุฅูู ุฅูุดุงุก ุฎุฑูุทุฉ ุจูุถุงุก ุชูุฑูุจูุง ุ ูุฃูู ูู ูู ุฏูุฑุฉ ุ ุชุถูู ุงูุฎูุงูุง ุชุญุช ุงููุงุก ุงููุฒูุฏ ูุงููุฒูุฏ ูู ุงูุณุญุจ ุฅูู ุงูููุงุฎ ุงูุนุงููู. ุจุนุฏ ุงูุฏูุฑุฉ ุงูุฃููู ุ ุณุชุญุชูู ุฎูุงูุง ุงูุฃุฑุถ ุงููุฌุงูุฑุฉ ูููุงุก ุฃูุถูุง ุนูู ุณุญุจ ุชุญุชุงุฌ ุฅูู ุงูุชุดุชุช. ุชุณุชูุฑ ูุฐู ุงูุนูููุฉ ุญุชู ูุชู ุชุบุทูุฉ ูุนุธู ุงูุฎุฑูุทุฉ ุจุงูุบููู. ูู ุญุงูุฉ ุงูุฎุฑูุทุฉ 1208905299 ูุน ุงููุนููุงุช ุงูุงูุชุฑุงุถูุฉ ุ ุจูู ุงูุฌุฒุก ุงูุฏุงุฎูู ููุท ูู ุงููุชูุฉ ุงููุจูุฑุฉ ูู ุงูุฃุฑุงุถู ูู ุงูุดูุงู ุงูุดุฑูู ููุดูููุง ุชูุงููุง.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃู ุงูุฃุญูุงุถ ูููู ุฃู ุชููุฏ ุนุฏุฏูุง ูุง ููุงุฆููุง ูู ุงูุบููู. </font><font style="vertical-align: inherit;">ูุณุชูู ุงููุงุก ููุณ ุฌุฒุกูุง ูู ูุญุงูุงุฉ ุงูููุงุฎ. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุชู ุงูุญูุงุธ ุนูู ุงูุฎุฒุงูุงุช ููุท ูุฃู ุงูููุงู ุชุชุฏูู ุฅูููุง ูุฑุฉ ุฃุฎุฑู ุจูุนุฏู ุงูุชุจุฎุฑ. </font><font style="vertical-align: inherit;">ุฃู ุฃููุง ููุท ูุญุงูุงุฉ ุฏูุฑุฉ ููุงู ุฌุฒุฆูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ุทุจูุนู ุ ูููู ูุฌุจ ุฃู ูููู ุฃูู ูููุง ุทุงูุช ูุฏุฉ ุงููุญุงูุงุฉ ุ ูููุง ุชูุช ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงููุงุก ุฅูู ุงูููุงุฎ. </font><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ูุญุฏุซ ููุฏุงู ุงููุงุก ููุท ุนูุฏ ุญูุงู ุงูุฎุฑูุทุฉ ุ ุญูุซ ุชูููุฏ ุงูุบููู ุงููุชูุงุซุฑุฉ ุจุณุจุจ ููุต ุงูุฌูุฑุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฑุคูุฉ ููุฏุงู ุงููุงุก ูู ุงูุฌุฒุก ุงูุนููู ูู ุงูุฎุฑูุทุฉ ุ ุฎุงุตุฉ ูู ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ูู ุฃุนูู ุงููููู. </font><font style="vertical-align: inherit;">ูู ุงูุฒูุฒุงูุฉ ุงูุฃุฎูุฑุฉ ูุง ุชูุฌุฏ ุบููู ุนูู ุงูุฅุทูุงู ุ ูุฃููุง ุชุธู ุงูุฃุฎูุฑุฉ ุงูุชู ูุชุดูู ูููุง ุงูููุงุฎ. </font><font style="vertical-align: inherit;">ูู ุชุชููู ุบููููุง ุจุนุฏ ูู ุฃุญุฏ ุงูุฌูุฑุงู.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุง ูุฌุจ ุฃู ูุชุดูู ููุงุฎ ุฌููุน ุงูุฎูุงูุง ุจุงูุชูุงุฒูุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> ,        .    -              ,         .   40    . -      ,       . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุทูู ุงูุฃูุทุงุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุจูู ุงููุงุก ุจุงุฑุฏุงู ุฅูู ุงูุฃุจุฏ. ูู ูุฑุญูุฉ ูุง ุ ูุฌุจ ุฃู ุชุณูุท ุนูู ุงูุฃุฑุถ ูุฑุฉ ุฃุฎุฑู. ูุญุฏุซ ูุฐุง ุนุงุฏุฉ ูู ุดูู ูุทุฑ ุ ูููู ูู ุจุนุถ ุงูุฃุญูุงู ูููู ุฃู ูููู ุงูุซูุฌ ุฃู ุงูุจุฑุฏ ุฃู ุงูุซูุฌ ุงูุฑุทุจ. ูู ูุฐุง ูุณูู ุจุดูู ุนุงู ูุทูู ุงูุฃูุทุงุฑ. ูุฎุชูู ุญุฌู ููุนุฏู ุงุฎุชูุงุก ุงูุณุญุงุจุฉ ุงุฎุชูุงููุง ูุจูุฑูุง ุ ูููููุง ูุณุชุฎุฏู ููุท ูุนุฏู ูุทูู ุฃูุทุงุฑ ุนุงููู ูุฎุตุต. ุชุนูู ุงููููุฉ 0 ุนุฏู ูุทูู ุงูุฃูุทุงุฑ ุ ูุชุนูู ุงููููุฉ 1 ุฃู ุฌููุน ุงูุณุญุจ ุชุฎุชูู ุนูู ุงูููุฑ. ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู 0.25. ููุฐุง ูุนูู ุฃูู ูู ูู ุฏูุฑุฉ ุณูุฎุชูู ุฑุจุน ุงูุบููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> precipitationFactor = <span class="hljs-number"><span class="hljs-number">0.25f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f90/762/37d/f9076237d0673301af34c32f5cd6688a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูู ูุนุงูู ูุทูู ุงูุฃูุทุงุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุจูุญุงูุงุฉ ูุทูู ุงูุฃูุทุงุฑ ุจุนุฏ ุงูุชุจุฎุฑ ููุจู ุชูุงุซุฑ ุงูุบููู. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃู ุฌุฒุกูุง ูู ุงููุงุก ุงููุชุจุฎุฑ ูู ุงูุฎุฒุงูุงุช ูุชุฑุณุจ ุนูู ุงูููุฑ ุ ูุจุงูุชุงูู ููุฎูุถ โโุนุฏุฏ ุงูุณุญุจ ุงููุดุชุชุฉ. </font><font style="vertical-align: inherit;">ููู ุงูุฃุฑุถ ุ ุณูุคุฏู ูุทูู ุงูุฃูุทุงุฑ ุฅูู ุงุฎุชูุงุก ุงูุบููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IsUnderwater) { cellClimate.clouds += evaporation; } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> precipitation = cellClimate.clouds * precipitationFactor; cellClimate.clouds -= precipitation; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cloudDispersal = cellClimate.clouds * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">6f</span></span>);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4e3/f11/46a/4e3f1146a761d1525e6a9349ff715bbb.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุบููู ุงููุฎุชููุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ ุนูุฏูุง ูุฏูุฑ 25ูช ูู ุงูุณุญุจ ูู ูู ุฏูุฑุฉ ุ ุชููู ุงูุฃุฑุถ ุณูุฏุงุก ูุฑุฉ ุฃุฎุฑู ุชูุฑูุจูุง. </font><font style="vertical-align: inherit;">ุชูููุช ุงูุบููู ูู ุงูุชุญุฑู ูู ุงูุฏุงุฎู ุจุถุน ุฎุทูุงุช ููุท ุ ูุจุนุฏ ุฐูู ุชุตุจุญ ุบูุฑ ูุฑุฆูุฉ. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุทูุจุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ูุทูู ุงูุฃูุทุงุฑ ูุฏูุฑ ุงูุบููู ุ ุฅูุง ุฃูู ูุง ููุจุบู ุฅุฒุงูุฉ ุงููุงุก ูู ุงูููุงุฎ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุงูุณููุท ุนูู ุงูุฃุฑุถ ุ ูุชู ุชูููุฑ ุงูููุงู ุ ููุท ูู ุญุงูุฉ ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ูููู ุฃู ุชูุฌุฏ ูู ุงูุนุฏูุฏ ูู ุงูุฃุดูุงู ุ ูุงูุชู ุณููุธุฑ ูููุง ุจุดูู ุนุงู ุงูุฑุทูุจุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุจุน ุงูุฑุทูุจุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุจุชุญุณูู ูููุฐุฌ ุงูููุงุฎ ูู ุฎูุงู ุชุชุจุน ุญุงูุชูู ููููุงู: ุงูุบููู ูุงูุฑุทูุจุฉ. </font><font style="vertical-align: inherit;">ูุชูููุฐ ุฐูู ุ ุฃุถู ูู </font></font><code>ClimateData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูู </font></font><code>moisture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> ClimateData { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> clouds, moisture; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดููู ุงูุฃูุซุฑ ุนููููุฉ ุ ุงูุชุจุฎุฑ ูู ุนูููุฉ ุชุญููู ุงูุฑุทูุจุฉ ุฅูู ุณุญุจ ุ ุนูู ุงูุฃูู ูู ูููุฐุฌ ุงูููุงุฎ ุงูุจุณูุท. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃู ุงูุชุจุฎุฑ ูุง ูุฌุจ ุฃู ูููู ูููุฉ ุซุงุจุชุฉ ุ ุจู ุนุงูู ุขุฎุฑ. </font><font style="vertical-align: inherit;">ููุฐููุ ุฅุนุงุฏุฉ ุชุณููุฉ refactor- </font></font><code>evaporation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>evaporationFactor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> evaporationFactor = <span class="hljs-number"><span class="hljs-number">0.5f</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชููู ุงูุฎููุฉ ุชุญุช ุงููุงุก ุ ูุนูู ุจุจุณุงุทุฉ ุฃู ูุณุชูู ุงูุฑุทูุจุฉ ูู 1. ููุฐุง ูุนูู ุฃู ุงูุชุจุฎุฑ ูุณุงูู ูุนุงูู ุงูุชุจุฎุฑ. </font><font style="vertical-align: inherit;">ูููู ุงูุขู ูููููุง ุฃูุถูุง ุงูุญุตูู ุนูู ุงูุชุจุฎุฑ ูู ุฎูุงูุง ุงูุณูุดู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุญุณุงุจ ุงูุชุจุฎุฑ ูุทุฑุญู ูู ุงูุฑุทูุจุฉ ูุฅุถุงูุฉ ุงููุชูุฌุฉ ุฅูู ุงูุณุญุจ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูุถุงู ุงูุชุฑุณูุจ ุฅูู ุงูุฑุทูุจุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IsUnderwater) { cellClimate.moisture = <span class="hljs-number"><span class="hljs-number">1f</span></span>; cellClimate.clouds += evaporationFactor; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> evaporation = cellClimate.moisture * evaporationFactor; cellClimate.moisture -= evaporation; cellClimate.clouds += evaporation; } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> precipitation = cellClimate.clouds * precipitationFactor; cellClimate.clouds -= precipitation; cellClimate.moisture += precipitation;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุณุญุจ ูุฏุนููุฉ ุงูุขู ุจุงูุชุจุฎุฑ ูู ููู ุงูุฃุฑุถ ุ ูููููุง ููููุง ุฅูู ุงูุฏุงุฎู. </font><font style="vertical-align: inherit;">ุงูุขู ุฃุตุจุญ ุงูุฌุฒุก ุงูุฃูุจุฑ ูู ุงูุฃุฑุถ ุฑูุงุฏูุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a0b/94f/c71/a0b94fc71728a012254059d760bf47f3.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุบููู ูุน ุชุจุฎุฑ ุงูุฑุทูุจุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุบูุฑูุง </font></font><code>SetTerrainType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ุชุนุฑุถ ุงูุฑุทูุจุฉ ุจุฏูุงู ูู ุงูุบููู ุ ูุฃููุง ุณูุณุชุฎุฏููุง ูุชุญุฏูุฏ ุฃููุงุน ุงูุฅุบุงุซุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> cell.SetMapData(climate[i].moisture);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3cf/78f/d30/3cf78fd3099cf1b3a75befb8ebb0893d.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูุฑุทูุจุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ุชุจุฏู ุงูุฑุทูุจุฉ ูุดุงุจูุฉ ุฌุฏูุง ููุณุญุจ (ุจุงุณุชุซูุงุก ุฃู ุฌููุน ุงูุฎูุงูุง ุชุญุช ุงููุงุก ุจูุถุงุก) ุ ููู ูุฐุง ุณูุชุบูุฑ ูุฑูุจูุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฌุฑูุงู ุงูุฃูุทุงุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจุฎุฑ ููุณ ูู ุงูุทุฑููุฉ ุงููุญูุฏุฉ ุงูุชู ูููู ุฃู ุชุชุฑู ุงูุฑุทูุจุฉ ูููุง ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ุชุฎุจุฑูุง ุฏูุฑุฉ ุงููุงุก ุฃู ุงูุฌุฒุก ุงูุฃูุจุฑ ูู ุงูุฑุทูุจุฉ ุงููุถุงูุฉ ุฅูู ุงูุฃุฑุถ ููุชูู ุจุทุฑููุฉ ูุง ูู ุงููุงุก. </font><font style="vertical-align: inherit;">ุฅู ุงูุนูููุฉ ุงูุฃูุซุฑ ูุถูุญูุง ูู ุชุฏูู ุงูููุงู ุนูู ุงูุฃุฑุถ ุชุญุช ุชุฃุซูุฑ ุงูุฌุงุฐุจูุฉ. </font><font style="vertical-align: inherit;">ูู ูููู ุจูุญุงูุงุฉ ุฃููุงุฑ ุญููููุฉ ุ ูููููุง ูุณุชุฎุฏู ูุนุงูู ุฌุฑูุงู ุงูุฃูุทุงุฑ ุงููุฎุตุต. </font><font style="vertical-align: inherit;">ุณุชุดูุฑ ุฅูู ุงููุณุจุฉ ุงููุฆููุฉ ูุชุตุฑูู ุงูููุงู ุฅูู ุงูููุงุทู ุงูุณูููุฉ. </font><font style="vertical-align: inherit;">ูููุชุฑุถ ุฃู ุงูุฃุณูู ุณุชููู ูุณุงููุฉ ูู 25ูช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> runoffFactor = <span class="hljs-number"><span class="hljs-number">0.25f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c85/e81/648/c85e8164833b60299f80bba99c11be81.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูู ุงุณุชูุฒุงู.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููุฏ ุงูุฃููุงุฑุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">          . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู ุฌุฑูุงู ุงูููุงู ูุซู ุชูุงุซุฑ ุงูุบููู ุ ูููู ูุน ุซูุงุซุฉ ุงุฎุชูุงูุงุช. ุฃููุงู ุ ูุง ุชุชู ุฅุฒุงูุฉ ูู ุงูุฑุทูุจุฉ ูู ุงูุฎููุฉ. ุซุงูููุง ุ ูุญูู ุงูุฑุทูุจุฉ ูููุณ ุงูุบููู. ุซุงูุซูุง ุ ููุฎูุถ โโุ ุฃู ููุท ุฅูู ุงูุฌูุฑุงู ุฐูู ุงูุงุฑุชูุงุน ุงูููุฎูุถ. ูุตู ูุนุงูู ุงูุฌุฑูุงู ุงูุณุทุญู ูููุฉ ุงูุฑุทูุจุฉ ุงูุชู ุชุชุฏูู ูู ุงูุฎููุฉ ุฅุฐุง ูุงูุช ุฌููุน ุงูุฌูุฑุงู ุฃูู ุ ูููู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุชููู ุฃูู. ูุฐุง ูุนูู ุฃููุง ุณูููู ูู ุฑุทูุจุฉ ุงูุฎููุฉ ููุท ุนูุฏูุง ูุฌุฏ ุฌุงุฑูุง ุฃุฏูุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cloudDispersal = cellClimate.clouds * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">6f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> runoff = cellClimate.moisture * runoffFactor * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">6f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!neighbor) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } ClimateData neighborClimate = climate[neighbor.Index]; neighborClimate.clouds += cloudDispersal; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> elevationDelta = neighbor.Elevation - cell.Elevation; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elevationDelta &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { cellClimate.moisture -= runoff; neighborClimate.moisture += runoff; } climate[neighbor.Index] = neighborClimate; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a25/c41/00b/a25c4100bde5139415ebbf0a45068d0a.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุตุฑูู ุงูููุงู ุฅูู ุงุฑุชูุงุน ุฃูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ูุฏููุง ุชูุฒูุน ุฃูุซุฑ ุชููุนูุง ููุฑุทูุจุฉ ุ ูุฃู ุงูุฎูุงูุง ุงูุนุงููุฉ ุชููู ุฑุทูุจุชูุง ุฅูู ุงูุฃุณูู. </font><font style="vertical-align: inherit;">ููุง ูุฑู ุฃูุถูุง ุฑุทูุจุฉ ุฃูู ุจูุซูุฑ ูู ุงูุฎูุงูุง ุงูุณุงุญููุฉ ุ ูุฃููุง ุชุณุชูุฒู ุงูุฑุทูุจุฉ ูู ุงูุฎูุงูุง ุชุญุช ุงููุงุก. </font><font style="vertical-align: inherit;">ูุฅุถุนุงู ูุฐุง ุงูุชุฃุซูุฑ ุ ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุงุณุชุฎุฏุงู ูุณุชูู ุงููุงุก ุนูุฏ ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุฃูู ุ ุฃู ุฃุฎุฐ ุงูุงุฑุชูุงุน ุงูุธุงูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> elevationDelta = neighbor.ViewElevation - cell.ViewElevation;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/651/ee9/64d/651ee964da5a422bfaa94f27609a5dcd.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฎุฏู ุงูุงุฑุชูุงุน ุงููุฑุฆู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุณุฑุจ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุชุฏูู ุงููุงุก ููุฃุณูู ูุญุณุจ ุ ุจู ููุชุดุฑ ุ ููุชุณุฑุจ ูู ุฎูุงู ุชุถุงุฑูุณ ุงููุณุชูู ุ ูููุชุตู ุงูุฃุฑุถ ุงููุฌุงูุฑุฉ ููุฃุฌุณุงู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูุฏ ูููู ููุฐุง ุงูุชุฃุซูุฑ ุชุฃุซูุฑ ุถุฆูู ุ ููููู ูููุฏ ูุชุณููู ุชูุฒูุน ุงูุฑุทูุจุฉ ุ ูุฐูู ุฏุนูุง ูุถููู ุฅูู ุงููุญุงูุงุฉ. </font><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ูุนุงูู ูุฎุตุต ุฎุงุต ุจู ุ ุงูุชุฑุงุถููุง ูุณุงูู 0.125.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> seepageFactor = <span class="hljs-number"><span class="hljs-number">0.125f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/495/855/b73/495855b73d4601ab3de00b3561285491.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูู ุงูุชุณุฑุจ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุจู ุงูุชุณุฑุจ ุงูุชุตุฑูู ุ ุจุงุณุชุซูุงุก ุฃูู ูุณุชุฎุฏู ุนูุฏูุง ูููู ููุฌุงุฑ ููุณ ุงูุงุฑุชูุงุน ุงููุฑุฆู ูุซู ุงูุฎููุฉ ููุณูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> runoff = cellClimate.moisture * runoffFactor * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">6f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> seepage = cellClimate.moisture * seepageFactor * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">6f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> elevationDelta = neighbor.ViewElevation - cell.ViewElevation; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elevationDelta &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { cellClimate.moisture -= runoff; neighborClimate.moisture += runoff; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elevationDelta == <span class="hljs-number"><span class="hljs-number">0</span></span>) { cellClimate.moisture -= seepage; neighborClimate.moisture += seepage; } climate[neighbor.Index] = neighborClimate; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d39/7b2/b01/d397b2b01ad8e71137b9e5fa03fcf5a5.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุช ุฅุถุงูุฉ ุงููููู ูู ุงูุชุณุฑุจ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุธูุงู ุงููุทุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ูุฏ ุฃูุดุฃูุง ุจุงููุนู ูุญุงูุงุฉ ุฌุฏูุฑุฉ ุจุฏูุฑุฉ ุงูููุงู ุ ุฅูุง ุฃููุง ูุง ุชุจุฏู ูุซูุฑุฉ ููุงูุชูุงู ููุบุงูุฉ ุ ูุฃููุง ูุง ุชุญุชูู ุนูู ุธูุงู ุงููุทุฑ ุ ูุงูุชู ุชุธูุฑ ุจูุถูุญ ุงูุงุฎุชูุงูุงุช ุงูููุงุฎูุฉ. </font><font style="vertical-align: inherit;">ุธูุงู ุงููุทุฑ ูู ุงูููุงุทู ุงูุชู ููุฌุฏ ุจูุง ููุต ูุจูุฑ ูู ูุทูู ุงูุฃูุทุงุฑ ููุงุฑูุฉ ุจุงูููุงุทู ุงููุฌุงูุฑุฉ. </font><font style="vertical-align: inherit;">ุชูุฌุฏ ูุซู ูุฐู ุงูููุงุทู ูุฃู ุงูุฌุจุงู ุชููุน ุงูุบููู ูู ุงููุตูู ุฅูููุง. </font><font style="vertical-align: inherit;">ูุชุทูุจ ุฎูููู ุฌุจุงููุง ุนุงููุฉ ูุงุชุฌุงููุง ุฑูุงุญูุง ููููููุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑูุญ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุฅุถุงูุฉ ุงุชุฌุงู ุฑูุงุญ ููููู ุฅูู ุงููุญุงูุงุฉ. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุงุชุฌุงูุงุช ุงูุฑูุงุญ ุงูุณุงุฆุฏุฉ ุชุฎุชูู ุงุฎุชูุงููุง ูุจูุฑูุง ุนูู ุณุทุญ ุงูุฃุฑุถ ุ ุฅูุง ุฃููุง ุณูุชุนุงูู ูุน ุงุชุฌุงู ุฑูุงุญ ุนุงููู ูุงุจู ููุชุฎุตูุต. </font><font style="vertical-align: inherit;">ููุณุชุฎุฏู ุงูุดูุงู ุงูุบุฑุจู ุงูุชุฑุงุถููุง. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฏุนูุง ูุฌุนู ููุฉ ุงูุฑูุงุญ ูุงุจูุฉ ููุชุนุฏูู ูู 1 ุฅูู 10 ุจูููุฉ ุงูุชุฑุงุถูุฉ 4.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexDirection windDirection = HexDirection.NW; [Range(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">10f</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> windStrength = <span class="hljs-number"><span class="hljs-number">4f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f32/4a1/49c/f324a149c360bbfde72e98b4877afb37.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุฌุงู ูููุฉ ุงูุฑูุญ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงูุชุนุจูุฑ ุนู ููุฉ ุงูุฑูุงุญ ุงูุณุงุฆุฏุฉ ุจุงููุณุจุฉ ููุชุดุชุช ุงูููู ููุณุญุจ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ููุฉ ุงูุฑูุงุญ 1 ุ ูุฅู ุงูุชุดุชุช ูู ููุณู ูู ุฌููุน ุงูุงุชุฌุงูุงุช. </font><font style="vertical-align: inherit;">ุนูุฏูุง ุชููู 2 ุ ูููู ุงูุงูุชุซุงุฑ ุฃุนูู ูู ุงุชุฌุงู ุงูุฑูุญ ูู ุงุชุฌุงููู ุขุฎุฑูู ุ ูููุฐุง. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุบููุฑ ุงูููุณูู ุนููู ูู ุตูุบุฉ ูุจุนุซุฑ ุงูุณุญุงุจุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุณุชุฉ ุ ุณุชููู ูุณุงููุฉ ูุฎูุณุฉ ุทุงูุฉ ุฑูุงุญ ุฒุงุฆุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cloudDispersal = cellClimate.clouds * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / (<span class="hljs-number"><span class="hljs-number">5f</span></span> + windStrength));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุญุฏุฏ ุงุชุฌุงู ุงูุฑูุญ ุงูุงุชุฌุงู ุงูุฐู ุชูุจ ููู ุงูุฑูุญ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุงูุงุชุฌุงู ุงููุนุงูุณ ุจุงุนุชุจุงุฑู ุงูุงุชุฌุงู ุงูุฑุฆูุณู ููุงูุชุซุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexDirection mainDispersalDirection = windDirection.Opposite(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cloudDispersal = cellClimate.clouds * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / (<span class="hljs-number"><span class="hljs-number">5f</span></span> + windStrength));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุฌุงุฑ ูู ุงูุงุชุฌุงู ุงูุฑุฆูุณู ููุงูุชุซุงุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุฌุจ ุนูููุง ูุถุงุนูุฉ ุชุดุชุช ุงูุบููู ุจููุฉ ุงูุฑูุงุญ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> ClimateData neighborClimate = climate[neighbor.Index]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (d == mainDispersalDirection) { neighborClimate.clouds += cloudDispersal * windStrength; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { neighborClimate.clouds += cloudDispersal; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e7e/874/2d5/e7e8742d53033ee4ee89f68e60871426.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑูุงุญ ุงูุดูุงููุฉ ุงูุบุฑุจูุฉ ุ ุงูููุฉ 4.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุถูู ุงูุฑูุงุญ ุงูุณุงุฆุฏุฉ ุงูุงุชุฌุงู ุฅูู ุชูุฒูุน ุงูุฑุทูุจุฉ ุนูู ุงูุฃุฑุถ. </font><font style="vertical-align: inherit;">ูููุง ูุงูุช ุงูุฑูุงุญ ุฃููู ุ ุฃุตุจุญ ุงูุชุฃุซูุฑ ุฃููู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุฑุชูุงุน ูุทูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุตุฑ ุงูุซุงูู ูู ุงูุญุตูู ุนูู ุธูุงู ุงููุทุฑ ูู ุงูุฌุจุงู. ููุณ ูุฏููุง ุชุตููู ุตุงุฑู ููุง ูู ุฌุจู ุ ุชูุงููุง ููุง ูุง ููุฌุฏ ูู ุงูุทุจูุนุฉ. ููุท ุงูุงุฑุชูุงุน ุงููุทูู ูู ุงูููู. ูู ุงููุงูุน ุ ุนูุฏูุง ูุชุญุฑู ุงูููุงุก ููู ุงูุฌุจู ุ ูุถุทุฑ ุฅูู ุงูุงุฑุชูุงุน ุ ููุชู ุชุจุฑูุฏู ููุฏ ูุญุชูู ุนูู ูููุฉ ุฃูู ูู ุงููุงุก ุ ููุง ูุคุฏู ุฅูู ูุทูู ุงูุฃูุทุงุฑ ูุจู ุฃู ููุฑ ุงูููุงุก ููู ุงูุฌุจู. ูุชูุฌุฉ ูุฐูู ุ ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูุญุตู ุนูู ุงูููุงุก ุงูุฌุงู ุ ุฃู ุธู ุงููุทุฑ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุฃูู ูู ุฐูู ุ ุฃูู ูููุง ุงุฑุชูุน ุงูููุงุก ุ ูู ุงููุงุก ุงูุฐู ูุญุชููู. </font><font style="vertical-align: inherit;">ูู ูุญุงูุงุฉ ูุฏููุง ุ ูููููุง ุฃู ูุชุฎูู ูุฐุง ุนูู ุฃูู ุชูููุฏ ููุฑูุถ ุนูู ุงูุญุฏ ุงูุฃูุตู ููููุฉ ุงูุณุญุงุจุฉ ููู ุฎููุฉ. </font><font style="vertical-align: inherit;">ูููุง ุฒุงุฏ ุงุฑุชูุงุน ุงูุฎููุฉ ุงููุฑุฆูุฉ ุ ูุฌุจ ุฃู ูููู ูุฐุง ุงูุญุฏ ุงูุฃุฏูู ุฃูู. </font><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ููููุงู ุจุฐูู ูู ุชุนููู ุงูุญุฏ ุงูุฃูุตู ุฅูู 1 ูุงูุต ุงูุงุฑุชูุงุน ุงูุธุงูุฑู ููุณูููุง ุนูู ุงูุญุฏ ุงูุฃูุตู ููุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ูููู ูู ุงููุงูุน ุ ุฏุนููุง ููุณู ุนูู ุงูุญุฏ ุงูุฃูุตู ูุงูุต 1. ุณูุณูุญ ูุฐุง ูุฌุฒุก ุตุบูุฑ ูู ุงูุณุญุจ ุจุงููุฑูุฑ ุญุชู ุฃุนูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุญุฏุฏ ูุฐุง ุงูุญุฏ ุงูุฃูุตู ุจุนุฏ ุญุณุงุจ ูุทูู ุงูุฃูุทุงุฑ ููุจู ุงูุชูุงุซุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> precipitation = cellClimate.clouds * precipitationFactor; cellClimate.clouds -= precipitation; cellClimate.moisture += precipitation; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cloudMaximum = <span class="hljs-number"><span class="hljs-number">1f</span></span> - cell.ViewElevation / (elevationMaximum + <span class="hljs-number"><span class="hljs-number">1f</span></span>); HexDirection mainDispersalDirection = windDirection.Opposite();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุญุตููุง ุนูู ูุชูุฌุฉ ุณุญุจ ุฃูุซุฑ ูู ุงูููุจูู ุ ูุฅููุง ุจุจุณุงุทุฉ ูููู ุจุชุญููู ุงูุณุญุจ ุงูุฒุงุฆุฏุฉ ุฅูู ุฑุทูุจุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุถูู ุจูุง ูุทูููุง ุฅุถุงูููุง ุ ููุง ูุญุฏุซ ูู ุงูุฌุจุงู ุงูุญููููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cloudMaximum = <span class="hljs-number"><span class="hljs-number">1f</span></span> - cell.ViewElevation / (elevationMaximum + <span class="hljs-number"><span class="hljs-number">1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cellClimate.clouds &gt; cloudMaximum) { cellClimate.moisture += cellClimate.clouds - cloudMaximum; cellClimate.clouds = cloudMaximum; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/403/998/c36/403998c36a6d85250f837766a4f33147.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุธูุงู ุงููุทูุฑุฉ ุงููุงุฌูุฉ ุนู ุงูุงุฑุชูุงุนุงุช ุงูุนุงููุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุงููุญุงูุงุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ูุฏููุง ุจุงููุนู ูุญุงูุงุฉ ุฌุฒุฆูุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ูุฏูุฑุฉ ุงูููุงู. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุฑุชุจูุง ููููุงู ุ ุซู ูุทุจููุง ูุชุญุฏูุฏ ููุน ุฑุงุญุฉ ุงูุฎูุงูุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุญูุณุจุฉ ุงููุชูุงุฒูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุฐูุฑูุง ุณุงุจููุง ุชุญุช ุงูููุณุฏ ุ ูุฅู ุงูุชุฑุชูุจ ุงูุฐู ุชุชุดูู ุจู ุงูุฎูุงูุง ูุคุซุฑ ุนูู ูุชูุฌุฉ ุงููุญุงูุงุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูุง ููุจุบู ุฃู ูููู ูุฐุง ููู ุฌููุฑู ูุดูู ุฌููุน ุงูุฎูุงูุง ุจุงูุชูุงุฒู. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุทุจูู ุฌููุน ุงูุชุบููุฑุงุช ูู ุงููุฑุญูุฉ ุงูุญุงููุฉ ูู ุงูุชูููู ุนูู ุงููุงุฆูุฉ ุงูุซุงููุฉ ููููุงุฎ </font></font><code>nextClimate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> List&lt;ClimateData&gt; climate = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ClimateData&gt;(); List&lt;ClimateData&gt; nextClimate = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ClimateData&gt;();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุญ ูุฐู ุงููุงุฆูุฉ ููู ุจุชููุฆุชูุง ุ ูุซู ุฃู ุดุฎุต ุขุฎุฑ. </font><font style="vertical-align: inherit;">ุซู ุณูููู ุจุชุจุงุฏู ุงูููุงุฆู ูู ูู ุฏูุฑุฉ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุณุชุฎุฏู ุงููุญุงูุงุฉ ุจุงูุชูุงูุจ ุงููุงุฆูุชูู ูุชุทุจู ุจูุงูุงุช ุงูููุงุฎ ุงูุญุงููุฉ ูุงููุงุฏูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateClimate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { climate.Clear(); nextClimate.Clear(); ClimateData initialData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClimateData(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { climate.Add(initialData); nextClimate.Add(initialData); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cycle = <span class="hljs-number"><span class="hljs-number">0</span></span>; cycle &lt; <span class="hljs-number"><span class="hljs-number">40</span></span>; cycle++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { EvolveClimate(i); } List&lt;ClimateData&gt; swap = climate; climate = nextClimate; nextClimate = swap; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏูุง ุชุคุซุฑ ุงูุฎููุฉ ุนูู ููุงุฎ ุฌูุฑุงููุง ุ ูุฌุจ ุนูููุง ุชุบููุฑ ุจูุงูุงุช ุงูููุงุฎ ุงูุชุงููุฉ ุ ูููุณ ุงูุจูุงูุงุช ุงูุญุงููุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!neighbor) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } ClimateData neighborClimate = nextClimate[neighbor.Index]; โฆ nextClimate[neighbor.Index] = neighborClimate; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏูุงู ูู ูุณุฎ ุจูุงูุงุช ุงูููุงุฎ ุงูุชุงููุฉ ูุฑุฉ ุฃุฎุฑู ุฅูู ูุงุฆูุฉ ุงูููุงุฎ ุงูุญุงููุฉ ุ ูุญุตู ุนูู ุจูุงูุงุช ุงูููุงุฎ ุงูุชุงููุฉ ุ ููุถูู ุงูุฑุทูุจุฉ ุงูุญุงููุฉ ุฅูููุง ูููุณุฎูุง ุฌููุนูุง ุฅูู ุงููุงุฆูุฉ ุงูุชุงููุฉ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูููู ุจุฅุนุงุฏุฉ ุชุนููู ุงูุจูุงูุงุช ูู ุงููุงุฆูุฉ ุงูุญุงููุฉ ุจุญูุซ ูุชู ุชุญุฏูุซูุง ููุฏูุฑุฉ ุงูุชุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// cellClimate.clouds = 0f; ClimateData nextCellClimate = nextClimate[cellIndex]; nextCellClimate.moisture += cellClimate.moisture; nextClimate[cellIndex] = nextCellClimate; climate[cellIndex] = new ClimateData();</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุซูุงุก ููุงููุง ุจุฐูู ุ ููููู ุฃูุถูุง ุจุชุนููู ูุณุชูู ุงูุฑุทูุจุฉ ุฅูู 1 ูุญุฏ ุฃูุตู ุญุชู ูุง ุชููู ุฎูุงูุง ุงูุฃุฑุถ ุฃูุซุฑ ุฑุทูุจุฉ ูู ุชุญุช ุงููุงุก. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> nextCellClimate.moisture += cellClimate.moisture; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextCellClimate.moisture &gt; <span class="hljs-number"><span class="hljs-number">1f</span></span>) { nextCellClimate.moisture = <span class="hljs-number"><span class="hljs-number">1f</span></span>; } nextClimate[cellIndex] = nextCellClimate;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6a8/709/87b/6a870987bfad51e91eaa1ff405be539d.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูุณุจุฉ ุงููุชูุงุฒูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุทูุจุฉ ุงูุฃุตููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุงุญุชูุงู ุฃู ุชูุชุฌ ุงููุญุงูุงุฉ ุงููุซูุฑ ูู ุงูุฃุฑุงุถู ุงูุฌุงูุฉ ุ ุฎุงุตุฉ ูุน ูุณุจุฉ ุนุงููุฉ ูู ุงูุฃุฑุงุถู. </font><font style="vertical-align: inherit;">ูุชุญุณูู ุงูุตูุฑุฉ ุ ูููููุง ุฅุถุงูุฉ ูุณุชูู ุฑุทูุจุฉ ูุจุฏุฆู ูุฎุตุต ุจูููุฉ ุงูุชุฑุงุถูุฉ 0.1.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> startingMoisture = <span class="hljs-number"><span class="hljs-number">0.1f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/db8/69b/3a2/db869b3a24627d695d9ec8bf2ba1f4ae.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุนูุงู ูู ููุฒูู ุงูุฑุทูุจุฉ ุงูุฃุตููุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฐู ุงููููุฉ ููุฑุทูุจุฉ ูู ูุงุฆูุฉ ุงูููุงุฎ ุงูุฃูููุฉ ุ ูููู ููุณ ููุง ููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> ClimateData initialData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClimateData(); initialData.moisture = startingMoisture; ClimateData clearData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClimateData(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { climate.Add(initialData); nextClimate.Add(clearData); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a74/138/649/a74138649fc141c088a631bce956a31a.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงูุฑุทูุจุฉ ุงูุฃุตููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฏูุฏ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูุชุฌ ุจุงุณุชุฎุฏุงู ุงูุฑุทูุจุฉ ุจุฏูุงู ูู ุงูุงุฑุชูุงุน ูุชุญุฏูุฏ ููุน ุฑุงุญุฉ ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุณุชุฎุฏู ุงูุซูุฌ ูู ุงูุฃุฑุงุถู ุงูุฌุงูุฉ ุชูุงููุง ุ ููู ุงูููุงุทู ุงููุงุญูุฉ ูุณุชุฎุฏู ุงูุซูุฌ ุ ุซู ููุงู ุงูุญุฌุฑ ูุงูุนุดุจ ููุฑุทุจ ุจูุง ููู ุงูููุงูุฉ ูุงูุฃุฑุถ ููุฎูุงูุง ุงููุดุจุนุฉ ุจุงููุงุก ูุชุญุช ุงููุงุก. </font><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ูู ุงุณุชุฎุฏุงู ุฎูุณ ููุงุตู ุจุฒูุงุฏุงุช ูุฏุฑูุง 0.2.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { HexCell cell = grid.GetCell(i); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> moisture = climate[i].moisture; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!cell.IsUnderwater) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moisture &lt; <span class="hljs-number"><span class="hljs-number">0.2f</span></span>) { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">4</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moisture &lt; <span class="hljs-number"><span class="hljs-number">0.4f</span></span>) { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moisture &lt; <span class="hljs-number"><span class="hljs-number">0.6f</span></span>) { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">3</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moisture &lt; <span class="hljs-number"><span class="hljs-number">0.8f</span></span>) { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">2</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">2</span></span>; } cell.SetMapData(moisture); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/123/c53/e4f/123c53e4f3f79aa50437a553e0eb6761.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงุณุชุฎุฏุงู ุงูุชูุฒูุน ุงูููุชุธู ุ ุชููู ุงููุชูุฌุฉ ููุณุช ุฌูุฏุฉ ุฌุฏูุง ุ ูุชุจุฏู ุบูุฑ ุทุจูุนูุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุนุชุจุงุช ุฃุฎุฑู ุ ุนูู ุณุจูู ุงููุซุงู 0.05 ู 0.12 ู 0.28 ู 0.85.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moisture &lt; <span class="hljs-number"><span class="hljs-number">0.05f</span></span>) { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">4</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moisture &lt; <span class="hljs-number"><span class="hljs-number">0.12f</span></span>) { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moisture &lt; <span class="hljs-number"><span class="hljs-number">0.28f</span></span>) { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">3</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moisture &lt; <span class="hljs-number"><span class="hljs-number">0.85f</span></span>) { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6ad/8cf/7c7/6ad8cf7c7becf357d16157ae28999a14.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุทู ุงูุญูููุฉ ุงููุนุฏูุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 26: ุงูููุงุทู ุงูุญูููุฉ ูุงูุฃููุงุฑ </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฎูู ุงูุฃููุงุฑ ุงููุงุฏูุฉ ูู ุฎูุงูุง ุนุงููุฉ ูุน ุฑุทูุจุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุจุฅูุดุงุก ูููุฐุฌ ุจุณูุท ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุชุฎุฏู ูุตูููุฉ biome ููุฎูุงูุง ุ ุซู ูุบูุฑูุง. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐุง ุงูุฌุฒุก ุ ุณูููู ุฏูุฑุฉ ุงูููุงู ุจุงูุฃููุงุฑ ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชุนููู ููุงุทู ุญูููุฉ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุฎูุงูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุฅูุดุงุก ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุจุงุณุชุฎุฏุงู Unity 2017.3.0p3.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/305/0b2/d11/3050b2d115d1ec49e2b6c945ab9ed4c1.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฒุฒุช ุงูุญุฑุงุฑุฉ ูุงููุงุก ุงูุฎุฑูุทุฉ.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูููุฏ ุงูููุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ูู ูุชูุฌุฉ ูุฏูุฑุฉ ุงูููุงู. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุชู ุชุดููููุง ุนู ุทุฑูู ุงูุฌุฑูุงู ุงูุณุทุญู ุงูุฐู ุชูุฒู ุจูุณุงุนุฏุฉ ุชุขูู ุงูููุงุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ููููู ุฅุถุงูุฉ ุฃููุงุฑ ุจูุงุกู ุนูู ูููุฉ ูุตุงุฑู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุฐุง ูุง ูุถูู ุฃููุง ุณูุญุตู ุนูู ุดูุก ูุดุจู ุงูุฃููุงุฑ ุงูุญููููุฉ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุจุฏุฃ ุงูููุฑ ุ ูุฌุจ ุฃู ูุชุฏูู ุฅูู ุฃูุตู ุญุฏ ูููู ุ ุฑุจูุง ูู ุฎูุงู ุงูุนุฏูุฏ ูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุง ูุชูู ูุน ูุญุงูุงุฉ ุฏูุฑุฉ ุงูููุงู ุงูุชู ุชุนุงูุฌ ุงูุฎูุงูุง ุจุงูุชูุงุฒู. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุงูุถุฑูุฑู ุนุงุฏุฉู ุงูุชุญูู ูู ุนุฏุฏ ุงูุฃููุงุฑ ุนูู ุงูุฎุฑูุทุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุฃููุงุฑ ูุฎุชููุฉ ุชูุงููุง ุ ูุณููุดุฆูุง ุจุดูู ูููุตู. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุชุงุฆุฌ ูุญุงูุงุฉ ุฏูุฑุฉ ุงูููุงู ูุชุญุฏูุฏ ูููุน ุงูุฃููุงุฑ ุ ูููู ุงูุฃููุงุฑ ุจุฏูุฑูุง ูู ุชุคุซุฑ ุนูู ุงููุญุงูุงุฉ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูููู ุชุฏูู ุงูููุฑ ุฎุงุทุฆูุง ูู ุจุนุถ ุงูุฃุญูุงูุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">    <code>TriangulateWaterShore</code>  ,    .      ,    .   ,    ,       .      ,  .    ,  ,       .         (ยซยป). <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWaterShore</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, HexCell neighbor, Vector3 center </span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction)) { TriangulateEstuary( e1, e2, cell.HasIncomingRiver &amp;&amp; cell.IncomingRiver == direction, indices ); } โฆ }</code> </pre> </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎูุงูุง ุฑุทูุจุฉ ุนุงููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุฎุฑุงุฆุทูุง ุ ูุฏ ูููู ููุฎููุฉ ููุฑ ุฃู ูุง. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููููู ุงูุชูุฑุน ุฃู ุงูุงุชุตุงู. ูู ุงููุงูุน ุ ุงูุฃููุงุฑ ุฃูุซุฑ ูุฑููุฉ ุ ูููู ุนูููุง ุฃู ูุชุบูุจ ุนูู ูุฐุง ุงูุชูุฑูุจ ุ ุงูุฐู ูุฎูู ุฃููุงุฑูุง ูุจูุฑุฉ ููุท. ุงูุฃูู ูู ุฐูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุชุญุฏูุฏ ูููุน ุจุฏุงูุฉ ููุฑ ูุจูุฑ ุ ูุชู ุงุฎุชูุงุฑู ุนุดูุงุฆููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุฃููุงุฑ ุชุชุทูุจ ุงููุงุก ุ ูุฌุจ ุฃู ูููู ูุตุฏุฑ ุงูููุฑ ูู ุฎููุฉ ุฐุงุช ุฑุทูุจุฉ ุนุงููุฉ. ููู ูุฐุง ูุง ูููู. ุชุชุฏูู ุงูุฃููุงุฑ ุฅูู ุฃุณูู ุงูููุญุฏุฑุงุช ุ ูุฐุง ูู ุงูุฃูุถู ุฃู ูููู ูููุตุฏุฑ ุงุฑุชูุงุน ูุจูุฑ. ูููุง ุงุฑุชูุนุช ุงูุฎููุฉ ููู ูุณุชูู ุงูููุงู ุ ูุงู ุงููุฑุดุญ ุงูุฃูุถู ูุฏูุฑ ูุตุฏุฑ ุงูููุฑ. ูููููุง ุชุตูุฑ ูุฐุง ุนูู ุฃูู ุจูุงูุงุช ุงูุฎุฑูุทุฉ ุนู ุทุฑูู ูุณูุฉ ุงุฑุชูุงุน ุงูุฎููุฉ ุนูู ุงูุญุฏ ุงูุฃูุตู ููุงุฑุชูุงุน. ุญุชู ูุชู ุงูุญุตูู ุนูู ุงููุชูุฌุฉ ุจุงููุณุจุฉ ููุณุชูู ุงููุงุก ุ ุณูุทุฑุญูุง ูู ููุง ุงููุฑุชูุนูู ูุจู ุงูุชูุณูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> data = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(cell.Elevation - waterLevel) / (elevationMaximum - waterLevel); cell.SetMapData(data); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6f9/d80/2de/6f9d802de155c2b1e051be5d360dc3c1.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f5c/e8f/6a2/f5ce8f6a20d7336dc94b89812c123827.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุทูุจุฉ ูุงูุงุฑุชูุงุน. ุฑูู ุงูุฎุฑูุทุฉ ุงููุจูุฑุฉ 1208905299 ูุน ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุถู ุงููุฑุดุญูู ูู ุชูู ุงูุฎูุงูุง ุงูุชู ุชุญุชูู ุนูู ุฑุทูุจุฉ ุนุงููุฉ ูุงุฑุชูุงุน ุนุงู. ูููููุง ุงูุฌูุน ุจูู ูุฐู ุงููุนุงููุฑ ุนู ุทุฑูู ุถุฑุจูุง. ุณุชููู ุงููุชูุฌุฉ ูููุฉ ุงูููุงูุฉ ุฃู ุงููุฒู ููุตุงุฏุฑ ุงูุฃููุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> data = moisture * (cell.Elevation - waterLevel) / (elevationMaximum - waterLevel); cell.SetMapData(data);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ec2/31f/445/ec231f445d785c24c6cd9f191ed6c24a.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุฒุงู ููุตุงุฏุฑ ุงูุฃููุงุฑ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูุณุชุฎุฏู ูุฐู ุงูุฃูุฒุงู ูุฑูุถ ุงูุชุญุฏูุฏ ุงูุนุดูุงุฆู ููุฎููุฉ ุงููุตุฏุฑ. ุนูู ุงูุฑุบู ูู ุฃูู ูููููุง ุฅูุดุงุก ูุงุฆูุฉ ุจุงูุฃูุฒุงู ุงูุตุญูุญุฉ ูุงูุงุฎุชูุงุฑ ูู ุจูููุง ุ ุฅูุง ุฃู ูุฐุง ููุฌ ุบูุฑ ุชุงูู ููุจุทุฆ ุนูููุฉ ุงูุชูููุฏ. ุชุตููู ุฃุจุณุท ููุฃูููุฉ ููุณู ุฅูู ุฃุฑุจุนุฉ ูุณุชููุงุช ุณูููู ูุงููุงู ุจุงููุณุจุฉ ููุง. ุณูููู ุงููุฑุดุญูู ุงูุฃูุงุฆู ุฃูุฒุงููุง ุจููู ุฃุนูู ูู 0.75. ุงููุฑุดุญูู ุงูุฌูุฏูู ูุฏููู ุฃูุฒุงู ูู 0.5. ุงููุฑุดุญูู ุงููุคูููู ุฃูุจุฑ ูู 0.25. ูุชู ุชุฌุงูู ุฌููุน ุงูุฎูุงูุง ุงูุฃุฎุฑู. ุฏุนููุง ูุธูุฑ ููู ูุจุฏู ุจูุงููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> data = moisture * (cell.Elevation - waterLevel) / (elevationMaximum - waterLevel); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data &gt; <span class="hljs-number"><span class="hljs-number">0.75f</span></span>) { cell.SetMapData(<span class="hljs-number"><span class="hljs-number">1f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data &gt; <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) { cell.SetMapData(<span class="hljs-number"><span class="hljs-number">0.5f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data &gt; <span class="hljs-number"><span class="hljs-number">0.25f</span></span>) { cell.SetMapData(<span class="hljs-number"><span class="hljs-number">0.25f</span></span>); } <span class="hljs-comment"><span class="hljs-comment">// cell.SetMapData(data);</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/056/5ba/3b7/0565ba3b7a51499bfe1d389ecd270910.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฆุงุช ุฃูุฒุงู ูุตุงุฏุฑ ุงูุฃููุงุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ูุฎุทุท ุงูุชุตููู ูุฐุง ุ ูู ุงููุฑุฌุญ ุฃู ูุญุตู ุนูู ุฃููุงุฑ ุจูุตุงุฏุฑ ูู ุฃุนูู ุงูููุงุทู ูุฃูุซุฑูุง ุฑุทูุจุฉ ุนูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุง ูุฒุงู ุงุญุชูุงู ุฅูุดุงุก ุฃููุงุฑ ูู ููุงุทู ุฌุงูุฉ ุฃู ููุฎูุถุฉ ูุณุจููุง ุ ููุง ูุฒูุฏ ูู ุงูุชุจุงูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ </font></font><code>CreateRivers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุฃ ูุงุฆูุฉ ุงูุฎูุงูุง ุจูุงุกู ุนูู ูุฐู ุงููุนุงููุฑ. </font><font style="vertical-align: inherit;">ุชุชู ุฅุถุงูุฉ ุงูุฎูุงูุง ุงููุคููุฉ ุฅูู ูุฐู ุงููุงุฆูุฉ ูุฑุฉ ูุงุญุฏุฉ ุ ูุงูุฎูุงูุง ุงูุฌูุฏุฉ ูุฑุชูู ุ ูุงููุฑุดุญูู ุงูุฑุฆูุณููู ุฃุฑุจุน ูุฑุงุช. </font><font style="vertical-align: inherit;">ูุชู ุงูุชุฎูุต ูู ุงูุฎูุงูุง ุชุญุช ุงููุงุก ุฏุงุฆููุง ุ ูุฐูู ูุง ููููู ุงูุชุญูู ูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRivers</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { List&lt;HexCell&gt; riverOrigins = ListPool&lt;HexCell&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { HexCell cell = grid.GetCell(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IsUnderwater) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } ClimateData data = climate[i]; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> weight = data.moisture * (cell.Elevation - waterLevel) / (elevationMaximum - waterLevel); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (weight &gt; <span class="hljs-number"><span class="hljs-number">0.75f</span></span>) { riverOrigins.Add(cell); riverOrigins.Add(cell); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (weight &gt; <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) { riverOrigins.Add(cell); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (weight &gt; <span class="hljs-number"><span class="hljs-number">0.25f</span></span>) { riverOrigins.Add(cell); } } ListPool&lt;HexCell&gt;.Add(riverOrigins); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ุจุนุฏ </font></font><code>CreateClimate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฐูู ุญุชู ุชุชููุฑ ููุง ุจูุงูุงุช ุงูุฑุทูุจุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { โฆ CreateRegions(); CreateLand(); ErodeLand(); CreateClimate(); CreateRivers(); SetTerrainType(); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุชุตููู ุ ููููู ุงูุชุฎูุต ูู ุชุตูุฑ ุจูุงูุงุชู ุนูู ุงูุฎุฑูุทุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { โฆ <span class="hljs-comment"><span class="hljs-comment">// float data = // moisture * (cell.Elevation - waterLevel) / // (elevationMaximum - waterLevel); // if (data &gt; 0.6f) { // cell.SetMapData(1f); // } // else if (data &gt; 0.4f) { // cell.SetMapData(0.5f); // } // else if (data &gt; 0.2f) { // cell.SetMapData(0.25f); // } } }</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงุท ุงูููุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุนุฏุฏ ุงูุฃููุงุฑ ุงูุชู ูุญุชุงุฌูุงุ </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ูุฐู ุงููุนููุฉ ูุงุจูุฉ ููุชุฎุตูุต. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุทูู ุงูุฃููุงุฑ ูุฎุชูู ุ ุณูููู ูู ุงูููุทูู ุงูุชุญูู ููู ุจูุณุงุนุฏุฉ ููุงุท ุงูููุฑ ุ ุงูุชู ุชุญุฏุฏ ุนุฏุฏ ุฎูุงูุง ุงูุฃุฑุถ ุงูุชู ูุฌุจ ุฃู ุชุญุชูู ูููุง ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุนุจุฑ ุนููุง ููุณุจุฉ ูุฆููุฉ ุจุญุฏ ุฃูุตู 20ูช ููููุฉ ุงูุชุฑุงุถูุฉ 10ูช. </font><font style="vertical-align: inherit;">ูุซู ูุณุจุฉ ุงูุณูุดู ุ ูุฐู ูููุฉ ูุณุชูุฏูุฉ ูููุณุช ูุถูููุฉ. </font><font style="vertical-align: inherit;">ูุชูุฌุฉ ูุฐูู ุ ูุฏ ูููู ูุฏููุง ุนุฏุฏ ูููู ุฌุฏูุง ูู ุงููุฑุดุญูู ุฃู ุงูุฃููุงุฑ ุงูุชู ุชููู ุฃูุตุฑ ูู ุฃู ุชุบุทู ุงููุณุงุญุฉ ุงููุทููุจุฉ ูู ุงูุฃุฑุถ. </font><font style="vertical-align: inherit;">ูุฐุง ูู ุงูุณุจุจ ูู ุฃู ุงููุณุจุฉ ุงููุฆููุฉ ุงููุตูู ูุฌุจ ุฃูุง ุชููู ูุจูุฑุฉ ุฌุฏูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0, 20)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> riverPercentage = <span class="hljs-number"><span class="hljs-number">10</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/793/1c6/4cd/7931c64cd7bdffbb17f83a94aed1bbc3.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูู ุงูุฃููุงุฑ ูู ุงููุฆุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ููุงุท ุงูููุฑ ุ ูุนุจุฑูุง ุนููุง ุจุนุฏุฏ ุงูุฎูุงูุง ุ ูุญุชุงุฌ ุฅูู ุชุฐูุฑ ุนุฏุฏ ุฎูุงูุง ุงูุฃุฑุถ ุงูุชู ุชู ุฅูุดุงุคูุง ูููุง </font></font><code>CreateLand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cellCount, landCells; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateLand</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> landBudget = Mathf.RoundToInt(cellCount * landPercentage * <span class="hljs-number"><span class="hljs-number">0.01f</span></span>); landCells = landBudget; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> guard = <span class="hljs-number"><span class="hljs-number">0</span></span>; guard &lt; <span class="hljs-number"><span class="hljs-number">10000</span></span>; guard++) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (landBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"Failed to use up "</span></span> + landBudget + <span class="hljs-string"><span class="hljs-string">" land budget."</span></span>); landCells -= landBudget; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฏุงุฎู ุ </font></font><code>CreateRivers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุขู ุญุณุงุจ ุนุฏุฏ ููุงุท ุงูููุฑ ุจููุณ ุงูุทุฑููุฉ ุงูุชู ูููู ุจูุง </font></font><code>CreateLand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRivers</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { List&lt;HexCell&gt; riverOrigins = ListPool&lt;HexCell&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> riverBudget = Mathf.RoundToInt(landCells * riverPercentage * <span class="hljs-number"><span class="hljs-number">0.01f</span></span>); ListPool&lt;HexCell&gt;.Add(riverOrigins); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ุณูุณุชูุฑ ูู ุฃุฎุฐ ุงูุฎูุงูุง ุงูุนุดูุงุฆูุฉ ูุฅุฒุงูุชูุง ูู ุงููุงุฆูุฉ ุงูุฃุตููุฉ ุ ุจูููุง ูุง ุชุฒุงู ูุฏููุง ููุงุท ูุฎูุงูุง ูุตุฏุฑ. </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุงูุชูุงู ุนุฏุฏ ุงูููุงุท ุ ุณูุนุฑุถ ุชุญุฐูุฑูุง ูู ูุญุฏุฉ ุงูุชุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> riverBudget = Mathf.RoundToInt(landCells * riverPercentage * <span class="hljs-number"><span class="hljs-number">0.01f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (riverBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; riverOrigins.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, riverOrigins.Count); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lastIndex = riverOrigins.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>; HexCell origin = riverOrigins[index]; riverOrigins[index] = riverOrigins[lastIndex]; riverOrigins.RemoveAt(lastIndex); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (riverBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"Failed to use up river budget."</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุถูู ุทุฑููุฉ ูุฅูุดุงุก ุงูุฃููุงุฑ ูุจุงุดุฑุฉ. </font><font style="vertical-align: inherit;">ููุนููุฉ ุ ูุญุชุงุฌ ุฅูู ุฎููุฉ ุฃูููุฉ ุ ูุจุนุฏ ุงูุงูุชูุงุก ูุฌุจ ุนููู ุฅุฑุฌุงุน ุทูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุจุฏุฃ ุจุชุฎุฒูู ุทุฑููุฉ ุฅุฑุฌุงุน ุทูู ุตูุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell origin</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ูุทูู ุนูู ูุฐู ุงูุทุฑููุฉ ูู ููุงูุฉ ุงูุฏูุฑุฉ ุงูุชู ุฃุถููุงูุง ููุชู </font></font><code>CreateRivers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐูู ุจุงุณุชุฎุฏุงู ุชูููู ุนุฏุฏ ุงูููุงุท ุงููุชุจููุฉ. </font><font style="vertical-align: inherit;">ูุชุฃูุฏ ูู ุฅูุดุงุก ููุฑ ุฌุฏูุฏ ููุท ุฅุฐุง ูู ููู ููุฎููุฉ ุงููุญุฏุฏุฉ ููุฑ ูุชุฏูู ุนุจุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (riverBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; riverOrigins.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!origin.HasRiver) { riverBudget -= CreateRiver(origin); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃููุงุฑ ุงูุญุงููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุทูู ุฅูุดุงุก ุฃููุงุฑ ุชุชุฏูู ุฅูู ุงูุจุญุฑ ุฃู ูุณุทุญ ุขุฎุฑ ูู ุงูููุงู. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุจุฏุฃ ูู ุงููุตุฏุฑ ุ ูุญุตู ุนูู ุงูุทูู 1. ููุฑูุง ุ ูุฎุชุงุฑ ุฌุงุฑูุง ุนุดูุงุฆููุง ููุฒูุฏ ุงูุทูู. </font><font style="vertical-align: inherit;">ููุงุตู ุงูุชุญุฑู ุญุชู ูุตู ุฅูู ุงูุฎููุฉ ุชุญุช ุงููุงุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell origin</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = <span class="hljs-number"><span class="hljs-number">1</span></span>; HexCell cell = origin; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!cell.IsUnderwater) { HexDirection direction = (HexDirection)Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>); cell.SetOutgoingRiver(direction); length += <span class="hljs-number"><span class="hljs-number">1</span></span>; cell = cell.GetNeighbor(direction); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/359/7cf/7a7/3597cf7a7ae263721b381534185e7645.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ุงูุนุดูุงุฆูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฌุฉ ููุซู ูุฐุง ุงูููุฌ ุงูุณุงุฐุฌ ุ ูุญุตู ุนูู ุดุธุงูุง ููุฑ ูุชูุงุซุฑุฉ ุนุดูุงุฆููุง ุ ููุฑุฌุน ุฐูู ุฃุณุงุณูุง ุฅูู ุงุณุชุจุฏุงู ุงูุฃููุงุฑ ุงูุชู ุชู ุฅูุดุงุคูุง ุณุงุจููุง. </font><font style="vertical-align: inherit;">ูููู ุฃู ูุคุฏู ูุฐุง ุฅูู ุฃุฎุทุงุก ุ ูุฃููุง ูุง ูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุฌุงุฑ ููุฌูุฏูุง ุจุงููุนู. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุฌููุน ุงูุงุชุฌุงูุงุช ูู ุงูุญููุฉ ูุงูุชุฃูุฏ ูู ูุฌูุฏ ุฌุงุฑ ููุงู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุฅููุง ูุถูู ูุฐุง ุงูุงุชุฌุงู ุฅูู ูุงุฆูุฉ ุงุชุฌุงูุงุช ุงูุชุฏูู ุงููุญุชููุฉ ุ ูููู ููุท ุฅุฐุง ูู ูุชุฏูู ุงูููุฑ ุนุจุฑ ูุฐุง ุงูุฌุงุฑ ุญุชู ุงูุขู. </font><font style="vertical-align: inherit;">ุซู ุญุฏุฏ ูููุฉ ุนุดูุงุฆูุฉ ูู ูุฐู ุงููุงุฆูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> List&lt;HexDirection&gt; flowDirections = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;HexDirection&gt;(); โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell origin</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = <span class="hljs-number"><span class="hljs-number">1</span></span>; HexCell cell = origin; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!cell.IsUnderwater) { flowDirections.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!neighbor || neighbor.HasRiver) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } flowDirections.Add(d); } HexDirection direction = <span class="hljs-comment"><span class="hljs-comment">// (HexDirection)Random.Range(0, 6); flowDirections[Random.Range(0, flowDirections.Count)]; cell.SetOutgoingRiver(direction); length += 1; cell = cell.GetNeighbor(direction); } return length; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ูุฐุง ุงูููุฌ ุงูุฌุฏูุฏ ุ ูุฏ ูุง ูููู ูุฏููุง ุฃู ุงุชุฌุงู ุชุฏูู ูุชุงุญ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุญุฏุซ ูุฐุง ุ ูู ูุนุฏ ุงูููุฑ ูุชุฏูู ุฃูุซุฑ ููุฌุจ ุฃู ููุชูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุทูู ูู ูุฐู ุงููุญุธุฉ 1 ุ ููุฐุง ูุนูู ุฃูู ูุง ูููููุง ุงูุชุณุฑุจ ูู ุงูุฎููุฉ ุงูุฃุตููุฉ ุ ุฃู ุฃูู ูุง ูููู ุฃู ูููู ููุงู ููุฑ ุนูู ุงูุฅุทูุงู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุทูู ุงูููุฑ ุตูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> flowDirections.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flowDirections.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> ? length : <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e6f/5bd/05d/e6f5bd05d8d5a976d6fff9fa14397a25.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ุงููุญููุธุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุตูุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููู ุจุญูุธ ุงูุฃููุงุฑ ุงูุชู ุชู ุฅูุดุงุคูุง ุจุงููุนู ุ ูููู ูุง ูุฒุงู ุจุฅููุงููุง ุงูุญุตูู ุนูู ุดุธุงูุง ูุนุฒููุฉ ูู ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูุฃูู ุจูููุง ุชุฌุงูููุง ุงููุฑุชูุนุงุช. </font><font style="vertical-align: inherit;">ูู ูู ูุฑุฉ ุฃุฌุจุฑูุง ุงูููุฑ ุนูู ุงูุชุฏูู ุฅูู ุงุฑุชูุงุน ุฃูุจุฑ ุ </font></font><code>HexCell.SetOutgoingRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุทุน ูุฐู ุงููุญุงููุฉ ุ ููุง ุฃุฏู ุฅูู ุชูุฒู ูู ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุชุฎุทู ุงูุงุชุฌุงูุงุช ุงูุชู ุชุชุณุจุจ ูู ุชุฏูู ุงูุฃููุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!neighbor || neighbor.HasRiver) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> delta = neighbor.Elevation - cell.Elevation; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (delta &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } flowDirections.Add(d);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ae6/cf7/696/ae6cf76968d64228e88378749939f1f2.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ุชุชุฏูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ูุชุฎูุต ูู ุงูุนุฏูุฏ ูู ุดุธุงูุง ุงูุฃููุงุฑ ุ ูููู ูุง ูุฒุงู ุจุนุถูุง ููุฌูุฏูุง. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงููุญุธุฉ ุ ูุตุจุญ ุงูุชุฎูุต ูู ุฃูุซุฑ ุงูุฃููุงุฑ ูุจูุญุฉ ูุณุฃูุฉ ุชุญุณูู. </font><font style="vertical-align: inherit;">ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุชูุถู ุงูุฃููุงุฑ ุฃู ุชุชุฏูู ุจุฃุณุฑุน ููุช ูููู. </font><font style="vertical-align: inherit;">ูู ูุฎุชุงุฑูุง ุจุงูุถุฑูุฑุฉ ุฃูุตุฑ ุทุฑูู ูููู ุ ูููู ุงุญุชูุงููุฉ ุฐูู ูุจูุฑุฉ. </font><font style="vertical-align: inherit;">ููุญุงูุงุฉ ุฐูู ุ ุณูุถูู ุงุชุฌุงูุงุช ูุฃุณูู ุซูุงุซ ูุฑุงุช ุฅูู ุงููุงุฆูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (delta &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (delta &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { flowDirections.Add(d); flowDirections.Add(d); flowDirections.Add(d); } flowDirections.Add(d);</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฌูุจ ุงูููุนุทูุงุช ุงูุญุงุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชุฏูู ุ ูุฅู ุงููุงุก ูุญุชูู ุฃูุถูุง ุนูู ุงููุตูุฑ ุงูุฐุงุชู. </font><font style="vertical-align: inherit;">ูู ุงููุฑุฌุญ ุฃู ูุชุฏูู ุงูููุฑ ุจุดูู ูุณุชููู ุฃู ููุญูู ููููุงู ุนู ุงูุงูุนุทุงู ุงูุญุงุฏ ุงูููุงุฌุฆ. </font><font style="vertical-align: inherit;">ูููููุง ุฅุถุงูุฉ ูุฐุง ุงูุชุดููู ุจุชุชุจุน ุงูุงุชุฌุงู ุงูุฃุฎูุฑ ููููุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุงุชุฌุงู ุงููุญุชูู ููุชูุงุฑ ูุง ููุญุฑู ูุซูุฑูุง ุนู ูุฐุง ุงูุงุชุฌุงู ุ ููู ุจุฅุถุงูุชู ุฅูู ุงููุงุฆูุฉ ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุฐู ููุณุช ูุดููุฉ ูููุตุฏุฑ ุ ูุฐูู ุณูููู ุฏุงุฆููุง ุจุฅุถุงูุชูุง ูุฑุฉ ุฃุฎุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell origin</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = <span class="hljs-number"><span class="hljs-number">1</span></span>; HexCell cell = origin; HexDirection direction = HexDirection.NE; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!cell.IsUnderwater) { flowDirections.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (delta &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { flowDirections.Add(d); flowDirections.Add(d); flowDirections.Add(d); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( length == <span class="hljs-number"><span class="hljs-number">1</span></span> || (d != direction.Next2() &amp;&amp; d != direction.Previous2()) ) { flowDirections.Add(d); } flowDirections.Add(d); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flowDirections.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> ? length : <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// HexDirection direction = direction = flowDirections[Random.Range(0, flowDirections.Count)]; cell.SetOutgoingRiver(direction); length += 1; cell = cell.GetNeighbor(direction); } return length; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูููู ุจุดูู ูุจูุฑ ูู ุงุญุชูุงู ุฃู ุชููู ุงูุฃููุงุฑ ูุชุนุฑุฌุฉ ุชุจุฏู ูุจูุญุฉ. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/674/83b/ce7/67483bce79b287f3cc451e381dc686d2.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุนุทูุงุช ุงูุญุงุฏุฉ ุฃูู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชูุงุก ุงูููุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุนุถ ุงูุฃุญูุงู ุงุชุถุญ ุฃู ุงูููุฑ ูุชุฏูู ุจุฌูุงุฑ ูุตุฏุฑ ุงูููุฑ ุงูุฐู ุชู ุฅูุดุงุคู ูุณุจููุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุตุฏุฑ ูุฐุง ุงูููุฑ ุนูู ุงุฑุชูุงุน ุฃุนูู ุ ููููููุง ุฃู ููุฑุฑ ุฃู ุงูููุฑ ุงูุฌุฏูุฏ ูุชุฏูู ุฅูู ุงูููุฑ ุงููุฏูู. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ููุฑ ูุงุญุฏ ุทููู ุ ูููุณ ููุฑุงู ูุฌุงูุฑุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูู ูุณูุญ ููุฌุงุฑ ุจุงููุฑูุฑ ุฅูุง ุฅุฐุง ูุงู ููุงู ููุฑ ูุงุฑุฏ ููู ุ ุฃู ุฅุฐุง ูุงู ูุตุฏุฑ ุงูููุฑ ุงูุญุงูู. </font><font style="vertical-align: inherit;">ุจุนุฏ ุชุญุฏูุฏ ุฃู ูุฐุง ุงูุงุชุฌุงู ููุณ ูุฑุชูุนูุง ุ ูุชุญูู ููุฑู ูุง ุฅุฐุง ูุงู ููุงู ููุฑ ุตุงุฏุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ุ ูุฌุฏูุง ุงูููุฑ ุงููุฏูู ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฐุง ูุญุฏุซ ูุงุฏุฑูุง ุฌุฏูุง ุ ูู ูุดุงุฑู ูู ูุญุต ุงููุตุงุฏุฑ ุงููุฌุงูุฑุฉ ุงูุฃุฎุฑู ูุณูุฏูุฌ ุงูุฃููุงุฑ ุนูู ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-comment"><span class="hljs-comment">// if (!neighbor || neighbor.HasRiver) { // continue; // } if (!neighbor || neighbor == origin || neighbor.HasIncomingRiver) { continue; } int delta = neighbor.Elevation - cell.Elevation; if (delta &gt; 0) { continue; } if (neighbor.HasOutgoingRiver) { cell.SetOutgoingRiver(d); return length; }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bb3/820/ee6/bb3820ee6271b8bc7b32e901b39c906a.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3ba/d8f/08d/3bad8f08d23cfe3844ec259a1c2475d6.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ูุจู ูุจุนุฏ ุงูุชุฌููุน.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุจู ุนูู ูุณุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงููุฑุดุญูู ุงูุฌูุฏูู ููุฏูุฑ ุงููุตุฏุฑ ุนุงุฏุฉู ูุง ูุชู ุชุฌููุนูู ูุนูุง ุ ูุณูู ูุญุตู ุนูู ูุฌููุนุงุช ูู ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฏ ูููู ูุฏููุง ุฃููุงุฑ ุชุฃุฎุฐ ุงููุตุฏุฑ ุจุฌูุงุฑ ุงูุฎุฒุงู ูุจุงุดุฑุฉ ุ ููุง ูุคุฏู ุฅูู ุฃููุงุฑ ุทูููุง 1. ูููููุง ุชูุฒูุน ุงููุตุงุฏุฑ ุ ูุงูุชุฎูุต ูู ุชูู ุงูููุฌูุฏุฉ ุจุงููุฑุจ ูู ุงูููุฑ ุฃู ุงูุฎุฒุงู. </font><font style="vertical-align: inherit;">ูููู ุจุฐูู ุจุชุฌุงูุฒ ุฌูุฑุงู ุงููุตุฏุฑ ุงููุญุฏุฏ ูู ุญููุฉ ุฏุงุฎู </font></font><code>CreateRivers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุฌุฏูุง ุฌุงุฑูุง ููุชูู ุงูููุงุนุฏ ุ ูุฅู ุงููุตุฏุฑ ูุง ููุงุณุจูุง ููุฌุจ ุนูููุง ุชุฎุทููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (riverBudget &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; riverOrigins.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, riverOrigins.Count); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lastIndex = riverOrigins.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>; HexCell origin = riverOrigins[index]; riverOrigins[index] = riverOrigins[lastIndex]; riverOrigins.RemoveAt(lastIndex); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!origin.HasRiver) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isValidOrigin = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = origin.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor &amp;&amp; (neighbor.HasRiver || neighbor.IsUnderwater)) { isValidOrigin = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isValidOrigin) { riverBudget -= CreateRiver(origin); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนูู ุงูุฑุบู ูู ุฃู ุงูุฃููุงุฑ ุณุชุธู ุชุชุฏูู ุจุฌุงูุจ ุจุนุถูุง ุงูุจุนุถ ุ ุฅูุง ุฃููุง ุชููู ุฅูู ุชุบุทูุฉ ูุณุงุญุฉ ุฃูุจุฑ. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/887/bed/3a6/887bed3a6032b4bea508ee6ceda4a228.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f53/b85/428/f53b85428840118895d74f62b1c2d1a6.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูู ูุณุงูุฉ ููุนูุง.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุงูููุฑ ุจุจุญูุฑุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุตู ุฌููุน ุงูุฃููุงุฑ ุฅูู ุงูุฎุฒุงู ุ ูุจุนุถูุง ุนุงูู ูู ุงููุฏูุงู ุฃู ูุชู ุญุธุฑู ุจุณุจุจ ุงูุฃููุงุฑ ุงูุฃุฎุฑู. ูุฐู ููุณุช ูุดููุฉ ุฎุงุตุฉ ุ ูุฃูู ุบุงูุจูุง ูุง ุชุจุฏู ุงูุฃููุงุฑ ุงูุญููููุฉ ุฃูุถูุง ุชุฎุชูู. ูููู ุฃู ูุญุฏุซ ูุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงูุช ุชุชุฏูู ุชุญุช ุงูุฃุฑุถ ุ ุฃู ุชุชูุฑู ูู ููุทูุฉ ูุณุชููุนูุฉ ุฃู ุชุฌู. ูุง ุชุณุชุทูุน ุฃููุงุฑูุง ุชุตูุฑ ุฐูู ุ ูุฐูู ุชูุชูู ุจุจุณุงุทุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูููููุง ูุญุงููุฉ ุชูููู ุนุฏุฏ ูุซู ูุฐู ุงูุญุงูุงุช. ุนูู ุงูุฑุบู ูู ุฃููุง ูุง ูุณุชุทูุน ุชูุญูุฏ ุงูุฃููุงุฑ ุฃู ุฌุนููุง ุชุชุฏูู ุ ูููููุง ุฌุนููุง ุชูุชูู ุจุงูุจุญูุฑุงุช ุ ูุงูุชู ุบุงูุจูุง ูุง ุชูุฌุฏ ูู ุงููุงูุน ูุชุจุฏู ุฌูุฏุฉ. ููุฐุง</font></font><code>CreateRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุฑูุน ูุณุชูู ุงููุงุก ูู ุงูุฎููุฉ ุฅุฐุง ูุงุฌูุชู ูุดููุฉ. </font><font style="vertical-align: inherit;">ุชุนุชูุฏ ุฅููุงููุฉ ุญุฏูุซ ุฐูู ุนูู ุงูุญุฏ ุงูุฃุฏูู ูุงุฑุชูุงุน ุฌูุฑุงู ูุฐู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุฃุฌู ุชุชุจุน ุฐูู ุนูุฏ ุฏุฑุงุณุฉ ุงูุฌูุฑุงู ุ ููุฒู ุชุนุฏูู ุตุบูุฑ ููุฑูุฒ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!cell.IsUnderwater) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minNeighborElevation = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; flowDirections.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-comment"><span class="hljs-comment">// if (!neighbor || neighbor == origin || neighbor.HasIncomingRiver) { // continue; // } if (!neighbor) { continue; } if (neighbor.Elevation &lt; minNeighborElevation) { minNeighborElevation = neighbor.Elevation; } if (neighbor == origin || neighbor.HasIncomingRiver) { continue; } int delta = neighbor.Elevation - cell.Elevation; if (delta &gt; 0) { continue; } โฆ } โฆ }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุนูููุง ุ ูุนูููุง ุฃููุงู ุงูุชุญูู ููุง ุฅุฐุง ููุง ูุง ูุฒุงู ูู ุงููุตุฏุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุฅุฌุงุจุฉ ุจูุนู ุ ููู ุจุฅูุบุงุก ุงูููุฑ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ูุชุญูู ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุฌููุน ุงูุฌูุฑุงู ุนูู ุงูุฃูู ูุซู ุงูุฎููุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููููููุง ุฑูุน ุงูููุงู ุฅูู ูุฐุง ุงููุณุชูู. </font><font style="vertical-align: inherit;">ุณูุคุฏู ูุฐุง ุฅูู ุฅูุดุงุก ุจุญูุฑุฉ ูู ุฎููุฉ ูุงุญุฏุฉ ุ ูุง ูู ูุจูู ุงุฑุชูุงุน ุงูุฎููุฉ ุนูุฏ ููุณ ุงููุณุชูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุง ุนููู ุณูู ุชุนููู ุงูุงุฑุชูุงุน ุฃุณูู ูุณุชูู ุงููุงุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flowDirections.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// return length &gt; 1 ? length : 0; if (length == 1) { return 0; } if (minNeighborElevation &gt;= cell.Elevation) { cell.WaterLevel = minNeighborElevation; if (minNeighborElevation == cell.Elevation) { cell.Elevation = minNeighborElevation - 1; } } break; }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d60/7da/964/d607da964da18b71cd022c997661695c.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ee8/ab1/000/ee8ab10002cd3e36cefbcfe3980a8fbe.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงูุงุช ุงูุฃููุงุฑ ุจุฏูู ุจุญูุฑุงุช ูุจุญูุฑุงุช. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุงููุณุจุฉ ุงููุฆููุฉ ููุฃููุงุฑ ูู 20.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุญุธ ุฃูู ูุฏ ูููู ูุฏููุง ุงูุขู ุฎูุงูุง ุชุญุช ุงููุงุก ุฃุนูู ูู ูุณุชูู ุงูููุงู ุงููุณุชุฎุฏูุฉ ูุฅูุดุงุก ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุณูุดูุฑูู ุฅูู ุงูุจุญูุฑุงุช ููู ูุณุชูู ุณุทุญ ุงูุจุญุฑ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญูุฑุงุช ุฅุถุงููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฃูุถูุง ุฅูุดุงุก ุจุญูุฑุงุช ุ ุญุชู ูู ูู ููู ุนุงูููู. </font><font style="vertical-align: inherit;">ูุฏ ูุคุฏู ุฐูู ุฅูู ุชุฏูู ุงูููุฑ ูู ูุฅูู ุงูุจุญูุฑุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุนุงูููู ุ ููููู ุฅูุดุงุก ุจุญูุฑุฉ ุนู ุทุฑูู ุฑูุน ูุณุชูู ุงููุงุก ุซู ุงุฑุชูุงุน ุงูุฎููุฉ ุงูุญุงููุฉ ุ ุซู ุชูููู ุงุฑุชูุงุน ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ููุทุจู ูุฐุง ููุท ุนูุฏูุง ูููู ุงูุญุฏ ุงูุฃุฏูู ูุงุฑุชูุงุน ุงูุฌุงุฑ ูุณุงููุงู ุนูู ุงูุฃูู ูุงุฑุชูุงุน ุงูุฎููุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ูููู ุจุฐูู ูู ููุงูุฉ ุฏูุฑุฉ ุงูููุฑ ููุจู ุงูุงูุชูุงู ุฅูู ุงูุฎููุฉ ุงูุชุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!cell.IsUnderwater) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (minNeighborElevation &gt;= cell.Elevation) { cell.WaterLevel = cell.Elevation; cell.Elevation -= <span class="hljs-number"><span class="hljs-number">1</span></span>; } cell = cell.GetNeighbor(direction); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/945/5bb/2b6/9455bb2b6547a8b1342e179f15eb5925.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f84/516/4b7/f845164b7a543b9549cd9f07d273e67f.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูู ุจุญูุฑุงุช ุฅุถุงููุฉ ููุนูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุฏูุฏ ูู ุงูุจุญูุฑุงุช ุฌูููุฉ ุ ููู ุจูุง ุญุฏูุฏ ูููููุง ุฅูุดุงุก ุงููุซูุฑ ูู ุงูุจุญูุฑุงุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ูุถูู ุงุญุชูุงููุฉ ูุฎุตุตุฉ ูุจุญูุฑุงุช ุฅุถุงููุฉ ุ ูุน ูููุฉ ุงูุชุฑุงุถูุฉ 0.25.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> extraLakeProbability = <span class="hljs-number"><span class="hljs-number">0.25f</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูู ุชุชุญูู ูู ุงุญุชูุงููุฉ ุชูููุฏ ุจุญูุฑุฉ ุฅุถุงููุฉ ุ ุฅู ุฃููู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( minNeighborElevation &gt;= cell.Elevation &amp;&amp; Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; extraLakeProbability ) { cell.WaterLevel = cell.Elevation; cell.Elevation -= <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fa5/d04/bc3/fa5d04bc3f7475ec2baab7b6e7dac38f.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/118/bb4/364/118bb4364acb0646efb54a031d3ac356.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุฑุงุช ุฅุถุงููุฉ.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุนู ุฅูุดุงุก ุจุญูุฑุงุช ุชุญุชูู ุนูู ุฃูุซุฑ ูู ุฎููุฉ ูุงุญุฏุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     ,       ,  ,      .      .      :          .       ,       .  ,      ,     ,   . </div></div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุก ูู ุฃุญุฏ ุงูุนูุงูู ุงูุชู ูููู ุฃู ุชุญุฏุฏ ุงูููุทูุฉ ุงูุญูููุฉ ููุฎููุฉ. </font><font style="vertical-align: inherit;">ุนุงูู ุขุฎุฑ ููู ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูููููุง ูุญุงูุงุฉ ุชุฏูู ููุดุฑ ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ูุซู ูุญุงูุงุฉ ุงูููุงู ุ ูุฎูู ููุงุฎ ูุซูุฑ ููุงูุชูุงู ุ ุฅูุง ุฃููุง ุจุญุงุฌุฉ ุฅูู ุนุงูู ูุงุญุฏ ูุนูุฏ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนููุง ูุญุงูุธ ุนูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุจุณูุทุฉ ููุถุนูุง ููู ุฎููุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุฎุท ุงูุนุฑุถ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฃุซูุฑ ุงูุฃูุจุฑ ุนูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูู ุฎุท ุงูุนุฑุถ. </font><font style="vertical-align: inherit;">ุฅูู ุญุงุฑ ุนูุฏ ุฎุท ุงูุงุณุชูุงุก ุ ุจุงุฑุฏ ุนูุฏ ุงููุทุจูู ุ ูููุงู ุงูุชูุงู ุณูุณ ุจููููุง. </font><font style="vertical-align: inherit;">ุฏุนููุง ููุดุฆ ุทุฑููุฉ </font></font><code>DetermineTemperature</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนูุฏ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุฎููุฉ ูุนููุฉ. </font><font style="vertical-align: inherit;">ููุจุฏุก ุ ูุณุชุฎุฏู ุจุจุณุงุทุฉ ุฅุญุฏุงุซูุงุช Z ููุฎููุฉ ููุณููุฉ ุนูู ุงูุจุนุฏ Z ูุฎุท ุนุฑุถ ุ ุซู ูุณุชุฎุฏู ูุฐู ุงููููุฉ ูุฏุฑุฌุฉ ุญุฑุงุฑุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DetermineTemperature</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> latitude = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)cell.coordinates.Z / grid.cellCountZ; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> latitude; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฏ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ </font></font><code>SetTerrainType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุชุฎุฏููุง ูุจูุงูุงุช ุฎุฑุงุฆุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { HexCell cell = grid.GetCell(i); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> temperature = DetermineTemperature(cell); cell.SetMapData(temperature); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> moisture = climate[i].moisture; โฆ } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/789/7f6/334/7897f63347b08fdb02ee5794f3ab28e3.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุท ุงูุนุฑุถ ูุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุ ูุตู ุงููุฑุฉ ุงูุฌููุจู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุตู ุนูู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุฎุทูุฉ ูุชุฒุงูุฏุฉ ูู ุงูุฃุณูู ุฅูู ุงูุฃุนูู. </font><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงูู ููุญุงูุงุฉ ูุตู ุงููุฑุฉ ุงูุฌููุจู ุ ูุน ูุฌูุฏ ูุทุจ ูู ุงูุฃุณูู ูุฎุท ุงูุงุณุชูุงุก ูู ุงูุฃุนูู. </font><font style="vertical-align: inherit;">ููููุง ูุณูุง ุจุญุงุฌุฉ ููุตู ูุตู ุงููุฑุฉ ุงูุฃุฑุถูุฉ ุจุฃูููู. </font><font style="vertical-align: inherit;">ูุน ุงุฎุชูุงู ุฃุตุบุฑ ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุฃู ูุง ูุฑู ุนูู ุงูุฅุทูุงู ุ ูููููุง ูุตู ููุทูุฉ ุฃุตุบุฑ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุณูุฌุนู ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ุงูููุฎูุถุฉ ูุงูุนุงููุฉ ูุงุจูุฉ ููุชุฎุตูุต. </font><font style="vertical-align: inherit;">ุณูุญุฏุฏ ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ูุฐู ูู ุงููุทุงู ูู 0 ุฅูู 1 ุ ููุณุชุฎุฏู ุงูููู ุงููุตูู ูููู ุงูุชุฑุงุถูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lowTemperature = <span class="hljs-number"><span class="hljs-number">0f</span></span>; [Range(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> highTemperature = <span class="hljs-number"><span class="hljs-number">1f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3b1/8cf/805/3b18cf805a56a0dbbeabb03b69a00496.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒููุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุจู ูุทุงู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุจุงุณุชุฎุฏุงู ุงูุงุณุชููุงุก ุงูุฎุทู ุ ุจุงุณุชุฎุฏุงู ุฎุท ุงูุนุฑุถ ููููุจ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุนุจุฑ ุนู ุฎุท ุงูุนุฑุถ ููููุฉ ูู 0 ุฅูู 1 ุ ูููููุง ุงุณุชุฎุฏุงูู </font></font><code>Mathf.LerpUnclamped</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DetermineTemperature</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> latitude = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)cell.coordinates.Z / grid.cellCountZ; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> temperature = Mathf.LerpUnclamped(lowTemperature, highTemperature, latitude); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temperature; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃู ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ุงูููุฎูุถุฉ ููุณุช ุจุงูุถุฑูุฑุฉ ุฃูู ูู ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ุงููุฑุชูุนุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ููููู ููุจูุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุตู ุงููุฑุฉ ุงูุฃุฑุถูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ูุญุงูุงุฉ ูุตู ุงููุฑุฉ ุงูุฌููุจู ุ ูุฑุจูุง ุงููุตู ุงูุดูุงูู ุ ุฅุฐุง ุฃุฎุฐูุง ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ุฃููุงู. </font><font style="vertical-align: inherit;">ูููู ูู ุงูุฃูุณุจ ุงุณุชุฎุฏุงู ุฎูุงุฑ ุชูููู ูููุตู ููุชุจุฏูู ุจูู ูุตูู ุงููุฑุฉ ุงูุฃุฑุถูุฉ. </font><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ุชุนุฏุงุฏ ููุฌุงู ูู. </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ุณูุถูู ุฃูุถูุง ุฎูุงุฑ ุฅูุดุงุก ูุตูู ุงููุฑุฉ ุงูุฃุฑุถูุฉ ุ ูุงูุฐู ููุทุจู ุจุดูู ุงูุชุฑุงุถู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> HemisphereMode { Both, North, South } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HemisphereMode hemisphere;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/be8/c67/03f/be8c6703f51cd7c62535a96a3035a284.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชูุงุฑ ูุตู ุงููุฑุฉ ุงูุฃุฑุถูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ูุตู ุงููุฑุฉ ุงูุดูุงูู ุ ููููููุง ุจุจุณุงุทุฉ ููุจ ุฎุท ุงูุนุฑุถ ูุทุฑุญู ูู 1. ููุญุงูุงุฉ ูุตูู ุงููุฑุฉ ุงูุฃุฑุถูุฉ ุ ูุฌุจ ุฃู ูููู ุงููุทุจูู ุฃุณูู ุงูุฎุฑูุทุฉ ูููููุง ุ ููุฌุจ ุฃู ูููู ุฎุท ุงูุงุณุชูุงุก ูู ุงูููุชุตู. </font><font style="vertical-align: inherit;">ููููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ูุถุงุนูุฉ ุฎุท ุงูุนุฑุถ ุ ุจูููุง ุชุชู ูุนุงูุฌุฉ ุงููุตู ุงูุณููู ูู ุงููุฑุฉ ุงูุฃุฑุถูุฉ ุจุดูู ุตุญูุญ ุ ูุณูููู ููุฌุฒุก ุงูุนููู ุฎุท ุนุฑุถ ูู 1 ุฅูู 2. ูุฅุตูุงุญ ุฐูู ุ ูุทุฑุญ ุฎุท ุงูุนุฑุถ ูู 2 ุนูุฏูุง ูุชุฌุงูุฒ 1.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DetermineTemperature</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> latitude = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)cell.coordinates.Z / grid.cellCountZ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hemisphere == HemisphereMode.Both) { latitude *= <span class="hljs-number"><span class="hljs-number">2f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (latitude &gt; <span class="hljs-number"><span class="hljs-number">1f</span></span>) { latitude = <span class="hljs-number"><span class="hljs-number">2f</span></span> - latitude; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hemisphere == HemisphereMode.North) { latitude = <span class="hljs-number"><span class="hljs-number">1f</span></span> - latitude; } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> temperature = Mathf.LerpUnclamped(lowTemperature, highTemperature, latitude); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temperature; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9c7/871/ede/9c7871ede0c56a393bc603ec888c65bf.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูุตูู ุงููุฑุฉ ุงูุฃุฑุถูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุฐุง ูุฎูู ุฅููุงููุฉ ุฅูุดุงุก ุฎุฑูุทุฉ ุบุฑูุจุฉ ูููู ูููุง ุฎุท ุงูุงุณุชูุงุก ุจุงุฑุฏูุง ูุชููู ุงูุฃุนูุฏุฉ ุฏุงูุฆุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุง ุฒุงุฏ ุงูุจุฑูุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฎุท ุงูุนุฑุถ ุ ุชุชุฃุซุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุฃูุถูุง ุจุดูู ูุจูุฑ ุจุงูุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ูู ุงููุชูุณุท โโุ ูููุง ุตุนุฏูุง ุฃุนูู ุ ูููุง ุงุฒุฏุงุฏ ุจุฑูุฏุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุชุญููู ูุฐุง ุฅูู ุนุงูู ุ ููุง ูุนููุง ูุน ูุฑุดุญู ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุณุชุฎุฏู ุงุฑุชูุงุน ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููุฎูุถ โโูุฐุง ุงููุคุดุฑ ูุน ุงูุงุฑุชูุงุน ุ ุฃู ูุณุงูู 1 ูุงูุต ุงูุงุฑุชูุงุน ููุณูููุง ุนูู ุงูุญุฏ ุงูุฃูุตู ุจุงููุณุจุฉ ููุณุชูู ุงููุงุก. </font><font style="vertical-align: inherit;">ุญุชู ูุง ููุฎูุถ โโุงููุคุดุฑ ุนูู ุฃุนูู ูุณุชูู ุฅูู ุงูุตูุฑ ุ ูุถูู ุฅูู ุงูููุณูู ุนููู. </font><font style="vertical-align: inherit;">ุซู ุงุณุชุฎุฏู ูุฐุง ุงููุคุดุฑ ูููุงุณ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> temperature = Mathf.LerpUnclamped(lowTemperature, highTemperature, latitude); temperature *= <span class="hljs-number"><span class="hljs-number">1f</span></span> - (cell.ViewElevation - waterLevel) / (elevationMaximum - waterLevel + <span class="hljs-number"><span class="hljs-number">1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temperature;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/75e/a24/550/75ea24550d4325e2af45a1a9627cc53c.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุคุซุฑ ุงูุงุฑุชูุงุน ุนูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชููุจุงุช ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฃู ูุฌุนู ุจุณุงุทุฉ ุชุฏุฑุฌ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุฃูู ููุญูุธุฉ ุจุฅุถุงูุฉ ุชููุจุงุช ุนุดูุงุฆูุฉ ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. </font><font style="vertical-align: inherit;">ูุฑุตุฉ ุตุบูุฑุฉ ูุฌุนููุง ุฃูุซุฑ ูุงูุนูุฉ ุ ูููู ูุน ุงููุซูุฑ ูู ุงูุชููุจุงุช ุ ุณุชุจุฏู ุชุนุณููุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฌุนู ููุฉ ุชููุจุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงุจูุฉ ููุชุฎุตูุต ูุงูุชุนุจูุฑ ุนููุง ูุญุฏ ุฃูุตู ููุงูุญุฑุงู ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุจูููุฉ ุงูุชุฑุงุถูุฉ ุชุจูุบ 0.1.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(0f, 1f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> temperatureJitter = <span class="hljs-number"><span class="hljs-number">0.1f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/27d/e21/83f/27de2183fc453ded3c2902d4705cd1eb.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูู ุชููุจุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ูุฐู ุงูุชููุจุงุช ุณูุณุฉ ูุน ุชุบููุฑุงุช ูุญููุฉ ุทูููุฉ. </font><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ูุณูุฌ ุงูุถุฌูุฌ ูุฏููุง ููุฐุง ุงูุบุฑุถ. </font><font style="vertical-align: inherit;">ุณูุณุชุฏุนู </font></font><code>HexMetrics.SampleNoise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุชุฎุฏู ูุญุฌุฉ ููุถุน ุงูุฎููุฉ ุ ูููุณุฉ ุจููุฏุงุฑ 0.1. </font><font style="vertical-align: inherit;">ููุฃุฎุฐ ุงูููุงุฉ W ููุฑูุฒูุง ูููุณุนูุง ุจูุนุงูู ุงูุชุฐุจุฐุจ. </font><font style="vertical-align: inherit;">ุซู ูุถูู ูุฐู ุงููููุฉ ุฅูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุงููุญุณูุจุฉ ูุณุจููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> temperature *= <span class="hljs-number"><span class="hljs-number">1f</span></span> - (cell.ViewElevation - waterLevel) / (elevationMaximum - waterLevel + <span class="hljs-number"><span class="hljs-number">1f</span></span>); temperature += (HexMetrics.SampleNoise(cell.Position * <span class="hljs-number"><span class="hljs-number">0.1f</span></span>).w * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * temperatureJitter; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temperature;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/490/92c/2c8/49092c2c88aaad00d5c54835c6511a74.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dac/7d9/3cd/dac7d93cdb115574c748269ffebb3d8d.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุจุงุช ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ูุน ููู 0.1 ู 1.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุง ุฅุถุงูุฉ ุชุบูุฑ ุทููู ูู ุงูุชููุจุงุช ูู ูู ุฎุฑูุทุฉ ุ ูุงุฎุชูุงุฑ ุนุดูุงุฆู ูู ูููุงุช ุงูุถูุถุงุก ุงูุฃุฑุจุนุฉ. </font><font style="vertical-align: inherit;">ุงุถุจุท ุงูููุงุฉ ูุฑุฉ ูุงุญุฏุฉ </font></font><code>SetTerrainType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ูู ุจููุฑุณุฉ ูููุงุช ุงูุฃููุงู ูููุง </font></font><code>DetermineTemperature</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> temperatureJitterChannel; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { temperatureJitterChannel = Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { โฆ } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DetermineTemperature</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> jitter = HexMetrics.SampleNoise(cell.Position * <span class="hljs-number"><span class="hljs-number">0.1f</span></span>)[temperatureJitterChannel]; temperature += (jitter * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * temperatureJitter; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temperature; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/30c/e82/084/30ce820847299346ec8dfaf2bb6cf1a8.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุจุงุช ูุฎุชููุฉ ูู ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ุจุฃูุตู ููุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุฏููุง ุจูุงูุงุช ุนู ุงูุฑุทูุจุฉ ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุ ูููููุง ุฅูุดุงุก ูุตูููุฉ ุจููู. </font><font style="vertical-align: inherit;">ูู ุฎูุงู ููุฑุณุฉ ูุฐู ุงููุตูููุฉ ุ ูููููุง ุชุนููู ุงูููุงุทู ุงูุญูููุฉ ูุฌููุน ุงูุฎูุงูุง ุ ูุฎูู ูุดูุฏ ุฃูุซุฑ ุชุนููุฏูุง ูู ุงุณุชุฎุฏุงู ุจูุนุฏ ุจูุงูุงุช ูุงุญุฏ ููุท.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุตูููุฉ ุจููู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุงูุนุฏูุฏ ูู ุงูููุงุฐุฌ ุงูููุงุฎูุฉ ุ ููููุง ูู ูุณุชุฎุฏู ุฃููุง ูููุง. ุณูุฌุนู ุงูุฃูุฑ ุจุณูุทูุง ููุบุงูุฉ ุ ูุญู ููุชููู ููุท ุจุงูููุทู. ุฌุงู ูุนูู ุตุญุฑุงุก (ุจุงุฑุฏุฉ ุฃู ุณุงุฎูุฉ) ุ ูุฃููุง ูุณุชุฎุฏู ุงูุฑูู. ุงูุจุฑุฏ ูุงูุฑุทุจ ูุนูู ุงูุซูุฌ. ุงูุญุงุฑุฉ ูุงูุฑุทุจุฉ ุชุนูู ุงููุซูุฑ ูู ุงููุจุงุชุงุช ุ ุฃู ุงูุนุดุจ. ูููุง ุจูููุง ุณูููู ูุฏููุง ุงูุชุงูุบุง ุฃู ุงูุชูุฏุฑุง ุ ูุงูุชู ุณูุทูู ุนูููุง ุงุณู ูุงุฏุฉ ุฑูุงุฏูุฉ ููุฃุฑุถ. ูุตูููุฉ 4 ร 4 ุณุชููู ูุงููุฉ ูุฅูุดุงุก ุงูุชูุงูุงุช ุจูู ูุฐู ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุณุงุจู ุ ูููุง ุจุชุนููู ุฃููุงุน ุงูุงุฑุชูุงุนุงุช ุงุณุชูุงุฏูุง ุฅูู ุฎูุณุฉ ูุชุฑุงุช ุฑุทูุจุฉ. ูุฎูุถ ุจุจุณุงุทุฉ ุงูุดุฑูุท ุงูุฃูุซุฑ ุฌูุงูุงู ุฅูู 0.05 ุ ููููุฑ ุงูุจุงูู. ุจุงููุณุจุฉ ููุทุงูุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุ ูุณุชุฎุฏู 0.1 ู 0.3 ู 0.6 ูุฃุนูู. ููุฑุงุญุฉ ุ ุณูููู ุจุชุนููู ูุฐู ุงูููู ูู ุตูุงุฆู ุซุงุจุชุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] temperatureBands = { <span class="hljs-number"><span class="hljs-number">0.1f</span></span>, <span class="hljs-number"><span class="hljs-number">0.3f</span></span>, <span class="hljs-number"><span class="hljs-number">0.6f</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] moistureBands = { <span class="hljs-number"><span class="hljs-number">0.12f</span></span>, <span class="hljs-number"><span class="hljs-number">0.28f</span></span>, <span class="hljs-number"><span class="hljs-number">0.85f</span></span> };</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ูุญุฏุฏ ููุท ููุน ุงูุฅุบุงุซุฉ ุนูู ุฃุณุงุณ biome ุ ูููููุง ุงุณุชุฎุฏุงูู ูุชุญุฏูุฏ ุงููุนููุงุช ุงูุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ูุญุฏุฏ ูู </font></font><code>HexMapGenerator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู </font></font><code>Biome</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตู ุชูููู ูุฌุงู ุญููู ูุฑุฏู. </font><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ูุญุชูู ููุท ุนูู ูุคุดุฑ ุงููุชูุก ุจุงูุฅุถุงูุฉ ุฅูู ุทุฑููุฉ ุงูููุดุฆ ุงูููุงุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Biome { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> terrain; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Biome</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> terrain</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.terrain = terrain; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฐู ุงูุจููุฉ ูุฅูุดุงุก ุตููู ุซุงุจุช ูุญุชูู ุนูู ุจูุงูุงุช ุงููุตูููุฉ. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุงูุฑุทูุจุฉ ูุซู ุฅุญุฏุงุซูุงุช X ุ ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุซู Y. ูููุฃ ุงูุฎุท ุจุฃูู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุจุงูุซูุฌ ุ ูุงูุฎุท ุงูุซุงูู ุจุงูุชูุฏุฑุง ุ ูุงูุงุซูุงู ุงูุขุฎุฑุงู ุจุงูุนุดุจ. </font><font style="vertical-align: inherit;">ุซู ูุณุชุจุฏู ุงูุนููุฏ ุงูุฃูุซุฑ ุฌูุงูุงู ุจุงูุตุญุฑุงุก ุ ููุนูุฏ ุชุญุฏูุฏ ุฎูุงุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Biome[] biomes = { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">4</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">4</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">4</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>) };</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/969/859/bd5/969859bd51e51cce1f7fe63d9eacd55a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูููุฉ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุจูุคุดุฑุงุช ุตููู ุฃุญุงุฏู ุงูุจุนุฏ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนุฑูู ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฏูุฏ </font></font><code>SetTerrainType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงูุง </font><font style="vertical-align: inherit;">ูู ุงูููุทูุฉ </font><font style="vertical-align: inherit;">ุงูุฃุญูุงุฆูุฉ ุ ุณูุชุฌูู ูู ูุทุงูุงุช ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ูุงูุฑุทูุจุฉ ูู ุงูุฏูุฑุฉ ูุชุญุฏูุฏ ูุคุดุฑุงุช ุงููุตูููุฉ ุงูุชู ูุญุชุงุฌูุง. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏููุง ููุญุตูู ุนูู ุงููุชูุฉ ุงูุญูููุฉ ุงููุทููุจุฉ ูุชุญุฏูุฏ ููุน ุชุถุงุฑูุณ ุงูุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { temperatureJitterChannel = Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { HexCell cell = grid.GetCell(i); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> temperature = DetermineTemperature(cell); <span class="hljs-comment"><span class="hljs-comment">// cell.SetMapData(temperature); float moisture = climate[i].moisture; if (!cell.IsUnderwater) { // if (moisture &lt; 0.05f) { // cell.TerrainTypeIndex = 4; // } // โฆ // else { // cell.TerrainTypeIndex = 2; // } int t = 0; for (; t &lt; temperatureBands.Length; t++) { if (temperature &lt; temperatureBands[t]) { break; } } int m = 0; for (; m &lt; moistureBands.Length; m++) { if (moisture &lt; moistureBands[m]) { break; } } Biome cellBiome = biomes[t * 4 + m]; cell.TerrainTypeIndex = cellBiome.terrain; } else { cell.TerrainTypeIndex = 2; } } }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/00d/d32/4f5/00dd324f5b421811f49ca157e5217e43.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุบุงุซุฉ ุนูู ุฃุณุงุณ ูุตูููุฉ ุงูููุงุทู ุงูุญูููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุนุฏุงุฏ Biome </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุชุฌุงูุฒ ุงูุจููููุงุช ุงููุญุฏุฏุฉ ูู ุงููุตูููุฉ. ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููุตูููุฉ ุ ูุชู ุชุนุฑูู ุฌููุน ุงูููุงุทู ุงูุฌุงูุฉ ุนูู ุฃููุง ุตุญุงุฑู ุฑูููุฉ ุ ูููู ููุณ ูู ุงูุตุญุงุฑู ุงูุฌุงูุฉ ูููุฆุฉ ุจุงูุฑูู. ููุงู ุงูุนุฏูุฏ ูู ุงูุตุญุงุฑู ุงูุตุฎุฑูุฉ ุงูุชู ุชุจุฏู ูุฎุชููุฉ ุชูุงููุง. ูุฐูู ุ ุฏุนูุง ูุณุชุจุฏู ุจุนุถ ุงูุฎูุงูุง ุงูุตุญุฑุงููุฉ ุจุงูุญุฌุงุฑุฉ. ุณูููู ุจุฐูู ุจุจุณุงุทุฉ ุนูู ุฃุณุงุณ ุงูุงุฑุชูุงุน: ุงูุฑูู ุนูู ุงุฑุชูุงุนุงุช ููุฎูุถุฉ ุ ูุนุงุฏุฉ ูุง ุชูุฌุฏ ุงูุตุฎูุฑ ุงูุนุงุฑูุฉ ุฃุนูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุชุฑุถ ุฃู ุงูุฑูู ูุชุญูู ุฅูู ุญุฌุฑ ุนูุฏูุง ูููู ุงุฑุชูุงุน ุงูุฎููุฉ ุฃูุฑุจ ุฅูู ุงูุงุฑุชูุงุน ุงูุฃูุตู ูู ูุณุชูู ุงููุงุก. ูุฐุง ูู ุฎุท ุงุฑุชูุงุน ุงูุตุญุงุฑู ุงูุตุฎุฑูุฉ ุงูุชู ูููููุง ุญุณุงุจูุง ูู ุงูุจุฏุงูุฉ </font></font><code>SetTerrainType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุนูุฏูุง ููุชูู ุจุฎููุฉ ุจุงูุฑูู ุ ููููู ุงุฑุชูุงุนูุง ูุจูุฑูุง ุจูุง ููู ุงูููุงูุฉ ุ ูุบูุฑ ุฑุงุญุฉ ุงูููุทูุฉ ุงูุญูููุฉ ุฅูู ุญุฌุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { temperatureJitterChannel = Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rockDesertElevation = elevationMaximum - (elevationMaximum - waterLevel) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cellCount; i++) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!cell.IsUnderwater) { โฆ Biome cellBiome = biomes[t * <span class="hljs-number"><span class="hljs-number">4</span></span> + m]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cellBiome.terrain == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation &gt;= rockDesertElevation) { cellBiome.terrain = <span class="hljs-number"><span class="hljs-number">3</span></span>; } } cell.TerrainTypeIndex = cellBiome.terrain; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cell.TerrainTypeIndex = <span class="hljs-number"><span class="hljs-number">2</span></span>; } } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1e4/812/13e/1e481213eb2c9b5cf5216b9bfa9546aa.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุตุญุงุฑู ุงูุฑูููุฉ ูุงูุตุฎุฑูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุบููุฑ ุขุฎุฑ ูุนุชูุฏ ุนูู ุงูุงุฑุชูุงุน ูู ุฅุฌุจุงุฑ ุงูุฎูุงูุง ุนูู ุฃูุตู ุงุฑุชูุงุน ุนูู ุงูุชุญูู ุฅูู ููู ุซูุฌูุฉ ุ ุจุบุถ ุงููุธุฑ ุนู ุฏุฑุฌุฉ ุญุฑุงุฑุชูุง ุ ููุท ุฅุฐุง ูู ุชูู ุฌุงูุฉ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ุณูุคุฏู ุฐูู ุฅูู ุฒูุงุฏุฉ ุงุญุชูุงููุฉ ูุฌูุฏ ููู ุซูุฌูุฉ ุจุงููุฑุจ ูู ุฎุท ุงูุงุณุชูุงุก ุงูุญุงุฑ ูุงูุฑุทุจ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cellBiome.terrain == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation &gt;= rockDesertElevation) { cellBiome.terrain = <span class="hljs-number"><span class="hljs-number">3</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation == elevationMaximum) { cellBiome.terrain = <span class="hljs-number"><span class="hljs-number">4</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9c4/06e/35b/9c406e35b681819072db7a3006151e6c.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุบุทูุฉ ุซููุฌ ุนูู ุฃูุตู ุงุฑุชูุงุน.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุจุงุชุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุฏุนููุง ูุฌุนู ุงูููุงุทู ุงูุญูููุฉ ุชุญุฏุฏ ูุณุชูู ุงูุฎูุงูุง ุงููุจุงุชูุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุฃุถู ุฅูู </font></font><code>Biome</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูู ุงููุจุงุชุงุช ูุฃุฏุฑุฌู ูู ุงูููุดุฆ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Biome { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> terrain, plant; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Biome</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> terrain, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> plant</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.terrain = terrain; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.plant = plant; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููู ููุงู ูุจุงุชุงุช ุนูู ุงูุฅุทูุงู ูู ุงูููุงุทู ุงูุฃุจุฑุฏ ูุงูุฃูุซุฑ ุจุฑูุฏุฉ. </font><font style="vertical-align: inherit;">ูู ุฌููุน ุงูููุงุญู ุงูุฃุฎุฑู ุ ูููุง ูุงู ุงูููุงุฎ ุฃูุซุฑ ุฏูุฆูุง ูุฑุทูุจุฉ ุ ุฒุงุฏ ุนุฏุฏ ุงููุจุงุชุงุช. </font><font style="vertical-align: inherit;">ูุชููู ุงูุนููุฏ ุงูุซุงูู ูู ุงูุฑุทูุจุฉ ุงููุณุชูู ุงูุฃูู ููุท ูู ุงููุจุงุชุงุช ููุตู ุงูุฃูุซุฑ ุณุฎููุฉ ุ ูุจุงูุชุงูู [0 ุ 0 ุ 0 ุ 1]. </font><font style="vertical-align: inherit;">ูููู ุงูุนููุฏ ุงูุซุงูุซ ุจุฒูุงุฏุฉ ุงููุณุชููุงุช ุจููุฏุงุฑ ูุงุญุฏ ุ ุจุงุณุชุซูุงุก ุงูุซูุฌ ุ ุฃู [0 ุ 1 ุ 1 ุ 2]. </font><font style="vertical-align: inherit;">ููุฒูุฏูุง ุงูุนููุฏ ุงููุจูู ูุฑุฉ ุฃุฎุฑู ุ ุฃู ุฃูู ูุชุจูู [0 ุ 2 ุ 2 ุ 3]. </font><font style="vertical-align: inherit;">ูู ุจุชุบููุฑ ุงูุตููู </font></font><code>biomes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนู ุทุฑูู ุฅุถุงูุฉ ุชูููู ุงููุตูุน ุฅููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Biome[] biomes = { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Biome(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) };</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f94/bad/c72/f94badc7211d1891415dda94019bf041.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูููุฉ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุจูุณุชููุงุช ูุจุงุชูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุชุญุฏูุฏ ูุณุชูู ุงููุจุงุชุงุช ููุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> cell.TerrainTypeIndex = cellBiome.terrain; cell.PlantLevel = cellBiome.plant;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ed9/2c6/7f8/ed92c67f8322c4b0c9967c0f394507bf.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจููู ูุน ุงููุจุงุชุงุช.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุจุฏู ุงููุจุงุชุงุช ุงูุขู ูุฎุชููุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">       ,      .       (1, 2, 1)  (0.75, 1, 0.75).     (1.5, 3, 1.5)  (2, 1.5, 2).    โ (2, 4.5, 2)  (2.5, 3, 2.5). <br><br>        ,      : (13, 114, 0). </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุชุบููุฑ ูุณุชูู ุงููุจุงุชุงุช ููููุงุทู ุงูุญูููุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฃููุงู ุฅูู ุงูุชุฃูุฏ ูู ุนุฏู ุธููุฑูุง ุนูู ุงูุชุถุงุฑูุณ ุงูุซูุฌูุฉ ุ ูุงูุชู ูููููุง ุฅุนุฏุงุฏูุง ุจุงููุนู. </font><font style="vertical-align: inherit;">ุซุงูููุง ุ ุฏุนูุง ูุฒูุฏ ูู ูุณุชูู ุงููุจุงุชุงุช ุนูู ุทูู ุงูุฃููุงุฑ ุ ุฅุฐุง ูู ููู ุจุงููุนู ูู ุงูุญุฏ ุงูุฃูุตู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cellBiome.terrain == <span class="hljs-number"><span class="hljs-number">4</span></span>) { cellBiome.plant = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cellBiome.plant &lt; <span class="hljs-number"><span class="hljs-number">3</span></span> &amp;&amp; cell.HasRiver) { cellBiome.plant += <span class="hljs-number"><span class="hljs-number">1</span></span>; } cell.TerrainTypeIndex = cellBiome.terrain; cell.PlantLevel = cellBiome.plant;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bd1/012/7e4/bd10127e45593cc5f8ce09faa783b10c.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุงุชุงุช ูุนุฏูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุชุญุช ุงููุงุก </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุชูู ุงููุญุธุฉ ุ ุชุฌุงูููุง ุงูุฎูุงูุง ุชุญุช ุงููุงุก ุชูุงููุง. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุถูู ุงููููู ูู ุงูุงุฎุชูุงู ุฅูููู ุ ููู ูุณุชุฎุฏู ูุณูุฌ ุงูุฃุฑุถ ููู ุฌููุนูุง. </font><font style="vertical-align: inherit;">ุณูููู ุงูุญู ุงูุจุณูุท ุงููุณุชูุฏ ุฅูู ุงูุงุฑุชูุงุน ูุงูููุง ุจุงููุนู ูุฅูุดุงุก ุตูุฑุฉ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฏุนููุง ูุณุชุฎุฏู ุงูุนุดุจ ููุฎูุงูุง ุฎุทูุฉ ูุงุญุฏุฉ ุชุญุช ูุณุชูู ุงููุงุก. </font><font style="vertical-align: inherit;">ููุณุชุฎุฏู ุฃูุถูุง ุงูุนุดุจ ููุฎูุงูุง ููู ูุณุชูู ุงููุงุก ุ ุฃู ููุจุญูุฑุงุช ุงูุชู ุฃูุดุฃุชูุง ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุงูุฎูุงูุง ุฐุงุช ุงูุงุฑุชูุงุน ุงูุณุงูุจ ูู ููุงุทู ูู ุฃุนูุงู ุงูุจุญุฑ ุ ูุฐูู ูุณุชุฎุฏู ุงูุญุฌุฑ ููุง. </font><font style="vertical-align: inherit;">ุชุจูู ุฌููุน ุงูุฎูุงูุง ุงูุฃุฎุฑู ุฃุฑุถูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainType</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!cell.IsUnderwater) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> terrain; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation == waterLevel - <span class="hljs-number"><span class="hljs-number">1</span></span>) { terrain = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation &gt;= waterLevel) { terrain = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { terrain = <span class="hljs-number"><span class="hljs-number">3</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrain = <span class="hljs-number"><span class="hljs-number">2</span></span>; } cell.TerrainTypeIndex = terrain; } } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a62/bb5/5c7/a62bb55c7e4023a4590dbfe73bafe10f.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุจุงุช ุชุญุช ุงููุงุก.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนูุง ูุถูู ุงููุฒูุฏ ูู ุงูุชูุงุตูู ููุฎูุงูุง ุชุญุช ุงููุงุก ุนูู ุทูู ุงูุณุงุญู. ูุฐู ุฎูุงูุง ุจูุง ุฌุงุฑ ูุงุญุฏ ุนูู ุงูุฃูู ููู ุงููุงุก. ุฅุฐุง ูุงูุช ูุฐู ุงูุฒูุฒุงูุฉ ุถุญูุฉ ุ ูุณููุดุฆ ุดุงุทุฆูุง. ูุฅุฐุง ูุงู ุจุฌุงูุจ ุงูุฌุฑู ุ ูุณุชููู ุงูุชูุงุตูู ุงููุฑุฆูุฉ ุงูุณุงุฆุฏุฉ ุ ููุณุชุฎุฏู ุงูุญุฌุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ุฐูู ุ ุณูููู ุจูุญุต ุฌูุฑุงู ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ุนูู ุจุนุฏ ุฎุทูุฉ ูุงุญุฏุฉ ุชุญุช ูุณุชูู ุงููุงุก. ุฏุนููุง ูุญุณุจ ุนุฏุฏ ุงูุงุชุตุงูุงุช ุจูุงุณุทุฉ ุงูููุญุฏุฑุงุช ูุงูููุญุฏุฑุงุช ูุน ุงูุฎูุงูุง ุงูุฃุฑุถูุฉ ุงููุฌุงูุฑุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation == waterLevel - <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cliffs = <span class="hljs-number"><span class="hljs-number">0</span></span>, slopes = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++ ) { HexCell neighbor = cell.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!neighbor) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> delta = neighbor.Elevation - cell.WaterLevel; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (delta == <span class="hljs-number"><span class="hljs-number">0</span></span>) { slopes += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (delta &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { cliffs += <span class="hljs-number"><span class="hljs-number">1</span></span>; } } terrain = <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุณุชุฎุฏุงู ูุฐู ุงููุนูููุงุช ูุชุตููู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ุฅุฐุง ูุงู ุฃูุซุฑ ูู ูุตู ุงูุฌูุฑุงู ุฃุฑุถูุง ุ ูุฅููุง ูุชุนุงูู ูุน ุจุญูุฑุฉ ุฃู ุฎููุฌ. </font><font style="vertical-align: inherit;">ููุฐู ุงูุฎูุงูุง ูุณุชุฎุฏู ูุณูุฌ ุงูุนุดุจ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุฅุฐุง ูุงู ูุฏููุง ููุญุฏุฑุงุช ุ ูุฅููุง ูุณุชุฎุฏู ุงูุญุฌุฑ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุฅุฐุง ูุงู ูุฏููุง ููุญุฏุฑุงุช ุ ูุฅููุง ูุณุชุฎุฏู ุงูุฑูุงู ูุฅูุดุงุก ุดุงุทุฆ. </font><font style="vertical-align: inherit;">ุงูุฎูุงุฑ ุงููุญูุฏ ุงููุชุจูู ูู ููุทูุฉ ุถุญูุฉ ูุจุงูุฉ ุงูุณุงุญู ุ ููุง ูุฒุงู ูุณุชุฎุฏู ุงูุนุดุจ ูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation == waterLevel - <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cliffs = <span class="hljs-number"><span class="hljs-number">0</span></span>, slopes = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++ ) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cliffs + slopes &gt; <span class="hljs-number"><span class="hljs-number">3</span></span>) { terrain = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cliffs &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { terrain = <span class="hljs-number"><span class="hljs-number">3</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (slopes &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { terrain = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrain = <span class="hljs-number"><span class="hljs-number">1</span></span>; } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0eb/8d6/2ed/0eb8d62ed0ec66f7814bd839c9ca32fb.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e34/976/0bc/e349760bc545e3063718b892a9ccbd89.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุจ ุงูุณุงุญู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุณุฉ ุฃุฎูุฑุฉ ุ ุฏุนูุง ูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฎูุงูุง ุฎุถุฑุงุก ุชุญุช ุงููุงุก ูู ุฃุจุฑุฏ ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ. </font><font style="vertical-align: inherit;">ููุซู ูุฐู ุงูุฎูุงูุง ูุณุชุฎุฏู ุงูุฃุฑุถ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (terrain == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; temperature &lt; temperatureBands[<span class="hljs-number"><span class="hljs-number">0</span></span>]) { terrain = <span class="hljs-number"><span class="hljs-number">2</span></span>; } cell.TerrainTypeIndex = terrain;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุฃุชูุญุช ููุง ุงููุฑุตุฉ ูุฅูุดุงุก ุจุทุงูุงุช ุนุดูุงุฆูุฉ ุชุจุฏู ูุซูุฑุฉ ููุงูุชูุงู ูุทุจูุนูุฉ ููุบุงูุฉ ุ ูุน ุงูุนุฏูุฏ ูู ุฎูุงุฑุงุช ุงูุชูููู. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 27: ุทู ุงูุจุทุงูุฉ </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณู ุงูุจุทุงูุงุช ุฅูู ุฃุนูุฏุฉ ูููู ููููุง. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุจุชูุณูุท ุงูุจุทุงูุฉ ูู ุงููุงููุฑุง. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุงุฑ ูู ุดูุก. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐุง ุงูุฌุฒุก ุงูุฃุฎูุฑ ุ ุณูุถูู ุฏุนููุง ูุชูููู ุงูุฎุฑูุทุฉ ุ ูุฑุจุท ุงูุญูุงู ุงูุดุฑููุฉ ูุงูุบุฑุจูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุฅูุดุงุก ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุจุงุณุชุฎุฏุงู Unity 2017.3.0p3.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f29/96a/49d/f2996a49dab361c70ce643cc9f2d648b.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทู ูุฌุนู ุงูุนุงูู ูุฏูุฑ.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุทุงูุงุช ูุงุจูุฉ ููุทู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงุณุชุฎุฏุงู ุฎุฑุงุฆุทูุง ูููุฐุฌุฉ ูุณุงุญุงุช ูุฎุชููุฉ ุงูุฃุญุฌุงู ุ ููููุง ุฏุงุฆููุง ูุง ุชููู ูุญุฏูุฏุฉ ุงูุดูู ุงููุณุชุทูู. ูููููุง ุฅูุดุงุก ุฎุฑูุทุฉ ูุฌุฒูุฑุฉ ูุงุญุฏุฉ ุฃู ูุงุฑุฉ ุจุฃููููุง ุ ูููู ููุณ ุงููููุจ ุจุฃูููู. ุงูููุงูุจ ูุฑููุฉ ุ ููุณ ููุง ุญุฏูุฏ ุตุงุฑูุฉ ุชุนุฑูู ุงูุญุฑูุฉ ุนูู ุณุทุญูุง. ุฅุฐุง ูุงุตูุช ุงูุชุญุฑู ูู ุงุชุฌุงู ูุงุญุฏ ุ ูุณุชุนูุฏ ุนุงุฌูุงู ุฃู ุขุฌูุงู ุฅูู ููุทุฉ ุงูุจุฏุงูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููููุง ูู ุดุจูุฉ ูู ุงูุณุฏุงุณูุงุช ุญูู ูุฑุฉ ุ ูุซู ูุฐุง ุงูุชุฏุงุฎู ูุณุชุญูู. ูู ุฃูุถู ุงูุชูุฏูุฑุงุช ุ ูุชู ุงุณุชุฎุฏุงู ุทูุจูููุฌูุง ุงููุฌูู ุงูุฃูููููุฌูุฉ ุ ุญูุซ ูุฌุจ ุฃู ุชููู ุงูุฎูุงูุง ุงูุงุซูู ุนุดุฑ ุฎูุงุณูุฉ. ููุน ุฐูู ุ ุจุฏูู ุฃู ุชุดููู ุฃู ุงุณุชุซูุงุก ุ ูููู ูู ุงูุดุจูุฉ ุญูู ุงูุฃุณุทูุงูุฉ. ููููุงู ุจุฐูู ุ ูุง ุนููู ุณูู ุฑุจุท ุงูุญูุงู ุงูุดุฑููุฉ ูุงูุบุฑุจูุฉ ููุฎุฑูุทุฉ. ุจุงุณุชุซูุงุก ููุทู ุงูุงูุชูุงู ุ ูุจูู ูู ุดูุก ุขุฎุฑ ุนูู ุญุงูู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุณุทูุงูุฉ ูู ุชูุฑูุจ ุชูุฑูุจู ูููุฑุฉ ุ ูุฃููุง ูุง ูุณุชุทูุน ููุฐุฌุฉ ุงูุฃุนูุฏุฉ. </font><font style="vertical-align: inherit;">ููู ูุฐุง ูู ูููุน ูุทูุฑู ุงูุนุฏูุฏ ูู ุงูุฃูุนุงุจ ูู ุงุณุชุฎุฏุงู ุงูุทู ูู ุงูุดุฑู ุฅูู ุงูุบุฑุจ ูุชุตููู ุฎุฑุงุฆุท ูููุจ ุงูุฃุฑุถ. </font><font style="vertical-align: inherit;">ุงูููุงุทู ุงููุทุจูุฉ ููุณุช ุจุจุณุงุทุฉ ุฌุฒุกูุง ูู ููุทูุฉ ุงููุนุจุฉ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุนู ุงูุดูุงู ูุงูุฌููุจุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">          ,     .       ,    ,       .        -,            -.         . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุทุฑููุชุงู ูุชูููุฐ ุงูุทู ุงูุฃุณุทูุงูู. </font><font style="vertical-align: inherit;">ุงูุฃูู ูู ุฌุนู ุงูุฎุฑูุทุฉ ุฃุณุทูุงููุฉ ุจุงููุนู ุนู ุทุฑูู ุซูู ุณุทุญูุง ููู ุดูุก ุนูููุง ุจุญูุซ ุชููู ุงูุญูุงู ุงูุดุฑููุฉ ูุงูุบุฑุจูุฉ ุนูู ุงุชุตุงู. </font><font style="vertical-align: inherit;">ุงูุขู ูู ุชูุนุจ ุนูู ุณุทุญ ูุณุชู ุ ูููู ุนูู ุฃุณุทูุงูุฉ ุญููููุฉ. </font><font style="vertical-align: inherit;">ุงูููุฌ ุงูุซุงูู ูู ุญูุธ ุฎุฑูุทุฉ ูุณุทุญุฉ ูุงุณุชุฎุฏุงู ุงูุชุฎุงุทุฑ ุฃู ุงูุงุฒุฏูุงุฌูุฉ ููุงูููุงุฑ. </font><font style="vertical-align: inherit;">ุชุณุชุฎุฏู ูุนุธู ุงูุฃูุนุงุจ ุงูููุฌ ุงูุซุงูู ุ ูุฐูู ุณูุชูุงูููุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทู ุงุฎุชูุงุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุชูุฏ ุงูุญุงุฌุฉ ุฅูู ุงูููุงุฑ ุงูุฎุฑูุทุฉ ุนูู ุญุฌููุง - ูุญูููุง ุฃู ูููุจููุง. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ุฏุนู ูููููุง ุนู ุทุฑูู ุฌุนู ุงูุทู ุงุฎุชูุงุฑููุง. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุฃุถู </font><font style="vertical-align: inherit;">ููุชุงุญ ุชุญููู ุฌุฏูุฏ ุฅูู ูุงุฆูุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ุชุดุบูู ุงูุงูููุงุฑ ุจุดูู ุงูุชุฑุงุถู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b07/17d/3ef/b0717d3ef8000555a454de943e4e387a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ ูุน ุฎูุงุฑ ุงูุงูููุงุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุฅูู </font></font><code>NewMapMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูู ูุชุชุจุน ุงูุชุญุฏูุฏ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุทุฑููุฉ ูุชุบููุฑู. </font><font style="vertical-align: inherit;">ููููู ุจุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ุนูุฏูุง ุชุชุบูุฑ ุญุงูุฉ ุงูููุชุงุญ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> wrapping = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToggleWrapping</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toggle</span></span></span><span class="hljs-function">)</span></span> { wrapping = toggle; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุทูุจ ุฎุฑูุทุฉ ุฌุฏูุฏุฉ ุ ูุฅููุง ููุฑุฑ ูููุฉ ุฎูุงุฑ ุงูุชุตุบูุฑ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (generateMaps) { mapGenerator.GenerateMap(x, z, wrapping); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { hexGrid.CreateMap(x, z, wrapping); } HexMapCamera.ValidatePosition(); Close(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุบููุฑู </font></font><code>HexMapGenerator.GenerateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ููุจู ูุฐู ุงูุญุฌุฉ ุงูุฌุฏูุฏุฉ ุซู ููุฑุฑูุง ุฅูู </font></font><code>HexGrid.CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> wrapping</span></span></span><span class="hljs-function">)</span></span> { โฆ grid.CreateMap(x, z, wrapping); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฏ&gt; ูุฌุจ ุฃู ูุนุฑู HexGrid ูุง ุฅุฐุง ููุง ูููุงุฑ ุ ูุฐุง ุฃุถู ุญูููุง ุฅููู ูุงุฌุนูู </font></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถุจูุทูุง. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชุบูุฑ ุงููุตูู ุงูุฃุฎุฑู ููุทููุง ุงุนุชูุงุฏูุง ุนูู ูุง ุฅุฐุง ูุงูุช ุงูุดุจูุฉ ูุตุบุฑุฉ ุ ูุฐุง ุณูุฌุนู ุงูุญูู ุนุงููุง. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุณูุญ ูู ุจุชุนููู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู ุฎูุงู ุงูููุชุด.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cellCountX = <span class="hljs-number"><span class="hljs-number">20</span></span>, cellCountZ = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> wrapping; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> wrapping</span></span></span><span class="hljs-function">)</span></span> { โฆ cellCountX = x; cellCountZ = z; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.wrapping = wrapping; โฆ }</code> </pre> <br> <code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงููุงุช ุงูุฎุงุตุฉ </font></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุงููู. </font><font style="vertical-align: inherit;">ูููููุง ุจุจุณุงุทุฉ ุงุณุชุฎุฏุงู ูุฌุงูู ุงูุฎุงุต ูุญุฌุฉ ุงูุงูููุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ CreateMap(cellCountX, cellCountZ, wrapping); } โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x != cellCountX || z != cellCountZ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CreateMap(x, z, wrapping)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/36a/d57/fc1/36ad57fc1ff8967bbd8282808f762241.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุดุบูู ููุชุงุญ ุทู ุงูุดุจูุฉ ุงูุชุฑุงุถููุง.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุธ ูุชุญููู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู ูุชู ุถุจุท ุงูุทู ููู ุจุทุงูุฉ ุ ูุฌุจ ุญูุธูุง ูุชุญููููุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุจุญุงุฌุฉ ุฅูู ุชุบููุฑ ุชูุณูู ุญูุธ ุงูููู ุ ูุฐุง ูู ุจุฒูุงุฏุฉ ุซุงุจุช ุงูุฅุตุฏุงุฑ ูู </font></font><code>SaveLoadMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mapFileVersion = <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุญูุธ ุ ุฏุนู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุจ ููุท ูููุฉ ุงูุทู ุงูููุทูู ุจุนุฏ ุญุฌู ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { writer.Write(cellCountX); writer.Write(cellCountZ); writer.Write(wrapping); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุชุญููู ุ ุณููุฑุฃู ููุท ูุน ุงูุฅุตุฏุงุฑ ุงูุตุญูุญ ูู ุงูููู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ูุฎุชููุฉ ุ ููุฐู ุจุทุงูุฉ ูุฏููุฉ ููุง ูุฌุจ ุชุตุบูุฑูุง. </font><font style="vertical-align: inherit;">ุงุญูุธ ูุฐู ุงููุนูููุงุช ูู ูุชุบูุฑ ูุญูู ููุงุฑููุง ุจุงูุญุงูุฉ ุงูุญุงููุฉ ููุทู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ูุฎุชููุฉ ุ ููุง ูููููุง ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุทูุจูููุฌูุง ุงูุฎุฑูุทุฉ ุงูุญุงููุฉ ุจุงูุทุฑููุฉ ููุณูุง ุงูุชู ูุงูุช ุนูููุง ุนูุฏ ุชุญููู ุฎุฑูุทุฉ ุจุฃุญุฌุงู ุฃุฎุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { ClearPath(); ClearUnits(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">20</span></span>, z = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header &gt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) { x = reader.ReadInt32(); z = reader.ReadInt32(); } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> wrapping = header &gt;= <span class="hljs-number"><span class="hljs-number">5</span></span> ? reader.ReadBoolean() : <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x != cellCountX || z != cellCountZ || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.wrapping != wrapping) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CreateMap(x, z, wrapping)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } โฆ }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงููุณ ูุงุจูุฉ ููุทู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชุทูุจ ุชุตุบูุฑ ุงูุฎุฑูุทุฉ ุชุบููุฑุงุช ูุจูุฑุฉ ูู ุงูููุทู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุญุณุงุจ ุงููุณุงูุงุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููููู ููุณ ุงูุฑูุฒ ุงูุฐู ูุง ูุญุชูู ุนูู ุงุฑุชุจุงุท ูุจุงุดุฑ ุจุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุชูุฑูุฑ ูุฐู ุงููุนูููุงุช ูุญุฌุฌ ุ ุฏุนูุง ูุถูููุง ุฅูู </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃุถู ุนุฏุฏูุง ุซุงุจุชูุง ูุญุชูู ุนูู ุญุฌู ุงูุทู ุงูุฐู ูุชุทุงุจู ูุน ุนุฑุถ ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุฃูุจุฑ ูู ุงูุตูุฑ ุ ูุฅููุง ูุชุนุงูู ูุน ุจุทุงูุฉ ูุงุจูุฉ ููุทู. </font><font style="vertical-align: inherit;">ููุชุญูู ูู ุฐูู ุ ูู ุจุฅุถุงูุฉ ุฎุงุตูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> wrapSize; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Wrapping { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> wrapSize &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุชุนููู ุญุฌู ุงูุทู ููู ููุงููุฉ </font></font><code>HexGrid.CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> wrapping</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.wrapping = wrapping; HexMetrics.wrapSize = wrapping ? cellCountX : <span class="hljs-number"><span class="hljs-number">0</span></span>; โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฐู ุงูุจูุงูุงุช ูู ุชูุฌู ูู ุฅุนุงุฏุฉ ุงูุชุฌููุน ูู ูุถุน ุงูุชุดุบูู ุ ูุณูู ูููู ุจุฅุนุฏุงุฏูุง </font></font><code>OnEnable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!HexMetrics.noiseSource) { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); HexUnit.unitPrefab = unitPrefab; HexMetrics.wrapSize = wrapping ? cellCountX : <span class="hljs-number"><span class="hljs-number">0</span></span>; ResetVisibility(); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฑุถ ุงูุฎููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุนูู ุจุงุณุชุฎุฏุงู ุจุทุงูุงุช ูุงุจูุฉ ููุทู ุ ุบุงูุจูุง ูุง ูุชุนูู ุนูููุง ุงูุชุนุงูู ูุน ุงูููุงุถุน ุนูู ุทูู ุงููุญูุฑ X ุ ููุงุณุฉ ุจุนุฑุถ ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูููู ุงุณุชุฎุฏุงูู ููุฐุง </font></font><code>HexMetrics.innerRadius * 2f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฅูู ุณูููู ุฃูุซุฑ ููุงุกูุฉ ุฅุฐุง ูู ููู ุจุฅุถุงูุฉ ุงูุถุฑุจ ูู ูู ูุฑุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนูุง ูุถูู ุซุงุจุช </font></font><code>HexMetrics.innerDiameter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> innerRadius = outerRadius * outerToInner; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> innerDiameter = innerRadius * <span class="hljs-number"><span class="hljs-number">2f</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุจุงููุนู ุงุณุชุฎุฏุงู ุงููุทุฑ ูู ุซูุงุซุฉ ุฃูุงูู. </font><font style="vertical-align: inherit;">ุฃููุงู ุ </font></font><code>HexGrid.CreateCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ูุถุน ุฎููุฉ ุฌุฏูุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { Vector3 position; position.x = (x + z * <span class="hljs-number"><span class="hljs-number">0.5f</span></span> - z / <span class="hljs-number"><span class="hljs-number">2</span></span>) * HexMetrics.innerDiameter; โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูููุง ุ ูู </font></font><code>HexMapCamera</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุฏ ููุถุน ุงููุงููุฑุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClampPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xMax = (grid.cellCountX - <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) * HexMetrics.innerDiameter; position.x = Mathf.Clamp(position.x, <span class="hljs-number"><span class="hljs-number">0f</span></span>, xMax); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐูู ูู </font></font><code>HexCoordinates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญููู ูู ุงููููุน ุฅูู ุงูุฅุญุฏุงุซูุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> HexCoordinates </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FromPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x = position.x / HexMetrics.innerDiameter; โฆ }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุณูุท ุงูุจุทุงูุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุง ุชููุงุฑ ุงูุฎุฑูุทุฉ ุ ููุฏ ุญุฏุฏุช ุจูุถูุญ ุงูุญูุงู ุงูุดุฑููุฉ ูุงูุบุฑุจูุฉ ุ ูุจุงูุชุงูู ูุฑูุฒ ุฃููู ูุงุถุญ. </font><font style="vertical-align: inherit;">ูููู ูู ุญุงูุฉ ุงูุจุทุงูุฉ ุงููุงุจูุฉ ููุทู ุ ูู ุดูุก ูุฎุชูู. </font><font style="vertical-align: inherit;">ููุณ ููุง ุงูุญุงูุฉ ุงูุดุฑููุฉ ููุง ุงูุบุฑุจูุฉ ููุง ุงููุฑูุฒ. </font><font style="vertical-align: inherit;">ูุจุฏูู ุ ูููููุง ุฃู ููุชุฑุถ ุฃู ุงููุฑูุฒ ูู ููุงู ุงููุงููุฑุง. </font><font style="vertical-align: inherit;">ุณูููู ูุฐุง ูููุฏูุง ูุฃููุง ูุฑูุฏ ุฃู ุชุฑูุฒ ุงูุฎุฑูุทุฉ ุฏุงุฆููุง ุนูู ูุฌูุฉ ูุธุฑูุง. </font><font style="vertical-align: inherit;">ุซู ุ ุฃูููุง ููุง ุ ูู ูุฑู ุงูุญูุงู ุงูุดุฑููุฉ ุฃู ุงูุบุฑุจูุฉ ููุฎุฑูุทุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุนูุฏุฉ ุฌุฒุก ุงูุฎุฑูุทุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชุชูุญูุฑ ุฑุคูุฉ ุงูุฎุฑูุทุฉ ุจุงููุณุจุฉ ูููุงููุฑุง ุ ูุญุชุงุฌ ุฅูู ุชุบููุฑ ููุถุน ุงูุนูุงุตุฑ ุงุนุชูุงุฏูุง ุนูู ุญุฑูุฉ ุงููุงููุฑุง. ุฅุฐุง ุชุญุฑูุช ุบุฑุจูุง ุ ูุฅููุง ุจุญุงุฌุฉ ุฅูู ุฃุฎุฐ ูุง ูู ููุฌูุฏ ุญุงูููุง ุนูู ุญุงูุฉ ุงูุฌุฒุก ุงูุดุฑูู ููููู ุฅูู ุญุงูุฉ ุงูุฌุฒุก ุงูุบุฑุจู. ุงูุฃูุฑ ููุณู ููุทุจู ุนูู ุงูุงุชุฌุงู ุงููุนุงูุณ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ุจูุฌุฑุฏ ุฃู ุชูุชูู ุงููุงููุฑุง ุฅูู ุนููุฏ ุงูุฎูุงูุง ุงููุฌุงูุฑ ุ ูุฌุจ ุฃู ูููู ุนูู ุงูููุฑ ุงูุนููุฏ ุงูุฃุจุนุฏ ููุฎูุงูุง ุฅูู ุงูุฌุงูุจ ุงูุขุฎุฑ. ููุน ุฐูู ุ ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฃู ูููู ุฏููููู ููุบุงูุฉ. ุจุฏูุงู ูู ุฐูู ุ ูููููุง ููู ุฃุฌุฒุงุก ุงูุฎุฑูุทุฉ ุจุงููุงูู. ูุฐุง ูุณูุญ ููุง ุจุชุญุฑูู ุฃุฌุฒุงุก ูู ุงูุฎุฑูุทุฉ ุฏูู ุงูุญุงุฌุฉ ุฅูู ุชุนุฏูู ุงูุดุจูุงุช.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูููู ุจููู ุฃุนูุฏุฉ ูุงููุฉ ูู ุงูุฃุฌุฒุงุก ูู ููุณ ุงูููุช ุ ููููู ุจุชุฌููุนูุง ุนู ุทุฑูู ุฅูุดุงุก ูุงุฆู ุนููุฏ ุฑุฆูุณู ููู ูุฌููุนุฉ. </font><font style="vertical-align: inherit;">ุฃุถู ูุตูููุฉ ููุฐู ุงููุงุฆูุงุช </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณูููู ุจุชููุฆุชูุง ููู </font></font><code>CreateChunks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูู ูุณุชุฎุฏููุง ููุท ูุญุงููุงุช ุ ูุฐูู ูุญู ุจุญุงุฌุฉ ููุท ูุชุชุจุน ุงูุฑุงุจุท ุฅูู ููููุงุชูุง </font></font><code>Transform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูู ุงูุฃุฌุฒุงุก ุ ุชูุน ููุงูุนูุง ุงูุฃูููุฉ ูู ุงูุฃุตู ุงููุญูู ูุฅุญุฏุงุซูุงุช ุงูุดุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Transform[] columns; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateChunks</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { columns = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Transform[chunkCountX]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; chunkCountX; x++) { columns[x] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameObject(<span class="hljs-string"><span class="hljs-string">"Column"</span></span>).transform; columns[x].SetParent(transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูุฌุจ ุฃู ูุตุจุญ ุงูุฌุฒุก ุชุงุจุนูุง ููุนููุฏ ุงูููุงุจู ุ ูููุณ ุงูุดุจูุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateChunks</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ chunks = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexGridChunk[chunkCountX * chunkCountZ]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> z = <span class="hljs-number"><span class="hljs-number">0</span></span>, i = <span class="hljs-number"><span class="hljs-number">0</span></span>; z &lt; chunkCountZ; z++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; chunkCountX; x++) { HexGridChunk chunk = chunks[i++] = Instantiate(chunkPrefab); chunk.transform.SetParent(columns[x], <span class="hljs-literal"><span class="hljs-literal">false</span></span>); } } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/415/920/bb2/415920bb2e4e2e002793aaebee8e04e2.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุชุฌููุน ุงูุฃุฌุฒุงุก ูู ุฃุนูุฏุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุฌููุน ุงูุฃุฌุฒุงุก ุฃุตุจุญุช ุงูุขู ุฃุนูุฏุฉ ูู ุงูุฃุนูุฏุฉ ุ </font></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ูุฏูุฑ ุฌููุน ุงูุฃุนูุฏุฉ ูุจุงุดุฑุฉู ุ ูููุณ ุงูุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ูุฐูู ุณูู ูุชุฎูุต ูู ุดุธุงูุง ุงูุงุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> wrapping</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (columns != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; columns.Length; i++) { Destroy(columns[i].gameObject); } } โฆ }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุนูุฏุฉ ุงูููู ุงูููุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุฅูู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ </font></font><code>CenterMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงูููุถุน X ููุนููุฉ. </font><font style="vertical-align: inherit;">ูู ุจุชุญููู ุงูููุถุน ุฅูู ููุฑุณ ุงูุนููุฏ ุ ูุชูุณููู ุนูู ุนุฑุถ ุงูุฌุฒุก ูู ูุญุฏุงุช ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ุณูููู ูุฐุง ูู ููุฑุณ ุงูุนููุฏ ุงูุฐู ุชูุฌุฏ ููู ุงููุงููุฑุง ุญุงูููุง ุ ุฃู ุฃูู ุณูููู ุงูุนููุฏ ุงูุฃูุณุท ููุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CenterMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xPosition</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerColumnIndex = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (xPosition / (HexMetrics.innerDiameter * HexMetrics.chunkSizeX)); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ูุบูุฑ ุชุตูุฑ ุงูุฎุฑูุทุฉ ููุท ุนูุฏูุง ูุชุบูุฑ ููุฑุณ ุงูุนููุฏ ุงููุฑูุฒู. </font><font style="vertical-align: inherit;">ูุฐูู ุฏุนููุง ูุชุชุจุน ุฐูู ูู ุงูููุฏุงู. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ โ1 ุนูุฏ ุฅูุดุงุก ุฎุฑูุทุฉ ุจุญูุซ ุชุชู ุชูุณูุท ุงูุฎุฑุงุฆุท ุงูุฌุฏูุฏุฉ ุฏุงุฆููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> currentCenterColumnIndex = <span class="hljs-number"><span class="hljs-number">-1</span></span>; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> wrapping</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.wrapping = wrapping; currentCenterColumnIndex = <span class="hljs-number"><span class="hljs-number">-1</span></span>; โฆ } โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CenterMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xPosition</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerColumnIndex = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (xPosition / (HexMetrics.innerDiameter * HexMetrics.chunkSizeX)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (centerColumnIndex == currentCenterColumnIndex) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } currentCenterColumnIndex = centerColumnIndex; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุนุฑููุง ููุฑุณ ุงูุนููุฏ ุงููุฑูุฒู ุ ูููููุง ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃุฏูู ูุงูุญุฏ ุงูุฃูุตู ูููุคุดุฑุงุช ุจุจุณุงุทุฉ ุนู ุทุฑูู ุทุฑุญ ูุฅุถุงูุฉ ูุตู ุนุฏุฏ ุงูุฃุนูุฏุฉ. ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏู ููููุง ุตุญูุญุฉ ุ ูุน ุนุฏุฏ ูุฑุฏู ูู ุงูุฃุนูุฏุฉ ุ ููุฐุง ูุนูู ุจุดูู ูุซุงูู. ูู ุญุงูุฉ ูุฌูุฏ ุฑูู ุฒูุฌู ุ ูุง ูููู ุฃู ูููู ููุงู ุนููุฏ ูุชูุฑูุฒ ุจุดูู ูุซุงูู ุ ูุฐุง ูุฅู ุฃุญุฏ ุงููุคุดุฑุงุช ุณูููู ุฃุจุนุฏ ูู ุงููุงุฒู. ูุคุฏู ูุฐุง ุฅูู ุฅูุดุงุก ุฅุฒุงุญุฉ ูุนููุฏ ูุงุญุฏ ูู ุงุชุฌุงู ุฃูุตู ุญุงูุฉ ููุฎุฑูุทุฉ ุ ููู ูุฐู ููุณุช ูุดููุฉ ุจุงููุณุจุฉ ููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> currentCenterColumnIndex = centerColumnIndex; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minColumnIndex = centerColumnIndex - chunkCountX / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxColumnIndex = centerColumnIndex + chunkCountX / <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃู ูุฐู ุงููุคุดุฑุงุช ูุฏ ุชููู ุณุงูุจุฉ ุฃู ุฃูุจุฑ ูู ููุฑุณ ุงูุนููุฏ ุงูุฃูุตู ุงูุทุจูุนู. </font><font style="vertical-align: inherit;">ุงูุญุฏ ุงูุฃุฏูู ูู ุตูุฑ ููุท ุนูุฏูุง ุชููู ุงููุงููุฑุง ุจุงููุฑุจ ูู ุงููุฑูุฒ ุงูุทุจูุนู ููุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูููุชูุง ูู ุชุญุฑูู ุงูุฃุนูุฏุฉ ุจุญูุซ ุชุชูุงูู ูุน ูุฐู ุงููุคุดุฑุงุช ุงููุณุจูุฉ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุบููุฑ ุฅุญุฏุงุซูุงุช X ุงููุญููุฉ ููู ุนููุฏ ูู ุงูุญููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minColumnIndex = centerColumnIndex - chunkCountX / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxColumnIndex = centerColumnIndex + chunkCountX / <span class="hljs-number"><span class="hljs-number">2</span></span>; Vector3 position; position.y = position.z = <span class="hljs-number"><span class="hljs-number">0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; columns.Length; i++) { position.x = <span class="hljs-number"><span class="hljs-number">0f</span></span>; columns[i].localPosition = position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุนููุฏ ุ ูุชุญูู ููุง ุฅุฐุง ูุงู ููุฑุณ ุงูุญุฏ ุงูุฃุฏูู ููููุฑุณ ุฃูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููู ุจุนูุฏ ุฌุฏูุง ุฅูู ูุณุงุฑ ุงููุฑูุฒ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ููุชูู ุฅูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุจุฌุนู ุฅุญุฏุงุซูุงุช X ูุณุงููุฉ ูุนุฑุถ ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุจุงููุซู ุ ุฅุฐุง ูุงู ููุฑุณ ุงูุนููุฏ ุฃูุจุฑ ูู ุงูุญุฏ ุงูุฃูุตู ููููุฑุณ ุ ููู ุจุนูุฏ ุฌุฏูุง ุฅูู ูููู ุงููุณุท ุ ููุฌุจ ุฃู ููุชูู ุฅูู ุงูุฌุงูุจ ุงูุขุฎุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; columns.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &lt; minColumnIndex) { position.x = chunkCountX * (HexMetrics.innerDiameter * HexMetrics.chunkSizeX); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &gt; maxColumnIndex) { position.x = chunkCountX * -(HexMetrics.innerDiameter * HexMetrics.chunkSizeX); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { position.x = <span class="hljs-number"><span class="hljs-number">0f</span></span>; } columns[i].localPosition = position; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฑูู ุงููุงููุฑุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุบููุฑ </font></font><code>HexMapCamera.AdjustPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ุฃูู ุนูุฏ ุงูุนูู ูุน ุจุทุงูุฉ ูุงุจูุฉ ููุทู ุ ูุฅูู ุจุฏูุงู ูู ุฐูู </font></font><code>ClampPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุตู </font></font><code>WrapPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ุงุฌุนู ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ </font></font><code>WrapPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑุฑุฉ </font></font><code>ClampPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู ูุน ุงูุงุฎุชูุงู ุงููุญูุฏ: ูู ุงูููุงูุฉ ุ ุณูู ุชุณุชุฏุนู </font></font><code>CenterMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xDelta, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> zDelta</span></span></span><span class="hljs-function">)</span></span> { โฆ transform.localPosition = grid.wrapping ? WrapPosition(position) : ClampPosition(position); } โฆ <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WrapPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xMax = (grid.cellCountX - <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) * HexMetrics.innerDiameter; position.x = Mathf.Clamp(position.x, <span class="hljs-number"><span class="hljs-number">0f</span></span>, xMax); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zMax = (grid.cellCountZ - <span class="hljs-number"><span class="hljs-number">1</span></span>) * (<span class="hljs-number"><span class="hljs-number">1.5f</span></span> * HexMetrics.outerRadius); position.z = Mathf.Clamp(position.z, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zMax); grid.CenterMap(position.x); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุชุชู ุชูุณูุท ุงูุจุทุงูุฉ ุนูู ุงูููุฑ ุ ูุณูููุง </font></font><code>OnEnable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font></font><code>ValidatePosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { instance = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; ValidatePosition(); }</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฑู ุฅูู ุงููุณุงุฑ ูุงููููู ุนูุฏ ุชูุณูุท ุงููุงููุฑุง. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ูุง ุฒููุง ููููุฏ ุญุฑูุฉ ุงููุงููุฑุง ุ ุฅูุง ุฃู ุงูุฎุฑูุทุฉ ุชุญุงูู ุงูุขู ุชูุณูุท ุจุงููุณุจุฉ ูููุงููุฑุง ุ ุญูุซ ุชูุชูู ุฃุนูุฏุฉ ุฃุฌุฒุงุก ุงูุฎุฑูุทุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ. </font><font style="vertical-align: inherit;">ูุน ูุฌูุฏ ุฎุฑูุทุฉ ุตุบูุฑุฉ ููุงููุฑุง ุนู ุจุนุฏ ุ ูููู ุฑุคูุฉ ุฐูู ุจูุถูุญ ุ ูููู ุนูู ุฎุฑูุทุฉ ูุจูุฑุฉ ุ ุชููู ุงูุฃุฌุฒุงุก ุงููููููุฉ ุฎุงุฑุฌ ูุทุงู ุนุฑุถ ุงููุงููุฑุง. </font><font style="vertical-align: inherit;">ูู ุงููุงุถุญ ุฃู ุงูุญูุงู ุงูุดุฑููุฉ ูุงูุบุฑุจูุฉ ุงูุฃูููุฉ ููุฎุฑูุทุฉ ููุท ูู ุงูุชู ูููู ููุงุญุธุชูุง ุ ูุฃูู ูุง ููุฌุฏ ุชุซููุซ ุจููููุง ุญุชู ุงูุขู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทู ุงููุงููุฑุง ุ ูุฒูู ูููุฏ ุฅุญุฏุงุซูุงุช X ุงูุฎุงุตุฉ ุจูุง </font></font><code>WrapPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ุณูุณุชูุฑ ูู ุฒูุงุฏุฉ ุฅุญุฏุงุซูุงุช X ุจุนุฑุถ ุงูุฎุฑูุทุฉ ุนูุฏูุง ุชููู ุฃูู ูู ุงูุตูุฑ ุ ูุชูููููุง ุจูููุง ุชููู ุฃูุจุฑ ูู ุนุฑุถ ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WrapPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// float xMax = (grid.cellCountX - 0.5f) * HexMetrics.innerDiameter; // position.x = Mathf.Clamp(position.x, 0f, xMax); float width = grid.cellCountX * HexMetrics.innerDiameter; while (position.x &lt; 0f) { position.x += width; } while (position.x &gt; width) { position.x -= width; } float zMax = (grid.cellCountZ - 1) * (1.5f * HexMetrics.outerRadius); position.z = Mathf.Clamp(position.z, 0f, zMax); grid.CenterMap(position.x); return position; }</span></span></code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุญุฑู ุงููุงููุฑุง ุงูููุชูุฉ ุนูู ุทูู ุงูุฎุฑูุทุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงุฏ ุชุธููู ูุงุจูุฉ ููุทู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุซูุงุก ูุณุงุญุฉ ุงูุชุซููุซ ุ ูุฌุจ ุฃู ูููู ุชุตุบูุฑ ุงููุงููุฑุง ูู ูุถุน ุงููุนุจุฉ ุบูุฑ ูุญุณูุณ. ููุน ุฐูู ุ ุนูุฏูุง ูุญุฏุซ ูุฐุง ุ ูุญุฏุซ ุชุบููุฑ ูุฑุฆู ูู ูุตู ุงูุทุจูุบุฑุงููุง ูุงูููุงู. ูุญุฏุซ ูุฐุง ูุฃููุง ูุณุชุฎุฏู ูููุนูุง ูู ุงูุนุงูู ูุฃุฎุฐ ุนููุงุช ูู ูุฐู ุงูููุงุฏ. ุฅู ุงูููู ุงูููุฑู ููุฌุฒุก ูุบูุฑ ูููุน ุงูููุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุญู ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ุฌุนู ุงูููุงู ูุธูุฑ ูู ุงูุจูุงุท ุงูุฐู ูุชุถุงุนู ุญุฌู ุงูุฌุฒุก. ูุชู ุญุณุงุจ ุญุฌู ุงููุทุนุฉ ูู ุงูุซูุงุจุช ุงูููุฌูุฏุฉ </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐุง ุฏุนูุง ููุดุฆ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฏุงุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุธููู </font><em><font style="vertical-align: inherit;">HexMetrics.cginc</font></em><font style="vertical-align: inherit;"> ูุชุถููู ุงูููู </font><font style="vertical-align: inherit;">ููุตู ุงูุชุนุฑููุงุช ุงูููุงุจูุฉ ููู. ูุชู ุญุณุงุจ ูููุงุณ ุงูุชุจููุท ุงูุฃุณุงุณู ูู ุญุฌู ุงูุฌุฒุก ููุตู ุงููุทุฑ ุงูุฎุงุฑุฌู ููุฎููุฉ. ุฅุฐุง ููุช ุชุณุชุฎุฏู ููุงููุณ ุฃุฎุฑู ุ ูุณุชุญุชุงุฌ ุฅูู ุชุนุฏูู ุงูููู ููููุง ูุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs cs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> OUTER_TO_INNER 0.866025404 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> OUTER_RADIUS 10 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> CHUNK_SIZE_X 5 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TILING_SCALE (1 / (CHUNK_SIZE_X * 2 * OUTER_RADIUS / OUTER_TO_INNER))</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูุนุทููุง ูููุงุณ ุชุจููุท 0.00866025404. </font><font style="vertical-align: inherit;">ุฅุฐุง ุงุณุชุฎุฏููุง ุนุฏุฏูุง ุตุญูุญูุง ูุถุงุนููุง ูู ูุฐู ุงููููุฉ ุ ููู ูุชุฃุซุฑ ุงูุชุฑููุจ ุจููู ุงูุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณุชูุถู ุงูุฒุฎุงุฑู ุงูููุฌูุฏุฉ ุนูู ุงูุญูุงู ุงูุดุฑููุฉ ูุงูุบุฑุจูุฉ ููุฎุฑูุทุฉ ุจุณูุงุณุฉ ุจุนุฏ ุฃู ูููู ุจุชุซููุซ ุงุชุตุงููุง ุจุดูู ุตุญูุญ. </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏููุง 0.02 ููููุงุณ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูู ุชุธููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุถุงุฑูุณ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุงุณุชุฎุฏุงู ูููุงุณ ุงูุชุจููุท ุงููุถุงุนู ุ ููู 0.01732050808. </font><font style="vertical-align: inherit;">ูุชู ุงูุญุตูู ุนูู ุงููููุงุณ ุฃูู ุจูููู ููุง ูุงู ุนููู ุ ูุฒุงุฏ ุญุฌู ุงููููุณ ุจุดูู ุทููู ุ ูููู ุบูุฑ ูุฑุฆู ุจุตุฑููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> "../HexMetrics.cginc" #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> "../HexCellData.cginc" โฆ <span class="hljs-type"><span class="hljs-type">float4</span></span> GetTerrainColor (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>) { float3 uvw = float3( <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos.xz * (<span class="hljs-number"><span class="hljs-number">2</span></span> * TILING_SCALE), <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.terrain[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] ); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุธููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุถูุถุงุก ููู ุงูุจููุณุฌูุฉ ุ ุงุณุชุฎุฏููุง ูููุงุณ 0.025. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ููููู ุงุณุชุฎุฏุงู ูููุงุณ ุงูุชุจููุท ุงูุซูุงุซู. </font><font style="vertical-align: inherit;">ูุฐุง ูุนุทููุง 0.02598076212 ุ ููู ูุฑูุจุฉ ุฌุฏูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> "HexMetrics.cginc" #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> "HexCellData.cginc" โฆ <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandardSpecular o) { <span class="hljs-type"><span class="hljs-type">float4</span></span> noise = tex2D(_MainTex, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos.xz * (<span class="hljs-number"><span class="hljs-number">3</span></span> * TILING_SCALE)); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฎุฏููุง</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font><em><font style="vertical-align: inherit;">Water.cginc</font></em><font style="vertical-align: inherit;"> 0.015 ููุฑุบูุฉ ู 0.025 ููููุฌุงุช. </font><font style="vertical-align: inherit;">ููุง ูููููุง ุงุณุชุจุฏุงู ูุฐู ุงูููู ูุฑุฉ ุฃุฎุฑู ุจูููุงุณ ุชุฌุงูุจ ูุฒุฏูุฌ ููุถุงุนู ุซูุงุซ ูุฑุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs mel">#include <span class="hljs-string"><span class="hljs-string">"HexMetrics.cginc"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Foam (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> shore, float2 worldXZ, sampler2D noiseTex) { shore = <span class="hljs-keyword"><span class="hljs-keyword">sqrt</span></span>(shore) * <span class="hljs-number"><span class="hljs-number">0.9</span></span>; float2 noiseUV = worldXZ + _Time.y * <span class="hljs-number"><span class="hljs-number">0.25</span></span>; float4 <span class="hljs-keyword"><span class="hljs-keyword">noise</span></span> = tex2D(noiseTex, noiseUV * (<span class="hljs-number"><span class="hljs-number">2</span></span> * TILING_SCALE)); โฆ } โฆ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Waves (float2 worldXZ, sampler2D noiseTex) { float2 uv1 = worldXZ; uv1.y += _Time.y; float4 noise1 = tex2D(noiseTex, uv1 * (<span class="hljs-number"><span class="hljs-number">3</span></span> * TILING_SCALE)); float2 uv2 = worldXZ; uv2.x += _Time.y; float4 noise2 = tex2D(noiseTex, uv2 * (<span class="hljs-number"><span class="hljs-number">3</span></span> * TILING_SCALE)); โฆ }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุชุญุงุฏ ุงูุดุฑู ูุงูุบุฑุจ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ุงูุฏููู ุงููุฑุฆู ุงููุญูุฏ ูุชูููู ุงูุฎุฑูุทุฉ ูู ูุฌูุฉ ุตุบูุฑุฉ ุจูู ุงูุฃุนูุฏุฉ ุงููุงูุนุฉ ูู ุฃูุตู ุงูุดุฑู ูุฃูุตู ุงูุบุฑุจ. </font><font style="vertical-align: inherit;">ุชุญุฏุซ ูุฐู ุงููุฌูุฉ ูุฃููุง ูู ููู ุจุนุฏ ุจุชุซููุซ ุงุชุตุงูุงุช ุงูุญูุงู ูุงูุฒูุงูุง ุจูู ุงูุฎูุงูุง ุนูู ุฌุงูุจู ุงูุฎุฑูุทุฉ ุงููุชูุงุจููู ุฏูู ุทููุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/240/85f/e79/24085fe7986100674854b9c9a79c349c.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงุญุฉ ุนูู ุงูุญุงูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌูุฑุงู ููุทู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุซููุซ ุงูุงุชุตุงู ุจูู ุงูุดุฑู ูุงูุบุฑุจ ุ ูุญุชุงุฌ ุฅูู ุฌุนู ุงูุฎูุงูุง ุนูู ุงูุฌุงูุจูู ุงููุชูุงุจููู ูุชุฌุงูุฑูู. </font><font style="vertical-align: inherit;">ุญุชู ุงูุขู ูุง ูููู ุจุฐูู ุ ูุฃู </font></font><code>HexGrid.CreateCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุตุงู E - W ูุชู ุฅูุดุงุคู ูุน ุงูุฎููุฉ ุงูุณุงุจูุฉ ููุท ุฅุฐุง ูุงู ููุฑุณู ูู X ุฃูุจุฑ ูู ุงูุตูุฑ. </font><font style="vertical-align: inherit;">ูุทู ูุฐุง ุงูุงุชุตุงู ุ ูุญุชุงุฌ ุฅูู ุฑุจุท ุงูุฎููุฉ ุงูุฃุฎูุฑุฉ ูู ุงูุตู ุจุงูุฎููุฉ ุงูุฃููู ูู ุงูุตู ููุณู ุนูุฏ ุทู ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { cell.SetNeighbor(HexDirection.W, cells[i - <span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (wrapping &amp;&amp; x == cellCountX - <span class="hljs-number"><span class="hljs-number">1</span></span>) { cell.SetNeighbor(HexDirection.E, cells[i - x]); } } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฃู ุซุจุช ุงุชุตุงู ุงูุฌูุฑุงู E - W ุ ูุญุตู ุนูู ุชุซููุซ ุฌุฒุฆู ูููุฌูุฉ. </font><font style="vertical-align: inherit;">ุงุชุตุงู ุงูุญูุงู ููุณ ูุซุงูููุง ุ ูุฃู ุงูุชุดููู ูุฎูู ุจุดูู ุบูุฑ ุตุญูุญ. </font><font style="vertical-align: inherit;">ุณูุชุนุงูู ูุน ูุฐุง ูุงุญููุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ce5/68a/6b6/ce568a6b639801e47804eb35a62493c6.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑูุจุงุช E - W. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุทู ุฑูุงุจุท NE - SW. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฑุจุท ุงูุฎููุฉ ุงูุฃููู ูู ูู ุตู ุฒูุฌู ุจุงูุฎูุงูุง ุงูุฃุฎูุฑุฉ ูู ุงูุตู ุงูุณุงุจู. </font><font style="vertical-align: inherit;">ุณุชููู ุงูุฎููุฉ ุงูุณุงุจูุฉ ููุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (z &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((z &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { cell.SetNeighbor(HexDirection.SE, cells[i - cellCountX]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { cell.SetNeighbor(HexDirection.SW, cells[i - cellCountX - <span class="hljs-number"><span class="hljs-number">1</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (wrapping) { cell.SetNeighbor(HexDirection.SW, cells[i - <span class="hljs-number"><span class="hljs-number">1</span></span>]); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { โฆ } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/239/66f/c3c/23966fc3c616ea9338a3a14d187dcc7a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุตุงูุงุช NE - SW. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ูุชู ุฅูุดุงุก ุงุชุตุงูุงุช SE - NW ูู ููุงูุฉ ูู ุฎุท ูุฑุฏู ุฃุณูู ุงูุฃูู. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ูุฐู ุงูุฎูุงูุง ูุชุตูุฉ ุจุงูุฎููุฉ ุงูุฃููู ูู ุงูุตู ุงูุณุงุจู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (z &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((z &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cell.SetNeighbor(HexDirection.SW, cells[i - cellCountX]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &lt; cellCountX - <span class="hljs-number"><span class="hljs-number">1</span></span>) { cell.SetNeighbor(HexDirection.SE, cells[i - cellCountX + <span class="hljs-number"><span class="hljs-number">1</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (wrapping) { cell.SetNeighbor( HexDirection.SE, cells[i - cellCountX * <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>] ); } } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3e8/df4/62e/3e8df462e076bbdf93396f6cec525cc4.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุจุงุช SE - NW.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทู ุงูุถูุถุงุก </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุฎูุงุก ุงููุฌูุฉ ุชูุงููุง ุ ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฃู ุงูุญูุงู ุงูุดุฑููุฉ ูุงูุบุฑุจูุฉ ููุฎุฑูุทุฉ ุชุชูุงูู ูุน ุงูุถูุถุงุก ุงููุณุชุฎุฏูุฉ ุจุดูู ูุซุงูู ูุชุดููู ููุงูุน ุงูููู. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ููุณ ุงูุญููุฉ ุงูุชู ุชู ุงุณุชุฎุฏุงููุง ููุชุธููู ุ ูููู ุชู ุงุณุชุฎุฏุงู ูููุงุณ ุถูุถุงุก 0.003 ููุชุดููู. </font><font style="vertical-align: inherit;">ูุถูุงู ุงูุชุฌุงูุจ ุ ุชุญุชุงุฌ ุฅูู ุฒูุงุฏุฉ ุงูุญุฌู ุจุดูู ูุจูุฑ ุ ููุง ุณูุคุฏู ุฅูู ุชุดููู ุงูููุถู ุฃูุซุฑ ูู ุงูููู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญู ุงูุจุฏูู ููุณ ุชูุงูุฉ ุงูุถุฌูุฌ ุ ูููู ูุฌุนู ุชุฎููู ุณูุณ ููุถูุถุงุก ุนูู ุญูุงู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุฅุฌุฑุงุก ุชูููู ุณูุณ ุนูู ุทูู ุนุฑุถ ุฎููุฉ ูุงุญุฏุฉ ุ ูุฅู ุงูุชุดููู ุณูุฎูู ุงูุชูุงููุง ุณูุณูุง ุจุฏูู ูุฌูุงุช. </font><font style="vertical-align: inherit;">ุณูุชู ุชุฎููู ุงูุถูุถุงุก ูู ูุฐู ุงูููุทูุฉ ููููุงู ุ ูุณูุจุฏู ุงูุชุบููุฑ ุญุงุฏูุง ูู ูุณุงูุฉ ุจุนูุฏุฉ ุ ูููู ูุฐุง ููุณ ูุงุถุญูุง ุฌุฏูุง ุนูุฏ ุงุณุชุฎุฏุงู ุชุดููู ุทููู ููููู.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุนู ุชููุจุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">           .      ,      .         ,   .     ,        . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ูุณุญุจ ุงูุจุทุงูุฉ ุ ููููููุง ุงูุญุตูู ุนูู </font></font><code>HexMetrics.SampleNoise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ูููู ุนูุฏ ุงูุทู ุ ูู ุงูุถุฑูุฑู ุฅุถุงูุฉ ุงูุชูููู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุจู ุฅุฑุฌุงุน ุงูุนููุฉ ุ ุงุญูุธูุง ูู ูุชุบูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SampleNoise</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { Vector4 sample = noiseSource.GetPixelBilinear( position.x * noiseScale, position.z * noiseScale ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sample; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุชูููู ุ ูุญุชุงุฌ ุฅูู ุงููุฒุฌ ูุน ุงูุนููุฉ ุงูุซุงููุฉ. </font><font style="vertical-align: inherit;">ุณูููู ุจุงูุงูุชูุงู ูู ุงูุฌุฒุก ุงูุดุฑูู ูู ุงูุฎุฑูุทุฉ ุ ูุฐุง ูุฌุจ ููู ุงูุนููุฉ ุงูุซุงููุฉ ุฅูู ุงูุบุฑุจ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector4 sample = noiseSource.GetPixelBilinear( position.x * noiseScale, position.z * noiseScale ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Wrapping &amp;&amp; position.x &lt; innerDiameter) { Vector4 sample2 = noiseSource.GetPixelBilinear( (position.x + wrapSize * innerDiameter) * noiseScale, position.z * noiseScale ); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชู ุฅุฌุฑุงุก ุงูุชูููู ุจุงุณุชุฎุฏุงู ุงูุงุณุชููุงุก ุงูุฎุทู ุงูุจุณูุท ูู ุงูุฌุฒุก ุงูุบุฑุจู ุฅูู ุงูุฌุฒุก ุงูุดุฑูู ุ ุนูู ุนุฑุถ ุฎููุฉ ูุงุญุฏุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Wrapping &amp;&amp; position.x &lt; innerDiameter) { Vector4 sample2 = noiseSource.GetPixelBilinear( (position.x + wrapSize * innerDiameter) * noiseScale, position.z * noiseScale ); sample = Vector4.Lerp( sample2, sample, position.x * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / innerDiameter) ); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c4e/84f/75d/c4e84f75dd0260efb18a9d3d66647c55.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุท ุงูุถูุถุงุก ุ ุญู ุบูุฑ ูุงูู</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชูุฌุฉ ูุฐูู ุ ูุง ูุญุตู ุนูู ุชุทุงุจู ุชุงู ุ ูุฃู ุจุนุถ ุงูุฎูุงูุง ุนูู ุงูุฌุงูุจ ุงูุดุฑูู ููุง ุฅุญุฏุงุซูุงุช ุณ ุณูุจูุฉ. ููู ูุง ููุชุฑุจ ูู ูุฐู ุงูููุทูุฉ ุ ุฏุนูุง ูููู ุงูููุทูุฉ ุงูุงูุชูุงููุฉ ุฅูู ุงููุตู ุงูุบุฑุจู ูู ุนุฑุถ ุงูุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Wrapping &amp;&amp; position.x &lt; innerDiameter * <span class="hljs-number"><span class="hljs-number">1.5f</span></span>) { Vector4 sample2 = noiseSource.GetPixelBilinear( (position.x + wrapSize * innerDiameter) * noiseScale, position.z * noiseScale ); sample = Vector4.Lerp( sample2, sample, position.x * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / innerDiameter) - <span class="hljs-number"><span class="hljs-number">0.5f</span></span> ); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/04f/af4/1fb/04faf41fb669427487a2dbb6855cd5bd.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูููู ุงูุตุญูุญ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฑูุฑ ุงูุฎููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ูุจุฏู ุงูุชุซููุซ ุตุญูุญูุง ุ ุฏุนูุง ูุชุฃูุฏ ูู ุฃูู ูููููุง ุชุนุฏูู ูู ุดูุก ุนูู ุงูุฎุฑูุทุฉ ูุนูู ุฎุท ุงูุทู. ููุง ุงุชุถุญ ุ ูู ุงูุฃุฌุฒุงุก ุงููููููุฉ ุนู ุจุนุฏ ุ ุชููู ุงูุฅุญุฏุงุซูุงุช ุฎุงุทุฆุฉ ููุชู ูุทุน ุงููุฑุด ุงููุจูุฑุฉ ุจูุงุณุทุฉ ุฎุท ุงูุชูุงุณ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a1f/18b/5ce/a1f18b5ce7b87b38a7a58d47e341d4f1.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุดุงุฉ ูุดุฐุจุฉ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฅุตูุงุญ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุฅุจูุงุบ ุนู </font></font><code>HexCoordinates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทู. ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ูุทุงุจูุฉ ุฅุญุฏุงุซูุงุช X ูู ุทุฑููุฉ ุงููููุดุฆ. ูุญู ูุนูู ุฃู ุงูุฅุญุฏุงุซูุงุช ุงููุญูุฑูุฉ X ูุชู ุงูุญุตูู ุนูููุง ูู ุงูุฅุญุฏุงุซูุงุช X ููุฅุฒุงุญุฉ ุจุทุฑุญ ูุตู ุงูุฅุญุฏุงุซู Z. ููููู ุงุณุชุฎุฏุงู ูุฐู ุงููุนูููุงุช ูุฅุฌุฑุงุก ุงูุชุญููู ุงูุนูุณู ูุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุฅุญุฏุงุซูุงุช ุงูุตูุฑูุฉ ุฃูู ูู ุงูุตูุฑ. ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุฏููุง ุงูุฅุญุฏุงุซูุงุช ุฎุงุฑุฌ ุงูุฌุงูุจ ุงูุดุฑูู ูู ุงูุฎุฑูุทุฉ ุบูุฑ ุงูููุดููุฉ. ูุธุฑูุง ูุฃููุง ูููู ูู ูู ุงุชุฌุงู ุจููู ูุง ูุง ูุฒูุฏ ุนู ูุตู ุงูุฎุฑูุทุฉ ุ ูุณูููู ูุงููุงู ุจุงููุณุจุฉ ููุง ุฃู ูุถูู ุญุฌู ุงูุทู ุฅูู X ูุฑุฉ ูุงุญุฏุฉ. ูุนูุฏูุง ุชููู ุฅุญุฏุงุซูุงุช ุงูุฅุฒุงุญุฉ ุฃูุจุฑ ูู ุญุฌู ุงูุทู ุ ูุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุงูุทุฑุญ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HexCoordinates</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (HexMetrics.Wrapping) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> oX = x + z / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (oX &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { x += HexMetrics.wrapSize; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (oX &gt;= HexMetrics.wrapSize) { x -= HexMetrics.wrapSize; } } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x = x; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.z = z; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุญูุงููุง ุนูุฏ ุชุญุฑูุฑ ุงูุฌุฒุก ุงูุณููู ุฃู ุงูุนููู ูู ุงูุฎุฑูุทุฉ ุ ุฃุชููู ุฃุฎุทุงุก </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ุนูุฏูุง ูุธูุฑ ุงููุคุดุฑ ูู ุตู ุงูุฎูุงูุง ุฎุงุฑุฌ ุงูุฎุฑูุทุฉ ุจุณุจุจ ุชุดูู ุงูููู. </font><font style="vertical-align: inherit;">ูุฐุง ุฎุทุฃ ูุญุฏุซ ูุฃููุง ูุง ูุทุงุจู ุงูุฅุญุฏุงุซูุงุช </font></font><code>HexGrid.GetCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ูุนููุฉ ุงููุชุฌู. </font><font style="vertical-align: inherit;">ูููู ุฅุตูุงุญ ุฐูู ูู ุฎูุงู ุชุทุจูู ุทุฑููุฉ </font></font><code>GetCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅุญุฏุงุซูุงุช ููุนููุงุช ุณุชููู ุจุฅุฌุฑุงุก ุงููุญูุตุงุช ุงููุงุฒูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { position = transform.InverseTransformPoint(position); HexCoordinates coordinates = HexCoordinates.FromPosition(position); <span class="hljs-comment"><span class="hljs-comment">// int index = // coordinates.X + coordinates.Z * cellCountX + coordinates.Z / 2; // return cells[index]; return GetCell(coordinates); }</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุทู ุงูุณุงุญูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู ุงูุชุซููุซ ุจุดูู ุฌูุฏ ููุชุถุงุฑูุณ ุ ูููู ุนูู ุทูู ุฎุท ุงูุชูุงุณ ุจูู ุงูุดุฑู ูุงูุบุฑุจ ูุง ุชูุฌุฏ ุญูุงู ูุณุงุญู ุงููุงุก. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูู ููุท ูุง ูููุงุฑูู. </font><font style="vertical-align: inherit;">ูุชู ููุจูุง ูุชูุฏุฏูุง ุฅูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุฎุฑูุทุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6fe/20a/ed3/6fe20aed3cb0dea0a9e47ef08caa10f5.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงูุฉ ุงูููุงู ุงูููููุฏุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ุ ูุฃูู ุนูุฏ ุชุซููุซ ููุงู ุงูุณุงุญู ุ ูุณุชุฎุฏู ูุถุน ุงูุฌุงุฑ. </font><font style="vertical-align: inherit;">ูุฅุตูุงุญ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ูุง ูุชุนุงูู ูุนู ุ ุงูููุฌูุฏ ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุจุทุงูุฉ. </font><font style="vertical-align: inherit;">ูุชุจุณูุท ุงููููุฉ ุ ุณูุถูู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุฏ ุฎููุฉ </font><font style="vertical-align: inherit;">ุฅูู </font><font style="vertical-align: inherit;">ุฎุงุตูุฉ ุงูููุฑุณ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ColumnIndex { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู ูุฐุง ุงูููุฑุณ ุฅูู </font></font><code>HexGrid.CreateCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููู ุชุณุงูู ุจุจุณุงุทุฉ ุฅุญุฏุงุซูุงุช ุงูุฅุฒุงุญุฉ X ููุณููุฉ ุนูู ุญุฌู ุงููุทุนุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { โฆ cell.Index = i; cell.ColumnIndex = x / HexMetrics.chunkSizeX; โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง </font></font><code>HexGridChunk.TriangulateWaterShore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุฏ ูุง ุชู ุชุตุบูุฑู ุจููุงุฑูุฉ ููุฑุณ ุงูุนููุฏ ููุฎููุฉ ุงูุญุงููุฉ ูุฌุงุฑุชูุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุฑุณ ุนููุฏ ุงูุฌุงุฑ ุฃูู ูู ุฎุทูุฉ ูุงุญุฏุฉ ุ ููุญู ุนูู ุงูุฌุงูุจ ุงูุบุฑุจู ุ ูุงูุฌุงุฑ ุนูู ุงูุฌุงูุจ ุงูุดุฑูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุชุญููู ุฌุงุฑูุง ุบุฑุจูุง. </font><font style="vertical-align: inherit;">ููุณ ุงูุดูุก ููู ุงูุงุชุฌุงู ุงููุนุงูุณ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 center2 = neighbor.Position; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.ColumnIndex &lt; cell.ColumnIndex - <span class="hljs-number"><span class="hljs-number">1</span></span>) { center2.x += HexMetrics.wrapSize * HexMetrics.innerDiameter; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.ColumnIndex &gt; cell.ColumnIndex + <span class="hljs-number"><span class="hljs-number">1</span></span>) { center2.x -= HexMetrics.wrapSize * HexMetrics.innerDiameter; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f13/308/3ec/f133083ec9172168e5302d737fd0ce27.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถูุงุน ุงูุณุงุญู ุ ูููู ูุง ุฒูุงูุง. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุงุนุชูููุง ุจุฃุถูุงุน ุงูุณุงุญู ุ ููู ุญุชู ุงูุขู ูู ูุชุนุงูู ูุน ุงูุฒูุงูุง. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฃู ููุนู ููุณ ุงูุดูุก ูุน ุงูุฌุงุฑ ุงูุชุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextNeighbor != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Vector3 center3 = nextNeighbor.Position; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextNeighbor.ColumnIndex &lt; cell.ColumnIndex - <span class="hljs-number"><span class="hljs-number">1</span></span>) { center3.x += HexMetrics.wrapSize * HexMetrics.innerDiameter; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextNeighbor.ColumnIndex &gt; cell.ColumnIndex + <span class="hljs-number"><span class="hljs-number">1</span></span>) { center3.x -= HexMetrics.wrapSize * HexMetrics.innerDiameter; } Vector3 v3 = center3 + (nextNeighbor.IsUnderwater ? HexMetrics.GetFirstWaterCorner(direction.Previous()) : HexMetrics.GetFirstSolidCorner(direction.Previous())); โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d02/c0d/751/d02c0d7510fba8b3707b89f146b71837.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุต ุงูุณุงุญู ุจุดูู ุตุญูุญ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูููุฏ ุงูุจุทุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุคุซุฑ ุฎูุงุฑ ุฑุจุท ุงูุฌุงูุจูู ุงูุดุฑูู ูุงูุบุฑุจู ุนูู ุฅูุดุงุก ุงูุฎุฑุงุฆุท. </font><font style="vertical-align: inherit;">ุนูุฏ ุชุตุบูุฑ ุงูุฎุฑูุทุฉ ุ ูุฌุจ ุฃูุถูุง ุชูููู ุฎูุงุฑุฒููุฉ ุงูุชูููุฏ. </font><font style="vertical-align: inherit;">ุณูุคุฏู ูุฐุง ุฅูู ุฅูุดุงุก ุฎุฑูุทุฉ ุฃุฎุฑู ุ ูููู ุนูุฏ ุงุณุชุฎุฏุงู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Map X ุจูุง ุญุฏูุฏ X ุ ูุฅู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทู ููุณ ูุงุถุญูุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/540/01f/f90/54001ff900386d5f389850de0a1d0034.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/428/859/ecb/428859ecb5c5bf9a68b277675110e44b.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ ูุจูุฑุฉ 1208905299 ูุน ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ. ูุน ููุทู ูุจุฏูู ุฐูู.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุงูุชุตุบูุฑ ูุง ูุนูู ูุงุณุชุฎุฏุงู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ ุงูุญุฏูุฏ ูX</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ููู ูุง ูููููุง ุงูุชุฎูุต ููู ููุท ุ ูุฃูู ูู ููุณ ุงูููุช ุณุชูุฏูุฌ ุงูููุงุทู. ุนูุฏ ุงูุชุตุบูุฑ ุจุฏูุงู ูู ุฐูู ุ ูููููุง ููุท ุงุณุชุฎุฏุงู ููุทูุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฏูุฏ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุบูุฑ </font></font><code>HexMapGenerator.CreateRegions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณุชุจุฏู ูู ุฌููุน ุงูุญุงูุงุช </font></font><code>mapBorderX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจู </font></font><code>borderX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุณูููู ูุฐุง ุงููุชุบูุฑ ุงูุฌุฏูุฏ ูุณุงูููุง ุฃู </font></font><code>regionBorder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุฃู </font></font><code>mapBorderX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุณุจ ูููุฉ ุฎูุงุฑ ุงูุงูููุงุฑ. ุฃุฏูุงู ุนุฑุถุช ุงูุชุบููุฑุงุช ููุท ููุญุงูุฉ ุงูุฃููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> borderX = grid.wrapping ? regionBorder : mapBorderX; MapRegion region; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (regionCount) { <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: region.xMin = borderX; region.xMax = grid.cellCountX - borderX; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุช ููุณู ุ ุชุธู ุงูููุงุทู ูููุตูุฉ ุ ูููู ูุฐุง ุถุฑูุฑู ููุท ุฅุฐุง ูุงูุช ููุงู ููุงุทู ูุฎุชููุฉ ุนูู ุงูุฌุงูุจูู ุงูุดุฑูู ูุงูุบุฑุจู ูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ููุงู ุญุงูุชุงู ุญูุซ ูุง ูุชู ุงุญุชุฑุงู ูุฐุง. </font><font style="vertical-align: inherit;">ุงูุฃูู ูู ุนูุฏูุง ูููู ูุฏููุง ููุทูุฉ ูุงุญุฏุฉ ููุท. </font><font style="vertical-align: inherit;">ูุงูุซุงูู ูู ุนูุฏูุง ุชููู ููุงู ููุทูุชุงู ุชูุณู ุงูุฎุฑูุทุฉ ุฃูููุงู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุงุช ุ ูููููุง ุชุนููู </font></font><code>borderX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฉ ุตูุฑ ุ ููุง ุณูุณูุญ ูููุชู ุงูุฃุฑุถูุฉ ุจุนุจูุฑ ุฎุท ุงูุชูุงุณ ุจูู ุงูุดุฑู ูุงูุบุฑุจ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (regionCount) { <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grid.wrapping) { borderX = <span class="hljs-number"><span class="hljs-number">0</span></span>; } region.xMin = borderX; region.xMax = grid.cellCountX - borderX; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grid.wrapping) { borderX = <span class="hljs-number"><span class="hljs-number">0</span></span>; } region.xMin = borderX; region.xMax = grid.cellCountX - borderX; region.zMin = mapBorderZ; region.zMax = grid.cellCountZ / <span class="hljs-number"><span class="hljs-number">2</span></span> - regionBorder; regions.Add(region); region.zMin = grid.cellCountZ / <span class="hljs-number"><span class="hljs-number">2</span></span> + regionBorder; region.zMax = grid.cellCountZ - mapBorderZ; regions.Add(region); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/db8/4d4/c9e/db84d4c9e40c9e35ad29af69314f73e1.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทูุฉ ูุงุญุฏุฉ ุชููุงุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุฉ ุงูุฃููู ุ ูุจุฏู ุฃู ูู ุดูุก ูุนูู ุจุดูู ุตุญูุญ ุ ูููู ููุงู ุจุงููุนู ูุฌูุฉ ุนูู ุทูู ุฎุท ุงูุชูุงุณ. </font><font style="vertical-align: inherit;">ูุตุจุญ ูุฐุง ุฃูุซุฑ ูุถูุญูุง ุฅุฐุง ููุช ุจุชุนููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุจุฉ ุงูุชุขูู ุฅูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุตูุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ef5/a4e/572/ef5a4e5722dbbb8af91e770220d7d141.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6b3/f75/fce/6b3f75fce35d6be9c8a66c445c4dc9cd.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุชู ุชุนุทูู ุงูุชุขูู ุ ูุตุจุญ ุฎุท ุงูุชูุงุณ ุนูู ุงูุฅุบุงุซุฉ ููุญูุธูุง.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฏุซ ุงููุฌูุฉ ูุฃู ุงูุชูุงุณ ูููุน ููู ุดุธุงูุง ุงูุฅุบุงุซุฉ. ูุชุญุฏูุฏ ูุง ูุชู ุฅุถุงูุชู ุฃููุงู ุ ูุชู ุงุณุชุฎุฏุงู ุงููุณุงูุฉ ูู ุงูุฎููุฉ ุฅูู ูุฑูุฒ ุงูุฌุฒุก ุ ููููู ุฃู ุชููู ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุฎุฑูุทุฉ ุจุนูุฏุฉ ุฌุฏูุง ุ ูุฐูู ูุง ูุชู ุชุดุบูููุง ุฃุจุฏูุง ุชูุฑูุจูุง. ุจุงูุทุจุน ุ ูุฐุง ุฎุทุฃ. ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู </font></font><code>HexCoordinates.DistanceTo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑูุชูุง ุจุงูุฎุฑูุทุฉ ุงููุตุบุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุณุจ ุงููุณุงูุฉ ุจูู </font></font><code>HexCoordinates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุฌูุน ุงููุณุงูุงุช ุงููุทููุฉ ุนูู ุทูู ูู ูู ุงููุญุงูุฑ ุงูุซูุงุซุฉ ูุฎูุถ ุงููุชูุฌุฉ ุฅูู ุงููุตู. ุชููู ุงููุณุงูุฉ ุนูู ุทูู Z ุตุญูุญุฉ ุฏุงุฆููุง ุ ูููู ุงูุทู ุนูู ุทูููุง ูุฏ ูุคุซุฑ ุนูู ูุณุงูุงุช X ู Y. ูุฐุง ูููุจุฏุฃ ุจุญุณุงุจ ูููุตู ูู X + Y.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DistanceTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCoordinates other</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// return // ((x &lt; other.x ? other.x - x : x - other.x) + // (Y &lt; other.Y ? other.Y - Y : Y - other.Y) + // (z &lt; other.z ? other.z - z : z - other.z)) / 2; int xy = (x &lt; other.x ? other.x - x : x - other.x) + (Y &lt; other.Y ? other.Y - Y : Y - other.Y); return (xy + (z &lt; other.z ? other.z - z : z - other.z)) / 2; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุทู ูุฎูู ูุณุงูุฉ ุฃูุตุฑ ููุฎูุงูุง ุงูุนุดูุงุฆูุฉ ููุณ ุจุงููููุฉ ุงูุณููุฉ ุ ูุฐูู ุฏุนููุง ููุท ูุญุณุจ X + Y ููุญุงูุงุช ุงูุชู ูููู ูููุง ุจุทู ุฅุญุฏุงุซูุงุช ุฃุฎุฑู ุฅูู ุงูุฌุงูุจ ุงูุบุฑุจู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงููููุฉ ุฃูู ูู X + Y ุงูุฃุตูู ุ ูุงุณุชุฎุฏููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> xy = (x &lt; other.x ? other.x - x : x - other.x) + (Y &lt; other.Y ? other.Y - Y : Y - other.Y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (HexMetrics.Wrapping) { other.x += HexMetrics.wrapSize; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> xyWrapped = (x &lt; other.x ? other.x - x : x - other.x) + (Y &lt; other.Y ? other.Y - Y : Y - other.Y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (xyWrapped &lt; xy) { xy = xyWrapped; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ูู ูุคุฏ ุฐูู ุฅูู ูุณุงูุฉ ุฃูุตุฑ ุ ููู ุงููููู ุฃู ุชุชุญูู ุฅูู ูุณุงูุฉ ุฃูุตุฑ ูู ุงูุงุชุฌุงู ุงูุขุฎุฑ ุ ูุฐูู ุณูู ูุชุญูู ูููุง. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (HexMetrics.Wrapping) { other.x += HexMetrics.wrapSize; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> xyWrapped = (x &lt; other.x ? other.x - x : x - other.x) + (Y &lt; other.Y ? other.Y - Y : Y - other.Y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (xyWrapped &lt; xy) { xy = xyWrapped; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { other.x -= <span class="hljs-number"><span class="hljs-number">2</span></span> * HexMetrics.wrapSize; xyWrapped = (x &lt; other.x ? other.x - x : x - other.x) + (Y &lt; other.Y ? other.Y - Y : Y - other.Y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (xyWrapped &lt; xy) { xy = xyWrapped; } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุญุตู ุฏุงุฆููุง ุนูู ุฃูุตุฑ ูุณุงูุฉ ุนูู ุงูุฎุฑูุทุฉ ุงููุงุจูุฉ ููุทู. </font><font style="vertical-align: inherit;">ูู ูุนุฏ ูุชู ุณุฏ ุฃุฌุฒุงุก ุงูุชุถุงุฑูุณ ุจูุงุณุทุฉ ุฎุท ุงูุชูุงุณ ุ ููุง ูุณูุญ ูููุชู ุงูุฃุฑุถูุฉ ุจุงูุงูุชูุงู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/65c/fb7/3b8/65cfb73b8107d7744ff8cdcabaf48083.jpg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/149/e6f/717/149e6f717defe9288565f37f7efcdf56.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุงุญุฉ ูุงุจูุฉ ููุทู ุจุดูู ุตุญูุญ ุฏูู ุงูุชุขูู ูุงูุชุขูู. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุณูุฑ ุญูู ุงูุนุงูู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุงูุชูููุฑ ูู ุฅูุดุงุก ุงูุฎุฑุงุฆุท ูุงูุชุซููุซ ุ ุฏุนูุง ููุชูู ุงูุขู ุฅูู ูุญุต ุงููุฑู ูุงูุงุณุชูุดุงู ูุงูุฑุคูุฉ. </font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุฎุชุจุงุฑ ุงูุชูุงุณ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูู ุนูุจุฉ ููุงุฌููุง ุนูุฏ ุชุญุฑูู ูุฑูุฉ ุญูู ุงูุนุงูู ูู ุญุงูุฉ ุงูุฎุฑูุทุฉ ุ ูุงูุชู ูุง ูููู ุงุณุชูุดุงููุง. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/452/4f4/748/4524f4748d2c4e3cb983ec5ecbf064c8.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ูุญุต ุฎุท ุงูุชูุงุณ ููุจุทุงูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฌุนู ุงูุฎูุงูุง ุนูู ุทูู ุญุงูุฉ ุงูุฎุฑูุทุฉ ุบูุฑ ูุณุชูุดูุฉ ูุฅุฎูุงุก ุงูุฅูุฌุงุฒ ุงูููุงุฌุฆ ููุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูููู ุนูุฏูุง ูุชู ุชุตุบูุฑ ุงูุฎุฑูุทุฉ ุ ูุฌุจ ุชูููุฒ ุงูุฎูุงูุง ุงูุดูุงููุฉ ูุงูุฌููุจูุฉ ููุท ุ ูููุณ ุงูุดุฑู ูุงูุบุฑุจ. </font><font style="vertical-align: inherit;">ุงูุชุบููุฑ </font></font><code>HexGrid.CreateCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุฎุฐ ูุฐุง ูู ุงูุงุนุชุจุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (wrapping) { cell.Explorable = z &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; z &lt; cellCountZ - <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cell.Explorable = x &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; z &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; x &lt; cellCountX - <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; z &lt; cellCountZ - <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุถูุญ ููุฒุงุช ุงูุฅุบุงุซุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุฏุนููุง ูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฑุคูุฉ ุชุนูู ุนูู ุทูู ุฎุท ุงูุชูุงุณ. </font><font style="vertical-align: inherit;">ูุนูู ุนูู ุงูุชุถุงุฑูุณ ุ ูููู ููุณ ูุน ูุงุฆูุงุช ุงูุชุถุงุฑูุณ. </font><font style="vertical-align: inherit;">ูุจุฏู ุฃู ุงููุงุฆูุงุช ุงููููุงุฑุฉ ุชุญุตู ุนูู ุฑุคูุฉ ุงูุฎููุฉ ุงูุฃุฎูุฑุฉ ุงูุชู ูู ุชููุงุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/631/ac1/811/631ac18111ba1eb8dfcf74a39fb2ffbe.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุคูุฉ ุบูุฑ ุตุญูุญุฉ ููุฃุดูุงุก. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูุฃูู </font></font><code>HexCellShaderData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุชุนููู </font><font style="vertical-align: inherit;">ูุถุน </font><font style="vertical-align: inherit;">ุงููุดุจู </font><font style="vertical-align: inherit;">ููุถุน ุทู ุงููุณูุฌ ุงููุณุชุฎุฏู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญู ุงููุดููุฉ ุ ูุง ุนููู ุณูู ุชุบููุฑ ูุถุน ุงููุดุจู ููุชูุฑุงุฑ. </font><font style="vertical-align: inherit;">ูููู ูุชุนูู ุนูููุง ุงูููุงู ุจู ูู ููุท ูุชูุณูู Uุ ุนูููุง ุฃู </font></font><code>Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุฃู </font></font><code>wrapModeU</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>wrapModeV</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cellTexture) { cellTexture.Resize(x, z); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cellTexture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture2D( x, z, TextureFormat.RGBA32, <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span> ); cellTexture.filterMode = FilterMode.Point; <span class="hljs-comment"><span class="hljs-comment">// cellTexture.wrapMode = TextureWrapMode.Clamp; cellTexture.wrapModeU = TextureWrapMode.Repeat; cellTexture.wrapModeV = TextureWrapMode.Clamp; Shader.SetGlobalTexture("_HexCellData", cellTexture); } โฆ }</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑู ูุฃุนูุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดููุฉ ุฃุฎุฑู ูู ุฃู ุงููุญุฏุงุช ูู ุชููุงุฑ ุจุนุฏ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุชุญุฑูู ุงูุนููุฏ ุงูุฐู ุชูุฌุฏ ููู ุ ุชุธู ุงููุญุฏุงุช ูู ููุณ ุงูููุงู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c50/29b/827/c5029b8273d7b53a3ddac2da03d9987f.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุชู ููู ุงููุญุฏุฉ ููู ูู ุงูุฌุงูุจ ุงูุฎุทุฃ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุญู ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ุฌุนู ุงููุฑู ุนูุงุตุฑ ูุฑุนูุฉ ูู ุงูุฃุนูุฏุฉ ุ ููุง ูุนููุง ูุน ุงูุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ูู ูุฌุนููู ุงูุฃุทูุงู ุงููุจุงุดุฑูู ููุดุจูุฉ </font></font><code>HexGrid.AddUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexUnit unit, HexCell location, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> orientation</span></span></span><span class="hljs-function">)</span></span> { units.Add(unit); unit.Grid = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-comment"><span class="hljs-comment">// unit.transform.SetParent(transform, false); unit.Location = location; unit.Orientation = orientation; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงููุญุฏุงุช ุชุชุญุฑู ุ ููุฏ ุชุธูุฑ ูู ุนููุฏ ุขุฎุฑ ุ ุฃู ุฃูู ุณูููู ูู ุงูุถุฑูุฑู ุชุบููุฑ ุงูุฃุตู. </font><font style="vertical-align: inherit;">ูุฌุนู ูุฐุง ูููููุง ุ ูุถูู ุฅูู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุนุงูุฉ </font></font><code>MakeChildOfColumn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุจุตูุชูุง ูุนููุงุช ุ ููุฑุฑู ูููู </font></font><code>Transform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุตุฑ ุงููุฑุนู ูููุฑุณ ุงูุนููุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MakeChildOfColumn</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Transform child, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> columnIndex</span></span></span><span class="hljs-function">)</span></span> { child.SetParent(columns[columnIndex], <span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุจุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ุนูุฏ ุชุนููู ุงูุฎุงุตูุฉ </font></font><code>HexUnit.Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexCell Location { โฆ <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { โฆ Grid.MakeChildOfColumn(transform, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.ColumnIndex); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูุญู ูุดููุฉ ุฅูุดุงุก ุงููุญุฏุงุช. </font><font style="vertical-align: inherit;">ูููููุง ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุฌุนููู ููุชูููู ุฅูู ุงูุนููุฏ ุงููุทููุจ ุนูุฏ ุงูุชุญุฑู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุชุจุน </font></font><code>HexUnit.TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนููุฏ ุงูุญุงูู </font><font style="vertical-align: inherit;">ูู </font><font style="vertical-align: inherit;">ุงูููุฑุณ. </font><font style="vertical-align: inherit;">ูู ุจุฏุงูุฉ ูุฐู ุงูุทุฑููุฉ ุ ูููู ูุฐุง ูู ููุฑุณ ุนููุฏ ุงูุฎููุฉ ูู ุจุฏุงูุฉ ุงููุณุงุฑ ุ ุฃู ุงูุญุงูู ุฅุฐุง ุชู ููุงุทุนุฉ ุงูุญุฑูุฉ ุนู ุทุฑูู ุฅุนุงุฏุฉ ุงูุชุฑุฌูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Vector3 a, b, c = pathToTravel[<span class="hljs-number"><span class="hljs-number">0</span></span>].Position; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LookAt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pathToTravel[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">].Position</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Grid.DecreaseVisibility( // currentTravelLocation ? currentTravelLocation : pathToTravel[0], // VisionRange // ); if (!currentTravelLocation) { currentTravelLocation = pathToTravel[0]; } Grid.DecreaseVisibility(currentTravelLocation, VisionRange); int currentColumn = currentTravelLocation.ColumnIndex; โฆ }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎูุงู ูู ุชูุฑุงุฑ ููุญุฑูุฉ ุ ุณูู ูุชุญูู ููุง ุฅุฐุง ูุงู ููุฑุณ ุงูุนููุฏ ุงูุชุงูู ูุฎุชูููุง ุ ูุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุณูููู ุจุชุบููุฑ ุฃุตู ุงูุทูุจ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> currentColumn = currentTravelLocation.ColumnIndex; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Time.deltaTime * travelSpeed; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { โฆ Grid.IncreaseVisibility(pathToTravel[i], VisionRange); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nextColumn = currentTravelLocation.ColumnIndex; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentColumn != nextColumn) { Grid.MakeChildOfColumn(transform, nextColumn); currentColumn = nextColumn; } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุณูุญ ูุฐุง ูููุญุฏุงุช ุจุงูุชุญุฑู ุจุดูู ููุงุซู ููุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุนูุฏ ุงูุชุญุฑู ุนุจุฑ ุฎุท ุงูุชูุงุณ ููุจุทุงูุฉ ุ ูุง ุชููุงุฑ ุงููุญุฏุงุช ุจุนุฏ. </font><font style="vertical-align: inherit;">ูุจุฏูุงู ูู ุฐูู ุ ูุจุฏุฃูู ูุฌุฃุฉ ูู ุงูุชุญุฑู ูู ุงูุงุชุฌุงู ุงูุฎุงุทุฆ. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ุจุบุถ ุงููุธุฑ ุนู ูููุน ุฎุท ุงูุชูุงุณ ุ ูููู ุจุดูู ููุญูุธ ุนูุฏูุง ูููุฒูู ุนุจุฑ ุงูุฎุฑูุทุฉ ุจุฃููููุง.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุจุงู ุงูุฎูู ุนุจุฑ ุงูุฎุฑูุทุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูููููุง ุงุณุชุฎุฏุงู ููุณ ุงูููุฌ ุงูุฐู ุชู ุงุณุชุฎุฏุงูู ููุณุงุญู ุ ูููู ูุฐู ุงููุฑุฉ ููุท ุณูุญูู ุงูููุญูู ุงูุฐู ุชุชุญุฑู ููู ุงูุงููุตุงู. </font><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุชุญููู ุงูุนููุฏ ุงูุชุงูู ุฅูู ุงูุดุฑู ุ ูุณูููู ุงูููุญูู ุฃูุถูุง ุดุฑููุง ุ ูุจุงููุซู ููุงุชุฌุงู ุงูุขุฎุฑ. </font><font style="vertical-align: inherit;">ููู ุงูุถุฑูุฑู ุชุบููุฑ ููุงุท ุงูุณูุทุฑุฉ ุนูู ููุญูู </font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ูู ุดุฃููุง ุฃู ุชุคุซุฑ ุฃูุถุง ุนูู ููุทุฉ ูุฑุงูุจุฉ </font></font><code>c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { currentTravelLocation = pathToTravel[i]; a = c; b = pathToTravel[i - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; <span class="hljs-comment"><span class="hljs-comment">// c = (b + currentTravelLocation.Position) * 0.5f; // Grid.IncreaseVisibility(pathToTravel[i], VisionRange); int nextColumn = currentTravelLocation.ColumnIndex; if (currentColumn != nextColumn) { if (nextColumn &lt; currentColumn - 1) { ax -= HexMetrics.innerDiameter * HexMetrics.wrapSize; bx -= HexMetrics.innerDiameter * HexMetrics.wrapSize; } else if (nextColumn &gt; currentColumn + 1) { ax += HexMetrics.innerDiameter * HexMetrics.wrapSize; bx += HexMetrics.innerDiameter * HexMetrics.wrapSize; } Grid.MakeChildOfColumn(transform, nextColumn); currentColumn = nextColumn; } c = (b + currentTravelLocation.Position) * 0.5f; Grid.IncreaseVisibility(pathToTravel[i], VisionRange); โฆ }</span></span></code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฑูุฉ ูุงุจูุฉ ููุทู.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุขุฎุฑ ุดูุก ูุนูู ูู ุชุบููุฑ ุงูููุนุทู ุงูุฃููู ูููุฑูู ุนูุฏูุง ููุธุฑ ุฅูู ุงูุฎููุฉ ุงูุฃููู ุงูุชู ุณููุชูู ุฅูููุง. ุฅุฐุง ูุงูุช ูุฐู ุงูุฒูุฒุงูุฉ ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุฎุท ุงูุชูุงุณ ุจูู ุงูุดุฑู ูุงูุบุฑุจ ุ ูุณุชุจุฏู ุงููุญุฏุฉ ูู ุงูุงุชุฌุงู ุงูุฎุงุทุฆ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุชุตุบูุฑ ุงูุฎุฑูุทุฉ ุ ููุงู ุทุฑููุชุงู ูููุธุฑ ุฅูู ููุทุฉ ููุณุช ุจุงูุถุจุท ูู ุงูุดูุงู ุฃู ุงูุฌููุจ. ููููู ุงููุธุฑ ุฅูุง ุดุฑููุง ุฃู ุบุฑุจูุง. ุณูููู ูู ุงูููุทูู ุฃู ููุธุฑ ูู ุงูุงุชุฌุงู ุงูููุงุจู ูุฃูุฑุจ ูุณุงูุฉ ุฅูู ุงูููุทุฉ ุ ูุฃูู ุฃูุถูุง ุงุชุฌุงู ุงูุญุฑูุฉ ุ ูุฐูู ุฏุนููุง ูุณุชุฎุฏููุง </font></font><code>LookAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุชุตุบูุฑ ุ ุณูู ูุชุญูู ูู ุงููุณุงูุฉ ุงููุณุจูุฉ ุนูู ุทูู ุงููุญูุฑ X. ุฅุฐุง ูุงูุช ุฃูู ูู ุงููุตู ุงูุณุงูุจ ูู ุนุฑุถ ุงูุฎุฑูุทุฉ ุ ููุฌุจ ุฃู ููุธุฑ ุฅูู ุงูุบุฑุจ ุ ูุงูุฐู ูููู ุงูููุงู ุจู ุนู ุทุฑูู ุชุญููู ุงูููุทุฉ ุฅูู ุงูุบุฑุจ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุฅุฐุง ูุงูุช ุงููุณุงูุฉ ุฃูุซุฑ ูู ูุตู ุนุฑุถ ุงูุฎุฑูุทุฉ ุ ููุฌุจ ุนูููุง ุงูุงูููุงุฑ ุฅูู ุงูุดุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LookAt</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 point</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (HexMetrics.Wrapping) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xDistance = point.x - transform.localPosition.x; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (xDistance &lt; -HexMetrics.innerRadius * HexMetrics.wrapSize) { point.x += HexMetrics.innerDiameter * HexMetrics.wrapSize; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (xDistance &gt; HexMetrics.innerRadius * HexMetrics.wrapSize) { point.x -= HexMetrics.innerDiameter * HexMetrics.wrapSize; } } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุ ูุฏููุง ุฎุฑูุทุฉ ูุตุบุฑุฉ ุชุนูู ุจูุงูู ุทุงูุชูุง. </font><font style="vertical-align: inherit;">ูุจูุฐุง ูุฎุชุชู ุณูุณูุฉ ุงูุฏุฑูุณ ุนูู ุงูุฎุฑุงุฆุท ุงูุณุฏุงุณูุฉ. </font><font style="vertical-align: inherit;">ููุง ุฐูุฑ ูู ุงูุฃูุณุงู ุงูุณุงุจูุฉ ุ ูููู ุงููุธุฑ ูู ููุงุถูุน ุฃุฎุฑู ุ ููููุง ููุณุช ุฎุงุตุฉ ุจุงูุฎุฑุงุฆุท ุงูุณุฏุงุณูุฉ. </font><font style="vertical-align: inherit;">ุฑุจูุง ุณุฃุฏุฑุณูุง ูู ุณูุณูุฉ ูู ุงูุฏุฑูุณ ุงูุชุนููููุฉ ูู ุงููุณุชูุจู.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ููุช ุจุชูุฒูู ุงูุญุฒูุฉ ุงูุฃุฎูุฑุฉ ูุชูููุช ุฃุฎุทุงุก ูู ูุถุน ุงูุชุดุบูู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,       <em>Rotation</em> .    .  .   5. </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ููุช ุจุชูุฒูู ุงูุญุฒูุฉ ุงูุฃุฎูุฑุฉ ูุงูุฑุณููุงุช ููุณุช ุฌูููุฉ ููุง ูู ููุทุงุช ุงูุดุงุดุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">        . -    . </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ููุช ุจุชูุฒูู ุงูุญุฒูุฉ ุงูุฃุฎูุฑุฉ ููููู ุจุงุณุชูุฑุงุฑ ุจุฅูุดุงุก ููุณ ุงูุจุทุงูุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">      seed (1208905299),      .    ,  <em>Use Fixed Seed</em> . </div></div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar427567/">https://habr.com/ru/post/ar427567/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar427555/index.html">ุงูุญููุงูุงุช ุงูุชู ุชุนูู ุงูุจุดุฑ ุชุชุจุนูุง ุจุงุณุชุฎุฏุงู ุชูููุฉ ุงูุชุนุฑู ุนูู ุงููุฌูู</a></li>
<li><a href="../ar427557/index.html">ููุฎุต ุฃุญุฏุงุซ ุชูููููุฌูุง ุงููุนูููุงุช ูู ููููุจุฑ (ุงูุฌุฒุก ุงูุฃูู)</a></li>
<li><a href="../ar427561/index.html">ุงูุญู ูู ุงูุฅุตูุงุญ: ุงูุฎุทูุงุช ุงูุฃููู ูู ุงูุงุชุฌุงู ุงูุตุญูุญ ูู ููุชูุฑููุง</a></li>
<li><a href="../ar427563/index.html">ุชู ุชูููุฐ ูุนูุงุฑ SNI ุงููุดูุฑ ูู Firefox Nightly</a></li>
<li><a href="../ar427565/index.html">"ุฅูุฌุงุฒู ูู ุฃููู ุนุงุฏุฉ ูุง ุนุงุฏุช ุฅูู ุงููููุฉ" - 10 ุฃุณุฆูุฉ ูููุจุฑูุฌ ุ ุงูุนุฏุฏ 10</a></li>
<li><a href="../ar427569/index.html">ูู ุจุถุจุท OpenStack ุชุญุช ุงูุญูู ุงูุนุงูู</a></li>
<li><a href="../ar427571/index.html">ุงุชุญุงุฏ R ู PostgreSQL. ูููู ุจุชุญููู ุนูู ุงููุทุงุฑุงุช ูุญุณุงุจ ุงููุนุงุดุงุช</a></li>
<li><a href="../ar427573/index.html">ุญููู ุฃู ุญูุงุฉ: ูุงูููู ูุณุจุจ ูุฌุฐุจ ุทููู ุฅูู ุงูุนูู</a></li>
<li><a href="../ar427575/index.html">ููุงุฐุง ูู ุชุนูู Wi-Fi ููุง ูู ูุฎุทุท ููุง ุ ูููุงุฐุง ุชุนุฑู ุงููุงุชู ุงูุฐู ูุณุชุฎุฏูู ุงูููุธู</a></li>
<li><a href="../ar427577/index.html">ุงูุชุนูู ุงูุขูู ููุงุจู ุชุญููู ุงูุชูููุน ุนูุฏ ุงูุชุดุงู ุงููุฌูุงุช ุนูู ุชุทุจูู ููุจ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>