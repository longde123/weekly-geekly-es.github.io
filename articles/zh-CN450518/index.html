<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’“ ğŸ‘©ğŸ¼â€ğŸ’» ğŸš¬ Arduinoå’Œå¤„ç†ã€‚ å¦‚ä½•é€šè¿‡COMç«¯å£æ§åˆ¶å¾®æ§åˆ¶å™¨ã€‚ åŒå‘é€šè®¯ ğŸ‘ğŸ¾ ğŸ’© ğŸ“’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§å®¶å¥½ï¼ äº’è”ç½‘ä¸Šå­˜åœ¨ä¸€ä¸ªè¯¯è§£ï¼Œå³ä½¿ç”¨è‡ªåˆ¶çš„ç”µå­è®¾å¤‡æ§åˆ¶è®¡ç®—æœºï¼Œåªéœ€è¦å¯ä»¥è¢«è¯†åˆ«ä¸ºUSB HIDè®¾å¤‡çš„ä¸“ç”¨æ¿å³å¯ã€‚ å…³äºArduinoï¼Œæ¯ä¸ªäººéƒ½åœ¨è°ˆè®ºArduino Leanardo ã€‚ è¯¸å¦‚é”®ç›˜å’Œé¼ æ ‡ä¹‹ç±»çš„æµè¡Œåº“ï¼Œå…è®¸æ‚¨ä½¿ç”¨å¾®æ§åˆ¶å™¨åˆ›å»ºé¼ æ ‡æˆ–é”®ç›˜çš„ä»¿çœŸï¼Œä»…é€‚ç”¨äºä¸€å¯¹Arduino Leonardo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arduinoå’Œå¤„ç†ã€‚ å¦‚ä½•é€šè¿‡COMç«¯å£æ§åˆ¶å¾®æ§åˆ¶å™¨ã€‚ åŒå‘é€šè®¯</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450518/"> å¤§å®¶å¥½ï¼ äº’è”ç½‘ä¸Šå­˜åœ¨ä¸€ä¸ªè¯¯è§£ï¼Œå³ä½¿ç”¨è‡ªåˆ¶çš„ç”µå­è®¾å¤‡æ§åˆ¶è®¡ç®—æœºï¼Œåªéœ€è¦å¯ä»¥è¢«è¯†åˆ«ä¸ºUSB HIDè®¾å¤‡çš„ä¸“ç”¨æ¿å³å¯ã€‚ å…³äºArduinoï¼Œæ¯ä¸ªäººéƒ½åœ¨è°ˆè®º<u><i>Arduino Leanardo</i></u> ã€‚ è¯¸å¦‚<b>é”®ç›˜</b>å’Œ<b>é¼ æ ‡ä¹‹ç±»çš„</b>æµè¡Œåº“ï¼Œå…è®¸æ‚¨ä½¿ç”¨å¾®æ§åˆ¶å™¨åˆ›å»ºé¼ æ ‡æˆ–é”®ç›˜çš„ä»¿çœŸï¼Œä»…é€‚ç”¨äºä¸€å¯¹Arduino Leonardoå¼€å‘æ¿ã€‚ <br><br> æˆ‘å°†è®¨è®ºå¦‚ä½•è¿æ¥ä»»ä½•Arduinoå¾®æ§åˆ¶å™¨ï¼ˆä¾‹å¦‚<u><i>Arduino Uno</i></u> ï¼‰åŠå…¶å¤„ç†ç¨‹åºã€‚ å°†Processingæ‰€åŸºäºçš„JavaçŸ¥è¯†æ·»åŠ åˆ°å…¶ä»–æ‰€æœ‰å†…å®¹ä¹‹åï¼Œå°±å¯ä»¥åœ¨æ•´ä¸ªè®¡ç®—æœºï¼ˆè€Œä¸ä»…ä»…æ˜¯å…¶è‡ªå·±çš„åº”ç”¨ç¨‹åºï¼‰çš„æ§åˆ¶ä¸‹æ·»åŠ é¡¹ç›®ã€‚ ç”¨Javaæ¥æ§åˆ¶Javaä¸­çš„è®¡ç®—æœºç¨‹åºå¹¶ä¸æ˜¯ä»€ä¹ˆç§˜å¯†ï¼Œè°·æ­Œï¼Œæˆ‘å‘æ‚¨ä¿è¯ï¼Œæ‚¨ä¼šæ‰¾åˆ°ä¸€åˆ‡ã€‚ <br><a name="habracut"></a><br><h3> ä¸‹è½½å¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ </h3><br> æœ‰è®¸å¤šé›†æˆå¼€å‘ç¯å¢ƒå¯ç”¨äºä»¥çº¯Cè¯­è¨€å¯¹å¾®æ§åˆ¶å™¨è¿›è¡Œç¼–ç¨‹ã€‚ å…¶ä¸­ï¼Œæœ€æ–¹ä¾¿çš„æ˜¯Atollicï¼ŒEclipseï¼ŒKeilã€‚ <br><br> ä½†æ˜¯ï¼Œä¸ºäº†æœ¬æŒ‡å—çš„ç®€å•æ€§å’Œå¯è®¿é—®æ€§ï¼Œæˆ‘å°†ä½¿ç”¨Arduino IDEç¼–è¾‘å™¨å¹¶ç”¨Arduino Cç¼–å†™ã€‚ æ‚¨å¯ä»¥ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Arduinoå®˜æ–¹ç½‘ç«™</a>ä¸‹è½½è¿™æ ·çš„ç¼–è¾‘å™¨ã€‚ <br><br> ä¹Ÿå¯ä»¥ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®˜æ–¹ç½‘ç«™</a>ä¸‹è½½Procrssingä¸Šçš„ç¼–ç¨‹å¼€å‘ç¯å¢ƒã€‚ <br><br> ä¸ºäº†ç®€æ´èµ·è§ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒIDEæ•°æ®éå¸¸ç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åœ¨åŒä¸€å¼•æ“ä¸Šç¼–å†™çš„ã€‚ å½“åˆ›å»ºArduinoæ—¶ï¼Œåˆ›å§‹äººè¯•å›¾åƒå¤„ç†ç¼–è¾‘å™¨ä¸€æ ·ï¼Œå°½å¯èƒ½ç®€åŒ–å…¶ä»£ç ç¼–è¾‘å™¨ã€‚ <br><br><h3>  Arduinoçš„ æˆ‘ä»¬ç»„è£…ç”µè·¯å¹¶ç¼–å†™ä»£ç  </h3><br> åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨Arduino Unoã€‚ ä¸€ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªç”µä½è®¡å’Œä¸€ä¸ªLEDå°†è¢«è¿æ¥åˆ°å®ƒã€‚ å› æ­¤ï¼Œæˆ‘å¯ä»¥è¾“å‡ºé€»è¾‘0æˆ–1ã€‚è¯»å–é€»è¾‘0æˆ–1ã€‚ç„¶åæ‰§è¡Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¨¡æ•°è½¬æ¢</a> ï¼ˆADCæˆ–ADCï¼‰ï¼Œæ ¹æ®ç”µä½è®¡çš„ä½ç½®è·å–0åˆ°1023ä¹‹é—´çš„æ•°å­—ï¼ˆåœ¨Arduino Unoä¸­ä¸º10ä½ADCï¼‰ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œæ‚¨ä¸éœ€è¦å¤ªå¤šï¼Œå› ä¸ºè¿™äº›æ˜¯å¾®æ§åˆ¶å™¨å¯ä»¥å®Œæˆçš„ä¸»è¦åŠŸèƒ½ã€‚ <br><br> æ¥çº¿å›¾ï¼š <br><br><img src="https://habrastorage.org/webt/az/9e/vw/az9evwie9gjp4uojleeaoyjrnuk.png"><br><br> åœ¨è¯¥å›¾ä¸­ï¼Œé˜³æLEDé€šè¿‡ä¸€ä¸ªé˜´æï¼ˆåˆ°ç«¯å­D11ï¼‰é€šè¿‡ä¸€ä¸ªé™æµç”µé˜»ï¼ˆè‡³å°‘220æ¬§å§†ï¼Œæœ€å¥½ä¸º500æ¬§å§†ï¼‰è¿æ¥åˆ°5Vã€‚ è¯¥æŒ‰é’®å…³é—­æ¥åœ°å’Œå¼•è„šD2ã€‚ ç”µä½è®¡æ”¹å˜å¼•è„šA1ä¸Šçš„ç”µåŠ¿ã€‚ <br><br> å¾®æ§åˆ¶å™¨çš„ä»»åŠ¡å¦‚ä¸‹ï¼šå¦‚æœæ¶ˆæ¯â€œ LED-Hâ€åˆ°è¾¾ä¸²è¡Œæ¥å£ï¼ˆä¸²è¡ŒCOMç«¯å£ï¼‰ï¼Œåˆ™ç‚¹äº®LEDã€‚ å¦‚æœå‡ºç°â€œ LED-Lâ€æ¶ˆæ¯ï¼Œè¯·ç†„ç­LEDã€‚ æ¯250æ¯«ç§’å‘ä¸²è¡Œç«¯å£ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‘è®¡ç®—æœºå±å¹•ï¼‰å‘é€ä¸€æ¡æ¶ˆæ¯â€œ Pot-â€ï¼ˆæ¶ˆæ¯-ï¼‰ä»¥åŠé€šè¿‡æ¨¡æ‹Ÿè¯»å–é’ˆè„šA1æ”¶åˆ°çš„ç¼–å·ã€‚ å½“æŒ‰ä¸‹æŒ‰é’®æ—¶ï¼Œå‘é€ä¸€æ¬¡æ¶ˆæ¯â€œæŒ‰ä¸‹æŒ‰é’®ï¼â€ã€‚ <br><br> è¿™æ˜¯æˆ‘å¯¹è§£å†³æ­¤é—®é¢˜çš„å»ºè®®ï¼ˆè€Œä¸æ˜¯ä»¥ä¸‹ç¤ºä¾‹ï¼‰ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">Arduino Unoçš„å›ºä»¶</b> <div class="spoiler_text"><pre> <code class="hljs lua"><code class="cpp">#define pinPot A1 #define pinLed <span class="hljs-number"><span class="hljs-number">11</span></span> #define pinBtn <span class="hljs-number"><span class="hljs-number">2</span></span> void setup() { pinMode(pinPot, INPUT); pinMode(pinLed, OUTPUT); pinMode(pinBtn, INPUT_PULLUP); Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>); Serial.println(<span class="hljs-string"><span class="hljs-string">"The program starts.\n\n"</span></span>); } void loop() { /* INITIAL VARIABLES. Segment <span class="hljs-number"><span class="hljs-number">1</span></span> */ static <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> potMes[] = <span class="hljs-string"><span class="hljs-string">"Pot - "</span></span>; static <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> btnMes[] = <span class="hljs-string"><span class="hljs-string">"Button is pressed!"</span></span>; static <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> passLight[] = <span class="hljs-string"><span class="hljs-string">"Led - "</span></span>; static int passLength = sizeof(passLight) - <span class="hljs-number"><span class="hljs-number">1</span></span>; static int sizepm = sizeof(potMes) - <span class="hljs-number"><span class="hljs-number">1</span></span>; static int sizebtn = sizeof(btnMes) - <span class="hljs-number"><span class="hljs-number">1</span></span>; static bool flagLedState = LOW; static bool flagBtnPress = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; static long int curTime = <span class="hljs-number"><span class="hljs-number">0</span></span>; static const int period = <span class="hljs-number"><span class="hljs-number">200</span></span>; static bool flagEnableRead = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; /* INITIAL VARIABLES. Segment <span class="hljs-number"><span class="hljs-number">1</span></span> */ /* FUNCTIONS CALL. Segment <span class="hljs-number"><span class="hljs-number">2</span></span> */ /* * Led is attached to HIGH voltage from one side * And to pin on the other side * By that the inverting logic */ ReadSerialForLed(passLight, passLength, &amp;flagLedState); digitalWrite(pinLed, !flagLedState); /* * Button pin always is pulled to the HIGH voltage * And only when button is pressed - Voltage on pin goes to GROUND * So it is need to invert logic when <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> pins */ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!Bounce(pinBtn) &amp;&amp; flagBtnPress == <span class="hljs-literal"><span class="hljs-literal">false</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(int i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; sizebtn; i++){ Serial.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(btnMes[i]); } Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>); flagBtnPress = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!flagEnableRead){ curTime = millis(); flagEnableRead = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Bounce(pinBtn)){ flagBtnPress = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } /* * Read <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> send Info <span class="hljs-string"><span class="hljs-string">"Pot - "</span></span> + var Only after first press on button * Every <span class="hljs-string"><span class="hljs-string">'period'</span></span>ms */ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(millis() - curTime &gt; period &amp;&amp; flagEnableRead){ SendData(pinPot, potMes, sizepm); curTime = millis(); } /* FUNCTIONS CALL. Segment <span class="hljs-number"><span class="hljs-number">2</span></span> */ } /* * Pot - pin with potentiometer * pMes - Array with message before Pot value * sp - size of potentiometer message */ void SendData(int Pot, <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>* pMes, int sp){ static int varP[<span class="hljs-number"><span class="hljs-number">2</span></span>]; varP[<span class="hljs-number"><span class="hljs-number">0</span></span>] = analogRead(Pot); varP[<span class="hljs-number"><span class="hljs-number">1</span></span>] = varP[<span class="hljs-number"><span class="hljs-number">0</span></span>]/<span class="hljs-number"><span class="hljs-number">256</span></span>; // <span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-number"><span class="hljs-number">256</span></span> - <span class="hljs-number"><span class="hljs-number">1024</span></span>) varP[<span class="hljs-number"><span class="hljs-number">0</span></span>] = varP[<span class="hljs-number"><span class="hljs-number">0</span></span>]%<span class="hljs-number"><span class="hljs-number">256</span></span>; // <span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">255</span></span> //Send Message <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(int i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; sp; i++){ Serial.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>(pMes[i])); } //Send <span class="hljs-number"><span class="hljs-number">2</span></span> bits of data //Serial.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(varP[<span class="hljs-number"><span class="hljs-number">0</span></span>]); //Serial.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(varP[<span class="hljs-number"><span class="hljs-number">1</span></span>]); Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(analogRead(Pot)); Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>); } /* * Function, which is reads button pin with the bounce */ bool Bounce(int btn){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(btn) == <span class="hljs-literal"><span class="hljs-literal">true</span></span>){ delay(<span class="hljs-number"><span class="hljs-number">15</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(btn) == <span class="hljs-literal"><span class="hljs-literal">true</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } /* * If Message from Serial port, which you <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> will be the same to passLight * So look at the <span class="hljs-built_in"><span class="hljs-built_in">next</span></span> symbol after Pass Message. If it is symbol <span class="hljs-string"><span class="hljs-string">'H'</span></span> - make LED to light * If it is <span class="hljs-string"><span class="hljs-string">'L'</span></span> - make LED off. */ void ReadSerialForLed(<span class="hljs-built_in"><span class="hljs-built_in">char</span></span> *passLight_f, int passLength_f, bool* flagLedState_f){ static <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> sym; static int cntPass = <span class="hljs-number"><span class="hljs-number">0</span></span>; static bool readyGetLed = LOW; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Serial.available() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { sym = Serial.<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sym == passLight_f[cntPass] &amp;&amp; !readyGetLed){ cntPass++; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!readyGetLed){ cntPass = <span class="hljs-number"><span class="hljs-number">0</span></span>; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(readyGetLed){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sym == <span class="hljs-string"><span class="hljs-string">'H'</span></span>){ *flagLedState_f = HIGH; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sym == <span class="hljs-string"><span class="hljs-string">'L'</span></span>){ *flagLedState_f = LOW; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cntPass == passLength_f){ readyGetLed = HIGH; } } }</code></code> </pre> </div></div><br>  <i>æ³¨é‡Šï¼šLEDé€šè¿‡é˜³æè¿æ¥åˆ°ç”µæºã€‚</i>  <i>è¿™ä¼šé¢ å€’LEDçš„çŠ¶æ€é€»è¾‘ï¼Œä¸å†æœ‰å¥½å¤„ã€‚</i>  <i>å‡ºäºç»æµåŸå› ï¼Œè¯¥æŒ‰é’®æ²¡æœ‰ä¸ä¸Šæ‹‰ç”µé˜»æ†ç»‘åœ¨ä¸€èµ·ï¼Œå› ä¸ºå½“å¼•è„šåˆå§‹åŒ–ä¸ºINPUT_PULLUPæ¨¡å¼æ—¶ï¼ŒArduino Unoå†…ç½®äº†ä¸Šæ‹‰ç”µé˜»ï¼Œç”µè·¯ä¸­åŒ…æ‹¬è¯¥ç”µé˜»ã€‚</i> <i><br></i>  <i>åŒæ ·åœ¨å›ºä»¶ä¸­ï¼Œä»…åœ¨ç¬¬ä¸€æ¬¡æŒ‰ä¸‹æŒ‰é’®åæ‰å‘é€æœ‰å…³ä»ç”µä½è®¡è·å–çš„å€¼çš„æ¶ˆæ¯ï¼</i> <br><br> è¦å°†å›ºä»¶å¡«å……åˆ°æ¿ä¸Šï¼Œè¯·ä¸è¦å¿˜è®°é€‰æ‹©ç«¯å£å’Œæ¿ã€‚ <br><br><img src="https://habrastorage.org/webt/tt/ow/bu/ttowbuw18xkgx2celq3d3yksvdk.jpeg"><br><br> å¦‚æœæ‚¨ä¸çŸ¥é“Arduinoå¼€å‘æ¿å…·æœ‰å“ªä¸ªCOMç«¯å£ï¼Œè¯·åœ¨Windowsä¸Šè½¬åˆ° <br> æ§åˆ¶é¢æ¿-&gt;è®¾å¤‡ç®¡ç†å™¨ï¼Œç„¶åå•å‡»â€œ COMç«¯å£â€é€‰é¡¹å¡ <br><br><img src="https://habrastorage.org/webt/im/ij/0b/imij0buxklsl9lolioy0z-_ozfm.jpeg"><br><br> å¦‚æœæ‚¨çš„COMç«¯å£æœªæ ‡è®°ä¸ºæˆ‘çš„ç«¯å£ï¼Œåˆ™å§‹ç»ˆå¯ä»¥æ–­å¼€Arduinoçš„è¿æ¥ï¼Œç„¶åæŸ¥çœ‹å“ªä¸ªç«¯å£æ¶ˆå¤±äº†ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰äººæ¶ˆå¤±å¹¶ä¸”Arduinæ ¹æœ¬æ— æ³•è¢«è®¡ç®—æœºè¯†åˆ«ï¼Œé‚£ä¹ˆè¯¥æ˜¯æ—¶å€™åœ¨Internetä¸Šå¯»æ‰¾è§£å†³æ–¹æ¡ˆäº†ã€‚ ä½†æ˜¯é¦–å…ˆè¦æ›´æ–°é©±åŠ¨ç¨‹åºæˆ–æ›´æ¢ç”µè·¯æ¿ã€‚ <br><br> ä¸€åˆ‡æ­£å¸¸åï¼Œå°è¯•æ‰“å¼€ç«¯å£ç›‘è§†å™¨ï¼Œç„¶åè¾“å…¥â€œ Led-Hâ€ï¼Œâ€œ Led-Lâ€ï¼ŒæŒ‰ä¸‹æŒ‰é’®ï¼Œè½¬åŠ¨ç”µä½è®¡ï¼Œç„¶åæŸ¥çœ‹å±å¹•ä»¥æŸ¥çœ‹æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºäº†æ‰€æœ‰å†…å®¹ã€‚ <br><br> ç©å¤Ÿäº†-ç¨å¾®æ›´æ”¹ä»£ç ã€‚ <br><br> ç”¨æ³¨é‡Šä¸­çš„ä»£ç æ›¿æ¢æœ€åä¸€è¡Œã€‚ <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//Send 2 bits of data //Serial.write(varP[0]); //Serial.write(varP[1]); Serial.print(analogRead(Pot));</span></span></code> </pre> <br> ç°åœ¨ï¼Œç”µä½è®¡ä¸­çš„å€¼çœ‹èµ·æ¥ä¸å¯è¯»ï¼Œä½†æ˜¯å¤„ç†ç¨‹åºéœ€è¦è¿›è¡Œè¿™æ ·çš„æ“ä½œã€‚ <br><br><h3> åŠ å·¥ä¸­ã€‚ æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªä¸å¾®æ§åˆ¶å™¨äº¤äº’çš„ç¨‹åº </h3><br> å¤„ç†ç¨‹åºä¸å¾®æ§åˆ¶å™¨ä¹‹é—´é€šä¿¡çš„æœ¬è´¨éå¸¸ç®€å•ã€‚ è¯¥ç¼–ç¨‹è¯­è¨€æœ‰ä¸€ä¸ªä¸²è¡Œåº“ï¼Œå®ƒå…è®¸æ‚¨æ¥æ”¶ä»¥<code>Serial.write();</code>å‘é€çš„æ¶ˆæ¯<code>Serial.write();</code>  ï¼Œè¿˜å…è®¸æ‚¨ä»¥<code>Serial.print();</code>å‘é€æ¶ˆæ¯<code>Serial.print();</code>  ã€‚ é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œå‘é€æ­¤ç±»æ¶ˆæ¯åï¼Œå®ƒå°†è¢«å†™å…¥ç«¯å£ç¼“å†²åŒºï¼Œè¿™æ„å‘³ç€å®ƒå°†è¢«å¾®æ§åˆ¶å™¨è¯»å–ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦è¿æ¥åˆ°æ‰€éœ€çš„ä¸²è¡Œç«¯å£å¹¶æ¥æ”¶/å‘å…¶å‘é€æ¶ˆæ¯å³å¯ã€‚ <br><br> ä»¥ä¸‹ç¨‹åºå°†è¿æ¥ä¸²è¡Œåº“ï¼Œå¹¶åœ¨ç¼–è¾‘å™¨æ§åˆ¶å°ä¸­ç¼–å†™å¯è¿æ¥çš„æ‰€æœ‰COMç«¯å£çš„åˆ—è¡¨ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> processing.serial.*; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String[] port = Serial.list(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; port.length; i++){ print(<span class="hljs-string"><span class="hljs-string">"Port number #"</span></span> + i + <span class="hljs-string"><span class="hljs-string">" "</span></span>); println(Serial.list()[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{}</code> </pre> <br> å½“æ‚¨å°†ä»£ç å†™å…¥ç¼–è¾‘å™¨å¹¶å•å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ˆå›¾ç‰‡ä¸­çš„ç®­å¤´1ï¼‰æ—¶ï¼Œå°†å‡ºç°åº”ç”¨ç¨‹åºçª—å£ï¼ˆ2ï¼‰ï¼Œå¹¶ä¸”COMç«¯å£åˆ—è¡¨å°†åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºï¼ˆ3ï¼‰ã€‚ <br><br><img src="https://habrastorage.org/webt/e9/v6/cx/e9v6cxk0zwyi_dxchv7nnc-fieo.jpeg"><br><br> æˆ‘åªæœ‰ä¸€ä¸ªè¿™æ ·çš„COMç«¯å£ï¼Œå¹¶ä¸”åœ¨å·¥ä½œè¡¨ä¸­ï¼ˆåœ¨é˜µåˆ—ä¸­ï¼‰å®ƒçš„ç¼–å·ä¸º0ã€‚å› æ­¤ï¼ŒSerialç±»çš„å¯¹è±¡æ˜¯ï¼š <code>Serial port;</code> åˆ›å»ºåï¼Œå°†æŒ‡å®šç«¯å£åˆ—è¡¨<code>port = new Serial(this, Serial.list()[0], 9600);</code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ <code>port = new Serial(this, Serial.list()[0], 9600);</code> <br><br> æ›´æ”¹åå€’å…¥Arduinæœ€æ–°å›ºä»¶ã€‚ ç„¶åç¼–å†™å¹¶è¿è¡Œè¯¥ç¨‹åºã€‚ å…¶ä¸­æ¯500æ¯«ç§’å°†ä¸€æ¡æ¶ˆæ¯å‘é€åˆ°COMç«¯å£ï¼Œä»¥ç†„ç­æˆ–ç‚¹äº®LEDã€‚ å¦‚æœä¸€åˆ‡æ“ä½œæ­£ç¡®ï¼Œåˆ™åœ¨å¯åŠ¨åº”ç”¨ç¨‹åºåï¼ŒLEDåº”å½“é—ªçƒã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> processing.serial.*; Serial port; <span class="hljs-comment"><span class="hljs-comment">// Create object from Serial class void setup(){ port = new Serial(this, Serial.list()[0], 9600); } void draw(){ delay(500); port.write("Led - H"); delay(500); port.write("Led - L"); }</span></span></code> </pre> <br> æˆ–è€…è¿™æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ ç”¨é¼ æ ‡æŒ‰é’®å•å‡»åº”ç”¨ç¨‹åºçª—å£ï¼ˆå°ºå¯¸ä¸º800x800pxï¼‰åï¼ŒLEDä¼šæ›´æ”¹å…¶çŠ¶æ€ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> processing.serial.*; Serial port; <span class="hljs-comment"><span class="hljs-comment">// Create object from Serial class int cnt = 0; void setup(){ size(800, 800); port = new Serial(this, Serial.list()[0], 9600); } void draw(){} void mousePressed() { cnt++; if(cnt % 2 == 1){ port.write("Led - H"); }else{ port.write("Led - L"); } }</span></span></code> </pre> <br><h3> åŠ å·¥ä¸­ã€‚ åŠŸèƒ½ä¸°å¯Œçš„åº”ç”¨ç¤ºä¾‹ </h3><br> å¦‚æœæ‚¨å¯ä»¥å°†å…¶ç§°ä¸ºâ€œå¤ªç©ºé£è¡Œâ€ï¼Œåˆ™è¯¥åŸºæœ¬åº”ç”¨ç¨‹åºå°†æ¨¡æ‹Ÿå®ƒã€‚ ç”µä½è®¡çš„å€¼æ”¹å˜é£è¡Œé€Ÿåº¦ï¼ŒæŒ‰ä¸‹æŒ‰é’®æ”¹å˜é£è¡Œæ–¹å‘ã€‚ è€Œä¸”ï¼Œåªè¦åœ¨åº”ç”¨ç¨‹åºçª—å£ä¸Šå•å‡»é¼ æ ‡æŒ‰é’®ï¼Œä¾¿ä¼šæ›´æ”¹LEDçš„çŠ¶æ€ï¼ˆæ˜¯çš„ï¼Œæˆ‘æ²¡æœ‰æå‡ºå…¶ä»–æ›´åŸå§‹çš„å†…å®¹ï¼‰ã€‚ <br><br> æˆ‘çš„ä»£ç è¿œéå®Œç¾ï¼Œè¯·ä¸è¦ä»¥å®ƒä¸ºä¾‹ã€‚ è¿™åªæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç¤ºä¾‹ã€‚ ä»–æ¥äº† <br><br><div class="spoiler">  <b class="spoiler_title">å¤šåŠŸèƒ½ç¨‹åºç¤ºä¾‹</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> processing.serial.*; Serial port; <span class="hljs-comment"><span class="hljs-comment">// Create object from Serial class int val; // Data received from the serial port (symbol) int pot; // Data from potentiometer String potMes = "Pot - "; String btnMes = "Button is pressed!"; int cntPM = 0; // Counter Potentiometer Message. // When it equals to length of Pot Mess - get value. int cntBM = 0; int cntBtnPress = 0; int cntMousePress = 0; Star[] stars = new Star[1000]; float speed; int dir = 1; void setup(){ size(800, 800); for(int i = 0; i &lt; stars.length; i++){ stars[i] = new Star(); } frameRate(60); // 60 Frames per second port = new Serial(this, Serial.list()[0], 9600); // Wait for first message from Arduino delay(2000); while (port.available() &gt; 0) { val = port.read(); print(char(val)); } } void draw(){ if (port.available() &gt; 0) { val = port.read(); cntPM = CheckSymbol(potMes, cntPM, char(val), cntPM); cntBM = CheckSymbol(btnMes, cntBM, char(val), cntBM); } DrawRain(pot, 0, 1023); } void DrawRain(int speed_f, int min, int max){ background(0); translate(width/2,height/2); speed = dir*map(speed_f, min, max, 0, 50); for(int i = 0; i &lt; stars.length; i++){ stars[i].go(); stars[i].update(); stars[i].show(); } } int CheckSymbol(String mes, int index, char sym, int ret_val){ if(mes.charAt(index) == sym &amp;&amp; ret_val &lt; (mes.length() - 1)){ return (ret_val + 1); }else if( ret_val == (mes.length() - 1) &amp;&amp; mes.equals(potMes) ){ if(port.available() &gt; 0){ pot = port.read(); // First 0-255 value } if(port.available() &gt; 0){ pot += 256*port.read(); // Last 2 bits 256 - 1024 } }else if( ret_val == (mes.length() - 1) &amp;&amp; mes.equals(btnMes) ){ cntBtnPress++; dir = -dir; } return 0; } void mousePressed() { cntMousePress++; if(cntMousePress % 2 == 1){ port.write("Led - H"); }else{ port.write("Led - L"); } }</span></span></code> </pre> </div></div><br><h3> ç»“è®º </h3><br> æˆ‘è®¤ä¸ºæœ‰å¿…è¦å†™<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™ç¯‡æ–‡ç« </a> ï¼Œæ˜¯æˆ‘ä»ä¸€ä½ç¨‹åºå‘˜<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Daniel Shiffman</a>é‚£é‡ŒæŒ‘é€‰äº†æœ€åä¸€ä¸ªç¨‹åºçš„æƒ³æ³•çš„ï¼Œä»–æ‹æ‘„çš„è§†é¢‘ç”šè‡³å¯¹äºå­©å­ä»¬æ¥è¯´éƒ½æ˜¯å…³äºå¤„ç†ç¼–ç¨‹çš„ç†è§£ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è§£å†³äº†140å¤šä¸ªè§†è§‰ä»»åŠ¡</a> ï¼‰ã€‚ <br><br> å½“æˆ‘è¯•å›¾å¼„æ¸…æ¥šè‡ªå·±å¦‚ä½•è¿›è¡Œå¤„ç†å’ŒArduinoé€šä¿¡æ—¶ï¼Œè¿™äº›ç«™ç‚¹ç¡®å®ä¸ºæˆ‘æä¾›äº†å¸®åŠ©ï¼š <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">developer.alexanderklimov.ru/arduino/processing.php</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">arduino-diy.com/arduino-processing-osnovi</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN450518/">https://habr.com/ru/post/zh-CN450518/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN450506/index.html">å¦‚ä½•åœ¨å‡ ä¸ªå°æ—¶å†…ä»ç½‘ç«™åˆ¶ä½œåº”ç”¨ç¨‹åºå¹¶å°†å…¶æ”¾ç½®åœ¨Google Playä¸Šã€‚ ç¬¬2/2éƒ¨åˆ†ï¼šå—ä¿¡ä»»çš„Webæ´»åŠ¨</a></li>
<li><a href="../zh-CN450508/index.html">Joe Armstrongå…³äºElixirï¼ŒErlangï¼ŒFPå’ŒOOP</a></li>
<li><a href="../zh-CN450510/index.html">é«˜è´Ÿè½½ITç³»ç»Ÿçš„æ“ä½œå’Œæ”¯æŒè¿‡ç¨‹ä¸­çš„äº”ä¸ªé—®é¢˜</a></li>
<li><a href="../zh-CN450514/index.html">CVT vsçŠ¶æ€</a></li>
<li><a href="../zh-CN450516/index.html">åˆæ ¼çš„MacOSç­¾å</a></li>
<li><a href="../zh-CN450520/index.html">åˆ›å»ºå¯é ä¸”ç»è¿‡éªŒè¯çš„AIï¼šç¬¦åˆè§„èŒƒï¼Œå¯é çš„åŸ¹è®­å’Œå½¢å¼éªŒè¯</a></li>
<li><a href="../zh-CN450522/index.html">äº’è”ç½‘å†å²è®°å½•ï¼šè¡°å˜ï¼Œç¬¬1éƒ¨åˆ†</a></li>
<li><a href="../zh-CN450524/index.html">é€šè¿‡ç”µæŠ¥è¿›è¡Œè®¡ç®—æœºæ§åˆ¶</a></li>
<li><a href="../zh-CN450526/index.html">10. Check Pointå…¥é—¨R80.20ã€‚ èº«ä»½æ„è¯†</a></li>
<li><a href="../zh-CN450528/index.html">å¯¹è”æ¥çš„ç†è§£è¢«æ‰“ç ´äº†ã€‚ å¾…ç»­ã€‚ å°è¯•æ›¿ä»£å¯è§†åŒ–</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>