<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë§ üññüèæ ‚öñÔ∏è Atteindre les √©toiles: ma√Ætriser les op√©rateurs Ansible pour g√©rer les applications dans Kubernetes ‚öîÔ∏è üë©üèΩ‚Äçü§ù‚Äçüë®üèº üë©üèæ‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous verrons comment utiliser les r√¥les publi√©s dans Ansible Galaxy en tant qu'op√©rateurs qui g√®rent les applications dans Kubernetes, et voyons comme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Atteindre les √©toiles: ma√Ætriser les op√©rateurs Ansible pour g√©rer les applications dans Kubernetes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/440188/">  Nous verrons comment utiliser les r√¥les publi√©s dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ansible Galaxy en</a> tant qu'op√©rateurs qui g√®rent les applications dans Kubernetes, et voyons comment cr√©er un op√©rateur qui installe simplement l'application et ajuste de mani√®re flexible son comportement en fonction de l'environnement. <br><br><img src="https://habrastorage.org/webt/kk/7j/6q/kk7j6qx0eteemrqiug7iyohofli.jpeg" width="100%"><br><br>  Nous utiliserons <a href="">Ansible Operator</a> et le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">module k8s</a> pour montrer comment utiliser Ansible pour cr√©er des applications Kubernetes. <br><a name="habracut"></a><br>  Ansible Operator fait partie du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SDK Operator</a> et vous permet de formuler les r√®gles de fonctionnement de l'application (comment elle doit √™tre install√©e et maintenue) dans la langue des r√¥les et playbooks Ansible.  Le module k8s, √† son tour, √©tend la capacit√© de g√©rer des objets dans Kubernetes lors de la cr√©ation de tels r√¥les et playbooks. <br><br>  Un op√©rateur est cr√©√© comme √ßa juste comme √ßa. <br><br><pre><code class="plaintext hljs">FROM quay.io/operator-framework/ansible-operator RUN ansible-galaxy install djzager.hello_world_k8s RUN echo $'--- \n\ - version: v1alpha1\n\ group: examples.djzager.io\n\ kind: HelloWorld\n\ role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml</code> </pre> <br><h3>  Touche de d√©marrage </h3><br>  Tout d'abord, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">quelques</a> mots sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le module Ansible k8s</a> .  Il est apparu dans Ansible 2.6 et √©tend les possibilit√©s de travail avec les objets Kubernetes d'Ansible, et dans toutes les distributions Kubernetes, y compris Red Hat OpenShift.  Le blog Ansible avait un article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©par√©</a> sur ce module et le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">client Python dynamique pour Red Hat OpenShift</a> .  √Ä notre avis, travailler avec des objets Kubernetes via Ansible sans utiliser le module k8s est faux.  Le m√©canisme d'op√©rateur a √©t√© cr√©√© √† l'origine pour ex√©cuter des applications dans Kubernetes, et le SDK op√©rateur fournit des outils pour assembler, tester et conditionner les op√©rateurs.  √Ä son tour, Ansible Operator est n√©cessaire pour d√©finir les r√®gles de fonctionnement de l'application en langage Ansible.  Le flux de travail correspondant est organis√© tout simplement: d'abord, nous faisons operator-sdk new --type = Ansible pour g√©n√©rer les fichiers n√©cessaires pour l'op√©rateur Ansible, puis nous peignons Ansible, et enfin nous faisons operator-sdk build pour construire l'application pour travailler dans Kubernetes.  Mais si nous avons d√©j√† un r√¥le dans Ansible Galaxy, qui contr√¥le l'application dans Kubernetes, les choses deviennent encore plus faciles.  Ci-dessous, nous ferons ce qui suit: <br><br><ol><li>  Construisons un r√¥le Ansible pour g√©rer l'application Hello World dans Kubernetes, ce qui nous aidera √† d√©montrer les capacit√©s du module Ansible k8s. </li><li>  Nous publierons ce r√¥le dans Ansible Galaxy. </li></ol><br>  Assemblons donc l'op√©rateur Ansible en utilisant le r√¥le publi√© dans Ansible Galaxy.  Pourquoi m√™me cr√©er un op√©rateur en utilisant un r√¥le d'Ansible Galaxy?  Il y a deux raisons: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Afin de ne pas r√©p√©ter</a> .  Si nous avons d√©j√† programm√© le r√¥le Ansible pour g√©rer l'application Hello World et l'avons publi√© dans Ansible Galaxy, il est logique de l'utiliser lors de la cr√©ation de l'op√©rateur Ansible. </li><li>  En raison de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©paration des responsabilit√©s</a> .  Nous voulons que le r√¥le Hello World Ansible g√®re l'application du m√™me nom dans Kubernetes et que la logique op√©rationnelle (op√©rationnelle) reste √† l'int√©rieur de l'op√©rateur.  Dans notre exemple, la logique op√©rationnelle est extr√™mement simple: elle appelle simplement le r√¥le djzager.hello_world_k8s chaque fois que vous cr√©ez ou modifiez une ressource HelloWorld personnalis√©e.  Cependant, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√† l'avenir,</a> cette s√©paration deviendra plus importante, par exemple, nous ajouterons la validation √† l'application Hello World via le r√¥le Ansible, et nous mettrons en ≈ìuvre le contr√¥le de l'√©tat des ressources personnalis√©es HelloWorld via la logique de l'op√©rateur. </li></ol><br><h3>  Bonjour Kubernetes, rencontrez Ansible </h3><br><h4>  De quoi avons-nous besoin </h4><br><ol><li>  Ansible - consultez le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">guide d'installation</a> si vous n'avez pas install√© Ansible. </li><li>  Client Python pour OpenShift (facultatif).  Uniquement n√©cessaire pour le lancement local.  Les instructions d'installation sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </li></ol><br>  Commen√ßons.  Tout d'abord, cr√©ez un squelette de r√¥le en utilisant la galaxie ansible: <br><br><pre> <code class="plaintext hljs"># I like clear names on projects. # In meta/main.yml I will make role_name: hello-world-k8s $ ansible-galaxy init ansible-role-hello-world-k8s</code> </pre><br>  Imm√©diatement apr√®s la cr√©ation d'un nouveau r√¥le Ansible, nous allons d√©finir toutes les valeurs par d√©faut pour documenter en m√™me temps ses param√®tres de configuration valides.  De plus, notre exemple Hello World n'est pas particuli√®rement compliqu√© √† cet √©gard.  Voici √† quoi ressemble notre fichier defaults / main.yml: <br><br><pre> <code class="plaintext hljs">--- # NOTE: meta.name(space) comes from CR metadata when run with Ansible Operator # deploy/crds has an example CR for reference name: "{{ meta.name | default('hello-world') }}" namespace: "{{ meta.namespace | default('hello-world') }}" image: docker.io/ansibleplaybookbundle/hello-world:latest # To uninstall from the cluster # state: absent state: present # The size of the hello-world deployment size: 1</code> </pre><br>  Apr√®s avoir d√©fini des valeurs par d√©faut, il est n√©cessaire de d√©cider ce que le r√¥le fera.  L'application Hello World devra faire ce qui suit: <br><br><ol><li>  Obtenez des informations sur les API disponibles dans le cluster. </li><li>  Cr√©ez plusieurs mod√®les et assurez-vous qu'ils sont pr√©sents ou absents dans le cluster. </li></ol><br>  Par cons√©quent, notre fichier t√¢ches / main.yml ressemble √† ceci: <br><br><pre> <code class="plaintext hljs">--- - name: "Get information about the cluster" set_fact: api_groups: "{{ lookup('k8s', cluster_info='api_groups') }}" - name: 'Set hello-world objects state={{ state }}' k8s: state: '{{ state }}' definition: "{{ lookup('template', item.name) | from_yaml }}" when: item.api_exists | default(True) loop: - name: deployment.yml.j2 - name: service.yml.j2 - name: route.yml.j2 api_exists: "{{ True if 'route.openshift.io' in api_groups else False }}"</code> </pre><br>  Avant de passer aux mod√®les, faites attention √† cette ligne dans le fichier de t√¢ches: <br><br><pre> <code class="plaintext hljs">api_exists: "{{ True if 'route.openshift.io' in api_groups else False }}"</code> </pre><br>  En utilisant set_fact, nous obtenons une liste de toutes les API disponibles dans le cluster afin que nous puissions g√©n√©rer de mani√®re s√©lective des mod√®les selon que l'API est pr√©sente - dans ce cas, route.openshift.io.  Par d√©faut, dans le cluster Kubernetes d'OpenShift, les routes ne sont pas disponibles et nous n'en avons pas besoin, nous ne travaillons donc avec l'objet Route que lorsqu'il y a route.openshift.io dans le cluster. <br><br>  Nous pouvons non seulement g√©rer de mani√®re s√©lective les objets du cluster en fonction de la disponibilit√© de certaines API, mais √©galement utiliser les mod√®les Jinja2 pour utiliser OpenShift DeploymentConfig dans notre mod√®le de d√©ploiement si le cluster a l'API apps.openshift.io.  Voici √† quoi ressemble notre fichier templates / deployment.yml.j2: <br><br><pre> <code class="plaintext hljs">--- {% if 'apps.openshift.io' in api_groups %} apiVersion: apps.openshift.io/v1 kind: DeploymentConfig {% else %} apiVersion: apps/v1 kind: Deployment {% endif %} metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: replicas: {{ size }} {% if 'apps.openshift.io' in api_groups %} selector: app: {{ name }} service: {{ name }} {% else %} selector: matchLabels: app: {{ name }} service: {{ name }} {% endif %} template: metadata: labels: app: {{ name }} service: {{ name }} spec: containers: - image: {{ image }} name: hello-world ports: - containerPort: 8080 protocol: TCP</code> </pre><br>  Mod√®les de fichiers / service.yml.j2: <br><br><pre> <code class="plaintext hljs">--- apiVersion: v1 kind: Service metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: ports: - name: web port: 8080 protocol: TCP targetPort: 8080 selector: app: {{ name }} service: {{ name }}</code> </pre><br>  Et enfin, le fichier templates / route.yml.j2: <br><br><pre> <code class="plaintext hljs">--- apiVersion: route.openshift.io/v1 kind: Route metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: port: targetPort: web to: kind: Service name: {{ name }}</code> </pre><br>  Nous avons omis le fichier meta / main.yml, mais il se trouve <a href="">ici</a> . <br><br>  Par cons√©quent, nous avons le r√¥le Ansible de gestion de l'application Hello World dans Kubernetes et nous pouvons utiliser les API disponibles dans le cluster.  En d'autres termes, le module k8s et le client dynamique simplifient l'utilisation des objets dans Kubernetes.  Nous esp√©rons qu'avec l'exemple de ce r√¥le, nous avons pu montrer le potentiel d'Ansible en travaillant avec Kubernetes. <br><br><h3>  Bonjour Galaxy, rencontrez Kubernetes </h3><br>  Ansible Galaxy a une tonne de r√¥les pour configurer les serveurs et g√©rer les applications, mais il n'y a pas tellement de r√¥les pour g√©rer les applications Kubernetes, nous ferons donc une petite contribution. <br><br>  Apr√®s avoir post√© notre r√¥le sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> , il ne restait plus que: <br><br><ol><li>  Connectez-vous √† Ansible Galaxy pour donner acc√®s √† nos r√©f√©rentiels sur GitHub. </li><li>  Importez notre r√¥le. </li></ol><br>  Voil√†, maintenant notre r√¥le hello_world_k8s est accessible au public dans Ansible Galaxy, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h3>  Bonjour op√©rateur Ansible, Rencontrez Galaxy </h3><br>  Si vous √©tudiez attentivement notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet Hello World sur GitHub</a> , vous remarquerez que nous y avons ajout√© plusieurs choses qui sont n√©cessaires pour cr√©er un op√©rateur Ansible, √† savoir: <br><br><ol><li>  <a href="">Un fichier Watches</a> qui mappe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les ressources personnalis√©es</a> Kubernetes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">aux</a> r√¥les ou playbooks Ansible. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dockerfile</a> pour construire notre op√©rateur. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©ployer le r√©pertoire</a> avec les objets Kubernetes n√©cessaires pour ex√©cuter notre op√©rateur. </li></ol><br>  Si vous devez en savoir plus sur la cr√©ation de vos propres instructions Ansible, utilisez le <a href="">Guide de</a> l' <a href="">utilisateur</a> .  Mais puisque nous avons promis de construire un op√©rateur Ansible en utilisant le r√¥le publi√© dans Ansible Galaxy, tout ce dont nous avons <b>vraiment</b> besoin est un Dockerfile: <br><br><pre> <code class="plaintext hljs">FROM quay.io/operator-framework/ansible-operator RUN ansible-galaxy install djzager.hello_world_k8s RUN echo $'--- \n\ - version: v1alpha1\n\ group: examples.djzager.io\n\ kind: HelloWorld\n\ role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml</code> </pre><br>  Maintenant, nous collectons l'op√©rateur: <br><br><pre> <code class="plaintext hljs">$ docker build -t hello-world-operator -f Dockerfile . Sending build context to Docker daemon 157.2 kB Step 1/3 : FROM quay.io/operator-framework/ansible-operator latest: Pulling from operator-framework/ansible-operator Digest: sha256:1156066a05fb1e1dd5d4286085518e5ce15acabfff10a8145eef8da088475db3 Status: Downloaded newer image for quay.io/water-hole/ansible-operator:latest ---&gt; 39cc1d19649d Step 2/3 : RUN ansible-galaxy install djzager.hello_world_k8s ---&gt; Running in 83ba8c21f233 - downloading role 'hello_world_k8s', owned by djzager - downloading role from https://github.com/djzager/ansible-role-hello-world-k8s/archive/master.tar.gz - extracting djzager.hello_world_k8s to /opt/ansible/roles/djzager.hello_world_k8s - djzager.hello_world_k8s (master) was installed successfully Removing intermediate container 83ba8c21f233 ---&gt; 2f303b45576c Step 3/3 : RUN echo $'--- \n- version: v1alpha1\n group: examples.djzager.io\n kind: HelloWorld\n role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml ---&gt; Running in cced495a9cb4 Removing intermediate container cced495a9cb4 ---&gt; 5827bc3c1ca3 Successfully built 5827bc3c1ca3 Successfully tagged hello-world-operator:latest</code> </pre><br>  Il est clair que pour <b>utiliser</b> cet op√©rateur, vous avez besoin du contenu du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©pertoire</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©ploiement</a> de notre projet pour cr√©er un compte de service, un r√¥le et une liaison de r√¥le, une d√©finition de ressource personnalis√©e, ainsi que pour d√©ployer l'op√©rateur lui-m√™me.  Et apr√®s avoir d√©ploy√© l'op√©rateur, vous devrez cr√©er une ressource personnalis√©e pour obtenir une instance de l'application Hello World: <br><br><pre> <code class="plaintext hljs">apiVersion: examples.djzager.io/v1alpha1 kind: HelloWorld metadata: name: example-helloworld namespace: default spec: size: 3</code> </pre><br><h3>  √âtendues d'op√©rateur: espace de noms et cluster </h3><br>  Un peu plus haut, nous avons d√©j√† sugg√©r√© d'explorer notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©pertoire de d√©ploiement</a> et d'y rechercher les objets Kubernetes n√©cessaires pour lancer l'op√©rateur.  Trois √©l√©ments limitent la port√©e de l'op√©rateur lors de la gestion des ressources personnalis√©es avec l'espace de noms dans lequel l'op√©rateur lui-m√™me est d√©ploy√©, √† savoir: <br><br><ol><li>  La variable d'environnement WATCH_NAMESPACE dans le fichier <a href="">operator.yaml</a> qui indique √† l'op√©rateur o√π rechercher les ressources personnalis√©es </li><li>  <a href="">role.yaml</a> </li><li>  <a href="">liaison_r√¥le</a> </li></ol><br>  Cette limitation est certainement utile dans le d√©veloppement des op√©rateurs.  Mais si nous voulons que notre application soit accessible √† tous les utilisateurs du cluster, nous aurons besoin de l'aide d'un administrateur.  Je devrais faire ce qui suit: <br><br><ol><li>  Cr√©ez ClusterRole au lieu de Role. </li><li>  Cr√©ez une instruction ServiceAccount dans l'espace de noms o√π l'instruction sera d√©ploy√©e. </li><li>  Cr√©ez un ClusterRoleBinding qui associera un ServiceAccount d'un espace de noms particulier √† un ClusterRole. </li><li>  D√©veloppez l'instruction avec une variable d'environnement WATCH_NAMESPACE non d√©finie (par exemple, ""). </li></ol><br>  Si vous effectuez toutes ces op√©rations, les autres utilisateurs du cluster pourront d√©ployer des instances de notre application Hello World.  Si vous √™tes int√©ress√© par cette rubrique, nous vous recommandons d'√©tudier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Operator Lifecycle Manager</a> (qui fait partie de Operator Framework). <br><br><h3>  Star trek </h3><br>  Nous avons montr√© comment cr√©er un r√¥le Ansible pour contr√¥ler une application dans Kubernetes, publier ce r√¥le dans Ansible Galaxy et l'utiliser dans l'op√©rateur Ansible.  Nous vous souhaitons maintenant: <br><br><ol><li>  Vous utiliserez le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">module Ansible k8s</a> . </li><li>  Commencez √† publier vos r√¥les pour g√©rer les applications Kubernetes sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ansible Galaxy</a> . </li><li>  Int√©ressez-vous au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SDK Operator</a> et abonnez-vous √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notre newsletter Operator Framework</a> . </li></ol><br>  Notre application Hello World est intentionnellement rendue extr√™mement simple, mais il y a des choses qui peuvent aider √† la rendre encore plus fiable, et en voici quelques-unes: <br><br><ol><li>  Utilisation du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SDK op√©rateur</a> - nous n'avons intentionnellement pas fait cela dans notre exemple pour souligner la facilit√© avec laquelle il est possible de passer du r√¥le Ansible √† l'op√©rateur.  Mais il est pr√©f√©rable de continuer √† utiliser ce r√¥le avec le SDK (c'est-√†-dire, operator-sdk new), de plus, vous en aurez peut-√™tre besoin dans les √©tapes suivantes. </li><li>  Validation - dans notre version actuelle, l'utilisateur peut cr√©er un CR avec la taille: abc, ce qui entra√Ænera in√©vitablement une erreur au stade du d√©ploiement.  Il est donc pr√©f√©rable de d√©tecter les erreurs au stade de la sp√©cification, et non apr√®s le d√©but du travail. </li><li>  Cycle de vie - dans des exemples plus complexes, il peut s'agir de la m√™me mise √† jour de version.  Dans des sc√©narios comme le n√¥tre, o√π il n'y a qu'une seule version de l'application Hello World, nous pourrions d√©terminer si l'image d'un conteneur de travail est obsol√®te en la comparant aux images disponibles dans le registre de conteneurs correspondant et mettre √† jour les instances en cours d'ex√©cution si n√©cessaire. </li><li>  Test - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Molecule est</a> tr√®s utile lors du d√©veloppement et du test des r√¥les Ansible. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Operator Lifecycle Manager</a> est une bo√Æte √† outils pour la gestion des op√©rateurs.  L'int√©gration avec elle aidera √† installer et √† mettre √† jour notre op√©rateur. </li><li>  Statut - nous pourrions activer la sous-ressource de statut dans notre Hello World CRD et utiliser le module k8s_status, qui fait partie de l'image de l'op√©rateur Ansible, pour inclure des informations de statut dans la ressource personnalis√©e. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440188/">https://habr.com/ru/post/fr440188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440176/index.html">Sept tendances de cybers√©curit√© pour 2019</a></li>
<li><a href="../fr440178/index.html">Suppression de la r√©cursivit√© en Python</a></li>
<li><a href="../fr440180/index.html">Concours de programmation Q #: Concours de codage Microsoft Q #</a></li>
<li><a href="../fr440182/index.html">IBM Watson Studio - Une plate-forme de d√©veloppement d'applications AI bas√©e sur le cloud</a></li>
<li><a href="../fr440184/index.html">Pourquoi nous utilisons GraphQL dans 8base</a></li>
<li><a href="../fr440190/index.html">Connaissance du r√©seau neuronal le plus simple et de sa mise en ≈ìuvre pas √† pas</a></li>
<li><a href="../fr440192/index.html">Comment cr√©ons-nous la radio d'entreprise pour</a></li>
<li><a href="../fr440196/index.html">Secrets d'esprit et math√©matiques</a></li>
<li><a href="../fr440198/index.html">Nouvelles imprimantes 3D DWS pour les professionnels</a></li>
<li><a href="../fr440200/index.html">Parlons de la journalisation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>