<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëæ üèâ üë©üèæ‚Äç‚úàÔ∏è Acerca de conectarse y trabajar con pantallas OLED de texto Winstar üõí ü•Ä üßñüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las pantallas de l√≠nea (o texto) est√°n destinadas a la entrega de informaci√≥n de texto en forma de l√≠neas. Son de varios tipos (principalmente LCD o O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Acerca de conectarse y trabajar con pantallas OLED de texto Winstar</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400833/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las pantallas de l√≠nea (o texto) est√°n destinadas a la entrega de informaci√≥n de texto en forma de l√≠neas. </font><font style="vertical-align: inherit;">Son de varios tipos (principalmente LCD o OLED autoluminoso), y generalmente en su marcado hay n√∫meros 1202, 1602, 1204 o similares, que indican el n√∫mero de l√≠neas (en los ejemplos 2 o 4) y caracteres en cada l√≠nea (12 y 16) . </font><font style="vertical-align: inherit;">Hay pantallas de una sola l√≠nea de este tipo, pero en la siguiente presentaci√≥n nos centramos en las pantallas de dos l√≠neas m√°s utilizadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La mayor√≠a de estas pantallas son compatibles con el controlador HD44780 (Hitachi). Winstar produce las pantallas m√°s populares (al menos en nuestro pa√≠s) de esta variedad. Adem√°s, las variedades LCD (el nombre comienza con las letras WH, por ejemplo, WH1602) son compatibles uno a uno con el sistema de comando HD44780, y los tipos OLED (el nombre comienza con WEH, por ejemplo, WEH001602) tienen un controlador WS0010 mejorado. Desafortunadamente, o afortunadamente, trataremos ahora.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferencia de las </font><font style="vertical-align: inherit;">pantallas gr√°ficas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que examinamos anteriormente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> basadas en el controlador ks0108, el generador de caracteres en las pantallas en min√∫sculas est√° incorporado. </font><font style="vertical-align: inherit;">Adem√°s, para nosotros, la principal diferencia entre el WS0010 y el HD44780 est√°ndar es la presencia de varias (cuatro) tablas de c√≥digos para mostrar texto multiling√ºe. </font><font style="vertical-align: inherit;">El HD44780 solo tiene una de esas mesas, raz√≥n por la cual las empresas tienen que vender un tipo de pantalla por separado en cada regi√≥n. </font><font style="vertical-align: inherit;">Las pantallas OLED basadas en WS0010 no requieren desgloses regionales, lo cual es mucho m√°s conveniente. </font><font style="vertical-align: inherit;">Pero no para el usuario: de forma predeterminada, la tabla ENGLISH_JAPANESE est√° activada en las pantallas WEH, y para habilitar los caracteres rusos, debe cambiarla a ENGLISH_RUSSIAN.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtenga m√°s informaci√≥n sobre la tabla ENGLISH_RUSSIAN.</font></font></b><div class="spoiler_text">     :    (.    )     ,     .      ,    ,   ‚Äî -   -8,          (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> 19768-93</a>).       -, , ,     EBCDIC,       ,     ( 127 )    ASCII.    ,  ,    ,    ASCII      .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La biblioteca est√°ndar de LiquidCrystal (suministrada con el IDE de Arduino), por supuesto, no sabe nada sobre las cuatro tablas y, por lo tanto, requiere enderezarse, al menos a este respecto. </font><font style="vertical-align: inherit;">Pero no solo: al final, ser√≠a posible hacerlo con el idioma ingl√©s. </font><font style="vertical-align: inherit;">Sin embargo, el procedimiento de inicializaci√≥n es notablemente diferente para el WS0010, y si no se corrige, la pantalla lo mostrar√° cada vez que se inicie.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otras caracter√≠sticas</font></font></b><div class="spoiler_text"> ,  OLED- Winstar   ,       ( ,    ).  ,   ,     . ,  ,     WEH   SPI (, ¬´ SPI¬ª),    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>,   ,      (  3) ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>.           :         ,         .       ,       I2C    (. ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a>).<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por alguna raz√≥n, las pantallas Winstar tienen un gran d√©ficit en t√©rminos de documentaci√≥n inteligible (como habr√°s notado, esto generalmente es un rasgo caracter√≠stico de los productos chinos). </font><font style="vertical-align: inherit;">Vale la pena se√±alar d√≥nde puede descargar documentaci√≥n m√°s o menos completa sin ning√∫n error: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠ en la pantalla LCD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WH1602) con un controlador HD44780, aqu√≠ en las </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pantallas OLED</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WEH1602), aqu√≠ en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlador WS0010 por separado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (nos referiremos a √©l m√°s adelante) . </font><font style="vertical-align: inherit;">Y aqu√≠, si est√° interesado, hay una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descripci√≥n detallada del controlador HD44780</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en ruso.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nivelaci√≥n de la biblioteca LiquidCrystal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para controlar las pantallas en min√∫sculas en el HD44780 y sus an√°logos, la biblioteca LiquidCrystal est√°ndar, que tradicionalmente se incluye en el IDE de Arduino de todas las versiones, es bastante adecuada. Para mostrar el texto en ruso, existe su versi√≥n de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que sorprendentemente funciona bien en todas las versiones modernas del IDE Arduino (dice que el autor se acerc√≥ correctamente a la conversi√≥n de caracteres UTF-8). Pero para adaptarse a las pantallas OLED en el controlador WS0010, a√∫n necesita hacer correcciones. En el futuro, nos burlaremos de esta biblioteca y, por lo tanto, la cambiaremos de nombre LiquidCrystalRus_OLED, para no confundirla con la habitual. Para simplificar la tarea, no cambiaremos el nombre de las funciones, porque la inicializaci√≥n ser√° la misma que para el LiquidCrystalRus original. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los cambios son los siguientes: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Desde</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la tabla ruso-ingl√©s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en WS0010 (vea la p√°gina 9 para la hoja de datos en WS0010 usando el enlace de arriba) es el n√∫mero 2, luego para cambiarla necesita establecer los dos bits menos significativos FT1 y FT0 en el comando FUNCTION SET para configurarlo en el estado 10 (0x02). (En los LCD con una tabla de c√≥digos, estos bits, por cierto, no se utilizan en absoluto). Para hacer esto, en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><i><font style="vertical-align: inherit;">busque el</font></i><font style="vertical-align: inherit;"> lugar (l√≠nea 96 del archivo) donde se establece el valor de la variable </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_displayfunction</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En ambas l√≠neas de su inicializaci√≥n (l√≠neas 97 y 99) agregue un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anexo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><i><font style="vertical-align: inherit;">| = 0x02</font></i><font style="vertical-align: inherit;"> ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. A continuaci√≥n, debe corregir el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retraso de inicializaci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> despu√©s de encender la alimentaci√≥n. Para HD44780, no debe superar los 40 ms (consulte la documentaci√≥n en los enlaces anteriores). La biblioteca usa la funci√≥n para esto.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delayMicroseconds (50000)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (l√≠nea 120 del archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Para el controlador WS0010, debe tener un retraso diez veces m√°s largo, al menos 500 ms (consulte la √∫ltima p√°gina de la hoja de datos en el enlace anterior). Este requisito est√° tan cuidadosamente oculto (los archivos con la documentaci√≥n en ingl√©s en Winstar muestra "perdi√≥ la fuente" precisamente en esta parte), que parece que pocas personas lo han pensado hasta ahora. Por lo tanto, reemplazamos esta l√≠nea con 32 repeticiones de retraso de 16 ms cada una:</font></font><br>
<br>
<pre><code class="hljs matlab"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (int <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> &lt;=<span class="hljs-number"><span class="hljs-number">31</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>++) delayMicroseconds(<span class="hljs-number"><span class="hljs-number">16000</span></span>);</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Adem√°s de esto (consulte tambi√©n esta √∫ltima p√°gina de la hoja de datos), despu√©s de este retraso, al encender cuatro hilos, debe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enviar un comando vac√≠o cinco veces seguidas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (0x00). Dado que el Arduino es significativamente m√°s r√°pido que el controlador de pantalla, los comandos deben darse con un retraso intermedio. Deben insertarse un poco m√°s en el texto de la funci√≥n de inicio, donde se trata espec√≠ficamente de la inclusi√≥n de 4 bits (l√≠nea 147 del archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Pero este no es el final. La tabla original de ENGLISH_RUSSIAN tiene un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">icono de grado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c√≥digo 0xEF). La opci√≥n se ejecuta gr√°ficamente de manera extremadamente infructuosa (demasiado grande), por lo que prefiero usar un punto superior en negrita (c√≥digo 0xDF), es mucho m√°s parecido a un grado en el estilo habitual. Podr√≠a ingresarse en forma de c√≥digo (mejor que el octal "\ 337"), pero el problema es que, tratando de simplificar la funci√≥n de reemplazar c√≥digos de letras rusas con c√≥digos en la tabla del generador de caracteres, el autor de la biblioteca, basado en la codificaci√≥n UTF-8 (ver el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), introdujo una condici√≥n de reemplazo para cualquier c√≥digo mayor que 0x80 ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus ::</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funci√≥n de </font><i><font style="vertical-align: inherit;">escritura</font></i><font style="vertical-align: inherit;"> ). Como nuestro 0xDF es claramente mayor que 0x80, cuando especifique el car√°cter "\ 337" en la l√≠nea de c√≥digo, se mostrar√° un espacio vac√≠o, ya que no corresponde a ninguna letra rusa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, la funci√≥n est√°ndar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">createChar ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando intent√© usarlo para crear mi propio √≠cono de grado, entr√© en la pantalla con un estupor completo, del cual solo pod√≠a eliminarlo volviendo a cargar el programa. De lo que tengo que ocuparme adicionalmente y estar√© agradecido si alguien me cuenta cu√°l es el problema. Por lo tanto, el generador de caracteres no se puede editar en nuestras capacidades, pero podemos excluir el car√°cter 0xDF que necesitamos de la condici√≥n. Para hacer esto, reemplace la </font><font style="vertical-align: inherit;">condici√≥n </font><font style="vertical-align: inherit;">existente (vea el texto de la funci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escritura</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) con lo siguiente:</font></font><br>
<br>
<pre><code class="hljs lisp">if ((<span class="hljs-name"><span class="hljs-name">value&gt;=0x80</span></span>)<span class="hljs-symbol"><span class="hljs-symbol">&amp;&amp;</span></span>(<span class="hljs-name"><span class="hljs-name">value!=0xdf</span></span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Finalmente, el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cero tachado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en esta pantalla no es tan sorprendente como en las pantallas LCD gr√°ficas. </font><font style="vertical-align: inherit;">Sin embargo, en la misma funci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escritura</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">introduje el reemplazo del c√≥digo cero (0x30) con el c√≥digo de la letra "O" (0x4f). </font><font style="vertical-align: inherit;">Aquellos que lo deseen pueden devolver el cero tachado simplemente borrando o comentando la l√≠nea de reemplazo (l√≠nea 308 del archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> modificado </font><font style="vertical-align: inherit;">). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La biblioteca actualizada se puede descargar desde el enlace al final del art√≠culo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexi√≥n</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora todo parece estar ajustado, puedes conectarte. </font><font style="vertical-align: inherit;">La conexi√≥n de la pantalla WEH001602BG (16 caracteres, longitud de pantalla 100 mm) al Arduino se muestra en la siguiente figura: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/a58/0b4/c91/a580b4c91cf235bbb5b698986b4fdcfc.png" width="600" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los pines Arduino a los que est√°n conectados los pines de pantalla RS, E, DB4-DB7 deben indicarse cuando se inicializa la pantalla:</font></font><br>
<br>
<pre><code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">// RS, E, DB4, DB5, DB6, DB7</span></span>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OLED1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span></span><span class="hljs-function">)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si lo desea, puede conectar dos o incluso m√°s pantallas en cualquier opci√≥n de interfaz (ocho o cuatro hilos). En este caso, se pueden compartir l√≠neas de datos y RS. La elecci√≥n entre pantallas en este caso se realiza a trav√©s del terminal E, que para diferentes pantallas est√° conectado a diferentes terminales Arduino (las l√≠neas de conexi√≥n de la segunda pantalla se muestran en gris en el diagrama, el terminal E de la segunda pantalla aqu√≠ est√° conectado al pin 6 del Arduino). Por supuesto, en este caso, debe crear dos copias de la biblioteca (por ejemplo, OLED1 y OLED2), en las que todas las salidas son iguales, excepto E. Adem√°s, las pantallas pueden tener diferentes configuraciones y tama√±os (8x2, 16x2, 12x2, 12x4, etc. .). Esto tambi√©n se aplica a las pantallas LCD convencionales en el HD44780.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øY por qu√© hay un relevo para el poder? El principal inconveniente del WS0010 es la falta de "rezet" de hardware. En HD44780, el rezet incorporado puede estar justificado: el autor no tiene suficiente experiencia con pantallas LCD para asegurarlo. Pero Winstar, tratando de seguir el est√°ndar en su desarrollo, claramente no pudo hacer frente a esta tarea. Reiniciar el controlador sin apagar la alimentaci√≥n provoca la aparici√≥n de cualquier turbidez en la pantalla, y puede deshacerse de √©l solo haciendo malabares con la potencia de todo el circuito e inicializando la pantalla desde cero.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, la pantalla al apagar / encender la alimentaci√≥n puede confundir las l√≠neas en algunos lugares. La gente afirma que una inclusi√≥n completa de 8 bits (en lugar de 4 bits) ayuda, pero funcion√≥ a√∫n peor para m√≠. Tambi√©n insisten persistentemente en que en hipot√©ticos "nuevos lotes" todo esto ya se ha solucionado, pero es dif√≠cil de creer (de qu√© tipo de "nuevos" lotes estamos hablando cuando Winstar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lanz√≥</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pantallas OLED </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">desde 2008</font></a><font style="vertical-align: inherit;"> , y tuve pantallas de 13 y 14 a√±os lanzamiento?).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transmita y configure para reiniciar artificialmente la pantalla al reiniciar el Arduino sin apagar la alimentaci√≥n. Esto elimina de manera confiable la basura en la pantalla. La alimentaci√≥n de la pantalla (o pantallas) se enciende por separado a trav√©s de este rel√©, que se enciende desde el pin Arduino libre (en este caso, el pin 4) al comienzo del procedimiento de configuraci√≥n, cuando el controlador ya est√° funcionando de manera estable. Y antes de encender el rel√©, es bueno dar un retraso adicional de 1000 ms (vea el boceto a continuaci√≥n). El rel√© indicado EDR202A05 es un rel√© de l√°mina, la corriente de bobinado es de 10 mA, por lo tanto, se controla silenciosamente desde la salida de Arduino.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cuanto a la confusi√≥n entre las l√≠neas cuando se enciende, adem√°s de los cambios anteriores en el procedimiento de inicializaci√≥n, este efecto alivia perfectamente la potencia de todo el circuito de una fuente externa suficientemente potente (al menos 1-2 A) con un voltaje estable bajo carga de al menos 7.5 volt. </font><font style="vertical-align: inherit;">Esta dependencia de la nutrici√≥n es, obviamente, una fuente de discrepancias en muchas publicaciones, donde muchos autores afirman que todo funciona bien para ellos. </font><font style="vertical-align: inherit;">En este caso, la pantalla (o pantallas) se pueden conectar a trav√©s del estabilizador interno Arduino (pin 5V de la placa), o se pueden conectar a trav√©s de un estabilizador separado, pero lo principal es que el voltaje de entrada del estabilizador debe ser lo suficientemente estable, independientemente de las sobretensiones en el momento del encendido.</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cheque</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar, envi√© un boceto de demostraci√≥n, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proba_Rus_Liquid_Crystal_OLED</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , simulando una pantalla de reloj de calendario con un sensor de temperatura externo:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostrar ejemplo WEH1602</font></font></b><div class="spoiler_text"><pre><code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LiquidCrystalRus_OLED.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// initialize the library with the numbers of the interface pins</span></span>
<span class="hljs-comment"><span class="hljs-comment">// RS, E, DB4, DB5, DB6, DB7</span></span>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OLED1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> RelayPin 4 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// 4 -  </span></span></span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
delay (<span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
pinMode(RelayPin, OUTPUT);<font></font>
digitalWrite(RelayPin, HIGH); <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
delay (<span class="hljs-number"><span class="hljs-number">500</span></span>);<font></font>
  OLED1.begin(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">//16  2 </span></span><font></font>
  OLED1.clear();<font></font>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ,  </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"-22,3\337C"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//10  </span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// , 11 </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"10:22"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"16.01.17 "</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 16  </span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">13</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// , 13  ":"</span></span>
  OLED1.blink(); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
   delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
<span class="hljs-comment"><span class="hljs-comment">/*        
        13,0 
    blink
*/</span></span><font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los cambios caracter√≠sticos en la biblioteca mencionados anteriormente se aplican aqu√≠. </font><font style="vertical-align: inherit;">El programa tambi√©n muestra c√≥mo hacer que el colon parpadee en horas: minutos usando la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blink ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tenga en cuenta que una nueva salida en la misma posici√≥n destruye el parpadeo de la familiaridad, y al actualizarla, debe reanudarla nuevamente, habiendo establecido previamente el cursor invisible en la misma posici√≥n 13 en la l√≠nea cero. </font><font style="vertical-align: inherit;">Con una actualizaci√≥n de reloj real, puede ser m√°s f√°cil actualizar solo los n√∫meros en las posiciones 11-12 y 14-15, dejando intacto el colon parpadeante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los resultados de la salida del ejemplo se muestran en la foto:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/4e1/a88/249/4e1a8824925e055d968ab80e68f52229.jpg" width="500" alt="imagen"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cabe se√±alar que la foto no transmite el brillo de la pantalla OLED verde (en este caso). De hecho, es un color verde intenso, con una longitud de onda m√°s corta que la habitual de 568 nm en pantallas LED (siete segmentos o matriz). ¬øPor qu√© este √∫ltimo en el contexto de OLED parece "desvanecido", y su aplicaci√≥n combinada es dif√≠cil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El WS0010 tiene un modo gr√°fico, y las pantallas OLED gr√°ficas de Winstar (como WEG010016) tambi√©n tienen este controlador. Alguien not√≥ que incluso tienen la misma matriz. En mi opini√≥n, tratar de aplicar un modo gr√°fico en una pantalla de l√≠nea de texto no tiene sentido: la pantalla de l√≠nea tiene espacios oscuros configurados por hardware entre caracteres y l√≠neas que hacen que la imagen sea extremadamente poco est√©tica (ver </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">numerosos ejemplos de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tales intentos).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una nota final: sobre la durabilidad de los OLED Winstar. </font><font style="vertical-align: inherit;">En las hojas de datos, el tiempo se indica 100.000 horas, es decir, 11 a√±os. </font><font style="vertical-align: inherit;">Sin embargo, una de las pantallas del decimotercer a√±o de lanzamiento (brillo amarillo) hasta el momento presente (invierno del 16) ha perdido brillo en m√≠. </font><font style="vertical-align: inherit;">Es curioso que el resto de la misma fiesta (verde) y posterior (amarillo y verde de 14 a√±os) no muestre ning√∫n signo de muerte. </font><font style="vertical-align: inherit;">Por lo tanto, con certeza, no pretendo decir nada, pero por si acaso, le aconsejo que no suelde las pantallas en la placa, sino que las instale en los conectores, para que en caso de que puedan reemplazarse sin problemas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede descargar el archivo con una biblioteca gratuita y un ejemplo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desde aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: hab√≠a una soluci√≥n al problema de un inicio estable sin poder de manipulaci√≥n: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://geektimes.ru/post/287234/</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es400833/">https://habr.com/ru/post/es400833/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es400823/index.html">Ataques a la red: el saboteador m√°s peligroso es la ardilla</a></li>
<li><a href="../es400825/index.html">Google nuevamente acusado de promocionar sus productos en su propio motor de b√∫squeda</a></li>
<li><a href="../es400827/index.html">ASUS Tinker Board: otro competidor para RPi</a></li>
<li><a href="../es400829/index.html">–ù–µ—É–º–∏—Ä–∞—é—â–∏–π –º–∏—Ñ: –ø–æ—á–µ–º—É –ø–∞—Ü–∏–µ–Ω—Ç—ã –Ω–∞–∑—ã–≤–∞—é—Ç –ø–æ–≥–æ–¥—É –ø—Ä–∏—á–∏–Ω–æ–π –±–æ–ª–∏ –≤ —Å—É—Å—Ç–∞–≤–∞—Ö</a></li>
<li><a href="../es400831/index.html">Algo es desafortunado para cohetes ultraligeros simples</a></li>
<li><a href="../es400835/index.html">Reacci√≥n inesperada: la Cruz Roja requiere eliminar su simbolismo del juego Prison Architect</a></li>
<li><a href="../es400837/index.html">El cono de fotones de Mach se film√≥ por primera vez. El cerebro es el siguiente</a></li>
<li><a href="../es400839/index.html">Wi-Fi sincr√≥nico: Alliance se prepara para certificar la tecnolog√≠a TimeSync</a></li>
<li><a href="../es400841/index.html">¬°S√≠, para que vivas con 80 GB en tu cabeza! C√≥mo Hollywood convierte la tecnolog√≠a en una burla</a></li>
<li><a href="../es400843/index.html">Preg√∫ntele a Ethan: ¬øDe qu√© tama√±o era el universo reci√©n nacido?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>