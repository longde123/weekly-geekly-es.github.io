<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾🏻 🌱 😭 Servidor REST en Prolog, ¿cómo se ve? 🖖🏾 👴🏻 🐘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como una pequeña digresión para los no iniciados en la programación lógica 
 en este texto se realizará una sesión mágica con el enfoque dado a la exp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Servidor REST en Prolog, ¿cómo se ve?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471610/"> Como una pequeña digresión para los no iniciados en la programación lógica <br>  en este texto se realizará <s>una sesión mágica con el</s> enfoque dado <s>a la exposición</s> <br>  para crear un servidor REST y se miden sus parámetros. <br><br>  ¿Cuál es el truco?  Y todo es simple: lo haremos en el Prolog (en la implementación de SWI-prolog) ... <br><a name="habracut"></a><br>  Entonces lo que necesitas.  Primero, descargue (si no es así) y coloque el swi-prolog real <br>  de su sitio web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.swi-prolog.org</a> .  Es más fácil crear un pequeño archivo de tipo rest.pl con los contenidos iniciales de tipo <br><blockquote>  servidor </blockquote>  continúe descargándolo y editándolo usando el propio sistema de prólogo, como este <br>  (Se dan ejemplos para la consola de Linux, pero no muy diferente de Windows): <br><br><pre><code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$echo</span></span> <span class="hljs-string"><span class="hljs-string">"."</span></span> &gt; rest.pl <span class="hljs-variable"><span class="hljs-variable">$swipl</span></span> ... ?- [rest]. <span class="hljs-literal"><span class="hljs-literal">true</span></span>. ?- edit().</code> </pre> <br>  Después de eso, se iniciará un editor similar a emacs y puede escribir todo en él. <br><br>  Entonces, al principio, indicaremos que usaremos bibliotecas y escribiremos lo que significa <br>  inicio del servidor - en los caracteres de prólogo: - se puede leer como "esto es": <br><br><pre> <code class="plaintext hljs">:- use_module(library(http/http_server)). :- use_module(library(http/http_json)). :- http_handler(/,(M), [method(M),methods([get,post]),time_limit(10000)]).  :- http_server(http_dispatch, [port(8080)]).</code> </pre><br>  Como puede ver, planeamos que el servicio responda a los métodos get y post. <br><br><h3>  Problema modelo </h3><br>  Ahora en realidad lo que haremos.  A solicitud, responderemos con una página con un campo de entrada de número, al ingresarlo, solicitaremos el método de publicación y calcularemos este número de Fibonacci. <br><br>  Eso es: <br><br><pre> <code class="plaintext hljs">(get,_) :- (X),(X). (post,) :- http_parameters(,[val(,[integer])]), ().</code> </pre><br>  Bueno, eso es todo!  En realidad, ya escribimos nuestro servidor ... El prólogo es un lenguaje declarativo, por lo que declaramos las opciones de procesamiento.  Por cierto, se puede usar cualquier idioma: decidí escribir en lugares en ruso. <br><br>  Pero oye, ¿qué está haciendo?  Después de todo, la "forma", "respuesta" y "acortar" son nuestros predicados y aún no están definidos.  Vamos a arreglarlo: <br><br><pre> <code class="plaintext hljs">():- format('Content-type: text/html~n~n &lt;html&gt;&lt;body&gt;  &lt;br/&gt; ~w &lt;/body&gt;&lt;/html&gt;~n', []). ('&lt;form method="POST"&gt;&lt;input name="val"/&gt;&lt;/form&gt;').</code> </pre><br>  Bueno, aquí hay dos opciones para calcular: tengamos solo números positivos de Fibonacci: <br><br><pre> <code class="plaintext hljs">():-  &gt; 0, (0,1,1,,),(X), format(atom(),'~w    ~w&lt;br/&gt;~w',[,,X]), (). ():- (X), format(atom(),'  ~w  0&lt;br/&gt;~w',[,X]), ().</code> </pre><br>  Bueno, queda por determinar en realidad cuál es el número de Fibonacci: <br><br><pre> <code class="plaintext hljs">(_F, F1, N, N, F1) :- !. (F0, F1, I, N, F) :- F2 is F0+F1, I2 is I + 1, !,(F1, F2, I2, N, F).</code> </pre><br>  Esta definición, por supuesto, no <s>es</s> muy familiar <s>en el Feng Shui</s> , pero se considera casi más rápido que si escribiéramos en C ... <br><br>  Entonces, ¿esto funcionará?  Comprobamos: <br><br><pre> <code class="bash hljs"> ?- . % Started server at http://localhost:8080/ <span class="hljs-literal"><span class="hljs-literal">true</span></span>.</code> </pre><br>  Entonces, el servidor parece haber comenzado.  Por cierto, ¡es multiproceso!  Para verificar necesita abrir la dirección <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">127.0.0.1</a> : 8080 / e ingrese algún número, por ejemplo, 1000: <br><blockquote>  Cálculo de números de Fibonacci <br>  1000 número de Fibonacci es igual <br>  4346655768693745643568852767504062580 <br>  2564660517371780402481729089536555417 <br>  9490518904038798400792551692959225930 <br>  8032263477520968962323987332247116164 <br>  2996440906533187938298969649928516003 <br>  704476137795166849228875 <br></blockquote>  ¡Pues funciona! <br><br>  Un pequeño estudio del rendimiento del servidor: verifiquemos el método GET (POST obviamente depende en gran medida de un número dado, por lo que se considera un número de 10,000,000, por supuesto, pero unos segundos ...) <br><br><pre> <code class="bash hljs"> $ ab -k -c 4 -n 4000 http://127.0.0.1:8080/ ... Concurrency Level: 4 Time taken <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tests: 0.283 seconds Complete requests: 4000 Failed requests: 0 Keep-Alive requests: 4000 Total transferred: 1108000 bytes HTML transferred: 544000 bytes Requests per second: 14140.57 [<span class="hljs-comment"><span class="hljs-comment">#/sec] (mean) Time per request: 0.283 [ms] (mean) Time per request: 0.071 [ms] (mean, across all concurrent requests) Transfer rate: 3825.14 [Kbytes/sec] received ...</span></span></code> </pre><br>  Lo que 14140 solicita por segundo con 10 subprocesos: ¡esto es muy bueno para una computadora normal! <br><br>  Y sí, el prólogo tiene esa oportunidad: un aspecto lógico.  Entonces, si cambia algo en el código, solo necesita escribir la consola <br><br><pre> <code class="bash hljs"> ?- make.</code> </pre><br>  Y todos sus cambios funcionarán en nuevas solicitudes: no es necesario sobrecargar, detener, etc. <br><br>  Espero que haya estado interesado en ver cómo crear un servidor de descanso con un ejemplo tan simple.  Por supuesto, puede describir la interfaz de descanso de forma estática, como se hizo en el ejemplo, puede ingresar todo tipo de variables, usar parte de la ruta URL como variables, bueno, en general, todo es como siempre. <br><br>  Puede hacer esto dinámicamente, cambiar la lógica del programa creando, eliminando y modificando predicados, una especie de servidor auto modificable, cuyo trabajo depende del historial.  Puedes conectar bases de datos.  En general, todo es como siempre, solo trabajar es simple y agradable. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/471610/">https://habr.com/ru/post/471610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../471596/index.html">MacOS 10.15 ya no admite aplicaciones de 32 bits. Que puedes hacer</a></li>
<li><a href="../471598/index.html">PHP Microservice Framework Swoft: WebSocket Server Parte 1</a></li>
<li><a href="../471600/index.html">El número subyacente de la música moderna.</a></li>
<li><a href="../471604/index.html">No te olvides de Open Graph</a></li>
<li><a href="../471608/index.html">Sistema para evitar colisiones: Parte 1. Legislación como conocimientos tradicionales para el desarrollador</a></li>
<li><a href="../471614/index.html">Versión Rustup 1.20.0: soporte para perfiles, mejoras en la actualización y comandos de documentación</a></li>
<li><a href="../471618/index.html">C / C ++ de Python (impulso)</a></li>
<li><a href="../471620/index.html">Estrategias de implementación en Kubernetes: rodando, recreado, azul / verde, canario, oscuro (prueba A / B)</a></li>
<li><a href="../471622/index.html">Xamarin.Forms: un ejemplo simple de emulación de tarjeta basada en host</a></li>
<li><a href="../471624/index.html">Dar una presentación con un diseño UI / UX perfecto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>