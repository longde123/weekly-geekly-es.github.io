<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙎🏿 🌺 🐡 Komponen Orde Tinggi dalam Bereaksi 🧖🏿 😾 👩🏿‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini, kami menerbitkan materi tentang fungsi tingkat tinggi dalam JavaScript yang ditujukan untuk mereka yang mempelajari JavaScript. Artikel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Komponen Orde Tinggi dalam Bereaksi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/428572/">  Baru-baru ini, kami menerbitkan materi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tentang fungsi tingkat tinggi dalam JavaScript yang</a> ditujukan untuk mereka yang mempelajari JavaScript.  Artikel yang kami terjemahkan hari ini dimaksudkan untuk pengembang Bereaksi pemula.  Ini berfokus pada Komponen Tingkat Tinggi (HOC). <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/w5/om/sh/w5omshlclipwxw7f3yjt7itcooe.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Prinsip KERING dan komponen pesanan lebih tinggi dalam Bereaksi</font> </h2><br>  Anda tidak akan bisa maju cukup jauh dalam studi pemrograman dan tidak menemukan prinsip pengkultusan DRY (Jangan Ulangi Dirimu, jangan ulangi).  Terkadang para pengikutnya bahkan melangkah terlalu jauh, tetapi, dalam banyak kasus, patut diperjuangkan untuk kepatuhan.  Di sini kita akan berbicara tentang pola pengembangan Bereaksi paling populer, yang memastikan kepatuhan dengan prinsip KERING.  Ini tentang komponen tingkat tinggi.  Untuk memahami nilai komponen tingkat tinggi, pertama-tama mari kita merumuskan dan memahami masalah yang ingin mereka selesaikan. <br><br>  Misalkan Anda perlu membuat ulang panel kontrol yang mirip dengan panel Stripe.  Banyak proyek memiliki properti untuk dikembangkan sesuai dengan skema, ketika semuanya berjalan dengan baik sampai saat proyek selesai.  Ketika Anda berpikir bahwa pekerjaan itu hampir selesai, Anda melihat bahwa panel kontrol memiliki banyak tooltips berbeda yang akan muncul ketika Anda mengarahkan kursor ke elemen-elemen tertentu. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d1e/83b/414/d1e83b414be78bf8944ea3838193aaa5.gif"><br>  <i><font color="#999999">Panel Kontrol dan Tip Alat</font></i> <br><br>  Untuk menerapkan fungsi tersebut, Anda dapat menggunakan beberapa pendekatan.  Anda memutuskan untuk melakukan ini: tentukan apakah pointer berada di atas komponen individual, dan kemudian memutuskan apakah akan menunjukkan petunjuk untuk itu atau tidak.  Ada tiga komponen yang perlu dilengkapi dengan fungsi serupa.  Ini adalah <code>Info</code> , <code>TrendChart</code> , dan <code>DailyChart</code> . <br><br>  Mari kita mulai dengan komponen <code>Info</code> .  Sekarang ini adalah ikon SVG sederhana. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Info</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;svg       className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>       height={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.height}       viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;         &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;     &lt;/svg&gt;   ) } }</code> </pre> <br>  Sekarang kita perlu membuat komponen ini dapat menentukan apakah pointer mouse berada di atasnya atau tidak.  Anda dapat menggunakan event mouse <code>onMouseOut</code> dan <code>onMouseOut</code> untuk ini.  Fungsi yang diteruskan ke <code>onMouseOver</code> akan dipanggil jika pointer mouse jatuh ke area komponen, dan fungsi yang dilewatkan ke <code>onMouseOut</code> akan dipanggil ketika pointer meninggalkan komponen.  Untuk mengatur semua ini dengan cara yang diterima di Bereaksi, kami menambahkan properti <code>hovering</code> ke komponen, yang disimpan di negara bagian, yang memungkinkan kami untuk merender ulang komponen dengan memperlihatkan atau menyembunyikan tooltip jika properti ini berubah. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Info</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id} /&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;svg         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}         className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>         height={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.height}         viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;           &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;       &lt;/svg&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  Ternyata cukup baik.  Sekarang kita perlu menambahkan fungsionalitas yang sama ke dua komponen lagi - <code>TrendChart</code> dan <code>DailyChart</code> .  Mekanisme di atas untuk komponen <code>Info</code> berfungsi dengan baik, apa yang tidak rusak tidak perlu diperbaiki, jadi mari kita buat yang sama di komponen lain menggunakan kode yang sama.  Daur ulang kode untuk komponen <code>TrendChart</code> . <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TrendChart</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id}/&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;<span class="hljs-type"><span class="hljs-type">Chart</span></span>         <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'tren</span></span>d'         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}       /&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  Anda mungkin sudah mengerti apa yang harus dilakukan selanjutnya.  Hal yang sama dapat dilakukan dengan komponen terakhir kami - <code>DailyChart</code> . <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DailyChart</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id}/&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;<span class="hljs-type"><span class="hljs-type">Chart</span></span>         <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'dail</span></span>y'         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}       /&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  Sekarang semuanya sudah siap.  Anda mungkin sudah menulis sesuatu yang serupa di Bereaksi.  Ini, tentu saja, bukan kode terburuk di dunia, tetapi tidak mengikuti prinsip KERING dengan baik.  Seperti yang Anda lihat, dengan menganalisis kode komponen, kami, masing-masing, mengulangi logika yang sama. <br><br>  Masalah yang menghadang kita sekarang harus menjadi sangat jelas.  Ini adalah kode rangkap.  Untuk mengatasinya, kami ingin menyingkirkan kebutuhan untuk menyalin kode yang sama dalam kasus-kasus di mana apa yang telah kami implementasikan diperlukan oleh komponen baru.  Bagaimana cara mengatasinya?  Sebelum kita berbicara tentang ini, kita akan fokus pada beberapa konsep pemrograman yang akan sangat memudahkan pemahaman tentang solusi yang diusulkan di sini.  Kita berbicara tentang panggilan balik dan fungsi tingkat tinggi. <br><br><h2>  <font color="#3AC1EF">Fungsi Orde Tinggi</font> </h2><br>  Fungsi dalam JavaScript adalah objek kelas satu.  Ini berarti bahwa mereka, seperti objek, array atau string, dapat ditugaskan ke variabel, diteruskan ke fungsi sebagai argumen, atau dikembalikan dari fungsi lain. <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFive</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">15</span></span></code> </pre> <br>  Jika Anda tidak terbiasa dengan perilaku ini, maka kode di atas mungkin tampak aneh bagi Anda.  Mari kita bicarakan apa yang terjadi di sini.  Yaitu, kami meneruskan fungsi <code>add</code> ke fungsi <code>addFive</code> sebagai argumen, ganti namanya menjadi <code>addReference</code> dan kemudian panggil. <br><br>  Ketika konstruksi seperti itu digunakan, fungsi yang diteruskan sebagai argumen ke yang lain disebut panggilan balik (fungsi panggilan balik), dan fungsi yang menerima fungsi lain sebagai argumen disebut fungsi urutan yang lebih tinggi. <br><br>  Memberi nama entitas dalam pemrograman adalah penting, jadi di sini adalah kode yang sama yang digunakan di mana nama diubah sesuai dengan konsep yang mereka wakili. <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x,y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">higherOrderFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, callback)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } higherOrderFunction(<span class="hljs-number"><span class="hljs-number">10</span></span>, add)</code> </pre> <br>  Pola ini seharusnya tampak akrab bagi Anda.  Faktanya adalah bahwa jika Anda menggunakan, misalnya, metode array JavaScript, bekerja dengan jQuery atau lodash, maka Anda sudah menggunakan fungsi dan panggilan balik tingkat tinggi. <br><br><pre> <code class="hljs coffeescript">[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i)</span></span></span><span class="hljs-function"> =&gt;</span></span> i + <span class="hljs-number"><span class="hljs-number">5</span></span>) _.filter([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>], <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n)</span></span></span><span class="hljs-function"> =&gt;</span></span> n % <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">0</span></span> ); $(<span class="hljs-string"><span class="hljs-string">'#btn'</span></span>).<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Callbacks are everywhere'</span></span>) )</code> </pre> <br>  Mari kita kembali ke contoh kita.  Bagaimana jika, alih-alih hanya membuat fungsi <code>addFive</code> , kami ingin membuat fungsi <code>addTwenty</code> , <code>addTwenty</code> , dan lainnya seperti itu.  Mengingat bagaimana fungsi <code>addFive</code> , kita harus menyalin kodenya dan mengubahnya untuk membuat fungsi yang disebutkan di atas berdasarkan itu. <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFive</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTen</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">10</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTwenty</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">20</span></span>) } addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">15</span></span> addTen(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">20</span></span> addTwenty(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">30</span></span></code> </pre> <br>  Perlu dicatat bahwa kode kita tidak begitu mengerikan, tetapi jelas bahwa banyak fragmen di dalamnya diulang.  Tujuan kami adalah agar kami dapat membuat sebanyak mungkin fungsi yang menambahkan angka-angka tertentu ke angka-angka yang diteruskan ( <code>addFive</code> , <code>addTen</code> , <code>addTwenty</code> , dan sebagainya) sebanyak yang kami butuhkan, sambil meminimalkan duplikasi kode.  Mungkin untuk mencapai ini kita perlu membuat fungsi <code>makeAdder</code> ?  Fungsi ini dapat mengambil nomor tertentu dan tautan ke fungsi <code>add</code> .  Karena tujuan dari fungsi ini adalah untuk membuat fungsi baru yang menambahkan nomor yang diteruskan ke fungsi yang diberikan, kita dapat membuat fungsi <code>makeAdder</code> mengembalikan fungsi baru yang berisi angka tertentu (seperti angka 5 di <code>makeFive</code> ) dan dapat mengambil angka untuk menambah nomor itu. <br><br>  Lihatlah contoh implementasi mekanisme di atas. <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeAdder</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y)</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, y) } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addFive = makeAdder(<span class="hljs-number"><span class="hljs-number">5</span></span>, add) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTen = makeAdder(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTwenty = makeAdder(<span class="hljs-number"><span class="hljs-number">20</span></span>, add) addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-comment"><span class="hljs-comment">// 15 addTen(10) // 20 addTwenty(10) // 30</span></span></code> </pre> <br>  Sekarang kita dapat membuat banyak fungsi tambahan yang diperlukan, sambil meminimalkan jumlah duplikasi kode. <br><br>  Jika ini menarik, konsep bahwa ada fungsi tertentu yang memproses fungsi lain sehingga mereka dapat digunakan dengan lebih sedikit parameter daripada sebelumnya disebut "aplikasi parsial fungsi".  Pendekatan ini digunakan dalam pemrograman fungsional.  Contoh penggunaannya adalah metode <code>.bind</code> yang digunakan dalam JavaScript. <br><br>  Semua ini bagus, tetapi apa yang React lakukan dengan masalah di atas untuk menduplikasi kode untuk memproses acara mouse saat membuat komponen baru yang memerlukan fitur ini?  Faktanya adalah seperti halnya fungsi orde tinggi <code>makeAdder</code> membantu kita meminimalkan duplikasi kode, apa yang disebut "komponen orde tinggi" akan membantu kita menangani masalah yang sama dalam aplikasi Bereaksi.  Namun, di sini semuanya akan terlihat sedikit berbeda.  Yaitu, alih-alih skema kerja, di mana fungsi tingkat tinggi mengembalikan fungsi baru yang memanggil panggilan balik, komponen urutan lebih tinggi dapat mengimplementasikan skema sendiri.  Yaitu, ia dapat mengembalikan komponen baru yang menjadikan komponen yang memainkan peran sebagai "panggilan balik".  Mungkin kita sudah mengatakan banyak hal, jadi sekarang saatnya untuk beralih ke contoh. <br><br><h2>  <font color="#3AC1EF">Fungsi urutan tertinggi kami</font> </h2><br>  Fitur ini memiliki beberapa fitur berikut: <br><br><ul><li>  Dia adalah sebuah fungsi. </li><li>  Dia menerima, sebagai argumen, panggilan balik. </li><li>  Ini mengembalikan fungsi baru. </li><li>  Fungsi yang dikembalikannya dapat memanggil panggilan balik asli yang diteruskan ke fungsi tingkat tinggi kami. </li></ul><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">higherOrderFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(callback)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback() } }</code> </pre> <br><h2>  <font color="#3AC1EF">Komponen pesanan tertinggi kami</font> </h2><br>  Komponen ini dapat dikarakterisasi sebagai berikut: <br><br><ul><li>  Ini adalah komponen. </li><li>  Itu, sebagai argumen, mengambil komponen lain. </li><li>  Ini mengembalikan komponen baru. </li><li>  Komponen yang dikembalikannya dapat membuat komponen asli diteruskan ke komponen tingkat tinggi. </li></ul><br><pre> <code class="hljs scala">function higherOrderComponent (<span class="hljs-type"><span class="hljs-type">Component</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   render() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;<span class="hljs-type"><span class="hljs-type">Component</span></span> /&gt;   } } }</code> </pre> <br><h2>  <font color="#3AC1EF">Implementasi HOC</font> </h2><br>  Sekarang setelah kita, secara umum, telah mengetahui dengan tepat tindakan apa yang dilakukan oleh komponen tingkat tinggi, kita akan mulai membuat perubahan pada kode Bereaksi kita.  Jika Anda ingat, inti dari masalah yang kami selesaikan adalah bahwa kode yang mengimplementasikan logika pemrosesan peristiwa mouse harus disalin ke semua komponen yang memerlukan fitur ini. <br><br><pre> <code class="hljs coffeescript">state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })</code> </pre> <br>  Mengingat hal ini, kita memerlukan komponen tingkat tinggi (sebut saja <code>withHover</code> ) untuk merangkum kode pemrosesan peristiwa mouse, dan kemudian meneruskan properti <code>hovering</code> ke komponen yang direndernya.  Ini akan memungkinkan kami untuk mencegah duplikasi kode yang sesuai dengan menempatkannya di komponen <code>withHover</code> . <br><br>  Pada akhirnya, inilah yang ingin kita capai.  Setiap kali kita membutuhkan komponen yang perlu memiliki gagasan tentang properti <code>hovering</code> - <code>hovering</code> , kita dapat meneruskan komponen ini ke komponen orde tinggi <code>withHover</code> .  Artinya, kami ingin bekerja dengan komponen seperti yang ditunjukkan di bawah ini. <br><br><pre> <code class="hljs lisp">const InfoWithHover = withHover(<span class="hljs-name"><span class="hljs-name">Info</span></span>) const TrendChartWithHover = withHover(<span class="hljs-name"><span class="hljs-name">TrendChart</span></span>) const DailyChartWithHover = withHover(<span class="hljs-name"><span class="hljs-name">DailyChart</span></span>)</code> </pre> <br>  Kemudian, ketika apa dengan <code>withHover</code> diberikan, itu akan menjadi komponen sumber yang melewati properti <code>hovering</code> . <br><br><pre> <code class="hljs xml">function Info ({ hovering, height }) { return (   <span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>     {hovering === true       ? <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Tooltip</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.props.id}</span></span></span><span class="hljs-tag"> /&gt;</span></span>       : null}     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{height}</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 0 16 16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag">&gt;</span></span>         <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span></span><span class="hljs-tag"> /&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/&gt;</span></span> ) }</code> </pre> <br>  Faktanya, sekarang kita hanya perlu mengimplementasikan komponen <code>withHover</code> .  Dari uraian di atas, dapat dipahami bahwa ia harus melakukan tiga tindakan: <br><br><ul><li>  Bawa argumen ke Component. </li><li>  Kembalikan komponen baru. </li><li>  Berikan argumen Komponen dengan meneruskan properti <code>hovering</code> ke sana. </li></ul><br><h3>  <font color="#3AC1EF">▍ Menerima argumen Komponen</font> </h3><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Component)</span></span></span></span> { }</code> </pre> <br><h3>  <font color="#3AC1EF">▍Mengembalikan komponen baru</font> </h3><br><pre> <code class="hljs scala">function withHover (<span class="hljs-type"><span class="hljs-type">Component</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ } }</code> </pre> <br><h3>  <font color="#3AC1EF">▍ Rendering komponen Komponen dengan properti melayang diteruskan ke sana</font> </h3><br>  Sekarang kita dihadapkan dengan pertanyaan berikut: bagaimana menuju ke properti yang <code>hovering</code> ?  Bahkan, kami sudah menulis kode untuk bekerja dengan properti ini.  Kita hanya perlu menambahkannya ke komponen baru, dan kemudian meneruskan properti <code>hovering</code> ke sana ketika merender komponen diteruskan ke komponen orde tinggi sebagai argumen <code>Component</code> . <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOver</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOver}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOut</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOut}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">         </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hovering</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.hovering}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">       </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     );   } } }</span></span></code> </pre> <br>  Saya lebih suka membicarakan hal-hal ini dengan cara berikut (seperti dokumentasi Bereaksi mengatakan demikian): komponen mengubah properti menjadi antarmuka pengguna, dan komponen tingkat tinggi mengubah komponen menjadi komponen lain.  Dalam kasus kami, kami akan mengubah komponen <code>Info</code> , <code>TrendChart</code> dan <code>DailyChart</code> menjadi komponen baru yang, berkat properti <code>hovering</code> , tahu apakah pointer mouse berada di atas mereka. <br><br><h2>  <font color="#3AC1EF">Catatan tambahan</font> </h2><br>  Pada titik ini, kami telah meninjau semua informasi dasar tentang komponen tingkat tinggi.  Namun, ada beberapa hal yang lebih penting untuk dibahas. <br><br>  Jika Anda melihat HOC kami dengan <code>withHover</code> , Anda akan melihat bahwa ia memiliki setidaknya satu titik lemah.  Ini menyiratkan bahwa komponen penerima properti <code>hovering</code> tidak akan mengalami masalah dengan properti ini.  Dalam kebanyakan kasus, asumsi ini cenderung dibenarkan, tetapi mungkin saja hal ini tidak dapat diterima.  Misalnya, bagaimana jika komponen sudah memiliki properti <code>hovering</code> ?  Dalam hal ini, akan ada tabrakan nama.  Oleh karena itu, <code>withHover</code> dapat dilakukan pada komponen <code>withHover</code> , yang memungkinkan pengguna komponen ini untuk menentukan nama yang harus ditanggung oleh properti <code>hovering</code> ke komponen.  Karena <code>withHover</code> hanyalah sebuah fungsi, mari kita menulis ulang sehingga <code>withHover</code> argumen kedua yang menetapkan nama properti untuk diteruskan ke komponen. <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component, propName = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'hovering'</span></span></span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOver</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOver}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOut</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOut}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">         </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} /&gt;</span></span></span><span class="xml">       </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     );   } } }</span></span></code> </pre> <br>  Sekarang, berkat mekanisme parameter default ES6, kami menetapkan nilai standar argumen kedua sebagai <code>hovering</code> , tetapi jika pengguna komponen <code>withHover</code> ingin mengubahnya, ia dapat memberikan, dalam argumen kedua ini, nama yang ia butuhkan. <br><br><pre> <code class="hljs scala">function withHover(<span class="hljs-type"><span class="hljs-type">Component</span></span>, propName = <span class="hljs-symbol"><span class="hljs-symbol">'hoverin</span></span>g') { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     const props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       &lt;div onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver} onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}&gt;         &lt;<span class="hljs-type"><span class="hljs-type">Component</span></span> {...props} /&gt;       &lt;/div&gt;     );   } } } function <span class="hljs-type"><span class="hljs-type">Info</span></span> ({ showTooltip, height }) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;&gt;     {showTooltip === <span class="hljs-literal"><span class="hljs-literal">true</span></span>       ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id} /&gt;       : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}     &lt;svg       className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>       height={height}       viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;         &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;     &lt;/svg&gt;   &lt;/&gt; ) } const <span class="hljs-type"><span class="hljs-type">InfoWithHover</span></span> = withHover(<span class="hljs-type"><span class="hljs-type">Info</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">'showToolti</span></span>p')</code> </pre> <br><h2>  <font color="#3AC1EF">Masalah dengan implementasi Arahkan</font> </h2><br>  Anda mungkin telah memperhatikan masalah lain dengan implementasi <code>withHover</code> .  Jika kami menganalisis komponen <code>Info</code> kami, Anda akan melihat bahwa, di antaranya, menerima properti <code>height</code> .  Cara kita mengatur semuanya sekarang berarti bahwa <code>height</code> akan ditetapkan ke <code>undefined</code> .  Alasan untuk ini adalah karena komponen <code>withHover</code> adalah komponen yang bertanggung jawab untuk memberikan apa yang diteruskan kepadanya sebagai argumen <code>Component</code> .  Sekarang kami tidak mentransfer properti apa pun selain <code>hovering</code> kami buat ke komponen <code>Component</code> . <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> InfoWithHover = withHover(Info) ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;InfoWithHover height=<span class="hljs-string"><span class="hljs-string">"16px"</span></span> /&gt;</code> </pre> <br>  Properti <code>height</code> diteruskan ke komponen <code>InfoWithHover</code> .  Dan komponen apa ini?  Ini adalah komponen yang kami kembali dari <code>withHover</code> . <br><br><pre> <code class="hljs scala">function withHover(<span class="hljs-type"><span class="hljs-type">Component</span></span>, propName = <span class="hljs-symbol"><span class="hljs-symbol">'hoverin</span></span>g') { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     console.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props) <span class="hljs-comment"><span class="hljs-comment">// { height: "16px" }     const props = {       [propName]: this.state.hovering     }     return (       &lt;div onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;         &lt;Component {...props} /&gt;       &lt;/div&gt;     );   } } }</span></span></code> </pre> <br>  Di dalam komponen <code>WithHover</code> <code>this.props.height</code> adalah <code>16px</code> , tetapi di masa depan kami tidak akan melakukan apa pun dengan properti ini.  Kita perlu membuat properti ini lolos ke argumen <code>Component</code> , yang kami render. <br><br><pre> <code class="hljs kotlin">render() {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering,       ...<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props,     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       &lt;div onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver} onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}&gt;         &lt;Component {...props} /&gt;       &lt;/div&gt;     ); }</code> </pre> <br><h2>  <font color="#3AC1EF">Tentang masalah bekerja dengan komponen pihak ketiga dari tingkat tertinggi</font> </h2><br>  Kami percaya bahwa Anda telah menghargai keuntungan menggunakan komponen tingkat tinggi dalam menggunakan kembali logika di berbagai komponen tanpa perlu menyalin kode yang sama.  Sekarang mari kita bertanya pada diri sendiri apakah ada kekurangan dalam komponen tingkat tinggi.  Pertanyaan ini dapat dijawab secara positif, dan kami telah bertemu dengan kekurangan-kekurangan ini. <br><br>  Saat menggunakan HOC, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kontrol inversi</a> terjadi.  Bayangkan kita menggunakan komponen tingkat tinggi yang tidak dikembangkan oleh kita, seperti HOC <code>withRouter</code> React Router.  Menurut dokumentasi, <code>withRouter</code> akan meneruskan properti <code>match</code> , <code>location</code> , dan <code>history</code> ke komponen yang dibungkus ketika merendernya. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   const { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>, location, history } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props <span class="hljs-comment"><span class="hljs-comment">// From React Router   ... } } export default withRouter(Game)</span></span></code> </pre> <br>  Harap perhatikan bahwa kami tidak membuat elemen <code>Game</code> (mis. - <code>&lt;Game /&gt;</code> ).  Kami sepenuhnya mentransfer komponen React Router kami dan mempercayai komponen ini tidak hanya untuk merender, tetapi juga untuk meneruskan properti yang benar ke komponen kami.  Kami telah mengalami masalah ini sebelumnya ketika kami berbicara tentang kemungkinan konflik nama ketika melewati properti <code>hovering</code> .  Untuk memperbaikinya, kami memutuskan untuk mengizinkan pengguna HOC <code>withHover</code> menggunakan argumen kedua untuk mengonfigurasi nama properti terkait.  Menggunakan HOC orang lain <code>withRouter</code> kami tidak memiliki kesempatan seperti itu.  Jika properti <code>match</code> , <code>location</code> , atau <code>history</code> sudah digunakan dalam komponen <code>Game</code> , maka kami dapat mengatakan bahwa kami kurang beruntung.  Yaitu, kita harus mengubah nama-nama ini di komponen kita, atau menolak untuk menggunakan HOC <code>withRouter</code> . <br><br><h2>  <font color="#3AC1EF">Ringkasan</font> </h2><br>  Berbicara tentang HOC dalam Bereaksi, ada dua hal penting yang perlu diingat.  Pertama-tama, HOC hanyalah sebuah pola.  Komponen tingkat tinggi bahkan tidak bisa disebut sesuatu yang spesifik untuk Bereaksi, terlepas dari kenyataan bahwa mereka terkait dengan arsitektur aplikasi.  Kedua, untuk mengembangkan aplikasi Bereaksi, Anda tidak perlu tahu tentang komponen tingkat tinggi.  Anda mungkin tidak terbiasa dengan mereka, tetapi menulis program yang bagus.  Namun, seperti dalam bisnis apa pun, semakin banyak alat yang Anda miliki, semakin baik hasil pekerjaan Anda.  Dan, jika Anda menulis aplikasi menggunakan Bereaksi, Anda akan merugikan diri sendiri tanpa menambahkan HOC ke gudang senjata Anda. <br><br>  <b>Pembaca yang budiman!</b>  Apakah Anda menggunakan komponen pesanan lebih tinggi di Bereaksi? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id428572/">https://habr.com/ru/post/id428572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id428562/index.html">Droidcon London. Bagaimana itu?</a></li>
<li><a href="../id428564/index.html">Pencarian MapKit: Kiat & Trik</a></li>
<li><a href="../id428566/index.html">Fungsi tanda panah JavaScript: mengapa diperlukan, cara menanganinya, kapan menggunakannya, dan kapan tidak</a></li>
<li><a href="../id428568/index.html">Bereaksi Panduan Pengembangan Aplikasi Web Asli</a></li>
<li><a href="../id428570/index.html">Fungsi Tingkat Tinggi dalam JavaScript</a></li>
<li><a href="../id428574/index.html">Bawa komunikasi korporat ke tingkat selanjutnya dengan Zextras Chat</a></li>
<li><a href="../id428576/index.html">[bookmark] versi PDF dari tutorial Node.js dan panduan JavaScript baru</a></li>
<li><a href="../id428578/index.html">Cara memulai dengan Hibernate Search</a></li>
<li><a href="../id428580/index.html">Panduan Komunikasi yang Baik</a></li>
<li><a href="../id428582/index.html">Sejarah OOP yang Terlupakan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>